if(!self.window){window=this;}
(function(){'use strict';function aa(){return function(){}}function ba(a){return function(b){this[a]=b}}function g(a){return function(){return this[a]}}function l(a){return function(){return a}}var m,p=this;function q(a){return void 0!==a}function da(){}
function ea(a){var b=typeof a;if("object"==b)if(a){if(a instanceof Array)return"array";if(a instanceof Object)return b;var c=Object.prototype.toString.call(a);if("[object Window]"==c)return"object";if("[object Array]"==c||"number"==typeof a.length&&"undefined"!=typeof a.splice&&"undefined"!=typeof a.propertyIsEnumerable&&!a.propertyIsEnumerable("splice"))return"array";if("[object Function]"==c||"undefined"!=typeof a.call&&"undefined"!=typeof a.propertyIsEnumerable&&!a.propertyIsEnumerable("call"))return"function"}else return"null";
else if("function"==b&&"undefined"==typeof a.call)return"object";return b}function fa(a){return null===a}function ga(a){return null!=a}function ha(a){var b=ea(a);return"array"==b||"object"==b&&"number"==typeof a.length}function ia(a){return"string"==typeof a}function ja(a){return"function"==ea(a)}function ka(a){return a[la]||(a[la]=++ma)}var la="closure_uid_"+(1E9*Math.random()>>>0),ma=0;function na(a,b,c){return a.call.apply(a.bind,arguments)}
function oa(a,b,c){if(!a)throw Error();if(2<arguments.length){var d=Array.prototype.slice.call(arguments,2);return function(){var c=Array.prototype.slice.call(arguments);Array.prototype.unshift.apply(c,d);return a.apply(b,c)}}return function(){return a.apply(b,arguments)}}function pa(a,b,c){pa=Function.prototype.bind&&-1!=Function.prototype.bind.toString().indexOf("native code")?na:oa;return pa.apply(null,arguments)}
function qa(a,b){var c=Array.prototype.slice.call(arguments,1);return function(){var b=c.slice();b.push.apply(b,arguments);return a.apply(this,b)}}function r(a,b){var c=a.split("."),d=p;c[0]in d||!d.execScript||d.execScript("var "+c[0]);for(var e;c.length&&(e=c.shift());)!c.length&&q(b)?d[e]=b:d=d[e]?d[e]:d[e]={}}
function t(a,b){function c(){}c.prototype=b.prototype;a.ab=b.prototype;a.prototype=new c;a.prototype.constructor=a;a.Jg=function(a,c,f){for(var h=Array(arguments.length-2),k=2;k<arguments.length;k++)h[k-2]=arguments[k];return b.prototype[c].apply(a,h)}};function ra(a){if(Error.captureStackTrace)Error.captureStackTrace(this,ra);else{var b=Error().stack;b&&(this.stack=b)}a&&(this.message=String(a))}t(ra,Error);ra.prototype.name="CustomError";var sa=String.prototype.trim?function(a){return a.trim()}:function(a){return a.replace(/^[\s\xa0]+|[\s\xa0]+$/g,"")};
function ta(a){var b=0,c=sa(String(ua)).split(".");a=sa(String(a)).split(".");for(var d=Math.max(c.length,a.length),e=0;0==b&&e<d;e++){var f=c[e]||"",h=a[e]||"",k=/(\d*)(\D*)/g,n=/(\d*)(\D*)/g;do{var A=k.exec(f)||["","",""],O=n.exec(h)||["","",""];if(0==A[0].length&&0==O[0].length)break;b=va(0==A[1].length?0:parseInt(A[1],10),0==O[1].length?0:parseInt(O[1],10))||va(0==A[2].length,0==O[2].length)||va(A[2],O[2])}while(0==b)}return b}function va(a,b){return a<b?-1:a>b?1:0};function wa(a,b,c){this.fg=c;this.If=a;this.yg=b;this.kd=0;this.cd=null}wa.prototype.get=function(){var a;0<this.kd?(this.kd--,a=this.cd,this.cd=a.next,a.next=null):a=this.If();return a};wa.prototype.put=function(a){this.yg(a);this.kd<this.fg&&(this.kd++,a.next=this.cd,this.cd=a)};var xa=Array.prototype.indexOf?function(a,b,c){return Array.prototype.indexOf.call(a,b,c)}:function(a,b,c){c=null==c?0:0>c?Math.max(0,a.length+c):c;if(ia(a))return ia(b)&&1==b.length?a.indexOf(b,c):-1;for(;c<a.length;c++)if(c in a&&a[c]===b)return c;return-1},ya=Array.prototype.forEach?function(a,b,c){Array.prototype.forEach.call(a,b,c)}:function(a,b,c){for(var d=a.length,e=ia(a)?a.split(""):a,f=0;f<d;f++)f in e&&b.call(c,e[f],f,a)},za=Array.prototype.map?function(a,b,c){return Array.prototype.map.call(a,
b,c)}:function(a,b,c){for(var d=a.length,e=Array(d),f=ia(a)?a.split(""):a,h=0;h<d;h++)h in f&&(e[h]=b.call(c,f[h],h,a));return e},Aa=Array.prototype.reduce?function(a,b,c,d){d&&(b=pa(b,d));return Array.prototype.reduce.call(a,b,c)}:function(a,b,c,d){var e=c;ya(a,function(c,h){e=b.call(d,e,c,h,a)});return e},Ba=Array.prototype.some?function(a,b,c){return Array.prototype.some.call(a,b,c)}:function(a,b,c){for(var d=a.length,e=ia(a)?a.split(""):a,f=0;f<d;f++)if(f in e&&b.call(c,e[f],f,a))return!0;return!1};
function Ca(a,b,c){return 2>=arguments.length?Array.prototype.slice.call(a,b):Array.prototype.slice.call(a,b,c)}function Da(a){for(var b=[],c=0;c<a;c++)b[c]=0;return b}function Ea(a){for(var b=[],c=0;c<arguments.length;c++){var d=arguments[c];if("array"==ea(d))for(var e=0;e<d.length;e+=8192)for(var f=Ea.apply(null,Ca(d,e,e+8192)),h=0;h<f.length;h++)b.push(f[h]);else b.push(d)}return b};var Fa;a:{var Ga=p.navigator;if(Ga){var Ia=Ga.userAgent;if(Ia){Fa=Ia;break a}}Fa=""}function u(a){return-1!=Fa.indexOf(a)};function Ja(){return u("Opera")||u("OPR")}function Ka(){return(u("Chrome")||u("CriOS"))&&!Ja()&&!u("Edge")};function La(a){p.setTimeout(function(){throw a;},0)}var Ma;
function Na(){var a=p.MessageChannel;"undefined"===typeof a&&"undefined"!==typeof window&&window.postMessage&&window.addEventListener&&!u("Presto")&&(a=function(){var a=document.createElement("IFRAME");a.style.display="none";a.src="";document.documentElement.appendChild(a);var b=a.contentWindow,a=b.document;a.open();a.write("");a.close();var c="callImmediate"+Math.random(),d="file:"==b.location.protocol?"*":b.location.protocol+"//"+b.location.host,a=pa(function(a){if(("*"==d||a.origin==d)&&a.data==
c)this.port1.onmessage()},this);b.addEventListener("message",a,!1);this.port1={};this.port2={postMessage:function(){b.postMessage(c,d)}}});if("undefined"!==typeof a&&!u("Trident")&&!u("MSIE")){var b=new a,c={},d=c;b.port1.onmessage=function(){if(q(c.next)){c=c.next;var a=c.ze;c.ze=null;a()}};return function(a){d.next={ze:a};d=d.next;b.port2.postMessage(0)}}return"undefined"!==typeof document&&"onreadystatechange"in document.createElement("SCRIPT")?function(a){var b=document.createElement("SCRIPT");
b.onreadystatechange=function(){b.onreadystatechange=null;b.parentNode.removeChild(b);b=null;a();a=null};document.documentElement.appendChild(b)}:function(a){p.setTimeout(a,0)}};function Oa(){this.td=this.nc=null}var Qa=new wa(function(){return new Pa},function(a){a.reset()},100);Oa.prototype.add=function(a,b){var c=Qa.get();c.set(a,b);this.td?this.td.next=c:this.nc=c;this.td=c};Oa.prototype.remove=function(){var a=null;this.nc&&(a=this.nc,this.nc=this.nc.next,this.nc||(this.td=null),a.next=null);return a};function Pa(){this.next=this.scope=this.Ld=null}Pa.prototype.set=function(a,b){this.Ld=a;this.scope=b;this.next=null};
Pa.prototype.reset=function(){this.next=this.scope=this.Ld=null};function Ra(a,b){Sa||Ta();Ua||(Sa(),Ua=!0);Va.add(a,b)}var Sa;function Ta(){if(p.Promise&&p.Promise.resolve){var a=p.Promise.resolve(void 0);Sa=function(){a.then(Wa)}}else Sa=function(){var a=Wa;!ja(p.setImmediate)||p.Window&&p.Window.prototype&&p.Window.prototype.setImmediate==p.setImmediate?(Ma||(Ma=Na()),Ma(a)):p.setImmediate(a)}}var Ua=!1,Va=new Oa;function Wa(){for(var a=null;a=Va.remove();){try{a.Ld.call(a.scope)}catch(b){La(b)}Qa.put(a)}Ua=!1};function v(a,b){this.Sa=0;this.hf=void 0;this.Sc=this.dc=this.F=null;this.bd=this.Jd=!1;if(a!=da)try{var c=this;a.call(b,function(a){Xa(c,2,a)},function(a){Xa(c,3,a)})}catch(d){Xa(this,3,d)}}function Ya(){this.next=this.context=this.jc=this.Ec=this.child=null;this.wd=!1}Ya.prototype.reset=function(){this.context=this.jc=this.Ec=this.child=null;this.wd=!1};var Za=new wa(function(){return new Ya},function(a){a.reset()},100);function $a(a,b,c){var d=Za.get();d.Ec=a;d.jc=b;d.context=c;return d}
function w(a){if(a instanceof v)return a;var b=new v(da);Xa(b,2,a);return b}function ab(a){return new v(function(b,c){c(a)})}function bb(a,b,c){cb(a,b,c,null)||Ra(qa(b,a))}function db(a){return new v(function(b,c){var d=a.length,e=[];if(d)for(var f=function(a,c){d--;e[a]=c;0==d&&b(e)},h=function(a){c(a)},k=0,n;k<a.length;k++)n=a[k],bb(n,qa(f,k),h);else b(e)})}function x(){var a,b,c=new v(function(c,e){a=c;b=e});return new eb(c,a,b)}
v.prototype.then=function(a,b,c){return fb(this,ja(a)?a:null,ja(b)?b:null,c)};v.prototype.then=v.prototype.then;v.prototype.$goog_Thenable=!0;v.prototype.ne=function(a,b){return fb(this,null,a,b)};function gb(a,b){a.dc||2!=a.Sa&&3!=a.Sa||hb(a);a.Sc?a.Sc.next=b:a.dc=b;a.Sc=b}
function fb(a,b,c,d){var e=$a(null,null,null);e.child=new v(function(a,h){e.Ec=b?function(c){try{var e=b.call(d,c);a(e)}catch(A){h(A)}}:a;e.jc=c?function(b){try{var e=c.call(d,b);!q(e)&&b instanceof ib?h(b):a(e)}catch(A){h(A)}}:h});e.child.F=a;gb(a,e);return e.child}v.prototype.Eg=function(a){this.Sa=0;Xa(this,2,a)};v.prototype.Fg=function(a){this.Sa=0;Xa(this,3,a)};
function Xa(a,b,c){0==a.Sa&&(a==c&&(b=3,c=new TypeError("Promise cannot resolve to itself")),a.Sa=1,cb(c,a.Eg,a.Fg,a)||(a.hf=c,a.Sa=b,a.F=null,hb(a),3!=b||c instanceof ib||jb(a,c)))}function cb(a,b,c,d){if(a instanceof v)return gb(a,$a(b||da,c||null,d)),!0;var e;if(a)try{e=!!a.$goog_Thenable}catch(h){e=!1}else e=!1;if(e)return a.then(b,c,d),!0;e=typeof a;if("object"==e&&null!=a||"function"==e)try{var f=a.then;if(ja(f))return kb(a,f,b,c,d),!0}catch(h){return c.call(d,h),!0}return!1}
function kb(a,b,c,d,e){function f(a){k||(k=!0,d.call(e,a))}function h(a){k||(k=!0,c.call(e,a))}var k=!1;try{b.call(a,h,f)}catch(n){f(n)}}function hb(a){a.Jd||(a.Jd=!0,Ra(a.Nf,a))}function lb(a){var b=null;a.dc&&(b=a.dc,a.dc=b.next,b.next=null);a.dc||(a.Sc=null);return b}
v.prototype.Nf=function(){for(var a=null;a=lb(this);){var b=this.Sa,c=this.hf;if(3==b&&a.jc&&!a.wd)for(var d=void 0,d=this;d&&d.bd;d=d.F)d.bd=!1;if(a.child)a.child.F=null,mb(a,b,c);else try{a.wd?a.Ec.call(a.context):mb(a,b,c)}catch(e){nb.call(null,e)}Za.put(a)}this.Jd=!1};function mb(a,b,c){2==b?a.Ec.call(a.context,c):a.jc&&a.jc.call(a.context,c)}function jb(a,b){a.bd=!0;Ra(function(){a.bd&&nb.call(null,b)})}var nb=La;function ib(a){ra.call(this,a)}t(ib,ra);ib.prototype.name="cancel";
function eb(a,b,c){this.da=a;this.resolve=b;this.reject=c};function ob(a,b,c,d){c=c||function(a,b){return a==b};d=d||function(b){return a[b]};for(var e=a.length,f=b.length,h=[],k=0;k<e+1;k++)h[k]=[],h[k][0]=0;for(var n=0;n<f+1;n++)h[0][n]=0;for(k=1;k<=e;k++)for(n=1;n<=f;n++)c(a[k-1],b[n-1])?h[k][n]=h[k-1][n-1]+1:h[k][n]=Math.max(h[k-1][n],h[k][n-1]);for(var A=[],k=e,n=f;0<k&&0<n;)c(a[k-1],b[n-1])?(A.unshift(d(k-1,n-1)),k--,n--):h[k-1][n]>h[k][n-1]?k--:n--;return A}function pb(a){return Aa(arguments,function(a,c){return a+c},0)}
function qb(a){return pb.apply(null,arguments)/arguments.length}function rb(a){var b=arguments.length;if(2>b)return 0;var c=qb.apply(null,arguments);return pb.apply(null,za(arguments,function(a){return Math.pow(a-c,2)}))/(b-1)}function sb(a){return Math.sqrt(rb.apply(null,arguments))};var tb="StopIteration"in p?p.StopIteration:{message:"StopIteration",stack:""};function wb(){}wb.prototype.next=function(){throw tb;};wb.prototype.se=function(){return this};function xb(a){if(a instanceof wb)return a;if("function"==typeof a.se)return a.se(!1);if(ha(a)){var b=0,c=new wb;c.next=function(){for(;;){if(b>=a.length)throw tb;if(b in a)return a[b++];b++}};return c}throw Error("Not implemented");}
function yb(a,b){if(ha(a))try{ya(a,b,void 0)}catch(c){if(c!==tb)throw c;}else{a=xb(a);try{for(;;)b.call(void 0,a.next(),void 0,a)}catch(c){if(c!==tb)throw c;}}}function zb(a){if(Ba(arguments,function(a){return!a.length})||!arguments.length)return new wb;var b=new wb,c=arguments,d=Da(c.length);b.next=function(){if(d){for(var a=za(d,function(a,b){return c[b][a]}),b=d.length-1;0<=b;b--){if(d[b]<c[b].length-1){d[b]++;break}if(0==b){d=null;break}d[b]=0}return a}throw tb;};return b};function Ab(a){Bb(a);return a.b.concat()}function Bb(a){if(a.Ef!=a.b.length){for(var b=0,c=0;b<a.b.length;){var d=a.b[b];Cb(a.Z,d)&&(a.b[c++]=d);b++}a.b.length=c}if(a.Ef!=a.b.length){for(var e={},c=b=0;b<a.b.length;)d=a.b[b],Cb(e,d)||(a.b[c++]=d,e[d]=1),b++;a.b.length=c}}function Cb(a,b){return Object.prototype.hasOwnProperty.call(a,b)};function Db(){return u("iPhone")&&!u("iPod")&&!u("iPad")};var Eb=Ja(),Fb=u("Trident")||u("MSIE"),Gb=u("Edge"),Hb=u("Gecko")&&!(-1!=Fa.toLowerCase().indexOf("webkit")&&!u("Edge"))&&!(u("Trident")||u("MSIE"))&&!u("Edge"),Ib=-1!=Fa.toLowerCase().indexOf("webkit")&&!u("Edge");function Jb(){var a=Fa;if(Hb)return/rv\:([^\);]+)(\)|;)/.exec(a);if(Gb)return/Edge\/([\d\.]+)/.exec(a);if(Fb)return/\b(?:MSIE|rv)[: ]([^\);]+)(\)|;)/.exec(a);if(Ib)return/WebKit\/(\S+)/.exec(a)}
var ua=function(){if(Eb&&p.opera){var a;var b=p.opera.version;try{a=b()}catch(c){a=b}return a}a="";(b=Jb())&&(a=b?b[1]:"");return Fb&&(b=(b=p.document)?b.documentMode:void 0,b>parseFloat(a))?String(b):a}(),Kb={};var Lb=Db()||u("iPod"),Mb=u("iPad");!u("Android")||Ka()||u("Firefox")||Ja();var Nb=Ka(),Ob=u("Safari")&&!(Ka()||u("Coast")||Ja()||u("Edge")||u("Silk")||u("Android"))&&!(Db()||u("iPad")||u("iPod"));/*

 Copyright 2015 The Lovefield Project Authors. All Rights Reserved.

 Licensed under the Apache License, Version 2.0 (the "License");
 you may not use this file except in compliance with the License.
 You may obtain a copy of the License at

     http://www.apache.org/licenses/LICENSE-2.0

 Unless required by applicable law or agreed to in writing, software
 distributed under the License is distributed on an "AS IS" BASIS,
 WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 See the License for the specific language governing permissions and
 limitations under the License.
*/
function Pb(){this.zg=Ob||Mb||Lb;this.Xf=!(this.zg||Fb&&!Kb[10]&&!(Kb[10]=0<=ta(10)));!Fb||Kb[11]||(Kb[11]=0<=ta(11));this.Hg=Nb||Ob}var Qb;function y(){return new window.Map}function Rb(a){var b=0,c=Array(a.size);a.forEach(function(a,e){c[b++]=e});return c}function z(a){var b=0,c=Array(a.size);a.forEach(function(a){c[b++]=a});return c};/*

 Copyright 2014 The Lovefield Project Authors. All Rights Reserved.

 Licensed under the Apache License, Version 2.0 (the "License");
 you may not use this file except in compliance with the License.
 You may obtain a copy of the License at

     http://www.apache.org/licenses/LICENSE-2.0

 Unless required by applicable law or agreed to in writing, software
 distributed under the License is distributed on an "AS IS" BASIS,
 WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 See the License for the specific language governing permissions and
 limitations under the License.
*/
function Sb(a,b){this.pa=a;this.o=b||this.Ee()}var Tb=0;m=Sb.prototype;m.id=g("pa");m.Ee=function(){return{}};m.qf=g("o");m.Fa=function(){return{id:this.pa,value:this.qf()}};m.kb=function(a){return"#"==a.substr(-1)?this.pa:null};function Ub(a){return new Sb(a.id,a.value)}function Vb(a){return new Sb(Tb++,a||{})}function Wb(a){if(null==a)return null;a=new Uint8Array(a);for(var b="",c=0;c<a.length;++c)var d=a[c].toString(16),b=b+(2>d.length?"0"+d:d);return b};var Yb={};r("lf.TransactionType",Yb);Yb.READ_ONLY=0;Yb.READ_WRITE=1;function Zb(a,b){this.oe=a;this.Pa=b||null;this.O=x()}Zb.prototype.ia=function(){return 0==this.oe?this.qc():$b(this)};function $b(a){try{ac(a.Pa)}catch(b){return ab(b)}return bc(a).then(function(a){this.Pa.ia();return a}.bind(a))}function bc(a){cc(a);dc(a);return a.qc()}
function cc(a){a.Pa.tb.forEach(function(a,c){var d=this.Pa.ca().get(c),d=this.H(d.getName(),d.gb.bind(d),0),e=z(a.ya).map(function(a){return a.id()});0<e.length&&d.remove(e).ne(this.Me,this);e=z(a.na).map(function(a){return a[1]}).concat(z(a.va));d.put(e).ne(this.Me,this)},a)}function dc(a){ec(a.Pa).forEach(function(a){var c=this.H(a.getName(),Ub,1);c.remove([]);c.put(a.Fa())},a)}Zb.prototype.Me=function(a){this.O.reject(a)};function fc(a){this.Ag=a}fc.prototype.toString=g("Ag");var gc=new fc("backstore"),hc=new fc("cache"),ic=new fc("indexstore"),jc=new fc("engine"),kc=new fc("runner"),lc=new fc("observerregistry"),mc=new fc("schema");function B(a){return q(a)?new window.Set(a):new window.Set}function C(a){var b=0,c=Array(a.size);a.forEach(function(a){c[b++]=a});return c}function nc(a,b){if(b.size>a.size)return!1;var c=!0;b.forEach(function(b){c=c&&a.has(b)});return c};function oc(a,b){this.pa=a;this.o=b||{}}function pc(a){var b=B();a.forEach(function(a){b.add(a>>9)});return C(b)}oc.prototype.Y=g("pa");function qc(a,b){b.forEach(function(a){this.o[a.id()]=a.Fa()},a)}function rc(a,b){b.forEach(function(a){delete this.o[a]},a)}oc.prototype.Fa=function(){return{id:this.pa,value:JSON.stringify(this.o)}};function sc(a){return new oc(a.id,JSON.parse(a.value))};function tc(a,b,c){this.W=a;this.Fb=b;this.jf=c}m=tc.prototype;m.get=function(a){if(0==a.length)return this.Md();var b=this.Fb;return uc(this,a).then(function(c){return a.map(function(a){var e=c.get(a>>9);return b(e.o[a])})})};function uc(a,b){var c=y(),d=x(),e=pc(b).map(function(a){return new v(function(b,d){var e;try{e=this.W.get(a)}catch(A){d(A);return}e.onerror=d;e.onsuccess=function(a){a=sc(a.target.result);c.set(a.Y(),a);b()}},this)},a);db(e).then(function(){d.resolve(c)});return d.da}
m.Md=function(){return new v(function(a,b){var c=[],d;try{d=this.W.openCursor()}catch(e){b(e);return}d.onerror=b;d.onsuccess=function(){var b=d.result;if(b){var f;f=sc(b.value).o;for(var h in f)c.push(this.Fb(f[h]));b.continue()}else a(c)}.bind(this)},this)};m.Tb=function(a){return new v(function(b,c){var d;try{d=a()}catch(e){c(e);return}d.onsuccess=b;d.onerror=c},this)};
m.put=function(a){if(0==a.length)return w();var b=y();a.forEach(function(a){var d;d=a.id()>>9;var e=b.get(d)||null;null===e&&(e=this.jf(this.W.name,d));qc(e,[a]);b.set(d,e)},this);a=z(b).map(function(a){return this.Tb(function(){return this.W.put(a.Fa())}.bind(this))},this);return db(a)};
m.remove=function(a){if(0==a.length)return this.Tb(function(){return this.W.clear()}.bind(this));var b=y();a.forEach(function(a){var d=a>>9,e=b.get(d)||null;null===e&&(e=this.jf(this.W.name,d));rc(e,[a]);b.set(d,e)},this);a=z(b).map(function(a){return this.Tb(function(){return 0==Object.keys(a.o).length?this.W.delete(a.Y()):this.W.put(a.Fa())}.bind(this))},this);return db(a)};function vc(a,b,c){a=a.l(hc);var d=[c<<9,(c+1<<9)-1];b=a.Ya(b,d[0],d[1]);c=new oc(c);qc(c,b);return c}
function wc(a,b){return new oc(b)};function xc(a){this.U=a.l(hc);this.D=a.l(ic);this.g=a.l(mc)}xc.prototype.update=function(a){a.forEach(function(a){yc(this,a);zc(this,a)},this)};function zc(a,b){var c=b.getName();b.ya.forEach(function(a,b){this.U.remove(c,b)},a);b.va.forEach(function(a){this.U.set(c,a)},a);b.na.forEach(function(a){this.U.set(c,a[1])},a)}function yc(a,b){var c=a.g.table(b.getName());Ac(b).forEach(function(a){Bc(this,c,a)},a)}
function Bc(a,b,c){var d=a.D.lc.get(b.getName())||[],e=0;d.forEach(function(a){try{Cc(a,c),e++}catch(b){throw d.slice(0,e).forEach(function(a){Cc(a,[c[1],c[0]])},this),b;}},a)}function Cc(a,b){var c=null===b[1]?void 0:b[1].kb(a.getName()),d=null===b[0]?void 0:b[0].kb(a.getName());if(!q(d)&&q(c))a.add(c,b[1].id());else if(q(d)&&q(c)){if(null===c||null===d){if(c==d)return}else if(0==a.eb().compare(d,c))return;a.add(c,b[1].id());a.remove(d,b[0].id())}else q(d)&&!q(c)&&a.remove(d,b[0].id())};var Dc={};r("lf.ConstraintAction",Dc);Dc.RESTRICT=0;Dc.CASCADE=1;var Ec={};r("lf.ConstraintTiming",Ec);Ec.IMMEDIATE=0;Ec.DEFERRABLE=1;var Fc={};r("lf.Order",Fc);Fc.DESC=0;Fc.ASC=1;var Gc={};r("lf.Type",Gc);Gc.ARRAY_BUFFER=0;Gc.BOOLEAN=1;Gc.DATE_TIME=2;Gc.INTEGER=3;Gc.NUMBER=4;Gc.STRING=5;Gc.OBJECT=6;var Hc={0:null,1:!1,2:Object.freeze(new Date(0)),3:0,4:0,5:"",6:null};r("lf.type.DEFAULT_VALUES",Hc);function D(a,b){this.code=a;this.message="http://sn.im/2a0j3wn?c="+a;if(1<arguments.length)for(var c=1;c<=Math.min(4,arguments.length-1);++c)this.message+="&p"+(c-1)+"="+encodeURIComponent(arguments[c].toString().slice(0,64))}t(D,Error);function Ic(){this.Z=y();this.size=0}m=Ic.prototype;m.has=function(a){return this.Z.has(a)};m.set=function(a,b){var c=this.Z.get(a)||null;null===c&&(c=B(),this.Z.set(a,c));c.has(b)||(c.add(b),this.size++);return this};m.Wb=function(a,b){var c=this.Z.get(a)||null;null===c&&(c=B(),this.Z.set(a,c));b.forEach(function(a){c.has(a)||(c.add(a),this.size++)},this);return this};m.Ud=function(a){a.keys().forEach(function(b){var c=a.get(b);this.Wb(b,c)},this);return this};
m.delete=function(a,b){var c=this.Z.get(a,null);if(null===c)return!1;var d=c.delete(b);d&&(--this.size,0==c.size&&this.Z.delete(a));return d};m.get=function(a){a=this.Z.get(a)||null;return null===a?null:C(a)};m.clear=function(){this.Z.clear();this.size=0};m.keys=function(){return Rb(this.Z)};m.values=function(){var a=[];this.Z.forEach(function(b){a.push.apply(a,C(b))});return a};function Jc(a){this.D=a.l(ic);this.g=a.l(mc);this.U=a.l(hc);this.Wc=null}function Kc(a,b,c){var d=b.Gb().lg;c.forEach(function(a){d.forEach(function(b){if(null==a.o[b.getName()])throw new D(202,b.m());},this)},a)}function Lc(a,b,c,d){b.Gb().Nd().forEach(function(a){a.timing==d&&Mc(this,a,c)},a)}function Mc(a,b,c){var d=Nc(a,b);c.forEach(function(a){if(Oc(a[0],a[1],b.name)&&(a=a[1].kb(b.name),null!==a&&!d.fb(a)))throw new D(203,b.name);},a)}
function Nc(a,b){null===a.Wc&&(a.Wc=y());var c=a.Wc.get(b.name)||null;null===c&&(c=a.g.table(b.Qa)[b.Fc].za(),c=a.D.get(c.m()),a.Wc.set(b.name,c));return c}function Oc(a,b,c){return(null===a?null!==b:null===b)||a.kb(c)!=b.kb(c)}function Pc(a,b,c,d){b=Rc(a.g.info(),b.getName(),0);null!==b&&(b=b.filter(function(a){return a.timing==d}),0!=b.length&&Sc(a,b,c,function(a,b,c){if(b.fb(c))throw new D(203,a.name);}))}
function Tc(a,b,c){b=Rc(a.g.info(),b.getName(),1);if(null===b)return null;var d=new Ic;Sc(a,b,c,function(a,b,c){b=b.get(c);0<b.length&&d.Wb(a.Ae,b)});return d}function Uc(a,b,c){var d=new Ic;Sc(a,c,b,function(a,b,c,k){b.get(c).forEach(function(b){d.set(b,{Kd:a,qg:k[1]})})});return d}function Sc(a,b,c,d){b.forEach(function(a){var b=this.D.get(a.name),h=Nc(this,a);c.forEach(function(c){if(Oc(c[0],c[1],h.getName())){var n=c[0].kb(h.getName());d(a,b,n,c)}},this)},a)}
function Vc(a,b,c,d){0!=c.length&&(c=c.map(function(a){return[null,a]}),Lc(a,b,c,d))}function Wc(a,b,c,d){0!=c.length&&(Lc(a,b,c,d),Pc(a,b,c,d))}function Xc(a,b,c,d){0!=c.length&&(c=c.map(function(a){return[a,null]}),Pc(a,b,c,d))}
function Yc(a,b,c){var d={le:[],lf:new Ic},e=new Ic;e.Wb(b.getName(),c.map(function(a){return a.id()}));do{var f=new Ic;e.keys().forEach(function(a){var b=this.g.table(a);a=e.get(a).map(function(a){return[this.U.get(a),null]},this);b=Tc(this,b,a);null!==b&&(d.le.unshift.apply(d.le,b.keys()),f.Ud(b))},a);e=f;d.lf.Ud(e)}while(0<e.size);return d};function Zc(a){this.va=y();this.na=y();this.ya=y();this.A=a}m=Zc.prototype;m.getName=g("A");m.add=function(a){if(this.ya.has(a.id())){var b=[this.ya.get(a.id()),a];this.na.set(a.id(),b);this.ya.delete(a.id())}else this.va.set(a.id(),a)};m.modify=function(a){var b=a[1],c=a[0].id();this.va.has(c)?this.va.set(c,b):(this.na.has(c)&&(a=[this.na.get(a[0].id())[0],b]),this.na.set(c,a))};
m.delete=function(a){if(this.va.has(a.id()))this.va.delete(a.id());else if(this.na.has(a.id())){var b=this.na.get(a.id())[0];this.na.delete(a.id());this.ya.set(a.id(),b)}else this.ya.set(a.id(),a)};m.Ud=function(a){a.va.forEach(function(a){this.add(a)},this);a.na.forEach(function(a){this.modify(a)},this);a.ya.forEach(function(a){this.delete(a)},this)};
function Ac(a){var b=[];a.va.forEach(function(a){b.push([null,a])});a.na.forEach(function(a){b.push(a)});a.ya.forEach(function(a){b.push([a,null])});return b}m.toString=function(){return"["+Rb(this.va).toString()+"], ["+Rb(this.na).toString()+"], ["+Rb(this.ya).toString()+"]"};function $c(a){var b=new Zc(a.A);a.va.forEach(function(a){b.delete(a)});a.ya.forEach(function(a){b.add(a)});a.na.forEach(function(a){b.modify([a[1],a[0]])});return b}
m.ag=function(){return 0==this.va.size&&0==this.ya.size&&0==this.na.size};function ad(a,b){this.aa=y();b.forEach(function(a){this.aa.set(a.getName(),a)},this);this.g=a.l(mc);this.U=a.l(hc);this.D=a.l(ic);this.wa=new Jc(a);this.dd=new xc(a);this.tb=y()}function ec(a){var b=[];Rb(a.tb).map(function(a){return this.aa.get(a)},a).forEach(function(a){a.Db()&&(a.Aa().forEach(function(a){b.push(this.D.get(a.m()))},this),b.push(this.D.get(a.getName()+".#")))},a);return b}m=ad.prototype;m.ca=g("aa");
m.Ab=function(a,b){bd(this,a);Kc(this.wa,a,b);Vc(this.wa,a,b,0);for(var c=0;c<b.length;c++)cd(this,a,[null,b[c]])};function cd(a,b,c){var d=b.getName(),e=a.tb.get(d)||new Zc(d);a.tb.set(d,e);try{Bc(a.dd,b,c)}catch(h){throw h;}b=c[0];var f=c[1];null===b&&null!==f?(a.U.set(d,f),e.add(f)):null!==b&&null!==f?(a.U.set(d,f),e.modify(c)):null!==b&&null===f&&(a.U.remove(d,b.id()),e.delete(b))}
m.update=function(a,b){bd(this,a);Kc(this.wa,a,b);var c=b.map(function(a){return[this.U.get(a.id()),a]},this);dd(this,a,c);Wc(this.wa,a,c,0);c.forEach(function(b){cd(this,a,b)},this)};m.Od=function(a,b){bd(this,a);Kc(this.wa,a,b);for(var c=0;c<b.length;c++){var d=b[c],e=null,f,h=a.Gb().Zc();if(null===h)f=null;else{f=this.wa;var h=h.m(),k=d.kb(h);f=f.D.get(h).get(k);f=0==f.length?null:f[0]}null!=f?(e=this.U.get(f),d.pa=f,Wc(this.wa,a,[[e,d]],0)):Vc(this.wa,a,[d],0);cd(this,a,[e,d])}};
m.remove=function(a,b){bd(this,a);ed(this,a,b);Xc(this.wa,a,b,0);for(var c=0;c<b.length;c++)cd(this,a,[b[c],null])};function dd(a,b,c){b=Rc(a.g.info(),b.getName(),1);if(null!==b){var d=Uc(a.wa,c,b);d.keys().forEach(function(a){d.get(a).forEach(function(b){var c=this.g.table(b.Kd.Ae),d=this.U.get(a),n=c.gb(d.Fa());n.o[b.Kd.ub]=b.qg.o[b.Kd.Fc];cd(this,c,[d,n])},this)},a)}}
function ed(a,b,c){if(null!==Rc(a.g.info(),b.getName(),1)){b=Yc(a.wa,b,c);var d=b.lf;b.le.forEach(function(a){var b=this.g.table(a);a=d.get(a).map(function(a){return this.U.get(a)},this);Xc(this.wa,b,a,0);a.forEach(function(a){cd(this,b,[a,null])},this)},a)}}function ac(a){a.tb.forEach(function(a){var c=this.aa.get(a.getName());Vc(this.wa,c,z(a.va),1);Xc(this.wa,c,z(a.ya),1);Wc(this.wa,c,z(a.na),1)},a)}m.ia=aa();m.Kb=function(){var a=z(this.tb).map(function(a){return $c(a)});this.dd.update(a)};
function bd(a,b){if(!a.aa.has(b.getName()))throw new D(106,b.getName());};function E(a,b,c,d){this.c=a;this.s=b;this.ea=this.c==F?!1:c;this.ma=this.s==F?!1:d}var F=new (aa());E.prototype.toString=function(){return(this.ea?"(":"[")+(this.c==F?"unbound":this.c)+", "+(this.s==F?"unbound":this.s)+(this.ma?")":"]")};function fd(a){if(gd(a))return[];var b=null,c=null;a.c==F||(b=new E(F,a.c,!1,!a.ea));a.s==F||(c=new E(a.s,F,!a.ma,!1));return[b,c].filter(function(a){return null!==a})}E.prototype.reverse=function(){return new E(this.s,this.c,this.ma,this.ea)};
function hd(a,b){var c=id(a.c,b.c,!0,a.ea,b.ea);if(0==c)return!0;var d=-1==c?a:b,c=1==c?a:b;return d.s==F||d.s>c.c||d.s==c.c&&!d.ma&&!c.ea}function jd(){return new E(F,F,!1,!1)}function gd(a){return a.c==F&&a.s==F}function kd(a){return a.c==a.s&&a.c!=F&&!a.ea&&!a.ma}E.prototype.contains=function(a){var b=this.s==F||a<this.s||a==this.s&&!this.ma;return(this.c==F||a>this.c||a==this.c&&!this.ea)&&b};
function id(a,b,c,d,e){function f(a){return c?a:1==a?-1:1}d=d||!1;e=e||!1;return a==F?b==F?(d?!e:e)?d?f(1):f(-1):0:f(-1):b==F?f(1):a<b?-1:a==b?(d?!e:e)?d?f(1):f(-1):0:1}function ld(a,b){var c=id(a.c,b.c,!0,a.ea,b.ea);0==c&&(c=id(a.s,b.s,!1,a.ma,b.ma));return c}function md(a){if(0==a.length)return[];a.sort(ld);for(var b=Array(a.length+1),c=0;c<b.length;c++)b[c]=0==c?new E(F,a[c].c,!1,!0):c==b.length-1?new E(a[c-1].s,F,!0,!1):new E(a[c-1].s,a[c].c,!0,!0);return b};function G(a,b){this.entries=a;this.L=B(b);this.Wa=null}function H(a){return C(a.L)}function nd(a){return a.entries.map(function(a){return a.ua.o})}function od(a){return a.entries.map(function(a){return a.ua.id()})}function pd(a,b){return a.Wa.get(b.m())}var qd=null;function rd(){null===qd&&(qd=new G([],[]));return qd}
function sd(a){if(0==a.length)return rd();for(var b=a.reduce(function(a,b){return a+b.entries.length},0),c=Array(b),d=0,b=a.map(function(a){var b=y();a.entries.forEach(function(a){c[d++]=a;b.set(a.id,a)});return b}),e=y(),f=0;f<c.length;f++)b.every(function(a){return a.has(c[f].id)})&&e.set(c[f].id,c[f]);return new G(z(e),C(a[0].L))}function td(a){if(0==a.length)return rd();var b=y();a.forEach(function(a){a.entries.forEach(function(a){b.set(a.id,a)})});return new G(z(b),C(a[0].L))}
function ud(a,b){var c=1<b.length,d=a.map(function(a){return new vd(a,c)});return new G(d,b)}function vd(a,b){this.ua=a;this.id=wd++;this.Qd=b}var wd=0;function I(a,b){var c=b.Xa();return null!==c&&a.ua.o.hasOwnProperty(c)?a.ua.o[c]:a.Qd?a.ua.o[J(b.H())][b.getName()]:a.ua.o[b.getName()]}function xd(a,b,c){var d=b.Xa();if(null!=d)a.ua.o[d]=c;else if(a.Qd){var d=J(b.H()),e=a.ua.o[d];null==e&&(e={},a.ua.o[d]=e);e[b.getName()]=c}else a.ua.o[b.getName()]=c}
function yd(a,b,c,d){function e(a,b){if(a.Qd){var c=a.ua.o,d;for(d in c)f[d]=c[d]}else f[b[0]]=a.ua.o}var f={};e(a,b);e(c,d);a=new Sb(-1,f);return new vd(a,!0)};r("lf.bind",function(a){return new zd(a)});function zd(a){this.ga=a}r("lf.Binder",zd);zd.prototype.za=g("ga");function Ad(){this.Se=Bd();var a=Cd();this.gc=y();this.gc.set(1,Dd());this.gc.set(2,Ed());this.gc.set(4,a);this.gc.set(3,a);this.gc.set(5,Fd())}var Gd;function Hd(){null!=Gd||(Gd=new Ad);return Gd}function Id(a,b,c){return(a.gc.get(b)||null).get(c)||null}function Bd(){function a(a){return a}var b=y();b.set(1,function(a){return null===a?null:a?1:0});b.set(2,function(a){return null===a?null:a.getTime()});b.set(3,a);b.set(4,a);b.set(5,a);return b}
function Dd(){var a=y();a.set("eq",function(a,c){return a==c});a.set("neq",function(a,c){return a!=c});return a}
function Cd(){var a=Dd();a.set("between",function(a,c){return null===a||null===c[0]||null===c[1]?!1:a>=c[0]&&a<=c[1]});a.set("gte",function(a,c){return null===a||null===c?!1:a>=c});a.set("gt",function(a,c){return null===a||null===c?!1:a>c});a.set("in",function(a,c){return-1!=c.indexOf(a)});a.set("lte",function(a,c){return null===a||null===c?!1:a<=c});a.set("lt",function(a,c){return null===a||null===c?!1:a<c});return a}
function Fd(){var a=Cd();a.set("match",function(a,c){return null===a||null===c?!1:(new RegExp(c)).test(a)});return a}
function Ed(){var a=y();a.set("between",function(a,c){return null===a||null===c[0]||null===c[1]?!1:a.getTime()>=c[0].getTime()&&a.getTime()<=c[1].getTime()});a.set("eq",function(a,c){return(null===a?-1:a.getTime())==(null===c?-1:c.getTime())});a.set("gte",function(a,c){return null===a||null===c?!1:a.getTime()>=c.getTime()});a.set("gt",function(a,c){return null===a||null===c?!1:a.getTime()>c.getTime()});a.set("in",function(a,c){return c.some(function(c){return c.getTime()==a.getTime()})});a.set("lte",
function(a,c){return null===a||null===c?!1:a.getTime()<=c.getTime()});a.set("lt",function(a,c){return null===a||null===c?!1:a.getTime()<c.getTime()});a.set("neq",function(a,c){return(null===a?-1:a.getTime())!=(null===c?-1:c.getTime())});return a};function K(){this.h=this.F=null}var Jd=[];K.prototype.getParent=g("F");K.prototype.ib=function(){for(var a=this;!fa(a.getParent());)a=a.getParent();return a};function Kd(a){for(var b=0;!fa(a.getParent());)b++,a=a.getParent();return b}function L(a){return a.h||Jd}function Ld(a,b){return L(a)[b]||null}function Md(a,b,c){b.F=a;null===a.h?a.h=[b]:a.h.splice(c,0,b)}function Nd(a,b){b.F=a;null===a.h?a.h=[b]:a.h.push(b)}
function Od(a,b){var c=a.h&&a.h[b];return c?(c.F=null,a.h.splice(b,1),0==a.h.length&&(a.h=null),c):null}K.prototype.removeChild=function(a){return Od(this,L(this).indexOf(a))};function Pd(a,b,c){Ld(a,c).F=null;b.F=a;a.h[c]=b}function Qd(a,b,c){!1!==b.call(c,a)&&L(a).forEach(function(a){Qd(a,b,c)})};function Rd(){K.call(this);this.pa=Sd++}t(Rd,K);var Sd=0;Rd.prototype.Y=g("pa");function Td(a,b,c){Rd.call(this);this.M=a;this.value=b;this.C=c;this.tc=Id(Hd(),this.M.G(),this.C);this.Oa=!1;this.cc=b}t(Td,Rd);m=Td.prototype;m.Mb=function(){var a=new Td(this.M,this.value,this.C);a.cc=this.cc;a.qd(this.Oa);var b=this.Y();a.pa=b;return a};m.hb=function(a){return null!=a?(a.push(this.M),a):[this.M]};m.qd=ba("Oa");function Ud(a){var b=!1;a.value instanceof zd||(b="array"==ea(a.value)?!a.value.some(function(a){return a instanceof zd}):!0);if(!b)throw new D(501);}
m.eval=function(a){Ud(this);if("in"==this.C)return Vd(this,a);var b=a.entries.filter(function(a){return this.tc(I(a,this.M),this.value)!=this.Oa},this);return new G(b,H(a))};m.bind=function(a){if(this.cc instanceof zd){var b=this.cc.za();if(a.length<=b)throw new D(510);this.value=a[b]}else"array"==ea(this.cc)&&(this.value=this.cc.map(function(b){if(b instanceof zd){var d=b.za();if(a.length<=d)throw new D(510);return a[b.za()]}return b}))};
function Vd(a,b){var c=B(a.value),d=function(a){return null===a?!1:c.has(a)!=this.Oa}.bind(a),e=b.entries.filter(function(a){return d(I(a,this.M))},a);return new G(e,H(b))}m.toString=function(){return"value_pred("+this.M.m()+" "+this.C+(this.Oa?"(complement)":"")+" "+this.value+")"};
function Wd(a){var b=null;if("between"==a.C)b=new E(Xd(a,a.value[0]),Xd(a,a.value[1]),!1,!1);else{if("in"==a.C)return b=a.value.map(function(a){return new E(a,a,!1,!1)}),a.Oa?md(b):b;b=Xd(a,a.value);b="eq"==a.C?new E(b,b,!1,!1):"gte"==a.C?new E(b,F,!1,!1):"gt"==a.C?new E(b,F,!0,!1):"lte"==a.C?new E(F,b,!1,!1):new E(F,b,!1,!0)}return a.Oa?fd(b):[b]}function Xd(a,b){return 2==a.M.G()?b.getTime():b};function Yd(a){this.ba=a;this.Tc=this.Ca=null}function Zd(a,b){null===a.Ca&&null!=a.w&&(a.Ca=$d(a.w));return a.Ca.get(b)||null}function $d(a){var b=y();Qd(a,function(a){b.set(a.Y(),a)});return b}function ae(a,b){b.w&&(a.w=b.w.Mb());a.Tc=b}Yd.prototype.bind=function(){return this};function be(a,b){var c=a.w;null!=c&&Qd(c,function(a){a instanceof Td&&a.bind(b)})};function ce(a){Yd.call(this,a)}t(ce,Yd);function de(a){var b="";a.forEach(function(c,d){b+=c.M.m()+" ";b+=1==c.mb?"ASC":"DESC";d<a.length-1&&(b+=", ")});return b}ce.prototype.ca=function(){return B(this.c)};ce.prototype.clone=function(){var a=new ce(this.ba);ae(a,this);this.f&&(a.f=this.f.slice());this.c&&(a.c=this.c.slice());a.V=this.V;a.K=this.K;this.N&&(a.N=this.N.slice());this.ja&&(a.ja=this.ja.slice());this.Rb&&(a.Rb=this.Rb);this.Yb&&(a.Yb=this.Yb);a.Cb=this.Cb;return a};
ce.prototype.bind=function(a){ce.ab.bind.call(this,a);null!=this.Rb&&(this.V=a[this.Rb.za()]);null!=this.Yb&&(this.K=a[this.Yb.za()]);be(this,a);return this};function fe(a,b){this.Da=a;this.aa=b}fe.prototype.ib=g("Da");fe.prototype.ca=g("aa");function ge(a){var b=B();a.forEach(function(a){a.ca().forEach(b.add.bind(b))});return b};function he(a,b){this.global=a;this.La=a.l(gc);this.nd=b.map(function(a){return a.context});this.bf=b.map(function(a){return a.be});this.Ed=ge(this.bf);this.pe=ie(this);this.$a=x()}function ie(a){return a.nd.some(function(a){return!(a instanceof ce)})?1:0}m=he.prototype;
m.exec=function(){function a(){var f=d.shift();if(f){var h=e[c.length];return f.ib().exec(b,h).then(function(b){c.push(b[0]);return a()})}return w()}var b=0==this.pe?void 0:new ad(this.global,this.Ed),c=[],d=this.bf.slice(),e=this.nd;return a().then(function(){return this.La.Eb(this.pe,C(this.Ed),b).ia()}.bind(this)).then(function(){this.Zd(c);return c}.bind(this),function(a){null!=b&&b.Kb();throw a;})};m.G=g("pe");m.ca=g("Ed");m.Nb=g("$a");m.Y=function(){return ka(this)};m.Zd=aa();function je(a,b){he.call(this,a,b);this.Jb=a.l(lc)}t(je,he);je.prototype.getPriority=l(0);je.prototype.Zd=function(a){this.nd.forEach(function(b,c){ke(this.Jb,b,a[c])},this)};function le(a,b){this.i=a;this.Jb=a.l(lc);this.Ea=a.l(kc);this.dd=new xc(a);this.tb=b;var c=a.l(mc),d=this.tb.map(function(a){return c.table(a.getName())});this.aa=B(d);this.$a=x()}m=le.prototype;m.exec=function(){this.dd.update(this.tb);this.Ic();return w()};m.G=l(1);m.ca=g("aa");m.Nb=g("$a");m.Y=function(){return ka(this)};m.getPriority=l(1);m.Ic=function(){var a=me(this.Jb,this.aa);0!=a.length&&(a=new je(this.i,a),ne(this.Ea,a))};function oe(a){this.i=a;this.La=a.l(gc);this.Ea=a.l(kc)}oe.prototype.Xd=function(a){a=new le(this.i,a);ne(this.Ea,a)};function M(a,b){this.$b=a;this.j=b;this.Ta=y()}r("lf.backstore.FirebaseRawBackStore",M);M.prototype.$c=g("j");M.prototype.ad=function(){throw new D(351);};function pe(a,b){var c=x(),d=a;b.length&&(d=a.child(b));d.once("value",function(a){c.resolve(a.val())},function(a){c.reject(a)});return c.da}function qe(a,b,c){function d(a){a?e.reject(a):e.resolve()}c=c||!1;var e=x();c?a.set(b,d):a.update(b,d);return e.da}
M.prototype.Ga=function(a){return pe(this.j,"@rev/R").then(function(a){this.Na=a;return pe(this.j,"@table")}.bind(this)).then(function(b){var c=0,d;for(d in b)this.Ta.set(d,b[d]),b[d]>c&&(c=b[d]);a.sa().forEach(function(a){this.Ta.has(a.getName())||(b[a.getName()]=++c)},this);d=this.j.child("@table");return qe(d,b)}.bind(this))};
function re(a,b,c){var d=a.Ta.get(b);return null!=d?function(){var a={},b=x();this.j.orderByChild("T").equalTo(d).once("value",function(d){d.forEach(function(b){var d=c(b.val());a[parseInt(b.key(),10)]=d});b.resolve(a)});return b.da}.call(a).then(function(a){a["@rev"]={R:++this.Na};return qe(this.j,a)}.bind(a)):w()}M.prototype.rc=function(a){return re(this,a,l(null)).then(function(){this.Ta.delete(a);return qe(this.j.child("@table/"+a),null,!0)}.bind(this))};M.prototype.dropTable=M.prototype.rc;
M.prototype.oc=function(a,b,c){return re(this,a,function(a){var e=a.P;e[b]=c;return{R:this.Na+1,T:a.T,P:e}}.bind(this))};M.prototype.addTableColumn=M.prototype.oc;M.prototype.sc=function(a,b){return re(this,a,function(a){var d=a.P;delete d[b];return{R:this.Na+1,T:a.T,P:d}}.bind(this))};M.prototype.dropTableColumn=M.prototype.sc;M.prototype.Hc=function(a,b,c){return re(this,a,function(a){var e=a.P;e[c]=e[b];delete e[b];return{R:this.Na+1,T:a.T,P:e}}.bind(this))};M.prototype.renameTableColumn=M.prototype.Hc;
M.prototype.wb=function(){throw new D(351);};M.prototype.createRow=M.prototype.wb;M.prototype.zc=g("$b");M.prototype.getVersion=M.prototype.zc;M.prototype.ec=function(a){var b=x();a=this.Ta.get(a);this.j.orderByChild("T").equalTo(a).once("value",function(a){var d=[];a.forEach(function(a){d.push(a.val().P)});b.resolve(d)});return b.da};M.prototype.dump=function(){var a={},b=Rb(this.Ta).map(function(b){return this.ec(b).then(function(d){a[b]=d})}.bind(this));return db(b).then(function(){return a})};
M.prototype.dump=M.prototype.dump;function se(a,b,c){Zb.call(this,b,c);this.j=a}t(se,Zb);se.prototype.H=function(a){return this.j.xc(a)};
se.prototype.qc=function(){if(0==this.oe)return this.O.resolve(),this.O.da;var a=this.Pa.tb;if(0==a.size)this.O.resolve();else{var b=this.j.Na+1;this.j.Na=b;var c={"@rev":{R:b}};a.forEach(function(a,e){var f=this.j.Ta.get(e);a.va.forEach(function(a,d){c[d]={R:b,T:f,P:a.o}});a.na.forEach(function(a,d){c[d]={R:b,T:f,P:a[1].o}});a.ya.forEach(function(a,b){c[b]=null})},this);this.j.j.update(c,function(c){null===c?this.O.resolve():(this.j.Na=b-1,c=z(a).map(function(a){return te(this.j,a.getName())},this),
db(c).then(this.O.reject.bind(this.O),this.O.reject.bind(this.O)))}.bind(this))}return this.O.da};function ue(){this.xa=y()}function ve(a,b){if(0==b.length)return z(a.xa);var c=[];b.forEach(function(a){a=this.xa.get(a)||null;null===a||c.push(a)},a);return c}ue.prototype.getData=g("xa");ue.prototype.get=function(a){return w(ve(this,a))};function we(a,b){b.forEach(function(a){this.xa.set(a.id(),a)},a)}ue.prototype.put=function(a){we(this,a);return w()};function xe(a,b){0==b.length||b.length==a.xa.size?a.xa.clear():b.forEach(function(a){this.xa.delete(a)},a)}
ue.prototype.remove=function(a){xe(this,a);return w()};function ye(a){return 0==a.xa.size?0:Rb(a.xa).reduce(function(a,c){return a>c?a:c},0)};function ze(a,b){this.g=a;this.xf=b;this.Gc=y();this.Na=-1;this.L=y();this.Ta=y();this.Bd=null}m=ze.prototype;
m.Ga=function(a){this.j=this.xf.child(this.g.name());var b=a||function(){return w()};return pe(this.j,"@db/version").then(function(a){return null===a?qe(this.j,Ae(this),!0).then(function(){var a=new M(0,this.j);return b(a)}.bind(this)):a==this.g.version()?pe(this.j,"@rev/R").then(function(a){this.Na=a;return pe(this.j,"@table")}.bind(this)).then(function(a){for(var b in a)this.Ta.set(b,a[b]);a=this.g.sa().map(function(a){return te(this,a.getName())},this);return db(a)}.bind(this)).then(function(){Be(this);
Ce(this);return w()}.bind(this)):this.$d(a,b).then(function(){return this.Ga()}.bind(this))}.bind(this))};m.$d=function(a,b){var c=new M(a,this.j);return c.Ga(this.g).then(function(){return w()}.bind(this)).then(function(){return b(c)}).then(function(){var a=this.j.child("@db");return qe(a,{version:this.g.version()},!0)}.bind(this))};
function Ce(a){a.j.off();a.j.on("child_removed",a.ng.bind(a));a.Cd&&(a.Cd.off(),a.Gc.clear());a.Cd=a.j.orderByChild("R").startAt(a.Na+1);a.Cd.on("value",a.Xd.bind(a))}function Be(a){Tb=z(a.L).map(function(a){return ye(a)}).reduce(function(a,c){return a>c?a:c},0)+1}m.ng=function(a){var b=a.val(),c=this.Gc.get(b.T)||null;null===c&&(c=B(),this.Gc.set(b.T,c));c.add(parseInt(a.key(),10))};
m.Xd=function(a){var b=a.child("@rev/R").val();null!=b&&b!=this.Na&&(this.Na=b,a=De(this,a),a.forEach(function(a){var b=this.L.get(a.getName()),e=Rb(a.ya);0<e.length&&xe(b,e);var f=z(a.va);a.na.forEach(function(a){f.push(a[1])});we(b,f)},this),0<a.length&&this.Cc(a),Ce(this))};
function De(a,b){var c=B(),d=y();a.Ta.forEach(function(a,b){var h=this.L.get(b),k=new Zc(b);if(this.Gc.has(a)){var n=C(this.Gc.get(a));n.forEach(function(a){c.add(a)});ve(h,n).forEach(function(a){k.delete(a)})}d.set(a,k)}.bind(a));b.forEach(function(a){if("@rev"!=a.key()){var b=parseInt(a.key(),10);if(!c.has(b)){var h=a.val();a=d.get(h.T);var k=this.L.get(a.getName()),h=this.g.table(a.getName()).gb({id:b,value:h.P});k.getData().has(b)?a.modify([ve(k,[b])[0],h]):a.add(h)}}}.bind(a));return z(d).filter(function(a){return!a.ag()})}
function te(a,b){var c=x(),d=a.Ta.get(b),e=a.g.table(b);a.j.orderByChild("T").equalTo(d).once("value",function(a){var d=new ue,k=[];a.forEach(function(a){k.push(e.gb({id:parseInt(a.key(),10),value:a.val().P}))});we(d,k);this.L.set(b,d);c.resolve()}.bind(a));return c.da}function Ae(a){var b={};b["@db"]={version:a.g.version()};b["@rev"]={R:1};a.Na=1;b["@table"]={};a.g.sa().forEach(function(a,d){var e=a.getName();b["@table"][e]=d;this.L.set(e,new ue);this.Ta.set(e,d)},a);return b}
m.Eb=function(a,b,c){return new se(this,a,c)};m.xc=function(a){var b=this.L.get(a)||null;if(null!==b)return b;throw new D(101,a);};m.close=aa();m.subscribe=ba("Bd");m.Cc=function(a){null!=this.Bd&&this.Bd(a)};function N(a,b,c,d){this.j=b;this.Va=c;this.$b=a;this.Rc=d}r("lf.backstore.IndexedDBRawBackStore",N);N.prototype.$c=g("j");N.prototype.getRawDBInstance=N.prototype.$c;N.prototype.ad=g("Va");N.prototype.getRawTransaction=N.prototype.ad;N.prototype.rc=function(a){return new v(function(b,c){try{this.j.deleteObjectStore(a)}catch(d){c(d);return}b()},this)};N.prototype.dropTable=N.prototype.rc;
function Ee(a,b,c,d){return new v(function(a,f){var h;try{var k=this.Va.objectStore(b);h=k.openCursor()}catch(n){f(n);return}h.onsuccess=function(){var b=h.result;b?(c(b),b.continue()):(d(k),a())};h.onerror=f},a)}function Fe(a){var b=null;return b=a instanceof ArrayBuffer?Wb(a):a instanceof Date?a.getTime():a}
function Ge(a,b,c){function d(a){var b=sc(a.value),d=b.o,e;for(e in d){var A=Ub(d[e]);c(A);d[e]=A.Fa()}a.update(b.Fa())}function e(a){var b=Ub(a.value);c(b);a.update(b.Fa())}return Ee(a,b,a.Rc?d:e,aa())}N.prototype.oc=function(a,b,c){var d=Fe(c);return Ge(this,a,function(a){a.o[b]=d})};N.prototype.addTableColumn=N.prototype.oc;N.prototype.sc=function(a,b){return Ge(this,a,function(a){delete a.o[b]})};N.prototype.dropTableColumn=N.prototype.sc;
N.prototype.Hc=function(a,b,c){return Ge(this,a,function(a){a.o[c]=a.o[b];delete a.o[b]})};N.prototype.renameTableColumn=N.prototype.Hc;function He(a,b){var c=[];return new v(function(a,e){var f;try{f=this.Va.objectStore(b).openCursor()}catch(h){e(h);return}f.onsuccess=function(){var b=f.result;if(b){if(this.Rc){var e;e=sc(b.value).o;for(var n in e)c.push(e[n])}else c.push(b.value);b.continue()}else a(c)}.bind(this);f.onerror=e},a)}N.prototype.wb=function(a){var b={},c;for(c in a)b[c]=Fe(a[c]);return Vb(b)};
N.prototype.createRow=N.prototype.wb;N.prototype.zc=g("$b");N.prototype.getVersion=N.prototype.zc;N.prototype.dump=function(){for(var a=this.j.objectStoreNames,b=[],c=0;c<a.length;++c){var d=a.item(c);b.push(this.ec(d))}return db(b).then(function(b){var c={};b.forEach(function(b,d){c[a.item(d)]=b});return c})};N.prototype.dump=N.prototype.dump;N.prototype.ec=function(a){return He(this,a).then(function(a){return a.map(function(a){return a.value})})};function Ie(a,b){this.W=a;this.Fb=b}Ie.prototype.get=function(a){if(0==a.length)return null!=this.W.getAll?Je(this):Ke(this);a=a.map(function(a){return new v(function(c,d){var e;try{e=this.W.get(a)}catch(f){d(f);return}e.onerror=d;e.onsuccess=function(a){c(this.Fb(a.target.result))}.bind(this)},this)},this);return db(a)};
function Ke(a){return new v(function(a,c){var d=[],e;try{e=this.W.openCursor()}catch(f){c(f);return}e.onerror=c;e.onsuccess=function(){var c=e.result;c?(d.push(this.Fb(c.value)),c.continue()):a(d)}.bind(this)},a)}function Je(a){return new v(function(a,c){var d;try{d=this.W.getAll()}catch(e){c(e);return}d.onerror=c;d.onsuccess=function(){var c=d.result.map(function(a){return this.Fb(a)},this);a(c)}.bind(this)},a)}
Ie.prototype.Tb=function(a){return new v(function(b,c){var d;try{d=a()}catch(e){c(e);return}d.onsuccess=b;d.onerror=c},this)};Ie.prototype.put=function(a){if(0==a.length)return w();a=a.map(function(a){return this.Tb(function(){return this.W.put(a.Fa())}.bind(this))},this);return db(a)};
Ie.prototype.remove=function(a){return new v(function(b,c){var d=this.W.count();d.onsuccess=function(d){if(0==a.length||d.target.result==a.length)return this.Tb(function(){return this.W.clear()}.bind(this)).then(b,c);d=a.map(function(a){return this.Tb(function(){return this.W.delete(a)}.bind(this))},this);db(d).then(b,c)}.bind(this);d.onerror=c},this)};function Le(a,b,c,d,e){Zb.call(this,c,e);this.i=a;this.Va=b;this.Rc=d;this.Va.oncomplete=this.O.resolve.bind(this.O);this.Va.onabort=this.O.reject.bind(this.O)}t(Le,Zb);Le.prototype.H=function(a,b,c){return this.Rc?(c=null!=c?c:0,a=this.Va.objectStore(a),new tc(a,b,0==c?qa(vc,this.i):wc)):new Ie(this.Va.objectStore(a),b)};Le.prototype.qc=function(){return this.O.da};function Me(a,b){this.i=a;this.g=b;this.yd=b.cf().Kf||!1}m=Me.prototype;
m.Ga=function(a){var b=window.indexedDB||window.mozIndexedDB||window.webkitIndexedDB||window.msIndexedDB;if(null==b)throw new D(352);var c=a||function(){return w()};return new v(function(a,e){var f;try{f=b.open(this.g.name(),this.g.version())}catch(h){e(h);return}f.onerror=e;f.onupgradeneeded=function(a){Ne(this,c,a).then(aa(),e)}.bind(this);f.onsuccess=function(b){this.j=b.target.result;this.he().then(function(b){Tb=b+1;a(this.j)}.bind(this))}.bind(this)},this)};
function Ne(a,b,c){var d=c.target.result;c=new N(c.oldVersion,d,c.target.transaction,a.yd);Oe(d);a.g.sa().forEach(qa(a.Ff,d),a);return b(c)}function Oe(a){for(var b=[],c=0;c<a.objectStoreNames.length;++c){var d=a.objectStoreNames.item(c);-1!=d.indexOf(".")&&b.push(d)}b.forEach(function(b){try{a.deleteObjectStore(b)}catch(c){}})}m.Ff=function(a,b){a.objectStoreNames.contains(b.getName())||a.createObjectStore(b.getName(),{keyPath:"id"});b.Db()&&(b.Aa().forEach(function(b){Pe(a,b.m())},this),Pe(a,Qe(b)))};
function Pe(a,b){a.objectStoreNames.contains(b)||a.createObjectStore(b,{keyPath:"id"})}m.Eb=function(a,b,c){b=this.j.transaction(Re(b),0==a?"readonly":"readwrite");return new Le(this.i,b,a,this.yd,c)};function Re(a){var b=B();a.forEach(function(a){b.add(a.getName());a.Db()&&(a.Aa().forEach(function(a){b.add(a.m())}),b.add(Qe(a)))});return C(b)}
m.he=function(a){function b(){if(0==d.length)return w();var a=d.shift();return c(a).then(b)}function c(b){return new v(function(c,d){var O;try{O=(a||e.transaction([b])).objectStore(b).openCursor(null,"prev")}catch(ca){d(ca);return}O.onsuccess=function(a){(a=a.target.result)&&(f=Math.max(f,h(a)));c(f)};O.onerror=function(){c(f)}})}var d=this.g.sa().map(function(a){return a.getName()}),e=this.j,f=0,h=function(a){return this.yd?(a=sc(a.value),Object.keys(a.o).reduce(function(a,b){return Math.max(a,b)},
0)):a.key}.bind(this);return new v(function(a){b().then(function(){a(f)})})};m.close=function(){this.j.close()};m.xc=function(){throw new D(511);};m.subscribe=aa();m.Cc=aa();function Se(a,b,c){Zb.call(this,b,c);this.W=a;0==b&&this.O.resolve()}t(Se,Zb);Se.prototype.H=function(a){return this.W.xc(a)};Se.prototype.qc=function(){this.O.resolve();return this.O.da};function Te(a){this.g=a;this.L=y()}m=Te.prototype;m.Ga=function(){this.g.sa().forEach(this.Yf,this);return w()};m.xc=function(a){var b=this.L.get(a)||null;if(null===b)throw new D(101,a);return b};m.Eb=function(a,b,c){return new Se(this,a,c)};function Ue(a,b){if(!a.L.has(b)){var c=new ue;a.L.set(b,c)}}m.Yf=function(a){Ue(this,a.getName());a.Db()&&(a.Aa().forEach(function(a){Ue(this,a.m())},this),Ue(this,Qe(a)))};m.close=aa();m.subscribe=aa();m.Cc=aa();function Ve(a){Te.call(this,a);this.jd=null}t(Ve,Te);Ve.prototype.subscribe=function(a){null===this.jd&&(this.jd=a)};Ve.prototype.Cc=function(a){null===this.jd||this.jd(a)};function We(a,b,c){this.Va=a;this.A=b;this.Fb=c}We.prototype.get=function(a){var b=this.Fb;return Xe(this.Va,"SELECT id, value FROM "+this.A+" "+(0==a.length?"":"WHERE id IN ("+a.join(",")+")"),[],function(a){for(var d=a.rows.length,e=Array(d),f=0;f<d;++f)e[f]=b({id:a.rows.item(f).id,value:JSON.parse(a.rows.item(f).value)});return e})};
We.prototype.put=function(a){if(0==a.length)return w();var b="INSERT OR REPLACE INTO "+this.A+"(id, value) VALUES (?, ?)";a.forEach(function(a){Xe(this.Va,b,[a.id(),JSON.stringify(a.o)])},this);return w()};We.prototype.remove=function(a){Xe(this.Va,"DELETE FROM "+this.A+" "+(0==a.length?"":"WHERE id IN ("+a.join(",")+")"),[]);return w()};function Ye(a,b,c){Zb.call(this,b,c);this.j=a;this.L=y();this.Fd=[]}t(Ye,Zb);function Ze(a){return a.replace(".","__d__").replace("#","__s__")}Ye.prototype.H=function(a,b){var c=this.L.get(a)||null;null===c&&(c=new We(this,Ze(a),b),this.L.set(a,c));return c};function Xe(a,b,c,d){var e=x();a.Fd.push({Cg:b,rg:c,transform:d,O:e});return e.da}
Ye.prototype.qc=function(){var a=null,b=this.O.reject.bind(this.O),c=function(a,b){this.O.reject(b)}.bind(this),d=[],e=function(b,h){if(null!==a){var k=h;null!=a.transform&&null!=h&&(k=a.transform(h));d.push(k);a.O.resolve(k)}0<this.Fd.length?(a=k=this.Fd.shift(),b.executeSql(k.Cg,k.rg,e,c)):this.O.resolve(d)}.bind(this);0==this.oe?this.j.readTransaction(e,b):this.j.transaction(e,b);return this.O.da};function P(a,b,c){this.j=c;this.i=a;this.$b=b}r("lf.backstore.WebSqlRawBackStore",P);P.prototype.$c=g("j");P.prototype.getRawDBInstance=P.prototype.$c;P.prototype.ad=function(){throw new D(356);};P.prototype.getRawTransaction=P.prototype.ad;function $e(a){return new Ye(a.j,1,new ad(a.i,B()))}P.prototype.rc=function(a){var b=$e(this);Xe(b,"DROP TABLE "+a,[]);return b.ia()};P.prototype.dropTable=P.prototype.rc;
P.prototype.ec=function(a){var b=$e(this);Xe(b,"SELECT id, value FROM "+a,[]);return b.ia().then(function(a){for(var b=a[0].rows.length,e=Array(b),f=0;f<b;++f)e[f]={id:a[0].rows.item(f).id,value:JSON.parse(a[0].rows.item(f).value)};return w(e)})};function af(a,b,c){var d=$e(a),e="UPDATE "+b+" SET value=? WHERE id=?";return a.ec(b).then(function(a){a.forEach(function(a){a=c(a);Xe(d,e,[JSON.stringify(a.value),a.id])});return d.ia()})}
P.prototype.oc=function(a,b,c){var d=Fe(c);return af(this,a,function(a){a.value[b]=d;return a})};P.prototype.addTableColumn=P.prototype.oc;P.prototype.sc=function(a,b){return af(this,a,function(a){delete a.value[b];return a})};P.prototype.dropTableColumn=P.prototype.sc;P.prototype.Hc=function(a,b,c){return af(this,a,function(a){a.value[c]=a.value[b];delete a.value[b];return a})};P.prototype.renameTableColumn=P.prototype.Hc;P.prototype.wb=function(a){var b={},c;for(c in a)b[c]=Fe(a[c]);return Vb(b)};
P.prototype.createRow=P.prototype.wb;P.prototype.zc=g("$b");P.prototype.getVersion=P.prototype.zc;function bf(a){Xe(a,'SELECT tbl_name FROM sqlite_master WHERE type="table"',[],function(a){for(var c=Array(a.rows.length),d=0;d<c.length;++d)c[d]=a.rows.item(d).tbl_name;return c})}
P.prototype.dump=function(){var a=x(),b=$e(this);bf(b);var c={};b.ia().then(function(b){b=b[0].filter(function(a){return"__lf_ver"!=a&&"__WebKitDatabaseInfoTable__"!=a}).map(function(a){return this.ec(a).then(function(b){c[a]=b})},this);db(b).then(function(){a.resolve(c)})}.bind(this));return a.da};P.prototype.dump=P.prototype.dump;function cf(a,b,c){this.i=a;this.g=b;this.Bg=c||4194304}m=cf.prototype;m.Ga=function(a){if(null==window.openDatabase)throw new D(353);var b=a||function(){return w()};return new v(function(a,d){try{var e=window.openDatabase(this.g.name(),"",this.g.name(),this.Bg);if(null!=e)this.j=e,df(this,b).then(a,d);else throw new D(354);}catch(f){d(f)}},this)};
function df(a,b){var c=x(),d=new Ye(a.j,1,new ad(a.i,B()));Xe(d,"CREATE TABLE IF NOT EXISTS __lf_ver(id INTEGER PRIMARY KEY, v INTEGER)",[]);Xe(d,"SELECT v FROM __lf_ver WHERE id = 0",[]);d.ia().then(function(a){var d=0;a[1].rows.length&&(d=a[1].rows.item(0).v);d<this.g.version()?this.$d(b,d).then(c.resolve.bind(c)):d>this.g.version()?c.reject(new D(108)):c.resolve()}.bind(a));return c.da}m.Eb=function(a,b,c){if(null!=this.j)return new Ye(this.j,a,c);throw new D(2);};m.close=aa();
m.xc=function(){throw new D(512);};m.subscribe=function(){throw new D(355);};m.Cc=function(){throw new D(355);};m.$d=function(a,b){var c=x();ef(this).then(function(){a(new P(this.i,b,this.j)).then(function(){return this.he()}.bind(this)).then(c.resolve.bind(c))}.bind(this),c.reject.bind(c));return c.da};
function ef(a){var b=a.g.sa(),c=new Ye(a.j,1,new ad(a.i,B())),d=new Ye(a.j,1,new ad(a.i,B()));Xe(c,"INSERT OR REPLACE INTO __lf_ver VALUES (0, ?)",[a.g.version()]);bf(c);return c.ia().then(function(a){var c=a[1];c.filter(function(a){return-1!=a.indexOf("__d__")}).forEach(function(a){Xe(d,"DROP TABLE "+a,[])});var h=[],k=[],n=[];b.map(function(a){-1==c.indexOf(a.getName())&&h.push(a.getName());a.Db&&(a.Aa().forEach(function(a){a=Ze(a.m());h.push(a);k.push(a)}),a=Ze(Qe(a)),h.push(a),n.push(a))});h.forEach(function(a){Xe(d,
"CREATE TABLE "+a+"(id INTEGER PRIMARY KEY, value TEXT)",[])});return d.ia()})}m.he=function(){var a=0,b=x(),c=function(b){var c=new Ye(this.j,0);Xe(c,"SELECT MAX(id) FROM "+b,[]);return c.ia().then(function(b){b=b[0].rows.item(0)[0];a=Math.max(b,a)})}.bind(this),d=this.g.sa().map(function(a){return c(a.getName())});db(d).then(function(){b.resolve(a)},function(a){b.reject(a)});return b.da};function ff(a){this.Z=y();this.Zb=y();a.sa().forEach(function(a){this.Zb.set(a.getName(),B())},this)}m=ff.prototype;m.set=function(a,b){this.Z.set(b.id(),b);this.Zb.get(a).add(b.id())};m.Wb=function(a,b){var c=this.Zb.get(a);b.forEach(function(a){this.Z.set(a.id(),a);c.add(a.id())},this)};m.get=function(a){return this.Z.get(a)||null};function gf(a,b){return b.map(function(a){return this.get(a)},a)}
m.Ya=function(a,b,c){var d=[],e=Math.min(b,c),f=Math.max(b,c);a=this.Zb.get(a);if(a.size<f-e)a.forEach(function(a){a>=e&&a<=f&&(a=this.Z.get(a),d.push(a))},this);else for(b=e;b<=f;++b)a.has(b)&&(c=this.Z.get(b),d.push(c));return d};m.remove=function(a,b){this.Z.delete(b);this.Zb.get(a).delete(b)};m.Kg=function(a){return null!=a?this.Zb.get(a).size:this.Z.size};m.clear=function(){this.Z.clear();this.Zb.clear()};function hf(a,b,c){var d=0,e=a.length;for(c=c||jf;d<e;){var f=d+e>>1;0>c(a[f],b)?d=f+1:e=f}return d==e&&a[d]==b?d:~d}function jf(a,b){return a-b}function kf(a,b,c){c=hf(a,b,c);return 0>c?(a.splice(-(c+1),0,b),!0):!1};function mf(a,b,c,d){a=b?a.reverse():a;if(null==c&&null==d)return a;c=Math.min(q(c)?c:a.length,a.length);if(0==c)return[];d=Math.min(d||0,a.length);return a.slice(d,d+c)};function nf(){this.la=0}nf.prototype.add=function(a,b){this.la+=b};nf.prototype.remove=function(a,b){this.la-=b};nf.prototype.clear=function(){this.la=0};function of(a,b){a.clear();b.forEach(function(a){this.la+=a.la},a)};function pf(a,b,c,d){this.A=a;this.X=b;this.sf=c;this.rb=new nf;if(d){a=511;a*=a*a;if(d.length>=a)throw new D(6,a);d=qf(this,d);this.ra=d=rf(d)}else this.clear()}var sf=[];m=pf.prototype;m.getName=g("A");m.toString=function(){return this.ra.toString()};m.add=function(a,b){this.ra=this.ra.Ab(a,b)};m.set=function(a,b){this.ra=this.ra.Ab(a,b,!0)};m.remove=function(a,b){this.ra=this.ra.remove(a,b)};m.get=function(a){return this.ra.get(a)};
m.Vc=function(a){if(null==a)return this.Ka().la;if(a instanceof E){if(gd(a))return this.Ka().la;if(kd(a))return this.get(a.c).length}return this.Ya([a]).length};m.Ka=g("rb");m.Md=function(a,b,c,d){c=Array(a);this.ra.fill({offset:b?this.rb.la-a-d:d,count:a,ke:0},c);return b?c.reverse():c};
m.Ya=function(a,b,c,d){var e=tf(this.ra).b[0];if(!q(e)||0==c)return sf;b=b||!1;c=null!=c?Math.min(c,this.rb.la):this.rb.la;d=d||0;var f=Math.min(Math.max(this.rb.la-d,0),c);if(0==f)return sf;if(!q(a)||1==a.length&&a[0]instanceof E&&gd(a[0]))return this.Md(f,b,c,d);a=this.X.of(a);var h=Array(b?this.rb.la:f),k={count:0,V:h.length,reverse:b,K:d},n=1<this.eb().Sd();a.forEach(function(a){for(var b=this.X.od(a),b=this.X.Pd(a)?e:b[0],b=this.ra.Rf(b),c=0;null!=b&&k.count<k.V;){if(n){for(var d=b,f=a,Xb=k,
vb=h,Qc=d.u.eb(),ee=-1,Ha=0;Ha<d.b.length;++Ha)if(Qc.Bb(d.b[Ha],f)){ee=Ha;break}if(-1!=ee)for(Ha=ee;Ha<d.b.length&&Xb.count<Xb.V;++Ha)Qc.Bb(d.b[Ha],f)&&uf(d,Xb,vb,Ha)}else b.Ya(a,k,h);0!=k.K||b.fd(a)?c=0:c++;b=2==c?null:b.next()}},this);h.length>k.count&&h.splice(k.count,h.length-k.count);return b?mf(h,b,c,d):h};m.clear=function(){this.ra=vf(this);this.rb.clear()};m.fb=function(a){return this.ra.fb(a)};m.min=function(){return this.Ib(this.X.min.bind(this.X))};m.max=function(){return this.Ib(this.X.max.bind(this.X))};
function wf(a,b,c){if(!a.X.Gd(b.b[c]))if(1<b.b[c].length){if(null===b.b[c][0])return null}else return null;return[b.b[c],a.sf?[b.B[c]]:b.B[c]]}m.Ib=function(a){var b;a:{b=tf(this.ra);var c=0;do if(c>=b.b.length)b=b.ta,c=0;else{var d=wf(this,b,c);if(null!==d){b=d;break a}c++}while(null!==b);b=null}a:{c=xf(this.ra);d=c.b.length-1;do if(0>d)c=c.nb,d=0;else{var e=wf(this,c,d);if(null!==e){c=e;break a}d--}while(null!==c);c=null}return null===b||null===c?null:1==a(b[0],c[0])?b:c};m.Ia=g("sf");m.eb=g("X");
m.Ma=function(a,b){return null!=a?0==this.X.compare(a,b):!1};m.Fa=function(){for(var a=[],b=tf(this.ra);b;)a.push(new Sb(b.pa,[b.b,b.B])),b=b.ta;return a};function yf(a,b,c,d){a=new pf(b,a,c);d=zf(d,a);a.ra=d;return a}function Af(a,b){this.pa=a;this.u=b;this.jb=0;this.ta=this.nb=this.F=null;this.b=[];this.B=[];this.h=[];this.Rf=1==b.eb().Sd()?this.Ie:this.He}function vf(a){return new Af(Tb++,a)}function Q(a){return 0==a.jb}m=Af.prototype;m.next=g("ta");
function Bf(a){function b(a){return null!=a?a.pa.toString():"_"}var c=a.pa+"["+a.b.join("|")+"]",d=a.h.map(function(a){return a.pa}).join("|"),e=a.B.join("/"),f=b(a.nb)+"{",f=Q(a)?f+e:f+d,f=f+"}"+b(a.F);a.ta&&(a=Bf(a.ta),c=c+"  "+a[0],f=f+"  "+a[1]);return[c,f]}m.toString=function(){var a="",b=Bf(this),a=a+(b[0]+"\n"+b[1]+"\n");this.h.length&&(a+=this.h[0].toString());return a};function tf(a){return Q(a)?a:tf(a.h[0])}function xf(a){return Q(a)?a:xf(a.h[a.h.length-1])}
function Cf(a,b){b&&(b.nb=a);a&&(a.ta=b)}function qf(a,b){for(var c=b.length,d=0,e=vf(a),f=e;0<c;){var h=768<=c?511:257<=c&&511>=c?c:257,k=b.slice(d,d+h);e.b=k.map(function(a){return a.key});e.B=k.map(function(a){return a.value});d+=h;c-=h;0<c&&(h=vf(e.u),Cf(e,h),e=h)}return f}function Df(a){var b=a[0],c=vf(b.u);c.jb=b.jb+1;c.h=a;for(b=0;b<a.length;++b)a[b].F=c,0<b&&c.b.push(a[b].b[0]);return c}
function rf(a){var b=a,c=[];do c.push(b),b=b.ta;while(b);if(512>=c.length)b=Df(c);else{var d=c.length,e=0,b=vf(a.u);for(b.jb=a.jb+2;0<d;){a=768<=d?511:257<=d&&511>=d?d:257;var f=c.slice(e,e+a),h=Df(f);h.F=b;b.h.length&&(b.b.push(f[0].b[0]),Cf(b.h[b.h.length-1],h));b.h.push(h);e+=a;d-=a}}return b}m.get=function(a){var b=Ef(this,a);if(Q(this)){var c=sf;this.u.Ma(this.b[b],a)&&(c=c.concat(this.B[b]));return c}b=this.u.Ma(this.b[b],a)?b+1:b;return this.h[b].get(a)};
m.fb=function(a){var b=Ef(this,a);return this.u.Ma(this.b[b],a)?!0:Q(this)?!1:this.h[b].fb(a)};m.remove=function(a,b){Ff(this,a,-1,b);if(null===this.F){var c=this;1==this.h.length&&(c=this.h[0],c.F=null);return c}return this};function Gf(a){return Q(a)?a.b[0]:Gf(a.h[0])}function Hf(a){a.b=[];for(var b=1;b<a.h.length;++b)a.b.push(Gf(a.h[b]))}
function Ff(a,b,c,d){var e=Ef(a,b),f=Q(a);if(!f){var h=a.u.Ma(a.b[e],b)?e+1:e;if(Ff(a.h[h],b,h,d))Hf(a);else return!1}else if(!a.u.Ma(a.b[e],b))return!1;if(a.b.length>e&&a.u.Ma(a.b[e],b)){if(q(d)&&!a.u.Ia()&&f&&(h=a.B[e],d=hf(h,d,void 0),0>d?d=!1:(h.splice(d,1),d=!0),d&&a.u.Ka().remove(b,1),a.B[e].length))return!1;a.b.splice(e,1);f&&(f=a.u.Ia()?1:a.B[e].length,a.B.splice(e,1),a.u.Ka().remove(b,f))}if(256>a.b.length&&null!==a.F){a:{b=null;if(a.ta&&256<a.ta.b.length)b=a.ta,e=d=0,f=a.b.length+1;else if(a.nb&&
256<a.nb.b.length)b=a.nb,d=a.nb.b.length-1,e=Q(a)?d:d+1,f=0;else{b=!1;break a}a.b.splice(f,0,b.b[d]);b.b.splice(d,1);d=Q(a)?a.B:a.h;h=null;Q(a)?h=b.B:(h=b.h,h[e].F=a);d.splice(f,0,h[e]);h.splice(e,1);Q(b)||(Hf(b),Hf(a));b=!0}b||If(a,c)}return!0}
function If(a,b){var c,d,e;a.ta&&511>a.ta.b.length?(c=a.ta,e=d=0):a.nb&&(c=a.nb,d=c.b.length,e=Q(c)?c.B.length:c.h.length);d=[d,0].concat(a.b);Array.prototype.splice.apply(c.b,d);d=null;Q(a)?d=a.B:(d=a.h,d.forEach(function(a){a.F=c}));d=[e,0].concat(d);Array.prototype.splice.apply(Q(c)?c.B:c.h,d);Cf(a.nb,a.ta);Q(c)||Hf(c);-1!=b&&(a.F.b.splice(b,1),a.F.h.splice(b,1))}
m.Ab=function(a,b,c){var d=Ef(this,a);if(Q(this)){if(this.u.Ma(this.b[d],a)){if(c)this.u.Ka().remove(a,this.u.Ia()?1:this.B[d].length),this.B[d]=this.u.Ia()?b:[b];else{if(this.u.Ia())throw new D(201);if(!kf(this.B[d],b))throw new D(109);}this.u.Ka().add(a,1);return this}this.b.splice(d,0,a);this.B.splice(d,0,this.u.Ia()?b:[b]);this.u.Ka().add(a,1);512==this.b.length?(d=vf(this.u),a=vf(this.u),a.jb=1,a.b=[this.b[256]],a.h=[this,d],a.F=this.F,this.F=a,d.b=this.b.splice(256),d.B=this.B.splice(256),d.F=
a,Cf(d,this.ta),Cf(this,d),d=a):d=this;return d}d=this.u.Ma(this.b[d],a)?d+1:d;a=this.h[d].Ab(a,b,c);Q(a)||1!=a.b.length||(this.b.splice(d,0,a.b[0]),a.h[1].F=this,a.h[0].F=this,this.h.splice(d,1,a.h[1]),this.h.splice(d,0,a.h[0]));return 512==this.b.length?Jf(this):this};function Jf(a){var b=vf(a.u),c=vf(a.u);b.F=a.F;b.jb=a.jb+1;b.b=[a.b[256]];b.h=[a,c];a.b.splice(256,1);c.F=b;c.jb=a.jb;c.b=a.b.splice(256);c.h=a.h.splice(257);c.h.forEach(function(a){a.F=c});a.F=b;Cf(c,a.ta);Cf(a,c);return b}
function Ef(a,b){for(var c=0,d=a.b.length,e=a.u.eb();c<d;){var f=c+d>>1;-1==e.compare(a.b[f],b)?c=f+1:d=f}return c}m.Ie=function(a){if(!Q(this)){var b=Ef(this,a);this.u.Ma(this.b[b],a)&&b++;return this.h[b].Ie(a)}return this};m.He=function(a){if(!Q(this)){var b=Ef(this,a);this.u.Ma(this.b[b],a)&&(a.some(function(a){return a==F})||b++);return this.h[b].He(a)}return this};
m.Ya=function(a,b,c){function d(a){return a[0]?a[1]?0:1:-1}var e=this.u.eb(),f=0,h=this.b.length-1,k=this.b,n=d(e.vb(k[f],a)),A=d(e.vb(k[h],a));if(1!=n&&(-1!=n||-1!=A)){var O=function(a,b){var c=a+b>>1;return c==a?c+1:c},ca=function(b,c,f){if(b>=c)return 0==f?c:-1;var h=d(e.vb(k[b],a));if(0==h)return b;if(1==h)return-1;h=O(b,c);if(h==c)return 0==f?c:-1;var n=d(e.vb(k[h],a));return 0==n?ca(b,h,n):-1==n?ca(h+1,c,f):ca(b+1,h,n)},ub=function(b,c){if(b>=c)return b;var f=d(e.vb(k[c],a));if(0==f)return c;
if(-1==f)return b;f=O(b,c);if(f==c)return b;var h=d(e.vb(k[f],a));return 0==h?ub(f,c):1==h?ub(b,f-1):-1};0!=n&&(f=ca(f+1,h,A));-1!=f&&(h=ub(f,h),-1!=h&&h>=f&&Kf(this,b,c,f,h+1))}};function uf(a,b,c,d){if(a.u.Ia())!b.reverse&&b.K?b.K--:c[b.count++]=a.B[d];else for(var e=0;e<a.B[d].length&&b.count<c.length;++e)!b.reverse&&b.K?b.K--:c[b.count++]=a.B[d][e]}function Kf(a,b,c,d,e){for(;d<e&&(b.reverse||!(b.count>=b.V));++d)uf(a,b,c,d)}
m.fill=function(a,b){if(Q(this))for(var c=0;c<this.B.length&&0<a.count;++c)if(0<a.offset){if(a.offset-=this.u.Ia()?1:this.B[c].length,0>a.offset)for(var d=this.B[c].length+a.offset;d<this.B[c].length&&0<a.count;++d)b[a.ke++]=this.B[c][d],a.count--}else if(this.u.Ia())b[a.ke++]=this.B[c],a.count--;else for(d=0;d<this.B[c].length&&0<a.count;++d)b[a.ke++]=this.B[c][d],a.count--;else for(c=0;c<this.h.length&&0<a.count;++c)this.h[c].fill(a,b)};
function zf(a,b){for(var c=b.Ka(),d=a.map(function(a){var d=new Af(a.id(),b);d.b=a.o[0];d.B=a.o[1];d.b.forEach(function(a,e){c.add(a,b.Ia()?1:d.B[e].length)});return d}),e=0;e<d.length-1;++e)Cf(d[e],d[e+1]);return 1<d.length?rf(d[0]):d[0]}m.fd=function(a){return this.u.eb().fd(this.b[0],a)};function Lf(a){this.Uc=0==a?Nf:Of;this.Vd=0==a?function(a){return null!=a?a.reverse():null}:function(a){return a||null};this.ae=0==a?Pf:Qf}function Of(a,b){return a>b?1:a<b?-1:0}function Nf(a,b){return Of(b,a)}function Qf(a,b){return ld(a,b)}function Pf(a,b){return ld(b,a)}m=Lf.prototype;m.vb=function(a,b){var c=this.Vd(b),d=[c.c==F,c.s==F];if(!d[0]){var e=this.Uc(a,c.c);d[0]=c.ea?1==e:-1!=e}d[1]||(e=this.Uc(a,c.s),d[1]=c.ma?-1==e:1!=e);return d};m.compare=function(a,b){return this.Uc(a,b)};
m.min=function(a,b){return a<b?1:a==b?0:-1};m.max=function(a,b){return a>b?1:a==b?0:-1};m.Bb=function(a,b){var c=this.vb(a,b);return c[0]&&c[1]};m.fd=function(a,b){return this.Bb(a,b)};m.of=function(a){return a.filter(function(a){return null!==a}).sort(function(a,c){return this.ae(a,c)}.bind(this))};m.Pd=function(a){return this.Vd(a).c==F};m.od=function(a){a=this.Vd(a);return[a.c,a.s]};m.Gd=function(a){return null!==a};m.Sd=l(1);
m.toString=function(){return this.compare==Nf?"SimpleComparator_DESC":"SimpleComparator_ASC"};function Rf(a){Lf.call(this,a);this.Uc=0==a?Sf:Tf}t(Rf,Lf);function Tf(a,b){return null===a?null===b?0:-1:null===b?1:Of(a,b)}function Sf(a,b){return Tf(b,a)}Rf.prototype.Bb=function(a,b){return null===a?gd(b):Rf.ab.Bb.call(this,a,b)};Rf.prototype.Ib=function(a,b){return null===a?null===b?0:-1:null===b?1:null};Rf.prototype.min=function(a,b){var c=this.Ib(a,b);null===c&&(c=Rf.ab.min.call(this,a,b));return c};
Rf.prototype.max=function(a,b){var c=this.Ib(a,b);null===c&&(c=Rf.ab.max.call(this,a,b));return c};function Uf(a){this.oa=a.map(function(a){return new Lf(a)})}function Vf(a,b,c,d){for(var e=0,f=0;f<a.oa.length&&0==e;++f)e=d(a.oa[f],b[f],c[f]);return e}m=Uf.prototype;m.compare=function(a,b){return Vf(this,a,b,function(a,b,e){return b==F||e==F?0:a.compare(b,e)})};m.min=function(a,b){return Vf(this,a,b,function(a,b,e){return a.min(b,e)})};m.max=function(a,b){return Vf(this,a,b,function(a,b,e){return a.max(b,e)})};
m.vb=function(a,b){for(var c=[!0,!0],d=0;d<this.oa.length&&(c[0]||c[1]);++d){var e=this.oa[d].vb(a[d],b[d]);c[0]=c[0]&&e[0];c[1]=c[1]&&e[1]}return c};m.Bb=function(a,b){for(var c=!0,d=0;d<this.oa.length&&c;++d)c=this.oa[d].Bb(a[d],b[d]);return c};m.fd=function(a,b){return this.oa[0].Bb(a[0],b[0])};
m.of=function(a){var b=a.filter(function(a){return a.every(ga)});a=Array(this.oa.length);for(var c=0;c<a.length;c++)a[c]=b.map(function(a){return a[c]});a.forEach(function(a,b){a.sort(function(a,c){return this.oa[b].ae(a,c)}.bind(this))},this);b=Array(b.length);for(c=0;c<b.length;c++)b[c]=a.map(function(a){return a[c]});return b.sort(function(a,b){for(var c=0,h=0;h<this.oa.length&&0==c;++h)c=this.oa[h].ae(a[h],b[h]);return c}.bind(this))};m.Pd=function(a){return this.oa[0].Pd(a[0])};
m.od=function(a){var b=a.map(function(a,b){return this.oa[b].od(a)[0]},this);a=a.map(function(a,b){return this.oa[b].od(a)[1]},this);return[b,a]};m.Gd=function(a){return a.every(function(a,c){return this.oa[c].Gd(a)},this)};m.Sd=function(){return this.oa.length};function Wf(a){Uf.call(this,a);this.oa=a.map(function(a){return new Rf(a)})}t(Wf,Uf);function Xf(a){if(1==a.f.length)return new Lf(a.f[0].mb);var b=a.f.map(function(a){return a.mb});return a.f.some(function(a){return a.ba.ic()})?new Wf(b):new Uf(b)};function Yf(a){this.ga=a;this.lb=B();this.Jc=new nf;this.rb=new nf}m=Yf.prototype;m.getName=function(){return this.ga.getName()};m.add=function(a,b){null===a?(this.lb.add(b),this.Jc.add(a,1)):this.ga.add(a,b)};m.set=function(a,b){null===a?(this.lb.clear(),this.Jc.clear(),this.add(a,b)):this.ga.set(a,b)};m.remove=function(a,b){null===a?b?(this.lb.delete(b),this.Jc.remove(a,1)):(this.lb.clear(),this.Jc.clear()):this.ga.remove(a,b)};m.get=function(a){return null===a?C(this.lb):this.ga.get(a)};m.Vc=function(a){return this.ga.Vc(a)};
m.Ka=function(){of(this.rb,[this.ga.Ka(),this.Jc]);return this.rb};m.Ya=function(a,b,c,d){b=this.ga.Ya(a,b,c,d);return null!=a?b:b.concat(C(this.lb))};m.clear=function(){this.lb.clear();this.ga.clear()};m.fb=function(a){return null===a?0!=this.lb.size:this.ga.fb(a)};m.min=function(){return this.ga.min()};m.max=function(){return this.ga.max()};m.Fa=function(){return[new Sb(-2,C(this.lb))].concat(this.ga.Fa())};m.eb=function(){return this.ga.eb()};
function Zf(a,b){for(var c=-1,d=0;d<b.length;++d)if(-2==b[d].id()){c=d;break}if(-1==c)throw new D(102);var d=b[c].o,e=b.slice(0);e.splice(c,1);var c=a(e),f=new Yf(c);d.forEach(function(a){f.lb.add(a)});return f}m.Ia=function(){return this.ga.Ia()};function $f(a){this.A=a;this.qb=B();this.X=new Lf(1)}m=$f.prototype;m.getName=g("A");m.add=function(a){if("number"!=typeof a)throw new D(103);this.qb.add(a)};m.set=function(a,b){this.add(a,b)};m.remove=function(a){this.qb.delete(a)};m.get=function(a){return this.fb(a)?[a]:[]};m.min=function(){return this.Ib(this.X.min.bind(this.X))};m.max=function(){return this.Ib(this.X.max.bind(this.X))};
m.Ib=function(a){if(0==this.qb.size)return null;var b=C(this.qb).reduce(function(b,d){return null===b||1==a(d,b)?d:b},null);return[b,[b]]};m.Vc=function(){return this.qb.size};m.Ya=function(a,b,c,d){var e=a||[jd()];a=C(this.qb).filter(function(a){return e.some(function(b){return this.X.Bb(a,b)},this)},this);return mf(a,b,c,d)};m.clear=function(){this.qb.clear()};m.fb=function(a){return this.qb.has(a)};m.Fa=function(){return[new Sb(0,C(this.qb))]};m.eb=g("X");
function ag(a,b){var c=new $f(a);b[0].o.forEach(function(a){c.add(a,a)});return c}m.Ia=l(!0);m.Ka=function(){var a=new nf;a.la=this.qb.size;return a};function bg(a){this.La=a.l(gc);this.D=a.l(ic);this.U=a.l(hc)}bg.prototype.Ga=function(a){var b=a.sa(),c=function(){if(0==b.length)return w();var a=b.shift();return(a.Db()?cg(this,a):dg(this,a)).then(c)}.bind(this);return c()};function dg(a,b){var c=a.La.Eb(0,[b]),d=c.H(b.getName(),b.gb.bind(b),0).get([]).then(function(a){this.U.Wb(b.getName(),a);eg(this,b,a)}.bind(a));c.ia();return d}
function eg(a,b,c){var d=a.D.lc.get(b.getName())||[];c.forEach(function(a){d.forEach(function(b){var c=a.kb(b.getName());b.add(c,a.id())})})}function cg(a,b){var c=a.La.Eb(0,[b]),d=c.H(b.getName(),b.gb,0).get([]).then(function(a){this.U.Wb(b.getName(),a)}.bind(a)),e=b.Aa().map(function(a){return fg(this,a,c)},a).concat(gg(a,b,c));c.ia();return db(e.concat(d))}
function fg(a,b,c){c=c.H(b.m(),Ub,1);var d=Xf(b);return c.get([]).then(function(a){if(0<a.length){if(hg(b)){var c=yf.bind(void 0,d,b.m(),b.Ac);a=Zf(c,a)}else a=yf(d,b.m(),b.Ac,a);this.D.set(b.Kc,a)}}.bind(a))}function gg(a,b,c){return c.H(Qe(b),Ub,1).get([]).then(function(a){0<a.length&&(a=ag(Qe(b),a),this.D.set(b.getName(),a))}.bind(a))};function ig(){this.W=y();this.lc=y()}ig.prototype.Ga=function(a){a.sa().forEach(function(a){var c=[];this.lc.set(a.getName(),c);var d=Qe(a);if(null===this.get(d)){var e=new $f(d);c.push(e);this.W.set(d,e)}a.Aa().forEach(function(a){var b;b=Xf(a);b=new pf(a.m(),b,a.Ac);b=hg(a)&&1==a.f.length?new Yf(b):b;c.push(b);this.W.set(a.m(),b)},this)},this);return w()};ig.prototype.get=function(a){return this.W.get(a)||null};
ig.prototype.set=function(a,b){var c=this.lc.get(a)||null;null===c&&(c=[],this.lc.set(a,c));for(var d=null,e=0;e<c.length;e++)if(c[e].getName()==b.getName()){d=e;break}null!==d&&0<c.length?c.splice(d,1,b):c.push(b);this.W.set(b.getName(),b)};function jg(a){this.kc=[];q(a)&&this.add(a)}jg.prototype.toString=function(){return this.kc.map(function(a){return a.toString()}).join(",")};jg.prototype.fb=function(a){return this.kc.some(function(b){return b.contains(a)})};jg.prototype.Hb=g("kc");
jg.prototype.add=function(a){if(0!=a.length)if(a=this.kc.concat(a),1==a.length)this.kc=a;else{a.sort(ld);for(var b=[],c=a[0],d=1;d<a.length;++d)if(hd(c,a[d])){var e=a[d],f=jd();if(c.c!=F&&e.c!=F){var h=id(c.c,e.c,!0);1!=h?(f.c=c.c,f.ea=0!=h?c.ea:c.ea&&e.ea):(f.c=e.c,f.ea=e.ea)}c.s!=F&&e.s!=F&&(h=id(c.s,e.s,!1),-1!=h?(f.s=c.s,f.ma=0!=h?c.ma:c.ma&&e.ma):(f.s=e.s,f.ma=e.ma));c=f}else b.push(c),c=a[d];b.push(c);this.kc=b}};
function kg(a,b){var c=[];a.Hb().map(function(a){return b.Hb().map(function(b){var c;if(hd(a,b)){c=jd();var h=id(a.c,b.c,!0),h=0==h?a.ea?a:b:-1!=h?a:b;c.c=h.c;c.ea=h.ea;a.s==F||b.s==F?b=a.s==F?b:a:(h=id(a.s,b.s,!1),b=0==h?a.ma?a:b:-1==h?a:b);c.s=b.s;c.ma=b.ma}else c=null;return c})}).forEach(function(a){c=c.concat(a)});return new jg(c.filter(function(a){return null!==a}))};function lg(a,b){var c=[],d=null,e=null;Qd(a,function(a){var h=b(a);null==a.getParent()?e=h:Nd(d,h);var k=a.getParent();null!==k&&L(k).length==L(d).length&&(k=c.indexOf(d),-1!=k&&c.splice(k,1));1<L(a).length&&c.push(h);d=null===a.h?c[c.length-1]:h});return e}function mg(a){return ng(a,function(a){return null===a.h})}
function og(a){var b=a.getParent(),c=0;null!==b&&(c=L(b).indexOf(a),b.removeChild(a));var d=L(a).slice();d.forEach(function(d,f){a.removeChild(d);null===b||Md(b,d,c+f)});return{parent:b,children:d}}function pg(a,b){L(a).slice().forEach(function(c){a.removeChild(c);Nd(b,c)});Nd(a,b)}function qg(a){var b=Ld(a,0);og(a);pg(b,a);return b}
function rg(a,b,c){var d=Ld(a,0),e=L(d).slice();if(!e.some(function(a){return b(a)}))return a;og(a);e.forEach(function(e,h){if(b(e)){var k=c(a);Od(d,h);Nd(k,e);Md(d,k,h)}});return d}function sg(a,b,c,d){var e=a.getParent();null!==e&&(a=L(e).indexOf(a),Od(e,a),Md(e,c,a));L(b).slice().forEach(function(a){b.removeChild(a);Nd(d,a)});return c}function ng(a,b,c){function d(a){b(a)&&e.push(a);null!=c&&c(a)||L(a).forEach(d)}var e=[];d(a);return e}
function tg(a,b){var c=b||function(a){return a.toString()+"\n"},d="";Qd(a,function(a){for(var b=0;b<Kd(a);b++)d+="-";d+=c(a)});return d};function ug(a){Rd.call(this);this.Sb=a;this.Oa=!1}t(ug,Rd);m=ug.prototype;m.Mb=function(){return lg(this,function(a){if(a instanceof ug){var b=new ug(a.Sb);b.Oa=a.Oa;a=a.Y();b.pa=a;return b}return a.Mb()})};m.hb=function(a){var b=a||[];Qd(this,function(a){a!=this&&a.hb(b)}.bind(this));a=B(b);return C(a)};m.qd=function(a){this.Oa!=a&&(this.Oa=a,this.Sb="and"==this.Sb?"or":"and",L(this).forEach(function(b){return b.qd(a)}))};
m.eval=function(a){var b=L(this).map(function(b){return b.eval(a)});return vg(this,b)};function vg(a,b){return"and"==a.Sb?sd(b):td(b)}m.toString=function(){return"combined_pred_"+this.Sb.toString()};function wg(a,b,c){Rd.call(this);this.ha=a;this.ka=b;this.C=c;this.Wd=null;a=Hd();this.tc=Id(a,this.ha.G(),this.C);this.dg=a.Se.get(this.ha.G())||null}t(wg,Rd);m=wg.prototype;m.Mb=function(){var a=new wg(this.ha,this.ka,this.C),b=this.Y();a.pa=b;return a};m.hb=function(a){return null!=a?(a.push(this.ha),a.push(this.ka),a):[this.ha,this.ka]};
m.reverse=function(){var a=this.C;switch(this.C){case "gt":a="lt";break;case "lt":a="gt";break;case "gte":a="lte";break;case "lte":a="gte"}return new wg(this.ka,this.ha,a)};m.eval=function(a){var b=a.entries.filter(function(a){var b=I(a,this.ha);a=I(a,this.ka);return this.tc(b,a)},this);return new G(b,H(a))};m.toString=function(){return"join_pred("+this.ha.m()+" "+this.C+" "+this.ka.m()+")"};
function xg(a,b,c){var d=null,e=null;-1!=H(b).indexOf(J(a.ha.H()))?(d=b,e=c):(d=c,e=b);if(d.entries.length>e.entries.length){a:{b=a.ha;a.ha=a.ka;a.ka=b;b=a.C;switch(a.C){case "gt":b="lt";break;case "lt":b="gt";break;case "gte":b="lte";break;case "lte":b="gte";break;default:break a}a.C=b;a.tc=Id(Hd(),a.ha.G(),a.C)}return[e,d]}return[d,e]}function yg(a){var b={};a.hb().forEach(function(a){b[a.getName()]=null});return b}
function zg(a,b,c){null===a.Wd&&(a.Wd=yg(a.ka.H()));var d=new vd(new Sb(-1,a.Wd),!1);return yd(b,c,d,[J(a.ka.H())])}
function Ag(a,b,c,d){var e=[b,c];d||(e=xg(a,b,c));b=e[0];c=e[1];var e=b,f=c,h=a.ha,k=a.ka;d&&(e=c,f=b,h=a.ka,k=a.ha);var n=new Ic,A=[];e.entries.forEach(function(a){var b=String(I(a,h));n.set(b,a)});var O=H(e),ca=H(f);f.entries.forEach(function(a){var b=I(a,k),c=String(b);null!==b&&n.has(c)?n.get(c).forEach(function(b){b=yd(a,ca,b,O);A.push(b)}):d&&A.push(zg(this,a,ca))}.bind(a));a=H(b).concat(H(c));return new G(A,a)}
function Bg(a,b,c,d,e){function f(a,b){var c=new vd(b,1<O.length),c=yd(a,ca,c,O);A.push(c)}var h=d.Vf.H(),k=b,n=c;-1!=H(b).indexOf(J(h))&&(k=c,n=b);var A=[],O=H(n),ca=H(k);k.entries.forEach(function(a){var b=this.dg(I(a,d.kg)),b=d.index.get(b);0!=b.length&&(d.index.Ia()?f(a,e.get(b[0])):gf(e,b).forEach(f.bind(null,a)))},a);a=H(k).concat(H(n));return new G(A,a)};function Cg(a,b,c){return null===b?new Td(a,b,c):q(b.m)?new wg(a,b,c):new Td(a,b,c)};var Dg={};r("lf.schema.DataStoreType",Dg);Dg.INDEXED_DB=0;Dg.MEMORY=1;Dg.LOCAL_STORAGE=2;Dg.FIREBASE=3;Dg.WEB_SQL=4;Dg.OBSERVABLE_STORE=5;function Eg(a,b,c,d){this.Kc=a;this.name=b;this.Ac=c;this.f=d}Eg.prototype.m=function(){return this.Kc+"."+this.name};function hg(a){return a.f.some(function(a){return a.ba.ic()})}function R(a,b,c,d){this.A=a;this.qa=c;this.J=b;this.ld=d;this.bb=null}r("lf.schema.Table",R);R.prototype.getName=g("A");R.prototype.getName=R.prototype.getName;R.prototype.Xa=g("bb");
function J(a){return a.bb||a.A}R.prototype.pc=function(a){var b=new this.constructor(this.A);b.bb=a;b.wg=this.wg;return b};R.prototype.as=R.prototype.pc;R.prototype.createRow=R.prototype.wb;R.prototype.deserializeRow=R.prototype.gb;R.prototype.Aa=g("qa");R.prototype.getIndices=R.prototype.Aa;R.prototype.hb=g("J");R.prototype.getColumns=R.prototype.hb;R.prototype.getConstraint=R.prototype.Gb;R.prototype.Db=g("ld");R.prototype.persistentIndex=R.prototype.Db;function Qe(a){return a.A+".#"};function S(a,b){this.child=a;this.Lb=b;this.bb=null}m=S.prototype;m.getName=function(){return this.Lb+"("+this.child.getName()+")"};m.m=function(){return this.Lb+"("+this.child.m()+")"};m.H=function(){return this.child.H()};m.toString=function(){return this.m()};m.G=function(){return this.child.G()};m.Xa=g("bb");m.Aa=function(){return[]};m.za=l(null);m.ic=l(!1);m.pc=function(a){this.bb=a;return this};S.prototype.as=S.prototype.pc;
function Fg(a){for(var b=[a];a instanceof S;)b.push(a.child),a=a.child;return b}function Gg(a){this.bb=a||null;this.S=new R("#UnknownTable",[],[],!1)}m=Gg.prototype;m.getName=l("*");m.m=function(){return this.getName()};m.toString=function(){return this.m()};m.H=g("S");m.G=l(4);m.Xa=g("bb");m.Aa=function(){return[]};m.za=l(null);m.ic=l(!1);r("lf.fn.avg",function(a){return new S(a,"AVG")});function Hg(a){return new S(a||new Gg,"COUNT")}r("lf.fn.count",Hg);function Ig(a){return new S(a,"DISTINCT")}r("lf.fn.distinct",Ig);r("lf.fn.max",function(a){return new S(a,"MAX")});r("lf.fn.min",function(a){return new S(a,"MIN")});r("lf.fn.stddev",function(a){return new S(a,"STDDEV")});r("lf.fn.sum",function(a){return new S(a,"SUM")});r("lf.fn.geomean",function(a){return new S(a,"GEOMEAN")});function T(a,b){K.call(this);this.Mf=b}t(T,K);T.prototype.exec=function(a,b){switch(this.Mf){case 1:return Jg(this,a,b);case 0:return Kg(this,a,b);default:return Lg(this,a,b)}};T.prototype.toString=l("dummy_node");T.prototype.Lc=function(){return this.toString()};function Lg(a,b,c){return new v(function(a){a(this.fa([],b,c))}.bind(a))}function Jg(a,b,c){return Ld(a,0).exec(b,c).then(function(a){return this.fa(a,b,c)}.bind(a))}
function Kg(a,b,c){var d=L(a).map(function(a){return a.exec(b,c)});return db(d).then(function(a){var d=[];a.forEach(function(a){for(var b=0;b<a.length;++b)d.push(a[b])});return this.fa(d,b,c)}.bind(a))};function Mg(a){T.call(this,0,1);this.we=a}t(Mg,T);Mg.prototype.toString=function(){return"aggregation("+this.we.map(function(a){return a.m()}).toString()+")"};Mg.prototype.fa=function(a){a.forEach(function(a){Ng(new Og(a,this.we))},this);return a};function Og(a,b){this.Ja=a;this.J=b}
function Ng(a){a.J.forEach(function(a){a=Fg(a).reverse();for(var c=1;c<a.length;c++){var d=a[c],e=Fg(d).slice(-1)[0],f=d.child instanceof S?pd(this.Ja,d.child):this.Ja;if(null!==f.Wa&&f.Wa.has(d.m()))break;f=Pg(d.Lb,f,e);e=this.Ja;null===e.Wa&&(e.Wa=y());e.Wa.set(d.m(),f)}},a)}
function Pg(a,b,c){var d=null;switch(a){case "MIN":d=Qg(b,c,function(a,b){return b<a?b:a});break;case "MAX":d=Qg(b,c,function(a,b){return b>a?b:a});break;case "DISTINCT":d=Rg(b,c);break;case "COUNT":d=Sg(b,c);break;case "SUM":d=Tg(b,c);break;case "AVG":a=Sg(b,c);0<a&&(d=Tg(b,c)/a);break;case "GEOMEAN":d=Ug(b,c);break;default:d=Vg(b,c)}return d}function Qg(a,b,c){return a.entries.reduce(function(a,e){var f=I(e,b);return null===f?a:null===a?f:c(a,f)},null)}
function Sg(a,b){return b instanceof Gg?a.entries.length:a.entries.reduce(function(a,d){return a+(fa(I(d,b))?0:1)},0)}function Tg(a,b){return Qg(a,b,function(a,b){return b+a})}function Vg(a,b){var c=[];a.entries.forEach(function(a){a=I(a,b);null===a||c.push(a)});return 0==c.length?null:sb.apply(null,c)}function Ug(a,b){var c=0,d=a.entries.reduce(function(a,d){var h=I(d,b);if(0==h||null===h)return a;c++;return a+Math.log(h)},0);return 0==c?null:Math.pow(Math.E,d/c)}
function Rg(a,b){var c=y();a.entries.forEach(function(a){var e=I(a,b);c.set(e,a)});return new G(z(c),H(a))};function Wg(a,b){this.Da=a;this.aa=b}Wg.prototype.ib=g("Da");Wg.prototype.ca=g("aa");function Xg(){K.call(this)}t(Xg,K);function Yg(a,b){K.call(this);this.table=a;this.values=b}t(Yg,Xg);function Zg(a,b){Yg.call(this,a,b)}t(Zg,Yg);function $g(a){K.call(this);this.table=a}t($g,Xg);$g.prototype.toString=function(){return"delete("+this.table.getName()+")"};function ah(a,b){K.call(this);this.table=a;this.qe=b}t(ah,Xg);
ah.prototype.toString=function(){var a=[];this.qe&&(a=this.qe.map(function(a){return a.M.getName()},this));return"update("+this.table.getName()+", ["+a.join(",")+"])"};function bh(a){K.call(this);this.I=a}t(bh,Xg);bh.prototype.toString=function(){return"select("+this.I.toString()+")"};function ch(a){K.call(this);this.table=a}t(ch,Xg);ch.prototype.toString=function(){var a="table_access("+this.table.getName();null===this.table.Xa()||(a+=" as "+this.table.Xa());return a+")"};
function dh(){K.call(this)}t(dh,Xg);dh.prototype.toString=l("cross_product");function eh(a,b){K.call(this);this.f=a;this.Ob=b}t(eh,Xg);eh.prototype.toString=function(){var a="project("+this.f.toString();if(null!==this.Ob)var b=this.Ob.map(function(a){return a.m()}).join(", "),a=a+(", groupBy("+b+")");return a+")"};function fh(a){K.call(this);this.N=a}t(fh,Xg);fh.prototype.toString=function(){return"order_by("+de(this.N)+")"};function gh(a){K.call(this);this.f=a}t(gh,Xg);
gh.prototype.toString=function(){return"aggregation("+this.f.toString()+")"};function hh(a){K.call(this);this.f=a}t(hh,Xg);hh.prototype.toString=function(){return"group_by("+this.f.toString()+")"};function ih(a){K.call(this);this.V=a}t(ih,Xg);ih.prototype.toString=function(){return"limit("+this.V+")"};function jh(a){K.call(this);this.K=a}t(jh,Xg);jh.prototype.toString=function(){return"skip("+this.K+")"};function kh(a,b){K.call(this);this.I=a;this.Qb=b}t(kh,Xg);
kh.prototype.toString=function(){return"join(type: "+(this.Qb?"outer":"inner")+", "+this.I.toString()+")"};function lh(){};function mh(){}t(mh,lh);mh.prototype.pb=function(a){this.$=a;this.Ua(this.$);return this.$};mh.prototype.Ua=function(a){if(a instanceof bh){var b=nh(this,a.I),b=oh(this,b);sg(a,a,b[0],b[1]);a==this.$&&(this.$=b[0]);a=b[0]}L(a).forEach(function(a){this.Ua(a)},this)};function nh(a,b){if(0==L(b).length||"and"!=b.Sb)return[b];var c=L(b).slice().map(function(a){b.removeChild(a);return nh(this,a)},a);return Ea(c)}
function oh(a,b){var c=null,d=null;b.map(function(a,b){var h=new bh(a);0==b?c=h:Nd(d,h);d=h},a);return[c,d]};function ph(){}t(ph,lh);ph.prototype.pb=function(a,b){if(3>b.c.length)return a;this.$=a;this.Ua(this.$);return this.$};ph.prototype.Ua=function(a){if(a instanceof dh)for(;2<L(a).length;){for(var b=new dh,c=0;2>c;c++){var d=Od(a,0);Nd(b,d)}Md(a,b,0)}L(a).forEach(function(a){this.Ua(a)},this)};function qh(){T.call(this,0,0)}t(qh,T);qh.prototype.toString=l("cross_product");qh.prototype.fa=function(a){var b=a[0],c=a[1];a=[];for(var d=H(b),e=H(c),f=0;f<b.entries.length;f++)for(var h=0;h<c.entries.length;h++){var k=yd(b.entries[f],d,c.entries[h],e);a.push(k)}b=H(b).concat(H(c));return[new G(a,b)]};function rh(a,b){he.call(this,a,b);this.Ea=a.l(kc);this.Jb=a.l(lc)}t(rh,he);rh.prototype.getPriority=l(2);rh.prototype.Zd=function(a){0==this.G()?sh(this,a):this.Ic()};function sh(a,b){a.nd.forEach(function(a,d){a instanceof ce&&ke(this.Jb,a,b[d])},a)}rh.prototype.Ic=function(){var a=me(this.Jb,this.ca());0!=a.length&&(a=new je(this.global,a),ne(this.Ea,a))};function th(a){Yd.call(this,a)}t(th,Yd);th.prototype.ca=function(){var a=B();a.add(this.c);uh(this,this.c.getName(),a);return a};function uh(a,b,c){var d=vh(a.ba.info(),b,1);vh(a.ba.info(),b).forEach(c.add.bind(c));d.forEach(function(a){uh(this,a.getName(),c)},a)}th.prototype.clone=function(){var a=new th(this.ba);ae(a,this);a.c=this.c;return a};th.prototype.bind=function(a){th.ab.bind.call(this,a);be(this,a);return this};function wh(a){Yd.call(this,a)}t(wh,Yd);wh.prototype.ca=function(){var a=B();a.add(this.Ha);var b=this.ba.info();xh(this.Ha.getName(),b.$e).forEach(a.add.bind(a));this.ac&&vh(b,this.Ha.getName()).forEach(a.add.bind(a));return a};wh.prototype.clone=function(){var a=new wh(this.ba);ae(a,this);a.Ha=this.Ha;this.values&&(a.values=this.values instanceof zd?this.values:this.values.slice());a.ac=this.ac;a.bc=this.bc;return a};
wh.prototype.bind=function(a){wh.ab.bind.call(this,a);this.bc&&(this.values=this.bc instanceof zd?a[this.bc.za()]:this.bc.map(function(b){return b instanceof zd?a[b.za()]:b}));return this};function yh(a){Yd.call(this,a)}t(yh,Yd);yh.prototype.ca=function(){var a=B();a.add(this.table);var b=this.set.map(function(a){return a.M.m()}),c=this.ba.info();zh(c,b).forEach(a.add.bind(a));Ah(c,b).forEach(a.add.bind(a));return a};yh.prototype.clone=function(){var a=new yh(this.ba);ae(a,this);a.table=this.table;a.set=this.set?this.set.slice():this.set;return a};yh.prototype.bind=function(a){yh.ab.bind.call(this,a);this.set.forEach(function(b){-1!=b.Qc&&(b.value=a[b.Qc])});be(this,a);return this};function Bh(a,b){if(null==b)return"NULL";switch(a){case 1:return b?1:0;case 3:case 4:return b;case 0:return"'"+Wb(b)+"'";default:return"'"+b.toString()+"'"}}function Ch(a,b){var c=a.ac?"INSERT OR REPLACE":"INSERT",d=a.Ha.hb(),c=c+(" INTO "+a.Ha.getName()+"("),c=c+d.map(function(a){return a.getName()}).join(", "),c=c+") VALUES (";return a.values.map(function(a){var f=d.map(function(c){var d=a.o[c.getName()];return b?null!=d?"#":"NULL":Bh(c.G(),d)});return c+f.join(", ")+");"}).join("\n")}
function Dh(a){switch(a){case "between":return"BETWEEN";case "eq":return"=";case "gte":return">=";case "gt":return">";case "in":return"IN";case "lte":return"<=";case "lt":return"<";case "match":return"LIKE";case "neq":return"<>";default:return"UNKNOWN"}}function Eh(a,b,c,d){return a instanceof zd?"?"+a.za().toString():d?null!=a?"#":"NULL":"match"==b?"'"+a.toString()+"'":"in"==b?"("+a.map(function(a){return Bh(c,a)}).join(", ")+")":"between"==b?Bh(c,a[0])+" AND "+Bh(c,a[1]):Bh(c,a).toString()}
function Fh(a,b){return L(a).map(function(a){return"("+Gh(a,b)+")"}).join("and"==a.Sb?" AND ":" OR ")}function Hh(a){return[a.ha.m(),Dh(a.C),a.ka.m()].join(" ")}function Gh(a,b){if(a instanceof Td){var c=a.M.m(),d=Dh(a.C),e=Eh(a.value,a.C,a.M.G(),b);return"="==d&&"NULL"==e?[c,"IS NULL"].join(" "):"<>"==d&&"NULL"==e?[c,"IS NOT NULL"].join(" "):[c,d,e].join(" ")}if(a instanceof ug)return Fh(a,b);if(a instanceof wg)return Hh(a);throw new D(357,typeof a);}
function Ih(a,b){var c=Gh(a,b);return c?" WHERE "+c:""}function Jh(a,b){var c="UPDATE "+a.table.getName()+" SET ",c=c+a.set.map(function(a){var b=a.M.m()+" = ";return-1!=a.Qc?b+"?"+a.Qc.toString():b+Bh(a.M.G(),a.value).toString()}).join(", ");a.w&&(c+=Ih(a.w,b));return c+";"}
function Kh(a,b){var c="*";a.f.length&&(c=a.f.map(function(a){return a.Xa()?a.m()+" AS "+a.Xa():a.m()}).join(", "));c="SELECT "+c+" FROM ";null!=a.Cb&&0!=a.Cb.size?c+=Lh(a,b):(c+=a.c.map(Mh).join(", "),a.w&&(c+=Ih(a.w,b)));if(a.N)var d=a.N.map(function(a){return a.M.m()+(0==a.mb?" DESC":" ASC")}).join(", "),c=c+(" ORDER BY "+d);a.ja&&(d=a.ja.map(function(a){return a.m()}).join(", "),c+=" GROUP BY "+d);a.V&&(c+=" LIMIT "+a.V.toString());a.K&&(c+=" SKIP "+a.K.toString());return c+";"}
function Mh(a){return J(a)!=a.getName()?a.getName()+" AS "+J(a):a.getName()}function Lh(a,b){for(var c=ng(a.w,function(a){return a instanceof wg}),d=c.map(Hh),e=Mh(a.c[0]),f=1;f<a.c.length;f++)var h=Mh(a.c[f]),e=a.Cb.has(c[d.length-f].Y())?e+(" LEFT OUTER JOIN "+h):e+(" INNER JOIN "+h),e=e+(" ON ("+d[d.length-f]+")");c=Ld(a.w,0);c instanceof wg||(e+=" WHERE "+Gh(c,b));return e}
function Nh(a,b){var c=b||!1,d=a.a.clone();if(d instanceof wh)return Ch(d,c);if(d instanceof th){var e="DELETE FROM "+d.c.getName();d.w&&(e+=Ih(d.w,c));return e+";"}if(d instanceof yh)return Jh(d,c);if(d instanceof ce)return Kh(d,c);throw new D(358,typeof d);};function U(a,b){this.global=a;this.vg=a.l(jc);this.Ea=a.l(kc);this.a=b}r("lf.query.BaseBuilder",U);U.prototype.exec=function(){try{this.cb()}catch(a){return ab(a)}return new v(function(a,b){var c=new rh(this.global,[this.yc()]);ne(this.Ea,c).then(function(b){a(nd(b[0]))},b)},this)};U.prototype.exec=U.prototype.exec;U.prototype.Of=function(){var a=function(a){return a.Lc(this.a)+"\n"}.bind(this);return tg(Oh(this).ib(),a)};U.prototype.explain=U.prototype.Of;
U.prototype.bind=function(a){this.a.bind(a);return this};U.prototype.bind=U.prototype.bind;U.prototype.Dg=function(a){return Nh(this,a)};U.prototype.toSql=U.prototype.Dg;U.prototype.cb=aa();function Oh(a){if(null==a.af){var b;b=a.vg;var c=a.a,d=b.gg.create(c);b=b.sg.create(d,c);a.af=b}return a.af}U.prototype.yc=function(){return{context:this.a.clone(),be:Oh(this)}};function Ph(a){U.call(this,a,new th(a.l(mc)))}t(Ph,U);r("lf.query.DeleteBuilder",Ph);Ph.prototype.c=function(a){if(null!=this.a.c)throw new D(515);this.a.c=a;return this};Ph.prototype.from=Ph.prototype.c;Ph.prototype.w=function(a){this.xd();this.a.w=a;return this};Ph.prototype.where=Ph.prototype.w;Ph.prototype.xd=function(){if(null==this.a.c)throw new D(548);if(null!=this.a.w)throw new D(516);};Ph.prototype.cb=function(){Ph.ab.cb.call(this);if(null==this.a.c)throw new D(517);};function Qh(a,b){U.call(this,a,new wh(a.l(mc)));this.a.ac=b||!1}t(Qh,U);r("lf.query.InsertBuilder",Qh);Qh.prototype.cb=function(){Qh.ab.cb.call(this);var a=this.a;if(null==a.Ha||null==a.values)throw new D(518);if(a.ac&&null===a.Ha.Gb().Zc())throw new D(519);};Qh.prototype.Ha=function(a){if(null!=this.a.Ha)throw new D(520);this.a.Ha=a;return this};Qh.prototype.into=Qh.prototype.Ha;
Qh.prototype.values=function(a){if(null!=this.a.values)throw new D(521);a instanceof zd||a.some(function(a){return a instanceof zd})?this.a.bc=a:this.a.values=a;return this};Qh.prototype.values=Qh.prototype.values;function Rh(a){return Sh("and",Array.prototype.slice.call(arguments))}r("lf.op.and",Rh);r("lf.op.or",function(a){return Sh("or",Array.prototype.slice.call(arguments))});function Sh(a,b){var c=new ug(a);b.forEach(function(a){Nd(c,a)});return c}r("lf.op.not",function(a){a.qd(!0);return a});function V(a,b){U.call(this,a,new ce(a.l(mc)));this.Ge=this.sd=!1;this.a.f=b;Th(this);Uh(this)}t(V,U);r("lf.query.SelectBuilder",V);V.prototype.cb=function(){V.ab.cb.call(this);var a=this.a;if(null==a.c)throw new D(522);if(q(a.Rb)&&!q(a.V)||q(a.Yb)&&!q(a.K))throw new D(523);null!=this.a.ja?Vh(this):Wh(this)};function Th(a){var b=a.a.f.filter(function(a){return a instanceof S&&"DISTINCT"==a.Lb},a);if(0!=b.length&&(1!=b.length||1!=a.a.f.length))throw new D(524);}
function Vh(a){var b=a.a.f.filter(function(a){return!(a instanceof S)}).map(function(a){return a.m()}),c=!1;if(0==a.a.ja.length||0==a.a.f.length)c=!0;else{var d=a.a.ja.map(function(a){return a.m()});(c=b.some(function(a){return-1==d.indexOf(a)}))||(c=a.a.ja.some(function(a){a=a.G();return 6==a||0==a}))}if(c)throw new D(525);}function Wh(a){var b=a.a.f.some(function(a){return a instanceof S},a);a=a.a.f.some(function(a){return!(a instanceof S)},a)||0==a.a.f.length;if(b&&a)throw new D(526);}
function Uh(a){a.a.f.forEach(function(a){if(a instanceof S&&!Xh(a.Lb,a.G()))throw new D(527,a.m());},a)}function Yh(a,b){if(null==a.a.c)throw new D(b);}V.prototype.c=function(a){if(this.Ge)throw new D(515);this.Ge=!0;null==this.a.c&&(this.a.c=[]);this.a.c.push.apply(this.a.c,Array.prototype.slice.call(arguments));return this};V.prototype.from=V.prototype.c;V.prototype.w=function(a){Yh(this,548);if(this.sd)throw new D(516);this.sd=!0;Zh(this,a);return this};V.prototype.where=V.prototype.w;
function Zh(a,b){if(null!=a.a.w){var c=Rh(b,a.a.w);a.a.w=c}else a.a.w=b}V.prototype.Zf=function(a,b){Yh(this,542);if(this.sd)throw new D(547);this.a.c.push(a);Zh(this,b);return this};V.prototype.innerJoin=V.prototype.Zf;V.prototype.eg=function(a,b){Yh(this,542);if(!(b instanceof wg))throw new D(541);if(this.sd)throw new D(547);this.a.c.push(a);null==this.a.Cb&&(this.a.Cb=B());var c=b;J(a)!=J(b.ka.H())&&(c=b.reverse());this.a.Cb.add(c.Y());Zh(this,c);return this};V.prototype.leftOuterJoin=V.prototype.eg;
V.prototype.V=function(a){if(null!=(this.a.V||this.a.Rb))throw new D(528);if(a instanceof zd)this.a.Rb=a;else{if(0>a)throw new D(531);this.a.V=a}return this};V.prototype.limit=V.prototype.V;V.prototype.K=function(a){if(null!=(this.a.K||this.a.Yb))throw new D(529);if(a instanceof zd)this.a.Yb=a;else{if(0>a)throw new D(531);this.a.K=a}return this};V.prototype.skip=V.prototype.K;V.prototype.N=function(a,b){Yh(this,549);null==this.a.N&&(this.a.N=[]);this.a.N.push({M:a,mb:null!=b?b:1});return this};
V.prototype.orderBy=V.prototype.N;V.prototype.ja=function(a){Yh(this,549);if(null!=this.a.ja)throw new D(530);null==this.a.ja&&(this.a.ja=[]);this.a.ja.push.apply(this.a.ja,Array.prototype.slice.call(arguments));return this};V.prototype.groupBy=V.prototype.ja;function Xh(a,b){switch(a){case "COUNT":case "DISTINCT":return!0;case "AVG":case "GEOMEAN":case "STDDEV":case "SUM":return 4==b||3==b;case "MAX":case "MIN":return 4==b||3==b||5==b||2==b}return!1}
V.prototype.clone=function(){var a=new V(this.global,this.a.f);a.a=this.a.clone();a.a.Tc=null;return a};V.prototype.clone=V.prototype.clone;function $h(a,b){U.call(this,a,new yh(a.l(mc)));this.a.table=b}t($h,U);r("lf.query.UpdateBuilder",$h);$h.prototype.set=function(a,b){var c={Qc:b instanceof zd?b.za():-1,M:a,value:b};null!=this.a.set?this.a.set.push(c):this.a.set=[c];return this};$h.prototype.set=$h.prototype.set;$h.prototype.w=function(a){this.xd();this.a.w=a;return this};$h.prototype.where=$h.prototype.w;$h.prototype.xd=function(){if(null!=this.a.w)throw new D(516);};
$h.prototype.cb=function(){$h.ab.cb.call(this);if(null==this.a.set)throw new D(532);if(this.a.set.some(function(a){return a.value instanceof zd}))throw new D(501);};function ai(a){this.a=a;this.Da=null}ai.prototype.hc=function(){null===this.Da&&(this.Da=this.Xc());return this.Da};function bi(a){ai.call(this,a)}t(bi,ai);bi.prototype.Xc=function(){return this.a.ac?new Zg(this.a.Ha,this.a.values):new Yg(this.a.Ha,this.a.values)};function ci(a){ai.call(this,a)}t(ci,ai);ci.prototype.Xc=function(){var a=new ah(this.a.table,this.a.set),b=null!=this.a.w?new bh(this.a.w.Mb()):null,c=new ch(this.a.table);null===b?Nd(a,c):(Nd(b,c),Nd(a,b));return a};function di(a,b,c){this.Da=a;this.ce=b;this.Vb=c}di.prototype.hc=function(){this.Vb.forEach(function(a){this.Da=a.pb(this.Da,this.ce)},this);return this.Da};function ei(a,b){ai.call(this,a);this.Vb=b}t(ei,ai);ei.prototype.Xc=function(){var a=new $g(this.a.c),b=null!=this.a.w?new bh(this.a.w.Mb()):null,c=new ch(this.a.c);null===b?Nd(a,c):(Nd(b,c),Nd(a,b));return(new di(a,this.a,this.Vb)).hc()};function fi(){}t(fi,lh);fi.prototype.pb=function(a,b){if(2>b.c.length)return a;this.$=a;this.Ua(this.$,b);return this.$};fi.prototype.Ua=function(a,b){if(a instanceof bh&&a.I instanceof wg){var c=a.I.Y(),d=Ld(a,0);d instanceof dh&&(c=null!=b.Cb&&b.Cb.has(c),c=new kh(a.I,c),sg(a,d,c,c),a==this.$&&(this.$=c),a=c)}L(a).forEach(function(a){this.Ua(a,b)},this)};function gi(){this.Pc=B()}t(gi,lh);gi.prototype.pb=function(a,b){this.Pc.clear();if(!q(b.w))return a;this.$=a;this.Ua(this.$);this.Pc.clear();return this.$};gi.prototype.Ua=function(a){if(hi(a)){var b=a.I instanceof Td?ii(this,a):ji(this,a);this.Pc.add(a);b==a&&(b=Ld(a,0));null!==b&&(fa(b.getParent())&&(this.$=b),hi(b)&&!this.Pc.has(b)&&this.Ua(b))}else L(a).forEach(function(a){this.Ua(a)},this)};
function ki(a,b,c){var d=b;if(Ld(b,0)instanceof bh)d=qg(b),ki(a,b,c);else if(li(b)){var e=[],d=rg(b,c,function(a){a=new bh(a.I);e.push(a);return a});e.forEach(function(a){ki(this,a,c)},a)}return d}function ii(a,b){var c=B([J(b.I.M.H())]),d=function(a){return mi(this,a,c)}.bind(a);return ki(a,b,d)}function ji(a,b){var c=B([J(b.I.ha.H()),J(b.I.ka.H())]),d=function(a){return mi(this,a,c)}.bind(a);return ki(a,b,d)}
function mi(a,b,c){var d=B();mg(b).forEach(function(a){d.add(J(a.table))},a);b instanceof ch&&d.add(J(b.table));return nc(d,c)}function hi(a){return a instanceof bh&&!(a.I instanceof ug)}function li(a){a=Ld(a,0);return a instanceof dh||a instanceof kh};function ni(a,b){ai.call(this,a);this.Vb=b;this.ef=this.We=this.nf=this.Ze=this.xe=this.Le=this.mf=this.De=this.pf=null}t(ni,ai);
ni.prototype.Xc=function(){oi(this);2<=this.a.c.length&&(this.De=new dh);this.mf=null!=this.a.w?new bh(this.a.w.Mb()):null;this.a.N&&(this.Ze=new fh(this.a.N));null!=this.a.K&&0<this.a.K&&(this.nf=new jh(this.a.K));null!=this.a.V&&(this.We=new ih(this.a.V));null!=this.a.ja&&(this.Le=new hh(this.a.ja));pi(this);this.ef=new eh(this.a.f||[],this.a.ja||null);var a=qi(this);return(new di(a,this.a,this.Vb)).hc()};
function qi(a){for(var b=[a.We,a.nf,a.ef,a.Ze,a.xe,a.Le,a.mf,a.De],c=null,d=null,e=0;e<b.length;e++){var f=b[e];null!==f&&(null===d?d=f:Nd(b[c],f),c=e)}a.pf.forEach(function(a){Nd(b[c],a)});return d}function oi(a){a.pf=a.a.c.map(function(a){return new ch(a)},a)}function pi(a){var b=a.a.f.filter(function(a){return a instanceof S});null!=a.a.N&&a.a.N.forEach(function(a){a.M instanceof S&&b.push(a.M)});0<b.length&&(a.xe=new gh(b))};function ri(){this.ie=[new mh,new ph,new gi,new fi];this.Hd=[new mh]}ri.prototype.create=function(a){var b=null;if(a instanceof wh)b=new bi(a);else if(a instanceof th)b=new ei(a,this.Hd);else if(a instanceof ce)b=new ni(a,this.ie);else if(a instanceof yh)b=new ci(a);else throw new D(513);b=b.hc();return new Wg(b,a.ca())};function si(a){T.call(this,0,1);this.S=a}t(si,T);si.prototype.toString=function(){return"delete("+this.S.getName()+")"};si.prototype.fa=function(a,b){var c=a[0].entries.map(function(a){return a.ua});b.remove(this.S,c);return[rd()]};function ti(a,b){T.call(this,0,-1);this.table=b;this.D=a.l(ic)}t(ti,T);ti.prototype.toString=function(){return"get_row_count("+this.table.getName()+")"};ti.prototype.fa=function(){var a=this.D.get(Qe(this.table)),b=new G([],[this.table.getName()]),c=Hg(),a=a.Ka().la;null===b.Wa&&(b.Wa=y());b.Wa.set(c.m(),a);return[b]};function ui(a,b){T.call(this,0,-1);this.U=a.l(hc);this.D=a.l(ic);this.table=b}t(ui,T);ui.prototype.toString=function(){var a="table_access("+this.table.getName();null===this.table.Xa()||(a+=" as "+this.table.Xa());return a+")"};ui.prototype.fa=function(){var a=this.D.get(Qe(this.table)).Ya();return[ud(gf(this.U,a),[J(this.table)])]};function vi(a){this.i=a}t(vi,lh);vi.prototype.pb=function(a,b){this.$=a;if(!this.zd(b))return a;var c=ng(a,function(a){return a instanceof ui})[0],d=new ti(this.i,c.table);sg(c,c,d,d);return this.$};vi.prototype.zd=function(a){return 1==a.f.length&&1==a.c.length&&null==a.w&&null==a.V&&null==a.K&&null==a.ja?(a=a.f[0],a instanceof S&&"COUNT"==a.Lb&&a.child instanceof Gg):!1};function wi(a){T.call(this,0,1);this.Ke=a}t(wi,T);wi.prototype.toString=function(){return"groupBy("+this.Ke.map(function(a){return a.m()}).toString()+")"};wi.prototype.fa=function(a){return xi(this,a[0])};function xi(a,b){var c=new Ic,d=function(a){return this.Ke.map(function(b){return I(a,b)},this).join(",")}.bind(a);b.entries.forEach(function(a){c.set(d(a),a)},a);return c.keys().map(function(a){return new G(c.get(a),H(b))},a)};function yi(a,b,c){T.call(this,0,0);this.D=a.l(ic);this.U=a.l(hc);this.I=b;this.Qb=c;this.vd="eq"==this.I.C?0:2;this.Ne=null}t(yi,T);var zi=["hash","index_nested_loop","nested_loop"];yi.prototype.toString=function(){return"join(type: "+(this.Qb?"outer":"inner")+", impl: "+zi[this.vd]+", "+this.I.toString()+")"};
yi.prototype.fa=function(a){switch(this.vd){case 0:return[Ag(this.I,a[0],a[1],this.Qb)];case 1:return[Bg(this.I,a[0],a[1],this.Ne,this.U)];default:var b=this.I,c=a[0];a=a[1];var d=this.Qb,e=[c,a];d||(e=xg(b,c,a));c=e[0];a=e[1];for(var e=[],f=H(c),h=H(a),k=c.entries.length,n=a.entries.length,A=n+256-1>>8,O=0;O<A;){for(var ca=0;ca<k;ca++){var ub=!1,Mf=I(c.entries[ca],b.ha);if(null!==Mf)for(var Xb=Math.min(O+1<<8,n),vb=O<<8;vb<Xb;vb++)if(b.tc(Mf,I(a.entries[vb],b.ka))){var ub=!0,Qc=yd(c.entries[ca],
f,a.entries[vb],h);e.push(Qc)}d&&!ub&&e.push(zg(b,c.entries[ca],f))}O++}b=H(c).concat(H(a));return[new G(e,b)]}};function Ai(a,b){a.vd=1;var c=a.D.get(b.za().m());a.Ne={Vf:b,kg:b==a.I.ha?a.I.ka:a.I.ha,index:c}};function Bi(a){T.call(this,0,-1);this.ff=a}t(Bi,T);Bi.prototype.toString=function(){return"no_op_step("+H(this.ff[0]).join(",")+")"};Bi.prototype.fa=g("ff");function Ci(){}t(Ci,lh);Ci.prototype.pb=function(a,b){this.$=a;if(!this.zd(b))return a;ng(a,function(a){return a instanceof yi}).forEach(this.ug,this);return this.$};Ci.prototype.zd=function(a){return 1<a.c.length};
Ci.prototype.ug=function(a){if("eq"==a.I.C&&!a.Qb){var b=function(b){if(!(b instanceof ui))return null;b=J(b.table)==J(a.I.ka.H())?a.I.ka:a.I.ha;return fa(b.za())?null:b},c=b(Ld(a,0)),b=b(Ld(a,1));if(null!==c||null!==b){b=null===b?c:b;Ai(a,b);var d=new G([],[J(b.H())]);Pd(a,new Bi([d]),b==c?0:1)}}};function Di(a){a=a.map(function(a){return a.Hb()});a=zb.apply(null,a);var b=[];yb(a,function(a){b.push(a)});return b}function Ei(a){this.Pb=a}Ei.prototype.Yc=function(){return 1==this.Pb.f.length?[jd()]:[this.Pb.f.map(function(){return jd()})]};function Fi(a,b){this.Pb=a;this.Ca=b;this.Dd=this.Ue=null}
function Gi(a,b){var c=y();a.Ca.keys().forEach(function(a){var e=this.Ca.get(a).map(function(a){return Zd(b,a)},this),f=new jg([jd()]);e.forEach(function(a){a=new jg(Wd(a));f=kg(f,a)});c.set(a,f)},a);return c}Fi.prototype.Yc=function(a){if(this.Ue==a)return this.Dd;for(var b=Gi(this,a),c=this.Pb.f.length-1;0<=c;c--){var d=this.Pb.f[c];if(null!==(b.get(d.ba.getName())||null))break;b.set(d.ba.getName(),new jg([jd()]))}this.Dd=1==this.Pb.f.length?z(b)[0].Hb():Di(Hi(this,b));this.Ue=a;return this.Dd};
function Hi(a,b){var c=y(),d=0;a.Pb.f.forEach(function(a){c.set(a.ba.getName(),d);d++});return Rb(b).sort(function(a,b){return c.get(a)-c.get(b)}).map(function(a){return b.get(a)})};function Ii(a,b){this.me=b;this.D=a.l(ic)}function Ji(a,b,c){c=c.filter(a.$f,a);if(0==c.length)return null;a=Ki(a,c);if(0==a.length)return null;if(1==a.length)return a[0];var d=Number.MAX_VALUE;return a.reduce(function(a,c){var h=Li(c,b);return h<d?(d=h,c):a},null)}
function Ki(a,b){return a.me.Aa().map(function(a){a=new Mi(this.D,a);Ni(a,b);return a},a).filter(function(a){if(null===a.Ca)a=!1;else{for(var b=!1,e=!0,f=0;f<a.zb.f.length;f++){var h=a.Ca.has(a.zb.f[f].ba.getName());if(b&&h){e=!1;break}h||(b=!0)}a=e}return a})}
Ii.prototype.$f=function(a){var b;if(b=a instanceof Td)Ud(a),b=null!==a.value&&("between"==a.C||"in"==a.C||"eq"==a.C||"gt"==a.C||"gte"==a.C||"lt"==a.C||"lte"==a.C);!(b=!b||a.M.H()!=this.me)&&(b="in"==a.C)&&(a=a.value.length,b=this.D.get(Qe(this.me)),b=Math.floor(.02*b.Ka().la),b=a>b);return b?!1:!0};function Mi(a,b){this.D=a;this.zb=b;this.Wf=B(this.zb.f.map(function(a){return a.ba.getName()}));this.Td=this.Ca=null}function Oi(a){null===a.Td&&(a.Td=new Fi(a.zb,a.Ca));return a.Td}
function Ni(a,b){b.forEach(function(a){var b=a.hb()[0].getName();this.Wf.has(b)&&(null===this.Ca&&(this.Ca=new Ic),this.Ca.set(b,a.Y()))},a)}function Li(a,b){var c=Oi(a).Yc(b),d=a.D.get(a.zb.m());return c.reduce(function(a,b){return a+d.Vc(b)},0)};function Pi(a,b,c,d){T.call(this,0,-1);this.D=a.l(ic);this.index=b;this.Te=c;this.ge=d;this.Oc=this.Nc=!1}t(Pi,T);Pi.prototype.toString=function(){return"index_range_scan("+this.index.m()+", ?, "+(this.ge?"reverse":"natural")+(this.Nc?", limit:?":"")+(this.Oc?", skip:?":"")+")"};Pi.prototype.Lc=function(a){var b=this.toString(),c=this.Te.Yc(a),b=b.replace("?",c.toString());this.Nc&&(b=b.replace("?",a.V.toString()));this.Oc&&(b=b.replace("?",a.K.toString()));return b};
Pi.prototype.fa=function(a,b,c){a=this.Te.Yc(c);b=this.D.get(this.index.m());c=(1==a.length&&a[0]instanceof E&&kd(a[0])?mf(b.get(a[0].c),!1,this.Nc?c.V:void 0,this.Oc?c.K:void 0):b.Ya(a,this.ge,this.Nc?c.V:void 0,this.Oc?c.K:void 0)).map(function(a){return new Sb(a,{})},this);return[ud(c,[this.index.Kc])]};function Qi(a){T.call(this,0,1);this.md=a}t(Qi,T);Qi.prototype.toString=l("select(?)");Qi.prototype.Lc=function(a){a=Zd(a,this.md);return this.toString().replace("?",a.toString())};Qi.prototype.fa=function(a,b,c){return[Zd(c,this.md).eval(a[0])]};function Ri(a,b){T.call(this,0,1);this.U=a.l(hc);this.S=b}t(Ri,T);Ri.prototype.toString=function(){return"table_access_by_row_id("+this.S.getName()+")"};Ri.prototype.fa=function(a){return[ud(gf(this.U,od(a[0])),[J(this.S)])]};function Si(a){this.i=a}t(Si,lh);Si.prototype.pb=function(a,b){this.$=a;ng(a,function(a){return a instanceof ui}).forEach(function(a){var d=Ti(a);if(0!=d.length){var e=Ji(new Ii(this.i,a.table),b,d.map(function(a){return Zd(b,a.md)}));if(null!==e){var f=y();d.forEach(function(a){f.set(a.md,a)},this);this.$=Ui(this,e,f,a)}}},this);return this.$};function Ti(a){var b=[];for(a=a.getParent();a;)a instanceof Qi&&b.push(a),a=a.getParent();return b}
function Ui(a,b,c,d){(null===b.Ca?[]:b.Ca.values()).map(function(a){return c.get(a)}).forEach(og);b=new Pi(a.i,b.zb,Oi(b),!1);a=new Ri(a.i,d.table);Nd(a,b);sg(d,d,a,b);return b.ib()};function Vi(a,b){T.call(this,0,-1);this.D=a.l(ic);this.S=b}t(Vi,T);Vi.prototype.toString=function(){return"insert("+this.S.getName()+")"};Vi.prototype.fa=function(a,b,c){Wi(this.S,c.values,this.D);b.Ab(this.S,c.values);return[ud(c.values,[this.S.getName()])]};function Wi(a,b,c){a=a.Gb().Zc();if(null===a?0:a.f[0].autoIncrement){var d=a.f[0].ba.getName();c=c.get(a.m()).max();var e=null===c?0:c[0];b.forEach(function(a){if(0==a.o[d]||null==a.o[d])e++,a.o[d]=e})}}
function Xi(a,b){T.call(this,0,-1);this.D=a.l(ic);this.S=b}t(Xi,T);Xi.prototype.toString=function(){return"insert_replace("+this.S.getName()+")"};Xi.prototype.fa=function(a,b,c){Wi(this.S,c.values,this.D);b.Od(this.S,c.values);return[ud(c.values,[this.S.getName()])]};function Yi(){T.call(this,0,1)}t(Yi,T);Yi.prototype.toString=l("limit(?)");Yi.prototype.Lc=function(a){return this.toString().replace("?",a.V.toString())};Yi.prototype.fa=function(a,b,c){a[0].entries.splice(c.V);return a};function Zi(a){T.call(this,0,1);this.N=a}t(Zi,T);m=Zi.prototype;m.toString=function(){return"order_by("+de(this.N)+")"};m.fa=function(a){if(1==a.length){var b;b=a[0];for(var c=null,d=0;d<this.N.length;d++){var e=Ig(this.N[d].M);if(null!==b.Wa&&b.Wa.has(e.m())){c=e;break}}b=c;(null===b?a[0]:pd(a[0],b)).entries.sort(this.Lf.bind(this))}else a.sort(this.xg.bind(this));return a};
m.X=function(a,b){var c=null,d=null,e=null,f=-1;do f++,e=this.N[f].M,c=this.N[f].mb,d=a(e),e=b(e);while(d==e&&f+1<this.N.length);d=d<e?-1:d>e?1:0;return 1==c?d:-d};m.xg=function(a,b){return this.X(function(b){return b instanceof S?pd(a,b):I(a.entries[a.entries.length-1],b)},function(a){return a instanceof S?pd(b,a):I(b.entries[b.entries.length-1],a)})};m.Lf=function(a,b){return this.X(function(b){return I(a,b)},function(a){return I(b,a)})};function $i(a,b){this.Ja=a;this.J=b}function aj(a){return a.J.some(function(a){return a instanceof S},a)?bj(a):cj(a)}function bj(a){if(1==a.J.length&&"DISTINCT"==a.J[0].Lb)return a=pd(a.Ja,a.J[0]).entries.map(function(a){var b=new vd(new Sb(-1,{}),1<this.Ja.L.size);xd(b,this.J[0],I(a,this.J[0].child));return b},a),new G(a,[]);var b=new vd(new Sb(-1,{}),1<a.Ja.L.size);a.J.forEach(function(a){var d=a instanceof S?pd(this.Ja,a):I(this.Ja.entries[0],a);xd(b,a,d)},a);return new G([b],H(a.Ja))}
function cj(a){var b=Array(a.Ja.entries.length),c=1<a.Ja.L.size;a.Ja.entries.forEach(function(a,e){b[e]=new vd(new Sb(a.ua.id(),{}),c);this.J.forEach(function(c){xd(b[e],c,I(a,c))},this)},a);return new G(b,H(a.Ja))}function dj(a,b){var c=a.map(function(a){return aj(new $i(a,b)).entries[0]});return new G(c,H(a[0]))};function ej(a,b){T.call(this,0,1);this.f=a;this.Ob=b}t(ej,T);ej.prototype.toString=function(){var a="project("+this.f.toString();if(null!==this.Ob)var b=this.Ob.map(function(a){return a.m()}).join(", "),a=a+(", groupBy("+b+")");return a+")"};ej.prototype.fa=function(a){0==a.length?a=[rd()]:1==a.length?(a=a[0],a=[0==this.f.length?a:aj(new $i(a,this.f))]):a=[dj(a,this.f)];return a};function fj(a){return a.f.some(function(a){return a instanceof S})||null!==a.Ob};function gj(){T.call(this,0,1)}t(gj,T);gj.prototype.toString=l("skip(?)");gj.prototype.Lc=function(a){return this.toString().replace("?",a.K.toString())};gj.prototype.fa=function(a,b,c){return[new G(a[0].entries.slice(c.K),H(a[0]))]};function hj(){}t(hj,lh);hj.prototype.pb=function(a,b){if(!q(b.V)&&!q(b.K))return a;var c=ij(a);if(null===c)return a;ng(a,function(a){return a instanceof Yi||a instanceof gj}).forEach(function(a){a instanceof Yi?c.Nc=!0:c.Oc=!0;og(a)},this);return c.ib()};function ij(a){a=ng(a,function(a){return a instanceof Pi},function(a){return a instanceof ej&&fj(a)||a instanceof Zi||1!=L(a).length||a instanceof Qi});return 0<a.length?a[0]:null};function jj(a){this.i=a}t(jj,lh);jj.prototype.pb=function(a,b){var c=kj(a,b);if(null===c)return a;var d;a:{var e=c;d=lj(Ld(c,0));if(null!==d){var f;f=c.N;for(var h=null,k=d.table.Aa(),n=0;n<k.length&&null===h;n++)h=mj(k[n],f);f=h;if(null===f){d=e;break a}e=new Pi(this.i,f.zb,new Ei(f.zb),f.Qe);f=new Ri(this.i,d.table);Nd(f,e);og(c);e=sg(d,d,f,e)}d=e}if(d==c)a:if(d=c,e=nj(Ld(c,0)),null!==e){f=mj(e.index,c.N);if(null===f)break a;e.ge=f.Qe;d=og(c).parent}return d.ib()};
function nj(a){a=ng(a,function(a){return a instanceof Pi},function(a){return 1!=L(a).length});return 0<a.length?a[0]:null}function lj(a){a=ng(a,function(a){return a instanceof ui},function(a){return 1!=L(a).length});return 0<a.length?a[0]:null}function kj(a,b){return q(b.N)?ng(a,function(a){return a instanceof Zi})[0]:null}function mj(a,b){if(a.f.length!=b.length||!b.every(function(b,c){return b.M.getName()==a.f[c].ba.getName()}))return null;var c=oj(b,a);return c[0]||c[1]?{zb:a,Qe:c[1]}:null}
function oj(a,b){var c=a.reduce(function(a,b){return a<<1|(0==b.mb?0:1)},0),d=b.f.reduce(function(a,b){return a<<1|(0==b.mb?0:1)},0),c=c^d;return[0==c,c==Math.pow(2,Math.max(a.length,b.f.length))-1]};function pj(a,b,c){this.Da=a;this.ce=b;this.Vb=c}pj.prototype.hc=function(){this.Vb.forEach(function(a){this.Da=a.pb(this.Da,this.ce)},this);return this.Da};function qj(a,b){T.call(this,0,1);this.S=a;this.Gg=b}t(qj,T);qj.prototype.toString=function(){return"update("+this.S.getName()+")"};qj.prototype.fa=function(a,b){var c=a[0].entries.map(function(a){var b=this.S.gb(a.ua.Fa());this.Gg.forEach(function(a){b.o[a.M.getName()]=a.value},this);return b},this);b.update(this.S,c);return[rd()]};function rj(a){this.i=a;this.ie=[new Ci,new Si(this.i),new jj(this.i),new hj,new vi(this.i)];this.Hd=[new Si(this.i)]}rj.prototype.create=function(a,b){var c=a.ib();if(c instanceof Zg||c instanceof Yg)return sj(this,a,b);if(c instanceof eh||c instanceof ih||c instanceof jh)return sj(this,a,b,this.ie);if(c instanceof $g||c instanceof ah)return sj(this,a,b,this.Hd);throw new D(8);};function sj(a,b,c,d){a=lg(b.ib(),a.jg.bind(a));null!=d&&(a=(new pj(a,c,d)).hc());return new fe(a,b.ca())}
rj.prototype.jg=function(a){if(a instanceof eh)return new ej(a.f,a.Ob);if(a instanceof hh)return new wi(a.f);if(a instanceof gh)return new Mg(a.f);if(a instanceof fh)return new Zi(a.N);if(a instanceof jh)return new gj;if(a instanceof ih)return new Yi;if(a instanceof bh)return new Qi(a.I.Y());if(a instanceof dh)return new qh;if(a instanceof kh)return new yi(this.i,a.I,a.Qb);if(a instanceof ch)return new ui(this.i,a.table);if(a instanceof $g)return new si(a.table);if(a instanceof ah)return new qj(a.table,
a.qe);if(a instanceof Zg)return new Xi(this.i,a.table);if(a instanceof Yg)return new Vi(this.i,a.table);throw new D(514);};function tj(a){this.gg=new ri;this.sg=new rj(a)};function uj(){this.Xe=y()}function vj(a,b){var c=a.Xe.get(b.getName())||null;null===c&&(c=new wj,a.Xe.set(b.getName(),c));return c}function xj(a,b,c,d){c.forEach(function(a){a=vj(this,a);0==d?(a.Za=null,a.uc=b):3==d?(null===a.Xb&&(a.Xb=B()),a.Xb.add(b),null===a.Ra&&(a.Ra=B()),a.Ra.delete(b)):1==d?(null===a.Ra&&(a.Ra=B()),a.Ra.add(b)):2==d&&(a.Za=b)},a)}
function yj(a,b,c,d){var e=!0;c.forEach(function(a){if(e){a=vj(this,a);var c=null===a.Ra||0==a.Ra.size;e=0==d?(null===a.Xb||0==a.Xb.size)&&c&&null===a.uc&&null!==a.Za&&a.Za==b:3==d?null===a.uc&&null===a.Za&&null!==a.Ra&&a.Ra.has(b):1==d?null===a.Za:c&&(null===a.Za||a.Za==b)}},a);return e}function zj(a,b,c,d){var e=yj(a,b,c,d);e&&xj(a,b,c,d);return e}uj.prototype.releaseLock=function(a,b){b.forEach(function(b){vj(this,b).releaseLock(a)},this)};
function Aj(a,b){b.forEach(function(a){vj(this,a).Za=null},a)}function wj(){this.Xb=this.Ra=this.Za=this.uc=null}wj.prototype.releaseLock=function(a){this.uc==a&&(this.uc=null);this.Za==a&&(this.Za=null);null===this.Ra||this.Ra.delete(a);null===this.Xb||this.Xb.delete(a)};function Bj(){this.Ub=new Cj;this.Bc=new uj}function ne(a,b){(2>b.getPriority()||2>b.getPriority())&&Aj(a.Bc,b.ca());a.Ub.Ab(b);Dj(a);return b.Nb().da}function Dj(a){for(var b=a.Ub.Hb(),c=0;c<b.length;c++){var d=b[c],e=!1;if(e=0==d.G()?Ej(a,d,1,3):Ej(a,d,2,0))a.Ub.remove(d),e=a,d.exec().then(e.pg.bind(e,d),e.og.bind(e,d))}}function Ej(a,b,c,d){var e=!1;zj(a.Bc,b.Y(),b.ca(),c)&&(e=zj(a.Bc,b.Y(),b.ca(),d));return e}Bj.prototype.pg=function(a,b){this.Bc.releaseLock(a.Y(),a.ca());a.Nb().resolve(b);Dj(this)};
Bj.prototype.og=function(a,b){this.Bc.releaseLock(a.Y(),a.ca());a.Nb().reject(b);Dj(this)};function Cj(){this.Ub=[]}Cj.prototype.Ab=function(a){kf(this.Ub,a,function(a,c){var d=a.getPriority()-c.getPriority();return 0==d?a.Y()-c.Y():d})};Cj.prototype.Hb=function(){return this.Ub.slice()};Cj.prototype.remove=function(a){var b=this.Ub;a=xa(b,a);var c;(c=0<=a)&&Array.prototype.splice.call(b,a,1);return c};function Fj(a,b){this.Id=Hd();this.de=a;this.hd=b;this.J=Gj(this)}function Gj(a){if(0<a.de.f.length)return a.de.f;var b=[];a.de.c.forEach(function(a){a.hb().forEach(function(a){b.push(a)})});return b}Fj.prototype.X=function(a,b){return this.J.every(function(c){return Id(this.Id,c.G(),"eq")(I(a,c),I(b,c))},this)};
function Hj(a,b,c){var d=null===b?[]:b.entries,e=ob(d,c.entries,a.X.bind(a),function(a){return d[a]});b=[];for(var f=0,h=0;h<d.length;h++){var k=d[h];e[f]==k?f++:(k=a.hd.splice(f,1),k=Ij(h,k,0,a.hd),b.push(k))}e=ob(d,c.entries,a.X.bind(a),function(a,b){return c.entries[b]});for(h=f=0;h<c.entries.length;h++)k=c.entries[h],e[f]==k?f++:(a.hd.splice(h,0,k.ua.o),k=Ij(h,[],1,a.hd),b.push(k));return b}function Ij(a,b,c,d){return{Ig:c,index:a,object:d,Lg:b,type:"splice"}};function Jj(){this.fc=y()}Jj.prototype.ud=function(a,b){var c=ka(a.a).toString(),d=this.fc.get(c)||null;null===d&&(d=new Kj(a),this.fc.set(c,d));d.ud(b)};Jj.prototype.ee=function(a,b){var c=ka(a.a).toString(),d=this.fc.get(c)||null;d.ee(b);0<d.Dc.size||this.fc.delete(c)};function me(a,b){var c=B();b.forEach(function(a){c.add(a.getName())});var d=[];a.fc.forEach(function(a){a=a.yc();a.context.c.some(function(a){return c.has(a.getName())})&&d.push(a)});return d}
function ke(a,b,c){b=ka(null!=b.Tc?b.Tc:b).toString();a=a.fc.get(b)||null;null!==a&&Lj(a,c)}function Kj(a){this.Bf=a;this.Dc=B();this.mg=[];this.Ve=null;this.Jf=new Fj(a.a,this.mg)}Kj.prototype.ud=function(a){this.Dc.has(a)||this.Dc.add(a)};Kj.prototype.ee=function(a){return this.Dc.delete(a)};Kj.prototype.yc=function(){var a=this.Bf;return{context:a.a,be:Oh(a)}};function Lj(a,b){var c=Hj(a.Jf,a.Ve,b);a.Ve=b;0<c.length&&a.Dc.forEach(function(a){a(c)})};function Mj(a,b){var c=a.l(mc),d=b||{},e=new ff(c);a.ob(hc,e);var e=null,f=!1;null!=d.storeType?e=d.storeType:(q(Qb)||(Qb=new Pb),e=Qb,e=e.Xf?0:e.Hg?4:1);switch(e){case 0:e=new Me(a,c);break;case 1:e=new Te(c);break;case 5:e=new Ve(c);break;case 4:e=new cf(a,c,d.webSqlDbSize);break;case 3:e=new ze(c,d.firebase);f=!0;break;default:throw new D(300);}a.ob(gc,e);var h=new ig;a.ob(ic,h);return e.Ga(d.onUpgrade).then(function(){var b=new tj(a);a.ob(jc,b);b=new Bj;a.ob(kc,b);b=new Jj;a.ob(lc,b);return h.Ga(c)}).then(function(){if(f){var b=
new oe(a);b.La.subscribe(b.Xd.bind(b))}return(new bg(a)).Ga(c)})};function Nj(a){this.i=a;this.g=a.l(mc);this.aa=B(this.g.sa());this.$a=x()}m=Nj.prototype;m.exec=function(){var a=this.i.l(ic),b=this.i.l(hc),c={};this.g.sa().forEach(function(d){var f=a.get(Qe(d)).Ya(),f=gf(b,f).map(function(a){return a.o});c[d.getName()]=f});var d={name:this.g.name(),version:this.g.version(),tables:c},d=new vd(new Sb(-1,d),!0);return w([new G([d],[])])};m.G=l(0);m.ca=g("aa");m.Nb=g("$a");m.Y=function(){return ka(this)};m.getPriority=l(0);function Oj(a,b){this.i=a;this.g=a.l(mc);this.aa=B(this.g.sa());this.$a=x();this.xa=b;this.La=a.l(gc);this.U=a.l(hc);this.D=a.l(ic)}m=Oj.prototype;
m.exec=function(){if(!(this.La instanceof Me||this.La instanceof Te||this.La instanceof cf))throw new D(300);var a;a:{a=this.g.sa();for(var b=0;b<a.length;++b)if(0<this.D.get(Qe(a[b])).Ka().la){a=!1;break a}a=!0}if(!a)throw new D(110);if(this.g.name()!=this.xa.name||this.g.version()!=this.xa.version)throw new D(111);if(null==this.xa.tables)throw new D(112);return Pj(this)};m.G=l(1);m.ca=g("aa");m.Nb=g("$a");m.Y=function(){return ka(this)};m.getPriority=l(0);
function Pj(a){var b=new ad(a.i,a.aa),b=a.La.Eb(a.G(),C(a.aa),b),c;for(c in a.xa.tables){var d=a.g.table(c),e=a.xa.tables[c].map(function(a){return d.wb(a)}),f=b.H(c,d.gb,0);a.U.Wb(c,e);var h=a.D.lc.get(c)||[];e.forEach(function(a){h.forEach(function(b){var c=a.kb(b.getName());b.add(c,a.id())})});f.put(e)}return b.ia()};function Qj(a,b){this.i=a;this.La=a.l(gc);this.Ea=a.l(kc);this.Jb=a.l(lc);this.aa=B(b);this.Pa=new ad(this.i,this.aa);this.$a=x();this.vc=x();this.te=x()}m=Qj.prototype;m.exec=function(){this.te.resolve();return this.vc.da};m.G=l(1);m.ca=g("aa");m.Nb=g("$a");m.Y=function(){return ka(this)};m.getPriority=l(2);function Rj(a){ne(a.Ea,a);return a.te.da}
function Sj(a,b){var c=b.yc();return c.be.ib().exec(a.Pa,c.context).then(function(a){return nd(a[0])},function(a){this.Pa.Kb();var b=new ib(a.name);this.vc.reject(b);throw a;}.bind(a))}m.ia=function(){this.La.Eb(this.G(),C(this.aa),this.Pa).ia().then(function(){this.Ic();this.vc.resolve()}.bind(this),function(a){this.Pa.Kb();this.vc.reject(a)}.bind(this));return this.$a.da};m.Kb=function(){this.Pa.Kb();this.vc.resolve();return this.$a.da};
m.Ic=function(){var a=me(this.Jb,this.aa);0!=a.length&&(a=new je(this.i,a),ne(this.Ea,a))};function Tj(a){this.i=a;this.Ea=a.l(kc);this.Mc=null;this.Sa=0;0==Uj.size&&(Uj.set(0,B([1,4])),Uj.set(1,B([2])),Uj.set(2,B([3,5,6])),Uj.set(3,B([2,7])),Uj.set(4,B([7])),Uj.set(5,B([7])),Uj.set(6,B([7])))}r("lf.proc.Transaction",Tj);var Uj=y();function Vj(a,b){var c=Uj.get(a.Sa)||null;if(null===c||!c.has(b))throw new D(107,a.Sa,b);a.Sa=b}
Tj.prototype.exec=function(a){Vj(this,4);var b=[];try{a.forEach(function(a){a.cb();b.push(a.yc())},this)}catch(c){return Vj(this,7),ab(c)}a=new rh(this.i,b);return ne(this.Ea,a).then(function(a){Vj(this,7);return a.map(function(a){return nd(a)})}.bind(this),function(a){Vj(this,7);throw a;}.bind(this))};Tj.prototype.exec=Tj.prototype.exec;Tj.prototype.zf=function(a){Vj(this,1);this.Mc=new Qj(this.i,a);return Rj(this.Mc).then(function(){Vj(this,2)}.bind(this))};Tj.prototype.begin=Tj.prototype.zf;
Tj.prototype.yf=function(a){Vj(this,3);return Sj(this.Mc,a).then(function(a){Vj(this,2);return a}.bind(this),function(a){Vj(this,7);throw a;}.bind(this))};Tj.prototype.attach=Tj.prototype.yf;Tj.prototype.ia=function(){Vj(this,5);return this.Mc.ia().then(function(){Vj(this,7)}.bind(this))};Tj.prototype.commit=Tj.prototype.ia;Tj.prototype.Kb=function(){Vj(this,6);return this.Mc.Kb().then(function(){Vj(this,7)}.bind(this))};Tj.prototype.rollback=Tj.prototype.Kb;function W(a){this.i=a;this.g=a.l(mc);this.ed=!1}r("lf.proc.Database",W);W.prototype.Ga=function(a){this.i.ob(mc,this.g);return Mj(this.i,a).then(function(){this.ed=!0;this.Ea=this.i.l(kc);return this}.bind(this))};W.prototype.init=W.prototype.Ga;W.prototype.yb=g("g");W.prototype.getSchema=W.prototype.yb;function Wj(a){if(!a.ed)throw new D(2);}W.prototype.select=function(a){Wj(this);return new V(this.i,1!=arguments.length||null!=arguments[0]?Array.prototype.slice.call(arguments):[])};
W.prototype.select=W.prototype.select;W.prototype.Ab=function(){Wj(this);return new Qh(this.i)};W.prototype.insert=W.prototype.Ab;W.prototype.Od=function(){Wj(this);return new Qh(this.i,!0)};W.prototype.insertOrReplace=W.prototype.Od;W.prototype.update=function(a){Wj(this);return new $h(this.i,a)};W.prototype.update=W.prototype.update;W.prototype.delete=function(){Wj(this);return new Ph(this.i)};W.prototype["delete"]=W.prototype.delete;
W.prototype.observe=function(a,b){Wj(this);this.i.l(lc).ud(a,b)};W.prototype.observe=W.prototype.observe;W.prototype.unobserve=function(a,b){Wj(this);this.i.l(lc).ee(a,b)};W.prototype.unobserve=W.prototype.unobserve;W.prototype.Hf=function(){Wj(this);return new Tj(this.i)};W.prototype.createTransaction=W.prototype.Hf;W.prototype.close=function(){try{this.i.l(gc).close()}catch(a){}this.i.clear();this.ed=!1};W.prototype.close=W.prototype.close;
W.prototype.Pf=function(){Wj(this);var a=new Nj(this.i);return ne(this.Ea,a).then(function(a){return nd(a[0])[0]})};W.prototype["export"]=W.prototype.Pf;W.prototype.import=function(a){Wj(this);a=new Oj(this.i,a);return ne(this.Ea,a).then(l(null))};W.prototype["import"]=W.prototype.import;function X(a,b,c,d,e,f){this.S=a;this.A=b;this.Re=c;this.Pe=d;this.rf=e;this.bb=f||null}r("lf.schema.BaseColumn",X);m=X.prototype;m.getName=g("A");m.m=function(){return J(this.S)+"."+this.A};m.toString=function(){return this.m()};m.H=g("S");m.G=g("rf");X.prototype.getType=X.prototype.G;X.prototype.Xa=g("bb");X.prototype.Aa=function(){null==this.qa&&(this.qa=[],this.H().Aa().forEach(function(a){-1!=a.f.map(function(a){return a.ba.getName()}).indexOf(this.A)&&this.qa.push(a)},this));return this.qa};
X.prototype.za=function(){if(!q(this.ga)){var a=this.Aa().filter(function(a){return 1!=a.f.length?!1:a.f[0].ba.getName()==this.getName()},this);this.ga=0<a.length?a[0]:null}return this.ga};X.prototype.ic=g("Pe");X.prototype.isNullable=X.prototype.ic;X.prototype.Ac=g("Re");X.prototype.Ma=function(a){return Cg(this,a,"eq")};X.prototype.eq=X.prototype.Ma;X.prototype.Ye=function(a){return Cg(this,a,"neq")};X.prototype.neq=X.prototype.Ye;X.prototype.hg=function(a){return Cg(this,a,"lt")};
X.prototype.lt=X.prototype.hg;X.prototype.ig=function(a){return Cg(this,a,"lte")};X.prototype.lte=X.prototype.ig;X.prototype.Sf=function(a){return Cg(this,a,"gt")};X.prototype.gt=X.prototype.Sf;X.prototype.Tf=function(a){return Cg(this,a,"gte")};X.prototype.gte=X.prototype.Tf;X.prototype.match=function(a){return Cg(this,a,"match")};X.prototype.match=X.prototype.match;X.prototype.Af=function(a,b){return Cg(this,[a,b],"between")};X.prototype.between=X.prototype.Af;
X.prototype.Uf=function(a){return Cg(this,a,"in")};X.prototype["in"]=X.prototype.Uf;X.prototype.cg=function(){return this.Ma(null)};X.prototype.isNull=X.prototype.cg;X.prototype.bg=function(){return this.Ye(null)};X.prototype.isNotNull=X.prototype.bg;X.prototype.pc=function(a){return new X(this.S,this.A,this.Re,this.Pe,this.rf,a)};X.prototype.as=X.prototype.pc;function Xj(){this.pd=y()}var Yj;Xj.prototype.clear=function(){this.pd.clear()};Xj.prototype.clear=Xj.prototype.clear;Xj.prototype.ob=function(a,b){this.pd.set(a.toString(),b);return b};Xj.prototype.registerService=Xj.prototype.ob;Xj.prototype.l=function(a){var b=this.pd.get(a.toString())||null;if(null===b)throw new D(7,a.toString());return b};Xj.prototype.getService=Xj.prototype.l;Xj.prototype.Rd=function(a){return this.pd.has(a.toString())};Xj.prototype.isRegistered=Xj.prototype.Rd;function Zj(a){this.g=a;this.Ad=new Ic;this.fe=new Ic;this.$e=new Ic;this.Ce=y();this.h=new Ic;this.ye=new Ic;this.gf=new Ic;this.Be=new Ic;ak(this)}function ak(a){a.g.sa().forEach(function(a){var c=a.getName();a.Gb().Nd().forEach(function(d){this.$e.set(c,this.g.table(d.Qa));this.h.set(d.Qa,a);0==d.action?(this.fe.set(d.Qa,d),this.gf.set(d.Qa,a)):(this.Ad.set(d.Qa,d),this.ye.set(d.Qa,a));this.Ce.set(a.getName()+"."+d.ub,d.Qa);this.Be.set(d.Qa+"."+d.Fc,a.getName())},this)},a)}
function Rc(a,b,c){if(null!=c)return 1==c?a.Ad.get(b):a.fe.get(b);c=a.Ad.get(b);a=a.fe.get(b);return null===c&&null===a?null:(c||[]).concat(a||[])}function xh(a,b){var c=b.get(a);return null===c?[]:c}function zh(a,b){var c=B();b.forEach(function(a){(a=this.Ce.get(a))&&c.add(a)},a);return C(c).map(function(a){return this.g.table(a)},a)}function vh(a,b,c){return null!=c?0==c?xh(b,a.gf):xh(b,a.ye):xh(b,a.h)}
function Ah(a,b){var c=B();b.forEach(function(a){(a=this.Be.get(a))&&a.forEach(function(a){c.add(a)})},a);return C(c).map(function(a){return this.g.table(a)},a)};function bk(a,b,c){this.tg=a;this.lg=b;this.Qf=c}r("lf.schema.Constraint",bk);bk.prototype.Zc=g("tg");bk.prototype.getPrimaryKey=bk.prototype.Zc;bk.prototype.Nd=g("Qf");bk.prototype.getForeignKeys=bk.prototype.Nd;function ck(a,b,c){var d=a.ref.split(".");if(2!=d.length)throw new D(540,c);this.Ae=b;this.ub=a.local;this.Qa=d[0];this.Fc=d[1];this.name=b+"."+c;this.action=a.action;this.timing=a.timing};function Y(a){dk(a);this.Id=Hd();this.A=a;this.J=y();this.rd=B();this.mc=B();this.gd=B();this.Ba=null;this.qa=y();this.ld=!1;this.xb=[]}r("lf.schema.TableBuilder",Y);function ek(a){this.name=a.name;this.mb=a.order;this.autoIncrement=a.autoIncrement}var fk=B([0,6]);function dk(a){if(!/^[A-Za-z_][A-Za-z0-9_]*$/.test(a))throw new D(502,a);}function gk(a,b){if(b==a.A)throw new D(546,b);if(a.J.has(b)||a.qa.has(b)||a.mc.has(b))throw new D(503,a.A+"."+b);}
function hk(a,b){var c=!1;b.forEach(function(a){var b=this.J.get(a.name);c=c||a.autoIncrement;if(a.autoIncrement&&3!=b)throw new D(504);},a);if(c&&1<b.length)throw new D(505);}function ik(a){if(null!==a.Ba){var b=a.qa.get(a.Ba).map(function(a){return a.name}),c=0;if(a.xb.some(function(a,e){c=e;return-1!=b.indexOf(a.ub)},a))throw new D(543,a.xb[c].name);}}
function jk(a){if(null!==a.Ba){var b=function(a){return a.name},c=JSON.stringify(a.qa.get(a.Ba).map(b));a.qa.forEach(function(a,e){if(e!=this.Ba){var f=a.map(b);if(JSON.stringify(f)==c)throw new D(544,this.A+"."+e);}},a)}}function kk(a){null===a.Ba||a.qa.get(a.Ba).forEach(function(a){if(this.gd.has(a.name))throw new D(545,this.A+"."+a.name);},a)}Y.prototype.tf=function(a,b){dk(a);gk(this,a);this.J.set(a,b);fk.has(b)&&this.ve([a]);return this};Y.prototype.addColumn=Y.prototype.tf;
Y.prototype.vf=function(a,b){var c=this.A;this.Ba="pk"+(c[0].toUpperCase()+c.substring(1));dk(this.Ba);gk(this,this.Ba);c=lk(this,a,!0,void 0,b);hk(this,c);1==c.length&&this.rd.add(c[0].name);this.mc.add(this.Ba);this.qa.set(this.Ba,c);return this};Y.prototype.addPrimaryKey=Y.prototype.vf;
Y.prototype.uf=function(a,b){dk(a);gk(this,a);var c=new ck(b,this.A,a);q(c.action)||(c.action=0);q(c.timing)||(c.timing=0);if(1==c.action&&1==c.timing)throw new D(506);if(!this.J.has(c.ub))throw new D(540,a);this.xb.push(c);this.ue(a,[c.ub],this.rd.has(c.ub));return this};Y.prototype.addForeignKey=Y.prototype.uf;Y.prototype.wf=function(a,b){dk(a);gk(this,a);var c=lk(this,b,!0);1==c.length&&(this.rd.add(c[0].name),mk(this,c[0].name));this.qa.set(a,c);this.mc.add(a);return this};
Y.prototype.addUnique=Y.prototype.wf;function mk(a,b){a.xb.forEach(function(a){a.ub==b&&this.mc.add(a.name.split(".")[1])},a)}Y.prototype.ve=function(a){lk(this,a,!1).forEach(function(a){this.gd.add(a.name)},this);return this};Y.prototype.addNullable=Y.prototype.ve;Y.prototype.ue=function(a,b,c,d){dk(a);gk(this,a);b=lk(this,b,!0,d);c&&this.mc.add(a);this.qa.set(a,b);return this};Y.prototype.addIndex=Y.prototype.ue;Y.prototype.Db=ba("ld");Y.prototype.persistentIndex=Y.prototype.Db;
Y.prototype.yb=function(){ik(this);jk(this);kk(this);return new (nk(this))};Y.prototype.getSchema=Y.prototype.yb;function ok(a){return a.xb}function lk(a,b,c,d,e){var f=b,f="string"==typeof b[0]?b.map(function(a){return new ek({name:a,order:null!=d?d:1,autoIncrement:e||!1})}):b.map(function(a){return new ek(a)});f.forEach(function(a){if(!this.J.has(a.name))throw new D(508,this.A,a.name);if(c){var b=this.J.get(a.name);if(0==b||6==b)throw new D(509,this.A,a.name);}},a);return f}
function nk(a){function b(){function b(c){return a.qa.get(c).map(function(a){return{ba:this[a.name],mb:a.mb,autoIncrement:a.autoIncrement}},this)}var d=Rb(a.J).map(function(b){this[b]=new X(this,b,a.rd.has(b),a.gd.has(b),a.J.get(b));return this[b]},this),e=Rb(a.qa).map(function(d){return new Eg(a.A,d,a.mc.has(d),b.call(this,d))},this);R.call(this,a.A,d,e,a.ld);var f=null===a.Ba?null:new Eg(a.A,a.Ba,!0,b.call(this,a.Ba)),h=d.filter(function(b){return!a.gd.has(b.getName())});this.Df=new bk(f,h,a.xb);
this.kf=pk(a,d,e)}t(b,R);b.prototype.wb=function(a){return new this.kf(Tb++,a)};b.prototype.createRow=b.prototype.wb;b.prototype.gb=function(a){var b={};this.hb().forEach(function(e){var f=e.getName();e=e.G();var h=a.value[f];if(0==e)if(e=h,null!=e&&""!=e){0!=e.length%2&&(e="0"+e);for(var h=new ArrayBuffer(e.length/2),k=new Uint8Array(h),n=0,A=0;n<e.length;n+=2)k[A++]=parseInt(e.substr(n,2),16);e=h}else e=null;else e=2==e?null!=h?new Date(h):null:h;b[f]=e},this);return new this.kf(a.id,b)};b.prototype.deserializeRow=
b.prototype.gb;b.prototype.Gb=g("Df");b.prototype.getConstraint=b.prototype.Gb;return b}
function pk(a,b,c){function d(a,d){this.J=b;this.qa=c;Sb.call(this,a,d)}t(d,Sb);d.prototype.Ee=function(){var a={};this.J.forEach(function(b){a[b.getName()]=b.ic()?null:Hc[b.G()]});return a};d.prototype.qf=function(){var a={};this.J.forEach(function(b){var c=b.getName();b=b.G();var d=this.o[c];a[c]=0==b?null!=d?Wb(d):null:2==b?null!=d?d.getTime():null:6==b?null!=d?d:null:d},this);return a};var e=function(a){var b=this.J.get(a.getName()),c=this.Id.Se.get(b)||null;return function(b){return c(b[a.getName()])}}.bind(a),
f=function(a){var b=a.map(function(a){return e(a.ba)});return function(a){return b.map(function(b){return b(a)})}}.bind(a),h={};c.forEach(function(a){var b=a.m();a=1==a.f.length?e(a.f[0].ba):f(a.f);h[b]=a});d.prototype.kb=function(a){return-1!=a.indexOf("#")?this.id():h.hasOwnProperty(a)?h[a](this.o):null};return d};function qk(a,b){this.g=new Z(a,b);this.sb=y();this.wc=!1;this.j=null}r("lf.schema.Builder",qk);function rk(a,b){b.xb.forEach(function(a){var d=a.Qa;if(!this.sb.has(d))throw new D(536,a.name);var d=this.sb.get(d).yb(),e=a.Fc;if(!d.hasOwnProperty(e))throw new D(537,a.name);if(b.yb()[a.ub].G()!=d[e].G())throw new D(538,a.name);if(!d[e].Ac())throw new D(539,a.name);},a)}
qk.prototype.Cf=function(a){a.xb.forEach(function(a){ok(this.sb.get(a.Qa)).forEach(function(c){if(c.ub==a.Fc)throw new D(534,a.name);},this)},this)};function sk(a){a.wc||(a.sb.forEach(function(a){rk(this,a);a=a.yb();this.g.L.set(a.getName(),a)},a),z(a.sb).forEach(a.Cf,a),tk(a),a.sb.clear(),a.wc=!0)}function uk(a,b,c){b.re||(b.re=!0,b.Yd=!0,b.Fe.forEach(function(a){a=c.get(a);if(!a.re)uk(this,a,c);else if(a.Yd&&b!=a)throw new D(533);},a));b.Yd=!1}
function tk(a){var b=y();a.g.L.forEach(function(a,d){b.set(d,new vk(d))},a);a.sb.forEach(function(a,d){a.xb.forEach(function(a){b.get(a.Qa).Fe.add(d)})});z(b).forEach(function(a){uk(this,a,b)},a)}function vk(a){this.Yd=this.re=!1;this.Fe=B();this.Kc=a}qk.prototype.yb=function(){this.wc||sk(this);return this.g};qk.prototype.getSchema=qk.prototype.yb;qk.prototype.Je=function(){var a=new fc("ns_"+this.g.name()),b;Yj||(Yj=new Xj);b=Yj;var c=null;b.Rd(a)?c=b.l(a):(c=new Xj,b.ob(a,c));return c};
qk.prototype.getGlobal=qk.prototype.Je;qk.prototype.connect=function(a){if(null!==this.j&&this.j.ed)throw new D(113);if(null===this.j){var b=this.Je();b.Rd(mc)||b.ob(mc,this.yb());this.j=new W(b)}return this.j.Ga(a)};qk.prototype.connect=qk.prototype.connect;qk.prototype.Gf=function(a){if(this.sb.has(a))throw new D(503,a);if(this.wc)throw new D(535);this.sb.set(a,new Y(a));return this.sb.get(a)};qk.prototype.createTable=qk.prototype.Gf;
qk.prototype.je=function(a){if(this.wc)throw new D(535);this.g.je(a);return this};qk.prototype.setPragma=qk.prototype.je;function Z(a,b){this.A=a;this.$b=b;this.L=y();this.df={Kf:!1}}r("lf.schema.DatabaseSchema",Z);Z.prototype.name=g("A");Z.prototype.name=Z.prototype.name;Z.prototype.version=g("$b");Z.prototype.version=Z.prototype.version;Z.prototype.sa=function(){return z(this.L)};Z.prototype.tables=Z.prototype.sa;Z.prototype.table=function(a){if(!this.L.has(a))throw new D(101,a);return this.L.get(a)};
Z.prototype.table=Z.prototype.table;Z.prototype.info=function(){this.Oe||(this.Oe=new Zj(this));return this.Oe};Z.prototype.cf=g("df");Z.prototype.pragma=Z.prototype.cf;Z.prototype.je=ba("df");r("lf.schema.create",function(a,b){return new qk(a,b)});v.prototype.catch=v.prototype.ne;v.prototype["catch"]=v.prototype.catch;
try{if(module){module.exports=lf;}}catch(e){}}.bind(window))()
//# sourceMappingURL=lovefield.es6.js.map
