if(!self.window){window=this;}
(function(){'use strict';function aa(){return function(){}}function ca(a){return function(b){this[a]=b}}function g(a){return function(){return this[a]}}function l(a){return function(){return a}}var m,p=this;function q(a){return void 0!==a}function da(){}
function ea(a){var b=typeof a;if("object"==b)if(a){if(a instanceof Array)return"array";if(a instanceof Object)return b;var c=Object.prototype.toString.call(a);if("[object Window]"==c)return"object";if("[object Array]"==c||"number"==typeof a.length&&"undefined"!=typeof a.splice&&"undefined"!=typeof a.propertyIsEnumerable&&!a.propertyIsEnumerable("splice"))return"array";if("[object Function]"==c||"undefined"!=typeof a.call&&"undefined"!=typeof a.propertyIsEnumerable&&!a.propertyIsEnumerable("call"))return"function"}else return"null";
else if("function"==b&&"undefined"==typeof a.call)return"object";return b}function fa(a){return null===a}function ga(a){return null!=a}function ha(a){var b=ea(a);return"array"==b||"object"==b&&"number"==typeof a.length}function ia(a){return"string"==typeof a}function ja(a){return"function"==ea(a)}function ka(a){return a[la]||(a[la]=++ma)}var la="closure_uid_"+(1E9*Math.random()>>>0),ma=0;function na(a,b,c){return a.call.apply(a.bind,arguments)}
function oa(a,b,c){if(!a)throw Error();if(2<arguments.length){var d=Array.prototype.slice.call(arguments,2);return function(){var c=Array.prototype.slice.call(arguments);Array.prototype.unshift.apply(c,d);return a.apply(b,c)}}return function(){return a.apply(b,arguments)}}function pa(a,b,c){pa=Function.prototype.bind&&-1!=Function.prototype.bind.toString().indexOf("native code")?na:oa;return pa.apply(null,arguments)}
function qa(a,b){var c=Array.prototype.slice.call(arguments,1);return function(){var b=c.slice();b.push.apply(b,arguments);return a.apply(this,b)}}function r(a,b){var c=a.split("."),d=p;c[0]in d||!d.execScript||d.execScript("var "+c[0]);for(var e;c.length&&(e=c.shift());)!c.length&&q(b)?d[e]=b:d=d[e]?d[e]:d[e]={}}
function t(a,b){function c(){}c.prototype=b.prototype;a.ab=b.prototype;a.prototype=new c;a.prototype.constructor=a;a.Gg=function(a,c,f){for(var h=Array(arguments.length-2),k=2;k<arguments.length;k++)h[k-2]=arguments[k];return b.prototype[c].apply(a,h)}};function ra(a){if(Error.captureStackTrace)Error.captureStackTrace(this,ra);else{var b=Error().stack;b&&(this.stack=b)}a&&(this.message=String(a))}t(ra,Error);ra.prototype.name="CustomError";var sa=String.prototype.trim?function(a){return a.trim()}:function(a){return a.replace(/^[\s\xa0]+|[\s\xa0]+$/g,"")};
function ta(a){var b=0,c=sa(String(ua)).split(".");a=sa(String(a)).split(".");for(var d=Math.max(c.length,a.length),e=0;0==b&&e<d;e++){var f=c[e]||"",h=a[e]||"",k=/(\d*)(\D*)/g,n=/(\d*)(\D*)/g;do{var A=k.exec(f)||["","",""],O=n.exec(h)||["","",""];if(0==A[0].length&&0==O[0].length)break;b=va(0==A[1].length?0:parseInt(A[1],10),0==O[1].length?0:parseInt(O[1],10))||va(0==A[2].length,0==O[2].length)||va(A[2],O[2])}while(0==b)}return b}function va(a,b){return a<b?-1:a>b?1:0};function wa(a,b,c){this.dg=c;this.Hf=a;this.vg=b;this.kd=0;this.dd=null}wa.prototype.get=function(){var a;0<this.kd?(this.kd--,a=this.dd,this.dd=a.next,a.next=null):a=this.Hf();return a};wa.prototype.put=function(a){this.vg(a);this.kd<this.dg&&(this.kd++,a.next=this.dd,this.dd=a)};var xa=Array.prototype.indexOf?function(a,b,c){return Array.prototype.indexOf.call(a,b,c)}:function(a,b,c){c=null==c?0:0>c?Math.max(0,a.length+c):c;if(ia(a))return ia(b)&&1==b.length?a.indexOf(b,c):-1;for(;c<a.length;c++)if(c in a&&a[c]===b)return c;return-1},ya=Array.prototype.forEach?function(a,b,c){Array.prototype.forEach.call(a,b,c)}:function(a,b,c){for(var d=a.length,e=ia(a)?a.split(""):a,f=0;f<d;f++)f in e&&b.call(c,e[f],f,a)},za=Array.prototype.map?function(a,b,c){return Array.prototype.map.call(a,
b,c)}:function(a,b,c){for(var d=a.length,e=Array(d),f=ia(a)?a.split(""):a,h=0;h<d;h++)h in f&&(e[h]=b.call(c,f[h],h,a));return e},Aa=Array.prototype.reduce?function(a,b,c,d){d&&(b=pa(b,d));return Array.prototype.reduce.call(a,b,c)}:function(a,b,c,d){var e=c;ya(a,function(c,h){e=b.call(d,e,c,h,a)});return e},Ba=Array.prototype.some?function(a,b,c){return Array.prototype.some.call(a,b,c)}:function(a,b,c){for(var d=a.length,e=ia(a)?a.split(""):a,f=0;f<d;f++)if(f in e&&b.call(c,e[f],f,a))return!0;return!1};
function Ca(a,b,c){return 2>=arguments.length?Array.prototype.slice.call(a,b):Array.prototype.slice.call(a,b,c)}function Da(a){for(var b=[],c=0;c<a;c++)b[c]=0;return b}function Ea(a){for(var b=[],c=0;c<arguments.length;c++){var d=arguments[c];if("array"==ea(d))for(var e=0;e<d.length;e+=8192)for(var f=Ea.apply(null,Ca(d,e,e+8192)),h=0;h<f.length;h++)b.push(f[h]);else b.push(d)}return b};var Fa;a:{var Ga=p.navigator;if(Ga){var Ha=Ga.userAgent;if(Ha){Fa=Ha;break a}}Fa=""}function u(a){return-1!=Fa.indexOf(a)};function Ja(){return u("Opera")||u("OPR")}function Ka(){return(u("Chrome")||u("CriOS"))&&!Ja()&&!u("Edge")};function La(a){p.setTimeout(function(){throw a;},0)}var Ma;
function Na(){var a=p.MessageChannel;"undefined"===typeof a&&"undefined"!==typeof window&&window.postMessage&&window.addEventListener&&!u("Presto")&&(a=function(){var a=document.createElement("IFRAME");a.style.display="none";a.src="";document.documentElement.appendChild(a);var b=a.contentWindow,a=b.document;a.open();a.write("");a.close();var c="callImmediate"+Math.random(),d="file:"==b.location.protocol?"*":b.location.protocol+"//"+b.location.host,a=pa(function(a){if(("*"==d||a.origin==d)&&a.data==
c)this.port1.onmessage()},this);b.addEventListener("message",a,!1);this.port1={};this.port2={postMessage:function(){b.postMessage(c,d)}}});if("undefined"!==typeof a&&!u("Trident")&&!u("MSIE")){var b=new a,c={},d=c;b.port1.onmessage=function(){if(q(c.next)){c=c.next;var a=c.ye;c.ye=null;a()}};return function(a){d.next={ye:a};d=d.next;b.port2.postMessage(0)}}return"undefined"!==typeof document&&"onreadystatechange"in document.createElement("SCRIPT")?function(a){var b=document.createElement("SCRIPT");
b.onreadystatechange=function(){b.onreadystatechange=null;b.parentNode.removeChild(b);b=null;a();a=null};document.documentElement.appendChild(b)}:function(a){p.setTimeout(a,0)}};function Oa(){this.td=this.nc=null}var Qa=new wa(function(){return new Pa},function(a){a.reset()},100);Oa.prototype.add=function(a,b){var c=Qa.get();c.set(a,b);this.td?this.td.next=c:this.nc=c;this.td=c};Oa.prototype.remove=function(){var a=null;this.nc&&(a=this.nc,this.nc=this.nc.next,this.nc||(this.td=null),a.next=null);return a};function Pa(){this.next=this.scope=this.Ld=null}Pa.prototype.set=function(a,b){this.Ld=a;this.scope=b;this.next=null};
Pa.prototype.reset=function(){this.next=this.scope=this.Ld=null};function Ra(a,b){Sa||Ta();Ua||(Sa(),Ua=!0);Va.add(a,b)}var Sa;function Ta(){if(p.Promise&&p.Promise.resolve){var a=p.Promise.resolve(void 0);Sa=function(){a.then(Wa)}}else Sa=function(){var a=Wa;!ja(p.setImmediate)||p.Window&&p.Window.prototype&&p.Window.prototype.setImmediate==p.setImmediate?(Ma||(Ma=Na()),Ma(a)):p.setImmediate(a)}}var Ua=!1,Va=new Oa;function Wa(){for(var a=null;a=Va.remove();){try{a.Ld.call(a.scope)}catch(b){La(b)}Qa.put(a)}Ua=!1};function v(a,b){this.Ra=0;this.ff=void 0;this.Tc=this.cc=this.B=null;this.cd=this.Jd=!1;if(a!=da)try{var c=this;a.call(b,function(a){Xa(c,2,a)},function(a){Xa(c,3,a)})}catch(d){Xa(this,3,d)}}function Za(){this.next=this.context=this.jc=this.Fc=this.child=null;this.wd=!1}Za.prototype.reset=function(){this.context=this.jc=this.Fc=this.child=null;this.wd=!1};var $a=new wa(function(){return new Za},function(a){a.reset()},100);function ab(a,b,c){var d=$a.get();d.Fc=a;d.jc=b;d.context=c;return d}
function w(a){if(a instanceof v)return a;var b=new v(da);Xa(b,2,a);return b}function bb(a){return new v(function(b,c){c(a)})}function cb(a,b,c){db(a,b,c,null)||Ra(qa(b,a))}function eb(a){return new v(function(b,c){var d=a.length,e=[];if(d)for(var f=function(a,c){d--;e[a]=c;0==d&&b(e)},h=function(a){c(a)},k=0,n;k<a.length;k++)n=a[k],cb(n,qa(f,k),h);else b(e)})}function x(){var a,b,c=new v(function(c,e){a=c;b=e});return new fb(c,a,b)}
v.prototype.then=function(a,b,c){return gb(this,ja(a)?a:null,ja(b)?b:null,c)};v.prototype.then=v.prototype.then;v.prototype.$goog_Thenable=!0;v.prototype.me=function(a,b){return gb(this,null,a,b)};function hb(a,b){a.cc||2!=a.Ra&&3!=a.Ra||ib(a);a.Tc?a.Tc.next=b:a.cc=b;a.Tc=b}
function gb(a,b,c,d){var e=ab(null,null,null);e.child=new v(function(a,h){e.Fc=b?function(c){try{var e=b.call(d,c);a(e)}catch(A){h(A)}}:a;e.jc=c?function(b){try{var e=c.call(d,b);!q(e)&&b instanceof jb?h(b):a(e)}catch(A){h(A)}}:h});e.child.B=a;hb(a,e);return e.child}v.prototype.Bg=function(a){this.Ra=0;Xa(this,2,a)};v.prototype.Cg=function(a){this.Ra=0;Xa(this,3,a)};
function Xa(a,b,c){0==a.Ra&&(a==c&&(b=3,c=new TypeError("Promise cannot resolve to itself")),a.Ra=1,db(c,a.Bg,a.Cg,a)||(a.ff=c,a.Ra=b,a.B=null,ib(a),3!=b||c instanceof jb||kb(a,c)))}function db(a,b,c,d){if(a instanceof v)return hb(a,ab(b||da,c||null,d)),!0;var e;if(a)try{e=!!a.$goog_Thenable}catch(h){e=!1}else e=!1;if(e)return a.then(b,c,d),!0;e=typeof a;if("object"==e&&null!=a||"function"==e)try{var f=a.then;if(ja(f))return lb(a,f,b,c,d),!0}catch(h){return c.call(d,h),!0}return!1}
function lb(a,b,c,d,e){function f(a){k||(k=!0,d.call(e,a))}function h(a){k||(k=!0,c.call(e,a))}var k=!1;try{b.call(a,h,f)}catch(n){f(n)}}function ib(a){a.Jd||(a.Jd=!0,Ra(a.Mf,a))}function mb(a){var b=null;a.cc&&(b=a.cc,a.cc=b.next,b.next=null);a.cc||(a.Tc=null);return b}
v.prototype.Mf=function(){for(var a=null;a=mb(this);){var b=this.Ra,c=this.ff;if(3==b&&a.jc&&!a.wd)for(var d=void 0,d=this;d&&d.cd;d=d.B)d.cd=!1;if(a.child)a.child.B=null,nb(a,b,c);else try{a.wd?a.Fc.call(a.context):nb(a,b,c)}catch(e){ob.call(null,e)}$a.put(a)}this.Jd=!1};function nb(a,b,c){2==b?a.Fc.call(a.context,c):a.jc&&a.jc.call(a.context,c)}function kb(a,b){a.cd=!0;Ra(function(){a.cd&&ob.call(null,b)})}var ob=La;function jb(a){ra.call(this,a)}t(jb,ra);jb.prototype.name="cancel";
function fb(a,b,c){this.da=a;this.resolve=b;this.reject=c};function pb(a,b,c,d){c=c||function(a,b){return a==b};d=d||function(b){return a[b]};for(var e=a.length,f=b.length,h=[],k=0;k<e+1;k++)h[k]=[],h[k][0]=0;for(var n=0;n<f+1;n++)h[0][n]=0;for(k=1;k<=e;k++)for(n=1;n<=f;n++)c(a[k-1],b[n-1])?h[k][n]=h[k-1][n-1]+1:h[k][n]=Math.max(h[k-1][n],h[k][n-1]);for(var A=[],k=e,n=f;0<k&&0<n;)c(a[k-1],b[n-1])?(A.unshift(d(k-1,n-1)),k--,n--):h[k-1][n]>h[k][n-1]?k--:n--;return A}function qb(a){return Aa(arguments,function(a,c){return a+c},0)}
function rb(a){return qb.apply(null,arguments)/arguments.length}function sb(a){var b=arguments.length;if(2>b)return 0;var c=rb.apply(null,arguments);return qb.apply(null,za(arguments,function(a){return Math.pow(a-c,2)}))/(b-1)}function tb(a){return Math.sqrt(sb.apply(null,arguments))};var ub="StopIteration"in p?p.StopIteration:{message:"StopIteration",stack:""};function vb(){}vb.prototype.next=function(){throw ub;};vb.prototype.re=function(){return this};function wb(a){if(a instanceof vb)return a;if("function"==typeof a.re)return a.re(!1);if(ha(a)){var b=0,c=new vb;c.next=function(){for(;;){if(b>=a.length)throw ub;if(b in a)return a[b++];b++}};return c}throw Error("Not implemented");}
function yb(a,b){if(ha(a))try{ya(a,b,void 0)}catch(c){if(c!==ub)throw c;}else{a=wb(a);try{for(;;)b.call(void 0,a.next(),void 0,a)}catch(c){if(c!==ub)throw c;}}}function zb(a){if(Ba(arguments,function(a){return!a.length})||!arguments.length)return new vb;var b=new vb,c=arguments,d=Da(c.length);b.next=function(){if(d){for(var a=za(d,function(a,b){return c[b][a]}),b=d.length-1;0<=b;b--){if(d[b]<c[b].length-1){d[b]++;break}if(0==b){d=null;break}d[b]=0}return a}throw ub;};return b};function Ab(a){Bb(a);return a.b.concat()}function Bb(a){if(a.Df!=a.b.length){for(var b=0,c=0;b<a.b.length;){var d=a.b[b];Cb(a.Z,d)&&(a.b[c++]=d);b++}a.b.length=c}if(a.Df!=a.b.length){for(var e={},c=b=0;b<a.b.length;)d=a.b[b],Cb(e,d)||(a.b[c++]=d,e[d]=1),b++;a.b.length=c}}function Cb(a,b){return Object.prototype.hasOwnProperty.call(a,b)};function Db(){return u("iPhone")&&!u("iPod")&&!u("iPad")};var Eb=Ja(),Fb=u("Trident")||u("MSIE"),Gb=u("Edge"),Hb=u("Gecko")&&!(-1!=Fa.toLowerCase().indexOf("webkit")&&!u("Edge"))&&!(u("Trident")||u("MSIE"))&&!u("Edge"),Ib=-1!=Fa.toLowerCase().indexOf("webkit")&&!u("Edge");function Jb(){var a=Fa;if(Hb)return/rv\:([^\);]+)(\)|;)/.exec(a);if(Gb)return/Edge\/([\d\.]+)/.exec(a);if(Fb)return/\b(?:MSIE|rv)[: ]([^\);]+)(\)|;)/.exec(a);if(Ib)return/WebKit\/(\S+)/.exec(a)}
var ua=function(){if(Eb&&p.opera){var a;var b=p.opera.version;try{a=b()}catch(c){a=b}return a}a="";(b=Jb())&&(a=b?b[1]:"");return Fb&&(b=(b=p.document)?b.documentMode:void 0,b>parseFloat(a))?String(b):a}(),Kb={};var Lb=Db()||u("iPod"),Mb=u("iPad");!u("Android")||Ka()||u("Firefox")||Ja();var Nb=Ka(),Ob=u("Safari")&&!(Ka()||u("Coast")||Ja()||u("Edge")||u("Silk")||u("Android"))&&!(Db()||u("iPad")||u("iPod"));/*

 Copyright 2015 The Lovefield Project Authors. All Rights Reserved.

 Licensed under the Apache License, Version 2.0 (the "License");
 you may not use this file except in compliance with the License.
 You may obtain a copy of the License at

     http://www.apache.org/licenses/LICENSE-2.0

 Unless required by applicable law or agreed to in writing, software
 distributed under the License is distributed on an "AS IS" BASIS,
 WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 See the License for the specific language governing permissions and
 limitations under the License.
*/
function Pb(){this.wg=Ob||Mb||Lb;this.Vf=!(this.wg||Fb&&!Kb[10]&&!(Kb[10]=0<=ta(10)));!Fb||Kb[11]||(Kb[11]=0<=ta(11));this.Eg=Nb||Ob}var Qb;function y(){return new window.Map}function Rb(a){var b=0,c=Array(a.size);a.forEach(function(a,e){c[b++]=e});return c}function z(a){var b=0,c=Array(a.size);a.forEach(function(a){c[b++]=a});return c};/*

 Copyright 2014 The Lovefield Project Authors. All Rights Reserved.

 Licensed under the Apache License, Version 2.0 (the "License");
 you may not use this file except in compliance with the License.
 You may obtain a copy of the License at

     http://www.apache.org/licenses/LICENSE-2.0

 Unless required by applicable law or agreed to in writing, software
 distributed under the License is distributed on an "AS IS" BASIS,
 WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 See the License for the specific language governing permissions and
 limitations under the License.
*/
function Sb(a,b){this.oa=a;this.o=b||this.De()}var Tb=0;m=Sb.prototype;m.id=g("oa");m.De=function(){return{}};m.pf=g("o");m.Fa=function(){return{id:this.oa,value:this.pf()}};m.jb=function(a){return"#"==a.substr(-1)?this.oa:null};function Ub(a){return new Sb(a.id,a.value)}function Vb(a){return new Sb(Tb++,a||{})}function Wb(a){if(null==a)return null;a=new Uint8Array(a);for(var b="",c=0;c<a.length;++c)var d=a[c].toString(16),b=b+(2>d.length?"0"+d:d);return b};var Xb={};r("lf.TransactionType",Xb);Xb.READ_ONLY=0;Xb.READ_WRITE=1;function Yb(a,b){this.ne=a;this.Oa=b||null;this.O=x()}Yb.prototype.ia=function(){return 0==this.ne?this.qc():Zb(this)};function Zb(a){try{$b(a.Oa)}catch(b){return bb(b)}return ac(a).then(function(a){this.Oa.ia();return a}.bind(a))}function ac(a){bc(a);cc(a);return a.qc()}
function bc(a){a.Oa.sb.forEach(function(a,c){var d=this.Oa.ca().get(c),d=this.H(d.getName(),d.fb.bind(d),0),e=z(a.ya).map(function(a){return a.id()});0<e.length&&d.remove(e).me(this.Je,this);e=z(a.ma).map(function(a){return a[1]}).concat(z(a.ua));d.put(e).me(this.Je,this)},a)}function cc(a){dc(a.Oa).forEach(function(a){var c=this.H(a.getName(),Ub,1);c.remove([]);c.put(a.Fa())},a)}Yb.prototype.Je=function(a){this.O.reject(a)};function ec(a){this.xg=a}ec.prototype.toString=g("xg");var fc=new ec("backstore"),gc=new ec("cache"),hc=new ec("indexstore"),ic=new ec("engine"),jc=new ec("runner"),kc=new ec("observerregistry"),lc=new ec("schema");function B(a){return q(a)?new window.Set(a):new window.Set}function C(a){var b=0,c=Array(a.size);a.forEach(function(a){c[b++]=a});return c}function mc(a,b){if(b.size>a.size)return!1;var c=!0;b.forEach(function(b){c=c&&a.has(b)});return c};function nc(a,b){this.oa=a;this.o=b||{}}function oc(a){var b=B();a.forEach(function(a){b.add(a>>9)});return C(b)}nc.prototype.Y=g("oa");function pc(a,b){b.forEach(function(a){this.o[a.id()]=a.Fa()},a)}function qc(a,b){b.forEach(function(a){delete this.o[a]},a)}nc.prototype.Fa=function(){return{id:this.oa,value:JSON.stringify(this.o)}};function rc(a){return new nc(a.id,JSON.parse(a.value))};function sc(a,b,c){this.X=a;this.Db=b;this.gf=c}m=sc.prototype;m.get=function(a){if(0==a.length)return this.Md();var b=this.Db;return tc(this,a).then(function(c){return a.map(function(a){var e=c.get(a>>9);return b(e.o[a])})})};function tc(a,b){var c=y(),d=x(),e=oc(b).map(function(a){return new v(function(b,d){var e;try{e=this.X.get(a)}catch(A){d(A);return}e.onerror=d;e.onsuccess=function(a){a=rc(a.target.result);c.set(a.Y(),a);b()}},this)},a);eb(e).then(function(){d.resolve(c)});return d.da}
m.Md=function(){return new v(function(a,b){var c=[],d;try{d=this.X.openCursor()}catch(e){b(e);return}d.onerror=b;d.onsuccess=function(){var b=d.result;if(b){var f;f=rc(b.value).o;for(var h in f)c.push(this.Db(f[h]));b.continue()}else a(c)}.bind(this)},this)};m.Sb=function(a){return new v(function(b,c){var d;try{d=a()}catch(e){c(e);return}d.onsuccess=b;d.onerror=c},this)};
m.put=function(a){if(0==a.length)return w();var b=y();a.forEach(function(a){var d;d=a.id()>>9;var e=b.get(d)||null;null===e&&(e=this.gf(this.X.name,d));pc(e,[a]);b.set(d,e)},this);a=z(b).map(function(a){return this.Sb(function(){return this.X.put(a.Fa())}.bind(this))},this);return eb(a)};
m.remove=function(a){if(0==a.length)return this.Sb(function(){return this.X.clear()}.bind(this));var b=y();a.forEach(function(a){var d=a>>9,e=b.get(d)||null;null===e&&(e=this.gf(this.X.name,d));qc(e,[a]);b.set(d,e)},this);a=z(b).map(function(a){return this.Sb(function(){return 0==Object.keys(a.o).length?this.X.delete(a.Y()):this.X.put(a.Fa())}.bind(this))},this);return eb(a)};function uc(a,b,c){a=a.l(gc);var d=[c<<9,(c+1<<9)-1];b=a.Xa(b,d[0],d[1]);c=new nc(c);pc(c,b);return c}
function vc(a,b){return new nc(b)};function wc(){};function xc(a){this.U=a.l(gc);this.D=a.l(hc);this.g=a.l(lc)}xc.prototype.update=function(a){a.forEach(function(a){yc(this,a);zc(this,a)},this)};function zc(a,b){var c=b.getName();b.ya.forEach(function(a,b){this.U.remove(c,b)},a);b.ua.forEach(function(a){this.U.set(c,a)},a);b.ma.forEach(function(a){this.U.set(c,a[1])},a)}function yc(a,b){var c=a.g.table(b.getName());Ac(b).forEach(function(a){Bc(this,c,a)},a)}
function Bc(a,b,c){var d=a.D.lc.get(b.getName())||[],e=0;d.forEach(function(a){try{Cc(a,c),e++}catch(b){throw d.slice(0,e).forEach(function(a){Cc(a,[c[1],c[0]])},this),b;}},a)}function Cc(a,b){var c=null===b[1]?void 0:b[1].jb(a.getName()),d=null===b[0]?void 0:b[0].jb(a.getName());if(!q(d)&&q(c))a.add(c,b[1].id());else if(q(d)&&q(c)){if(null===c||null===d){if(c==d)return}else if(0==a.dc().compare(d,c))return;a.add(c,b[1].id());a.remove(d,b[0].id())}else q(d)&&!q(c)&&a.remove(d,b[0].id())};var Dc={};r("lf.ConstraintAction",Dc);Dc.RESTRICT=0;Dc.CASCADE=1;var Ec={};r("lf.ConstraintTiming",Ec);Ec.IMMEDIATE=0;Ec.DEFERRABLE=1;var Fc={};r("lf.Order",Fc);Fc.DESC=0;Fc.ASC=1;var Gc={};r("lf.Type",Gc);Gc.ARRAY_BUFFER=0;Gc.BOOLEAN=1;Gc.DATE_TIME=2;Gc.INTEGER=3;Gc.NUMBER=4;Gc.STRING=5;Gc.OBJECT=6;var Hc={0:null,1:!1,2:Object.freeze(new Date(0)),3:0,4:0,5:"",6:null};r("lf.type.DEFAULT_VALUES",Hc);function D(a,b){this.code=a;this.message="http://sn.im/2a0j3wn?c="+a;if(1<arguments.length)for(var c=1;c<=Math.min(4,arguments.length-1);++c)this.message+="&p"+(c-1)+"="+encodeURIComponent(arguments[c].toString().slice(0,64))}t(D,Error);function Ic(){this.Z=y();this.size=0}m=Ic.prototype;m.has=function(a){return this.Z.has(a)};m.set=function(a,b){var c=this.Z.get(a)||null;null===c&&(c=B(),this.Z.set(a,c));c.has(b)||(c.add(b),this.size++);return this};m.Vb=function(a,b){var c=this.Z.get(a)||null;null===c&&(c=B(),this.Z.set(a,c));b.forEach(function(a){c.has(a)||(c.add(a),this.size++)},this);return this};m.Ud=function(a){a.keys().forEach(function(b){var c=a.get(b);this.Vb(b,c)},this);return this};
m.delete=function(a,b){var c=this.Z.get(a,null);if(null===c)return!1;var d=c.delete(b);d&&(--this.size,0==c.size&&this.Z.delete(a));return d};m.get=function(a){a=this.Z.get(a)||null;return null===a?null:C(a)};m.clear=function(){this.Z.clear();this.size=0};m.keys=function(){return Rb(this.Z)};m.values=function(){var a=[];this.Z.forEach(function(b){a.push.apply(a,C(b))});return a};function Jc(a){this.D=a.l(hc);this.g=a.l(lc);this.U=a.l(gc);this.Xc=null}function Kc(a,b,c){var d=b.Eb().ig;c.forEach(function(a){d.forEach(function(b){if(null==a.o[b.getName()])throw new D(202,b.m());},this)},a)}function Lc(a,b,c,d){b.Eb().Nd().forEach(function(a){a.timing==d&&Mc(this,a,c)},a)}function Mc(a,b,c){var d=Nc(a,b);c.forEach(function(a){if(Oc(a[0],a[1],b.name)&&(a=a[1].jb(b.name),null!==a&&!d.eb(a)))throw new D(203,b.name);},a)}
function Nc(a,b){null===a.Xc&&(a.Xc=y());var c=a.Xc.get(b.name)||null;null===c&&(c=a.g.table(b.Pa)[b.Gc].za(),c=a.D.get(c.m()),a.Xc.set(b.name,c));return c}function Oc(a,b,c){return(null===a?null!==b:null===b)||a.jb(c)!=b.jb(c)}function Qc(a,b,c,d){b=Rc(a.g.info(),b.getName(),0);null!==b&&(b=b.filter(function(a){return a.timing==d}),0!=b.length&&Sc(a,b,c,function(a,b,c){if(b.eb(c))throw new D(203,a.name);}))}
function Tc(a,b,c){b=Rc(a.g.info(),b.getName(),1);if(null===b)return null;var d=new Ic;Sc(a,b,c,function(a,b,c){b=b.get(c);0<b.length&&d.Vb(a.ze,b)});return d}function Uc(a,b,c){var d=new Ic;Sc(a,c,b,function(a,b,c,k){b.get(c).forEach(function(b){d.set(b,{Kd:a,ng:k[1]})})});return d}function Sc(a,b,c,d){b.forEach(function(a){var b=this.D.get(a.name),h=Nc(this,a);c.forEach(function(c){if(Oc(c[0],c[1],h.getName())){var n=c[0].jb(h.getName());d(a,b,n,c)}},this)},a)}
function Vc(a,b,c,d){0!=c.length&&(c=c.map(function(a){return[null,a]}),Lc(a,b,c,d))}function Wc(a,b,c,d){0!=c.length&&(Lc(a,b,c,d),Qc(a,b,c,d))}function Xc(a,b,c,d){0!=c.length&&(c=c.map(function(a){return[a,null]}),Qc(a,b,c,d))}
function Yc(a,b,c){var d={le:[],jf:new Ic},e=new Ic;e.Vb(b.getName(),c.map(function(a){return a.id()}));do{var f=new Ic;e.keys().forEach(function(a){var b=this.g.table(a);a=e.get(a).map(function(a){return[this.U.get(a),null]},this);b=Tc(this,b,a);null!==b&&(d.le.unshift.apply(d.le,b.keys()),f.Ud(b))},a);e=f;d.jf.Ud(e)}while(0<e.size);return d};function Zc(a){this.ua=y();this.ma=y();this.ya=y();this.u=a}m=Zc.prototype;m.getName=g("u");m.add=function(a){if(this.ya.has(a.id())){var b=[this.ya.get(a.id()),a];this.ma.set(a.id(),b);this.ya.delete(a.id())}else this.ua.set(a.id(),a)};m.modify=function(a){var b=a[1],c=a[0].id();this.ua.has(c)?this.ua.set(c,b):(this.ma.has(c)&&(a=[this.ma.get(a[0].id())[0],b]),this.ma.set(c,a))};
m.delete=function(a){if(this.ua.has(a.id()))this.ua.delete(a.id());else if(this.ma.has(a.id())){var b=this.ma.get(a.id())[0];this.ma.delete(a.id());this.ya.set(a.id(),b)}else this.ya.set(a.id(),a)};m.Ud=function(a){a.ua.forEach(function(a){this.add(a)},this);a.ma.forEach(function(a){this.modify(a)},this);a.ya.forEach(function(a){this.delete(a)},this)};
function Ac(a){var b=[];a.ua.forEach(function(a){b.push([null,a])});a.ma.forEach(function(a){b.push(a)});a.ya.forEach(function(a){b.push([a,null])});return b}m.toString=function(){return"["+Rb(this.ua).toString()+"], ["+Rb(this.ma).toString()+"], ["+Rb(this.ya).toString()+"]"};function $c(a){var b=new Zc(a.u);a.ua.forEach(function(a){b.delete(a)});a.ya.forEach(function(a){b.add(a)});a.ma.forEach(function(a){b.modify([a[1],a[0]])});return b}
m.Zf=function(){return 0==this.ua.size&&0==this.ya.size&&0==this.ma.size};function ad(a,b){this.aa=y();b.forEach(function(a){this.aa.set(a.getName(),a)},this);this.g=a.l(lc);this.U=a.l(gc);this.D=a.l(hc);this.wa=new Jc(a);this.ed=new xc(a);this.sb=y()}function dc(a){var b=[];Rb(a.sb).map(function(a){return this.aa.get(a)},a).forEach(function(a){a.Bb()&&(a.Aa().forEach(function(a){b.push(this.D.get(a.m()))},this),b.push(this.D.get(a.getName()+".#")))},a);return b}m=ad.prototype;m.ca=g("aa");
m.zb=function(a,b){bd(this,a);Kc(this.wa,a,b);Vc(this.wa,a,b,0);for(var c=0;c<b.length;c++)cd(this,a,[null,b[c]])};function cd(a,b,c){var d=b.getName(),e=a.sb.get(d)||new Zc(d);a.sb.set(d,e);try{Bc(a.ed,b,c)}catch(h){throw h;}b=c[0];var f=c[1];null===b&&null!==f?(a.U.set(d,f),e.add(f)):null!==b&&null!==f?(a.U.set(d,f),e.modify(c)):null!==b&&null===f&&(a.U.remove(d,b.id()),e.delete(b))}
m.update=function(a,b){bd(this,a);Kc(this.wa,a,b);var c=b.map(function(a){return[this.U.get(a.id()),a]},this);dd(this,a,c);Wc(this.wa,a,c,0);c.forEach(function(b){cd(this,a,b)},this)};m.Od=function(a,b){bd(this,a);Kc(this.wa,a,b);for(var c=0;c<b.length;c++){var d=b[c],e=null,f,h=a.Eb().$c();if(null===h)f=null;else{f=this.wa;var h=h.m(),k=d.jb(h);f=f.D.get(h).get(k);f=0==f.length?null:f[0]}null!=f?(e=this.U.get(f),d.oa=f,Wc(this.wa,a,[[e,d]],0)):Vc(this.wa,a,[d],0);cd(this,a,[e,d])}};
m.remove=function(a,b){bd(this,a);ed(this,a,b);Xc(this.wa,a,b,0);for(var c=0;c<b.length;c++)cd(this,a,[b[c],null])};function dd(a,b,c){b=Rc(a.g.info(),b.getName(),1);if(null!==b){var d=Uc(a.wa,c,b);d.keys().forEach(function(a){d.get(a).forEach(function(b){var c=this.g.table(b.Kd.ze),d=this.U.get(a),n=c.fb(d.Fa());n.o[b.Kd.tb]=b.ng.o[b.Kd.Gc];cd(this,c,[d,n])},this)},a)}}
function ed(a,b,c){if(null!==Rc(a.g.info(),b.getName(),1)){b=Yc(a.wa,b,c);var d=b.jf;b.le.forEach(function(a){var b=this.g.table(a);a=d.get(a).map(function(a){return this.U.get(a)},this);Xc(this.wa,b,a,0);a.forEach(function(a){cd(this,b,[a,null])},this)},a)}}function $b(a){a.sb.forEach(function(a){var c=this.aa.get(a.getName());Vc(this.wa,c,z(a.ua),1);Xc(this.wa,c,z(a.ya),1);Wc(this.wa,c,z(a.ma),1)},a)}m.ia=aa();m.Ib=function(){var a=z(this.sb).map(function(a){return $c(a)});this.ed.update(a)};
function bd(a,b){if(!a.aa.has(b.getName()))throw new D(106,b.getName());};function fd(a,b,c,d){this.c=a;this.w=b;this.ea=this.c==E?!1:c;this.la=this.w==E?!1:d}var E=new (aa());fd.prototype.toString=function(){return(this.ea?"(":"[")+(this.c==E?"unbound":this.c)+", "+(this.w==E?"unbound":this.w)+(this.la?")":"]")};function gd(a){if(hd(a))return[];var b=null,c=null;a.c==E||(b=new fd(E,a.c,!1,!a.ea));a.w==E||(c=new fd(a.w,E,!a.la,!1));return[b,c].filter(function(a){return null!==a})}fd.prototype.reverse=function(){return new fd(this.w,this.c,this.la,this.ea)};
function id(a,b){var c=jd(a.c,b.c,!0,a.ea,b.ea);if(0==c)return!0;var d=-1==c?a:b,c=1==c?a:b;return d.w==E||d.w>c.c||d.w==c.c&&!d.la&&!c.ea}function kd(){return new fd(E,E,!1,!1)}function hd(a){return a.c==E&&a.w==E}function ld(a){return a.c==a.w&&a.c!=E&&!a.ea&&!a.la}fd.prototype.contains=function(a){var b=this.w==E||a<this.w||a==this.w&&!this.la;return(this.c==E||a>this.c||a==this.c&&!this.ea)&&b};
function jd(a,b,c,d,e){function f(a){return c?a:1==a?-1:1}d=d||!1;e=e||!1;return a==E?b==E?(d?!e:e)?d?f(1):f(-1):0:f(-1):b==E?f(1):a<b?-1:a==b?(d?!e:e)?d?f(1):f(-1):0:1}function md(a,b){var c=jd(a.c,b.c,!0,a.ea,b.ea);0==c&&(c=jd(a.w,b.w,!1,a.la,b.la));return c};function F(a,b){this.entries=a;this.L=B(b);this.Va=null}function G(a){return C(a.L)}function nd(a){return a.entries.map(function(a){return a.ta.o})}function od(a){return a.entries.map(function(a){return a.ta.id()})}function pd(a,b){return a.Va.get(b.m())}var qd=null;function rd(){null===qd&&(qd=new F([],[]));return qd}
function sd(a){if(0==a.length)return rd();for(var b=a.reduce(function(a,b){return a+b.entries.length},0),c=Array(b),d=0,b=a.map(function(a){var b=y();a.entries.forEach(function(a){c[d++]=a;b.set(a.id,a)});return b}),e=y(),f=0;f<c.length;f++)b.every(function(a){return a.has(c[f].id)})&&e.set(c[f].id,c[f]);return new F(z(e),C(a[0].L))}function td(a){if(0==a.length)return rd();var b=y();a.forEach(function(a){a.entries.forEach(function(a){b.set(a.id,a)})});return new F(z(b),C(a[0].L))}
function ud(a,b){var c=1<b.length,d=a.map(function(a){return new vd(a,c)});return new F(d,b)}function vd(a,b){this.ta=a;this.id=wd++;this.Qd=b}var wd=0;function H(a,b){var c=b.Wa();return null!==c&&a.ta.o.hasOwnProperty(c)?a.ta.o[c]:a.Qd?a.ta.o[I(b.H())][b.getName()]:a.ta.o[b.getName()]}function xd(a,b,c){var d=b.Wa();if(null!=d)a.ta.o[d]=c;else if(a.Qd){var d=I(b.H()),e=a.ta.o[d];null==e&&(e={},a.ta.o[d]=e);e[b.getName()]=c}else a.ta.o[b.getName()]=c}
function yd(a,b,c,d){function e(a,b){if(a.Qd){var c=a.ta.o,d;for(d in c)f[d]=c[d]}else f[b[0]]=a.ta.o}var f={};e(a,b);e(c,d);a=new Sb(-1,f);return new vd(a,!0)};r("lf.bind",function(a){return new zd(a)});function zd(a){this.ga=a}r("lf.Binder",zd);zd.prototype.za=g("ga");function Ad(){this.Qe=Bd();var a=Cd();this.gc=y();this.gc.set(1,Dd());this.gc.set(2,Ed());this.gc.set(4,a);this.gc.set(3,a);this.gc.set(5,Fd())}Ad.xc=function(){return Ad.Me?Ad.Me:Ad.Me=new Ad};function Gd(a,b,c){return(a.gc.get(b)||null).get(c)||null}function Bd(){function a(a){return a}var b=y();b.set(1,function(a){return null===a?null:a?1:0});b.set(2,function(a){return null===a?null:a.getTime()});b.set(3,a);b.set(4,a);b.set(5,a);return b}
function Dd(){var a=y();a.set("eq",function(a,c){return a==c});a.set("neq",function(a,c){return a!=c});return a}
function Cd(){var a=Dd();a.set("between",function(a,c){return null===a||null===c[0]||null===c[1]?!1:a>=c[0]&&a<=c[1]});a.set("gte",function(a,c){return null===a||null===c?!1:a>=c});a.set("gt",function(a,c){return null===a||null===c?!1:a>c});a.set("in",function(a,c){return-1!=c.indexOf(a)});a.set("lte",function(a,c){return null===a||null===c?!1:a<=c});a.set("lt",function(a,c){return null===a||null===c?!1:a<c});return a}
function Fd(){var a=Cd();a.set("match",function(a,c){return null===a||null===c?!1:(new RegExp(c)).test(a)});return a}
function Ed(){var a=y();a.set("between",function(a,c){return null===a||null===c[0]||null===c[1]?!1:a.getTime()>=c[0].getTime()&&a.getTime()<=c[1].getTime()});a.set("eq",function(a,c){return(null===a?-1:a.getTime())==(null===c?-1:c.getTime())});a.set("gte",function(a,c){return null===a||null===c?!1:a.getTime()>=c.getTime()});a.set("gt",function(a,c){return null===a||null===c?!1:a.getTime()>c.getTime()});a.set("in",function(a,c){return c.some(function(c){return c.getTime()==a.getTime()})});a.set("lte",
function(a,c){return null===a||null===c?!1:a.getTime()<=c.getTime()});a.set("lt",function(a,c){return null===a||null===c?!1:a.getTime()<c.getTime()});a.set("neq",function(a,c){return(null===a?-1:a.getTime())!=(null===c?-1:c.getTime())});return a};function J(){this.h=this.B=null}var Hd=[];J.prototype.getParent=g("B");J.prototype.hb=function(){for(var a=this;!fa(a.getParent());)a=a.getParent();return a};function Id(a){for(var b=0;!fa(a.getParent());)b++,a=a.getParent();return b}function K(a){return a.h||Hd}function Jd(a,b){return K(a)[b]||null}function Kd(a,b,c){b.B=a;null===a.h?a.h=[b]:a.h.splice(c,0,b)}function L(a,b){b.B=a;null===a.h?a.h=[b]:a.h.push(b)}
function Ld(a,b){var c=a.h&&a.h[b];return c?(c.B=null,a.h.splice(b,1),0==a.h.length&&(a.h=null),c):null}J.prototype.removeChild=function(a){return Ld(this,K(this).indexOf(a))};function Md(a,b,c){Jd(a,c).B=null;b.B=a;a.h[c]=b}function Nd(a,b,c){!1!==b.call(c,a)&&K(a).forEach(function(a){Nd(a,b,c)})};function Od(){J.call(this);this.oa=Pd++}t(Od,J);var Pd=0;Od.prototype.Y=g("oa");function Qd(a,b,c){Od.call(this);this.M=a;this.value=b;this.F=c;this.tc=Gd(Ad.xc(),this.M.G(),this.F);this.Ya=!1;this.bc=b}t(Qd,Od);m=Qd.prototype;m.Kb=function(){var a=new Qd(this.M,this.value,this.F);a.bc=this.bc;a.qd(this.Ya);var b=this.Y();a.oa=b;return a};m.gb=function(a){return null!=a?(a.push(this.M),a):[this.M]};m.qd=ca("Ya");function Rd(a){var b=!1;a.value instanceof zd||(b="array"==ea(a.value)?!a.value.some(function(a){return a instanceof zd}):!0);if(!b)throw new D(501);}
m.eval=function(a){Rd(this);if("in"==this.F)return Sd(this,a);var b=a.entries.filter(function(a){return this.tc(H(a,this.M),this.value)!=this.Ya},this);return new F(b,G(a))};m.bind=function(a){if(this.bc instanceof zd){var b=this.bc.za();if(a.length<=b)throw new D(510);this.value=a[b]}else"array"==ea(this.bc)&&(this.value=this.bc.map(function(b){if(b instanceof zd){var d=b.za();if(a.length<=d)throw new D(510);return a[b.za()]}return b}))};
function Sd(a,b){var c=B(a.value),d=function(a){return null===a?!1:c.has(a)!=this.Ya}.bind(a),e=b.entries.filter(function(a){return d(H(a,this.M))},a);return new F(e,G(b))}m.toString=function(){return"value_pred("+this.M.m()+" "+this.F+(this.Ya?"(complement)":"")+" "+this.value+")"};function Td(a,b){return 2==a.M.G()?b.getTime():b};function Ud(a){this.ba=a;this.Uc=this.Ca=null}function Vd(a,b){null===a.Ca&&null!=a.s&&(a.Ca=Wd(a.s));return a.Ca.get(b)||null}function Wd(a){var b=y();Nd(a,function(a){b.set(a.Y(),a)});return b}function Xd(a,b){b.s&&(a.s=b.s.Kb());a.Uc=b}Ud.prototype.bind=function(){return this};function Yd(a,b){var c=a.s;null!=c&&Nd(c,function(a){a instanceof Qd&&a.bind(b)})};function Zd(a){Ud.call(this,a)}t(Zd,Ud);function $d(a){var b="";a.forEach(function(c,d){b+=c.M.m()+" ";b+=1==c.lb?"ASC":"DESC";d<a.length-1&&(b+=", ")});return b}Zd.prototype.ca=function(){return B(this.c)};Zd.prototype.clone=function(){var a=new Zd(this.ba);Xd(a,this);this.f&&(a.f=this.f.slice());this.c&&(a.c=this.c.slice());a.W=this.W;a.K=this.K;this.N&&(a.N=this.N.slice());this.ja&&(a.ja=this.ja.slice());this.Qb&&(a.Qb=this.Qb);this.Xb&&(a.Xb=this.Xb);a.Ab=this.Ab;return a};
Zd.prototype.bind=function(a){Zd.ab.bind.call(this,a);null!=this.Qb&&(this.W=a[this.Qb.za()]);null!=this.Xb&&(this.K=a[this.Xb.za()]);Yd(this,a);return this};function ae(a,b){this.Da=a;this.aa=b}ae.prototype.hb=g("Da");ae.prototype.ca=g("aa");function be(a){var b=B();a.forEach(function(a){a.ca().forEach(b.add.bind(b))});return b};function ee(a,b){this.global=a;this.Ka=a.l(fc);this.nd=b.map(function(a){return a.context});this.$e=b.map(function(a){return a.be});this.Ed=be(this.$e);this.oe=fe(this);this.$a=x()}function fe(a){return a.nd.some(function(a){return!(a instanceof Zd)})?1:0}m=ee.prototype;
m.exec=function(){function a(){var f=d.shift();if(f){var h=e[c.length];return f.hb().exec(b,h).then(function(b){c.push(b[0]);return a()})}return w()}var b=0==this.oe?void 0:new ad(this.global,this.Ed),c=[],d=this.$e.slice(),e=this.nd;return a().then(function(){return this.Ka.Cb(this.oe,C(this.Ed),b).ia()}.bind(this)).then(function(){this.Zd(c);return c}.bind(this),function(a){null!=b&&b.Ib();throw a;})};m.G=g("oe");m.ca=g("Ed");m.Lb=g("$a");m.Y=function(){return ka(this)};m.Zd=aa();function ge(a,b){ee.call(this,a,b);this.Hb=a.l(kc)}t(ge,ee);ge.prototype.getPriority=l(0);ge.prototype.Zd=function(a){this.nd.forEach(function(b,c){he(this.Hb,b,a[c])},this)};function ie(a,b){this.i=a;this.Hb=a.l(kc);this.Ea=a.l(jc);this.ed=new xc(a);this.sb=b;var c=a.l(lc),d=this.sb.map(function(a){return c.table(a.getName())});this.aa=B(d);this.$a=x()}m=ie.prototype;m.exec=function(){this.ed.update(this.sb);this.Jc();return w()};m.G=l(1);m.ca=g("aa");m.Lb=g("$a");m.Y=function(){return ka(this)};m.getPriority=l(1);m.Jc=function(){var a=je(this.Hb,this.aa);0!=a.length&&(a=new ge(this.i,a),ke(this.Ea,a))};function le(a){this.i=a;this.Ka=a.l(fc);this.Ea=a.l(jc)}le.prototype.Xd=function(a){a=new ie(this.i,a);ke(this.Ea,a)};function M(a,b){this.Zb=a;this.j=b;this.Sa=y()}r("lf.backstore.FirebaseRawBackStore",M);M.prototype.ad=g("j");M.prototype.bd=function(){throw new D(351);};function me(a,b){var c=x(),d=a;b.length&&(d=a.child(b));d.once("value",function(a){c.resolve(a.val())},function(a){c.reject(a)});return c.da}function ne(a,b,c){function d(a){a?e.reject(a):e.resolve()}c=c||!1;var e=x();c?a.set(b,d):a.update(b,d);return e.da}
M.prototype.Ga=function(a){return me(this.j,"@rev/R").then(function(a){this.La=a;return me(this.j,"@table")}.bind(this)).then(function(b){var c=0,d;for(d in b)this.Sa.set(d,b[d]),b[d]>c&&(c=b[d]);a.ra().forEach(function(a){this.Sa.has(a.getName())||(b[a.getName()]=++c)},this);d=this.j.child("@table");return ne(d,b)}.bind(this))};
function oe(a,b,c){var d=a.Sa.get(b);return null!=d?function(){var a={},b=x();this.j.orderByChild("T").equalTo(d).once("value",function(d){d.forEach(function(b){var d=c(b.val());a[parseInt(b.key(),10)]=d});b.resolve(a)});return b.da}.call(a).then(function(a){a["@rev"]={R:++this.La};return ne(this.j,a)}.bind(a)):w()}M.prototype.rc=function(a){return oe(this,a,l(null)).then(function(){this.Sa.delete(a);return ne(this.j.child("@table/"+a),null,!0)}.bind(this))};M.prototype.dropTable=M.prototype.rc;
M.prototype.oc=function(a,b,c){return oe(this,a,function(a){var e=a.P;e[b]=c;return{R:this.La+1,T:a.T,P:e}}.bind(this))};M.prototype.addTableColumn=M.prototype.oc;M.prototype.sc=function(a,b){return oe(this,a,function(a){var d=a.P;delete d[b];return{R:this.La+1,T:a.T,P:d}}.bind(this))};M.prototype.dropTableColumn=M.prototype.sc;M.prototype.Ic=function(a,b,c){return oe(this,a,function(a){var e=a.P;e[c]=e[b];delete e[b];return{R:this.La+1,T:a.T,P:e}}.bind(this))};M.prototype.renameTableColumn=M.prototype.Ic;
M.prototype.vb=function(){throw new D(351);};M.prototype.createRow=M.prototype.vb;M.prototype.Ac=g("Zb");M.prototype.getVersion=M.prototype.Ac;M.prototype.ec=function(a){var b=x();a=this.Sa.get(a);this.j.orderByChild("T").equalTo(a).once("value",function(a){var d=[];a.forEach(function(a){d.push(a.val().P)});b.resolve(d)});return b.da};M.prototype.dump=function(){var a={},b=Rb(this.Sa).map(function(b){return this.ec(b).then(function(d){a[b]=d})}.bind(this));return eb(b).then(function(){return a})};
M.prototype.dump=M.prototype.dump;function pe(a,b,c){Yb.call(this,b,c);this.j=a}t(pe,Yb);pe.prototype.H=function(a){return this.j.yc(a)};
pe.prototype.qc=function(){if(0==this.ne)return this.O.resolve(),this.O.da;var a=this.Oa.sb;if(0==a.size)this.O.resolve();else{var b=this.j.La+1;this.j.La=b;var c={"@rev":{R:b}};a.forEach(function(a,e){var f=this.j.Sa.get(e);a.ua.forEach(function(a,d){c[d]={R:b,T:f,P:a.o}});a.ma.forEach(function(a,d){c[d]={R:b,T:f,P:a[1].o}});a.ya.forEach(function(a,b){c[b]=null})},this);this.j.j.update(c,function(c){null===c?this.O.resolve():(this.j.La=b-1,c=z(a).map(function(a){return qe(this.j,a.getName())},this),
eb(c).then(this.O.reject.bind(this.O),this.O.reject.bind(this.O)))}.bind(this))}return this.O.da};function re(){this.xa=y()}function se(a,b){if(0==b.length)return z(a.xa);var c=[];b.forEach(function(a){a=this.xa.get(a)||null;null===a||c.push(a)},a);return c}re.prototype.getData=g("xa");re.prototype.get=function(a){return w(se(this,a))};function te(a,b){b.forEach(function(a){this.xa.set(a.id(),a)},a)}re.prototype.put=function(a){te(this,a);return w()};function ue(a,b){0==b.length||b.length==a.xa.size?a.xa.clear():b.forEach(function(a){this.xa.delete(a)},a)}
re.prototype.remove=function(a){ue(this,a);return w()};function ve(a){return 0==a.xa.size?0:Rb(a.xa).reduce(function(a,c){return a>c?a:c},0)};function we(a,b){this.g=a;this.wf=b;this.Hc=y();this.La=-1;this.L=y();this.Sa=y();this.Bd=null}m=we.prototype;
m.Ga=function(a){this.j=this.wf.child(this.g.name());var b=a||function(){return w()};return me(this.j,"@db/version").then(function(a){return null===a?ne(this.j,xe(this),!0).then(function(){var a=new M(0,this.j);return b(a)}.bind(this)):a==this.g.version()?me(this.j,"@rev/R").then(function(a){this.La=a;return me(this.j,"@table")}.bind(this)).then(function(a){for(var b in a)this.Sa.set(b,a[b]);a=this.g.ra().map(function(a){return qe(this,a.getName())},this);return eb(a)}.bind(this)).then(function(){ye(this);
ze(this);return w()}.bind(this)):this.$d(a,b).then(function(){return this.Ga()}.bind(this))}.bind(this))};m.$d=function(a,b){var c=new M(a,this.j);return c.Ga(this.g).then(function(){return w()}.bind(this)).then(function(){return b(c)}).then(function(){var a=this.j.child("@db");return ne(a,{version:this.g.version()},!0)}.bind(this))};
function ze(a){a.j.off();a.j.on("child_removed",a.kg.bind(a));a.Cd&&(a.Cd.off(),a.Hc.clear());a.Cd=a.j.orderByChild("R").startAt(a.La+1);a.Cd.on("value",a.Xd.bind(a))}function ye(a){Tb=z(a.L).map(function(a){return ve(a)}).reduce(function(a,c){return a>c?a:c},0)+1}m.kg=function(a){var b=a.val(),c=this.Hc.get(b.T)||null;null===c&&(c=B(),this.Hc.set(b.T,c));c.add(parseInt(a.key(),10))};
m.Xd=function(a){var b=a.child("@rev/R").val();null!=b&&b!=this.La&&(this.La=b,a=Ae(this,a),a.forEach(function(a){var b=this.L.get(a.getName()),e=Rb(a.ya);0<e.length&&ue(b,e);var f=z(a.ua);a.ma.forEach(function(a){f.push(a[1])});te(b,f)},this),0<a.length&&this.Dc(a),ze(this))};
function Ae(a,b){var c=B(),d=y();a.Sa.forEach(function(a,b){var h=this.L.get(b),k=new Zc(b);if(this.Hc.has(a)){var n=C(this.Hc.get(a));n.forEach(function(a){c.add(a)});se(h,n).forEach(function(a){k.delete(a)})}d.set(a,k)}.bind(a));b.forEach(function(a){if("@rev"!=a.key()){var b=parseInt(a.key(),10);if(!c.has(b)){var h=a.val();a=d.get(h.T);var k=this.L.get(a.getName()),h=this.g.table(a.getName()).fb({id:b,value:h.P});k.getData().has(b)?a.modify([se(k,[b])[0],h]):a.add(h)}}}.bind(a));return z(d).filter(function(a){return!a.Zf()})}
function qe(a,b){var c=x(),d=a.Sa.get(b),e=a.g.table(b);a.j.orderByChild("T").equalTo(d).once("value",function(a){var d=new re,k=[];a.forEach(function(a){k.push(e.fb({id:parseInt(a.key(),10),value:a.val().P}))});te(d,k);this.L.set(b,d);c.resolve()}.bind(a));return c.da}function xe(a){var b={};b["@db"]={version:a.g.version()};b["@rev"]={R:1};a.La=1;b["@table"]={};a.g.ra().forEach(function(a,d){var e=a.getName();b["@table"][e]=d;this.L.set(e,new re);this.Sa.set(e,d)},a);return b}
m.Cb=function(a,b,c){return new pe(this,a,c)};m.yc=function(a){var b=this.L.get(a)||null;if(null!==b)return b;throw new D(101,a);};m.close=aa();m.subscribe=ca("Bd");m.Dc=function(a){null!=this.Bd&&this.Bd(a)};function N(a,b,c,d){this.j=b;this.Ua=c;this.Zb=a;this.Sc=d}r("lf.backstore.IndexedDBRawBackStore",N);N.prototype.ad=g("j");N.prototype.getRawDBInstance=N.prototype.ad;N.prototype.bd=g("Ua");N.prototype.getRawTransaction=N.prototype.bd;N.prototype.rc=function(a){return new v(function(b,c){try{this.j.deleteObjectStore(a)}catch(d){c(d);return}b()},this)};N.prototype.dropTable=N.prototype.rc;
function Be(a,b,c,d){return new v(function(a,f){var h;try{var k=this.Ua.objectStore(b);h=k.openCursor()}catch(n){f(n);return}h.onsuccess=function(){var b=h.result;b?(c(b),b.continue()):(d(k),a())};h.onerror=f},a)}function Ce(a){var b=null;return b=a instanceof ArrayBuffer?Wb(a):a instanceof Date?a.getTime():a}
function De(a,b,c){function d(a){var b=rc(a.value),d=b.o,e;for(e in d){var A=Ub(d[e]);c(A);d[e]=A.Fa()}a.update(b.Fa())}function e(a){var b=Ub(a.value);c(b);a.update(b.Fa())}return Be(a,b,a.Sc?d:e,aa())}N.prototype.oc=function(a,b,c){var d=Ce(c);return De(this,a,function(a){a.o[b]=d})};N.prototype.addTableColumn=N.prototype.oc;N.prototype.sc=function(a,b){return De(this,a,function(a){delete a.o[b]})};N.prototype.dropTableColumn=N.prototype.sc;
N.prototype.Ic=function(a,b,c){return De(this,a,function(a){a.o[c]=a.o[b];delete a.o[b]})};N.prototype.renameTableColumn=N.prototype.Ic;function Ee(a,b){var c=[];return new v(function(a,e){var f;try{f=this.Ua.objectStore(b).openCursor()}catch(h){e(h);return}f.onsuccess=function(){var b=f.result;if(b){if(this.Sc){var e;e=rc(b.value).o;for(var n in e)c.push(e[n])}else c.push(b.value);b.continue()}else a(c)}.bind(this);f.onerror=e},a)}N.prototype.vb=function(a){var b={},c;for(c in a)b[c]=Ce(a[c]);return Vb(b)};
N.prototype.createRow=N.prototype.vb;N.prototype.Ac=g("Zb");N.prototype.getVersion=N.prototype.Ac;N.prototype.dump=function(){for(var a=this.j.objectStoreNames,b=[],c=0;c<a.length;++c){var d=a.item(c);b.push(this.ec(d))}return eb(b).then(function(b){var c={};b.forEach(function(b,d){c[a.item(d)]=b});return c})};N.prototype.dump=N.prototype.dump;N.prototype.ec=function(a){return Ee(this,a).then(function(a){return a.map(function(a){return a.value})})};function Fe(a,b){this.X=a;this.Db=b}Fe.prototype.get=function(a){if(0==a.length)return null!=this.X.getAll?Ge(this):He(this);a=a.map(function(a){return new v(function(c,d){var e;try{e=this.X.get(a)}catch(f){d(f);return}e.onerror=d;e.onsuccess=function(a){c(this.Db(a.target.result))}.bind(this)},this)},this);return eb(a)};
function He(a){return new v(function(a,c){var d=[],e;try{e=this.X.openCursor()}catch(f){c(f);return}e.onerror=c;e.onsuccess=function(){var c=e.result;c?(d.push(this.Db(c.value)),c.continue()):a(d)}.bind(this)},a)}function Ge(a){return new v(function(a,c){var d;try{d=this.X.getAll()}catch(e){c(e);return}d.onerror=c;d.onsuccess=function(){var c=d.result.map(function(a){return this.Db(a)},this);a(c)}.bind(this)},a)}
Fe.prototype.Sb=function(a){return new v(function(b,c){var d;try{d=a()}catch(e){c(e);return}d.onsuccess=b;d.onerror=c},this)};Fe.prototype.put=function(a){if(0==a.length)return w();a=a.map(function(a){return this.Sb(function(){return this.X.put(a.Fa())}.bind(this))},this);return eb(a)};
Fe.prototype.remove=function(a){return new v(function(b,c){var d=this.X.count();d.onsuccess=function(d){if(0==a.length||d.target.result==a.length)return this.Sb(function(){return this.X.clear()}.bind(this)).then(b,c);d=a.map(function(a){return this.Sb(function(){return this.X.delete(a)}.bind(this))},this);eb(d).then(b,c)}.bind(this);d.onerror=c},this)};function Ie(a,b,c,d,e){Yb.call(this,c,e);this.i=a;this.Ua=b;this.Sc=d;this.Ua.oncomplete=this.O.resolve.bind(this.O);this.Ua.onabort=this.O.reject.bind(this.O)}t(Ie,Yb);Ie.prototype.H=function(a,b,c){return this.Sc?(c=null!=c?c:0,a=this.Ua.objectStore(a),new sc(a,b,0==c?qa(uc,this.i):vc)):new Fe(this.Ua.objectStore(a),b)};Ie.prototype.qc=function(){return this.O.da};function Je(a,b){this.i=a;this.g=b;this.yd=b.af().Jf||!1}m=Je.prototype;
m.Ga=function(a){var b=window.indexedDB||window.mozIndexedDB||window.webkitIndexedDB||window.msIndexedDB;if(null==b)throw new D(352);var c=a||function(){return w()};return new v(function(a,e){var f;try{f=b.open(this.g.name(),this.g.version())}catch(h){e(h);return}f.onerror=e;f.onupgradeneeded=function(a){Ke(this,c,a).then(aa(),e)}.bind(this);f.onsuccess=function(b){this.j=b.target.result;this.he().then(function(b){Tb=b+1;a(this.j)}.bind(this))}.bind(this)},this)};
function Ke(a,b,c){var d=c.target.result;c=new N(c.oldVersion,d,c.target.transaction,a.yd);Le(d);a.g.ra().forEach(qa(a.Ef,d),a);return b(c)}function Le(a){for(var b=[],c=0;c<a.objectStoreNames.length;++c){var d=a.objectStoreNames.item(c);-1!=d.indexOf(".")&&b.push(d)}b.forEach(function(b){try{a.deleteObjectStore(b)}catch(c){}})}m.Ef=function(a,b){a.objectStoreNames.contains(b.getName())||a.createObjectStore(b.getName(),{keyPath:"id"});b.Bb()&&(b.Aa().forEach(function(b){Me(a,b.m())},this),Me(a,Ne(b)))};
function Me(a,b){a.objectStoreNames.contains(b)||a.createObjectStore(b,{keyPath:"id"})}m.Cb=function(a,b,c){b=this.j.transaction(Oe(b),0==a?"readonly":"readwrite");return new Ie(this.i,b,a,this.yd,c)};function Oe(a){var b=B();a.forEach(function(a){b.add(a.getName());a.Bb()&&(a.Aa().forEach(function(a){b.add(a.m())}),b.add(Ne(a)))});return C(b)}
m.he=function(a){function b(){if(0==d.length)return w();var a=d.shift();return c(a).then(b)}function c(b){return new v(function(c,d){var O;try{O=(a||e.transaction([b])).objectStore(b).openCursor(null,"prev")}catch(ba){d(ba);return}O.onsuccess=function(a){(a=a.target.result)&&(f=Math.max(f,h(a)));c(f)};O.onerror=function(){c(f)}})}var d=this.g.ra().map(function(a){return a.getName()}),e=this.j,f=0,h=function(a){return this.yd?(a=rc(a.value),Object.keys(a.o).reduce(function(a,b){return Math.max(a,b)},
0)):a.key}.bind(this);return new v(function(a){b().then(function(){a(f)})})};m.close=function(){this.j.close()};m.yc=function(){throw new D(511);};m.subscribe=aa();m.Dc=aa();function Pe(a,b,c){Yb.call(this,b,c);this.X=a;0==b&&this.O.resolve()}t(Pe,Yb);Pe.prototype.H=function(a){return this.X.yc(a)};Pe.prototype.qc=function(){this.O.resolve();return this.O.da};function Qe(a){this.g=a;this.L=y()}m=Qe.prototype;m.Ga=function(){this.g.ra().forEach(this.Wf,this);return w()};m.yc=function(a){var b=this.L.get(a)||null;if(null===b)throw new D(101,a);return b};m.Cb=function(a,b,c){return new Pe(this,a,c)};function Re(a,b){if(!a.L.has(b)){var c=new re;a.L.set(b,c)}}m.Wf=function(a){Re(this,a.getName());a.Bb()&&(a.Aa().forEach(function(a){Re(this,a.m())},this),Re(this,Ne(a)))};m.close=aa();m.subscribe=aa();m.Dc=aa();function Se(a){Qe.call(this,a);this.jd=null}t(Se,Qe);Se.prototype.subscribe=function(a){null===this.jd&&(this.jd=a)};Se.prototype.Dc=function(a){null===this.jd||this.jd(a)};function Te(a,b,c){this.Ua=a;this.u=b;this.Db=c}Te.prototype.get=function(a){var b=this.Db;return Ue(this.Ua,"SELECT id, value FROM "+this.u+" "+(0==a.length?"":"WHERE id IN ("+a.join(",")+")"),[],function(a){for(var d=a.rows.length,e=Array(d),f=0;f<d;++f)e[f]=b({id:a.rows.item(f).id,value:JSON.parse(a.rows.item(f).value)});return e})};
Te.prototype.put=function(a){if(0==a.length)return w();var b="INSERT OR REPLACE INTO "+this.u+"(id, value) VALUES (?, ?)";a.forEach(function(a){Ue(this.Ua,b,[a.id(),JSON.stringify(a.o)])},this);return w()};Te.prototype.remove=function(a){Ue(this.Ua,"DELETE FROM "+this.u+" "+(0==a.length?"":"WHERE id IN ("+a.join(",")+")"),[]);return w()};function Ve(a,b,c){Yb.call(this,b,c);this.j=a;this.L=y();this.Fd=[]}t(Ve,Yb);function We(a){return a.replace(".","__d__").replace("#","__s__")}Ve.prototype.H=function(a,b){var c=this.L.get(a)||null;null===c&&(c=new Te(this,We(a),b),this.L.set(a,c));return c};function Ue(a,b,c,d){var e=x();a.Fd.push({zg:b,og:c,transform:d,O:e});return e.da}
Ve.prototype.qc=function(){var a=null,b=this.O.reject.bind(this.O),c=function(a,b){this.O.reject(b)}.bind(this),d=[],e=function(b,h){if(null!==a){var k=h;null!=a.transform&&null!=h&&(k=a.transform(h));d.push(k);a.O.resolve(k)}0<this.Fd.length?(a=k=this.Fd.shift(),b.executeSql(k.zg,k.og,e,c)):this.O.resolve(d)}.bind(this);0==this.ne?this.j.readTransaction(e,b):this.j.transaction(e,b);return this.O.da};function P(a,b,c){this.j=c;this.i=a;this.Zb=b}r("lf.backstore.WebSqlRawBackStore",P);P.prototype.ad=g("j");P.prototype.getRawDBInstance=P.prototype.ad;P.prototype.bd=function(){throw new D(356);};P.prototype.getRawTransaction=P.prototype.bd;function Xe(a){return new Ve(a.j,1,new ad(a.i,B()))}P.prototype.rc=function(a){var b=Xe(this);Ue(b,"DROP TABLE "+a,[]);return b.ia()};P.prototype.dropTable=P.prototype.rc;
P.prototype.ec=function(a){var b=Xe(this);Ue(b,"SELECT id, value FROM "+a,[]);return b.ia().then(function(a){for(var b=a[0].rows.length,e=Array(b),f=0;f<b;++f)e[f]={id:a[0].rows.item(f).id,value:JSON.parse(a[0].rows.item(f).value)};return w(e)})};function Ye(a,b,c){var d=Xe(a),e="UPDATE "+b+" SET value=? WHERE id=?";return a.ec(b).then(function(a){a.forEach(function(a){a=c(a);Ue(d,e,[JSON.stringify(a.value),a.id])});return d.ia()})}
P.prototype.oc=function(a,b,c){var d=Ce(c);return Ye(this,a,function(a){a.value[b]=d;return a})};P.prototype.addTableColumn=P.prototype.oc;P.prototype.sc=function(a,b){return Ye(this,a,function(a){delete a.value[b];return a})};P.prototype.dropTableColumn=P.prototype.sc;P.prototype.Ic=function(a,b,c){return Ye(this,a,function(a){a.value[c]=a.value[b];delete a.value[b];return a})};P.prototype.renameTableColumn=P.prototype.Ic;P.prototype.vb=function(a){var b={},c;for(c in a)b[c]=Ce(a[c]);return Vb(b)};
P.prototype.createRow=P.prototype.vb;P.prototype.Ac=g("Zb");P.prototype.getVersion=P.prototype.Ac;function Ze(a){Ue(a,'SELECT tbl_name FROM sqlite_master WHERE type="table"',[],function(a){for(var c=Array(a.rows.length),d=0;d<c.length;++d)c[d]=a.rows.item(d).tbl_name;return c})}
P.prototype.dump=function(){var a=x(),b=Xe(this);Ze(b);var c={};b.ia().then(function(b){b=b[0].filter(function(a){return"__lf_ver"!=a&&"__WebKitDatabaseInfoTable__"!=a}).map(function(a){return this.ec(a).then(function(b){c[a]=b})},this);eb(b).then(function(){a.resolve(c)})}.bind(this));return a.da};P.prototype.dump=P.prototype.dump;function $e(a,b,c){this.i=a;this.g=b;this.yg=c||4194304}m=$e.prototype;m.Ga=function(a){if(null==window.openDatabase)throw new D(353);var b=a||function(){return w()};return new v(function(a,d){try{var e=window.openDatabase(this.g.name(),"",this.g.name(),this.yg);if(null!=e)this.j=e,af(this,b).then(a,d);else throw new D(354);}catch(f){d(f)}},this)};
function af(a,b){var c=x(),d=new Ve(a.j,1,new ad(a.i,B()));Ue(d,"CREATE TABLE IF NOT EXISTS __lf_ver(id INTEGER PRIMARY KEY, v INTEGER)",[]);Ue(d,"SELECT v FROM __lf_ver WHERE id = 0",[]);d.ia().then(function(a){var d=0;a[1].rows.length&&(d=a[1].rows.item(0).v);d<this.g.version()?this.$d(b,d).then(c.resolve.bind(c)):d>this.g.version()?c.reject(new D(108)):c.resolve()}.bind(a));return c.da}m.Cb=function(a,b,c){if(null!=this.j)return new Ve(this.j,a,c);throw new D(2);};m.close=aa();
m.yc=function(){throw new D(512);};m.subscribe=function(){throw new D(355);};m.Dc=function(){throw new D(355);};m.$d=function(a,b){var c=x();bf(this).then(function(){a(new P(this.i,b,this.j)).then(function(){return this.he()}.bind(this)).then(c.resolve.bind(c))}.bind(this),c.reject.bind(c));return c.da};
function bf(a){var b=a.g.ra(),c=new Ve(a.j,1,new ad(a.i,B())),d=new Ve(a.j,1,new ad(a.i,B()));Ue(c,"INSERT OR REPLACE INTO __lf_ver VALUES (0, ?)",[a.g.version()]);Ze(c);return c.ia().then(function(a){var c=a[1];c.filter(function(a){return-1!=a.indexOf("__d__")}).forEach(function(a){Ue(d,"DROP TABLE "+a,[])});var h=[],k=[],n=[];b.map(function(a){-1==c.indexOf(a.getName())&&h.push(a.getName());a.Bb&&(a.Aa().forEach(function(a){a=We(a.m());h.push(a);k.push(a)}),a=We(Ne(a)),h.push(a),n.push(a))});h.forEach(function(a){Ue(d,
"CREATE TABLE "+a+"(id INTEGER PRIMARY KEY, value TEXT)",[])});return d.ia()})}m.he=function(){var a=0,b=x(),c=function(b){var c=new Ve(this.j,0);Ue(c,"SELECT MAX(id) FROM "+b,[]);return c.ia().then(function(b){b=b[0].rows.item(0)[0];a=Math.max(b,a)})}.bind(this),d=this.g.ra().map(function(a){return c(a.getName())});eb(d).then(function(){b.resolve(a)},function(a){b.reject(a)});return b.da};function cf(a){this.Z=y();this.Yb=y();a.ra().forEach(function(a){this.Yb.set(a.getName(),B())},this)}m=cf.prototype;m.set=function(a,b){this.Z.set(b.id(),b);this.Yb.get(a).add(b.id())};m.Vb=function(a,b){var c=this.Yb.get(a);b.forEach(function(a){this.Z.set(a.id(),a);c.add(a.id())},this)};m.get=function(a){return this.Z.get(a)||null};function df(a,b){return b.map(function(a){return this.get(a)},a)}
m.Xa=function(a,b,c){var d=[],e=Math.min(b,c),f=Math.max(b,c);a=this.Yb.get(a);if(a.size<f-e)a.forEach(function(a){a>=e&&a<=f&&(a=this.Z.get(a),d.push(a))},this);else for(b=e;b<=f;++b)a.has(b)&&(c=this.Z.get(b),d.push(c));return d};m.remove=function(a,b){this.Z.delete(b);this.Yb.get(a).delete(b)};m.Hg=function(a){return null!=a?this.Yb.get(a).size:this.Z.size};m.clear=function(){this.Z.clear();this.Yb.clear()};function ef(a,b,c){var d=0,e=a.length;for(c=c||ff;d<e;){var f=d+e>>1;0>c(a[f],b)?d=f+1:e=f}return d==e&&a[d]==b?d:~d}function ff(a,b){return a-b}function gf(a,b,c){c=ef(a,b,c);return 0>c?(a.splice(-(c+1),0,b),!0):!1};function hf(a,b,c,d){a=b?a.reverse():a;if(null==c&&null==d)return a;c=Math.min(q(c)?c:a.length,a.length);if(0==c)return[];d=Math.min(d||0,a.length);return a.slice(d,d+c)};function jf(){this.na=0}jf.prototype.add=function(a,b){this.na+=b};jf.prototype.remove=function(a,b){this.na-=b};jf.prototype.clear=function(){this.na=0};function kf(a,b){a.clear();b.forEach(function(a){this.na+=a.na},a)};function mf(a,b,c,d){this.u=a;this.V=b;this.rf=c;this.qb=new jf;if(d){a=511;a*=a*a;if(d.length>=a)throw new D(6,a);d=nf(this,d);this.qa=d=of(d)}else this.clear()}var pf=[];m=mf.prototype;m.getName=g("u");m.toString=function(){return this.qa.toString()};m.add=function(a,b){this.qa=this.qa.zb(a,b)};m.set=function(a,b){this.qa=this.qa.zb(a,b,!0)};m.remove=function(a,b){this.qa=this.qa.remove(a,b)};m.get=function(a){return this.qa.get(a)};
m.Wc=function(a){if(null==a)return this.Ma().na;if(a instanceof fd){if(hd(a))return this.Ma().na;if(ld(a))return this.get(a.c).length}return this.Xa([a]).length};m.Ma=g("qb");m.Md=function(a,b,c,d){c=Array(a);this.qa.fill({offset:b?this.qb.na-a-d:d,count:a,ke:0},c);return b?c.reverse():c};
m.Xa=function(a,b,c,d){var e=qf(this.qa).b[0];if(!q(e)||0==c)return pf;b=b||!1;c=null!=c?Math.min(c,this.qb.na):this.qb.na;d=d||0;var f=Math.min(Math.max(this.qb.na-d,0),c);if(0==f)return pf;if(!q(a)||1==a.length&&a[0]instanceof fd&&hd(a[0]))return this.Md(f,b,c,d);a=this.V.mf(a);var h=Array(b?this.qb.na:f),k={count:0,W:h.length,reverse:b,K:d},n=1<e.length;a.forEach(function(a){for(var b=this.V.od(a),b=this.V.Pd(a)?e:b[0],b=rf(this.qa,b),c=k.count,d=0;null!=b&&k.count<k.W;){if(n){for(var f=b,Pc=a,
Ya=k,ce=h,Of=f.C.dc(),de=-1,Ia=0;Ia<f.b.length;++Ia)if(Of.Ob(f.b[Ia],Pc)){de=Ia;break}if(-1!=de)for(Ia=de;Ia<f.b.length&&Ya.count<Ya.W;++Ia)Of.Ob(f.b[Ia],Pc)&&sf(f,Ya,ce,Ia)}else b.Xa(a,k,h),k.count!=c||0<k.K?(d=0,c=k.count):d++;b=2==d?null:b.next()}},this);h.length>k.count&&h.splice(k.count,h.length-k.count);return b?hf(h,b,c,d):h};m.clear=function(){this.qa=tf(this);this.qb.clear()};m.eb=function(a){return this.qa.eb(a)};m.min=function(){return this.Gb(this.V.min.bind(this.V))};m.max=function(){return this.Gb(this.V.max.bind(this.V))};
function uf(a,b,c){if(!a.V.Gd(b.b[c]))if(1<b.b[c].length){if(null===b.b[c][0])return null}else return null;return[b.b[c],a.rf?[b.A[c]]:b.A[c]]}m.Gb=function(a){var b;a:{b=qf(this.qa);var c=0;do if(c>=b.b.length)b=b.sa,c=0;else{var d=uf(this,b,c);if(null!==d){b=d;break a}c++}while(null!==b);b=null}a:{c=vf(this.qa);d=c.b.length-1;do if(0>d)c=c.mb,d=0;else{var e=uf(this,c,d);if(null!==e){c=e;break a}d--}while(null!==c);c=null}return null===b||null===c?null:1==a(b[0],c[0])?b:c};m.Ia=g("rf");m.dc=g("V");
m.Td=function(a,b){return null!=a?-1==this.V.compare(a,b):!1};m.Na=function(a,b){return null!=a?0==this.V.compare(a,b):!1};m.Fa=function(){for(var a=[],b=qf(this.qa);b;)a.push(new Sb(b.oa,[b.b,b.A])),b=b.sa;return a};function wf(a,b,c,d){a=new mf(b,a,c);d=xf(d,a);a.qa=d;return a}function yf(a,b){this.oa=a;this.C=b;this.ib=0;this.sa=this.mb=this.B=null;this.b=[];this.A=[];this.h=[]}function tf(a){return new yf(Tb++,a)}function Q(a){return 0==a.ib}m=yf.prototype;m.next=g("sa");
function zf(a){function b(a){return null!=a?a.oa.toString():"_"}var c=a.oa+"["+a.b.join("|")+"]",d=a.h.map(function(a){return a.oa}).join("|"),e=a.A.join("/"),f=b(a.mb)+"{",f=Q(a)?f+e:f+d,f=f+"}"+b(a.B);a.sa&&(a=zf(a.sa),c=c+"  "+a[0],f=f+"  "+a[1]);return[c,f]}m.toString=function(){var a="",b=zf(this),a=a+(b[0]+"\n"+b[1]+"\n");this.h.length&&(a+=this.h[0].toString());return a};function qf(a){return Q(a)?a:qf(a.h[0])}function vf(a){return Q(a)?a:vf(a.h[a.h.length-1])}
function Af(a,b){b&&(b.mb=a);a&&(a.sa=b)}function nf(a,b){for(var c=b.length,d=0,e=tf(a),f=e;0<c;){var h=768<=c?511:257<=c&&511>=c?c:257,k=b.slice(d,d+h);e.b=k.map(function(a){return a.key});e.A=k.map(function(a){return a.value});d+=h;c-=h;0<c&&(h=tf(e.C),Af(e,h),e=h)}return f}function Bf(a){var b=a[0],c=tf(b.C);c.ib=b.ib+1;c.h=a;for(b=0;b<a.length;++b)a[b].B=c,0<b&&c.b.push(a[b].b[0]);return c}
function of(a){var b=a,c=[];do c.push(b),b=b.sa;while(b);if(512>=c.length)b=Bf(c);else{var d=c.length,e=0,b=tf(a.C);for(b.ib=a.ib+2;0<d;){a=768<=d?511:257<=d&&511>=d?d:257;var f=c.slice(e,e+a),h=Bf(f);h.B=b;b.h.length&&(b.b.push(f[0].b[0]),Af(b.h[b.h.length-1],h));b.h.push(h);e+=a;d-=a}}return b}m.get=function(a){var b=Cf(this,a);if(Q(this)){var c=pf;this.C.Na(this.b[b],a)&&(c=c.concat(this.A[b]));return c}b=this.C.Na(this.b[b],a)?b+1:b;return this.h[b].get(a)};
m.eb=function(a){var b=Cf(this,a);return this.C.Na(this.b[b],a)?!0:Q(this)?!1:this.h[b].eb(a)};m.remove=function(a,b){Df(this,a,-1,b);if(null===this.B){var c=this;1==this.h.length&&(c=this.h[0],c.B=null);return c}return this};function Ef(a){return Q(a)?a.b[0]:Ef(a.h[0])}function Ff(a){a.b=[];for(var b=1;b<a.h.length;++b)a.b.push(Ef(a.h[b]))}
function Df(a,b,c,d){var e=Cf(a,b),f=Q(a);if(!f){var h=a.C.Na(a.b[e],b)?e+1:e;if(Df(a.h[h],b,h,d))Ff(a);else return!1}else if(!a.C.Na(a.b[e],b))return!1;if(a.b.length>e&&a.C.Na(a.b[e],b)){if(q(d)&&!a.C.Ia()&&f&&(h=a.A[e],d=ef(h,d,void 0),0>d?d=!1:(h.splice(d,1),d=!0),d&&a.C.Ma().remove(b,1),a.A[e].length))return!1;a.b.splice(e,1);f&&(f=a.C.Ia()?1:a.A[e].length,a.A.splice(e,1),a.C.Ma().remove(b,f))}if(256>a.b.length&&null!==a.B){a:{b=null;if(a.sa&&256<a.sa.b.length)b=a.sa,e=d=0,f=a.b.length+1;else if(a.mb&&
256<a.mb.b.length)b=a.mb,d=a.mb.b.length-1,e=Q(a)?d:d+1,f=0;else{b=!1;break a}a.b.splice(f,0,b.b[d]);b.b.splice(d,1);d=Q(a)?a.A:a.h;h=null;Q(a)?h=b.A:(h=b.h,h[e].B=a);d.splice(f,0,h[e]);h.splice(e,1);Q(b)||(Ff(b),Ff(a));b=!0}b||Gf(a,c)}return!0}
function Gf(a,b){var c,d,e;a.sa&&511>a.sa.b.length?(c=a.sa,e=d=0):a.mb&&(c=a.mb,d=c.b.length,e=Q(c)?c.A.length:c.h.length);d=[d,0].concat(a.b);Array.prototype.splice.apply(c.b,d);d=null;Q(a)?d=a.A:(d=a.h,d.forEach(function(a){a.B=c}));d=[e,0].concat(d);Array.prototype.splice.apply(Q(c)?c.A:c.h,d);Af(a.mb,a.sa);Q(c)||Ff(c);-1!=b&&(a.B.b.splice(b,1),a.B.h.splice(b,1))}
m.zb=function(a,b,c){var d=Cf(this,a);if(Q(this)){if(this.C.Na(this.b[d],a)){if(c)this.C.Ma().remove(a,this.C.Ia()?1:this.A[d].length),this.A[d]=this.C.Ia()?b:[b];else{if(this.C.Ia())throw new D(201);if(!gf(this.A[d],b))throw new D(109);}this.C.Ma().add(a,1);return this}this.b.splice(d,0,a);this.A.splice(d,0,this.C.Ia()?b:[b]);this.C.Ma().add(a,1);512==this.b.length?(d=tf(this.C),a=tf(this.C),a.ib=1,a.b=[this.b[256]],a.h=[this,d],a.B=this.B,this.B=a,d.b=this.b.splice(256),d.A=this.A.splice(256),d.B=
a,Af(d,this.sa),Af(this,d),d=a):d=this;return d}d=this.C.Na(this.b[d],a)?d+1:d;a=this.h[d].zb(a,b,c);Q(a)||1!=a.b.length||(this.b.splice(d,0,a.b[0]),a.h[1].B=this,a.h[0].B=this,this.h.splice(d,1,a.h[1]),this.h.splice(d,0,a.h[0]));return 512==this.b.length?Hf(this):this};function Hf(a){var b=tf(a.C),c=tf(a.C);b.B=a.B;b.ib=a.ib+1;b.b=[a.b[256]];b.h=[a,c];a.b.splice(256,1);c.B=b;c.ib=a.ib;c.b=a.b.splice(256);c.h=a.h.splice(257);c.h.forEach(function(a){a.B=c});a.B=b;Af(c,a.sa);Af(a,c);return b}
function Cf(a,b){for(var c=0,d=a.b.length;c<d;){var e=c+d>>1;a.C.Td(a.b[e],b)?c=e+1:d=e}return c}function rf(a,b){if(!Q(a)){var c=Cf(a,b);a.C.Na(a.b[c],b)&&c++;return rf(a.h[c],b)}return a}
m.Xa=function(a,b,c){function d(a){return a[0]?a[1]?0:1:-1}var e=this.C.dc(),f=0,h=this.b.length-1,k=this.b,n=d(e.ub(k[f],a)),A=d(e.ub(k[h],a));if(1!=n&&(-1!=n||-1!=A)){var O=function(a,b){var c=a+b>>1;return c==a?c+1:c},ba=function(b,c,f){if(b>=c)return 0==f?c:-1;var h=d(e.ub(k[b],a));if(0==h)return b;if(1==h)return-1;h=O(b,c);if(h==c)return 0==f?c:-1;var n=d(e.ub(k[h],a));return 0==n?ba(b,h,n):-1==n?ba(h+1,c,f):ba(b+1,h,n)},xb=function(b,c){if(b>=c)return b;var f=d(e.ub(k[c],a));if(0==f)return c;
if(-1==f)return b;f=O(b,c);if(f==c)return b;var h=d(e.ub(k[f],a));return 0==h?xb(f,c):1==h?xb(b,f-1):-1};0!=n&&(f=ba(f+1,h,A));-1!=f&&(h=xb(f,h),-1!=h&&h>=f&&If(this,b,c,f,h+1))}};function sf(a,b,c,d){if(a.C.Ia())!b.reverse&&b.K?b.K--:c[b.count++]=a.A[d];else for(var e=0;e<a.A[d].length&&b.count<c.length;++e)!b.reverse&&b.K?b.K--:c[b.count++]=a.A[d][e]}function If(a,b,c,d,e){for(;d<e&&(b.reverse||!(b.count>=b.W));++d)sf(a,b,c,d)}
m.fill=function(a,b){if(Q(this))for(var c=0;c<this.A.length&&0<a.count;++c)if(0<a.offset){if(a.offset-=this.C.Ia()?1:this.A[c].length,0>a.offset)for(var d=this.A[c].length+a.offset;d<this.A[c].length&&0<a.count;++d)b[a.ke++]=this.A[c][d],a.count--}else if(this.C.Ia())b[a.ke++]=this.A[c],a.count--;else for(d=0;d<this.A[c].length&&0<a.count;++d)b[a.ke++]=this.A[c][d],a.count--;else for(c=0;c<this.h.length&&0<a.count;++c)this.h[c].fill(a,b)};
function xf(a,b){for(var c=b.Ma(),d=a.map(function(a){var d=new yf(a.id(),b);d.b=a.o[0];d.A=a.o[1];d.b.forEach(function(a,e){c.add(a,b.Ia()?1:d.A[e].length)});return d}),e=0;e<d.length-1;++e)Af(d[e],d[e+1]);return 1<d.length?of(d[0]):d[0]};function Jf(a){this.Vc=0==a?Kf:Lf;this.Vd=0==a?function(a){return null!=a?a.reverse():null}:function(a){return a||null};this.ae=0==a?Mf:Pf}t(Jf,wc);function Lf(a,b){return a>b?1:a<b?-1:0}function Kf(a,b){return Lf(b,a)}function Pf(a,b){return md(a,b)}function Mf(a,b){return md(b,a)}m=Jf.prototype;m.ub=function(a,b){var c=this.Vd(b),d=[c.c==E,c.w==E];if(!d[0]){var e=this.Vc(a,c.c);d[0]=c.ea?1==e:-1!=e}d[1]||(e=this.Vc(a,c.w),d[1]=c.la?-1==e:1!=e);return d};
m.compare=function(a,b){return this.Vc(a,b)};m.min=function(a,b){return a<b?1:a==b?0:-1};m.max=function(a,b){return a>b?1:a==b?0:-1};m.Ob=function(a,b){var c=this.ub(a,b);return c[0]&&c[1]};m.mf=function(a){return a.filter(function(a){return null!==a}).sort(function(a,c){return this.ae(a,c)}.bind(this))};m.Pd=function(a){return this.Vd(a).c==E};m.od=function(a){a=this.Vd(a);return[a.c,a.w]};m.Gd=function(a){return null!==a};m.toString=function(){return this.compare==Kf?"SimpleComparator_DESC":"SimpleComparator_ASC"};
function Qf(a){Jf.call(this,a);this.Vc=0==a?Rf:Sf}t(Qf,Jf);function Sf(a,b){return null===a?null===b?0:-1:null===b?1:Lf(a,b)}function Rf(a,b){return Sf(b,a)}Qf.prototype.Ob=function(a,b){return null===a?hd(b):Qf.ab.Ob.call(this,a,b)};Qf.prototype.Gb=function(a,b){return null===a?null===b?0:-1:null===b?1:null};Qf.prototype.min=function(a,b){var c=this.Gb(a,b);null===c&&(c=Qf.ab.min.call(this,a,b));return c};Qf.prototype.max=function(a,b){var c=this.Gb(a,b);null===c&&(c=Qf.ab.max.call(this,a,b));return c};function Tf(a){this.va=a.map(function(a){return new Jf(a)})}t(Tf,wc);function Uf(a,b,c,d){for(var e=0,f=0;f<a.va.length&&0==e;++f)e=d(a.va[f],b[f],c[f]);return e}m=Tf.prototype;m.compare=function(a,b){return Uf(this,a,b,function(a,b,e){return b==E||e==E?0:a.compare(b,e)})};m.min=function(a,b){return Uf(this,a,b,function(a,b,e){return a.min(b,e)})};m.max=function(a,b){return Uf(this,a,b,function(a,b,e){return a.max(b,e)})};
m.ub=function(a,b){for(var c=[!0,!0],d=0;d<this.va.length&&(c[0]||c[1]);++d){var e=this.va[d].ub(a[d],b[d]);c[0]=c[0]&&e[0];c[1]=c[1]&&e[1]}return c};m.Ob=function(a,b){for(var c=!0,d=0;d<this.va.length&&c;++d)c=this.va[d].Ob(a[d],b[d]);return c};
m.mf=function(a){var b=a.filter(function(a){return a.every(ga)});a=Array(this.va.length);for(var c=0;c<a.length;c++)a[c]=b.map(function(a){return a[c]});a.forEach(function(a,b){a.sort(function(a,c){return this.va[b].ae(a,c)}.bind(this))},this);b=Array(b.length);for(c=0;c<b.length;c++)b[c]=a.map(function(a){return a[c]});return b.sort(function(a,b){for(var c=0,h=0;h<this.va.length&&0==c;++h)c=this.va[h].ae(a[h],b[h]);return c}.bind(this))};m.Pd=function(a){return this.va[0].Pd(a[0])};
m.od=function(a){var b=a.map(function(a,b){return this.va[b].od(a)[0]},this);a=a.map(function(a,b){return this.va[b].od(a)[1]},this);return[b,a]};m.Gd=function(a){return a.every(function(a,c){return this.va[c].Gd(a)},this)};function Vf(a){Tf.call(this,a);this.va=a.map(function(a){return new Qf(a)})}t(Vf,Tf);function Wf(a){if(1==a.f.length)return new Jf(a.f[0].lb);var b=a.f.map(function(a){return a.lb});return a.f.some(function(a){return a.ba.ic()})?new Vf(b):new Tf(b)};function Xf(a){this.ga=a;this.kb=B();this.Kc=new jf;this.qb=new jf}m=Xf.prototype;m.getName=function(){return this.ga.getName()};m.add=function(a,b){null===a?(this.kb.add(b),this.Kc.add(a,1)):this.ga.add(a,b)};m.set=function(a,b){null===a?(this.kb.clear(),this.Kc.clear(),this.add(a,b)):this.ga.set(a,b)};m.remove=function(a,b){null===a?b?(this.kb.delete(b),this.Kc.remove(a,1)):(this.kb.clear(),this.Kc.clear()):this.ga.remove(a,b)};m.get=function(a){return null===a?C(this.kb):this.ga.get(a)};m.Wc=function(a){return this.ga.Wc(a)};
m.Ma=function(){kf(this.qb,[this.ga.Ma(),this.Kc]);return this.qb};m.Xa=function(a,b,c,d){b=this.ga.Xa(a,b,c,d);return null!=a?b:b.concat(C(this.kb))};m.clear=function(){this.kb.clear();this.ga.clear()};m.eb=function(a){return null===a?0!=this.kb.size:this.ga.eb(a)};m.min=function(){return this.ga.min()};m.max=function(){return this.ga.max()};m.Fa=function(){return[new Sb(-2,C(this.kb))].concat(this.ga.Fa())};m.dc=function(){return this.ga.dc()};
function Yf(a,b){for(var c=-1,d=0;d<b.length;++d)if(-2==b[d].id()){c=d;break}if(-1==c)throw new D(102);var d=b[c].o,e=b.slice(0);e.splice(c,1);var c=a(e),f=new Xf(c);d.forEach(function(a){f.kb.add(a)});return f}m.Ia=function(){return this.ga.Ia()};function Zf(a){this.u=a;this.pb=B();this.V=new Jf(1)}m=Zf.prototype;m.getName=g("u");m.add=function(a){if("number"!=typeof a)throw new D(103);this.pb.add(a)};m.set=function(a,b){this.add(a,b)};m.remove=function(a){this.pb.delete(a)};m.get=function(a){return this.eb(a)?[a]:[]};m.min=function(){return this.Gb(this.V.min.bind(this.V))};m.max=function(){return this.Gb(this.V.max.bind(this.V))};
m.Gb=function(a){if(0==this.pb.size)return null;var b=C(this.pb).reduce(function(b,d){return null===b||1==a(d,b)?d:b},null);return[b,[b]]};m.Wc=function(){return this.pb.size};m.Xa=function(a,b,c,d){var e=a||[kd()];a=C(this.pb).filter(function(a){return e.some(function(b){return this.V.Ob(a,b)},this)},this);return hf(a,b,c,d)};m.clear=function(){this.pb.clear()};m.eb=function(a){return this.pb.has(a)};m.Fa=function(){return[new Sb(0,C(this.pb))]};m.dc=g("V");
function $f(a,b){var c=new Zf(a);b[0].o.forEach(function(a){c.add(a,a)});return c}m.Ia=l(!0);m.Ma=function(){var a=new jf;a.na=this.pb.size;return a};function ag(a){this.Ka=a.l(fc);this.D=a.l(hc);this.U=a.l(gc)}ag.prototype.Ga=function(a){var b=a.ra(),c=function(){if(0==b.length)return w();var a=b.shift();return(a.Bb()?bg(this,a):cg(this,a)).then(c)}.bind(this);return c()};function cg(a,b){var c=a.Ka.Cb(0,[b]),d=c.H(b.getName(),b.fb.bind(b),0).get([]).then(function(a){this.U.Vb(b.getName(),a);dg(this,b,a)}.bind(a));c.ia();return d}
function dg(a,b,c){var d=a.D.lc.get(b.getName())||[];c.forEach(function(a){d.forEach(function(b){var c=a.jb(b.getName());b.add(c,a.id())})})}function bg(a,b){var c=a.Ka.Cb(0,[b]),d=c.H(b.getName(),b.fb,0).get([]).then(function(a){this.U.Vb(b.getName(),a)}.bind(a)),e=b.Aa().map(function(a){return eg(this,a,c)},a).concat(fg(a,b,c));c.ia();return eb(e.concat(d))}
function eg(a,b,c){c=c.H(b.m(),Ub,1);var d=Wf(b);return c.get([]).then(function(a){if(0<a.length){if(gg(b)){var c=wf.bind(void 0,d,b.m(),b.Bc);a=Yf(c,a)}else a=wf(d,b.m(),b.Bc,a);this.D.set(b.Lc,a)}}.bind(a))}function fg(a,b,c){return c.H(Ne(b),Ub,1).get([]).then(function(a){0<a.length&&(a=$f(Ne(b),a),this.D.set(b.getName(),a))}.bind(a))};function hg(){this.X=y();this.lc=y()}hg.prototype.Ga=function(a){a.ra().forEach(function(a){var c=[];this.lc.set(a.getName(),c);var d=Ne(a);if(null===this.get(d)){var e=new Zf(d);c.push(e);this.X.set(d,e)}a.Aa().forEach(function(a){var b;b=Wf(a);b=new mf(a.m(),b,a.Bc);b=gg(a)&&1==a.f.length?new Xf(b):b;c.push(b);this.X.set(a.m(),b)},this)},this);return w()};hg.prototype.get=function(a){return this.X.get(a)||null};
hg.prototype.set=function(a,b){var c=this.lc.get(a)||null;null===c&&(c=[],this.lc.set(a,c));for(var d=null,e=0;e<c.length;e++)if(c[e].getName()==b.getName()){d=e;break}null!==d&&0<c.length?c.splice(d,1,b):c.push(b);this.X.set(b.getName(),b)};function ig(a){this.kc=[];q(a)&&this.add(a)}ig.prototype.toString=function(){return this.kc.map(function(a){return a.toString()}).join(",")};ig.prototype.eb=function(a){return this.kc.some(function(b){return b.contains(a)})};ig.prototype.Fb=g("kc");
ig.prototype.add=function(a){if(0!=a.length)if(a=this.kc.concat(a),1==a.length)this.kc=a;else{a.sort(md);for(var b=[],c=a[0],d=1;d<a.length;++d)if(id(c,a[d])){var e=a[d],f=kd();if(c.c!=E&&e.c!=E){var h=jd(c.c,e.c,!0);1!=h?(f.c=c.c,f.ea=0!=h?c.ea:c.ea&&e.ea):(f.c=e.c,f.ea=e.ea)}c.w!=E&&e.w!=E&&(h=jd(c.w,e.w,!1),-1!=h?(f.w=c.w,f.la=0!=h?c.la:c.la&&e.la):(f.w=e.w,f.la=e.la));c=f}else b.push(c),c=a[d];b.push(c);this.kc=b}};
function jg(a,b){var c=[];a.Fb().map(function(a){return b.Fb().map(function(b){var c;if(id(a,b)){c=kd();var h=jd(a.c,b.c,!0),h=0==h?a.ea?a:b:-1!=h?a:b;c.c=h.c;c.ea=h.ea;a.w==E||b.w==E?b=a.w==E?b:a:(h=jd(a.w,b.w,!1),b=0==h?a.la?a:b:-1==h?a:b);c.w=b.w;c.la=b.la}else c=null;return c})}).forEach(function(a){c=c.concat(a)});return new ig(c.filter(function(a){return null!==a}))};function kg(a,b){var c=[],d=null,e=null;Nd(a,function(a){var h=b(a);null==a.getParent()?e=h:L(d,h);var k=a.getParent();null!==k&&K(k).length==K(d).length&&(k=c.indexOf(d),-1!=k&&c.splice(k,1));1<K(a).length&&c.push(h);d=null===a.h?c[c.length-1]:h});return e}function lg(a){return mg(a,function(a){return null===a.h})}
function ng(a){var b=a.getParent(),c=0;null!==b&&(c=K(b).indexOf(a),b.removeChild(a));var d=K(a).slice();d.forEach(function(d,f){a.removeChild(d);null===b||Kd(b,d,c+f)});return{parent:b,children:d}}function og(a,b){K(a).slice().forEach(function(c){a.removeChild(c);L(b,c)});L(a,b)}function pg(a){var b=Jd(a,0);ng(a);og(b,a);return b}
function qg(a,b,c){var d=Jd(a,0),e=K(d).slice();if(!e.some(function(a){return b(a)}))return a;ng(a);e.forEach(function(e,h){if(b(e)){var k=c(a);Ld(d,h);L(k,e);Kd(d,k,h)}});return d}function rg(a,b,c,d){var e=a.getParent();null!==e&&(a=K(e).indexOf(a),Ld(e,a),Kd(e,c,a));K(b).slice().forEach(function(a){b.removeChild(a);L(d,a)});return c}function mg(a,b,c){function d(a){b(a)&&e.push(a);null!=c&&c(a)||K(a).forEach(d)}var e=[];d(a);return e}
function sg(a,b){var c=b||function(a){return a.toString()+"\n"},d="";Nd(a,function(a){for(var b=0;b<Id(a);b++)d+="-";d+=c(a)});return d};function tg(a){Od.call(this);this.Rb=a;this.Ya=!1}t(tg,Od);m=tg.prototype;m.Kb=function(){return kg(this,function(a){if(a instanceof tg){var b=new tg(a.Rb);b.Ya=a.Ya;a=a.Y();b.oa=a;return b}return a.Kb()})};m.gb=function(a){var b=a||[];Nd(this,function(a){a!=this&&a.gb(b)}.bind(this));a=B(b);return C(a)};m.qd=function(a){this.Ya!=a&&(this.Ya=a,this.Rb="and"==this.Rb?"or":"and",K(this).forEach(function(b){return b.qd(a)}))};
m.eval=function(a){var b=K(this).map(function(b){return b.eval(a)});return ug(this,b)};function ug(a,b){return"and"==a.Rb?sd(b):td(b)}m.toString=function(){return"combined_pred_"+this.Rb.toString()};function vg(a,b,c){Od.call(this);this.ha=a;this.ka=b;this.F=c;this.Wd=null;a=Ad.xc();this.tc=Gd(a,this.ha.G(),this.F);this.bg=a.Qe.get(this.ha.G())||null}t(vg,Od);m=vg.prototype;m.Kb=function(){var a=new vg(this.ha,this.ka,this.F),b=this.Y();a.oa=b;return a};m.gb=function(a){return null!=a?(a.push(this.ha),a.push(this.ka),a):[this.ha,this.ka]};
m.reverse=function(){var a=this.F;switch(this.F){case "gt":a="lt";break;case "lt":a="gt";break;case "gte":a="lte";break;case "lte":a="gte"}return new vg(this.ka,this.ha,a)};m.eval=function(a){var b=a.entries.filter(function(a){var b=H(a,this.ha);a=H(a,this.ka);return this.tc(b,a)},this);return new F(b,G(a))};m.toString=function(){return"join_pred("+this.ha.m()+" "+this.F+" "+this.ka.m()+")"};
function wg(a,b,c){var d=null,e=null;-1!=G(b).indexOf(I(a.ha.H()))?(d=b,e=c):(d=c,e=b);if(d.entries.length>e.entries.length){a:{b=a.ha;a.ha=a.ka;a.ka=b;b=a.F;switch(a.F){case "gt":b="lt";break;case "lt":b="gt";break;case "gte":b="lte";break;case "lte":b="gte";break;default:break a}a.F=b;a.tc=Gd(Ad.xc(),a.ha.G(),a.F)}return[e,d]}return[d,e]}function xg(a){var b={};a.gb().forEach(function(a){b[a.getName()]=null});return b}
function yg(a,b,c){null===a.Wd&&(a.Wd=xg(a.ka.H()));var d=new vd(new Sb(-1,a.Wd),!1);return yd(b,c,d,[I(a.ka.H())])}
function zg(a,b,c,d){var e=[b,c];d||(e=wg(a,b,c));b=e[0];c=e[1];var e=b,f=c,h=a.ha,k=a.ka;d&&(e=c,f=b,h=a.ka,k=a.ha);var n=new Ic,A=[];e.entries.forEach(function(a){var b=String(H(a,h));n.set(b,a)});var O=G(e),ba=G(f);f.entries.forEach(function(a){var b=H(a,k),c=String(b);null!==b&&n.has(c)?n.get(c).forEach(function(b){b=yd(a,ba,b,O);A.push(b)}):d&&A.push(yg(this,a,ba))}.bind(a));a=G(b).concat(G(c));return new F(A,a)}
function Ag(a,b,c,d,e){function f(a,b){var c=new vd(b,1<O.length),c=yd(a,ba,c,O);A.push(c)}var h=d.Tf.H(),k=b,n=c;-1!=G(b).indexOf(I(h))&&(k=c,n=b);var A=[],O=G(n),ba=G(k);k.entries.forEach(function(a){var b=this.bg(H(a,d.hg)),b=d.index.get(b);0!=b.length&&(d.index.Ia()?f(a,e.get(b[0])):df(e,b).forEach(f.bind(null,a)))},a);a=G(k).concat(G(n));return new F(A,a)};function Bg(a,b,c){return null===b?new Qd(a,b,c):q(b.m)?new vg(a,b,c):new Qd(a,b,c)};var Cg={};r("lf.schema.DataStoreType",Cg);Cg.INDEXED_DB=0;Cg.MEMORY=1;Cg.LOCAL_STORAGE=2;Cg.FIREBASE=3;Cg.WEB_SQL=4;Cg.OBSERVABLE_STORE=5;function Dg(a,b,c,d){this.Lc=a;this.name=b;this.Bc=c;this.f=d}Dg.prototype.m=function(){return this.Lc+"."+this.name};function gg(a){return a.f.some(function(a){return a.ba.ic()})}function R(a,b,c,d){this.u=a;this.pa=c;this.J=b;this.ld=d;this.bb=null}r("lf.schema.Table",R);R.prototype.getName=g("u");R.prototype.getName=R.prototype.getName;R.prototype.Wa=g("bb");
function I(a){return a.bb||a.u}R.prototype.pc=function(a){var b=new this.constructor(this.u);b.bb=a;b.tg=this.tg;return b};R.prototype.as=R.prototype.pc;R.prototype.createRow=R.prototype.vb;R.prototype.deserializeRow=R.prototype.fb;R.prototype.Aa=g("pa");R.prototype.getIndices=R.prototype.Aa;R.prototype.gb=g("J");R.prototype.getColumns=R.prototype.gb;R.prototype.getConstraint=R.prototype.Eb;R.prototype.Bb=g("ld");R.prototype.persistentIndex=R.prototype.Bb;function Ne(a){return a.u+".#"};function S(a,b){this.child=a;this.Jb=b;this.bb=null}m=S.prototype;m.getName=function(){return this.Jb+"("+this.child.getName()+")"};m.m=function(){return this.Jb+"("+this.child.m()+")"};m.H=function(){return this.child.H()};m.toString=function(){return this.m()};m.G=function(){return this.child.G()};m.Wa=g("bb");m.Aa=function(){return[]};m.za=l(null);m.ic=l(!1);m.pc=function(a){this.bb=a;return this};S.prototype.as=S.prototype.pc;
function Eg(a){for(var b=[a];a instanceof S;)b.push(a.child),a=a.child;return b}function Fg(a){this.bb=a||null;this.S=new R("#UnknownTable",[],[],!1)}m=Fg.prototype;m.getName=l("*");m.m=function(){return this.getName()};m.toString=function(){return this.m()};m.H=g("S");m.G=l(4);m.Wa=g("bb");m.Aa=function(){return[]};m.za=l(null);m.ic=l(!1);r("lf.fn.avg",function(a){return new S(a,"AVG")});function Gg(a){return new S(a||new Fg,"COUNT")}r("lf.fn.count",Gg);function Hg(a){return new S(a,"DISTINCT")}r("lf.fn.distinct",Hg);r("lf.fn.max",function(a){return new S(a,"MAX")});r("lf.fn.min",function(a){return new S(a,"MIN")});r("lf.fn.stddev",function(a){return new S(a,"STDDEV")});r("lf.fn.sum",function(a){return new S(a,"SUM")});r("lf.fn.geomean",function(a){return new S(a,"GEOMEAN")});function T(a,b){J.call(this);this.Lf=b}t(T,J);T.prototype.exec=function(a,b){switch(this.Lf){case 1:return Ig(this,a,b);case 0:return Jg(this,a,b);default:return Kg(this,a,b)}};T.prototype.toString=l("dummy_node");T.prototype.Mc=function(){return this.toString()};function Kg(a,b,c){return new v(function(a){a(this.fa([],b,c))}.bind(a))}function Ig(a,b,c){return Jd(a,0).exec(b,c).then(function(a){return this.fa(a,b,c)}.bind(a))}
function Jg(a,b,c){var d=K(a).map(function(a){return a.exec(b,c)});return eb(d).then(function(a){var d=[];a.forEach(function(a){for(var b=0;b<a.length;++b)d.push(a[b])});return this.fa(d,b,c)}.bind(a))};function Lg(a){T.call(this,0,1);this.ve=a}t(Lg,T);Lg.prototype.toString=function(){return"aggregation("+this.ve.map(function(a){return a.m()}).toString()+")"};Lg.prototype.fa=function(a){a.forEach(function(a){Mg(new Ng(a,this.ve))},this);return a};function Ng(a,b){this.Ja=a;this.J=b}
function Mg(a){a.J.forEach(function(a){a=Eg(a).reverse();for(var c=1;c<a.length;c++){var d=a[c],e=Eg(d).slice(-1)[0],f=d.child instanceof S?pd(this.Ja,d.child):this.Ja;if(null!==f.Va&&f.Va.has(d.m()))break;f=Og(d.Jb,f,e);e=this.Ja;null===e.Va&&(e.Va=y());e.Va.set(d.m(),f)}},a)}
function Og(a,b,c){var d=null;switch(a){case "MIN":d=Pg(b,c,function(a,b){return b<a?b:a});break;case "MAX":d=Pg(b,c,function(a,b){return b>a?b:a});break;case "DISTINCT":d=Qg(b,c);break;case "COUNT":d=Rg(b,c);break;case "SUM":d=Sg(b,c);break;case "AVG":a=Rg(b,c);0<a&&(d=Sg(b,c)/a);break;case "GEOMEAN":d=Tg(b,c);break;default:d=Ug(b,c)}return d}function Pg(a,b,c){return a.entries.reduce(function(a,e){var f=H(e,b);return null===f?a:null===a?f:c(a,f)},null)}
function Rg(a,b){return b instanceof Fg?a.entries.length:a.entries.reduce(function(a,d){return a+(fa(H(d,b))?0:1)},0)}function Sg(a,b){return Pg(a,b,function(a,b){return b+a})}function Ug(a,b){var c=[];a.entries.forEach(function(a){a=H(a,b);null===a||c.push(a)});return 0==c.length?null:tb.apply(null,c)}function Tg(a,b){var c=0,d=a.entries.reduce(function(a,d){var h=H(d,b);if(0==h||null===h)return a;c++;return a+Math.log(h)},0);return 0==c?null:Math.pow(Math.E,d/c)}
function Qg(a,b){var c=y();a.entries.forEach(function(a){var e=H(a,b);c.set(e,a)});return new F(z(c),G(a))};function Vg(a,b){this.Da=a;this.aa=b}Vg.prototype.hb=g("Da");Vg.prototype.ca=g("aa");function Wg(){J.call(this)}t(Wg,J);function Xg(a,b){J.call(this);this.table=a;this.values=b}t(Xg,Wg);function Yg(a,b){Xg.call(this,a,b)}t(Yg,Xg);function Zg(a){J.call(this);this.table=a}t(Zg,Wg);Zg.prototype.toString=function(){return"delete("+this.table.getName()+")"};function $g(a,b){J.call(this);this.table=a;this.pe=b}t($g,Wg);
$g.prototype.toString=function(){var a=[];this.pe&&(a=this.pe.map(function(a){return a.M.getName()},this));return"update("+this.table.getName()+", ["+a.join(",")+"])"};function ah(a){J.call(this);this.I=a}t(ah,Wg);ah.prototype.toString=function(){return"select("+this.I.toString()+")"};function bh(a){J.call(this);this.table=a}t(bh,Wg);bh.prototype.toString=function(){var a="table_access("+this.table.getName();null===this.table.Wa()||(a+=" as "+this.table.Wa());return a+")"};
function ch(){J.call(this)}t(ch,Wg);ch.prototype.toString=l("cross_product");function dh(a,b){J.call(this);this.f=a;this.Mb=b}t(dh,Wg);dh.prototype.toString=function(){var a="project("+this.f.toString();if(null!==this.Mb)var b=this.Mb.map(function(a){return a.m()}).join(", "),a=a+(", groupBy("+b+")");return a+")"};function eh(a){J.call(this);this.N=a}t(eh,Wg);eh.prototype.toString=function(){return"order_by("+$d(this.N)+")"};function fh(a){J.call(this);this.f=a}t(fh,Wg);
fh.prototype.toString=function(){return"aggregation("+this.f.toString()+")"};function gh(a){J.call(this);this.f=a}t(gh,Wg);gh.prototype.toString=function(){return"group_by("+this.f.toString()+")"};function hh(a){J.call(this);this.W=a}t(hh,Wg);hh.prototype.toString=function(){return"limit("+this.W+")"};function ih(a){J.call(this);this.K=a}t(ih,Wg);ih.prototype.toString=function(){return"skip("+this.K+")"};function jh(a,b){J.call(this);this.I=a;this.Pb=b}t(jh,Wg);
jh.prototype.toString=function(){return"join(type: "+(this.Pb?"outer":"inner")+", "+this.I.toString()+")"};function kh(){};function lh(){}t(lh,kh);lh.prototype.ob=function(a){this.$=a;this.Ta(this.$);return this.$};lh.prototype.Ta=function(a){if(a instanceof ah){var b=mh(this,a.I),b=nh(this,b);rg(a,a,b[0],b[1]);a==this.$&&(this.$=b[0]);a=b[0]}K(a).forEach(function(a){this.Ta(a)},this)};function mh(a,b){if(0==K(b).length||"and"!=b.Rb)return[b];var c=K(b).slice().map(function(a){b.removeChild(a);return mh(this,a)},a);return Ea(c)}
function nh(a,b){var c=null,d=null;b.map(function(a,b){var h=new ah(a);0==b?c=h:L(d,h);d=h},a);return[c,d]};function oh(){}t(oh,kh);oh.prototype.ob=function(a,b){if(3>b.c.length)return a;this.$=a;this.Ta(this.$);return this.$};oh.prototype.Ta=function(a){if(a instanceof ch)for(;2<K(a).length;){for(var b=new ch,c=0;2>c;c++){var d=Ld(a,0);L(b,d)}Kd(a,b,0)}K(a).forEach(function(a){this.Ta(a)},this)};function ph(){T.call(this,0,0)}t(ph,T);ph.prototype.toString=l("cross_product");ph.prototype.fa=function(a){var b=a[0],c=a[1];a=[];for(var d=G(b),e=G(c),f=0;f<b.entries.length;f++)for(var h=0;h<c.entries.length;h++){var k=yd(b.entries[f],d,c.entries[h],e);a.push(k)}b=G(b).concat(G(c));return[new F(a,b)]};function qh(a,b){ee.call(this,a,b);this.Ea=a.l(jc);this.Hb=a.l(kc)}t(qh,ee);qh.prototype.getPriority=l(2);qh.prototype.Zd=function(a){0==this.G()?rh(this,a):this.Jc()};function rh(a,b){a.nd.forEach(function(a,d){a instanceof Zd&&he(this.Hb,a,b[d])},a)}qh.prototype.Jc=function(){var a=je(this.Hb,this.ca());0!=a.length&&(a=new ge(this.global,a),ke(this.Ea,a))};function sh(a){Ud.call(this,a)}t(sh,Ud);sh.prototype.ca=function(){var a=B();a.add(this.c);th(this,this.c.getName(),a);return a};function th(a,b,c){var d=uh(a.ba.info(),b,1);uh(a.ba.info(),b).forEach(c.add.bind(c));d.forEach(function(a){th(this,a.getName(),c)},a)}sh.prototype.clone=function(){var a=new sh(this.ba);Xd(a,this);a.c=this.c;return a};sh.prototype.bind=function(a){sh.ab.bind.call(this,a);Yd(this,a);return this};function vh(a){Ud.call(this,a)}t(vh,Ud);vh.prototype.ca=function(){var a=B();a.add(this.Ha);var b=this.ba.info();wh(this.Ha.getName(),b.Ye).forEach(a.add.bind(a));this.$b&&uh(b,this.Ha.getName()).forEach(a.add.bind(a));return a};vh.prototype.clone=function(){var a=new vh(this.ba);Xd(a,this);a.Ha=this.Ha;this.values&&(a.values=this.values instanceof zd?this.values:this.values.slice());a.$b=this.$b;a.ac=this.ac;return a};
vh.prototype.bind=function(a){vh.ab.bind.call(this,a);this.ac&&(this.values=this.ac instanceof zd?a[this.ac.za()]:this.ac.map(function(b){return b instanceof zd?a[b.za()]:b}));return this};function xh(a){Ud.call(this,a)}t(xh,Ud);xh.prototype.ca=function(){var a=B();a.add(this.table);var b=this.set.map(function(a){return a.M.m()}),c=this.ba.info();yh(c,b).forEach(a.add.bind(a));zh(c,b).forEach(a.add.bind(a));return a};xh.prototype.clone=function(){var a=new xh(this.ba);Xd(a,this);a.table=this.table;a.set=this.set?this.set.slice():this.set;return a};xh.prototype.bind=function(a){xh.ab.bind.call(this,a);this.set.forEach(function(b){-1!=b.Rc&&(b.value=a[b.Rc])});Yd(this,a);return this};function Ah(a,b){if(null==b)return"NULL";switch(a){case 1:return b?1:0;case 3:case 4:return b;case 0:return"'"+Wb(b)+"'";default:return"'"+b.toString()+"'"}}function Bh(a,b){var c=a.$b?"INSERT OR REPLACE":"INSERT",d=a.Ha.gb(),c=c+(" INTO "+a.Ha.getName()+"("),c=c+d.map(function(a){return a.getName()}).join(", "),c=c+") VALUES (";return a.values.map(function(a){var f=d.map(function(c){var d=a.o[c.getName()];return b?null!=d?"#":"NULL":Ah(c.G(),d)});return c+f.join(", ")+");"}).join("\n")}
function Ch(a){switch(a){case "between":return"BETWEEN";case "eq":return"=";case "gte":return">=";case "gt":return">";case "in":return"IN";case "lte":return"<=";case "lt":return"<";case "match":return"LIKE";case "neq":return"<>";default:return"UNKNOWN"}}function Dh(a,b,c,d){return a instanceof zd?"?"+a.za().toString():d?null!=a?"#":"NULL":"match"==b?"'"+a.toString()+"'":"in"==b?"("+a.map(function(a){return Ah(c,a)}).join(", ")+")":"between"==b?Ah(c,a[0])+" AND "+Ah(c,a[1]):Ah(c,a).toString()}
function Eh(a,b){return K(a).map(function(a){return"("+Fh(a,b)+")"}).join("and"==a.Rb?" AND ":" OR ")}function Gh(a){return[a.ha.m(),Ch(a.F),a.ka.m()].join(" ")}function Fh(a,b){if(a instanceof Qd){var c=a.M.m(),d=Ch(a.F),e=Dh(a.value,a.F,a.M.G(),b);return"="==d&&"NULL"==e?[c,"IS NULL"].join(" "):"<>"==d&&"NULL"==e?[c,"IS NOT NULL"].join(" "):[c,d,e].join(" ")}if(a instanceof tg)return Eh(a,b);if(a instanceof vg)return Gh(a);throw new D(357,typeof a);}
function Hh(a,b){var c=Fh(a,b);return c?" WHERE "+c:""}function Ih(a,b){var c="UPDATE "+a.table.getName()+" SET ",c=c+a.set.map(function(a){var b=a.M.m()+" = ";return-1!=a.Rc?b+"?"+a.Rc.toString():b+Ah(a.M.G(),a.value).toString()}).join(", ");a.s&&(c+=Hh(a.s,b));return c+";"}
function Jh(a,b){var c="*";a.f.length&&(c=a.f.map(function(a){return a.Wa()?a.m()+" AS "+a.Wa():a.m()}).join(", "));c="SELECT "+c+" FROM ";null!=a.Ab&&0!=a.Ab.size?c+=Kh(a,b):(c+=a.c.map(Lh).join(", "),a.s&&(c+=Hh(a.s,b)));if(a.N)var d=a.N.map(function(a){return a.M.m()+(0==a.lb?" DESC":" ASC")}).join(", "),c=c+(" ORDER BY "+d);a.ja&&(d=a.ja.map(function(a){return a.m()}).join(", "),c+=" GROUP BY "+d);a.W&&(c+=" LIMIT "+a.W.toString());a.K&&(c+=" SKIP "+a.K.toString());return c+";"}
function Lh(a){return I(a)!=a.getName()?a.getName()+" AS "+I(a):a.getName()}function Kh(a,b){for(var c=mg(a.s,function(a){return a instanceof vg}),d=c.map(Gh),e=Lh(a.c[0]),f=1;f<a.c.length;f++)var h=Lh(a.c[f]),e=a.Ab.has(c[d.length-f].Y())?e+(" LEFT OUTER JOIN "+h):e+(" INNER JOIN "+h),e=e+(" ON ("+d[d.length-f]+")");c=Jd(a.s,0);c instanceof vg||(e+=" WHERE "+Fh(c,b));return e}
function Mh(a,b){var c=b||!1,d=a.a.clone();if(d instanceof vh)return Bh(d,c);if(d instanceof sh){var e="DELETE FROM "+d.c.getName();d.s&&(e+=Hh(d.s,c));return e+";"}if(d instanceof xh)return Ih(d,c);if(d instanceof Zd)return Jh(d,c);throw new D(358,typeof d);};function U(a,b){this.global=a;this.sg=a.l(ic);this.Ea=a.l(jc);this.a=b}r("lf.query.BaseBuilder",U);U.prototype.exec=function(){try{this.cb()}catch(a){return bb(a)}return new v(function(a,b){var c=new qh(this.global,[this.zc()]);ke(this.Ea,c).then(function(b){a(nd(b[0]))},b)},this)};U.prototype.exec=U.prototype.exec;U.prototype.Nf=function(){var a=function(a){return a.Mc(this.a)+"\n"}.bind(this);return sg(Nh(this).hb(),a)};U.prototype.explain=U.prototype.Nf;
U.prototype.bind=function(a){this.a.bind(a);return this};U.prototype.bind=U.prototype.bind;U.prototype.Ag=function(a){return Mh(this,a)};U.prototype.toSql=U.prototype.Ag;U.prototype.cb=aa();function Nh(a){if(null==a.Ze){var b;b=a.sg;var c=a.a,d=b.eg.create(c);b=b.pg.create(d,c);a.Ze=b}return a.Ze}U.prototype.zc=function(){return{context:this.a.clone(),be:Nh(this)}};function Oh(a){U.call(this,a,new sh(a.l(lc)))}t(Oh,U);r("lf.query.DeleteBuilder",Oh);Oh.prototype.c=function(a){if(null!=this.a.c)throw new D(515);this.a.c=a;return this};Oh.prototype.from=Oh.prototype.c;Oh.prototype.s=function(a){this.xd();this.a.s=a;return this};Oh.prototype.where=Oh.prototype.s;Oh.prototype.xd=function(){if(null==this.a.c)throw new D(548);if(null!=this.a.s)throw new D(516);};Oh.prototype.cb=function(){Oh.ab.cb.call(this);if(null==this.a.c)throw new D(517);};function Ph(a,b){U.call(this,a,new vh(a.l(lc)));this.a.$b=b||!1}t(Ph,U);r("lf.query.InsertBuilder",Ph);Ph.prototype.cb=function(){Ph.ab.cb.call(this);var a=this.a;if(null==a.Ha||null==a.values)throw new D(518);if(a.$b&&null===a.Ha.Eb().$c())throw new D(519);};Ph.prototype.Ha=function(a){if(null!=this.a.Ha)throw new D(520);this.a.Ha=a;return this};Ph.prototype.into=Ph.prototype.Ha;
Ph.prototype.values=function(a){if(null!=this.a.values)throw new D(521);a instanceof zd||a.some(function(a){return a instanceof zd})?this.a.ac=a:this.a.values=a;return this};Ph.prototype.values=Ph.prototype.values;function Qh(a){return Rh("and",Array.prototype.slice.call(arguments))}r("lf.op.and",Qh);r("lf.op.or",function(a){return Rh("or",Array.prototype.slice.call(arguments))});function Rh(a,b){var c=new tg(a);b.forEach(function(a){L(c,a)});return c}r("lf.op.not",function(a){a.qd(!0);return a});function V(a,b){U.call(this,a,new Zd(a.l(lc)));this.Fe=this.sd=!1;this.a.f=b;Sh(this);Th(this)}t(V,U);r("lf.query.SelectBuilder",V);V.prototype.cb=function(){V.ab.cb.call(this);var a=this.a;if(null==a.c)throw new D(522);if(q(a.Qb)&&!q(a.W)||q(a.Xb)&&!q(a.K))throw new D(523);null!=this.a.ja?Uh(this):Vh(this)};function Sh(a){var b=a.a.f.filter(function(a){return a instanceof S&&"DISTINCT"==a.Jb},a);if(0!=b.length&&(1!=b.length||1!=a.a.f.length))throw new D(524);}
function Uh(a){var b=a.a.f.filter(function(a){return!(a instanceof S)}).map(function(a){return a.m()}),c=!1;if(0==a.a.ja.length||0==a.a.f.length)c=!0;else{var d=a.a.ja.map(function(a){return a.m()});(c=b.some(function(a){return-1==d.indexOf(a)}))||(c=a.a.ja.some(function(a){a=a.G();return 6==a||0==a}))}if(c)throw new D(525);}function Vh(a){var b=a.a.f.some(function(a){return a instanceof S},a);a=a.a.f.some(function(a){return!(a instanceof S)},a)||0==a.a.f.length;if(b&&a)throw new D(526);}
function Th(a){a.a.f.forEach(function(a){if(a instanceof S&&!Wh(a.Jb,a.G()))throw new D(527,a.m());},a)}function Xh(a,b){if(null==a.a.c)throw new D(b);}V.prototype.c=function(a){if(this.Fe)throw new D(515);this.Fe=!0;null==this.a.c&&(this.a.c=[]);this.a.c.push.apply(this.a.c,Array.prototype.slice.call(arguments));return this};V.prototype.from=V.prototype.c;V.prototype.s=function(a){Xh(this,548);if(this.sd)throw new D(516);this.sd=!0;Yh(this,a);return this};V.prototype.where=V.prototype.s;
function Yh(a,b){if(null!=a.a.s){var c=Qh(b,a.a.s);a.a.s=c}else a.a.s=b}V.prototype.Xf=function(a,b){Xh(this,542);if(this.sd)throw new D(547);this.a.c.push(a);Yh(this,b);return this};V.prototype.innerJoin=V.prototype.Xf;V.prototype.cg=function(a,b){Xh(this,542);if(!(b instanceof vg))throw new D(541);if(this.sd)throw new D(547);this.a.c.push(a);null==this.a.Ab&&(this.a.Ab=B());var c=b;I(a)!=I(b.ka.H())&&(c=b.reverse());this.a.Ab.add(c.Y());Yh(this,c);return this};V.prototype.leftOuterJoin=V.prototype.cg;
V.prototype.W=function(a){if(null!=(this.a.W||this.a.Qb))throw new D(528);if(a instanceof zd)this.a.Qb=a;else{if(0>a)throw new D(531);this.a.W=a}return this};V.prototype.limit=V.prototype.W;V.prototype.K=function(a){if(null!=(this.a.K||this.a.Xb))throw new D(529);if(a instanceof zd)this.a.Xb=a;else{if(0>a)throw new D(531);this.a.K=a}return this};V.prototype.skip=V.prototype.K;V.prototype.N=function(a,b){Xh(this,549);null==this.a.N&&(this.a.N=[]);this.a.N.push({M:a,lb:null!=b?b:1});return this};
V.prototype.orderBy=V.prototype.N;V.prototype.ja=function(a){Xh(this,549);if(null!=this.a.ja)throw new D(530);null==this.a.ja&&(this.a.ja=[]);this.a.ja.push.apply(this.a.ja,Array.prototype.slice.call(arguments));return this};V.prototype.groupBy=V.prototype.ja;function Wh(a,b){switch(a){case "COUNT":case "DISTINCT":return!0;case "AVG":case "GEOMEAN":case "STDDEV":case "SUM":return 4==b||3==b;case "MAX":case "MIN":return 4==b||3==b||5==b||2==b}return!1}
V.prototype.clone=function(){var a=new V(this.global,this.a.f);a.a=this.a.clone();a.a.Uc=null;return a};V.prototype.clone=V.prototype.clone;function Zh(a,b){U.call(this,a,new xh(a.l(lc)));this.a.table=b}t(Zh,U);r("lf.query.UpdateBuilder",Zh);Zh.prototype.set=function(a,b){var c={Rc:b instanceof zd?b.za():-1,M:a,value:b};null!=this.a.set?this.a.set.push(c):this.a.set=[c];return this};Zh.prototype.set=Zh.prototype.set;Zh.prototype.s=function(a){this.xd();this.a.s=a;return this};Zh.prototype.where=Zh.prototype.s;Zh.prototype.xd=function(){if(null!=this.a.s)throw new D(516);};
Zh.prototype.cb=function(){Zh.ab.cb.call(this);if(null==this.a.set)throw new D(532);if(this.a.set.some(function(a){return a.value instanceof zd}))throw new D(501);};function $h(a){this.a=a;this.Da=null}$h.prototype.hc=function(){null===this.Da&&(this.Da=this.Yc());return this.Da};function ai(a){$h.call(this,a)}t(ai,$h);ai.prototype.Yc=function(){return this.a.$b?new Yg(this.a.Ha,this.a.values):new Xg(this.a.Ha,this.a.values)};function bi(a){$h.call(this,a)}t(bi,$h);bi.prototype.Yc=function(){var a=new $g(this.a.table,this.a.set),b=null!=this.a.s?new ah(this.a.s.Kb()):null,c=new bh(this.a.table);null===b?L(a,c):(L(b,c),L(a,b));return a};function ci(a,b,c){this.Da=a;this.ce=b;this.Ub=c}ci.prototype.hc=function(){this.Ub.forEach(function(a){this.Da=a.ob(this.Da,this.ce)},this);return this.Da};function di(a,b){$h.call(this,a);this.Ub=b}t(di,$h);di.prototype.Yc=function(){var a=new Zg(this.a.c),b=null!=this.a.s?new ah(this.a.s.Kb()):null,c=new bh(this.a.c);null===b?L(a,c):(L(b,c),L(a,b));return(new ci(a,this.a,this.Ub)).hc()};function ei(){}t(ei,kh);ei.prototype.ob=function(a,b){if(2>b.c.length)return a;this.$=a;this.Ta(this.$,b);return this.$};ei.prototype.Ta=function(a,b){if(a instanceof ah&&a.I instanceof vg){var c=a.I.Y(),d=Jd(a,0);d instanceof ch&&(c=null!=b.Ab&&b.Ab.has(c),c=new jh(a.I,c),rg(a,d,c,c),a==this.$&&(this.$=c),a=c)}K(a).forEach(function(a){this.Ta(a,b)},this)};function fi(){this.Qc=B()}t(fi,kh);fi.prototype.ob=function(a,b){this.Qc.clear();if(!q(b.s))return a;this.$=a;this.Ta(this.$);this.Qc.clear();return this.$};fi.prototype.Ta=function(a){if(gi(a)){var b=a.I instanceof Qd?hi(this,a):ii(this,a);this.Qc.add(a);b==a&&(b=Jd(a,0));null!==b&&(fa(b.getParent())&&(this.$=b),gi(b)&&!this.Qc.has(b)&&this.Ta(b))}else K(a).forEach(function(a){this.Ta(a)},this)};
function ji(a,b,c){var d=b;if(Jd(b,0)instanceof ah)d=pg(b),ji(a,b,c);else if(ki(b)){var e=[],d=qg(b,c,function(a){a=new ah(a.I);e.push(a);return a});e.forEach(function(a){ji(this,a,c)},a)}return d}function hi(a,b){var c=B([I(b.I.M.H())]),d=function(a){return li(this,a,c)}.bind(a);return ji(a,b,d)}function ii(a,b){var c=B([I(b.I.ha.H()),I(b.I.ka.H())]),d=function(a){return li(this,a,c)}.bind(a);return ji(a,b,d)}
function li(a,b,c){var d=B();lg(b).forEach(function(a){d.add(I(a.table))},a);b instanceof bh&&d.add(I(b.table));return mc(d,c)}function gi(a){return a instanceof ah&&!(a.I instanceof tg)}function ki(a){a=Jd(a,0);return a instanceof ch||a instanceof jh};function mi(a,b){$h.call(this,a);this.Ub=b;this.cf=this.Ue=this.lf=this.Xe=this.we=this.Ie=this.kf=this.Ce=this.nf=null}t(mi,$h);
mi.prototype.Yc=function(){ni(this);2<=this.a.c.length&&(this.Ce=new ch);this.kf=null!=this.a.s?new ah(this.a.s.Kb()):null;this.a.N&&(this.Xe=new eh(this.a.N));null!=this.a.K&&0<this.a.K&&(this.lf=new ih(this.a.K));null!=this.a.W&&(this.Ue=new hh(this.a.W));null!=this.a.ja&&(this.Ie=new gh(this.a.ja));oi(this);this.cf=new dh(this.a.f||[],this.a.ja||null);var a=pi(this);return(new ci(a,this.a,this.Ub)).hc()};
function pi(a){for(var b=[a.Ue,a.lf,a.cf,a.Xe,a.we,a.Ie,a.kf,a.Ce],c=null,d=null,e=0;e<b.length;e++){var f=b[e];null!==f&&(null===d?d=f:L(b[c],f),c=e)}a.nf.forEach(function(a){L(b[c],a)});return d}function ni(a){a.nf=a.a.c.map(function(a){return new bh(a)},a)}function oi(a){var b=a.a.f.filter(function(a){return a instanceof S});null!=a.a.N&&a.a.N.forEach(function(a){a.M instanceof S&&b.push(a.M)});0<b.length&&(a.we=new fh(b))};function qi(){this.ie=[new lh,new oh,new fi,new ei];this.Hd=[new lh]}qi.prototype.create=function(a){var b=null;if(a instanceof vh)b=new ai(a);else if(a instanceof sh)b=new di(a,this.Hd);else if(a instanceof Zd)b=new mi(a,this.ie);else if(a instanceof xh)b=new bi(a);else throw new D(513);b=b.hc();return new Vg(b,a.ca())};function ri(a){T.call(this,0,1);this.S=a}t(ri,T);ri.prototype.toString=function(){return"delete("+this.S.getName()+")"};ri.prototype.fa=function(a,b){var c=a[0].entries.map(function(a){return a.ta});b.remove(this.S,c);return[rd()]};function si(a,b){T.call(this,0,-1);this.table=b;this.D=a.l(hc)}t(si,T);si.prototype.toString=function(){return"get_row_count("+this.table.getName()+")"};si.prototype.fa=function(){var a=this.D.get(Ne(this.table)),b=new F([],[this.table.getName()]),c=Gg(),a=a.Ma().na;null===b.Va&&(b.Va=y());b.Va.set(c.m(),a);return[b]};function ti(a,b){T.call(this,0,-1);this.U=a.l(gc);this.D=a.l(hc);this.table=b}t(ti,T);ti.prototype.toString=function(){var a="table_access("+this.table.getName();null===this.table.Wa()||(a+=" as "+this.table.Wa());return a+")"};ti.prototype.fa=function(){var a=this.D.get(Ne(this.table)).Xa();return[ud(df(this.U,a),[I(this.table)])]};function ui(a){this.i=a}t(ui,kh);ui.prototype.ob=function(a,b){this.$=a;if(!this.zd(b))return a;var c=mg(a,function(a){return a instanceof ti})[0],d=new si(this.i,c.table);rg(c,c,d,d);return this.$};ui.prototype.zd=function(a){return 1==a.f.length&&1==a.c.length&&null==a.s&&null==a.W&&null==a.K&&null==a.ja?(a=a.f[0],a instanceof S&&"COUNT"==a.Jb&&a.child instanceof Fg):!1};function vi(a){T.call(this,0,1);this.He=a}t(vi,T);vi.prototype.toString=function(){return"groupBy("+this.He.map(function(a){return a.m()}).toString()+")"};vi.prototype.fa=function(a){return wi(this,a[0])};function wi(a,b){var c=new Ic,d=function(a){return this.He.map(function(b){return H(a,b)},this).join(",")}.bind(a);b.entries.forEach(function(a){c.set(d(a),a)},a);return c.keys().map(function(a){return new F(c.get(a),G(b))},a)};function xi(a,b,c){T.call(this,0,0);this.D=a.l(hc);this.U=a.l(gc);this.I=b;this.Pb=c;this.vd="eq"==this.I.F?0:2;this.Ke=null}t(xi,T);var yi=["hash","index_nested_loop","nested_loop"];xi.prototype.toString=function(){return"join(type: "+(this.Pb?"outer":"inner")+", impl: "+yi[this.vd]+", "+this.I.toString()+")"};
xi.prototype.fa=function(a){switch(this.vd){case 0:return[zg(this.I,a[0],a[1],this.Pb)];case 1:return[Ag(this.I,a[0],a[1],this.Ke,this.U)];default:var b=this.I,c=a[0];a=a[1];var d=this.Pb,e=[c,a];d||(e=wg(b,c,a));c=e[0];a=e[1];for(var e=[],f=G(c),h=G(a),k=c.entries.length,n=a.entries.length,A=n+256-1>>8,O=0;O<A;){for(var ba=0;ba<k;ba++){var xb=!1,Nf=H(c.entries[ba],b.ha);if(null!==Nf)for(var Pc=Math.min(O+1<<8,n),Ya=O<<8;Ya<Pc;Ya++)if(b.tc(Nf,H(a.entries[Ya],b.ka))){var xb=!0,ce=yd(c.entries[ba],
f,a.entries[Ya],h);e.push(ce)}d&&!xb&&e.push(yg(b,c.entries[ba],f))}O++}b=G(c).concat(G(a));return[new F(e,b)]}};function zi(a,b){a.vd=1;var c=a.D.get(b.za().m());a.Ke={Tf:b,hg:b==a.I.ha?a.I.ka:a.I.ha,index:c}};function Ai(a){T.call(this,0,-1);this.df=a}t(Ai,T);Ai.prototype.toString=function(){return"no_op_step("+G(this.df[0]).join(",")+")"};Ai.prototype.fa=g("df");function Bi(){}t(Bi,kh);Bi.prototype.ob=function(a,b){this.$=a;if(!this.zd(b))return a;mg(a,function(a){return a instanceof xi}).forEach(this.rg,this);return this.$};Bi.prototype.zd=function(a){return 1<a.c.length};
Bi.prototype.rg=function(a){if("eq"==a.I.F&&!a.Pb){var b=function(b){if(!(b instanceof ti))return null;b=I(b.table)==I(a.I.ka.H())?a.I.ka:a.I.ha;return fa(b.za())?null:b},c=b(Jd(a,0)),b=b(Jd(a,1));if(null!==c||null!==b){b=null===b?c:b;zi(a,b);var d=new F([],[I(b.H())]);Md(a,new Ai([d]),b==c?0:1)}}};function Ci(a){a=a.map(function(a){return a.Fb()});a=zb.apply(null,a);var b=[];yb(a,function(a){b.push(a)});return b}function Di(a){this.Nb=a}Di.prototype.Zc=function(){return 1==this.Nb.f.length?[kd()]:[this.Nb.f.map(function(){return kd()})]};function Ei(a,b){this.Nb=a;this.Ca=b;this.Dd=this.Se=null}
function Fi(a,b){var c=y();a.Ca.keys().forEach(function(a){var e=this.Ca.get(a).map(function(a){return Vd(b,a)},this),f=new ig([kd()]);e.forEach(function(a){var b=null;"between"==a.F?b=new fd(Td(a,a.value[0]),Td(a,a.value[1]),!1,!1):(b=Td(a,a.value),b="eq"==a.F?new fd(b,b,!1,!1):"gte"==a.F?new fd(b,E,!1,!1):"gt"==a.F?new fd(b,E,!0,!1):"lte"==a.F?new fd(E,b,!1,!1):new fd(E,b,!1,!0));a=a.Ya?gd(b):[b];a=new ig(a);f=jg(f,a)});c.set(a,f)},a);return c}
Ei.prototype.Zc=function(a){if(this.Se==a)return this.Dd;for(var b=Fi(this,a),c=this.Nb.f.length-1;0<=c;c--){var d=this.Nb.f[c];if(null!==(b.get(d.ba.getName())||null))break;b.set(d.ba.getName(),new ig([kd()]))}this.Dd=1==this.Nb.f.length?z(b)[0].Fb():Ci(Gi(this,b));this.Se=a;return this.Dd};function Gi(a,b){var c=y(),d=0;a.Nb.f.forEach(function(a){c.set(a.ba.getName(),d);d++});return Rb(b).sort(function(a,b){return c.get(a)-c.get(b)}).map(function(a){return b.get(a)})};function Hi(a,b){this.of=b;this.D=a.l(hc)}function Ii(a,b,c){c=c.filter(a.Yf,a);if(0==c.length)return null;a=Ji(a,c);if(0==a.length)return null;if(1==a.length)return a[0];var d=Number.MAX_VALUE;return a.reduce(function(a,c){var h=Ki(c,b);return h<d?(d=h,c):a},null)}
function Ji(a,b){return a.of.Aa().map(function(a){a=new Li(this.D,a);Mi(a,b);return a},a).filter(function(a){if(null===a.Ca)a=!1;else{for(var b=!1,e=!0,f=0;f<a.yb.f.length;f++){var h=a.Ca.has(a.yb.f[f].ba.getName());if(b&&h){e=!1;break}h||(b=!0)}a=e}return a})}Hi.prototype.Yf=function(a){var b;if(b=a instanceof Qd)Rd(a),b=null!==a.value&&("between"==a.F||"eq"==a.F||"gt"==a.F||"gte"==a.F||"lt"==a.F||"lte"==a.F);return b?a.M.H()==this.of:!1};
function Li(a,b){this.D=a;this.yb=b;this.Uf=B(this.yb.f.map(function(a){return a.ba.getName()}));this.Sd=this.Ca=null}function Ni(a){null===a.Sd&&(a.Sd=new Ei(a.yb,a.Ca));return a.Sd}function Mi(a,b){b.forEach(function(a){var b=a.gb()[0].getName();this.Uf.has(b)&&(null===this.Ca&&(this.Ca=new Ic),this.Ca.set(b,a.Y()))},a)}function Ki(a,b){var c=Ni(a).Zc(b),d=a.D.get(a.yb.m());return c.reduce(function(a,b){return a+d.Wc(b)},0)};function Oi(a,b,c,d){T.call(this,0,-1);this.D=a.l(hc);this.index=b;this.Re=c;this.ge=d;this.Pc=this.Oc=!1}t(Oi,T);Oi.prototype.toString=function(){return"index_range_scan("+this.index.m()+", ?, "+(this.ge?"reverse":"natural")+(this.Oc?", limit:?":"")+(this.Pc?", skip:?":"")+")"};Oi.prototype.Mc=function(a){var b=this.toString(),c=this.Re.Zc(a),b=b.replace("?",c.toString());this.Oc&&(b=b.replace("?",a.W.toString()));this.Pc&&(b=b.replace("?",a.K.toString()));return b};
Oi.prototype.fa=function(a,b,c){a=this.Re.Zc(c);b=this.D.get(this.index.m());c=(1==a.length&&a[0]instanceof fd&&ld(a[0])?hf(b.get(a[0].c),!1,this.Oc?c.W:void 0,this.Pc?c.K:void 0):b.Xa(a,this.ge,this.Oc?c.W:void 0,this.Pc?c.K:void 0)).map(function(a){return new Sb(a,{})},this);return[ud(c,[this.index.Lc])]};function Pi(a){T.call(this,0,1);this.md=a}t(Pi,T);Pi.prototype.toString=l("select(?)");Pi.prototype.Mc=function(a){a=Vd(a,this.md);return this.toString().replace("?",a.toString())};Pi.prototype.fa=function(a,b,c){return[Vd(c,this.md).eval(a[0])]};function Qi(a,b){T.call(this,0,1);this.U=a.l(gc);this.S=b}t(Qi,T);Qi.prototype.toString=function(){return"table_access_by_row_id("+this.S.getName()+")"};Qi.prototype.fa=function(a){return[ud(df(this.U,od(a[0])),[I(this.S)])]};function Ri(a){this.i=a}t(Ri,kh);Ri.prototype.ob=function(a,b){this.$=a;mg(a,function(a){return a instanceof ti}).forEach(function(a){var d=Si(a);if(0!=d.length){var e=Ii(new Hi(this.i,a.table),b,d.map(function(a){return Vd(b,a.md)}));if(null!==e){var f=y();d.forEach(function(a){f.set(a.md,a)},this);this.$=Ti(this,e,f,a)}}},this);return this.$};function Si(a){var b=[];for(a=a.getParent();a;)a instanceof Pi&&b.push(a),a=a.getParent();return b}
function Ti(a,b,c,d){(null===b.Ca?[]:b.Ca.values()).map(function(a){return c.get(a)}).forEach(ng);b=new Oi(a.i,b.yb,Ni(b),!1);a=new Qi(a.i,d.table);L(a,b);rg(d,d,a,b);return b.hb()};function Ui(a,b){T.call(this,0,-1);this.D=a.l(hc);this.S=b}t(Ui,T);Ui.prototype.toString=function(){return"insert("+this.S.getName()+")"};Ui.prototype.fa=function(a,b,c){Vi(this.S,c.values,this.D);b.zb(this.S,c.values);return[ud(c.values,[this.S.getName()])]};function Vi(a,b,c){a=a.Eb().$c();if(null===a?0:a.f[0].autoIncrement){var d=a.f[0].ba.getName();c=c.get(a.m()).max();var e=null===c?0:c[0];b.forEach(function(a){if(0==a.o[d]||null==a.o[d])e++,a.o[d]=e})}}
function Wi(a,b){T.call(this,0,-1);this.D=a.l(hc);this.S=b}t(Wi,T);Wi.prototype.toString=function(){return"insert_replace("+this.S.getName()+")"};Wi.prototype.fa=function(a,b,c){Vi(this.S,c.values,this.D);b.Od(this.S,c.values);return[ud(c.values,[this.S.getName()])]};function Xi(){T.call(this,0,1)}t(Xi,T);Xi.prototype.toString=l("limit(?)");Xi.prototype.Mc=function(a){return this.toString().replace("?",a.W.toString())};Xi.prototype.fa=function(a,b,c){a[0].entries.splice(c.W);return a};function Yi(a){T.call(this,0,1);this.N=a}t(Yi,T);m=Yi.prototype;m.toString=function(){return"order_by("+$d(this.N)+")"};m.fa=function(a){if(1==a.length){var b;b=a[0];for(var c=null,d=0;d<this.N.length;d++){var e=Hg(this.N[d].M);if(null!==b.Va&&b.Va.has(e.m())){c=e;break}}b=c;(null===b?a[0]:pd(a[0],b)).entries.sort(this.Kf.bind(this))}else a.sort(this.ug.bind(this));return a};
m.V=function(a,b){var c=null,d=null,e=null,f=-1;do f++,e=this.N[f].M,c=this.N[f].lb,d=a(e),e=b(e);while(d==e&&f+1<this.N.length);d=d<e?-1:d>e?1:0;return 1==c?d:-d};m.ug=function(a,b){return this.V(function(b){return b instanceof S?pd(a,b):H(a.entries[a.entries.length-1],b)},function(a){return a instanceof S?pd(b,a):H(b.entries[b.entries.length-1],a)})};m.Kf=function(a,b){return this.V(function(b){return H(a,b)},function(a){return H(b,a)})};function Zi(a,b){this.Ja=a;this.J=b}function $i(a){return a.J.some(function(a){return a instanceof S},a)?aj(a):bj(a)}function aj(a){if(1==a.J.length&&"DISTINCT"==a.J[0].Jb)return a=pd(a.Ja,a.J[0]).entries.map(function(a){var b=new vd(new Sb(-1,{}),1<this.Ja.L.size);xd(b,this.J[0],H(a,this.J[0].child));return b},a),new F(a,[]);var b=new vd(new Sb(-1,{}),1<a.Ja.L.size);a.J.forEach(function(a){var d=a instanceof S?pd(this.Ja,a):H(this.Ja.entries[0],a);xd(b,a,d)},a);return new F([b],G(a.Ja))}
function bj(a){var b=Array(a.Ja.entries.length),c=1<a.Ja.L.size;a.Ja.entries.forEach(function(a,e){b[e]=new vd(new Sb(a.ta.id(),{}),c);this.J.forEach(function(c){xd(b[e],c,H(a,c))},this)},a);return new F(b,G(a.Ja))}function cj(a,b){var c=a.map(function(a){return $i(new Zi(a,b)).entries[0]});return new F(c,G(a[0]))};function dj(a,b){T.call(this,0,1);this.f=a;this.Mb=b}t(dj,T);dj.prototype.toString=function(){var a="project("+this.f.toString();if(null!==this.Mb)var b=this.Mb.map(function(a){return a.m()}).join(", "),a=a+(", groupBy("+b+")");return a+")"};dj.prototype.fa=function(a){0==a.length?a=[rd()]:1==a.length?(a=a[0],a=[0==this.f.length?a:$i(new Zi(a,this.f))]):a=[cj(a,this.f)];return a};function ej(a){return a.f.some(function(a){return a instanceof S})||null!==a.Mb};function fj(){T.call(this,0,1)}t(fj,T);fj.prototype.toString=l("skip(?)");fj.prototype.Mc=function(a){return this.toString().replace("?",a.K.toString())};fj.prototype.fa=function(a,b,c){return[new F(a[0].entries.slice(c.K),G(a[0]))]};function gj(){}t(gj,kh);gj.prototype.ob=function(a,b){if(!q(b.W)&&!q(b.K))return a;var c=hj(a);if(null===c)return a;mg(a,function(a){return a instanceof Xi||a instanceof fj}).forEach(function(a){a instanceof Xi?c.Oc=!0:c.Pc=!0;ng(a)},this);return c.hb()};function hj(a){a=mg(a,function(a){return a instanceof Oi},function(a){return a instanceof dj&&ej(a)||a instanceof Yi||1!=K(a).length||a instanceof Pi});return 0<a.length?a[0]:null};function ij(a){this.i=a}t(ij,kh);ij.prototype.ob=function(a,b){var c=jj(a,b);if(null===c)return a;var d;a:{var e=c;d=kj(Jd(c,0));if(null!==d){var f;f=c.N;for(var h=null,k=d.table.Aa(),n=0;n<k.length&&null===h;n++)h=lj(k[n],f);f=h;if(null===f){d=e;break a}e=new Oi(this.i,f.yb,new Di(f.yb),f.Oe);f=new Qi(this.i,d.table);L(f,e);ng(c);e=rg(d,d,f,e)}d=e}if(d==c)a:if(d=c,e=mj(Jd(c,0)),null!==e){f=lj(e.index,c.N);if(null===f)break a;e.ge=f.Oe;d=ng(c).parent}return d.hb()};
function mj(a){a=mg(a,function(a){return a instanceof Oi},function(a){return 1!=K(a).length});return 0<a.length?a[0]:null}function kj(a){a=mg(a,function(a){return a instanceof ti},function(a){return 1!=K(a).length});return 0<a.length?a[0]:null}function jj(a,b){return q(b.N)?mg(a,function(a){return a instanceof Yi})[0]:null}function lj(a,b){if(a.f.length!=b.length||!b.every(function(b,c){return b.M.getName()==a.f[c].ba.getName()}))return null;var c=nj(b,a);return c[0]||c[1]?{yb:a,Oe:c[1]}:null}
function nj(a,b){var c=a.reduce(function(a,b){return a<<1|(0==b.lb?0:1)},0),d=b.f.reduce(function(a,b){return a<<1|(0==b.lb?0:1)},0),c=c^d;return[0==c,c==Math.pow(2,Math.max(a.length,b.f.length))-1]};function oj(a,b,c){this.Da=a;this.ce=b;this.Ub=c}oj.prototype.hc=function(){this.Ub.forEach(function(a){this.Da=a.ob(this.Da,this.ce)},this);return this.Da};function pj(a,b){T.call(this,0,1);this.S=a;this.Dg=b}t(pj,T);pj.prototype.toString=function(){return"update("+this.S.getName()+")"};pj.prototype.fa=function(a,b){var c=a[0].entries.map(function(a){var b=this.S.fb(a.ta.Fa());this.Dg.forEach(function(a){b.o[a.M.getName()]=a.value},this);return b},this);b.update(this.S,c);return[rd()]};function qj(a){this.i=a;this.ie=[new Bi,new Ri(this.i),new ij(this.i),new gj,new ui(this.i)];this.Hd=[new Ri(this.i)]}qj.prototype.create=function(a,b){var c=a.hb();if(c instanceof Yg||c instanceof Xg)return rj(this,a,b);if(c instanceof dh||c instanceof hh||c instanceof ih)return rj(this,a,b,this.ie);if(c instanceof Zg||c instanceof $g)return rj(this,a,b,this.Hd);throw new D(8);};function rj(a,b,c,d){a=kg(b.hb(),a.gg.bind(a));null!=d&&(a=(new oj(a,c,d)).hc());return new ae(a,b.ca())}
qj.prototype.gg=function(a){if(a instanceof dh)return new dj(a.f,a.Mb);if(a instanceof gh)return new vi(a.f);if(a instanceof fh)return new Lg(a.f);if(a instanceof eh)return new Yi(a.N);if(a instanceof ih)return new fj;if(a instanceof hh)return new Xi;if(a instanceof ah)return new Pi(a.I.Y());if(a instanceof ch)return new ph;if(a instanceof jh)return new xi(this.i,a.I,a.Pb);if(a instanceof bh)return new ti(this.i,a.table);if(a instanceof Zg)return new ri(a.table);if(a instanceof $g)return new pj(a.table,
a.pe);if(a instanceof Yg)return new Wi(this.i,a.table);if(a instanceof Xg)return new Ui(this.i,a.table);throw new D(514);};function sj(a){this.eg=new qi;this.pg=new qj(a)};function tj(){this.Ve=y()}function uj(a,b){var c=a.Ve.get(b.getName())||null;null===c&&(c=new vj,a.Ve.set(b.getName(),c));return c}function wj(a,b,c,d){c.forEach(function(a){a=uj(this,a);0==d?(a.Za=null,a.uc=b):3==d?(null===a.Wb&&(a.Wb=B()),a.Wb.add(b),null===a.Qa&&(a.Qa=B()),a.Qa.delete(b)):1==d?(null===a.Qa&&(a.Qa=B()),a.Qa.add(b)):2==d&&(a.Za=b)},a)}
function xj(a,b,c,d){var e=!0;c.forEach(function(a){if(e){a=uj(this,a);var c=null===a.Qa||0==a.Qa.size;e=0==d?(null===a.Wb||0==a.Wb.size)&&c&&null===a.uc&&null!==a.Za&&a.Za==b:3==d?null===a.uc&&null===a.Za&&null!==a.Qa&&a.Qa.has(b):1==d?null===a.Za:c&&(null===a.Za||a.Za==b)}},a);return e}function yj(a,b,c,d){var e=xj(a,b,c,d);e&&wj(a,b,c,d);return e}tj.prototype.releaseLock=function(a,b){b.forEach(function(b){uj(this,b).releaseLock(a)},this)};
function zj(a,b){b.forEach(function(a){uj(this,a).Za=null},a)}function vj(){this.Wb=this.Qa=this.Za=this.uc=null}vj.prototype.releaseLock=function(a){this.uc==a&&(this.uc=null);this.Za==a&&(this.Za=null);null===this.Qa||this.Qa.delete(a);null===this.Wb||this.Wb.delete(a)};function Aj(){this.Tb=new Bj;this.Cc=new tj}function ke(a,b){(2>b.getPriority()||2>b.getPriority())&&zj(a.Cc,b.ca());a.Tb.zb(b);Cj(a);return b.Lb().da}function Cj(a){for(var b=a.Tb.Fb(),c=0;c<b.length;c++){var d=b[c],e=!1;if(e=0==d.G()?Dj(a,d,1,3):Dj(a,d,2,0))a.Tb.remove(d),e=a,d.exec().then(e.mg.bind(e,d),e.lg.bind(e,d))}}function Dj(a,b,c,d){var e=!1;yj(a.Cc,b.Y(),b.ca(),c)&&(e=yj(a.Cc,b.Y(),b.ca(),d));return e}Aj.prototype.mg=function(a,b){this.Cc.releaseLock(a.Y(),a.ca());a.Lb().resolve(b);Cj(this)};
Aj.prototype.lg=function(a,b){this.Cc.releaseLock(a.Y(),a.ca());a.Lb().reject(b);Cj(this)};function Bj(){this.Tb=[]}Bj.prototype.zb=function(a){gf(this.Tb,a,function(a,c){var d=a.getPriority()-c.getPriority();return 0==d?a.Y()-c.Y():d})};Bj.prototype.Fb=function(){return this.Tb.slice()};Bj.prototype.remove=function(a){var b=this.Tb;a=xa(b,a);var c;(c=0<=a)&&Array.prototype.splice.call(b,a,1);return c};function Ej(a,b){this.Id=Ad.xc();this.de=a;this.hd=b;this.J=Fj(this)}function Fj(a){if(0<a.de.f.length)return a.de.f;var b=[];a.de.c.forEach(function(a){a.gb().forEach(function(a){b.push(a)})});return b}Ej.prototype.V=function(a,b){return this.J.every(function(c){return Gd(this.Id,c.G(),"eq")(H(a,c),H(b,c))},this)};
function Gj(a,b,c){var d=null===b?[]:b.entries,e=pb(d,c.entries,a.V.bind(a),function(a){return d[a]});b=[];for(var f=0,h=0;h<d.length;h++){var k=d[h];e[f]==k?f++:(k=a.hd.splice(f,1),k=Hj(h,k,0,a.hd),b.push(k))}e=pb(d,c.entries,a.V.bind(a),function(a,b){return c.entries[b]});for(h=f=0;h<c.entries.length;h++)k=c.entries[h],e[f]==k?f++:(a.hd.splice(h,0,k.ta.o),k=Hj(h,[],1,a.hd),b.push(k));return b}function Hj(a,b,c,d){return{Fg:c,index:a,object:d,Ig:b,type:"splice"}};function Ij(){this.fc=y()}Ij.prototype.ud=function(a,b){var c=ka(a.a).toString(),d=this.fc.get(c)||null;null===d&&(d=new Jj(a),this.fc.set(c,d));d.ud(b)};Ij.prototype.ee=function(a,b){var c=ka(a.a).toString(),d=this.fc.get(c)||null;d.ee(b);0<d.Ec.size||this.fc.delete(c)};function je(a,b){var c=B();b.forEach(function(a){c.add(a.getName())});var d=[];a.fc.forEach(function(a){a=a.zc();a.context.c.some(function(a){return c.has(a.getName())})&&d.push(a)});return d}
function he(a,b,c){b=ka(null!=b.Uc?b.Uc:b).toString();a=a.fc.get(b)||null;null!==a&&Kj(a,c)}function Jj(a){this.Af=a;this.Ec=B();this.jg=[];this.Te=null;this.If=new Ej(a.a,this.jg)}Jj.prototype.ud=function(a){this.Ec.has(a)||this.Ec.add(a)};Jj.prototype.ee=function(a){return this.Ec.delete(a)};Jj.prototype.zc=function(){var a=this.Af;return{context:a.a,be:Nh(a)}};function Kj(a,b){var c=Gj(a.If,a.Te,b);a.Te=b;0<c.length&&a.Ec.forEach(function(a){a(c)})};function Lj(a,b){var c=a.l(lc),d=b||{},e=new cf(c);a.nb(gc,e);var e=null,f=!1;null!=d.storeType?e=d.storeType:(q(Qb)||(Qb=new Pb),e=Qb,e=e.Vf?0:e.Eg?4:1);switch(e){case 0:e=new Je(a,c);break;case 1:e=new Qe(c);break;case 5:e=new Se(c);break;case 4:e=new $e(a,c,d.webSqlDbSize);break;case 3:e=new we(c,d.firebase);f=!0;break;default:throw new D(300);}a.nb(fc,e);var h=new hg;a.nb(hc,h);return e.Ga(d.onUpgrade).then(function(){var b=new sj(a);a.nb(ic,b);b=new Aj;a.nb(jc,b);b=new Ij;a.nb(kc,b);return h.Ga(c)}).then(function(){if(f){var b=
new le(a);b.Ka.subscribe(b.Xd.bind(b))}return(new ag(a)).Ga(c)})};function Mj(a){this.i=a;this.g=a.l(lc);this.aa=B(this.g.ra());this.$a=x()}m=Mj.prototype;m.exec=function(){var a=this.i.l(hc),b=this.i.l(gc),c={};this.g.ra().forEach(function(d){var f=a.get(Ne(d)).Xa(),f=df(b,f).map(function(a){return a.o});c[d.getName()]=f});var d={name:this.g.name(),version:this.g.version(),tables:c},d=new vd(new Sb(-1,d),!0);return w([new F([d],[])])};m.G=l(0);m.ca=g("aa");m.Lb=g("$a");m.Y=function(){return ka(this)};m.getPriority=l(0);function Nj(a,b){this.i=a;this.g=a.l(lc);this.aa=B(this.g.ra());this.$a=x();this.xa=b;this.Ka=a.l(fc);this.U=a.l(gc);this.D=a.l(hc)}m=Nj.prototype;
m.exec=function(){if(!(this.Ka instanceof Je||this.Ka instanceof Qe||this.Ka instanceof $e))throw new D(300);var a;a:{a=this.g.ra();for(var b=0;b<a.length;++b)if(0<this.D.get(Ne(a[b])).Ma().na){a=!1;break a}a=!0}if(!a)throw new D(110);if(this.g.name()!=this.xa.name||this.g.version()!=this.xa.version)throw new D(111);if(null==this.xa.tables)throw new D(112);return Oj(this)};m.G=l(1);m.ca=g("aa");m.Lb=g("$a");m.Y=function(){return ka(this)};m.getPriority=l(0);
function Oj(a){var b=new ad(a.i,a.aa),b=a.Ka.Cb(a.G(),C(a.aa),b),c;for(c in a.xa.tables){var d=a.g.table(c),e=a.xa.tables[c].map(function(a){return d.vb(a)}),f=b.H(c,d.fb,0);a.U.Vb(c,e);var h=a.D.lc.get(c)||[];e.forEach(function(a){h.forEach(function(b){var c=a.jb(b.getName());b.add(c,a.id())})});f.put(e)}return b.ia()};function Pj(a,b){this.i=a;this.Ka=a.l(fc);this.Ea=a.l(jc);this.Hb=a.l(kc);this.aa=B(b);this.Oa=new ad(this.i,this.aa);this.$a=x();this.vc=x();this.se=x()}m=Pj.prototype;m.exec=function(){this.se.resolve();return this.vc.da};m.G=l(1);m.ca=g("aa");m.Lb=g("$a");m.Y=function(){return ka(this)};m.getPriority=l(2);function Qj(a){ke(a.Ea,a);return a.se.da}
function Rj(a,b){var c=b.zc();return c.be.hb().exec(a.Oa,c.context).then(function(a){return nd(a[0])},function(a){this.Oa.Ib();var b=new jb(a.name);this.vc.reject(b);throw a;}.bind(a))}m.ia=function(){this.Ka.Cb(this.G(),C(this.aa),this.Oa).ia().then(function(){this.Jc();this.vc.resolve()}.bind(this),function(a){this.Oa.Ib();this.vc.reject(a)}.bind(this));return this.$a.da};m.Ib=function(){this.Oa.Ib();this.vc.resolve();return this.$a.da};
m.Jc=function(){var a=je(this.Hb,this.aa);0!=a.length&&(a=new ge(this.i,a),ke(this.Ea,a))};function Sj(a){this.i=a;this.Ea=a.l(jc);this.Nc=null;this.Ra=0;0==Tj.size&&(Tj.set(0,B([1,4])),Tj.set(1,B([2])),Tj.set(2,B([3,5,6])),Tj.set(3,B([2,7])),Tj.set(4,B([7])),Tj.set(5,B([7])),Tj.set(6,B([7])))}r("lf.proc.Transaction",Sj);var Tj=y();function Uj(a,b){var c=Tj.get(a.Ra)||null;if(null===c||!c.has(b))throw new D(107,a.Ra,b);a.Ra=b}
Sj.prototype.exec=function(a){Uj(this,4);var b=[];try{a.forEach(function(a){a.cb();b.push(a.zc())},this)}catch(c){return Uj(this,7),bb(c)}a=new qh(this.i,b);return ke(this.Ea,a).then(function(a){Uj(this,7);return a.map(function(a){return nd(a)})}.bind(this),function(a){Uj(this,7);throw a;}.bind(this))};Sj.prototype.exec=Sj.prototype.exec;Sj.prototype.yf=function(a){Uj(this,1);this.Nc=new Pj(this.i,a);return Qj(this.Nc).then(function(){Uj(this,2)}.bind(this))};Sj.prototype.begin=Sj.prototype.yf;
Sj.prototype.xf=function(a){Uj(this,3);return Rj(this.Nc,a).then(function(a){Uj(this,2);return a}.bind(this),function(a){Uj(this,7);throw a;}.bind(this))};Sj.prototype.attach=Sj.prototype.xf;Sj.prototype.ia=function(){Uj(this,5);return this.Nc.ia().then(function(){Uj(this,7)}.bind(this))};Sj.prototype.commit=Sj.prototype.ia;Sj.prototype.Ib=function(){Uj(this,6);return this.Nc.Ib().then(function(){Uj(this,7)}.bind(this))};Sj.prototype.rollback=Sj.prototype.Ib;function W(a){this.i=a;this.g=a.l(lc);this.fd=!1}r("lf.proc.Database",W);W.prototype.Ga=function(a){this.i.nb(lc,this.g);return Lj(this.i,a).then(function(){this.fd=!0;this.Ea=this.i.l(jc);return this}.bind(this))};W.prototype.init=W.prototype.Ga;W.prototype.xb=g("g");W.prototype.getSchema=W.prototype.xb;function Vj(a){if(!a.fd)throw new D(2);}W.prototype.select=function(a){Vj(this);return new V(this.i,1!=arguments.length||null!=arguments[0]?Array.prototype.slice.call(arguments):[])};
W.prototype.select=W.prototype.select;W.prototype.zb=function(){Vj(this);return new Ph(this.i)};W.prototype.insert=W.prototype.zb;W.prototype.Od=function(){Vj(this);return new Ph(this.i,!0)};W.prototype.insertOrReplace=W.prototype.Od;W.prototype.update=function(a){Vj(this);return new Zh(this.i,a)};W.prototype.update=W.prototype.update;W.prototype.delete=function(){Vj(this);return new Oh(this.i)};W.prototype["delete"]=W.prototype.delete;
W.prototype.observe=function(a,b){Vj(this);this.i.l(kc).ud(a,b)};W.prototype.observe=W.prototype.observe;W.prototype.unobserve=function(a,b){Vj(this);this.i.l(kc).ee(a,b)};W.prototype.unobserve=W.prototype.unobserve;W.prototype.Gf=function(){Vj(this);return new Sj(this.i)};W.prototype.createTransaction=W.prototype.Gf;W.prototype.close=function(){try{this.i.l(fc).close()}catch(a){}this.i.clear();this.fd=!1};W.prototype.close=W.prototype.close;
W.prototype.Of=function(){Vj(this);var a=new Mj(this.i);return ke(this.Ea,a).then(function(a){return nd(a[0])[0]})};W.prototype["export"]=W.prototype.Of;W.prototype.import=function(a){Vj(this);a=new Nj(this.i,a);return ke(this.Ea,a).then(l(null))};W.prototype["import"]=W.prototype.import;function X(a,b,c,d,e,f){this.S=a;this.u=b;this.Pe=c;this.Ne=d;this.qf=e;this.bb=f||null}r("lf.schema.BaseColumn",X);m=X.prototype;m.getName=g("u");m.m=function(){return I(this.S)+"."+this.u};m.toString=function(){return this.m()};m.H=g("S");m.G=g("qf");X.prototype.getType=X.prototype.G;X.prototype.Wa=g("bb");X.prototype.Aa=function(){null==this.pa&&(this.pa=[],this.H().Aa().forEach(function(a){-1!=a.f.map(function(a){return a.ba.getName()}).indexOf(this.u)&&this.pa.push(a)},this));return this.pa};
X.prototype.za=function(){if(!q(this.ga)){var a=this.Aa().filter(function(a){return 1!=a.f.length?!1:a.f[0].ba.getName()==this.getName()},this);this.ga=0<a.length?a[0]:null}return this.ga};X.prototype.ic=g("Ne");X.prototype.isNullable=X.prototype.ic;X.prototype.Bc=g("Pe");X.prototype.Na=function(a){return Bg(this,a,"eq")};X.prototype.eq=X.prototype.Na;X.prototype.We=function(a){return Bg(this,a,"neq")};X.prototype.neq=X.prototype.We;X.prototype.Td=function(a){return Bg(this,a,"lt")};
X.prototype.lt=X.prototype.Td;X.prototype.fg=function(a){return Bg(this,a,"lte")};X.prototype.lte=X.prototype.fg;X.prototype.Qf=function(a){return Bg(this,a,"gt")};X.prototype.gt=X.prototype.Qf;X.prototype.Rf=function(a){return Bg(this,a,"gte")};X.prototype.gte=X.prototype.Rf;X.prototype.match=function(a){return Bg(this,a,"match")};X.prototype.match=X.prototype.match;X.prototype.zf=function(a,b){return Bg(this,[a,b],"between")};X.prototype.between=X.prototype.zf;
X.prototype.Sf=function(a){return Bg(this,a,"in")};X.prototype["in"]=X.prototype.Sf;X.prototype.ag=function(){return this.Na(null)};X.prototype.isNull=X.prototype.ag;X.prototype.$f=function(){return this.We(null)};X.prototype.isNotNull=X.prototype.$f;X.prototype.pc=function(a){return new X(this.S,this.u,this.Pe,this.Ne,this.qf,a)};X.prototype.as=X.prototype.pc;function Wj(){this.pd=y()}var Xj;Wj.prototype.clear=function(){this.pd.clear()};Wj.prototype.clear=Wj.prototype.clear;Wj.prototype.nb=function(a,b){this.pd.set(a.toString(),b);return b};Wj.prototype.registerService=Wj.prototype.nb;Wj.prototype.l=function(a){var b=this.pd.get(a.toString())||null;if(null===b)throw new D(7,a.toString());return b};Wj.prototype.getService=Wj.prototype.l;Wj.prototype.Rd=function(a){return this.pd.has(a.toString())};Wj.prototype.isRegistered=Wj.prototype.Rd;function Yj(a){this.g=a;this.Ad=new Ic;this.fe=new Ic;this.Ye=new Ic;this.Be=y();this.h=new Ic;this.xe=new Ic;this.ef=new Ic;this.Ae=new Ic;Zj(this)}function Zj(a){a.g.ra().forEach(function(a){var c=a.getName();a.Eb().Nd().forEach(function(d){this.Ye.set(c,this.g.table(d.Pa));this.h.set(d.Pa,a);0==d.action?(this.fe.set(d.Pa,d),this.ef.set(d.Pa,a)):(this.Ad.set(d.Pa,d),this.xe.set(d.Pa,a));this.Be.set(a.getName()+"."+d.tb,d.Pa);this.Ae.set(d.Pa+"."+d.Gc,a.getName())},this)},a)}
function Rc(a,b,c){if(null!=c)return 1==c?a.Ad.get(b):a.fe.get(b);c=a.Ad.get(b);a=a.fe.get(b);return null===c&&null===a?null:(c||[]).concat(a||[])}function wh(a,b){var c=b.get(a);return null===c?[]:c}function yh(a,b){var c=B();b.forEach(function(a){(a=this.Be.get(a))&&c.add(a)},a);return C(c).map(function(a){return this.g.table(a)},a)}function uh(a,b,c){return null!=c?0==c?wh(b,a.ef):wh(b,a.xe):wh(b,a.h)}
function zh(a,b){var c=B();b.forEach(function(a){(a=this.Ae.get(a))&&a.forEach(function(a){c.add(a)})},a);return C(c).map(function(a){return this.g.table(a)},a)};function ak(a,b,c){this.qg=a;this.ig=b;this.Pf=c}r("lf.schema.Constraint",ak);ak.prototype.$c=g("qg");ak.prototype.getPrimaryKey=ak.prototype.$c;ak.prototype.Nd=g("Pf");ak.prototype.getForeignKeys=ak.prototype.Nd;function bk(a,b,c){var d=a.ref.split(".");if(2!=d.length)throw new D(540,c);this.ze=b;this.tb=a.local;this.Pa=d[0];this.Gc=d[1];this.name=b+"."+c;this.action=a.action;this.timing=a.timing};function Y(a){ck(a);this.Id=Ad.xc();this.u=a;this.J=y();this.rd=B();this.mc=B();this.gd=B();this.Ba=null;this.pa=y();this.ld=!1;this.wb=[]}r("lf.schema.TableBuilder",Y);function dk(a){this.name=a.name;this.lb=a.order;this.autoIncrement=a.autoIncrement}var ek=B([0,6]);function ck(a){if(!/^[A-Za-z_][A-Za-z0-9_]*$/.test(a))throw new D(502,a);}function fk(a,b){if(b==a.u)throw new D(546,b);if(a.J.has(b)||a.pa.has(b)||a.mc.has(b))throw new D(503,a.u+"."+b);}
function gk(a,b){var c=!1;b.forEach(function(a){var b=this.J.get(a.name);c=c||a.autoIncrement;if(a.autoIncrement&&3!=b)throw new D(504);},a);if(c&&1<b.length)throw new D(505);}function hk(a){if(null!==a.Ba){var b=a.pa.get(a.Ba).map(function(a){return a.name}),c=0;if(a.wb.some(function(a,e){c=e;return-1!=b.indexOf(a.tb)},a))throw new D(543,a.wb[c].name);}}
function ik(a){if(null!==a.Ba){var b=function(a){return a.name},c=JSON.stringify(a.pa.get(a.Ba).map(b));a.pa.forEach(function(a,e){if(e!=this.Ba){var f=a.map(b);if(JSON.stringify(f)==c)throw new D(544,this.u+"."+e);}},a)}}function jk(a){null===a.Ba||a.pa.get(a.Ba).forEach(function(a){if(this.gd.has(a.name))throw new D(545,this.u+"."+a.name);},a)}Y.prototype.sf=function(a,b){ck(a);fk(this,a);this.J.set(a,b);ek.has(b)&&this.ue([a]);return this};Y.prototype.addColumn=Y.prototype.sf;
Y.prototype.uf=function(a,b){var c=this.u;this.Ba="pk"+(c[0].toUpperCase()+c.substring(1));ck(this.Ba);fk(this,this.Ba);c=kk(this,a,!0,void 0,b);gk(this,c);1==c.length&&this.rd.add(c[0].name);this.mc.add(this.Ba);this.pa.set(this.Ba,c);return this};Y.prototype.addPrimaryKey=Y.prototype.uf;
Y.prototype.tf=function(a,b){ck(a);fk(this,a);var c=new bk(b,this.u,a);q(c.action)||(c.action=0);q(c.timing)||(c.timing=0);if(1==c.action&&1==c.timing)throw new D(506);if(!this.J.has(c.tb))throw new D(540,a);this.wb.push(c);this.te(a,[c.tb],this.rd.has(c.tb));return this};Y.prototype.addForeignKey=Y.prototype.tf;Y.prototype.vf=function(a,b){ck(a);fk(this,a);var c=kk(this,b,!0);1==c.length&&(this.rd.add(c[0].name),lk(this,c[0].name));this.pa.set(a,c);this.mc.add(a);return this};
Y.prototype.addUnique=Y.prototype.vf;function lk(a,b){a.wb.forEach(function(a){a.tb==b&&this.mc.add(a.name.split(".")[1])},a)}Y.prototype.ue=function(a){kk(this,a,!1).forEach(function(a){this.gd.add(a.name)},this);return this};Y.prototype.addNullable=Y.prototype.ue;Y.prototype.te=function(a,b,c,d){ck(a);fk(this,a);b=kk(this,b,!0,d);c&&this.mc.add(a);this.pa.set(a,b);return this};Y.prototype.addIndex=Y.prototype.te;Y.prototype.Bb=ca("ld");Y.prototype.persistentIndex=Y.prototype.Bb;
Y.prototype.xb=function(){hk(this);ik(this);jk(this);return new (mk(this))};Y.prototype.getSchema=Y.prototype.xb;function nk(a){return a.wb}function kk(a,b,c,d,e){var f=b,f="string"==typeof b[0]?b.map(function(a){return new dk({name:a,order:null!=d?d:1,autoIncrement:e||!1})}):b.map(function(a){return new dk(a)});f.forEach(function(a){if(!this.J.has(a.name))throw new D(508,this.u,a.name);if(c){var b=this.J.get(a.name);if(0==b||6==b)throw new D(509,this.u,a.name);}},a);return f}
function mk(a){function b(){function b(c){return a.pa.get(c).map(function(a){return{ba:this[a.name],lb:a.lb,autoIncrement:a.autoIncrement}},this)}var d=Rb(a.J).map(function(b){this[b]=new X(this,b,a.rd.has(b),a.gd.has(b),a.J.get(b));return this[b]},this),e=Rb(a.pa).map(function(d){return new Dg(a.u,d,a.mc.has(d),b.call(this,d))},this);R.call(this,a.u,d,e,a.ld);var f=null===a.Ba?null:new Dg(a.u,a.Ba,!0,b.call(this,a.Ba)),h=d.filter(function(b){return!a.gd.has(b.getName())});this.Cf=new ak(f,h,a.wb);
this.hf=ok(a,d,e)}t(b,R);b.prototype.vb=function(a){return new this.hf(Tb++,a)};b.prototype.createRow=b.prototype.vb;b.prototype.fb=function(a){var b={};this.gb().forEach(function(e){var f=e.getName();e=e.G();var h=a.value[f];if(0==e)if(e=h,null!=e&&""!=e){0!=e.length%2&&(e="0"+e);for(var h=new ArrayBuffer(e.length/2),k=new Uint8Array(h),n=0,A=0;n<e.length;n+=2)k[A++]=parseInt(e.substr(n,2),16);e=h}else e=null;else e=2==e?null!=h?new Date(h):null:h;b[f]=e},this);return new this.hf(a.id,b)};b.prototype.deserializeRow=
b.prototype.fb;b.prototype.Eb=g("Cf");b.prototype.getConstraint=b.prototype.Eb;return b}
function ok(a,b,c){function d(a,d){this.J=b;this.pa=c;Sb.call(this,a,d)}t(d,Sb);d.prototype.De=function(){var a={};this.J.forEach(function(b){a[b.getName()]=b.ic()?null:Hc[b.G()]});return a};d.prototype.pf=function(){var a={};this.J.forEach(function(b){var c=b.getName();b=b.G();var d=this.o[c];a[c]=0==b?null!=d?Wb(d):null:2==b?null!=d?d.getTime():null:6==b?null!=d?d:null:d},this);return a};var e=function(a){var b=this.J.get(a.getName()),c=this.Id.Qe.get(b)||null;return function(b){return c(b[a.getName()])}}.bind(a),
f=function(a){var b=a.map(function(a){return e(a.ba)});return function(a){return b.map(function(b){return b(a)})}}.bind(a),h={};c.forEach(function(a){var b=a.m();a=1==a.f.length?e(a.f[0].ba):f(a.f);h[b]=a});d.prototype.jb=function(a){return-1!=a.indexOf("#")?this.id():h.hasOwnProperty(a)?h[a](this.o):null};return d};function pk(a,b){this.g=new Z(a,b);this.rb=y();this.wc=!1;this.j=null}r("lf.schema.Builder",pk);function qk(a,b){b.wb.forEach(function(a){var d=a.Pa;if(!this.rb.has(d))throw new D(536,a.name);var d=this.rb.get(d).xb(),e=a.Gc;if(!d.hasOwnProperty(e))throw new D(537,a.name);if(b.xb()[a.tb].G()!=d[e].G())throw new D(538,a.name);if(!d[e].Bc())throw new D(539,a.name);},a)}
pk.prototype.Bf=function(a){a.wb.forEach(function(a){nk(this.rb.get(a.Pa)).forEach(function(c){if(c.tb==a.Gc)throw new D(534,a.name);},this)},this)};function rk(a){a.wc||(a.rb.forEach(function(a){qk(this,a);a=a.xb();this.g.L.set(a.getName(),a)},a),z(a.rb).forEach(a.Bf,a),sk(a),a.rb.clear(),a.wc=!0)}function tk(a,b,c){b.qe||(b.qe=!0,b.Yd=!0,b.Ee.forEach(function(a){a=c.get(a);if(!a.qe)tk(this,a,c);else if(a.Yd&&b!=a)throw new D(533);},a));b.Yd=!1}
function sk(a){var b=y();a.g.L.forEach(function(a,d){b.set(d,new uk(d))},a);a.rb.forEach(function(a,d){a.wb.forEach(function(a){b.get(a.Pa).Ee.add(d)})});z(b).forEach(function(a){tk(this,a,b)},a)}function uk(a){this.Yd=this.qe=!1;this.Ee=B();this.Lc=a}pk.prototype.xb=function(){this.wc||rk(this);return this.g};pk.prototype.getSchema=pk.prototype.xb;pk.prototype.Ge=function(){var a=new ec("ns_"+this.g.name()),b;Xj||(Xj=new Wj);b=Xj;var c=null;b.Rd(a)?c=b.l(a):(c=new Wj,b.nb(a,c));return c};
pk.prototype.getGlobal=pk.prototype.Ge;pk.prototype.connect=function(a){if(null!==this.j&&this.j.fd)throw new D(113);if(null===this.j){var b=this.Ge();b.Rd(lc)||b.nb(lc,this.xb());this.j=new W(b)}return this.j.Ga(a)};pk.prototype.connect=pk.prototype.connect;pk.prototype.Ff=function(a){if(this.rb.has(a))throw new D(503,a);if(this.wc)throw new D(535);this.rb.set(a,new Y(a));return this.rb.get(a)};pk.prototype.createTable=pk.prototype.Ff;
pk.prototype.je=function(a){if(this.wc)throw new D(535);this.g.je(a);return this};pk.prototype.setPragma=pk.prototype.je;function Z(a,b){this.u=a;this.Zb=b;this.L=y();this.bf={Jf:!1}}r("lf.schema.DatabaseSchema",Z);Z.prototype.name=g("u");Z.prototype.name=Z.prototype.name;Z.prototype.version=g("Zb");Z.prototype.version=Z.prototype.version;Z.prototype.ra=function(){return z(this.L)};Z.prototype.tables=Z.prototype.ra;Z.prototype.table=function(a){if(!this.L.has(a))throw new D(101,a);return this.L.get(a)};
Z.prototype.table=Z.prototype.table;Z.prototype.info=function(){this.Le||(this.Le=new Yj(this));return this.Le};Z.prototype.af=g("bf");Z.prototype.pragma=Z.prototype.af;Z.prototype.je=ca("bf");r("lf.schema.create",function(a,b){return new pk(a,b)});v.prototype.catch=v.prototype.me;v.prototype["catch"]=v.prototype.catch;
try{if(module){module.exports=lf;}}catch(e){}}.bind(window))()
//# sourceMappingURL=lovefield.es6.js.map
