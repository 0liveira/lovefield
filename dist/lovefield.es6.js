if(!self.window){window=this;}
(function(){'use strict';function aa(){return function(){}}function ba(a){return function(b){this[a]=b}}function g(a){return function(){return this[a]}}function l(a){return function(){return a}}var m,p=this;function q(a){return void 0!==a}function da(){}
function ea(a){var b=typeof a;if("object"==b)if(a){if(a instanceof Array)return"array";if(a instanceof Object)return b;var c=Object.prototype.toString.call(a);if("[object Window]"==c)return"object";if("[object Array]"==c||"number"==typeof a.length&&"undefined"!=typeof a.splice&&"undefined"!=typeof a.propertyIsEnumerable&&!a.propertyIsEnumerable("splice"))return"array";if("[object Function]"==c||"undefined"!=typeof a.call&&"undefined"!=typeof a.propertyIsEnumerable&&!a.propertyIsEnumerable("call"))return"function"}else return"null";
else if("function"==b&&"undefined"==typeof a.call)return"object";return b}function fa(a){return null===a}function ga(a){return null!=a}function ha(a){var b=ea(a);return"array"==b||"object"==b&&"number"==typeof a.length}function ia(a){return"string"==typeof a}function ja(a){return"function"==ea(a)}function ka(a){return a[la]||(a[la]=++ma)}var la="closure_uid_"+(1E9*Math.random()>>>0),ma=0;function na(a,b,c){return a.call.apply(a.bind,arguments)}
function oa(a,b,c){if(!a)throw Error();if(2<arguments.length){var d=Array.prototype.slice.call(arguments,2);return function(){var c=Array.prototype.slice.call(arguments);Array.prototype.unshift.apply(c,d);return a.apply(b,c)}}return function(){return a.apply(b,arguments)}}function pa(a,b,c){pa=Function.prototype.bind&&-1!=Function.prototype.bind.toString().indexOf("native code")?na:oa;return pa.apply(null,arguments)}
function qa(a,b){var c=Array.prototype.slice.call(arguments,1);return function(){var b=c.slice();b.push.apply(b,arguments);return a.apply(this,b)}}function r(a,b){var c=a.split("."),d=p;c[0]in d||!d.execScript||d.execScript("var "+c[0]);for(var e;c.length&&(e=c.shift());)!c.length&&q(b)?d[e]=b:d=d[e]?d[e]:d[e]={}}
function t(a,b){function c(){}c.prototype=b.prototype;a.ab=b.prototype;a.prototype=new c;a.prototype.constructor=a;a.Jg=function(a,c,f){for(var h=Array(arguments.length-2),k=2;k<arguments.length;k++)h[k-2]=arguments[k];return b.prototype[c].apply(a,h)}};function ra(a){if(Error.captureStackTrace)Error.captureStackTrace(this,ra);else{var b=Error().stack;b&&(this.stack=b)}a&&(this.message=String(a))}t(ra,Error);ra.prototype.name="CustomError";var sa=String.prototype.trim?function(a){return a.trim()}:function(a){return a.replace(/^[\s\xa0]+|[\s\xa0]+$/g,"")};
function ta(a){var b=0,c=sa(String(ua)).split(".");a=sa(String(a)).split(".");for(var d=Math.max(c.length,a.length),e=0;0==b&&e<d;e++){var f=c[e]||"",h=a[e]||"",k=/(\d*)(\D*)/g,n=/(\d*)(\D*)/g;do{var A=k.exec(f)||["","",""],O=n.exec(h)||["","",""];if(0==A[0].length&&0==O[0].length)break;b=va(0==A[1].length?0:parseInt(A[1],10),0==O[1].length?0:parseInt(O[1],10))||va(0==A[2].length,0==O[2].length)||va(A[2],O[2])}while(0==b)}return b}function va(a,b){return a<b?-1:a>b?1:0};function wa(a,b,c){this.fg=c;this.If=a;this.yg=b;this.kd=0;this.cd=null}wa.prototype.get=function(){var a;0<this.kd?(this.kd--,a=this.cd,this.cd=a.next,a.next=null):a=this.If();return a};wa.prototype.put=function(a){this.yg(a);this.kd<this.fg&&(this.kd++,a.next=this.cd,this.cd=a)};var xa=Array.prototype,ya=xa.indexOf?function(a,b,c){return xa.indexOf.call(a,b,c)}:function(a,b,c){c=null==c?0:0>c?Math.max(0,a.length+c):c;if(ia(a))return ia(b)&&1==b.length?a.indexOf(b,c):-1;for(;c<a.length;c++)if(c in a&&a[c]===b)return c;return-1},za=xa.forEach?function(a,b,c){xa.forEach.call(a,b,c)}:function(a,b,c){for(var d=a.length,e=ia(a)?a.split(""):a,f=0;f<d;f++)f in e&&b.call(c,e[f],f,a)},Aa=xa.map?function(a,b,c){return xa.map.call(a,b,c)}:function(a,b,c){for(var d=a.length,e=Array(d),
f=ia(a)?a.split(""):a,h=0;h<d;h++)h in f&&(e[h]=b.call(c,f[h],h,a));return e},Ba=xa.reduce?function(a,b,c,d){d&&(b=pa(b,d));return xa.reduce.call(a,b,c)}:function(a,b,c,d){var e=c;za(a,function(c,h){e=b.call(d,e,c,h,a)});return e},Ca=xa.some?function(a,b,c){return xa.some.call(a,b,c)}:function(a,b,c){for(var d=a.length,e=ia(a)?a.split(""):a,f=0;f<d;f++)if(f in e&&b.call(c,e[f],f,a))return!0;return!1};function Da(a,b,c){return 2>=arguments.length?xa.slice.call(a,b):xa.slice.call(a,b,c)}
function Ea(a){for(var b=[],c=0;c<a;c++)b[c]=0;return b}function Fa(a){for(var b=[],c=0;c<arguments.length;c++){var d=arguments[c];if("array"==ea(d))for(var e=0;e<d.length;e+=8192)for(var f=Fa.apply(null,Da(d,e,e+8192)),h=0;h<f.length;h++)b.push(f[h]);else b.push(d)}return b};var Ga;a:{var Ha=p.navigator;if(Ha){var Ia=Ha.userAgent;if(Ia){Ga=Ia;break a}}Ga=""}function u(a){return-1!=Ga.indexOf(a)};function Ka(){return u("Opera")||u("OPR")}function La(){return(u("Chrome")||u("CriOS"))&&!Ka()&&!u("Edge")};function Ma(a){p.setTimeout(function(){throw a;},0)}var Na;
function Oa(){var a=p.MessageChannel;"undefined"===typeof a&&"undefined"!==typeof window&&window.postMessage&&window.addEventListener&&!u("Presto")&&(a=function(){var a=document.createElement("IFRAME");a.style.display="none";a.src="";document.documentElement.appendChild(a);var b=a.contentWindow,a=b.document;a.open();a.write("");a.close();var c="callImmediate"+Math.random(),d="file:"==b.location.protocol?"*":b.location.protocol+"//"+b.location.host,a=pa(function(a){if(("*"==d||a.origin==d)&&a.data==
c)this.port1.onmessage()},this);b.addEventListener("message",a,!1);this.port1={};this.port2={postMessage:function(){b.postMessage(c,d)}}});if("undefined"!==typeof a&&!u("Trident")&&!u("MSIE")){var b=new a,c={},d=c;b.port1.onmessage=function(){if(q(c.next)){c=c.next;var a=c.ze;c.ze=null;a()}};return function(a){d.next={ze:a};d=d.next;b.port2.postMessage(0)}}return"undefined"!==typeof document&&"onreadystatechange"in document.createElement("SCRIPT")?function(a){var b=document.createElement("SCRIPT");
b.onreadystatechange=function(){b.onreadystatechange=null;b.parentNode.removeChild(b);b=null;a();a=null};document.documentElement.appendChild(b)}:function(a){p.setTimeout(a,0)}};function Pa(){this.td=this.nc=null}var Ra=new wa(function(){return new Qa},function(a){a.reset()},100);Pa.prototype.add=function(a,b){var c=Ra.get();c.set(a,b);this.td?this.td.next=c:this.nc=c;this.td=c};Pa.prototype.remove=function(){var a=null;this.nc&&(a=this.nc,this.nc=this.nc.next,this.nc||(this.td=null),a.next=null);return a};function Qa(){this.next=this.scope=this.Ld=null}Qa.prototype.set=function(a,b){this.Ld=a;this.scope=b;this.next=null};
Qa.prototype.reset=function(){this.next=this.scope=this.Ld=null};function Sa(a,b){Ta||Ua();Va||(Ta(),Va=!0);Wa.add(a,b)}var Ta;function Ua(){if(p.Promise&&p.Promise.resolve){var a=p.Promise.resolve(void 0);Ta=function(){a.then(Xa)}}else Ta=function(){var a=Xa;!ja(p.setImmediate)||p.Window&&p.Window.prototype&&p.Window.prototype.setImmediate==p.setImmediate?(Na||(Na=Oa()),Na(a)):p.setImmediate(a)}}var Va=!1,Wa=new Pa;function Xa(){for(var a=null;a=Wa.remove();){try{a.Ld.call(a.scope)}catch(b){Ma(b)}Ra.put(a)}Va=!1};function v(a,b){this.Sa=0;this.hf=void 0;this.Sc=this.dc=this.F=null;this.bd=this.Jd=!1;if(a!=da)try{var c=this;a.call(b,function(a){Ya(c,2,a)},function(a){Ya(c,3,a)})}catch(d){Ya(this,3,d)}}function Za(){this.next=this.context=this.jc=this.Ec=this.child=null;this.wd=!1}Za.prototype.reset=function(){this.context=this.jc=this.Ec=this.child=null;this.wd=!1};var $a=new wa(function(){return new Za},function(a){a.reset()},100);function ab(a,b,c){var d=$a.get();d.Ec=a;d.jc=b;d.context=c;return d}
function w(a){if(a instanceof v)return a;var b=new v(da);Ya(b,2,a);return b}function bb(a){return new v(function(b,c){c(a)})}function cb(a,b,c){db(a,b,c,null)||Sa(qa(b,a))}function eb(a){return new v(function(b,c){var d=a.length,e=[];if(d)for(var f=function(a,c){d--;e[a]=c;0==d&&b(e)},h=function(a){c(a)},k=0,n;k<a.length;k++)n=a[k],cb(n,qa(f,k),h);else b(e)})}function x(){var a,b,c=new v(function(c,e){a=c;b=e});return new fb(c,a,b)}
v.prototype.then=function(a,b,c){return gb(this,ja(a)?a:null,ja(b)?b:null,c)};v.prototype.then=v.prototype.then;v.prototype.$goog_Thenable=!0;v.prototype.ne=function(a,b){return gb(this,null,a,b)};function hb(a,b){a.dc||2!=a.Sa&&3!=a.Sa||ib(a);a.Sc?a.Sc.next=b:a.dc=b;a.Sc=b}
function gb(a,b,c,d){var e=ab(null,null,null);e.child=new v(function(a,h){e.Ec=b?function(c){try{var e=b.call(d,c);a(e)}catch(A){h(A)}}:a;e.jc=c?function(b){try{var e=c.call(d,b);!q(e)&&b instanceof jb?h(b):a(e)}catch(A){h(A)}}:h});e.child.F=a;hb(a,e);return e.child}v.prototype.Eg=function(a){this.Sa=0;Ya(this,2,a)};v.prototype.Fg=function(a){this.Sa=0;Ya(this,3,a)};
function Ya(a,b,c){0==a.Sa&&(a==c&&(b=3,c=new TypeError("Promise cannot resolve to itself")),a.Sa=1,db(c,a.Eg,a.Fg,a)||(a.hf=c,a.Sa=b,a.F=null,ib(a),3!=b||c instanceof jb||kb(a,c)))}function db(a,b,c,d){if(a instanceof v)return hb(a,ab(b||da,c||null,d)),!0;var e;if(a)try{e=!!a.$goog_Thenable}catch(h){e=!1}else e=!1;if(e)return a.then(b,c,d),!0;e=typeof a;if("object"==e&&null!=a||"function"==e)try{var f=a.then;if(ja(f))return lb(a,f,b,c,d),!0}catch(h){return c.call(d,h),!0}return!1}
function lb(a,b,c,d,e){function f(a){k||(k=!0,d.call(e,a))}function h(a){k||(k=!0,c.call(e,a))}var k=!1;try{b.call(a,h,f)}catch(n){f(n)}}function ib(a){a.Jd||(a.Jd=!0,Sa(a.Nf,a))}function mb(a){var b=null;a.dc&&(b=a.dc,a.dc=b.next,b.next=null);a.dc||(a.Sc=null);return b}
v.prototype.Nf=function(){for(var a=null;a=mb(this);){var b=this.Sa,c=this.hf;if(3==b&&a.jc&&!a.wd)for(var d=void 0,d=this;d&&d.bd;d=d.F)d.bd=!1;if(a.child)a.child.F=null,nb(a,b,c);else try{a.wd?a.Ec.call(a.context):nb(a,b,c)}catch(e){ob.call(null,e)}$a.put(a)}this.Jd=!1};function nb(a,b,c){2==b?a.Ec.call(a.context,c):a.jc&&a.jc.call(a.context,c)}function kb(a,b){a.bd=!0;Sa(function(){a.bd&&ob.call(null,b)})}var ob=Ma;function jb(a){ra.call(this,a)}t(jb,ra);jb.prototype.name="cancel";
function fb(a,b,c){this.da=a;this.resolve=b;this.reject=c};function pb(a,b,c,d){c=c||function(a,b){return a==b};d=d||function(b){return a[b]};for(var e=a.length,f=b.length,h=[],k=0;k<e+1;k++)h[k]=[],h[k][0]=0;for(var n=0;n<f+1;n++)h[0][n]=0;for(k=1;k<=e;k++)for(n=1;n<=f;n++)c(a[k-1],b[n-1])?h[k][n]=h[k-1][n-1]+1:h[k][n]=Math.max(h[k-1][n],h[k][n-1]);for(var A=[],k=e,n=f;0<k&&0<n;)c(a[k-1],b[n-1])?(A.unshift(d(k-1,n-1)),k--,n--):h[k-1][n]>h[k][n-1]?k--:n--;return A}function qb(a){return Ba(arguments,function(a,c){return a+c},0)}
function rb(a){return qb.apply(null,arguments)/arguments.length}function sb(a){var b=arguments.length;if(2>b)return 0;var c=rb.apply(null,arguments);return qb.apply(null,Aa(arguments,function(a){return Math.pow(a-c,2)}))/(b-1)}function tb(a){return Math.sqrt(sb.apply(null,arguments))};var ub="StopIteration"in p?p.StopIteration:{message:"StopIteration",stack:""};function xb(){}xb.prototype.next=function(){throw ub;};xb.prototype.se=function(){return this};function yb(a){if(a instanceof xb)return a;if("function"==typeof a.se)return a.se(!1);if(ha(a)){var b=0,c=new xb;c.next=function(){for(;;){if(b>=a.length)throw ub;if(b in a)return a[b++];b++}};return c}throw Error("Not implemented");}
function zb(a,b){if(ha(a))try{za(a,b,void 0)}catch(c){if(c!==ub)throw c;}else{a=yb(a);try{for(;;)b.call(void 0,a.next(),void 0,a)}catch(c){if(c!==ub)throw c;}}}function Ab(a){if(Ca(arguments,function(a){return!a.length})||!arguments.length)return new xb;var b=new xb,c=arguments,d=Ea(c.length);b.next=function(){if(d){for(var a=Aa(d,function(a,b){return c[b][a]}),b=d.length-1;0<=b;b--){if(d[b]<c[b].length-1){d[b]++;break}if(0==b){d=null;break}d[b]=0}return a}throw ub;};return b};function Bb(a){Cb(a);return a.b.concat()}function Cb(a){if(a.Ef!=a.b.length){for(var b=0,c=0;b<a.b.length;){var d=a.b[b];Db(a.Z,d)&&(a.b[c++]=d);b++}a.b.length=c}if(a.Ef!=a.b.length){for(var e={},c=b=0;b<a.b.length;)d=a.b[b],Db(e,d)||(a.b[c++]=d,e[d]=1),b++;a.b.length=c}}function Db(a,b){return Object.prototype.hasOwnProperty.call(a,b)};function Eb(){return u("iPhone")&&!u("iPod")&&!u("iPad")};var Fb=Ka(),Gb=u("Trident")||u("MSIE"),Hb=u("Edge"),Ib=u("Gecko")&&!(-1!=Ga.toLowerCase().indexOf("webkit")&&!u("Edge"))&&!(u("Trident")||u("MSIE"))&&!u("Edge"),Jb=-1!=Ga.toLowerCase().indexOf("webkit")&&!u("Edge");function Kb(){var a=Ga;if(Ib)return/rv\:([^\);]+)(\)|;)/.exec(a);if(Hb)return/Edge\/([\d\.]+)/.exec(a);if(Gb)return/\b(?:MSIE|rv)[: ]([^\);]+)(\)|;)/.exec(a);if(Jb)return/WebKit\/(\S+)/.exec(a)}
var ua=function(){if(Fb&&p.opera){var a;var b=p.opera.version;try{a=b()}catch(c){a=b}return a}a="";(b=Kb())&&(a=b?b[1]:"");return Gb&&(b=(b=p.document)?b.documentMode:void 0,b>parseFloat(a))?String(b):a}(),Lb={};var Mb=Eb()||u("iPod"),Nb=u("iPad");!u("Android")||La()||u("Firefox")||Ka();var Ob=La(),Pb=u("Safari")&&!(La()||u("Coast")||Ka()||u("Edge")||u("Silk")||u("Android"))&&!(Eb()||u("iPad")||u("iPod"));/*

 Copyright 2015 The Lovefield Project Authors. All Rights Reserved.

 Licensed under the Apache License, Version 2.0 (the "License");
 you may not use this file except in compliance with the License.
 You may obtain a copy of the License at

     http://www.apache.org/licenses/LICENSE-2.0

 Unless required by applicable law or agreed to in writing, software
 distributed under the License is distributed on an "AS IS" BASIS,
 WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 See the License for the specific language governing permissions and
 limitations under the License.
*/
function Qb(){this.zg=Pb||Nb||Mb;this.Xf=!(this.zg||Gb&&!Lb[10]&&!(Lb[10]=0<=ta(10)));!Gb||Lb[11]||(Lb[11]=0<=ta(11));this.Hg=Ob||Pb}var Rb;function y(){return new window.Map}function Sb(a){var b=0,c=Array(a.size);a.forEach(function(a,e){c[b++]=e});return c}function z(a){var b=0,c=Array(a.size);a.forEach(function(a){c[b++]=a});return c};/*

 Copyright 2014 The Lovefield Project Authors. All Rights Reserved.

 Licensed under the Apache License, Version 2.0 (the "License");
 you may not use this file except in compliance with the License.
 You may obtain a copy of the License at

     http://www.apache.org/licenses/LICENSE-2.0

 Unless required by applicable law or agreed to in writing, software
 distributed under the License is distributed on an "AS IS" BASIS,
 WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 See the License for the specific language governing permissions and
 limitations under the License.
*/
function Tb(a,b){this.pa=a;this.o=b||this.Ee()}var Ub=0;m=Tb.prototype;m.id=g("pa");m.Ee=function(){return{}};m.qf=g("o");m.Fa=function(){return{id:this.pa,value:this.qf()}};m.kb=function(a){return"#"==a.substr(-1)?this.pa:null};function Vb(a){return new Tb(a.id,a.value)}function Wb(a){return new Tb(Ub++,a||{})}function Xb(a){if(null==a)return null;a=new Uint8Array(a);for(var b="",c=0;c<a.length;++c)var d=a[c].toString(16),b=b+(2>d.length?"0"+d:d);return b};var Zb={};r("lf.TransactionType",Zb);Zb.READ_ONLY=0;Zb.READ_WRITE=1;function $b(a,b){this.oe=a;this.Pa=b||null;this.O=x()}$b.prototype.ia=function(){return 0==this.oe?this.qc():ac(this)};function ac(a){try{bc(a.Pa)}catch(b){return bb(b)}return cc(a).then(function(a){this.Pa.ia();return a}.bind(a))}function cc(a){dc(a);ec(a);return a.qc()}
function dc(a){a.Pa.tb.forEach(function(a,c){var d=this.Pa.ca().get(c),d=this.H(d.getName(),d.gb.bind(d),0),e=z(a.ya).map(function(a){return a.id()});0<e.length&&d.remove(e).ne(this.Me,this);e=z(a.na).map(function(a){return a[1]}).concat(z(a.va));d.put(e).ne(this.Me,this)},a)}function ec(a){fc(a.Pa).forEach(function(a){var c=this.H(a.getName(),Vb,1);c.remove([]);c.put(a.Fa())},a)}$b.prototype.Me=function(a){this.O.reject(a)};function gc(a){this.Ag=a}gc.prototype.toString=g("Ag");var hc=new gc("backstore"),ic=new gc("cache"),jc=new gc("indexstore"),kc=new gc("engine"),lc=new gc("runner"),mc=new gc("observerregistry"),nc=new gc("schema");function B(a){return q(a)?new window.Set(a):new window.Set}function C(a){var b=0,c=Array(a.size);a.forEach(function(a){c[b++]=a});return c}function oc(a,b){if(b.size>a.size)return!1;var c=!0;b.forEach(function(b){c=c&&a.has(b)});return c};function pc(a,b){this.pa=a;this.o=b||{}}function qc(a){var b=B();a.forEach(function(a){b.add(a>>9)});return C(b)}pc.prototype.Y=g("pa");function rc(a,b){b.forEach(function(a){this.o[a.id()]=a.Fa()},a)}function sc(a,b){b.forEach(function(a){delete this.o[a]},a)}pc.prototype.Fa=function(){return{id:this.pa,value:JSON.stringify(this.o)}};function tc(a){return new pc(a.id,JSON.parse(a.value))};function uc(a,b,c){this.W=a;this.Fb=b;this.jf=c}m=uc.prototype;m.get=function(a){if(0==a.length)return this.Md();var b=this.Fb;return vc(this,a).then(function(c){return a.map(function(a){var e=c.get(a>>9);return b(e.o[a])})})};function vc(a,b){var c=y(),d=x(),e=qc(b).map(function(a){return new v(function(b,d){var e;try{e=this.W.get(a)}catch(A){d(A);return}e.onerror=d;e.onsuccess=function(a){a=tc(a.target.result);c.set(a.Y(),a);b()}},this)},a);eb(e).then(function(){d.resolve(c)});return d.da}
m.Md=function(){return new v(function(a,b){var c=[],d;try{d=this.W.openCursor()}catch(e){b(e);return}d.onerror=b;d.onsuccess=function(){var b=d.result;if(b){var f;f=tc(b.value).o;for(var h in f)c.push(this.Fb(f[h]));b.continue()}else a(c)}.bind(this)},this)};m.Tb=function(a){return new v(function(b,c){var d;try{d=a()}catch(e){c(e);return}d.onsuccess=b;d.onerror=c},this)};
m.put=function(a){if(0==a.length)return w();var b=y();a.forEach(function(a){var d;d=a.id()>>9;var e=b.get(d)||null;null===e&&(e=this.jf(this.W.name,d));rc(e,[a]);b.set(d,e)},this);a=z(b).map(function(a){return this.Tb(function(){return this.W.put(a.Fa())}.bind(this))},this);return eb(a)};
m.remove=function(a){if(0==a.length)return this.Tb(function(){return this.W.clear()}.bind(this));var b=y();a.forEach(function(a){var d=a>>9,e=b.get(d)||null;null===e&&(e=this.jf(this.W.name,d));sc(e,[a]);b.set(d,e)},this);a=z(b).map(function(a){return this.Tb(function(){return 0==Object.keys(a.o).length?this.W.delete(a.Y()):this.W.put(a.Fa())}.bind(this))},this);return eb(a)};function wc(a,b,c){a=a.l(ic);var d=[c<<9,(c+1<<9)-1];b=a.Ya(b,d[0],d[1]);c=new pc(c);rc(c,b);return c}
function xc(a,b){return new pc(b)};function yc(a){this.U=a.l(ic);this.D=a.l(jc);this.g=a.l(nc)}yc.prototype.update=function(a){a.forEach(function(a){zc(this,a);Ac(this,a)},this)};function Ac(a,b){var c=b.getName();b.ya.forEach(function(a,b){this.U.remove(c,b)},a);b.va.forEach(function(a){this.U.set(c,a)},a);b.na.forEach(function(a){this.U.set(c,a[1])},a)}function zc(a,b){var c=a.g.table(b.getName());Bc(b).forEach(function(a){Cc(this,c,a)},a)}
function Cc(a,b,c){var d=a.D.lc.get(b.getName())||[],e=0;d.forEach(function(a){try{Dc(a,c),e++}catch(b){throw d.slice(0,e).forEach(function(a){Dc(a,[c[1],c[0]])},this),b;}},a)}function Dc(a,b){var c=null===b[1]?void 0:b[1].kb(a.getName()),d=null===b[0]?void 0:b[0].kb(a.getName());if(!q(d)&&q(c))a.add(c,b[1].id());else if(q(d)&&q(c)){if(null===c||null===d){if(c==d)return}else if(0==a.eb().compare(d,c))return;a.add(c,b[1].id());a.remove(d,b[0].id())}else q(d)&&!q(c)&&a.remove(d,b[0].id())};var Ec={};r("lf.ConstraintAction",Ec);Ec.RESTRICT=0;Ec.CASCADE=1;var Fc={};r("lf.ConstraintTiming",Fc);Fc.IMMEDIATE=0;Fc.DEFERRABLE=1;var Gc={};r("lf.Order",Gc);Gc.DESC=0;Gc.ASC=1;var Hc={};r("lf.Type",Hc);Hc.ARRAY_BUFFER=0;Hc.BOOLEAN=1;Hc.DATE_TIME=2;Hc.INTEGER=3;Hc.NUMBER=4;Hc.STRING=5;Hc.OBJECT=6;var Ic={0:null,1:!1,2:Object.freeze(new Date(0)),3:0,4:0,5:"",6:null};r("lf.type.DEFAULT_VALUES",Ic);function D(a,b){this.code=a;this.message="http://sn.im/2a0j3wn?c="+a;if(1<arguments.length)for(var c=1;c<=Math.min(4,arguments.length-1);++c)this.message+="&p"+(c-1)+"="+encodeURIComponent(arguments[c].toString().slice(0,64))}t(D,Error);function Jc(){this.Z=y();this.size=0}m=Jc.prototype;m.has=function(a){return this.Z.has(a)};m.set=function(a,b){var c=this.Z.get(a)||null;null===c&&(c=B(),this.Z.set(a,c));c.has(b)||(c.add(b),this.size++);return this};m.Wb=function(a,b){var c=this.Z.get(a)||null;null===c&&(c=B(),this.Z.set(a,c));b.forEach(function(a){c.has(a)||(c.add(a),this.size++)},this);return this};m.Ud=function(a){a.keys().forEach(function(b){var c=a.get(b);this.Wb(b,c)},this);return this};
m.delete=function(a,b){var c=this.Z.get(a,null);if(null===c)return!1;var d=c.delete(b);d&&(--this.size,0==c.size&&this.Z.delete(a));return d};m.get=function(a){a=this.Z.get(a)||null;return null===a?null:C(a)};m.clear=function(){this.Z.clear();this.size=0};m.keys=function(){return Sb(this.Z)};m.values=function(){var a=[];this.Z.forEach(function(b){a.push.apply(a,C(b))});return a};function Kc(a){this.D=a.l(jc);this.g=a.l(nc);this.U=a.l(ic);this.Wc=null}function Lc(a,b,c){var d=b.Gb().lg;c.forEach(function(a){d.forEach(function(b){if(null==a.o[b.getName()])throw new D(202,b.m());},this)},a)}function Mc(a,b,c,d){b.Gb().Nd().forEach(function(a){a.timing==d&&Nc(this,a,c)},a)}function Nc(a,b,c){var d=Oc(a,b);c.forEach(function(a){if(Pc(a[0],a[1],b.name)&&(a=a[1].kb(b.name),null!==a&&!d.fb(a)))throw new D(203,b.name);},a)}
function Oc(a,b){null===a.Wc&&(a.Wc=y());var c=a.Wc.get(b.name)||null;null===c&&(c=a.g.table(b.Qa)[b.Fc].za(),c=a.D.get(c.m()),a.Wc.set(b.name,c));return c}function Pc(a,b,c){return(null===a?null!==b:null===b)||a.kb(c)!=b.kb(c)}function Qc(a,b,c,d){b=Sc(a.g.info(),b.getName(),0);null!==b&&(b=b.filter(function(a){return a.timing==d}),0!=b.length&&Tc(a,b,c,function(a,b,c){if(b.fb(c))throw new D(203,a.name);}))}
function Uc(a,b,c){b=Sc(a.g.info(),b.getName(),1);if(null===b)return null;var d=new Jc;Tc(a,b,c,function(a,b,c){b=b.get(c);0<b.length&&d.Wb(a.Ae,b)});return d}function Vc(a,b,c){var d=new Jc;Tc(a,c,b,function(a,b,c,k){b.get(c).forEach(function(b){d.set(b,{Kd:a,qg:k[1]})})});return d}function Tc(a,b,c,d){b.forEach(function(a){var b=this.D.get(a.name),h=Oc(this,a);c.forEach(function(c){if(Pc(c[0],c[1],h.getName())){var n=c[0].kb(h.getName());d(a,b,n,c)}},this)},a)}
function Wc(a,b,c,d){0!=c.length&&(c=c.map(function(a){return[null,a]}),Mc(a,b,c,d))}function Xc(a,b,c,d){0!=c.length&&(Mc(a,b,c,d),Qc(a,b,c,d))}function Yc(a,b,c,d){0!=c.length&&(c=c.map(function(a){return[a,null]}),Qc(a,b,c,d))}
function Zc(a,b,c){var d={le:[],lf:new Jc},e=new Jc;e.Wb(b.getName(),c.map(function(a){return a.id()}));do{var f=new Jc;e.keys().forEach(function(a){var b=this.g.table(a);a=e.get(a).map(function(a){return[this.U.get(a),null]},this);b=Uc(this,b,a);null!==b&&(d.le.unshift.apply(d.le,b.keys()),f.Ud(b))},a);e=f;d.lf.Ud(e)}while(0<e.size);return d};function $c(a){this.va=y();this.na=y();this.ya=y();this.A=a}m=$c.prototype;m.getName=g("A");m.add=function(a){if(this.ya.has(a.id())){var b=[this.ya.get(a.id()),a];this.na.set(a.id(),b);this.ya.delete(a.id())}else this.va.set(a.id(),a)};m.modify=function(a){var b=a[1],c=a[0].id();this.va.has(c)?this.va.set(c,b):(this.na.has(c)&&(a=[this.na.get(a[0].id())[0],b]),this.na.set(c,a))};
m.delete=function(a){if(this.va.has(a.id()))this.va.delete(a.id());else if(this.na.has(a.id())){var b=this.na.get(a.id())[0];this.na.delete(a.id());this.ya.set(a.id(),b)}else this.ya.set(a.id(),a)};m.Ud=function(a){a.va.forEach(function(a){this.add(a)},this);a.na.forEach(function(a){this.modify(a)},this);a.ya.forEach(function(a){this.delete(a)},this)};
function Bc(a){var b=[];a.va.forEach(function(a){b.push([null,a])});a.na.forEach(function(a){b.push(a)});a.ya.forEach(function(a){b.push([a,null])});return b}m.toString=function(){return"["+Sb(this.va).toString()+"], ["+Sb(this.na).toString()+"], ["+Sb(this.ya).toString()+"]"};function ad(a){var b=new $c(a.A);a.va.forEach(function(a){b.delete(a)});a.ya.forEach(function(a){b.add(a)});a.na.forEach(function(a){b.modify([a[1],a[0]])});return b}
m.ag=function(){return 0==this.va.size&&0==this.ya.size&&0==this.na.size};function bd(a,b){this.aa=y();b.forEach(function(a){this.aa.set(a.getName(),a)},this);this.g=a.l(nc);this.U=a.l(ic);this.D=a.l(jc);this.wa=new Kc(a);this.dd=new yc(a);this.tb=y()}function fc(a){var b=[];Sb(a.tb).map(function(a){return this.aa.get(a)},a).forEach(function(a){a.Db()&&(a.Aa().forEach(function(a){b.push(this.D.get(a.m()))},this),b.push(this.D.get(a.getName()+".#")))},a);return b}m=bd.prototype;m.ca=g("aa");
m.Ab=function(a,b){cd(this,a);Lc(this.wa,a,b);Wc(this.wa,a,b,0);for(var c=0;c<b.length;c++)dd(this,a,[null,b[c]])};function dd(a,b,c){var d=b.getName(),e=a.tb.get(d)||new $c(d);a.tb.set(d,e);try{Cc(a.dd,b,c)}catch(h){throw h;}b=c[0];var f=c[1];null===b&&null!==f?(a.U.set(d,f),e.add(f)):null!==b&&null!==f?(a.U.set(d,f),e.modify(c)):null!==b&&null===f&&(a.U.remove(d,b.id()),e.delete(b))}
m.update=function(a,b){cd(this,a);Lc(this.wa,a,b);var c=b.map(function(a){return[this.U.get(a.id()),a]},this);ed(this,a,c);Xc(this.wa,a,c,0);c.forEach(function(b){dd(this,a,b)},this)};m.Od=function(a,b){cd(this,a);Lc(this.wa,a,b);for(var c=0;c<b.length;c++){var d=b[c],e=null,f,h=a.Gb().Zc();if(null===h)f=null;else{f=this.wa;var h=h.m(),k=d.kb(h);f=f.D.get(h).get(k);f=0==f.length?null:f[0]}null!=f?(e=this.U.get(f),d.pa=f,Xc(this.wa,a,[[e,d]],0)):Wc(this.wa,a,[d],0);dd(this,a,[e,d])}};
m.remove=function(a,b){cd(this,a);fd(this,a,b);Yc(this.wa,a,b,0);for(var c=0;c<b.length;c++)dd(this,a,[b[c],null])};function ed(a,b,c){b=Sc(a.g.info(),b.getName(),1);if(null!==b){var d=Vc(a.wa,c,b);d.keys().forEach(function(a){d.get(a).forEach(function(b){var c=this.g.table(b.Kd.Ae),d=this.U.get(a),n=c.gb(d.Fa());n.o[b.Kd.ub]=b.qg.o[b.Kd.Fc];dd(this,c,[d,n])},this)},a)}}
function fd(a,b,c){if(null!==Sc(a.g.info(),b.getName(),1)){b=Zc(a.wa,b,c);var d=b.lf;b.le.forEach(function(a){var b=this.g.table(a);a=d.get(a).map(function(a){return this.U.get(a)},this);Yc(this.wa,b,a,0);a.forEach(function(a){dd(this,b,[a,null])},this)},a)}}function bc(a){a.tb.forEach(function(a){var c=this.aa.get(a.getName());Wc(this.wa,c,z(a.va),1);Yc(this.wa,c,z(a.ya),1);Xc(this.wa,c,z(a.na),1)},a)}m.ia=aa();m.Kb=function(){var a=z(this.tb).map(function(a){return ad(a)});this.dd.update(a)};
function cd(a,b){if(!a.aa.has(b.getName()))throw new D(106,b.getName());};function E(a,b,c,d){this.c=a;this.s=b;this.ea=this.c==F?!1:c;this.ma=this.s==F?!1:d}var F=new (aa());E.prototype.toString=function(){return(this.ea?"(":"[")+(this.c==F?"unbound":this.c)+", "+(this.s==F?"unbound":this.s)+(this.ma?")":"]")};function gd(a){if(hd(a))return[];var b=null,c=null;a.c==F||(b=new E(F,a.c,!1,!a.ea));a.s==F||(c=new E(a.s,F,!a.ma,!1));return[b,c].filter(function(a){return null!==a})}E.prototype.reverse=function(){return new E(this.s,this.c,this.ma,this.ea)};
function id(a,b){var c=jd(a.c,b.c,!0,a.ea,b.ea);if(0==c)return!0;var d=-1==c?a:b,c=1==c?a:b;return d.s==F||d.s>c.c||d.s==c.c&&!d.ma&&!c.ea}function kd(){return new E(F,F,!1,!1)}function hd(a){return a.c==F&&a.s==F}function ld(a){return a.c==a.s&&a.c!=F&&!a.ea&&!a.ma}E.prototype.contains=function(a){var b=this.s==F||a<this.s||a==this.s&&!this.ma;return(this.c==F||a>this.c||a==this.c&&!this.ea)&&b};
function jd(a,b,c,d,e){function f(a){return c?a:1==a?-1:1}d=d||!1;e=e||!1;return a==F?b==F?(d?!e:e)?d?f(1):f(-1):0:f(-1):b==F?f(1):a<b?-1:a==b?(d?!e:e)?d?f(1):f(-1):0:1}function md(a,b){var c=jd(a.c,b.c,!0,a.ea,b.ea);0==c&&(c=jd(a.s,b.s,!1,a.ma,b.ma));return c}function nd(a){if(0==a.length)return[];a.sort(md);for(var b=Array(a.length+1),c=0;c<b.length;c++)b[c]=0==c?new E(F,a[c].c,!1,!0):c==b.length-1?new E(a[c-1].s,F,!0,!1):new E(a[c-1].s,a[c].c,!0,!0);return b};function od(a){this.kc=[];q(a)&&this.add(a)}od.prototype.toString=function(){return this.kc.map(function(a){return a.toString()}).join(",")};od.prototype.fb=function(a){return this.kc.some(function(b){return b.contains(a)})};od.prototype.Hb=g("kc");
od.prototype.add=function(a){if(0!=a.length)if(a=this.kc.concat(a),1==a.length)this.kc=a;else{a.sort(md);for(var b=[],c=a[0],d=1;d<a.length;++d)if(id(c,a[d])){var e=a[d],f=kd();if(c.c!=F&&e.c!=F){var h=jd(c.c,e.c,!0);1!=h?(f.c=c.c,f.ea=0!=h?c.ea:c.ea&&e.ea):(f.c=e.c,f.ea=e.ea)}c.s!=F&&e.s!=F&&(h=jd(c.s,e.s,!1),-1!=h?(f.s=c.s,f.ma=0!=h?c.ma:c.ma&&e.ma):(f.s=e.s,f.ma=e.ma));c=f}else b.push(c),c=a[d];b.push(c);this.kc=b}};
function pd(a,b){var c=[];a.Hb().map(function(a){return b.Hb().map(function(b){var c;if(id(a,b)){c=kd();var h=jd(a.c,b.c,!0),h=0==h?a.ea?a:b:-1!=h?a:b;c.c=h.c;c.ea=h.ea;a.s==F||b.s==F?b=a.s==F?b:a:(h=jd(a.s,b.s,!1),b=0==h?a.ma?a:b:-1==h?a:b);c.s=b.s;c.ma=b.ma}else c=null;return c})}).forEach(function(a){c=c.concat(a)});return new od(c.filter(function(a){return null!==a}))};function G(a,b){this.entries=a;this.L=B(b);this.Wa=null}function H(a){return C(a.L)}function qd(a){return a.entries.map(function(a){return a.ua.o})}function rd(a){return a.entries.map(function(a){return a.ua.id()})}function sd(a,b){return a.Wa.get(b.m())}var td=null;function ud(){null===td&&(td=new G([],[]));return td}
function vd(a){if(0==a.length)return ud();for(var b=a.reduce(function(a,b){return a+b.entries.length},0),c=Array(b),d=0,b=a.map(function(a){var b=y();a.entries.forEach(function(a){c[d++]=a;b.set(a.id,a)});return b}),e=y(),f=0;f<c.length;f++)b.every(function(a){return a.has(c[f].id)})&&e.set(c[f].id,c[f]);return new G(z(e),C(a[0].L))}function wd(a){if(0==a.length)return ud();var b=y();a.forEach(function(a){a.entries.forEach(function(a){b.set(a.id,a)})});return new G(z(b),C(a[0].L))}
function xd(a,b){var c=1<b.length,d=a.map(function(a){return new yd(a,c)});return new G(d,b)}function yd(a,b){this.ua=a;this.id=zd++;this.Qd=b}var zd=0;function I(a,b){var c=b.Xa();return null!==c&&a.ua.o.hasOwnProperty(c)?a.ua.o[c]:a.Qd?a.ua.o[J(b.H())][b.getName()]:a.ua.o[b.getName()]}function Ad(a,b,c){var d=b.Xa();if(null!=d)a.ua.o[d]=c;else if(a.Qd){var d=J(b.H()),e=a.ua.o[d];null==e&&(e={},a.ua.o[d]=e);e[b.getName()]=c}else a.ua.o[b.getName()]=c}
function Bd(a,b,c,d){function e(a,b){if(a.Qd){var c=a.ua.o,d;for(d in c)f[d]=c[d]}else f[b[0]]=a.ua.o}var f={};e(a,b);e(c,d);a=new Tb(-1,f);return new yd(a,!0)};r("lf.bind",function(a){return new Cd(a)});function Cd(a){this.ga=a}r("lf.Binder",Cd);Cd.prototype.za=g("ga");function Dd(){this.Se=Ed();var a=Fd();this.gc=y();this.gc.set(1,Gd());this.gc.set(2,Hd());this.gc.set(4,a);this.gc.set(3,a);this.gc.set(5,Id())}var Jd;function Kd(){null!=Jd||(Jd=new Dd);return Jd}function Ld(a,b,c){return(a.gc.get(b)||null).get(c)||null}function Ed(){function a(a){return a}var b=y();b.set(1,function(a){return null===a?null:a?1:0});b.set(2,function(a){return null===a?null:a.getTime()});b.set(3,a);b.set(4,a);b.set(5,a);return b}
function Gd(){var a=y();a.set("eq",function(a,c){return a==c});a.set("neq",function(a,c){return a!=c});return a}
function Fd(){var a=Gd();a.set("between",function(a,c){return null===a||null===c[0]||null===c[1]?!1:a>=c[0]&&a<=c[1]});a.set("gte",function(a,c){return null===a||null===c?!1:a>=c});a.set("gt",function(a,c){return null===a||null===c?!1:a>c});a.set("in",function(a,c){return-1!=c.indexOf(a)});a.set("lte",function(a,c){return null===a||null===c?!1:a<=c});a.set("lt",function(a,c){return null===a||null===c?!1:a<c});return a}
function Id(){var a=Fd();a.set("match",function(a,c){return null===a||null===c?!1:(new RegExp(c)).test(a)});return a}
function Hd(){var a=y();a.set("between",function(a,c){return null===a||null===c[0]||null===c[1]?!1:a.getTime()>=c[0].getTime()&&a.getTime()<=c[1].getTime()});a.set("eq",function(a,c){return(null===a?-1:a.getTime())==(null===c?-1:c.getTime())});a.set("gte",function(a,c){return null===a||null===c?!1:a.getTime()>=c.getTime()});a.set("gt",function(a,c){return null===a||null===c?!1:a.getTime()>c.getTime()});a.set("in",function(a,c){return c.some(function(c){return c.getTime()==a.getTime()})});a.set("lte",
function(a,c){return null===a||null===c?!1:a.getTime()<=c.getTime()});a.set("lt",function(a,c){return null===a||null===c?!1:a.getTime()<c.getTime()});a.set("neq",function(a,c){return(null===a?-1:a.getTime())!=(null===c?-1:c.getTime())});return a};function K(){this.h=this.F=null}var Md=[];K.prototype.getParent=g("F");K.prototype.ib=function(){for(var a=this;!fa(a.getParent());)a=a.getParent();return a};function Nd(a){for(var b=0;!fa(a.getParent());)b++,a=a.getParent();return b}function L(a){return a.h||Md}function Od(a,b){return L(a)[b]||null}function Pd(a,b,c){b.F=a;null===a.h?a.h=[b]:a.h.splice(c,0,b)}function Qd(a,b){b.F=a;null===a.h?a.h=[b]:a.h.push(b)}
function Rd(a,b){var c=a.h&&a.h[b];return c?(c.F=null,a.h.splice(b,1),0==a.h.length&&(a.h=null),c):null}K.prototype.removeChild=function(a){return Rd(this,L(this).indexOf(a))};function Sd(a,b,c){Od(a,c).F=null;b.F=a;a.h[c]=b}function Td(a,b,c){!1!==b.call(c,a)&&L(a).forEach(function(a){Td(a,b,c)})};function Ud(){K.call(this);this.pa=Vd++}t(Ud,K);var Vd=0;Ud.prototype.Y=g("pa");function Wd(a,b,c){Ud.call(this);this.M=a;this.value=b;this.C=c;this.tc=Ld(Kd(),this.M.G(),this.C);this.Oa=!1;this.cc=b}t(Wd,Ud);m=Wd.prototype;m.Mb=function(){var a=new Wd(this.M,this.value,this.C);a.cc=this.cc;a.qd(this.Oa);var b=this.Y();a.pa=b;return a};m.hb=function(a){return null!=a?(a.push(this.M),a):[this.M]};m.qd=ba("Oa");function Xd(a){var b=!1;a.value instanceof Cd||(b="array"==ea(a.value)?!a.value.some(function(a){return a instanceof Cd}):!0);if(!b)throw new D(501);}
m.eval=function(a){Xd(this);if("in"==this.C)return Yd(this,a);var b=a.entries.filter(function(a){return this.tc(I(a,this.M),this.value)!=this.Oa},this);return new G(b,H(a))};m.bind=function(a){if(this.cc instanceof Cd){var b=this.cc.za();if(a.length<=b)throw new D(510);this.value=a[b]}else"array"==ea(this.cc)&&(this.value=this.cc.map(function(b){if(b instanceof Cd){var d=b.za();if(a.length<=d)throw new D(510);return a[b.za()]}return b}))};
function Yd(a,b){var c=B(a.value),d=function(a){return null===a?!1:c.has(a)!=this.Oa}.bind(a),e=b.entries.filter(function(a){return d(I(a,this.M))},a);return new G(e,H(b))}m.toString=function(){return"value_pred("+this.M.m()+" "+this.C+(this.Oa?"(complement)":"")+" "+this.value+")"};
function Zd(a){var b=null;if("between"==a.C)b=new E($d(a,a.value[0]),$d(a,a.value[1]),!1,!1);else{if("in"==a.C)return b=a.value.map(function(a){return new E(a,a,!1,!1)}),new od(a.Oa?nd(b):b);b=$d(a,a.value);b="eq"==a.C?new E(b,b,!1,!1):"gte"==a.C?new E(b,F,!1,!1):"gt"==a.C?new E(b,F,!0,!1):"lte"==a.C?new E(F,b,!1,!1):new E(F,b,!1,!0)}return new od(a.Oa?gd(b):[b])}function $d(a,b){return 2==a.M.G()?b.getTime():b};function ae(a){this.ba=a;this.Tc=this.Ca=null}function be(a,b){null===a.Ca&&null!=a.w&&(a.Ca=ce(a.w));return a.Ca.get(b)||null}function ce(a){var b=y();Td(a,function(a){b.set(a.Y(),a)});return b}function de(a,b){b.w&&(a.w=b.w.Mb());a.Tc=b}ae.prototype.bind=function(){return this};function ee(a,b){var c=a.w;null!=c&&Td(c,function(a){a instanceof Wd&&a.bind(b)})};function ge(a){ae.call(this,a)}t(ge,ae);function he(a){var b="";a.forEach(function(c,d){b+=c.M.m()+" ";b+=1==c.mb?"ASC":"DESC";d<a.length-1&&(b+=", ")});return b}ge.prototype.ca=function(){return B(this.c)};ge.prototype.clone=function(){var a=new ge(this.ba);de(a,this);this.f&&(a.f=this.f.slice());this.c&&(a.c=this.c.slice());a.V=this.V;a.K=this.K;this.N&&(a.N=this.N.slice());this.ja&&(a.ja=this.ja.slice());this.Rb&&(a.Rb=this.Rb);this.Yb&&(a.Yb=this.Yb);a.Cb=this.Cb;return a};
ge.prototype.bind=function(a){ge.ab.bind.call(this,a);null!=this.Rb&&(this.V=a[this.Rb.za()]);null!=this.Yb&&(this.K=a[this.Yb.za()]);ee(this,a);return this};function ie(a,b){this.Da=a;this.aa=b}ie.prototype.ib=g("Da");ie.prototype.ca=g("aa");function je(a){var b=B();a.forEach(function(a){a.ca().forEach(b.add.bind(b))});return b};function ke(a,b){this.global=a;this.La=a.l(hc);this.nd=b.map(function(a){return a.context});this.bf=b.map(function(a){return a.be});this.Ed=je(this.bf);this.pe=le(this);this.$a=x()}function le(a){return a.nd.some(function(a){return!(a instanceof ge)})?1:0}m=ke.prototype;
m.exec=function(){function a(){var f=d.shift();if(f){var h=e[c.length];return f.ib().exec(b,h).then(function(b){c.push(b[0]);return a()})}return w()}var b=0==this.pe?void 0:new bd(this.global,this.Ed),c=[],d=this.bf.slice(),e=this.nd;return a().then(function(){return this.La.Eb(this.pe,C(this.Ed),b).ia()}.bind(this)).then(function(){this.Zd(c);return c}.bind(this),function(a){null!=b&&b.Kb();throw a;})};m.G=g("pe");m.ca=g("Ed");m.Nb=g("$a");m.Y=function(){return ka(this)};m.Zd=aa();function me(a,b){ke.call(this,a,b);this.Jb=a.l(mc)}t(me,ke);me.prototype.getPriority=l(0);me.prototype.Zd=function(a){this.nd.forEach(function(b,c){ne(this.Jb,b,a[c])},this)};function oe(a,b){this.i=a;this.Jb=a.l(mc);this.Ea=a.l(lc);this.dd=new yc(a);this.tb=b;var c=a.l(nc),d=this.tb.map(function(a){return c.table(a.getName())});this.aa=B(d);this.$a=x()}m=oe.prototype;m.exec=function(){this.dd.update(this.tb);this.Ic();return w()};m.G=l(1);m.ca=g("aa");m.Nb=g("$a");m.Y=function(){return ka(this)};m.getPriority=l(1);m.Ic=function(){var a=pe(this.Jb,this.aa);0!=a.length&&(a=new me(this.i,a),qe(this.Ea,a))};function re(a){this.i=a;this.La=a.l(hc);this.Ea=a.l(lc)}re.prototype.Xd=function(a){a=new oe(this.i,a);qe(this.Ea,a)};function M(a,b){this.$b=a;this.j=b;this.Ta=y()}r("lf.backstore.FirebaseRawBackStore",M);M.prototype.$c=g("j");M.prototype.ad=function(){throw new D(351);};function se(a,b){var c=x(),d=a;b.length&&(d=a.child(b));d.once("value",function(a){c.resolve(a.val())},function(a){c.reject(a)});return c.da}function te(a,b,c){function d(a){a?e.reject(a):e.resolve()}c=c||!1;var e=x();c?a.set(b,d):a.update(b,d);return e.da}
M.prototype.Ga=function(a){return se(this.j,"@rev/R").then(function(a){this.Na=a;return se(this.j,"@table")}.bind(this)).then(function(b){var c=0,d;for(d in b)this.Ta.set(d,b[d]),b[d]>c&&(c=b[d]);a.sa().forEach(function(a){this.Ta.has(a.getName())||(b[a.getName()]=++c)},this);d=this.j.child("@table");return te(d,b)}.bind(this))};
function ue(a,b,c){var d=a.Ta.get(b);return null!=d?function(){var a={},b=x();this.j.orderByChild("T").equalTo(d).once("value",function(d){d.forEach(function(b){var d=c(b.val());a[parseInt(b.key(),10)]=d});b.resolve(a)});return b.da}.call(a).then(function(a){a["@rev"]={R:++this.Na};return te(this.j,a)}.bind(a)):w()}M.prototype.rc=function(a){return ue(this,a,l(null)).then(function(){this.Ta.delete(a);return te(this.j.child("@table/"+a),null,!0)}.bind(this))};M.prototype.dropTable=M.prototype.rc;
M.prototype.oc=function(a,b,c){return ue(this,a,function(a){var e=a.P;e[b]=c;return{R:this.Na+1,T:a.T,P:e}}.bind(this))};M.prototype.addTableColumn=M.prototype.oc;M.prototype.sc=function(a,b){return ue(this,a,function(a){var d=a.P;delete d[b];return{R:this.Na+1,T:a.T,P:d}}.bind(this))};M.prototype.dropTableColumn=M.prototype.sc;M.prototype.Hc=function(a,b,c){return ue(this,a,function(a){var e=a.P;e[c]=e[b];delete e[b];return{R:this.Na+1,T:a.T,P:e}}.bind(this))};M.prototype.renameTableColumn=M.prototype.Hc;
M.prototype.wb=function(){throw new D(351);};M.prototype.createRow=M.prototype.wb;M.prototype.zc=g("$b");M.prototype.getVersion=M.prototype.zc;M.prototype.ec=function(a){var b=x();a=this.Ta.get(a);this.j.orderByChild("T").equalTo(a).once("value",function(a){var d=[];a.forEach(function(a){d.push(a.val().P)});b.resolve(d)});return b.da};M.prototype.dump=function(){var a={},b=Sb(this.Ta).map(function(b){return this.ec(b).then(function(d){a[b]=d})}.bind(this));return eb(b).then(function(){return a})};
M.prototype.dump=M.prototype.dump;function ve(a,b,c){$b.call(this,b,c);this.j=a}t(ve,$b);ve.prototype.H=function(a){return this.j.xc(a)};
ve.prototype.qc=function(){if(0==this.oe)return this.O.resolve(),this.O.da;var a=this.Pa.tb;if(0==a.size)this.O.resolve();else{var b=this.j.Na+1;this.j.Na=b;var c={"@rev":{R:b}};a.forEach(function(a,e){var f=this.j.Ta.get(e);a.va.forEach(function(a,d){c[d]={R:b,T:f,P:a.o}});a.na.forEach(function(a,d){c[d]={R:b,T:f,P:a[1].o}});a.ya.forEach(function(a,b){c[b]=null})},this);this.j.j.update(c,function(c){null===c?this.O.resolve():(this.j.Na=b-1,c=z(a).map(function(a){return we(this.j,a.getName())},this),
eb(c).then(this.O.reject.bind(this.O),this.O.reject.bind(this.O)))}.bind(this))}return this.O.da};function xe(){this.xa=y()}function ye(a,b){if(0==b.length)return z(a.xa);var c=[];b.forEach(function(a){a=this.xa.get(a)||null;null===a||c.push(a)},a);return c}xe.prototype.getData=g("xa");xe.prototype.get=function(a){return w(ye(this,a))};function ze(a,b){b.forEach(function(a){this.xa.set(a.id(),a)},a)}xe.prototype.put=function(a){ze(this,a);return w()};function Ae(a,b){0==b.length||b.length==a.xa.size?a.xa.clear():b.forEach(function(a){this.xa.delete(a)},a)}
xe.prototype.remove=function(a){Ae(this,a);return w()};function Be(a){return 0==a.xa.size?0:Sb(a.xa).reduce(function(a,c){return a>c?a:c},0)};function Ce(a,b){this.g=a;this.xf=b;this.Gc=y();this.Na=-1;this.L=y();this.Ta=y();this.Bd=null}m=Ce.prototype;
m.Ga=function(a){this.j=this.xf.child(this.g.name());var b=a||function(){return w()};return se(this.j,"@db/version").then(function(a){return null===a?te(this.j,De(this),!0).then(function(){var a=new M(0,this.j);return b(a)}.bind(this)):a==this.g.version()?se(this.j,"@rev/R").then(function(a){this.Na=a;return se(this.j,"@table")}.bind(this)).then(function(a){for(var b in a)this.Ta.set(b,a[b]);a=this.g.sa().map(function(a){return we(this,a.getName())},this);return eb(a)}.bind(this)).then(function(){Ee(this);
Fe(this);return w()}.bind(this)):this.$d(a,b).then(function(){return this.Ga()}.bind(this))}.bind(this))};m.$d=function(a,b){var c=new M(a,this.j);return c.Ga(this.g).then(function(){return w()}.bind(this)).then(function(){return b(c)}).then(function(){var a=this.j.child("@db");return te(a,{version:this.g.version()},!0)}.bind(this))};
function Fe(a){a.j.off();a.j.on("child_removed",a.ng.bind(a));a.Cd&&(a.Cd.off(),a.Gc.clear());a.Cd=a.j.orderByChild("R").startAt(a.Na+1);a.Cd.on("value",a.Xd.bind(a))}function Ee(a){Ub=z(a.L).map(function(a){return Be(a)}).reduce(function(a,c){return a>c?a:c},0)+1}m.ng=function(a){var b=a.val(),c=this.Gc.get(b.T)||null;null===c&&(c=B(),this.Gc.set(b.T,c));c.add(parseInt(a.key(),10))};
m.Xd=function(a){var b=a.child("@rev/R").val();null!=b&&b!=this.Na&&(this.Na=b,a=Ge(this,a),a.forEach(function(a){var b=this.L.get(a.getName()),e=Sb(a.ya);0<e.length&&Ae(b,e);var f=z(a.va);a.na.forEach(function(a){f.push(a[1])});ze(b,f)},this),0<a.length&&this.Cc(a),Fe(this))};
function Ge(a,b){var c=B(),d=y();a.Ta.forEach(function(a,b){var h=this.L.get(b),k=new $c(b);if(this.Gc.has(a)){var n=C(this.Gc.get(a));n.forEach(function(a){c.add(a)});ye(h,n).forEach(function(a){k.delete(a)})}d.set(a,k)}.bind(a));b.forEach(function(a){if("@rev"!=a.key()){var b=parseInt(a.key(),10);if(!c.has(b)){var h=a.val();a=d.get(h.T);var k=this.L.get(a.getName()),h=this.g.table(a.getName()).gb({id:b,value:h.P});k.getData().has(b)?a.modify([ye(k,[b])[0],h]):a.add(h)}}}.bind(a));return z(d).filter(function(a){return!a.ag()})}
function we(a,b){var c=x(),d=a.Ta.get(b),e=a.g.table(b);a.j.orderByChild("T").equalTo(d).once("value",function(a){var d=new xe,k=[];a.forEach(function(a){k.push(e.gb({id:parseInt(a.key(),10),value:a.val().P}))});ze(d,k);this.L.set(b,d);c.resolve()}.bind(a));return c.da}function De(a){var b={};b["@db"]={version:a.g.version()};b["@rev"]={R:1};a.Na=1;b["@table"]={};a.g.sa().forEach(function(a,d){var e=a.getName();b["@table"][e]=d;this.L.set(e,new xe);this.Ta.set(e,d)},a);return b}
m.Eb=function(a,b,c){return new ve(this,a,c)};m.xc=function(a){var b=this.L.get(a)||null;if(null!==b)return b;throw new D(101,a);};m.close=aa();m.subscribe=ba("Bd");m.Cc=function(a){null!=this.Bd&&this.Bd(a)};function N(a,b,c,d){this.j=b;this.Va=c;this.$b=a;this.Rc=d}r("lf.backstore.IndexedDBRawBackStore",N);N.prototype.$c=g("j");N.prototype.getRawDBInstance=N.prototype.$c;N.prototype.ad=g("Va");N.prototype.getRawTransaction=N.prototype.ad;N.prototype.rc=function(a){return new v(function(b,c){try{this.j.deleteObjectStore(a)}catch(d){c(d);return}b()},this)};N.prototype.dropTable=N.prototype.rc;
function He(a,b,c,d){return new v(function(a,f){var h;try{var k=this.Va.objectStore(b);h=k.openCursor()}catch(n){f(n);return}h.onsuccess=function(){var b=h.result;b?(c(b),b.continue()):(d(k),a())};h.onerror=f},a)}function Ie(a){var b=null;return b=a instanceof ArrayBuffer?Xb(a):a instanceof Date?a.getTime():a}
function Je(a,b,c){function d(a){var b=tc(a.value),d=b.o,e;for(e in d){var A=Vb(d[e]);c(A);d[e]=A.Fa()}a.update(b.Fa())}function e(a){var b=Vb(a.value);c(b);a.update(b.Fa())}return He(a,b,a.Rc?d:e,aa())}N.prototype.oc=function(a,b,c){var d=Ie(c);return Je(this,a,function(a){a.o[b]=d})};N.prototype.addTableColumn=N.prototype.oc;N.prototype.sc=function(a,b){return Je(this,a,function(a){delete a.o[b]})};N.prototype.dropTableColumn=N.prototype.sc;
N.prototype.Hc=function(a,b,c){return Je(this,a,function(a){a.o[c]=a.o[b];delete a.o[b]})};N.prototype.renameTableColumn=N.prototype.Hc;function Ke(a,b){var c=[];return new v(function(a,e){var f;try{f=this.Va.objectStore(b).openCursor()}catch(h){e(h);return}f.onsuccess=function(){var b=f.result;if(b){if(this.Rc){var e;e=tc(b.value).o;for(var n in e)c.push(e[n])}else c.push(b.value);b.continue()}else a(c)}.bind(this);f.onerror=e},a)}N.prototype.wb=function(a){var b={},c;for(c in a)b[c]=Ie(a[c]);return Wb(b)};
N.prototype.createRow=N.prototype.wb;N.prototype.zc=g("$b");N.prototype.getVersion=N.prototype.zc;N.prototype.dump=function(){for(var a=this.j.objectStoreNames,b=[],c=0;c<a.length;++c){var d=a.item(c);b.push(this.ec(d))}return eb(b).then(function(b){var c={};b.forEach(function(b,d){c[a.item(d)]=b});return c})};N.prototype.dump=N.prototype.dump;N.prototype.ec=function(a){return Ke(this,a).then(function(a){return a.map(function(a){return a.value})})};function Le(a,b){this.W=a;this.Fb=b}Le.prototype.get=function(a){if(0==a.length)return null!=this.W.getAll?Me(this):Ne(this);a=a.map(function(a){return new v(function(c,d){var e;try{e=this.W.get(a)}catch(f){d(f);return}e.onerror=d;e.onsuccess=function(a){c(this.Fb(a.target.result))}.bind(this)},this)},this);return eb(a)};
function Ne(a){return new v(function(a,c){var d=[],e;try{e=this.W.openCursor()}catch(f){c(f);return}e.onerror=c;e.onsuccess=function(){var c=e.result;c?(d.push(this.Fb(c.value)),c.continue()):a(d)}.bind(this)},a)}function Me(a){return new v(function(a,c){var d;try{d=this.W.getAll()}catch(e){c(e);return}d.onerror=c;d.onsuccess=function(){var c=d.result.map(function(a){return this.Fb(a)},this);a(c)}.bind(this)},a)}
Le.prototype.Tb=function(a){return new v(function(b,c){var d;try{d=a()}catch(e){c(e);return}d.onsuccess=b;d.onerror=c},this)};Le.prototype.put=function(a){if(0==a.length)return w();a=a.map(function(a){return this.Tb(function(){return this.W.put(a.Fa())}.bind(this))},this);return eb(a)};
Le.prototype.remove=function(a){return new v(function(b,c){var d=this.W.count();d.onsuccess=function(d){if(0==a.length||d.target.result==a.length)return this.Tb(function(){return this.W.clear()}.bind(this)).then(b,c);d=a.map(function(a){return this.Tb(function(){return this.W.delete(a)}.bind(this))},this);eb(d).then(b,c)}.bind(this);d.onerror=c},this)};function Oe(a,b,c,d,e){$b.call(this,c,e);this.i=a;this.Va=b;this.Rc=d;this.Va.oncomplete=this.O.resolve.bind(this.O);this.Va.onabort=this.O.reject.bind(this.O)}t(Oe,$b);Oe.prototype.H=function(a,b,c){return this.Rc?(c=null!=c?c:0,a=this.Va.objectStore(a),new uc(a,b,0==c?qa(wc,this.i):xc)):new Le(this.Va.objectStore(a),b)};Oe.prototype.qc=function(){return this.O.da};function Pe(a,b){this.i=a;this.g=b;this.yd=b.cf().Kf||!1}m=Pe.prototype;
m.Ga=function(a){var b=window.indexedDB||window.mozIndexedDB||window.webkitIndexedDB||window.msIndexedDB;if(null==b)throw new D(352);var c=a||function(){return w()};return new v(function(a,e){var f;try{f=b.open(this.g.name(),this.g.version())}catch(h){e(h);return}f.onerror=e;f.onupgradeneeded=function(a){Qe(this,c,a).then(aa(),e)}.bind(this);f.onsuccess=function(b){this.j=b.target.result;this.he().then(function(b){Ub=b+1;a(this.j)}.bind(this))}.bind(this)},this)};
function Qe(a,b,c){var d=c.target.result;c=new N(c.oldVersion,d,c.target.transaction,a.yd);Re(d);a.g.sa().forEach(qa(a.Ff,d),a);return b(c)}function Re(a){for(var b=[],c=0;c<a.objectStoreNames.length;++c){var d=a.objectStoreNames.item(c);-1!=d.indexOf(".")&&b.push(d)}b.forEach(function(b){try{a.deleteObjectStore(b)}catch(c){}})}m.Ff=function(a,b){a.objectStoreNames.contains(b.getName())||a.createObjectStore(b.getName(),{keyPath:"id"});b.Db()&&(b.Aa().forEach(function(b){Se(a,b.m())},this),Se(a,Te(b)))};
function Se(a,b){a.objectStoreNames.contains(b)||a.createObjectStore(b,{keyPath:"id"})}m.Eb=function(a,b,c){b=this.j.transaction(Ue(b),0==a?"readonly":"readwrite");return new Oe(this.i,b,a,this.yd,c)};function Ue(a){var b=B();a.forEach(function(a){b.add(a.getName());a.Db()&&(a.Aa().forEach(function(a){b.add(a.m())}),b.add(Te(a)))});return C(b)}
m.he=function(a){function b(){if(0==d.length)return w();var a=d.shift();return c(a).then(b)}function c(b){return new v(function(c,d){var O;try{O=(a||e.transaction([b])).objectStore(b).openCursor(null,"prev")}catch(ca){d(ca);return}O.onsuccess=function(a){(a=a.target.result)&&(f=Math.max(f,h(a)));c(f)};O.onerror=function(){c(f)}})}var d=this.g.sa().map(function(a){return a.getName()}),e=this.j,f=0,h=function(a){return this.yd?(a=tc(a.value),Object.keys(a.o).reduce(function(a,b){return Math.max(a,b)},
0)):a.key}.bind(this);return new v(function(a){b().then(function(){a(f)})})};m.close=function(){this.j.close()};m.xc=function(){throw new D(511);};m.subscribe=aa();m.Cc=aa();function Ve(a,b,c){$b.call(this,b,c);this.W=a;0==b&&this.O.resolve()}t(Ve,$b);Ve.prototype.H=function(a){return this.W.xc(a)};Ve.prototype.qc=function(){this.O.resolve();return this.O.da};function We(a){this.g=a;this.L=y()}m=We.prototype;m.Ga=function(){this.g.sa().forEach(this.Yf,this);return w()};m.xc=function(a){var b=this.L.get(a)||null;if(null===b)throw new D(101,a);return b};m.Eb=function(a,b,c){return new Ve(this,a,c)};function Xe(a,b){if(!a.L.has(b)){var c=new xe;a.L.set(b,c)}}m.Yf=function(a){Xe(this,a.getName());a.Db()&&(a.Aa().forEach(function(a){Xe(this,a.m())},this),Xe(this,Te(a)))};m.close=aa();m.subscribe=aa();m.Cc=aa();function Ye(a){We.call(this,a);this.jd=null}t(Ye,We);Ye.prototype.subscribe=function(a){null===this.jd&&(this.jd=a)};Ye.prototype.Cc=function(a){null===this.jd||this.jd(a)};function Ze(a,b,c){this.Va=a;this.A=b;this.Fb=c}Ze.prototype.get=function(a){var b=this.Fb;return $e(this.Va,"SELECT id, value FROM "+this.A+" "+(0==a.length?"":"WHERE id IN ("+a.join(",")+")"),[],function(a){for(var d=a.rows.length,e=Array(d),f=0;f<d;++f)e[f]=b({id:a.rows.item(f).id,value:JSON.parse(a.rows.item(f).value)});return e})};
Ze.prototype.put=function(a){if(0==a.length)return w();var b="INSERT OR REPLACE INTO "+this.A+"(id, value) VALUES (?, ?)";a.forEach(function(a){$e(this.Va,b,[a.id(),JSON.stringify(a.o)])},this);return w()};Ze.prototype.remove=function(a){$e(this.Va,"DELETE FROM "+this.A+" "+(0==a.length?"":"WHERE id IN ("+a.join(",")+")"),[]);return w()};function af(a,b,c){$b.call(this,b,c);this.j=a;this.L=y();this.Fd=[]}t(af,$b);function bf(a){return a.replace(".","__d__").replace("#","__s__")}af.prototype.H=function(a,b){var c=this.L.get(a)||null;null===c&&(c=new Ze(this,bf(a),b),this.L.set(a,c));return c};function $e(a,b,c,d){var e=x();a.Fd.push({Cg:b,rg:c,transform:d,O:e});return e.da}
af.prototype.qc=function(){var a=null,b=this.O.reject.bind(this.O),c=function(a,b){this.O.reject(b)}.bind(this),d=[],e=function(b,h){if(null!==a){var k=h;null!=a.transform&&null!=h&&(k=a.transform(h));d.push(k);a.O.resolve(k)}0<this.Fd.length?(a=k=this.Fd.shift(),b.executeSql(k.Cg,k.rg,e,c)):this.O.resolve(d)}.bind(this);0==this.oe?this.j.readTransaction(e,b):this.j.transaction(e,b);return this.O.da};function P(a,b,c){this.j=c;this.i=a;this.$b=b}r("lf.backstore.WebSqlRawBackStore",P);P.prototype.$c=g("j");P.prototype.getRawDBInstance=P.prototype.$c;P.prototype.ad=function(){throw new D(356);};P.prototype.getRawTransaction=P.prototype.ad;function cf(a){return new af(a.j,1,new bd(a.i,B()))}P.prototype.rc=function(a){var b=cf(this);$e(b,"DROP TABLE "+a,[]);return b.ia()};P.prototype.dropTable=P.prototype.rc;
P.prototype.ec=function(a){var b=cf(this);$e(b,"SELECT id, value FROM "+a,[]);return b.ia().then(function(a){for(var b=a[0].rows.length,e=Array(b),f=0;f<b;++f)e[f]={id:a[0].rows.item(f).id,value:JSON.parse(a[0].rows.item(f).value)};return w(e)})};function df(a,b,c){var d=cf(a),e="UPDATE "+b+" SET value=? WHERE id=?";return a.ec(b).then(function(a){a.forEach(function(a){a=c(a);$e(d,e,[JSON.stringify(a.value),a.id])});return d.ia()})}
P.prototype.oc=function(a,b,c){var d=Ie(c);return df(this,a,function(a){a.value[b]=d;return a})};P.prototype.addTableColumn=P.prototype.oc;P.prototype.sc=function(a,b){return df(this,a,function(a){delete a.value[b];return a})};P.prototype.dropTableColumn=P.prototype.sc;P.prototype.Hc=function(a,b,c){return df(this,a,function(a){a.value[c]=a.value[b];delete a.value[b];return a})};P.prototype.renameTableColumn=P.prototype.Hc;P.prototype.wb=function(a){var b={},c;for(c in a)b[c]=Ie(a[c]);return Wb(b)};
P.prototype.createRow=P.prototype.wb;P.prototype.zc=g("$b");P.prototype.getVersion=P.prototype.zc;function ef(a){$e(a,'SELECT tbl_name FROM sqlite_master WHERE type="table"',[],function(a){for(var c=Array(a.rows.length),d=0;d<c.length;++d)c[d]=a.rows.item(d).tbl_name;return c})}
P.prototype.dump=function(){var a=x(),b=cf(this);ef(b);var c={};b.ia().then(function(b){b=b[0].filter(function(a){return"__lf_ver"!=a&&"__WebKitDatabaseInfoTable__"!=a}).map(function(a){return this.ec(a).then(function(b){c[a]=b})},this);eb(b).then(function(){a.resolve(c)})}.bind(this));return a.da};P.prototype.dump=P.prototype.dump;function ff(a,b,c){this.i=a;this.g=b;this.Bg=c||4194304}m=ff.prototype;m.Ga=function(a){if(null==window.openDatabase)throw new D(353);var b=a||function(){return w()};return new v(function(a,d){try{var e=window.openDatabase(this.g.name(),"",this.g.name(),this.Bg);if(null!=e)this.j=e,gf(this,b).then(a,d);else throw new D(354);}catch(f){d(f)}},this)};
function gf(a,b){var c=x(),d=new af(a.j,1,new bd(a.i,B()));$e(d,"CREATE TABLE IF NOT EXISTS __lf_ver(id INTEGER PRIMARY KEY, v INTEGER)",[]);$e(d,"SELECT v FROM __lf_ver WHERE id = 0",[]);d.ia().then(function(a){var d=0;a[1].rows.length&&(d=a[1].rows.item(0).v);d<this.g.version()?this.$d(b,d).then(c.resolve.bind(c)):d>this.g.version()?c.reject(new D(108)):c.resolve()}.bind(a));return c.da}m.Eb=function(a,b,c){if(null!=this.j)return new af(this.j,a,c);throw new D(2);};m.close=aa();
m.xc=function(){throw new D(512);};m.subscribe=function(){throw new D(355);};m.Cc=function(){throw new D(355);};m.$d=function(a,b){var c=x();hf(this).then(function(){a(new P(this.i,b,this.j)).then(function(){return this.he()}.bind(this)).then(c.resolve.bind(c))}.bind(this),c.reject.bind(c));return c.da};
function hf(a){var b=a.g.sa(),c=new af(a.j,1,new bd(a.i,B())),d=new af(a.j,1,new bd(a.i,B()));$e(c,"INSERT OR REPLACE INTO __lf_ver VALUES (0, ?)",[a.g.version()]);ef(c);return c.ia().then(function(a){var c=a[1];c.filter(function(a){return-1!=a.indexOf("__d__")}).forEach(function(a){$e(d,"DROP TABLE "+a,[])});var h=[],k=[],n=[];b.map(function(a){-1==c.indexOf(a.getName())&&h.push(a.getName());a.Db&&(a.Aa().forEach(function(a){a=bf(a.m());h.push(a);k.push(a)}),a=bf(Te(a)),h.push(a),n.push(a))});h.forEach(function(a){$e(d,
"CREATE TABLE "+a+"(id INTEGER PRIMARY KEY, value TEXT)",[])});return d.ia()})}m.he=function(){var a=0,b=x(),c=function(b){var c=new af(this.j,0);$e(c,"SELECT MAX(id) FROM "+b,[]);return c.ia().then(function(b){b=b[0].rows.item(0)[0];a=Math.max(b,a)})}.bind(this),d=this.g.sa().map(function(a){return c(a.getName())});eb(d).then(function(){b.resolve(a)},function(a){b.reject(a)});return b.da};function jf(a){this.Z=y();this.Zb=y();a.sa().forEach(function(a){this.Zb.set(a.getName(),B())},this)}m=jf.prototype;m.set=function(a,b){this.Z.set(b.id(),b);this.Zb.get(a).add(b.id())};m.Wb=function(a,b){var c=this.Zb.get(a);b.forEach(function(a){this.Z.set(a.id(),a);c.add(a.id())},this)};m.get=function(a){return this.Z.get(a)||null};function kf(a,b){return b.map(function(a){return this.get(a)},a)}
m.Ya=function(a,b,c){var d=[],e=Math.min(b,c),f=Math.max(b,c);a=this.Zb.get(a);if(a.size<f-e)a.forEach(function(a){a>=e&&a<=f&&(a=this.Z.get(a),d.push(a))},this);else for(b=e;b<=f;++b)a.has(b)&&(c=this.Z.get(b),d.push(c));return d};m.remove=function(a,b){this.Z.delete(b);this.Zb.get(a).delete(b)};m.Kg=function(a){return null!=a?this.Zb.get(a).size:this.Z.size};m.clear=function(){this.Z.clear();this.Zb.clear()};function mf(a,b,c){var d=0,e=a.length;for(c=c||nf;d<e;){var f=d+e>>1;0>c(a[f],b)?d=f+1:e=f}return d==e&&a[d]==b?d:~d}function nf(a,b){return a-b}function of(a,b,c){c=mf(a,b,c);return 0>c?(a.splice(-(c+1),0,b),!0):!1};function pf(a,b,c,d){a=b?a.reverse():a;if(null==c&&null==d)return a;c=Math.min(q(c)?c:a.length,a.length);if(0==c)return[];d=Math.min(d||0,a.length);return a.slice(d,d+c)};function qf(){this.la=0}qf.prototype.add=function(a,b){this.la+=b};qf.prototype.remove=function(a,b){this.la-=b};qf.prototype.clear=function(){this.la=0};function rf(a,b){a.clear();b.forEach(function(a){this.la+=a.la},a)};function sf(a,b,c,d){this.A=a;this.X=b;this.sf=c;this.rb=new qf;if(d){a=511;a*=a*a;if(d.length>=a)throw new D(6,a);d=tf(this,d);this.ra=d=uf(d)}else this.clear()}var vf=[];m=sf.prototype;m.getName=g("A");m.toString=function(){return this.ra.toString()};m.add=function(a,b){this.ra=this.ra.Ab(a,b)};m.set=function(a,b){this.ra=this.ra.Ab(a,b,!0)};m.remove=function(a,b){this.ra=this.ra.remove(a,b)};m.get=function(a){return this.ra.get(a)};
m.Vc=function(a){if(null==a)return this.Ka().la;if(a instanceof E){if(hd(a))return this.Ka().la;if(ld(a))return this.get(a.c).length}return this.Ya([a]).length};m.Ka=g("rb");m.Md=function(a,b,c,d){c=Array(a);this.ra.fill({offset:b?this.rb.la-a-d:d,count:a,ke:0},c);return b?c.reverse():c};
m.Ya=function(a,b,c,d){var e=wf(this.ra).b[0];if(!q(e)||0==c)return vf;b=b||!1;c=null!=c?Math.min(c,this.rb.la):this.rb.la;d=d||0;var f=Math.min(Math.max(this.rb.la-d,0),c);if(0==f)return vf;if(!q(a)||1==a.length&&a[0]instanceof E&&hd(a[0]))return this.Md(f,b,c,d);a=this.X.of(a);var h=Array(b?this.rb.la:f),k={count:0,V:h.length,reverse:b,K:d},n=1<this.eb().Sd();a.forEach(function(a){for(var b=this.X.od(a),b=this.X.Pd(a)?e:b[0],b=this.ra.Rf(b),c=0;null!=b&&k.count<k.V;){if(n){for(var d=b,f=a,Yb=k,
wb=h,Rc=d.u.eb(),fe=-1,Ja=0;Ja<d.b.length;++Ja)if(Rc.Bb(d.b[Ja],f)){fe=Ja;break}if(-1!=fe)for(Ja=fe;Ja<d.b.length&&Yb.count<Yb.V;++Ja)Rc.Bb(d.b[Ja],f)&&xf(d,Yb,wb,Ja)}else b.Ya(a,k,h);0!=k.K||b.fd(a)?c=0:c++;b=2==c?null:b.next()}},this);h.length>k.count&&h.splice(k.count,h.length-k.count);return b?pf(h,b,c,d):h};m.clear=function(){this.ra=yf(this);this.rb.clear()};m.fb=function(a){return this.ra.fb(a)};m.min=function(){return this.Ib(this.X.min.bind(this.X))};m.max=function(){return this.Ib(this.X.max.bind(this.X))};
function zf(a,b,c){if(!a.X.Gd(b.b[c]))if(1<b.b[c].length){if(null===b.b[c][0])return null}else return null;return[b.b[c],a.sf?[b.B[c]]:b.B[c]]}m.Ib=function(a){var b;a:{b=wf(this.ra);var c=0;do if(c>=b.b.length)b=b.ta,c=0;else{var d=zf(this,b,c);if(null!==d){b=d;break a}c++}while(null!==b);b=null}a:{c=Af(this.ra);d=c.b.length-1;do if(0>d)c=c.nb,d=0;else{var e=zf(this,c,d);if(null!==e){c=e;break a}d--}while(null!==c);c=null}return null===b||null===c?null:1==a(b[0],c[0])?b:c};m.Ia=g("sf");m.eb=g("X");
m.Ma=function(a,b){return null!=a?0==this.X.compare(a,b):!1};m.Fa=function(){for(var a=[],b=wf(this.ra);b;)a.push(new Tb(b.pa,[b.b,b.B])),b=b.ta;return a};function Bf(a,b,c,d){a=new sf(b,a,c);d=Cf(d,a);a.ra=d;return a}function Df(a,b){this.pa=a;this.u=b;this.jb=0;this.ta=this.nb=this.F=null;this.b=[];this.B=[];this.h=[];this.Rf=1==b.eb().Sd()?this.Ie:this.He}function yf(a){return new Df(Ub++,a)}function Q(a){return 0==a.jb}m=Df.prototype;m.next=g("ta");
function Ef(a){function b(a){return null!=a?a.pa.toString():"_"}var c=a.pa+"["+a.b.join("|")+"]",d=a.h.map(function(a){return a.pa}).join("|"),e=a.B.join("/"),f=b(a.nb)+"{",f=Q(a)?f+e:f+d,f=f+"}"+b(a.F);a.ta&&(a=Ef(a.ta),c=c+"  "+a[0],f=f+"  "+a[1]);return[c,f]}m.toString=function(){var a="",b=Ef(this),a=a+(b[0]+"\n"+b[1]+"\n");this.h.length&&(a+=this.h[0].toString());return a};function wf(a){return Q(a)?a:wf(a.h[0])}function Af(a){return Q(a)?a:Af(a.h[a.h.length-1])}
function Ff(a,b){b&&(b.nb=a);a&&(a.ta=b)}function tf(a,b){for(var c=b.length,d=0,e=yf(a),f=e;0<c;){var h=768<=c?511:257<=c&&511>=c?c:257,k=b.slice(d,d+h);e.b=k.map(function(a){return a.key});e.B=k.map(function(a){return a.value});d+=h;c-=h;0<c&&(h=yf(e.u),Ff(e,h),e=h)}return f}function Gf(a){var b=a[0],c=yf(b.u);c.jb=b.jb+1;c.h=a;for(b=0;b<a.length;++b)a[b].F=c,0<b&&c.b.push(a[b].b[0]);return c}
function uf(a){var b=a,c=[];do c.push(b),b=b.ta;while(b);if(512>=c.length)b=Gf(c);else{var d=c.length,e=0,b=yf(a.u);for(b.jb=a.jb+2;0<d;){a=768<=d?511:257<=d&&511>=d?d:257;var f=c.slice(e,e+a),h=Gf(f);h.F=b;b.h.length&&(b.b.push(f[0].b[0]),Ff(b.h[b.h.length-1],h));b.h.push(h);e+=a;d-=a}}return b}m.get=function(a){var b=Hf(this,a);if(Q(this)){var c=vf;this.u.Ma(this.b[b],a)&&(c=c.concat(this.B[b]));return c}b=this.u.Ma(this.b[b],a)?b+1:b;return this.h[b].get(a)};
m.fb=function(a){var b=Hf(this,a);return this.u.Ma(this.b[b],a)?!0:Q(this)?!1:this.h[b].fb(a)};m.remove=function(a,b){If(this,a,-1,b);if(null===this.F){var c=this;1==this.h.length&&(c=this.h[0],c.F=null);return c}return this};function Jf(a){return Q(a)?a.b[0]:Jf(a.h[0])}function Kf(a){a.b=[];for(var b=1;b<a.h.length;++b)a.b.push(Jf(a.h[b]))}
function If(a,b,c,d){var e=Hf(a,b),f=Q(a);if(!f){var h=a.u.Ma(a.b[e],b)?e+1:e;if(If(a.h[h],b,h,d))Kf(a);else return!1}else if(!a.u.Ma(a.b[e],b))return!1;if(a.b.length>e&&a.u.Ma(a.b[e],b)){if(q(d)&&!a.u.Ia()&&f&&(h=a.B[e],d=mf(h,d,void 0),0>d?d=!1:(h.splice(d,1),d=!0),d&&a.u.Ka().remove(b,1),a.B[e].length))return!1;a.b.splice(e,1);f&&(f=a.u.Ia()?1:a.B[e].length,a.B.splice(e,1),a.u.Ka().remove(b,f))}if(256>a.b.length&&null!==a.F){a:{b=null;if(a.ta&&256<a.ta.b.length)b=a.ta,e=d=0,f=a.b.length+1;else if(a.nb&&
256<a.nb.b.length)b=a.nb,d=a.nb.b.length-1,e=Q(a)?d:d+1,f=0;else{b=!1;break a}a.b.splice(f,0,b.b[d]);b.b.splice(d,1);d=Q(a)?a.B:a.h;h=null;Q(a)?h=b.B:(h=b.h,h[e].F=a);d.splice(f,0,h[e]);h.splice(e,1);Q(b)||(Kf(b),Kf(a));b=!0}b||Lf(a,c)}return!0}
function Lf(a,b){var c,d,e;a.ta&&511>a.ta.b.length?(c=a.ta,e=d=0):a.nb&&(c=a.nb,d=c.b.length,e=Q(c)?c.B.length:c.h.length);d=[d,0].concat(a.b);Array.prototype.splice.apply(c.b,d);d=null;Q(a)?d=a.B:(d=a.h,d.forEach(function(a){a.F=c}));d=[e,0].concat(d);Array.prototype.splice.apply(Q(c)?c.B:c.h,d);Ff(a.nb,a.ta);Q(c)||Kf(c);-1!=b&&(a.F.b.splice(b,1),a.F.h.splice(b,1))}
m.Ab=function(a,b,c){var d=Hf(this,a);if(Q(this)){if(this.u.Ma(this.b[d],a)){if(c)this.u.Ka().remove(a,this.u.Ia()?1:this.B[d].length),this.B[d]=this.u.Ia()?b:[b];else{if(this.u.Ia())throw new D(201);if(!of(this.B[d],b))throw new D(109);}this.u.Ka().add(a,1);return this}this.b.splice(d,0,a);this.B.splice(d,0,this.u.Ia()?b:[b]);this.u.Ka().add(a,1);512==this.b.length?(d=yf(this.u),a=yf(this.u),a.jb=1,a.b=[this.b[256]],a.h=[this,d],a.F=this.F,this.F=a,d.b=this.b.splice(256),d.B=this.B.splice(256),d.F=
a,Ff(d,this.ta),Ff(this,d),d=a):d=this;return d}d=this.u.Ma(this.b[d],a)?d+1:d;a=this.h[d].Ab(a,b,c);Q(a)||1!=a.b.length||(this.b.splice(d,0,a.b[0]),a.h[1].F=this,a.h[0].F=this,this.h.splice(d,1,a.h[1]),this.h.splice(d,0,a.h[0]));return 512==this.b.length?Mf(this):this};function Mf(a){var b=yf(a.u),c=yf(a.u);b.F=a.F;b.jb=a.jb+1;b.b=[a.b[256]];b.h=[a,c];a.b.splice(256,1);c.F=b;c.jb=a.jb;c.b=a.b.splice(256);c.h=a.h.splice(257);c.h.forEach(function(a){a.F=c});a.F=b;Ff(c,a.ta);Ff(a,c);return b}
function Hf(a,b){for(var c=0,d=a.b.length,e=a.u.eb();c<d;){var f=c+d>>1;-1==e.compare(a.b[f],b)?c=f+1:d=f}return c}m.Ie=function(a){if(!Q(this)){var b=Hf(this,a);this.u.Ma(this.b[b],a)&&b++;return this.h[b].Ie(a)}return this};m.He=function(a){if(!Q(this)){var b=Hf(this,a);this.u.Ma(this.b[b],a)&&(a.some(function(a){return a==F})||b++);return this.h[b].He(a)}return this};
m.Ya=function(a,b,c){function d(a){return a[0]?a[1]?0:1:-1}var e=this.u.eb(),f=0,h=this.b.length-1,k=this.b,n=d(e.vb(k[f],a)),A=d(e.vb(k[h],a));if(1!=n&&(-1!=n||-1!=A)){var O=function(a,b){var c=a+b>>1;return c==a?c+1:c},ca=function(b,c,f){if(b>=c)return 0==f?c:-1;var h=d(e.vb(k[b],a));if(0==h)return b;if(1==h)return-1;h=O(b,c);if(h==c)return 0==f?c:-1;var n=d(e.vb(k[h],a));return 0==n?ca(b,h,n):-1==n?ca(h+1,c,f):ca(b+1,h,n)},vb=function(b,c){if(b>=c)return b;var f=d(e.vb(k[c],a));if(0==f)return c;
if(-1==f)return b;f=O(b,c);if(f==c)return b;var h=d(e.vb(k[f],a));return 0==h?vb(f,c):1==h?vb(b,f-1):-1};0!=n&&(f=ca(f+1,h,A));-1!=f&&(h=vb(f,h),-1!=h&&h>=f&&Of(this,b,c,f,h+1))}};function xf(a,b,c,d){if(a.u.Ia())!b.reverse&&b.K?b.K--:c[b.count++]=a.B[d];else for(var e=0;e<a.B[d].length&&b.count<c.length;++e)!b.reverse&&b.K?b.K--:c[b.count++]=a.B[d][e]}function Of(a,b,c,d,e){for(;d<e&&(b.reverse||!(b.count>=b.V));++d)xf(a,b,c,d)}
m.fill=function(a,b){if(Q(this))for(var c=0;c<this.B.length&&0<a.count;++c)if(0<a.offset){if(a.offset-=this.u.Ia()?1:this.B[c].length,0>a.offset)for(var d=this.B[c].length+a.offset;d<this.B[c].length&&0<a.count;++d)b[a.ke++]=this.B[c][d],a.count--}else if(this.u.Ia())b[a.ke++]=this.B[c],a.count--;else for(d=0;d<this.B[c].length&&0<a.count;++d)b[a.ke++]=this.B[c][d],a.count--;else for(c=0;c<this.h.length&&0<a.count;++c)this.h[c].fill(a,b)};
function Cf(a,b){for(var c=b.Ka(),d=a.map(function(a){var d=new Df(a.id(),b);d.b=a.o[0];d.B=a.o[1];d.b.forEach(function(a,e){c.add(a,b.Ia()?1:d.B[e].length)});return d}),e=0;e<d.length-1;++e)Ff(d[e],d[e+1]);return 1<d.length?uf(d[0]):d[0]}m.fd=function(a){return this.u.eb().fd(this.b[0],a)};function Pf(a){this.Uc=0==a?Qf:Rf;this.Vd=0==a?function(a){return null!=a?a.reverse():null}:function(a){return a||null};this.ae=0==a?Sf:Tf}function Rf(a,b){return a>b?1:a<b?-1:0}function Qf(a,b){return Rf(b,a)}function Tf(a,b){return md(a,b)}function Sf(a,b){return md(b,a)}m=Pf.prototype;m.vb=function(a,b){var c=this.Vd(b),d=[c.c==F,c.s==F];if(!d[0]){var e=this.Uc(a,c.c);d[0]=c.ea?1==e:-1!=e}d[1]||(e=this.Uc(a,c.s),d[1]=c.ma?-1==e:1!=e);return d};m.compare=function(a,b){return this.Uc(a,b)};
m.min=function(a,b){return a<b?1:a==b?0:-1};m.max=function(a,b){return a>b?1:a==b?0:-1};m.Bb=function(a,b){var c=this.vb(a,b);return c[0]&&c[1]};m.fd=function(a,b){return this.Bb(a,b)};m.of=function(a){return a.filter(function(a){return null!==a}).sort(function(a,c){return this.ae(a,c)}.bind(this))};m.Pd=function(a){return this.Vd(a).c==F};m.od=function(a){a=this.Vd(a);return[a.c,a.s]};m.Gd=function(a){return null!==a};m.Sd=l(1);
m.toString=function(){return this.compare==Qf?"SimpleComparator_DESC":"SimpleComparator_ASC"};function Uf(a){Pf.call(this,a);this.Uc=0==a?Vf:Wf}t(Uf,Pf);function Wf(a,b){return null===a?null===b?0:-1:null===b?1:Rf(a,b)}function Vf(a,b){return Wf(b,a)}Uf.prototype.Bb=function(a,b){return null===a?hd(b):Uf.ab.Bb.call(this,a,b)};Uf.prototype.Ib=function(a,b){return null===a?null===b?0:-1:null===b?1:null};Uf.prototype.min=function(a,b){var c=this.Ib(a,b);null===c&&(c=Uf.ab.min.call(this,a,b));return c};
Uf.prototype.max=function(a,b){var c=this.Ib(a,b);null===c&&(c=Uf.ab.max.call(this,a,b));return c};function Xf(a){this.oa=a.map(function(a){return new Pf(a)})}function Yf(a,b,c,d){for(var e=0,f=0;f<a.oa.length&&0==e;++f)e=d(a.oa[f],b[f],c[f]);return e}m=Xf.prototype;m.compare=function(a,b){return Yf(this,a,b,function(a,b,e){return b==F||e==F?0:a.compare(b,e)})};m.min=function(a,b){return Yf(this,a,b,function(a,b,e){return a.min(b,e)})};m.max=function(a,b){return Yf(this,a,b,function(a,b,e){return a.max(b,e)})};
m.vb=function(a,b){for(var c=[!0,!0],d=0;d<this.oa.length&&(c[0]||c[1]);++d){var e=this.oa[d].vb(a[d],b[d]);c[0]=c[0]&&e[0];c[1]=c[1]&&e[1]}return c};m.Bb=function(a,b){for(var c=!0,d=0;d<this.oa.length&&c;++d)c=this.oa[d].Bb(a[d],b[d]);return c};m.fd=function(a,b){return this.oa[0].Bb(a[0],b[0])};
m.of=function(a){var b=a.filter(function(a){return a.every(ga)});a=Array(this.oa.length);for(var c=0;c<a.length;c++)a[c]=b.map(function(a){return a[c]});a.forEach(function(a,b){a.sort(function(a,c){return this.oa[b].ae(a,c)}.bind(this))},this);b=Array(b.length);for(c=0;c<b.length;c++)b[c]=a.map(function(a){return a[c]});return b.sort(function(a,b){for(var c=0,h=0;h<this.oa.length&&0==c;++h)c=this.oa[h].ae(a[h],b[h]);return c}.bind(this))};m.Pd=function(a){return this.oa[0].Pd(a[0])};
m.od=function(a){var b=a.map(function(a,b){return this.oa[b].od(a)[0]},this);a=a.map(function(a,b){return this.oa[b].od(a)[1]},this);return[b,a]};m.Gd=function(a){return a.every(function(a,c){return this.oa[c].Gd(a)},this)};m.Sd=function(){return this.oa.length};function Zf(a){Xf.call(this,a);this.oa=a.map(function(a){return new Uf(a)})}t(Zf,Xf);function $f(a){if(1==a.f.length)return new Pf(a.f[0].mb);var b=a.f.map(function(a){return a.mb});return a.f.some(function(a){return a.ba.ic()})?new Zf(b):new Xf(b)};function ag(a){this.ga=a;this.lb=B();this.Jc=new qf;this.rb=new qf}m=ag.prototype;m.getName=function(){return this.ga.getName()};m.add=function(a,b){null===a?(this.lb.add(b),this.Jc.add(a,1)):this.ga.add(a,b)};m.set=function(a,b){null===a?(this.lb.clear(),this.Jc.clear(),this.add(a,b)):this.ga.set(a,b)};m.remove=function(a,b){null===a?b?(this.lb.delete(b),this.Jc.remove(a,1)):(this.lb.clear(),this.Jc.clear()):this.ga.remove(a,b)};m.get=function(a){return null===a?C(this.lb):this.ga.get(a)};m.Vc=function(a){return this.ga.Vc(a)};
m.Ka=function(){rf(this.rb,[this.ga.Ka(),this.Jc]);return this.rb};m.Ya=function(a,b,c,d){b=this.ga.Ya(a,b,c,d);return null!=a?b:b.concat(C(this.lb))};m.clear=function(){this.lb.clear();this.ga.clear()};m.fb=function(a){return null===a?0!=this.lb.size:this.ga.fb(a)};m.min=function(){return this.ga.min()};m.max=function(){return this.ga.max()};m.Fa=function(){return[new Tb(-2,C(this.lb))].concat(this.ga.Fa())};m.eb=function(){return this.ga.eb()};
function bg(a,b){for(var c=-1,d=0;d<b.length;++d)if(-2==b[d].id()){c=d;break}if(-1==c)throw new D(102);var d=b[c].o,e=b.slice(0);e.splice(c,1);var c=a(e),f=new ag(c);d.forEach(function(a){f.lb.add(a)});return f}m.Ia=function(){return this.ga.Ia()};function cg(a){this.A=a;this.qb=B();this.X=new Pf(1)}m=cg.prototype;m.getName=g("A");m.add=function(a){if("number"!=typeof a)throw new D(103);this.qb.add(a)};m.set=function(a,b){this.add(a,b)};m.remove=function(a){this.qb.delete(a)};m.get=function(a){return this.fb(a)?[a]:[]};m.min=function(){return this.Ib(this.X.min.bind(this.X))};m.max=function(){return this.Ib(this.X.max.bind(this.X))};
m.Ib=function(a){if(0==this.qb.size)return null;var b=C(this.qb).reduce(function(b,d){return null===b||1==a(d,b)?d:b},null);return[b,[b]]};m.Vc=function(){return this.qb.size};m.Ya=function(a,b,c,d){var e=a||[kd()];a=C(this.qb).filter(function(a){return e.some(function(b){return this.X.Bb(a,b)},this)},this);return pf(a,b,c,d)};m.clear=function(){this.qb.clear()};m.fb=function(a){return this.qb.has(a)};m.Fa=function(){return[new Tb(0,C(this.qb))]};m.eb=g("X");
function dg(a,b){var c=new cg(a);b[0].o.forEach(function(a){c.add(a,a)});return c}m.Ia=l(!0);m.Ka=function(){var a=new qf;a.la=this.qb.size;return a};function eg(a){this.La=a.l(hc);this.D=a.l(jc);this.U=a.l(ic)}eg.prototype.Ga=function(a){var b=a.sa(),c=function(){if(0==b.length)return w();var a=b.shift();return(a.Db()?fg(this,a):gg(this,a)).then(c)}.bind(this);return c()};function gg(a,b){var c=a.La.Eb(0,[b]),d=c.H(b.getName(),b.gb.bind(b),0).get([]).then(function(a){this.U.Wb(b.getName(),a);hg(this,b,a)}.bind(a));c.ia();return d}
function hg(a,b,c){var d=a.D.lc.get(b.getName())||[];c.forEach(function(a){d.forEach(function(b){var c=a.kb(b.getName());b.add(c,a.id())})})}function fg(a,b){var c=a.La.Eb(0,[b]),d=c.H(b.getName(),b.gb,0).get([]).then(function(a){this.U.Wb(b.getName(),a)}.bind(a)),e=b.Aa().map(function(a){return ig(this,a,c)},a).concat(jg(a,b,c));c.ia();return eb(e.concat(d))}
function ig(a,b,c){c=c.H(b.m(),Vb,1);var d=$f(b);return c.get([]).then(function(a){if(0<a.length){if(kg(b)){var c=Bf.bind(void 0,d,b.m(),b.Ac);a=bg(c,a)}else a=Bf(d,b.m(),b.Ac,a);this.D.set(b.Kc,a)}}.bind(a))}function jg(a,b,c){return c.H(Te(b),Vb,1).get([]).then(function(a){0<a.length&&(a=dg(Te(b),a),this.D.set(b.getName(),a))}.bind(a))};function lg(){this.W=y();this.lc=y()}lg.prototype.Ga=function(a){a.sa().forEach(function(a){var c=[];this.lc.set(a.getName(),c);var d=Te(a);if(null===this.get(d)){var e=new cg(d);c.push(e);this.W.set(d,e)}a.Aa().forEach(function(a){var b;b=$f(a);b=new sf(a.m(),b,a.Ac);b=kg(a)&&1==a.f.length?new ag(b):b;c.push(b);this.W.set(a.m(),b)},this)},this);return w()};lg.prototype.get=function(a){return this.W.get(a)||null};
lg.prototype.set=function(a,b){var c=this.lc.get(a)||null;null===c&&(c=[],this.lc.set(a,c));for(var d=null,e=0;e<c.length;e++)if(c[e].getName()==b.getName()){d=e;break}null!==d&&0<c.length?c.splice(d,1,b):c.push(b);this.W.set(b.getName(),b)};function mg(a,b){var c=[],d=null,e=null;Td(a,function(a){var h=b(a);null==a.getParent()?e=h:Qd(d,h);var k=a.getParent();null!==k&&L(k).length==L(d).length&&(k=c.indexOf(d),-1!=k&&c.splice(k,1));1<L(a).length&&c.push(h);d=null===a.h?c[c.length-1]:h});return e}function ng(a){return og(a,function(a){return null===a.h})}
function pg(a){var b=a.getParent(),c=0;null!==b&&(c=L(b).indexOf(a),b.removeChild(a));var d=L(a).slice();d.forEach(function(d,f){a.removeChild(d);null===b||Pd(b,d,c+f)});return{parent:b,children:d}}function qg(a,b){L(a).slice().forEach(function(c){a.removeChild(c);Qd(b,c)});Qd(a,b)}function rg(a){var b=Od(a,0);pg(a);qg(b,a);return b}
function sg(a,b,c){var d=Od(a,0),e=L(d).slice();if(!e.some(function(a){return b(a)}))return a;pg(a);e.forEach(function(e,h){if(b(e)){var k=c(a);Rd(d,h);Qd(k,e);Pd(d,k,h)}});return d}function tg(a,b,c,d){var e=a.getParent();null!==e&&(a=L(e).indexOf(a),Rd(e,a),Pd(e,c,a));L(b).slice().forEach(function(a){b.removeChild(a);Qd(d,a)});return c}function og(a,b,c){function d(a){b(a)&&e.push(a);null!=c&&c(a)||L(a).forEach(d)}var e=[];d(a);return e}
function ug(a,b){var c=b||function(a){return a.toString()+"\n"},d="";Td(a,function(a){for(var b=0;b<Nd(a);b++)d+="-";d+=c(a)});return d};function vg(a){Ud.call(this);this.Sb=a;this.Oa=!1}t(vg,Ud);m=vg.prototype;m.Mb=function(){return mg(this,function(a){if(a instanceof vg){var b=new vg(a.Sb);b.Oa=a.Oa;a=a.Y();b.pa=a;return b}return a.Mb()})};m.hb=function(a){var b=a||[];Td(this,function(a){a!=this&&a.hb(b)}.bind(this));a=B(b);return C(a)};m.qd=function(a){this.Oa!=a&&(this.Oa=a,this.Sb="and"==this.Sb?"or":"and",L(this).forEach(function(b){return b.qd(a)}))};
m.eval=function(a){var b=L(this).map(function(b){return b.eval(a)});return wg(this,b)};function wg(a,b){return"and"==a.Sb?vd(b):wd(b)}m.toString=function(){return"combined_pred_"+this.Sb.toString()};function xg(a,b,c){Ud.call(this);this.ha=a;this.ka=b;this.C=c;this.Wd=null;a=Kd();this.tc=Ld(a,this.ha.G(),this.C);this.dg=a.Se.get(this.ha.G())||null}t(xg,Ud);m=xg.prototype;m.Mb=function(){var a=new xg(this.ha,this.ka,this.C),b=this.Y();a.pa=b;return a};m.hb=function(a){return null!=a?(a.push(this.ha),a.push(this.ka),a):[this.ha,this.ka]};
m.reverse=function(){var a=this.C;switch(this.C){case "gt":a="lt";break;case "lt":a="gt";break;case "gte":a="lte";break;case "lte":a="gte"}return new xg(this.ka,this.ha,a)};m.eval=function(a){var b=a.entries.filter(function(a){var b=I(a,this.ha);a=I(a,this.ka);return this.tc(b,a)},this);return new G(b,H(a))};m.toString=function(){return"join_pred("+this.ha.m()+" "+this.C+" "+this.ka.m()+")"};
function yg(a,b,c){var d=null,e=null;-1!=H(b).indexOf(J(a.ha.H()))?(d=b,e=c):(d=c,e=b);if(d.entries.length>e.entries.length){a:{b=a.ha;a.ha=a.ka;a.ka=b;b=a.C;switch(a.C){case "gt":b="lt";break;case "lt":b="gt";break;case "gte":b="lte";break;case "lte":b="gte";break;default:break a}a.C=b;a.tc=Ld(Kd(),a.ha.G(),a.C)}return[e,d]}return[d,e]}function zg(a){var b={};a.hb().forEach(function(a){b[a.getName()]=null});return b}
function Ag(a,b,c){null===a.Wd&&(a.Wd=zg(a.ka.H()));var d=new yd(new Tb(-1,a.Wd),!1);return Bd(b,c,d,[J(a.ka.H())])}
function Bg(a,b,c,d){var e=[b,c];d||(e=yg(a,b,c));b=e[0];c=e[1];var e=b,f=c,h=a.ha,k=a.ka;d&&(e=c,f=b,h=a.ka,k=a.ha);var n=new Jc,A=[];e.entries.forEach(function(a){var b=String(I(a,h));n.set(b,a)});var O=H(e),ca=H(f);f.entries.forEach(function(a){var b=I(a,k),c=String(b);null!==b&&n.has(c)?n.get(c).forEach(function(b){b=Bd(a,ca,b,O);A.push(b)}):d&&A.push(Ag(this,a,ca))}.bind(a));a=H(b).concat(H(c));return new G(A,a)}
function Cg(a,b,c,d,e){function f(a,b){var c=new yd(b,1<O.length),c=Bd(a,ca,c,O);A.push(c)}var h=d.Vf.H(),k=b,n=c;-1!=H(b).indexOf(J(h))&&(k=c,n=b);var A=[],O=H(n),ca=H(k);k.entries.forEach(function(a){var b=this.dg(I(a,d.kg)),b=d.index.get(b);0!=b.length&&(d.index.Ia()?f(a,e.get(b[0])):kf(e,b).forEach(f.bind(null,a)))},a);a=H(k).concat(H(n));return new G(A,a)};function Dg(a,b,c){return null===b?new Wd(a,b,c):q(b.m)?new xg(a,b,c):new Wd(a,b,c)};var Eg={};r("lf.schema.DataStoreType",Eg);Eg.INDEXED_DB=0;Eg.MEMORY=1;Eg.LOCAL_STORAGE=2;Eg.FIREBASE=3;Eg.WEB_SQL=4;Eg.OBSERVABLE_STORE=5;function Fg(a,b,c,d){this.Kc=a;this.name=b;this.Ac=c;this.f=d}Fg.prototype.m=function(){return this.Kc+"."+this.name};function kg(a){return a.f.some(function(a){return a.ba.ic()})}function R(a,b,c,d){this.A=a;this.qa=c;this.J=b;this.ld=d;this.bb=null}r("lf.schema.Table",R);R.prototype.getName=g("A");R.prototype.getName=R.prototype.getName;R.prototype.Xa=g("bb");
function J(a){return a.bb||a.A}R.prototype.pc=function(a){var b=new this.constructor(this.A);b.bb=a;b.wg=this.wg;return b};R.prototype.as=R.prototype.pc;R.prototype.createRow=R.prototype.wb;R.prototype.deserializeRow=R.prototype.gb;R.prototype.Aa=g("qa");R.prototype.getIndices=R.prototype.Aa;R.prototype.hb=g("J");R.prototype.getColumns=R.prototype.hb;R.prototype.getConstraint=R.prototype.Gb;R.prototype.Db=g("ld");R.prototype.persistentIndex=R.prototype.Db;function Te(a){return a.A+".#"};function S(a,b){this.child=a;this.Lb=b;this.bb=null}m=S.prototype;m.getName=function(){return this.Lb+"("+this.child.getName()+")"};m.m=function(){return this.Lb+"("+this.child.m()+")"};m.H=function(){return this.child.H()};m.toString=function(){return this.m()};m.G=function(){return this.child.G()};m.Xa=g("bb");m.Aa=function(){return[]};m.za=l(null);m.ic=l(!1);m.pc=function(a){this.bb=a;return this};S.prototype.as=S.prototype.pc;
function Gg(a){for(var b=[a];a instanceof S;)b.push(a.child),a=a.child;return b}function Hg(a){this.bb=a||null;this.S=new R("#UnknownTable",[],[],!1)}m=Hg.prototype;m.getName=l("*");m.m=function(){return this.getName()};m.toString=function(){return this.m()};m.H=g("S");m.G=l(4);m.Xa=g("bb");m.Aa=function(){return[]};m.za=l(null);m.ic=l(!1);r("lf.fn.avg",function(a){return new S(a,"AVG")});function Ig(a){return new S(a||new Hg,"COUNT")}r("lf.fn.count",Ig);function Jg(a){return new S(a,"DISTINCT")}r("lf.fn.distinct",Jg);r("lf.fn.max",function(a){return new S(a,"MAX")});r("lf.fn.min",function(a){return new S(a,"MIN")});r("lf.fn.stddev",function(a){return new S(a,"STDDEV")});r("lf.fn.sum",function(a){return new S(a,"SUM")});r("lf.fn.geomean",function(a){return new S(a,"GEOMEAN")});function T(a,b){K.call(this);this.Mf=b}t(T,K);T.prototype.exec=function(a,b){switch(this.Mf){case 1:return Kg(this,a,b);case 0:return Lg(this,a,b);default:return Mg(this,a,b)}};T.prototype.toString=l("dummy_node");T.prototype.Lc=function(){return this.toString()};function Mg(a,b,c){return new v(function(a){a(this.fa([],b,c))}.bind(a))}function Kg(a,b,c){return Od(a,0).exec(b,c).then(function(a){return this.fa(a,b,c)}.bind(a))}
function Lg(a,b,c){var d=L(a).map(function(a){return a.exec(b,c)});return eb(d).then(function(a){var d=[];a.forEach(function(a){for(var b=0;b<a.length;++b)d.push(a[b])});return this.fa(d,b,c)}.bind(a))};function Ng(a){T.call(this,0,1);this.we=a}t(Ng,T);Ng.prototype.toString=function(){return"aggregation("+this.we.map(function(a){return a.m()}).toString()+")"};Ng.prototype.fa=function(a){a.forEach(function(a){Og(new Pg(a,this.we))},this);return a};function Pg(a,b){this.Ja=a;this.J=b}
function Og(a){a.J.forEach(function(a){a=Gg(a).reverse();for(var c=1;c<a.length;c++){var d=a[c],e=Gg(d).slice(-1)[0],f=d.child instanceof S?sd(this.Ja,d.child):this.Ja;if(null!==f.Wa&&f.Wa.has(d.m()))break;f=Qg(d.Lb,f,e);e=this.Ja;null===e.Wa&&(e.Wa=y());e.Wa.set(d.m(),f)}},a)}
function Qg(a,b,c){var d=null;switch(a){case "MIN":d=Rg(b,c,function(a,b){return b<a?b:a});break;case "MAX":d=Rg(b,c,function(a,b){return b>a?b:a});break;case "DISTINCT":d=Sg(b,c);break;case "COUNT":d=Tg(b,c);break;case "SUM":d=Ug(b,c);break;case "AVG":a=Tg(b,c);0<a&&(d=Ug(b,c)/a);break;case "GEOMEAN":d=Vg(b,c);break;default:d=Wg(b,c)}return d}function Rg(a,b,c){return a.entries.reduce(function(a,e){var f=I(e,b);return null===f?a:null===a?f:c(a,f)},null)}
function Tg(a,b){return b instanceof Hg?a.entries.length:a.entries.reduce(function(a,d){return a+(fa(I(d,b))?0:1)},0)}function Ug(a,b){return Rg(a,b,function(a,b){return b+a})}function Wg(a,b){var c=[];a.entries.forEach(function(a){a=I(a,b);null===a||c.push(a)});return 0==c.length?null:tb.apply(null,c)}function Vg(a,b){var c=0,d=a.entries.reduce(function(a,d){var h=I(d,b);if(0==h||null===h)return a;c++;return a+Math.log(h)},0);return 0==c?null:Math.pow(Math.E,d/c)}
function Sg(a,b){var c=y();a.entries.forEach(function(a){var e=I(a,b);c.set(e,a)});return new G(z(c),H(a))};function Xg(a,b){this.Da=a;this.aa=b}Xg.prototype.ib=g("Da");Xg.prototype.ca=g("aa");function Yg(){K.call(this)}t(Yg,K);function Zg(a,b){K.call(this);this.table=a;this.values=b}t(Zg,Yg);function $g(a,b){Zg.call(this,a,b)}t($g,Zg);function ah(a){K.call(this);this.table=a}t(ah,Yg);ah.prototype.toString=function(){return"delete("+this.table.getName()+")"};function bh(a,b){K.call(this);this.table=a;this.qe=b}t(bh,Yg);
bh.prototype.toString=function(){var a=[];this.qe&&(a=this.qe.map(function(a){return a.M.getName()},this));return"update("+this.table.getName()+", ["+a.join(",")+"])"};function ch(a){K.call(this);this.I=a}t(ch,Yg);ch.prototype.toString=function(){return"select("+this.I.toString()+")"};function dh(a){K.call(this);this.table=a}t(dh,Yg);dh.prototype.toString=function(){var a="table_access("+this.table.getName();null===this.table.Xa()||(a+=" as "+this.table.Xa());return a+")"};
function eh(){K.call(this)}t(eh,Yg);eh.prototype.toString=l("cross_product");function fh(a,b){K.call(this);this.f=a;this.Ob=b}t(fh,Yg);fh.prototype.toString=function(){var a="project("+this.f.toString();if(null!==this.Ob)var b=this.Ob.map(function(a){return a.m()}).join(", "),a=a+(", groupBy("+b+")");return a+")"};function gh(a){K.call(this);this.N=a}t(gh,Yg);gh.prototype.toString=function(){return"order_by("+he(this.N)+")"};function hh(a){K.call(this);this.f=a}t(hh,Yg);
hh.prototype.toString=function(){return"aggregation("+this.f.toString()+")"};function ih(a){K.call(this);this.f=a}t(ih,Yg);ih.prototype.toString=function(){return"group_by("+this.f.toString()+")"};function jh(a){K.call(this);this.V=a}t(jh,Yg);jh.prototype.toString=function(){return"limit("+this.V+")"};function kh(a){K.call(this);this.K=a}t(kh,Yg);kh.prototype.toString=function(){return"skip("+this.K+")"};function lh(a,b){K.call(this);this.I=a;this.Qb=b}t(lh,Yg);
lh.prototype.toString=function(){return"join(type: "+(this.Qb?"outer":"inner")+", "+this.I.toString()+")"};function mh(){};function nh(){}t(nh,mh);nh.prototype.pb=function(a){this.$=a;this.Ua(this.$);return this.$};nh.prototype.Ua=function(a){if(a instanceof ch){var b=oh(this,a.I),b=ph(this,b);tg(a,a,b[0],b[1]);a==this.$&&(this.$=b[0]);a=b[0]}L(a).forEach(function(a){this.Ua(a)},this)};function oh(a,b){if(0==L(b).length||"and"!=b.Sb)return[b];var c=L(b).slice().map(function(a){b.removeChild(a);return oh(this,a)},a);return Fa(c)}
function ph(a,b){var c=null,d=null;b.map(function(a,b){var h=new ch(a);0==b?c=h:Qd(d,h);d=h},a);return[c,d]};function qh(){}t(qh,mh);qh.prototype.pb=function(a,b){if(3>b.c.length)return a;this.$=a;this.Ua(this.$);return this.$};qh.prototype.Ua=function(a){if(a instanceof eh)for(;2<L(a).length;){for(var b=new eh,c=0;2>c;c++){var d=Rd(a,0);Qd(b,d)}Pd(a,b,0)}L(a).forEach(function(a){this.Ua(a)},this)};function rh(){T.call(this,0,0)}t(rh,T);rh.prototype.toString=l("cross_product");rh.prototype.fa=function(a){var b=a[0],c=a[1];a=[];for(var d=H(b),e=H(c),f=0;f<b.entries.length;f++)for(var h=0;h<c.entries.length;h++){var k=Bd(b.entries[f],d,c.entries[h],e);a.push(k)}b=H(b).concat(H(c));return[new G(a,b)]};function sh(a,b){ke.call(this,a,b);this.Ea=a.l(lc);this.Jb=a.l(mc)}t(sh,ke);sh.prototype.getPriority=l(2);sh.prototype.Zd=function(a){0==this.G()?th(this,a):this.Ic()};function th(a,b){a.nd.forEach(function(a,d){a instanceof ge&&ne(this.Jb,a,b[d])},a)}sh.prototype.Ic=function(){var a=pe(this.Jb,this.ca());0!=a.length&&(a=new me(this.global,a),qe(this.Ea,a))};function uh(a){ae.call(this,a)}t(uh,ae);uh.prototype.ca=function(){var a=B();a.add(this.c);vh(this,this.c.getName(),a);return a};function vh(a,b,c){var d=wh(a.ba.info(),b,1);wh(a.ba.info(),b).forEach(c.add.bind(c));d.forEach(function(a){vh(this,a.getName(),c)},a)}uh.prototype.clone=function(){var a=new uh(this.ba);de(a,this);a.c=this.c;return a};uh.prototype.bind=function(a){uh.ab.bind.call(this,a);ee(this,a);return this};function xh(a){ae.call(this,a)}t(xh,ae);xh.prototype.ca=function(){var a=B();a.add(this.Ha);var b=this.ba.info();yh(this.Ha.getName(),b.$e).forEach(a.add.bind(a));this.ac&&wh(b,this.Ha.getName()).forEach(a.add.bind(a));return a};xh.prototype.clone=function(){var a=new xh(this.ba);de(a,this);a.Ha=this.Ha;this.values&&(a.values=this.values instanceof Cd?this.values:this.values.slice());a.ac=this.ac;a.bc=this.bc;return a};
xh.prototype.bind=function(a){xh.ab.bind.call(this,a);this.bc&&(this.values=this.bc instanceof Cd?a[this.bc.za()]:this.bc.map(function(b){return b instanceof Cd?a[b.za()]:b}));return this};function zh(a){ae.call(this,a)}t(zh,ae);zh.prototype.ca=function(){var a=B();a.add(this.table);var b=this.set.map(function(a){return a.M.m()}),c=this.ba.info();Ah(c,b).forEach(a.add.bind(a));Bh(c,b).forEach(a.add.bind(a));return a};zh.prototype.clone=function(){var a=new zh(this.ba);de(a,this);a.table=this.table;a.set=this.set?this.set.slice():this.set;return a};zh.prototype.bind=function(a){zh.ab.bind.call(this,a);this.set.forEach(function(b){-1!=b.Qc&&(b.value=a[b.Qc])});ee(this,a);return this};function Ch(a,b){if(null==b)return"NULL";switch(a){case 1:return b?1:0;case 3:case 4:return b;case 0:return"'"+Xb(b)+"'";default:return"'"+b.toString()+"'"}}function Dh(a,b){var c=a.ac?"INSERT OR REPLACE":"INSERT",d=a.Ha.hb(),c=c+(" INTO "+a.Ha.getName()+"("),c=c+d.map(function(a){return a.getName()}).join(", "),c=c+") VALUES (";return a.values.map(function(a){var f=d.map(function(c){var d=a.o[c.getName()];return b?null!=d?"#":"NULL":Ch(c.G(),d)});return c+f.join(", ")+");"}).join("\n")}
function Eh(a){switch(a){case "between":return"BETWEEN";case "eq":return"=";case "gte":return">=";case "gt":return">";case "in":return"IN";case "lte":return"<=";case "lt":return"<";case "match":return"LIKE";case "neq":return"<>";default:return"UNKNOWN"}}function Fh(a,b,c,d){return a instanceof Cd?"?"+a.za().toString():d?null!=a?"#":"NULL":"match"==b?"'"+a.toString()+"'":"in"==b?"("+a.map(function(a){return Ch(c,a)}).join(", ")+")":"between"==b?Ch(c,a[0])+" AND "+Ch(c,a[1]):Ch(c,a).toString()}
function Gh(a,b){return L(a).map(function(a){return"("+Hh(a,b)+")"}).join("and"==a.Sb?" AND ":" OR ")}function Ih(a){return[a.ha.m(),Eh(a.C),a.ka.m()].join(" ")}function Hh(a,b){if(a instanceof Wd){var c=a.M.m(),d=Eh(a.C),e=Fh(a.value,a.C,a.M.G(),b);return"="==d&&"NULL"==e?[c,"IS NULL"].join(" "):"<>"==d&&"NULL"==e?[c,"IS NOT NULL"].join(" "):[c,d,e].join(" ")}if(a instanceof vg)return Gh(a,b);if(a instanceof xg)return Ih(a);throw new D(357,typeof a);}
function Jh(a,b){var c=Hh(a,b);return c?" WHERE "+c:""}function Kh(a,b){var c="UPDATE "+a.table.getName()+" SET ",c=c+a.set.map(function(a){var b=a.M.m()+" = ";return-1!=a.Qc?b+"?"+a.Qc.toString():b+Ch(a.M.G(),a.value).toString()}).join(", ");a.w&&(c+=Jh(a.w,b));return c+";"}
function Lh(a,b){var c="*";a.f.length&&(c=a.f.map(function(a){return a.Xa()?a.m()+" AS "+a.Xa():a.m()}).join(", "));c="SELECT "+c+" FROM ";null!=a.Cb&&0!=a.Cb.size?c+=Mh(a,b):(c+=a.c.map(Nh).join(", "),a.w&&(c+=Jh(a.w,b)));if(a.N)var d=a.N.map(function(a){return a.M.m()+(0==a.mb?" DESC":" ASC")}).join(", "),c=c+(" ORDER BY "+d);a.ja&&(d=a.ja.map(function(a){return a.m()}).join(", "),c+=" GROUP BY "+d);a.V&&(c+=" LIMIT "+a.V.toString());a.K&&(c+=" SKIP "+a.K.toString());return c+";"}
function Nh(a){return J(a)!=a.getName()?a.getName()+" AS "+J(a):a.getName()}function Mh(a,b){for(var c=og(a.w,function(a){return a instanceof xg}),d=c.map(Ih),e=Nh(a.c[0]),f=1;f<a.c.length;f++)var h=Nh(a.c[f]),e=a.Cb.has(c[d.length-f].Y())?e+(" LEFT OUTER JOIN "+h):e+(" INNER JOIN "+h),e=e+(" ON ("+d[d.length-f]+")");c=Od(a.w,0);c instanceof xg||(e+=" WHERE "+Hh(c,b));return e}
function Oh(a,b){var c=b||!1,d=a.a.clone();if(d instanceof xh)return Dh(d,c);if(d instanceof uh){var e="DELETE FROM "+d.c.getName();d.w&&(e+=Jh(d.w,c));return e+";"}if(d instanceof zh)return Kh(d,c);if(d instanceof ge)return Lh(d,c);throw new D(358,typeof d);};function U(a,b){this.global=a;this.vg=a.l(kc);this.Ea=a.l(lc);this.a=b}r("lf.query.BaseBuilder",U);U.prototype.exec=function(){try{this.cb()}catch(a){return bb(a)}return new v(function(a,b){var c=new sh(this.global,[this.yc()]);qe(this.Ea,c).then(function(b){a(qd(b[0]))},b)},this)};U.prototype.exec=U.prototype.exec;U.prototype.Of=function(){var a=function(a){return a.Lc(this.a)+"\n"}.bind(this);return ug(Ph(this).ib(),a)};U.prototype.explain=U.prototype.Of;
U.prototype.bind=function(a){this.a.bind(a);return this};U.prototype.bind=U.prototype.bind;U.prototype.Dg=function(a){return Oh(this,a)};U.prototype.toSql=U.prototype.Dg;U.prototype.cb=aa();function Ph(a){if(null==a.af){var b;b=a.vg;var c=a.a,d=b.gg.create(c);b=b.sg.create(d,c);a.af=b}return a.af}U.prototype.yc=function(){return{context:this.a.clone(),be:Ph(this)}};function Qh(a){U.call(this,a,new uh(a.l(nc)))}t(Qh,U);r("lf.query.DeleteBuilder",Qh);Qh.prototype.c=function(a){if(null!=this.a.c)throw new D(515);this.a.c=a;return this};Qh.prototype.from=Qh.prototype.c;Qh.prototype.w=function(a){this.xd();this.a.w=a;return this};Qh.prototype.where=Qh.prototype.w;Qh.prototype.xd=function(){if(null==this.a.c)throw new D(548);if(null!=this.a.w)throw new D(516);};Qh.prototype.cb=function(){Qh.ab.cb.call(this);if(null==this.a.c)throw new D(517);};function Rh(a,b){U.call(this,a,new xh(a.l(nc)));this.a.ac=b||!1}t(Rh,U);r("lf.query.InsertBuilder",Rh);Rh.prototype.cb=function(){Rh.ab.cb.call(this);var a=this.a;if(null==a.Ha||null==a.values)throw new D(518);if(a.ac&&null===a.Ha.Gb().Zc())throw new D(519);};Rh.prototype.Ha=function(a){if(null!=this.a.Ha)throw new D(520);this.a.Ha=a;return this};Rh.prototype.into=Rh.prototype.Ha;
Rh.prototype.values=function(a){if(null!=this.a.values)throw new D(521);a instanceof Cd||a.some(function(a){return a instanceof Cd})?this.a.bc=a:this.a.values=a;return this};Rh.prototype.values=Rh.prototype.values;function Sh(a){return Th("and",Array.prototype.slice.call(arguments))}r("lf.op.and",Sh);r("lf.op.or",function(a){return Th("or",Array.prototype.slice.call(arguments))});function Th(a,b){var c=new vg(a);b.forEach(function(a){Qd(c,a)});return c}r("lf.op.not",function(a){a.qd(!0);return a});function V(a,b){U.call(this,a,new ge(a.l(nc)));this.Ge=this.sd=!1;this.a.f=b;Uh(this);Vh(this)}t(V,U);r("lf.query.SelectBuilder",V);V.prototype.cb=function(){V.ab.cb.call(this);var a=this.a;if(null==a.c)throw new D(522);if(q(a.Rb)&&!q(a.V)||q(a.Yb)&&!q(a.K))throw new D(523);null!=this.a.ja?Wh(this):Xh(this)};function Uh(a){var b=a.a.f.filter(function(a){return a instanceof S&&"DISTINCT"==a.Lb},a);if(0!=b.length&&(1!=b.length||1!=a.a.f.length))throw new D(524);}
function Wh(a){var b=a.a.f.filter(function(a){return!(a instanceof S)}).map(function(a){return a.m()}),c=!1;if(0==a.a.ja.length||0==a.a.f.length)c=!0;else{var d=a.a.ja.map(function(a){return a.m()});(c=b.some(function(a){return-1==d.indexOf(a)}))||(c=a.a.ja.some(function(a){a=a.G();return 6==a||0==a}))}if(c)throw new D(525);}function Xh(a){var b=a.a.f.some(function(a){return a instanceof S},a);a=a.a.f.some(function(a){return!(a instanceof S)},a)||0==a.a.f.length;if(b&&a)throw new D(526);}
function Vh(a){a.a.f.forEach(function(a){if(a instanceof S&&!Yh(a.Lb,a.G()))throw new D(527,a.m());},a)}function Zh(a,b){if(null==a.a.c)throw new D(b);}V.prototype.c=function(a){if(this.Ge)throw new D(515);this.Ge=!0;null==this.a.c&&(this.a.c=[]);this.a.c.push.apply(this.a.c,Array.prototype.slice.call(arguments));return this};V.prototype.from=V.prototype.c;V.prototype.w=function(a){Zh(this,548);if(this.sd)throw new D(516);this.sd=!0;$h(this,a);return this};V.prototype.where=V.prototype.w;
function $h(a,b){if(null!=a.a.w){var c=Sh(b,a.a.w);a.a.w=c}else a.a.w=b}V.prototype.Zf=function(a,b){Zh(this,542);if(this.sd)throw new D(547);this.a.c.push(a);$h(this,b);return this};V.prototype.innerJoin=V.prototype.Zf;V.prototype.eg=function(a,b){Zh(this,542);if(!(b instanceof xg))throw new D(541);if(this.sd)throw new D(547);this.a.c.push(a);null==this.a.Cb&&(this.a.Cb=B());var c=b;J(a)!=J(b.ka.H())&&(c=b.reverse());this.a.Cb.add(c.Y());$h(this,c);return this};V.prototype.leftOuterJoin=V.prototype.eg;
V.prototype.V=function(a){if(null!=(this.a.V||this.a.Rb))throw new D(528);if(a instanceof Cd)this.a.Rb=a;else{if(0>a)throw new D(531);this.a.V=a}return this};V.prototype.limit=V.prototype.V;V.prototype.K=function(a){if(null!=(this.a.K||this.a.Yb))throw new D(529);if(a instanceof Cd)this.a.Yb=a;else{if(0>a)throw new D(531);this.a.K=a}return this};V.prototype.skip=V.prototype.K;V.prototype.N=function(a,b){Zh(this,549);null==this.a.N&&(this.a.N=[]);this.a.N.push({M:a,mb:null!=b?b:1});return this};
V.prototype.orderBy=V.prototype.N;V.prototype.ja=function(a){Zh(this,549);if(null!=this.a.ja)throw new D(530);null==this.a.ja&&(this.a.ja=[]);this.a.ja.push.apply(this.a.ja,Array.prototype.slice.call(arguments));return this};V.prototype.groupBy=V.prototype.ja;function Yh(a,b){switch(a){case "COUNT":case "DISTINCT":return!0;case "AVG":case "GEOMEAN":case "STDDEV":case "SUM":return 4==b||3==b;case "MAX":case "MIN":return 4==b||3==b||5==b||2==b}return!1}
V.prototype.clone=function(){var a=new V(this.global,this.a.f);a.a=this.a.clone();a.a.Tc=null;return a};V.prototype.clone=V.prototype.clone;function ai(a,b){U.call(this,a,new zh(a.l(nc)));this.a.table=b}t(ai,U);r("lf.query.UpdateBuilder",ai);ai.prototype.set=function(a,b){var c={Qc:b instanceof Cd?b.za():-1,M:a,value:b};null!=this.a.set?this.a.set.push(c):this.a.set=[c];return this};ai.prototype.set=ai.prototype.set;ai.prototype.w=function(a){this.xd();this.a.w=a;return this};ai.prototype.where=ai.prototype.w;ai.prototype.xd=function(){if(null!=this.a.w)throw new D(516);};
ai.prototype.cb=function(){ai.ab.cb.call(this);if(null==this.a.set)throw new D(532);if(this.a.set.some(function(a){return a.value instanceof Cd}))throw new D(501);};function bi(a){this.a=a;this.Da=null}bi.prototype.hc=function(){null===this.Da&&(this.Da=this.Xc());return this.Da};function ci(a){bi.call(this,a)}t(ci,bi);ci.prototype.Xc=function(){return this.a.ac?new $g(this.a.Ha,this.a.values):new Zg(this.a.Ha,this.a.values)};function di(a){bi.call(this,a)}t(di,bi);di.prototype.Xc=function(){var a=new bh(this.a.table,this.a.set),b=null!=this.a.w?new ch(this.a.w.Mb()):null,c=new dh(this.a.table);null===b?Qd(a,c):(Qd(b,c),Qd(a,b));return a};function ei(a,b,c){this.Da=a;this.ce=b;this.Vb=c}ei.prototype.hc=function(){this.Vb.forEach(function(a){this.Da=a.pb(this.Da,this.ce)},this);return this.Da};function fi(a,b){bi.call(this,a);this.Vb=b}t(fi,bi);fi.prototype.Xc=function(){var a=new ah(this.a.c),b=null!=this.a.w?new ch(this.a.w.Mb()):null,c=new dh(this.a.c);null===b?Qd(a,c):(Qd(b,c),Qd(a,b));return(new ei(a,this.a,this.Vb)).hc()};function gi(){}t(gi,mh);gi.prototype.pb=function(a,b){if(2>b.c.length)return a;this.$=a;this.Ua(this.$,b);return this.$};gi.prototype.Ua=function(a,b){if(a instanceof ch&&a.I instanceof xg){var c=a.I.Y(),d=Od(a,0);d instanceof eh&&(c=null!=b.Cb&&b.Cb.has(c),c=new lh(a.I,c),tg(a,d,c,c),a==this.$&&(this.$=c),a=c)}L(a).forEach(function(a){this.Ua(a,b)},this)};function hi(){this.Pc=B()}t(hi,mh);hi.prototype.pb=function(a,b){this.Pc.clear();if(!q(b.w))return a;this.$=a;this.Ua(this.$);this.Pc.clear();return this.$};hi.prototype.Ua=function(a){if(ii(a)){var b=a.I instanceof Wd?ji(this,a):ki(this,a);this.Pc.add(a);b==a&&(b=Od(a,0));null!==b&&(fa(b.getParent())&&(this.$=b),ii(b)&&!this.Pc.has(b)&&this.Ua(b))}else L(a).forEach(function(a){this.Ua(a)},this)};
function li(a,b,c){var d=b;if(Od(b,0)instanceof ch)d=rg(b),li(a,b,c);else if(mi(b)){var e=[],d=sg(b,c,function(a){a=new ch(a.I);e.push(a);return a});e.forEach(function(a){li(this,a,c)},a)}return d}function ji(a,b){var c=B([J(b.I.M.H())]),d=function(a){return ni(this,a,c)}.bind(a);return li(a,b,d)}function ki(a,b){var c=B([J(b.I.ha.H()),J(b.I.ka.H())]),d=function(a){return ni(this,a,c)}.bind(a);return li(a,b,d)}
function ni(a,b,c){var d=B();ng(b).forEach(function(a){d.add(J(a.table))},a);b instanceof dh&&d.add(J(b.table));return oc(d,c)}function ii(a){return a instanceof ch&&!(a.I instanceof vg)}function mi(a){a=Od(a,0);return a instanceof eh||a instanceof lh};function oi(a,b){bi.call(this,a);this.Vb=b;this.ef=this.We=this.nf=this.Ze=this.xe=this.Le=this.mf=this.De=this.pf=null}t(oi,bi);
oi.prototype.Xc=function(){pi(this);2<=this.a.c.length&&(this.De=new eh);this.mf=null!=this.a.w?new ch(this.a.w.Mb()):null;this.a.N&&(this.Ze=new gh(this.a.N));null!=this.a.K&&0<this.a.K&&(this.nf=new kh(this.a.K));null!=this.a.V&&(this.We=new jh(this.a.V));null!=this.a.ja&&(this.Le=new ih(this.a.ja));qi(this);this.ef=new fh(this.a.f||[],this.a.ja||null);var a=ri(this);return(new ei(a,this.a,this.Vb)).hc()};
function ri(a){for(var b=[a.We,a.nf,a.ef,a.Ze,a.xe,a.Le,a.mf,a.De],c=null,d=null,e=0;e<b.length;e++){var f=b[e];null!==f&&(null===d?d=f:Qd(b[c],f),c=e)}a.pf.forEach(function(a){Qd(b[c],a)});return d}function pi(a){a.pf=a.a.c.map(function(a){return new dh(a)},a)}function qi(a){var b=a.a.f.filter(function(a){return a instanceof S});null!=a.a.N&&a.a.N.forEach(function(a){a.M instanceof S&&b.push(a.M)});0<b.length&&(a.xe=new hh(b))};function si(){this.ie=[new nh,new qh,new hi,new gi];this.Hd=[new nh]}si.prototype.create=function(a){var b=null;if(a instanceof xh)b=new ci(a);else if(a instanceof uh)b=new fi(a,this.Hd);else if(a instanceof ge)b=new oi(a,this.ie);else if(a instanceof zh)b=new di(a);else throw new D(513);b=b.hc();return new Xg(b,a.ca())};function ti(a){T.call(this,0,1);this.S=a}t(ti,T);ti.prototype.toString=function(){return"delete("+this.S.getName()+")"};ti.prototype.fa=function(a,b){var c=a[0].entries.map(function(a){return a.ua});b.remove(this.S,c);return[ud()]};function ui(a,b){T.call(this,0,-1);this.table=b;this.D=a.l(jc)}t(ui,T);ui.prototype.toString=function(){return"get_row_count("+this.table.getName()+")"};ui.prototype.fa=function(){var a=this.D.get(Te(this.table)),b=new G([],[this.table.getName()]),c=Ig(),a=a.Ka().la;null===b.Wa&&(b.Wa=y());b.Wa.set(c.m(),a);return[b]};function vi(a,b){T.call(this,0,-1);this.U=a.l(ic);this.D=a.l(jc);this.table=b}t(vi,T);vi.prototype.toString=function(){var a="table_access("+this.table.getName();null===this.table.Xa()||(a+=" as "+this.table.Xa());return a+")"};vi.prototype.fa=function(){var a=this.D.get(Te(this.table)).Ya();return[xd(kf(this.U,a),[J(this.table)])]};function wi(a){this.i=a}t(wi,mh);wi.prototype.pb=function(a,b){this.$=a;if(!this.zd(b))return a;var c=og(a,function(a){return a instanceof vi})[0],d=new ui(this.i,c.table);tg(c,c,d,d);return this.$};wi.prototype.zd=function(a){return 1==a.f.length&&1==a.c.length&&null==a.w&&null==a.V&&null==a.K&&null==a.ja?(a=a.f[0],a instanceof S&&"COUNT"==a.Lb&&a.child instanceof Hg):!1};function xi(a){T.call(this,0,1);this.Ke=a}t(xi,T);xi.prototype.toString=function(){return"groupBy("+this.Ke.map(function(a){return a.m()}).toString()+")"};xi.prototype.fa=function(a){return yi(this,a[0])};function yi(a,b){var c=new Jc,d=function(a){return this.Ke.map(function(b){return I(a,b)},this).join(",")}.bind(a);b.entries.forEach(function(a){c.set(d(a),a)},a);return c.keys().map(function(a){return new G(c.get(a),H(b))},a)};function zi(a,b,c){T.call(this,0,0);this.D=a.l(jc);this.U=a.l(ic);this.I=b;this.Qb=c;this.vd="eq"==this.I.C?0:2;this.Ne=null}t(zi,T);var Ai=["hash","index_nested_loop","nested_loop"];zi.prototype.toString=function(){return"join(type: "+(this.Qb?"outer":"inner")+", impl: "+Ai[this.vd]+", "+this.I.toString()+")"};
zi.prototype.fa=function(a){switch(this.vd){case 0:return[Bg(this.I,a[0],a[1],this.Qb)];case 1:return[Cg(this.I,a[0],a[1],this.Ne,this.U)];default:var b=this.I,c=a[0];a=a[1];var d=this.Qb,e=[c,a];d||(e=yg(b,c,a));c=e[0];a=e[1];for(var e=[],f=H(c),h=H(a),k=c.entries.length,n=a.entries.length,A=n+256-1>>8,O=0;O<A;){for(var ca=0;ca<k;ca++){var vb=!1,Nf=I(c.entries[ca],b.ha);if(null!==Nf)for(var Yb=Math.min(O+1<<8,n),wb=O<<8;wb<Yb;wb++)if(b.tc(Nf,I(a.entries[wb],b.ka))){var vb=!0,Rc=Bd(c.entries[ca],
f,a.entries[wb],h);e.push(Rc)}d&&!vb&&e.push(Ag(b,c.entries[ca],f))}O++}b=H(c).concat(H(a));return[new G(e,b)]}};function Bi(a,b){a.vd=1;var c=a.D.get(b.za().m());a.Ne={Vf:b,kg:b==a.I.ha?a.I.ka:a.I.ha,index:c}};function Ci(a){T.call(this,0,-1);this.ff=a}t(Ci,T);Ci.prototype.toString=function(){return"no_op_step("+H(this.ff[0]).join(",")+")"};Ci.prototype.fa=g("ff");function Di(){}t(Di,mh);Di.prototype.pb=function(a,b){this.$=a;if(!this.zd(b))return a;og(a,function(a){return a instanceof zi}).forEach(this.ug,this);return this.$};Di.prototype.zd=function(a){return 1<a.c.length};
Di.prototype.ug=function(a){if("eq"==a.I.C&&!a.Qb){var b=function(b){if(!(b instanceof vi))return null;b=J(b.table)==J(a.I.ka.H())?a.I.ka:a.I.ha;return fa(b.za())?null:b},c=b(Od(a,0)),b=b(Od(a,1));if(null!==c||null!==b){b=null===b?c:b;Bi(a,b);var d=new G([],[J(b.H())]);Sd(a,new Ci([d]),b==c?0:1)}}};function Ei(a){a=a.map(function(a){return a.Hb()});a=Ab.apply(null,a);var b=[];zb(a,function(a){b.push(a)});return b}function Fi(a){this.Pb=a}Fi.prototype.Yc=function(){return 1==this.Pb.f.length?[kd()]:[this.Pb.f.map(function(){return kd()})]};function Gi(a,b){this.Pb=a;this.Ca=b;this.Dd=this.Ue=null}function Hi(a,b){var c=y();a.Ca.keys().forEach(function(a){var e=this.Ca.get(a).map(function(a){return be(b,a)},this),f=new od([kd()]);e.forEach(function(a){f=pd(f,Zd(a))});c.set(a,f)},a);return c}
Gi.prototype.Yc=function(a){if(this.Ue==a)return this.Dd;for(var b=Hi(this,a),c=this.Pb.f.length-1;0<=c;c--){var d=this.Pb.f[c];if(null!==(b.get(d.ba.getName())||null))break;b.set(d.ba.getName(),new od([kd()]))}this.Dd=1==this.Pb.f.length?z(b)[0].Hb():Ei(Ii(this,b));this.Ue=a;return this.Dd};function Ii(a,b){var c=y(),d=0;a.Pb.f.forEach(function(a){c.set(a.ba.getName(),d);d++});return Sb(b).sort(function(a,b){return c.get(a)-c.get(b)}).map(function(a){return b.get(a)})};function Ji(a,b){this.me=b;this.D=a.l(jc)}function Ki(a,b,c){c=c.filter(a.$f,a);if(0==c.length)return null;a=Li(a,c);if(0==a.length)return null;if(1==a.length)return a[0];var d=Number.MAX_VALUE;return a.reduce(function(a,c){var h=Mi(c,b);return h<d?(d=h,c):a},null)}
function Li(a,b){return a.me.Aa().map(function(a){a=new Ni(this.D,a);Oi(a,b);return a},a).filter(function(a){if(null===a.Ca)a=!1;else{for(var b=!1,e=!0,f=0;f<a.zb.f.length;f++){var h=a.Ca.has(a.zb.f[f].ba.getName());if(b&&h){e=!1;break}h||(b=!0)}a=e}return a})}
Ji.prototype.$f=function(a){var b;if(b=a instanceof Wd)Xd(a),b=null!==a.value&&("between"==a.C||"in"==a.C||"eq"==a.C||"gt"==a.C||"gte"==a.C||"lt"==a.C||"lte"==a.C);!(b=!b||a.M.H()!=this.me)&&(b="in"==a.C)&&(a=a.value.length,b=this.D.get(Te(this.me)),b=Math.floor(.02*b.Ka().la),b=a>b);return b?!1:!0};function Ni(a,b){this.D=a;this.zb=b;this.Wf=B(this.zb.f.map(function(a){return a.ba.getName()}));this.Td=this.Ca=null}function Pi(a){null===a.Td&&(a.Td=new Gi(a.zb,a.Ca));return a.Td}
function Oi(a,b){b.forEach(function(a){var b=a.hb()[0].getName();this.Wf.has(b)&&(null===this.Ca&&(this.Ca=new Jc),this.Ca.set(b,a.Y()))},a)}function Mi(a,b){var c=Pi(a).Yc(b),d=a.D.get(a.zb.m());return c.reduce(function(a,b){return a+d.Vc(b)},0)};function Qi(a,b,c,d){T.call(this,0,-1);this.D=a.l(jc);this.index=b;this.Te=c;this.ge=d;this.Oc=this.Nc=!1}t(Qi,T);Qi.prototype.toString=function(){return"index_range_scan("+this.index.m()+", ?, "+(this.ge?"reverse":"natural")+(this.Nc?", limit:?":"")+(this.Oc?", skip:?":"")+")"};Qi.prototype.Lc=function(a){var b=this.toString(),c=this.Te.Yc(a),b=b.replace("?",c.toString());this.Nc&&(b=b.replace("?",a.V.toString()));this.Oc&&(b=b.replace("?",a.K.toString()));return b};
Qi.prototype.fa=function(a,b,c){a=this.Te.Yc(c);b=this.D.get(this.index.m());c=(1==a.length&&a[0]instanceof E&&ld(a[0])?pf(b.get(a[0].c),!1,this.Nc?c.V:void 0,this.Oc?c.K:void 0):b.Ya(a,this.ge,this.Nc?c.V:void 0,this.Oc?c.K:void 0)).map(function(a){return new Tb(a,{})},this);return[xd(c,[this.index.Kc])]};function Ri(a){T.call(this,0,1);this.md=a}t(Ri,T);Ri.prototype.toString=l("select(?)");Ri.prototype.Lc=function(a){a=be(a,this.md);return this.toString().replace("?",a.toString())};Ri.prototype.fa=function(a,b,c){return[be(c,this.md).eval(a[0])]};function Si(a,b){T.call(this,0,1);this.U=a.l(ic);this.S=b}t(Si,T);Si.prototype.toString=function(){return"table_access_by_row_id("+this.S.getName()+")"};Si.prototype.fa=function(a){return[xd(kf(this.U,rd(a[0])),[J(this.S)])]};function Ti(a){this.i=a}t(Ti,mh);Ti.prototype.pb=function(a,b){this.$=a;og(a,function(a){return a instanceof vi}).forEach(function(a){var d=Ui(a);if(0!=d.length){var e=Ki(new Ji(this.i,a.table),b,d.map(function(a){return be(b,a.md)}));if(null!==e){var f=y();d.forEach(function(a){f.set(a.md,a)},this);this.$=Vi(this,e,f,a)}}},this);return this.$};function Ui(a){var b=[];for(a=a.getParent();a;)a instanceof Ri&&b.push(a),a=a.getParent();return b}
function Vi(a,b,c,d){(null===b.Ca?[]:b.Ca.values()).map(function(a){return c.get(a)}).forEach(pg);b=new Qi(a.i,b.zb,Pi(b),!1);a=new Si(a.i,d.table);Qd(a,b);tg(d,d,a,b);return b.ib()};function Wi(a,b){T.call(this,0,-1);this.D=a.l(jc);this.S=b}t(Wi,T);Wi.prototype.toString=function(){return"insert("+this.S.getName()+")"};Wi.prototype.fa=function(a,b,c){Xi(this.S,c.values,this.D);b.Ab(this.S,c.values);return[xd(c.values,[this.S.getName()])]};function Xi(a,b,c){a=a.Gb().Zc();if(null===a?0:a.f[0].autoIncrement){var d=a.f[0].ba.getName();c=c.get(a.m()).max();var e=null===c?0:c[0];b.forEach(function(a){if(0==a.o[d]||null==a.o[d])e++,a.o[d]=e})}}
function Yi(a,b){T.call(this,0,-1);this.D=a.l(jc);this.S=b}t(Yi,T);Yi.prototype.toString=function(){return"insert_replace("+this.S.getName()+")"};Yi.prototype.fa=function(a,b,c){Xi(this.S,c.values,this.D);b.Od(this.S,c.values);return[xd(c.values,[this.S.getName()])]};function Zi(){T.call(this,0,1)}t(Zi,T);Zi.prototype.toString=l("limit(?)");Zi.prototype.Lc=function(a){return this.toString().replace("?",a.V.toString())};Zi.prototype.fa=function(a,b,c){a[0].entries.splice(c.V);return a};function $i(a){T.call(this,0,1);this.N=a}t($i,T);m=$i.prototype;m.toString=function(){return"order_by("+he(this.N)+")"};m.fa=function(a){if(1==a.length){var b;b=a[0];for(var c=null,d=0;d<this.N.length;d++){var e=Jg(this.N[d].M);if(null!==b.Wa&&b.Wa.has(e.m())){c=e;break}}b=c;(null===b?a[0]:sd(a[0],b)).entries.sort(this.Lf.bind(this))}else a.sort(this.xg.bind(this));return a};
m.X=function(a,b){var c=null,d=null,e=null,f=-1;do f++,e=this.N[f].M,c=this.N[f].mb,d=a(e),e=b(e);while(d==e&&f+1<this.N.length);d=d<e?-1:d>e?1:0;return 1==c?d:-d};m.xg=function(a,b){return this.X(function(b){return b instanceof S?sd(a,b):I(a.entries[a.entries.length-1],b)},function(a){return a instanceof S?sd(b,a):I(b.entries[b.entries.length-1],a)})};m.Lf=function(a,b){return this.X(function(b){return I(a,b)},function(a){return I(b,a)})};function aj(a,b){this.Ja=a;this.J=b}function bj(a){return a.J.some(function(a){return a instanceof S},a)?cj(a):dj(a)}function cj(a){if(1==a.J.length&&"DISTINCT"==a.J[0].Lb)return a=sd(a.Ja,a.J[0]).entries.map(function(a){var b=new yd(new Tb(-1,{}),1<this.Ja.L.size);Ad(b,this.J[0],I(a,this.J[0].child));return b},a),new G(a,[]);var b=new yd(new Tb(-1,{}),1<a.Ja.L.size);a.J.forEach(function(a){var d=a instanceof S?sd(this.Ja,a):I(this.Ja.entries[0],a);Ad(b,a,d)},a);return new G([b],H(a.Ja))}
function dj(a){var b=Array(a.Ja.entries.length),c=1<a.Ja.L.size;a.Ja.entries.forEach(function(a,e){b[e]=new yd(new Tb(a.ua.id(),{}),c);this.J.forEach(function(c){Ad(b[e],c,I(a,c))},this)},a);return new G(b,H(a.Ja))}function ej(a,b){var c=a.map(function(a){return bj(new aj(a,b)).entries[0]});return new G(c,H(a[0]))};function fj(a,b){T.call(this,0,1);this.f=a;this.Ob=b}t(fj,T);fj.prototype.toString=function(){var a="project("+this.f.toString();if(null!==this.Ob)var b=this.Ob.map(function(a){return a.m()}).join(", "),a=a+(", groupBy("+b+")");return a+")"};fj.prototype.fa=function(a){0==a.length?a=[ud()]:1==a.length?(a=a[0],a=[0==this.f.length?a:bj(new aj(a,this.f))]):a=[ej(a,this.f)];return a};function gj(a){return a.f.some(function(a){return a instanceof S})||null!==a.Ob};function hj(){T.call(this,0,1)}t(hj,T);hj.prototype.toString=l("skip(?)");hj.prototype.Lc=function(a){return this.toString().replace("?",a.K.toString())};hj.prototype.fa=function(a,b,c){return[new G(a[0].entries.slice(c.K),H(a[0]))]};function ij(){}t(ij,mh);ij.prototype.pb=function(a,b){if(!q(b.V)&&!q(b.K))return a;var c=jj(a);if(null===c)return a;og(a,function(a){return a instanceof Zi||a instanceof hj}).forEach(function(a){a instanceof Zi?c.Nc=!0:c.Oc=!0;pg(a)},this);return c.ib()};function jj(a){a=og(a,function(a){return a instanceof Qi},function(a){return a instanceof fj&&gj(a)||a instanceof $i||1!=L(a).length||a instanceof Ri});return 0<a.length?a[0]:null};function kj(a){this.i=a}t(kj,mh);kj.prototype.pb=function(a,b){var c=lj(a,b);if(null===c)return a;var d;a:{var e=c;d=mj(Od(c,0));if(null!==d){var f;f=c.N;for(var h=null,k=d.table.Aa(),n=0;n<k.length&&null===h;n++)h=nj(k[n],f);f=h;if(null===f){d=e;break a}e=new Qi(this.i,f.zb,new Fi(f.zb),f.Qe);f=new Si(this.i,d.table);Qd(f,e);pg(c);e=tg(d,d,f,e)}d=e}if(d==c)a:if(d=c,e=oj(Od(c,0)),null!==e){f=nj(e.index,c.N);if(null===f)break a;e.ge=f.Qe;d=pg(c).parent}return d.ib()};
function oj(a){a=og(a,function(a){return a instanceof Qi},function(a){return 1!=L(a).length});return 0<a.length?a[0]:null}function mj(a){a=og(a,function(a){return a instanceof vi},function(a){return 1!=L(a).length});return 0<a.length?a[0]:null}function lj(a,b){return q(b.N)?og(a,function(a){return a instanceof $i})[0]:null}function nj(a,b){if(a.f.length!=b.length||!b.every(function(b,c){return b.M.getName()==a.f[c].ba.getName()}))return null;var c=pj(b,a);return c[0]||c[1]?{zb:a,Qe:c[1]}:null}
function pj(a,b){var c=a.reduce(function(a,b){return a<<1|(0==b.mb?0:1)},0),d=b.f.reduce(function(a,b){return a<<1|(0==b.mb?0:1)},0),c=c^d;return[0==c,c==Math.pow(2,Math.max(a.length,b.f.length))-1]};function qj(a,b,c){this.Da=a;this.ce=b;this.Vb=c}qj.prototype.hc=function(){this.Vb.forEach(function(a){this.Da=a.pb(this.Da,this.ce)},this);return this.Da};function rj(a,b){T.call(this,0,1);this.S=a;this.Gg=b}t(rj,T);rj.prototype.toString=function(){return"update("+this.S.getName()+")"};rj.prototype.fa=function(a,b){var c=a[0].entries.map(function(a){var b=this.S.gb(a.ua.Fa());this.Gg.forEach(function(a){b.o[a.M.getName()]=a.value},this);return b},this);b.update(this.S,c);return[ud()]};function sj(a){this.i=a;this.ie=[new Di,new Ti(this.i),new kj(this.i),new ij,new wi(this.i)];this.Hd=[new Ti(this.i)]}sj.prototype.create=function(a,b){var c=a.ib();if(c instanceof $g||c instanceof Zg)return tj(this,a,b);if(c instanceof fh||c instanceof jh||c instanceof kh)return tj(this,a,b,this.ie);if(c instanceof ah||c instanceof bh)return tj(this,a,b,this.Hd);throw new D(8);};function tj(a,b,c,d){a=mg(b.ib(),a.jg.bind(a));null!=d&&(a=(new qj(a,c,d)).hc());return new ie(a,b.ca())}
sj.prototype.jg=function(a){if(a instanceof fh)return new fj(a.f,a.Ob);if(a instanceof ih)return new xi(a.f);if(a instanceof hh)return new Ng(a.f);if(a instanceof gh)return new $i(a.N);if(a instanceof kh)return new hj;if(a instanceof jh)return new Zi;if(a instanceof ch)return new Ri(a.I.Y());if(a instanceof eh)return new rh;if(a instanceof lh)return new zi(this.i,a.I,a.Qb);if(a instanceof dh)return new vi(this.i,a.table);if(a instanceof ah)return new ti(a.table);if(a instanceof bh)return new rj(a.table,
a.qe);if(a instanceof $g)return new Yi(this.i,a.table);if(a instanceof Zg)return new Wi(this.i,a.table);throw new D(514);};function uj(a){this.gg=new si;this.sg=new sj(a)};function vj(){this.Xe=y()}function wj(a,b){var c=a.Xe.get(b.getName())||null;null===c&&(c=new xj,a.Xe.set(b.getName(),c));return c}function yj(a,b,c,d){c.forEach(function(a){a=wj(this,a);0==d?(a.Za=null,a.uc=b):3==d?(null===a.Xb&&(a.Xb=B()),a.Xb.add(b),null===a.Ra&&(a.Ra=B()),a.Ra.delete(b)):1==d?(null===a.Ra&&(a.Ra=B()),a.Ra.add(b)):2==d&&(a.Za=b)},a)}
function zj(a,b,c,d){var e=!0;c.forEach(function(a){if(e){a=wj(this,a);var c=null===a.Ra||0==a.Ra.size;e=0==d?(null===a.Xb||0==a.Xb.size)&&c&&null===a.uc&&null!==a.Za&&a.Za==b:3==d?null===a.uc&&null===a.Za&&null!==a.Ra&&a.Ra.has(b):1==d?null===a.Za:c&&(null===a.Za||a.Za==b)}},a);return e}function Aj(a,b,c,d){var e=zj(a,b,c,d);e&&yj(a,b,c,d);return e}vj.prototype.releaseLock=function(a,b){b.forEach(function(b){wj(this,b).releaseLock(a)},this)};
function Bj(a,b){b.forEach(function(a){wj(this,a).Za=null},a)}function xj(){this.Xb=this.Ra=this.Za=this.uc=null}xj.prototype.releaseLock=function(a){this.uc==a&&(this.uc=null);this.Za==a&&(this.Za=null);null===this.Ra||this.Ra.delete(a);null===this.Xb||this.Xb.delete(a)};function Cj(){this.Ub=new Dj;this.Bc=new vj}function qe(a,b){(2>b.getPriority()||2>b.getPriority())&&Bj(a.Bc,b.ca());a.Ub.Ab(b);Ej(a);return b.Nb().da}function Ej(a){for(var b=a.Ub.Hb(),c=0;c<b.length;c++){var d=b[c],e=!1;if(e=0==d.G()?Fj(a,d,1,3):Fj(a,d,2,0))a.Ub.remove(d),e=a,d.exec().then(e.pg.bind(e,d),e.og.bind(e,d))}}function Fj(a,b,c,d){var e=!1;Aj(a.Bc,b.Y(),b.ca(),c)&&(e=Aj(a.Bc,b.Y(),b.ca(),d));return e}Cj.prototype.pg=function(a,b){this.Bc.releaseLock(a.Y(),a.ca());a.Nb().resolve(b);Ej(this)};
Cj.prototype.og=function(a,b){this.Bc.releaseLock(a.Y(),a.ca());a.Nb().reject(b);Ej(this)};function Dj(){this.Ub=[]}Dj.prototype.Ab=function(a){of(this.Ub,a,function(a,c){var d=a.getPriority()-c.getPriority();return 0==d?a.Y()-c.Y():d})};Dj.prototype.Hb=function(){return this.Ub.slice()};Dj.prototype.remove=function(a){var b=this.Ub;a=ya(b,a);var c;(c=0<=a)&&xa.splice.call(b,a,1);return c};function Gj(a,b){this.Id=Kd();this.de=a;this.hd=b;this.J=Hj(this)}function Hj(a){if(0<a.de.f.length)return a.de.f;var b=[];a.de.c.forEach(function(a){a.hb().forEach(function(a){b.push(a)})});return b}Gj.prototype.X=function(a,b){return this.J.every(function(c){return Ld(this.Id,c.G(),"eq")(I(a,c),I(b,c))},this)};
function Ij(a,b,c){var d=null===b?[]:b.entries,e=pb(d,c.entries,a.X.bind(a),function(a){return d[a]});b=[];for(var f=0,h=0;h<d.length;h++){var k=d[h];e[f]==k?f++:(k=a.hd.splice(f,1),k=Jj(h,k,0,a.hd),b.push(k))}e=pb(d,c.entries,a.X.bind(a),function(a,b){return c.entries[b]});for(h=f=0;h<c.entries.length;h++)k=c.entries[h],e[f]==k?f++:(a.hd.splice(h,0,k.ua.o),k=Jj(h,[],1,a.hd),b.push(k));return b}function Jj(a,b,c,d){return{Ig:c,index:a,object:d,Lg:b,type:"splice"}};function Kj(){this.fc=y()}Kj.prototype.ud=function(a,b){var c=ka(a.a).toString(),d=this.fc.get(c)||null;null===d&&(d=new Lj(a),this.fc.set(c,d));d.ud(b)};Kj.prototype.ee=function(a,b){var c=ka(a.a).toString(),d=this.fc.get(c)||null;d.ee(b);0<d.Dc.size||this.fc.delete(c)};function pe(a,b){var c=B();b.forEach(function(a){c.add(a.getName())});var d=[];a.fc.forEach(function(a){a=a.yc();a.context.c.some(function(a){return c.has(a.getName())})&&d.push(a)});return d}
function ne(a,b,c){b=ka(null!=b.Tc?b.Tc:b).toString();a=a.fc.get(b)||null;null!==a&&Mj(a,c)}function Lj(a){this.Bf=a;this.Dc=B();this.mg=[];this.Ve=null;this.Jf=new Gj(a.a,this.mg)}Lj.prototype.ud=function(a){this.Dc.has(a)||this.Dc.add(a)};Lj.prototype.ee=function(a){return this.Dc.delete(a)};Lj.prototype.yc=function(){var a=this.Bf;return{context:a.a,be:Ph(a)}};function Mj(a,b){var c=Ij(a.Jf,a.Ve,b);a.Ve=b;0<c.length&&a.Dc.forEach(function(a){a(c)})};function Nj(a,b){var c=a.l(nc),d=b||{},e=new jf(c);a.ob(ic,e);var e=null,f=!1;null!=d.storeType?e=d.storeType:(q(Rb)||(Rb=new Qb),e=Rb,e=e.Xf?0:e.Hg?4:1);switch(e){case 0:e=new Pe(a,c);break;case 1:e=new We(c);break;case 5:e=new Ye(c);break;case 4:e=new ff(a,c,d.webSqlDbSize);break;case 3:e=new Ce(c,d.firebase);f=!0;break;default:throw new D(300);}a.ob(hc,e);var h=new lg;a.ob(jc,h);return e.Ga(d.onUpgrade).then(function(){var b=new uj(a);a.ob(kc,b);b=new Cj;a.ob(lc,b);b=new Kj;a.ob(mc,b);return h.Ga(c)}).then(function(){if(f){var b=
new re(a);b.La.subscribe(b.Xd.bind(b))}return(new eg(a)).Ga(c)})};function Oj(a){this.i=a;this.g=a.l(nc);this.aa=B(this.g.sa());this.$a=x()}m=Oj.prototype;m.exec=function(){var a=this.i.l(jc),b=this.i.l(ic),c={};this.g.sa().forEach(function(d){var f=a.get(Te(d)).Ya(),f=kf(b,f).map(function(a){return a.o});c[d.getName()]=f});var d={name:this.g.name(),version:this.g.version(),tables:c},d=new yd(new Tb(-1,d),!0);return w([new G([d],[])])};m.G=l(0);m.ca=g("aa");m.Nb=g("$a");m.Y=function(){return ka(this)};m.getPriority=l(0);function Pj(a,b){this.i=a;this.g=a.l(nc);this.aa=B(this.g.sa());this.$a=x();this.xa=b;this.La=a.l(hc);this.U=a.l(ic);this.D=a.l(jc)}m=Pj.prototype;
m.exec=function(){if(!(this.La instanceof Pe||this.La instanceof We||this.La instanceof ff))throw new D(300);var a;a:{a=this.g.sa();for(var b=0;b<a.length;++b)if(0<this.D.get(Te(a[b])).Ka().la){a=!1;break a}a=!0}if(!a)throw new D(110);if(this.g.name()!=this.xa.name||this.g.version()!=this.xa.version)throw new D(111);if(null==this.xa.tables)throw new D(112);return Qj(this)};m.G=l(1);m.ca=g("aa");m.Nb=g("$a");m.Y=function(){return ka(this)};m.getPriority=l(0);
function Qj(a){var b=new bd(a.i,a.aa),b=a.La.Eb(a.G(),C(a.aa),b),c;for(c in a.xa.tables){var d=a.g.table(c),e=a.xa.tables[c].map(function(a){return d.wb(a)}),f=b.H(c,d.gb,0);a.U.Wb(c,e);var h=a.D.lc.get(c)||[];e.forEach(function(a){h.forEach(function(b){var c=a.kb(b.getName());b.add(c,a.id())})});f.put(e)}return b.ia()};function Rj(a,b){this.i=a;this.La=a.l(hc);this.Ea=a.l(lc);this.Jb=a.l(mc);this.aa=B(b);this.Pa=new bd(this.i,this.aa);this.$a=x();this.vc=x();this.te=x()}m=Rj.prototype;m.exec=function(){this.te.resolve();return this.vc.da};m.G=l(1);m.ca=g("aa");m.Nb=g("$a");m.Y=function(){return ka(this)};m.getPriority=l(2);function Sj(a){qe(a.Ea,a);return a.te.da}
function Tj(a,b){var c=b.yc();return c.be.ib().exec(a.Pa,c.context).then(function(a){return qd(a[0])},function(a){this.Pa.Kb();var b=new jb(a.name);this.vc.reject(b);throw a;}.bind(a))}m.ia=function(){this.La.Eb(this.G(),C(this.aa),this.Pa).ia().then(function(){this.Ic();this.vc.resolve()}.bind(this),function(a){this.Pa.Kb();this.vc.reject(a)}.bind(this));return this.$a.da};m.Kb=function(){this.Pa.Kb();this.vc.resolve();return this.$a.da};
m.Ic=function(){var a=pe(this.Jb,this.aa);0!=a.length&&(a=new me(this.i,a),qe(this.Ea,a))};function Uj(a){this.i=a;this.Ea=a.l(lc);this.Mc=null;this.Sa=0;0==Vj.size&&(Vj.set(0,B([1,4])),Vj.set(1,B([2])),Vj.set(2,B([3,5,6])),Vj.set(3,B([2,7])),Vj.set(4,B([7])),Vj.set(5,B([7])),Vj.set(6,B([7])))}r("lf.proc.Transaction",Uj);var Vj=y();function Wj(a,b){var c=Vj.get(a.Sa)||null;if(null===c||!c.has(b))throw new D(107,a.Sa,b);a.Sa=b}
Uj.prototype.exec=function(a){Wj(this,4);var b=[];try{a.forEach(function(a){a.cb();b.push(a.yc())},this)}catch(c){return Wj(this,7),bb(c)}a=new sh(this.i,b);return qe(this.Ea,a).then(function(a){Wj(this,7);return a.map(function(a){return qd(a)})}.bind(this),function(a){Wj(this,7);throw a;}.bind(this))};Uj.prototype.exec=Uj.prototype.exec;Uj.prototype.zf=function(a){Wj(this,1);this.Mc=new Rj(this.i,a);return Sj(this.Mc).then(function(){Wj(this,2)}.bind(this))};Uj.prototype.begin=Uj.prototype.zf;
Uj.prototype.yf=function(a){Wj(this,3);return Tj(this.Mc,a).then(function(a){Wj(this,2);return a}.bind(this),function(a){Wj(this,7);throw a;}.bind(this))};Uj.prototype.attach=Uj.prototype.yf;Uj.prototype.ia=function(){Wj(this,5);return this.Mc.ia().then(function(){Wj(this,7)}.bind(this))};Uj.prototype.commit=Uj.prototype.ia;Uj.prototype.Kb=function(){Wj(this,6);return this.Mc.Kb().then(function(){Wj(this,7)}.bind(this))};Uj.prototype.rollback=Uj.prototype.Kb;function W(a){this.i=a;this.g=a.l(nc);this.ed=!1}r("lf.proc.Database",W);W.prototype.Ga=function(a){this.i.ob(nc,this.g);return Nj(this.i,a).then(function(){this.ed=!0;this.Ea=this.i.l(lc);return this}.bind(this))};W.prototype.init=W.prototype.Ga;W.prototype.yb=g("g");W.prototype.getSchema=W.prototype.yb;function Xj(a){if(!a.ed)throw new D(2);}W.prototype.select=function(a){Xj(this);return new V(this.i,1!=arguments.length||null!=arguments[0]?Array.prototype.slice.call(arguments):[])};
W.prototype.select=W.prototype.select;W.prototype.Ab=function(){Xj(this);return new Rh(this.i)};W.prototype.insert=W.prototype.Ab;W.prototype.Od=function(){Xj(this);return new Rh(this.i,!0)};W.prototype.insertOrReplace=W.prototype.Od;W.prototype.update=function(a){Xj(this);return new ai(this.i,a)};W.prototype.update=W.prototype.update;W.prototype.delete=function(){Xj(this);return new Qh(this.i)};W.prototype["delete"]=W.prototype.delete;
W.prototype.observe=function(a,b){Xj(this);this.i.l(mc).ud(a,b)};W.prototype.observe=W.prototype.observe;W.prototype.unobserve=function(a,b){Xj(this);this.i.l(mc).ee(a,b)};W.prototype.unobserve=W.prototype.unobserve;W.prototype.Hf=function(){Xj(this);return new Uj(this.i)};W.prototype.createTransaction=W.prototype.Hf;W.prototype.close=function(){try{this.i.l(hc).close()}catch(a){}this.i.clear();this.ed=!1};W.prototype.close=W.prototype.close;
W.prototype.Pf=function(){Xj(this);var a=new Oj(this.i);return qe(this.Ea,a).then(function(a){return qd(a[0])[0]})};W.prototype["export"]=W.prototype.Pf;W.prototype.import=function(a){Xj(this);a=new Pj(this.i,a);return qe(this.Ea,a).then(l(null))};W.prototype["import"]=W.prototype.import;function X(a,b,c,d,e,f){this.S=a;this.A=b;this.Re=c;this.Pe=d;this.rf=e;this.bb=f||null}r("lf.schema.BaseColumn",X);m=X.prototype;m.getName=g("A");m.m=function(){return J(this.S)+"."+this.A};m.toString=function(){return this.m()};m.H=g("S");m.G=g("rf");X.prototype.getType=X.prototype.G;X.prototype.Xa=g("bb");X.prototype.Aa=function(){null==this.qa&&(this.qa=[],this.H().Aa().forEach(function(a){-1!=a.f.map(function(a){return a.ba.getName()}).indexOf(this.A)&&this.qa.push(a)},this));return this.qa};
X.prototype.za=function(){if(!q(this.ga)){var a=this.Aa().filter(function(a){return 1!=a.f.length?!1:a.f[0].ba.getName()==this.getName()},this);this.ga=0<a.length?a[0]:null}return this.ga};X.prototype.ic=g("Pe");X.prototype.isNullable=X.prototype.ic;X.prototype.Ac=g("Re");X.prototype.Ma=function(a){return Dg(this,a,"eq")};X.prototype.eq=X.prototype.Ma;X.prototype.Ye=function(a){return Dg(this,a,"neq")};X.prototype.neq=X.prototype.Ye;X.prototype.hg=function(a){return Dg(this,a,"lt")};
X.prototype.lt=X.prototype.hg;X.prototype.ig=function(a){return Dg(this,a,"lte")};X.prototype.lte=X.prototype.ig;X.prototype.Sf=function(a){return Dg(this,a,"gt")};X.prototype.gt=X.prototype.Sf;X.prototype.Tf=function(a){return Dg(this,a,"gte")};X.prototype.gte=X.prototype.Tf;X.prototype.match=function(a){return Dg(this,a,"match")};X.prototype.match=X.prototype.match;X.prototype.Af=function(a,b){return Dg(this,[a,b],"between")};X.prototype.between=X.prototype.Af;
X.prototype.Uf=function(a){return Dg(this,a,"in")};X.prototype["in"]=X.prototype.Uf;X.prototype.cg=function(){return this.Ma(null)};X.prototype.isNull=X.prototype.cg;X.prototype.bg=function(){return this.Ye(null)};X.prototype.isNotNull=X.prototype.bg;X.prototype.pc=function(a){return new X(this.S,this.A,this.Re,this.Pe,this.rf,a)};X.prototype.as=X.prototype.pc;function Yj(){this.pd=y()}var Zj;Yj.prototype.clear=function(){this.pd.clear()};Yj.prototype.clear=Yj.prototype.clear;Yj.prototype.ob=function(a,b){this.pd.set(a.toString(),b);return b};Yj.prototype.registerService=Yj.prototype.ob;Yj.prototype.l=function(a){var b=this.pd.get(a.toString())||null;if(null===b)throw new D(7,a.toString());return b};Yj.prototype.getService=Yj.prototype.l;Yj.prototype.Rd=function(a){return this.pd.has(a.toString())};Yj.prototype.isRegistered=Yj.prototype.Rd;function ak(a){this.g=a;this.Ad=new Jc;this.fe=new Jc;this.$e=new Jc;this.Ce=y();this.h=new Jc;this.ye=new Jc;this.gf=new Jc;this.Be=new Jc;bk(this)}function bk(a){a.g.sa().forEach(function(a){var c=a.getName();a.Gb().Nd().forEach(function(d){this.$e.set(c,this.g.table(d.Qa));this.h.set(d.Qa,a);0==d.action?(this.fe.set(d.Qa,d),this.gf.set(d.Qa,a)):(this.Ad.set(d.Qa,d),this.ye.set(d.Qa,a));this.Ce.set(a.getName()+"."+d.ub,d.Qa);this.Be.set(d.Qa+"."+d.Fc,a.getName())},this)},a)}
function Sc(a,b,c){if(null!=c)return 1==c?a.Ad.get(b):a.fe.get(b);c=a.Ad.get(b);a=a.fe.get(b);return null===c&&null===a?null:(c||[]).concat(a||[])}function yh(a,b){var c=b.get(a);return null===c?[]:c}function Ah(a,b){var c=B();b.forEach(function(a){(a=this.Ce.get(a))&&c.add(a)},a);return C(c).map(function(a){return this.g.table(a)},a)}function wh(a,b,c){return null!=c?0==c?yh(b,a.gf):yh(b,a.ye):yh(b,a.h)}
function Bh(a,b){var c=B();b.forEach(function(a){(a=this.Be.get(a))&&a.forEach(function(a){c.add(a)})},a);return C(c).map(function(a){return this.g.table(a)},a)};function ck(a,b,c){this.tg=a;this.lg=b;this.Qf=c}r("lf.schema.Constraint",ck);ck.prototype.Zc=g("tg");ck.prototype.getPrimaryKey=ck.prototype.Zc;ck.prototype.Nd=g("Qf");ck.prototype.getForeignKeys=ck.prototype.Nd;function dk(a,b,c){var d=a.ref.split(".");if(2!=d.length)throw new D(540,c);this.Ae=b;this.ub=a.local;this.Qa=d[0];this.Fc=d[1];this.name=b+"."+c;this.action=a.action;this.timing=a.timing};function Y(a){ek(a);this.Id=Kd();this.A=a;this.J=y();this.rd=B();this.mc=B();this.gd=B();this.Ba=null;this.qa=y();this.ld=!1;this.xb=[]}r("lf.schema.TableBuilder",Y);function fk(a){this.name=a.name;this.mb=a.order;this.autoIncrement=a.autoIncrement}var gk=B([0,6]);function ek(a){if(!/^[A-Za-z_][A-Za-z0-9_]*$/.test(a))throw new D(502,a);}function hk(a,b){if(b==a.A)throw new D(546,b);if(a.J.has(b)||a.qa.has(b)||a.mc.has(b))throw new D(503,a.A+"."+b);}
function ik(a,b){var c=!1;b.forEach(function(a){var b=this.J.get(a.name);c=c||a.autoIncrement;if(a.autoIncrement&&3!=b)throw new D(504);},a);if(c&&1<b.length)throw new D(505);}function jk(a){if(null!==a.Ba){var b=a.qa.get(a.Ba).map(function(a){return a.name}),c=0;if(a.xb.some(function(a,e){c=e;return-1!=b.indexOf(a.ub)},a))throw new D(543,a.xb[c].name);}}
function kk(a){if(null!==a.Ba){var b=function(a){return a.name},c=JSON.stringify(a.qa.get(a.Ba).map(b));a.qa.forEach(function(a,e){if(e!=this.Ba){var f=a.map(b);if(JSON.stringify(f)==c)throw new D(544,this.A+"."+e);}},a)}}function lk(a){null===a.Ba||a.qa.get(a.Ba).forEach(function(a){if(this.gd.has(a.name))throw new D(545,this.A+"."+a.name);},a)}Y.prototype.tf=function(a,b){ek(a);hk(this,a);this.J.set(a,b);gk.has(b)&&this.ve([a]);return this};Y.prototype.addColumn=Y.prototype.tf;
Y.prototype.vf=function(a,b){var c=this.A;this.Ba="pk"+(c[0].toUpperCase()+c.substring(1));ek(this.Ba);hk(this,this.Ba);c=mk(this,a,!0,void 0,b);ik(this,c);1==c.length&&this.rd.add(c[0].name);this.mc.add(this.Ba);this.qa.set(this.Ba,c);return this};Y.prototype.addPrimaryKey=Y.prototype.vf;
Y.prototype.uf=function(a,b){ek(a);hk(this,a);var c=new dk(b,this.A,a);q(c.action)||(c.action=0);q(c.timing)||(c.timing=0);if(1==c.action&&1==c.timing)throw new D(506);if(!this.J.has(c.ub))throw new D(540,a);this.xb.push(c);this.ue(a,[c.ub],this.rd.has(c.ub));return this};Y.prototype.addForeignKey=Y.prototype.uf;Y.prototype.wf=function(a,b){ek(a);hk(this,a);var c=mk(this,b,!0);1==c.length&&(this.rd.add(c[0].name),nk(this,c[0].name));this.qa.set(a,c);this.mc.add(a);return this};
Y.prototype.addUnique=Y.prototype.wf;function nk(a,b){a.xb.forEach(function(a){a.ub==b&&this.mc.add(a.name.split(".")[1])},a)}Y.prototype.ve=function(a){mk(this,a,!1).forEach(function(a){this.gd.add(a.name)},this);return this};Y.prototype.addNullable=Y.prototype.ve;Y.prototype.ue=function(a,b,c,d){ek(a);hk(this,a);b=mk(this,b,!0,d);c&&this.mc.add(a);this.qa.set(a,b);return this};Y.prototype.addIndex=Y.prototype.ue;Y.prototype.Db=ba("ld");Y.prototype.persistentIndex=Y.prototype.Db;
Y.prototype.yb=function(){jk(this);kk(this);lk(this);return new (ok(this))};Y.prototype.getSchema=Y.prototype.yb;function pk(a){return a.xb}function mk(a,b,c,d,e){var f=b,f="string"==typeof b[0]?b.map(function(a){return new fk({name:a,order:null!=d?d:1,autoIncrement:e||!1})}):b.map(function(a){return new fk(a)});f.forEach(function(a){if(!this.J.has(a.name))throw new D(508,this.A,a.name);if(c){var b=this.J.get(a.name);if(0==b||6==b)throw new D(509,this.A,a.name);}},a);return f}
function ok(a){function b(){function b(c){return a.qa.get(c).map(function(a){return{ba:this[a.name],mb:a.mb,autoIncrement:a.autoIncrement}},this)}var d=Sb(a.J).map(function(b){this[b]=new X(this,b,a.rd.has(b),a.gd.has(b),a.J.get(b));return this[b]},this),e=Sb(a.qa).map(function(d){return new Fg(a.A,d,a.mc.has(d),b.call(this,d))},this);R.call(this,a.A,d,e,a.ld);var f=null===a.Ba?null:new Fg(a.A,a.Ba,!0,b.call(this,a.Ba)),h=d.filter(function(b){return!a.gd.has(b.getName())});this.Df=new ck(f,h,a.xb);
this.kf=qk(a,d,e)}t(b,R);b.prototype.wb=function(a){return new this.kf(Ub++,a)};b.prototype.createRow=b.prototype.wb;b.prototype.gb=function(a){var b={};this.hb().forEach(function(e){var f=e.getName();e=e.G();var h=a.value[f];if(0==e)if(e=h,null!=e&&""!=e){0!=e.length%2&&(e="0"+e);for(var h=new ArrayBuffer(e.length/2),k=new Uint8Array(h),n=0,A=0;n<e.length;n+=2)k[A++]=parseInt(e.substr(n,2),16);e=h}else e=null;else e=2==e?null!=h?new Date(h):null:h;b[f]=e},this);return new this.kf(a.id,b)};b.prototype.deserializeRow=
b.prototype.gb;b.prototype.Gb=g("Df");b.prototype.getConstraint=b.prototype.Gb;return b}
function qk(a,b,c){function d(a,d){this.J=b;this.qa=c;Tb.call(this,a,d)}t(d,Tb);d.prototype.Ee=function(){var a={};this.J.forEach(function(b){a[b.getName()]=b.ic()?null:Ic[b.G()]});return a};d.prototype.qf=function(){var a={};this.J.forEach(function(b){var c=b.getName();b=b.G();var d=this.o[c];a[c]=0==b?null!=d?Xb(d):null:2==b?null!=d?d.getTime():null:6==b?null!=d?d:null:d},this);return a};var e=function(a){var b=this.J.get(a.getName()),c=this.Id.Se.get(b)||null;return function(b){return c(b[a.getName()])}}.bind(a),
f=function(a){var b=a.map(function(a){return e(a.ba)});return function(a){return b.map(function(b){return b(a)})}}.bind(a),h={};c.forEach(function(a){var b=a.m();a=1==a.f.length?e(a.f[0].ba):f(a.f);h[b]=a});d.prototype.kb=function(a){return-1!=a.indexOf("#")?this.id():h.hasOwnProperty(a)?h[a](this.o):null};return d};function rk(a,b){this.g=new Z(a,b);this.sb=y();this.wc=!1;this.j=null}r("lf.schema.Builder",rk);function sk(a,b){b.xb.forEach(function(a){var d=a.Qa;if(!this.sb.has(d))throw new D(536,a.name);var d=this.sb.get(d).yb(),e=a.Fc;if(!d.hasOwnProperty(e))throw new D(537,a.name);if(b.yb()[a.ub].G()!=d[e].G())throw new D(538,a.name);if(!d[e].Ac())throw new D(539,a.name);},a)}
rk.prototype.Cf=function(a){a.xb.forEach(function(a){pk(this.sb.get(a.Qa)).forEach(function(c){if(c.ub==a.Fc)throw new D(534,a.name);},this)},this)};function tk(a){a.wc||(a.sb.forEach(function(a){sk(this,a);a=a.yb();this.g.L.set(a.getName(),a)},a),z(a.sb).forEach(a.Cf,a),uk(a),a.sb.clear(),a.wc=!0)}function vk(a,b,c){b.re||(b.re=!0,b.Yd=!0,b.Fe.forEach(function(a){a=c.get(a);if(!a.re)vk(this,a,c);else if(a.Yd&&b!=a)throw new D(533);},a));b.Yd=!1}
function uk(a){var b=y();a.g.L.forEach(function(a,d){b.set(d,new wk(d))},a);a.sb.forEach(function(a,d){a.xb.forEach(function(a){b.get(a.Qa).Fe.add(d)})});z(b).forEach(function(a){vk(this,a,b)},a)}function wk(a){this.Yd=this.re=!1;this.Fe=B();this.Kc=a}rk.prototype.yb=function(){this.wc||tk(this);return this.g};rk.prototype.getSchema=rk.prototype.yb;rk.prototype.Je=function(){var a=new gc("ns_"+this.g.name()),b;Zj||(Zj=new Yj);b=Zj;var c=null;b.Rd(a)?c=b.l(a):(c=new Yj,b.ob(a,c));return c};
rk.prototype.getGlobal=rk.prototype.Je;rk.prototype.connect=function(a){if(null!==this.j&&this.j.ed)throw new D(113);if(null===this.j){var b=this.Je();b.Rd(nc)||b.ob(nc,this.yb());this.j=new W(b)}return this.j.Ga(a)};rk.prototype.connect=rk.prototype.connect;rk.prototype.Gf=function(a){if(this.sb.has(a))throw new D(503,a);if(this.wc)throw new D(535);this.sb.set(a,new Y(a));return this.sb.get(a)};rk.prototype.createTable=rk.prototype.Gf;
rk.prototype.je=function(a){if(this.wc)throw new D(535);this.g.je(a);return this};rk.prototype.setPragma=rk.prototype.je;function Z(a,b){this.A=a;this.$b=b;this.L=y();this.df={Kf:!1}}r("lf.schema.DatabaseSchema",Z);Z.prototype.name=g("A");Z.prototype.name=Z.prototype.name;Z.prototype.version=g("$b");Z.prototype.version=Z.prototype.version;Z.prototype.sa=function(){return z(this.L)};Z.prototype.tables=Z.prototype.sa;Z.prototype.table=function(a){if(!this.L.has(a))throw new D(101,a);return this.L.get(a)};
Z.prototype.table=Z.prototype.table;Z.prototype.info=function(){this.Oe||(this.Oe=new ak(this));return this.Oe};Z.prototype.cf=g("df");Z.prototype.pragma=Z.prototype.cf;Z.prototype.je=ba("df");r("lf.schema.create",function(a,b){return new rk(a,b)});v.prototype.catch=v.prototype.ne;v.prototype["catch"]=v.prototype.catch;
try{if(module){module.exports=lf;}}catch(e){}}.bind(window))()
//# sourceMappingURL=lovefield.es6.js.map
