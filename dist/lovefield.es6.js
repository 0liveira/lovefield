(function(){'use strict';function aa(){return function(){}}function ba(a){return function(b){this[a]=b}}function g(a){return function(){return this[a]}}function l(a){return function(){return a}}var m,p=this;function q(a){return void 0!==a}function ca(){}
function da(a){var b=typeof a;if("object"==b)if(a){if(a instanceof Array)return"array";if(a instanceof Object)return b;var c=Object.prototype.toString.call(a);if("[object Window]"==c)return"object";if("[object Array]"==c||"number"==typeof a.length&&"undefined"!=typeof a.splice&&"undefined"!=typeof a.propertyIsEnumerable&&!a.propertyIsEnumerable("splice"))return"array";if("[object Function]"==c||"undefined"!=typeof a.call&&"undefined"!=typeof a.propertyIsEnumerable&&!a.propertyIsEnumerable("call"))return"function"}else return"null";
else if("function"==b&&"undefined"==typeof a.call)return"object";return b}function ea(a){return null===a}function fa(a){return null!=a}function ga(a){var b=da(a);return"array"==b||"object"==b&&"number"==typeof a.length}function ha(a){return"string"==typeof a}function ia(a){return"function"==da(a)}function ja(a){return a[ka]||(a[ka]=++la)}var ka="closure_uid_"+(1E9*Math.random()>>>0),la=0;function ma(a,b,c){return a.call.apply(a.bind,arguments)}
function na(a,b,c){if(!a)throw Error();if(2<arguments.length){var d=Array.prototype.slice.call(arguments,2);return function(){var c=Array.prototype.slice.call(arguments);Array.prototype.unshift.apply(c,d);return a.apply(b,c)}}return function(){return a.apply(b,arguments)}}function pa(a,b,c){pa=Function.prototype.bind&&-1!=Function.prototype.bind.toString().indexOf("native code")?ma:na;return pa.apply(null,arguments)}
function qa(a,b){var c=Array.prototype.slice.call(arguments,1);return function(){var b=c.slice();b.push.apply(b,arguments);return a.apply(this,b)}}function r(a,b){var c=a.split("."),d=p;c[0]in d||!d.execScript||d.execScript("var "+c[0]);for(var e;c.length&&(e=c.shift());)!c.length&&q(b)?d[e]=b:d=d[e]?d[e]:d[e]={}}
function t(a,b){function c(){}c.prototype=b.prototype;a.Gb=b.prototype;a.prototype=new c;a.prototype.constructor=a;a.Fg=function(a,c,f){for(var h=Array(arguments.length-2),k=2;k<arguments.length;k++)h[k-2]=arguments[k];return b.prototype[c].apply(a,h)}};function ra(a){if(Error.captureStackTrace)Error.captureStackTrace(this,ra);else{var b=Error().stack;b&&(this.stack=b)}a&&(this.message=String(a))}t(ra,Error);ra.prototype.name="CustomError";var sa=String.prototype.trim?function(a){return a.trim()}:function(a){return a.replace(/^[\s\xa0]+|[\s\xa0]+$/g,"")};
function ta(a){var b=0,c=sa(String(ua)).split(".");a=sa(String(a)).split(".");for(var d=Math.max(c.length,a.length),e=0;0==b&&e<d;e++){var f=c[e]||"",h=a[e]||"",k=/(\d*)(\D*)/g,n=/(\d*)(\D*)/g;do{var x=k.exec(f)||["","",""],S=n.exec(h)||["","",""];if(0==x[0].length&&0==S[0].length)break;b=va(0==x[1].length?0:parseInt(x[1],10),0==S[1].length?0:parseInt(S[1],10))||va(0==x[2].length,0==S[2].length)||va(x[2],S[2])}while(0==b)}return b}function va(a,b){return a<b?-1:a>b?1:0};function wa(a,b,c){this.cg=c;this.Gf=a;this.ug=b;this.kd=0;this.fd=null}wa.prototype.get=function(){var a;0<this.kd?(this.kd--,a=this.fd,this.fd=a.next,a.next=null):a=this.Gf();return a};wa.prototype.put=function(a){this.ug(a);this.kd<this.cg&&(this.kd++,a.next=this.fd,this.fd=a)};var xa=Array.prototype,ya=xa.indexOf?function(a,b,c){return xa.indexOf.call(a,b,c)}:function(a,b,c){c=null==c?0:0>c?Math.max(0,a.length+c):c;if(ha(a))return ha(b)&&1==b.length?a.indexOf(b,c):-1;for(;c<a.length;c++)if(c in a&&a[c]===b)return c;return-1},za=xa.forEach?function(a,b,c){xa.forEach.call(a,b,c)}:function(a,b,c){for(var d=a.length,e=ha(a)?a.split(""):a,f=0;f<d;f++)f in e&&b.call(c,e[f],f,a)},Aa=xa.map?function(a,b,c){return xa.map.call(a,b,c)}:function(a,b,c){for(var d=a.length,e=Array(d),
f=ha(a)?a.split(""):a,h=0;h<d;h++)h in f&&(e[h]=b.call(c,f[h],h,a));return e},Ba=xa.reduce?function(a,b,c,d){d&&(b=pa(b,d));return xa.reduce.call(a,b,c)}:function(a,b,c,d){var e=c;za(a,function(c,h){e=b.call(d,e,c,h,a)});return e},Ca=xa.some?function(a,b,c){return xa.some.call(a,b,c)}:function(a,b,c){for(var d=a.length,e=ha(a)?a.split(""):a,f=0;f<d;f++)if(f in e&&b.call(c,e[f],f,a))return!0;return!1};function Da(a,b,c){return 2>=arguments.length?xa.slice.call(a,b):xa.slice.call(a,b,c)}
function Ea(a){for(var b=[],c=0;c<a;c++)b[c]=0;return b}function Fa(a){for(var b=[],c=0;c<arguments.length;c++){var d=arguments[c];if("array"==da(d))for(var e=0;e<d.length;e+=8192)for(var f=Fa.apply(null,Da(d,e,e+8192)),h=0;h<f.length;h++)b.push(f[h]);else b.push(d)}return b};var Ga;a:{var Ha=p.navigator;if(Ha){var Ia=Ha.userAgent;if(Ia){Ga=Ia;break a}}Ga=""}function u(a){return-1!=Ga.indexOf(a)};function Ja(){return u("Opera")||u("OPR")}function Ka(){return(u("Chrome")||u("CriOS"))&&!Ja()&&!u("Edge")};function La(a){p.setTimeout(function(){throw a;},0)}var Ma;
function Na(){var a=p.MessageChannel;"undefined"===typeof a&&"undefined"!==typeof window&&window.postMessage&&window.addEventListener&&!u("Presto")&&(a=function(){var a=document.createElement("IFRAME");a.style.display="none";a.src="";document.documentElement.appendChild(a);var b=a.contentWindow,a=b.document;a.open();a.write("");a.close();var c="callImmediate"+Math.random(),d="file:"==b.location.protocol?"*":b.location.protocol+"//"+b.location.host,a=pa(function(a){if(("*"==d||a.origin==d)&&a.data==
c)this.port1.onmessage()},this);b.addEventListener("message",a,!1);this.port1={};this.port2={postMessage:function(){b.postMessage(c,d)}}});if("undefined"!==typeof a&&!u("Trident")&&!u("MSIE")){var b=new a,c={},d=c;b.port1.onmessage=function(){if(q(c.next)){c=c.next;var a=c.we;c.we=null;a()}};return function(a){d.next={we:a};d=d.next;b.port2.postMessage(0)}}return"undefined"!==typeof document&&"onreadystatechange"in document.createElement("SCRIPT")?function(a){var b=document.createElement("SCRIPT");
b.onreadystatechange=function(){b.onreadystatechange=null;b.parentNode.removeChild(b);b=null;a();a=null};document.documentElement.appendChild(b)}:function(a){p.setTimeout(a,0)}};function Oa(){this.td=this.kc=null}var Qa=new wa(function(){return new Pa},function(a){a.reset()},100);Oa.prototype.add=function(a,b){var c=Qa.get();c.set(a,b);this.td?this.td.next=c:this.kc=c;this.td=c};Oa.prototype.remove=function(){var a=null;this.kc&&(a=this.kc,this.kc=this.kc.next,this.kc||(this.td=null),a.next=null);return a};function Pa(){this.next=this.scope=this.Id=null}Pa.prototype.set=function(a,b){this.Id=a;this.scope=b;this.next=null};
Pa.prototype.reset=function(){this.next=this.scope=this.Id=null};function Ra(a,b){Sa||Ta();Ua||(Sa(),Ua=!0);Va.add(a,b)}var Sa;function Ta(){if(p.Promise&&p.Promise.resolve){var a=p.Promise.resolve(void 0);Sa=function(){a.then(Wa)}}else Sa=function(){var a=Wa;!ia(p.setImmediate)||p.Window&&p.Window.prototype&&p.Window.prototype.setImmediate==p.setImmediate?(Ma||(Ma=Na()),Ma(a)):p.setImmediate(a)}}var Ua=!1,Va=new Oa;function Wa(){for(var a=null;a=Va.remove();){try{a.Id.call(a.scope)}catch(b){La(b)}Qa.put(a)}Ua=!1};function v(a,b){this.Ra=0;this.df=void 0;this.Wc=this.ac=this.B=null;this.ed=this.Gd=!1;if(a!=ca)try{var c=this;a.call(b,function(a){Xa(c,2,a)},function(a){Xa(c,3,a)})}catch(d){Xa(this,3,d)}}function Za(){this.next=this.context=this.fc=this.Ic=this.child=null;this.wd=!1}Za.prototype.reset=function(){this.context=this.fc=this.Ic=this.child=null;this.wd=!1};var $a=new wa(function(){return new Za},function(a){a.reset()},100);function ab(a,b,c){var d=$a.get();d.Ic=a;d.fc=b;d.context=c;return d}
function w(a){if(a instanceof v)return a;var b=new v(ca);Xa(b,2,a);return b}function bb(a){return new v(function(b,c){c(a)})}function cb(a,b,c){db(a,b,c,null)||Ra(qa(b,a))}function eb(a){return new v(function(b,c){var d=a.length,e=[];if(d)for(var f=function(a,c){d--;e[a]=c;0==d&&b(e)},h=function(a){c(a)},k=0,n;k<a.length;k++)n=a[k],cb(n,qa(f,k),h);else b(e)})}function y(){var a,b,c=new v(function(c,e){a=c;b=e});return new fb(c,a,b)}
v.prototype.then=function(a,b,c){return gb(this,ia(a)?a:null,ia(b)?b:null,c)};v.prototype.then=v.prototype.then;v.prototype.$goog_Thenable=!0;v.prototype.le=function(a,b){return gb(this,null,a,b)};function hb(a,b){a.ac||2!=a.Ra&&3!=a.Ra||ib(a);a.Wc?a.Wc.next=b:a.ac=b;a.Wc=b}
function gb(a,b,c,d){var e=ab(null,null,null);e.child=new v(function(a,h){e.Ic=b?function(c){try{var e=b.call(d,c);a(e)}catch(x){h(x)}}:a;e.fc=c?function(b){try{var e=c.call(d,b);!q(e)&&b instanceof jb?h(b):a(e)}catch(x){h(x)}}:h});e.child.B=a;hb(a,e);return e.child}v.prototype.Ag=function(a){this.Ra=0;Xa(this,2,a)};v.prototype.Bg=function(a){this.Ra=0;Xa(this,3,a)};
function Xa(a,b,c){0==a.Ra&&(a==c&&(b=3,c=new TypeError("Promise cannot resolve to itself")),a.Ra=1,db(c,a.Ag,a.Bg,a)||(a.df=c,a.Ra=b,a.B=null,ib(a),3!=b||c instanceof jb||kb(a,c)))}function db(a,b,c,d){if(a instanceof v)return hb(a,ab(b||ca,c||null,d)),!0;var e;if(a)try{e=!!a.$goog_Thenable}catch(h){e=!1}else e=!1;if(e)return a.then(b,c,d),!0;e=typeof a;if("object"==e&&null!=a||"function"==e)try{var f=a.then;if(ia(f))return lb(a,f,b,c,d),!0}catch(h){return c.call(d,h),!0}return!1}
function lb(a,b,c,d,e){function f(a){k||(k=!0,d.call(e,a))}function h(a){k||(k=!0,c.call(e,a))}var k=!1;try{b.call(a,h,f)}catch(n){f(n)}}function ib(a){a.Gd||(a.Gd=!0,Ra(a.Lf,a))}function mb(a){var b=null;a.ac&&(b=a.ac,a.ac=b.next,b.next=null);a.ac||(a.Wc=null);return b}
v.prototype.Lf=function(){for(var a=null;a=mb(this);){var b=this.Ra,c=this.df;if(3==b&&a.fc&&!a.wd)for(var d=void 0,d=this;d&&d.ed;d=d.B)d.ed=!1;if(a.child)a.child.B=null,nb(a,b,c);else try{a.wd?a.Ic.call(a.context):nb(a,b,c)}catch(e){ob.call(null,e)}$a.put(a)}this.Gd=!1};function nb(a,b,c){2==b?a.Ic.call(a.context,c):a.fc&&a.fc.call(a.context,c)}function kb(a,b){a.ed=!0;Ra(function(){a.ed&&ob.call(null,b)})}var ob=La;function jb(a){ra.call(this,a)}t(jb,ra);jb.prototype.name="cancel";
function fb(a,b,c){this.ha=a;this.resolve=b;this.reject=c};/*

 Copyright 2014 The Lovefield Project Authors. All Rights Reserved.

 Licensed under the Apache License, Version 2.0 (the "License");
 you may not use this file except in compliance with the License.
 You may obtain a copy of the License at

     http://www.apache.org/licenses/LICENSE-2.0

 Unless required by applicable law or agreed to in writing, software
 distributed under the License is distributed on an "AS IS" BASIS,
 WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 See the License for the specific language governing permissions and
 limitations under the License.
*/
function z(a,b){this.pa=a;this.o=b||this.Ce()}var pb=0;m=z.prototype;m.id=g("pa");function qb(a){return a.o}m.Ce=function(){return{}};m.nf=g("o");m.Ea=function(){return{id:this.pa,value:this.nf()}};m.Db=function(a){return"#"==a.substr(-1)?this.pa:null};function rb(a){return new z(a.id,a.value)}function sb(a){return new z(pb++,a||{})}function tb(a){if(null==a)return null;a=new Uint8Array(a);for(var b="",c=0;c<a.length;++c)var d=a[c].toString(16),b=b+(2>d.length?"0"+d:d);return b};function ub(a){this.type=a}function vb(a){z.call(this,-1,a)}t(vb,z);function wb(a,b,c,d){c=c||function(a,b){return a==b};d=d||function(b){return a[b]};for(var e=a.length,f=b.length,h=[],k=0;k<e+1;k++)h[k]=[],h[k][0]=0;for(var n=0;n<f+1;n++)h[0][n]=0;for(k=1;k<=e;k++)for(n=1;n<=f;n++)c(a[k-1],b[n-1])?h[k][n]=h[k-1][n-1]+1:h[k][n]=Math.max(h[k-1][n],h[k][n-1]);for(var x=[],k=e,n=f;0<k&&0<n;)c(a[k-1],b[n-1])?(x.unshift(d(k-1,n-1)),k--,n--):h[k-1][n]>h[k][n-1]?k--:n--;return x}function xb(a){return Ba(arguments,function(a,c){return a+c},0)}
function yb(a){return xb.apply(null,arguments)/arguments.length}function zb(a){var b=arguments.length;if(2>b)return 0;var c=yb.apply(null,arguments);return xb.apply(null,Aa(arguments,function(a){return Math.pow(a-c,2)}))/(b-1)}function Ab(a){return Math.sqrt(zb.apply(null,arguments))};var Bb="StopIteration"in p?p.StopIteration:{message:"StopIteration",stack:""};function Cb(){}Cb.prototype.next=function(){throw Bb;};Cb.prototype.pe=function(){return this};function Db(a){if(a instanceof Cb)return a;if("function"==typeof a.pe)return a.pe(!1);if(ga(a)){var b=0,c=new Cb;c.next=function(){for(;;){if(b>=a.length)throw Bb;if(b in a)return a[b++];b++}};return c}throw Error("Not implemented");}
function Eb(a,b){if(ga(a))try{za(a,b,void 0)}catch(c){if(c!==Bb)throw c;}else{a=Db(a);try{for(;;)b.call(void 0,a.next(),void 0,a)}catch(c){if(c!==Bb)throw c;}}}function Fb(a){if(Ca(arguments,function(a){return!a.length})||!arguments.length)return new Cb;var b=new Cb,c=arguments,d=Ea(c.length);b.next=function(){if(d){for(var a=Aa(d,function(a,b){return c[b][a]}),b=d.length-1;0<=b;b--){if(d[b]<c[b].length-1){d[b]++;break}if(0==b){d=null;break}d[b]=0}return a}throw Bb;};return b};function Gb(a){Hb(a);return a.c.concat()}function Hb(a){if(a.Cf!=a.c.length){for(var b=0,c=0;b<a.c.length;){var d=a.c[b];Ib(a.X,d)&&(a.c[c++]=d);b++}a.c.length=c}if(a.Cf!=a.c.length){for(var e={},c=b=0;b<a.c.length;)d=a.c[b],Ib(e,d)||(a.c[c++]=d,e[d]=1),b++;a.c.length=c}}function Ib(a,b){return Object.prototype.hasOwnProperty.call(a,b)};function Jb(){return u("iPhone")&&!u("iPod")&&!u("iPad")};var Kb=Ja(),Lb=u("Trident")||u("MSIE"),Mb=u("Edge"),Nb=u("Gecko")&&!(-1!=Ga.toLowerCase().indexOf("webkit")&&!u("Edge"))&&!(u("Trident")||u("MSIE"))&&!u("Edge"),Ob=-1!=Ga.toLowerCase().indexOf("webkit")&&!u("Edge");function Pb(){var a=Ga;if(Nb)return/rv\:([^\);]+)(\)|;)/.exec(a);if(Mb)return/Edge\/([\d\.]+)/.exec(a);if(Lb)return/\b(?:MSIE|rv)[: ]([^\);]+)(\)|;)/.exec(a);if(Ob)return/WebKit\/(\S+)/.exec(a)}
var ua=function(){if(Kb&&p.opera){var a;var b=p.opera.version;try{a=b()}catch(c){a=b}return a}a="";(b=Pb())&&(a=b?b[1]:"");return Lb&&(b=(b=p.document)?b.documentMode:void 0,b>parseFloat(a))?String(b):a}(),Qb={};var Rb=Jb()||u("iPod"),Sb=u("iPad");!u("Android")||Ka()||u("Firefox")||Ja();var Ub=Ka(),Vb=u("Safari")&&!(Ka()||u("Coast")||Ja()||u("Edge")||u("Silk")||u("Android"))&&!(Jb()||u("iPad")||u("iPod"));/*

 Copyright 2015 The Lovefield Project Authors. All Rights Reserved.

 Licensed under the Apache License, Version 2.0 (the "License");
 you may not use this file except in compliance with the License.
 You may obtain a copy of the License at

     http://www.apache.org/licenses/LICENSE-2.0

 Unless required by applicable law or agreed to in writing, software
 distributed under the License is distributed on an "AS IS" BASIS,
 WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 See the License for the specific language governing permissions and
 limitations under the License.
*/
function Wb(){this.vg=Vb||Sb||Rb;this.Uf=!(this.vg||Lb&&!Qb[10]&&!(Qb[10]=0<=ta(10)));!Lb||Qb[11]||(Qb[11]=0<=ta(11));this.Dg=Ub||Vb}var Xb;function A(){return new window.Map}function Yb(a){var b=0,c=Array(a.size);a.forEach(function(a,e){c[b++]=e});return c}function B(a){var b=0,c=Array(a.size);a.forEach(function(a){c[b++]=a});return c};var Zb={};r("lf.TransactionType",Zb);Zb.READ_ONLY=0;Zb.READ_WRITE=1;function $b(a,b){this.Oa=a;this.of=b;this.Y=y()}$b.prototype.ia=function(){try{ac(this.Oa)}catch(a){return bb(a)}return(0==this.of?this.nc():bc(this)).then(function(a){this.Oa.ia();return a}.bind(this))};function bc(a){cc(a);dc(a);return a.nc()}
function cc(a){a.Oa.pb.forEach(function(a,c){var d=this.Oa.$().get(c),d=this.G(d.getName(),d.Ab.bind(d)),e=B(a.wa).map(function(a){return a.id()});0<e.length&&d.remove(e).le(this.Kd,this);e=B(a.na).map(function(a){return a[1]}).concat(B(a.ta));d.put(e).le(this.Kd,this)},a)}function dc(a){ec(a.Oa).forEach(function(a){var c=this.G(a.getName(),rb),d;c.get([-1]).then(function(a){d=a;return c.remove([])}).then(function(){c.put(d);c.put(a.Ea())},this.Kd.bind(this))},a)}$b.prototype.Kd=function(a){this.Y.reject(a)};function fc(a){this.wg=a}fc.prototype.toString=g("wg");var gc=new fc("backstore"),hc=new fc("cache"),ic=new fc("indexstore"),jc=new fc("engine"),kc=new fc("runner"),lc=new fc("observerregistry"),mc=new fc("schema");function C(a){return q(a)?new window.Set(a):new window.Set}function nc(a){var b=0,c=Array(a.size);a.forEach(function(a){c[b++]=a});return c}function oc(a,b){if(b.size>a.size)return!1;var c=!0;b.forEach(function(b){c=c&&a.has(b)});return c};function pc(a,b){this.pa=a;this.o=b||{}}function qc(a){var b=C();a.forEach(function(a){b.add(a>>9)});return nc(b)}pc.prototype.V=g("pa");function rc(a,b){b.forEach(function(a){this.o[a.id()]=a.Ea()},a)}function sc(a,b){b.forEach(function(a){delete this.o[a]},a)}pc.prototype.Ea=function(){return{id:this.pa,value:JSON.stringify(this.o)}};function tc(a){return new pc(a.id,JSON.parse(a.value))};function uc(a,b,c){this.ba=a;this.Jb=b;this.ef=c}m=uc.prototype;m.get=function(a){if(0==a.length)return this.wc();var b=this.Jb;return vc(this,a).then(function(c){return a.map(function(a){var e=c.get(a>>9);return b(e.o[a])})})};function vc(a,b){var c=A(),d=y(),e=qc(b).map(function(a){return new v(function(b,d){var e;try{e=this.ba.get(a)}catch(x){d(x);return}e.onerror=d;e.onsuccess=function(a){a=tc(a.target.result);c.set(a.V(),a);b()}},this)},a);eb(e).then(function(){d.resolve(c)});return d.ha}
m.wc=function(){return new v(function(a,b){var c=[],d;try{d=this.ba.openCursor()}catch(e){b(e);return}d.onerror=b;d.onsuccess=function(){var b=d.result;if(b){var f;f=tc(b.value).o;for(var h in f)c.push(this.Jb(f[h]));b.continue()}else a(c)}.bind(this)},this)};m.Qb=function(a){return new v(function(b,c){var d;try{d=a()}catch(e){c(e);return}d.onsuccess=b;d.onerror=c},this)};
m.put=function(a){if(0==a.length)return w();var b=A();a.forEach(function(a){var d;d=a.id()>>9;var e=b.get(d)||null;null===e&&(e=this.ef(this.ba.name,d));rc(e,[a]);b.set(d,e)},this);a=B(b).map(function(a){return this.Qb(function(){return this.ba.put(a.Ea())}.bind(this))},this);return eb(a)};
m.remove=function(a){if(0==a.length)return this.Qb(function(){return this.ba.clear()}.bind(this));var b=A();a.forEach(function(a){var d=a>>9,e=b.get(d)||null;null===e&&(e=this.ef(this.ba.name,d));sc(e,[a]);b.set(d,e)},this);a=B(b).map(function(a){return this.Qb(function(){return 0==Object.keys(a.o).length?this.ba.delete(a.V()):this.ba.put(a.Ea())}.bind(this))},this);return eb(a)};function wc(a,b,c){a=a.j(hc);var d=[c<<9,(c+1<<9)-1];b=a.Xa(b,d[0],d[1]);c=new pc(c);rc(c,b);return c}
function xc(a,b){return new pc(b)};function yc(){};function zc(a){this.S=a.j(hc);this.C=a.j(ic);this.i=a.j(mc)}zc.prototype.update=function(a){a.forEach(function(a){Ac(this,a);Bc(this,a)},this)};function Bc(a,b){var c=b.getName();b.wa.forEach(function(a,b){this.S.remove(c,b)},a);b.ta.forEach(function(a){this.S.set(c,a)},a);b.na.forEach(function(a){this.S.set(c,a[1])},a)}function Ac(a,b){var c=a.i.table(b.getName());Cc(b).forEach(function(a){Dc(this,c,a)},a)}
function Dc(a,b,c){var d=a.C.ic.get(b.getName())||[],e=0;d.forEach(function(a){try{Ec(a,c),e++}catch(b){throw d.slice(0,e).forEach(function(a){Ec(a,[c[1],c[0]])},this),b;}},a)}function Ec(a,b){var c=null===b[1]?void 0:b[1].Db(a.getName()),d=null===b[0]?void 0:b[0].Db(a.getName());if(!q(d)&&q(c))a.add(c,b[1].id());else if(q(d)&&q(c)){if(null===c||null===d){if(c==d)return}else if(0==a.oc().compare(d,c))return;a.add(c,b[1].id());a.remove(d,b[0].id())}else q(d)&&!q(c)&&a.remove(d,b[0].id())};var Fc={};r("lf.ConstraintAction",Fc);Fc.RESTRICT=0;Fc.CASCADE=1;var Gc={};r("lf.ConstraintTiming",Gc);Gc.IMMEDIATE=0;Gc.DEFERRABLE=1;var Hc={};r("lf.Order",Hc);Hc.DESC=0;Hc.ASC=1;var Ic={};r("lf.Type",Ic);Ic.ARRAY_BUFFER=0;Ic.BOOLEAN=1;Ic.DATE_TIME=2;Ic.INTEGER=3;Ic.NUMBER=4;Ic.STRING=5;Ic.OBJECT=6;var Jc={0:null,1:!1,2:Object.freeze(new Date(0)),3:0,4:0,5:"",6:null};r("lf.type.DEFAULT_VALUES",Jc);function D(a,b){this.code=a;this.message="http://sn.im/2a0j3wn?c="+a;if(1<arguments.length)for(var c=1;c<=Math.min(4,arguments.length-1);++c)this.message+="&p"+(c-1)+"="+encodeURIComponent(arguments[c].toString().slice(0,64))}t(D,Error);function Kc(){this.X=A();this.size=0}m=Kc.prototype;m.has=function(a){return this.X.has(a)};m.set=function(a,b){var c=this.X.get(a)||null;null===c&&(c=C(),this.X.set(a,c));c.has(b)||(c.add(b),this.size++);return this};m.Tb=function(a,b){var c=this.X.get(a)||null;null===c&&(c=C(),this.X.set(a,c));b.forEach(function(a){c.has(a)||(c.add(a),this.size++)},this);return this};m.Td=function(a){a.keys().forEach(function(b){var c=a.get(b);this.Tb(b,c)},this);return this};
m.delete=function(a,b){var c=this.X.get(a,null);if(null===c)return!1;var d=c.delete(b);d&&(--this.size,0==c.size&&this.X.delete(a));return d};m.get=function(a){a=this.X.get(a)||null;return null===a?null:nc(a)};m.clear=function(){this.X.clear();this.size=0};m.keys=function(){return Yb(this.X)};m.values=function(){var a=[];this.X.forEach(function(b){a.push.apply(a,nc(b))});return a};function Lc(a){this.C=a.j(ic);this.i=a.j(mc);this.S=a.j(hc);this.Zc=null}function Mc(a,b,c){var d=b.Bb().hg;c.forEach(function(a){d.forEach(function(b){if(null==a.o[b.getName()])throw new D(202,b.m());},this)},a)}function Nc(a,b,c,d){b.Bb().Jd().forEach(function(a){a.timing==d&&Pc(this,a,c)},a)}function Pc(a,b,c){var d=Qc(a,b);c.forEach(function(a){if(Rc(a[0],a[1],b.name)&&(a=a[1].o[b.cb],null!==a&&!d.eb(a)))throw new D(203,b.name);},a)}
function Qc(a,b){null===a.Zc&&(a.Zc=A());var c=a.Zc.get(b.name)||null;null===c&&(c=a.i.table(b.Pa)[b.gc].xa(),c=a.C.get(c.m()),a.Zc.set(b.name,c));return c}function Rc(a,b,c){return(null===a?null!==b:null===b)||a.Db(c)!=b.Db(c)}function Sc(a,b,c,d){b=Tc(a.i.info(),b.getName(),0);null!==b&&(b=b.filter(function(a){return a.timing==d}),0!=b.length&&Uc(a,b,c,function(a,b,c){if(b.eb(c))throw new D(203,a.name);}))}
function Vc(a,b,c){b=Tc(a.i.info(),b.getName(),1);if(null===b)return null;var d=new Kc;Uc(a,b,c,function(a,b,c){b=b.get(c);0<b.length&&d.Tb(a.xe,b)});return d}function Wc(a,b,c){var d=new Kc;Uc(a,c,b,function(a,b,c,k){b.get(c).forEach(function(b){d.set(b,{Hd:a,mg:k[1]})})});return d}function Uc(a,b,c,d){b.forEach(function(a){var b=this.C.get(a.name),h=Qc(this,a);c.forEach(function(c){Rc(c[0],c[1],h.getName())&&d(a,b,c[0].o[a.gc],c)},this)},a)}
function Xc(a,b,c,d){0!=c.length&&(c=c.map(function(a){return[null,a]}),Nc(a,b,c,d))}function Yc(a,b,c,d){0!=c.length&&(Nc(a,b,c,d),Sc(a,b,c,d))}function Zc(a,b,c,d){0!=c.length&&(c=c.map(function(a){return[a,null]}),Sc(a,b,c,d))}
function $c(a,b,c){var d={ke:[],gf:new Kc},e=new Kc;e.Tb(b.getName(),c.map(function(a){return a.id()}));do{var f=new Kc;e.keys().forEach(function(a){var b=this.i.table(a);a=e.get(a).map(function(a){return[this.S.get(a),null]},this);b=Vc(this,b,a);null!==b&&(d.ke.unshift.apply(d.ke,b.keys()),f.Td(b))},a);e=f;d.gf.Td(e)}while(0<e.size);return d};function ad(a){this.ta=A();this.na=A();this.wa=A();this.u=a}m=ad.prototype;m.getName=g("u");m.add=function(a){if(this.wa.has(a.id())){var b=[this.wa.get(a.id()),a];this.na.set(a.id(),b);this.wa.delete(a.id())}else this.ta.set(a.id(),a)};m.modify=function(a){var b=a[1],c=a[0].id();this.ta.has(c)?this.ta.set(c,b):(this.na.has(c)&&(a=[this.na.get(a[0].id())[0],b]),this.na.set(c,a))};
m.delete=function(a){if(this.ta.has(a.id()))this.ta.delete(a.id());else if(this.na.has(a.id())){var b=this.na.get(a.id())[0];this.na.delete(a.id());this.wa.set(a.id(),b)}else this.wa.set(a.id(),a)};m.Td=function(a){a.ta.forEach(function(a){this.add(a)},this);a.na.forEach(function(a){this.modify(a)},this);a.wa.forEach(function(a){this.delete(a)},this)};
function Cc(a){var b=[];a.ta.forEach(function(a){b.push([null,a])});a.na.forEach(function(a){b.push(a)});a.wa.forEach(function(a){b.push([a,null])});return b}m.toString=function(){return"["+Yb(this.ta).toString()+"], ["+Yb(this.na).toString()+"], ["+Yb(this.wa).toString()+"]"};function bd(a){var b=new ad(a.u);a.ta.forEach(function(a){b.delete(a)});a.wa.forEach(function(a){b.add(a)});a.na.forEach(function(a){b.modify([a[1],a[0]])});return b}
m.Yf=function(){return 0==this.ta.size&&0==this.wa.size&&0==this.na.size};function cd(a,b){this.aa=A();b.forEach(function(a){this.aa.set(a.getName(),a)},this);this.i=a.j(mc);this.S=a.j(hc);this.C=a.j(ic);this.ua=new Lc(a);this.gd=new zc(a);this.pb=A()}function ec(a){var b=[];Yb(a.pb).map(function(a){return this.aa.get(a)},a).forEach(function(a){a.xb()&&(a.ya().forEach(function(a){b.push(this.C.get(a.m()))},this),b.push(this.C.get(a.getName()+".#")))},a);return b}m=cd.prototype;m.$=g("aa");
function dd(a){var b=[];a.aa.forEach(function(a){a.xb()&&(a.ya().forEach(function(a){b.push(a.m())}),b.push(a.getName()+".#"))});return b}m.vb=function(a,b){ed(this,a);Mc(this.ua,a,b);Xc(this.ua,a,b,0);for(var c=0;c<b.length;c++)fd(this,a,[null,b[c]])};
function fd(a,b,c){var d=b.getName(),e=a.pb.get(d)||new ad(d);a.pb.set(d,e);try{Dc(a.gd,b,c)}catch(h){throw h;}b=c[0];var f=c[1];null===b&&null!==f?(a.S.set(d,f),e.add(f)):null!==b&&null!==f?(a.S.set(d,f),e.modify(c)):null!==b&&null===f&&(a.S.remove(d,b.id()),e.delete(b))}m.update=function(a,b){ed(this,a);Mc(this.ua,a,b);var c=b.map(function(a){return[this.S.get(a.id()),a]},this);gd(this,a,c);Yc(this.ua,a,c,0);c.forEach(function(b){fd(this,a,b)},this)};
m.Md=function(a,b){ed(this,a);Mc(this.ua,a,b);for(var c=0;c<b.length;c++){var d=b[c],e=null,f,h=a.Bb().bd();if(null===h)f=null;else{f=this.ua;var h=h.m(),k=d.Db(h);f=f.C.get(h).get(k);f=0==f.length?null:f[0]}null!=f?(e=this.S.get(f),d.pa=f,Yc(this.ua,a,[[e,d]],0)):Xc(this.ua,a,[d],0);fd(this,a,[e,d])}};m.remove=function(a,b){ed(this,a);hd(this,a,b);Zc(this.ua,a,b,0);for(var c=0;c<b.length;c++)fd(this,a,[b[c],null])};
function gd(a,b,c){b=Tc(a.i.info(),b.getName(),1);if(null!==b){var d=Wc(a.ua,c,b);d.keys().forEach(function(a){d.get(a).forEach(function(b){var c=this.i.table(b.Hd.xe),d=this.S.get(a),n=c.Ab(d.Ea());n.o[b.Hd.cb]=b.mg.o[b.Hd.gc];fd(this,c,[d,n])},this)},a)}}
function hd(a,b,c){if(null!==Tc(a.i.info(),b.getName(),1)){b=$c(a.ua,b,c);var d=b.gf;b.ke.forEach(function(a){var b=this.i.table(a);a=d.get(a).map(function(a){return this.S.get(a)},this);Zc(this.ua,b,a,0);a.forEach(function(a){fd(this,b,[a,null])},this)},a)}}function ac(a){a.pb.forEach(function(a){var c=this.aa.get(a.getName());Xc(this.ua,c,B(a.ta),1);Zc(this.ua,c,B(a.wa),1);Yc(this.ua,c,B(a.na),1)},a)}m.ia=aa();m.Fb=function(){var a=B(this.pb).map(function(a){return bd(a)});this.gd.update(a)};
function ed(a,b){if(!a.aa.has(b.getName()))throw new D(106,b.getName());};function id(a,b,c,d){this.b=a;this.w=b;this.da=this.b==E?!1:c;this.ma=this.w==E?!1:d}var E=new (aa());id.prototype.toString=function(){return(this.da?"(":"[")+(this.b==E?"unbound":this.b)+", "+(this.w==E?"unbound":this.w)+(this.ma?")":"]")};function jd(a){if(kd(a))return[];var b=null,c=null;a.b==E||(b=new id(E,a.b,!1,!a.da));a.w==E||(c=new id(a.w,E,!a.ma,!1));return[b,c].filter(function(a){return null!==a})}id.prototype.reverse=function(){return new id(this.w,this.b,this.ma,this.da)};
function ld(a,b){var c=md(a.b,b.b,!0,a.da,b.da);if(0==c)return!0;var d=-1==c?a:b,c=1==c?a:b;return d.w==E||d.w>c.b||d.w==c.b&&!d.ma&&!c.da}function nd(){return new id(E,E,!1,!1)}function kd(a){return a.b==E&&a.w==E}function od(a){return a.b==a.w&&a.b!=E&&!a.da&&!a.ma}id.prototype.contains=function(a){var b=this.w==E||a<this.w||a==this.w&&!this.ma;return(this.b==E||a>this.b||a==this.b&&!this.da)&&b};
function md(a,b,c,d,e){function f(a){return c?a:1==a?-1:1}d=d||!1;e=e||!1;return a==E?b==E?(d?!e:e)?d?f(1):f(-1):0:f(-1):b==E?f(1):a<b?-1:a==b?(d?!e:e)?d?f(1):f(-1):0:1}function pd(a,b){var c=md(a.b,b.b,!0,a.da,b.da);0==c&&(c=md(a.w,b.w,!1,a.ma,b.ma));return c};function F(a,b){this.entries=a;this.K=C(b);this.Va=null}function G(a){return nc(a.K)}function qd(a){return a.entries.map(function(a){return a.sa.o})}function rd(a){return a.entries.map(function(a){return a.sa.id()})}function sd(a,b){return a.Va.get(b.m())}var td=null;function ud(){null===td&&(td=new F([],[]));return td}
function vd(a){if(0==a.length)return ud();for(var b=a.reduce(function(a,b){return a+b.entries.length},0),c=Array(b),d=0,b=a.map(function(a){var b=A();a.entries.forEach(function(a){c[d++]=a;b.set(a.id,a)});return b}),e=A(),f=0;f<c.length;f++)b.every(function(a){return a.has(c[f].id)})&&e.set(c[f].id,c[f]);return new F(B(e),nc(a[0].K))}function wd(a){if(0==a.length)return ud();var b=A();a.forEach(function(a){a.entries.forEach(function(a){b.set(a.id,a)})});return new F(B(b),nc(a[0].K))}
function xd(a,b){var c=1<b.length,d=a.map(function(a){return new yd(a,c)});return new F(d,b)}function yd(a,b){this.sa=a;this.id=zd++;this.Pd=b}var zd=0;function H(a,b){var c=b.Wa();return null!==c&&a.sa.o.hasOwnProperty(c)?a.sa.o[c]:a.Pd?a.sa.o[I(b.G())][b.getName()]:a.sa.o[b.getName()]}function Ad(a,b,c){var d=b.Wa();if(null!=d)a.sa.o[d]=c;else if(a.Pd){var d=I(b.G()),e=a.sa.o[d];null==e&&(e={},a.sa.o[d]=e);e[b.getName()]=c}else a.sa.o[b.getName()]=c}
function Bd(a,b,c,d){function e(a,b){if(a.Pd){var c=a.sa.o,d;for(d in c)f[d]=c[d]}else f[b[0]]=a.sa.o}var f={};e(a,b);e(c,d);a=new z(-1,f);return new yd(a,!0)};r("lf.bind",function(a){return new Cd(a)});function Cd(a){this.fa=a}r("lf.Binder",Cd);Cd.prototype.xa=g("fa");function Dd(){this.Oe=Ed();var a=Fd();this.dc=A();this.dc.set(1,Gd());this.dc.set(2,Hd());this.dc.set(4,a);this.dc.set(3,a);this.dc.set(5,Id())}Dd.xc=function(){return Dd.Ke?Dd.Ke:Dd.Ke=new Dd};function Jd(a,b,c){return(a.dc.get(b)||null).get(c)||null}function Ed(){function a(a){return a}var b=A();b.set(1,function(a){return null===a?null:a?1:0});b.set(2,function(a){return null===a?null:a.getTime()});b.set(3,a);b.set(4,a);b.set(5,a);return b}
function Gd(){var a=A();a.set("eq",function(a,c){return a==c});a.set("neq",function(a,c){return a!=c});return a}
function Fd(){var a=Gd();a.set("between",function(a,c){return null===a||null===c[0]||null===c[1]?!1:a>=c[0]&&a<=c[1]});a.set("gte",function(a,c){return null===a||null===c?!1:a>=c});a.set("gt",function(a,c){return null===a||null===c?!1:a>c});a.set("in",function(a,c){return-1!=c.indexOf(a)});a.set("lte",function(a,c){return null===a||null===c?!1:a<=c});a.set("lt",function(a,c){return null===a||null===c?!1:a<c});return a}
function Id(){var a=Fd();a.set("match",function(a,c){return null===a||null===c?!1:(new RegExp(c)).test(a)});return a}
function Hd(){var a=A();a.set("between",function(a,c){return null===a||null===c[0]||null===c[1]?!1:a.getTime()>=c[0].getTime()&&a.getTime()<=c[1].getTime()});a.set("eq",function(a,c){return(null===a?-1:a.getTime())==(null===c?-1:c.getTime())});a.set("gte",function(a,c){return null===a||null===c?!1:a.getTime()>=c.getTime()});a.set("gt",function(a,c){return null===a||null===c?!1:a.getTime()>c.getTime()});a.set("in",function(a,c){return c.some(function(c){return c.getTime()==a.getTime()})});a.set("lte",
function(a,c){return null===a||null===c?!1:a.getTime()<=c.getTime()});a.set("lt",function(a,c){return null===a||null===c?!1:a.getTime()<c.getTime()});a.set("neq",function(a,c){return(null===a?-1:a.getTime())!=(null===c?-1:c.getTime())});return a};function J(){this.h=this.B=null}var Kd=[];J.prototype.getParent=g("B");J.prototype.gb=function(){for(var a=this;!ea(a.getParent());)a=a.getParent();return a};function Ld(a){for(var b=0;!ea(a.getParent());)b++,a=a.getParent();return b}function K(a){return a.h||Kd}function Md(a,b){return K(a)[b]||null}function Nd(a,b,c){b.B=a;null===a.h?a.h=[b]:a.h.splice(c,0,b)}function L(a,b){b.B=a;null===a.h?a.h=[b]:a.h.push(b)}
function Od(a,b){var c=a.h&&a.h[b];return c?(c.B=null,a.h.splice(b,1),0==a.h.length&&(a.h=null),c):null}J.prototype.removeChild=function(a){return Od(this,K(this).indexOf(a))};function Pd(a,b,c){Md(a,c).B=null;b.B=a;a.h[c]=b}function Qd(a,b,c){!1!==b.call(c,a)&&K(a).forEach(function(a){Qd(a,b,c)})};function Rd(){J.call(this);this.pa=Sd++}t(Rd,J);var Sd=0;Rd.prototype.V=g("pa");function Td(a,b,c){Rd.call(this);this.N=a;this.value=b;this.F=c;this.sc=Jd(Dd.xc(),this.N.H(),this.F);this.Ya=!1;this.$b=b}t(Td,Rd);m=Td.prototype;m.Ib=function(){var a=new Td(this.N,this.value,this.F);a.$b=this.$b;a.qd(this.Ya);var b=this.V();a.pa=b;return a};m.fb=function(a){return null!=a?(a.push(this.N),a):[this.N]};m.qd=ba("Ya");function Ud(a){var b=!1;a.value instanceof Cd||(b="array"==da(a.value)?!a.value.some(function(a){return a instanceof Cd}):!0);if(!b)throw new D(501);}
m.eval=function(a){Ud(this);if("in"==this.F)return Vd(this,a);var b=a.entries.filter(function(a){return this.sc(H(a,this.N),this.value)!=this.Ya},this);return new F(b,G(a))};m.bind=function(a){if(this.$b instanceof Cd){var b=this.$b.xa();if(a.length<=b)throw new D(510);this.value=a[b]}else"array"==da(this.$b)&&(this.value=this.$b.map(function(b){if(b instanceof Cd){var d=b.xa();if(a.length<=d)throw new D(510);return a[b.xa()]}return b}))};
function Vd(a,b){var c=C(a.value),d=function(a){return null===a?!1:c.has(a)!=this.Ya}.bind(a),e=b.entries.filter(function(a){return d(H(a,this.N))},a);return new F(e,G(b))}m.toString=function(){return"value_pred("+this.N.m()+" "+this.F+(this.Ya?"(complement)":"")+" "+this.value+")"};function Wd(a){this.ca=a;this.Xc=this.Ba=null}function Xd(a,b){null===a.Ba&&null!=a.s&&(a.Ba=Yd(a.s));return a.Ba.get(b)||null}function Yd(a){var b=A();Qd(a,function(a){b.set(a.V(),a)});return b}function Zd(a,b){b.s&&(a.s=b.s.Ib());a.Xc=b}Wd.prototype.bind=function(){return this};function $d(a,b){var c=a.s;null!=c&&Qd(c,function(a){a instanceof Td&&a.bind(b)})};function ae(a){Wd.call(this,a)}t(ae,Wd);function be(a){var b="";a.forEach(function(c,d){b+=c.N.m()+" ";b+=1==c.jb?"ASC":"DESC";d<a.length-1&&(b+=", ")});return b}ae.prototype.$=function(){return C(this.b)};ae.prototype.clone=function(){var a=new ae(this.ca);Zd(a,this);this.f&&(a.f=this.f.slice());this.b&&(a.b=this.b.slice());a.W=this.W;a.M=this.M;this.L&&(a.L=this.L.slice());this.ja&&(a.ja=this.ja.slice());this.Ob&&(a.Ob=this.Ob);this.Vb&&(a.Vb=this.Vb);a.wb=this.wb;return a};
ae.prototype.bind=function(a){ae.Gb.bind.call(this,a);null!=this.Ob&&(this.W=a[this.Ob.xa()]);null!=this.Vb&&(this.M=a[this.Vb.xa()]);$d(this,a);return this};function ce(a,b){this.Ca=a;this.aa=b}ce.prototype.gb=g("Ca");ce.prototype.$=g("aa");function de(a){var b=C();a.forEach(function(a){a.$().forEach(b.add.bind(b))});return b};function ee(a,b){this.global=a;this.Ja=a.j(gc);this.nd=b.map(function(a){return a.context});this.Ye=b.map(function(a){return a.ae});this.Ae=de(this.Ye);this.pf=fe(this);this.$a=y()}function fe(a){return a.nd.some(function(a){return!(a instanceof ae)})?1:0}m=ee.prototype;
m.exec=function(){function a(){var f=d.shift();if(f){var h=e[c.length];return f.gb().exec(b,h).then(function(b){c.push(b[0]);return a()})}return w()}var b=new cd(this.global,this.Ae),c=[],d=this.Ye.slice(),e=this.nd;return a().then(function(){return this.Ja.zb(this.pf,b).ia()}.bind(this)).then(function(){this.Yd(c);return c}.bind(this),function(a){b.Fb();throw a;})};m.H=g("pf");m.$=g("Ae");m.Kb=g("$a");m.V=function(){return ja(this)};m.Yd=aa();function ge(a,b){ee.call(this,a,b);this.Eb=a.j(lc)}t(ge,ee);ge.prototype.getPriority=l(0);ge.prototype.Yd=function(a){this.nd.forEach(function(b,c){he(this.Eb,b,a[c])},this)};function ie(a,b){this.g=a;this.Eb=a.j(lc);this.Da=a.j(kc);this.gd=new zc(a);this.pb=b;var c=a.j(mc),d=this.pb.map(function(a){return c.table(a.getName())});this.aa=C(d);this.$a=y()}m=ie.prototype;m.exec=function(){this.gd.update(this.pb);this.Lc();return w()};m.H=l(1);m.$=g("aa");m.Kb=g("$a");m.V=function(){return ja(this)};m.getPriority=l(1);m.Lc=function(){var a=je(this.Eb,this.aa);0!=a.length&&(a=new ge(this.g,a),ke(this.Da,a))};function le(a){this.g=a;this.Ja=a.j(gc);this.Da=a.j(kc)}le.prototype.Wd=function(a){a=new ie(this.g,a);ke(this.Da,a)};function M(a,b){this.Xb=a;this.l=b;this.Sa=A()}r("lf.backstore.FirebaseRawBackStore",M);M.prototype.cd=g("l");M.prototype.dd=function(){throw new D(351);};function me(a,b){var c=y(),d=a;b.length&&(d=a.child(b));d.once("value",function(a){c.resolve(a.val())},function(a){c.reject(a)});return c.ha}function ne(a,b,c){function d(a){a?e.reject(a):e.resolve()}c=c||!1;var e=y();c?a.set(b,d):a.update(b,d);return e.ha}
M.prototype.Fa=function(a){return me(this.l,"@rev/R").then(function(a){this.La=a;return me(this.l,"@table")}.bind(this)).then(function(b){var c=0,d;for(d in b)this.Sa.set(d,b[d]),b[d]>c&&(c=b[d]);a.ra().forEach(function(a){this.Sa.has(a.getName())||(b[a.getName()]=++c)},this);d=this.l.child("@table");return ne(d,b)}.bind(this))};
function oe(a,b,c){var d=a.Sa.get(b);return null!=d?function(){var a={},b=y();this.l.orderByChild("T").equalTo(d).once("value",function(d){d.forEach(function(b){var d=c(b.val());a[parseInt(b.key(),10)]=d});b.resolve(a)});return b.ha}.call(a).then(function(a){a["@rev"]={R:++this.La};return ne(this.l,a)}.bind(a)):w()}M.prototype.qc=function(a){return oe(this,a,l(null)).then(function(){this.Sa.delete(a);return ne(this.l.child("@table/"+a),null,!0)}.bind(this))};M.prototype.dropTable=M.prototype.qc;
M.prototype.lc=function(a,b,c){return oe(this,a,function(a){var e=a.P;e[b]=c;return{R:this.La+1,T:a.T,P:e}}.bind(this))};M.prototype.addTableColumn=M.prototype.lc;M.prototype.rc=function(a,b){return oe(this,a,function(a){var d=a.P;delete d[b];return{R:this.La+1,T:a.T,P:d}}.bind(this))};M.prototype.dropTableColumn=M.prototype.rc;M.prototype.Kc=function(a,b,c){return oe(this,a,function(a){var e=a.P;e[c]=e[b];delete e[b];return{R:this.La+1,T:a.T,P:e}}.bind(this))};M.prototype.renameTableColumn=M.prototype.Kc;
M.prototype.rb=function(){throw new D(351);};M.prototype.createRow=M.prototype.rb;M.prototype.Ac=g("Xb");M.prototype.getVersion=M.prototype.Ac;M.prototype.bc=function(a){var b=y();a=this.Sa.get(a);this.l.orderByChild("T").equalTo(a).once("value",function(a){var d=[];a.forEach(function(a){d.push(a.val().P)});b.resolve(d)});return b.ha};M.prototype.dump=function(){var a={},b=Yb(this.Sa).map(function(b){return this.bc(b).then(function(d){a[b]=d})}.bind(this));return eb(b).then(function(){return a})};
M.prototype.dump=M.prototype.dump;function pe(a,b,c){$b.call(this,c,b);this.l=a}t(pe,$b);pe.prototype.G=function(a){return this.l.yc(a)};
pe.prototype.nc=function(){var a=this.Oa.pb;if(0==a.size)this.Y.resolve();else{var b=this.l.La+1;this.l.La=b;var c={"@rev":{R:b}};a.forEach(function(a,e){var f=this.l.Sa.get(e);a.ta.forEach(function(a,d){c[d]={R:b,T:f,P:a.o}});a.na.forEach(function(a,d){c[d]={R:b,T:f,P:a[1].o}});a.wa.forEach(function(a,b){c[b]=null})},this);this.l.l.update(c,function(c){null===c?this.Y.resolve():(this.l.La=b-1,c=B(a).map(function(a){return qe(this.l,a.getName())},this),eb(c).then(this.Y.reject.bind(this.Y),this.Y.reject.bind(this.Y)))}.bind(this))}return this.Y.ha};function re(){this.va=A()}function se(a,b){if(0==b.length)return B(a.va);var c=[];b.forEach(function(a){a=this.va.get(a)||null;null===a||c.push(a)},a);return c}re.prototype.getData=g("va");re.prototype.get=function(a){return w(se(this,a))};function te(a,b){b.forEach(function(a){this.va.set(a.id(),a)},a)}re.prototype.put=function(a){te(this,a);return w()};function ue(a,b){0==b.length||b.length==a.va.size?a.va.clear():b.forEach(function(a){this.va.delete(a)},a)}
re.prototype.remove=function(a){ue(this,a);return w()};function ve(a){return 0==a.va.size?0:Yb(a.va).reduce(function(a,c){return a>c?a:c},0)};function we(a,b){this.i=a;this.vf=b;this.Jc=A();this.La=-1;this.K=A();this.Sa=A();this.Ad=null}m=we.prototype;
m.Fa=function(a){this.l=this.vf.child(this.i.name());var b=a||function(){return w()};return me(this.l,"@db/version").then(function(a){return null===a?ne(this.l,xe(this),!0).then(function(){var a=new M(0,this.l);return b(a)}.bind(this)):a==this.i.version()?me(this.l,"@rev/R").then(function(a){this.La=a;return me(this.l,"@table")}.bind(this)).then(function(a){for(var b in a)this.Sa.set(b,a[b]);a=this.i.ra().map(function(a){return qe(this,a.getName())},this);return eb(a)}.bind(this)).then(function(){ye(this);
ze(this);return w()}.bind(this)):this.Zd(a,b).then(function(){return this.Fa()}.bind(this))}.bind(this))};m.Zd=function(a,b){var c=new M(a,this.l);return c.Fa(this.i).then(function(){return w()}.bind(this)).then(function(){return b(c)}).then(function(){var a=this.l.child("@db");return ne(a,{version:this.i.version()},!0)}.bind(this))};
function ze(a){a.l.off();a.l.on("child_removed",a.jg.bind(a));a.Bd&&(a.Bd.off(),a.Jc.clear());a.Bd=a.l.orderByChild("R").startAt(a.La+1);a.Bd.on("value",a.Wd.bind(a))}function ye(a){pb=B(a.K).map(function(a){return ve(a)}).reduce(function(a,c){return a>c?a:c},0)+1}m.jg=function(a){var b=a.val(),c=this.Jc.get(b.T)||null;null===c&&(c=C(),this.Jc.set(b.T,c));c.add(parseInt(a.key(),10))};
m.Wd=function(a){var b=a.child("@rev/R").val();null!=b&&b!=this.La&&(this.La=b,a=Ae(this,a),a.forEach(function(a){var b=this.K.get(a.getName()),e=Yb(a.wa);0<e.length&&ue(b,e);var f=B(a.ta);a.na.forEach(function(a){f.push(a[1])});te(b,f)},this),0<a.length&&this.Fc(a),ze(this))};
function Ae(a,b){var c=C(),d=A();a.Sa.forEach(function(a,b){var h=this.K.get(b),k=new ad(b);if(this.Jc.has(a)){var n=nc(this.Jc.get(a));n.forEach(function(a){c.add(a)});se(h,n).forEach(function(a){k.delete(a)})}d.set(a,k)}.bind(a));b.forEach(function(a){if("@rev"!=a.key()){var b=parseInt(a.key(),10);if(!c.has(b)){a=a.val();var h=d.get(a.T),k=this.K.get(h.getName());k.getData().has(b)?h.modify([se(k,[b])[0],new z(b,a.P)]):h.add(new z(b,a.P))}}}.bind(a));return B(d).filter(function(a){return!a.Yf()})}
function qe(a,b){var c=y(),d=a.Sa.get(b);a.l.orderByChild("T").equalTo(d).once("value",function(a){var d=new re,h=[];a.forEach(function(a){h.push(new z(parseInt(a.key(),10),a.val().P))});te(d,h);this.K.set(b,d);c.resolve()}.bind(a));return c.ha}function xe(a){var b={};b["@db"]={version:a.i.version()};b["@rev"]={R:1};a.La=1;b["@table"]={};a.i.ra().forEach(function(a,d){var e=a.getName();b["@table"][e]=d;this.K.set(e,new re);this.Sa.set(e,d)},a);return b}m.zb=function(a,b){return new pe(this,a,b)};
m.yc=function(a){var b=this.K.get(a)||null;if(null!==b)return b;throw new D(101,a);};m.close=aa();m.subscribe=ba("Ad");m.Fc=function(a){null!=this.Ad&&this.Ad(a)};function N(a,b,c,d){this.l=b;this.Ua=c;this.Xb=a;this.Uc=d}r("lf.backstore.IndexedDBRawBackStore",N);N.prototype.cd=g("l");N.prototype.getRawDBInstance=N.prototype.cd;N.prototype.dd=g("Ua");N.prototype.getRawTransaction=N.prototype.dd;N.prototype.qc=function(a){return new v(function(b,c){try{this.l.deleteObjectStore(a)}catch(d){c(d);return}b()},this)};N.prototype.dropTable=N.prototype.qc;
function Be(a,b,c,d){return new v(function(a,f){var h;try{var k=this.Ua.objectStore(b);h=k.openCursor()}catch(n){f(n);return}h.onsuccess=function(){var b=h.result;b?(c(b),b.continue()):(d(k),a())};h.onerror=f},a)}function Ce(a){var b=null;return b=a instanceof ArrayBuffer?tb(a):a instanceof Date?a.getTime():a}
function De(a,b,c){function d(a){var b=tc(a.value),d=b.o,e;for(e in d){var x=rb(d[e]);c(x);d[e]=x.Ea()}a.update(b.Ea())}function e(a){var b=rb(a.value);c(b);a.update(b.Ea())}return Be(a,b,a.Uc?d:e,aa())}N.prototype.lc=function(a,b,c){var d=Ce(c);return De(this,a,function(a){a.o[b]=d})};N.prototype.addTableColumn=N.prototype.lc;N.prototype.rc=function(a,b){return De(this,a,function(a){delete a.o[b]})};N.prototype.dropTableColumn=N.prototype.rc;
N.prototype.Kc=function(a,b,c){return De(this,a,function(a){a.o[c]=a.o[b];delete a.o[b]})};N.prototype.renameTableColumn=N.prototype.Kc;function Ee(a,b){var c=[];return new v(function(a,e){var f;try{f=this.Ua.objectStore(b).openCursor()}catch(h){e(h);return}f.onsuccess=function(){var b=f.result;if(b){if(this.Uc){var e;e=tc(b.value).o;for(var n in e)c.push(e[n])}else c.push(b.value);b.continue()}else a(c)}.bind(this);f.onerror=e},a)}N.prototype.rb=function(a){var b={},c;for(c in a)b[c]=Ce(a[c]);return sb(b)};
N.prototype.createRow=N.prototype.rb;N.prototype.Ac=g("Xb");N.prototype.getVersion=N.prototype.Ac;N.prototype.dump=function(){for(var a=this.l.objectStoreNames,b=[],c=0;c<a.length;++c){var d=a.item(c);b.push(this.bc(d))}return eb(b).then(function(b){var c={};b.forEach(function(b,d){c[a.item(d)]=b});return c})};N.prototype.dump=N.prototype.dump;N.prototype.bc=function(a){return Ee(this,a).then(function(a){return a.map(function(a){return a.value})})};function Fe(a,b){this.ba=a;this.Jb=b}m=Fe.prototype;m.get=function(a){if(0==a.length)return this.wc();a=a.map(function(a){return new v(function(c,d){var e;try{e=this.ba.get(a)}catch(f){d(f);return}e.onerror=d;e.onsuccess=function(a){c(this.Jb(a.target.result))}.bind(this)},this)},this);return eb(a)};
m.wc=function(){return new v(function(a,b){var c=[],d;try{d=this.ba.openCursor()}catch(e){b(e);return}d.onerror=b;d.onsuccess=function(){var b=d.result;b?(c.push(this.Jb(b.value)),b.continue()):a(c)}.bind(this)},this)};m.Qb=function(a){return new v(function(b,c){var d;try{d=a()}catch(e){c(e);return}d.onsuccess=b;d.onerror=c},this)};m.put=function(a){if(0==a.length)return w();a=a.map(function(a){return this.Qb(function(){return this.ba.put(a.Ea())}.bind(this))},this);return eb(a)};
m.remove=function(a){return new v(function(b,c){var d=this.ba.count();d.onsuccess=function(d){if(0==a.length||d.target.result==a.length)return this.Qb(function(){return this.ba.clear()}.bind(this)).then(b,c);d=a.map(function(a){return this.Qb(function(){return this.ba.delete(a)}.bind(this))},this);eb(d).then(b,c)}.bind(this);d.onerror=c},this)};function Ge(a,b,c,d,e){$b.call(this,c,d);this.g=a;this.Ua=b;this.Uc=e;this.Ua.oncomplete=this.Y.resolve.bind(this.Y);this.Ua.onabort=this.Y.reject.bind(this.Y)}t(Ge,$b);Ge.prototype.G=function(a,b,c){return this.Uc?(c=null!=c?c:0,a=this.Ua.objectStore(a),new uc(a,b,0==c?qa(wc,this.g):xc)):new Fe(this.Ua.objectStore(a),b)};Ge.prototype.nc=function(){return this.Y.ha};function He(a,b){this.g=a;this.i=b;this.Vc=b.Ze().If||!1}m=He.prototype;
m.Fa=function(a){var b=window.indexedDB||window.mozIndexedDB||window.webkitIndexedDB||window.msIndexedDB;if(null==b)throw new D(352);var c=a||function(){return w()};return new v(function(a,e){var f;try{f=b.open(this.i.name(),this.i.version())}catch(h){e(h);return}f.onerror=e;f.onupgradeneeded=function(a){Ie(this,c,a).then(aa(),e)}.bind(this);f.onsuccess=function(b){this.l=b.target.result;this.ge().then(function(b){pb=b+1;a(this.l)}.bind(this))}.bind(this)},this)};
function Ie(a,b,c){var d=c.target.result,e=c.target.transaction;c=new N(c.oldVersion,d,e,a.Vc);Je(d);a.i.ra().forEach(qa(a.Df,d,e),a);return b(c)}function Je(a){for(var b=[],c=0;c<a.objectStoreNames.length;++c){var d=a.objectStoreNames.item(c);-1!=d.indexOf(".")&&b.push(d)}b.forEach(function(b){try{a.deleteObjectStore(b)}catch(c){}})}
m.Df=function(a,b,c){a.objectStoreNames.contains(c.getName())||a.createObjectStore(c.getName(),{keyPath:"id"});c.xb()&&(c.ya().forEach(function(c){this.pc(a,b,c.m(),"btree")},this),this.pc(a,b,Ke(c),"rowid"))};m.pc=function(a,b,c,d){a.objectStoreNames.contains(c)||(a.createObjectStore(c,{keyPath:"id"}),a=b.objectStore(c),(this.Vc?new uc(a,rb,xc):new Fe(a,rb)).put([new vb(new ub(d))]))};
m.zb=function(a,b){var c=Yb(b.$());dd(b).forEach(function(a){c.push(a)});var d=this.l.transaction(c,0==a?"readonly":"readwrite");return new Ge(this.g,d,b,a,this.Vc)};
m.ge=function(a){function b(){if(0==d.length)return w();var a=d.shift();return c(a).then(b)}function c(b){return new v(function(c,d){var S;try{S=(a||e.transaction([b])).objectStore(b).openCursor(null,"prev")}catch(oa){d(oa);return}S.onsuccess=function(a){(a=a.target.result)&&(f=Math.max(f,h(a)));c(f)};S.onerror=function(){c(f)}})}var d=this.i.ra().map(function(a){return a.getName()}),e=this.l,f=0,h=function(a){return this.Vc?(a=tc(a.value),Object.keys(a.o).reduce(function(a,b){return Math.max(a,b)},
0)):a.key}.bind(this);return new v(function(a){b().then(function(){a(f)})})};m.close=function(){this.l.close()};m.yc=function(){throw new D(511);};m.subscribe=aa();m.Fc=aa();function Le(a,b,c){$b.call(this,c,b);this.ba=a;0==b&&this.Y.resolve()}t(Le,$b);Le.prototype.G=function(a){return this.ba.yc(a)};Le.prototype.nc=function(){this.Y.resolve();return this.Y.ha};function Me(a){this.i=a;this.K=A()}m=Me.prototype;m.Fa=function(){this.i.ra().forEach(this.Vf,this);return w()};m.yc=function(a){var b=this.K.get(a)||null;if(null===b)throw new D(101,a);return b};m.zb=function(a,b){return new Le(this,a,b)};function Ne(a,b){if(!a.K.has(b)){var c=new re;a.K.set(b,c);return c}return null}m.Vf=function(a){Ne(this,a.getName());a.xb()&&(a.ya().forEach(function(a){this.pc(a.m(),"btree")},this),this.pc(Ke(a),"rowid"))};m.pc=function(a,b){var c=Ne(this,a);null===c||c.put([new vb(new ub(b))])};
m.close=aa();m.subscribe=aa();m.Fc=aa();function Oe(a){Me.call(this,a);this.jd=null}t(Oe,Me);Oe.prototype.subscribe=function(a){null===this.jd&&(this.jd=a)};Oe.prototype.Fc=function(a){null===this.jd||this.jd(a)};function Pe(a,b,c){this.Ua=a;this.u=b;this.Jb=c}Pe.prototype.get=function(a){var b=this.Jb;return Qe(this.Ua,"SELECT id, value FROM "+this.u+" "+(0==a.length?"":"WHERE id IN ("+a.join(",")+")"),[],function(a){for(var d=a.rows.length,e=Array(d),f=0;f<d;++f)e[f]=b({id:a.rows.item(f).id,value:JSON.parse(a.rows.item(f).value)});return e})};
Pe.prototype.put=function(a){if(0==a.length)return w();var b="INSERT OR REPLACE INTO "+this.u+"(id, value) VALUES (?, ?)";a.forEach(function(a){Qe(this.Ua,b,[a.id(),JSON.stringify(a.o)])},this);return w()};Pe.prototype.remove=function(a){Qe(this.Ua,"DELETE FROM "+this.u+" "+(0==a.length?"":"WHERE id IN ("+a.join(",")+")"),[]);return w()};function Re(a,b,c){$b.call(this,b,c);this.l=a;this.K=A();this.Dd=[]}t(Re,$b);function Se(a){return a.replace(".","__d__").replace("#","__s__")}Re.prototype.G=function(a,b){var c=this.K.get(a)||null;null===c&&(c=new Pe(this,Se(a),b),this.K.set(a,c));return c};function Qe(a,b,c,d){var e=y();a.Dd.push({yg:b,ng:c,transform:d,Y:e});return e.ha}
Re.prototype.nc=function(){var a=null,b=this.Y.reject.bind(this.Y),c=function(a,b){this.Y.reject(b)}.bind(this),d=[],e=function(b,h){if(null!==a){var k=h;null!=a.transform&&null!=h&&(k=a.transform(h));d.push(k);a.Y.resolve(k)}0<this.Dd.length?(a=k=this.Dd.shift(),b.executeSql(k.yg,k.ng,e,c)):this.Y.resolve(d)}.bind(this);0==this.of?this.l.readTransaction(e,b):this.l.transaction(e,b);return this.Y.ha};function O(a,b,c){this.l=c;this.g=a;this.Xb=b}r("lf.backstore.WebSqlRawBackStore",O);O.prototype.cd=g("l");O.prototype.getRawDBInstance=O.prototype.cd;O.prototype.dd=function(){throw new D(356);};O.prototype.getRawTransaction=O.prototype.dd;function Te(a){return new Re(a.l,new cd(a.g,C()),1)}O.prototype.qc=function(a){var b=Te(this);Qe(b,"DROP TABLE "+a,[]);return b.ia()};O.prototype.dropTable=O.prototype.qc;
O.prototype.bc=function(a){var b=Te(this);Qe(b,"SELECT id, value FROM "+a,[]);return b.ia().then(function(a){for(var b=a[0].rows.length,e=Array(b),f=0;f<b;++f)e[f]={id:a[0].rows.item(f).id,value:JSON.parse(a[0].rows.item(f).value)};return w(e)})};function Ue(a,b,c){var d=Te(a),e="UPDATE "+b+" SET value=? WHERE id=?";return a.bc(b).then(function(a){a.forEach(function(a){a=c(a);Qe(d,e,[JSON.stringify(a.value),a.id])});return d.ia()})}
O.prototype.lc=function(a,b,c){var d=Ce(c);return Ue(this,a,function(a){a.value[b]=d;return a})};O.prototype.addTableColumn=O.prototype.lc;O.prototype.rc=function(a,b){return Ue(this,a,function(a){delete a.value[b];return a})};O.prototype.dropTableColumn=O.prototype.rc;O.prototype.Kc=function(a,b,c){return Ue(this,a,function(a){a.value[c]=a.value[b];delete a.value[b];return a})};O.prototype.renameTableColumn=O.prototype.Kc;O.prototype.rb=function(a){var b={},c;for(c in a)b[c]=Ce(a[c]);return sb(b)};
O.prototype.createRow=O.prototype.rb;O.prototype.Ac=g("Xb");O.prototype.getVersion=O.prototype.Ac;function Ve(a){Qe(a,'SELECT tbl_name FROM sqlite_master WHERE type="table"',[],function(a){for(var c=Array(a.rows.length),d=0;d<c.length;++d)c[d]=a.rows.item(d).tbl_name;return c})}
O.prototype.dump=function(){var a=y(),b=Te(this);Ve(b);var c={};b.ia().then(function(b){b=b[0].filter(function(a){return"__lf_ver"!=a&&"__WebKitDatabaseInfoTable__"!=a}).map(function(a){return this.bc(a).then(function(b){c[a]=b})},this);eb(b).then(function(){a.resolve(c)})}.bind(this));return a.ha};O.prototype.dump=O.prototype.dump;function We(a,b,c){this.g=a;this.i=b;this.xg=c||4194304}function Xe(a){return new cd(a.g,C())}m=We.prototype;m.Fa=function(a){if(null==window.openDatabase)throw new D(353);var b=a||function(){return w()};return new v(function(a,d){try{var e=window.openDatabase(this.i.name(),"",this.i.name(),this.xg);if(null!=e)this.l=e,Ye(this,b).then(a,d);else throw new D(354);}catch(f){d(f)}},this)};
function Ye(a,b){var c=y(),d=new Re(a.l,Xe(a),1);Qe(d,"CREATE TABLE IF NOT EXISTS __lf_ver(id INTEGER PRIMARY KEY, v INTEGER)",[]);Qe(d,"SELECT v FROM __lf_ver WHERE id = 0",[]);d.ia().then(function(a){var d=0;a[1].rows.length&&(d=a[1].rows.item(0).v);d<this.i.version()?this.Zd(b,d).then(c.resolve.bind(c)):d>this.i.version()?c.reject(new D(108)):c.resolve()}.bind(a));return c.ha}m.zb=function(a,b){if(null!=this.l)return new Re(this.l,b,a);throw new D(2);};m.close=aa();
m.yc=function(){throw new D(512);};m.subscribe=function(){throw new D(355);};m.Fc=function(){throw new D(355);};m.Zd=function(a,b){var c=y();Ze(this).then(function(){a(new O(this.g,b,this.l)).then(function(){return this.ge()}.bind(this)).then(c.resolve.bind(c))}.bind(this),c.reject.bind(c));return c.ha};
function Ze(a){var b=a.i.ra(),c=new Re(a.l,Xe(a),1),d=new Re(a.l,Xe(a),1);Qe(c,"INSERT OR REPLACE INTO __lf_ver VALUES (0, ?)",[a.i.version()]);Ve(c);return c.ia().then(function(a){function c(a,b){Qe(d,"INSERT INTO "+a+"(id, value) VALUES(?, ?)",[-1,JSON.stringify(qb(new vb(new ub(b))))])}var h=a[1];h.filter(function(a){return-1!=a.indexOf("__d__")}).forEach(function(a){Qe(d,"DROP TABLE "+a,[])});var k=[],n=[],x=[];b.map(function(a){-1==h.indexOf(a.getName())&&k.push(a.getName());a.xb&&(a.ya().forEach(function(a){a=
Se(a.m());k.push(a);n.push(a)}),a=Se(Ke(a)),k.push(a),x.push(a))});k.forEach(function(a){Qe(d,"CREATE TABLE "+a+"(id INTEGER PRIMARY KEY, value TEXT)",[])});n.forEach(function(a){c(a,"btree")});x.forEach(function(a){c(a,"rowid")});return d.ia()})}
m.ge=function(){var a=0,b=y(),c=function(b){var c=new Re(this.l,Xe(this),0);Qe(c,"SELECT MAX(id) FROM "+b,[]);return c.ia().then(function(b){b=b[0].rows.item(0)[0];a=Math.max(b,a)})}.bind(this),d=this.i.ra().map(function(a){return c(a.getName())});eb(d).then(function(){b.resolve(a)},function(a){b.reject(a)});return b.ha};function $e(a){this.X=A();this.Wb=A();a.ra().forEach(function(a){this.Wb.set(a.getName(),C())},this)}m=$e.prototype;m.set=function(a,b){this.X.set(b.id(),b);this.Wb.get(a).add(b.id())};m.Tb=function(a,b){var c=this.Wb.get(a);b.forEach(function(a){this.X.set(a.id(),a);c.add(a.id())},this)};m.get=function(a){return this.X.get(a)||null};function af(a,b){return b.map(function(a){return this.get(a)},a)}
m.Xa=function(a,b,c){var d=[],e=Math.min(b,c),f=Math.max(b,c);a=this.Wb.get(a);if(a.size<f-e)a.forEach(function(a){a>=e&&a<=f&&(a=this.X.get(a),d.push(a))},this);else for(b=e;b<=f;++b)a.has(b)&&(c=this.X.get(b),d.push(c));return d};m.remove=function(a,b){this.X.delete(b);this.Wb.get(a).delete(b)};m.Gg=function(a){return null!=a?this.Wb.get(a).size:this.X.size};m.clear=function(){this.X.clear();this.Wb.clear()};function bf(a,b,c){var d=0,e=a.length;for(c=c||cf;d<e;){var f=d+e>>1;0>c(a[f],b)?d=f+1:e=f}return d==e&&a[d]==b?d:~d}function cf(a,b){return a-b}function df(a,b,c){c=bf(a,b,c);return 0>c?(a.splice(-(c+1),0,b),!0):!1};function ef(a,b,c,d){a=b?a.reverse():a;if(null==c&&null==d)return a;c=Math.min(q(c)?c:a.length,a.length);if(0==c)return[];d=Math.min(d||0,a.length);return a.slice(d,d+c)};function ff(){this.oa=0}ff.prototype.add=function(a,b){this.oa+=b};ff.prototype.remove=function(a,b){this.oa-=b};ff.prototype.clear=function(){this.oa=0};function gf(a,b){a.clear();b.forEach(function(a){this.oa+=a.oa},a)};function hf(a,b,c,d){this.u=a;this.U=b;this.me=c;this.nb=new ff;if(d){a=511;a*=a*a;if(d.length>=a)throw new D(6,a);d=jf(this,d);this.qa=d=kf(d)}else this.clear()}var mf=[];m=hf.prototype;m.getName=g("u");m.toString=function(){return this.qa.toString()};m.add=function(a,b){this.qa=this.qa.vb(a,b)};m.set=function(a,b){this.qa=this.qa.vb(a,b,!0)};m.remove=function(a,b){this.qa=this.qa.remove(a,b)};m.get=function(a){return this.qa.get(a)};
m.Yc=function(a){if(null==a)return this.Ma().oa;if(a instanceof id){if(kd(a))return this.Ma().oa;if(od(a))return this.get(a.b).length}return this.Xa([a]).length};m.Ma=g("nb");m.wc=function(a,b,c,d){c=Array(a);this.qa.fill({offset:b?this.nb.oa-a-d:d,count:a,je:0},c);return b?c.reverse():c};
m.Xa=function(a,b,c,d){var e=nf(this.qa).c[0];if(!q(e)||0==c)return mf;b=b||!1;c=null!=c?Math.min(c,this.nb.oa):this.nb.oa;d=d||0;var f=Math.min(Math.max(this.nb.oa-d,0),c);if(0==f)return mf;if(!q(a)||1==a.length&&a[0]instanceof id&&kd(a[0]))return this.wc(f,b,c,d);a=this.U.kf(a);var h=Array(b?this.nb.oa:f),k={count:0,W:h.length,reverse:b,M:d};a.forEach(function(a){for(var b=this.U.od(a),b=this.U.Od(a)?e:b[0],b=of(this.qa,b),c=k.count,d=0;null!=b&&k.count<k.W;)b.Xa(a,k,h),k.count!=c?(d=0,c=k.count):
d++,b=2==d?null:b.next()},this);h.splice(k.count,f-k.count);return b?ef(h,b,c,d):h};m.clear=function(){this.qa=pf(this);this.nb.clear()};m.eb=function(a){return this.qa.eb(a)};m.min=function(){return this.Ec(this.U.min.bind(this.U))};m.max=function(){return this.Ec(this.U.max.bind(this.U))};m.Ec=function(a){var b=nf(this.qa),c=qf(this.qa);if(0==b.c.length&&0==c.c.length)return null;var d=b.c[0],b=b.A[0],e=c.c[c.c.length-1],c=c.A[c.c.length-1];return 1==a(d,e)?[d,this.me?[b]:b]:[e,this.me?[c]:c]};
m.Ha=g("me");m.oc=g("U");m.Sd=function(a,b){return null!=a?-1==this.U.compare(a,b):!1};m.Na=function(a,b){return null!=a?0==this.U.compare(a,b):!1};m.Ea=function(){for(var a=[],b=nf(this.qa);b;)a.push(new z(b.pa,[b.c,b.A])),b=b.za;return a};function rf(a,b,c,d){a=new hf(b,a,c);d=sf(d,a);a.qa=d;return a}function tf(a,b){this.pa=a;this.D=b;this.hb=0;this.za=this.yb=this.B=null;this.c=[];this.A=[];this.h=[]}function pf(a){return new tf(pb++,a)}function P(a){return 0==a.hb}m=tf.prototype;m.next=g("za");
function uf(a){function b(a){return null!=a?a.pa.toString():"_"}var c=a.pa+"["+a.c.join("|")+"]",d=a.h.map(function(a){return a.pa}).join("|"),e=a.A.join("/"),f=b(a.yb)+"{",f=P(a)?f+e:f+d,f=f+"}"+b(a.B);a.za&&(a=uf(a.za),c=c+"  "+a[0],f=f+"  "+a[1]);return[c,f]}m.toString=function(){var a="",b=uf(this),a=a+(b[0]+"\n"+b[1]+"\n");this.h.length&&(a+=this.h[0].toString());return a};function nf(a){return P(a)?a:nf(a.h[0])}function qf(a){return P(a)?a:qf(a.h[a.h.length-1])}
function vf(a,b){b&&(b.yb=a);a&&(a.za=b)}function jf(a,b){for(var c=b.length,d=0,e=pf(a),f=e;0<c;){var h=768<=c?511:257<=c&&511>=c?c:257,k=b.slice(d,d+h);e.c=k.map(function(a){return a.key});e.A=k.map(function(a){return a.value});d+=h;c-=h;0<c&&(h=pf(e.D),vf(e,h),e=h)}return f}function wf(a){var b=a[0],c=pf(b.D);c.hb=b.hb+1;c.h=a;for(b=0;b<a.length;++b)a[b].B=c,0<b&&c.c.push(a[b].c[0]);return c}
function kf(a){var b=a,c=[];do c.push(b),b=b.za;while(b);if(512>=c.length)b=wf(c);else{var d=c.length,e=0,b=pf(a.D);for(b.hb=a.hb+2;0<d;){a=768<=d?511:257<=d&&511>=d?d:257;var f=c.slice(e,e+a),h=wf(f);h.B=b;b.h.length&&(b.c.push(f[0].c[0]),vf(b.h[b.h.length-1],h));b.h.push(h);e+=a;d-=a}}return b}m.get=function(a){var b=xf(this,a);if(P(this)){var c=mf;this.D.Na(this.c[b],a)&&(c=c.concat(this.A[b]));return c}b=this.D.Na(this.c[b],a)?b+1:b;return this.h[b].get(a)};
m.eb=function(a){var b=xf(this,a);return this.D.Na(this.c[b],a)?!0:P(this)?!1:this.h[b].eb(a)};m.remove=function(a,b){yf(this,a,-1,b);if(null==this.B){var c=this;1==this.h.length&&(c=this.h[0],c.B=null);return c}return this};function zf(a){return P(a)?a.c[0]:zf(a.h[0])}function Af(a){a.c=[];for(var b=1;b<a.h.length;++b)a.c.push(zf(a.h[b]))}
function yf(a,b,c,d){var e=xf(a,b),f=P(a);if(!f){var h=a.D.Na(a.c[e],b)?e+1:e;if(yf(a.h[h],b,h,d))Af(a);else return!1}else if(!a.D.Na(a.c[e],b))return!1;if(a.c.length>e&&a.D.Na(a.c[e],b)){if(q(d)&&!a.D.Ha()&&f&&(h=a.A[e],d=bf(h,d,void 0),0>d?d=!1:(h.splice(d,1),d=!0),d&&a.D.Ma().remove(b,1),a.A[e].length))return!1;a.c.splice(e,1);f&&(f=a.D.Ha()?1:a.A[e].length,a.A.splice(e,1),a.D.Ma().remove(b,f))}if(256>a.c.length&&null!=a.B){a:{b=null;if(a.za&&256<a.za.c.length)b=a.za,e=d=0,f=a.c.length+1;else if(a.yb&&
256<a.yb.c.length)b=a.yb,d=a.yb.c.length-1,e=P(a)?d:d+1,f=0;else{b=!1;break a}a.c.splice(f,0,b.c[d]);b.c.splice(d,1);d=P(a)?a.A:a.h;h=null;P(a)?h=b.A:(h=b.h,h[e].B=a);d.splice(f,0,h[e]);h.splice(e,1);P(b)||(Af(b),Af(a));b=!0}b||Bf(a,c)}return!0}
function Bf(a,b){var c,d,e;a.za&&511>a.za.c.length?(c=a.za,e=d=0):a.yb&&(c=a.yb,d=c.c.length,e=P(c)?c.A.length:c.h.length);d=[d,0].concat(a.c);Array.prototype.splice.apply(c.c,d);d=null;P(a)?d=a.A:(d=a.h,d.forEach(function(a){a.B=c}));d=[e,0].concat(d);Array.prototype.splice.apply(P(c)?c.A:c.h,d);vf(a.yb,a.za);P(c)||Af(c);-1!=b&&(a.B.c.splice(b,1),a.B.h.splice(b,1))}
m.vb=function(a,b,c){var d=xf(this,a);if(P(this)){if(this.D.Na(this.c[d],a)){if(c)this.D.Ma().remove(a,this.D.Ha()?1:this.A[d].length),this.A[d]=this.D.Ha()?b:[b];else{if(this.D.Ha())throw new D(201);if(!df(this.A[d],b))throw new D(109);}this.D.Ma().add(a,1);return this}this.c.splice(d,0,a);this.A.splice(d,0,this.D.Ha()?b:[b]);this.D.Ma().add(a,1);512==this.c.length?(d=pf(this.D),a=pf(this.D),a.hb=1,a.c=[this.c[256]],a.h=[this,d],a.B=this.B,this.B=a,d.c=this.c.splice(256),d.A=this.A.splice(256),d.B=
a,vf(d,this.za),vf(this,d),d=a):d=this;return d}d=this.D.Na(this.c[d],a)?d+1:d;a=this.h[d].vb(a,b,c);P(a)||1!=a.c.length||(this.c.splice(d,0,a.c[0]),a.h[1].B=this,a.h[0].B=this,this.h.splice(d,1,a.h[1]),this.h.splice(d,0,a.h[0]));return 512==this.c.length?Cf(this):this};function Cf(a){var b=pf(a.D),c=pf(a.D);b.B=a.B;b.hb=a.hb+1;b.c=[a.c[256]];b.h=[a,c];a.c.splice(256,1);c.B=b;c.hb=a.hb;c.c=a.c.splice(256);c.h=a.h.splice(257);c.h.forEach(function(a){a.B=c});a.B=b;vf(c,a.za);vf(a,c);return b}
function xf(a,b){for(var c=0,d=a.c.length;c<d;){var e=c+d>>1;a.D.Sd(a.c[e],b)?c=e+1:d=e}return c}function of(a,b){if(!P(a)){var c=xf(a,b);a.D.Na(a.c[c],b)&&c++;return of(a.h[c],b)}return a}
m.Xa=function(a,b,c){function d(a){return a[0]?a[1]?0:1:-1}var e=this.D.oc(),f=0,h=this.c.length-1,k=this.c,n=d(e.qb(k[f],a)),x=d(e.qb(k[h],a));if(1!=n&&(-1!=n||-1!=x)){var S=function(a,b){var c=a+b>>1;return c==a?c+1:c},oa=function(b,c,f){if(b>=c)return 0==f?c:-1;var h=d(e.qb(k[b],a));if(0==h)return b;if(1==h)return-1;h=S(b,c);if(h==c)return 0==f?c:-1;var n=d(e.qb(k[h],a));return 0==n?oa(b,h,n):-1==n?oa(h+1,c,f):oa(b+1,h,n)},Ya=function(b,c){if(b>=c)return b;var f=d(e.qb(k[c],a));if(0==f)return c;
if(-1==f)return b;f=S(b,c);if(f==c)return b;var h=d(e.qb(k[f],a));return 0==h?Ya(f,c):1==h?Ya(b,f-1):-1};0!=n&&(f=oa(f+1,h,x));-1!=f&&(h=Ya(f,h),-1!=h&&h>=f&&Df(this,b,c,f,h+1))}};function Df(a,b,c,d,e){for(;d<e&&(b.reverse||!(b.count>=b.W));++d)if(a.D.Ha())!b.reverse&&b.M?b.M--:c[b.count++]=a.A[d];else for(var f=0;f<a.A[d].length&&b.count<c.length;++f)!b.reverse&&b.M?b.M--:c[b.count++]=a.A[d][f]}
m.fill=function(a,b){if(P(this))for(var c=0;c<this.A.length&&0<a.count;++c)if(0<a.offset){if(a.offset-=this.D.Ha()?1:this.A[c].length,0>a.offset)for(var d=this.A[c].length+a.offset;d<this.A[c].length&&0<a.count;++d)b[a.je++]=this.A[c][d],a.count--}else if(this.D.Ha())b[a.je++]=this.A[c],a.count--;else for(d=0;d<this.A[c].length&&0<a.count;++d)b[a.je++]=this.A[c][d],a.count--;else for(c=0;c<this.h.length&&0<a.count;++c)this.h[c].fill(a,b)};
function sf(a,b){for(var c=b.Ma(),d=a.map(function(a){var d=new tf(a.id(),b);d.c=a.o[0];d.A=a.o[1];d.c.forEach(function(a,e){c.add(a,b.Ha()?1:d.A[e].length)});return d}),e=0;e<d.length-1;++e)vf(d[e],d[e+1]);return 1<d.length?kf(d[0]):d[0]};function Ef(a){this.compare=0==a?Ff:Gf;this.Ud=0==a?function(a){return null!=a?a.reverse():null}:function(a){return a||null};this.$d=0==a?Hf:If}t(Ef,yc);function Gf(a,b){return a>b?1:a<b?-1:0}function Ff(a,b){return Gf(b,a)}function If(a,b){return pd(a,b)}function Hf(a,b){return pd(b,a)}m=Ef.prototype;m.qb=function(a,b){var c=this.Ud(b),d=[c.b==E,c.w==E];if(!d[0]){var e=this.compare(a,c.b);d[0]=c.da?1==e:-1!=e}d[1]||(e=this.compare(a,c.w),d[1]=c.ma?-1==e:1!=e);return d};
m.compare=function(a,b){return this.compare(a,b)};m.min=function(a,b){return a<b?1:a==b?0:-1};m.max=function(a,b){return a>b?1:a==b?0:-1};m.Nd=function(a,b){var c=this.qb(a,b);return c[0]&&c[1]};m.kf=function(a){return a.filter(function(a){return null!==a}).sort(function(a,c){return this.$d(a,c)}.bind(this))};m.Od=function(a){return this.Ud(a).b==E};m.od=function(a){a=this.Ud(a);return[a.b,a.w]};m.toString=function(){return this.compare==Ff?"SimpleComparator_DESC":"SimpleComparator_ASC"};function Jf(a){this.Ka=a.map(function(a){return new Ef(a)})}t(Jf,yc);function Kf(a,b,c,d){for(var e=0,f=0;f<a.Ka.length&&0==e;++f)e=d(a.Ka[f],b[f],c[f]);return e}m=Jf.prototype;m.compare=function(a,b){return Kf(this,a,b,function(a,b,e){return b==E||e==E?0:a.compare(b,e)})};m.min=function(a,b){return Kf(this,a,b,function(a,b,e){return a.min(b,e)})};m.max=function(a,b){return Kf(this,a,b,function(a,b,e){return a.max(b,e)})};
m.qb=function(a,b){for(var c=[!0,!0],d=0;d<this.Ka.length&&(c[0]||c[1]);++d){var e=this.Ka[d].qb(a[d],b[d]);c[0]=c[0]&&e[0];c[1]=c[1]&&e[1]}return c};m.Nd=function(a,b){for(var c=!0,d=0;d<this.Ka.length&&c;++d)c=this.Ka[d].Nd(a[d],b[d]);return c};
m.kf=function(a){var b=a.filter(function(a){return a.every(fa)});a=Array(this.Ka.length);for(var c=0;c<a.length;c++)a[c]=b.map(function(a){return a[c]});a.forEach(function(a,b){a.sort(function(a,c){return this.Ka[b].$d(a,c)}.bind(this))},this);b=Array(b.length);for(c=0;c<b.length;c++)b[c]=a.map(function(a){return a[c]});return b.sort(function(a,b){for(var c=0,h=0;h<this.Ka.length&&0==c;++h)c=this.Ka[h].$d(a[h],b[h]);return c}.bind(this))};m.Od=function(a){return this.Ka[0].Od(a[0])};
m.od=function(a){var b=a.map(function(a,b){return this.Ka[b].od(a)[0]},this);a=a.map(function(a,b){return this.Ka[b].od(a)[1]},this);return[b,a]};function Lf(a){if(1==a.f.length)return new Ef(a.f[0].jb);a=a.f.map(function(a){return a.jb});return new Jf(a)};function Mf(a){this.fa=a;this.ib=C();this.Mc=new ff;this.nb=new ff}m=Mf.prototype;m.getName=function(){return this.fa.getName()};m.add=function(a,b){null===a?(this.ib.add(b),this.Mc.add(a,1)):this.fa.add(a,b)};m.set=function(a,b){null===a?(this.ib.clear(),this.Mc.clear(),this.add(a,b)):this.fa.set(a,b)};m.remove=function(a,b){null===a?b?(this.ib.delete(b),this.Mc.remove(a,1)):(this.ib.clear(),this.Mc.clear()):this.fa.remove(a,b)};m.get=function(a){return null===a?nc(this.ib):this.fa.get(a)};
m.Yc=function(a){return this.fa.Yc(a)};m.Ma=function(){gf(this.nb,[this.fa.Ma(),this.Mc]);return this.nb};m.Xa=function(a,b,c,d){b=this.fa.Xa(a,b,c,d);return null!=a?b:b.concat(nc(this.ib))};m.clear=function(){this.ib.clear();this.fa.clear()};m.eb=function(a){return null===a?0!=this.ib.size:this.fa.eb(a)};m.min=function(){return this.fa.min()};m.max=function(){return this.fa.max()};m.Ea=function(){return[new z(-2,nc(this.ib))].concat(this.fa.Ea())};m.oc=function(){return this.fa.oc()};
function Nf(a,b){for(var c=-1,d=0;d<b.length;++d)if(-2==b[d].id()){c=d;break}if(-1==c)throw new D(102);var d=b[c].o,e=b.slice(0);e.splice(c,1);var c=a(e),f=new Mf(c);d.forEach(function(a){f.ib.add(a)});return f}m.Ha=function(){return this.fa.Ha()};function Of(a){this.u=a;this.mb=C();this.U=new Ef(1)}m=Of.prototype;m.getName=g("u");m.add=function(a){if("number"!=typeof a)throw new D(103);this.mb.add(a)};m.set=function(a,b){this.add(a,b)};m.remove=function(a){this.mb.delete(a)};m.get=function(a){return this.eb(a)?[a]:[]};m.min=function(){return this.Ec(this.U.min.bind(this.U))};m.max=function(){return this.Ec(this.U.max.bind(this.U))};
m.Ec=function(a){if(0==this.mb.size)return null;var b=nc(this.mb).reduce(function(b,d){return null===b||1==a(d,b)?d:b},null);return[b,[b]]};m.Yc=function(){return this.mb.size};m.Xa=function(a,b,c,d){var e=a||[nd()];a=nc(this.mb).filter(function(a){return e.some(function(b){return this.U.Nd(a,b)},this)},this);return ef(a,b,c,d)};m.clear=function(){this.mb.clear()};m.eb=function(a){return this.mb.has(a)};m.Ea=function(){return[new z(0,nc(this.mb))]};m.oc=g("U");
function Pf(a,b){var c=new Of(a);b[0].o.forEach(function(a){c.add(a,a)});return c}m.Ha=l(!0);m.Ma=function(){var a=new ff;a.oa=this.mb.size;return a};function Qf(a){this.g=a;this.Ja=a.j(gc);this.C=a.j(ic);this.S=a.j(hc)}Qf.prototype.Fa=function(a){var b=a.ra(),c=function(){if(0==b.length)return w();var a=b.shift();return(a.xb()?Tf(this,a):Uf(this,a)).then(c)}.bind(this);return c()};function Uf(a,b){var c=new cd(a.g,C([b])),c=a.Ja.zb(0,c),d=c.G(b.getName(),b.Ab.bind(b)).get([]).then(function(a){this.S.Tb(b.getName(),a);Vf(this,b,a)}.bind(a));c.ia();return d}
function Vf(a,b,c){var d=a.C.ic.get(b.getName())||[];c.forEach(function(a){d.forEach(function(b){var c=a.Db(b.getName());b.add(c,a.id())})})}function Tf(a,b){var c=new cd(a.g,C([b])),d=a.Ja.zb(0,c),c=d.G(b.getName(),b.Ab).get([]).then(function(a){this.S.Tb(b.getName(),a)}.bind(a)),e=b.ya().map(function(a){return Wf(this,a,d)},a).concat(Xf(a,b,d));d.ia();return eb(e.concat(c))}
function Wf(a,b,c){c=c.G(b.m(),rb,1);var d=Lf(b);return c.get([]).then(function(a){if(1<a.length){if(Yf(b)){var c=rf.bind(void 0,d,b.m(),b.Cc);a=Nf(c,a.slice(1))}else a=rf(d,b.m(),b.Cc,a.slice(1));this.C.set(b.Nc,a)}}.bind(a))}function Xf(a,b,c){return c.G(Ke(b),rb,1).get([]).then(function(a){1<a.length&&(a=Pf(Ke(b),a.slice(1)),this.C.set(b.getName(),a))}.bind(a))};function Zf(){this.ba=A();this.ic=A()}Zf.prototype.Fa=function(a){a.ra().forEach(function(a){var c=[];this.ic.set(a.getName(),c);var d=Ke(a);if(null===this.get(d)){var e=new Of(d);c.push(e);this.ba.set(d,e)}a.ya().forEach(function(a){var b;b=Lf(a);b=new hf(a.m(),b,a.Cc);b=Yf(a)?new Mf(b):b;c.push(b);this.ba.set(a.m(),b)},this)},this);return w()};Zf.prototype.get=function(a){return this.ba.get(a)||null};
Zf.prototype.set=function(a,b){var c=this.ic.get(a)||null;null===c&&(c=[],this.ic.set(a,c));for(var d=null,e=0;e<c.length;e++)if(c[e].getName()==b.getName()){d=e;break}null!==d&&0<c.length?c.splice(d,1,b):c.push(b);this.ba.set(b.getName(),b)};function $f(a){this.hc=[];q(a)&&this.add(a)}$f.prototype.toString=function(){return this.hc.map(function(a){return a.toString()}).join(",")};$f.prototype.eb=function(a){return this.hc.some(function(b){return b.contains(a)})};$f.prototype.Cb=g("hc");
$f.prototype.add=function(a){if(0!=a.length)if(a=this.hc.concat(a),1==a.length)this.hc=a;else{a.sort(pd);for(var b=[],c=a[0],d=1;d<a.length;++d)if(ld(c,a[d])){var e=a[d],f=nd();if(c.b!=E&&e.b!=E){var h=md(c.b,e.b,!0);1!=h?(f.b=c.b,f.da=0!=h?c.da:c.da&&e.da):(f.b=e.b,f.da=e.da)}c.w!=E&&e.w!=E&&(h=md(c.w,e.w,!1),-1!=h?(f.w=c.w,f.ma=0!=h?c.ma:c.ma&&e.ma):(f.w=e.w,f.ma=e.ma));c=f}else b.push(c),c=a[d];b.push(c);this.hc=b}};
function ag(a,b){var c=[];a.Cb().map(function(a){return b.Cb().map(function(b){var c;if(ld(a,b)){c=nd();var h=md(a.b,b.b,!0),h=0==h?a.da?a:b:-1!=h?a:b;c.b=h.b;c.da=h.da;a.w==E||b.w==E?b=a.w==E?b:a:(h=md(a.w,b.w,!1),b=0==h?a.ma?a:b:-1==h?a:b);c.w=b.w;c.ma=b.ma}else c=null;return c})}).forEach(function(a){c=c.concat(a)});return new $f(c.filter(function(a){return null!==a}))};function bg(a,b){var c=[],d=null,e=null;Qd(a,function(a){var h=b(a);null==a.getParent()?e=h:L(d,h);var k=a.getParent();null!==k&&K(k).length==K(d).length&&(k=c.indexOf(d),-1!=k&&c.splice(k,1));1<K(a).length&&c.push(h);d=null===a.h?c[c.length-1]:h});return e}function cg(a){return dg(a,function(a){return null===a.h})}
function eg(a){var b=a.getParent(),c=0;null!==b&&(c=K(b).indexOf(a),b.removeChild(a));var d=K(a).slice();d.forEach(function(d,f){a.removeChild(d);null===b||Nd(b,d,c+f)});return{parent:b,children:d}}function fg(a,b){K(a).slice().forEach(function(c){a.removeChild(c);L(b,c)});L(a,b)}function gg(a){var b=Md(a,0);eg(a);fg(b,a);return b}
function hg(a,b,c){var d=Md(a,0),e=K(d).slice();if(!e.some(function(a){return b(a)}))return a;eg(a);e.forEach(function(e,h){if(b(e)){var k=c(a);Od(d,h);L(k,e);Nd(d,k,h)}});return d}function ig(a,b,c,d){var e=a.getParent();null!==e&&(a=K(e).indexOf(a),Od(e,a),Nd(e,c,a));K(b).slice().forEach(function(a){b.removeChild(a);L(d,a)});return c}function dg(a,b,c){function d(a){b(a)&&e.push(a);null!=c&&c(a)||K(a).forEach(d)}var e=[];d(a);return e}
function jg(a,b){var c=b||function(a){return a.toString()+"\n"},d="";Qd(a,function(a){for(var b=0;b<Ld(a);b++)d+="-";d+=c(a)});return d};function kg(a){Rd.call(this);this.Pb=a;this.Ya=!1}t(kg,Rd);m=kg.prototype;m.Ib=function(){return bg(this,function(a){if(a instanceof kg){var b=new kg(a.Pb);b.Ya=a.Ya;a=a.V();b.pa=a;return b}return a.Ib()})};m.fb=function(a){var b=a||[];Qd(this,function(a){a!=this&&a.fb(b)}.bind(this));a=C(b);return nc(a)};m.qd=function(a){this.Ya!=a&&(this.Ya=a,this.Pb="and"==this.Pb?"or":"and",K(this).forEach(function(b){return b.qd(a)}))};
m.eval=function(a){var b=K(this).map(function(b){return b.eval(a)});return lg(this,b)};function lg(a,b){return"and"==a.Pb?vd(b):wd(b)}m.toString=function(){return"combined_pred_"+this.Pb.toString()};function mg(a,b,c){Rd.call(this);this.ga=a;this.la=b;this.F=c;this.Vd=null;a=Dd.xc();this.sc=Jd(a,this.ga.H(),this.F);this.ag=a.Oe.get(this.ga.H())||null}t(mg,Rd);m=mg.prototype;m.Ib=function(){var a=new mg(this.ga,this.la,this.F),b=this.V();a.pa=b;return a};m.fb=function(a){return null!=a?(a.push(this.ga),a.push(this.la),a):[this.ga,this.la]};
m.reverse=function(){var a=this.F;switch(this.F){case "gt":a="lt";break;case "lt":a="gt";break;case "gte":a="lte";break;case "lte":a="gte"}return new mg(this.la,this.ga,a)};m.eval=function(a){var b=a.entries.filter(function(a){var b=H(a,this.ga);a=H(a,this.la);return this.sc(b,a)},this);return new F(b,G(a))};m.toString=function(){return"join_pred("+this.ga.m()+" "+this.F+" "+this.la.m()+")"};
function ng(a,b,c){var d=null,e=null;-1!=G(b).indexOf(I(a.ga.G()))?(d=b,e=c):(d=c,e=b);if(d.entries.length>e.entries.length){a:{b=a.ga;a.ga=a.la;a.la=b;b=a.F;switch(a.F){case "gt":b="lt";break;case "lt":b="gt";break;case "gte":b="lte";break;case "lte":b="gte";break;default:break a}a.F=b;a.sc=Jd(Dd.xc(),a.ga.H(),a.F)}return[e,d]}return[d,e]}function og(a){var b={};a.fb().forEach(function(a){b[a.getName()]=null});return b}
function pg(a,b,c){null===a.Vd&&(a.Vd=og(a.la.G()));var d=new yd(new z(-1,a.Vd),!1);return Bd(b,c,d,[I(a.la.G())])}
function qg(a,b,c,d){var e=[b,c];d||(e=ng(a,b,c));b=e[0];c=e[1];var e=b,f=c,h=a.ga,k=a.la;d&&(e=c,f=b,h=a.la,k=a.ga);var n=new Kc,x=[];e.entries.forEach(function(a){var b=String(H(a,h));n.set(b,a)});var S=G(e),oa=G(f);f.entries.forEach(function(a){var b=H(a,k),c=String(b);null!==b&&n.has(c)?n.get(c).forEach(function(b){b=Bd(a,oa,b,S);x.push(b)}):d&&x.push(pg(this,a,oa))}.bind(a));a=G(b).concat(G(c));return new F(x,a)}
function rg(a,b,c,d,e){function f(a,b){var c=new yd(b,1<S.length),c=Bd(a,oa,c,S);x.push(c)}var h=d.Sf.G(),k=b,n=c;-1!=G(b).indexOf(I(h))&&(k=c,n=b);var x=[],S=G(n),oa=G(k);k.entries.forEach(function(a){var b=this.ag(H(a,d.gg)),b=d.index.get(b);0!=b.length&&(d.index.Ha()?f(a,e.get(b[0])):af(e,b).forEach(f.bind(null,a)))},a);a=G(k).concat(G(n));return new F(x,a)};function sg(a,b,c){return null===b?new Td(a,b,c):q(b.m)?new mg(a,b,c):new Td(a,b,c)};var tg={};r("lf.schema.DataStoreType",tg);tg.INDEXED_DB=0;tg.MEMORY=1;tg.LOCAL_STORAGE=2;tg.FIREBASE=3;tg.WEB_SQL=4;tg.OBSERVABLE_STORE=5;function ug(a,b,c,d){this.Nc=a;this.name=b;this.Cc=c;this.f=d}ug.prototype.m=function(){return this.Nc+"."+this.name};function Yf(a){return a.f.some(function(a){return a.ca.Bc()})}function Q(a,b,c,d){this.u=a;this.ka=c;this.J=b;this.ld=d;this.ab=null}r("lf.schema.Table",Q);Q.prototype.getName=g("u");Q.prototype.getName=Q.prototype.getName;Q.prototype.Wa=g("ab");
function I(a){return a.ab||a.u}Q.prototype.mc=function(a){var b=new this.constructor(this.u);b.ab=a;b.sg=this.sg;return b};Q.prototype.as=Q.prototype.mc;Q.prototype.createRow=Q.prototype.rb;Q.prototype.deserializeRow=Q.prototype.Ab;Q.prototype.ya=g("ka");Q.prototype.getIndices=Q.prototype.ya;Q.prototype.fb=g("J");Q.prototype.getColumns=Q.prototype.fb;Q.prototype.getConstraint=Q.prototype.Bb;Q.prototype.xb=g("ld");Q.prototype.persistentIndex=Q.prototype.xb;function Ke(a){return a.u+".#"};function R(a,b){this.child=a;this.Hb=b;this.ab=null}m=R.prototype;m.getName=function(){return this.Hb+"("+this.child.getName()+")"};m.m=function(){return this.Hb+"("+this.child.m()+")"};m.G=function(){return this.child.G()};m.toString=function(){return this.m()};m.H=function(){return this.child.H()};m.Wa=g("ab");m.ya=function(){return[]};m.xa=l(null);m.Bc=l(!1);m.mc=function(a){this.ab=a;return this};R.prototype.as=R.prototype.mc;
function vg(a){for(var b=[a];a instanceof R;)b.push(a.child),a=a.child;return b}function wg(a){this.ab=a||null;this.O=new Q("#UnknownTable",[],[],!1)}m=wg.prototype;m.getName=l("*");m.m=function(){return this.getName()};m.toString=function(){return this.m()};m.G=g("O");m.H=l(4);m.Wa=g("ab");m.ya=function(){return[]};m.xa=l(null);m.Bc=l(!1);r("lf.fn.avg",function(a){return new R(a,"AVG")});function xg(a){return new R(a||new wg,"COUNT")}r("lf.fn.count",xg);function yg(a){return new R(a,"DISTINCT")}r("lf.fn.distinct",yg);r("lf.fn.max",function(a){return new R(a,"MAX")});r("lf.fn.min",function(a){return new R(a,"MIN")});r("lf.fn.stddev",function(a){return new R(a,"STDDEV")});r("lf.fn.sum",function(a){return new R(a,"SUM")});r("lf.fn.geomean",function(a){return new R(a,"GEOMEAN")});function T(a,b){J.call(this);this.Kf=b}t(T,J);T.prototype.exec=function(a,b){switch(this.Kf){case 1:return zg(this,a,b);case 0:return Ag(this,a,b);default:return Bg(this,a,b)}};T.prototype.toString=l("dummy_node");T.prototype.Oc=function(){return this.toString()};function Bg(a,b,c){return new v(function(a){a(this.ea(b,[],c))}.bind(a))}function zg(a,b,c){return Md(a,0).exec(b,c).then(function(a){return this.ea(b,a,c)}.bind(a))}
function Ag(a,b,c){var d=K(a).map(function(a){return a.exec(b,c)});return eb(d).then(function(a){var d=[];a.forEach(function(a){for(var b=0;b<a.length;++b)d.push(a[b])});return this.ea(b,d,c)}.bind(a))};function Cg(a){T.call(this,0,1);this.te=a}t(Cg,T);Cg.prototype.toString=function(){return"aggregation("+this.te.map(function(a){return a.m()}).toString()+")"};Cg.prototype.ea=function(a,b){b.forEach(function(a){Dg(new Eg(a,this.te))},this);return b};function Eg(a,b){this.Ia=a;this.J=b}
function Dg(a){a.J.forEach(function(a){a=vg(a).reverse();for(var c=1;c<a.length;c++){var d=a[c],e=vg(d).slice(-1)[0],f=d.child instanceof R?sd(this.Ia,d.child):this.Ia;if(null!==f.Va&&f.Va.has(d.m()))break;f=Fg(d.Hb,f,e);e=this.Ia;null===e.Va&&(e.Va=A());e.Va.set(d.m(),f)}},a)}
function Fg(a,b,c){var d=null;switch(a){case "MIN":d=Gg(b,c,function(a,b){return b<a?b:a});break;case "MAX":d=Gg(b,c,function(a,b){return b>a?b:a});break;case "DISTINCT":d=Hg(b,c);break;case "COUNT":d=Ig(b,c);break;case "SUM":d=Jg(b,c);break;case "AVG":a=Ig(b,c);0<a&&(d=Jg(b,c)/a);break;case "GEOMEAN":d=Kg(b,c);break;default:d=Lg(b,c)}return d}function Gg(a,b,c){return a.entries.reduce(function(a,e){var f=H(e,b);return null===f?a:null===a?f:c(a,f)},null)}
function Ig(a,b){return b instanceof wg?a.entries.length:a.entries.reduce(function(a,d){return a+(ea(H(d,b))?0:1)},0)}function Jg(a,b){return Gg(a,b,function(a,b){return b+a})}function Lg(a,b){var c=[];a.entries.forEach(function(a){a=H(a,b);null===a||c.push(a)});return 0==c.length?null:Ab.apply(null,c)}function Kg(a,b){var c=0,d=a.entries.reduce(function(a,d){var h=H(d,b);if(0==h||null===h)return a;c++;return a+Math.log(h)},0);return 0==c?null:Math.pow(Math.E,d/c)}
function Hg(a,b){var c=A();a.entries.forEach(function(a){var e=H(a,b);c.set(e,a)});return new F(B(c),G(a))};function Mg(a,b){this.Ca=a;this.aa=b}Mg.prototype.gb=g("Ca");Mg.prototype.$=g("aa");function Ng(){J.call(this)}t(Ng,J);function Og(a,b){J.call(this);this.table=a;this.values=b}t(Og,Ng);function Pg(a,b){Og.call(this,a,b)}t(Pg,Og);function Qg(a){J.call(this);this.table=a}t(Qg,Ng);Qg.prototype.toString=function(){return"delete("+this.table.getName()+")"};function Rg(a,b){J.call(this);this.table=a;this.ne=b}t(Rg,Ng);
Rg.prototype.toString=function(){var a=[];this.ne&&(a=this.ne.map(function(a){return a.N.getName()},this));return"update("+this.table.getName()+", ["+a.join(",")+"])"};function Sg(a){J.call(this);this.I=a}t(Sg,Ng);Sg.prototype.toString=function(){return"select("+this.I.toString()+")"};function Tg(a){J.call(this);this.table=a}t(Tg,Ng);Tg.prototype.toString=function(){var a="table_access("+this.table.getName();null===this.table.Wa()||(a+=" as "+this.table.Wa());return a+")"};
function Ug(){J.call(this)}t(Ug,Ng);Ug.prototype.toString=l("cross_product");function Vg(a,b){J.call(this);this.f=a;this.Lb=b}t(Vg,Ng);Vg.prototype.toString=function(){var a="project("+this.f.toString();if(null!==this.Lb)var b=this.Lb.map(function(a){return a.m()}).join(", "),a=a+(", groupBy("+b+")");return a+")"};function Wg(a){J.call(this);this.L=a}t(Wg,Ng);Wg.prototype.toString=function(){return"order_by("+be(this.L)+")"};function Xg(a){J.call(this);this.f=a}t(Xg,Ng);
Xg.prototype.toString=function(){return"aggregation("+this.f.toString()+")"};function Yg(a){J.call(this);this.f=a}t(Yg,Ng);Yg.prototype.toString=function(){return"group_by("+this.f.toString()+")"};function Zg(a){J.call(this);this.W=a}t(Zg,Ng);Zg.prototype.toString=function(){return"limit("+this.W+")"};function $g(a){J.call(this);this.M=a}t($g,Ng);$g.prototype.toString=function(){return"skip("+this.M+")"};function ah(a,b){J.call(this);this.I=a;this.Nb=b}t(ah,Ng);
ah.prototype.toString=function(){return"join(type: "+(this.Nb?"outer":"inner")+", "+this.I.toString()+")"};function bh(){};function ch(){}t(ch,bh);ch.prototype.lb=function(a){this.Z=a;this.Ta(this.Z);return this.Z};ch.prototype.Ta=function(a){if(a instanceof Sg){var b=dh(this,a.I),b=eh(this,b);ig(a,a,b[0],b[1]);a==this.Z&&(this.Z=b[0]);a=b[0]}K(a).forEach(function(a){this.Ta(a)},this)};function dh(a,b){if(0==K(b).length||"and"!=b.Pb)return[b];var c=K(b).slice().map(function(a){b.removeChild(a);return dh(this,a)},a);return Fa(c)}
function eh(a,b){var c=null,d=null;b.map(function(a,b){var h=new Sg(a);0==b?c=h:L(d,h);d=h},a);return[c,d]};function fh(){}t(fh,bh);fh.prototype.lb=function(a,b){if(3>b.b.length)return a;this.Z=a;this.Ta(this.Z);return this.Z};fh.prototype.Ta=function(a){if(a instanceof Ug)for(;2<K(a).length;){for(var b=new Ug,c=0;2>c;c++){var d=Od(a,0);L(b,d)}Nd(a,b,0)}K(a).forEach(function(a){this.Ta(a)},this)};function gh(){T.call(this,0,0)}t(gh,T);gh.prototype.toString=l("cross_product");gh.prototype.ea=function(a,b){for(var c=b[0],d=b[1],e=[],f=G(c),h=G(d),k=0;k<c.entries.length;k++)for(var n=0;n<d.entries.length;n++){var x=Bd(c.entries[k],f,d.entries[n],h);e.push(x)}c=G(c).concat(G(d));return[new F(e,c)]};function hh(a,b){ee.call(this,a,b);this.Da=a.j(kc);this.Eb=a.j(lc)}t(hh,ee);hh.prototype.getPriority=l(2);hh.prototype.Yd=function(a){0==this.H()?ih(this,a):this.Lc()};function ih(a,b){a.nd.forEach(function(a,d){a instanceof ae&&he(this.Eb,a,b[d])},a)}hh.prototype.Lc=function(){var a=je(this.Eb,this.$());0!=a.length&&(a=new ge(this.global,a),ke(this.Da,a))};function jh(a){Wd.call(this,a)}t(jh,Wd);jh.prototype.$=function(){var a=C();a.add(this.b);kh(this,this.b.getName(),a);return a};function kh(a,b,c){var d=lh(a.ca.info(),b,1);lh(a.ca.info(),b).forEach(c.add.bind(c));d.forEach(function(a){kh(this,a.getName(),c)},a)}jh.prototype.clone=function(){var a=new jh(this.ca);Zd(a,this);a.b=this.b;return a};jh.prototype.bind=function(a){jh.Gb.bind.call(this,a);$d(this,a);return this};function mh(a){Wd.call(this,a)}t(mh,Wd);mh.prototype.$=function(){var a=C();a.add(this.Ga);var b=this.ca.info();nh(this.Ga.getName(),b.We).forEach(a.add.bind(a));this.Yb&&lh(b,this.Ga.getName()).forEach(a.add.bind(a));return a};mh.prototype.clone=function(){var a=new mh(this.ca);Zd(a,this);a.Ga=this.Ga;this.values&&(a.values=this.values instanceof Cd?this.values:this.values.slice());a.Yb=this.Yb;a.Zb=this.Zb;return a};
mh.prototype.bind=function(a){mh.Gb.bind.call(this,a);this.Zb&&(this.values=this.Zb instanceof Cd?a[this.Zb.xa()]:this.Zb.map(function(b){return b instanceof Cd?a[b.xa()]:b}));return this};function oh(a){Wd.call(this,a)}t(oh,Wd);oh.prototype.$=function(){var a=C();a.add(this.table);var b=this.set.map(function(a){return a.N.m()}),c=this.ca.info();ph(c,b).forEach(a.add.bind(a));qh(c,b).forEach(a.add.bind(a));return a};oh.prototype.clone=function(){var a=new oh(this.ca);Zd(a,this);a.table=this.table;a.set=this.set?this.set.slice():this.set;return a};oh.prototype.bind=function(a){oh.Gb.bind.call(this,a);this.set.forEach(function(b){-1!=b.Tc&&(b.value=a[b.Tc])});$d(this,a);return this};function rh(a,b){if(null==b)return"NULL";switch(a){case 1:return b?1:0;case 3:case 4:return b;case 0:return"'"+tb(b)+"'";default:return"'"+b.toString()+"'"}}function sh(a,b){var c=a.Yb?"INSERT OR REPLACE":"INSERT",d=a.Ga.fb(),c=c+(" INTO "+a.Ga.getName()+"("),c=c+d.map(function(a){return a.getName()}).join(", "),c=c+") VALUES (";return a.values.map(function(a){var f=d.map(function(c){var d=a.o[c.getName()];return b?null!=d?"#":"NULL":rh(c.H(),d)});return c+f.join(", ")+");"}).join("\n")}
function th(a){switch(a){case "between":return"BETWEEN";case "eq":return"=";case "gte":return">=";case "gt":return">";case "in":return"IN";case "lte":return"<=";case "lt":return"<";case "match":return"LIKE";case "neq":return"<>";default:return"UNKNOWN"}}function uh(a,b,c,d){return a instanceof Cd?"?"+a.xa().toString():d?null!=a?"#":"NULL":"match"==b?"'"+a.toString()+"'":"in"==b?"("+a.map(function(a){return rh(c,a)}).join(", ")+")":"between"==b?rh(c,a[0])+" AND "+rh(c,a[1]):rh(c,a).toString()}
function vh(a,b){return K(a).map(function(a){return"("+wh(a,b)+")"}).join("and"==a.Pb?" AND ":" OR ")}function xh(a){return[a.ga.m(),th(a.F),a.la.m()].join(" ")}function wh(a,b){if(a instanceof Td){var c=a.N.m(),d=th(a.F),e=uh(a.value,a.F,a.N.H(),b);return"="==d&&"NULL"==e?[c,"IS NULL"].join(" "):"<>"==d&&"NULL"==e?[c,"IS NOT NULL"].join(" "):[c,d,e].join(" ")}if(a instanceof kg)return vh(a,b);if(a instanceof mg)return xh(a);throw new D(357,typeof a);}
function yh(a,b){var c=wh(a,b);return c?" WHERE "+c:""}function zh(a,b){var c="UPDATE "+a.table.getName()+" SET ",c=c+a.set.map(function(a){var b=a.N.m()+" = ";return-1!=a.Tc?b+"?"+a.Tc.toString():b+rh(a.N.H(),a.value).toString()}).join(", ");a.s&&(c+=yh(a.s,b));return c+";"}
function Ah(a,b){var c="*";a.f.length&&(c=a.f.map(function(a){return a.Wa()?a.m()+" AS "+a.Wa():a.m()}).join(", "));c="SELECT "+c+" FROM ";null!=a.wb&&0!=a.wb.size?c+=Bh(a,b):(c+=a.b.map(Ch).join(", "),a.s&&(c+=yh(a.s,b)));if(a.L)var d=a.L.map(function(a){return a.N.m()+(0==a.jb?" DESC":" ASC")}).join(", "),c=c+(" ORDER BY "+d);a.ja&&(d=a.ja.map(function(a){return a.m()}).join(", "),c+=" GROUP BY "+d);a.W&&(c+=" LIMIT "+a.W.toString());a.M&&(c+=" SKIP "+a.M.toString());return c+";"}
function Ch(a){return I(a)!=a.getName()?a.getName()+" AS "+I(a):a.getName()}function Bh(a,b){for(var c=dg(a.s,function(a){return a instanceof mg}),d=c.map(xh),e=Ch(a.b[0]),f=1;f<a.b.length;f++)var h=Ch(a.b[f]),e=a.wb.has(c[d.length-f].V())?e+(" LEFT OUTER JOIN "+h):e+(" INNER JOIN "+h),e=e+(" ON ("+d[d.length-f]+")");c=Md(a.s,0);c instanceof mg||(e+=" WHERE "+wh(c,b));return e}
function Dh(a,b){var c=b||!1,d=a.a.clone();if(d instanceof mh)return sh(d,c);if(d instanceof jh){var e="DELETE FROM "+d.b.getName();d.s&&(e+=yh(d.s,c));return e+";"}if(d instanceof oh)return zh(d,c);if(d instanceof ae)return Ah(d,c);throw new D(358,typeof d);};function U(a,b){this.global=a;this.rg=a.j(jc);this.Da=a.j(kc);this.a=b}r("lf.query.BaseBuilder",U);U.prototype.exec=function(){try{this.bb()}catch(a){return bb(a)}return new v(function(a,b){var c=new hh(this.global,[this.zc()]);ke(this.Da,c).then(function(b){a(qd(b[0]))},b)},this)};U.prototype.exec=U.prototype.exec;U.prototype.Mf=function(){var a=function(a){return a.Oc(this.a)+"\n"}.bind(this);return jg(Eh(this).gb(),a)};U.prototype.explain=U.prototype.Mf;
U.prototype.bind=function(a){this.a.bind(a);return this};U.prototype.bind=U.prototype.bind;U.prototype.zg=function(a){return Dh(this,a)};U.prototype.toSql=U.prototype.zg;U.prototype.bb=aa();function Eh(a){if(null==a.Xe){var b;b=a.rg;var c=a.a,d=b.dg.create(c);b=b.og.create(d,c);a.Xe=b}return a.Xe}U.prototype.zc=function(){return{context:this.a.clone(),ae:Eh(this)}};function Fh(a){U.call(this,a,new jh(a.j(mc)))}t(Fh,U);r("lf.query.DeleteBuilder",Fh);Fh.prototype.b=function(a){if(null!=this.a.b)throw new D(515);this.a.b=a;return this};Fh.prototype.from=Fh.prototype.b;Fh.prototype.s=function(a){this.xd();this.a.s=a;return this};Fh.prototype.where=Fh.prototype.s;Fh.prototype.xd=function(){if(null==this.a.b)throw new D(548);if(null!=this.a.s)throw new D(516);};Fh.prototype.bb=function(){Fh.Gb.bb.call(this);if(null==this.a.b)throw new D(517);};function Gh(a,b){U.call(this,a,new mh(a.j(mc)));this.a.Yb=b||!1}t(Gh,U);r("lf.query.InsertBuilder",Gh);Gh.prototype.bb=function(){Gh.Gb.bb.call(this);var a=this.a;if(null==a.Ga||null==a.values)throw new D(518);if(a.Yb&&null===a.Ga.Bb().bd())throw new D(519);};Gh.prototype.Ga=function(a){if(null!=this.a.Ga)throw new D(520);this.a.Ga=a;return this};Gh.prototype.into=Gh.prototype.Ga;
Gh.prototype.values=function(a){if(null!=this.a.values)throw new D(521);a instanceof Cd||a.some(function(a){return a instanceof Cd})?this.a.Zb=a:this.a.values=a;return this};Gh.prototype.values=Gh.prototype.values;function Hh(a){return Ih("and",Array.prototype.slice.call(arguments))}r("lf.op.and",Hh);r("lf.op.or",function(a){return Ih("or",Array.prototype.slice.call(arguments))});function Ih(a,b){var c=new kg(a);b.forEach(function(a){L(c,a)});return c}r("lf.op.not",function(a){a.qd(!0);return a});function V(a,b){U.call(this,a,new ae(a.j(mc)));this.Ee=this.sd=!1;this.a.f=b;Jh(this);Kh(this)}t(V,U);r("lf.query.SelectBuilder",V);V.prototype.bb=function(){V.Gb.bb.call(this);var a=this.a;if(null==a.b)throw new D(522);if(q(a.Ob)&&!q(a.W)||q(a.Vb)&&!q(a.M))throw new D(523);null!=this.a.ja?Lh(this):Mh(this)};function Jh(a){var b=a.a.f.filter(function(a){return a instanceof R&&"DISTINCT"==a.Hb},a);if(0!=b.length&&(1!=b.length||1!=a.a.f.length))throw new D(524);}
function Lh(a){var b=a.a.f.filter(function(a){return!(a instanceof R)}).map(function(a){return a.m()}),c=!1;if(0==a.a.ja.length||0==a.a.f.length)c=!0;else{var d=a.a.ja.map(function(a){return a.m()});(c=b.some(function(a){return-1==d.indexOf(a)}))||(c=a.a.ja.some(function(a){a=a.H();return 6==a||0==a}))}if(c)throw new D(525);}function Mh(a){var b=a.a.f.some(function(a){return a instanceof R},a);a=a.a.f.some(function(a){return!(a instanceof R)},a)||0==a.a.f.length;if(b&&a)throw new D(526);}
function Kh(a){a.a.f.forEach(function(a){if(a instanceof R&&!Nh(a.Hb,a.H()))throw new D(527,a.m());},a)}function Oh(a,b){if(null==a.a.b)throw new D(b);}V.prototype.b=function(a){if(this.Ee)throw new D(515);this.Ee=!0;null==this.a.b&&(this.a.b=[]);this.a.b.push.apply(this.a.b,Array.prototype.slice.call(arguments));return this};V.prototype.from=V.prototype.b;V.prototype.s=function(a){Oh(this,548);if(this.sd)throw new D(516);this.sd=!0;Ph(this,a);return this};V.prototype.where=V.prototype.s;
function Ph(a,b){if(null!=a.a.s){var c=Hh(b,a.a.s);a.a.s=c}else a.a.s=b}V.prototype.Wf=function(a,b){Oh(this,542);if(this.sd)throw new D(547);this.a.b.push(a);Ph(this,b);return this};V.prototype.innerJoin=V.prototype.Wf;V.prototype.bg=function(a,b){Oh(this,542);if(!(b instanceof mg))throw new D(541);if(this.sd)throw new D(547);this.a.b.push(a);null==this.a.wb&&(this.a.wb=C());var c=b;I(a)!=I(b.la.G())&&(c=b.reverse());this.a.wb.add(c.V());Ph(this,c);return this};V.prototype.leftOuterJoin=V.prototype.bg;
V.prototype.W=function(a){if(null!=(this.a.W||this.a.Ob))throw new D(528);if(a instanceof Cd)this.a.Ob=a;else{if(0>a)throw new D(531);this.a.W=a}return this};V.prototype.limit=V.prototype.W;V.prototype.M=function(a){if(null!=(this.a.M||this.a.Vb))throw new D(529);if(a instanceof Cd)this.a.Vb=a;else{if(0>a)throw new D(531);this.a.M=a}return this};V.prototype.skip=V.prototype.M;V.prototype.L=function(a,b){Oh(this,549);null==this.a.L&&(this.a.L=[]);this.a.L.push({N:a,jb:null!=b?b:1});return this};
V.prototype.orderBy=V.prototype.L;V.prototype.ja=function(a){Oh(this,549);if(null!=this.a.ja)throw new D(530);null==this.a.ja&&(this.a.ja=[]);this.a.ja.push.apply(this.a.ja,Array.prototype.slice.call(arguments));return this};V.prototype.groupBy=V.prototype.ja;function Nh(a,b){switch(a){case "COUNT":case "DISTINCT":return!0;case "AVG":case "GEOMEAN":case "STDDEV":case "SUM":return 4==b||3==b;case "MAX":case "MIN":return 4==b||3==b||5==b||2==b}return!1}
V.prototype.clone=function(){var a=new V(this.global,this.a.f);a.a=this.a.clone();a.a.Xc=null;return a};V.prototype.clone=V.prototype.clone;function Qh(a,b){U.call(this,a,new oh(a.j(mc)));this.a.table=b}t(Qh,U);r("lf.query.UpdateBuilder",Qh);Qh.prototype.set=function(a,b){var c={Tc:b instanceof Cd?b.xa():-1,N:a,value:b};null!=this.a.set?this.a.set.push(c):this.a.set=[c];return this};Qh.prototype.set=Qh.prototype.set;Qh.prototype.s=function(a){this.xd();this.a.s=a;return this};Qh.prototype.where=Qh.prototype.s;Qh.prototype.xd=function(){if(null!=this.a.s)throw new D(516);};
Qh.prototype.bb=function(){Qh.Gb.bb.call(this);if(null==this.a.set)throw new D(532);if(this.a.set.some(function(a){return a.value instanceof Cd}))throw new D(501);};function Rh(a){this.a=a;this.Ca=null}Rh.prototype.ec=function(){null===this.Ca&&(this.Ca=this.$c());return this.Ca};function Sh(a){Rh.call(this,a)}t(Sh,Rh);Sh.prototype.$c=function(){return this.a.Yb?new Pg(this.a.Ga,this.a.values):new Og(this.a.Ga,this.a.values)};function Th(a){Rh.call(this,a)}t(Th,Rh);Th.prototype.$c=function(){var a=new Rg(this.a.table,this.a.set),b=null!=this.a.s?new Sg(this.a.s.Ib()):null,c=new Tg(this.a.table);null===b?L(a,c):(L(b,c),L(a,b));return a};function Uh(a,b,c){this.Ca=a;this.be=b;this.Sb=c}Uh.prototype.ec=function(){this.Sb.forEach(function(a){this.Ca=a.lb(this.Ca,this.be)},this);return this.Ca};function Vh(a,b){Rh.call(this,a);this.Sb=b}t(Vh,Rh);Vh.prototype.$c=function(){var a=new Qg(this.a.b),b=null!=this.a.s?new Sg(this.a.s.Ib()):null,c=new Tg(this.a.b);null===b?L(a,c):(L(b,c),L(a,b));return(new Uh(a,this.a,this.Sb)).ec()};function Wh(){}t(Wh,bh);Wh.prototype.lb=function(a,b){if(2>b.b.length)return a;this.Z=a;this.Ta(this.Z,b);return this.Z};Wh.prototype.Ta=function(a,b){if(a instanceof Sg&&a.I instanceof mg){var c=a.I.V(),d=Md(a,0);d instanceof Ug&&(c=null!=b.wb&&b.wb.has(c),c=new ah(a.I,c),ig(a,d,c,c),a==this.Z&&(this.Z=c),a=c)}K(a).forEach(function(a){this.Ta(a,b)},this)};function Xh(){this.Sc=C()}t(Xh,bh);Xh.prototype.lb=function(a,b){this.Sc.clear();if(!q(b.s))return a;this.Z=a;this.Ta(this.Z);this.Sc.clear();return this.Z};Xh.prototype.Ta=function(a){if(Yh(a)){var b=a.I instanceof Td?Zh(this,a):$h(this,a);this.Sc.add(a);b==a&&(b=Md(a,0));null!==b&&(ea(b.getParent())&&(this.Z=b),Yh(b)&&!this.Sc.has(b)&&this.Ta(b))}else K(a).forEach(function(a){this.Ta(a)},this)};
function ai(a,b,c){var d=b;if(Md(b,0)instanceof Sg)d=gg(b),ai(a,b,c);else if(bi(b)){var e=[],d=hg(b,c,function(a){a=new Sg(a.I);e.push(a);return a});e.forEach(function(a){ai(this,a,c)},a)}return d}function Zh(a,b){var c=C([I(b.I.N.G())]),d=function(a){return ci(this,a,c)}.bind(a);return ai(a,b,d)}function $h(a,b){var c=C([I(b.I.ga.G()),I(b.I.la.G())]),d=function(a){return ci(this,a,c)}.bind(a);return ai(a,b,d)}
function ci(a,b,c){var d=C();cg(b).forEach(function(a){d.add(I(a.table))},a);b instanceof Tg&&d.add(I(b.table));return oc(d,c)}function Yh(a){return a instanceof Sg&&!(a.I instanceof kg)}function bi(a){a=Md(a,0);return a instanceof Ug||a instanceof ah};function di(a,b){Rh.call(this,a);this.Sb=b;this.af=this.Se=this.jf=this.Ve=this.ue=this.He=this.hf=this.Be=this.lf=null}t(di,Rh);
di.prototype.$c=function(){ei(this);2<=this.a.b.length&&(this.Be=new Ug);this.hf=null!=this.a.s?new Sg(this.a.s.Ib()):null;this.a.L&&(this.Ve=new Wg(this.a.L));null!=this.a.M&&0<this.a.M&&(this.jf=new $g(this.a.M));null!=this.a.W&&(this.Se=new Zg(this.a.W));null!=this.a.ja&&(this.He=new Yg(this.a.ja));fi(this);this.af=new Vg(this.a.f||[],this.a.ja||null);var a=gi(this);return(new Uh(a,this.a,this.Sb)).ec()};
function gi(a){for(var b=[a.Se,a.jf,a.af,a.Ve,a.ue,a.He,a.hf,a.Be],c=null,d=null,e=0;e<b.length;e++){var f=b[e];null!==f&&(null===d?d=f:L(b[c],f),c=e)}a.lf.forEach(function(a){L(b[c],a)});return d}function ei(a){a.lf=a.a.b.map(function(a){return new Tg(a)},a)}function fi(a){var b=a.a.f.filter(function(a){return a instanceof R});null!=a.a.L&&a.a.L.forEach(function(a){a.N instanceof R&&b.push(a.N)});0<b.length&&(a.ue=new Xg(b))};function hi(){this.he=[new ch,new fh,new Xh,new Wh];this.Ed=[new ch]}hi.prototype.create=function(a){var b=null;if(a instanceof mh)b=new Sh(a);else if(a instanceof jh)b=new Vh(a,this.Ed);else if(a instanceof ae)b=new di(a,this.he);else if(a instanceof oh)b=new Th(a);else throw new D(513);b=b.ec();return new Mg(b,a.$())};function ii(a){T.call(this,0,1);this.O=a}t(ii,T);ii.prototype.toString=function(){return"delete("+this.O.getName()+")"};ii.prototype.ea=function(a,b){var c=b[0].entries.map(function(a){return a.sa});a.remove(this.O,c);return[ud()]};function ji(a,b){T.call(this,0,-1);this.table=b;this.C=a.j(ic)}t(ji,T);ji.prototype.toString=function(){return"get_row_count("+this.table.getName()+")"};ji.prototype.ea=function(){var a=this.C.get(Ke(this.table)),b=new F([],[this.table.getName()]),c=xg(),a=a.Ma().oa;null===b.Va&&(b.Va=A());b.Va.set(c.m(),a);return[b]};function ki(a,b){T.call(this,0,-1);this.S=a.j(hc);this.C=a.j(ic);this.table=b}t(ki,T);ki.prototype.toString=function(){var a="table_access("+this.table.getName();null===this.table.Wa()||(a+=" as "+this.table.Wa());return a+")"};ki.prototype.ea=function(){var a=this.C.get(Ke(this.table)).Xa();return[xd(af(this.S,a),[I(this.table)])]};function li(a){this.g=a}t(li,bh);li.prototype.lb=function(a,b){this.Z=a;if(!this.yd(b))return a;var c=dg(a,function(a){return a instanceof ki})[0],d=new ji(this.g,c.table);ig(c,c,d,d);return this.Z};li.prototype.yd=function(a){return 1==a.f.length&&1==a.b.length&&null==a.s&&null==a.W&&null==a.M&&null==a.ja?(a=a.f[0],a instanceof R&&"COUNT"==a.Hb&&a.child instanceof wg):!1};function mi(a){T.call(this,0,1);this.Ge=a}t(mi,T);mi.prototype.toString=function(){return"groupBy("+this.Ge.map(function(a){return a.m()}).toString()+")"};mi.prototype.ea=function(a,b){return ni(this,b[0])};function ni(a,b){var c=new Kc,d=function(a){return this.Ge.map(function(b){return H(a,b)},this).join(",")}.bind(a);b.entries.forEach(function(a){c.set(d(a),a)},a);return c.keys().map(function(a){return new F(c.get(a),G(b))},a)};function oi(a,b,c){T.call(this,0,0);this.C=a.j(ic);this.S=a.j(hc);this.I=b;this.Nb=c;this.vd="eq"==this.I.F?0:2;this.Ie=null}t(oi,T);var pi=["hash","index_nested_loop","nested_loop"];oi.prototype.toString=function(){return"join(type: "+(this.Nb?"outer":"inner")+", impl: "+pi[this.vd]+", "+this.I.toString()+")"};
oi.prototype.ea=function(a,b){switch(this.vd){case 0:return[qg(this.I,b[0],b[1],this.Nb)];case 1:return[rg(this.I,b[0],b[1],this.Ie,this.S)];default:var c=this.I,d=b[0],e=b[1],f=this.Nb,h=[d,e];f||(h=ng(c,d,e));for(var d=h[0],e=h[1],h=[],k=G(d),n=G(e),x=d.entries.length,S=e.entries.length,oa=S+256-1>>8,Ya=0;Ya<oa;){for(var Tb=0;Tb<x;Tb++){var Rf=!1,Sf=H(d.entries[Tb],c.ga);if(null!==Sf)for(var ri=Math.min(Ya+1<<8,S),Oc=Ya<<8;Oc<ri;Oc++)if(c.sc(Sf,H(e.entries[Oc],c.la))){var Rf=!0,sj=Bd(d.entries[Tb],
k,e.entries[Oc],n);h.push(sj)}f&&!Rf&&h.push(pg(c,d.entries[Tb],k))}Ya++}c=G(d).concat(G(e));return[new F(h,c)]}};function qi(a,b){a.vd=1;var c=a.C.get(b.xa().m());a.Ie={Sf:b,gg:b==a.I.ga?a.I.la:a.I.ga,index:c}};function si(a){T.call(this,0,-1);this.bf=a}t(si,T);si.prototype.toString=function(){return"no_op_step("+G(this.bf[0]).join(",")+")"};si.prototype.ea=g("bf");function ti(){}t(ti,bh);ti.prototype.lb=function(a,b){this.Z=a;if(!this.yd(b))return a;dg(a,function(a){return a instanceof oi}).forEach(this.qg,this);return this.Z};ti.prototype.yd=function(a){return 1<a.b.length};
ti.prototype.qg=function(a){if("eq"==a.I.F&&!a.Nb){var b=function(b){if(!(b instanceof ki))return null;b=I(b.table)==I(a.I.la.G())?a.I.la:a.I.ga;return ea(b.xa())?null:b},c=b(Md(a,0)),b=b(Md(a,1));if(null!==c||null!==b){b=null===b?c:b;qi(a,b);var d=new F([],[I(b.G())]);Pd(a,new si([d]),b==c?0:1)}}};function ui(a){a=a.map(function(a){return a.Cb()});a=Fb.apply(null,a);var b=[];Eb(a,function(a){b.push(a)});return b}function vi(a){this.Mb=a}vi.prototype.ad=function(){return 1==this.Mb.f.length?[nd()]:[this.Mb.f.map(function(){return nd()})]};function wi(a,b){this.Mb=a;this.Ba=b;this.Cd=this.Qe=null}
function xi(a,b){var c=A();a.Ba.keys().forEach(function(a){var e=this.Ba.get(a).map(function(a){return Xd(b,a)},this),f=new $f([nd()]);e.forEach(function(a){var b=null;"between"==a.F?b=new id(a.value[0],a.value[1],!1,!1):"eq"==a.F?(b=a.value,b=new id(b,b,!1,!1)):b="gte"==a.F?new id(a.value,E,!1,!1):"gt"==a.F?new id(a.value,E,!0,!1):"lte"==a.F?new id(E,a.value,!1,!1):new id(E,a.value,!1,!0);a=a.Ya?jd(b):[b];a=new $f(a);f=ag(f,a)});c.set(a,f)},a);return c}
wi.prototype.ad=function(a){if(this.Qe==a)return this.Cd;for(var b=xi(this,a),c=this.Mb.f.length-1;0<=c;c--){var d=this.Mb.f[c];if(null!==(b.get(d.ca.getName())||null))break;b.set(d.ca.getName(),new $f([nd()]))}this.Cd=1==this.Mb.f.length?B(b)[0].Cb():ui(yi(this,b));this.Qe=a;return this.Cd};function yi(a,b){var c=A(),d=0;a.Mb.f.forEach(function(a){c.set(a.ca.getName(),d);d++});return Yb(b).sort(function(a,b){return c.get(a)-c.get(b)}).map(function(a){return b.get(a)})};function zi(a,b){this.mf=b;this.C=a.j(ic)}function Ai(a,b,c){c=c.filter(a.Xf,a);if(0==c.length)return null;a=Bi(a,c);if(0==a.length)return null;if(1==a.length)return a[0];var d=Number.MAX_VALUE;return a.reduce(function(a,c){var h=Ci(c,b);return h<d?(d=h,c):a},null)}
function Bi(a,b){return a.mf.ya().map(function(a){a=new Di(this.C,a);Ei(a,b);return a},a).filter(function(a){if(null===a.Ba)a=!1;else{for(var b=!1,e=!0,f=0;f<a.ub.f.length;f++){var h=a.Ba.has(a.ub.f[f].ca.getName());if(b&&h){e=!1;break}h||(b=!0)}a=e}return a})}zi.prototype.Xf=function(a){var b;if(b=a instanceof Td)Ud(a),b=null!==a.value&&("between"==a.F||"eq"==a.F||"gt"==a.F||"gte"==a.F||"lt"==a.F||"lte"==a.F);return b?a.N.G()==this.mf:!1};
function Di(a,b){this.C=a;this.ub=b;this.Tf=C(this.ub.f.map(function(a){return a.ca.getName()}));this.Rd=this.Ba=null}function Fi(a){null===a.Rd&&(a.Rd=new wi(a.ub,a.Ba));return a.Rd}function Ei(a,b){b.forEach(function(a){var b=a.fb()[0].getName();this.Tf.has(b)&&(null===this.Ba&&(this.Ba=new Kc),this.Ba.set(b,a.V()))},a)}function Ci(a,b){var c=Fi(a).ad(b),d=a.C.get(a.ub.m());return c.reduce(function(a,b){return a+d.Yc(b)},0)};function Gi(a,b,c,d){T.call(this,0,-1);this.C=a.j(ic);this.index=b;this.Pe=c;this.fe=d;this.Rc=this.Qc=!1}t(Gi,T);Gi.prototype.toString=function(){return"index_range_scan("+this.index.m()+", ?, "+(this.fe?"reverse":"natural")+(this.Qc?", limit:?":"")+(this.Rc?", skip:?":"")+")"};Gi.prototype.Oc=function(a){var b=this.toString(),c=this.Pe.ad(a),b=b.replace("?",c.toString());this.Qc&&(b=b.replace("?",a.W.toString()));this.Rc&&(b=b.replace("?",a.M.toString()));return b};
Gi.prototype.ea=function(a,b,c){a=this.Pe.ad(c);b=this.C.get(this.index.m());c=(1==a.length&&a[0]instanceof id&&od(a[0])?ef(b.get(a[0].b),!1,this.Qc?c.W:void 0,this.Rc?c.M:void 0):b.Xa(a,this.fe,this.Qc?c.W:void 0,this.Rc?c.M:void 0)).map(function(a){return new z(a,{})},this);return[xd(c,[this.index.Nc])]};function Hi(a){T.call(this,0,1);this.md=a}t(Hi,T);Hi.prototype.toString=l("select(?)");Hi.prototype.Oc=function(a){a=Xd(a,this.md);return this.toString().replace("?",a.toString())};Hi.prototype.ea=function(a,b,c){return[Xd(c,this.md).eval(b[0])]};function Ii(a,b){T.call(this,0,1);this.S=a.j(hc);this.O=b}t(Ii,T);Ii.prototype.toString=function(){return"table_access_by_row_id("+this.O.getName()+")"};Ii.prototype.ea=function(a,b){return[xd(af(this.S,rd(b[0])),[I(this.O)])]};function Ji(a){this.g=a}t(Ji,bh);Ji.prototype.lb=function(a,b){this.Z=a;dg(a,function(a){return a instanceof ki}).forEach(function(a){var d=Ki(a);if(0!=d.length){var e=Ai(new zi(this.g,a.table),b,d.map(function(a){return Xd(b,a.md)}));if(null!==e){var f=A();d.forEach(function(a){f.set(a.md,a)},this);this.Z=Li(this,e,f,a)}}},this);return this.Z};function Ki(a){var b=[];for(a=a.getParent();a;)a instanceof Hi&&b.push(a),a=a.getParent();return b}
function Li(a,b,c,d){(null===b.Ba?[]:b.Ba.values()).map(function(a){return c.get(a)}).forEach(eg);b=new Gi(a.g,b.ub,Fi(b),!1);a=new Ii(a.g,d.table);L(a,b);ig(d,d,a,b);return b.gb()};function Mi(a,b){T.call(this,0,-1);this.C=a.j(ic);this.O=b}t(Mi,T);Mi.prototype.toString=function(){return"insert("+this.O.getName()+")"};Mi.prototype.ea=function(a,b,c){Ni(this.O,c.values,this.C);a.vb(this.O,c.values);return[xd(c.values,[this.O.getName()])]};function Ni(a,b,c){a=a.Bb().bd();if(null===a?0:a.f[0].autoIncrement){var d=a.f[0].ca.getName();c=c.get(a.m()).max();var e=null===c?0:c[0];b.forEach(function(a){if(0==a.o[d]||null==a.o[d])e++,a.o[d]=e})}}
function Oi(a,b){T.call(this,0,-1);this.C=a.j(ic);this.O=b}t(Oi,T);Oi.prototype.toString=function(){return"insert_replace("+this.O.getName()+")"};Oi.prototype.ea=function(a,b,c){Ni(this.O,c.values,this.C);a.Md(this.O,c.values);return[xd(c.values,[this.O.getName()])]};function Pi(){T.call(this,0,1)}t(Pi,T);Pi.prototype.toString=l("limit(?)");Pi.prototype.Oc=function(a){return this.toString().replace("?",a.W.toString())};Pi.prototype.ea=function(a,b,c){b[0].entries.splice(c.W);return b};function Qi(a){T.call(this,0,1);this.L=a}t(Qi,T);m=Qi.prototype;m.toString=function(){return"order_by("+be(this.L)+")"};m.ea=function(a,b){if(1==b.length){var c;c=b[0];for(var d=null,e=0;e<this.L.length;e++){var f=yg(this.L[e].N);if(null!==c.Va&&c.Va.has(f.m())){d=f;break}}c=d;(null===c?b[0]:sd(b[0],c)).entries.sort(this.Jf.bind(this))}else b.sort(this.tg.bind(this));return b};
m.U=function(a,b){var c=null,d=null,e=null,f=-1;do f++,e=this.L[f].N,c=this.L[f].jb,d=a(e),e=b(e);while(d==e&&f+1<this.L.length);d=d<e?-1:d>e?1:0;return 1==c?d:-d};m.tg=function(a,b){return this.U(function(b){return b instanceof R?sd(a,b):H(a.entries[a.entries.length-1],b)},function(a){return a instanceof R?sd(b,a):H(b.entries[b.entries.length-1],a)})};m.Jf=function(a,b){return this.U(function(b){return H(a,b)},function(a){return H(b,a)})};function Ri(a,b){this.Ia=a;this.J=b}function Si(a){return a.J.some(function(a){return a instanceof R},a)?Ti(a):Ui(a)}function Ti(a){if(1==a.J.length&&"DISTINCT"==a.J[0].Hb)return a=sd(a.Ia,a.J[0]).entries.map(function(a){var b=new yd(new z(-1,{}),1<this.Ia.K.size);Ad(b,this.J[0],H(a,this.J[0].child));return b},a),new F(a,[]);var b=new yd(new z(-1,{}),1<a.Ia.K.size);a.J.forEach(function(a){var d=a instanceof R?sd(this.Ia,a):H(this.Ia.entries[0],a);Ad(b,a,d)},a);return new F([b],G(a.Ia))}
function Ui(a){var b=Array(a.Ia.entries.length),c=1<a.Ia.K.size;a.Ia.entries.forEach(function(a,e){b[e]=new yd(new z(a.sa.id(),{}),c);this.J.forEach(function(c){Ad(b[e],c,H(a,c))},this)},a);return new F(b,G(a.Ia))}function Vi(a,b){var c=a.map(function(a){return Si(new Ri(a,b)).entries[0]});return new F(c,G(a[0]))};function Wi(a,b){T.call(this,0,1);this.f=a;this.Lb=b}t(Wi,T);Wi.prototype.toString=function(){var a="project("+this.f.toString();if(null!==this.Lb)var b=this.Lb.map(function(a){return a.m()}).join(", "),a=a+(", groupBy("+b+")");return a+")"};Wi.prototype.ea=function(a,b){var c;0==b.length?c=[ud()]:1==b.length?(c=b[0],c=[0==this.f.length?c:Si(new Ri(c,this.f))]):c=[Vi(b,this.f)];return c};function Xi(a){return a.f.some(function(a){return a instanceof R})||null!==a.Lb};function Yi(){T.call(this,0,1)}t(Yi,T);Yi.prototype.toString=l("skip(?)");Yi.prototype.Oc=function(a){return this.toString().replace("?",a.M.toString())};Yi.prototype.ea=function(a,b,c){return[new F(b[0].entries.slice(c.M),G(b[0]))]};function Zi(){}t(Zi,bh);Zi.prototype.lb=function(a,b){if(!q(b.W)&&!q(b.M))return a;var c=$i(a);if(null===c)return a;dg(a,function(a){return a instanceof Pi||a instanceof Yi}).forEach(function(a){a instanceof Pi?c.Qc=!0:c.Rc=!0;eg(a)},this);return c.gb()};function $i(a){a=dg(a,function(a){return a instanceof Gi},function(a){return a instanceof Wi&&Xi(a)||a instanceof Qi||1!=K(a).length||a instanceof Hi});return 0<a.length?a[0]:null};function aj(a){this.g=a}t(aj,bh);aj.prototype.lb=function(a,b){var c=bj(a,b);if(null===c)return a;var d;a:{var e=c;d=cj(Md(c,0));if(null!==d){var f;f=c.L;for(var h=null,k=d.table.ya(),n=0;n<k.length&&null===h;n++)h=dj(k[n],f);f=h;if(null===f){d=e;break a}e=new Gi(this.g,f.ub,new vi(f.ub),f.Me);f=new Ii(this.g,d.table);L(f,e);eg(c);e=ig(d,d,f,e)}d=e}if(d==c)a:if(d=c,e=ej(Md(c,0)),null!==e){f=dj(e.index,c.L);if(null===f)break a;e.fe=f.Me;d=eg(c).parent}return d.gb()};
function ej(a){a=dg(a,function(a){return a instanceof Gi},function(a){return 1!=K(a).length});return 0<a.length?a[0]:null}function cj(a){a=dg(a,function(a){return a instanceof ki},function(a){return 1!=K(a).length});return 0<a.length?a[0]:null}function bj(a,b){return q(b.L)?dg(a,function(a){return a instanceof Qi})[0]:null}function dj(a,b){if(a.f.length!=b.length||!b.every(function(b,c){return b.N.getName()==a.f[c].ca.getName()}))return null;var c=fj(b,a);return c[0]||c[1]?{ub:a,Me:c[1]}:null}
function fj(a,b){var c=a.reduce(function(a,b){return a<<1|(0==b.jb?0:1)},0),d=b.f.reduce(function(a,b){return a<<1|(0==b.jb?0:1)},0),c=c^d;return[0==c,c==Math.pow(2,Math.max(a.length,b.f.length))-1]};function gj(a,b,c){this.Ca=a;this.be=b;this.Sb=c}gj.prototype.ec=function(){this.Sb.forEach(function(a){this.Ca=a.lb(this.Ca,this.be)},this);return this.Ca};function hj(a,b){T.call(this,0,1);this.O=a;this.Cg=b}t(hj,T);hj.prototype.toString=function(){return"update("+this.O.getName()+")"};hj.prototype.ea=function(a,b){var c=b[0].entries.map(function(a){var b=this.O.Ab(a.sa.Ea());this.Cg.forEach(function(a){b.o[a.N.getName()]=a.value},this);return b},this);a.update(this.O,c);return[ud()]};function ij(a){this.g=a;this.he=[new ti,new Ji(this.g),new aj(this.g),new Zi,new li(this.g)];this.Ed=[new Ji(this.g)]}ij.prototype.create=function(a,b){var c=a.gb();if(c instanceof Pg||c instanceof Og)return jj(this,a,b);if(c instanceof Vg||c instanceof Zg||c instanceof $g)return jj(this,a,b,this.he);if(c instanceof Qg||c instanceof Rg)return jj(this,a,b,this.Ed);throw new D(8);};function jj(a,b,c,d){a=bg(b.gb(),a.fg.bind(a));null!=d&&(a=(new gj(a,c,d)).ec());return new ce(a,b.$())}
ij.prototype.fg=function(a){if(a instanceof Vg)return new Wi(a.f,a.Lb);if(a instanceof Yg)return new mi(a.f);if(a instanceof Xg)return new Cg(a.f);if(a instanceof Wg)return new Qi(a.L);if(a instanceof $g)return new Yi;if(a instanceof Zg)return new Pi;if(a instanceof Sg)return new Hi(a.I.V());if(a instanceof Ug)return new gh;if(a instanceof ah)return new oi(this.g,a.I,a.Nb);if(a instanceof Tg)return new ki(this.g,a.table);if(a instanceof Qg)return new ii(a.table);if(a instanceof Rg)return new hj(a.table,
a.ne);if(a instanceof Pg)return new Oi(this.g,a.table);if(a instanceof Og)return new Mi(this.g,a.table);throw new D(514);};function kj(a){this.dg=new hi;this.og=new ij(a)};function lj(){this.Te=A()}function mj(a,b){var c=a.Te.get(b.getName())||null;null===c&&(c=new nj,a.Te.set(b.getName(),c));return c}function oj(a,b,c,d){c.forEach(function(a){a=mj(this,a);0==d?(a.Za=null,a.tc=b):3==d?(null===a.Ub&&(a.Ub=C()),a.Ub.add(b),null===a.Qa&&(a.Qa=C()),a.Qa.delete(b)):1==d?(null===a.Qa&&(a.Qa=C()),a.Qa.add(b)):2==d&&(a.Za=b)},a)}
function pj(a,b,c,d){var e=!0;c.forEach(function(a){if(e){a=mj(this,a);var c=null===a.Qa||0==a.Qa.size;e=0==d?(null===a.Ub||0==a.Ub.size)&&c&&null===a.tc&&null!==a.Za&&a.Za==b:3==d?null===a.tc&&null===a.Za&&null!==a.Qa&&a.Qa.has(b):1==d?null===a.Za:c&&(null===a.Za||a.Za==b)}},a);return e}function qj(a,b,c,d){var e=pj(a,b,c,d);e&&oj(a,b,c,d);return e}lj.prototype.releaseLock=function(a,b){b.forEach(function(b){mj(this,b).releaseLock(a)},this)};
function rj(a,b){b.forEach(function(a){mj(this,a).Za=null},a)}function nj(){this.Ub=this.Qa=this.Za=this.tc=null}nj.prototype.releaseLock=function(a){this.tc==a&&(this.tc=null);this.Za==a&&(this.Za=null);null===this.Qa||this.Qa.delete(a);null===this.Ub||this.Ub.delete(a)};function tj(){this.Rb=new uj;this.Dc=new lj}function ke(a,b){(2>b.getPriority()||2>b.getPriority())&&rj(a.Dc,b.$());a.Rb.vb(b);vj(a);return b.Kb().ha}function vj(a){for(var b=a.Rb.Cb(),c=0;c<b.length;c++){var d=b[c],e=!1;if(e=0==d.H()?wj(a,d,1,3):wj(a,d,2,0))a.Rb.remove(d),e=a,d.exec().then(e.lg.bind(e,d),e.kg.bind(e,d))}}function wj(a,b,c,d){var e=!1;qj(a.Dc,b.V(),b.$(),c)&&(e=qj(a.Dc,b.V(),b.$(),d));return e}tj.prototype.lg=function(a,b){this.Dc.releaseLock(a.V(),a.$());a.Kb().resolve(b);vj(this)};
tj.prototype.kg=function(a,b){this.Dc.releaseLock(a.V(),a.$());a.Kb().reject(b);vj(this)};function uj(){this.Rb=[]}uj.prototype.vb=function(a){df(this.Rb,a,function(a,c){var d=a.getPriority()-c.getPriority();return 0==d?a.V()-c.V():d})};uj.prototype.Cb=function(){return this.Rb.slice()};uj.prototype.remove=function(a){var b=this.Rb;a=ya(b,a);var c;(c=0<=a)&&xa.splice.call(b,a,1);return c};function xj(a,b){this.Fd=Dd.xc();this.ce=a;this.hd=b;this.J=yj(this)}function yj(a){if(0<a.ce.f.length)return a.ce.f;var b=[];a.ce.b.forEach(function(a){a.fb().forEach(function(a){b.push(a)})});return b}xj.prototype.U=function(a,b){return this.J.every(function(c){return Jd(this.Fd,c.H(),"eq")(H(a,c),H(b,c))},this)};
function zj(a,b,c){var d=null===b?[]:b.entries,e=wb(d,c.entries,a.U.bind(a),function(a){return d[a]});b=[];for(var f=0,h=0;h<d.length;h++){var k=d[h];e[f]==k?f++:(k=a.hd.splice(f,1),k=Aj(h,k,0,a.hd),b.push(k))}e=wb(d,c.entries,a.U.bind(a),function(a,b){return c.entries[b]});for(h=f=0;h<c.entries.length;h++)k=c.entries[h],e[f]==k?f++:(a.hd.splice(h,0,k.sa.o),k=Aj(h,[],1,a.hd),b.push(k));return b}function Aj(a,b,c,d){return{Eg:c,index:a,object:d,Hg:b,type:"splice"}};function Bj(){this.cc=A()}Bj.prototype.ud=function(a,b){var c=ja(a.a).toString(),d=this.cc.get(c)||null;null===d&&(d=new Cj(a),this.cc.set(c,d));d.ud(b)};Bj.prototype.de=function(a,b){var c=ja(a.a).toString(),d=this.cc.get(c)||null;d.de(b);0<d.Hc.size||this.cc.delete(c)};function je(a,b){var c=C();b.forEach(function(a){c.add(a.getName())});var d=[];a.cc.forEach(function(a){a=a.zc();a.context.b.some(function(a){return c.has(a.getName())})&&d.push(a)});return d}
function he(a,b,c){b=ja(null!=b.Xc?b.Xc:b).toString();a=a.cc.get(b)||null;null!==a&&Dj(a,c)}function Cj(a){this.zf=a;this.Hc=C();this.ig=[];this.Re=null;this.Hf=new xj(a.a,this.ig)}Cj.prototype.ud=function(a){this.Hc.has(a)||this.Hc.add(a)};Cj.prototype.de=function(a){return this.Hc.delete(a)};Cj.prototype.zc=function(){var a=this.zf;return{context:a.a,ae:Eh(a)}};function Dj(a,b){var c=zj(a.Hf,a.Re,b);a.Re=b;0<c.length&&a.Hc.forEach(function(a){a(c)})};function Ej(a,b){var c=a.j(mc),d=b||{},e=new $e(c);a.kb(hc,e);var e=null,f=!1;null!=d.storeType?e=d.storeType:(q(Xb)||(Xb=new Wb),e=Xb,e=e.Uf?0:e.Dg?4:1);switch(e){case 0:e=new He(a,c);break;case 1:e=new Me(c);break;case 5:e=new Oe(c);break;case 4:e=new We(a,c,d.webSqlDbSize);break;case 3:e=new we(c,d.firebase);f=!0;break;default:throw new D(300);}a.kb(gc,e);var h=new Zf;a.kb(ic,h);return e.Fa(d.onUpgrade).then(function(){var b=new kj(a);a.kb(jc,b);b=new tj;a.kb(kc,b);b=new Bj;a.kb(lc,b);return h.Fa(c)}).then(function(){if(f){var b=
new le(a);b.Ja.subscribe(b.Wd.bind(b))}return(new Qf(a)).Fa(c)})};function Fj(a){this.g=a;this.i=a.j(mc);this.aa=C(this.i.ra());this.$a=y()}m=Fj.prototype;m.exec=function(){var a=this.g.j(ic),b=this.g.j(hc),c={};this.i.ra().forEach(function(d){var f=a.get(Ke(d)).Xa(),f=af(b,f).map(function(a){return a.o});c[d.getName()]=f});var d={name:this.i.name(),version:this.i.version(),tables:c},d=new yd(new z(-1,d),!0);return w([new F([d],[])])};m.H=l(0);m.$=g("aa");m.Kb=g("$a");m.V=function(){return ja(this)};m.getPriority=l(0);function Gj(a,b){this.g=a;this.i=a.j(mc);this.aa=C(this.i.ra());this.$a=y();this.va=b;this.Ja=a.j(gc);this.S=a.j(hc);this.C=a.j(ic)}m=Gj.prototype;
m.exec=function(){if(!(this.Ja instanceof He||this.Ja instanceof Me||this.Ja instanceof We))throw new D(300);var a;a:{a=this.i.ra();for(var b=0;b<a.length;++b)if(0<this.C.get(Ke(a[b])).Ma().oa){a=!1;break a}a=!0}if(!a)throw new D(110);if(this.i.name()!=this.va.name||this.i.version()!=this.va.version)throw new D(111);if(null==this.va.tables)throw new D(112);return Hj(this)};m.H=l(1);m.$=g("aa");m.Kb=g("$a");m.V=function(){return ja(this)};m.getPriority=l(0);
function Hj(a){var b=new cd(a.g,a.aa),b=a.Ja.zb(a.H(),b),c;for(c in a.va.tables){var d=a.i.table(c),e=a.va.tables[c].map(function(a){return d.rb(a)}),f=b.G(c,d.Ab);a.S.Tb(c,e);var h=a.C.ic.get(c)||[];e.forEach(function(a){h.forEach(function(b){var c=a.Db(b.getName());b.add(c,a.id())})});f.put(e)}return b.ia()};function Ij(a,b){this.g=a;this.Ja=a.j(gc);this.Da=a.j(kc);this.Eb=a.j(lc);this.aa=C(b);this.Oa=new cd(this.g,this.aa);this.$a=y();this.uc=y();this.qe=y()}m=Ij.prototype;m.exec=function(){this.qe.resolve();return this.uc.ha};m.H=l(1);m.$=g("aa");m.Kb=g("$a");m.V=function(){return ja(this)};m.getPriority=l(2);function Jj(a){ke(a.Da,a);return a.qe.ha}
function Kj(a,b){var c=b.zc();return c.ae.gb().exec(a.Oa,c.context).then(function(a){return qd(a[0])},function(a){this.Oa.Fb();var b=new jb(a.name);this.uc.reject(b);throw a;}.bind(a))}m.ia=function(){this.Ja.zb(this.H(),this.Oa).ia().then(function(){this.Lc();this.uc.resolve()}.bind(this),function(a){this.Oa.Fb();this.uc.reject(a)}.bind(this));return this.$a.ha};m.Fb=function(){this.Oa.Fb();this.uc.resolve();return this.$a.ha};
m.Lc=function(){var a=je(this.Eb,this.aa);0!=a.length&&(a=new ge(this.g,a),ke(this.Da,a))};function Lj(a){this.g=a;this.Da=a.j(kc);this.Pc=null;this.Ra=0;0==Mj.size&&(Mj.set(0,C([1,4])),Mj.set(1,C([2])),Mj.set(2,C([3,5,6])),Mj.set(3,C([2,7])),Mj.set(4,C([7])),Mj.set(5,C([7])),Mj.set(6,C([7])))}r("lf.proc.Transaction",Lj);var Mj=A();function Nj(a,b){var c=Mj.get(a.Ra)||null;if(null===c||!c.has(b))throw new D(107,a.Ra,b);a.Ra=b}
Lj.prototype.exec=function(a){Nj(this,4);var b=[];try{a.forEach(function(a){a.bb();b.push(a.zc())},this)}catch(c){return Nj(this,7),bb(c)}a=new hh(this.g,b);return ke(this.Da,a).then(function(a){Nj(this,7);return a.map(function(a){return qd(a)})}.bind(this),function(a){Nj(this,7);throw a;}.bind(this))};Lj.prototype.exec=Lj.prototype.exec;Lj.prototype.xf=function(a){Nj(this,1);this.Pc=new Ij(this.g,a);return Jj(this.Pc).then(function(){Nj(this,2)}.bind(this))};Lj.prototype.begin=Lj.prototype.xf;
Lj.prototype.wf=function(a){Nj(this,3);return Kj(this.Pc,a).then(function(a){Nj(this,2);return a}.bind(this),function(a){Nj(this,7);throw a;}.bind(this))};Lj.prototype.attach=Lj.prototype.wf;Lj.prototype.ia=function(){Nj(this,5);return this.Pc.ia().then(function(){Nj(this,7)}.bind(this))};Lj.prototype.commit=Lj.prototype.ia;Lj.prototype.Fb=function(){Nj(this,6);return this.Pc.Fb().then(function(){Nj(this,7)}.bind(this))};Lj.prototype.rollback=Lj.prototype.Fb;function W(a){this.g=a;this.i=a.j(mc);this.Ld=!1}r("lf.proc.Database",W);W.prototype.Fa=function(a){this.g.kb(mc,this.i);return Ej(this.g,a).then(function(){this.Ld=!0;this.Da=this.g.j(kc);return this}.bind(this))};W.prototype.init=W.prototype.Fa;W.prototype.tb=g("i");W.prototype.getSchema=W.prototype.tb;function Oj(a){if(!a.Ld)throw new D(2);}W.prototype.select=function(a){Oj(this);return new V(this.g,1!=arguments.length||null!=arguments[0]?Array.prototype.slice.call(arguments):[])};
W.prototype.select=W.prototype.select;W.prototype.vb=function(){Oj(this);return new Gh(this.g)};W.prototype.insert=W.prototype.vb;W.prototype.Md=function(){Oj(this);return new Gh(this.g,!0)};W.prototype.insertOrReplace=W.prototype.Md;W.prototype.update=function(a){Oj(this);return new Qh(this.g,a)};W.prototype.update=W.prototype.update;W.prototype.delete=function(){Oj(this);return new Fh(this.g)};W.prototype["delete"]=W.prototype.delete;
W.prototype.observe=function(a,b){Oj(this);this.g.j(lc).ud(a,b)};W.prototype.observe=W.prototype.observe;W.prototype.unobserve=function(a,b){Oj(this);this.g.j(lc).de(a,b)};W.prototype.unobserve=W.prototype.unobserve;W.prototype.Ff=function(){Oj(this);return new Lj(this.g)};W.prototype.createTransaction=W.prototype.Ff;W.prototype.close=function(){try{this.g.j(gc).close()}catch(a){}this.g.clear();this.Ld=!1};W.prototype.close=W.prototype.close;
W.prototype.Nf=function(){Oj(this);var a=new Fj(this.g);return ke(this.Da,a).then(function(a){return qd(a[0])[0]})};W.prototype["export"]=W.prototype.Nf;W.prototype.import=function(a){Oj(this);a=new Gj(this.g,a);return ke(this.Da,a).then(l(null))};W.prototype["import"]=W.prototype.import;function X(a,b,c,d,e,f){this.O=a;this.u=b;this.Ne=c;this.Le=d;this.qf=e;this.ab=f||null}r("lf.schema.BaseColumn",X);m=X.prototype;m.getName=g("u");m.m=function(){return I(this.O)+"."+this.u};m.toString=function(){return this.m()};m.G=g("O");m.H=g("qf");X.prototype.getType=X.prototype.H;X.prototype.Wa=g("ab");X.prototype.ya=function(){null==this.ka&&(this.ka=[],this.G().ya().forEach(function(a){-1!=a.f.map(function(a){return a.ca.getName()}).indexOf(this.u)&&this.ka.push(a)},this));return this.ka};
X.prototype.xa=function(){if(!q(this.fa)){var a=this.ya().filter(function(a){return 1!=a.f.length?!1:a.f[0].ca.getName()==this.getName()},this);this.fa=0<a.length?a[0]:null}return this.fa};X.prototype.Bc=g("Le");X.prototype.isNullable=X.prototype.Bc;X.prototype.Cc=g("Ne");X.prototype.Na=function(a){return sg(this,a,"eq")};X.prototype.eq=X.prototype.Na;X.prototype.Ue=function(a){return sg(this,a,"neq")};X.prototype.neq=X.prototype.Ue;X.prototype.Sd=function(a){return sg(this,a,"lt")};
X.prototype.lt=X.prototype.Sd;X.prototype.eg=function(a){return sg(this,a,"lte")};X.prototype.lte=X.prototype.eg;X.prototype.Pf=function(a){return sg(this,a,"gt")};X.prototype.gt=X.prototype.Pf;X.prototype.Qf=function(a){return sg(this,a,"gte")};X.prototype.gte=X.prototype.Qf;X.prototype.match=function(a){return sg(this,a,"match")};X.prototype.match=X.prototype.match;X.prototype.yf=function(a,b){return sg(this,[a,b],"between")};X.prototype.between=X.prototype.yf;
X.prototype.Rf=function(a){return sg(this,a,"in")};X.prototype["in"]=X.prototype.Rf;X.prototype.$f=function(){return this.Na(null)};X.prototype.isNull=X.prototype.$f;X.prototype.Zf=function(){return this.Ue(null)};X.prototype.isNotNull=X.prototype.Zf;X.prototype.mc=function(a){return new X(this.O,this.u,this.Ne,this.Le,this.qf,a)};X.prototype.as=X.prototype.mc;function Pj(){this.pd=A()}var Qj;Pj.prototype.clear=function(){this.pd.clear()};Pj.prototype.clear=Pj.prototype.clear;Pj.prototype.kb=function(a,b){this.pd.set(a.toString(),b);return b};Pj.prototype.registerService=Pj.prototype.kb;Pj.prototype.j=function(a){var b=this.pd.get(a.toString())||null;if(null===b)throw new D(7,a.toString());return b};Pj.prototype.getService=Pj.prototype.j;Pj.prototype.Qd=function(a){return this.pd.has(a.toString())};Pj.prototype.isRegistered=Pj.prototype.Qd;function Rj(a){this.i=a;this.zd=new Kc;this.ee=new Kc;this.We=new Kc;this.ze=A();this.h=new Kc;this.ve=new Kc;this.cf=new Kc;this.ye=new Kc;Sj(this)}function Sj(a){a.i.ra().forEach(function(a){var c=a.getName();a.Bb().Jd().forEach(function(d){this.We.set(c,this.i.table(d.Pa));this.h.set(d.Pa,a);0==d.action?(this.ee.set(d.Pa,d),this.cf.set(d.Pa,a)):(this.zd.set(d.Pa,d),this.ve.set(d.Pa,a));this.ze.set(a.getName()+"."+d.cb,d.Pa);this.ye.set(d.Pa+"."+d.gc,a.getName())},this)},a)}
function Tc(a,b,c){if(null!=c)return 1==c?a.zd.get(b):a.ee.get(b);c=a.zd.get(b);a=a.ee.get(b);return null===c&&null===a?null:(c||[]).concat(a||[])}function nh(a,b){var c=b.get(a);return null===c?[]:c}function ph(a,b){var c=C();b.forEach(function(a){(a=this.ze.get(a))&&c.add(a)},a);return nc(c).map(function(a){return this.i.table(a)},a)}function lh(a,b,c){return null!=c?0==c?nh(b,a.cf):nh(b,a.ve):nh(b,a.h)}
function qh(a,b){var c=C();b.forEach(function(a){(a=this.ye.get(a))&&a.forEach(function(a){c.add(a)})},a);return nc(c).map(function(a){return this.i.table(a)},a)};function Tj(a,b,c){this.pg=a;this.hg=b;this.Of=c}r("lf.schema.Constraint",Tj);Tj.prototype.bd=g("pg");Tj.prototype.getPrimaryKey=Tj.prototype.bd;Tj.prototype.Jd=g("Of");Tj.prototype.getForeignKeys=Tj.prototype.Jd;function Uj(a,b,c){var d=a.ref.split(".");if(2!=d.length)throw new D(540,c);this.xe=b;this.cb=a.local;this.Pa=d[0];this.gc=d[1];this.name=b+"."+c;this.action=a.action;this.timing=a.timing};function Y(a){Vj(a);this.Fd=Dd.xc();this.u=a;this.J=A();this.rd=C();this.jc=C();this.Gc=C();this.Aa=null;this.ka=A();this.ld=!1;this.sb=[]}r("lf.schema.TableBuilder",Y);function Wj(a){this.name=a.name;this.jb=a.order;this.autoIncrement=a.autoIncrement}var Xj=C([0,6]);function Vj(a){if(!/^[A-Za-z_][A-Za-z0-9_]*$/.test(a))throw new D(502,a);}function Yj(a,b){if(b==a.u)throw new D(546,b);if(a.J.has(b)||a.ka.has(b)||a.jc.has(b))throw new D(503,a.u+"."+b);}
function Zj(a,b){var c=!1;b.forEach(function(a){var b=this.J.get(a.name);c=c||a.autoIncrement;if(a.autoIncrement&&3!=b)throw new D(504);},a);if(c&&1<b.length)throw new D(505);}function ak(a){if(null!==a.Aa){var b=a.ka.get(a.Aa).map(function(a){return a.name}),c=0;if(a.sb.some(function(a,e){c=e;return-1!=b.indexOf(a.cb)},a))throw new D(543,a.sb[c].name);}}
function bk(a){if(null!==a.Aa){var b=function(a){return a.name},c=JSON.stringify(a.ka.get(a.Aa).map(b));a.ka.forEach(function(a,e){if(e!=this.Aa){var f=a.map(b);if(JSON.stringify(f)==c)throw new D(544,this.u+"."+e);}},a)}}function ck(a){null===a.Aa||a.ka.get(a.Aa).forEach(function(a){if(this.Gc.has(a.name))throw new D(545,this.u+"."+a.name);},a)}Y.prototype.rf=function(a,b){Vj(a);Yj(this,a);this.J.set(a,b);Xj.has(b)&&this.se([a]);return this};Y.prototype.addColumn=Y.prototype.rf;
Y.prototype.tf=function(a,b){var c=this.u;this.Aa="pk"+(c[0].toUpperCase()+c.substring(1));Vj(this.Aa);Yj(this,this.Aa);c=dk(this,a,!0,void 0,b);Zj(this,c);1==c.length&&this.rd.add(c[0].name);this.jc.add(this.Aa);this.ka.set(this.Aa,c);return this};Y.prototype.addPrimaryKey=Y.prototype.tf;
Y.prototype.sf=function(a,b){Vj(a);Yj(this,a);var c=new Uj(b,this.u,a);q(c.action)||(c.action=0);q(c.timing)||(c.timing=0);if(1==c.action&&1==c.timing)throw new D(506);if(!this.J.has(c.cb))throw new D(540,a);this.sb.push(c);this.re(a,[c.cb],this.rd.has(c.cb));return this};Y.prototype.addForeignKey=Y.prototype.sf;Y.prototype.uf=function(a,b){Vj(a);Yj(this,a);var c=dk(this,b,!0);ek(this,a,c);1==c.length&&(this.rd.add(c[0].name),fk(this,c[0].name));this.ka.set(a,c);this.jc.add(a);return this};
Y.prototype.addUnique=Y.prototype.uf;function fk(a,b){a.sb.forEach(function(a){a.cb==b&&this.jc.add(a.name.split(".")[1])},a)}Y.prototype.se=function(a){a=dk(this,a,!1);gk(this,a);a.forEach(function(a){this.Gc.add(a.name)},this);return this};Y.prototype.addNullable=Y.prototype.se;function gk(a,b){Yb(a.ka).forEach(function(a){var d=C();this.ka.get(a).forEach(function(a){d.add(a.name)});var e=b.filter(function(a){return d.has(a.name)});if(1<d.size&&0<e.length)throw new D(507,a,e.join(","));},a)}
Y.prototype.re=function(a,b,c,d){Vj(a);Yj(this,a);b=dk(this,b,!0,d);ek(this,a,b);c&&this.jc.add(a);this.ka.set(a,b);return this};Y.prototype.addIndex=Y.prototype.re;function ek(a,b,c){if(1<c.length&&(a=c.filter(function(a){return this.Gc.has(a.name)},a),0<a.length))throw new D(507,b,a.join(","));}Y.prototype.xb=ba("ld");Y.prototype.persistentIndex=Y.prototype.xb;Y.prototype.tb=function(){ak(this);bk(this);ck(this);return new (hk(this))};Y.prototype.getSchema=Y.prototype.tb;
function ik(a){return a.sb}function dk(a,b,c,d,e){var f=b,f="string"==typeof b[0]?b.map(function(a){return new Wj({name:a,order:null!=d?d:1,autoIncrement:e||!1})}):b.map(function(a){return new Wj(a)});f.forEach(function(a){if(!this.J.has(a.name))throw new D(508,this.u,a.name);if(c){var b=this.J.get(a.name);if(0==b||6==b)throw new D(509,this.u,a.name);}},a);return f}
function hk(a){function b(){function b(c){return a.ka.get(c).map(function(a){return{ca:this[a.name],jb:a.jb,autoIncrement:a.autoIncrement}},this)}var d=Yb(a.J).map(function(b){this[b]=new X(this,b,a.rd.has(b),a.Gc.has(b),a.J.get(b));return this[b]},this),e=Yb(a.ka).map(function(d){return new ug(a.u,d,a.jc.has(d),b.call(this,d))},this);Q.call(this,a.u,d,e,a.ld);var f=null===a.Aa?null:new ug(a.u,a.Aa,!0,b.call(this,a.Aa)),h=d.filter(function(b){return!a.Gc.has(b.getName())});this.Bf=new Tj(f,h,a.sb);
this.ff=jk(a,d,e)}t(b,Q);b.prototype.rb=function(a){return new this.ff(pb++,a)};b.prototype.createRow=b.prototype.rb;b.prototype.Ab=function(a){var b={};this.fb().forEach(function(e){var f=e.getName();e=e.H();var h=a.value[f];if(0==e)if(e=h,null!=e&&""!=e){0!=e.length%2&&(e="0"+e);for(var h=new ArrayBuffer(e.length/2),k=new Uint8Array(h),n=0,x=0;n<e.length;n+=2)k[x++]=parseInt(e.substr(n,2),16);e=h}else e=null;else e=2==e?null!=h?new Date(h):null:h;b[f]=e},this);return new this.ff(a.id,b)};b.prototype.deserializeRow=
b.prototype.Ab;b.prototype.Bb=g("Bf");b.prototype.getConstraint=b.prototype.Bb;return b}
function jk(a,b,c){function d(a,d){this.J=b;this.ka=c;z.call(this,a,d)}t(d,z);d.prototype.Ce=function(){var a={};this.J.forEach(function(b){a[b.getName()]=b.Bc()?null:Jc[b.H()]});return a};d.prototype.nf=function(){var a={};this.J.forEach(function(b){var c=b.getName();b=b.H();var d=this.o[c];a[c]=0==b?null!=d?tb(d):null:2==b?null!=d?d.getTime():null:6==b?null!=d?d:null:d},this);return a};var e=function(a){var b=this.J.get(a.getName()),c=this.Fd.Oe.get(b)||null;return function(b){return c(b[a.getName()])}}.bind(a),
f=function(a){var b=a.map(function(a){return e(a.ca)});return function(a){return b.map(function(b){return b(a)})}}.bind(a),h={};c.forEach(function(a){var b=a.m();a=1==a.f.length?e(a.f[0].ca):f(a.f);h[b]=a});d.prototype.Db=function(a){return-1!=a.indexOf("#")?this.id():h.hasOwnProperty(a)?h[a](this.o):null};return d};function kk(a,b){this.i=new Z(a,b);this.ob=A();this.vc=!1}r("lf.schema.Builder",kk);function lk(a,b){b.sb.forEach(function(a){var d=a.Pa;if(!this.ob.has(d))throw new D(536,a.name);var d=this.ob.get(d).tb(),e=a.gc;if(!d.hasOwnProperty(e))throw new D(537,a.name);if(b.tb()[a.cb].H()!=d[e].H())throw new D(538,a.name);if(!d[e].Cc())throw new D(539,a.name);},a)}kk.prototype.Af=function(a){a.sb.forEach(function(a){ik(this.ob.get(a.Pa)).forEach(function(c){if(c.cb==a.gc)throw new D(534,a.name);},this)},this)};
function mk(a){a.vc||(a.ob.forEach(function(a){lk(this,a);a=a.tb();this.i.K.set(a.getName(),a)},a),B(a.ob).forEach(a.Af,a),nk(a),a.ob.clear(),a.vc=!0)}function ok(a,b,c){b.oe||(b.oe=!0,b.Xd=!0,b.De.forEach(function(a){a=c.get(a);if(!a.oe)ok(this,a,c);else if(a.Xd&&b!=a)throw new D(533);},a));b.Xd=!1}function nk(a){var b=A();a.i.K.forEach(function(a,d){b.set(d,new pk(d))},a);a.ob.forEach(function(a,d){a.sb.forEach(function(a){b.get(a.Pa).De.add(d)})});B(b).forEach(function(a){ok(this,a,b)},a)}
function pk(a){this.Xd=this.oe=!1;this.De=C();this.Nc=a}kk.prototype.tb=function(){this.vc||mk(this);return this.i};kk.prototype.getSchema=kk.prototype.tb;kk.prototype.Fe=function(){var a=new fc("ns_"+this.i.name()),b;Qj||(Qj=new Pj);b=Qj;var c=null;b.Qd(a)?c=b.j(a):(c=new Pj,b.kb(a,c));return c};kk.prototype.getGlobal=kk.prototype.Fe;kk.prototype.connect=function(a){var b=this.Fe();b.Qd(mc)||b.kb(mc,this.tb());return(new W(b)).Fa(a)};kk.prototype.connect=kk.prototype.connect;
kk.prototype.Ef=function(a){if(this.ob.has(a))throw new D(503,a);if(this.vc)throw new D(535);this.ob.set(a,new Y(a));return this.ob.get(a)};kk.prototype.createTable=kk.prototype.Ef;kk.prototype.ie=function(a){if(this.vc)throw new D(535);this.i.ie(a);return this};kk.prototype.setPragma=kk.prototype.ie;function Z(a,b){this.u=a;this.Xb=b;this.K=A();this.$e={If:!1}}r("lf.schema.DatabaseSchema",Z);Z.prototype.name=g("u");Z.prototype.name=Z.prototype.name;Z.prototype.version=g("Xb");
Z.prototype.version=Z.prototype.version;Z.prototype.ra=function(){return B(this.K)};Z.prototype.tables=Z.prototype.ra;Z.prototype.table=function(a){if(!this.K.has(a))throw new D(101,a);return this.K.get(a)};Z.prototype.table=Z.prototype.table;Z.prototype.info=function(){this.Je||(this.Je=new Rj(this));return this.Je};Z.prototype.Ze=g("$e");Z.prototype.pragma=Z.prototype.Ze;Z.prototype.ie=ba("$e");r("lf.schema.create",function(a,b){return new kk(a,b)});v.prototype.catch=v.prototype.le;v.prototype["catch"]=v.prototype.catch;}.bind(window))()
//# sourceMappingURL=lovefield.es6.js.map
