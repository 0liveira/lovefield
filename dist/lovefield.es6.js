(function(){'use strict';function aa(){return function(){}}function ba(a){return function(b){this[a]=b}}function g(a){return function(){return this[a]}}function l(a){return function(){return a}}var m,p=this;function q(a){return void 0!==a}function ca(){}
function da(a){var b=typeof a;if("object"==b)if(a){if(a instanceof Array)return"array";if(a instanceof Object)return b;var c=Object.prototype.toString.call(a);if("[object Window]"==c)return"object";if("[object Array]"==c||"number"==typeof a.length&&"undefined"!=typeof a.splice&&"undefined"!=typeof a.propertyIsEnumerable&&!a.propertyIsEnumerable("splice"))return"array";if("[object Function]"==c||"undefined"!=typeof a.call&&"undefined"!=typeof a.propertyIsEnumerable&&!a.propertyIsEnumerable("call"))return"function"}else return"null";
else if("function"==b&&"undefined"==typeof a.call)return"object";return b}function ea(a){return null===a}function fa(a){return null!=a}function ga(a){var b=da(a);return"array"==b||"object"==b&&"number"==typeof a.length}function ha(a){return"string"==typeof a}function ia(a){return"function"==da(a)}function ja(a){return a[ka]||(a[ka]=++la)}var ka="closure_uid_"+(1E9*Math.random()>>>0),la=0;function ma(a,b,c){return a.call.apply(a.bind,arguments)}
function na(a,b,c){if(!a)throw Error();if(2<arguments.length){var d=Array.prototype.slice.call(arguments,2);return function(){var c=Array.prototype.slice.call(arguments);Array.prototype.unshift.apply(c,d);return a.apply(b,c)}}return function(){return a.apply(b,arguments)}}function pa(a,b,c){pa=Function.prototype.bind&&-1!=Function.prototype.bind.toString().indexOf("native code")?ma:na;return pa.apply(null,arguments)}
function qa(a,b){var c=Array.prototype.slice.call(arguments,1);return function(){var b=c.slice();b.push.apply(b,arguments);return a.apply(this,b)}}function r(a,b){var c=a.split("."),d=p;c[0]in d||!d.execScript||d.execScript("var "+c[0]);for(var e;c.length&&(e=c.shift());)!c.length&&q(b)?d[e]=b:d=d[e]?d[e]:d[e]={}}
function t(a,b){function c(){}c.prototype=b.prototype;a.Fb=b.prototype;a.prototype=new c;a.prototype.constructor=a;a.Dg=function(a,c,f){for(var h=Array(arguments.length-2),k=2;k<arguments.length;k++)h[k-2]=arguments[k];return b.prototype[c].apply(a,h)}};function ra(a){if(Error.captureStackTrace)Error.captureStackTrace(this,ra);else{var b=Error().stack;b&&(this.stack=b)}a&&(this.message=String(a))}t(ra,Error);ra.prototype.name="CustomError";var sa=String.prototype.trim?function(a){return a.trim()}:function(a){return a.replace(/^[\s\xa0]+|[\s\xa0]+$/g,"")};
function ta(a){var b=0,c=sa(String(ua)).split(".");a=sa(String(a)).split(".");for(var d=Math.max(c.length,a.length),e=0;0==b&&e<d;e++){var f=c[e]||"",h=a[e]||"",k=/(\d*)(\D*)/g,n=/(\d*)(\D*)/g;do{var x=k.exec(f)||["","",""],S=n.exec(h)||["","",""];if(0==x[0].length&&0==S[0].length)break;b=va(0==x[1].length?0:parseInt(x[1],10),0==S[1].length?0:parseInt(S[1],10))||va(0==x[2].length,0==S[2].length)||va(x[2],S[2])}while(0==b)}return b}function va(a,b){return a<b?-1:a>b?1:0};function wa(a,b,c){this.bg=c;this.Ff=a;this.sg=b;this.kd=0;this.fd=null}wa.prototype.get=function(){var a;0<this.kd?(this.kd--,a=this.fd,this.fd=a.next,a.next=null):a=this.Ff();return a};wa.prototype.put=function(a){this.sg(a);this.kd<this.bg&&(this.kd++,a.next=this.fd,this.fd=a)};var xa=Array.prototype,ya=xa.indexOf?function(a,b,c){return xa.indexOf.call(a,b,c)}:function(a,b,c){c=null==c?0:0>c?Math.max(0,a.length+c):c;if(ha(a))return ha(b)&&1==b.length?a.indexOf(b,c):-1;for(;c<a.length;c++)if(c in a&&a[c]===b)return c;return-1},za=xa.forEach?function(a,b,c){xa.forEach.call(a,b,c)}:function(a,b,c){for(var d=a.length,e=ha(a)?a.split(""):a,f=0;f<d;f++)f in e&&b.call(c,e[f],f,a)},Aa=xa.map?function(a,b,c){return xa.map.call(a,b,c)}:function(a,b,c){for(var d=a.length,e=Array(d),
f=ha(a)?a.split(""):a,h=0;h<d;h++)h in f&&(e[h]=b.call(c,f[h],h,a));return e},Ba=xa.reduce?function(a,b,c,d){d&&(b=pa(b,d));return xa.reduce.call(a,b,c)}:function(a,b,c,d){var e=c;za(a,function(c,h){e=b.call(d,e,c,h,a)});return e},Ca=xa.some?function(a,b,c){return xa.some.call(a,b,c)}:function(a,b,c){for(var d=a.length,e=ha(a)?a.split(""):a,f=0;f<d;f++)if(f in e&&b.call(c,e[f],f,a))return!0;return!1};function Da(a,b,c){return 2>=arguments.length?xa.slice.call(a,b):xa.slice.call(a,b,c)}
function Ea(a){for(var b=[],c=0;c<a;c++)b[c]=0;return b}function Fa(a){for(var b=[],c=0;c<arguments.length;c++){var d=arguments[c];if("array"==da(d))for(var e=0;e<d.length;e+=8192)for(var f=Fa.apply(null,Da(d,e,e+8192)),h=0;h<f.length;h++)b.push(f[h]);else b.push(d)}return b};var Ga;a:{var Ha=p.navigator;if(Ha){var Ia=Ha.userAgent;if(Ia){Ga=Ia;break a}}Ga=""}function u(a){return-1!=Ga.indexOf(a)};function Ja(){return u("Opera")||u("OPR")}function Ka(){return(u("Chrome")||u("CriOS"))&&!Ja()&&!u("Edge")};function La(a){p.setTimeout(function(){throw a;},0)}var Ma;
function Na(){var a=p.MessageChannel;"undefined"===typeof a&&"undefined"!==typeof window&&window.postMessage&&window.addEventListener&&!u("Presto")&&(a=function(){var a=document.createElement("IFRAME");a.style.display="none";a.src="";document.documentElement.appendChild(a);var b=a.contentWindow,a=b.document;a.open();a.write("");a.close();var c="callImmediate"+Math.random(),d="file:"==b.location.protocol?"*":b.location.protocol+"//"+b.location.host,a=pa(function(a){if(("*"==d||a.origin==d)&&a.data==
c)this.port1.onmessage()},this);b.addEventListener("message",a,!1);this.port1={};this.port2={postMessage:function(){b.postMessage(c,d)}}});if("undefined"!==typeof a&&!u("Trident")&&!u("MSIE")){var b=new a,c={},d=c;b.port1.onmessage=function(){if(q(c.next)){c=c.next;var a=c.ve;c.ve=null;a()}};return function(a){d.next={ve:a};d=d.next;b.port2.postMessage(0)}}return"undefined"!==typeof document&&"onreadystatechange"in document.createElement("SCRIPT")?function(a){var b=document.createElement("SCRIPT");
b.onreadystatechange=function(){b.onreadystatechange=null;b.parentNode.removeChild(b);b=null;a();a=null};document.documentElement.appendChild(b)}:function(a){p.setTimeout(a,0)}};function Oa(){this.td=this.jc=null}var Qa=new wa(function(){return new Pa},function(a){a.reset()},100);Oa.prototype.add=function(a,b){var c=Qa.get();c.set(a,b);this.td?this.td.next=c:this.jc=c;this.td=c};Oa.prototype.remove=function(){var a=null;this.jc&&(a=this.jc,this.jc=this.jc.next,this.jc||(this.td=null),a.next=null);return a};function Pa(){this.next=this.scope=this.Hd=null}Pa.prototype.set=function(a,b){this.Hd=a;this.scope=b;this.next=null};
Pa.prototype.reset=function(){this.next=this.scope=this.Hd=null};function Ra(a,b){Sa||Ta();Ua||(Sa(),Ua=!0);Va.add(a,b)}var Sa;function Ta(){if(p.Promise&&p.Promise.resolve){var a=p.Promise.resolve(void 0);Sa=function(){a.then(Wa)}}else Sa=function(){var a=Wa;!ia(p.setImmediate)||p.Window&&p.Window.prototype&&p.Window.prototype.setImmediate==p.setImmediate?(Ma||(Ma=Na()),Ma(a)):p.setImmediate(a)}}var Ua=!1,Va=new Oa;function Wa(){for(var a=null;a=Va.remove();){try{a.Hd.call(a.scope)}catch(b){La(b)}Qa.put(a)}Ua=!1};function v(a,b){this.Ra=0;this.bf=void 0;this.Wc=this.ac=this.B=null;this.ed=this.Gd=!1;if(a!=ca)try{var c=this;a.call(b,function(a){Xa(c,2,a)},function(a){Xa(c,3,a)})}catch(d){Xa(this,3,d)}}function Za(){this.next=this.context=this.fc=this.Hc=this.child=null;this.wd=!1}Za.prototype.reset=function(){this.context=this.fc=this.Hc=this.child=null;this.wd=!1};var $a=new wa(function(){return new Za},function(a){a.reset()},100);function ab(a,b,c){var d=$a.get();d.Hc=a;d.fc=b;d.context=c;return d}
function w(a){if(a instanceof v)return a;var b=new v(ca);Xa(b,2,a);return b}function bb(a){return new v(function(b,c){c(a)})}function cb(a,b,c){db(a,b,c,null)||Ra(qa(b,a))}function eb(a){return new v(function(b,c){var d=a.length,e=[];if(d)for(var f=function(a,c){d--;e[a]=c;0==d&&b(e)},h=function(a){c(a)},k=0,n;k<a.length;k++)n=a[k],cb(n,qa(f,k),h);else b(e)})}function y(){var a,b,c=new v(function(c,e){a=c;b=e});return new fb(c,a,b)}
v.prototype.then=function(a,b,c){return gb(this,ia(a)?a:null,ia(b)?b:null,c)};v.prototype.then=v.prototype.then;v.prototype.$goog_Thenable=!0;v.prototype.ke=function(a,b){return gb(this,null,a,b)};function hb(a,b){a.ac||2!=a.Ra&&3!=a.Ra||ib(a);a.Wc?a.Wc.next=b:a.ac=b;a.Wc=b}
function gb(a,b,c,d){var e=ab(null,null,null);e.child=new v(function(a,h){e.Hc=b?function(c){try{var e=b.call(d,c);a(e)}catch(x){h(x)}}:a;e.fc=c?function(b){try{var e=c.call(d,b);!q(e)&&b instanceof jb?h(b):a(e)}catch(x){h(x)}}:h});e.child.B=a;hb(a,e);return e.child}v.prototype.yg=function(a){this.Ra=0;Xa(this,2,a)};v.prototype.zg=function(a){this.Ra=0;Xa(this,3,a)};
function Xa(a,b,c){0==a.Ra&&(a==c&&(b=3,c=new TypeError("Promise cannot resolve to itself")),a.Ra=1,db(c,a.yg,a.zg,a)||(a.bf=c,a.Ra=b,a.B=null,ib(a),3!=b||c instanceof jb||kb(a,c)))}function db(a,b,c,d){if(a instanceof v)return hb(a,ab(b||ca,c||null,d)),!0;var e;if(a)try{e=!!a.$goog_Thenable}catch(h){e=!1}else e=!1;if(e)return a.then(b,c,d),!0;e=typeof a;if("object"==e&&null!=a||"function"==e)try{var f=a.then;if(ia(f))return lb(a,f,b,c,d),!0}catch(h){return c.call(d,h),!0}return!1}
function lb(a,b,c,d,e){function f(a){k||(k=!0,d.call(e,a))}function h(a){k||(k=!0,c.call(e,a))}var k=!1;try{b.call(a,h,f)}catch(n){f(n)}}function ib(a){a.Gd||(a.Gd=!0,Ra(a.Kf,a))}function mb(a){var b=null;a.ac&&(b=a.ac,a.ac=b.next,b.next=null);a.ac||(a.Wc=null);return b}
v.prototype.Kf=function(){for(var a=null;a=mb(this);){var b=this.Ra,c=this.bf;if(3==b&&a.fc&&!a.wd)for(var d=void 0,d=this;d&&d.ed;d=d.B)d.ed=!1;if(a.child)a.child.B=null,nb(a,b,c);else try{a.wd?a.Hc.call(a.context):nb(a,b,c)}catch(e){ob.call(null,e)}$a.put(a)}this.Gd=!1};function nb(a,b,c){2==b?a.Hc.call(a.context,c):a.fc&&a.fc.call(a.context,c)}function kb(a,b){a.ed=!0;Ra(function(){a.ed&&ob.call(null,b)})}var ob=La;function jb(a){ra.call(this,a)}t(jb,ra);jb.prototype.name="cancel";
function fb(a,b,c){this.ha=a;this.resolve=b;this.reject=c};/*

 Copyright 2014 The Lovefield Project Authors. All Rights Reserved.

 Licensed under the Apache License, Version 2.0 (the "License");
 you may not use this file except in compliance with the License.
 You may obtain a copy of the License at

     http://www.apache.org/licenses/LICENSE-2.0

 Unless required by applicable law or agreed to in writing, software
 distributed under the License is distributed on an "AS IS" BASIS,
 WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 See the License for the specific language governing permissions and
 limitations under the License.
*/
function z(a,b){this.pa=a;this.o=b||this.Ae()}var pb=0;m=z.prototype;m.id=g("pa");function qb(a){return a.o}m.Ae=function(){return{}};m.lf=g("o");m.Ia=function(){return{id:this.pa,value:this.lf()}};m.Cb=function(a){return"#"==a.substr(-1)?this.pa:null};function rb(a){return new z(a.id,a.value)}function sb(a){return new z(pb++,a||{})}function tb(a){if(null==a)return null;a=new Uint8Array(a);for(var b="",c=0;c<a.length;++c)var d=a[c].toString(16),b=b+(2>d.length?"0"+d:d);return b};function ub(a){this.type=a}function vb(a){z.call(this,-1,a)}t(vb,z);function wb(a,b,c,d){c=c||function(a,b){return a==b};d=d||function(b){return a[b]};for(var e=a.length,f=b.length,h=[],k=0;k<e+1;k++)h[k]=[],h[k][0]=0;for(var n=0;n<f+1;n++)h[0][n]=0;for(k=1;k<=e;k++)for(n=1;n<=f;n++)c(a[k-1],b[n-1])?h[k][n]=h[k-1][n-1]+1:h[k][n]=Math.max(h[k-1][n],h[k][n-1]);for(var x=[],k=e,n=f;0<k&&0<n;)c(a[k-1],b[n-1])?(x.unshift(d(k-1,n-1)),k--,n--):h[k-1][n]>h[k][n-1]?k--:n--;return x}function xb(a){return Ba(arguments,function(a,c){return a+c},0)}
function yb(a){return xb.apply(null,arguments)/arguments.length}function zb(a){var b=arguments.length;if(2>b)return 0;var c=yb.apply(null,arguments);return xb.apply(null,Aa(arguments,function(a){return Math.pow(a-c,2)}))/(b-1)}function Ab(a){return Math.sqrt(zb.apply(null,arguments))};var Bb="StopIteration"in p?p.StopIteration:{message:"StopIteration",stack:""};function Cb(){}Cb.prototype.next=function(){throw Bb;};Cb.prototype.oe=function(){return this};function Db(a){if(a instanceof Cb)return a;if("function"==typeof a.oe)return a.oe(!1);if(ga(a)){var b=0,c=new Cb;c.next=function(){for(;;){if(b>=a.length)throw Bb;if(b in a)return a[b++];b++}};return c}throw Error("Not implemented");}
function Eb(a,b){if(ga(a))try{za(a,b,void 0)}catch(c){if(c!==Bb)throw c;}else{a=Db(a);try{for(;;)b.call(void 0,a.next(),void 0,a)}catch(c){if(c!==Bb)throw c;}}}function Fb(a){if(Ca(arguments,function(a){return!a.length})||!arguments.length)return new Cb;var b=new Cb,c=arguments,d=Ea(c.length);b.next=function(){if(d){for(var a=Aa(d,function(a,b){return c[b][a]}),b=d.length-1;0<=b;b--){if(d[b]<c[b].length-1){d[b]++;break}if(0==b){d=null;break}d[b]=0}return a}throw Bb;};return b};function Gb(a){Hb(a);return a.c.concat()}function Hb(a){if(a.Bf!=a.c.length){for(var b=0,c=0;b<a.c.length;){var d=a.c[b];Ib(a.X,d)&&(a.c[c++]=d);b++}a.c.length=c}if(a.Bf!=a.c.length){for(var e={},c=b=0;b<a.c.length;)d=a.c[b],Ib(e,d)||(a.c[c++]=d,e[d]=1),b++;a.c.length=c}}function Ib(a,b){return Object.prototype.hasOwnProperty.call(a,b)};function Jb(){return u("iPhone")&&!u("iPod")&&!u("iPad")};var Kb=Ja(),Lb=u("Trident")||u("MSIE"),Mb=u("Edge"),Nb=u("Gecko")&&!(-1!=Ga.toLowerCase().indexOf("webkit")&&!u("Edge"))&&!(u("Trident")||u("MSIE"))&&!u("Edge"),Ob=-1!=Ga.toLowerCase().indexOf("webkit")&&!u("Edge");function Pb(){var a=Ga;if(Nb)return/rv\:([^\);]+)(\)|;)/.exec(a);if(Mb)return/Edge\/([\d\.]+)/.exec(a);if(Lb)return/\b(?:MSIE|rv)[: ]([^\);]+)(\)|;)/.exec(a);if(Ob)return/WebKit\/(\S+)/.exec(a)}
var ua=function(){if(Kb&&p.opera){var a;var b=p.opera.version;try{a=b()}catch(c){a=b}return a}a="";(b=Pb())&&(a=b?b[1]:"");return Lb&&(b=(b=p.document)?b.documentMode:void 0,b>parseFloat(a))?String(b):a}(),Qb={};var Rb=Jb()||u("iPod"),Sb=u("iPad");!u("Android")||Ka()||u("Firefox")||Ja();var Ub=Ka(),Vb=u("Safari")&&!(Ka()||u("Coast")||Ja()||u("Edge")||u("Silk")||u("Android"))&&!(Jb()||u("iPad")||u("iPod"));/*

 Copyright 2015 The Lovefield Project Authors. All Rights Reserved.

 Licensed under the Apache License, Version 2.0 (the "License");
 you may not use this file except in compliance with the License.
 You may obtain a copy of the License at

     http://www.apache.org/licenses/LICENSE-2.0

 Unless required by applicable law or agreed to in writing, software
 distributed under the License is distributed on an "AS IS" BASIS,
 WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 See the License for the specific language governing permissions and
 limitations under the License.
*/
function Wb(){this.tg=Vb||Sb||Rb;this.Tf=!(this.tg||Lb&&!Qb[10]&&!(Qb[10]=0<=ta(10)));!Lb||Qb[11]||(Qb[11]=0<=ta(11));this.Bg=Ub||Vb}var Xb;function A(){return new window.Map}function Yb(a){var b=0,c=Array(a.size);a.forEach(function(a,e){c[b++]=e});return c}function B(a){var b=0,c=Array(a.size);a.forEach(function(a){c[b++]=a});return c};var Zb={};r("lf.TransactionType",Zb);Zb.READ_ONLY=0;Zb.READ_WRITE=1;function $b(a,b){this.Oa=a;this.mf=b;this.Y=y()}$b.prototype.ia=function(){try{ac(this.Oa)}catch(a){return bb(a)}return(0==this.mf?this.mc():bc(this)).then(function(a){this.Oa.ia();return a}.bind(this))};function bc(a){cc(a);dc(a);return a.mc()}
function cc(a){a.Oa.ob.forEach(function(a,c){var d=this.Oa.$().get(c),d=this.G(d.getName(),d.Jb.bind(d)),e=B(a.va).map(function(a){return a.id()});0<e.length&&d.remove(e).ke(this.Jd,this);e=B(a.na).map(function(a){return a[1]}).concat(B(a.ta));d.put(e).ke(this.Jd,this)},a)}function dc(a){ec(a.Oa).forEach(function(a){var c=this.G(a.getName(),rb),d;c.get([-1]).then(function(a){d=a;return c.remove([])}).then(function(){c.put(d);c.put(a.Ia())},this.Jd.bind(this))},a)}$b.prototype.Jd=function(a){this.Y.reject(a)};function fc(a){this.ug=a}fc.prototype.toString=g("ug");var gc=new fc("backstore"),hc=new fc("cache"),ic=new fc("indexstore"),jc=new fc("engine"),kc=new fc("runner"),lc=new fc("observerregistry"),mc=new fc("schema");function C(a){return q(a)?new window.Set(a):new window.Set}function nc(a){var b=0,c=Array(a.size);a.forEach(function(a){c[b++]=a});return c}function oc(a,b){if(b.size>a.size)return!1;var c=!0;b.forEach(function(b){c=c&&a.has(b)});return c};function pc(a,b){this.pa=a;this.o=b||{}}function qc(a){var b=C();a.forEach(function(a){b.add(a>>9)});return nc(b)}pc.prototype.V=g("pa");function rc(a,b){b.forEach(function(a){this.o[a.id()]=a.Ia()},a)}function sc(a,b){b.forEach(function(a){delete this.o[a]},a)}pc.prototype.Ia=function(){return{id:this.pa,value:JSON.stringify(this.o)}};function tc(a){return new pc(a.id,JSON.parse(a.value))};function uc(a,b,c){this.ba=a;this.Ib=b;this.cf=c}m=uc.prototype;m.get=function(a){if(0==a.length)return this.vc();var b=this.Ib;return vc(this,a).then(function(c){return a.map(function(a){var e=c.get(a>>9);return b(e.o[a])})})};function vc(a,b){var c=A(),d=y(),e=qc(b).map(function(a){return new v(function(b,d){var e;try{e=this.ba.get(a)}catch(x){d(x);return}e.onerror=d;e.onsuccess=function(a){a=tc(a.target.result);c.set(a.V(),a);b()}},this)},a);eb(e).then(function(){d.resolve(c)});return d.ha}
m.vc=function(){return new v(function(a,b){var c=[],d;try{d=this.ba.openCursor()}catch(e){b(e);return}d.onerror=b;d.onsuccess=function(){var b=d.result;if(b){var f;f=tc(b.value).o;for(var h in f)c.push(this.Ib(f[h]));b.continue()}else a(c)}.bind(this)},this)};m.Qb=function(a){return new v(function(b,c){var d;try{d=a()}catch(e){c(e);return}d.onsuccess=b;d.onerror=c},this)};
m.put=function(a){if(0==a.length)return w();var b=A();a.forEach(function(a){var d;d=a.id()>>9;var e=b.get(d)||null;null===e&&(e=this.cf(this.ba.name,d));rc(e,[a]);b.set(d,e)},this);a=B(b).map(function(a){return this.Qb(function(){return this.ba.put(a.Ia())}.bind(this))},this);return eb(a)};
m.remove=function(a){if(0==a.length)return this.Qb(function(){return this.ba.clear()}.bind(this));var b=A();a.forEach(function(a){var d=a>>9,e=b.get(d)||null;null===e&&(e=this.cf(this.ba.name,d));sc(e,[a]);b.set(d,e)},this);a=B(b).map(function(a){return this.Qb(function(){return 0==Object.keys(a.o).length?this.ba.delete(a.V()):this.ba.put(a.Ia())}.bind(this))},this);return eb(a)};function wc(a,b,c){a=a.i(hc);var d=[c<<9,(c+1<<9)-1];b=a.Xa(b,d[0],d[1]);c=new pc(c);rc(c,b);return c}
function xc(a,b){return new pc(b)};function yc(){};function zc(a){this.S=a.i(hc);this.C=a.i(ic);this.j=a.i(mc)}zc.prototype.update=function(a){a.forEach(function(a){Ac(this,a);Bc(this,a)},this)};function Bc(a,b){var c=b.getName();b.va.forEach(function(a,b){this.S.remove(c,b)},a);b.ta.forEach(function(a){this.S.set(c,a)},a);b.na.forEach(function(a){this.S.set(c,a[1])},a)}function Ac(a,b){var c=a.j.table(b.getName());Cc(b).forEach(function(a){Dc(this,c,a)},a)}
function Dc(a,b,c){var d=a.C.hc.get(b.getName())||[],e=0;d.forEach(function(a){try{Ec(a,c),e++}catch(b){throw d.slice(0,e).forEach(function(a){Ec(a,[c[1],c[0]])},this),b;}},a)}function Ec(a,b){var c=null===b[1]?void 0:b[1].Cb(a.getName()),d=null===b[0]?void 0:b[0].Cb(a.getName());if(!q(d)&&q(c))a.add(c,b[1].id());else if(q(d)&&q(c)){if(null===c||null===d){if(c==d)return}else if(0==a.nc().compare(d,c))return;a.add(c,b[1].id());a.remove(d,b[0].id())}else q(d)&&!q(c)&&a.remove(d,b[0].id())};var Fc={};r("lf.ConstraintAction",Fc);Fc.RESTRICT=0;Fc.CASCADE=1;var Gc={};r("lf.ConstraintTiming",Gc);Gc.IMMEDIATE=0;Gc.DEFERRABLE=1;var Hc={};r("lf.Order",Hc);Hc.DESC=0;Hc.ASC=1;var Ic={};r("lf.Type",Ic);Ic.ARRAY_BUFFER=0;Ic.BOOLEAN=1;Ic.DATE_TIME=2;Ic.INTEGER=3;Ic.NUMBER=4;Ic.STRING=5;Ic.OBJECT=6;var Jc={0:null,1:!1,2:Object.freeze(new Date(0)),3:0,4:0,5:"",6:null};r("lf.type.DEFAULT_VALUES",Jc);function D(a,b){this.code=a;this.message="http://sn.im/2a0j3wn?c="+a;if(1<arguments.length)for(var c=1;c<=Math.min(4,arguments.length-1);++c)this.message+="&p"+(c-1)+"="+encodeURIComponent(arguments[c].toString().slice(0,64))}t(D,Error);function Kc(){this.X=A();this.size=0}m=Kc.prototype;m.has=function(a){return this.X.has(a)};m.set=function(a,b){var c=this.X.get(a)||null;null===c&&(c=C(),this.X.set(a,c));c.has(b)||(c.add(b),this.size++);return this};m.Tb=function(a,b){var c=this.X.get(a)||null;null===c&&(c=C(),this.X.set(a,c));b.forEach(function(a){c.has(a)||(c.add(a),this.size++)},this);return this};m.Sd=function(a){a.keys().forEach(function(b){var c=a.get(b);this.Tb(b,c)},this);return this};
m.delete=function(a,b){var c=this.X.get(a,null);if(null===c)return!1;var d=c.delete(b);d&&(--this.size,0==c.size&&this.X.delete(a));return d};m.get=function(a){a=this.X.get(a)||null;return null===a?null:nc(a)};m.clear=function(){this.X.clear();this.size=0};m.keys=function(){return Yb(this.X)};m.values=function(){var a=[];this.X.forEach(function(b){a.push.apply(a,nc(b))});return a};function Lc(a){this.C=a.i(ic);this.j=a.i(mc);this.S=a.i(hc);this.Zc=null}function Mc(a,b,c){var d=b.Ab().gg;c.forEach(function(a){d.forEach(function(b){if(null==a.o[b.getName()])throw new D(202,b.m());},this)},a)}function Oc(a,b,c,d){b.Ab().Id().forEach(function(a){a.timing==d&&Pc(this,a,c)},a)}function Pc(a,b,c){var d=Qc(a,b);c.forEach(function(a){if(Rc(a[0],a[1],b.name)&&(a=a[1].o[b.pb],null!==a&&!d.cb(a)))throw new D(203,b.name);},a)}
function Qc(a,b){null===a.Zc&&(a.Zc=A());var c=a.Zc.get(b.name)||null;null===c&&(c=a.j.table(b.Pa)[b.Ic].wa(),c=a.C.get(c.m()),a.Zc.set(b.name,c));return c}function Rc(a,b,c){return(null===a?null!==b:null===b)||a.Cb(c)!=b.Cb(c)}function Sc(a,b,c,d,e){b=Tc(a.j.info(),b.getName(),e);null!==b&&(b=b.filter(function(a){return a.timing==d}),0!=b.length&&Uc(a,b,c,function(a,b,c){if(b.cb(c))throw new D(203,a.name);}))}
function Vc(a,b,c){b=Tc(a.j.info(),b.getName(),1);if(null===b)return null;var d=new Kc;Uc(a,b,c,function(a,b,c){b=b.get(c);0<b.length&&d.Tb(a.zf,b)});return d}function Uc(a,b,c,d){b.forEach(function(a){var b=this.C.get(a.name),h=Qc(this,a);c.forEach(function(c){Rc(c[0],c[1],h.getName())&&d(a,b,c[0].o[a.Ic])},this)},a)}function Wc(a,b,c,d){0!=c.length&&(c=c.map(function(a){return[null,a]}),Oc(a,b,c,d))}function Xc(a,b,c,d){0!=c.length&&(Oc(a,b,c,d),Sc(a,b,c,d))}
function Yc(a,b,c,d){0!=c.length&&(c=c.map(function(a){return[a,null]}),Sc(a,b,c,d,0))}function Zc(a,b,c){var d={je:[],ef:new Kc},e=new Kc;e.Tb(b.getName(),c.map(function(a){return a.id()}));do{var f=new Kc;e.keys().forEach(function(a){var b=this.j.table(a);a=e.get(a).map(function(a){return[this.S.get(a),null]},this);b=Vc(this,b,a);null!==b&&(d.je.unshift.apply(d.je,b.keys()),f.Sd(b))},a);e=f;d.ef.Sd(e)}while(0<e.size);return d};function $c(a){this.ta=A();this.na=A();this.va=A();this.u=a}m=$c.prototype;m.getName=g("u");m.add=function(a){if(this.va.has(a.id())){var b=[this.va.get(a.id()),a];this.na.set(a.id(),b);this.va.delete(a.id())}else this.ta.set(a.id(),a)};m.modify=function(a){var b=a[1],c=a[0].id();this.ta.has(c)?this.ta.set(c,b):(this.na.has(c)&&(a=[this.na.get(a[0].id())[0],b]),this.na.set(c,a))};
m.delete=function(a){if(this.ta.has(a.id()))this.ta.delete(a.id());else if(this.na.has(a.id())){var b=this.na.get(a.id())[0];this.na.delete(a.id());this.va.set(a.id(),b)}else this.va.set(a.id(),a)};m.Sd=function(a){a.ta.forEach(function(a){this.add(a)},this);a.na.forEach(function(a){this.modify(a)},this);a.va.forEach(function(a){this.delete(a)},this)};
function Cc(a){var b=[];a.ta.forEach(function(a){b.push([null,a])});a.na.forEach(function(a){b.push(a)});a.va.forEach(function(a){b.push([a,null])});return b}m.toString=function(){return"["+Yb(this.ta).toString()+"], ["+Yb(this.na).toString()+"], ["+Yb(this.va).toString()+"]"};function ad(a){var b=new $c(a.u);a.ta.forEach(function(a){b.delete(a)});a.va.forEach(function(a){b.add(a)});a.na.forEach(function(a){b.modify([a[1],a[0]])});return b}
m.Xf=function(){return 0==this.ta.size&&0==this.va.size&&0==this.na.size};function bd(a,b){this.aa=A();b.forEach(function(a){this.aa.set(a.getName(),a)},this);this.j=a.i(mc);this.S=a.i(hc);this.C=a.i(ic);this.Da=new Lc(a);this.gd=new zc(a);this.ob=A()}function ec(a){var b=[];Yb(a.ob).map(function(a){return this.aa.get(a)},a).forEach(function(a){a.xb()&&(a.xa().forEach(function(a){b.push(this.C.get(a.m()))},this),b.push(this.C.get(a.getName()+".#")))},a);return b}m=bd.prototype;m.$=g("aa");
function cd(a){var b=[];a.aa.forEach(function(a){a.xb()&&(a.xa().forEach(function(a){b.push(a.m())}),b.push(a.getName()+".#"))});return b}m.vb=function(a,b){dd(this,a);Mc(this.Da,a,b);Wc(this.Da,a,b,0);for(var c=0;c<b.length;c++)ed(this,a,[null,b[c]])};
function ed(a,b,c){var d=b.getName(),e=a.ob.get(d)||new $c(d);a.ob.set(d,e);try{Dc(a.gd,b,c)}catch(h){throw h;}b=c[0];var f=c[1];null===b&&null!==f?(a.S.set(d,f),e.add(f)):null!==b&&null!==f?(a.S.set(d,f),e.modify(c)):null!==b&&null===f&&(a.S.remove(d,b.id()),e.delete(b))}m.update=function(a,b){dd(this,a);Mc(this.Da,a,b);for(var c=0;c<b.length;c++){var d=b[c],d=[this.S.get(d.id()),d];Xc(this.Da,a,[d],0);ed(this,a,d)}};
m.Ld=function(a,b){dd(this,a);Mc(this.Da,a,b);for(var c=0;c<b.length;c++){var d=b[c],e=null,f,h=a.Ab().bd();if(null===h)f=null;else{f=this.Da;var h=h.m(),k=d.Cb(h);f=f.C.get(h).get(k);f=0==f.length?null:f[0]}null!=f?(e=this.S.get(f),d.pa=f,Xc(this.Da,a,[[e,d]],0)):Wc(this.Da,a,[d],0);ed(this,a,[e,d])}};m.remove=function(a,b){dd(this,a);fd(this,a,b);Yc(this.Da,a,b,0);for(var c=0;c<b.length;c++)ed(this,a,[b[c],null])};
function fd(a,b,c){if(null!==Tc(a.j.info(),b.getName(),1)){b=Zc(a.Da,b,c);var d=b.ef;b.je.forEach(function(a){var b=this.j.table(a);a=d.get(a).map(function(a){return this.S.get(a)},this);Yc(this.Da,b,a,0);a.forEach(function(a){ed(this,b,[a,null])},this)},a)}}function ac(a){a.ob.forEach(function(a){var c=this.aa.get(a.getName());Wc(this.Da,c,B(a.ta),1);Yc(this.Da,c,B(a.va),1);Xc(this.Da,c,B(a.na),1)},a)}m.ia=aa();m.Eb=function(){var a=B(this.ob).map(function(a){return ad(a)});this.gd.update(a)};
function dd(a,b){if(!a.aa.has(b.getName()))throw new D(106,b.getName());};function gd(a,b,c,d){this.b=a;this.w=b;this.da=this.b==E?!1:c;this.ma=this.w==E?!1:d}var E=new (aa());gd.prototype.toString=function(){return(this.da?"(":"[")+(this.b==E?"unbound":this.b)+", "+(this.w==E?"unbound":this.w)+(this.ma?")":"]")};function hd(a){if(id(a))return[];var b=null,c=null;a.b==E||(b=new gd(E,a.b,!1,!a.da));a.w==E||(c=new gd(a.w,E,!a.ma,!1));return[b,c].filter(function(a){return null!==a})}gd.prototype.reverse=function(){return new gd(this.w,this.b,this.ma,this.da)};
function jd(a,b){var c=kd(a.b,b.b,!0,a.da,b.da);if(0==c)return!0;var d=-1==c?a:b,c=1==c?a:b;return d.w==E||d.w>c.b||d.w==c.b&&!d.ma&&!c.da}function ld(){return new gd(E,E,!1,!1)}function id(a){return a.b==E&&a.w==E}function md(a){return a.b==a.w&&a.b!=E&&!a.da&&!a.ma}gd.prototype.contains=function(a){var b=this.w==E||a<this.w||a==this.w&&!this.ma;return(this.b==E||a>this.b||a==this.b&&!this.da)&&b};
function kd(a,b,c,d,e){function f(a){return c?a:1==a?-1:1}d=d||!1;e=e||!1;return a==E?b==E?(d?!e:e)?d?f(1):f(-1):0:f(-1):b==E?f(1):a<b?-1:a==b?(d?!e:e)?d?f(1):f(-1):0:1}function nd(a,b){var c=kd(a.b,b.b,!0,a.da,b.da);0==c&&(c=kd(a.w,b.w,!1,a.ma,b.ma));return c};function F(a,b){this.entries=a;this.K=C(b);this.Va=null}function G(a){return nc(a.K)}function od(a){return a.entries.map(function(a){return a.sa.o})}function pd(a){return a.entries.map(function(a){return a.sa.id()})}function qd(a,b){return a.Va.get(b.m())}var rd=null;function sd(){null===rd&&(rd=new F([],[]));return rd}
function td(a){if(0==a.length)return sd();for(var b=a.reduce(function(a,b){return a+b.entries.length},0),c=Array(b),d=0,b=a.map(function(a){var b=A();a.entries.forEach(function(a){c[d++]=a;b.set(a.id,a)});return b}),e=A(),f=0;f<c.length;f++)b.every(function(a){return a.has(c[f].id)})&&e.set(c[f].id,c[f]);return new F(B(e),nc(a[0].K))}function ud(a){if(0==a.length)return sd();var b=A();a.forEach(function(a){a.entries.forEach(function(a){b.set(a.id,a)})});return new F(B(b),nc(a[0].K))}
function vd(a,b){var c=1<b.length,d=a.map(function(a){return new wd(a,c)});return new F(d,b)}function wd(a,b){this.sa=a;this.id=xd++;this.Od=b}var xd=0;function H(a,b){var c=b.Wa();return null!==c&&a.sa.o.hasOwnProperty(c)?a.sa.o[c]:a.Od?a.sa.o[I(b.G())][b.getName()]:a.sa.o[b.getName()]}function yd(a,b,c){var d=b.Wa();if(null!=d)a.sa.o[d]=c;else if(a.Od){var d=I(b.G()),e=a.sa.o[d];null==e&&(e={},a.sa.o[d]=e);e[b.getName()]=c}else a.sa.o[b.getName()]=c}
function zd(a,b,c,d){function e(a,b){if(a.Od){var c=a.sa.o,d;for(d in c)f[d]=c[d]}else f[b[0]]=a.sa.o}var f={};e(a,b);e(c,d);a=new z(-1,f);return new wd(a,!0)};r("lf.bind",function(a){return new Ad(a)});function Ad(a){this.fa=a}r("lf.Binder",Ad);Ad.prototype.wa=g("fa");function Bd(){this.Me=Cd();var a=Dd();this.dc=A();this.dc.set(1,Ed());this.dc.set(2,Fd());this.dc.set(4,a);this.dc.set(3,a);this.dc.set(5,Gd())}Bd.wc=function(){return Bd.Ie?Bd.Ie:Bd.Ie=new Bd};function Hd(a,b,c){return(a.dc.get(b)||null).get(c)||null}function Cd(){function a(a){return a}var b=A();b.set(1,function(a){return null===a?null:a?1:0});b.set(2,function(a){return null===a?null:a.getTime()});b.set(3,a);b.set(4,a);b.set(5,a);return b}
function Ed(){var a=A();a.set("eq",function(a,c){return a==c});a.set("neq",function(a,c){return a!=c});return a}
function Dd(){var a=Ed();a.set("between",function(a,c){return null===a||null===c[0]||null===c[1]?!1:a>=c[0]&&a<=c[1]});a.set("gte",function(a,c){return null===a||null===c?!1:a>=c});a.set("gt",function(a,c){return null===a||null===c?!1:a>c});a.set("in",function(a,c){return-1!=c.indexOf(a)});a.set("lte",function(a,c){return null===a||null===c?!1:a<=c});a.set("lt",function(a,c){return null===a||null===c?!1:a<c});return a}
function Gd(){var a=Dd();a.set("match",function(a,c){return null===a||null===c?!1:(new RegExp(c)).test(a)});return a}
function Fd(){var a=A();a.set("between",function(a,c){return null===a||null===c[0]||null===c[1]?!1:a.getTime()>=c[0].getTime()&&a.getTime()<=c[1].getTime()});a.set("eq",function(a,c){return(null===a?-1:a.getTime())==(null===c?-1:c.getTime())});a.set("gte",function(a,c){return null===a||null===c?!1:a.getTime()>=c.getTime()});a.set("gt",function(a,c){return null===a||null===c?!1:a.getTime()>c.getTime()});a.set("in",function(a,c){return c.some(function(c){return c.getTime()==a.getTime()})});a.set("lte",
function(a,c){return null===a||null===c?!1:a.getTime()<=c.getTime()});a.set("lt",function(a,c){return null===a||null===c?!1:a.getTime()<c.getTime()});a.set("neq",function(a,c){return(null===a?-1:a.getTime())!=(null===c?-1:c.getTime())});return a};function J(){this.h=this.B=null}var Id=[];J.prototype.getParent=g("B");J.prototype.fb=function(){for(var a=this;!ea(a.getParent());)a=a.getParent();return a};function Jd(a){for(var b=0;!ea(a.getParent());)b++,a=a.getParent();return b}function K(a){return a.h||Id}function Kd(a,b){return K(a)[b]||null}function Ld(a,b,c){b.B=a;null===a.h?a.h=[b]:a.h.splice(c,0,b)}function L(a,b){b.B=a;null===a.h?a.h=[b]:a.h.push(b)}
function Md(a,b){var c=a.h&&a.h[b];return c?(c.B=null,a.h.splice(b,1),0==a.h.length&&(a.h=null),c):null}J.prototype.removeChild=function(a){return Md(this,K(this).indexOf(a))};function Nd(a,b,c){Kd(a,c).B=null;b.B=a;a.h[c]=b}function Od(a,b,c){!1!==b.call(c,a)&&K(a).forEach(function(a){Od(a,b,c)})};function Pd(){J.call(this);this.pa=Qd++}t(Pd,J);var Qd=0;Pd.prototype.V=g("pa");function Rd(a,b,c){Pd.call(this);this.N=a;this.value=b;this.F=c;this.rc=Hd(Bd.wc(),this.N.H(),this.F);this.Ya=!1;this.$b=b}t(Rd,Pd);m=Rd.prototype;m.Hb=function(){var a=new Rd(this.N,this.value,this.F);a.$b=this.$b;a.qd(this.Ya);var b=this.V();a.pa=b;return a};m.eb=function(a){return null!=a?(a.push(this.N),a):[this.N]};m.qd=ba("Ya");function Sd(a){var b=!1;a.value instanceof Ad||(b="array"==da(a.value)?!a.value.some(function(a){return a instanceof Ad}):!0);if(!b)throw new D(501);}
m.eval=function(a){Sd(this);if("in"==this.F)return Td(this,a);var b=a.entries.filter(function(a){return this.rc(H(a,this.N),this.value)!=this.Ya},this);return new F(b,G(a))};m.bind=function(a){if(this.$b instanceof Ad){var b=this.$b.wa();if(a.length<=b)throw new D(510);this.value=a[b]}else"array"==da(this.$b)&&(this.value=this.$b.map(function(b){if(b instanceof Ad){var d=b.wa();if(a.length<=d)throw new D(510);return a[b.wa()]}return b}))};
function Td(a,b){var c=C(a.value),d=function(a){return null===a?!1:c.has(a)!=this.Ya}.bind(a),e=b.entries.filter(function(a){return d(H(a,this.N))},a);return new F(e,G(b))}m.toString=function(){return"value_pred("+this.N.m()+" "+this.F+(this.Ya?"(complement)":"")+" "+this.value+")"};function Ud(a){this.ca=a;this.Xc=this.Aa=null}function Vd(a,b){null===a.Aa&&null!=a.s&&(a.Aa=Wd(a.s));return a.Aa.get(b)||null}function Wd(a){var b=A();Od(a,function(a){b.set(a.V(),a)});return b}function Xd(a,b){b.s&&(a.s=b.s.Hb());a.Xc=b}Ud.prototype.bind=function(){return this};function Yd(a,b){var c=a.s;null!=c&&Od(c,function(a){a instanceof Rd&&a.bind(b)})};function Zd(a){Ud.call(this,a)}t(Zd,Ud);function $d(a){var b="";a.forEach(function(c,d){b+=c.N.m()+" ";b+=1==c.ib?"ASC":"DESC";d<a.length-1&&(b+=", ")});return b}Zd.prototype.$=function(){return C(this.b)};Zd.prototype.clone=function(){var a=new Zd(this.ca);Xd(a,this);this.f&&(a.f=this.f.slice());this.b&&(a.b=this.b.slice());a.W=this.W;a.M=this.M;this.L&&(a.L=this.L.slice());this.ja&&(a.ja=this.ja.slice());this.Ob&&(a.Ob=this.Ob);this.Vb&&(a.Vb=this.Vb);a.wb=this.wb;return a};
Zd.prototype.bind=function(a){Zd.Fb.bind.call(this,a);null!=this.Ob&&(this.W=a[this.Ob.wa()]);null!=this.Vb&&(this.M=a[this.Vb.wa()]);Yd(this,a);return this};function ae(a,b){this.Ba=a;this.aa=b}ae.prototype.fb=g("Ba");ae.prototype.$=g("aa");function be(a){var b=C();a.forEach(function(a){a.$().forEach(b.add.bind(b))});return b};function ce(a,b){this.global=a;this.Ja=a.i(gc);this.nd=b.map(function(a){return a.context});this.We=b.map(function(a){return a.$d});this.ye=be(this.We);this.nf=de(this);this.$a=y()}function de(a){return a.nd.some(function(a){return!(a instanceof Zd)})?1:0}m=ce.prototype;
m.exec=function(){function a(){var f=d.shift();if(f){var h=e[c.length];return f.fb().exec(b,h).then(function(b){c.push(b[0]);return a()})}return w()}var b=new bd(this.global,this.ye),c=[],d=this.We.slice(),e=this.nd;return a().then(function(){return this.Ja.zb(this.nf,b).ia()}.bind(this)).then(function(){this.Xd(c);return c}.bind(this),function(a){b.Eb();throw a;})};m.H=g("nf");m.$=g("ye");m.Kb=g("$a");m.V=function(){return ja(this)};m.Xd=aa();function ee(a,b){ce.call(this,a,b);this.Db=a.i(lc)}t(ee,ce);ee.prototype.getPriority=l(0);ee.prototype.Xd=function(a){this.nd.forEach(function(b,c){fe(this.Db,b,a[c])},this)};function ge(a,b){this.g=a;this.Db=a.i(lc);this.Ca=a.i(kc);this.gd=new zc(a);this.ob=b;var c=a.i(mc),d=this.ob.map(function(a){return c.table(a.getName())});this.aa=C(d);this.$a=y()}m=ge.prototype;m.exec=function(){this.gd.update(this.ob);this.Lc();return w()};m.H=l(1);m.$=g("aa");m.Kb=g("$a");m.V=function(){return ja(this)};m.getPriority=l(1);m.Lc=function(){var a=he(this.Db,this.aa);0!=a.length&&(a=new ee(this.g,a),ie(this.Ca,a))};function je(a){this.g=a;this.Ja=a.i(gc);this.Ca=a.i(kc)}je.prototype.Vd=function(a){a=new ge(this.g,a);ie(this.Ca,a)};function M(a,b){this.Xb=a;this.l=b;this.Sa=A()}r("lf.backstore.FirebaseRawBackStore",M);M.prototype.cd=g("l");M.prototype.dd=function(){throw new D(351);};function ke(a,b){var c=y(),d=a;b.length&&(d=a.child(b));d.once("value",function(a){c.resolve(a.val())},function(a){c.reject(a)});return c.ha}function le(a,b,c){function d(a){a?e.reject(a):e.resolve()}c=c||!1;var e=y();c?a.set(b,d):a.update(b,d);return e.ha}
M.prototype.Ea=function(a){return ke(this.l,"@rev/R").then(function(a){this.La=a;return ke(this.l,"@table")}.bind(this)).then(function(b){var c=0,d;for(d in b)this.Sa.set(d,b[d]),b[d]>c&&(c=b[d]);a.ra().forEach(function(a){this.Sa.has(a.getName())||(b[a.getName()]=++c)},this);d=this.l.child("@table");return le(d,b)}.bind(this))};
function me(a,b,c){var d=a.Sa.get(b);return null!=d?function(){var a={},b=y();this.l.orderByChild("T").equalTo(d).once("value",function(d){d.forEach(function(b){var d=c(b.val());a[parseInt(b.key(),10)]=d});b.resolve(a)});return b.ha}.call(a).then(function(a){a["@rev"]={R:++this.La};return le(this.l,a)}.bind(a)):w()}M.prototype.pc=function(a){return me(this,a,l(null)).then(function(){this.Sa.delete(a);return le(this.l.child("@table/"+a),null,!0)}.bind(this))};M.prototype.dropTable=M.prototype.pc;
M.prototype.kc=function(a,b,c){return me(this,a,function(a){var e=a.P;e[b]=c;return{R:this.La+1,T:a.T,P:e}}.bind(this))};M.prototype.addTableColumn=M.prototype.kc;M.prototype.qc=function(a,b){return me(this,a,function(a){var d=a.P;delete d[b];return{R:this.La+1,T:a.T,P:d}}.bind(this))};M.prototype.dropTableColumn=M.prototype.qc;M.prototype.Kc=function(a,b,c){return me(this,a,function(a){var e=a.P;e[c]=e[b];delete e[b];return{R:this.La+1,T:a.T,P:e}}.bind(this))};M.prototype.renameTableColumn=M.prototype.Kc;
M.prototype.rb=function(){throw new D(351);};M.prototype.createRow=M.prototype.rb;M.prototype.zc=g("Xb");M.prototype.getVersion=M.prototype.zc;M.prototype.bc=function(a){var b=y();a=this.Sa.get(a);this.l.orderByChild("T").equalTo(a).once("value",function(a){var d=[];a.forEach(function(a){d.push(a.val().P)});b.resolve(d)});return b.ha};M.prototype.dump=function(){var a={},b=Yb(this.Sa).map(function(b){return this.bc(b).then(function(d){a[b]=d})}.bind(this));return eb(b).then(function(){return a})};
M.prototype.dump=M.prototype.dump;function ne(a,b,c){$b.call(this,c,b);this.l=a}t(ne,$b);ne.prototype.G=function(a){return this.l.xc(a)};
ne.prototype.mc=function(){var a=this.Oa.ob;if(0==a.size)this.Y.resolve();else{var b=this.l.La+1;this.l.La=b;var c={"@rev":{R:b}};a.forEach(function(a,e){var f=this.l.Sa.get(e);a.ta.forEach(function(a,d){c[d]={R:b,T:f,P:a.o}});a.na.forEach(function(a,d){c[d]={R:b,T:f,P:a[1].o}});a.va.forEach(function(a,b){c[b]=null})},this);this.l.l.update(c,function(c){null===c?this.Y.resolve():(this.l.La=b-1,c=B(a).map(function(a){return oe(this.l,a.getName())},this),eb(c).then(this.Y.reject.bind(this.Y),this.Y.reject.bind(this.Y)))}.bind(this))}return this.Y.ha};function pe(){this.ua=A()}function qe(a,b){if(0==b.length)return B(a.ua);var c=[];b.forEach(function(a){a=this.ua.get(a)||null;null===a||c.push(a)},a);return c}pe.prototype.getData=g("ua");pe.prototype.get=function(a){return w(qe(this,a))};function re(a,b){b.forEach(function(a){this.ua.set(a.id(),a)},a)}pe.prototype.put=function(a){re(this,a);return w()};function se(a,b){0==b.length||b.length==a.ua.size?a.ua.clear():b.forEach(function(a){this.ua.delete(a)},a)}
pe.prototype.remove=function(a){se(this,a);return w()};function te(a){return 0==a.ua.size?0:Yb(a.ua).reduce(function(a,c){return a>c?a:c},0)};function ue(a,b){this.j=a;this.tf=b;this.Jc=A();this.La=-1;this.K=A();this.Sa=A();this.Ad=null}m=ue.prototype;
m.Ea=function(a){this.l=this.tf.child(this.j.name());var b=a||function(){return w()};return ke(this.l,"@db/version").then(function(a){return null===a?le(this.l,ve(this),!0).then(function(){var a=new M(0,this.l);return b(a)}.bind(this)):a==this.j.version()?ke(this.l,"@rev/R").then(function(a){this.La=a;return ke(this.l,"@table")}.bind(this)).then(function(a){for(var b in a)this.Sa.set(b,a[b]);a=this.j.ra().map(function(a){return oe(this,a.getName())},this);return eb(a)}.bind(this)).then(function(){we(this);
xe(this);return w()}.bind(this)):this.Yd(a,b).then(function(){return this.Ea()}.bind(this))}.bind(this))};m.Yd=function(a,b){var c=new M(a,this.l);return c.Ea(this.j).then(function(){return w()}.bind(this)).then(function(){return b(c)}).then(function(){var a=this.l.child("@db");return le(a,{version:this.j.version()},!0)}.bind(this))};
function xe(a){a.l.off();a.l.on("child_removed",a.ig.bind(a));a.Bd&&(a.Bd.off(),a.Jc.clear());a.Bd=a.l.orderByChild("R").startAt(a.La+1);a.Bd.on("value",a.Vd.bind(a))}function we(a){pb=B(a.K).map(function(a){return te(a)}).reduce(function(a,c){return a>c?a:c},0)+1}m.ig=function(a){var b=a.val(),c=this.Jc.get(b.T)||null;null===c&&(c=C(),this.Jc.set(b.T,c));c.add(parseInt(a.key(),10))};
m.Vd=function(a){var b=a.child("@rev/R").val();null!=b&&b!=this.La&&(this.La=b,a=ye(this,a),a.forEach(function(a){var b=this.K.get(a.getName()),e=Yb(a.va);0<e.length&&se(b,e);var f=B(a.ta);a.na.forEach(function(a){f.push(a[1])});re(b,f)},this),0<a.length&&this.Ec(a),xe(this))};
function ye(a,b){var c=C(),d=A();a.Sa.forEach(function(a,b){var h=this.K.get(b),k=new $c(b);if(this.Jc.has(a)){var n=nc(this.Jc.get(a));n.forEach(function(a){c.add(a)});qe(h,n).forEach(function(a){k.delete(a)})}d.set(a,k)}.bind(a));b.forEach(function(a){if("@rev"!=a.key()){var b=parseInt(a.key(),10);if(!c.has(b)){a=a.val();var h=d.get(a.T),k=this.K.get(h.getName());k.getData().has(b)?h.modify([qe(k,[b])[0],new z(b,a.P)]):h.add(new z(b,a.P))}}}.bind(a));return B(d).filter(function(a){return!a.Xf()})}
function oe(a,b){var c=y(),d=a.Sa.get(b);a.l.orderByChild("T").equalTo(d).once("value",function(a){var d=new pe,h=[];a.forEach(function(a){h.push(new z(parseInt(a.key(),10),a.val().P))});re(d,h);this.K.set(b,d);c.resolve()}.bind(a));return c.ha}function ve(a){var b={};b["@db"]={version:a.j.version()};b["@rev"]={R:1};a.La=1;b["@table"]={};a.j.ra().forEach(function(a,d){var e=a.getName();b["@table"][e]=d;this.K.set(e,new pe);this.Sa.set(e,d)},a);return b}m.zb=function(a,b){return new ne(this,a,b)};
m.xc=function(a){var b=this.K.get(a)||null;if(null!==b)return b;throw new D(101,a);};m.close=aa();m.subscribe=ba("Ad");m.Ec=function(a){null!=this.Ad&&this.Ad(a)};function N(a,b,c,d){this.l=b;this.Ua=c;this.Xb=a;this.Uc=d}r("lf.backstore.IndexedDBRawBackStore",N);N.prototype.cd=g("l");N.prototype.getRawDBInstance=N.prototype.cd;N.prototype.dd=g("Ua");N.prototype.getRawTransaction=N.prototype.dd;N.prototype.pc=function(a){return new v(function(b,c){try{this.l.deleteObjectStore(a)}catch(d){c(d);return}b()},this)};N.prototype.dropTable=N.prototype.pc;
function ze(a,b,c,d){return new v(function(a,f){var h;try{var k=this.Ua.objectStore(b);h=k.openCursor()}catch(n){f(n);return}h.onsuccess=function(){var b=h.result;b?(c(b),b.continue()):(d(k),a())};h.onerror=f},a)}function Ae(a){var b=null;return b=a instanceof ArrayBuffer?tb(a):a instanceof Date?a.getTime():a}
function Be(a,b,c){function d(a){var b=tc(a.value),d=b.o,e;for(e in d){var x=rb(d[e]);c(x);d[e]=x.Ia()}a.update(b.Ia())}function e(a){var b=rb(a.value);c(b);a.update(b.Ia())}return ze(a,b,a.Uc?d:e,aa())}N.prototype.kc=function(a,b,c){var d=Ae(c);return Be(this,a,function(a){a.o[b]=d})};N.prototype.addTableColumn=N.prototype.kc;N.prototype.qc=function(a,b){return Be(this,a,function(a){delete a.o[b]})};N.prototype.dropTableColumn=N.prototype.qc;
N.prototype.Kc=function(a,b,c){return Be(this,a,function(a){a.o[c]=a.o[b];delete a.o[b]})};N.prototype.renameTableColumn=N.prototype.Kc;function Ce(a,b){var c=[];return new v(function(a,e){var f;try{f=this.Ua.objectStore(b).openCursor()}catch(h){e(h);return}f.onsuccess=function(){var b=f.result;if(b){if(this.Uc){var e;e=tc(b.value).o;for(var n in e)c.push(e[n])}else c.push(b.value);b.continue()}else a(c)}.bind(this);f.onerror=e},a)}N.prototype.rb=function(a){var b={},c;for(c in a)b[c]=Ae(a[c]);return sb(b)};
N.prototype.createRow=N.prototype.rb;N.prototype.zc=g("Xb");N.prototype.getVersion=N.prototype.zc;N.prototype.dump=function(){for(var a=this.l.objectStoreNames,b=[],c=0;c<a.length;++c){var d=a.item(c);b.push(this.bc(d))}return eb(b).then(function(b){var c={};b.forEach(function(b,d){c[a.item(d)]=b});return c})};N.prototype.dump=N.prototype.dump;N.prototype.bc=function(a){return Ce(this,a).then(function(a){return a.map(function(a){return a.value})})};function De(a,b){this.ba=a;this.Ib=b}m=De.prototype;m.get=function(a){if(0==a.length)return this.vc();a=a.map(function(a){return new v(function(c,d){var e;try{e=this.ba.get(a)}catch(f){d(f);return}e.onerror=d;e.onsuccess=function(a){c(this.Ib(a.target.result))}.bind(this)},this)},this);return eb(a)};
m.vc=function(){return new v(function(a,b){var c=[],d;try{d=this.ba.openCursor()}catch(e){b(e);return}d.onerror=b;d.onsuccess=function(){var b=d.result;b?(c.push(this.Ib(b.value)),b.continue()):a(c)}.bind(this)},this)};m.Qb=function(a){return new v(function(b,c){var d;try{d=a()}catch(e){c(e);return}d.onsuccess=b;d.onerror=c},this)};m.put=function(a){if(0==a.length)return w();a=a.map(function(a){return this.Qb(function(){return this.ba.put(a.Ia())}.bind(this))},this);return eb(a)};
m.remove=function(a){return new v(function(b,c){var d=this.ba.count();d.onsuccess=function(d){if(0==a.length||d.target.result==a.length)return this.Qb(function(){return this.ba.clear()}.bind(this)).then(b,c);d=a.map(function(a){return this.Qb(function(){return this.ba.delete(a)}.bind(this))},this);eb(d).then(b,c)}.bind(this);d.onerror=c},this)};function Ee(a,b,c,d,e){$b.call(this,c,d);this.g=a;this.Ua=b;this.Uc=e;this.Ua.oncomplete=this.Y.resolve.bind(this.Y);this.Ua.onabort=this.Y.reject.bind(this.Y)}t(Ee,$b);Ee.prototype.G=function(a,b,c){return this.Uc?(c=null!=c?c:0,a=this.Ua.objectStore(a),new uc(a,b,0==c?qa(wc,this.g):xc)):new De(this.Ua.objectStore(a),b)};Ee.prototype.mc=function(){return this.Y.ha};function Fe(a,b){this.g=a;this.j=b;this.Vc=b.Xe().Hf||!1}m=Fe.prototype;
m.Ea=function(a){var b=window.indexedDB||window.mozIndexedDB||window.webkitIndexedDB||window.msIndexedDB;if(null==b)throw new D(352);var c=a||function(){return w()};return new v(function(a,e){var f;try{f=b.open(this.j.name(),this.j.version())}catch(h){e(h);return}f.onerror=e;f.onupgradeneeded=function(a){Ge(this,c,a).then(aa(),e)}.bind(this);f.onsuccess=function(b){this.l=b.target.result;this.fe().then(function(b){pb=b+1;a(this.l)}.bind(this))}.bind(this)},this)};
function Ge(a,b,c){var d=c.target.result,e=c.target.transaction;c=new N(c.oldVersion,d,e,a.Vc);He(d);a.j.ra().forEach(qa(a.Cf,d,e),a);return b(c)}function He(a){for(var b=[],c=0;c<a.objectStoreNames.length;++c){var d=a.objectStoreNames.item(c);-1!=d.indexOf(".")&&b.push(d)}b.forEach(function(b){try{a.deleteObjectStore(b)}catch(c){}})}
m.Cf=function(a,b,c){a.objectStoreNames.contains(c.getName())||a.createObjectStore(c.getName(),{keyPath:"id"});c.xb()&&(c.xa().forEach(function(c){this.oc(a,b,c.m(),"btree")},this),this.oc(a,b,Ie(c),"rowid"))};m.oc=function(a,b,c,d){a.objectStoreNames.contains(c)||(a.createObjectStore(c,{keyPath:"id"}),a=b.objectStore(c),(this.Vc?new uc(a,rb,xc):new De(a,rb)).put([new vb(new ub(d))]))};
m.zb=function(a,b){var c=Yb(b.$());cd(b).forEach(function(a){c.push(a)});var d=this.l.transaction(c,0==a?"readonly":"readwrite");return new Ee(this.g,d,b,a,this.Vc)};
m.fe=function(a){function b(){if(0==d.length)return w();var a=d.shift();return c(a).then(b)}function c(b){return new v(function(c,d){var S;try{S=(a||e.transaction([b])).objectStore(b).openCursor(null,"prev")}catch(oa){d(oa);return}S.onsuccess=function(a){(a=a.target.result)&&(f=Math.max(f,h(a)));c(f)};S.onerror=function(){c(f)}})}var d=this.j.ra().map(function(a){return a.getName()}),e=this.l,f=0,h=function(a){return this.Vc?(a=tc(a.value),Object.keys(a.o).reduce(function(a,b){return Math.max(a,b)},
0)):a.key}.bind(this);return new v(function(a){b().then(function(){a(f)})})};m.close=function(){this.l.close()};m.xc=function(){throw new D(511);};m.subscribe=aa();m.Ec=aa();function Je(a,b,c){$b.call(this,c,b);this.ba=a;0==b&&this.Y.resolve()}t(Je,$b);Je.prototype.G=function(a){return this.ba.xc(a)};Je.prototype.mc=function(){this.Y.resolve();return this.Y.ha};function Ke(a){this.j=a;this.K=A()}m=Ke.prototype;m.Ea=function(){this.j.ra().forEach(this.Uf,this);return w()};m.xc=function(a){var b=this.K.get(a)||null;if(null===b)throw new D(101,a);return b};m.zb=function(a,b){return new Je(this,a,b)};function Le(a,b){if(!a.K.has(b)){var c=new pe;a.K.set(b,c);return c}return null}m.Uf=function(a){Le(this,a.getName());a.xb()&&(a.xa().forEach(function(a){this.oc(a.m(),"btree")},this),this.oc(Ie(a),"rowid"))};m.oc=function(a,b){var c=Le(this,a);null===c||c.put([new vb(new ub(b))])};
m.close=aa();m.subscribe=aa();m.Ec=aa();function Me(a){Ke.call(this,a);this.jd=null}t(Me,Ke);Me.prototype.subscribe=function(a){null===this.jd&&(this.jd=a)};Me.prototype.Ec=function(a){null===this.jd||this.jd(a)};function Ne(a,b,c){this.Ua=a;this.u=b;this.Ib=c}Ne.prototype.get=function(a){var b=this.Ib;return Oe(this.Ua,"SELECT id, value FROM "+this.u+" "+(0==a.length?"":"WHERE id IN ("+a.join(",")+")"),[],function(a){for(var d=a.rows.length,e=Array(d),f=0;f<d;++f)e[f]=b({id:a.rows.item(f).id,value:JSON.parse(a.rows.item(f).value)});return e})};
Ne.prototype.put=function(a){if(0==a.length)return w();var b="INSERT OR REPLACE INTO "+this.u+"(id, value) VALUES (?, ?)";a.forEach(function(a){Oe(this.Ua,b,[a.id(),JSON.stringify(a.o)])},this);return w()};Ne.prototype.remove=function(a){Oe(this.Ua,"DELETE FROM "+this.u+" "+(0==a.length?"":"WHERE id IN ("+a.join(",")+")"),[]);return w()};function Pe(a,b,c){$b.call(this,b,c);this.l=a;this.K=A();this.Dd=[]}t(Pe,$b);function Qe(a){return a.replace(".","__d__").replace("#","__s__")}Pe.prototype.G=function(a,b){var c=this.K.get(a)||null;null===c&&(c=new Ne(this,Qe(a),b),this.K.set(a,c));return c};function Oe(a,b,c,d){var e=y();a.Dd.push({wg:b,lg:c,transform:d,Y:e});return e.ha}
Pe.prototype.mc=function(){var a=null,b=this.Y.reject.bind(this.Y),c=function(a,b){this.Y.reject(b)}.bind(this),d=[],e=function(b,h){if(null!==a){var k=h;null!=a.transform&&null!=h&&(k=a.transform(h));d.push(k);a.Y.resolve(k)}0<this.Dd.length?(a=k=this.Dd.shift(),b.executeSql(k.wg,k.lg,e,c)):this.Y.resolve(d)}.bind(this);0==this.mf?this.l.readTransaction(e,b):this.l.transaction(e,b);return this.Y.ha};function O(a,b,c){this.l=c;this.g=a;this.Xb=b}r("lf.backstore.WebSqlRawBackStore",O);O.prototype.cd=g("l");O.prototype.getRawDBInstance=O.prototype.cd;O.prototype.dd=function(){throw new D(356);};O.prototype.getRawTransaction=O.prototype.dd;function Re(a){return new Pe(a.l,new bd(a.g,C()),1)}O.prototype.pc=function(a){var b=Re(this);Oe(b,"DROP TABLE "+a,[]);return b.ia()};O.prototype.dropTable=O.prototype.pc;
O.prototype.bc=function(a){var b=Re(this);Oe(b,"SELECT id, value FROM "+a,[]);return b.ia().then(function(a){for(var b=a[0].rows.length,e=Array(b),f=0;f<b;++f)e[f]={id:a[0].rows.item(f).id,value:JSON.parse(a[0].rows.item(f).value)};return w(e)})};function Se(a,b,c){var d=Re(a),e="UPDATE "+b+" SET value=? WHERE id=?";return a.bc(b).then(function(a){a.forEach(function(a){a=c(a);Oe(d,e,[JSON.stringify(a.value),a.id])});return d.ia()})}
O.prototype.kc=function(a,b,c){var d=Ae(c);return Se(this,a,function(a){a.value[b]=d;return a})};O.prototype.addTableColumn=O.prototype.kc;O.prototype.qc=function(a,b){return Se(this,a,function(a){delete a.value[b];return a})};O.prototype.dropTableColumn=O.prototype.qc;O.prototype.Kc=function(a,b,c){return Se(this,a,function(a){a.value[c]=a.value[b];delete a.value[b];return a})};O.prototype.renameTableColumn=O.prototype.Kc;O.prototype.rb=function(a){var b={},c;for(c in a)b[c]=Ae(a[c]);return sb(b)};
O.prototype.createRow=O.prototype.rb;O.prototype.zc=g("Xb");O.prototype.getVersion=O.prototype.zc;function Te(a){Oe(a,'SELECT tbl_name FROM sqlite_master WHERE type="table"',[],function(a){for(var c=Array(a.rows.length),d=0;d<c.length;++d)c[d]=a.rows.item(d).tbl_name;return c})}
O.prototype.dump=function(){var a=y(),b=Re(this);Te(b);var c={};b.ia().then(function(b){b=b[0].filter(function(a){return"__lf_ver"!=a&&"__WebKitDatabaseInfoTable__"!=a}).map(function(a){return this.bc(a).then(function(b){c[a]=b})},this);eb(b).then(function(){a.resolve(c)})}.bind(this));return a.ha};O.prototype.dump=O.prototype.dump;function Ue(a,b,c){this.g=a;this.j=b;this.vg=c||4194304}function Ve(a){return new bd(a.g,C())}m=Ue.prototype;m.Ea=function(a){if(null==window.openDatabase)throw new D(353);var b=a||function(){return w()};return new v(function(a,d){try{var e=window.openDatabase(this.j.name(),"",this.j.name(),this.vg);if(null!=e)this.l=e,We(this,b).then(a,d);else throw new D(354);}catch(f){d(f)}},this)};
function We(a,b){var c=y(),d=new Pe(a.l,Ve(a),1);Oe(d,"CREATE TABLE IF NOT EXISTS __lf_ver(id INTEGER PRIMARY KEY, v INTEGER)",[]);Oe(d,"SELECT v FROM __lf_ver WHERE id = 0",[]);d.ia().then(function(a){var d=0;a[1].rows.length&&(d=a[1].rows.item(0).v);d<this.j.version()?this.Yd(b,d).then(c.resolve.bind(c)):d>this.j.version()?c.reject(new D(108)):c.resolve()}.bind(a));return c.ha}m.zb=function(a,b){if(null!=this.l)return new Pe(this.l,b,a);throw new D(2);};m.close=aa();
m.xc=function(){throw new D(512);};m.subscribe=function(){throw new D(355);};m.Ec=function(){throw new D(355);};m.Yd=function(a,b){var c=y();Xe(this).then(function(){a(new O(this.g,b,this.l)).then(function(){return this.fe()}.bind(this)).then(c.resolve.bind(c))}.bind(this),c.reject.bind(c));return c.ha};
function Xe(a){var b=a.j.ra(),c=new Pe(a.l,Ve(a),1),d=new Pe(a.l,Ve(a),1);Oe(c,"INSERT OR REPLACE INTO __lf_ver VALUES (0, ?)",[a.j.version()]);Te(c);return c.ia().then(function(a){function c(a,b){Oe(d,"INSERT INTO "+a+"(id, value) VALUES(?, ?)",[-1,JSON.stringify(qb(new vb(new ub(b))))])}var h=a[1];h.filter(function(a){return-1!=a.indexOf("__d__")}).forEach(function(a){Oe(d,"DROP TABLE "+a,[])});var k=[],n=[],x=[];b.map(function(a){-1==h.indexOf(a.getName())&&k.push(a.getName());a.xb&&(a.xa().forEach(function(a){a=
Qe(a.m());k.push(a);n.push(a)}),a=Qe(Ie(a)),k.push(a),x.push(a))});k.forEach(function(a){Oe(d,"CREATE TABLE "+a+"(id INTEGER PRIMARY KEY, value TEXT)",[])});n.forEach(function(a){c(a,"btree")});x.forEach(function(a){c(a,"rowid")});return d.ia()})}
m.fe=function(){var a=0,b=y(),c=function(b){var c=new Pe(this.l,Ve(this),0);Oe(c,"SELECT MAX(id) FROM "+b,[]);return c.ia().then(function(b){b=b[0].rows.item(0)[0];a=Math.max(b,a)})}.bind(this),d=this.j.ra().map(function(a){return c(a.getName())});eb(d).then(function(){b.resolve(a)},function(a){b.reject(a)});return b.ha};function Ye(a){this.X=A();this.Wb=A();a.ra().forEach(function(a){this.Wb.set(a.getName(),C())},this)}m=Ye.prototype;m.set=function(a,b){this.X.set(b.id(),b);this.Wb.get(a).add(b.id())};m.Tb=function(a,b){var c=this.Wb.get(a);b.forEach(function(a){this.X.set(a.id(),a);c.add(a.id())},this)};m.get=function(a){return this.X.get(a)||null};function Ze(a,b){return b.map(function(a){return this.get(a)},a)}
m.Xa=function(a,b,c){var d=[],e=Math.min(b,c),f=Math.max(b,c);a=this.Wb.get(a);if(a.size<f-e)a.forEach(function(a){a>=e&&a<=f&&(a=this.X.get(a),d.push(a))},this);else for(b=e;b<=f;++b)a.has(b)&&(c=this.X.get(b),d.push(c));return d};m.remove=function(a,b){this.X.delete(b);this.Wb.get(a).delete(b)};m.Eg=function(a){return null!=a?this.Wb.get(a).size:this.X.size};m.clear=function(){this.X.clear();this.Wb.clear()};function $e(a,b,c){var d=0,e=a.length;for(c=c||af;d<e;){var f=d+e>>1;0>c(a[f],b)?d=f+1:e=f}return d==e&&a[d]==b?d:~d}function af(a,b){return a-b}function bf(a,b,c){c=$e(a,b,c);return 0>c?(a.splice(-(c+1),0,b),!0):!1};function cf(a,b,c,d){a=b?a.reverse():a;if(null==c&&null==d)return a;c=Math.min(q(c)?c:a.length,a.length);if(0==c)return[];d=Math.min(d||0,a.length);return a.slice(d,d+c)};function df(){this.oa=0}df.prototype.add=function(a,b){this.oa+=b};df.prototype.remove=function(a,b){this.oa-=b};df.prototype.clear=function(){this.oa=0};function ef(a,b){a.clear();b.forEach(function(a){this.oa+=a.oa},a)};function ff(a,b,c,d){this.u=a;this.U=b;this.le=c;this.mb=new df;if(d){a=511;a*=a*a;if(d.length>=a)throw new D(6,a);d=gf(this,d);this.qa=d=hf(d)}else this.clear()}var jf=[];m=ff.prototype;m.getName=g("u");m.toString=function(){return this.qa.toString()};m.add=function(a,b){this.qa=this.qa.vb(a,b)};m.set=function(a,b){this.qa=this.qa.vb(a,b,!0)};m.remove=function(a,b){this.qa=this.qa.remove(a,b)};m.get=function(a){return this.qa.get(a)};
m.Yc=function(a){if(null==a)return this.Ma().oa;if(a instanceof gd){if(id(a))return this.Ma().oa;if(md(a))return this.get(a.b).length}return this.Xa([a]).length};m.Ma=g("mb");m.vc=function(a,b,c,d){c=Array(a);this.qa.fill({offset:b?this.mb.oa-a-d:d,count:a,ie:0},c);return b?c.reverse():c};
m.Xa=function(a,b,c,d){var e=kf(this.qa).c[0];if(!q(e)||0==c)return jf;b=b||!1;c=null!=c?Math.min(c,this.mb.oa):this.mb.oa;d=d||0;var f=Math.min(Math.max(this.mb.oa-d,0),c);if(0==f)return jf;if(!q(a)||1==a.length&&a[0]instanceof gd&&id(a[0]))return this.vc(f,b,c,d);a=this.U.hf(a);var h=Array(b?this.mb.oa:f),k={count:0,W:h.length,reverse:b,M:d};a.forEach(function(a){for(var b=this.U.od(a),b=this.U.Nd(a)?e:b[0],b=mf(this.qa,b),c=k.count,d=0;null!=b&&k.count<k.W;)b.Xa(a,k,h),k.count!=c?(d=0,c=k.count):
d++,b=2==d?null:b.next()},this);h.splice(k.count,f-k.count);return b?cf(h,b,c,d):h};m.clear=function(){this.qa=nf(this);this.mb.clear()};m.cb=function(a){return this.qa.cb(a)};m.min=function(){return this.Dc(this.U.min.bind(this.U))};m.max=function(){return this.Dc(this.U.max.bind(this.U))};m.Dc=function(a){var b=kf(this.qa),c=of(this.qa);if(0==b.c.length&&0==c.c.length)return null;var d=b.c[0],b=b.A[0],e=c.c[c.c.length-1],c=c.A[c.c.length-1];return 1==a(d,e)?[d,this.le?[b]:b]:[e,this.le?[c]:c]};
m.Ga=g("le");m.nc=g("U");m.Rd=function(a,b){return null!=a?-1==this.U.compare(a,b):!1};m.Na=function(a,b){return null!=a?0==this.U.compare(a,b):!1};m.Ia=function(){for(var a=[],b=kf(this.qa);b;)a.push(new z(b.pa,[b.c,b.A])),b=b.ya;return a};function pf(a,b,c,d){a=new ff(b,a,c);d=qf(d,a);a.qa=d;return a}function rf(a,b){this.pa=a;this.D=b;this.gb=0;this.ya=this.yb=this.B=null;this.c=[];this.A=[];this.h=[]}function nf(a){return new rf(pb++,a)}function P(a){return 0==a.gb}m=rf.prototype;m.next=g("ya");
function sf(a){function b(a){return null!=a?a.pa.toString():"_"}var c=a.pa+"["+a.c.join("|")+"]",d=a.h.map(function(a){return a.pa}).join("|"),e=a.A.join("/"),f=b(a.yb)+"{",f=P(a)?f+e:f+d,f=f+"}"+b(a.B);a.ya&&(a=sf(a.ya),c=c+"  "+a[0],f=f+"  "+a[1]);return[c,f]}m.toString=function(){var a="",b=sf(this),a=a+(b[0]+"\n"+b[1]+"\n");this.h.length&&(a+=this.h[0].toString());return a};function kf(a){return P(a)?a:kf(a.h[0])}function of(a){return P(a)?a:of(a.h[a.h.length-1])}
function tf(a,b){b&&(b.yb=a);a&&(a.ya=b)}function gf(a,b){for(var c=b.length,d=0,e=nf(a),f=e;0<c;){var h=768<=c?511:257<=c&&511>=c?c:257,k=b.slice(d,d+h);e.c=k.map(function(a){return a.key});e.A=k.map(function(a){return a.value});d+=h;c-=h;0<c&&(h=nf(e.D),tf(e,h),e=h)}return f}function uf(a){var b=a[0],c=nf(b.D);c.gb=b.gb+1;c.h=a;for(b=0;b<a.length;++b)a[b].B=c,0<b&&c.c.push(a[b].c[0]);return c}
function hf(a){var b=a,c=[];do c.push(b),b=b.ya;while(b);if(512>=c.length)b=uf(c);else{var d=c.length,e=0,b=nf(a.D);for(b.gb=a.gb+2;0<d;){a=768<=d?511:257<=d&&511>=d?d:257;var f=c.slice(e,e+a),h=uf(f);h.B=b;b.h.length&&(b.c.push(f[0].c[0]),tf(b.h[b.h.length-1],h));b.h.push(h);e+=a;d-=a}}return b}m.get=function(a){var b=vf(this,a);if(P(this)){var c=jf;this.D.Na(this.c[b],a)&&(c=c.concat(this.A[b]));return c}b=this.D.Na(this.c[b],a)?b+1:b;return this.h[b].get(a)};
m.cb=function(a){var b=vf(this,a);return this.D.Na(this.c[b],a)?!0:P(this)?!1:this.h[b].cb(a)};m.remove=function(a,b){wf(this,a,-1,b);if(null==this.B){var c=this;1==this.h.length&&(c=this.h[0],c.B=null);return c}return this};function xf(a){return P(a)?a.c[0]:xf(a.h[0])}function yf(a){a.c=[];for(var b=1;b<a.h.length;++b)a.c.push(xf(a.h[b]))}
function wf(a,b,c,d){var e=vf(a,b),f=P(a);if(!f){var h=a.D.Na(a.c[e],b)?e+1:e;if(wf(a.h[h],b,h,d))yf(a);else return!1}else if(!a.D.Na(a.c[e],b))return!1;if(a.c.length>e&&a.D.Na(a.c[e],b)){if(q(d)&&!a.D.Ga()&&f&&(h=a.A[e],d=$e(h,d,void 0),0>d?d=!1:(h.splice(d,1),d=!0),d&&a.D.Ma().remove(b,1),a.A[e].length))return!1;a.c.splice(e,1);f&&(f=a.D.Ga()?1:a.A[e].length,a.A.splice(e,1),a.D.Ma().remove(b,f))}if(256>a.c.length&&null!=a.B){a:{b=null;if(a.ya&&256<a.ya.c.length)b=a.ya,e=d=0,f=a.c.length+1;else if(a.yb&&
256<a.yb.c.length)b=a.yb,d=a.yb.c.length-1,e=P(a)?d:d+1,f=0;else{b=!1;break a}a.c.splice(f,0,b.c[d]);b.c.splice(d,1);d=P(a)?a.A:a.h;h=null;P(a)?h=b.A:(h=b.h,h[e].B=a);d.splice(f,0,h[e]);h.splice(e,1);P(b)||(yf(b),yf(a));b=!0}b||zf(a,c)}return!0}
function zf(a,b){var c,d,e;a.ya&&511>a.ya.c.length?(c=a.ya,e=d=0):a.yb&&(c=a.yb,d=c.c.length,e=P(c)?c.A.length:c.h.length);d=[d,0].concat(a.c);Array.prototype.splice.apply(c.c,d);d=null;P(a)?d=a.A:(d=a.h,d.forEach(function(a){a.B=c}));d=[e,0].concat(d);Array.prototype.splice.apply(P(c)?c.A:c.h,d);tf(a.yb,a.ya);P(c)||yf(c);-1!=b&&(a.B.c.splice(b,1),a.B.h.splice(b,1))}
m.vb=function(a,b,c){var d=vf(this,a);if(P(this)){if(this.D.Na(this.c[d],a)){if(c)this.D.Ma().remove(a,this.D.Ga()?1:this.A[d].length),this.A[d]=this.D.Ga()?b:[b];else{if(this.D.Ga())throw new D(201);if(!bf(this.A[d],b))throw new D(109);}this.D.Ma().add(a,1);return this}this.c.splice(d,0,a);this.A.splice(d,0,this.D.Ga()?b:[b]);this.D.Ma().add(a,1);512==this.c.length?(d=nf(this.D),a=nf(this.D),a.gb=1,a.c=[this.c[256]],a.h=[this,d],a.B=this.B,this.B=a,d.c=this.c.splice(256),d.A=this.A.splice(256),d.B=
a,tf(d,this.ya),tf(this,d),d=a):d=this;return d}d=this.D.Na(this.c[d],a)?d+1:d;a=this.h[d].vb(a,b,c);P(a)||1!=a.c.length||(this.c.splice(d,0,a.c[0]),a.h[1].B=this,a.h[0].B=this,this.h.splice(d,1,a.h[1]),this.h.splice(d,0,a.h[0]));return 512==this.c.length?Af(this):this};function Af(a){var b=nf(a.D),c=nf(a.D);b.B=a.B;b.gb=a.gb+1;b.c=[a.c[256]];b.h=[a,c];a.c.splice(256,1);c.B=b;c.gb=a.gb;c.c=a.c.splice(256);c.h=a.h.splice(257);c.h.forEach(function(a){a.B=c});a.B=b;tf(c,a.ya);tf(a,c);return b}
function vf(a,b){for(var c=0,d=a.c.length;c<d;){var e=c+d>>1;a.D.Rd(a.c[e],b)?c=e+1:d=e}return c}function mf(a,b){if(!P(a)){var c=vf(a,b);a.D.Na(a.c[c],b)&&c++;return mf(a.h[c],b)}return a}
m.Xa=function(a,b,c){function d(a){return a[0]?a[1]?0:1:-1}var e=this.D.nc(),f=0,h=this.c.length-1,k=this.c,n=d(e.qb(k[f],a)),x=d(e.qb(k[h],a));if(1!=n&&(-1!=n||-1!=x)){var S=function(a,b){var c=a+b>>1;return c==a?c+1:c},oa=function(b,c,f){if(b>=c)return 0==f?c:-1;var h=d(e.qb(k[b],a));if(0==h)return b;if(1==h)return-1;h=S(b,c);if(h==c)return 0==f?c:-1;var n=d(e.qb(k[h],a));return 0==n?oa(b,h,n):-1==n?oa(h+1,c,f):oa(b+1,h,n)},Ya=function(b,c){if(b>=c)return b;var f=d(e.qb(k[c],a));if(0==f)return c;
if(-1==f)return b;f=S(b,c);if(f==c)return b;var h=d(e.qb(k[f],a));return 0==h?Ya(f,c):1==h?Ya(b,f-1):-1};0!=n&&(f=oa(f+1,h,x));-1!=f&&(h=Ya(f,h),-1!=h&&h>=f&&Bf(this,b,c,f,h+1))}};function Bf(a,b,c,d,e){for(;d<e&&(b.reverse||!(b.count>=b.W));++d)if(a.D.Ga())!b.reverse&&b.M?b.M--:c[b.count++]=a.A[d];else for(var f=0;f<a.A[d].length&&b.count<c.length;++f)!b.reverse&&b.M?b.M--:c[b.count++]=a.A[d][f]}
m.fill=function(a,b){if(P(this))for(var c=0;c<this.A.length&&0<a.count;++c)if(0<a.offset){if(a.offset-=this.D.Ga()?1:this.A[c].length,0>a.offset)for(var d=this.A[c].length+a.offset;d<this.A[c].length&&0<a.count;++d)b[a.ie++]=this.A[c][d],a.count--}else if(this.D.Ga())b[a.ie++]=this.A[c],a.count--;else for(d=0;d<this.A[c].length&&0<a.count;++d)b[a.ie++]=this.A[c][d],a.count--;else for(c=0;c<this.h.length&&0<a.count;++c)this.h[c].fill(a,b)};
function qf(a,b){for(var c=b.Ma(),d=a.map(function(a){var d=new rf(a.id(),b);d.c=a.o[0];d.A=a.o[1];d.c.forEach(function(a,e){c.add(a,b.Ga()?1:d.A[e].length)});return d}),e=0;e<d.length-1;++e)tf(d[e],d[e+1]);return 1<d.length?hf(d[0]):d[0]};function Cf(a){this.compare=0==a?Df:Ef;this.Td=0==a?function(a){return null!=a?a.reverse():null}:function(a){return a||null};this.Zd=0==a?Ff:Gf}t(Cf,yc);function Ef(a,b){return a>b?1:a<b?-1:0}function Df(a,b){return Ef(b,a)}function Gf(a,b){return nd(a,b)}function Ff(a,b){return nd(b,a)}m=Cf.prototype;m.qb=function(a,b){var c=this.Td(b),d=[c.b==E,c.w==E];if(!d[0]){var e=this.compare(a,c.b);d[0]=c.da?1==e:-1!=e}d[1]||(e=this.compare(a,c.w),d[1]=c.ma?-1==e:1!=e);return d};
m.compare=function(a,b){return this.compare(a,b)};m.min=function(a,b){return a<b?1:a==b?0:-1};m.max=function(a,b){return a>b?1:a==b?0:-1};m.Md=function(a,b){var c=this.qb(a,b);return c[0]&&c[1]};m.hf=function(a){return a.filter(function(a){return null!==a}).sort(function(a,c){return this.Zd(a,c)}.bind(this))};m.Nd=function(a){return this.Td(a).b==E};m.od=function(a){a=this.Td(a);return[a.b,a.w]};m.toString=function(){return this.compare==Df?"SimpleComparator_DESC":"SimpleComparator_ASC"};function Hf(a){this.Ka=a.map(function(a){return new Cf(a)})}t(Hf,yc);function If(a,b,c,d){for(var e=0,f=0;f<a.Ka.length&&0==e;++f)e=d(a.Ka[f],b[f],c[f]);return e}m=Hf.prototype;m.compare=function(a,b){return If(this,a,b,function(a,b,e){return b==E||e==E?0:a.compare(b,e)})};m.min=function(a,b){return If(this,a,b,function(a,b,e){return a.min(b,e)})};m.max=function(a,b){return If(this,a,b,function(a,b,e){return a.max(b,e)})};
m.qb=function(a,b){for(var c=[!0,!0],d=0;d<this.Ka.length&&(c[0]||c[1]);++d){var e=this.Ka[d].qb(a[d],b[d]);c[0]=c[0]&&e[0];c[1]=c[1]&&e[1]}return c};m.Md=function(a,b){for(var c=!0,d=0;d<this.Ka.length&&c;++d)c=this.Ka[d].Md(a[d],b[d]);return c};
m.hf=function(a){var b=a.filter(function(a){return a.every(fa)});a=Array(this.Ka.length);for(var c=0;c<a.length;c++)a[c]=b.map(function(a){return a[c]});a.forEach(function(a,b){a.sort(function(a,c){return this.Ka[b].Zd(a,c)}.bind(this))},this);b=Array(b.length);for(c=0;c<b.length;c++)b[c]=a.map(function(a){return a[c]});return b.sort(function(a,b){for(var c=0,h=0;h<this.Ka.length&&0==c;++h)c=this.Ka[h].Zd(a[h],b[h]);return c}.bind(this))};m.Nd=function(a){return this.Ka[0].Nd(a[0])};
m.od=function(a){var b=a.map(function(a,b){return this.Ka[b].od(a)[0]},this);a=a.map(function(a,b){return this.Ka[b].od(a)[1]},this);return[b,a]};function Jf(a){if(1==a.f.length)return new Cf(a.f[0].ib);a=a.f.map(function(a){return a.ib});return new Hf(a)};function Kf(a){this.fa=a;this.hb=C();this.Mc=new df;this.mb=new df}m=Kf.prototype;m.getName=function(){return this.fa.getName()};m.add=function(a,b){null===a?(this.hb.add(b),this.Mc.add(a,1)):this.fa.add(a,b)};m.set=function(a,b){null===a?(this.hb.clear(),this.Mc.clear(),this.add(a,b)):this.fa.set(a,b)};m.remove=function(a,b){null===a?b?(this.hb.delete(b),this.Mc.remove(a,1)):(this.hb.clear(),this.Mc.clear()):this.fa.remove(a,b)};m.get=function(a){return null===a?nc(this.hb):this.fa.get(a)};
m.Yc=function(a){return this.fa.Yc(a)};m.Ma=function(){ef(this.mb,[this.fa.Ma(),this.Mc]);return this.mb};m.Xa=function(a,b,c,d){b=this.fa.Xa(a,b,c,d);return null!=a?b:b.concat(nc(this.hb))};m.clear=function(){this.hb.clear();this.fa.clear()};m.cb=function(a){return null===a?0!=this.hb.size:this.fa.cb(a)};m.min=function(){return this.fa.min()};m.max=function(){return this.fa.max()};m.Ia=function(){return[new z(-2,nc(this.hb))].concat(this.fa.Ia())};m.nc=function(){return this.fa.nc()};
function Lf(a,b){for(var c=-1,d=0;d<b.length;++d)if(-2==b[d].id()){c=d;break}if(-1==c)throw new D(102);var d=b[c].o,e=b.slice(0);e.splice(c,1);var c=a(e),f=new Kf(c);d.forEach(function(a){f.hb.add(a)});return f}m.Ga=function(){return this.fa.Ga()};function Mf(a){this.u=a;this.lb=C();this.U=new Cf(1)}m=Mf.prototype;m.getName=g("u");m.add=function(a){if("number"!=typeof a)throw new D(103);this.lb.add(a)};m.set=function(a,b){this.add(a,b)};m.remove=function(a){this.lb.delete(a)};m.get=function(a){return this.cb(a)?[a]:[]};m.min=function(){return this.Dc(this.U.min.bind(this.U))};m.max=function(){return this.Dc(this.U.max.bind(this.U))};
m.Dc=function(a){if(0==this.lb.size)return null;var b=nc(this.lb).reduce(function(b,d){return null===b||1==a(d,b)?d:b},null);return[b,[b]]};m.Yc=function(){return this.lb.size};m.Xa=function(a,b,c,d){var e=a||[ld()];a=nc(this.lb).filter(function(a){return e.some(function(b){return this.U.Md(a,b)},this)},this);return cf(a,b,c,d)};m.clear=function(){this.lb.clear()};m.cb=function(a){return this.lb.has(a)};m.Ia=function(){return[new z(0,nc(this.lb))]};m.nc=g("U");
function Nf(a,b){var c=new Mf(a);b[0].o.forEach(function(a){c.add(a,a)});return c}m.Ga=l(!0);m.Ma=function(){var a=new df;a.oa=this.lb.size;return a};function Of(a){this.g=a;this.Ja=a.i(gc);this.C=a.i(ic);this.S=a.i(hc)}Of.prototype.Ea=function(a){var b=a.ra(),c=function(){if(0==b.length)return w();var a=b.shift();return(a.xb()?Pf(this,a):Qf(this,a)).then(c)}.bind(this);return c()};function Qf(a,b){var c=new bd(a.g,C([b])),c=a.Ja.zb(0,c),d=c.G(b.getName(),b.Jb.bind(b)).get([]).then(function(a){this.S.Tb(b.getName(),a);Tf(this,b,a)}.bind(a));c.ia();return d}
function Tf(a,b,c){var d=a.C.hc.get(b.getName())||[];c.forEach(function(a){d.forEach(function(b){var c=a.Cb(b.getName());b.add(c,a.id())})})}function Pf(a,b){var c=new bd(a.g,C([b])),d=a.Ja.zb(0,c),c=d.G(b.getName(),b.Jb).get([]).then(function(a){this.S.Tb(b.getName(),a)}.bind(a)),e=b.xa().map(function(a){return Uf(this,a,d)},a).concat(Vf(a,b,d));d.ia();return eb(e.concat(c))}
function Uf(a,b,c){c=c.G(b.m(),rb,1);var d=Jf(b);return c.get([]).then(function(a){if(1<a.length){if(Wf(b)){var c=pf.bind(void 0,d,b.m(),b.Bc);a=Lf(c,a.slice(1))}else a=pf(d,b.m(),b.Bc,a.slice(1));this.C.set(b.Nc,a)}}.bind(a))}function Vf(a,b,c){return c.G(Ie(b),rb,1).get([]).then(function(a){1<a.length&&(a=Nf(Ie(b),a.slice(1)),this.C.set(b.getName(),a))}.bind(a))};function Xf(){this.ba=A();this.hc=A()}Xf.prototype.Ea=function(a){a.ra().forEach(function(a){var c=[];this.hc.set(a.getName(),c);var d=Ie(a);if(null===this.get(d)){var e=new Mf(d);c.push(e);this.ba.set(d,e)}a.xa().forEach(function(a){var b;b=Jf(a);b=new ff(a.m(),b,a.Bc);b=Wf(a)?new Kf(b):b;c.push(b);this.ba.set(a.m(),b)},this)},this);return w()};Xf.prototype.get=function(a){return this.ba.get(a)||null};
Xf.prototype.set=function(a,b){var c=this.hc.get(a)||null;null===c&&(c=[],this.hc.set(a,c));for(var d=null,e=0;e<c.length;e++)if(c[e].getName()==b.getName()){d=e;break}null!==d&&0<c.length?c.splice(d,1,b):c.push(b);this.ba.set(b.getName(),b)};function Yf(a){this.gc=[];q(a)&&this.add(a)}Yf.prototype.toString=function(){return this.gc.map(function(a){return a.toString()}).join(",")};Yf.prototype.cb=function(a){return this.gc.some(function(b){return b.contains(a)})};Yf.prototype.Bb=g("gc");
Yf.prototype.add=function(a){if(0!=a.length)if(a=this.gc.concat(a),1==a.length)this.gc=a;else{a.sort(nd);for(var b=[],c=a[0],d=1;d<a.length;++d)if(jd(c,a[d])){var e=a[d],f=ld();if(c.b!=E&&e.b!=E){var h=kd(c.b,e.b,!0);1!=h?(f.b=c.b,f.da=0!=h?c.da:c.da&&e.da):(f.b=e.b,f.da=e.da)}c.w!=E&&e.w!=E&&(h=kd(c.w,e.w,!1),-1!=h?(f.w=c.w,f.ma=0!=h?c.ma:c.ma&&e.ma):(f.w=e.w,f.ma=e.ma));c=f}else b.push(c),c=a[d];b.push(c);this.gc=b}};
function Zf(a,b){var c=[];a.Bb().map(function(a){return b.Bb().map(function(b){var c;if(jd(a,b)){c=ld();var h=kd(a.b,b.b,!0),h=0==h?a.da?a:b:-1!=h?a:b;c.b=h.b;c.da=h.da;a.w==E||b.w==E?b=a.w==E?b:a:(h=kd(a.w,b.w,!1),b=0==h?a.ma?a:b:-1==h?a:b);c.w=b.w;c.ma=b.ma}else c=null;return c})}).forEach(function(a){c=c.concat(a)});return new Yf(c.filter(function(a){return null!==a}))};function $f(a,b){var c=[],d=null,e=null;Od(a,function(a){var h=b(a);null==a.getParent()?e=h:L(d,h);var k=a.getParent();null!==k&&K(k).length==K(d).length&&(k=c.indexOf(d),-1!=k&&c.splice(k,1));1<K(a).length&&c.push(h);d=null===a.h?c[c.length-1]:h});return e}function ag(a){return bg(a,function(a){return null===a.h})}
function cg(a){var b=a.getParent(),c=0;null!==b&&(c=K(b).indexOf(a),b.removeChild(a));var d=K(a).slice();d.forEach(function(d,f){a.removeChild(d);null===b||Ld(b,d,c+f)});return{parent:b,children:d}}function dg(a,b){K(a).slice().forEach(function(c){a.removeChild(c);L(b,c)});L(a,b)}function eg(a){var b=Kd(a,0);cg(a);dg(b,a);return b}
function fg(a,b,c){var d=Kd(a,0),e=K(d).slice();if(!e.some(function(a){return b(a)}))return a;cg(a);e.forEach(function(e,h){if(b(e)){var k=c(a);Md(d,h);L(k,e);Ld(d,k,h)}});return d}function gg(a,b,c,d){var e=a.getParent();null!==e&&(a=K(e).indexOf(a),Md(e,a),Ld(e,c,a));K(b).slice().forEach(function(a){b.removeChild(a);L(d,a)});return c}function bg(a,b,c){function d(a){b(a)&&e.push(a);null!=c&&c(a)||K(a).forEach(d)}var e=[];d(a);return e}
function hg(a,b){var c=b||function(a){return a.toString()+"\n"},d="";Od(a,function(a){for(var b=0;b<Jd(a);b++)d+="-";d+=c(a)});return d};function ig(a){Pd.call(this);this.Pb=a;this.Ya=!1}t(ig,Pd);m=ig.prototype;m.Hb=function(){return $f(this,function(a){if(a instanceof ig){var b=new ig(a.Pb);b.Ya=a.Ya;a=a.V();b.pa=a;return b}return a.Hb()})};m.eb=function(a){var b=a||[];Od(this,function(a){a!=this&&a.eb(b)}.bind(this));a=C(b);return nc(a)};m.qd=function(a){this.Ya!=a&&(this.Ya=a,this.Pb="and"==this.Pb?"or":"and",K(this).forEach(function(b){return b.qd(a)}))};
m.eval=function(a){var b=K(this).map(function(b){return b.eval(a)});return jg(this,b)};function jg(a,b){return"and"==a.Pb?td(b):ud(b)}m.toString=function(){return"combined_pred_"+this.Pb.toString()};function kg(a,b,c){Pd.call(this);this.ga=a;this.la=b;this.F=c;this.Ud=null;a=Bd.wc();this.rc=Hd(a,this.ga.H(),this.F);this.$f=a.Me.get(this.ga.H())||null}t(kg,Pd);m=kg.prototype;m.Hb=function(){var a=new kg(this.ga,this.la,this.F),b=this.V();a.pa=b;return a};m.eb=function(a){return null!=a?(a.push(this.ga),a.push(this.la),a):[this.ga,this.la]};
m.reverse=function(){var a=this.F;switch(this.F){case "gt":a="lt";break;case "lt":a="gt";break;case "gte":a="lte";break;case "lte":a="gte"}return new kg(this.la,this.ga,a)};m.eval=function(a){var b=a.entries.filter(function(a){var b=H(a,this.ga);a=H(a,this.la);return this.rc(b,a)},this);return new F(b,G(a))};m.toString=function(){return"join_pred("+this.ga.m()+" "+this.F+" "+this.la.m()+")"};
function lg(a,b,c){var d=null,e=null;-1!=G(b).indexOf(I(a.ga.G()))?(d=b,e=c):(d=c,e=b);if(d.entries.length>e.entries.length){a:{b=a.ga;a.ga=a.la;a.la=b;b=a.F;switch(a.F){case "gt":b="lt";break;case "lt":b="gt";break;case "gte":b="lte";break;case "lte":b="gte";break;default:break a}a.F=b;a.rc=Hd(Bd.wc(),a.ga.H(),a.F)}return[e,d]}return[d,e]}function mg(a){var b={};a.eb().forEach(function(a){b[a.getName()]=null});return b}
function ng(a,b,c){null===a.Ud&&(a.Ud=mg(a.la.G()));var d=new wd(new z(-1,a.Ud),!1);return zd(b,c,d,[I(a.la.G())])}
function og(a,b,c,d){var e=[b,c];d||(e=lg(a,b,c));b=e[0];c=e[1];var e=b,f=c,h=a.ga,k=a.la;d&&(e=c,f=b,h=a.la,k=a.ga);var n=new Kc,x=[];e.entries.forEach(function(a){var b=String(H(a,h));n.set(b,a)});var S=G(e),oa=G(f);f.entries.forEach(function(a){var b=H(a,k),c=String(b);null!==b&&n.has(c)?n.get(c).forEach(function(b){b=zd(a,oa,b,S);x.push(b)}):d&&x.push(ng(this,a,oa))}.bind(a));a=G(b).concat(G(c));return new F(x,a)}
function pg(a,b,c,d,e){function f(a,b){var c=new wd(b,1<S.length),c=zd(a,oa,c,S);x.push(c)}var h=d.Rf.G(),k=b,n=c;-1!=G(b).indexOf(I(h))&&(k=c,n=b);var x=[],S=G(n),oa=G(k);k.entries.forEach(function(a){var b=this.$f(H(a,d.fg)),b=d.index.get(b);0!=b.length&&(d.index.Ga()?f(a,e.get(b[0])):Ze(e,b).forEach(f.bind(null,a)))},a);a=G(k).concat(G(n));return new F(x,a)};function qg(a,b,c){return null===b?new Rd(a,b,c):q(b.m)?new kg(a,b,c):new Rd(a,b,c)};var rg={};r("lf.schema.DataStoreType",rg);rg.INDEXED_DB=0;rg.MEMORY=1;rg.LOCAL_STORAGE=2;rg.FIREBASE=3;rg.WEB_SQL=4;rg.OBSERVABLE_STORE=5;function sg(a,b,c,d){this.Nc=a;this.name=b;this.Bc=c;this.f=d}sg.prototype.m=function(){return this.Nc+"."+this.name};function Wf(a){return a.f.some(function(a){return a.ca.Ac()})}function Q(a,b,c,d){this.u=a;this.ka=c;this.J=b;this.ld=d;this.ab=null}r("lf.schema.Table",Q);Q.prototype.getName=g("u");Q.prototype.getName=Q.prototype.getName;Q.prototype.Wa=g("ab");
function I(a){return a.ab||a.u}Q.prototype.lc=function(a){var b=new this.constructor(this.u);b.ab=a;b.qg=this.qg;return b};Q.prototype.as=Q.prototype.lc;Q.prototype.createRow=Q.prototype.rb;Q.prototype.deserializeRow=Q.prototype.Jb;Q.prototype.xa=g("ka");Q.prototype.getIndices=Q.prototype.xa;Q.prototype.eb=g("J");Q.prototype.getColumns=Q.prototype.eb;Q.prototype.getConstraint=Q.prototype.Ab;Q.prototype.xb=g("ld");Q.prototype.persistentIndex=Q.prototype.xb;function Ie(a){return a.u+".#"};function R(a,b){this.child=a;this.Gb=b;this.ab=null}m=R.prototype;m.getName=function(){return this.Gb+"("+this.child.getName()+")"};m.m=function(){return this.Gb+"("+this.child.m()+")"};m.G=function(){return this.child.G()};m.toString=function(){return this.m()};m.H=function(){return this.child.H()};m.Wa=g("ab");m.xa=function(){return[]};m.wa=l(null);m.Ac=l(!1);m.lc=function(a){this.ab=a;return this};R.prototype.as=R.prototype.lc;
function tg(a){for(var b=[a];a instanceof R;)b.push(a.child),a=a.child;return b}function ug(a){this.ab=a||null;this.O=new Q("#UnknownTable",[],[],!1)}m=ug.prototype;m.getName=l("*");m.m=function(){return this.getName()};m.toString=function(){return this.m()};m.G=g("O");m.H=l(4);m.Wa=g("ab");m.xa=function(){return[]};m.wa=l(null);m.Ac=l(!1);r("lf.fn.avg",function(a){return new R(a,"AVG")});function vg(a){return new R(a||new ug,"COUNT")}r("lf.fn.count",vg);function wg(a){return new R(a,"DISTINCT")}r("lf.fn.distinct",wg);r("lf.fn.max",function(a){return new R(a,"MAX")});r("lf.fn.min",function(a){return new R(a,"MIN")});r("lf.fn.stddev",function(a){return new R(a,"STDDEV")});r("lf.fn.sum",function(a){return new R(a,"SUM")});r("lf.fn.geomean",function(a){return new R(a,"GEOMEAN")});function T(a,b){J.call(this);this.Jf=b}t(T,J);T.prototype.exec=function(a,b){switch(this.Jf){case 1:return xg(this,a,b);case 0:return yg(this,a,b);default:return zg(this,a,b)}};T.prototype.toString=l("dummy_node");T.prototype.Oc=function(){return this.toString()};function zg(a,b,c){return new v(function(a){a(this.ea(b,[],c))}.bind(a))}function xg(a,b,c){return Kd(a,0).exec(b,c).then(function(a){return this.ea(b,a,c)}.bind(a))}
function yg(a,b,c){var d=K(a).map(function(a){return a.exec(b,c)});return eb(d).then(function(a){var d=[];a.forEach(function(a){for(var b=0;b<a.length;++b)d.push(a[b])});return this.ea(b,d,c)}.bind(a))};function Ag(a){T.call(this,0,1);this.se=a}t(Ag,T);Ag.prototype.toString=function(){return"aggregation("+this.se.map(function(a){return a.m()}).toString()+")"};Ag.prototype.ea=function(a,b){b.forEach(function(a){Bg(new Cg(a,this.se))},this);return b};function Cg(a,b){this.Ha=a;this.J=b}
function Bg(a){a.J.forEach(function(a){a=tg(a).reverse();for(var c=1;c<a.length;c++){var d=a[c],e=tg(d).slice(-1)[0],f=d.child instanceof R?qd(this.Ha,d.child):this.Ha;if(null!==f.Va&&f.Va.has(d.m()))break;f=Dg(d.Gb,f,e);e=this.Ha;null===e.Va&&(e.Va=A());e.Va.set(d.m(),f)}},a)}
function Dg(a,b,c){var d=null;switch(a){case "MIN":d=Eg(b,c,function(a,b){return b<a?b:a});break;case "MAX":d=Eg(b,c,function(a,b){return b>a?b:a});break;case "DISTINCT":d=Fg(b,c);break;case "COUNT":d=Gg(b,c);break;case "SUM":d=Hg(b,c);break;case "AVG":a=Gg(b,c);0<a&&(d=Hg(b,c)/a);break;case "GEOMEAN":d=Ig(b,c);break;default:d=Jg(b,c)}return d}function Eg(a,b,c){return a.entries.reduce(function(a,e){var f=H(e,b);return null===f?a:null===a?f:c(a,f)},null)}
function Gg(a,b){return b instanceof ug?a.entries.length:a.entries.reduce(function(a,d){return a+(ea(H(d,b))?0:1)},0)}function Hg(a,b){return Eg(a,b,function(a,b){return b+a})}function Jg(a,b){var c=[];a.entries.forEach(function(a){a=H(a,b);null===a||c.push(a)});return 0==c.length?null:Ab.apply(null,c)}function Ig(a,b){var c=0,d=a.entries.reduce(function(a,d){var h=H(d,b);if(0==h||null===h)return a;c++;return a+Math.log(h)},0);return 0==c?null:Math.pow(Math.E,d/c)}
function Fg(a,b){var c=A();a.entries.forEach(function(a){var e=H(a,b);c.set(e,a)});return new F(B(c),G(a))};function Kg(a,b){this.Ba=a;this.aa=b}Kg.prototype.fb=g("Ba");Kg.prototype.$=g("aa");function Lg(){J.call(this)}t(Lg,J);function Mg(a,b){J.call(this);this.table=a;this.values=b}t(Mg,Lg);function Ng(a,b){Mg.call(this,a,b)}t(Ng,Mg);function Og(a){J.call(this);this.table=a}t(Og,Lg);Og.prototype.toString=function(){return"delete("+this.table.getName()+")"};function Pg(a,b){J.call(this);this.table=a;this.me=b}t(Pg,Lg);
Pg.prototype.toString=function(){var a=[];this.me&&(a=this.me.map(function(a){return a.N.getName()},this));return"update("+this.table.getName()+", ["+a.join(",")+"])"};function Qg(a){J.call(this);this.I=a}t(Qg,Lg);Qg.prototype.toString=function(){return"select("+this.I.toString()+")"};function Rg(a){J.call(this);this.table=a}t(Rg,Lg);Rg.prototype.toString=function(){var a="table_access("+this.table.getName();null===this.table.Wa()||(a+=" as "+this.table.Wa());return a+")"};
function Sg(){J.call(this)}t(Sg,Lg);Sg.prototype.toString=l("cross_product");function Tg(a,b){J.call(this);this.f=a;this.Lb=b}t(Tg,Lg);Tg.prototype.toString=function(){var a="project("+this.f.toString();if(null!==this.Lb)var b=this.Lb.map(function(a){return a.m()}).join(", "),a=a+(", groupBy("+b+")");return a+")"};function Ug(a){J.call(this);this.L=a}t(Ug,Lg);Ug.prototype.toString=function(){return"order_by("+$d(this.L)+")"};function Vg(a){J.call(this);this.f=a}t(Vg,Lg);
Vg.prototype.toString=function(){return"aggregation("+this.f.toString()+")"};function Wg(a){J.call(this);this.f=a}t(Wg,Lg);Wg.prototype.toString=function(){return"group_by("+this.f.toString()+")"};function Xg(a){J.call(this);this.W=a}t(Xg,Lg);Xg.prototype.toString=function(){return"limit("+this.W+")"};function Yg(a){J.call(this);this.M=a}t(Yg,Lg);Yg.prototype.toString=function(){return"skip("+this.M+")"};function Zg(a,b){J.call(this);this.I=a;this.Nb=b}t(Zg,Lg);
Zg.prototype.toString=function(){return"join(type: "+(this.Nb?"outer":"inner")+", "+this.I.toString()+")"};function $g(){};function ah(){}t(ah,$g);ah.prototype.kb=function(a){this.Z=a;this.Ta(this.Z);return this.Z};ah.prototype.Ta=function(a){if(a instanceof Qg){var b=bh(this,a.I),b=ch(this,b);gg(a,a,b[0],b[1]);a==this.Z&&(this.Z=b[0]);a=b[0]}K(a).forEach(function(a){this.Ta(a)},this)};function bh(a,b){if(0==K(b).length||"and"!=b.Pb)return[b];var c=K(b).slice().map(function(a){b.removeChild(a);return bh(this,a)},a);return Fa(c)}
function ch(a,b){var c=null,d=null;b.map(function(a,b){var h=new Qg(a);0==b?c=h:L(d,h);d=h},a);return[c,d]};function dh(){}t(dh,$g);dh.prototype.kb=function(a,b){if(3>b.b.length)return a;this.Z=a;this.Ta(this.Z);return this.Z};dh.prototype.Ta=function(a){if(a instanceof Sg)for(;2<K(a).length;){for(var b=new Sg,c=0;2>c;c++){var d=Md(a,0);L(b,d)}Ld(a,b,0)}K(a).forEach(function(a){this.Ta(a)},this)};function eh(){T.call(this,0,0)}t(eh,T);eh.prototype.toString=l("cross_product");eh.prototype.ea=function(a,b){for(var c=b[0],d=b[1],e=[],f=G(c),h=G(d),k=0;k<c.entries.length;k++)for(var n=0;n<d.entries.length;n++){var x=zd(c.entries[k],f,d.entries[n],h);e.push(x)}c=G(c).concat(G(d));return[new F(e,c)]};function fh(a,b){ce.call(this,a,b);this.Ca=a.i(kc);this.Db=a.i(lc)}t(fh,ce);fh.prototype.getPriority=l(2);fh.prototype.Xd=function(a){0==this.H()?gh(this,a):this.Lc()};function gh(a,b){a.nd.forEach(function(a,d){a instanceof Zd&&fe(this.Db,a,b[d])},a)}fh.prototype.Lc=function(){var a=he(this.Db,this.$());0!=a.length&&(a=new ee(this.global,a),ie(this.Ca,a))};function hh(a){Ud.call(this,a)}t(hh,Ud);hh.prototype.$=function(){var a=C();a.add(this.b);ih(this,this.b.getName(),a);return a};function ih(a,b,c){var d=jh(a.ca.info(),b,1);jh(a.ca.info(),b).forEach(c.add.bind(c));d.forEach(function(a){ih(this,a.getName(),c)},a)}hh.prototype.clone=function(){var a=new hh(this.ca);Xd(a,this);a.b=this.b;return a};hh.prototype.bind=function(a){hh.Fb.bind.call(this,a);Yd(this,a);return this};function kh(a){Ud.call(this,a)}t(kh,Ud);kh.prototype.$=function(){var a=C();a.add(this.Fa);var b=this.ca.info();lh(this.Fa.getName(),b.Ue).forEach(a.add.bind(a));this.Yb&&jh(b,this.Fa.getName()).forEach(a.add.bind(a));return a};kh.prototype.clone=function(){var a=new kh(this.ca);Xd(a,this);a.Fa=this.Fa;this.values&&(a.values=this.values instanceof Ad?this.values:this.values.slice());a.Yb=this.Yb;a.Zb=this.Zb;return a};
kh.prototype.bind=function(a){kh.Fb.bind.call(this,a);this.Zb&&(this.values=this.Zb instanceof Ad?a[this.Zb.wa()]:this.Zb.map(function(b){return b instanceof Ad?a[b.wa()]:b}));return this};function mh(a){Ud.call(this,a)}t(mh,Ud);mh.prototype.$=function(){var a=C();a.add(this.table);var b=this.set.map(function(a){return a.N.m()}),c=this.ca.info();nh(c,b).forEach(a.add.bind(a));oh(c,b).forEach(a.add.bind(a));return a};mh.prototype.clone=function(){var a=new mh(this.ca);Xd(a,this);a.table=this.table;a.set=this.set?this.set.slice():this.set;return a};mh.prototype.bind=function(a){mh.Fb.bind.call(this,a);this.set.forEach(function(b){-1!=b.Tc&&(b.value=a[b.Tc])});Yd(this,a);return this};function ph(a,b){if(null==b)return"NULL";switch(a){case 1:return b?1:0;case 3:case 4:return b;case 0:return"'"+tb(b)+"'";default:return"'"+b.toString()+"'"}}function qh(a,b){var c=a.Yb?"INSERT OR REPLACE":"INSERT",d=a.Fa.eb(),c=c+(" INTO "+a.Fa.getName()+"("),c=c+d.map(function(a){return a.getName()}).join(", "),c=c+") VALUES (";return a.values.map(function(a){var f=d.map(function(c){var d=a.o[c.getName()];return b?null!=d?"#":"NULL":ph(c.H(),d)});return c+f.join(", ")+");"}).join("\n")}
function rh(a){switch(a){case "between":return"BETWEEN";case "eq":return"=";case "gte":return">=";case "gt":return">";case "in":return"IN";case "lte":return"<=";case "lt":return"<";case "match":return"LIKE";case "neq":return"<>";default:return"UNKNOWN"}}function sh(a,b,c,d){return a instanceof Ad?"?"+a.wa().toString():d?null!=a?"#":"NULL":"match"==b?"'"+a.toString()+"'":"in"==b?"("+a.map(function(a){return ph(c,a)}).join(", ")+")":"between"==b?ph(c,a[0])+" AND "+ph(c,a[1]):ph(c,a).toString()}
function th(a,b){return K(a).map(function(a){return"("+uh(a,b)+")"}).join("and"==a.Pb?" AND ":" OR ")}function vh(a){return[a.ga.m(),rh(a.F),a.la.m()].join(" ")}function uh(a,b){if(a instanceof Rd){var c=a.N.m(),d=rh(a.F),e=sh(a.value,a.F,a.N.H(),b);return"="==d&&"NULL"==e?[c,"IS NULL"].join(" "):"<>"==d&&"NULL"==e?[c,"IS NOT NULL"].join(" "):[c,d,e].join(" ")}if(a instanceof ig)return th(a,b);if(a instanceof kg)return vh(a);throw new D(357,typeof a);}
function wh(a,b){var c=uh(a,b);return c?" WHERE "+c:""}function xh(a,b){var c="UPDATE "+a.table.getName()+" SET ",c=c+a.set.map(function(a){var b=a.N.m()+" = ";return-1!=a.Tc?b+"?"+a.Tc.toString():b+ph(a.N.H(),a.value).toString()}).join(", ");a.s&&(c+=wh(a.s,b));return c+";"}
function yh(a,b){var c="*";a.f.length&&(c=a.f.map(function(a){return a.Wa()?a.m()+" AS "+a.Wa():a.m()}).join(", "));c="SELECT "+c+" FROM ";null!=a.wb&&0!=a.wb.size?c+=zh(a,b):(c+=a.b.map(Ah).join(", "),a.s&&(c+=wh(a.s,b)));if(a.L)var d=a.L.map(function(a){return a.N.m()+(0==a.ib?" DESC":" ASC")}).join(", "),c=c+(" ORDER BY "+d);a.ja&&(d=a.ja.map(function(a){return a.m()}).join(", "),c+=" GROUP BY "+d);a.W&&(c+=" LIMIT "+a.W.toString());a.M&&(c+=" SKIP "+a.M.toString());return c+";"}
function Ah(a){return I(a)!=a.getName()?a.getName()+" AS "+I(a):a.getName()}function zh(a,b){for(var c=bg(a.s,function(a){return a instanceof kg}),d=c.map(vh),e=Ah(a.b[0]),f=1;f<a.b.length;f++)var h=Ah(a.b[f]),e=a.wb.has(c[d.length-f].V())?e+(" LEFT OUTER JOIN "+h):e+(" INNER JOIN "+h),e=e+(" ON ("+d[d.length-f]+")");c=Kd(a.s,0);c instanceof kg||(e+=" WHERE "+uh(c,b));return e}
function Bh(a,b){var c=b||!1,d=a.a.clone();if(d instanceof kh)return qh(d,c);if(d instanceof hh){var e="DELETE FROM "+d.b.getName();d.s&&(e+=wh(d.s,c));return e+";"}if(d instanceof mh)return xh(d,c);if(d instanceof Zd)return yh(d,c);throw new D(358,typeof d);};function U(a,b){this.global=a;this.pg=a.i(jc);this.Ca=a.i(kc);this.a=b}r("lf.query.BaseBuilder",U);U.prototype.exec=function(){try{this.bb()}catch(a){return bb(a)}return new v(function(a,b){var c=new fh(this.global,[this.yc()]);ie(this.Ca,c).then(function(b){a(od(b[0]))},b)},this)};U.prototype.exec=U.prototype.exec;U.prototype.Lf=function(){var a=function(a){return a.Oc(this.a)+"\n"}.bind(this);return hg(Ch(this).fb(),a)};U.prototype.explain=U.prototype.Lf;
U.prototype.bind=function(a){this.a.bind(a);return this};U.prototype.bind=U.prototype.bind;U.prototype.xg=function(a){return Bh(this,a)};U.prototype.toSql=U.prototype.xg;U.prototype.bb=aa();function Ch(a){if(null==a.Ve){var b;b=a.pg;var c=a.a,d=b.cg.create(c);b=b.mg.create(d,c);a.Ve=b}return a.Ve}U.prototype.yc=function(){return{context:this.a.clone(),$d:Ch(this)}};function Dh(a){U.call(this,a,new hh(a.i(mc)))}t(Dh,U);r("lf.query.DeleteBuilder",Dh);Dh.prototype.b=function(a){if(null!=this.a.b)throw new D(515);this.a.b=a;return this};Dh.prototype.from=Dh.prototype.b;Dh.prototype.s=function(a){this.xd();this.a.s=a;return this};Dh.prototype.where=Dh.prototype.s;Dh.prototype.xd=function(){if(null==this.a.b)throw new D(548);if(null!=this.a.s)throw new D(516);};Dh.prototype.bb=function(){Dh.Fb.bb.call(this);if(null==this.a.b)throw new D(517);};function Eh(a,b){U.call(this,a,new kh(a.i(mc)));this.a.Yb=b||!1}t(Eh,U);r("lf.query.InsertBuilder",Eh);Eh.prototype.bb=function(){Eh.Fb.bb.call(this);var a=this.a;if(null==a.Fa||null==a.values)throw new D(518);if(a.Yb&&null===a.Fa.Ab().bd())throw new D(519);};Eh.prototype.Fa=function(a){if(null!=this.a.Fa)throw new D(520);this.a.Fa=a;return this};Eh.prototype.into=Eh.prototype.Fa;
Eh.prototype.values=function(a){if(null!=this.a.values)throw new D(521);a instanceof Ad||a.some(function(a){return a instanceof Ad})?this.a.Zb=a:this.a.values=a;return this};Eh.prototype.values=Eh.prototype.values;function Fh(a){return Gh("and",Array.prototype.slice.call(arguments))}r("lf.op.and",Fh);r("lf.op.or",function(a){return Gh("or",Array.prototype.slice.call(arguments))});function Gh(a,b){var c=new ig(a);b.forEach(function(a){L(c,a)});return c}r("lf.op.not",function(a){a.qd(!0);return a});function V(a,b){U.call(this,a,new Zd(a.i(mc)));this.Ce=this.sd=!1;this.a.f=b;Hh(this);Ih(this)}t(V,U);r("lf.query.SelectBuilder",V);V.prototype.bb=function(){V.Fb.bb.call(this);var a=this.a;if(null==a.b)throw new D(522);if(q(a.Ob)&&!q(a.W)||q(a.Vb)&&!q(a.M))throw new D(523);null!=this.a.ja?Jh(this):Kh(this)};function Hh(a){var b=a.a.f.filter(function(a){return a instanceof R&&"DISTINCT"==a.Gb},a);if(0!=b.length&&(1!=b.length||1!=a.a.f.length))throw new D(524);}
function Jh(a){var b=a.a.f.filter(function(a){return!(a instanceof R)}).map(function(a){return a.m()}),c=!1;if(0==a.a.ja.length||0==a.a.f.length)c=!0;else{var d=a.a.ja.map(function(a){return a.m()});(c=b.some(function(a){return-1==d.indexOf(a)}))||(c=a.a.ja.some(function(a){a=a.H();return 6==a||0==a}))}if(c)throw new D(525);}function Kh(a){var b=a.a.f.some(function(a){return a instanceof R},a);a=a.a.f.some(function(a){return!(a instanceof R)},a)||0==a.a.f.length;if(b&&a)throw new D(526);}
function Ih(a){a.a.f.forEach(function(a){if(a instanceof R&&!Lh(a.Gb,a.H()))throw new D(527,a.m());},a)}function Mh(a,b){if(null==a.a.b)throw new D(b);}V.prototype.b=function(a){if(this.Ce)throw new D(515);this.Ce=!0;null==this.a.b&&(this.a.b=[]);this.a.b.push.apply(this.a.b,Array.prototype.slice.call(arguments));return this};V.prototype.from=V.prototype.b;V.prototype.s=function(a){Mh(this,548);if(this.sd)throw new D(516);this.sd=!0;Nh(this,a);return this};V.prototype.where=V.prototype.s;
function Nh(a,b){if(null!=a.a.s){var c=Fh(b,a.a.s);a.a.s=c}else a.a.s=b}V.prototype.Vf=function(a,b){Mh(this,542);if(this.sd)throw new D(547);this.a.b.push(a);Nh(this,b);return this};V.prototype.innerJoin=V.prototype.Vf;V.prototype.ag=function(a,b){Mh(this,542);if(!(b instanceof kg))throw new D(541);if(this.sd)throw new D(547);this.a.b.push(a);null==this.a.wb&&(this.a.wb=C());var c=b;I(a)!=I(b.la.G())&&(c=b.reverse());this.a.wb.add(c.V());Nh(this,c);return this};V.prototype.leftOuterJoin=V.prototype.ag;
V.prototype.W=function(a){if(null!=(this.a.W||this.a.Ob))throw new D(528);if(a instanceof Ad)this.a.Ob=a;else{if(0>a)throw new D(531);this.a.W=a}return this};V.prototype.limit=V.prototype.W;V.prototype.M=function(a){if(null!=(this.a.M||this.a.Vb))throw new D(529);if(a instanceof Ad)this.a.Vb=a;else{if(0>a)throw new D(531);this.a.M=a}return this};V.prototype.skip=V.prototype.M;V.prototype.L=function(a,b){Mh(this,549);null==this.a.L&&(this.a.L=[]);this.a.L.push({N:a,ib:null!=b?b:1});return this};
V.prototype.orderBy=V.prototype.L;V.prototype.ja=function(a){Mh(this,549);if(null!=this.a.ja)throw new D(530);null==this.a.ja&&(this.a.ja=[]);this.a.ja.push.apply(this.a.ja,Array.prototype.slice.call(arguments));return this};V.prototype.groupBy=V.prototype.ja;function Lh(a,b){switch(a){case "COUNT":case "DISTINCT":return!0;case "AVG":case "GEOMEAN":case "STDDEV":case "SUM":return 4==b||3==b;case "MAX":case "MIN":return 4==b||3==b||5==b||2==b}return!1}
V.prototype.clone=function(){var a=new V(this.global,this.a.f);a.a=this.a.clone();a.a.Xc=null;return a};V.prototype.clone=V.prototype.clone;function Oh(a,b){U.call(this,a,new mh(a.i(mc)));this.a.table=b}t(Oh,U);r("lf.query.UpdateBuilder",Oh);Oh.prototype.set=function(a,b){var c={Tc:b instanceof Ad?b.wa():-1,N:a,value:b};null!=this.a.set?this.a.set.push(c):this.a.set=[c];return this};Oh.prototype.set=Oh.prototype.set;Oh.prototype.s=function(a){this.xd();this.a.s=a;return this};Oh.prototype.where=Oh.prototype.s;Oh.prototype.xd=function(){if(null!=this.a.s)throw new D(516);};
Oh.prototype.bb=function(){Oh.Fb.bb.call(this);if(null==this.a.set)throw new D(532);if(this.a.set.some(function(a){return a.value instanceof Ad}))throw new D(501);};function Ph(a){this.a=a;this.Ba=null}Ph.prototype.ec=function(){null===this.Ba&&(this.Ba=this.$c());return this.Ba};function Qh(a){Ph.call(this,a)}t(Qh,Ph);Qh.prototype.$c=function(){return this.a.Yb?new Ng(this.a.Fa,this.a.values):new Mg(this.a.Fa,this.a.values)};function Rh(a){Ph.call(this,a)}t(Rh,Ph);Rh.prototype.$c=function(){var a=new Pg(this.a.table,this.a.set),b=null!=this.a.s?new Qg(this.a.s.Hb()):null,c=new Rg(this.a.table);null===b?L(a,c):(L(b,c),L(a,b));return a};function Sh(a,b,c){this.Ba=a;this.ae=b;this.Sb=c}Sh.prototype.ec=function(){this.Sb.forEach(function(a){this.Ba=a.kb(this.Ba,this.ae)},this);return this.Ba};function Th(a,b){Ph.call(this,a);this.Sb=b}t(Th,Ph);Th.prototype.$c=function(){var a=new Og(this.a.b),b=null!=this.a.s?new Qg(this.a.s.Hb()):null,c=new Rg(this.a.b);null===b?L(a,c):(L(b,c),L(a,b));return(new Sh(a,this.a,this.Sb)).ec()};function Uh(){}t(Uh,$g);Uh.prototype.kb=function(a,b){if(2>b.b.length)return a;this.Z=a;this.Ta(this.Z,b);return this.Z};Uh.prototype.Ta=function(a,b){if(a instanceof Qg&&a.I instanceof kg){var c=a.I.V(),d=Kd(a,0);d instanceof Sg&&(c=null!=b.wb&&b.wb.has(c),c=new Zg(a.I,c),gg(a,d,c,c),a==this.Z&&(this.Z=c),a=c)}K(a).forEach(function(a){this.Ta(a,b)},this)};function Vh(){this.Sc=C()}t(Vh,$g);Vh.prototype.kb=function(a,b){this.Sc.clear();if(!q(b.s))return a;this.Z=a;this.Ta(this.Z);this.Sc.clear();return this.Z};Vh.prototype.Ta=function(a){if(Wh(a)){var b=a.I instanceof Rd?Xh(this,a):Yh(this,a);this.Sc.add(a);b==a&&(b=Kd(a,0));null!==b&&(ea(b.getParent())&&(this.Z=b),Wh(b)&&!this.Sc.has(b)&&this.Ta(b))}else K(a).forEach(function(a){this.Ta(a)},this)};
function Zh(a,b,c){var d=b;if(Kd(b,0)instanceof Qg)d=eg(b),Zh(a,b,c);else if($h(b)){var e=[],d=fg(b,c,function(a){a=new Qg(a.I);e.push(a);return a});e.forEach(function(a){Zh(this,a,c)},a)}return d}function Xh(a,b){var c=C([I(b.I.N.G())]),d=function(a){return ai(this,a,c)}.bind(a);return Zh(a,b,d)}function Yh(a,b){var c=C([I(b.I.ga.G()),I(b.I.la.G())]),d=function(a){return ai(this,a,c)}.bind(a);return Zh(a,b,d)}
function ai(a,b,c){var d=C();ag(b).forEach(function(a){d.add(I(a.table))},a);b instanceof Rg&&d.add(I(b.table));return oc(d,c)}function Wh(a){return a instanceof Qg&&!(a.I instanceof ig)}function $h(a){a=Kd(a,0);return a instanceof Sg||a instanceof Zg};function bi(a,b){Ph.call(this,a);this.Sb=b;this.Ze=this.Qe=this.gf=this.Te=this.te=this.Fe=this.ff=this.ze=this.jf=null}t(bi,Ph);
bi.prototype.$c=function(){ci(this);2<=this.a.b.length&&(this.ze=new Sg);this.ff=null!=this.a.s?new Qg(this.a.s.Hb()):null;this.a.L&&(this.Te=new Ug(this.a.L));null!=this.a.M&&0<this.a.M&&(this.gf=new Yg(this.a.M));null!=this.a.W&&(this.Qe=new Xg(this.a.W));null!=this.a.ja&&(this.Fe=new Wg(this.a.ja));di(this);this.Ze=new Tg(this.a.f||[],this.a.ja||null);var a=ei(this);return(new Sh(a,this.a,this.Sb)).ec()};
function ei(a){for(var b=[a.Qe,a.gf,a.Ze,a.Te,a.te,a.Fe,a.ff,a.ze],c=null,d=null,e=0;e<b.length;e++){var f=b[e];null!==f&&(null===d?d=f:L(b[c],f),c=e)}a.jf.forEach(function(a){L(b[c],a)});return d}function ci(a){a.jf=a.a.b.map(function(a){return new Rg(a)},a)}function di(a){var b=a.a.f.filter(function(a){return a instanceof R});null!=a.a.L&&a.a.L.forEach(function(a){a.N instanceof R&&b.push(a.N)});0<b.length&&(a.te=new Vg(b))};function fi(){this.ge=[new ah,new dh,new Vh,new Uh];this.Ed=[new ah]}fi.prototype.create=function(a){var b=null;if(a instanceof kh)b=new Qh(a);else if(a instanceof hh)b=new Th(a,this.Ed);else if(a instanceof Zd)b=new bi(a,this.ge);else if(a instanceof mh)b=new Rh(a);else throw new D(513);b=b.ec();return new Kg(b,a.$())};function gi(a){T.call(this,0,1);this.O=a}t(gi,T);gi.prototype.toString=function(){return"delete("+this.O.getName()+")"};gi.prototype.ea=function(a,b){var c=b[0].entries.map(function(a){return a.sa});a.remove(this.O,c);return[sd()]};function hi(a,b){T.call(this,0,-1);this.table=b;this.C=a.i(ic)}t(hi,T);hi.prototype.toString=function(){return"get_row_count("+this.table.getName()+")"};hi.prototype.ea=function(){var a=this.C.get(Ie(this.table)),b=new F([],[this.table.getName()]),c=vg(),a=a.Ma().oa;null===b.Va&&(b.Va=A());b.Va.set(c.m(),a);return[b]};function ii(a,b){T.call(this,0,-1);this.S=a.i(hc);this.C=a.i(ic);this.table=b}t(ii,T);ii.prototype.toString=function(){var a="table_access("+this.table.getName();null===this.table.Wa()||(a+=" as "+this.table.Wa());return a+")"};ii.prototype.ea=function(){var a=this.C.get(Ie(this.table)).Xa();return[vd(Ze(this.S,a),[I(this.table)])]};function ji(a){this.g=a}t(ji,$g);ji.prototype.kb=function(a,b){this.Z=a;if(!this.yd(b))return a;var c=bg(a,function(a){return a instanceof ii})[0],d=new hi(this.g,c.table);gg(c,c,d,d);return this.Z};ji.prototype.yd=function(a){return 1==a.f.length&&1==a.b.length&&null==a.s&&null==a.W&&null==a.M&&null==a.ja?(a=a.f[0],a instanceof R&&"COUNT"==a.Gb&&a.child instanceof ug):!1};function ki(a){T.call(this,0,1);this.Ee=a}t(ki,T);ki.prototype.toString=function(){return"groupBy("+this.Ee.map(function(a){return a.m()}).toString()+")"};ki.prototype.ea=function(a,b){return li(this,b[0])};function li(a,b){var c=new Kc,d=function(a){return this.Ee.map(function(b){return H(a,b)},this).join(",")}.bind(a);b.entries.forEach(function(a){c.set(d(a),a)},a);return c.keys().map(function(a){return new F(c.get(a),G(b))},a)};function mi(a,b,c){T.call(this,0,0);this.C=a.i(ic);this.S=a.i(hc);this.I=b;this.Nb=c;this.vd="eq"==this.I.F?0:2;this.Ge=null}t(mi,T);var ni=["hash","index_nested_loop","nested_loop"];mi.prototype.toString=function(){return"join(type: "+(this.Nb?"outer":"inner")+", impl: "+ni[this.vd]+", "+this.I.toString()+")"};
mi.prototype.ea=function(a,b){switch(this.vd){case 0:return[og(this.I,b[0],b[1],this.Nb)];case 1:return[pg(this.I,b[0],b[1],this.Ge,this.S)];default:var c=this.I,d=b[0],e=b[1],f=this.Nb,h=[d,e];f||(h=lg(c,d,e));for(var d=h[0],e=h[1],h=[],k=G(d),n=G(e),x=d.entries.length,S=e.entries.length,oa=S+256-1>>8,Ya=0;Ya<oa;){for(var Tb=0;Tb<x;Tb++){var Rf=!1,Sf=H(d.entries[Tb],c.ga);if(null!==Sf)for(var pi=Math.min(Ya+1<<8,S),Nc=Ya<<8;Nc<pi;Nc++)if(c.rc(Sf,H(e.entries[Nc],c.la))){var Rf=!0,qj=zd(d.entries[Tb],
k,e.entries[Nc],n);h.push(qj)}f&&!Rf&&h.push(ng(c,d.entries[Tb],k))}Ya++}c=G(d).concat(G(e));return[new F(h,c)]}};function oi(a,b){a.vd=1;var c=a.C.get(b.wa().m());a.Ge={Rf:b,fg:b==a.I.ga?a.I.la:a.I.ga,index:c}};function qi(a){T.call(this,0,-1);this.$e=a}t(qi,T);qi.prototype.toString=function(){return"no_op_step("+G(this.$e[0]).join(",")+")"};qi.prototype.ea=g("$e");function ri(){}t(ri,$g);ri.prototype.kb=function(a,b){this.Z=a;if(!this.yd(b))return a;bg(a,function(a){return a instanceof mi}).forEach(this.og,this);return this.Z};ri.prototype.yd=function(a){return 1<a.b.length};
ri.prototype.og=function(a){if("eq"==a.I.F&&!a.Nb){var b=function(b){if(!(b instanceof ii))return null;b=I(b.table)==I(a.I.la.G())?a.I.la:a.I.ga;return ea(b.wa())?null:b},c=b(Kd(a,0)),b=b(Kd(a,1));if(null!==c||null!==b){b=null===b?c:b;oi(a,b);var d=new F([],[I(b.G())]);Nd(a,new qi([d]),b==c?0:1)}}};function si(a){a=a.map(function(a){return a.Bb()});a=Fb.apply(null,a);var b=[];Eb(a,function(a){b.push(a)});return b}function ti(a){this.Mb=a}ti.prototype.ad=function(){return 1==this.Mb.f.length?[ld()]:[this.Mb.f.map(function(){return ld()})]};function ui(a,b){this.Mb=a;this.Aa=b;this.Cd=this.Oe=null}
function vi(a,b){var c=A();a.Aa.keys().forEach(function(a){var e=this.Aa.get(a).map(function(a){return Vd(b,a)},this),f=new Yf([ld()]);e.forEach(function(a){var b=null;"between"==a.F?b=new gd(a.value[0],a.value[1],!1,!1):"eq"==a.F?(b=a.value,b=new gd(b,b,!1,!1)):b="gte"==a.F?new gd(a.value,E,!1,!1):"gt"==a.F?new gd(a.value,E,!0,!1):"lte"==a.F?new gd(E,a.value,!1,!1):new gd(E,a.value,!1,!0);a=a.Ya?hd(b):[b];a=new Yf(a);f=Zf(f,a)});c.set(a,f)},a);return c}
ui.prototype.ad=function(a){if(this.Oe==a)return this.Cd;for(var b=vi(this,a),c=this.Mb.f.length-1;0<=c;c--){var d=this.Mb.f[c];if(null!==(b.get(d.ca.getName())||null))break;b.set(d.ca.getName(),new Yf([ld()]))}this.Cd=1==this.Mb.f.length?B(b)[0].Bb():si(wi(this,b));this.Oe=a;return this.Cd};function wi(a,b){var c=A(),d=0;a.Mb.f.forEach(function(a){c.set(a.ca.getName(),d);d++});return Yb(b).sort(function(a,b){return c.get(a)-c.get(b)}).map(function(a){return b.get(a)})};function xi(a,b){this.kf=b;this.C=a.i(ic)}function yi(a,b,c){c=c.filter(a.Wf,a);if(0==c.length)return null;a=zi(a,c);if(0==a.length)return null;if(1==a.length)return a[0];var d=Number.MAX_VALUE;return a.reduce(function(a,c){var h=Ai(c,b);return h<d?(d=h,c):a},null)}
function zi(a,b){return a.kf.xa().map(function(a){a=new Bi(this.C,a);Ci(a,b);return a},a).filter(function(a){if(null===a.Aa)a=!1;else{for(var b=!1,e=!0,f=0;f<a.ub.f.length;f++){var h=a.Aa.has(a.ub.f[f].ca.getName());if(b&&h){e=!1;break}h||(b=!0)}a=e}return a})}xi.prototype.Wf=function(a){var b;if(b=a instanceof Rd)Sd(a),b=null!==a.value&&("between"==a.F||"eq"==a.F||"gt"==a.F||"gte"==a.F||"lt"==a.F||"lte"==a.F);return b?a.N.G()==this.kf:!1};
function Bi(a,b){this.C=a;this.ub=b;this.Sf=C(this.ub.f.map(function(a){return a.ca.getName()}));this.Qd=this.Aa=null}function Di(a){null===a.Qd&&(a.Qd=new ui(a.ub,a.Aa));return a.Qd}function Ci(a,b){b.forEach(function(a){var b=a.eb()[0].getName();this.Sf.has(b)&&(null===this.Aa&&(this.Aa=new Kc),this.Aa.set(b,a.V()))},a)}function Ai(a,b){var c=Di(a).ad(b),d=a.C.get(a.ub.m());return c.reduce(function(a,b){return a+d.Yc(b)},0)};function Ei(a,b,c,d){T.call(this,0,-1);this.C=a.i(ic);this.index=b;this.Ne=c;this.ee=d;this.Rc=this.Qc=!1}t(Ei,T);Ei.prototype.toString=function(){return"index_range_scan("+this.index.m()+", ?, "+(this.ee?"reverse":"natural")+(this.Qc?", limit:?":"")+(this.Rc?", skip:?":"")+")"};Ei.prototype.Oc=function(a){var b=this.toString(),c=this.Ne.ad(a),b=b.replace("?",c.toString());this.Qc&&(b=b.replace("?",a.W.toString()));this.Rc&&(b=b.replace("?",a.M.toString()));return b};
Ei.prototype.ea=function(a,b,c){a=this.Ne.ad(c);b=this.C.get(this.index.m());c=(1==a.length&&a[0]instanceof gd&&md(a[0])?cf(b.get(a[0].b),!1,this.Qc?c.W:void 0,this.Rc?c.M:void 0):b.Xa(a,this.ee,this.Qc?c.W:void 0,this.Rc?c.M:void 0)).map(function(a){return new z(a,{})},this);return[vd(c,[this.index.Nc])]};function Fi(a){T.call(this,0,1);this.md=a}t(Fi,T);Fi.prototype.toString=l("select(?)");Fi.prototype.Oc=function(a){a=Vd(a,this.md);return this.toString().replace("?",a.toString())};Fi.prototype.ea=function(a,b,c){return[Vd(c,this.md).eval(b[0])]};function Gi(a,b){T.call(this,0,1);this.S=a.i(hc);this.O=b}t(Gi,T);Gi.prototype.toString=function(){return"table_access_by_row_id("+this.O.getName()+")"};Gi.prototype.ea=function(a,b){return[vd(Ze(this.S,pd(b[0])),[I(this.O)])]};function Hi(a){this.g=a}t(Hi,$g);Hi.prototype.kb=function(a,b){this.Z=a;bg(a,function(a){return a instanceof ii}).forEach(function(a){var d=Ii(a);if(0!=d.length){var e=yi(new xi(this.g,a.table),b,d.map(function(a){return Vd(b,a.md)}));if(null!==e){var f=A();d.forEach(function(a){f.set(a.md,a)},this);this.Z=Ji(this,e,f,a)}}},this);return this.Z};function Ii(a){var b=[];for(a=a.getParent();a;)a instanceof Fi&&b.push(a),a=a.getParent();return b}
function Ji(a,b,c,d){(null===b.Aa?[]:b.Aa.values()).map(function(a){return c.get(a)}).forEach(cg);b=new Ei(a.g,b.ub,Di(b),!1);a=new Gi(a.g,d.table);L(a,b);gg(d,d,a,b);return b.fb()};function Ki(a,b){T.call(this,0,-1);this.C=a.i(ic);this.O=b}t(Ki,T);Ki.prototype.toString=function(){return"insert("+this.O.getName()+")"};Ki.prototype.ea=function(a,b,c){Li(this.O,c.values,this.C);a.vb(this.O,c.values);return[vd(c.values,[this.O.getName()])]};function Li(a,b,c){a=a.Ab().bd();if(null===a?0:a.f[0].autoIncrement){var d=a.f[0].ca.getName();c=c.get(a.m()).max();var e=null===c?0:c[0];b.forEach(function(a){if(0==a.o[d]||null==a.o[d])e++,a.o[d]=e})}}
function Mi(a,b){T.call(this,0,-1);this.C=a.i(ic);this.O=b}t(Mi,T);Mi.prototype.toString=function(){return"insert_replace("+this.O.getName()+")"};Mi.prototype.ea=function(a,b,c){Li(this.O,c.values,this.C);a.Ld(this.O,c.values);return[vd(c.values,[this.O.getName()])]};function Ni(){T.call(this,0,1)}t(Ni,T);Ni.prototype.toString=l("limit(?)");Ni.prototype.Oc=function(a){return this.toString().replace("?",a.W.toString())};Ni.prototype.ea=function(a,b,c){b[0].entries.splice(c.W);return b};function Oi(a){T.call(this,0,1);this.L=a}t(Oi,T);m=Oi.prototype;m.toString=function(){return"order_by("+$d(this.L)+")"};m.ea=function(a,b){if(1==b.length){var c;c=b[0];for(var d=null,e=0;e<this.L.length;e++){var f=wg(this.L[e].N);if(null!==c.Va&&c.Va.has(f.m())){d=f;break}}c=d;(null===c?b[0]:qd(b[0],c)).entries.sort(this.If.bind(this))}else b.sort(this.rg.bind(this));return b};
m.U=function(a,b){var c=null,d=null,e=null,f=-1;do f++,e=this.L[f].N,c=this.L[f].ib,d=a(e),e=b(e);while(d==e&&f+1<this.L.length);d=d<e?-1:d>e?1:0;return 1==c?d:-d};m.rg=function(a,b){return this.U(function(b){return b instanceof R?qd(a,b):H(a.entries[a.entries.length-1],b)},function(a){return a instanceof R?qd(b,a):H(b.entries[b.entries.length-1],a)})};m.If=function(a,b){return this.U(function(b){return H(a,b)},function(a){return H(b,a)})};function Pi(a,b){this.Ha=a;this.J=b}function Qi(a){return a.J.some(function(a){return a instanceof R},a)?Ri(a):Si(a)}function Ri(a){if(1==a.J.length&&"DISTINCT"==a.J[0].Gb)return a=qd(a.Ha,a.J[0]).entries.map(function(a){var b=new wd(new z(-1,{}),1<this.Ha.K.size);yd(b,this.J[0],H(a,this.J[0].child));return b},a),new F(a,[]);var b=new wd(new z(-1,{}),1<a.Ha.K.size);a.J.forEach(function(a){var d=a instanceof R?qd(this.Ha,a):H(this.Ha.entries[0],a);yd(b,a,d)},a);return new F([b],G(a.Ha))}
function Si(a){var b=Array(a.Ha.entries.length),c=1<a.Ha.K.size;a.Ha.entries.forEach(function(a,e){b[e]=new wd(new z(a.sa.id(),{}),c);this.J.forEach(function(c){yd(b[e],c,H(a,c))},this)},a);return new F(b,G(a.Ha))}function Ti(a,b){var c=a.map(function(a){return Qi(new Pi(a,b)).entries[0]});return new F(c,G(a[0]))};function Ui(a,b){T.call(this,0,1);this.f=a;this.Lb=b}t(Ui,T);Ui.prototype.toString=function(){var a="project("+this.f.toString();if(null!==this.Lb)var b=this.Lb.map(function(a){return a.m()}).join(", "),a=a+(", groupBy("+b+")");return a+")"};Ui.prototype.ea=function(a,b){var c;0==b.length?c=[sd()]:1==b.length?(c=b[0],c=[0==this.f.length?c:Qi(new Pi(c,this.f))]):c=[Ti(b,this.f)];return c};function Vi(a){return a.f.some(function(a){return a instanceof R})||null!==a.Lb};function Wi(){T.call(this,0,1)}t(Wi,T);Wi.prototype.toString=l("skip(?)");Wi.prototype.Oc=function(a){return this.toString().replace("?",a.M.toString())};Wi.prototype.ea=function(a,b,c){return[new F(b[0].entries.slice(c.M),G(b[0]))]};function Xi(){}t(Xi,$g);Xi.prototype.kb=function(a,b){if(!q(b.W)&&!q(b.M))return a;var c=Yi(a);if(null===c)return a;bg(a,function(a){return a instanceof Ni||a instanceof Wi}).forEach(function(a){a instanceof Ni?c.Qc=!0:c.Rc=!0;cg(a)},this);return c.fb()};function Yi(a){a=bg(a,function(a){return a instanceof Ei},function(a){return a instanceof Ui&&Vi(a)||a instanceof Oi||1!=K(a).length||a instanceof Fi});return 0<a.length?a[0]:null};function Zi(a){this.g=a}t(Zi,$g);Zi.prototype.kb=function(a,b){var c=$i(a,b);if(null===c)return a;var d;a:{var e=c;d=aj(Kd(c,0));if(null!==d){var f;f=c.L;for(var h=null,k=d.table.xa(),n=0;n<k.length&&null===h;n++)h=bj(k[n],f);f=h;if(null===f){d=e;break a}e=new Ei(this.g,f.ub,new ti(f.ub),f.Ke);f=new Gi(this.g,d.table);L(f,e);cg(c);e=gg(d,d,f,e)}d=e}if(d==c)a:if(d=c,e=cj(Kd(c,0)),null!==e){f=bj(e.index,c.L);if(null===f)break a;e.ee=f.Ke;d=cg(c).parent}return d.fb()};
function cj(a){a=bg(a,function(a){return a instanceof Ei},function(a){return 1!=K(a).length});return 0<a.length?a[0]:null}function aj(a){a=bg(a,function(a){return a instanceof ii},function(a){return 1!=K(a).length});return 0<a.length?a[0]:null}function $i(a,b){return q(b.L)?bg(a,function(a){return a instanceof Oi})[0]:null}function bj(a,b){if(a.f.length!=b.length||!b.every(function(b,c){return b.N.getName()==a.f[c].ca.getName()}))return null;var c=dj(b,a);return c[0]||c[1]?{ub:a,Ke:c[1]}:null}
function dj(a,b){var c=a.reduce(function(a,b){return a<<1|(0==b.ib?0:1)},0),d=b.f.reduce(function(a,b){return a<<1|(0==b.ib?0:1)},0),c=c^d;return[0==c,c==Math.pow(2,Math.max(a.length,b.f.length))-1]};function ej(a,b,c){this.Ba=a;this.ae=b;this.Sb=c}ej.prototype.ec=function(){this.Sb.forEach(function(a){this.Ba=a.kb(this.Ba,this.ae)},this);return this.Ba};function fj(a,b){T.call(this,0,1);this.O=a;this.Ag=b}t(fj,T);fj.prototype.toString=function(){return"update("+this.O.getName()+")"};fj.prototype.ea=function(a,b){var c=b[0].entries.map(function(a){var b=this.O.Jb(a.sa.Ia());this.Ag.forEach(function(a){b.o[a.N.getName()]=a.value},this);return b},this);a.update(this.O,c);return[sd()]};function gj(a){this.g=a;this.ge=[new ri,new Hi(this.g),new Zi(this.g),new Xi,new ji(this.g)];this.Ed=[new Hi(this.g)]}gj.prototype.create=function(a,b){var c=a.fb();if(c instanceof Ng||c instanceof Mg)return hj(this,a,b);if(c instanceof Tg||c instanceof Xg||c instanceof Yg)return hj(this,a,b,this.ge);if(c instanceof Og||c instanceof Pg)return hj(this,a,b,this.Ed);throw new D(8);};function hj(a,b,c,d){a=$f(b.fb(),a.eg.bind(a));null!=d&&(a=(new ej(a,c,d)).ec());return new ae(a,b.$())}
gj.prototype.eg=function(a){if(a instanceof Tg)return new Ui(a.f,a.Lb);if(a instanceof Wg)return new ki(a.f);if(a instanceof Vg)return new Ag(a.f);if(a instanceof Ug)return new Oi(a.L);if(a instanceof Yg)return new Wi;if(a instanceof Xg)return new Ni;if(a instanceof Qg)return new Fi(a.I.V());if(a instanceof Sg)return new eh;if(a instanceof Zg)return new mi(this.g,a.I,a.Nb);if(a instanceof Rg)return new ii(this.g,a.table);if(a instanceof Og)return new gi(a.table);if(a instanceof Pg)return new fj(a.table,
a.me);if(a instanceof Ng)return new Mi(this.g,a.table);if(a instanceof Mg)return new Ki(this.g,a.table);throw new D(514);};function ij(a){this.cg=new fi;this.mg=new gj(a)};function jj(){this.Re=A()}function kj(a,b){var c=a.Re.get(b.getName())||null;null===c&&(c=new lj,a.Re.set(b.getName(),c));return c}function mj(a,b,c,d){c.forEach(function(a){a=kj(this,a);0==d?(a.Za=null,a.sc=b):3==d?(null===a.Ub&&(a.Ub=C()),a.Ub.add(b),null===a.Qa&&(a.Qa=C()),a.Qa.delete(b)):1==d?(null===a.Qa&&(a.Qa=C()),a.Qa.add(b)):2==d&&(a.Za=b)},a)}
function nj(a,b,c,d){var e=!0;c.forEach(function(a){if(e){a=kj(this,a);var c=null===a.Qa||0==a.Qa.size;e=0==d?(null===a.Ub||0==a.Ub.size)&&c&&null===a.sc&&null!==a.Za&&a.Za==b:3==d?null===a.sc&&null===a.Za&&null!==a.Qa&&a.Qa.has(b):1==d?null===a.Za:c&&(null===a.Za||a.Za==b)}},a);return e}function oj(a,b,c,d){var e=nj(a,b,c,d);e&&mj(a,b,c,d);return e}jj.prototype.releaseLock=function(a,b){b.forEach(function(b){kj(this,b).releaseLock(a)},this)};
function pj(a,b){b.forEach(function(a){kj(this,a).Za=null},a)}function lj(){this.Ub=this.Qa=this.Za=this.sc=null}lj.prototype.releaseLock=function(a){this.sc==a&&(this.sc=null);this.Za==a&&(this.Za=null);null===this.Qa||this.Qa.delete(a);null===this.Ub||this.Ub.delete(a)};function rj(){this.Rb=new sj;this.Cc=new jj}function ie(a,b){(2>b.getPriority()||2>b.getPriority())&&pj(a.Cc,b.$());a.Rb.vb(b);tj(a);return b.Kb().ha}function tj(a){for(var b=a.Rb.Bb(),c=0;c<b.length;c++){var d=b[c],e=!1;if(e=0==d.H()?uj(a,d,1,3):uj(a,d,2,0))a.Rb.remove(d),e=a,d.exec().then(e.kg.bind(e,d),e.jg.bind(e,d))}}function uj(a,b,c,d){var e=!1;oj(a.Cc,b.V(),b.$(),c)&&(e=oj(a.Cc,b.V(),b.$(),d));return e}rj.prototype.kg=function(a,b){this.Cc.releaseLock(a.V(),a.$());a.Kb().resolve(b);tj(this)};
rj.prototype.jg=function(a,b){this.Cc.releaseLock(a.V(),a.$());a.Kb().reject(b);tj(this)};function sj(){this.Rb=[]}sj.prototype.vb=function(a){bf(this.Rb,a,function(a,c){var d=a.getPriority()-c.getPriority();return 0==d?a.V()-c.V():d})};sj.prototype.Bb=function(){return this.Rb.slice()};sj.prototype.remove=function(a){var b=this.Rb;a=ya(b,a);var c;(c=0<=a)&&xa.splice.call(b,a,1);return c};function vj(a,b){this.Fd=Bd.wc();this.be=a;this.hd=b;this.J=wj(this)}function wj(a){if(0<a.be.f.length)return a.be.f;var b=[];a.be.b.forEach(function(a){a.eb().forEach(function(a){b.push(a)})});return b}vj.prototype.U=function(a,b){return this.J.every(function(c){return Hd(this.Fd,c.H(),"eq")(H(a,c),H(b,c))},this)};
function xj(a,b,c){var d=null===b?[]:b.entries,e=wb(d,c.entries,a.U.bind(a),function(a){return d[a]});b=[];for(var f=0,h=0;h<d.length;h++){var k=d[h];e[f]==k?f++:(k=a.hd.splice(f,1),k=yj(h,k,0,a.hd),b.push(k))}e=wb(d,c.entries,a.U.bind(a),function(a,b){return c.entries[b]});for(h=f=0;h<c.entries.length;h++)k=c.entries[h],e[f]==k?f++:(a.hd.splice(h,0,k.sa.o),k=yj(h,[],1,a.hd),b.push(k));return b}function yj(a,b,c,d){return{Cg:c,index:a,object:d,Fg:b,type:"splice"}};function zj(){this.cc=A()}zj.prototype.ud=function(a,b){var c=ja(a.a).toString(),d=this.cc.get(c)||null;null===d&&(d=new Aj(a),this.cc.set(c,d));d.ud(b)};zj.prototype.ce=function(a,b){var c=ja(a.a).toString(),d=this.cc.get(c)||null;d.ce(b);0<d.Gc.size||this.cc.delete(c)};function he(a,b){var c=C();b.forEach(function(a){c.add(a.getName())});var d=[];a.cc.forEach(function(a){a=a.yc();a.context.b.some(function(a){return c.has(a.getName())})&&d.push(a)});return d}
function fe(a,b,c){b=ja(null!=b.Xc?b.Xc:b).toString();a=a.cc.get(b)||null;null!==a&&Bj(a,c)}function Aj(a){this.xf=a;this.Gc=C();this.hg=[];this.Pe=null;this.Gf=new vj(a.a,this.hg)}Aj.prototype.ud=function(a){this.Gc.has(a)||this.Gc.add(a)};Aj.prototype.ce=function(a){return this.Gc.delete(a)};Aj.prototype.yc=function(){var a=this.xf;return{context:a.a,$d:Ch(a)}};function Bj(a,b){var c=xj(a.Gf,a.Pe,b);a.Pe=b;0<c.length&&a.Gc.forEach(function(a){a(c)})};function Cj(a,b){var c=a.i(mc),d=b||{},e=new Ye(c);a.jb(hc,e);var e=null,f=!1;null!=d.storeType?e=d.storeType:(q(Xb)||(Xb=new Wb),e=Xb,e=e.Tf?0:e.Bg?4:1);switch(e){case 0:e=new Fe(a,c);break;case 1:e=new Ke(c);break;case 5:e=new Me(c);break;case 4:e=new Ue(a,c,d.webSqlDbSize);break;case 3:e=new ue(c,d.firebase);f=!0;break;default:throw new D(300);}a.jb(gc,e);var h=new Xf;a.jb(ic,h);return e.Ea(d.onUpgrade).then(function(){var b=new ij(a);a.jb(jc,b);b=new rj;a.jb(kc,b);b=new zj;a.jb(lc,b);return h.Ea(c)}).then(function(){if(f){var b=
new je(a);b.Ja.subscribe(b.Vd.bind(b))}return(new Of(a)).Ea(c)})};function Dj(a){this.g=a;this.j=a.i(mc);this.aa=C(this.j.ra());this.$a=y()}m=Dj.prototype;m.exec=function(){var a=this.g.i(ic),b=this.g.i(hc),c={};this.j.ra().forEach(function(d){var f=a.get(Ie(d)).Xa(),f=Ze(b,f).map(function(a){return a.o});c[d.getName()]=f});var d={name:this.j.name(),version:this.j.version(),tables:c},d=new wd(new z(-1,d),!0);return w([new F([d],[])])};m.H=l(0);m.$=g("aa");m.Kb=g("$a");m.V=function(){return ja(this)};m.getPriority=l(0);function Ej(a,b){this.g=a;this.j=a.i(mc);this.aa=C(this.j.ra());this.$a=y();this.ua=b;this.Ja=a.i(gc);this.S=a.i(hc);this.C=a.i(ic)}m=Ej.prototype;
m.exec=function(){if(!(this.Ja instanceof Fe||this.Ja instanceof Ke||this.Ja instanceof Ue))throw new D(300);var a;a:{a=this.j.ra();for(var b=0;b<a.length;++b)if(0<this.C.get(Ie(a[b])).Ma().oa){a=!1;break a}a=!0}if(!a)throw new D(110);if(this.j.name()!=this.ua.name||this.j.version()!=this.ua.version)throw new D(111);if(null==this.ua.tables)throw new D(112);return Fj(this)};m.H=l(1);m.$=g("aa");m.Kb=g("$a");m.V=function(){return ja(this)};m.getPriority=l(0);
function Fj(a){var b=new bd(a.g,a.aa),b=a.Ja.zb(a.H(),b),c;for(c in a.ua.tables){var d=a.j.table(c),e=a.ua.tables[c].map(function(a){return d.rb(a)}),f=b.G(c,d.Jb);a.S.Tb(c,e);var h=a.C.hc.get(c)||[];e.forEach(function(a){h.forEach(function(b){var c=a.Cb(b.getName());b.add(c,a.id())})});f.put(e)}return b.ia()};function Gj(a,b){this.g=a;this.Ja=a.i(gc);this.Ca=a.i(kc);this.Db=a.i(lc);this.aa=C(b);this.Oa=new bd(this.g,this.aa);this.$a=y();this.tc=y();this.pe=y()}m=Gj.prototype;m.exec=function(){this.pe.resolve();return this.tc.ha};m.H=l(1);m.$=g("aa");m.Kb=g("$a");m.V=function(){return ja(this)};m.getPriority=l(2);function Hj(a){ie(a.Ca,a);return a.pe.ha}
function Ij(a,b){var c=b.yc();return c.$d.fb().exec(a.Oa,c.context).then(function(a){return od(a[0])},function(a){this.Oa.Eb();var b=new jb(a.name);this.tc.reject(b);throw a;}.bind(a))}m.ia=function(){this.Ja.zb(this.H(),this.Oa).ia().then(function(){this.Lc();this.tc.resolve()}.bind(this),function(a){this.Oa.Eb();this.tc.reject(a)}.bind(this));return this.$a.ha};m.Eb=function(){this.Oa.Eb();this.tc.resolve();return this.$a.ha};
m.Lc=function(){var a=he(this.Db,this.aa);0!=a.length&&(a=new ee(this.g,a),ie(this.Ca,a))};function Jj(a){this.g=a;this.Ca=a.i(kc);this.Pc=null;this.Ra=0;0==Kj.size&&(Kj.set(0,C([1,4])),Kj.set(1,C([2])),Kj.set(2,C([3,5,6])),Kj.set(3,C([2,7])),Kj.set(4,C([7])),Kj.set(5,C([7])),Kj.set(6,C([7])))}r("lf.proc.Transaction",Jj);var Kj=A();function Lj(a,b){var c=Kj.get(a.Ra)||null;if(null===c||!c.has(b))throw new D(107,a.Ra,b);a.Ra=b}
Jj.prototype.exec=function(a){Lj(this,4);var b=[];try{a.forEach(function(a){a.bb();b.push(a.yc())},this)}catch(c){return Lj(this,7),bb(c)}a=new fh(this.g,b);return ie(this.Ca,a).then(function(a){Lj(this,7);return a.map(function(a){return od(a)})}.bind(this),function(a){Lj(this,7);throw a;}.bind(this))};Jj.prototype.exec=Jj.prototype.exec;Jj.prototype.vf=function(a){Lj(this,1);this.Pc=new Gj(this.g,a);return Hj(this.Pc).then(function(){Lj(this,2)}.bind(this))};Jj.prototype.begin=Jj.prototype.vf;
Jj.prototype.uf=function(a){Lj(this,3);return Ij(this.Pc,a).then(function(a){Lj(this,2);return a}.bind(this),function(a){Lj(this,7);throw a;}.bind(this))};Jj.prototype.attach=Jj.prototype.uf;Jj.prototype.ia=function(){Lj(this,5);return this.Pc.ia().then(function(){Lj(this,7)}.bind(this))};Jj.prototype.commit=Jj.prototype.ia;Jj.prototype.Eb=function(){Lj(this,6);return this.Pc.Eb().then(function(){Lj(this,7)}.bind(this))};Jj.prototype.rollback=Jj.prototype.Eb;function W(a){this.g=a;this.j=a.i(mc);this.Kd=!1}r("lf.proc.Database",W);W.prototype.Ea=function(a){this.g.jb(mc,this.j);return Cj(this.g,a).then(function(){this.Kd=!0;this.Ca=this.g.i(kc);return this}.bind(this))};W.prototype.init=W.prototype.Ea;W.prototype.tb=g("j");W.prototype.getSchema=W.prototype.tb;function Mj(a){if(!a.Kd)throw new D(2);}W.prototype.select=function(a){Mj(this);return new V(this.g,1!=arguments.length||null!=arguments[0]?Array.prototype.slice.call(arguments):[])};
W.prototype.select=W.prototype.select;W.prototype.vb=function(){Mj(this);return new Eh(this.g)};W.prototype.insert=W.prototype.vb;W.prototype.Ld=function(){Mj(this);return new Eh(this.g,!0)};W.prototype.insertOrReplace=W.prototype.Ld;W.prototype.update=function(a){Mj(this);return new Oh(this.g,a)};W.prototype.update=W.prototype.update;W.prototype.delete=function(){Mj(this);return new Dh(this.g)};W.prototype["delete"]=W.prototype.delete;
W.prototype.observe=function(a,b){Mj(this);this.g.i(lc).ud(a,b)};W.prototype.observe=W.prototype.observe;W.prototype.unobserve=function(a,b){Mj(this);this.g.i(lc).ce(a,b)};W.prototype.unobserve=W.prototype.unobserve;W.prototype.Ef=function(){Mj(this);return new Jj(this.g)};W.prototype.createTransaction=W.prototype.Ef;W.prototype.close=function(){try{this.g.i(gc).close()}catch(a){}this.g.clear();this.Kd=!1};W.prototype.close=W.prototype.close;
W.prototype.Mf=function(){Mj(this);var a=new Dj(this.g);return ie(this.Ca,a).then(function(a){return od(a[0])[0]})};W.prototype["export"]=W.prototype.Mf;W.prototype.import=function(a){Mj(this);a=new Ej(this.g,a);return ie(this.Ca,a).then(l(null))};W.prototype["import"]=W.prototype.import;function X(a,b,c,d,e,f){this.O=a;this.u=b;this.Le=c;this.Je=d;this.of=e;this.ab=f||null}r("lf.schema.BaseColumn",X);m=X.prototype;m.getName=g("u");m.m=function(){return I(this.O)+"."+this.u};m.toString=function(){return this.m()};m.G=g("O");m.H=g("of");X.prototype.getType=X.prototype.H;X.prototype.Wa=g("ab");X.prototype.xa=function(){null==this.ka&&(this.ka=[],this.G().xa().forEach(function(a){-1!=a.f.map(function(a){return a.ca.getName()}).indexOf(this.u)&&this.ka.push(a)},this));return this.ka};
X.prototype.wa=function(){if(!q(this.fa)){var a=this.xa().filter(function(a){return 1!=a.f.length?!1:a.f[0].ca.getName()==this.getName()},this);this.fa=0<a.length?a[0]:null}return this.fa};X.prototype.Ac=g("Je");X.prototype.isNullable=X.prototype.Ac;X.prototype.Bc=g("Le");X.prototype.Na=function(a){return qg(this,a,"eq")};X.prototype.eq=X.prototype.Na;X.prototype.Se=function(a){return qg(this,a,"neq")};X.prototype.neq=X.prototype.Se;X.prototype.Rd=function(a){return qg(this,a,"lt")};
X.prototype.lt=X.prototype.Rd;X.prototype.dg=function(a){return qg(this,a,"lte")};X.prototype.lte=X.prototype.dg;X.prototype.Of=function(a){return qg(this,a,"gt")};X.prototype.gt=X.prototype.Of;X.prototype.Pf=function(a){return qg(this,a,"gte")};X.prototype.gte=X.prototype.Pf;X.prototype.match=function(a){return qg(this,a,"match")};X.prototype.match=X.prototype.match;X.prototype.wf=function(a,b){return qg(this,[a,b],"between")};X.prototype.between=X.prototype.wf;
X.prototype.Qf=function(a){return qg(this,a,"in")};X.prototype["in"]=X.prototype.Qf;X.prototype.Zf=function(){return this.Na(null)};X.prototype.isNull=X.prototype.Zf;X.prototype.Yf=function(){return this.Se(null)};X.prototype.isNotNull=X.prototype.Yf;X.prototype.lc=function(a){return new X(this.O,this.u,this.Le,this.Je,this.of,a)};X.prototype.as=X.prototype.lc;function Nj(){this.pd=A()}var Oj;Nj.prototype.clear=function(){this.pd.clear()};Nj.prototype.clear=Nj.prototype.clear;Nj.prototype.jb=function(a,b){this.pd.set(a.toString(),b);return b};Nj.prototype.registerService=Nj.prototype.jb;Nj.prototype.i=function(a){var b=this.pd.get(a.toString())||null;if(null===b)throw new D(7,a.toString());return b};Nj.prototype.getService=Nj.prototype.i;Nj.prototype.Pd=function(a){return this.pd.has(a.toString())};Nj.prototype.isRegistered=Nj.prototype.Pd;function Pj(a){this.j=a;this.zd=new Kc;this.de=new Kc;this.Ue=new Kc;this.xe=A();this.h=new Kc;this.ue=new Kc;this.af=new Kc;this.we=new Kc;Qj(this)}function Qj(a){a.j.ra().forEach(function(a){var c=a.getName();a.Ab().Id().forEach(function(d){this.Ue.set(c,this.j.table(d.Pa));this.h.set(d.Pa,a);0==d.action?(this.de.set(d.Pa,d),this.af.set(d.Pa,a)):(this.zd.set(d.Pa,d),this.ue.set(d.Pa,a));this.xe.set(a.getName()+"."+d.pb,d.Pa);this.we.set(d.Pa+"."+d.Ic,a.getName())},this)},a)}
function Tc(a,b,c){if(null!=c)return 1==c?a.zd.get(b):a.de.get(b);c=a.zd.get(b);a=a.de.get(b);return null===c&&null===a?null:(c||[]).concat(a||[])}function lh(a,b){var c=b.get(a);return null===c?[]:c}function nh(a,b){var c=C();b.forEach(function(a){(a=this.xe.get(a))&&c.add(a)},a);return nc(c).map(function(a){return this.j.table(a)},a)}function jh(a,b,c){return null!=c?0==c?lh(b,a.af):lh(b,a.ue):lh(b,a.h)}
function oh(a,b){var c=C();b.forEach(function(a){(a=this.we.get(a))&&a.forEach(function(a){c.add(a)})},a);return nc(c).map(function(a){return this.j.table(a)},a)};function Rj(a,b,c){this.ng=a;this.gg=b;this.Nf=c}r("lf.schema.Constraint",Rj);Rj.prototype.bd=g("ng");Rj.prototype.getPrimaryKey=Rj.prototype.bd;Rj.prototype.Id=g("Nf");Rj.prototype.getForeignKeys=Rj.prototype.Id;function Sj(a,b,c){var d=a.ref.split(".");if(2!=d.length)throw new D(540,c);this.zf=b;this.pb=a.local;this.Pa=d[0];this.Ic=d[1];this.name=b+"."+c;this.action=a.action;this.timing=a.timing};function Y(a){Tj(a);this.Fd=Bd.wc();this.u=a;this.J=A();this.rd=C();this.ic=C();this.Fc=C();this.za=null;this.ka=A();this.ld=!1;this.sb=[]}r("lf.schema.TableBuilder",Y);function Uj(a){this.name=a.name;this.ib=a.order;this.autoIncrement=a.autoIncrement}var Vj=C([0,6]);function Tj(a){if(!/^[A-Za-z_][A-Za-z0-9_]*$/.test(a))throw new D(502,a);}function Wj(a,b){if(b==a.u)throw new D(546,b);if(a.J.has(b)||a.ka.has(b)||a.ic.has(b))throw new D(503,a.u+"."+b);}
function Xj(a,b){var c=!1;b.forEach(function(a){var b=this.J.get(a.name);c=c||a.autoIncrement;if(a.autoIncrement&&3!=b)throw new D(504);},a);if(c&&1<b.length)throw new D(505);}function Yj(a){if(null!==a.za){var b=a.ka.get(a.za).map(function(a){return a.name}),c=0;if(a.sb.some(function(a,e){c=e;return-1!=b.indexOf(a.pb)},a))throw new D(543,a.sb[c].name);}}
function Zj(a){if(null!==a.za){var b=function(a){return a.name},c=JSON.stringify(a.ka.get(a.za).map(b));a.ka.forEach(function(a,e){if(e!=this.za){var f=a.map(b);if(JSON.stringify(f)==c)throw new D(544,this.u+"."+e);}},a)}}function ak(a){null===a.za||a.ka.get(a.za).forEach(function(a){if(this.Fc.has(a.name))throw new D(545,this.u+"."+a.name);},a)}Y.prototype.pf=function(a,b){Tj(a);Wj(this,a);this.J.set(a,b);Vj.has(b)&&this.re([a]);return this};Y.prototype.addColumn=Y.prototype.pf;
Y.prototype.rf=function(a,b){var c=this.u;this.za="pk"+(c[0].toUpperCase()+c.substring(1));Tj(this.za);Wj(this,this.za);c=bk(this,a,!0,void 0,b);Xj(this,c);1==c.length&&this.rd.add(c[0].name);this.ic.add(this.za);this.ka.set(this.za,c);return this};Y.prototype.addPrimaryKey=Y.prototype.rf;
Y.prototype.qf=function(a,b){Tj(a);Wj(this,a);var c=new Sj(b,this.u,a);q(c.action)||(c.action=0);q(c.timing)||(c.timing=0);if(1==c.action&&1==c.timing)throw new D(506);if(!this.J.has(c.pb))throw new D(540,a);this.sb.push(c);this.qe(a,[c.pb],this.rd.has(c.pb));return this};Y.prototype.addForeignKey=Y.prototype.qf;Y.prototype.sf=function(a,b){Tj(a);Wj(this,a);var c=bk(this,b,!0);ck(this,a,c);1==c.length&&(this.rd.add(c[0].name),dk(this,c[0].name));this.ka.set(a,c);this.ic.add(a);return this};
Y.prototype.addUnique=Y.prototype.sf;function dk(a,b){a.sb.forEach(function(a){a.pb==b&&this.ic.add(a.name.split(".")[1])},a)}Y.prototype.re=function(a){a=bk(this,a,!1);ek(this,a);a.forEach(function(a){this.Fc.add(a.name)},this);return this};Y.prototype.addNullable=Y.prototype.re;function ek(a,b){Yb(a.ka).forEach(function(a){var d=C();this.ka.get(a).forEach(function(a){d.add(a.name)});var e=b.filter(function(a){return d.has(a.name)});if(1<d.size&&0<e.length)throw new D(507,a,e.join(","));},a)}
Y.prototype.qe=function(a,b,c,d){Tj(a);Wj(this,a);b=bk(this,b,!0,d);ck(this,a,b);c&&this.ic.add(a);this.ka.set(a,b);return this};Y.prototype.addIndex=Y.prototype.qe;function ck(a,b,c){if(1<c.length&&(a=c.filter(function(a){return this.Fc.has(a.name)},a),0<a.length))throw new D(507,b,a.join(","));}Y.prototype.xb=ba("ld");Y.prototype.persistentIndex=Y.prototype.xb;Y.prototype.tb=function(){Yj(this);Zj(this);ak(this);return new (fk(this))};Y.prototype.getSchema=Y.prototype.tb;
function gk(a){return a.sb}function bk(a,b,c,d,e){var f=b,f="string"==typeof b[0]?b.map(function(a){return new Uj({name:a,order:null!=d?d:1,autoIncrement:e||!1})}):b.map(function(a){return new Uj(a)});f.forEach(function(a){if(!this.J.has(a.name))throw new D(508,this.u,a.name);if(c){var b=this.J.get(a.name);if(0==b||6==b)throw new D(509,this.u,a.name);}},a);return f}
function fk(a){function b(){function b(c){return a.ka.get(c).map(function(a){return{ca:this[a.name],ib:a.ib,autoIncrement:a.autoIncrement}},this)}var d=Yb(a.J).map(function(b){this[b]=new X(this,b,a.rd.has(b),a.Fc.has(b),a.J.get(b));return this[b]},this),e=Yb(a.ka).map(function(d){return new sg(a.u,d,a.ic.has(d),b.call(this,d))},this);Q.call(this,a.u,d,e,a.ld);var f=null===a.za?null:new sg(a.u,a.za,!0,b.call(this,a.za)),h=d.filter(function(b){return!a.Fc.has(b.getName())});this.Af=new Rj(f,h,a.sb);
this.df=hk(a,d,e)}t(b,Q);b.prototype.rb=function(a){return new this.df(pb++,a)};b.prototype.createRow=b.prototype.rb;b.prototype.Jb=function(a){var b={};this.eb().forEach(function(e){var f=e.getName();e=e.H();var h=a.value[f];if(0==e)if(e=h,null!=e&&""!=e){0!=e.length%2&&(e="0"+e);for(var h=new ArrayBuffer(e.length/2),k=new Uint8Array(h),n=0,x=0;n<e.length;n+=2)k[x++]=parseInt(e.substr(n,2),16);e=h}else e=null;else e=2==e?null!=h?new Date(h):null:h;b[f]=e},this);return new this.df(a.id,b)};b.prototype.deserializeRow=
b.prototype.Jb;b.prototype.Ab=g("Af");b.prototype.getConstraint=b.prototype.Ab;return b}
function hk(a,b,c){function d(a,d){this.J=b;this.ka=c;z.call(this,a,d)}t(d,z);d.prototype.Ae=function(){var a={};this.J.forEach(function(b){a[b.getName()]=b.Ac()?null:Jc[b.H()]});return a};d.prototype.lf=function(){var a={};this.J.forEach(function(b){var c=b.getName();b=b.H();var d=this.o[c];a[c]=0==b?null!=d?tb(d):null:2==b?null!=d?d.getTime():null:6==b?null!=d?d:null:d},this);return a};var e=function(a){var b=this.J.get(a.getName()),c=this.Fd.Me.get(b)||null;return function(b){return c(b[a.getName()])}}.bind(a),
f=function(a){var b=a.map(function(a){return e(a.ca)});return function(a){return b.map(function(b){return b(a)})}}.bind(a),h={};c.forEach(function(a){var b=a.m();a=1==a.f.length?e(a.f[0].ca):f(a.f);h[b]=a});d.prototype.Cb=function(a){return-1!=a.indexOf("#")?this.id():h.hasOwnProperty(a)?h[a](this.o):null};return d};function ik(a,b){this.j=new Z(a,b);this.nb=A();this.uc=!1}r("lf.schema.Builder",ik);function jk(a,b){b.sb.forEach(function(a){var d=a.Pa;if(!this.nb.has(d))throw new D(536,a.name);var d=this.nb.get(d).tb(),e=a.Ic;if(!d.hasOwnProperty(e))throw new D(537,a.name);if(b.tb()[a.pb].H()!=d[e].H())throw new D(538,a.name);if(!d[e].Bc())throw new D(539,a.name);},a)}ik.prototype.yf=function(a){a.sb.forEach(function(a){gk(this.nb.get(a.Pa)).forEach(function(c){if(c.pb==a.Ic)throw new D(534,a.name);},this)},this)};
function kk(a){a.uc||(a.nb.forEach(function(a){jk(this,a);a=a.tb();this.j.K.set(a.getName(),a)},a),B(a.nb).forEach(a.yf,a),lk(a),a.nb.clear(),a.uc=!0)}function mk(a,b,c){b.ne||(b.ne=!0,b.Wd=!0,b.Be.forEach(function(a){a=c.get(a);if(!a.ne)mk(this,a,c);else if(a.Wd&&b!=a)throw new D(533);},a));b.Wd=!1}function lk(a){var b=A();a.j.K.forEach(function(a,d){b.set(d,new nk(d))},a);a.nb.forEach(function(a,d){a.sb.forEach(function(a){b.get(a.Pa).Be.add(d)})});B(b).forEach(function(a){mk(this,a,b)},a)}
function nk(a){this.Wd=this.ne=!1;this.Be=C();this.Nc=a}ik.prototype.tb=function(){this.uc||kk(this);return this.j};ik.prototype.getSchema=ik.prototype.tb;ik.prototype.De=function(){var a=new fc("ns_"+this.j.name()),b;Oj||(Oj=new Nj);b=Oj;var c=null;b.Pd(a)?c=b.i(a):(c=new Nj,b.jb(a,c));return c};ik.prototype.getGlobal=ik.prototype.De;ik.prototype.connect=function(a){var b=this.De();b.Pd(mc)||b.jb(mc,this.tb());return(new W(b)).Ea(a)};ik.prototype.connect=ik.prototype.connect;
ik.prototype.Df=function(a){if(this.nb.has(a))throw new D(503,a);if(this.uc)throw new D(535);this.nb.set(a,new Y(a));return this.nb.get(a)};ik.prototype.createTable=ik.prototype.Df;ik.prototype.he=function(a){if(this.uc)throw new D(535);this.j.he(a);return this};ik.prototype.setPragma=ik.prototype.he;function Z(a,b){this.u=a;this.Xb=b;this.K=A();this.Ye={Hf:!1}}r("lf.schema.DatabaseSchema",Z);Z.prototype.name=g("u");Z.prototype.name=Z.prototype.name;Z.prototype.version=g("Xb");
Z.prototype.version=Z.prototype.version;Z.prototype.ra=function(){return B(this.K)};Z.prototype.tables=Z.prototype.ra;Z.prototype.table=function(a){if(!this.K.has(a))throw new D(101,a);return this.K.get(a)};Z.prototype.table=Z.prototype.table;Z.prototype.info=function(){this.He||(this.He=new Pj(this));return this.He};Z.prototype.Xe=g("Ye");Z.prototype.pragma=Z.prototype.Xe;Z.prototype.he=ba("Ye");r("lf.schema.create",function(a,b){return new ik(a,b)});v.prototype.catch=v.prototype.ke;v.prototype["catch"]=v.prototype.catch;}.bind(window))()
//# sourceMappingURL=lovefield.es6.js.map
