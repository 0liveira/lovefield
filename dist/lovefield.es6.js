(function(){'use strict';function aa(){return function(){}}function ba(a){return function(b){this[a]=b}}function g(a){return function(){return this[a]}}function l(a){return function(){return a}}var m,n=this;function q(a){return void 0!==a}function ca(){}
function da(a){var b=typeof a;if("object"==b)if(a){if(a instanceof Array)return"array";if(a instanceof Object)return b;var c=Object.prototype.toString.call(a);if("[object Window]"==c)return"object";if("[object Array]"==c||"number"==typeof a.length&&"undefined"!=typeof a.splice&&"undefined"!=typeof a.propertyIsEnumerable&&!a.propertyIsEnumerable("splice"))return"array";if("[object Function]"==c||"undefined"!=typeof a.call&&"undefined"!=typeof a.propertyIsEnumerable&&!a.propertyIsEnumerable("call"))return"function"}else return"null";
else if("function"==b&&"undefined"==typeof a.call)return"object";return b}function fa(a){return null===a}function ga(a){return null!=a}function ha(a){var b=da(a);return"array"==b||"object"==b&&"number"==typeof a.length}function ia(a){return"string"==typeof a}function ja(a){return"function"==da(a)}function la(a){return a[ma]||(a[ma]=++na)}var ma="closure_uid_"+(1E9*Math.random()>>>0),na=0;function oa(a,b,c){return a.call.apply(a.bind,arguments)}
function pa(a,b,c){if(!a)throw Error();if(2<arguments.length){var d=Array.prototype.slice.call(arguments,2);return function(){var c=Array.prototype.slice.call(arguments);Array.prototype.unshift.apply(c,d);return a.apply(b,c)}}return function(){return a.apply(b,arguments)}}function qa(a,b,c){qa=Function.prototype.bind&&-1!=Function.prototype.bind.toString().indexOf("native code")?oa:pa;return qa.apply(null,arguments)}
function ra(a,b){var c=Array.prototype.slice.call(arguments,1);return function(){var b=c.slice();b.push.apply(b,arguments);return a.apply(this,b)}}function r(a,b){var c=a.split("."),d=n;c[0]in d||!d.execScript||d.execScript("var "+c[0]);for(var e;c.length&&(e=c.shift());)!c.length&&q(b)?d[e]=b:d=d[e]?d[e]:d[e]={}}
function t(a,b){function c(){}c.prototype=b.prototype;a.Fb=b.prototype;a.prototype=new c;a.prototype.constructor=a;a.tg=function(a,c,f){for(var h=Array(arguments.length-2),k=2;k<arguments.length;k++)h[k-2]=arguments[k];return b.prototype[c].apply(a,h)}};function sa(a){if(Error.captureStackTrace)Error.captureStackTrace(this,sa);else{var b=Error().stack;b&&(this.stack=b)}a&&(this.message=String(a))}t(sa,Error);sa.prototype.name="CustomError";function ta(a,b,c){this.Uf=c;this.yf=a;this.kg=b;this.kd=0;this.fd=null}ta.prototype.get=function(){var a;0<this.kd?(this.kd--,a=this.fd,this.fd=a.next,a.next=null):a=this.yf();return a};ta.prototype.put=function(a){this.kg(a);this.kd<this.Uf&&(this.kd++,a.next=this.fd,this.fd=a)};var ua=Array.prototype,va=ua.indexOf?function(a,b,c){return ua.indexOf.call(a,b,c)}:function(a,b,c){c=null==c?0:0>c?Math.max(0,a.length+c):c;if(ia(a))return ia(b)&&1==b.length?a.indexOf(b,c):-1;for(;c<a.length;c++)if(c in a&&a[c]===b)return c;return-1},wa=ua.forEach?function(a,b,c){ua.forEach.call(a,b,c)}:function(a,b,c){for(var d=a.length,e=ia(a)?a.split(""):a,f=0;f<d;f++)f in e&&b.call(c,e[f],f,a)},xa=ua.map?function(a,b,c){return ua.map.call(a,b,c)}:function(a,b,c){for(var d=a.length,e=Array(d),
f=ia(a)?a.split(""):a,h=0;h<d;h++)h in f&&(e[h]=b.call(c,f[h],h,a));return e},ya=ua.reduce?function(a,b,c,d){d&&(b=qa(b,d));return ua.reduce.call(a,b,c)}:function(a,b,c,d){var e=c;wa(a,function(c,h){e=b.call(d,e,c,h,a)});return e},za=ua.some?function(a,b,c){return ua.some.call(a,b,c)}:function(a,b,c){for(var d=a.length,e=ia(a)?a.split(""):a,f=0;f<d;f++)if(f in e&&b.call(c,e[f],f,a))return!0;return!1};function Aa(a,b,c){return 2>=arguments.length?ua.slice.call(a,b):ua.slice.call(a,b,c)}
function Ba(a){for(var b=[],c=0;c<a;c++)b[c]=0;return b}function Ca(a){for(var b=[],c=0;c<arguments.length;c++){var d=arguments[c];if("array"==da(d))for(var e=0;e<d.length;e+=8192)for(var f=Ca.apply(null,Aa(d,e,e+8192)),h=0;h<f.length;h++)b.push(f[h]);else b.push(d)}return b};var Da;a:{var Ea=n.navigator;if(Ea){var Fa=Ea.userAgent;if(Fa){Da=Fa;break a}}Da=""}function u(a){return-1!=Da.indexOf(a)};function Ga(){return u("Opera")||u("OPR")}function Ha(){return(u("Chrome")||u("CriOS"))&&!Ga()&&!u("Edge")};function Ia(a){n.setTimeout(function(){throw a;},0)}var Ja;
function Ka(){var a=n.MessageChannel;"undefined"===typeof a&&"undefined"!==typeof window&&window.postMessage&&window.addEventListener&&!u("Presto")&&(a=function(){var a=document.createElement("IFRAME");a.style.display="none";a.src="";document.documentElement.appendChild(a);var b=a.contentWindow,a=b.document;a.open();a.write("");a.close();var c="callImmediate"+Math.random(),d="file:"==b.location.protocol?"*":b.location.protocol+"//"+b.location.host,a=qa(function(a){if(("*"==d||a.origin==d)&&a.data==
c)this.port1.onmessage()},this);b.addEventListener("message",a,!1);this.port1={};this.port2={postMessage:function(){b.postMessage(c,d)}}});if("undefined"!==typeof a&&!u("Trident")&&!u("MSIE")){var b=new a,c={},d=c;b.port1.onmessage=function(){if(q(c.next)){c=c.next;var a=c.qe;c.qe=null;a()}};return function(a){d.next={qe:a};d=d.next;b.port2.postMessage(0)}}return"undefined"!==typeof document&&"onreadystatechange"in document.createElement("SCRIPT")?function(a){var b=document.createElement("SCRIPT");
b.onreadystatechange=function(){b.onreadystatechange=null;b.parentNode.removeChild(b);b=null;a();a=null};document.documentElement.appendChild(b)}:function(a){n.setTimeout(a,0)}};function La(){this.ud=this.ic=null}var Na=new ta(function(){return new Ma},function(a){a.reset()},100);La.prototype.add=function(a,b){var c=Na.get();c.set(a,b);this.ud?this.ud.next=c:this.ic=c;this.ud=c};La.prototype.remove=function(){var a=null;this.ic&&(a=this.ic,this.ic=this.ic.next,this.ic||(this.ud=null),a.next=null);return a};function Ma(){this.next=this.scope=this.Hd=null}Ma.prototype.set=function(a,b){this.Hd=a;this.scope=b;this.next=null};
Ma.prototype.reset=function(){this.next=this.scope=this.Hd=null};function Oa(a,b){Pa||Qa();Ra||(Pa(),Ra=!0);Sa.add(a,b)}var Pa;function Qa(){if(n.Promise&&n.Promise.resolve){var a=n.Promise.resolve(void 0);Pa=function(){a.then(Ta)}}else Pa=function(){var a=Ta;!ja(n.setImmediate)||n.Window&&n.Window.prototype&&n.Window.prototype.setImmediate==n.setImmediate?(Ja||(Ja=Ka()),Ja(a)):n.setImmediate(a)}}var Ra=!1,Sa=new La;function Ta(){for(var a=null;a=Sa.remove();){try{a.Hd.call(a.scope)}catch(b){Ia(b)}Na.put(a)}Ra=!1};function v(a,b){this.Ra=0;this.Xe=void 0;this.Vc=this.$b=this.B=null;this.ed=this.Gd=!1;if(a!=ca)try{var c=this;a.call(b,function(a){Ua(c,2,a)},function(a){Ua(c,3,a)})}catch(d){Ua(this,3,d)}}function Wa(){this.next=this.context=this.ec=this.Gc=this.child=null;this.xd=!1}Wa.prototype.reset=function(){this.context=this.ec=this.Gc=this.child=null;this.xd=!1};var Xa=new ta(function(){return new Wa},function(a){a.reset()},100);function Ya(a,b,c){var d=Xa.get();d.Gc=a;d.ec=b;d.context=c;return d}
function w(a){if(a instanceof v)return a;var b=new v(ca);Ua(b,2,a);return b}function Za(a){return new v(function(b,c){c(a)})}function $a(a,b,c){ab(a,b,c,null)||Oa(ra(b,a))}function bb(a){return new v(function(b,c){var d=a.length,e=[];if(d)for(var f=function(a,c){d--;e[a]=c;0==d&&b(e)},h=function(a){c(a)},k=0,p;k<a.length;k++)p=a[k],$a(p,ra(f,k),h);else b(e)})}function x(){var a,b,c=new v(function(c,e){a=c;b=e});return new cb(c,a,b)}
v.prototype.then=function(a,b,c){return db(this,ja(a)?a:null,ja(b)?b:null,c)};v.prototype.then=v.prototype.then;v.prototype.$goog_Thenable=!0;function eb(a,b,c){db(a,null,b,c)}function fb(a,b){a.$b||2!=a.Ra&&3!=a.Ra||gb(a);a.Vc?a.Vc.next=b:a.$b=b;a.Vc=b}
function db(a,b,c,d){var e=Ya(null,null,null);e.child=new v(function(a,h){e.Gc=b?function(c){try{var e=b.call(d,c);a(e)}catch(E){h(E)}}:a;e.ec=c?function(b){try{var e=c.call(d,b);!q(e)&&b instanceof hb?h(b):a(e)}catch(E){h(E)}}:h});e.child.B=a;fb(a,e);return e.child}v.prototype.pg=function(a){this.Ra=0;Ua(this,2,a)};v.prototype.qg=function(a){this.Ra=0;Ua(this,3,a)};
function Ua(a,b,c){0==a.Ra&&(a==c&&(b=3,c=new TypeError("Promise cannot resolve to itself")),a.Ra=1,ab(c,a.pg,a.qg,a)||(a.Xe=c,a.Ra=b,a.B=null,gb(a),3!=b||c instanceof hb||ib(a,c)))}function ab(a,b,c,d){if(a instanceof v)return fb(a,Ya(b||ca,c||null,d)),!0;var e;if(a)try{e=!!a.$goog_Thenable}catch(f){e=!1}else e=!1;if(e)return a.then(b,c,d),!0;e=typeof a;if("object"==e&&null!=a||"function"==e)try{var h=a.then;if(ja(h))return jb(a,h,b,c,d),!0}catch(k){return c.call(d,k),!0}return!1}
function jb(a,b,c,d,e){function f(a){k||(k=!0,d.call(e,a))}function h(a){k||(k=!0,c.call(e,a))}var k=!1;try{b.call(a,h,f)}catch(p){f(p)}}function gb(a){a.Gd||(a.Gd=!0,Oa(a.Df,a))}function kb(a){var b=null;a.$b&&(b=a.$b,a.$b=b.next,b.next=null);a.$b||(a.Vc=null);return b}
v.prototype.Df=function(){for(var a=null;a=kb(this);){var b=this.Ra,c=this.Xe;if(3==b&&a.ec&&!a.xd)for(var d=void 0,d=this;d&&d.ed;d=d.B)d.ed=!1;if(a.child)a.child.B=null,lb(a,b,c);else try{a.xd?a.Gc.call(a.context):lb(a,b,c)}catch(e){mb.call(null,e)}Xa.put(a)}this.Gd=!1};function lb(a,b,c){2==b?a.Gc.call(a.context,c):a.ec&&a.ec.call(a.context,c)}function ib(a,b){a.ed=!0;Oa(function(){a.ed&&mb.call(null,b)})}var mb=Ia;function hb(a){sa.call(this,a)}t(hb,sa);hb.prototype.name="cancel";
function cb(a,b,c){this.ja=a;this.resolve=b;this.reject=c};/*

 Copyright 2014 The Lovefield Project Authors. All Rights Reserved.

 Licensed under the Apache License, Version 2.0 (the "License");
 you may not use this file except in compliance with the License.
 You may obtain a copy of the License at

     http://www.apache.org/licenses/LICENSE-2.0

 Unless required by applicable law or agreed to in writing, software
 distributed under the License is distributed on an "AS IS" BASIS,
 WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 See the License for the specific language governing permissions and
 limitations under the License.
*/
function y(a,b){this.oa=a;this.o=b||this.ve()}var nb=0;m=y.prototype;m.id=g("oa");m.ve=function(){return{}};m.ef=g("o");m.Ha=function(){return{id:this.oa,value:this.ef()}};m.Bb=function(a){return"#"==a.substr(-1)?this.oa:null};function ob(a){return new y(a.id,a.value)}function pb(a){return new y(nb++,a||{})}function qb(a){if(null==a)return null;a=new Uint8Array(a);for(var b="",c=0;c<a.length;++c)var d=a[c].toString(16),b=b+(2>d.length?"0"+d:d);return b};function rb(a){this.type=a}function sb(a){y.call(this,-1,a)}t(sb,y);function tb(a,b,c,d){c=c||function(a,b){return a==b};d=d||function(b){return a[b]};for(var e=a.length,f=b.length,h=[],k=0;k<e+1;k++)h[k]=[],h[k][0]=0;for(var p=0;p<f+1;p++)h[0][p]=0;for(k=1;k<=e;k++)for(p=1;p<=f;p++)c(a[k-1],b[p-1])?h[k][p]=h[k-1][p-1]+1:h[k][p]=Math.max(h[k-1][p],h[k][p-1]);for(var E=[],k=e,p=f;0<k&&0<p;)c(a[k-1],b[p-1])?(E.unshift(d(k-1,p-1)),k--,p--):h[k-1][p]>h[k][p-1]?k--:p--;return E}function ub(a){return ya(arguments,function(a,c){return a+c},0)}
function vb(a){return ub.apply(null,arguments)/arguments.length}function wb(a){var b=arguments.length;if(2>b)return 0;var c=vb.apply(null,arguments);return ub.apply(null,xa(arguments,function(a){return Math.pow(a-c,2)}))/(b-1)}function xb(a){return Math.sqrt(wb.apply(null,arguments))};var yb="StopIteration"in n?n.StopIteration:{message:"StopIteration",stack:""};function zb(){}zb.prototype.next=function(){throw yb;};zb.prototype.ke=function(){return this};function Ab(a){if(a instanceof zb)return a;if("function"==typeof a.ke)return a.ke(!1);if(ha(a)){var b=0,c=new zb;c.next=function(){for(;;){if(b>=a.length)throw yb;if(b in a)return a[b++];b++}};return c}throw Error("Not implemented");}
function Bb(a,b){if(ha(a))try{wa(a,b,void 0)}catch(c){if(c!==yb)throw c;}else{a=Ab(a);try{for(;;)b.call(void 0,a.next(),void 0,a)}catch(d){if(d!==yb)throw d;}}}function Cb(a){if(za(arguments,function(a){return!a.length})||!arguments.length)return new zb;var b=new zb,c=arguments,d=Ba(c.length);b.next=function(){if(d){for(var a=xa(d,function(a,b){return c[b][a]}),b=d.length-1;0<=b;b--){if(d[b]<c[b].length-1){d[b]++;break}if(0==b){d=null;break}d[b]=0}return a}throw yb;};return b};function Db(a){Eb(a);return a.c.concat()}function Eb(a){if(a.uf!=a.c.length){for(var b=0,c=0;b<a.c.length;){var d=a.c[b];Fb(a.W,d)&&(a.c[c++]=d);b++}a.c.length=c}if(a.uf!=a.c.length){for(var e={},c=b=0;b<a.c.length;)d=a.c[b],Fb(e,d)||(a.c[c++]=d,e[d]=1),b++;a.c.length=c}}function Fb(a,b){return Object.prototype.hasOwnProperty.call(a,b)};/*

 Copyright 2015 The Lovefield Project Authors. All Rights Reserved.

 Licensed under the Apache License, Version 2.0 (the "License");
 you may not use this file except in compliance with the License.
 You may obtain a copy of the License at

     http://www.apache.org/licenses/LICENSE-2.0

 Unless required by applicable law or agreed to in writing, software
 distributed under the License is distributed on an "AS IS" BASIS,
 WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 See the License for the specific language governing permissions and
 limitations under the License.
*/
function z(){return new window.Map}function Gb(a){var b=0,c=Array(a.size);a.forEach(function(a,e){c[b++]=e});return c}function A(a){var b=0,c=Array(a.size);a.forEach(function(a){c[b++]=a});return c};var Hb={};r("lf.TransactionType",Hb);Hb.READ_ONLY=0;Hb.READ_WRITE=1;function Ib(a,b){this.Pa=a;this.ff=b;this.aa=x()}Ib.prototype.la=function(){try{Jb(this.Pa)}catch(a){return Za(a)}return(0==this.ff?this.lc():Kb(this)).then(function(a){this.Pa.la();return a}.bind(this))};function Kb(a){Lb(a);Mb(a);return a.lc()}
function Lb(a){a.Pa.nb.forEach(function(a,c){var d=this.Pa.Y().get(c),d=this.G(d.getName(),d.Jb.bind(d)),e=A(a.Ba).map(function(a){return a.id()});0<e.length&&eb(d.remove(e),this.Jd,this);e=A(a.pa).map(function(a){return a[1]}).concat(A(a.Aa));eb(d.put(e),this.Jd,this)},a)}function Mb(a){Nb(a.Pa).forEach(function(a){var c=this.G(a.getName(),ob),d;c.get([-1]).then(function(a){d=a;return c.remove([])}).then(function(){c.put(d);c.put(a.Ha())},this.Jd.bind(this))},a)}Ib.prototype.Jd=function(a){this.aa.reject(a)};function Ob(a){this.lg=a}Ob.prototype.toString=g("lg");var Pb=new Ob("backstore"),Qb=new Ob("cache"),Rb=new Ob("indexstore"),Tb=new Ob("engine"),Ub=new Ob("runner"),Vb=new Ob("observerregistry"),Wb=new Ob("schema");var Xb=Ga(),Yb=u("Trident")||u("MSIE"),Zb=u("Edge"),$b=u("Gecko")&&!(-1!=Da.toLowerCase().indexOf("webkit")&&!u("Edge"))&&!(u("Trident")||u("MSIE"))&&!u("Edge"),ac=-1!=Da.toLowerCase().indexOf("webkit")&&!u("Edge");function bc(){var a=Da;if($b)return/rv\:([^\);]+)(\)|;)/.exec(a);if(Zb)return/Edge\/([\d\.]+)/.exec(a);if(Yb)return/\b(?:MSIE|rv)[: ]([^\);]+)(\)|;)/.exec(a);if(ac)return/WebKit\/(\S+)/.exec(a)}
(function(){if(Xb&&n.opera){var a=n.opera.version;return ja(a)?a():a}var a="",b=bc();b&&(a=b?b[1]:"");return Yb&&(b=(b=n.document)?b.documentMode:void 0,b>parseFloat(a))?String(b):a})();!u("Android")||Ha()||u("Firefox")||Ga();Ha();function B(a){return q(a)?new window.Set(a):new window.Set}function cc(a){var b=0,c=Array(a.size);a.forEach(function(a){c[b++]=a});return c}function dc(a,b){if(b.size>a.size)return!1;var c=!0;b.forEach(function(b){c=c&&a.has(b)});return c};function ec(a,b){this.oa=a;this.o=b||{}}function fc(a){var b=B();a.forEach(function(a){b.add(a>>9)});return cc(b)}ec.prototype.U=g("oa");function gc(a,b){b.forEach(function(a){this.o[a.id()]=a.Ha()},a)}function hc(a,b){b.forEach(function(a){delete this.o[a]},a)}ec.prototype.Ha=function(){return{id:this.oa,value:JSON.stringify(this.o)}};function ic(a){return new ec(a.id,JSON.parse(a.value))};function jc(a,b,c){this.$=a;this.Ib=b;this.Ye=c}m=jc.prototype;m.get=function(a){if(0==a.length)return this.uc();var b=this.Ib;return kc(this,a).then(function(c){return a.map(function(a){var e=c.get(a>>9);return b(e.o[a])})})};function kc(a,b){var c=z(),d=x(),e=fc(b).map(function(a){return new v(function(b,d){var e;try{e=this.$.get(a)}catch(E){d(E);return}e.onerror=d;e.onsuccess=function(a){a=ic(a.target.result);c.set(a.U(),a);b()}},this)},a);bb(e).then(function(){d.resolve(c)});return d.ja}
m.uc=function(){return new v(function(a,b){var c=[],d;try{d=this.$.openCursor()}catch(e){b(e);return}d.onerror=b;d.onsuccess=function(){var b=d.result;if(b){var e;e=ic(b.value).o;for(var k in e)c.push(this.Ib(e[k]));b.continue()}else a(c)}.bind(this)},this)};m.Qb=function(a){return new v(function(b,c){var d;try{d=a()}catch(e){c(e);return}d.onsuccess=b;d.onerror=c},this)};
m.put=function(a){if(0==a.length)return w();var b=z();a.forEach(function(a){var d;d=a.id()>>9;var e=b.get(d)||null;null===e&&(e=this.Ye(this.$.name,d));gc(e,[a]);b.set(d,e)},this);a=A(b).map(function(a){return this.Qb(function(){return this.$.put(a.Ha())}.bind(this))},this);return bb(a)};
m.remove=function(a){if(0==a.length)return this.Qb(function(){return this.$.clear()}.bind(this));var b=z();a.forEach(function(a){var d=a>>9,e=b.get(d)||null;null===e&&(e=this.Ye(this.$.name,d));hc(e,[a]);b.set(d,e)},this);a=A(b).map(function(a){return this.Qb(function(){return 0==Object.keys(a.o).length?this.$.delete(a.U()):this.$.put(a.Ha())}.bind(this))},this);return bb(a)};function lc(a,b,c){a=a.i(Qb);var d=[c<<9,(c+1<<9)-1];b=a.Wa(b,d[0],d[1]);c=new ec(c);gc(c,b);return c}
function mc(a,b){return new ec(b)};function nc(){};function oc(a){this.ba=a.i(Qb);this.C=a.i(Rb);this.l=a.i(Wb)}oc.prototype.update=function(a){a.forEach(function(a){pc(this,a);qc(this,a)},this)};function qc(a,b){var c=b.getName();b.Ba.forEach(function(a,b){this.ba.remove(c,b)},a);b.Aa.forEach(function(a){this.ba.set(c,a)},a);b.pa.forEach(function(a){this.ba.set(c,a[1])},a)}function pc(a,b){var c=a.l.table(b.getName());rc(b).forEach(function(a){sc(this,c,a)},a)}
function sc(a,b,c){var d=[];(a.C.gc.get(b.getName())||[]).forEach(function(a){try{tc(a,c),d.push(a)}catch(b){throw d.forEach(function(a){tc(a,[c[1],c[0]])},this),b;}},a)}function tc(a,b){var c=null===b[1]?void 0:b[1].Bb(a.getName()),d=null===b[0]?void 0:b[0].Bb(a.getName());if(!q(d)&&q(c))a.add(c,b[1].id());else if(q(d)&&q(c)){if(null===c||null===d){if(c==d)return}else if(0==a.mc().compare(d,c))return;a.add(c,b[1].id());a.remove(d,b[0].id())}else q(d)&&!q(c)&&a.remove(d,b[0].id())};var uc={};r("lf.ConstraintAction",uc);uc.RESTRICT=0;uc.CASCADE=1;var vc={};r("lf.ConstraintTiming",vc);vc.IMMEDIATE=0;vc.DEFERRABLE=1;var wc={};r("lf.Order",wc);wc.DESC=0;wc.ASC=1;var xc={};r("lf.Type",xc);xc.ARRAY_BUFFER=0;xc.BOOLEAN=1;xc.DATE_TIME=2;xc.INTEGER=3;xc.NUMBER=4;xc.STRING=5;xc.OBJECT=6;var yc={0:null,1:!1,2:Object.freeze(new Date(0)),3:0,4:0,5:"",6:null};r("lf.type.DEFAULT_VALUES",yc);function C(a,b){this.code=a;this.message="http://sn.im/2a0j3wn?c="+a;if(1<arguments.length)for(var c=1;c<=Math.min(4,arguments.length-1);++c)this.message+="&p"+(c-1)+"="+encodeURIComponent(arguments[c].toString().slice(0,64))}t(C,Error);function zc(a){this.C=a.i(Rb);this.l=a.i(Wb);this.Zc=null}function Ac(a,b,c){var d=b.zb().Zf;c.forEach(function(a){d.forEach(function(b){if(null==a.o[b.getName()])throw new C(202,b.m());},this)},a)}function Bc(a,b,c,d){b.zb().Id().forEach(function(a){a.timing==d&&Cc(this,a,c)},a)}function Cc(a,b,c){var d=Dc(a,b);c.forEach(function(a){if(Ec(a[0],a[1],b.name)&&(a=a[1].o[b.ob],null!==a&&!d.bb(a)))throw new C(203,b.name);},a)}
function Dc(a,b){null===a.Zc&&(a.Zc=z());var c=a.Zc.get(b.name)||null;null===c&&(c=a.l.table(b.wb)[b.Hc].ua(),c=a.C.get(c.m()),a.Zc.set(b.name,c));return c}function Ec(a,b,c){return(null===a?null!==b:null===b)||a.Bb(c)!=b.Bb(c)}function Fc(a,b,c,d){b=Gc(a.l.info(),b.getName());null!=b&&b.forEach(function(a){if(a.timing==d){var b=this.C.get(a.name),h=Dc(this,a);c.forEach(function(c){if(Ec(c[0],c[1],h.getName())&&b.bb(c[0].o[a.Hc]))throw new C(203,a.name);},this)}},a)}
function Hc(a,b,c,d){0!=c.length&&(c=c.map(function(a){return[null,a]}),Bc(a,b,c,d))}function Jc(a,b,c,d){0!=c.length&&(Bc(a,b,c,d),Fc(a,b,c,d))}function Kc(a,b,c,d){0!=c.length&&(c=c.map(function(a){return[a,null]}),Fc(a,b,c,d))};function Lc(a){this.Aa=z();this.pa=z();this.Ba=z();this.w=a}m=Lc.prototype;m.getName=g("w");m.add=function(a){if(this.Ba.has(a.id())){var b=[this.Ba.get(a.id()),a];this.pa.set(a.id(),b);this.Ba.delete(a.id())}else this.Aa.set(a.id(),a)};m.modify=function(a){var b=a[1],c=a[0].id();this.Aa.has(c)?this.Aa.set(c,b):(this.pa.has(c)&&(a=[this.pa.get(a[0].id())[0],b]),this.pa.set(c,a))};
m.delete=function(a){if(this.Aa.has(a.id()))this.Aa.delete(a.id());else if(this.pa.has(a.id())){var b=this.pa.get(a.id())[0];this.pa.delete(a.id());this.Ba.set(a.id(),b)}else this.Ba.set(a.id(),a)};function rc(a){var b=[];a.Aa.forEach(function(a){b.push([null,a])});a.pa.forEach(function(a){b.push(a)});a.Ba.forEach(function(a){b.push([a,null])});return b}m.toString=function(){return"["+Gb(this.Aa).toString()+"], ["+Gb(this.pa).toString()+"], ["+Gb(this.Ba).toString()+"]"};
function Mc(a){var b=new Lc(a.w);a.Aa.forEach(function(a){b.delete(a)});a.Ba.forEach(function(a){b.add(a)});a.pa.forEach(function(a){b.modify([a[1],a[0]])});return b}m.Pf=function(){return 0==this.Aa.size&&0==this.Ba.size&&0==this.pa.size};function Nc(a,b){this.Z=z();b.forEach(function(a){this.Z.set(a.getName(),a)},this);this.ba=a.i(Qb);this.C=a.i(Rb);this.Na=new zc(a);this.gd=new oc(a);this.nb=z()}function Nb(a){var b=[];Gb(a.nb).map(function(a){return this.Z.get(a)},a).forEach(function(a){a.Db()&&(a.Ca().forEach(function(a){b.push(this.C.get(a.m()))},this),b.push(this.C.get(a.getName()+".#")))},a);return b}m=Nc.prototype;m.Y=g("Z");
function Oc(a){var b=[];a.Z.forEach(function(a){a.Db()&&(a.Ca().forEach(function(a){b.push(a.m())}),b.push(a.getName()+".#"))});return b}m.ub=function(a,b){Pc(this,a);Ac(this.Na,a,b);Hc(this.Na,a,b,0);for(var c=0;c<b.length;c++)Qc(this,a,[null,b[c]])};
function Qc(a,b,c){var d=b.getName(),e=a.nb.get(d)||new Lc(d);a.nb.set(d,e);try{sc(a.gd,b,c)}catch(f){throw f;}b=c[0];var h=c[1];null===b&&null!==h?(a.ba.set(d,h),e.add(h)):null!==b&&null!==h?(a.ba.set(d,h),e.modify(c)):null!==b&&null===h&&(a.ba.remove(d,b.id()),e.delete(b))}m.update=function(a,b){Pc(this,a);Ac(this.Na,a,b);for(var c=0;c<b.length;c++){var d=b[c],d=[this.ba.get(d.id()),d];Jc(this.Na,a,[d],0);Qc(this,a,d)}};
m.Ld=function(a,b){Pc(this,a);Ac(this.Na,a,b);for(var c=0;c<b.length;c++){var d=b[c],e=null,f,h=a.zb().bd();if(null===h)f=null;else{f=this.Na;var h=h.m(),k=d.Bb(h);f=f.C.get(h).get(k);f=0==f.length?null:f[0]}null!=f?(e=this.ba.get(f),d.oa=f,Jc(this.Na,a,[[e,d]],0)):Hc(this.Na,a,[d],0);Qc(this,a,[e,d])}};m.remove=function(a,b){Pc(this,a);Kc(this.Na,a,b,0);for(var c=0;c<b.length;c++)Qc(this,a,[b[c],null])};
function Jb(a){a.nb.forEach(function(a){var c=this.Z.get(a.getName());Hc(this.Na,c,A(a.Aa),1);Kc(this.Na,c,A(a.Ba),1);Jc(this.Na,c,A(a.pa),1)},a)}m.la=aa();m.Eb=function(){var a=A(this.nb).map(function(a){return Mc(a)});this.gd.update(a)};function Pc(a,b){if(!a.Z.has(b.getName()))throw new C(106,b.getName());};function Rc(a,b,c,d){this.b=a;this.s=b;this.ca=null===this.b?!1:c;this.ma=null===this.s?!1:d}Rc.prototype.toString=function(){return(this.ca?"(":"[")+(null===this.b?"unbound":this.b)+", "+(null===this.s?"unbound":this.s)+(this.ma?")":"]")};function Sc(a){if(null===a.b&&null===a.s)return[];var b=null,c=null;null===a.b||(b=new Rc(null,a.b,!1,!a.ca));null===a.s||(c=new Rc(a.s,null,!a.ma,!1));return[b,c].filter(function(a){return null!==a})}
Rc.prototype.reverse=function(){return new Rc(this.s,this.b,this.ma,this.ca)};function Tc(a,b){var c=Uc(a.b,b.b,!0,a.ca,b.ca);if(0==c)return!0;var d=-1==c?a:b,c=1==c?a:b;return null===d.s||d.s>c.b||d.s==c.b&&!d.ma&&!c.ca}function Vc(){return new Rc(null,null,!1,!1)}function Wc(a){return null===a.b&&null===a.s}function Xc(a){return null!=a.b&&a.b==a.s&&!a.ca&&!a.ma}
Rc.prototype.contains=function(a){var b=null===this.s||a<this.s||a==this.s&&!this.ma;return(null===this.b||a>this.b||a==this.b&&!this.ca)&&b};function Uc(a,b,c,d,e){function f(a){return c?a:1==a?-1:1}d=d||!1;e=e||!1;return null===a?null===b?(d?!e:e)?d?f(1):f(-1):0:f(-1):null===b?f(1):a<b?-1:a==b?(d?!e:e)?d?f(1):f(-1):0:1}function Yc(a,b){var c=Uc(a.b,b.b,!0,a.ca,b.ca);0==c&&(c=Uc(a.s,b.s,!1,a.ma,b.ma));return c};function D(a,b){this.entries=a;this.K=B(b);this.Ua=null}function F(a){return cc(a.K)}function Zc(a){return a.entries.map(function(a){return a.sa.o})}function $c(a){return a.entries.map(function(a){return a.sa.id()})}function ad(a,b){return a.Ua.get(b.m())}var bd=null;function cd(){null===bd&&(bd=new D([],[]));return bd}
function dd(a){if(0==a.length)return cd();for(var b=a.reduce(function(a,b){return a+b.entries.length},0),c=Array(b),d=0,b=a.map(function(a){var b=z();a.entries.forEach(function(a){c[d++]=a;b.set(a.id,a)});return b}),e=z(),f=0;f<c.length;f++)b.every(function(a){return a.has(c[f].id)})&&e.set(c[f].id,c[f]);return new D(A(e),cc(a[0].K))}function ed(a){if(0==a.length)return cd();var b=z();a.forEach(function(a){a.entries.forEach(function(a){b.set(a.id,a)})});return new D(A(b),cc(a[0].K))}
function fd(a,b){var c=1<b.length,d=a.map(function(a){return new gd(a,c)});return new D(d,b)}function gd(a,b){this.sa=a;this.id=hd++;this.Od=b}var hd=0;function G(a,b){var c=b.Va();return null!==c&&a.sa.o.hasOwnProperty(c)?a.sa.o[c]:a.Od?a.sa.o[H(b.G())][b.getName()]:a.sa.o[b.getName()]}function id(a,b,c){var d=b.Va();if(null!=d)a.sa.o[d]=c;else if(a.Od){var d=H(b.G()),e=a.sa.o[d];null==e&&(e={},a.sa.o[d]=e);e[b.getName()]=c}else a.sa.o[b.getName()]=c}
function jd(a,b,c,d){function e(a,b){if(a.Od){var c=a.sa.o,d;for(d in c)f[d]=c[d]}else f[b[0]]=a.sa.o}var f={};e(a,b);e(c,d);a=new y(-1,f);return new gd(a,!0)};r("lf.bind",function(a){return new I(a)});function I(a){this.ea=a}r("lf.Binder",I);I.prototype.ua=g("ea");function kd(){this.He=ld();var a=md();this.cc=z();this.cc.set(1,nd());this.cc.set(2,od());this.cc.set(4,a);this.cc.set(3,a);this.cc.set(5,pd())}kd.vc=function(){return kd.De?kd.De:kd.De=new kd};function qd(a,b,c){return(a.cc.get(b)||null).get(c)||null}function ld(){function a(a){return a}var b=z();b.set(1,function(a){return null===a?null:a?1:0});b.set(2,function(a){return null===a?null:a.getTime()});b.set(3,a);b.set(4,a);b.set(5,a);return b}
function nd(){var a=z();a.set("eq",function(a,c){return a==c});a.set("neq",function(a,c){return a!=c});return a}
function md(){var a=nd();a.set("between",function(a,c){return null===a||null===c[0]||null===c[1]?!1:a>=c[0]&&a<=c[1]});a.set("gte",function(a,c){return null===a||null===c?!1:a>=c});a.set("gt",function(a,c){return null===a||null===c?!1:a>c});a.set("in",function(a,c){return-1!=c.indexOf(a)});a.set("lte",function(a,c){return null===a||null===c?!1:a<=c});a.set("lt",function(a,c){return null===a||null===c?!1:a<c});return a}
function pd(){var a=md();a.set("match",function(a,c){return null===a||null===c?!1:(new RegExp(c)).test(a)});return a}
function od(){var a=z();a.set("between",function(a,c){return null===a||null===c[0]||null===c[1]?!1:a.getTime()>=c[0].getTime()&&a.getTime()<=c[1].getTime()});a.set("eq",function(a,c){return(null===a?-1:a.getTime())==(null===c?-1:c.getTime())});a.set("gte",function(a,c){return null===a||null===c?!1:a.getTime()>=c.getTime()});a.set("gt",function(a,c){return null===a||null===c?!1:a.getTime()>c.getTime()});a.set("in",function(a,c){return c.some(function(c){return c.getTime()==a.getTime()})});a.set("lte",
function(a,c){return null===a||null===c?!1:a.getTime()<=c.getTime()});a.set("lt",function(a,c){return null===a||null===c?!1:a.getTime()<c.getTime()});a.set("neq",function(a,c){return(null===a?-1:a.getTime())!=(null===c?-1:c.getTime())});return a};function J(){this.g=this.B=null}var rd=[];J.prototype.getParent=g("B");J.prototype.eb=function(){for(var a=this;!fa(a.getParent());)a=a.getParent();return a};function sd(a){for(var b=0;!fa(a.getParent());)b++,a=a.getParent();return b}function K(a){return a.g||rd}function td(a,b){return K(a)[b]||null}function ud(a,b,c){b.B=a;null===a.g?a.g=[b]:a.g.splice(c,0,b)}function L(a,b){b.B=a;null===a.g?a.g=[b]:a.g.push(b)}
function vd(a,b){var c=a.g&&a.g[b];return c?(c.B=null,a.g.splice(b,1),0==a.g.length&&(a.g=null),c):null}J.prototype.removeChild=function(a){return vd(this,K(this).indexOf(a))};function wd(a,b,c){td(a,c).B=null;b.B=a;a.g[c]=b}function xd(a,b,c){!1!==b.call(c,a)&&K(a).forEach(function(a){xd(a,b,c)})};function yd(){J.call(this);this.oa=zd++}t(yd,J);var zd=0;yd.prototype.U=g("oa");function Ad(a,b,c){yd.call(this);this.N=a;this.value=b;this.F=c;this.qc=qd(kd.vc(),this.N.H(),this.F);this.Xa=!1;this.Zb=b}t(Ad,yd);m=Ad.prototype;m.Hb=function(){var a=new Ad(this.N,this.value,this.F);a.Zb=this.Zb;a.qd(this.Xa);var b=this.U();a.oa=b;return a};m.cb=function(a){return null!=a?(a.push(this.N),a):[this.N]};m.qd=ba("Xa");function Bd(a){var b=!1;a.value instanceof I||(b="array"==da(a.value)?!a.value.some(function(a){return a instanceof I}):!0);if(!b)throw new C(501);}
m.eval=function(a){Bd(this);if("in"==this.F)return Cd(this,a);var b=a.entries.filter(function(a){return this.qc(G(a,this.N),this.value)!=this.Xa},this);return new D(b,F(a))};m.bind=function(a){if(this.Zb instanceof I){var b=this.Zb.ua();if(a.length<=b)throw new C(510);this.value=a[b]}else"array"==da(this.Zb)&&(this.value=this.Zb.map(function(b){if(b instanceof I){var d=b.ua();if(a.length<=d)throw new C(510);return a[b.ua()]}return b}))};
function Cd(a,b){var c=B(a.value),d=function(a){return null===a?!1:c.has(a)!=this.Xa}.bind(a),e=b.entries.filter(function(a){return d(G(a,this.N))},a);return new D(e,F(b))}m.toString=function(){return"value_pred("+this.N.m()+" "+this.F+(this.Xa?"(complement)":"")+" "+this.value+")"};function Dd(a){this.ga=a;this.Wc=this.xa=null}function Ed(a,b){null===a.xa&&null!=a.u&&(a.xa=Fd(a.u));return a.xa.get(b)||null}function Fd(a){var b=z();xd(a,function(a){b.set(a.U(),a)});return b}function Gd(a,b){b.u&&(a.u=b.u.Hb());a.Wc=b}Dd.prototype.bind=function(){return this};function Hd(a,b){var c=a.u;null!=c&&xd(c,function(a){a instanceof Ad&&a.bind(b)})};function Id(a){Dd.call(this,a)}t(Id,Dd);function Jd(a){var b="";a.forEach(function(c,d){b+=c.N.m()+" ";b+=1==c.hb?"ASC":"DESC";d<a.length-1&&(b+=", ")});return b}Id.prototype.Y=function(){return B(this.b)};Id.prototype.clone=function(){var a=new Id(this.ga);Gd(a,this);this.f&&(a.f=this.f.slice());this.b&&(a.b=this.b.slice());a.V=this.V;a.M=this.M;this.L&&(a.L=this.L.slice());this.ha&&(a.ha=this.ha.slice());this.Ob&&(a.Ob=this.Ob);this.Ub&&(a.Ub=this.Ub);a.vb=this.vb;return a};
Id.prototype.bind=function(a){Id.Fb.bind.call(this,a);null!=this.Ob&&(this.V=a[this.Ob.ua()]);null!=this.Ub&&(this.M=a[this.Ub.ua()]);Hd(this,a);return this};function Kd(a,b){this.ya=a;this.Z=b}Kd.prototype.eb=g("ya");Kd.prototype.Y=g("Z");function Ld(a){var b=B();a.forEach(function(a){a.Y().forEach(b.add.bind(b))});return b};function Md(a,b){this.global=a;this.Ma=a.i(Pb);this.nd=b.map(function(a){return a.context});this.Re=b.map(function(a){return a.Zd});this.te=Ld(this.Re);this.gf=Nd(this);this.Za=x()}function Nd(a){return a.nd.some(function(a){return!(a instanceof Id)})?1:0}m=Md.prototype;
m.exec=function(){function a(){var f=d.shift();if(f){var h=e[c.length];return f.eb().exec(b,h).then(function(b){c.push(b[0]);return a()})}return w()}var b=new Nc(this.global,this.te),c=[],d=this.Re.slice(),e=this.nd;return a().then(function(){return this.Ma.yb(this.gf,b).la()}.bind(this)).then(function(){this.Wd(c);return c}.bind(this),function(a){b.Eb();throw a;})};m.H=g("gf");m.Y=g("te");m.Kb=g("Za");m.U=function(){return la(this)};m.Wd=aa();function Od(a,b){Md.call(this,a,b);this.Cb=a.i(Vb)}t(Od,Md);Od.prototype.getPriority=l(0);Od.prototype.Wd=function(a){this.nd.forEach(function(b,c){Pd(this.Cb,b,a[c])},this)};function Qd(a,b){this.h=a;this.Cb=a.i(Vb);this.za=a.i(Ub);this.gd=new oc(a);this.nb=b;var c=a.i(Wb),d=this.nb.map(function(a){return c.table(a.getName())});this.Z=B(d);this.Za=x()}m=Qd.prototype;m.exec=function(){this.gd.update(this.nb);this.Kc();return w()};m.H=l(1);m.Y=g("Z");m.Kb=g("Za");m.U=function(){return la(this)};m.getPriority=l(1);m.Kc=function(){var a=Rd(this.Cb,this.Z);0!=a.length&&(a=new Od(this.h,a),Sd(this.za,a))};function Td(a){this.h=a;this.Ma=a.i(Pb);this.za=a.i(Ub)}Td.prototype.Ud=function(a){a=new Qd(this.h,a);Sd(this.za,a)};function M(a,b){this.Wb=a;this.j=b;this.Sa=z()}r("lf.backstore.FirebaseRawBackStore",M);M.prototype.cd=g("j");M.prototype.dd=function(){throw new C(351);};function Ud(a,b){var c=x(),d=a;b.length&&(d=a.child(b));d.once("value",function(a){c.resolve(a.val())},function(a){c.reject(a)});return c.ja}function Vd(a,b,c){function d(a){a?e.reject(a):e.resolve()}c=c||!1;var e=x();c?a.set(b,d):a.update(b,d);return e.ja}
M.prototype.Da=function(a){return Ud(this.j,"@rev/R").then(function(a){this.Ja=a;return Ud(this.j,"@table")}.bind(this)).then(function(b){var c=0,d;for(d in b)this.Sa.set(d,b[d]),b[d]>c&&(c=b[d]);a.ra().forEach(function(a){this.Sa.has(a.getName())||(b[a.getName()]=++c)},this);d=this.j.child("@table");return Vd(d,b)}.bind(this))};
function Wd(a,b,c){var d=a.Sa.get(b);return null!=d?function(){var a={},b=x();this.j.orderByChild("T").equalTo(d).once("value",function(d){d.forEach(function(b){var d=c(b.val());a[parseInt(b.key(),10)]=d});b.resolve(a)});return b.ja}.call(a).then(function(a){a["@rev"]={R:++this.Ja};return Vd(this.j,a)}.bind(a)):w()}M.prototype.oc=function(a){return Wd(this,a,l(null)).then(function(){this.Sa.delete(a);return Vd(this.j.child("@table/"+a),null,!0)}.bind(this))};M.prototype.dropTable=M.prototype.oc;
M.prototype.jc=function(a,b,c){return Wd(this,a,function(a){var e=a.P;e[b]=c;return{R:this.Ja+1,T:a.T,P:e}}.bind(this))};M.prototype.addTableColumn=M.prototype.jc;M.prototype.pc=function(a,b){return Wd(this,a,function(a){var d=a.P;delete d[b];return{R:this.Ja+1,T:a.T,P:d}}.bind(this))};M.prototype.dropTableColumn=M.prototype.pc;M.prototype.Jc=function(a,b,c){return Wd(this,a,function(a){var e=a.P;e[c]=e[b];delete e[b];return{R:this.Ja+1,T:a.T,P:e}}.bind(this))};M.prototype.renameTableColumn=M.prototype.Jc;
M.prototype.qb=function(){throw new C(351);};M.prototype.createRow=M.prototype.qb;M.prototype.yc=g("Wb");M.prototype.getVersion=M.prototype.yc;M.prototype.ac=function(a){var b=x();a=this.Sa.get(a);this.j.orderByChild("T").equalTo(a).once("value",function(a){var d=[];a.forEach(function(a){d.push(a.val().P)});b.resolve(d)});return b.ja};M.prototype.dump=function(){var a={},b=Gb(this.Sa).map(function(b){return this.ac(b).then(function(d){a[b]=d})}.bind(this));return bb(b).then(function(){return a})};
M.prototype.dump=M.prototype.dump;function Xd(a,b,c){Ib.call(this,c,b);this.j=a}t(Xd,Ib);Xd.prototype.G=function(a){return this.j.wc(a)};
Xd.prototype.lc=function(){var a=this.Pa.nb;if(0==a.size)this.aa.resolve();else{var b=this.j.Ja+1;this.j.Ja=b;var c={"@rev":{R:b}};a.forEach(function(a,e){var f=this.j.Sa.get(e);a.Aa.forEach(function(a,d){c[d]={R:b,T:f,P:a.o}});a.pa.forEach(function(a,d){c[d]={R:b,T:f,P:a[1].o}});a.Ba.forEach(function(a,b){c[b]=null})},this);this.j.j.update(c,function(c){null===c?this.aa.resolve():(this.j.Ja=b-1,c=A(a).map(function(a){return Yd(this.j,a.getName())},this),bb(c).then(this.aa.reject.bind(this.aa),this.aa.reject.bind(this.aa)))}.bind(this))}return this.aa.ja};function Zd(){this.ta=z()}function $d(a,b){if(0==b.length)return A(a.ta);var c=[];b.forEach(function(a){a=this.ta.get(a)||null;null===a||c.push(a)},a);return c}Zd.prototype.getData=g("ta");Zd.prototype.get=function(a){return w($d(this,a))};function ae(a,b){b.forEach(function(a){this.ta.set(a.id(),a)},a)}Zd.prototype.put=function(a){ae(this,a);return w()};function be(a,b){0==b.length||b.length==a.ta.size?a.ta.clear():b.forEach(function(a){this.ta.delete(a)},a)}
Zd.prototype.remove=function(a){be(this,a);return w()};function ce(a){return 0==a.ta.size?0:Gb(a.ta).reduce(function(a,c){return a>c?a:c},0)};function de(a,b){this.l=a;this.nf=b;this.Ic=z();this.Ja=-1;this.K=z();this.Sa=z();this.Ad=null}m=de.prototype;
m.Da=function(a){this.j=this.nf.child(this.l.name());var b=a||function(){return w()};return Ud(this.j,"@db/version").then(function(a){return null===a?Vd(this.j,ee(this),!0).then(function(){var a=new M(0,this.j);return b(a)}.bind(this)):a==this.l.version()?Ud(this.j,"@rev/R").then(function(a){this.Ja=a;return Ud(this.j,"@table")}.bind(this)).then(function(a){for(var b in a)this.Sa.set(b,a[b]);a=this.l.ra().map(function(a){return Yd(this,a.getName())},this);return bb(a)}.bind(this)).then(function(){fe(this);
ge(this);return w()}.bind(this)):this.Xd(a,b).then(function(){return this.Da()}.bind(this))}.bind(this))};m.Xd=function(a,b){var c=new M(a,this.j);return c.Da(this.l).then(function(){return w()}.bind(this)).then(function(){return b(c)}).then(function(){var a=this.j.child("@db");return Vd(a,{version:this.l.version()},!0)}.bind(this))};
function ge(a){a.j.off();a.j.on("child_removed",a.ag.bind(a));a.Bd&&(a.Bd.off(),a.Ic.clear());a.Bd=a.j.orderByChild("R").startAt(a.Ja+1);a.Bd.on("value",a.Ud.bind(a))}function fe(a){nb=A(a.K).map(function(a){return ce(a)}).reduce(function(a,c){return a>c?a:c},0)+1}m.ag=function(a){var b=a.val(),c=this.Ic.get(b.T)||null;null===c&&(c=B(),this.Ic.set(b.T,c));c.add(parseInt(a.key(),10))};
m.Ud=function(a){var b=a.child("@rev/R").val();null!=b&&b!=this.Ja&&(this.Ja=b,a=he(this,a),a.forEach(function(a){var b=this.K.get(a.getName()),e=Gb(a.Ba);0<e.length&&be(b,e);var f=A(a.Aa);a.pa.forEach(function(a){f.push(a[1])});ae(b,f)},this),0<a.length&&this.Dc(a),ge(this))};
function he(a,b){var c=B(),d=z();a.Sa.forEach(function(a,b){var h=this.K.get(b),k=new Lc(b);if(this.Ic.has(a)){var p=cc(this.Ic.get(a));p.forEach(function(a){c.add(a)});$d(h,p).forEach(function(a){k.delete(a)})}d.set(a,k)}.bind(a));b.forEach(function(a){if("@rev"!=a.key()){var b=parseInt(a.key(),10);if(!c.has(b)){a=a.val();var h=d.get(a.T),k=this.K.get(h.getName());k.getData().has(b)?h.modify([$d(k,[b])[0],new y(b,a.P)]):h.add(new y(b,a.P))}}}.bind(a));return A(d).filter(function(a){return!a.Pf()})}
function Yd(a,b){var c=x(),d=a.Sa.get(b);a.j.orderByChild("T").equalTo(d).once("value",function(a){var d=new Zd,h=[];a.forEach(function(a){h.push(new y(parseInt(a.key(),10),a.val().P))});ae(d,h);this.K.set(b,d);c.resolve()}.bind(a));return c.ja}function ee(a){var b={};b["@db"]={version:a.l.version()};b["@rev"]={R:1};a.Ja=1;b["@table"]={};a.l.ra().forEach(function(a,d){var e=a.getName();b["@table"][e]=d;this.K.set(e,new Zd);this.Sa.set(e,d)},a);return b}m.yb=function(a,b){return new Xd(this,a,b)};
m.wc=function(a){var b=this.K.get(a)||null;if(null!==b)return b;throw new C(101,a);};m.close=aa();m.subscribe=ba("Ad");m.Dc=function(a){null!=this.Ad&&this.Ad(a)};function N(a,b,c,d){this.j=b;this.La=c;this.Wb=a;this.Tc=d}r("lf.backstore.IndexedDBRawBackStore",N);N.prototype.cd=g("j");N.prototype.getRawDBInstance=N.prototype.cd;N.prototype.dd=g("La");N.prototype.getRawTransaction=N.prototype.dd;N.prototype.oc=function(a){return new v(function(b,c){try{this.j.deleteObjectStore(a)}catch(d){c(d);return}b()},this)};N.prototype.dropTable=N.prototype.oc;
function ie(a,b,c,d){return new v(function(a,f){var h;try{var k=this.La.objectStore(b);h=k.openCursor()}catch(p){f(p);return}h.onsuccess=function(){var b=h.result;b?(c(b),b.continue()):(d(k),a())};h.onerror=f},a)}function je(a){var b=null;return b=a instanceof ArrayBuffer?qb(a):a instanceof Date?a.getTime():a}
function ke(a,b,c){function d(a){var b=ic(a.value),d=b.o,e;for(e in d){var E=ob(d[e]);c(E);d[e]=E.Ha()}a.update(b.Ha())}function e(a){var b=ob(a.value);c(b);a.update(b.Ha())}return ie(a,b,a.Tc?d:e,aa())}N.prototype.jc=function(a,b,c){var d=je(c);return ke(this,a,function(a){a.o[b]=d})};N.prototype.addTableColumn=N.prototype.jc;N.prototype.pc=function(a,b){return ke(this,a,function(a){delete a.o[b]})};N.prototype.dropTableColumn=N.prototype.pc;
N.prototype.Jc=function(a,b,c){return ke(this,a,function(a){a.o[c]=a.o[b];delete a.o[b]})};N.prototype.renameTableColumn=N.prototype.Jc;function le(a,b){var c=[];return new v(function(a,e){var f;try{f=this.La.objectStore(b).openCursor()}catch(h){e(h);return}f.onsuccess=function(){var b=f.result;if(b){if(this.Tc){var e;e=ic(b.value).o;for(var h in e)c.push(e[h])}else c.push(b.value);b.continue()}else a(c)}.bind(this);f.onerror=e},a)}N.prototype.qb=function(a){var b={},c;for(c in a)b[c]=je(a[c]);return pb(b)};
N.prototype.createRow=N.prototype.qb;N.prototype.yc=g("Wb");N.prototype.getVersion=N.prototype.yc;N.prototype.dump=function(){for(var a=this.j.objectStoreNames,b=[],c=0;c<a.length;++c){var d=a.item(c);b.push(this.ac(d))}return bb(b).then(function(b){var c={};b.forEach(function(b,d){c[a.item(d)]=b});return c})};N.prototype.dump=N.prototype.dump;N.prototype.ac=function(a){return le(this,a).then(function(a){return a.map(function(a){return a.value})})};function me(a,b){this.$=a;this.Ib=b}m=me.prototype;m.get=function(a){if(0==a.length)return this.uc();a=a.map(function(a){return new v(function(c,d){var e;try{e=this.$.get(a)}catch(f){d(f);return}e.onerror=d;e.onsuccess=function(a){c(this.Ib(a.target.result))}.bind(this)},this)},this);return bb(a)};
m.uc=function(){return new v(function(a,b){var c=[],d;try{d=this.$.openCursor()}catch(e){b(e);return}d.onerror=b;d.onsuccess=function(){var b=d.result;b?(c.push(this.Ib(b.value)),b.continue()):a(c)}.bind(this)},this)};m.Qb=function(a){return new v(function(b,c){var d;try{d=a()}catch(e){c(e);return}d.onsuccess=b;d.onerror=c},this)};m.put=function(a){if(0==a.length)return w();a=a.map(function(a){return this.Qb(function(){return this.$.put(a.Ha())}.bind(this))},this);return bb(a)};
m.remove=function(a){return new v(function(b,c){var d=this.$.count();d.onsuccess=function(d){if(0==a.length||d.target.result==a.length)return this.Qb(function(){return this.$.clear()}.bind(this)).then(b,c);d=a.map(function(a){return this.Qb(function(){return this.$.delete(a)}.bind(this))},this);bb(d).then(b,c)}.bind(this);d.onerror=c},this)};function ne(a,b,c,d,e){Ib.call(this,c,d);this.h=a;this.La=b;this.Tc=e;this.La.oncomplete=this.aa.resolve.bind(this.aa);this.La.onabort=this.aa.reject.bind(this.aa)}t(ne,Ib);ne.prototype.G=function(a,b,c){return this.Tc?(c=null!=c?c:0,a=this.La.objectStore(a),new jc(a,b,0==c?ra(lc,this.h):mc)):new me(this.La.objectStore(a),b)};ne.prototype.lc=function(){return this.aa.ja};function oe(a,b){this.h=a;this.l=b;this.Uc=b.Se().Af||!1}m=oe.prototype;
m.Da=function(a){var b=window.indexedDB||window.mozIndexedDB||window.webkitIndexedDB||window.msIndexedDB;if(null==b)throw new C(352);var c=a||function(){return w()};return new v(function(a,e){var f;try{f=b.open(this.l.name(),this.l.version())}catch(h){e(h);return}f.onerror=e;f.onupgradeneeded=function(a){pe(this,c,a).then(aa(),e)}.bind(this);f.onsuccess=function(b){this.j=b.target.result;this.de().then(function(b){nb=b+1;a(this.j)}.bind(this))}.bind(this)},this)};
function pe(a,b,c){var d=c.target.result,e=c.target.transaction;c=new N(c.oldVersion,d,e,a.Uc);qe(d);a.l.ra().forEach(ra(a.vf,d,e),a);return b(c)}function qe(a){for(var b=[],c=0;c<a.objectStoreNames.length;++c){var d=a.objectStoreNames.item(c);-1!=d.indexOf(".")&&b.push(d)}b.forEach(function(b){try{a.deleteObjectStore(b)}catch(c){}})}
m.vf=function(a,b,c){a.objectStoreNames.contains(c.getName())||a.createObjectStore(c.getName(),{keyPath:"id"});c.Db()&&(c.Ca().forEach(function(c){this.nc(a,b,c.m(),"btree")},this),this.nc(a,b,re(c),"rowid"))};m.nc=function(a,b,c,d){a.objectStoreNames.contains(c)||(a.createObjectStore(c,{keyPath:"id"}),a=b.objectStore(c),(this.Uc?new jc(a,ob,mc):new me(a,ob)).put([new sb(new rb(d))]))};
m.yb=function(a,b){var c=Gb(b.Y());Oc(b).forEach(function(a){c.push(a)});var d=this.j.transaction(c,0==a?"readonly":"readwrite");return new ne(this.h,d,b,a,this.Uc)};
m.de=function(a){function b(){if(0==d.length)return w();var a=d.shift();return c(a).then(b)}function c(b){return new v(function(c,d){var ea;try{ea=(a||e.transaction([b])).objectStore(b).openCursor(null,"prev")}catch(ka){d(ka);return}ea.onsuccess=function(a){(a=a.target.result)&&(f=Math.max(f,h(a)));c(f)};ea.onerror=function(){c(f)}})}var d=this.l.ra().map(function(a){return a.getName()}),e=this.j,f=0,h=function(a){return this.Uc?(a=ic(a.value),Object.keys(a.o).reduce(function(a,b){return Math.max(a,
b)},0)):a.key}.bind(this);return new v(function(a){b().then(function(){a(f)})})};m.close=function(){this.j.close()};m.wc=function(){throw new C(511);};m.subscribe=aa();m.Dc=aa();function se(a,b,c){Ib.call(this,c,b);this.$=a;0==b&&this.aa.resolve()}t(se,Ib);se.prototype.G=function(a){return this.$.wc(a)};se.prototype.lc=function(){this.aa.resolve();return this.aa.ja};function te(a){this.l=a;this.K=z()}m=te.prototype;m.Da=function(){this.l.ra().forEach(this.Mf,this);return w()};m.wc=function(a){var b=this.K.get(a)||null;if(null===b)throw new C(101,a);return b};m.yb=function(a,b){return new se(this,a,b)};function ue(a,b){if(!a.K.has(b)){var c=new Zd;a.K.set(b,c);return c}return null}m.Mf=function(a){ue(this,a.getName());a.Db()&&(a.Ca().forEach(function(a){this.nc(a.m(),"btree")},this),this.nc(re(a),"rowid"))};m.nc=function(a,b){var c=ue(this,a);null===c||c.put([new sb(new rb(b))])};
m.close=aa();m.subscribe=aa();m.Dc=aa();function ve(a){te.call(this,a);this.jd=null}t(ve,te);ve.prototype.subscribe=function(a){null===this.jd&&(this.jd=a)};ve.prototype.Dc=function(a){null===this.jd||this.jd(a)};function we(a,b,c){this.La=a;this.w=b;this.Ib=c}we.prototype.get=function(a){var b=this.Ib;xe(this.La,"SELECT id, value FROM "+this.w+" "+(0==a.length?"":"WHERE id IN ("+a.join(",")+")"),[],function(a){for(var d=a.rows.length,e=Array(d),f=0;f<d;++f)e[f]=b({id:a.rows.item(f).id,value:JSON.parse(a.rows.item(f).value)});return e});return this.La.la()};
we.prototype.put=function(a){if(0==a.length)return w();var b="INSERT OR REPLACE INTO "+this.w+"(id, value) VALUES (?, ?)";a.forEach(function(a){xe(this.La,b,[a.id(),JSON.stringify(a.o)])},this);return w()};we.prototype.remove=function(a){xe(this.La,"DELETE FROM "+this.w+" "+(0==a.length?"":"WHERE id IN ("+a.join(",")+")"),[]);return w()};function ye(a,b,c){Ib.call(this,b,c);this.j=a;this.K=z();this.Dd=[]}t(ye,Ib);ye.prototype.G=function(a,b){var c=this.K.get(a)||null;null===c&&(c=new we(this,a,b),this.K.set(a,c));return c};function xe(a,b,c,d){a.Dd.push({ng:b,dg:c,transform:d})}
ye.prototype.lc=function(){var a,b,c=this.aa.reject.bind(this.aa),d=function(a,b){this.aa.reject(b)}.bind(this),e=function(c,h){a=h;if(this.Dd.length){var k=this.Dd.shift();b=k.transform;c.executeSql(k.ng,k.dg,e,d)}else k=a,null!=b&&null!=a&&(k=b(a)),this.aa.resolve(k)}.bind(this);0==this.ff?this.j.readTransaction(e,c):this.j.transaction(e,c);return this.aa.ja};function O(a,b,c){this.j=c;this.h=a;this.Wb=b}r("lf.backstore.WebSqlRawBackStore",O);O.prototype.cd=g("j");O.prototype.getRawDBInstance=O.prototype.cd;O.prototype.dd=function(){throw new C(356);};O.prototype.getRawTransaction=O.prototype.dd;function ze(a){return new ye(a.j,new Nc(a.h,B()),1)}O.prototype.oc=function(a){var b=ze(this);xe(b,"DROP TABLE "+a,[]);return b.la()};O.prototype.dropTable=O.prototype.oc;
O.prototype.ac=function(a){var b=ze(this);xe(b,"SELECT id, value FROM "+a,[]);return b.la().then(function(a){for(var b=a.rows.length,e=Array(b),f=0;f<b;++f)e[f]={id:a.rows.item(f).id,value:JSON.parse(a.rows.item(f).value)};return w(e)})};function Ae(a,b,c){var d=ze(a),e="UPDATE "+b+" SET value=? WHERE id=?";return a.ac(b).then(function(a){a.forEach(function(a){a=c(a);xe(d,e,[JSON.stringify(a.value),a.id])});return d.la()})}
O.prototype.jc=function(a,b,c){var d=je(c);return Ae(this,a,function(a){a.value[b]=d;return a})};O.prototype.addTableColumn=O.prototype.jc;O.prototype.pc=function(a,b){return Ae(this,a,function(a){delete a.value[b];return a})};O.prototype.dropTableColumn=O.prototype.pc;O.prototype.Jc=function(a,b,c){return Ae(this,a,function(a){a.value[c]=a.value[b];delete a.value[b];return a})};O.prototype.renameTableColumn=O.prototype.Jc;O.prototype.qb=function(a){var b={},c;for(c in a)b[c]=je(a[c]);return pb(b)};
O.prototype.createRow=O.prototype.qb;O.prototype.yc=g("Wb");O.prototype.getVersion=O.prototype.yc;function Be(a){xe(a,'SELECT tbl_name FROM sqlite_master WHERE type="table"',[],function(a){for(var c=Array(a.rows.length),d=0;d<c.length;++d)c[d]=a.rows.item(d).tbl_name;return c})}
O.prototype.dump=function(){var a=x(),b=ze(this);Be(b);var c={};b.la().then(function(b){b=b.filter(function(a){return"__lf_ver"!=a&&"__WebKitDatabaseInfoTable__"!=a}).map(function(a){return this.ac(a).then(function(b){c[a]=b})},this);bb(b).then(function(){a.resolve(c)})}.bind(this));return a.ja};O.prototype.dump=O.prototype.dump;function Ce(a,b,c){this.h=a;this.l=b;this.mg=c||4194304}function De(a){return new Nc(a.h,B())}m=Ce.prototype;m.Da=function(a){if(null==window.openDatabase)throw new C(353);var b=a||function(){return w()};return new v(function(a,d){try{var e=window.openDatabase(this.l.name(),"",this.l.name(),this.mg);if(null!=e)this.j=e,Ee(this,b).then(a,d);else throw new C(354);}catch(f){d(f)}},this)};
function Ee(a,b){var c=x(),d=new ye(a.j,De(a),1);xe(d,"CREATE TABLE IF NOT EXISTS __lf_ver(id INTEGER PRIMARY KEY, v INTEGER)",[]);xe(d,"SELECT v FROM __lf_ver WHERE id = 0",[]);d.la().then(function(a){var d=0;a.rows.length&&(d=a.rows.item(0).v);d<this.l.version()?this.Xd(b,d).then(c.resolve.bind(c)):d>this.l.version()?c.reject(new C(108)):c.resolve()}.bind(a));return c.ja}m.yb=function(a,b){if(null!=this.j)return new ye(this.j,b,a);throw new C(2);};m.close=aa();m.wc=function(){throw new C(512);};
m.subscribe=function(){throw new C(355);};m.Dc=function(){throw new C(355);};m.Xd=function(a,b){var c=x();Fe(this).then(function(){a(new O(this.h,b,this.j)).then(function(){return this.de()}.bind(this)).then(c.resolve.bind(c))}.bind(this),c.reject.bind(c));return c.ja};
function Fe(a){var b=a.l.ra(),c=new ye(a.j,De(a),1),d=new ye(a.j,De(a),1);xe(c,"INSERT OR REPLACE INTO __lf_ver VALUES (0, ?)",[a.l.version()]);Be(c);return c.la().then(function(a){a.filter(function(a){return-1!=a.indexOf(".")}).forEach(function(a){xe(d,"DROP TABLE "+a,[])});var c=a.filter(function(a){return-1==a.indexOf(".")});b.map(function(a){return a.getName()}).filter(function(a){return-1==c.indexOf(a)}).forEach(function(a){xe(d,"CREATE TABLE "+a+"(id INTEGER PRIMARY KEY, value TEXT)",[])});
return d.la()})}m.de=function(){var a=0,b=x(),c=function(b){var c=new ye(this.j,De(this),0);xe(c,"SELECT MAX(id) FROM "+b,[]);return c.la().then(function(b){b=b.rows.item(0)[0];a=Math.max(b,a)})}.bind(this),d=this.l.ra().map(function(a){return c(a.getName())});bb(d).then(function(){b.resolve(a)},function(a){b.reject(a)});return b.ja};function Ge(a){this.W=z();this.Vb=z();a.ra().forEach(function(a){this.Vb.set(a.getName(),B())},this)}m=Ge.prototype;m.set=function(a,b){this.W.set(b.id(),b);this.Vb.get(a).add(b.id())};m.rd=function(a,b){var c=this.Vb.get(a);b.forEach(function(a){this.W.set(a.id(),a);c.add(a.id())},this)};m.get=function(a){return this.W.get(a)||null};function He(a,b){return b.map(function(a){return this.get(a)},a)}
m.Wa=function(a,b,c){var d=[],e=Math.min(b,c),f=Math.max(b,c);a=this.Vb.get(a);if(a.size<f-e)a.forEach(function(a){a>=e&&a<=f&&(a=this.W.get(a),d.push(a))},this);else for(b=e;b<=f;++b)a.has(b)&&(c=this.W.get(b),d.push(c));return d};m.remove=function(a,b){this.W.delete(b);this.Vb.get(a).delete(b)};m.ug=function(a){return null!=a?this.Vb.get(a).size:this.W.size};m.clear=function(){this.W.clear();this.Vb.clear()};function Ie(a,b,c){var d=0,e=a.length;for(c=c||Je;d<e;){var f=d+e>>1;0>c(a[f],b)?d=f+1:e=f}return d==e&&a[d]==b?d:~d}function Je(a,b){return a-b}function Ke(a,b,c){c=Ie(a,b,c);return 0>c?(a.splice(-(c+1),0,b),!0):!1};function Le(a,b,c,d){a=b?a.reverse():a;if(null==c&&null==d)return a;c=Math.min(q(c)?c:a.length,a.length);if(0==c)return[];d=Math.min(d||0,a.length);return a.slice(d,d+c)};function Me(){this.na=0}Me.prototype.add=function(a,b){this.na+=b};Me.prototype.remove=function(a,b){this.na-=b};Me.prototype.clear=function(){this.na=0};function Ne(a,b){a.clear();b.forEach(function(a){this.na+=a.na},a)};function Oe(a,b,c,d){this.w=a;this.S=b;this.he=c;this.lb=new Me;if(d){a=511;a*=a*a;if(d.length>=a)throw new C(6,a);d=Pe(this,d);this.qa=d=Qe(d)}else this.clear()}var Re=[];m=Oe.prototype;m.getName=g("w");m.toString=function(){return this.qa.toString()};m.add=function(a,b){this.qa=this.qa.ub(a,b)};m.set=function(a,b){this.qa=this.qa.ub(a,b,!0)};m.remove=function(a,b){this.qa=this.qa.remove(a,b)};m.get=function(a){return this.qa.get(a)};
m.Yc=function(a){if(null==a)return this.Ka().na;if(a instanceof Rc){if(Wc(a))return this.Ka().na;if(Xc(a))return this.get(a.b).length}return this.Wa([a]).length};m.Ka=g("lb");m.uc=function(a,b,c,d){c=Array(a);this.qa.fill({offset:b?this.lb.na-a-d:d,count:a,ge:0},c);return b?c.reverse():c};
m.Wa=function(a,b,c,d){var e=Se(this.qa).c[0];if(!q(e)||0==c)return Re;b=b||!1;c=null!=c?Math.min(c,this.lb.na):this.lb.na;d=d||0;var f=Math.min(Math.max(this.lb.na-d,0),c);if(0==f)return Re;if(!q(a)||1==a.length&&a[0]instanceof Rc&&Wc(a[0]))return this.uc(f,b,c,d);a=this.S.bf(a);var h=Array(b?this.lb.na:f),k={count:0,V:h.length,reverse:b,M:d};a.forEach(function(a){for(var b=this.S.od(a),b=this.S.Nd(a)?e:b[0],b=Te(this.qa,b),c=k.count,d=0;null!=b&&k.count<k.V;)b.Wa(a,k,h),k.count!=c?(d=0,c=k.count):
d++,b=2==d?null:b.next()},this);h.splice(k.count,f-k.count);return b?Le(h,b,c,d):h};m.clear=function(){this.qa=Ue(this);this.lb.clear()};m.bb=function(a){return this.qa.bb(a)};m.min=function(){return this.Cc(this.S.min.bind(this.S))};m.max=function(){return this.Cc(this.S.max.bind(this.S))};m.Cc=function(a){var b=Se(this.qa),c=Ve(this.qa);if(0==b.c.length&&0==c.c.length)return null;var d=b.c[0],b=b.A[0],e=c.c[c.c.length-1],c=c.A[c.c.length-1];return 1==a(d,e)?[d,this.he?[b]:b]:[e,this.he?[c]:c]};
m.Fa=g("he");m.mc=g("S");m.Rd=function(a,b){return null!=a?-1==this.S.compare(a,b):!1};m.Oa=function(a,b){return null!=a?0==this.S.compare(a,b):!1};m.Ha=function(){for(var a=[],b=Se(this.qa);b;)a.push(new y(b.oa,[b.c,b.A])),b=b.va;return a};function We(a,b,c,d){a=new Oe(b,a,c);d=Xe(d,a);a.qa=d;return a}function Ye(a,b){this.oa=a;this.D=b;this.fb=0;this.va=this.xb=this.B=null;this.c=[];this.A=[];this.g=[]}function Ue(a){return new Ye(nb++,a)}function P(a){return 0==a.fb}m=Ye.prototype;m.next=g("va");
function Ze(a){function b(a){return null!=a?a.oa.toString():"_"}var c=a.oa+"["+a.c.join("|")+"]",d=a.g.map(function(a){return a.oa}).join("|"),e=a.A.join("/"),f=b(a.xb)+"{",f=P(a)?f+e:f+d,f=f+"}"+b(a.B);a.va&&(a=Ze(a.va),c=c+"  "+a[0],f=f+"  "+a[1]);return[c,f]}m.toString=function(){var a="",b=Ze(this),a=a+(b[0]+"\n"+b[1]+"\n");this.g.length&&(a+=this.g[0].toString());return a};function Se(a){return P(a)?a:Se(a.g[0])}function Ve(a){return P(a)?a:Ve(a.g[a.g.length-1])}
function $e(a,b){b&&(b.xb=a);a&&(a.va=b)}function Pe(a,b){for(var c=b.length,d=0,e=Ue(a),f=e;0<c;){var h=768<=c?511:257<=c&&511>=c?c:257,k=b.slice(d,d+h);e.c=k.map(function(a){return a.key});e.A=k.map(function(a){return a.value});d+=h;c-=h;0<c&&(h=Ue(e.D),$e(e,h),e=h)}return f}function af(a){var b=a[0],c=Ue(b.D);c.fb=b.fb+1;c.g=a;for(b=0;b<a.length;++b)a[b].B=c,0<b&&c.c.push(a[b].c[0]);return c}
function Qe(a){var b=a,c=[];do c.push(b),b=b.va;while(b);if(512>=c.length)b=af(c);else{var d=c.length,e=0,b=Ue(a.D);for(b.fb=a.fb+2;0<d;){a=768<=d?511:257<=d&&511>=d?d:257;var f=c.slice(e,e+a),h=af(f);h.B=b;b.g.length&&(b.c.push(f[0].c[0]),$e(b.g[b.g.length-1],h));b.g.push(h);e+=a;d-=a}}return b}m.get=function(a){var b=bf(this,a);if(P(this)){var c=Re;this.D.Oa(this.c[b],a)&&(c=c.concat(this.A[b]));return c}b=this.D.Oa(this.c[b],a)?b+1:b;return this.g[b].get(a)};
m.bb=function(a){var b=bf(this,a);return this.D.Oa(this.c[b],a)?!0:P(this)?!1:this.g[b].bb(a)};m.remove=function(a,b){cf(this,a,-1,b);if(null==this.B){var c=this;1==this.g.length&&(c=this.g[0],c.B=null);return c}return this};function df(a){return P(a)?a.c[0]:df(a.g[0])}function ef(a){a.c=[];for(var b=1;b<a.g.length;++b)a.c.push(df(a.g[b]))}
function cf(a,b,c,d){var e=bf(a,b),f=P(a);if(!f){var h=a.D.Oa(a.c[e],b)?e+1:e;if(cf(a.g[h],b,h,d))ef(a);else return!1}else if(!a.D.Oa(a.c[e],b))return!1;if(a.c.length>e&&a.D.Oa(a.c[e],b)){if(q(d)&&!a.D.Fa()&&f&&(h=a.A[e],d=Ie(h,d,void 0),0>d?d=!1:(h.splice(d,1),d=!0),d&&a.D.Ka().remove(b,1),a.A[e].length))return!1;a.c.splice(e,1);f&&(f=a.D.Fa()?1:a.A[e].length,a.A.splice(e,1),a.D.Ka().remove(b,f))}if(256>a.c.length&&null!=a.B){a:{b=null;if(a.va&&256<a.va.c.length)b=a.va,e=d=0,f=a.c.length+1;else if(a.xb&&
256<a.xb.c.length)b=a.xb,d=a.xb.c.length-1,e=P(a)?d:d+1,f=0;else{b=!1;break a}a.c.splice(f,0,b.c[d]);b.c.splice(d,1);d=P(a)?a.A:a.g;h=null;P(a)?h=b.A:(h=b.g,h[e].B=a);d.splice(f,0,h[e]);h.splice(e,1);P(b)||(ef(b),ef(a));b=!0}b||ff(a,c)}return!0}
function ff(a,b){var c,d,e;a.va&&511>a.va.c.length?(c=a.va,e=d=0):a.xb&&(c=a.xb,d=c.c.length,e=P(c)?c.A.length:c.g.length);d=[d,0].concat(a.c);Array.prototype.splice.apply(c.c,d);d=null;P(a)?d=a.A:(d=a.g,d.forEach(function(a){a.B=c}));d=[e,0].concat(d);Array.prototype.splice.apply(P(c)?c.A:c.g,d);$e(a.xb,a.va);P(c)||ef(c);-1!=b&&(a.B.c.splice(b,1),a.B.g.splice(b,1))}
m.ub=function(a,b,c){var d=bf(this,a);if(P(this)){if(this.D.Oa(this.c[d],a)){if(c)this.D.Ka().remove(a,this.D.Fa()?1:this.A[d].length),this.A[d]=this.D.Fa()?b:[b];else{if(this.D.Fa())throw new C(201);if(!Ke(this.A[d],b))throw new C(109);}this.D.Ka().add(a,1);return this}this.c.splice(d,0,a);this.A.splice(d,0,this.D.Fa()?b:[b]);this.D.Ka().add(a,1);512==this.c.length?(d=Ue(this.D),a=Ue(this.D),a.fb=1,a.c=[this.c[256]],a.g=[this,d],a.B=this.B,this.B=a,d.c=this.c.splice(256),d.A=this.A.splice(256),d.B=
a,$e(d,this.va),$e(this,d),d=a):d=this;return d}d=this.D.Oa(this.c[d],a)?d+1:d;a=this.g[d].ub(a,b,c);P(a)||1!=a.c.length||(this.c.splice(d,0,a.c[0]),a.g[1].B=this,a.g[0].B=this,this.g.splice(d,1,a.g[1]),this.g.splice(d,0,a.g[0]));return 512==this.c.length?gf(this):this};function gf(a){var b=Ue(a.D),c=Ue(a.D);b.B=a.B;b.fb=a.fb+1;b.c=[a.c[256]];b.g=[a,c];a.c.splice(256,1);c.B=b;c.fb=a.fb;c.c=a.c.splice(256);c.g=a.g.splice(257);c.g.forEach(function(a){a.B=c});a.B=b;$e(c,a.va);$e(a,c);return b}
function bf(a,b){for(var c=0,d=a.c.length;c<d;){var e=c+d>>1;a.D.Rd(a.c[e],b)?c=e+1:d=e}return c}function Te(a,b){if(!P(a)){var c=bf(a,b);a.D.Oa(a.c[c],b)&&c++;return Te(a.g[c],b)}return a}
m.Wa=function(a,b,c){function d(a){return a[0]?a[1]?0:1:-1}var e=this.D.mc(),f=0,h=this.c.length-1,k=this.c,p=d(e.pb(k[f],a)),E=d(e.pb(k[h],a));if(1!=p&&(-1!=p||-1!=E)){var ea=function(a,b){var c=a+b>>1;return c==a?c+1:c},ka=function(b,c,f){if(b>=c)return 0==f?c:-1;var h=d(e.pb(k[b],a));if(0==h)return b;if(1==h)return-1;h=ea(b,c);if(h==c)return 0==f?c:-1;var p=d(e.pb(k[h],a));return 0==p?ka(b,h,p):-1==p?ka(h+1,c,f):ka(b+1,h,p)},Va=function(b,c){if(b>=c)return b;var f=d(e.pb(k[c],a));if(0==f)return c;
if(-1==f)return b;f=ea(b,c);if(f==c)return b;var h=d(e.pb(k[f],a));return 0==h?Va(f,c):1==h?Va(b,f-1):-1};0!=p&&(f=ka(f+1,h,E));-1!=f&&(h=Va(f,h),-1!=h&&h>=f&&hf(this,b,c,f,h+1))}};function hf(a,b,c,d,e){for(;d<e&&(b.reverse||!(b.count>=b.V));++d)if(a.D.Fa())!b.reverse&&b.M?b.M--:c[b.count++]=a.A[d];else for(var f=0;f<a.A[d].length&&b.count<c.length;++f)!b.reverse&&b.M?b.M--:c[b.count++]=a.A[d][f]}
m.fill=function(a,b){if(P(this))for(var c=0;c<this.A.length&&0<a.count;++c)if(0<a.offset){if(a.offset-=this.D.Fa()?1:this.A[c].length,0>a.offset)for(var d=this.A[c].length+a.offset;d<this.A[c].length&&0<a.count;++d)b[a.ge++]=this.A[c][d],a.count--}else if(this.D.Fa())b[a.ge++]=this.A[c],a.count--;else for(d=0;d<this.A[c].length&&0<a.count;++d)b[a.ge++]=this.A[c][d],a.count--;else for(c=0;c<this.g.length&&0<a.count;++c)this.g[c].fill(a,b)};
function Xe(a,b){for(var c=b.Ka(),d=a.map(function(a){var d=new Ye(a.id(),b);d.c=a.o[0];d.A=a.o[1];d.c.forEach(function(a,e){c.add(a,b.Fa()?1:d.A[e].length)});return d}),e=0;e<d.length-1;++e)$e(d[e],d[e+1]);return 1<d.length?Qe(d[0]):d[0]};function jf(a){if(1==a.f.length)return new kf(a.f[0].hb);a=a.f.map(function(a){return a.hb});return new mf(a)}function kf(a){this.Xc=0==a?nf:of;this.Sd=0==a?function(a){return null!=a?a.reverse():null}:function(a){return a||null};this.Yd=0==a?pf:qf}t(kf,nc);function of(a,b){return a>b?1:a<b?-1:0}function nf(a,b){return of(b,a)}function qf(a,b){return Yc(a,b)}function pf(a,b){return Yc(b,a)}m=kf.prototype;
m.pb=function(a,b){var c=this.Sd(b),d=[null===c.b,null===c.s];if(!d[0]){var e=this.Xc(a,c.b);d[0]=c.ca?1==e:-1!=e}d[1]||(e=this.Xc(a,c.s),d[1]=c.ma?-1==e:1!=e);return d};m.compare=function(a,b){return this.Xc(a,b)};m.min=function(a,b){return a<b?1:a==b?0:-1};m.max=function(a,b){return a>b?1:a==b?0:-1};m.Md=function(a,b){var c=this.pb(a,b);return c[0]&&c[1]};m.bf=function(a){return a.filter(function(a){return null!==a}).sort(function(a,c){return this.Yd(a,c)}.bind(this))};m.Nd=function(a){return fa(this.Sd(a).b)};
m.od=function(a){a=this.Sd(a);return[a.b,a.s]};m.toString=function(){return this.Xc==nf?"SimpleComparator_DESC":"SimpleComparator_ASC"};function mf(a){this.Ia=a.map(function(a){return new kf(a)})}t(mf,nc);function rf(a,b,c,d){for(var e=0,f=0;f<a.Ia.length&&0==e;++f)e=d(a.Ia[f],b[f],c[f]);return e}m=mf.prototype;m.compare=function(a,b){return rf(this,a,b,function(a,b,e){return a.compare(b,e)})};m.min=function(a,b){return rf(this,a,b,function(a,b,e){return a.min(b,e)})};
m.max=function(a,b){return rf(this,a,b,function(a,b,e){return a.max(b,e)})};m.pb=function(a,b){for(var c=[!0,!0],d=0;d<this.Ia.length&&(c[0]||c[1]);++d){var e=this.Ia[d].pb(a[d],b[d]);c[0]=c[0]&&e[0];c[1]=c[1]&&e[1]}return c};m.Md=function(a,b){for(var c=!0,d=0;d<this.Ia.length&&c;++d)c=this.Ia[d].Md(a[d],b[d]);return c};
m.bf=function(a){var b=a.filter(function(a){return a.every(ga)});a=Array(this.Ia.length);for(var c=0;c<a.length;c++)a[c]=b.map(function(a){return a[c]});a.forEach(function(a,b){a.sort(function(a,c){return this.Ia[b].Yd(a,c)}.bind(this))},this);b=Array(b.length);for(c=0;c<b.length;c++)b[c]=a.map(function(a){return a[c]});return b.sort(function(a,b){for(var c=0,h=0;h<this.Ia.length&&0==c;++h)c=this.Ia[h].Yd(a[h],b[h]);return c}.bind(this))};m.Nd=function(a){return this.Ia[0].Nd(a[0])};
m.od=function(a){var b=a.map(function(a,b){return this.Ia[b].od(a)[0]},this);a=a.map(function(a,b){return this.Ia[b].od(a)[1]},this);return[b,a]};function sf(a){this.ea=a;this.gb=B();this.Lc=new Me;this.lb=new Me}m=sf.prototype;m.getName=function(){return this.ea.getName()};m.add=function(a,b){null===a?(this.gb.add(b),this.Lc.add(a,1)):this.ea.add(a,b)};m.set=function(a,b){null===a?(this.gb.clear(),this.Lc.clear(),this.add(a,b)):this.ea.set(a,b)};m.remove=function(a,b){null===a?b?(this.gb.delete(b),this.Lc.remove(a,1)):(this.gb.clear(),this.Lc.clear()):this.ea.remove(a,b)};m.get=function(a){return null===a?cc(this.gb):this.ea.get(a)};
m.Yc=function(a){return this.ea.Yc(a)};m.Ka=function(){Ne(this.lb,[this.ea.Ka(),this.Lc]);return this.lb};m.Wa=function(a,b,c,d){b=this.ea.Wa(a,b,c,d);return null!=a?b:b.concat(cc(this.gb))};m.clear=function(){this.gb.clear();this.ea.clear()};m.bb=function(a){return null===a?0!=this.gb.size:this.ea.bb(a)};m.min=function(){return this.ea.min()};m.max=function(){return this.ea.max()};m.Ha=function(){return[new y(-2,cc(this.gb))].concat(this.ea.Ha())};m.mc=function(){return this.ea.mc()};
function tf(a,b){for(var c=-1,d=0;d<b.length;++d)if(-2==b[d].id()){c=d;break}if(-1==c)throw new C(102);var d=b[c].o,e=b.slice(0);e.splice(c,1);var c=a(e),f=new sf(c);d.forEach(function(a){f.gb.add(a)});return f}m.Fa=function(){return this.ea.Fa()};function uf(a){this.w=a;this.kb=B();this.S=new kf(1)}m=uf.prototype;m.getName=g("w");m.add=function(a){if("number"!=typeof a)throw new C(103);this.kb.add(a)};m.set=function(a,b){this.add(a,b)};m.remove=function(a){this.kb.delete(a)};m.get=function(a){return this.bb(a)?[a]:[]};m.min=function(){return this.Cc(this.S.min.bind(this.S))};m.max=function(){return this.Cc(this.S.max.bind(this.S))};
m.Cc=function(a){if(0==this.kb.size)return null;var b=cc(this.kb).reduce(function(b,d){return null===b||1==a(d,b)?d:b},null);return[b,[b]]};m.Yc=function(){return this.kb.size};m.Wa=function(a,b,c,d){var e=a||[Vc()];a=cc(this.kb).filter(function(a){return e.some(function(b){return this.S.Md(a,b)},this)},this);return Le(a,b,c,d)};m.clear=function(){this.kb.clear()};m.bb=function(a){return this.kb.has(a)};m.Ha=function(){return[new y(0,cc(this.kb))]};m.mc=g("S");
function vf(a,b){var c=new uf(a);b[0].o.forEach(function(a){c.add(a,a)});return c}m.Fa=l(!0);m.Ka=function(){var a=new Me;a.na=this.kb.size;return a};function wf(a){this.h=a;this.Ma=a.i(Pb);this.C=a.i(Rb);this.ba=a.i(Qb)}wf.prototype.Da=function(a){var b=a.ra(),c=function(){if(0==b.length)return w();var a=b.shift();return(a.Db()?xf(this,a):yf(this,a)).then(c)}.bind(this);return c()};function yf(a,b){var c=new Nc(a.h,B([b]));return a.Ma.yb(0,c).G(b.getName(),b.Jb.bind(b)).get([]).then(function(a){this.ba.rd(b.getName(),a);zf(this,b,a)}.bind(a))}
function zf(a,b,c){var d=a.C.gc.get(b.getName())||[];c.forEach(function(a){d.forEach(function(b){var c=a.Bb(b.getName());b.add(c,a.id())})})}function xf(a,b){var c=new Nc(a.h,B([b])),d=a.Ma.yb(0,c),c=d.G(b.getName(),b.Jb).get([]).then(function(a){this.ba.rd(b.getName(),a)}.bind(a)),e=b.Ca().map(function(a){return Af(this,a,d)},a).concat(Bf(a,b,d));return bb(e.concat(c))}
function Af(a,b,c){c=c.G(b.m(),ob,1);var d=jf(b);return c.get([]).then(function(a){if(1<a.length){if(Cf(b)){var c=We.bind(void 0,d,b.m(),b.Ac);a=tf(c,a.slice(1))}else a=We(d,b.m(),b.Ac,a.slice(1));this.C.set(b.Mc,a)}}.bind(a))}function Bf(a,b,c){return c.G(re(b),ob,1).get([]).then(function(a){1<a.length&&(a=vf(re(b),a.slice(1)),this.C.set(b.getName(),a))}.bind(a))};function Df(){this.$=z();this.gc=z()}Df.prototype.Da=function(a){a.ra().forEach(function(a){var c=[];this.gc.set(a.getName(),c);var d=re(a);if(null===this.get(d)){var e=new uf(d);c.push(e);this.$.set(d,e)}a.Ca().forEach(function(a){var b;b=jf(a);b=new Oe(a.m(),b,a.Ac);b=Cf(a)?new sf(b):b;c.push(b);this.$.set(a.m(),b)},this)},this);return w()};Df.prototype.get=function(a){return this.$.get(a)||null};
Df.prototype.set=function(a,b){var c=this.gc.get(a)||null;null===c&&(c=[],this.gc.set(a,c));for(var d=null,e=0;e<c.length;e++)if(c[e].getName()==b.getName()){d=e;break}null!==d&&0<c.length?c.splice(d,1,b):c.push(b);this.$.set(b.getName(),b)};function Ef(a){this.fc=[];q(a)&&this.add(a)}Ef.prototype.toString=function(){return this.fc.map(function(a){return a.toString()}).join(",")};Ef.prototype.bb=function(a){return this.fc.some(function(b){return b.contains(a)})};Ef.prototype.Ab=g("fc");
Ef.prototype.add=function(a){if(0!=a.length)if(a=this.fc.concat(a),1==a.length)this.fc=a;else{a.sort(Yc);for(var b=[],c=a[0],d=1;d<a.length;++d)if(Tc(c,a[d])){var e=a[d],f=Vc();if(null!==c.b&&null!==e.b){var h=Uc(c.b,e.b,!0);1!=h?(f.b=c.b,f.ca=0!=h?c.ca:c.ca&&e.ca):(f.b=e.b,f.ca=e.ca)}null!==c.s&&null!==e.s&&(h=Uc(c.s,e.s,!1),-1!=h?(f.s=c.s,f.ma=0!=h?c.ma:c.ma&&e.ma):(f.s=e.s,f.ma=e.ma));c=f}else b.push(c),c=a[d];b.push(c);this.fc=b}};
function Ff(a,b){var c=[];a.Ab().map(function(a){return b.Ab().map(function(b){var c;if(Tc(a,b)){c=Vc();var h=Uc(a.b,b.b,!0),h=0==h?a.ca?a:b:-1!=h?a:b;c.b=h.b;c.ca=h.ca;null===a.s||null===b.s?b=null===a.s?b:a:(h=Uc(a.s,b.s,!1),b=0==h?a.ma?a:b:-1==h?a:b);c.s=b.s;c.ma=b.ma}else c=null;return c})}).forEach(function(a){c=c.concat(a)});return new Ef(c.filter(function(a){return null!==a}))};function If(a,b){var c=[],d=null,e=null;xd(a,function(a){var h=b(a);null==a.getParent()?e=h:L(d,h);var k=a.getParent();null!==k&&K(k).length==K(d).length&&(k=c.indexOf(d),-1!=k&&c.splice(k,1));1<K(a).length&&c.push(h);d=null===a.g?c[c.length-1]:h});return e}function Jf(a){return Kf(a,function(a){return null===a.g})}
function Lf(a){var b=a.getParent(),c=0;null!==b&&(c=K(b).indexOf(a),b.removeChild(a));var d=K(a).slice();d.forEach(function(d,f){a.removeChild(d);null===b||ud(b,d,c+f)});return{parent:b,children:d}}function Mf(a,b){K(a).slice().forEach(function(c){a.removeChild(c);L(b,c)});L(a,b)}function Nf(a){var b=td(a,0);Lf(a);Mf(b,a);return b}
function Of(a,b,c){var d=td(a,0),e=K(d).slice();if(!e.some(function(a){return b(a)}))return a;Lf(a);e.forEach(function(e,h){if(b(e)){var k=c(a);vd(d,h);L(k,e);ud(d,k,h)}});return d}function Pf(a,b,c,d){var e=a.getParent();null!==e&&(a=K(e).indexOf(a),vd(e,a),ud(e,c,a));K(b).slice().forEach(function(a){b.removeChild(a);L(d,a)});return c}function Kf(a,b,c){function d(a){b(a)&&e.push(a);null!=c&&c(a)||K(a).forEach(d)}var e=[];d(a);return e}
function Qf(a,b){var c=b||function(a){return a.toString()+"\n"},d="";xd(a,function(a){for(var b=0;b<sd(a);b++)d+="-";d+=c(a)});return d};function Rf(a){yd.call(this);this.Pb=a;this.Xa=!1}t(Rf,yd);m=Rf.prototype;m.Hb=function(){return If(this,function(a){if(a instanceof Rf){var b=new Rf(a.Pb);b.Xa=a.Xa;a=a.U();b.oa=a;return b}return a.Hb()})};m.cb=function(a){var b=a||[];xd(this,function(a){a!=this&&a.cb(b)}.bind(this));a=B(b);return cc(a)};m.qd=function(a){this.Xa!=a&&(this.Xa=a,this.Pb="and"==this.Pb?"or":"and",K(this).forEach(function(b){return b.qd(a)}))};
m.eval=function(a){var b=K(this).map(function(b){return b.eval(a)});return Sf(this,b)};function Sf(a,b){return"and"==a.Pb?dd(b):ed(b)}m.toString=function(){return"combined_pred_"+this.Pb.toString()};function Tf(){this.W=z();this.size=0}m=Tf.prototype;m.has=function(a){return this.W.has(a)};m.set=function(a,b){var c=this.W.get(a)||null;null===c&&(c=B(),this.W.set(a,c));c.has(b)||(c.add(b),this.size++);return this};m.rd=function(a,b){var c=this.W.get(a)||null;null===c&&(c=B(),this.W.set(a,c));b.forEach(function(a){c.has(a)||(c.add(a),this.size++)},this);return this};
m.delete=function(a,b){var c=this.W.get(a,null);if(null===c)return!1;var d=c.delete(b);d&&(--this.size,0==c.size&&this.W.delete(a));return d};m.get=function(a){a=this.W.get(a)||null;return null===a?null:cc(a)};m.clear=function(){this.W.clear();this.size=0};m.keys=function(){return Gb(this.W)};m.values=function(){var a=[];this.W.forEach(function(b){a.push.apply(a,cc(b))});return a};function Uf(a,b,c){yd.call(this);this.fa=a;this.ka=b;this.F=c;this.Td=null;a=kd.vc();this.qc=qd(a,this.fa.H(),this.F);this.Sf=a.He.get(this.fa.H())||null}t(Uf,yd);m=Uf.prototype;m.Hb=function(){var a=new Uf(this.fa,this.ka,this.F),b=this.U();a.oa=b;return a};m.cb=function(a){return null!=a?(a.push(this.fa),a.push(this.ka),a):[this.fa,this.ka]};
m.reverse=function(){var a=this.F;switch(this.F){case "gt":a="lt";break;case "lt":a="gt";break;case "gte":a="lte";break;case "lte":a="gte"}return new Uf(this.ka,this.fa,a)};m.eval=function(a){var b=a.entries.filter(function(a){var b=G(a,this.fa);a=G(a,this.ka);return this.qc(b,a)},this);return new D(b,F(a))};m.toString=function(){return"join_pred("+this.fa.m()+" "+this.F+" "+this.ka.m()+")"};
function Vf(a,b,c){var d=null,e=null;-1!=F(b).indexOf(H(a.fa.G()))?(d=b,e=c):(d=c,e=b);if(d.entries.length>e.entries.length){a:{b=a.fa;a.fa=a.ka;a.ka=b;b=a.F;switch(a.F){case "gt":b="lt";break;case "lt":b="gt";break;case "gte":b="lte";break;case "lte":b="gte";break;default:break a}a.F=b;a.qc=qd(kd.vc(),a.fa.H(),a.F)}return[e,d]}return[d,e]}function Wf(a){var b={};a.cb().forEach(function(a){b[a.getName()]=null});return b}
function Xf(a,b,c){null===a.Td&&(a.Td=Wf(a.ka.G()));var d=new gd(new y(-1,a.Td),!1);return jd(b,c,d,[H(a.ka.G())])}
function Yf(a,b,c,d){var e=[b,c];d||(e=Vf(a,b,c));b=e[0];c=e[1];var e=b,f=c,h=a.fa,k=a.ka;d&&(e=c,f=b,h=a.ka,k=a.fa);var p=new Tf,E=[];e.entries.forEach(function(a){var b=String(G(a,h));p.set(b,a)});var ea=F(e),ka=F(f);f.entries.forEach(function(a){var b=G(a,k),c=String(b);null!==b&&p.has(c)?p.get(c).forEach(function(b){b=jd(a,ka,b,ea);E.push(b)}):d&&E.push(Xf(this,a,ka))}.bind(a));a=F(b).concat(F(c));return new D(E,a)}
function Zf(a,b,c,d,e){function f(a,b){var c=new gd(b,1<ea.length),c=jd(a,ka,c,ea);E.push(c)}var h=d.Kf.G(),k=b,p=c;-1!=F(b).indexOf(H(h))&&(k=c,p=b);var E=[],ea=F(p),ka=F(k);k.entries.forEach(function(a){var b=this.Sf(G(a,d.Yf)),b=d.index.get(b);0!=b.length&&(d.index.Fa()?f(a,e.get(b[0])):He(e,b).forEach(f.bind(null,a)))},a);a=F(k).concat(F(p));return new D(E,a)};function $f(a,b,c){return null===b?new Ad(a,b,c):q(b.m)?new Uf(a,b,c):new Ad(a,b,c)};var ag={};r("lf.schema.DataStoreType",ag);ag.INDEXED_DB=0;ag.MEMORY=1;ag.LOCAL_STORAGE=2;ag.FIREBASE=3;ag.WEB_SQL=4;ag.OBSERVABLE_STORE=5;function bg(a,b,c,d){this.Mc=a;this.name=b;this.Ac=c;this.f=d}bg.prototype.m=function(){return this.Mc+"."+this.name};function Cf(a){return a.f.some(function(a){return a.ga.zc()})}function Q(a,b,c,d){this.w=a;this.ia=c;this.J=b;this.ld=d;this.$a=null}r("lf.schema.Table",Q);Q.prototype.getName=g("w");Q.prototype.getName=Q.prototype.getName;Q.prototype.Va=g("$a");
function H(a){return a.$a||a.w}Q.prototype.kc=function(a){var b=new this.constructor(this.w);b.$a=a;b.ig=this.ig;return b};Q.prototype.as=Q.prototype.kc;Q.prototype.createRow=Q.prototype.qb;Q.prototype.deserializeRow=Q.prototype.Jb;Q.prototype.Ca=g("ia");Q.prototype.getIndices=Q.prototype.Ca;Q.prototype.cb=g("J");Q.prototype.getColumns=Q.prototype.cb;Q.prototype.getConstraint=Q.prototype.zb;Q.prototype.Db=g("ld");Q.prototype.persistentIndex=Q.prototype.Db;function re(a){return a.w+".#"};function R(a,b){this.child=a;this.Gb=b;this.$a=null}m=R.prototype;m.getName=function(){return this.Gb+"("+this.child.getName()+")"};m.m=function(){return this.Gb+"("+this.child.m()+")"};m.G=function(){return this.child.G()};m.toString=function(){return this.m()};m.H=function(){return this.child.H()};m.Va=g("$a");m.Ca=function(){return[]};m.ua=l(null);m.zc=l(!1);m.kc=function(a){this.$a=a;return this};R.prototype.as=R.prototype.kc;
function cg(a){for(var b=[a];a instanceof R;)b.push(a.child),a=a.child;return b}function dg(a){this.$a=a||null;this.O=new Q("#UnknownTable",[],[],!1)}m=dg.prototype;m.getName=l("*");m.m=function(){return this.getName()};m.toString=function(){return this.m()};m.G=g("O");m.H=l(4);m.Va=g("$a");m.Ca=function(){return[]};m.ua=l(null);m.zc=l(!1);r("lf.fn.avg",function(a){return new R(a,"AVG")});function eg(a){return new R(a||new dg,"COUNT")}r("lf.fn.count",eg);function fg(a){return new R(a,"DISTINCT")}r("lf.fn.distinct",fg);r("lf.fn.max",function(a){return new R(a,"MAX")});r("lf.fn.min",function(a){return new R(a,"MIN")});r("lf.fn.stddev",function(a){return new R(a,"STDDEV")});r("lf.fn.sum",function(a){return new R(a,"SUM")});r("lf.fn.geomean",function(a){return new R(a,"GEOMEAN")});function S(a,b){J.call(this);this.Cf=b}t(S,J);S.prototype.exec=function(a,b){switch(this.Cf){case 1:return gg(this,a,b);case 0:return hg(this,a,b);default:return ig(this,a,b)}};S.prototype.toString=l("dummy_node");S.prototype.Nc=function(){return this.toString()};function ig(a,b,c){return new v(function(a){a(this.da(b,[],c))}.bind(a))}function gg(a,b,c){return td(a,0).exec(b,c).then(function(a){return this.da(b,a,c)}.bind(a))}
function hg(a,b,c){var d=K(a).map(function(a){return a.exec(b,c)});return bb(d).then(function(a){var d=[];a.forEach(function(a){for(var b=0;b<a.length;++b)d.push(a[b])});return this.da(b,d,c)}.bind(a))};function jg(a){S.call(this,0,1);this.oe=a}t(jg,S);jg.prototype.toString=function(){return"aggregation("+this.oe.map(function(a){return a.m()}).toString()+")"};jg.prototype.da=function(a,b){b.forEach(function(a){kg(new lg(a,this.oe))},this);return b};function lg(a,b){this.Ga=a;this.J=b}
function kg(a){a.J.forEach(function(a){a=cg(a).reverse();for(var c=1;c<a.length;c++){var d=a[c],e=cg(d).slice(-1)[0],f=d.child instanceof R?ad(this.Ga,d.child):this.Ga;if(null!==f.Ua&&f.Ua.has(d.m()))break;f=mg(d.Gb,f,e);e=this.Ga;null===e.Ua&&(e.Ua=z());e.Ua.set(d.m(),f)}},a)}
function mg(a,b,c){var d=null;switch(a){case "MIN":d=ng(b,c,function(a,b){return b<a?b:a});break;case "MAX":d=ng(b,c,function(a,b){return b>a?b:a});break;case "DISTINCT":d=og(b,c);break;case "COUNT":d=pg(b,c);break;case "SUM":d=qg(b,c);break;case "AVG":a=pg(b,c);0<a&&(d=qg(b,c)/a);break;case "GEOMEAN":d=rg(b,c);break;default:d=sg(b,c)}return d}function ng(a,b,c){return a.entries.reduce(function(a,e){var f=G(e,b);return null===f?a:null===a?f:c(a,f)},null)}
function pg(a,b){return b instanceof dg?a.entries.length:a.entries.reduce(function(a,d){return a+(fa(G(d,b))?0:1)},0)}function qg(a,b){return ng(a,b,function(a,b){return b+a})}function sg(a,b){var c=[];a.entries.forEach(function(a){a=G(a,b);null===a||c.push(a)});return 0==c.length?null:xb.apply(null,c)}function rg(a,b){var c=0,d=a.entries.reduce(function(a,d){var h=G(d,b);if(0==h||null===h)return a;c++;return a+Math.log(h)},0);return 0==c?null:Math.pow(Math.E,d/c)}
function og(a,b){var c=z();a.entries.forEach(function(a){var e=G(a,b);c.set(e,a)});return new D(A(c),F(a))};function tg(a,b){this.ya=a;this.Z=b}tg.prototype.eb=g("ya");tg.prototype.Y=g("Z");function ug(){J.call(this)}t(ug,J);function vg(a,b){J.call(this);this.table=a;this.values=b}t(vg,ug);function wg(a,b){vg.call(this,a,b)}t(wg,vg);function xg(a){J.call(this);this.table=a}t(xg,ug);xg.prototype.toString=function(){return"delete("+this.table.getName()+")"};function yg(a,b){J.call(this);this.table=a;this.ie=b}t(yg,ug);
yg.prototype.toString=function(){var a=[];this.ie&&(a=this.ie.map(function(a){return a.N.getName()},this));return"update("+this.table.getName()+", ["+a.join(",")+"])"};function zg(a){J.call(this);this.I=a}t(zg,ug);zg.prototype.toString=function(){return"select("+this.I.toString()+")"};function Ag(a){J.call(this);this.table=a}t(Ag,ug);Ag.prototype.toString=function(){var a="table_access("+this.table.getName();null===this.table.Va()||(a+=" as "+this.table.Va());return a+")"};
function Bg(){J.call(this)}t(Bg,ug);Bg.prototype.toString=l("cross_product");function Cg(a,b){J.call(this);this.f=a;this.Lb=b}t(Cg,ug);Cg.prototype.toString=function(){var a="project("+this.f.toString();if(null!==this.Lb)var b=this.Lb.map(function(a){return a.m()}).join(", "),a=a+(", groupBy("+b+")");return a+")"};function Dg(a){J.call(this);this.L=a}t(Dg,ug);Dg.prototype.toString=function(){return"order_by("+Jd(this.L)+")"};function Eg(a){J.call(this);this.f=a}t(Eg,ug);
Eg.prototype.toString=function(){return"aggregation("+this.f.toString()+")"};function Fg(a){J.call(this);this.f=a}t(Fg,ug);Fg.prototype.toString=function(){return"group_by("+this.f.toString()+")"};function Gg(a){J.call(this);this.V=a}t(Gg,ug);Gg.prototype.toString=function(){return"limit("+this.V+")"};function Hg(a){J.call(this);this.M=a}t(Hg,ug);Hg.prototype.toString=function(){return"skip("+this.M+")"};function Ig(a,b){J.call(this);this.I=a;this.Nb=b}t(Ig,ug);
Ig.prototype.toString=function(){return"join(type: "+(this.Nb?"outer":"inner")+", "+this.I.toString()+")"};function Jg(){};function Kg(){}t(Kg,Jg);Kg.prototype.jb=function(a){this.X=a;this.Ta(this.X);return this.X};Kg.prototype.Ta=function(a){if(a instanceof zg){var b=Lg(this,a.I),b=Mg(this,b);Pf(a,a,b[0],b[1]);a==this.X&&(this.X=b[0]);a=b[0]}K(a).forEach(function(a){this.Ta(a)},this)};function Lg(a,b){if(0==K(b).length||"and"!=b.Pb)return[b];var c=K(b).slice().map(function(a){b.removeChild(a);return Lg(this,a)},a);return Ca(c)}
function Mg(a,b){var c=null,d=null;b.map(function(a,b){var h=new zg(a);0==b?c=h:L(d,h);d=h},a);return[c,d]};function Ng(){}t(Ng,Jg);Ng.prototype.jb=function(a,b){if(3>b.b.length)return a;this.X=a;this.Ta(this.X);return this.X};Ng.prototype.Ta=function(a){if(a instanceof Bg)for(;2<K(a).length;){for(var b=new Bg,c=0;2>c;c++){var d=vd(a,0);L(b,d)}ud(a,b,0)}K(a).forEach(function(a){this.Ta(a)},this)};function Og(){S.call(this,0,0)}t(Og,S);Og.prototype.toString=l("cross_product");Og.prototype.da=function(a,b){for(var c=b[0],d=b[1],e=[],f=F(c),h=F(d),k=0;k<c.entries.length;k++)for(var p=0;p<d.entries.length;p++){var E=jd(c.entries[k],f,d.entries[p],h);e.push(E)}c=F(c).concat(F(d));return[new D(e,c)]};function Pg(a,b){Md.call(this,a,b);this.za=a.i(Ub);this.Cb=a.i(Vb)}t(Pg,Md);Pg.prototype.getPriority=l(2);Pg.prototype.Wd=function(a){0==this.H()?Qg(this,a):this.Kc()};function Qg(a,b){a.nd.forEach(function(a,d){a instanceof Id&&Pd(this.Cb,a,b[d])},a)}Pg.prototype.Kc=function(){var a=Rd(this.Cb,this.Y());0!=a.length&&(a=new Od(this.global,a),Sd(this.za,a))};function Rg(a){Dd.call(this,a)}t(Rg,Dd);Rg.prototype.Y=function(){var a=B();a.add(this.b);var b=this.ga.info();Sg(this.b.getName(),b.g).forEach(a.add.bind(a));return a};Rg.prototype.clone=function(){var a=new Rg(this.ga);Gd(a,this);a.b=this.b;return a};Rg.prototype.bind=function(a){Rg.Fb.bind.call(this,a);Hd(this,a);return this};function Tg(a){Dd.call(this,a)}t(Tg,Dd);Tg.prototype.Y=function(){var a=B();a.add(this.Ea);var b=this.ga.info();Sg(this.Ea.getName(),b.Pe).forEach(a.add.bind(a));this.Xb&&Sg(this.Ea.getName(),b.g).forEach(a.add.bind(a));return a};Tg.prototype.clone=function(){var a=new Tg(this.ga);Gd(a,this);a.Ea=this.Ea;this.values&&(a.values=this.values instanceof I?this.values:this.values.slice());a.Xb=this.Xb;a.Yb=this.Yb;return a};
Tg.prototype.bind=function(a){Tg.Fb.bind.call(this,a);this.Yb&&(this.values=this.Yb instanceof I?a[this.Yb.ua()]:this.Yb.map(function(b){return b instanceof I?a[b.ua()]:b}));return this};function Ug(a){Dd.call(this,a)}t(Ug,Dd);Ug.prototype.Y=function(){var a=B();a.add(this.table);var b=this.set.map(function(a){return a.N.m()}),c=this.ga.info();Vg(c,b).forEach(a.add.bind(a));Wg(c,b).forEach(a.add.bind(a));return a};Ug.prototype.clone=function(){var a=new Ug(this.ga);Gd(a,this);a.table=this.table;a.set=this.set?this.set.slice():this.set;return a};Ug.prototype.bind=function(a){Ug.Fb.bind.call(this,a);this.set.forEach(function(b){-1!=b.Sc&&(b.value=a[b.Sc])});Hd(this,a);return this};function Xg(a,b){if(null==b)return"NULL";switch(a){case 1:return b?1:0;case 3:case 4:return b;case 0:return"'"+qb(b)+"'";default:return"'"+b.toString()+"'"}}function Yg(a,b){var c=a.Xb?"INSERT OR REPLACE":"INSERT",d=a.Ea.cb(),c=c+(" INTO "+a.Ea.getName()+"("),c=c+d.map(function(a){return a.getName()}).join(", "),c=c+") VALUES (";return a.values.map(function(a){var f=d.map(function(c){var d=a.o[c.getName()];return b?null!=d?"#":"NULL":Xg(c.H(),d)});return c+f.join(", ")+");"}).join("\n")}
function Zg(a){switch(a){case "between":return"BETWEEN";case "eq":return"=";case "gte":return">=";case "gt":return">";case "in":return"IN";case "lte":return"<=";case "lt":return"<";case "match":return"LIKE";case "neq":return"<>";default:return"UNKNOWN"}}function $g(a,b,c,d){return a instanceof I?"?"+a.ua().toString():d?null!=a?"#":"NULL":"match"==b?"'"+a.toString()+"'":"in"==b?"("+a.map(function(a){return Xg(c,a)}).join(", ")+")":"between"==b?Xg(c,a[0])+" AND "+Xg(c,a[1]):Xg(c,a).toString()}
function ah(a,b){return K(a).map(function(a){return"("+bh(a,b)+")"}).join("and"==a.Pb?" AND ":" OR ")}function ch(a){return[a.fa.m(),Zg(a.F),a.ka.m()].join(" ")}function bh(a,b){if(a instanceof Ad){var c=a.N.m(),d=Zg(a.F),e=$g(a.value,a.F,a.N.H(),b);return"="==d&&"NULL"==e?[c,"IS NULL"].join(" "):"<>"==d&&"NULL"==e?[c,"IS NOT NULL"].join(" "):[c,d,e].join(" ")}if(a instanceof Rf)return ah(a,b);if(a instanceof Uf)return ch(a);throw new C(357,typeof a);}
function dh(a,b){var c=bh(a,b);return c?" WHERE "+c:""}function eh(a,b){var c="UPDATE "+a.table.getName()+" SET ",c=c+a.set.map(function(a){var b=a.N.m()+" = ";return-1!=a.Sc?b+"?"+a.Sc.toString():b+Xg(a.N.H(),a.value).toString()}).join(", ");a.u&&(c+=dh(a.u,b));return c+";"}
function fh(a,b){var c="*";a.f.length&&(c=a.f.map(function(a){return a.Va()?a.m()+" AS "+a.Va():a.m()}).join(", "));c="SELECT "+c+" FROM ";null!=a.vb&&0!=a.vb.size?c+=gh(a,b):(c+=a.b.map(hh).join(", "),a.u&&(c+=dh(a.u,b)));if(a.L)var d=a.L.map(function(a){return a.N.m()+(0==a.hb?" DESC":" ASC")}).join(", "),c=c+(" ORDER BY "+d);a.ha&&(d=a.ha.map(function(a){return a.m()}).join(", "),c+=" GROUP BY "+d);a.V&&(c+=" LIMIT "+a.V.toString());a.M&&(c+=" SKIP "+a.M.toString());return c+";"}
function hh(a){return H(a)!=a.getName()?a.getName()+" AS "+H(a):a.getName()}function gh(a,b){for(var c=Kf(a.u,function(a){return a instanceof Uf}),d=c.map(ch),e=hh(a.b[0]),f=1;f<a.b.length;f++)var h=hh(a.b[f]),e=a.vb.has(c[d.length-f].U())?e+(" LEFT OUTER JOIN "+h):e+(" INNER JOIN "+h),e=e+(" ON ("+d[d.length-f]+")");c=td(a.u,0);c instanceof Uf||(e+=" WHERE "+bh(c,b));return e}
function ih(a,b){var c=b||!1,d=a.a.clone();if(d instanceof Tg)return Yg(d,c);if(d instanceof Rg){var e="DELETE FROM "+d.b.getName();d.u&&(e+=dh(d.u,c));return e+";"}if(d instanceof Ug)return eh(d,c);if(d instanceof Id)return fh(d,c);throw new C(358,typeof d);};function T(a,b){this.global=a;this.hg=a.i(Tb);this.za=a.i(Ub);this.a=b}r("lf.query.BaseBuilder",T);T.prototype.exec=function(){try{this.ab()}catch(a){return Za(a)}return new v(function(a,c){var d=new Pg(this.global,[this.xc()]);Sd(this.za,d).then(function(c){a(Zc(c[0]))},c)},this)};T.prototype.exec=T.prototype.exec;T.prototype.Ef=function(){var a=function(a){return a.Nc(this.a)+"\n"}.bind(this);return Qf(jh(this).eb(),a)};T.prototype.explain=T.prototype.Ef;
T.prototype.bind=function(a){this.a.bind(a);return this};T.prototype.bind=T.prototype.bind;T.prototype.og=function(a){return ih(this,a)};T.prototype.toSql=T.prototype.og;T.prototype.ab=aa();function jh(a){if(null==a.Qe){var b;b=a.hg;var c=a.a,d=b.Vf.create(c);b=b.eg.create(d,c);a.Qe=b}return a.Qe}T.prototype.xc=function(){return{context:this.a.clone(),Zd:jh(this)}};function kh(a){T.call(this,a,new Rg(a.i(Wb)))}t(kh,T);r("lf.query.DeleteBuilder",kh);kh.prototype.b=function(a){if(null!=this.a.b)throw new C(515);this.a.b=a;return this};kh.prototype.from=kh.prototype.b;kh.prototype.u=function(a){this.yd();this.a.u=a;return this};kh.prototype.where=kh.prototype.u;kh.prototype.yd=function(){if(null==this.a.b)throw new C(548);if(null!=this.a.u)throw new C(516);};kh.prototype.ab=function(){kh.Fb.ab.call(this);if(null==this.a.b)throw new C(517);};function lh(a,b){T.call(this,a,new Tg(a.i(Wb)));this.a.Xb=b||!1}t(lh,T);r("lf.query.InsertBuilder",lh);lh.prototype.ab=function(){lh.Fb.ab.call(this);var a=this.a;if(null==a.Ea||null==a.values)throw new C(518);if(a.Xb&&null===a.Ea.zb().bd())throw new C(519);};lh.prototype.Ea=function(a){if(null!=this.a.Ea)throw new C(520);this.a.Ea=a;return this};lh.prototype.into=lh.prototype.Ea;
lh.prototype.values=function(a){if(null!=this.a.values)throw new C(521);a instanceof I||a.some(function(a){return a instanceof I})?this.a.Yb=a:this.a.values=a;return this};lh.prototype.values=lh.prototype.values;function mh(a){return nh("and",Array.prototype.slice.call(arguments))}r("lf.op.and",mh);r("lf.op.or",function(a){return nh("or",Array.prototype.slice.call(arguments))});function nh(a,b){var c=new Rf(a);b.forEach(function(a){L(c,a)});return c}r("lf.op.not",function(a){a.qd(!0);return a});function U(a,b){T.call(this,a,new Id(a.i(Wb)));this.xe=this.td=!1;this.a.f=b;oh(this);ph(this)}t(U,T);r("lf.query.SelectBuilder",U);U.prototype.ab=function(){U.Fb.ab.call(this);var a=this.a;if(null==a.b)throw new C(522);if(q(a.Ob)&&!q(a.V)||q(a.Ub)&&!q(a.M))throw new C(523);null!=this.a.ha?qh(this):rh(this)};function oh(a){var b=a.a.f.filter(function(a){return a instanceof R&&"DISTINCT"==a.Gb},a);if(0!=b.length&&(1!=b.length||1!=a.a.f.length))throw new C(524);}
function qh(a){var b=a.a.f.filter(function(a){return!(a instanceof R)}).map(function(a){return a.m()}),c=!1;if(0==a.a.ha.length||0==a.a.f.length)c=!0;else{var d=a.a.ha.map(function(a){return a.m()});(c=b.some(function(a){return-1==d.indexOf(a)}))||(c=a.a.ha.some(function(a){a=a.H();return 6==a||0==a}))}if(c)throw new C(525);}function rh(a){var b=a.a.f.some(function(a){return a instanceof R},a);a=a.a.f.some(function(a){return!(a instanceof R)},a)||0==a.a.f.length;if(b&&a)throw new C(526);}
function ph(a){a.a.f.forEach(function(a){if(a instanceof R&&!sh(a.Gb,a.H()))throw new C(527,a.m());},a)}function th(a,b){if(null==a.a.b)throw new C(b);}U.prototype.b=function(a){if(this.xe)throw new C(515);this.xe=!0;null==this.a.b&&(this.a.b=[]);this.a.b.push.apply(this.a.b,Array.prototype.slice.call(arguments));return this};U.prototype.from=U.prototype.b;U.prototype.u=function(a){th(this,548);if(this.td)throw new C(516);this.td=!0;uh(this,a);return this};U.prototype.where=U.prototype.u;
function uh(a,b){if(null!=a.a.u){var c=mh(b,a.a.u);a.a.u=c}else a.a.u=b}U.prototype.Nf=function(a,b){th(this,542);if(this.td)throw new C(547);this.a.b.push(a);uh(this,b);return this};U.prototype.innerJoin=U.prototype.Nf;U.prototype.Tf=function(a,b){th(this,542);if(!(b instanceof Uf))throw new C(541);if(this.td)throw new C(547);this.a.b.push(a);null==this.a.vb&&(this.a.vb=B());var c=b;H(a)!=H(b.ka.G())&&(c=b.reverse());this.a.vb.add(c.U());uh(this,c);return this};U.prototype.leftOuterJoin=U.prototype.Tf;
U.prototype.V=function(a){if(null!=(this.a.V||this.a.Ob))throw new C(528);if(a instanceof I)this.a.Ob=a;else{if(0>a)throw new C(531);this.a.V=a}return this};U.prototype.limit=U.prototype.V;U.prototype.M=function(a){if(null!=(this.a.M||this.a.Ub))throw new C(529);if(a instanceof I)this.a.Ub=a;else{if(0>a)throw new C(531);this.a.M=a}return this};U.prototype.skip=U.prototype.M;U.prototype.L=function(a,b){th(this,549);null==this.a.L&&(this.a.L=[]);this.a.L.push({N:a,hb:null!=b?b:1});return this};
U.prototype.orderBy=U.prototype.L;U.prototype.ha=function(a){th(this,549);if(null!=this.a.ha)throw new C(530);null==this.a.ha&&(this.a.ha=[]);this.a.ha.push.apply(this.a.ha,Array.prototype.slice.call(arguments));return this};U.prototype.groupBy=U.prototype.ha;function sh(a,b){switch(a){case "COUNT":case "DISTINCT":return!0;case "AVG":case "GEOMEAN":case "STDDEV":case "SUM":return 4==b||3==b;case "MAX":case "MIN":return 4==b||3==b||5==b||2==b}return!1}
U.prototype.clone=function(){var a=new U(this.global,this.a.f);a.a=this.a.clone();a.a.Wc=null;return a};U.prototype.clone=U.prototype.clone;function vh(a,b){T.call(this,a,new Ug(a.i(Wb)));this.a.table=b}t(vh,T);r("lf.query.UpdateBuilder",vh);vh.prototype.set=function(a,b){var c={Sc:b instanceof I?b.ua():-1,N:a,value:b};null!=this.a.set?this.a.set.push(c):this.a.set=[c];return this};vh.prototype.set=vh.prototype.set;vh.prototype.u=function(a){this.yd();this.a.u=a;return this};vh.prototype.where=vh.prototype.u;vh.prototype.yd=function(){if(null!=this.a.u)throw new C(516);};
vh.prototype.ab=function(){vh.Fb.ab.call(this);if(null==this.a.set)throw new C(532);if(this.a.set.some(function(a){return a.value instanceof I}))throw new C(501);};function wh(a){this.a=a;this.ya=null}wh.prototype.dc=function(){null===this.ya&&(this.ya=this.$c());return this.ya};function xh(a){wh.call(this,a)}t(xh,wh);xh.prototype.$c=function(){return this.a.Xb?new wg(this.a.Ea,this.a.values):new vg(this.a.Ea,this.a.values)};function yh(a){wh.call(this,a)}t(yh,wh);yh.prototype.$c=function(){var a=new yg(this.a.table,this.a.set),b=null!=this.a.u?new zg(this.a.u.Hb()):null,c=new Ag(this.a.table);null===b?L(a,c):(L(b,c),L(a,b));return a};function zh(a,b,c){this.ya=a;this.$d=b;this.Sb=c}zh.prototype.dc=function(){this.Sb.forEach(function(a){this.ya=a.jb(this.ya,this.$d)},this);return this.ya};function Ah(a,b){wh.call(this,a);this.Sb=b}t(Ah,wh);Ah.prototype.$c=function(){var a=new xg(this.a.b),b=null!=this.a.u?new zg(this.a.u.Hb()):null,c=new Ag(this.a.b);null===b?L(a,c):(L(b,c),L(a,b));return(new zh(a,this.a,this.Sb)).dc()};function Bh(){}t(Bh,Jg);Bh.prototype.jb=function(a,b){if(2>b.b.length)return a;this.X=a;this.Ta(this.X,b);return this.X};Bh.prototype.Ta=function(a,b){if(a instanceof zg&&a.I instanceof Uf){var c=a.I.U(),d=td(a,0);d instanceof Bg&&(c=null!=b.vb&&b.vb.has(c),c=new Ig(a.I,c),Pf(a,d,c,c),a==this.X&&(this.X=c),a=c)}K(a).forEach(function(a){this.Ta(a,b)},this)};function Ch(){this.Rc=B()}t(Ch,Jg);Ch.prototype.jb=function(a,b){this.Rc.clear();if(!q(b.u))return a;this.X=a;this.Ta(this.X);this.Rc.clear();return this.X};Ch.prototype.Ta=function(a){if(Dh(a)){var b=a.I instanceof Ad?Eh(this,a):Fh(this,a);this.Rc.add(a);b==a&&(b=td(a,0));null!==b&&(fa(b.getParent())&&(this.X=b),Dh(b)&&!this.Rc.has(b)&&this.Ta(b))}else K(a).forEach(function(a){this.Ta(a)},this)};
function Gh(a,b,c){var d=b;if(td(b,0)instanceof zg)d=Nf(b),Gh(a,b,c);else if(Hh(b)){var e=[],d=Of(b,c,function(a){a=new zg(a.I);e.push(a);return a});e.forEach(function(a){Gh(this,a,c)},a)}return d}function Eh(a,b){var c=B([H(b.I.N.G())]),d=function(a){return Ih(this,a,c)}.bind(a);return Gh(a,b,d)}function Fh(a,b){var c=B([H(b.I.fa.G()),H(b.I.ka.G())]),d=function(a){return Ih(this,a,c)}.bind(a);return Gh(a,b,d)}
function Ih(a,b,c){var d=B();Jf(b).forEach(function(a){d.add(H(a.table))},a);b instanceof Ag&&d.add(H(b.table));return dc(d,c)}function Dh(a){return a instanceof zg&&!(a.I instanceof Rf)}function Hh(a){a=td(a,0);return a instanceof Bg||a instanceof Ig};function Jh(a,b){wh.call(this,a);this.Sb=b;this.Ue=this.Le=this.af=this.Oe=this.pe=this.Ae=this.$e=this.ue=this.cf=null}t(Jh,wh);
Jh.prototype.$c=function(){Kh(this);2<=this.a.b.length&&(this.ue=new Bg);this.$e=null!=this.a.u?new zg(this.a.u.Hb()):null;this.a.L&&(this.Oe=new Dg(this.a.L));null!=this.a.M&&0<this.a.M&&(this.af=new Hg(this.a.M));null!=this.a.V&&(this.Le=new Gg(this.a.V));null!=this.a.ha&&(this.Ae=new Fg(this.a.ha));Lh(this);this.Ue=new Cg(this.a.f||[],this.a.ha||null);var a=Mh(this);return(new zh(a,this.a,this.Sb)).dc()};
function Mh(a){for(var b=[a.Le,a.af,a.Ue,a.Oe,a.pe,a.Ae,a.$e,a.ue],c=null,d=null,e=0;e<b.length;e++){var f=b[e];null!==f&&(null===d?d=f:L(b[c],f),c=e)}a.cf.forEach(function(a){L(b[c],a)});return d}function Kh(a){a.cf=a.a.b.map(function(a){return new Ag(a)},a)}function Lh(a){var b=a.a.f.filter(function(a){return a instanceof R});null!=a.a.L&&a.a.L.forEach(function(a){a.N instanceof R&&b.push(a.N)});0<b.length&&(a.pe=new Eg(b))};function Nh(){this.ee=[new Kg,new Ng,new Ch,new Bh];this.Ed=[new Kg]}Nh.prototype.create=function(a){var b=null;if(a instanceof Tg)b=new xh(a);else if(a instanceof Rg)b=new Ah(a,this.Ed);else if(a instanceof Id)b=new Jh(a,this.ee);else if(a instanceof Ug)b=new yh(a);else throw new C(513);b=b.dc();return new tg(b,a.Y())};function Oh(a){S.call(this,0,1);this.O=a}t(Oh,S);Oh.prototype.toString=function(){return"delete("+this.O.getName()+")"};Oh.prototype.da=function(a,b){var c=b[0].entries.map(function(a){return a.sa});a.remove(this.O,c);return[cd()]};function Ph(a,b){S.call(this,0,-1);this.table=b;this.C=a.i(Rb)}t(Ph,S);Ph.prototype.toString=function(){return"get_row_count("+this.table.getName()+")"};Ph.prototype.da=function(){var a=this.C.get(re(this.table)),b=new D([],[this.table.getName()]),c=eg(),a=a.Ka().na;null===b.Ua&&(b.Ua=z());b.Ua.set(c.m(),a);return[b]};function Qh(a,b){S.call(this,0,-1);this.ba=a.i(Qb);this.C=a.i(Rb);this.table=b}t(Qh,S);Qh.prototype.toString=function(){var a="table_access("+this.table.getName();null===this.table.Va()||(a+=" as "+this.table.Va());return a+")"};Qh.prototype.da=function(){var a=this.C.get(re(this.table)).Wa();return[fd(He(this.ba,a),[H(this.table)])]};function Rh(a){this.h=a}t(Rh,Jg);Rh.prototype.jb=function(a,b){this.X=a;if(!this.zd(b))return a;var c=Kf(a,function(a){return a instanceof Qh})[0],d=new Ph(this.h,c.table);Pf(c,c,d,d);return this.X};Rh.prototype.zd=function(a){return 1==a.f.length&&1==a.b.length&&null==a.u&&null==a.V&&null==a.M&&null==a.ha?(a=a.f[0],a instanceof R&&"COUNT"==a.Gb&&a.child instanceof dg):!1};function Sh(a){S.call(this,0,1);this.ze=a}t(Sh,S);Sh.prototype.toString=function(){return"groupBy("+this.ze.map(function(a){return a.m()}).toString()+")"};Sh.prototype.da=function(a,b){return Th(this,b[0])};function Th(a,b){var c=new Tf,d=function(a){return this.ze.map(function(b){return G(a,b)},this).join(",")}.bind(a);b.entries.forEach(function(a){c.set(d(a),a)},a);return c.keys().map(function(a){return new D(c.get(a),F(b))},a)};function Uh(a,b,c){S.call(this,0,0);this.C=a.i(Rb);this.ba=a.i(Qb);this.I=b;this.Nb=c;this.wd="eq"==this.I.F?0:2;this.Be=null}t(Uh,S);var Vh=["hash","index_nested_loop","nested_loop"];Uh.prototype.toString=function(){return"join(type: "+(this.Nb?"outer":"inner")+", impl: "+Vh[this.wd]+", "+this.I.toString()+")"};
Uh.prototype.da=function(a,b){switch(this.wd){case 0:return[Yf(this.I,b[0],b[1],this.Nb)];case 1:return[Zf(this.I,b[0],b[1],this.Be,this.ba)];default:var c=this.I,d=b[0],e=b[1],f=this.Nb,h=[d,e];f||(h=Vf(c,d,e));for(var d=h[0],e=h[1],h=[],k=F(d),p=F(e),E=d.entries.length,ea=e.entries.length,ka=ea+256-1>>8,Va=0;Va<ka;){for(var Sb=0;Sb<E;Sb++){var Gf=!1,Hf=G(d.entries[Sb],c.fa);if(null!==Hf)for(var Wh=Math.min(Va+1<<8,ea),Ic=Va<<8;Ic<Wh;Ic++)if(c.qc(Hf,G(e.entries[Ic],c.ka))){var Gf=!0,Xi=jd(d.entries[Sb],
k,e.entries[Ic],p);h.push(Xi)}f&&!Gf&&h.push(Xf(c,d.entries[Sb],k))}Va++}c=F(d).concat(F(e));return[new D(h,c)]}};function Xh(a,b){a.wd=1;var c=a.C.get(b.ua().m());a.Be={Kf:b,Yf:b==a.I.fa?a.I.ka:a.I.fa,index:c}};function Yh(a){S.call(this,0,-1);this.We=a}t(Yh,S);Yh.prototype.toString=function(){return"no_op_step("+F(this.We[0]).join(",")+")"};Yh.prototype.da=g("We");function Zh(){}t(Zh,Jg);Zh.prototype.jb=function(a,b){this.X=a;if(!this.zd(b))return a;Kf(a,function(a){return a instanceof Uh}).forEach(this.gg,this);return this.X};Zh.prototype.zd=function(a){return 1<a.b.length};
Zh.prototype.gg=function(a){if("eq"==a.I.F&&!a.Nb){var b=function(b){if(!(b instanceof Qh))return null;b=H(b.table)==H(a.I.ka.G())?a.I.ka:a.I.fa;return fa(b.ua())?null:b},c=b(td(a,0)),b=b(td(a,1));if(null!==c||null!==b){b=null===b?c:b;Xh(a,b);var d=new D([],[H(b.G())]);wd(a,new Yh([d]),b==c?0:1)}}};function $h(a){a=a.map(function(a){return a.Ab()});a=Cb.apply(null,a);var b=[];Bb(a,function(a){b.push(a)});return b}function ai(a){this.Mb=a}ai.prototype.ad=function(){return 1==this.Mb.f.length?[Vc()]:[this.Mb.f.map(function(){return Vc()})]};function bi(a,b){this.Mb=a;this.xa=b;this.Cd=this.Je=null}
function ci(a,b){var c=z();a.xa.keys().forEach(function(a){var e=this.xa.get(a).map(function(a){return Ed(b,a)},this),f=new Ef([Vc()]);e.forEach(function(a){var b=null;"between"==a.F?b=new Rc(a.value[0],a.value[1],!1,!1):"eq"==a.F?(b=a.value,b=new Rc(b,b,!1,!1)):b="gte"==a.F?new Rc(a.value,null,!1,!1):"gt"==a.F?new Rc(a.value,null,!0,!1):"lte"==a.F?new Rc(null,a.value,!1,!1):new Rc(null,a.value,!1,!0);a=a.Xa?Sc(b):[b];a=new Ef(a);f=Ff(f,a)});c.set(a,f)},a);return c}
bi.prototype.ad=function(a){if(this.Je==a)return this.Cd;for(var b=ci(this,a),c=this.Mb.f.length-1;0<=c;c--){var d=this.Mb.f[c];if(null!==(b.get(d.ga.getName())||null))break;b.set(d.ga.getName(),new Ef([Vc()]))}this.Cd=1==this.Mb.f.length?A(b)[0].Ab():$h(di(this,b));this.Je=a;return this.Cd};function di(a,b){var c=z(),d=0;a.Mb.f.forEach(function(a){c.set(a.ga.getName(),d);d++});return Gb(b).sort(function(a,b){return c.get(a)-c.get(b)}).map(function(a){return b.get(a)})};function ei(a,b){this.df=b;this.C=a.i(Rb)}function fi(a,b,c){c=c.filter(a.Of,a);if(0==c.length)return null;a=gi(a,c);if(0==a.length)return null;if(1==a.length)return a[0];var d=Number.MAX_VALUE;return a.reduce(function(a,c){var h=hi(c,b);return h<d?(d=h,c):a},null)}
function gi(a,b){return a.df.Ca().map(function(a){a=new ii(this.C,a);ji(a,b);return a},a).filter(function(a){if(null===a.xa)a=!1;else{for(var b=!1,e=!0,f=0;f<a.tb.f.length;f++){var h=a.xa.has(a.tb.f[f].ga.getName());if(b&&h){e=!1;break}h||(b=!0)}a=e}return a})}ei.prototype.Of=function(a){var b;if(b=a instanceof Ad)Bd(a),b=null!==a.value&&("between"==a.F||"eq"==a.F||"gt"==a.F||"gte"==a.F||"lt"==a.F||"lte"==a.F);return b?a.N.G()==this.df:!1};
function ii(a,b){this.C=a;this.tb=b;this.Lf=B(this.tb.f.map(function(a){return a.ga.getName()}));this.Qd=this.xa=null}function ki(a){null===a.Qd&&(a.Qd=new bi(a.tb,a.xa));return a.Qd}function ji(a,b){b.forEach(function(a){var b=a.cb()[0].getName();this.Lf.has(b)&&(null===this.xa&&(this.xa=new Tf),this.xa.set(b,a.U()))},a)}function hi(a,b){var c=ki(a).ad(b),d=a.C.get(a.tb.m());return c.reduce(function(a,b){return a+d.Yc(b)},0)};function li(a,b,c,d){S.call(this,0,-1);this.C=a.i(Rb);this.index=b;this.Ie=c;this.ce=d;this.Qc=this.Pc=!1}t(li,S);li.prototype.toString=function(){return"index_range_scan("+this.index.m()+", ?, "+(this.ce?"reverse":"natural")+(this.Pc?", limit:?":"")+(this.Qc?", skip:?":"")+")"};li.prototype.Nc=function(a){var b=this.toString(),c=this.Ie.ad(a),b=b.replace("?",c.toString());this.Pc&&(b=b.replace("?",a.V.toString()));this.Qc&&(b=b.replace("?",a.M.toString()));return b};
li.prototype.da=function(a,b,c){a=this.Ie.ad(c);b=this.C.get(this.index.m());c=(1==a.length&&a[0]instanceof Rc&&Xc(a[0])?Le(b.get(a[0].b),!1,this.Pc?c.V:void 0,this.Qc?c.M:void 0):b.Wa(a,this.ce,this.Pc?c.V:void 0,this.Qc?c.M:void 0)).map(function(a){return new y(a,{})},this);return[fd(c,[this.index.Mc])]};function mi(a){S.call(this,0,1);this.md=a}t(mi,S);mi.prototype.toString=l("select(?)");mi.prototype.Nc=function(a){a=Ed(a,this.md);return this.toString().replace("?",a.toString())};mi.prototype.da=function(a,b,c){return[Ed(c,this.md).eval(b[0])]};function ni(a,b){S.call(this,0,1);this.ba=a.i(Qb);this.O=b}t(ni,S);ni.prototype.toString=function(){return"table_access_by_row_id("+this.O.getName()+")"};ni.prototype.da=function(a,b){return[fd(He(this.ba,$c(b[0])),[H(this.O)])]};function oi(a){this.h=a}t(oi,Jg);oi.prototype.jb=function(a,b){this.X=a;Kf(a,function(a){return a instanceof Qh}).forEach(function(a){var d=pi(a);if(0!=d.length){var e=fi(new ei(this.h,a.table),b,d.map(function(a){return Ed(b,a.md)}));if(null!==e){var f=z();d.forEach(function(a){f.set(a.md,a)},this);this.X=qi(this,e,f,a)}}},this);return this.X};function pi(a){var b=[];for(a=a.getParent();a;)a instanceof mi&&b.push(a),a=a.getParent();return b}
function qi(a,b,c,d){(null===b.xa?[]:b.xa.values()).map(function(a){return c.get(a)}).forEach(Lf);b=new li(a.h,b.tb,ki(b),!1);a=new ni(a.h,d.table);L(a,b);Pf(d,d,a,b);return b.eb()};function ri(a,b){S.call(this,0,-1);this.C=a.i(Rb);this.O=b}t(ri,S);ri.prototype.toString=function(){return"insert("+this.O.getName()+")"};ri.prototype.da=function(a,b,c){si(this.O,c.values,this.C);a.ub(this.O,c.values);return[fd(c.values,[this.O.getName()])]};function si(a,b,c){a=a.zb().bd();if(null===a?0:a.f[0].autoIncrement){var d=a.f[0].ga.getName();c=c.get(a.m()).max();var e=null===c?0:c[0];b.forEach(function(a){if(0==a.o[d]||null==a.o[d])e++,a.o[d]=e})}}
function ti(a,b){S.call(this,0,-1);this.C=a.i(Rb);this.O=b}t(ti,S);ti.prototype.toString=function(){return"insert_replace("+this.O.getName()+")"};ti.prototype.da=function(a,b,c){si(this.O,c.values,this.C);a.Ld(this.O,c.values);return[fd(c.values,[this.O.getName()])]};function ui(){S.call(this,0,1)}t(ui,S);ui.prototype.toString=l("limit(?)");ui.prototype.Nc=function(a){return this.toString().replace("?",a.V.toString())};ui.prototype.da=function(a,b,c){b[0].entries.splice(c.V);return b};function vi(a){S.call(this,0,1);this.L=a}t(vi,S);m=vi.prototype;m.toString=function(){return"order_by("+Jd(this.L)+")"};m.da=function(a,b){if(1==b.length){var c;c=b[0];for(var d=null,e=0;e<this.L.length;e++){var f=fg(this.L[e].N);if(null!==c.Ua&&c.Ua.has(f.m())){d=f;break}}c=d;(null===c?b[0]:ad(b[0],c)).entries.sort(this.Bf.bind(this))}else b.sort(this.jg.bind(this));return b};
m.S=function(a,b){var c=null,d=null,e=null,f=-1;do f++,e=this.L[f].N,c=this.L[f].hb,d=a(e),e=b(e);while(d==e&&f+1<this.L.length);d=d<e?-1:d>e?1:0;return 1==c?d:-d};m.jg=function(a,b){return this.S(function(b){return b instanceof R?ad(a,b):G(a.entries[a.entries.length-1],b)},function(a){return a instanceof R?ad(b,a):G(b.entries[b.entries.length-1],a)})};m.Bf=function(a,b){return this.S(function(b){return G(a,b)},function(a){return G(b,a)})};function wi(a,b){this.Ga=a;this.J=b}function xi(a){return a.J.some(function(a){return a instanceof R},a)?yi(a):zi(a)}function yi(a){if(1==a.J.length&&"DISTINCT"==a.J[0].Gb)return a=ad(a.Ga,a.J[0]).entries.map(function(a){var b=new gd(new y(-1,{}),1<this.Ga.K.size);id(b,this.J[0],G(a,this.J[0].child));return b},a),new D(a,[]);var b=new gd(new y(-1,{}),1<a.Ga.K.size);a.J.forEach(function(a){var d=a instanceof R?ad(this.Ga,a):G(this.Ga.entries[0],a);id(b,a,d)},a);return new D([b],F(a.Ga))}
function zi(a){var b=Array(a.Ga.entries.length),c=1<a.Ga.K.size;a.Ga.entries.forEach(function(a,e){b[e]=new gd(new y(a.sa.id(),{}),c);this.J.forEach(function(c){id(b[e],c,G(a,c))},this)},a);return new D(b,F(a.Ga))}function Ai(a,b){var c=a.map(function(a){return xi(new wi(a,b)).entries[0]});return new D(c,F(a[0]))};function Bi(a,b){S.call(this,0,1);this.f=a;this.Lb=b}t(Bi,S);Bi.prototype.toString=function(){var a="project("+this.f.toString();if(null!==this.Lb)var b=this.Lb.map(function(a){return a.m()}).join(", "),a=a+(", groupBy("+b+")");return a+")"};Bi.prototype.da=function(a,b){var c;0==b.length?c=[cd()]:1==b.length?(c=b[0],c=[0==this.f.length?c:xi(new wi(c,this.f))]):c=[Ai(b,this.f)];return c};function Ci(a){return a.f.some(function(a){return a instanceof R})||null!==a.Lb};function Di(){S.call(this,0,1)}t(Di,S);Di.prototype.toString=l("skip(?)");Di.prototype.Nc=function(a){return this.toString().replace("?",a.M.toString())};Di.prototype.da=function(a,b,c){return[new D(b[0].entries.slice(c.M),F(b[0]))]};function Ei(){}t(Ei,Jg);Ei.prototype.jb=function(a,b){if(!q(b.V)&&!q(b.M))return a;var c=Fi(a);if(null===c)return a;Kf(a,function(a){return a instanceof ui||a instanceof Di}).forEach(function(a){a instanceof ui?c.Pc=!0:c.Qc=!0;Lf(a)},this);return c.eb()};function Fi(a){a=Kf(a,function(a){return a instanceof li},function(a){return a instanceof Bi&&Ci(a)||a instanceof vi||1!=K(a).length||a instanceof mi});return 0<a.length?a[0]:null};function Gi(a){this.h=a}t(Gi,Jg);Gi.prototype.jb=function(a,b){var c=Hi(a,b);if(null===c)return a;var d;a:{var e=c;d=Ii(td(c,0));if(null!==d){var f;f=c.L;for(var h=null,k=d.table.Ca(),p=0;p<k.length&&null===h;p++)h=Ji(k[p],f);f=h;if(null===f){d=e;break a}e=new li(this.h,f.tb,new ai(f.tb),f.Fe);f=new ni(this.h,d.table);L(f,e);Lf(c);e=Pf(d,d,f,e)}d=e}if(d==c)a:if(d=c,e=Ki(td(c,0)),null!==e){f=Ji(e.index,c.L);if(null===f)break a;e.ce=f.Fe;d=Lf(c).parent}return d.eb()};
function Ki(a){a=Kf(a,function(a){return a instanceof li},function(a){return 1!=K(a).length});return 0<a.length?a[0]:null}function Ii(a){a=Kf(a,function(a){return a instanceof Qh},function(a){return 1!=K(a).length});return 0<a.length?a[0]:null}function Hi(a,b){return q(b.L)?Kf(a,function(a){return a instanceof vi})[0]:null}function Ji(a,b){if(a.f.length!=b.length||!b.every(function(b,c){return b.N.getName()==a.f[c].ga.getName()}))return null;var c=Li(b,a);return c[0]||c[1]?{tb:a,Fe:c[1]}:null}
function Li(a,b){var c=a.reduce(function(a,b){return a<<1|(0==b.hb?0:1)},0),d=b.f.reduce(function(a,b){return a<<1|(0==b.hb?0:1)},0),d=c^d,c=0==d,d=d==Math.pow(2,Math.max(a.length,b.f.length))-1;return[c,d]};function Mi(a,b,c){this.ya=a;this.$d=b;this.Sb=c}Mi.prototype.dc=function(){this.Sb.forEach(function(a){this.ya=a.jb(this.ya,this.$d)},this);return this.ya};function Ni(a,b){S.call(this,0,1);this.O=a;this.rg=b}t(Ni,S);Ni.prototype.toString=function(){return"update("+this.O.getName()+")"};Ni.prototype.da=function(a,b){var c=b[0].entries.map(function(a){var b=this.O.Jb(a.sa.Ha());this.rg.forEach(function(a){b.o[a.N.getName()]=a.value},this);return b},this);a.update(this.O,c);return[cd()]};function Oi(a){this.h=a;this.ee=[new Zh,new oi(this.h),new Gi(this.h),new Ei,new Rh(this.h)];this.Ed=[new oi(this.h)]}Oi.prototype.create=function(a,b){var c=a.eb();if(c instanceof wg||c instanceof vg)return Pi(this,a,b);if(c instanceof Cg||c instanceof Gg||c instanceof Hg)return Pi(this,a,b,this.ee);if(c instanceof xg||c instanceof yg)return Pi(this,a,b,this.Ed);throw new C(8);};function Pi(a,b,c,d){a=If(b.eb(),a.Xf.bind(a));null!=d&&(a=(new Mi(a,c,d)).dc());return new Kd(a,b.Y())}
Oi.prototype.Xf=function(a){if(a instanceof Cg)return new Bi(a.f,a.Lb);if(a instanceof Fg)return new Sh(a.f);if(a instanceof Eg)return new jg(a.f);if(a instanceof Dg)return new vi(a.L);if(a instanceof Hg)return new Di;if(a instanceof Gg)return new ui;if(a instanceof zg)return new mi(a.I.U());if(a instanceof Bg)return new Og;if(a instanceof Ig)return new Uh(this.h,a.I,a.Nb);if(a instanceof Ag)return new Qh(this.h,a.table);if(a instanceof xg)return new Oh(a.table);if(a instanceof yg)return new Ni(a.table,
a.ie);if(a instanceof wg)return new ti(this.h,a.table);if(a instanceof vg)return new ri(this.h,a.table);throw new C(514);};function Qi(a){this.Vf=new Nh;this.eg=new Oi(a)};function Ri(){this.Me=z()}function Si(a,b){var c=a.Me.get(b.getName())||null;null===c&&(c=new Ti,a.Me.set(b.getName(),c));return c}function Ui(a,b,c,d){c.forEach(function(a){a=Si(this,a);0==d?(a.Ya=null,a.rc=b):3==d?(null===a.Tb&&(a.Tb=B()),a.Tb.add(b),null===a.Qa&&(a.Qa=B()),a.Qa.delete(b)):1==d?(null===a.Qa&&(a.Qa=B()),a.Qa.add(b)):2==d&&(a.Ya=b)},a)}
function Vi(a,b,c,d){var e=!0;c.forEach(function(a){if(e){a=Si(this,a);var c=null===a.Qa||0==a.Qa.size;e=0==d?(null===a.Tb||0==a.Tb.size)&&c&&null===a.rc&&null!==a.Ya&&a.Ya==b:3==d?null===a.rc&&null===a.Ya&&null!==a.Qa&&a.Qa.has(b):1==d?null===a.Ya:c&&(null===a.Ya||a.Ya==b)}},a);return e}function Wi(a,b,c,d){var e=Vi(a,b,c,d);e&&Ui(a,b,c,d);return e}Ri.prototype.releaseLock=function(a,b){b.forEach(function(b){Si(this,b).releaseLock(a)},this)};
function Yi(a,b){b.forEach(function(a){Si(this,a).Ya=null},a)}function Ti(){this.Tb=this.Qa=this.Ya=this.rc=null}Ti.prototype.releaseLock=function(a){this.rc==a&&(this.rc=null);this.Ya==a&&(this.Ya=null);null===this.Qa||this.Qa.delete(a);null===this.Tb||this.Tb.delete(a)};function Zi(){this.Rb=new $i;this.Bc=new Ri}function Sd(a,b){(2>b.getPriority()||2>b.getPriority())&&Yi(a.Bc,b.Y());a.Rb.ub(b);aj(a);return b.Kb().ja}function aj(a){for(var b=a.Rb.Ab(),c=0;c<b.length;c++){var d=b[c],e=!1;if(e=0==d.H()?bj(a,d,1,3):bj(a,d,2,0))a.Rb.remove(d),e=a,d.exec().then(e.cg.bind(e,d),e.bg.bind(e,d))}}function bj(a,b,c,d){var e=!1;Wi(a.Bc,b.U(),b.Y(),c)&&(e=Wi(a.Bc,b.U(),b.Y(),d));return e}Zi.prototype.cg=function(a,b){this.Bc.releaseLock(a.U(),a.Y());a.Kb().resolve(b);aj(this)};
Zi.prototype.bg=function(a,b){this.Bc.releaseLock(a.U(),a.Y());a.Kb().reject(b);aj(this)};function $i(){this.Rb=[]}$i.prototype.ub=function(a){Ke(this.Rb,a,function(a,c){var d=a.getPriority()-c.getPriority();return 0==d?a.U()-c.U():d})};$i.prototype.Ab=function(){return this.Rb.slice()};$i.prototype.remove=function(a){var b=this.Rb;a=va(b,a);var c;(c=0<=a)&&ua.splice.call(b,a,1);return c};function cj(a,b){this.Fd=kd.vc();this.ae=a;this.hd=b;this.J=dj(this)}function dj(a){if(0<a.ae.f.length)return a.ae.f;var b=[];a.ae.b.forEach(function(a){a.cb().forEach(function(a){b.push(a)})});return b}cj.prototype.S=function(a,b){return this.J.every(function(c){return qd(this.Fd,c.H(),"eq")(G(a,c),G(b,c))},this)};
function ej(a,b,c){var d=null===b?[]:b.entries,e=tb(d,c.entries,a.S.bind(a),function(a){return d[a]});b=[];for(var f=0,h=0;h<d.length;h++){var k=d[h];e[f]==k?f++:(k=a.hd.splice(f,1),k=fj(h,k,0,a.hd),b.push(k))}e=tb(d,c.entries,a.S.bind(a),function(a,b){return c.entries[b]});for(h=f=0;h<c.entries.length;h++)k=c.entries[h],e[f]==k?f++:(a.hd.splice(h,0,k.sa.o),k=fj(h,[],1,a.hd),b.push(k));return b}function fj(a,b,c,d){return{sg:c,index:a,object:d,vg:b,type:"splice"}};function gj(){this.bc=z()}gj.prototype.vd=function(a,b){var c=la(a.a).toString(),d=this.bc.get(c)||null;null===d&&(d=new hj(a),this.bc.set(c,d));d.vd(b)};gj.prototype.be=function(a,b){var c=la(a.a).toString(),d=this.bc.get(c)||null;d.be(b);0<d.Fc.size||this.bc.delete(c)};function Rd(a,b){var c=B();b.forEach(function(a){c.add(a.getName())});var d=[];a.bc.forEach(function(a){a=a.xc();a.context.b.some(function(a){return c.has(a.getName())})&&d.push(a)});return d}
function Pd(a,b,c){b=la(null!=b.Wc?b.Wc:b).toString();a=a.bc.get(b)||null;null!==a&&ij(a,c)}function hj(a){this.rf=a;this.Fc=B();this.$f=[];this.Ke=null;this.zf=new cj(a.a,this.$f)}hj.prototype.vd=function(a){this.Fc.has(a)||this.Fc.add(a)};hj.prototype.be=function(a){return this.Fc.delete(a)};hj.prototype.xc=function(){var a=this.rf;return{context:a.a,Zd:jh(a)}};function ij(a,b){var c=ej(a.zf,a.Ke,b);a.Ke=b;0<c.length&&a.Fc.forEach(function(a){a(c)})};function jj(a,b){var c=a.i(Wb),d=b||{},e=new Ge(c);a.ib(Qb,e);var e=null,f=!1;switch(d.storeType||0){case 1:e=new te(c);break;case 5:e=new ve(c);break;case 4:e=new Ce(a,c,d.webSqlDbSize);break;case 3:e=new de(c,d.firebase);f=!0;break;default:e=new oe(a,c)}a.ib(Pb,e);var h=new Df;a.ib(Rb,h);return e.Da(d.onUpgrade).then(function(){var b=new Qi(a);a.ib(Tb,b);b=new Zi;a.ib(Ub,b);b=new gj;a.ib(Vb,b);return h.Da(c)}).then(function(){if(f){var b=new Td(a);b.Ma.subscribe(b.Ud.bind(b))}return(new wf(a)).Da(c)})}
;function kj(a){this.h=a;this.l=a.i(Wb);this.Z=B(this.l.ra());this.Za=x()}m=kj.prototype;m.exec=function(){var a=this.h.i(Rb),b=this.h.i(Qb),c={};this.l.ra().forEach(function(d){var f=a.get(re(d)).Wa(),f=He(b,f).map(function(a){return a.o});c[d.getName()]=f});var d={name:this.l.name(),version:this.l.version(),tables:c},d=new gd(new y(-1,d),!0);return w([new D([d],[])])};m.H=l(0);m.Y=g("Z");m.Kb=g("Za");m.U=function(){return la(this)};m.getPriority=l(0);function lj(a,b){this.h=a;this.l=a.i(Wb);this.Z=B(this.l.ra());this.Za=x();this.ta=b;this.Ma=a.i(Pb);this.ba=a.i(Qb);this.C=a.i(Rb)}m=lj.prototype;m.exec=function(){if(!(this.Ma instanceof oe||this.Ma instanceof te))throw new C(300);var a;a:{a=this.l.ra();for(var b=0;b<a.length;++b)if(0<this.C.get(re(a[b])).Ka().na){a=!1;break a}a=!0}if(!a)throw new C(110);if(this.l.name()!=this.ta.name||this.l.version()!=this.ta.version)throw new C(111);if(null==this.ta.tables)throw new C(112);return mj(this)};
m.H=l(1);m.Y=g("Z");m.Kb=g("Za");m.U=function(){return la(this)};m.getPriority=l(0);function mj(a){var b=new Nc(a.h,a.Z),b=a.Ma.yb(a.H(),b),c;for(c in a.ta.tables){var d=a.l.table(c),e=a.ta.tables[c].map(function(a){return d.qb(a)}),f=b.G(c,d.Jb);a.ba.rd(c,e);var h=a.C.gc.get(c)||[];e.forEach(function(a){h.forEach(function(b){var c=a.Bb(b.getName());b.add(c,a.id())})});f.put(e)}return b.la()};function nj(a,b){this.h=a;this.Ma=a.i(Pb);this.za=a.i(Ub);this.Cb=a.i(Vb);this.Z=B(b);this.Pa=new Nc(this.h,this.Z);this.Za=x();this.sc=x();this.le=x()}m=nj.prototype;m.exec=function(){this.le.resolve();return this.sc.ja};m.H=l(1);m.Y=g("Z");m.Kb=g("Za");m.U=function(){return la(this)};m.getPriority=l(2);function oj(a){Sd(a.za,a);return a.le.ja}
function pj(a,b){var c=b.xc();return c.Zd.eb().exec(a.Pa,c.context).then(function(a){return Zc(a[0])},function(a){this.Pa.Eb();var b=new hb(a.name);this.sc.reject(b);throw a;}.bind(a))}m.la=function(){this.Ma.yb(this.H(),this.Pa).la().then(function(){this.Kc();this.sc.resolve()}.bind(this),function(a){this.Pa.Eb();this.sc.reject(a)}.bind(this));return this.Za.ja};m.Eb=function(){this.Pa.Eb();this.sc.resolve();return this.Za.ja};
m.Kc=function(){var a=Rd(this.Cb,this.Z);0!=a.length&&(a=new Od(this.h,a),Sd(this.za,a))};function qj(a){this.h=a;this.za=a.i(Ub);this.Oc=null;this.Ra=0;0==rj.size&&(rj.set(0,B([1,4])),rj.set(1,B([2])),rj.set(2,B([3,5,6])),rj.set(3,B([2,7])),rj.set(4,B([7])),rj.set(5,B([7])),rj.set(6,B([7])))}r("lf.proc.Transaction",qj);var rj=z();function sj(a,b){var c=rj.get(a.Ra)||null;if(null===c||!c.has(b))throw new C(107,a.Ra,b);a.Ra=b}
qj.prototype.exec=function(a){sj(this,4);var b=[];try{a.forEach(function(a){a.ab();b.push(a.xc())},this)}catch(c){return sj(this,7),Za(c)}a=new Pg(this.h,b);return Sd(this.za,a).then(function(a){sj(this,7);return a.map(function(a){return Zc(a)})}.bind(this),function(a){sj(this,7);throw a;}.bind(this))};qj.prototype.exec=qj.prototype.exec;qj.prototype.pf=function(a){sj(this,1);this.Oc=new nj(this.h,a);return oj(this.Oc).then(function(){sj(this,2)}.bind(this))};qj.prototype.begin=qj.prototype.pf;
qj.prototype.of=function(a){sj(this,3);return pj(this.Oc,a).then(function(a){sj(this,2);return a}.bind(this),function(a){sj(this,7);throw a;}.bind(this))};qj.prototype.attach=qj.prototype.of;qj.prototype.la=function(){sj(this,5);return this.Oc.la().then(function(){sj(this,7)}.bind(this))};qj.prototype.commit=qj.prototype.la;qj.prototype.Eb=function(){sj(this,6);return this.Oc.Eb().then(function(){sj(this,7)}.bind(this))};qj.prototype.rollback=qj.prototype.Eb;function V(a){this.h=a;this.l=a.i(Wb);this.Kd=!1}r("lf.proc.Database",V);V.prototype.Da=function(a){this.h.ib(Wb,this.l);return jj(this.h,a).then(function(){this.Kd=!0;this.za=this.h.i(Ub);return this}.bind(this))};V.prototype.init=V.prototype.Da;V.prototype.sb=g("l");V.prototype.getSchema=V.prototype.sb;function tj(a){if(!a.Kd)throw new C(2);}V.prototype.select=function(a){tj(this);return new U(this.h,1!=arguments.length||null!=arguments[0]?Array.prototype.slice.call(arguments):[])};
V.prototype.select=V.prototype.select;V.prototype.ub=function(){tj(this);return new lh(this.h)};V.prototype.insert=V.prototype.ub;V.prototype.Ld=function(){tj(this);return new lh(this.h,!0)};V.prototype.insertOrReplace=V.prototype.Ld;V.prototype.update=function(a){tj(this);return new vh(this.h,a)};V.prototype.update=V.prototype.update;V.prototype.delete=function(){tj(this);return new kh(this.h)};V.prototype["delete"]=V.prototype.delete;
V.prototype.observe=function(a,b){tj(this);this.h.i(Vb).vd(a,b)};V.prototype.observe=V.prototype.observe;V.prototype.unobserve=function(a,b){tj(this);this.h.i(Vb).be(a,b)};V.prototype.unobserve=V.prototype.unobserve;V.prototype.xf=function(){tj(this);return new qj(this.h)};V.prototype.createTransaction=V.prototype.xf;V.prototype.close=function(){try{this.h.i(Pb).close()}catch(a){}this.h.clear();this.Kd=!1};V.prototype.close=V.prototype.close;
V.prototype.Ff=function(){tj(this);var a=new kj(this.h);return Sd(this.za,a).then(function(a){return Zc(a[0])[0]})};V.prototype["export"]=V.prototype.Ff;V.prototype.import=function(a){tj(this);a=new lj(this.h,a);return Sd(this.za,a).then(l(null))};V.prototype["import"]=V.prototype.import;function W(a,b,c,d,e,f){this.O=a;this.w=b;this.Ge=c;this.Ee=d;this.hf=e;this.$a=f||null}r("lf.schema.BaseColumn",W);m=W.prototype;m.getName=g("w");m.m=function(){return H(this.O)+"."+this.w};m.toString=function(){return this.m()};m.G=g("O");m.H=g("hf");W.prototype.getType=W.prototype.H;W.prototype.Va=g("$a");W.prototype.Ca=function(){null==this.ia&&(this.ia=[],this.G().Ca().forEach(function(a){-1!=a.f.map(function(a){return a.ga.getName()}).indexOf(this.w)&&this.ia.push(a)},this));return this.ia};
W.prototype.ua=function(){if(!q(this.ea)){var a=this.Ca().filter(function(a){return 1!=a.f.length?!1:a.f[0].ga.getName()==this.getName()},this);this.ea=0<a.length?a[0]:null}return this.ea};W.prototype.zc=g("Ee");W.prototype.isNullable=W.prototype.zc;W.prototype.Ac=g("Ge");W.prototype.Oa=function(a){return $f(this,a,"eq")};W.prototype.eq=W.prototype.Oa;W.prototype.Ne=function(a){return $f(this,a,"neq")};W.prototype.neq=W.prototype.Ne;W.prototype.Rd=function(a){return $f(this,a,"lt")};
W.prototype.lt=W.prototype.Rd;W.prototype.Wf=function(a){return $f(this,a,"lte")};W.prototype.lte=W.prototype.Wf;W.prototype.Hf=function(a){return $f(this,a,"gt")};W.prototype.gt=W.prototype.Hf;W.prototype.If=function(a){return $f(this,a,"gte")};W.prototype.gte=W.prototype.If;W.prototype.match=function(a){return $f(this,a,"match")};W.prototype.match=W.prototype.match;W.prototype.qf=function(a,b){return $f(this,[a,b],"between")};W.prototype.between=W.prototype.qf;
W.prototype.Jf=function(a){return $f(this,a,"in")};W.prototype["in"]=W.prototype.Jf;W.prototype.Rf=function(){return this.Oa(null)};W.prototype.isNull=W.prototype.Rf;W.prototype.Qf=function(){return this.Ne(null)};W.prototype.isNotNull=W.prototype.Qf;W.prototype.kc=function(a){return new W(this.O,this.w,this.Ge,this.Ee,this.hf,a)};W.prototype.as=W.prototype.kc;function uj(){this.pd=z()}var vj;uj.prototype.clear=function(){this.pd.clear()};uj.prototype.clear=uj.prototype.clear;uj.prototype.ib=function(a,b){this.pd.set(a.toString(),b);return b};uj.prototype.registerService=uj.prototype.ib;uj.prototype.i=function(a){var b=this.pd.get(a.toString())||null;if(null===b)throw new C(7,a.toString());return b};uj.prototype.getService=uj.prototype.i;uj.prototype.Pd=function(a){return this.pd.has(a.toString())};uj.prototype.isRegistered=uj.prototype.Pd;function wj(a){this.l=a;this.Ve=new Tf;this.Pe=new Tf;this.se=z();this.g=new Tf;this.re=new Tf;xj(this)}function xj(a){a.l.ra().forEach(function(a){var c=a.getName();a.zb().Id().forEach(function(d){this.Ve.set(d.wb,d);this.Pe.set(c,this.l.table(d.wb));this.g.set(d.wb,a);this.se.set(a.getName()+"."+d.ob,d.wb);this.re.set(d.wb+"."+d.Hc,a.getName())},this)},a)}function Gc(a,b){return a.Ve.get(b)}function Sg(a,b){var c=b.get(a);return null===c?[]:c}
function Vg(a,b){var c=B();b.forEach(function(a){(a=this.se.get(a))&&c.add(a)},a);return cc(c).map(function(a){return this.l.table(a)},a)}function Wg(a,b){var c=B();b.forEach(function(a){(a=this.re.get(a))&&a.forEach(function(a){c.add(a)})},a);return cc(c).map(function(a){return this.l.table(a)},a)};function yj(a,b,c){this.fg=a;this.Zf=b;this.Gf=c}r("lf.schema.Constraint",yj);yj.prototype.bd=g("fg");yj.prototype.getPrimaryKey=yj.prototype.bd;yj.prototype.Id=g("Gf");yj.prototype.getForeignKeys=yj.prototype.Id;function zj(a,b){var c=a.ref.split(".");if(2!=c.length)throw new C(540,b);this.ob=a.local;this.wb=c[0];this.Hc=c[1];this.name=b;this.action=a.action;this.timing=a.timing};function X(a){Aj(a);this.Fd=kd.vc();this.w=a;this.J=z();this.sd=B();this.hc=B();this.Ec=B();this.wa=null;this.ia=z();this.ld=!1;this.rb=[]}r("lf.schema.TableBuilder",X);function Bj(a){this.name=a.name;this.hb=a.order;this.autoIncrement=a.autoIncrement}var Cj=B([0,6]);function Aj(a){if(!/^[A-Za-z_][A-Za-z0-9_]*$/.test(a))throw new C(502,a);}function Dj(a,b){if(b==a.w)throw new C(546,b);if(a.J.has(b)||a.ia.has(b)||a.hc.has(b))throw new C(503,a.w+"."+b);}
function Ej(a,b){var c=!1;b.forEach(function(a){var b=this.J.get(a.name);c=c||a.autoIncrement;if(a.autoIncrement&&3!=b)throw new C(504);},a);if(c&&1<b.length)throw new C(505);}function Fj(a){if(null!==a.wa){var b=a.ia.get(a.wa).map(function(a){return a.name}),c=0;if(a.rb.some(function(a,e){c=e;return-1!=b.indexOf(a.ob)},a))throw new C(543,a.rb[c].name);}}
function Gj(a){if(null!==a.wa){var b=function(a){return a.name},c=JSON.stringify(a.ia.get(a.wa).map(b));a.ia.forEach(function(a,e){if(e!=this.wa){var f=a.map(b);if(JSON.stringify(f)==c)throw new C(544,this.w+"."+e);}},a)}}function Hj(a){null===a.wa||a.ia.get(a.wa).forEach(function(a){if(this.Ec.has(a.name))throw new C(545,this.w+"."+a.name);},a)}X.prototype.jf=function(a,b){Aj(a);Dj(this,a);this.J.set(a,b);Cj.has(b)&&this.ne([a]);return this};X.prototype.addColumn=X.prototype.jf;
X.prototype.lf=function(a,b){var c=this.w;this.wa="pk"+(c[0].toUpperCase()+c.substring(1));Aj(this.wa);Dj(this,this.wa);c=Ij(this,a,!0,void 0,b);Ej(this,c);1==c.length&&this.sd.add(c[0].name);this.hc.add(this.wa);this.ia.set(this.wa,c);return this};X.prototype.addPrimaryKey=X.prototype.lf;
X.prototype.kf=function(a,b){Aj(a);Dj(this,a);var c=new zj(b,this.w+"."+a);q(c.action)||(c.action=0);q(c.timing)||(c.timing=0);if(1==c.action&&1==c.timing)throw new C(506);if(!this.J.has(c.ob))throw new C(540,a);this.rb.push(c);this.me(a,[c.ob],this.sd.has(c.ob));return this};X.prototype.addForeignKey=X.prototype.kf;X.prototype.mf=function(a,b){Aj(a);Dj(this,a);var c=Ij(this,b,!0);Jj(this,a,c);1==c.length&&(this.sd.add(c[0].name),Kj(this,c[0].name));this.ia.set(a,c);this.hc.add(a);return this};
X.prototype.addUnique=X.prototype.mf;function Kj(a,b){a.rb.forEach(function(a){a.ob==b&&this.hc.add(a.name.split(".")[1])},a)}X.prototype.ne=function(a){a=Ij(this,a,!1);Lj(this,a);a.forEach(function(a){this.Ec.add(a.name)},this);return this};X.prototype.addNullable=X.prototype.ne;function Lj(a,b){Gb(a.ia).forEach(function(a){var d=B();this.ia.get(a).forEach(function(a){d.add(a.name)});var e=b.filter(function(a){return d.has(a.name)});if(1<d.size&&0<e.length)throw new C(507,a,e.join(","));},a)}
X.prototype.me=function(a,b,c,d){Aj(a);Dj(this,a);b=Ij(this,b,!0,d);Jj(this,a,b);c&&this.hc.add(a);this.ia.set(a,b);return this};X.prototype.addIndex=X.prototype.me;function Jj(a,b,c){if(1<c.length&&(a=c.filter(function(a){return this.Ec.has(a.name)},a),0<a.length))throw new C(507,b,a.join(","));}X.prototype.Db=ba("ld");X.prototype.persistentIndex=X.prototype.Db;X.prototype.sb=function(){Fj(this);Gj(this);Hj(this);return new (Mj(this))};X.prototype.getSchema=X.prototype.sb;
function Nj(a){return a.rb}function Ij(a,b,c,d,e){var f=b,f="string"==typeof b[0]?b.map(function(a){return new Bj({name:a,order:null!=d?d:1,autoIncrement:e||!1})}):b.map(function(a){return new Bj(a)});f.forEach(function(a){if(!this.J.has(a.name))throw new C(508,this.w,a.name);if(c){var b=this.J.get(a.name);if(0==b||6==b)throw new C(509,this.w,a.name);}},a);return f}
function Mj(a){function b(){function b(c){return a.ia.get(c).map(function(a){return{ga:this[a.name],hb:a.hb,autoIncrement:a.autoIncrement}},this)}var d=Gb(a.J).map(function(b){this[b]=new W(this,b,a.sd.has(b),a.Ec.has(b),a.J.get(b));return this[b]},this),e=Gb(a.ia).map(function(d){return new bg(a.w,d,a.hc.has(d),b.call(this,d))},this);Q.call(this,a.w,d,e,a.ld);var f=null===a.wa?null:new bg(a.w,a.wa,!0,b.call(this,a.wa)),h=d.filter(function(b){return!a.Ec.has(b.getName())});this.tf=new yj(f,h,a.rb);
this.Ze=Oj(a,d,e)}t(b,Q);b.prototype.qb=function(a){return new this.Ze(nb++,a)};b.prototype.createRow=b.prototype.qb;b.prototype.Jb=function(a){var b={};this.cb().forEach(function(e){var f=e.getName();e=e.H();var h=a.value[f];if(0==e)if(e=h,null!=e&&""!=e){0!=e.length%2&&(e="0"+e);for(var h=new ArrayBuffer(e.length/2),k=new Uint8Array(h),p=0,E=0;p<e.length;p+=2)k[E++]=parseInt(e.substr(p,2),16);e=h}else e=null;else e=2==e?null!=h?new Date(h):null:h;b[f]=e},this);return new this.Ze(a.id,b)};b.prototype.deserializeRow=
b.prototype.Jb;b.prototype.zb=g("tf");b.prototype.getConstraint=b.prototype.zb;return b}
function Oj(a,b,c){function d(a,d){this.J=b;this.ia=c;y.call(this,a,d)}t(d,y);d.prototype.ve=function(){var a={};this.J.forEach(function(b){a[b.getName()]=b.zc()?null:yc[b.H()]});return a};d.prototype.ef=function(){var a={};this.J.forEach(function(b){var c=b.getName();b=b.H();var d=this.o[c];a[c]=0==b?null!=d?qb(d):null:2==b?null!=d?d.getTime():null:6==b?null!=d?d:null:d},this);return a};var e=function(a){var b=this.J.get(a.getName()),c=this.Fd.He.get(b)||null;return function(b){return c(b[a.getName()])}}.bind(a),
f=function(a){var b=a.map(function(a){return e(a.ga)});return function(a){return b.map(function(b){return b(a)})}}.bind(a),h={};c.forEach(function(a){var b=a.m();a=1==a.f.length?e(a.f[0].ga):f(a.f);h[b]=a});d.prototype.Bb=function(a){return-1!=a.indexOf("#")?this.id():h.hasOwnProperty(a)?h[a](this.o):null};return d};function Y(a,b){this.l=new Z(a,b);this.mb=z();this.tc=!1}r("lf.schema.Builder",Y);function Pj(a,b){b.rb.forEach(function(a){var d=a.wb;if(!this.mb.has(d))throw new C(536,a.name);var d=this.mb.get(d).sb(),e=a.Hc;if(!d.hasOwnProperty(e))throw new C(537,a.name);if(b.sb()[a.ob].H()!=d[e].H())throw new C(538,a.name);if(!d[e].Ac())throw new C(539,a.name);},a)}Y.prototype.sf=function(a){a.rb.forEach(function(a){Nj(this.mb.get(a.wb)).forEach(function(c){if(c.ob==a.Hc)throw new C(534,a.name);},this)},this)};
function Qj(a){a.tc||(a.mb.forEach(function(a){Pj(this,a);a=a.sb();this.l.K.set(a.getName(),a)},a),A(a.mb).forEach(a.sf,a),Rj(a),a.mb.clear(),a.tc=!0)}function Sj(a,b,c){b.je||(b.je=!0,b.Vd=!0,b.we.forEach(function(a){a=c.get(a);if(!a.je)Sj(this,a,c);else if(a.Vd&&b!=a)throw new C(533);},a));b.Vd=!1}function Rj(a){var b=z();a.l.K.forEach(function(a,d){b.set(d,new Tj(d))},a);a.mb.forEach(function(a,d){a.rb.forEach(function(a){b.get(a.wb).we.add(d)})});A(b).forEach(function(a){Sj(this,a,b)},a)}
function Tj(a){this.Vd=this.je=!1;this.we=B();this.Mc=a}Y.prototype.sb=function(){this.tc||Qj(this);return this.l};Y.prototype.getSchema=Y.prototype.sb;Y.prototype.ye=function(){var a=new Ob("ns_"+this.l.name()),b;vj||(vj=new uj);b=vj;var c=null;b.Pd(a)?c=b.i(a):(c=new uj,b.ib(a,c));return c};Y.prototype.getGlobal=Y.prototype.ye;Y.prototype.connect=function(a){var b=this.ye();b.Pd(Wb)||b.ib(Wb,this.sb());return(new V(b)).Da(a)};Y.prototype.connect=Y.prototype.connect;
Y.prototype.wf=function(a){if(this.mb.has(a))throw new C(503,a);if(this.tc)throw new C(535);this.mb.set(a,new X(a));return this.mb.get(a)};Y.prototype.createTable=Y.prototype.wf;Y.prototype.fe=function(a){if(this.tc)throw new C(535);this.l.fe(a);return this};Y.prototype.setPragma=Y.prototype.fe;function Z(a,b){this.w=a;this.Wb=b;this.K=z();this.Te={Af:!1}}r("lf.schema.DatabaseSchema",Z);Z.prototype.name=g("w");Z.prototype.name=Z.prototype.name;Z.prototype.version=g("Wb");Z.prototype.version=Z.prototype.version;
Z.prototype.ra=function(){return A(this.K)};Z.prototype.tables=Z.prototype.ra;Z.prototype.table=function(a){if(!this.K.has(a))throw new C(101,a);return this.K.get(a)};Z.prototype.table=Z.prototype.table;Z.prototype.info=function(){this.Ce||(this.Ce=new wj(this));return this.Ce};Z.prototype.Se=g("Te");Z.prototype.pragma=Z.prototype.Se;Z.prototype.fe=ba("Te");r("lf.schema.create",function(a,b){return new Y(a,b)});}.bind(window))()
//# sourceMappingURL=lovefield.es6.js.map
