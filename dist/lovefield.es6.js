if(!self.window){window=self;}
(function(){'use strict';function aa(){return function(){}}function ca(a){return function(b){this[a]=b}}function g(a){return function(){return this[a]}}function l(a){return function(){return a}}var m,da=this;function n(a){return void 0!==a}function ea(){}
function fa(a){var b=typeof a;if("object"==b)if(a){if(a instanceof Array)return"array";if(a instanceof Object)return b;var c=Object.prototype.toString.call(a);if("[object Window]"==c)return"object";if("[object Array]"==c||"number"==typeof a.length&&"undefined"!=typeof a.splice&&"undefined"!=typeof a.propertyIsEnumerable&&!a.propertyIsEnumerable("splice"))return"array";if("[object Function]"==c||"undefined"!=typeof a.call&&"undefined"!=typeof a.propertyIsEnumerable&&!a.propertyIsEnumerable("call"))return"function"}else return"null";
else if("function"==b&&"undefined"==typeof a.call)return"object";return b}function ga(a){return null!=a}function ha(a){var b=fa(a);return"array"==b||"object"==b&&"number"==typeof a.length}function ia(a){return"string"==typeof a}function ja(a){return"function"==fa(a)}function ka(a){return a[la]||(a[la]=++ma)}var la="closure_uid_"+(1E9*Math.random()>>>0),ma=0;function na(a,b,c){return a.call.apply(a.bind,arguments)}
function oa(a,b,c){if(!a)throw Error();if(2<arguments.length){var d=Array.prototype.slice.call(arguments,2);return function(){var c=Array.prototype.slice.call(arguments);Array.prototype.unshift.apply(c,d);return a.apply(b,c)}}return function(){return a.apply(b,arguments)}}function pa(a,b,c){pa=Function.prototype.bind&&-1!=Function.prototype.bind.toString().indexOf("native code")?na:oa;return pa.apply(null,arguments)}
function ra(a,b){var c=Array.prototype.slice.call(arguments,1);return function(){var b=c.slice();b.push.apply(b,arguments);return a.apply(this,b)}}function q(a,b){a=a.split(".");var c=da;a[0]in c||!c.execScript||c.execScript("var "+a[0]);for(var d;a.length&&(d=a.shift());)!a.length&&n(b)?c[d]=b:c=c[d]?c[d]:c[d]={}}
function r(a,b){function c(){}c.prototype=b.prototype;a.eb=b.prototype;a.prototype=new c;a.prototype.constructor=a;a.Rg=function(a,c,f){for(var d=Array(arguments.length-2),e=2;e<arguments.length;e++)d[e-2]=arguments[e];return b.prototype[c].apply(a,d)}};function sa(a){if(Error.captureStackTrace)Error.captureStackTrace(this,sa);else{var b=Error().stack;b&&(this.stack=b)}a&&(this.message=String(a))}r(sa,Error);sa.prototype.name="CustomError";var ta=String.prototype.trim?function(a){return a.trim()}:function(a){return a.replace(/^[\s\xa0]+|[\s\xa0]+$/g,"")};function ua(a,b){return a<b?-1:a>b?1:0};function va(a,b,c){this.mg=c;this.Kf=a;this.Fg=b;this.ld=0;this.bd=null}va.prototype.get=function(){var a;0<this.ld?(this.ld--,a=this.bd,this.bd=a.next,a.next=null):a=this.Kf();return a};va.prototype.put=function(a){this.Fg(a);this.ld<this.mg&&(this.ld++,a.next=this.bd,this.bd=a)};var wa=Array.prototype.indexOf?function(a,b,c){return Array.prototype.indexOf.call(a,b,c)}:function(a,b,c){c=null==c?0:0>c?Math.max(0,a.length+c):c;if(ia(a))return ia(b)&&1==b.length?a.indexOf(b,c):-1;for(;c<a.length;c++)if(c in a&&a[c]===b)return c;return-1},xa=Array.prototype.forEach?function(a,b,c){Array.prototype.forEach.call(a,b,c)}:function(a,b,c){for(var d=a.length,e=ia(a)?a.split(""):a,f=0;f<d;f++)f in e&&b.call(c,e[f],f,a)},ya=Array.prototype.map?function(a,b,c){return Array.prototype.map.call(a,
b,c)}:function(a,b,c){for(var d=a.length,e=Array(d),f=ia(a)?a.split(""):a,h=0;h<d;h++)h in f&&(e[h]=b.call(c,f[h],h,a));return e},za=Array.prototype.reduce?function(a,b,c,d){d&&(b=pa(b,d));return Array.prototype.reduce.call(a,b,c)}:function(a,b,c,d){var e=c;xa(a,function(c,h){e=b.call(d,e,c,h,a)});return e},Aa=Array.prototype.some?function(a,b,c){return Array.prototype.some.call(a,b,c)}:function(a,b,c){for(var d=a.length,e=ia(a)?a.split(""):a,f=0;f<d;f++)if(f in e&&b.call(c,e[f],f,a))return!0;return!1};
function Ba(a,b,c){return 2>=arguments.length?Array.prototype.slice.call(a,b):Array.prototype.slice.call(a,b,c)}function Ca(a){for(var b=[],c=0;c<a;c++)b[c]=0;return b}function Da(a){for(var b=[],c=0;c<arguments.length;c++){var d=arguments[c];if("array"==fa(d))for(var e=0;e<d.length;e+=8192)for(var f=Da.apply(null,Ba(d,e,e+8192)),h=0;h<f.length;h++)b.push(f[h]);else b.push(d)}return b};var Ea;a:{var Fa=da.navigator;if(Fa){var Ga=Fa.userAgent;if(Ga){Ea=Ga;break a}}Ea=""}function t(a){return-1!=Ea.indexOf(a)};function Ha(){return t("Safari")&&!(Ia()||t("Coast")||t("Opera")||t("Edge")||t("Silk")||t("Android"))}function Ia(){return(t("Chrome")||t("CriOS"))&&!t("Edge")};function Ka(a){da.setTimeout(function(){throw a;},0)}var La;
function Ma(){var a=da.MessageChannel;"undefined"===typeof a&&"undefined"!==typeof window&&window.postMessage&&window.addEventListener&&!t("Presto")&&(a=function(){var a=document.createElement("IFRAME");a.style.display="none";a.src="";document.documentElement.appendChild(a);var b=a.contentWindow,a=b.document;a.open();a.write("");a.close();var c="callImmediate"+Math.random(),d="file:"==b.location.protocol?"*":b.location.protocol+"//"+b.location.host,a=pa(function(a){if(("*"==d||a.origin==d)&&a.data==
c)this.port1.onmessage()},this);b.addEventListener("message",a,!1);this.port1={};this.port2={postMessage:function(){b.postMessage(c,d)}}});if("undefined"!==typeof a&&!t("Trident")&&!t("MSIE")){var b=new a,c={},d=c;b.port1.onmessage=function(){if(n(c.next)){c=c.next;var a=c.Ae;c.Ae=null;a()}};return function(a){d.next={Ae:a};d=d.next;b.port2.postMessage(0)}}return"undefined"!==typeof document&&"onreadystatechange"in document.createElement("SCRIPT")?function(a){var b=document.createElement("SCRIPT");
b.onreadystatechange=function(){b.onreadystatechange=null;b.parentNode.removeChild(b);b=null;a();a=null};document.documentElement.appendChild(b)}:function(a){da.setTimeout(a,0)}};function Na(){this.wd=this.mc=null}var Pa=new va(function(){return new Oa},function(a){a.reset()},100);Na.prototype.add=function(a,b){var c=Pa.get();c.set(a,b);this.wd?this.wd.next=c:this.mc=c;this.wd=c};Na.prototype.remove=function(){var a=null;this.mc&&(a=this.mc,this.mc=this.mc.next,this.mc||(this.wd=null),a.next=null);return a};function Oa(){this.next=this.scope=this.Od=null}Oa.prototype.set=function(a,b){this.Od=a;this.scope=b;this.next=null};
Oa.prototype.reset=function(){this.next=this.scope=this.Od=null};function Qa(a,b){Ra||Sa();Ta||(Ra(),Ta=!0);Ua.add(a,b)}var Ra;function Sa(){var a=da.Promise;if(-1!=String(a).indexOf("[native code]")){var b=a.resolve(void 0);Ra=function(){b.then(Va)}}else Ra=function(){var a=Va;!ja(da.setImmediate)||da.Window&&da.Window.prototype&&!t("Edge")&&da.Window.prototype.setImmediate==da.setImmediate?(La||(La=Ma()),La(a)):da.setImmediate(a)}}var Ta=!1,Ua=new Na;function Va(){for(var a;a=Ua.remove();){try{a.Od.call(a.scope)}catch(b){Ka(b)}Pa.put(a)}Ta=!1};function u(a,b){this.Ra=0;this.hf=void 0;this.Rc=this.bc=this.C=null;this.ad=this.Md=!1;if(a!=ea)try{var c=this;a.call(b,function(a){Wa(c,2,a)},function(a){Wa(c,3,a)})}catch(d){Wa(this,3,d)}}function Xa(){this.next=this.context=this.gc=this.Ec=this.child=null;this.zd=!1}Xa.prototype.reset=function(){this.context=this.gc=this.Ec=this.child=null;this.zd=!1};var Ya=new va(function(){return new Xa},function(a){a.reset()},100);function Za(a,b,c){var d=Ya.get();d.Ec=a;d.gc=b;d.context=c;return d}
function v(a){if(a instanceof u)return a;var b=new u(ea);Wa(b,2,a);return b}function $a(a){return new u(function(b,c){c(a)})}function ab(a,b,c){bb(a,b,c,null)||Qa(ra(b,a))}function cb(a){return new u(function(b,c){var d=a.length,e=[];if(d)for(var f=function(a,c){d--;e[a]=c;0==d&&b(e)},h=function(a){c(a)},k=0,p;k<a.length;k++)p=a[k],ab(p,ra(f,k),h);else b(e)})}function w(){var a,b,c=new u(function(c,e){a=c;b=e});return new db(c,a,b)}
u.prototype.then=function(a,b,c){return eb(this,ja(a)?a:null,ja(b)?b:null,c)};u.prototype.then=u.prototype.then;u.prototype.$goog_Thenable=!0;u.prototype.pe=function(a,b){return eb(this,null,a,b)};function fb(a,b){a.bc||2!=a.Ra&&3!=a.Ra||gb(a);a.Rc?a.Rc.next=b:a.bc=b;a.Rc=b}
function eb(a,b,c,d){var e=Za(null,null,null);e.child=new u(function(a,h){e.Ec=b?function(c){try{var e=b.call(d,c);a(e)}catch(K){h(K)}}:a;e.gc=c?function(b){try{var e=c.call(d,b);!n(e)&&b instanceof hb?h(b):a(e)}catch(K){h(K)}}:h});e.child.C=a;fb(a,e);return e.child}u.prototype.Mg=function(a){this.Ra=0;Wa(this,2,a)};u.prototype.Ng=function(a){this.Ra=0;Wa(this,3,a)};
function Wa(a,b,c){0==a.Ra&&(a===c&&(b=3,c=new TypeError("Promise cannot resolve to itself")),a.Ra=1,bb(c,a.Mg,a.Ng,a)||(a.hf=c,a.Ra=b,a.C=null,gb(a),3!=b||c instanceof hb||ib(a,c)))}function bb(a,b,c,d){if(a instanceof u)return fb(a,Za(b||ea,c||null,d)),!0;var e;if(a)try{e=!!a.$goog_Thenable}catch(h){e=!1}else e=!1;if(e)return a.then(b,c,d),!0;e=typeof a;if("object"==e&&null!=a||"function"==e)try{var f=a.then;if(ja(f))return jb(a,f,b,c,d),!0}catch(h){return c.call(d,h),!0}return!1}
function jb(a,b,c,d,e){function f(a){k||(k=!0,d.call(e,a))}function h(a){k||(k=!0,c.call(e,a))}var k=!1;try{b.call(a,h,f)}catch(p){f(p)}}function gb(a){a.Md||(a.Md=!0,Qa(a.Rf,a))}function kb(a){var b=null;a.bc&&(b=a.bc,a.bc=b.next,b.next=null);a.bc||(a.Rc=null);return b}
u.prototype.Rf=function(){for(var a;a=kb(this);){var b=this.Ra,c=this.hf;if(3==b&&a.gc&&!a.zd){var d;for(d=this;d&&d.ad;d=d.C)d.ad=!1}if(a.child)a.child.C=null,lb(a,b,c);else try{a.zd?a.Ec.call(a.context):lb(a,b,c)}catch(e){mb.call(null,e)}Ya.put(a)}this.Md=!1};function lb(a,b,c){2==b?a.Ec.call(a.context,c):a.gc&&a.gc.call(a.context,c)}function ib(a,b){a.ad=!0;Qa(function(){a.ad&&mb.call(null,b)})}var mb=Ka;function hb(a){sa.call(this,a)}r(hb,sa);hb.prototype.name="cancel";
function db(a,b,c){this.ha=a;this.resolve=b;this.reject=c};function nb(a,b,c,d){c=c||function(a,b){return a==b};d=d||function(b){return a[b]};for(var e=a.length,f=b.length,h=[],k=0;k<e+1;k++)h[k]=[],h[k][0]=0;for(var p=0;p<f+1;p++)h[0][p]=0;for(k=1;k<=e;k++)for(p=1;p<=f;p++)c(a[k-1],b[p-1])?h[k][p]=h[k-1][p-1]+1:h[k][p]=Math.max(h[k-1][p],h[k][p-1]);for(var K=[],k=e,p=f;0<k&&0<p;)c(a[k-1],b[p-1])?(K.unshift(d(k-1,p-1)),k--,p--):h[k-1][p]>h[k][p-1]?k--:p--;return K}function ob(a){return za(arguments,function(a,c){return a+c},0)}
function pb(a){return ob.apply(null,arguments)/arguments.length}function qb(a){var b=arguments.length;if(2>b)return 0;var c=pb.apply(null,arguments);return ob.apply(null,ya(arguments,function(a){return Math.pow(a-c,2)}))/(b-1)}function rb(a){return Math.sqrt(qb.apply(null,arguments))};var sb="StopIteration"in da?da.StopIteration:{message:"StopIteration",stack:""};function tb(){}tb.prototype.next=function(){throw sb;};tb.prototype.te=function(){return this};function ub(a){if(a instanceof tb)return a;if("function"==typeof a.te)return a.te(!1);if(ha(a)){var b=0,c=new tb;c.next=function(){for(;;){if(b>=a.length)throw sb;if(b in a)return a[b++];b++}};return c}throw Error("Not implemented");}
function vb(a,b){if(ha(a))try{xa(a,b,void 0)}catch(c){if(c!==sb)throw c;}else{a=ub(a);try{for(;;)b.call(void 0,a.next(),void 0,a)}catch(c){if(c!==sb)throw c;}}}function wb(a){if(Aa(arguments,function(a){return!a.length})||!arguments.length)return new tb;var b=new tb,c=arguments,d=Ca(c.length);b.next=function(){if(d){for(var a=ya(d,function(a,b){return c[b][a]}),b=d.length-1;0<=b;b--){if(d[b]<c[b].length-1){d[b]++;break}if(0==b){d=null;break}d[b]=0}return a}throw sb;};return b};function zb(a){Ab(a);return a.a.concat()}function Ab(a){if(a.Gf!=a.a.length){for(var b=0,c=0;b<a.a.length;){var d=a.a[b];Bb(a.$,d)&&(a.a[c++]=d);b++}a.a.length=c}if(a.Gf!=a.a.length){for(var e={},c=b=0;b<a.a.length;)d=a.a[b],Bb(e,d)||(a.a[c++]=d,e[d]=1),b++;a.a.length=c}}function Bb(a,b){return Object.prototype.hasOwnProperty.call(a,b)};function Cb(a,b){var c=Db;return Object.prototype.hasOwnProperty.call(c,a)?c[a]:c[a]=b(a)};var Eb=t("Opera"),Fb=t("Trident")||t("MSIE"),Gb=t("Edge"),Hb=t("Gecko")&&!(-1!=Ea.toLowerCase().indexOf("webkit")&&!t("Edge"))&&!(t("Trident")||t("MSIE"))&&!t("Edge"),Ib=-1!=Ea.toLowerCase().indexOf("webkit")&&!t("Edge"),Jb;
a:{var Kb="",Lb=function(){var a=Ea;if(Hb)return/rv\:([^\);]+)(\)|;)/.exec(a);if(Gb)return/Edge\/([\d\.]+)/.exec(a);if(Fb)return/\b(?:MSIE|rv)[: ]([^\);]+)(\)|;)/.exec(a);if(Ib)return/WebKit\/(\S+)/.exec(a);if(Eb)return/(?:Version)[ \/]?(\S+)/.exec(a)}();Lb&&(Kb=Lb?Lb[1]:"");if(Fb){var Mb,Nb=da.document;Mb=Nb?Nb.documentMode:void 0;if(null!=Mb&&Mb>parseFloat(Kb)){Jb=String(Mb);break a}}Jb=Kb}var Ob=Jb,Db={};
function Pb(a){return Cb(a,function(){for(var b=0,c=ta(String(Ob)).split("."),d=ta(String(a)).split("."),e=Math.max(c.length,d.length),f=0;0==b&&f<e;f++){var h=c[f]||"",k=d[f]||"";do{h=/(\d*)(\D*)(.*)/.exec(h)||["","","",""];k=/(\d*)(\D*)(.*)/.exec(k)||["","","",""];if(0==h[0].length&&0==k[0].length)break;b=ua(0==h[1].length?0:parseInt(h[1],10),0==k[1].length?0:parseInt(k[1],10))||ua(0==h[2].length,0==k[2].length)||ua(h[2],k[2]);h=h[3];k=k[3]}while(0==b)}return 0<=b})};var Qb=t("iPhone")&&!t("iPod")&&!t("iPad")||t("iPod"),Rb=t("iPad");/*

 Copyright 2015 The Lovefield Project Authors. All Rights Reserved.

 Licensed under the Apache License, Version 2.0 (the "License");
 you may not use this file except in compliance with the License.
 You may obtain a copy of the License at

     http://www.apache.org/licenses/LICENSE-2.0

 Unless required by applicable law or agreed to in writing, software
 distributed under the License is distributed on an "AS IS" BASIS,
 WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 See the License for the specific language governing permissions and
 limitations under the License.
*/
function Sb(){this.Gg=Ha()||Rb||Qb;this.bg=!(this.Gg||Fb&&!Pb(10));!Fb||Pb(11);this.Qg=Ia()||Ha()}var Tb;function x(){return new window.Map}function Ub(a){var b=0,c=Array(a.size);a.forEach(function(a,e){c[b++]=e});return c}function y(a){var b=0,c=Array(a.size);a.forEach(function(a){c[b++]=a});return c};/*

 Copyright 2014 The Lovefield Project Authors. All Rights Reserved.

 Licensed under the Apache License, Version 2.0 (the "License");
 you may not use this file except in compliance with the License.
 You may obtain a copy of the License at

     http://www.apache.org/licenses/LICENSE-2.0

 Unless required by applicable law or agreed to in writing, software
 distributed under the License is distributed on an "AS IS" BASIS,
 WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 See the License for the specific language governing permissions and
 limitations under the License.
*/
function Vb(a,b){this.ra=a;this.l=b||this.Fe()}var Wb=0;m=Vb.prototype;m.id=g("ra");m.Fe=function(){return{}};m.rf=g("l");m.Ia=function(){return{id:this.ra,value:this.rf()}};m.lb=function(a){return"#"==a.substr(-1)?this.ra:null};function Xb(a){return new Vb(a.id,a.value)}function Yb(a){return new Vb(Wb++,a||{})}function Zb(a){if(null==a)return null;a=new Uint8Array(a);for(var b="",c=0;c<a.length;++c)var d=a[c].toString(16),b=b+(2>d.length?"0"+d:d);return b};var $b={};q("lf.TransactionType",$b);$b.READ_ONLY=0;$b.READ_WRITE=1;function z(a,b,c,d,e){this.rd=a;this.fg=b;this.Pg=c;this.Mf=d;this.Ef=e}q("lf.TransactionStats",z);z.prototype.Kg=g("rd");z.prototype.success=z.prototype.Kg;z.prototype.eg=g("fg");z.prototype.insertedRowCount=z.prototype.eg;z.prototype.Og=g("Pg");z.prototype.updatedRowCount=z.prototype.Og;z.prototype.Lf=g("Mf");z.prototype.deletedRowCount=z.prototype.Lf;z.prototype.Df=g("Ef");z.prototype.changedTableCount=z.prototype.Df;function ac(a,b){this.td=a;this.Pa=b||null;this.O=w();this.rd=!1;this.ya=null}ac.prototype.ka=function(){return(0==this.td?this.pc():bc(this)).then(function(a){this.rd=!0;return a}.bind(this))};function bc(a){try{cc(a.Pa)}catch(b){return $a(b)}return dc(a).then(function(a){this.Pa.ka();return a}.bind(a))}function dc(a){ec(a);fc(a);return a.pc()}
function ec(a){a.Pa.fb.forEach(function(a,c){c=this.Pa.da().get(c);c=this.G(c.getName(),c.ib.bind(c),0);var b=y(a.wa).map(function(a){return a.id()});0<b.length&&c.remove(b).pe(this.Oe,this);a=y(a.la).map(function(a){return a[1]}).concat(y(a.va));c.put(a).pe(this.Oe,this)},a)}function fc(a){gc(a.Pa).forEach(function(a){var b=this.G(a.getName(),Xb,1);b.remove([]);b.put(a.Ia())},a)}ac.prototype.Oe=function(a){this.O.reject(a)};
ac.prototype.X=function(){if(null===this.ya)if(this.rd)if(0==this.td)this.ya=new z(!0,0,0,0,0);else{var a=0,b=0,c=0,d=0;this.Pa.fb.forEach(function(e){d++;a+=e.va.size;c+=e.la.size;b+=e.wa.size});this.ya=new z(!0,a,c,b,d)}else this.ya=new z(!1,0,0,0,0);return this.ya};function hc(a){this.Hg=a}hc.prototype.toString=g("Hg");var ic=new hc("backstore"),jc=new hc("cache"),kc=new hc("indexstore"),lc=new hc("engine"),mc=new hc("runner"),nc=new hc("observerregistry"),A=new hc("schema");function B(a){return n(a)?new window.Set(a):new window.Set}function C(a){var b=0,c=Array(a.size);a.forEach(function(a){c[b++]=a});return c}function oc(a,b){if(b.size>a.size)return!1;var c=!0;b.forEach(function(b){c=c&&a.has(b)});return c};function pc(a,b){this.ra=a;this.l=b||{}}function qc(a){var b=B();a.forEach(function(a){b.add(a>>9)});return C(b)}pc.prototype.V=g("ra");function rc(a,b){b.forEach(function(a){this.l[a.id()]=a.Ia()},a)}function sc(a,b){b.forEach(function(a){delete this.l[a]},a)}pc.prototype.Ia=function(){return{id:this.ra,value:JSON.stringify(this.l)}};function tc(a){return new pc(a.id,JSON.parse(a.value))};function uc(a,b,c){this.Y=a;this.Eb=b;this.jf=c}m=uc.prototype;m.get=function(a){if(0==a.length)return this.Qd();var b=this.Eb;return vc(this,a).then(function(c){return a.map(function(a){var d=c.get(a>>9);return b(d.l[a])})})};function vc(a,b){var c=x(),d=w();a=qc(b).map(function(a){return new u(function(b,d){var e;try{e=this.Y.get(a)}catch(p){d(p);return}e.onerror=d;e.onsuccess=function(a){a=tc(a.target.result);c.set(a.V(),a);b()}},this)},a);cb(a).then(function(){d.resolve(c)});return d.ha}
m.Qd=function(){return new u(function(a,b){var c=[],d;try{d=this.Y.openCursor()}catch(e){b(e);return}d.onerror=b;d.onsuccess=function(){var b=d.result;if(b){var f=tc(b.value).l,h;for(h in f)c.push(this.Eb(f[h]));b.continue()}else a(c)}.bind(this)},this)};m.Rb=function(a){return new u(function(b,c){var d;try{d=a()}catch(e){c(e);return}d.onsuccess=b;d.onerror=c},this)};
m.put=function(a){if(0==a.length)return v();var b=x();a.forEach(function(a){var c=a.id()>>9,e=b.get(c)||null;null===e&&(e=this.jf(this.Y.name,c));rc(e,[a]);b.set(c,e)},this);a=y(b).map(function(a){return this.Rb(function(){return this.Y.put(a.Ia())}.bind(this))},this);return cb(a)};
m.remove=function(a){if(0==a.length)return this.Rb(function(){return this.Y.clear()}.bind(this));var b=x();a.forEach(function(a){var c=a>>9,e=b.get(c)||null;null===e&&(e=this.jf(this.Y.name,c));sc(e,[a]);b.set(c,e)},this);a=y(b).map(function(a){return this.Rb(function(){return 0==Object.keys(a.l).length?this.Y.delete(a.V()):this.Y.put(a.Ia())}.bind(this))},this);return cb(a)};function wc(a,b,c){a=a.b(jc);var d=[c<<9,(c+1<<9)-1];b=a.Sa(b,d[0],d[1]);c=new pc(c);rc(c,b);return c}
function xc(a,b){return new pc(b)};function yc(a){this.U=a.b(jc);this.B=a.b(kc);this.g=a.b(A)}yc.prototype.update=function(a){a.forEach(function(a){zc(this,a);Ac(this,a)},this)};function Ac(a,b){var c=b.getName();b.wa.forEach(function(a,b){this.U.remove(c,b)},a);b.va.forEach(function(a){this.U.set(c,a)},a);b.la.forEach(function(a){this.U.set(c,a[1])},a)}function zc(a,b){var c=a.g.table(b.getName());Bc(b).forEach(function(a){Cc(this,c,a)},a)}
function Cc(a,b,c){var d=a.B.jc.get(b.getName())||[],e=0;d.forEach(function(a){try{Dc(a,c),e++}catch(h){throw d.slice(0,e).forEach(function(a){Dc(a,[c[1],c[0]])},this),h;}},a)}function Dc(a,b){var c=null===b[1]?void 0:b[1].lb(a.getName()),d=null===b[0]?void 0:b[0].lb(a.getName());if(!n(d)&&n(c))a.add(c,b[1].id());else if(n(d)&&n(c)){if(null===c||null===d){if(c==d)return}else if(0==a.gb().compare(d,c))return;a.add(c,b[1].id());a.remove(d,b[0].id())}else n(d)&&!n(c)&&a.remove(d,b[0].id())};var Ec={};q("lf.ConstraintAction",Ec);Ec.RESTRICT=0;Ec.CASCADE=1;var Fc={};q("lf.ConstraintTiming",Fc);Fc.IMMEDIATE=0;Fc.DEFERRABLE=1;var Gc={};q("lf.Order",Gc);Gc.DESC=0;Gc.ASC=1;var Hc={};q("lf.Type",Hc);Hc.ARRAY_BUFFER=0;Hc.BOOLEAN=1;Hc.DATE_TIME=2;Hc.INTEGER=3;Hc.NUMBER=4;Hc.STRING=5;Hc.OBJECT=6;var Ic={0:null,1:!1,2:Object.freeze(new Date(0)),3:0,4:0,5:"",6:null};q("lf.type.DEFAULT_VALUES",Ic);function D(a,b){this.code=a;this.message="http://google.github.io/lovefield/error_lookup/src/error_lookup.html?c="+a;if(1<arguments.length)for(var c=1;c<=Math.min(4,arguments.length-1);++c)this.message+="&p"+(c-1)+"="+encodeURIComponent(String(arguments[c]).slice(0,64))}r(D,Error);function Jc(){this.$=x();this.size=0}m=Jc.prototype;m.has=function(a){return this.$.has(a)};m.set=function(a,b){var c=this.$.get(a)||null;null===c&&(c=B(),this.$.set(a,c));c.has(b)||(c.add(b),this.size++);return this};m.Ub=function(a,b){var c=this.$.get(a)||null;null===c&&(c=B(),this.$.set(a,c));b.forEach(function(a){c.has(a)||(c.add(a),this.size++)},this);return this};m.Wd=function(a){a.keys().forEach(function(b){var c=a.get(b);this.Ub(b,c)},this);return this};
m.delete=function(a,b){var c=this.$.get(a)||null;if(null===c)return!1;if(b=c.delete(b))--this.size,0==c.size&&this.$.delete(a);return b};m.get=function(a){a=this.$.get(a)||null;return null===a?null:C(a)};m.clear=function(){this.$.clear();this.size=0};m.keys=function(){return Ub(this.$)};m.values=function(){var a=[];this.$.forEach(function(b){a.push.apply(a,C(b))});return a};function Kc(a){this.B=a.b(kc);this.g=a.b(A);this.U=a.b(jc);this.Wc=null}function Lc(a,b,c){var d=b.Kb.sg;c.forEach(function(a){d.forEach(function(b){if(null==a.l[b.getName()])throw new D(202,b.j());},this)},a)}function Mc(a,b,c,d){b.Kb.Pd.forEach(function(a){a.timing==d&&Nc(this,a,c)},a)}function Nc(a,b,c){var d=Pc(a,b);c.forEach(function(a){if(Qc(a[0],a[1],b.name)&&(a=a[1].lb(b.name),null!==a&&!d.hb(a)))throw new D(203,b.name);},a)}
function Pc(a,b){null===a.Wc&&(a.Wc=x());var c=a.Wc.get(b.name)||null;null===c&&(c=a.g.table(b.Ua)[b.Fc].Ba(),c=a.B.get(c.j()),a.Wc.set(b.name,c));return c}function Qc(a,b,c){return(null===a?null!==b:null===b)||a.lb(c)!=b.lb(c)}function Rc(a,b,c,d){b=Sc(a.g.info(),b.getName(),0);null!==b&&(b=b.filter(function(a){return a.timing==d}),0!=b.length&&Tc(a,b,c,function(a,b,c){if(b.hb(c))throw new D(203,a.name);}))}
function Uc(a,b,c){b=Sc(a.g.info(),b.getName(),1);if(null===b)return null;var d=new Jc;Tc(a,b,c,function(a,b,c){b=b.get(c);0<b.length&&d.Ub(a.Be,b)});return d}function Vc(a,b,c){var d=new Jc;Tc(a,c,b,function(a,b,c,k){b.get(c).forEach(function(b){d.set(b,{Nd:a,xg:k[1]})})});return d}function Tc(a,b,c,d){b.forEach(function(a){var b=this.B.get(a.name),e=Pc(this,a);c.forEach(function(c){if(Qc(c[0],c[1],e.getName())){var f=c[0].lb(e.getName());d(a,b,f,c)}},this)},a)}
function Wc(a,b,c,d){0!=c.length&&(c=c.map(function(a){return[null,a]}),Mc(a,b,c,d))}function Xc(a,b,c,d){0!=c.length&&(Mc(a,b,c,d),Rc(a,b,c,d))}function Yc(a,b,c,d){0!=c.length&&(c=c.map(function(a){return[a,null]}),Rc(a,b,c,d))}
function Zc(a,b,c){var d={oe:[],lf:new Jc},e=new Jc;e.Ub(b.getName(),c.map(function(a){return a.id()}));do{var f=new Jc;e.keys().forEach(function(a){var b=this.g.table(a);a=e.get(a).map(function(a){return[this.U.get(a),null]},this);b=Uc(this,b,a);null!==b&&(d.oe.unshift.apply(d.oe,b.keys()),f.Wd(b))},a);e=f;d.lf.Wd(e)}while(0<e.size);return d};function $c(a){this.va=x();this.la=x();this.wa=x();this.w=a}m=$c.prototype;m.getName=g("w");m.add=function(a){if(this.wa.has(a.id())){var b=[this.wa.get(a.id()),a];this.la.set(a.id(),b);this.wa.delete(a.id())}else this.va.set(a.id(),a)};m.modify=function(a){var b=a[1],c=a[0].id();this.va.has(c)?this.va.set(c,b):(this.la.has(c)&&(a=[this.la.get(a[0].id())[0],b]),this.la.set(c,a))};
m.delete=function(a){if(this.va.has(a.id()))this.va.delete(a.id());else if(this.la.has(a.id())){var b=this.la.get(a.id())[0];this.la.delete(a.id());this.wa.set(a.id(),b)}else this.wa.set(a.id(),a)};m.Wd=function(a){a.va.forEach(function(a){this.add(a)},this);a.la.forEach(function(a){this.modify(a)},this);a.wa.forEach(function(a){this.delete(a)},this)};
function Bc(a){var b=[];a.va.forEach(function(a){b.push([null,a])});a.la.forEach(function(a){b.push(a)});a.wa.forEach(function(a){b.push([a,null])});return b}m.toString=function(){return"["+Ub(this.va).toString()+"], ["+Ub(this.la).toString()+"], ["+Ub(this.wa).toString()+"]"};function ad(a){var b=new $c(a.w);a.va.forEach(function(a){b.delete(a)});a.wa.forEach(function(a){b.add(a)});a.la.forEach(function(a){b.modify([a[1],a[0]])});return b}
m.hg=function(){return 0==this.va.size&&0==this.wa.size&&0==this.la.size};function bd(a,b){this.aa=x();b.forEach(function(a){this.aa.set(a.getName(),a)},this);this.g=a.b(A);this.U=a.b(jc);this.B=a.b(kc);this.za=new Kc(a);this.cd=new yc(a);this.fb=x()}function gc(a){var b=[];Ub(a.fb).map(function(a){return this.aa.get(a)},a).forEach(function(a){a.Bb()&&(a.Ca().forEach(function(a){b.push(this.B.get(a.j()))},this),b.push(this.B.get(a.getName()+".#")))},a);return b}m=bd.prototype;m.da=g("aa");
m.zb=function(a,b){cd(this,a);Lc(this.za,a,b);Wc(this.za,a,b,0);for(var c=0;c<b.length;c++)dd(this,a,[null,b[c]])};function dd(a,b,c){var d=b.getName(),e=a.fb.get(d)||new $c(d);a.fb.set(d,e);try{Cc(a.cd,b,c)}catch(h){throw h;}b=c[0];var f=c[1];null===b&&null!==f?(a.U.set(d,f),e.add(f)):null!==b&&null!==f?(a.U.set(d,f),e.modify(c)):null!==b&&null===f&&(a.U.remove(d,b.id()),e.delete(b))}
m.update=function(a,b){cd(this,a);Lc(this.za,a,b);b=b.map(function(a){return[this.U.get(a.id()),a]},this);ed(this,a,b);Xc(this.za,a,b,0);b.forEach(function(b){dd(this,a,b)},this)};m.Rd=function(a,b){cd(this,a);Lc(this.za,a,b);for(var c=0;c<b.length;c++){var d=b[c],e=null,f,h=a.Kb.nd;if(null===h)f=null;else{f=this.za;var h=h.j(),k=d.lb(h);f=f.B.get(h).get(k);f=0==f.length?null:f[0]}null!=f?(e=this.U.get(f),d.ra=f,Xc(this.za,a,[[e,d]],0)):Wc(this.za,a,[d],0);dd(this,a,[e,d])}};
m.remove=function(a,b){cd(this,a);fd(this,a,b);Yc(this.za,a,b,0);for(var c=0;c<b.length;c++)dd(this,a,[b[c],null])};function ed(a,b,c){b=Sc(a.g.info(),b.getName(),1);if(null!==b){var d=Vc(a.za,c,b);d.keys().forEach(function(a){d.get(a).forEach(function(b){var c=this.g.table(b.Nd.Be),d=this.U.get(a),e=c.ib(d.Ia());e.l[b.Nd.tb]=b.xg.l[b.Nd.Fc];dd(this,c,[d,e])},this)},a)}}
function fd(a,b,c){if(null!==Sc(a.g.info(),b.getName(),1)){b=Zc(a.za,b,c);var d=b.lf;b.oe.forEach(function(a){var b=this.g.table(a);a=d.get(a).map(function(a){return this.U.get(a)},this);Yc(this.za,b,a,0);a.forEach(function(a){dd(this,b,[a,null])},this)},a)}}function cc(a){a.fb.forEach(function(a){var b=this.aa.get(a.getName());Wc(this.za,b,y(a.va),1);Yc(this.za,b,y(a.wa),1);Xc(this.za,b,y(a.la),1)},a)}m.ka=aa();m.Hb=function(){var a=y(this.fb).map(function(a){return ad(a)});this.cd.update(a)};
function cd(a,b){if(!a.aa.has(b.getName()))throw new D(106,b.getName());};function E(a,b,c,d){this.from=a;this.m=b;this.ea=this.from==F?!1:c;this.na=this.m==F?!1:d}var F=new (aa());E.prototype.toString=function(){return(this.ea?"(":"[")+(this.from==F?"unbound":this.from)+", "+(this.m==F?"unbound":this.m)+(this.na?")":"]")};function gd(a){if(hd(a))return[];var b=null,c=null;a.from==F||(b=new E(F,a.from,!1,!a.ea));a.m==F||(c=new E(a.m,F,!a.na,!1));return[b,c].filter(function(a){return null!==a})}E.prototype.reverse=function(){return new E(this.m,this.from,this.na,this.ea)};
function id(a,b){var c=jd(a.from,b.from,!0,a.ea,b.ea);if(0==c)return!0;var d=-1==c?a:b;a=1==c?a:b;return d.m==F||d.m>a.from||d.m==a.from&&!d.na&&!a.ea}function kd(){return new E(F,F,!1,!1)}function hd(a){return a.from==F&&a.m==F}function ld(a){return a.from==a.m&&a.from!=F&&!a.ea&&!a.na}E.prototype.contains=function(a){var b=this.m==F||a<this.m||a==this.m&&!this.na;return(this.from==F||a>this.from||a==this.from&&!this.ea)&&b};
function jd(a,b,c,d,e){function f(a){return c?a:1==a?-1:1}d=d||!1;e=e||!1;return a==F?b==F?(d?!e:e)?d?f(1):f(-1):0:f(-1):b==F?f(1):a<b?-1:a==b?(d?!e:e)?d?f(1):f(-1):0:1}function md(a,b){var c=jd(a.from,b.from,!0,a.ea,b.ea);0==c&&(c=jd(a.m,b.m,!1,a.na,b.na));return c}function nd(a){if(0==a.length)return[];a.sort(md);for(var b=Array(a.length+1),c=0;c<b.length;c++)b[c]=0==c?new E(F,a[c].from,!1,!0):c==b.length-1?new E(a[c-1].m,F,!0,!1):new E(a[c-1].m,a[c].from,!0,!0);return b};function od(a){this.ic=[];n(a)&&this.add(a)}od.prototype.toString=function(){return this.ic.map(function(a){return a.toString()}).join(",")};od.prototype.hb=function(a){return this.ic.some(function(b){return b.contains(a)})};od.prototype.yb=g("ic");
od.prototype.add=function(a){if(0!=a.length)if(a=this.ic.concat(a),1==a.length)this.ic=a;else{a.sort(md);for(var b=[],c=a[0],d=1;d<a.length;++d)if(id(c,a[d])){var e=a[d],f=kd();if(c.from!=F&&e.from!=F){var h=jd(c.from,e.from,!0);1!=h?(f.from=c.from,f.ea=0!=h?c.ea:c.ea&&e.ea):(f.from=e.from,f.ea=e.ea)}c.m!=F&&e.m!=F&&(h=jd(c.m,e.m,!1),-1!=h?(f.m=c.m,f.na=0!=h?c.na:c.na&&e.na):(f.m=e.m,f.na=e.na));c=f}else b.push(c),c=a[d];b.push(c);this.ic=b}};
function pd(a,b){var c=[];a.yb().map(function(a){return b.yb().map(function(b){var c;if(id(a,b)){c=kd();var d=jd(a.from,b.from,!0),d=0==d?a.ea?a:b:-1!=d?a:b;c.from=d.from;c.ea=d.ea;a.m==F||b.m==F?b=a.m==F?b:a:(d=jd(a.m,b.m,!1),b=0==d?a.na?a:b:-1==d?a:b);c.m=b.m;c.na=b.na}else c=null;return c})}).forEach(function(a){c=c.concat(a)});return new od(c.filter(function(a){return null!==a}))};function G(a,b){this.entries=a;this.L=B(b);this.Xa=null}G.prototype.s=function(){return C(this.L)};function qd(a){return a.entries.map(function(a){return a.ua.l})}function rd(a){return a.entries.map(function(a){return a.ua.id()})}function sd(a,b){return a.Xa.get(b.j())}var td=null;function ud(){null===td&&(td=new G([],[]));return td}
function vd(a){if(0==a.length)return ud();for(var b=a.reduce(function(a,b){return a+b.entries.length},0),c=Array(b),d=0,b=a.map(function(a){var b=x();a.entries.forEach(function(a){c[d++]=a;b.set(a.id,a)});return b}),e=x(),f=0;f<c.length;f++)b.every(function(a){return a.has(c[f].id)})&&e.set(c[f].id,c[f]);return new G(y(e),C(a[0].L))}function wd(a){if(0==a.length)return ud();var b=x();a.forEach(function(a){a.entries.forEach(function(a){b.set(a.id,a)})});return new G(y(b),C(a[0].L))}
function xd(a,b){var c=1<b.length;a=a.map(function(a){return new yd(a,c)});return new G(a,b)}function yd(a,b){this.ua=a;this.id=zd++;this.Td=b}var zd=0;function H(a,b){var c=b.Ja;return null!==c&&a.ua.l.hasOwnProperty(c)?a.ua.l[c]:a.Td?a.ua.l[Ad(b.G())][b.getName()]:a.ua.l[b.getName()]}function Bd(a,b,c){var d=b.Ja;if(null!=d)a.ua.l[d]=c;else if(a.Td){var d=Ad(b.G()),e=a.ua.l[d];null==e&&(e={},a.ua.l[d]=e);e[b.getName()]=c}else a.ua.l[b.getName()]=c}
function Cd(a,b,c,d){function e(a,b){if(a.Td){a=a.ua.l;for(var c in a)f[c]=a[c]}else f[b[0]]=a.ua.l}var f={};e(a,b);e(c,d);a=new Vb(-1,f);return new yd(a,!0)};q("lf.bind",function(a){return new Dd(a)});function Dd(a){this.fa=a}q("lf.Binder",Dd);Dd.prototype.Ba=g("fa");function Ed(){this.Ue=Fd();var a=Gd();this.Mb=x();this.Mb.set(1,Hd());this.Mb.set(2,Id());this.Mb.set(4,a);this.Mb.set(3,a);this.Mb.set(5,Jd());this.Mb.set(6,Kd())}var Ld;function Md(){null!=Ld||(Ld=new Ed);return Ld}function Nd(a,b,c){a=a.Mb.get(b)||null;if(null===a)throw new D(550);c=a.get(c)||null;if(null===c)throw new D(550);return c}
function Fd(){function a(a){return a}var b=x();b.set(1,function(a){return null===a?null:a?1:0});b.set(2,function(a){return null===a?null:a.getTime()});b.set(3,a);b.set(4,a);b.set(5,a);return b}function Hd(){var a=x();a.set("eq",function(a,c){return a==c});a.set("neq",function(a,c){return a!=c});return a}
function Gd(){var a=Hd();a.set("between",function(a,c){return null===a||null===c[0]||null===c[1]?!1:a>=c[0]&&a<=c[1]});a.set("gte",function(a,c){return null===a||null===c?!1:a>=c});a.set("gt",function(a,c){return null===a||null===c?!1:a>c});a.set("in",function(a,c){return-1!=c.indexOf(a)});a.set("lte",function(a,c){return null===a||null===c?!1:a<=c});a.set("lt",function(a,c){return null===a||null===c?!1:a<c});return a}
function Jd(){var a=Gd();a.set("match",function(a,c){return null===a||null===c?!1:(new RegExp(c)).test(a)});return a}function Kd(){var a=x();a.set("eq",function(a,c){if(null!==c)throw new D(550);return null===a});a.set("neq",function(a,c){if(null!==c)throw new D(550);return null!==a});return a}
function Id(){var a=x();a.set("between",function(a,c){return null===a||null===c[0]||null===c[1]?!1:a.getTime()>=c[0].getTime()&&a.getTime()<=c[1].getTime()});a.set("eq",function(a,c){return(null===a?-1:a.getTime())==(null===c?-1:c.getTime())});a.set("gte",function(a,c){return null===a||null===c?!1:a.getTime()>=c.getTime()});a.set("gt",function(a,c){return null===a||null===c?!1:a.getTime()>c.getTime()});a.set("in",function(a,c){return c.some(function(b){return b.getTime()==a.getTime()})});a.set("lte",
function(a,c){return null===a||null===c?!1:a.getTime()<=c.getTime()});a.set("lt",function(a,c){return null===a||null===c?!1:a.getTime()<c.getTime()});a.set("neq",function(a,c){return(null===a?-1:a.getTime())!=(null===c?-1:c.getTime())});return a};function I(){this.h=this.C=null}var Od=[];I.prototype.getParent=g("C");I.prototype.Za=function(){for(var a=this;null!==a.getParent();)a=a.getParent();return a};function Pd(a){for(var b=0;null!==a.getParent();)b++,a=a.getParent();return b}function J(a){return a.h||Od}function Qd(a,b){return J(a)[b]||null}function Rd(a,b,c){b.C=a;null===a.h?a.h=[b]:a.h.splice(c,0,b)}function L(a,b){b.C=a;null===a.h?a.h=[b]:a.h.push(b)}
function Sd(a,b){var c=a.h&&a.h[b];return c?(c.C=null,a.h.splice(b,1),0==a.h.length&&(a.h=null),c):null}I.prototype.removeChild=function(a){return Sd(this,J(this).indexOf(a))};function Td(a,b,c){Qd(a,c).C=null;b.C=a;a.h[c]=b}function Ud(a,b,c){!1!==b.call(c,a)&&J(a).forEach(function(a){Ud(a,b,c)})};function Vd(){I.call(this);this.ra=Wd++}r(Vd,I);var Wd=0;Vd.prototype.V=g("ra");function Xd(a,b,c){Vd.call(this);this.I=a;this.value=b;this.D=c;this.sc=Nd(Md(),this.I.H(),this.D);this.Ta=!1;this.ac=b}r(Xd,Vd);m=Xd.prototype;m.Lb=function(){var a=new Xd(this.I,this.value,this.D);a.ac=this.ac;a.qd(this.Ta);var b=this.V();a.ra=b;return a};m.jb=function(a){return null!=a?(a.push(this.I),a):[this.I]};m.s=function(a){a=null!=a?a:B();a.add(this.I.G());return a};m.qd=ca("Ta");
function Yd(a){var b=!1;a.value instanceof Dd||(b="array"==fa(a.value)?!a.value.some(function(a){return a instanceof Dd}):!0);if(!b)throw new D(501);}m.eval=function(a){Yd(this);if("in"==this.D)return Zd(this,a);var b=a.entries.filter(function(a){return this.sc(H(a,this.I),this.value)!=this.Ta},this);return new G(b,a.s())};
m.bind=function(a){if(this.ac instanceof Dd){var b=this.ac.Ba();if(a.length<=b)throw new D(510);this.value=a[b]}else"array"==fa(this.ac)&&(this.value=this.ac.map(function(b){if(b instanceof Dd){var c=b.Ba();if(a.length<=c)throw new D(510);return a[b.Ba()]}return b}))};function Zd(a,b){var c=B(a.value),d=function(a){return null===a?!1:c.has(a)!=this.Ta}.bind(a);a=b.entries.filter(function(a){return d(H(a,this.I))},a);return new G(a,b.s())}
m.toString=function(){return"value_pred("+this.I.j()+" "+this.D+(this.Ta?"(complement)":"")+" "+this.value+")"};m.fd=function(){Yd(this);return null!==this.value&&("between"==this.D||"in"==this.D||"eq"==this.D||"gt"==this.D||"gte"==this.D||"lt"==this.D||"lte"==this.D)};
m.qe=function(){var a=null;if("between"==this.D)a=new E($d(this,this.value[0]),$d(this,this.value[1]),!1,!1);else{if("in"==this.D)return a=this.value.map(function(a){return new E(a,a,!1,!1)}),new od(this.Ta?nd(a):a);a=$d(this,this.value);a="eq"==this.D?new E(a,a,!1,!1):"gte"==this.D?new E(a,F,!1,!1):"gt"==this.D?new E(a,F,!0,!1):"lte"==this.D?new E(F,a,!1,!1):new E(F,a,!1,!0)}return new od(this.Ta?gd(a):[a])};function $d(a,b){return 2==a.I.H()?b.getTime():b};function ae(a){this.ba=a;this.Sc=this.Fa=null}function be(a,b){null===a.Fa&&null!=a.u&&(a.Fa=ce(a.u));return a.Fa.get(b)||null}function ce(a){var b=x();Ud(a,function(a){b.set(a.V(),a)});return b}function ee(a,b){b.u&&(a.u=b.u.Lb());a.Sc=b}ae.prototype.bind=function(){return this};function fe(a,b){a=a.u;null!=a&&Ud(a,function(a){a instanceof Xd&&a.bind(b)})};function ge(a){ae.call(this,a)}r(ge,ae);function he(a){var b="";a.forEach(function(c,d){b+=c.I.j()+" ";b+=1==c.order?"ASC":"DESC";d<a.length-1&&(b+=", ")});return b}ge.prototype.da=function(){return B(this.from)};ge.prototype.clone=function(){var a=new ge(this.ba);ee(a,this);this.f&&(a.f=this.f.slice());this.from&&(a.from=this.from.slice());a.W=this.W;a.K=this.K;this.M&&(a.M=this.M.slice());this.qa&&(a.qa=this.qa.slice());this.Qb&&(a.Qb=this.Qb);this.Wb&&(a.Wb=this.Wb);a.ab=this.ab;return a};
ge.prototype.bind=function(a){ge.eb.bind.call(this,a);null!=this.Qb&&(this.W=a[this.Qb.Ba()]);null!=this.Wb&&(this.K=a[this.Wb.Ba()]);fe(this,a);return this};function ie(a,b){this.Ga=a;this.aa=b}ie.prototype.Za=g("Ga");ie.prototype.da=g("aa");function je(a){var b=B();a.forEach(function(a){a.da().forEach(b.add.bind(b))});return b};function ke(a,b){this.global=a;this.Na=a.b(ic);this.od=b.map(function(a){return a.context});this.df=b.map(function(a){return a.de});this.Hd=je(this.df);this.re=le(this);this.Cb=w()}function le(a){return a.od.some(function(a){return!(a instanceof ge)})?1:0}m=ke.prototype;
m.exec=function(){function a(){var f=d.shift();if(f){var h=e[c.length];return f.Za().exec(b,h).then(function(b){c.push(b[0]);return a()})}return v()}var b=0==this.re?void 0:new bd(this.global,this.Hd),c=[],d=this.df.slice(),e=this.od;return a().then(function(){this.ja=this.Na.Db(this.re,C(this.Hd),b);return this.ja.ka()}.bind(this)).then(function(){this.ae(c);return c}.bind(this),function(a){null!=b&&b.Hb();throw a;})};m.H=g("re");m.da=g("Hd");m.V=function(){return ka(this)};m.ae=aa();
m.X=function(){var a=null;null!=this.ja&&(a=this.ja.X());return null===a?new z(!1,0,0,0,0):a};function me(a,b){ke.call(this,a,b);this.Gb=a.b(nc)}r(me,ke);me.prototype.getPriority=l(0);me.prototype.ae=function(a){this.od.forEach(function(b,c){ne(this.Gb,b,a[c])},this)};function oe(a,b){this.c=a;this.Gb=a.b(nc);this.Ha=a.b(mc);this.cd=new yc(a);this.fb=b;var c=a.b(A);a=this.fb.map(function(a){return c.table(a.getName())});this.aa=B(a);this.Cb=w()}m=oe.prototype;m.exec=function(){this.cd.update(this.fb);this.Ic();return v()};m.H=l(1);m.da=g("aa");m.V=function(){return ka(this)};m.getPriority=l(1);m.Ic=function(){var a=pe(this.Gb,this.aa);0!=a.length&&(a=new me(this.c,a),qe(this.Ha,a))};function re(a){this.c=a;this.Na=a.b(ic);this.Ha=a.b(mc)}re.prototype.Zd=function(a){a=new oe(this.c,a);qe(this.Ha,a)};function M(a,b){this.Yb=a;this.i=b;this.Wa=x()}q("lf.backstore.FirebaseRawBackStore",M);M.prototype.Zc=g("i");M.prototype.$c=function(){throw new D(351);};function se(a,b){var c=w(),d=a;b.length&&(d=a.child(b));d.once("value",function(a){c.resolve(a.val())},function(a){c.reject(a)});return c.ha}function te(a,b,c){function d(a){a?e.reject(a):e.resolve()}c=c||!1;var e=w();c?a.set(b,d):a.update(b,d);return e.ha}
M.prototype.Da=function(a){return se(this.i,"@rev/R").then(function(a){this.Qa=a;return se(this.i,"@table")}.bind(this)).then(function(b){var c=0,d;for(d in b)this.Wa.set(d,b[d]),b[d]>c&&(c=b[d]);a.oa().forEach(function(a){this.Wa.has(a.getName())||(b[a.getName()]=++c)},this);d=this.i.child("@table");return te(d,b)}.bind(this))};
function ue(a,b,c){var d=a.Wa.get(b);return null!=d?function(){var a={},b=w();this.i.orderByChild("T").equalTo(d).once("value",function(d){d.forEach(function(b){var d=c(b.val());a[parseInt(b.key(),10)]=d});b.resolve(a)});return b.ha}.call(a).then(function(a){a["@rev"]={R:++this.Qa};return te(this.i,a)}.bind(a)):v()}M.prototype.qc=function(a){return ue(this,a,l(null)).then(function(){this.Wa.delete(a);return te(this.i.child("@table/"+a),null,!0)}.bind(this))};M.prototype.dropTable=M.prototype.qc;
M.prototype.nc=function(a,b,c){return ue(this,a,function(a){var d=a.P;d[b]=c;return{R:this.Qa+1,T:a.T,P:d}}.bind(this))};M.prototype.addTableColumn=M.prototype.nc;M.prototype.rc=function(a,b){return ue(this,a,function(a){var c=a.P;delete c[b];return{R:this.Qa+1,T:a.T,P:c}}.bind(this))};M.prototype.dropTableColumn=M.prototype.rc;M.prototype.Hc=function(a,b,c){return ue(this,a,function(a){var d=a.P;d[c]=d[b];delete d[b];return{R:this.Qa+1,T:a.T,P:d}}.bind(this))};M.prototype.renameTableColumn=M.prototype.Hc;
M.prototype.vb=function(){throw new D(351);};M.prototype.createRow=M.prototype.vb;M.prototype.yc=g("Yb");M.prototype.getVersion=M.prototype.yc;M.prototype.cc=function(a){var b=w();a=this.Wa.get(a);this.i.orderByChild("T").equalTo(a).once("value",function(a){var c=[];a.forEach(function(a){c.push(a.val().P)});b.resolve(c)});return b.ha};M.prototype.dump=function(){var a={},b=Ub(this.Wa).map(function(b){return this.cc(b).then(function(c){a[b]=c})}.bind(this));return cb(b).then(function(){return a})};
M.prototype.dump=M.prototype.dump;function ve(a,b,c){ac.call(this,b,c);this.i=a}r(ve,ac);ve.prototype.G=function(a){return this.i.wc(a)};
ve.prototype.pc=function(){if(0==this.td)return this.O.resolve(),this.O.ha;var a=this.Pa.fb;if(0==a.size)this.O.resolve();else{var b=this.i.Qa+1;this.i.Qa=b;var c={"@rev":{R:b}};a.forEach(function(a,e){var d=this.i.Wa.get(e);a.va.forEach(function(a,e){c[e]={R:b,T:d,P:a.l}});a.la.forEach(function(a,e){c[e]={R:b,T:d,P:a[1].l}});a.wa.forEach(function(a,b){c[b]=null})},this);this.i.i.update(c,function(c){null===c?this.O.resolve():(this.i.Qa=b-1,c=y(a).map(function(a){return we(this.i,a.getName())},this),
cb(c).then(this.O.reject.bind(this.O),this.O.reject.bind(this.O)))}.bind(this))}return this.O.ha};function xe(){this.Aa=x()}function ye(a,b){if(0==b.length)return y(a.Aa);var c=[];b.forEach(function(a){a=this.Aa.get(a)||null;null===a||c.push(a)},a);return c}xe.prototype.getData=g("Aa");xe.prototype.get=function(a){return v(ye(this,a))};function ze(a,b){b.forEach(function(a){this.Aa.set(a.id(),a)},a)}xe.prototype.put=function(a){ze(this,a);return v()};function Ae(a,b){0==b.length||b.length==a.Aa.size?a.Aa.clear():b.forEach(function(a){this.Aa.delete(a)},a)}
xe.prototype.remove=function(a){Ae(this,a);return v()};function Be(a){return 0==a.Aa.size?0:Ub(a.Aa).reduce(function(a,c){return a>c?a:c},0)};function Ce(a,b){this.g=a;this.yf=b;this.Gc=x();this.Qa=-1;this.L=x();this.Wa=x();this.Ed=null}m=Ce.prototype;
m.Da=function(a){this.i=this.yf.child(this.g.name());var b=a||function(){return v()};return se(this.i,"@db/version").then(function(a){return null===a?te(this.i,De(this),!0).then(function(){var a=new M(0,this.i);return b(a)}.bind(this)).then(function(){return this.Da()}.bind(this)):a==this.g.version()?se(this.i,"@rev/R").then(function(a){this.Qa=a;return se(this.i,"@table")}.bind(this)).then(function(a){for(var b in a)this.Wa.set(b,a[b]);a=this.g.oa().map(function(a){return we(this,a.getName())},this);
return cb(a)}.bind(this)).then(function(){Ee(this);Fe(this);return v()}.bind(this)):this.be(a,b).then(function(){return this.Da()}.bind(this))}.bind(this))};m.be=function(a,b){var c=new M(a,this.i);return c.Da(this.g).then(function(){return v()}.bind(this)).then(function(){return b(c)}).then(function(){var a=this.i.child("@db");return te(a,{version:this.g.version()},!0)}.bind(this))};
function Fe(a){a.i.off();a.i.on("child_removed",a.ug.bind(a));a.Fd&&(a.Fd.off(),a.Gc.clear());a.Fd=a.i.orderByChild("R").startAt(a.Qa+1);a.Fd.on("value",a.Zd.bind(a))}function Ee(a){Wb=y(a.L).map(function(a){return Be(a)}).reduce(function(a,c){return a>c?a:c},0)+1}m.ug=function(a){var b=a.val(),c=this.Gc.get(b.T)||null;null===c&&(c=B(),this.Gc.set(b.T,c));c.add(parseInt(a.key(),10))};
m.Zd=function(a){var b=a.child("@rev/R").val();null!=b&&b!=this.Qa&&(this.Qa=b,a=Ge(this,a),a.forEach(function(a){var b=this.L.get(a.getName()),c=Ub(a.wa);0<c.length&&Ae(b,c);var f=y(a.va);a.la.forEach(function(a){f.push(a[1])});ze(b,f)},this),0<a.length&&this.Cc(a),Fe(this))};
function Ge(a,b){var c=B(),d=x();a.Wa.forEach(function(a,b){var e=this.L.get(b),f=new $c(b);this.Gc.has(a)&&(b=C(this.Gc.get(a)),b.forEach(function(a){c.add(a)}),ye(e,b).forEach(function(a){f.delete(a)}));d.set(a,f)}.bind(a));b.forEach(function(a){if("@rev"!=a.key()){var b=parseInt(a.key(),10);if(!c.has(b)){var e=a.val();a=d.get(e.T);var k=this.L.get(a.getName()),e=this.g.table(a.getName()).ib({id:b,value:e.P});k.getData().has(b)?a.modify([ye(k,[b])[0],e]):a.add(e)}}}.bind(a));return y(d).filter(function(a){return!a.hg()})}
function we(a,b){var c=w(),d=a.Wa.get(b),e=a.g.table(b);a.i.orderByChild("T").equalTo(d).once("value",function(a){var d=new xe,f=[];a.forEach(function(a){f.push(e.ib({id:parseInt(a.key(),10),value:a.val().P}))});ze(d,f);this.L.set(b,d);c.resolve()}.bind(a));return c.ha}function De(a){var b={};b["@db"]={version:a.g.version()};b["@rev"]={R:1};a.Qa=1;b["@table"]={};a.g.oa().forEach(function(a,d){a=a.getName();b["@table"][a]=d;this.L.set(a,new xe);this.Wa.set(a,d)},a);return b}
m.Db=function(a,b,c){return new ve(this,a,c)};m.wc=function(a){var b=this.L.get(a)||null;if(null!==b)return b;throw new D(101,a);};m.close=aa();m.subscribe=ca("Ed");m.Cc=function(a){null!=this.Ed&&this.Ed(a)};function N(a,b,c,d){this.i=b;this.ja=c;this.Yb=a;this.Qc=d}q("lf.backstore.IndexedDBRawBackStore",N);N.prototype.Zc=g("i");N.prototype.getRawDBInstance=N.prototype.Zc;N.prototype.$c=g("ja");N.prototype.getRawTransaction=N.prototype.$c;N.prototype.qc=function(a){return new u(function(b,c){try{this.i.deleteObjectStore(a)}catch(d){c(d);return}b()},this)};N.prototype.dropTable=N.prototype.qc;
function He(a,b,c,d){return new u(function(a,f){var e;try{var k=this.ja.objectStore(b);e=k.openCursor()}catch(p){f(p);return}e.onsuccess=function(){var b=e.result;b?(c(b),b.continue()):(d(k),a())};e.onerror=f},a)}function Ie(a){return a instanceof ArrayBuffer?Zb(a):a instanceof Date?a.getTime():a}
function Je(a,b,c){function d(a){var b=tc(a.value),d=b.l,e;for(e in d){var f=Xb(d[e]);c(f);d[e]=f.Ia()}a.update(b.Ia())}function e(a){var b=Xb(a.value);c(b);a.update(b.Ia())}return He(a,b,a.Qc?d:e,aa())}N.prototype.nc=function(a,b,c){var d=Ie(c);return Je(this,a,function(a){a.l[b]=d})};N.prototype.addTableColumn=N.prototype.nc;N.prototype.rc=function(a,b){return Je(this,a,function(a){delete a.l[b]})};N.prototype.dropTableColumn=N.prototype.rc;
N.prototype.Hc=function(a,b,c){return Je(this,a,function(a){a.l[c]=a.l[b];delete a.l[b]})};N.prototype.renameTableColumn=N.prototype.Hc;function Ke(a,b){var c=[];return new u(function(a,e){var d;try{d=this.ja.objectStore(b).openCursor()}catch(h){e(h);return}d.onsuccess=function(){var b=d.result;if(b){if(this.Qc){var e=tc(b.value).l,f;for(f in e)c.push(e[f])}else c.push(b.value);b.continue()}else a(c)}.bind(this);d.onerror=e},a)}N.prototype.vb=function(a){var b={},c;for(c in a)b[c]=Ie(a[c]);return Yb(b)};
N.prototype.createRow=N.prototype.vb;N.prototype.yc=g("Yb");N.prototype.getVersion=N.prototype.yc;N.prototype.dump=function(){for(var a=this.i.objectStoreNames,b=[],c=0;c<a.length;++c){var d=a.item(c);b.push(this.cc(d))}return cb(b).then(function(b){var c={};b.forEach(function(b,d){c[a.item(d)]=b});return c})};N.prototype.dump=N.prototype.dump;N.prototype.cc=function(a){return Ke(this,a).then(function(a){return a.map(function(a){return a.value})})};function Le(a,b){this.Y=a;this.Eb=b}Le.prototype.get=function(a){if(0==a.length)return null!=this.Y.getAll?Me(this):Ne(this);a=a.map(function(a){return new u(function(b,d){var c;try{c=this.Y.get(a)}catch(f){d(f);return}c.onerror=d;c.onsuccess=function(a){b(this.Eb(a.target.result))}.bind(this)},this)},this);return cb(a)};
function Ne(a){return new u(function(a,c){var b=[],e;try{e=this.Y.openCursor()}catch(f){c(f);return}e.onerror=c;e.onsuccess=function(){var c=e.result;c?(b.push(this.Eb(c.value)),c.continue()):a(b)}.bind(this)},a)}function Me(a){return new u(function(a,c){var b;try{b=this.Y.getAll()}catch(e){c(e);return}b.onerror=c;b.onsuccess=function(){var c=b.result.map(function(a){return this.Eb(a)},this);a(c)}.bind(this)},a)}
Le.prototype.Rb=function(a){return new u(function(b,c){var d;try{d=a()}catch(e){c(e);return}d.onsuccess=b;d.onerror=c},this)};Le.prototype.put=function(a){if(0==a.length)return v();a=a.map(function(a){return this.Rb(function(){return this.Y.put(a.Ia())}.bind(this))},this);return cb(a)};
Le.prototype.remove=function(a){return new u(function(b,c){var d=this.Y.count();d.onsuccess=function(d){if(0==a.length||d.target.result==a.length)return this.Rb(function(){return this.Y.clear()}.bind(this)).then(b,c);d=a.map(function(a){return this.Rb(function(){return this.Y.delete(a)}.bind(this))},this);cb(d).then(b,c)}.bind(this);d.onerror=c},this)};function Oe(a,b,c,d,e){ac.call(this,c,e);this.c=a;this.ja=b;this.Qc=d;this.ja.oncomplete=this.O.resolve.bind(this.O);this.ja.onabort=this.O.reject.bind(this.O)}r(Oe,ac);Oe.prototype.G=function(a,b,c){return this.Qc?(c=null!=c?c:0,a=this.ja.objectStore(a),new uc(a,b,0==c?ra(wc,this.c):xc)):new Le(this.ja.objectStore(a),b)};Oe.prototype.pc=function(){return this.O.ha};function Pe(a,b){this.c=a;this.g=b;this.Bd=b.ee.Of||!1}m=Pe.prototype;
m.Da=function(a){var b=window.indexedDB||window.mozIndexedDB||window.webkitIndexedDB||window.msIndexedDB;if(null==b)throw new D(352);var c=a||function(){return v()};return new u(function(a,e){var d;try{d=b.open(this.g.name(),this.g.version())}catch(h){e(h);return}d.onerror=function(a){a=a.target.error;e(new D(361,a.name,a.message))};d.onupgradeneeded=function(a){Qe(this,c,a).then(aa(),e)}.bind(this);d.onsuccess=function(b){this.i=b.target.result;this.ke().then(function(b){Wb=Math.max(Wb,b+1);a(this.i)}.bind(this))}.bind(this)},
this)};function Qe(a,b,c){var d=c.target.result;c=new N(c.oldVersion,d,c.target.transaction,a.Bd);Re(d);a.g.oa().forEach(ra(a.Hf,d),a);return b(c)}function Re(a){for(var b=[],c=0;c<a.objectStoreNames.length;++c){var d=a.objectStoreNames.item(c);-1!=d.indexOf(".")&&b.push(d)}b.forEach(function(b){try{a.deleteObjectStore(b)}catch(f){}})}
m.Hf=function(a,b){a.objectStoreNames.contains(b.getName())||a.createObjectStore(b.getName(),{keyPath:"id"});b.Bb()&&(b.Ca().forEach(function(b){Se(a,b.j())},this),Se(a,Te(b)))};function Se(a,b){a.objectStoreNames.contains(b)||a.createObjectStore(b,{keyPath:"id"})}m.Db=function(a,b,c){b=this.i.transaction(Ue(b),0==a?"readonly":"readwrite");return new Oe(this.c,b,a,this.Bd,c)};
function Ue(a){var b=B();a.forEach(function(a){b.add(a.getName());a.Bb()&&(a.Ca().forEach(function(a){b.add(a.j())}),b.add(Te(a)))});return C(b)}
m.ke=function(a){function b(){if(0==d.length)return v();var a=d.shift();return c(a).then(b)}function c(b){return new u(function(c,d){var k;try{k=(a||e.transaction([b])).objectStore(b).openCursor(null,"prev")}catch(ba){d(ba);return}k.onsuccess=function(a){(a=a.target.result)&&(f=Math.max(f,h(a)));c(f)};k.onerror=function(){c(f)}})}var d=this.g.oa().map(function(a){return a.getName()}),e=this.i,f=0,h=function(a){return this.Bd?(a=tc(a.value),Object.keys(a.l).reduce(function(a,b){return Math.max(a,b)},
0)):a.key}.bind(this);return new u(function(a){b().then(function(){a(f)})})};m.close=function(){this.i.close()};m.wc=function(){throw new D(511);};m.subscribe=aa();m.Cc=aa();function Ve(a,b,c){ac.call(this,b,c);this.Y=a;0==b&&this.O.resolve()}r(Ve,ac);Ve.prototype.G=function(a){return this.Y.wc(a)};Ve.prototype.pc=function(){this.O.resolve();return this.O.ha};function We(a){this.g=a;this.L=x()}m=We.prototype;m.Da=function(){this.g.oa().forEach(this.cg,this);return v()};m.wc=function(a){var b=this.L.get(a)||null;if(null===b)throw new D(101,a);return b};m.Db=function(a,b,c){return new Ve(this,a,c)};function Xe(a,b){if(!a.L.has(b)){var c=new xe;a.L.set(b,c)}}m.cg=function(a){Xe(this,a.getName());a.Bb()&&(a.Ca().forEach(function(a){Xe(this,a.j())},this),Xe(this,Te(a)))};m.close=aa();m.subscribe=aa();m.Cc=aa();function Ye(a){We.call(this,a);this.kd=null}r(Ye,We);Ye.prototype.subscribe=function(a){null===this.kd&&(this.kd=a)};Ye.prototype.Cc=function(a){null===this.kd||this.kd(a)};function Ze(a,b,c){this.ja=a;this.w='"'+b+'"';this.Eb=c}Ze.prototype.get=function(a){var b=this.Eb;return $e(this.ja,"SELECT id, value FROM "+this.w+" "+(0==a.length?"":"WHERE id IN ("+a.join(",")+")"),[],function(a){for(var c=a.rows.length,e=Array(c),f=0;f<c;++f)e[f]=b({id:a.rows.item(f).id,value:JSON.parse(a.rows.item(f).value)});return e})};
Ze.prototype.put=function(a){if(0==a.length)return v();var b="INSERT OR REPLACE INTO "+this.w+"(id, value) VALUES (?, ?)";a.forEach(function(a){$e(this.ja,b,[a.id(),JSON.stringify(a.l)])},this);return v()};Ze.prototype.remove=function(a){$e(this.ja,"DELETE FROM "+this.w+" "+(0==a.length?"":"WHERE id IN ("+a.join(",")+")"),[]);return v()};function af(a,b,c){ac.call(this,b,c);this.i=a;this.L=x();this.Id=[]}r(af,ac);function bf(a){return a.replace(".","__d__").replace("#","__s__")}af.prototype.G=function(a,b){var c=this.L.get(a)||null;null===c&&(c=new Ze(this,bf(a),b),this.L.set(a,c));return c};function $e(a,b,c,d){var e=w();a.Id.push({Jg:b,yg:c,transform:d,O:e});return e.ha}
af.prototype.pc=function(){var a=null,b=this.O.reject.bind(this.O),c=function(a,b){this.O.reject(b)}.bind(this),d=[],e=function(b,h){if(null!==a){var f=h;null!=a.transform&&null!=h&&(f=a.transform(h));d.push(f);a.O.resolve(f)}0<this.Id.length?(a=h=this.Id.shift(),b.executeSql(h.Jg,h.yg,e,c)):this.O.resolve(d)}.bind(this);0==this.td?this.i.readTransaction(e,b):this.i.transaction(e,b);return this.O.ha};function O(a,b,c){this.i=c;this.c=a;this.Yb=b}q("lf.backstore.WebSqlRawBackStore",O);O.prototype.Zc=g("i");O.prototype.getRawDBInstance=O.prototype.Zc;O.prototype.$c=function(){throw new D(356);};O.prototype.getRawTransaction=O.prototype.$c;function cf(a){return new af(a.i,1,new bd(a.c,B()))}O.prototype.qc=function(a){var b=cf(this);$e(b,"DROP TABLE "+a,[]);return b.ka()};O.prototype.dropTable=O.prototype.qc;
O.prototype.cc=function(a){var b=cf(this);$e(b,"SELECT id, value FROM "+a,[]);return b.ka().then(function(a){for(var b=a[0].rows.length,c=Array(b),f=0;f<b;++f)c[f]={id:a[0].rows.item(f).id,value:JSON.parse(a[0].rows.item(f).value)};return v(c)})};function df(a,b,c){var d=cf(a),e="UPDATE "+b+" SET value=? WHERE id=?";return a.cc(b).then(function(a){a.forEach(function(a){a=c(a);$e(d,e,[JSON.stringify(a.value),a.id])});return d.ka()})}
O.prototype.nc=function(a,b,c){var d=Ie(c);return df(this,a,function(a){a.value[b]=d;return a})};O.prototype.addTableColumn=O.prototype.nc;O.prototype.rc=function(a,b){return df(this,a,function(a){delete a.value[b];return a})};O.prototype.dropTableColumn=O.prototype.rc;O.prototype.Hc=function(a,b,c){return df(this,a,function(a){a.value[c]=a.value[b];delete a.value[b];return a})};O.prototype.renameTableColumn=O.prototype.Hc;O.prototype.vb=function(a){var b={},c;for(c in a)b[c]=Ie(a[c]);return Yb(b)};
O.prototype.createRow=O.prototype.vb;O.prototype.yc=g("Yb");O.prototype.getVersion=O.prototype.yc;function ef(a){$e(a,'SELECT tbl_name FROM sqlite_master WHERE type="table"',[],function(a){for(var b=Array(a.rows.length),d=0;d<b.length;++d)b[d]=a.rows.item(d).tbl_name;return b})}
O.prototype.dump=function(){var a=w(),b=cf(this);ef(b);var c={};b.ka().then(function(b){b=b[0].filter(function(a){return"__lf_ver"!=a&&"__WebKitDatabaseInfoTable__"!=a}).map(function(a){return this.cc(a).then(function(b){c[a]=b})},this);cb(b).then(function(){a.resolve(c)})}.bind(this));return a.ha};O.prototype.dump=O.prototype.dump;function ff(a,b,c){this.c=a;this.g=b;this.Ig=c||1}m=ff.prototype;m.Da=function(a){if(null==window.openDatabase)throw new D(353);var b=a||function(){return v()};return new u(function(a,d){var c=window.openDatabase(this.g.name(),"",this.g.name(),this.Ig);if(null!=c)this.i=c,gf(this,b).then(function(){this.ke().then(a,d)}.bind(this),function(a){if(a instanceof D)throw a;throw new D(354,a.message);});else throw new D(354);},this)};
function gf(a,b){var c=w(),d=new af(a.i,1,new bd(a.c,B()));$e(d,"CREATE TABLE IF NOT EXISTS __lf_ver(id INTEGER PRIMARY KEY, v INTEGER)",[]);$e(d,"SELECT v FROM __lf_ver WHERE id = 0",[]);d.ka().then(function(a){var d=0;a[1].rows.length&&(d=a[1].rows.item(0).v);d<this.g.version()?this.be(b,d).then(c.resolve.bind(c)):d>this.g.version()?c.reject(new D(108)):c.resolve()}.bind(a),c.reject.bind(c));return c.ha}m.Db=function(a,b,c){if(null!=this.i)return new af(this.i,a,c);throw new D(2);};m.close=aa();
m.wc=function(){throw new D(512);};m.subscribe=function(){throw new D(355);};m.Cc=function(){throw new D(355);};m.be=function(a,b){return hf(this).then(function(){return a(new O(this.c,b,this.i))}.bind(this))};
function hf(a){var b=a.g.oa(),c=new af(a.i,1,new bd(a.c,B())),d=new af(a.i,1,new bd(a.c,B()));$e(c,"INSERT OR REPLACE INTO __lf_ver VALUES (0, ?)",[a.g.version()]);ef(c);return c.ka().then(function(a){var c=a[1];c.filter(function(a){return-1!=a.indexOf("__d__")}).forEach(function(a){$e(d,"DROP TABLE "+('"'+a+'"'),[])});var e=[],k=[],p=[];b.map(function(a){-1==c.indexOf(a.getName())&&e.push(a.getName());a.Bb&&(a.Ca().forEach(function(a){a=bf(a.j());e.push(a);k.push(a)}),a=bf(Te(a)),e.push(a),p.push(a))});
e.forEach(function(a){$e(d,"CREATE TABLE "+('"'+a+'"')+"(id INTEGER PRIMARY KEY, value TEXT)",[])});return d.ka()})}m.ke=function(){var a=0,b=w(),c=function(b){var c=new af(this.i,0);$e(c,"SELECT MAX(id) FROM "+('"'+b+'"'),[]);return c.ka().then(function(b){b=b[0].rows.item(0)["MAX(id)"];a=Math.max(b,a)})}.bind(this),d=this.g.oa().map(function(a){return c(a.getName())});cb(d).then(function(){Wb=Math.max(Wb,a+1);b.resolve()},function(a){b.reject(a)});return b.ha};function jf(a){this.$=x();this.Xb=x();a.oa().forEach(function(a){this.Xb.set(a.getName(),B())},this)}m=jf.prototype;m.set=function(a,b){this.$.set(b.id(),b);this.Xb.get(a).add(b.id())};m.Ub=function(a,b){var c=this.Xb.get(a);b.forEach(function(a){this.$.set(a.id(),a);c.add(a.id())},this)};m.get=function(a){return this.$.get(a)||null};function kf(a,b){return b.map(function(a){return this.get(a)},a)}
m.Sa=function(a,b,c){var d=[],e=Math.min(b,c),f=Math.max(b,c);a=this.Xb.get(a);if(a.size<f-e)a.forEach(function(a){a>=e&&a<=f&&(a=this.$.get(a),d.push(a))},this);else for(b=e;b<=f;++b)a.has(b)&&(c=this.$.get(b),d.push(c));return d};m.remove=function(a,b){this.$.delete(b);this.Xb.get(a).delete(b)};m.Sg=function(a){return null!=a?this.Xb.get(a).size:this.$.size};m.clear=function(){this.$.clear();this.Xb.clear()};function mf(a,b,c){var d=0,e=a.length;for(c=c||nf;d<e;){var f=d+e>>1;0>c(a[f],b)?d=f+1:e=f}return d==e&&a[d]==b?d:~d}function nf(a,b){return a-b}function of(a,b,c){c=mf(a,b,c);return 0>c?(a.splice(-(c+1),0,b),!0):!1};function pf(a,b,c,d){a=b?a.reverse():a;if(null==c&&null==d)return a;c=Math.min(n(c)?c:a.length,a.length);if(0==c)return[];d=Math.min(d||0,a.length);return a.slice(d,d+c)};function qf(){this.ia=0;this.Bc=null}qf.prototype.add=function(a,b){this.ia+=b;this.Bc=null===this.Bc?a:a>this.Bc?a:this.Bc};qf.prototype.remove=function(a,b){this.ia-=b};qf.prototype.clear=function(){this.ia=0};function rf(a,b){a.clear();b.forEach(function(a){this.ia+=a.ia},a)};function sf(a,b,c,d){this.w=a;this.Z=b;this.tf=c;this.ya=new qf;if(d){a=511;a*=a*a;if(d.length>=a)throw new D(6,a);d=tf(this,d);this.ta=d=uf(d)}else this.clear()}var vf=[];m=sf.prototype;m.getName=g("w");m.toString=function(){return this.ta.toString()};m.add=function(a,b){this.ta=this.ta.zb(a,b)};m.set=function(a,b){this.ta=this.ta.zb(a,b,!0)};m.remove=function(a,b){this.ta=this.ta.remove(a,b)};m.get=function(a){return this.ta.get(a)};
m.Vc=function(a){if(null==a)return this.X().ia;if(a instanceof E){if(hd(a))return this.X().ia;if(ld(a))return this.get(a.from).length}return this.Sa([a]).length};m.X=g("ya");m.Qd=function(a,b,c,d){c=Array(a);this.ta.fill({offset:b?this.ya.ia-a-d:d,count:a,ne:0},c);return b?c.reverse():c};
m.Sa=function(a,b,c,d){var e=wf(this.ta).a[0];if(!n(e)||0==c)return vf;b=b||!1;c=null!=c?Math.min(c,this.ya.ia):this.ya.ia;d=d||0;var f=Math.min(Math.max(this.ya.ia-d,0),c);if(0==f)return vf;if(!n(a)||1==a.length&&a[0]instanceof E&&hd(a[0]))return this.Qd(f,b,c,d);a=this.Z.pf(a);var h=Array(b?this.ya.ia:f),k={count:0,W:h.length,reverse:b,K:d},p=1<this.gb().Ud();a.forEach(function(a){for(var b=this.Z.pd(a),b=this.Z.Sd(a)?e:b[0],b=this.ta.Uf(b),c=0;null!=b&&k.count<k.W;){if(p){for(var d=b,f=a,K=k,yb=
h,Oc=d.o.gb(),de=-1,Ja=0;Ja<d.a.length;++Ja)if(Oc.Ab(d.a[Ja],f)){de=Ja;break}if(-1!=de)for(Ja=de;Ja<d.a.length&&K.count<K.W;++Ja)Oc.Ab(d.a[Ja],f)&&xf(d,K,yb,Ja)}else b.Sa(a,k,h);0!=k.K||b.ed(a)?c=0:c++;b=2==c?null:b.next()}},this);h.length>k.count&&h.splice(k.count,h.length-k.count);return b?pf(h,b,c,d):h};m.clear=function(){this.ta=yf(this);this.ya.clear()};m.hb=function(a){return this.ta.hb(a)};m.min=function(){return this.Fb(this.Z.min.bind(this.Z))};m.max=function(){return this.Fb(this.Z.max.bind(this.Z))};
function zf(a,b,c){if(!a.Z.Jd(b.a[c]))if(1<b.a[c].length){if(null===b.a[c][0])return null}else return null;return[b.a[c],a.tf?[b.A[c]]:b.A[c]]}m.Fb=function(a){var b;a:{b=wf(this.ta);var c=0;do if(c>=b.a.length)b=b.xa,c=0;else{var d=zf(this,b,c);if(null!==d){b=d;break a}c++}while(null!==b);b=null}a:{c=Af(this.ta);d=c.a.length-1;do if(0>d)c=c.ob,d=0;else{var e=zf(this,c,d);if(null!==e){c=e;break a}d--}while(null!==c);c=null}return null===b||null===c?null:1==a(b[0],c[0])?b:c};m.La=g("tf");m.gb=g("Z");
m.Oa=function(a,b){return null!=a?0==this.Z.compare(a,b):!1};m.Ia=function(){for(var a=[],b=wf(this.ta);b;)a.push(new Vb(b.ra,[b.a,b.A])),b=b.xa;return a};function Bf(a,b,c,d){a=new sf(b,a,c);d=Cf(d,a);a.ta=d;return a}function Df(a,b){this.ra=a;this.o=b;this.kb=0;this.xa=this.ob=this.C=null;this.a=[];this.A=[];this.h=[];this.Uf=1==b.gb().Ud()?this.Ke:this.Je}function yf(a){return new Df(Wb++,a)}function P(a){return 0==a.kb}m=Df.prototype;m.next=g("xa");
function Ef(a){function b(a){return null!=a?a.ra.toString():"_"}var c=a.ra+"["+a.a.join("|")+"]",d=a.h.map(function(a){return a.ra}).join("|"),e=a.A.join("/"),f=b(a.ob)+"{",f=P(a)?f+e:f+d,f=f+"}"+b(a.C);a.xa&&(a=Ef(a.xa),c=c+"  "+a[0],f=f+"  "+a[1]);return[c,f]}m.toString=function(){var a="",b=Ef(this),a=a+(b[0]+"\n"+b[1]+"\n");this.h.length&&(a+=this.h[0].toString());return a};function wf(a){return P(a)?a:wf(a.h[0])}function Af(a){return P(a)?a:Af(a.h[a.h.length-1])}
function Ff(a,b){b&&(b.ob=a);a&&(a.xa=b)}function tf(a,b){for(var c=b.length,d=0,e=a=yf(a);0<c;){var f=768<=c?511:257<=c&&511>=c?c:257,h=b.slice(d,d+f);a.a=h.map(function(a){return a.key});a.A=h.map(function(a){return a.value});d+=f;c-=f;0<c&&(f=yf(a.o),Ff(a,f),a=f)}return e}function Gf(a){var b=a[0],c=yf(b.o);c.kb=b.kb+1;c.h=a;for(b=0;b<a.length;++b)a[b].C=c,0<b&&c.a.push(a[b].a[0]);return c}
function uf(a){var b=a,c=[];do c.push(b),b=b.xa;while(b);if(512>=c.length)b=Gf(c);else{var d=c.length,e=0,b=yf(a.o);for(b.kb=a.kb+2;0<d;){a=768<=d?511:257<=d&&511>=d?d:257;var f=c.slice(e,e+a),h=Gf(f);h.C=b;b.h.length&&(b.a.push(f[0].a[0]),Ff(b.h[b.h.length-1],h));b.h.push(h);e+=a;d-=a}}return b}m.get=function(a){var b=Hf(this,a);if(P(this)){var c=vf;this.o.Oa(this.a[b],a)&&(c=c.concat(this.A[b]));return c}b=this.o.Oa(this.a[b],a)?b+1:b;return this.h[b].get(a)};
m.hb=function(a){var b=Hf(this,a);return this.o.Oa(this.a[b],a)?!0:P(this)?!1:this.h[b].hb(a)};m.remove=function(a,b){If(this,a,-1,b);return null===this.C?(a=this,1==this.h.length&&(a=this.h[0],a.C=null),a):this};function Jf(a){return P(a)?a.a[0]:Jf(a.h[0])}function Kf(a){a.a=[];for(var b=1;b<a.h.length;++b)a.a.push(Jf(a.h[b]))}
function If(a,b,c,d){var e=Hf(a,b),f=P(a);if(!f){var h=a.o.Oa(a.a[e],b)?e+1:e;if(If(a.h[h],b,h,d))Kf(a);else return!1}else if(!a.o.Oa(a.a[e],b))return!1;if(a.a.length>e&&a.o.Oa(a.a[e],b)){if(n(d)&&!a.o.La()&&f&&(h=a.A[e],d=mf(h,d,void 0),0>d?d=!1:(h.splice(d,1),d=!0),d&&a.o.X().remove(b,1),a.A[e].length))return!1;a.a.splice(e,1);f&&(f=a.o.La()?1:a.A[e].length,a.A.splice(e,1),a.o.X().remove(b,f))}if(256>a.a.length&&null!==a.C){a:{if(a.xa&&256<a.xa.a.length)b=a.xa,e=d=0,f=a.a.length+1;else if(a.ob&&
256<a.ob.a.length)b=a.ob,d=a.ob.a.length-1,e=P(a)?d:d+1,f=0;else{b=!1;break a}a.a.splice(f,0,b.a[d]);b.a.splice(d,1);d=P(a)?a.A:a.h;P(a)?h=b.A:(h=b.h,h[e].C=a);d.splice(f,0,h[e]);h.splice(e,1);P(b)||(Kf(b),Kf(a));b=!0}b||Lf(a,c)}return!0}
function Lf(a,b){var c,d,e;a.xa&&511>a.xa.a.length?(c=a.xa,e=d=0):a.ob&&(c=a.ob,d=c.a.length,e=P(c)?c.A.length:c.h.length);d=[d,0].concat(a.a);Array.prototype.splice.apply(c.a,d);d=null;P(a)?d=a.A:(d=a.h,d.forEach(function(a){a.C=c}));d=[e,0].concat(d);Array.prototype.splice.apply(P(c)?c.A:c.h,d);Ff(a.ob,a.xa);P(c)||Kf(c);-1!=b&&(a.C.a.splice(b,1),a.C.h.splice(b,1))}
m.zb=function(a,b,c){var d=Hf(this,a);if(P(this)){if(this.o.Oa(this.a[d],a)){if(c)this.o.X().remove(a,this.o.La()?1:this.A[d].length),this.A[d]=this.o.La()?b:[b];else{if(this.o.La())throw new D(201,this.o.getName(),JSON.stringify(a));if(!of(this.A[d],b))throw new D(109);}this.o.X().add(a,1);return this}this.a.splice(d,0,a);this.A.splice(d,0,this.o.La()?b:[b]);this.o.X().add(a,1);512==this.a.length?(d=yf(this.o),a=yf(this.o),a.kb=1,a.a=[this.a[256]],a.h=[this,d],a.C=this.C,this.C=a,d.a=this.a.splice(256),
d.A=this.A.splice(256),d.C=a,Ff(d,this.xa),Ff(this,d),d=a):d=this;return d}d=this.o.Oa(this.a[d],a)?d+1:d;a=this.h[d].zb(a,b,c);P(a)||1!=a.a.length||(this.a.splice(d,0,a.a[0]),a.h[1].C=this,a.h[0].C=this,this.h.splice(d,1,a.h[1]),this.h.splice(d,0,a.h[0]));return 512==this.a.length?Mf(this):this};
function Mf(a){var b=yf(a.o),c=yf(a.o);b.C=a.C;b.kb=a.kb+1;b.a=[a.a[256]];b.h=[a,c];a.a.splice(256,1);c.C=b;c.kb=a.kb;c.a=a.a.splice(256);c.h=a.h.splice(257);c.h.forEach(function(a){a.C=c});a.C=b;Ff(c,a.xa);Ff(a,c);return b}function Hf(a,b){for(var c=0,d=a.a.length,e=a.o.gb();c<d;){var f=c+d>>1;-1==e.compare(a.a[f],b)?c=f+1:d=f}return c}m.Ke=function(a){if(!P(this)){var b=Hf(this,a);this.o.Oa(this.a[b],a)&&b++;return this.h[b].Ke(a)}return this};
m.Je=function(a){if(!P(this)){var b=Hf(this,a);this.o.Oa(this.a[b],a)&&(a.some(function(a){return a==F})||b++);return this.h[b].Je(a)}return this};
m.Sa=function(a,b,c){function d(a){return a[0]?a[1]?0:1:-1}var e=this.o.gb(),f=0,h=this.a.length-1,k=this.a,p=d(e.ub(k[f],a)),K=d(e.ub(k[h],a));if(1!=p&&(-1!=p||-1!=K)){var qa=function(a,b){b=a+b>>1;return b==a?b+1:b},ba=function(b,c,f){if(b>=c)return 0==f?c:-1;var h=d(e.ub(k[b],a));if(0==h)return b;if(1==h)return-1;h=qa(b,c);if(h==c)return 0==f?c:-1;var p=d(e.ub(k[h],a));return 0==p?ba(b,h,p):-1==p?ba(h+1,c,f):ba(b+1,h,p)},xb=function(b,c){if(b>=c)return b;var f=d(e.ub(k[c],a));if(0==f)return c;
if(-1==f)return b;f=qa(b,c);if(f==c)return b;var h=d(e.ub(k[f],a));return 0==h?xb(f,c):1==h?xb(b,f-1):-1};0!=p&&(f=ba(f+1,h,K));-1!=f&&(h=xb(f,h),-1!=h&&h>=f&&Nf(this,b,c,f,h+1))}};function xf(a,b,c,d){if(a.o.La())!b.reverse&&b.K?b.K--:c[b.count++]=a.A[d];else for(var e=0;e<a.A[d].length&&b.count<c.length;++e)!b.reverse&&b.K?b.K--:c[b.count++]=a.A[d][e]}function Nf(a,b,c,d,e){for(;d<e&&(b.reverse||!(b.count>=b.W));++d)xf(a,b,c,d)}
m.fill=function(a,b){if(P(this))for(var c=0;c<this.A.length&&0<a.count;++c)if(0<a.offset){if(a.offset-=this.o.La()?1:this.A[c].length,0>a.offset)for(var d=this.A[c].length+a.offset;d<this.A[c].length&&0<a.count;++d)b[a.ne++]=this.A[c][d],a.count--}else if(this.o.La())b[a.ne++]=this.A[c],a.count--;else for(d=0;d<this.A[c].length&&0<a.count;++d)b[a.ne++]=this.A[c][d],a.count--;else for(c=0;c<this.h.length&&0<a.count;++c)this.h[c].fill(a,b)};
function Cf(a,b){var c=b.X();a=a.map(function(a){var d=new Df(a.id(),b);d.a=a.l[0];d.A=a.l[1];d.a.forEach(function(a,e){c.add(a,b.La()?1:d.A[e].length)});return d});for(var d=0;d<a.length-1;++d)Ff(a[d],a[d+1]);return 1<a.length?uf(a[0]):a[0]}m.ed=function(a){return this.o.gb().ed(this.a[0],a)};function Of(a){this.Tc=0==a?Pf:Qf;this.Xd=0==a?function(a){return null!=a?a.reverse():null}:function(a){return a||null};this.ce=0==a?Rf:Sf}function Qf(a,b){return a>b?1:a<b?-1:0}function Pf(a,b){return Qf(b,a)}function Sf(a,b){return md(a,b)}function Rf(a,b){return md(b,a)}m=Of.prototype;m.ub=function(a,b){b=this.Xd(b);var c=[b.from==F,b.m==F];if(!c[0]){var d=this.Tc(a,b.from);c[0]=b.ea?1==d:-1!=d}c[1]||(d=this.Tc(a,b.m),c[1]=b.na?-1==d:1!=d);return c};m.compare=function(a,b){return this.Tc(a,b)};
m.min=function(a,b){return a<b?1:a==b?0:-1};m.max=function(a,b){return a>b?1:a==b?0:-1};m.Ab=function(a,b){a=this.ub(a,b);return a[0]&&a[1]};m.ed=function(a,b){return this.Ab(a,b)};m.pf=function(a){return a.filter(function(a){return null!==a}).sort(function(a,c){return this.ce(a,c)}.bind(this))};m.Sd=function(a){return this.Xd(a).from==F};m.pd=function(a){a=this.Xd(a);return[a.from,a.m]};m.Jd=function(a){return null!==a};m.Ud=l(1);
m.toString=function(){return this.compare==Pf?"SimpleComparator_DESC":"SimpleComparator_ASC"};function Uf(a){Of.call(this,a);this.Tc=0==a?Vf:Wf}r(Uf,Of);function Wf(a,b){return null===a?null===b?0:-1:null===b?1:Qf(a,b)}function Vf(a,b){return Wf(b,a)}Uf.prototype.Ab=function(a,b){return null===a?hd(b):Uf.eb.Ab.call(this,a,b)};Uf.prototype.Fb=function(a,b){return null===a?null===b?0:-1:null===b?1:null};Uf.prototype.min=function(a,b){var c=this.Fb(a,b);null===c&&(c=Uf.eb.min.call(this,a,b));return c};
Uf.prototype.max=function(a,b){var c=this.Fb(a,b);null===c&&(c=Uf.eb.max.call(this,a,b));return c};function Xf(a){this.pa=a.map(function(a){return new Of(a)})}function Yf(a,b,c,d){for(var e=0,f=0;f<a.pa.length&&0==e;++f)e=d(a.pa[f],b[f],c[f]);return e}m=Xf.prototype;m.compare=function(a,b){return Yf(this,a,b,function(a,b,e){return b==F||e==F?0:a.compare(b,e)})};m.min=function(a,b){return Yf(this,a,b,function(a,b,e){return a.min(b,e)})};m.max=function(a,b){return Yf(this,a,b,function(a,b,e){return a.max(b,e)})};
m.ub=function(a,b){for(var c=[!0,!0],d=0;d<this.pa.length&&(c[0]||c[1]);++d){var e=this.pa[d].ub(a[d],b[d]);c[0]=c[0]&&e[0];c[1]=c[1]&&e[1]}return c};m.Ab=function(a,b){for(var c=!0,d=0;d<this.pa.length&&c;++d)c=this.pa[d].Ab(a[d],b[d]);return c};m.ed=function(a,b){return this.pa[0].Ab(a[0],b[0])};
m.pf=function(a){var b=a.filter(function(a){return a.every(ga)});a=Array(this.pa.length);for(var c=0;c<a.length;c++)a[c]=b.map(function(a){return a[c]});a.forEach(function(a,b){a.sort(function(a,c){return this.pa[b].ce(a,c)}.bind(this))},this);b=Array(b.length);for(c=0;c<b.length;c++)b[c]=a.map(function(a){return a[c]});return b.sort(function(a,b){for(var c=0,d=0;d<this.pa.length&&0==c;++d)c=this.pa[d].ce(a[d],b[d]);return c}.bind(this))};m.Sd=function(a){return this.pa[0].Sd(a[0])};
m.pd=function(a){var b=a.map(function(a,b){return this.pa[b].pd(a)[0]},this);a=a.map(function(a,b){return this.pa[b].pd(a)[1]},this);return[b,a]};m.Jd=function(a){return a.every(function(a,c){return this.pa[c].Jd(a)},this)};m.Ud=function(){return this.pa.length};function Zf(a){Xf.call(this,a);this.pa=a.map(function(a){return new Uf(a)})}r(Zf,Xf);function $f(a){if(1==a.f.length)return new Of(a.f[0].order);var b=a.f.map(function(a){return a.order});return a.f.some(function(a){return a.ba.fc()})?new Zf(b):new Xf(b)};function ag(a){this.fa=a;this.mb=B();this.Kc=new qf;this.ya=new qf}m=ag.prototype;m.getName=function(){return this.fa.getName()};m.add=function(a,b){null===a?(this.mb.add(b),this.Kc.add(a,1)):this.fa.add(a,b)};m.set=function(a,b){null===a?(this.mb.clear(),this.Kc.clear(),this.add(a,b)):this.fa.set(a,b)};m.remove=function(a,b){null===a?b?(this.mb.delete(b),this.Kc.remove(a,1)):(this.mb.clear(),this.Kc.clear()):this.fa.remove(a,b)};m.get=function(a){return null===a?C(this.mb):this.fa.get(a)};m.Vc=function(a){return this.fa.Vc(a)};
m.X=function(){rf(this.ya,[this.fa.X(),this.Kc]);return this.ya};m.Sa=function(a,b,c,d){b=this.fa.Sa(a,b,c,d);return null!=a?b:b.concat(C(this.mb))};m.clear=function(){this.mb.clear();this.fa.clear()};m.hb=function(a){return null===a?0!=this.mb.size:this.fa.hb(a)};m.min=function(){return this.fa.min()};m.max=function(){return this.fa.max()};m.Ia=function(){return[new Vb(-2,C(this.mb))].concat(this.fa.Ia())};m.gb=function(){return this.fa.gb()};
function bg(a,b){for(var c=-1,d=0;d<b.length;++d)if(-2==b[d].id()){c=d;break}if(-1==c)throw new D(102);d=b[c].l;b=b.slice(0);b.splice(c,1);a=a(b);var e=new ag(a);d.forEach(function(a){e.mb.add(a)});return e}m.La=function(){return this.fa.La()};function cg(a){this.w=a;this.qb=B();this.Z=new Of(1)}m=cg.prototype;m.getName=g("w");m.add=function(a){if("number"!=typeof a)throw new D(103);this.qb.add(a)};m.set=function(a,b){this.add(a,b)};m.remove=function(a){this.qb.delete(a)};m.get=function(a){return this.hb(a)?[a]:[]};m.min=function(){return this.Fb(this.Z.min.bind(this.Z))};m.max=function(){return this.Fb(this.Z.max.bind(this.Z))};
m.Fb=function(a){if(0==this.qb.size)return null;var b=C(this.qb).reduce(function(b,d){return null===b||1==a(d,b)?d:b},null);return[b,[b]]};m.Vc=function(){return this.qb.size};m.Sa=function(a,b,c,d){var e=a||[kd()];a=C(this.qb).filter(function(a){return e.some(function(b){return this.Z.Ab(a,b)},this)},this);return pf(a,b,c,d)};m.clear=function(){this.qb.clear()};m.hb=function(a){return this.qb.has(a)};m.Ia=function(){return[new Vb(0,C(this.qb))]};m.gb=g("Z");
function dg(a,b){var c=new cg(a);b[0].l.forEach(function(a){c.add(a,a)});return c}m.La=l(!0);m.X=function(){var a=new qf;a.ia=this.qb.size;return a};function eg(a){this.Na=a.b(ic);this.B=a.b(kc);this.U=a.b(jc)}eg.prototype.Da=function(a){var b=a.oa(),c=function(){if(0==b.length)return v();var a=b.shift();return(a.Bb()?fg(this,a):gg(this,a)).then(c)}.bind(this);return c()};function gg(a,b){var c=a.Na.Db(0,[b]);a=c.G(b.getName(),b.ib.bind(b),0).get([]).then(function(a){this.U.Ub(b.getName(),a);hg(this,b,a)}.bind(a));c.ka();return a}
function hg(a,b,c){var d=a.B.jc.get(b.getName())||[];c.forEach(function(a){d.forEach(function(b){var c=a.lb(b.getName());b.add(c,a.id())})})}function fg(a,b){var c=a.Na.Db(0,[b]),d=c.G(b.getName(),b.ib,0).get([]).then(function(a){this.U.Ub(b.getName(),a)}.bind(a));a=b.Ca().map(function(a){return ig(this,a,c)},a).concat(jg(a,b,c));c.ka();return cb(a.concat(d))}
function ig(a,b,c){c=c.G(b.j(),Xb,1);var d=$f(b);return c.get([]).then(function(a){if(0<a.length){if(kg(b)){var c=Bf.bind(void 0,d,b.j(),b.zc);a=bg(c,a)}else a=Bf(d,b.j(),b.zc,a);this.B.set(b.kc,a)}}.bind(a))}function jg(a,b,c){return c.G(Te(b),Xb,1).get([]).then(function(a){0<a.length&&(a=dg(Te(b),a),this.B.set(b.getName(),a))}.bind(a))};function lg(){this.Y=x();this.jc=x()}lg.prototype.Da=function(a){a.oa().forEach(function(a){var b=[];this.jc.set(a.getName(),b);var d=Te(a);if(null===this.get(d)){var e=new cg(d);b.push(e);this.Y.set(d,e)}a.Ca().forEach(function(a){var c;c=$f(a);c=new sf(a.j(),c,a.zc);c=kg(a)&&1==a.f.length?new ag(c):c;b.push(c);this.Y.set(a.j(),c)},this)},this);return v()};lg.prototype.get=function(a){return this.Y.get(a)||null};
lg.prototype.set=function(a,b){var c=this.jc.get(a)||null;null===c&&(c=[],this.jc.set(a,c));a=null;for(var d=0;d<c.length;d++)if(c[d].getName()==b.getName()){a=d;break}null!==a&&0<c.length?c.splice(a,1,b):c.push(b);this.Y.set(b.getName(),b)};function mg(a,b){var c=[],d=null,e=null;Ud(a,function(a){var f=b(a);null==a.getParent()?e=f:L(d,f);var k=a.getParent();null!==k&&J(k).length==J(d).length&&(k=c.indexOf(d),-1!=k&&c.splice(k,1));1<J(a).length&&c.push(f);d=null===a.h?c[c.length-1]:f});return e}function ng(a){return og(a,function(a){return null===a.h})}
function pg(a){var b=a.getParent(),c=0;null!==b&&(c=J(b).indexOf(a),b.removeChild(a));var d=J(a).slice();d.forEach(function(d,f){a.removeChild(d);null===b||Rd(b,d,c+f)});return{parent:b,children:d}}function qg(a,b){J(a).slice().forEach(function(c){a.removeChild(c);L(b,c)});L(a,b)}function rg(a){var b=Qd(a,0);pg(a);qg(b,a);return b}
function sg(a,b,c){var d=Qd(a,0),e=J(d).slice();if(!e.some(function(a){return b(a)}))return a;pg(a);e.forEach(function(e,h){if(b(e)){var f=c(a);Sd(d,h);L(f,e);Rd(d,f,h)}});return d}function tg(a,b,c,d){var e=a.getParent();null!==e&&(a=J(e).indexOf(a),Sd(e,a),Rd(e,c,a));J(b).slice().forEach(function(a){b.removeChild(a);L(d,a)});return c}function og(a,b,c){function d(a){b(a)&&e.push(a);null!=c&&c(a)||J(a).forEach(d)}var e=[];d(a);return e}
function ug(a,b){var c=b||function(a){return a.toString()+"\n"},d="";Ud(a,function(a){for(var b=0;b<Pd(a);b++)d+="-";d+=c(a)});return d};function vg(a){Vd.call(this);this.nb=a;this.Ta=!1}r(vg,Vd);m=vg.prototype;m.Lb=function(){return mg(this,function(a){if(a instanceof vg){var b=new vg(a.nb);b.Ta=a.Ta;a=a.V();b.ra=a;return b}return a.Lb()})};m.jb=function(a){var b=a||[];Ud(this,function(a){a!=this&&a.jb(b)}.bind(this));a=B(b);return C(a)};m.s=function(a){var b=null!=a?a:B();Ud(this,function(a){a!=this&&a.s(b)}.bind(this));return b};m.qd=function(a){this.Ta!=a&&(this.Ta=a,this.nb="and"==this.nb?"or":"and",J(this).forEach(function(b){return b.qd(a)}))};
m.eval=function(a){var b=J(this).map(function(b){return b.eval(a)});return wg(this,b)};function wg(a,b){return"and"==a.nb?vd(b):wd(b)}m.toString=function(){return"combined_pred_"+this.nb.toString()};m.qe=function(){if("or"==this.nb){var a=new od;J(this).forEach(function(b){b=b.qe().yb();a.add(b)});return a}return new od};m.fd=function(){return"or"==this.nb?xg(this):!1};
function xg(a){var b=null;return J(a).every(function(a){if(!(a instanceof Xd&&a.fd()))return!1;null===b&&(b=a.I);return b.j()==a.I.j()})};function yg(a,b,c){Vd.call(this);this.ga=a;this.ma=b;this.D=c;this.Yd=null;a=Md();this.sc=Nd(a,this.ga.H(),this.D);this.kg=a.Ue.get(this.ga.H())||null}r(yg,Vd);m=yg.prototype;m.Lb=function(){var a=new yg(this.ga,this.ma,this.D),b=this.V();a.ra=b;return a};m.jb=function(a){return null!=a?(a.push(this.ga),a.push(this.ma),a):[this.ga,this.ma]};m.s=function(a){a=null!=a?a:B();a.add(this.ga.G());a.add(this.ma.G());return a};
m.reverse=function(){var a=this.D;switch(this.D){case "gt":a="lt";break;case "lt":a="gt";break;case "gte":a="lte";break;case "lte":a="gte"}return new yg(this.ma,this.ga,a)};m.eval=function(a){var b=a.entries.filter(function(a){var b=H(a,this.ga);a=H(a,this.ma);return this.sc(b,a)},this);return new G(b,a.s())};m.toString=function(){return"join_pred("+this.ga.j()+" "+this.D+" "+this.ma.j()+")"};
function zg(a,b,c){var d;-1!=b.s().indexOf(Ad(a.ga.G()))?(d=b,b=c):d=c;if(d.entries.length>b.entries.length){a:{c=a.ga;a.ga=a.ma;a.ma=c;switch(a.D){case "gt":c="lt";break;case "lt":c="gt";break;case "gte":c="lte";break;case "lte":c="gte";break;default:break a}a.D=c;a.sc=Nd(Md(),a.ga.H(),a.D)}return[b,d]}return[d,b]}function Ag(a){var b={};a.jb().forEach(function(a){b[a.getName()]=null});return b}
function Bg(a,b,c){null===a.Yd&&(a.Yd=Ag(a.ma.G()));var d=new yd(new Vb(-1,a.Yd),!1);return Cd(b,c,d,[Ad(a.ma.G())])}
function Cg(a,b,c,d){var e=[b,c];d||(e=zg(a,b,c));b=e[0];c=e[1];var e=b,f=c,h=a.ga,k=a.ma;d&&(e=c,f=b,h=a.ma,k=a.ga);var p=new Jc,K=[];e.entries.forEach(function(a){var b=String(H(a,h));p.set(b,a)});var qa=e.s(),ba=f.s();f.entries.forEach(function(a){var b=H(a,k),c=String(b);null!==b&&p.has(c)?p.get(c).forEach(function(b){b=Cd(a,ba,b,qa);K.push(b)}):d&&K.push(Bg(this,a,ba))}.bind(a));a=b.s().concat(c.s());return new G(K,a)}
function Dg(a,b,c,d,e){function f(a,b){b=new yd(b,1<qa.length);a=Cd(a,ba,b,qa);K.push(a)}var h=d.$f.G(),k=b,p=c;-1!=b.s().indexOf(Ad(h))&&(k=c,p=b);var K=[],qa=p.s(),ba=k.s();k.entries.forEach(function(a){var b=this.kg(H(a,d.rg)),b=d.index.get(b);0!=b.length&&(d.index.La()?f(a,e.get(b[0])):kf(e,b).forEach(f.bind(null,a)))},a);a=k.s().concat(p.s());return new G(K,a)};function Eg(a,b,c){return null===b?new Xd(a,b,c):n(b.j)?new yg(a,b,c):new Xd(a,b,c)};var Fg={};q("lf.schema.DataStoreType",Fg);Fg.INDEXED_DB=0;Fg.MEMORY=1;Fg.LOCAL_STORAGE=2;Fg.FIREBASE=3;Fg.WEB_SQL=4;Fg.OBSERVABLE_STORE=5;function Gg(a,b,c,d){this.kc=a;this.name=b;this.zc=c;this.f=d}Gg.prototype.j=function(){return this.kc+"."+this.name};function kg(a){return a.f.some(function(a){return a.ba.fc()})}function Q(a,b,c,d){this.w=a;this.sa=c;this.J=b;this.md=d;this.Ja=null}q("lf.schema.Table",Q);Q.prototype.getName=g("w");Q.prototype.getName=Q.prototype.getName;
function Ad(a){return a.Ja||a.w}Q.prototype.oc=function(a){var b=new this.constructor(this.w);b.Ja=a;b.Dg=this.Dg;return b};Q.prototype.as=Q.prototype.oc;Q.prototype.createRow=Q.prototype.vb;Q.prototype.deserializeRow=Q.prototype.ib;Q.prototype.Ca=g("sa");Q.prototype.getIndices=Q.prototype.Ca;Q.prototype.jb=g("J");Q.prototype.getColumns=Q.prototype.jb;Q.prototype.getConstraint=Q.prototype.Ie;Q.prototype.Bb=g("md");Q.prototype.persistentIndex=Q.prototype.Bb;function Te(a){return a.w+".#"};function R(a,b){this.child=a;this.Jb=b;this.Ja=null}m=R.prototype;m.getName=function(){return this.Jb+"("+this.child.getName()+")"};m.j=function(){return this.Jb+"("+this.child.j()+")"};m.G=function(){return this.child.G()};m.toString=function(){return this.j()};m.H=function(){return this.child.H()};m.Ca=function(){return[]};m.Ba=l(null);m.fc=l(!1);m.oc=function(a){this.Ja=a;return this};R.prototype.as=R.prototype.oc;
function Hg(a){for(var b=[a];a instanceof R;)b.push(a.child),a=a.child;return b}function Ig(a){this.Ja=a||null;this.S=new Q("#UnknownTable",[],[],!1)}m=Ig.prototype;m.getName=l("*");m.j=function(){return this.getName()};m.toString=function(){return this.j()};m.G=g("S");m.H=l(4);m.Ca=function(){return[]};m.Ba=l(null);m.fc=l(!1);q("lf.fn.avg",function(a){return new R(a,"AVG")});function Jg(a){return new R(a||new Ig,"COUNT")}q("lf.fn.count",Jg);function Kg(a){return new R(a,"DISTINCT")}q("lf.fn.distinct",Kg);q("lf.fn.max",function(a){return new R(a,"MAX")});q("lf.fn.min",function(a){return new R(a,"MIN")});q("lf.fn.stddev",function(a){return new R(a,"STDDEV")});q("lf.fn.sum",function(a){return new R(a,"SUM")});q("lf.fn.geomean",function(a){return new R(a,"GEOMEAN")});function S(a,b){I.call(this);this.Qf=b}r(S,I);S.prototype.exec=function(a,b){switch(this.Qf){case 1:return Lg(this,a,b);case 0:return Mg(this,a,b);default:return Ng(this,a,b)}};S.prototype.toString=l("dummy_node");S.prototype.Lc=function(){return this.toString()};function Ng(a,b,c){return new u(function(a){a(this.ca([],b,c))}.bind(a))}function Lg(a,b,c){return Qd(a,0).exec(b,c).then(function(a){return this.ca(a,b,c)}.bind(a))}
function Mg(a,b,c){var d=J(a).map(function(a){return a.exec(b,c)});return cb(d).then(function(a){var d=[];a.forEach(function(a){for(var b=0;b<a.length;++b)d.push(a[b])});return this.ca(d,b,c)}.bind(a))};function Og(a){S.call(this,0,1);this.xe=a}r(Og,S);Og.prototype.toString=function(){return"aggregation("+this.xe.map(function(a){return a.j()}).toString()+")"};Og.prototype.ca=function(a){a.forEach(function(a){Pg(new Qg(a,this.xe))},this);return a};function Qg(a,b){this.Ma=a;this.J=b}
function Pg(a){a.J.forEach(function(a){a=Hg(a).reverse();for(var b=1;b<a.length;b++){var d=a[b],e=Hg(d).slice(-1)[0],f=d.child instanceof R?sd(this.Ma,d.child):this.Ma;if(null!==f.Xa&&f.Xa.has(d.j()))break;f=Rg(d.Jb,f,e);e=this.Ma;null===e.Xa&&(e.Xa=x());e.Xa.set(d.j(),f)}},a)}
function Rg(a,b,c){var d=null;switch(a){case "MIN":d=Sg(b,c,function(a,b){return b<a?b:a});break;case "MAX":d=Sg(b,c,function(a,b){return b>a?b:a});break;case "DISTINCT":d=Tg(b,c);break;case "COUNT":d=Ug(b,c);break;case "SUM":d=Vg(b,c);break;case "AVG":a=Ug(b,c);0<a&&(d=Vg(b,c)/a);break;case "GEOMEAN":d=Wg(b,c);break;default:d=Xg(b,c)}return d}function Sg(a,b,c){return a.entries.reduce(function(a,e){e=H(e,b);return null===e?a:null===a?e:c(a,e)},null)}
function Ug(a,b){return b instanceof Ig?a.entries.length:a.entries.reduce(function(a,d){return a+(null===H(d,b)?0:1)},0)}function Vg(a,b){return Sg(a,b,function(a,b){return b+a})}function Xg(a,b){var c=[];a.entries.forEach(function(a){a=H(a,b);null===a||c.push(a)});return 0==c.length?null:rb.apply(null,c)}function Wg(a,b){var c=0;a=a.entries.reduce(function(a,e){e=H(e,b);if(0==e||null===e)return a;c++;return a+Math.log(e)},0);return 0==c?null:Math.pow(Math.E,a/c)}
function Tg(a,b){var c=x();a.entries.forEach(function(a){var d=H(a,b);c.set(d,a)});return new G(y(c),a.s())};function Yg(a,b){this.Ga=a;this.aa=b}Yg.prototype.Za=g("Ga");Yg.prototype.da=g("aa");function Zg(){I.call(this)}r(Zg,I);function $g(a,b){I.call(this);this.table=a;this.values=b}r($g,Zg);function ah(a,b){$g.call(this,a,b)}r(ah,$g);function bh(a){I.call(this);this.table=a}r(bh,Zg);bh.prototype.toString=function(){return"delete("+this.table.getName()+")"};function ch(a){I.call(this);this.table=a}r(ch,Zg);ch.prototype.toString=function(){return"update("+this.table.getName()+")"};
function dh(a){I.call(this);this.N=a}r(dh,Zg);dh.prototype.toString=function(){return"select("+this.N.toString()+")"};function eh(a){I.call(this);this.table=a}r(eh,Zg);eh.prototype.toString=function(){var a="table_access("+this.table.getName();null===this.table.Ja||(a+=" as "+this.table.Ja);return a+")"};function fh(){I.call(this)}r(fh,Zg);fh.prototype.toString=l("cross_product");function gh(a,b){I.call(this);this.f=a;this.Nb=b}r(gh,Zg);
gh.prototype.toString=function(){var a="project("+this.f.toString();if(null!==this.Nb)var b=this.Nb.map(function(a){return a.j()}).join(", "),a=a+(", groupBy("+b+")");return a+")"};function hh(a){I.call(this);this.M=a}r(hh,Zg);hh.prototype.toString=function(){return"order_by("+he(this.M)+")"};function ih(a){I.call(this);this.f=a}r(ih,Zg);ih.prototype.toString=function(){return"aggregation("+this.f.toString()+")"};function jh(a){I.call(this);this.f=a}r(jh,Zg);
jh.prototype.toString=function(){return"group_by("+this.f.toString()+")"};function kh(a){I.call(this);this.W=a}r(kh,Zg);kh.prototype.toString=function(){return"limit("+this.W+")"};function lh(a){I.call(this);this.K=a}r(lh,Zg);lh.prototype.toString=function(){return"skip("+this.K+")"};function mh(a,b){I.call(this);this.N=a;this.Pb=b}r(mh,Zg);mh.prototype.toString=function(){return"join(type: "+(this.Pb?"outer":"inner")+", "+this.N.toString()+")"};function nh(){};function oh(){}r(oh,nh);oh.prototype.cb=function(a){this.F=a;this.sb(this.F);return this.F};oh.prototype.sb=function(a){if(a instanceof dh){var b=ph(this,a.N),b=qh(this,b);tg(a,a,b[0],b[1]);a==this.F&&(this.F=b[0]);a=b[0]}J(a).forEach(function(a){this.sb(a)},this)};function ph(a,b){if(0==J(b).length||"and"!=b.nb)return[b];a=J(b).slice().map(function(a){b.removeChild(a);return ph(this,a)},a);return Da(a)}
function qh(a,b){var c=null,d=null;b.map(function(a,b){a=new dh(a);0==b?c=a:L(d,a);d=a},a);return[c,d]};function rh(){}r(rh,nh);rh.prototype.cb=function(a,b){if(3>b.from.length)return a;this.F=a;this.sb(this.F);return this.F};rh.prototype.sb=function(a){if(a instanceof fh)for(;2<J(a).length;){for(var b=new fh,c=0;2>c;c++){var d=Sd(a,0);L(b,d)}Rd(a,b,0)}J(a).forEach(function(a){this.sb(a)},this)};function sh(){S.call(this,0,0)}r(sh,S);sh.prototype.toString=l("cross_product");sh.prototype.ca=function(a){var b=a[0],c=a[1];a=[];for(var d=b.s(),e=c.s(),f=0;f<b.entries.length;f++)for(var h=0;h<c.entries.length;h++){var k=Cd(b.entries[f],d,c.entries[h],e);a.push(k)}b=b.s().concat(c.s());return[new G(a,b)]};function th(a,b){ke.call(this,a,b);this.Ha=a.b(mc);this.Gb=a.b(nc)}r(th,ke);th.prototype.getPriority=l(2);th.prototype.ae=function(a){0==this.H()?uh(this,a):this.Ic()};function uh(a,b){a.od.forEach(function(a,d){a instanceof ge&&ne(this.Gb,a,b[d])},a)}th.prototype.Ic=function(){var a=pe(this.Gb,this.da());0!=a.length&&(a=new me(this.global,a),qe(this.Ha,a))};function vh(a){ae.call(this,a)}r(vh,ae);vh.prototype.da=function(){var a=B();a.add(this.from);wh(this,this.from.getName(),a);return a};function wh(a,b,c){var d=xh(a.ba.info(),b,1);xh(a.ba.info(),b).forEach(c.add.bind(c));d.forEach(function(a){wh(this,a.getName(),c)},a)}vh.prototype.clone=function(){var a=new vh(this.ba);ee(a,this);a.from=this.from;return a};vh.prototype.bind=function(a){vh.eb.bind.call(this,a);fe(this,a);return this};function yh(a){ae.call(this,a)}r(yh,ae);yh.prototype.da=function(){var a=B();a.add(this.Ka);var b=this.ba.info();zh(this.Ka.getName(),b.bf).forEach(a.add.bind(a));this.Zb&&xh(b,this.Ka.getName()).forEach(a.add.bind(a));return a};yh.prototype.clone=function(){var a=new yh(this.ba);ee(a,this);a.Ka=this.Ka;this.values&&(a.values=this.values instanceof Dd?this.values:this.values.slice());a.Zb=this.Zb;a.$b=this.$b;return a};
yh.prototype.bind=function(a){yh.eb.bind.call(this,a);this.$b&&(this.values=this.$b instanceof Dd?a[this.$b.Ba()]:this.$b.map(function(b){return b instanceof Dd?a[b.Ba()]:b}));return this};function Ah(a){ae.call(this,a)}r(Ah,ae);Ah.prototype.da=function(){var a=B();a.add(this.table);var b=this.set.map(function(a){return a.I.j()}),c=this.ba.info();Bh(c,b).forEach(a.add.bind(a));Ch(c,b).forEach(a.add.bind(a));return a};Ah.prototype.clone=function(){var a=new Ah(this.ba);ee(a,this);a.table=this.table;a.set=this.set?Dh(this.set):this.set;return a};Ah.prototype.bind=function(a){Ah.eb.bind.call(this,a);this.set.forEach(function(b){-1!=b.Pc&&(b.value=a[b.Pc])});fe(this,a);return this};
function Dh(a){return a.map(function(a){var b={},d;for(d in a)b[d]=a[d];return b})};function Eh(a,b){if(null==b)return"NULL";switch(a){case 1:return b?1:0;case 3:case 4:return b;case 0:return"'"+Zb(b)+"'";default:return"'"+b.toString()+"'"}}function Fh(a,b){var c=a.Zb?"INSERT OR REPLACE":"INSERT",d=a.Ka.jb(),c=c+(" INTO "+a.Ka.getName()+"("),c=c+d.map(function(a){return a.getName()}).join(", "),c=c+") VALUES (";return a.values.map(function(a){var e=d.map(function(c){var d=a.l[c.getName()];return b?null!=d?"#":"NULL":Eh(c.H(),d)});return c+e.join(", ")+");"}).join("\n")}
function Gh(a){switch(a){case "between":return"BETWEEN";case "eq":return"=";case "gte":return">=";case "gt":return">";case "in":return"IN";case "lte":return"<=";case "lt":return"<";case "match":return"LIKE";case "neq":return"<>";default:return"UNKNOWN"}}function Hh(a,b,c,d){return a instanceof Dd?"?"+a.Ba().toString():d?null!=a?"#":"NULL":"match"==b?"'"+a.toString()+"'":"in"==b?"("+a.map(function(a){return Eh(c,a)}).join(", ")+")":"between"==b?Eh(c,a[0])+" AND "+Eh(c,a[1]):Eh(c,a).toString()}
function Ih(a,b){return J(a).map(function(a){return"("+Jh(a,b)+")"}).join("and"==a.nb?" AND ":" OR ")}function Kh(a){return[a.ga.j(),Gh(a.D),a.ma.j()].join(" ")}function Jh(a,b){if(a instanceof Xd){var c=a.I.j(),d=Gh(a.D);a=Hh(a.value,a.D,a.I.H(),b);return"="==d&&"NULL"==a?[c,"IS NULL"].join(" "):"<>"==d&&"NULL"==a?[c,"IS NOT NULL"].join(" "):[c,d,a].join(" ")}if(a instanceof vg)return Ih(a,b);if(a instanceof yg)return Kh(a);throw new D(357,typeof a);}
function Lh(a,b){return(a=Jh(a,b))?" WHERE "+a:""}function Mh(a,b){var c="UPDATE "+a.table.getName()+" SET ",c=c+a.set.map(function(a){var b=a.I.j()+" = ";return-1!=a.Pc?b+"?"+a.Pc.toString():b+Eh(a.I.H(),a.value).toString()}).join(", ");a.u&&(c+=Lh(a.u,b));return c+";"}
function Nh(a,b){var c="*";a.f.length&&(c=a.f.map(function(a){return a.Ja?a.j()+" AS "+a.Ja:a.j()}).join(", "));c="SELECT "+c+" FROM ";null!=a.ab&&0!=a.ab.size?c+=Oh(a,b):(c+=a.from.map(Ph).join(", "),a.u&&(c+=Lh(a.u,b)));a.M&&(b=a.M.map(function(a){return a.I.j()+(0==a.order?" DESC":" ASC")}).join(", "),c+=" ORDER BY "+b);a.qa&&(b=a.qa.map(function(a){return a.j()}).join(", "),c+=" GROUP BY "+b);a.W&&(c+=" LIMIT "+a.W.toString());a.K&&(c+=" SKIP "+a.K.toString());return c+";"}
function Ph(a){return Ad(a)!=a.getName()?a.getName()+" AS "+Ad(a):a.getName()}function Oh(a,b){for(var c=og(a.u,function(a){return a instanceof yg}),d=c.map(Kh),e=Ph(a.from[0]),f=1;f<a.from.length;f++)var h=Ph(a.from[f]),e=a.ab.has(c[d.length-f].V())?e+(" LEFT OUTER JOIN "+h):e+(" INNER JOIN "+h),e=e+(" ON ("+d[d.length-f]+")");a=Qd(a.u,0);a instanceof yg||(e+=" WHERE "+Jh(a,b));return e}
function Qh(a,b){b=b||!1;a=a.query.clone();if(a instanceof yh)return Fh(a,b);if(a instanceof vh){var c="DELETE FROM "+a.from.getName();a.u&&(c+=Lh(a.u,b));return c+";"}if(a instanceof Ah)return Mh(a,b);if(a instanceof ge)return Nh(a,b);throw new D(358,typeof a);};function T(a,b){this.global=a;this.Cg=a.b(lc);this.Ha=a.b(mc);this.query=b}q("lf.query.BaseBuilder",T);T.prototype.exec=function(){try{this.Ya()}catch(a){return $a(a)}return new u(function(a,b){var c=new th(this.global,[this.xc()]);qe(this.Ha,c).then(function(b){a(qd(b[0]))},b)},this)};T.prototype.exec=T.prototype.exec;T.prototype.Sf=function(){var a=function(a){return a.Lc(this.query)+"\n"}.bind(this);return ug(Rh(this).Za(),a)};T.prototype.explain=T.prototype.Sf;
T.prototype.bind=function(a){this.query.bind(a);return this};T.prototype.bind=T.prototype.bind;T.prototype.Lg=function(a){return Qh(this,a)};T.prototype.toSql=T.prototype.Lg;T.prototype.Ya=aa();function Rh(a){if(null==a.cf){var b;b=a.Cg;var c=a.query,d=b.ng.create(c);b=b.zg.create(d,c);a.cf=b}return a.cf}T.prototype.xc=function(){return{context:this.query.clone(),de:Rh(this)}};function Sh(a){T.call(this,a,new vh(a.b(A)))}r(Sh,T);q("lf.query.DeleteBuilder",Sh);Sh.prototype.from=function(a){if(null!=this.query.from)throw new D(515);this.query.from=a;return this};Sh.prototype.from=Sh.prototype.from;Sh.prototype.u=function(a){this.Ad();this.query.u=a;return this};Sh.prototype.where=Sh.prototype.u;Sh.prototype.Ad=function(){if(null==this.query.from)throw new D(548);if(null!=this.query.u)throw new D(516);};
Sh.prototype.Ya=function(){Sh.eb.Ya.call(this);if(null==this.query.from)throw new D(517);};function Th(a,b){T.call(this,a,new yh(a.b(A)));this.query.Zb=b||!1}r(Th,T);q("lf.query.InsertBuilder",Th);Th.prototype.Ya=function(){Th.eb.Ya.call(this);var a=this.query;if(null==a.Ka||null==a.values)throw new D(518);if(a.Zb&&null===a.Ka.Kb.nd)throw new D(519);};Th.prototype.Ka=function(a){if(null!=this.query.Ka)throw new D(520);this.query.Ka=a;return this};Th.prototype.into=Th.prototype.Ka;
Th.prototype.values=function(a){if(null!=this.query.values)throw new D(521);a instanceof Dd||a.some(function(a){return a instanceof Dd})?this.query.$b=a:this.query.values=a;return this};Th.prototype.values=Th.prototype.values;function Uh(a){return Vh("and",Array.prototype.slice.call(arguments))}q("lf.op.and",Uh);q("lf.op.or",function(a){return Vh("or",Array.prototype.slice.call(arguments))});function Vh(a,b){var c=new vg(a);b.forEach(function(a){L(c,a)});return c}q("lf.op.not",function(a){a.qd(!0);return a});function U(a,b){T.call(this,a,new ge(a.b(A)));this.He=this.vd=!1;this.query.f=b;Wh(this);Xh(this)}r(U,T);q("lf.query.SelectBuilder",U);U.prototype.Ya=function(){U.eb.Ya.call(this);var a=this.query;if(null==a.from)throw new D(522);if(n(a.Qb)&&!n(a.W)||n(a.Wb)&&!n(a.K))throw new D(523);null!=this.query.qa?Yh(this):Zh(this)};function Wh(a){var b=a.query.f.filter(function(a){return a instanceof R&&"DISTINCT"==a.Jb},a);if(0!=b.length&&(1!=b.length||1!=a.query.f.length))throw new D(524);}
function Yh(a){if(a.query.qa.some(function(a){a=a.H();return 6==a||0==a}))throw new D(525);}function Zh(a){var b=a.query.f.some(function(a){return a instanceof R},a);a=a.query.f.some(function(a){return!(a instanceof R)},a)||0==a.query.f.length;if(b&&a)throw new D(526);}function Xh(a){a.query.f.forEach(function(a){if(a instanceof R&&!$h(a.Jb,a.H()))throw new D(527,a.j());},a)}function ai(a,b){if(null==a.query.from)throw new D(b);}
U.prototype.from=function(a){if(this.He)throw new D(515);this.He=!0;null==this.query.from&&(this.query.from=[]);this.query.from.push.apply(this.query.from,Array.prototype.slice.call(arguments));return this};U.prototype.from=U.prototype.from;U.prototype.u=function(a){ai(this,548);if(this.vd)throw new D(516);this.vd=!0;bi(this,a);return this};U.prototype.where=U.prototype.u;function bi(a,b){null!=a.query.u&&(b=Uh(b,a.query.u));a.query.u=b}
U.prototype.dg=function(a,b){ai(this,542);if(this.vd)throw new D(547);this.query.from.push(a);bi(this,b);return this};U.prototype.innerJoin=U.prototype.dg;U.prototype.lg=function(a,b){ai(this,542);if(!(b instanceof yg))throw new D(541);if(this.vd)throw new D(547);this.query.from.push(a);null==this.query.ab&&(this.query.ab=B());var c=b;Ad(a)!=Ad(b.ma.G())&&(c=b.reverse());this.query.ab.add(c.V());bi(this,c);return this};U.prototype.leftOuterJoin=U.prototype.lg;
U.prototype.W=function(a){if(null!=(this.query.W||this.query.Qb))throw new D(528);if(a instanceof Dd)this.query.Qb=a;else{if(0>a)throw new D(531);this.query.W=a}return this};U.prototype.limit=U.prototype.W;U.prototype.K=function(a){if(null!=(this.query.K||this.query.Wb))throw new D(529);if(a instanceof Dd)this.query.Wb=a;else{if(0>a)throw new D(531);this.query.K=a}return this};U.prototype.skip=U.prototype.K;
U.prototype.M=function(a,b){ai(this,549);null==this.query.M&&(this.query.M=[]);this.query.M.push({I:a,order:null!=b?b:1});return this};U.prototype.orderBy=U.prototype.M;U.prototype.qa=function(a){ai(this,549);if(null!=this.query.qa)throw new D(530);null==this.query.qa&&(this.query.qa=[]);this.query.qa.push.apply(this.query.qa,Array.prototype.slice.call(arguments));return this};U.prototype.groupBy=U.prototype.qa;
function $h(a,b){switch(a){case "COUNT":case "DISTINCT":return!0;case "AVG":case "GEOMEAN":case "STDDEV":case "SUM":return 4==b||3==b;case "MAX":case "MIN":return 4==b||3==b||5==b||2==b}return!1}U.prototype.clone=function(){var a=new U(this.global,this.query.f);a.query=this.query.clone();a.query.Sc=null;return a};U.prototype.clone=U.prototype.clone;function ci(a,b){T.call(this,a,new Ah(a.b(A)));this.query.table=b}r(ci,T);q("lf.query.UpdateBuilder",ci);ci.prototype.set=function(a,b){a={Pc:b instanceof Dd?b.Ba():-1,I:a,value:b};null!=this.query.set?this.query.set.push(a):this.query.set=[a];return this};ci.prototype.set=ci.prototype.set;ci.prototype.u=function(a){this.Ad();this.query.u=a;return this};ci.prototype.where=ci.prototype.u;ci.prototype.Ad=function(){if(null!=this.query.u)throw new D(516);};
ci.prototype.Ya=function(){ci.eb.Ya.call(this);if(null==this.query.set)throw new D(532);if(this.query.set.some(function(a){return a.value instanceof Dd}))throw new D(501);};function di(a){this.query=a;this.Ga=null}di.prototype.ec=function(){null===this.Ga&&(this.Ga=this.Xc());return this.Ga};function ei(a){di.call(this,a)}r(ei,di);ei.prototype.Xc=function(){return this.query.Zb?new ah(this.query.Ka,this.query.values):new $g(this.query.Ka,this.query.values)};function fi(a){di.call(this,a)}r(fi,di);fi.prototype.Xc=function(){var a=new ch(this.query.table),b=null!=this.query.u?new dh(this.query.u.Lb()):null,c=new eh(this.query.table);null===b?L(a,c):(L(b,c),L(a,b));return a};function gi(a,b,c){this.Ga=a;this.fe=b;this.Tb=c}gi.prototype.ec=function(){this.Tb.forEach(function(a){this.Ga=a.cb(this.Ga,this.fe)},this);return this.Ga};function hi(a,b){di.call(this,a);this.Tb=b}r(hi,di);hi.prototype.Xc=function(){var a=new bh(this.query.from),b=null!=this.query.u?new dh(this.query.u.Lb()):null,c=new eh(this.query.from);null===b?L(a,c):(L(b,c),L(a,b));return(new gi(a,this.query,this.Tb)).ec()};function ii(){}r(ii,nh);ii.prototype.cb=function(a,b){if(2>b.from.length)return a;this.F=a;this.sb(this.F,b);return this.F};ii.prototype.sb=function(a,b){if(a instanceof dh&&a.N instanceof yg){var c=a.N.V(),d=Qd(a,0);d instanceof fh&&(c=null!=b.ab&&b.ab.has(c),c=new mh(a.N,c),tg(a,d,c,c),a==this.F&&(this.F=c),a=c)}J(a).forEach(function(a){this.sb(a,b)},this)};function ji(){this.Oc=B()}r(ji,nh);ji.prototype.cb=function(a,b){if(!n(b.u))return a;this.Oc.clear();this.F=a;this.sb(this.F,b);this.Oc.clear();return this.F};ji.prototype.sb=function(a,b){var c=function(a){J(a).forEach(d)}.bind(this),d=function(a){if(!this.Oc.has(a)){if(a instanceof dh){var e=a.N.s(),h=function(a){return ki(this,a,e)}.bind(this),h=li(this,b,a,h);this.Oc.add(a);h!=a&&(null===h.getParent()&&(this.F=h),d(h))}c(a)}}.bind(this);d(a)};
function li(a,b,c,d){var e=c;if(mi(b,c))e=rg(c),li(a,b,c,d);else if(ni(c)){var f=[],e=sg(c,d,function(a){a=new dh(a.N);f.push(a);return a});f.forEach(function(a){li(this,b,a,d)},a)}return e}function ki(a,b,c){var d=B();ng(b).forEach(function(a){d.add(a.table)},a);b instanceof eh&&d.add(b.table);return oc(d,c)}function ni(a){a=Qd(a,0);return a instanceof fh||a instanceof mh}
function mi(a,b){var c=Qd(b,0);if(!(c instanceof dh))return!1;if(null==a.ab)return!0;b=b.N instanceof yg;a=a.ab.has(c.N.V());return b||!a};function oi(a,b){di.call(this,a);this.Tb=b;this.ef=this.Ye=this.nf=this.af=this.ye=this.Ne=this.mf=this.Ee=this.qf=null}r(oi,di);
oi.prototype.Xc=function(){pi(this);2<=this.query.from.length&&(this.Ee=new fh);this.mf=null!=this.query.u?new dh(this.query.u.Lb()):null;this.query.M&&(this.af=new hh(this.query.M));null!=this.query.K&&0<this.query.K&&(this.nf=new lh(this.query.K));null!=this.query.W&&(this.Ye=new kh(this.query.W));null!=this.query.qa&&(this.Ne=new jh(this.query.qa));qi(this);this.ef=new gh(this.query.f||[],this.query.qa||null);var a=ri(this);return(new gi(a,this.query,this.Tb)).ec()};
function ri(a){for(var b=[a.Ye,a.nf,a.ef,a.af,a.ye,a.Ne,a.mf,a.Ee],c=-1,d=null,e=0;e<b.length;e++){var f=b[e];null!==f&&(null===d?d=f:L(b[c],f),c=e)}a.qf.forEach(function(a){L(b[c],a)});return d}function pi(a){a.qf=a.query.from.map(function(a){return new eh(a)},a)}function qi(a){var b=a.query.f.filter(function(a){return a instanceof R});null!=a.query.M&&a.query.M.forEach(function(a){a.I instanceof R&&b.push(a.I)});0<b.length&&(a.ye=new ih(b))};function si(){this.le=[new oh,new rh,new ji,new ii];this.Kd=[new oh]}si.prototype.create=function(a){var b;if(a instanceof yh)b=new ei(a);else if(a instanceof vh)b=new hi(a,this.Kd);else if(a instanceof ge)b=new oi(a,this.le);else if(a instanceof Ah)b=new fi(a);else throw new D(513);b=b.ec();return new Yg(b,a.da())};function ti(a){S.call(this,0,1);this.S=a}r(ti,S);ti.prototype.toString=function(){return"delete("+this.S.getName()+")"};ti.prototype.ca=function(a,b){a=a[0].entries.map(function(a){return a.ua});b.remove(this.S,a);return[ud()]};function ui(a,b){S.call(this,0,-1);this.table=b;this.B=a.b(kc)}r(ui,S);ui.prototype.toString=function(){return"get_row_count("+this.table.getName()+")"};ui.prototype.ca=function(){var a=this.B.get(Te(this.table)),b=new G([],[this.table.getName()]),c=Jg(),a=a.X().ia;null===b.Xa&&(b.Xa=x());b.Xa.set(c.j(),a);return[b]};function vi(a,b){S.call(this,0,-1);this.U=a.b(jc);this.B=a.b(kc);this.table=b}r(vi,S);vi.prototype.toString=function(){var a="table_access("+this.table.getName();null===this.table.Ja||(a+=" as "+this.table.Ja);return a+")"};vi.prototype.ca=function(){var a=this.B.get(Te(this.table)).Sa();return[xd(kf(this.U,a),[Ad(this.table)])]};function wi(a){this.c=a}r(wi,nh);wi.prototype.cb=function(a,b){this.F=a;if(!this.Cd(b))return a;a=og(a,function(a){return a instanceof vi})[0];b=new ui(this.c,a.table);tg(a,a,b,b);return this.F};wi.prototype.Cd=function(a){return 1==a.f.length&&1==a.from.length&&null==a.u&&null==a.W&&null==a.K&&null==a.qa?(a=a.f[0],a instanceof R&&"COUNT"==a.Jb&&a.child instanceof Ig):!1};function xi(a){S.call(this,0,1);this.Me=a}r(xi,S);xi.prototype.toString=function(){return"groupBy("+this.Me.map(function(a){return a.j()}).toString()+")"};xi.prototype.ca=function(a){return yi(this,a[0])};function yi(a,b){var c=new Jc,d=function(a){return this.Me.map(function(b){return H(a,b)},this).join(",")}.bind(a);b.entries.forEach(function(a){c.set(d(a),a)},a);return c.keys().map(function(a){return new G(c.get(a),b.s())},a)};function zi(a,b,c){S.call(this,0,0);this.B=a.b(kc);this.U=a.b(jc);this.N=b;this.Pb=c;this.yd="eq"==this.N.D?0:2;this.Pe=null}r(zi,S);var Ai=["hash","index_nested_loop","nested_loop"];zi.prototype.toString=function(){return"join(type: "+(this.Pb?"outer":"inner")+", impl: "+Ai[this.yd]+", "+this.N.toString()+")"};
zi.prototype.ca=function(a){switch(this.yd){case 0:return[Cg(this.N,a[0],a[1],this.Pb)];case 1:return[Dg(this.N,a[0],a[1],this.Pe,this.U)];default:var b=this.N,c=a[0];a=a[1];var d=this.Pb,e=[c,a];d||(e=zg(b,c,a));c=e[0];a=e[1];for(var e=[],f=c.s(),h=a.s(),k=c.entries.length,p=a.entries.length,K=p+256-1>>8,qa=0;qa<K;){for(var ba=0;ba<k;ba++){var xb=!1,Tf=H(c.entries[ba],b.ga);if(null!==Tf)for(var Ci=Math.min(qa+1<<8,p),yb=qa<<8;yb<Ci;yb++)if(b.sc(Tf,H(a.entries[yb],b.ma))){var xb=!0,Oc=Cd(c.entries[ba],
f,a.entries[yb],h);e.push(Oc)}d&&!xb&&e.push(Bg(b,c.entries[ba],f))}qa++}b=c.s().concat(a.s());return[new G(e,b)]}};function Bi(a,b){a.yd=1;var c=a.B.get(b.Ba().j());a.Pe={$f:b,rg:b==a.N.ga?a.N.ma:a.N.ga,index:c}};function Di(a){S.call(this,0,-1);this.ff=a}r(Di,S);Di.prototype.toString=function(){return"no_op_step("+this.ff[0].s().join(",")+")"};Di.prototype.ca=g("ff");function Ei(){}r(Ei,nh);Ei.prototype.cb=function(a,b){this.F=a;if(!this.Cd(b))return a;og(a,function(a){return a instanceof zi}).forEach(this.Bg,this);return this.F};Ei.prototype.Cd=function(a){return 1<a.from.length};
Ei.prototype.Bg=function(a){if("eq"==a.N.D&&!a.Pb){var b=function(b){if(!(b instanceof vi))return null;b=Ad(b.table)==Ad(a.N.ma.G())?a.N.ma:a.N.ga;return null===b.Ba()?null:b},c=b(Qd(a,0)),b=b(Qd(a,1));if(null!==c||null!==b){b=null===b?c:b;Bi(a,b);var d=new G([],[Ad(b.G())]);Td(a,new Di([d]),b==c?0:1)}}};function Fi(a){a=a.map(function(a){return a.yb()});a=wb.apply(null,a);var b=[];vb(a,function(a){b.push(a)});return b}function Gi(a){this.Ob=a}Gi.prototype.Yc=function(){return 1==this.Ob.f.length?[kd()]:[this.Ob.f.map(function(){return kd()})]};function Hi(a,b){this.Ob=a;this.Fa=b;this.Gd=this.We=null}
function Ii(a,b){var c=x();a.Fa.keys().forEach(function(a){var d=this.Fa.get(a).map(function(a){return be(b,a)},this),f=new od([kd()]);d.forEach(function(a){f=pd(f,a.qe())});c.set(a,f)},a);return c}Hi.prototype.Yc=function(a){if(this.We==a)return this.Gd;for(var b=Ii(this,a),c=this.Ob.f.length-1;0<=c;c--){var d=this.Ob.f[c];if(null!==(b.get(d.ba.getName())||null))break;b.set(d.ba.getName(),new od([kd()]))}this.Gd=1==this.Ob.f.length?y(b)[0].yb():Fi(Ji(this,b));this.We=a;return this.Gd};
function Ji(a,b){var c=x(),d=0;a.Ob.f.forEach(function(a){c.set(a.ba.getName(),d);d++});return Ub(b).sort(function(a,b){return c.get(a)-c.get(b)}).map(function(a){return b.get(a)})};function Ki(a,b){this.sd=b;this.B=a.b(kc)}function Li(a){a=a.B.get(Te(a.sd));return Math.floor(.02*a.X().ia)}function Mi(a,b,c){c=c.filter(a.gg,a);if(0==c.length)return null;a=Ni(a,c);if(0==a.length)return null;if(1==a.length)return a[0];var d=Number.MAX_VALUE;return a.reduce(function(a,c){var e=Oi(c,b);return e<d?(d=e,c):a},null)}
function Ni(a,b){return a.sd.Ca().map(function(a){a=new Pi(this.B,a);Qi(a,b);return a},a).filter(function(a){if(null===a.Fa)a=!1;else{for(var b=!1,c=!0,f=0;f<a.$a.f.length;f++){var h=a.Fa.has(a.$a.f[f].ba.getName());if(b&&h){c=!1;break}h||(b=!0)}a=c}return a})}Ki.prototype.gg=function(a){return a instanceof Xd?!a.fd()||a.I.G()!=this.sd||"in"==a.D&&a.value.length>Li(this)?!1:!0:a instanceof vg?a.fd()&&Qd(a,0).I.G()==this.sd?J(a).length<=Li(this):!1:!1};
function Pi(a,b){this.B=a;this.$a=b;this.ag=B(this.$a.f.map(function(a){return a.ba.getName()}));this.Vd=this.Fa=null}function Ri(a){null===a.Vd&&(a.Vd=new Hi(a.$a,a.Fa));return a.Vd}function Qi(a,b){b.forEach(function(a){var b=a.jb()[0].getName();this.ag.has(b)&&(null===this.Fa&&(this.Fa=new Jc),this.Fa.set(b,a.V()))},a)}function Oi(a,b){b=Ri(a).Yc(b);var c=a.B.get(a.$a.j());return b.reduce(function(a,b){return a+c.Vc(b)},0)};function Si(a,b,c,d){S.call(this,0,-1);this.B=a.b(kc);this.index=b;this.Ve=c;this.je=d;this.Nc=this.Mc=!1}r(Si,S);Si.prototype.toString=function(){return"index_range_scan("+this.index.j()+", ?, "+(this.je?"reverse":"natural")+(this.Mc?", limit:?":"")+(this.Nc?", skip:?":"")+")"};Si.prototype.Lc=function(a){var b=this.toString(),c=this.Ve.Yc(a),b=b.replace("?",c.toString());this.Mc&&(b=b.replace("?",a.W.toString()));this.Nc&&(b=b.replace("?",a.K.toString()));return b};
Si.prototype.ca=function(a,b,c){a=this.Ve.Yc(c);b=this.B.get(this.index.j());c=(1==a.length&&a[0]instanceof E&&ld(a[0])?pf(b.get(a[0].from),!1,this.Mc?c.W:void 0,this.Nc?c.K:void 0):b.Sa(a,this.je,this.Mc?c.W:void 0,this.Nc?c.K:void 0)).map(function(a){return new Vb(a,{})},this);return[xd(c,[this.index.kc])]};function Ti(){S.call(this,0,0)}r(Ti,S);Ti.prototype.toString=l("multi_index_range_scan()");
Ti.prototype.ca=function(a){var b=x();a.forEach(function(a){a.entries.forEach(function(a){b.set(a.ua.id(),a)})});var c=y(b);return[new G(c,a[0].s())]};function Ui(a){S.call(this,0,1);this.hc=a}r(Ui,S);Ui.prototype.toString=l("select(?)");Ui.prototype.Lc=function(a){a=be(a,this.hc);return this.toString().replace("?",a.toString())};Ui.prototype.ca=function(a,b,c){return[be(c,this.hc).eval(a[0])]};function Vi(a,b){S.call(this,0,1);this.U=a.b(jc);this.S=b}r(Vi,S);Vi.prototype.toString=function(){return"table_access_by_row_id("+this.S.getName()+")"};Vi.prototype.ca=function(a){return[xd(kf(this.U,rd(a[0])),[Ad(this.S)])]};function Wi(a){this.c=a}r(Wi,nh);Wi.prototype.cb=function(a,b){this.F=a;og(a,function(a){return a instanceof vi}).forEach(function(a){var c=Xi(a);if(0!=c.length){var e=Mi(new Ki(this.c,a.table),b,c.map(function(a){return be(b,a.hc)}));if(null!==e){var f=x();c.forEach(function(a){f.set(a.hc,a)},this);this.F=Yi(this,e,f,a)}}},this);return this.F};function Xi(a){var b=[];for(a=a.getParent();a;){if(a instanceof Ui)b.push(a);else if(a instanceof zi)break;a=a.getParent()}return b}
function Yi(a,b,c,d){(null===b.Fa?[]:b.Fa.values()).map(function(a){return c.get(a)}).forEach(pg);b=new Si(a.c,b.$a,Ri(b),!1);a=new Vi(a.c,d.table);L(a,b);tg(d,d,a,b);return b.Za()};function Zi(a,b){S.call(this,0,-1);this.B=a.b(kc);this.S=b}r(Zi,S);Zi.prototype.toString=function(){return"insert("+this.S.getName()+")"};Zi.prototype.ca=function(a,b,c){$i(this.S,c.values,this.B);b.zb(this.S,c.values);return[xd(c.values,[this.S.getName()])]};function $i(a,b,c){a=a.Kb.nd;if(null===a?0:a.f[0].autoIncrement){var d=a.f[0].ba.getName();c=c.get(a.j()).X().Bc;var e=null===c?0:c;b.forEach(function(a){if(0==a.l[d]||null==a.l[d])e++,a.l[d]=e})}}
function aj(a,b){S.call(this,0,-1);this.B=a.b(kc);this.S=b}r(aj,S);aj.prototype.toString=function(){return"insert_replace("+this.S.getName()+")"};aj.prototype.ca=function(a,b,c){$i(this.S,c.values,this.B);b.Rd(this.S,c.values);return[xd(c.values,[this.S.getName()])]};function bj(){S.call(this,0,1)}r(bj,S);bj.prototype.toString=l("limit(?)");bj.prototype.Lc=function(a){return this.toString().replace("?",a.W.toString())};bj.prototype.ca=function(a,b,c){a[0].entries.splice(c.W);return a};function cj(a){S.call(this,0,1);this.M=a}r(cj,S);m=cj.prototype;m.toString=function(){return"order_by("+he(this.M)+")"};m.ca=function(a){if(1==a.length){var b;b=a[0];for(var c=null,d=0;d<this.M.length;d++){var e=Kg(this.M[d].I);if(null!==b.Xa&&b.Xa.has(e.j())){c=e;break}}b=c;(null===b?a[0]:sd(a[0],b)).entries.sort(this.Pf.bind(this))}else a.sort(this.Eg.bind(this));return a};
m.Z=function(a,b){var c,d,e,f=-1;do f++,e=this.M[f].I,c=this.M[f].order,d=a(e),e=b(e);while(d==e&&f+1<this.M.length);a=d<e?-1:d>e?1:0;return 1==c?a:-a};m.Eg=function(a,b){return this.Z(function(b){return b instanceof R?sd(a,b):H(a.entries[a.entries.length-1],b)},function(a){return a instanceof R?sd(b,a):H(b.entries[b.entries.length-1],a)})};m.Pf=function(a,b){return this.Z(function(b){return H(a,b)},function(a){return H(b,a)})};function dj(a,b){this.Ma=a;this.J=b}function ej(a){return a.J.some(function(a){return a instanceof R},a)?fj(a):gj(a)}function fj(a){if(1==a.J.length&&"DISTINCT"==a.J[0].Jb)return a=sd(a.Ma,a.J[0]).entries.map(function(a){var b=new yd(new Vb(-1,{}),1<this.Ma.L.size);Bd(b,this.J[0],H(a,this.J[0].child));return b},a),new G(a,[]);var b=new yd(new Vb(-1,{}),1<a.Ma.L.size);a.J.forEach(function(a){var c=a instanceof R?sd(this.Ma,a):H(this.Ma.entries[0],a);Bd(b,a,c)},a);return new G([b],a.Ma.s())}
function gj(a){var b=Array(a.Ma.entries.length),c=1<a.Ma.L.size;a.Ma.entries.forEach(function(a,e){b[e]=new yd(new Vb(a.ua.id(),{}),c);this.J.forEach(function(c){Bd(b[e],c,H(a,c))},this)},a);return new G(b,a.Ma.s())}function hj(a,b){var c=a.map(function(a){return ej(new dj(a,b)).entries[0]});return new G(c,a[0].s())};function ij(a,b){S.call(this,0,1);this.f=a;this.Nb=b}r(ij,S);ij.prototype.toString=function(){var a="project("+this.f.toString();if(null!==this.Nb)var b=this.Nb.map(function(a){return a.j()}).join(", "),a=a+(", groupBy("+b+")");return a+")"};ij.prototype.ca=function(a){0==a.length?a=[ud()]:1==a.length?(a=a[0],a=[0==this.f.length?a:ej(new dj(a,this.f))]):a=[hj(a,this.f)];return a};function jj(a){return a.f.some(function(a){return a instanceof R})||null!==a.Nb};function kj(){S.call(this,0,1)}r(kj,S);kj.prototype.toString=l("skip(?)");kj.prototype.Lc=function(a){return this.toString().replace("?",a.K.toString())};kj.prototype.ca=function(a,b,c){return[new G(a[0].entries.slice(c.K),a[0].s())]};function lj(){}r(lj,nh);lj.prototype.cb=function(a,b){if(!n(b.W)&&!n(b.K))return a;var c=mj(a);if(null===c)return a;og(a,function(a){return a instanceof bj||a instanceof kj}).forEach(function(a){a instanceof bj?c.Mc=!0:c.Nc=!0;pg(a)},this);return c.Za()};function mj(a){a=og(a,function(a){return a instanceof Si},function(a){return a instanceof ij&&jj(a)||a instanceof cj||1!=J(a).length||a instanceof Ui});return 0<a.length?a[0]:null};function nj(a){this.c=a}r(nj,nh);nj.prototype.cb=function(a,b){this.F=a;var c=oj(this,b);if(0==c.length)return this.F;var d,e=0;do d=c[e++],a=pj(this,d,b);while(null===a&&e<c.length);if(null===a)return this.F;b=qj(this,a[0].$a.kc);return null===b?this.F:this.F=rj(this,d,b,a)};function oj(a,b){return og(a.F,function(a){if(!(a instanceof Ui))return!1;a=be(b,a.hc);return a instanceof vg&&"or"==a.nb})}function qj(a,b){return og(a.F,function(a){return a instanceof vi&&a.table.getName()==b})[0]||null}
function pj(a,b,c){b=be(c,b.hc);var d=b.s();if(1!=d.size)return null;var d=C(d)[0],e=new Ki(a.c,d),f=null;return J(b).every(function(a){a=Mi(e,c,[a]);null===a||(null===f?f=[a]:f.push(a));return null!==a})?f:null}function rj(a,b,c,d){var e=new Vi(a.c,c.table),f=new Ti;L(e,f);d.forEach(function(a){a=new Si(this.c,a.$a,Ri(a),!1);L(f,a)},a);pg(b);tg(c,c,e,f);return f.Za()};function sj(a){this.c=a}r(sj,nh);sj.prototype.cb=function(a,b){b=tj(a,b);if(null===b)return a;a:{var c=b;a=uj(Qd(b,0));if(null!==a){var d;d=b.M;for(var e=null,f=a.table.Ca(),h=0;h<f.length&&null===e;h++)e=vj(f[h],d);d=e;if(null===d){a=c;break a}c=new Si(this.c,d.$a,new Gi(d.$a),d.Se);d=new Vi(this.c,a.table);L(d,c);pg(b);c=tg(a,a,d,c)}a=c}a==b&&(a=b,c=wj(Qd(b,0)),null!==c&&(d=vj(c.index,b.M),null!==d&&(c.je=d.Se,a=pg(b).parent)));return a.Za()};
function wj(a){a=og(a,function(a){return a instanceof Si},function(a){return 1!=J(a).length});return 0<a.length?a[0]:null}function uj(a){a=og(a,function(a){return a instanceof vi},function(a){return 1!=J(a).length});return 0<a.length?a[0]:null}function tj(a,b){return n(b.M)?og(a,function(a){return a instanceof cj})[0]:null}function vj(a,b){if(a.f.length!=b.length||!b.every(function(b,d){return b.I.getName()==a.f[d].ba.getName()}))return null;b=xj(b,a);return b[0]||b[1]?{$a:a,Se:b[1]}:null}
function xj(a,b){var c=a.reduce(function(a,b){return a<<1|(0==b.order?0:1)},0),d=b.f.reduce(function(a,b){return a<<1|(0==b.order?0:1)},0),c=c^d;return[0==c,c==Math.pow(2,Math.max(a.length,b.f.length))-1]};function yj(a,b,c){this.Ga=a;this.fe=b;this.Tb=c}yj.prototype.ec=function(){this.Tb.forEach(function(a){this.Ga=a.cb(this.Ga,this.fe)},this);return this.Ga};function zj(a){S.call(this,0,1);this.S=a}r(zj,S);zj.prototype.toString=function(){return"update("+this.S.getName()+")"};zj.prototype.ca=function(a,b,c){a=a[0].entries.map(function(a){var b=this.S.ib(a.ua.Ia());c.set.forEach(function(a){b.l[a.I.getName()]=a.value},this);return b},this);b.update(this.S,a);return[ud()]};function Aj(a){this.c=a;this.le=[new Ei,new Wi(this.c),new nj(this.c),new sj(this.c),new lj,new wi(this.c)];this.Kd=[new Wi(this.c)]}Aj.prototype.create=function(a,b){var c=a.Za();if(c instanceof ah||c instanceof $g)return Bj(this,a,b);if(c instanceof gh||c instanceof kh||c instanceof lh)return Bj(this,a,b,this.le);if(c instanceof bh||c instanceof ch)return Bj(this,a,b,this.Kd);throw new D(8);};
function Bj(a,b,c,d){a=mg(b.Za(),a.qg.bind(a));null!=d&&(a=(new yj(a,c,d)).ec());return new ie(a,b.da())}
Aj.prototype.qg=function(a){if(a instanceof gh)return new ij(a.f,a.Nb);if(a instanceof jh)return new xi(a.f);if(a instanceof ih)return new Og(a.f);if(a instanceof hh)return new cj(a.M);if(a instanceof lh)return new kj;if(a instanceof kh)return new bj;if(a instanceof dh)return new Ui(a.N.V());if(a instanceof fh)return new sh;if(a instanceof mh)return new zi(this.c,a.N,a.Pb);if(a instanceof eh)return new vi(this.c,a.table);if(a instanceof bh)return new ti(a.table);if(a instanceof ch)return new zj(a.table);
if(a instanceof ah)return new aj(this.c,a.table);if(a instanceof $g)return new Zi(this.c,a.table);throw new D(514);};function Cj(a){this.ng=new si;this.zg=new Aj(a)};function Dj(){this.Ze=x()}function Ej(a,b){var c=a.Ze.get(b.getName())||null;null===c&&(c=new Fj,a.Ze.set(b.getName(),c));return c}function Gj(a,b,c,d){c.forEach(function(a){a=Ej(this,a);0==d?(a.bb=null,a.tc=b):3==d?(null===a.Vb&&(a.Vb=B()),a.Vb.add(b),null===a.Va&&(a.Va=B()),a.Va.delete(b)):1==d?(null===a.Va&&(a.Va=B()),a.Va.add(b)):2==d&&(a.bb=b)},a)}
function Hj(a,b,c,d){var e=!0;c.forEach(function(a){if(e){a=Ej(this,a);var c=null===a.Va||0==a.Va.size;e=0==d?(null===a.Vb||0==a.Vb.size)&&c&&null===a.tc&&null!==a.bb&&a.bb==b:3==d?null===a.tc&&null===a.bb&&null!==a.Va&&a.Va.has(b):1==d?null===a.bb:c&&(null===a.bb||a.bb==b)}},a);return e}function Ij(a,b,c,d){var e=Hj(a,b,c,d);e&&Gj(a,b,c,d);return e}Dj.prototype.releaseLock=function(a,b){b.forEach(function(b){Ej(this,b).releaseLock(a)},this)};
function Jj(a,b){b.forEach(function(a){Ej(this,a).bb=null},a)}function Fj(){this.Vb=this.Va=this.bb=this.tc=null}Fj.prototype.releaseLock=function(a){this.tc==a&&(this.tc=null);this.bb==a&&(this.bb=null);null===this.Va||this.Va.delete(a);null===this.Vb||this.Vb.delete(a)};function Kj(){this.Sb=new Lj;this.Ac=new Dj}function qe(a,b){(2>b.getPriority()||2>b.getPriority())&&Jj(a.Ac,b.da());a.Sb.zb(b);Mj(a);return b.Cb.ha}function Mj(a){for(var b=a.Sb.yb(),c=0;c<b.length;c++){var d=b[c];if(0==d.H()?Nj(a,d,1,3):Nj(a,d,2,0)){a.Sb.remove(d);var e=a;d.exec().then(e.wg.bind(e,d),e.vg.bind(e,d))}}}function Nj(a,b,c,d){var e=!1;Ij(a.Ac,b.V(),b.da(),c)&&(e=Ij(a.Ac,b.V(),b.da(),d));return e}Kj.prototype.wg=function(a,b){this.Ac.releaseLock(a.V(),a.da());a.Cb.resolve(b);Mj(this)};
Kj.prototype.vg=function(a,b){this.Ac.releaseLock(a.V(),a.da());a.Cb.reject(b);Mj(this)};function Lj(){this.Sb=[]}Lj.prototype.zb=function(a){of(this.Sb,a,function(a,c){var b=a.getPriority()-c.getPriority();return 0==b?a.V()-c.V():b})};Lj.prototype.yb=function(){return this.Sb.slice()};Lj.prototype.remove=function(a){var b=this.Sb;a=wa(b,a);var c;(c=0<=a)&&Array.prototype.splice.call(b,a,1);return c};function Oj(){this.Jc=x()}var Pj;function Qj(){Pj||(Pj=new Oj);return Pj}Oj.prototype.clear=function(){this.Jc.clear()};Oj.prototype.clear=Oj.prototype.clear;Oj.prototype.pb=function(a,b){this.Jc.set(a.toString(),b);return b};Oj.prototype.registerService=Oj.prototype.pb;Oj.prototype.b=function(a){var b=this.Jc.get(a.toString())||null;if(null===b)throw new D(7,a.toString());return b};Oj.prototype.getService=Oj.prototype.b;Oj.prototype.gd=function(a){return this.Jc.has(a.toString())};
Oj.prototype.isRegistered=Oj.prototype.gd;function Rj(){var a=Qj();return Ub(a.Jc)};function Sj(a,b,c,d){return null!=a?null!=b?Tj(a,b,c,d):Uj(a):Vj()}function Wj(a){var b="";try{b=JSON.stringify(a)}catch(c){}return b}function Xj(a){var b=Qj();a=new hc("ns_"+a);return b.gd(a)?b.b(a):null}function Vj(){var a={};Rj().forEach(function(b){"ns_"==b.substring(0,3)&&(b=b.substring(3),a[b]=Xj(b).b(A).version())});return Wj(a)}function Uj(a){a=Xj(a);var b={};if(null!=a){var c=a.b(kc);a.b(A).oa().forEach(function(a){b[a.getName()]=c.get(Te(a)).X().ia})}return Wj(b)}
function Tj(a,b,c,d){var e=Xj(a);a=[];if(null!=e){var f=null;try{f=e.b(A).table(b)}catch(h){}null!=f&&(b=e.b(kc),e=e.b(jc),c=b.get(Te(f)).Sa(void 0,!1,c,d),c.length&&(a=kf(e,c).map(function(a){return a.l})))}return Wj(a)};function Yj(a,b){this.Ld=Md();this.ge=a;this.jd=b;this.J=Zj(this)}function Zj(a){if(0<a.ge.f.length)return a.ge.f;var b=[];a.ge.from.forEach(function(a){a.jb().forEach(function(a){b.push(a)})});return b}Yj.prototype.Z=function(a,b){return this.J.every(function(c){return Nd(this.Ld,c.H(),"eq")(H(a,c),H(b,c))},this)};
function ak(a,b,c){var d=null===b?[]:b.entries,e=nb(d,c.entries,a.Z.bind(a),function(a){return d[a]});b=[];for(var f=0,h=0;h<d.length;h++){var k=d[h];e[f]==k?f++:(k=a.jd.splice(f,1),k=bk(h,k,0,a.jd),b.push(k))}e=nb(d,c.entries,a.Z.bind(a),function(a,b){return c.entries[b]});for(h=f=0;h<c.entries.length;h++)k=c.entries[h],e[f]==k?f++:(a.jd.splice(h,0,k.ua.l),k=bk(h,[],1,a.jd),b.push(k));return b}function bk(a,b,c,d){return{addedCount:c,index:a,object:d,removed:b,type:"splice"}};function ck(){this.dc=x()}ck.prototype.xd=function(a,b){var c=ka(a.query).toString(),d=this.dc.get(c)||null;null===d&&(d=new dk(a),this.dc.set(c,d));d.xd(b)};ck.prototype.he=function(a,b){a=ka(a.query).toString();var c=this.dc.get(a)||null;c.he(b);0<c.Dc.size||this.dc.delete(a)};function pe(a,b){var c=B();b.forEach(function(a){c.add(a.getName())});var d=[];a.dc.forEach(function(a){a=a.xc();a.context.from.some(function(a){return c.has(a.getName())})&&d.push(a)});return d}
function ne(a,b,c){b=ka(null!=b.Sc?b.Sc:b).toString();a=a.dc.get(b)||null;null!==a&&ek(a,c)}function dk(a){this.Cf=a;this.Dc=B();this.tg=[];this.Xe=null;this.Nf=new Yj(a.query,this.tg)}dk.prototype.xd=function(a){this.Dc.has(a)||this.Dc.add(a)};dk.prototype.he=function(a){return this.Dc.delete(a)};dk.prototype.xc=function(){var a=this.Cf;return{context:a.query,de:Rh(a)}};function ek(a,b){var c=ak(a.Nf,a.Xe,b);a.Xe=b;0<c.length&&a.Dc.forEach(function(a){a(c)})};function fk(a,b){var c=a.b(A),d=b||{};b=new jf(c);a.pb(jc,b);b=null;var e=!1;null!=d.storeType?b=d.storeType:(n(Tb)||(Tb=new Sb),b=Tb,b=b.bg?0:b.Qg?4:1);switch(b){case 0:b=new Pe(a,c);break;case 1:b=new We(c);break;case 5:b=new Ye(c);break;case 4:b=new ff(a,c,d.webSqlDbSize);break;case 3:b=new Ce(c,d.firebase);e=!0;break;default:throw new D(300);}a.pb(ic,b);var f=new lg;a.pb(kc,f);return b.Da(d.onUpgrade).then(function(){var b=new Cj(a);a.pb(lc,b);b=new Kj;a.pb(mc,b);b=new ck;a.pb(nc,b);return f.Da(c)}).then(function(){if(e){var b=
new re(a);b.Na.subscribe(b.Zd.bind(b))}d.enableInspector&&(window.top["#lfInspect"]=Sj);return(new eg(a)).Da(c)})};function gk(a){this.c=a;this.g=a.b(A);this.aa=B(this.g.oa());this.Cb=w()}function hk(a){var b=a.c.b(kc),c=a.c.b(jc),d={};a.g.oa().forEach(function(a){var e=b.get(Te(a)).Sa(),e=kf(c,e).map(function(a){return a.l});d[a.getName()]=e});return{name:a.g.name(),version:a.g.version(),tables:d}}m=gk.prototype;m.exec=function(){var a=hk(this),a=new yd(new Vb(-1,a),!0);return v([new G([a],[])])};m.H=l(0);m.da=g("aa");m.V=function(){return ka(this)};m.getPriority=l(0);function ik(a,b){this.c=a;this.g=a.b(A);this.aa=B(this.g.oa());this.Cb=w();this.Aa=b;this.Na=a.b(ic);this.U=a.b(jc);this.B=a.b(kc)}m=ik.prototype;
m.exec=function(){if(!(this.Na instanceof Pe||this.Na instanceof We||this.Na instanceof ff))throw new D(300);var a;a:{a=this.g.oa();for(var b=0;b<a.length;++b)if(0<this.B.get(Te(a[b])).X().ia){a=!1;break a}a=!0}if(!a)throw new D(110);if(this.g.name()!=this.Aa.name||this.g.version()!=this.Aa.version)throw new D(111);if(null==this.Aa.tables)throw new D(112);return jk(this)};m.H=l(1);m.da=g("aa");m.V=function(){return ka(this)};m.getPriority=l(0);
function jk(a){var b=new bd(a.c,a.aa),b=a.Na.Db(a.H(),C(a.aa),b),c;for(c in a.Aa.tables){var d=a.g.table(c),e=a.Aa.tables[c].map(function(a){return d.vb(a)}),f=b.G(c,d.ib,0);a.U.Ub(c,e);var h=a.B.jc.get(c)||[];e.forEach(function(a){h.forEach(function(b){var c=a.lb(b.getName());b.add(c,a.id())})});f.put(e)}return b.ka()};function kk(a,b){this.c=a;this.Na=a.b(ic);this.Ha=a.b(mc);this.Gb=a.b(nc);this.aa=B(b);this.Pa=new bd(this.c,this.aa);this.Cb=w();this.uc=w();this.ue=w()}m=kk.prototype;m.exec=function(){this.ue.resolve();return this.uc.ha};m.H=l(1);m.da=g("aa");m.V=function(){return ka(this)};m.getPriority=l(2);function lk(a){qe(a.Ha,a);return a.ue.ha}
function mk(a,b){b=b.xc();return b.de.Za().exec(a.Pa,b.context).then(function(a){return qd(a[0])},function(a){this.Pa.Hb();var b=new hb(a.name);this.uc.reject(b);throw a;}.bind(a))}m.ka=function(){this.ja=this.Na.Db(this.H(),C(this.aa),this.Pa);this.ja.ka().then(function(){this.Ic();this.uc.resolve()}.bind(this),function(a){this.Pa.Hb();this.uc.reject(a)}.bind(this));return this.Cb.ha};m.Hb=function(){this.Pa.Hb();this.uc.resolve();return this.Cb.ha};
m.Ic=function(){var a=pe(this.Gb,this.aa);0!=a.length&&(a=new me(this.c,a),qe(this.Ha,a))};m.X=function(){var a=null;null!=this.ja&&(a=this.ja.X());return null===a?new z(!1,0,0,0,0):a};function V(a){this.c=a;this.Ha=a.b(mc);this.Ib=null;this.Ra=0;0==nk.size&&(nk.set(0,B([1,4])),nk.set(1,B([2])),nk.set(2,B([3,5,6])),nk.set(3,B([2,7])),nk.set(4,B([7])),nk.set(5,B([7])),nk.set(6,B([7])))}q("lf.proc.Transaction",V);var nk=x();function ok(a,b){var c=nk.get(a.Ra)||null;if(null===c||!c.has(b))throw new D(107,a.Ra,b);a.Ra=b}
V.prototype.exec=function(a){ok(this,4);var b=[];try{a.forEach(function(a){a.Ya();b.push(a.xc())},this)}catch(c){return ok(this,7),$a(c)}this.Ib=new th(this.c,b);return qe(this.Ha,this.Ib).then(function(a){ok(this,7);return a.map(function(a){return qd(a)})}.bind(this),function(a){ok(this,7);throw a;}.bind(this))};V.prototype.exec=V.prototype.exec;V.prototype.Af=function(a){ok(this,1);this.Ib=new kk(this.c,a);return lk(this.Ib).then(function(){ok(this,2)}.bind(this))};V.prototype.begin=V.prototype.Af;
V.prototype.zf=function(a){ok(this,3);try{a.Ya()}catch(b){return ok(this,7),$a(b)}return mk(this.Ib,a).then(function(a){ok(this,2);return a}.bind(this),function(a){ok(this,7);throw a;}.bind(this))};V.prototype.attach=V.prototype.zf;V.prototype.ka=function(){ok(this,5);return this.Ib.ka().then(function(){ok(this,7)}.bind(this))};V.prototype.commit=V.prototype.ka;V.prototype.Hb=function(){ok(this,6);return this.Ib.Hb().then(function(){ok(this,7)}.bind(this))};V.prototype.rollback=V.prototype.Hb;
V.prototype.X=function(){if(7!=this.Ra)throw new D(105);return this.Ib.X()};V.prototype.stats=V.prototype.X;function W(a){this.c=a;this.g=a.b(A);this.dd=!1}q("lf.proc.Database",W);W.prototype.Da=function(a){this.c.pb(A,this.g);return fk(this.c,a).then(function(){this.dd=!0;this.Ha=this.c.b(mc);return this}.bind(this))};W.prototype.init=W.prototype.Da;W.prototype.xb=g("g");W.prototype.getSchema=W.prototype.xb;function pk(a){if(!a.dd)throw new D(2);}W.prototype.select=function(a){pk(this);return new U(this.c,1!=arguments.length||null!=arguments[0]?Array.prototype.slice.call(arguments):[])};
W.prototype.select=W.prototype.select;W.prototype.zb=function(){pk(this);return new Th(this.c)};W.prototype.insert=W.prototype.zb;W.prototype.Rd=function(){pk(this);return new Th(this.c,!0)};W.prototype.insertOrReplace=W.prototype.Rd;W.prototype.update=function(a){pk(this);return new ci(this.c,a)};W.prototype.update=W.prototype.update;W.prototype.delete=function(){pk(this);return new Sh(this.c)};W.prototype["delete"]=W.prototype.delete;
W.prototype.observe=function(a,b){pk(this);this.c.b(nc).xd(a,b)};W.prototype.observe=W.prototype.observe;W.prototype.unobserve=function(a,b){pk(this);this.c.b(nc).he(a,b)};W.prototype.unobserve=W.prototype.unobserve;W.prototype.Jf=function(){pk(this);return new V(this.c)};W.prototype.createTransaction=W.prototype.Jf;W.prototype.close=function(){try{this.c.b(ic).close()}catch(a){}this.c.clear();this.dd=!1};W.prototype.close=W.prototype.close;
W.prototype.Tf=function(){pk(this);var a=new gk(this.c);return qe(this.Ha,a).then(function(a){return qd(a[0])[0]})};W.prototype["export"]=W.prototype.Tf;W.prototype.import=function(a){pk(this);a=new ik(this.c,a);return qe(this.Ha,a).then(l(null))};W.prototype["import"]=W.prototype.import;function X(a,b,c,d,e,f){this.S=a;this.w=b;this.Te=c;this.Re=d;this.sf=e;this.Ja=f||null}q("lf.schema.BaseColumn",X);m=X.prototype;m.getName=g("w");m.j=function(){return Ad(this.S)+"."+this.w};m.toString=function(){return this.j()};m.G=g("S");m.H=g("sf");X.prototype.getType=X.prototype.H;X.prototype.Ca=function(){null==this.sa&&(this.sa=[],this.G().Ca().forEach(function(a){-1!=a.f.map(function(a){return a.ba.getName()}).indexOf(this.w)&&this.sa.push(a)},this));return this.sa};
X.prototype.Ba=function(){if(!n(this.fa)){var a=this.Ca().filter(function(a){return 1!=a.f.length?!1:a.f[0].ba.getName()==this.getName()},this);this.fa=0<a.length?a[0]:null}return this.fa};X.prototype.fc=g("Re");X.prototype.isNullable=X.prototype.fc;X.prototype.zc=g("Te");X.prototype.Oa=function(a){return Eg(this,a,"eq")};X.prototype.eq=X.prototype.Oa;X.prototype.$e=function(a){return Eg(this,a,"neq")};X.prototype.neq=X.prototype.$e;X.prototype.og=function(a){return Eg(this,a,"lt")};
X.prototype.lt=X.prototype.og;X.prototype.pg=function(a){return Eg(this,a,"lte")};X.prototype.lte=X.prototype.pg;X.prototype.Xf=function(a){return Eg(this,a,"gt")};X.prototype.gt=X.prototype.Xf;X.prototype.Yf=function(a){return Eg(this,a,"gte")};X.prototype.gte=X.prototype.Yf;X.prototype.match=function(a){return Eg(this,a,"match")};X.prototype.match=X.prototype.match;X.prototype.Bf=function(a,b){return Eg(this,[a,b],"between")};X.prototype.between=X.prototype.Bf;
X.prototype.Zf=function(a){return Eg(this,a,"in")};X.prototype["in"]=X.prototype.Zf;X.prototype.jg=function(){return this.Oa(null)};X.prototype.isNull=X.prototype.jg;X.prototype.ig=function(){return this.$e(null)};X.prototype.isNotNull=X.prototype.ig;X.prototype.oc=function(a){return new X(this.S,this.w,this.Te,this.Re,this.sf,a)};X.prototype.as=X.prototype.oc;function qk(a){this.g=a;this.Dd=new Jc;this.ie=new Jc;this.bf=new Jc;this.De=x();this.h=new Jc;this.ze=new Jc;this.gf=new Jc;this.Ce=new Jc;rk(this)}function rk(a){a.g.oa().forEach(function(a){var b=a.getName();a.Kb.Pd.forEach(function(c){this.bf.set(b,this.g.table(c.Ua));this.h.set(c.Ua,a);0==c.action?(this.ie.set(c.Ua,c),this.gf.set(c.Ua,a)):(this.Dd.set(c.Ua,c),this.ze.set(c.Ua,a));this.De.set(a.getName()+"."+c.tb,c.Ua);this.Ce.set(c.Ua+"."+c.Fc,a.getName())},this)},a)}
function Sc(a,b,c){if(null!=c)return 1==c?a.Dd.get(b):a.ie.get(b);c=a.Dd.get(b);a=a.ie.get(b);return null===c&&null===a?null:(c||[]).concat(a||[])}function zh(a,b){a=b.get(a);return null===a?[]:a}function Bh(a,b){var c=B();b.forEach(function(a){(a=this.De.get(a))&&c.add(a)},a);return C(c).map(function(a){return this.g.table(a)},a)}function xh(a,b,c){return null!=c?0==c?zh(b,a.gf):zh(b,a.ze):zh(b,a.h)}
function Ch(a,b){var c=B();b.forEach(function(a){(a=this.Ce.get(a))&&a.forEach(function(a){c.add(a)})},a);return C(c).map(function(a){return this.g.table(a)},a)};function sk(a,b,c){this.nd=a;this.sg=b;this.Pd=c}q("lf.schema.Constraint",sk);sk.prototype.Wf=g("nd");sk.prototype.getPrimaryKey=sk.prototype.Wf;sk.prototype.Vf=g("Pd");sk.prototype.getForeignKeys=sk.prototype.Vf;function tk(a,b,c){var d=a.ref.split(".");if(2!=d.length)throw new D(540,c);this.Be=b;this.tb=a.local;this.Ua=d[0];this.Fc=d[1];this.name=b+"."+c;this.action=a.action;this.timing=a.timing};function Y(a){uk(a);this.Ld=Md();this.w=a;this.J=x();this.ud=B();this.lc=B();this.hd=B();this.Ea=null;this.sa=x();this.md=!1;this.wb=[]}q("lf.schema.TableBuilder",Y);function vk(a){this.name=a.name;this.order=a.order;this.autoIncrement=a.autoIncrement}var wk=B([0,6]);function uk(a){if(!/^[A-Za-z_][A-Za-z0-9_]*$/.test(a))throw new D(502,a);}function xk(a,b){if(b==a.w)throw new D(546,b);if(a.J.has(b)||a.sa.has(b)||a.lc.has(b))throw new D(503,a.w+"."+b);}
function yk(a,b){var c=!1;b.forEach(function(a){var b=this.J.get(a.name);c=c||a.autoIncrement;if(a.autoIncrement&&3!=b)throw new D(504);},a);if(c&&1<b.length)throw new D(505);}function zk(a){if(null!==a.Ea){var b=a.sa.get(a.Ea).map(function(a){return a.name}),c=0;if(a.wb.some(function(a,e){c=e;return-1!=b.indexOf(a.tb)},a))throw new D(543,a.wb[c].name);}}
function Ak(a){if(null!==a.Ea){var b=function(a){return a.name},c=JSON.stringify(a.sa.get(a.Ea).map(b));a.sa.forEach(function(a,e){if(e!=this.Ea&&(a=a.map(b),JSON.stringify(a)==c))throw new D(544,this.w+"."+e);},a)}}function Bk(a){null===a.Ea||a.sa.get(a.Ea).forEach(function(a){if(this.hd.has(a.name))throw new D(545,this.w+"."+a.name);},a)}Y.prototype.uf=function(a,b){uk(a);xk(this,a);this.J.set(a,b);wk.has(b)&&this.we([a]);return this};Y.prototype.addColumn=Y.prototype.uf;
Y.prototype.wf=function(a,b){var c=this.w;this.Ea="pk"+(c[0].toUpperCase()+c.substring(1));uk(this.Ea);xk(this,this.Ea);a=Ck(this,a,!0,void 0,b);yk(this,a);1==a.length&&this.ud.add(a[0].name);this.lc.add(this.Ea);this.sa.set(this.Ea,a);return this};Y.prototype.addPrimaryKey=Y.prototype.wf;
Y.prototype.vf=function(a,b){uk(a);xk(this,a);b=new tk(b,this.w,a);n(b.action)||(b.action=0);n(b.timing)||(b.timing=0);if(1==b.action&&1==b.timing)throw new D(506);if(!this.J.has(b.tb))throw new D(540,a);this.wb.push(b);this.ve(a,[b.tb],this.ud.has(b.tb));return this};Y.prototype.addForeignKey=Y.prototype.vf;Y.prototype.xf=function(a,b){uk(a);xk(this,a);b=Ck(this,b,!0);1==b.length&&(this.ud.add(b[0].name),Dk(this,b[0].name));this.sa.set(a,b);this.lc.add(a);return this};Y.prototype.addUnique=Y.prototype.xf;
function Dk(a,b){a.wb.forEach(function(a){a.tb==b&&this.lc.add(a.name.split(".")[1])},a)}Y.prototype.we=function(a){Ck(this,a,!1).forEach(function(a){this.hd.add(a.name)},this);return this};Y.prototype.addNullable=Y.prototype.we;Y.prototype.ve=function(a,b,c,d){uk(a);xk(this,a);b=Ck(this,b,!0,d);c&&this.lc.add(a);this.sa.set(a,b);return this};Y.prototype.addIndex=Y.prototype.ve;Y.prototype.Bb=ca("md");Y.prototype.persistentIndex=Y.prototype.Bb;
Y.prototype.xb=function(){zk(this);Ak(this);Bk(this);return new (Ek(this))};Y.prototype.getSchema=Y.prototype.xb;function Ck(a,b,c,d,e){var f=b,f="string"==typeof b[0]?b.map(function(a){return new vk({name:a,order:null!=d?d:1,autoIncrement:e||!1})}):b.map(function(a){return new vk(a)});f.forEach(function(a){if(!this.J.has(a.name))throw new D(508,this.w,a.name);if(c){var b=this.J.get(a.name);if(0==b||6==b)throw new D(509,this.w,a.name);}},a);return f}
function Ek(a){function b(){function b(b){return a.sa.get(b).map(function(a){return{ba:this[a.name],order:a.order,autoIncrement:a.autoIncrement}},this)}var d=Ub(a.J).map(function(b){this[b]=new X(this,b,a.ud.has(b),a.hd.has(b),a.J.get(b));return this[b]},this),e=Ub(a.sa).map(function(c){return new Gg(a.w,c,a.lc.has(c),b.call(this,c))},this);Q.call(this,a.w,d,e,a.md);var f=null===a.Ea?null:new Gg(a.w,a.Ea,!0,b.call(this,a.Ea)),h=d.filter(function(b){return!a.hd.has(b.getName())});this.Kb=new sk(f,
h,a.wb);this.kf=Fk(a,d,e)}r(b,Q);b.prototype.vb=function(a){return new this.kf(Wb++,a)};b.prototype.createRow=b.prototype.vb;b.prototype.ib=function(a){var b={};this.jb().forEach(function(c){var d=c.getName();c=c.H();var e=a.value[d];if(0==c)if(c=e,null!=c&&""!=c){0!=c.length%2&&(c="0"+c);for(var e=new ArrayBuffer(c.length/2),k=new Uint8Array(e),p=0,K=0;p<c.length;p+=2)k[K++]=parseInt(c.substr(p,2),16);c=e}else c=null;else c=2==c?null!=e?new Date(e):null:e;b[d]=c},this);return new this.kf(a.id,b)};
b.prototype.deserializeRow=b.prototype.ib;b.prototype.Ie=g("Kb");b.prototype.getConstraint=b.prototype.Ie;return b}
function Fk(a,b,c){function d(a,d){this.J=b;this.sa=c;Vb.call(this,a,d)}r(d,Vb);d.prototype.Fe=function(){var a={};this.J.forEach(function(b){a[b.getName()]=b.fc()?null:Ic[b.H()]});return a};d.prototype.rf=function(){var a={};this.J.forEach(function(b){var c=b.getName();b=b.H();var d=this.l[c];a[c]=0==b?null!=d?Zb(d):null:2==b?null!=d?d.getTime():null:6==b?null!=d?d:null:d},this);return a};var e=function(a){var b=this.J.get(a.getName()),c=this.Ld.Ue.get(b)||null;return function(b){return c(b[a.getName()])}}.bind(a),
f=function(a){var b=a.map(function(a){return e(a.ba)});return function(a){return b.map(function(b){return b(a)})}}.bind(a),h={};c.forEach(function(a){var b=a.j();a=1==a.f.length?e(a.f[0].ba):f(a.f);h[b]=a});d.prototype.lb=function(a){return-1!=a.indexOf("#")?this.id():h.hasOwnProperty(a)?h[a](this.l):null};return d};function Gk(a,b){this.g=new Z(a,b);this.rb=x();this.vc=!1;this.i=null;this.Uc=!1}q("lf.schema.Builder",Gk);function Hk(a,b){b.wb.forEach(function(a){var c=a.Ua;if(!this.rb.has(c))throw new D(536,a.name);var c=this.rb.get(c).xb(),e=a.Fc;if(!c.hasOwnProperty(e))throw new D(537,a.name);if(b.xb()[a.tb].H()!=c[e].H())throw new D(538,a.name);if(!c[e].zc())throw new D(539,a.name);},a)}
Gk.prototype.Ff=function(a){a.wb.forEach(function(a){this.rb.get(a.Ua).wb.forEach(function(b){if(b.tb==a.Fc)throw new D(534,a.name);},this)},this)};function Ik(a){a.vc||(a.rb.forEach(function(a){Hk(this,a);a=a.xb();this.g.L.set(a.getName(),a)},a),y(a.rb).forEach(a.Ff,a),Jk(a),a.rb.clear(),a.vc=!0)}function Kk(a,b,c){b.se||(b.se=!0,b.$d=!0,b.Ge.forEach(function(a){a=c.get(a);if(!a.se)Kk(this,a,c);else if(a.$d&&b!=a)throw new D(533);},a));b.$d=!1}
function Jk(a){var b=x();a.g.L.forEach(function(a,d){b.set(d,new Lk(d))},a);a.rb.forEach(function(a,d){a.wb.forEach(function(a){b.get(a.Ua).Ge.add(d)})});y(b).forEach(function(a){Kk(this,a,b)},a)}function Lk(a){this.$d=this.se=!1;this.Ge=B();this.kc=a}Gk.prototype.xb=function(){this.vc||Ik(this);return this.g};Gk.prototype.getSchema=Gk.prototype.xb;Gk.prototype.Le=function(){var a=new hc("ns_"+this.g.name()),b=Qj(),c;b.gd(a)?c=b.b(a):(c=new Oj,b.pb(a,c));return c};Gk.prototype.getGlobal=Gk.prototype.Le;
Gk.prototype.connect=function(a){if(this.Uc||null!==this.i&&this.i.dd)throw new D(113);this.Uc=!0;if(null===this.i){var b=this.Le();b.gd(A)||b.pb(A,this.xb());this.i=new W(b)}return this.i.Da(a).then(function(a){this.Uc=!1;return a}.bind(this),function(a){this.Uc=!1;throw a;}.bind(this))};Gk.prototype.connect=Gk.prototype.connect;Gk.prototype.If=function(a){if(this.rb.has(a))throw new D(503,a);if(this.vc)throw new D(535);this.rb.set(a,new Y(a));return this.rb.get(a)};Gk.prototype.createTable=Gk.prototype.If;
Gk.prototype.me=function(a){if(this.vc)throw new D(535);this.g.me(a);return this};Gk.prototype.setPragma=Gk.prototype.me;function Z(a,b){this.w=a;this.Yb=b;this.L=x();this.ee={Of:!1}}q("lf.schema.DatabaseSchema",Z);Z.prototype.name=g("w");Z.prototype.name=Z.prototype.name;Z.prototype.version=g("Yb");Z.prototype.version=Z.prototype.version;Z.prototype.oa=function(){return y(this.L)};Z.prototype.tables=Z.prototype.oa;Z.prototype.table=function(a){if(!this.L.has(a))throw new D(101,a);return this.L.get(a)};
Z.prototype.table=Z.prototype.table;Z.prototype.info=function(){this.Qe||(this.Qe=new qk(this));return this.Qe};Z.prototype.Ag=g("ee");Z.prototype.pragma=Z.prototype.Ag;Z.prototype.me=ca("ee");q("lf.schema.create",function(a,b){return new Gk(a,b)});u.prototype.catch=u.prototype.pe;u.prototype["catch"]=u.prototype.catch;
try{if(module){module.exports=lf;}}catch(e){}}.bind(window))();
//# sourceMappingURL=lovefield.es6.js.map
