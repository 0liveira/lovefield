(function(){'use strict';function aa(){return function(){}}function ba(a){return function(b){this[a]=b}}function g(a){return function(){return this[a]}}function l(a){return function(){return a}}var m,p=this;function q(a){return void 0!==a}function ca(){}
function da(a){var b=typeof a;if("object"==b)if(a){if(a instanceof Array)return"array";if(a instanceof Object)return b;var c=Object.prototype.toString.call(a);if("[object Window]"==c)return"object";if("[object Array]"==c||"number"==typeof a.length&&"undefined"!=typeof a.splice&&"undefined"!=typeof a.propertyIsEnumerable&&!a.propertyIsEnumerable("splice"))return"array";if("[object Function]"==c||"undefined"!=typeof a.call&&"undefined"!=typeof a.propertyIsEnumerable&&!a.propertyIsEnumerable("call"))return"function"}else return"null";
else if("function"==b&&"undefined"==typeof a.call)return"object";return b}function fa(a){return null===a}function ga(a){return null!=a}function ha(a){var b=da(a);return"array"==b||"object"==b&&"number"==typeof a.length}function ia(a){return"string"==typeof a}function ja(a){return"function"==da(a)}function ka(a){return a[ma]||(a[ma]=++na)}var ma="closure_uid_"+(1E9*Math.random()>>>0),na=0;function oa(a,b,c){return a.call.apply(a.bind,arguments)}
function pa(a,b,c){if(!a)throw Error();if(2<arguments.length){var d=Array.prototype.slice.call(arguments,2);return function(){var c=Array.prototype.slice.call(arguments);Array.prototype.unshift.apply(c,d);return a.apply(b,c)}}return function(){return a.apply(b,arguments)}}function qa(a,b,c){qa=Function.prototype.bind&&-1!=Function.prototype.bind.toString().indexOf("native code")?oa:pa;return qa.apply(null,arguments)}
function ra(a,b){var c=Array.prototype.slice.call(arguments,1);return function(){var b=c.slice();b.push.apply(b,arguments);return a.apply(this,b)}}function r(a,b){var c=a.split("."),d=p;c[0]in d||!d.execScript||d.execScript("var "+c[0]);for(var e;c.length&&(e=c.shift());)!c.length&&q(b)?d[e]=b:d=d[e]?d[e]:d[e]={}}
function t(a,b){function c(){}c.prototype=b.prototype;a.Fb=b.prototype;a.prototype=new c;a.prototype.constructor=a;a.ug=function(a,c,f){for(var h=Array(arguments.length-2),k=2;k<arguments.length;k++)h[k-2]=arguments[k];return b.prototype[c].apply(a,h)}};function sa(a){if(Error.captureStackTrace)Error.captureStackTrace(this,sa);else{var b=Error().stack;b&&(this.stack=b)}a&&(this.message=String(a))}t(sa,Error);sa.prototype.name="CustomError";function ta(a,b,c){this.Vf=c;this.zf=a;this.lg=b;this.kd=0;this.fd=null}ta.prototype.get=function(){var a;0<this.kd?(this.kd--,a=this.fd,this.fd=a.next,a.next=null):a=this.zf();return a};ta.prototype.put=function(a){this.lg(a);this.kd<this.Vf&&(this.kd++,a.next=this.fd,this.fd=a)};var ua=Array.prototype,va=ua.indexOf?function(a,b,c){return ua.indexOf.call(a,b,c)}:function(a,b,c){c=null==c?0:0>c?Math.max(0,a.length+c):c;if(ia(a))return ia(b)&&1==b.length?a.indexOf(b,c):-1;for(;c<a.length;c++)if(c in a&&a[c]===b)return c;return-1},wa=ua.forEach?function(a,b,c){ua.forEach.call(a,b,c)}:function(a,b,c){for(var d=a.length,e=ia(a)?a.split(""):a,f=0;f<d;f++)f in e&&b.call(c,e[f],f,a)},xa=ua.map?function(a,b,c){return ua.map.call(a,b,c)}:function(a,b,c){for(var d=a.length,e=Array(d),
f=ia(a)?a.split(""):a,h=0;h<d;h++)h in f&&(e[h]=b.call(c,f[h],h,a));return e},ya=ua.reduce?function(a,b,c,d){d&&(b=qa(b,d));return ua.reduce.call(a,b,c)}:function(a,b,c,d){var e=c;wa(a,function(c,h){e=b.call(d,e,c,h,a)});return e},za=ua.some?function(a,b,c){return ua.some.call(a,b,c)}:function(a,b,c){for(var d=a.length,e=ia(a)?a.split(""):a,f=0;f<d;f++)if(f in e&&b.call(c,e[f],f,a))return!0;return!1};function Aa(a,b,c){return 2>=arguments.length?ua.slice.call(a,b):ua.slice.call(a,b,c)}
function Ba(a){for(var b=[],c=0;c<a;c++)b[c]=0;return b}function Ca(a){for(var b=[],c=0;c<arguments.length;c++){var d=arguments[c];if("array"==da(d))for(var e=0;e<d.length;e+=8192)for(var f=Ca.apply(null,Aa(d,e,e+8192)),h=0;h<f.length;h++)b.push(f[h]);else b.push(d)}return b};var Da;a:{var Ea=p.navigator;if(Ea){var Fa=Ea.userAgent;if(Fa){Da=Fa;break a}}Da=""}function u(a){return-1!=Da.indexOf(a)};function Ga(){return u("Opera")||u("OPR")}function Ha(){return(u("Chrome")||u("CriOS"))&&!Ga()&&!u("Edge")};function Ia(a){p.setTimeout(function(){throw a;},0)}var Ja;
function Ka(){var a=p.MessageChannel;"undefined"===typeof a&&"undefined"!==typeof window&&window.postMessage&&window.addEventListener&&!u("Presto")&&(a=function(){var a=document.createElement("IFRAME");a.style.display="none";a.src="";document.documentElement.appendChild(a);var b=a.contentWindow,a=b.document;a.open();a.write("");a.close();var c="callImmediate"+Math.random(),d="file:"==b.location.protocol?"*":b.location.protocol+"//"+b.location.host,a=qa(function(a){if(("*"==d||a.origin==d)&&a.data==
c)this.port1.onmessage()},this);b.addEventListener("message",a,!1);this.port1={};this.port2={postMessage:function(){b.postMessage(c,d)}}});if("undefined"!==typeof a&&!u("Trident")&&!u("MSIE")){var b=new a,c={},d=c;b.port1.onmessage=function(){if(q(c.next)){c=c.next;var a=c.re;c.re=null;a()}};return function(a){d.next={re:a};d=d.next;b.port2.postMessage(0)}}return"undefined"!==typeof document&&"onreadystatechange"in document.createElement("SCRIPT")?function(a){var b=document.createElement("SCRIPT");
b.onreadystatechange=function(){b.onreadystatechange=null;b.parentNode.removeChild(b);b=null;a();a=null};document.documentElement.appendChild(b)}:function(a){p.setTimeout(a,0)}};function La(){this.ud=this.ic=null}var Na=new ta(function(){return new Ma},function(a){a.reset()},100);La.prototype.add=function(a,b){var c=Na.get();c.set(a,b);this.ud?this.ud.next=c:this.ic=c;this.ud=c};La.prototype.remove=function(){var a=null;this.ic&&(a=this.ic,this.ic=this.ic.next,this.ic||(this.ud=null),a.next=null);return a};function Ma(){this.next=this.scope=this.Hd=null}Ma.prototype.set=function(a,b){this.Hd=a;this.scope=b;this.next=null};
Ma.prototype.reset=function(){this.next=this.scope=this.Hd=null};function Oa(a,b){Pa||Qa();Ra||(Pa(),Ra=!0);Sa.add(a,b)}var Pa;function Qa(){if(p.Promise&&p.Promise.resolve){var a=p.Promise.resolve(void 0);Pa=function(){a.then(Ta)}}else Pa=function(){var a=Ta;!ja(p.setImmediate)||p.Window&&p.Window.prototype&&p.Window.prototype.setImmediate==p.setImmediate?(Ja||(Ja=Ka()),Ja(a)):p.setImmediate(a)}}var Ra=!1,Sa=new La;function Ta(){for(var a=null;a=Sa.remove();){try{a.Hd.call(a.scope)}catch(b){Ia(b)}Na.put(a)}Ra=!1};function v(a,b){this.Qa=0;this.Ye=void 0;this.Vc=this.$b=this.B=null;this.ed=this.Gd=!1;if(a!=ca)try{var c=this;a.call(b,function(a){Ua(c,2,a)},function(a){Ua(c,3,a)})}catch(d){Ua(this,3,d)}}function Wa(){this.next=this.context=this.ec=this.Gc=this.child=null;this.xd=!1}Wa.prototype.reset=function(){this.context=this.ec=this.Gc=this.child=null;this.xd=!1};var Xa=new ta(function(){return new Wa},function(a){a.reset()},100);function Ya(a,b,c){var d=Xa.get();d.Gc=a;d.ec=b;d.context=c;return d}
function w(a){if(a instanceof v)return a;var b=new v(ca);Ua(b,2,a);return b}function Za(a){return new v(function(b,c){c(a)})}function $a(a,b,c){ab(a,b,c,null)||Oa(ra(b,a))}function bb(a){return new v(function(b,c){var d=a.length,e=[];if(d)for(var f=function(a,c){d--;e[a]=c;0==d&&b(e)},h=function(a){c(a)},k=0,n;k<a.length;k++)n=a[k],$a(n,ra(f,k),h);else b(e)})}function x(){var a,b,c=new v(function(c,e){a=c;b=e});return new cb(c,a,b)}
v.prototype.then=function(a,b,c){return db(this,ja(a)?a:null,ja(b)?b:null,c)};v.prototype.then=v.prototype.then;v.prototype.$goog_Thenable=!0;v.prototype.he=function(a,b){return db(this,null,a,b)};function eb(a,b){a.$b||2!=a.Qa&&3!=a.Qa||fb(a);a.Vc?a.Vc.next=b:a.$b=b;a.Vc=b}
function db(a,b,c,d){var e=Ya(null,null,null);e.child=new v(function(a,h){e.Gc=b?function(c){try{var e=b.call(d,c);a(e)}catch(z){h(z)}}:a;e.ec=c?function(b){try{var e=c.call(d,b);!q(e)&&b instanceof gb?h(b):a(e)}catch(z){h(z)}}:h});e.child.B=a;eb(a,e);return e.child}v.prototype.qg=function(a){this.Qa=0;Ua(this,2,a)};v.prototype.rg=function(a){this.Qa=0;Ua(this,3,a)};
function Ua(a,b,c){0==a.Qa&&(a==c&&(b=3,c=new TypeError("Promise cannot resolve to itself")),a.Qa=1,ab(c,a.qg,a.rg,a)||(a.Ye=c,a.Qa=b,a.B=null,fb(a),3!=b||c instanceof gb||hb(a,c)))}function ab(a,b,c,d){if(a instanceof v)return eb(a,Ya(b||ca,c||null,d)),!0;var e;if(a)try{e=!!a.$goog_Thenable}catch(f){e=!1}else e=!1;if(e)return a.then(b,c,d),!0;e=typeof a;if("object"==e&&null!=a||"function"==e)try{var h=a.then;if(ja(h))return ib(a,h,b,c,d),!0}catch(k){return c.call(d,k),!0}return!1}
function ib(a,b,c,d,e){function f(a){k||(k=!0,d.call(e,a))}function h(a){k||(k=!0,c.call(e,a))}var k=!1;try{b.call(a,h,f)}catch(n){f(n)}}function fb(a){a.Gd||(a.Gd=!0,Oa(a.Ef,a))}function jb(a){var b=null;a.$b&&(b=a.$b,a.$b=b.next,b.next=null);a.$b||(a.Vc=null);return b}
v.prototype.Ef=function(){for(var a=null;a=jb(this);){var b=this.Qa,c=this.Ye;if(3==b&&a.ec&&!a.xd)for(var d=void 0,d=this;d&&d.ed;d=d.B)d.ed=!1;if(a.child)a.child.B=null,kb(a,b,c);else try{a.xd?a.Gc.call(a.context):kb(a,b,c)}catch(e){lb.call(null,e)}Xa.put(a)}this.Gd=!1};function kb(a,b,c){2==b?a.Gc.call(a.context,c):a.ec&&a.ec.call(a.context,c)}function hb(a,b){a.ed=!0;Oa(function(){a.ed&&lb.call(null,b)})}var lb=Ia;function gb(a){sa.call(this,a)}t(gb,sa);gb.prototype.name="cancel";
function cb(a,b,c){this.ga=a;this.resolve=b;this.reject=c};/*

 Copyright 2014 The Lovefield Project Authors. All Rights Reserved.

 Licensed under the Apache License, Version 2.0 (the "License");
 you may not use this file except in compliance with the License.
 You may obtain a copy of the License at

     http://www.apache.org/licenses/LICENSE-2.0

 Unless required by applicable law or agreed to in writing, software
 distributed under the License is distributed on an "AS IS" BASIS,
 WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 See the License for the specific language governing permissions and
 limitations under the License.
*/
function y(a,b){this.oa=a;this.o=b||this.we()}var mb=0;m=y.prototype;m.id=g("oa");function nb(a){return a.o}m.we=function(){return{}};m.ff=g("o");m.Ha=function(){return{id:this.oa,value:this.ff()}};m.Cb=function(a){return"#"==a.substr(-1)?this.oa:null};function ob(a){return new y(a.id,a.value)}function pb(a){return new y(mb++,a||{})}function qb(a){if(null==a)return null;a=new Uint8Array(a);for(var b="",c=0;c<a.length;++c)var d=a[c].toString(16),b=b+(2>d.length?"0"+d:d);return b};function rb(a){this.type=a}function sb(a){y.call(this,-1,a)}t(sb,y);function tb(a,b,c,d){c=c||function(a,b){return a==b};d=d||function(b){return a[b]};for(var e=a.length,f=b.length,h=[],k=0;k<e+1;k++)h[k]=[],h[k][0]=0;for(var n=0;n<f+1;n++)h[0][n]=0;for(k=1;k<=e;k++)for(n=1;n<=f;n++)c(a[k-1],b[n-1])?h[k][n]=h[k-1][n-1]+1:h[k][n]=Math.max(h[k-1][n],h[k][n-1]);for(var z=[],k=e,n=f;0<k&&0<n;)c(a[k-1],b[n-1])?(z.unshift(d(k-1,n-1)),k--,n--):h[k-1][n]>h[k][n-1]?k--:n--;return z}function ub(a){return ya(arguments,function(a,c){return a+c},0)}
function vb(a){return ub.apply(null,arguments)/arguments.length}function wb(a){var b=arguments.length;if(2>b)return 0;var c=vb.apply(null,arguments);return ub.apply(null,xa(arguments,function(a){return Math.pow(a-c,2)}))/(b-1)}function xb(a){return Math.sqrt(wb.apply(null,arguments))};var yb="StopIteration"in p?p.StopIteration:{message:"StopIteration",stack:""};function zb(){}zb.prototype.next=function(){throw yb;};zb.prototype.le=function(){return this};function Ab(a){if(a instanceof zb)return a;if("function"==typeof a.le)return a.le(!1);if(ha(a)){var b=0,c=new zb;c.next=function(){for(;;){if(b>=a.length)throw yb;if(b in a)return a[b++];b++}};return c}throw Error("Not implemented");}
function Bb(a,b){if(ha(a))try{wa(a,b,void 0)}catch(c){if(c!==yb)throw c;}else{a=Ab(a);try{for(;;)b.call(void 0,a.next(),void 0,a)}catch(d){if(d!==yb)throw d;}}}function Cb(a){if(za(arguments,function(a){return!a.length})||!arguments.length)return new zb;var b=new zb,c=arguments,d=Ba(c.length);b.next=function(){if(d){for(var a=xa(d,function(a,b){return c[b][a]}),b=d.length-1;0<=b;b--){if(d[b]<c[b].length-1){d[b]++;break}if(0==b){d=null;break}d[b]=0}return a}throw yb;};return b};function Db(a){Eb(a);return a.c.concat()}function Eb(a){if(a.vf!=a.c.length){for(var b=0,c=0;b<a.c.length;){var d=a.c[b];Fb(a.W,d)&&(a.c[c++]=d);b++}a.c.length=c}if(a.vf!=a.c.length){for(var e={},c=b=0;b<a.c.length;)d=a.c[b],Fb(e,d)||(a.c[c++]=d,e[d]=1),b++;a.c.length=c}}function Fb(a,b){return Object.prototype.hasOwnProperty.call(a,b)};/*

 Copyright 2015 The Lovefield Project Authors. All Rights Reserved.

 Licensed under the Apache License, Version 2.0 (the "License");
 you may not use this file except in compliance with the License.
 You may obtain a copy of the License at

     http://www.apache.org/licenses/LICENSE-2.0

 Unless required by applicable law or agreed to in writing, software
 distributed under the License is distributed on an "AS IS" BASIS,
 WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 See the License for the specific language governing permissions and
 limitations under the License.
*/
function A(){return new window.Map}function Gb(a){var b=0,c=Array(a.size);a.forEach(function(a,e){c[b++]=e});return c}function B(a){var b=0,c=Array(a.size);a.forEach(function(a){c[b++]=a});return c};var Hb={};r("lf.TransactionType",Hb);Hb.READ_ONLY=0;Hb.READ_WRITE=1;function Ib(a,b){this.Oa=a;this.gf=b;this.X=x()}Ib.prototype.ia=function(){try{Jb(this.Oa)}catch(a){return Za(a)}return(0==this.gf?this.lc():Kb(this)).then(function(a){this.Oa.ia();return a}.bind(this))};function Kb(a){Lb(a);Mb(a);return a.lc()}
function Lb(a){a.Oa.nb.forEach(function(a,c){var d=this.Oa.Z().get(c),d=this.G(d.getName(),d.Jb.bind(d)),e=B(a.Ca).map(function(a){return a.id()});0<e.length&&d.remove(e).he(this.Jd,this);e=B(a.pa).map(function(a){return a[1]}).concat(B(a.Ba));d.put(e).he(this.Jd,this)},a)}function Mb(a){Nb(a.Oa).forEach(function(a){var c=this.G(a.getName(),ob),d;c.get([-1]).then(function(a){d=a;return c.remove([])}).then(function(){c.put(d);c.put(a.Ha())},this.Jd.bind(this))},a)}Ib.prototype.Jd=function(a){this.X.reject(a)};function Ob(a){this.mg=a}Ob.prototype.toString=g("mg");var Pb=new Ob("backstore"),Qb=new Ob("cache"),Sb=new Ob("indexstore"),Tb=new Ob("engine"),Ub=new Ob("runner"),Vb=new Ob("observerregistry"),Wb=new Ob("schema");var Xb=Ga(),Yb=u("Trident")||u("MSIE"),Zb=u("Edge"),$b=u("Gecko")&&!(-1!=Da.toLowerCase().indexOf("webkit")&&!u("Edge"))&&!(u("Trident")||u("MSIE"))&&!u("Edge"),ac=-1!=Da.toLowerCase().indexOf("webkit")&&!u("Edge");function bc(){var a=Da;if($b)return/rv\:([^\);]+)(\)|;)/.exec(a);if(Zb)return/Edge\/([\d\.]+)/.exec(a);if(Yb)return/\b(?:MSIE|rv)[: ]([^\);]+)(\)|;)/.exec(a);if(ac)return/WebKit\/(\S+)/.exec(a)}
(function(){if(Xb&&p.opera){var a;var b=p.opera.version;try{a=b()}catch(c){a=b}return a}a="";(b=bc())&&(a=b?b[1]:"");return Yb&&(b=(b=p.document)?b.documentMode:void 0,b>parseFloat(a))?String(b):a})();!u("Android")||Ha()||u("Firefox")||Ga();Ha();function C(a){return q(a)?new window.Set(a):new window.Set}function cc(a){var b=0,c=Array(a.size);a.forEach(function(a){c[b++]=a});return c}function dc(a,b){if(b.size>a.size)return!1;var c=!0;b.forEach(function(b){c=c&&a.has(b)});return c};function ec(a,b){this.oa=a;this.o=b||{}}function fc(a){var b=C();a.forEach(function(a){b.add(a>>9)});return cc(b)}ec.prototype.U=g("oa");function gc(a,b){b.forEach(function(a){this.o[a.id()]=a.Ha()},a)}function hc(a,b){b.forEach(function(a){delete this.o[a]},a)}ec.prototype.Ha=function(){return{id:this.oa,value:JSON.stringify(this.o)}};function ic(a){return new ec(a.id,JSON.parse(a.value))};function jc(a,b,c){this.aa=a;this.Ib=b;this.Ze=c}m=jc.prototype;m.get=function(a){if(0==a.length)return this.uc();var b=this.Ib;return kc(this,a).then(function(c){return a.map(function(a){var e=c.get(a>>9);return b(e.o[a])})})};function kc(a,b){var c=A(),d=x(),e=fc(b).map(function(a){return new v(function(b,d){var e;try{e=this.aa.get(a)}catch(z){d(z);return}e.onerror=d;e.onsuccess=function(a){a=ic(a.target.result);c.set(a.U(),a);b()}},this)},a);bb(e).then(function(){d.resolve(c)});return d.ga}
m.uc=function(){return new v(function(a,b){var c=[],d;try{d=this.aa.openCursor()}catch(e){b(e);return}d.onerror=b;d.onsuccess=function(){var b=d.result;if(b){var e;e=ic(b.value).o;for(var k in e)c.push(this.Ib(e[k]));b.continue()}else a(c)}.bind(this)},this)};m.Qb=function(a){return new v(function(b,c){var d;try{d=a()}catch(e){c(e);return}d.onsuccess=b;d.onerror=c},this)};
m.put=function(a){if(0==a.length)return w();var b=A();a.forEach(function(a){var d;d=a.id()>>9;var e=b.get(d)||null;null===e&&(e=this.Ze(this.aa.name,d));gc(e,[a]);b.set(d,e)},this);a=B(b).map(function(a){return this.Qb(function(){return this.aa.put(a.Ha())}.bind(this))},this);return bb(a)};
m.remove=function(a){if(0==a.length)return this.Qb(function(){return this.aa.clear()}.bind(this));var b=A();a.forEach(function(a){var d=a>>9,e=b.get(d)||null;null===e&&(e=this.Ze(this.aa.name,d));hc(e,[a]);b.set(d,e)},this);a=B(b).map(function(a){return this.Qb(function(){return 0==Object.keys(a.o).length?this.aa.delete(a.U()):this.aa.put(a.Ha())}.bind(this))},this);return bb(a)};function lc(a,b,c){a=a.i(Qb);var d=[c<<9,(c+1<<9)-1];b=a.Wa(b,d[0],d[1]);c=new ec(c);gc(c,b);return c}
function mc(a,b){return new ec(b)};function nc(){};function oc(a){this.ba=a.i(Qb);this.C=a.i(Sb);this.m=a.i(Wb)}oc.prototype.update=function(a){a.forEach(function(a){pc(this,a);qc(this,a)},this)};function qc(a,b){var c=b.getName();b.Ca.forEach(function(a,b){this.ba.remove(c,b)},a);b.Ba.forEach(function(a){this.ba.set(c,a)},a);b.pa.forEach(function(a){this.ba.set(c,a[1])},a)}function pc(a,b){var c=a.m.table(b.getName());rc(b).forEach(function(a){sc(this,c,a)},a)}
function sc(a,b,c){var d=[];(a.C.gc.get(b.getName())||[]).forEach(function(a){try{tc(a,c),d.push(a)}catch(b){throw d.forEach(function(a){tc(a,[c[1],c[0]])},this),b;}},a)}function tc(a,b){var c=null===b[1]?void 0:b[1].Cb(a.getName()),d=null===b[0]?void 0:b[0].Cb(a.getName());if(!q(d)&&q(c))a.add(c,b[1].id());else if(q(d)&&q(c)){if(null===c||null===d){if(c==d)return}else if(0==a.mc().compare(d,c))return;a.add(c,b[1].id());a.remove(d,b[0].id())}else q(d)&&!q(c)&&a.remove(d,b[0].id())};var uc={};r("lf.ConstraintAction",uc);uc.RESTRICT=0;uc.CASCADE=1;var vc={};r("lf.ConstraintTiming",vc);vc.IMMEDIATE=0;vc.DEFERRABLE=1;var wc={};r("lf.Order",wc);wc.DESC=0;wc.ASC=1;var xc={};r("lf.Type",xc);xc.ARRAY_BUFFER=0;xc.BOOLEAN=1;xc.DATE_TIME=2;xc.INTEGER=3;xc.NUMBER=4;xc.STRING=5;xc.OBJECT=6;var yc={0:null,1:!1,2:Object.freeze(new Date(0)),3:0,4:0,5:"",6:null};r("lf.type.DEFAULT_VALUES",yc);function D(a,b){this.code=a;this.message="http://sn.im/2a0j3wn?c="+a;if(1<arguments.length)for(var c=1;c<=Math.min(4,arguments.length-1);++c)this.message+="&p"+(c-1)+"="+encodeURIComponent(arguments[c].toString().slice(0,64))}t(D,Error);function zc(a){this.C=a.i(Sb);this.m=a.i(Wb);this.Zc=null}function Ac(a,b,c){var d=b.Ab().$f;c.forEach(function(a){d.forEach(function(b){if(null==a.o[b.getName()])throw new D(202,b.l());},this)},a)}function Bc(a,b,c,d){b.Ab().Id().forEach(function(a){a.timing==d&&Cc(this,a,c)},a)}function Cc(a,b,c){var d=Dc(a,b);c.forEach(function(a){if(Ec(a[0],a[1],b.name)&&(a=a[1].o[b.ob],null!==a&&!d.bb(a)))throw new D(203,b.name);},a)}
function Dc(a,b){null===a.Zc&&(a.Zc=A());var c=a.Zc.get(b.name)||null;null===c&&(c=a.m.table(b.wb)[b.Hc].ua(),c=a.C.get(c.l()),a.Zc.set(b.name,c));return c}function Ec(a,b,c){return(null===a?null!==b:null===b)||a.Cb(c)!=b.Cb(c)}function Fc(a,b,c,d){b=Gc(a.m.info(),b.getName());null!=b&&b.forEach(function(a){if(a.timing==d){var b=this.C.get(a.name),h=Dc(this,a);c.forEach(function(c){if(Ec(c[0],c[1],h.getName())&&b.bb(c[0].o[a.Hc]))throw new D(203,a.name);},this)}},a)}
function Hc(a,b,c,d){0!=c.length&&(c=c.map(function(a){return[null,a]}),Bc(a,b,c,d))}function Ic(a,b,c,d){0!=c.length&&(Bc(a,b,c,d),Fc(a,b,c,d))}function Kc(a,b,c,d){0!=c.length&&(c=c.map(function(a){return[a,null]}),Fc(a,b,c,d))};function Lc(a){this.Ba=A();this.pa=A();this.Ca=A();this.w=a}m=Lc.prototype;m.getName=g("w");m.add=function(a){if(this.Ca.has(a.id())){var b=[this.Ca.get(a.id()),a];this.pa.set(a.id(),b);this.Ca.delete(a.id())}else this.Ba.set(a.id(),a)};m.modify=function(a){var b=a[1],c=a[0].id();this.Ba.has(c)?this.Ba.set(c,b):(this.pa.has(c)&&(a=[this.pa.get(a[0].id())[0],b]),this.pa.set(c,a))};
m.delete=function(a){if(this.Ba.has(a.id()))this.Ba.delete(a.id());else if(this.pa.has(a.id())){var b=this.pa.get(a.id())[0];this.pa.delete(a.id());this.Ca.set(a.id(),b)}else this.Ca.set(a.id(),a)};function rc(a){var b=[];a.Ba.forEach(function(a){b.push([null,a])});a.pa.forEach(function(a){b.push(a)});a.Ca.forEach(function(a){b.push([a,null])});return b}m.toString=function(){return"["+Gb(this.Ba).toString()+"], ["+Gb(this.pa).toString()+"], ["+Gb(this.Ca).toString()+"]"};
function Mc(a){var b=new Lc(a.w);a.Ba.forEach(function(a){b.delete(a)});a.Ca.forEach(function(a){b.add(a)});a.pa.forEach(function(a){b.modify([a[1],a[0]])});return b}m.Qf=function(){return 0==this.Ba.size&&0==this.Ca.size&&0==this.pa.size};function Nc(a,b){this.$=A();b.forEach(function(a){this.$.set(a.getName(),a)},this);this.ba=a.i(Qb);this.C=a.i(Sb);this.Ma=new zc(a);this.gd=new oc(a);this.nb=A()}function Nb(a){var b=[];Gb(a.nb).map(function(a){return this.$.get(a)},a).forEach(function(a){a.xb()&&(a.va().forEach(function(a){b.push(this.C.get(a.l()))},this),b.push(this.C.get(a.getName()+".#")))},a);return b}m=Nc.prototype;m.Z=g("$");
function Oc(a){var b=[];a.$.forEach(function(a){a.xb()&&(a.va().forEach(function(a){b.push(a.l())}),b.push(a.getName()+".#"))});return b}m.ub=function(a,b){Pc(this,a);Ac(this.Ma,a,b);Hc(this.Ma,a,b,0);for(var c=0;c<b.length;c++)Qc(this,a,[null,b[c]])};
function Qc(a,b,c){var d=b.getName(),e=a.nb.get(d)||new Lc(d);a.nb.set(d,e);try{sc(a.gd,b,c)}catch(f){throw f;}b=c[0];var h=c[1];null===b&&null!==h?(a.ba.set(d,h),e.add(h)):null!==b&&null!==h?(a.ba.set(d,h),e.modify(c)):null!==b&&null===h&&(a.ba.remove(d,b.id()),e.delete(b))}m.update=function(a,b){Pc(this,a);Ac(this.Ma,a,b);for(var c=0;c<b.length;c++){var d=b[c],d=[this.ba.get(d.id()),d];Ic(this.Ma,a,[d],0);Qc(this,a,d)}};
m.Ld=function(a,b){Pc(this,a);Ac(this.Ma,a,b);for(var c=0;c<b.length;c++){var d=b[c],e=null,f,h=a.Ab().bd();if(null===h)f=null;else{f=this.Ma;var h=h.l(),k=d.Cb(h);f=f.C.get(h).get(k);f=0==f.length?null:f[0]}null!=f?(e=this.ba.get(f),d.oa=f,Ic(this.Ma,a,[[e,d]],0)):Hc(this.Ma,a,[d],0);Qc(this,a,[e,d])}};m.remove=function(a,b){Pc(this,a);Kc(this.Ma,a,b,0);for(var c=0;c<b.length;c++)Qc(this,a,[b[c],null])};
function Jb(a){a.nb.forEach(function(a){var c=this.$.get(a.getName());Hc(this.Ma,c,B(a.Ba),1);Kc(this.Ma,c,B(a.Ca),1);Ic(this.Ma,c,B(a.pa),1)},a)}m.ia=aa();m.Eb=function(){var a=B(this.nb).map(function(a){return Mc(a)});this.gd.update(a)};function Pc(a,b){if(!a.$.has(b.getName()))throw new D(106,b.getName());};function Rc(a,b,c,d){this.b=a;this.s=b;this.ca=null===this.b?!1:c;this.ma=null===this.s?!1:d}Rc.prototype.toString=function(){return(this.ca?"(":"[")+(null===this.b?"unbound":this.b)+", "+(null===this.s?"unbound":this.s)+(this.ma?")":"]")};function Sc(a){if(null===a.b&&null===a.s)return[];var b=null,c=null;null===a.b||(b=new Rc(null,a.b,!1,!a.ca));null===a.s||(c=new Rc(a.s,null,!a.ma,!1));return[b,c].filter(function(a){return null!==a})}
Rc.prototype.reverse=function(){return new Rc(this.s,this.b,this.ma,this.ca)};function Tc(a,b){var c=Uc(a.b,b.b,!0,a.ca,b.ca);if(0==c)return!0;var d=-1==c?a:b,c=1==c?a:b;return null===d.s||d.s>c.b||d.s==c.b&&!d.ma&&!c.ca}function Vc(){return new Rc(null,null,!1,!1)}function Wc(a){return null===a.b&&null===a.s}function Xc(a){return null!=a.b&&a.b==a.s&&!a.ca&&!a.ma}
Rc.prototype.contains=function(a){var b=null===this.s||a<this.s||a==this.s&&!this.ma;return(null===this.b||a>this.b||a==this.b&&!this.ca)&&b};function Uc(a,b,c,d,e){function f(a){return c?a:1==a?-1:1}d=d||!1;e=e||!1;return null===a?null===b?(d?!e:e)?d?f(1):f(-1):0:f(-1):null===b?f(1):a<b?-1:a==b?(d?!e:e)?d?f(1):f(-1):0:1}function Yc(a,b){var c=Uc(a.b,b.b,!0,a.ca,b.ca);0==c&&(c=Uc(a.s,b.s,!1,a.ma,b.ma));return c};function E(a,b){this.entries=a;this.K=C(b);this.Ua=null}function F(a){return cc(a.K)}function Zc(a){return a.entries.map(function(a){return a.sa.o})}function $c(a){return a.entries.map(function(a){return a.sa.id()})}function ad(a,b){return a.Ua.get(b.l())}var bd=null;function cd(){null===bd&&(bd=new E([],[]));return bd}
function dd(a){if(0==a.length)return cd();for(var b=a.reduce(function(a,b){return a+b.entries.length},0),c=Array(b),d=0,b=a.map(function(a){var b=A();a.entries.forEach(function(a){c[d++]=a;b.set(a.id,a)});return b}),e=A(),f=0;f<c.length;f++)b.every(function(a){return a.has(c[f].id)})&&e.set(c[f].id,c[f]);return new E(B(e),cc(a[0].K))}function ed(a){if(0==a.length)return cd();var b=A();a.forEach(function(a){a.entries.forEach(function(a){b.set(a.id,a)})});return new E(B(b),cc(a[0].K))}
function fd(a,b){var c=1<b.length,d=a.map(function(a){return new gd(a,c)});return new E(d,b)}function gd(a,b){this.sa=a;this.id=hd++;this.Od=b}var hd=0;function G(a,b){var c=b.Va();return null!==c&&a.sa.o.hasOwnProperty(c)?a.sa.o[c]:a.Od?a.sa.o[H(b.G())][b.getName()]:a.sa.o[b.getName()]}function id(a,b,c){var d=b.Va();if(null!=d)a.sa.o[d]=c;else if(a.Od){var d=H(b.G()),e=a.sa.o[d];null==e&&(e={},a.sa.o[d]=e);e[b.getName()]=c}else a.sa.o[b.getName()]=c}
function jd(a,b,c,d){function e(a,b){if(a.Od){var c=a.sa.o,d;for(d in c)f[d]=c[d]}else f[b[0]]=a.sa.o}var f={};e(a,b);e(c,d);a=new y(-1,f);return new gd(a,!0)};r("lf.bind",function(a){return new I(a)});function I(a){this.ea=a}r("lf.Binder",I);I.prototype.ua=g("ea");function kd(){this.Ie=ld();var a=md();this.cc=A();this.cc.set(1,nd());this.cc.set(2,od());this.cc.set(4,a);this.cc.set(3,a);this.cc.set(5,pd())}kd.vc=function(){return kd.Ee?kd.Ee:kd.Ee=new kd};function qd(a,b,c){return(a.cc.get(b)||null).get(c)||null}function ld(){function a(a){return a}var b=A();b.set(1,function(a){return null===a?null:a?1:0});b.set(2,function(a){return null===a?null:a.getTime()});b.set(3,a);b.set(4,a);b.set(5,a);return b}
function nd(){var a=A();a.set("eq",function(a,c){return a==c});a.set("neq",function(a,c){return a!=c});return a}
function md(){var a=nd();a.set("between",function(a,c){return null===a||null===c[0]||null===c[1]?!1:a>=c[0]&&a<=c[1]});a.set("gte",function(a,c){return null===a||null===c?!1:a>=c});a.set("gt",function(a,c){return null===a||null===c?!1:a>c});a.set("in",function(a,c){return-1!=c.indexOf(a)});a.set("lte",function(a,c){return null===a||null===c?!1:a<=c});a.set("lt",function(a,c){return null===a||null===c?!1:a<c});return a}
function pd(){var a=md();a.set("match",function(a,c){return null===a||null===c?!1:(new RegExp(c)).test(a)});return a}
function od(){var a=A();a.set("between",function(a,c){return null===a||null===c[0]||null===c[1]?!1:a.getTime()>=c[0].getTime()&&a.getTime()<=c[1].getTime()});a.set("eq",function(a,c){return(null===a?-1:a.getTime())==(null===c?-1:c.getTime())});a.set("gte",function(a,c){return null===a||null===c?!1:a.getTime()>=c.getTime()});a.set("gt",function(a,c){return null===a||null===c?!1:a.getTime()>c.getTime()});a.set("in",function(a,c){return c.some(function(c){return c.getTime()==a.getTime()})});a.set("lte",
function(a,c){return null===a||null===c?!1:a.getTime()<=c.getTime()});a.set("lt",function(a,c){return null===a||null===c?!1:a.getTime()<c.getTime()});a.set("neq",function(a,c){return(null===a?-1:a.getTime())!=(null===c?-1:c.getTime())});return a};function J(){this.g=this.B=null}var rd=[];J.prototype.getParent=g("B");J.prototype.eb=function(){for(var a=this;!fa(a.getParent());)a=a.getParent();return a};function sd(a){for(var b=0;!fa(a.getParent());)b++,a=a.getParent();return b}function K(a){return a.g||rd}function td(a,b){return K(a)[b]||null}function ud(a,b,c){b.B=a;null===a.g?a.g=[b]:a.g.splice(c,0,b)}function L(a,b){b.B=a;null===a.g?a.g=[b]:a.g.push(b)}
function vd(a,b){var c=a.g&&a.g[b];return c?(c.B=null,a.g.splice(b,1),0==a.g.length&&(a.g=null),c):null}J.prototype.removeChild=function(a){return vd(this,K(this).indexOf(a))};function wd(a,b,c){td(a,c).B=null;b.B=a;a.g[c]=b}function xd(a,b,c){!1!==b.call(c,a)&&K(a).forEach(function(a){xd(a,b,c)})};function yd(){J.call(this);this.oa=zd++}t(yd,J);var zd=0;yd.prototype.U=g("oa");function Ad(a,b,c){yd.call(this);this.N=a;this.value=b;this.F=c;this.qc=qd(kd.vc(),this.N.H(),this.F);this.Xa=!1;this.Zb=b}t(Ad,yd);m=Ad.prototype;m.Hb=function(){var a=new Ad(this.N,this.value,this.F);a.Zb=this.Zb;a.qd(this.Xa);var b=this.U();a.oa=b;return a};m.cb=function(a){return null!=a?(a.push(this.N),a):[this.N]};m.qd=ba("Xa");function Bd(a){var b=!1;a.value instanceof I||(b="array"==da(a.value)?!a.value.some(function(a){return a instanceof I}):!0);if(!b)throw new D(501);}
m.eval=function(a){Bd(this);if("in"==this.F)return Cd(this,a);var b=a.entries.filter(function(a){return this.qc(G(a,this.N),this.value)!=this.Xa},this);return new E(b,F(a))};m.bind=function(a){if(this.Zb instanceof I){var b=this.Zb.ua();if(a.length<=b)throw new D(510);this.value=a[b]}else"array"==da(this.Zb)&&(this.value=this.Zb.map(function(b){if(b instanceof I){var d=b.ua();if(a.length<=d)throw new D(510);return a[b.ua()]}return b}))};
function Cd(a,b){var c=C(a.value),d=function(a){return null===a?!1:c.has(a)!=this.Xa}.bind(a),e=b.entries.filter(function(a){return d(G(a,this.N))},a);return new E(e,F(b))}m.toString=function(){return"value_pred("+this.N.l()+" "+this.F+(this.Xa?"(complement)":"")+" "+this.value+")"};function Dd(a){this.ha=a;this.Wc=this.ya=null}function Ed(a,b){null===a.ya&&null!=a.u&&(a.ya=Fd(a.u));return a.ya.get(b)||null}function Fd(a){var b=A();xd(a,function(a){b.set(a.U(),a)});return b}function Gd(a,b){b.u&&(a.u=b.u.Hb());a.Wc=b}Dd.prototype.bind=function(){return this};function Hd(a,b){var c=a.u;null!=c&&xd(c,function(a){a instanceof Ad&&a.bind(b)})};function Id(a){Dd.call(this,a)}t(Id,Dd);function Jd(a){var b="";a.forEach(function(c,d){b+=c.N.l()+" ";b+=1==c.hb?"ASC":"DESC";d<a.length-1&&(b+=", ")});return b}Id.prototype.Z=function(){return C(this.b)};Id.prototype.clone=function(){var a=new Id(this.ha);Gd(a,this);this.f&&(a.f=this.f.slice());this.b&&(a.b=this.b.slice());a.V=this.V;a.M=this.M;this.L&&(a.L=this.L.slice());this.ja&&(a.ja=this.ja.slice());this.Ob&&(a.Ob=this.Ob);this.Ub&&(a.Ub=this.Ub);a.vb=this.vb;return a};
Id.prototype.bind=function(a){Id.Fb.bind.call(this,a);null!=this.Ob&&(this.V=a[this.Ob.ua()]);null!=this.Ub&&(this.M=a[this.Ub.ua()]);Hd(this,a);return this};function Kd(a,b){this.za=a;this.$=b}Kd.prototype.eb=g("za");Kd.prototype.Z=g("$");function Ld(a){var b=C();a.forEach(function(a){a.Z().forEach(b.add.bind(b))});return b};function Md(a,b){this.global=a;this.Ia=a.i(Pb);this.nd=b.map(function(a){return a.context});this.Se=b.map(function(a){return a.Zd});this.ue=Ld(this.Se);this.hf=Nd(this);this.Za=x()}function Nd(a){return a.nd.some(function(a){return!(a instanceof Id)})?1:0}m=Md.prototype;
m.exec=function(){function a(){var f=d.shift();if(f){var h=e[c.length];return f.eb().exec(b,h).then(function(b){c.push(b[0]);return a()})}return w()}var b=new Nc(this.global,this.ue),c=[],d=this.Se.slice(),e=this.nd;return a().then(function(){return this.Ia.zb(this.hf,b).ia()}.bind(this)).then(function(){this.Wd(c);return c}.bind(this),function(a){b.Eb();throw a;})};m.H=g("hf");m.Z=g("ue");m.Kb=g("Za");m.U=function(){return ka(this)};m.Wd=aa();function Od(a,b){Md.call(this,a,b);this.Db=a.i(Vb)}t(Od,Md);Od.prototype.getPriority=l(0);Od.prototype.Wd=function(a){this.nd.forEach(function(b,c){Pd(this.Db,b,a[c])},this)};function Qd(a,b){this.h=a;this.Db=a.i(Vb);this.Aa=a.i(Ub);this.gd=new oc(a);this.nb=b;var c=a.i(Wb),d=this.nb.map(function(a){return c.table(a.getName())});this.$=C(d);this.Za=x()}m=Qd.prototype;m.exec=function(){this.gd.update(this.nb);this.Kc();return w()};m.H=l(1);m.Z=g("$");m.Kb=g("Za");m.U=function(){return ka(this)};m.getPriority=l(1);m.Kc=function(){var a=Rd(this.Db,this.$);0!=a.length&&(a=new Od(this.h,a),Sd(this.Aa,a))};function Td(a){this.h=a;this.Ia=a.i(Pb);this.Aa=a.i(Ub)}Td.prototype.Ud=function(a){a=new Qd(this.h,a);Sd(this.Aa,a)};function M(a,b){this.Wb=a;this.j=b;this.Ra=A()}r("lf.backstore.FirebaseRawBackStore",M);M.prototype.cd=g("j");M.prototype.dd=function(){throw new D(351);};function Ud(a,b){var c=x(),d=a;b.length&&(d=a.child(b));d.once("value",function(a){c.resolve(a.val())},function(a){c.reject(a)});return c.ga}function Vd(a,b,c){function d(a){a?e.reject(a):e.resolve()}c=c||!1;var e=x();c?a.set(b,d):a.update(b,d);return e.ga}
M.prototype.Da=function(a){return Ud(this.j,"@rev/R").then(function(a){this.Ka=a;return Ud(this.j,"@table")}.bind(this)).then(function(b){var c=0,d;for(d in b)this.Ra.set(d,b[d]),b[d]>c&&(c=b[d]);a.ra().forEach(function(a){this.Ra.has(a.getName())||(b[a.getName()]=++c)},this);d=this.j.child("@table");return Vd(d,b)}.bind(this))};
function Wd(a,b,c){var d=a.Ra.get(b);return null!=d?function(){var a={},b=x();this.j.orderByChild("T").equalTo(d).once("value",function(d){d.forEach(function(b){var d=c(b.val());a[parseInt(b.key(),10)]=d});b.resolve(a)});return b.ga}.call(a).then(function(a){a["@rev"]={R:++this.Ka};return Vd(this.j,a)}.bind(a)):w()}M.prototype.oc=function(a){return Wd(this,a,l(null)).then(function(){this.Ra.delete(a);return Vd(this.j.child("@table/"+a),null,!0)}.bind(this))};M.prototype.dropTable=M.prototype.oc;
M.prototype.jc=function(a,b,c){return Wd(this,a,function(a){var e=a.P;e[b]=c;return{R:this.Ka+1,T:a.T,P:e}}.bind(this))};M.prototype.addTableColumn=M.prototype.jc;M.prototype.pc=function(a,b){return Wd(this,a,function(a){var d=a.P;delete d[b];return{R:this.Ka+1,T:a.T,P:d}}.bind(this))};M.prototype.dropTableColumn=M.prototype.pc;M.prototype.Jc=function(a,b,c){return Wd(this,a,function(a){var e=a.P;e[c]=e[b];delete e[b];return{R:this.Ka+1,T:a.T,P:e}}.bind(this))};M.prototype.renameTableColumn=M.prototype.Jc;
M.prototype.qb=function(){throw new D(351);};M.prototype.createRow=M.prototype.qb;M.prototype.yc=g("Wb");M.prototype.getVersion=M.prototype.yc;M.prototype.ac=function(a){var b=x();a=this.Ra.get(a);this.j.orderByChild("T").equalTo(a).once("value",function(a){var d=[];a.forEach(function(a){d.push(a.val().P)});b.resolve(d)});return b.ga};M.prototype.dump=function(){var a={},b=Gb(this.Ra).map(function(b){return this.ac(b).then(function(d){a[b]=d})}.bind(this));return bb(b).then(function(){return a})};
M.prototype.dump=M.prototype.dump;function Xd(a,b,c){Ib.call(this,c,b);this.j=a}t(Xd,Ib);Xd.prototype.G=function(a){return this.j.wc(a)};
Xd.prototype.lc=function(){var a=this.Oa.nb;if(0==a.size)this.X.resolve();else{var b=this.j.Ka+1;this.j.Ka=b;var c={"@rev":{R:b}};a.forEach(function(a,e){var f=this.j.Ra.get(e);a.Ba.forEach(function(a,d){c[d]={R:b,T:f,P:a.o}});a.pa.forEach(function(a,d){c[d]={R:b,T:f,P:a[1].o}});a.Ca.forEach(function(a,b){c[b]=null})},this);this.j.j.update(c,function(c){null===c?this.X.resolve():(this.j.Ka=b-1,c=B(a).map(function(a){return Yd(this.j,a.getName())},this),bb(c).then(this.X.reject.bind(this.X),this.X.reject.bind(this.X)))}.bind(this))}return this.X.ga};function Zd(){this.ta=A()}function $d(a,b){if(0==b.length)return B(a.ta);var c=[];b.forEach(function(a){a=this.ta.get(a)||null;null===a||c.push(a)},a);return c}Zd.prototype.getData=g("ta");Zd.prototype.get=function(a){return w($d(this,a))};function ae(a,b){b.forEach(function(a){this.ta.set(a.id(),a)},a)}Zd.prototype.put=function(a){ae(this,a);return w()};function be(a,b){0==b.length||b.length==a.ta.size?a.ta.clear():b.forEach(function(a){this.ta.delete(a)},a)}
Zd.prototype.remove=function(a){be(this,a);return w()};function ce(a){return 0==a.ta.size?0:Gb(a.ta).reduce(function(a,c){return a>c?a:c},0)};function de(a,b){this.m=a;this.of=b;this.Ic=A();this.Ka=-1;this.K=A();this.Ra=A();this.Ad=null}m=de.prototype;
m.Da=function(a){this.j=this.of.child(this.m.name());var b=a||function(){return w()};return Ud(this.j,"@db/version").then(function(a){return null===a?Vd(this.j,ee(this),!0).then(function(){var a=new M(0,this.j);return b(a)}.bind(this)):a==this.m.version()?Ud(this.j,"@rev/R").then(function(a){this.Ka=a;return Ud(this.j,"@table")}.bind(this)).then(function(a){for(var b in a)this.Ra.set(b,a[b]);a=this.m.ra().map(function(a){return Yd(this,a.getName())},this);return bb(a)}.bind(this)).then(function(){fe(this);
ge(this);return w()}.bind(this)):this.Xd(a,b).then(function(){return this.Da()}.bind(this))}.bind(this))};m.Xd=function(a,b){var c=new M(a,this.j);return c.Da(this.m).then(function(){return w()}.bind(this)).then(function(){return b(c)}).then(function(){var a=this.j.child("@db");return Vd(a,{version:this.m.version()},!0)}.bind(this))};
function ge(a){a.j.off();a.j.on("child_removed",a.bg.bind(a));a.Bd&&(a.Bd.off(),a.Ic.clear());a.Bd=a.j.orderByChild("R").startAt(a.Ka+1);a.Bd.on("value",a.Ud.bind(a))}function fe(a){mb=B(a.K).map(function(a){return ce(a)}).reduce(function(a,c){return a>c?a:c},0)+1}m.bg=function(a){var b=a.val(),c=this.Ic.get(b.T)||null;null===c&&(c=C(),this.Ic.set(b.T,c));c.add(parseInt(a.key(),10))};
m.Ud=function(a){var b=a.child("@rev/R").val();null!=b&&b!=this.Ka&&(this.Ka=b,a=he(this,a),a.forEach(function(a){var b=this.K.get(a.getName()),e=Gb(a.Ca);0<e.length&&be(b,e);var f=B(a.Ba);a.pa.forEach(function(a){f.push(a[1])});ae(b,f)},this),0<a.length&&this.Dc(a),ge(this))};
function he(a,b){var c=C(),d=A();a.Ra.forEach(function(a,b){var h=this.K.get(b),k=new Lc(b);if(this.Ic.has(a)){var n=cc(this.Ic.get(a));n.forEach(function(a){c.add(a)});$d(h,n).forEach(function(a){k.delete(a)})}d.set(a,k)}.bind(a));b.forEach(function(a){if("@rev"!=a.key()){var b=parseInt(a.key(),10);if(!c.has(b)){a=a.val();var h=d.get(a.T),k=this.K.get(h.getName());k.getData().has(b)?h.modify([$d(k,[b])[0],new y(b,a.P)]):h.add(new y(b,a.P))}}}.bind(a));return B(d).filter(function(a){return!a.Qf()})}
function Yd(a,b){var c=x(),d=a.Ra.get(b);a.j.orderByChild("T").equalTo(d).once("value",function(a){var d=new Zd,h=[];a.forEach(function(a){h.push(new y(parseInt(a.key(),10),a.val().P))});ae(d,h);this.K.set(b,d);c.resolve()}.bind(a));return c.ga}function ee(a){var b={};b["@db"]={version:a.m.version()};b["@rev"]={R:1};a.Ka=1;b["@table"]={};a.m.ra().forEach(function(a,d){var e=a.getName();b["@table"][e]=d;this.K.set(e,new Zd);this.Ra.set(e,d)},a);return b}m.zb=function(a,b){return new Xd(this,a,b)};
m.wc=function(a){var b=this.K.get(a)||null;if(null!==b)return b;throw new D(101,a);};m.close=aa();m.subscribe=ba("Ad");m.Dc=function(a){null!=this.Ad&&this.Ad(a)};function N(a,b,c,d){this.j=b;this.Ta=c;this.Wb=a;this.Tc=d}r("lf.backstore.IndexedDBRawBackStore",N);N.prototype.cd=g("j");N.prototype.getRawDBInstance=N.prototype.cd;N.prototype.dd=g("Ta");N.prototype.getRawTransaction=N.prototype.dd;N.prototype.oc=function(a){return new v(function(b,c){try{this.j.deleteObjectStore(a)}catch(d){c(d);return}b()},this)};N.prototype.dropTable=N.prototype.oc;
function ie(a,b,c,d){return new v(function(a,f){var h;try{var k=this.Ta.objectStore(b);h=k.openCursor()}catch(n){f(n);return}h.onsuccess=function(){var b=h.result;b?(c(b),b.continue()):(d(k),a())};h.onerror=f},a)}function je(a){var b=null;return b=a instanceof ArrayBuffer?qb(a):a instanceof Date?a.getTime():a}
function ke(a,b,c){function d(a){var b=ic(a.value),d=b.o,e;for(e in d){var z=ob(d[e]);c(z);d[e]=z.Ha()}a.update(b.Ha())}function e(a){var b=ob(a.value);c(b);a.update(b.Ha())}return ie(a,b,a.Tc?d:e,aa())}N.prototype.jc=function(a,b,c){var d=je(c);return ke(this,a,function(a){a.o[b]=d})};N.prototype.addTableColumn=N.prototype.jc;N.prototype.pc=function(a,b){return ke(this,a,function(a){delete a.o[b]})};N.prototype.dropTableColumn=N.prototype.pc;
N.prototype.Jc=function(a,b,c){return ke(this,a,function(a){a.o[c]=a.o[b];delete a.o[b]})};N.prototype.renameTableColumn=N.prototype.Jc;function le(a,b){var c=[];return new v(function(a,e){var f;try{f=this.Ta.objectStore(b).openCursor()}catch(h){e(h);return}f.onsuccess=function(){var b=f.result;if(b){if(this.Tc){var e;e=ic(b.value).o;for(var h in e)c.push(e[h])}else c.push(b.value);b.continue()}else a(c)}.bind(this);f.onerror=e},a)}N.prototype.qb=function(a){var b={},c;for(c in a)b[c]=je(a[c]);return pb(b)};
N.prototype.createRow=N.prototype.qb;N.prototype.yc=g("Wb");N.prototype.getVersion=N.prototype.yc;N.prototype.dump=function(){for(var a=this.j.objectStoreNames,b=[],c=0;c<a.length;++c){var d=a.item(c);b.push(this.ac(d))}return bb(b).then(function(b){var c={};b.forEach(function(b,d){c[a.item(d)]=b});return c})};N.prototype.dump=N.prototype.dump;N.prototype.ac=function(a){return le(this,a).then(function(a){return a.map(function(a){return a.value})})};function me(a,b){this.aa=a;this.Ib=b}m=me.prototype;m.get=function(a){if(0==a.length)return this.uc();a=a.map(function(a){return new v(function(c,d){var e;try{e=this.aa.get(a)}catch(f){d(f);return}e.onerror=d;e.onsuccess=function(a){c(this.Ib(a.target.result))}.bind(this)},this)},this);return bb(a)};
m.uc=function(){return new v(function(a,b){var c=[],d;try{d=this.aa.openCursor()}catch(e){b(e);return}d.onerror=b;d.onsuccess=function(){var b=d.result;b?(c.push(this.Ib(b.value)),b.continue()):a(c)}.bind(this)},this)};m.Qb=function(a){return new v(function(b,c){var d;try{d=a()}catch(e){c(e);return}d.onsuccess=b;d.onerror=c},this)};m.put=function(a){if(0==a.length)return w();a=a.map(function(a){return this.Qb(function(){return this.aa.put(a.Ha())}.bind(this))},this);return bb(a)};
m.remove=function(a){return new v(function(b,c){var d=this.aa.count();d.onsuccess=function(d){if(0==a.length||d.target.result==a.length)return this.Qb(function(){return this.aa.clear()}.bind(this)).then(b,c);d=a.map(function(a){return this.Qb(function(){return this.aa.delete(a)}.bind(this))},this);bb(d).then(b,c)}.bind(this);d.onerror=c},this)};function ne(a,b,c,d,e){Ib.call(this,c,d);this.h=a;this.Ta=b;this.Tc=e;this.Ta.oncomplete=this.X.resolve.bind(this.X);this.Ta.onabort=this.X.reject.bind(this.X)}t(ne,Ib);ne.prototype.G=function(a,b,c){return this.Tc?(c=null!=c?c:0,a=this.Ta.objectStore(a),new jc(a,b,0==c?ra(lc,this.h):mc)):new me(this.Ta.objectStore(a),b)};ne.prototype.lc=function(){return this.X.ga};function oe(a,b){this.h=a;this.m=b;this.Uc=b.Te().Bf||!1}m=oe.prototype;
m.Da=function(a){var b=window.indexedDB||window.mozIndexedDB||window.webkitIndexedDB||window.msIndexedDB;if(null==b)throw new D(352);var c=a||function(){return w()};return new v(function(a,e){var f;try{f=b.open(this.m.name(),this.m.version())}catch(h){e(h);return}f.onerror=e;f.onupgradeneeded=function(a){pe(this,c,a).then(aa(),e)}.bind(this);f.onsuccess=function(b){this.j=b.target.result;this.de().then(function(b){mb=b+1;a(this.j)}.bind(this))}.bind(this)},this)};
function pe(a,b,c){var d=c.target.result,e=c.target.transaction;c=new N(c.oldVersion,d,e,a.Uc);qe(d);a.m.ra().forEach(ra(a.wf,d,e),a);return b(c)}function qe(a){for(var b=[],c=0;c<a.objectStoreNames.length;++c){var d=a.objectStoreNames.item(c);-1!=d.indexOf(".")&&b.push(d)}b.forEach(function(b){try{a.deleteObjectStore(b)}catch(c){}})}
m.wf=function(a,b,c){a.objectStoreNames.contains(c.getName())||a.createObjectStore(c.getName(),{keyPath:"id"});c.xb()&&(c.va().forEach(function(c){this.nc(a,b,c.l(),"btree")},this),this.nc(a,b,re(c),"rowid"))};m.nc=function(a,b,c,d){a.objectStoreNames.contains(c)||(a.createObjectStore(c,{keyPath:"id"}),a=b.objectStore(c),(this.Uc?new jc(a,ob,mc):new me(a,ob)).put([new sb(new rb(d))]))};
m.zb=function(a,b){var c=Gb(b.Z());Oc(b).forEach(function(a){c.push(a)});var d=this.j.transaction(c,0==a?"readonly":"readwrite");return new ne(this.h,d,b,a,this.Uc)};
m.de=function(a){function b(){if(0==d.length)return w();var a=d.shift();return c(a).then(b)}function c(b){return new v(function(c,d){var ea;try{ea=(a||e.transaction([b])).objectStore(b).openCursor(null,"prev")}catch(la){d(la);return}ea.onsuccess=function(a){(a=a.target.result)&&(f=Math.max(f,h(a)));c(f)};ea.onerror=function(){c(f)}})}var d=this.m.ra().map(function(a){return a.getName()}),e=this.j,f=0,h=function(a){return this.Uc?(a=ic(a.value),Object.keys(a.o).reduce(function(a,b){return Math.max(a,
b)},0)):a.key}.bind(this);return new v(function(a){b().then(function(){a(f)})})};m.close=function(){this.j.close()};m.wc=function(){throw new D(511);};m.subscribe=aa();m.Dc=aa();function se(a,b,c){Ib.call(this,c,b);this.aa=a;0==b&&this.X.resolve()}t(se,Ib);se.prototype.G=function(a){return this.aa.wc(a)};se.prototype.lc=function(){this.X.resolve();return this.X.ga};function te(a){this.m=a;this.K=A()}m=te.prototype;m.Da=function(){this.m.ra().forEach(this.Nf,this);return w()};m.wc=function(a){var b=this.K.get(a)||null;if(null===b)throw new D(101,a);return b};m.zb=function(a,b){return new se(this,a,b)};function ue(a,b){if(!a.K.has(b)){var c=new Zd;a.K.set(b,c);return c}return null}m.Nf=function(a){ue(this,a.getName());a.xb()&&(a.va().forEach(function(a){this.nc(a.l(),"btree")},this),this.nc(re(a),"rowid"))};m.nc=function(a,b){var c=ue(this,a);null===c||c.put([new sb(new rb(b))])};
m.close=aa();m.subscribe=aa();m.Dc=aa();function ve(a){te.call(this,a);this.jd=null}t(ve,te);ve.prototype.subscribe=function(a){null===this.jd&&(this.jd=a)};ve.prototype.Dc=function(a){null===this.jd||this.jd(a)};function we(a,b,c){this.Ta=a;this.w=b;this.Ib=c}we.prototype.get=function(a){var b=this.Ib;return xe(this.Ta,"SELECT id, value FROM "+this.w+" "+(0==a.length?"":"WHERE id IN ("+a.join(",")+")"),[],function(a){for(var d=a.rows.length,e=Array(d),f=0;f<d;++f)e[f]=b({id:a.rows.item(f).id,value:JSON.parse(a.rows.item(f).value)});return e})};
we.prototype.put=function(a){if(0==a.length)return w();var b="INSERT OR REPLACE INTO "+this.w+"(id, value) VALUES (?, ?)";a.forEach(function(a){xe(this.Ta,b,[a.id(),JSON.stringify(a.o)])},this);return w()};we.prototype.remove=function(a){xe(this.Ta,"DELETE FROM "+this.w+" "+(0==a.length?"":"WHERE id IN ("+a.join(",")+")"),[]);return w()};function ye(a,b,c){Ib.call(this,b,c);this.j=a;this.K=A();this.Dd=[]}t(ye,Ib);function ze(a){return a.replace(".","__d__").replace("#","__s__")}ye.prototype.G=function(a,b){var c=this.K.get(a)||null;null===c&&(c=new we(this,ze(a),b),this.K.set(a,c));return c};function xe(a,b,c,d){var e=x();a.Dd.push({og:b,eg:c,transform:d,X:e});return e.ga}
ye.prototype.lc=function(){var a=null,b=this.X.reject.bind(this.X),c=function(a,b){this.X.reject(b)}.bind(this),d=[],e=function(b,h){if(null!==a){var k=h;null!=a.transform&&null!=h&&(k=a.transform(h));d.push(k);a.X.resolve(k)}0<this.Dd.length?(a=k=this.Dd.shift(),b.executeSql(k.og,k.eg,e,c)):this.X.resolve(d)}.bind(this);0==this.gf?this.j.readTransaction(e,b):this.j.transaction(e,b);return this.X.ga};function O(a,b,c){this.j=c;this.h=a;this.Wb=b}r("lf.backstore.WebSqlRawBackStore",O);O.prototype.cd=g("j");O.prototype.getRawDBInstance=O.prototype.cd;O.prototype.dd=function(){throw new D(356);};O.prototype.getRawTransaction=O.prototype.dd;function Ae(a){return new ye(a.j,new Nc(a.h,C()),1)}O.prototype.oc=function(a){var b=Ae(this);xe(b,"DROP TABLE "+a,[]);return b.ia()};O.prototype.dropTable=O.prototype.oc;
O.prototype.ac=function(a){var b=Ae(this);xe(b,"SELECT id, value FROM "+a,[]);return b.ia().then(function(a){for(var b=a[0].rows.length,e=Array(b),f=0;f<b;++f)e[f]={id:a[0].rows.item(f).id,value:JSON.parse(a[0].rows.item(f).value)};return w(e)})};function Be(a,b,c){var d=Ae(a),e="UPDATE "+b+" SET value=? WHERE id=?";return a.ac(b).then(function(a){a.forEach(function(a){a=c(a);xe(d,e,[JSON.stringify(a.value),a.id])});return d.ia()})}
O.prototype.jc=function(a,b,c){var d=je(c);return Be(this,a,function(a){a.value[b]=d;return a})};O.prototype.addTableColumn=O.prototype.jc;O.prototype.pc=function(a,b){return Be(this,a,function(a){delete a.value[b];return a})};O.prototype.dropTableColumn=O.prototype.pc;O.prototype.Jc=function(a,b,c){return Be(this,a,function(a){a.value[c]=a.value[b];delete a.value[b];return a})};O.prototype.renameTableColumn=O.prototype.Jc;O.prototype.qb=function(a){var b={},c;for(c in a)b[c]=je(a[c]);return pb(b)};
O.prototype.createRow=O.prototype.qb;O.prototype.yc=g("Wb");O.prototype.getVersion=O.prototype.yc;function Ce(a){xe(a,'SELECT tbl_name FROM sqlite_master WHERE type="table"',[],function(a){for(var c=Array(a.rows.length),d=0;d<c.length;++d)c[d]=a.rows.item(d).tbl_name;return c})}
O.prototype.dump=function(){var a=x(),b=Ae(this);Ce(b);var c={};b.ia().then(function(b){b=b[0].filter(function(a){return"__lf_ver"!=a&&"__WebKitDatabaseInfoTable__"!=a}).map(function(a){return this.ac(a).then(function(b){c[a]=b})},this);bb(b).then(function(){a.resolve(c)})}.bind(this));return a.ga};O.prototype.dump=O.prototype.dump;function De(a,b,c){this.h=a;this.m=b;this.ng=c||4194304}function Ee(a){return new Nc(a.h,C())}m=De.prototype;m.Da=function(a){if(null==window.openDatabase)throw new D(353);var b=a||function(){return w()};return new v(function(a,d){try{var e=window.openDatabase(this.m.name(),"",this.m.name(),this.ng);if(null!=e)this.j=e,Fe(this,b).then(a,d);else throw new D(354);}catch(f){d(f)}},this)};
function Fe(a,b){var c=x(),d=new ye(a.j,Ee(a),1);xe(d,"CREATE TABLE IF NOT EXISTS __lf_ver(id INTEGER PRIMARY KEY, v INTEGER)",[]);xe(d,"SELECT v FROM __lf_ver WHERE id = 0",[]);d.ia().then(function(a){var d=0;a[1].rows.length&&(d=a[1].rows.item(0).v);d<this.m.version()?this.Xd(b,d).then(c.resolve.bind(c)):d>this.m.version()?c.reject(new D(108)):c.resolve()}.bind(a));return c.ga}m.zb=function(a,b){if(null!=this.j)return new ye(this.j,b,a);throw new D(2);};m.close=aa();
m.wc=function(){throw new D(512);};m.subscribe=function(){throw new D(355);};m.Dc=function(){throw new D(355);};m.Xd=function(a,b){var c=x();Ge(this).then(function(){a(new O(this.h,b,this.j)).then(function(){return this.de()}.bind(this)).then(c.resolve.bind(c))}.bind(this),c.reject.bind(c));return c.ga};
function Ge(a){var b=a.m.ra(),c=new ye(a.j,Ee(a),1),d=new ye(a.j,Ee(a),1);xe(c,"INSERT OR REPLACE INTO __lf_ver VALUES (0, ?)",[a.m.version()]);Ce(c);return c.ia().then(function(a){function c(a,b){xe(d,"INSERT INTO "+a+"(id, value) VALUES(?, ?)",[-1,JSON.stringify(nb(new sb(new rb(b))))])}var h=a[1];h.filter(function(a){return-1!=a.indexOf("__d__")}).forEach(function(a){xe(d,"DROP TABLE "+a,[])});var k=[],n=[],z=[];b.map(function(a){-1==h.indexOf(a.getName())&&k.push(a.getName());a.xb&&(a.va().forEach(function(a){a=
ze(a.l());k.push(a);n.push(a)}),a=ze(re(a)),k.push(a),z.push(a))});k.forEach(function(a){xe(d,"CREATE TABLE "+a+"(id INTEGER PRIMARY KEY, value TEXT)",[])});n.forEach(function(a){c(a,"btree")});z.forEach(function(a){c(a,"rowid")});return d.ia()})}
m.de=function(){var a=0,b=x(),c=function(b){var c=new ye(this.j,Ee(this),0);xe(c,"SELECT MAX(id) FROM "+b,[]);return c.ia().then(function(b){b=b[0].rows.item(0)[0];a=Math.max(b,a)})}.bind(this),d=this.m.ra().map(function(a){return c(a.getName())});bb(d).then(function(){b.resolve(a)},function(a){b.reject(a)});return b.ga};function He(a){this.W=A();this.Vb=A();a.ra().forEach(function(a){this.Vb.set(a.getName(),C())},this)}m=He.prototype;m.set=function(a,b){this.W.set(b.id(),b);this.Vb.get(a).add(b.id())};m.rd=function(a,b){var c=this.Vb.get(a);b.forEach(function(a){this.W.set(a.id(),a);c.add(a.id())},this)};m.get=function(a){return this.W.get(a)||null};function Ie(a,b){return b.map(function(a){return this.get(a)},a)}
m.Wa=function(a,b,c){var d=[],e=Math.min(b,c),f=Math.max(b,c);a=this.Vb.get(a);if(a.size<f-e)a.forEach(function(a){a>=e&&a<=f&&(a=this.W.get(a),d.push(a))},this);else for(b=e;b<=f;++b)a.has(b)&&(c=this.W.get(b),d.push(c));return d};m.remove=function(a,b){this.W.delete(b);this.Vb.get(a).delete(b)};m.vg=function(a){return null!=a?this.Vb.get(a).size:this.W.size};m.clear=function(){this.W.clear();this.Vb.clear()};function Je(a,b,c){var d=0,e=a.length;for(c=c||Ke;d<e;){var f=d+e>>1;0>c(a[f],b)?d=f+1:e=f}return d==e&&a[d]==b?d:~d}function Ke(a,b){return a-b}function Le(a,b,c){c=Je(a,b,c);return 0>c?(a.splice(-(c+1),0,b),!0):!1};function Me(a,b,c,d){a=b?a.reverse():a;if(null==c&&null==d)return a;c=Math.min(q(c)?c:a.length,a.length);if(0==c)return[];d=Math.min(d||0,a.length);return a.slice(d,d+c)};function Ne(){this.na=0}Ne.prototype.add=function(a,b){this.na+=b};Ne.prototype.remove=function(a,b){this.na-=b};Ne.prototype.clear=function(){this.na=0};function Oe(a,b){a.clear();b.forEach(function(a){this.na+=a.na},a)};function Pe(a,b,c,d){this.w=a;this.S=b;this.ie=c;this.lb=new Ne;if(d){a=511;a*=a*a;if(d.length>=a)throw new D(6,a);d=Qe(this,d);this.qa=d=Re(d)}else this.clear()}var Se=[];m=Pe.prototype;m.getName=g("w");m.toString=function(){return this.qa.toString()};m.add=function(a,b){this.qa=this.qa.ub(a,b)};m.set=function(a,b){this.qa=this.qa.ub(a,b,!0)};m.remove=function(a,b){this.qa=this.qa.remove(a,b)};m.get=function(a){return this.qa.get(a)};
m.Yc=function(a){if(null==a)return this.La().na;if(a instanceof Rc){if(Wc(a))return this.La().na;if(Xc(a))return this.get(a.b).length}return this.Wa([a]).length};m.La=g("lb");m.uc=function(a,b,c,d){c=Array(a);this.qa.fill({offset:b?this.lb.na-a-d:d,count:a,ge:0},c);return b?c.reverse():c};
m.Wa=function(a,b,c,d){var e=Te(this.qa).c[0];if(!q(e)||0==c)return Se;b=b||!1;c=null!=c?Math.min(c,this.lb.na):this.lb.na;d=d||0;var f=Math.min(Math.max(this.lb.na-d,0),c);if(0==f)return Se;if(!q(a)||1==a.length&&a[0]instanceof Rc&&Wc(a[0]))return this.uc(f,b,c,d);a=this.S.cf(a);var h=Array(b?this.lb.na:f),k={count:0,V:h.length,reverse:b,M:d};a.forEach(function(a){for(var b=this.S.od(a),b=this.S.Nd(a)?e:b[0],b=Ue(this.qa,b),c=k.count,d=0;null!=b&&k.count<k.V;)b.Wa(a,k,h),k.count!=c?(d=0,c=k.count):
d++,b=2==d?null:b.next()},this);h.splice(k.count,f-k.count);return b?Me(h,b,c,d):h};m.clear=function(){this.qa=Ve(this);this.lb.clear()};m.bb=function(a){return this.qa.bb(a)};m.min=function(){return this.Cc(this.S.min.bind(this.S))};m.max=function(){return this.Cc(this.S.max.bind(this.S))};m.Cc=function(a){var b=Te(this.qa),c=We(this.qa);if(0==b.c.length&&0==c.c.length)return null;var d=b.c[0],b=b.A[0],e=c.c[c.c.length-1],c=c.A[c.c.length-1];return 1==a(d,e)?[d,this.ie?[b]:b]:[e,this.ie?[c]:c]};
m.Fa=g("ie");m.mc=g("S");m.Rd=function(a,b){return null!=a?-1==this.S.compare(a,b):!1};m.Na=function(a,b){return null!=a?0==this.S.compare(a,b):!1};m.Ha=function(){for(var a=[],b=Te(this.qa);b;)a.push(new y(b.oa,[b.c,b.A])),b=b.wa;return a};function Xe(a,b,c,d){a=new Pe(b,a,c);d=Ye(d,a);a.qa=d;return a}function Ze(a,b){this.oa=a;this.D=b;this.fb=0;this.wa=this.yb=this.B=null;this.c=[];this.A=[];this.g=[]}function Ve(a){return new Ze(mb++,a)}function P(a){return 0==a.fb}m=Ze.prototype;m.next=g("wa");
function $e(a){function b(a){return null!=a?a.oa.toString():"_"}var c=a.oa+"["+a.c.join("|")+"]",d=a.g.map(function(a){return a.oa}).join("|"),e=a.A.join("/"),f=b(a.yb)+"{",f=P(a)?f+e:f+d,f=f+"}"+b(a.B);a.wa&&(a=$e(a.wa),c=c+"  "+a[0],f=f+"  "+a[1]);return[c,f]}m.toString=function(){var a="",b=$e(this),a=a+(b[0]+"\n"+b[1]+"\n");this.g.length&&(a+=this.g[0].toString());return a};function Te(a){return P(a)?a:Te(a.g[0])}function We(a){return P(a)?a:We(a.g[a.g.length-1])}
function af(a,b){b&&(b.yb=a);a&&(a.wa=b)}function Qe(a,b){for(var c=b.length,d=0,e=Ve(a),f=e;0<c;){var h=768<=c?511:257<=c&&511>=c?c:257,k=b.slice(d,d+h);e.c=k.map(function(a){return a.key});e.A=k.map(function(a){return a.value});d+=h;c-=h;0<c&&(h=Ve(e.D),af(e,h),e=h)}return f}function bf(a){var b=a[0],c=Ve(b.D);c.fb=b.fb+1;c.g=a;for(b=0;b<a.length;++b)a[b].B=c,0<b&&c.c.push(a[b].c[0]);return c}
function Re(a){var b=a,c=[];do c.push(b),b=b.wa;while(b);if(512>=c.length)b=bf(c);else{var d=c.length,e=0,b=Ve(a.D);for(b.fb=a.fb+2;0<d;){a=768<=d?511:257<=d&&511>=d?d:257;var f=c.slice(e,e+a),h=bf(f);h.B=b;b.g.length&&(b.c.push(f[0].c[0]),af(b.g[b.g.length-1],h));b.g.push(h);e+=a;d-=a}}return b}m.get=function(a){var b=cf(this,a);if(P(this)){var c=Se;this.D.Na(this.c[b],a)&&(c=c.concat(this.A[b]));return c}b=this.D.Na(this.c[b],a)?b+1:b;return this.g[b].get(a)};
m.bb=function(a){var b=cf(this,a);return this.D.Na(this.c[b],a)?!0:P(this)?!1:this.g[b].bb(a)};m.remove=function(a,b){df(this,a,-1,b);if(null==this.B){var c=this;1==this.g.length&&(c=this.g[0],c.B=null);return c}return this};function ef(a){return P(a)?a.c[0]:ef(a.g[0])}function ff(a){a.c=[];for(var b=1;b<a.g.length;++b)a.c.push(ef(a.g[b]))}
function df(a,b,c,d){var e=cf(a,b),f=P(a);if(!f){var h=a.D.Na(a.c[e],b)?e+1:e;if(df(a.g[h],b,h,d))ff(a);else return!1}else if(!a.D.Na(a.c[e],b))return!1;if(a.c.length>e&&a.D.Na(a.c[e],b)){if(q(d)&&!a.D.Fa()&&f&&(h=a.A[e],d=Je(h,d,void 0),0>d?d=!1:(h.splice(d,1),d=!0),d&&a.D.La().remove(b,1),a.A[e].length))return!1;a.c.splice(e,1);f&&(f=a.D.Fa()?1:a.A[e].length,a.A.splice(e,1),a.D.La().remove(b,f))}if(256>a.c.length&&null!=a.B){a:{b=null;if(a.wa&&256<a.wa.c.length)b=a.wa,e=d=0,f=a.c.length+1;else if(a.yb&&
256<a.yb.c.length)b=a.yb,d=a.yb.c.length-1,e=P(a)?d:d+1,f=0;else{b=!1;break a}a.c.splice(f,0,b.c[d]);b.c.splice(d,1);d=P(a)?a.A:a.g;h=null;P(a)?h=b.A:(h=b.g,h[e].B=a);d.splice(f,0,h[e]);h.splice(e,1);P(b)||(ff(b),ff(a));b=!0}b||gf(a,c)}return!0}
function gf(a,b){var c,d,e;a.wa&&511>a.wa.c.length?(c=a.wa,e=d=0):a.yb&&(c=a.yb,d=c.c.length,e=P(c)?c.A.length:c.g.length);d=[d,0].concat(a.c);Array.prototype.splice.apply(c.c,d);d=null;P(a)?d=a.A:(d=a.g,d.forEach(function(a){a.B=c}));d=[e,0].concat(d);Array.prototype.splice.apply(P(c)?c.A:c.g,d);af(a.yb,a.wa);P(c)||ff(c);-1!=b&&(a.B.c.splice(b,1),a.B.g.splice(b,1))}
m.ub=function(a,b,c){var d=cf(this,a);if(P(this)){if(this.D.Na(this.c[d],a)){if(c)this.D.La().remove(a,this.D.Fa()?1:this.A[d].length),this.A[d]=this.D.Fa()?b:[b];else{if(this.D.Fa())throw new D(201);if(!Le(this.A[d],b))throw new D(109);}this.D.La().add(a,1);return this}this.c.splice(d,0,a);this.A.splice(d,0,this.D.Fa()?b:[b]);this.D.La().add(a,1);512==this.c.length?(d=Ve(this.D),a=Ve(this.D),a.fb=1,a.c=[this.c[256]],a.g=[this,d],a.B=this.B,this.B=a,d.c=this.c.splice(256),d.A=this.A.splice(256),d.B=
a,af(d,this.wa),af(this,d),d=a):d=this;return d}d=this.D.Na(this.c[d],a)?d+1:d;a=this.g[d].ub(a,b,c);P(a)||1!=a.c.length||(this.c.splice(d,0,a.c[0]),a.g[1].B=this,a.g[0].B=this,this.g.splice(d,1,a.g[1]),this.g.splice(d,0,a.g[0]));return 512==this.c.length?hf(this):this};function hf(a){var b=Ve(a.D),c=Ve(a.D);b.B=a.B;b.fb=a.fb+1;b.c=[a.c[256]];b.g=[a,c];a.c.splice(256,1);c.B=b;c.fb=a.fb;c.c=a.c.splice(256);c.g=a.g.splice(257);c.g.forEach(function(a){a.B=c});a.B=b;af(c,a.wa);af(a,c);return b}
function cf(a,b){for(var c=0,d=a.c.length;c<d;){var e=c+d>>1;a.D.Rd(a.c[e],b)?c=e+1:d=e}return c}function Ue(a,b){if(!P(a)){var c=cf(a,b);a.D.Na(a.c[c],b)&&c++;return Ue(a.g[c],b)}return a}
m.Wa=function(a,b,c){function d(a){return a[0]?a[1]?0:1:-1}var e=this.D.mc(),f=0,h=this.c.length-1,k=this.c,n=d(e.pb(k[f],a)),z=d(e.pb(k[h],a));if(1!=n&&(-1!=n||-1!=z)){var ea=function(a,b){var c=a+b>>1;return c==a?c+1:c},la=function(b,c,f){if(b>=c)return 0==f?c:-1;var h=d(e.pb(k[b],a));if(0==h)return b;if(1==h)return-1;h=ea(b,c);if(h==c)return 0==f?c:-1;var n=d(e.pb(k[h],a));return 0==n?la(b,h,n):-1==n?la(h+1,c,f):la(b+1,h,n)},Va=function(b,c){if(b>=c)return b;var f=d(e.pb(k[c],a));if(0==f)return c;
if(-1==f)return b;f=ea(b,c);if(f==c)return b;var h=d(e.pb(k[f],a));return 0==h?Va(f,c):1==h?Va(b,f-1):-1};0!=n&&(f=la(f+1,h,z));-1!=f&&(h=Va(f,h),-1!=h&&h>=f&&jf(this,b,c,f,h+1))}};function jf(a,b,c,d,e){for(;d<e&&(b.reverse||!(b.count>=b.V));++d)if(a.D.Fa())!b.reverse&&b.M?b.M--:c[b.count++]=a.A[d];else for(var f=0;f<a.A[d].length&&b.count<c.length;++f)!b.reverse&&b.M?b.M--:c[b.count++]=a.A[d][f]}
m.fill=function(a,b){if(P(this))for(var c=0;c<this.A.length&&0<a.count;++c)if(0<a.offset){if(a.offset-=this.D.Fa()?1:this.A[c].length,0>a.offset)for(var d=this.A[c].length+a.offset;d<this.A[c].length&&0<a.count;++d)b[a.ge++]=this.A[c][d],a.count--}else if(this.D.Fa())b[a.ge++]=this.A[c],a.count--;else for(d=0;d<this.A[c].length&&0<a.count;++d)b[a.ge++]=this.A[c][d],a.count--;else for(c=0;c<this.g.length&&0<a.count;++c)this.g[c].fill(a,b)};
function Ye(a,b){for(var c=b.La(),d=a.map(function(a){var d=new Ze(a.id(),b);d.c=a.o[0];d.A=a.o[1];d.c.forEach(function(a,e){c.add(a,b.Fa()?1:d.A[e].length)});return d}),e=0;e<d.length-1;++e)af(d[e],d[e+1]);return 1<d.length?Re(d[0]):d[0]};function kf(a){if(1==a.f.length)return new mf(a.f[0].hb);a=a.f.map(function(a){return a.hb});return new nf(a)}function mf(a){this.Xc=0==a?of:pf;this.Sd=0==a?function(a){return null!=a?a.reverse():null}:function(a){return a||null};this.Yd=0==a?qf:rf}t(mf,nc);function pf(a,b){return a>b?1:a<b?-1:0}function of(a,b){return pf(b,a)}function rf(a,b){return Yc(a,b)}function qf(a,b){return Yc(b,a)}m=mf.prototype;
m.pb=function(a,b){var c=this.Sd(b),d=[null===c.b,null===c.s];if(!d[0]){var e=this.Xc(a,c.b);d[0]=c.ca?1==e:-1!=e}d[1]||(e=this.Xc(a,c.s),d[1]=c.ma?-1==e:1!=e);return d};m.compare=function(a,b){return this.Xc(a,b)};m.min=function(a,b){return a<b?1:a==b?0:-1};m.max=function(a,b){return a>b?1:a==b?0:-1};m.Md=function(a,b){var c=this.pb(a,b);return c[0]&&c[1]};m.cf=function(a){return a.filter(function(a){return null!==a}).sort(function(a,c){return this.Yd(a,c)}.bind(this))};m.Nd=function(a){return fa(this.Sd(a).b)};
m.od=function(a){a=this.Sd(a);return[a.b,a.s]};m.toString=function(){return this.Xc==of?"SimpleComparator_DESC":"SimpleComparator_ASC"};function nf(a){this.Ja=a.map(function(a){return new mf(a)})}t(nf,nc);function sf(a,b,c,d){for(var e=0,f=0;f<a.Ja.length&&0==e;++f)e=d(a.Ja[f],b[f],c[f]);return e}m=nf.prototype;m.compare=function(a,b){return sf(this,a,b,function(a,b,e){return a.compare(b,e)})};m.min=function(a,b){return sf(this,a,b,function(a,b,e){return a.min(b,e)})};
m.max=function(a,b){return sf(this,a,b,function(a,b,e){return a.max(b,e)})};m.pb=function(a,b){for(var c=[!0,!0],d=0;d<this.Ja.length&&(c[0]||c[1]);++d){var e=this.Ja[d].pb(a[d],b[d]);c[0]=c[0]&&e[0];c[1]=c[1]&&e[1]}return c};m.Md=function(a,b){for(var c=!0,d=0;d<this.Ja.length&&c;++d)c=this.Ja[d].Md(a[d],b[d]);return c};
m.cf=function(a){var b=a.filter(function(a){return a.every(ga)});a=Array(this.Ja.length);for(var c=0;c<a.length;c++)a[c]=b.map(function(a){return a[c]});a.forEach(function(a,b){a.sort(function(a,c){return this.Ja[b].Yd(a,c)}.bind(this))},this);b=Array(b.length);for(c=0;c<b.length;c++)b[c]=a.map(function(a){return a[c]});return b.sort(function(a,b){for(var c=0,h=0;h<this.Ja.length&&0==c;++h)c=this.Ja[h].Yd(a[h],b[h]);return c}.bind(this))};m.Nd=function(a){return this.Ja[0].Nd(a[0])};
m.od=function(a){var b=a.map(function(a,b){return this.Ja[b].od(a)[0]},this);a=a.map(function(a,b){return this.Ja[b].od(a)[1]},this);return[b,a]};function tf(a){this.ea=a;this.gb=C();this.Lc=new Ne;this.lb=new Ne}m=tf.prototype;m.getName=function(){return this.ea.getName()};m.add=function(a,b){null===a?(this.gb.add(b),this.Lc.add(a,1)):this.ea.add(a,b)};m.set=function(a,b){null===a?(this.gb.clear(),this.Lc.clear(),this.add(a,b)):this.ea.set(a,b)};m.remove=function(a,b){null===a?b?(this.gb.delete(b),this.Lc.remove(a,1)):(this.gb.clear(),this.Lc.clear()):this.ea.remove(a,b)};m.get=function(a){return null===a?cc(this.gb):this.ea.get(a)};
m.Yc=function(a){return this.ea.Yc(a)};m.La=function(){Oe(this.lb,[this.ea.La(),this.Lc]);return this.lb};m.Wa=function(a,b,c,d){b=this.ea.Wa(a,b,c,d);return null!=a?b:b.concat(cc(this.gb))};m.clear=function(){this.gb.clear();this.ea.clear()};m.bb=function(a){return null===a?0!=this.gb.size:this.ea.bb(a)};m.min=function(){return this.ea.min()};m.max=function(){return this.ea.max()};m.Ha=function(){return[new y(-2,cc(this.gb))].concat(this.ea.Ha())};m.mc=function(){return this.ea.mc()};
function uf(a,b){for(var c=-1,d=0;d<b.length;++d)if(-2==b[d].id()){c=d;break}if(-1==c)throw new D(102);var d=b[c].o,e=b.slice(0);e.splice(c,1);var c=a(e),f=new tf(c);d.forEach(function(a){f.gb.add(a)});return f}m.Fa=function(){return this.ea.Fa()};function vf(a){this.w=a;this.kb=C();this.S=new mf(1)}m=vf.prototype;m.getName=g("w");m.add=function(a){if("number"!=typeof a)throw new D(103);this.kb.add(a)};m.set=function(a,b){this.add(a,b)};m.remove=function(a){this.kb.delete(a)};m.get=function(a){return this.bb(a)?[a]:[]};m.min=function(){return this.Cc(this.S.min.bind(this.S))};m.max=function(){return this.Cc(this.S.max.bind(this.S))};
m.Cc=function(a){if(0==this.kb.size)return null;var b=cc(this.kb).reduce(function(b,d){return null===b||1==a(d,b)?d:b},null);return[b,[b]]};m.Yc=function(){return this.kb.size};m.Wa=function(a,b,c,d){var e=a||[Vc()];a=cc(this.kb).filter(function(a){return e.some(function(b){return this.S.Md(a,b)},this)},this);return Me(a,b,c,d)};m.clear=function(){this.kb.clear()};m.bb=function(a){return this.kb.has(a)};m.Ha=function(){return[new y(0,cc(this.kb))]};m.mc=g("S");
function wf(a,b){var c=new vf(a);b[0].o.forEach(function(a){c.add(a,a)});return c}m.Fa=l(!0);m.La=function(){var a=new Ne;a.na=this.kb.size;return a};function xf(a){this.h=a;this.Ia=a.i(Pb);this.C=a.i(Sb);this.ba=a.i(Qb)}xf.prototype.Da=function(a){var b=a.ra(),c=function(){if(0==b.length)return w();var a=b.shift();return(a.xb()?yf(this,a):zf(this,a)).then(c)}.bind(this);return c()};function zf(a,b){var c=new Nc(a.h,C([b])),c=a.Ia.zb(0,c),d=c.G(b.getName(),b.Jb.bind(b)).get([]).then(function(a){this.ba.rd(b.getName(),a);Af(this,b,a)}.bind(a));c.ia();return d}
function Af(a,b,c){var d=a.C.gc.get(b.getName())||[];c.forEach(function(a){d.forEach(function(b){var c=a.Cb(b.getName());b.add(c,a.id())})})}function yf(a,b){var c=new Nc(a.h,C([b])),d=a.Ia.zb(0,c),c=d.G(b.getName(),b.Jb).get([]).then(function(a){this.ba.rd(b.getName(),a)}.bind(a)),e=b.va().map(function(a){return Bf(this,a,d)},a).concat(Cf(a,b,d));d.ia();return bb(e.concat(c))}
function Bf(a,b,c){c=c.G(b.l(),ob,1);var d=kf(b);return c.get([]).then(function(a){if(1<a.length){if(Df(b)){var c=Xe.bind(void 0,d,b.l(),b.Ac);a=uf(c,a.slice(1))}else a=Xe(d,b.l(),b.Ac,a.slice(1));this.C.set(b.Mc,a)}}.bind(a))}function Cf(a,b,c){return c.G(re(b),ob,1).get([]).then(function(a){1<a.length&&(a=wf(re(b),a.slice(1)),this.C.set(b.getName(),a))}.bind(a))};function Ef(){this.aa=A();this.gc=A()}Ef.prototype.Da=function(a){a.ra().forEach(function(a){var c=[];this.gc.set(a.getName(),c);var d=re(a);if(null===this.get(d)){var e=new vf(d);c.push(e);this.aa.set(d,e)}a.va().forEach(function(a){var b;b=kf(a);b=new Pe(a.l(),b,a.Ac);b=Df(a)?new tf(b):b;c.push(b);this.aa.set(a.l(),b)},this)},this);return w()};Ef.prototype.get=function(a){return this.aa.get(a)||null};
Ef.prototype.set=function(a,b){var c=this.gc.get(a)||null;null===c&&(c=[],this.gc.set(a,c));for(var d=null,e=0;e<c.length;e++)if(c[e].getName()==b.getName()){d=e;break}null!==d&&0<c.length?c.splice(d,1,b):c.push(b);this.aa.set(b.getName(),b)};function Ff(a){this.fc=[];q(a)&&this.add(a)}Ff.prototype.toString=function(){return this.fc.map(function(a){return a.toString()}).join(",")};Ff.prototype.bb=function(a){return this.fc.some(function(b){return b.contains(a)})};Ff.prototype.Bb=g("fc");
Ff.prototype.add=function(a){if(0!=a.length)if(a=this.fc.concat(a),1==a.length)this.fc=a;else{a.sort(Yc);for(var b=[],c=a[0],d=1;d<a.length;++d)if(Tc(c,a[d])){var e=a[d],f=Vc();if(null!==c.b&&null!==e.b){var h=Uc(c.b,e.b,!0);1!=h?(f.b=c.b,f.ca=0!=h?c.ca:c.ca&&e.ca):(f.b=e.b,f.ca=e.ca)}null!==c.s&&null!==e.s&&(h=Uc(c.s,e.s,!1),-1!=h?(f.s=c.s,f.ma=0!=h?c.ma:c.ma&&e.ma):(f.s=e.s,f.ma=e.ma));c=f}else b.push(c),c=a[d];b.push(c);this.fc=b}};
function If(a,b){var c=[];a.Bb().map(function(a){return b.Bb().map(function(b){var c;if(Tc(a,b)){c=Vc();var h=Uc(a.b,b.b,!0),h=0==h?a.ca?a:b:-1!=h?a:b;c.b=h.b;c.ca=h.ca;null===a.s||null===b.s?b=null===a.s?b:a:(h=Uc(a.s,b.s,!1),b=0==h?a.ma?a:b:-1==h?a:b);c.s=b.s;c.ma=b.ma}else c=null;return c})}).forEach(function(a){c=c.concat(a)});return new Ff(c.filter(function(a){return null!==a}))};function Jf(a,b){var c=[],d=null,e=null;xd(a,function(a){var h=b(a);null==a.getParent()?e=h:L(d,h);var k=a.getParent();null!==k&&K(k).length==K(d).length&&(k=c.indexOf(d),-1!=k&&c.splice(k,1));1<K(a).length&&c.push(h);d=null===a.g?c[c.length-1]:h});return e}function Kf(a){return Lf(a,function(a){return null===a.g})}
function Mf(a){var b=a.getParent(),c=0;null!==b&&(c=K(b).indexOf(a),b.removeChild(a));var d=K(a).slice();d.forEach(function(d,f){a.removeChild(d);null===b||ud(b,d,c+f)});return{parent:b,children:d}}function Nf(a,b){K(a).slice().forEach(function(c){a.removeChild(c);L(b,c)});L(a,b)}function Of(a){var b=td(a,0);Mf(a);Nf(b,a);return b}
function Pf(a,b,c){var d=td(a,0),e=K(d).slice();if(!e.some(function(a){return b(a)}))return a;Mf(a);e.forEach(function(e,h){if(b(e)){var k=c(a);vd(d,h);L(k,e);ud(d,k,h)}});return d}function Qf(a,b,c,d){var e=a.getParent();null!==e&&(a=K(e).indexOf(a),vd(e,a),ud(e,c,a));K(b).slice().forEach(function(a){b.removeChild(a);L(d,a)});return c}function Lf(a,b,c){function d(a){b(a)&&e.push(a);null!=c&&c(a)||K(a).forEach(d)}var e=[];d(a);return e}
function Rf(a,b){var c=b||function(a){return a.toString()+"\n"},d="";xd(a,function(a){for(var b=0;b<sd(a);b++)d+="-";d+=c(a)});return d};function Sf(a){yd.call(this);this.Pb=a;this.Xa=!1}t(Sf,yd);m=Sf.prototype;m.Hb=function(){return Jf(this,function(a){if(a instanceof Sf){var b=new Sf(a.Pb);b.Xa=a.Xa;a=a.U();b.oa=a;return b}return a.Hb()})};m.cb=function(a){var b=a||[];xd(this,function(a){a!=this&&a.cb(b)}.bind(this));a=C(b);return cc(a)};m.qd=function(a){this.Xa!=a&&(this.Xa=a,this.Pb="and"==this.Pb?"or":"and",K(this).forEach(function(b){return b.qd(a)}))};
m.eval=function(a){var b=K(this).map(function(b){return b.eval(a)});return Tf(this,b)};function Tf(a,b){return"and"==a.Pb?dd(b):ed(b)}m.toString=function(){return"combined_pred_"+this.Pb.toString()};function Uf(){this.W=A();this.size=0}m=Uf.prototype;m.has=function(a){return this.W.has(a)};m.set=function(a,b){var c=this.W.get(a)||null;null===c&&(c=C(),this.W.set(a,c));c.has(b)||(c.add(b),this.size++);return this};m.rd=function(a,b){var c=this.W.get(a)||null;null===c&&(c=C(),this.W.set(a,c));b.forEach(function(a){c.has(a)||(c.add(a),this.size++)},this);return this};
m.delete=function(a,b){var c=this.W.get(a,null);if(null===c)return!1;var d=c.delete(b);d&&(--this.size,0==c.size&&this.W.delete(a));return d};m.get=function(a){a=this.W.get(a)||null;return null===a?null:cc(a)};m.clear=function(){this.W.clear();this.size=0};m.keys=function(){return Gb(this.W)};m.values=function(){var a=[];this.W.forEach(function(b){a.push.apply(a,cc(b))});return a};function Vf(a,b,c){yd.call(this);this.fa=a;this.la=b;this.F=c;this.Td=null;a=kd.vc();this.qc=qd(a,this.fa.H(),this.F);this.Tf=a.Ie.get(this.fa.H())||null}t(Vf,yd);m=Vf.prototype;m.Hb=function(){var a=new Vf(this.fa,this.la,this.F),b=this.U();a.oa=b;return a};m.cb=function(a){return null!=a?(a.push(this.fa),a.push(this.la),a):[this.fa,this.la]};
m.reverse=function(){var a=this.F;switch(this.F){case "gt":a="lt";break;case "lt":a="gt";break;case "gte":a="lte";break;case "lte":a="gte"}return new Vf(this.la,this.fa,a)};m.eval=function(a){var b=a.entries.filter(function(a){var b=G(a,this.fa);a=G(a,this.la);return this.qc(b,a)},this);return new E(b,F(a))};m.toString=function(){return"join_pred("+this.fa.l()+" "+this.F+" "+this.la.l()+")"};
function Wf(a,b,c){var d=null,e=null;-1!=F(b).indexOf(H(a.fa.G()))?(d=b,e=c):(d=c,e=b);if(d.entries.length>e.entries.length){a:{b=a.fa;a.fa=a.la;a.la=b;b=a.F;switch(a.F){case "gt":b="lt";break;case "lt":b="gt";break;case "gte":b="lte";break;case "lte":b="gte";break;default:break a}a.F=b;a.qc=qd(kd.vc(),a.fa.H(),a.F)}return[e,d]}return[d,e]}function Xf(a){var b={};a.cb().forEach(function(a){b[a.getName()]=null});return b}
function Yf(a,b,c){null===a.Td&&(a.Td=Xf(a.la.G()));var d=new gd(new y(-1,a.Td),!1);return jd(b,c,d,[H(a.la.G())])}
function Zf(a,b,c,d){var e=[b,c];d||(e=Wf(a,b,c));b=e[0];c=e[1];var e=b,f=c,h=a.fa,k=a.la;d&&(e=c,f=b,h=a.la,k=a.fa);var n=new Uf,z=[];e.entries.forEach(function(a){var b=String(G(a,h));n.set(b,a)});var ea=F(e),la=F(f);f.entries.forEach(function(a){var b=G(a,k),c=String(b);null!==b&&n.has(c)?n.get(c).forEach(function(b){b=jd(a,la,b,ea);z.push(b)}):d&&z.push(Yf(this,a,la))}.bind(a));a=F(b).concat(F(c));return new E(z,a)}
function $f(a,b,c,d,e){function f(a,b){var c=new gd(b,1<ea.length),c=jd(a,la,c,ea);z.push(c)}var h=d.Lf.G(),k=b,n=c;-1!=F(b).indexOf(H(h))&&(k=c,n=b);var z=[],ea=F(n),la=F(k);k.entries.forEach(function(a){var b=this.Tf(G(a,d.Zf)),b=d.index.get(b);0!=b.length&&(d.index.Fa()?f(a,e.get(b[0])):Ie(e,b).forEach(f.bind(null,a)))},a);a=F(k).concat(F(n));return new E(z,a)};function ag(a,b,c){return null===b?new Ad(a,b,c):q(b.l)?new Vf(a,b,c):new Ad(a,b,c)};var bg={};r("lf.schema.DataStoreType",bg);bg.INDEXED_DB=0;bg.MEMORY=1;bg.LOCAL_STORAGE=2;bg.FIREBASE=3;bg.WEB_SQL=4;bg.OBSERVABLE_STORE=5;function cg(a,b,c,d){this.Mc=a;this.name=b;this.Ac=c;this.f=d}cg.prototype.l=function(){return this.Mc+"."+this.name};function Df(a){return a.f.some(function(a){return a.ha.zc()})}function Q(a,b,c,d){this.w=a;this.ka=c;this.J=b;this.ld=d;this.$a=null}r("lf.schema.Table",Q);Q.prototype.getName=g("w");Q.prototype.getName=Q.prototype.getName;Q.prototype.Va=g("$a");
function H(a){return a.$a||a.w}Q.prototype.kc=function(a){var b=new this.constructor(this.w);b.$a=a;b.jg=this.jg;return b};Q.prototype.as=Q.prototype.kc;Q.prototype.createRow=Q.prototype.qb;Q.prototype.deserializeRow=Q.prototype.Jb;Q.prototype.va=g("ka");Q.prototype.getIndices=Q.prototype.va;Q.prototype.cb=g("J");Q.prototype.getColumns=Q.prototype.cb;Q.prototype.getConstraint=Q.prototype.Ab;Q.prototype.xb=g("ld");Q.prototype.persistentIndex=Q.prototype.xb;function re(a){return a.w+".#"};function R(a,b){this.child=a;this.Gb=b;this.$a=null}m=R.prototype;m.getName=function(){return this.Gb+"("+this.child.getName()+")"};m.l=function(){return this.Gb+"("+this.child.l()+")"};m.G=function(){return this.child.G()};m.toString=function(){return this.l()};m.H=function(){return this.child.H()};m.Va=g("$a");m.va=function(){return[]};m.ua=l(null);m.zc=l(!1);m.kc=function(a){this.$a=a;return this};R.prototype.as=R.prototype.kc;
function dg(a){for(var b=[a];a instanceof R;)b.push(a.child),a=a.child;return b}function eg(a){this.$a=a||null;this.O=new Q("#UnknownTable",[],[],!1)}m=eg.prototype;m.getName=l("*");m.l=function(){return this.getName()};m.toString=function(){return this.l()};m.G=g("O");m.H=l(4);m.Va=g("$a");m.va=function(){return[]};m.ua=l(null);m.zc=l(!1);r("lf.fn.avg",function(a){return new R(a,"AVG")});function fg(a){return new R(a||new eg,"COUNT")}r("lf.fn.count",fg);function gg(a){return new R(a,"DISTINCT")}r("lf.fn.distinct",gg);r("lf.fn.max",function(a){return new R(a,"MAX")});r("lf.fn.min",function(a){return new R(a,"MIN")});r("lf.fn.stddev",function(a){return new R(a,"STDDEV")});r("lf.fn.sum",function(a){return new R(a,"SUM")});r("lf.fn.geomean",function(a){return new R(a,"GEOMEAN")});function S(a,b){J.call(this);this.Df=b}t(S,J);S.prototype.exec=function(a,b){switch(this.Df){case 1:return hg(this,a,b);case 0:return ig(this,a,b);default:return jg(this,a,b)}};S.prototype.toString=l("dummy_node");S.prototype.Nc=function(){return this.toString()};function jg(a,b,c){return new v(function(a){a(this.da(b,[],c))}.bind(a))}function hg(a,b,c){return td(a,0).exec(b,c).then(function(a){return this.da(b,a,c)}.bind(a))}
function ig(a,b,c){var d=K(a).map(function(a){return a.exec(b,c)});return bb(d).then(function(a){var d=[];a.forEach(function(a){for(var b=0;b<a.length;++b)d.push(a[b])});return this.da(b,d,c)}.bind(a))};function kg(a){S.call(this,0,1);this.pe=a}t(kg,S);kg.prototype.toString=function(){return"aggregation("+this.pe.map(function(a){return a.l()}).toString()+")"};kg.prototype.da=function(a,b){b.forEach(function(a){lg(new mg(a,this.pe))},this);return b};function mg(a,b){this.Ga=a;this.J=b}
function lg(a){a.J.forEach(function(a){a=dg(a).reverse();for(var c=1;c<a.length;c++){var d=a[c],e=dg(d).slice(-1)[0],f=d.child instanceof R?ad(this.Ga,d.child):this.Ga;if(null!==f.Ua&&f.Ua.has(d.l()))break;f=ng(d.Gb,f,e);e=this.Ga;null===e.Ua&&(e.Ua=A());e.Ua.set(d.l(),f)}},a)}
function ng(a,b,c){var d=null;switch(a){case "MIN":d=og(b,c,function(a,b){return b<a?b:a});break;case "MAX":d=og(b,c,function(a,b){return b>a?b:a});break;case "DISTINCT":d=pg(b,c);break;case "COUNT":d=qg(b,c);break;case "SUM":d=rg(b,c);break;case "AVG":a=qg(b,c);0<a&&(d=rg(b,c)/a);break;case "GEOMEAN":d=sg(b,c);break;default:d=tg(b,c)}return d}function og(a,b,c){return a.entries.reduce(function(a,e){var f=G(e,b);return null===f?a:null===a?f:c(a,f)},null)}
function qg(a,b){return b instanceof eg?a.entries.length:a.entries.reduce(function(a,d){return a+(fa(G(d,b))?0:1)},0)}function rg(a,b){return og(a,b,function(a,b){return b+a})}function tg(a,b){var c=[];a.entries.forEach(function(a){a=G(a,b);null===a||c.push(a)});return 0==c.length?null:xb.apply(null,c)}function sg(a,b){var c=0,d=a.entries.reduce(function(a,d){var h=G(d,b);if(0==h||null===h)return a;c++;return a+Math.log(h)},0);return 0==c?null:Math.pow(Math.E,d/c)}
function pg(a,b){var c=A();a.entries.forEach(function(a){var e=G(a,b);c.set(e,a)});return new E(B(c),F(a))};function ug(a,b){this.za=a;this.$=b}ug.prototype.eb=g("za");ug.prototype.Z=g("$");function vg(){J.call(this)}t(vg,J);function wg(a,b){J.call(this);this.table=a;this.values=b}t(wg,vg);function xg(a,b){wg.call(this,a,b)}t(xg,wg);function yg(a){J.call(this);this.table=a}t(yg,vg);yg.prototype.toString=function(){return"delete("+this.table.getName()+")"};function zg(a,b){J.call(this);this.table=a;this.je=b}t(zg,vg);
zg.prototype.toString=function(){var a=[];this.je&&(a=this.je.map(function(a){return a.N.getName()},this));return"update("+this.table.getName()+", ["+a.join(",")+"])"};function Ag(a){J.call(this);this.I=a}t(Ag,vg);Ag.prototype.toString=function(){return"select("+this.I.toString()+")"};function Bg(a){J.call(this);this.table=a}t(Bg,vg);Bg.prototype.toString=function(){var a="table_access("+this.table.getName();null===this.table.Va()||(a+=" as "+this.table.Va());return a+")"};
function Cg(){J.call(this)}t(Cg,vg);Cg.prototype.toString=l("cross_product");function Dg(a,b){J.call(this);this.f=a;this.Lb=b}t(Dg,vg);Dg.prototype.toString=function(){var a="project("+this.f.toString();if(null!==this.Lb)var b=this.Lb.map(function(a){return a.l()}).join(", "),a=a+(", groupBy("+b+")");return a+")"};function Eg(a){J.call(this);this.L=a}t(Eg,vg);Eg.prototype.toString=function(){return"order_by("+Jd(this.L)+")"};function Fg(a){J.call(this);this.f=a}t(Fg,vg);
Fg.prototype.toString=function(){return"aggregation("+this.f.toString()+")"};function Gg(a){J.call(this);this.f=a}t(Gg,vg);Gg.prototype.toString=function(){return"group_by("+this.f.toString()+")"};function Hg(a){J.call(this);this.V=a}t(Hg,vg);Hg.prototype.toString=function(){return"limit("+this.V+")"};function Ig(a){J.call(this);this.M=a}t(Ig,vg);Ig.prototype.toString=function(){return"skip("+this.M+")"};function Jg(a,b){J.call(this);this.I=a;this.Nb=b}t(Jg,vg);
Jg.prototype.toString=function(){return"join(type: "+(this.Nb?"outer":"inner")+", "+this.I.toString()+")"};function Kg(){};function Lg(){}t(Lg,Kg);Lg.prototype.jb=function(a){this.Y=a;this.Sa(this.Y);return this.Y};Lg.prototype.Sa=function(a){if(a instanceof Ag){var b=Mg(this,a.I),b=Ng(this,b);Qf(a,a,b[0],b[1]);a==this.Y&&(this.Y=b[0]);a=b[0]}K(a).forEach(function(a){this.Sa(a)},this)};function Mg(a,b){if(0==K(b).length||"and"!=b.Pb)return[b];var c=K(b).slice().map(function(a){b.removeChild(a);return Mg(this,a)},a);return Ca(c)}
function Ng(a,b){var c=null,d=null;b.map(function(a,b){var h=new Ag(a);0==b?c=h:L(d,h);d=h},a);return[c,d]};function Og(){}t(Og,Kg);Og.prototype.jb=function(a,b){if(3>b.b.length)return a;this.Y=a;this.Sa(this.Y);return this.Y};Og.prototype.Sa=function(a){if(a instanceof Cg)for(;2<K(a).length;){for(var b=new Cg,c=0;2>c;c++){var d=vd(a,0);L(b,d)}ud(a,b,0)}K(a).forEach(function(a){this.Sa(a)},this)};function Pg(){S.call(this,0,0)}t(Pg,S);Pg.prototype.toString=l("cross_product");Pg.prototype.da=function(a,b){for(var c=b[0],d=b[1],e=[],f=F(c),h=F(d),k=0;k<c.entries.length;k++)for(var n=0;n<d.entries.length;n++){var z=jd(c.entries[k],f,d.entries[n],h);e.push(z)}c=F(c).concat(F(d));return[new E(e,c)]};function Qg(a,b){Md.call(this,a,b);this.Aa=a.i(Ub);this.Db=a.i(Vb)}t(Qg,Md);Qg.prototype.getPriority=l(2);Qg.prototype.Wd=function(a){0==this.H()?Rg(this,a):this.Kc()};function Rg(a,b){a.nd.forEach(function(a,d){a instanceof Id&&Pd(this.Db,a,b[d])},a)}Qg.prototype.Kc=function(){var a=Rd(this.Db,this.Z());0!=a.length&&(a=new Od(this.global,a),Sd(this.Aa,a))};function Sg(a){Dd.call(this,a)}t(Sg,Dd);Sg.prototype.Z=function(){var a=C();a.add(this.b);var b=this.ha.info();Tg(this.b.getName(),b.g).forEach(a.add.bind(a));return a};Sg.prototype.clone=function(){var a=new Sg(this.ha);Gd(a,this);a.b=this.b;return a};Sg.prototype.bind=function(a){Sg.Fb.bind.call(this,a);Hd(this,a);return this};function Ug(a){Dd.call(this,a)}t(Ug,Dd);Ug.prototype.Z=function(){var a=C();a.add(this.Ea);var b=this.ha.info();Tg(this.Ea.getName(),b.Qe).forEach(a.add.bind(a));this.Xb&&Tg(this.Ea.getName(),b.g).forEach(a.add.bind(a));return a};Ug.prototype.clone=function(){var a=new Ug(this.ha);Gd(a,this);a.Ea=this.Ea;this.values&&(a.values=this.values instanceof I?this.values:this.values.slice());a.Xb=this.Xb;a.Yb=this.Yb;return a};
Ug.prototype.bind=function(a){Ug.Fb.bind.call(this,a);this.Yb&&(this.values=this.Yb instanceof I?a[this.Yb.ua()]:this.Yb.map(function(b){return b instanceof I?a[b.ua()]:b}));return this};function Vg(a){Dd.call(this,a)}t(Vg,Dd);Vg.prototype.Z=function(){var a=C();a.add(this.table);var b=this.set.map(function(a){return a.N.l()}),c=this.ha.info();Wg(c,b).forEach(a.add.bind(a));Xg(c,b).forEach(a.add.bind(a));return a};Vg.prototype.clone=function(){var a=new Vg(this.ha);Gd(a,this);a.table=this.table;a.set=this.set?this.set.slice():this.set;return a};Vg.prototype.bind=function(a){Vg.Fb.bind.call(this,a);this.set.forEach(function(b){-1!=b.Sc&&(b.value=a[b.Sc])});Hd(this,a);return this};function Yg(a,b){if(null==b)return"NULL";switch(a){case 1:return b?1:0;case 3:case 4:return b;case 0:return"'"+qb(b)+"'";default:return"'"+b.toString()+"'"}}function Zg(a,b){var c=a.Xb?"INSERT OR REPLACE":"INSERT",d=a.Ea.cb(),c=c+(" INTO "+a.Ea.getName()+"("),c=c+d.map(function(a){return a.getName()}).join(", "),c=c+") VALUES (";return a.values.map(function(a){var f=d.map(function(c){var d=a.o[c.getName()];return b?null!=d?"#":"NULL":Yg(c.H(),d)});return c+f.join(", ")+");"}).join("\n")}
function $g(a){switch(a){case "between":return"BETWEEN";case "eq":return"=";case "gte":return">=";case "gt":return">";case "in":return"IN";case "lte":return"<=";case "lt":return"<";case "match":return"LIKE";case "neq":return"<>";default:return"UNKNOWN"}}function ah(a,b,c,d){return a instanceof I?"?"+a.ua().toString():d?null!=a?"#":"NULL":"match"==b?"'"+a.toString()+"'":"in"==b?"("+a.map(function(a){return Yg(c,a)}).join(", ")+")":"between"==b?Yg(c,a[0])+" AND "+Yg(c,a[1]):Yg(c,a).toString()}
function bh(a,b){return K(a).map(function(a){return"("+ch(a,b)+")"}).join("and"==a.Pb?" AND ":" OR ")}function dh(a){return[a.fa.l(),$g(a.F),a.la.l()].join(" ")}function ch(a,b){if(a instanceof Ad){var c=a.N.l(),d=$g(a.F),e=ah(a.value,a.F,a.N.H(),b);return"="==d&&"NULL"==e?[c,"IS NULL"].join(" "):"<>"==d&&"NULL"==e?[c,"IS NOT NULL"].join(" "):[c,d,e].join(" ")}if(a instanceof Sf)return bh(a,b);if(a instanceof Vf)return dh(a);throw new D(357,typeof a);}
function eh(a,b){var c=ch(a,b);return c?" WHERE "+c:""}function fh(a,b){var c="UPDATE "+a.table.getName()+" SET ",c=c+a.set.map(function(a){var b=a.N.l()+" = ";return-1!=a.Sc?b+"?"+a.Sc.toString():b+Yg(a.N.H(),a.value).toString()}).join(", ");a.u&&(c+=eh(a.u,b));return c+";"}
function gh(a,b){var c="*";a.f.length&&(c=a.f.map(function(a){return a.Va()?a.l()+" AS "+a.Va():a.l()}).join(", "));c="SELECT "+c+" FROM ";null!=a.vb&&0!=a.vb.size?c+=hh(a,b):(c+=a.b.map(ih).join(", "),a.u&&(c+=eh(a.u,b)));if(a.L)var d=a.L.map(function(a){return a.N.l()+(0==a.hb?" DESC":" ASC")}).join(", "),c=c+(" ORDER BY "+d);a.ja&&(d=a.ja.map(function(a){return a.l()}).join(", "),c+=" GROUP BY "+d);a.V&&(c+=" LIMIT "+a.V.toString());a.M&&(c+=" SKIP "+a.M.toString());return c+";"}
function ih(a){return H(a)!=a.getName()?a.getName()+" AS "+H(a):a.getName()}function hh(a,b){for(var c=Lf(a.u,function(a){return a instanceof Vf}),d=c.map(dh),e=ih(a.b[0]),f=1;f<a.b.length;f++)var h=ih(a.b[f]),e=a.vb.has(c[d.length-f].U())?e+(" LEFT OUTER JOIN "+h):e+(" INNER JOIN "+h),e=e+(" ON ("+d[d.length-f]+")");c=td(a.u,0);c instanceof Vf||(e+=" WHERE "+ch(c,b));return e}
function jh(a,b){var c=b||!1,d=a.a.clone();if(d instanceof Ug)return Zg(d,c);if(d instanceof Sg){var e="DELETE FROM "+d.b.getName();d.u&&(e+=eh(d.u,c));return e+";"}if(d instanceof Vg)return fh(d,c);if(d instanceof Id)return gh(d,c);throw new D(358,typeof d);};function T(a,b){this.global=a;this.ig=a.i(Tb);this.Aa=a.i(Ub);this.a=b}r("lf.query.BaseBuilder",T);T.prototype.exec=function(){try{this.ab()}catch(a){return Za(a)}return new v(function(a,c){var d=new Qg(this.global,[this.xc()]);Sd(this.Aa,d).then(function(c){a(Zc(c[0]))},c)},this)};T.prototype.exec=T.prototype.exec;T.prototype.Ff=function(){var a=function(a){return a.Nc(this.a)+"\n"}.bind(this);return Rf(kh(this).eb(),a)};T.prototype.explain=T.prototype.Ff;
T.prototype.bind=function(a){this.a.bind(a);return this};T.prototype.bind=T.prototype.bind;T.prototype.pg=function(a){return jh(this,a)};T.prototype.toSql=T.prototype.pg;T.prototype.ab=aa();function kh(a){if(null==a.Re){var b;b=a.ig;var c=a.a,d=b.Wf.create(c);b=b.fg.create(d,c);a.Re=b}return a.Re}T.prototype.xc=function(){return{context:this.a.clone(),Zd:kh(this)}};function lh(a){T.call(this,a,new Sg(a.i(Wb)))}t(lh,T);r("lf.query.DeleteBuilder",lh);lh.prototype.b=function(a){if(null!=this.a.b)throw new D(515);this.a.b=a;return this};lh.prototype.from=lh.prototype.b;lh.prototype.u=function(a){this.yd();this.a.u=a;return this};lh.prototype.where=lh.prototype.u;lh.prototype.yd=function(){if(null==this.a.b)throw new D(548);if(null!=this.a.u)throw new D(516);};lh.prototype.ab=function(){lh.Fb.ab.call(this);if(null==this.a.b)throw new D(517);};function mh(a,b){T.call(this,a,new Ug(a.i(Wb)));this.a.Xb=b||!1}t(mh,T);r("lf.query.InsertBuilder",mh);mh.prototype.ab=function(){mh.Fb.ab.call(this);var a=this.a;if(null==a.Ea||null==a.values)throw new D(518);if(a.Xb&&null===a.Ea.Ab().bd())throw new D(519);};mh.prototype.Ea=function(a){if(null!=this.a.Ea)throw new D(520);this.a.Ea=a;return this};mh.prototype.into=mh.prototype.Ea;
mh.prototype.values=function(a){if(null!=this.a.values)throw new D(521);a instanceof I||a.some(function(a){return a instanceof I})?this.a.Yb=a:this.a.values=a;return this};mh.prototype.values=mh.prototype.values;function nh(a){return oh("and",Array.prototype.slice.call(arguments))}r("lf.op.and",nh);r("lf.op.or",function(a){return oh("or",Array.prototype.slice.call(arguments))});function oh(a,b){var c=new Sf(a);b.forEach(function(a){L(c,a)});return c}r("lf.op.not",function(a){a.qd(!0);return a});function U(a,b){T.call(this,a,new Id(a.i(Wb)));this.ye=this.td=!1;this.a.f=b;ph(this);qh(this)}t(U,T);r("lf.query.SelectBuilder",U);U.prototype.ab=function(){U.Fb.ab.call(this);var a=this.a;if(null==a.b)throw new D(522);if(q(a.Ob)&&!q(a.V)||q(a.Ub)&&!q(a.M))throw new D(523);null!=this.a.ja?rh(this):sh(this)};function ph(a){var b=a.a.f.filter(function(a){return a instanceof R&&"DISTINCT"==a.Gb},a);if(0!=b.length&&(1!=b.length||1!=a.a.f.length))throw new D(524);}
function rh(a){var b=a.a.f.filter(function(a){return!(a instanceof R)}).map(function(a){return a.l()}),c=!1;if(0==a.a.ja.length||0==a.a.f.length)c=!0;else{var d=a.a.ja.map(function(a){return a.l()});(c=b.some(function(a){return-1==d.indexOf(a)}))||(c=a.a.ja.some(function(a){a=a.H();return 6==a||0==a}))}if(c)throw new D(525);}function sh(a){var b=a.a.f.some(function(a){return a instanceof R},a);a=a.a.f.some(function(a){return!(a instanceof R)},a)||0==a.a.f.length;if(b&&a)throw new D(526);}
function qh(a){a.a.f.forEach(function(a){if(a instanceof R&&!th(a.Gb,a.H()))throw new D(527,a.l());},a)}function uh(a,b){if(null==a.a.b)throw new D(b);}U.prototype.b=function(a){if(this.ye)throw new D(515);this.ye=!0;null==this.a.b&&(this.a.b=[]);this.a.b.push.apply(this.a.b,Array.prototype.slice.call(arguments));return this};U.prototype.from=U.prototype.b;U.prototype.u=function(a){uh(this,548);if(this.td)throw new D(516);this.td=!0;vh(this,a);return this};U.prototype.where=U.prototype.u;
function vh(a,b){if(null!=a.a.u){var c=nh(b,a.a.u);a.a.u=c}else a.a.u=b}U.prototype.Of=function(a,b){uh(this,542);if(this.td)throw new D(547);this.a.b.push(a);vh(this,b);return this};U.prototype.innerJoin=U.prototype.Of;U.prototype.Uf=function(a,b){uh(this,542);if(!(b instanceof Vf))throw new D(541);if(this.td)throw new D(547);this.a.b.push(a);null==this.a.vb&&(this.a.vb=C());var c=b;H(a)!=H(b.la.G())&&(c=b.reverse());this.a.vb.add(c.U());vh(this,c);return this};U.prototype.leftOuterJoin=U.prototype.Uf;
U.prototype.V=function(a){if(null!=(this.a.V||this.a.Ob))throw new D(528);if(a instanceof I)this.a.Ob=a;else{if(0>a)throw new D(531);this.a.V=a}return this};U.prototype.limit=U.prototype.V;U.prototype.M=function(a){if(null!=(this.a.M||this.a.Ub))throw new D(529);if(a instanceof I)this.a.Ub=a;else{if(0>a)throw new D(531);this.a.M=a}return this};U.prototype.skip=U.prototype.M;U.prototype.L=function(a,b){uh(this,549);null==this.a.L&&(this.a.L=[]);this.a.L.push({N:a,hb:null!=b?b:1});return this};
U.prototype.orderBy=U.prototype.L;U.prototype.ja=function(a){uh(this,549);if(null!=this.a.ja)throw new D(530);null==this.a.ja&&(this.a.ja=[]);this.a.ja.push.apply(this.a.ja,Array.prototype.slice.call(arguments));return this};U.prototype.groupBy=U.prototype.ja;function th(a,b){switch(a){case "COUNT":case "DISTINCT":return!0;case "AVG":case "GEOMEAN":case "STDDEV":case "SUM":return 4==b||3==b;case "MAX":case "MIN":return 4==b||3==b||5==b||2==b}return!1}
U.prototype.clone=function(){var a=new U(this.global,this.a.f);a.a=this.a.clone();a.a.Wc=null;return a};U.prototype.clone=U.prototype.clone;function wh(a,b){T.call(this,a,new Vg(a.i(Wb)));this.a.table=b}t(wh,T);r("lf.query.UpdateBuilder",wh);wh.prototype.set=function(a,b){var c={Sc:b instanceof I?b.ua():-1,N:a,value:b};null!=this.a.set?this.a.set.push(c):this.a.set=[c];return this};wh.prototype.set=wh.prototype.set;wh.prototype.u=function(a){this.yd();this.a.u=a;return this};wh.prototype.where=wh.prototype.u;wh.prototype.yd=function(){if(null!=this.a.u)throw new D(516);};
wh.prototype.ab=function(){wh.Fb.ab.call(this);if(null==this.a.set)throw new D(532);if(this.a.set.some(function(a){return a.value instanceof I}))throw new D(501);};function xh(a){this.a=a;this.za=null}xh.prototype.dc=function(){null===this.za&&(this.za=this.$c());return this.za};function yh(a){xh.call(this,a)}t(yh,xh);yh.prototype.$c=function(){return this.a.Xb?new xg(this.a.Ea,this.a.values):new wg(this.a.Ea,this.a.values)};function zh(a){xh.call(this,a)}t(zh,xh);zh.prototype.$c=function(){var a=new zg(this.a.table,this.a.set),b=null!=this.a.u?new Ag(this.a.u.Hb()):null,c=new Bg(this.a.table);null===b?L(a,c):(L(b,c),L(a,b));return a};function Ah(a,b,c){this.za=a;this.$d=b;this.Sb=c}Ah.prototype.dc=function(){this.Sb.forEach(function(a){this.za=a.jb(this.za,this.$d)},this);return this.za};function Bh(a,b){xh.call(this,a);this.Sb=b}t(Bh,xh);Bh.prototype.$c=function(){var a=new yg(this.a.b),b=null!=this.a.u?new Ag(this.a.u.Hb()):null,c=new Bg(this.a.b);null===b?L(a,c):(L(b,c),L(a,b));return(new Ah(a,this.a,this.Sb)).dc()};function Ch(){}t(Ch,Kg);Ch.prototype.jb=function(a,b){if(2>b.b.length)return a;this.Y=a;this.Sa(this.Y,b);return this.Y};Ch.prototype.Sa=function(a,b){if(a instanceof Ag&&a.I instanceof Vf){var c=a.I.U(),d=td(a,0);d instanceof Cg&&(c=null!=b.vb&&b.vb.has(c),c=new Jg(a.I,c),Qf(a,d,c,c),a==this.Y&&(this.Y=c),a=c)}K(a).forEach(function(a){this.Sa(a,b)},this)};function Dh(){this.Rc=C()}t(Dh,Kg);Dh.prototype.jb=function(a,b){this.Rc.clear();if(!q(b.u))return a;this.Y=a;this.Sa(this.Y);this.Rc.clear();return this.Y};Dh.prototype.Sa=function(a){if(Eh(a)){var b=a.I instanceof Ad?Fh(this,a):Gh(this,a);this.Rc.add(a);b==a&&(b=td(a,0));null!==b&&(fa(b.getParent())&&(this.Y=b),Eh(b)&&!this.Rc.has(b)&&this.Sa(b))}else K(a).forEach(function(a){this.Sa(a)},this)};
function Hh(a,b,c){var d=b;if(td(b,0)instanceof Ag)d=Of(b),Hh(a,b,c);else if(Ih(b)){var e=[],d=Pf(b,c,function(a){a=new Ag(a.I);e.push(a);return a});e.forEach(function(a){Hh(this,a,c)},a)}return d}function Fh(a,b){var c=C([H(b.I.N.G())]),d=function(a){return Jh(this,a,c)}.bind(a);return Hh(a,b,d)}function Gh(a,b){var c=C([H(b.I.fa.G()),H(b.I.la.G())]),d=function(a){return Jh(this,a,c)}.bind(a);return Hh(a,b,d)}
function Jh(a,b,c){var d=C();Kf(b).forEach(function(a){d.add(H(a.table))},a);b instanceof Bg&&d.add(H(b.table));return dc(d,c)}function Eh(a){return a instanceof Ag&&!(a.I instanceof Sf)}function Ih(a){a=td(a,0);return a instanceof Cg||a instanceof Jg};function Kh(a,b){xh.call(this,a);this.Sb=b;this.Ve=this.Me=this.bf=this.Pe=this.qe=this.Be=this.af=this.ve=this.df=null}t(Kh,xh);
Kh.prototype.$c=function(){Lh(this);2<=this.a.b.length&&(this.ve=new Cg);this.af=null!=this.a.u?new Ag(this.a.u.Hb()):null;this.a.L&&(this.Pe=new Eg(this.a.L));null!=this.a.M&&0<this.a.M&&(this.bf=new Ig(this.a.M));null!=this.a.V&&(this.Me=new Hg(this.a.V));null!=this.a.ja&&(this.Be=new Gg(this.a.ja));Mh(this);this.Ve=new Dg(this.a.f||[],this.a.ja||null);var a=Nh(this);return(new Ah(a,this.a,this.Sb)).dc()};
function Nh(a){for(var b=[a.Me,a.bf,a.Ve,a.Pe,a.qe,a.Be,a.af,a.ve],c=null,d=null,e=0;e<b.length;e++){var f=b[e];null!==f&&(null===d?d=f:L(b[c],f),c=e)}a.df.forEach(function(a){L(b[c],a)});return d}function Lh(a){a.df=a.a.b.map(function(a){return new Bg(a)},a)}function Mh(a){var b=a.a.f.filter(function(a){return a instanceof R});null!=a.a.L&&a.a.L.forEach(function(a){a.N instanceof R&&b.push(a.N)});0<b.length&&(a.qe=new Fg(b))};function Oh(){this.ee=[new Lg,new Og,new Dh,new Ch];this.Ed=[new Lg]}Oh.prototype.create=function(a){var b=null;if(a instanceof Ug)b=new yh(a);else if(a instanceof Sg)b=new Bh(a,this.Ed);else if(a instanceof Id)b=new Kh(a,this.ee);else if(a instanceof Vg)b=new zh(a);else throw new D(513);b=b.dc();return new ug(b,a.Z())};function Ph(a){S.call(this,0,1);this.O=a}t(Ph,S);Ph.prototype.toString=function(){return"delete("+this.O.getName()+")"};Ph.prototype.da=function(a,b){var c=b[0].entries.map(function(a){return a.sa});a.remove(this.O,c);return[cd()]};function Qh(a,b){S.call(this,0,-1);this.table=b;this.C=a.i(Sb)}t(Qh,S);Qh.prototype.toString=function(){return"get_row_count("+this.table.getName()+")"};Qh.prototype.da=function(){var a=this.C.get(re(this.table)),b=new E([],[this.table.getName()]),c=fg(),a=a.La().na;null===b.Ua&&(b.Ua=A());b.Ua.set(c.l(),a);return[b]};function Rh(a,b){S.call(this,0,-1);this.ba=a.i(Qb);this.C=a.i(Sb);this.table=b}t(Rh,S);Rh.prototype.toString=function(){var a="table_access("+this.table.getName();null===this.table.Va()||(a+=" as "+this.table.Va());return a+")"};Rh.prototype.da=function(){var a=this.C.get(re(this.table)).Wa();return[fd(Ie(this.ba,a),[H(this.table)])]};function Sh(a){this.h=a}t(Sh,Kg);Sh.prototype.jb=function(a,b){this.Y=a;if(!this.zd(b))return a;var c=Lf(a,function(a){return a instanceof Rh})[0],d=new Qh(this.h,c.table);Qf(c,c,d,d);return this.Y};Sh.prototype.zd=function(a){return 1==a.f.length&&1==a.b.length&&null==a.u&&null==a.V&&null==a.M&&null==a.ja?(a=a.f[0],a instanceof R&&"COUNT"==a.Gb&&a.child instanceof eg):!1};function Th(a){S.call(this,0,1);this.Ae=a}t(Th,S);Th.prototype.toString=function(){return"groupBy("+this.Ae.map(function(a){return a.l()}).toString()+")"};Th.prototype.da=function(a,b){return Uh(this,b[0])};function Uh(a,b){var c=new Uf,d=function(a){return this.Ae.map(function(b){return G(a,b)},this).join(",")}.bind(a);b.entries.forEach(function(a){c.set(d(a),a)},a);return c.keys().map(function(a){return new E(c.get(a),F(b))},a)};function Vh(a,b,c){S.call(this,0,0);this.C=a.i(Sb);this.ba=a.i(Qb);this.I=b;this.Nb=c;this.wd="eq"==this.I.F?0:2;this.Ce=null}t(Vh,S);var Wh=["hash","index_nested_loop","nested_loop"];Vh.prototype.toString=function(){return"join(type: "+(this.Nb?"outer":"inner")+", impl: "+Wh[this.wd]+", "+this.I.toString()+")"};
Vh.prototype.da=function(a,b){switch(this.wd){case 0:return[Zf(this.I,b[0],b[1],this.Nb)];case 1:return[$f(this.I,b[0],b[1],this.Ce,this.ba)];default:var c=this.I,d=b[0],e=b[1],f=this.Nb,h=[d,e];f||(h=Wf(c,d,e));for(var d=h[0],e=h[1],h=[],k=F(d),n=F(e),z=d.entries.length,ea=e.entries.length,la=ea+256-1>>8,Va=0;Va<la;){for(var Rb=0;Rb<z;Rb++){var Gf=!1,Hf=G(d.entries[Rb],c.fa);if(null!==Hf)for(var Xh=Math.min(Va+1<<8,ea),Jc=Va<<8;Jc<Xh;Jc++)if(c.qc(Hf,G(e.entries[Jc],c.la))){var Gf=!0,Yi=jd(d.entries[Rb],
k,e.entries[Jc],n);h.push(Yi)}f&&!Gf&&h.push(Yf(c,d.entries[Rb],k))}Va++}c=F(d).concat(F(e));return[new E(h,c)]}};function Yh(a,b){a.wd=1;var c=a.C.get(b.ua().l());a.Ce={Lf:b,Zf:b==a.I.fa?a.I.la:a.I.fa,index:c}};function Zh(a){S.call(this,0,-1);this.Xe=a}t(Zh,S);Zh.prototype.toString=function(){return"no_op_step("+F(this.Xe[0]).join(",")+")"};Zh.prototype.da=g("Xe");function $h(){}t($h,Kg);$h.prototype.jb=function(a,b){this.Y=a;if(!this.zd(b))return a;Lf(a,function(a){return a instanceof Vh}).forEach(this.hg,this);return this.Y};$h.prototype.zd=function(a){return 1<a.b.length};
$h.prototype.hg=function(a){if("eq"==a.I.F&&!a.Nb){var b=function(b){if(!(b instanceof Rh))return null;b=H(b.table)==H(a.I.la.G())?a.I.la:a.I.fa;return fa(b.ua())?null:b},c=b(td(a,0)),b=b(td(a,1));if(null!==c||null!==b){b=null===b?c:b;Yh(a,b);var d=new E([],[H(b.G())]);wd(a,new Zh([d]),b==c?0:1)}}};function ai(a){a=a.map(function(a){return a.Bb()});a=Cb.apply(null,a);var b=[];Bb(a,function(a){b.push(a)});return b}function bi(a){this.Mb=a}bi.prototype.ad=function(){return 1==this.Mb.f.length?[Vc()]:[this.Mb.f.map(function(){return Vc()})]};function ci(a,b){this.Mb=a;this.ya=b;this.Cd=this.Ke=null}
function di(a,b){var c=A();a.ya.keys().forEach(function(a){var e=this.ya.get(a).map(function(a){return Ed(b,a)},this),f=new Ff([Vc()]);e.forEach(function(a){var b=null;"between"==a.F?b=new Rc(a.value[0],a.value[1],!1,!1):"eq"==a.F?(b=a.value,b=new Rc(b,b,!1,!1)):b="gte"==a.F?new Rc(a.value,null,!1,!1):"gt"==a.F?new Rc(a.value,null,!0,!1):"lte"==a.F?new Rc(null,a.value,!1,!1):new Rc(null,a.value,!1,!0);a=a.Xa?Sc(b):[b];a=new Ff(a);f=If(f,a)});c.set(a,f)},a);return c}
ci.prototype.ad=function(a){if(this.Ke==a)return this.Cd;for(var b=di(this,a),c=this.Mb.f.length-1;0<=c;c--){var d=this.Mb.f[c];if(null!==(b.get(d.ha.getName())||null))break;b.set(d.ha.getName(),new Ff([Vc()]))}this.Cd=1==this.Mb.f.length?B(b)[0].Bb():ai(ei(this,b));this.Ke=a;return this.Cd};function ei(a,b){var c=A(),d=0;a.Mb.f.forEach(function(a){c.set(a.ha.getName(),d);d++});return Gb(b).sort(function(a,b){return c.get(a)-c.get(b)}).map(function(a){return b.get(a)})};function fi(a,b){this.ef=b;this.C=a.i(Sb)}function gi(a,b,c){c=c.filter(a.Pf,a);if(0==c.length)return null;a=hi(a,c);if(0==a.length)return null;if(1==a.length)return a[0];var d=Number.MAX_VALUE;return a.reduce(function(a,c){var h=ii(c,b);return h<d?(d=h,c):a},null)}
function hi(a,b){return a.ef.va().map(function(a){a=new ji(this.C,a);ki(a,b);return a},a).filter(function(a){if(null===a.ya)a=!1;else{for(var b=!1,e=!0,f=0;f<a.tb.f.length;f++){var h=a.ya.has(a.tb.f[f].ha.getName());if(b&&h){e=!1;break}h||(b=!0)}a=e}return a})}fi.prototype.Pf=function(a){var b;if(b=a instanceof Ad)Bd(a),b=null!==a.value&&("between"==a.F||"eq"==a.F||"gt"==a.F||"gte"==a.F||"lt"==a.F||"lte"==a.F);return b?a.N.G()==this.ef:!1};
function ji(a,b){this.C=a;this.tb=b;this.Mf=C(this.tb.f.map(function(a){return a.ha.getName()}));this.Qd=this.ya=null}function li(a){null===a.Qd&&(a.Qd=new ci(a.tb,a.ya));return a.Qd}function ki(a,b){b.forEach(function(a){var b=a.cb()[0].getName();this.Mf.has(b)&&(null===this.ya&&(this.ya=new Uf),this.ya.set(b,a.U()))},a)}function ii(a,b){var c=li(a).ad(b),d=a.C.get(a.tb.l());return c.reduce(function(a,b){return a+d.Yc(b)},0)};function mi(a,b,c,d){S.call(this,0,-1);this.C=a.i(Sb);this.index=b;this.Je=c;this.ce=d;this.Qc=this.Pc=!1}t(mi,S);mi.prototype.toString=function(){return"index_range_scan("+this.index.l()+", ?, "+(this.ce?"reverse":"natural")+(this.Pc?", limit:?":"")+(this.Qc?", skip:?":"")+")"};mi.prototype.Nc=function(a){var b=this.toString(),c=this.Je.ad(a),b=b.replace("?",c.toString());this.Pc&&(b=b.replace("?",a.V.toString()));this.Qc&&(b=b.replace("?",a.M.toString()));return b};
mi.prototype.da=function(a,b,c){a=this.Je.ad(c);b=this.C.get(this.index.l());c=(1==a.length&&a[0]instanceof Rc&&Xc(a[0])?Me(b.get(a[0].b),!1,this.Pc?c.V:void 0,this.Qc?c.M:void 0):b.Wa(a,this.ce,this.Pc?c.V:void 0,this.Qc?c.M:void 0)).map(function(a){return new y(a,{})},this);return[fd(c,[this.index.Mc])]};function ni(a){S.call(this,0,1);this.md=a}t(ni,S);ni.prototype.toString=l("select(?)");ni.prototype.Nc=function(a){a=Ed(a,this.md);return this.toString().replace("?",a.toString())};ni.prototype.da=function(a,b,c){return[Ed(c,this.md).eval(b[0])]};function oi(a,b){S.call(this,0,1);this.ba=a.i(Qb);this.O=b}t(oi,S);oi.prototype.toString=function(){return"table_access_by_row_id("+this.O.getName()+")"};oi.prototype.da=function(a,b){return[fd(Ie(this.ba,$c(b[0])),[H(this.O)])]};function pi(a){this.h=a}t(pi,Kg);pi.prototype.jb=function(a,b){this.Y=a;Lf(a,function(a){return a instanceof Rh}).forEach(function(a){var d=qi(a);if(0!=d.length){var e=gi(new fi(this.h,a.table),b,d.map(function(a){return Ed(b,a.md)}));if(null!==e){var f=A();d.forEach(function(a){f.set(a.md,a)},this);this.Y=ri(this,e,f,a)}}},this);return this.Y};function qi(a){var b=[];for(a=a.getParent();a;)a instanceof ni&&b.push(a),a=a.getParent();return b}
function ri(a,b,c,d){(null===b.ya?[]:b.ya.values()).map(function(a){return c.get(a)}).forEach(Mf);b=new mi(a.h,b.tb,li(b),!1);a=new oi(a.h,d.table);L(a,b);Qf(d,d,a,b);return b.eb()};function si(a,b){S.call(this,0,-1);this.C=a.i(Sb);this.O=b}t(si,S);si.prototype.toString=function(){return"insert("+this.O.getName()+")"};si.prototype.da=function(a,b,c){ti(this.O,c.values,this.C);a.ub(this.O,c.values);return[fd(c.values,[this.O.getName()])]};function ti(a,b,c){a=a.Ab().bd();if(null===a?0:a.f[0].autoIncrement){var d=a.f[0].ha.getName();c=c.get(a.l()).max();var e=null===c?0:c[0];b.forEach(function(a){if(0==a.o[d]||null==a.o[d])e++,a.o[d]=e})}}
function ui(a,b){S.call(this,0,-1);this.C=a.i(Sb);this.O=b}t(ui,S);ui.prototype.toString=function(){return"insert_replace("+this.O.getName()+")"};ui.prototype.da=function(a,b,c){ti(this.O,c.values,this.C);a.Ld(this.O,c.values);return[fd(c.values,[this.O.getName()])]};function vi(){S.call(this,0,1)}t(vi,S);vi.prototype.toString=l("limit(?)");vi.prototype.Nc=function(a){return this.toString().replace("?",a.V.toString())};vi.prototype.da=function(a,b,c){b[0].entries.splice(c.V);return b};function wi(a){S.call(this,0,1);this.L=a}t(wi,S);m=wi.prototype;m.toString=function(){return"order_by("+Jd(this.L)+")"};m.da=function(a,b){if(1==b.length){var c;c=b[0];for(var d=null,e=0;e<this.L.length;e++){var f=gg(this.L[e].N);if(null!==c.Ua&&c.Ua.has(f.l())){d=f;break}}c=d;(null===c?b[0]:ad(b[0],c)).entries.sort(this.Cf.bind(this))}else b.sort(this.kg.bind(this));return b};
m.S=function(a,b){var c=null,d=null,e=null,f=-1;do f++,e=this.L[f].N,c=this.L[f].hb,d=a(e),e=b(e);while(d==e&&f+1<this.L.length);d=d<e?-1:d>e?1:0;return 1==c?d:-d};m.kg=function(a,b){return this.S(function(b){return b instanceof R?ad(a,b):G(a.entries[a.entries.length-1],b)},function(a){return a instanceof R?ad(b,a):G(b.entries[b.entries.length-1],a)})};m.Cf=function(a,b){return this.S(function(b){return G(a,b)},function(a){return G(b,a)})};function xi(a,b){this.Ga=a;this.J=b}function yi(a){return a.J.some(function(a){return a instanceof R},a)?zi(a):Ai(a)}function zi(a){if(1==a.J.length&&"DISTINCT"==a.J[0].Gb)return a=ad(a.Ga,a.J[0]).entries.map(function(a){var b=new gd(new y(-1,{}),1<this.Ga.K.size);id(b,this.J[0],G(a,this.J[0].child));return b},a),new E(a,[]);var b=new gd(new y(-1,{}),1<a.Ga.K.size);a.J.forEach(function(a){var d=a instanceof R?ad(this.Ga,a):G(this.Ga.entries[0],a);id(b,a,d)},a);return new E([b],F(a.Ga))}
function Ai(a){var b=Array(a.Ga.entries.length),c=1<a.Ga.K.size;a.Ga.entries.forEach(function(a,e){b[e]=new gd(new y(a.sa.id(),{}),c);this.J.forEach(function(c){id(b[e],c,G(a,c))},this)},a);return new E(b,F(a.Ga))}function Bi(a,b){var c=a.map(function(a){return yi(new xi(a,b)).entries[0]});return new E(c,F(a[0]))};function Ci(a,b){S.call(this,0,1);this.f=a;this.Lb=b}t(Ci,S);Ci.prototype.toString=function(){var a="project("+this.f.toString();if(null!==this.Lb)var b=this.Lb.map(function(a){return a.l()}).join(", "),a=a+(", groupBy("+b+")");return a+")"};Ci.prototype.da=function(a,b){var c;0==b.length?c=[cd()]:1==b.length?(c=b[0],c=[0==this.f.length?c:yi(new xi(c,this.f))]):c=[Bi(b,this.f)];return c};function Di(a){return a.f.some(function(a){return a instanceof R})||null!==a.Lb};function Ei(){S.call(this,0,1)}t(Ei,S);Ei.prototype.toString=l("skip(?)");Ei.prototype.Nc=function(a){return this.toString().replace("?",a.M.toString())};Ei.prototype.da=function(a,b,c){return[new E(b[0].entries.slice(c.M),F(b[0]))]};function Fi(){}t(Fi,Kg);Fi.prototype.jb=function(a,b){if(!q(b.V)&&!q(b.M))return a;var c=Gi(a);if(null===c)return a;Lf(a,function(a){return a instanceof vi||a instanceof Ei}).forEach(function(a){a instanceof vi?c.Pc=!0:c.Qc=!0;Mf(a)},this);return c.eb()};function Gi(a){a=Lf(a,function(a){return a instanceof mi},function(a){return a instanceof Ci&&Di(a)||a instanceof wi||1!=K(a).length||a instanceof ni});return 0<a.length?a[0]:null};function Hi(a){this.h=a}t(Hi,Kg);Hi.prototype.jb=function(a,b){var c=Ii(a,b);if(null===c)return a;var d;a:{var e=c;d=Ji(td(c,0));if(null!==d){var f;f=c.L;for(var h=null,k=d.table.va(),n=0;n<k.length&&null===h;n++)h=Ki(k[n],f);f=h;if(null===f){d=e;break a}e=new mi(this.h,f.tb,new bi(f.tb),f.Ge);f=new oi(this.h,d.table);L(f,e);Mf(c);e=Qf(d,d,f,e)}d=e}if(d==c)a:if(d=c,e=Li(td(c,0)),null!==e){f=Ki(e.index,c.L);if(null===f)break a;e.ce=f.Ge;d=Mf(c).parent}return d.eb()};
function Li(a){a=Lf(a,function(a){return a instanceof mi},function(a){return 1!=K(a).length});return 0<a.length?a[0]:null}function Ji(a){a=Lf(a,function(a){return a instanceof Rh},function(a){return 1!=K(a).length});return 0<a.length?a[0]:null}function Ii(a,b){return q(b.L)?Lf(a,function(a){return a instanceof wi})[0]:null}function Ki(a,b){if(a.f.length!=b.length||!b.every(function(b,c){return b.N.getName()==a.f[c].ha.getName()}))return null;var c=Mi(b,a);return c[0]||c[1]?{tb:a,Ge:c[1]}:null}
function Mi(a,b){var c=a.reduce(function(a,b){return a<<1|(0==b.hb?0:1)},0),d=b.f.reduce(function(a,b){return a<<1|(0==b.hb?0:1)},0),d=c^d,c=0==d,d=d==Math.pow(2,Math.max(a.length,b.f.length))-1;return[c,d]};function Ni(a,b,c){this.za=a;this.$d=b;this.Sb=c}Ni.prototype.dc=function(){this.Sb.forEach(function(a){this.za=a.jb(this.za,this.$d)},this);return this.za};function Oi(a,b){S.call(this,0,1);this.O=a;this.sg=b}t(Oi,S);Oi.prototype.toString=function(){return"update("+this.O.getName()+")"};Oi.prototype.da=function(a,b){var c=b[0].entries.map(function(a){var b=this.O.Jb(a.sa.Ha());this.sg.forEach(function(a){b.o[a.N.getName()]=a.value},this);return b},this);a.update(this.O,c);return[cd()]};function Pi(a){this.h=a;this.ee=[new $h,new pi(this.h),new Hi(this.h),new Fi,new Sh(this.h)];this.Ed=[new pi(this.h)]}Pi.prototype.create=function(a,b){var c=a.eb();if(c instanceof xg||c instanceof wg)return Qi(this,a,b);if(c instanceof Dg||c instanceof Hg||c instanceof Ig)return Qi(this,a,b,this.ee);if(c instanceof yg||c instanceof zg)return Qi(this,a,b,this.Ed);throw new D(8);};function Qi(a,b,c,d){a=Jf(b.eb(),a.Yf.bind(a));null!=d&&(a=(new Ni(a,c,d)).dc());return new Kd(a,b.Z())}
Pi.prototype.Yf=function(a){if(a instanceof Dg)return new Ci(a.f,a.Lb);if(a instanceof Gg)return new Th(a.f);if(a instanceof Fg)return new kg(a.f);if(a instanceof Eg)return new wi(a.L);if(a instanceof Ig)return new Ei;if(a instanceof Hg)return new vi;if(a instanceof Ag)return new ni(a.I.U());if(a instanceof Cg)return new Pg;if(a instanceof Jg)return new Vh(this.h,a.I,a.Nb);if(a instanceof Bg)return new Rh(this.h,a.table);if(a instanceof yg)return new Ph(a.table);if(a instanceof zg)return new Oi(a.table,
a.je);if(a instanceof xg)return new ui(this.h,a.table);if(a instanceof wg)return new si(this.h,a.table);throw new D(514);};function Ri(a){this.Wf=new Oh;this.fg=new Pi(a)};function Si(){this.Ne=A()}function Ti(a,b){var c=a.Ne.get(b.getName())||null;null===c&&(c=new Ui,a.Ne.set(b.getName(),c));return c}function Vi(a,b,c,d){c.forEach(function(a){a=Ti(this,a);0==d?(a.Ya=null,a.rc=b):3==d?(null===a.Tb&&(a.Tb=C()),a.Tb.add(b),null===a.Pa&&(a.Pa=C()),a.Pa.delete(b)):1==d?(null===a.Pa&&(a.Pa=C()),a.Pa.add(b)):2==d&&(a.Ya=b)},a)}
function Wi(a,b,c,d){var e=!0;c.forEach(function(a){if(e){a=Ti(this,a);var c=null===a.Pa||0==a.Pa.size;e=0==d?(null===a.Tb||0==a.Tb.size)&&c&&null===a.rc&&null!==a.Ya&&a.Ya==b:3==d?null===a.rc&&null===a.Ya&&null!==a.Pa&&a.Pa.has(b):1==d?null===a.Ya:c&&(null===a.Ya||a.Ya==b)}},a);return e}function Xi(a,b,c,d){var e=Wi(a,b,c,d);e&&Vi(a,b,c,d);return e}Si.prototype.releaseLock=function(a,b){b.forEach(function(b){Ti(this,b).releaseLock(a)},this)};
function Zi(a,b){b.forEach(function(a){Ti(this,a).Ya=null},a)}function Ui(){this.Tb=this.Pa=this.Ya=this.rc=null}Ui.prototype.releaseLock=function(a){this.rc==a&&(this.rc=null);this.Ya==a&&(this.Ya=null);null===this.Pa||this.Pa.delete(a);null===this.Tb||this.Tb.delete(a)};function $i(){this.Rb=new aj;this.Bc=new Si}function Sd(a,b){(2>b.getPriority()||2>b.getPriority())&&Zi(a.Bc,b.Z());a.Rb.ub(b);bj(a);return b.Kb().ga}function bj(a){for(var b=a.Rb.Bb(),c=0;c<b.length;c++){var d=b[c],e=!1;if(e=0==d.H()?cj(a,d,1,3):cj(a,d,2,0))a.Rb.remove(d),e=a,d.exec().then(e.dg.bind(e,d),e.cg.bind(e,d))}}function cj(a,b,c,d){var e=!1;Xi(a.Bc,b.U(),b.Z(),c)&&(e=Xi(a.Bc,b.U(),b.Z(),d));return e}$i.prototype.dg=function(a,b){this.Bc.releaseLock(a.U(),a.Z());a.Kb().resolve(b);bj(this)};
$i.prototype.cg=function(a,b){this.Bc.releaseLock(a.U(),a.Z());a.Kb().reject(b);bj(this)};function aj(){this.Rb=[]}aj.prototype.ub=function(a){Le(this.Rb,a,function(a,c){var d=a.getPriority()-c.getPriority();return 0==d?a.U()-c.U():d})};aj.prototype.Bb=function(){return this.Rb.slice()};aj.prototype.remove=function(a){var b=this.Rb;a=va(b,a);var c;(c=0<=a)&&ua.splice.call(b,a,1);return c};function dj(a,b){this.Fd=kd.vc();this.ae=a;this.hd=b;this.J=ej(this)}function ej(a){if(0<a.ae.f.length)return a.ae.f;var b=[];a.ae.b.forEach(function(a){a.cb().forEach(function(a){b.push(a)})});return b}dj.prototype.S=function(a,b){return this.J.every(function(c){return qd(this.Fd,c.H(),"eq")(G(a,c),G(b,c))},this)};
function fj(a,b,c){var d=null===b?[]:b.entries,e=tb(d,c.entries,a.S.bind(a),function(a){return d[a]});b=[];for(var f=0,h=0;h<d.length;h++){var k=d[h];e[f]==k?f++:(k=a.hd.splice(f,1),k=gj(h,k,0,a.hd),b.push(k))}e=tb(d,c.entries,a.S.bind(a),function(a,b){return c.entries[b]});for(h=f=0;h<c.entries.length;h++)k=c.entries[h],e[f]==k?f++:(a.hd.splice(h,0,k.sa.o),k=gj(h,[],1,a.hd),b.push(k));return b}function gj(a,b,c,d){return{tg:c,index:a,object:d,wg:b,type:"splice"}};function hj(){this.bc=A()}hj.prototype.vd=function(a,b){var c=ka(a.a).toString(),d=this.bc.get(c)||null;null===d&&(d=new ij(a),this.bc.set(c,d));d.vd(b)};hj.prototype.be=function(a,b){var c=ka(a.a).toString(),d=this.bc.get(c)||null;d.be(b);0<d.Fc.size||this.bc.delete(c)};function Rd(a,b){var c=C();b.forEach(function(a){c.add(a.getName())});var d=[];a.bc.forEach(function(a){a=a.xc();a.context.b.some(function(a){return c.has(a.getName())})&&d.push(a)});return d}
function Pd(a,b,c){b=ka(null!=b.Wc?b.Wc:b).toString();a=a.bc.get(b)||null;null!==a&&jj(a,c)}function ij(a){this.sf=a;this.Fc=C();this.ag=[];this.Le=null;this.Af=new dj(a.a,this.ag)}ij.prototype.vd=function(a){this.Fc.has(a)||this.Fc.add(a)};ij.prototype.be=function(a){return this.Fc.delete(a)};ij.prototype.xc=function(){var a=this.sf;return{context:a.a,Zd:kh(a)}};function jj(a,b){var c=fj(a.Af,a.Le,b);a.Le=b;0<c.length&&a.Fc.forEach(function(a){a(c)})};function kj(a,b){var c=a.i(Wb),d=b||{},e=new He(c);a.ib(Qb,e);var e=null,f=!1;switch(d.storeType||0){case 1:e=new te(c);break;case 5:e=new ve(c);break;case 4:e=new De(a,c,d.webSqlDbSize);break;case 3:e=new de(c,d.firebase);f=!0;break;default:e=new oe(a,c)}a.ib(Pb,e);var h=new Ef;a.ib(Sb,h);return e.Da(d.onUpgrade).then(function(){var b=new Ri(a);a.ib(Tb,b);b=new $i;a.ib(Ub,b);b=new hj;a.ib(Vb,b);return h.Da(c)}).then(function(){if(f){var b=new Td(a);b.Ia.subscribe(b.Ud.bind(b))}return(new xf(a)).Da(c)})}
;function lj(a){this.h=a;this.m=a.i(Wb);this.$=C(this.m.ra());this.Za=x()}m=lj.prototype;m.exec=function(){var a=this.h.i(Sb),b=this.h.i(Qb),c={};this.m.ra().forEach(function(d){var f=a.get(re(d)).Wa(),f=Ie(b,f).map(function(a){return a.o});c[d.getName()]=f});var d={name:this.m.name(),version:this.m.version(),tables:c},d=new gd(new y(-1,d),!0);return w([new E([d],[])])};m.H=l(0);m.Z=g("$");m.Kb=g("Za");m.U=function(){return ka(this)};m.getPriority=l(0);function mj(a,b){this.h=a;this.m=a.i(Wb);this.$=C(this.m.ra());this.Za=x();this.ta=b;this.Ia=a.i(Pb);this.ba=a.i(Qb);this.C=a.i(Sb)}m=mj.prototype;
m.exec=function(){if(!(this.Ia instanceof oe||this.Ia instanceof te||this.Ia instanceof De))throw new D(300);var a;a:{a=this.m.ra();for(var b=0;b<a.length;++b)if(0<this.C.get(re(a[b])).La().na){a=!1;break a}a=!0}if(!a)throw new D(110);if(this.m.name()!=this.ta.name||this.m.version()!=this.ta.version)throw new D(111);if(null==this.ta.tables)throw new D(112);return nj(this)};m.H=l(1);m.Z=g("$");m.Kb=g("Za");m.U=function(){return ka(this)};m.getPriority=l(0);
function nj(a){var b=new Nc(a.h,a.$),b=a.Ia.zb(a.H(),b),c;for(c in a.ta.tables){var d=a.m.table(c),e=a.ta.tables[c].map(function(a){return d.qb(a)}),f=b.G(c,d.Jb);a.ba.rd(c,e);var h=a.C.gc.get(c)||[];e.forEach(function(a){h.forEach(function(b){var c=a.Cb(b.getName());b.add(c,a.id())})});f.put(e)}return b.ia()};function oj(a,b){this.h=a;this.Ia=a.i(Pb);this.Aa=a.i(Ub);this.Db=a.i(Vb);this.$=C(b);this.Oa=new Nc(this.h,this.$);this.Za=x();this.sc=x();this.me=x()}m=oj.prototype;m.exec=function(){this.me.resolve();return this.sc.ga};m.H=l(1);m.Z=g("$");m.Kb=g("Za");m.U=function(){return ka(this)};m.getPriority=l(2);function pj(a){Sd(a.Aa,a);return a.me.ga}
function qj(a,b){var c=b.xc();return c.Zd.eb().exec(a.Oa,c.context).then(function(a){return Zc(a[0])},function(a){this.Oa.Eb();var b=new gb(a.name);this.sc.reject(b);throw a;}.bind(a))}m.ia=function(){this.Ia.zb(this.H(),this.Oa).ia().then(function(){this.Kc();this.sc.resolve()}.bind(this),function(a){this.Oa.Eb();this.sc.reject(a)}.bind(this));return this.Za.ga};m.Eb=function(){this.Oa.Eb();this.sc.resolve();return this.Za.ga};
m.Kc=function(){var a=Rd(this.Db,this.$);0!=a.length&&(a=new Od(this.h,a),Sd(this.Aa,a))};function rj(a){this.h=a;this.Aa=a.i(Ub);this.Oc=null;this.Qa=0;0==sj.size&&(sj.set(0,C([1,4])),sj.set(1,C([2])),sj.set(2,C([3,5,6])),sj.set(3,C([2,7])),sj.set(4,C([7])),sj.set(5,C([7])),sj.set(6,C([7])))}r("lf.proc.Transaction",rj);var sj=A();function tj(a,b){var c=sj.get(a.Qa)||null;if(null===c||!c.has(b))throw new D(107,a.Qa,b);a.Qa=b}
rj.prototype.exec=function(a){tj(this,4);var b=[];try{a.forEach(function(a){a.ab();b.push(a.xc())},this)}catch(c){return tj(this,7),Za(c)}a=new Qg(this.h,b);return Sd(this.Aa,a).then(function(a){tj(this,7);return a.map(function(a){return Zc(a)})}.bind(this),function(a){tj(this,7);throw a;}.bind(this))};rj.prototype.exec=rj.prototype.exec;rj.prototype.qf=function(a){tj(this,1);this.Oc=new oj(this.h,a);return pj(this.Oc).then(function(){tj(this,2)}.bind(this))};rj.prototype.begin=rj.prototype.qf;
rj.prototype.pf=function(a){tj(this,3);return qj(this.Oc,a).then(function(a){tj(this,2);return a}.bind(this),function(a){tj(this,7);throw a;}.bind(this))};rj.prototype.attach=rj.prototype.pf;rj.prototype.ia=function(){tj(this,5);return this.Oc.ia().then(function(){tj(this,7)}.bind(this))};rj.prototype.commit=rj.prototype.ia;rj.prototype.Eb=function(){tj(this,6);return this.Oc.Eb().then(function(){tj(this,7)}.bind(this))};rj.prototype.rollback=rj.prototype.Eb;function V(a){this.h=a;this.m=a.i(Wb);this.Kd=!1}r("lf.proc.Database",V);V.prototype.Da=function(a){this.h.ib(Wb,this.m);return kj(this.h,a).then(function(){this.Kd=!0;this.Aa=this.h.i(Ub);return this}.bind(this))};V.prototype.init=V.prototype.Da;V.prototype.sb=g("m");V.prototype.getSchema=V.prototype.sb;function uj(a){if(!a.Kd)throw new D(2);}V.prototype.select=function(a){uj(this);return new U(this.h,1!=arguments.length||null!=arguments[0]?Array.prototype.slice.call(arguments):[])};
V.prototype.select=V.prototype.select;V.prototype.ub=function(){uj(this);return new mh(this.h)};V.prototype.insert=V.prototype.ub;V.prototype.Ld=function(){uj(this);return new mh(this.h,!0)};V.prototype.insertOrReplace=V.prototype.Ld;V.prototype.update=function(a){uj(this);return new wh(this.h,a)};V.prototype.update=V.prototype.update;V.prototype.delete=function(){uj(this);return new lh(this.h)};V.prototype["delete"]=V.prototype.delete;
V.prototype.observe=function(a,b){uj(this);this.h.i(Vb).vd(a,b)};V.prototype.observe=V.prototype.observe;V.prototype.unobserve=function(a,b){uj(this);this.h.i(Vb).be(a,b)};V.prototype.unobserve=V.prototype.unobserve;V.prototype.yf=function(){uj(this);return new rj(this.h)};V.prototype.createTransaction=V.prototype.yf;V.prototype.close=function(){try{this.h.i(Pb).close()}catch(a){}this.h.clear();this.Kd=!1};V.prototype.close=V.prototype.close;
V.prototype.Gf=function(){uj(this);var a=new lj(this.h);return Sd(this.Aa,a).then(function(a){return Zc(a[0])[0]})};V.prototype["export"]=V.prototype.Gf;V.prototype.import=function(a){uj(this);a=new mj(this.h,a);return Sd(this.Aa,a).then(l(null))};V.prototype["import"]=V.prototype.import;function W(a,b,c,d,e,f){this.O=a;this.w=b;this.He=c;this.Fe=d;this.jf=e;this.$a=f||null}r("lf.schema.BaseColumn",W);m=W.prototype;m.getName=g("w");m.l=function(){return H(this.O)+"."+this.w};m.toString=function(){return this.l()};m.G=g("O");m.H=g("jf");W.prototype.getType=W.prototype.H;W.prototype.Va=g("$a");W.prototype.va=function(){null==this.ka&&(this.ka=[],this.G().va().forEach(function(a){-1!=a.f.map(function(a){return a.ha.getName()}).indexOf(this.w)&&this.ka.push(a)},this));return this.ka};
W.prototype.ua=function(){if(!q(this.ea)){var a=this.va().filter(function(a){return 1!=a.f.length?!1:a.f[0].ha.getName()==this.getName()},this);this.ea=0<a.length?a[0]:null}return this.ea};W.prototype.zc=g("Fe");W.prototype.isNullable=W.prototype.zc;W.prototype.Ac=g("He");W.prototype.Na=function(a){return ag(this,a,"eq")};W.prototype.eq=W.prototype.Na;W.prototype.Oe=function(a){return ag(this,a,"neq")};W.prototype.neq=W.prototype.Oe;W.prototype.Rd=function(a){return ag(this,a,"lt")};
W.prototype.lt=W.prototype.Rd;W.prototype.Xf=function(a){return ag(this,a,"lte")};W.prototype.lte=W.prototype.Xf;W.prototype.If=function(a){return ag(this,a,"gt")};W.prototype.gt=W.prototype.If;W.prototype.Jf=function(a){return ag(this,a,"gte")};W.prototype.gte=W.prototype.Jf;W.prototype.match=function(a){return ag(this,a,"match")};W.prototype.match=W.prototype.match;W.prototype.rf=function(a,b){return ag(this,[a,b],"between")};W.prototype.between=W.prototype.rf;
W.prototype.Kf=function(a){return ag(this,a,"in")};W.prototype["in"]=W.prototype.Kf;W.prototype.Sf=function(){return this.Na(null)};W.prototype.isNull=W.prototype.Sf;W.prototype.Rf=function(){return this.Oe(null)};W.prototype.isNotNull=W.prototype.Rf;W.prototype.kc=function(a){return new W(this.O,this.w,this.He,this.Fe,this.jf,a)};W.prototype.as=W.prototype.kc;function vj(){this.pd=A()}var wj;vj.prototype.clear=function(){this.pd.clear()};vj.prototype.clear=vj.prototype.clear;vj.prototype.ib=function(a,b){this.pd.set(a.toString(),b);return b};vj.prototype.registerService=vj.prototype.ib;vj.prototype.i=function(a){var b=this.pd.get(a.toString())||null;if(null===b)throw new D(7,a.toString());return b};vj.prototype.getService=vj.prototype.i;vj.prototype.Pd=function(a){return this.pd.has(a.toString())};vj.prototype.isRegistered=vj.prototype.Pd;function xj(a){this.m=a;this.We=new Uf;this.Qe=new Uf;this.te=A();this.g=new Uf;this.se=new Uf;yj(this)}function yj(a){a.m.ra().forEach(function(a){var c=a.getName();a.Ab().Id().forEach(function(d){this.We.set(d.wb,d);this.Qe.set(c,this.m.table(d.wb));this.g.set(d.wb,a);this.te.set(a.getName()+"."+d.ob,d.wb);this.se.set(d.wb+"."+d.Hc,a.getName())},this)},a)}function Gc(a,b){return a.We.get(b)}function Tg(a,b){var c=b.get(a);return null===c?[]:c}
function Wg(a,b){var c=C();b.forEach(function(a){(a=this.te.get(a))&&c.add(a)},a);return cc(c).map(function(a){return this.m.table(a)},a)}function Xg(a,b){var c=C();b.forEach(function(a){(a=this.se.get(a))&&a.forEach(function(a){c.add(a)})},a);return cc(c).map(function(a){return this.m.table(a)},a)};function zj(a,b,c){this.gg=a;this.$f=b;this.Hf=c}r("lf.schema.Constraint",zj);zj.prototype.bd=g("gg");zj.prototype.getPrimaryKey=zj.prototype.bd;zj.prototype.Id=g("Hf");zj.prototype.getForeignKeys=zj.prototype.Id;function Aj(a,b){var c=a.ref.split(".");if(2!=c.length)throw new D(540,b);this.ob=a.local;this.wb=c[0];this.Hc=c[1];this.name=b;this.action=a.action;this.timing=a.timing};function X(a){Bj(a);this.Fd=kd.vc();this.w=a;this.J=A();this.sd=C();this.hc=C();this.Ec=C();this.xa=null;this.ka=A();this.ld=!1;this.rb=[]}r("lf.schema.TableBuilder",X);function Cj(a){this.name=a.name;this.hb=a.order;this.autoIncrement=a.autoIncrement}var Dj=C([0,6]);function Bj(a){if(!/^[A-Za-z_][A-Za-z0-9_]*$/.test(a))throw new D(502,a);}function Ej(a,b){if(b==a.w)throw new D(546,b);if(a.J.has(b)||a.ka.has(b)||a.hc.has(b))throw new D(503,a.w+"."+b);}
function Fj(a,b){var c=!1;b.forEach(function(a){var b=this.J.get(a.name);c=c||a.autoIncrement;if(a.autoIncrement&&3!=b)throw new D(504);},a);if(c&&1<b.length)throw new D(505);}function Gj(a){if(null!==a.xa){var b=a.ka.get(a.xa).map(function(a){return a.name}),c=0;if(a.rb.some(function(a,e){c=e;return-1!=b.indexOf(a.ob)},a))throw new D(543,a.rb[c].name);}}
function Hj(a){if(null!==a.xa){var b=function(a){return a.name},c=JSON.stringify(a.ka.get(a.xa).map(b));a.ka.forEach(function(a,e){if(e!=this.xa){var f=a.map(b);if(JSON.stringify(f)==c)throw new D(544,this.w+"."+e);}},a)}}function Ij(a){null===a.xa||a.ka.get(a.xa).forEach(function(a){if(this.Ec.has(a.name))throw new D(545,this.w+"."+a.name);},a)}X.prototype.kf=function(a,b){Bj(a);Ej(this,a);this.J.set(a,b);Dj.has(b)&&this.oe([a]);return this};X.prototype.addColumn=X.prototype.kf;
X.prototype.mf=function(a,b){var c=this.w;this.xa="pk"+(c[0].toUpperCase()+c.substring(1));Bj(this.xa);Ej(this,this.xa);c=Jj(this,a,!0,void 0,b);Fj(this,c);1==c.length&&this.sd.add(c[0].name);this.hc.add(this.xa);this.ka.set(this.xa,c);return this};X.prototype.addPrimaryKey=X.prototype.mf;
X.prototype.lf=function(a,b){Bj(a);Ej(this,a);var c=new Aj(b,this.w+"."+a);q(c.action)||(c.action=0);q(c.timing)||(c.timing=0);if(1==c.action&&1==c.timing)throw new D(506);if(!this.J.has(c.ob))throw new D(540,a);this.rb.push(c);this.ne(a,[c.ob],this.sd.has(c.ob));return this};X.prototype.addForeignKey=X.prototype.lf;X.prototype.nf=function(a,b){Bj(a);Ej(this,a);var c=Jj(this,b,!0);Kj(this,a,c);1==c.length&&(this.sd.add(c[0].name),Lj(this,c[0].name));this.ka.set(a,c);this.hc.add(a);return this};
X.prototype.addUnique=X.prototype.nf;function Lj(a,b){a.rb.forEach(function(a){a.ob==b&&this.hc.add(a.name.split(".")[1])},a)}X.prototype.oe=function(a){a=Jj(this,a,!1);Mj(this,a);a.forEach(function(a){this.Ec.add(a.name)},this);return this};X.prototype.addNullable=X.prototype.oe;function Mj(a,b){Gb(a.ka).forEach(function(a){var d=C();this.ka.get(a).forEach(function(a){d.add(a.name)});var e=b.filter(function(a){return d.has(a.name)});if(1<d.size&&0<e.length)throw new D(507,a,e.join(","));},a)}
X.prototype.ne=function(a,b,c,d){Bj(a);Ej(this,a);b=Jj(this,b,!0,d);Kj(this,a,b);c&&this.hc.add(a);this.ka.set(a,b);return this};X.prototype.addIndex=X.prototype.ne;function Kj(a,b,c){if(1<c.length&&(a=c.filter(function(a){return this.Ec.has(a.name)},a),0<a.length))throw new D(507,b,a.join(","));}X.prototype.xb=ba("ld");X.prototype.persistentIndex=X.prototype.xb;X.prototype.sb=function(){Gj(this);Hj(this);Ij(this);return new (Nj(this))};X.prototype.getSchema=X.prototype.sb;
function Oj(a){return a.rb}function Jj(a,b,c,d,e){var f=b,f="string"==typeof b[0]?b.map(function(a){return new Cj({name:a,order:null!=d?d:1,autoIncrement:e||!1})}):b.map(function(a){return new Cj(a)});f.forEach(function(a){if(!this.J.has(a.name))throw new D(508,this.w,a.name);if(c){var b=this.J.get(a.name);if(0==b||6==b)throw new D(509,this.w,a.name);}},a);return f}
function Nj(a){function b(){function b(c){return a.ka.get(c).map(function(a){return{ha:this[a.name],hb:a.hb,autoIncrement:a.autoIncrement}},this)}var d=Gb(a.J).map(function(b){this[b]=new W(this,b,a.sd.has(b),a.Ec.has(b),a.J.get(b));return this[b]},this),e=Gb(a.ka).map(function(d){return new cg(a.w,d,a.hc.has(d),b.call(this,d))},this);Q.call(this,a.w,d,e,a.ld);var f=null===a.xa?null:new cg(a.w,a.xa,!0,b.call(this,a.xa)),h=d.filter(function(b){return!a.Ec.has(b.getName())});this.uf=new zj(f,h,a.rb);
this.$e=Pj(a,d,e)}t(b,Q);b.prototype.qb=function(a){return new this.$e(mb++,a)};b.prototype.createRow=b.prototype.qb;b.prototype.Jb=function(a){var b={};this.cb().forEach(function(e){var f=e.getName();e=e.H();var h=a.value[f];if(0==e)if(e=h,null!=e&&""!=e){0!=e.length%2&&(e="0"+e);for(var h=new ArrayBuffer(e.length/2),k=new Uint8Array(h),n=0,z=0;n<e.length;n+=2)k[z++]=parseInt(e.substr(n,2),16);e=h}else e=null;else e=2==e?null!=h?new Date(h):null:h;b[f]=e},this);return new this.$e(a.id,b)};b.prototype.deserializeRow=
b.prototype.Jb;b.prototype.Ab=g("uf");b.prototype.getConstraint=b.prototype.Ab;return b}
function Pj(a,b,c){function d(a,d){this.J=b;this.ka=c;y.call(this,a,d)}t(d,y);d.prototype.we=function(){var a={};this.J.forEach(function(b){a[b.getName()]=b.zc()?null:yc[b.H()]});return a};d.prototype.ff=function(){var a={};this.J.forEach(function(b){var c=b.getName();b=b.H();var d=this.o[c];a[c]=0==b?null!=d?qb(d):null:2==b?null!=d?d.getTime():null:6==b?null!=d?d:null:d},this);return a};var e=function(a){var b=this.J.get(a.getName()),c=this.Fd.Ie.get(b)||null;return function(b){return c(b[a.getName()])}}.bind(a),
f=function(a){var b=a.map(function(a){return e(a.ha)});return function(a){return b.map(function(b){return b(a)})}}.bind(a),h={};c.forEach(function(a){var b=a.l();a=1==a.f.length?e(a.f[0].ha):f(a.f);h[b]=a});d.prototype.Cb=function(a){return-1!=a.indexOf("#")?this.id():h.hasOwnProperty(a)?h[a](this.o):null};return d};function Y(a,b){this.m=new Z(a,b);this.mb=A();this.tc=!1}r("lf.schema.Builder",Y);function Qj(a,b){b.rb.forEach(function(a){var d=a.wb;if(!this.mb.has(d))throw new D(536,a.name);var d=this.mb.get(d).sb(),e=a.Hc;if(!d.hasOwnProperty(e))throw new D(537,a.name);if(b.sb()[a.ob].H()!=d[e].H())throw new D(538,a.name);if(!d[e].Ac())throw new D(539,a.name);},a)}Y.prototype.tf=function(a){a.rb.forEach(function(a){Oj(this.mb.get(a.wb)).forEach(function(c){if(c.ob==a.Hc)throw new D(534,a.name);},this)},this)};
function Rj(a){a.tc||(a.mb.forEach(function(a){Qj(this,a);a=a.sb();this.m.K.set(a.getName(),a)},a),B(a.mb).forEach(a.tf,a),Sj(a),a.mb.clear(),a.tc=!0)}function Tj(a,b,c){b.ke||(b.ke=!0,b.Vd=!0,b.xe.forEach(function(a){a=c.get(a);if(!a.ke)Tj(this,a,c);else if(a.Vd&&b!=a)throw new D(533);},a));b.Vd=!1}function Sj(a){var b=A();a.m.K.forEach(function(a,d){b.set(d,new Uj(d))},a);a.mb.forEach(function(a,d){a.rb.forEach(function(a){b.get(a.wb).xe.add(d)})});B(b).forEach(function(a){Tj(this,a,b)},a)}
function Uj(a){this.Vd=this.ke=!1;this.xe=C();this.Mc=a}Y.prototype.sb=function(){this.tc||Rj(this);return this.m};Y.prototype.getSchema=Y.prototype.sb;Y.prototype.ze=function(){var a=new Ob("ns_"+this.m.name()),b;wj||(wj=new vj);b=wj;var c=null;b.Pd(a)?c=b.i(a):(c=new vj,b.ib(a,c));return c};Y.prototype.getGlobal=Y.prototype.ze;Y.prototype.connect=function(a){var b=this.ze();b.Pd(Wb)||b.ib(Wb,this.sb());return(new V(b)).Da(a)};Y.prototype.connect=Y.prototype.connect;
Y.prototype.xf=function(a){if(this.mb.has(a))throw new D(503,a);if(this.tc)throw new D(535);this.mb.set(a,new X(a));return this.mb.get(a)};Y.prototype.createTable=Y.prototype.xf;Y.prototype.fe=function(a){if(this.tc)throw new D(535);this.m.fe(a);return this};Y.prototype.setPragma=Y.prototype.fe;function Z(a,b){this.w=a;this.Wb=b;this.K=A();this.Ue={Bf:!1}}r("lf.schema.DatabaseSchema",Z);Z.prototype.name=g("w");Z.prototype.name=Z.prototype.name;Z.prototype.version=g("Wb");Z.prototype.version=Z.prototype.version;
Z.prototype.ra=function(){return B(this.K)};Z.prototype.tables=Z.prototype.ra;Z.prototype.table=function(a){if(!this.K.has(a))throw new D(101,a);return this.K.get(a)};Z.prototype.table=Z.prototype.table;Z.prototype.info=function(){this.De||(this.De=new xj(this));return this.De};Z.prototype.Te=g("Ue");Z.prototype.pragma=Z.prototype.Te;Z.prototype.fe=ba("Ue");r("lf.schema.create",function(a,b){return new Y(a,b)});v.prototype.catch=v.prototype.he;v.prototype["catch"]=v.prototype.catch;}.bind(window))()
//# sourceMappingURL=lovefield.es6.js.map
