if(!self.window){window=this;}
(function(){'use strict';function aa(){return function(){}}function ca(a){return function(b){this[a]=b}}function g(a){return function(){return this[a]}}function l(a){return function(){return a}}var m,p=this;function q(a){return void 0!==a}function da(){}
function ea(a){var b=typeof a;if("object"==b)if(a){if(a instanceof Array)return"array";if(a instanceof Object)return b;var c=Object.prototype.toString.call(a);if("[object Window]"==c)return"object";if("[object Array]"==c||"number"==typeof a.length&&"undefined"!=typeof a.splice&&"undefined"!=typeof a.propertyIsEnumerable&&!a.propertyIsEnumerable("splice"))return"array";if("[object Function]"==c||"undefined"!=typeof a.call&&"undefined"!=typeof a.propertyIsEnumerable&&!a.propertyIsEnumerable("call"))return"function"}else return"null";
else if("function"==b&&"undefined"==typeof a.call)return"object";return b}function fa(a){return null===a}function ga(a){return null!=a}function ha(a){var b=ea(a);return"array"==b||"object"==b&&"number"==typeof a.length}function ia(a){return"string"==typeof a}function ja(a){return"function"==ea(a)}function ka(a){return a[la]||(a[la]=++ma)}var la="closure_uid_"+(1E9*Math.random()>>>0),ma=0;function na(a,b,c){return a.call.apply(a.bind,arguments)}
function oa(a,b,c){if(!a)throw Error();if(2<arguments.length){var d=Array.prototype.slice.call(arguments,2);return function(){var c=Array.prototype.slice.call(arguments);Array.prototype.unshift.apply(c,d);return a.apply(b,c)}}return function(){return a.apply(b,arguments)}}function pa(a,b,c){pa=Function.prototype.bind&&-1!=Function.prototype.bind.toString().indexOf("native code")?na:oa;return pa.apply(null,arguments)}
function qa(a,b){var c=Array.prototype.slice.call(arguments,1);return function(){var b=c.slice();b.push.apply(b,arguments);return a.apply(this,b)}}function r(a,b){var c=a.split("."),d=p;c[0]in d||!d.execScript||d.execScript("var "+c[0]);for(var e;c.length&&(e=c.shift());)!c.length&&q(b)?d[e]=b:d=d[e]?d[e]:d[e]={}}
function t(a,b){function c(){}c.prototype=b.prototype;a.ab=b.prototype;a.prototype=new c;a.prototype.constructor=a;a.Fg=function(a,c,f){for(var h=Array(arguments.length-2),k=2;k<arguments.length;k++)h[k-2]=arguments[k];return b.prototype[c].apply(a,h)}};function ra(a){if(Error.captureStackTrace)Error.captureStackTrace(this,ra);else{var b=Error().stack;b&&(this.stack=b)}a&&(this.message=String(a))}t(ra,Error);ra.prototype.name="CustomError";var sa=String.prototype.trim?function(a){return a.trim()}:function(a){return a.replace(/^[\s\xa0]+|[\s\xa0]+$/g,"")};
function ta(a){var b=0,c=sa(String(ua)).split(".");a=sa(String(a)).split(".");for(var d=Math.max(c.length,a.length),e=0;0==b&&e<d;e++){var f=c[e]||"",h=a[e]||"",k=/(\d*)(\D*)/g,n=/(\d*)(\D*)/g;do{var A=k.exec(f)||["","",""],O=n.exec(h)||["","",""];if(0==A[0].length&&0==O[0].length)break;b=va(0==A[1].length?0:parseInt(A[1],10),0==O[1].length?0:parseInt(O[1],10))||va(0==A[2].length,0==O[2].length)||va(A[2],O[2])}while(0==b)}return b}function va(a,b){return a<b?-1:a>b?1:0};function wa(a,b,c){this.cg=c;this.Gf=a;this.ug=b;this.kd=0;this.cd=null}wa.prototype.get=function(){var a;0<this.kd?(this.kd--,a=this.cd,this.cd=a.next,a.next=null):a=this.Gf();return a};wa.prototype.put=function(a){this.ug(a);this.kd<this.cg&&(this.kd++,a.next=this.cd,this.cd=a)};var xa=Array.prototype.indexOf?function(a,b,c){return Array.prototype.indexOf.call(a,b,c)}:function(a,b,c){c=null==c?0:0>c?Math.max(0,a.length+c):c;if(ia(a))return ia(b)&&1==b.length?a.indexOf(b,c):-1;for(;c<a.length;c++)if(c in a&&a[c]===b)return c;return-1},ya=Array.prototype.forEach?function(a,b,c){Array.prototype.forEach.call(a,b,c)}:function(a,b,c){for(var d=a.length,e=ia(a)?a.split(""):a,f=0;f<d;f++)f in e&&b.call(c,e[f],f,a)},za=Array.prototype.map?function(a,b,c){return Array.prototype.map.call(a,
b,c)}:function(a,b,c){for(var d=a.length,e=Array(d),f=ia(a)?a.split(""):a,h=0;h<d;h++)h in f&&(e[h]=b.call(c,f[h],h,a));return e},Aa=Array.prototype.reduce?function(a,b,c,d){d&&(b=pa(b,d));return Array.prototype.reduce.call(a,b,c)}:function(a,b,c,d){var e=c;ya(a,function(c,h){e=b.call(d,e,c,h,a)});return e},Ba=Array.prototype.some?function(a,b,c){return Array.prototype.some.call(a,b,c)}:function(a,b,c){for(var d=a.length,e=ia(a)?a.split(""):a,f=0;f<d;f++)if(f in e&&b.call(c,e[f],f,a))return!0;return!1};
function Ca(a,b,c){return 2>=arguments.length?Array.prototype.slice.call(a,b):Array.prototype.slice.call(a,b,c)}function Da(a){for(var b=[],c=0;c<a;c++)b[c]=0;return b}function Ea(a){for(var b=[],c=0;c<arguments.length;c++){var d=arguments[c];if("array"==ea(d))for(var e=0;e<d.length;e+=8192)for(var f=Ea.apply(null,Ca(d,e,e+8192)),h=0;h<f.length;h++)b.push(f[h]);else b.push(d)}return b};var Fa;a:{var Ga=p.navigator;if(Ga){var Ia=Ga.userAgent;if(Ia){Fa=Ia;break a}}Fa=""}function u(a){return-1!=Fa.indexOf(a)};function Ja(){return u("Opera")||u("OPR")}function Ka(){return(u("Chrome")||u("CriOS"))&&!Ja()&&!u("Edge")};function La(a){p.setTimeout(function(){throw a;},0)}var Ma;
function Na(){var a=p.MessageChannel;"undefined"===typeof a&&"undefined"!==typeof window&&window.postMessage&&window.addEventListener&&!u("Presto")&&(a=function(){var a=document.createElement("IFRAME");a.style.display="none";a.src="";document.documentElement.appendChild(a);var b=a.contentWindow,a=b.document;a.open();a.write("");a.close();var c="callImmediate"+Math.random(),d="file:"==b.location.protocol?"*":b.location.protocol+"//"+b.location.host,a=pa(function(a){if(("*"==d||a.origin==d)&&a.data==
c)this.port1.onmessage()},this);b.addEventListener("message",a,!1);this.port1={};this.port2={postMessage:function(){b.postMessage(c,d)}}});if("undefined"!==typeof a&&!u("Trident")&&!u("MSIE")){var b=new a,c={},d=c;b.port1.onmessage=function(){if(q(c.next)){c=c.next;var a=c.ye;c.ye=null;a()}};return function(a){d.next={ye:a};d=d.next;b.port2.postMessage(0)}}return"undefined"!==typeof document&&"onreadystatechange"in document.createElement("SCRIPT")?function(a){var b=document.createElement("SCRIPT");
b.onreadystatechange=function(){b.onreadystatechange=null;b.parentNode.removeChild(b);b=null;a();a=null};document.documentElement.appendChild(b)}:function(a){p.setTimeout(a,0)}};function Oa(){this.td=this.nc=null}var Qa=new wa(function(){return new Pa},function(a){a.reset()},100);Oa.prototype.add=function(a,b){var c=Qa.get();c.set(a,b);this.td?this.td.next=c:this.nc=c;this.td=c};Oa.prototype.remove=function(){var a=null;this.nc&&(a=this.nc,this.nc=this.nc.next,this.nc||(this.td=null),a.next=null);return a};function Pa(){this.next=this.scope=this.Ld=null}Pa.prototype.set=function(a,b){this.Ld=a;this.scope=b;this.next=null};
Pa.prototype.reset=function(){this.next=this.scope=this.Ld=null};function Ra(a,b){Sa||Ta();Ua||(Sa(),Ua=!0);Va.add(a,b)}var Sa;function Ta(){if(p.Promise&&p.Promise.resolve){var a=p.Promise.resolve(void 0);Sa=function(){a.then(Wa)}}else Sa=function(){var a=Wa;!ja(p.setImmediate)||p.Window&&p.Window.prototype&&p.Window.prototype.setImmediate==p.setImmediate?(Ma||(Ma=Na()),Ma(a)):p.setImmediate(a)}}var Ua=!1,Va=new Oa;function Wa(){for(var a=null;a=Va.remove();){try{a.Ld.call(a.scope)}catch(b){La(b)}Qa.put(a)}Ua=!1};function v(a,b){this.Ra=0;this.ef=void 0;this.Sc=this.dc=this.C=null;this.bd=this.Jd=!1;if(a!=da)try{var c=this;a.call(b,function(a){Xa(c,2,a)},function(a){Xa(c,3,a)})}catch(d){Xa(this,3,d)}}function Ya(){this.next=this.context=this.jc=this.Ec=this.child=null;this.wd=!1}Ya.prototype.reset=function(){this.context=this.jc=this.Ec=this.child=null;this.wd=!1};var Za=new wa(function(){return new Ya},function(a){a.reset()},100);function $a(a,b,c){var d=Za.get();d.Ec=a;d.jc=b;d.context=c;return d}
function w(a){if(a instanceof v)return a;var b=new v(da);Xa(b,2,a);return b}function ab(a){return new v(function(b,c){c(a)})}function bb(a,b,c){cb(a,b,c,null)||Ra(qa(b,a))}function db(a){return new v(function(b,c){var d=a.length,e=[];if(d)for(var f=function(a,c){d--;e[a]=c;0==d&&b(e)},h=function(a){c(a)},k=0,n;k<a.length;k++)n=a[k],bb(n,qa(f,k),h);else b(e)})}function x(){var a,b,c=new v(function(c,e){a=c;b=e});return new eb(c,a,b)}
v.prototype.then=function(a,b,c){return fb(this,ja(a)?a:null,ja(b)?b:null,c)};v.prototype.then=v.prototype.then;v.prototype.$goog_Thenable=!0;v.prototype.me=function(a,b){return fb(this,null,a,b)};function gb(a,b){a.dc||2!=a.Ra&&3!=a.Ra||hb(a);a.Sc?a.Sc.next=b:a.dc=b;a.Sc=b}
function fb(a,b,c,d){var e=$a(null,null,null);e.child=new v(function(a,h){e.Ec=b?function(c){try{var e=b.call(d,c);a(e)}catch(A){h(A)}}:a;e.jc=c?function(b){try{var e=c.call(d,b);!q(e)&&b instanceof ib?h(b):a(e)}catch(A){h(A)}}:h});e.child.C=a;gb(a,e);return e.child}v.prototype.Ag=function(a){this.Ra=0;Xa(this,2,a)};v.prototype.Bg=function(a){this.Ra=0;Xa(this,3,a)};
function Xa(a,b,c){0==a.Ra&&(a==c&&(b=3,c=new TypeError("Promise cannot resolve to itself")),a.Ra=1,cb(c,a.Ag,a.Bg,a)||(a.ef=c,a.Ra=b,a.C=null,hb(a),3!=b||c instanceof ib||jb(a,c)))}function cb(a,b,c,d){if(a instanceof v)return gb(a,$a(b||da,c||null,d)),!0;var e;if(a)try{e=!!a.$goog_Thenable}catch(h){e=!1}else e=!1;if(e)return a.then(b,c,d),!0;e=typeof a;if("object"==e&&null!=a||"function"==e)try{var f=a.then;if(ja(f))return kb(a,f,b,c,d),!0}catch(h){return c.call(d,h),!0}return!1}
function kb(a,b,c,d,e){function f(a){k||(k=!0,d.call(e,a))}function h(a){k||(k=!0,c.call(e,a))}var k=!1;try{b.call(a,h,f)}catch(n){f(n)}}function hb(a){a.Jd||(a.Jd=!0,Ra(a.Lf,a))}function lb(a){var b=null;a.dc&&(b=a.dc,a.dc=b.next,b.next=null);a.dc||(a.Sc=null);return b}
v.prototype.Lf=function(){for(var a=null;a=lb(this);){var b=this.Ra,c=this.ef;if(3==b&&a.jc&&!a.wd)for(var d=void 0,d=this;d&&d.bd;d=d.C)d.bd=!1;if(a.child)a.child.C=null,mb(a,b,c);else try{a.wd?a.Ec.call(a.context):mb(a,b,c)}catch(e){nb.call(null,e)}Za.put(a)}this.Jd=!1};function mb(a,b,c){2==b?a.Ec.call(a.context,c):a.jc&&a.jc.call(a.context,c)}function jb(a,b){a.bd=!0;Ra(function(){a.bd&&nb.call(null,b)})}var nb=La;function ib(a){ra.call(this,a)}t(ib,ra);ib.prototype.name="cancel";
function eb(a,b,c){this.da=a;this.resolve=b;this.reject=c};function ob(a,b,c,d){c=c||function(a,b){return a==b};d=d||function(b){return a[b]};for(var e=a.length,f=b.length,h=[],k=0;k<e+1;k++)h[k]=[],h[k][0]=0;for(var n=0;n<f+1;n++)h[0][n]=0;for(k=1;k<=e;k++)for(n=1;n<=f;n++)c(a[k-1],b[n-1])?h[k][n]=h[k-1][n-1]+1:h[k][n]=Math.max(h[k-1][n],h[k][n-1]);for(var A=[],k=e,n=f;0<k&&0<n;)c(a[k-1],b[n-1])?(A.unshift(d(k-1,n-1)),k--,n--):h[k-1][n]>h[k][n-1]?k--:n--;return A}function pb(a){return Aa(arguments,function(a,c){return a+c},0)}
function qb(a){return pb.apply(null,arguments)/arguments.length}function rb(a){var b=arguments.length;if(2>b)return 0;var c=qb.apply(null,arguments);return pb.apply(null,za(arguments,function(a){return Math.pow(a-c,2)}))/(b-1)}function sb(a){return Math.sqrt(rb.apply(null,arguments))};var tb="StopIteration"in p?p.StopIteration:{message:"StopIteration",stack:""};function wb(){}wb.prototype.next=function(){throw tb;};wb.prototype.re=function(){return this};function xb(a){if(a instanceof wb)return a;if("function"==typeof a.re)return a.re(!1);if(ha(a)){var b=0,c=new wb;c.next=function(){for(;;){if(b>=a.length)throw tb;if(b in a)return a[b++];b++}};return c}throw Error("Not implemented");}
function yb(a,b){if(ha(a))try{ya(a,b,void 0)}catch(c){if(c!==tb)throw c;}else{a=xb(a);try{for(;;)b.call(void 0,a.next(),void 0,a)}catch(c){if(c!==tb)throw c;}}}function zb(a){if(Ba(arguments,function(a){return!a.length})||!arguments.length)return new wb;var b=new wb,c=arguments,d=Da(c.length);b.next=function(){if(d){for(var a=za(d,function(a,b){return c[b][a]}),b=d.length-1;0<=b;b--){if(d[b]<c[b].length-1){d[b]++;break}if(0==b){d=null;break}d[b]=0}return a}throw tb;};return b};function Ab(a){Bb(a);return a.b.concat()}function Bb(a){if(a.Cf!=a.b.length){for(var b=0,c=0;b<a.b.length;){var d=a.b[b];Cb(a.Z,d)&&(a.b[c++]=d);b++}a.b.length=c}if(a.Cf!=a.b.length){for(var e={},c=b=0;b<a.b.length;)d=a.b[b],Cb(e,d)||(a.b[c++]=d,e[d]=1),b++;a.b.length=c}}function Cb(a,b){return Object.prototype.hasOwnProperty.call(a,b)};function Db(){return u("iPhone")&&!u("iPod")&&!u("iPad")};var Eb=Ja(),Fb=u("Trident")||u("MSIE"),Gb=u("Edge"),Hb=u("Gecko")&&!(-1!=Fa.toLowerCase().indexOf("webkit")&&!u("Edge"))&&!(u("Trident")||u("MSIE"))&&!u("Edge"),Ib=-1!=Fa.toLowerCase().indexOf("webkit")&&!u("Edge");function Jb(){var a=Fa;if(Hb)return/rv\:([^\);]+)(\)|;)/.exec(a);if(Gb)return/Edge\/([\d\.]+)/.exec(a);if(Fb)return/\b(?:MSIE|rv)[: ]([^\);]+)(\)|;)/.exec(a);if(Ib)return/WebKit\/(\S+)/.exec(a)}
var ua=function(){if(Eb&&p.opera){var a;var b=p.opera.version;try{a=b()}catch(c){a=b}return a}a="";(b=Jb())&&(a=b?b[1]:"");return Fb&&(b=(b=p.document)?b.documentMode:void 0,b>parseFloat(a))?String(b):a}(),Kb={};var Lb=Db()||u("iPod"),Mb=u("iPad");!u("Android")||Ka()||u("Firefox")||Ja();var Nb=Ka(),Ob=u("Safari")&&!(Ka()||u("Coast")||Ja()||u("Edge")||u("Silk")||u("Android"))&&!(Db()||u("iPad")||u("iPod"));/*

 Copyright 2015 The Lovefield Project Authors. All Rights Reserved.

 Licensed under the Apache License, Version 2.0 (the "License");
 you may not use this file except in compliance with the License.
 You may obtain a copy of the License at

     http://www.apache.org/licenses/LICENSE-2.0

 Unless required by applicable law or agreed to in writing, software
 distributed under the License is distributed on an "AS IS" BASIS,
 WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 See the License for the specific language governing permissions and
 limitations under the License.
*/
function Pb(){this.vg=Ob||Mb||Lb;this.Uf=!(this.vg||Fb&&!Kb[10]&&!(Kb[10]=0<=ta(10)));!Fb||Kb[11]||(Kb[11]=0<=ta(11));this.Dg=Nb||Ob}var Qb;function y(){return new window.Map}function Rb(a){var b=0,c=Array(a.size);a.forEach(function(a,e){c[b++]=e});return c}function z(a){var b=0,c=Array(a.size);a.forEach(function(a){c[b++]=a});return c};/*

 Copyright 2014 The Lovefield Project Authors. All Rights Reserved.

 Licensed under the Apache License, Version 2.0 (the "License");
 you may not use this file except in compliance with the License.
 You may obtain a copy of the License at

     http://www.apache.org/licenses/LICENSE-2.0

 Unless required by applicable law or agreed to in writing, software
 distributed under the License is distributed on an "AS IS" BASIS,
 WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 See the License for the specific language governing permissions and
 limitations under the License.
*/
function Sb(a,b){this.oa=a;this.o=b||this.De()}var Tb=0;m=Sb.prototype;m.id=g("oa");m.De=function(){return{}};m.of=g("o");m.Fa=function(){return{id:this.oa,value:this.of()}};m.jb=function(a){return"#"==a.substr(-1)?this.oa:null};function Ub(a){return new Sb(a.id,a.value)}function Vb(a){return new Sb(Tb++,a||{})}function Xb(a){if(null==a)return null;a=new Uint8Array(a);for(var b="",c=0;c<a.length;++c)var d=a[c].toString(16),b=b+(2>d.length?"0"+d:d);return b};var Yb={};r("lf.TransactionType",Yb);Yb.READ_ONLY=0;Yb.READ_WRITE=1;function Zb(a,b){this.ne=a;this.Oa=b||null;this.O=x()}Zb.prototype.ia=function(){return 0==this.ne?this.qc():$b(this)};function $b(a){try{ac(a.Oa)}catch(b){return ab(b)}return bc(a).then(function(a){this.Oa.ia();return a}.bind(a))}function bc(a){cc(a);dc(a);return a.qc()}
function cc(a){a.Oa.sb.forEach(function(a,c){var d=this.Oa.ca().get(c),d=this.H(d.getName(),d.fb.bind(d),0),e=z(a.ya).map(function(a){return a.id()});0<e.length&&d.remove(e).me(this.Je,this);e=z(a.ma).map(function(a){return a[1]}).concat(z(a.va));d.put(e).me(this.Je,this)},a)}function dc(a){ec(a.Oa).forEach(function(a){var c=this.H(a.getName(),Ub,1);c.remove([]);c.put(a.Fa())},a)}Zb.prototype.Je=function(a){this.O.reject(a)};function fc(a){this.wg=a}fc.prototype.toString=g("wg");var gc=new fc("backstore"),hc=new fc("cache"),ic=new fc("indexstore"),jc=new fc("engine"),kc=new fc("runner"),lc=new fc("observerregistry"),mc=new fc("schema");function B(a){return q(a)?new window.Set(a):new window.Set}function C(a){var b=0,c=Array(a.size);a.forEach(function(a){c[b++]=a});return c}function nc(a,b){if(b.size>a.size)return!1;var c=!0;b.forEach(function(b){c=c&&a.has(b)});return c};function oc(a,b){this.oa=a;this.o=b||{}}function pc(a){var b=B();a.forEach(function(a){b.add(a>>9)});return C(b)}oc.prototype.Y=g("oa");function qc(a,b){b.forEach(function(a){this.o[a.id()]=a.Fa()},a)}function rc(a,b){b.forEach(function(a){delete this.o[a]},a)}oc.prototype.Fa=function(){return{id:this.oa,value:JSON.stringify(this.o)}};function sc(a){return new oc(a.id,JSON.parse(a.value))};function tc(a,b,c){this.X=a;this.Eb=b;this.ff=c}m=tc.prototype;m.get=function(a){if(0==a.length)return this.Md();var b=this.Eb;return uc(this,a).then(function(c){return a.map(function(a){var e=c.get(a>>9);return b(e.o[a])})})};function uc(a,b){var c=y(),d=x(),e=pc(b).map(function(a){return new v(function(b,d){var e;try{e=this.X.get(a)}catch(A){d(A);return}e.onerror=d;e.onsuccess=function(a){a=sc(a.target.result);c.set(a.Y(),a);b()}},this)},a);db(e).then(function(){d.resolve(c)});return d.da}
m.Md=function(){return new v(function(a,b){var c=[],d;try{d=this.X.openCursor()}catch(e){b(e);return}d.onerror=b;d.onsuccess=function(){var b=d.result;if(b){var f;f=sc(b.value).o;for(var h in f)c.push(this.Eb(f[h]));b.continue()}else a(c)}.bind(this)},this)};m.Tb=function(a){return new v(function(b,c){var d;try{d=a()}catch(e){c(e);return}d.onsuccess=b;d.onerror=c},this)};
m.put=function(a){if(0==a.length)return w();var b=y();a.forEach(function(a){var d;d=a.id()>>9;var e=b.get(d)||null;null===e&&(e=this.ff(this.X.name,d));qc(e,[a]);b.set(d,e)},this);a=z(b).map(function(a){return this.Tb(function(){return this.X.put(a.Fa())}.bind(this))},this);return db(a)};
m.remove=function(a){if(0==a.length)return this.Tb(function(){return this.X.clear()}.bind(this));var b=y();a.forEach(function(a){var d=a>>9,e=b.get(d)||null;null===e&&(e=this.ff(this.X.name,d));rc(e,[a]);b.set(d,e)},this);a=z(b).map(function(a){return this.Tb(function(){return 0==Object.keys(a.o).length?this.X.delete(a.Y()):this.X.put(a.Fa())}.bind(this))},this);return db(a)};function vc(a,b,c){a=a.l(hc);var d=[c<<9,(c+1<<9)-1];b=a.Xa(b,d[0],d[1]);c=new oc(c);qc(c,b);return c}
function wc(a,b){return new oc(b)};function xc(a){this.U=a.l(hc);this.D=a.l(ic);this.g=a.l(mc)}xc.prototype.update=function(a){a.forEach(function(a){yc(this,a);zc(this,a)},this)};function zc(a,b){var c=b.getName();b.ya.forEach(function(a,b){this.U.remove(c,b)},a);b.va.forEach(function(a){this.U.set(c,a)},a);b.ma.forEach(function(a){this.U.set(c,a[1])},a)}function yc(a,b){var c=a.g.table(b.getName());Ac(b).forEach(function(a){Bc(this,c,a)},a)}
function Bc(a,b,c){var d=a.D.lc.get(b.getName())||[],e=0;d.forEach(function(a){try{Cc(a,c),e++}catch(b){throw d.slice(0,e).forEach(function(a){Cc(a,[c[1],c[0]])},this),b;}},a)}function Cc(a,b){var c=null===b[1]?void 0:b[1].jb(a.getName()),d=null===b[0]?void 0:b[0].jb(a.getName());if(!q(d)&&q(c))a.add(c,b[1].id());else if(q(d)&&q(c)){if(null===c||null===d){if(c==d)return}else if(0==a.Lb().compare(d,c))return;a.add(c,b[1].id());a.remove(d,b[0].id())}else q(d)&&!q(c)&&a.remove(d,b[0].id())};var Dc={};r("lf.ConstraintAction",Dc);Dc.RESTRICT=0;Dc.CASCADE=1;var Ec={};r("lf.ConstraintTiming",Ec);Ec.IMMEDIATE=0;Ec.DEFERRABLE=1;var Fc={};r("lf.Order",Fc);Fc.DESC=0;Fc.ASC=1;var Gc={};r("lf.Type",Gc);Gc.ARRAY_BUFFER=0;Gc.BOOLEAN=1;Gc.DATE_TIME=2;Gc.INTEGER=3;Gc.NUMBER=4;Gc.STRING=5;Gc.OBJECT=6;var Hc={0:null,1:!1,2:Object.freeze(new Date(0)),3:0,4:0,5:"",6:null};r("lf.type.DEFAULT_VALUES",Hc);function D(a,b){this.code=a;this.message="http://sn.im/2a0j3wn?c="+a;if(1<arguments.length)for(var c=1;c<=Math.min(4,arguments.length-1);++c)this.message+="&p"+(c-1)+"="+encodeURIComponent(arguments[c].toString().slice(0,64))}t(D,Error);function Ic(){this.Z=y();this.size=0}m=Ic.prototype;m.has=function(a){return this.Z.has(a)};m.set=function(a,b){var c=this.Z.get(a)||null;null===c&&(c=B(),this.Z.set(a,c));c.has(b)||(c.add(b),this.size++);return this};m.Wb=function(a,b){var c=this.Z.get(a)||null;null===c&&(c=B(),this.Z.set(a,c));b.forEach(function(a){c.has(a)||(c.add(a),this.size++)},this);return this};m.Ud=function(a){a.keys().forEach(function(b){var c=a.get(b);this.Wb(b,c)},this);return this};
m.delete=function(a,b){var c=this.Z.get(a,null);if(null===c)return!1;var d=c.delete(b);d&&(--this.size,0==c.size&&this.Z.delete(a));return d};m.get=function(a){a=this.Z.get(a)||null;return null===a?null:C(a)};m.clear=function(){this.Z.clear();this.size=0};m.keys=function(){return Rb(this.Z)};m.values=function(){var a=[];this.Z.forEach(function(b){a.push.apply(a,C(b))});return a};function Jc(a){this.D=a.l(ic);this.g=a.l(mc);this.U=a.l(hc);this.Wc=null}function Kc(a,b,c){var d=b.Fb().hg;c.forEach(function(a){d.forEach(function(b){if(null==a.o[b.getName()])throw new D(202,b.m());},this)},a)}function Lc(a,b,c,d){b.Fb().Nd().forEach(function(a){a.timing==d&&Mc(this,a,c)},a)}function Mc(a,b,c){var d=Nc(a,b);c.forEach(function(a){if(Oc(a[0],a[1],b.name)&&(a=a[1].jb(b.name),null!==a&&!d.eb(a)))throw new D(203,b.name);},a)}
function Nc(a,b){null===a.Wc&&(a.Wc=y());var c=a.Wc.get(b.name)||null;null===c&&(c=a.g.table(b.Pa)[b.Fc].za(),c=a.D.get(c.m()),a.Wc.set(b.name,c));return c}function Oc(a,b,c){return(null===a?null!==b:null===b)||a.jb(c)!=b.jb(c)}function Qc(a,b,c,d){b=Rc(a.g.info(),b.getName(),0);null!==b&&(b=b.filter(function(a){return a.timing==d}),0!=b.length&&Sc(a,b,c,function(a,b,c){if(b.eb(c))throw new D(203,a.name);}))}
function Tc(a,b,c){b=Rc(a.g.info(),b.getName(),1);if(null===b)return null;var d=new Ic;Sc(a,b,c,function(a,b,c){b=b.get(c);0<b.length&&d.Wb(a.ze,b)});return d}function Uc(a,b,c){var d=new Ic;Sc(a,c,b,function(a,b,c,k){b.get(c).forEach(function(b){d.set(b,{Kd:a,mg:k[1]})})});return d}function Sc(a,b,c,d){b.forEach(function(a){var b=this.D.get(a.name),h=Nc(this,a);c.forEach(function(c){if(Oc(c[0],c[1],h.getName())){var n=c[0].jb(h.getName());d(a,b,n,c)}},this)},a)}
function Vc(a,b,c,d){0!=c.length&&(c=c.map(function(a){return[null,a]}),Lc(a,b,c,d))}function Wc(a,b,c,d){0!=c.length&&(Lc(a,b,c,d),Qc(a,b,c,d))}function Xc(a,b,c,d){0!=c.length&&(c=c.map(function(a){return[a,null]}),Qc(a,b,c,d))}
function Yc(a,b,c){var d={le:[],hf:new Ic},e=new Ic;e.Wb(b.getName(),c.map(function(a){return a.id()}));do{var f=new Ic;e.keys().forEach(function(a){var b=this.g.table(a);a=e.get(a).map(function(a){return[this.U.get(a),null]},this);b=Tc(this,b,a);null!==b&&(d.le.unshift.apply(d.le,b.keys()),f.Ud(b))},a);e=f;d.hf.Ud(e)}while(0<e.size);return d};function Zc(a){this.va=y();this.ma=y();this.ya=y();this.u=a}m=Zc.prototype;m.getName=g("u");m.add=function(a){if(this.ya.has(a.id())){var b=[this.ya.get(a.id()),a];this.ma.set(a.id(),b);this.ya.delete(a.id())}else this.va.set(a.id(),a)};m.modify=function(a){var b=a[1],c=a[0].id();this.va.has(c)?this.va.set(c,b):(this.ma.has(c)&&(a=[this.ma.get(a[0].id())[0],b]),this.ma.set(c,a))};
m.delete=function(a){if(this.va.has(a.id()))this.va.delete(a.id());else if(this.ma.has(a.id())){var b=this.ma.get(a.id())[0];this.ma.delete(a.id());this.ya.set(a.id(),b)}else this.ya.set(a.id(),a)};m.Ud=function(a){a.va.forEach(function(a){this.add(a)},this);a.ma.forEach(function(a){this.modify(a)},this);a.ya.forEach(function(a){this.delete(a)},this)};
function Ac(a){var b=[];a.va.forEach(function(a){b.push([null,a])});a.ma.forEach(function(a){b.push(a)});a.ya.forEach(function(a){b.push([a,null])});return b}m.toString=function(){return"["+Rb(this.va).toString()+"], ["+Rb(this.ma).toString()+"], ["+Rb(this.ya).toString()+"]"};function $c(a){var b=new Zc(a.u);a.va.forEach(function(a){b.delete(a)});a.ya.forEach(function(a){b.add(a)});a.ma.forEach(function(a){b.modify([a[1],a[0]])});return b}
m.Yf=function(){return 0==this.va.size&&0==this.ya.size&&0==this.ma.size};function ad(a,b){this.aa=y();b.forEach(function(a){this.aa.set(a.getName(),a)},this);this.g=a.l(mc);this.U=a.l(hc);this.D=a.l(ic);this.wa=new Jc(a);this.dd=new xc(a);this.sb=y()}function ec(a){var b=[];Rb(a.sb).map(function(a){return this.aa.get(a)},a).forEach(function(a){a.Cb()&&(a.Aa().forEach(function(a){b.push(this.D.get(a.m()))},this),b.push(this.D.get(a.getName()+".#")))},a);return b}m=ad.prototype;m.ca=g("aa");
m.zb=function(a,b){bd(this,a);Kc(this.wa,a,b);Vc(this.wa,a,b,0);for(var c=0;c<b.length;c++)cd(this,a,[null,b[c]])};function cd(a,b,c){var d=b.getName(),e=a.sb.get(d)||new Zc(d);a.sb.set(d,e);try{Bc(a.dd,b,c)}catch(h){throw h;}b=c[0];var f=c[1];null===b&&null!==f?(a.U.set(d,f),e.add(f)):null!==b&&null!==f?(a.U.set(d,f),e.modify(c)):null!==b&&null===f&&(a.U.remove(d,b.id()),e.delete(b))}
m.update=function(a,b){bd(this,a);Kc(this.wa,a,b);var c=b.map(function(a){return[this.U.get(a.id()),a]},this);dd(this,a,c);Wc(this.wa,a,c,0);c.forEach(function(b){cd(this,a,b)},this)};m.Od=function(a,b){bd(this,a);Kc(this.wa,a,b);for(var c=0;c<b.length;c++){var d=b[c],e=null,f,h=a.Fb().Zc();if(null===h)f=null;else{f=this.wa;var h=h.m(),k=d.jb(h);f=f.D.get(h).get(k);f=0==f.length?null:f[0]}null!=f?(e=this.U.get(f),d.oa=f,Wc(this.wa,a,[[e,d]],0)):Vc(this.wa,a,[d],0);cd(this,a,[e,d])}};
m.remove=function(a,b){bd(this,a);ed(this,a,b);Xc(this.wa,a,b,0);for(var c=0;c<b.length;c++)cd(this,a,[b[c],null])};function dd(a,b,c){b=Rc(a.g.info(),b.getName(),1);if(null!==b){var d=Uc(a.wa,c,b);d.keys().forEach(function(a){d.get(a).forEach(function(b){var c=this.g.table(b.Kd.ze),d=this.U.get(a),n=c.fb(d.Fa());n.o[b.Kd.tb]=b.mg.o[b.Kd.Fc];cd(this,c,[d,n])},this)},a)}}
function ed(a,b,c){if(null!==Rc(a.g.info(),b.getName(),1)){b=Yc(a.wa,b,c);var d=b.hf;b.le.forEach(function(a){var b=this.g.table(a);a=d.get(a).map(function(a){return this.U.get(a)},this);Xc(this.wa,b,a,0);a.forEach(function(a){cd(this,b,[a,null])},this)},a)}}function ac(a){a.sb.forEach(function(a){var c=this.aa.get(a.getName());Vc(this.wa,c,z(a.va),1);Xc(this.wa,c,z(a.ya),1);Wc(this.wa,c,z(a.ma),1)},a)}m.ia=aa();m.Jb=function(){var a=z(this.sb).map(function(a){return $c(a)});this.dd.update(a)};
function bd(a,b){if(!a.aa.has(b.getName()))throw new D(106,b.getName());};function fd(a,b,c,d){this.c=a;this.w=b;this.ea=this.c==E?!1:c;this.la=this.w==E?!1:d}var E=new (aa());fd.prototype.toString=function(){return(this.ea?"(":"[")+(this.c==E?"unbound":this.c)+", "+(this.w==E?"unbound":this.w)+(this.la?")":"]")};function gd(a){if(hd(a))return[];var b=null,c=null;a.c==E||(b=new fd(E,a.c,!1,!a.ea));a.w==E||(c=new fd(a.w,E,!a.la,!1));return[b,c].filter(function(a){return null!==a})}fd.prototype.reverse=function(){return new fd(this.w,this.c,this.la,this.ea)};
function id(a,b){var c=jd(a.c,b.c,!0,a.ea,b.ea);if(0==c)return!0;var d=-1==c?a:b,c=1==c?a:b;return d.w==E||d.w>c.c||d.w==c.c&&!d.la&&!c.ea}function kd(){return new fd(E,E,!1,!1)}function hd(a){return a.c==E&&a.w==E}function ld(a){return a.c==a.w&&a.c!=E&&!a.ea&&!a.la}fd.prototype.contains=function(a){var b=this.w==E||a<this.w||a==this.w&&!this.la;return(this.c==E||a>this.c||a==this.c&&!this.ea)&&b};
function jd(a,b,c,d,e){function f(a){return c?a:1==a?-1:1}d=d||!1;e=e||!1;return a==E?b==E?(d?!e:e)?d?f(1):f(-1):0:f(-1):b==E?f(1):a<b?-1:a==b?(d?!e:e)?d?f(1):f(-1):0:1}function md(a,b){var c=jd(a.c,b.c,!0,a.ea,b.ea);0==c&&(c=jd(a.w,b.w,!1,a.la,b.la));return c};function F(a,b){this.entries=a;this.L=B(b);this.Va=null}function G(a){return C(a.L)}function nd(a){return a.entries.map(function(a){return a.ua.o})}function od(a){return a.entries.map(function(a){return a.ua.id()})}function pd(a,b){return a.Va.get(b.m())}var qd=null;function rd(){null===qd&&(qd=new F([],[]));return qd}
function sd(a){if(0==a.length)return rd();for(var b=a.reduce(function(a,b){return a+b.entries.length},0),c=Array(b),d=0,b=a.map(function(a){var b=y();a.entries.forEach(function(a){c[d++]=a;b.set(a.id,a)});return b}),e=y(),f=0;f<c.length;f++)b.every(function(a){return a.has(c[f].id)})&&e.set(c[f].id,c[f]);return new F(z(e),C(a[0].L))}function td(a){if(0==a.length)return rd();var b=y();a.forEach(function(a){a.entries.forEach(function(a){b.set(a.id,a)})});return new F(z(b),C(a[0].L))}
function ud(a,b){var c=1<b.length,d=a.map(function(a){return new vd(a,c)});return new F(d,b)}function vd(a,b){this.ua=a;this.id=wd++;this.Qd=b}var wd=0;function H(a,b){var c=b.Wa();return null!==c&&a.ua.o.hasOwnProperty(c)?a.ua.o[c]:a.Qd?a.ua.o[I(b.H())][b.getName()]:a.ua.o[b.getName()]}function xd(a,b,c){var d=b.Wa();if(null!=d)a.ua.o[d]=c;else if(a.Qd){var d=I(b.H()),e=a.ua.o[d];null==e&&(e={},a.ua.o[d]=e);e[b.getName()]=c}else a.ua.o[b.getName()]=c}
function yd(a,b,c,d){function e(a,b){if(a.Qd){var c=a.ua.o,d;for(d in c)f[d]=c[d]}else f[b[0]]=a.ua.o}var f={};e(a,b);e(c,d);a=new Sb(-1,f);return new vd(a,!0)};r("lf.bind",function(a){return new zd(a)});function zd(a){this.ga=a}r("lf.Binder",zd);zd.prototype.za=g("ga");function Ad(){this.Pe=Bd();var a=Cd();this.gc=y();this.gc.set(1,Dd());this.gc.set(2,Ed());this.gc.set(4,a);this.gc.set(3,a);this.gc.set(5,Fd())}var Gd;function Hd(){null!=Gd||(Gd=new Ad);return Gd}function Id(a,b,c){return(a.gc.get(b)||null).get(c)||null}function Bd(){function a(a){return a}var b=y();b.set(1,function(a){return null===a?null:a?1:0});b.set(2,function(a){return null===a?null:a.getTime()});b.set(3,a);b.set(4,a);b.set(5,a);return b}
function Dd(){var a=y();a.set("eq",function(a,c){return a==c});a.set("neq",function(a,c){return a!=c});return a}
function Cd(){var a=Dd();a.set("between",function(a,c){return null===a||null===c[0]||null===c[1]?!1:a>=c[0]&&a<=c[1]});a.set("gte",function(a,c){return null===a||null===c?!1:a>=c});a.set("gt",function(a,c){return null===a||null===c?!1:a>c});a.set("in",function(a,c){return-1!=c.indexOf(a)});a.set("lte",function(a,c){return null===a||null===c?!1:a<=c});a.set("lt",function(a,c){return null===a||null===c?!1:a<c});return a}
function Fd(){var a=Cd();a.set("match",function(a,c){return null===a||null===c?!1:(new RegExp(c)).test(a)});return a}
function Ed(){var a=y();a.set("between",function(a,c){return null===a||null===c[0]||null===c[1]?!1:a.getTime()>=c[0].getTime()&&a.getTime()<=c[1].getTime()});a.set("eq",function(a,c){return(null===a?-1:a.getTime())==(null===c?-1:c.getTime())});a.set("gte",function(a,c){return null===a||null===c?!1:a.getTime()>=c.getTime()});a.set("gt",function(a,c){return null===a||null===c?!1:a.getTime()>c.getTime()});a.set("in",function(a,c){return c.some(function(c){return c.getTime()==a.getTime()})});a.set("lte",
function(a,c){return null===a||null===c?!1:a.getTime()<=c.getTime()});a.set("lt",function(a,c){return null===a||null===c?!1:a.getTime()<c.getTime()});a.set("neq",function(a,c){return(null===a?-1:a.getTime())!=(null===c?-1:c.getTime())});return a};function J(){this.h=this.C=null}var Jd=[];J.prototype.getParent=g("C");J.prototype.hb=function(){for(var a=this;!fa(a.getParent());)a=a.getParent();return a};function Kd(a){for(var b=0;!fa(a.getParent());)b++,a=a.getParent();return b}function K(a){return a.h||Jd}function Ld(a,b){return K(a)[b]||null}function Md(a,b,c){b.C=a;null===a.h?a.h=[b]:a.h.splice(c,0,b)}function L(a,b){b.C=a;null===a.h?a.h=[b]:a.h.push(b)}
function Nd(a,b){var c=a.h&&a.h[b];return c?(c.C=null,a.h.splice(b,1),0==a.h.length&&(a.h=null),c):null}J.prototype.removeChild=function(a){return Nd(this,K(this).indexOf(a))};function Od(a,b,c){Ld(a,c).C=null;b.C=a;a.h[c]=b}function Pd(a,b,c){!1!==b.call(c,a)&&K(a).forEach(function(a){Pd(a,b,c)})};function Qd(){J.call(this);this.oa=Rd++}t(Qd,J);var Rd=0;Qd.prototype.Y=g("oa");function Sd(a,b,c){Qd.call(this);this.M=a;this.value=b;this.F=c;this.tc=Id(Hd(),this.M.G(),this.F);this.Ya=!1;this.cc=b}t(Sd,Qd);m=Sd.prototype;m.Mb=function(){var a=new Sd(this.M,this.value,this.F);a.cc=this.cc;a.qd(this.Ya);var b=this.Y();a.oa=b;return a};m.gb=function(a){return null!=a?(a.push(this.M),a):[this.M]};m.qd=ca("Ya");function Td(a){var b=!1;a.value instanceof zd||(b="array"==ea(a.value)?!a.value.some(function(a){return a instanceof zd}):!0);if(!b)throw new D(501);}
m.eval=function(a){Td(this);if("in"==this.F)return Ud(this,a);var b=a.entries.filter(function(a){return this.tc(H(a,this.M),this.value)!=this.Ya},this);return new F(b,G(a))};m.bind=function(a){if(this.cc instanceof zd){var b=this.cc.za();if(a.length<=b)throw new D(510);this.value=a[b]}else"array"==ea(this.cc)&&(this.value=this.cc.map(function(b){if(b instanceof zd){var d=b.za();if(a.length<=d)throw new D(510);return a[b.za()]}return b}))};
function Ud(a,b){var c=B(a.value),d=function(a){return null===a?!1:c.has(a)!=this.Ya}.bind(a),e=b.entries.filter(function(a){return d(H(a,this.M))},a);return new F(e,G(b))}m.toString=function(){return"value_pred("+this.M.m()+" "+this.F+(this.Ya?"(complement)":"")+" "+this.value+")"};function Vd(a,b){return 2==a.M.G()?b.getTime():b};function Wd(a){this.ba=a;this.Tc=this.Ca=null}function Xd(a,b){null===a.Ca&&null!=a.s&&(a.Ca=Yd(a.s));return a.Ca.get(b)||null}function Yd(a){var b=y();Pd(a,function(a){b.set(a.Y(),a)});return b}function Zd(a,b){b.s&&(a.s=b.s.Mb());a.Tc=b}Wd.prototype.bind=function(){return this};function $d(a,b){var c=a.s;null!=c&&Pd(c,function(a){a instanceof Sd&&a.bind(b)})};function ae(a){Wd.call(this,a)}t(ae,Wd);function be(a){var b="";a.forEach(function(c,d){b+=c.M.m()+" ";b+=1==c.lb?"ASC":"DESC";d<a.length-1&&(b+=", ")});return b}ae.prototype.ca=function(){return B(this.c)};ae.prototype.clone=function(){var a=new ae(this.ba);Zd(a,this);this.f&&(a.f=this.f.slice());this.c&&(a.c=this.c.slice());a.W=this.W;a.K=this.K;this.N&&(a.N=this.N.slice());this.ja&&(a.ja=this.ja.slice());this.Rb&&(a.Rb=this.Rb);this.Yb&&(a.Yb=this.Yb);a.Bb=this.Bb;return a};
ae.prototype.bind=function(a){ae.ab.bind.call(this,a);null!=this.Rb&&(this.W=a[this.Rb.za()]);null!=this.Yb&&(this.K=a[this.Yb.za()]);$d(this,a);return this};function ce(a,b){this.Da=a;this.aa=b}ce.prototype.hb=g("Da");ce.prototype.ca=g("aa");function de(a){var b=B();a.forEach(function(a){a.ca().forEach(b.add.bind(b))});return b};function fe(a,b){this.global=a;this.Ka=a.l(gc);this.nd=b.map(function(a){return a.context});this.Ze=b.map(function(a){return a.be});this.Ed=de(this.Ze);this.oe=ge(this);this.$a=x()}function ge(a){return a.nd.some(function(a){return!(a instanceof ae)})?1:0}m=fe.prototype;
m.exec=function(){function a(){var f=d.shift();if(f){var h=e[c.length];return f.hb().exec(b,h).then(function(b){c.push(b[0]);return a()})}return w()}var b=0==this.oe?void 0:new ad(this.global,this.Ed),c=[],d=this.Ze.slice(),e=this.nd;return a().then(function(){return this.Ka.Db(this.oe,C(this.Ed),b).ia()}.bind(this)).then(function(){this.Zd(c);return c}.bind(this),function(a){null!=b&&b.Jb();throw a;})};m.G=g("oe");m.ca=g("Ed");m.Nb=g("$a");m.Y=function(){return ka(this)};m.Zd=aa();function he(a,b){fe.call(this,a,b);this.Ib=a.l(lc)}t(he,fe);he.prototype.getPriority=l(0);he.prototype.Zd=function(a){this.nd.forEach(function(b,c){ie(this.Ib,b,a[c])},this)};function je(a,b){this.i=a;this.Ib=a.l(lc);this.Ea=a.l(kc);this.dd=new xc(a);this.sb=b;var c=a.l(mc),d=this.sb.map(function(a){return c.table(a.getName())});this.aa=B(d);this.$a=x()}m=je.prototype;m.exec=function(){this.dd.update(this.sb);this.Ic();return w()};m.G=l(1);m.ca=g("aa");m.Nb=g("$a");m.Y=function(){return ka(this)};m.getPriority=l(1);m.Ic=function(){var a=ke(this.Ib,this.aa);0!=a.length&&(a=new he(this.i,a),le(this.Ea,a))};function me(a){this.i=a;this.Ka=a.l(gc);this.Ea=a.l(kc)}me.prototype.Xd=function(a){a=new je(this.i,a);le(this.Ea,a)};function M(a,b){this.$b=a;this.j=b;this.Sa=y()}r("lf.backstore.FirebaseRawBackStore",M);M.prototype.$c=g("j");M.prototype.ad=function(){throw new D(351);};function ne(a,b){var c=x(),d=a;b.length&&(d=a.child(b));d.once("value",function(a){c.resolve(a.val())},function(a){c.reject(a)});return c.da}function oe(a,b,c){function d(a){a?e.reject(a):e.resolve()}c=c||!1;var e=x();c?a.set(b,d):a.update(b,d);return e.da}
M.prototype.Ga=function(a){return ne(this.j,"@rev/R").then(function(a){this.La=a;return ne(this.j,"@table")}.bind(this)).then(function(b){var c=0,d;for(d in b)this.Sa.set(d,b[d]),b[d]>c&&(c=b[d]);a.ra().forEach(function(a){this.Sa.has(a.getName())||(b[a.getName()]=++c)},this);d=this.j.child("@table");return oe(d,b)}.bind(this))};
function pe(a,b,c){var d=a.Sa.get(b);return null!=d?function(){var a={},b=x();this.j.orderByChild("T").equalTo(d).once("value",function(d){d.forEach(function(b){var d=c(b.val());a[parseInt(b.key(),10)]=d});b.resolve(a)});return b.da}.call(a).then(function(a){a["@rev"]={R:++this.La};return oe(this.j,a)}.bind(a)):w()}M.prototype.rc=function(a){return pe(this,a,l(null)).then(function(){this.Sa.delete(a);return oe(this.j.child("@table/"+a),null,!0)}.bind(this))};M.prototype.dropTable=M.prototype.rc;
M.prototype.oc=function(a,b,c){return pe(this,a,function(a){var e=a.P;e[b]=c;return{R:this.La+1,T:a.T,P:e}}.bind(this))};M.prototype.addTableColumn=M.prototype.oc;M.prototype.sc=function(a,b){return pe(this,a,function(a){var d=a.P;delete d[b];return{R:this.La+1,T:a.T,P:d}}.bind(this))};M.prototype.dropTableColumn=M.prototype.sc;M.prototype.Hc=function(a,b,c){return pe(this,a,function(a){var e=a.P;e[c]=e[b];delete e[b];return{R:this.La+1,T:a.T,P:e}}.bind(this))};M.prototype.renameTableColumn=M.prototype.Hc;
M.prototype.vb=function(){throw new D(351);};M.prototype.createRow=M.prototype.vb;M.prototype.zc=g("$b");M.prototype.getVersion=M.prototype.zc;M.prototype.ec=function(a){var b=x();a=this.Sa.get(a);this.j.orderByChild("T").equalTo(a).once("value",function(a){var d=[];a.forEach(function(a){d.push(a.val().P)});b.resolve(d)});return b.da};M.prototype.dump=function(){var a={},b=Rb(this.Sa).map(function(b){return this.ec(b).then(function(d){a[b]=d})}.bind(this));return db(b).then(function(){return a})};
M.prototype.dump=M.prototype.dump;function qe(a,b,c){Zb.call(this,b,c);this.j=a}t(qe,Zb);qe.prototype.H=function(a){return this.j.xc(a)};
qe.prototype.qc=function(){if(0==this.ne)return this.O.resolve(),this.O.da;var a=this.Oa.sb;if(0==a.size)this.O.resolve();else{var b=this.j.La+1;this.j.La=b;var c={"@rev":{R:b}};a.forEach(function(a,e){var f=this.j.Sa.get(e);a.va.forEach(function(a,d){c[d]={R:b,T:f,P:a.o}});a.ma.forEach(function(a,d){c[d]={R:b,T:f,P:a[1].o}});a.ya.forEach(function(a,b){c[b]=null})},this);this.j.j.update(c,function(c){null===c?this.O.resolve():(this.j.La=b-1,c=z(a).map(function(a){return re(this.j,a.getName())},this),
db(c).then(this.O.reject.bind(this.O),this.O.reject.bind(this.O)))}.bind(this))}return this.O.da};function se(){this.xa=y()}function te(a,b){if(0==b.length)return z(a.xa);var c=[];b.forEach(function(a){a=this.xa.get(a)||null;null===a||c.push(a)},a);return c}se.prototype.getData=g("xa");se.prototype.get=function(a){return w(te(this,a))};function ue(a,b){b.forEach(function(a){this.xa.set(a.id(),a)},a)}se.prototype.put=function(a){ue(this,a);return w()};function ve(a,b){0==b.length||b.length==a.xa.size?a.xa.clear():b.forEach(function(a){this.xa.delete(a)},a)}
se.prototype.remove=function(a){ve(this,a);return w()};function we(a){return 0==a.xa.size?0:Rb(a.xa).reduce(function(a,c){return a>c?a:c},0)};function xe(a,b){this.g=a;this.vf=b;this.Gc=y();this.La=-1;this.L=y();this.Sa=y();this.Bd=null}m=xe.prototype;
m.Ga=function(a){this.j=this.vf.child(this.g.name());var b=a||function(){return w()};return ne(this.j,"@db/version").then(function(a){return null===a?oe(this.j,ye(this),!0).then(function(){var a=new M(0,this.j);return b(a)}.bind(this)):a==this.g.version()?ne(this.j,"@rev/R").then(function(a){this.La=a;return ne(this.j,"@table")}.bind(this)).then(function(a){for(var b in a)this.Sa.set(b,a[b]);a=this.g.ra().map(function(a){return re(this,a.getName())},this);return db(a)}.bind(this)).then(function(){ze(this);
Ae(this);return w()}.bind(this)):this.$d(a,b).then(function(){return this.Ga()}.bind(this))}.bind(this))};m.$d=function(a,b){var c=new M(a,this.j);return c.Ga(this.g).then(function(){return w()}.bind(this)).then(function(){return b(c)}).then(function(){var a=this.j.child("@db");return oe(a,{version:this.g.version()},!0)}.bind(this))};
function Ae(a){a.j.off();a.j.on("child_removed",a.jg.bind(a));a.Cd&&(a.Cd.off(),a.Gc.clear());a.Cd=a.j.orderByChild("R").startAt(a.La+1);a.Cd.on("value",a.Xd.bind(a))}function ze(a){Tb=z(a.L).map(function(a){return we(a)}).reduce(function(a,c){return a>c?a:c},0)+1}m.jg=function(a){var b=a.val(),c=this.Gc.get(b.T)||null;null===c&&(c=B(),this.Gc.set(b.T,c));c.add(parseInt(a.key(),10))};
m.Xd=function(a){var b=a.child("@rev/R").val();null!=b&&b!=this.La&&(this.La=b,a=Be(this,a),a.forEach(function(a){var b=this.L.get(a.getName()),e=Rb(a.ya);0<e.length&&ve(b,e);var f=z(a.va);a.ma.forEach(function(a){f.push(a[1])});ue(b,f)},this),0<a.length&&this.Cc(a),Ae(this))};
function Be(a,b){var c=B(),d=y();a.Sa.forEach(function(a,b){var h=this.L.get(b),k=new Zc(b);if(this.Gc.has(a)){var n=C(this.Gc.get(a));n.forEach(function(a){c.add(a)});te(h,n).forEach(function(a){k.delete(a)})}d.set(a,k)}.bind(a));b.forEach(function(a){if("@rev"!=a.key()){var b=parseInt(a.key(),10);if(!c.has(b)){var h=a.val();a=d.get(h.T);var k=this.L.get(a.getName()),h=this.g.table(a.getName()).fb({id:b,value:h.P});k.getData().has(b)?a.modify([te(k,[b])[0],h]):a.add(h)}}}.bind(a));return z(d).filter(function(a){return!a.Yf()})}
function re(a,b){var c=x(),d=a.Sa.get(b),e=a.g.table(b);a.j.orderByChild("T").equalTo(d).once("value",function(a){var d=new se,k=[];a.forEach(function(a){k.push(e.fb({id:parseInt(a.key(),10),value:a.val().P}))});ue(d,k);this.L.set(b,d);c.resolve()}.bind(a));return c.da}function ye(a){var b={};b["@db"]={version:a.g.version()};b["@rev"]={R:1};a.La=1;b["@table"]={};a.g.ra().forEach(function(a,d){var e=a.getName();b["@table"][e]=d;this.L.set(e,new se);this.Sa.set(e,d)},a);return b}
m.Db=function(a,b,c){return new qe(this,a,c)};m.xc=function(a){var b=this.L.get(a)||null;if(null!==b)return b;throw new D(101,a);};m.close=aa();m.subscribe=ca("Bd");m.Cc=function(a){null!=this.Bd&&this.Bd(a)};function N(a,b,c,d){this.j=b;this.Ua=c;this.$b=a;this.Rc=d}r("lf.backstore.IndexedDBRawBackStore",N);N.prototype.$c=g("j");N.prototype.getRawDBInstance=N.prototype.$c;N.prototype.ad=g("Ua");N.prototype.getRawTransaction=N.prototype.ad;N.prototype.rc=function(a){return new v(function(b,c){try{this.j.deleteObjectStore(a)}catch(d){c(d);return}b()},this)};N.prototype.dropTable=N.prototype.rc;
function Ce(a,b,c,d){return new v(function(a,f){var h;try{var k=this.Ua.objectStore(b);h=k.openCursor()}catch(n){f(n);return}h.onsuccess=function(){var b=h.result;b?(c(b),b.continue()):(d(k),a())};h.onerror=f},a)}function De(a){var b=null;return b=a instanceof ArrayBuffer?Xb(a):a instanceof Date?a.getTime():a}
function Ee(a,b,c){function d(a){var b=sc(a.value),d=b.o,e;for(e in d){var A=Ub(d[e]);c(A);d[e]=A.Fa()}a.update(b.Fa())}function e(a){var b=Ub(a.value);c(b);a.update(b.Fa())}return Ce(a,b,a.Rc?d:e,aa())}N.prototype.oc=function(a,b,c){var d=De(c);return Ee(this,a,function(a){a.o[b]=d})};N.prototype.addTableColumn=N.prototype.oc;N.prototype.sc=function(a,b){return Ee(this,a,function(a){delete a.o[b]})};N.prototype.dropTableColumn=N.prototype.sc;
N.prototype.Hc=function(a,b,c){return Ee(this,a,function(a){a.o[c]=a.o[b];delete a.o[b]})};N.prototype.renameTableColumn=N.prototype.Hc;function Fe(a,b){var c=[];return new v(function(a,e){var f;try{f=this.Ua.objectStore(b).openCursor()}catch(h){e(h);return}f.onsuccess=function(){var b=f.result;if(b){if(this.Rc){var e;e=sc(b.value).o;for(var n in e)c.push(e[n])}else c.push(b.value);b.continue()}else a(c)}.bind(this);f.onerror=e},a)}N.prototype.vb=function(a){var b={},c;for(c in a)b[c]=De(a[c]);return Vb(b)};
N.prototype.createRow=N.prototype.vb;N.prototype.zc=g("$b");N.prototype.getVersion=N.prototype.zc;N.prototype.dump=function(){for(var a=this.j.objectStoreNames,b=[],c=0;c<a.length;++c){var d=a.item(c);b.push(this.ec(d))}return db(b).then(function(b){var c={};b.forEach(function(b,d){c[a.item(d)]=b});return c})};N.prototype.dump=N.prototype.dump;N.prototype.ec=function(a){return Fe(this,a).then(function(a){return a.map(function(a){return a.value})})};function Ge(a,b){this.X=a;this.Eb=b}Ge.prototype.get=function(a){if(0==a.length)return null!=this.X.getAll?He(this):Ie(this);a=a.map(function(a){return new v(function(c,d){var e;try{e=this.X.get(a)}catch(f){d(f);return}e.onerror=d;e.onsuccess=function(a){c(this.Eb(a.target.result))}.bind(this)},this)},this);return db(a)};
function Ie(a){return new v(function(a,c){var d=[],e;try{e=this.X.openCursor()}catch(f){c(f);return}e.onerror=c;e.onsuccess=function(){var c=e.result;c?(d.push(this.Eb(c.value)),c.continue()):a(d)}.bind(this)},a)}function He(a){return new v(function(a,c){var d;try{d=this.X.getAll()}catch(e){c(e);return}d.onerror=c;d.onsuccess=function(){var c=d.result.map(function(a){return this.Eb(a)},this);a(c)}.bind(this)},a)}
Ge.prototype.Tb=function(a){return new v(function(b,c){var d;try{d=a()}catch(e){c(e);return}d.onsuccess=b;d.onerror=c},this)};Ge.prototype.put=function(a){if(0==a.length)return w();a=a.map(function(a){return this.Tb(function(){return this.X.put(a.Fa())}.bind(this))},this);return db(a)};
Ge.prototype.remove=function(a){return new v(function(b,c){var d=this.X.count();d.onsuccess=function(d){if(0==a.length||d.target.result==a.length)return this.Tb(function(){return this.X.clear()}.bind(this)).then(b,c);d=a.map(function(a){return this.Tb(function(){return this.X.delete(a)}.bind(this))},this);db(d).then(b,c)}.bind(this);d.onerror=c},this)};function Je(a,b,c,d,e){Zb.call(this,c,e);this.i=a;this.Ua=b;this.Rc=d;this.Ua.oncomplete=this.O.resolve.bind(this.O);this.Ua.onabort=this.O.reject.bind(this.O)}t(Je,Zb);Je.prototype.H=function(a,b,c){return this.Rc?(c=null!=c?c:0,a=this.Ua.objectStore(a),new tc(a,b,0==c?qa(vc,this.i):wc)):new Ge(this.Ua.objectStore(a),b)};Je.prototype.qc=function(){return this.O.da};function Ke(a,b){this.i=a;this.g=b;this.yd=b.$e().If||!1}m=Ke.prototype;
m.Ga=function(a){var b=window.indexedDB||window.mozIndexedDB||window.webkitIndexedDB||window.msIndexedDB;if(null==b)throw new D(352);var c=a||function(){return w()};return new v(function(a,e){var f;try{f=b.open(this.g.name(),this.g.version())}catch(h){e(h);return}f.onerror=e;f.onupgradeneeded=function(a){Le(this,c,a).then(aa(),e)}.bind(this);f.onsuccess=function(b){this.j=b.target.result;this.he().then(function(b){Tb=b+1;a(this.j)}.bind(this))}.bind(this)},this)};
function Le(a,b,c){var d=c.target.result;c=new N(c.oldVersion,d,c.target.transaction,a.yd);Me(d);a.g.ra().forEach(qa(a.Df,d),a);return b(c)}function Me(a){for(var b=[],c=0;c<a.objectStoreNames.length;++c){var d=a.objectStoreNames.item(c);-1!=d.indexOf(".")&&b.push(d)}b.forEach(function(b){try{a.deleteObjectStore(b)}catch(c){}})}m.Df=function(a,b){a.objectStoreNames.contains(b.getName())||a.createObjectStore(b.getName(),{keyPath:"id"});b.Cb()&&(b.Aa().forEach(function(b){Ne(a,b.m())},this),Ne(a,Oe(b)))};
function Ne(a,b){a.objectStoreNames.contains(b)||a.createObjectStore(b,{keyPath:"id"})}m.Db=function(a,b,c){b=this.j.transaction(Pe(b),0==a?"readonly":"readwrite");return new Je(this.i,b,a,this.yd,c)};function Pe(a){var b=B();a.forEach(function(a){b.add(a.getName());a.Cb()&&(a.Aa().forEach(function(a){b.add(a.m())}),b.add(Oe(a)))});return C(b)}
m.he=function(a){function b(){if(0==d.length)return w();var a=d.shift();return c(a).then(b)}function c(b){return new v(function(c,d){var O;try{O=(a||e.transaction([b])).objectStore(b).openCursor(null,"prev")}catch(ba){d(ba);return}O.onsuccess=function(a){(a=a.target.result)&&(f=Math.max(f,h(a)));c(f)};O.onerror=function(){c(f)}})}var d=this.g.ra().map(function(a){return a.getName()}),e=this.j,f=0,h=function(a){return this.yd?(a=sc(a.value),Object.keys(a.o).reduce(function(a,b){return Math.max(a,b)},
0)):a.key}.bind(this);return new v(function(a){b().then(function(){a(f)})})};m.close=function(){this.j.close()};m.xc=function(){throw new D(511);};m.subscribe=aa();m.Cc=aa();function Qe(a,b,c){Zb.call(this,b,c);this.X=a;0==b&&this.O.resolve()}t(Qe,Zb);Qe.prototype.H=function(a){return this.X.xc(a)};Qe.prototype.qc=function(){this.O.resolve();return this.O.da};function Re(a){this.g=a;this.L=y()}m=Re.prototype;m.Ga=function(){this.g.ra().forEach(this.Vf,this);return w()};m.xc=function(a){var b=this.L.get(a)||null;if(null===b)throw new D(101,a);return b};m.Db=function(a,b,c){return new Qe(this,a,c)};function Se(a,b){if(!a.L.has(b)){var c=new se;a.L.set(b,c)}}m.Vf=function(a){Se(this,a.getName());a.Cb()&&(a.Aa().forEach(function(a){Se(this,a.m())},this),Se(this,Oe(a)))};m.close=aa();m.subscribe=aa();m.Cc=aa();function Te(a){Re.call(this,a);this.jd=null}t(Te,Re);Te.prototype.subscribe=function(a){null===this.jd&&(this.jd=a)};Te.prototype.Cc=function(a){null===this.jd||this.jd(a)};function Ue(a,b,c){this.Ua=a;this.u=b;this.Eb=c}Ue.prototype.get=function(a){var b=this.Eb;return Ve(this.Ua,"SELECT id, value FROM "+this.u+" "+(0==a.length?"":"WHERE id IN ("+a.join(",")+")"),[],function(a){for(var d=a.rows.length,e=Array(d),f=0;f<d;++f)e[f]=b({id:a.rows.item(f).id,value:JSON.parse(a.rows.item(f).value)});return e})};
Ue.prototype.put=function(a){if(0==a.length)return w();var b="INSERT OR REPLACE INTO "+this.u+"(id, value) VALUES (?, ?)";a.forEach(function(a){Ve(this.Ua,b,[a.id(),JSON.stringify(a.o)])},this);return w()};Ue.prototype.remove=function(a){Ve(this.Ua,"DELETE FROM "+this.u+" "+(0==a.length?"":"WHERE id IN ("+a.join(",")+")"),[]);return w()};function We(a,b,c){Zb.call(this,b,c);this.j=a;this.L=y();this.Fd=[]}t(We,Zb);function Xe(a){return a.replace(".","__d__").replace("#","__s__")}We.prototype.H=function(a,b){var c=this.L.get(a)||null;null===c&&(c=new Ue(this,Xe(a),b),this.L.set(a,c));return c};function Ve(a,b,c,d){var e=x();a.Fd.push({yg:b,ng:c,transform:d,O:e});return e.da}
We.prototype.qc=function(){var a=null,b=this.O.reject.bind(this.O),c=function(a,b){this.O.reject(b)}.bind(this),d=[],e=function(b,h){if(null!==a){var k=h;null!=a.transform&&null!=h&&(k=a.transform(h));d.push(k);a.O.resolve(k)}0<this.Fd.length?(a=k=this.Fd.shift(),b.executeSql(k.yg,k.ng,e,c)):this.O.resolve(d)}.bind(this);0==this.ne?this.j.readTransaction(e,b):this.j.transaction(e,b);return this.O.da};function P(a,b,c){this.j=c;this.i=a;this.$b=b}r("lf.backstore.WebSqlRawBackStore",P);P.prototype.$c=g("j");P.prototype.getRawDBInstance=P.prototype.$c;P.prototype.ad=function(){throw new D(356);};P.prototype.getRawTransaction=P.prototype.ad;function Ye(a){return new We(a.j,1,new ad(a.i,B()))}P.prototype.rc=function(a){var b=Ye(this);Ve(b,"DROP TABLE "+a,[]);return b.ia()};P.prototype.dropTable=P.prototype.rc;
P.prototype.ec=function(a){var b=Ye(this);Ve(b,"SELECT id, value FROM "+a,[]);return b.ia().then(function(a){for(var b=a[0].rows.length,e=Array(b),f=0;f<b;++f)e[f]={id:a[0].rows.item(f).id,value:JSON.parse(a[0].rows.item(f).value)};return w(e)})};function Ze(a,b,c){var d=Ye(a),e="UPDATE "+b+" SET value=? WHERE id=?";return a.ec(b).then(function(a){a.forEach(function(a){a=c(a);Ve(d,e,[JSON.stringify(a.value),a.id])});return d.ia()})}
P.prototype.oc=function(a,b,c){var d=De(c);return Ze(this,a,function(a){a.value[b]=d;return a})};P.prototype.addTableColumn=P.prototype.oc;P.prototype.sc=function(a,b){return Ze(this,a,function(a){delete a.value[b];return a})};P.prototype.dropTableColumn=P.prototype.sc;P.prototype.Hc=function(a,b,c){return Ze(this,a,function(a){a.value[c]=a.value[b];delete a.value[b];return a})};P.prototype.renameTableColumn=P.prototype.Hc;P.prototype.vb=function(a){var b={},c;for(c in a)b[c]=De(a[c]);return Vb(b)};
P.prototype.createRow=P.prototype.vb;P.prototype.zc=g("$b");P.prototype.getVersion=P.prototype.zc;function $e(a){Ve(a,'SELECT tbl_name FROM sqlite_master WHERE type="table"',[],function(a){for(var c=Array(a.rows.length),d=0;d<c.length;++d)c[d]=a.rows.item(d).tbl_name;return c})}
P.prototype.dump=function(){var a=x(),b=Ye(this);$e(b);var c={};b.ia().then(function(b){b=b[0].filter(function(a){return"__lf_ver"!=a&&"__WebKitDatabaseInfoTable__"!=a}).map(function(a){return this.ec(a).then(function(b){c[a]=b})},this);db(b).then(function(){a.resolve(c)})}.bind(this));return a.da};P.prototype.dump=P.prototype.dump;function af(a,b,c){this.i=a;this.g=b;this.xg=c||4194304}m=af.prototype;m.Ga=function(a){if(null==window.openDatabase)throw new D(353);var b=a||function(){return w()};return new v(function(a,d){try{var e=window.openDatabase(this.g.name(),"",this.g.name(),this.xg);if(null!=e)this.j=e,bf(this,b).then(a,d);else throw new D(354);}catch(f){d(f)}},this)};
function bf(a,b){var c=x(),d=new We(a.j,1,new ad(a.i,B()));Ve(d,"CREATE TABLE IF NOT EXISTS __lf_ver(id INTEGER PRIMARY KEY, v INTEGER)",[]);Ve(d,"SELECT v FROM __lf_ver WHERE id = 0",[]);d.ia().then(function(a){var d=0;a[1].rows.length&&(d=a[1].rows.item(0).v);d<this.g.version()?this.$d(b,d).then(c.resolve.bind(c)):d>this.g.version()?c.reject(new D(108)):c.resolve()}.bind(a));return c.da}m.Db=function(a,b,c){if(null!=this.j)return new We(this.j,a,c);throw new D(2);};m.close=aa();
m.xc=function(){throw new D(512);};m.subscribe=function(){throw new D(355);};m.Cc=function(){throw new D(355);};m.$d=function(a,b){var c=x();cf(this).then(function(){a(new P(this.i,b,this.j)).then(function(){return this.he()}.bind(this)).then(c.resolve.bind(c))}.bind(this),c.reject.bind(c));return c.da};
function cf(a){var b=a.g.ra(),c=new We(a.j,1,new ad(a.i,B())),d=new We(a.j,1,new ad(a.i,B()));Ve(c,"INSERT OR REPLACE INTO __lf_ver VALUES (0, ?)",[a.g.version()]);$e(c);return c.ia().then(function(a){var c=a[1];c.filter(function(a){return-1!=a.indexOf("__d__")}).forEach(function(a){Ve(d,"DROP TABLE "+a,[])});var h=[],k=[],n=[];b.map(function(a){-1==c.indexOf(a.getName())&&h.push(a.getName());a.Cb&&(a.Aa().forEach(function(a){a=Xe(a.m());h.push(a);k.push(a)}),a=Xe(Oe(a)),h.push(a),n.push(a))});h.forEach(function(a){Ve(d,
"CREATE TABLE "+a+"(id INTEGER PRIMARY KEY, value TEXT)",[])});return d.ia()})}m.he=function(){var a=0,b=x(),c=function(b){var c=new We(this.j,0);Ve(c,"SELECT MAX(id) FROM "+b,[]);return c.ia().then(function(b){b=b[0].rows.item(0)[0];a=Math.max(b,a)})}.bind(this),d=this.g.ra().map(function(a){return c(a.getName())});db(d).then(function(){b.resolve(a)},function(a){b.reject(a)});return b.da};function df(a){this.Z=y();this.Zb=y();a.ra().forEach(function(a){this.Zb.set(a.getName(),B())},this)}m=df.prototype;m.set=function(a,b){this.Z.set(b.id(),b);this.Zb.get(a).add(b.id())};m.Wb=function(a,b){var c=this.Zb.get(a);b.forEach(function(a){this.Z.set(a.id(),a);c.add(a.id())},this)};m.get=function(a){return this.Z.get(a)||null};function ef(a,b){return b.map(function(a){return this.get(a)},a)}
m.Xa=function(a,b,c){var d=[],e=Math.min(b,c),f=Math.max(b,c);a=this.Zb.get(a);if(a.size<f-e)a.forEach(function(a){a>=e&&a<=f&&(a=this.Z.get(a),d.push(a))},this);else for(b=e;b<=f;++b)a.has(b)&&(c=this.Z.get(b),d.push(c));return d};m.remove=function(a,b){this.Z.delete(b);this.Zb.get(a).delete(b)};m.Gg=function(a){return null!=a?this.Zb.get(a).size:this.Z.size};m.clear=function(){this.Z.clear();this.Zb.clear()};function ff(a,b,c){var d=0,e=a.length;for(c=c||gf;d<e;){var f=d+e>>1;0>c(a[f],b)?d=f+1:e=f}return d==e&&a[d]==b?d:~d}function gf(a,b){return a-b}function hf(a,b,c){c=ff(a,b,c);return 0>c?(a.splice(-(c+1),0,b),!0):!1};function jf(a,b,c,d){a=b?a.reverse():a;if(null==c&&null==d)return a;c=Math.min(q(c)?c:a.length,a.length);if(0==c)return[];d=Math.min(d||0,a.length);return a.slice(d,d+c)};function kf(){this.na=0}kf.prototype.add=function(a,b){this.na+=b};kf.prototype.remove=function(a,b){this.na-=b};kf.prototype.clear=function(){this.na=0};function mf(a,b){a.clear();b.forEach(function(a){this.na+=a.na},a)};function nf(a,b,c,d){this.u=a;this.V=b;this.qf=c;this.qb=new kf;if(d){a=511;a*=a*a;if(d.length>=a)throw new D(6,a);d=of(this,d);this.qa=d=pf(d)}else this.clear()}var qf=[];m=nf.prototype;m.getName=g("u");m.toString=function(){return this.qa.toString()};m.add=function(a,b){this.qa=this.qa.zb(a,b)};m.set=function(a,b){this.qa=this.qa.zb(a,b,!0)};m.remove=function(a,b){this.qa=this.qa.remove(a,b)};m.get=function(a){return this.qa.get(a)};
m.Vc=function(a){if(null==a)return this.Ma().na;if(a instanceof fd){if(hd(a))return this.Ma().na;if(ld(a))return this.get(a.c).length}return this.Xa([a]).length};m.Ma=g("qb");m.Md=function(a,b,c,d){c=Array(a);this.qa.fill({offset:b?this.qb.na-a-d:d,count:a,ke:0},c);return b?c.reverse():c};
m.Xa=function(a,b,c,d){var e=rf(this.qa).b[0];if(!q(e)||0==c)return qf;b=b||!1;c=null!=c?Math.min(c,this.qb.na):this.qb.na;d=d||0;var f=Math.min(Math.max(this.qb.na-d,0),c);if(0==f)return qf;if(!q(a)||1==a.length&&a[0]instanceof fd&&hd(a[0]))return this.Md(f,b,c,d);a=this.V.lf(a);var h=Array(b?this.qb.na:f),k={count:0,W:h.length,reverse:b,K:d},n=1<e.length;a.forEach(function(a){for(var b=this.V.od(a),b=this.V.Pd(a)?e:b[0],b=sf(this.qa,b),c=0;null!=b&&k.count<k.W;){if(n){for(var d=b,f=a,Wb=k,vb=h,
Pc=d.A.Lb(),ee=-1,Ha=0;Ha<d.b.length;++Ha)if(Pc.Ab(d.b[Ha],f)){ee=Ha;break}if(-1!=ee)for(Ha=ee;Ha<d.b.length&&Wb.count<Wb.W;++Ha)Pc.Ab(d.b[Ha],f)&&tf(d,Wb,vb,Ha)}else b.Xa(a,k,h);0!=k.K||b.fd(a)?c=0:c++;b=2==c?null:b.next()}},this);h.length>k.count&&h.splice(k.count,h.length-k.count);return b?jf(h,b,c,d):h};m.clear=function(){this.qa=uf(this);this.qb.clear()};m.eb=function(a){return this.qa.eb(a)};m.min=function(){return this.Hb(this.V.min.bind(this.V))};m.max=function(){return this.Hb(this.V.max.bind(this.V))};
function vf(a,b,c){if(!a.V.Gd(b.b[c]))if(1<b.b[c].length){if(null===b.b[c][0])return null}else return null;return[b.b[c],a.qf?[b.B[c]]:b.B[c]]}m.Hb=function(a){var b;a:{b=rf(this.qa);var c=0;do if(c>=b.b.length)b=b.ta,c=0;else{var d=vf(this,b,c);if(null!==d){b=d;break a}c++}while(null!==b);b=null}a:{c=wf(this.qa);d=c.b.length-1;do if(0>d)c=c.mb,d=0;else{var e=vf(this,c,d);if(null!==e){c=e;break a}d--}while(null!==c);c=null}return null===b||null===c?null:1==a(b[0],c[0])?b:c};m.Ia=g("qf");m.Lb=g("V");
m.Td=function(a,b){return null!=a?-1==this.V.compare(a,b):!1};m.Na=function(a,b){return null!=a?0==this.V.compare(a,b):!1};m.Fa=function(){for(var a=[],b=rf(this.qa);b;)a.push(new Sb(b.oa,[b.b,b.B])),b=b.ta;return a};function xf(a,b,c,d){a=new nf(b,a,c);d=yf(d,a);a.qa=d;return a}function zf(a,b){this.oa=a;this.A=b;this.ib=0;this.ta=this.mb=this.C=null;this.b=[];this.B=[];this.h=[]}function uf(a){return new zf(Tb++,a)}function Q(a){return 0==a.ib}m=zf.prototype;m.next=g("ta");
function Af(a){function b(a){return null!=a?a.oa.toString():"_"}var c=a.oa+"["+a.b.join("|")+"]",d=a.h.map(function(a){return a.oa}).join("|"),e=a.B.join("/"),f=b(a.mb)+"{",f=Q(a)?f+e:f+d,f=f+"}"+b(a.C);a.ta&&(a=Af(a.ta),c=c+"  "+a[0],f=f+"  "+a[1]);return[c,f]}m.toString=function(){var a="",b=Af(this),a=a+(b[0]+"\n"+b[1]+"\n");this.h.length&&(a+=this.h[0].toString());return a};function rf(a){return Q(a)?a:rf(a.h[0])}function wf(a){return Q(a)?a:wf(a.h[a.h.length-1])}
function Bf(a,b){b&&(b.mb=a);a&&(a.ta=b)}function of(a,b){for(var c=b.length,d=0,e=uf(a),f=e;0<c;){var h=768<=c?511:257<=c&&511>=c?c:257,k=b.slice(d,d+h);e.b=k.map(function(a){return a.key});e.B=k.map(function(a){return a.value});d+=h;c-=h;0<c&&(h=uf(e.A),Bf(e,h),e=h)}return f}function Cf(a){var b=a[0],c=uf(b.A);c.ib=b.ib+1;c.h=a;for(b=0;b<a.length;++b)a[b].C=c,0<b&&c.b.push(a[b].b[0]);return c}
function pf(a){var b=a,c=[];do c.push(b),b=b.ta;while(b);if(512>=c.length)b=Cf(c);else{var d=c.length,e=0,b=uf(a.A);for(b.ib=a.ib+2;0<d;){a=768<=d?511:257<=d&&511>=d?d:257;var f=c.slice(e,e+a),h=Cf(f);h.C=b;b.h.length&&(b.b.push(f[0].b[0]),Bf(b.h[b.h.length-1],h));b.h.push(h);e+=a;d-=a}}return b}m.get=function(a){var b=Df(this,a);if(Q(this)){var c=qf;this.A.Na(this.b[b],a)&&(c=c.concat(this.B[b]));return c}b=this.A.Na(this.b[b],a)?b+1:b;return this.h[b].get(a)};
m.eb=function(a){var b=Df(this,a);return this.A.Na(this.b[b],a)?!0:Q(this)?!1:this.h[b].eb(a)};m.remove=function(a,b){Ef(this,a,-1,b);if(null===this.C){var c=this;1==this.h.length&&(c=this.h[0],c.C=null);return c}return this};function Ff(a){return Q(a)?a.b[0]:Ff(a.h[0])}function Gf(a){a.b=[];for(var b=1;b<a.h.length;++b)a.b.push(Ff(a.h[b]))}
function Ef(a,b,c,d){var e=Df(a,b),f=Q(a);if(!f){var h=a.A.Na(a.b[e],b)?e+1:e;if(Ef(a.h[h],b,h,d))Gf(a);else return!1}else if(!a.A.Na(a.b[e],b))return!1;if(a.b.length>e&&a.A.Na(a.b[e],b)){if(q(d)&&!a.A.Ia()&&f&&(h=a.B[e],d=ff(h,d,void 0),0>d?d=!1:(h.splice(d,1),d=!0),d&&a.A.Ma().remove(b,1),a.B[e].length))return!1;a.b.splice(e,1);f&&(f=a.A.Ia()?1:a.B[e].length,a.B.splice(e,1),a.A.Ma().remove(b,f))}if(256>a.b.length&&null!==a.C){a:{b=null;if(a.ta&&256<a.ta.b.length)b=a.ta,e=d=0,f=a.b.length+1;else if(a.mb&&
256<a.mb.b.length)b=a.mb,d=a.mb.b.length-1,e=Q(a)?d:d+1,f=0;else{b=!1;break a}a.b.splice(f,0,b.b[d]);b.b.splice(d,1);d=Q(a)?a.B:a.h;h=null;Q(a)?h=b.B:(h=b.h,h[e].C=a);d.splice(f,0,h[e]);h.splice(e,1);Q(b)||(Gf(b),Gf(a));b=!0}b||Hf(a,c)}return!0}
function Hf(a,b){var c,d,e;a.ta&&511>a.ta.b.length?(c=a.ta,e=d=0):a.mb&&(c=a.mb,d=c.b.length,e=Q(c)?c.B.length:c.h.length);d=[d,0].concat(a.b);Array.prototype.splice.apply(c.b,d);d=null;Q(a)?d=a.B:(d=a.h,d.forEach(function(a){a.C=c}));d=[e,0].concat(d);Array.prototype.splice.apply(Q(c)?c.B:c.h,d);Bf(a.mb,a.ta);Q(c)||Gf(c);-1!=b&&(a.C.b.splice(b,1),a.C.h.splice(b,1))}
m.zb=function(a,b,c){var d=Df(this,a);if(Q(this)){if(this.A.Na(this.b[d],a)){if(c)this.A.Ma().remove(a,this.A.Ia()?1:this.B[d].length),this.B[d]=this.A.Ia()?b:[b];else{if(this.A.Ia())throw new D(201);if(!hf(this.B[d],b))throw new D(109);}this.A.Ma().add(a,1);return this}this.b.splice(d,0,a);this.B.splice(d,0,this.A.Ia()?b:[b]);this.A.Ma().add(a,1);512==this.b.length?(d=uf(this.A),a=uf(this.A),a.ib=1,a.b=[this.b[256]],a.h=[this,d],a.C=this.C,this.C=a,d.b=this.b.splice(256),d.B=this.B.splice(256),d.C=
a,Bf(d,this.ta),Bf(this,d),d=a):d=this;return d}d=this.A.Na(this.b[d],a)?d+1:d;a=this.h[d].zb(a,b,c);Q(a)||1!=a.b.length||(this.b.splice(d,0,a.b[0]),a.h[1].C=this,a.h[0].C=this,this.h.splice(d,1,a.h[1]),this.h.splice(d,0,a.h[0]));return 512==this.b.length?If(this):this};function If(a){var b=uf(a.A),c=uf(a.A);b.C=a.C;b.ib=a.ib+1;b.b=[a.b[256]];b.h=[a,c];a.b.splice(256,1);c.C=b;c.ib=a.ib;c.b=a.b.splice(256);c.h=a.h.splice(257);c.h.forEach(function(a){a.C=c});a.C=b;Bf(c,a.ta);Bf(a,c);return b}
function Df(a,b){for(var c=0,d=a.b.length;c<d;){var e=c+d>>1;a.A.Td(a.b[e],b)?c=e+1:d=e}return c}function sf(a,b){if(!Q(a)){var c=Df(a,b);a.A.Na(a.b[c],b)&&c++;return sf(a.h[c],b)}return a}
m.Xa=function(a,b,c){function d(a){return a[0]?a[1]?0:1:-1}var e=this.A.Lb(),f=0,h=this.b.length-1,k=this.b,n=d(e.ub(k[f],a)),A=d(e.ub(k[h],a));if(1!=n&&(-1!=n||-1!=A)){var O=function(a,b){var c=a+b>>1;return c==a?c+1:c},ba=function(b,c,f){if(b>=c)return 0==f?c:-1;var h=d(e.ub(k[b],a));if(0==h)return b;if(1==h)return-1;h=O(b,c);if(h==c)return 0==f?c:-1;var n=d(e.ub(k[h],a));return 0==n?ba(b,h,n):-1==n?ba(h+1,c,f):ba(b+1,h,n)},ub=function(b,c){if(b>=c)return b;var f=d(e.ub(k[c],a));if(0==f)return c;
if(-1==f)return b;f=O(b,c);if(f==c)return b;var h=d(e.ub(k[f],a));return 0==h?ub(f,c):1==h?ub(b,f-1):-1};0!=n&&(f=ba(f+1,h,A));-1!=f&&(h=ub(f,h),-1!=h&&h>=f&&Jf(this,b,c,f,h+1))}};function tf(a,b,c,d){if(a.A.Ia())!b.reverse&&b.K?b.K--:c[b.count++]=a.B[d];else for(var e=0;e<a.B[d].length&&b.count<c.length;++e)!b.reverse&&b.K?b.K--:c[b.count++]=a.B[d][e]}function Jf(a,b,c,d,e){for(;d<e&&(b.reverse||!(b.count>=b.W));++d)tf(a,b,c,d)}
m.fill=function(a,b){if(Q(this))for(var c=0;c<this.B.length&&0<a.count;++c)if(0<a.offset){if(a.offset-=this.A.Ia()?1:this.B[c].length,0>a.offset)for(var d=this.B[c].length+a.offset;d<this.B[c].length&&0<a.count;++d)b[a.ke++]=this.B[c][d],a.count--}else if(this.A.Ia())b[a.ke++]=this.B[c],a.count--;else for(d=0;d<this.B[c].length&&0<a.count;++d)b[a.ke++]=this.B[c][d],a.count--;else for(c=0;c<this.h.length&&0<a.count;++c)this.h[c].fill(a,b)};
function yf(a,b){for(var c=b.Ma(),d=a.map(function(a){var d=new zf(a.id(),b);d.b=a.o[0];d.B=a.o[1];d.b.forEach(function(a,e){c.add(a,b.Ia()?1:d.B[e].length)});return d}),e=0;e<d.length-1;++e)Bf(d[e],d[e+1]);return 1<d.length?pf(d[0]):d[0]}m.fd=function(a){return this.A.Lb().fd(this.b[0],a)};function Kf(a){this.Uc=0==a?Lf:Mf;this.Vd=0==a?function(a){return null!=a?a.reverse():null}:function(a){return a||null};this.ae=0==a?Of:Pf}function Mf(a,b){return a>b?1:a<b?-1:0}function Lf(a,b){return Mf(b,a)}function Pf(a,b){return md(a,b)}function Of(a,b){return md(b,a)}m=Kf.prototype;m.ub=function(a,b){var c=this.Vd(b),d=[c.c==E,c.w==E];if(!d[0]){var e=this.Uc(a,c.c);d[0]=c.ea?1==e:-1!=e}d[1]||(e=this.Uc(a,c.w),d[1]=c.la?-1==e:1!=e);return d};m.compare=function(a,b){return this.Uc(a,b)};
m.min=function(a,b){return a<b?1:a==b?0:-1};m.max=function(a,b){return a>b?1:a==b?0:-1};m.Ab=function(a,b){var c=this.ub(a,b);return c[0]&&c[1]};m.fd=function(a,b){return this.Ab(a,b)};m.lf=function(a){return a.filter(function(a){return null!==a}).sort(function(a,c){return this.ae(a,c)}.bind(this))};m.Pd=function(a){return this.Vd(a).c==E};m.od=function(a){a=this.Vd(a);return[a.c,a.w]};m.Gd=function(a){return null!==a};m.toString=function(){return this.compare==Lf?"SimpleComparator_DESC":"SimpleComparator_ASC"};
function Qf(a){Kf.call(this,a);this.Uc=0==a?Rf:Sf}t(Qf,Kf);function Sf(a,b){return null===a?null===b?0:-1:null===b?1:Mf(a,b)}function Rf(a,b){return Sf(b,a)}Qf.prototype.Ab=function(a,b){return null===a?hd(b):Qf.ab.Ab.call(this,a,b)};Qf.prototype.Hb=function(a,b){return null===a?null===b?0:-1:null===b?1:null};Qf.prototype.min=function(a,b){var c=this.Hb(a,b);null===c&&(c=Qf.ab.min.call(this,a,b));return c};Qf.prototype.max=function(a,b){var c=this.Hb(a,b);null===c&&(c=Qf.ab.max.call(this,a,b));return c};function Tf(a){this.sa=a.map(function(a){return new Kf(a)})}function Uf(a,b,c,d){for(var e=0,f=0;f<a.sa.length&&0==e;++f)e=d(a.sa[f],b[f],c[f]);return e}m=Tf.prototype;m.compare=function(a,b){return Uf(this,a,b,function(a,b,e){return b==E||e==E?0:a.compare(b,e)})};m.min=function(a,b){return Uf(this,a,b,function(a,b,e){return a.min(b,e)})};m.max=function(a,b){return Uf(this,a,b,function(a,b,e){return a.max(b,e)})};
m.ub=function(a,b){for(var c=[!0,!0],d=0;d<this.sa.length&&(c[0]||c[1]);++d){var e=this.sa[d].ub(a[d],b[d]);c[0]=c[0]&&e[0];c[1]=c[1]&&e[1]}return c};m.Ab=function(a,b){for(var c=!0,d=0;d<this.sa.length&&c;++d)c=this.sa[d].Ab(a[d],b[d]);return c};m.fd=function(a,b){return this.sa[0].Ab(a[0],b[0])};
m.lf=function(a){var b=a.filter(function(a){return a.every(ga)});a=Array(this.sa.length);for(var c=0;c<a.length;c++)a[c]=b.map(function(a){return a[c]});a.forEach(function(a,b){a.sort(function(a,c){return this.sa[b].ae(a,c)}.bind(this))},this);b=Array(b.length);for(c=0;c<b.length;c++)b[c]=a.map(function(a){return a[c]});return b.sort(function(a,b){for(var c=0,h=0;h<this.sa.length&&0==c;++h)c=this.sa[h].ae(a[h],b[h]);return c}.bind(this))};m.Pd=function(a){return this.sa[0].Pd(a[0])};
m.od=function(a){var b=a.map(function(a,b){return this.sa[b].od(a)[0]},this);a=a.map(function(a,b){return this.sa[b].od(a)[1]},this);return[b,a]};m.Gd=function(a){return a.every(function(a,c){return this.sa[c].Gd(a)},this)};function Vf(a){Tf.call(this,a);this.sa=a.map(function(a){return new Qf(a)})}t(Vf,Tf);function Wf(a){if(1==a.f.length)return new Kf(a.f[0].lb);var b=a.f.map(function(a){return a.lb});return a.f.some(function(a){return a.ba.ic()})?new Vf(b):new Tf(b)};function Xf(a){this.ga=a;this.kb=B();this.Jc=new kf;this.qb=new kf}m=Xf.prototype;m.getName=function(){return this.ga.getName()};m.add=function(a,b){null===a?(this.kb.add(b),this.Jc.add(a,1)):this.ga.add(a,b)};m.set=function(a,b){null===a?(this.kb.clear(),this.Jc.clear(),this.add(a,b)):this.ga.set(a,b)};m.remove=function(a,b){null===a?b?(this.kb.delete(b),this.Jc.remove(a,1)):(this.kb.clear(),this.Jc.clear()):this.ga.remove(a,b)};m.get=function(a){return null===a?C(this.kb):this.ga.get(a)};m.Vc=function(a){return this.ga.Vc(a)};
m.Ma=function(){mf(this.qb,[this.ga.Ma(),this.Jc]);return this.qb};m.Xa=function(a,b,c,d){b=this.ga.Xa(a,b,c,d);return null!=a?b:b.concat(C(this.kb))};m.clear=function(){this.kb.clear();this.ga.clear()};m.eb=function(a){return null===a?0!=this.kb.size:this.ga.eb(a)};m.min=function(){return this.ga.min()};m.max=function(){return this.ga.max()};m.Fa=function(){return[new Sb(-2,C(this.kb))].concat(this.ga.Fa())};m.Lb=function(){return this.ga.Lb()};
function Yf(a,b){for(var c=-1,d=0;d<b.length;++d)if(-2==b[d].id()){c=d;break}if(-1==c)throw new D(102);var d=b[c].o,e=b.slice(0);e.splice(c,1);var c=a(e),f=new Xf(c);d.forEach(function(a){f.kb.add(a)});return f}m.Ia=function(){return this.ga.Ia()};function Zf(a){this.u=a;this.pb=B();this.V=new Kf(1)}m=Zf.prototype;m.getName=g("u");m.add=function(a){if("number"!=typeof a)throw new D(103);this.pb.add(a)};m.set=function(a,b){this.add(a,b)};m.remove=function(a){this.pb.delete(a)};m.get=function(a){return this.eb(a)?[a]:[]};m.min=function(){return this.Hb(this.V.min.bind(this.V))};m.max=function(){return this.Hb(this.V.max.bind(this.V))};
m.Hb=function(a){if(0==this.pb.size)return null;var b=C(this.pb).reduce(function(b,d){return null===b||1==a(d,b)?d:b},null);return[b,[b]]};m.Vc=function(){return this.pb.size};m.Xa=function(a,b,c,d){var e=a||[kd()];a=C(this.pb).filter(function(a){return e.some(function(b){return this.V.Ab(a,b)},this)},this);return jf(a,b,c,d)};m.clear=function(){this.pb.clear()};m.eb=function(a){return this.pb.has(a)};m.Fa=function(){return[new Sb(0,C(this.pb))]};m.Lb=g("V");
function $f(a,b){var c=new Zf(a);b[0].o.forEach(function(a){c.add(a,a)});return c}m.Ia=l(!0);m.Ma=function(){var a=new kf;a.na=this.pb.size;return a};function ag(a){this.Ka=a.l(gc);this.D=a.l(ic);this.U=a.l(hc)}ag.prototype.Ga=function(a){var b=a.ra(),c=function(){if(0==b.length)return w();var a=b.shift();return(a.Cb()?bg(this,a):cg(this,a)).then(c)}.bind(this);return c()};function cg(a,b){var c=a.Ka.Db(0,[b]),d=c.H(b.getName(),b.fb.bind(b),0).get([]).then(function(a){this.U.Wb(b.getName(),a);dg(this,b,a)}.bind(a));c.ia();return d}
function dg(a,b,c){var d=a.D.lc.get(b.getName())||[];c.forEach(function(a){d.forEach(function(b){var c=a.jb(b.getName());b.add(c,a.id())})})}function bg(a,b){var c=a.Ka.Db(0,[b]),d=c.H(b.getName(),b.fb,0).get([]).then(function(a){this.U.Wb(b.getName(),a)}.bind(a)),e=b.Aa().map(function(a){return eg(this,a,c)},a).concat(fg(a,b,c));c.ia();return db(e.concat(d))}
function eg(a,b,c){c=c.H(b.m(),Ub,1);var d=Wf(b);return c.get([]).then(function(a){if(0<a.length){if(gg(b)){var c=xf.bind(void 0,d,b.m(),b.Ac);a=Yf(c,a)}else a=xf(d,b.m(),b.Ac,a);this.D.set(b.Kc,a)}}.bind(a))}function fg(a,b,c){return c.H(Oe(b),Ub,1).get([]).then(function(a){0<a.length&&(a=$f(Oe(b),a),this.D.set(b.getName(),a))}.bind(a))};function hg(){this.X=y();this.lc=y()}hg.prototype.Ga=function(a){a.ra().forEach(function(a){var c=[];this.lc.set(a.getName(),c);var d=Oe(a);if(null===this.get(d)){var e=new Zf(d);c.push(e);this.X.set(d,e)}a.Aa().forEach(function(a){var b;b=Wf(a);b=new nf(a.m(),b,a.Ac);b=gg(a)&&1==a.f.length?new Xf(b):b;c.push(b);this.X.set(a.m(),b)},this)},this);return w()};hg.prototype.get=function(a){return this.X.get(a)||null};
hg.prototype.set=function(a,b){var c=this.lc.get(a)||null;null===c&&(c=[],this.lc.set(a,c));for(var d=null,e=0;e<c.length;e++)if(c[e].getName()==b.getName()){d=e;break}null!==d&&0<c.length?c.splice(d,1,b):c.push(b);this.X.set(b.getName(),b)};function ig(a){this.kc=[];q(a)&&this.add(a)}ig.prototype.toString=function(){return this.kc.map(function(a){return a.toString()}).join(",")};ig.prototype.eb=function(a){return this.kc.some(function(b){return b.contains(a)})};ig.prototype.Gb=g("kc");
ig.prototype.add=function(a){if(0!=a.length)if(a=this.kc.concat(a),1==a.length)this.kc=a;else{a.sort(md);for(var b=[],c=a[0],d=1;d<a.length;++d)if(id(c,a[d])){var e=a[d],f=kd();if(c.c!=E&&e.c!=E){var h=jd(c.c,e.c,!0);1!=h?(f.c=c.c,f.ea=0!=h?c.ea:c.ea&&e.ea):(f.c=e.c,f.ea=e.ea)}c.w!=E&&e.w!=E&&(h=jd(c.w,e.w,!1),-1!=h?(f.w=c.w,f.la=0!=h?c.la:c.la&&e.la):(f.w=e.w,f.la=e.la));c=f}else b.push(c),c=a[d];b.push(c);this.kc=b}};
function jg(a,b){var c=[];a.Gb().map(function(a){return b.Gb().map(function(b){var c;if(id(a,b)){c=kd();var h=jd(a.c,b.c,!0),h=0==h?a.ea?a:b:-1!=h?a:b;c.c=h.c;c.ea=h.ea;a.w==E||b.w==E?b=a.w==E?b:a:(h=jd(a.w,b.w,!1),b=0==h?a.la?a:b:-1==h?a:b);c.w=b.w;c.la=b.la}else c=null;return c})}).forEach(function(a){c=c.concat(a)});return new ig(c.filter(function(a){return null!==a}))};function kg(a,b){var c=[],d=null,e=null;Pd(a,function(a){var h=b(a);null==a.getParent()?e=h:L(d,h);var k=a.getParent();null!==k&&K(k).length==K(d).length&&(k=c.indexOf(d),-1!=k&&c.splice(k,1));1<K(a).length&&c.push(h);d=null===a.h?c[c.length-1]:h});return e}function lg(a){return mg(a,function(a){return null===a.h})}
function ng(a){var b=a.getParent(),c=0;null!==b&&(c=K(b).indexOf(a),b.removeChild(a));var d=K(a).slice();d.forEach(function(d,f){a.removeChild(d);null===b||Md(b,d,c+f)});return{parent:b,children:d}}function og(a,b){K(a).slice().forEach(function(c){a.removeChild(c);L(b,c)});L(a,b)}function pg(a){var b=Ld(a,0);ng(a);og(b,a);return b}
function qg(a,b,c){var d=Ld(a,0),e=K(d).slice();if(!e.some(function(a){return b(a)}))return a;ng(a);e.forEach(function(e,h){if(b(e)){var k=c(a);Nd(d,h);L(k,e);Md(d,k,h)}});return d}function rg(a,b,c,d){var e=a.getParent();null!==e&&(a=K(e).indexOf(a),Nd(e,a),Md(e,c,a));K(b).slice().forEach(function(a){b.removeChild(a);L(d,a)});return c}function mg(a,b,c){function d(a){b(a)&&e.push(a);null!=c&&c(a)||K(a).forEach(d)}var e=[];d(a);return e}
function sg(a,b){var c=b||function(a){return a.toString()+"\n"},d="";Pd(a,function(a){for(var b=0;b<Kd(a);b++)d+="-";d+=c(a)});return d};function tg(a){Qd.call(this);this.Sb=a;this.Ya=!1}t(tg,Qd);m=tg.prototype;m.Mb=function(){return kg(this,function(a){if(a instanceof tg){var b=new tg(a.Sb);b.Ya=a.Ya;a=a.Y();b.oa=a;return b}return a.Mb()})};m.gb=function(a){var b=a||[];Pd(this,function(a){a!=this&&a.gb(b)}.bind(this));a=B(b);return C(a)};m.qd=function(a){this.Ya!=a&&(this.Ya=a,this.Sb="and"==this.Sb?"or":"and",K(this).forEach(function(b){return b.qd(a)}))};
m.eval=function(a){var b=K(this).map(function(b){return b.eval(a)});return ug(this,b)};function ug(a,b){return"and"==a.Sb?sd(b):td(b)}m.toString=function(){return"combined_pred_"+this.Sb.toString()};function vg(a,b,c){Qd.call(this);this.ha=a;this.ka=b;this.F=c;this.Wd=null;a=Hd();this.tc=Id(a,this.ha.G(),this.F);this.ag=a.Pe.get(this.ha.G())||null}t(vg,Qd);m=vg.prototype;m.Mb=function(){var a=new vg(this.ha,this.ka,this.F),b=this.Y();a.oa=b;return a};m.gb=function(a){return null!=a?(a.push(this.ha),a.push(this.ka),a):[this.ha,this.ka]};
m.reverse=function(){var a=this.F;switch(this.F){case "gt":a="lt";break;case "lt":a="gt";break;case "gte":a="lte";break;case "lte":a="gte"}return new vg(this.ka,this.ha,a)};m.eval=function(a){var b=a.entries.filter(function(a){var b=H(a,this.ha);a=H(a,this.ka);return this.tc(b,a)},this);return new F(b,G(a))};m.toString=function(){return"join_pred("+this.ha.m()+" "+this.F+" "+this.ka.m()+")"};
function wg(a,b,c){var d=null,e=null;-1!=G(b).indexOf(I(a.ha.H()))?(d=b,e=c):(d=c,e=b);if(d.entries.length>e.entries.length){a:{b=a.ha;a.ha=a.ka;a.ka=b;b=a.F;switch(a.F){case "gt":b="lt";break;case "lt":b="gt";break;case "gte":b="lte";break;case "lte":b="gte";break;default:break a}a.F=b;a.tc=Id(Hd(),a.ha.G(),a.F)}return[e,d]}return[d,e]}function xg(a){var b={};a.gb().forEach(function(a){b[a.getName()]=null});return b}
function yg(a,b,c){null===a.Wd&&(a.Wd=xg(a.ka.H()));var d=new vd(new Sb(-1,a.Wd),!1);return yd(b,c,d,[I(a.ka.H())])}
function zg(a,b,c,d){var e=[b,c];d||(e=wg(a,b,c));b=e[0];c=e[1];var e=b,f=c,h=a.ha,k=a.ka;d&&(e=c,f=b,h=a.ka,k=a.ha);var n=new Ic,A=[];e.entries.forEach(function(a){var b=String(H(a,h));n.set(b,a)});var O=G(e),ba=G(f);f.entries.forEach(function(a){var b=H(a,k),c=String(b);null!==b&&n.has(c)?n.get(c).forEach(function(b){b=yd(a,ba,b,O);A.push(b)}):d&&A.push(yg(this,a,ba))}.bind(a));a=G(b).concat(G(c));return new F(A,a)}
function Ag(a,b,c,d,e){function f(a,b){var c=new vd(b,1<O.length),c=yd(a,ba,c,O);A.push(c)}var h=d.Sf.H(),k=b,n=c;-1!=G(b).indexOf(I(h))&&(k=c,n=b);var A=[],O=G(n),ba=G(k);k.entries.forEach(function(a){var b=this.ag(H(a,d.gg)),b=d.index.get(b);0!=b.length&&(d.index.Ia()?f(a,e.get(b[0])):ef(e,b).forEach(f.bind(null,a)))},a);a=G(k).concat(G(n));return new F(A,a)};function Bg(a,b,c){return null===b?new Sd(a,b,c):q(b.m)?new vg(a,b,c):new Sd(a,b,c)};var Cg={};r("lf.schema.DataStoreType",Cg);Cg.INDEXED_DB=0;Cg.MEMORY=1;Cg.LOCAL_STORAGE=2;Cg.FIREBASE=3;Cg.WEB_SQL=4;Cg.OBSERVABLE_STORE=5;function Dg(a,b,c,d){this.Kc=a;this.name=b;this.Ac=c;this.f=d}Dg.prototype.m=function(){return this.Kc+"."+this.name};function gg(a){return a.f.some(function(a){return a.ba.ic()})}function R(a,b,c,d){this.u=a;this.pa=c;this.J=b;this.ld=d;this.bb=null}r("lf.schema.Table",R);R.prototype.getName=g("u");R.prototype.getName=R.prototype.getName;R.prototype.Wa=g("bb");
function I(a){return a.bb||a.u}R.prototype.pc=function(a){var b=new this.constructor(this.u);b.bb=a;b.sg=this.sg;return b};R.prototype.as=R.prototype.pc;R.prototype.createRow=R.prototype.vb;R.prototype.deserializeRow=R.prototype.fb;R.prototype.Aa=g("pa");R.prototype.getIndices=R.prototype.Aa;R.prototype.gb=g("J");R.prototype.getColumns=R.prototype.gb;R.prototype.getConstraint=R.prototype.Fb;R.prototype.Cb=g("ld");R.prototype.persistentIndex=R.prototype.Cb;function Oe(a){return a.u+".#"};function S(a,b){this.child=a;this.Kb=b;this.bb=null}m=S.prototype;m.getName=function(){return this.Kb+"("+this.child.getName()+")"};m.m=function(){return this.Kb+"("+this.child.m()+")"};m.H=function(){return this.child.H()};m.toString=function(){return this.m()};m.G=function(){return this.child.G()};m.Wa=g("bb");m.Aa=function(){return[]};m.za=l(null);m.ic=l(!1);m.pc=function(a){this.bb=a;return this};S.prototype.as=S.prototype.pc;
function Eg(a){for(var b=[a];a instanceof S;)b.push(a.child),a=a.child;return b}function Fg(a){this.bb=a||null;this.S=new R("#UnknownTable",[],[],!1)}m=Fg.prototype;m.getName=l("*");m.m=function(){return this.getName()};m.toString=function(){return this.m()};m.H=g("S");m.G=l(4);m.Wa=g("bb");m.Aa=function(){return[]};m.za=l(null);m.ic=l(!1);r("lf.fn.avg",function(a){return new S(a,"AVG")});function Gg(a){return new S(a||new Fg,"COUNT")}r("lf.fn.count",Gg);function Hg(a){return new S(a,"DISTINCT")}r("lf.fn.distinct",Hg);r("lf.fn.max",function(a){return new S(a,"MAX")});r("lf.fn.min",function(a){return new S(a,"MIN")});r("lf.fn.stddev",function(a){return new S(a,"STDDEV")});r("lf.fn.sum",function(a){return new S(a,"SUM")});r("lf.fn.geomean",function(a){return new S(a,"GEOMEAN")});function T(a,b){J.call(this);this.Kf=b}t(T,J);T.prototype.exec=function(a,b){switch(this.Kf){case 1:return Ig(this,a,b);case 0:return Jg(this,a,b);default:return Kg(this,a,b)}};T.prototype.toString=l("dummy_node");T.prototype.Lc=function(){return this.toString()};function Kg(a,b,c){return new v(function(a){a(this.fa([],b,c))}.bind(a))}function Ig(a,b,c){return Ld(a,0).exec(b,c).then(function(a){return this.fa(a,b,c)}.bind(a))}
function Jg(a,b,c){var d=K(a).map(function(a){return a.exec(b,c)});return db(d).then(function(a){var d=[];a.forEach(function(a){for(var b=0;b<a.length;++b)d.push(a[b])});return this.fa(d,b,c)}.bind(a))};function Lg(a){T.call(this,0,1);this.ve=a}t(Lg,T);Lg.prototype.toString=function(){return"aggregation("+this.ve.map(function(a){return a.m()}).toString()+")"};Lg.prototype.fa=function(a){a.forEach(function(a){Mg(new Ng(a,this.ve))},this);return a};function Ng(a,b){this.Ja=a;this.J=b}
function Mg(a){a.J.forEach(function(a){a=Eg(a).reverse();for(var c=1;c<a.length;c++){var d=a[c],e=Eg(d).slice(-1)[0],f=d.child instanceof S?pd(this.Ja,d.child):this.Ja;if(null!==f.Va&&f.Va.has(d.m()))break;f=Og(d.Kb,f,e);e=this.Ja;null===e.Va&&(e.Va=y());e.Va.set(d.m(),f)}},a)}
function Og(a,b,c){var d=null;switch(a){case "MIN":d=Pg(b,c,function(a,b){return b<a?b:a});break;case "MAX":d=Pg(b,c,function(a,b){return b>a?b:a});break;case "DISTINCT":d=Qg(b,c);break;case "COUNT":d=Rg(b,c);break;case "SUM":d=Sg(b,c);break;case "AVG":a=Rg(b,c);0<a&&(d=Sg(b,c)/a);break;case "GEOMEAN":d=Tg(b,c);break;default:d=Ug(b,c)}return d}function Pg(a,b,c){return a.entries.reduce(function(a,e){var f=H(e,b);return null===f?a:null===a?f:c(a,f)},null)}
function Rg(a,b){return b instanceof Fg?a.entries.length:a.entries.reduce(function(a,d){return a+(fa(H(d,b))?0:1)},0)}function Sg(a,b){return Pg(a,b,function(a,b){return b+a})}function Ug(a,b){var c=[];a.entries.forEach(function(a){a=H(a,b);null===a||c.push(a)});return 0==c.length?null:sb.apply(null,c)}function Tg(a,b){var c=0,d=a.entries.reduce(function(a,d){var h=H(d,b);if(0==h||null===h)return a;c++;return a+Math.log(h)},0);return 0==c?null:Math.pow(Math.E,d/c)}
function Qg(a,b){var c=y();a.entries.forEach(function(a){var e=H(a,b);c.set(e,a)});return new F(z(c),G(a))};function Vg(a,b){this.Da=a;this.aa=b}Vg.prototype.hb=g("Da");Vg.prototype.ca=g("aa");function Wg(){J.call(this)}t(Wg,J);function Xg(a,b){J.call(this);this.table=a;this.values=b}t(Xg,Wg);function Yg(a,b){Xg.call(this,a,b)}t(Yg,Xg);function Zg(a){J.call(this);this.table=a}t(Zg,Wg);Zg.prototype.toString=function(){return"delete("+this.table.getName()+")"};function $g(a,b){J.call(this);this.table=a;this.pe=b}t($g,Wg);
$g.prototype.toString=function(){var a=[];this.pe&&(a=this.pe.map(function(a){return a.M.getName()},this));return"update("+this.table.getName()+", ["+a.join(",")+"])"};function ah(a){J.call(this);this.I=a}t(ah,Wg);ah.prototype.toString=function(){return"select("+this.I.toString()+")"};function bh(a){J.call(this);this.table=a}t(bh,Wg);bh.prototype.toString=function(){var a="table_access("+this.table.getName();null===this.table.Wa()||(a+=" as "+this.table.Wa());return a+")"};
function ch(){J.call(this)}t(ch,Wg);ch.prototype.toString=l("cross_product");function dh(a,b){J.call(this);this.f=a;this.Ob=b}t(dh,Wg);dh.prototype.toString=function(){var a="project("+this.f.toString();if(null!==this.Ob)var b=this.Ob.map(function(a){return a.m()}).join(", "),a=a+(", groupBy("+b+")");return a+")"};function eh(a){J.call(this);this.N=a}t(eh,Wg);eh.prototype.toString=function(){return"order_by("+be(this.N)+")"};function fh(a){J.call(this);this.f=a}t(fh,Wg);
fh.prototype.toString=function(){return"aggregation("+this.f.toString()+")"};function gh(a){J.call(this);this.f=a}t(gh,Wg);gh.prototype.toString=function(){return"group_by("+this.f.toString()+")"};function hh(a){J.call(this);this.W=a}t(hh,Wg);hh.prototype.toString=function(){return"limit("+this.W+")"};function ih(a){J.call(this);this.K=a}t(ih,Wg);ih.prototype.toString=function(){return"skip("+this.K+")"};function jh(a,b){J.call(this);this.I=a;this.Qb=b}t(jh,Wg);
jh.prototype.toString=function(){return"join(type: "+(this.Qb?"outer":"inner")+", "+this.I.toString()+")"};function kh(){};function lh(){}t(lh,kh);lh.prototype.ob=function(a){this.$=a;this.Ta(this.$);return this.$};lh.prototype.Ta=function(a){if(a instanceof ah){var b=mh(this,a.I),b=nh(this,b);rg(a,a,b[0],b[1]);a==this.$&&(this.$=b[0]);a=b[0]}K(a).forEach(function(a){this.Ta(a)},this)};function mh(a,b){if(0==K(b).length||"and"!=b.Sb)return[b];var c=K(b).slice().map(function(a){b.removeChild(a);return mh(this,a)},a);return Ea(c)}
function nh(a,b){var c=null,d=null;b.map(function(a,b){var h=new ah(a);0==b?c=h:L(d,h);d=h},a);return[c,d]};function oh(){}t(oh,kh);oh.prototype.ob=function(a,b){if(3>b.c.length)return a;this.$=a;this.Ta(this.$);return this.$};oh.prototype.Ta=function(a){if(a instanceof ch)for(;2<K(a).length;){for(var b=new ch,c=0;2>c;c++){var d=Nd(a,0);L(b,d)}Md(a,b,0)}K(a).forEach(function(a){this.Ta(a)},this)};function ph(){T.call(this,0,0)}t(ph,T);ph.prototype.toString=l("cross_product");ph.prototype.fa=function(a){var b=a[0],c=a[1];a=[];for(var d=G(b),e=G(c),f=0;f<b.entries.length;f++)for(var h=0;h<c.entries.length;h++){var k=yd(b.entries[f],d,c.entries[h],e);a.push(k)}b=G(b).concat(G(c));return[new F(a,b)]};function qh(a,b){fe.call(this,a,b);this.Ea=a.l(kc);this.Ib=a.l(lc)}t(qh,fe);qh.prototype.getPriority=l(2);qh.prototype.Zd=function(a){0==this.G()?rh(this,a):this.Ic()};function rh(a,b){a.nd.forEach(function(a,d){a instanceof ae&&ie(this.Ib,a,b[d])},a)}qh.prototype.Ic=function(){var a=ke(this.Ib,this.ca());0!=a.length&&(a=new he(this.global,a),le(this.Ea,a))};function sh(a){Wd.call(this,a)}t(sh,Wd);sh.prototype.ca=function(){var a=B();a.add(this.c);th(this,this.c.getName(),a);return a};function th(a,b,c){var d=uh(a.ba.info(),b,1);uh(a.ba.info(),b).forEach(c.add.bind(c));d.forEach(function(a){th(this,a.getName(),c)},a)}sh.prototype.clone=function(){var a=new sh(this.ba);Zd(a,this);a.c=this.c;return a};sh.prototype.bind=function(a){sh.ab.bind.call(this,a);$d(this,a);return this};function vh(a){Wd.call(this,a)}t(vh,Wd);vh.prototype.ca=function(){var a=B();a.add(this.Ha);var b=this.ba.info();wh(this.Ha.getName(),b.Xe).forEach(a.add.bind(a));this.ac&&uh(b,this.Ha.getName()).forEach(a.add.bind(a));return a};vh.prototype.clone=function(){var a=new vh(this.ba);Zd(a,this);a.Ha=this.Ha;this.values&&(a.values=this.values instanceof zd?this.values:this.values.slice());a.ac=this.ac;a.bc=this.bc;return a};
vh.prototype.bind=function(a){vh.ab.bind.call(this,a);this.bc&&(this.values=this.bc instanceof zd?a[this.bc.za()]:this.bc.map(function(b){return b instanceof zd?a[b.za()]:b}));return this};function xh(a){Wd.call(this,a)}t(xh,Wd);xh.prototype.ca=function(){var a=B();a.add(this.table);var b=this.set.map(function(a){return a.M.m()}),c=this.ba.info();yh(c,b).forEach(a.add.bind(a));zh(c,b).forEach(a.add.bind(a));return a};xh.prototype.clone=function(){var a=new xh(this.ba);Zd(a,this);a.table=this.table;a.set=this.set?this.set.slice():this.set;return a};xh.prototype.bind=function(a){xh.ab.bind.call(this,a);this.set.forEach(function(b){-1!=b.Qc&&(b.value=a[b.Qc])});$d(this,a);return this};function Ah(a,b){if(null==b)return"NULL";switch(a){case 1:return b?1:0;case 3:case 4:return b;case 0:return"'"+Xb(b)+"'";default:return"'"+b.toString()+"'"}}function Bh(a,b){var c=a.ac?"INSERT OR REPLACE":"INSERT",d=a.Ha.gb(),c=c+(" INTO "+a.Ha.getName()+"("),c=c+d.map(function(a){return a.getName()}).join(", "),c=c+") VALUES (";return a.values.map(function(a){var f=d.map(function(c){var d=a.o[c.getName()];return b?null!=d?"#":"NULL":Ah(c.G(),d)});return c+f.join(", ")+");"}).join("\n")}
function Ch(a){switch(a){case "between":return"BETWEEN";case "eq":return"=";case "gte":return">=";case "gt":return">";case "in":return"IN";case "lte":return"<=";case "lt":return"<";case "match":return"LIKE";case "neq":return"<>";default:return"UNKNOWN"}}function Dh(a,b,c,d){return a instanceof zd?"?"+a.za().toString():d?null!=a?"#":"NULL":"match"==b?"'"+a.toString()+"'":"in"==b?"("+a.map(function(a){return Ah(c,a)}).join(", ")+")":"between"==b?Ah(c,a[0])+" AND "+Ah(c,a[1]):Ah(c,a).toString()}
function Eh(a,b){return K(a).map(function(a){return"("+Fh(a,b)+")"}).join("and"==a.Sb?" AND ":" OR ")}function Gh(a){return[a.ha.m(),Ch(a.F),a.ka.m()].join(" ")}function Fh(a,b){if(a instanceof Sd){var c=a.M.m(),d=Ch(a.F),e=Dh(a.value,a.F,a.M.G(),b);return"="==d&&"NULL"==e?[c,"IS NULL"].join(" "):"<>"==d&&"NULL"==e?[c,"IS NOT NULL"].join(" "):[c,d,e].join(" ")}if(a instanceof tg)return Eh(a,b);if(a instanceof vg)return Gh(a);throw new D(357,typeof a);}
function Hh(a,b){var c=Fh(a,b);return c?" WHERE "+c:""}function Ih(a,b){var c="UPDATE "+a.table.getName()+" SET ",c=c+a.set.map(function(a){var b=a.M.m()+" = ";return-1!=a.Qc?b+"?"+a.Qc.toString():b+Ah(a.M.G(),a.value).toString()}).join(", ");a.s&&(c+=Hh(a.s,b));return c+";"}
function Jh(a,b){var c="*";a.f.length&&(c=a.f.map(function(a){return a.Wa()?a.m()+" AS "+a.Wa():a.m()}).join(", "));c="SELECT "+c+" FROM ";null!=a.Bb&&0!=a.Bb.size?c+=Kh(a,b):(c+=a.c.map(Lh).join(", "),a.s&&(c+=Hh(a.s,b)));if(a.N)var d=a.N.map(function(a){return a.M.m()+(0==a.lb?" DESC":" ASC")}).join(", "),c=c+(" ORDER BY "+d);a.ja&&(d=a.ja.map(function(a){return a.m()}).join(", "),c+=" GROUP BY "+d);a.W&&(c+=" LIMIT "+a.W.toString());a.K&&(c+=" SKIP "+a.K.toString());return c+";"}
function Lh(a){return I(a)!=a.getName()?a.getName()+" AS "+I(a):a.getName()}function Kh(a,b){for(var c=mg(a.s,function(a){return a instanceof vg}),d=c.map(Gh),e=Lh(a.c[0]),f=1;f<a.c.length;f++)var h=Lh(a.c[f]),e=a.Bb.has(c[d.length-f].Y())?e+(" LEFT OUTER JOIN "+h):e+(" INNER JOIN "+h),e=e+(" ON ("+d[d.length-f]+")");c=Ld(a.s,0);c instanceof vg||(e+=" WHERE "+Fh(c,b));return e}
function Mh(a,b){var c=b||!1,d=a.a.clone();if(d instanceof vh)return Bh(d,c);if(d instanceof sh){var e="DELETE FROM "+d.c.getName();d.s&&(e+=Hh(d.s,c));return e+";"}if(d instanceof xh)return Ih(d,c);if(d instanceof ae)return Jh(d,c);throw new D(358,typeof d);};function U(a,b){this.global=a;this.rg=a.l(jc);this.Ea=a.l(kc);this.a=b}r("lf.query.BaseBuilder",U);U.prototype.exec=function(){try{this.cb()}catch(a){return ab(a)}return new v(function(a,b){var c=new qh(this.global,[this.yc()]);le(this.Ea,c).then(function(b){a(nd(b[0]))},b)},this)};U.prototype.exec=U.prototype.exec;U.prototype.Mf=function(){var a=function(a){return a.Lc(this.a)+"\n"}.bind(this);return sg(Nh(this).hb(),a)};U.prototype.explain=U.prototype.Mf;
U.prototype.bind=function(a){this.a.bind(a);return this};U.prototype.bind=U.prototype.bind;U.prototype.zg=function(a){return Mh(this,a)};U.prototype.toSql=U.prototype.zg;U.prototype.cb=aa();function Nh(a){if(null==a.Ye){var b;b=a.rg;var c=a.a,d=b.dg.create(c);b=b.og.create(d,c);a.Ye=b}return a.Ye}U.prototype.yc=function(){return{context:this.a.clone(),be:Nh(this)}};function Oh(a){U.call(this,a,new sh(a.l(mc)))}t(Oh,U);r("lf.query.DeleteBuilder",Oh);Oh.prototype.c=function(a){if(null!=this.a.c)throw new D(515);this.a.c=a;return this};Oh.prototype.from=Oh.prototype.c;Oh.prototype.s=function(a){this.xd();this.a.s=a;return this};Oh.prototype.where=Oh.prototype.s;Oh.prototype.xd=function(){if(null==this.a.c)throw new D(548);if(null!=this.a.s)throw new D(516);};Oh.prototype.cb=function(){Oh.ab.cb.call(this);if(null==this.a.c)throw new D(517);};function Ph(a,b){U.call(this,a,new vh(a.l(mc)));this.a.ac=b||!1}t(Ph,U);r("lf.query.InsertBuilder",Ph);Ph.prototype.cb=function(){Ph.ab.cb.call(this);var a=this.a;if(null==a.Ha||null==a.values)throw new D(518);if(a.ac&&null===a.Ha.Fb().Zc())throw new D(519);};Ph.prototype.Ha=function(a){if(null!=this.a.Ha)throw new D(520);this.a.Ha=a;return this};Ph.prototype.into=Ph.prototype.Ha;
Ph.prototype.values=function(a){if(null!=this.a.values)throw new D(521);a instanceof zd||a.some(function(a){return a instanceof zd})?this.a.bc=a:this.a.values=a;return this};Ph.prototype.values=Ph.prototype.values;function Qh(a){return Rh("and",Array.prototype.slice.call(arguments))}r("lf.op.and",Qh);r("lf.op.or",function(a){return Rh("or",Array.prototype.slice.call(arguments))});function Rh(a,b){var c=new tg(a);b.forEach(function(a){L(c,a)});return c}r("lf.op.not",function(a){a.qd(!0);return a});function V(a,b){U.call(this,a,new ae(a.l(mc)));this.Fe=this.sd=!1;this.a.f=b;Sh(this);Th(this)}t(V,U);r("lf.query.SelectBuilder",V);V.prototype.cb=function(){V.ab.cb.call(this);var a=this.a;if(null==a.c)throw new D(522);if(q(a.Rb)&&!q(a.W)||q(a.Yb)&&!q(a.K))throw new D(523);null!=this.a.ja?Uh(this):Vh(this)};function Sh(a){var b=a.a.f.filter(function(a){return a instanceof S&&"DISTINCT"==a.Kb},a);if(0!=b.length&&(1!=b.length||1!=a.a.f.length))throw new D(524);}
function Uh(a){var b=a.a.f.filter(function(a){return!(a instanceof S)}).map(function(a){return a.m()}),c=!1;if(0==a.a.ja.length||0==a.a.f.length)c=!0;else{var d=a.a.ja.map(function(a){return a.m()});(c=b.some(function(a){return-1==d.indexOf(a)}))||(c=a.a.ja.some(function(a){a=a.G();return 6==a||0==a}))}if(c)throw new D(525);}function Vh(a){var b=a.a.f.some(function(a){return a instanceof S},a);a=a.a.f.some(function(a){return!(a instanceof S)},a)||0==a.a.f.length;if(b&&a)throw new D(526);}
function Th(a){a.a.f.forEach(function(a){if(a instanceof S&&!Wh(a.Kb,a.G()))throw new D(527,a.m());},a)}function Xh(a,b){if(null==a.a.c)throw new D(b);}V.prototype.c=function(a){if(this.Fe)throw new D(515);this.Fe=!0;null==this.a.c&&(this.a.c=[]);this.a.c.push.apply(this.a.c,Array.prototype.slice.call(arguments));return this};V.prototype.from=V.prototype.c;V.prototype.s=function(a){Xh(this,548);if(this.sd)throw new D(516);this.sd=!0;Yh(this,a);return this};V.prototype.where=V.prototype.s;
function Yh(a,b){if(null!=a.a.s){var c=Qh(b,a.a.s);a.a.s=c}else a.a.s=b}V.prototype.Wf=function(a,b){Xh(this,542);if(this.sd)throw new D(547);this.a.c.push(a);Yh(this,b);return this};V.prototype.innerJoin=V.prototype.Wf;V.prototype.bg=function(a,b){Xh(this,542);if(!(b instanceof vg))throw new D(541);if(this.sd)throw new D(547);this.a.c.push(a);null==this.a.Bb&&(this.a.Bb=B());var c=b;I(a)!=I(b.ka.H())&&(c=b.reverse());this.a.Bb.add(c.Y());Yh(this,c);return this};V.prototype.leftOuterJoin=V.prototype.bg;
V.prototype.W=function(a){if(null!=(this.a.W||this.a.Rb))throw new D(528);if(a instanceof zd)this.a.Rb=a;else{if(0>a)throw new D(531);this.a.W=a}return this};V.prototype.limit=V.prototype.W;V.prototype.K=function(a){if(null!=(this.a.K||this.a.Yb))throw new D(529);if(a instanceof zd)this.a.Yb=a;else{if(0>a)throw new D(531);this.a.K=a}return this};V.prototype.skip=V.prototype.K;V.prototype.N=function(a,b){Xh(this,549);null==this.a.N&&(this.a.N=[]);this.a.N.push({M:a,lb:null!=b?b:1});return this};
V.prototype.orderBy=V.prototype.N;V.prototype.ja=function(a){Xh(this,549);if(null!=this.a.ja)throw new D(530);null==this.a.ja&&(this.a.ja=[]);this.a.ja.push.apply(this.a.ja,Array.prototype.slice.call(arguments));return this};V.prototype.groupBy=V.prototype.ja;function Wh(a,b){switch(a){case "COUNT":case "DISTINCT":return!0;case "AVG":case "GEOMEAN":case "STDDEV":case "SUM":return 4==b||3==b;case "MAX":case "MIN":return 4==b||3==b||5==b||2==b}return!1}
V.prototype.clone=function(){var a=new V(this.global,this.a.f);a.a=this.a.clone();a.a.Tc=null;return a};V.prototype.clone=V.prototype.clone;function Zh(a,b){U.call(this,a,new xh(a.l(mc)));this.a.table=b}t(Zh,U);r("lf.query.UpdateBuilder",Zh);Zh.prototype.set=function(a,b){var c={Qc:b instanceof zd?b.za():-1,M:a,value:b};null!=this.a.set?this.a.set.push(c):this.a.set=[c];return this};Zh.prototype.set=Zh.prototype.set;Zh.prototype.s=function(a){this.xd();this.a.s=a;return this};Zh.prototype.where=Zh.prototype.s;Zh.prototype.xd=function(){if(null!=this.a.s)throw new D(516);};
Zh.prototype.cb=function(){Zh.ab.cb.call(this);if(null==this.a.set)throw new D(532);if(this.a.set.some(function(a){return a.value instanceof zd}))throw new D(501);};function $h(a){this.a=a;this.Da=null}$h.prototype.hc=function(){null===this.Da&&(this.Da=this.Xc());return this.Da};function ai(a){$h.call(this,a)}t(ai,$h);ai.prototype.Xc=function(){return this.a.ac?new Yg(this.a.Ha,this.a.values):new Xg(this.a.Ha,this.a.values)};function bi(a){$h.call(this,a)}t(bi,$h);bi.prototype.Xc=function(){var a=new $g(this.a.table,this.a.set),b=null!=this.a.s?new ah(this.a.s.Mb()):null,c=new bh(this.a.table);null===b?L(a,c):(L(b,c),L(a,b));return a};function ci(a,b,c){this.Da=a;this.ce=b;this.Vb=c}ci.prototype.hc=function(){this.Vb.forEach(function(a){this.Da=a.ob(this.Da,this.ce)},this);return this.Da};function di(a,b){$h.call(this,a);this.Vb=b}t(di,$h);di.prototype.Xc=function(){var a=new Zg(this.a.c),b=null!=this.a.s?new ah(this.a.s.Mb()):null,c=new bh(this.a.c);null===b?L(a,c):(L(b,c),L(a,b));return(new ci(a,this.a,this.Vb)).hc()};function ei(){}t(ei,kh);ei.prototype.ob=function(a,b){if(2>b.c.length)return a;this.$=a;this.Ta(this.$,b);return this.$};ei.prototype.Ta=function(a,b){if(a instanceof ah&&a.I instanceof vg){var c=a.I.Y(),d=Ld(a,0);d instanceof ch&&(c=null!=b.Bb&&b.Bb.has(c),c=new jh(a.I,c),rg(a,d,c,c),a==this.$&&(this.$=c),a=c)}K(a).forEach(function(a){this.Ta(a,b)},this)};function fi(){this.Pc=B()}t(fi,kh);fi.prototype.ob=function(a,b){this.Pc.clear();if(!q(b.s))return a;this.$=a;this.Ta(this.$);this.Pc.clear();return this.$};fi.prototype.Ta=function(a){if(gi(a)){var b=a.I instanceof Sd?hi(this,a):ii(this,a);this.Pc.add(a);b==a&&(b=Ld(a,0));null!==b&&(fa(b.getParent())&&(this.$=b),gi(b)&&!this.Pc.has(b)&&this.Ta(b))}else K(a).forEach(function(a){this.Ta(a)},this)};
function ji(a,b,c){var d=b;if(Ld(b,0)instanceof ah)d=pg(b),ji(a,b,c);else if(ki(b)){var e=[],d=qg(b,c,function(a){a=new ah(a.I);e.push(a);return a});e.forEach(function(a){ji(this,a,c)},a)}return d}function hi(a,b){var c=B([I(b.I.M.H())]),d=function(a){return li(this,a,c)}.bind(a);return ji(a,b,d)}function ii(a,b){var c=B([I(b.I.ha.H()),I(b.I.ka.H())]),d=function(a){return li(this,a,c)}.bind(a);return ji(a,b,d)}
function li(a,b,c){var d=B();lg(b).forEach(function(a){d.add(I(a.table))},a);b instanceof bh&&d.add(I(b.table));return nc(d,c)}function gi(a){return a instanceof ah&&!(a.I instanceof tg)}function ki(a){a=Ld(a,0);return a instanceof ch||a instanceof jh};function mi(a,b){$h.call(this,a);this.Vb=b;this.bf=this.Te=this.kf=this.We=this.we=this.Ie=this.jf=this.Ce=this.mf=null}t(mi,$h);
mi.prototype.Xc=function(){ni(this);2<=this.a.c.length&&(this.Ce=new ch);this.jf=null!=this.a.s?new ah(this.a.s.Mb()):null;this.a.N&&(this.We=new eh(this.a.N));null!=this.a.K&&0<this.a.K&&(this.kf=new ih(this.a.K));null!=this.a.W&&(this.Te=new hh(this.a.W));null!=this.a.ja&&(this.Ie=new gh(this.a.ja));oi(this);this.bf=new dh(this.a.f||[],this.a.ja||null);var a=pi(this);return(new ci(a,this.a,this.Vb)).hc()};
function pi(a){for(var b=[a.Te,a.kf,a.bf,a.We,a.we,a.Ie,a.jf,a.Ce],c=null,d=null,e=0;e<b.length;e++){var f=b[e];null!==f&&(null===d?d=f:L(b[c],f),c=e)}a.mf.forEach(function(a){L(b[c],a)});return d}function ni(a){a.mf=a.a.c.map(function(a){return new bh(a)},a)}function oi(a){var b=a.a.f.filter(function(a){return a instanceof S});null!=a.a.N&&a.a.N.forEach(function(a){a.M instanceof S&&b.push(a.M)});0<b.length&&(a.we=new fh(b))};function qi(){this.ie=[new lh,new oh,new fi,new ei];this.Hd=[new lh]}qi.prototype.create=function(a){var b=null;if(a instanceof vh)b=new ai(a);else if(a instanceof sh)b=new di(a,this.Hd);else if(a instanceof ae)b=new mi(a,this.ie);else if(a instanceof xh)b=new bi(a);else throw new D(513);b=b.hc();return new Vg(b,a.ca())};function ri(a){T.call(this,0,1);this.S=a}t(ri,T);ri.prototype.toString=function(){return"delete("+this.S.getName()+")"};ri.prototype.fa=function(a,b){var c=a[0].entries.map(function(a){return a.ua});b.remove(this.S,c);return[rd()]};function si(a,b){T.call(this,0,-1);this.table=b;this.D=a.l(ic)}t(si,T);si.prototype.toString=function(){return"get_row_count("+this.table.getName()+")"};si.prototype.fa=function(){var a=this.D.get(Oe(this.table)),b=new F([],[this.table.getName()]),c=Gg(),a=a.Ma().na;null===b.Va&&(b.Va=y());b.Va.set(c.m(),a);return[b]};function ti(a,b){T.call(this,0,-1);this.U=a.l(hc);this.D=a.l(ic);this.table=b}t(ti,T);ti.prototype.toString=function(){var a="table_access("+this.table.getName();null===this.table.Wa()||(a+=" as "+this.table.Wa());return a+")"};ti.prototype.fa=function(){var a=this.D.get(Oe(this.table)).Xa();return[ud(ef(this.U,a),[I(this.table)])]};function ui(a){this.i=a}t(ui,kh);ui.prototype.ob=function(a,b){this.$=a;if(!this.zd(b))return a;var c=mg(a,function(a){return a instanceof ti})[0],d=new si(this.i,c.table);rg(c,c,d,d);return this.$};ui.prototype.zd=function(a){return 1==a.f.length&&1==a.c.length&&null==a.s&&null==a.W&&null==a.K&&null==a.ja?(a=a.f[0],a instanceof S&&"COUNT"==a.Kb&&a.child instanceof Fg):!1};function vi(a){T.call(this,0,1);this.He=a}t(vi,T);vi.prototype.toString=function(){return"groupBy("+this.He.map(function(a){return a.m()}).toString()+")"};vi.prototype.fa=function(a){return wi(this,a[0])};function wi(a,b){var c=new Ic,d=function(a){return this.He.map(function(b){return H(a,b)},this).join(",")}.bind(a);b.entries.forEach(function(a){c.set(d(a),a)},a);return c.keys().map(function(a){return new F(c.get(a),G(b))},a)};function xi(a,b,c){T.call(this,0,0);this.D=a.l(ic);this.U=a.l(hc);this.I=b;this.Qb=c;this.vd="eq"==this.I.F?0:2;this.Ke=null}t(xi,T);var yi=["hash","index_nested_loop","nested_loop"];xi.prototype.toString=function(){return"join(type: "+(this.Qb?"outer":"inner")+", impl: "+yi[this.vd]+", "+this.I.toString()+")"};
xi.prototype.fa=function(a){switch(this.vd){case 0:return[zg(this.I,a[0],a[1],this.Qb)];case 1:return[Ag(this.I,a[0],a[1],this.Ke,this.U)];default:var b=this.I,c=a[0];a=a[1];var d=this.Qb,e=[c,a];d||(e=wg(b,c,a));c=e[0];a=e[1];for(var e=[],f=G(c),h=G(a),k=c.entries.length,n=a.entries.length,A=n+256-1>>8,O=0;O<A;){for(var ba=0;ba<k;ba++){var ub=!1,Nf=H(c.entries[ba],b.ha);if(null!==Nf)for(var Wb=Math.min(O+1<<8,n),vb=O<<8;vb<Wb;vb++)if(b.tc(Nf,H(a.entries[vb],b.ka))){var ub=!0,Pc=yd(c.entries[ba],
f,a.entries[vb],h);e.push(Pc)}d&&!ub&&e.push(yg(b,c.entries[ba],f))}O++}b=G(c).concat(G(a));return[new F(e,b)]}};function zi(a,b){a.vd=1;var c=a.D.get(b.za().m());a.Ke={Sf:b,gg:b==a.I.ha?a.I.ka:a.I.ha,index:c}};function Ai(a){T.call(this,0,-1);this.cf=a}t(Ai,T);Ai.prototype.toString=function(){return"no_op_step("+G(this.cf[0]).join(",")+")"};Ai.prototype.fa=g("cf");function Bi(){}t(Bi,kh);Bi.prototype.ob=function(a,b){this.$=a;if(!this.zd(b))return a;mg(a,function(a){return a instanceof xi}).forEach(this.qg,this);return this.$};Bi.prototype.zd=function(a){return 1<a.c.length};
Bi.prototype.qg=function(a){if("eq"==a.I.F&&!a.Qb){var b=function(b){if(!(b instanceof ti))return null;b=I(b.table)==I(a.I.ka.H())?a.I.ka:a.I.ha;return fa(b.za())?null:b},c=b(Ld(a,0)),b=b(Ld(a,1));if(null!==c||null!==b){b=null===b?c:b;zi(a,b);var d=new F([],[I(b.H())]);Od(a,new Ai([d]),b==c?0:1)}}};function Ci(a){a=a.map(function(a){return a.Gb()});a=zb.apply(null,a);var b=[];yb(a,function(a){b.push(a)});return b}function Di(a){this.Pb=a}Di.prototype.Yc=function(){return 1==this.Pb.f.length?[kd()]:[this.Pb.f.map(function(){return kd()})]};function Ei(a,b){this.Pb=a;this.Ca=b;this.Dd=this.Re=null}
function Fi(a,b){var c=y();a.Ca.keys().forEach(function(a){var e=this.Ca.get(a).map(function(a){return Xd(b,a)},this),f=new ig([kd()]);e.forEach(function(a){var b=null;"between"==a.F?b=new fd(Vd(a,a.value[0]),Vd(a,a.value[1]),!1,!1):(b=Vd(a,a.value),b="eq"==a.F?new fd(b,b,!1,!1):"gte"==a.F?new fd(b,E,!1,!1):"gt"==a.F?new fd(b,E,!0,!1):"lte"==a.F?new fd(E,b,!1,!1):new fd(E,b,!1,!0));a=a.Ya?gd(b):[b];a=new ig(a);f=jg(f,a)});c.set(a,f)},a);return c}
Ei.prototype.Yc=function(a){if(this.Re==a)return this.Dd;for(var b=Fi(this,a),c=this.Pb.f.length-1;0<=c;c--){var d=this.Pb.f[c];if(null!==(b.get(d.ba.getName())||null))break;b.set(d.ba.getName(),new ig([kd()]))}this.Dd=1==this.Pb.f.length?z(b)[0].Gb():Ci(Gi(this,b));this.Re=a;return this.Dd};function Gi(a,b){var c=y(),d=0;a.Pb.f.forEach(function(a){c.set(a.ba.getName(),d);d++});return Rb(b).sort(function(a,b){return c.get(a)-c.get(b)}).map(function(a){return b.get(a)})};function Hi(a,b){this.nf=b;this.D=a.l(ic)}function Ii(a,b,c){c=c.filter(a.Xf,a);if(0==c.length)return null;a=Ji(a,c);if(0==a.length)return null;if(1==a.length)return a[0];var d=Number.MAX_VALUE;return a.reduce(function(a,c){var h=Ki(c,b);return h<d?(d=h,c):a},null)}
function Ji(a,b){return a.nf.Aa().map(function(a){a=new Li(this.D,a);Mi(a,b);return a},a).filter(function(a){if(null===a.Ca)a=!1;else{for(var b=!1,e=!0,f=0;f<a.yb.f.length;f++){var h=a.Ca.has(a.yb.f[f].ba.getName());if(b&&h){e=!1;break}h||(b=!0)}a=e}return a})}Hi.prototype.Xf=function(a){var b;if(b=a instanceof Sd)Td(a),b=null!==a.value&&("between"==a.F||"eq"==a.F||"gt"==a.F||"gte"==a.F||"lt"==a.F||"lte"==a.F);return b?a.M.H()==this.nf:!1};
function Li(a,b){this.D=a;this.yb=b;this.Tf=B(this.yb.f.map(function(a){return a.ba.getName()}));this.Sd=this.Ca=null}function Ni(a){null===a.Sd&&(a.Sd=new Ei(a.yb,a.Ca));return a.Sd}function Mi(a,b){b.forEach(function(a){var b=a.gb()[0].getName();this.Tf.has(b)&&(null===this.Ca&&(this.Ca=new Ic),this.Ca.set(b,a.Y()))},a)}function Ki(a,b){var c=Ni(a).Yc(b),d=a.D.get(a.yb.m());return c.reduce(function(a,b){return a+d.Vc(b)},0)};function Oi(a,b,c,d){T.call(this,0,-1);this.D=a.l(ic);this.index=b;this.Qe=c;this.ge=d;this.Oc=this.Nc=!1}t(Oi,T);Oi.prototype.toString=function(){return"index_range_scan("+this.index.m()+", ?, "+(this.ge?"reverse":"natural")+(this.Nc?", limit:?":"")+(this.Oc?", skip:?":"")+")"};Oi.prototype.Lc=function(a){var b=this.toString(),c=this.Qe.Yc(a),b=b.replace("?",c.toString());this.Nc&&(b=b.replace("?",a.W.toString()));this.Oc&&(b=b.replace("?",a.K.toString()));return b};
Oi.prototype.fa=function(a,b,c){a=this.Qe.Yc(c);b=this.D.get(this.index.m());c=(1==a.length&&a[0]instanceof fd&&ld(a[0])?jf(b.get(a[0].c),!1,this.Nc?c.W:void 0,this.Oc?c.K:void 0):b.Xa(a,this.ge,this.Nc?c.W:void 0,this.Oc?c.K:void 0)).map(function(a){return new Sb(a,{})},this);return[ud(c,[this.index.Kc])]};function Pi(a){T.call(this,0,1);this.md=a}t(Pi,T);Pi.prototype.toString=l("select(?)");Pi.prototype.Lc=function(a){a=Xd(a,this.md);return this.toString().replace("?",a.toString())};Pi.prototype.fa=function(a,b,c){return[Xd(c,this.md).eval(a[0])]};function Qi(a,b){T.call(this,0,1);this.U=a.l(hc);this.S=b}t(Qi,T);Qi.prototype.toString=function(){return"table_access_by_row_id("+this.S.getName()+")"};Qi.prototype.fa=function(a){return[ud(ef(this.U,od(a[0])),[I(this.S)])]};function Ri(a){this.i=a}t(Ri,kh);Ri.prototype.ob=function(a,b){this.$=a;mg(a,function(a){return a instanceof ti}).forEach(function(a){var d=Si(a);if(0!=d.length){var e=Ii(new Hi(this.i,a.table),b,d.map(function(a){return Xd(b,a.md)}));if(null!==e){var f=y();d.forEach(function(a){f.set(a.md,a)},this);this.$=Ti(this,e,f,a)}}},this);return this.$};function Si(a){var b=[];for(a=a.getParent();a;)a instanceof Pi&&b.push(a),a=a.getParent();return b}
function Ti(a,b,c,d){(null===b.Ca?[]:b.Ca.values()).map(function(a){return c.get(a)}).forEach(ng);b=new Oi(a.i,b.yb,Ni(b),!1);a=new Qi(a.i,d.table);L(a,b);rg(d,d,a,b);return b.hb()};function Ui(a,b){T.call(this,0,-1);this.D=a.l(ic);this.S=b}t(Ui,T);Ui.prototype.toString=function(){return"insert("+this.S.getName()+")"};Ui.prototype.fa=function(a,b,c){Vi(this.S,c.values,this.D);b.zb(this.S,c.values);return[ud(c.values,[this.S.getName()])]};function Vi(a,b,c){a=a.Fb().Zc();if(null===a?0:a.f[0].autoIncrement){var d=a.f[0].ba.getName();c=c.get(a.m()).max();var e=null===c?0:c[0];b.forEach(function(a){if(0==a.o[d]||null==a.o[d])e++,a.o[d]=e})}}
function Wi(a,b){T.call(this,0,-1);this.D=a.l(ic);this.S=b}t(Wi,T);Wi.prototype.toString=function(){return"insert_replace("+this.S.getName()+")"};Wi.prototype.fa=function(a,b,c){Vi(this.S,c.values,this.D);b.Od(this.S,c.values);return[ud(c.values,[this.S.getName()])]};function Xi(){T.call(this,0,1)}t(Xi,T);Xi.prototype.toString=l("limit(?)");Xi.prototype.Lc=function(a){return this.toString().replace("?",a.W.toString())};Xi.prototype.fa=function(a,b,c){a[0].entries.splice(c.W);return a};function Yi(a){T.call(this,0,1);this.N=a}t(Yi,T);m=Yi.prototype;m.toString=function(){return"order_by("+be(this.N)+")"};m.fa=function(a){if(1==a.length){var b;b=a[0];for(var c=null,d=0;d<this.N.length;d++){var e=Hg(this.N[d].M);if(null!==b.Va&&b.Va.has(e.m())){c=e;break}}b=c;(null===b?a[0]:pd(a[0],b)).entries.sort(this.Jf.bind(this))}else a.sort(this.tg.bind(this));return a};
m.V=function(a,b){var c=null,d=null,e=null,f=-1;do f++,e=this.N[f].M,c=this.N[f].lb,d=a(e),e=b(e);while(d==e&&f+1<this.N.length);d=d<e?-1:d>e?1:0;return 1==c?d:-d};m.tg=function(a,b){return this.V(function(b){return b instanceof S?pd(a,b):H(a.entries[a.entries.length-1],b)},function(a){return a instanceof S?pd(b,a):H(b.entries[b.entries.length-1],a)})};m.Jf=function(a,b){return this.V(function(b){return H(a,b)},function(a){return H(b,a)})};function Zi(a,b){this.Ja=a;this.J=b}function $i(a){return a.J.some(function(a){return a instanceof S},a)?aj(a):bj(a)}function aj(a){if(1==a.J.length&&"DISTINCT"==a.J[0].Kb)return a=pd(a.Ja,a.J[0]).entries.map(function(a){var b=new vd(new Sb(-1,{}),1<this.Ja.L.size);xd(b,this.J[0],H(a,this.J[0].child));return b},a),new F(a,[]);var b=new vd(new Sb(-1,{}),1<a.Ja.L.size);a.J.forEach(function(a){var d=a instanceof S?pd(this.Ja,a):H(this.Ja.entries[0],a);xd(b,a,d)},a);return new F([b],G(a.Ja))}
function bj(a){var b=Array(a.Ja.entries.length),c=1<a.Ja.L.size;a.Ja.entries.forEach(function(a,e){b[e]=new vd(new Sb(a.ua.id(),{}),c);this.J.forEach(function(c){xd(b[e],c,H(a,c))},this)},a);return new F(b,G(a.Ja))}function cj(a,b){var c=a.map(function(a){return $i(new Zi(a,b)).entries[0]});return new F(c,G(a[0]))};function dj(a,b){T.call(this,0,1);this.f=a;this.Ob=b}t(dj,T);dj.prototype.toString=function(){var a="project("+this.f.toString();if(null!==this.Ob)var b=this.Ob.map(function(a){return a.m()}).join(", "),a=a+(", groupBy("+b+")");return a+")"};dj.prototype.fa=function(a){0==a.length?a=[rd()]:1==a.length?(a=a[0],a=[0==this.f.length?a:$i(new Zi(a,this.f))]):a=[cj(a,this.f)];return a};function ej(a){return a.f.some(function(a){return a instanceof S})||null!==a.Ob};function fj(){T.call(this,0,1)}t(fj,T);fj.prototype.toString=l("skip(?)");fj.prototype.Lc=function(a){return this.toString().replace("?",a.K.toString())};fj.prototype.fa=function(a,b,c){return[new F(a[0].entries.slice(c.K),G(a[0]))]};function gj(){}t(gj,kh);gj.prototype.ob=function(a,b){if(!q(b.W)&&!q(b.K))return a;var c=hj(a);if(null===c)return a;mg(a,function(a){return a instanceof Xi||a instanceof fj}).forEach(function(a){a instanceof Xi?c.Nc=!0:c.Oc=!0;ng(a)},this);return c.hb()};function hj(a){a=mg(a,function(a){return a instanceof Oi},function(a){return a instanceof dj&&ej(a)||a instanceof Yi||1!=K(a).length||a instanceof Pi});return 0<a.length?a[0]:null};function ij(a){this.i=a}t(ij,kh);ij.prototype.ob=function(a,b){var c=jj(a,b);if(null===c)return a;var d;a:{var e=c;d=kj(Ld(c,0));if(null!==d){var f;f=c.N;for(var h=null,k=d.table.Aa(),n=0;n<k.length&&null===h;n++)h=lj(k[n],f);f=h;if(null===f){d=e;break a}e=new Oi(this.i,f.yb,new Di(f.yb),f.Ne);f=new Qi(this.i,d.table);L(f,e);ng(c);e=rg(d,d,f,e)}d=e}if(d==c)a:if(d=c,e=mj(Ld(c,0)),null!==e){f=lj(e.index,c.N);if(null===f)break a;e.ge=f.Ne;d=ng(c).parent}return d.hb()};
function mj(a){a=mg(a,function(a){return a instanceof Oi},function(a){return 1!=K(a).length});return 0<a.length?a[0]:null}function kj(a){a=mg(a,function(a){return a instanceof ti},function(a){return 1!=K(a).length});return 0<a.length?a[0]:null}function jj(a,b){return q(b.N)?mg(a,function(a){return a instanceof Yi})[0]:null}function lj(a,b){if(a.f.length!=b.length||!b.every(function(b,c){return b.M.getName()==a.f[c].ba.getName()}))return null;var c=nj(b,a);return c[0]||c[1]?{yb:a,Ne:c[1]}:null}
function nj(a,b){var c=a.reduce(function(a,b){return a<<1|(0==b.lb?0:1)},0),d=b.f.reduce(function(a,b){return a<<1|(0==b.lb?0:1)},0),c=c^d;return[0==c,c==Math.pow(2,Math.max(a.length,b.f.length))-1]};function oj(a,b,c){this.Da=a;this.ce=b;this.Vb=c}oj.prototype.hc=function(){this.Vb.forEach(function(a){this.Da=a.ob(this.Da,this.ce)},this);return this.Da};function pj(a,b){T.call(this,0,1);this.S=a;this.Cg=b}t(pj,T);pj.prototype.toString=function(){return"update("+this.S.getName()+")"};pj.prototype.fa=function(a,b){var c=a[0].entries.map(function(a){var b=this.S.fb(a.ua.Fa());this.Cg.forEach(function(a){b.o[a.M.getName()]=a.value},this);return b},this);b.update(this.S,c);return[rd()]};function qj(a){this.i=a;this.ie=[new Bi,new Ri(this.i),new ij(this.i),new gj,new ui(this.i)];this.Hd=[new Ri(this.i)]}qj.prototype.create=function(a,b){var c=a.hb();if(c instanceof Yg||c instanceof Xg)return rj(this,a,b);if(c instanceof dh||c instanceof hh||c instanceof ih)return rj(this,a,b,this.ie);if(c instanceof Zg||c instanceof $g)return rj(this,a,b,this.Hd);throw new D(8);};function rj(a,b,c,d){a=kg(b.hb(),a.fg.bind(a));null!=d&&(a=(new oj(a,c,d)).hc());return new ce(a,b.ca())}
qj.prototype.fg=function(a){if(a instanceof dh)return new dj(a.f,a.Ob);if(a instanceof gh)return new vi(a.f);if(a instanceof fh)return new Lg(a.f);if(a instanceof eh)return new Yi(a.N);if(a instanceof ih)return new fj;if(a instanceof hh)return new Xi;if(a instanceof ah)return new Pi(a.I.Y());if(a instanceof ch)return new ph;if(a instanceof jh)return new xi(this.i,a.I,a.Qb);if(a instanceof bh)return new ti(this.i,a.table);if(a instanceof Zg)return new ri(a.table);if(a instanceof $g)return new pj(a.table,
a.pe);if(a instanceof Yg)return new Wi(this.i,a.table);if(a instanceof Xg)return new Ui(this.i,a.table);throw new D(514);};function sj(a){this.dg=new qi;this.og=new qj(a)};function tj(){this.Ue=y()}function uj(a,b){var c=a.Ue.get(b.getName())||null;null===c&&(c=new vj,a.Ue.set(b.getName(),c));return c}function wj(a,b,c,d){c.forEach(function(a){a=uj(this,a);0==d?(a.Za=null,a.uc=b):3==d?(null===a.Xb&&(a.Xb=B()),a.Xb.add(b),null===a.Qa&&(a.Qa=B()),a.Qa.delete(b)):1==d?(null===a.Qa&&(a.Qa=B()),a.Qa.add(b)):2==d&&(a.Za=b)},a)}
function xj(a,b,c,d){var e=!0;c.forEach(function(a){if(e){a=uj(this,a);var c=null===a.Qa||0==a.Qa.size;e=0==d?(null===a.Xb||0==a.Xb.size)&&c&&null===a.uc&&null!==a.Za&&a.Za==b:3==d?null===a.uc&&null===a.Za&&null!==a.Qa&&a.Qa.has(b):1==d?null===a.Za:c&&(null===a.Za||a.Za==b)}},a);return e}function yj(a,b,c,d){var e=xj(a,b,c,d);e&&wj(a,b,c,d);return e}tj.prototype.releaseLock=function(a,b){b.forEach(function(b){uj(this,b).releaseLock(a)},this)};
function zj(a,b){b.forEach(function(a){uj(this,a).Za=null},a)}function vj(){this.Xb=this.Qa=this.Za=this.uc=null}vj.prototype.releaseLock=function(a){this.uc==a&&(this.uc=null);this.Za==a&&(this.Za=null);null===this.Qa||this.Qa.delete(a);null===this.Xb||this.Xb.delete(a)};function Aj(){this.Ub=new Bj;this.Bc=new tj}function le(a,b){(2>b.getPriority()||2>b.getPriority())&&zj(a.Bc,b.ca());a.Ub.zb(b);Cj(a);return b.Nb().da}function Cj(a){for(var b=a.Ub.Gb(),c=0;c<b.length;c++){var d=b[c],e=!1;if(e=0==d.G()?Dj(a,d,1,3):Dj(a,d,2,0))a.Ub.remove(d),e=a,d.exec().then(e.lg.bind(e,d),e.kg.bind(e,d))}}function Dj(a,b,c,d){var e=!1;yj(a.Bc,b.Y(),b.ca(),c)&&(e=yj(a.Bc,b.Y(),b.ca(),d));return e}Aj.prototype.lg=function(a,b){this.Bc.releaseLock(a.Y(),a.ca());a.Nb().resolve(b);Cj(this)};
Aj.prototype.kg=function(a,b){this.Bc.releaseLock(a.Y(),a.ca());a.Nb().reject(b);Cj(this)};function Bj(){this.Ub=[]}Bj.prototype.zb=function(a){hf(this.Ub,a,function(a,c){var d=a.getPriority()-c.getPriority();return 0==d?a.Y()-c.Y():d})};Bj.prototype.Gb=function(){return this.Ub.slice()};Bj.prototype.remove=function(a){var b=this.Ub;a=xa(b,a);var c;(c=0<=a)&&Array.prototype.splice.call(b,a,1);return c};function Ej(a,b){this.Id=Hd();this.de=a;this.hd=b;this.J=Fj(this)}function Fj(a){if(0<a.de.f.length)return a.de.f;var b=[];a.de.c.forEach(function(a){a.gb().forEach(function(a){b.push(a)})});return b}Ej.prototype.V=function(a,b){return this.J.every(function(c){return Id(this.Id,c.G(),"eq")(H(a,c),H(b,c))},this)};
function Gj(a,b,c){var d=null===b?[]:b.entries,e=ob(d,c.entries,a.V.bind(a),function(a){return d[a]});b=[];for(var f=0,h=0;h<d.length;h++){var k=d[h];e[f]==k?f++:(k=a.hd.splice(f,1),k=Hj(h,k,0,a.hd),b.push(k))}e=ob(d,c.entries,a.V.bind(a),function(a,b){return c.entries[b]});for(h=f=0;h<c.entries.length;h++)k=c.entries[h],e[f]==k?f++:(a.hd.splice(h,0,k.ua.o),k=Hj(h,[],1,a.hd),b.push(k));return b}function Hj(a,b,c,d){return{Eg:c,index:a,object:d,Hg:b,type:"splice"}};function Ij(){this.fc=y()}Ij.prototype.ud=function(a,b){var c=ka(a.a).toString(),d=this.fc.get(c)||null;null===d&&(d=new Jj(a),this.fc.set(c,d));d.ud(b)};Ij.prototype.ee=function(a,b){var c=ka(a.a).toString(),d=this.fc.get(c)||null;d.ee(b);0<d.Dc.size||this.fc.delete(c)};function ke(a,b){var c=B();b.forEach(function(a){c.add(a.getName())});var d=[];a.fc.forEach(function(a){a=a.yc();a.context.c.some(function(a){return c.has(a.getName())})&&d.push(a)});return d}
function ie(a,b,c){b=ka(null!=b.Tc?b.Tc:b).toString();a=a.fc.get(b)||null;null!==a&&Kj(a,c)}function Jj(a){this.zf=a;this.Dc=B();this.ig=[];this.Se=null;this.Hf=new Ej(a.a,this.ig)}Jj.prototype.ud=function(a){this.Dc.has(a)||this.Dc.add(a)};Jj.prototype.ee=function(a){return this.Dc.delete(a)};Jj.prototype.yc=function(){var a=this.zf;return{context:a.a,be:Nh(a)}};function Kj(a,b){var c=Gj(a.Hf,a.Se,b);a.Se=b;0<c.length&&a.Dc.forEach(function(a){a(c)})};function Lj(a,b){var c=a.l(mc),d=b||{},e=new df(c);a.nb(hc,e);var e=null,f=!1;null!=d.storeType?e=d.storeType:(q(Qb)||(Qb=new Pb),e=Qb,e=e.Uf?0:e.Dg?4:1);switch(e){case 0:e=new Ke(a,c);break;case 1:e=new Re(c);break;case 5:e=new Te(c);break;case 4:e=new af(a,c,d.webSqlDbSize);break;case 3:e=new xe(c,d.firebase);f=!0;break;default:throw new D(300);}a.nb(gc,e);var h=new hg;a.nb(ic,h);return e.Ga(d.onUpgrade).then(function(){var b=new sj(a);a.nb(jc,b);b=new Aj;a.nb(kc,b);b=new Ij;a.nb(lc,b);return h.Ga(c)}).then(function(){if(f){var b=
new me(a);b.Ka.subscribe(b.Xd.bind(b))}return(new ag(a)).Ga(c)})};function Mj(a){this.i=a;this.g=a.l(mc);this.aa=B(this.g.ra());this.$a=x()}m=Mj.prototype;m.exec=function(){var a=this.i.l(ic),b=this.i.l(hc),c={};this.g.ra().forEach(function(d){var f=a.get(Oe(d)).Xa(),f=ef(b,f).map(function(a){return a.o});c[d.getName()]=f});var d={name:this.g.name(),version:this.g.version(),tables:c},d=new vd(new Sb(-1,d),!0);return w([new F([d],[])])};m.G=l(0);m.ca=g("aa");m.Nb=g("$a");m.Y=function(){return ka(this)};m.getPriority=l(0);function Nj(a,b){this.i=a;this.g=a.l(mc);this.aa=B(this.g.ra());this.$a=x();this.xa=b;this.Ka=a.l(gc);this.U=a.l(hc);this.D=a.l(ic)}m=Nj.prototype;
m.exec=function(){if(!(this.Ka instanceof Ke||this.Ka instanceof Re||this.Ka instanceof af))throw new D(300);var a;a:{a=this.g.ra();for(var b=0;b<a.length;++b)if(0<this.D.get(Oe(a[b])).Ma().na){a=!1;break a}a=!0}if(!a)throw new D(110);if(this.g.name()!=this.xa.name||this.g.version()!=this.xa.version)throw new D(111);if(null==this.xa.tables)throw new D(112);return Oj(this)};m.G=l(1);m.ca=g("aa");m.Nb=g("$a");m.Y=function(){return ka(this)};m.getPriority=l(0);
function Oj(a){var b=new ad(a.i,a.aa),b=a.Ka.Db(a.G(),C(a.aa),b),c;for(c in a.xa.tables){var d=a.g.table(c),e=a.xa.tables[c].map(function(a){return d.vb(a)}),f=b.H(c,d.fb,0);a.U.Wb(c,e);var h=a.D.lc.get(c)||[];e.forEach(function(a){h.forEach(function(b){var c=a.jb(b.getName());b.add(c,a.id())})});f.put(e)}return b.ia()};function Pj(a,b){this.i=a;this.Ka=a.l(gc);this.Ea=a.l(kc);this.Ib=a.l(lc);this.aa=B(b);this.Oa=new ad(this.i,this.aa);this.$a=x();this.vc=x();this.se=x()}m=Pj.prototype;m.exec=function(){this.se.resolve();return this.vc.da};m.G=l(1);m.ca=g("aa");m.Nb=g("$a");m.Y=function(){return ka(this)};m.getPriority=l(2);function Qj(a){le(a.Ea,a);return a.se.da}
function Rj(a,b){var c=b.yc();return c.be.hb().exec(a.Oa,c.context).then(function(a){return nd(a[0])},function(a){this.Oa.Jb();var b=new ib(a.name);this.vc.reject(b);throw a;}.bind(a))}m.ia=function(){this.Ka.Db(this.G(),C(this.aa),this.Oa).ia().then(function(){this.Ic();this.vc.resolve()}.bind(this),function(a){this.Oa.Jb();this.vc.reject(a)}.bind(this));return this.$a.da};m.Jb=function(){this.Oa.Jb();this.vc.resolve();return this.$a.da};
m.Ic=function(){var a=ke(this.Ib,this.aa);0!=a.length&&(a=new he(this.i,a),le(this.Ea,a))};function Sj(a){this.i=a;this.Ea=a.l(kc);this.Mc=null;this.Ra=0;0==Tj.size&&(Tj.set(0,B([1,4])),Tj.set(1,B([2])),Tj.set(2,B([3,5,6])),Tj.set(3,B([2,7])),Tj.set(4,B([7])),Tj.set(5,B([7])),Tj.set(6,B([7])))}r("lf.proc.Transaction",Sj);var Tj=y();function Uj(a,b){var c=Tj.get(a.Ra)||null;if(null===c||!c.has(b))throw new D(107,a.Ra,b);a.Ra=b}
Sj.prototype.exec=function(a){Uj(this,4);var b=[];try{a.forEach(function(a){a.cb();b.push(a.yc())},this)}catch(c){return Uj(this,7),ab(c)}a=new qh(this.i,b);return le(this.Ea,a).then(function(a){Uj(this,7);return a.map(function(a){return nd(a)})}.bind(this),function(a){Uj(this,7);throw a;}.bind(this))};Sj.prototype.exec=Sj.prototype.exec;Sj.prototype.xf=function(a){Uj(this,1);this.Mc=new Pj(this.i,a);return Qj(this.Mc).then(function(){Uj(this,2)}.bind(this))};Sj.prototype.begin=Sj.prototype.xf;
Sj.prototype.wf=function(a){Uj(this,3);return Rj(this.Mc,a).then(function(a){Uj(this,2);return a}.bind(this),function(a){Uj(this,7);throw a;}.bind(this))};Sj.prototype.attach=Sj.prototype.wf;Sj.prototype.ia=function(){Uj(this,5);return this.Mc.ia().then(function(){Uj(this,7)}.bind(this))};Sj.prototype.commit=Sj.prototype.ia;Sj.prototype.Jb=function(){Uj(this,6);return this.Mc.Jb().then(function(){Uj(this,7)}.bind(this))};Sj.prototype.rollback=Sj.prototype.Jb;function W(a){this.i=a;this.g=a.l(mc);this.ed=!1}r("lf.proc.Database",W);W.prototype.Ga=function(a){this.i.nb(mc,this.g);return Lj(this.i,a).then(function(){this.ed=!0;this.Ea=this.i.l(kc);return this}.bind(this))};W.prototype.init=W.prototype.Ga;W.prototype.xb=g("g");W.prototype.getSchema=W.prototype.xb;function Vj(a){if(!a.ed)throw new D(2);}W.prototype.select=function(a){Vj(this);return new V(this.i,1!=arguments.length||null!=arguments[0]?Array.prototype.slice.call(arguments):[])};
W.prototype.select=W.prototype.select;W.prototype.zb=function(){Vj(this);return new Ph(this.i)};W.prototype.insert=W.prototype.zb;W.prototype.Od=function(){Vj(this);return new Ph(this.i,!0)};W.prototype.insertOrReplace=W.prototype.Od;W.prototype.update=function(a){Vj(this);return new Zh(this.i,a)};W.prototype.update=W.prototype.update;W.prototype.delete=function(){Vj(this);return new Oh(this.i)};W.prototype["delete"]=W.prototype.delete;
W.prototype.observe=function(a,b){Vj(this);this.i.l(lc).ud(a,b)};W.prototype.observe=W.prototype.observe;W.prototype.unobserve=function(a,b){Vj(this);this.i.l(lc).ee(a,b)};W.prototype.unobserve=W.prototype.unobserve;W.prototype.Ff=function(){Vj(this);return new Sj(this.i)};W.prototype.createTransaction=W.prototype.Ff;W.prototype.close=function(){try{this.i.l(gc).close()}catch(a){}this.i.clear();this.ed=!1};W.prototype.close=W.prototype.close;
W.prototype.Nf=function(){Vj(this);var a=new Mj(this.i);return le(this.Ea,a).then(function(a){return nd(a[0])[0]})};W.prototype["export"]=W.prototype.Nf;W.prototype.import=function(a){Vj(this);a=new Nj(this.i,a);return le(this.Ea,a).then(l(null))};W.prototype["import"]=W.prototype.import;function X(a,b,c,d,e,f){this.S=a;this.u=b;this.Oe=c;this.Me=d;this.pf=e;this.bb=f||null}r("lf.schema.BaseColumn",X);m=X.prototype;m.getName=g("u");m.m=function(){return I(this.S)+"."+this.u};m.toString=function(){return this.m()};m.H=g("S");m.G=g("pf");X.prototype.getType=X.prototype.G;X.prototype.Wa=g("bb");X.prototype.Aa=function(){null==this.pa&&(this.pa=[],this.H().Aa().forEach(function(a){-1!=a.f.map(function(a){return a.ba.getName()}).indexOf(this.u)&&this.pa.push(a)},this));return this.pa};
X.prototype.za=function(){if(!q(this.ga)){var a=this.Aa().filter(function(a){return 1!=a.f.length?!1:a.f[0].ba.getName()==this.getName()},this);this.ga=0<a.length?a[0]:null}return this.ga};X.prototype.ic=g("Me");X.prototype.isNullable=X.prototype.ic;X.prototype.Ac=g("Oe");X.prototype.Na=function(a){return Bg(this,a,"eq")};X.prototype.eq=X.prototype.Na;X.prototype.Ve=function(a){return Bg(this,a,"neq")};X.prototype.neq=X.prototype.Ve;X.prototype.Td=function(a){return Bg(this,a,"lt")};
X.prototype.lt=X.prototype.Td;X.prototype.eg=function(a){return Bg(this,a,"lte")};X.prototype.lte=X.prototype.eg;X.prototype.Pf=function(a){return Bg(this,a,"gt")};X.prototype.gt=X.prototype.Pf;X.prototype.Qf=function(a){return Bg(this,a,"gte")};X.prototype.gte=X.prototype.Qf;X.prototype.match=function(a){return Bg(this,a,"match")};X.prototype.match=X.prototype.match;X.prototype.yf=function(a,b){return Bg(this,[a,b],"between")};X.prototype.between=X.prototype.yf;
X.prototype.Rf=function(a){return Bg(this,a,"in")};X.prototype["in"]=X.prototype.Rf;X.prototype.$f=function(){return this.Na(null)};X.prototype.isNull=X.prototype.$f;X.prototype.Zf=function(){return this.Ve(null)};X.prototype.isNotNull=X.prototype.Zf;X.prototype.pc=function(a){return new X(this.S,this.u,this.Oe,this.Me,this.pf,a)};X.prototype.as=X.prototype.pc;function Wj(){this.pd=y()}var Xj;Wj.prototype.clear=function(){this.pd.clear()};Wj.prototype.clear=Wj.prototype.clear;Wj.prototype.nb=function(a,b){this.pd.set(a.toString(),b);return b};Wj.prototype.registerService=Wj.prototype.nb;Wj.prototype.l=function(a){var b=this.pd.get(a.toString())||null;if(null===b)throw new D(7,a.toString());return b};Wj.prototype.getService=Wj.prototype.l;Wj.prototype.Rd=function(a){return this.pd.has(a.toString())};Wj.prototype.isRegistered=Wj.prototype.Rd;function Yj(a){this.g=a;this.Ad=new Ic;this.fe=new Ic;this.Xe=new Ic;this.Be=y();this.h=new Ic;this.xe=new Ic;this.df=new Ic;this.Ae=new Ic;Zj(this)}function Zj(a){a.g.ra().forEach(function(a){var c=a.getName();a.Fb().Nd().forEach(function(d){this.Xe.set(c,this.g.table(d.Pa));this.h.set(d.Pa,a);0==d.action?(this.fe.set(d.Pa,d),this.df.set(d.Pa,a)):(this.Ad.set(d.Pa,d),this.xe.set(d.Pa,a));this.Be.set(a.getName()+"."+d.tb,d.Pa);this.Ae.set(d.Pa+"."+d.Fc,a.getName())},this)},a)}
function Rc(a,b,c){if(null!=c)return 1==c?a.Ad.get(b):a.fe.get(b);c=a.Ad.get(b);a=a.fe.get(b);return null===c&&null===a?null:(c||[]).concat(a||[])}function wh(a,b){var c=b.get(a);return null===c?[]:c}function yh(a,b){var c=B();b.forEach(function(a){(a=this.Be.get(a))&&c.add(a)},a);return C(c).map(function(a){return this.g.table(a)},a)}function uh(a,b,c){return null!=c?0==c?wh(b,a.df):wh(b,a.xe):wh(b,a.h)}
function zh(a,b){var c=B();b.forEach(function(a){(a=this.Ae.get(a))&&a.forEach(function(a){c.add(a)})},a);return C(c).map(function(a){return this.g.table(a)},a)};function ak(a,b,c){this.pg=a;this.hg=b;this.Of=c}r("lf.schema.Constraint",ak);ak.prototype.Zc=g("pg");ak.prototype.getPrimaryKey=ak.prototype.Zc;ak.prototype.Nd=g("Of");ak.prototype.getForeignKeys=ak.prototype.Nd;function bk(a,b,c){var d=a.ref.split(".");if(2!=d.length)throw new D(540,c);this.ze=b;this.tb=a.local;this.Pa=d[0];this.Fc=d[1];this.name=b+"."+c;this.action=a.action;this.timing=a.timing};function Y(a){ck(a);this.Id=Hd();this.u=a;this.J=y();this.rd=B();this.mc=B();this.gd=B();this.Ba=null;this.pa=y();this.ld=!1;this.wb=[]}r("lf.schema.TableBuilder",Y);function dk(a){this.name=a.name;this.lb=a.order;this.autoIncrement=a.autoIncrement}var ek=B([0,6]);function ck(a){if(!/^[A-Za-z_][A-Za-z0-9_]*$/.test(a))throw new D(502,a);}function fk(a,b){if(b==a.u)throw new D(546,b);if(a.J.has(b)||a.pa.has(b)||a.mc.has(b))throw new D(503,a.u+"."+b);}
function gk(a,b){var c=!1;b.forEach(function(a){var b=this.J.get(a.name);c=c||a.autoIncrement;if(a.autoIncrement&&3!=b)throw new D(504);},a);if(c&&1<b.length)throw new D(505);}function hk(a){if(null!==a.Ba){var b=a.pa.get(a.Ba).map(function(a){return a.name}),c=0;if(a.wb.some(function(a,e){c=e;return-1!=b.indexOf(a.tb)},a))throw new D(543,a.wb[c].name);}}
function ik(a){if(null!==a.Ba){var b=function(a){return a.name},c=JSON.stringify(a.pa.get(a.Ba).map(b));a.pa.forEach(function(a,e){if(e!=this.Ba){var f=a.map(b);if(JSON.stringify(f)==c)throw new D(544,this.u+"."+e);}},a)}}function jk(a){null===a.Ba||a.pa.get(a.Ba).forEach(function(a){if(this.gd.has(a.name))throw new D(545,this.u+"."+a.name);},a)}Y.prototype.rf=function(a,b){ck(a);fk(this,a);this.J.set(a,b);ek.has(b)&&this.ue([a]);return this};Y.prototype.addColumn=Y.prototype.rf;
Y.prototype.tf=function(a,b){var c=this.u;this.Ba="pk"+(c[0].toUpperCase()+c.substring(1));ck(this.Ba);fk(this,this.Ba);c=kk(this,a,!0,void 0,b);gk(this,c);1==c.length&&this.rd.add(c[0].name);this.mc.add(this.Ba);this.pa.set(this.Ba,c);return this};Y.prototype.addPrimaryKey=Y.prototype.tf;
Y.prototype.sf=function(a,b){ck(a);fk(this,a);var c=new bk(b,this.u,a);q(c.action)||(c.action=0);q(c.timing)||(c.timing=0);if(1==c.action&&1==c.timing)throw new D(506);if(!this.J.has(c.tb))throw new D(540,a);this.wb.push(c);this.te(a,[c.tb],this.rd.has(c.tb));return this};Y.prototype.addForeignKey=Y.prototype.sf;Y.prototype.uf=function(a,b){ck(a);fk(this,a);var c=kk(this,b,!0);1==c.length&&(this.rd.add(c[0].name),lk(this,c[0].name));this.pa.set(a,c);this.mc.add(a);return this};
Y.prototype.addUnique=Y.prototype.uf;function lk(a,b){a.wb.forEach(function(a){a.tb==b&&this.mc.add(a.name.split(".")[1])},a)}Y.prototype.ue=function(a){kk(this,a,!1).forEach(function(a){this.gd.add(a.name)},this);return this};Y.prototype.addNullable=Y.prototype.ue;Y.prototype.te=function(a,b,c,d){ck(a);fk(this,a);b=kk(this,b,!0,d);c&&this.mc.add(a);this.pa.set(a,b);return this};Y.prototype.addIndex=Y.prototype.te;Y.prototype.Cb=ca("ld");Y.prototype.persistentIndex=Y.prototype.Cb;
Y.prototype.xb=function(){hk(this);ik(this);jk(this);return new (mk(this))};Y.prototype.getSchema=Y.prototype.xb;function nk(a){return a.wb}function kk(a,b,c,d,e){var f=b,f="string"==typeof b[0]?b.map(function(a){return new dk({name:a,order:null!=d?d:1,autoIncrement:e||!1})}):b.map(function(a){return new dk(a)});f.forEach(function(a){if(!this.J.has(a.name))throw new D(508,this.u,a.name);if(c){var b=this.J.get(a.name);if(0==b||6==b)throw new D(509,this.u,a.name);}},a);return f}
function mk(a){function b(){function b(c){return a.pa.get(c).map(function(a){return{ba:this[a.name],lb:a.lb,autoIncrement:a.autoIncrement}},this)}var d=Rb(a.J).map(function(b){this[b]=new X(this,b,a.rd.has(b),a.gd.has(b),a.J.get(b));return this[b]},this),e=Rb(a.pa).map(function(d){return new Dg(a.u,d,a.mc.has(d),b.call(this,d))},this);R.call(this,a.u,d,e,a.ld);var f=null===a.Ba?null:new Dg(a.u,a.Ba,!0,b.call(this,a.Ba)),h=d.filter(function(b){return!a.gd.has(b.getName())});this.Bf=new ak(f,h,a.wb);
this.gf=ok(a,d,e)}t(b,R);b.prototype.vb=function(a){return new this.gf(Tb++,a)};b.prototype.createRow=b.prototype.vb;b.prototype.fb=function(a){var b={};this.gb().forEach(function(e){var f=e.getName();e=e.G();var h=a.value[f];if(0==e)if(e=h,null!=e&&""!=e){0!=e.length%2&&(e="0"+e);for(var h=new ArrayBuffer(e.length/2),k=new Uint8Array(h),n=0,A=0;n<e.length;n+=2)k[A++]=parseInt(e.substr(n,2),16);e=h}else e=null;else e=2==e?null!=h?new Date(h):null:h;b[f]=e},this);return new this.gf(a.id,b)};b.prototype.deserializeRow=
b.prototype.fb;b.prototype.Fb=g("Bf");b.prototype.getConstraint=b.prototype.Fb;return b}
function ok(a,b,c){function d(a,d){this.J=b;this.pa=c;Sb.call(this,a,d)}t(d,Sb);d.prototype.De=function(){var a={};this.J.forEach(function(b){a[b.getName()]=b.ic()?null:Hc[b.G()]});return a};d.prototype.of=function(){var a={};this.J.forEach(function(b){var c=b.getName();b=b.G();var d=this.o[c];a[c]=0==b?null!=d?Xb(d):null:2==b?null!=d?d.getTime():null:6==b?null!=d?d:null:d},this);return a};var e=function(a){var b=this.J.get(a.getName()),c=this.Id.Pe.get(b)||null;return function(b){return c(b[a.getName()])}}.bind(a),
f=function(a){var b=a.map(function(a){return e(a.ba)});return function(a){return b.map(function(b){return b(a)})}}.bind(a),h={};c.forEach(function(a){var b=a.m();a=1==a.f.length?e(a.f[0].ba):f(a.f);h[b]=a});d.prototype.jb=function(a){return-1!=a.indexOf("#")?this.id():h.hasOwnProperty(a)?h[a](this.o):null};return d};function pk(a,b){this.g=new Z(a,b);this.rb=y();this.wc=!1;this.j=null}r("lf.schema.Builder",pk);function qk(a,b){b.wb.forEach(function(a){var d=a.Pa;if(!this.rb.has(d))throw new D(536,a.name);var d=this.rb.get(d).xb(),e=a.Fc;if(!d.hasOwnProperty(e))throw new D(537,a.name);if(b.xb()[a.tb].G()!=d[e].G())throw new D(538,a.name);if(!d[e].Ac())throw new D(539,a.name);},a)}
pk.prototype.Af=function(a){a.wb.forEach(function(a){nk(this.rb.get(a.Pa)).forEach(function(c){if(c.tb==a.Fc)throw new D(534,a.name);},this)},this)};function rk(a){a.wc||(a.rb.forEach(function(a){qk(this,a);a=a.xb();this.g.L.set(a.getName(),a)},a),z(a.rb).forEach(a.Af,a),sk(a),a.rb.clear(),a.wc=!0)}function tk(a,b,c){b.qe||(b.qe=!0,b.Yd=!0,b.Ee.forEach(function(a){a=c.get(a);if(!a.qe)tk(this,a,c);else if(a.Yd&&b!=a)throw new D(533);},a));b.Yd=!1}
function sk(a){var b=y();a.g.L.forEach(function(a,d){b.set(d,new uk(d))},a);a.rb.forEach(function(a,d){a.wb.forEach(function(a){b.get(a.Pa).Ee.add(d)})});z(b).forEach(function(a){tk(this,a,b)},a)}function uk(a){this.Yd=this.qe=!1;this.Ee=B();this.Kc=a}pk.prototype.xb=function(){this.wc||rk(this);return this.g};pk.prototype.getSchema=pk.prototype.xb;pk.prototype.Ge=function(){var a=new fc("ns_"+this.g.name()),b;Xj||(Xj=new Wj);b=Xj;var c=null;b.Rd(a)?c=b.l(a):(c=new Wj,b.nb(a,c));return c};
pk.prototype.getGlobal=pk.prototype.Ge;pk.prototype.connect=function(a){if(null!==this.j&&this.j.ed)throw new D(113);if(null===this.j){var b=this.Ge();b.Rd(mc)||b.nb(mc,this.xb());this.j=new W(b)}return this.j.Ga(a)};pk.prototype.connect=pk.prototype.connect;pk.prototype.Ef=function(a){if(this.rb.has(a))throw new D(503,a);if(this.wc)throw new D(535);this.rb.set(a,new Y(a));return this.rb.get(a)};pk.prototype.createTable=pk.prototype.Ef;
pk.prototype.je=function(a){if(this.wc)throw new D(535);this.g.je(a);return this};pk.prototype.setPragma=pk.prototype.je;function Z(a,b){this.u=a;this.$b=b;this.L=y();this.af={If:!1}}r("lf.schema.DatabaseSchema",Z);Z.prototype.name=g("u");Z.prototype.name=Z.prototype.name;Z.prototype.version=g("$b");Z.prototype.version=Z.prototype.version;Z.prototype.ra=function(){return z(this.L)};Z.prototype.tables=Z.prototype.ra;Z.prototype.table=function(a){if(!this.L.has(a))throw new D(101,a);return this.L.get(a)};
Z.prototype.table=Z.prototype.table;Z.prototype.info=function(){this.Le||(this.Le=new Yj(this));return this.Le};Z.prototype.$e=g("af");Z.prototype.pragma=Z.prototype.$e;Z.prototype.je=ca("af");r("lf.schema.create",function(a,b){return new pk(a,b)});v.prototype.catch=v.prototype.me;v.prototype["catch"]=v.prototype.catch;
try{if(module){module.exports=lf;}}catch(e){}}.bind(window))()
//# sourceMappingURL=lovefield.es6.js.map
