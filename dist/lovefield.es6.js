if(!self.window){window=this;}
(function(){'use strict';function aa(){return function(){}}function ba(a){return function(b){this[a]=b}}function g(a){return function(){return this[a]}}function l(a){return function(){return a}}var m,p=this;function q(a){return void 0!==a}function da(){}
function ea(a){var b=typeof a;if("object"==b)if(a){if(a instanceof Array)return"array";if(a instanceof Object)return b;var c=Object.prototype.toString.call(a);if("[object Window]"==c)return"object";if("[object Array]"==c||"number"==typeof a.length&&"undefined"!=typeof a.splice&&"undefined"!=typeof a.propertyIsEnumerable&&!a.propertyIsEnumerable("splice"))return"array";if("[object Function]"==c||"undefined"!=typeof a.call&&"undefined"!=typeof a.propertyIsEnumerable&&!a.propertyIsEnumerable("call"))return"function"}else return"null";
else if("function"==b&&"undefined"==typeof a.call)return"object";return b}function fa(a){return null===a}function ga(a){return null!=a}function ha(a){var b=ea(a);return"array"==b||"object"==b&&"number"==typeof a.length}function ia(a){return"string"==typeof a}function ja(a){return"function"==ea(a)}function ka(a){return a[la]||(a[la]=++ma)}var la="closure_uid_"+(1E9*Math.random()>>>0),ma=0;function na(a,b,c){return a.call.apply(a.bind,arguments)}
function oa(a,b,c){if(!a)throw Error();if(2<arguments.length){var d=Array.prototype.slice.call(arguments,2);return function(){var c=Array.prototype.slice.call(arguments);Array.prototype.unshift.apply(c,d);return a.apply(b,c)}}return function(){return a.apply(b,arguments)}}function pa(a,b,c){pa=Function.prototype.bind&&-1!=Function.prototype.bind.toString().indexOf("native code")?na:oa;return pa.apply(null,arguments)}
function qa(a,b){var c=Array.prototype.slice.call(arguments,1);return function(){var b=c.slice();b.push.apply(b,arguments);return a.apply(this,b)}}function r(a,b){var c=a.split("."),d=p;c[0]in d||!d.execScript||d.execScript("var "+c[0]);for(var e;c.length&&(e=c.shift());)!c.length&&q(b)?d[e]=b:d=d[e]?d[e]:d[e]={}}
function t(a,b){function c(){}c.prototype=b.prototype;a.ab=b.prototype;a.prototype=new c;a.prototype.constructor=a;a.Hg=function(a,c,f){for(var h=Array(arguments.length-2),k=2;k<arguments.length;k++)h[k-2]=arguments[k];return b.prototype[c].apply(a,h)}};function ra(a){if(Error.captureStackTrace)Error.captureStackTrace(this,ra);else{var b=Error().stack;b&&(this.stack=b)}a&&(this.message=String(a))}t(ra,Error);ra.prototype.name="CustomError";var sa=String.prototype.trim?function(a){return a.trim()}:function(a){return a.replace(/^[\s\xa0]+|[\s\xa0]+$/g,"")};
function ta(a){var b=0,c=sa(String(ua)).split(".");a=sa(String(a)).split(".");for(var d=Math.max(c.length,a.length),e=0;0==b&&e<d;e++){var f=c[e]||"",h=a[e]||"",k=/(\d*)(\D*)/g,n=/(\d*)(\D*)/g;do{var z=k.exec(f)||["","",""],O=n.exec(h)||["","",""];if(0==z[0].length&&0==O[0].length)break;b=va(0==z[1].length?0:parseInt(z[1],10),0==O[1].length?0:parseInt(O[1],10))||va(0==z[2].length,0==O[2].length)||va(z[2],O[2])}while(0==b)}return b}function va(a,b){return a<b?-1:a>b?1:0};function wa(a,b,c){this.eg=c;this.If=a;this.wg=b;this.nd=0;this.gd=null}wa.prototype.get=function(){var a;0<this.nd?(this.nd--,a=this.gd,this.gd=a.next,a.next=null):a=this.If();return a};wa.prototype.put=function(a){this.wg(a);this.nd<this.eg&&(this.nd++,a.next=this.gd,this.gd=a)};var xa=Array.prototype.indexOf?function(a,b,c){return Array.prototype.indexOf.call(a,b,c)}:function(a,b,c){c=null==c?0:0>c?Math.max(0,a.length+c):c;if(ia(a))return ia(b)&&1==b.length?a.indexOf(b,c):-1;for(;c<a.length;c++)if(c in a&&a[c]===b)return c;return-1},ya=Array.prototype.forEach?function(a,b,c){Array.prototype.forEach.call(a,b,c)}:function(a,b,c){for(var d=a.length,e=ia(a)?a.split(""):a,f=0;f<d;f++)f in e&&b.call(c,e[f],f,a)},za=Array.prototype.map?function(a,b,c){return Array.prototype.map.call(a,
b,c)}:function(a,b,c){for(var d=a.length,e=Array(d),f=ia(a)?a.split(""):a,h=0;h<d;h++)h in f&&(e[h]=b.call(c,f[h],h,a));return e},Ba=Array.prototype.reduce?function(a,b,c,d){d&&(b=pa(b,d));return Array.prototype.reduce.call(a,b,c)}:function(a,b,c,d){var e=c;ya(a,function(c,h){e=b.call(d,e,c,h,a)});return e},Ca=Array.prototype.some?function(a,b,c){return Array.prototype.some.call(a,b,c)}:function(a,b,c){for(var d=a.length,e=ia(a)?a.split(""):a,f=0;f<d;f++)if(f in e&&b.call(c,e[f],f,a))return!0;return!1};
function Da(a,b,c){return 2>=arguments.length?Array.prototype.slice.call(a,b):Array.prototype.slice.call(a,b,c)}function Ea(a){for(var b=[],c=0;c<a;c++)b[c]=0;return b}function Fa(a){for(var b=[],c=0;c<arguments.length;c++){var d=arguments[c];if("array"==ea(d))for(var e=0;e<d.length;e+=8192)for(var f=Fa.apply(null,Da(d,e,e+8192)),h=0;h<f.length;h++)b.push(f[h]);else b.push(d)}return b};var Ga;a:{var Ha=p.navigator;if(Ha){var Ia=Ha.userAgent;if(Ia){Ga=Ia;break a}}Ga=""}function u(a){return-1!=Ga.indexOf(a)};function Ja(){return u("Opera")||u("OPR")}function Ka(){return(u("Chrome")||u("CriOS"))&&!Ja()&&!u("Edge")};function La(a){p.setTimeout(function(){throw a;},0)}var Ma;
function Na(){var a=p.MessageChannel;"undefined"===typeof a&&"undefined"!==typeof window&&window.postMessage&&window.addEventListener&&!u("Presto")&&(a=function(){var a=document.createElement("IFRAME");a.style.display="none";a.src="";document.documentElement.appendChild(a);var b=a.contentWindow,a=b.document;a.open();a.write("");a.close();var c="callImmediate"+Math.random(),d="file:"==b.location.protocol?"*":b.location.protocol+"//"+b.location.host,a=pa(function(a){if(("*"==d||a.origin==d)&&a.data==
c)this.port1.onmessage()},this);b.addEventListener("message",a,!1);this.port1={};this.port2={postMessage:function(){b.postMessage(c,d)}}});if("undefined"!==typeof a&&!u("Trident")&&!u("MSIE")){var b=new a,c={},d=c;b.port1.onmessage=function(){if(q(c.next)){c=c.next;var a=c.Ae;c.Ae=null;a()}};return function(a){d.next={Ae:a};d=d.next;b.port2.postMessage(0)}}return"undefined"!==typeof document&&"onreadystatechange"in document.createElement("SCRIPT")?function(a){var b=document.createElement("SCRIPT");
b.onreadystatechange=function(){b.onreadystatechange=null;b.parentNode.removeChild(b);b=null;a();a=null};document.documentElement.appendChild(b)}:function(a){p.setTimeout(a,0)}};function Oa(){this.wd=this.oc=null}var Qa=new wa(function(){return new Pa},function(a){a.reset()},100);Oa.prototype.add=function(a,b){var c=Qa.get();c.set(a,b);this.wd?this.wd.next=c:this.oc=c;this.wd=c};Oa.prototype.remove=function(){var a=null;this.oc&&(a=this.oc,this.oc=this.oc.next,this.oc||(this.wd=null),a.next=null);return a};function Pa(){this.next=this.scope=this.Md=null}Pa.prototype.set=function(a,b){this.Md=a;this.scope=b;this.next=null};
Pa.prototype.reset=function(){this.next=this.scope=this.Md=null};function Ra(a,b){Sa||Ta();Ua||(Sa(),Ua=!0);Va.add(a,b)}var Sa;function Ta(){if(p.Promise&&p.Promise.resolve){var a=p.Promise.resolve(void 0);Sa=function(){a.then(Wa)}}else Sa=function(){var a=Wa;!ja(p.setImmediate)||p.Window&&p.Window.prototype&&p.Window.prototype.setImmediate==p.setImmediate?(Ma||(Ma=Na()),Ma(a)):p.setImmediate(a)}}var Ua=!1,Va=new Oa;function Wa(){for(var a=null;a=Va.remove();){try{a.Md.call(a.scope)}catch(b){La(b)}Qa.put(a)}Ua=!1};function v(a,b){this.Ra=0;this.gf=void 0;this.Vc=this.cc=this.B=null;this.fd=this.Kd=!1;if(a!=da)try{var c=this;a.call(b,function(a){Xa(c,2,a)},function(a){Xa(c,3,a)})}catch(d){Xa(this,3,d)}}function Za(){this.next=this.context=this.jc=this.Hc=this.child=null;this.zd=!1}Za.prototype.reset=function(){this.context=this.jc=this.Hc=this.child=null;this.zd=!1};var $a=new wa(function(){return new Za},function(a){a.reset()},100);function ab(a,b,c){var d=$a.get();d.Hc=a;d.jc=b;d.context=c;return d}
function w(a){if(a instanceof v)return a;var b=new v(da);Xa(b,2,a);return b}function bb(a){return new v(function(b,c){c(a)})}function cb(a,b,c){db(a,b,c,null)||Ra(qa(b,a))}function eb(a){return new v(function(b,c){var d=a.length,e=[];if(d)for(var f=function(a,c){d--;e[a]=c;0==d&&b(e)},h=function(a){c(a)},k=0,n;k<a.length;k++)n=a[k],cb(n,qa(f,k),h);else b(e)})}function x(){var a,b,c=new v(function(c,e){a=c;b=e});return new fb(c,a,b)}
v.prototype.then=function(a,b,c){return gb(this,ja(a)?a:null,ja(b)?b:null,c)};v.prototype.then=v.prototype.then;v.prototype.$goog_Thenable=!0;v.prototype.oe=function(a,b){return gb(this,null,a,b)};function hb(a,b){a.cc||2!=a.Ra&&3!=a.Ra||ib(a);a.Vc?a.Vc.next=b:a.cc=b;a.Vc=b}
function gb(a,b,c,d){var e=ab(null,null,null);e.child=new v(function(a,h){e.Hc=b?function(c){try{var e=b.call(d,c);a(e)}catch(z){h(z)}}:a;e.jc=c?function(b){try{var e=c.call(d,b);!q(e)&&b instanceof jb?h(b):a(e)}catch(z){h(z)}}:h});e.child.B=a;hb(a,e);return e.child}v.prototype.Cg=function(a){this.Ra=0;Xa(this,2,a)};v.prototype.Dg=function(a){this.Ra=0;Xa(this,3,a)};
function Xa(a,b,c){0==a.Ra&&(a==c&&(b=3,c=new TypeError("Promise cannot resolve to itself")),a.Ra=1,db(c,a.Cg,a.Dg,a)||(a.gf=c,a.Ra=b,a.B=null,ib(a),3!=b||c instanceof jb||kb(a,c)))}function db(a,b,c,d){if(a instanceof v)return hb(a,ab(b||da,c||null,d)),!0;var e;if(a)try{e=!!a.$goog_Thenable}catch(h){e=!1}else e=!1;if(e)return a.then(b,c,d),!0;e=typeof a;if("object"==e&&null!=a||"function"==e)try{var f=a.then;if(ja(f))return lb(a,f,b,c,d),!0}catch(h){return c.call(d,h),!0}return!1}
function lb(a,b,c,d,e){function f(a){k||(k=!0,d.call(e,a))}function h(a){k||(k=!0,c.call(e,a))}var k=!1;try{b.call(a,h,f)}catch(n){f(n)}}function ib(a){a.Kd||(a.Kd=!0,Ra(a.Nf,a))}function mb(a){var b=null;a.cc&&(b=a.cc,a.cc=b.next,b.next=null);a.cc||(a.Vc=null);return b}
v.prototype.Nf=function(){for(var a=null;a=mb(this);){var b=this.Ra,c=this.gf;if(3==b&&a.jc&&!a.zd)for(var d=void 0,d=this;d&&d.fd;d=d.B)d.fd=!1;if(a.child)a.child.B=null,nb(a,b,c);else try{a.zd?a.Hc.call(a.context):nb(a,b,c)}catch(e){ob.call(null,e)}$a.put(a)}this.Kd=!1};function nb(a,b,c){2==b?a.Hc.call(a.context,c):a.jc&&a.jc.call(a.context,c)}function kb(a,b){a.fd=!0;Ra(function(){a.fd&&ob.call(null,b)})}var ob=La;function jb(a){ra.call(this,a)}t(jb,ra);jb.prototype.name="cancel";
function fb(a,b,c){this.da=a;this.resolve=b;this.reject=c};/*

 Copyright 2014 The Lovefield Project Authors. All Rights Reserved.

 Licensed under the Apache License, Version 2.0 (the "License");
 you may not use this file except in compliance with the License.
 You may obtain a copy of the License at

     http://www.apache.org/licenses/LICENSE-2.0

 Unless required by applicable law or agreed to in writing, software
 distributed under the License is distributed on an "AS IS" BASIS,
 WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 See the License for the specific language governing permissions and
 limitations under the License.
*/
function y(a,b){this.oa=a;this.o=b||this.Fe()}var pb=0;m=y.prototype;m.id=g("oa");function qb(a){return a.o}m.Fe=function(){return{}};m.qf=g("o");m.Fa=function(){return{id:this.oa,value:this.qf()}};m.Fb=function(a){return"#"==a.substr(-1)?this.oa:null};function rb(a){return new y(a.id,a.value)}function sb(a){return new y(pb++,a||{})}function tb(a){if(null==a)return null;a=new Uint8Array(a);for(var b="",c=0;c<a.length;++c)var d=a[c].toString(16),b=b+(2>d.length?"0"+d:d);return b};function ub(a){this.type=a}function vb(a){y.call(this,-1,a)}t(vb,y);function wb(a,b,c,d){c=c||function(a,b){return a==b};d=d||function(b){return a[b]};for(var e=a.length,f=b.length,h=[],k=0;k<e+1;k++)h[k]=[],h[k][0]=0;for(var n=0;n<f+1;n++)h[0][n]=0;for(k=1;k<=e;k++)for(n=1;n<=f;n++)c(a[k-1],b[n-1])?h[k][n]=h[k-1][n-1]+1:h[k][n]=Math.max(h[k-1][n],h[k][n-1]);for(var z=[],k=e,n=f;0<k&&0<n;)c(a[k-1],b[n-1])?(z.unshift(d(k-1,n-1)),k--,n--):h[k-1][n]>h[k][n-1]?k--:n--;return z}function xb(a){return Ba(arguments,function(a,c){return a+c},0)}
function yb(a){return xb.apply(null,arguments)/arguments.length}function Ab(a){var b=arguments.length;if(2>b)return 0;var c=yb.apply(null,arguments);return xb.apply(null,za(arguments,function(a){return Math.pow(a-c,2)}))/(b-1)}function Bb(a){return Math.sqrt(Ab.apply(null,arguments))};var Cb="StopIteration"in p?p.StopIteration:{message:"StopIteration",stack:""};function Db(){}Db.prototype.next=function(){throw Cb;};Db.prototype.te=function(){return this};function Eb(a){if(a instanceof Db)return a;if("function"==typeof a.te)return a.te(!1);if(ha(a)){var b=0,c=new Db;c.next=function(){for(;;){if(b>=a.length)throw Cb;if(b in a)return a[b++];b++}};return c}throw Error("Not implemented");}
function Fb(a,b){if(ha(a))try{ya(a,b,void 0)}catch(c){if(c!==Cb)throw c;}else{a=Eb(a);try{for(;;)b.call(void 0,a.next(),void 0,a)}catch(c){if(c!==Cb)throw c;}}}function Gb(a){if(Ca(arguments,function(a){return!a.length})||!arguments.length)return new Db;var b=new Db,c=arguments,d=Ea(c.length);b.next=function(){if(d){for(var a=za(d,function(a,b){return c[b][a]}),b=d.length-1;0<=b;b--){if(d[b]<c[b].length-1){d[b]++;break}if(0==b){d=null;break}d[b]=0}return a}throw Cb;};return b};function Hb(a){Ib(a);return a.b.concat()}function Ib(a){if(a.Ef!=a.b.length){for(var b=0,c=0;b<a.b.length;){var d=a.b[b];Jb(a.Z,d)&&(a.b[c++]=d);b++}a.b.length=c}if(a.Ef!=a.b.length){for(var e={},c=b=0;b<a.b.length;)d=a.b[b],Jb(e,d)||(a.b[c++]=d,e[d]=1),b++;a.b.length=c}}function Jb(a,b){return Object.prototype.hasOwnProperty.call(a,b)};function Kb(){return u("iPhone")&&!u("iPod")&&!u("iPad")};var Lb=Ja(),Mb=u("Trident")||u("MSIE"),Nb=u("Edge"),Ob=u("Gecko")&&!(-1!=Ga.toLowerCase().indexOf("webkit")&&!u("Edge"))&&!(u("Trident")||u("MSIE"))&&!u("Edge"),Pb=-1!=Ga.toLowerCase().indexOf("webkit")&&!u("Edge");function Qb(){var a=Ga;if(Ob)return/rv\:([^\);]+)(\)|;)/.exec(a);if(Nb)return/Edge\/([\d\.]+)/.exec(a);if(Mb)return/\b(?:MSIE|rv)[: ]([^\);]+)(\)|;)/.exec(a);if(Pb)return/WebKit\/(\S+)/.exec(a)}
var ua=function(){if(Lb&&p.opera){var a;var b=p.opera.version;try{a=b()}catch(c){a=b}return a}a="";(b=Qb())&&(a=b?b[1]:"");return Mb&&(b=(b=p.document)?b.documentMode:void 0,b>parseFloat(a))?String(b):a}(),Rb={};var Sb=Kb()||u("iPod"),Tb=u("iPad");!u("Android")||Ka()||u("Firefox")||Ja();var Ub=Ka(),Vb=u("Safari")&&!(Ka()||u("Coast")||Ja()||u("Edge")||u("Silk")||u("Android"))&&!(Kb()||u("iPad")||u("iPod"));/*

 Copyright 2015 The Lovefield Project Authors. All Rights Reserved.

 Licensed under the Apache License, Version 2.0 (the "License");
 you may not use this file except in compliance with the License.
 You may obtain a copy of the License at

     http://www.apache.org/licenses/LICENSE-2.0

 Unless required by applicable law or agreed to in writing, software
 distributed under the License is distributed on an "AS IS" BASIS,
 WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 See the License for the specific language governing permissions and
 limitations under the License.
*/
function Wb(){this.xg=Vb||Tb||Sb;this.Wf=!(this.xg||Mb&&!Rb[10]&&!(Rb[10]=0<=ta(10)));!Mb||Rb[11]||(Rb[11]=0<=ta(11));this.Fg=Ub||Vb}var Xb;function A(){return new window.Map}function Yb(a){var b=0,c=Array(a.size);a.forEach(function(a,e){c[b++]=e});return c}function B(a){var b=0,c=Array(a.size);a.forEach(function(a){c[b++]=a});return c};var Zb={};r("lf.TransactionType",Zb);Zb.READ_ONLY=0;Zb.READ_WRITE=1;function $b(a,b){this.pe=a;this.Oa=b||null;this.S=x()}$b.prototype.ia=function(){return 0==this.pe?this.rc():ac(this)};function ac(a){try{bc(a.Oa)}catch(b){return bb(b)}return cc(a).then(function(a){this.Oa.ia();return a}.bind(a))}function cc(a){dc(a);ec(a);return a.rc()}
function dc(a){a.Oa.rb.forEach(function(a,c){var d=this.Oa.ca().get(c),d=this.H(d.getName(),d.Cb.bind(d)),e=B(a.ya).map(function(a){return a.id()});0<e.length&&d.remove(e).oe(this.Pd,this);e=B(a.ma).map(function(a){return a[1]}).concat(B(a.ua));d.put(e).oe(this.Pd,this)},a)}function ec(a){fc(a.Oa).forEach(function(a){var c=this.H(a.getName(),rb),d;c.get([-1]).then(function(a){d=a;return c.remove([])}).then(function(){c.put(d);c.put(a.Fa())},this.Pd.bind(this))},a)}$b.prototype.Pd=function(a){this.S.reject(a)};function gc(a){this.yg=a}gc.prototype.toString=g("yg");var hc=new gc("backstore"),ic=new gc("cache"),jc=new gc("indexstore"),kc=new gc("engine"),lc=new gc("runner"),mc=new gc("observerregistry"),nc=new gc("schema");function C(a){return q(a)?new window.Set(a):new window.Set}function D(a){var b=0,c=Array(a.size);a.forEach(function(a){c[b++]=a});return c}function oc(a,b){if(b.size>a.size)return!1;var c=!0;b.forEach(function(b){c=c&&a.has(b)});return c};function pc(a,b){this.oa=a;this.o=b||{}}function qc(a){var b=C();a.forEach(function(a){b.add(a>>9)});return D(b)}pc.prototype.Y=g("oa");function rc(a,b){b.forEach(function(a){this.o[a.id()]=a.Fa()},a)}function sc(a,b){b.forEach(function(a){delete this.o[a]},a)}pc.prototype.Fa=function(){return{id:this.oa,value:JSON.stringify(this.o)}};function tc(a){return new pc(a.id,JSON.parse(a.value))};function uc(a,b,c){this.X=a;this.Bb=b;this.hf=c}m=uc.prototype;m.get=function(a){if(0==a.length)return this.Nd();var b=this.Bb;return vc(this,a).then(function(c){return a.map(function(a){var e=c.get(a>>9);return b(e.o[a])})})};function vc(a,b){var c=A(),d=x(),e=qc(b).map(function(a){return new v(function(b,d){var e;try{e=this.X.get(a)}catch(z){d(z);return}e.onerror=d;e.onsuccess=function(a){a=tc(a.target.result);c.set(a.Y(),a);b()}},this)},a);eb(e).then(function(){d.resolve(c)});return d.da}
m.Nd=function(){return new v(function(a,b){var c=[],d;try{d=this.X.openCursor()}catch(e){b(e);return}d.onerror=b;d.onsuccess=function(){var b=d.result;if(b){var f;f=tc(b.value).o;for(var h in f)c.push(this.Bb(f[h]));b.continue()}else a(c)}.bind(this)},this)};m.Sb=function(a){return new v(function(b,c){var d;try{d=a()}catch(e){c(e);return}d.onsuccess=b;d.onerror=c},this)};
m.put=function(a){if(0==a.length)return w();var b=A();a.forEach(function(a){var d;d=a.id()>>9;var e=b.get(d)||null;null===e&&(e=this.hf(this.X.name,d));rc(e,[a]);b.set(d,e)},this);a=B(b).map(function(a){return this.Sb(function(){return this.X.put(a.Fa())}.bind(this))},this);return eb(a)};
m.remove=function(a){if(0==a.length)return this.Sb(function(){return this.X.clear()}.bind(this));var b=A();a.forEach(function(a){var d=a>>9,e=b.get(d)||null;null===e&&(e=this.hf(this.X.name,d));sc(e,[a]);b.set(d,e)},this);a=B(b).map(function(a){return this.Sb(function(){return 0==Object.keys(a.o).length?this.X.delete(a.Y()):this.X.put(a.Fa())}.bind(this))},this);return eb(a)};function wc(a,b,c){a=a.l(ic);var d=[c<<9,(c+1<<9)-1];b=a.Xa(b,d[0],d[1]);c=new pc(c);rc(c,b);return c}
function xc(a,b){return new pc(b)};function yc(){};function zc(a){this.V=a.l(ic);this.D=a.l(jc);this.i=a.l(nc)}zc.prototype.update=function(a){a.forEach(function(a){Ac(this,a);Bc(this,a)},this)};function Bc(a,b){var c=b.getName();b.ya.forEach(function(a,b){this.V.remove(c,b)},a);b.ua.forEach(function(a){this.V.set(c,a)},a);b.ma.forEach(function(a){this.V.set(c,a[1])},a)}function Ac(a,b){var c=a.i.table(b.getName());Cc(b).forEach(function(a){Dc(this,c,a)},a)}
function Dc(a,b,c){var d=a.D.mc.get(b.getName())||[],e=0;d.forEach(function(a){try{Ec(a,c),e++}catch(b){throw d.slice(0,e).forEach(function(a){Ec(a,[c[1],c[0]])},this),b;}},a)}function Ec(a,b){var c=null===b[1]?void 0:b[1].Fb(a.getName()),d=null===b[0]?void 0:b[0].Fb(a.getName());if(!q(d)&&q(c))a.add(c,b[1].id());else if(q(d)&&q(c)){if(null===c||null===d){if(c==d)return}else if(0==a.dc().compare(d,c))return;a.add(c,b[1].id());a.remove(d,b[0].id())}else q(d)&&!q(c)&&a.remove(d,b[0].id())};var Fc={};r("lf.ConstraintAction",Fc);Fc.RESTRICT=0;Fc.CASCADE=1;var Gc={};r("lf.ConstraintTiming",Gc);Gc.IMMEDIATE=0;Gc.DEFERRABLE=1;var Hc={};r("lf.Order",Hc);Hc.DESC=0;Hc.ASC=1;var Ic={};r("lf.Type",Ic);Ic.ARRAY_BUFFER=0;Ic.BOOLEAN=1;Ic.DATE_TIME=2;Ic.INTEGER=3;Ic.NUMBER=4;Ic.STRING=5;Ic.OBJECT=6;var Jc={0:null,1:!1,2:Object.freeze(new Date(0)),3:0,4:0,5:"",6:null};r("lf.type.DEFAULT_VALUES",Jc);function E(a,b){this.code=a;this.message="http://sn.im/2a0j3wn?c="+a;if(1<arguments.length)for(var c=1;c<=Math.min(4,arguments.length-1);++c)this.message+="&p"+(c-1)+"="+encodeURIComponent(arguments[c].toString().slice(0,64))}t(E,Error);function Kc(){this.Z=A();this.size=0}m=Kc.prototype;m.has=function(a){return this.Z.has(a)};m.set=function(a,b){var c=this.Z.get(a)||null;null===c&&(c=C(),this.Z.set(a,c));c.has(b)||(c.add(b),this.size++);return this};m.Vb=function(a,b){var c=this.Z.get(a)||null;null===c&&(c=C(),this.Z.set(a,c));b.forEach(function(a){c.has(a)||(c.add(a),this.size++)},this);return this};m.Wd=function(a){a.keys().forEach(function(b){var c=a.get(b);this.Vb(b,c)},this);return this};
m.delete=function(a,b){var c=this.Z.get(a,null);if(null===c)return!1;var d=c.delete(b);d&&(--this.size,0==c.size&&this.Z.delete(a));return d};m.get=function(a){a=this.Z.get(a)||null;return null===a?null:D(a)};m.clear=function(){this.Z.clear();this.size=0};m.keys=function(){return Yb(this.Z)};m.values=function(){var a=[];this.Z.forEach(function(b){a.push.apply(a,D(b))});return a};function Lc(a){this.D=a.l(jc);this.i=a.l(nc);this.V=a.l(ic);this.$c=null}function Mc(a,b,c){var d=b.Db().jg;c.forEach(function(a){d.forEach(function(b){if(null==a.o[b.getName()])throw new E(202,b.m());},this)},a)}function Nc(a,b,c,d){b.Db().Od().forEach(function(a){a.timing==d&&Oc(this,a,c)},a)}function Oc(a,b,c){var d=Pc(a,b);c.forEach(function(a){if(Rc(a[0],a[1],b.name)&&(a=a[1].o[b.eb],null!==a&&!d.fb(a)))throw new E(203,b.name);},a)}
function Pc(a,b){null===a.$c&&(a.$c=A());var c=a.$c.get(b.name)||null;null===c&&(c=a.i.table(b.Pa)[b.kc].za(),c=a.D.get(c.m()),a.$c.set(b.name,c));return c}function Rc(a,b,c){return(null===a?null!==b:null===b)||a.Fb(c)!=b.Fb(c)}function Sc(a,b,c,d){b=Tc(a.i.info(),b.getName(),0);null!==b&&(b=b.filter(function(a){return a.timing==d}),0!=b.length&&Uc(a,b,c,function(a,b,c){if(b.fb(c))throw new E(203,a.name);}))}
function Vc(a,b,c){b=Tc(a.i.info(),b.getName(),1);if(null===b)return null;var d=new Kc;Uc(a,b,c,function(a,b,c){b=b.get(c);0<b.length&&d.Vb(a.Be,b)});return d}function Wc(a,b,c){var d=new Kc;Uc(a,c,b,function(a,b,c,k){b.get(c).forEach(function(b){d.set(b,{Ld:a,og:k[1]})})});return d}function Uc(a,b,c,d){b.forEach(function(a){var b=this.D.get(a.name),h=Pc(this,a);c.forEach(function(c){Rc(c[0],c[1],h.getName())&&d(a,b,c[0].o[a.kc],c)},this)},a)}
function Xc(a,b,c,d){0!=c.length&&(c=c.map(function(a){return[null,a]}),Nc(a,b,c,d))}function Yc(a,b,c,d){0!=c.length&&(Nc(a,b,c,d),Sc(a,b,c,d))}function Zc(a,b,c,d){0!=c.length&&(c=c.map(function(a){return[a,null]}),Sc(a,b,c,d))}
function $c(a,b,c){var d={ne:[],kf:new Kc},e=new Kc;e.Vb(b.getName(),c.map(function(a){return a.id()}));do{var f=new Kc;e.keys().forEach(function(a){var b=this.i.table(a);a=e.get(a).map(function(a){return[this.V.get(a),null]},this);b=Vc(this,b,a);null!==b&&(d.ne.unshift.apply(d.ne,b.keys()),f.Wd(b))},a);e=f;d.kf.Wd(e)}while(0<e.size);return d};function ad(a){this.ua=A();this.ma=A();this.ya=A();this.u=a}m=ad.prototype;m.getName=g("u");m.add=function(a){if(this.ya.has(a.id())){var b=[this.ya.get(a.id()),a];this.ma.set(a.id(),b);this.ya.delete(a.id())}else this.ua.set(a.id(),a)};m.modify=function(a){var b=a[1],c=a[0].id();this.ua.has(c)?this.ua.set(c,b):(this.ma.has(c)&&(a=[this.ma.get(a[0].id())[0],b]),this.ma.set(c,a))};
m.delete=function(a){if(this.ua.has(a.id()))this.ua.delete(a.id());else if(this.ma.has(a.id())){var b=this.ma.get(a.id())[0];this.ma.delete(a.id());this.ya.set(a.id(),b)}else this.ya.set(a.id(),a)};m.Wd=function(a){a.ua.forEach(function(a){this.add(a)},this);a.ma.forEach(function(a){this.modify(a)},this);a.ya.forEach(function(a){this.delete(a)},this)};
function Cc(a){var b=[];a.ua.forEach(function(a){b.push([null,a])});a.ma.forEach(function(a){b.push(a)});a.ya.forEach(function(a){b.push([a,null])});return b}m.toString=function(){return"["+Yb(this.ua).toString()+"], ["+Yb(this.ma).toString()+"], ["+Yb(this.ya).toString()+"]"};function bd(a){var b=new ad(a.u);a.ua.forEach(function(a){b.delete(a)});a.ya.forEach(function(a){b.add(a)});a.ma.forEach(function(a){b.modify([a[1],a[0]])});return b}
m.$f=function(){return 0==this.ua.size&&0==this.ya.size&&0==this.ma.size};function cd(a,b){this.aa=A();b.forEach(function(a){this.aa.set(a.getName(),a)},this);this.i=a.l(nc);this.V=a.l(ic);this.D=a.l(jc);this.wa=new Lc(a);this.hd=new zc(a);this.rb=A()}function fc(a){var b=[];Yb(a.rb).map(function(a){return this.aa.get(a)},a).forEach(function(a){a.zb()&&(a.Aa().forEach(function(a){b.push(this.D.get(a.m()))},this),b.push(this.D.get(a.getName()+".#")))},a);return b}m=cd.prototype;m.ca=g("aa");
m.xb=function(a,b){dd(this,a);Mc(this.wa,a,b);Xc(this.wa,a,b,0);for(var c=0;c<b.length;c++)ed(this,a,[null,b[c]])};function ed(a,b,c){var d=b.getName(),e=a.rb.get(d)||new ad(d);a.rb.set(d,e);try{Dc(a.hd,b,c)}catch(h){throw h;}b=c[0];var f=c[1];null===b&&null!==f?(a.V.set(d,f),e.add(f)):null!==b&&null!==f?(a.V.set(d,f),e.modify(c)):null!==b&&null===f&&(a.V.remove(d,b.id()),e.delete(b))}
m.update=function(a,b){dd(this,a);Mc(this.wa,a,b);var c=b.map(function(a){return[this.V.get(a.id()),a]},this);fd(this,a,c);Yc(this.wa,a,c,0);c.forEach(function(b){ed(this,a,b)},this)};m.Qd=function(a,b){dd(this,a);Mc(this.wa,a,b);for(var c=0;c<b.length;c++){var d=b[c],e=null,f,h=a.Db().cd();if(null===h)f=null;else{f=this.wa;var h=h.m(),k=d.Fb(h);f=f.D.get(h).get(k);f=0==f.length?null:f[0]}null!=f?(e=this.V.get(f),d.oa=f,Yc(this.wa,a,[[e,d]],0)):Xc(this.wa,a,[d],0);ed(this,a,[e,d])}};
m.remove=function(a,b){dd(this,a);gd(this,a,b);Zc(this.wa,a,b,0);for(var c=0;c<b.length;c++)ed(this,a,[b[c],null])};function fd(a,b,c){b=Tc(a.i.info(),b.getName(),1);if(null!==b){var d=Wc(a.wa,c,b);d.keys().forEach(function(a){d.get(a).forEach(function(b){var c=this.i.table(b.Ld.Be),d=this.V.get(a),n=c.Cb(d.Fa());n.o[b.Ld.eb]=b.og.o[b.Ld.kc];ed(this,c,[d,n])},this)},a)}}
function gd(a,b,c){if(null!==Tc(a.i.info(),b.getName(),1)){b=$c(a.wa,b,c);var d=b.kf;b.ne.forEach(function(a){var b=this.i.table(a);a=d.get(a).map(function(a){return this.V.get(a)},this);Zc(this.wa,b,a,0);a.forEach(function(a){ed(this,b,[a,null])},this)},a)}}function bc(a){a.rb.forEach(function(a){var c=this.aa.get(a.getName());Xc(this.wa,c,B(a.ua),1);Zc(this.wa,c,B(a.ya),1);Yc(this.wa,c,B(a.ma),1)},a)}m.ia=aa();m.Ib=function(){var a=B(this.rb).map(function(a){return bd(a)});this.hd.update(a)};
function dd(a,b){if(!a.aa.has(b.getName()))throw new E(106,b.getName());};function hd(a,b,c,d){this.c=a;this.w=b;this.ea=this.c==F?!1:c;this.la=this.w==F?!1:d}var F=new (aa());hd.prototype.toString=function(){return(this.ea?"(":"[")+(this.c==F?"unbound":this.c)+", "+(this.w==F?"unbound":this.w)+(this.la?")":"]")};function id(a){if(jd(a))return[];var b=null,c=null;a.c==F||(b=new hd(F,a.c,!1,!a.ea));a.w==F||(c=new hd(a.w,F,!a.la,!1));return[b,c].filter(function(a){return null!==a})}hd.prototype.reverse=function(){return new hd(this.w,this.c,this.la,this.ea)};
function kd(a,b){var c=ld(a.c,b.c,!0,a.ea,b.ea);if(0==c)return!0;var d=-1==c?a:b,c=1==c?a:b;return d.w==F||d.w>c.c||d.w==c.c&&!d.la&&!c.ea}function md(){return new hd(F,F,!1,!1)}function jd(a){return a.c==F&&a.w==F}function nd(a){return a.c==a.w&&a.c!=F&&!a.ea&&!a.la}hd.prototype.contains=function(a){var b=this.w==F||a<this.w||a==this.w&&!this.la;return(this.c==F||a>this.c||a==this.c&&!this.ea)&&b};
function ld(a,b,c,d,e){function f(a){return c?a:1==a?-1:1}d=d||!1;e=e||!1;return a==F?b==F?(d?!e:e)?d?f(1):f(-1):0:f(-1):b==F?f(1):a<b?-1:a==b?(d?!e:e)?d?f(1):f(-1):0:1}function od(a,b){var c=ld(a.c,b.c,!0,a.ea,b.ea);0==c&&(c=ld(a.w,b.w,!1,a.la,b.la));return c};function G(a,b){this.entries=a;this.L=C(b);this.Va=null}function H(a){return D(a.L)}function pd(a){return a.entries.map(function(a){return a.ta.o})}function qd(a){return a.entries.map(function(a){return a.ta.id()})}function rd(a,b){return a.Va.get(b.m())}var sd=null;function td(){null===sd&&(sd=new G([],[]));return sd}
function ud(a){if(0==a.length)return td();for(var b=a.reduce(function(a,b){return a+b.entries.length},0),c=Array(b),d=0,b=a.map(function(a){var b=A();a.entries.forEach(function(a){c[d++]=a;b.set(a.id,a)});return b}),e=A(),f=0;f<c.length;f++)b.every(function(a){return a.has(c[f].id)})&&e.set(c[f].id,c[f]);return new G(B(e),D(a[0].L))}function vd(a){if(0==a.length)return td();var b=A();a.forEach(function(a){a.entries.forEach(function(a){b.set(a.id,a)})});return new G(B(b),D(a[0].L))}
function wd(a,b){var c=1<b.length,d=a.map(function(a){return new xd(a,c)});return new G(d,b)}function xd(a,b){this.ta=a;this.id=yd++;this.Sd=b}var yd=0;function I(a,b){var c=b.Wa();return null!==c&&a.ta.o.hasOwnProperty(c)?a.ta.o[c]:a.Sd?a.ta.o[J(b.H())][b.getName()]:a.ta.o[b.getName()]}function zd(a,b,c){var d=b.Wa();if(null!=d)a.ta.o[d]=c;else if(a.Sd){var d=J(b.H()),e=a.ta.o[d];null==e&&(e={},a.ta.o[d]=e);e[b.getName()]=c}else a.ta.o[b.getName()]=c}
function Ad(a,b,c,d){function e(a,b){if(a.Sd){var c=a.ta.o,d;for(d in c)f[d]=c[d]}else f[b[0]]=a.ta.o}var f={};e(a,b);e(c,d);a=new y(-1,f);return new xd(a,!0)};r("lf.bind",function(a){return new Bd(a)});function Bd(a){this.ga=a}r("lf.Binder",Bd);Bd.prototype.za=g("ga");function Cd(){this.Re=Dd();var a=Ed();this.gc=A();this.gc.set(1,Fd());this.gc.set(2,Gd());this.gc.set(4,a);this.gc.set(3,a);this.gc.set(5,Hd())}Cd.zc=function(){return Cd.Ne?Cd.Ne:Cd.Ne=new Cd};function Id(a,b,c){return(a.gc.get(b)||null).get(c)||null}function Dd(){function a(a){return a}var b=A();b.set(1,function(a){return null===a?null:a?1:0});b.set(2,function(a){return null===a?null:a.getTime()});b.set(3,a);b.set(4,a);b.set(5,a);return b}
function Fd(){var a=A();a.set("eq",function(a,c){return a==c});a.set("neq",function(a,c){return a!=c});return a}
function Ed(){var a=Fd();a.set("between",function(a,c){return null===a||null===c[0]||null===c[1]?!1:a>=c[0]&&a<=c[1]});a.set("gte",function(a,c){return null===a||null===c?!1:a>=c});a.set("gt",function(a,c){return null===a||null===c?!1:a>c});a.set("in",function(a,c){return-1!=c.indexOf(a)});a.set("lte",function(a,c){return null===a||null===c?!1:a<=c});a.set("lt",function(a,c){return null===a||null===c?!1:a<c});return a}
function Hd(){var a=Ed();a.set("match",function(a,c){return null===a||null===c?!1:(new RegExp(c)).test(a)});return a}
function Gd(){var a=A();a.set("between",function(a,c){return null===a||null===c[0]||null===c[1]?!1:a.getTime()>=c[0].getTime()&&a.getTime()<=c[1].getTime()});a.set("eq",function(a,c){return(null===a?-1:a.getTime())==(null===c?-1:c.getTime())});a.set("gte",function(a,c){return null===a||null===c?!1:a.getTime()>=c.getTime()});a.set("gt",function(a,c){return null===a||null===c?!1:a.getTime()>c.getTime()});a.set("in",function(a,c){return c.some(function(c){return c.getTime()==a.getTime()})});a.set("lte",
function(a,c){return null===a||null===c?!1:a.getTime()<=c.getTime()});a.set("lt",function(a,c){return null===a||null===c?!1:a.getTime()<c.getTime()});a.set("neq",function(a,c){return(null===a?-1:a.getTime())!=(null===c?-1:c.getTime())});return a};function K(){this.g=this.B=null}var Jd=[];K.prototype.getParent=g("B");K.prototype.hb=function(){for(var a=this;!fa(a.getParent());)a=a.getParent();return a};function Kd(a){for(var b=0;!fa(a.getParent());)b++,a=a.getParent();return b}function L(a){return a.g||Jd}function Ld(a,b){return L(a)[b]||null}function Md(a,b,c){b.B=a;null===a.g?a.g=[b]:a.g.splice(c,0,b)}function Nd(a,b){b.B=a;null===a.g?a.g=[b]:a.g.push(b)}
function Od(a,b){var c=a.g&&a.g[b];return c?(c.B=null,a.g.splice(b,1),0==a.g.length&&(a.g=null),c):null}K.prototype.removeChild=function(a){return Od(this,L(this).indexOf(a))};function Pd(a,b,c){Ld(a,c).B=null;b.B=a;a.g[c]=b}function Qd(a,b,c){!1!==b.call(c,a)&&L(a).forEach(function(a){Qd(a,b,c)})};function Rd(){K.call(this);this.oa=Sd++}t(Rd,K);var Sd=0;Rd.prototype.Y=g("oa");function Td(a,b,c){Rd.call(this);this.M=a;this.value=b;this.F=c;this.vc=Id(Cd.zc(),this.M.G(),this.F);this.Ya=!1;this.bc=b}t(Td,Rd);m=Td.prototype;m.Kb=function(){var a=new Td(this.M,this.value,this.F);a.bc=this.bc;a.td(this.Ya);var b=this.Y();a.oa=b;return a};m.gb=function(a){return null!=a?(a.push(this.M),a):[this.M]};m.td=ba("Ya");function Ud(a){var b=!1;a.value instanceof Bd||(b="array"==ea(a.value)?!a.value.some(function(a){return a instanceof Bd}):!0);if(!b)throw new E(501);}
m.eval=function(a){Ud(this);if("in"==this.F)return Vd(this,a);var b=a.entries.filter(function(a){return this.vc(I(a,this.M),this.value)!=this.Ya},this);return new G(b,H(a))};m.bind=function(a){if(this.bc instanceof Bd){var b=this.bc.za();if(a.length<=b)throw new E(510);this.value=a[b]}else"array"==ea(this.bc)&&(this.value=this.bc.map(function(b){if(b instanceof Bd){var d=b.za();if(a.length<=d)throw new E(510);return a[b.za()]}return b}))};
function Vd(a,b){var c=C(a.value),d=function(a){return null===a?!1:c.has(a)!=this.Ya}.bind(a),e=b.entries.filter(function(a){return d(I(a,this.M))},a);return new G(e,H(b))}m.toString=function(){return"value_pred("+this.M.m()+" "+this.F+(this.Ya?"(complement)":"")+" "+this.value+")"};function Wd(a,b){return 2==a.M.G()?b.getTime():b};function Xd(a){this.ba=a;this.Wc=this.Ca=null}function Yd(a,b){null===a.Ca&&null!=a.s&&(a.Ca=Zd(a.s));return a.Ca.get(b)||null}function Zd(a){var b=A();Qd(a,function(a){b.set(a.Y(),a)});return b}function $d(a,b){b.s&&(a.s=b.s.Kb());a.Wc=b}Xd.prototype.bind=function(){return this};function ae(a,b){var c=a.s;null!=c&&Qd(c,function(a){a instanceof Td&&a.bind(b)})};function be(a){Xd.call(this,a)}t(be,Xd);function ce(a){var b="";a.forEach(function(c,d){b+=c.M.m()+" ";b+=1==c.kb?"ASC":"DESC";d<a.length-1&&(b+=", ")});return b}be.prototype.ca=function(){return C(this.c)};be.prototype.clone=function(){var a=new be(this.ba);$d(a,this);this.f&&(a.f=this.f.slice());this.c&&(a.c=this.c.slice());a.W=this.W;a.K=this.K;this.N&&(a.N=this.N.slice());this.ja&&(a.ja=this.ja.slice());this.Qb&&(a.Qb=this.Qb);this.Xb&&(a.Xb=this.Xb);a.yb=this.yb;return a};
be.prototype.bind=function(a){be.ab.bind.call(this,a);null!=this.Qb&&(this.W=a[this.Qb.za()]);null!=this.Xb&&(this.K=a[this.Xb.za()]);ae(this,a);return this};function de(a,b){this.Da=a;this.aa=b}de.prototype.hb=g("Da");de.prototype.ca=g("aa");function ee(a){var b=C();a.forEach(function(a){a.ca().forEach(b.add.bind(b))});return b};function fe(a,b){this.global=a;this.Ka=a.l(hc);this.qd=b.map(function(a){return a.context});this.af=b.map(function(a){return a.de});this.Gd=ee(this.af);this.qe=ge(this);this.$a=x()}function ge(a){return a.qd.some(function(a){return!(a instanceof be)})?1:0}m=fe.prototype;
m.exec=function(){function a(){var f=d.shift();if(f){var h=e[c.length];return f.hb().exec(b,h).then(function(b){c.push(b[0]);return a()})}return w()}var b=0==this.qe?void 0:new cd(this.global,this.Gd),c=[],d=this.af.slice(),e=this.qd;return a().then(function(){return this.Ka.Ab(this.qe,D(this.Gd),b).ia()}.bind(this)).then(function(){this.ae(c);return c}.bind(this),function(a){null!=b&&b.Ib();throw a;})};m.G=g("qe");m.ca=g("Gd");m.Lb=g("$a");m.Y=function(){return ka(this)};m.ae=aa();function ke(a,b){fe.call(this,a,b);this.Hb=a.l(mc)}t(ke,fe);ke.prototype.getPriority=l(0);ke.prototype.ae=function(a){this.qd.forEach(function(b,c){le(this.Hb,b,a[c])},this)};function me(a,b){this.h=a;this.Hb=a.l(mc);this.Ea=a.l(lc);this.hd=new zc(a);this.rb=b;var c=a.l(nc),d=this.rb.map(function(a){return c.table(a.getName())});this.aa=C(d);this.$a=x()}m=me.prototype;m.exec=function(){this.hd.update(this.rb);this.Kc();return w()};m.G=l(1);m.ca=g("aa");m.Lb=g("$a");m.Y=function(){return ka(this)};m.getPriority=l(1);m.Kc=function(){var a=ne(this.Hb,this.aa);0!=a.length&&(a=new ke(this.h,a),oe(this.Ea,a))};function pe(a){this.h=a;this.Ka=a.l(hc);this.Ea=a.l(lc)}pe.prototype.Zd=function(a){a=new me(this.h,a);oe(this.Ea,a)};function M(a,b){this.Zb=a;this.j=b;this.Sa=A()}r("lf.backstore.FirebaseRawBackStore",M);M.prototype.dd=g("j");M.prototype.ed=function(){throw new E(351);};function qe(a,b){var c=x(),d=a;b.length&&(d=a.child(b));d.once("value",function(a){c.resolve(a.val())},function(a){c.reject(a)});return c.da}function re(a,b,c){function d(a){a?e.reject(a):e.resolve()}c=c||!1;var e=x();c?a.set(b,d):a.update(b,d);return e.da}
M.prototype.Ga=function(a){return qe(this.j,"@rev/R").then(function(a){this.La=a;return qe(this.j,"@table")}.bind(this)).then(function(b){var c=0,d;for(d in b)this.Sa.set(d,b[d]),b[d]>c&&(c=b[d]);a.ra().forEach(function(a){this.Sa.has(a.getName())||(b[a.getName()]=++c)},this);d=this.j.child("@table");return re(d,b)}.bind(this))};
function se(a,b,c){var d=a.Sa.get(b);return null!=d?function(){var a={},b=x();this.j.orderByChild("T").equalTo(d).once("value",function(d){d.forEach(function(b){var d=c(b.val());a[parseInt(b.key(),10)]=d});b.resolve(a)});return b.da}.call(a).then(function(a){a["@rev"]={R:++this.La};return re(this.j,a)}.bind(a)):w()}M.prototype.tc=function(a){return se(this,a,l(null)).then(function(){this.Sa.delete(a);return re(this.j.child("@table/"+a),null,!0)}.bind(this))};M.prototype.dropTable=M.prototype.tc;
M.prototype.pc=function(a,b,c){return se(this,a,function(a){var e=a.P;e[b]=c;return{R:this.La+1,T:a.T,P:e}}.bind(this))};M.prototype.addTableColumn=M.prototype.pc;M.prototype.uc=function(a,b){return se(this,a,function(a){var d=a.P;delete d[b];return{R:this.La+1,T:a.T,P:d}}.bind(this))};M.prototype.dropTableColumn=M.prototype.uc;M.prototype.Jc=function(a,b,c){return se(this,a,function(a){var e=a.P;e[c]=e[b];delete e[b];return{R:this.La+1,T:a.T,P:e}}.bind(this))};M.prototype.renameTableColumn=M.prototype.Jc;
M.prototype.tb=function(){throw new E(351);};M.prototype.createRow=M.prototype.tb;M.prototype.Cc=g("Zb");M.prototype.getVersion=M.prototype.Cc;M.prototype.ec=function(a){var b=x();a=this.Sa.get(a);this.j.orderByChild("T").equalTo(a).once("value",function(a){var d=[];a.forEach(function(a){d.push(a.val().P)});b.resolve(d)});return b.da};M.prototype.dump=function(){var a={},b=Yb(this.Sa).map(function(b){return this.ec(b).then(function(d){a[b]=d})}.bind(this));return eb(b).then(function(){return a})};
M.prototype.dump=M.prototype.dump;function te(a,b,c){$b.call(this,b,c);this.j=a}t(te,$b);te.prototype.H=function(a){return this.j.Ac(a)};
te.prototype.rc=function(){if(0==this.pe)return this.S.resolve(),this.S.da;var a=this.Oa.rb;if(0==a.size)this.S.resolve();else{var b=this.j.La+1;this.j.La=b;var c={"@rev":{R:b}};a.forEach(function(a,e){var f=this.j.Sa.get(e);a.ua.forEach(function(a,d){c[d]={R:b,T:f,P:a.o}});a.ma.forEach(function(a,d){c[d]={R:b,T:f,P:a[1].o}});a.ya.forEach(function(a,b){c[b]=null})},this);this.j.j.update(c,function(c){null===c?this.S.resolve():(this.j.La=b-1,c=B(a).map(function(a){return ue(this.j,a.getName())},this),
eb(c).then(this.S.reject.bind(this.S),this.S.reject.bind(this.S)))}.bind(this))}return this.S.da};function ve(){this.xa=A()}function we(a,b){if(0==b.length)return B(a.xa);var c=[];b.forEach(function(a){a=this.xa.get(a)||null;null===a||c.push(a)},a);return c}ve.prototype.getData=g("xa");ve.prototype.get=function(a){return w(we(this,a))};function xe(a,b){b.forEach(function(a){this.xa.set(a.id(),a)},a)}ve.prototype.put=function(a){xe(this,a);return w()};function ye(a,b){0==b.length||b.length==a.xa.size?a.xa.clear():b.forEach(function(a){this.xa.delete(a)},a)}
ve.prototype.remove=function(a){ye(this,a);return w()};function ze(a){return 0==a.xa.size?0:Yb(a.xa).reduce(function(a,c){return a>c?a:c},0)};function Ae(a,b){this.i=a;this.xf=b;this.Ic=A();this.La=-1;this.L=A();this.Sa=A();this.Dd=null}m=Ae.prototype;
m.Ga=function(a){this.j=this.xf.child(this.i.name());var b=a||function(){return w()};return qe(this.j,"@db/version").then(function(a){return null===a?re(this.j,Be(this),!0).then(function(){var a=new M(0,this.j);return b(a)}.bind(this)):a==this.i.version()?qe(this.j,"@rev/R").then(function(a){this.La=a;return qe(this.j,"@table")}.bind(this)).then(function(a){for(var b in a)this.Sa.set(b,a[b]);a=this.i.ra().map(function(a){return ue(this,a.getName())},this);return eb(a)}.bind(this)).then(function(){Ce(this);
De(this);return w()}.bind(this)):this.be(a,b).then(function(){return this.Ga()}.bind(this))}.bind(this))};m.be=function(a,b){var c=new M(a,this.j);return c.Ga(this.i).then(function(){return w()}.bind(this)).then(function(){return b(c)}).then(function(){var a=this.j.child("@db");return re(a,{version:this.i.version()},!0)}.bind(this))};
function De(a){a.j.off();a.j.on("child_removed",a.lg.bind(a));a.Ed&&(a.Ed.off(),a.Ic.clear());a.Ed=a.j.orderByChild("R").startAt(a.La+1);a.Ed.on("value",a.Zd.bind(a))}function Ce(a){pb=B(a.L).map(function(a){return ze(a)}).reduce(function(a,c){return a>c?a:c},0)+1}m.lg=function(a){var b=a.val(),c=this.Ic.get(b.T)||null;null===c&&(c=C(),this.Ic.set(b.T,c));c.add(parseInt(a.key(),10))};
m.Zd=function(a){var b=a.child("@rev/R").val();null!=b&&b!=this.La&&(this.La=b,a=Ee(this,a),a.forEach(function(a){var b=this.L.get(a.getName()),e=Yb(a.ya);0<e.length&&ye(b,e);var f=B(a.ua);a.ma.forEach(function(a){f.push(a[1])});xe(b,f)},this),0<a.length&&this.Fc(a),De(this))};
function Ee(a,b){var c=C(),d=A();a.Sa.forEach(function(a,b){var h=this.L.get(b),k=new ad(b);if(this.Ic.has(a)){var n=D(this.Ic.get(a));n.forEach(function(a){c.add(a)});we(h,n).forEach(function(a){k.delete(a)})}d.set(a,k)}.bind(a));b.forEach(function(a){if("@rev"!=a.key()){var b=parseInt(a.key(),10);if(!c.has(b)){a=a.val();var h=d.get(a.T),k=this.L.get(h.getName());k.getData().has(b)?h.modify([we(k,[b])[0],new y(b,a.P)]):h.add(new y(b,a.P))}}}.bind(a));return B(d).filter(function(a){return!a.$f()})}
function ue(a,b){var c=x(),d=a.Sa.get(b);a.j.orderByChild("T").equalTo(d).once("value",function(a){var d=new ve,h=[];a.forEach(function(a){h.push(new y(parseInt(a.key(),10),a.val().P))});xe(d,h);this.L.set(b,d);c.resolve()}.bind(a));return c.da}function Be(a){var b={};b["@db"]={version:a.i.version()};b["@rev"]={R:1};a.La=1;b["@table"]={};a.i.ra().forEach(function(a,d){var e=a.getName();b["@table"][e]=d;this.L.set(e,new ve);this.Sa.set(e,d)},a);return b}m.Ab=function(a,b,c){return new te(this,a,c)};
m.Ac=function(a){var b=this.L.get(a)||null;if(null!==b)return b;throw new E(101,a);};m.close=aa();m.subscribe=ba("Dd");m.Fc=function(a){null!=this.Dd&&this.Dd(a)};function N(a,b,c,d){this.j=b;this.Ua=c;this.Zb=a;this.Tc=d}r("lf.backstore.IndexedDBRawBackStore",N);N.prototype.dd=g("j");N.prototype.getRawDBInstance=N.prototype.dd;N.prototype.ed=g("Ua");N.prototype.getRawTransaction=N.prototype.ed;N.prototype.tc=function(a){return new v(function(b,c){try{this.j.deleteObjectStore(a)}catch(d){c(d);return}b()},this)};N.prototype.dropTable=N.prototype.tc;
function Fe(a,b,c,d){return new v(function(a,f){var h;try{var k=this.Ua.objectStore(b);h=k.openCursor()}catch(n){f(n);return}h.onsuccess=function(){var b=h.result;b?(c(b),b.continue()):(d(k),a())};h.onerror=f},a)}function Ge(a){var b=null;return b=a instanceof ArrayBuffer?tb(a):a instanceof Date?a.getTime():a}
function He(a,b,c){function d(a){var b=tc(a.value),d=b.o,e;for(e in d){var z=rb(d[e]);c(z);d[e]=z.Fa()}a.update(b.Fa())}function e(a){var b=rb(a.value);c(b);a.update(b.Fa())}return Fe(a,b,a.Tc?d:e,aa())}N.prototype.pc=function(a,b,c){var d=Ge(c);return He(this,a,function(a){a.o[b]=d})};N.prototype.addTableColumn=N.prototype.pc;N.prototype.uc=function(a,b){return He(this,a,function(a){delete a.o[b]})};N.prototype.dropTableColumn=N.prototype.uc;
N.prototype.Jc=function(a,b,c){return He(this,a,function(a){a.o[c]=a.o[b];delete a.o[b]})};N.prototype.renameTableColumn=N.prototype.Jc;function Ie(a,b){var c=[];return new v(function(a,e){var f;try{f=this.Ua.objectStore(b).openCursor()}catch(h){e(h);return}f.onsuccess=function(){var b=f.result;if(b){if(this.Tc){var e;e=tc(b.value).o;for(var n in e)c.push(e[n])}else c.push(b.value);b.continue()}else a(c)}.bind(this);f.onerror=e},a)}N.prototype.tb=function(a){var b={},c;for(c in a)b[c]=Ge(a[c]);return sb(b)};
N.prototype.createRow=N.prototype.tb;N.prototype.Cc=g("Zb");N.prototype.getVersion=N.prototype.Cc;N.prototype.dump=function(){for(var a=this.j.objectStoreNames,b=[],c=0;c<a.length;++c){var d=a.item(c);b.push(this.ec(d))}return eb(b).then(function(b){var c={};b.forEach(function(b,d){c[a.item(d)]=b});return c})};N.prototype.dump=N.prototype.dump;N.prototype.ec=function(a){return Ie(this,a).then(function(a){return a.map(function(a){return a.value})})};function Je(a,b){this.X=a;this.Bb=b}Je.prototype.get=function(a){if(0==a.length)return null!=this.X.getAll?Ke(this):Le(this);a=a.map(function(a){return new v(function(c,d){var e;try{e=this.X.get(a)}catch(f){d(f);return}e.onerror=d;e.onsuccess=function(a){c(this.Bb(a.target.result))}.bind(this)},this)},this);return eb(a)};
function Le(a){return new v(function(a,c){var d=[],e;try{e=this.X.openCursor()}catch(f){c(f);return}e.onerror=c;e.onsuccess=function(){var c=e.result;c?(d.push(this.Bb(c.value)),c.continue()):a(d)}.bind(this)},a)}function Ke(a){return new v(function(a,c){var d;try{d=this.X.getAll()}catch(e){c(e);return}d.onerror=c;d.onsuccess=function(){var c=d.result.map(function(a){return this.Bb(a)},this);a(c)}.bind(this)},a)}
Je.prototype.Sb=function(a){return new v(function(b,c){var d;try{d=a()}catch(e){c(e);return}d.onsuccess=b;d.onerror=c},this)};Je.prototype.put=function(a){if(0==a.length)return w();a=a.map(function(a){return this.Sb(function(){return this.X.put(a.Fa())}.bind(this))},this);return eb(a)};
Je.prototype.remove=function(a){return new v(function(b,c){var d=this.X.count();d.onsuccess=function(d){if(0==a.length||d.target.result==a.length)return this.Sb(function(){return this.X.clear()}.bind(this)).then(b,c);d=a.map(function(a){return this.Sb(function(){return this.X.delete(a)}.bind(this))},this);eb(d).then(b,c)}.bind(this);d.onerror=c},this)};function Me(a,b,c,d,e){$b.call(this,c,e);this.h=a;this.Ua=b;this.Tc=d;this.Ua.oncomplete=this.S.resolve.bind(this.S);this.Ua.onabort=this.S.reject.bind(this.S)}t(Me,$b);Me.prototype.H=function(a,b,c){return this.Tc?(c=null!=c?c:0,a=this.Ua.objectStore(a),new uc(a,b,0==c?qa(wc,this.h):xc)):new Je(this.Ua.objectStore(a),b)};Me.prototype.rc=function(){return this.S.da};function Ne(a,b){this.h=a;this.i=b;this.Uc=b.bf().Kf||!1}m=Ne.prototype;
m.Ga=function(a){var b=window.indexedDB||window.mozIndexedDB||window.webkitIndexedDB||window.msIndexedDB;if(null==b)throw new E(352);var c=a||function(){return w()};return new v(function(a,e){var f;try{f=b.open(this.i.name(),this.i.version())}catch(h){e(h);return}f.onerror=e;f.onupgradeneeded=function(a){Oe(this,c,a).then(aa(),e)}.bind(this);f.onsuccess=function(b){this.j=b.target.result;this.je().then(function(b){pb=b+1;a(this.j)}.bind(this))}.bind(this)},this)};
function Oe(a,b,c){var d=c.target.result,e=c.target.transaction;c=new N(c.oldVersion,d,e,a.Uc);Pe(d);a.i.ra().forEach(qa(a.Ff,d,e),a);return b(c)}function Pe(a){for(var b=[],c=0;c<a.objectStoreNames.length;++c){var d=a.objectStoreNames.item(c);-1!=d.indexOf(".")&&b.push(d)}b.forEach(function(b){try{a.deleteObjectStore(b)}catch(c){}})}
m.Ff=function(a,b,c){a.objectStoreNames.contains(c.getName())||a.createObjectStore(c.getName(),{keyPath:"id"});c.zb()&&(c.Aa().forEach(function(c){this.sc(a,b,c.m(),"btree")},this),this.sc(a,b,Qe(c),"rowid"))};m.sc=function(a,b,c,d){a.objectStoreNames.contains(c)||(a.createObjectStore(c,{keyPath:"id"}),a=b.objectStore(c),(this.Uc?new uc(a,rb,xc):new Je(a,rb)).put([new vb(new ub(d))]))};m.Ab=function(a,b,c){b=this.j.transaction(Re(b),0==a?"readonly":"readwrite");return new Me(this.h,b,a,this.Uc,c)};
function Re(a){var b=C();a.forEach(function(a){b.add(a.getName());a.zb()&&(a.Aa().forEach(function(a){b.add(a.m())}),b.add(Qe(a)))});return D(b)}
m.je=function(a){function b(){if(0==d.length)return w();var a=d.shift();return c(a).then(b)}function c(b){return new v(function(c,d){var O;try{O=(a||e.transaction([b])).objectStore(b).openCursor(null,"prev")}catch(ca){d(ca);return}O.onsuccess=function(a){(a=a.target.result)&&(f=Math.max(f,h(a)));c(f)};O.onerror=function(){c(f)}})}var d=this.i.ra().map(function(a){return a.getName()}),e=this.j,f=0,h=function(a){return this.Uc?(a=tc(a.value),Object.keys(a.o).reduce(function(a,b){return Math.max(a,b)},
0)):a.key}.bind(this);return new v(function(a){b().then(function(){a(f)})})};m.close=function(){this.j.close()};m.Ac=function(){throw new E(511);};m.subscribe=aa();m.Fc=aa();function Se(a,b,c){$b.call(this,b,c);this.X=a;0==b&&this.S.resolve()}t(Se,$b);Se.prototype.H=function(a){return this.X.Ac(a)};Se.prototype.rc=function(){this.S.resolve();return this.S.da};function Te(a){this.i=a;this.L=A()}m=Te.prototype;m.Ga=function(){this.i.ra().forEach(this.Xf,this);return w()};m.Ac=function(a){var b=this.L.get(a)||null;if(null===b)throw new E(101,a);return b};m.Ab=function(a,b,c){return new Se(this,a,c)};function Ue(a,b){if(!a.L.has(b)){var c=new ve;a.L.set(b,c);return c}return null}m.Xf=function(a){Ue(this,a.getName());a.zb()&&(a.Aa().forEach(function(a){this.sc(a.m(),"btree")},this),this.sc(Qe(a),"rowid"))};m.sc=function(a,b){var c=Ue(this,a);null===c||c.put([new vb(new ub(b))])};
m.close=aa();m.subscribe=aa();m.Fc=aa();function Ve(a){Te.call(this,a);this.md=null}t(Ve,Te);Ve.prototype.subscribe=function(a){null===this.md&&(this.md=a)};Ve.prototype.Fc=function(a){null===this.md||this.md(a)};function We(a,b,c){this.Ua=a;this.u=b;this.Bb=c}We.prototype.get=function(a){var b=this.Bb;return Xe(this.Ua,"SELECT id, value FROM "+this.u+" "+(0==a.length?"":"WHERE id IN ("+a.join(",")+")"),[],function(a){for(var d=a.rows.length,e=Array(d),f=0;f<d;++f)e[f]=b({id:a.rows.item(f).id,value:JSON.parse(a.rows.item(f).value)});return e})};
We.prototype.put=function(a){if(0==a.length)return w();var b="INSERT OR REPLACE INTO "+this.u+"(id, value) VALUES (?, ?)";a.forEach(function(a){Xe(this.Ua,b,[a.id(),JSON.stringify(a.o)])},this);return w()};We.prototype.remove=function(a){Xe(this.Ua,"DELETE FROM "+this.u+" "+(0==a.length?"":"WHERE id IN ("+a.join(",")+")"),[]);return w()};function Ye(a,b,c){$b.call(this,b,c);this.j=a;this.L=A();this.Hd=[]}t(Ye,$b);function Ze(a){return a.replace(".","__d__").replace("#","__s__")}Ye.prototype.H=function(a,b){var c=this.L.get(a)||null;null===c&&(c=new We(this,Ze(a),b),this.L.set(a,c));return c};function Xe(a,b,c,d){var e=x();a.Hd.push({Ag:b,pg:c,transform:d,S:e});return e.da}
Ye.prototype.rc=function(){var a=null,b=this.S.reject.bind(this.S),c=function(a,b){this.S.reject(b)}.bind(this),d=[],e=function(b,h){if(null!==a){var k=h;null!=a.transform&&null!=h&&(k=a.transform(h));d.push(k);a.S.resolve(k)}0<this.Hd.length?(a=k=this.Hd.shift(),b.executeSql(k.Ag,k.pg,e,c)):this.S.resolve(d)}.bind(this);0==this.pe?this.j.readTransaction(e,b):this.j.transaction(e,b);return this.S.da};function P(a,b,c){this.j=c;this.h=a;this.Zb=b}r("lf.backstore.WebSqlRawBackStore",P);P.prototype.dd=g("j");P.prototype.getRawDBInstance=P.prototype.dd;P.prototype.ed=function(){throw new E(356);};P.prototype.getRawTransaction=P.prototype.ed;function $e(a){return new Ye(a.j,1,new cd(a.h,C()))}P.prototype.tc=function(a){var b=$e(this);Xe(b,"DROP TABLE "+a,[]);return b.ia()};P.prototype.dropTable=P.prototype.tc;
P.prototype.ec=function(a){var b=$e(this);Xe(b,"SELECT id, value FROM "+a,[]);return b.ia().then(function(a){for(var b=a[0].rows.length,e=Array(b),f=0;f<b;++f)e[f]={id:a[0].rows.item(f).id,value:JSON.parse(a[0].rows.item(f).value)};return w(e)})};function af(a,b,c){var d=$e(a),e="UPDATE "+b+" SET value=? WHERE id=?";return a.ec(b).then(function(a){a.forEach(function(a){a=c(a);Xe(d,e,[JSON.stringify(a.value),a.id])});return d.ia()})}
P.prototype.pc=function(a,b,c){var d=Ge(c);return af(this,a,function(a){a.value[b]=d;return a})};P.prototype.addTableColumn=P.prototype.pc;P.prototype.uc=function(a,b){return af(this,a,function(a){delete a.value[b];return a})};P.prototype.dropTableColumn=P.prototype.uc;P.prototype.Jc=function(a,b,c){return af(this,a,function(a){a.value[c]=a.value[b];delete a.value[b];return a})};P.prototype.renameTableColumn=P.prototype.Jc;P.prototype.tb=function(a){var b={},c;for(c in a)b[c]=Ge(a[c]);return sb(b)};
P.prototype.createRow=P.prototype.tb;P.prototype.Cc=g("Zb");P.prototype.getVersion=P.prototype.Cc;function bf(a){Xe(a,'SELECT tbl_name FROM sqlite_master WHERE type="table"',[],function(a){for(var c=Array(a.rows.length),d=0;d<c.length;++d)c[d]=a.rows.item(d).tbl_name;return c})}
P.prototype.dump=function(){var a=x(),b=$e(this);bf(b);var c={};b.ia().then(function(b){b=b[0].filter(function(a){return"__lf_ver"!=a&&"__WebKitDatabaseInfoTable__"!=a}).map(function(a){return this.ec(a).then(function(b){c[a]=b})},this);eb(b).then(function(){a.resolve(c)})}.bind(this));return a.da};P.prototype.dump=P.prototype.dump;function cf(a,b,c){this.h=a;this.i=b;this.zg=c||4194304}m=cf.prototype;m.Ga=function(a){if(null==window.openDatabase)throw new E(353);var b=a||function(){return w()};return new v(function(a,d){try{var e=window.openDatabase(this.i.name(),"",this.i.name(),this.zg);if(null!=e)this.j=e,df(this,b).then(a,d);else throw new E(354);}catch(f){d(f)}},this)};
function df(a,b){var c=x(),d=new Ye(a.j,1,new cd(a.h,C()));Xe(d,"CREATE TABLE IF NOT EXISTS __lf_ver(id INTEGER PRIMARY KEY, v INTEGER)",[]);Xe(d,"SELECT v FROM __lf_ver WHERE id = 0",[]);d.ia().then(function(a){var d=0;a[1].rows.length&&(d=a[1].rows.item(0).v);d<this.i.version()?this.be(b,d).then(c.resolve.bind(c)):d>this.i.version()?c.reject(new E(108)):c.resolve()}.bind(a));return c.da}m.Ab=function(a,b,c){if(null!=this.j)return new Ye(this.j,a,c);throw new E(2);};m.close=aa();
m.Ac=function(){throw new E(512);};m.subscribe=function(){throw new E(355);};m.Fc=function(){throw new E(355);};m.be=function(a,b){var c=x();ef(this).then(function(){a(new P(this.h,b,this.j)).then(function(){return this.je()}.bind(this)).then(c.resolve.bind(c))}.bind(this),c.reject.bind(c));return c.da};
function ef(a){var b=a.i.ra(),c=new Ye(a.j,1,new cd(a.h,C())),d=new Ye(a.j,1,new cd(a.h,C()));Xe(c,"INSERT OR REPLACE INTO __lf_ver VALUES (0, ?)",[a.i.version()]);bf(c);return c.ia().then(function(a){function c(a,b){Xe(d,"INSERT INTO "+a+"(id, value) VALUES(?, ?)",[-1,JSON.stringify(qb(new vb(new ub(b))))])}var h=a[1];h.filter(function(a){return-1!=a.indexOf("__d__")}).forEach(function(a){Xe(d,"DROP TABLE "+a,[])});var k=[],n=[],z=[];b.map(function(a){-1==h.indexOf(a.getName())&&k.push(a.getName());
a.zb&&(a.Aa().forEach(function(a){a=Ze(a.m());k.push(a);n.push(a)}),a=Ze(Qe(a)),k.push(a),z.push(a))});k.forEach(function(a){Xe(d,"CREATE TABLE "+a+"(id INTEGER PRIMARY KEY, value TEXT)",[])});n.forEach(function(a){c(a,"btree")});z.forEach(function(a){c(a,"rowid")});return d.ia()})}
m.je=function(){var a=0,b=x(),c=function(b){var c=new Ye(this.j,0);Xe(c,"SELECT MAX(id) FROM "+b,[]);return c.ia().then(function(b){b=b[0].rows.item(0)[0];a=Math.max(b,a)})}.bind(this),d=this.i.ra().map(function(a){return c(a.getName())});eb(d).then(function(){b.resolve(a)},function(a){b.reject(a)});return b.da};function ff(a){this.Z=A();this.Yb=A();a.ra().forEach(function(a){this.Yb.set(a.getName(),C())},this)}m=ff.prototype;m.set=function(a,b){this.Z.set(b.id(),b);this.Yb.get(a).add(b.id())};m.Vb=function(a,b){var c=this.Yb.get(a);b.forEach(function(a){this.Z.set(a.id(),a);c.add(a.id())},this)};m.get=function(a){return this.Z.get(a)||null};function gf(a,b){return b.map(function(a){return this.get(a)},a)}
m.Xa=function(a,b,c){var d=[],e=Math.min(b,c),f=Math.max(b,c);a=this.Yb.get(a);if(a.size<f-e)a.forEach(function(a){a>=e&&a<=f&&(a=this.Z.get(a),d.push(a))},this);else for(b=e;b<=f;++b)a.has(b)&&(c=this.Z.get(b),d.push(c));return d};m.remove=function(a,b){this.Z.delete(b);this.Yb.get(a).delete(b)};m.Ig=function(a){return null!=a?this.Yb.get(a).size:this.Z.size};m.clear=function(){this.Z.clear();this.Yb.clear()};function hf(a,b,c){var d=0,e=a.length;for(c=c||jf;d<e;){var f=d+e>>1;0>c(a[f],b)?d=f+1:e=f}return d==e&&a[d]==b?d:~d}function jf(a,b){return a-b}function kf(a,b,c){c=hf(a,b,c);return 0>c?(a.splice(-(c+1),0,b),!0):!1};function mf(a,b,c,d){a=b?a.reverse():a;if(null==c&&null==d)return a;c=Math.min(q(c)?c:a.length,a.length);if(0==c)return[];d=Math.min(d||0,a.length);return a.slice(d,d+c)};function nf(a){this.Yc=0==a?of:pf;this.Xd=0==a?function(a){return null!=a?a.reverse():null}:function(a){return a||null};this.ce=0==a?qf:rf}t(nf,yc);function pf(a,b){return a>b?1:a<b?-1:0}function of(a,b){return pf(b,a)}function rf(a,b){return od(a,b)}function qf(a,b){return od(b,a)}m=nf.prototype;m.sb=function(a,b){var c=this.Xd(b),d=[c.c==F,c.w==F];if(!d[0]){var e=this.Yc(a,c.c);d[0]=c.ea?1==e:-1!=e}d[1]||(e=this.Yc(a,c.w),d[1]=c.la?-1==e:1!=e);return d};
m.compare=function(a,b){return this.Yc(a,b)};m.min=function(a,b){return a<b?1:a==b?0:-1};m.max=function(a,b){return a>b?1:a==b?0:-1};m.Ob=function(a,b){var c=this.sb(a,b);return c[0]&&c[1]};m.nf=function(a){return a.filter(function(a){return null!==a}).sort(function(a,c){return this.ce(a,c)}.bind(this))};m.Rd=function(a){return this.Xd(a).c==F};m.rd=function(a){a=this.Xd(a);return[a.c,a.w]};m.Xc=function(a){return null!==a};m.toString=function(){return this.compare==of?"SimpleComparator_DESC":"SimpleComparator_ASC"};
function sf(a){nf.call(this,a);this.Yc=0==a?tf:uf}t(sf,nf);function uf(a,b){return null===a?null===b?0:-1:null===b?1:pf(a,b)}function tf(a,b){return uf(b,a)}sf.prototype.Ob=function(a,b){return null===a?jd(b):sf.ab.Ob.call(this,a,b)};sf.prototype.Gb=function(a,b){return null===a?null===b?0:-1:null===b?1:null};sf.prototype.min=function(a,b){var c=this.Gb(a,b);null===c&&(c=sf.ab.min.call(this,a,b));return c};sf.prototype.max=function(a,b){var c=this.Gb(a,b);null===c&&(c=sf.ab.max.call(this,a,b));return c};function vf(a){this.va=a.map(function(a){return new nf(a)})}t(vf,yc);function wf(a,b,c,d){for(var e=0,f=0;f<a.va.length&&0==e;++f)e=d(a.va[f],b[f],c[f]);return e}m=vf.prototype;m.compare=function(a,b){return wf(this,a,b,function(a,b,e){return b==F||e==F?0:a.compare(b,e)})};m.min=function(a,b){return wf(this,a,b,function(a,b,e){return a.min(b,e)})};m.max=function(a,b){return wf(this,a,b,function(a,b,e){return a.max(b,e)})};
m.sb=function(a,b){for(var c=[!0,!0],d=0;d<this.va.length&&(c[0]||c[1]);++d){var e=this.va[d].sb(a[d],b[d]);c[0]=c[0]&&e[0];c[1]=c[1]&&e[1]}return c};m.Ob=function(a,b){for(var c=!0,d=0;d<this.va.length&&c;++d)c=this.va[d].Ob(a[d],b[d]);return c};
m.nf=function(a){var b=a.filter(function(a){return a.every(ga)});a=Array(this.va.length);for(var c=0;c<a.length;c++)a[c]=b.map(function(a){return a[c]});a.forEach(function(a,b){a.sort(function(a,c){return this.va[b].ce(a,c)}.bind(this))},this);b=Array(b.length);for(c=0;c<b.length;c++)b[c]=a.map(function(a){return a[c]});return b.sort(function(a,b){for(var c=0,h=0;h<this.va.length&&0==c;++h)c=this.va[h].ce(a[h],b[h]);return c}.bind(this))};m.Rd=function(a){return this.va[0].Rd(a[0])};
m.rd=function(a){var b=a.map(function(a,b){return this.va[b].rd(a)[0]},this);a=a.map(function(a,b){return this.va[b].rd(a)[1]},this);return[b,a]};m.Xc=function(a){return a.every(function(a,c){return this.va[c].Xc(a)},this)};function xf(a){vf.call(this,a);this.va=a.map(function(a){return new sf(a)})}t(xf,vf);function yf(){this.na=0}yf.prototype.add=function(a,b){this.na+=b};yf.prototype.remove=function(a,b){this.na-=b};yf.prototype.clear=function(){this.na=0};function zf(a,b){a.clear();b.forEach(function(a){this.na+=a.na},a)};function Af(a,b,c,d){this.u=a;this.O=b;this.sf=c;this.pb=new yf;if(d){a=511;a*=a*a;if(d.length>=a)throw new E(6,a);d=Bf(this,d);this.qa=d=Cf(d)}else this.clear()}var Df=[];m=Af.prototype;m.getName=g("u");m.toString=function(){return this.qa.toString()};m.add=function(a,b){this.qa=this.qa.xb(a,b)};m.set=function(a,b){this.qa=this.qa.xb(a,b,!0)};m.remove=function(a,b){this.qa=this.qa.remove(a,b)};m.get=function(a){return this.qa.get(a)};
m.Zc=function(a){if(null==a)return this.Ma().na;if(a instanceof hd){if(jd(a))return this.Ma().na;if(nd(a))return this.get(a.c).length}return this.Xa([a]).length};m.Ma=g("pb");m.Nd=function(a,b,c,d){c=Array(a);this.qa.fill({offset:b?this.pb.na-a-d:d,count:a,me:0},c);return b?c.reverse():c};
m.Xa=function(a,b,c,d){var e=Ef(this.qa).b[0];if(!q(e)||0==c)return Df;b=b||!1;c=null!=c?Math.min(c,this.pb.na):this.pb.na;d=d||0;var f=Math.min(Math.max(this.pb.na-d,0),c);if(0==f)return Df;if(!q(a)||1==a.length&&a[0]instanceof hd&&jd(a[0]))return this.Nd(f,b,c,d);a=this.O.nf(a);var h=Array(b?this.pb.na:f),k={count:0,W:h.length,reverse:b,K:d},n=this.O instanceof xf;a.forEach(function(a){for(var b=this.O.rd(a),b=this.O.Rd(a)?e:b[0],b=Ff(this.qa,b),c=k.count,d=0;null!=b&&k.count<k.W;){if(n){for(var f=
b,Qc=a,Ya=k,he=h,ie=f.C.dc(),je=-1,Aa=0;Aa<f.b.length;++Aa)if(ie.Ob(f.b[Aa],Qc)){je=Aa;break}if(-1!=je)for(Aa=je;Aa<f.b.length&&Ya.count<Ya.W;++Aa){if(!ie.Ob(f.b[Aa],Qc))if(ie.Xc(f.b[Aa]))break;else continue;Gf(f,Ya,he,Aa)}}else b.Xa(a,k,h);k.count!=c||0<k.K?(d=0,c=k.count):d++;b=2==d?null:b.next()}},this);h.length>k.count&&h.splice(k.count,h.length-k.count);return b?mf(h,b,c,d):h};m.clear=function(){this.qa=Hf(this);this.pb.clear()};m.fb=function(a){return this.qa.fb(a)};m.min=function(){return this.Gb(this.O.min.bind(this.O))};
m.max=function(){return this.Gb(this.O.max.bind(this.O))};function If(a,b,c){if(!a.O.Xc(b.b[c]))if(1<b.b[c].length){if(null===b.b[c][0])return null}else return null;return[b.b[c],a.sf?[b.A[c]]:b.A[c]]}
m.Gb=function(a){var b;a:{b=Ef(this.qa);var c=0;do if(c>=b.b.length)b=b.sa,c=0;else{var d=If(this,b,c);if(null!==d){b=d;break a}c++}while(null!==b);b=null}a:{c=Jf(this.qa);d=c.b.length-1;do if(0>d)c=c.lb,d=0;else{var e=If(this,c,d);if(null!==e){c=e;break a}d--}while(null!==c);c=null}return null===b||null===c?null:1==a(b[0],c[0])?b:c};m.Ia=g("sf");m.dc=g("O");m.Vd=function(a,b){return null!=a?-1==this.O.compare(a,b):!1};m.Na=function(a,b){return null!=a?0==this.O.compare(a,b):!1};
m.Fa=function(){for(var a=[],b=Ef(this.qa);b;)a.push(new y(b.oa,[b.b,b.A])),b=b.sa;return a};function Kf(a,b,c,d){a=new Af(b,a,c);d=Lf(d,a);a.qa=d;return a}function Mf(a,b){this.oa=a;this.C=b;this.ib=0;this.sa=this.lb=this.B=null;this.b=[];this.A=[];this.g=[]}function Hf(a){return new Mf(pb++,a)}function Q(a){return 0==a.ib}m=Mf.prototype;m.next=g("sa");
function Nf(a){function b(a){return null!=a?a.oa.toString():"_"}var c=a.oa+"["+a.b.join("|")+"]",d=a.g.map(function(a){return a.oa}).join("|"),e=a.A.join("/"),f=b(a.lb)+"{",f=Q(a)?f+e:f+d,f=f+"}"+b(a.B);a.sa&&(a=Nf(a.sa),c=c+"  "+a[0],f=f+"  "+a[1]);return[c,f]}m.toString=function(){var a="",b=Nf(this),a=a+(b[0]+"\n"+b[1]+"\n");this.g.length&&(a+=this.g[0].toString());return a};function Ef(a){return Q(a)?a:Ef(a.g[0])}function Jf(a){return Q(a)?a:Jf(a.g[a.g.length-1])}
function Of(a,b){b&&(b.lb=a);a&&(a.sa=b)}function Bf(a,b){for(var c=b.length,d=0,e=Hf(a),f=e;0<c;){var h=768<=c?511:257<=c&&511>=c?c:257,k=b.slice(d,d+h);e.b=k.map(function(a){return a.key});e.A=k.map(function(a){return a.value});d+=h;c-=h;0<c&&(h=Hf(e.C),Of(e,h),e=h)}return f}function Pf(a){var b=a[0],c=Hf(b.C);c.ib=b.ib+1;c.g=a;for(b=0;b<a.length;++b)a[b].B=c,0<b&&c.b.push(a[b].b[0]);return c}
function Cf(a){var b=a,c=[];do c.push(b),b=b.sa;while(b);if(512>=c.length)b=Pf(c);else{var d=c.length,e=0,b=Hf(a.C);for(b.ib=a.ib+2;0<d;){a=768<=d?511:257<=d&&511>=d?d:257;var f=c.slice(e,e+a),h=Pf(f);h.B=b;b.g.length&&(b.b.push(f[0].b[0]),Of(b.g[b.g.length-1],h));b.g.push(h);e+=a;d-=a}}return b}m.get=function(a){var b=Qf(this,a);if(Q(this)){var c=Df;this.C.Na(this.b[b],a)&&(c=c.concat(this.A[b]));return c}b=this.C.Na(this.b[b],a)?b+1:b;return this.g[b].get(a)};
m.fb=function(a){var b=Qf(this,a);return this.C.Na(this.b[b],a)?!0:Q(this)?!1:this.g[b].fb(a)};m.remove=function(a,b){Rf(this,a,-1,b);if(null===this.B){var c=this;1==this.g.length&&(c=this.g[0],c.B=null);return c}return this};function Sf(a){return Q(a)?a.b[0]:Sf(a.g[0])}function Uf(a){a.b=[];for(var b=1;b<a.g.length;++b)a.b.push(Sf(a.g[b]))}
function Rf(a,b,c,d){var e=Qf(a,b),f=Q(a);if(!f){var h=a.C.Na(a.b[e],b)?e+1:e;if(Rf(a.g[h],b,h,d))Uf(a);else return!1}else if(!a.C.Na(a.b[e],b))return!1;if(a.b.length>e&&a.C.Na(a.b[e],b)){if(q(d)&&!a.C.Ia()&&f&&(h=a.A[e],d=hf(h,d,void 0),0>d?d=!1:(h.splice(d,1),d=!0),d&&a.C.Ma().remove(b,1),a.A[e].length))return!1;a.b.splice(e,1);f&&(f=a.C.Ia()?1:a.A[e].length,a.A.splice(e,1),a.C.Ma().remove(b,f))}if(256>a.b.length&&null!==a.B){a:{b=null;if(a.sa&&256<a.sa.b.length)b=a.sa,e=d=0,f=a.b.length+1;else if(a.lb&&
256<a.lb.b.length)b=a.lb,d=a.lb.b.length-1,e=Q(a)?d:d+1,f=0;else{b=!1;break a}a.b.splice(f,0,b.b[d]);b.b.splice(d,1);d=Q(a)?a.A:a.g;h=null;Q(a)?h=b.A:(h=b.g,h[e].B=a);d.splice(f,0,h[e]);h.splice(e,1);Q(b)||(Uf(b),Uf(a));b=!0}b||Vf(a,c)}return!0}
function Vf(a,b){var c,d,e;a.sa&&511>a.sa.b.length?(c=a.sa,e=d=0):a.lb&&(c=a.lb,d=c.b.length,e=Q(c)?c.A.length:c.g.length);d=[d,0].concat(a.b);Array.prototype.splice.apply(c.b,d);d=null;Q(a)?d=a.A:(d=a.g,d.forEach(function(a){a.B=c}));d=[e,0].concat(d);Array.prototype.splice.apply(Q(c)?c.A:c.g,d);Of(a.lb,a.sa);Q(c)||Uf(c);-1!=b&&(a.B.b.splice(b,1),a.B.g.splice(b,1))}
m.xb=function(a,b,c){var d=Qf(this,a);if(Q(this)){if(this.C.Na(this.b[d],a)){if(c)this.C.Ma().remove(a,this.C.Ia()?1:this.A[d].length),this.A[d]=this.C.Ia()?b:[b];else{if(this.C.Ia())throw new E(201);if(!kf(this.A[d],b))throw new E(109);}this.C.Ma().add(a,1);return this}this.b.splice(d,0,a);this.A.splice(d,0,this.C.Ia()?b:[b]);this.C.Ma().add(a,1);512==this.b.length?(d=Hf(this.C),a=Hf(this.C),a.ib=1,a.b=[this.b[256]],a.g=[this,d],a.B=this.B,this.B=a,d.b=this.b.splice(256),d.A=this.A.splice(256),d.B=
a,Of(d,this.sa),Of(this,d),d=a):d=this;return d}d=this.C.Na(this.b[d],a)?d+1:d;a=this.g[d].xb(a,b,c);Q(a)||1!=a.b.length||(this.b.splice(d,0,a.b[0]),a.g[1].B=this,a.g[0].B=this,this.g.splice(d,1,a.g[1]),this.g.splice(d,0,a.g[0]));return 512==this.b.length?Wf(this):this};function Wf(a){var b=Hf(a.C),c=Hf(a.C);b.B=a.B;b.ib=a.ib+1;b.b=[a.b[256]];b.g=[a,c];a.b.splice(256,1);c.B=b;c.ib=a.ib;c.b=a.b.splice(256);c.g=a.g.splice(257);c.g.forEach(function(a){a.B=c});a.B=b;Of(c,a.sa);Of(a,c);return b}
function Qf(a,b){for(var c=0,d=a.b.length;c<d;){var e=c+d>>1;a.C.Vd(a.b[e],b)?c=e+1:d=e}return c}function Ff(a,b){if(!Q(a)){var c=Qf(a,b);a.C.Na(a.b[c],b)&&c++;return Ff(a.g[c],b)}return a}
m.Xa=function(a,b,c){function d(a){return a[0]?a[1]?0:1:-1}var e=this.C.dc(),f=0,h=this.b.length-1,k=this.b,n=d(e.sb(k[f],a)),z=d(e.sb(k[h],a));if(1!=n&&(-1!=n||-1!=z)){var O=function(a,b){var c=a+b>>1;return c==a?c+1:c},ca=function(b,c,f){if(b>=c)return 0==f?c:-1;var h=d(e.sb(k[b],a));if(0==h)return b;if(1==h)return-1;h=O(b,c);if(h==c)return 0==f?c:-1;var n=d(e.sb(k[h],a));return 0==n?ca(b,h,n):-1==n?ca(h+1,c,f):ca(b+1,h,n)},zb=function(b,c){if(b>=c)return b;var f=d(e.sb(k[c],a));if(0==f)return c;
if(-1==f)return b;f=O(b,c);if(f==c)return b;var h=d(e.sb(k[f],a));return 0==h?zb(f,c):1==h?zb(b,f-1):-1};0!=n&&(f=ca(f+1,h,z));-1!=f&&(h=zb(f,h),-1!=h&&h>=f&&Xf(this,b,c,f,h+1))}};function Gf(a,b,c,d){if(a.C.Ia())!b.reverse&&b.K?b.K--:c[b.count++]=a.A[d];else for(var e=0;e<a.A[d].length&&b.count<c.length;++e)!b.reverse&&b.K?b.K--:c[b.count++]=a.A[d][e]}function Xf(a,b,c,d,e){for(;d<e&&(b.reverse||!(b.count>=b.W));++d)Gf(a,b,c,d)}
m.fill=function(a,b){if(Q(this))for(var c=0;c<this.A.length&&0<a.count;++c)if(0<a.offset){if(a.offset-=this.C.Ia()?1:this.A[c].length,0>a.offset)for(var d=this.A[c].length+a.offset;d<this.A[c].length&&0<a.count;++d)b[a.me++]=this.A[c][d],a.count--}else if(this.C.Ia())b[a.me++]=this.A[c],a.count--;else for(d=0;d<this.A[c].length&&0<a.count;++d)b[a.me++]=this.A[c][d],a.count--;else for(c=0;c<this.g.length&&0<a.count;++c)this.g[c].fill(a,b)};
function Lf(a,b){for(var c=b.Ma(),d=a.map(function(a){var d=new Mf(a.id(),b);d.b=a.o[0];d.A=a.o[1];d.b.forEach(function(a,e){c.add(a,b.Ia()?1:d.A[e].length)});return d}),e=0;e<d.length-1;++e)Of(d[e],d[e+1]);return 1<d.length?Cf(d[0]):d[0]};function Yf(a){if(1==a.f.length)return new nf(a.f[0].kb);var b=a.f.map(function(a){return a.kb});return a.f.some(function(a){return a.ba.ic()})?new xf(b):new vf(b)};function Zf(a){this.ga=a;this.jb=C();this.Lc=new yf;this.pb=new yf}m=Zf.prototype;m.getName=function(){return this.ga.getName()};m.add=function(a,b){null===a?(this.jb.add(b),this.Lc.add(a,1)):this.ga.add(a,b)};m.set=function(a,b){null===a?(this.jb.clear(),this.Lc.clear(),this.add(a,b)):this.ga.set(a,b)};m.remove=function(a,b){null===a?b?(this.jb.delete(b),this.Lc.remove(a,1)):(this.jb.clear(),this.Lc.clear()):this.ga.remove(a,b)};m.get=function(a){return null===a?D(this.jb):this.ga.get(a)};m.Zc=function(a){return this.ga.Zc(a)};
m.Ma=function(){zf(this.pb,[this.ga.Ma(),this.Lc]);return this.pb};m.Xa=function(a,b,c,d){b=this.ga.Xa(a,b,c,d);return null!=a?b:b.concat(D(this.jb))};m.clear=function(){this.jb.clear();this.ga.clear()};m.fb=function(a){return null===a?0!=this.jb.size:this.ga.fb(a)};m.min=function(){return this.ga.min()};m.max=function(){return this.ga.max()};m.Fa=function(){return[new y(-2,D(this.jb))].concat(this.ga.Fa())};m.dc=function(){return this.ga.dc()};
function $f(a,b){for(var c=-1,d=0;d<b.length;++d)if(-2==b[d].id()){c=d;break}if(-1==c)throw new E(102);var d=b[c].o,e=b.slice(0);e.splice(c,1);var c=a(e),f=new Zf(c);d.forEach(function(a){f.jb.add(a)});return f}m.Ia=function(){return this.ga.Ia()};function ag(a){this.u=a;this.ob=C();this.O=new nf(1)}m=ag.prototype;m.getName=g("u");m.add=function(a){if("number"!=typeof a)throw new E(103);this.ob.add(a)};m.set=function(a,b){this.add(a,b)};m.remove=function(a){this.ob.delete(a)};m.get=function(a){return this.fb(a)?[a]:[]};m.min=function(){return this.Gb(this.O.min.bind(this.O))};m.max=function(){return this.Gb(this.O.max.bind(this.O))};
m.Gb=function(a){if(0==this.ob.size)return null;var b=D(this.ob).reduce(function(b,d){return null===b||1==a(d,b)?d:b},null);return[b,[b]]};m.Zc=function(){return this.ob.size};m.Xa=function(a,b,c,d){var e=a||[md()];a=D(this.ob).filter(function(a){return e.some(function(b){return this.O.Ob(a,b)},this)},this);return mf(a,b,c,d)};m.clear=function(){this.ob.clear()};m.fb=function(a){return this.ob.has(a)};m.Fa=function(){return[new y(0,D(this.ob))]};m.dc=g("O");
function bg(a,b){var c=new ag(a);b[0].o.forEach(function(a){c.add(a,a)});return c}m.Ia=l(!0);m.Ma=function(){var a=new yf;a.na=this.ob.size;return a};function cg(a){this.Ka=a.l(hc);this.D=a.l(jc);this.V=a.l(ic)}cg.prototype.Ga=function(a){var b=a.ra(),c=function(){if(0==b.length)return w();var a=b.shift();return(a.zb()?dg(this,a):eg(this,a)).then(c)}.bind(this);return c()};function eg(a,b){var c=a.Ka.Ab(0,[b]),d=c.H(b.getName(),b.Cb.bind(b)).get([]).then(function(a){this.V.Vb(b.getName(),a);fg(this,b,a)}.bind(a));c.ia();return d}
function fg(a,b,c){var d=a.D.mc.get(b.getName())||[];c.forEach(function(a){d.forEach(function(b){var c=a.Fb(b.getName());b.add(c,a.id())})})}function dg(a,b){var c=a.Ka.Ab(0,[b]),d=c.H(b.getName(),b.Cb).get([]).then(function(a){this.V.Vb(b.getName(),a)}.bind(a)),e=b.Aa().map(function(a){return gg(this,a,c)},a).concat(hg(a,b,c));c.ia();return eb(e.concat(d))}
function gg(a,b,c){c=c.H(b.m(),rb,1);var d=Yf(b);return c.get([]).then(function(a){if(1<a.length){if(ig(b)){var c=Kf.bind(void 0,d,b.m(),b.Dc);a=$f(c,a.slice(1))}else a=Kf(d,b.m(),b.Dc,a.slice(1));this.D.set(b.Mc,a)}}.bind(a))}function hg(a,b,c){return c.H(Qe(b),rb,1).get([]).then(function(a){1<a.length&&(a=bg(Qe(b),a.slice(1)),this.D.set(b.getName(),a))}.bind(a))};function jg(){this.X=A();this.mc=A()}jg.prototype.Ga=function(a){a.ra().forEach(function(a){var c=[];this.mc.set(a.getName(),c);var d=Qe(a);if(null===this.get(d)){var e=new ag(d);c.push(e);this.X.set(d,e)}a.Aa().forEach(function(a){var b;b=Yf(a);b=new Af(a.m(),b,a.Dc);b=ig(a)&&1==a.f.length?new Zf(b):b;c.push(b);this.X.set(a.m(),b)},this)},this);return w()};jg.prototype.get=function(a){return this.X.get(a)||null};
jg.prototype.set=function(a,b){var c=this.mc.get(a)||null;null===c&&(c=[],this.mc.set(a,c));for(var d=null,e=0;e<c.length;e++)if(c[e].getName()==b.getName()){d=e;break}null!==d&&0<c.length?c.splice(d,1,b):c.push(b);this.X.set(b.getName(),b)};function kg(a){this.lc=[];q(a)&&this.add(a)}kg.prototype.toString=function(){return this.lc.map(function(a){return a.toString()}).join(",")};kg.prototype.fb=function(a){return this.lc.some(function(b){return b.contains(a)})};kg.prototype.Eb=g("lc");
kg.prototype.add=function(a){if(0!=a.length)if(a=this.lc.concat(a),1==a.length)this.lc=a;else{a.sort(od);for(var b=[],c=a[0],d=1;d<a.length;++d)if(kd(c,a[d])){var e=a[d],f=md();if(c.c!=F&&e.c!=F){var h=ld(c.c,e.c,!0);1!=h?(f.c=c.c,f.ea=0!=h?c.ea:c.ea&&e.ea):(f.c=e.c,f.ea=e.ea)}c.w!=F&&e.w!=F&&(h=ld(c.w,e.w,!1),-1!=h?(f.w=c.w,f.la=0!=h?c.la:c.la&&e.la):(f.w=e.w,f.la=e.la));c=f}else b.push(c),c=a[d];b.push(c);this.lc=b}};
function lg(a,b){var c=[];a.Eb().map(function(a){return b.Eb().map(function(b){var c;if(kd(a,b)){c=md();var h=ld(a.c,b.c,!0),h=0==h?a.ea?a:b:-1!=h?a:b;c.c=h.c;c.ea=h.ea;a.w==F||b.w==F?b=a.w==F?b:a:(h=ld(a.w,b.w,!1),b=0==h?a.la?a:b:-1==h?a:b);c.w=b.w;c.la=b.la}else c=null;return c})}).forEach(function(a){c=c.concat(a)});return new kg(c.filter(function(a){return null!==a}))};function mg(a,b){var c=[],d=null,e=null;Qd(a,function(a){var h=b(a);null==a.getParent()?e=h:Nd(d,h);var k=a.getParent();null!==k&&L(k).length==L(d).length&&(k=c.indexOf(d),-1!=k&&c.splice(k,1));1<L(a).length&&c.push(h);d=null===a.g?c[c.length-1]:h});return e}function ng(a){return og(a,function(a){return null===a.g})}
function pg(a){var b=a.getParent(),c=0;null!==b&&(c=L(b).indexOf(a),b.removeChild(a));var d=L(a).slice();d.forEach(function(d,f){a.removeChild(d);null===b||Md(b,d,c+f)});return{parent:b,children:d}}function qg(a,b){L(a).slice().forEach(function(c){a.removeChild(c);Nd(b,c)});Nd(a,b)}function rg(a){var b=Ld(a,0);pg(a);qg(b,a);return b}
function sg(a,b,c){var d=Ld(a,0),e=L(d).slice();if(!e.some(function(a){return b(a)}))return a;pg(a);e.forEach(function(e,h){if(b(e)){var k=c(a);Od(d,h);Nd(k,e);Md(d,k,h)}});return d}function tg(a,b,c,d){var e=a.getParent();null!==e&&(a=L(e).indexOf(a),Od(e,a),Md(e,c,a));L(b).slice().forEach(function(a){b.removeChild(a);Nd(d,a)});return c}function og(a,b,c){function d(a){b(a)&&e.push(a);null!=c&&c(a)||L(a).forEach(d)}var e=[];d(a);return e}
function ug(a,b){var c=b||function(a){return a.toString()+"\n"},d="";Qd(a,function(a){for(var b=0;b<Kd(a);b++)d+="-";d+=c(a)});return d};function vg(a){Rd.call(this);this.Rb=a;this.Ya=!1}t(vg,Rd);m=vg.prototype;m.Kb=function(){return mg(this,function(a){if(a instanceof vg){var b=new vg(a.Rb);b.Ya=a.Ya;a=a.Y();b.oa=a;return b}return a.Kb()})};m.gb=function(a){var b=a||[];Qd(this,function(a){a!=this&&a.gb(b)}.bind(this));a=C(b);return D(a)};m.td=function(a){this.Ya!=a&&(this.Ya=a,this.Rb="and"==this.Rb?"or":"and",L(this).forEach(function(b){return b.td(a)}))};
m.eval=function(a){var b=L(this).map(function(b){return b.eval(a)});return wg(this,b)};function wg(a,b){return"and"==a.Rb?ud(b):vd(b)}m.toString=function(){return"combined_pred_"+this.Rb.toString()};function xg(a,b,c){Rd.call(this);this.ha=a;this.ka=b;this.F=c;this.Yd=null;a=Cd.zc();this.vc=Id(a,this.ha.G(),this.F);this.cg=a.Re.get(this.ha.G())||null}t(xg,Rd);m=xg.prototype;m.Kb=function(){var a=new xg(this.ha,this.ka,this.F),b=this.Y();a.oa=b;return a};m.gb=function(a){return null!=a?(a.push(this.ha),a.push(this.ka),a):[this.ha,this.ka]};
m.reverse=function(){var a=this.F;switch(this.F){case "gt":a="lt";break;case "lt":a="gt";break;case "gte":a="lte";break;case "lte":a="gte"}return new xg(this.ka,this.ha,a)};m.eval=function(a){var b=a.entries.filter(function(a){var b=I(a,this.ha);a=I(a,this.ka);return this.vc(b,a)},this);return new G(b,H(a))};m.toString=function(){return"join_pred("+this.ha.m()+" "+this.F+" "+this.ka.m()+")"};
function yg(a,b,c){var d=null,e=null;-1!=H(b).indexOf(J(a.ha.H()))?(d=b,e=c):(d=c,e=b);if(d.entries.length>e.entries.length){a:{b=a.ha;a.ha=a.ka;a.ka=b;b=a.F;switch(a.F){case "gt":b="lt";break;case "lt":b="gt";break;case "gte":b="lte";break;case "lte":b="gte";break;default:break a}a.F=b;a.vc=Id(Cd.zc(),a.ha.G(),a.F)}return[e,d]}return[d,e]}function zg(a){var b={};a.gb().forEach(function(a){b[a.getName()]=null});return b}
function Ag(a,b,c){null===a.Yd&&(a.Yd=zg(a.ka.H()));var d=new xd(new y(-1,a.Yd),!1);return Ad(b,c,d,[J(a.ka.H())])}
function Bg(a,b,c,d){var e=[b,c];d||(e=yg(a,b,c));b=e[0];c=e[1];var e=b,f=c,h=a.ha,k=a.ka;d&&(e=c,f=b,h=a.ka,k=a.ha);var n=new Kc,z=[];e.entries.forEach(function(a){var b=String(I(a,h));n.set(b,a)});var O=H(e),ca=H(f);f.entries.forEach(function(a){var b=I(a,k),c=String(b);null!==b&&n.has(c)?n.get(c).forEach(function(b){b=Ad(a,ca,b,O);z.push(b)}):d&&z.push(Ag(this,a,ca))}.bind(a));a=H(b).concat(H(c));return new G(z,a)}
function Cg(a,b,c,d,e){function f(a,b){var c=new xd(b,1<O.length),c=Ad(a,ca,c,O);z.push(c)}var h=d.Uf.H(),k=b,n=c;-1!=H(b).indexOf(J(h))&&(k=c,n=b);var z=[],O=H(n),ca=H(k);k.entries.forEach(function(a){var b=this.cg(I(a,d.ig)),b=d.index.get(b);0!=b.length&&(d.index.Ia()?f(a,e.get(b[0])):gf(e,b).forEach(f.bind(null,a)))},a);a=H(k).concat(H(n));return new G(z,a)};function Dg(a,b,c){return null===b?new Td(a,b,c):q(b.m)?new xg(a,b,c):new Td(a,b,c)};var Eg={};r("lf.schema.DataStoreType",Eg);Eg.INDEXED_DB=0;Eg.MEMORY=1;Eg.LOCAL_STORAGE=2;Eg.FIREBASE=3;Eg.WEB_SQL=4;Eg.OBSERVABLE_STORE=5;function Fg(a,b,c,d){this.Mc=a;this.name=b;this.Dc=c;this.f=d}Fg.prototype.m=function(){return this.Mc+"."+this.name};function ig(a){return a.f.some(function(a){return a.ba.ic()})}function R(a,b,c,d){this.u=a;this.pa=c;this.J=b;this.od=d;this.bb=null}r("lf.schema.Table",R);R.prototype.getName=g("u");R.prototype.getName=R.prototype.getName;R.prototype.Wa=g("bb");
function J(a){return a.bb||a.u}R.prototype.qc=function(a){var b=new this.constructor(this.u);b.bb=a;b.ug=this.ug;return b};R.prototype.as=R.prototype.qc;R.prototype.createRow=R.prototype.tb;R.prototype.deserializeRow=R.prototype.Cb;R.prototype.Aa=g("pa");R.prototype.getIndices=R.prototype.Aa;R.prototype.gb=g("J");R.prototype.getColumns=R.prototype.gb;R.prototype.getConstraint=R.prototype.Db;R.prototype.zb=g("od");R.prototype.persistentIndex=R.prototype.zb;function Qe(a){return a.u+".#"};function S(a,b){this.child=a;this.Jb=b;this.bb=null}m=S.prototype;m.getName=function(){return this.Jb+"("+this.child.getName()+")"};m.m=function(){return this.Jb+"("+this.child.m()+")"};m.H=function(){return this.child.H()};m.toString=function(){return this.m()};m.G=function(){return this.child.G()};m.Wa=g("bb");m.Aa=function(){return[]};m.za=l(null);m.ic=l(!1);m.qc=function(a){this.bb=a;return this};S.prototype.as=S.prototype.qc;
function Gg(a){for(var b=[a];a instanceof S;)b.push(a.child),a=a.child;return b}function Hg(a){this.bb=a||null;this.U=new R("#UnknownTable",[],[],!1)}m=Hg.prototype;m.getName=l("*");m.m=function(){return this.getName()};m.toString=function(){return this.m()};m.H=g("U");m.G=l(4);m.Wa=g("bb");m.Aa=function(){return[]};m.za=l(null);m.ic=l(!1);r("lf.fn.avg",function(a){return new S(a,"AVG")});function Ig(a){return new S(a||new Hg,"COUNT")}r("lf.fn.count",Ig);function Jg(a){return new S(a,"DISTINCT")}r("lf.fn.distinct",Jg);r("lf.fn.max",function(a){return new S(a,"MAX")});r("lf.fn.min",function(a){return new S(a,"MIN")});r("lf.fn.stddev",function(a){return new S(a,"STDDEV")});r("lf.fn.sum",function(a){return new S(a,"SUM")});r("lf.fn.geomean",function(a){return new S(a,"GEOMEAN")});function T(a,b){K.call(this);this.Mf=b}t(T,K);T.prototype.exec=function(a,b){switch(this.Mf){case 1:return Kg(this,a,b);case 0:return Lg(this,a,b);default:return Mg(this,a,b)}};T.prototype.toString=l("dummy_node");T.prototype.Nc=function(){return this.toString()};function Mg(a,b,c){return new v(function(a){a(this.fa([],b,c))}.bind(a))}function Kg(a,b,c){return Ld(a,0).exec(b,c).then(function(a){return this.fa(a,b,c)}.bind(a))}
function Lg(a,b,c){var d=L(a).map(function(a){return a.exec(b,c)});return eb(d).then(function(a){var d=[];a.forEach(function(a){for(var b=0;b<a.length;++b)d.push(a[b])});return this.fa(d,b,c)}.bind(a))};function Ng(a){T.call(this,0,1);this.xe=a}t(Ng,T);Ng.prototype.toString=function(){return"aggregation("+this.xe.map(function(a){return a.m()}).toString()+")"};Ng.prototype.fa=function(a){a.forEach(function(a){Og(new Pg(a,this.xe))},this);return a};function Pg(a,b){this.Ja=a;this.J=b}
function Og(a){a.J.forEach(function(a){a=Gg(a).reverse();for(var c=1;c<a.length;c++){var d=a[c],e=Gg(d).slice(-1)[0],f=d.child instanceof S?rd(this.Ja,d.child):this.Ja;if(null!==f.Va&&f.Va.has(d.m()))break;f=Qg(d.Jb,f,e);e=this.Ja;null===e.Va&&(e.Va=A());e.Va.set(d.m(),f)}},a)}
function Qg(a,b,c){var d=null;switch(a){case "MIN":d=Rg(b,c,function(a,b){return b<a?b:a});break;case "MAX":d=Rg(b,c,function(a,b){return b>a?b:a});break;case "DISTINCT":d=Sg(b,c);break;case "COUNT":d=Tg(b,c);break;case "SUM":d=Ug(b,c);break;case "AVG":a=Tg(b,c);0<a&&(d=Ug(b,c)/a);break;case "GEOMEAN":d=Vg(b,c);break;default:d=Wg(b,c)}return d}function Rg(a,b,c){return a.entries.reduce(function(a,e){var f=I(e,b);return null===f?a:null===a?f:c(a,f)},null)}
function Tg(a,b){return b instanceof Hg?a.entries.length:a.entries.reduce(function(a,d){return a+(fa(I(d,b))?0:1)},0)}function Ug(a,b){return Rg(a,b,function(a,b){return b+a})}function Wg(a,b){var c=[];a.entries.forEach(function(a){a=I(a,b);null===a||c.push(a)});return 0==c.length?null:Bb.apply(null,c)}function Vg(a,b){var c=0,d=a.entries.reduce(function(a,d){var h=I(d,b);if(0==h||null===h)return a;c++;return a+Math.log(h)},0);return 0==c?null:Math.pow(Math.E,d/c)}
function Sg(a,b){var c=A();a.entries.forEach(function(a){var e=I(a,b);c.set(e,a)});return new G(B(c),H(a))};function Xg(a,b){this.Da=a;this.aa=b}Xg.prototype.hb=g("Da");Xg.prototype.ca=g("aa");function Yg(){K.call(this)}t(Yg,K);function Zg(a,b){K.call(this);this.table=a;this.values=b}t(Zg,Yg);function $g(a,b){Zg.call(this,a,b)}t($g,Zg);function ah(a){K.call(this);this.table=a}t(ah,Yg);ah.prototype.toString=function(){return"delete("+this.table.getName()+")"};function bh(a,b){K.call(this);this.table=a;this.re=b}t(bh,Yg);
bh.prototype.toString=function(){var a=[];this.re&&(a=this.re.map(function(a){return a.M.getName()},this));return"update("+this.table.getName()+", ["+a.join(",")+"])"};function ch(a){K.call(this);this.I=a}t(ch,Yg);ch.prototype.toString=function(){return"select("+this.I.toString()+")"};function dh(a){K.call(this);this.table=a}t(dh,Yg);dh.prototype.toString=function(){var a="table_access("+this.table.getName();null===this.table.Wa()||(a+=" as "+this.table.Wa());return a+")"};
function eh(){K.call(this)}t(eh,Yg);eh.prototype.toString=l("cross_product");function fh(a,b){K.call(this);this.f=a;this.Mb=b}t(fh,Yg);fh.prototype.toString=function(){var a="project("+this.f.toString();if(null!==this.Mb)var b=this.Mb.map(function(a){return a.m()}).join(", "),a=a+(", groupBy("+b+")");return a+")"};function gh(a){K.call(this);this.N=a}t(gh,Yg);gh.prototype.toString=function(){return"order_by("+ce(this.N)+")"};function hh(a){K.call(this);this.f=a}t(hh,Yg);
hh.prototype.toString=function(){return"aggregation("+this.f.toString()+")"};function ih(a){K.call(this);this.f=a}t(ih,Yg);ih.prototype.toString=function(){return"group_by("+this.f.toString()+")"};function jh(a){K.call(this);this.W=a}t(jh,Yg);jh.prototype.toString=function(){return"limit("+this.W+")"};function kh(a){K.call(this);this.K=a}t(kh,Yg);kh.prototype.toString=function(){return"skip("+this.K+")"};function lh(a,b){K.call(this);this.I=a;this.Pb=b}t(lh,Yg);
lh.prototype.toString=function(){return"join(type: "+(this.Pb?"outer":"inner")+", "+this.I.toString()+")"};function mh(){};function nh(){}t(nh,mh);nh.prototype.nb=function(a){this.$=a;this.Ta(this.$);return this.$};nh.prototype.Ta=function(a){if(a instanceof ch){var b=oh(this,a.I),b=ph(this,b);tg(a,a,b[0],b[1]);a==this.$&&(this.$=b[0]);a=b[0]}L(a).forEach(function(a){this.Ta(a)},this)};function oh(a,b){if(0==L(b).length||"and"!=b.Rb)return[b];var c=L(b).slice().map(function(a){b.removeChild(a);return oh(this,a)},a);return Fa(c)}
function ph(a,b){var c=null,d=null;b.map(function(a,b){var h=new ch(a);0==b?c=h:Nd(d,h);d=h},a);return[c,d]};function qh(){}t(qh,mh);qh.prototype.nb=function(a,b){if(3>b.c.length)return a;this.$=a;this.Ta(this.$);return this.$};qh.prototype.Ta=function(a){if(a instanceof eh)for(;2<L(a).length;){for(var b=new eh,c=0;2>c;c++){var d=Od(a,0);Nd(b,d)}Md(a,b,0)}L(a).forEach(function(a){this.Ta(a)},this)};function rh(){T.call(this,0,0)}t(rh,T);rh.prototype.toString=l("cross_product");rh.prototype.fa=function(a){var b=a[0],c=a[1];a=[];for(var d=H(b),e=H(c),f=0;f<b.entries.length;f++)for(var h=0;h<c.entries.length;h++){var k=Ad(b.entries[f],d,c.entries[h],e);a.push(k)}b=H(b).concat(H(c));return[new G(a,b)]};function sh(a,b){fe.call(this,a,b);this.Ea=a.l(lc);this.Hb=a.l(mc)}t(sh,fe);sh.prototype.getPriority=l(2);sh.prototype.ae=function(a){0==this.G()?th(this,a):this.Kc()};function th(a,b){a.qd.forEach(function(a,d){a instanceof be&&le(this.Hb,a,b[d])},a)}sh.prototype.Kc=function(){var a=ne(this.Hb,this.ca());0!=a.length&&(a=new ke(this.global,a),oe(this.Ea,a))};function uh(a){Xd.call(this,a)}t(uh,Xd);uh.prototype.ca=function(){var a=C();a.add(this.c);vh(this,this.c.getName(),a);return a};function vh(a,b,c){var d=wh(a.ba.info(),b,1);wh(a.ba.info(),b).forEach(c.add.bind(c));d.forEach(function(a){vh(this,a.getName(),c)},a)}uh.prototype.clone=function(){var a=new uh(this.ba);$d(a,this);a.c=this.c;return a};uh.prototype.bind=function(a){uh.ab.bind.call(this,a);ae(this,a);return this};function xh(a){Xd.call(this,a)}t(xh,Xd);xh.prototype.ca=function(){var a=C();a.add(this.Ha);var b=this.ba.info();yh(this.Ha.getName(),b.Ze).forEach(a.add.bind(a));this.$b&&wh(b,this.Ha.getName()).forEach(a.add.bind(a));return a};xh.prototype.clone=function(){var a=new xh(this.ba);$d(a,this);a.Ha=this.Ha;this.values&&(a.values=this.values instanceof Bd?this.values:this.values.slice());a.$b=this.$b;a.ac=this.ac;return a};
xh.prototype.bind=function(a){xh.ab.bind.call(this,a);this.ac&&(this.values=this.ac instanceof Bd?a[this.ac.za()]:this.ac.map(function(b){return b instanceof Bd?a[b.za()]:b}));return this};function zh(a){Xd.call(this,a)}t(zh,Xd);zh.prototype.ca=function(){var a=C();a.add(this.table);var b=this.set.map(function(a){return a.M.m()}),c=this.ba.info();Ah(c,b).forEach(a.add.bind(a));Bh(c,b).forEach(a.add.bind(a));return a};zh.prototype.clone=function(){var a=new zh(this.ba);$d(a,this);a.table=this.table;a.set=this.set?this.set.slice():this.set;return a};zh.prototype.bind=function(a){zh.ab.bind.call(this,a);this.set.forEach(function(b){-1!=b.Sc&&(b.value=a[b.Sc])});ae(this,a);return this};function Ch(a,b){if(null==b)return"NULL";switch(a){case 1:return b?1:0;case 3:case 4:return b;case 0:return"'"+tb(b)+"'";default:return"'"+b.toString()+"'"}}function Dh(a,b){var c=a.$b?"INSERT OR REPLACE":"INSERT",d=a.Ha.gb(),c=c+(" INTO "+a.Ha.getName()+"("),c=c+d.map(function(a){return a.getName()}).join(", "),c=c+") VALUES (";return a.values.map(function(a){var f=d.map(function(c){var d=a.o[c.getName()];return b?null!=d?"#":"NULL":Ch(c.G(),d)});return c+f.join(", ")+");"}).join("\n")}
function Eh(a){switch(a){case "between":return"BETWEEN";case "eq":return"=";case "gte":return">=";case "gt":return">";case "in":return"IN";case "lte":return"<=";case "lt":return"<";case "match":return"LIKE";case "neq":return"<>";default:return"UNKNOWN"}}function Fh(a,b,c,d){return a instanceof Bd?"?"+a.za().toString():d?null!=a?"#":"NULL":"match"==b?"'"+a.toString()+"'":"in"==b?"("+a.map(function(a){return Ch(c,a)}).join(", ")+")":"between"==b?Ch(c,a[0])+" AND "+Ch(c,a[1]):Ch(c,a).toString()}
function Gh(a,b){return L(a).map(function(a){return"("+Hh(a,b)+")"}).join("and"==a.Rb?" AND ":" OR ")}function Ih(a){return[a.ha.m(),Eh(a.F),a.ka.m()].join(" ")}function Hh(a,b){if(a instanceof Td){var c=a.M.m(),d=Eh(a.F),e=Fh(a.value,a.F,a.M.G(),b);return"="==d&&"NULL"==e?[c,"IS NULL"].join(" "):"<>"==d&&"NULL"==e?[c,"IS NOT NULL"].join(" "):[c,d,e].join(" ")}if(a instanceof vg)return Gh(a,b);if(a instanceof xg)return Ih(a);throw new E(357,typeof a);}
function Jh(a,b){var c=Hh(a,b);return c?" WHERE "+c:""}function Kh(a,b){var c="UPDATE "+a.table.getName()+" SET ",c=c+a.set.map(function(a){var b=a.M.m()+" = ";return-1!=a.Sc?b+"?"+a.Sc.toString():b+Ch(a.M.G(),a.value).toString()}).join(", ");a.s&&(c+=Jh(a.s,b));return c+";"}
function Lh(a,b){var c="*";a.f.length&&(c=a.f.map(function(a){return a.Wa()?a.m()+" AS "+a.Wa():a.m()}).join(", "));c="SELECT "+c+" FROM ";null!=a.yb&&0!=a.yb.size?c+=Mh(a,b):(c+=a.c.map(Nh).join(", "),a.s&&(c+=Jh(a.s,b)));if(a.N)var d=a.N.map(function(a){return a.M.m()+(0==a.kb?" DESC":" ASC")}).join(", "),c=c+(" ORDER BY "+d);a.ja&&(d=a.ja.map(function(a){return a.m()}).join(", "),c+=" GROUP BY "+d);a.W&&(c+=" LIMIT "+a.W.toString());a.K&&(c+=" SKIP "+a.K.toString());return c+";"}
function Nh(a){return J(a)!=a.getName()?a.getName()+" AS "+J(a):a.getName()}function Mh(a,b){for(var c=og(a.s,function(a){return a instanceof xg}),d=c.map(Ih),e=Nh(a.c[0]),f=1;f<a.c.length;f++)var h=Nh(a.c[f]),e=a.yb.has(c[d.length-f].Y())?e+(" LEFT OUTER JOIN "+h):e+(" INNER JOIN "+h),e=e+(" ON ("+d[d.length-f]+")");c=Ld(a.s,0);c instanceof xg||(e+=" WHERE "+Hh(c,b));return e}
function Oh(a,b){var c=b||!1,d=a.a.clone();if(d instanceof xh)return Dh(d,c);if(d instanceof uh){var e="DELETE FROM "+d.c.getName();d.s&&(e+=Jh(d.s,c));return e+";"}if(d instanceof zh)return Kh(d,c);if(d instanceof be)return Lh(d,c);throw new E(358,typeof d);};function U(a,b){this.global=a;this.tg=a.l(kc);this.Ea=a.l(lc);this.a=b}r("lf.query.BaseBuilder",U);U.prototype.exec=function(){try{this.cb()}catch(a){return bb(a)}return new v(function(a,b){var c=new sh(this.global,[this.Bc()]);oe(this.Ea,c).then(function(b){a(pd(b[0]))},b)},this)};U.prototype.exec=U.prototype.exec;U.prototype.Of=function(){var a=function(a){return a.Nc(this.a)+"\n"}.bind(this);return ug(Ph(this).hb(),a)};U.prototype.explain=U.prototype.Of;
U.prototype.bind=function(a){this.a.bind(a);return this};U.prototype.bind=U.prototype.bind;U.prototype.Bg=function(a){return Oh(this,a)};U.prototype.toSql=U.prototype.Bg;U.prototype.cb=aa();function Ph(a){if(null==a.$e){var b;b=a.tg;var c=a.a,d=b.fg.create(c);b=b.qg.create(d,c);a.$e=b}return a.$e}U.prototype.Bc=function(){return{context:this.a.clone(),de:Ph(this)}};function Qh(a){U.call(this,a,new uh(a.l(nc)))}t(Qh,U);r("lf.query.DeleteBuilder",Qh);Qh.prototype.c=function(a){if(null!=this.a.c)throw new E(515);this.a.c=a;return this};Qh.prototype.from=Qh.prototype.c;Qh.prototype.s=function(a){this.Ad();this.a.s=a;return this};Qh.prototype.where=Qh.prototype.s;Qh.prototype.Ad=function(){if(null==this.a.c)throw new E(548);if(null!=this.a.s)throw new E(516);};Qh.prototype.cb=function(){Qh.ab.cb.call(this);if(null==this.a.c)throw new E(517);};function Rh(a,b){U.call(this,a,new xh(a.l(nc)));this.a.$b=b||!1}t(Rh,U);r("lf.query.InsertBuilder",Rh);Rh.prototype.cb=function(){Rh.ab.cb.call(this);var a=this.a;if(null==a.Ha||null==a.values)throw new E(518);if(a.$b&&null===a.Ha.Db().cd())throw new E(519);};Rh.prototype.Ha=function(a){if(null!=this.a.Ha)throw new E(520);this.a.Ha=a;return this};Rh.prototype.into=Rh.prototype.Ha;
Rh.prototype.values=function(a){if(null!=this.a.values)throw new E(521);a instanceof Bd||a.some(function(a){return a instanceof Bd})?this.a.ac=a:this.a.values=a;return this};Rh.prototype.values=Rh.prototype.values;function Sh(a){return Th("and",Array.prototype.slice.call(arguments))}r("lf.op.and",Sh);r("lf.op.or",function(a){return Th("or",Array.prototype.slice.call(arguments))});function Th(a,b){var c=new vg(a);b.forEach(function(a){Nd(c,a)});return c}r("lf.op.not",function(a){a.td(!0);return a});function V(a,b){U.call(this,a,new be(a.l(nc)));this.He=this.vd=!1;this.a.f=b;Uh(this);Vh(this)}t(V,U);r("lf.query.SelectBuilder",V);V.prototype.cb=function(){V.ab.cb.call(this);var a=this.a;if(null==a.c)throw new E(522);if(q(a.Qb)&&!q(a.W)||q(a.Xb)&&!q(a.K))throw new E(523);null!=this.a.ja?Wh(this):Xh(this)};function Uh(a){var b=a.a.f.filter(function(a){return a instanceof S&&"DISTINCT"==a.Jb},a);if(0!=b.length&&(1!=b.length||1!=a.a.f.length))throw new E(524);}
function Wh(a){var b=a.a.f.filter(function(a){return!(a instanceof S)}).map(function(a){return a.m()}),c=!1;if(0==a.a.ja.length||0==a.a.f.length)c=!0;else{var d=a.a.ja.map(function(a){return a.m()});(c=b.some(function(a){return-1==d.indexOf(a)}))||(c=a.a.ja.some(function(a){a=a.G();return 6==a||0==a}))}if(c)throw new E(525);}function Xh(a){var b=a.a.f.some(function(a){return a instanceof S},a);a=a.a.f.some(function(a){return!(a instanceof S)},a)||0==a.a.f.length;if(b&&a)throw new E(526);}
function Vh(a){a.a.f.forEach(function(a){if(a instanceof S&&!Yh(a.Jb,a.G()))throw new E(527,a.m());},a)}function Zh(a,b){if(null==a.a.c)throw new E(b);}V.prototype.c=function(a){if(this.He)throw new E(515);this.He=!0;null==this.a.c&&(this.a.c=[]);this.a.c.push.apply(this.a.c,Array.prototype.slice.call(arguments));return this};V.prototype.from=V.prototype.c;V.prototype.s=function(a){Zh(this,548);if(this.vd)throw new E(516);this.vd=!0;$h(this,a);return this};V.prototype.where=V.prototype.s;
function $h(a,b){if(null!=a.a.s){var c=Sh(b,a.a.s);a.a.s=c}else a.a.s=b}V.prototype.Yf=function(a,b){Zh(this,542);if(this.vd)throw new E(547);this.a.c.push(a);$h(this,b);return this};V.prototype.innerJoin=V.prototype.Yf;V.prototype.dg=function(a,b){Zh(this,542);if(!(b instanceof xg))throw new E(541);if(this.vd)throw new E(547);this.a.c.push(a);null==this.a.yb&&(this.a.yb=C());var c=b;J(a)!=J(b.ka.H())&&(c=b.reverse());this.a.yb.add(c.Y());$h(this,c);return this};V.prototype.leftOuterJoin=V.prototype.dg;
V.prototype.W=function(a){if(null!=(this.a.W||this.a.Qb))throw new E(528);if(a instanceof Bd)this.a.Qb=a;else{if(0>a)throw new E(531);this.a.W=a}return this};V.prototype.limit=V.prototype.W;V.prototype.K=function(a){if(null!=(this.a.K||this.a.Xb))throw new E(529);if(a instanceof Bd)this.a.Xb=a;else{if(0>a)throw new E(531);this.a.K=a}return this};V.prototype.skip=V.prototype.K;V.prototype.N=function(a,b){Zh(this,549);null==this.a.N&&(this.a.N=[]);this.a.N.push({M:a,kb:null!=b?b:1});return this};
V.prototype.orderBy=V.prototype.N;V.prototype.ja=function(a){Zh(this,549);if(null!=this.a.ja)throw new E(530);null==this.a.ja&&(this.a.ja=[]);this.a.ja.push.apply(this.a.ja,Array.prototype.slice.call(arguments));return this};V.prototype.groupBy=V.prototype.ja;function Yh(a,b){switch(a){case "COUNT":case "DISTINCT":return!0;case "AVG":case "GEOMEAN":case "STDDEV":case "SUM":return 4==b||3==b;case "MAX":case "MIN":return 4==b||3==b||5==b||2==b}return!1}
V.prototype.clone=function(){var a=new V(this.global,this.a.f);a.a=this.a.clone();a.a.Wc=null;return a};V.prototype.clone=V.prototype.clone;function ai(a,b){U.call(this,a,new zh(a.l(nc)));this.a.table=b}t(ai,U);r("lf.query.UpdateBuilder",ai);ai.prototype.set=function(a,b){var c={Sc:b instanceof Bd?b.za():-1,M:a,value:b};null!=this.a.set?this.a.set.push(c):this.a.set=[c];return this};ai.prototype.set=ai.prototype.set;ai.prototype.s=function(a){this.Ad();this.a.s=a;return this};ai.prototype.where=ai.prototype.s;ai.prototype.Ad=function(){if(null!=this.a.s)throw new E(516);};
ai.prototype.cb=function(){ai.ab.cb.call(this);if(null==this.a.set)throw new E(532);if(this.a.set.some(function(a){return a.value instanceof Bd}))throw new E(501);};function bi(a){this.a=a;this.Da=null}bi.prototype.hc=function(){null===this.Da&&(this.Da=this.ad());return this.Da};function ci(a){bi.call(this,a)}t(ci,bi);ci.prototype.ad=function(){return this.a.$b?new $g(this.a.Ha,this.a.values):new Zg(this.a.Ha,this.a.values)};function di(a){bi.call(this,a)}t(di,bi);di.prototype.ad=function(){var a=new bh(this.a.table,this.a.set),b=null!=this.a.s?new ch(this.a.s.Kb()):null,c=new dh(this.a.table);null===b?Nd(a,c):(Nd(b,c),Nd(a,b));return a};function ei(a,b,c){this.Da=a;this.ee=b;this.Ub=c}ei.prototype.hc=function(){this.Ub.forEach(function(a){this.Da=a.nb(this.Da,this.ee)},this);return this.Da};function fi(a,b){bi.call(this,a);this.Ub=b}t(fi,bi);fi.prototype.ad=function(){var a=new ah(this.a.c),b=null!=this.a.s?new ch(this.a.s.Kb()):null,c=new dh(this.a.c);null===b?Nd(a,c):(Nd(b,c),Nd(a,b));return(new ei(a,this.a,this.Ub)).hc()};function gi(){}t(gi,mh);gi.prototype.nb=function(a,b){if(2>b.c.length)return a;this.$=a;this.Ta(this.$,b);return this.$};gi.prototype.Ta=function(a,b){if(a instanceof ch&&a.I instanceof xg){var c=a.I.Y(),d=Ld(a,0);d instanceof eh&&(c=null!=b.yb&&b.yb.has(c),c=new lh(a.I,c),tg(a,d,c,c),a==this.$&&(this.$=c),a=c)}L(a).forEach(function(a){this.Ta(a,b)},this)};function hi(){this.Rc=C()}t(hi,mh);hi.prototype.nb=function(a,b){this.Rc.clear();if(!q(b.s))return a;this.$=a;this.Ta(this.$);this.Rc.clear();return this.$};hi.prototype.Ta=function(a){if(ii(a)){var b=a.I instanceof Td?ji(this,a):ki(this,a);this.Rc.add(a);b==a&&(b=Ld(a,0));null!==b&&(fa(b.getParent())&&(this.$=b),ii(b)&&!this.Rc.has(b)&&this.Ta(b))}else L(a).forEach(function(a){this.Ta(a)},this)};
function li(a,b,c){var d=b;if(Ld(b,0)instanceof ch)d=rg(b),li(a,b,c);else if(mi(b)){var e=[],d=sg(b,c,function(a){a=new ch(a.I);e.push(a);return a});e.forEach(function(a){li(this,a,c)},a)}return d}function ji(a,b){var c=C([J(b.I.M.H())]),d=function(a){return ni(this,a,c)}.bind(a);return li(a,b,d)}function ki(a,b){var c=C([J(b.I.ha.H()),J(b.I.ka.H())]),d=function(a){return ni(this,a,c)}.bind(a);return li(a,b,d)}
function ni(a,b,c){var d=C();ng(b).forEach(function(a){d.add(J(a.table))},a);b instanceof dh&&d.add(J(b.table));return oc(d,c)}function ii(a){return a instanceof ch&&!(a.I instanceof vg)}function mi(a){a=Ld(a,0);return a instanceof eh||a instanceof lh};function oi(a,b){bi.call(this,a);this.Ub=b;this.df=this.Ve=this.mf=this.Ye=this.ye=this.Ke=this.lf=this.Ee=this.of=null}t(oi,bi);
oi.prototype.ad=function(){pi(this);2<=this.a.c.length&&(this.Ee=new eh);this.lf=null!=this.a.s?new ch(this.a.s.Kb()):null;this.a.N&&(this.Ye=new gh(this.a.N));null!=this.a.K&&0<this.a.K&&(this.mf=new kh(this.a.K));null!=this.a.W&&(this.Ve=new jh(this.a.W));null!=this.a.ja&&(this.Ke=new ih(this.a.ja));qi(this);this.df=new fh(this.a.f||[],this.a.ja||null);var a=ri(this);return(new ei(a,this.a,this.Ub)).hc()};
function ri(a){for(var b=[a.Ve,a.mf,a.df,a.Ye,a.ye,a.Ke,a.lf,a.Ee],c=null,d=null,e=0;e<b.length;e++){var f=b[e];null!==f&&(null===d?d=f:Nd(b[c],f),c=e)}a.of.forEach(function(a){Nd(b[c],a)});return d}function pi(a){a.of=a.a.c.map(function(a){return new dh(a)},a)}function qi(a){var b=a.a.f.filter(function(a){return a instanceof S});null!=a.a.N&&a.a.N.forEach(function(a){a.M instanceof S&&b.push(a.M)});0<b.length&&(a.ye=new hh(b))};function si(){this.ke=[new nh,new qh,new hi,new gi];this.Id=[new nh]}si.prototype.create=function(a){var b=null;if(a instanceof xh)b=new ci(a);else if(a instanceof uh)b=new fi(a,this.Id);else if(a instanceof be)b=new oi(a,this.ke);else if(a instanceof zh)b=new di(a);else throw new E(513);b=b.hc();return new Xg(b,a.ca())};function ti(a){T.call(this,0,1);this.U=a}t(ti,T);ti.prototype.toString=function(){return"delete("+this.U.getName()+")"};ti.prototype.fa=function(a,b){var c=a[0].entries.map(function(a){return a.ta});b.remove(this.U,c);return[td()]};function ui(a,b){T.call(this,0,-1);this.table=b;this.D=a.l(jc)}t(ui,T);ui.prototype.toString=function(){return"get_row_count("+this.table.getName()+")"};ui.prototype.fa=function(){var a=this.D.get(Qe(this.table)),b=new G([],[this.table.getName()]),c=Ig(),a=a.Ma().na;null===b.Va&&(b.Va=A());b.Va.set(c.m(),a);return[b]};function vi(a,b){T.call(this,0,-1);this.V=a.l(ic);this.D=a.l(jc);this.table=b}t(vi,T);vi.prototype.toString=function(){var a="table_access("+this.table.getName();null===this.table.Wa()||(a+=" as "+this.table.Wa());return a+")"};vi.prototype.fa=function(){var a=this.D.get(Qe(this.table)).Xa();return[wd(gf(this.V,a),[J(this.table)])]};function wi(a){this.h=a}t(wi,mh);wi.prototype.nb=function(a,b){this.$=a;if(!this.Bd(b))return a;var c=og(a,function(a){return a instanceof vi})[0],d=new ui(this.h,c.table);tg(c,c,d,d);return this.$};wi.prototype.Bd=function(a){return 1==a.f.length&&1==a.c.length&&null==a.s&&null==a.W&&null==a.K&&null==a.ja?(a=a.f[0],a instanceof S&&"COUNT"==a.Jb&&a.child instanceof Hg):!1};function xi(a){T.call(this,0,1);this.Je=a}t(xi,T);xi.prototype.toString=function(){return"groupBy("+this.Je.map(function(a){return a.m()}).toString()+")"};xi.prototype.fa=function(a){return yi(this,a[0])};function yi(a,b){var c=new Kc,d=function(a){return this.Je.map(function(b){return I(a,b)},this).join(",")}.bind(a);b.entries.forEach(function(a){c.set(d(a),a)},a);return c.keys().map(function(a){return new G(c.get(a),H(b))},a)};function zi(a,b,c){T.call(this,0,0);this.D=a.l(jc);this.V=a.l(ic);this.I=b;this.Pb=c;this.yd="eq"==this.I.F?0:2;this.Le=null}t(zi,T);var Ai=["hash","index_nested_loop","nested_loop"];zi.prototype.toString=function(){return"join(type: "+(this.Pb?"outer":"inner")+", impl: "+Ai[this.yd]+", "+this.I.toString()+")"};
zi.prototype.fa=function(a){switch(this.yd){case 0:return[Bg(this.I,a[0],a[1],this.Pb)];case 1:return[Cg(this.I,a[0],a[1],this.Le,this.V)];default:var b=this.I,c=a[0];a=a[1];var d=this.Pb,e=[c,a];d||(e=yg(b,c,a));c=e[0];a=e[1];for(var e=[],f=H(c),h=H(a),k=c.entries.length,n=a.entries.length,z=n+256-1>>8,O=0;O<z;){for(var ca=0;ca<k;ca++){var zb=!1,Tf=I(c.entries[ca],b.ha);if(null!==Tf)for(var Qc=Math.min(O+1<<8,n),Ya=O<<8;Ya<Qc;Ya++)if(b.vc(Tf,I(a.entries[Ya],b.ka))){var zb=!0,he=Ad(c.entries[ca],
f,a.entries[Ya],h);e.push(he)}d&&!zb&&e.push(Ag(b,c.entries[ca],f))}O++}b=H(c).concat(H(a));return[new G(e,b)]}};function Bi(a,b){a.yd=1;var c=a.D.get(b.za().m());a.Le={Uf:b,ig:b==a.I.ha?a.I.ka:a.I.ha,index:c}};function Ci(a){T.call(this,0,-1);this.ef=a}t(Ci,T);Ci.prototype.toString=function(){return"no_op_step("+H(this.ef[0]).join(",")+")"};Ci.prototype.fa=g("ef");function Di(){}t(Di,mh);Di.prototype.nb=function(a,b){this.$=a;if(!this.Bd(b))return a;og(a,function(a){return a instanceof zi}).forEach(this.sg,this);return this.$};Di.prototype.Bd=function(a){return 1<a.c.length};
Di.prototype.sg=function(a){if("eq"==a.I.F&&!a.Pb){var b=function(b){if(!(b instanceof vi))return null;b=J(b.table)==J(a.I.ka.H())?a.I.ka:a.I.ha;return fa(b.za())?null:b},c=b(Ld(a,0)),b=b(Ld(a,1));if(null!==c||null!==b){b=null===b?c:b;Bi(a,b);var d=new G([],[J(b.H())]);Pd(a,new Ci([d]),b==c?0:1)}}};function Ei(a){a=a.map(function(a){return a.Eb()});a=Gb.apply(null,a);var b=[];Fb(a,function(a){b.push(a)});return b}function Fi(a){this.Nb=a}Fi.prototype.bd=function(){return 1==this.Nb.f.length?[md()]:[this.Nb.f.map(function(){return md()})]};function Gi(a,b){this.Nb=a;this.Ca=b;this.Fd=this.Te=null}
function Hi(a,b){var c=A();a.Ca.keys().forEach(function(a){var e=this.Ca.get(a).map(function(a){return Yd(b,a)},this),f=new kg([md()]);e.forEach(function(a){var b=null;"between"==a.F?b=new hd(Wd(a,a.value[0]),Wd(a,a.value[1]),!1,!1):(b=Wd(a,a.value),b="eq"==a.F?new hd(b,b,!1,!1):"gte"==a.F?new hd(b,F,!1,!1):"gt"==a.F?new hd(b,F,!0,!1):"lte"==a.F?new hd(F,b,!1,!1):new hd(F,b,!1,!0));a=a.Ya?id(b):[b];a=new kg(a);f=lg(f,a)});c.set(a,f)},a);return c}
Gi.prototype.bd=function(a){if(this.Te==a)return this.Fd;for(var b=Hi(this,a),c=this.Nb.f.length-1;0<=c;c--){var d=this.Nb.f[c];if(null!==(b.get(d.ba.getName())||null))break;b.set(d.ba.getName(),new kg([md()]))}this.Fd=1==this.Nb.f.length?B(b)[0].Eb():Ei(Ii(this,b));this.Te=a;return this.Fd};function Ii(a,b){var c=A(),d=0;a.Nb.f.forEach(function(a){c.set(a.ba.getName(),d);d++});return Yb(b).sort(function(a,b){return c.get(a)-c.get(b)}).map(function(a){return b.get(a)})};function Ji(a,b){this.pf=b;this.D=a.l(jc)}function Ki(a,b,c){c=c.filter(a.Zf,a);if(0==c.length)return null;a=Li(a,c);if(0==a.length)return null;if(1==a.length)return a[0];var d=Number.MAX_VALUE;return a.reduce(function(a,c){var h=Mi(c,b);return h<d?(d=h,c):a},null)}
function Li(a,b){return a.pf.Aa().map(function(a){a=new Ni(this.D,a);Oi(a,b);return a},a).filter(function(a){if(null===a.Ca)a=!1;else{for(var b=!1,e=!0,f=0;f<a.wb.f.length;f++){var h=a.Ca.has(a.wb.f[f].ba.getName());if(b&&h){e=!1;break}h||(b=!0)}a=e}return a})}Ji.prototype.Zf=function(a){var b;if(b=a instanceof Td)Ud(a),b=null!==a.value&&("between"==a.F||"eq"==a.F||"gt"==a.F||"gte"==a.F||"lt"==a.F||"lte"==a.F);return b?a.M.H()==this.pf:!1};
function Ni(a,b){this.D=a;this.wb=b;this.Vf=C(this.wb.f.map(function(a){return a.ba.getName()}));this.Ud=this.Ca=null}function Pi(a){null===a.Ud&&(a.Ud=new Gi(a.wb,a.Ca));return a.Ud}function Oi(a,b){b.forEach(function(a){var b=a.gb()[0].getName();this.Vf.has(b)&&(null===this.Ca&&(this.Ca=new Kc),this.Ca.set(b,a.Y()))},a)}function Mi(a,b){var c=Pi(a).bd(b),d=a.D.get(a.wb.m());return c.reduce(function(a,b){return a+d.Zc(b)},0)};function Qi(a,b,c,d){T.call(this,0,-1);this.D=a.l(jc);this.index=b;this.Se=c;this.ie=d;this.Qc=this.Pc=!1}t(Qi,T);Qi.prototype.toString=function(){return"index_range_scan("+this.index.m()+", ?, "+(this.ie?"reverse":"natural")+(this.Pc?", limit:?":"")+(this.Qc?", skip:?":"")+")"};Qi.prototype.Nc=function(a){var b=this.toString(),c=this.Se.bd(a),b=b.replace("?",c.toString());this.Pc&&(b=b.replace("?",a.W.toString()));this.Qc&&(b=b.replace("?",a.K.toString()));return b};
Qi.prototype.fa=function(a,b,c){a=this.Se.bd(c);b=this.D.get(this.index.m());c=(1==a.length&&a[0]instanceof hd&&nd(a[0])?mf(b.get(a[0].c),!1,this.Pc?c.W:void 0,this.Qc?c.K:void 0):b.Xa(a,this.ie,this.Pc?c.W:void 0,this.Qc?c.K:void 0)).map(function(a){return new y(a,{})},this);return[wd(c,[this.index.Mc])]};function Ri(a){T.call(this,0,1);this.pd=a}t(Ri,T);Ri.prototype.toString=l("select(?)");Ri.prototype.Nc=function(a){a=Yd(a,this.pd);return this.toString().replace("?",a.toString())};Ri.prototype.fa=function(a,b,c){return[Yd(c,this.pd).eval(a[0])]};function Si(a,b){T.call(this,0,1);this.V=a.l(ic);this.U=b}t(Si,T);Si.prototype.toString=function(){return"table_access_by_row_id("+this.U.getName()+")"};Si.prototype.fa=function(a){return[wd(gf(this.V,qd(a[0])),[J(this.U)])]};function Ti(a){this.h=a}t(Ti,mh);Ti.prototype.nb=function(a,b){this.$=a;og(a,function(a){return a instanceof vi}).forEach(function(a){var d=Ui(a);if(0!=d.length){var e=Ki(new Ji(this.h,a.table),b,d.map(function(a){return Yd(b,a.pd)}));if(null!==e){var f=A();d.forEach(function(a){f.set(a.pd,a)},this);this.$=Vi(this,e,f,a)}}},this);return this.$};function Ui(a){var b=[];for(a=a.getParent();a;)a instanceof Ri&&b.push(a),a=a.getParent();return b}
function Vi(a,b,c,d){(null===b.Ca?[]:b.Ca.values()).map(function(a){return c.get(a)}).forEach(pg);b=new Qi(a.h,b.wb,Pi(b),!1);a=new Si(a.h,d.table);Nd(a,b);tg(d,d,a,b);return b.hb()};function Wi(a,b){T.call(this,0,-1);this.D=a.l(jc);this.U=b}t(Wi,T);Wi.prototype.toString=function(){return"insert("+this.U.getName()+")"};Wi.prototype.fa=function(a,b,c){Xi(this.U,c.values,this.D);b.xb(this.U,c.values);return[wd(c.values,[this.U.getName()])]};function Xi(a,b,c){a=a.Db().cd();if(null===a?0:a.f[0].autoIncrement){var d=a.f[0].ba.getName();c=c.get(a.m()).max();var e=null===c?0:c[0];b.forEach(function(a){if(0==a.o[d]||null==a.o[d])e++,a.o[d]=e})}}
function Yi(a,b){T.call(this,0,-1);this.D=a.l(jc);this.U=b}t(Yi,T);Yi.prototype.toString=function(){return"insert_replace("+this.U.getName()+")"};Yi.prototype.fa=function(a,b,c){Xi(this.U,c.values,this.D);b.Qd(this.U,c.values);return[wd(c.values,[this.U.getName()])]};function Zi(){T.call(this,0,1)}t(Zi,T);Zi.prototype.toString=l("limit(?)");Zi.prototype.Nc=function(a){return this.toString().replace("?",a.W.toString())};Zi.prototype.fa=function(a,b,c){a[0].entries.splice(c.W);return a};function $i(a){T.call(this,0,1);this.N=a}t($i,T);m=$i.prototype;m.toString=function(){return"order_by("+ce(this.N)+")"};m.fa=function(a){if(1==a.length){var b;b=a[0];for(var c=null,d=0;d<this.N.length;d++){var e=Jg(this.N[d].M);if(null!==b.Va&&b.Va.has(e.m())){c=e;break}}b=c;(null===b?a[0]:rd(a[0],b)).entries.sort(this.Lf.bind(this))}else a.sort(this.vg.bind(this));return a};
m.O=function(a,b){var c=null,d=null,e=null,f=-1;do f++,e=this.N[f].M,c=this.N[f].kb,d=a(e),e=b(e);while(d==e&&f+1<this.N.length);d=d<e?-1:d>e?1:0;return 1==c?d:-d};m.vg=function(a,b){return this.O(function(b){return b instanceof S?rd(a,b):I(a.entries[a.entries.length-1],b)},function(a){return a instanceof S?rd(b,a):I(b.entries[b.entries.length-1],a)})};m.Lf=function(a,b){return this.O(function(b){return I(a,b)},function(a){return I(b,a)})};function aj(a,b){this.Ja=a;this.J=b}function bj(a){return a.J.some(function(a){return a instanceof S},a)?cj(a):dj(a)}function cj(a){if(1==a.J.length&&"DISTINCT"==a.J[0].Jb)return a=rd(a.Ja,a.J[0]).entries.map(function(a){var b=new xd(new y(-1,{}),1<this.Ja.L.size);zd(b,this.J[0],I(a,this.J[0].child));return b},a),new G(a,[]);var b=new xd(new y(-1,{}),1<a.Ja.L.size);a.J.forEach(function(a){var d=a instanceof S?rd(this.Ja,a):I(this.Ja.entries[0],a);zd(b,a,d)},a);return new G([b],H(a.Ja))}
function dj(a){var b=Array(a.Ja.entries.length),c=1<a.Ja.L.size;a.Ja.entries.forEach(function(a,e){b[e]=new xd(new y(a.ta.id(),{}),c);this.J.forEach(function(c){zd(b[e],c,I(a,c))},this)},a);return new G(b,H(a.Ja))}function ej(a,b){var c=a.map(function(a){return bj(new aj(a,b)).entries[0]});return new G(c,H(a[0]))};function fj(a,b){T.call(this,0,1);this.f=a;this.Mb=b}t(fj,T);fj.prototype.toString=function(){var a="project("+this.f.toString();if(null!==this.Mb)var b=this.Mb.map(function(a){return a.m()}).join(", "),a=a+(", groupBy("+b+")");return a+")"};fj.prototype.fa=function(a){0==a.length?a=[td()]:1==a.length?(a=a[0],a=[0==this.f.length?a:bj(new aj(a,this.f))]):a=[ej(a,this.f)];return a};function gj(a){return a.f.some(function(a){return a instanceof S})||null!==a.Mb};function hj(){T.call(this,0,1)}t(hj,T);hj.prototype.toString=l("skip(?)");hj.prototype.Nc=function(a){return this.toString().replace("?",a.K.toString())};hj.prototype.fa=function(a,b,c){return[new G(a[0].entries.slice(c.K),H(a[0]))]};function ij(){}t(ij,mh);ij.prototype.nb=function(a,b){if(!q(b.W)&&!q(b.K))return a;var c=jj(a);if(null===c)return a;og(a,function(a){return a instanceof Zi||a instanceof hj}).forEach(function(a){a instanceof Zi?c.Pc=!0:c.Qc=!0;pg(a)},this);return c.hb()};function jj(a){a=og(a,function(a){return a instanceof Qi},function(a){return a instanceof fj&&gj(a)||a instanceof $i||1!=L(a).length||a instanceof Ri});return 0<a.length?a[0]:null};function kj(a){this.h=a}t(kj,mh);kj.prototype.nb=function(a,b){var c=lj(a,b);if(null===c)return a;var d;a:{var e=c;d=mj(Ld(c,0));if(null!==d){var f;f=c.N;for(var h=null,k=d.table.Aa(),n=0;n<k.length&&null===h;n++)h=nj(k[n],f);f=h;if(null===f){d=e;break a}e=new Qi(this.h,f.wb,new Fi(f.wb),f.Pe);f=new Si(this.h,d.table);Nd(f,e);pg(c);e=tg(d,d,f,e)}d=e}if(d==c)a:if(d=c,e=oj(Ld(c,0)),null!==e){f=nj(e.index,c.N);if(null===f)break a;e.ie=f.Pe;d=pg(c).parent}return d.hb()};
function oj(a){a=og(a,function(a){return a instanceof Qi},function(a){return 1!=L(a).length});return 0<a.length?a[0]:null}function mj(a){a=og(a,function(a){return a instanceof vi},function(a){return 1!=L(a).length});return 0<a.length?a[0]:null}function lj(a,b){return q(b.N)?og(a,function(a){return a instanceof $i})[0]:null}function nj(a,b){if(a.f.length!=b.length||!b.every(function(b,c){return b.M.getName()==a.f[c].ba.getName()}))return null;var c=pj(b,a);return c[0]||c[1]?{wb:a,Pe:c[1]}:null}
function pj(a,b){var c=a.reduce(function(a,b){return a<<1|(0==b.kb?0:1)},0),d=b.f.reduce(function(a,b){return a<<1|(0==b.kb?0:1)},0),c=c^d;return[0==c,c==Math.pow(2,Math.max(a.length,b.f.length))-1]};function qj(a,b,c){this.Da=a;this.ee=b;this.Ub=c}qj.prototype.hc=function(){this.Ub.forEach(function(a){this.Da=a.nb(this.Da,this.ee)},this);return this.Da};function rj(a,b){T.call(this,0,1);this.U=a;this.Eg=b}t(rj,T);rj.prototype.toString=function(){return"update("+this.U.getName()+")"};rj.prototype.fa=function(a,b){var c=a[0].entries.map(function(a){var b=this.U.Cb(a.ta.Fa());this.Eg.forEach(function(a){b.o[a.M.getName()]=a.value},this);return b},this);b.update(this.U,c);return[td()]};function sj(a){this.h=a;this.ke=[new Di,new Ti(this.h),new kj(this.h),new ij,new wi(this.h)];this.Id=[new Ti(this.h)]}sj.prototype.create=function(a,b){var c=a.hb();if(c instanceof $g||c instanceof Zg)return tj(this,a,b);if(c instanceof fh||c instanceof jh||c instanceof kh)return tj(this,a,b,this.ke);if(c instanceof ah||c instanceof bh)return tj(this,a,b,this.Id);throw new E(8);};function tj(a,b,c,d){a=mg(b.hb(),a.hg.bind(a));null!=d&&(a=(new qj(a,c,d)).hc());return new de(a,b.ca())}
sj.prototype.hg=function(a){if(a instanceof fh)return new fj(a.f,a.Mb);if(a instanceof ih)return new xi(a.f);if(a instanceof hh)return new Ng(a.f);if(a instanceof gh)return new $i(a.N);if(a instanceof kh)return new hj;if(a instanceof jh)return new Zi;if(a instanceof ch)return new Ri(a.I.Y());if(a instanceof eh)return new rh;if(a instanceof lh)return new zi(this.h,a.I,a.Pb);if(a instanceof dh)return new vi(this.h,a.table);if(a instanceof ah)return new ti(a.table);if(a instanceof bh)return new rj(a.table,
a.re);if(a instanceof $g)return new Yi(this.h,a.table);if(a instanceof Zg)return new Wi(this.h,a.table);throw new E(514);};function uj(a){this.fg=new si;this.qg=new sj(a)};function vj(){this.We=A()}function wj(a,b){var c=a.We.get(b.getName())||null;null===c&&(c=new xj,a.We.set(b.getName(),c));return c}function yj(a,b,c,d){c.forEach(function(a){a=wj(this,a);0==d?(a.Za=null,a.wc=b):3==d?(null===a.Wb&&(a.Wb=C()),a.Wb.add(b),null===a.Qa&&(a.Qa=C()),a.Qa.delete(b)):1==d?(null===a.Qa&&(a.Qa=C()),a.Qa.add(b)):2==d&&(a.Za=b)},a)}
function zj(a,b,c,d){var e=!0;c.forEach(function(a){if(e){a=wj(this,a);var c=null===a.Qa||0==a.Qa.size;e=0==d?(null===a.Wb||0==a.Wb.size)&&c&&null===a.wc&&null!==a.Za&&a.Za==b:3==d?null===a.wc&&null===a.Za&&null!==a.Qa&&a.Qa.has(b):1==d?null===a.Za:c&&(null===a.Za||a.Za==b)}},a);return e}function Aj(a,b,c,d){var e=zj(a,b,c,d);e&&yj(a,b,c,d);return e}vj.prototype.releaseLock=function(a,b){b.forEach(function(b){wj(this,b).releaseLock(a)},this)};
function Bj(a,b){b.forEach(function(a){wj(this,a).Za=null},a)}function xj(){this.Wb=this.Qa=this.Za=this.wc=null}xj.prototype.releaseLock=function(a){this.wc==a&&(this.wc=null);this.Za==a&&(this.Za=null);null===this.Qa||this.Qa.delete(a);null===this.Wb||this.Wb.delete(a)};function Cj(){this.Tb=new Dj;this.Ec=new vj}function oe(a,b){(2>b.getPriority()||2>b.getPriority())&&Bj(a.Ec,b.ca());a.Tb.xb(b);Ej(a);return b.Lb().da}function Ej(a){for(var b=a.Tb.Eb(),c=0;c<b.length;c++){var d=b[c],e=!1;if(e=0==d.G()?Fj(a,d,1,3):Fj(a,d,2,0))a.Tb.remove(d),e=a,d.exec().then(e.ng.bind(e,d),e.mg.bind(e,d))}}function Fj(a,b,c,d){var e=!1;Aj(a.Ec,b.Y(),b.ca(),c)&&(e=Aj(a.Ec,b.Y(),b.ca(),d));return e}Cj.prototype.ng=function(a,b){this.Ec.releaseLock(a.Y(),a.ca());a.Lb().resolve(b);Ej(this)};
Cj.prototype.mg=function(a,b){this.Ec.releaseLock(a.Y(),a.ca());a.Lb().reject(b);Ej(this)};function Dj(){this.Tb=[]}Dj.prototype.xb=function(a){kf(this.Tb,a,function(a,c){var d=a.getPriority()-c.getPriority();return 0==d?a.Y()-c.Y():d})};Dj.prototype.Eb=function(){return this.Tb.slice()};Dj.prototype.remove=function(a){var b=this.Tb;a=xa(b,a);var c;(c=0<=a)&&Array.prototype.splice.call(b,a,1);return c};function Gj(a,b){this.Jd=Cd.zc();this.fe=a;this.ld=b;this.J=Hj(this)}function Hj(a){if(0<a.fe.f.length)return a.fe.f;var b=[];a.fe.c.forEach(function(a){a.gb().forEach(function(a){b.push(a)})});return b}Gj.prototype.O=function(a,b){return this.J.every(function(c){return Id(this.Jd,c.G(),"eq")(I(a,c),I(b,c))},this)};
function Ij(a,b,c){var d=null===b?[]:b.entries,e=wb(d,c.entries,a.O.bind(a),function(a){return d[a]});b=[];for(var f=0,h=0;h<d.length;h++){var k=d[h];e[f]==k?f++:(k=a.ld.splice(f,1),k=Jj(h,k,0,a.ld),b.push(k))}e=wb(d,c.entries,a.O.bind(a),function(a,b){return c.entries[b]});for(h=f=0;h<c.entries.length;h++)k=c.entries[h],e[f]==k?f++:(a.ld.splice(h,0,k.ta.o),k=Jj(h,[],1,a.ld),b.push(k));return b}function Jj(a,b,c,d){return{Gg:c,index:a,object:d,Jg:b,type:"splice"}};function Kj(){this.fc=A()}Kj.prototype.xd=function(a,b){var c=ka(a.a).toString(),d=this.fc.get(c)||null;null===d&&(d=new Lj(a),this.fc.set(c,d));d.xd(b)};Kj.prototype.ge=function(a,b){var c=ka(a.a).toString(),d=this.fc.get(c)||null;d.ge(b);0<d.Gc.size||this.fc.delete(c)};function ne(a,b){var c=C();b.forEach(function(a){c.add(a.getName())});var d=[];a.fc.forEach(function(a){a=a.Bc();a.context.c.some(function(a){return c.has(a.getName())})&&d.push(a)});return d}
function le(a,b,c){b=ka(null!=b.Wc?b.Wc:b).toString();a=a.fc.get(b)||null;null!==a&&Mj(a,c)}function Lj(a){this.Bf=a;this.Gc=C();this.kg=[];this.Ue=null;this.Jf=new Gj(a.a,this.kg)}Lj.prototype.xd=function(a){this.Gc.has(a)||this.Gc.add(a)};Lj.prototype.ge=function(a){return this.Gc.delete(a)};Lj.prototype.Bc=function(){var a=this.Bf;return{context:a.a,de:Ph(a)}};function Mj(a,b){var c=Ij(a.Jf,a.Ue,b);a.Ue=b;0<c.length&&a.Gc.forEach(function(a){a(c)})};function Nj(a,b){var c=a.l(nc),d=b||{},e=new ff(c);a.mb(ic,e);var e=null,f=!1;null!=d.storeType?e=d.storeType:(q(Xb)||(Xb=new Wb),e=Xb,e=e.Wf?0:e.Fg?4:1);switch(e){case 0:e=new Ne(a,c);break;case 1:e=new Te(c);break;case 5:e=new Ve(c);break;case 4:e=new cf(a,c,d.webSqlDbSize);break;case 3:e=new Ae(c,d.firebase);f=!0;break;default:throw new E(300);}a.mb(hc,e);var h=new jg;a.mb(jc,h);return e.Ga(d.onUpgrade).then(function(){var b=new uj(a);a.mb(kc,b);b=new Cj;a.mb(lc,b);b=new Kj;a.mb(mc,b);return h.Ga(c)}).then(function(){if(f){var b=
new pe(a);b.Ka.subscribe(b.Zd.bind(b))}return(new cg(a)).Ga(c)})};function Oj(a){this.h=a;this.i=a.l(nc);this.aa=C(this.i.ra());this.$a=x()}m=Oj.prototype;m.exec=function(){var a=this.h.l(jc),b=this.h.l(ic),c={};this.i.ra().forEach(function(d){var f=a.get(Qe(d)).Xa(),f=gf(b,f).map(function(a){return a.o});c[d.getName()]=f});var d={name:this.i.name(),version:this.i.version(),tables:c},d=new xd(new y(-1,d),!0);return w([new G([d],[])])};m.G=l(0);m.ca=g("aa");m.Lb=g("$a");m.Y=function(){return ka(this)};m.getPriority=l(0);function Pj(a,b){this.h=a;this.i=a.l(nc);this.aa=C(this.i.ra());this.$a=x();this.xa=b;this.Ka=a.l(hc);this.V=a.l(ic);this.D=a.l(jc)}m=Pj.prototype;
m.exec=function(){if(!(this.Ka instanceof Ne||this.Ka instanceof Te||this.Ka instanceof cf))throw new E(300);var a;a:{a=this.i.ra();for(var b=0;b<a.length;++b)if(0<this.D.get(Qe(a[b])).Ma().na){a=!1;break a}a=!0}if(!a)throw new E(110);if(this.i.name()!=this.xa.name||this.i.version()!=this.xa.version)throw new E(111);if(null==this.xa.tables)throw new E(112);return Qj(this)};m.G=l(1);m.ca=g("aa");m.Lb=g("$a");m.Y=function(){return ka(this)};m.getPriority=l(0);
function Qj(a){var b=new cd(a.h,a.aa),b=a.Ka.Ab(a.G(),D(a.aa),b),c;for(c in a.xa.tables){var d=a.i.table(c),e=a.xa.tables[c].map(function(a){return d.tb(a)}),f=b.H(c,d.Cb);a.V.Vb(c,e);var h=a.D.mc.get(c)||[];e.forEach(function(a){h.forEach(function(b){var c=a.Fb(b.getName());b.add(c,a.id())})});f.put(e)}return b.ia()};function Rj(a,b){this.h=a;this.Ka=a.l(hc);this.Ea=a.l(lc);this.Hb=a.l(mc);this.aa=C(b);this.Oa=new cd(this.h,this.aa);this.$a=x();this.xc=x();this.ue=x()}m=Rj.prototype;m.exec=function(){this.ue.resolve();return this.xc.da};m.G=l(1);m.ca=g("aa");m.Lb=g("$a");m.Y=function(){return ka(this)};m.getPriority=l(2);function Sj(a){oe(a.Ea,a);return a.ue.da}
function Tj(a,b){var c=b.Bc();return c.de.hb().exec(a.Oa,c.context).then(function(a){return pd(a[0])},function(a){this.Oa.Ib();var b=new jb(a.name);this.xc.reject(b);throw a;}.bind(a))}m.ia=function(){this.Ka.Ab(this.G(),D(this.aa),this.Oa).ia().then(function(){this.Kc();this.xc.resolve()}.bind(this),function(a){this.Oa.Ib();this.xc.reject(a)}.bind(this));return this.$a.da};m.Ib=function(){this.Oa.Ib();this.xc.resolve();return this.$a.da};
m.Kc=function(){var a=ne(this.Hb,this.aa);0!=a.length&&(a=new ke(this.h,a),oe(this.Ea,a))};function Uj(a){this.h=a;this.Ea=a.l(lc);this.Oc=null;this.Ra=0;0==Vj.size&&(Vj.set(0,C([1,4])),Vj.set(1,C([2])),Vj.set(2,C([3,5,6])),Vj.set(3,C([2,7])),Vj.set(4,C([7])),Vj.set(5,C([7])),Vj.set(6,C([7])))}r("lf.proc.Transaction",Uj);var Vj=A();function Wj(a,b){var c=Vj.get(a.Ra)||null;if(null===c||!c.has(b))throw new E(107,a.Ra,b);a.Ra=b}
Uj.prototype.exec=function(a){Wj(this,4);var b=[];try{a.forEach(function(a){a.cb();b.push(a.Bc())},this)}catch(c){return Wj(this,7),bb(c)}a=new sh(this.h,b);return oe(this.Ea,a).then(function(a){Wj(this,7);return a.map(function(a){return pd(a)})}.bind(this),function(a){Wj(this,7);throw a;}.bind(this))};Uj.prototype.exec=Uj.prototype.exec;Uj.prototype.zf=function(a){Wj(this,1);this.Oc=new Rj(this.h,a);return Sj(this.Oc).then(function(){Wj(this,2)}.bind(this))};Uj.prototype.begin=Uj.prototype.zf;
Uj.prototype.yf=function(a){Wj(this,3);return Tj(this.Oc,a).then(function(a){Wj(this,2);return a}.bind(this),function(a){Wj(this,7);throw a;}.bind(this))};Uj.prototype.attach=Uj.prototype.yf;Uj.prototype.ia=function(){Wj(this,5);return this.Oc.ia().then(function(){Wj(this,7)}.bind(this))};Uj.prototype.commit=Uj.prototype.ia;Uj.prototype.Ib=function(){Wj(this,6);return this.Oc.Ib().then(function(){Wj(this,7)}.bind(this))};Uj.prototype.rollback=Uj.prototype.Ib;function W(a){this.h=a;this.i=a.l(nc);this.jd=!1}r("lf.proc.Database",W);W.prototype.Ga=function(a){this.h.mb(nc,this.i);return Nj(this.h,a).then(function(){this.jd=!0;this.Ea=this.h.l(lc);return this}.bind(this))};W.prototype.init=W.prototype.Ga;W.prototype.vb=g("i");W.prototype.getSchema=W.prototype.vb;function Xj(a){if(!a.jd)throw new E(2);}W.prototype.select=function(a){Xj(this);return new V(this.h,1!=arguments.length||null!=arguments[0]?Array.prototype.slice.call(arguments):[])};
W.prototype.select=W.prototype.select;W.prototype.xb=function(){Xj(this);return new Rh(this.h)};W.prototype.insert=W.prototype.xb;W.prototype.Qd=function(){Xj(this);return new Rh(this.h,!0)};W.prototype.insertOrReplace=W.prototype.Qd;W.prototype.update=function(a){Xj(this);return new ai(this.h,a)};W.prototype.update=W.prototype.update;W.prototype.delete=function(){Xj(this);return new Qh(this.h)};W.prototype["delete"]=W.prototype.delete;
W.prototype.observe=function(a,b){Xj(this);this.h.l(mc).xd(a,b)};W.prototype.observe=W.prototype.observe;W.prototype.unobserve=function(a,b){Xj(this);this.h.l(mc).ge(a,b)};W.prototype.unobserve=W.prototype.unobserve;W.prototype.Hf=function(){Xj(this);return new Uj(this.h)};W.prototype.createTransaction=W.prototype.Hf;W.prototype.close=function(){try{this.h.l(hc).close()}catch(a){}this.h.clear();this.jd=!1};W.prototype.close=W.prototype.close;
W.prototype.Pf=function(){Xj(this);var a=new Oj(this.h);return oe(this.Ea,a).then(function(a){return pd(a[0])[0]})};W.prototype["export"]=W.prototype.Pf;W.prototype.import=function(a){Xj(this);a=new Pj(this.h,a);return oe(this.Ea,a).then(l(null))};W.prototype["import"]=W.prototype.import;function X(a,b,c,d,e,f){this.U=a;this.u=b;this.Qe=c;this.Oe=d;this.rf=e;this.bb=f||null}r("lf.schema.BaseColumn",X);m=X.prototype;m.getName=g("u");m.m=function(){return J(this.U)+"."+this.u};m.toString=function(){return this.m()};m.H=g("U");m.G=g("rf");X.prototype.getType=X.prototype.G;X.prototype.Wa=g("bb");X.prototype.Aa=function(){null==this.pa&&(this.pa=[],this.H().Aa().forEach(function(a){-1!=a.f.map(function(a){return a.ba.getName()}).indexOf(this.u)&&this.pa.push(a)},this));return this.pa};
X.prototype.za=function(){if(!q(this.ga)){var a=this.Aa().filter(function(a){return 1!=a.f.length?!1:a.f[0].ba.getName()==this.getName()},this);this.ga=0<a.length?a[0]:null}return this.ga};X.prototype.ic=g("Oe");X.prototype.isNullable=X.prototype.ic;X.prototype.Dc=g("Qe");X.prototype.Na=function(a){return Dg(this,a,"eq")};X.prototype.eq=X.prototype.Na;X.prototype.Xe=function(a){return Dg(this,a,"neq")};X.prototype.neq=X.prototype.Xe;X.prototype.Vd=function(a){return Dg(this,a,"lt")};
X.prototype.lt=X.prototype.Vd;X.prototype.gg=function(a){return Dg(this,a,"lte")};X.prototype.lte=X.prototype.gg;X.prototype.Rf=function(a){return Dg(this,a,"gt")};X.prototype.gt=X.prototype.Rf;X.prototype.Sf=function(a){return Dg(this,a,"gte")};X.prototype.gte=X.prototype.Sf;X.prototype.match=function(a){return Dg(this,a,"match")};X.prototype.match=X.prototype.match;X.prototype.Af=function(a,b){return Dg(this,[a,b],"between")};X.prototype.between=X.prototype.Af;
X.prototype.Tf=function(a){return Dg(this,a,"in")};X.prototype["in"]=X.prototype.Tf;X.prototype.bg=function(){return this.Na(null)};X.prototype.isNull=X.prototype.bg;X.prototype.ag=function(){return this.Xe(null)};X.prototype.isNotNull=X.prototype.ag;X.prototype.qc=function(a){return new X(this.U,this.u,this.Qe,this.Oe,this.rf,a)};X.prototype.as=X.prototype.qc;function Yj(){this.sd=A()}var Zj;Yj.prototype.clear=function(){this.sd.clear()};Yj.prototype.clear=Yj.prototype.clear;Yj.prototype.mb=function(a,b){this.sd.set(a.toString(),b);return b};Yj.prototype.registerService=Yj.prototype.mb;Yj.prototype.l=function(a){var b=this.sd.get(a.toString())||null;if(null===b)throw new E(7,a.toString());return b};Yj.prototype.getService=Yj.prototype.l;Yj.prototype.Td=function(a){return this.sd.has(a.toString())};Yj.prototype.isRegistered=Yj.prototype.Td;function ak(a){this.i=a;this.Cd=new Kc;this.he=new Kc;this.Ze=new Kc;this.De=A();this.g=new Kc;this.ze=new Kc;this.ff=new Kc;this.Ce=new Kc;bk(this)}function bk(a){a.i.ra().forEach(function(a){var c=a.getName();a.Db().Od().forEach(function(d){this.Ze.set(c,this.i.table(d.Pa));this.g.set(d.Pa,a);0==d.action?(this.he.set(d.Pa,d),this.ff.set(d.Pa,a)):(this.Cd.set(d.Pa,d),this.ze.set(d.Pa,a));this.De.set(a.getName()+"."+d.eb,d.Pa);this.Ce.set(d.Pa+"."+d.kc,a.getName())},this)},a)}
function Tc(a,b,c){if(null!=c)return 1==c?a.Cd.get(b):a.he.get(b);c=a.Cd.get(b);a=a.he.get(b);return null===c&&null===a?null:(c||[]).concat(a||[])}function yh(a,b){var c=b.get(a);return null===c?[]:c}function Ah(a,b){var c=C();b.forEach(function(a){(a=this.De.get(a))&&c.add(a)},a);return D(c).map(function(a){return this.i.table(a)},a)}function wh(a,b,c){return null!=c?0==c?yh(b,a.ff):yh(b,a.ze):yh(b,a.g)}
function Bh(a,b){var c=C();b.forEach(function(a){(a=this.Ce.get(a))&&a.forEach(function(a){c.add(a)})},a);return D(c).map(function(a){return this.i.table(a)},a)};function ck(a,b,c){this.rg=a;this.jg=b;this.Qf=c}r("lf.schema.Constraint",ck);ck.prototype.cd=g("rg");ck.prototype.getPrimaryKey=ck.prototype.cd;ck.prototype.Od=g("Qf");ck.prototype.getForeignKeys=ck.prototype.Od;function dk(a,b,c){var d=a.ref.split(".");if(2!=d.length)throw new E(540,c);this.Be=b;this.eb=a.local;this.Pa=d[0];this.kc=d[1];this.name=b+"."+c;this.action=a.action;this.timing=a.timing};function Y(a){ek(a);this.Jd=Cd.zc();this.u=a;this.J=A();this.ud=C();this.nc=C();this.kd=C();this.Ba=null;this.pa=A();this.od=!1;this.ub=[]}r("lf.schema.TableBuilder",Y);function fk(a){this.name=a.name;this.kb=a.order;this.autoIncrement=a.autoIncrement}var gk=C([0,6]);function ek(a){if(!/^[A-Za-z_][A-Za-z0-9_]*$/.test(a))throw new E(502,a);}function hk(a,b){if(b==a.u)throw new E(546,b);if(a.J.has(b)||a.pa.has(b)||a.nc.has(b))throw new E(503,a.u+"."+b);}
function ik(a,b){var c=!1;b.forEach(function(a){var b=this.J.get(a.name);c=c||a.autoIncrement;if(a.autoIncrement&&3!=b)throw new E(504);},a);if(c&&1<b.length)throw new E(505);}function jk(a){if(null!==a.Ba){var b=a.pa.get(a.Ba).map(function(a){return a.name}),c=0;if(a.ub.some(function(a,e){c=e;return-1!=b.indexOf(a.eb)},a))throw new E(543,a.ub[c].name);}}
function kk(a){if(null!==a.Ba){var b=function(a){return a.name},c=JSON.stringify(a.pa.get(a.Ba).map(b));a.pa.forEach(function(a,e){if(e!=this.Ba){var f=a.map(b);if(JSON.stringify(f)==c)throw new E(544,this.u+"."+e);}},a)}}function lk(a){null===a.Ba||a.pa.get(a.Ba).forEach(function(a){if(this.kd.has(a.name))throw new E(545,this.u+"."+a.name);},a)}Y.prototype.tf=function(a,b){ek(a);hk(this,a);this.J.set(a,b);gk.has(b)&&this.we([a]);return this};Y.prototype.addColumn=Y.prototype.tf;
Y.prototype.vf=function(a,b){var c=this.u;this.Ba="pk"+(c[0].toUpperCase()+c.substring(1));ek(this.Ba);hk(this,this.Ba);c=mk(this,a,!0,void 0,b);ik(this,c);1==c.length&&this.ud.add(c[0].name);this.nc.add(this.Ba);this.pa.set(this.Ba,c);return this};Y.prototype.addPrimaryKey=Y.prototype.vf;
Y.prototype.uf=function(a,b){ek(a);hk(this,a);var c=new dk(b,this.u,a);q(c.action)||(c.action=0);q(c.timing)||(c.timing=0);if(1==c.action&&1==c.timing)throw new E(506);if(!this.J.has(c.eb))throw new E(540,a);this.ub.push(c);this.ve(a,[c.eb],this.ud.has(c.eb));return this};Y.prototype.addForeignKey=Y.prototype.uf;Y.prototype.wf=function(a,b){ek(a);hk(this,a);var c=mk(this,b,!0);1==c.length&&(this.ud.add(c[0].name),nk(this,c[0].name));this.pa.set(a,c);this.nc.add(a);return this};
Y.prototype.addUnique=Y.prototype.wf;function nk(a,b){a.ub.forEach(function(a){a.eb==b&&this.nc.add(a.name.split(".")[1])},a)}Y.prototype.we=function(a){mk(this,a,!1).forEach(function(a){this.kd.add(a.name)},this);return this};Y.prototype.addNullable=Y.prototype.we;Y.prototype.ve=function(a,b,c,d){ek(a);hk(this,a);b=mk(this,b,!0,d);c&&this.nc.add(a);this.pa.set(a,b);return this};Y.prototype.addIndex=Y.prototype.ve;Y.prototype.zb=ba("od");Y.prototype.persistentIndex=Y.prototype.zb;
Y.prototype.vb=function(){jk(this);kk(this);lk(this);return new (ok(this))};Y.prototype.getSchema=Y.prototype.vb;function pk(a){return a.ub}function mk(a,b,c,d,e){var f=b,f="string"==typeof b[0]?b.map(function(a){return new fk({name:a,order:null!=d?d:1,autoIncrement:e||!1})}):b.map(function(a){return new fk(a)});f.forEach(function(a){if(!this.J.has(a.name))throw new E(508,this.u,a.name);if(c){var b=this.J.get(a.name);if(0==b||6==b)throw new E(509,this.u,a.name);}},a);return f}
function ok(a){function b(){function b(c){return a.pa.get(c).map(function(a){return{ba:this[a.name],kb:a.kb,autoIncrement:a.autoIncrement}},this)}var d=Yb(a.J).map(function(b){this[b]=new X(this,b,a.ud.has(b),a.kd.has(b),a.J.get(b));return this[b]},this),e=Yb(a.pa).map(function(d){return new Fg(a.u,d,a.nc.has(d),b.call(this,d))},this);R.call(this,a.u,d,e,a.od);var f=null===a.Ba?null:new Fg(a.u,a.Ba,!0,b.call(this,a.Ba)),h=d.filter(function(b){return!a.kd.has(b.getName())});this.Df=new ck(f,h,a.ub);
this.jf=qk(a,d,e)}t(b,R);b.prototype.tb=function(a){return new this.jf(pb++,a)};b.prototype.createRow=b.prototype.tb;b.prototype.Cb=function(a){var b={};this.gb().forEach(function(e){var f=e.getName();e=e.G();var h=a.value[f];if(0==e)if(e=h,null!=e&&""!=e){0!=e.length%2&&(e="0"+e);for(var h=new ArrayBuffer(e.length/2),k=new Uint8Array(h),n=0,z=0;n<e.length;n+=2)k[z++]=parseInt(e.substr(n,2),16);e=h}else e=null;else e=2==e?null!=h?new Date(h):null:h;b[f]=e},this);return new this.jf(a.id,b)};b.prototype.deserializeRow=
b.prototype.Cb;b.prototype.Db=g("Df");b.prototype.getConstraint=b.prototype.Db;return b}
function qk(a,b,c){function d(a,d){this.J=b;this.pa=c;y.call(this,a,d)}t(d,y);d.prototype.Fe=function(){var a={};this.J.forEach(function(b){a[b.getName()]=b.ic()?null:Jc[b.G()]});return a};d.prototype.qf=function(){var a={};this.J.forEach(function(b){var c=b.getName();b=b.G();var d=this.o[c];a[c]=0==b?null!=d?tb(d):null:2==b?null!=d?d.getTime():null:6==b?null!=d?d:null:d},this);return a};var e=function(a){var b=this.J.get(a.getName()),c=this.Jd.Re.get(b)||null;return function(b){return c(b[a.getName()])}}.bind(a),
f=function(a){var b=a.map(function(a){return e(a.ba)});return function(a){return b.map(function(b){return b(a)})}}.bind(a),h={};c.forEach(function(a){var b=a.m();a=1==a.f.length?e(a.f[0].ba):f(a.f);h[b]=a});d.prototype.Fb=function(a){return-1!=a.indexOf("#")?this.id():h.hasOwnProperty(a)?h[a](this.o):null};return d};function rk(a,b){this.i=new Z(a,b);this.qb=A();this.yc=!1;this.j=null}r("lf.schema.Builder",rk);function sk(a,b){b.ub.forEach(function(a){var d=a.Pa;if(!this.qb.has(d))throw new E(536,a.name);var d=this.qb.get(d).vb(),e=a.kc;if(!d.hasOwnProperty(e))throw new E(537,a.name);if(b.vb()[a.eb].G()!=d[e].G())throw new E(538,a.name);if(!d[e].Dc())throw new E(539,a.name);},a)}
rk.prototype.Cf=function(a){a.ub.forEach(function(a){pk(this.qb.get(a.Pa)).forEach(function(c){if(c.eb==a.kc)throw new E(534,a.name);},this)},this)};function tk(a){a.yc||(a.qb.forEach(function(a){sk(this,a);a=a.vb();this.i.L.set(a.getName(),a)},a),B(a.qb).forEach(a.Cf,a),uk(a),a.qb.clear(),a.yc=!0)}function vk(a,b,c){b.se||(b.se=!0,b.$d=!0,b.Ge.forEach(function(a){a=c.get(a);if(!a.se)vk(this,a,c);else if(a.$d&&b!=a)throw new E(533);},a));b.$d=!1}
function uk(a){var b=A();a.i.L.forEach(function(a,d){b.set(d,new wk(d))},a);a.qb.forEach(function(a,d){a.ub.forEach(function(a){b.get(a.Pa).Ge.add(d)})});B(b).forEach(function(a){vk(this,a,b)},a)}function wk(a){this.$d=this.se=!1;this.Ge=C();this.Mc=a}rk.prototype.vb=function(){this.yc||tk(this);return this.i};rk.prototype.getSchema=rk.prototype.vb;rk.prototype.Ie=function(){var a=new gc("ns_"+this.i.name()),b;Zj||(Zj=new Yj);b=Zj;var c=null;b.Td(a)?c=b.l(a):(c=new Yj,b.mb(a,c));return c};
rk.prototype.getGlobal=rk.prototype.Ie;rk.prototype.connect=function(a){if(null!==this.j&&this.j.jd)throw new E(113);if(null===this.j){var b=this.Ie();b.Td(nc)||b.mb(nc,this.vb());this.j=new W(b)}return this.j.Ga(a)};rk.prototype.connect=rk.prototype.connect;rk.prototype.Gf=function(a){if(this.qb.has(a))throw new E(503,a);if(this.yc)throw new E(535);this.qb.set(a,new Y(a));return this.qb.get(a)};rk.prototype.createTable=rk.prototype.Gf;
rk.prototype.le=function(a){if(this.yc)throw new E(535);this.i.le(a);return this};rk.prototype.setPragma=rk.prototype.le;function Z(a,b){this.u=a;this.Zb=b;this.L=A();this.cf={Kf:!1}}r("lf.schema.DatabaseSchema",Z);Z.prototype.name=g("u");Z.prototype.name=Z.prototype.name;Z.prototype.version=g("Zb");Z.prototype.version=Z.prototype.version;Z.prototype.ra=function(){return B(this.L)};Z.prototype.tables=Z.prototype.ra;Z.prototype.table=function(a){if(!this.L.has(a))throw new E(101,a);return this.L.get(a)};
Z.prototype.table=Z.prototype.table;Z.prototype.info=function(){this.Me||(this.Me=new ak(this));return this.Me};Z.prototype.bf=g("cf");Z.prototype.pragma=Z.prototype.bf;Z.prototype.le=ba("cf");r("lf.schema.create",function(a,b){return new rk(a,b)});v.prototype.catch=v.prototype.oe;v.prototype["catch"]=v.prototype.catch;
try{if(module){module.exports=lf;}}catch(e){}}.bind(window))()
//# sourceMappingURL=lovefield.es6.js.map
