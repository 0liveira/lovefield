(function(){'use strict';function aa(){return function(){}}function ba(a){return function(b){this[a]=b}}function g(a){return function(){return this[a]}}function l(a){return function(){return a}}var m,p=this;function q(a){return void 0!==a}function ca(){}
function da(a){var b=typeof a;if("object"==b)if(a){if(a instanceof Array)return"array";if(a instanceof Object)return b;var c=Object.prototype.toString.call(a);if("[object Window]"==c)return"object";if("[object Array]"==c||"number"==typeof a.length&&"undefined"!=typeof a.splice&&"undefined"!=typeof a.propertyIsEnumerable&&!a.propertyIsEnumerable("splice"))return"array";if("[object Function]"==c||"undefined"!=typeof a.call&&"undefined"!=typeof a.propertyIsEnumerable&&!a.propertyIsEnumerable("call"))return"function"}else return"null";
else if("function"==b&&"undefined"==typeof a.call)return"object";return b}function ea(a){return null===a}function fa(a){return null!=a}function ga(a){var b=da(a);return"array"==b||"object"==b&&"number"==typeof a.length}function ha(a){return"string"==typeof a}function ia(a){return"function"==da(a)}function ja(a){return a[ka]||(a[ka]=++la)}var ka="closure_uid_"+(1E9*Math.random()>>>0),la=0;function ma(a,b,c){return a.call.apply(a.bind,arguments)}
function na(a,b,c){if(!a)throw Error();if(2<arguments.length){var d=Array.prototype.slice.call(arguments,2);return function(){var c=Array.prototype.slice.call(arguments);Array.prototype.unshift.apply(c,d);return a.apply(b,c)}}return function(){return a.apply(b,arguments)}}function pa(a,b,c){pa=Function.prototype.bind&&-1!=Function.prototype.bind.toString().indexOf("native code")?ma:na;return pa.apply(null,arguments)}
function qa(a,b){var c=Array.prototype.slice.call(arguments,1);return function(){var b=c.slice();b.push.apply(b,arguments);return a.apply(this,b)}}function r(a,b){var c=a.split("."),d=p;c[0]in d||!d.execScript||d.execScript("var "+c[0]);for(var e;c.length&&(e=c.shift());)!c.length&&q(b)?d[e]=b:d=d[e]?d[e]:d[e]={}}
function t(a,b){function c(){}c.prototype=b.prototype;a.Gb=b.prototype;a.prototype=new c;a.prototype.constructor=a;a.Fg=function(a,c,f){for(var h=Array(arguments.length-2),k=2;k<arguments.length;k++)h[k-2]=arguments[k];return b.prototype[c].apply(a,h)}};function ra(a){if(Error.captureStackTrace)Error.captureStackTrace(this,ra);else{var b=Error().stack;b&&(this.stack=b)}a&&(this.message=String(a))}t(ra,Error);ra.prototype.name="CustomError";var sa=String.prototype.trim?function(a){return a.trim()}:function(a){return a.replace(/^[\s\xa0]+|[\s\xa0]+$/g,"")};
function ta(a){var b=0,c=sa(String(ua)).split(".");a=sa(String(a)).split(".");for(var d=Math.max(c.length,a.length),e=0;0==b&&e<d;e++){var f=c[e]||"",h=a[e]||"",k=/(\d*)(\D*)/g,n=/(\d*)(\D*)/g;do{var x=k.exec(f)||["","",""],S=n.exec(h)||["","",""];if(0==x[0].length&&0==S[0].length)break;b=va(0==x[1].length?0:parseInt(x[1],10),0==S[1].length?0:parseInt(S[1],10))||va(0==x[2].length,0==S[2].length)||va(x[2],S[2])}while(0==b)}return b}function va(a,b){return a<b?-1:a>b?1:0};function wa(a,b,c){this.cg=c;this.Gf=a;this.ug=b;this.kd=0;this.fd=null}wa.prototype.get=function(){var a;0<this.kd?(this.kd--,a=this.fd,this.fd=a.next,a.next=null):a=this.Gf();return a};wa.prototype.put=function(a){this.ug(a);this.kd<this.cg&&(this.kd++,a.next=this.fd,this.fd=a)};var xa=Array.prototype,ya=xa.indexOf?function(a,b,c){return xa.indexOf.call(a,b,c)}:function(a,b,c){c=null==c?0:0>c?Math.max(0,a.length+c):c;if(ha(a))return ha(b)&&1==b.length?a.indexOf(b,c):-1;for(;c<a.length;c++)if(c in a&&a[c]===b)return c;return-1},za=xa.forEach?function(a,b,c){xa.forEach.call(a,b,c)}:function(a,b,c){for(var d=a.length,e=ha(a)?a.split(""):a,f=0;f<d;f++)f in e&&b.call(c,e[f],f,a)},Aa=xa.map?function(a,b,c){return xa.map.call(a,b,c)}:function(a,b,c){for(var d=a.length,e=Array(d),
f=ha(a)?a.split(""):a,h=0;h<d;h++)h in f&&(e[h]=b.call(c,f[h],h,a));return e},Ba=xa.reduce?function(a,b,c,d){d&&(b=pa(b,d));return xa.reduce.call(a,b,c)}:function(a,b,c,d){var e=c;za(a,function(c,h){e=b.call(d,e,c,h,a)});return e},Ca=xa.some?function(a,b,c){return xa.some.call(a,b,c)}:function(a,b,c){for(var d=a.length,e=ha(a)?a.split(""):a,f=0;f<d;f++)if(f in e&&b.call(c,e[f],f,a))return!0;return!1};function Da(a,b,c){return 2>=arguments.length?xa.slice.call(a,b):xa.slice.call(a,b,c)}
function Ea(a){for(var b=[],c=0;c<a;c++)b[c]=0;return b}function Fa(a){for(var b=[],c=0;c<arguments.length;c++){var d=arguments[c];if("array"==da(d))for(var e=0;e<d.length;e+=8192)for(var f=Fa.apply(null,Da(d,e,e+8192)),h=0;h<f.length;h++)b.push(f[h]);else b.push(d)}return b};var Ga;a:{var Ha=p.navigator;if(Ha){var Ia=Ha.userAgent;if(Ia){Ga=Ia;break a}}Ga=""}function u(a){return-1!=Ga.indexOf(a)};function Ja(){return u("Opera")||u("OPR")}function Ka(){return(u("Chrome")||u("CriOS"))&&!Ja()&&!u("Edge")};function La(a){p.setTimeout(function(){throw a;},0)}var Ma;
function Na(){var a=p.MessageChannel;"undefined"===typeof a&&"undefined"!==typeof window&&window.postMessage&&window.addEventListener&&!u("Presto")&&(a=function(){var a=document.createElement("IFRAME");a.style.display="none";a.src="";document.documentElement.appendChild(a);var b=a.contentWindow,a=b.document;a.open();a.write("");a.close();var c="callImmediate"+Math.random(),d="file:"==b.location.protocol?"*":b.location.protocol+"//"+b.location.host,a=pa(function(a){if(("*"==d||a.origin==d)&&a.data==
c)this.port1.onmessage()},this);b.addEventListener("message",a,!1);this.port1={};this.port2={postMessage:function(){b.postMessage(c,d)}}});if("undefined"!==typeof a&&!u("Trident")&&!u("MSIE")){var b=new a,c={},d=c;b.port1.onmessage=function(){if(q(c.next)){c=c.next;var a=c.we;c.we=null;a()}};return function(a){d.next={we:a};d=d.next;b.port2.postMessage(0)}}return"undefined"!==typeof document&&"onreadystatechange"in document.createElement("SCRIPT")?function(a){var b=document.createElement("SCRIPT");
b.onreadystatechange=function(){b.onreadystatechange=null;b.parentNode.removeChild(b);b=null;a();a=null};document.documentElement.appendChild(b)}:function(a){p.setTimeout(a,0)}};function Oa(){this.td=this.kc=null}var Qa=new wa(function(){return new Pa},function(a){a.reset()},100);Oa.prototype.add=function(a,b){var c=Qa.get();c.set(a,b);this.td?this.td.next=c:this.kc=c;this.td=c};Oa.prototype.remove=function(){var a=null;this.kc&&(a=this.kc,this.kc=this.kc.next,this.kc||(this.td=null),a.next=null);return a};function Pa(){this.next=this.scope=this.Id=null}Pa.prototype.set=function(a,b){this.Id=a;this.scope=b;this.next=null};
Pa.prototype.reset=function(){this.next=this.scope=this.Id=null};function Ra(a,b){Sa||Ta();Ua||(Sa(),Ua=!0);Va.add(a,b)}var Sa;function Ta(){if(p.Promise&&p.Promise.resolve){var a=p.Promise.resolve(void 0);Sa=function(){a.then(Wa)}}else Sa=function(){var a=Wa;!ia(p.setImmediate)||p.Window&&p.Window.prototype&&p.Window.prototype.setImmediate==p.setImmediate?(Ma||(Ma=Na()),Ma(a)):p.setImmediate(a)}}var Ua=!1,Va=new Oa;function Wa(){for(var a=null;a=Va.remove();){try{a.Id.call(a.scope)}catch(b){La(b)}Qa.put(a)}Ua=!1};function v(a,b){this.Ra=0;this.df=void 0;this.Wc=this.ac=this.B=null;this.ed=this.Gd=!1;if(a!=ca)try{var c=this;a.call(b,function(a){Xa(c,2,a)},function(a){Xa(c,3,a)})}catch(d){Xa(this,3,d)}}function Za(){this.next=this.context=this.fc=this.Ic=this.child=null;this.wd=!1}Za.prototype.reset=function(){this.context=this.fc=this.Ic=this.child=null;this.wd=!1};var $a=new wa(function(){return new Za},function(a){a.reset()},100);function ab(a,b,c){var d=$a.get();d.Ic=a;d.fc=b;d.context=c;return d}
function w(a){if(a instanceof v)return a;var b=new v(ca);Xa(b,2,a);return b}function bb(a){return new v(function(b,c){c(a)})}function cb(a,b,c){db(a,b,c,null)||Ra(qa(b,a))}function eb(a){return new v(function(b,c){var d=a.length,e=[];if(d)for(var f=function(a,c){d--;e[a]=c;0==d&&b(e)},h=function(a){c(a)},k=0,n;k<a.length;k++)n=a[k],cb(n,qa(f,k),h);else b(e)})}function y(){var a,b,c=new v(function(c,e){a=c;b=e});return new fb(c,a,b)}
v.prototype.then=function(a,b,c){return gb(this,ia(a)?a:null,ia(b)?b:null,c)};v.prototype.then=v.prototype.then;v.prototype.$goog_Thenable=!0;v.prototype.le=function(a,b){return gb(this,null,a,b)};function hb(a,b){a.ac||2!=a.Ra&&3!=a.Ra||ib(a);a.Wc?a.Wc.next=b:a.ac=b;a.Wc=b}
function gb(a,b,c,d){var e=ab(null,null,null);e.child=new v(function(a,h){e.Ic=b?function(c){try{var e=b.call(d,c);a(e)}catch(x){h(x)}}:a;e.fc=c?function(b){try{var e=c.call(d,b);!q(e)&&b instanceof jb?h(b):a(e)}catch(x){h(x)}}:h});e.child.B=a;hb(a,e);return e.child}v.prototype.Ag=function(a){this.Ra=0;Xa(this,2,a)};v.prototype.Bg=function(a){this.Ra=0;Xa(this,3,a)};
function Xa(a,b,c){0==a.Ra&&(a==c&&(b=3,c=new TypeError("Promise cannot resolve to itself")),a.Ra=1,db(c,a.Ag,a.Bg,a)||(a.df=c,a.Ra=b,a.B=null,ib(a),3!=b||c instanceof jb||kb(a,c)))}function db(a,b,c,d){if(a instanceof v)return hb(a,ab(b||ca,c||null,d)),!0;var e;if(a)try{e=!!a.$goog_Thenable}catch(h){e=!1}else e=!1;if(e)return a.then(b,c,d),!0;e=typeof a;if("object"==e&&null!=a||"function"==e)try{var f=a.then;if(ia(f))return lb(a,f,b,c,d),!0}catch(h){return c.call(d,h),!0}return!1}
function lb(a,b,c,d,e){function f(a){k||(k=!0,d.call(e,a))}function h(a){k||(k=!0,c.call(e,a))}var k=!1;try{b.call(a,h,f)}catch(n){f(n)}}function ib(a){a.Gd||(a.Gd=!0,Ra(a.Lf,a))}function mb(a){var b=null;a.ac&&(b=a.ac,a.ac=b.next,b.next=null);a.ac||(a.Wc=null);return b}
v.prototype.Lf=function(){for(var a=null;a=mb(this);){var b=this.Ra,c=this.df;if(3==b&&a.fc&&!a.wd)for(var d=void 0,d=this;d&&d.ed;d=d.B)d.ed=!1;if(a.child)a.child.B=null,nb(a,b,c);else try{a.wd?a.Ic.call(a.context):nb(a,b,c)}catch(e){ob.call(null,e)}$a.put(a)}this.Gd=!1};function nb(a,b,c){2==b?a.Ic.call(a.context,c):a.fc&&a.fc.call(a.context,c)}function kb(a,b){a.ed=!0;Ra(function(){a.ed&&ob.call(null,b)})}var ob=La;function jb(a){ra.call(this,a)}t(jb,ra);jb.prototype.name="cancel";
function fb(a,b,c){this.ia=a;this.resolve=b;this.reject=c};/*

 Copyright 2014 The Lovefield Project Authors. All Rights Reserved.

 Licensed under the Apache License, Version 2.0 (the "License");
 you may not use this file except in compliance with the License.
 You may obtain a copy of the License at

     http://www.apache.org/licenses/LICENSE-2.0

 Unless required by applicable law or agreed to in writing, software
 distributed under the License is distributed on an "AS IS" BASIS,
 WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 See the License for the specific language governing permissions and
 limitations under the License.
*/
function z(a,b){this.pa=a;this.o=b||this.Ce()}var pb=0;m=z.prototype;m.id=g("pa");function qb(a){return a.o}m.Ce=function(){return{}};m.nf=g("o");m.Ea=function(){return{id:this.pa,value:this.nf()}};m.Db=function(a){return"#"==a.substr(-1)?this.pa:null};function rb(a){return new z(a.id,a.value)}function sb(a){return new z(pb++,a||{})}function tb(a){if(null==a)return null;a=new Uint8Array(a);for(var b="",c=0;c<a.length;++c)var d=a[c].toString(16),b=b+(2>d.length?"0"+d:d);return b};function ub(a){this.type=a}function vb(a){z.call(this,-1,a)}t(vb,z);function wb(a,b,c,d){c=c||function(a,b){return a==b};d=d||function(b){return a[b]};for(var e=a.length,f=b.length,h=[],k=0;k<e+1;k++)h[k]=[],h[k][0]=0;for(var n=0;n<f+1;n++)h[0][n]=0;for(k=1;k<=e;k++)for(n=1;n<=f;n++)c(a[k-1],b[n-1])?h[k][n]=h[k-1][n-1]+1:h[k][n]=Math.max(h[k-1][n],h[k][n-1]);for(var x=[],k=e,n=f;0<k&&0<n;)c(a[k-1],b[n-1])?(x.unshift(d(k-1,n-1)),k--,n--):h[k-1][n]>h[k][n-1]?k--:n--;return x}function xb(a){return Ba(arguments,function(a,c){return a+c},0)}
function yb(a){return xb.apply(null,arguments)/arguments.length}function zb(a){var b=arguments.length;if(2>b)return 0;var c=yb.apply(null,arguments);return xb.apply(null,Aa(arguments,function(a){return Math.pow(a-c,2)}))/(b-1)}function Ab(a){return Math.sqrt(zb.apply(null,arguments))};var Bb="StopIteration"in p?p.StopIteration:{message:"StopIteration",stack:""};function Cb(){}Cb.prototype.next=function(){throw Bb;};Cb.prototype.pe=function(){return this};function Db(a){if(a instanceof Cb)return a;if("function"==typeof a.pe)return a.pe(!1);if(ga(a)){var b=0,c=new Cb;c.next=function(){for(;;){if(b>=a.length)throw Bb;if(b in a)return a[b++];b++}};return c}throw Error("Not implemented");}
function Eb(a,b){if(ga(a))try{za(a,b,void 0)}catch(c){if(c!==Bb)throw c;}else{a=Db(a);try{for(;;)b.call(void 0,a.next(),void 0,a)}catch(c){if(c!==Bb)throw c;}}}function Fb(a){if(Ca(arguments,function(a){return!a.length})||!arguments.length)return new Cb;var b=new Cb,c=arguments,d=Ea(c.length);b.next=function(){if(d){for(var a=Aa(d,function(a,b){return c[b][a]}),b=d.length-1;0<=b;b--){if(d[b]<c[b].length-1){d[b]++;break}if(0==b){d=null;break}d[b]=0}return a}throw Bb;};return b};function Gb(a){Hb(a);return a.c.concat()}function Hb(a){if(a.Cf!=a.c.length){for(var b=0,c=0;b<a.c.length;){var d=a.c[b];Ib(a.X,d)&&(a.c[c++]=d);b++}a.c.length=c}if(a.Cf!=a.c.length){for(var e={},c=b=0;b<a.c.length;)d=a.c[b],Ib(e,d)||(a.c[c++]=d,e[d]=1),b++;a.c.length=c}}function Ib(a,b){return Object.prototype.hasOwnProperty.call(a,b)};function Jb(){return u("iPhone")&&!u("iPod")&&!u("iPad")};var Kb=Ja(),Lb=u("Trident")||u("MSIE"),Mb=u("Edge"),Nb=u("Gecko")&&!(-1!=Ga.toLowerCase().indexOf("webkit")&&!u("Edge"))&&!(u("Trident")||u("MSIE"))&&!u("Edge"),Ob=-1!=Ga.toLowerCase().indexOf("webkit")&&!u("Edge");function Pb(){var a=Ga;if(Nb)return/rv\:([^\);]+)(\)|;)/.exec(a);if(Mb)return/Edge\/([\d\.]+)/.exec(a);if(Lb)return/\b(?:MSIE|rv)[: ]([^\);]+)(\)|;)/.exec(a);if(Ob)return/WebKit\/(\S+)/.exec(a)}
var ua=function(){if(Kb&&p.opera){var a;var b=p.opera.version;try{a=b()}catch(c){a=b}return a}a="";(b=Pb())&&(a=b?b[1]:"");return Lb&&(b=(b=p.document)?b.documentMode:void 0,b>parseFloat(a))?String(b):a}(),Qb={};var Rb=Jb()||u("iPod"),Sb=u("iPad");!u("Android")||Ka()||u("Firefox")||Ja();var Ub=Ka(),Vb=u("Safari")&&!(Ka()||u("Coast")||Ja()||u("Edge")||u("Silk")||u("Android"))&&!(Jb()||u("iPad")||u("iPod"));/*

 Copyright 2015 The Lovefield Project Authors. All Rights Reserved.

 Licensed under the Apache License, Version 2.0 (the "License");
 you may not use this file except in compliance with the License.
 You may obtain a copy of the License at

     http://www.apache.org/licenses/LICENSE-2.0

 Unless required by applicable law or agreed to in writing, software
 distributed under the License is distributed on an "AS IS" BASIS,
 WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 See the License for the specific language governing permissions and
 limitations under the License.
*/
function Wb(){this.vg=Vb||Sb||Rb;this.Uf=!(this.vg||Lb&&!Qb[10]&&!(Qb[10]=0<=ta(10)));!Lb||Qb[11]||(Qb[11]=0<=ta(11));this.Dg=Ub||Vb}var Xb;function A(){return new window.Map}function Yb(a){var b=0,c=Array(a.size);a.forEach(function(a,e){c[b++]=e});return c}function B(a){var b=0,c=Array(a.size);a.forEach(function(a){c[b++]=a});return c};var Zb={};r("lf.TransactionType",Zb);Zb.READ_ONLY=0;Zb.READ_WRITE=1;function $b(a,b){this.La=a;this.of=b;this.Y=y()}$b.prototype.da=function(){return 0==this.of?ac(this):bc(this)};function ac(a){return a.nc().then(function(a){this.La.da();return a}.bind(a))}function bc(a){try{cc(a.La)}catch(b){return bb(b)}return dc(a).then(function(a){this.La.da();return a}.bind(a))}function dc(a){ec(a);fc(a);return a.nc()}
function ec(a){a.La.pb.forEach(function(a,c){var d=this.La.$().get(c),d=this.G(d.getName(),d.Ab.bind(d)),e=B(a.wa).map(function(a){return a.id()});0<e.length&&d.remove(e).le(this.Kd,this);e=B(a.na).map(function(a){return a[1]}).concat(B(a.ta));d.put(e).le(this.Kd,this)},a)}function fc(a){gc(a.La).forEach(function(a){var c=this.G(a.getName(),rb),d;c.get([-1]).then(function(a){d=a;return c.remove([])}).then(function(){c.put(d);c.put(a.Ea())},this.Kd.bind(this))},a)}$b.prototype.Kd=function(a){this.Y.reject(a)};function hc(a){this.wg=a}hc.prototype.toString=g("wg");var ic=new hc("backstore"),jc=new hc("cache"),kc=new hc("indexstore"),lc=new hc("engine"),mc=new hc("runner"),nc=new hc("observerregistry"),oc=new hc("schema");function C(a){return q(a)?new window.Set(a):new window.Set}function pc(a){var b=0,c=Array(a.size);a.forEach(function(a){c[b++]=a});return c}function qc(a,b){if(b.size>a.size)return!1;var c=!0;b.forEach(function(b){c=c&&a.has(b)});return c};function rc(a,b){this.pa=a;this.o=b||{}}function sc(a){var b=C();a.forEach(function(a){b.add(a>>9)});return pc(b)}rc.prototype.V=g("pa");function tc(a,b){b.forEach(function(a){this.o[a.id()]=a.Ea()},a)}function uc(a,b){b.forEach(function(a){delete this.o[a]},a)}rc.prototype.Ea=function(){return{id:this.pa,value:JSON.stringify(this.o)}};function vc(a){return new rc(a.id,JSON.parse(a.value))};function wc(a,b,c){this.ba=a;this.Jb=b;this.ef=c}m=wc.prototype;m.get=function(a){if(0==a.length)return this.wc();var b=this.Jb;return xc(this,a).then(function(c){return a.map(function(a){var e=c.get(a>>9);return b(e.o[a])})})};function xc(a,b){var c=A(),d=y(),e=sc(b).map(function(a){return new v(function(b,d){var e;try{e=this.ba.get(a)}catch(x){d(x);return}e.onerror=d;e.onsuccess=function(a){a=vc(a.target.result);c.set(a.V(),a);b()}},this)},a);eb(e).then(function(){d.resolve(c)});return d.ia}
m.wc=function(){return new v(function(a,b){var c=[],d;try{d=this.ba.openCursor()}catch(e){b(e);return}d.onerror=b;d.onsuccess=function(){var b=d.result;if(b){var f;f=vc(b.value).o;for(var h in f)c.push(this.Jb(f[h]));b.continue()}else a(c)}.bind(this)},this)};m.Qb=function(a){return new v(function(b,c){var d;try{d=a()}catch(e){c(e);return}d.onsuccess=b;d.onerror=c},this)};
m.put=function(a){if(0==a.length)return w();var b=A();a.forEach(function(a){var d;d=a.id()>>9;var e=b.get(d)||null;null===e&&(e=this.ef(this.ba.name,d));tc(e,[a]);b.set(d,e)},this);a=B(b).map(function(a){return this.Qb(function(){return this.ba.put(a.Ea())}.bind(this))},this);return eb(a)};
m.remove=function(a){if(0==a.length)return this.Qb(function(){return this.ba.clear()}.bind(this));var b=A();a.forEach(function(a){var d=a>>9,e=b.get(d)||null;null===e&&(e=this.ef(this.ba.name,d));uc(e,[a]);b.set(d,e)},this);a=B(b).map(function(a){return this.Qb(function(){return 0==Object.keys(a.o).length?this.ba.delete(a.V()):this.ba.put(a.Ea())}.bind(this))},this);return eb(a)};function yc(a,b,c){a=a.j(jc);var d=[c<<9,(c+1<<9)-1];b=a.Xa(b,d[0],d[1]);c=new rc(c);tc(c,b);return c}
function zc(a,b){return new rc(b)};function Ac(){};function Bc(a){this.S=a.j(jc);this.C=a.j(kc);this.i=a.j(oc)}Bc.prototype.update=function(a){a.forEach(function(a){Cc(this,a);Dc(this,a)},this)};function Dc(a,b){var c=b.getName();b.wa.forEach(function(a,b){this.S.remove(c,b)},a);b.ta.forEach(function(a){this.S.set(c,a)},a);b.na.forEach(function(a){this.S.set(c,a[1])},a)}function Cc(a,b){var c=a.i.table(b.getName());Ec(b).forEach(function(a){Fc(this,c,a)},a)}
function Fc(a,b,c){var d=a.C.ic.get(b.getName())||[],e=0;d.forEach(function(a){try{Gc(a,c),e++}catch(b){throw d.slice(0,e).forEach(function(a){Gc(a,[c[1],c[0]])},this),b;}},a)}function Gc(a,b){var c=null===b[1]?void 0:b[1].Db(a.getName()),d=null===b[0]?void 0:b[0].Db(a.getName());if(!q(d)&&q(c))a.add(c,b[1].id());else if(q(d)&&q(c)){if(null===c||null===d){if(c==d)return}else if(0==a.oc().compare(d,c))return;a.add(c,b[1].id());a.remove(d,b[0].id())}else q(d)&&!q(c)&&a.remove(d,b[0].id())};var Hc={};r("lf.ConstraintAction",Hc);Hc.RESTRICT=0;Hc.CASCADE=1;var Ic={};r("lf.ConstraintTiming",Ic);Ic.IMMEDIATE=0;Ic.DEFERRABLE=1;var Jc={};r("lf.Order",Jc);Jc.DESC=0;Jc.ASC=1;var Kc={};r("lf.Type",Kc);Kc.ARRAY_BUFFER=0;Kc.BOOLEAN=1;Kc.DATE_TIME=2;Kc.INTEGER=3;Kc.NUMBER=4;Kc.STRING=5;Kc.OBJECT=6;var Lc={0:null,1:!1,2:Object.freeze(new Date(0)),3:0,4:0,5:"",6:null};r("lf.type.DEFAULT_VALUES",Lc);function D(a,b){this.code=a;this.message="http://sn.im/2a0j3wn?c="+a;if(1<arguments.length)for(var c=1;c<=Math.min(4,arguments.length-1);++c)this.message+="&p"+(c-1)+"="+encodeURIComponent(arguments[c].toString().slice(0,64))}t(D,Error);function Mc(){this.X=A();this.size=0}m=Mc.prototype;m.has=function(a){return this.X.has(a)};m.set=function(a,b){var c=this.X.get(a)||null;null===c&&(c=C(),this.X.set(a,c));c.has(b)||(c.add(b),this.size++);return this};m.Tb=function(a,b){var c=this.X.get(a)||null;null===c&&(c=C(),this.X.set(a,c));b.forEach(function(a){c.has(a)||(c.add(a),this.size++)},this);return this};m.Td=function(a){a.keys().forEach(function(b){var c=a.get(b);this.Tb(b,c)},this);return this};
m.delete=function(a,b){var c=this.X.get(a,null);if(null===c)return!1;var d=c.delete(b);d&&(--this.size,0==c.size&&this.X.delete(a));return d};m.get=function(a){a=this.X.get(a)||null;return null===a?null:pc(a)};m.clear=function(){this.X.clear();this.size=0};m.keys=function(){return Yb(this.X)};m.values=function(){var a=[];this.X.forEach(function(b){a.push.apply(a,pc(b))});return a};function Nc(a){this.C=a.j(kc);this.i=a.j(oc);this.S=a.j(jc);this.Zc=null}function Pc(a,b,c){var d=b.Bb().hg;c.forEach(function(a){d.forEach(function(b){if(null==a.o[b.getName()])throw new D(202,b.m());},this)},a)}function Qc(a,b,c,d){b.Bb().Jd().forEach(function(a){a.timing==d&&Rc(this,a,c)},a)}function Rc(a,b,c){var d=Sc(a,b);c.forEach(function(a){if(Tc(a[0],a[1],b.name)&&(a=a[1].o[b.cb],null!==a&&!d.eb(a)))throw new D(203,b.name);},a)}
function Sc(a,b){null===a.Zc&&(a.Zc=A());var c=a.Zc.get(b.name)||null;null===c&&(c=a.i.table(b.Pa)[b.gc].xa(),c=a.C.get(c.m()),a.Zc.set(b.name,c));return c}function Tc(a,b,c){return(null===a?null!==b:null===b)||a.Db(c)!=b.Db(c)}function Uc(a,b,c,d){b=Vc(a.i.info(),b.getName(),0);null!==b&&(b=b.filter(function(a){return a.timing==d}),0!=b.length&&Wc(a,b,c,function(a,b,c){if(b.eb(c))throw new D(203,a.name);}))}
function Xc(a,b,c){b=Vc(a.i.info(),b.getName(),1);if(null===b)return null;var d=new Mc;Wc(a,b,c,function(a,b,c){b=b.get(c);0<b.length&&d.Tb(a.xe,b)});return d}function Yc(a,b,c){var d=new Mc;Wc(a,c,b,function(a,b,c,k){b.get(c).forEach(function(b){d.set(b,{Hd:a,mg:k[1]})})});return d}function Wc(a,b,c,d){b.forEach(function(a){var b=this.C.get(a.name),h=Sc(this,a);c.forEach(function(c){Tc(c[0],c[1],h.getName())&&d(a,b,c[0].o[a.gc],c)},this)},a)}
function Zc(a,b,c,d){0!=c.length&&(c=c.map(function(a){return[null,a]}),Qc(a,b,c,d))}function $c(a,b,c,d){0!=c.length&&(Qc(a,b,c,d),Uc(a,b,c,d))}function ad(a,b,c,d){0!=c.length&&(c=c.map(function(a){return[a,null]}),Uc(a,b,c,d))}
function bd(a,b,c){var d={ke:[],gf:new Mc},e=new Mc;e.Tb(b.getName(),c.map(function(a){return a.id()}));do{var f=new Mc;e.keys().forEach(function(a){var b=this.i.table(a);a=e.get(a).map(function(a){return[this.S.get(a),null]},this);b=Xc(this,b,a);null!==b&&(d.ke.unshift.apply(d.ke,b.keys()),f.Td(b))},a);e=f;d.gf.Td(e)}while(0<e.size);return d};function cd(a){this.ta=A();this.na=A();this.wa=A();this.u=a}m=cd.prototype;m.getName=g("u");m.add=function(a){if(this.wa.has(a.id())){var b=[this.wa.get(a.id()),a];this.na.set(a.id(),b);this.wa.delete(a.id())}else this.ta.set(a.id(),a)};m.modify=function(a){var b=a[1],c=a[0].id();this.ta.has(c)?this.ta.set(c,b):(this.na.has(c)&&(a=[this.na.get(a[0].id())[0],b]),this.na.set(c,a))};
m.delete=function(a){if(this.ta.has(a.id()))this.ta.delete(a.id());else if(this.na.has(a.id())){var b=this.na.get(a.id())[0];this.na.delete(a.id());this.wa.set(a.id(),b)}else this.wa.set(a.id(),a)};m.Td=function(a){a.ta.forEach(function(a){this.add(a)},this);a.na.forEach(function(a){this.modify(a)},this);a.wa.forEach(function(a){this.delete(a)},this)};
function Ec(a){var b=[];a.ta.forEach(function(a){b.push([null,a])});a.na.forEach(function(a){b.push(a)});a.wa.forEach(function(a){b.push([a,null])});return b}m.toString=function(){return"["+Yb(this.ta).toString()+"], ["+Yb(this.na).toString()+"], ["+Yb(this.wa).toString()+"]"};function dd(a){var b=new cd(a.u);a.ta.forEach(function(a){b.delete(a)});a.wa.forEach(function(a){b.add(a)});a.na.forEach(function(a){b.modify([a[1],a[0]])});return b}
m.Yf=function(){return 0==this.ta.size&&0==this.wa.size&&0==this.na.size};function ed(a,b){this.aa=A();b.forEach(function(a){this.aa.set(a.getName(),a)},this);this.i=a.j(oc);this.S=a.j(jc);this.C=a.j(kc);this.ua=new Nc(a);this.gd=new Bc(a);this.pb=A()}function gc(a){var b=[];Yb(a.pb).map(function(a){return this.aa.get(a)},a).forEach(function(a){a.xb()&&(a.ya().forEach(function(a){b.push(this.C.get(a.m()))},this),b.push(this.C.get(a.getName()+".#")))},a);return b}m=ed.prototype;m.$=g("aa");
function fd(a){var b=[];a.aa.forEach(function(a){a.xb()&&(a.ya().forEach(function(a){b.push(a.m())}),b.push(a.getName()+".#"))});return b}m.vb=function(a,b){gd(this,a);Pc(this.ua,a,b);Zc(this.ua,a,b,0);for(var c=0;c<b.length;c++)hd(this,a,[null,b[c]])};
function hd(a,b,c){var d=b.getName(),e=a.pb.get(d)||new cd(d);a.pb.set(d,e);try{Fc(a.gd,b,c)}catch(h){throw h;}b=c[0];var f=c[1];null===b&&null!==f?(a.S.set(d,f),e.add(f)):null!==b&&null!==f?(a.S.set(d,f),e.modify(c)):null!==b&&null===f&&(a.S.remove(d,b.id()),e.delete(b))}m.update=function(a,b){gd(this,a);Pc(this.ua,a,b);var c=b.map(function(a){return[this.S.get(a.id()),a]},this);id(this,a,c);$c(this.ua,a,c,0);c.forEach(function(b){hd(this,a,b)},this)};
m.Md=function(a,b){gd(this,a);Pc(this.ua,a,b);for(var c=0;c<b.length;c++){var d=b[c],e=null,f,h=a.Bb().bd();if(null===h)f=null;else{f=this.ua;var h=h.m(),k=d.Db(h);f=f.C.get(h).get(k);f=0==f.length?null:f[0]}null!=f?(e=this.S.get(f),d.pa=f,$c(this.ua,a,[[e,d]],0)):Zc(this.ua,a,[d],0);hd(this,a,[e,d])}};m.remove=function(a,b){gd(this,a);jd(this,a,b);ad(this.ua,a,b,0);for(var c=0;c<b.length;c++)hd(this,a,[b[c],null])};
function id(a,b,c){b=Vc(a.i.info(),b.getName(),1);if(null!==b){var d=Yc(a.ua,c,b);d.keys().forEach(function(a){d.get(a).forEach(function(b){var c=this.i.table(b.Hd.xe),d=this.S.get(a),n=c.Ab(d.Ea());n.o[b.Hd.cb]=b.mg.o[b.Hd.gc];hd(this,c,[d,n])},this)},a)}}
function jd(a,b,c){if(null!==Vc(a.i.info(),b.getName(),1)){b=bd(a.ua,b,c);var d=b.gf;b.ke.forEach(function(a){var b=this.i.table(a);a=d.get(a).map(function(a){return this.S.get(a)},this);ad(this.ua,b,a,0);a.forEach(function(a){hd(this,b,[a,null])},this)},a)}}function cc(a){a.pb.forEach(function(a){var c=this.aa.get(a.getName());Zc(this.ua,c,B(a.ta),1);ad(this.ua,c,B(a.wa),1);$c(this.ua,c,B(a.na),1)},a)}m.da=aa();m.Fb=function(){var a=B(this.pb).map(function(a){return dd(a)});this.gd.update(a)};
function gd(a,b){if(!a.aa.has(b.getName()))throw new D(106,b.getName());};function kd(a,b,c,d){this.b=a;this.w=b;this.ea=this.b==E?!1:c;this.ma=this.w==E?!1:d}var E=new (aa());kd.prototype.toString=function(){return(this.ea?"(":"[")+(this.b==E?"unbound":this.b)+", "+(this.w==E?"unbound":this.w)+(this.ma?")":"]")};function ld(a){if(md(a))return[];var b=null,c=null;a.b==E||(b=new kd(E,a.b,!1,!a.ea));a.w==E||(c=new kd(a.w,E,!a.ma,!1));return[b,c].filter(function(a){return null!==a})}kd.prototype.reverse=function(){return new kd(this.w,this.b,this.ma,this.ea)};
function nd(a,b){var c=od(a.b,b.b,!0,a.ea,b.ea);if(0==c)return!0;var d=-1==c?a:b,c=1==c?a:b;return d.w==E||d.w>c.b||d.w==c.b&&!d.ma&&!c.ea}function pd(){return new kd(E,E,!1,!1)}function md(a){return a.b==E&&a.w==E}function qd(a){return a.b==a.w&&a.b!=E&&!a.ea&&!a.ma}kd.prototype.contains=function(a){var b=this.w==E||a<this.w||a==this.w&&!this.ma;return(this.b==E||a>this.b||a==this.b&&!this.ea)&&b};
function od(a,b,c,d,e){function f(a){return c?a:1==a?-1:1}d=d||!1;e=e||!1;return a==E?b==E?(d?!e:e)?d?f(1):f(-1):0:f(-1):b==E?f(1):a<b?-1:a==b?(d?!e:e)?d?f(1):f(-1):0:1}function rd(a,b){var c=od(a.b,b.b,!0,a.ea,b.ea);0==c&&(c=od(a.w,b.w,!1,a.ma,b.ma));return c};function F(a,b){this.entries=a;this.L=C(b);this.Va=null}function G(a){return pc(a.L)}function sd(a){return a.entries.map(function(a){return a.sa.o})}function td(a){return a.entries.map(function(a){return a.sa.id()})}function ud(a,b){return a.Va.get(b.m())}var vd=null;function wd(){null===vd&&(vd=new F([],[]));return vd}
function xd(a){if(0==a.length)return wd();for(var b=a.reduce(function(a,b){return a+b.entries.length},0),c=Array(b),d=0,b=a.map(function(a){var b=A();a.entries.forEach(function(a){c[d++]=a;b.set(a.id,a)});return b}),e=A(),f=0;f<c.length;f++)b.every(function(a){return a.has(c[f].id)})&&e.set(c[f].id,c[f]);return new F(B(e),pc(a[0].L))}function yd(a){if(0==a.length)return wd();var b=A();a.forEach(function(a){a.entries.forEach(function(a){b.set(a.id,a)})});return new F(B(b),pc(a[0].L))}
function zd(a,b){var c=1<b.length,d=a.map(function(a){return new Ad(a,c)});return new F(d,b)}function Ad(a,b){this.sa=a;this.id=Bd++;this.Pd=b}var Bd=0;function H(a,b){var c=b.Wa();return null!==c&&a.sa.o.hasOwnProperty(c)?a.sa.o[c]:a.Pd?a.sa.o[I(b.G())][b.getName()]:a.sa.o[b.getName()]}function Cd(a,b,c){var d=b.Wa();if(null!=d)a.sa.o[d]=c;else if(a.Pd){var d=I(b.G()),e=a.sa.o[d];null==e&&(e={},a.sa.o[d]=e);e[b.getName()]=c}else a.sa.o[b.getName()]=c}
function Dd(a,b,c,d){function e(a,b){if(a.Pd){var c=a.sa.o,d;for(d in c)f[d]=c[d]}else f[b[0]]=a.sa.o}var f={};e(a,b);e(c,d);a=new z(-1,f);return new Ad(a,!0)};r("lf.bind",function(a){return new Ed(a)});function Ed(a){this.ga=a}r("lf.Binder",Ed);Ed.prototype.xa=g("ga");function Fd(){this.Oe=Gd();var a=Hd();this.dc=A();this.dc.set(1,Id());this.dc.set(2,Jd());this.dc.set(4,a);this.dc.set(3,a);this.dc.set(5,Kd())}Fd.xc=function(){return Fd.Ke?Fd.Ke:Fd.Ke=new Fd};function Ld(a,b,c){return(a.dc.get(b)||null).get(c)||null}function Gd(){function a(a){return a}var b=A();b.set(1,function(a){return null===a?null:a?1:0});b.set(2,function(a){return null===a?null:a.getTime()});b.set(3,a);b.set(4,a);b.set(5,a);return b}
function Id(){var a=A();a.set("eq",function(a,c){return a==c});a.set("neq",function(a,c){return a!=c});return a}
function Hd(){var a=Id();a.set("between",function(a,c){return null===a||null===c[0]||null===c[1]?!1:a>=c[0]&&a<=c[1]});a.set("gte",function(a,c){return null===a||null===c?!1:a>=c});a.set("gt",function(a,c){return null===a||null===c?!1:a>c});a.set("in",function(a,c){return-1!=c.indexOf(a)});a.set("lte",function(a,c){return null===a||null===c?!1:a<=c});a.set("lt",function(a,c){return null===a||null===c?!1:a<c});return a}
function Kd(){var a=Hd();a.set("match",function(a,c){return null===a||null===c?!1:(new RegExp(c)).test(a)});return a}
function Jd(){var a=A();a.set("between",function(a,c){return null===a||null===c[0]||null===c[1]?!1:a.getTime()>=c[0].getTime()&&a.getTime()<=c[1].getTime()});a.set("eq",function(a,c){return(null===a?-1:a.getTime())==(null===c?-1:c.getTime())});a.set("gte",function(a,c){return null===a||null===c?!1:a.getTime()>=c.getTime()});a.set("gt",function(a,c){return null===a||null===c?!1:a.getTime()>c.getTime()});a.set("in",function(a,c){return c.some(function(c){return c.getTime()==a.getTime()})});a.set("lte",
function(a,c){return null===a||null===c?!1:a.getTime()<=c.getTime()});a.set("lt",function(a,c){return null===a||null===c?!1:a.getTime()<c.getTime()});a.set("neq",function(a,c){return(null===a?-1:a.getTime())!=(null===c?-1:c.getTime())});return a};function J(){this.h=this.B=null}var Md=[];J.prototype.getParent=g("B");J.prototype.gb=function(){for(var a=this;!ea(a.getParent());)a=a.getParent();return a};function Nd(a){for(var b=0;!ea(a.getParent());)b++,a=a.getParent();return b}function K(a){return a.h||Md}function Od(a,b){return K(a)[b]||null}function Pd(a,b,c){b.B=a;null===a.h?a.h=[b]:a.h.splice(c,0,b)}function L(a,b){b.B=a;null===a.h?a.h=[b]:a.h.push(b)}
function Qd(a,b){var c=a.h&&a.h[b];return c?(c.B=null,a.h.splice(b,1),0==a.h.length&&(a.h=null),c):null}J.prototype.removeChild=function(a){return Qd(this,K(this).indexOf(a))};function Rd(a,b,c){Od(a,c).B=null;b.B=a;a.h[c]=b}function Sd(a,b,c){!1!==b.call(c,a)&&K(a).forEach(function(a){Sd(a,b,c)})};function Td(){J.call(this);this.pa=Ud++}t(Td,J);var Ud=0;Td.prototype.V=g("pa");function Vd(a,b,c){Td.call(this);this.N=a;this.value=b;this.F=c;this.sc=Ld(Fd.xc(),this.N.H(),this.F);this.Ya=!1;this.$b=b}t(Vd,Td);m=Vd.prototype;m.Ib=function(){var a=new Vd(this.N,this.value,this.F);a.$b=this.$b;a.qd(this.Ya);var b=this.V();a.pa=b;return a};m.fb=function(a){return null!=a?(a.push(this.N),a):[this.N]};m.qd=ba("Ya");function Wd(a){var b=!1;a.value instanceof Ed||(b="array"==da(a.value)?!a.value.some(function(a){return a instanceof Ed}):!0);if(!b)throw new D(501);}
m.eval=function(a){Wd(this);if("in"==this.F)return Xd(this,a);var b=a.entries.filter(function(a){return this.sc(H(a,this.N),this.value)!=this.Ya},this);return new F(b,G(a))};m.bind=function(a){if(this.$b instanceof Ed){var b=this.$b.xa();if(a.length<=b)throw new D(510);this.value=a[b]}else"array"==da(this.$b)&&(this.value=this.$b.map(function(b){if(b instanceof Ed){var d=b.xa();if(a.length<=d)throw new D(510);return a[b.xa()]}return b}))};
function Xd(a,b){var c=C(a.value),d=function(a){return null===a?!1:c.has(a)!=this.Ya}.bind(a),e=b.entries.filter(function(a){return d(H(a,this.N))},a);return new F(e,G(b))}m.toString=function(){return"value_pred("+this.N.m()+" "+this.F+(this.Ya?"(complement)":"")+" "+this.value+")"};function Yd(a){this.ca=a;this.Xc=this.Ba=null}function Zd(a,b){null===a.Ba&&null!=a.s&&(a.Ba=$d(a.s));return a.Ba.get(b)||null}function $d(a){var b=A();Sd(a,function(a){b.set(a.V(),a)});return b}function ae(a,b){b.s&&(a.s=b.s.Ib());a.Xc=b}Yd.prototype.bind=function(){return this};function be(a,b){var c=a.s;null!=c&&Sd(c,function(a){a instanceof Vd&&a.bind(b)})};function ce(a){Yd.call(this,a)}t(ce,Yd);function de(a){var b="";a.forEach(function(c,d){b+=c.N.m()+" ";b+=1==c.jb?"ASC":"DESC";d<a.length-1&&(b+=", ")});return b}ce.prototype.$=function(){return C(this.b)};ce.prototype.clone=function(){var a=new ce(this.ca);ae(a,this);this.f&&(a.f=this.f.slice());this.b&&(a.b=this.b.slice());a.W=this.W;a.K=this.K;this.M&&(a.M=this.M.slice());this.ja&&(a.ja=this.ja.slice());this.Ob&&(a.Ob=this.Ob);this.Vb&&(a.Vb=this.Vb);a.wb=this.wb;return a};
ce.prototype.bind=function(a){ce.Gb.bind.call(this,a);null!=this.Ob&&(this.W=a[this.Ob.xa()]);null!=this.Vb&&(this.K=a[this.Vb.xa()]);be(this,a);return this};function ee(a,b){this.Ca=a;this.aa=b}ee.prototype.gb=g("Ca");ee.prototype.$=g("aa");function fe(a){var b=C();a.forEach(function(a){a.$().forEach(b.add.bind(b))});return b};function ge(a,b){this.global=a;this.Ja=a.j(ic);this.nd=b.map(function(a){return a.context});this.Ye=b.map(function(a){return a.ae});this.Ae=fe(this.Ye);this.pf=he(this);this.$a=y()}function he(a){return a.nd.some(function(a){return!(a instanceof ce)})?1:0}m=ge.prototype;
m.exec=function(){function a(){var f=d.shift();if(f){var h=e[c.length];return f.gb().exec(b,h).then(function(b){c.push(b[0]);return a()})}return w()}var b=new ed(this.global,this.Ae),c=[],d=this.Ye.slice(),e=this.nd;return a().then(function(){return this.Ja.zb(this.pf,b).da()}.bind(this)).then(function(){this.Yd(c);return c}.bind(this),function(a){b.Fb();throw a;})};m.H=g("pf");m.$=g("Ae");m.Kb=g("$a");m.V=function(){return ja(this)};m.Yd=aa();function ie(a,b){ge.call(this,a,b);this.Eb=a.j(nc)}t(ie,ge);ie.prototype.getPriority=l(0);ie.prototype.Yd=function(a){this.nd.forEach(function(b,c){je(this.Eb,b,a[c])},this)};function ke(a,b){this.g=a;this.Eb=a.j(nc);this.Da=a.j(mc);this.gd=new Bc(a);this.pb=b;var c=a.j(oc),d=this.pb.map(function(a){return c.table(a.getName())});this.aa=C(d);this.$a=y()}m=ke.prototype;m.exec=function(){this.gd.update(this.pb);this.Lc();return w()};m.H=l(1);m.$=g("aa");m.Kb=g("$a");m.V=function(){return ja(this)};m.getPriority=l(1);m.Lc=function(){var a=le(this.Eb,this.aa);0!=a.length&&(a=new ie(this.g,a),me(this.Da,a))};function ne(a){this.g=a;this.Ja=a.j(ic);this.Da=a.j(mc)}ne.prototype.Wd=function(a){a=new ke(this.g,a);me(this.Da,a)};function M(a,b){this.Xb=a;this.l=b;this.Sa=A()}r("lf.backstore.FirebaseRawBackStore",M);M.prototype.cd=g("l");M.prototype.dd=function(){throw new D(351);};function oe(a,b){var c=y(),d=a;b.length&&(d=a.child(b));d.once("value",function(a){c.resolve(a.val())},function(a){c.reject(a)});return c.ia}function pe(a,b,c){function d(a){a?e.reject(a):e.resolve()}c=c||!1;var e=y();c?a.set(b,d):a.update(b,d);return e.ia}
M.prototype.Fa=function(a){return oe(this.l,"@rev/R").then(function(a){this.Ma=a;return oe(this.l,"@table")}.bind(this)).then(function(b){var c=0,d;for(d in b)this.Sa.set(d,b[d]),b[d]>c&&(c=b[d]);a.ra().forEach(function(a){this.Sa.has(a.getName())||(b[a.getName()]=++c)},this);d=this.l.child("@table");return pe(d,b)}.bind(this))};
function qe(a,b,c){var d=a.Sa.get(b);return null!=d?function(){var a={},b=y();this.l.orderByChild("T").equalTo(d).once("value",function(d){d.forEach(function(b){var d=c(b.val());a[parseInt(b.key(),10)]=d});b.resolve(a)});return b.ia}.call(a).then(function(a){a["@rev"]={R:++this.Ma};return pe(this.l,a)}.bind(a)):w()}M.prototype.qc=function(a){return qe(this,a,l(null)).then(function(){this.Sa.delete(a);return pe(this.l.child("@table/"+a),null,!0)}.bind(this))};M.prototype.dropTable=M.prototype.qc;
M.prototype.lc=function(a,b,c){return qe(this,a,function(a){var e=a.P;e[b]=c;return{R:this.Ma+1,T:a.T,P:e}}.bind(this))};M.prototype.addTableColumn=M.prototype.lc;M.prototype.rc=function(a,b){return qe(this,a,function(a){var d=a.P;delete d[b];return{R:this.Ma+1,T:a.T,P:d}}.bind(this))};M.prototype.dropTableColumn=M.prototype.rc;M.prototype.Kc=function(a,b,c){return qe(this,a,function(a){var e=a.P;e[c]=e[b];delete e[b];return{R:this.Ma+1,T:a.T,P:e}}.bind(this))};M.prototype.renameTableColumn=M.prototype.Kc;
M.prototype.rb=function(){throw new D(351);};M.prototype.createRow=M.prototype.rb;M.prototype.Ac=g("Xb");M.prototype.getVersion=M.prototype.Ac;M.prototype.bc=function(a){var b=y();a=this.Sa.get(a);this.l.orderByChild("T").equalTo(a).once("value",function(a){var d=[];a.forEach(function(a){d.push(a.val().P)});b.resolve(d)});return b.ia};M.prototype.dump=function(){var a={},b=Yb(this.Sa).map(function(b){return this.bc(b).then(function(d){a[b]=d})}.bind(this));return eb(b).then(function(){return a})};
M.prototype.dump=M.prototype.dump;function re(a,b,c){$b.call(this,c,b);this.l=a}t(re,$b);re.prototype.G=function(a){return this.l.yc(a)};
re.prototype.nc=function(){var a=this.La.pb;if(0==a.size)this.Y.resolve();else{var b=this.l.Ma+1;this.l.Ma=b;var c={"@rev":{R:b}};a.forEach(function(a,e){var f=this.l.Sa.get(e);a.ta.forEach(function(a,d){c[d]={R:b,T:f,P:a.o}});a.na.forEach(function(a,d){c[d]={R:b,T:f,P:a[1].o}});a.wa.forEach(function(a,b){c[b]=null})},this);this.l.l.update(c,function(c){null===c?this.Y.resolve():(this.l.Ma=b-1,c=B(a).map(function(a){return se(this.l,a.getName())},this),eb(c).then(this.Y.reject.bind(this.Y),this.Y.reject.bind(this.Y)))}.bind(this))}return this.Y.ia};function te(){this.va=A()}function ue(a,b){if(0==b.length)return B(a.va);var c=[];b.forEach(function(a){a=this.va.get(a)||null;null===a||c.push(a)},a);return c}te.prototype.getData=g("va");te.prototype.get=function(a){return w(ue(this,a))};function ve(a,b){b.forEach(function(a){this.va.set(a.id(),a)},a)}te.prototype.put=function(a){ve(this,a);return w()};function we(a,b){0==b.length||b.length==a.va.size?a.va.clear():b.forEach(function(a){this.va.delete(a)},a)}
te.prototype.remove=function(a){we(this,a);return w()};function xe(a){return 0==a.va.size?0:Yb(a.va).reduce(function(a,c){return a>c?a:c},0)};function ye(a,b){this.i=a;this.vf=b;this.Jc=A();this.Ma=-1;this.L=A();this.Sa=A();this.Ad=null}m=ye.prototype;
m.Fa=function(a){this.l=this.vf.child(this.i.name());var b=a||function(){return w()};return oe(this.l,"@db/version").then(function(a){return null===a?pe(this.l,ze(this),!0).then(function(){var a=new M(0,this.l);return b(a)}.bind(this)):a==this.i.version()?oe(this.l,"@rev/R").then(function(a){this.Ma=a;return oe(this.l,"@table")}.bind(this)).then(function(a){for(var b in a)this.Sa.set(b,a[b]);a=this.i.ra().map(function(a){return se(this,a.getName())},this);return eb(a)}.bind(this)).then(function(){Ae(this);
Be(this);return w()}.bind(this)):this.Zd(a,b).then(function(){return this.Fa()}.bind(this))}.bind(this))};m.Zd=function(a,b){var c=new M(a,this.l);return c.Fa(this.i).then(function(){return w()}.bind(this)).then(function(){return b(c)}).then(function(){var a=this.l.child("@db");return pe(a,{version:this.i.version()},!0)}.bind(this))};
function Be(a){a.l.off();a.l.on("child_removed",a.jg.bind(a));a.Bd&&(a.Bd.off(),a.Jc.clear());a.Bd=a.l.orderByChild("R").startAt(a.Ma+1);a.Bd.on("value",a.Wd.bind(a))}function Ae(a){pb=B(a.L).map(function(a){return xe(a)}).reduce(function(a,c){return a>c?a:c},0)+1}m.jg=function(a){var b=a.val(),c=this.Jc.get(b.T)||null;null===c&&(c=C(),this.Jc.set(b.T,c));c.add(parseInt(a.key(),10))};
m.Wd=function(a){var b=a.child("@rev/R").val();null!=b&&b!=this.Ma&&(this.Ma=b,a=Ce(this,a),a.forEach(function(a){var b=this.L.get(a.getName()),e=Yb(a.wa);0<e.length&&we(b,e);var f=B(a.ta);a.na.forEach(function(a){f.push(a[1])});ve(b,f)},this),0<a.length&&this.Fc(a),Be(this))};
function Ce(a,b){var c=C(),d=A();a.Sa.forEach(function(a,b){var h=this.L.get(b),k=new cd(b);if(this.Jc.has(a)){var n=pc(this.Jc.get(a));n.forEach(function(a){c.add(a)});ue(h,n).forEach(function(a){k.delete(a)})}d.set(a,k)}.bind(a));b.forEach(function(a){if("@rev"!=a.key()){var b=parseInt(a.key(),10);if(!c.has(b)){a=a.val();var h=d.get(a.T),k=this.L.get(h.getName());k.getData().has(b)?h.modify([ue(k,[b])[0],new z(b,a.P)]):h.add(new z(b,a.P))}}}.bind(a));return B(d).filter(function(a){return!a.Yf()})}
function se(a,b){var c=y(),d=a.Sa.get(b);a.l.orderByChild("T").equalTo(d).once("value",function(a){var d=new te,h=[];a.forEach(function(a){h.push(new z(parseInt(a.key(),10),a.val().P))});ve(d,h);this.L.set(b,d);c.resolve()}.bind(a));return c.ia}function ze(a){var b={};b["@db"]={version:a.i.version()};b["@rev"]={R:1};a.Ma=1;b["@table"]={};a.i.ra().forEach(function(a,d){var e=a.getName();b["@table"][e]=d;this.L.set(e,new te);this.Sa.set(e,d)},a);return b}m.zb=function(a,b){return new re(this,a,b)};
m.yc=function(a){var b=this.L.get(a)||null;if(null!==b)return b;throw new D(101,a);};m.close=aa();m.subscribe=ba("Ad");m.Fc=function(a){null!=this.Ad&&this.Ad(a)};function N(a,b,c,d){this.l=b;this.Ua=c;this.Xb=a;this.Uc=d}r("lf.backstore.IndexedDBRawBackStore",N);N.prototype.cd=g("l");N.prototype.getRawDBInstance=N.prototype.cd;N.prototype.dd=g("Ua");N.prototype.getRawTransaction=N.prototype.dd;N.prototype.qc=function(a){return new v(function(b,c){try{this.l.deleteObjectStore(a)}catch(d){c(d);return}b()},this)};N.prototype.dropTable=N.prototype.qc;
function De(a,b,c,d){return new v(function(a,f){var h;try{var k=this.Ua.objectStore(b);h=k.openCursor()}catch(n){f(n);return}h.onsuccess=function(){var b=h.result;b?(c(b),b.continue()):(d(k),a())};h.onerror=f},a)}function Ee(a){var b=null;return b=a instanceof ArrayBuffer?tb(a):a instanceof Date?a.getTime():a}
function Fe(a,b,c){function d(a){var b=vc(a.value),d=b.o,e;for(e in d){var x=rb(d[e]);c(x);d[e]=x.Ea()}a.update(b.Ea())}function e(a){var b=rb(a.value);c(b);a.update(b.Ea())}return De(a,b,a.Uc?d:e,aa())}N.prototype.lc=function(a,b,c){var d=Ee(c);return Fe(this,a,function(a){a.o[b]=d})};N.prototype.addTableColumn=N.prototype.lc;N.prototype.rc=function(a,b){return Fe(this,a,function(a){delete a.o[b]})};N.prototype.dropTableColumn=N.prototype.rc;
N.prototype.Kc=function(a,b,c){return Fe(this,a,function(a){a.o[c]=a.o[b];delete a.o[b]})};N.prototype.renameTableColumn=N.prototype.Kc;function Ge(a,b){var c=[];return new v(function(a,e){var f;try{f=this.Ua.objectStore(b).openCursor()}catch(h){e(h);return}f.onsuccess=function(){var b=f.result;if(b){if(this.Uc){var e;e=vc(b.value).o;for(var n in e)c.push(e[n])}else c.push(b.value);b.continue()}else a(c)}.bind(this);f.onerror=e},a)}N.prototype.rb=function(a){var b={},c;for(c in a)b[c]=Ee(a[c]);return sb(b)};
N.prototype.createRow=N.prototype.rb;N.prototype.Ac=g("Xb");N.prototype.getVersion=N.prototype.Ac;N.prototype.dump=function(){for(var a=this.l.objectStoreNames,b=[],c=0;c<a.length;++c){var d=a.item(c);b.push(this.bc(d))}return eb(b).then(function(b){var c={};b.forEach(function(b,d){c[a.item(d)]=b});return c})};N.prototype.dump=N.prototype.dump;N.prototype.bc=function(a){return Ge(this,a).then(function(a){return a.map(function(a){return a.value})})};function He(a,b){this.ba=a;this.Jb=b}m=He.prototype;m.get=function(a){if(0==a.length)return this.wc();a=a.map(function(a){return new v(function(c,d){var e;try{e=this.ba.get(a)}catch(f){d(f);return}e.onerror=d;e.onsuccess=function(a){c(this.Jb(a.target.result))}.bind(this)},this)},this);return eb(a)};
m.wc=function(){return new v(function(a,b){var c=[],d;try{d=this.ba.openCursor()}catch(e){b(e);return}d.onerror=b;d.onsuccess=function(){var b=d.result;b?(c.push(this.Jb(b.value)),b.continue()):a(c)}.bind(this)},this)};m.Qb=function(a){return new v(function(b,c){var d;try{d=a()}catch(e){c(e);return}d.onsuccess=b;d.onerror=c},this)};m.put=function(a){if(0==a.length)return w();a=a.map(function(a){return this.Qb(function(){return this.ba.put(a.Ea())}.bind(this))},this);return eb(a)};
m.remove=function(a){return new v(function(b,c){var d=this.ba.count();d.onsuccess=function(d){if(0==a.length||d.target.result==a.length)return this.Qb(function(){return this.ba.clear()}.bind(this)).then(b,c);d=a.map(function(a){return this.Qb(function(){return this.ba.delete(a)}.bind(this))},this);eb(d).then(b,c)}.bind(this);d.onerror=c},this)};function Ie(a,b,c,d,e){$b.call(this,c,d);this.g=a;this.Ua=b;this.Uc=e;this.Ua.oncomplete=this.Y.resolve.bind(this.Y);this.Ua.onabort=this.Y.reject.bind(this.Y)}t(Ie,$b);Ie.prototype.G=function(a,b,c){return this.Uc?(c=null!=c?c:0,a=this.Ua.objectStore(a),new wc(a,b,0==c?qa(yc,this.g):zc)):new He(this.Ua.objectStore(a),b)};Ie.prototype.nc=function(){return this.Y.ia};function Je(a,b){this.g=a;this.i=b;this.Vc=b.Ze().If||!1}m=Je.prototype;
m.Fa=function(a){var b=window.indexedDB||window.mozIndexedDB||window.webkitIndexedDB||window.msIndexedDB;if(null==b)throw new D(352);var c=a||function(){return w()};return new v(function(a,e){var f;try{f=b.open(this.i.name(),this.i.version())}catch(h){e(h);return}f.onerror=e;f.onupgradeneeded=function(a){Ke(this,c,a).then(aa(),e)}.bind(this);f.onsuccess=function(b){this.l=b.target.result;this.ge().then(function(b){pb=b+1;a(this.l)}.bind(this))}.bind(this)},this)};
function Ke(a,b,c){var d=c.target.result,e=c.target.transaction;c=new N(c.oldVersion,d,e,a.Vc);Le(d);a.i.ra().forEach(qa(a.Df,d,e),a);return b(c)}function Le(a){for(var b=[],c=0;c<a.objectStoreNames.length;++c){var d=a.objectStoreNames.item(c);-1!=d.indexOf(".")&&b.push(d)}b.forEach(function(b){try{a.deleteObjectStore(b)}catch(c){}})}
m.Df=function(a,b,c){a.objectStoreNames.contains(c.getName())||a.createObjectStore(c.getName(),{keyPath:"id"});c.xb()&&(c.ya().forEach(function(c){this.pc(a,b,c.m(),"btree")},this),this.pc(a,b,Me(c),"rowid"))};m.pc=function(a,b,c,d){a.objectStoreNames.contains(c)||(a.createObjectStore(c,{keyPath:"id"}),a=b.objectStore(c),(this.Vc?new wc(a,rb,zc):new He(a,rb)).put([new vb(new ub(d))]))};
m.zb=function(a,b){var c=Yb(b.$());fd(b).forEach(function(a){c.push(a)});var d=this.l.transaction(c,0==a?"readonly":"readwrite");return new Ie(this.g,d,b,a,this.Vc)};
m.ge=function(a){function b(){if(0==d.length)return w();var a=d.shift();return c(a).then(b)}function c(b){return new v(function(c,d){var S;try{S=(a||e.transaction([b])).objectStore(b).openCursor(null,"prev")}catch(oa){d(oa);return}S.onsuccess=function(a){(a=a.target.result)&&(f=Math.max(f,h(a)));c(f)};S.onerror=function(){c(f)}})}var d=this.i.ra().map(function(a){return a.getName()}),e=this.l,f=0,h=function(a){return this.Vc?(a=vc(a.value),Object.keys(a.o).reduce(function(a,b){return Math.max(a,b)},
0)):a.key}.bind(this);return new v(function(a){b().then(function(){a(f)})})};m.close=function(){this.l.close()};m.yc=function(){throw new D(511);};m.subscribe=aa();m.Fc=aa();function Ne(a,b,c){$b.call(this,c,b);this.ba=a;0==b&&this.Y.resolve()}t(Ne,$b);Ne.prototype.G=function(a){return this.ba.yc(a)};Ne.prototype.nc=function(){this.Y.resolve();return this.Y.ia};function Oe(a){this.i=a;this.L=A()}m=Oe.prototype;m.Fa=function(){this.i.ra().forEach(this.Vf,this);return w()};m.yc=function(a){var b=this.L.get(a)||null;if(null===b)throw new D(101,a);return b};m.zb=function(a,b){return new Ne(this,a,b)};function Pe(a,b){if(!a.L.has(b)){var c=new te;a.L.set(b,c);return c}return null}m.Vf=function(a){Pe(this,a.getName());a.xb()&&(a.ya().forEach(function(a){this.pc(a.m(),"btree")},this),this.pc(Me(a),"rowid"))};m.pc=function(a,b){var c=Pe(this,a);null===c||c.put([new vb(new ub(b))])};
m.close=aa();m.subscribe=aa();m.Fc=aa();function Qe(a){Oe.call(this,a);this.jd=null}t(Qe,Oe);Qe.prototype.subscribe=function(a){null===this.jd&&(this.jd=a)};Qe.prototype.Fc=function(a){null===this.jd||this.jd(a)};function Re(a,b,c){this.Ua=a;this.u=b;this.Jb=c}Re.prototype.get=function(a){var b=this.Jb;return Se(this.Ua,"SELECT id, value FROM "+this.u+" "+(0==a.length?"":"WHERE id IN ("+a.join(",")+")"),[],function(a){for(var d=a.rows.length,e=Array(d),f=0;f<d;++f)e[f]=b({id:a.rows.item(f).id,value:JSON.parse(a.rows.item(f).value)});return e})};
Re.prototype.put=function(a){if(0==a.length)return w();var b="INSERT OR REPLACE INTO "+this.u+"(id, value) VALUES (?, ?)";a.forEach(function(a){Se(this.Ua,b,[a.id(),JSON.stringify(a.o)])},this);return w()};Re.prototype.remove=function(a){Se(this.Ua,"DELETE FROM "+this.u+" "+(0==a.length?"":"WHERE id IN ("+a.join(",")+")"),[]);return w()};function Te(a,b,c){$b.call(this,b,c);this.l=a;this.L=A();this.Dd=[]}t(Te,$b);function Ue(a){return a.replace(".","__d__").replace("#","__s__")}Te.prototype.G=function(a,b){var c=this.L.get(a)||null;null===c&&(c=new Re(this,Ue(a),b),this.L.set(a,c));return c};function Se(a,b,c,d){var e=y();a.Dd.push({yg:b,ng:c,transform:d,Y:e});return e.ia}
Te.prototype.nc=function(){var a=null,b=this.Y.reject.bind(this.Y),c=function(a,b){this.Y.reject(b)}.bind(this),d=[],e=function(b,h){if(null!==a){var k=h;null!=a.transform&&null!=h&&(k=a.transform(h));d.push(k);a.Y.resolve(k)}0<this.Dd.length?(a=k=this.Dd.shift(),b.executeSql(k.yg,k.ng,e,c)):this.Y.resolve(d)}.bind(this);0==this.of?this.l.readTransaction(e,b):this.l.transaction(e,b);return this.Y.ia};function O(a,b,c){this.l=c;this.g=a;this.Xb=b}r("lf.backstore.WebSqlRawBackStore",O);O.prototype.cd=g("l");O.prototype.getRawDBInstance=O.prototype.cd;O.prototype.dd=function(){throw new D(356);};O.prototype.getRawTransaction=O.prototype.dd;function Ve(a){return new Te(a.l,new ed(a.g,C()),1)}O.prototype.qc=function(a){var b=Ve(this);Se(b,"DROP TABLE "+a,[]);return b.da()};O.prototype.dropTable=O.prototype.qc;
O.prototype.bc=function(a){var b=Ve(this);Se(b,"SELECT id, value FROM "+a,[]);return b.da().then(function(a){for(var b=a[0].rows.length,e=Array(b),f=0;f<b;++f)e[f]={id:a[0].rows.item(f).id,value:JSON.parse(a[0].rows.item(f).value)};return w(e)})};function We(a,b,c){var d=Ve(a),e="UPDATE "+b+" SET value=? WHERE id=?";return a.bc(b).then(function(a){a.forEach(function(a){a=c(a);Se(d,e,[JSON.stringify(a.value),a.id])});return d.da()})}
O.prototype.lc=function(a,b,c){var d=Ee(c);return We(this,a,function(a){a.value[b]=d;return a})};O.prototype.addTableColumn=O.prototype.lc;O.prototype.rc=function(a,b){return We(this,a,function(a){delete a.value[b];return a})};O.prototype.dropTableColumn=O.prototype.rc;O.prototype.Kc=function(a,b,c){return We(this,a,function(a){a.value[c]=a.value[b];delete a.value[b];return a})};O.prototype.renameTableColumn=O.prototype.Kc;O.prototype.rb=function(a){var b={},c;for(c in a)b[c]=Ee(a[c]);return sb(b)};
O.prototype.createRow=O.prototype.rb;O.prototype.Ac=g("Xb");O.prototype.getVersion=O.prototype.Ac;function Xe(a){Se(a,'SELECT tbl_name FROM sqlite_master WHERE type="table"',[],function(a){for(var c=Array(a.rows.length),d=0;d<c.length;++d)c[d]=a.rows.item(d).tbl_name;return c})}
O.prototype.dump=function(){var a=y(),b=Ve(this);Xe(b);var c={};b.da().then(function(b){b=b[0].filter(function(a){return"__lf_ver"!=a&&"__WebKitDatabaseInfoTable__"!=a}).map(function(a){return this.bc(a).then(function(b){c[a]=b})},this);eb(b).then(function(){a.resolve(c)})}.bind(this));return a.ia};O.prototype.dump=O.prototype.dump;function Ye(a,b,c){this.g=a;this.i=b;this.xg=c||4194304}function Ze(a){return new ed(a.g,C())}m=Ye.prototype;m.Fa=function(a){if(null==window.openDatabase)throw new D(353);var b=a||function(){return w()};return new v(function(a,d){try{var e=window.openDatabase(this.i.name(),"",this.i.name(),this.xg);if(null!=e)this.l=e,$e(this,b).then(a,d);else throw new D(354);}catch(f){d(f)}},this)};
function $e(a,b){var c=y(),d=new Te(a.l,Ze(a),1);Se(d,"CREATE TABLE IF NOT EXISTS __lf_ver(id INTEGER PRIMARY KEY, v INTEGER)",[]);Se(d,"SELECT v FROM __lf_ver WHERE id = 0",[]);d.da().then(function(a){var d=0;a[1].rows.length&&(d=a[1].rows.item(0).v);d<this.i.version()?this.Zd(b,d).then(c.resolve.bind(c)):d>this.i.version()?c.reject(new D(108)):c.resolve()}.bind(a));return c.ia}m.zb=function(a,b){if(null!=this.l)return new Te(this.l,b,a);throw new D(2);};m.close=aa();
m.yc=function(){throw new D(512);};m.subscribe=function(){throw new D(355);};m.Fc=function(){throw new D(355);};m.Zd=function(a,b){var c=y();af(this).then(function(){a(new O(this.g,b,this.l)).then(function(){return this.ge()}.bind(this)).then(c.resolve.bind(c))}.bind(this),c.reject.bind(c));return c.ia};
function af(a){var b=a.i.ra(),c=new Te(a.l,Ze(a),1),d=new Te(a.l,Ze(a),1);Se(c,"INSERT OR REPLACE INTO __lf_ver VALUES (0, ?)",[a.i.version()]);Xe(c);return c.da().then(function(a){function c(a,b){Se(d,"INSERT INTO "+a+"(id, value) VALUES(?, ?)",[-1,JSON.stringify(qb(new vb(new ub(b))))])}var h=a[1];h.filter(function(a){return-1!=a.indexOf("__d__")}).forEach(function(a){Se(d,"DROP TABLE "+a,[])});var k=[],n=[],x=[];b.map(function(a){-1==h.indexOf(a.getName())&&k.push(a.getName());a.xb&&(a.ya().forEach(function(a){a=
Ue(a.m());k.push(a);n.push(a)}),a=Ue(Me(a)),k.push(a),x.push(a))});k.forEach(function(a){Se(d,"CREATE TABLE "+a+"(id INTEGER PRIMARY KEY, value TEXT)",[])});n.forEach(function(a){c(a,"btree")});x.forEach(function(a){c(a,"rowid")});return d.da()})}
m.ge=function(){var a=0,b=y(),c=function(b){var c=new Te(this.l,Ze(this),0);Se(c,"SELECT MAX(id) FROM "+b,[]);return c.da().then(function(b){b=b[0].rows.item(0)[0];a=Math.max(b,a)})}.bind(this),d=this.i.ra().map(function(a){return c(a.getName())});eb(d).then(function(){b.resolve(a)},function(a){b.reject(a)});return b.ia};function bf(a){this.X=A();this.Wb=A();a.ra().forEach(function(a){this.Wb.set(a.getName(),C())},this)}m=bf.prototype;m.set=function(a,b){this.X.set(b.id(),b);this.Wb.get(a).add(b.id())};m.Tb=function(a,b){var c=this.Wb.get(a);b.forEach(function(a){this.X.set(a.id(),a);c.add(a.id())},this)};m.get=function(a){return this.X.get(a)||null};function cf(a,b){return b.map(function(a){return this.get(a)},a)}
m.Xa=function(a,b,c){var d=[],e=Math.min(b,c),f=Math.max(b,c);a=this.Wb.get(a);if(a.size<f-e)a.forEach(function(a){a>=e&&a<=f&&(a=this.X.get(a),d.push(a))},this);else for(b=e;b<=f;++b)a.has(b)&&(c=this.X.get(b),d.push(c));return d};m.remove=function(a,b){this.X.delete(b);this.Wb.get(a).delete(b)};m.Gg=function(a){return null!=a?this.Wb.get(a).size:this.X.size};m.clear=function(){this.X.clear();this.Wb.clear()};function df(a,b,c){var d=0,e=a.length;for(c=c||ef;d<e;){var f=d+e>>1;0>c(a[f],b)?d=f+1:e=f}return d==e&&a[d]==b?d:~d}function ef(a,b){return a-b}function ff(a,b,c){c=df(a,b,c);return 0>c?(a.splice(-(c+1),0,b),!0):!1};function gf(a,b,c,d){a=b?a.reverse():a;if(null==c&&null==d)return a;c=Math.min(q(c)?c:a.length,a.length);if(0==c)return[];d=Math.min(d||0,a.length);return a.slice(d,d+c)};function hf(){this.oa=0}hf.prototype.add=function(a,b){this.oa+=b};hf.prototype.remove=function(a,b){this.oa-=b};hf.prototype.clear=function(){this.oa=0};function jf(a,b){a.clear();b.forEach(function(a){this.oa+=a.oa},a)};function kf(a,b,c,d){this.u=a;this.U=b;this.me=c;this.nb=new hf;if(d){a=511;a*=a*a;if(d.length>=a)throw new D(6,a);d=mf(this,d);this.qa=d=nf(d)}else this.clear()}var of=[];m=kf.prototype;m.getName=g("u");m.toString=function(){return this.qa.toString()};m.add=function(a,b){this.qa=this.qa.vb(a,b)};m.set=function(a,b){this.qa=this.qa.vb(a,b,!0)};m.remove=function(a,b){this.qa=this.qa.remove(a,b)};m.get=function(a){return this.qa.get(a)};
m.Yc=function(a){if(null==a)return this.Na().oa;if(a instanceof kd){if(md(a))return this.Na().oa;if(qd(a))return this.get(a.b).length}return this.Xa([a]).length};m.Na=g("nb");m.wc=function(a,b,c,d){c=Array(a);this.qa.fill({offset:b?this.nb.oa-a-d:d,count:a,je:0},c);return b?c.reverse():c};
m.Xa=function(a,b,c,d){var e=pf(this.qa).c[0];if(!q(e)||0==c)return of;b=b||!1;c=null!=c?Math.min(c,this.nb.oa):this.nb.oa;d=d||0;var f=Math.min(Math.max(this.nb.oa-d,0),c);if(0==f)return of;if(!q(a)||1==a.length&&a[0]instanceof kd&&md(a[0]))return this.wc(f,b,c,d);a=this.U.kf(a);var h=Array(b?this.nb.oa:f),k={count:0,W:h.length,reverse:b,K:d};a.forEach(function(a){for(var b=this.U.od(a),b=this.U.Od(a)?e:b[0],b=qf(this.qa,b),c=k.count,d=0;null!=b&&k.count<k.W;)b.Xa(a,k,h),k.count!=c||0<k.K?(d=0,c=
k.count):d++,b=2==d?null:b.next()},this);h.length>k.count&&h.splice(k.count,h.length-k.count);return b?gf(h,b,c,d):h};m.clear=function(){this.qa=rf(this);this.nb.clear()};m.eb=function(a){return this.qa.eb(a)};m.min=function(){return this.Ec(this.U.min.bind(this.U))};m.max=function(){return this.Ec(this.U.max.bind(this.U))};
m.Ec=function(a){var b=pf(this.qa),c=sf(this.qa);if(0==b.c.length&&0==c.c.length)return null;var d=b.c[0],b=b.A[0],e=c.c[c.c.length-1],c=c.A[c.c.length-1];return 1==a(d,e)?[d,this.me?[b]:b]:[e,this.me?[c]:c]};m.Ha=g("me");m.oc=g("U");m.Sd=function(a,b){return null!=a?-1==this.U.compare(a,b):!1};m.Oa=function(a,b){return null!=a?0==this.U.compare(a,b):!1};m.Ea=function(){for(var a=[],b=pf(this.qa);b;)a.push(new z(b.pa,[b.c,b.A])),b=b.za;return a};
function tf(a,b,c,d){a=new kf(b,a,c);d=uf(d,a);a.qa=d;return a}function vf(a,b){this.pa=a;this.D=b;this.hb=0;this.za=this.yb=this.B=null;this.c=[];this.A=[];this.h=[]}function rf(a){return new vf(pb++,a)}function P(a){return 0==a.hb}m=vf.prototype;m.next=g("za");
function wf(a){function b(a){return null!=a?a.pa.toString():"_"}var c=a.pa+"["+a.c.join("|")+"]",d=a.h.map(function(a){return a.pa}).join("|"),e=a.A.join("/"),f=b(a.yb)+"{",f=P(a)?f+e:f+d,f=f+"}"+b(a.B);a.za&&(a=wf(a.za),c=c+"  "+a[0],f=f+"  "+a[1]);return[c,f]}m.toString=function(){var a="",b=wf(this),a=a+(b[0]+"\n"+b[1]+"\n");this.h.length&&(a+=this.h[0].toString());return a};function pf(a){return P(a)?a:pf(a.h[0])}function sf(a){return P(a)?a:sf(a.h[a.h.length-1])}
function xf(a,b){b&&(b.yb=a);a&&(a.za=b)}function mf(a,b){for(var c=b.length,d=0,e=rf(a),f=e;0<c;){var h=768<=c?511:257<=c&&511>=c?c:257,k=b.slice(d,d+h);e.c=k.map(function(a){return a.key});e.A=k.map(function(a){return a.value});d+=h;c-=h;0<c&&(h=rf(e.D),xf(e,h),e=h)}return f}function yf(a){var b=a[0],c=rf(b.D);c.hb=b.hb+1;c.h=a;for(b=0;b<a.length;++b)a[b].B=c,0<b&&c.c.push(a[b].c[0]);return c}
function nf(a){var b=a,c=[];do c.push(b),b=b.za;while(b);if(512>=c.length)b=yf(c);else{var d=c.length,e=0,b=rf(a.D);for(b.hb=a.hb+2;0<d;){a=768<=d?511:257<=d&&511>=d?d:257;var f=c.slice(e,e+a),h=yf(f);h.B=b;b.h.length&&(b.c.push(f[0].c[0]),xf(b.h[b.h.length-1],h));b.h.push(h);e+=a;d-=a}}return b}m.get=function(a){var b=zf(this,a);if(P(this)){var c=of;this.D.Oa(this.c[b],a)&&(c=c.concat(this.A[b]));return c}b=this.D.Oa(this.c[b],a)?b+1:b;return this.h[b].get(a)};
m.eb=function(a){var b=zf(this,a);return this.D.Oa(this.c[b],a)?!0:P(this)?!1:this.h[b].eb(a)};m.remove=function(a,b){Af(this,a,-1,b);if(null==this.B){var c=this;1==this.h.length&&(c=this.h[0],c.B=null);return c}return this};function Bf(a){return P(a)?a.c[0]:Bf(a.h[0])}function Cf(a){a.c=[];for(var b=1;b<a.h.length;++b)a.c.push(Bf(a.h[b]))}
function Af(a,b,c,d){var e=zf(a,b),f=P(a);if(!f){var h=a.D.Oa(a.c[e],b)?e+1:e;if(Af(a.h[h],b,h,d))Cf(a);else return!1}else if(!a.D.Oa(a.c[e],b))return!1;if(a.c.length>e&&a.D.Oa(a.c[e],b)){if(q(d)&&!a.D.Ha()&&f&&(h=a.A[e],d=df(h,d,void 0),0>d?d=!1:(h.splice(d,1),d=!0),d&&a.D.Na().remove(b,1),a.A[e].length))return!1;a.c.splice(e,1);f&&(f=a.D.Ha()?1:a.A[e].length,a.A.splice(e,1),a.D.Na().remove(b,f))}if(256>a.c.length&&null!=a.B){a:{b=null;if(a.za&&256<a.za.c.length)b=a.za,e=d=0,f=a.c.length+1;else if(a.yb&&
256<a.yb.c.length)b=a.yb,d=a.yb.c.length-1,e=P(a)?d:d+1,f=0;else{b=!1;break a}a.c.splice(f,0,b.c[d]);b.c.splice(d,1);d=P(a)?a.A:a.h;h=null;P(a)?h=b.A:(h=b.h,h[e].B=a);d.splice(f,0,h[e]);h.splice(e,1);P(b)||(Cf(b),Cf(a));b=!0}b||Df(a,c)}return!0}
function Df(a,b){var c,d,e;a.za&&511>a.za.c.length?(c=a.za,e=d=0):a.yb&&(c=a.yb,d=c.c.length,e=P(c)?c.A.length:c.h.length);d=[d,0].concat(a.c);Array.prototype.splice.apply(c.c,d);d=null;P(a)?d=a.A:(d=a.h,d.forEach(function(a){a.B=c}));d=[e,0].concat(d);Array.prototype.splice.apply(P(c)?c.A:c.h,d);xf(a.yb,a.za);P(c)||Cf(c);-1!=b&&(a.B.c.splice(b,1),a.B.h.splice(b,1))}
m.vb=function(a,b,c){var d=zf(this,a);if(P(this)){if(this.D.Oa(this.c[d],a)){if(c)this.D.Na().remove(a,this.D.Ha()?1:this.A[d].length),this.A[d]=this.D.Ha()?b:[b];else{if(this.D.Ha())throw new D(201);if(!ff(this.A[d],b))throw new D(109);}this.D.Na().add(a,1);return this}this.c.splice(d,0,a);this.A.splice(d,0,this.D.Ha()?b:[b]);this.D.Na().add(a,1);512==this.c.length?(d=rf(this.D),a=rf(this.D),a.hb=1,a.c=[this.c[256]],a.h=[this,d],a.B=this.B,this.B=a,d.c=this.c.splice(256),d.A=this.A.splice(256),d.B=
a,xf(d,this.za),xf(this,d),d=a):d=this;return d}d=this.D.Oa(this.c[d],a)?d+1:d;a=this.h[d].vb(a,b,c);P(a)||1!=a.c.length||(this.c.splice(d,0,a.c[0]),a.h[1].B=this,a.h[0].B=this,this.h.splice(d,1,a.h[1]),this.h.splice(d,0,a.h[0]));return 512==this.c.length?Ef(this):this};function Ef(a){var b=rf(a.D),c=rf(a.D);b.B=a.B;b.hb=a.hb+1;b.c=[a.c[256]];b.h=[a,c];a.c.splice(256,1);c.B=b;c.hb=a.hb;c.c=a.c.splice(256);c.h=a.h.splice(257);c.h.forEach(function(a){a.B=c});a.B=b;xf(c,a.za);xf(a,c);return b}
function zf(a,b){for(var c=0,d=a.c.length;c<d;){var e=c+d>>1;a.D.Sd(a.c[e],b)?c=e+1:d=e}return c}function qf(a,b){if(!P(a)){var c=zf(a,b);a.D.Oa(a.c[c],b)&&c++;return qf(a.h[c],b)}return a}
m.Xa=function(a,b,c){function d(a){return a[0]?a[1]?0:1:-1}var e=this.D.oc(),f=0,h=this.c.length-1,k=this.c,n=d(e.qb(k[f],a)),x=d(e.qb(k[h],a));if(1!=n&&(-1!=n||-1!=x)){var S=function(a,b){var c=a+b>>1;return c==a?c+1:c},oa=function(b,c,f){if(b>=c)return 0==f?c:-1;var h=d(e.qb(k[b],a));if(0==h)return b;if(1==h)return-1;h=S(b,c);if(h==c)return 0==f?c:-1;var n=d(e.qb(k[h],a));return 0==n?oa(b,h,n):-1==n?oa(h+1,c,f):oa(b+1,h,n)},Ya=function(b,c){if(b>=c)return b;var f=d(e.qb(k[c],a));if(0==f)return c;
if(-1==f)return b;f=S(b,c);if(f==c)return b;var h=d(e.qb(k[f],a));return 0==h?Ya(f,c):1==h?Ya(b,f-1):-1};0!=n&&(f=oa(f+1,h,x));-1!=f&&(h=Ya(f,h),-1!=h&&h>=f&&Ff(this,b,c,f,h+1))}};function Ff(a,b,c,d,e){for(;d<e&&(b.reverse||!(b.count>=b.W));++d)if(a.D.Ha())!b.reverse&&b.K?b.K--:c[b.count++]=a.A[d];else for(var f=0;f<a.A[d].length&&b.count<c.length;++f)!b.reverse&&b.K?b.K--:c[b.count++]=a.A[d][f]}
m.fill=function(a,b){if(P(this))for(var c=0;c<this.A.length&&0<a.count;++c)if(0<a.offset){if(a.offset-=this.D.Ha()?1:this.A[c].length,0>a.offset)for(var d=this.A[c].length+a.offset;d<this.A[c].length&&0<a.count;++d)b[a.je++]=this.A[c][d],a.count--}else if(this.D.Ha())b[a.je++]=this.A[c],a.count--;else for(d=0;d<this.A[c].length&&0<a.count;++d)b[a.je++]=this.A[c][d],a.count--;else for(c=0;c<this.h.length&&0<a.count;++c)this.h[c].fill(a,b)};
function uf(a,b){for(var c=b.Na(),d=a.map(function(a){var d=new vf(a.id(),b);d.c=a.o[0];d.A=a.o[1];d.c.forEach(function(a,e){c.add(a,b.Ha()?1:d.A[e].length)});return d}),e=0;e<d.length-1;++e)xf(d[e],d[e+1]);return 1<d.length?nf(d[0]):d[0]};function Gf(a){this.compare=0==a?Hf:If;this.Ud=0==a?function(a){return null!=a?a.reverse():null}:function(a){return a||null};this.$d=0==a?Jf:Kf}t(Gf,Ac);function If(a,b){return a>b?1:a<b?-1:0}function Hf(a,b){return If(b,a)}function Kf(a,b){return rd(a,b)}function Jf(a,b){return rd(b,a)}m=Gf.prototype;m.qb=function(a,b){var c=this.Ud(b),d=[c.b==E,c.w==E];if(!d[0]){var e=this.compare(a,c.b);d[0]=c.ea?1==e:-1!=e}d[1]||(e=this.compare(a,c.w),d[1]=c.ma?-1==e:1!=e);return d};
m.compare=function(a,b){return this.compare(a,b)};m.min=function(a,b){return a<b?1:a==b?0:-1};m.max=function(a,b){return a>b?1:a==b?0:-1};m.Nd=function(a,b){var c=this.qb(a,b);return c[0]&&c[1]};m.kf=function(a){return a.filter(function(a){return null!==a}).sort(function(a,c){return this.$d(a,c)}.bind(this))};m.Od=function(a){return this.Ud(a).b==E};m.od=function(a){a=this.Ud(a);return[a.b,a.w]};m.toString=function(){return this.compare==Hf?"SimpleComparator_DESC":"SimpleComparator_ASC"};function Lf(a){this.Ka=a.map(function(a){return new Gf(a)})}t(Lf,Ac);function Mf(a,b,c,d){for(var e=0,f=0;f<a.Ka.length&&0==e;++f)e=d(a.Ka[f],b[f],c[f]);return e}m=Lf.prototype;m.compare=function(a,b){return Mf(this,a,b,function(a,b,e){return b==E||e==E?0:a.compare(b,e)})};m.min=function(a,b){return Mf(this,a,b,function(a,b,e){return a.min(b,e)})};m.max=function(a,b){return Mf(this,a,b,function(a,b,e){return a.max(b,e)})};
m.qb=function(a,b){for(var c=[!0,!0],d=0;d<this.Ka.length&&(c[0]||c[1]);++d){var e=this.Ka[d].qb(a[d],b[d]);c[0]=c[0]&&e[0];c[1]=c[1]&&e[1]}return c};m.Nd=function(a,b){for(var c=!0,d=0;d<this.Ka.length&&c;++d)c=this.Ka[d].Nd(a[d],b[d]);return c};
m.kf=function(a){var b=a.filter(function(a){return a.every(fa)});a=Array(this.Ka.length);for(var c=0;c<a.length;c++)a[c]=b.map(function(a){return a[c]});a.forEach(function(a,b){a.sort(function(a,c){return this.Ka[b].$d(a,c)}.bind(this))},this);b=Array(b.length);for(c=0;c<b.length;c++)b[c]=a.map(function(a){return a[c]});return b.sort(function(a,b){for(var c=0,h=0;h<this.Ka.length&&0==c;++h)c=this.Ka[h].$d(a[h],b[h]);return c}.bind(this))};m.Od=function(a){return this.Ka[0].Od(a[0])};
m.od=function(a){var b=a.map(function(a,b){return this.Ka[b].od(a)[0]},this);a=a.map(function(a,b){return this.Ka[b].od(a)[1]},this);return[b,a]};function Nf(a){if(1==a.f.length)return new Gf(a.f[0].jb);a=a.f.map(function(a){return a.jb});return new Lf(a)};function Of(a){this.ga=a;this.ib=C();this.Mc=new hf;this.nb=new hf}m=Of.prototype;m.getName=function(){return this.ga.getName()};m.add=function(a,b){null===a?(this.ib.add(b),this.Mc.add(a,1)):this.ga.add(a,b)};m.set=function(a,b){null===a?(this.ib.clear(),this.Mc.clear(),this.add(a,b)):this.ga.set(a,b)};m.remove=function(a,b){null===a?b?(this.ib.delete(b),this.Mc.remove(a,1)):(this.ib.clear(),this.Mc.clear()):this.ga.remove(a,b)};m.get=function(a){return null===a?pc(this.ib):this.ga.get(a)};
m.Yc=function(a){return this.ga.Yc(a)};m.Na=function(){jf(this.nb,[this.ga.Na(),this.Mc]);return this.nb};m.Xa=function(a,b,c,d){b=this.ga.Xa(a,b,c,d);return null!=a?b:b.concat(pc(this.ib))};m.clear=function(){this.ib.clear();this.ga.clear()};m.eb=function(a){return null===a?0!=this.ib.size:this.ga.eb(a)};m.min=function(){return this.ga.min()};m.max=function(){return this.ga.max()};m.Ea=function(){return[new z(-2,pc(this.ib))].concat(this.ga.Ea())};m.oc=function(){return this.ga.oc()};
function Pf(a,b){for(var c=-1,d=0;d<b.length;++d)if(-2==b[d].id()){c=d;break}if(-1==c)throw new D(102);var d=b[c].o,e=b.slice(0);e.splice(c,1);var c=a(e),f=new Of(c);d.forEach(function(a){f.ib.add(a)});return f}m.Ha=function(){return this.ga.Ha()};function Qf(a){this.u=a;this.mb=C();this.U=new Gf(1)}m=Qf.prototype;m.getName=g("u");m.add=function(a){if("number"!=typeof a)throw new D(103);this.mb.add(a)};m.set=function(a,b){this.add(a,b)};m.remove=function(a){this.mb.delete(a)};m.get=function(a){return this.eb(a)?[a]:[]};m.min=function(){return this.Ec(this.U.min.bind(this.U))};m.max=function(){return this.Ec(this.U.max.bind(this.U))};
m.Ec=function(a){if(0==this.mb.size)return null;var b=pc(this.mb).reduce(function(b,d){return null===b||1==a(d,b)?d:b},null);return[b,[b]]};m.Yc=function(){return this.mb.size};m.Xa=function(a,b,c,d){var e=a||[pd()];a=pc(this.mb).filter(function(a){return e.some(function(b){return this.U.Nd(a,b)},this)},this);return gf(a,b,c,d)};m.clear=function(){this.mb.clear()};m.eb=function(a){return this.mb.has(a)};m.Ea=function(){return[new z(0,pc(this.mb))]};m.oc=g("U");
function Tf(a,b){var c=new Qf(a);b[0].o.forEach(function(a){c.add(a,a)});return c}m.Ha=l(!0);m.Na=function(){var a=new hf;a.oa=this.mb.size;return a};function Uf(a){this.g=a;this.Ja=a.j(ic);this.C=a.j(kc);this.S=a.j(jc)}Uf.prototype.Fa=function(a){var b=a.ra(),c=function(){if(0==b.length)return w();var a=b.shift();return(a.xb()?Vf(this,a):Wf(this,a)).then(c)}.bind(this);return c()};function Wf(a,b){var c=new ed(a.g,C([b])),c=a.Ja.zb(0,c),d=c.G(b.getName(),b.Ab.bind(b)).get([]).then(function(a){this.S.Tb(b.getName(),a);Xf(this,b,a)}.bind(a));c.da();return d}
function Xf(a,b,c){var d=a.C.ic.get(b.getName())||[];c.forEach(function(a){d.forEach(function(b){var c=a.Db(b.getName());b.add(c,a.id())})})}function Vf(a,b){var c=new ed(a.g,C([b])),d=a.Ja.zb(0,c),c=d.G(b.getName(),b.Ab).get([]).then(function(a){this.S.Tb(b.getName(),a)}.bind(a)),e=b.ya().map(function(a){return Yf(this,a,d)},a).concat(Zf(a,b,d));d.da();return eb(e.concat(c))}
function Yf(a,b,c){c=c.G(b.m(),rb,1);var d=Nf(b);return c.get([]).then(function(a){if(1<a.length){if($f(b)){var c=tf.bind(void 0,d,b.m(),b.Cc);a=Pf(c,a.slice(1))}else a=tf(d,b.m(),b.Cc,a.slice(1));this.C.set(b.Nc,a)}}.bind(a))}function Zf(a,b,c){return c.G(Me(b),rb,1).get([]).then(function(a){1<a.length&&(a=Tf(Me(b),a.slice(1)),this.C.set(b.getName(),a))}.bind(a))};function ag(){this.ba=A();this.ic=A()}ag.prototype.Fa=function(a){a.ra().forEach(function(a){var c=[];this.ic.set(a.getName(),c);var d=Me(a);if(null===this.get(d)){var e=new Qf(d);c.push(e);this.ba.set(d,e)}a.ya().forEach(function(a){var b;b=Nf(a);b=new kf(a.m(),b,a.Cc);b=$f(a)?new Of(b):b;c.push(b);this.ba.set(a.m(),b)},this)},this);return w()};ag.prototype.get=function(a){return this.ba.get(a)||null};
ag.prototype.set=function(a,b){var c=this.ic.get(a)||null;null===c&&(c=[],this.ic.set(a,c));for(var d=null,e=0;e<c.length;e++)if(c[e].getName()==b.getName()){d=e;break}null!==d&&0<c.length?c.splice(d,1,b):c.push(b);this.ba.set(b.getName(),b)};function bg(a){this.hc=[];q(a)&&this.add(a)}bg.prototype.toString=function(){return this.hc.map(function(a){return a.toString()}).join(",")};bg.prototype.eb=function(a){return this.hc.some(function(b){return b.contains(a)})};bg.prototype.Cb=g("hc");
bg.prototype.add=function(a){if(0!=a.length)if(a=this.hc.concat(a),1==a.length)this.hc=a;else{a.sort(rd);for(var b=[],c=a[0],d=1;d<a.length;++d)if(nd(c,a[d])){var e=a[d],f=pd();if(c.b!=E&&e.b!=E){var h=od(c.b,e.b,!0);1!=h?(f.b=c.b,f.ea=0!=h?c.ea:c.ea&&e.ea):(f.b=e.b,f.ea=e.ea)}c.w!=E&&e.w!=E&&(h=od(c.w,e.w,!1),-1!=h?(f.w=c.w,f.ma=0!=h?c.ma:c.ma&&e.ma):(f.w=e.w,f.ma=e.ma));c=f}else b.push(c),c=a[d];b.push(c);this.hc=b}};
function cg(a,b){var c=[];a.Cb().map(function(a){return b.Cb().map(function(b){var c;if(nd(a,b)){c=pd();var h=od(a.b,b.b,!0),h=0==h?a.ea?a:b:-1!=h?a:b;c.b=h.b;c.ea=h.ea;a.w==E||b.w==E?b=a.w==E?b:a:(h=od(a.w,b.w,!1),b=0==h?a.ma?a:b:-1==h?a:b);c.w=b.w;c.ma=b.ma}else c=null;return c})}).forEach(function(a){c=c.concat(a)});return new bg(c.filter(function(a){return null!==a}))};function dg(a,b){var c=[],d=null,e=null;Sd(a,function(a){var h=b(a);null==a.getParent()?e=h:L(d,h);var k=a.getParent();null!==k&&K(k).length==K(d).length&&(k=c.indexOf(d),-1!=k&&c.splice(k,1));1<K(a).length&&c.push(h);d=null===a.h?c[c.length-1]:h});return e}function eg(a){return fg(a,function(a){return null===a.h})}
function gg(a){var b=a.getParent(),c=0;null!==b&&(c=K(b).indexOf(a),b.removeChild(a));var d=K(a).slice();d.forEach(function(d,f){a.removeChild(d);null===b||Pd(b,d,c+f)});return{parent:b,children:d}}function hg(a,b){K(a).slice().forEach(function(c){a.removeChild(c);L(b,c)});L(a,b)}function ig(a){var b=Od(a,0);gg(a);hg(b,a);return b}
function jg(a,b,c){var d=Od(a,0),e=K(d).slice();if(!e.some(function(a){return b(a)}))return a;gg(a);e.forEach(function(e,h){if(b(e)){var k=c(a);Qd(d,h);L(k,e);Pd(d,k,h)}});return d}function kg(a,b,c,d){var e=a.getParent();null!==e&&(a=K(e).indexOf(a),Qd(e,a),Pd(e,c,a));K(b).slice().forEach(function(a){b.removeChild(a);L(d,a)});return c}function fg(a,b,c){function d(a){b(a)&&e.push(a);null!=c&&c(a)||K(a).forEach(d)}var e=[];d(a);return e}
function lg(a,b){var c=b||function(a){return a.toString()+"\n"},d="";Sd(a,function(a){for(var b=0;b<Nd(a);b++)d+="-";d+=c(a)});return d};function mg(a){Td.call(this);this.Pb=a;this.Ya=!1}t(mg,Td);m=mg.prototype;m.Ib=function(){return dg(this,function(a){if(a instanceof mg){var b=new mg(a.Pb);b.Ya=a.Ya;a=a.V();b.pa=a;return b}return a.Ib()})};m.fb=function(a){var b=a||[];Sd(this,function(a){a!=this&&a.fb(b)}.bind(this));a=C(b);return pc(a)};m.qd=function(a){this.Ya!=a&&(this.Ya=a,this.Pb="and"==this.Pb?"or":"and",K(this).forEach(function(b){return b.qd(a)}))};
m.eval=function(a){var b=K(this).map(function(b){return b.eval(a)});return ng(this,b)};function ng(a,b){return"and"==a.Pb?xd(b):yd(b)}m.toString=function(){return"combined_pred_"+this.Pb.toString()};function og(a,b,c){Td.call(this);this.ha=a;this.la=b;this.F=c;this.Vd=null;a=Fd.xc();this.sc=Ld(a,this.ha.H(),this.F);this.ag=a.Oe.get(this.ha.H())||null}t(og,Td);m=og.prototype;m.Ib=function(){var a=new og(this.ha,this.la,this.F),b=this.V();a.pa=b;return a};m.fb=function(a){return null!=a?(a.push(this.ha),a.push(this.la),a):[this.ha,this.la]};
m.reverse=function(){var a=this.F;switch(this.F){case "gt":a="lt";break;case "lt":a="gt";break;case "gte":a="lte";break;case "lte":a="gte"}return new og(this.la,this.ha,a)};m.eval=function(a){var b=a.entries.filter(function(a){var b=H(a,this.ha);a=H(a,this.la);return this.sc(b,a)},this);return new F(b,G(a))};m.toString=function(){return"join_pred("+this.ha.m()+" "+this.F+" "+this.la.m()+")"};
function pg(a,b,c){var d=null,e=null;-1!=G(b).indexOf(I(a.ha.G()))?(d=b,e=c):(d=c,e=b);if(d.entries.length>e.entries.length){a:{b=a.ha;a.ha=a.la;a.la=b;b=a.F;switch(a.F){case "gt":b="lt";break;case "lt":b="gt";break;case "gte":b="lte";break;case "lte":b="gte";break;default:break a}a.F=b;a.sc=Ld(Fd.xc(),a.ha.H(),a.F)}return[e,d]}return[d,e]}function qg(a){var b={};a.fb().forEach(function(a){b[a.getName()]=null});return b}
function rg(a,b,c){null===a.Vd&&(a.Vd=qg(a.la.G()));var d=new Ad(new z(-1,a.Vd),!1);return Dd(b,c,d,[I(a.la.G())])}
function sg(a,b,c,d){var e=[b,c];d||(e=pg(a,b,c));b=e[0];c=e[1];var e=b,f=c,h=a.ha,k=a.la;d&&(e=c,f=b,h=a.la,k=a.ha);var n=new Mc,x=[];e.entries.forEach(function(a){var b=String(H(a,h));n.set(b,a)});var S=G(e),oa=G(f);f.entries.forEach(function(a){var b=H(a,k),c=String(b);null!==b&&n.has(c)?n.get(c).forEach(function(b){b=Dd(a,oa,b,S);x.push(b)}):d&&x.push(rg(this,a,oa))}.bind(a));a=G(b).concat(G(c));return new F(x,a)}
function tg(a,b,c,d,e){function f(a,b){var c=new Ad(b,1<S.length),c=Dd(a,oa,c,S);x.push(c)}var h=d.Sf.G(),k=b,n=c;-1!=G(b).indexOf(I(h))&&(k=c,n=b);var x=[],S=G(n),oa=G(k);k.entries.forEach(function(a){var b=this.ag(H(a,d.gg)),b=d.index.get(b);0!=b.length&&(d.index.Ha()?f(a,e.get(b[0])):cf(e,b).forEach(f.bind(null,a)))},a);a=G(k).concat(G(n));return new F(x,a)};function ug(a,b,c){return null===b?new Vd(a,b,c):q(b.m)?new og(a,b,c):new Vd(a,b,c)};var vg={};r("lf.schema.DataStoreType",vg);vg.INDEXED_DB=0;vg.MEMORY=1;vg.LOCAL_STORAGE=2;vg.FIREBASE=3;vg.WEB_SQL=4;vg.OBSERVABLE_STORE=5;function wg(a,b,c,d){this.Nc=a;this.name=b;this.Cc=c;this.f=d}wg.prototype.m=function(){return this.Nc+"."+this.name};function $f(a){return a.f.some(function(a){return a.ca.Bc()})}function Q(a,b,c,d){this.u=a;this.ka=c;this.J=b;this.ld=d;this.ab=null}r("lf.schema.Table",Q);Q.prototype.getName=g("u");Q.prototype.getName=Q.prototype.getName;Q.prototype.Wa=g("ab");
function I(a){return a.ab||a.u}Q.prototype.mc=function(a){var b=new this.constructor(this.u);b.ab=a;b.sg=this.sg;return b};Q.prototype.as=Q.prototype.mc;Q.prototype.createRow=Q.prototype.rb;Q.prototype.deserializeRow=Q.prototype.Ab;Q.prototype.ya=g("ka");Q.prototype.getIndices=Q.prototype.ya;Q.prototype.fb=g("J");Q.prototype.getColumns=Q.prototype.fb;Q.prototype.getConstraint=Q.prototype.Bb;Q.prototype.xb=g("ld");Q.prototype.persistentIndex=Q.prototype.xb;function Me(a){return a.u+".#"};function R(a,b){this.child=a;this.Hb=b;this.ab=null}m=R.prototype;m.getName=function(){return this.Hb+"("+this.child.getName()+")"};m.m=function(){return this.Hb+"("+this.child.m()+")"};m.G=function(){return this.child.G()};m.toString=function(){return this.m()};m.H=function(){return this.child.H()};m.Wa=g("ab");m.ya=function(){return[]};m.xa=l(null);m.Bc=l(!1);m.mc=function(a){this.ab=a;return this};R.prototype.as=R.prototype.mc;
function xg(a){for(var b=[a];a instanceof R;)b.push(a.child),a=a.child;return b}function yg(a){this.ab=a||null;this.O=new Q("#UnknownTable",[],[],!1)}m=yg.prototype;m.getName=l("*");m.m=function(){return this.getName()};m.toString=function(){return this.m()};m.G=g("O");m.H=l(4);m.Wa=g("ab");m.ya=function(){return[]};m.xa=l(null);m.Bc=l(!1);r("lf.fn.avg",function(a){return new R(a,"AVG")});function zg(a){return new R(a||new yg,"COUNT")}r("lf.fn.count",zg);function Ag(a){return new R(a,"DISTINCT")}r("lf.fn.distinct",Ag);r("lf.fn.max",function(a){return new R(a,"MAX")});r("lf.fn.min",function(a){return new R(a,"MIN")});r("lf.fn.stddev",function(a){return new R(a,"STDDEV")});r("lf.fn.sum",function(a){return new R(a,"SUM")});r("lf.fn.geomean",function(a){return new R(a,"GEOMEAN")});function T(a,b){J.call(this);this.Kf=b}t(T,J);T.prototype.exec=function(a,b){switch(this.Kf){case 1:return Bg(this,a,b);case 0:return Cg(this,a,b);default:return Dg(this,a,b)}};T.prototype.toString=l("dummy_node");T.prototype.Oc=function(){return this.toString()};function Dg(a,b,c){return new v(function(a){a(this.fa(b,[],c))}.bind(a))}function Bg(a,b,c){return Od(a,0).exec(b,c).then(function(a){return this.fa(b,a,c)}.bind(a))}
function Cg(a,b,c){var d=K(a).map(function(a){return a.exec(b,c)});return eb(d).then(function(a){var d=[];a.forEach(function(a){for(var b=0;b<a.length;++b)d.push(a[b])});return this.fa(b,d,c)}.bind(a))};function Eg(a){T.call(this,0,1);this.te=a}t(Eg,T);Eg.prototype.toString=function(){return"aggregation("+this.te.map(function(a){return a.m()}).toString()+")"};Eg.prototype.fa=function(a,b){b.forEach(function(a){Fg(new Gg(a,this.te))},this);return b};function Gg(a,b){this.Ia=a;this.J=b}
function Fg(a){a.J.forEach(function(a){a=xg(a).reverse();for(var c=1;c<a.length;c++){var d=a[c],e=xg(d).slice(-1)[0],f=d.child instanceof R?ud(this.Ia,d.child):this.Ia;if(null!==f.Va&&f.Va.has(d.m()))break;f=Hg(d.Hb,f,e);e=this.Ia;null===e.Va&&(e.Va=A());e.Va.set(d.m(),f)}},a)}
function Hg(a,b,c){var d=null;switch(a){case "MIN":d=Ig(b,c,function(a,b){return b<a?b:a});break;case "MAX":d=Ig(b,c,function(a,b){return b>a?b:a});break;case "DISTINCT":d=Jg(b,c);break;case "COUNT":d=Kg(b,c);break;case "SUM":d=Lg(b,c);break;case "AVG":a=Kg(b,c);0<a&&(d=Lg(b,c)/a);break;case "GEOMEAN":d=Mg(b,c);break;default:d=Ng(b,c)}return d}function Ig(a,b,c){return a.entries.reduce(function(a,e){var f=H(e,b);return null===f?a:null===a?f:c(a,f)},null)}
function Kg(a,b){return b instanceof yg?a.entries.length:a.entries.reduce(function(a,d){return a+(ea(H(d,b))?0:1)},0)}function Lg(a,b){return Ig(a,b,function(a,b){return b+a})}function Ng(a,b){var c=[];a.entries.forEach(function(a){a=H(a,b);null===a||c.push(a)});return 0==c.length?null:Ab.apply(null,c)}function Mg(a,b){var c=0,d=a.entries.reduce(function(a,d){var h=H(d,b);if(0==h||null===h)return a;c++;return a+Math.log(h)},0);return 0==c?null:Math.pow(Math.E,d/c)}
function Jg(a,b){var c=A();a.entries.forEach(function(a){var e=H(a,b);c.set(e,a)});return new F(B(c),G(a))};function Og(a,b){this.Ca=a;this.aa=b}Og.prototype.gb=g("Ca");Og.prototype.$=g("aa");function Pg(){J.call(this)}t(Pg,J);function Qg(a,b){J.call(this);this.table=a;this.values=b}t(Qg,Pg);function Rg(a,b){Qg.call(this,a,b)}t(Rg,Qg);function Sg(a){J.call(this);this.table=a}t(Sg,Pg);Sg.prototype.toString=function(){return"delete("+this.table.getName()+")"};function Tg(a,b){J.call(this);this.table=a;this.ne=b}t(Tg,Pg);
Tg.prototype.toString=function(){var a=[];this.ne&&(a=this.ne.map(function(a){return a.N.getName()},this));return"update("+this.table.getName()+", ["+a.join(",")+"])"};function Ug(a){J.call(this);this.I=a}t(Ug,Pg);Ug.prototype.toString=function(){return"select("+this.I.toString()+")"};function Vg(a){J.call(this);this.table=a}t(Vg,Pg);Vg.prototype.toString=function(){var a="table_access("+this.table.getName();null===this.table.Wa()||(a+=" as "+this.table.Wa());return a+")"};
function Wg(){J.call(this)}t(Wg,Pg);Wg.prototype.toString=l("cross_product");function Xg(a,b){J.call(this);this.f=a;this.Lb=b}t(Xg,Pg);Xg.prototype.toString=function(){var a="project("+this.f.toString();if(null!==this.Lb)var b=this.Lb.map(function(a){return a.m()}).join(", "),a=a+(", groupBy("+b+")");return a+")"};function Yg(a){J.call(this);this.M=a}t(Yg,Pg);Yg.prototype.toString=function(){return"order_by("+de(this.M)+")"};function Zg(a){J.call(this);this.f=a}t(Zg,Pg);
Zg.prototype.toString=function(){return"aggregation("+this.f.toString()+")"};function $g(a){J.call(this);this.f=a}t($g,Pg);$g.prototype.toString=function(){return"group_by("+this.f.toString()+")"};function ah(a){J.call(this);this.W=a}t(ah,Pg);ah.prototype.toString=function(){return"limit("+this.W+")"};function bh(a){J.call(this);this.K=a}t(bh,Pg);bh.prototype.toString=function(){return"skip("+this.K+")"};function ch(a,b){J.call(this);this.I=a;this.Nb=b}t(ch,Pg);
ch.prototype.toString=function(){return"join(type: "+(this.Nb?"outer":"inner")+", "+this.I.toString()+")"};function dh(){};function eh(){}t(eh,dh);eh.prototype.lb=function(a){this.Z=a;this.Ta(this.Z);return this.Z};eh.prototype.Ta=function(a){if(a instanceof Ug){var b=fh(this,a.I),b=gh(this,b);kg(a,a,b[0],b[1]);a==this.Z&&(this.Z=b[0]);a=b[0]}K(a).forEach(function(a){this.Ta(a)},this)};function fh(a,b){if(0==K(b).length||"and"!=b.Pb)return[b];var c=K(b).slice().map(function(a){b.removeChild(a);return fh(this,a)},a);return Fa(c)}
function gh(a,b){var c=null,d=null;b.map(function(a,b){var h=new Ug(a);0==b?c=h:L(d,h);d=h},a);return[c,d]};function hh(){}t(hh,dh);hh.prototype.lb=function(a,b){if(3>b.b.length)return a;this.Z=a;this.Ta(this.Z);return this.Z};hh.prototype.Ta=function(a){if(a instanceof Wg)for(;2<K(a).length;){for(var b=new Wg,c=0;2>c;c++){var d=Qd(a,0);L(b,d)}Pd(a,b,0)}K(a).forEach(function(a){this.Ta(a)},this)};function ih(){T.call(this,0,0)}t(ih,T);ih.prototype.toString=l("cross_product");ih.prototype.fa=function(a,b){for(var c=b[0],d=b[1],e=[],f=G(c),h=G(d),k=0;k<c.entries.length;k++)for(var n=0;n<d.entries.length;n++){var x=Dd(c.entries[k],f,d.entries[n],h);e.push(x)}c=G(c).concat(G(d));return[new F(e,c)]};function jh(a,b){ge.call(this,a,b);this.Da=a.j(mc);this.Eb=a.j(nc)}t(jh,ge);jh.prototype.getPriority=l(2);jh.prototype.Yd=function(a){0==this.H()?kh(this,a):this.Lc()};function kh(a,b){a.nd.forEach(function(a,d){a instanceof ce&&je(this.Eb,a,b[d])},a)}jh.prototype.Lc=function(){var a=le(this.Eb,this.$());0!=a.length&&(a=new ie(this.global,a),me(this.Da,a))};function lh(a){Yd.call(this,a)}t(lh,Yd);lh.prototype.$=function(){var a=C();a.add(this.b);mh(this,this.b.getName(),a);return a};function mh(a,b,c){var d=nh(a.ca.info(),b,1);nh(a.ca.info(),b).forEach(c.add.bind(c));d.forEach(function(a){mh(this,a.getName(),c)},a)}lh.prototype.clone=function(){var a=new lh(this.ca);ae(a,this);a.b=this.b;return a};lh.prototype.bind=function(a){lh.Gb.bind.call(this,a);be(this,a);return this};function oh(a){Yd.call(this,a)}t(oh,Yd);oh.prototype.$=function(){var a=C();a.add(this.Ga);var b=this.ca.info();ph(this.Ga.getName(),b.We).forEach(a.add.bind(a));this.Yb&&nh(b,this.Ga.getName()).forEach(a.add.bind(a));return a};oh.prototype.clone=function(){var a=new oh(this.ca);ae(a,this);a.Ga=this.Ga;this.values&&(a.values=this.values instanceof Ed?this.values:this.values.slice());a.Yb=this.Yb;a.Zb=this.Zb;return a};
oh.prototype.bind=function(a){oh.Gb.bind.call(this,a);this.Zb&&(this.values=this.Zb instanceof Ed?a[this.Zb.xa()]:this.Zb.map(function(b){return b instanceof Ed?a[b.xa()]:b}));return this};function qh(a){Yd.call(this,a)}t(qh,Yd);qh.prototype.$=function(){var a=C();a.add(this.table);var b=this.set.map(function(a){return a.N.m()}),c=this.ca.info();rh(c,b).forEach(a.add.bind(a));sh(c,b).forEach(a.add.bind(a));return a};qh.prototype.clone=function(){var a=new qh(this.ca);ae(a,this);a.table=this.table;a.set=this.set?this.set.slice():this.set;return a};qh.prototype.bind=function(a){qh.Gb.bind.call(this,a);this.set.forEach(function(b){-1!=b.Tc&&(b.value=a[b.Tc])});be(this,a);return this};function th(a,b){if(null==b)return"NULL";switch(a){case 1:return b?1:0;case 3:case 4:return b;case 0:return"'"+tb(b)+"'";default:return"'"+b.toString()+"'"}}function uh(a,b){var c=a.Yb?"INSERT OR REPLACE":"INSERT",d=a.Ga.fb(),c=c+(" INTO "+a.Ga.getName()+"("),c=c+d.map(function(a){return a.getName()}).join(", "),c=c+") VALUES (";return a.values.map(function(a){var f=d.map(function(c){var d=a.o[c.getName()];return b?null!=d?"#":"NULL":th(c.H(),d)});return c+f.join(", ")+");"}).join("\n")}
function vh(a){switch(a){case "between":return"BETWEEN";case "eq":return"=";case "gte":return">=";case "gt":return">";case "in":return"IN";case "lte":return"<=";case "lt":return"<";case "match":return"LIKE";case "neq":return"<>";default:return"UNKNOWN"}}function wh(a,b,c,d){return a instanceof Ed?"?"+a.xa().toString():d?null!=a?"#":"NULL":"match"==b?"'"+a.toString()+"'":"in"==b?"("+a.map(function(a){return th(c,a)}).join(", ")+")":"between"==b?th(c,a[0])+" AND "+th(c,a[1]):th(c,a).toString()}
function xh(a,b){return K(a).map(function(a){return"("+yh(a,b)+")"}).join("and"==a.Pb?" AND ":" OR ")}function zh(a){return[a.ha.m(),vh(a.F),a.la.m()].join(" ")}function yh(a,b){if(a instanceof Vd){var c=a.N.m(),d=vh(a.F),e=wh(a.value,a.F,a.N.H(),b);return"="==d&&"NULL"==e?[c,"IS NULL"].join(" "):"<>"==d&&"NULL"==e?[c,"IS NOT NULL"].join(" "):[c,d,e].join(" ")}if(a instanceof mg)return xh(a,b);if(a instanceof og)return zh(a);throw new D(357,typeof a);}
function Ah(a,b){var c=yh(a,b);return c?" WHERE "+c:""}function Bh(a,b){var c="UPDATE "+a.table.getName()+" SET ",c=c+a.set.map(function(a){var b=a.N.m()+" = ";return-1!=a.Tc?b+"?"+a.Tc.toString():b+th(a.N.H(),a.value).toString()}).join(", ");a.s&&(c+=Ah(a.s,b));return c+";"}
function Ch(a,b){var c="*";a.f.length&&(c=a.f.map(function(a){return a.Wa()?a.m()+" AS "+a.Wa():a.m()}).join(", "));c="SELECT "+c+" FROM ";null!=a.wb&&0!=a.wb.size?c+=Dh(a,b):(c+=a.b.map(Eh).join(", "),a.s&&(c+=Ah(a.s,b)));if(a.M)var d=a.M.map(function(a){return a.N.m()+(0==a.jb?" DESC":" ASC")}).join(", "),c=c+(" ORDER BY "+d);a.ja&&(d=a.ja.map(function(a){return a.m()}).join(", "),c+=" GROUP BY "+d);a.W&&(c+=" LIMIT "+a.W.toString());a.K&&(c+=" SKIP "+a.K.toString());return c+";"}
function Eh(a){return I(a)!=a.getName()?a.getName()+" AS "+I(a):a.getName()}function Dh(a,b){for(var c=fg(a.s,function(a){return a instanceof og}),d=c.map(zh),e=Eh(a.b[0]),f=1;f<a.b.length;f++)var h=Eh(a.b[f]),e=a.wb.has(c[d.length-f].V())?e+(" LEFT OUTER JOIN "+h):e+(" INNER JOIN "+h),e=e+(" ON ("+d[d.length-f]+")");c=Od(a.s,0);c instanceof og||(e+=" WHERE "+yh(c,b));return e}
function Fh(a,b){var c=b||!1,d=a.a.clone();if(d instanceof oh)return uh(d,c);if(d instanceof lh){var e="DELETE FROM "+d.b.getName();d.s&&(e+=Ah(d.s,c));return e+";"}if(d instanceof qh)return Bh(d,c);if(d instanceof ce)return Ch(d,c);throw new D(358,typeof d);};function U(a,b){this.global=a;this.rg=a.j(lc);this.Da=a.j(mc);this.a=b}r("lf.query.BaseBuilder",U);U.prototype.exec=function(){try{this.bb()}catch(a){return bb(a)}return new v(function(a,b){var c=new jh(this.global,[this.zc()]);me(this.Da,c).then(function(b){a(sd(b[0]))},b)},this)};U.prototype.exec=U.prototype.exec;U.prototype.Mf=function(){var a=function(a){return a.Oc(this.a)+"\n"}.bind(this);return lg(Gh(this).gb(),a)};U.prototype.explain=U.prototype.Mf;
U.prototype.bind=function(a){this.a.bind(a);return this};U.prototype.bind=U.prototype.bind;U.prototype.zg=function(a){return Fh(this,a)};U.prototype.toSql=U.prototype.zg;U.prototype.bb=aa();function Gh(a){if(null==a.Xe){var b;b=a.rg;var c=a.a,d=b.dg.create(c);b=b.og.create(d,c);a.Xe=b}return a.Xe}U.prototype.zc=function(){return{context:this.a.clone(),ae:Gh(this)}};function Hh(a){U.call(this,a,new lh(a.j(oc)))}t(Hh,U);r("lf.query.DeleteBuilder",Hh);Hh.prototype.b=function(a){if(null!=this.a.b)throw new D(515);this.a.b=a;return this};Hh.prototype.from=Hh.prototype.b;Hh.prototype.s=function(a){this.xd();this.a.s=a;return this};Hh.prototype.where=Hh.prototype.s;Hh.prototype.xd=function(){if(null==this.a.b)throw new D(548);if(null!=this.a.s)throw new D(516);};Hh.prototype.bb=function(){Hh.Gb.bb.call(this);if(null==this.a.b)throw new D(517);};function Ih(a,b){U.call(this,a,new oh(a.j(oc)));this.a.Yb=b||!1}t(Ih,U);r("lf.query.InsertBuilder",Ih);Ih.prototype.bb=function(){Ih.Gb.bb.call(this);var a=this.a;if(null==a.Ga||null==a.values)throw new D(518);if(a.Yb&&null===a.Ga.Bb().bd())throw new D(519);};Ih.prototype.Ga=function(a){if(null!=this.a.Ga)throw new D(520);this.a.Ga=a;return this};Ih.prototype.into=Ih.prototype.Ga;
Ih.prototype.values=function(a){if(null!=this.a.values)throw new D(521);a instanceof Ed||a.some(function(a){return a instanceof Ed})?this.a.Zb=a:this.a.values=a;return this};Ih.prototype.values=Ih.prototype.values;function Jh(a){return Kh("and",Array.prototype.slice.call(arguments))}r("lf.op.and",Jh);r("lf.op.or",function(a){return Kh("or",Array.prototype.slice.call(arguments))});function Kh(a,b){var c=new mg(a);b.forEach(function(a){L(c,a)});return c}r("lf.op.not",function(a){a.qd(!0);return a});function V(a,b){U.call(this,a,new ce(a.j(oc)));this.Ee=this.sd=!1;this.a.f=b;Lh(this);Mh(this)}t(V,U);r("lf.query.SelectBuilder",V);V.prototype.bb=function(){V.Gb.bb.call(this);var a=this.a;if(null==a.b)throw new D(522);if(q(a.Ob)&&!q(a.W)||q(a.Vb)&&!q(a.K))throw new D(523);null!=this.a.ja?Nh(this):Oh(this)};function Lh(a){var b=a.a.f.filter(function(a){return a instanceof R&&"DISTINCT"==a.Hb},a);if(0!=b.length&&(1!=b.length||1!=a.a.f.length))throw new D(524);}
function Nh(a){var b=a.a.f.filter(function(a){return!(a instanceof R)}).map(function(a){return a.m()}),c=!1;if(0==a.a.ja.length||0==a.a.f.length)c=!0;else{var d=a.a.ja.map(function(a){return a.m()});(c=b.some(function(a){return-1==d.indexOf(a)}))||(c=a.a.ja.some(function(a){a=a.H();return 6==a||0==a}))}if(c)throw new D(525);}function Oh(a){var b=a.a.f.some(function(a){return a instanceof R},a);a=a.a.f.some(function(a){return!(a instanceof R)},a)||0==a.a.f.length;if(b&&a)throw new D(526);}
function Mh(a){a.a.f.forEach(function(a){if(a instanceof R&&!Ph(a.Hb,a.H()))throw new D(527,a.m());},a)}function Qh(a,b){if(null==a.a.b)throw new D(b);}V.prototype.b=function(a){if(this.Ee)throw new D(515);this.Ee=!0;null==this.a.b&&(this.a.b=[]);this.a.b.push.apply(this.a.b,Array.prototype.slice.call(arguments));return this};V.prototype.from=V.prototype.b;V.prototype.s=function(a){Qh(this,548);if(this.sd)throw new D(516);this.sd=!0;Rh(this,a);return this};V.prototype.where=V.prototype.s;
function Rh(a,b){if(null!=a.a.s){var c=Jh(b,a.a.s);a.a.s=c}else a.a.s=b}V.prototype.Wf=function(a,b){Qh(this,542);if(this.sd)throw new D(547);this.a.b.push(a);Rh(this,b);return this};V.prototype.innerJoin=V.prototype.Wf;V.prototype.bg=function(a,b){Qh(this,542);if(!(b instanceof og))throw new D(541);if(this.sd)throw new D(547);this.a.b.push(a);null==this.a.wb&&(this.a.wb=C());var c=b;I(a)!=I(b.la.G())&&(c=b.reverse());this.a.wb.add(c.V());Rh(this,c);return this};V.prototype.leftOuterJoin=V.prototype.bg;
V.prototype.W=function(a){if(null!=(this.a.W||this.a.Ob))throw new D(528);if(a instanceof Ed)this.a.Ob=a;else{if(0>a)throw new D(531);this.a.W=a}return this};V.prototype.limit=V.prototype.W;V.prototype.K=function(a){if(null!=(this.a.K||this.a.Vb))throw new D(529);if(a instanceof Ed)this.a.Vb=a;else{if(0>a)throw new D(531);this.a.K=a}return this};V.prototype.skip=V.prototype.K;V.prototype.M=function(a,b){Qh(this,549);null==this.a.M&&(this.a.M=[]);this.a.M.push({N:a,jb:null!=b?b:1});return this};
V.prototype.orderBy=V.prototype.M;V.prototype.ja=function(a){Qh(this,549);if(null!=this.a.ja)throw new D(530);null==this.a.ja&&(this.a.ja=[]);this.a.ja.push.apply(this.a.ja,Array.prototype.slice.call(arguments));return this};V.prototype.groupBy=V.prototype.ja;function Ph(a,b){switch(a){case "COUNT":case "DISTINCT":return!0;case "AVG":case "GEOMEAN":case "STDDEV":case "SUM":return 4==b||3==b;case "MAX":case "MIN":return 4==b||3==b||5==b||2==b}return!1}
V.prototype.clone=function(){var a=new V(this.global,this.a.f);a.a=this.a.clone();a.a.Xc=null;return a};V.prototype.clone=V.prototype.clone;function Sh(a,b){U.call(this,a,new qh(a.j(oc)));this.a.table=b}t(Sh,U);r("lf.query.UpdateBuilder",Sh);Sh.prototype.set=function(a,b){var c={Tc:b instanceof Ed?b.xa():-1,N:a,value:b};null!=this.a.set?this.a.set.push(c):this.a.set=[c];return this};Sh.prototype.set=Sh.prototype.set;Sh.prototype.s=function(a){this.xd();this.a.s=a;return this};Sh.prototype.where=Sh.prototype.s;Sh.prototype.xd=function(){if(null!=this.a.s)throw new D(516);};
Sh.prototype.bb=function(){Sh.Gb.bb.call(this);if(null==this.a.set)throw new D(532);if(this.a.set.some(function(a){return a.value instanceof Ed}))throw new D(501);};function Th(a){this.a=a;this.Ca=null}Th.prototype.ec=function(){null===this.Ca&&(this.Ca=this.$c());return this.Ca};function Uh(a){Th.call(this,a)}t(Uh,Th);Uh.prototype.$c=function(){return this.a.Yb?new Rg(this.a.Ga,this.a.values):new Qg(this.a.Ga,this.a.values)};function Vh(a){Th.call(this,a)}t(Vh,Th);Vh.prototype.$c=function(){var a=new Tg(this.a.table,this.a.set),b=null!=this.a.s?new Ug(this.a.s.Ib()):null,c=new Vg(this.a.table);null===b?L(a,c):(L(b,c),L(a,b));return a};function Wh(a,b,c){this.Ca=a;this.be=b;this.Sb=c}Wh.prototype.ec=function(){this.Sb.forEach(function(a){this.Ca=a.lb(this.Ca,this.be)},this);return this.Ca};function Xh(a,b){Th.call(this,a);this.Sb=b}t(Xh,Th);Xh.prototype.$c=function(){var a=new Sg(this.a.b),b=null!=this.a.s?new Ug(this.a.s.Ib()):null,c=new Vg(this.a.b);null===b?L(a,c):(L(b,c),L(a,b));return(new Wh(a,this.a,this.Sb)).ec()};function Yh(){}t(Yh,dh);Yh.prototype.lb=function(a,b){if(2>b.b.length)return a;this.Z=a;this.Ta(this.Z,b);return this.Z};Yh.prototype.Ta=function(a,b){if(a instanceof Ug&&a.I instanceof og){var c=a.I.V(),d=Od(a,0);d instanceof Wg&&(c=null!=b.wb&&b.wb.has(c),c=new ch(a.I,c),kg(a,d,c,c),a==this.Z&&(this.Z=c),a=c)}K(a).forEach(function(a){this.Ta(a,b)},this)};function Zh(){this.Sc=C()}t(Zh,dh);Zh.prototype.lb=function(a,b){this.Sc.clear();if(!q(b.s))return a;this.Z=a;this.Ta(this.Z);this.Sc.clear();return this.Z};Zh.prototype.Ta=function(a){if($h(a)){var b=a.I instanceof Vd?ai(this,a):bi(this,a);this.Sc.add(a);b==a&&(b=Od(a,0));null!==b&&(ea(b.getParent())&&(this.Z=b),$h(b)&&!this.Sc.has(b)&&this.Ta(b))}else K(a).forEach(function(a){this.Ta(a)},this)};
function ci(a,b,c){var d=b;if(Od(b,0)instanceof Ug)d=ig(b),ci(a,b,c);else if(di(b)){var e=[],d=jg(b,c,function(a){a=new Ug(a.I);e.push(a);return a});e.forEach(function(a){ci(this,a,c)},a)}return d}function ai(a,b){var c=C([I(b.I.N.G())]),d=function(a){return ei(this,a,c)}.bind(a);return ci(a,b,d)}function bi(a,b){var c=C([I(b.I.ha.G()),I(b.I.la.G())]),d=function(a){return ei(this,a,c)}.bind(a);return ci(a,b,d)}
function ei(a,b,c){var d=C();eg(b).forEach(function(a){d.add(I(a.table))},a);b instanceof Vg&&d.add(I(b.table));return qc(d,c)}function $h(a){return a instanceof Ug&&!(a.I instanceof mg)}function di(a){a=Od(a,0);return a instanceof Wg||a instanceof ch};function fi(a,b){Th.call(this,a);this.Sb=b;this.af=this.Se=this.jf=this.Ve=this.ue=this.He=this.hf=this.Be=this.lf=null}t(fi,Th);
fi.prototype.$c=function(){gi(this);2<=this.a.b.length&&(this.Be=new Wg);this.hf=null!=this.a.s?new Ug(this.a.s.Ib()):null;this.a.M&&(this.Ve=new Yg(this.a.M));null!=this.a.K&&0<this.a.K&&(this.jf=new bh(this.a.K));null!=this.a.W&&(this.Se=new ah(this.a.W));null!=this.a.ja&&(this.He=new $g(this.a.ja));hi(this);this.af=new Xg(this.a.f||[],this.a.ja||null);var a=ii(this);return(new Wh(a,this.a,this.Sb)).ec()};
function ii(a){for(var b=[a.Se,a.jf,a.af,a.Ve,a.ue,a.He,a.hf,a.Be],c=null,d=null,e=0;e<b.length;e++){var f=b[e];null!==f&&(null===d?d=f:L(b[c],f),c=e)}a.lf.forEach(function(a){L(b[c],a)});return d}function gi(a){a.lf=a.a.b.map(function(a){return new Vg(a)},a)}function hi(a){var b=a.a.f.filter(function(a){return a instanceof R});null!=a.a.M&&a.a.M.forEach(function(a){a.N instanceof R&&b.push(a.N)});0<b.length&&(a.ue=new Zg(b))};function ji(){this.he=[new eh,new hh,new Zh,new Yh];this.Ed=[new eh]}ji.prototype.create=function(a){var b=null;if(a instanceof oh)b=new Uh(a);else if(a instanceof lh)b=new Xh(a,this.Ed);else if(a instanceof ce)b=new fi(a,this.he);else if(a instanceof qh)b=new Vh(a);else throw new D(513);b=b.ec();return new Og(b,a.$())};function ki(a){T.call(this,0,1);this.O=a}t(ki,T);ki.prototype.toString=function(){return"delete("+this.O.getName()+")"};ki.prototype.fa=function(a,b){var c=b[0].entries.map(function(a){return a.sa});a.remove(this.O,c);return[wd()]};function li(a,b){T.call(this,0,-1);this.table=b;this.C=a.j(kc)}t(li,T);li.prototype.toString=function(){return"get_row_count("+this.table.getName()+")"};li.prototype.fa=function(){var a=this.C.get(Me(this.table)),b=new F([],[this.table.getName()]),c=zg(),a=a.Na().oa;null===b.Va&&(b.Va=A());b.Va.set(c.m(),a);return[b]};function mi(a,b){T.call(this,0,-1);this.S=a.j(jc);this.C=a.j(kc);this.table=b}t(mi,T);mi.prototype.toString=function(){var a="table_access("+this.table.getName();null===this.table.Wa()||(a+=" as "+this.table.Wa());return a+")"};mi.prototype.fa=function(){var a=this.C.get(Me(this.table)).Xa();return[zd(cf(this.S,a),[I(this.table)])]};function ni(a){this.g=a}t(ni,dh);ni.prototype.lb=function(a,b){this.Z=a;if(!this.yd(b))return a;var c=fg(a,function(a){return a instanceof mi})[0],d=new li(this.g,c.table);kg(c,c,d,d);return this.Z};ni.prototype.yd=function(a){return 1==a.f.length&&1==a.b.length&&null==a.s&&null==a.W&&null==a.K&&null==a.ja?(a=a.f[0],a instanceof R&&"COUNT"==a.Hb&&a.child instanceof yg):!1};function oi(a){T.call(this,0,1);this.Ge=a}t(oi,T);oi.prototype.toString=function(){return"groupBy("+this.Ge.map(function(a){return a.m()}).toString()+")"};oi.prototype.fa=function(a,b){return pi(this,b[0])};function pi(a,b){var c=new Mc,d=function(a){return this.Ge.map(function(b){return H(a,b)},this).join(",")}.bind(a);b.entries.forEach(function(a){c.set(d(a),a)},a);return c.keys().map(function(a){return new F(c.get(a),G(b))},a)};function qi(a,b,c){T.call(this,0,0);this.C=a.j(kc);this.S=a.j(jc);this.I=b;this.Nb=c;this.vd="eq"==this.I.F?0:2;this.Ie=null}t(qi,T);var ri=["hash","index_nested_loop","nested_loop"];qi.prototype.toString=function(){return"join(type: "+(this.Nb?"outer":"inner")+", impl: "+ri[this.vd]+", "+this.I.toString()+")"};
qi.prototype.fa=function(a,b){switch(this.vd){case 0:return[sg(this.I,b[0],b[1],this.Nb)];case 1:return[tg(this.I,b[0],b[1],this.Ie,this.S)];default:var c=this.I,d=b[0],e=b[1],f=this.Nb,h=[d,e];f||(h=pg(c,d,e));for(var d=h[0],e=h[1],h=[],k=G(d),n=G(e),x=d.entries.length,S=e.entries.length,oa=S+256-1>>8,Ya=0;Ya<oa;){for(var Tb=0;Tb<x;Tb++){var Rf=!1,Sf=H(d.entries[Tb],c.ha);if(null!==Sf)for(var ti=Math.min(Ya+1<<8,S),Oc=Ya<<8;Oc<ti;Oc++)if(c.sc(Sf,H(e.entries[Oc],c.la))){var Rf=!0,uj=Dd(d.entries[Tb],
k,e.entries[Oc],n);h.push(uj)}f&&!Rf&&h.push(rg(c,d.entries[Tb],k))}Ya++}c=G(d).concat(G(e));return[new F(h,c)]}};function si(a,b){a.vd=1;var c=a.C.get(b.xa().m());a.Ie={Sf:b,gg:b==a.I.ha?a.I.la:a.I.ha,index:c}};function ui(a){T.call(this,0,-1);this.bf=a}t(ui,T);ui.prototype.toString=function(){return"no_op_step("+G(this.bf[0]).join(",")+")"};ui.prototype.fa=g("bf");function vi(){}t(vi,dh);vi.prototype.lb=function(a,b){this.Z=a;if(!this.yd(b))return a;fg(a,function(a){return a instanceof qi}).forEach(this.qg,this);return this.Z};vi.prototype.yd=function(a){return 1<a.b.length};
vi.prototype.qg=function(a){if("eq"==a.I.F&&!a.Nb){var b=function(b){if(!(b instanceof mi))return null;b=I(b.table)==I(a.I.la.G())?a.I.la:a.I.ha;return ea(b.xa())?null:b},c=b(Od(a,0)),b=b(Od(a,1));if(null!==c||null!==b){b=null===b?c:b;si(a,b);var d=new F([],[I(b.G())]);Rd(a,new ui([d]),b==c?0:1)}}};function wi(a){a=a.map(function(a){return a.Cb()});a=Fb.apply(null,a);var b=[];Eb(a,function(a){b.push(a)});return b}function xi(a){this.Mb=a}xi.prototype.ad=function(){return 1==this.Mb.f.length?[pd()]:[this.Mb.f.map(function(){return pd()})]};function yi(a,b){this.Mb=a;this.Ba=b;this.Cd=this.Qe=null}
function zi(a,b){var c=A();a.Ba.keys().forEach(function(a){var e=this.Ba.get(a).map(function(a){return Zd(b,a)},this),f=new bg([pd()]);e.forEach(function(a){var b=null;"between"==a.F?b=new kd(a.value[0],a.value[1],!1,!1):"eq"==a.F?(b=a.value,b=new kd(b,b,!1,!1)):b="gte"==a.F?new kd(a.value,E,!1,!1):"gt"==a.F?new kd(a.value,E,!0,!1):"lte"==a.F?new kd(E,a.value,!1,!1):new kd(E,a.value,!1,!0);a=a.Ya?ld(b):[b];a=new bg(a);f=cg(f,a)});c.set(a,f)},a);return c}
yi.prototype.ad=function(a){if(this.Qe==a)return this.Cd;for(var b=zi(this,a),c=this.Mb.f.length-1;0<=c;c--){var d=this.Mb.f[c];if(null!==(b.get(d.ca.getName())||null))break;b.set(d.ca.getName(),new bg([pd()]))}this.Cd=1==this.Mb.f.length?B(b)[0].Cb():wi(Ai(this,b));this.Qe=a;return this.Cd};function Ai(a,b){var c=A(),d=0;a.Mb.f.forEach(function(a){c.set(a.ca.getName(),d);d++});return Yb(b).sort(function(a,b){return c.get(a)-c.get(b)}).map(function(a){return b.get(a)})};function Bi(a,b){this.mf=b;this.C=a.j(kc)}function Ci(a,b,c){c=c.filter(a.Xf,a);if(0==c.length)return null;a=Di(a,c);if(0==a.length)return null;if(1==a.length)return a[0];var d=Number.MAX_VALUE;return a.reduce(function(a,c){var h=Ei(c,b);return h<d?(d=h,c):a},null)}
function Di(a,b){return a.mf.ya().map(function(a){a=new Fi(this.C,a);Gi(a,b);return a},a).filter(function(a){if(null===a.Ba)a=!1;else{for(var b=!1,e=!0,f=0;f<a.ub.f.length;f++){var h=a.Ba.has(a.ub.f[f].ca.getName());if(b&&h){e=!1;break}h||(b=!0)}a=e}return a})}Bi.prototype.Xf=function(a){var b;if(b=a instanceof Vd)Wd(a),b=null!==a.value&&("between"==a.F||"eq"==a.F||"gt"==a.F||"gte"==a.F||"lt"==a.F||"lte"==a.F);return b?a.N.G()==this.mf:!1};
function Fi(a,b){this.C=a;this.ub=b;this.Tf=C(this.ub.f.map(function(a){return a.ca.getName()}));this.Rd=this.Ba=null}function Hi(a){null===a.Rd&&(a.Rd=new yi(a.ub,a.Ba));return a.Rd}function Gi(a,b){b.forEach(function(a){var b=a.fb()[0].getName();this.Tf.has(b)&&(null===this.Ba&&(this.Ba=new Mc),this.Ba.set(b,a.V()))},a)}function Ei(a,b){var c=Hi(a).ad(b),d=a.C.get(a.ub.m());return c.reduce(function(a,b){return a+d.Yc(b)},0)};function Ii(a,b,c,d){T.call(this,0,-1);this.C=a.j(kc);this.index=b;this.Pe=c;this.fe=d;this.Rc=this.Qc=!1}t(Ii,T);Ii.prototype.toString=function(){return"index_range_scan("+this.index.m()+", ?, "+(this.fe?"reverse":"natural")+(this.Qc?", limit:?":"")+(this.Rc?", skip:?":"")+")"};Ii.prototype.Oc=function(a){var b=this.toString(),c=this.Pe.ad(a),b=b.replace("?",c.toString());this.Qc&&(b=b.replace("?",a.W.toString()));this.Rc&&(b=b.replace("?",a.K.toString()));return b};
Ii.prototype.fa=function(a,b,c){a=this.Pe.ad(c);b=this.C.get(this.index.m());c=(1==a.length&&a[0]instanceof kd&&qd(a[0])?gf(b.get(a[0].b),!1,this.Qc?c.W:void 0,this.Rc?c.K:void 0):b.Xa(a,this.fe,this.Qc?c.W:void 0,this.Rc?c.K:void 0)).map(function(a){return new z(a,{})},this);return[zd(c,[this.index.Nc])]};function Ji(a){T.call(this,0,1);this.md=a}t(Ji,T);Ji.prototype.toString=l("select(?)");Ji.prototype.Oc=function(a){a=Zd(a,this.md);return this.toString().replace("?",a.toString())};Ji.prototype.fa=function(a,b,c){return[Zd(c,this.md).eval(b[0])]};function Ki(a,b){T.call(this,0,1);this.S=a.j(jc);this.O=b}t(Ki,T);Ki.prototype.toString=function(){return"table_access_by_row_id("+this.O.getName()+")"};Ki.prototype.fa=function(a,b){return[zd(cf(this.S,td(b[0])),[I(this.O)])]};function Li(a){this.g=a}t(Li,dh);Li.prototype.lb=function(a,b){this.Z=a;fg(a,function(a){return a instanceof mi}).forEach(function(a){var d=Mi(a);if(0!=d.length){var e=Ci(new Bi(this.g,a.table),b,d.map(function(a){return Zd(b,a.md)}));if(null!==e){var f=A();d.forEach(function(a){f.set(a.md,a)},this);this.Z=Ni(this,e,f,a)}}},this);return this.Z};function Mi(a){var b=[];for(a=a.getParent();a;)a instanceof Ji&&b.push(a),a=a.getParent();return b}
function Ni(a,b,c,d){(null===b.Ba?[]:b.Ba.values()).map(function(a){return c.get(a)}).forEach(gg);b=new Ii(a.g,b.ub,Hi(b),!1);a=new Ki(a.g,d.table);L(a,b);kg(d,d,a,b);return b.gb()};function Oi(a,b){T.call(this,0,-1);this.C=a.j(kc);this.O=b}t(Oi,T);Oi.prototype.toString=function(){return"insert("+this.O.getName()+")"};Oi.prototype.fa=function(a,b,c){Pi(this.O,c.values,this.C);a.vb(this.O,c.values);return[zd(c.values,[this.O.getName()])]};function Pi(a,b,c){a=a.Bb().bd();if(null===a?0:a.f[0].autoIncrement){var d=a.f[0].ca.getName();c=c.get(a.m()).max();var e=null===c?0:c[0];b.forEach(function(a){if(0==a.o[d]||null==a.o[d])e++,a.o[d]=e})}}
function Qi(a,b){T.call(this,0,-1);this.C=a.j(kc);this.O=b}t(Qi,T);Qi.prototype.toString=function(){return"insert_replace("+this.O.getName()+")"};Qi.prototype.fa=function(a,b,c){Pi(this.O,c.values,this.C);a.Md(this.O,c.values);return[zd(c.values,[this.O.getName()])]};function Ri(){T.call(this,0,1)}t(Ri,T);Ri.prototype.toString=l("limit(?)");Ri.prototype.Oc=function(a){return this.toString().replace("?",a.W.toString())};Ri.prototype.fa=function(a,b,c){b[0].entries.splice(c.W);return b};function Si(a){T.call(this,0,1);this.M=a}t(Si,T);m=Si.prototype;m.toString=function(){return"order_by("+de(this.M)+")"};m.fa=function(a,b){if(1==b.length){var c;c=b[0];for(var d=null,e=0;e<this.M.length;e++){var f=Ag(this.M[e].N);if(null!==c.Va&&c.Va.has(f.m())){d=f;break}}c=d;(null===c?b[0]:ud(b[0],c)).entries.sort(this.Jf.bind(this))}else b.sort(this.tg.bind(this));return b};
m.U=function(a,b){var c=null,d=null,e=null,f=-1;do f++,e=this.M[f].N,c=this.M[f].jb,d=a(e),e=b(e);while(d==e&&f+1<this.M.length);d=d<e?-1:d>e?1:0;return 1==c?d:-d};m.tg=function(a,b){return this.U(function(b){return b instanceof R?ud(a,b):H(a.entries[a.entries.length-1],b)},function(a){return a instanceof R?ud(b,a):H(b.entries[b.entries.length-1],a)})};m.Jf=function(a,b){return this.U(function(b){return H(a,b)},function(a){return H(b,a)})};function Ti(a,b){this.Ia=a;this.J=b}function Ui(a){return a.J.some(function(a){return a instanceof R},a)?Vi(a):Wi(a)}function Vi(a){if(1==a.J.length&&"DISTINCT"==a.J[0].Hb)return a=ud(a.Ia,a.J[0]).entries.map(function(a){var b=new Ad(new z(-1,{}),1<this.Ia.L.size);Cd(b,this.J[0],H(a,this.J[0].child));return b},a),new F(a,[]);var b=new Ad(new z(-1,{}),1<a.Ia.L.size);a.J.forEach(function(a){var d=a instanceof R?ud(this.Ia,a):H(this.Ia.entries[0],a);Cd(b,a,d)},a);return new F([b],G(a.Ia))}
function Wi(a){var b=Array(a.Ia.entries.length),c=1<a.Ia.L.size;a.Ia.entries.forEach(function(a,e){b[e]=new Ad(new z(a.sa.id(),{}),c);this.J.forEach(function(c){Cd(b[e],c,H(a,c))},this)},a);return new F(b,G(a.Ia))}function Xi(a,b){var c=a.map(function(a){return Ui(new Ti(a,b)).entries[0]});return new F(c,G(a[0]))};function Yi(a,b){T.call(this,0,1);this.f=a;this.Lb=b}t(Yi,T);Yi.prototype.toString=function(){var a="project("+this.f.toString();if(null!==this.Lb)var b=this.Lb.map(function(a){return a.m()}).join(", "),a=a+(", groupBy("+b+")");return a+")"};Yi.prototype.fa=function(a,b){var c;0==b.length?c=[wd()]:1==b.length?(c=b[0],c=[0==this.f.length?c:Ui(new Ti(c,this.f))]):c=[Xi(b,this.f)];return c};function Zi(a){return a.f.some(function(a){return a instanceof R})||null!==a.Lb};function $i(){T.call(this,0,1)}t($i,T);$i.prototype.toString=l("skip(?)");$i.prototype.Oc=function(a){return this.toString().replace("?",a.K.toString())};$i.prototype.fa=function(a,b,c){return[new F(b[0].entries.slice(c.K),G(b[0]))]};function aj(){}t(aj,dh);aj.prototype.lb=function(a,b){if(!q(b.W)&&!q(b.K))return a;var c=bj(a);if(null===c)return a;fg(a,function(a){return a instanceof Ri||a instanceof $i}).forEach(function(a){a instanceof Ri?c.Qc=!0:c.Rc=!0;gg(a)},this);return c.gb()};function bj(a){a=fg(a,function(a){return a instanceof Ii},function(a){return a instanceof Yi&&Zi(a)||a instanceof Si||1!=K(a).length||a instanceof Ji});return 0<a.length?a[0]:null};function cj(a){this.g=a}t(cj,dh);cj.prototype.lb=function(a,b){var c=dj(a,b);if(null===c)return a;var d;a:{var e=c;d=ej(Od(c,0));if(null!==d){var f;f=c.M;for(var h=null,k=d.table.ya(),n=0;n<k.length&&null===h;n++)h=fj(k[n],f);f=h;if(null===f){d=e;break a}e=new Ii(this.g,f.ub,new xi(f.ub),f.Me);f=new Ki(this.g,d.table);L(f,e);gg(c);e=kg(d,d,f,e)}d=e}if(d==c)a:if(d=c,e=gj(Od(c,0)),null!==e){f=fj(e.index,c.M);if(null===f)break a;e.fe=f.Me;d=gg(c).parent}return d.gb()};
function gj(a){a=fg(a,function(a){return a instanceof Ii},function(a){return 1!=K(a).length});return 0<a.length?a[0]:null}function ej(a){a=fg(a,function(a){return a instanceof mi},function(a){return 1!=K(a).length});return 0<a.length?a[0]:null}function dj(a,b){return q(b.M)?fg(a,function(a){return a instanceof Si})[0]:null}function fj(a,b){if(a.f.length!=b.length||!b.every(function(b,c){return b.N.getName()==a.f[c].ca.getName()}))return null;var c=hj(b,a);return c[0]||c[1]?{ub:a,Me:c[1]}:null}
function hj(a,b){var c=a.reduce(function(a,b){return a<<1|(0==b.jb?0:1)},0),d=b.f.reduce(function(a,b){return a<<1|(0==b.jb?0:1)},0),c=c^d;return[0==c,c==Math.pow(2,Math.max(a.length,b.f.length))-1]};function ij(a,b,c){this.Ca=a;this.be=b;this.Sb=c}ij.prototype.ec=function(){this.Sb.forEach(function(a){this.Ca=a.lb(this.Ca,this.be)},this);return this.Ca};function jj(a,b){T.call(this,0,1);this.O=a;this.Cg=b}t(jj,T);jj.prototype.toString=function(){return"update("+this.O.getName()+")"};jj.prototype.fa=function(a,b){var c=b[0].entries.map(function(a){var b=this.O.Ab(a.sa.Ea());this.Cg.forEach(function(a){b.o[a.N.getName()]=a.value},this);return b},this);a.update(this.O,c);return[wd()]};function kj(a){this.g=a;this.he=[new vi,new Li(this.g),new cj(this.g),new aj,new ni(this.g)];this.Ed=[new Li(this.g)]}kj.prototype.create=function(a,b){var c=a.gb();if(c instanceof Rg||c instanceof Qg)return lj(this,a,b);if(c instanceof Xg||c instanceof ah||c instanceof bh)return lj(this,a,b,this.he);if(c instanceof Sg||c instanceof Tg)return lj(this,a,b,this.Ed);throw new D(8);};function lj(a,b,c,d){a=dg(b.gb(),a.fg.bind(a));null!=d&&(a=(new ij(a,c,d)).ec());return new ee(a,b.$())}
kj.prototype.fg=function(a){if(a instanceof Xg)return new Yi(a.f,a.Lb);if(a instanceof $g)return new oi(a.f);if(a instanceof Zg)return new Eg(a.f);if(a instanceof Yg)return new Si(a.M);if(a instanceof bh)return new $i;if(a instanceof ah)return new Ri;if(a instanceof Ug)return new Ji(a.I.V());if(a instanceof Wg)return new ih;if(a instanceof ch)return new qi(this.g,a.I,a.Nb);if(a instanceof Vg)return new mi(this.g,a.table);if(a instanceof Sg)return new ki(a.table);if(a instanceof Tg)return new jj(a.table,
a.ne);if(a instanceof Rg)return new Qi(this.g,a.table);if(a instanceof Qg)return new Oi(this.g,a.table);throw new D(514);};function mj(a){this.dg=new ji;this.og=new kj(a)};function nj(){this.Te=A()}function oj(a,b){var c=a.Te.get(b.getName())||null;null===c&&(c=new pj,a.Te.set(b.getName(),c));return c}function qj(a,b,c,d){c.forEach(function(a){a=oj(this,a);0==d?(a.Za=null,a.tc=b):3==d?(null===a.Ub&&(a.Ub=C()),a.Ub.add(b),null===a.Qa&&(a.Qa=C()),a.Qa.delete(b)):1==d?(null===a.Qa&&(a.Qa=C()),a.Qa.add(b)):2==d&&(a.Za=b)},a)}
function rj(a,b,c,d){var e=!0;c.forEach(function(a){if(e){a=oj(this,a);var c=null===a.Qa||0==a.Qa.size;e=0==d?(null===a.Ub||0==a.Ub.size)&&c&&null===a.tc&&null!==a.Za&&a.Za==b:3==d?null===a.tc&&null===a.Za&&null!==a.Qa&&a.Qa.has(b):1==d?null===a.Za:c&&(null===a.Za||a.Za==b)}},a);return e}function sj(a,b,c,d){var e=rj(a,b,c,d);e&&qj(a,b,c,d);return e}nj.prototype.releaseLock=function(a,b){b.forEach(function(b){oj(this,b).releaseLock(a)},this)};
function tj(a,b){b.forEach(function(a){oj(this,a).Za=null},a)}function pj(){this.Ub=this.Qa=this.Za=this.tc=null}pj.prototype.releaseLock=function(a){this.tc==a&&(this.tc=null);this.Za==a&&(this.Za=null);null===this.Qa||this.Qa.delete(a);null===this.Ub||this.Ub.delete(a)};function vj(){this.Rb=new wj;this.Dc=new nj}function me(a,b){(2>b.getPriority()||2>b.getPriority())&&tj(a.Dc,b.$());a.Rb.vb(b);xj(a);return b.Kb().ia}function xj(a){for(var b=a.Rb.Cb(),c=0;c<b.length;c++){var d=b[c],e=!1;if(e=0==d.H()?yj(a,d,1,3):yj(a,d,2,0))a.Rb.remove(d),e=a,d.exec().then(e.lg.bind(e,d),e.kg.bind(e,d))}}function yj(a,b,c,d){var e=!1;sj(a.Dc,b.V(),b.$(),c)&&(e=sj(a.Dc,b.V(),b.$(),d));return e}vj.prototype.lg=function(a,b){this.Dc.releaseLock(a.V(),a.$());a.Kb().resolve(b);xj(this)};
vj.prototype.kg=function(a,b){this.Dc.releaseLock(a.V(),a.$());a.Kb().reject(b);xj(this)};function wj(){this.Rb=[]}wj.prototype.vb=function(a){ff(this.Rb,a,function(a,c){var d=a.getPriority()-c.getPriority();return 0==d?a.V()-c.V():d})};wj.prototype.Cb=function(){return this.Rb.slice()};wj.prototype.remove=function(a){var b=this.Rb;a=ya(b,a);var c;(c=0<=a)&&xa.splice.call(b,a,1);return c};function zj(a,b){this.Fd=Fd.xc();this.ce=a;this.hd=b;this.J=Aj(this)}function Aj(a){if(0<a.ce.f.length)return a.ce.f;var b=[];a.ce.b.forEach(function(a){a.fb().forEach(function(a){b.push(a)})});return b}zj.prototype.U=function(a,b){return this.J.every(function(c){return Ld(this.Fd,c.H(),"eq")(H(a,c),H(b,c))},this)};
function Bj(a,b,c){var d=null===b?[]:b.entries,e=wb(d,c.entries,a.U.bind(a),function(a){return d[a]});b=[];for(var f=0,h=0;h<d.length;h++){var k=d[h];e[f]==k?f++:(k=a.hd.splice(f,1),k=Cj(h,k,0,a.hd),b.push(k))}e=wb(d,c.entries,a.U.bind(a),function(a,b){return c.entries[b]});for(h=f=0;h<c.entries.length;h++)k=c.entries[h],e[f]==k?f++:(a.hd.splice(h,0,k.sa.o),k=Cj(h,[],1,a.hd),b.push(k));return b}function Cj(a,b,c,d){return{Eg:c,index:a,object:d,Hg:b,type:"splice"}};function Dj(){this.cc=A()}Dj.prototype.ud=function(a,b){var c=ja(a.a).toString(),d=this.cc.get(c)||null;null===d&&(d=new Ej(a),this.cc.set(c,d));d.ud(b)};Dj.prototype.de=function(a,b){var c=ja(a.a).toString(),d=this.cc.get(c)||null;d.de(b);0<d.Hc.size||this.cc.delete(c)};function le(a,b){var c=C();b.forEach(function(a){c.add(a.getName())});var d=[];a.cc.forEach(function(a){a=a.zc();a.context.b.some(function(a){return c.has(a.getName())})&&d.push(a)});return d}
function je(a,b,c){b=ja(null!=b.Xc?b.Xc:b).toString();a=a.cc.get(b)||null;null!==a&&Fj(a,c)}function Ej(a){this.zf=a;this.Hc=C();this.ig=[];this.Re=null;this.Hf=new zj(a.a,this.ig)}Ej.prototype.ud=function(a){this.Hc.has(a)||this.Hc.add(a)};Ej.prototype.de=function(a){return this.Hc.delete(a)};Ej.prototype.zc=function(){var a=this.zf;return{context:a.a,ae:Gh(a)}};function Fj(a,b){var c=Bj(a.Hf,a.Re,b);a.Re=b;0<c.length&&a.Hc.forEach(function(a){a(c)})};function Gj(a,b){var c=a.j(oc),d=b||{},e=new bf(c);a.kb(jc,e);var e=null,f=!1;null!=d.storeType?e=d.storeType:(q(Xb)||(Xb=new Wb),e=Xb,e=e.Uf?0:e.Dg?4:1);switch(e){case 0:e=new Je(a,c);break;case 1:e=new Oe(c);break;case 5:e=new Qe(c);break;case 4:e=new Ye(a,c,d.webSqlDbSize);break;case 3:e=new ye(c,d.firebase);f=!0;break;default:throw new D(300);}a.kb(ic,e);var h=new ag;a.kb(kc,h);return e.Fa(d.onUpgrade).then(function(){var b=new mj(a);a.kb(lc,b);b=new vj;a.kb(mc,b);b=new Dj;a.kb(nc,b);return h.Fa(c)}).then(function(){if(f){var b=
new ne(a);b.Ja.subscribe(b.Wd.bind(b))}return(new Uf(a)).Fa(c)})};function Hj(a){this.g=a;this.i=a.j(oc);this.aa=C(this.i.ra());this.$a=y()}m=Hj.prototype;m.exec=function(){var a=this.g.j(kc),b=this.g.j(jc),c={};this.i.ra().forEach(function(d){var f=a.get(Me(d)).Xa(),f=cf(b,f).map(function(a){return a.o});c[d.getName()]=f});var d={name:this.i.name(),version:this.i.version(),tables:c},d=new Ad(new z(-1,d),!0);return w([new F([d],[])])};m.H=l(0);m.$=g("aa");m.Kb=g("$a");m.V=function(){return ja(this)};m.getPriority=l(0);function Ij(a,b){this.g=a;this.i=a.j(oc);this.aa=C(this.i.ra());this.$a=y();this.va=b;this.Ja=a.j(ic);this.S=a.j(jc);this.C=a.j(kc)}m=Ij.prototype;
m.exec=function(){if(!(this.Ja instanceof Je||this.Ja instanceof Oe||this.Ja instanceof Ye))throw new D(300);var a;a:{a=this.i.ra();for(var b=0;b<a.length;++b)if(0<this.C.get(Me(a[b])).Na().oa){a=!1;break a}a=!0}if(!a)throw new D(110);if(this.i.name()!=this.va.name||this.i.version()!=this.va.version)throw new D(111);if(null==this.va.tables)throw new D(112);return Jj(this)};m.H=l(1);m.$=g("aa");m.Kb=g("$a");m.V=function(){return ja(this)};m.getPriority=l(0);
function Jj(a){var b=new ed(a.g,a.aa),b=a.Ja.zb(a.H(),b),c;for(c in a.va.tables){var d=a.i.table(c),e=a.va.tables[c].map(function(a){return d.rb(a)}),f=b.G(c,d.Ab);a.S.Tb(c,e);var h=a.C.ic.get(c)||[];e.forEach(function(a){h.forEach(function(b){var c=a.Db(b.getName());b.add(c,a.id())})});f.put(e)}return b.da()};function Kj(a,b){this.g=a;this.Ja=a.j(ic);this.Da=a.j(mc);this.Eb=a.j(nc);this.aa=C(b);this.La=new ed(this.g,this.aa);this.$a=y();this.uc=y();this.qe=y()}m=Kj.prototype;m.exec=function(){this.qe.resolve();return this.uc.ia};m.H=l(1);m.$=g("aa");m.Kb=g("$a");m.V=function(){return ja(this)};m.getPriority=l(2);function Lj(a){me(a.Da,a);return a.qe.ia}
function Mj(a,b){var c=b.zc();return c.ae.gb().exec(a.La,c.context).then(function(a){return sd(a[0])},function(a){this.La.Fb();var b=new jb(a.name);this.uc.reject(b);throw a;}.bind(a))}m.da=function(){this.Ja.zb(this.H(),this.La).da().then(function(){this.Lc();this.uc.resolve()}.bind(this),function(a){this.La.Fb();this.uc.reject(a)}.bind(this));return this.$a.ia};m.Fb=function(){this.La.Fb();this.uc.resolve();return this.$a.ia};
m.Lc=function(){var a=le(this.Eb,this.aa);0!=a.length&&(a=new ie(this.g,a),me(this.Da,a))};function Nj(a){this.g=a;this.Da=a.j(mc);this.Pc=null;this.Ra=0;0==Oj.size&&(Oj.set(0,C([1,4])),Oj.set(1,C([2])),Oj.set(2,C([3,5,6])),Oj.set(3,C([2,7])),Oj.set(4,C([7])),Oj.set(5,C([7])),Oj.set(6,C([7])))}r("lf.proc.Transaction",Nj);var Oj=A();function Pj(a,b){var c=Oj.get(a.Ra)||null;if(null===c||!c.has(b))throw new D(107,a.Ra,b);a.Ra=b}
Nj.prototype.exec=function(a){Pj(this,4);var b=[];try{a.forEach(function(a){a.bb();b.push(a.zc())},this)}catch(c){return Pj(this,7),bb(c)}a=new jh(this.g,b);return me(this.Da,a).then(function(a){Pj(this,7);return a.map(function(a){return sd(a)})}.bind(this),function(a){Pj(this,7);throw a;}.bind(this))};Nj.prototype.exec=Nj.prototype.exec;Nj.prototype.xf=function(a){Pj(this,1);this.Pc=new Kj(this.g,a);return Lj(this.Pc).then(function(){Pj(this,2)}.bind(this))};Nj.prototype.begin=Nj.prototype.xf;
Nj.prototype.wf=function(a){Pj(this,3);return Mj(this.Pc,a).then(function(a){Pj(this,2);return a}.bind(this),function(a){Pj(this,7);throw a;}.bind(this))};Nj.prototype.attach=Nj.prototype.wf;Nj.prototype.da=function(){Pj(this,5);return this.Pc.da().then(function(){Pj(this,7)}.bind(this))};Nj.prototype.commit=Nj.prototype.da;Nj.prototype.Fb=function(){Pj(this,6);return this.Pc.Fb().then(function(){Pj(this,7)}.bind(this))};Nj.prototype.rollback=Nj.prototype.Fb;function W(a){this.g=a;this.i=a.j(oc);this.Ld=!1}r("lf.proc.Database",W);W.prototype.Fa=function(a){this.g.kb(oc,this.i);return Gj(this.g,a).then(function(){this.Ld=!0;this.Da=this.g.j(mc);return this}.bind(this))};W.prototype.init=W.prototype.Fa;W.prototype.tb=g("i");W.prototype.getSchema=W.prototype.tb;function Qj(a){if(!a.Ld)throw new D(2);}W.prototype.select=function(a){Qj(this);return new V(this.g,1!=arguments.length||null!=arguments[0]?Array.prototype.slice.call(arguments):[])};
W.prototype.select=W.prototype.select;W.prototype.vb=function(){Qj(this);return new Ih(this.g)};W.prototype.insert=W.prototype.vb;W.prototype.Md=function(){Qj(this);return new Ih(this.g,!0)};W.prototype.insertOrReplace=W.prototype.Md;W.prototype.update=function(a){Qj(this);return new Sh(this.g,a)};W.prototype.update=W.prototype.update;W.prototype.delete=function(){Qj(this);return new Hh(this.g)};W.prototype["delete"]=W.prototype.delete;
W.prototype.observe=function(a,b){Qj(this);this.g.j(nc).ud(a,b)};W.prototype.observe=W.prototype.observe;W.prototype.unobserve=function(a,b){Qj(this);this.g.j(nc).de(a,b)};W.prototype.unobserve=W.prototype.unobserve;W.prototype.Ff=function(){Qj(this);return new Nj(this.g)};W.prototype.createTransaction=W.prototype.Ff;W.prototype.close=function(){try{this.g.j(ic).close()}catch(a){}this.g.clear();this.Ld=!1};W.prototype.close=W.prototype.close;
W.prototype.Nf=function(){Qj(this);var a=new Hj(this.g);return me(this.Da,a).then(function(a){return sd(a[0])[0]})};W.prototype["export"]=W.prototype.Nf;W.prototype.import=function(a){Qj(this);a=new Ij(this.g,a);return me(this.Da,a).then(l(null))};W.prototype["import"]=W.prototype.import;function X(a,b,c,d,e,f){this.O=a;this.u=b;this.Ne=c;this.Le=d;this.qf=e;this.ab=f||null}r("lf.schema.BaseColumn",X);m=X.prototype;m.getName=g("u");m.m=function(){return I(this.O)+"."+this.u};m.toString=function(){return this.m()};m.G=g("O");m.H=g("qf");X.prototype.getType=X.prototype.H;X.prototype.Wa=g("ab");X.prototype.ya=function(){null==this.ka&&(this.ka=[],this.G().ya().forEach(function(a){-1!=a.f.map(function(a){return a.ca.getName()}).indexOf(this.u)&&this.ka.push(a)},this));return this.ka};
X.prototype.xa=function(){if(!q(this.ga)){var a=this.ya().filter(function(a){return 1!=a.f.length?!1:a.f[0].ca.getName()==this.getName()},this);this.ga=0<a.length?a[0]:null}return this.ga};X.prototype.Bc=g("Le");X.prototype.isNullable=X.prototype.Bc;X.prototype.Cc=g("Ne");X.prototype.Oa=function(a){return ug(this,a,"eq")};X.prototype.eq=X.prototype.Oa;X.prototype.Ue=function(a){return ug(this,a,"neq")};X.prototype.neq=X.prototype.Ue;X.prototype.Sd=function(a){return ug(this,a,"lt")};
X.prototype.lt=X.prototype.Sd;X.prototype.eg=function(a){return ug(this,a,"lte")};X.prototype.lte=X.prototype.eg;X.prototype.Pf=function(a){return ug(this,a,"gt")};X.prototype.gt=X.prototype.Pf;X.prototype.Qf=function(a){return ug(this,a,"gte")};X.prototype.gte=X.prototype.Qf;X.prototype.match=function(a){return ug(this,a,"match")};X.prototype.match=X.prototype.match;X.prototype.yf=function(a,b){return ug(this,[a,b],"between")};X.prototype.between=X.prototype.yf;
X.prototype.Rf=function(a){return ug(this,a,"in")};X.prototype["in"]=X.prototype.Rf;X.prototype.$f=function(){return this.Oa(null)};X.prototype.isNull=X.prototype.$f;X.prototype.Zf=function(){return this.Ue(null)};X.prototype.isNotNull=X.prototype.Zf;X.prototype.mc=function(a){return new X(this.O,this.u,this.Ne,this.Le,this.qf,a)};X.prototype.as=X.prototype.mc;function Rj(){this.pd=A()}var Sj;Rj.prototype.clear=function(){this.pd.clear()};Rj.prototype.clear=Rj.prototype.clear;Rj.prototype.kb=function(a,b){this.pd.set(a.toString(),b);return b};Rj.prototype.registerService=Rj.prototype.kb;Rj.prototype.j=function(a){var b=this.pd.get(a.toString())||null;if(null===b)throw new D(7,a.toString());return b};Rj.prototype.getService=Rj.prototype.j;Rj.prototype.Qd=function(a){return this.pd.has(a.toString())};Rj.prototype.isRegistered=Rj.prototype.Qd;function Tj(a){this.i=a;this.zd=new Mc;this.ee=new Mc;this.We=new Mc;this.ze=A();this.h=new Mc;this.ve=new Mc;this.cf=new Mc;this.ye=new Mc;Uj(this)}function Uj(a){a.i.ra().forEach(function(a){var c=a.getName();a.Bb().Jd().forEach(function(d){this.We.set(c,this.i.table(d.Pa));this.h.set(d.Pa,a);0==d.action?(this.ee.set(d.Pa,d),this.cf.set(d.Pa,a)):(this.zd.set(d.Pa,d),this.ve.set(d.Pa,a));this.ze.set(a.getName()+"."+d.cb,d.Pa);this.ye.set(d.Pa+"."+d.gc,a.getName())},this)},a)}
function Vc(a,b,c){if(null!=c)return 1==c?a.zd.get(b):a.ee.get(b);c=a.zd.get(b);a=a.ee.get(b);return null===c&&null===a?null:(c||[]).concat(a||[])}function ph(a,b){var c=b.get(a);return null===c?[]:c}function rh(a,b){var c=C();b.forEach(function(a){(a=this.ze.get(a))&&c.add(a)},a);return pc(c).map(function(a){return this.i.table(a)},a)}function nh(a,b,c){return null!=c?0==c?ph(b,a.cf):ph(b,a.ve):ph(b,a.h)}
function sh(a,b){var c=C();b.forEach(function(a){(a=this.ye.get(a))&&a.forEach(function(a){c.add(a)})},a);return pc(c).map(function(a){return this.i.table(a)},a)};function Vj(a,b,c){this.pg=a;this.hg=b;this.Of=c}r("lf.schema.Constraint",Vj);Vj.prototype.bd=g("pg");Vj.prototype.getPrimaryKey=Vj.prototype.bd;Vj.prototype.Jd=g("Of");Vj.prototype.getForeignKeys=Vj.prototype.Jd;function Wj(a,b,c){var d=a.ref.split(".");if(2!=d.length)throw new D(540,c);this.xe=b;this.cb=a.local;this.Pa=d[0];this.gc=d[1];this.name=b+"."+c;this.action=a.action;this.timing=a.timing};function Y(a){Xj(a);this.Fd=Fd.xc();this.u=a;this.J=A();this.rd=C();this.jc=C();this.Gc=C();this.Aa=null;this.ka=A();this.ld=!1;this.sb=[]}r("lf.schema.TableBuilder",Y);function Yj(a){this.name=a.name;this.jb=a.order;this.autoIncrement=a.autoIncrement}var Zj=C([0,6]);function Xj(a){if(!/^[A-Za-z_][A-Za-z0-9_]*$/.test(a))throw new D(502,a);}function ak(a,b){if(b==a.u)throw new D(546,b);if(a.J.has(b)||a.ka.has(b)||a.jc.has(b))throw new D(503,a.u+"."+b);}
function bk(a,b){var c=!1;b.forEach(function(a){var b=this.J.get(a.name);c=c||a.autoIncrement;if(a.autoIncrement&&3!=b)throw new D(504);},a);if(c&&1<b.length)throw new D(505);}function ck(a){if(null!==a.Aa){var b=a.ka.get(a.Aa).map(function(a){return a.name}),c=0;if(a.sb.some(function(a,e){c=e;return-1!=b.indexOf(a.cb)},a))throw new D(543,a.sb[c].name);}}
function dk(a){if(null!==a.Aa){var b=function(a){return a.name},c=JSON.stringify(a.ka.get(a.Aa).map(b));a.ka.forEach(function(a,e){if(e!=this.Aa){var f=a.map(b);if(JSON.stringify(f)==c)throw new D(544,this.u+"."+e);}},a)}}function ek(a){null===a.Aa||a.ka.get(a.Aa).forEach(function(a){if(this.Gc.has(a.name))throw new D(545,this.u+"."+a.name);},a)}Y.prototype.rf=function(a,b){Xj(a);ak(this,a);this.J.set(a,b);Zj.has(b)&&this.se([a]);return this};Y.prototype.addColumn=Y.prototype.rf;
Y.prototype.tf=function(a,b){var c=this.u;this.Aa="pk"+(c[0].toUpperCase()+c.substring(1));Xj(this.Aa);ak(this,this.Aa);c=fk(this,a,!0,void 0,b);bk(this,c);1==c.length&&this.rd.add(c[0].name);this.jc.add(this.Aa);this.ka.set(this.Aa,c);return this};Y.prototype.addPrimaryKey=Y.prototype.tf;
Y.prototype.sf=function(a,b){Xj(a);ak(this,a);var c=new Wj(b,this.u,a);q(c.action)||(c.action=0);q(c.timing)||(c.timing=0);if(1==c.action&&1==c.timing)throw new D(506);if(!this.J.has(c.cb))throw new D(540,a);this.sb.push(c);this.re(a,[c.cb],this.rd.has(c.cb));return this};Y.prototype.addForeignKey=Y.prototype.sf;Y.prototype.uf=function(a,b){Xj(a);ak(this,a);var c=fk(this,b,!0);gk(this,a,c);1==c.length&&(this.rd.add(c[0].name),hk(this,c[0].name));this.ka.set(a,c);this.jc.add(a);return this};
Y.prototype.addUnique=Y.prototype.uf;function hk(a,b){a.sb.forEach(function(a){a.cb==b&&this.jc.add(a.name.split(".")[1])},a)}Y.prototype.se=function(a){a=fk(this,a,!1);ik(this,a);a.forEach(function(a){this.Gc.add(a.name)},this);return this};Y.prototype.addNullable=Y.prototype.se;function ik(a,b){Yb(a.ka).forEach(function(a){var d=C();this.ka.get(a).forEach(function(a){d.add(a.name)});var e=b.filter(function(a){return d.has(a.name)});if(1<d.size&&0<e.length)throw new D(507,a,e.join(","));},a)}
Y.prototype.re=function(a,b,c,d){Xj(a);ak(this,a);b=fk(this,b,!0,d);gk(this,a,b);c&&this.jc.add(a);this.ka.set(a,b);return this};Y.prototype.addIndex=Y.prototype.re;function gk(a,b,c){if(1<c.length&&(a=c.filter(function(a){return this.Gc.has(a.name)},a),0<a.length))throw new D(507,b,a.join(","));}Y.prototype.xb=ba("ld");Y.prototype.persistentIndex=Y.prototype.xb;Y.prototype.tb=function(){ck(this);dk(this);ek(this);return new (jk(this))};Y.prototype.getSchema=Y.prototype.tb;
function kk(a){return a.sb}function fk(a,b,c,d,e){var f=b,f="string"==typeof b[0]?b.map(function(a){return new Yj({name:a,order:null!=d?d:1,autoIncrement:e||!1})}):b.map(function(a){return new Yj(a)});f.forEach(function(a){if(!this.J.has(a.name))throw new D(508,this.u,a.name);if(c){var b=this.J.get(a.name);if(0==b||6==b)throw new D(509,this.u,a.name);}},a);return f}
function jk(a){function b(){function b(c){return a.ka.get(c).map(function(a){return{ca:this[a.name],jb:a.jb,autoIncrement:a.autoIncrement}},this)}var d=Yb(a.J).map(function(b){this[b]=new X(this,b,a.rd.has(b),a.Gc.has(b),a.J.get(b));return this[b]},this),e=Yb(a.ka).map(function(d){return new wg(a.u,d,a.jc.has(d),b.call(this,d))},this);Q.call(this,a.u,d,e,a.ld);var f=null===a.Aa?null:new wg(a.u,a.Aa,!0,b.call(this,a.Aa)),h=d.filter(function(b){return!a.Gc.has(b.getName())});this.Bf=new Vj(f,h,a.sb);
this.ff=lk(a,d,e)}t(b,Q);b.prototype.rb=function(a){return new this.ff(pb++,a)};b.prototype.createRow=b.prototype.rb;b.prototype.Ab=function(a){var b={};this.fb().forEach(function(e){var f=e.getName();e=e.H();var h=a.value[f];if(0==e)if(e=h,null!=e&&""!=e){0!=e.length%2&&(e="0"+e);for(var h=new ArrayBuffer(e.length/2),k=new Uint8Array(h),n=0,x=0;n<e.length;n+=2)k[x++]=parseInt(e.substr(n,2),16);e=h}else e=null;else e=2==e?null!=h?new Date(h):null:h;b[f]=e},this);return new this.ff(a.id,b)};b.prototype.deserializeRow=
b.prototype.Ab;b.prototype.Bb=g("Bf");b.prototype.getConstraint=b.prototype.Bb;return b}
function lk(a,b,c){function d(a,d){this.J=b;this.ka=c;z.call(this,a,d)}t(d,z);d.prototype.Ce=function(){var a={};this.J.forEach(function(b){a[b.getName()]=b.Bc()?null:Lc[b.H()]});return a};d.prototype.nf=function(){var a={};this.J.forEach(function(b){var c=b.getName();b=b.H();var d=this.o[c];a[c]=0==b?null!=d?tb(d):null:2==b?null!=d?d.getTime():null:6==b?null!=d?d:null:d},this);return a};var e=function(a){var b=this.J.get(a.getName()),c=this.Fd.Oe.get(b)||null;return function(b){return c(b[a.getName()])}}.bind(a),
f=function(a){var b=a.map(function(a){return e(a.ca)});return function(a){return b.map(function(b){return b(a)})}}.bind(a),h={};c.forEach(function(a){var b=a.m();a=1==a.f.length?e(a.f[0].ca):f(a.f);h[b]=a});d.prototype.Db=function(a){return-1!=a.indexOf("#")?this.id():h.hasOwnProperty(a)?h[a](this.o):null};return d};function mk(a,b){this.i=new Z(a,b);this.ob=A();this.vc=!1}r("lf.schema.Builder",mk);function nk(a,b){b.sb.forEach(function(a){var d=a.Pa;if(!this.ob.has(d))throw new D(536,a.name);var d=this.ob.get(d).tb(),e=a.gc;if(!d.hasOwnProperty(e))throw new D(537,a.name);if(b.tb()[a.cb].H()!=d[e].H())throw new D(538,a.name);if(!d[e].Cc())throw new D(539,a.name);},a)}mk.prototype.Af=function(a){a.sb.forEach(function(a){kk(this.ob.get(a.Pa)).forEach(function(c){if(c.cb==a.gc)throw new D(534,a.name);},this)},this)};
function ok(a){a.vc||(a.ob.forEach(function(a){nk(this,a);a=a.tb();this.i.L.set(a.getName(),a)},a),B(a.ob).forEach(a.Af,a),pk(a),a.ob.clear(),a.vc=!0)}function qk(a,b,c){b.oe||(b.oe=!0,b.Xd=!0,b.De.forEach(function(a){a=c.get(a);if(!a.oe)qk(this,a,c);else if(a.Xd&&b!=a)throw new D(533);},a));b.Xd=!1}function pk(a){var b=A();a.i.L.forEach(function(a,d){b.set(d,new rk(d))},a);a.ob.forEach(function(a,d){a.sb.forEach(function(a){b.get(a.Pa).De.add(d)})});B(b).forEach(function(a){qk(this,a,b)},a)}
function rk(a){this.Xd=this.oe=!1;this.De=C();this.Nc=a}mk.prototype.tb=function(){this.vc||ok(this);return this.i};mk.prototype.getSchema=mk.prototype.tb;mk.prototype.Fe=function(){var a=new hc("ns_"+this.i.name()),b;Sj||(Sj=new Rj);b=Sj;var c=null;b.Qd(a)?c=b.j(a):(c=new Rj,b.kb(a,c));return c};mk.prototype.getGlobal=mk.prototype.Fe;mk.prototype.connect=function(a){var b=this.Fe();b.Qd(oc)||b.kb(oc,this.tb());return(new W(b)).Fa(a)};mk.prototype.connect=mk.prototype.connect;
mk.prototype.Ef=function(a){if(this.ob.has(a))throw new D(503,a);if(this.vc)throw new D(535);this.ob.set(a,new Y(a));return this.ob.get(a)};mk.prototype.createTable=mk.prototype.Ef;mk.prototype.ie=function(a){if(this.vc)throw new D(535);this.i.ie(a);return this};mk.prototype.setPragma=mk.prototype.ie;function Z(a,b){this.u=a;this.Xb=b;this.L=A();this.$e={If:!1}}r("lf.schema.DatabaseSchema",Z);Z.prototype.name=g("u");Z.prototype.name=Z.prototype.name;Z.prototype.version=g("Xb");
Z.prototype.version=Z.prototype.version;Z.prototype.ra=function(){return B(this.L)};Z.prototype.tables=Z.prototype.ra;Z.prototype.table=function(a){if(!this.L.has(a))throw new D(101,a);return this.L.get(a)};Z.prototype.table=Z.prototype.table;Z.prototype.info=function(){this.Je||(this.Je=new Tj(this));return this.Je};Z.prototype.Ze=g("$e");Z.prototype.pragma=Z.prototype.Ze;Z.prototype.ie=ba("$e");r("lf.schema.create",function(a,b){return new mk(a,b)});v.prototype.catch=v.prototype.le;v.prototype["catch"]=v.prototype.catch;}.bind(window))()
//# sourceMappingURL=lovefield.es6.js.map
