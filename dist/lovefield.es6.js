(function(){'use strict';function aa(){return function(){}}function ba(a){return function(b){this[a]=b}}function g(a){return function(){return this[a]}}function l(a){return function(){return a}}var m,p=this;function q(a){return void 0!==a}function da(){}
function ea(a){var b=typeof a;if("object"==b)if(a){if(a instanceof Array)return"array";if(a instanceof Object)return b;var c=Object.prototype.toString.call(a);if("[object Window]"==c)return"object";if("[object Array]"==c||"number"==typeof a.length&&"undefined"!=typeof a.splice&&"undefined"!=typeof a.propertyIsEnumerable&&!a.propertyIsEnumerable("splice"))return"array";if("[object Function]"==c||"undefined"!=typeof a.call&&"undefined"!=typeof a.propertyIsEnumerable&&!a.propertyIsEnumerable("call"))return"function"}else return"null";
else if("function"==b&&"undefined"==typeof a.call)return"object";return b}function fa(a){return null===a}function ga(a){return null!=a}function ha(a){var b=ea(a);return"array"==b||"object"==b&&"number"==typeof a.length}function ia(a){return"string"==typeof a}function ja(a){return"function"==ea(a)}function ka(a){return a[la]||(a[la]=++ma)}var la="closure_uid_"+(1E9*Math.random()>>>0),ma=0;function na(a,b,c){return a.call.apply(a.bind,arguments)}
function oa(a,b,c){if(!a)throw Error();if(2<arguments.length){var d=Array.prototype.slice.call(arguments,2);return function(){var c=Array.prototype.slice.call(arguments);Array.prototype.unshift.apply(c,d);return a.apply(b,c)}}return function(){return a.apply(b,arguments)}}function pa(a,b,c){pa=Function.prototype.bind&&-1!=Function.prototype.bind.toString().indexOf("native code")?na:oa;return pa.apply(null,arguments)}
function qa(a,b){var c=Array.prototype.slice.call(arguments,1);return function(){var b=c.slice();b.push.apply(b,arguments);return a.apply(this,b)}}function r(a,b){var c=a.split("."),d=p;c[0]in d||!d.execScript||d.execScript("var "+c[0]);for(var e;c.length&&(e=c.shift());)!c.length&&q(b)?d[e]=b:d=d[e]?d[e]:d[e]={}}
function t(a,b){function c(){}c.prototype=b.prototype;a.Gb=b.prototype;a.prototype=new c;a.prototype.constructor=a;a.Gg=function(a,c,f){for(var h=Array(arguments.length-2),k=2;k<arguments.length;k++)h[k-2]=arguments[k];return b.prototype[c].apply(a,h)}};function ra(a){if(Error.captureStackTrace)Error.captureStackTrace(this,ra);else{var b=Error().stack;b&&(this.stack=b)}a&&(this.message=String(a))}t(ra,Error);ra.prototype.name="CustomError";var sa=String.prototype.trim?function(a){return a.trim()}:function(a){return a.replace(/^[\s\xa0]+|[\s\xa0]+$/g,"")};
function ta(a){var b=0,c=sa(String(ua)).split(".");a=sa(String(a)).split(".");for(var d=Math.max(c.length,a.length),e=0;0==b&&e<d;e++){var f=c[e]||"",h=a[e]||"",k=/(\d*)(\D*)/g,n=/(\d*)(\D*)/g;do{var z=k.exec(f)||["","",""],O=n.exec(h)||["","",""];if(0==z[0].length&&0==O[0].length)break;b=va(0==z[1].length?0:parseInt(z[1],10),0==O[1].length?0:parseInt(O[1],10))||va(0==z[2].length,0==O[2].length)||va(z[2],O[2])}while(0==b)}return b}function va(a,b){return a<b?-1:a>b?1:0};function wa(a,b,c){this.dg=c;this.Hf=a;this.vg=b;this.kd=0;this.fd=null}wa.prototype.get=function(){var a;0<this.kd?(this.kd--,a=this.fd,this.fd=a.next,a.next=null):a=this.Hf();return a};wa.prototype.put=function(a){this.vg(a);this.kd<this.dg&&(this.kd++,a.next=this.fd,this.fd=a)};var xa=Array.prototype,ya=xa.indexOf?function(a,b,c){return xa.indexOf.call(a,b,c)}:function(a,b,c){c=null==c?0:0>c?Math.max(0,a.length+c):c;if(ia(a))return ia(b)&&1==b.length?a.indexOf(b,c):-1;for(;c<a.length;c++)if(c in a&&a[c]===b)return c;return-1},za=xa.forEach?function(a,b,c){xa.forEach.call(a,b,c)}:function(a,b,c){for(var d=a.length,e=ia(a)?a.split(""):a,f=0;f<d;f++)f in e&&b.call(c,e[f],f,a)},Aa=xa.map?function(a,b,c){return xa.map.call(a,b,c)}:function(a,b,c){for(var d=a.length,e=Array(d),
f=ia(a)?a.split(""):a,h=0;h<d;h++)h in f&&(e[h]=b.call(c,f[h],h,a));return e},Ba=xa.reduce?function(a,b,c,d){d&&(b=pa(b,d));return xa.reduce.call(a,b,c)}:function(a,b,c,d){var e=c;za(a,function(c,h){e=b.call(d,e,c,h,a)});return e},Ca=xa.some?function(a,b,c){return xa.some.call(a,b,c)}:function(a,b,c){for(var d=a.length,e=ia(a)?a.split(""):a,f=0;f<d;f++)if(f in e&&b.call(c,e[f],f,a))return!0;return!1};function Da(a,b,c){return 2>=arguments.length?xa.slice.call(a,b):xa.slice.call(a,b,c)}
function Ea(a){for(var b=[],c=0;c<a;c++)b[c]=0;return b}function Fa(a){for(var b=[],c=0;c<arguments.length;c++){var d=arguments[c];if("array"==ea(d))for(var e=0;e<d.length;e+=8192)for(var f=Fa.apply(null,Da(d,e,e+8192)),h=0;h<f.length;h++)b.push(f[h]);else b.push(d)}return b};var Ga;a:{var Ha=p.navigator;if(Ha){var Ia=Ha.userAgent;if(Ia){Ga=Ia;break a}}Ga=""}function u(a){return-1!=Ga.indexOf(a)};function Ja(){return u("Opera")||u("OPR")}function Ka(){return(u("Chrome")||u("CriOS"))&&!Ja()&&!u("Edge")};function La(a){p.setTimeout(function(){throw a;},0)}var Ma;
function Na(){var a=p.MessageChannel;"undefined"===typeof a&&"undefined"!==typeof window&&window.postMessage&&window.addEventListener&&!u("Presto")&&(a=function(){var a=document.createElement("IFRAME");a.style.display="none";a.src="";document.documentElement.appendChild(a);var b=a.contentWindow,a=b.document;a.open();a.write("");a.close();var c="callImmediate"+Math.random(),d="file:"==b.location.protocol?"*":b.location.protocol+"//"+b.location.host,a=pa(function(a){if(("*"==d||a.origin==d)&&a.data==
c)this.port1.onmessage()},this);b.addEventListener("message",a,!1);this.port1={};this.port2={postMessage:function(){b.postMessage(c,d)}}});if("undefined"!==typeof a&&!u("Trident")&&!u("MSIE")){var b=new a,c={},d=c;b.port1.onmessage=function(){if(q(c.next)){c=c.next;var a=c.ze;c.ze=null;a()}};return function(a){d.next={ze:a};d=d.next;b.port2.postMessage(0)}}return"undefined"!==typeof document&&"onreadystatechange"in document.createElement("SCRIPT")?function(a){var b=document.createElement("SCRIPT");
b.onreadystatechange=function(){b.onreadystatechange=null;b.parentNode.removeChild(b);b=null;a();a=null};document.documentElement.appendChild(b)}:function(a){p.setTimeout(a,0)}};function Oa(){this.td=this.kc=null}var Qa=new wa(function(){return new Pa},function(a){a.reset()},100);Oa.prototype.add=function(a,b){var c=Qa.get();c.set(a,b);this.td?this.td.next=c:this.kc=c;this.td=c};Oa.prototype.remove=function(){var a=null;this.kc&&(a=this.kc,this.kc=this.kc.next,this.kc||(this.td=null),a.next=null);return a};function Pa(){this.next=this.scope=this.Kd=null}Pa.prototype.set=function(a,b){this.Kd=a;this.scope=b;this.next=null};
Pa.prototype.reset=function(){this.next=this.scope=this.Kd=null};function Ra(a,b){Sa||Ta();Ua||(Sa(),Ua=!0);Va.add(a,b)}var Sa;function Ta(){if(p.Promise&&p.Promise.resolve){var a=p.Promise.resolve(void 0);Sa=function(){a.then(Wa)}}else Sa=function(){var a=Wa;!ja(p.setImmediate)||p.Window&&p.Window.prototype&&p.Window.prototype.setImmediate==p.setImmediate?(Ma||(Ma=Na()),Ma(a)):p.setImmediate(a)}}var Ua=!1,Va=new Oa;function Wa(){for(var a=null;a=Va.remove();){try{a.Kd.call(a.scope)}catch(b){La(b)}Qa.put(a)}Ua=!1};function v(a,b){this.Ra=0;this.ff=void 0;this.Wc=this.ac=this.B=null;this.ed=this.Id=!1;if(a!=da)try{var c=this;a.call(b,function(a){Xa(c,2,a)},function(a){Xa(c,3,a)})}catch(d){Xa(this,3,d)}}function Ya(){this.next=this.context=this.fc=this.Ic=this.child=null;this.wd=!1}Ya.prototype.reset=function(){this.context=this.fc=this.Ic=this.child=null;this.wd=!1};var Za=new wa(function(){return new Ya},function(a){a.reset()},100);function $a(a,b,c){var d=Za.get();d.Ic=a;d.fc=b;d.context=c;return d}
function w(a){if(a instanceof v)return a;var b=new v(da);Xa(b,2,a);return b}function ab(a){return new v(function(b,c){c(a)})}function bb(a,b,c){cb(a,b,c,null)||Ra(qa(b,a))}function db(a){return new v(function(b,c){var d=a.length,e=[];if(d)for(var f=function(a,c){d--;e[a]=c;0==d&&b(e)},h=function(a){c(a)},k=0,n;k<a.length;k++)n=a[k],bb(n,qa(f,k),h);else b(e)})}function x(){var a,b,c=new v(function(c,e){a=c;b=e});return new eb(c,a,b)}
v.prototype.then=function(a,b,c){return fb(this,ja(a)?a:null,ja(b)?b:null,c)};v.prototype.then=v.prototype.then;v.prototype.$goog_Thenable=!0;v.prototype.ne=function(a,b){return fb(this,null,a,b)};function gb(a,b){a.ac||2!=a.Ra&&3!=a.Ra||hb(a);a.Wc?a.Wc.next=b:a.ac=b;a.Wc=b}
function fb(a,b,c,d){var e=$a(null,null,null);e.child=new v(function(a,h){e.Ic=b?function(c){try{var e=b.call(d,c);a(e)}catch(z){h(z)}}:a;e.fc=c?function(b){try{var e=c.call(d,b);!q(e)&&b instanceof ib?h(b):a(e)}catch(z){h(z)}}:h});e.child.B=a;gb(a,e);return e.child}v.prototype.Bg=function(a){this.Ra=0;Xa(this,2,a)};v.prototype.Cg=function(a){this.Ra=0;Xa(this,3,a)};
function Xa(a,b,c){0==a.Ra&&(a==c&&(b=3,c=new TypeError("Promise cannot resolve to itself")),a.Ra=1,cb(c,a.Bg,a.Cg,a)||(a.ff=c,a.Ra=b,a.B=null,hb(a),3!=b||c instanceof ib||jb(a,c)))}function cb(a,b,c,d){if(a instanceof v)return gb(a,$a(b||da,c||null,d)),!0;var e;if(a)try{e=!!a.$goog_Thenable}catch(h){e=!1}else e=!1;if(e)return a.then(b,c,d),!0;e=typeof a;if("object"==e&&null!=a||"function"==e)try{var f=a.then;if(ja(f))return kb(a,f,b,c,d),!0}catch(h){return c.call(d,h),!0}return!1}
function kb(a,b,c,d,e){function f(a){k||(k=!0,d.call(e,a))}function h(a){k||(k=!0,c.call(e,a))}var k=!1;try{b.call(a,h,f)}catch(n){f(n)}}function hb(a){a.Id||(a.Id=!0,Ra(a.Mf,a))}function lb(a){var b=null;a.ac&&(b=a.ac,a.ac=b.next,b.next=null);a.ac||(a.Wc=null);return b}
v.prototype.Mf=function(){for(var a=null;a=lb(this);){var b=this.Ra,c=this.ff;if(3==b&&a.fc&&!a.wd)for(var d=void 0,d=this;d&&d.ed;d=d.B)d.ed=!1;if(a.child)a.child.B=null,mb(a,b,c);else try{a.wd?a.Ic.call(a.context):mb(a,b,c)}catch(e){nb.call(null,e)}Za.put(a)}this.Id=!1};function mb(a,b,c){2==b?a.Ic.call(a.context,c):a.fc&&a.fc.call(a.context,c)}function jb(a,b){a.ed=!0;Ra(function(){a.ed&&nb.call(null,b)})}var nb=La;function ib(a){ra.call(this,a)}t(ib,ra);ib.prototype.name="cancel";
function eb(a,b,c){this.ha=a;this.resolve=b;this.reject=c};/*

 Copyright 2014 The Lovefield Project Authors. All Rights Reserved.

 Licensed under the Apache License, Version 2.0 (the "License");
 you may not use this file except in compliance with the License.
 You may obtain a copy of the License at

     http://www.apache.org/licenses/LICENSE-2.0

 Unless required by applicable law or agreed to in writing, software
 distributed under the License is distributed on an "AS IS" BASIS,
 WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 See the License for the specific language governing permissions and
 limitations under the License.
*/
function y(a,b){this.pa=a;this.o=b||this.Ee()}var ob=0;m=y.prototype;m.id=g("pa");function pb(a){return a.o}m.Ee=function(){return{}};m.pf=g("o");m.Ea=function(){return{id:this.pa,value:this.pf()}};m.Db=function(a){return"#"==a.substr(-1)?this.pa:null};function qb(a){return new y(a.id,a.value)}function rb(a){return new y(ob++,a||{})}function sb(a){if(null==a)return null;a=new Uint8Array(a);for(var b="",c=0;c<a.length;++c)var d=a[c].toString(16),b=b+(2>d.length?"0"+d:d);return b};function tb(a){this.type=a}function ub(a){y.call(this,-1,a)}t(ub,y);function wb(a,b,c,d){c=c||function(a,b){return a==b};d=d||function(b){return a[b]};for(var e=a.length,f=b.length,h=[],k=0;k<e+1;k++)h[k]=[],h[k][0]=0;for(var n=0;n<f+1;n++)h[0][n]=0;for(k=1;k<=e;k++)for(n=1;n<=f;n++)c(a[k-1],b[n-1])?h[k][n]=h[k-1][n-1]+1:h[k][n]=Math.max(h[k-1][n],h[k][n-1]);for(var z=[],k=e,n=f;0<k&&0<n;)c(a[k-1],b[n-1])?(z.unshift(d(k-1,n-1)),k--,n--):h[k-1][n]>h[k][n-1]?k--:n--;return z}function xb(a){return Ba(arguments,function(a,c){return a+c},0)}
function yb(a){return xb.apply(null,arguments)/arguments.length}function zb(a){var b=arguments.length;if(2>b)return 0;var c=yb.apply(null,arguments);return xb.apply(null,Aa(arguments,function(a){return Math.pow(a-c,2)}))/(b-1)}function Ab(a){return Math.sqrt(zb.apply(null,arguments))};var Bb="StopIteration"in p?p.StopIteration:{message:"StopIteration",stack:""};function Cb(){}Cb.prototype.next=function(){throw Bb;};Cb.prototype.se=function(){return this};function Db(a){if(a instanceof Cb)return a;if("function"==typeof a.se)return a.se(!1);if(ha(a)){var b=0,c=new Cb;c.next=function(){for(;;){if(b>=a.length)throw Bb;if(b in a)return a[b++];b++}};return c}throw Error("Not implemented");}
function Eb(a,b){if(ha(a))try{za(a,b,void 0)}catch(c){if(c!==Bb)throw c;}else{a=Db(a);try{for(;;)b.call(void 0,a.next(),void 0,a)}catch(c){if(c!==Bb)throw c;}}}function Fb(a){if(Ca(arguments,function(a){return!a.length})||!arguments.length)return new Cb;var b=new Cb,c=arguments,d=Ea(c.length);b.next=function(){if(d){for(var a=Aa(d,function(a,b){return c[b][a]}),b=d.length-1;0<=b;b--){if(d[b]<c[b].length-1){d[b]++;break}if(0==b){d=null;break}d[b]=0}return a}throw Bb;};return b};function Gb(a){Hb(a);return a.c.concat()}function Hb(a){if(a.Df!=a.c.length){for(var b=0,c=0;b<a.c.length;){var d=a.c[b];Ib(a.X,d)&&(a.c[c++]=d);b++}a.c.length=c}if(a.Df!=a.c.length){for(var e={},c=b=0;b<a.c.length;)d=a.c[b],Ib(e,d)||(a.c[c++]=d,e[d]=1),b++;a.c.length=c}}function Ib(a,b){return Object.prototype.hasOwnProperty.call(a,b)};function Jb(){return u("iPhone")&&!u("iPod")&&!u("iPad")};var Kb=Ja(),Lb=u("Trident")||u("MSIE"),Mb=u("Edge"),Nb=u("Gecko")&&!(-1!=Ga.toLowerCase().indexOf("webkit")&&!u("Edge"))&&!(u("Trident")||u("MSIE"))&&!u("Edge"),Ob=-1!=Ga.toLowerCase().indexOf("webkit")&&!u("Edge");function Pb(){var a=Ga;if(Nb)return/rv\:([^\);]+)(\)|;)/.exec(a);if(Mb)return/Edge\/([\d\.]+)/.exec(a);if(Lb)return/\b(?:MSIE|rv)[: ]([^\);]+)(\)|;)/.exec(a);if(Ob)return/WebKit\/(\S+)/.exec(a)}
var ua=function(){if(Kb&&p.opera){var a;var b=p.opera.version;try{a=b()}catch(c){a=b}return a}a="";(b=Pb())&&(a=b?b[1]:"");return Lb&&(b=(b=p.document)?b.documentMode:void 0,b>parseFloat(a))?String(b):a}(),Qb={};var Rb=Jb()||u("iPod"),Sb=u("iPad");!u("Android")||Ka()||u("Firefox")||Ja();var Tb=Ka(),Ub=u("Safari")&&!(Ka()||u("Coast")||Ja()||u("Edge")||u("Silk")||u("Android"))&&!(Jb()||u("iPad")||u("iPod"));/*

 Copyright 2015 The Lovefield Project Authors. All Rights Reserved.

 Licensed under the Apache License, Version 2.0 (the "License");
 you may not use this file except in compliance with the License.
 You may obtain a copy of the License at

     http://www.apache.org/licenses/LICENSE-2.0

 Unless required by applicable law or agreed to in writing, software
 distributed under the License is distributed on an "AS IS" BASIS,
 WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 See the License for the specific language governing permissions and
 limitations under the License.
*/
function Vb(){this.wg=Ub||Sb||Rb;this.Vf=!(this.wg||Lb&&!Qb[10]&&!(Qb[10]=0<=ta(10)));!Lb||Qb[11]||(Qb[11]=0<=ta(11));this.Eg=Tb||Ub}var Wb;function A(){return new window.Map}function Xb(a){var b=0,c=Array(a.size);a.forEach(function(a,e){c[b++]=e});return c}function B(a){var b=0,c=Array(a.size);a.forEach(function(a){c[b++]=a});return c};var Yb={};r("lf.TransactionType",Yb);Yb.READ_ONLY=0;Yb.READ_WRITE=1;function Zb(a,b){this.qf=a;this.Oa=b||null;this.Y=x()}Zb.prototype.ia=function(){return 0==this.qf?this.nc():$b(this)};function $b(a){try{ac(a.Oa)}catch(b){return ab(b)}return bc(a).then(function(a){this.Oa.ia();return a}.bind(a))}function bc(a){cc(a);dc(a);return a.nc()}
function cc(a){a.Oa.pb.forEach(function(a,c){var d=this.Oa.ba().get(c),d=this.G(d.getName(),d.Ab.bind(d)),e=B(a.wa).map(function(a){return a.id()});0<e.length&&d.remove(e).ne(this.Md,this);e=B(a.na).map(function(a){return a[1]}).concat(B(a.ta));d.put(e).ne(this.Md,this)},a)}function dc(a){ec(a.Oa).forEach(function(a){var c=this.G(a.getName(),qb),d;c.get([-1]).then(function(a){d=a;return c.remove([])}).then(function(){c.put(d);c.put(a.Ea())},this.Md.bind(this))},a)}Zb.prototype.Md=function(a){this.Y.reject(a)};function fc(a){this.xg=a}fc.prototype.toString=g("xg");var gc=new fc("backstore"),hc=new fc("cache"),ic=new fc("indexstore"),jc=new fc("engine"),kc=new fc("runner"),lc=new fc("observerregistry"),mc=new fc("schema");function C(a){return q(a)?new window.Set(a):new window.Set}function D(a){var b=0,c=Array(a.size);a.forEach(function(a){c[b++]=a});return c}function nc(a,b){if(b.size>a.size)return!1;var c=!0;b.forEach(function(b){c=c&&a.has(b)});return c};function oc(a,b){this.pa=a;this.o=b||{}}function pc(a){var b=C();a.forEach(function(a){b.add(a>>9)});return D(b)}oc.prototype.V=g("pa");function qc(a,b){b.forEach(function(a){this.o[a.id()]=a.Ea()},a)}function rc(a,b){b.forEach(function(a){delete this.o[a]},a)}oc.prototype.Ea=function(){return{id:this.pa,value:JSON.stringify(this.o)}};function sc(a){return new oc(a.id,JSON.parse(a.value))};function tc(a,b,c){this.aa=a;this.Jb=b;this.gf=c}m=tc.prototype;m.get=function(a){if(0==a.length)return this.wc();var b=this.Jb;return uc(this,a).then(function(c){return a.map(function(a){var e=c.get(a>>9);return b(e.o[a])})})};function uc(a,b){var c=A(),d=x(),e=pc(b).map(function(a){return new v(function(b,d){var e;try{e=this.aa.get(a)}catch(z){d(z);return}e.onerror=d;e.onsuccess=function(a){a=sc(a.target.result);c.set(a.V(),a);b()}},this)},a);db(e).then(function(){d.resolve(c)});return d.ha}
m.wc=function(){return new v(function(a,b){var c=[],d;try{d=this.aa.openCursor()}catch(e){b(e);return}d.onerror=b;d.onsuccess=function(){var b=d.result;if(b){var f;f=sc(b.value).o;for(var h in f)c.push(this.Jb(f[h]));b.continue()}else a(c)}.bind(this)},this)};m.Qb=function(a){return new v(function(b,c){var d;try{d=a()}catch(e){c(e);return}d.onsuccess=b;d.onerror=c},this)};
m.put=function(a){if(0==a.length)return w();var b=A();a.forEach(function(a){var d;d=a.id()>>9;var e=b.get(d)||null;null===e&&(e=this.gf(this.aa.name,d));qc(e,[a]);b.set(d,e)},this);a=B(b).map(function(a){return this.Qb(function(){return this.aa.put(a.Ea())}.bind(this))},this);return db(a)};
m.remove=function(a){if(0==a.length)return this.Qb(function(){return this.aa.clear()}.bind(this));var b=A();a.forEach(function(a){var d=a>>9,e=b.get(d)||null;null===e&&(e=this.gf(this.aa.name,d));rc(e,[a]);b.set(d,e)},this);a=B(b).map(function(a){return this.Qb(function(){return 0==Object.keys(a.o).length?this.aa.delete(a.V()):this.aa.put(a.Ea())}.bind(this))},this);return db(a)};function vc(a,b,c){a=a.j(hc);var d=[c<<9,(c+1<<9)-1];b=a.Xa(b,d[0],d[1]);c=new oc(c);qc(c,b);return c}
function wc(a,b){return new oc(b)};function xc(){};function yc(a){this.S=a.j(hc);this.C=a.j(ic);this.i=a.j(mc)}yc.prototype.update=function(a){a.forEach(function(a){zc(this,a);Ac(this,a)},this)};function Ac(a,b){var c=b.getName();b.wa.forEach(function(a,b){this.S.remove(c,b)},a);b.ta.forEach(function(a){this.S.set(c,a)},a);b.na.forEach(function(a){this.S.set(c,a[1])},a)}function zc(a,b){var c=a.i.table(b.getName());Bc(b).forEach(function(a){Cc(this,c,a)},a)}
function Cc(a,b,c){var d=a.C.ic.get(b.getName())||[],e=0;d.forEach(function(a){try{Dc(a,c),e++}catch(b){throw d.slice(0,e).forEach(function(a){Dc(a,[c[1],c[0]])},this),b;}},a)}function Dc(a,b){var c=null===b[1]?void 0:b[1].Db(a.getName()),d=null===b[0]?void 0:b[0].Db(a.getName());if(!q(d)&&q(c))a.add(c,b[1].id());else if(q(d)&&q(c)){if(null===c||null===d){if(c==d)return}else if(0==a.oc().compare(d,c))return;a.add(c,b[1].id());a.remove(d,b[0].id())}else q(d)&&!q(c)&&a.remove(d,b[0].id())};var Ec={};r("lf.ConstraintAction",Ec);Ec.RESTRICT=0;Ec.CASCADE=1;var Fc={};r("lf.ConstraintTiming",Fc);Fc.IMMEDIATE=0;Fc.DEFERRABLE=1;var Gc={};r("lf.Order",Gc);Gc.DESC=0;Gc.ASC=1;var Hc={};r("lf.Type",Hc);Hc.ARRAY_BUFFER=0;Hc.BOOLEAN=1;Hc.DATE_TIME=2;Hc.INTEGER=3;Hc.NUMBER=4;Hc.STRING=5;Hc.OBJECT=6;var Ic={0:null,1:!1,2:Object.freeze(new Date(0)),3:0,4:0,5:"",6:null};r("lf.type.DEFAULT_VALUES",Ic);function E(a,b){this.code=a;this.message="http://sn.im/2a0j3wn?c="+a;if(1<arguments.length)for(var c=1;c<=Math.min(4,arguments.length-1);++c)this.message+="&p"+(c-1)+"="+encodeURIComponent(arguments[c].toString().slice(0,64))}t(E,Error);function Jc(){this.X=A();this.size=0}m=Jc.prototype;m.has=function(a){return this.X.has(a)};m.set=function(a,b){var c=this.X.get(a)||null;null===c&&(c=C(),this.X.set(a,c));c.has(b)||(c.add(b),this.size++);return this};m.Tb=function(a,b){var c=this.X.get(a)||null;null===c&&(c=C(),this.X.set(a,c));b.forEach(function(a){c.has(a)||(c.add(a),this.size++)},this);return this};m.Vd=function(a){a.keys().forEach(function(b){var c=a.get(b);this.Tb(b,c)},this);return this};
m.delete=function(a,b){var c=this.X.get(a,null);if(null===c)return!1;var d=c.delete(b);d&&(--this.size,0==c.size&&this.X.delete(a));return d};m.get=function(a){a=this.X.get(a)||null;return null===a?null:D(a)};m.clear=function(){this.X.clear();this.size=0};m.keys=function(){return Xb(this.X)};m.values=function(){var a=[];this.X.forEach(function(b){a.push.apply(a,D(b))});return a};function Kc(a){this.C=a.j(ic);this.i=a.j(mc);this.S=a.j(hc);this.Zc=null}function Lc(a,b,c){var d=b.Bb().ig;c.forEach(function(a){d.forEach(function(b){if(null==a.o[b.getName()])throw new E(202,b.m());},this)},a)}function Nc(a,b,c,d){b.Bb().Ld().forEach(function(a){a.timing==d&&Oc(this,a,c)},a)}function Oc(a,b,c){var d=Pc(a,b);c.forEach(function(a){if(Qc(a[0],a[1],b.name)&&(a=a[1].o[b.cb],null!==a&&!d.eb(a)))throw new E(203,b.name);},a)}
function Pc(a,b){null===a.Zc&&(a.Zc=A());var c=a.Zc.get(b.name)||null;null===c&&(c=a.i.table(b.Pa)[b.gc].xa(),c=a.C.get(c.m()),a.Zc.set(b.name,c));return c}function Qc(a,b,c){return(null===a?null!==b:null===b)||a.Db(c)!=b.Db(c)}function Rc(a,b,c,d){b=Sc(a.i.info(),b.getName(),0);null!==b&&(b=b.filter(function(a){return a.timing==d}),0!=b.length&&Tc(a,b,c,function(a,b,c){if(b.eb(c))throw new E(203,a.name);}))}
function Uc(a,b,c){b=Sc(a.i.info(),b.getName(),1);if(null===b)return null;var d=new Jc;Tc(a,b,c,function(a,b,c){b=b.get(c);0<b.length&&d.Tb(a.Ae,b)});return d}function Vc(a,b,c){var d=new Jc;Tc(a,c,b,function(a,b,c,k){b.get(c).forEach(function(b){d.set(b,{Jd:a,ng:k[1]})})});return d}function Tc(a,b,c,d){b.forEach(function(a){var b=this.C.get(a.name),h=Pc(this,a);c.forEach(function(c){Qc(c[0],c[1],h.getName())&&d(a,b,c[0].o[a.gc],c)},this)},a)}
function Wc(a,b,c,d){0!=c.length&&(c=c.map(function(a){return[null,a]}),Nc(a,b,c,d))}function Xc(a,b,c,d){0!=c.length&&(Nc(a,b,c,d),Rc(a,b,c,d))}function Yc(a,b,c,d){0!=c.length&&(c=c.map(function(a){return[a,null]}),Rc(a,b,c,d))}
function Zc(a,b,c){var d={me:[],jf:new Jc},e=new Jc;e.Tb(b.getName(),c.map(function(a){return a.id()}));do{var f=new Jc;e.keys().forEach(function(a){var b=this.i.table(a);a=e.get(a).map(function(a){return[this.S.get(a),null]},this);b=Uc(this,b,a);null!==b&&(d.me.unshift.apply(d.me,b.keys()),f.Vd(b))},a);e=f;d.jf.Vd(e)}while(0<e.size);return d};function $c(a){this.ta=A();this.na=A();this.wa=A();this.u=a}m=$c.prototype;m.getName=g("u");m.add=function(a){if(this.wa.has(a.id())){var b=[this.wa.get(a.id()),a];this.na.set(a.id(),b);this.wa.delete(a.id())}else this.ta.set(a.id(),a)};m.modify=function(a){var b=a[1],c=a[0].id();this.ta.has(c)?this.ta.set(c,b):(this.na.has(c)&&(a=[this.na.get(a[0].id())[0],b]),this.na.set(c,a))};
m.delete=function(a){if(this.ta.has(a.id()))this.ta.delete(a.id());else if(this.na.has(a.id())){var b=this.na.get(a.id())[0];this.na.delete(a.id());this.wa.set(a.id(),b)}else this.wa.set(a.id(),a)};m.Vd=function(a){a.ta.forEach(function(a){this.add(a)},this);a.na.forEach(function(a){this.modify(a)},this);a.wa.forEach(function(a){this.delete(a)},this)};
function Bc(a){var b=[];a.ta.forEach(function(a){b.push([null,a])});a.na.forEach(function(a){b.push(a)});a.wa.forEach(function(a){b.push([a,null])});return b}m.toString=function(){return"["+Xb(this.ta).toString()+"], ["+Xb(this.na).toString()+"], ["+Xb(this.wa).toString()+"]"};function ad(a){var b=new $c(a.u);a.ta.forEach(function(a){b.delete(a)});a.wa.forEach(function(a){b.add(a)});a.na.forEach(function(a){b.modify([a[1],a[0]])});return b}
m.Zf=function(){return 0==this.ta.size&&0==this.wa.size&&0==this.na.size};function bd(a,b){this.$=A();b.forEach(function(a){this.$.set(a.getName(),a)},this);this.i=a.j(mc);this.S=a.j(hc);this.C=a.j(ic);this.ua=new Kc(a);this.gd=new yc(a);this.pb=A()}function ec(a){var b=[];Xb(a.pb).map(function(a){return this.$.get(a)},a).forEach(function(a){a.xb()&&(a.ya().forEach(function(a){b.push(this.C.get(a.m()))},this),b.push(this.C.get(a.getName()+".#")))},a);return b}m=bd.prototype;m.ba=g("$");
m.vb=function(a,b){cd(this,a);Lc(this.ua,a,b);Wc(this.ua,a,b,0);for(var c=0;c<b.length;c++)dd(this,a,[null,b[c]])};function dd(a,b,c){var d=b.getName(),e=a.pb.get(d)||new $c(d);a.pb.set(d,e);try{Cc(a.gd,b,c)}catch(h){throw h;}b=c[0];var f=c[1];null===b&&null!==f?(a.S.set(d,f),e.add(f)):null!==b&&null!==f?(a.S.set(d,f),e.modify(c)):null!==b&&null===f&&(a.S.remove(d,b.id()),e.delete(b))}
m.update=function(a,b){cd(this,a);Lc(this.ua,a,b);var c=b.map(function(a){return[this.S.get(a.id()),a]},this);ed(this,a,c);Xc(this.ua,a,c,0);c.forEach(function(b){dd(this,a,b)},this)};m.Od=function(a,b){cd(this,a);Lc(this.ua,a,b);for(var c=0;c<b.length;c++){var d=b[c],e=null,f,h=a.Bb().bd();if(null===h)f=null;else{f=this.ua;var h=h.m(),k=d.Db(h);f=f.C.get(h).get(k);f=0==f.length?null:f[0]}null!=f?(e=this.S.get(f),d.pa=f,Xc(this.ua,a,[[e,d]],0)):Wc(this.ua,a,[d],0);dd(this,a,[e,d])}};
m.remove=function(a,b){cd(this,a);fd(this,a,b);Yc(this.ua,a,b,0);for(var c=0;c<b.length;c++)dd(this,a,[b[c],null])};function ed(a,b,c){b=Sc(a.i.info(),b.getName(),1);if(null!==b){var d=Vc(a.ua,c,b);d.keys().forEach(function(a){d.get(a).forEach(function(b){var c=this.i.table(b.Jd.Ae),d=this.S.get(a),n=c.Ab(d.Ea());n.o[b.Jd.cb]=b.ng.o[b.Jd.gc];dd(this,c,[d,n])},this)},a)}}
function fd(a,b,c){if(null!==Sc(a.i.info(),b.getName(),1)){b=Zc(a.ua,b,c);var d=b.jf;b.me.forEach(function(a){var b=this.i.table(a);a=d.get(a).map(function(a){return this.S.get(a)},this);Yc(this.ua,b,a,0);a.forEach(function(a){dd(this,b,[a,null])},this)},a)}}function ac(a){a.pb.forEach(function(a){var c=this.$.get(a.getName());Wc(this.ua,c,B(a.ta),1);Yc(this.ua,c,B(a.wa),1);Xc(this.ua,c,B(a.na),1)},a)}m.ia=aa();m.Fb=function(){var a=B(this.pb).map(function(a){return ad(a)});this.gd.update(a)};
function cd(a,b){if(!a.$.has(b.getName()))throw new E(106,b.getName());};function gd(a,b,c,d){this.b=a;this.w=b;this.da=this.b==F?!1:c;this.ma=this.w==F?!1:d}var F=new (aa());gd.prototype.toString=function(){return(this.da?"(":"[")+(this.b==F?"unbound":this.b)+", "+(this.w==F?"unbound":this.w)+(this.ma?")":"]")};function hd(a){if(id(a))return[];var b=null,c=null;a.b==F||(b=new gd(F,a.b,!1,!a.da));a.w==F||(c=new gd(a.w,F,!a.ma,!1));return[b,c].filter(function(a){return null!==a})}gd.prototype.reverse=function(){return new gd(this.w,this.b,this.ma,this.da)};
function jd(a,b){var c=kd(a.b,b.b,!0,a.da,b.da);if(0==c)return!0;var d=-1==c?a:b,c=1==c?a:b;return d.w==F||d.w>c.b||d.w==c.b&&!d.ma&&!c.da}function ld(){return new gd(F,F,!1,!1)}function id(a){return a.b==F&&a.w==F}function md(a){return a.b==a.w&&a.b!=F&&!a.da&&!a.ma}gd.prototype.contains=function(a){var b=this.w==F||a<this.w||a==this.w&&!this.ma;return(this.b==F||a>this.b||a==this.b&&!this.da)&&b};
function kd(a,b,c,d,e){function f(a){return c?a:1==a?-1:1}d=d||!1;e=e||!1;return a==F?b==F?(d?!e:e)?d?f(1):f(-1):0:f(-1):b==F?f(1):a<b?-1:a==b?(d?!e:e)?d?f(1):f(-1):0:1}function nd(a,b){var c=kd(a.b,b.b,!0,a.da,b.da);0==c&&(c=kd(a.w,b.w,!1,a.ma,b.ma));return c};function G(a,b){this.entries=a;this.L=C(b);this.Va=null}function H(a){return D(a.L)}function od(a){return a.entries.map(function(a){return a.sa.o})}function pd(a){return a.entries.map(function(a){return a.sa.id()})}function qd(a,b){return a.Va.get(b.m())}var rd=null;function sd(){null===rd&&(rd=new G([],[]));return rd}
function td(a){if(0==a.length)return sd();for(var b=a.reduce(function(a,b){return a+b.entries.length},0),c=Array(b),d=0,b=a.map(function(a){var b=A();a.entries.forEach(function(a){c[d++]=a;b.set(a.id,a)});return b}),e=A(),f=0;f<c.length;f++)b.every(function(a){return a.has(c[f].id)})&&e.set(c[f].id,c[f]);return new G(B(e),D(a[0].L))}function ud(a){if(0==a.length)return sd();var b=A();a.forEach(function(a){a.entries.forEach(function(a){b.set(a.id,a)})});return new G(B(b),D(a[0].L))}
function vd(a,b){var c=1<b.length,d=a.map(function(a){return new wd(a,c)});return new G(d,b)}function wd(a,b){this.sa=a;this.id=xd++;this.Rd=b}var xd=0;function I(a,b){var c=b.Wa();return null!==c&&a.sa.o.hasOwnProperty(c)?a.sa.o[c]:a.Rd?a.sa.o[J(b.G())][b.getName()]:a.sa.o[b.getName()]}function yd(a,b,c){var d=b.Wa();if(null!=d)a.sa.o[d]=c;else if(a.Rd){var d=J(b.G()),e=a.sa.o[d];null==e&&(e={},a.sa.o[d]=e);e[b.getName()]=c}else a.sa.o[b.getName()]=c}
function zd(a,b,c,d){function e(a,b){if(a.Rd){var c=a.sa.o,d;for(d in c)f[d]=c[d]}else f[b[0]]=a.sa.o}var f={};e(a,b);e(c,d);a=new y(-1,f);return new wd(a,!0)};r("lf.bind",function(a){return new Ad(a)});function Ad(a){this.fa=a}r("lf.Binder",Ad);Ad.prototype.xa=g("fa");function Bd(){this.Qe=Cd();var a=Dd();this.dc=A();this.dc.set(1,Ed());this.dc.set(2,Fd());this.dc.set(4,a);this.dc.set(3,a);this.dc.set(5,Gd())}Bd.xc=function(){return Bd.Me?Bd.Me:Bd.Me=new Bd};function Hd(a,b,c){return(a.dc.get(b)||null).get(c)||null}function Cd(){function a(a){return a}var b=A();b.set(1,function(a){return null===a?null:a?1:0});b.set(2,function(a){return null===a?null:a.getTime()});b.set(3,a);b.set(4,a);b.set(5,a);return b}
function Ed(){var a=A();a.set("eq",function(a,c){return a==c});a.set("neq",function(a,c){return a!=c});return a}
function Dd(){var a=Ed();a.set("between",function(a,c){return null===a||null===c[0]||null===c[1]?!1:a>=c[0]&&a<=c[1]});a.set("gte",function(a,c){return null===a||null===c?!1:a>=c});a.set("gt",function(a,c){return null===a||null===c?!1:a>c});a.set("in",function(a,c){return-1!=c.indexOf(a)});a.set("lte",function(a,c){return null===a||null===c?!1:a<=c});a.set("lt",function(a,c){return null===a||null===c?!1:a<c});return a}
function Gd(){var a=Dd();a.set("match",function(a,c){return null===a||null===c?!1:(new RegExp(c)).test(a)});return a}
function Fd(){var a=A();a.set("between",function(a,c){return null===a||null===c[0]||null===c[1]?!1:a.getTime()>=c[0].getTime()&&a.getTime()<=c[1].getTime()});a.set("eq",function(a,c){return(null===a?-1:a.getTime())==(null===c?-1:c.getTime())});a.set("gte",function(a,c){return null===a||null===c?!1:a.getTime()>=c.getTime()});a.set("gt",function(a,c){return null===a||null===c?!1:a.getTime()>c.getTime()});a.set("in",function(a,c){return c.some(function(c){return c.getTime()==a.getTime()})});a.set("lte",
function(a,c){return null===a||null===c?!1:a.getTime()<=c.getTime()});a.set("lt",function(a,c){return null===a||null===c?!1:a.getTime()<c.getTime()});a.set("neq",function(a,c){return(null===a?-1:a.getTime())!=(null===c?-1:c.getTime())});return a};function K(){this.g=this.B=null}var Id=[];K.prototype.getParent=g("B");K.prototype.gb=function(){for(var a=this;!fa(a.getParent());)a=a.getParent();return a};function Jd(a){for(var b=0;!fa(a.getParent());)b++,a=a.getParent();return b}function L(a){return a.g||Id}function Kd(a,b){return L(a)[b]||null}function Ld(a,b,c){b.B=a;null===a.g?a.g=[b]:a.g.splice(c,0,b)}function Md(a,b){b.B=a;null===a.g?a.g=[b]:a.g.push(b)}
function Nd(a,b){var c=a.g&&a.g[b];return c?(c.B=null,a.g.splice(b,1),0==a.g.length&&(a.g=null),c):null}K.prototype.removeChild=function(a){return Nd(this,L(this).indexOf(a))};function Od(a,b,c){Kd(a,c).B=null;b.B=a;a.g[c]=b}function Pd(a,b,c){!1!==b.call(c,a)&&L(a).forEach(function(a){Pd(a,b,c)})};function Qd(){K.call(this);this.pa=Rd++}t(Qd,K);var Rd=0;Qd.prototype.V=g("pa");function Sd(a,b,c){Qd.call(this);this.N=a;this.value=b;this.F=c;this.sc=Hd(Bd.xc(),this.N.H(),this.F);this.Ya=!1;this.$b=b}t(Sd,Qd);m=Sd.prototype;m.Ib=function(){var a=new Sd(this.N,this.value,this.F);a.$b=this.$b;a.qd(this.Ya);var b=this.V();a.pa=b;return a};m.fb=function(a){return null!=a?(a.push(this.N),a):[this.N]};m.qd=ba("Ya");function Td(a){var b=!1;a.value instanceof Ad||(b="array"==ea(a.value)?!a.value.some(function(a){return a instanceof Ad}):!0);if(!b)throw new E(501);}
m.eval=function(a){Td(this);if("in"==this.F)return Ud(this,a);var b=a.entries.filter(function(a){return this.sc(I(a,this.N),this.value)!=this.Ya},this);return new G(b,H(a))};m.bind=function(a){if(this.$b instanceof Ad){var b=this.$b.xa();if(a.length<=b)throw new E(510);this.value=a[b]}else"array"==ea(this.$b)&&(this.value=this.$b.map(function(b){if(b instanceof Ad){var d=b.xa();if(a.length<=d)throw new E(510);return a[b.xa()]}return b}))};
function Ud(a,b){var c=C(a.value),d=function(a){return null===a?!1:c.has(a)!=this.Ya}.bind(a),e=b.entries.filter(function(a){return d(I(a,this.N))},a);return new G(e,H(b))}m.toString=function(){return"value_pred("+this.N.m()+" "+this.F+(this.Ya?"(complement)":"")+" "+this.value+")"};function Vd(a){this.ca=a;this.Xc=this.Ba=null}function Wd(a,b){null===a.Ba&&null!=a.s&&(a.Ba=Xd(a.s));return a.Ba.get(b)||null}function Xd(a){var b=A();Pd(a,function(a){b.set(a.V(),a)});return b}function Yd(a,b){b.s&&(a.s=b.s.Ib());a.Xc=b}Vd.prototype.bind=function(){return this};function Zd(a,b){var c=a.s;null!=c&&Pd(c,function(a){a instanceof Sd&&a.bind(b)})};function $d(a){Vd.call(this,a)}t($d,Vd);function ae(a){var b="";a.forEach(function(c,d){b+=c.N.m()+" ";b+=1==c.jb?"ASC":"DESC";d<a.length-1&&(b+=", ")});return b}$d.prototype.ba=function(){return C(this.b)};$d.prototype.clone=function(){var a=new $d(this.ca);Yd(a,this);this.f&&(a.f=this.f.slice());this.b&&(a.b=this.b.slice());a.W=this.W;a.K=this.K;this.M&&(a.M=this.M.slice());this.ja&&(a.ja=this.ja.slice());this.Ob&&(a.Ob=this.Ob);this.Vb&&(a.Vb=this.Vb);a.wb=this.wb;return a};
$d.prototype.bind=function(a){$d.Gb.bind.call(this,a);null!=this.Ob&&(this.W=a[this.Ob.xa()]);null!=this.Vb&&(this.K=a[this.Vb.xa()]);Zd(this,a);return this};function be(a,b){this.Ca=a;this.$=b}be.prototype.gb=g("Ca");be.prototype.ba=g("$");function ce(a){var b=C();a.forEach(function(a){a.ba().forEach(b.add.bind(b))});return b};function de(a,b){this.global=a;this.Ja=a.j(gc);this.nd=b.map(function(a){return a.context});this.$e=b.map(function(a){return a.ce});this.Dd=ce(this.$e);this.oe=ee(this);this.$a=x()}function ee(a){return a.nd.some(function(a){return!(a instanceof $d)})?1:0}m=de.prototype;
m.exec=function(){function a(){var f=d.shift();if(f){var h=e[c.length];return f.gb().exec(b,h).then(function(b){c.push(b[0]);return a()})}return w()}var b=0==this.oe?void 0:new bd(this.global,this.Dd),c=[],d=this.$e.slice(),e=this.nd;return a().then(function(){return this.Ja.zb(this.oe,D(this.Dd),b).ia()}.bind(this)).then(function(){this.$d(c);return c}.bind(this),function(a){null!=b&&b.Fb();throw a;})};m.H=g("oe");m.ba=g("Dd");m.Kb=g("$a");m.V=function(){return ka(this)};m.$d=aa();function fe(a,b){de.call(this,a,b);this.Eb=a.j(lc)}t(fe,de);fe.prototype.getPriority=l(0);fe.prototype.$d=function(a){this.nd.forEach(function(b,c){ge(this.Eb,b,a[c])},this)};function he(a,b){this.h=a;this.Eb=a.j(lc);this.Da=a.j(kc);this.gd=new yc(a);this.pb=b;var c=a.j(mc),d=this.pb.map(function(a){return c.table(a.getName())});this.$=C(d);this.$a=x()}m=he.prototype;m.exec=function(){this.gd.update(this.pb);this.Lc();return w()};m.H=l(1);m.ba=g("$");m.Kb=g("$a");m.V=function(){return ka(this)};m.getPriority=l(1);m.Lc=function(){var a=ie(this.Eb,this.$);0!=a.length&&(a=new fe(this.h,a),je(this.Da,a))};function ke(a){this.h=a;this.Ja=a.j(gc);this.Da=a.j(kc)}ke.prototype.Yd=function(a){a=new he(this.h,a);je(this.Da,a)};function M(a,b){this.Xb=a;this.l=b;this.Sa=A()}r("lf.backstore.FirebaseRawBackStore",M);M.prototype.cd=g("l");M.prototype.dd=function(){throw new E(351);};function le(a,b){var c=x(),d=a;b.length&&(d=a.child(b));d.once("value",function(a){c.resolve(a.val())},function(a){c.reject(a)});return c.ha}function me(a,b,c){function d(a){a?e.reject(a):e.resolve()}c=c||!1;var e=x();c?a.set(b,d):a.update(b,d);return e.ha}
M.prototype.Fa=function(a){return le(this.l,"@rev/R").then(function(a){this.La=a;return le(this.l,"@table")}.bind(this)).then(function(b){var c=0,d;for(d in b)this.Sa.set(d,b[d]),b[d]>c&&(c=b[d]);a.ra().forEach(function(a){this.Sa.has(a.getName())||(b[a.getName()]=++c)},this);d=this.l.child("@table");return me(d,b)}.bind(this))};
function ne(a,b,c){var d=a.Sa.get(b);return null!=d?function(){var a={},b=x();this.l.orderByChild("T").equalTo(d).once("value",function(d){d.forEach(function(b){var d=c(b.val());a[parseInt(b.key(),10)]=d});b.resolve(a)});return b.ha}.call(a).then(function(a){a["@rev"]={R:++this.La};return me(this.l,a)}.bind(a)):w()}M.prototype.qc=function(a){return ne(this,a,l(null)).then(function(){this.Sa.delete(a);return me(this.l.child("@table/"+a),null,!0)}.bind(this))};M.prototype.dropTable=M.prototype.qc;
M.prototype.lc=function(a,b,c){return ne(this,a,function(a){var e=a.P;e[b]=c;return{R:this.La+1,T:a.T,P:e}}.bind(this))};M.prototype.addTableColumn=M.prototype.lc;M.prototype.rc=function(a,b){return ne(this,a,function(a){var d=a.P;delete d[b];return{R:this.La+1,T:a.T,P:d}}.bind(this))};M.prototype.dropTableColumn=M.prototype.rc;M.prototype.Kc=function(a,b,c){return ne(this,a,function(a){var e=a.P;e[c]=e[b];delete e[b];return{R:this.La+1,T:a.T,P:e}}.bind(this))};M.prototype.renameTableColumn=M.prototype.Kc;
M.prototype.rb=function(){throw new E(351);};M.prototype.createRow=M.prototype.rb;M.prototype.Ac=g("Xb");M.prototype.getVersion=M.prototype.Ac;M.prototype.bc=function(a){var b=x();a=this.Sa.get(a);this.l.orderByChild("T").equalTo(a).once("value",function(a){var d=[];a.forEach(function(a){d.push(a.val().P)});b.resolve(d)});return b.ha};M.prototype.dump=function(){var a={},b=Xb(this.Sa).map(function(b){return this.bc(b).then(function(d){a[b]=d})}.bind(this));return db(b).then(function(){return a})};
M.prototype.dump=M.prototype.dump;function oe(a,b,c){Zb.call(this,b,c);this.l=a}t(oe,Zb);oe.prototype.G=function(a){return this.l.yc(a)};
oe.prototype.nc=function(){var a=this.Oa.pb;if(0==a.size)this.Y.resolve();else{var b=this.l.La+1;this.l.La=b;var c={"@rev":{R:b}};a.forEach(function(a,e){var f=this.l.Sa.get(e);a.ta.forEach(function(a,d){c[d]={R:b,T:f,P:a.o}});a.na.forEach(function(a,d){c[d]={R:b,T:f,P:a[1].o}});a.wa.forEach(function(a,b){c[b]=null})},this);this.l.l.update(c,function(c){null===c?this.Y.resolve():(this.l.La=b-1,c=B(a).map(function(a){return pe(this.l,a.getName())},this),db(c).then(this.Y.reject.bind(this.Y),this.Y.reject.bind(this.Y)))}.bind(this))}return this.Y.ha};function qe(){this.va=A()}function re(a,b){if(0==b.length)return B(a.va);var c=[];b.forEach(function(a){a=this.va.get(a)||null;null===a||c.push(a)},a);return c}qe.prototype.getData=g("va");qe.prototype.get=function(a){return w(re(this,a))};function se(a,b){b.forEach(function(a){this.va.set(a.id(),a)},a)}qe.prototype.put=function(a){se(this,a);return w()};function te(a,b){0==b.length||b.length==a.va.size?a.va.clear():b.forEach(function(a){this.va.delete(a)},a)}
qe.prototype.remove=function(a){te(this,a);return w()};function ue(a){return 0==a.va.size?0:Xb(a.va).reduce(function(a,c){return a>c?a:c},0)};function ve(a,b){this.i=a;this.wf=b;this.Jc=A();this.La=-1;this.L=A();this.Sa=A();this.Ad=null}m=ve.prototype;
m.Fa=function(a){this.l=this.wf.child(this.i.name());var b=a||function(){return w()};return le(this.l,"@db/version").then(function(a){return null===a?me(this.l,we(this),!0).then(function(){var a=new M(0,this.l);return b(a)}.bind(this)):a==this.i.version()?le(this.l,"@rev/R").then(function(a){this.La=a;return le(this.l,"@table")}.bind(this)).then(function(a){for(var b in a)this.Sa.set(b,a[b]);a=this.i.ra().map(function(a){return pe(this,a.getName())},this);return db(a)}.bind(this)).then(function(){xe(this);
ye(this);return w()}.bind(this)):this.ae(a,b).then(function(){return this.Fa()}.bind(this))}.bind(this))};m.ae=function(a,b){var c=new M(a,this.l);return c.Fa(this.i).then(function(){return w()}.bind(this)).then(function(){return b(c)}).then(function(){var a=this.l.child("@db");return me(a,{version:this.i.version()},!0)}.bind(this))};
function ye(a){a.l.off();a.l.on("child_removed",a.kg.bind(a));a.Bd&&(a.Bd.off(),a.Jc.clear());a.Bd=a.l.orderByChild("R").startAt(a.La+1);a.Bd.on("value",a.Yd.bind(a))}function xe(a){ob=B(a.L).map(function(a){return ue(a)}).reduce(function(a,c){return a>c?a:c},0)+1}m.kg=function(a){var b=a.val(),c=this.Jc.get(b.T)||null;null===c&&(c=C(),this.Jc.set(b.T,c));c.add(parseInt(a.key(),10))};
m.Yd=function(a){var b=a.child("@rev/R").val();null!=b&&b!=this.La&&(this.La=b,a=ze(this,a),a.forEach(function(a){var b=this.L.get(a.getName()),e=Xb(a.wa);0<e.length&&te(b,e);var f=B(a.ta);a.na.forEach(function(a){f.push(a[1])});se(b,f)},this),0<a.length&&this.Fc(a),ye(this))};
function ze(a,b){var c=C(),d=A();a.Sa.forEach(function(a,b){var h=this.L.get(b),k=new $c(b);if(this.Jc.has(a)){var n=D(this.Jc.get(a));n.forEach(function(a){c.add(a)});re(h,n).forEach(function(a){k.delete(a)})}d.set(a,k)}.bind(a));b.forEach(function(a){if("@rev"!=a.key()){var b=parseInt(a.key(),10);if(!c.has(b)){a=a.val();var h=d.get(a.T),k=this.L.get(h.getName());k.getData().has(b)?h.modify([re(k,[b])[0],new y(b,a.P)]):h.add(new y(b,a.P))}}}.bind(a));return B(d).filter(function(a){return!a.Zf()})}
function pe(a,b){var c=x(),d=a.Sa.get(b);a.l.orderByChild("T").equalTo(d).once("value",function(a){var d=new qe,h=[];a.forEach(function(a){h.push(new y(parseInt(a.key(),10),a.val().P))});se(d,h);this.L.set(b,d);c.resolve()}.bind(a));return c.ha}function we(a){var b={};b["@db"]={version:a.i.version()};b["@rev"]={R:1};a.La=1;b["@table"]={};a.i.ra().forEach(function(a,d){var e=a.getName();b["@table"][e]=d;this.L.set(e,new qe);this.Sa.set(e,d)},a);return b}m.zb=function(a,b,c){return new oe(this,a,c)};
m.yc=function(a){var b=this.L.get(a)||null;if(null!==b)return b;throw new E(101,a);};m.close=aa();m.subscribe=ba("Ad");m.Fc=function(a){null!=this.Ad&&this.Ad(a)};function N(a,b,c,d){this.l=b;this.Ua=c;this.Xb=a;this.Uc=d}r("lf.backstore.IndexedDBRawBackStore",N);N.prototype.cd=g("l");N.prototype.getRawDBInstance=N.prototype.cd;N.prototype.dd=g("Ua");N.prototype.getRawTransaction=N.prototype.dd;N.prototype.qc=function(a){return new v(function(b,c){try{this.l.deleteObjectStore(a)}catch(d){c(d);return}b()},this)};N.prototype.dropTable=N.prototype.qc;
function Ae(a,b,c,d){return new v(function(a,f){var h;try{var k=this.Ua.objectStore(b);h=k.openCursor()}catch(n){f(n);return}h.onsuccess=function(){var b=h.result;b?(c(b),b.continue()):(d(k),a())};h.onerror=f},a)}function Be(a){var b=null;return b=a instanceof ArrayBuffer?sb(a):a instanceof Date?a.getTime():a}
function Ce(a,b,c){function d(a){var b=sc(a.value),d=b.o,e;for(e in d){var z=qb(d[e]);c(z);d[e]=z.Ea()}a.update(b.Ea())}function e(a){var b=qb(a.value);c(b);a.update(b.Ea())}return Ae(a,b,a.Uc?d:e,aa())}N.prototype.lc=function(a,b,c){var d=Be(c);return Ce(this,a,function(a){a.o[b]=d})};N.prototype.addTableColumn=N.prototype.lc;N.prototype.rc=function(a,b){return Ce(this,a,function(a){delete a.o[b]})};N.prototype.dropTableColumn=N.prototype.rc;
N.prototype.Kc=function(a,b,c){return Ce(this,a,function(a){a.o[c]=a.o[b];delete a.o[b]})};N.prototype.renameTableColumn=N.prototype.Kc;function De(a,b){var c=[];return new v(function(a,e){var f;try{f=this.Ua.objectStore(b).openCursor()}catch(h){e(h);return}f.onsuccess=function(){var b=f.result;if(b){if(this.Uc){var e;e=sc(b.value).o;for(var n in e)c.push(e[n])}else c.push(b.value);b.continue()}else a(c)}.bind(this);f.onerror=e},a)}N.prototype.rb=function(a){var b={},c;for(c in a)b[c]=Be(a[c]);return rb(b)};
N.prototype.createRow=N.prototype.rb;N.prototype.Ac=g("Xb");N.prototype.getVersion=N.prototype.Ac;N.prototype.dump=function(){for(var a=this.l.objectStoreNames,b=[],c=0;c<a.length;++c){var d=a.item(c);b.push(this.bc(d))}return db(b).then(function(b){var c={};b.forEach(function(b,d){c[a.item(d)]=b});return c})};N.prototype.dump=N.prototype.dump;N.prototype.bc=function(a){return De(this,a).then(function(a){return a.map(function(a){return a.value})})};function Ee(a,b){this.aa=a;this.Jb=b}m=Ee.prototype;m.get=function(a){if(0==a.length)return this.wc();a=a.map(function(a){return new v(function(c,d){var e;try{e=this.aa.get(a)}catch(f){d(f);return}e.onerror=d;e.onsuccess=function(a){c(this.Jb(a.target.result))}.bind(this)},this)},this);return db(a)};
m.wc=function(){return new v(function(a,b){var c=[],d;try{d=this.aa.openCursor()}catch(e){b(e);return}d.onerror=b;d.onsuccess=function(){var b=d.result;b?(c.push(this.Jb(b.value)),b.continue()):a(c)}.bind(this)},this)};m.Qb=function(a){return new v(function(b,c){var d;try{d=a()}catch(e){c(e);return}d.onsuccess=b;d.onerror=c},this)};m.put=function(a){if(0==a.length)return w();a=a.map(function(a){return this.Qb(function(){return this.aa.put(a.Ea())}.bind(this))},this);return db(a)};
m.remove=function(a){return new v(function(b,c){var d=this.aa.count();d.onsuccess=function(d){if(0==a.length||d.target.result==a.length)return this.Qb(function(){return this.aa.clear()}.bind(this)).then(b,c);d=a.map(function(a){return this.Qb(function(){return this.aa.delete(a)}.bind(this))},this);db(d).then(b,c)}.bind(this);d.onerror=c},this)};function Fe(a,b,c,d,e){Zb.call(this,c,e);this.h=a;this.Ua=b;this.Uc=d;this.Ua.oncomplete=this.Y.resolve.bind(this.Y);this.Ua.onabort=this.Y.reject.bind(this.Y)}t(Fe,Zb);Fe.prototype.G=function(a,b,c){return this.Uc?(c=null!=c?c:0,a=this.Ua.objectStore(a),new tc(a,b,0==c?qa(vc,this.h):wc)):new Ee(this.Ua.objectStore(a),b)};Fe.prototype.nc=function(){return this.Y.ha};function Ge(a,b){this.h=a;this.i=b;this.Vc=b.af().Jf||!1}m=Ge.prototype;
m.Fa=function(a){var b=window.indexedDB||window.mozIndexedDB||window.webkitIndexedDB||window.msIndexedDB;if(null==b)throw new E(352);var c=a||function(){return w()};return new v(function(a,e){var f;try{f=b.open(this.i.name(),this.i.version())}catch(h){e(h);return}f.onerror=e;f.onupgradeneeded=function(a){He(this,c,a).then(aa(),e)}.bind(this);f.onsuccess=function(b){this.l=b.target.result;this.ie().then(function(b){ob=b+1;a(this.l)}.bind(this))}.bind(this)},this)};
function He(a,b,c){var d=c.target.result,e=c.target.transaction;c=new N(c.oldVersion,d,e,a.Vc);Ie(d);a.i.ra().forEach(qa(a.Ef,d,e),a);return b(c)}function Ie(a){for(var b=[],c=0;c<a.objectStoreNames.length;++c){var d=a.objectStoreNames.item(c);-1!=d.indexOf(".")&&b.push(d)}b.forEach(function(b){try{a.deleteObjectStore(b)}catch(c){}})}
m.Ef=function(a,b,c){a.objectStoreNames.contains(c.getName())||a.createObjectStore(c.getName(),{keyPath:"id"});c.xb()&&(c.ya().forEach(function(c){this.pc(a,b,c.m(),"btree")},this),this.pc(a,b,Je(c),"rowid"))};m.pc=function(a,b,c,d){a.objectStoreNames.contains(c)||(a.createObjectStore(c,{keyPath:"id"}),a=b.objectStore(c),(this.Vc?new tc(a,qb,wc):new Ee(a,qb)).put([new ub(new tb(d))]))};m.zb=function(a,b,c){b=this.l.transaction(Ke(b),0==a?"readonly":"readwrite");return new Fe(this.h,b,a,this.Vc,c)};
function Ke(a){var b=C();a.forEach(function(a){b.add(a.getName());a.xb()&&(a.ya().forEach(function(a){b.add(a.m())}),b.add(Je(a)))});return D(b)}
m.ie=function(a){function b(){if(0==d.length)return w();var a=d.shift();return c(a).then(b)}function c(b){return new v(function(c,d){var O;try{O=(a||e.transaction([b])).objectStore(b).openCursor(null,"prev")}catch(ca){d(ca);return}O.onsuccess=function(a){(a=a.target.result)&&(f=Math.max(f,h(a)));c(f)};O.onerror=function(){c(f)}})}var d=this.i.ra().map(function(a){return a.getName()}),e=this.l,f=0,h=function(a){return this.Vc?(a=sc(a.value),Object.keys(a.o).reduce(function(a,b){return Math.max(a,b)},
0)):a.key}.bind(this);return new v(function(a){b().then(function(){a(f)})})};m.close=function(){this.l.close()};m.yc=function(){throw new E(511);};m.subscribe=aa();m.Fc=aa();function Le(a,b,c){Zb.call(this,b,c);this.aa=a;0==b&&this.Y.resolve()}t(Le,Zb);Le.prototype.G=function(a){return this.aa.yc(a)};Le.prototype.nc=function(){this.Y.resolve();return this.Y.ha};function Me(a){this.i=a;this.L=A()}m=Me.prototype;m.Fa=function(){this.i.ra().forEach(this.Wf,this);return w()};m.yc=function(a){var b=this.L.get(a)||null;if(null===b)throw new E(101,a);return b};m.zb=function(a,b,c){return new Le(this,a,c)};function Ne(a,b){if(!a.L.has(b)){var c=new qe;a.L.set(b,c);return c}return null}m.Wf=function(a){Ne(this,a.getName());a.xb()&&(a.ya().forEach(function(a){this.pc(a.m(),"btree")},this),this.pc(Je(a),"rowid"))};m.pc=function(a,b){var c=Ne(this,a);null===c||c.put([new ub(new tb(b))])};
m.close=aa();m.subscribe=aa();m.Fc=aa();function Oe(a){Me.call(this,a);this.jd=null}t(Oe,Me);Oe.prototype.subscribe=function(a){null===this.jd&&(this.jd=a)};Oe.prototype.Fc=function(a){null===this.jd||this.jd(a)};function Pe(a,b,c){this.Ua=a;this.u=b;this.Jb=c}Pe.prototype.get=function(a){var b=this.Jb;return Qe(this.Ua,"SELECT id, value FROM "+this.u+" "+(0==a.length?"":"WHERE id IN ("+a.join(",")+")"),[],function(a){for(var d=a.rows.length,e=Array(d),f=0;f<d;++f)e[f]=b({id:a.rows.item(f).id,value:JSON.parse(a.rows.item(f).value)});return e})};
Pe.prototype.put=function(a){if(0==a.length)return w();var b="INSERT OR REPLACE INTO "+this.u+"(id, value) VALUES (?, ?)";a.forEach(function(a){Qe(this.Ua,b,[a.id(),JSON.stringify(a.o)])},this);return w()};Pe.prototype.remove=function(a){Qe(this.Ua,"DELETE FROM "+this.u+" "+(0==a.length?"":"WHERE id IN ("+a.join(",")+")"),[]);return w()};function Re(a,b,c){Zb.call(this,b,c);this.l=a;this.L=A();this.Ed=[]}t(Re,Zb);function Se(a){return a.replace(".","__d__").replace("#","__s__")}Re.prototype.G=function(a,b){var c=this.L.get(a)||null;null===c&&(c=new Pe(this,Se(a),b),this.L.set(a,c));return c};function Qe(a,b,c,d){var e=x();a.Ed.push({zg:b,og:c,transform:d,Y:e});return e.ha}
Re.prototype.nc=function(){var a=null,b=this.Y.reject.bind(this.Y),c=function(a,b){this.Y.reject(b)}.bind(this),d=[],e=function(b,h){if(null!==a){var k=h;null!=a.transform&&null!=h&&(k=a.transform(h));d.push(k);a.Y.resolve(k)}0<this.Ed.length?(a=k=this.Ed.shift(),b.executeSql(k.zg,k.og,e,c)):this.Y.resolve(d)}.bind(this);0==this.qf?this.l.readTransaction(e,b):this.l.transaction(e,b);return this.Y.ha};function P(a,b,c){this.l=c;this.h=a;this.Xb=b}r("lf.backstore.WebSqlRawBackStore",P);P.prototype.cd=g("l");P.prototype.getRawDBInstance=P.prototype.cd;P.prototype.dd=function(){throw new E(356);};P.prototype.getRawTransaction=P.prototype.dd;function Te(a){return new Re(a.l,1,new bd(a.h,C()))}P.prototype.qc=function(a){var b=Te(this);Qe(b,"DROP TABLE "+a,[]);return b.ia()};P.prototype.dropTable=P.prototype.qc;
P.prototype.bc=function(a){var b=Te(this);Qe(b,"SELECT id, value FROM "+a,[]);return b.ia().then(function(a){for(var b=a[0].rows.length,e=Array(b),f=0;f<b;++f)e[f]={id:a[0].rows.item(f).id,value:JSON.parse(a[0].rows.item(f).value)};return w(e)})};function Ue(a,b,c){var d=Te(a),e="UPDATE "+b+" SET value=? WHERE id=?";return a.bc(b).then(function(a){a.forEach(function(a){a=c(a);Qe(d,e,[JSON.stringify(a.value),a.id])});return d.ia()})}
P.prototype.lc=function(a,b,c){var d=Be(c);return Ue(this,a,function(a){a.value[b]=d;return a})};P.prototype.addTableColumn=P.prototype.lc;P.prototype.rc=function(a,b){return Ue(this,a,function(a){delete a.value[b];return a})};P.prototype.dropTableColumn=P.prototype.rc;P.prototype.Kc=function(a,b,c){return Ue(this,a,function(a){a.value[c]=a.value[b];delete a.value[b];return a})};P.prototype.renameTableColumn=P.prototype.Kc;P.prototype.rb=function(a){var b={},c;for(c in a)b[c]=Be(a[c]);return rb(b)};
P.prototype.createRow=P.prototype.rb;P.prototype.Ac=g("Xb");P.prototype.getVersion=P.prototype.Ac;function Ve(a){Qe(a,'SELECT tbl_name FROM sqlite_master WHERE type="table"',[],function(a){for(var c=Array(a.rows.length),d=0;d<c.length;++d)c[d]=a.rows.item(d).tbl_name;return c})}
P.prototype.dump=function(){var a=x(),b=Te(this);Ve(b);var c={};b.ia().then(function(b){b=b[0].filter(function(a){return"__lf_ver"!=a&&"__WebKitDatabaseInfoTable__"!=a}).map(function(a){return this.bc(a).then(function(b){c[a]=b})},this);db(b).then(function(){a.resolve(c)})}.bind(this));return a.ha};P.prototype.dump=P.prototype.dump;function We(a,b,c){this.h=a;this.i=b;this.yg=c||4194304}m=We.prototype;m.Fa=function(a){if(null==window.openDatabase)throw new E(353);var b=a||function(){return w()};return new v(function(a,d){try{var e=window.openDatabase(this.i.name(),"",this.i.name(),this.yg);if(null!=e)this.l=e,Xe(this,b).then(a,d);else throw new E(354);}catch(f){d(f)}},this)};
function Xe(a,b){var c=x(),d=new Re(a.l,1,new bd(a.h,C()));Qe(d,"CREATE TABLE IF NOT EXISTS __lf_ver(id INTEGER PRIMARY KEY, v INTEGER)",[]);Qe(d,"SELECT v FROM __lf_ver WHERE id = 0",[]);d.ia().then(function(a){var d=0;a[1].rows.length&&(d=a[1].rows.item(0).v);d<this.i.version()?this.ae(b,d).then(c.resolve.bind(c)):d>this.i.version()?c.reject(new E(108)):c.resolve()}.bind(a));return c.ha}m.zb=function(a,b,c){if(null!=this.l)return new Re(this.l,a,c);throw new E(2);};m.close=aa();
m.yc=function(){throw new E(512);};m.subscribe=function(){throw new E(355);};m.Fc=function(){throw new E(355);};m.ae=function(a,b){var c=x();Ye(this).then(function(){a(new P(this.h,b,this.l)).then(function(){return this.ie()}.bind(this)).then(c.resolve.bind(c))}.bind(this),c.reject.bind(c));return c.ha};
function Ye(a){var b=a.i.ra(),c=new Re(a.l,1,new bd(a.h,C())),d=new Re(a.l,1,new bd(a.h,C()));Qe(c,"INSERT OR REPLACE INTO __lf_ver VALUES (0, ?)",[a.i.version()]);Ve(c);return c.ia().then(function(a){function c(a,b){Qe(d,"INSERT INTO "+a+"(id, value) VALUES(?, ?)",[-1,JSON.stringify(pb(new ub(new tb(b))))])}var h=a[1];h.filter(function(a){return-1!=a.indexOf("__d__")}).forEach(function(a){Qe(d,"DROP TABLE "+a,[])});var k=[],n=[],z=[];b.map(function(a){-1==h.indexOf(a.getName())&&k.push(a.getName());
a.xb&&(a.ya().forEach(function(a){a=Se(a.m());k.push(a);n.push(a)}),a=Se(Je(a)),k.push(a),z.push(a))});k.forEach(function(a){Qe(d,"CREATE TABLE "+a+"(id INTEGER PRIMARY KEY, value TEXT)",[])});n.forEach(function(a){c(a,"btree")});z.forEach(function(a){c(a,"rowid")});return d.ia()})}
m.ie=function(){var a=0,b=x(),c=function(b){var c=new Re(this.l,0);Qe(c,"SELECT MAX(id) FROM "+b,[]);return c.ia().then(function(b){b=b[0].rows.item(0)[0];a=Math.max(b,a)})}.bind(this),d=this.i.ra().map(function(a){return c(a.getName())});db(d).then(function(){b.resolve(a)},function(a){b.reject(a)});return b.ha};function Ze(a){this.X=A();this.Wb=A();a.ra().forEach(function(a){this.Wb.set(a.getName(),C())},this)}m=Ze.prototype;m.set=function(a,b){this.X.set(b.id(),b);this.Wb.get(a).add(b.id())};m.Tb=function(a,b){var c=this.Wb.get(a);b.forEach(function(a){this.X.set(a.id(),a);c.add(a.id())},this)};m.get=function(a){return this.X.get(a)||null};function $e(a,b){return b.map(function(a){return this.get(a)},a)}
m.Xa=function(a,b,c){var d=[],e=Math.min(b,c),f=Math.max(b,c);a=this.Wb.get(a);if(a.size<f-e)a.forEach(function(a){a>=e&&a<=f&&(a=this.X.get(a),d.push(a))},this);else for(b=e;b<=f;++b)a.has(b)&&(c=this.X.get(b),d.push(c));return d};m.remove=function(a,b){this.X.delete(b);this.Wb.get(a).delete(b)};m.Hg=function(a){return null!=a?this.Wb.get(a).size:this.X.size};m.clear=function(){this.X.clear();this.Wb.clear()};function af(a,b,c){var d=0,e=a.length;for(c=c||bf;d<e;){var f=d+e>>1;0>c(a[f],b)?d=f+1:e=f}return d==e&&a[d]==b?d:~d}function bf(a,b){return a-b}function cf(a,b,c){c=af(a,b,c);return 0>c?(a.splice(-(c+1),0,b),!0):!1};function df(a,b,c,d){a=b?a.reverse():a;if(null==c&&null==d)return a;c=Math.min(q(c)?c:a.length,a.length);if(0==c)return[];d=Math.min(d||0,a.length);return a.slice(d,d+c)};function ef(){this.oa=0}ef.prototype.add=function(a,b){this.oa+=b};ef.prototype.remove=function(a,b){this.oa-=b};ef.prototype.clear=function(){this.oa=0};function ff(a,b){a.clear();b.forEach(function(a){this.oa+=a.oa},a)};function gf(a,b,c,d){this.u=a;this.U=b;this.pe=c;this.nb=new ef;if(d){a=511;a*=a*a;if(d.length>=a)throw new E(6,a);d=hf(this,d);this.qa=d=jf(d)}else this.clear()}var kf=[];m=gf.prototype;m.getName=g("u");m.toString=function(){return this.qa.toString()};m.add=function(a,b){this.qa=this.qa.vb(a,b)};m.set=function(a,b){this.qa=this.qa.vb(a,b,!0)};m.remove=function(a,b){this.qa=this.qa.remove(a,b)};m.get=function(a){return this.qa.get(a)};
m.Yc=function(a){if(null==a)return this.Ma().oa;if(a instanceof gd){if(id(a))return this.Ma().oa;if(md(a))return this.get(a.b).length}return this.Xa([a]).length};m.Ma=g("nb");m.wc=function(a,b,c,d){c=Array(a);this.qa.fill({offset:b?this.nb.oa-a-d:d,count:a,le:0},c);return b?c.reverse():c};
m.Xa=function(a,b,c,d){var e=mf(this.qa).c[0];if(!q(e)||0==c)return kf;b=b||!1;c=null!=c?Math.min(c,this.nb.oa):this.nb.oa;d=d||0;var f=Math.min(Math.max(this.nb.oa-d,0),c);if(0==f)return kf;if(!q(a)||1==a.length&&a[0]instanceof gd&&id(a[0]))return this.wc(f,b,c,d);a=this.U.mf(a);var h=Array(b?this.nb.oa:f),k={count:0,W:h.length,reverse:b,K:d};a.forEach(function(a){for(var b=this.U.od(a),b=this.U.Qd(a)?e:b[0],b=nf(this.qa,b),c=k.count,d=0;null!=b&&k.count<k.W;)b.Xa(a,k,h),k.count!=c||0<k.K?(d=0,c=
k.count):d++,b=2==d?null:b.next()},this);h.length>k.count&&h.splice(k.count,h.length-k.count);return b?df(h,b,c,d):h};m.clear=function(){this.qa=of(this);this.nb.clear()};m.eb=function(a){return this.qa.eb(a)};m.min=function(){return this.Ec(this.U.min.bind(this.U))};m.max=function(){return this.Ec(this.U.max.bind(this.U))};
m.Ec=function(a){var b=mf(this.qa),c=pf(this.qa);if(0==b.c.length&&0==c.c.length)return null;var d=b.c[0],b=b.A[0],e=c.c[c.c.length-1],c=c.A[c.c.length-1];return 1==a(d,e)?[d,this.pe?[b]:b]:[e,this.pe?[c]:c]};m.Ha=g("pe");m.oc=g("U");m.Ud=function(a,b){return null!=a?-1==this.U.compare(a,b):!1};m.Na=function(a,b){return null!=a?0==this.U.compare(a,b):!1};m.Ea=function(){for(var a=[],b=mf(this.qa);b;)a.push(new y(b.pa,[b.c,b.A])),b=b.za;return a};
function qf(a,b,c,d){a=new gf(b,a,c);d=rf(d,a);a.qa=d;return a}function sf(a,b){this.pa=a;this.D=b;this.hb=0;this.za=this.yb=this.B=null;this.c=[];this.A=[];this.g=[]}function of(a){return new sf(ob++,a)}function Q(a){return 0==a.hb}m=sf.prototype;m.next=g("za");
function tf(a){function b(a){return null!=a?a.pa.toString():"_"}var c=a.pa+"["+a.c.join("|")+"]",d=a.g.map(function(a){return a.pa}).join("|"),e=a.A.join("/"),f=b(a.yb)+"{",f=Q(a)?f+e:f+d,f=f+"}"+b(a.B);a.za&&(a=tf(a.za),c=c+"  "+a[0],f=f+"  "+a[1]);return[c,f]}m.toString=function(){var a="",b=tf(this),a=a+(b[0]+"\n"+b[1]+"\n");this.g.length&&(a+=this.g[0].toString());return a};function mf(a){return Q(a)?a:mf(a.g[0])}function pf(a){return Q(a)?a:pf(a.g[a.g.length-1])}
function uf(a,b){b&&(b.yb=a);a&&(a.za=b)}function hf(a,b){for(var c=b.length,d=0,e=of(a),f=e;0<c;){var h=768<=c?511:257<=c&&511>=c?c:257,k=b.slice(d,d+h);e.c=k.map(function(a){return a.key});e.A=k.map(function(a){return a.value});d+=h;c-=h;0<c&&(h=of(e.D),uf(e,h),e=h)}return f}function vf(a){var b=a[0],c=of(b.D);c.hb=b.hb+1;c.g=a;for(b=0;b<a.length;++b)a[b].B=c,0<b&&c.c.push(a[b].c[0]);return c}
function jf(a){var b=a,c=[];do c.push(b),b=b.za;while(b);if(512>=c.length)b=vf(c);else{var d=c.length,e=0,b=of(a.D);for(b.hb=a.hb+2;0<d;){a=768<=d?511:257<=d&&511>=d?d:257;var f=c.slice(e,e+a),h=vf(f);h.B=b;b.g.length&&(b.c.push(f[0].c[0]),uf(b.g[b.g.length-1],h));b.g.push(h);e+=a;d-=a}}return b}m.get=function(a){var b=wf(this,a);if(Q(this)){var c=kf;this.D.Na(this.c[b],a)&&(c=c.concat(this.A[b]));return c}b=this.D.Na(this.c[b],a)?b+1:b;return this.g[b].get(a)};
m.eb=function(a){var b=wf(this,a);return this.D.Na(this.c[b],a)?!0:Q(this)?!1:this.g[b].eb(a)};m.remove=function(a,b){xf(this,a,-1,b);if(null==this.B){var c=this;1==this.g.length&&(c=this.g[0],c.B=null);return c}return this};function yf(a){return Q(a)?a.c[0]:yf(a.g[0])}function zf(a){a.c=[];for(var b=1;b<a.g.length;++b)a.c.push(yf(a.g[b]))}
function xf(a,b,c,d){var e=wf(a,b),f=Q(a);if(!f){var h=a.D.Na(a.c[e],b)?e+1:e;if(xf(a.g[h],b,h,d))zf(a);else return!1}else if(!a.D.Na(a.c[e],b))return!1;if(a.c.length>e&&a.D.Na(a.c[e],b)){if(q(d)&&!a.D.Ha()&&f&&(h=a.A[e],d=af(h,d,void 0),0>d?d=!1:(h.splice(d,1),d=!0),d&&a.D.Ma().remove(b,1),a.A[e].length))return!1;a.c.splice(e,1);f&&(f=a.D.Ha()?1:a.A[e].length,a.A.splice(e,1),a.D.Ma().remove(b,f))}if(256>a.c.length&&null!=a.B){a:{b=null;if(a.za&&256<a.za.c.length)b=a.za,e=d=0,f=a.c.length+1;else if(a.yb&&
256<a.yb.c.length)b=a.yb,d=a.yb.c.length-1,e=Q(a)?d:d+1,f=0;else{b=!1;break a}a.c.splice(f,0,b.c[d]);b.c.splice(d,1);d=Q(a)?a.A:a.g;h=null;Q(a)?h=b.A:(h=b.g,h[e].B=a);d.splice(f,0,h[e]);h.splice(e,1);Q(b)||(zf(b),zf(a));b=!0}b||Af(a,c)}return!0}
function Af(a,b){var c,d,e;a.za&&511>a.za.c.length?(c=a.za,e=d=0):a.yb&&(c=a.yb,d=c.c.length,e=Q(c)?c.A.length:c.g.length);d=[d,0].concat(a.c);Array.prototype.splice.apply(c.c,d);d=null;Q(a)?d=a.A:(d=a.g,d.forEach(function(a){a.B=c}));d=[e,0].concat(d);Array.prototype.splice.apply(Q(c)?c.A:c.g,d);uf(a.yb,a.za);Q(c)||zf(c);-1!=b&&(a.B.c.splice(b,1),a.B.g.splice(b,1))}
m.vb=function(a,b,c){var d=wf(this,a);if(Q(this)){if(this.D.Na(this.c[d],a)){if(c)this.D.Ma().remove(a,this.D.Ha()?1:this.A[d].length),this.A[d]=this.D.Ha()?b:[b];else{if(this.D.Ha())throw new E(201);if(!cf(this.A[d],b))throw new E(109);}this.D.Ma().add(a,1);return this}this.c.splice(d,0,a);this.A.splice(d,0,this.D.Ha()?b:[b]);this.D.Ma().add(a,1);512==this.c.length?(d=of(this.D),a=of(this.D),a.hb=1,a.c=[this.c[256]],a.g=[this,d],a.B=this.B,this.B=a,d.c=this.c.splice(256),d.A=this.A.splice(256),d.B=
a,uf(d,this.za),uf(this,d),d=a):d=this;return d}d=this.D.Na(this.c[d],a)?d+1:d;a=this.g[d].vb(a,b,c);Q(a)||1!=a.c.length||(this.c.splice(d,0,a.c[0]),a.g[1].B=this,a.g[0].B=this,this.g.splice(d,1,a.g[1]),this.g.splice(d,0,a.g[0]));return 512==this.c.length?Bf(this):this};function Bf(a){var b=of(a.D),c=of(a.D);b.B=a.B;b.hb=a.hb+1;b.c=[a.c[256]];b.g=[a,c];a.c.splice(256,1);c.B=b;c.hb=a.hb;c.c=a.c.splice(256);c.g=a.g.splice(257);c.g.forEach(function(a){a.B=c});a.B=b;uf(c,a.za);uf(a,c);return b}
function wf(a,b){for(var c=0,d=a.c.length;c<d;){var e=c+d>>1;a.D.Ud(a.c[e],b)?c=e+1:d=e}return c}function nf(a,b){if(!Q(a)){var c=wf(a,b);a.D.Na(a.c[c],b)&&c++;return nf(a.g[c],b)}return a}
m.Xa=function(a,b,c){function d(a){return a[0]?a[1]?0:1:-1}var e=this.D.oc(),f=0,h=this.c.length-1,k=this.c,n=d(e.qb(k[f],a)),z=d(e.qb(k[h],a));if(1!=n&&(-1!=n||-1!=z)){var O=function(a,b){var c=a+b>>1;return c==a?c+1:c},ca=function(b,c,f){if(b>=c)return 0==f?c:-1;var h=d(e.qb(k[b],a));if(0==h)return b;if(1==h)return-1;h=O(b,c);if(h==c)return 0==f?c:-1;var n=d(e.qb(k[h],a));return 0==n?ca(b,h,n):-1==n?ca(h+1,c,f):ca(b+1,h,n)},vb=function(b,c){if(b>=c)return b;var f=d(e.qb(k[c],a));if(0==f)return c;
if(-1==f)return b;f=O(b,c);if(f==c)return b;var h=d(e.qb(k[f],a));return 0==h?vb(f,c):1==h?vb(b,f-1):-1};0!=n&&(f=ca(f+1,h,z));-1!=f&&(h=vb(f,h),-1!=h&&h>=f&&Cf(this,b,c,f,h+1))}};function Cf(a,b,c,d,e){for(;d<e&&(b.reverse||!(b.count>=b.W));++d)if(a.D.Ha())!b.reverse&&b.K?b.K--:c[b.count++]=a.A[d];else for(var f=0;f<a.A[d].length&&b.count<c.length;++f)!b.reverse&&b.K?b.K--:c[b.count++]=a.A[d][f]}
m.fill=function(a,b){if(Q(this))for(var c=0;c<this.A.length&&0<a.count;++c)if(0<a.offset){if(a.offset-=this.D.Ha()?1:this.A[c].length,0>a.offset)for(var d=this.A[c].length+a.offset;d<this.A[c].length&&0<a.count;++d)b[a.le++]=this.A[c][d],a.count--}else if(this.D.Ha())b[a.le++]=this.A[c],a.count--;else for(d=0;d<this.A[c].length&&0<a.count;++d)b[a.le++]=this.A[c][d],a.count--;else for(c=0;c<this.g.length&&0<a.count;++c)this.g[c].fill(a,b)};
function rf(a,b){for(var c=b.Ma(),d=a.map(function(a){var d=new sf(a.id(),b);d.c=a.o[0];d.A=a.o[1];d.c.forEach(function(a,e){c.add(a,b.Ha()?1:d.A[e].length)});return d}),e=0;e<d.length-1;++e)uf(d[e],d[e+1]);return 1<d.length?jf(d[0]):d[0]};function Df(a){this.Fd=0==a?Ef:Ff;this.Wd=0==a?function(a){return null!=a?a.reverse():null}:function(a){return a||null};this.be=0==a?Gf:Hf}t(Df,xc);function Ff(a,b){return a>b?1:a<b?-1:0}function Ef(a,b){return Ff(b,a)}function Hf(a,b){return nd(a,b)}function Gf(a,b){return nd(b,a)}m=Df.prototype;m.qb=function(a,b){var c=this.Wd(b),d=[c.b==F,c.w==F];if(!d[0]){var e=this.Fd(a,c.b);d[0]=c.da?1==e:-1!=e}d[1]||(e=this.Fd(a,c.w),d[1]=c.ma?-1==e:1!=e);return d};
m.compare=function(a,b){return this.Fd(a,b)};m.min=function(a,b){return a<b?1:a==b?0:-1};m.max=function(a,b){return a>b?1:a==b?0:-1};m.Pd=function(a,b){var c=this.qb(a,b);return c[0]&&c[1]};m.mf=function(a){return a.filter(function(a){return null!==a}).sort(function(a,c){return this.be(a,c)}.bind(this))};m.Qd=function(a){return this.Wd(a).b==F};m.od=function(a){a=this.Wd(a);return[a.b,a.w]};m.toString=function(){return this.compare==Ef?"SimpleComparator_DESC":"SimpleComparator_ASC"};function If(a){this.Ka=a.map(function(a){return new Df(a)})}t(If,xc);function Jf(a,b,c,d){for(var e=0,f=0;f<a.Ka.length&&0==e;++f)e=d(a.Ka[f],b[f],c[f]);return e}m=If.prototype;m.compare=function(a,b){return Jf(this,a,b,function(a,b,e){return b==F||e==F?0:a.compare(b,e)})};m.min=function(a,b){return Jf(this,a,b,function(a,b,e){return a.min(b,e)})};m.max=function(a,b){return Jf(this,a,b,function(a,b,e){return a.max(b,e)})};
m.qb=function(a,b){for(var c=[!0,!0],d=0;d<this.Ka.length&&(c[0]||c[1]);++d){var e=this.Ka[d].qb(a[d],b[d]);c[0]=c[0]&&e[0];c[1]=c[1]&&e[1]}return c};m.Pd=function(a,b){for(var c=!0,d=0;d<this.Ka.length&&c;++d)c=this.Ka[d].Pd(a[d],b[d]);return c};
m.mf=function(a){var b=a.filter(function(a){return a.every(ga)});a=Array(this.Ka.length);for(var c=0;c<a.length;c++)a[c]=b.map(function(a){return a[c]});a.forEach(function(a,b){a.sort(function(a,c){return this.Ka[b].be(a,c)}.bind(this))},this);b=Array(b.length);for(c=0;c<b.length;c++)b[c]=a.map(function(a){return a[c]});return b.sort(function(a,b){for(var c=0,h=0;h<this.Ka.length&&0==c;++h)c=this.Ka[h].be(a[h],b[h]);return c}.bind(this))};m.Qd=function(a){return this.Ka[0].Qd(a[0])};
m.od=function(a){var b=a.map(function(a,b){return this.Ka[b].od(a)[0]},this);a=a.map(function(a,b){return this.Ka[b].od(a)[1]},this);return[b,a]};function Kf(a){if(1==a.f.length)return new Df(a.f[0].jb);a=a.f.map(function(a){return a.jb});return new If(a)};function Lf(a){this.fa=a;this.ib=C();this.Mc=new ef;this.nb=new ef}m=Lf.prototype;m.getName=function(){return this.fa.getName()};m.add=function(a,b){null===a?(this.ib.add(b),this.Mc.add(a,1)):this.fa.add(a,b)};m.set=function(a,b){null===a?(this.ib.clear(),this.Mc.clear(),this.add(a,b)):this.fa.set(a,b)};m.remove=function(a,b){null===a?b?(this.ib.delete(b),this.Mc.remove(a,1)):(this.ib.clear(),this.Mc.clear()):this.fa.remove(a,b)};m.get=function(a){return null===a?D(this.ib):this.fa.get(a)};m.Yc=function(a){return this.fa.Yc(a)};
m.Ma=function(){ff(this.nb,[this.fa.Ma(),this.Mc]);return this.nb};m.Xa=function(a,b,c,d){b=this.fa.Xa(a,b,c,d);return null!=a?b:b.concat(D(this.ib))};m.clear=function(){this.ib.clear();this.fa.clear()};m.eb=function(a){return null===a?0!=this.ib.size:this.fa.eb(a)};m.min=function(){return this.fa.min()};m.max=function(){return this.fa.max()};m.Ea=function(){return[new y(-2,D(this.ib))].concat(this.fa.Ea())};m.oc=function(){return this.fa.oc()};
function Mf(a,b){for(var c=-1,d=0;d<b.length;++d)if(-2==b[d].id()){c=d;break}if(-1==c)throw new E(102);var d=b[c].o,e=b.slice(0);e.splice(c,1);var c=a(e),f=new Lf(c);d.forEach(function(a){f.ib.add(a)});return f}m.Ha=function(){return this.fa.Ha()};function Nf(a){this.u=a;this.mb=C();this.U=new Df(1)}m=Nf.prototype;m.getName=g("u");m.add=function(a){if("number"!=typeof a)throw new E(103);this.mb.add(a)};m.set=function(a,b){this.add(a,b)};m.remove=function(a){this.mb.delete(a)};m.get=function(a){return this.eb(a)?[a]:[]};m.min=function(){return this.Ec(this.U.min.bind(this.U))};m.max=function(){return this.Ec(this.U.max.bind(this.U))};
m.Ec=function(a){if(0==this.mb.size)return null;var b=D(this.mb).reduce(function(b,d){return null===b||1==a(d,b)?d:b},null);return[b,[b]]};m.Yc=function(){return this.mb.size};m.Xa=function(a,b,c,d){var e=a||[ld()];a=D(this.mb).filter(function(a){return e.some(function(b){return this.U.Pd(a,b)},this)},this);return df(a,b,c,d)};m.clear=function(){this.mb.clear()};m.eb=function(a){return this.mb.has(a)};m.Ea=function(){return[new y(0,D(this.mb))]};m.oc=g("U");
function Of(a,b){var c=new Nf(a);b[0].o.forEach(function(a){c.add(a,a)});return c}m.Ha=l(!0);m.Ma=function(){var a=new ef;a.oa=this.mb.size;return a};function Qf(a){this.Ja=a.j(gc);this.C=a.j(ic);this.S=a.j(hc)}Qf.prototype.Fa=function(a){var b=a.ra(),c=function(){if(0==b.length)return w();var a=b.shift();return(a.xb()?Rf(this,a):Sf(this,a)).then(c)}.bind(this);return c()};function Sf(a,b){var c=a.Ja.zb(0,[b]),d=c.G(b.getName(),b.Ab.bind(b)).get([]).then(function(a){this.S.Tb(b.getName(),a);Tf(this,b,a)}.bind(a));c.ia();return d}
function Tf(a,b,c){var d=a.C.ic.get(b.getName())||[];c.forEach(function(a){d.forEach(function(b){var c=a.Db(b.getName());b.add(c,a.id())})})}function Rf(a,b){var c=a.Ja.zb(0,[b]),d=c.G(b.getName(),b.Ab).get([]).then(function(a){this.S.Tb(b.getName(),a)}.bind(a)),e=b.ya().map(function(a){return Uf(this,a,c)},a).concat(Vf(a,b,c));c.ia();return db(e.concat(d))}
function Uf(a,b,c){c=c.G(b.m(),qb,1);var d=Kf(b);return c.get([]).then(function(a){if(1<a.length){if(Wf(b)){var c=qf.bind(void 0,d,b.m(),b.Cc);a=Mf(c,a.slice(1))}else a=qf(d,b.m(),b.Cc,a.slice(1));this.C.set(b.Nc,a)}}.bind(a))}function Vf(a,b,c){return c.G(Je(b),qb,1).get([]).then(function(a){1<a.length&&(a=Of(Je(b),a.slice(1)),this.C.set(b.getName(),a))}.bind(a))};function Xf(){this.aa=A();this.ic=A()}Xf.prototype.Fa=function(a){a.ra().forEach(function(a){var c=[];this.ic.set(a.getName(),c);var d=Je(a);if(null===this.get(d)){var e=new Nf(d);c.push(e);this.aa.set(d,e)}a.ya().forEach(function(a){var b;b=Kf(a);b=new gf(a.m(),b,a.Cc);b=Wf(a)?new Lf(b):b;c.push(b);this.aa.set(a.m(),b)},this)},this);return w()};Xf.prototype.get=function(a){return this.aa.get(a)||null};
Xf.prototype.set=function(a,b){var c=this.ic.get(a)||null;null===c&&(c=[],this.ic.set(a,c));for(var d=null,e=0;e<c.length;e++)if(c[e].getName()==b.getName()){d=e;break}null!==d&&0<c.length?c.splice(d,1,b):c.push(b);this.aa.set(b.getName(),b)};function Yf(a){this.hc=[];q(a)&&this.add(a)}Yf.prototype.toString=function(){return this.hc.map(function(a){return a.toString()}).join(",")};Yf.prototype.eb=function(a){return this.hc.some(function(b){return b.contains(a)})};Yf.prototype.Cb=g("hc");
Yf.prototype.add=function(a){if(0!=a.length)if(a=this.hc.concat(a),1==a.length)this.hc=a;else{a.sort(nd);for(var b=[],c=a[0],d=1;d<a.length;++d)if(jd(c,a[d])){var e=a[d],f=ld();if(c.b!=F&&e.b!=F){var h=kd(c.b,e.b,!0);1!=h?(f.b=c.b,f.da=0!=h?c.da:c.da&&e.da):(f.b=e.b,f.da=e.da)}c.w!=F&&e.w!=F&&(h=kd(c.w,e.w,!1),-1!=h?(f.w=c.w,f.ma=0!=h?c.ma:c.ma&&e.ma):(f.w=e.w,f.ma=e.ma));c=f}else b.push(c),c=a[d];b.push(c);this.hc=b}};
function Zf(a,b){var c=[];a.Cb().map(function(a){return b.Cb().map(function(b){var c;if(jd(a,b)){c=ld();var h=kd(a.b,b.b,!0),h=0==h?a.da?a:b:-1!=h?a:b;c.b=h.b;c.da=h.da;a.w==F||b.w==F?b=a.w==F?b:a:(h=kd(a.w,b.w,!1),b=0==h?a.ma?a:b:-1==h?a:b);c.w=b.w;c.ma=b.ma}else c=null;return c})}).forEach(function(a){c=c.concat(a)});return new Yf(c.filter(function(a){return null!==a}))};function $f(a,b){var c=[],d=null,e=null;Pd(a,function(a){var h=b(a);null==a.getParent()?e=h:Md(d,h);var k=a.getParent();null!==k&&L(k).length==L(d).length&&(k=c.indexOf(d),-1!=k&&c.splice(k,1));1<L(a).length&&c.push(h);d=null===a.g?c[c.length-1]:h});return e}function ag(a){return bg(a,function(a){return null===a.g})}
function cg(a){var b=a.getParent(),c=0;null!==b&&(c=L(b).indexOf(a),b.removeChild(a));var d=L(a).slice();d.forEach(function(d,f){a.removeChild(d);null===b||Ld(b,d,c+f)});return{parent:b,children:d}}function dg(a,b){L(a).slice().forEach(function(c){a.removeChild(c);Md(b,c)});Md(a,b)}function eg(a){var b=Kd(a,0);cg(a);dg(b,a);return b}
function fg(a,b,c){var d=Kd(a,0),e=L(d).slice();if(!e.some(function(a){return b(a)}))return a;cg(a);e.forEach(function(e,h){if(b(e)){var k=c(a);Nd(d,h);Md(k,e);Ld(d,k,h)}});return d}function gg(a,b,c,d){var e=a.getParent();null!==e&&(a=L(e).indexOf(a),Nd(e,a),Ld(e,c,a));L(b).slice().forEach(function(a){b.removeChild(a);Md(d,a)});return c}function bg(a,b,c){function d(a){b(a)&&e.push(a);null!=c&&c(a)||L(a).forEach(d)}var e=[];d(a);return e}
function hg(a,b){var c=b||function(a){return a.toString()+"\n"},d="";Pd(a,function(a){for(var b=0;b<Jd(a);b++)d+="-";d+=c(a)});return d};function ig(a){Qd.call(this);this.Pb=a;this.Ya=!1}t(ig,Qd);m=ig.prototype;m.Ib=function(){return $f(this,function(a){if(a instanceof ig){var b=new ig(a.Pb);b.Ya=a.Ya;a=a.V();b.pa=a;return b}return a.Ib()})};m.fb=function(a){var b=a||[];Pd(this,function(a){a!=this&&a.fb(b)}.bind(this));a=C(b);return D(a)};m.qd=function(a){this.Ya!=a&&(this.Ya=a,this.Pb="and"==this.Pb?"or":"and",L(this).forEach(function(b){return b.qd(a)}))};
m.eval=function(a){var b=L(this).map(function(b){return b.eval(a)});return jg(this,b)};function jg(a,b){return"and"==a.Pb?td(b):ud(b)}m.toString=function(){return"combined_pred_"+this.Pb.toString()};function kg(a,b,c){Qd.call(this);this.ga=a;this.la=b;this.F=c;this.Xd=null;a=Bd.xc();this.sc=Hd(a,this.ga.H(),this.F);this.bg=a.Qe.get(this.ga.H())||null}t(kg,Qd);m=kg.prototype;m.Ib=function(){var a=new kg(this.ga,this.la,this.F),b=this.V();a.pa=b;return a};m.fb=function(a){return null!=a?(a.push(this.ga),a.push(this.la),a):[this.ga,this.la]};
m.reverse=function(){var a=this.F;switch(this.F){case "gt":a="lt";break;case "lt":a="gt";break;case "gte":a="lte";break;case "lte":a="gte"}return new kg(this.la,this.ga,a)};m.eval=function(a){var b=a.entries.filter(function(a){var b=I(a,this.ga);a=I(a,this.la);return this.sc(b,a)},this);return new G(b,H(a))};m.toString=function(){return"join_pred("+this.ga.m()+" "+this.F+" "+this.la.m()+")"};
function lg(a,b,c){var d=null,e=null;-1!=H(b).indexOf(J(a.ga.G()))?(d=b,e=c):(d=c,e=b);if(d.entries.length>e.entries.length){a:{b=a.ga;a.ga=a.la;a.la=b;b=a.F;switch(a.F){case "gt":b="lt";break;case "lt":b="gt";break;case "gte":b="lte";break;case "lte":b="gte";break;default:break a}a.F=b;a.sc=Hd(Bd.xc(),a.ga.H(),a.F)}return[e,d]}return[d,e]}function mg(a){var b={};a.fb().forEach(function(a){b[a.getName()]=null});return b}
function ng(a,b,c){null===a.Xd&&(a.Xd=mg(a.la.G()));var d=new wd(new y(-1,a.Xd),!1);return zd(b,c,d,[J(a.la.G())])}
function og(a,b,c,d){var e=[b,c];d||(e=lg(a,b,c));b=e[0];c=e[1];var e=b,f=c,h=a.ga,k=a.la;d&&(e=c,f=b,h=a.la,k=a.ga);var n=new Jc,z=[];e.entries.forEach(function(a){var b=String(I(a,h));n.set(b,a)});var O=H(e),ca=H(f);f.entries.forEach(function(a){var b=I(a,k),c=String(b);null!==b&&n.has(c)?n.get(c).forEach(function(b){b=zd(a,ca,b,O);z.push(b)}):d&&z.push(ng(this,a,ca))}.bind(a));a=H(b).concat(H(c));return new G(z,a)}
function pg(a,b,c,d,e){function f(a,b){var c=new wd(b,1<O.length),c=zd(a,ca,c,O);z.push(c)}var h=d.Tf.G(),k=b,n=c;-1!=H(b).indexOf(J(h))&&(k=c,n=b);var z=[],O=H(n),ca=H(k);k.entries.forEach(function(a){var b=this.bg(I(a,d.hg)),b=d.index.get(b);0!=b.length&&(d.index.Ha()?f(a,e.get(b[0])):$e(e,b).forEach(f.bind(null,a)))},a);a=H(k).concat(H(n));return new G(z,a)};function qg(a,b,c){return null===b?new Sd(a,b,c):q(b.m)?new kg(a,b,c):new Sd(a,b,c)};var rg={};r("lf.schema.DataStoreType",rg);rg.INDEXED_DB=0;rg.MEMORY=1;rg.LOCAL_STORAGE=2;rg.FIREBASE=3;rg.WEB_SQL=4;rg.OBSERVABLE_STORE=5;function sg(a,b,c,d){this.Nc=a;this.name=b;this.Cc=c;this.f=d}sg.prototype.m=function(){return this.Nc+"."+this.name};function Wf(a){return a.f.some(function(a){return a.ca.Bc()})}function R(a,b,c,d){this.u=a;this.ka=c;this.J=b;this.ld=d;this.ab=null}r("lf.schema.Table",R);R.prototype.getName=g("u");R.prototype.getName=R.prototype.getName;R.prototype.Wa=g("ab");
function J(a){return a.ab||a.u}R.prototype.mc=function(a){var b=new this.constructor(this.u);b.ab=a;b.tg=this.tg;return b};R.prototype.as=R.prototype.mc;R.prototype.createRow=R.prototype.rb;R.prototype.deserializeRow=R.prototype.Ab;R.prototype.ya=g("ka");R.prototype.getIndices=R.prototype.ya;R.prototype.fb=g("J");R.prototype.getColumns=R.prototype.fb;R.prototype.getConstraint=R.prototype.Bb;R.prototype.xb=g("ld");R.prototype.persistentIndex=R.prototype.xb;function Je(a){return a.u+".#"};function S(a,b){this.child=a;this.Hb=b;this.ab=null}m=S.prototype;m.getName=function(){return this.Hb+"("+this.child.getName()+")"};m.m=function(){return this.Hb+"("+this.child.m()+")"};m.G=function(){return this.child.G()};m.toString=function(){return this.m()};m.H=function(){return this.child.H()};m.Wa=g("ab");m.ya=function(){return[]};m.xa=l(null);m.Bc=l(!1);m.mc=function(a){this.ab=a;return this};S.prototype.as=S.prototype.mc;
function tg(a){for(var b=[a];a instanceof S;)b.push(a.child),a=a.child;return b}function ug(a){this.ab=a||null;this.O=new R("#UnknownTable",[],[],!1)}m=ug.prototype;m.getName=l("*");m.m=function(){return this.getName()};m.toString=function(){return this.m()};m.G=g("O");m.H=l(4);m.Wa=g("ab");m.ya=function(){return[]};m.xa=l(null);m.Bc=l(!1);r("lf.fn.avg",function(a){return new S(a,"AVG")});function vg(a){return new S(a||new ug,"COUNT")}r("lf.fn.count",vg);function wg(a){return new S(a,"DISTINCT")}r("lf.fn.distinct",wg);r("lf.fn.max",function(a){return new S(a,"MAX")});r("lf.fn.min",function(a){return new S(a,"MIN")});r("lf.fn.stddev",function(a){return new S(a,"STDDEV")});r("lf.fn.sum",function(a){return new S(a,"SUM")});r("lf.fn.geomean",function(a){return new S(a,"GEOMEAN")});function T(a,b){K.call(this);this.Lf=b}t(T,K);T.prototype.exec=function(a,b){switch(this.Lf){case 1:return xg(this,a,b);case 0:return yg(this,a,b);default:return zg(this,a,b)}};T.prototype.toString=l("dummy_node");T.prototype.Oc=function(){return this.toString()};function zg(a,b,c){return new v(function(a){a(this.ea([],b,c))}.bind(a))}function xg(a,b,c){return Kd(a,0).exec(b,c).then(function(a){return this.ea(a,b,c)}.bind(a))}
function yg(a,b,c){var d=L(a).map(function(a){return a.exec(b,c)});return db(d).then(function(a){var d=[];a.forEach(function(a){for(var b=0;b<a.length;++b)d.push(a[b])});return this.ea(d,b,c)}.bind(a))};function Ag(a){T.call(this,0,1);this.we=a}t(Ag,T);Ag.prototype.toString=function(){return"aggregation("+this.we.map(function(a){return a.m()}).toString()+")"};Ag.prototype.ea=function(a){a.forEach(function(a){Bg(new Cg(a,this.we))},this);return a};function Cg(a,b){this.Ia=a;this.J=b}
function Bg(a){a.J.forEach(function(a){a=tg(a).reverse();for(var c=1;c<a.length;c++){var d=a[c],e=tg(d).slice(-1)[0],f=d.child instanceof S?qd(this.Ia,d.child):this.Ia;if(null!==f.Va&&f.Va.has(d.m()))break;f=Dg(d.Hb,f,e);e=this.Ia;null===e.Va&&(e.Va=A());e.Va.set(d.m(),f)}},a)}
function Dg(a,b,c){var d=null;switch(a){case "MIN":d=Eg(b,c,function(a,b){return b<a?b:a});break;case "MAX":d=Eg(b,c,function(a,b){return b>a?b:a});break;case "DISTINCT":d=Fg(b,c);break;case "COUNT":d=Gg(b,c);break;case "SUM":d=Hg(b,c);break;case "AVG":a=Gg(b,c);0<a&&(d=Hg(b,c)/a);break;case "GEOMEAN":d=Ig(b,c);break;default:d=Jg(b,c)}return d}function Eg(a,b,c){return a.entries.reduce(function(a,e){var f=I(e,b);return null===f?a:null===a?f:c(a,f)},null)}
function Gg(a,b){return b instanceof ug?a.entries.length:a.entries.reduce(function(a,d){return a+(fa(I(d,b))?0:1)},0)}function Hg(a,b){return Eg(a,b,function(a,b){return b+a})}function Jg(a,b){var c=[];a.entries.forEach(function(a){a=I(a,b);null===a||c.push(a)});return 0==c.length?null:Ab.apply(null,c)}function Ig(a,b){var c=0,d=a.entries.reduce(function(a,d){var h=I(d,b);if(0==h||null===h)return a;c++;return a+Math.log(h)},0);return 0==c?null:Math.pow(Math.E,d/c)}
function Fg(a,b){var c=A();a.entries.forEach(function(a){var e=I(a,b);c.set(e,a)});return new G(B(c),H(a))};function Kg(a,b){this.Ca=a;this.$=b}Kg.prototype.gb=g("Ca");Kg.prototype.ba=g("$");function Lg(){K.call(this)}t(Lg,K);function Mg(a,b){K.call(this);this.table=a;this.values=b}t(Mg,Lg);function Ng(a,b){Mg.call(this,a,b)}t(Ng,Mg);function Og(a){K.call(this);this.table=a}t(Og,Lg);Og.prototype.toString=function(){return"delete("+this.table.getName()+")"};function Pg(a,b){K.call(this);this.table=a;this.qe=b}t(Pg,Lg);
Pg.prototype.toString=function(){var a=[];this.qe&&(a=this.qe.map(function(a){return a.N.getName()},this));return"update("+this.table.getName()+", ["+a.join(",")+"])"};function Qg(a){K.call(this);this.I=a}t(Qg,Lg);Qg.prototype.toString=function(){return"select("+this.I.toString()+")"};function Rg(a){K.call(this);this.table=a}t(Rg,Lg);Rg.prototype.toString=function(){var a="table_access("+this.table.getName();null===this.table.Wa()||(a+=" as "+this.table.Wa());return a+")"};
function Sg(){K.call(this)}t(Sg,Lg);Sg.prototype.toString=l("cross_product");function Tg(a,b){K.call(this);this.f=a;this.Lb=b}t(Tg,Lg);Tg.prototype.toString=function(){var a="project("+this.f.toString();if(null!==this.Lb)var b=this.Lb.map(function(a){return a.m()}).join(", "),a=a+(", groupBy("+b+")");return a+")"};function Ug(a){K.call(this);this.M=a}t(Ug,Lg);Ug.prototype.toString=function(){return"order_by("+ae(this.M)+")"};function Vg(a){K.call(this);this.f=a}t(Vg,Lg);
Vg.prototype.toString=function(){return"aggregation("+this.f.toString()+")"};function Wg(a){K.call(this);this.f=a}t(Wg,Lg);Wg.prototype.toString=function(){return"group_by("+this.f.toString()+")"};function Xg(a){K.call(this);this.W=a}t(Xg,Lg);Xg.prototype.toString=function(){return"limit("+this.W+")"};function Yg(a){K.call(this);this.K=a}t(Yg,Lg);Yg.prototype.toString=function(){return"skip("+this.K+")"};function Zg(a,b){K.call(this);this.I=a;this.Nb=b}t(Zg,Lg);
Zg.prototype.toString=function(){return"join(type: "+(this.Nb?"outer":"inner")+", "+this.I.toString()+")"};function $g(){};function ah(){}t(ah,$g);ah.prototype.lb=function(a){this.Z=a;this.Ta(this.Z);return this.Z};ah.prototype.Ta=function(a){if(a instanceof Qg){var b=bh(this,a.I),b=ch(this,b);gg(a,a,b[0],b[1]);a==this.Z&&(this.Z=b[0]);a=b[0]}L(a).forEach(function(a){this.Ta(a)},this)};function bh(a,b){if(0==L(b).length||"and"!=b.Pb)return[b];var c=L(b).slice().map(function(a){b.removeChild(a);return bh(this,a)},a);return Fa(c)}
function ch(a,b){var c=null,d=null;b.map(function(a,b){var h=new Qg(a);0==b?c=h:Md(d,h);d=h},a);return[c,d]};function dh(){}t(dh,$g);dh.prototype.lb=function(a,b){if(3>b.b.length)return a;this.Z=a;this.Ta(this.Z);return this.Z};dh.prototype.Ta=function(a){if(a instanceof Sg)for(;2<L(a).length;){for(var b=new Sg,c=0;2>c;c++){var d=Nd(a,0);Md(b,d)}Ld(a,b,0)}L(a).forEach(function(a){this.Ta(a)},this)};function eh(){T.call(this,0,0)}t(eh,T);eh.prototype.toString=l("cross_product");eh.prototype.ea=function(a){var b=a[0],c=a[1];a=[];for(var d=H(b),e=H(c),f=0;f<b.entries.length;f++)for(var h=0;h<c.entries.length;h++){var k=zd(b.entries[f],d,c.entries[h],e);a.push(k)}b=H(b).concat(H(c));return[new G(a,b)]};function fh(a,b){de.call(this,a,b);this.Da=a.j(kc);this.Eb=a.j(lc)}t(fh,de);fh.prototype.getPriority=l(2);fh.prototype.$d=function(a){0==this.H()?gh(this,a):this.Lc()};function gh(a,b){a.nd.forEach(function(a,d){a instanceof $d&&ge(this.Eb,a,b[d])},a)}fh.prototype.Lc=function(){var a=ie(this.Eb,this.ba());0!=a.length&&(a=new fe(this.global,a),je(this.Da,a))};function hh(a){Vd.call(this,a)}t(hh,Vd);hh.prototype.ba=function(){var a=C();a.add(this.b);ih(this,this.b.getName(),a);return a};function ih(a,b,c){var d=jh(a.ca.info(),b,1);jh(a.ca.info(),b).forEach(c.add.bind(c));d.forEach(function(a){ih(this,a.getName(),c)},a)}hh.prototype.clone=function(){var a=new hh(this.ca);Yd(a,this);a.b=this.b;return a};hh.prototype.bind=function(a){hh.Gb.bind.call(this,a);Zd(this,a);return this};function kh(a){Vd.call(this,a)}t(kh,Vd);kh.prototype.ba=function(){var a=C();a.add(this.Ga);var b=this.ca.info();lh(this.Ga.getName(),b.Ye).forEach(a.add.bind(a));this.Yb&&jh(b,this.Ga.getName()).forEach(a.add.bind(a));return a};kh.prototype.clone=function(){var a=new kh(this.ca);Yd(a,this);a.Ga=this.Ga;this.values&&(a.values=this.values instanceof Ad?this.values:this.values.slice());a.Yb=this.Yb;a.Zb=this.Zb;return a};
kh.prototype.bind=function(a){kh.Gb.bind.call(this,a);this.Zb&&(this.values=this.Zb instanceof Ad?a[this.Zb.xa()]:this.Zb.map(function(b){return b instanceof Ad?a[b.xa()]:b}));return this};function mh(a){Vd.call(this,a)}t(mh,Vd);mh.prototype.ba=function(){var a=C();a.add(this.table);var b=this.set.map(function(a){return a.N.m()}),c=this.ca.info();nh(c,b).forEach(a.add.bind(a));oh(c,b).forEach(a.add.bind(a));return a};mh.prototype.clone=function(){var a=new mh(this.ca);Yd(a,this);a.table=this.table;a.set=this.set?this.set.slice():this.set;return a};mh.prototype.bind=function(a){mh.Gb.bind.call(this,a);this.set.forEach(function(b){-1!=b.Tc&&(b.value=a[b.Tc])});Zd(this,a);return this};function ph(a,b){if(null==b)return"NULL";switch(a){case 1:return b?1:0;case 3:case 4:return b;case 0:return"'"+sb(b)+"'";default:return"'"+b.toString()+"'"}}function qh(a,b){var c=a.Yb?"INSERT OR REPLACE":"INSERT",d=a.Ga.fb(),c=c+(" INTO "+a.Ga.getName()+"("),c=c+d.map(function(a){return a.getName()}).join(", "),c=c+") VALUES (";return a.values.map(function(a){var f=d.map(function(c){var d=a.o[c.getName()];return b?null!=d?"#":"NULL":ph(c.H(),d)});return c+f.join(", ")+");"}).join("\n")}
function rh(a){switch(a){case "between":return"BETWEEN";case "eq":return"=";case "gte":return">=";case "gt":return">";case "in":return"IN";case "lte":return"<=";case "lt":return"<";case "match":return"LIKE";case "neq":return"<>";default:return"UNKNOWN"}}function sh(a,b,c,d){return a instanceof Ad?"?"+a.xa().toString():d?null!=a?"#":"NULL":"match"==b?"'"+a.toString()+"'":"in"==b?"("+a.map(function(a){return ph(c,a)}).join(", ")+")":"between"==b?ph(c,a[0])+" AND "+ph(c,a[1]):ph(c,a).toString()}
function th(a,b){return L(a).map(function(a){return"("+uh(a,b)+")"}).join("and"==a.Pb?" AND ":" OR ")}function vh(a){return[a.ga.m(),rh(a.F),a.la.m()].join(" ")}function uh(a,b){if(a instanceof Sd){var c=a.N.m(),d=rh(a.F),e=sh(a.value,a.F,a.N.H(),b);return"="==d&&"NULL"==e?[c,"IS NULL"].join(" "):"<>"==d&&"NULL"==e?[c,"IS NOT NULL"].join(" "):[c,d,e].join(" ")}if(a instanceof ig)return th(a,b);if(a instanceof kg)return vh(a);throw new E(357,typeof a);}
function wh(a,b){var c=uh(a,b);return c?" WHERE "+c:""}function xh(a,b){var c="UPDATE "+a.table.getName()+" SET ",c=c+a.set.map(function(a){var b=a.N.m()+" = ";return-1!=a.Tc?b+"?"+a.Tc.toString():b+ph(a.N.H(),a.value).toString()}).join(", ");a.s&&(c+=wh(a.s,b));return c+";"}
function yh(a,b){var c="*";a.f.length&&(c=a.f.map(function(a){return a.Wa()?a.m()+" AS "+a.Wa():a.m()}).join(", "));c="SELECT "+c+" FROM ";null!=a.wb&&0!=a.wb.size?c+=zh(a,b):(c+=a.b.map(Ah).join(", "),a.s&&(c+=wh(a.s,b)));if(a.M)var d=a.M.map(function(a){return a.N.m()+(0==a.jb?" DESC":" ASC")}).join(", "),c=c+(" ORDER BY "+d);a.ja&&(d=a.ja.map(function(a){return a.m()}).join(", "),c+=" GROUP BY "+d);a.W&&(c+=" LIMIT "+a.W.toString());a.K&&(c+=" SKIP "+a.K.toString());return c+";"}
function Ah(a){return J(a)!=a.getName()?a.getName()+" AS "+J(a):a.getName()}function zh(a,b){for(var c=bg(a.s,function(a){return a instanceof kg}),d=c.map(vh),e=Ah(a.b[0]),f=1;f<a.b.length;f++)var h=Ah(a.b[f]),e=a.wb.has(c[d.length-f].V())?e+(" LEFT OUTER JOIN "+h):e+(" INNER JOIN "+h),e=e+(" ON ("+d[d.length-f]+")");c=Kd(a.s,0);c instanceof kg||(e+=" WHERE "+uh(c,b));return e}
function Bh(a,b){var c=b||!1,d=a.a.clone();if(d instanceof kh)return qh(d,c);if(d instanceof hh){var e="DELETE FROM "+d.b.getName();d.s&&(e+=wh(d.s,c));return e+";"}if(d instanceof mh)return xh(d,c);if(d instanceof $d)return yh(d,c);throw new E(358,typeof d);};function U(a,b){this.global=a;this.sg=a.j(jc);this.Da=a.j(kc);this.a=b}r("lf.query.BaseBuilder",U);U.prototype.exec=function(){try{this.bb()}catch(a){return ab(a)}return new v(function(a,b){var c=new fh(this.global,[this.zc()]);je(this.Da,c).then(function(b){a(od(b[0]))},b)},this)};U.prototype.exec=U.prototype.exec;U.prototype.Nf=function(){var a=function(a){return a.Oc(this.a)+"\n"}.bind(this);return hg(Ch(this).gb(),a)};U.prototype.explain=U.prototype.Nf;
U.prototype.bind=function(a){this.a.bind(a);return this};U.prototype.bind=U.prototype.bind;U.prototype.Ag=function(a){return Bh(this,a)};U.prototype.toSql=U.prototype.Ag;U.prototype.bb=aa();function Ch(a){if(null==a.Ze){var b;b=a.sg;var c=a.a,d=b.eg.create(c);b=b.pg.create(d,c);a.Ze=b}return a.Ze}U.prototype.zc=function(){return{context:this.a.clone(),ce:Ch(this)}};function Dh(a){U.call(this,a,new hh(a.j(mc)))}t(Dh,U);r("lf.query.DeleteBuilder",Dh);Dh.prototype.b=function(a){if(null!=this.a.b)throw new E(515);this.a.b=a;return this};Dh.prototype.from=Dh.prototype.b;Dh.prototype.s=function(a){this.xd();this.a.s=a;return this};Dh.prototype.where=Dh.prototype.s;Dh.prototype.xd=function(){if(null==this.a.b)throw new E(548);if(null!=this.a.s)throw new E(516);};Dh.prototype.bb=function(){Dh.Gb.bb.call(this);if(null==this.a.b)throw new E(517);};function Eh(a,b){U.call(this,a,new kh(a.j(mc)));this.a.Yb=b||!1}t(Eh,U);r("lf.query.InsertBuilder",Eh);Eh.prototype.bb=function(){Eh.Gb.bb.call(this);var a=this.a;if(null==a.Ga||null==a.values)throw new E(518);if(a.Yb&&null===a.Ga.Bb().bd())throw new E(519);};Eh.prototype.Ga=function(a){if(null!=this.a.Ga)throw new E(520);this.a.Ga=a;return this};Eh.prototype.into=Eh.prototype.Ga;
Eh.prototype.values=function(a){if(null!=this.a.values)throw new E(521);a instanceof Ad||a.some(function(a){return a instanceof Ad})?this.a.Zb=a:this.a.values=a;return this};Eh.prototype.values=Eh.prototype.values;function Fh(a){return Gh("and",Array.prototype.slice.call(arguments))}r("lf.op.and",Fh);r("lf.op.or",function(a){return Gh("or",Array.prototype.slice.call(arguments))});function Gh(a,b){var c=new ig(a);b.forEach(function(a){Md(c,a)});return c}r("lf.op.not",function(a){a.qd(!0);return a});function V(a,b){U.call(this,a,new $d(a.j(mc)));this.Ge=this.sd=!1;this.a.f=b;Hh(this);Ih(this)}t(V,U);r("lf.query.SelectBuilder",V);V.prototype.bb=function(){V.Gb.bb.call(this);var a=this.a;if(null==a.b)throw new E(522);if(q(a.Ob)&&!q(a.W)||q(a.Vb)&&!q(a.K))throw new E(523);null!=this.a.ja?Jh(this):Kh(this)};function Hh(a){var b=a.a.f.filter(function(a){return a instanceof S&&"DISTINCT"==a.Hb},a);if(0!=b.length&&(1!=b.length||1!=a.a.f.length))throw new E(524);}
function Jh(a){var b=a.a.f.filter(function(a){return!(a instanceof S)}).map(function(a){return a.m()}),c=!1;if(0==a.a.ja.length||0==a.a.f.length)c=!0;else{var d=a.a.ja.map(function(a){return a.m()});(c=b.some(function(a){return-1==d.indexOf(a)}))||(c=a.a.ja.some(function(a){a=a.H();return 6==a||0==a}))}if(c)throw new E(525);}function Kh(a){var b=a.a.f.some(function(a){return a instanceof S},a);a=a.a.f.some(function(a){return!(a instanceof S)},a)||0==a.a.f.length;if(b&&a)throw new E(526);}
function Ih(a){a.a.f.forEach(function(a){if(a instanceof S&&!Lh(a.Hb,a.H()))throw new E(527,a.m());},a)}function Mh(a,b){if(null==a.a.b)throw new E(b);}V.prototype.b=function(a){if(this.Ge)throw new E(515);this.Ge=!0;null==this.a.b&&(this.a.b=[]);this.a.b.push.apply(this.a.b,Array.prototype.slice.call(arguments));return this};V.prototype.from=V.prototype.b;V.prototype.s=function(a){Mh(this,548);if(this.sd)throw new E(516);this.sd=!0;Nh(this,a);return this};V.prototype.where=V.prototype.s;
function Nh(a,b){if(null!=a.a.s){var c=Fh(b,a.a.s);a.a.s=c}else a.a.s=b}V.prototype.Xf=function(a,b){Mh(this,542);if(this.sd)throw new E(547);this.a.b.push(a);Nh(this,b);return this};V.prototype.innerJoin=V.prototype.Xf;V.prototype.cg=function(a,b){Mh(this,542);if(!(b instanceof kg))throw new E(541);if(this.sd)throw new E(547);this.a.b.push(a);null==this.a.wb&&(this.a.wb=C());var c=b;J(a)!=J(b.la.G())&&(c=b.reverse());this.a.wb.add(c.V());Nh(this,c);return this};V.prototype.leftOuterJoin=V.prototype.cg;
V.prototype.W=function(a){if(null!=(this.a.W||this.a.Ob))throw new E(528);if(a instanceof Ad)this.a.Ob=a;else{if(0>a)throw new E(531);this.a.W=a}return this};V.prototype.limit=V.prototype.W;V.prototype.K=function(a){if(null!=(this.a.K||this.a.Vb))throw new E(529);if(a instanceof Ad)this.a.Vb=a;else{if(0>a)throw new E(531);this.a.K=a}return this};V.prototype.skip=V.prototype.K;V.prototype.M=function(a,b){Mh(this,549);null==this.a.M&&(this.a.M=[]);this.a.M.push({N:a,jb:null!=b?b:1});return this};
V.prototype.orderBy=V.prototype.M;V.prototype.ja=function(a){Mh(this,549);if(null!=this.a.ja)throw new E(530);null==this.a.ja&&(this.a.ja=[]);this.a.ja.push.apply(this.a.ja,Array.prototype.slice.call(arguments));return this};V.prototype.groupBy=V.prototype.ja;function Lh(a,b){switch(a){case "COUNT":case "DISTINCT":return!0;case "AVG":case "GEOMEAN":case "STDDEV":case "SUM":return 4==b||3==b;case "MAX":case "MIN":return 4==b||3==b||5==b||2==b}return!1}
V.prototype.clone=function(){var a=new V(this.global,this.a.f);a.a=this.a.clone();a.a.Xc=null;return a};V.prototype.clone=V.prototype.clone;function Oh(a,b){U.call(this,a,new mh(a.j(mc)));this.a.table=b}t(Oh,U);r("lf.query.UpdateBuilder",Oh);Oh.prototype.set=function(a,b){var c={Tc:b instanceof Ad?b.xa():-1,N:a,value:b};null!=this.a.set?this.a.set.push(c):this.a.set=[c];return this};Oh.prototype.set=Oh.prototype.set;Oh.prototype.s=function(a){this.xd();this.a.s=a;return this};Oh.prototype.where=Oh.prototype.s;Oh.prototype.xd=function(){if(null!=this.a.s)throw new E(516);};
Oh.prototype.bb=function(){Oh.Gb.bb.call(this);if(null==this.a.set)throw new E(532);if(this.a.set.some(function(a){return a.value instanceof Ad}))throw new E(501);};function Ph(a){this.a=a;this.Ca=null}Ph.prototype.ec=function(){null===this.Ca&&(this.Ca=this.$c());return this.Ca};function Qh(a){Ph.call(this,a)}t(Qh,Ph);Qh.prototype.$c=function(){return this.a.Yb?new Ng(this.a.Ga,this.a.values):new Mg(this.a.Ga,this.a.values)};function Rh(a){Ph.call(this,a)}t(Rh,Ph);Rh.prototype.$c=function(){var a=new Pg(this.a.table,this.a.set),b=null!=this.a.s?new Qg(this.a.s.Ib()):null,c=new Rg(this.a.table);null===b?Md(a,c):(Md(b,c),Md(a,b));return a};function Sh(a,b,c){this.Ca=a;this.de=b;this.Sb=c}Sh.prototype.ec=function(){this.Sb.forEach(function(a){this.Ca=a.lb(this.Ca,this.de)},this);return this.Ca};function Th(a,b){Ph.call(this,a);this.Sb=b}t(Th,Ph);Th.prototype.$c=function(){var a=new Og(this.a.b),b=null!=this.a.s?new Qg(this.a.s.Ib()):null,c=new Rg(this.a.b);null===b?Md(a,c):(Md(b,c),Md(a,b));return(new Sh(a,this.a,this.Sb)).ec()};function Uh(){}t(Uh,$g);Uh.prototype.lb=function(a,b){if(2>b.b.length)return a;this.Z=a;this.Ta(this.Z,b);return this.Z};Uh.prototype.Ta=function(a,b){if(a instanceof Qg&&a.I instanceof kg){var c=a.I.V(),d=Kd(a,0);d instanceof Sg&&(c=null!=b.wb&&b.wb.has(c),c=new Zg(a.I,c),gg(a,d,c,c),a==this.Z&&(this.Z=c),a=c)}L(a).forEach(function(a){this.Ta(a,b)},this)};function Vh(){this.Sc=C()}t(Vh,$g);Vh.prototype.lb=function(a,b){this.Sc.clear();if(!q(b.s))return a;this.Z=a;this.Ta(this.Z);this.Sc.clear();return this.Z};Vh.prototype.Ta=function(a){if(Wh(a)){var b=a.I instanceof Sd?Xh(this,a):Yh(this,a);this.Sc.add(a);b==a&&(b=Kd(a,0));null!==b&&(fa(b.getParent())&&(this.Z=b),Wh(b)&&!this.Sc.has(b)&&this.Ta(b))}else L(a).forEach(function(a){this.Ta(a)},this)};
function Zh(a,b,c){var d=b;if(Kd(b,0)instanceof Qg)d=eg(b),Zh(a,b,c);else if($h(b)){var e=[],d=fg(b,c,function(a){a=new Qg(a.I);e.push(a);return a});e.forEach(function(a){Zh(this,a,c)},a)}return d}function Xh(a,b){var c=C([J(b.I.N.G())]),d=function(a){return ai(this,a,c)}.bind(a);return Zh(a,b,d)}function Yh(a,b){var c=C([J(b.I.ga.G()),J(b.I.la.G())]),d=function(a){return ai(this,a,c)}.bind(a);return Zh(a,b,d)}
function ai(a,b,c){var d=C();ag(b).forEach(function(a){d.add(J(a.table))},a);b instanceof Rg&&d.add(J(b.table));return nc(d,c)}function Wh(a){return a instanceof Qg&&!(a.I instanceof ig)}function $h(a){a=Kd(a,0);return a instanceof Sg||a instanceof Zg};function bi(a,b){Ph.call(this,a);this.Sb=b;this.cf=this.Ue=this.lf=this.Xe=this.xe=this.Je=this.kf=this.De=this.nf=null}t(bi,Ph);
bi.prototype.$c=function(){ci(this);2<=this.a.b.length&&(this.De=new Sg);this.kf=null!=this.a.s?new Qg(this.a.s.Ib()):null;this.a.M&&(this.Xe=new Ug(this.a.M));null!=this.a.K&&0<this.a.K&&(this.lf=new Yg(this.a.K));null!=this.a.W&&(this.Ue=new Xg(this.a.W));null!=this.a.ja&&(this.Je=new Wg(this.a.ja));di(this);this.cf=new Tg(this.a.f||[],this.a.ja||null);var a=ei(this);return(new Sh(a,this.a,this.Sb)).ec()};
function ei(a){for(var b=[a.Ue,a.lf,a.cf,a.Xe,a.xe,a.Je,a.kf,a.De],c=null,d=null,e=0;e<b.length;e++){var f=b[e];null!==f&&(null===d?d=f:Md(b[c],f),c=e)}a.nf.forEach(function(a){Md(b[c],a)});return d}function ci(a){a.nf=a.a.b.map(function(a){return new Rg(a)},a)}function di(a){var b=a.a.f.filter(function(a){return a instanceof S});null!=a.a.M&&a.a.M.forEach(function(a){a.N instanceof S&&b.push(a.N)});0<b.length&&(a.xe=new Vg(b))};function fi(){this.je=[new ah,new dh,new Vh,new Uh];this.Gd=[new ah]}fi.prototype.create=function(a){var b=null;if(a instanceof kh)b=new Qh(a);else if(a instanceof hh)b=new Th(a,this.Gd);else if(a instanceof $d)b=new bi(a,this.je);else if(a instanceof mh)b=new Rh(a);else throw new E(513);b=b.ec();return new Kg(b,a.ba())};function gi(a){T.call(this,0,1);this.O=a}t(gi,T);gi.prototype.toString=function(){return"delete("+this.O.getName()+")"};gi.prototype.ea=function(a,b){var c=a[0].entries.map(function(a){return a.sa});b.remove(this.O,c);return[sd()]};function hi(a,b){T.call(this,0,-1);this.table=b;this.C=a.j(ic)}t(hi,T);hi.prototype.toString=function(){return"get_row_count("+this.table.getName()+")"};hi.prototype.ea=function(){var a=this.C.get(Je(this.table)),b=new G([],[this.table.getName()]),c=vg(),a=a.Ma().oa;null===b.Va&&(b.Va=A());b.Va.set(c.m(),a);return[b]};function ii(a,b){T.call(this,0,-1);this.S=a.j(hc);this.C=a.j(ic);this.table=b}t(ii,T);ii.prototype.toString=function(){var a="table_access("+this.table.getName();null===this.table.Wa()||(a+=" as "+this.table.Wa());return a+")"};ii.prototype.ea=function(){var a=this.C.get(Je(this.table)).Xa();return[vd($e(this.S,a),[J(this.table)])]};function ji(a){this.h=a}t(ji,$g);ji.prototype.lb=function(a,b){this.Z=a;if(!this.yd(b))return a;var c=bg(a,function(a){return a instanceof ii})[0],d=new hi(this.h,c.table);gg(c,c,d,d);return this.Z};ji.prototype.yd=function(a){return 1==a.f.length&&1==a.b.length&&null==a.s&&null==a.W&&null==a.K&&null==a.ja?(a=a.f[0],a instanceof S&&"COUNT"==a.Hb&&a.child instanceof ug):!1};function ki(a){T.call(this,0,1);this.Ie=a}t(ki,T);ki.prototype.toString=function(){return"groupBy("+this.Ie.map(function(a){return a.m()}).toString()+")"};ki.prototype.ea=function(a){return li(this,a[0])};function li(a,b){var c=new Jc,d=function(a){return this.Ie.map(function(b){return I(a,b)},this).join(",")}.bind(a);b.entries.forEach(function(a){c.set(d(a),a)},a);return c.keys().map(function(a){return new G(c.get(a),H(b))},a)};function mi(a,b,c){T.call(this,0,0);this.C=a.j(ic);this.S=a.j(hc);this.I=b;this.Nb=c;this.vd="eq"==this.I.F?0:2;this.Ke=null}t(mi,T);var ni=["hash","index_nested_loop","nested_loop"];mi.prototype.toString=function(){return"join(type: "+(this.Nb?"outer":"inner")+", impl: "+ni[this.vd]+", "+this.I.toString()+")"};
mi.prototype.ea=function(a){switch(this.vd){case 0:return[og(this.I,a[0],a[1],this.Nb)];case 1:return[pg(this.I,a[0],a[1],this.Ke,this.S)];default:var b=this.I,c=a[0];a=a[1];var d=this.Nb,e=[c,a];d||(e=lg(b,c,a));c=e[0];a=e[1];for(var e=[],f=H(c),h=H(a),k=c.entries.length,n=a.entries.length,z=n+256-1>>8,O=0;O<z;){for(var ca=0;ca<k;ca++){var vb=!1,Pf=I(c.entries[ca],b.ga);if(null!==Pf)for(var pi=Math.min(O+1<<8,n),Mc=O<<8;Mc<pi;Mc++)if(b.sc(Pf,I(a.entries[Mc],b.la))){var vb=!0,qi=zd(c.entries[ca],
f,a.entries[Mc],h);e.push(qi)}d&&!vb&&e.push(ng(b,c.entries[ca],f))}O++}b=H(c).concat(H(a));return[new G(e,b)]}};function oi(a,b){a.vd=1;var c=a.C.get(b.xa().m());a.Ke={Tf:b,hg:b==a.I.ga?a.I.la:a.I.ga,index:c}};function ri(a){T.call(this,0,-1);this.df=a}t(ri,T);ri.prototype.toString=function(){return"no_op_step("+H(this.df[0]).join(",")+")"};ri.prototype.ea=g("df");function si(){}t(si,$g);si.prototype.lb=function(a,b){this.Z=a;if(!this.yd(b))return a;bg(a,function(a){return a instanceof mi}).forEach(this.rg,this);return this.Z};si.prototype.yd=function(a){return 1<a.b.length};
si.prototype.rg=function(a){if("eq"==a.I.F&&!a.Nb){var b=function(b){if(!(b instanceof ii))return null;b=J(b.table)==J(a.I.la.G())?a.I.la:a.I.ga;return fa(b.xa())?null:b},c=b(Kd(a,0)),b=b(Kd(a,1));if(null!==c||null!==b){b=null===b?c:b;oi(a,b);var d=new G([],[J(b.G())]);Od(a,new ri([d]),b==c?0:1)}}};function ti(a){a=a.map(function(a){return a.Cb()});a=Fb.apply(null,a);var b=[];Eb(a,function(a){b.push(a)});return b}function ui(a){this.Mb=a}ui.prototype.ad=function(){return 1==this.Mb.f.length?[ld()]:[this.Mb.f.map(function(){return ld()})]};function vi(a,b){this.Mb=a;this.Ba=b;this.Cd=this.Se=null}
function wi(a,b){var c=A();a.Ba.keys().forEach(function(a){var e=this.Ba.get(a).map(function(a){return Wd(b,a)},this),f=new Yf([ld()]);e.forEach(function(a){var b=null;"between"==a.F?b=new gd(a.value[0],a.value[1],!1,!1):"eq"==a.F?(b=a.value,b=new gd(b,b,!1,!1)):b="gte"==a.F?new gd(a.value,F,!1,!1):"gt"==a.F?new gd(a.value,F,!0,!1):"lte"==a.F?new gd(F,a.value,!1,!1):new gd(F,a.value,!1,!0);a=a.Ya?hd(b):[b];a=new Yf(a);f=Zf(f,a)});c.set(a,f)},a);return c}
vi.prototype.ad=function(a){if(this.Se==a)return this.Cd;for(var b=wi(this,a),c=this.Mb.f.length-1;0<=c;c--){var d=this.Mb.f[c];if(null!==(b.get(d.ca.getName())||null))break;b.set(d.ca.getName(),new Yf([ld()]))}this.Cd=1==this.Mb.f.length?B(b)[0].Cb():ti(xi(this,b));this.Se=a;return this.Cd};function xi(a,b){var c=A(),d=0;a.Mb.f.forEach(function(a){c.set(a.ca.getName(),d);d++});return Xb(b).sort(function(a,b){return c.get(a)-c.get(b)}).map(function(a){return b.get(a)})};function yi(a,b){this.of=b;this.C=a.j(ic)}function zi(a,b,c){c=c.filter(a.Yf,a);if(0==c.length)return null;a=Ai(a,c);if(0==a.length)return null;if(1==a.length)return a[0];var d=Number.MAX_VALUE;return a.reduce(function(a,c){var h=Bi(c,b);return h<d?(d=h,c):a},null)}
function Ai(a,b){return a.of.ya().map(function(a){a=new Ci(this.C,a);Di(a,b);return a},a).filter(function(a){if(null===a.Ba)a=!1;else{for(var b=!1,e=!0,f=0;f<a.ub.f.length;f++){var h=a.Ba.has(a.ub.f[f].ca.getName());if(b&&h){e=!1;break}h||(b=!0)}a=e}return a})}yi.prototype.Yf=function(a){var b;if(b=a instanceof Sd)Td(a),b=null!==a.value&&("between"==a.F||"eq"==a.F||"gt"==a.F||"gte"==a.F||"lt"==a.F||"lte"==a.F);return b?a.N.G()==this.of:!1};
function Ci(a,b){this.C=a;this.ub=b;this.Uf=C(this.ub.f.map(function(a){return a.ca.getName()}));this.Td=this.Ba=null}function Ei(a){null===a.Td&&(a.Td=new vi(a.ub,a.Ba));return a.Td}function Di(a,b){b.forEach(function(a){var b=a.fb()[0].getName();this.Uf.has(b)&&(null===this.Ba&&(this.Ba=new Jc),this.Ba.set(b,a.V()))},a)}function Bi(a,b){var c=Ei(a).ad(b),d=a.C.get(a.ub.m());return c.reduce(function(a,b){return a+d.Yc(b)},0)};function Fi(a,b,c,d){T.call(this,0,-1);this.C=a.j(ic);this.index=b;this.Re=c;this.he=d;this.Rc=this.Qc=!1}t(Fi,T);Fi.prototype.toString=function(){return"index_range_scan("+this.index.m()+", ?, "+(this.he?"reverse":"natural")+(this.Qc?", limit:?":"")+(this.Rc?", skip:?":"")+")"};Fi.prototype.Oc=function(a){var b=this.toString(),c=this.Re.ad(a),b=b.replace("?",c.toString());this.Qc&&(b=b.replace("?",a.W.toString()));this.Rc&&(b=b.replace("?",a.K.toString()));return b};
Fi.prototype.ea=function(a,b,c){a=this.Re.ad(c);b=this.C.get(this.index.m());c=(1==a.length&&a[0]instanceof gd&&md(a[0])?df(b.get(a[0].b),!1,this.Qc?c.W:void 0,this.Rc?c.K:void 0):b.Xa(a,this.he,this.Qc?c.W:void 0,this.Rc?c.K:void 0)).map(function(a){return new y(a,{})},this);return[vd(c,[this.index.Nc])]};function Gi(a){T.call(this,0,1);this.md=a}t(Gi,T);Gi.prototype.toString=l("select(?)");Gi.prototype.Oc=function(a){a=Wd(a,this.md);return this.toString().replace("?",a.toString())};Gi.prototype.ea=function(a,b,c){return[Wd(c,this.md).eval(a[0])]};function Hi(a,b){T.call(this,0,1);this.S=a.j(hc);this.O=b}t(Hi,T);Hi.prototype.toString=function(){return"table_access_by_row_id("+this.O.getName()+")"};Hi.prototype.ea=function(a){return[vd($e(this.S,pd(a[0])),[J(this.O)])]};function Ii(a){this.h=a}t(Ii,$g);Ii.prototype.lb=function(a,b){this.Z=a;bg(a,function(a){return a instanceof ii}).forEach(function(a){var d=Ji(a);if(0!=d.length){var e=zi(new yi(this.h,a.table),b,d.map(function(a){return Wd(b,a.md)}));if(null!==e){var f=A();d.forEach(function(a){f.set(a.md,a)},this);this.Z=Ki(this,e,f,a)}}},this);return this.Z};function Ji(a){var b=[];for(a=a.getParent();a;)a instanceof Gi&&b.push(a),a=a.getParent();return b}
function Ki(a,b,c,d){(null===b.Ba?[]:b.Ba.values()).map(function(a){return c.get(a)}).forEach(cg);b=new Fi(a.h,b.ub,Ei(b),!1);a=new Hi(a.h,d.table);Md(a,b);gg(d,d,a,b);return b.gb()};function Li(a,b){T.call(this,0,-1);this.C=a.j(ic);this.O=b}t(Li,T);Li.prototype.toString=function(){return"insert("+this.O.getName()+")"};Li.prototype.ea=function(a,b,c){Mi(this.O,c.values,this.C);b.vb(this.O,c.values);return[vd(c.values,[this.O.getName()])]};function Mi(a,b,c){a=a.Bb().bd();if(null===a?0:a.f[0].autoIncrement){var d=a.f[0].ca.getName();c=c.get(a.m()).max();var e=null===c?0:c[0];b.forEach(function(a){if(0==a.o[d]||null==a.o[d])e++,a.o[d]=e})}}
function Ni(a,b){T.call(this,0,-1);this.C=a.j(ic);this.O=b}t(Ni,T);Ni.prototype.toString=function(){return"insert_replace("+this.O.getName()+")"};Ni.prototype.ea=function(a,b,c){Mi(this.O,c.values,this.C);b.Od(this.O,c.values);return[vd(c.values,[this.O.getName()])]};function Oi(){T.call(this,0,1)}t(Oi,T);Oi.prototype.toString=l("limit(?)");Oi.prototype.Oc=function(a){return this.toString().replace("?",a.W.toString())};Oi.prototype.ea=function(a,b,c){a[0].entries.splice(c.W);return a};function Pi(a){T.call(this,0,1);this.M=a}t(Pi,T);m=Pi.prototype;m.toString=function(){return"order_by("+ae(this.M)+")"};m.ea=function(a){if(1==a.length){var b;b=a[0];for(var c=null,d=0;d<this.M.length;d++){var e=wg(this.M[d].N);if(null!==b.Va&&b.Va.has(e.m())){c=e;break}}b=c;(null===b?a[0]:qd(a[0],b)).entries.sort(this.Kf.bind(this))}else a.sort(this.ug.bind(this));return a};
m.U=function(a,b){var c=null,d=null,e=null,f=-1;do f++,e=this.M[f].N,c=this.M[f].jb,d=a(e),e=b(e);while(d==e&&f+1<this.M.length);d=d<e?-1:d>e?1:0;return 1==c?d:-d};m.ug=function(a,b){return this.U(function(b){return b instanceof S?qd(a,b):I(a.entries[a.entries.length-1],b)},function(a){return a instanceof S?qd(b,a):I(b.entries[b.entries.length-1],a)})};m.Kf=function(a,b){return this.U(function(b){return I(a,b)},function(a){return I(b,a)})};function Qi(a,b){this.Ia=a;this.J=b}function Ri(a){return a.J.some(function(a){return a instanceof S},a)?Si(a):Ti(a)}function Si(a){if(1==a.J.length&&"DISTINCT"==a.J[0].Hb)return a=qd(a.Ia,a.J[0]).entries.map(function(a){var b=new wd(new y(-1,{}),1<this.Ia.L.size);yd(b,this.J[0],I(a,this.J[0].child));return b},a),new G(a,[]);var b=new wd(new y(-1,{}),1<a.Ia.L.size);a.J.forEach(function(a){var d=a instanceof S?qd(this.Ia,a):I(this.Ia.entries[0],a);yd(b,a,d)},a);return new G([b],H(a.Ia))}
function Ti(a){var b=Array(a.Ia.entries.length),c=1<a.Ia.L.size;a.Ia.entries.forEach(function(a,e){b[e]=new wd(new y(a.sa.id(),{}),c);this.J.forEach(function(c){yd(b[e],c,I(a,c))},this)},a);return new G(b,H(a.Ia))}function Ui(a,b){var c=a.map(function(a){return Ri(new Qi(a,b)).entries[0]});return new G(c,H(a[0]))};function Vi(a,b){T.call(this,0,1);this.f=a;this.Lb=b}t(Vi,T);Vi.prototype.toString=function(){var a="project("+this.f.toString();if(null!==this.Lb)var b=this.Lb.map(function(a){return a.m()}).join(", "),a=a+(", groupBy("+b+")");return a+")"};Vi.prototype.ea=function(a){0==a.length?a=[sd()]:1==a.length?(a=a[0],a=[0==this.f.length?a:Ri(new Qi(a,this.f))]):a=[Ui(a,this.f)];return a};function Wi(a){return a.f.some(function(a){return a instanceof S})||null!==a.Lb};function Xi(){T.call(this,0,1)}t(Xi,T);Xi.prototype.toString=l("skip(?)");Xi.prototype.Oc=function(a){return this.toString().replace("?",a.K.toString())};Xi.prototype.ea=function(a,b,c){return[new G(a[0].entries.slice(c.K),H(a[0]))]};function Yi(){}t(Yi,$g);Yi.prototype.lb=function(a,b){if(!q(b.W)&&!q(b.K))return a;var c=Zi(a);if(null===c)return a;bg(a,function(a){return a instanceof Oi||a instanceof Xi}).forEach(function(a){a instanceof Oi?c.Qc=!0:c.Rc=!0;cg(a)},this);return c.gb()};function Zi(a){a=bg(a,function(a){return a instanceof Fi},function(a){return a instanceof Vi&&Wi(a)||a instanceof Pi||1!=L(a).length||a instanceof Gi});return 0<a.length?a[0]:null};function $i(a){this.h=a}t($i,$g);$i.prototype.lb=function(a,b){var c=aj(a,b);if(null===c)return a;var d;a:{var e=c;d=bj(Kd(c,0));if(null!==d){var f;f=c.M;for(var h=null,k=d.table.ya(),n=0;n<k.length&&null===h;n++)h=cj(k[n],f);f=h;if(null===f){d=e;break a}e=new Fi(this.h,f.ub,new ui(f.ub),f.Oe);f=new Hi(this.h,d.table);Md(f,e);cg(c);e=gg(d,d,f,e)}d=e}if(d==c)a:if(d=c,e=dj(Kd(c,0)),null!==e){f=cj(e.index,c.M);if(null===f)break a;e.he=f.Oe;d=cg(c).parent}return d.gb()};
function dj(a){a=bg(a,function(a){return a instanceof Fi},function(a){return 1!=L(a).length});return 0<a.length?a[0]:null}function bj(a){a=bg(a,function(a){return a instanceof ii},function(a){return 1!=L(a).length});return 0<a.length?a[0]:null}function aj(a,b){return q(b.M)?bg(a,function(a){return a instanceof Pi})[0]:null}function cj(a,b){if(a.f.length!=b.length||!b.every(function(b,c){return b.N.getName()==a.f[c].ca.getName()}))return null;var c=ej(b,a);return c[0]||c[1]?{ub:a,Oe:c[1]}:null}
function ej(a,b){var c=a.reduce(function(a,b){return a<<1|(0==b.jb?0:1)},0),d=b.f.reduce(function(a,b){return a<<1|(0==b.jb?0:1)},0),c=c^d;return[0==c,c==Math.pow(2,Math.max(a.length,b.f.length))-1]};function fj(a,b,c){this.Ca=a;this.de=b;this.Sb=c}fj.prototype.ec=function(){this.Sb.forEach(function(a){this.Ca=a.lb(this.Ca,this.de)},this);return this.Ca};function gj(a,b){T.call(this,0,1);this.O=a;this.Dg=b}t(gj,T);gj.prototype.toString=function(){return"update("+this.O.getName()+")"};gj.prototype.ea=function(a,b){var c=a[0].entries.map(function(a){var b=this.O.Ab(a.sa.Ea());this.Dg.forEach(function(a){b.o[a.N.getName()]=a.value},this);return b},this);b.update(this.O,c);return[sd()]};function hj(a){this.h=a;this.je=[new si,new Ii(this.h),new $i(this.h),new Yi,new ji(this.h)];this.Gd=[new Ii(this.h)]}hj.prototype.create=function(a,b){var c=a.gb();if(c instanceof Ng||c instanceof Mg)return ij(this,a,b);if(c instanceof Tg||c instanceof Xg||c instanceof Yg)return ij(this,a,b,this.je);if(c instanceof Og||c instanceof Pg)return ij(this,a,b,this.Gd);throw new E(8);};function ij(a,b,c,d){a=$f(b.gb(),a.gg.bind(a));null!=d&&(a=(new fj(a,c,d)).ec());return new be(a,b.ba())}
hj.prototype.gg=function(a){if(a instanceof Tg)return new Vi(a.f,a.Lb);if(a instanceof Wg)return new ki(a.f);if(a instanceof Vg)return new Ag(a.f);if(a instanceof Ug)return new Pi(a.M);if(a instanceof Yg)return new Xi;if(a instanceof Xg)return new Oi;if(a instanceof Qg)return new Gi(a.I.V());if(a instanceof Sg)return new eh;if(a instanceof Zg)return new mi(this.h,a.I,a.Nb);if(a instanceof Rg)return new ii(this.h,a.table);if(a instanceof Og)return new gi(a.table);if(a instanceof Pg)return new gj(a.table,
a.qe);if(a instanceof Ng)return new Ni(this.h,a.table);if(a instanceof Mg)return new Li(this.h,a.table);throw new E(514);};function jj(a){this.eg=new fi;this.pg=new hj(a)};function kj(){this.Ve=A()}function lj(a,b){var c=a.Ve.get(b.getName())||null;null===c&&(c=new mj,a.Ve.set(b.getName(),c));return c}function nj(a,b,c,d){c.forEach(function(a){a=lj(this,a);0==d?(a.Za=null,a.tc=b):3==d?(null===a.Ub&&(a.Ub=C()),a.Ub.add(b),null===a.Qa&&(a.Qa=C()),a.Qa.delete(b)):1==d?(null===a.Qa&&(a.Qa=C()),a.Qa.add(b)):2==d&&(a.Za=b)},a)}
function oj(a,b,c,d){var e=!0;c.forEach(function(a){if(e){a=lj(this,a);var c=null===a.Qa||0==a.Qa.size;e=0==d?(null===a.Ub||0==a.Ub.size)&&c&&null===a.tc&&null!==a.Za&&a.Za==b:3==d?null===a.tc&&null===a.Za&&null!==a.Qa&&a.Qa.has(b):1==d?null===a.Za:c&&(null===a.Za||a.Za==b)}},a);return e}function pj(a,b,c,d){var e=oj(a,b,c,d);e&&nj(a,b,c,d);return e}kj.prototype.releaseLock=function(a,b){b.forEach(function(b){lj(this,b).releaseLock(a)},this)};
function qj(a,b){b.forEach(function(a){lj(this,a).Za=null},a)}function mj(){this.Ub=this.Qa=this.Za=this.tc=null}mj.prototype.releaseLock=function(a){this.tc==a&&(this.tc=null);this.Za==a&&(this.Za=null);null===this.Qa||this.Qa.delete(a);null===this.Ub||this.Ub.delete(a)};function rj(){this.Rb=new sj;this.Dc=new kj}function je(a,b){(2>b.getPriority()||2>b.getPriority())&&qj(a.Dc,b.ba());a.Rb.vb(b);tj(a);return b.Kb().ha}function tj(a){for(var b=a.Rb.Cb(),c=0;c<b.length;c++){var d=b[c],e=!1;if(e=0==d.H()?uj(a,d,1,3):uj(a,d,2,0))a.Rb.remove(d),e=a,d.exec().then(e.mg.bind(e,d),e.lg.bind(e,d))}}function uj(a,b,c,d){var e=!1;pj(a.Dc,b.V(),b.ba(),c)&&(e=pj(a.Dc,b.V(),b.ba(),d));return e}rj.prototype.mg=function(a,b){this.Dc.releaseLock(a.V(),a.ba());a.Kb().resolve(b);tj(this)};
rj.prototype.lg=function(a,b){this.Dc.releaseLock(a.V(),a.ba());a.Kb().reject(b);tj(this)};function sj(){this.Rb=[]}sj.prototype.vb=function(a){cf(this.Rb,a,function(a,c){var d=a.getPriority()-c.getPriority();return 0==d?a.V()-c.V():d})};sj.prototype.Cb=function(){return this.Rb.slice()};sj.prototype.remove=function(a){var b=this.Rb;a=ya(b,a);var c;(c=0<=a)&&xa.splice.call(b,a,1);return c};function vj(a,b){this.Hd=Bd.xc();this.ee=a;this.hd=b;this.J=wj(this)}function wj(a){if(0<a.ee.f.length)return a.ee.f;var b=[];a.ee.b.forEach(function(a){a.fb().forEach(function(a){b.push(a)})});return b}vj.prototype.U=function(a,b){return this.J.every(function(c){return Hd(this.Hd,c.H(),"eq")(I(a,c),I(b,c))},this)};
function xj(a,b,c){var d=null===b?[]:b.entries,e=wb(d,c.entries,a.U.bind(a),function(a){return d[a]});b=[];for(var f=0,h=0;h<d.length;h++){var k=d[h];e[f]==k?f++:(k=a.hd.splice(f,1),k=yj(h,k,0,a.hd),b.push(k))}e=wb(d,c.entries,a.U.bind(a),function(a,b){return c.entries[b]});for(h=f=0;h<c.entries.length;h++)k=c.entries[h],e[f]==k?f++:(a.hd.splice(h,0,k.sa.o),k=yj(h,[],1,a.hd),b.push(k));return b}function yj(a,b,c,d){return{Fg:c,index:a,object:d,Ig:b,type:"splice"}};function zj(){this.cc=A()}zj.prototype.ud=function(a,b){var c=ka(a.a).toString(),d=this.cc.get(c)||null;null===d&&(d=new Aj(a),this.cc.set(c,d));d.ud(b)};zj.prototype.fe=function(a,b){var c=ka(a.a).toString(),d=this.cc.get(c)||null;d.fe(b);0<d.Hc.size||this.cc.delete(c)};function ie(a,b){var c=C();b.forEach(function(a){c.add(a.getName())});var d=[];a.cc.forEach(function(a){a=a.zc();a.context.b.some(function(a){return c.has(a.getName())})&&d.push(a)});return d}
function ge(a,b,c){b=ka(null!=b.Xc?b.Xc:b).toString();a=a.cc.get(b)||null;null!==a&&Bj(a,c)}function Aj(a){this.Af=a;this.Hc=C();this.jg=[];this.Te=null;this.If=new vj(a.a,this.jg)}Aj.prototype.ud=function(a){this.Hc.has(a)||this.Hc.add(a)};Aj.prototype.fe=function(a){return this.Hc.delete(a)};Aj.prototype.zc=function(){var a=this.Af;return{context:a.a,ce:Ch(a)}};function Bj(a,b){var c=xj(a.If,a.Te,b);a.Te=b;0<c.length&&a.Hc.forEach(function(a){a(c)})};function Cj(a,b){var c=a.j(mc),d=b||{},e=new Ze(c);a.kb(hc,e);var e=null,f=!1;null!=d.storeType?e=d.storeType:(q(Wb)||(Wb=new Vb),e=Wb,e=e.Vf?0:e.Eg?4:1);switch(e){case 0:e=new Ge(a,c);break;case 1:e=new Me(c);break;case 5:e=new Oe(c);break;case 4:e=new We(a,c,d.webSqlDbSize);break;case 3:e=new ve(c,d.firebase);f=!0;break;default:throw new E(300);}a.kb(gc,e);var h=new Xf;a.kb(ic,h);return e.Fa(d.onUpgrade).then(function(){var b=new jj(a);a.kb(jc,b);b=new rj;a.kb(kc,b);b=new zj;a.kb(lc,b);return h.Fa(c)}).then(function(){if(f){var b=
new ke(a);b.Ja.subscribe(b.Yd.bind(b))}return(new Qf(a)).Fa(c)})};function Dj(a){this.h=a;this.i=a.j(mc);this.$=C(this.i.ra());this.$a=x()}m=Dj.prototype;m.exec=function(){var a=this.h.j(ic),b=this.h.j(hc),c={};this.i.ra().forEach(function(d){var f=a.get(Je(d)).Xa(),f=$e(b,f).map(function(a){return a.o});c[d.getName()]=f});var d={name:this.i.name(),version:this.i.version(),tables:c},d=new wd(new y(-1,d),!0);return w([new G([d],[])])};m.H=l(0);m.ba=g("$");m.Kb=g("$a");m.V=function(){return ka(this)};m.getPriority=l(0);function Ej(a,b){this.h=a;this.i=a.j(mc);this.$=C(this.i.ra());this.$a=x();this.va=b;this.Ja=a.j(gc);this.S=a.j(hc);this.C=a.j(ic)}m=Ej.prototype;
m.exec=function(){if(!(this.Ja instanceof Ge||this.Ja instanceof Me||this.Ja instanceof We))throw new E(300);var a;a:{a=this.i.ra();for(var b=0;b<a.length;++b)if(0<this.C.get(Je(a[b])).Ma().oa){a=!1;break a}a=!0}if(!a)throw new E(110);if(this.i.name()!=this.va.name||this.i.version()!=this.va.version)throw new E(111);if(null==this.va.tables)throw new E(112);return Fj(this)};m.H=l(1);m.ba=g("$");m.Kb=g("$a");m.V=function(){return ka(this)};m.getPriority=l(0);
function Fj(a){var b=new bd(a.h,a.$),b=a.Ja.zb(a.H(),D(a.$),b),c;for(c in a.va.tables){var d=a.i.table(c),e=a.va.tables[c].map(function(a){return d.rb(a)}),f=b.G(c,d.Ab);a.S.Tb(c,e);var h=a.C.ic.get(c)||[];e.forEach(function(a){h.forEach(function(b){var c=a.Db(b.getName());b.add(c,a.id())})});f.put(e)}return b.ia()};function Gj(a,b){this.h=a;this.Ja=a.j(gc);this.Da=a.j(kc);this.Eb=a.j(lc);this.$=C(b);this.Oa=new bd(this.h,this.$);this.$a=x();this.uc=x();this.te=x()}m=Gj.prototype;m.exec=function(){this.te.resolve();return this.uc.ha};m.H=l(1);m.ba=g("$");m.Kb=g("$a");m.V=function(){return ka(this)};m.getPriority=l(2);function Hj(a){je(a.Da,a);return a.te.ha}
function Ij(a,b){var c=b.zc();return c.ce.gb().exec(a.Oa,c.context).then(function(a){return od(a[0])},function(a){this.Oa.Fb();var b=new ib(a.name);this.uc.reject(b);throw a;}.bind(a))}m.ia=function(){this.Ja.zb(this.H(),D(this.$),this.Oa).ia().then(function(){this.Lc();this.uc.resolve()}.bind(this),function(a){this.Oa.Fb();this.uc.reject(a)}.bind(this));return this.$a.ha};m.Fb=function(){this.Oa.Fb();this.uc.resolve();return this.$a.ha};
m.Lc=function(){var a=ie(this.Eb,this.$);0!=a.length&&(a=new fe(this.h,a),je(this.Da,a))};function Jj(a){this.h=a;this.Da=a.j(kc);this.Pc=null;this.Ra=0;0==Kj.size&&(Kj.set(0,C([1,4])),Kj.set(1,C([2])),Kj.set(2,C([3,5,6])),Kj.set(3,C([2,7])),Kj.set(4,C([7])),Kj.set(5,C([7])),Kj.set(6,C([7])))}r("lf.proc.Transaction",Jj);var Kj=A();function Lj(a,b){var c=Kj.get(a.Ra)||null;if(null===c||!c.has(b))throw new E(107,a.Ra,b);a.Ra=b}
Jj.prototype.exec=function(a){Lj(this,4);var b=[];try{a.forEach(function(a){a.bb();b.push(a.zc())},this)}catch(c){return Lj(this,7),ab(c)}a=new fh(this.h,b);return je(this.Da,a).then(function(a){Lj(this,7);return a.map(function(a){return od(a)})}.bind(this),function(a){Lj(this,7);throw a;}.bind(this))};Jj.prototype.exec=Jj.prototype.exec;Jj.prototype.yf=function(a){Lj(this,1);this.Pc=new Gj(this.h,a);return Hj(this.Pc).then(function(){Lj(this,2)}.bind(this))};Jj.prototype.begin=Jj.prototype.yf;
Jj.prototype.xf=function(a){Lj(this,3);return Ij(this.Pc,a).then(function(a){Lj(this,2);return a}.bind(this),function(a){Lj(this,7);throw a;}.bind(this))};Jj.prototype.attach=Jj.prototype.xf;Jj.prototype.ia=function(){Lj(this,5);return this.Pc.ia().then(function(){Lj(this,7)}.bind(this))};Jj.prototype.commit=Jj.prototype.ia;Jj.prototype.Fb=function(){Lj(this,6);return this.Pc.Fb().then(function(){Lj(this,7)}.bind(this))};Jj.prototype.rollback=Jj.prototype.Fb;function W(a){this.h=a;this.i=a.j(mc);this.Nd=!1}r("lf.proc.Database",W);W.prototype.Fa=function(a){this.h.kb(mc,this.i);return Cj(this.h,a).then(function(){this.Nd=!0;this.Da=this.h.j(kc);return this}.bind(this))};W.prototype.init=W.prototype.Fa;W.prototype.tb=g("i");W.prototype.getSchema=W.prototype.tb;function Mj(a){if(!a.Nd)throw new E(2);}W.prototype.select=function(a){Mj(this);return new V(this.h,1!=arguments.length||null!=arguments[0]?Array.prototype.slice.call(arguments):[])};
W.prototype.select=W.prototype.select;W.prototype.vb=function(){Mj(this);return new Eh(this.h)};W.prototype.insert=W.prototype.vb;W.prototype.Od=function(){Mj(this);return new Eh(this.h,!0)};W.prototype.insertOrReplace=W.prototype.Od;W.prototype.update=function(a){Mj(this);return new Oh(this.h,a)};W.prototype.update=W.prototype.update;W.prototype.delete=function(){Mj(this);return new Dh(this.h)};W.prototype["delete"]=W.prototype.delete;
W.prototype.observe=function(a,b){Mj(this);this.h.j(lc).ud(a,b)};W.prototype.observe=W.prototype.observe;W.prototype.unobserve=function(a,b){Mj(this);this.h.j(lc).fe(a,b)};W.prototype.unobserve=W.prototype.unobserve;W.prototype.Gf=function(){Mj(this);return new Jj(this.h)};W.prototype.createTransaction=W.prototype.Gf;W.prototype.close=function(){try{this.h.j(gc).close()}catch(a){}this.h.clear();this.Nd=!1};W.prototype.close=W.prototype.close;
W.prototype.Of=function(){Mj(this);var a=new Dj(this.h);return je(this.Da,a).then(function(a){return od(a[0])[0]})};W.prototype["export"]=W.prototype.Of;W.prototype.import=function(a){Mj(this);a=new Ej(this.h,a);return je(this.Da,a).then(l(null))};W.prototype["import"]=W.prototype.import;function X(a,b,c,d,e,f){this.O=a;this.u=b;this.Pe=c;this.Ne=d;this.rf=e;this.ab=f||null}r("lf.schema.BaseColumn",X);m=X.prototype;m.getName=g("u");m.m=function(){return J(this.O)+"."+this.u};m.toString=function(){return this.m()};m.G=g("O");m.H=g("rf");X.prototype.getType=X.prototype.H;X.prototype.Wa=g("ab");X.prototype.ya=function(){null==this.ka&&(this.ka=[],this.G().ya().forEach(function(a){-1!=a.f.map(function(a){return a.ca.getName()}).indexOf(this.u)&&this.ka.push(a)},this));return this.ka};
X.prototype.xa=function(){if(!q(this.fa)){var a=this.ya().filter(function(a){return 1!=a.f.length?!1:a.f[0].ca.getName()==this.getName()},this);this.fa=0<a.length?a[0]:null}return this.fa};X.prototype.Bc=g("Ne");X.prototype.isNullable=X.prototype.Bc;X.prototype.Cc=g("Pe");X.prototype.Na=function(a){return qg(this,a,"eq")};X.prototype.eq=X.prototype.Na;X.prototype.We=function(a){return qg(this,a,"neq")};X.prototype.neq=X.prototype.We;X.prototype.Ud=function(a){return qg(this,a,"lt")};
X.prototype.lt=X.prototype.Ud;X.prototype.fg=function(a){return qg(this,a,"lte")};X.prototype.lte=X.prototype.fg;X.prototype.Qf=function(a){return qg(this,a,"gt")};X.prototype.gt=X.prototype.Qf;X.prototype.Rf=function(a){return qg(this,a,"gte")};X.prototype.gte=X.prototype.Rf;X.prototype.match=function(a){return qg(this,a,"match")};X.prototype.match=X.prototype.match;X.prototype.zf=function(a,b){return qg(this,[a,b],"between")};X.prototype.between=X.prototype.zf;
X.prototype.Sf=function(a){return qg(this,a,"in")};X.prototype["in"]=X.prototype.Sf;X.prototype.ag=function(){return this.Na(null)};X.prototype.isNull=X.prototype.ag;X.prototype.$f=function(){return this.We(null)};X.prototype.isNotNull=X.prototype.$f;X.prototype.mc=function(a){return new X(this.O,this.u,this.Pe,this.Ne,this.rf,a)};X.prototype.as=X.prototype.mc;function Nj(){this.pd=A()}var Oj;Nj.prototype.clear=function(){this.pd.clear()};Nj.prototype.clear=Nj.prototype.clear;Nj.prototype.kb=function(a,b){this.pd.set(a.toString(),b);return b};Nj.prototype.registerService=Nj.prototype.kb;Nj.prototype.j=function(a){var b=this.pd.get(a.toString())||null;if(null===b)throw new E(7,a.toString());return b};Nj.prototype.getService=Nj.prototype.j;Nj.prototype.Sd=function(a){return this.pd.has(a.toString())};Nj.prototype.isRegistered=Nj.prototype.Sd;function Pj(a){this.i=a;this.zd=new Jc;this.ge=new Jc;this.Ye=new Jc;this.Ce=A();this.g=new Jc;this.ye=new Jc;this.ef=new Jc;this.Be=new Jc;Qj(this)}function Qj(a){a.i.ra().forEach(function(a){var c=a.getName();a.Bb().Ld().forEach(function(d){this.Ye.set(c,this.i.table(d.Pa));this.g.set(d.Pa,a);0==d.action?(this.ge.set(d.Pa,d),this.ef.set(d.Pa,a)):(this.zd.set(d.Pa,d),this.ye.set(d.Pa,a));this.Ce.set(a.getName()+"."+d.cb,d.Pa);this.Be.set(d.Pa+"."+d.gc,a.getName())},this)},a)}
function Sc(a,b,c){if(null!=c)return 1==c?a.zd.get(b):a.ge.get(b);c=a.zd.get(b);a=a.ge.get(b);return null===c&&null===a?null:(c||[]).concat(a||[])}function lh(a,b){var c=b.get(a);return null===c?[]:c}function nh(a,b){var c=C();b.forEach(function(a){(a=this.Ce.get(a))&&c.add(a)},a);return D(c).map(function(a){return this.i.table(a)},a)}function jh(a,b,c){return null!=c?0==c?lh(b,a.ef):lh(b,a.ye):lh(b,a.g)}
function oh(a,b){var c=C();b.forEach(function(a){(a=this.Be.get(a))&&a.forEach(function(a){c.add(a)})},a);return D(c).map(function(a){return this.i.table(a)},a)};function Rj(a,b,c){this.qg=a;this.ig=b;this.Pf=c}r("lf.schema.Constraint",Rj);Rj.prototype.bd=g("qg");Rj.prototype.getPrimaryKey=Rj.prototype.bd;Rj.prototype.Ld=g("Pf");Rj.prototype.getForeignKeys=Rj.prototype.Ld;function Sj(a,b,c){var d=a.ref.split(".");if(2!=d.length)throw new E(540,c);this.Ae=b;this.cb=a.local;this.Pa=d[0];this.gc=d[1];this.name=b+"."+c;this.action=a.action;this.timing=a.timing};function Y(a){Tj(a);this.Hd=Bd.xc();this.u=a;this.J=A();this.rd=C();this.jc=C();this.Gc=C();this.Aa=null;this.ka=A();this.ld=!1;this.sb=[]}r("lf.schema.TableBuilder",Y);function Uj(a){this.name=a.name;this.jb=a.order;this.autoIncrement=a.autoIncrement}var Vj=C([0,6]);function Tj(a){if(!/^[A-Za-z_][A-Za-z0-9_]*$/.test(a))throw new E(502,a);}function Wj(a,b){if(b==a.u)throw new E(546,b);if(a.J.has(b)||a.ka.has(b)||a.jc.has(b))throw new E(503,a.u+"."+b);}
function Xj(a,b){var c=!1;b.forEach(function(a){var b=this.J.get(a.name);c=c||a.autoIncrement;if(a.autoIncrement&&3!=b)throw new E(504);},a);if(c&&1<b.length)throw new E(505);}function Yj(a){if(null!==a.Aa){var b=a.ka.get(a.Aa).map(function(a){return a.name}),c=0;if(a.sb.some(function(a,e){c=e;return-1!=b.indexOf(a.cb)},a))throw new E(543,a.sb[c].name);}}
function Zj(a){if(null!==a.Aa){var b=function(a){return a.name},c=JSON.stringify(a.ka.get(a.Aa).map(b));a.ka.forEach(function(a,e){if(e!=this.Aa){var f=a.map(b);if(JSON.stringify(f)==c)throw new E(544,this.u+"."+e);}},a)}}function ak(a){null===a.Aa||a.ka.get(a.Aa).forEach(function(a){if(this.Gc.has(a.name))throw new E(545,this.u+"."+a.name);},a)}Y.prototype.sf=function(a,b){Tj(a);Wj(this,a);this.J.set(a,b);Vj.has(b)&&this.ve([a]);return this};Y.prototype.addColumn=Y.prototype.sf;
Y.prototype.uf=function(a,b){var c=this.u;this.Aa="pk"+(c[0].toUpperCase()+c.substring(1));Tj(this.Aa);Wj(this,this.Aa);c=bk(this,a,!0,void 0,b);Xj(this,c);1==c.length&&this.rd.add(c[0].name);this.jc.add(this.Aa);this.ka.set(this.Aa,c);return this};Y.prototype.addPrimaryKey=Y.prototype.uf;
Y.prototype.tf=function(a,b){Tj(a);Wj(this,a);var c=new Sj(b,this.u,a);q(c.action)||(c.action=0);q(c.timing)||(c.timing=0);if(1==c.action&&1==c.timing)throw new E(506);if(!this.J.has(c.cb))throw new E(540,a);this.sb.push(c);this.ue(a,[c.cb],this.rd.has(c.cb));return this};Y.prototype.addForeignKey=Y.prototype.tf;Y.prototype.vf=function(a,b){Tj(a);Wj(this,a);var c=bk(this,b,!0);ck(this,a,c);1==c.length&&(this.rd.add(c[0].name),dk(this,c[0].name));this.ka.set(a,c);this.jc.add(a);return this};
Y.prototype.addUnique=Y.prototype.vf;function dk(a,b){a.sb.forEach(function(a){a.cb==b&&this.jc.add(a.name.split(".")[1])},a)}Y.prototype.ve=function(a){a=bk(this,a,!1);ek(this,a);a.forEach(function(a){this.Gc.add(a.name)},this);return this};Y.prototype.addNullable=Y.prototype.ve;function ek(a,b){Xb(a.ka).forEach(function(a){var d=C();this.ka.get(a).forEach(function(a){d.add(a.name)});var e=b.filter(function(a){return d.has(a.name)});if(1<d.size&&0<e.length)throw new E(507,a,e.join(","));},a)}
Y.prototype.ue=function(a,b,c,d){Tj(a);Wj(this,a);b=bk(this,b,!0,d);ck(this,a,b);c&&this.jc.add(a);this.ka.set(a,b);return this};Y.prototype.addIndex=Y.prototype.ue;function ck(a,b,c){if(1<c.length&&(a=c.filter(function(a){return this.Gc.has(a.name)},a),0<a.length))throw new E(507,b,a.join(","));}Y.prototype.xb=ba("ld");Y.prototype.persistentIndex=Y.prototype.xb;Y.prototype.tb=function(){Yj(this);Zj(this);ak(this);return new (fk(this))};Y.prototype.getSchema=Y.prototype.tb;
function gk(a){return a.sb}function bk(a,b,c,d,e){var f=b,f="string"==typeof b[0]?b.map(function(a){return new Uj({name:a,order:null!=d?d:1,autoIncrement:e||!1})}):b.map(function(a){return new Uj(a)});f.forEach(function(a){if(!this.J.has(a.name))throw new E(508,this.u,a.name);if(c){var b=this.J.get(a.name);if(0==b||6==b)throw new E(509,this.u,a.name);}},a);return f}
function fk(a){function b(){function b(c){return a.ka.get(c).map(function(a){return{ca:this[a.name],jb:a.jb,autoIncrement:a.autoIncrement}},this)}var d=Xb(a.J).map(function(b){this[b]=new X(this,b,a.rd.has(b),a.Gc.has(b),a.J.get(b));return this[b]},this),e=Xb(a.ka).map(function(d){return new sg(a.u,d,a.jc.has(d),b.call(this,d))},this);R.call(this,a.u,d,e,a.ld);var f=null===a.Aa?null:new sg(a.u,a.Aa,!0,b.call(this,a.Aa)),h=d.filter(function(b){return!a.Gc.has(b.getName())});this.Cf=new Rj(f,h,a.sb);
this.hf=hk(a,d,e)}t(b,R);b.prototype.rb=function(a){return new this.hf(ob++,a)};b.prototype.createRow=b.prototype.rb;b.prototype.Ab=function(a){var b={};this.fb().forEach(function(e){var f=e.getName();e=e.H();var h=a.value[f];if(0==e)if(e=h,null!=e&&""!=e){0!=e.length%2&&(e="0"+e);for(var h=new ArrayBuffer(e.length/2),k=new Uint8Array(h),n=0,z=0;n<e.length;n+=2)k[z++]=parseInt(e.substr(n,2),16);e=h}else e=null;else e=2==e?null!=h?new Date(h):null:h;b[f]=e},this);return new this.hf(a.id,b)};b.prototype.deserializeRow=
b.prototype.Ab;b.prototype.Bb=g("Cf");b.prototype.getConstraint=b.prototype.Bb;return b}
function hk(a,b,c){function d(a,d){this.J=b;this.ka=c;y.call(this,a,d)}t(d,y);d.prototype.Ee=function(){var a={};this.J.forEach(function(b){a[b.getName()]=b.Bc()?null:Ic[b.H()]});return a};d.prototype.pf=function(){var a={};this.J.forEach(function(b){var c=b.getName();b=b.H();var d=this.o[c];a[c]=0==b?null!=d?sb(d):null:2==b?null!=d?d.getTime():null:6==b?null!=d?d:null:d},this);return a};var e=function(a){var b=this.J.get(a.getName()),c=this.Hd.Qe.get(b)||null;return function(b){return c(b[a.getName()])}}.bind(a),
f=function(a){var b=a.map(function(a){return e(a.ca)});return function(a){return b.map(function(b){return b(a)})}}.bind(a),h={};c.forEach(function(a){var b=a.m();a=1==a.f.length?e(a.f[0].ca):f(a.f);h[b]=a});d.prototype.Db=function(a){return-1!=a.indexOf("#")?this.id():h.hasOwnProperty(a)?h[a](this.o):null};return d};function ik(a,b){this.i=new Z(a,b);this.ob=A();this.vc=!1}r("lf.schema.Builder",ik);function jk(a,b){b.sb.forEach(function(a){var d=a.Pa;if(!this.ob.has(d))throw new E(536,a.name);var d=this.ob.get(d).tb(),e=a.gc;if(!d.hasOwnProperty(e))throw new E(537,a.name);if(b.tb()[a.cb].H()!=d[e].H())throw new E(538,a.name);if(!d[e].Cc())throw new E(539,a.name);},a)}ik.prototype.Bf=function(a){a.sb.forEach(function(a){gk(this.ob.get(a.Pa)).forEach(function(c){if(c.cb==a.gc)throw new E(534,a.name);},this)},this)};
function kk(a){a.vc||(a.ob.forEach(function(a){jk(this,a);a=a.tb();this.i.L.set(a.getName(),a)},a),B(a.ob).forEach(a.Bf,a),lk(a),a.ob.clear(),a.vc=!0)}function mk(a,b,c){b.re||(b.re=!0,b.Zd=!0,b.Fe.forEach(function(a){a=c.get(a);if(!a.re)mk(this,a,c);else if(a.Zd&&b!=a)throw new E(533);},a));b.Zd=!1}function lk(a){var b=A();a.i.L.forEach(function(a,d){b.set(d,new nk(d))},a);a.ob.forEach(function(a,d){a.sb.forEach(function(a){b.get(a.Pa).Fe.add(d)})});B(b).forEach(function(a){mk(this,a,b)},a)}
function nk(a){this.Zd=this.re=!1;this.Fe=C();this.Nc=a}ik.prototype.tb=function(){this.vc||kk(this);return this.i};ik.prototype.getSchema=ik.prototype.tb;ik.prototype.He=function(){var a=new fc("ns_"+this.i.name()),b;Oj||(Oj=new Nj);b=Oj;var c=null;b.Sd(a)?c=b.j(a):(c=new Nj,b.kb(a,c));return c};ik.prototype.getGlobal=ik.prototype.He;ik.prototype.connect=function(a){var b=this.He();b.Sd(mc)||b.kb(mc,this.tb());return(new W(b)).Fa(a)};ik.prototype.connect=ik.prototype.connect;
ik.prototype.Ff=function(a){if(this.ob.has(a))throw new E(503,a);if(this.vc)throw new E(535);this.ob.set(a,new Y(a));return this.ob.get(a)};ik.prototype.createTable=ik.prototype.Ff;ik.prototype.ke=function(a){if(this.vc)throw new E(535);this.i.ke(a);return this};ik.prototype.setPragma=ik.prototype.ke;function Z(a,b){this.u=a;this.Xb=b;this.L=A();this.bf={Jf:!1}}r("lf.schema.DatabaseSchema",Z);Z.prototype.name=g("u");Z.prototype.name=Z.prototype.name;Z.prototype.version=g("Xb");
Z.prototype.version=Z.prototype.version;Z.prototype.ra=function(){return B(this.L)};Z.prototype.tables=Z.prototype.ra;Z.prototype.table=function(a){if(!this.L.has(a))throw new E(101,a);return this.L.get(a)};Z.prototype.table=Z.prototype.table;Z.prototype.info=function(){this.Le||(this.Le=new Pj(this));return this.Le};Z.prototype.af=g("bf");Z.prototype.pragma=Z.prototype.af;Z.prototype.ke=ba("bf");r("lf.schema.create",function(a,b){return new ik(a,b)});v.prototype.catch=v.prototype.ne;v.prototype["catch"]=v.prototype.catch;}.bind(window))()
//# sourceMappingURL=lovefield.es6.js.map
