(function(){'use strict';function aa(){return function(){}}function ba(a){return function(b){this[a]=b}}function g(a){return function(){return this[a]}}function l(a){return function(){return a}}var m,p=this;function q(a){return void 0!==a}function ca(){}
function da(a){var b=typeof a;if("object"==b)if(a){if(a instanceof Array)return"array";if(a instanceof Object)return b;var c=Object.prototype.toString.call(a);if("[object Window]"==c)return"object";if("[object Array]"==c||"number"==typeof a.length&&"undefined"!=typeof a.splice&&"undefined"!=typeof a.propertyIsEnumerable&&!a.propertyIsEnumerable("splice"))return"array";if("[object Function]"==c||"undefined"!=typeof a.call&&"undefined"!=typeof a.propertyIsEnumerable&&!a.propertyIsEnumerable("call"))return"function"}else return"null";
else if("function"==b&&"undefined"==typeof a.call)return"object";return b}function ea(a){return null===a}function fa(a){return null!=a}function ga(a){var b=da(a);return"array"==b||"object"==b&&"number"==typeof a.length}function ia(a){return"string"==typeof a}function ja(a){return"function"==da(a)}function ka(a){return a[la]||(a[la]=++ma)}var la="closure_uid_"+(1E9*Math.random()>>>0),ma=0;function na(a,b,c){return a.call.apply(a.bind,arguments)}
function pa(a,b,c){if(!a)throw Error();if(2<arguments.length){var d=Array.prototype.slice.call(arguments,2);return function(){var c=Array.prototype.slice.call(arguments);Array.prototype.unshift.apply(c,d);return a.apply(b,c)}}return function(){return a.apply(b,arguments)}}function qa(a,b,c){qa=Function.prototype.bind&&-1!=Function.prototype.bind.toString().indexOf("native code")?na:pa;return qa.apply(null,arguments)}
function ra(a,b){var c=Array.prototype.slice.call(arguments,1);return function(){var b=c.slice();b.push.apply(b,arguments);return a.apply(this,b)}}function r(a,b){var c=a.split("."),d=p;c[0]in d||!d.execScript||d.execScript("var "+c[0]);for(var e;c.length&&(e=c.shift());)!c.length&&q(b)?d[e]=b:d=d[e]?d[e]:d[e]={}}
function t(a,b){function c(){}c.prototype=b.prototype;a.Fb=b.prototype;a.prototype=new c;a.prototype.constructor=a;a.Ag=function(a,c,f){for(var h=Array(arguments.length-2),k=2;k<arguments.length;k++)h[k-2]=arguments[k];return b.prototype[c].apply(a,h)}};function sa(a){if(Error.captureStackTrace)Error.captureStackTrace(this,sa);else{var b=Error().stack;b&&(this.stack=b)}a&&(this.message=String(a))}t(sa,Error);sa.prototype.name="CustomError";function ta(a,b,c){this.ag=c;this.Ff=a;this.rg=b;this.kd=0;this.fd=null}ta.prototype.get=function(){var a;0<this.kd?(this.kd--,a=this.fd,this.fd=a.next,a.next=null):a=this.Ff();return a};ta.prototype.put=function(a){this.rg(a);this.kd<this.ag&&(this.kd++,a.next=this.fd,this.fd=a)};var ua=Array.prototype,va=ua.indexOf?function(a,b,c){return ua.indexOf.call(a,b,c)}:function(a,b,c){c=null==c?0:0>c?Math.max(0,a.length+c):c;if(ia(a))return ia(b)&&1==b.length?a.indexOf(b,c):-1;for(;c<a.length;c++)if(c in a&&a[c]===b)return c;return-1},wa=ua.forEach?function(a,b,c){ua.forEach.call(a,b,c)}:function(a,b,c){for(var d=a.length,e=ia(a)?a.split(""):a,f=0;f<d;f++)f in e&&b.call(c,e[f],f,a)},xa=ua.map?function(a,b,c){return ua.map.call(a,b,c)}:function(a,b,c){for(var d=a.length,e=Array(d),
f=ia(a)?a.split(""):a,h=0;h<d;h++)h in f&&(e[h]=b.call(c,f[h],h,a));return e},ya=ua.reduce?function(a,b,c,d){d&&(b=qa(b,d));return ua.reduce.call(a,b,c)}:function(a,b,c,d){var e=c;wa(a,function(c,h){e=b.call(d,e,c,h,a)});return e},za=ua.some?function(a,b,c){return ua.some.call(a,b,c)}:function(a,b,c){for(var d=a.length,e=ia(a)?a.split(""):a,f=0;f<d;f++)if(f in e&&b.call(c,e[f],f,a))return!0;return!1};function Aa(a,b,c){return 2>=arguments.length?ua.slice.call(a,b):ua.slice.call(a,b,c)}
function Ba(a){for(var b=[],c=0;c<a;c++)b[c]=0;return b}function Ca(a){for(var b=[],c=0;c<arguments.length;c++){var d=arguments[c];if("array"==da(d))for(var e=0;e<d.length;e+=8192)for(var f=Ca.apply(null,Aa(d,e,e+8192)),h=0;h<f.length;h++)b.push(f[h]);else b.push(d)}return b};var Da;a:{var Ea=p.navigator;if(Ea){var Fa=Ea.userAgent;if(Fa){Da=Fa;break a}}Da=""}function u(a){return-1!=Da.indexOf(a)};function Ga(){return u("Opera")||u("OPR")}function Ha(){return(u("Chrome")||u("CriOS"))&&!Ga()&&!u("Edge")};function Ia(a){p.setTimeout(function(){throw a;},0)}var Ja;
function Ka(){var a=p.MessageChannel;"undefined"===typeof a&&"undefined"!==typeof window&&window.postMessage&&window.addEventListener&&!u("Presto")&&(a=function(){var a=document.createElement("IFRAME");a.style.display="none";a.src="";document.documentElement.appendChild(a);var b=a.contentWindow,a=b.document;a.open();a.write("");a.close();var c="callImmediate"+Math.random(),d="file:"==b.location.protocol?"*":b.location.protocol+"//"+b.location.host,a=qa(function(a){if(("*"==d||a.origin==d)&&a.data==
c)this.port1.onmessage()},this);b.addEventListener("message",a,!1);this.port1={};this.port2={postMessage:function(){b.postMessage(c,d)}}});if("undefined"!==typeof a&&!u("Trident")&&!u("MSIE")){var b=new a,c={},d=c;b.port1.onmessage=function(){if(q(c.next)){c=c.next;var a=c.ve;c.ve=null;a()}};return function(a){d.next={ve:a};d=d.next;b.port2.postMessage(0)}}return"undefined"!==typeof document&&"onreadystatechange"in document.createElement("SCRIPT")?function(a){var b=document.createElement("SCRIPT");
b.onreadystatechange=function(){b.onreadystatechange=null;b.parentNode.removeChild(b);b=null;a();a=null};document.documentElement.appendChild(b)}:function(a){p.setTimeout(a,0)}};function La(){this.td=this.jc=null}var Na=new ta(function(){return new Ma},function(a){a.reset()},100);La.prototype.add=function(a,b){var c=Na.get();c.set(a,b);this.td?this.td.next=c:this.jc=c;this.td=c};La.prototype.remove=function(){var a=null;this.jc&&(a=this.jc,this.jc=this.jc.next,this.jc||(this.td=null),a.next=null);return a};function Ma(){this.next=this.scope=this.Hd=null}Ma.prototype.set=function(a,b){this.Hd=a;this.scope=b;this.next=null};
Ma.prototype.reset=function(){this.next=this.scope=this.Hd=null};function Oa(a,b){Pa||Qa();Ra||(Pa(),Ra=!0);Sa.add(a,b)}var Pa;function Qa(){if(p.Promise&&p.Promise.resolve){var a=p.Promise.resolve(void 0);Pa=function(){a.then(Ta)}}else Pa=function(){var a=Ta;!ja(p.setImmediate)||p.Window&&p.Window.prototype&&p.Window.prototype.setImmediate==p.setImmediate?(Ja||(Ja=Ka()),Ja(a)):p.setImmediate(a)}}var Ra=!1,Sa=new La;function Ta(){for(var a=null;a=Sa.remove();){try{a.Hd.call(a.scope)}catch(b){Ia(b)}Na.put(a)}Ra=!1};function v(a,b){this.Ra=0;this.bf=void 0;this.Wc=this.ac=this.B=null;this.ed=this.Gd=!1;if(a!=ca)try{var c=this;a.call(b,function(a){Ua(c,2,a)},function(a){Ua(c,3,a)})}catch(d){Ua(this,3,d)}}function Va(){this.next=this.context=this.fc=this.Hc=this.child=null;this.wd=!1}Va.prototype.reset=function(){this.context=this.fc=this.Hc=this.child=null;this.wd=!1};var Wa=new ta(function(){return new Va},function(a){a.reset()},100);function Xa(a,b,c){var d=Wa.get();d.Hc=a;d.fc=b;d.context=c;return d}
function w(a){if(a instanceof v)return a;var b=new v(ca);Ua(b,2,a);return b}function Za(a){return new v(function(b,c){c(a)})}function $a(a,b,c){ab(a,b,c,null)||Oa(ra(b,a))}function bb(a){return new v(function(b,c){var d=a.length,e=[];if(d)for(var f=function(a,c){d--;e[a]=c;0==d&&b(e)},h=function(a){c(a)},k=0,n;k<a.length;k++)n=a[k],$a(n,ra(f,k),h);else b(e)})}function x(){var a,b,c=new v(function(c,e){a=c;b=e});return new cb(c,a,b)}
v.prototype.then=function(a,b,c){return db(this,ja(a)?a:null,ja(b)?b:null,c)};v.prototype.then=v.prototype.then;v.prototype.$goog_Thenable=!0;v.prototype.ke=function(a,b){return db(this,null,a,b)};function eb(a,b){a.ac||2!=a.Ra&&3!=a.Ra||fb(a);a.Wc?a.Wc.next=b:a.ac=b;a.Wc=b}
function db(a,b,c,d){var e=Xa(null,null,null);e.child=new v(function(a,h){e.Hc=b?function(c){try{var e=b.call(d,c);a(e)}catch(A){h(A)}}:a;e.fc=c?function(b){try{var e=c.call(d,b);!q(e)&&b instanceof gb?h(b):a(e)}catch(A){h(A)}}:h});e.child.B=a;eb(a,e);return e.child}v.prototype.wg=function(a){this.Ra=0;Ua(this,2,a)};v.prototype.xg=function(a){this.Ra=0;Ua(this,3,a)};
function Ua(a,b,c){0==a.Ra&&(a==c&&(b=3,c=new TypeError("Promise cannot resolve to itself")),a.Ra=1,ab(c,a.wg,a.xg,a)||(a.bf=c,a.Ra=b,a.B=null,fb(a),3!=b||c instanceof gb||hb(a,c)))}function ab(a,b,c,d){if(a instanceof v)return eb(a,Xa(b||ca,c||null,d)),!0;var e;if(a)try{e=!!a.$goog_Thenable}catch(h){e=!1}else e=!1;if(e)return a.then(b,c,d),!0;e=typeof a;if("object"==e&&null!=a||"function"==e)try{var f=a.then;if(ja(f))return ib(a,f,b,c,d),!0}catch(h){return c.call(d,h),!0}return!1}
function ib(a,b,c,d,e){function f(a){k||(k=!0,d.call(e,a))}function h(a){k||(k=!0,c.call(e,a))}var k=!1;try{b.call(a,h,f)}catch(n){f(n)}}function fb(a){a.Gd||(a.Gd=!0,Oa(a.Kf,a))}function jb(a){var b=null;a.ac&&(b=a.ac,a.ac=b.next,b.next=null);a.ac||(a.Wc=null);return b}
v.prototype.Kf=function(){for(var a=null;a=jb(this);){var b=this.Ra,c=this.bf;if(3==b&&a.fc&&!a.wd)for(var d=void 0,d=this;d&&d.ed;d=d.B)d.ed=!1;if(a.child)a.child.B=null,kb(a,b,c);else try{a.wd?a.Hc.call(a.context):kb(a,b,c)}catch(e){lb.call(null,e)}Wa.put(a)}this.Gd=!1};function kb(a,b,c){2==b?a.Hc.call(a.context,c):a.fc&&a.fc.call(a.context,c)}function hb(a,b){a.ed=!0;Oa(function(){a.ed&&lb.call(null,b)})}var lb=Ia;function gb(a){sa.call(this,a)}t(gb,sa);gb.prototype.name="cancel";
function cb(a,b,c){this.ha=a;this.resolve=b;this.reject=c};/*

 Copyright 2014 The Lovefield Project Authors. All Rights Reserved.

 Licensed under the Apache License, Version 2.0 (the "License");
 you may not use this file except in compliance with the License.
 You may obtain a copy of the License at

     http://www.apache.org/licenses/LICENSE-2.0

 Unless required by applicable law or agreed to in writing, software
 distributed under the License is distributed on an "AS IS" BASIS,
 WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 See the License for the specific language governing permissions and
 limitations under the License.
*/
function y(a,b){this.pa=a;this.o=b||this.Ae()}var mb=0;m=y.prototype;m.id=g("pa");function nb(a){return a.o}m.Ae=function(){return{}};m.lf=g("o");m.Ia=function(){return{id:this.pa,value:this.lf()}};m.Cb=function(a){return"#"==a.substr(-1)?this.pa:null};function ob(a){return new y(a.id,a.value)}function pb(a){return new y(mb++,a||{})}function qb(a){if(null==a)return null;a=new Uint8Array(a);for(var b="",c=0;c<a.length;++c)var d=a[c].toString(16),b=b+(2>d.length?"0"+d:d);return b};function rb(a){this.type=a}function sb(a){y.call(this,-1,a)}t(sb,y);function tb(a,b,c,d){c=c||function(a,b){return a==b};d=d||function(b){return a[b]};for(var e=a.length,f=b.length,h=[],k=0;k<e+1;k++)h[k]=[],h[k][0]=0;for(var n=0;n<f+1;n++)h[0][n]=0;for(k=1;k<=e;k++)for(n=1;n<=f;n++)c(a[k-1],b[n-1])?h[k][n]=h[k-1][n-1]+1:h[k][n]=Math.max(h[k-1][n],h[k][n-1]);for(var A=[],k=e,n=f;0<k&&0<n;)c(a[k-1],b[n-1])?(A.unshift(d(k-1,n-1)),k--,n--):h[k-1][n]>h[k][n-1]?k--:n--;return A}function ub(a){return ya(arguments,function(a,c){return a+c},0)}
function vb(a){return ub.apply(null,arguments)/arguments.length}function wb(a){var b=arguments.length;if(2>b)return 0;var c=vb.apply(null,arguments);return ub.apply(null,xa(arguments,function(a){return Math.pow(a-c,2)}))/(b-1)}function xb(a){return Math.sqrt(wb.apply(null,arguments))};var yb="StopIteration"in p?p.StopIteration:{message:"StopIteration",stack:""};function zb(){}zb.prototype.next=function(){throw yb;};zb.prototype.oe=function(){return this};function Ab(a){if(a instanceof zb)return a;if("function"==typeof a.oe)return a.oe(!1);if(ga(a)){var b=0,c=new zb;c.next=function(){for(;;){if(b>=a.length)throw yb;if(b in a)return a[b++];b++}};return c}throw Error("Not implemented");}
function Bb(a,b){if(ga(a))try{wa(a,b,void 0)}catch(c){if(c!==yb)throw c;}else{a=Ab(a);try{for(;;)b.call(void 0,a.next(),void 0,a)}catch(c){if(c!==yb)throw c;}}}function Cb(a){if(za(arguments,function(a){return!a.length})||!arguments.length)return new zb;var b=new zb,c=arguments,d=Ba(c.length);b.next=function(){if(d){for(var a=xa(d,function(a,b){return c[b][a]}),b=d.length-1;0<=b;b--){if(d[b]<c[b].length-1){d[b]++;break}if(0==b){d=null;break}d[b]=0}return a}throw yb;};return b};function Db(a){Eb(a);return a.c.concat()}function Eb(a){if(a.Bf!=a.c.length){for(var b=0,c=0;b<a.c.length;){var d=a.c[b];Fb(a.X,d)&&(a.c[c++]=d);b++}a.c.length=c}if(a.Bf!=a.c.length){for(var e={},c=b=0;b<a.c.length;)d=a.c[b],Fb(e,d)||(a.c[c++]=d,e[d]=1),b++;a.c.length=c}}function Fb(a,b){return Object.prototype.hasOwnProperty.call(a,b)};/*

 Copyright 2015 The Lovefield Project Authors. All Rights Reserved.

 Licensed under the Apache License, Version 2.0 (the "License");
 you may not use this file except in compliance with the License.
 You may obtain a copy of the License at

     http://www.apache.org/licenses/LICENSE-2.0

 Unless required by applicable law or agreed to in writing, software
 distributed under the License is distributed on an "AS IS" BASIS,
 WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 See the License for the specific language governing permissions and
 limitations under the License.
*/
function z(){return new window.Map}function Gb(a){var b=0,c=Array(a.size);a.forEach(function(a,e){c[b++]=e});return c}function B(a){var b=0,c=Array(a.size);a.forEach(function(a){c[b++]=a});return c};var Hb={};r("lf.TransactionType",Hb);Hb.READ_ONLY=0;Hb.READ_WRITE=1;function Ib(a,b){this.Oa=a;this.mf=b;this.Y=x()}Ib.prototype.ia=function(){try{Jb(this.Oa)}catch(a){return Za(a)}return(0==this.mf?this.mc():Kb(this)).then(function(a){this.Oa.ia();return a}.bind(this))};function Kb(a){Lb(a);Mb(a);return a.mc()}
function Lb(a){a.Oa.ob.forEach(function(a,c){var d=this.Oa.$().get(c),d=this.G(d.getName(),d.Jb.bind(d)),e=B(a.va).map(function(a){return a.id()});0<e.length&&d.remove(e).ke(this.Jd,this);e=B(a.na).map(function(a){return a[1]}).concat(B(a.ta));d.put(e).ke(this.Jd,this)},a)}function Mb(a){Nb(a.Oa).forEach(function(a){var c=this.G(a.getName(),ob),d;c.get([-1]).then(function(a){d=a;return c.remove([])}).then(function(){c.put(d);c.put(a.Ia())},this.Jd.bind(this))},a)}Ib.prototype.Jd=function(a){this.Y.reject(a)};function Ob(a){this.sg=a}Ob.prototype.toString=g("sg");var Pb=new Ob("backstore"),Qb=new Ob("cache"),Rb=new Ob("indexstore"),Sb=new Ob("engine"),Ub=new Ob("runner"),Vb=new Ob("observerregistry"),Wb=new Ob("schema");var Xb=Ga(),Yb=u("Trident")||u("MSIE"),Zb=u("Edge"),$b=u("Gecko")&&!(-1!=Da.toLowerCase().indexOf("webkit")&&!u("Edge"))&&!(u("Trident")||u("MSIE"))&&!u("Edge"),ac=-1!=Da.toLowerCase().indexOf("webkit")&&!u("Edge");function bc(){var a=Da;if($b)return/rv\:([^\);]+)(\)|;)/.exec(a);if(Zb)return/Edge\/([\d\.]+)/.exec(a);if(Yb)return/\b(?:MSIE|rv)[: ]([^\);]+)(\)|;)/.exec(a);if(ac)return/WebKit\/(\S+)/.exec(a)}
(function(){if(Xb&&p.opera){var a;var b=p.opera.version;try{a=b()}catch(c){a=b}return a}a="";(b=bc())&&(a=b?b[1]:"");return Yb&&(b=(b=p.document)?b.documentMode:void 0,b>parseFloat(a))?String(b):a})();!u("Android")||Ha()||u("Firefox")||Ga();Ha();function C(a){return q(a)?new window.Set(a):new window.Set}function cc(a){var b=0,c=Array(a.size);a.forEach(function(a){c[b++]=a});return c}function dc(a,b){if(b.size>a.size)return!1;var c=!0;b.forEach(function(b){c=c&&a.has(b)});return c};function ec(a,b){this.pa=a;this.o=b||{}}function fc(a){var b=C();a.forEach(function(a){b.add(a>>9)});return cc(b)}ec.prototype.V=g("pa");function gc(a,b){b.forEach(function(a){this.o[a.id()]=a.Ia()},a)}function hc(a,b){b.forEach(function(a){delete this.o[a]},a)}ec.prototype.Ia=function(){return{id:this.pa,value:JSON.stringify(this.o)}};function ic(a){return new ec(a.id,JSON.parse(a.value))};function jc(a,b,c){this.ba=a;this.Ib=b;this.cf=c}m=jc.prototype;m.get=function(a){if(0==a.length)return this.vc();var b=this.Ib;return kc(this,a).then(function(c){return a.map(function(a){var e=c.get(a>>9);return b(e.o[a])})})};function kc(a,b){var c=z(),d=x(),e=fc(b).map(function(a){return new v(function(b,d){var e;try{e=this.ba.get(a)}catch(A){d(A);return}e.onerror=d;e.onsuccess=function(a){a=ic(a.target.result);c.set(a.V(),a);b()}},this)},a);bb(e).then(function(){d.resolve(c)});return d.ha}
m.vc=function(){return new v(function(a,b){var c=[],d;try{d=this.ba.openCursor()}catch(e){b(e);return}d.onerror=b;d.onsuccess=function(){var b=d.result;if(b){var f;f=ic(b.value).o;for(var h in f)c.push(this.Ib(f[h]));b.continue()}else a(c)}.bind(this)},this)};m.Qb=function(a){return new v(function(b,c){var d;try{d=a()}catch(e){c(e);return}d.onsuccess=b;d.onerror=c},this)};
m.put=function(a){if(0==a.length)return w();var b=z();a.forEach(function(a){var d;d=a.id()>>9;var e=b.get(d)||null;null===e&&(e=this.cf(this.ba.name,d));gc(e,[a]);b.set(d,e)},this);a=B(b).map(function(a){return this.Qb(function(){return this.ba.put(a.Ia())}.bind(this))},this);return bb(a)};
m.remove=function(a){if(0==a.length)return this.Qb(function(){return this.ba.clear()}.bind(this));var b=z();a.forEach(function(a){var d=a>>9,e=b.get(d)||null;null===e&&(e=this.cf(this.ba.name,d));hc(e,[a]);b.set(d,e)},this);a=B(b).map(function(a){return this.Qb(function(){return 0==Object.keys(a.o).length?this.ba.delete(a.V()):this.ba.put(a.Ia())}.bind(this))},this);return bb(a)};function lc(a,b,c){a=a.i(Qb);var d=[c<<9,(c+1<<9)-1];b=a.Xa(b,d[0],d[1]);c=new ec(c);gc(c,b);return c}
function mc(a,b){return new ec(b)};function nc(){};function oc(a){this.S=a.i(Qb);this.C=a.i(Rb);this.j=a.i(Wb)}oc.prototype.update=function(a){a.forEach(function(a){pc(this,a);qc(this,a)},this)};function qc(a,b){var c=b.getName();b.va.forEach(function(a,b){this.S.remove(c,b)},a);b.ta.forEach(function(a){this.S.set(c,a)},a);b.na.forEach(function(a){this.S.set(c,a[1])},a)}function pc(a,b){var c=a.j.table(b.getName());rc(b).forEach(function(a){sc(this,c,a)},a)}
function sc(a,b,c){var d=a.C.hc.get(b.getName())||[],e=0;d.forEach(function(a){try{tc(a,c),e++}catch(b){throw d.slice(0,e).forEach(function(a){tc(a,[c[1],c[0]])},this),b;}},a)}function tc(a,b){var c=null===b[1]?void 0:b[1].Cb(a.getName()),d=null===b[0]?void 0:b[0].Cb(a.getName());if(!q(d)&&q(c))a.add(c,b[1].id());else if(q(d)&&q(c)){if(null===c||null===d){if(c==d)return}else if(0==a.nc().compare(d,c))return;a.add(c,b[1].id());a.remove(d,b[0].id())}else q(d)&&!q(c)&&a.remove(d,b[0].id())};var uc={};r("lf.ConstraintAction",uc);uc.RESTRICT=0;uc.CASCADE=1;var vc={};r("lf.ConstraintTiming",vc);vc.IMMEDIATE=0;vc.DEFERRABLE=1;var wc={};r("lf.Order",wc);wc.DESC=0;wc.ASC=1;var xc={};r("lf.Type",xc);xc.ARRAY_BUFFER=0;xc.BOOLEAN=1;xc.DATE_TIME=2;xc.INTEGER=3;xc.NUMBER=4;xc.STRING=5;xc.OBJECT=6;var yc={0:null,1:!1,2:Object.freeze(new Date(0)),3:0,4:0,5:"",6:null};r("lf.type.DEFAULT_VALUES",yc);function D(a,b){this.code=a;this.message="http://sn.im/2a0j3wn?c="+a;if(1<arguments.length)for(var c=1;c<=Math.min(4,arguments.length-1);++c)this.message+="&p"+(c-1)+"="+encodeURIComponent(arguments[c].toString().slice(0,64))}t(D,Error);function zc(){this.X=z();this.size=0}m=zc.prototype;m.has=function(a){return this.X.has(a)};m.set=function(a,b){var c=this.X.get(a)||null;null===c&&(c=C(),this.X.set(a,c));c.has(b)||(c.add(b),this.size++);return this};m.Tb=function(a,b){var c=this.X.get(a)||null;null===c&&(c=C(),this.X.set(a,c));b.forEach(function(a){c.has(a)||(c.add(a),this.size++)},this);return this};m.Sd=function(a){a.keys().forEach(function(b){var c=a.get(b);this.Tb(b,c)},this);return this};
m.delete=function(a,b){var c=this.X.get(a,null);if(null===c)return!1;var d=c.delete(b);d&&(--this.size,0==c.size&&this.X.delete(a));return d};m.get=function(a){a=this.X.get(a)||null;return null===a?null:cc(a)};m.clear=function(){this.X.clear();this.size=0};m.keys=function(){return Gb(this.X)};m.values=function(){var a=[];this.X.forEach(function(b){a.push.apply(a,cc(b))});return a};function Ac(a){this.C=a.i(Rb);this.j=a.i(Wb);this.S=a.i(Qb);this.Zc=null}function Bc(a,b,c){var d=b.Ab().fg;c.forEach(function(a){d.forEach(function(b){if(null==a.o[b.getName()])throw new D(202,b.m());},this)},a)}function Cc(a,b,c,d){b.Ab().Id().forEach(function(a){a.timing==d&&Dc(this,a,c)},a)}function Dc(a,b,c){var d=Ec(a,b);c.forEach(function(a){if(Fc(a[0],a[1],b.name)&&(a=a[1].o[b.pb],null!==a&&!d.cb(a)))throw new D(203,b.name);},a)}
function Ec(a,b){null===a.Zc&&(a.Zc=z());var c=a.Zc.get(b.name)||null;null===c&&(c=a.j.table(b.Pa)[b.Ic].wa(),c=a.C.get(c.m()),a.Zc.set(b.name,c));return c}function Fc(a,b,c){return(null===a?null!==b:null===b)||a.Cb(c)!=b.Cb(c)}function Gc(a,b,c,d,e){b=Hc(a.j.info(),b.getName(),e);null!==b&&(b=b.filter(function(a){return a.timing==d}),0!=b.length&&Ic(a,b,c,function(a,b,c){if(b.cb(c))throw new D(203,a.name);}))}
function Jc(a,b,c){b=Hc(a.j.info(),b.getName(),1);if(null===b)return null;var d=new zc;Ic(a,b,c,function(a,b,c){b=b.get(c);0<b.length&&d.Tb(a.zf,b)});return d}function Ic(a,b,c,d){b.forEach(function(a){var b=this.C.get(a.name),h=Ec(this,a);c.forEach(function(c){Fc(c[0],c[1],h.getName())&&d(a,b,c[0].o[a.Ic])},this)},a)}function Lc(a,b,c,d){0!=c.length&&(c=c.map(function(a){return[null,a]}),Cc(a,b,c,d))}function Mc(a,b,c,d){0!=c.length&&(Cc(a,b,c,d),Gc(a,b,c,d))}
function Nc(a,b,c,d){0!=c.length&&(c=c.map(function(a){return[a,null]}),Gc(a,b,c,d,0))}function Oc(a,b,c){var d={je:[],ef:new zc},e=new zc;e.Tb(b.getName(),c.map(function(a){return a.id()}));do{var f=new zc;e.keys().forEach(function(a){var b=this.j.table(a);a=e.get(a).map(function(a){return[this.S.get(a),null]},this);b=Jc(this,b,a);null!==b&&(d.je.unshift.apply(d.je,b.keys()),f.Sd(b))},a);e=f;d.ef.Sd(e)}while(0<e.size);return d};function Pc(a){this.ta=z();this.na=z();this.va=z();this.u=a}m=Pc.prototype;m.getName=g("u");m.add=function(a){if(this.va.has(a.id())){var b=[this.va.get(a.id()),a];this.na.set(a.id(),b);this.va.delete(a.id())}else this.ta.set(a.id(),a)};m.modify=function(a){var b=a[1],c=a[0].id();this.ta.has(c)?this.ta.set(c,b):(this.na.has(c)&&(a=[this.na.get(a[0].id())[0],b]),this.na.set(c,a))};
m.delete=function(a){if(this.ta.has(a.id()))this.ta.delete(a.id());else if(this.na.has(a.id())){var b=this.na.get(a.id())[0];this.na.delete(a.id());this.va.set(a.id(),b)}else this.va.set(a.id(),a)};m.Sd=function(a){a.ta.forEach(function(a){this.add(a)},this);a.na.forEach(function(a){this.modify(a)},this);a.va.forEach(function(a){this.delete(a)},this)};
function rc(a){var b=[];a.ta.forEach(function(a){b.push([null,a])});a.na.forEach(function(a){b.push(a)});a.va.forEach(function(a){b.push([a,null])});return b}m.toString=function(){return"["+Gb(this.ta).toString()+"], ["+Gb(this.na).toString()+"], ["+Gb(this.va).toString()+"]"};function Qc(a){var b=new Pc(a.u);a.ta.forEach(function(a){b.delete(a)});a.va.forEach(function(a){b.add(a)});a.na.forEach(function(a){b.modify([a[1],a[0]])});return b}
m.Wf=function(){return 0==this.ta.size&&0==this.va.size&&0==this.na.size};function Rc(a,b){this.aa=z();b.forEach(function(a){this.aa.set(a.getName(),a)},this);this.j=a.i(Wb);this.S=a.i(Qb);this.C=a.i(Rb);this.Da=new Ac(a);this.gd=new oc(a);this.ob=z()}function Nb(a){var b=[];Gb(a.ob).map(function(a){return this.aa.get(a)},a).forEach(function(a){a.xb()&&(a.xa().forEach(function(a){b.push(this.C.get(a.m()))},this),b.push(this.C.get(a.getName()+".#")))},a);return b}m=Rc.prototype;m.$=g("aa");
function Sc(a){var b=[];a.aa.forEach(function(a){a.xb()&&(a.xa().forEach(function(a){b.push(a.m())}),b.push(a.getName()+".#"))});return b}m.vb=function(a,b){Tc(this,a);Bc(this.Da,a,b);Lc(this.Da,a,b,0);for(var c=0;c<b.length;c++)Uc(this,a,[null,b[c]])};
function Uc(a,b,c){var d=b.getName(),e=a.ob.get(d)||new Pc(d);a.ob.set(d,e);try{sc(a.gd,b,c)}catch(h){throw h;}b=c[0];var f=c[1];null===b&&null!==f?(a.S.set(d,f),e.add(f)):null!==b&&null!==f?(a.S.set(d,f),e.modify(c)):null!==b&&null===f&&(a.S.remove(d,b.id()),e.delete(b))}m.update=function(a,b){Tc(this,a);Bc(this.Da,a,b);for(var c=0;c<b.length;c++){var d=b[c],d=[this.S.get(d.id()),d];Mc(this.Da,a,[d],0);Uc(this,a,d)}};
m.Ld=function(a,b){Tc(this,a);Bc(this.Da,a,b);for(var c=0;c<b.length;c++){var d=b[c],e=null,f,h=a.Ab().bd();if(null===h)f=null;else{f=this.Da;var h=h.m(),k=d.Cb(h);f=f.C.get(h).get(k);f=0==f.length?null:f[0]}null!=f?(e=this.S.get(f),d.pa=f,Mc(this.Da,a,[[e,d]],0)):Lc(this.Da,a,[d],0);Uc(this,a,[e,d])}};m.remove=function(a,b){Tc(this,a);Vc(this,a,b);Nc(this.Da,a,b,0);for(var c=0;c<b.length;c++)Uc(this,a,[b[c],null])};
function Vc(a,b,c){if(null!==Hc(a.j.info(),b.getName(),1)){b=Oc(a.Da,b,c);var d=b.ef;b.je.forEach(function(a){var b=this.j.table(a);a=d.get(a).map(function(a){return this.S.get(a)},this);Nc(this.Da,b,a,0);a.forEach(function(a){Uc(this,b,[a,null])},this)},a)}}function Jb(a){a.ob.forEach(function(a){var c=this.aa.get(a.getName());Lc(this.Da,c,B(a.ta),1);Nc(this.Da,c,B(a.va),1);Mc(this.Da,c,B(a.na),1)},a)}m.ia=aa();m.Eb=function(){var a=B(this.ob).map(function(a){return Qc(a)});this.gd.update(a)};
function Tc(a,b){if(!a.aa.has(b.getName()))throw new D(106,b.getName());};function Wc(a,b,c,d){this.b=a;this.w=b;this.da=this.b==E?!1:c;this.ma=this.w==E?!1:d}var E=new (aa());Wc.prototype.toString=function(){return(this.da?"(":"[")+(this.b==E?"unbound":this.b)+", "+(this.w==E?"unbound":this.w)+(this.ma?")":"]")};function Xc(a){if(Yc(a))return[];var b=null,c=null;a.b==E||(b=new Wc(E,a.b,!1,!a.da));a.w==E||(c=new Wc(a.w,E,!a.ma,!1));return[b,c].filter(function(a){return null!==a})}Wc.prototype.reverse=function(){return new Wc(this.w,this.b,this.ma,this.da)};
function Zc(a,b){var c=$c(a.b,b.b,!0,a.da,b.da);if(0==c)return!0;var d=-1==c?a:b,c=1==c?a:b;return d.w==E||d.w>c.b||d.w==c.b&&!d.ma&&!c.da}function ad(){return new Wc(E,E,!1,!1)}function Yc(a){return a.b==E&&a.w==E}function bd(a){return a.b==a.w&&a.b!=E&&!a.da&&!a.ma}Wc.prototype.contains=function(a){var b=this.w==E||a<this.w||a==this.w&&!this.ma;return(this.b==E||a>this.b||a==this.b&&!this.da)&&b};
function $c(a,b,c,d,e){function f(a){return c?a:1==a?-1:1}d=d||!1;e=e||!1;return a==E?b==E?(d?!e:e)?d?f(1):f(-1):0:f(-1):b==E?f(1):a<b?-1:a==b?(d?!e:e)?d?f(1):f(-1):0:1}function cd(a,b){var c=$c(a.b,b.b,!0,a.da,b.da);0==c&&(c=$c(a.w,b.w,!1,a.ma,b.ma));return c};function F(a,b){this.entries=a;this.K=C(b);this.Va=null}function G(a){return cc(a.K)}function dd(a){return a.entries.map(function(a){return a.sa.o})}function ed(a){return a.entries.map(function(a){return a.sa.id()})}function fd(a,b){return a.Va.get(b.m())}var gd=null;function hd(){null===gd&&(gd=new F([],[]));return gd}
function id(a){if(0==a.length)return hd();for(var b=a.reduce(function(a,b){return a+b.entries.length},0),c=Array(b),d=0,b=a.map(function(a){var b=z();a.entries.forEach(function(a){c[d++]=a;b.set(a.id,a)});return b}),e=z(),f=0;f<c.length;f++)b.every(function(a){return a.has(c[f].id)})&&e.set(c[f].id,c[f]);return new F(B(e),cc(a[0].K))}function jd(a){if(0==a.length)return hd();var b=z();a.forEach(function(a){a.entries.forEach(function(a){b.set(a.id,a)})});return new F(B(b),cc(a[0].K))}
function kd(a,b){var c=1<b.length,d=a.map(function(a){return new ld(a,c)});return new F(d,b)}function ld(a,b){this.sa=a;this.id=md++;this.Od=b}var md=0;function H(a,b){var c=b.Wa();return null!==c&&a.sa.o.hasOwnProperty(c)?a.sa.o[c]:a.Od?a.sa.o[I(b.G())][b.getName()]:a.sa.o[b.getName()]}function nd(a,b,c){var d=b.Wa();if(null!=d)a.sa.o[d]=c;else if(a.Od){var d=I(b.G()),e=a.sa.o[d];null==e&&(e={},a.sa.o[d]=e);e[b.getName()]=c}else a.sa.o[b.getName()]=c}
function od(a,b,c,d){function e(a,b){if(a.Od){var c=a.sa.o,d;for(d in c)f[d]=c[d]}else f[b[0]]=a.sa.o}var f={};e(a,b);e(c,d);a=new y(-1,f);return new ld(a,!0)};r("lf.bind",function(a){return new pd(a)});function pd(a){this.fa=a}r("lf.Binder",pd);pd.prototype.wa=g("fa");function qd(){this.Me=rd();var a=sd();this.dc=z();this.dc.set(1,td());this.dc.set(2,ud());this.dc.set(4,a);this.dc.set(3,a);this.dc.set(5,vd())}qd.wc=function(){return qd.Ie?qd.Ie:qd.Ie=new qd};function wd(a,b,c){return(a.dc.get(b)||null).get(c)||null}function rd(){function a(a){return a}var b=z();b.set(1,function(a){return null===a?null:a?1:0});b.set(2,function(a){return null===a?null:a.getTime()});b.set(3,a);b.set(4,a);b.set(5,a);return b}
function td(){var a=z();a.set("eq",function(a,c){return a==c});a.set("neq",function(a,c){return a!=c});return a}
function sd(){var a=td();a.set("between",function(a,c){return null===a||null===c[0]||null===c[1]?!1:a>=c[0]&&a<=c[1]});a.set("gte",function(a,c){return null===a||null===c?!1:a>=c});a.set("gt",function(a,c){return null===a||null===c?!1:a>c});a.set("in",function(a,c){return-1!=c.indexOf(a)});a.set("lte",function(a,c){return null===a||null===c?!1:a<=c});a.set("lt",function(a,c){return null===a||null===c?!1:a<c});return a}
function vd(){var a=sd();a.set("match",function(a,c){return null===a||null===c?!1:(new RegExp(c)).test(a)});return a}
function ud(){var a=z();a.set("between",function(a,c){return null===a||null===c[0]||null===c[1]?!1:a.getTime()>=c[0].getTime()&&a.getTime()<=c[1].getTime()});a.set("eq",function(a,c){return(null===a?-1:a.getTime())==(null===c?-1:c.getTime())});a.set("gte",function(a,c){return null===a||null===c?!1:a.getTime()>=c.getTime()});a.set("gt",function(a,c){return null===a||null===c?!1:a.getTime()>c.getTime()});a.set("in",function(a,c){return c.some(function(c){return c.getTime()==a.getTime()})});a.set("lte",
function(a,c){return null===a||null===c?!1:a.getTime()<=c.getTime()});a.set("lt",function(a,c){return null===a||null===c?!1:a.getTime()<c.getTime()});a.set("neq",function(a,c){return(null===a?-1:a.getTime())!=(null===c?-1:c.getTime())});return a};function J(){this.h=this.B=null}var xd=[];J.prototype.getParent=g("B");J.prototype.fb=function(){for(var a=this;!ea(a.getParent());)a=a.getParent();return a};function yd(a){for(var b=0;!ea(a.getParent());)b++,a=a.getParent();return b}function K(a){return a.h||xd}function zd(a,b){return K(a)[b]||null}function Ad(a,b,c){b.B=a;null===a.h?a.h=[b]:a.h.splice(c,0,b)}function L(a,b){b.B=a;null===a.h?a.h=[b]:a.h.push(b)}
function Bd(a,b){var c=a.h&&a.h[b];return c?(c.B=null,a.h.splice(b,1),0==a.h.length&&(a.h=null),c):null}J.prototype.removeChild=function(a){return Bd(this,K(this).indexOf(a))};function Cd(a,b,c){zd(a,c).B=null;b.B=a;a.h[c]=b}function Dd(a,b,c){!1!==b.call(c,a)&&K(a).forEach(function(a){Dd(a,b,c)})};function Ed(){J.call(this);this.pa=Fd++}t(Ed,J);var Fd=0;Ed.prototype.V=g("pa");function Gd(a,b,c){Ed.call(this);this.N=a;this.value=b;this.F=c;this.rc=wd(qd.wc(),this.N.H(),this.F);this.Ya=!1;this.$b=b}t(Gd,Ed);m=Gd.prototype;m.Hb=function(){var a=new Gd(this.N,this.value,this.F);a.$b=this.$b;a.qd(this.Ya);var b=this.V();a.pa=b;return a};m.eb=function(a){return null!=a?(a.push(this.N),a):[this.N]};m.qd=ba("Ya");function Hd(a){var b=!1;a.value instanceof pd||(b="array"==da(a.value)?!a.value.some(function(a){return a instanceof pd}):!0);if(!b)throw new D(501);}
m.eval=function(a){Hd(this);if("in"==this.F)return Id(this,a);var b=a.entries.filter(function(a){return this.rc(H(a,this.N),this.value)!=this.Ya},this);return new F(b,G(a))};m.bind=function(a){if(this.$b instanceof pd){var b=this.$b.wa();if(a.length<=b)throw new D(510);this.value=a[b]}else"array"==da(this.$b)&&(this.value=this.$b.map(function(b){if(b instanceof pd){var d=b.wa();if(a.length<=d)throw new D(510);return a[b.wa()]}return b}))};
function Id(a,b){var c=C(a.value),d=function(a){return null===a?!1:c.has(a)!=this.Ya}.bind(a),e=b.entries.filter(function(a){return d(H(a,this.N))},a);return new F(e,G(b))}m.toString=function(){return"value_pred("+this.N.m()+" "+this.F+(this.Ya?"(complement)":"")+" "+this.value+")"};function Jd(a){this.ca=a;this.Xc=this.Aa=null}function Kd(a,b){null===a.Aa&&null!=a.s&&(a.Aa=Ld(a.s));return a.Aa.get(b)||null}function Ld(a){var b=z();Dd(a,function(a){b.set(a.V(),a)});return b}function Md(a,b){b.s&&(a.s=b.s.Hb());a.Xc=b}Jd.prototype.bind=function(){return this};function Nd(a,b){var c=a.s;null!=c&&Dd(c,function(a){a instanceof Gd&&a.bind(b)})};function Od(a){Jd.call(this,a)}t(Od,Jd);function Pd(a){var b="";a.forEach(function(c,d){b+=c.N.m()+" ";b+=1==c.ib?"ASC":"DESC";d<a.length-1&&(b+=", ")});return b}Od.prototype.$=function(){return C(this.b)};Od.prototype.clone=function(){var a=new Od(this.ca);Md(a,this);this.f&&(a.f=this.f.slice());this.b&&(a.b=this.b.slice());a.W=this.W;a.M=this.M;this.L&&(a.L=this.L.slice());this.ja&&(a.ja=this.ja.slice());this.Ob&&(a.Ob=this.Ob);this.Vb&&(a.Vb=this.Vb);a.wb=this.wb;return a};
Od.prototype.bind=function(a){Od.Fb.bind.call(this,a);null!=this.Ob&&(this.W=a[this.Ob.wa()]);null!=this.Vb&&(this.M=a[this.Vb.wa()]);Nd(this,a);return this};function Qd(a,b){this.Ba=a;this.aa=b}Qd.prototype.fb=g("Ba");Qd.prototype.$=g("aa");function Rd(a){var b=C();a.forEach(function(a){a.$().forEach(b.add.bind(b))});return b};function Sd(a,b){this.global=a;this.Ja=a.i(Pb);this.nd=b.map(function(a){return a.context});this.We=b.map(function(a){return a.$d});this.ye=Rd(this.We);this.nf=Td(this);this.$a=x()}function Td(a){return a.nd.some(function(a){return!(a instanceof Od)})?1:0}m=Sd.prototype;
m.exec=function(){function a(){var f=d.shift();if(f){var h=e[c.length];return f.fb().exec(b,h).then(function(b){c.push(b[0]);return a()})}return w()}var b=new Rc(this.global,this.ye),c=[],d=this.We.slice(),e=this.nd;return a().then(function(){return this.Ja.zb(this.nf,b).ia()}.bind(this)).then(function(){this.Xd(c);return c}.bind(this),function(a){b.Eb();throw a;})};m.H=g("nf");m.$=g("ye");m.Kb=g("$a");m.V=function(){return ka(this)};m.Xd=aa();function Ud(a,b){Sd.call(this,a,b);this.Db=a.i(Vb)}t(Ud,Sd);Ud.prototype.getPriority=l(0);Ud.prototype.Xd=function(a){this.nd.forEach(function(b,c){Vd(this.Db,b,a[c])},this)};function Wd(a,b){this.g=a;this.Db=a.i(Vb);this.Ca=a.i(Ub);this.gd=new oc(a);this.ob=b;var c=a.i(Wb),d=this.ob.map(function(a){return c.table(a.getName())});this.aa=C(d);this.$a=x()}m=Wd.prototype;m.exec=function(){this.gd.update(this.ob);this.Lc();return w()};m.H=l(1);m.$=g("aa");m.Kb=g("$a");m.V=function(){return ka(this)};m.getPriority=l(1);m.Lc=function(){var a=Xd(this.Db,this.aa);0!=a.length&&(a=new Ud(this.g,a),Yd(this.Ca,a))};function Zd(a){this.g=a;this.Ja=a.i(Pb);this.Ca=a.i(Ub)}Zd.prototype.Vd=function(a){a=new Wd(this.g,a);Yd(this.Ca,a)};function M(a,b){this.Xb=a;this.l=b;this.Sa=z()}r("lf.backstore.FirebaseRawBackStore",M);M.prototype.cd=g("l");M.prototype.dd=function(){throw new D(351);};function $d(a,b){var c=x(),d=a;b.length&&(d=a.child(b));d.once("value",function(a){c.resolve(a.val())},function(a){c.reject(a)});return c.ha}function ae(a,b,c){function d(a){a?e.reject(a):e.resolve()}c=c||!1;var e=x();c?a.set(b,d):a.update(b,d);return e.ha}
M.prototype.Ea=function(a){return $d(this.l,"@rev/R").then(function(a){this.La=a;return $d(this.l,"@table")}.bind(this)).then(function(b){var c=0,d;for(d in b)this.Sa.set(d,b[d]),b[d]>c&&(c=b[d]);a.ra().forEach(function(a){this.Sa.has(a.getName())||(b[a.getName()]=++c)},this);d=this.l.child("@table");return ae(d,b)}.bind(this))};
function be(a,b,c){var d=a.Sa.get(b);return null!=d?function(){var a={},b=x();this.l.orderByChild("T").equalTo(d).once("value",function(d){d.forEach(function(b){var d=c(b.val());a[parseInt(b.key(),10)]=d});b.resolve(a)});return b.ha}.call(a).then(function(a){a["@rev"]={R:++this.La};return ae(this.l,a)}.bind(a)):w()}M.prototype.pc=function(a){return be(this,a,l(null)).then(function(){this.Sa.delete(a);return ae(this.l.child("@table/"+a),null,!0)}.bind(this))};M.prototype.dropTable=M.prototype.pc;
M.prototype.kc=function(a,b,c){return be(this,a,function(a){var e=a.P;e[b]=c;return{R:this.La+1,T:a.T,P:e}}.bind(this))};M.prototype.addTableColumn=M.prototype.kc;M.prototype.qc=function(a,b){return be(this,a,function(a){var d=a.P;delete d[b];return{R:this.La+1,T:a.T,P:d}}.bind(this))};M.prototype.dropTableColumn=M.prototype.qc;M.prototype.Kc=function(a,b,c){return be(this,a,function(a){var e=a.P;e[c]=e[b];delete e[b];return{R:this.La+1,T:a.T,P:e}}.bind(this))};M.prototype.renameTableColumn=M.prototype.Kc;
M.prototype.rb=function(){throw new D(351);};M.prototype.createRow=M.prototype.rb;M.prototype.zc=g("Xb");M.prototype.getVersion=M.prototype.zc;M.prototype.bc=function(a){var b=x();a=this.Sa.get(a);this.l.orderByChild("T").equalTo(a).once("value",function(a){var d=[];a.forEach(function(a){d.push(a.val().P)});b.resolve(d)});return b.ha};M.prototype.dump=function(){var a={},b=Gb(this.Sa).map(function(b){return this.bc(b).then(function(d){a[b]=d})}.bind(this));return bb(b).then(function(){return a})};
M.prototype.dump=M.prototype.dump;function ce(a,b,c){Ib.call(this,c,b);this.l=a}t(ce,Ib);ce.prototype.G=function(a){return this.l.xc(a)};
ce.prototype.mc=function(){var a=this.Oa.ob;if(0==a.size)this.Y.resolve();else{var b=this.l.La+1;this.l.La=b;var c={"@rev":{R:b}};a.forEach(function(a,e){var f=this.l.Sa.get(e);a.ta.forEach(function(a,d){c[d]={R:b,T:f,P:a.o}});a.na.forEach(function(a,d){c[d]={R:b,T:f,P:a[1].o}});a.va.forEach(function(a,b){c[b]=null})},this);this.l.l.update(c,function(c){null===c?this.Y.resolve():(this.l.La=b-1,c=B(a).map(function(a){return de(this.l,a.getName())},this),bb(c).then(this.Y.reject.bind(this.Y),this.Y.reject.bind(this.Y)))}.bind(this))}return this.Y.ha};function ee(){this.ua=z()}function fe(a,b){if(0==b.length)return B(a.ua);var c=[];b.forEach(function(a){a=this.ua.get(a)||null;null===a||c.push(a)},a);return c}ee.prototype.getData=g("ua");ee.prototype.get=function(a){return w(fe(this,a))};function ge(a,b){b.forEach(function(a){this.ua.set(a.id(),a)},a)}ee.prototype.put=function(a){ge(this,a);return w()};function he(a,b){0==b.length||b.length==a.ua.size?a.ua.clear():b.forEach(function(a){this.ua.delete(a)},a)}
ee.prototype.remove=function(a){he(this,a);return w()};function ie(a){return 0==a.ua.size?0:Gb(a.ua).reduce(function(a,c){return a>c?a:c},0)};function je(a,b){this.j=a;this.tf=b;this.Jc=z();this.La=-1;this.K=z();this.Sa=z();this.Ad=null}m=je.prototype;
m.Ea=function(a){this.l=this.tf.child(this.j.name());var b=a||function(){return w()};return $d(this.l,"@db/version").then(function(a){return null===a?ae(this.l,ke(this),!0).then(function(){var a=new M(0,this.l);return b(a)}.bind(this)):a==this.j.version()?$d(this.l,"@rev/R").then(function(a){this.La=a;return $d(this.l,"@table")}.bind(this)).then(function(a){for(var b in a)this.Sa.set(b,a[b]);a=this.j.ra().map(function(a){return de(this,a.getName())},this);return bb(a)}.bind(this)).then(function(){le(this);
me(this);return w()}.bind(this)):this.Yd(a,b).then(function(){return this.Ea()}.bind(this))}.bind(this))};m.Yd=function(a,b){var c=new M(a,this.l);return c.Ea(this.j).then(function(){return w()}.bind(this)).then(function(){return b(c)}).then(function(){var a=this.l.child("@db");return ae(a,{version:this.j.version()},!0)}.bind(this))};
function me(a){a.l.off();a.l.on("child_removed",a.hg.bind(a));a.Bd&&(a.Bd.off(),a.Jc.clear());a.Bd=a.l.orderByChild("R").startAt(a.La+1);a.Bd.on("value",a.Vd.bind(a))}function le(a){mb=B(a.K).map(function(a){return ie(a)}).reduce(function(a,c){return a>c?a:c},0)+1}m.hg=function(a){var b=a.val(),c=this.Jc.get(b.T)||null;null===c&&(c=C(),this.Jc.set(b.T,c));c.add(parseInt(a.key(),10))};
m.Vd=function(a){var b=a.child("@rev/R").val();null!=b&&b!=this.La&&(this.La=b,a=ne(this,a),a.forEach(function(a){var b=this.K.get(a.getName()),e=Gb(a.va);0<e.length&&he(b,e);var f=B(a.ta);a.na.forEach(function(a){f.push(a[1])});ge(b,f)},this),0<a.length&&this.Ec(a),me(this))};
function ne(a,b){var c=C(),d=z();a.Sa.forEach(function(a,b){var h=this.K.get(b),k=new Pc(b);if(this.Jc.has(a)){var n=cc(this.Jc.get(a));n.forEach(function(a){c.add(a)});fe(h,n).forEach(function(a){k.delete(a)})}d.set(a,k)}.bind(a));b.forEach(function(a){if("@rev"!=a.key()){var b=parseInt(a.key(),10);if(!c.has(b)){a=a.val();var h=d.get(a.T),k=this.K.get(h.getName());k.getData().has(b)?h.modify([fe(k,[b])[0],new y(b,a.P)]):h.add(new y(b,a.P))}}}.bind(a));return B(d).filter(function(a){return!a.Wf()})}
function de(a,b){var c=x(),d=a.Sa.get(b);a.l.orderByChild("T").equalTo(d).once("value",function(a){var d=new ee,h=[];a.forEach(function(a){h.push(new y(parseInt(a.key(),10),a.val().P))});ge(d,h);this.K.set(b,d);c.resolve()}.bind(a));return c.ha}function ke(a){var b={};b["@db"]={version:a.j.version()};b["@rev"]={R:1};a.La=1;b["@table"]={};a.j.ra().forEach(function(a,d){var e=a.getName();b["@table"][e]=d;this.K.set(e,new ee);this.Sa.set(e,d)},a);return b}m.zb=function(a,b){return new ce(this,a,b)};
m.xc=function(a){var b=this.K.get(a)||null;if(null!==b)return b;throw new D(101,a);};m.close=aa();m.subscribe=ba("Ad");m.Ec=function(a){null!=this.Ad&&this.Ad(a)};function N(a,b,c,d){this.l=b;this.Ua=c;this.Xb=a;this.Uc=d}r("lf.backstore.IndexedDBRawBackStore",N);N.prototype.cd=g("l");N.prototype.getRawDBInstance=N.prototype.cd;N.prototype.dd=g("Ua");N.prototype.getRawTransaction=N.prototype.dd;N.prototype.pc=function(a){return new v(function(b,c){try{this.l.deleteObjectStore(a)}catch(d){c(d);return}b()},this)};N.prototype.dropTable=N.prototype.pc;
function oe(a,b,c,d){return new v(function(a,f){var h;try{var k=this.Ua.objectStore(b);h=k.openCursor()}catch(n){f(n);return}h.onsuccess=function(){var b=h.result;b?(c(b),b.continue()):(d(k),a())};h.onerror=f},a)}function pe(a){var b=null;return b=a instanceof ArrayBuffer?qb(a):a instanceof Date?a.getTime():a}
function qe(a,b,c){function d(a){var b=ic(a.value),d=b.o,e;for(e in d){var A=ob(d[e]);c(A);d[e]=A.Ia()}a.update(b.Ia())}function e(a){var b=ob(a.value);c(b);a.update(b.Ia())}return oe(a,b,a.Uc?d:e,aa())}N.prototype.kc=function(a,b,c){var d=pe(c);return qe(this,a,function(a){a.o[b]=d})};N.prototype.addTableColumn=N.prototype.kc;N.prototype.qc=function(a,b){return qe(this,a,function(a){delete a.o[b]})};N.prototype.dropTableColumn=N.prototype.qc;
N.prototype.Kc=function(a,b,c){return qe(this,a,function(a){a.o[c]=a.o[b];delete a.o[b]})};N.prototype.renameTableColumn=N.prototype.Kc;function re(a,b){var c=[];return new v(function(a,e){var f;try{f=this.Ua.objectStore(b).openCursor()}catch(h){e(h);return}f.onsuccess=function(){var b=f.result;if(b){if(this.Uc){var e;e=ic(b.value).o;for(var n in e)c.push(e[n])}else c.push(b.value);b.continue()}else a(c)}.bind(this);f.onerror=e},a)}N.prototype.rb=function(a){var b={},c;for(c in a)b[c]=pe(a[c]);return pb(b)};
N.prototype.createRow=N.prototype.rb;N.prototype.zc=g("Xb");N.prototype.getVersion=N.prototype.zc;N.prototype.dump=function(){for(var a=this.l.objectStoreNames,b=[],c=0;c<a.length;++c){var d=a.item(c);b.push(this.bc(d))}return bb(b).then(function(b){var c={};b.forEach(function(b,d){c[a.item(d)]=b});return c})};N.prototype.dump=N.prototype.dump;N.prototype.bc=function(a){return re(this,a).then(function(a){return a.map(function(a){return a.value})})};function se(a,b){this.ba=a;this.Ib=b}m=se.prototype;m.get=function(a){if(0==a.length)return this.vc();a=a.map(function(a){return new v(function(c,d){var e;try{e=this.ba.get(a)}catch(f){d(f);return}e.onerror=d;e.onsuccess=function(a){c(this.Ib(a.target.result))}.bind(this)},this)},this);return bb(a)};
m.vc=function(){return new v(function(a,b){var c=[],d;try{d=this.ba.openCursor()}catch(e){b(e);return}d.onerror=b;d.onsuccess=function(){var b=d.result;b?(c.push(this.Ib(b.value)),b.continue()):a(c)}.bind(this)},this)};m.Qb=function(a){return new v(function(b,c){var d;try{d=a()}catch(e){c(e);return}d.onsuccess=b;d.onerror=c},this)};m.put=function(a){if(0==a.length)return w();a=a.map(function(a){return this.Qb(function(){return this.ba.put(a.Ia())}.bind(this))},this);return bb(a)};
m.remove=function(a){return new v(function(b,c){var d=this.ba.count();d.onsuccess=function(d){if(0==a.length||d.target.result==a.length)return this.Qb(function(){return this.ba.clear()}.bind(this)).then(b,c);d=a.map(function(a){return this.Qb(function(){return this.ba.delete(a)}.bind(this))},this);bb(d).then(b,c)}.bind(this);d.onerror=c},this)};function te(a,b,c,d,e){Ib.call(this,c,d);this.g=a;this.Ua=b;this.Uc=e;this.Ua.oncomplete=this.Y.resolve.bind(this.Y);this.Ua.onabort=this.Y.reject.bind(this.Y)}t(te,Ib);te.prototype.G=function(a,b,c){return this.Uc?(c=null!=c?c:0,a=this.Ua.objectStore(a),new jc(a,b,0==c?ra(lc,this.g):mc)):new se(this.Ua.objectStore(a),b)};te.prototype.mc=function(){return this.Y.ha};function ue(a,b){this.g=a;this.j=b;this.Vc=b.Xe().Hf||!1}m=ue.prototype;
m.Ea=function(a){var b=window.indexedDB||window.mozIndexedDB||window.webkitIndexedDB||window.msIndexedDB;if(null==b)throw new D(352);var c=a||function(){return w()};return new v(function(a,e){var f;try{f=b.open(this.j.name(),this.j.version())}catch(h){e(h);return}f.onerror=e;f.onupgradeneeded=function(a){ve(this,c,a).then(aa(),e)}.bind(this);f.onsuccess=function(b){this.l=b.target.result;this.fe().then(function(b){mb=b+1;a(this.l)}.bind(this))}.bind(this)},this)};
function ve(a,b,c){var d=c.target.result,e=c.target.transaction;c=new N(c.oldVersion,d,e,a.Vc);we(d);a.j.ra().forEach(ra(a.Cf,d,e),a);return b(c)}function we(a){for(var b=[],c=0;c<a.objectStoreNames.length;++c){var d=a.objectStoreNames.item(c);-1!=d.indexOf(".")&&b.push(d)}b.forEach(function(b){try{a.deleteObjectStore(b)}catch(c){}})}
m.Cf=function(a,b,c){a.objectStoreNames.contains(c.getName())||a.createObjectStore(c.getName(),{keyPath:"id"});c.xb()&&(c.xa().forEach(function(c){this.oc(a,b,c.m(),"btree")},this),this.oc(a,b,xe(c),"rowid"))};m.oc=function(a,b,c,d){a.objectStoreNames.contains(c)||(a.createObjectStore(c,{keyPath:"id"}),a=b.objectStore(c),(this.Vc?new jc(a,ob,mc):new se(a,ob)).put([new sb(new rb(d))]))};
m.zb=function(a,b){var c=Gb(b.$());Sc(b).forEach(function(a){c.push(a)});var d=this.l.transaction(c,0==a?"readonly":"readwrite");return new te(this.g,d,b,a,this.Vc)};
m.fe=function(a){function b(){if(0==d.length)return w();var a=d.shift();return c(a).then(b)}function c(b){return new v(function(c,d){var ha;try{ha=(a||e.transaction([b])).objectStore(b).openCursor(null,"prev")}catch(oa){d(oa);return}ha.onsuccess=function(a){(a=a.target.result)&&(f=Math.max(f,h(a)));c(f)};ha.onerror=function(){c(f)}})}var d=this.j.ra().map(function(a){return a.getName()}),e=this.l,f=0,h=function(a){return this.Vc?(a=ic(a.value),Object.keys(a.o).reduce(function(a,b){return Math.max(a,
b)},0)):a.key}.bind(this);return new v(function(a){b().then(function(){a(f)})})};m.close=function(){this.l.close()};m.xc=function(){throw new D(511);};m.subscribe=aa();m.Ec=aa();function ye(a,b,c){Ib.call(this,c,b);this.ba=a;0==b&&this.Y.resolve()}t(ye,Ib);ye.prototype.G=function(a){return this.ba.xc(a)};ye.prototype.mc=function(){this.Y.resolve();return this.Y.ha};function ze(a){this.j=a;this.K=z()}m=ze.prototype;m.Ea=function(){this.j.ra().forEach(this.Tf,this);return w()};m.xc=function(a){var b=this.K.get(a)||null;if(null===b)throw new D(101,a);return b};m.zb=function(a,b){return new ye(this,a,b)};function Ae(a,b){if(!a.K.has(b)){var c=new ee;a.K.set(b,c);return c}return null}m.Tf=function(a){Ae(this,a.getName());a.xb()&&(a.xa().forEach(function(a){this.oc(a.m(),"btree")},this),this.oc(xe(a),"rowid"))};m.oc=function(a,b){var c=Ae(this,a);null===c||c.put([new sb(new rb(b))])};
m.close=aa();m.subscribe=aa();m.Ec=aa();function Be(a){ze.call(this,a);this.jd=null}t(Be,ze);Be.prototype.subscribe=function(a){null===this.jd&&(this.jd=a)};Be.prototype.Ec=function(a){null===this.jd||this.jd(a)};function Ce(a,b,c){this.Ua=a;this.u=b;this.Ib=c}Ce.prototype.get=function(a){var b=this.Ib;return De(this.Ua,"SELECT id, value FROM "+this.u+" "+(0==a.length?"":"WHERE id IN ("+a.join(",")+")"),[],function(a){for(var d=a.rows.length,e=Array(d),f=0;f<d;++f)e[f]=b({id:a.rows.item(f).id,value:JSON.parse(a.rows.item(f).value)});return e})};
Ce.prototype.put=function(a){if(0==a.length)return w();var b="INSERT OR REPLACE INTO "+this.u+"(id, value) VALUES (?, ?)";a.forEach(function(a){De(this.Ua,b,[a.id(),JSON.stringify(a.o)])},this);return w()};Ce.prototype.remove=function(a){De(this.Ua,"DELETE FROM "+this.u+" "+(0==a.length?"":"WHERE id IN ("+a.join(",")+")"),[]);return w()};function Ee(a,b,c){Ib.call(this,b,c);this.l=a;this.K=z();this.Dd=[]}t(Ee,Ib);function Fe(a){return a.replace(".","__d__").replace("#","__s__")}Ee.prototype.G=function(a,b){var c=this.K.get(a)||null;null===c&&(c=new Ce(this,Fe(a),b),this.K.set(a,c));return c};function De(a,b,c,d){var e=x();a.Dd.push({ug:b,kg:c,transform:d,Y:e});return e.ha}
Ee.prototype.mc=function(){var a=null,b=this.Y.reject.bind(this.Y),c=function(a,b){this.Y.reject(b)}.bind(this),d=[],e=function(b,h){if(null!==a){var k=h;null!=a.transform&&null!=h&&(k=a.transform(h));d.push(k);a.Y.resolve(k)}0<this.Dd.length?(a=k=this.Dd.shift(),b.executeSql(k.ug,k.kg,e,c)):this.Y.resolve(d)}.bind(this);0==this.mf?this.l.readTransaction(e,b):this.l.transaction(e,b);return this.Y.ha};function O(a,b,c){this.l=c;this.g=a;this.Xb=b}r("lf.backstore.WebSqlRawBackStore",O);O.prototype.cd=g("l");O.prototype.getRawDBInstance=O.prototype.cd;O.prototype.dd=function(){throw new D(356);};O.prototype.getRawTransaction=O.prototype.dd;function Ge(a){return new Ee(a.l,new Rc(a.g,C()),1)}O.prototype.pc=function(a){var b=Ge(this);De(b,"DROP TABLE "+a,[]);return b.ia()};O.prototype.dropTable=O.prototype.pc;
O.prototype.bc=function(a){var b=Ge(this);De(b,"SELECT id, value FROM "+a,[]);return b.ia().then(function(a){for(var b=a[0].rows.length,e=Array(b),f=0;f<b;++f)e[f]={id:a[0].rows.item(f).id,value:JSON.parse(a[0].rows.item(f).value)};return w(e)})};function He(a,b,c){var d=Ge(a),e="UPDATE "+b+" SET value=? WHERE id=?";return a.bc(b).then(function(a){a.forEach(function(a){a=c(a);De(d,e,[JSON.stringify(a.value),a.id])});return d.ia()})}
O.prototype.kc=function(a,b,c){var d=pe(c);return He(this,a,function(a){a.value[b]=d;return a})};O.prototype.addTableColumn=O.prototype.kc;O.prototype.qc=function(a,b){return He(this,a,function(a){delete a.value[b];return a})};O.prototype.dropTableColumn=O.prototype.qc;O.prototype.Kc=function(a,b,c){return He(this,a,function(a){a.value[c]=a.value[b];delete a.value[b];return a})};O.prototype.renameTableColumn=O.prototype.Kc;O.prototype.rb=function(a){var b={},c;for(c in a)b[c]=pe(a[c]);return pb(b)};
O.prototype.createRow=O.prototype.rb;O.prototype.zc=g("Xb");O.prototype.getVersion=O.prototype.zc;function Ie(a){De(a,'SELECT tbl_name FROM sqlite_master WHERE type="table"',[],function(a){for(var c=Array(a.rows.length),d=0;d<c.length;++d)c[d]=a.rows.item(d).tbl_name;return c})}
O.prototype.dump=function(){var a=x(),b=Ge(this);Ie(b);var c={};b.ia().then(function(b){b=b[0].filter(function(a){return"__lf_ver"!=a&&"__WebKitDatabaseInfoTable__"!=a}).map(function(a){return this.bc(a).then(function(b){c[a]=b})},this);bb(b).then(function(){a.resolve(c)})}.bind(this));return a.ha};O.prototype.dump=O.prototype.dump;function Je(a,b,c){this.g=a;this.j=b;this.tg=c||4194304}function Ke(a){return new Rc(a.g,C())}m=Je.prototype;m.Ea=function(a){if(null==window.openDatabase)throw new D(353);var b=a||function(){return w()};return new v(function(a,d){try{var e=window.openDatabase(this.j.name(),"",this.j.name(),this.tg);if(null!=e)this.l=e,Le(this,b).then(a,d);else throw new D(354);}catch(f){d(f)}},this)};
function Le(a,b){var c=x(),d=new Ee(a.l,Ke(a),1);De(d,"CREATE TABLE IF NOT EXISTS __lf_ver(id INTEGER PRIMARY KEY, v INTEGER)",[]);De(d,"SELECT v FROM __lf_ver WHERE id = 0",[]);d.ia().then(function(a){var d=0;a[1].rows.length&&(d=a[1].rows.item(0).v);d<this.j.version()?this.Yd(b,d).then(c.resolve.bind(c)):d>this.j.version()?c.reject(new D(108)):c.resolve()}.bind(a));return c.ha}m.zb=function(a,b){if(null!=this.l)return new Ee(this.l,b,a);throw new D(2);};m.close=aa();
m.xc=function(){throw new D(512);};m.subscribe=function(){throw new D(355);};m.Ec=function(){throw new D(355);};m.Yd=function(a,b){var c=x();Me(this).then(function(){a(new O(this.g,b,this.l)).then(function(){return this.fe()}.bind(this)).then(c.resolve.bind(c))}.bind(this),c.reject.bind(c));return c.ha};
function Me(a){var b=a.j.ra(),c=new Ee(a.l,Ke(a),1),d=new Ee(a.l,Ke(a),1);De(c,"INSERT OR REPLACE INTO __lf_ver VALUES (0, ?)",[a.j.version()]);Ie(c);return c.ia().then(function(a){function c(a,b){De(d,"INSERT INTO "+a+"(id, value) VALUES(?, ?)",[-1,JSON.stringify(nb(new sb(new rb(b))))])}var h=a[1];h.filter(function(a){return-1!=a.indexOf("__d__")}).forEach(function(a){De(d,"DROP TABLE "+a,[])});var k=[],n=[],A=[];b.map(function(a){-1==h.indexOf(a.getName())&&k.push(a.getName());a.xb&&(a.xa().forEach(function(a){a=
Fe(a.m());k.push(a);n.push(a)}),a=Fe(xe(a)),k.push(a),A.push(a))});k.forEach(function(a){De(d,"CREATE TABLE "+a+"(id INTEGER PRIMARY KEY, value TEXT)",[])});n.forEach(function(a){c(a,"btree")});A.forEach(function(a){c(a,"rowid")});return d.ia()})}
m.fe=function(){var a=0,b=x(),c=function(b){var c=new Ee(this.l,Ke(this),0);De(c,"SELECT MAX(id) FROM "+b,[]);return c.ia().then(function(b){b=b[0].rows.item(0)[0];a=Math.max(b,a)})}.bind(this),d=this.j.ra().map(function(a){return c(a.getName())});bb(d).then(function(){b.resolve(a)},function(a){b.reject(a)});return b.ha};function Ne(a){this.X=z();this.Wb=z();a.ra().forEach(function(a){this.Wb.set(a.getName(),C())},this)}m=Ne.prototype;m.set=function(a,b){this.X.set(b.id(),b);this.Wb.get(a).add(b.id())};m.Tb=function(a,b){var c=this.Wb.get(a);b.forEach(function(a){this.X.set(a.id(),a);c.add(a.id())},this)};m.get=function(a){return this.X.get(a)||null};function Oe(a,b){return b.map(function(a){return this.get(a)},a)}
m.Xa=function(a,b,c){var d=[],e=Math.min(b,c),f=Math.max(b,c);a=this.Wb.get(a);if(a.size<f-e)a.forEach(function(a){a>=e&&a<=f&&(a=this.X.get(a),d.push(a))},this);else for(b=e;b<=f;++b)a.has(b)&&(c=this.X.get(b),d.push(c));return d};m.remove=function(a,b){this.X.delete(b);this.Wb.get(a).delete(b)};m.Bg=function(a){return null!=a?this.Wb.get(a).size:this.X.size};m.clear=function(){this.X.clear();this.Wb.clear()};function Pe(a,b,c){var d=0,e=a.length;for(c=c||Qe;d<e;){var f=d+e>>1;0>c(a[f],b)?d=f+1:e=f}return d==e&&a[d]==b?d:~d}function Qe(a,b){return a-b}function Re(a,b,c){c=Pe(a,b,c);return 0>c?(a.splice(-(c+1),0,b),!0):!1};function Se(a,b,c,d){a=b?a.reverse():a;if(null==c&&null==d)return a;c=Math.min(q(c)?c:a.length,a.length);if(0==c)return[];d=Math.min(d||0,a.length);return a.slice(d,d+c)};function Te(){this.oa=0}Te.prototype.add=function(a,b){this.oa+=b};Te.prototype.remove=function(a,b){this.oa-=b};Te.prototype.clear=function(){this.oa=0};function Ue(a,b){a.clear();b.forEach(function(a){this.oa+=a.oa},a)};function Ve(a,b,c,d){this.u=a;this.U=b;this.le=c;this.mb=new Te;if(d){a=511;a*=a*a;if(d.length>=a)throw new D(6,a);d=We(this,d);this.qa=d=Xe(d)}else this.clear()}var Ye=[];m=Ve.prototype;m.getName=g("u");m.toString=function(){return this.qa.toString()};m.add=function(a,b){this.qa=this.qa.vb(a,b)};m.set=function(a,b){this.qa=this.qa.vb(a,b,!0)};m.remove=function(a,b){this.qa=this.qa.remove(a,b)};m.get=function(a){return this.qa.get(a)};
m.Yc=function(a){if(null==a)return this.Ma().oa;if(a instanceof Wc){if(Yc(a))return this.Ma().oa;if(bd(a))return this.get(a.b).length}return this.Xa([a]).length};m.Ma=g("mb");m.vc=function(a,b,c,d){c=Array(a);this.qa.fill({offset:b?this.mb.oa-a-d:d,count:a,ie:0},c);return b?c.reverse():c};
m.Xa=function(a,b,c,d){var e=Ze(this.qa).c[0];if(!q(e)||0==c)return Ye;b=b||!1;c=null!=c?Math.min(c,this.mb.oa):this.mb.oa;d=d||0;var f=Math.min(Math.max(this.mb.oa-d,0),c);if(0==f)return Ye;if(!q(a)||1==a.length&&a[0]instanceof Wc&&Yc(a[0]))return this.vc(f,b,c,d);a=this.U.hf(a);var h=Array(b?this.mb.oa:f),k={count:0,W:h.length,reverse:b,M:d};a.forEach(function(a){for(var b=this.U.od(a),b=this.U.Nd(a)?e:b[0],b=$e(this.qa,b),c=k.count,d=0;null!=b&&k.count<k.W;)b.Xa(a,k,h),k.count!=c?(d=0,c=k.count):
d++,b=2==d?null:b.next()},this);h.splice(k.count,f-k.count);return b?Se(h,b,c,d):h};m.clear=function(){this.qa=af(this);this.mb.clear()};m.cb=function(a){return this.qa.cb(a)};m.min=function(){return this.Dc(this.U.min.bind(this.U))};m.max=function(){return this.Dc(this.U.max.bind(this.U))};m.Dc=function(a){var b=Ze(this.qa),c=bf(this.qa);if(0==b.c.length&&0==c.c.length)return null;var d=b.c[0],b=b.A[0],e=c.c[c.c.length-1],c=c.A[c.c.length-1];return 1==a(d,e)?[d,this.le?[b]:b]:[e,this.le?[c]:c]};
m.Ga=g("le");m.nc=g("U");m.Rd=function(a,b){return null!=a?-1==this.U.compare(a,b):!1};m.Na=function(a,b){return null!=a?0==this.U.compare(a,b):!1};m.Ia=function(){for(var a=[],b=Ze(this.qa);b;)a.push(new y(b.pa,[b.c,b.A])),b=b.ya;return a};function cf(a,b,c,d){a=new Ve(b,a,c);d=df(d,a);a.qa=d;return a}function ef(a,b){this.pa=a;this.D=b;this.gb=0;this.ya=this.yb=this.B=null;this.c=[];this.A=[];this.h=[]}function af(a){return new ef(mb++,a)}function P(a){return 0==a.gb}m=ef.prototype;m.next=g("ya");
function ff(a){function b(a){return null!=a?a.pa.toString():"_"}var c=a.pa+"["+a.c.join("|")+"]",d=a.h.map(function(a){return a.pa}).join("|"),e=a.A.join("/"),f=b(a.yb)+"{",f=P(a)?f+e:f+d,f=f+"}"+b(a.B);a.ya&&(a=ff(a.ya),c=c+"  "+a[0],f=f+"  "+a[1]);return[c,f]}m.toString=function(){var a="",b=ff(this),a=a+(b[0]+"\n"+b[1]+"\n");this.h.length&&(a+=this.h[0].toString());return a};function Ze(a){return P(a)?a:Ze(a.h[0])}function bf(a){return P(a)?a:bf(a.h[a.h.length-1])}
function gf(a,b){b&&(b.yb=a);a&&(a.ya=b)}function We(a,b){for(var c=b.length,d=0,e=af(a),f=e;0<c;){var h=768<=c?511:257<=c&&511>=c?c:257,k=b.slice(d,d+h);e.c=k.map(function(a){return a.key});e.A=k.map(function(a){return a.value});d+=h;c-=h;0<c&&(h=af(e.D),gf(e,h),e=h)}return f}function hf(a){var b=a[0],c=af(b.D);c.gb=b.gb+1;c.h=a;for(b=0;b<a.length;++b)a[b].B=c,0<b&&c.c.push(a[b].c[0]);return c}
function Xe(a){var b=a,c=[];do c.push(b),b=b.ya;while(b);if(512>=c.length)b=hf(c);else{var d=c.length,e=0,b=af(a.D);for(b.gb=a.gb+2;0<d;){a=768<=d?511:257<=d&&511>=d?d:257;var f=c.slice(e,e+a),h=hf(f);h.B=b;b.h.length&&(b.c.push(f[0].c[0]),gf(b.h[b.h.length-1],h));b.h.push(h);e+=a;d-=a}}return b}m.get=function(a){var b=jf(this,a);if(P(this)){var c=Ye;this.D.Na(this.c[b],a)&&(c=c.concat(this.A[b]));return c}b=this.D.Na(this.c[b],a)?b+1:b;return this.h[b].get(a)};
m.cb=function(a){var b=jf(this,a);return this.D.Na(this.c[b],a)?!0:P(this)?!1:this.h[b].cb(a)};m.remove=function(a,b){kf(this,a,-1,b);if(null==this.B){var c=this;1==this.h.length&&(c=this.h[0],c.B=null);return c}return this};function mf(a){return P(a)?a.c[0]:mf(a.h[0])}function nf(a){a.c=[];for(var b=1;b<a.h.length;++b)a.c.push(mf(a.h[b]))}
function kf(a,b,c,d){var e=jf(a,b),f=P(a);if(!f){var h=a.D.Na(a.c[e],b)?e+1:e;if(kf(a.h[h],b,h,d))nf(a);else return!1}else if(!a.D.Na(a.c[e],b))return!1;if(a.c.length>e&&a.D.Na(a.c[e],b)){if(q(d)&&!a.D.Ga()&&f&&(h=a.A[e],d=Pe(h,d,void 0),0>d?d=!1:(h.splice(d,1),d=!0),d&&a.D.Ma().remove(b,1),a.A[e].length))return!1;a.c.splice(e,1);f&&(f=a.D.Ga()?1:a.A[e].length,a.A.splice(e,1),a.D.Ma().remove(b,f))}if(256>a.c.length&&null!=a.B){a:{b=null;if(a.ya&&256<a.ya.c.length)b=a.ya,e=d=0,f=a.c.length+1;else if(a.yb&&
256<a.yb.c.length)b=a.yb,d=a.yb.c.length-1,e=P(a)?d:d+1,f=0;else{b=!1;break a}a.c.splice(f,0,b.c[d]);b.c.splice(d,1);d=P(a)?a.A:a.h;h=null;P(a)?h=b.A:(h=b.h,h[e].B=a);d.splice(f,0,h[e]);h.splice(e,1);P(b)||(nf(b),nf(a));b=!0}b||of(a,c)}return!0}
function of(a,b){var c,d,e;a.ya&&511>a.ya.c.length?(c=a.ya,e=d=0):a.yb&&(c=a.yb,d=c.c.length,e=P(c)?c.A.length:c.h.length);d=[d,0].concat(a.c);Array.prototype.splice.apply(c.c,d);d=null;P(a)?d=a.A:(d=a.h,d.forEach(function(a){a.B=c}));d=[e,0].concat(d);Array.prototype.splice.apply(P(c)?c.A:c.h,d);gf(a.yb,a.ya);P(c)||nf(c);-1!=b&&(a.B.c.splice(b,1),a.B.h.splice(b,1))}
m.vb=function(a,b,c){var d=jf(this,a);if(P(this)){if(this.D.Na(this.c[d],a)){if(c)this.D.Ma().remove(a,this.D.Ga()?1:this.A[d].length),this.A[d]=this.D.Ga()?b:[b];else{if(this.D.Ga())throw new D(201);if(!Re(this.A[d],b))throw new D(109);}this.D.Ma().add(a,1);return this}this.c.splice(d,0,a);this.A.splice(d,0,this.D.Ga()?b:[b]);this.D.Ma().add(a,1);512==this.c.length?(d=af(this.D),a=af(this.D),a.gb=1,a.c=[this.c[256]],a.h=[this,d],a.B=this.B,this.B=a,d.c=this.c.splice(256),d.A=this.A.splice(256),d.B=
a,gf(d,this.ya),gf(this,d),d=a):d=this;return d}d=this.D.Na(this.c[d],a)?d+1:d;a=this.h[d].vb(a,b,c);P(a)||1!=a.c.length||(this.c.splice(d,0,a.c[0]),a.h[1].B=this,a.h[0].B=this,this.h.splice(d,1,a.h[1]),this.h.splice(d,0,a.h[0]));return 512==this.c.length?pf(this):this};function pf(a){var b=af(a.D),c=af(a.D);b.B=a.B;b.gb=a.gb+1;b.c=[a.c[256]];b.h=[a,c];a.c.splice(256,1);c.B=b;c.gb=a.gb;c.c=a.c.splice(256);c.h=a.h.splice(257);c.h.forEach(function(a){a.B=c});a.B=b;gf(c,a.ya);gf(a,c);return b}
function jf(a,b){for(var c=0,d=a.c.length;c<d;){var e=c+d>>1;a.D.Rd(a.c[e],b)?c=e+1:d=e}return c}function $e(a,b){if(!P(a)){var c=jf(a,b);a.D.Na(a.c[c],b)&&c++;return $e(a.h[c],b)}return a}
m.Xa=function(a,b,c){function d(a){return a[0]?a[1]?0:1:-1}var e=this.D.nc(),f=0,h=this.c.length-1,k=this.c,n=d(e.qb(k[f],a)),A=d(e.qb(k[h],a));if(1!=n&&(-1!=n||-1!=A)){var ha=function(a,b){var c=a+b>>1;return c==a?c+1:c},oa=function(b,c,f){if(b>=c)return 0==f?c:-1;var h=d(e.qb(k[b],a));if(0==h)return b;if(1==h)return-1;h=ha(b,c);if(h==c)return 0==f?c:-1;var n=d(e.qb(k[h],a));return 0==n?oa(b,h,n):-1==n?oa(h+1,c,f):oa(b+1,h,n)},Ya=function(b,c){if(b>=c)return b;var f=d(e.qb(k[c],a));if(0==f)return c;
if(-1==f)return b;f=ha(b,c);if(f==c)return b;var h=d(e.qb(k[f],a));return 0==h?Ya(f,c):1==h?Ya(b,f-1):-1};0!=n&&(f=oa(f+1,h,A));-1!=f&&(h=Ya(f,h),-1!=h&&h>=f&&qf(this,b,c,f,h+1))}};function qf(a,b,c,d,e){for(;d<e&&(b.reverse||!(b.count>=b.W));++d)if(a.D.Ga())!b.reverse&&b.M?b.M--:c[b.count++]=a.A[d];else for(var f=0;f<a.A[d].length&&b.count<c.length;++f)!b.reverse&&b.M?b.M--:c[b.count++]=a.A[d][f]}
m.fill=function(a,b){if(P(this))for(var c=0;c<this.A.length&&0<a.count;++c)if(0<a.offset){if(a.offset-=this.D.Ga()?1:this.A[c].length,0>a.offset)for(var d=this.A[c].length+a.offset;d<this.A[c].length&&0<a.count;++d)b[a.ie++]=this.A[c][d],a.count--}else if(this.D.Ga())b[a.ie++]=this.A[c],a.count--;else for(d=0;d<this.A[c].length&&0<a.count;++d)b[a.ie++]=this.A[c][d],a.count--;else for(c=0;c<this.h.length&&0<a.count;++c)this.h[c].fill(a,b)};
function df(a,b){for(var c=b.Ma(),d=a.map(function(a){var d=new ef(a.id(),b);d.c=a.o[0];d.A=a.o[1];d.c.forEach(function(a,e){c.add(a,b.Ga()?1:d.A[e].length)});return d}),e=0;e<d.length-1;++e)gf(d[e],d[e+1]);return 1<d.length?Xe(d[0]):d[0]};function rf(a){this.compare=0==a?sf:tf;this.Td=0==a?function(a){return null!=a?a.reverse():null}:function(a){return a||null};this.Zd=0==a?uf:vf}t(rf,nc);function tf(a,b){return a>b?1:a<b?-1:0}function sf(a,b){return tf(b,a)}function vf(a,b){return cd(a,b)}function uf(a,b){return cd(b,a)}m=rf.prototype;m.qb=function(a,b){var c=this.Td(b),d=[c.b==E,c.w==E];if(!d[0]){var e=this.compare(a,c.b);d[0]=c.da?1==e:-1!=e}d[1]||(e=this.compare(a,c.w),d[1]=c.ma?-1==e:1!=e);return d};
m.compare=function(a,b){return this.compare(a,b)};m.min=function(a,b){return a<b?1:a==b?0:-1};m.max=function(a,b){return a>b?1:a==b?0:-1};m.Md=function(a,b){var c=this.qb(a,b);return c[0]&&c[1]};m.hf=function(a){return a.filter(function(a){return null!==a}).sort(function(a,c){return this.Zd(a,c)}.bind(this))};m.Nd=function(a){return this.Td(a).b==E};m.od=function(a){a=this.Td(a);return[a.b,a.w]};m.toString=function(){return this.compare==sf?"SimpleComparator_DESC":"SimpleComparator_ASC"};function wf(a){this.Ka=a.map(function(a){return new rf(a)})}t(wf,nc);function xf(a,b,c,d){for(var e=0,f=0;f<a.Ka.length&&0==e;++f)e=d(a.Ka[f],b[f],c[f]);return e}m=wf.prototype;m.compare=function(a,b){return xf(this,a,b,function(a,b,e){return a.compare(b,e)})};m.min=function(a,b){return xf(this,a,b,function(a,b,e){return a.min(b,e)})};m.max=function(a,b){return xf(this,a,b,function(a,b,e){return a.max(b,e)})};
m.qb=function(a,b){for(var c=[!0,!0],d=0;d<this.Ka.length&&(c[0]||c[1]);++d){var e=this.Ka[d].qb(a[d],b[d]);c[0]=c[0]&&e[0];c[1]=c[1]&&e[1]}return c};m.Md=function(a,b){for(var c=!0,d=0;d<this.Ka.length&&c;++d)c=this.Ka[d].Md(a[d],b[d]);return c};
m.hf=function(a){var b=a.filter(function(a){return a.every(fa)});a=Array(this.Ka.length);for(var c=0;c<a.length;c++)a[c]=b.map(function(a){return a[c]});a.forEach(function(a,b){a.sort(function(a,c){return this.Ka[b].Zd(a,c)}.bind(this))},this);b=Array(b.length);for(c=0;c<b.length;c++)b[c]=a.map(function(a){return a[c]});return b.sort(function(a,b){for(var c=0,h=0;h<this.Ka.length&&0==c;++h)c=this.Ka[h].Zd(a[h],b[h]);return c}.bind(this))};m.Nd=function(a){return this.Ka[0].Nd(a[0])};
m.od=function(a){var b=a.map(function(a,b){return this.Ka[b].od(a)[0]},this);a=a.map(function(a,b){return this.Ka[b].od(a)[1]},this);return[b,a]};function yf(a){if(1==a.f.length)return new rf(a.f[0].ib);a=a.f.map(function(a){return a.ib});return new wf(a)};function zf(a){this.fa=a;this.hb=C();this.Mc=new Te;this.mb=new Te}m=zf.prototype;m.getName=function(){return this.fa.getName()};m.add=function(a,b){null===a?(this.hb.add(b),this.Mc.add(a,1)):this.fa.add(a,b)};m.set=function(a,b){null===a?(this.hb.clear(),this.Mc.clear(),this.add(a,b)):this.fa.set(a,b)};m.remove=function(a,b){null===a?b?(this.hb.delete(b),this.Mc.remove(a,1)):(this.hb.clear(),this.Mc.clear()):this.fa.remove(a,b)};m.get=function(a){return null===a?cc(this.hb):this.fa.get(a)};
m.Yc=function(a){return this.fa.Yc(a)};m.Ma=function(){Ue(this.mb,[this.fa.Ma(),this.Mc]);return this.mb};m.Xa=function(a,b,c,d){b=this.fa.Xa(a,b,c,d);return null!=a?b:b.concat(cc(this.hb))};m.clear=function(){this.hb.clear();this.fa.clear()};m.cb=function(a){return null===a?0!=this.hb.size:this.fa.cb(a)};m.min=function(){return this.fa.min()};m.max=function(){return this.fa.max()};m.Ia=function(){return[new y(-2,cc(this.hb))].concat(this.fa.Ia())};m.nc=function(){return this.fa.nc()};
function Af(a,b){for(var c=-1,d=0;d<b.length;++d)if(-2==b[d].id()){c=d;break}if(-1==c)throw new D(102);var d=b[c].o,e=b.slice(0);e.splice(c,1);var c=a(e),f=new zf(c);d.forEach(function(a){f.hb.add(a)});return f}m.Ga=function(){return this.fa.Ga()};function Bf(a){this.u=a;this.lb=C();this.U=new rf(1)}m=Bf.prototype;m.getName=g("u");m.add=function(a){if("number"!=typeof a)throw new D(103);this.lb.add(a)};m.set=function(a,b){this.add(a,b)};m.remove=function(a){this.lb.delete(a)};m.get=function(a){return this.cb(a)?[a]:[]};m.min=function(){return this.Dc(this.U.min.bind(this.U))};m.max=function(){return this.Dc(this.U.max.bind(this.U))};
m.Dc=function(a){if(0==this.lb.size)return null;var b=cc(this.lb).reduce(function(b,d){return null===b||1==a(d,b)?d:b},null);return[b,[b]]};m.Yc=function(){return this.lb.size};m.Xa=function(a,b,c,d){var e=a||[ad()];a=cc(this.lb).filter(function(a){return e.some(function(b){return this.U.Md(a,b)},this)},this);return Se(a,b,c,d)};m.clear=function(){this.lb.clear()};m.cb=function(a){return this.lb.has(a)};m.Ia=function(){return[new y(0,cc(this.lb))]};m.nc=g("U");
function Cf(a,b){var c=new Bf(a);b[0].o.forEach(function(a){c.add(a,a)});return c}m.Ga=l(!0);m.Ma=function(){var a=new Te;a.oa=this.lb.size;return a};function Df(a){this.g=a;this.Ja=a.i(Pb);this.C=a.i(Rb);this.S=a.i(Qb)}Df.prototype.Ea=function(a){var b=a.ra(),c=function(){if(0==b.length)return w();var a=b.shift();return(a.xb()?Ef(this,a):Ff(this,a)).then(c)}.bind(this);return c()};function Ff(a,b){var c=new Rc(a.g,C([b])),c=a.Ja.zb(0,c),d=c.G(b.getName(),b.Jb.bind(b)).get([]).then(function(a){this.S.Tb(b.getName(),a);Gf(this,b,a)}.bind(a));c.ia();return d}
function Gf(a,b,c){var d=a.C.hc.get(b.getName())||[];c.forEach(function(a){d.forEach(function(b){var c=a.Cb(b.getName());b.add(c,a.id())})})}function Ef(a,b){var c=new Rc(a.g,C([b])),d=a.Ja.zb(0,c),c=d.G(b.getName(),b.Jb).get([]).then(function(a){this.S.Tb(b.getName(),a)}.bind(a)),e=b.xa().map(function(a){return Hf(this,a,d)},a).concat(If(a,b,d));d.ia();return bb(e.concat(c))}
function Hf(a,b,c){c=c.G(b.m(),ob,1);var d=yf(b);return c.get([]).then(function(a){if(1<a.length){if(Jf(b)){var c=cf.bind(void 0,d,b.m(),b.Bc);a=Af(c,a.slice(1))}else a=cf(d,b.m(),b.Bc,a.slice(1));this.C.set(b.Nc,a)}}.bind(a))}function If(a,b,c){return c.G(xe(b),ob,1).get([]).then(function(a){1<a.length&&(a=Cf(xe(b),a.slice(1)),this.C.set(b.getName(),a))}.bind(a))};function Mf(){this.ba=z();this.hc=z()}Mf.prototype.Ea=function(a){a.ra().forEach(function(a){var c=[];this.hc.set(a.getName(),c);var d=xe(a);if(null===this.get(d)){var e=new Bf(d);c.push(e);this.ba.set(d,e)}a.xa().forEach(function(a){var b;b=yf(a);b=new Ve(a.m(),b,a.Bc);b=Jf(a)?new zf(b):b;c.push(b);this.ba.set(a.m(),b)},this)},this);return w()};Mf.prototype.get=function(a){return this.ba.get(a)||null};
Mf.prototype.set=function(a,b){var c=this.hc.get(a)||null;null===c&&(c=[],this.hc.set(a,c));for(var d=null,e=0;e<c.length;e++)if(c[e].getName()==b.getName()){d=e;break}null!==d&&0<c.length?c.splice(d,1,b):c.push(b);this.ba.set(b.getName(),b)};function Nf(a){this.gc=[];q(a)&&this.add(a)}Nf.prototype.toString=function(){return this.gc.map(function(a){return a.toString()}).join(",")};Nf.prototype.cb=function(a){return this.gc.some(function(b){return b.contains(a)})};Nf.prototype.Bb=g("gc");
Nf.prototype.add=function(a){if(0!=a.length)if(a=this.gc.concat(a),1==a.length)this.gc=a;else{a.sort(cd);for(var b=[],c=a[0],d=1;d<a.length;++d)if(Zc(c,a[d])){var e=a[d],f=ad();if(c.b!=E&&e.b!=E){var h=$c(c.b,e.b,!0);1!=h?(f.b=c.b,f.da=0!=h?c.da:c.da&&e.da):(f.b=e.b,f.da=e.da)}c.w!=E&&e.w!=E&&(h=$c(c.w,e.w,!1),-1!=h?(f.w=c.w,f.ma=0!=h?c.ma:c.ma&&e.ma):(f.w=e.w,f.ma=e.ma));c=f}else b.push(c),c=a[d];b.push(c);this.gc=b}};
function Of(a,b){var c=[];a.Bb().map(function(a){return b.Bb().map(function(b){var c;if(Zc(a,b)){c=ad();var h=$c(a.b,b.b,!0),h=0==h?a.da?a:b:-1!=h?a:b;c.b=h.b;c.da=h.da;a.w==E||b.w==E?b=a.w==E?b:a:(h=$c(a.w,b.w,!1),b=0==h?a.ma?a:b:-1==h?a:b);c.w=b.w;c.ma=b.ma}else c=null;return c})}).forEach(function(a){c=c.concat(a)});return new Nf(c.filter(function(a){return null!==a}))};function Pf(a,b){var c=[],d=null,e=null;Dd(a,function(a){var h=b(a);null==a.getParent()?e=h:L(d,h);var k=a.getParent();null!==k&&K(k).length==K(d).length&&(k=c.indexOf(d),-1!=k&&c.splice(k,1));1<K(a).length&&c.push(h);d=null===a.h?c[c.length-1]:h});return e}function Qf(a){return Rf(a,function(a){return null===a.h})}
function Sf(a){var b=a.getParent(),c=0;null!==b&&(c=K(b).indexOf(a),b.removeChild(a));var d=K(a).slice();d.forEach(function(d,f){a.removeChild(d);null===b||Ad(b,d,c+f)});return{parent:b,children:d}}function Tf(a,b){K(a).slice().forEach(function(c){a.removeChild(c);L(b,c)});L(a,b)}function Uf(a){var b=zd(a,0);Sf(a);Tf(b,a);return b}
function Vf(a,b,c){var d=zd(a,0),e=K(d).slice();if(!e.some(function(a){return b(a)}))return a;Sf(a);e.forEach(function(e,h){if(b(e)){var k=c(a);Bd(d,h);L(k,e);Ad(d,k,h)}});return d}function Wf(a,b,c,d){var e=a.getParent();null!==e&&(a=K(e).indexOf(a),Bd(e,a),Ad(e,c,a));K(b).slice().forEach(function(a){b.removeChild(a);L(d,a)});return c}function Rf(a,b,c){function d(a){b(a)&&e.push(a);null!=c&&c(a)||K(a).forEach(d)}var e=[];d(a);return e}
function Xf(a,b){var c=b||function(a){return a.toString()+"\n"},d="";Dd(a,function(a){for(var b=0;b<yd(a);b++)d+="-";d+=c(a)});return d};function Yf(a){Ed.call(this);this.Pb=a;this.Ya=!1}t(Yf,Ed);m=Yf.prototype;m.Hb=function(){return Pf(this,function(a){if(a instanceof Yf){var b=new Yf(a.Pb);b.Ya=a.Ya;a=a.V();b.pa=a;return b}return a.Hb()})};m.eb=function(a){var b=a||[];Dd(this,function(a){a!=this&&a.eb(b)}.bind(this));a=C(b);return cc(a)};m.qd=function(a){this.Ya!=a&&(this.Ya=a,this.Pb="and"==this.Pb?"or":"and",K(this).forEach(function(b){return b.qd(a)}))};
m.eval=function(a){var b=K(this).map(function(b){return b.eval(a)});return Zf(this,b)};function Zf(a,b){return"and"==a.Pb?id(b):jd(b)}m.toString=function(){return"combined_pred_"+this.Pb.toString()};function $f(a,b,c){Ed.call(this);this.ga=a;this.la=b;this.F=c;this.Ud=null;a=qd.wc();this.rc=wd(a,this.ga.H(),this.F);this.Zf=a.Me.get(this.ga.H())||null}t($f,Ed);m=$f.prototype;m.Hb=function(){var a=new $f(this.ga,this.la,this.F),b=this.V();a.pa=b;return a};m.eb=function(a){return null!=a?(a.push(this.ga),a.push(this.la),a):[this.ga,this.la]};
m.reverse=function(){var a=this.F;switch(this.F){case "gt":a="lt";break;case "lt":a="gt";break;case "gte":a="lte";break;case "lte":a="gte"}return new $f(this.la,this.ga,a)};m.eval=function(a){var b=a.entries.filter(function(a){var b=H(a,this.ga);a=H(a,this.la);return this.rc(b,a)},this);return new F(b,G(a))};m.toString=function(){return"join_pred("+this.ga.m()+" "+this.F+" "+this.la.m()+")"};
function ag(a,b,c){var d=null,e=null;-1!=G(b).indexOf(I(a.ga.G()))?(d=b,e=c):(d=c,e=b);if(d.entries.length>e.entries.length){a:{b=a.ga;a.ga=a.la;a.la=b;b=a.F;switch(a.F){case "gt":b="lt";break;case "lt":b="gt";break;case "gte":b="lte";break;case "lte":b="gte";break;default:break a}a.F=b;a.rc=wd(qd.wc(),a.ga.H(),a.F)}return[e,d]}return[d,e]}function bg(a){var b={};a.eb().forEach(function(a){b[a.getName()]=null});return b}
function cg(a,b,c){null===a.Ud&&(a.Ud=bg(a.la.G()));var d=new ld(new y(-1,a.Ud),!1);return od(b,c,d,[I(a.la.G())])}
function dg(a,b,c,d){var e=[b,c];d||(e=ag(a,b,c));b=e[0];c=e[1];var e=b,f=c,h=a.ga,k=a.la;d&&(e=c,f=b,h=a.la,k=a.ga);var n=new zc,A=[];e.entries.forEach(function(a){var b=String(H(a,h));n.set(b,a)});var ha=G(e),oa=G(f);f.entries.forEach(function(a){var b=H(a,k),c=String(b);null!==b&&n.has(c)?n.get(c).forEach(function(b){b=od(a,oa,b,ha);A.push(b)}):d&&A.push(cg(this,a,oa))}.bind(a));a=G(b).concat(G(c));return new F(A,a)}
function eg(a,b,c,d,e){function f(a,b){var c=new ld(b,1<ha.length),c=od(a,oa,c,ha);A.push(c)}var h=d.Rf.G(),k=b,n=c;-1!=G(b).indexOf(I(h))&&(k=c,n=b);var A=[],ha=G(n),oa=G(k);k.entries.forEach(function(a){var b=this.Zf(H(a,d.eg)),b=d.index.get(b);0!=b.length&&(d.index.Ga()?f(a,e.get(b[0])):Oe(e,b).forEach(f.bind(null,a)))},a);a=G(k).concat(G(n));return new F(A,a)};function fg(a,b,c){return null===b?new Gd(a,b,c):q(b.m)?new $f(a,b,c):new Gd(a,b,c)};var gg={};r("lf.schema.DataStoreType",gg);gg.INDEXED_DB=0;gg.MEMORY=1;gg.LOCAL_STORAGE=2;gg.FIREBASE=3;gg.WEB_SQL=4;gg.OBSERVABLE_STORE=5;function hg(a,b,c,d){this.Nc=a;this.name=b;this.Bc=c;this.f=d}hg.prototype.m=function(){return this.Nc+"."+this.name};function Jf(a){return a.f.some(function(a){return a.ca.Ac()})}function Q(a,b,c,d){this.u=a;this.ka=c;this.J=b;this.ld=d;this.ab=null}r("lf.schema.Table",Q);Q.prototype.getName=g("u");Q.prototype.getName=Q.prototype.getName;Q.prototype.Wa=g("ab");
function I(a){return a.ab||a.u}Q.prototype.lc=function(a){var b=new this.constructor(this.u);b.ab=a;b.pg=this.pg;return b};Q.prototype.as=Q.prototype.lc;Q.prototype.createRow=Q.prototype.rb;Q.prototype.deserializeRow=Q.prototype.Jb;Q.prototype.xa=g("ka");Q.prototype.getIndices=Q.prototype.xa;Q.prototype.eb=g("J");Q.prototype.getColumns=Q.prototype.eb;Q.prototype.getConstraint=Q.prototype.Ab;Q.prototype.xb=g("ld");Q.prototype.persistentIndex=Q.prototype.xb;function xe(a){return a.u+".#"};function R(a,b){this.child=a;this.Gb=b;this.ab=null}m=R.prototype;m.getName=function(){return this.Gb+"("+this.child.getName()+")"};m.m=function(){return this.Gb+"("+this.child.m()+")"};m.G=function(){return this.child.G()};m.toString=function(){return this.m()};m.H=function(){return this.child.H()};m.Wa=g("ab");m.xa=function(){return[]};m.wa=l(null);m.Ac=l(!1);m.lc=function(a){this.ab=a;return this};R.prototype.as=R.prototype.lc;
function ig(a){for(var b=[a];a instanceof R;)b.push(a.child),a=a.child;return b}function jg(a){this.ab=a||null;this.O=new Q("#UnknownTable",[],[],!1)}m=jg.prototype;m.getName=l("*");m.m=function(){return this.getName()};m.toString=function(){return this.m()};m.G=g("O");m.H=l(4);m.Wa=g("ab");m.xa=function(){return[]};m.wa=l(null);m.Ac=l(!1);r("lf.fn.avg",function(a){return new R(a,"AVG")});function kg(a){return new R(a||new jg,"COUNT")}r("lf.fn.count",kg);function lg(a){return new R(a,"DISTINCT")}r("lf.fn.distinct",lg);r("lf.fn.max",function(a){return new R(a,"MAX")});r("lf.fn.min",function(a){return new R(a,"MIN")});r("lf.fn.stddev",function(a){return new R(a,"STDDEV")});r("lf.fn.sum",function(a){return new R(a,"SUM")});r("lf.fn.geomean",function(a){return new R(a,"GEOMEAN")});function S(a,b){J.call(this);this.Jf=b}t(S,J);S.prototype.exec=function(a,b){switch(this.Jf){case 1:return mg(this,a,b);case 0:return ng(this,a,b);default:return og(this,a,b)}};S.prototype.toString=l("dummy_node");S.prototype.Oc=function(){return this.toString()};function og(a,b,c){return new v(function(a){a(this.ea(b,[],c))}.bind(a))}function mg(a,b,c){return zd(a,0).exec(b,c).then(function(a){return this.ea(b,a,c)}.bind(a))}
function ng(a,b,c){var d=K(a).map(function(a){return a.exec(b,c)});return bb(d).then(function(a){var d=[];a.forEach(function(a){for(var b=0;b<a.length;++b)d.push(a[b])});return this.ea(b,d,c)}.bind(a))};function pg(a){S.call(this,0,1);this.se=a}t(pg,S);pg.prototype.toString=function(){return"aggregation("+this.se.map(function(a){return a.m()}).toString()+")"};pg.prototype.ea=function(a,b){b.forEach(function(a){qg(new rg(a,this.se))},this);return b};function rg(a,b){this.Ha=a;this.J=b}
function qg(a){a.J.forEach(function(a){a=ig(a).reverse();for(var c=1;c<a.length;c++){var d=a[c],e=ig(d).slice(-1)[0],f=d.child instanceof R?fd(this.Ha,d.child):this.Ha;if(null!==f.Va&&f.Va.has(d.m()))break;f=sg(d.Gb,f,e);e=this.Ha;null===e.Va&&(e.Va=z());e.Va.set(d.m(),f)}},a)}
function sg(a,b,c){var d=null;switch(a){case "MIN":d=tg(b,c,function(a,b){return b<a?b:a});break;case "MAX":d=tg(b,c,function(a,b){return b>a?b:a});break;case "DISTINCT":d=ug(b,c);break;case "COUNT":d=vg(b,c);break;case "SUM":d=wg(b,c);break;case "AVG":a=vg(b,c);0<a&&(d=wg(b,c)/a);break;case "GEOMEAN":d=xg(b,c);break;default:d=yg(b,c)}return d}function tg(a,b,c){return a.entries.reduce(function(a,e){var f=H(e,b);return null===f?a:null===a?f:c(a,f)},null)}
function vg(a,b){return b instanceof jg?a.entries.length:a.entries.reduce(function(a,d){return a+(ea(H(d,b))?0:1)},0)}function wg(a,b){return tg(a,b,function(a,b){return b+a})}function yg(a,b){var c=[];a.entries.forEach(function(a){a=H(a,b);null===a||c.push(a)});return 0==c.length?null:xb.apply(null,c)}function xg(a,b){var c=0,d=a.entries.reduce(function(a,d){var h=H(d,b);if(0==h||null===h)return a;c++;return a+Math.log(h)},0);return 0==c?null:Math.pow(Math.E,d/c)}
function ug(a,b){var c=z();a.entries.forEach(function(a){var e=H(a,b);c.set(e,a)});return new F(B(c),G(a))};function zg(a,b){this.Ba=a;this.aa=b}zg.prototype.fb=g("Ba");zg.prototype.$=g("aa");function Ag(){J.call(this)}t(Ag,J);function Bg(a,b){J.call(this);this.table=a;this.values=b}t(Bg,Ag);function Cg(a,b){Bg.call(this,a,b)}t(Cg,Bg);function Dg(a){J.call(this);this.table=a}t(Dg,Ag);Dg.prototype.toString=function(){return"delete("+this.table.getName()+")"};function Eg(a,b){J.call(this);this.table=a;this.me=b}t(Eg,Ag);
Eg.prototype.toString=function(){var a=[];this.me&&(a=this.me.map(function(a){return a.N.getName()},this));return"update("+this.table.getName()+", ["+a.join(",")+"])"};function Fg(a){J.call(this);this.I=a}t(Fg,Ag);Fg.prototype.toString=function(){return"select("+this.I.toString()+")"};function Gg(a){J.call(this);this.table=a}t(Gg,Ag);Gg.prototype.toString=function(){var a="table_access("+this.table.getName();null===this.table.Wa()||(a+=" as "+this.table.Wa());return a+")"};
function Hg(){J.call(this)}t(Hg,Ag);Hg.prototype.toString=l("cross_product");function Ig(a,b){J.call(this);this.f=a;this.Lb=b}t(Ig,Ag);Ig.prototype.toString=function(){var a="project("+this.f.toString();if(null!==this.Lb)var b=this.Lb.map(function(a){return a.m()}).join(", "),a=a+(", groupBy("+b+")");return a+")"};function Jg(a){J.call(this);this.L=a}t(Jg,Ag);Jg.prototype.toString=function(){return"order_by("+Pd(this.L)+")"};function Kg(a){J.call(this);this.f=a}t(Kg,Ag);
Kg.prototype.toString=function(){return"aggregation("+this.f.toString()+")"};function Lg(a){J.call(this);this.f=a}t(Lg,Ag);Lg.prototype.toString=function(){return"group_by("+this.f.toString()+")"};function Mg(a){J.call(this);this.W=a}t(Mg,Ag);Mg.prototype.toString=function(){return"limit("+this.W+")"};function Ng(a){J.call(this);this.M=a}t(Ng,Ag);Ng.prototype.toString=function(){return"skip("+this.M+")"};function Og(a,b){J.call(this);this.I=a;this.Nb=b}t(Og,Ag);
Og.prototype.toString=function(){return"join(type: "+(this.Nb?"outer":"inner")+", "+this.I.toString()+")"};function Pg(){};function Qg(){}t(Qg,Pg);Qg.prototype.kb=function(a){this.Z=a;this.Ta(this.Z);return this.Z};Qg.prototype.Ta=function(a){if(a instanceof Fg){var b=Rg(this,a.I),b=Sg(this,b);Wf(a,a,b[0],b[1]);a==this.Z&&(this.Z=b[0]);a=b[0]}K(a).forEach(function(a){this.Ta(a)},this)};function Rg(a,b){if(0==K(b).length||"and"!=b.Pb)return[b];var c=K(b).slice().map(function(a){b.removeChild(a);return Rg(this,a)},a);return Ca(c)}
function Sg(a,b){var c=null,d=null;b.map(function(a,b){var h=new Fg(a);0==b?c=h:L(d,h);d=h},a);return[c,d]};function Tg(){}t(Tg,Pg);Tg.prototype.kb=function(a,b){if(3>b.b.length)return a;this.Z=a;this.Ta(this.Z);return this.Z};Tg.prototype.Ta=function(a){if(a instanceof Hg)for(;2<K(a).length;){for(var b=new Hg,c=0;2>c;c++){var d=Bd(a,0);L(b,d)}Ad(a,b,0)}K(a).forEach(function(a){this.Ta(a)},this)};function Ug(){S.call(this,0,0)}t(Ug,S);Ug.prototype.toString=l("cross_product");Ug.prototype.ea=function(a,b){for(var c=b[0],d=b[1],e=[],f=G(c),h=G(d),k=0;k<c.entries.length;k++)for(var n=0;n<d.entries.length;n++){var A=od(c.entries[k],f,d.entries[n],h);e.push(A)}c=G(c).concat(G(d));return[new F(e,c)]};function Vg(a,b){Sd.call(this,a,b);this.Ca=a.i(Ub);this.Db=a.i(Vb)}t(Vg,Sd);Vg.prototype.getPriority=l(2);Vg.prototype.Xd=function(a){0==this.H()?Wg(this,a):this.Lc()};function Wg(a,b){a.nd.forEach(function(a,d){a instanceof Od&&Vd(this.Db,a,b[d])},a)}Vg.prototype.Lc=function(){var a=Xd(this.Db,this.$());0!=a.length&&(a=new Ud(this.global,a),Yd(this.Ca,a))};function Xg(a){Jd.call(this,a)}t(Xg,Jd);Xg.prototype.$=function(){var a=C();a.add(this.b);Yg(this,this.b.getName(),a);return a};function Yg(a,b,c){var d=Zg(a.ca.info(),b,1);Zg(a.ca.info(),b).forEach(c.add.bind(c));d.forEach(function(a){Yg(this,a.getName(),c)},a)}Xg.prototype.clone=function(){var a=new Xg(this.ca);Md(a,this);a.b=this.b;return a};Xg.prototype.bind=function(a){Xg.Fb.bind.call(this,a);Nd(this,a);return this};function $g(a){Jd.call(this,a)}t($g,Jd);$g.prototype.$=function(){var a=C();a.add(this.Fa);var b=this.ca.info();ah(this.Fa.getName(),b.Ue).forEach(a.add.bind(a));this.Yb&&Zg(b,this.Fa.getName()).forEach(a.add.bind(a));return a};$g.prototype.clone=function(){var a=new $g(this.ca);Md(a,this);a.Fa=this.Fa;this.values&&(a.values=this.values instanceof pd?this.values:this.values.slice());a.Yb=this.Yb;a.Zb=this.Zb;return a};
$g.prototype.bind=function(a){$g.Fb.bind.call(this,a);this.Zb&&(this.values=this.Zb instanceof pd?a[this.Zb.wa()]:this.Zb.map(function(b){return b instanceof pd?a[b.wa()]:b}));return this};function bh(a){Jd.call(this,a)}t(bh,Jd);bh.prototype.$=function(){var a=C();a.add(this.table);var b=this.set.map(function(a){return a.N.m()}),c=this.ca.info();ch(c,b).forEach(a.add.bind(a));dh(c,b).forEach(a.add.bind(a));return a};bh.prototype.clone=function(){var a=new bh(this.ca);Md(a,this);a.table=this.table;a.set=this.set?this.set.slice():this.set;return a};bh.prototype.bind=function(a){bh.Fb.bind.call(this,a);this.set.forEach(function(b){-1!=b.Tc&&(b.value=a[b.Tc])});Nd(this,a);return this};function eh(a,b){if(null==b)return"NULL";switch(a){case 1:return b?1:0;case 3:case 4:return b;case 0:return"'"+qb(b)+"'";default:return"'"+b.toString()+"'"}}function fh(a,b){var c=a.Yb?"INSERT OR REPLACE":"INSERT",d=a.Fa.eb(),c=c+(" INTO "+a.Fa.getName()+"("),c=c+d.map(function(a){return a.getName()}).join(", "),c=c+") VALUES (";return a.values.map(function(a){var f=d.map(function(c){var d=a.o[c.getName()];return b?null!=d?"#":"NULL":eh(c.H(),d)});return c+f.join(", ")+");"}).join("\n")}
function gh(a){switch(a){case "between":return"BETWEEN";case "eq":return"=";case "gte":return">=";case "gt":return">";case "in":return"IN";case "lte":return"<=";case "lt":return"<";case "match":return"LIKE";case "neq":return"<>";default:return"UNKNOWN"}}function hh(a,b,c,d){return a instanceof pd?"?"+a.wa().toString():d?null!=a?"#":"NULL":"match"==b?"'"+a.toString()+"'":"in"==b?"("+a.map(function(a){return eh(c,a)}).join(", ")+")":"between"==b?eh(c,a[0])+" AND "+eh(c,a[1]):eh(c,a).toString()}
function ih(a,b){return K(a).map(function(a){return"("+jh(a,b)+")"}).join("and"==a.Pb?" AND ":" OR ")}function kh(a){return[a.ga.m(),gh(a.F),a.la.m()].join(" ")}function jh(a,b){if(a instanceof Gd){var c=a.N.m(),d=gh(a.F),e=hh(a.value,a.F,a.N.H(),b);return"="==d&&"NULL"==e?[c,"IS NULL"].join(" "):"<>"==d&&"NULL"==e?[c,"IS NOT NULL"].join(" "):[c,d,e].join(" ")}if(a instanceof Yf)return ih(a,b);if(a instanceof $f)return kh(a);throw new D(357,typeof a);}
function lh(a,b){var c=jh(a,b);return c?" WHERE "+c:""}function mh(a,b){var c="UPDATE "+a.table.getName()+" SET ",c=c+a.set.map(function(a){var b=a.N.m()+" = ";return-1!=a.Tc?b+"?"+a.Tc.toString():b+eh(a.N.H(),a.value).toString()}).join(", ");a.s&&(c+=lh(a.s,b));return c+";"}
function nh(a,b){var c="*";a.f.length&&(c=a.f.map(function(a){return a.Wa()?a.m()+" AS "+a.Wa():a.m()}).join(", "));c="SELECT "+c+" FROM ";null!=a.wb&&0!=a.wb.size?c+=oh(a,b):(c+=a.b.map(ph).join(", "),a.s&&(c+=lh(a.s,b)));if(a.L)var d=a.L.map(function(a){return a.N.m()+(0==a.ib?" DESC":" ASC")}).join(", "),c=c+(" ORDER BY "+d);a.ja&&(d=a.ja.map(function(a){return a.m()}).join(", "),c+=" GROUP BY "+d);a.W&&(c+=" LIMIT "+a.W.toString());a.M&&(c+=" SKIP "+a.M.toString());return c+";"}
function ph(a){return I(a)!=a.getName()?a.getName()+" AS "+I(a):a.getName()}function oh(a,b){for(var c=Rf(a.s,function(a){return a instanceof $f}),d=c.map(kh),e=ph(a.b[0]),f=1;f<a.b.length;f++)var h=ph(a.b[f]),e=a.wb.has(c[d.length-f].V())?e+(" LEFT OUTER JOIN "+h):e+(" INNER JOIN "+h),e=e+(" ON ("+d[d.length-f]+")");c=zd(a.s,0);c instanceof $f||(e+=" WHERE "+jh(c,b));return e}
function qh(a,b){var c=b||!1,d=a.a.clone();if(d instanceof $g)return fh(d,c);if(d instanceof Xg){var e="DELETE FROM "+d.b.getName();d.s&&(e+=lh(d.s,c));return e+";"}if(d instanceof bh)return mh(d,c);if(d instanceof Od)return nh(d,c);throw new D(358,typeof d);};function T(a,b){this.global=a;this.og=a.i(Sb);this.Ca=a.i(Ub);this.a=b}r("lf.query.BaseBuilder",T);T.prototype.exec=function(){try{this.bb()}catch(a){return Za(a)}return new v(function(a,b){var c=new Vg(this.global,[this.yc()]);Yd(this.Ca,c).then(function(b){a(dd(b[0]))},b)},this)};T.prototype.exec=T.prototype.exec;T.prototype.Lf=function(){var a=function(a){return a.Oc(this.a)+"\n"}.bind(this);return Xf(rh(this).fb(),a)};T.prototype.explain=T.prototype.Lf;
T.prototype.bind=function(a){this.a.bind(a);return this};T.prototype.bind=T.prototype.bind;T.prototype.vg=function(a){return qh(this,a)};T.prototype.toSql=T.prototype.vg;T.prototype.bb=aa();function rh(a){if(null==a.Ve){var b;b=a.og;var c=a.a,d=b.bg.create(c);b=b.lg.create(d,c);a.Ve=b}return a.Ve}T.prototype.yc=function(){return{context:this.a.clone(),$d:rh(this)}};function sh(a){T.call(this,a,new Xg(a.i(Wb)))}t(sh,T);r("lf.query.DeleteBuilder",sh);sh.prototype.b=function(a){if(null!=this.a.b)throw new D(515);this.a.b=a;return this};sh.prototype.from=sh.prototype.b;sh.prototype.s=function(a){this.xd();this.a.s=a;return this};sh.prototype.where=sh.prototype.s;sh.prototype.xd=function(){if(null==this.a.b)throw new D(548);if(null!=this.a.s)throw new D(516);};sh.prototype.bb=function(){sh.Fb.bb.call(this);if(null==this.a.b)throw new D(517);};function th(a,b){T.call(this,a,new $g(a.i(Wb)));this.a.Yb=b||!1}t(th,T);r("lf.query.InsertBuilder",th);th.prototype.bb=function(){th.Fb.bb.call(this);var a=this.a;if(null==a.Fa||null==a.values)throw new D(518);if(a.Yb&&null===a.Fa.Ab().bd())throw new D(519);};th.prototype.Fa=function(a){if(null!=this.a.Fa)throw new D(520);this.a.Fa=a;return this};th.prototype.into=th.prototype.Fa;
th.prototype.values=function(a){if(null!=this.a.values)throw new D(521);a instanceof pd||a.some(function(a){return a instanceof pd})?this.a.Zb=a:this.a.values=a;return this};th.prototype.values=th.prototype.values;function uh(a){return vh("and",Array.prototype.slice.call(arguments))}r("lf.op.and",uh);r("lf.op.or",function(a){return vh("or",Array.prototype.slice.call(arguments))});function vh(a,b){var c=new Yf(a);b.forEach(function(a){L(c,a)});return c}r("lf.op.not",function(a){a.qd(!0);return a});function U(a,b){T.call(this,a,new Od(a.i(Wb)));this.Ce=this.sd=!1;this.a.f=b;wh(this);xh(this)}t(U,T);r("lf.query.SelectBuilder",U);U.prototype.bb=function(){U.Fb.bb.call(this);var a=this.a;if(null==a.b)throw new D(522);if(q(a.Ob)&&!q(a.W)||q(a.Vb)&&!q(a.M))throw new D(523);null!=this.a.ja?yh(this):zh(this)};function wh(a){var b=a.a.f.filter(function(a){return a instanceof R&&"DISTINCT"==a.Gb},a);if(0!=b.length&&(1!=b.length||1!=a.a.f.length))throw new D(524);}
function yh(a){var b=a.a.f.filter(function(a){return!(a instanceof R)}).map(function(a){return a.m()}),c=!1;if(0==a.a.ja.length||0==a.a.f.length)c=!0;else{var d=a.a.ja.map(function(a){return a.m()});(c=b.some(function(a){return-1==d.indexOf(a)}))||(c=a.a.ja.some(function(a){a=a.H();return 6==a||0==a}))}if(c)throw new D(525);}function zh(a){var b=a.a.f.some(function(a){return a instanceof R},a);a=a.a.f.some(function(a){return!(a instanceof R)},a)||0==a.a.f.length;if(b&&a)throw new D(526);}
function xh(a){a.a.f.forEach(function(a){if(a instanceof R&&!Ah(a.Gb,a.H()))throw new D(527,a.m());},a)}function Bh(a,b){if(null==a.a.b)throw new D(b);}U.prototype.b=function(a){if(this.Ce)throw new D(515);this.Ce=!0;null==this.a.b&&(this.a.b=[]);this.a.b.push.apply(this.a.b,Array.prototype.slice.call(arguments));return this};U.prototype.from=U.prototype.b;U.prototype.s=function(a){Bh(this,548);if(this.sd)throw new D(516);this.sd=!0;Ch(this,a);return this};U.prototype.where=U.prototype.s;
function Ch(a,b){if(null!=a.a.s){var c=uh(b,a.a.s);a.a.s=c}else a.a.s=b}U.prototype.Uf=function(a,b){Bh(this,542);if(this.sd)throw new D(547);this.a.b.push(a);Ch(this,b);return this};U.prototype.innerJoin=U.prototype.Uf;U.prototype.$f=function(a,b){Bh(this,542);if(!(b instanceof $f))throw new D(541);if(this.sd)throw new D(547);this.a.b.push(a);null==this.a.wb&&(this.a.wb=C());var c=b;I(a)!=I(b.la.G())&&(c=b.reverse());this.a.wb.add(c.V());Ch(this,c);return this};U.prototype.leftOuterJoin=U.prototype.$f;
U.prototype.W=function(a){if(null!=(this.a.W||this.a.Ob))throw new D(528);if(a instanceof pd)this.a.Ob=a;else{if(0>a)throw new D(531);this.a.W=a}return this};U.prototype.limit=U.prototype.W;U.prototype.M=function(a){if(null!=(this.a.M||this.a.Vb))throw new D(529);if(a instanceof pd)this.a.Vb=a;else{if(0>a)throw new D(531);this.a.M=a}return this};U.prototype.skip=U.prototype.M;U.prototype.L=function(a,b){Bh(this,549);null==this.a.L&&(this.a.L=[]);this.a.L.push({N:a,ib:null!=b?b:1});return this};
U.prototype.orderBy=U.prototype.L;U.prototype.ja=function(a){Bh(this,549);if(null!=this.a.ja)throw new D(530);null==this.a.ja&&(this.a.ja=[]);this.a.ja.push.apply(this.a.ja,Array.prototype.slice.call(arguments));return this};U.prototype.groupBy=U.prototype.ja;function Ah(a,b){switch(a){case "COUNT":case "DISTINCT":return!0;case "AVG":case "GEOMEAN":case "STDDEV":case "SUM":return 4==b||3==b;case "MAX":case "MIN":return 4==b||3==b||5==b||2==b}return!1}
U.prototype.clone=function(){var a=new U(this.global,this.a.f);a.a=this.a.clone();a.a.Xc=null;return a};U.prototype.clone=U.prototype.clone;function Dh(a,b){T.call(this,a,new bh(a.i(Wb)));this.a.table=b}t(Dh,T);r("lf.query.UpdateBuilder",Dh);Dh.prototype.set=function(a,b){var c={Tc:b instanceof pd?b.wa():-1,N:a,value:b};null!=this.a.set?this.a.set.push(c):this.a.set=[c];return this};Dh.prototype.set=Dh.prototype.set;Dh.prototype.s=function(a){this.xd();this.a.s=a;return this};Dh.prototype.where=Dh.prototype.s;Dh.prototype.xd=function(){if(null!=this.a.s)throw new D(516);};
Dh.prototype.bb=function(){Dh.Fb.bb.call(this);if(null==this.a.set)throw new D(532);if(this.a.set.some(function(a){return a.value instanceof pd}))throw new D(501);};function Eh(a){this.a=a;this.Ba=null}Eh.prototype.ec=function(){null===this.Ba&&(this.Ba=this.$c());return this.Ba};function Fh(a){Eh.call(this,a)}t(Fh,Eh);Fh.prototype.$c=function(){return this.a.Yb?new Cg(this.a.Fa,this.a.values):new Bg(this.a.Fa,this.a.values)};function Gh(a){Eh.call(this,a)}t(Gh,Eh);Gh.prototype.$c=function(){var a=new Eg(this.a.table,this.a.set),b=null!=this.a.s?new Fg(this.a.s.Hb()):null,c=new Gg(this.a.table);null===b?L(a,c):(L(b,c),L(a,b));return a};function Hh(a,b,c){this.Ba=a;this.ae=b;this.Sb=c}Hh.prototype.ec=function(){this.Sb.forEach(function(a){this.Ba=a.kb(this.Ba,this.ae)},this);return this.Ba};function Ih(a,b){Eh.call(this,a);this.Sb=b}t(Ih,Eh);Ih.prototype.$c=function(){var a=new Dg(this.a.b),b=null!=this.a.s?new Fg(this.a.s.Hb()):null,c=new Gg(this.a.b);null===b?L(a,c):(L(b,c),L(a,b));return(new Hh(a,this.a,this.Sb)).ec()};function Jh(){}t(Jh,Pg);Jh.prototype.kb=function(a,b){if(2>b.b.length)return a;this.Z=a;this.Ta(this.Z,b);return this.Z};Jh.prototype.Ta=function(a,b){if(a instanceof Fg&&a.I instanceof $f){var c=a.I.V(),d=zd(a,0);d instanceof Hg&&(c=null!=b.wb&&b.wb.has(c),c=new Og(a.I,c),Wf(a,d,c,c),a==this.Z&&(this.Z=c),a=c)}K(a).forEach(function(a){this.Ta(a,b)},this)};function Kh(){this.Sc=C()}t(Kh,Pg);Kh.prototype.kb=function(a,b){this.Sc.clear();if(!q(b.s))return a;this.Z=a;this.Ta(this.Z);this.Sc.clear();return this.Z};Kh.prototype.Ta=function(a){if(Lh(a)){var b=a.I instanceof Gd?Mh(this,a):Nh(this,a);this.Sc.add(a);b==a&&(b=zd(a,0));null!==b&&(ea(b.getParent())&&(this.Z=b),Lh(b)&&!this.Sc.has(b)&&this.Ta(b))}else K(a).forEach(function(a){this.Ta(a)},this)};
function Oh(a,b,c){var d=b;if(zd(b,0)instanceof Fg)d=Uf(b),Oh(a,b,c);else if(Ph(b)){var e=[],d=Vf(b,c,function(a){a=new Fg(a.I);e.push(a);return a});e.forEach(function(a){Oh(this,a,c)},a)}return d}function Mh(a,b){var c=C([I(b.I.N.G())]),d=function(a){return Qh(this,a,c)}.bind(a);return Oh(a,b,d)}function Nh(a,b){var c=C([I(b.I.ga.G()),I(b.I.la.G())]),d=function(a){return Qh(this,a,c)}.bind(a);return Oh(a,b,d)}
function Qh(a,b,c){var d=C();Qf(b).forEach(function(a){d.add(I(a.table))},a);b instanceof Gg&&d.add(I(b.table));return dc(d,c)}function Lh(a){return a instanceof Fg&&!(a.I instanceof Yf)}function Ph(a){a=zd(a,0);return a instanceof Hg||a instanceof Og};function Rh(a,b){Eh.call(this,a);this.Sb=b;this.Ze=this.Qe=this.gf=this.Te=this.te=this.Fe=this.ff=this.ze=this.jf=null}t(Rh,Eh);
Rh.prototype.$c=function(){Sh(this);2<=this.a.b.length&&(this.ze=new Hg);this.ff=null!=this.a.s?new Fg(this.a.s.Hb()):null;this.a.L&&(this.Te=new Jg(this.a.L));null!=this.a.M&&0<this.a.M&&(this.gf=new Ng(this.a.M));null!=this.a.W&&(this.Qe=new Mg(this.a.W));null!=this.a.ja&&(this.Fe=new Lg(this.a.ja));Th(this);this.Ze=new Ig(this.a.f||[],this.a.ja||null);var a=Uh(this);return(new Hh(a,this.a,this.Sb)).ec()};
function Uh(a){for(var b=[a.Qe,a.gf,a.Ze,a.Te,a.te,a.Fe,a.ff,a.ze],c=null,d=null,e=0;e<b.length;e++){var f=b[e];null!==f&&(null===d?d=f:L(b[c],f),c=e)}a.jf.forEach(function(a){L(b[c],a)});return d}function Sh(a){a.jf=a.a.b.map(function(a){return new Gg(a)},a)}function Th(a){var b=a.a.f.filter(function(a){return a instanceof R});null!=a.a.L&&a.a.L.forEach(function(a){a.N instanceof R&&b.push(a.N)});0<b.length&&(a.te=new Kg(b))};function Vh(){this.ge=[new Qg,new Tg,new Kh,new Jh];this.Ed=[new Qg]}Vh.prototype.create=function(a){var b=null;if(a instanceof $g)b=new Fh(a);else if(a instanceof Xg)b=new Ih(a,this.Ed);else if(a instanceof Od)b=new Rh(a,this.ge);else if(a instanceof bh)b=new Gh(a);else throw new D(513);b=b.ec();return new zg(b,a.$())};function Wh(a){S.call(this,0,1);this.O=a}t(Wh,S);Wh.prototype.toString=function(){return"delete("+this.O.getName()+")"};Wh.prototype.ea=function(a,b){var c=b[0].entries.map(function(a){return a.sa});a.remove(this.O,c);return[hd()]};function Xh(a,b){S.call(this,0,-1);this.table=b;this.C=a.i(Rb)}t(Xh,S);Xh.prototype.toString=function(){return"get_row_count("+this.table.getName()+")"};Xh.prototype.ea=function(){var a=this.C.get(xe(this.table)),b=new F([],[this.table.getName()]),c=kg(),a=a.Ma().oa;null===b.Va&&(b.Va=z());b.Va.set(c.m(),a);return[b]};function Yh(a,b){S.call(this,0,-1);this.S=a.i(Qb);this.C=a.i(Rb);this.table=b}t(Yh,S);Yh.prototype.toString=function(){var a="table_access("+this.table.getName();null===this.table.Wa()||(a+=" as "+this.table.Wa());return a+")"};Yh.prototype.ea=function(){var a=this.C.get(xe(this.table)).Xa();return[kd(Oe(this.S,a),[I(this.table)])]};function Zh(a){this.g=a}t(Zh,Pg);Zh.prototype.kb=function(a,b){this.Z=a;if(!this.yd(b))return a;var c=Rf(a,function(a){return a instanceof Yh})[0],d=new Xh(this.g,c.table);Wf(c,c,d,d);return this.Z};Zh.prototype.yd=function(a){return 1==a.f.length&&1==a.b.length&&null==a.s&&null==a.W&&null==a.M&&null==a.ja?(a=a.f[0],a instanceof R&&"COUNT"==a.Gb&&a.child instanceof jg):!1};function $h(a){S.call(this,0,1);this.Ee=a}t($h,S);$h.prototype.toString=function(){return"groupBy("+this.Ee.map(function(a){return a.m()}).toString()+")"};$h.prototype.ea=function(a,b){return ai(this,b[0])};function ai(a,b){var c=new zc,d=function(a){return this.Ee.map(function(b){return H(a,b)},this).join(",")}.bind(a);b.entries.forEach(function(a){c.set(d(a),a)},a);return c.keys().map(function(a){return new F(c.get(a),G(b))},a)};function bi(a,b,c){S.call(this,0,0);this.C=a.i(Rb);this.S=a.i(Qb);this.I=b;this.Nb=c;this.vd="eq"==this.I.F?0:2;this.Ge=null}t(bi,S);var ci=["hash","index_nested_loop","nested_loop"];bi.prototype.toString=function(){return"join(type: "+(this.Nb?"outer":"inner")+", impl: "+ci[this.vd]+", "+this.I.toString()+")"};
bi.prototype.ea=function(a,b){switch(this.vd){case 0:return[dg(this.I,b[0],b[1],this.Nb)];case 1:return[eg(this.I,b[0],b[1],this.Ge,this.S)];default:var c=this.I,d=b[0],e=b[1],f=this.Nb,h=[d,e];f||(h=ag(c,d,e));for(var d=h[0],e=h[1],h=[],k=G(d),n=G(e),A=d.entries.length,ha=e.entries.length,oa=ha+256-1>>8,Ya=0;Ya<oa;){for(var Tb=0;Tb<A;Tb++){var Kf=!1,Lf=H(d.entries[Tb],c.ga);if(null!==Lf)for(var di=Math.min(Ya+1<<8,ha),Kc=Ya<<8;Kc<di;Kc++)if(c.rc(Lf,H(e.entries[Kc],c.la))){var Kf=!0,ej=od(d.entries[Tb],
k,e.entries[Kc],n);h.push(ej)}f&&!Kf&&h.push(cg(c,d.entries[Tb],k))}Ya++}c=G(d).concat(G(e));return[new F(h,c)]}};function ei(a,b){a.vd=1;var c=a.C.get(b.wa().m());a.Ge={Rf:b,eg:b==a.I.ga?a.I.la:a.I.ga,index:c}};function fi(a){S.call(this,0,-1);this.$e=a}t(fi,S);fi.prototype.toString=function(){return"no_op_step("+G(this.$e[0]).join(",")+")"};fi.prototype.ea=g("$e");function gi(){}t(gi,Pg);gi.prototype.kb=function(a,b){this.Z=a;if(!this.yd(b))return a;Rf(a,function(a){return a instanceof bi}).forEach(this.ng,this);return this.Z};gi.prototype.yd=function(a){return 1<a.b.length};
gi.prototype.ng=function(a){if("eq"==a.I.F&&!a.Nb){var b=function(b){if(!(b instanceof Yh))return null;b=I(b.table)==I(a.I.la.G())?a.I.la:a.I.ga;return ea(b.wa())?null:b},c=b(zd(a,0)),b=b(zd(a,1));if(null!==c||null!==b){b=null===b?c:b;ei(a,b);var d=new F([],[I(b.G())]);Cd(a,new fi([d]),b==c?0:1)}}};function hi(a){a=a.map(function(a){return a.Bb()});a=Cb.apply(null,a);var b=[];Bb(a,function(a){b.push(a)});return b}function ii(a){this.Mb=a}ii.prototype.ad=function(){return 1==this.Mb.f.length?[ad()]:[this.Mb.f.map(function(){return ad()})]};function ji(a,b){this.Mb=a;this.Aa=b;this.Cd=this.Oe=null}
function ki(a,b){var c=z();a.Aa.keys().forEach(function(a){var e=this.Aa.get(a).map(function(a){return Kd(b,a)},this),f=new Nf([ad()]);e.forEach(function(a){var b=null;"between"==a.F?b=new Wc(a.value[0],a.value[1],!1,!1):"eq"==a.F?(b=a.value,b=new Wc(b,b,!1,!1)):b="gte"==a.F?new Wc(a.value,E,!1,!1):"gt"==a.F?new Wc(a.value,E,!0,!1):"lte"==a.F?new Wc(E,a.value,!1,!1):new Wc(E,a.value,!1,!0);a=a.Ya?Xc(b):[b];a=new Nf(a);f=Of(f,a)});c.set(a,f)},a);return c}
ji.prototype.ad=function(a){if(this.Oe==a)return this.Cd;for(var b=ki(this,a),c=this.Mb.f.length-1;0<=c;c--){var d=this.Mb.f[c];if(null!==(b.get(d.ca.getName())||null))break;b.set(d.ca.getName(),new Nf([ad()]))}this.Cd=1==this.Mb.f.length?B(b)[0].Bb():hi(li(this,b));this.Oe=a;return this.Cd};function li(a,b){var c=z(),d=0;a.Mb.f.forEach(function(a){c.set(a.ca.getName(),d);d++});return Gb(b).sort(function(a,b){return c.get(a)-c.get(b)}).map(function(a){return b.get(a)})};function mi(a,b){this.kf=b;this.C=a.i(Rb)}function ni(a,b,c){c=c.filter(a.Vf,a);if(0==c.length)return null;a=oi(a,c);if(0==a.length)return null;if(1==a.length)return a[0];var d=Number.MAX_VALUE;return a.reduce(function(a,c){var h=pi(c,b);return h<d?(d=h,c):a},null)}
function oi(a,b){return a.kf.xa().map(function(a){a=new qi(this.C,a);ri(a,b);return a},a).filter(function(a){if(null===a.Aa)a=!1;else{for(var b=!1,e=!0,f=0;f<a.ub.f.length;f++){var h=a.Aa.has(a.ub.f[f].ca.getName());if(b&&h){e=!1;break}h||(b=!0)}a=e}return a})}mi.prototype.Vf=function(a){var b;if(b=a instanceof Gd)Hd(a),b=null!==a.value&&("between"==a.F||"eq"==a.F||"gt"==a.F||"gte"==a.F||"lt"==a.F||"lte"==a.F);return b?a.N.G()==this.kf:!1};
function qi(a,b){this.C=a;this.ub=b;this.Sf=C(this.ub.f.map(function(a){return a.ca.getName()}));this.Qd=this.Aa=null}function si(a){null===a.Qd&&(a.Qd=new ji(a.ub,a.Aa));return a.Qd}function ri(a,b){b.forEach(function(a){var b=a.eb()[0].getName();this.Sf.has(b)&&(null===this.Aa&&(this.Aa=new zc),this.Aa.set(b,a.V()))},a)}function pi(a,b){var c=si(a).ad(b),d=a.C.get(a.ub.m());return c.reduce(function(a,b){return a+d.Yc(b)},0)};function ti(a,b,c,d){S.call(this,0,-1);this.C=a.i(Rb);this.index=b;this.Ne=c;this.ee=d;this.Rc=this.Qc=!1}t(ti,S);ti.prototype.toString=function(){return"index_range_scan("+this.index.m()+", ?, "+(this.ee?"reverse":"natural")+(this.Qc?", limit:?":"")+(this.Rc?", skip:?":"")+")"};ti.prototype.Oc=function(a){var b=this.toString(),c=this.Ne.ad(a),b=b.replace("?",c.toString());this.Qc&&(b=b.replace("?",a.W.toString()));this.Rc&&(b=b.replace("?",a.M.toString()));return b};
ti.prototype.ea=function(a,b,c){a=this.Ne.ad(c);b=this.C.get(this.index.m());c=(1==a.length&&a[0]instanceof Wc&&bd(a[0])?Se(b.get(a[0].b),!1,this.Qc?c.W:void 0,this.Rc?c.M:void 0):b.Xa(a,this.ee,this.Qc?c.W:void 0,this.Rc?c.M:void 0)).map(function(a){return new y(a,{})},this);return[kd(c,[this.index.Nc])]};function ui(a){S.call(this,0,1);this.md=a}t(ui,S);ui.prototype.toString=l("select(?)");ui.prototype.Oc=function(a){a=Kd(a,this.md);return this.toString().replace("?",a.toString())};ui.prototype.ea=function(a,b,c){return[Kd(c,this.md).eval(b[0])]};function vi(a,b){S.call(this,0,1);this.S=a.i(Qb);this.O=b}t(vi,S);vi.prototype.toString=function(){return"table_access_by_row_id("+this.O.getName()+")"};vi.prototype.ea=function(a,b){return[kd(Oe(this.S,ed(b[0])),[I(this.O)])]};function wi(a){this.g=a}t(wi,Pg);wi.prototype.kb=function(a,b){this.Z=a;Rf(a,function(a){return a instanceof Yh}).forEach(function(a){var d=xi(a);if(0!=d.length){var e=ni(new mi(this.g,a.table),b,d.map(function(a){return Kd(b,a.md)}));if(null!==e){var f=z();d.forEach(function(a){f.set(a.md,a)},this);this.Z=yi(this,e,f,a)}}},this);return this.Z};function xi(a){var b=[];for(a=a.getParent();a;)a instanceof ui&&b.push(a),a=a.getParent();return b}
function yi(a,b,c,d){(null===b.Aa?[]:b.Aa.values()).map(function(a){return c.get(a)}).forEach(Sf);b=new ti(a.g,b.ub,si(b),!1);a=new vi(a.g,d.table);L(a,b);Wf(d,d,a,b);return b.fb()};function zi(a,b){S.call(this,0,-1);this.C=a.i(Rb);this.O=b}t(zi,S);zi.prototype.toString=function(){return"insert("+this.O.getName()+")"};zi.prototype.ea=function(a,b,c){Ai(this.O,c.values,this.C);a.vb(this.O,c.values);return[kd(c.values,[this.O.getName()])]};function Ai(a,b,c){a=a.Ab().bd();if(null===a?0:a.f[0].autoIncrement){var d=a.f[0].ca.getName();c=c.get(a.m()).max();var e=null===c?0:c[0];b.forEach(function(a){if(0==a.o[d]||null==a.o[d])e++,a.o[d]=e})}}
function Bi(a,b){S.call(this,0,-1);this.C=a.i(Rb);this.O=b}t(Bi,S);Bi.prototype.toString=function(){return"insert_replace("+this.O.getName()+")"};Bi.prototype.ea=function(a,b,c){Ai(this.O,c.values,this.C);a.Ld(this.O,c.values);return[kd(c.values,[this.O.getName()])]};function Ci(){S.call(this,0,1)}t(Ci,S);Ci.prototype.toString=l("limit(?)");Ci.prototype.Oc=function(a){return this.toString().replace("?",a.W.toString())};Ci.prototype.ea=function(a,b,c){b[0].entries.splice(c.W);return b};function Di(a){S.call(this,0,1);this.L=a}t(Di,S);m=Di.prototype;m.toString=function(){return"order_by("+Pd(this.L)+")"};m.ea=function(a,b){if(1==b.length){var c;c=b[0];for(var d=null,e=0;e<this.L.length;e++){var f=lg(this.L[e].N);if(null!==c.Va&&c.Va.has(f.m())){d=f;break}}c=d;(null===c?b[0]:fd(b[0],c)).entries.sort(this.If.bind(this))}else b.sort(this.qg.bind(this));return b};
m.U=function(a,b){var c=null,d=null,e=null,f=-1;do f++,e=this.L[f].N,c=this.L[f].ib,d=a(e),e=b(e);while(d==e&&f+1<this.L.length);d=d<e?-1:d>e?1:0;return 1==c?d:-d};m.qg=function(a,b){return this.U(function(b){return b instanceof R?fd(a,b):H(a.entries[a.entries.length-1],b)},function(a){return a instanceof R?fd(b,a):H(b.entries[b.entries.length-1],a)})};m.If=function(a,b){return this.U(function(b){return H(a,b)},function(a){return H(b,a)})};function Ei(a,b){this.Ha=a;this.J=b}function Fi(a){return a.J.some(function(a){return a instanceof R},a)?Gi(a):Hi(a)}function Gi(a){if(1==a.J.length&&"DISTINCT"==a.J[0].Gb)return a=fd(a.Ha,a.J[0]).entries.map(function(a){var b=new ld(new y(-1,{}),1<this.Ha.K.size);nd(b,this.J[0],H(a,this.J[0].child));return b},a),new F(a,[]);var b=new ld(new y(-1,{}),1<a.Ha.K.size);a.J.forEach(function(a){var d=a instanceof R?fd(this.Ha,a):H(this.Ha.entries[0],a);nd(b,a,d)},a);return new F([b],G(a.Ha))}
function Hi(a){var b=Array(a.Ha.entries.length),c=1<a.Ha.K.size;a.Ha.entries.forEach(function(a,e){b[e]=new ld(new y(a.sa.id(),{}),c);this.J.forEach(function(c){nd(b[e],c,H(a,c))},this)},a);return new F(b,G(a.Ha))}function Ii(a,b){var c=a.map(function(a){return Fi(new Ei(a,b)).entries[0]});return new F(c,G(a[0]))};function Ji(a,b){S.call(this,0,1);this.f=a;this.Lb=b}t(Ji,S);Ji.prototype.toString=function(){var a="project("+this.f.toString();if(null!==this.Lb)var b=this.Lb.map(function(a){return a.m()}).join(", "),a=a+(", groupBy("+b+")");return a+")"};Ji.prototype.ea=function(a,b){var c;0==b.length?c=[hd()]:1==b.length?(c=b[0],c=[0==this.f.length?c:Fi(new Ei(c,this.f))]):c=[Ii(b,this.f)];return c};function Ki(a){return a.f.some(function(a){return a instanceof R})||null!==a.Lb};function Li(){S.call(this,0,1)}t(Li,S);Li.prototype.toString=l("skip(?)");Li.prototype.Oc=function(a){return this.toString().replace("?",a.M.toString())};Li.prototype.ea=function(a,b,c){return[new F(b[0].entries.slice(c.M),G(b[0]))]};function Mi(){}t(Mi,Pg);Mi.prototype.kb=function(a,b){if(!q(b.W)&&!q(b.M))return a;var c=Ni(a);if(null===c)return a;Rf(a,function(a){return a instanceof Ci||a instanceof Li}).forEach(function(a){a instanceof Ci?c.Qc=!0:c.Rc=!0;Sf(a)},this);return c.fb()};function Ni(a){a=Rf(a,function(a){return a instanceof ti},function(a){return a instanceof Ji&&Ki(a)||a instanceof Di||1!=K(a).length||a instanceof ui});return 0<a.length?a[0]:null};function Oi(a){this.g=a}t(Oi,Pg);Oi.prototype.kb=function(a,b){var c=Pi(a,b);if(null===c)return a;var d;a:{var e=c;d=Qi(zd(c,0));if(null!==d){var f;f=c.L;for(var h=null,k=d.table.xa(),n=0;n<k.length&&null===h;n++)h=Ri(k[n],f);f=h;if(null===f){d=e;break a}e=new ti(this.g,f.ub,new ii(f.ub),f.Ke);f=new vi(this.g,d.table);L(f,e);Sf(c);e=Wf(d,d,f,e)}d=e}if(d==c)a:if(d=c,e=Si(zd(c,0)),null!==e){f=Ri(e.index,c.L);if(null===f)break a;e.ee=f.Ke;d=Sf(c).parent}return d.fb()};
function Si(a){a=Rf(a,function(a){return a instanceof ti},function(a){return 1!=K(a).length});return 0<a.length?a[0]:null}function Qi(a){a=Rf(a,function(a){return a instanceof Yh},function(a){return 1!=K(a).length});return 0<a.length?a[0]:null}function Pi(a,b){return q(b.L)?Rf(a,function(a){return a instanceof Di})[0]:null}function Ri(a,b){if(a.f.length!=b.length||!b.every(function(b,c){return b.N.getName()==a.f[c].ca.getName()}))return null;var c=Ti(b,a);return c[0]||c[1]?{ub:a,Ke:c[1]}:null}
function Ti(a,b){var c=a.reduce(function(a,b){return a<<1|(0==b.ib?0:1)},0),d=b.f.reduce(function(a,b){return a<<1|(0==b.ib?0:1)},0),c=c^d;return[0==c,c==Math.pow(2,Math.max(a.length,b.f.length))-1]};function Ui(a,b,c){this.Ba=a;this.ae=b;this.Sb=c}Ui.prototype.ec=function(){this.Sb.forEach(function(a){this.Ba=a.kb(this.Ba,this.ae)},this);return this.Ba};function Vi(a,b){S.call(this,0,1);this.O=a;this.yg=b}t(Vi,S);Vi.prototype.toString=function(){return"update("+this.O.getName()+")"};Vi.prototype.ea=function(a,b){var c=b[0].entries.map(function(a){var b=this.O.Jb(a.sa.Ia());this.yg.forEach(function(a){b.o[a.N.getName()]=a.value},this);return b},this);a.update(this.O,c);return[hd()]};function Wi(a){this.g=a;this.ge=[new gi,new wi(this.g),new Oi(this.g),new Mi,new Zh(this.g)];this.Ed=[new wi(this.g)]}Wi.prototype.create=function(a,b){var c=a.fb();if(c instanceof Cg||c instanceof Bg)return Xi(this,a,b);if(c instanceof Ig||c instanceof Mg||c instanceof Ng)return Xi(this,a,b,this.ge);if(c instanceof Dg||c instanceof Eg)return Xi(this,a,b,this.Ed);throw new D(8);};function Xi(a,b,c,d){a=Pf(b.fb(),a.dg.bind(a));null!=d&&(a=(new Ui(a,c,d)).ec());return new Qd(a,b.$())}
Wi.prototype.dg=function(a){if(a instanceof Ig)return new Ji(a.f,a.Lb);if(a instanceof Lg)return new $h(a.f);if(a instanceof Kg)return new pg(a.f);if(a instanceof Jg)return new Di(a.L);if(a instanceof Ng)return new Li;if(a instanceof Mg)return new Ci;if(a instanceof Fg)return new ui(a.I.V());if(a instanceof Hg)return new Ug;if(a instanceof Og)return new bi(this.g,a.I,a.Nb);if(a instanceof Gg)return new Yh(this.g,a.table);if(a instanceof Dg)return new Wh(a.table);if(a instanceof Eg)return new Vi(a.table,
a.me);if(a instanceof Cg)return new Bi(this.g,a.table);if(a instanceof Bg)return new zi(this.g,a.table);throw new D(514);};function Yi(a){this.bg=new Vh;this.lg=new Wi(a)};function Zi(){this.Re=z()}function $i(a,b){var c=a.Re.get(b.getName())||null;null===c&&(c=new aj,a.Re.set(b.getName(),c));return c}function bj(a,b,c,d){c.forEach(function(a){a=$i(this,a);0==d?(a.Za=null,a.sc=b):3==d?(null===a.Ub&&(a.Ub=C()),a.Ub.add(b),null===a.Qa&&(a.Qa=C()),a.Qa.delete(b)):1==d?(null===a.Qa&&(a.Qa=C()),a.Qa.add(b)):2==d&&(a.Za=b)},a)}
function cj(a,b,c,d){var e=!0;c.forEach(function(a){if(e){a=$i(this,a);var c=null===a.Qa||0==a.Qa.size;e=0==d?(null===a.Ub||0==a.Ub.size)&&c&&null===a.sc&&null!==a.Za&&a.Za==b:3==d?null===a.sc&&null===a.Za&&null!==a.Qa&&a.Qa.has(b):1==d?null===a.Za:c&&(null===a.Za||a.Za==b)}},a);return e}function dj(a,b,c,d){var e=cj(a,b,c,d);e&&bj(a,b,c,d);return e}Zi.prototype.releaseLock=function(a,b){b.forEach(function(b){$i(this,b).releaseLock(a)},this)};
function fj(a,b){b.forEach(function(a){$i(this,a).Za=null},a)}function aj(){this.Ub=this.Qa=this.Za=this.sc=null}aj.prototype.releaseLock=function(a){this.sc==a&&(this.sc=null);this.Za==a&&(this.Za=null);null===this.Qa||this.Qa.delete(a);null===this.Ub||this.Ub.delete(a)};function gj(){this.Rb=new hj;this.Cc=new Zi}function Yd(a,b){(2>b.getPriority()||2>b.getPriority())&&fj(a.Cc,b.$());a.Rb.vb(b);ij(a);return b.Kb().ha}function ij(a){for(var b=a.Rb.Bb(),c=0;c<b.length;c++){var d=b[c],e=!1;if(e=0==d.H()?jj(a,d,1,3):jj(a,d,2,0))a.Rb.remove(d),e=a,d.exec().then(e.jg.bind(e,d),e.ig.bind(e,d))}}function jj(a,b,c,d){var e=!1;dj(a.Cc,b.V(),b.$(),c)&&(e=dj(a.Cc,b.V(),b.$(),d));return e}gj.prototype.jg=function(a,b){this.Cc.releaseLock(a.V(),a.$());a.Kb().resolve(b);ij(this)};
gj.prototype.ig=function(a,b){this.Cc.releaseLock(a.V(),a.$());a.Kb().reject(b);ij(this)};function hj(){this.Rb=[]}hj.prototype.vb=function(a){Re(this.Rb,a,function(a,c){var d=a.getPriority()-c.getPriority();return 0==d?a.V()-c.V():d})};hj.prototype.Bb=function(){return this.Rb.slice()};hj.prototype.remove=function(a){var b=this.Rb;a=va(b,a);var c;(c=0<=a)&&ua.splice.call(b,a,1);return c};function kj(a,b){this.Fd=qd.wc();this.be=a;this.hd=b;this.J=lj(this)}function lj(a){if(0<a.be.f.length)return a.be.f;var b=[];a.be.b.forEach(function(a){a.eb().forEach(function(a){b.push(a)})});return b}kj.prototype.U=function(a,b){return this.J.every(function(c){return wd(this.Fd,c.H(),"eq")(H(a,c),H(b,c))},this)};
function mj(a,b,c){var d=null===b?[]:b.entries,e=tb(d,c.entries,a.U.bind(a),function(a){return d[a]});b=[];for(var f=0,h=0;h<d.length;h++){var k=d[h];e[f]==k?f++:(k=a.hd.splice(f,1),k=nj(h,k,0,a.hd),b.push(k))}e=tb(d,c.entries,a.U.bind(a),function(a,b){return c.entries[b]});for(h=f=0;h<c.entries.length;h++)k=c.entries[h],e[f]==k?f++:(a.hd.splice(h,0,k.sa.o),k=nj(h,[],1,a.hd),b.push(k));return b}function nj(a,b,c,d){return{zg:c,index:a,object:d,Cg:b,type:"splice"}};function oj(){this.cc=z()}oj.prototype.ud=function(a,b){var c=ka(a.a).toString(),d=this.cc.get(c)||null;null===d&&(d=new pj(a),this.cc.set(c,d));d.ud(b)};oj.prototype.ce=function(a,b){var c=ka(a.a).toString(),d=this.cc.get(c)||null;d.ce(b);0<d.Gc.size||this.cc.delete(c)};function Xd(a,b){var c=C();b.forEach(function(a){c.add(a.getName())});var d=[];a.cc.forEach(function(a){a=a.yc();a.context.b.some(function(a){return c.has(a.getName())})&&d.push(a)});return d}
function Vd(a,b,c){b=ka(null!=b.Xc?b.Xc:b).toString();a=a.cc.get(b)||null;null!==a&&qj(a,c)}function pj(a){this.xf=a;this.Gc=C();this.gg=[];this.Pe=null;this.Gf=new kj(a.a,this.gg)}pj.prototype.ud=function(a){this.Gc.has(a)||this.Gc.add(a)};pj.prototype.ce=function(a){return this.Gc.delete(a)};pj.prototype.yc=function(){var a=this.xf;return{context:a.a,$d:rh(a)}};function qj(a,b){var c=mj(a.Gf,a.Pe,b);a.Pe=b;0<c.length&&a.Gc.forEach(function(a){a(c)})};function rj(a,b){var c=a.i(Wb),d=b||{},e=new Ne(c);a.jb(Qb,e);var e=null,f=!1;switch(d.storeType||0){case 1:e=new ze(c);break;case 5:e=new Be(c);break;case 4:e=new Je(a,c,d.webSqlDbSize);break;case 3:e=new je(c,d.firebase);f=!0;break;default:e=new ue(a,c)}a.jb(Pb,e);var h=new Mf;a.jb(Rb,h);return e.Ea(d.onUpgrade).then(function(){var b=new Yi(a);a.jb(Sb,b);b=new gj;a.jb(Ub,b);b=new oj;a.jb(Vb,b);return h.Ea(c)}).then(function(){if(f){var b=new Zd(a);b.Ja.subscribe(b.Vd.bind(b))}return(new Df(a)).Ea(c)})}
;function sj(a){this.g=a;this.j=a.i(Wb);this.aa=C(this.j.ra());this.$a=x()}m=sj.prototype;m.exec=function(){var a=this.g.i(Rb),b=this.g.i(Qb),c={};this.j.ra().forEach(function(d){var f=a.get(xe(d)).Xa(),f=Oe(b,f).map(function(a){return a.o});c[d.getName()]=f});var d={name:this.j.name(),version:this.j.version(),tables:c},d=new ld(new y(-1,d),!0);return w([new F([d],[])])};m.H=l(0);m.$=g("aa");m.Kb=g("$a");m.V=function(){return ka(this)};m.getPriority=l(0);function tj(a,b){this.g=a;this.j=a.i(Wb);this.aa=C(this.j.ra());this.$a=x();this.ua=b;this.Ja=a.i(Pb);this.S=a.i(Qb);this.C=a.i(Rb)}m=tj.prototype;
m.exec=function(){if(!(this.Ja instanceof ue||this.Ja instanceof ze||this.Ja instanceof Je))throw new D(300);var a;a:{a=this.j.ra();for(var b=0;b<a.length;++b)if(0<this.C.get(xe(a[b])).Ma().oa){a=!1;break a}a=!0}if(!a)throw new D(110);if(this.j.name()!=this.ua.name||this.j.version()!=this.ua.version)throw new D(111);if(null==this.ua.tables)throw new D(112);return uj(this)};m.H=l(1);m.$=g("aa");m.Kb=g("$a");m.V=function(){return ka(this)};m.getPriority=l(0);
function uj(a){var b=new Rc(a.g,a.aa),b=a.Ja.zb(a.H(),b),c;for(c in a.ua.tables){var d=a.j.table(c),e=a.ua.tables[c].map(function(a){return d.rb(a)}),f=b.G(c,d.Jb);a.S.Tb(c,e);var h=a.C.hc.get(c)||[];e.forEach(function(a){h.forEach(function(b){var c=a.Cb(b.getName());b.add(c,a.id())})});f.put(e)}return b.ia()};function vj(a,b){this.g=a;this.Ja=a.i(Pb);this.Ca=a.i(Ub);this.Db=a.i(Vb);this.aa=C(b);this.Oa=new Rc(this.g,this.aa);this.$a=x();this.tc=x();this.pe=x()}m=vj.prototype;m.exec=function(){this.pe.resolve();return this.tc.ha};m.H=l(1);m.$=g("aa");m.Kb=g("$a");m.V=function(){return ka(this)};m.getPriority=l(2);function wj(a){Yd(a.Ca,a);return a.pe.ha}
function xj(a,b){var c=b.yc();return c.$d.fb().exec(a.Oa,c.context).then(function(a){return dd(a[0])},function(a){this.Oa.Eb();var b=new gb(a.name);this.tc.reject(b);throw a;}.bind(a))}m.ia=function(){this.Ja.zb(this.H(),this.Oa).ia().then(function(){this.Lc();this.tc.resolve()}.bind(this),function(a){this.Oa.Eb();this.tc.reject(a)}.bind(this));return this.$a.ha};m.Eb=function(){this.Oa.Eb();this.tc.resolve();return this.$a.ha};
m.Lc=function(){var a=Xd(this.Db,this.aa);0!=a.length&&(a=new Ud(this.g,a),Yd(this.Ca,a))};function yj(a){this.g=a;this.Ca=a.i(Ub);this.Pc=null;this.Ra=0;0==zj.size&&(zj.set(0,C([1,4])),zj.set(1,C([2])),zj.set(2,C([3,5,6])),zj.set(3,C([2,7])),zj.set(4,C([7])),zj.set(5,C([7])),zj.set(6,C([7])))}r("lf.proc.Transaction",yj);var zj=z();function Aj(a,b){var c=zj.get(a.Ra)||null;if(null===c||!c.has(b))throw new D(107,a.Ra,b);a.Ra=b}
yj.prototype.exec=function(a){Aj(this,4);var b=[];try{a.forEach(function(a){a.bb();b.push(a.yc())},this)}catch(c){return Aj(this,7),Za(c)}a=new Vg(this.g,b);return Yd(this.Ca,a).then(function(a){Aj(this,7);return a.map(function(a){return dd(a)})}.bind(this),function(a){Aj(this,7);throw a;}.bind(this))};yj.prototype.exec=yj.prototype.exec;yj.prototype.vf=function(a){Aj(this,1);this.Pc=new vj(this.g,a);return wj(this.Pc).then(function(){Aj(this,2)}.bind(this))};yj.prototype.begin=yj.prototype.vf;
yj.prototype.uf=function(a){Aj(this,3);return xj(this.Pc,a).then(function(a){Aj(this,2);return a}.bind(this),function(a){Aj(this,7);throw a;}.bind(this))};yj.prototype.attach=yj.prototype.uf;yj.prototype.ia=function(){Aj(this,5);return this.Pc.ia().then(function(){Aj(this,7)}.bind(this))};yj.prototype.commit=yj.prototype.ia;yj.prototype.Eb=function(){Aj(this,6);return this.Pc.Eb().then(function(){Aj(this,7)}.bind(this))};yj.prototype.rollback=yj.prototype.Eb;function V(a){this.g=a;this.j=a.i(Wb);this.Kd=!1}r("lf.proc.Database",V);V.prototype.Ea=function(a){this.g.jb(Wb,this.j);return rj(this.g,a).then(function(){this.Kd=!0;this.Ca=this.g.i(Ub);return this}.bind(this))};V.prototype.init=V.prototype.Ea;V.prototype.tb=g("j");V.prototype.getSchema=V.prototype.tb;function Bj(a){if(!a.Kd)throw new D(2);}V.prototype.select=function(a){Bj(this);return new U(this.g,1!=arguments.length||null!=arguments[0]?Array.prototype.slice.call(arguments):[])};
V.prototype.select=V.prototype.select;V.prototype.vb=function(){Bj(this);return new th(this.g)};V.prototype.insert=V.prototype.vb;V.prototype.Ld=function(){Bj(this);return new th(this.g,!0)};V.prototype.insertOrReplace=V.prototype.Ld;V.prototype.update=function(a){Bj(this);return new Dh(this.g,a)};V.prototype.update=V.prototype.update;V.prototype.delete=function(){Bj(this);return new sh(this.g)};V.prototype["delete"]=V.prototype.delete;
V.prototype.observe=function(a,b){Bj(this);this.g.i(Vb).ud(a,b)};V.prototype.observe=V.prototype.observe;V.prototype.unobserve=function(a,b){Bj(this);this.g.i(Vb).ce(a,b)};V.prototype.unobserve=V.prototype.unobserve;V.prototype.Ef=function(){Bj(this);return new yj(this.g)};V.prototype.createTransaction=V.prototype.Ef;V.prototype.close=function(){try{this.g.i(Pb).close()}catch(a){}this.g.clear();this.Kd=!1};V.prototype.close=V.prototype.close;
V.prototype.Mf=function(){Bj(this);var a=new sj(this.g);return Yd(this.Ca,a).then(function(a){return dd(a[0])[0]})};V.prototype["export"]=V.prototype.Mf;V.prototype.import=function(a){Bj(this);a=new tj(this.g,a);return Yd(this.Ca,a).then(l(null))};V.prototype["import"]=V.prototype.import;function W(a,b,c,d,e,f){this.O=a;this.u=b;this.Le=c;this.Je=d;this.of=e;this.ab=f||null}r("lf.schema.BaseColumn",W);m=W.prototype;m.getName=g("u");m.m=function(){return I(this.O)+"."+this.u};m.toString=function(){return this.m()};m.G=g("O");m.H=g("of");W.prototype.getType=W.prototype.H;W.prototype.Wa=g("ab");W.prototype.xa=function(){null==this.ka&&(this.ka=[],this.G().xa().forEach(function(a){-1!=a.f.map(function(a){return a.ca.getName()}).indexOf(this.u)&&this.ka.push(a)},this));return this.ka};
W.prototype.wa=function(){if(!q(this.fa)){var a=this.xa().filter(function(a){return 1!=a.f.length?!1:a.f[0].ca.getName()==this.getName()},this);this.fa=0<a.length?a[0]:null}return this.fa};W.prototype.Ac=g("Je");W.prototype.isNullable=W.prototype.Ac;W.prototype.Bc=g("Le");W.prototype.Na=function(a){return fg(this,a,"eq")};W.prototype.eq=W.prototype.Na;W.prototype.Se=function(a){return fg(this,a,"neq")};W.prototype.neq=W.prototype.Se;W.prototype.Rd=function(a){return fg(this,a,"lt")};
W.prototype.lt=W.prototype.Rd;W.prototype.cg=function(a){return fg(this,a,"lte")};W.prototype.lte=W.prototype.cg;W.prototype.Of=function(a){return fg(this,a,"gt")};W.prototype.gt=W.prototype.Of;W.prototype.Pf=function(a){return fg(this,a,"gte")};W.prototype.gte=W.prototype.Pf;W.prototype.match=function(a){return fg(this,a,"match")};W.prototype.match=W.prototype.match;W.prototype.wf=function(a,b){return fg(this,[a,b],"between")};W.prototype.between=W.prototype.wf;
W.prototype.Qf=function(a){return fg(this,a,"in")};W.prototype["in"]=W.prototype.Qf;W.prototype.Yf=function(){return this.Na(null)};W.prototype.isNull=W.prototype.Yf;W.prototype.Xf=function(){return this.Se(null)};W.prototype.isNotNull=W.prototype.Xf;W.prototype.lc=function(a){return new W(this.O,this.u,this.Le,this.Je,this.of,a)};W.prototype.as=W.prototype.lc;function Cj(){this.pd=z()}var Dj;Cj.prototype.clear=function(){this.pd.clear()};Cj.prototype.clear=Cj.prototype.clear;Cj.prototype.jb=function(a,b){this.pd.set(a.toString(),b);return b};Cj.prototype.registerService=Cj.prototype.jb;Cj.prototype.i=function(a){var b=this.pd.get(a.toString())||null;if(null===b)throw new D(7,a.toString());return b};Cj.prototype.getService=Cj.prototype.i;Cj.prototype.Pd=function(a){return this.pd.has(a.toString())};Cj.prototype.isRegistered=Cj.prototype.Pd;function Ej(a){this.j=a;this.zd=new zc;this.de=new zc;this.Ue=new zc;this.xe=z();this.h=new zc;this.ue=new zc;this.af=new zc;this.we=new zc;Fj(this)}function Fj(a){a.j.ra().forEach(function(a){var c=a.getName();a.Ab().Id().forEach(function(d){this.Ue.set(c,this.j.table(d.Pa));this.h.set(d.Pa,a);0==d.action?(this.de.set(d.Pa,d),this.af.set(d.Pa,a)):(this.zd.set(d.Pa,d),this.ue.set(d.Pa,a));this.xe.set(a.getName()+"."+d.pb,d.Pa);this.we.set(d.Pa+"."+d.Ic,a.getName())},this)},a)}
function Hc(a,b,c){if(null!=c)return 1==c?a.zd.get(b):a.de.get(b);c=a.zd.get(b);a=a.de.get(b);return null===c&&null===a?null:(c||[]).concat(a||[])}function ah(a,b){var c=b.get(a);return null===c?[]:c}function ch(a,b){var c=C();b.forEach(function(a){(a=this.xe.get(a))&&c.add(a)},a);return cc(c).map(function(a){return this.j.table(a)},a)}function Zg(a,b,c){return null!=c?0==c?ah(b,a.af):ah(b,a.ue):ah(b,a.h)}
function dh(a,b){var c=C();b.forEach(function(a){(a=this.we.get(a))&&a.forEach(function(a){c.add(a)})},a);return cc(c).map(function(a){return this.j.table(a)},a)};function Gj(a,b,c){this.mg=a;this.fg=b;this.Nf=c}r("lf.schema.Constraint",Gj);Gj.prototype.bd=g("mg");Gj.prototype.getPrimaryKey=Gj.prototype.bd;Gj.prototype.Id=g("Nf");Gj.prototype.getForeignKeys=Gj.prototype.Id;function Hj(a,b,c){var d=a.ref.split(".");if(2!=d.length)throw new D(540,c);this.zf=b;this.pb=a.local;this.Pa=d[0];this.Ic=d[1];this.name=b+"."+c;this.action=a.action;this.timing=a.timing};function X(a){Ij(a);this.Fd=qd.wc();this.u=a;this.J=z();this.rd=C();this.ic=C();this.Fc=C();this.za=null;this.ka=z();this.ld=!1;this.sb=[]}r("lf.schema.TableBuilder",X);function Jj(a){this.name=a.name;this.ib=a.order;this.autoIncrement=a.autoIncrement}var Kj=C([0,6]);function Ij(a){if(!/^[A-Za-z_][A-Za-z0-9_]*$/.test(a))throw new D(502,a);}function Lj(a,b){if(b==a.u)throw new D(546,b);if(a.J.has(b)||a.ka.has(b)||a.ic.has(b))throw new D(503,a.u+"."+b);}
function Mj(a,b){var c=!1;b.forEach(function(a){var b=this.J.get(a.name);c=c||a.autoIncrement;if(a.autoIncrement&&3!=b)throw new D(504);},a);if(c&&1<b.length)throw new D(505);}function Nj(a){if(null!==a.za){var b=a.ka.get(a.za).map(function(a){return a.name}),c=0;if(a.sb.some(function(a,e){c=e;return-1!=b.indexOf(a.pb)},a))throw new D(543,a.sb[c].name);}}
function Oj(a){if(null!==a.za){var b=function(a){return a.name},c=JSON.stringify(a.ka.get(a.za).map(b));a.ka.forEach(function(a,e){if(e!=this.za){var f=a.map(b);if(JSON.stringify(f)==c)throw new D(544,this.u+"."+e);}},a)}}function Pj(a){null===a.za||a.ka.get(a.za).forEach(function(a){if(this.Fc.has(a.name))throw new D(545,this.u+"."+a.name);},a)}X.prototype.pf=function(a,b){Ij(a);Lj(this,a);this.J.set(a,b);Kj.has(b)&&this.re([a]);return this};X.prototype.addColumn=X.prototype.pf;
X.prototype.rf=function(a,b){var c=this.u;this.za="pk"+(c[0].toUpperCase()+c.substring(1));Ij(this.za);Lj(this,this.za);c=Qj(this,a,!0,void 0,b);Mj(this,c);1==c.length&&this.rd.add(c[0].name);this.ic.add(this.za);this.ka.set(this.za,c);return this};X.prototype.addPrimaryKey=X.prototype.rf;
X.prototype.qf=function(a,b){Ij(a);Lj(this,a);var c=new Hj(b,this.u,a);q(c.action)||(c.action=0);q(c.timing)||(c.timing=0);if(1==c.action&&1==c.timing)throw new D(506);if(!this.J.has(c.pb))throw new D(540,a);this.sb.push(c);this.qe(a,[c.pb],this.rd.has(c.pb));return this};X.prototype.addForeignKey=X.prototype.qf;X.prototype.sf=function(a,b){Ij(a);Lj(this,a);var c=Qj(this,b,!0);Rj(this,a,c);1==c.length&&(this.rd.add(c[0].name),Sj(this,c[0].name));this.ka.set(a,c);this.ic.add(a);return this};
X.prototype.addUnique=X.prototype.sf;function Sj(a,b){a.sb.forEach(function(a){a.pb==b&&this.ic.add(a.name.split(".")[1])},a)}X.prototype.re=function(a){a=Qj(this,a,!1);Tj(this,a);a.forEach(function(a){this.Fc.add(a.name)},this);return this};X.prototype.addNullable=X.prototype.re;function Tj(a,b){Gb(a.ka).forEach(function(a){var d=C();this.ka.get(a).forEach(function(a){d.add(a.name)});var e=b.filter(function(a){return d.has(a.name)});if(1<d.size&&0<e.length)throw new D(507,a,e.join(","));},a)}
X.prototype.qe=function(a,b,c,d){Ij(a);Lj(this,a);b=Qj(this,b,!0,d);Rj(this,a,b);c&&this.ic.add(a);this.ka.set(a,b);return this};X.prototype.addIndex=X.prototype.qe;function Rj(a,b,c){if(1<c.length&&(a=c.filter(function(a){return this.Fc.has(a.name)},a),0<a.length))throw new D(507,b,a.join(","));}X.prototype.xb=ba("ld");X.prototype.persistentIndex=X.prototype.xb;X.prototype.tb=function(){Nj(this);Oj(this);Pj(this);return new (Uj(this))};X.prototype.getSchema=X.prototype.tb;
function Vj(a){return a.sb}function Qj(a,b,c,d,e){var f=b,f="string"==typeof b[0]?b.map(function(a){return new Jj({name:a,order:null!=d?d:1,autoIncrement:e||!1})}):b.map(function(a){return new Jj(a)});f.forEach(function(a){if(!this.J.has(a.name))throw new D(508,this.u,a.name);if(c){var b=this.J.get(a.name);if(0==b||6==b)throw new D(509,this.u,a.name);}},a);return f}
function Uj(a){function b(){function b(c){return a.ka.get(c).map(function(a){return{ca:this[a.name],ib:a.ib,autoIncrement:a.autoIncrement}},this)}var d=Gb(a.J).map(function(b){this[b]=new W(this,b,a.rd.has(b),a.Fc.has(b),a.J.get(b));return this[b]},this),e=Gb(a.ka).map(function(d){return new hg(a.u,d,a.ic.has(d),b.call(this,d))},this);Q.call(this,a.u,d,e,a.ld);var f=null===a.za?null:new hg(a.u,a.za,!0,b.call(this,a.za)),h=d.filter(function(b){return!a.Fc.has(b.getName())});this.Af=new Gj(f,h,a.sb);
this.df=Wj(a,d,e)}t(b,Q);b.prototype.rb=function(a){return new this.df(mb++,a)};b.prototype.createRow=b.prototype.rb;b.prototype.Jb=function(a){var b={};this.eb().forEach(function(e){var f=e.getName();e=e.H();var h=a.value[f];if(0==e)if(e=h,null!=e&&""!=e){0!=e.length%2&&(e="0"+e);for(var h=new ArrayBuffer(e.length/2),k=new Uint8Array(h),n=0,A=0;n<e.length;n+=2)k[A++]=parseInt(e.substr(n,2),16);e=h}else e=null;else e=2==e?null!=h?new Date(h):null:h;b[f]=e},this);return new this.df(a.id,b)};b.prototype.deserializeRow=
b.prototype.Jb;b.prototype.Ab=g("Af");b.prototype.getConstraint=b.prototype.Ab;return b}
function Wj(a,b,c){function d(a,d){this.J=b;this.ka=c;y.call(this,a,d)}t(d,y);d.prototype.Ae=function(){var a={};this.J.forEach(function(b){a[b.getName()]=b.Ac()?null:yc[b.H()]});return a};d.prototype.lf=function(){var a={};this.J.forEach(function(b){var c=b.getName();b=b.H();var d=this.o[c];a[c]=0==b?null!=d?qb(d):null:2==b?null!=d?d.getTime():null:6==b?null!=d?d:null:d},this);return a};var e=function(a){var b=this.J.get(a.getName()),c=this.Fd.Me.get(b)||null;return function(b){return c(b[a.getName()])}}.bind(a),
f=function(a){var b=a.map(function(a){return e(a.ca)});return function(a){return b.map(function(b){return b(a)})}}.bind(a),h={};c.forEach(function(a){var b=a.m();a=1==a.f.length?e(a.f[0].ca):f(a.f);h[b]=a});d.prototype.Cb=function(a){return-1!=a.indexOf("#")?this.id():h.hasOwnProperty(a)?h[a](this.o):null};return d};function Y(a,b){this.j=new Z(a,b);this.nb=z();this.uc=!1}r("lf.schema.Builder",Y);function Xj(a,b){b.sb.forEach(function(a){var d=a.Pa;if(!this.nb.has(d))throw new D(536,a.name);var d=this.nb.get(d).tb(),e=a.Ic;if(!d.hasOwnProperty(e))throw new D(537,a.name);if(b.tb()[a.pb].H()!=d[e].H())throw new D(538,a.name);if(!d[e].Bc())throw new D(539,a.name);},a)}Y.prototype.yf=function(a){a.sb.forEach(function(a){Vj(this.nb.get(a.Pa)).forEach(function(c){if(c.pb==a.Ic)throw new D(534,a.name);},this)},this)};
function Yj(a){a.uc||(a.nb.forEach(function(a){Xj(this,a);a=a.tb();this.j.K.set(a.getName(),a)},a),B(a.nb).forEach(a.yf,a),Zj(a),a.nb.clear(),a.uc=!0)}function ak(a,b,c){b.ne||(b.ne=!0,b.Wd=!0,b.Be.forEach(function(a){a=c.get(a);if(!a.ne)ak(this,a,c);else if(a.Wd&&b!=a)throw new D(533);},a));b.Wd=!1}function Zj(a){var b=z();a.j.K.forEach(function(a,d){b.set(d,new bk(d))},a);a.nb.forEach(function(a,d){a.sb.forEach(function(a){b.get(a.Pa).Be.add(d)})});B(b).forEach(function(a){ak(this,a,b)},a)}
function bk(a){this.Wd=this.ne=!1;this.Be=C();this.Nc=a}Y.prototype.tb=function(){this.uc||Yj(this);return this.j};Y.prototype.getSchema=Y.prototype.tb;Y.prototype.De=function(){var a=new Ob("ns_"+this.j.name()),b;Dj||(Dj=new Cj);b=Dj;var c=null;b.Pd(a)?c=b.i(a):(c=new Cj,b.jb(a,c));return c};Y.prototype.getGlobal=Y.prototype.De;Y.prototype.connect=function(a){var b=this.De();b.Pd(Wb)||b.jb(Wb,this.tb());return(new V(b)).Ea(a)};Y.prototype.connect=Y.prototype.connect;
Y.prototype.Df=function(a){if(this.nb.has(a))throw new D(503,a);if(this.uc)throw new D(535);this.nb.set(a,new X(a));return this.nb.get(a)};Y.prototype.createTable=Y.prototype.Df;Y.prototype.he=function(a){if(this.uc)throw new D(535);this.j.he(a);return this};Y.prototype.setPragma=Y.prototype.he;function Z(a,b){this.u=a;this.Xb=b;this.K=z();this.Ye={Hf:!1}}r("lf.schema.DatabaseSchema",Z);Z.prototype.name=g("u");Z.prototype.name=Z.prototype.name;Z.prototype.version=g("Xb");Z.prototype.version=Z.prototype.version;
Z.prototype.ra=function(){return B(this.K)};Z.prototype.tables=Z.prototype.ra;Z.prototype.table=function(a){if(!this.K.has(a))throw new D(101,a);return this.K.get(a)};Z.prototype.table=Z.prototype.table;Z.prototype.info=function(){this.He||(this.He=new Ej(this));return this.He};Z.prototype.Xe=g("Ye");Z.prototype.pragma=Z.prototype.Xe;Z.prototype.he=ba("Ye");r("lf.schema.create",function(a,b){return new Y(a,b)});v.prototype.catch=v.prototype.ke;v.prototype["catch"]=v.prototype.catch;}.bind(window))()
//# sourceMappingURL=lovefield.es6.js.map
