if(!self.window){window=this;}
(function(){'use strict';function aa(){return function(){}}function ca(a){return function(b){this[a]=b}}function g(a){return function(){return this[a]}}function l(a){return function(){return a}}var m,p=this;function q(a){return void 0!==a}function da(){}
function ea(a){var b=typeof a;if("object"==b)if(a){if(a instanceof Array)return"array";if(a instanceof Object)return b;var c=Object.prototype.toString.call(a);if("[object Window]"==c)return"object";if("[object Array]"==c||"number"==typeof a.length&&"undefined"!=typeof a.splice&&"undefined"!=typeof a.propertyIsEnumerable&&!a.propertyIsEnumerable("splice"))return"array";if("[object Function]"==c||"undefined"!=typeof a.call&&"undefined"!=typeof a.propertyIsEnumerable&&!a.propertyIsEnumerable("call"))return"function"}else return"null";
else if("function"==b&&"undefined"==typeof a.call)return"object";return b}function fa(a){return null===a}function ga(a){return null!=a}function ha(a){var b=ea(a);return"array"==b||"object"==b&&"number"==typeof a.length}function ia(a){return"string"==typeof a}function ja(a){return"function"==ea(a)}function ka(a){return a[la]||(a[la]=++ma)}var la="closure_uid_"+(1E9*Math.random()>>>0),ma=0;function na(a,b,c){return a.call.apply(a.bind,arguments)}
function oa(a,b,c){if(!a)throw Error();if(2<arguments.length){var d=Array.prototype.slice.call(arguments,2);return function(){var c=Array.prototype.slice.call(arguments);Array.prototype.unshift.apply(c,d);return a.apply(b,c)}}return function(){return a.apply(b,arguments)}}function pa(a,b,c){pa=Function.prototype.bind&&-1!=Function.prototype.bind.toString().indexOf("native code")?na:oa;return pa.apply(null,arguments)}
function qa(a,b){var c=Array.prototype.slice.call(arguments,1);return function(){var b=c.slice();b.push.apply(b,arguments);return a.apply(this,b)}}function r(a,b){var c=a.split("."),d=p;c[0]in d||!d.execScript||d.execScript("var "+c[0]);for(var e;c.length&&(e=c.shift());)!c.length&&q(b)?d[e]=b:d=d[e]?d[e]:d[e]={}}
function t(a,b){function c(){}c.prototype=b.prototype;a.ab=b.prototype;a.prototype=new c;a.prototype.constructor=a;a.Hg=function(a,c,f){for(var h=Array(arguments.length-2),k=2;k<arguments.length;k++)h[k-2]=arguments[k];return b.prototype[c].apply(a,h)}};function ra(a){if(Error.captureStackTrace)Error.captureStackTrace(this,ra);else{var b=Error().stack;b&&(this.stack=b)}a&&(this.message=String(a))}t(ra,Error);ra.prototype.name="CustomError";var sa=String.prototype.trim?function(a){return a.trim()}:function(a){return a.replace(/^[\s\xa0]+|[\s\xa0]+$/g,"")};
function ta(a){var b=0,c=sa(String(ua)).split(".");a=sa(String(a)).split(".");for(var d=Math.max(c.length,a.length),e=0;0==b&&e<d;e++){var f=c[e]||"",h=a[e]||"",k=/(\d*)(\D*)/g,n=/(\d*)(\D*)/g;do{var A=k.exec(f)||["","",""],O=n.exec(h)||["","",""];if(0==A[0].length&&0==O[0].length)break;b=va(0==A[1].length?0:parseInt(A[1],10),0==O[1].length?0:parseInt(O[1],10))||va(0==A[2].length,0==O[2].length)||va(A[2],O[2])}while(0==b)}return b}function va(a,b){return a<b?-1:a>b?1:0};function wa(a,b,c){this.eg=c;this.If=a;this.wg=b;this.ld=0;this.dd=null}wa.prototype.get=function(){var a;0<this.ld?(this.ld--,a=this.dd,this.dd=a.next,a.next=null):a=this.If();return a};wa.prototype.put=function(a){this.wg(a);this.ld<this.eg&&(this.ld++,a.next=this.dd,this.dd=a)};var xa=Array.prototype.indexOf?function(a,b,c){return Array.prototype.indexOf.call(a,b,c)}:function(a,b,c){c=null==c?0:0>c?Math.max(0,a.length+c):c;if(ia(a))return ia(b)&&1==b.length?a.indexOf(b,c):-1;for(;c<a.length;c++)if(c in a&&a[c]===b)return c;return-1},ya=Array.prototype.forEach?function(a,b,c){Array.prototype.forEach.call(a,b,c)}:function(a,b,c){for(var d=a.length,e=ia(a)?a.split(""):a,f=0;f<d;f++)f in e&&b.call(c,e[f],f,a)},za=Array.prototype.map?function(a,b,c){return Array.prototype.map.call(a,
b,c)}:function(a,b,c){for(var d=a.length,e=Array(d),f=ia(a)?a.split(""):a,h=0;h<d;h++)h in f&&(e[h]=b.call(c,f[h],h,a));return e},Aa=Array.prototype.reduce?function(a,b,c,d){d&&(b=pa(b,d));return Array.prototype.reduce.call(a,b,c)}:function(a,b,c,d){var e=c;ya(a,function(c,h){e=b.call(d,e,c,h,a)});return e},Ba=Array.prototype.some?function(a,b,c){return Array.prototype.some.call(a,b,c)}:function(a,b,c){for(var d=a.length,e=ia(a)?a.split(""):a,f=0;f<d;f++)if(f in e&&b.call(c,e[f],f,a))return!0;return!1};
function Ca(a,b,c){return 2>=arguments.length?Array.prototype.slice.call(a,b):Array.prototype.slice.call(a,b,c)}function Da(a){for(var b=[],c=0;c<a;c++)b[c]=0;return b}function Ea(a){for(var b=[],c=0;c<arguments.length;c++){var d=arguments[c];if("array"==ea(d))for(var e=0;e<d.length;e+=8192)for(var f=Ea.apply(null,Ca(d,e,e+8192)),h=0;h<f.length;h++)b.push(f[h]);else b.push(d)}return b};var Fa;a:{var Ga=p.navigator;if(Ga){var Ha=Ga.userAgent;if(Ha){Fa=Ha;break a}}Fa=""}function u(a){return-1!=Fa.indexOf(a)};function Ja(){return u("Opera")||u("OPR")}function Ka(){return(u("Chrome")||u("CriOS"))&&!Ja()&&!u("Edge")};function La(a){p.setTimeout(function(){throw a;},0)}var Ma;
function Na(){var a=p.MessageChannel;"undefined"===typeof a&&"undefined"!==typeof window&&window.postMessage&&window.addEventListener&&!u("Presto")&&(a=function(){var a=document.createElement("IFRAME");a.style.display="none";a.src="";document.documentElement.appendChild(a);var b=a.contentWindow,a=b.document;a.open();a.write("");a.close();var c="callImmediate"+Math.random(),d="file:"==b.location.protocol?"*":b.location.protocol+"//"+b.location.host,a=pa(function(a){if(("*"==d||a.origin==d)&&a.data==
c)this.port1.onmessage()},this);b.addEventListener("message",a,!1);this.port1={};this.port2={postMessage:function(){b.postMessage(c,d)}}});if("undefined"!==typeof a&&!u("Trident")&&!u("MSIE")){var b=new a,c={},d=c;b.port1.onmessage=function(){if(q(c.next)){c=c.next;var a=c.ze;c.ze=null;a()}};return function(a){d.next={ze:a};d=d.next;b.port2.postMessage(0)}}return"undefined"!==typeof document&&"onreadystatechange"in document.createElement("SCRIPT")?function(a){var b=document.createElement("SCRIPT");
b.onreadystatechange=function(){b.onreadystatechange=null;b.parentNode.removeChild(b);b=null;a();a=null};document.documentElement.appendChild(b)}:function(a){p.setTimeout(a,0)}};function Oa(){this.ud=this.nc=null}var Qa=new wa(function(){return new Pa},function(a){a.reset()},100);Oa.prototype.add=function(a,b){var c=Qa.get();c.set(a,b);this.ud?this.ud.next=c:this.nc=c;this.ud=c};Oa.prototype.remove=function(){var a=null;this.nc&&(a=this.nc,this.nc=this.nc.next,this.nc||(this.ud=null),a.next=null);return a};function Pa(){this.next=this.scope=this.Md=null}Pa.prototype.set=function(a,b){this.Md=a;this.scope=b;this.next=null};
Pa.prototype.reset=function(){this.next=this.scope=this.Md=null};function Ra(a,b){Sa||Ta();Ua||(Sa(),Ua=!0);Va.add(a,b)}var Sa;function Ta(){if(p.Promise&&p.Promise.resolve){var a=p.Promise.resolve(void 0);Sa=function(){a.then(Wa)}}else Sa=function(){var a=Wa;!ja(p.setImmediate)||p.Window&&p.Window.prototype&&p.Window.prototype.setImmediate==p.setImmediate?(Ma||(Ma=Na()),Ma(a)):p.setImmediate(a)}}var Ua=!1,Va=new Oa;function Wa(){for(var a=null;a=Va.remove();){try{a.Md.call(a.scope)}catch(b){La(b)}Qa.put(a)}Ua=!1};function v(a,b){this.Ra=0;this.gf=void 0;this.Tc=this.dc=this.C=null;this.cd=this.Kd=!1;if(a!=da)try{var c=this;a.call(b,function(a){Xa(c,2,a)},function(a){Xa(c,3,a)})}catch(d){Xa(this,3,d)}}function Ya(){this.next=this.context=this.jc=this.Fc=this.child=null;this.xd=!1}Ya.prototype.reset=function(){this.context=this.jc=this.Fc=this.child=null;this.xd=!1};var Za=new wa(function(){return new Ya},function(a){a.reset()},100);function $a(a,b,c){var d=Za.get();d.Fc=a;d.jc=b;d.context=c;return d}
function w(a){if(a instanceof v)return a;var b=new v(da);Xa(b,2,a);return b}function ab(a){return new v(function(b,c){c(a)})}function bb(a,b,c){cb(a,b,c,null)||Ra(qa(b,a))}function db(a){return new v(function(b,c){var d=a.length,e=[];if(d)for(var f=function(a,c){d--;e[a]=c;0==d&&b(e)},h=function(a){c(a)},k=0,n;k<a.length;k++)n=a[k],bb(n,qa(f,k),h);else b(e)})}function x(){var a,b,c=new v(function(c,e){a=c;b=e});return new eb(c,a,b)}
v.prototype.then=function(a,b,c){return fb(this,ja(a)?a:null,ja(b)?b:null,c)};v.prototype.then=v.prototype.then;v.prototype.$goog_Thenable=!0;v.prototype.ne=function(a,b){return fb(this,null,a,b)};function gb(a,b){a.dc||2!=a.Ra&&3!=a.Ra||hb(a);a.Tc?a.Tc.next=b:a.dc=b;a.Tc=b}
function fb(a,b,c,d){var e=$a(null,null,null);e.child=new v(function(a,h){e.Fc=b?function(c){try{var e=b.call(d,c);a(e)}catch(A){h(A)}}:a;e.jc=c?function(b){try{var e=c.call(d,b);!q(e)&&b instanceof ib?h(b):a(e)}catch(A){h(A)}}:h});e.child.C=a;gb(a,e);return e.child}v.prototype.Cg=function(a){this.Ra=0;Xa(this,2,a)};v.prototype.Dg=function(a){this.Ra=0;Xa(this,3,a)};
function Xa(a,b,c){0==a.Ra&&(a==c&&(b=3,c=new TypeError("Promise cannot resolve to itself")),a.Ra=1,cb(c,a.Cg,a.Dg,a)||(a.gf=c,a.Ra=b,a.C=null,hb(a),3!=b||c instanceof ib||jb(a,c)))}function cb(a,b,c,d){if(a instanceof v)return gb(a,$a(b||da,c||null,d)),!0;var e;if(a)try{e=!!a.$goog_Thenable}catch(h){e=!1}else e=!1;if(e)return a.then(b,c,d),!0;e=typeof a;if("object"==e&&null!=a||"function"==e)try{var f=a.then;if(ja(f))return kb(a,f,b,c,d),!0}catch(h){return c.call(d,h),!0}return!1}
function kb(a,b,c,d,e){function f(a){k||(k=!0,d.call(e,a))}function h(a){k||(k=!0,c.call(e,a))}var k=!1;try{b.call(a,h,f)}catch(n){f(n)}}function hb(a){a.Kd||(a.Kd=!0,Ra(a.Nf,a))}function lb(a){var b=null;a.dc&&(b=a.dc,a.dc=b.next,b.next=null);a.dc||(a.Tc=null);return b}
v.prototype.Nf=function(){for(var a=null;a=lb(this);){var b=this.Ra,c=this.gf;if(3==b&&a.jc&&!a.xd)for(var d=void 0,d=this;d&&d.cd;d=d.C)d.cd=!1;if(a.child)a.child.C=null,mb(a,b,c);else try{a.xd?a.Fc.call(a.context):mb(a,b,c)}catch(e){nb.call(null,e)}Za.put(a)}this.Kd=!1};function mb(a,b,c){2==b?a.Fc.call(a.context,c):a.jc&&a.jc.call(a.context,c)}function jb(a,b){a.cd=!0;Ra(function(){a.cd&&nb.call(null,b)})}var nb=La;function ib(a){ra.call(this,a)}t(ib,ra);ib.prototype.name="cancel";
function eb(a,b,c){this.da=a;this.resolve=b;this.reject=c};function ob(a,b,c,d){c=c||function(a,b){return a==b};d=d||function(b){return a[b]};for(var e=a.length,f=b.length,h=[],k=0;k<e+1;k++)h[k]=[],h[k][0]=0;for(var n=0;n<f+1;n++)h[0][n]=0;for(k=1;k<=e;k++)for(n=1;n<=f;n++)c(a[k-1],b[n-1])?h[k][n]=h[k-1][n-1]+1:h[k][n]=Math.max(h[k-1][n],h[k][n-1]);for(var A=[],k=e,n=f;0<k&&0<n;)c(a[k-1],b[n-1])?(A.unshift(d(k-1,n-1)),k--,n--):h[k-1][n]>h[k][n-1]?k--:n--;return A}function pb(a){return Aa(arguments,function(a,c){return a+c},0)}
function qb(a){return pb.apply(null,arguments)/arguments.length}function rb(a){var b=arguments.length;if(2>b)return 0;var c=qb.apply(null,arguments);return pb.apply(null,za(arguments,function(a){return Math.pow(a-c,2)}))/(b-1)}function sb(a){return Math.sqrt(rb.apply(null,arguments))};var tb="StopIteration"in p?p.StopIteration:{message:"StopIteration",stack:""};function ub(){}ub.prototype.next=function(){throw tb;};ub.prototype.se=function(){return this};function xb(a){if(a instanceof ub)return a;if("function"==typeof a.se)return a.se(!1);if(ha(a)){var b=0,c=new ub;c.next=function(){for(;;){if(b>=a.length)throw tb;if(b in a)return a[b++];b++}};return c}throw Error("Not implemented");}
function yb(a,b){if(ha(a))try{ya(a,b,void 0)}catch(c){if(c!==tb)throw c;}else{a=xb(a);try{for(;;)b.call(void 0,a.next(),void 0,a)}catch(c){if(c!==tb)throw c;}}}function zb(a){if(Ba(arguments,function(a){return!a.length})||!arguments.length)return new ub;var b=new ub,c=arguments,d=Da(c.length);b.next=function(){if(d){for(var a=za(d,function(a,b){return c[b][a]}),b=d.length-1;0<=b;b--){if(d[b]<c[b].length-1){d[b]++;break}if(0==b){d=null;break}d[b]=0}return a}throw tb;};return b};function Ab(a){Bb(a);return a.b.concat()}function Bb(a){if(a.Ef!=a.b.length){for(var b=0,c=0;b<a.b.length;){var d=a.b[b];Cb(a.Z,d)&&(a.b[c++]=d);b++}a.b.length=c}if(a.Ef!=a.b.length){for(var e={},c=b=0;b<a.b.length;)d=a.b[b],Cb(e,d)||(a.b[c++]=d,e[d]=1),b++;a.b.length=c}}function Cb(a,b){return Object.prototype.hasOwnProperty.call(a,b)};function Db(){return u("iPhone")&&!u("iPod")&&!u("iPad")};var Eb=Ja(),Fb=u("Trident")||u("MSIE"),Gb=u("Edge"),Hb=u("Gecko")&&!(-1!=Fa.toLowerCase().indexOf("webkit")&&!u("Edge"))&&!(u("Trident")||u("MSIE"))&&!u("Edge"),Ib=-1!=Fa.toLowerCase().indexOf("webkit")&&!u("Edge");function Jb(){var a=Fa;if(Hb)return/rv\:([^\);]+)(\)|;)/.exec(a);if(Gb)return/Edge\/([\d\.]+)/.exec(a);if(Fb)return/\b(?:MSIE|rv)[: ]([^\);]+)(\)|;)/.exec(a);if(Ib)return/WebKit\/(\S+)/.exec(a)}
var ua=function(){if(Eb&&p.opera){var a;var b=p.opera.version;try{a=b()}catch(c){a=b}return a}a="";(b=Jb())&&(a=b?b[1]:"");return Fb&&(b=(b=p.document)?b.documentMode:void 0,b>parseFloat(a))?String(b):a}(),Kb={};var Lb=Db()||u("iPod"),Mb=u("iPad");!u("Android")||Ka()||u("Firefox")||Ja();var Nb=Ka(),Ob=u("Safari")&&!(Ka()||u("Coast")||Ja()||u("Edge")||u("Silk")||u("Android"))&&!(Db()||u("iPad")||u("iPod"));/*

 Copyright 2015 The Lovefield Project Authors. All Rights Reserved.

 Licensed under the Apache License, Version 2.0 (the "License");
 you may not use this file except in compliance with the License.
 You may obtain a copy of the License at

     http://www.apache.org/licenses/LICENSE-2.0

 Unless required by applicable law or agreed to in writing, software
 distributed under the License is distributed on an "AS IS" BASIS,
 WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 See the License for the specific language governing permissions and
 limitations under the License.
*/
function Pb(){this.xg=Ob||Mb||Lb;this.Wf=!(this.xg||Fb&&!Kb[10]&&!(Kb[10]=0<=ta(10)));!Fb||Kb[11]||(Kb[11]=0<=ta(11));this.Fg=Nb||Ob}var Qb;function y(){return new window.Map}function Rb(a){var b=0,c=Array(a.size);a.forEach(function(a,e){c[b++]=e});return c}function z(a){var b=0,c=Array(a.size);a.forEach(function(a){c[b++]=a});return c};/*

 Copyright 2014 The Lovefield Project Authors. All Rights Reserved.

 Licensed under the Apache License, Version 2.0 (the "License");
 you may not use this file except in compliance with the License.
 You may obtain a copy of the License at

     http://www.apache.org/licenses/LICENSE-2.0

 Unless required by applicable law or agreed to in writing, software
 distributed under the License is distributed on an "AS IS" BASIS,
 WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 See the License for the specific language governing permissions and
 limitations under the License.
*/
function Sb(a,b){this.oa=a;this.o=b||this.Ee()}var Tb=0;m=Sb.prototype;m.id=g("oa");m.Ee=function(){return{}};m.qf=g("o");m.Fa=function(){return{id:this.oa,value:this.qf()}};m.jb=function(a){return"#"==a.substr(-1)?this.oa:null};function Ub(a){return new Sb(a.id,a.value)}function Vb(a){return new Sb(Tb++,a||{})}function Xb(a){if(null==a)return null;a=new Uint8Array(a);for(var b="",c=0;c<a.length;++c)var d=a[c].toString(16),b=b+(2>d.length?"0"+d:d);return b};var Yb={};r("lf.TransactionType",Yb);Yb.READ_ONLY=0;Yb.READ_WRITE=1;function Zb(a,b){this.oe=a;this.Oa=b||null;this.O=x()}Zb.prototype.ia=function(){return 0==this.oe?this.qc():$b(this)};function $b(a){try{ac(a.Oa)}catch(b){return ab(b)}return bc(a).then(function(a){this.Oa.ia();return a}.bind(a))}function bc(a){cc(a);dc(a);return a.qc()}
function cc(a){a.Oa.sb.forEach(function(a,c){var d=this.Oa.ca().get(c),d=this.H(d.getName(),d.fb.bind(d),0),e=z(a.ya).map(function(a){return a.id()});0<e.length&&d.remove(e).ne(this.Ke,this);e=z(a.ma).map(function(a){return a[1]}).concat(z(a.va));d.put(e).ne(this.Ke,this)},a)}function dc(a){ec(a.Oa).forEach(function(a){var c=this.H(a.getName(),Ub,1);c.remove([]);c.put(a.Fa())},a)}Zb.prototype.Ke=function(a){this.O.reject(a)};function fc(a){this.yg=a}fc.prototype.toString=g("yg");var gc=new fc("backstore"),hc=new fc("cache"),ic=new fc("indexstore"),jc=new fc("engine"),kc=new fc("runner"),lc=new fc("observerregistry"),mc=new fc("schema");function B(a){return q(a)?new window.Set(a):new window.Set}function C(a){var b=0,c=Array(a.size);a.forEach(function(a){c[b++]=a});return c}function nc(a,b){if(b.size>a.size)return!1;var c=!0;b.forEach(function(b){c=c&&a.has(b)});return c};function oc(a,b){this.oa=a;this.o=b||{}}function pc(a){var b=B();a.forEach(function(a){b.add(a>>9)});return C(b)}oc.prototype.Y=g("oa");function qc(a,b){b.forEach(function(a){this.o[a.id()]=a.Fa()},a)}function rc(a,b){b.forEach(function(a){delete this.o[a]},a)}oc.prototype.Fa=function(){return{id:this.oa,value:JSON.stringify(this.o)}};function sc(a){return new oc(a.id,JSON.parse(a.value))};function tc(a,b,c){this.X=a;this.Eb=b;this.hf=c}m=tc.prototype;m.get=function(a){if(0==a.length)return this.Nd();var b=this.Eb;return uc(this,a).then(function(c){return a.map(function(a){var e=c.get(a>>9);return b(e.o[a])})})};function uc(a,b){var c=y(),d=x(),e=pc(b).map(function(a){return new v(function(b,d){var e;try{e=this.X.get(a)}catch(A){d(A);return}e.onerror=d;e.onsuccess=function(a){a=sc(a.target.result);c.set(a.Y(),a);b()}},this)},a);db(e).then(function(){d.resolve(c)});return d.da}
m.Nd=function(){return new v(function(a,b){var c=[],d;try{d=this.X.openCursor()}catch(e){b(e);return}d.onerror=b;d.onsuccess=function(){var b=d.result;if(b){var f;f=sc(b.value).o;for(var h in f)c.push(this.Eb(f[h]));b.continue()}else a(c)}.bind(this)},this)};m.Tb=function(a){return new v(function(b,c){var d;try{d=a()}catch(e){c(e);return}d.onsuccess=b;d.onerror=c},this)};
m.put=function(a){if(0==a.length)return w();var b=y();a.forEach(function(a){var d;d=a.id()>>9;var e=b.get(d)||null;null===e&&(e=this.hf(this.X.name,d));qc(e,[a]);b.set(d,e)},this);a=z(b).map(function(a){return this.Tb(function(){return this.X.put(a.Fa())}.bind(this))},this);return db(a)};
m.remove=function(a){if(0==a.length)return this.Tb(function(){return this.X.clear()}.bind(this));var b=y();a.forEach(function(a){var d=a>>9,e=b.get(d)||null;null===e&&(e=this.hf(this.X.name,d));rc(e,[a]);b.set(d,e)},this);a=z(b).map(function(a){return this.Tb(function(){return 0==Object.keys(a.o).length?this.X.delete(a.Y()):this.X.put(a.Fa())}.bind(this))},this);return db(a)};function vc(a,b,c){a=a.l(hc);var d=[c<<9,(c+1<<9)-1];b=a.Xa(b,d[0],d[1]);c=new oc(c);qc(c,b);return c}
function wc(a,b){return new oc(b)};function xc(a){this.U=a.l(hc);this.D=a.l(ic);this.g=a.l(mc)}xc.prototype.update=function(a){a.forEach(function(a){yc(this,a);zc(this,a)},this)};function zc(a,b){var c=b.getName();b.ya.forEach(function(a,b){this.U.remove(c,b)},a);b.va.forEach(function(a){this.U.set(c,a)},a);b.ma.forEach(function(a){this.U.set(c,a[1])},a)}function yc(a,b){var c=a.g.table(b.getName());Ac(b).forEach(function(a){Bc(this,c,a)},a)}
function Bc(a,b,c){var d=a.D.lc.get(b.getName())||[],e=0;d.forEach(function(a){try{Cc(a,c),e++}catch(b){throw d.slice(0,e).forEach(function(a){Cc(a,[c[1],c[0]])},this),b;}},a)}function Cc(a,b){var c=null===b[1]?void 0:b[1].jb(a.getName()),d=null===b[0]?void 0:b[0].jb(a.getName());if(!q(d)&&q(c))a.add(c,b[1].id());else if(q(d)&&q(c)){if(null===c||null===d){if(c==d)return}else if(0==a.Lb().compare(d,c))return;a.add(c,b[1].id());a.remove(d,b[0].id())}else q(d)&&!q(c)&&a.remove(d,b[0].id())};var Dc={};r("lf.ConstraintAction",Dc);Dc.RESTRICT=0;Dc.CASCADE=1;var Ec={};r("lf.ConstraintTiming",Ec);Ec.IMMEDIATE=0;Ec.DEFERRABLE=1;var Fc={};r("lf.Order",Fc);Fc.DESC=0;Fc.ASC=1;var Gc={};r("lf.Type",Gc);Gc.ARRAY_BUFFER=0;Gc.BOOLEAN=1;Gc.DATE_TIME=2;Gc.INTEGER=3;Gc.NUMBER=4;Gc.STRING=5;Gc.OBJECT=6;var Hc={0:null,1:!1,2:Object.freeze(new Date(0)),3:0,4:0,5:"",6:null};r("lf.type.DEFAULT_VALUES",Hc);function D(a,b){this.code=a;this.message="http://sn.im/2a0j3wn?c="+a;if(1<arguments.length)for(var c=1;c<=Math.min(4,arguments.length-1);++c)this.message+="&p"+(c-1)+"="+encodeURIComponent(arguments[c].toString().slice(0,64))}t(D,Error);function Ic(){this.Z=y();this.size=0}m=Ic.prototype;m.has=function(a){return this.Z.has(a)};m.set=function(a,b){var c=this.Z.get(a)||null;null===c&&(c=B(),this.Z.set(a,c));c.has(b)||(c.add(b),this.size++);return this};m.Wb=function(a,b){var c=this.Z.get(a)||null;null===c&&(c=B(),this.Z.set(a,c));b.forEach(function(a){c.has(a)||(c.add(a),this.size++)},this);return this};m.Vd=function(a){a.keys().forEach(function(b){var c=a.get(b);this.Wb(b,c)},this);return this};
m.delete=function(a,b){var c=this.Z.get(a,null);if(null===c)return!1;var d=c.delete(b);d&&(--this.size,0==c.size&&this.Z.delete(a));return d};m.get=function(a){a=this.Z.get(a)||null;return null===a?null:C(a)};m.clear=function(){this.Z.clear();this.size=0};m.keys=function(){return Rb(this.Z)};m.values=function(){var a=[];this.Z.forEach(function(b){a.push.apply(a,C(b))});return a};function Jc(a){this.D=a.l(ic);this.g=a.l(mc);this.U=a.l(hc);this.Xc=null}function Kc(a,b,c){var d=b.Fb().jg;c.forEach(function(a){d.forEach(function(b){if(null==a.o[b.getName()])throw new D(202,b.m());},this)},a)}function Lc(a,b,c,d){b.Fb().Od().forEach(function(a){a.timing==d&&Mc(this,a,c)},a)}function Mc(a,b,c){var d=Nc(a,b);c.forEach(function(a){if(Oc(a[0],a[1],b.name)&&(a=a[1].jb(b.name),null!==a&&!d.eb(a)))throw new D(203,b.name);},a)}
function Nc(a,b){null===a.Xc&&(a.Xc=y());var c=a.Xc.get(b.name)||null;null===c&&(c=a.g.table(b.Pa)[b.Gc].za(),c=a.D.get(c.m()),a.Xc.set(b.name,c));return c}function Oc(a,b,c){return(null===a?null!==b:null===b)||a.jb(c)!=b.jb(c)}function Qc(a,b,c,d){b=Rc(a.g.info(),b.getName(),0);null!==b&&(b=b.filter(function(a){return a.timing==d}),0!=b.length&&Sc(a,b,c,function(a,b,c){if(b.eb(c))throw new D(203,a.name);}))}
function Tc(a,b,c){b=Rc(a.g.info(),b.getName(),1);if(null===b)return null;var d=new Ic;Sc(a,b,c,function(a,b,c){b=b.get(c);0<b.length&&d.Wb(a.Ae,b)});return d}function Uc(a,b,c){var d=new Ic;Sc(a,c,b,function(a,b,c,k){b.get(c).forEach(function(b){d.set(b,{Ld:a,og:k[1]})})});return d}function Sc(a,b,c,d){b.forEach(function(a){var b=this.D.get(a.name),h=Nc(this,a);c.forEach(function(c){if(Oc(c[0],c[1],h.getName())){var n=c[0].jb(h.getName());d(a,b,n,c)}},this)},a)}
function Vc(a,b,c,d){0!=c.length&&(c=c.map(function(a){return[null,a]}),Lc(a,b,c,d))}function Wc(a,b,c,d){0!=c.length&&(Lc(a,b,c,d),Qc(a,b,c,d))}function Xc(a,b,c,d){0!=c.length&&(c=c.map(function(a){return[a,null]}),Qc(a,b,c,d))}
function Yc(a,b,c){var d={me:[],kf:new Ic},e=new Ic;e.Wb(b.getName(),c.map(function(a){return a.id()}));do{var f=new Ic;e.keys().forEach(function(a){var b=this.g.table(a);a=e.get(a).map(function(a){return[this.U.get(a),null]},this);b=Tc(this,b,a);null!==b&&(d.me.unshift.apply(d.me,b.keys()),f.Vd(b))},a);e=f;d.kf.Vd(e)}while(0<e.size);return d};function Zc(a){this.va=y();this.ma=y();this.ya=y();this.u=a}m=Zc.prototype;m.getName=g("u");m.add=function(a){if(this.ya.has(a.id())){var b=[this.ya.get(a.id()),a];this.ma.set(a.id(),b);this.ya.delete(a.id())}else this.va.set(a.id(),a)};m.modify=function(a){var b=a[1],c=a[0].id();this.va.has(c)?this.va.set(c,b):(this.ma.has(c)&&(a=[this.ma.get(a[0].id())[0],b]),this.ma.set(c,a))};
m.delete=function(a){if(this.va.has(a.id()))this.va.delete(a.id());else if(this.ma.has(a.id())){var b=this.ma.get(a.id())[0];this.ma.delete(a.id());this.ya.set(a.id(),b)}else this.ya.set(a.id(),a)};m.Vd=function(a){a.va.forEach(function(a){this.add(a)},this);a.ma.forEach(function(a){this.modify(a)},this);a.ya.forEach(function(a){this.delete(a)},this)};
function Ac(a){var b=[];a.va.forEach(function(a){b.push([null,a])});a.ma.forEach(function(a){b.push(a)});a.ya.forEach(function(a){b.push([a,null])});return b}m.toString=function(){return"["+Rb(this.va).toString()+"], ["+Rb(this.ma).toString()+"], ["+Rb(this.ya).toString()+"]"};function $c(a){var b=new Zc(a.u);a.va.forEach(function(a){b.delete(a)});a.ya.forEach(function(a){b.add(a)});a.ma.forEach(function(a){b.modify([a[1],a[0]])});return b}
m.$f=function(){return 0==this.va.size&&0==this.ya.size&&0==this.ma.size};function ad(a,b){this.aa=y();b.forEach(function(a){this.aa.set(a.getName(),a)},this);this.g=a.l(mc);this.U=a.l(hc);this.D=a.l(ic);this.wa=new Jc(a);this.ed=new xc(a);this.sb=y()}function ec(a){var b=[];Rb(a.sb).map(function(a){return this.aa.get(a)},a).forEach(function(a){a.Cb()&&(a.Aa().forEach(function(a){b.push(this.D.get(a.m()))},this),b.push(this.D.get(a.getName()+".#")))},a);return b}m=ad.prototype;m.ca=g("aa");
m.zb=function(a,b){bd(this,a);Kc(this.wa,a,b);Vc(this.wa,a,b,0);for(var c=0;c<b.length;c++)cd(this,a,[null,b[c]])};function cd(a,b,c){var d=b.getName(),e=a.sb.get(d)||new Zc(d);a.sb.set(d,e);try{Bc(a.ed,b,c)}catch(h){throw h;}b=c[0];var f=c[1];null===b&&null!==f?(a.U.set(d,f),e.add(f)):null!==b&&null!==f?(a.U.set(d,f),e.modify(c)):null!==b&&null===f&&(a.U.remove(d,b.id()),e.delete(b))}
m.update=function(a,b){bd(this,a);Kc(this.wa,a,b);var c=b.map(function(a){return[this.U.get(a.id()),a]},this);dd(this,a,c);Wc(this.wa,a,c,0);c.forEach(function(b){cd(this,a,b)},this)};m.Pd=function(a,b){bd(this,a);Kc(this.wa,a,b);for(var c=0;c<b.length;c++){var d=b[c],e=null,f,h=a.Fb().$c();if(null===h)f=null;else{f=this.wa;var h=h.m(),k=d.jb(h);f=f.D.get(h).get(k);f=0==f.length?null:f[0]}null!=f?(e=this.U.get(f),d.oa=f,Wc(this.wa,a,[[e,d]],0)):Vc(this.wa,a,[d],0);cd(this,a,[e,d])}};
m.remove=function(a,b){bd(this,a);ed(this,a,b);Xc(this.wa,a,b,0);for(var c=0;c<b.length;c++)cd(this,a,[b[c],null])};function dd(a,b,c){b=Rc(a.g.info(),b.getName(),1);if(null!==b){var d=Uc(a.wa,c,b);d.keys().forEach(function(a){d.get(a).forEach(function(b){var c=this.g.table(b.Ld.Ae),d=this.U.get(a),n=c.fb(d.Fa());n.o[b.Ld.tb]=b.og.o[b.Ld.Gc];cd(this,c,[d,n])},this)},a)}}
function ed(a,b,c){if(null!==Rc(a.g.info(),b.getName(),1)){b=Yc(a.wa,b,c);var d=b.kf;b.me.forEach(function(a){var b=this.g.table(a);a=d.get(a).map(function(a){return this.U.get(a)},this);Xc(this.wa,b,a,0);a.forEach(function(a){cd(this,b,[a,null])},this)},a)}}function ac(a){a.sb.forEach(function(a){var c=this.aa.get(a.getName());Vc(this.wa,c,z(a.va),1);Xc(this.wa,c,z(a.ya),1);Wc(this.wa,c,z(a.ma),1)},a)}m.ia=aa();m.Jb=function(){var a=z(this.sb).map(function(a){return $c(a)});this.ed.update(a)};
function bd(a,b){if(!a.aa.has(b.getName()))throw new D(106,b.getName());};function fd(a,b,c,d){this.c=a;this.w=b;this.ea=this.c==E?!1:c;this.la=this.w==E?!1:d}var E=new (aa());fd.prototype.toString=function(){return(this.ea?"(":"[")+(this.c==E?"unbound":this.c)+", "+(this.w==E?"unbound":this.w)+(this.la?")":"]")};function gd(a){if(hd(a))return[];var b=null,c=null;a.c==E||(b=new fd(E,a.c,!1,!a.ea));a.w==E||(c=new fd(a.w,E,!a.la,!1));return[b,c].filter(function(a){return null!==a})}fd.prototype.reverse=function(){return new fd(this.w,this.c,this.la,this.ea)};
function id(a,b){var c=jd(a.c,b.c,!0,a.ea,b.ea);if(0==c)return!0;var d=-1==c?a:b,c=1==c?a:b;return d.w==E||d.w>c.c||d.w==c.c&&!d.la&&!c.ea}function kd(){return new fd(E,E,!1,!1)}function hd(a){return a.c==E&&a.w==E}function ld(a){return a.c==a.w&&a.c!=E&&!a.ea&&!a.la}fd.prototype.contains=function(a){var b=this.w==E||a<this.w||a==this.w&&!this.la;return(this.c==E||a>this.c||a==this.c&&!this.ea)&&b};
function jd(a,b,c,d,e){function f(a){return c?a:1==a?-1:1}d=d||!1;e=e||!1;return a==E?b==E?(d?!e:e)?d?f(1):f(-1):0:f(-1):b==E?f(1):a<b?-1:a==b?(d?!e:e)?d?f(1):f(-1):0:1}function md(a,b){var c=jd(a.c,b.c,!0,a.ea,b.ea);0==c&&(c=jd(a.w,b.w,!1,a.la,b.la));return c};function F(a,b){this.entries=a;this.L=B(b);this.Va=null}function G(a){return C(a.L)}function nd(a){return a.entries.map(function(a){return a.ua.o})}function od(a){return a.entries.map(function(a){return a.ua.id()})}function pd(a,b){return a.Va.get(b.m())}var qd=null;function rd(){null===qd&&(qd=new F([],[]));return qd}
function sd(a){if(0==a.length)return rd();for(var b=a.reduce(function(a,b){return a+b.entries.length},0),c=Array(b),d=0,b=a.map(function(a){var b=y();a.entries.forEach(function(a){c[d++]=a;b.set(a.id,a)});return b}),e=y(),f=0;f<c.length;f++)b.every(function(a){return a.has(c[f].id)})&&e.set(c[f].id,c[f]);return new F(z(e),C(a[0].L))}function td(a){if(0==a.length)return rd();var b=y();a.forEach(function(a){a.entries.forEach(function(a){b.set(a.id,a)})});return new F(z(b),C(a[0].L))}
function ud(a,b){var c=1<b.length,d=a.map(function(a){return new vd(a,c)});return new F(d,b)}function vd(a,b){this.ua=a;this.id=wd++;this.Rd=b}var wd=0;function H(a,b){var c=b.Wa();return null!==c&&a.ua.o.hasOwnProperty(c)?a.ua.o[c]:a.Rd?a.ua.o[I(b.H())][b.getName()]:a.ua.o[b.getName()]}function xd(a,b,c){var d=b.Wa();if(null!=d)a.ua.o[d]=c;else if(a.Rd){var d=I(b.H()),e=a.ua.o[d];null==e&&(e={},a.ua.o[d]=e);e[b.getName()]=c}else a.ua.o[b.getName()]=c}
function yd(a,b,c,d){function e(a,b){if(a.Rd){var c=a.ua.o,d;for(d in c)f[d]=c[d]}else f[b[0]]=a.ua.o}var f={};e(a,b);e(c,d);a=new Sb(-1,f);return new vd(a,!0)};r("lf.bind",function(a){return new zd(a)});function zd(a){this.ga=a}r("lf.Binder",zd);zd.prototype.za=g("ga");function Ad(){this.Re=Bd();var a=Cd();this.gc=y();this.gc.set(1,Dd());this.gc.set(2,Ed());this.gc.set(4,a);this.gc.set(3,a);this.gc.set(5,Fd())}Ad.xc=function(){return Ad.Ne?Ad.Ne:Ad.Ne=new Ad};function Gd(a,b,c){return(a.gc.get(b)||null).get(c)||null}function Bd(){function a(a){return a}var b=y();b.set(1,function(a){return null===a?null:a?1:0});b.set(2,function(a){return null===a?null:a.getTime()});b.set(3,a);b.set(4,a);b.set(5,a);return b}
function Dd(){var a=y();a.set("eq",function(a,c){return a==c});a.set("neq",function(a,c){return a!=c});return a}
function Cd(){var a=Dd();a.set("between",function(a,c){return null===a||null===c[0]||null===c[1]?!1:a>=c[0]&&a<=c[1]});a.set("gte",function(a,c){return null===a||null===c?!1:a>=c});a.set("gt",function(a,c){return null===a||null===c?!1:a>c});a.set("in",function(a,c){return-1!=c.indexOf(a)});a.set("lte",function(a,c){return null===a||null===c?!1:a<=c});a.set("lt",function(a,c){return null===a||null===c?!1:a<c});return a}
function Fd(){var a=Cd();a.set("match",function(a,c){return null===a||null===c?!1:(new RegExp(c)).test(a)});return a}
function Ed(){var a=y();a.set("between",function(a,c){return null===a||null===c[0]||null===c[1]?!1:a.getTime()>=c[0].getTime()&&a.getTime()<=c[1].getTime()});a.set("eq",function(a,c){return(null===a?-1:a.getTime())==(null===c?-1:c.getTime())});a.set("gte",function(a,c){return null===a||null===c?!1:a.getTime()>=c.getTime()});a.set("gt",function(a,c){return null===a||null===c?!1:a.getTime()>c.getTime()});a.set("in",function(a,c){return c.some(function(c){return c.getTime()==a.getTime()})});a.set("lte",
function(a,c){return null===a||null===c?!1:a.getTime()<=c.getTime()});a.set("lt",function(a,c){return null===a||null===c?!1:a.getTime()<c.getTime()});a.set("neq",function(a,c){return(null===a?-1:a.getTime())!=(null===c?-1:c.getTime())});return a};function J(){this.h=this.C=null}var Hd=[];J.prototype.getParent=g("C");J.prototype.hb=function(){for(var a=this;!fa(a.getParent());)a=a.getParent();return a};function Id(a){for(var b=0;!fa(a.getParent());)b++,a=a.getParent();return b}function K(a){return a.h||Hd}function Jd(a,b){return K(a)[b]||null}function Kd(a,b,c){b.C=a;null===a.h?a.h=[b]:a.h.splice(c,0,b)}function L(a,b){b.C=a;null===a.h?a.h=[b]:a.h.push(b)}
function Ld(a,b){var c=a.h&&a.h[b];return c?(c.C=null,a.h.splice(b,1),0==a.h.length&&(a.h=null),c):null}J.prototype.removeChild=function(a){return Ld(this,K(this).indexOf(a))};function Md(a,b,c){Jd(a,c).C=null;b.C=a;a.h[c]=b}function Nd(a,b,c){!1!==b.call(c,a)&&K(a).forEach(function(a){Nd(a,b,c)})};function Od(){J.call(this);this.oa=Pd++}t(Od,J);var Pd=0;Od.prototype.Y=g("oa");function Qd(a,b,c){Od.call(this);this.M=a;this.value=b;this.F=c;this.tc=Gd(Ad.xc(),this.M.G(),this.F);this.Ya=!1;this.cc=b}t(Qd,Od);m=Qd.prototype;m.Mb=function(){var a=new Qd(this.M,this.value,this.F);a.cc=this.cc;a.rd(this.Ya);var b=this.Y();a.oa=b;return a};m.gb=function(a){return null!=a?(a.push(this.M),a):[this.M]};m.rd=ca("Ya");function Rd(a){var b=!1;a.value instanceof zd||(b="array"==ea(a.value)?!a.value.some(function(a){return a instanceof zd}):!0);if(!b)throw new D(501);}
m.eval=function(a){Rd(this);if("in"==this.F)return Sd(this,a);var b=a.entries.filter(function(a){return this.tc(H(a,this.M),this.value)!=this.Ya},this);return new F(b,G(a))};m.bind=function(a){if(this.cc instanceof zd){var b=this.cc.za();if(a.length<=b)throw new D(510);this.value=a[b]}else"array"==ea(this.cc)&&(this.value=this.cc.map(function(b){if(b instanceof zd){var d=b.za();if(a.length<=d)throw new D(510);return a[b.za()]}return b}))};
function Sd(a,b){var c=B(a.value),d=function(a){return null===a?!1:c.has(a)!=this.Ya}.bind(a),e=b.entries.filter(function(a){return d(H(a,this.M))},a);return new F(e,G(b))}m.toString=function(){return"value_pred("+this.M.m()+" "+this.F+(this.Ya?"(complement)":"")+" "+this.value+")"};function Td(a,b){return 2==a.M.G()?b.getTime():b};function Ud(a){this.ba=a;this.Uc=this.Ca=null}function Vd(a,b){null===a.Ca&&null!=a.s&&(a.Ca=Wd(a.s));return a.Ca.get(b)||null}function Wd(a){var b=y();Nd(a,function(a){b.set(a.Y(),a)});return b}function Xd(a,b){b.s&&(a.s=b.s.Mb());a.Uc=b}Ud.prototype.bind=function(){return this};function Yd(a,b){var c=a.s;null!=c&&Nd(c,function(a){a instanceof Qd&&a.bind(b)})};function Zd(a){Ud.call(this,a)}t(Zd,Ud);function $d(a){var b="";a.forEach(function(c,d){b+=c.M.m()+" ";b+=1==c.lb?"ASC":"DESC";d<a.length-1&&(b+=", ")});return b}Zd.prototype.ca=function(){return B(this.c)};Zd.prototype.clone=function(){var a=new Zd(this.ba);Xd(a,this);this.f&&(a.f=this.f.slice());this.c&&(a.c=this.c.slice());a.W=this.W;a.K=this.K;this.N&&(a.N=this.N.slice());this.ja&&(a.ja=this.ja.slice());this.Rb&&(a.Rb=this.Rb);this.Yb&&(a.Yb=this.Yb);a.Bb=this.Bb;return a};
Zd.prototype.bind=function(a){Zd.ab.bind.call(this,a);null!=this.Rb&&(this.W=a[this.Rb.za()]);null!=this.Yb&&(this.K=a[this.Yb.za()]);Yd(this,a);return this};function ae(a,b){this.Da=a;this.aa=b}ae.prototype.hb=g("Da");ae.prototype.ca=g("aa");function be(a){var b=B();a.forEach(function(a){a.ca().forEach(b.add.bind(b))});return b};function ce(a,b){this.global=a;this.Ka=a.l(gc);this.od=b.map(function(a){return a.context});this.af=b.map(function(a){return a.ce});this.Fd=be(this.af);this.pe=ee(this);this.$a=x()}function ee(a){return a.od.some(function(a){return!(a instanceof Zd)})?1:0}m=ce.prototype;
m.exec=function(){function a(){var f=d.shift();if(f){var h=e[c.length];return f.hb().exec(b,h).then(function(b){c.push(b[0]);return a()})}return w()}var b=0==this.pe?void 0:new ad(this.global,this.Fd),c=[],d=this.af.slice(),e=this.od;return a().then(function(){return this.Ka.Db(this.pe,C(this.Fd),b).ia()}.bind(this)).then(function(){this.$d(c);return c}.bind(this),function(a){null!=b&&b.Jb();throw a;})};m.G=g("pe");m.ca=g("Fd");m.Nb=g("$a");m.Y=function(){return ka(this)};m.$d=aa();function fe(a,b){ce.call(this,a,b);this.Ib=a.l(lc)}t(fe,ce);fe.prototype.getPriority=l(0);fe.prototype.$d=function(a){this.od.forEach(function(b,c){ge(this.Ib,b,a[c])},this)};function he(a,b){this.i=a;this.Ib=a.l(lc);this.Ea=a.l(kc);this.ed=new xc(a);this.sb=b;var c=a.l(mc),d=this.sb.map(function(a){return c.table(a.getName())});this.aa=B(d);this.$a=x()}m=he.prototype;m.exec=function(){this.ed.update(this.sb);this.Jc();return w()};m.G=l(1);m.ca=g("aa");m.Nb=g("$a");m.Y=function(){return ka(this)};m.getPriority=l(1);m.Jc=function(){var a=ie(this.Ib,this.aa);0!=a.length&&(a=new fe(this.i,a),je(this.Ea,a))};function ke(a){this.i=a;this.Ka=a.l(gc);this.Ea=a.l(kc)}ke.prototype.Yd=function(a){a=new he(this.i,a);je(this.Ea,a)};function M(a,b){this.$b=a;this.j=b;this.Sa=y()}r("lf.backstore.FirebaseRawBackStore",M);M.prototype.ad=g("j");M.prototype.bd=function(){throw new D(351);};function le(a,b){var c=x(),d=a;b.length&&(d=a.child(b));d.once("value",function(a){c.resolve(a.val())},function(a){c.reject(a)});return c.da}function me(a,b,c){function d(a){a?e.reject(a):e.resolve()}c=c||!1;var e=x();c?a.set(b,d):a.update(b,d);return e.da}
M.prototype.Ga=function(a){return le(this.j,"@rev/R").then(function(a){this.La=a;return le(this.j,"@table")}.bind(this)).then(function(b){var c=0,d;for(d in b)this.Sa.set(d,b[d]),b[d]>c&&(c=b[d]);a.ra().forEach(function(a){this.Sa.has(a.getName())||(b[a.getName()]=++c)},this);d=this.j.child("@table");return me(d,b)}.bind(this))};
function ne(a,b,c){var d=a.Sa.get(b);return null!=d?function(){var a={},b=x();this.j.orderByChild("T").equalTo(d).once("value",function(d){d.forEach(function(b){var d=c(b.val());a[parseInt(b.key(),10)]=d});b.resolve(a)});return b.da}.call(a).then(function(a){a["@rev"]={R:++this.La};return me(this.j,a)}.bind(a)):w()}M.prototype.rc=function(a){return ne(this,a,l(null)).then(function(){this.Sa.delete(a);return me(this.j.child("@table/"+a),null,!0)}.bind(this))};M.prototype.dropTable=M.prototype.rc;
M.prototype.oc=function(a,b,c){return ne(this,a,function(a){var e=a.P;e[b]=c;return{R:this.La+1,T:a.T,P:e}}.bind(this))};M.prototype.addTableColumn=M.prototype.oc;M.prototype.sc=function(a,b){return ne(this,a,function(a){var d=a.P;delete d[b];return{R:this.La+1,T:a.T,P:d}}.bind(this))};M.prototype.dropTableColumn=M.prototype.sc;M.prototype.Ic=function(a,b,c){return ne(this,a,function(a){var e=a.P;e[c]=e[b];delete e[b];return{R:this.La+1,T:a.T,P:e}}.bind(this))};M.prototype.renameTableColumn=M.prototype.Ic;
M.prototype.vb=function(){throw new D(351);};M.prototype.createRow=M.prototype.vb;M.prototype.Ac=g("$b");M.prototype.getVersion=M.prototype.Ac;M.prototype.ec=function(a){var b=x();a=this.Sa.get(a);this.j.orderByChild("T").equalTo(a).once("value",function(a){var d=[];a.forEach(function(a){d.push(a.val().P)});b.resolve(d)});return b.da};M.prototype.dump=function(){var a={},b=Rb(this.Sa).map(function(b){return this.ec(b).then(function(d){a[b]=d})}.bind(this));return db(b).then(function(){return a})};
M.prototype.dump=M.prototype.dump;function oe(a,b,c){Zb.call(this,b,c);this.j=a}t(oe,Zb);oe.prototype.H=function(a){return this.j.yc(a)};
oe.prototype.qc=function(){if(0==this.oe)return this.O.resolve(),this.O.da;var a=this.Oa.sb;if(0==a.size)this.O.resolve();else{var b=this.j.La+1;this.j.La=b;var c={"@rev":{R:b}};a.forEach(function(a,e){var f=this.j.Sa.get(e);a.va.forEach(function(a,d){c[d]={R:b,T:f,P:a.o}});a.ma.forEach(function(a,d){c[d]={R:b,T:f,P:a[1].o}});a.ya.forEach(function(a,b){c[b]=null})},this);this.j.j.update(c,function(c){null===c?this.O.resolve():(this.j.La=b-1,c=z(a).map(function(a){return pe(this.j,a.getName())},this),
db(c).then(this.O.reject.bind(this.O),this.O.reject.bind(this.O)))}.bind(this))}return this.O.da};function qe(){this.xa=y()}function re(a,b){if(0==b.length)return z(a.xa);var c=[];b.forEach(function(a){a=this.xa.get(a)||null;null===a||c.push(a)},a);return c}qe.prototype.getData=g("xa");qe.prototype.get=function(a){return w(re(this,a))};function se(a,b){b.forEach(function(a){this.xa.set(a.id(),a)},a)}qe.prototype.put=function(a){se(this,a);return w()};function te(a,b){0==b.length||b.length==a.xa.size?a.xa.clear():b.forEach(function(a){this.xa.delete(a)},a)}
qe.prototype.remove=function(a){te(this,a);return w()};function ue(a){return 0==a.xa.size?0:Rb(a.xa).reduce(function(a,c){return a>c?a:c},0)};function ve(a,b){this.g=a;this.xf=b;this.Hc=y();this.La=-1;this.L=y();this.Sa=y();this.Cd=null}m=ve.prototype;
m.Ga=function(a){this.j=this.xf.child(this.g.name());var b=a||function(){return w()};return le(this.j,"@db/version").then(function(a){return null===a?me(this.j,we(this),!0).then(function(){var a=new M(0,this.j);return b(a)}.bind(this)):a==this.g.version()?le(this.j,"@rev/R").then(function(a){this.La=a;return le(this.j,"@table")}.bind(this)).then(function(a){for(var b in a)this.Sa.set(b,a[b]);a=this.g.ra().map(function(a){return pe(this,a.getName())},this);return db(a)}.bind(this)).then(function(){xe(this);
ye(this);return w()}.bind(this)):this.ae(a,b).then(function(){return this.Ga()}.bind(this))}.bind(this))};m.ae=function(a,b){var c=new M(a,this.j);return c.Ga(this.g).then(function(){return w()}.bind(this)).then(function(){return b(c)}).then(function(){var a=this.j.child("@db");return me(a,{version:this.g.version()},!0)}.bind(this))};
function ye(a){a.j.off();a.j.on("child_removed",a.lg.bind(a));a.Dd&&(a.Dd.off(),a.Hc.clear());a.Dd=a.j.orderByChild("R").startAt(a.La+1);a.Dd.on("value",a.Yd.bind(a))}function xe(a){Tb=z(a.L).map(function(a){return ue(a)}).reduce(function(a,c){return a>c?a:c},0)+1}m.lg=function(a){var b=a.val(),c=this.Hc.get(b.T)||null;null===c&&(c=B(),this.Hc.set(b.T,c));c.add(parseInt(a.key(),10))};
m.Yd=function(a){var b=a.child("@rev/R").val();null!=b&&b!=this.La&&(this.La=b,a=ze(this,a),a.forEach(function(a){var b=this.L.get(a.getName()),e=Rb(a.ya);0<e.length&&te(b,e);var f=z(a.va);a.ma.forEach(function(a){f.push(a[1])});se(b,f)},this),0<a.length&&this.Dc(a),ye(this))};
function ze(a,b){var c=B(),d=y();a.Sa.forEach(function(a,b){var h=this.L.get(b),k=new Zc(b);if(this.Hc.has(a)){var n=C(this.Hc.get(a));n.forEach(function(a){c.add(a)});re(h,n).forEach(function(a){k.delete(a)})}d.set(a,k)}.bind(a));b.forEach(function(a){if("@rev"!=a.key()){var b=parseInt(a.key(),10);if(!c.has(b)){var h=a.val();a=d.get(h.T);var k=this.L.get(a.getName()),h=this.g.table(a.getName()).fb({id:b,value:h.P});k.getData().has(b)?a.modify([re(k,[b])[0],h]):a.add(h)}}}.bind(a));return z(d).filter(function(a){return!a.$f()})}
function pe(a,b){var c=x(),d=a.Sa.get(b),e=a.g.table(b);a.j.orderByChild("T").equalTo(d).once("value",function(a){var d=new qe,k=[];a.forEach(function(a){k.push(e.fb({id:parseInt(a.key(),10),value:a.val().P}))});se(d,k);this.L.set(b,d);c.resolve()}.bind(a));return c.da}function we(a){var b={};b["@db"]={version:a.g.version()};b["@rev"]={R:1};a.La=1;b["@table"]={};a.g.ra().forEach(function(a,d){var e=a.getName();b["@table"][e]=d;this.L.set(e,new qe);this.Sa.set(e,d)},a);return b}
m.Db=function(a,b,c){return new oe(this,a,c)};m.yc=function(a){var b=this.L.get(a)||null;if(null!==b)return b;throw new D(101,a);};m.close=aa();m.subscribe=ca("Cd");m.Dc=function(a){null!=this.Cd&&this.Cd(a)};function N(a,b,c,d){this.j=b;this.Ua=c;this.$b=a;this.Sc=d}r("lf.backstore.IndexedDBRawBackStore",N);N.prototype.ad=g("j");N.prototype.getRawDBInstance=N.prototype.ad;N.prototype.bd=g("Ua");N.prototype.getRawTransaction=N.prototype.bd;N.prototype.rc=function(a){return new v(function(b,c){try{this.j.deleteObjectStore(a)}catch(d){c(d);return}b()},this)};N.prototype.dropTable=N.prototype.rc;
function Ae(a,b,c,d){return new v(function(a,f){var h;try{var k=this.Ua.objectStore(b);h=k.openCursor()}catch(n){f(n);return}h.onsuccess=function(){var b=h.result;b?(c(b),b.continue()):(d(k),a())};h.onerror=f},a)}function Be(a){var b=null;return b=a instanceof ArrayBuffer?Xb(a):a instanceof Date?a.getTime():a}
function Ce(a,b,c){function d(a){var b=sc(a.value),d=b.o,e;for(e in d){var A=Ub(d[e]);c(A);d[e]=A.Fa()}a.update(b.Fa())}function e(a){var b=Ub(a.value);c(b);a.update(b.Fa())}return Ae(a,b,a.Sc?d:e,aa())}N.prototype.oc=function(a,b,c){var d=Be(c);return Ce(this,a,function(a){a.o[b]=d})};N.prototype.addTableColumn=N.prototype.oc;N.prototype.sc=function(a,b){return Ce(this,a,function(a){delete a.o[b]})};N.prototype.dropTableColumn=N.prototype.sc;
N.prototype.Ic=function(a,b,c){return Ce(this,a,function(a){a.o[c]=a.o[b];delete a.o[b]})};N.prototype.renameTableColumn=N.prototype.Ic;function De(a,b){var c=[];return new v(function(a,e){var f;try{f=this.Ua.objectStore(b).openCursor()}catch(h){e(h);return}f.onsuccess=function(){var b=f.result;if(b){if(this.Sc){var e;e=sc(b.value).o;for(var n in e)c.push(e[n])}else c.push(b.value);b.continue()}else a(c)}.bind(this);f.onerror=e},a)}N.prototype.vb=function(a){var b={},c;for(c in a)b[c]=Be(a[c]);return Vb(b)};
N.prototype.createRow=N.prototype.vb;N.prototype.Ac=g("$b");N.prototype.getVersion=N.prototype.Ac;N.prototype.dump=function(){for(var a=this.j.objectStoreNames,b=[],c=0;c<a.length;++c){var d=a.item(c);b.push(this.ec(d))}return db(b).then(function(b){var c={};b.forEach(function(b,d){c[a.item(d)]=b});return c})};N.prototype.dump=N.prototype.dump;N.prototype.ec=function(a){return De(this,a).then(function(a){return a.map(function(a){return a.value})})};function Ee(a,b){this.X=a;this.Eb=b}Ee.prototype.get=function(a){if(0==a.length)return null!=this.X.getAll?Fe(this):Ge(this);a=a.map(function(a){return new v(function(c,d){var e;try{e=this.X.get(a)}catch(f){d(f);return}e.onerror=d;e.onsuccess=function(a){c(this.Eb(a.target.result))}.bind(this)},this)},this);return db(a)};
function Ge(a){return new v(function(a,c){var d=[],e;try{e=this.X.openCursor()}catch(f){c(f);return}e.onerror=c;e.onsuccess=function(){var c=e.result;c?(d.push(this.Eb(c.value)),c.continue()):a(d)}.bind(this)},a)}function Fe(a){return new v(function(a,c){var d;try{d=this.X.getAll()}catch(e){c(e);return}d.onerror=c;d.onsuccess=function(){var c=d.result.map(function(a){return this.Eb(a)},this);a(c)}.bind(this)},a)}
Ee.prototype.Tb=function(a){return new v(function(b,c){var d;try{d=a()}catch(e){c(e);return}d.onsuccess=b;d.onerror=c},this)};Ee.prototype.put=function(a){if(0==a.length)return w();a=a.map(function(a){return this.Tb(function(){return this.X.put(a.Fa())}.bind(this))},this);return db(a)};
Ee.prototype.remove=function(a){return new v(function(b,c){var d=this.X.count();d.onsuccess=function(d){if(0==a.length||d.target.result==a.length)return this.Tb(function(){return this.X.clear()}.bind(this)).then(b,c);d=a.map(function(a){return this.Tb(function(){return this.X.delete(a)}.bind(this))},this);db(d).then(b,c)}.bind(this);d.onerror=c},this)};function He(a,b,c,d,e){Zb.call(this,c,e);this.i=a;this.Ua=b;this.Sc=d;this.Ua.oncomplete=this.O.resolve.bind(this.O);this.Ua.onabort=this.O.reject.bind(this.O)}t(He,Zb);He.prototype.H=function(a,b,c){return this.Sc?(c=null!=c?c:0,a=this.Ua.objectStore(a),new tc(a,b,0==c?qa(vc,this.i):wc)):new Ee(this.Ua.objectStore(a),b)};He.prototype.qc=function(){return this.O.da};function Ie(a,b){this.i=a;this.g=b;this.zd=b.bf().Kf||!1}m=Ie.prototype;
m.Ga=function(a){var b=window.indexedDB||window.mozIndexedDB||window.webkitIndexedDB||window.msIndexedDB;if(null==b)throw new D(352);var c=a||function(){return w()};return new v(function(a,e){var f;try{f=b.open(this.g.name(),this.g.version())}catch(h){e(h);return}f.onerror=e;f.onupgradeneeded=function(a){Je(this,c,a).then(aa(),e)}.bind(this);f.onsuccess=function(b){this.j=b.target.result;this.ie().then(function(b){Tb=b+1;a(this.j)}.bind(this))}.bind(this)},this)};
function Je(a,b,c){var d=c.target.result;c=new N(c.oldVersion,d,c.target.transaction,a.zd);Ke(d);a.g.ra().forEach(qa(a.Ff,d),a);return b(c)}function Ke(a){for(var b=[],c=0;c<a.objectStoreNames.length;++c){var d=a.objectStoreNames.item(c);-1!=d.indexOf(".")&&b.push(d)}b.forEach(function(b){try{a.deleteObjectStore(b)}catch(c){}})}m.Ff=function(a,b){a.objectStoreNames.contains(b.getName())||a.createObjectStore(b.getName(),{keyPath:"id"});b.Cb()&&(b.Aa().forEach(function(b){Le(a,b.m())},this),Le(a,Me(b)))};
function Le(a,b){a.objectStoreNames.contains(b)||a.createObjectStore(b,{keyPath:"id"})}m.Db=function(a,b,c){b=this.j.transaction(Ne(b),0==a?"readonly":"readwrite");return new He(this.i,b,a,this.zd,c)};function Ne(a){var b=B();a.forEach(function(a){b.add(a.getName());a.Cb()&&(a.Aa().forEach(function(a){b.add(a.m())}),b.add(Me(a)))});return C(b)}
m.ie=function(a){function b(){if(0==d.length)return w();var a=d.shift();return c(a).then(b)}function c(b){return new v(function(c,d){var O;try{O=(a||e.transaction([b])).objectStore(b).openCursor(null,"prev")}catch(ba){d(ba);return}O.onsuccess=function(a){(a=a.target.result)&&(f=Math.max(f,h(a)));c(f)};O.onerror=function(){c(f)}})}var d=this.g.ra().map(function(a){return a.getName()}),e=this.j,f=0,h=function(a){return this.zd?(a=sc(a.value),Object.keys(a.o).reduce(function(a,b){return Math.max(a,b)},
0)):a.key}.bind(this);return new v(function(a){b().then(function(){a(f)})})};m.close=function(){this.j.close()};m.yc=function(){throw new D(511);};m.subscribe=aa();m.Dc=aa();function Oe(a,b,c){Zb.call(this,b,c);this.X=a;0==b&&this.O.resolve()}t(Oe,Zb);Oe.prototype.H=function(a){return this.X.yc(a)};Oe.prototype.qc=function(){this.O.resolve();return this.O.da};function Pe(a){this.g=a;this.L=y()}m=Pe.prototype;m.Ga=function(){this.g.ra().forEach(this.Xf,this);return w()};m.yc=function(a){var b=this.L.get(a)||null;if(null===b)throw new D(101,a);return b};m.Db=function(a,b,c){return new Oe(this,a,c)};function Qe(a,b){if(!a.L.has(b)){var c=new qe;a.L.set(b,c)}}m.Xf=function(a){Qe(this,a.getName());a.Cb()&&(a.Aa().forEach(function(a){Qe(this,a.m())},this),Qe(this,Me(a)))};m.close=aa();m.subscribe=aa();m.Dc=aa();function Re(a){Pe.call(this,a);this.kd=null}t(Re,Pe);Re.prototype.subscribe=function(a){null===this.kd&&(this.kd=a)};Re.prototype.Dc=function(a){null===this.kd||this.kd(a)};function Se(a,b,c){this.Ua=a;this.u=b;this.Eb=c}Se.prototype.get=function(a){var b=this.Eb;return Te(this.Ua,"SELECT id, value FROM "+this.u+" "+(0==a.length?"":"WHERE id IN ("+a.join(",")+")"),[],function(a){for(var d=a.rows.length,e=Array(d),f=0;f<d;++f)e[f]=b({id:a.rows.item(f).id,value:JSON.parse(a.rows.item(f).value)});return e})};
Se.prototype.put=function(a){if(0==a.length)return w();var b="INSERT OR REPLACE INTO "+this.u+"(id, value) VALUES (?, ?)";a.forEach(function(a){Te(this.Ua,b,[a.id(),JSON.stringify(a.o)])},this);return w()};Se.prototype.remove=function(a){Te(this.Ua,"DELETE FROM "+this.u+" "+(0==a.length?"":"WHERE id IN ("+a.join(",")+")"),[]);return w()};function Ue(a,b,c){Zb.call(this,b,c);this.j=a;this.L=y();this.Gd=[]}t(Ue,Zb);function Ve(a){return a.replace(".","__d__").replace("#","__s__")}Ue.prototype.H=function(a,b){var c=this.L.get(a)||null;null===c&&(c=new Se(this,Ve(a),b),this.L.set(a,c));return c};function Te(a,b,c,d){var e=x();a.Gd.push({Ag:b,pg:c,transform:d,O:e});return e.da}
Ue.prototype.qc=function(){var a=null,b=this.O.reject.bind(this.O),c=function(a,b){this.O.reject(b)}.bind(this),d=[],e=function(b,h){if(null!==a){var k=h;null!=a.transform&&null!=h&&(k=a.transform(h));d.push(k);a.O.resolve(k)}0<this.Gd.length?(a=k=this.Gd.shift(),b.executeSql(k.Ag,k.pg,e,c)):this.O.resolve(d)}.bind(this);0==this.oe?this.j.readTransaction(e,b):this.j.transaction(e,b);return this.O.da};function P(a,b,c){this.j=c;this.i=a;this.$b=b}r("lf.backstore.WebSqlRawBackStore",P);P.prototype.ad=g("j");P.prototype.getRawDBInstance=P.prototype.ad;P.prototype.bd=function(){throw new D(356);};P.prototype.getRawTransaction=P.prototype.bd;function We(a){return new Ue(a.j,1,new ad(a.i,B()))}P.prototype.rc=function(a){var b=We(this);Te(b,"DROP TABLE "+a,[]);return b.ia()};P.prototype.dropTable=P.prototype.rc;
P.prototype.ec=function(a){var b=We(this);Te(b,"SELECT id, value FROM "+a,[]);return b.ia().then(function(a){for(var b=a[0].rows.length,e=Array(b),f=0;f<b;++f)e[f]={id:a[0].rows.item(f).id,value:JSON.parse(a[0].rows.item(f).value)};return w(e)})};function Xe(a,b,c){var d=We(a),e="UPDATE "+b+" SET value=? WHERE id=?";return a.ec(b).then(function(a){a.forEach(function(a){a=c(a);Te(d,e,[JSON.stringify(a.value),a.id])});return d.ia()})}
P.prototype.oc=function(a,b,c){var d=Be(c);return Xe(this,a,function(a){a.value[b]=d;return a})};P.prototype.addTableColumn=P.prototype.oc;P.prototype.sc=function(a,b){return Xe(this,a,function(a){delete a.value[b];return a})};P.prototype.dropTableColumn=P.prototype.sc;P.prototype.Ic=function(a,b,c){return Xe(this,a,function(a){a.value[c]=a.value[b];delete a.value[b];return a})};P.prototype.renameTableColumn=P.prototype.Ic;P.prototype.vb=function(a){var b={},c;for(c in a)b[c]=Be(a[c]);return Vb(b)};
P.prototype.createRow=P.prototype.vb;P.prototype.Ac=g("$b");P.prototype.getVersion=P.prototype.Ac;function Ye(a){Te(a,'SELECT tbl_name FROM sqlite_master WHERE type="table"',[],function(a){for(var c=Array(a.rows.length),d=0;d<c.length;++d)c[d]=a.rows.item(d).tbl_name;return c})}
P.prototype.dump=function(){var a=x(),b=We(this);Ye(b);var c={};b.ia().then(function(b){b=b[0].filter(function(a){return"__lf_ver"!=a&&"__WebKitDatabaseInfoTable__"!=a}).map(function(a){return this.ec(a).then(function(b){c[a]=b})},this);db(b).then(function(){a.resolve(c)})}.bind(this));return a.da};P.prototype.dump=P.prototype.dump;function Ze(a,b,c){this.i=a;this.g=b;this.zg=c||4194304}m=Ze.prototype;m.Ga=function(a){if(null==window.openDatabase)throw new D(353);var b=a||function(){return w()};return new v(function(a,d){try{var e=window.openDatabase(this.g.name(),"",this.g.name(),this.zg);if(null!=e)this.j=e,$e(this,b).then(a,d);else throw new D(354);}catch(f){d(f)}},this)};
function $e(a,b){var c=x(),d=new Ue(a.j,1,new ad(a.i,B()));Te(d,"CREATE TABLE IF NOT EXISTS __lf_ver(id INTEGER PRIMARY KEY, v INTEGER)",[]);Te(d,"SELECT v FROM __lf_ver WHERE id = 0",[]);d.ia().then(function(a){var d=0;a[1].rows.length&&(d=a[1].rows.item(0).v);d<this.g.version()?this.ae(b,d).then(c.resolve.bind(c)):d>this.g.version()?c.reject(new D(108)):c.resolve()}.bind(a));return c.da}m.Db=function(a,b,c){if(null!=this.j)return new Ue(this.j,a,c);throw new D(2);};m.close=aa();
m.yc=function(){throw new D(512);};m.subscribe=function(){throw new D(355);};m.Dc=function(){throw new D(355);};m.ae=function(a,b){var c=x();af(this).then(function(){a(new P(this.i,b,this.j)).then(function(){return this.ie()}.bind(this)).then(c.resolve.bind(c))}.bind(this),c.reject.bind(c));return c.da};
function af(a){var b=a.g.ra(),c=new Ue(a.j,1,new ad(a.i,B())),d=new Ue(a.j,1,new ad(a.i,B()));Te(c,"INSERT OR REPLACE INTO __lf_ver VALUES (0, ?)",[a.g.version()]);Ye(c);return c.ia().then(function(a){var c=a[1];c.filter(function(a){return-1!=a.indexOf("__d__")}).forEach(function(a){Te(d,"DROP TABLE "+a,[])});var h=[],k=[],n=[];b.map(function(a){-1==c.indexOf(a.getName())&&h.push(a.getName());a.Cb&&(a.Aa().forEach(function(a){a=Ve(a.m());h.push(a);k.push(a)}),a=Ve(Me(a)),h.push(a),n.push(a))});h.forEach(function(a){Te(d,
"CREATE TABLE "+a+"(id INTEGER PRIMARY KEY, value TEXT)",[])});return d.ia()})}m.ie=function(){var a=0,b=x(),c=function(b){var c=new Ue(this.j,0);Te(c,"SELECT MAX(id) FROM "+b,[]);return c.ia().then(function(b){b=b[0].rows.item(0)[0];a=Math.max(b,a)})}.bind(this),d=this.g.ra().map(function(a){return c(a.getName())});db(d).then(function(){b.resolve(a)},function(a){b.reject(a)});return b.da};function bf(a){this.Z=y();this.Zb=y();a.ra().forEach(function(a){this.Zb.set(a.getName(),B())},this)}m=bf.prototype;m.set=function(a,b){this.Z.set(b.id(),b);this.Zb.get(a).add(b.id())};m.Wb=function(a,b){var c=this.Zb.get(a);b.forEach(function(a){this.Z.set(a.id(),a);c.add(a.id())},this)};m.get=function(a){return this.Z.get(a)||null};function cf(a,b){return b.map(function(a){return this.get(a)},a)}
m.Xa=function(a,b,c){var d=[],e=Math.min(b,c),f=Math.max(b,c);a=this.Zb.get(a);if(a.size<f-e)a.forEach(function(a){a>=e&&a<=f&&(a=this.Z.get(a),d.push(a))},this);else for(b=e;b<=f;++b)a.has(b)&&(c=this.Z.get(b),d.push(c));return d};m.remove=function(a,b){this.Z.delete(b);this.Zb.get(a).delete(b)};m.Ig=function(a){return null!=a?this.Zb.get(a).size:this.Z.size};m.clear=function(){this.Z.clear();this.Zb.clear()};function df(a,b,c){var d=0,e=a.length;for(c=c||ef;d<e;){var f=d+e>>1;0>c(a[f],b)?d=f+1:e=f}return d==e&&a[d]==b?d:~d}function ef(a,b){return a-b}function ff(a,b,c){c=df(a,b,c);return 0>c?(a.splice(-(c+1),0,b),!0):!1};function gf(a,b,c,d){a=b?a.reverse():a;if(null==c&&null==d)return a;c=Math.min(q(c)?c:a.length,a.length);if(0==c)return[];d=Math.min(d||0,a.length);return a.slice(d,d+c)};function hf(){this.na=0}hf.prototype.add=function(a,b){this.na+=b};hf.prototype.remove=function(a,b){this.na-=b};hf.prototype.clear=function(){this.na=0};function jf(a,b){a.clear();b.forEach(function(a){this.na+=a.na},a)};function kf(a,b,c,d){this.u=a;this.V=b;this.sf=c;this.qb=new hf;if(d){a=511;a*=a*a;if(d.length>=a)throw new D(6,a);d=mf(this,d);this.qa=d=nf(d)}else this.clear()}var of=[];m=kf.prototype;m.getName=g("u");m.toString=function(){return this.qa.toString()};m.add=function(a,b){this.qa=this.qa.zb(a,b)};m.set=function(a,b){this.qa=this.qa.zb(a,b,!0)};m.remove=function(a,b){this.qa=this.qa.remove(a,b)};m.get=function(a){return this.qa.get(a)};
m.Wc=function(a){if(null==a)return this.Ma().na;if(a instanceof fd){if(hd(a))return this.Ma().na;if(ld(a))return this.get(a.c).length}return this.Xa([a]).length};m.Ma=g("qb");m.Nd=function(a,b,c,d){c=Array(a);this.qa.fill({offset:b?this.qb.na-a-d:d,count:a,le:0},c);return b?c.reverse():c};
m.Xa=function(a,b,c,d){var e=pf(this.qa).b[0];if(!q(e)||0==c)return of;b=b||!1;c=null!=c?Math.min(c,this.qb.na):this.qb.na;d=d||0;var f=Math.min(Math.max(this.qb.na-d,0),c);if(0==f)return of;if(!q(a)||1==a.length&&a[0]instanceof fd&&hd(a[0]))return this.Nd(f,b,c,d);a=this.V.nf(a);var h=Array(b?this.qb.na:f),k={count:0,W:h.length,reverse:b,K:d},n=1<e.length;a.forEach(function(a){for(var b=this.V.pd(a),b=this.V.Qd(a)?e:b[0],b=qf(this.qa,b),c=0;null!=b&&k.count<k.W;){if(n){for(var d=b,f=a,Wb=k,wb=h,
Pc=d.A.Lb(),de=-1,Ia=0;Ia<d.b.length;++Ia)if(Pc.Ab(d.b[Ia],f)){de=Ia;break}if(-1!=de)for(Ia=de;Ia<d.b.length&&Wb.count<Wb.W;++Ia)Pc.Ab(d.b[Ia],f)&&rf(d,Wb,wb,Ia)}else b.Xa(a,k,h);0!=k.K||b.gd(a)?c=0:c++;b=2==c?null:b.next()}},this);h.length>k.count&&h.splice(k.count,h.length-k.count);return b?gf(h,b,c,d):h};m.clear=function(){this.qa=sf(this);this.qb.clear()};m.eb=function(a){return this.qa.eb(a)};m.min=function(){return this.Hb(this.V.min.bind(this.V))};m.max=function(){return this.Hb(this.V.max.bind(this.V))};
function tf(a,b,c){if(!a.V.Hd(b.b[c]))if(1<b.b[c].length){if(null===b.b[c][0])return null}else return null;return[b.b[c],a.sf?[b.B[c]]:b.B[c]]}m.Hb=function(a){var b;a:{b=pf(this.qa);var c=0;do if(c>=b.b.length)b=b.ta,c=0;else{var d=tf(this,b,c);if(null!==d){b=d;break a}c++}while(null!==b);b=null}a:{c=uf(this.qa);d=c.b.length-1;do if(0>d)c=c.mb,d=0;else{var e=tf(this,c,d);if(null!==e){c=e;break a}d--}while(null!==c);c=null}return null===b||null===c?null:1==a(b[0],c[0])?b:c};m.Ia=g("sf");m.Lb=g("V");
m.Ud=function(a,b){return null!=a?-1==this.V.compare(a,b):!1};m.Na=function(a,b){return null!=a?0==this.V.compare(a,b):!1};m.Fa=function(){for(var a=[],b=pf(this.qa);b;)a.push(new Sb(b.oa,[b.b,b.B])),b=b.ta;return a};function vf(a,b,c,d){a=new kf(b,a,c);d=wf(d,a);a.qa=d;return a}function xf(a,b){this.oa=a;this.A=b;this.ib=0;this.ta=this.mb=this.C=null;this.b=[];this.B=[];this.h=[]}function sf(a){return new xf(Tb++,a)}function Q(a){return 0==a.ib}m=xf.prototype;m.next=g("ta");
function yf(a){function b(a){return null!=a?a.oa.toString():"_"}var c=a.oa+"["+a.b.join("|")+"]",d=a.h.map(function(a){return a.oa}).join("|"),e=a.B.join("/"),f=b(a.mb)+"{",f=Q(a)?f+e:f+d,f=f+"}"+b(a.C);a.ta&&(a=yf(a.ta),c=c+"  "+a[0],f=f+"  "+a[1]);return[c,f]}m.toString=function(){var a="",b=yf(this),a=a+(b[0]+"\n"+b[1]+"\n");this.h.length&&(a+=this.h[0].toString());return a};function pf(a){return Q(a)?a:pf(a.h[0])}function uf(a){return Q(a)?a:uf(a.h[a.h.length-1])}
function zf(a,b){b&&(b.mb=a);a&&(a.ta=b)}function mf(a,b){for(var c=b.length,d=0,e=sf(a),f=e;0<c;){var h=768<=c?511:257<=c&&511>=c?c:257,k=b.slice(d,d+h);e.b=k.map(function(a){return a.key});e.B=k.map(function(a){return a.value});d+=h;c-=h;0<c&&(h=sf(e.A),zf(e,h),e=h)}return f}function Af(a){var b=a[0],c=sf(b.A);c.ib=b.ib+1;c.h=a;for(b=0;b<a.length;++b)a[b].C=c,0<b&&c.b.push(a[b].b[0]);return c}
function nf(a){var b=a,c=[];do c.push(b),b=b.ta;while(b);if(512>=c.length)b=Af(c);else{var d=c.length,e=0,b=sf(a.A);for(b.ib=a.ib+2;0<d;){a=768<=d?511:257<=d&&511>=d?d:257;var f=c.slice(e,e+a),h=Af(f);h.C=b;b.h.length&&(b.b.push(f[0].b[0]),zf(b.h[b.h.length-1],h));b.h.push(h);e+=a;d-=a}}return b}m.get=function(a){var b=Bf(this,a);if(Q(this)){var c=of;this.A.Na(this.b[b],a)&&(c=c.concat(this.B[b]));return c}b=this.A.Na(this.b[b],a)?b+1:b;return this.h[b].get(a)};
m.eb=function(a){var b=Bf(this,a);return this.A.Na(this.b[b],a)?!0:Q(this)?!1:this.h[b].eb(a)};m.remove=function(a,b){Cf(this,a,-1,b);if(null===this.C){var c=this;1==this.h.length&&(c=this.h[0],c.C=null);return c}return this};function Df(a){return Q(a)?a.b[0]:Df(a.h[0])}function Ef(a){a.b=[];for(var b=1;b<a.h.length;++b)a.b.push(Df(a.h[b]))}
function Cf(a,b,c,d){var e=Bf(a,b),f=Q(a);if(!f){var h=a.A.Na(a.b[e],b)?e+1:e;if(Cf(a.h[h],b,h,d))Ef(a);else return!1}else if(!a.A.Na(a.b[e],b))return!1;if(a.b.length>e&&a.A.Na(a.b[e],b)){if(q(d)&&!a.A.Ia()&&f&&(h=a.B[e],d=df(h,d,void 0),0>d?d=!1:(h.splice(d,1),d=!0),d&&a.A.Ma().remove(b,1),a.B[e].length))return!1;a.b.splice(e,1);f&&(f=a.A.Ia()?1:a.B[e].length,a.B.splice(e,1),a.A.Ma().remove(b,f))}if(256>a.b.length&&null!==a.C){a:{b=null;if(a.ta&&256<a.ta.b.length)b=a.ta,e=d=0,f=a.b.length+1;else if(a.mb&&
256<a.mb.b.length)b=a.mb,d=a.mb.b.length-1,e=Q(a)?d:d+1,f=0;else{b=!1;break a}a.b.splice(f,0,b.b[d]);b.b.splice(d,1);d=Q(a)?a.B:a.h;h=null;Q(a)?h=b.B:(h=b.h,h[e].C=a);d.splice(f,0,h[e]);h.splice(e,1);Q(b)||(Ef(b),Ef(a));b=!0}b||Ff(a,c)}return!0}
function Ff(a,b){var c,d,e;a.ta&&511>a.ta.b.length?(c=a.ta,e=d=0):a.mb&&(c=a.mb,d=c.b.length,e=Q(c)?c.B.length:c.h.length);d=[d,0].concat(a.b);Array.prototype.splice.apply(c.b,d);d=null;Q(a)?d=a.B:(d=a.h,d.forEach(function(a){a.C=c}));d=[e,0].concat(d);Array.prototype.splice.apply(Q(c)?c.B:c.h,d);zf(a.mb,a.ta);Q(c)||Ef(c);-1!=b&&(a.C.b.splice(b,1),a.C.h.splice(b,1))}
m.zb=function(a,b,c){var d=Bf(this,a);if(Q(this)){if(this.A.Na(this.b[d],a)){if(c)this.A.Ma().remove(a,this.A.Ia()?1:this.B[d].length),this.B[d]=this.A.Ia()?b:[b];else{if(this.A.Ia())throw new D(201);if(!ff(this.B[d],b))throw new D(109);}this.A.Ma().add(a,1);return this}this.b.splice(d,0,a);this.B.splice(d,0,this.A.Ia()?b:[b]);this.A.Ma().add(a,1);512==this.b.length?(d=sf(this.A),a=sf(this.A),a.ib=1,a.b=[this.b[256]],a.h=[this,d],a.C=this.C,this.C=a,d.b=this.b.splice(256),d.B=this.B.splice(256),d.C=
a,zf(d,this.ta),zf(this,d),d=a):d=this;return d}d=this.A.Na(this.b[d],a)?d+1:d;a=this.h[d].zb(a,b,c);Q(a)||1!=a.b.length||(this.b.splice(d,0,a.b[0]),a.h[1].C=this,a.h[0].C=this,this.h.splice(d,1,a.h[1]),this.h.splice(d,0,a.h[0]));return 512==this.b.length?Gf(this):this};function Gf(a){var b=sf(a.A),c=sf(a.A);b.C=a.C;b.ib=a.ib+1;b.b=[a.b[256]];b.h=[a,c];a.b.splice(256,1);c.C=b;c.ib=a.ib;c.b=a.b.splice(256);c.h=a.h.splice(257);c.h.forEach(function(a){a.C=c});a.C=b;zf(c,a.ta);zf(a,c);return b}
function Bf(a,b){for(var c=0,d=a.b.length;c<d;){var e=c+d>>1;a.A.Ud(a.b[e],b)?c=e+1:d=e}return c}function qf(a,b){if(!Q(a)){var c=Bf(a,b);a.A.Na(a.b[c],b)&&c++;return qf(a.h[c],b)}return a}
m.Xa=function(a,b,c){function d(a){return a[0]?a[1]?0:1:-1}var e=this.A.Lb(),f=0,h=this.b.length-1,k=this.b,n=d(e.ub(k[f],a)),A=d(e.ub(k[h],a));if(1!=n&&(-1!=n||-1!=A)){var O=function(a,b){var c=a+b>>1;return c==a?c+1:c},ba=function(b,c,f){if(b>=c)return 0==f?c:-1;var h=d(e.ub(k[b],a));if(0==h)return b;if(1==h)return-1;h=O(b,c);if(h==c)return 0==f?c:-1;var n=d(e.ub(k[h],a));return 0==n?ba(b,h,n):-1==n?ba(h+1,c,f):ba(b+1,h,n)},vb=function(b,c){if(b>=c)return b;var f=d(e.ub(k[c],a));if(0==f)return c;
if(-1==f)return b;f=O(b,c);if(f==c)return b;var h=d(e.ub(k[f],a));return 0==h?vb(f,c):1==h?vb(b,f-1):-1};0!=n&&(f=ba(f+1,h,A));-1!=f&&(h=vb(f,h),-1!=h&&h>=f&&Hf(this,b,c,f,h+1))}};function rf(a,b,c,d){if(a.A.Ia())!b.reverse&&b.K?b.K--:c[b.count++]=a.B[d];else for(var e=0;e<a.B[d].length&&b.count<c.length;++e)!b.reverse&&b.K?b.K--:c[b.count++]=a.B[d][e]}function Hf(a,b,c,d,e){for(;d<e&&(b.reverse||!(b.count>=b.W));++d)rf(a,b,c,d)}
m.fill=function(a,b){if(Q(this))for(var c=0;c<this.B.length&&0<a.count;++c)if(0<a.offset){if(a.offset-=this.A.Ia()?1:this.B[c].length,0>a.offset)for(var d=this.B[c].length+a.offset;d<this.B[c].length&&0<a.count;++d)b[a.le++]=this.B[c][d],a.count--}else if(this.A.Ia())b[a.le++]=this.B[c],a.count--;else for(d=0;d<this.B[c].length&&0<a.count;++d)b[a.le++]=this.B[c][d],a.count--;else for(c=0;c<this.h.length&&0<a.count;++c)this.h[c].fill(a,b)};
function wf(a,b){for(var c=b.Ma(),d=a.map(function(a){var d=new xf(a.id(),b);d.b=a.o[0];d.B=a.o[1];d.b.forEach(function(a,e){c.add(a,b.Ia()?1:d.B[e].length)});return d}),e=0;e<d.length-1;++e)zf(d[e],d[e+1]);return 1<d.length?nf(d[0]):d[0]}m.gd=function(a){return this.A.Lb().gd(this.b[0],a)};function If(a){this.Vc=0==a?Jf:Kf;this.Wd=0==a?function(a){return null!=a?a.reverse():null}:function(a){return a||null};this.be=0==a?Lf:Nf}function Kf(a,b){return a>b?1:a<b?-1:0}function Jf(a,b){return Kf(b,a)}function Nf(a,b){return md(a,b)}function Lf(a,b){return md(b,a)}m=If.prototype;m.ub=function(a,b){var c=this.Wd(b),d=[c.c==E,c.w==E];if(!d[0]){var e=this.Vc(a,c.c);d[0]=c.ea?1==e:-1!=e}d[1]||(e=this.Vc(a,c.w),d[1]=c.la?-1==e:1!=e);return d};m.compare=function(a,b){return this.Vc(a,b)};
m.min=function(a,b){return a<b?1:a==b?0:-1};m.max=function(a,b){return a>b?1:a==b?0:-1};m.Ab=function(a,b){var c=this.ub(a,b);return c[0]&&c[1]};m.gd=function(a,b){return this.Ab(a,b)};m.nf=function(a){return a.filter(function(a){return null!==a}).sort(function(a,c){return this.be(a,c)}.bind(this))};m.Qd=function(a){return this.Wd(a).c==E};m.pd=function(a){a=this.Wd(a);return[a.c,a.w]};m.Hd=function(a){return null!==a};m.toString=function(){return this.compare==Jf?"SimpleComparator_DESC":"SimpleComparator_ASC"};
function Of(a){If.call(this,a);this.Vc=0==a?Pf:Qf}t(Of,If);function Qf(a,b){return null===a?null===b?0:-1:null===b?1:Kf(a,b)}function Pf(a,b){return Qf(b,a)}Of.prototype.Ab=function(a,b){return null===a?hd(b):Of.ab.Ab.call(this,a,b)};Of.prototype.Hb=function(a,b){return null===a?null===b?0:-1:null===b?1:null};Of.prototype.min=function(a,b){var c=this.Hb(a,b);null===c&&(c=Of.ab.min.call(this,a,b));return c};Of.prototype.max=function(a,b){var c=this.Hb(a,b);null===c&&(c=Of.ab.max.call(this,a,b));return c};function Rf(a){this.sa=a.map(function(a){return new If(a)})}function Sf(a,b,c,d){for(var e=0,f=0;f<a.sa.length&&0==e;++f)e=d(a.sa[f],b[f],c[f]);return e}m=Rf.prototype;m.compare=function(a,b){return Sf(this,a,b,function(a,b,e){return b==E||e==E?0:a.compare(b,e)})};m.min=function(a,b){return Sf(this,a,b,function(a,b,e){return a.min(b,e)})};m.max=function(a,b){return Sf(this,a,b,function(a,b,e){return a.max(b,e)})};
m.ub=function(a,b){for(var c=[!0,!0],d=0;d<this.sa.length&&(c[0]||c[1]);++d){var e=this.sa[d].ub(a[d],b[d]);c[0]=c[0]&&e[0];c[1]=c[1]&&e[1]}return c};m.Ab=function(a,b){for(var c=!0,d=0;d<this.sa.length&&c;++d)c=this.sa[d].Ab(a[d],b[d]);return c};m.gd=function(a,b){return this.sa[0].Ab(a[0],b[0])};
m.nf=function(a){var b=a.filter(function(a){return a.every(ga)});a=Array(this.sa.length);for(var c=0;c<a.length;c++)a[c]=b.map(function(a){return a[c]});a.forEach(function(a,b){a.sort(function(a,c){return this.sa[b].be(a,c)}.bind(this))},this);b=Array(b.length);for(c=0;c<b.length;c++)b[c]=a.map(function(a){return a[c]});return b.sort(function(a,b){for(var c=0,h=0;h<this.sa.length&&0==c;++h)c=this.sa[h].be(a[h],b[h]);return c}.bind(this))};m.Qd=function(a){return this.sa[0].Qd(a[0])};
m.pd=function(a){var b=a.map(function(a,b){return this.sa[b].pd(a)[0]},this);a=a.map(function(a,b){return this.sa[b].pd(a)[1]},this);return[b,a]};m.Hd=function(a){return a.every(function(a,c){return this.sa[c].Hd(a)},this)};function Tf(a){Rf.call(this,a);this.sa=a.map(function(a){return new Of(a)})}t(Tf,Rf);function Uf(a){if(1==a.f.length)return new If(a.f[0].lb);var b=a.f.map(function(a){return a.lb});return a.f.some(function(a){return a.ba.ic()})?new Tf(b):new Rf(b)};function Vf(a){this.ga=a;this.kb=B();this.Kc=new hf;this.qb=new hf}m=Vf.prototype;m.getName=function(){return this.ga.getName()};m.add=function(a,b){null===a?(this.kb.add(b),this.Kc.add(a,1)):this.ga.add(a,b)};m.set=function(a,b){null===a?(this.kb.clear(),this.Kc.clear(),this.add(a,b)):this.ga.set(a,b)};m.remove=function(a,b){null===a?b?(this.kb.delete(b),this.Kc.remove(a,1)):(this.kb.clear(),this.Kc.clear()):this.ga.remove(a,b)};m.get=function(a){return null===a?C(this.kb):this.ga.get(a)};m.Wc=function(a){return this.ga.Wc(a)};
m.Ma=function(){jf(this.qb,[this.ga.Ma(),this.Kc]);return this.qb};m.Xa=function(a,b,c,d){b=this.ga.Xa(a,b,c,d);return null!=a?b:b.concat(C(this.kb))};m.clear=function(){this.kb.clear();this.ga.clear()};m.eb=function(a){return null===a?0!=this.kb.size:this.ga.eb(a)};m.min=function(){return this.ga.min()};m.max=function(){return this.ga.max()};m.Fa=function(){return[new Sb(-2,C(this.kb))].concat(this.ga.Fa())};m.Lb=function(){return this.ga.Lb()};
function Wf(a,b){for(var c=-1,d=0;d<b.length;++d)if(-2==b[d].id()){c=d;break}if(-1==c)throw new D(102);var d=b[c].o,e=b.slice(0);e.splice(c,1);var c=a(e),f=new Vf(c);d.forEach(function(a){f.kb.add(a)});return f}m.Ia=function(){return this.ga.Ia()};function Xf(a){this.u=a;this.pb=B();this.V=new If(1)}m=Xf.prototype;m.getName=g("u");m.add=function(a){if("number"!=typeof a)throw new D(103);this.pb.add(a)};m.set=function(a,b){this.add(a,b)};m.remove=function(a){this.pb.delete(a)};m.get=function(a){return this.eb(a)?[a]:[]};m.min=function(){return this.Hb(this.V.min.bind(this.V))};m.max=function(){return this.Hb(this.V.max.bind(this.V))};
m.Hb=function(a){if(0==this.pb.size)return null;var b=C(this.pb).reduce(function(b,d){return null===b||1==a(d,b)?d:b},null);return[b,[b]]};m.Wc=function(){return this.pb.size};m.Xa=function(a,b,c,d){var e=a||[kd()];a=C(this.pb).filter(function(a){return e.some(function(b){return this.V.Ab(a,b)},this)},this);return gf(a,b,c,d)};m.clear=function(){this.pb.clear()};m.eb=function(a){return this.pb.has(a)};m.Fa=function(){return[new Sb(0,C(this.pb))]};m.Lb=g("V");
function Yf(a,b){var c=new Xf(a);b[0].o.forEach(function(a){c.add(a,a)});return c}m.Ia=l(!0);m.Ma=function(){var a=new hf;a.na=this.pb.size;return a};function Zf(a){this.Ka=a.l(gc);this.D=a.l(ic);this.U=a.l(hc)}Zf.prototype.Ga=function(a){var b=a.ra(),c=function(){if(0==b.length)return w();var a=b.shift();return(a.Cb()?$f(this,a):ag(this,a)).then(c)}.bind(this);return c()};function ag(a,b){var c=a.Ka.Db(0,[b]),d=c.H(b.getName(),b.fb.bind(b),0).get([]).then(function(a){this.U.Wb(b.getName(),a);bg(this,b,a)}.bind(a));c.ia();return d}
function bg(a,b,c){var d=a.D.lc.get(b.getName())||[];c.forEach(function(a){d.forEach(function(b){var c=a.jb(b.getName());b.add(c,a.id())})})}function $f(a,b){var c=a.Ka.Db(0,[b]),d=c.H(b.getName(),b.fb,0).get([]).then(function(a){this.U.Wb(b.getName(),a)}.bind(a)),e=b.Aa().map(function(a){return cg(this,a,c)},a).concat(dg(a,b,c));c.ia();return db(e.concat(d))}
function cg(a,b,c){c=c.H(b.m(),Ub,1);var d=Uf(b);return c.get([]).then(function(a){if(0<a.length){if(eg(b)){var c=vf.bind(void 0,d,b.m(),b.Bc);a=Wf(c,a)}else a=vf(d,b.m(),b.Bc,a);this.D.set(b.Lc,a)}}.bind(a))}function dg(a,b,c){return c.H(Me(b),Ub,1).get([]).then(function(a){0<a.length&&(a=Yf(Me(b),a),this.D.set(b.getName(),a))}.bind(a))};function fg(){this.X=y();this.lc=y()}fg.prototype.Ga=function(a){a.ra().forEach(function(a){var c=[];this.lc.set(a.getName(),c);var d=Me(a);if(null===this.get(d)){var e=new Xf(d);c.push(e);this.X.set(d,e)}a.Aa().forEach(function(a){var b;b=Uf(a);b=new kf(a.m(),b,a.Bc);b=eg(a)&&1==a.f.length?new Vf(b):b;c.push(b);this.X.set(a.m(),b)},this)},this);return w()};fg.prototype.get=function(a){return this.X.get(a)||null};
fg.prototype.set=function(a,b){var c=this.lc.get(a)||null;null===c&&(c=[],this.lc.set(a,c));for(var d=null,e=0;e<c.length;e++)if(c[e].getName()==b.getName()){d=e;break}null!==d&&0<c.length?c.splice(d,1,b):c.push(b);this.X.set(b.getName(),b)};function gg(a){this.kc=[];q(a)&&this.add(a)}gg.prototype.toString=function(){return this.kc.map(function(a){return a.toString()}).join(",")};gg.prototype.eb=function(a){return this.kc.some(function(b){return b.contains(a)})};gg.prototype.Gb=g("kc");
gg.prototype.add=function(a){if(0!=a.length)if(a=this.kc.concat(a),1==a.length)this.kc=a;else{a.sort(md);for(var b=[],c=a[0],d=1;d<a.length;++d)if(id(c,a[d])){var e=a[d],f=kd();if(c.c!=E&&e.c!=E){var h=jd(c.c,e.c,!0);1!=h?(f.c=c.c,f.ea=0!=h?c.ea:c.ea&&e.ea):(f.c=e.c,f.ea=e.ea)}c.w!=E&&e.w!=E&&(h=jd(c.w,e.w,!1),-1!=h?(f.w=c.w,f.la=0!=h?c.la:c.la&&e.la):(f.w=e.w,f.la=e.la));c=f}else b.push(c),c=a[d];b.push(c);this.kc=b}};
function hg(a,b){var c=[];a.Gb().map(function(a){return b.Gb().map(function(b){var c;if(id(a,b)){c=kd();var h=jd(a.c,b.c,!0),h=0==h?a.ea?a:b:-1!=h?a:b;c.c=h.c;c.ea=h.ea;a.w==E||b.w==E?b=a.w==E?b:a:(h=jd(a.w,b.w,!1),b=0==h?a.la?a:b:-1==h?a:b);c.w=b.w;c.la=b.la}else c=null;return c})}).forEach(function(a){c=c.concat(a)});return new gg(c.filter(function(a){return null!==a}))};function ig(a,b){var c=[],d=null,e=null;Nd(a,function(a){var h=b(a);null==a.getParent()?e=h:L(d,h);var k=a.getParent();null!==k&&K(k).length==K(d).length&&(k=c.indexOf(d),-1!=k&&c.splice(k,1));1<K(a).length&&c.push(h);d=null===a.h?c[c.length-1]:h});return e}function jg(a){return kg(a,function(a){return null===a.h})}
function lg(a){var b=a.getParent(),c=0;null!==b&&(c=K(b).indexOf(a),b.removeChild(a));var d=K(a).slice();d.forEach(function(d,f){a.removeChild(d);null===b||Kd(b,d,c+f)});return{parent:b,children:d}}function mg(a,b){K(a).slice().forEach(function(c){a.removeChild(c);L(b,c)});L(a,b)}function ng(a){var b=Jd(a,0);lg(a);mg(b,a);return b}
function og(a,b,c){var d=Jd(a,0),e=K(d).slice();if(!e.some(function(a){return b(a)}))return a;lg(a);e.forEach(function(e,h){if(b(e)){var k=c(a);Ld(d,h);L(k,e);Kd(d,k,h)}});return d}function pg(a,b,c,d){var e=a.getParent();null!==e&&(a=K(e).indexOf(a),Ld(e,a),Kd(e,c,a));K(b).slice().forEach(function(a){b.removeChild(a);L(d,a)});return c}function kg(a,b,c){function d(a){b(a)&&e.push(a);null!=c&&c(a)||K(a).forEach(d)}var e=[];d(a);return e}
function qg(a,b){var c=b||function(a){return a.toString()+"\n"},d="";Nd(a,function(a){for(var b=0;b<Id(a);b++)d+="-";d+=c(a)});return d};function rg(a){Od.call(this);this.Sb=a;this.Ya=!1}t(rg,Od);m=rg.prototype;m.Mb=function(){return ig(this,function(a){if(a instanceof rg){var b=new rg(a.Sb);b.Ya=a.Ya;a=a.Y();b.oa=a;return b}return a.Mb()})};m.gb=function(a){var b=a||[];Nd(this,function(a){a!=this&&a.gb(b)}.bind(this));a=B(b);return C(a)};m.rd=function(a){this.Ya!=a&&(this.Ya=a,this.Sb="and"==this.Sb?"or":"and",K(this).forEach(function(b){return b.rd(a)}))};
m.eval=function(a){var b=K(this).map(function(b){return b.eval(a)});return sg(this,b)};function sg(a,b){return"and"==a.Sb?sd(b):td(b)}m.toString=function(){return"combined_pred_"+this.Sb.toString()};function tg(a,b,c){Od.call(this);this.ha=a;this.ka=b;this.F=c;this.Xd=null;a=Ad.xc();this.tc=Gd(a,this.ha.G(),this.F);this.cg=a.Re.get(this.ha.G())||null}t(tg,Od);m=tg.prototype;m.Mb=function(){var a=new tg(this.ha,this.ka,this.F),b=this.Y();a.oa=b;return a};m.gb=function(a){return null!=a?(a.push(this.ha),a.push(this.ka),a):[this.ha,this.ka]};
m.reverse=function(){var a=this.F;switch(this.F){case "gt":a="lt";break;case "lt":a="gt";break;case "gte":a="lte";break;case "lte":a="gte"}return new tg(this.ka,this.ha,a)};m.eval=function(a){var b=a.entries.filter(function(a){var b=H(a,this.ha);a=H(a,this.ka);return this.tc(b,a)},this);return new F(b,G(a))};m.toString=function(){return"join_pred("+this.ha.m()+" "+this.F+" "+this.ka.m()+")"};
function ug(a,b,c){var d=null,e=null;-1!=G(b).indexOf(I(a.ha.H()))?(d=b,e=c):(d=c,e=b);if(d.entries.length>e.entries.length){a:{b=a.ha;a.ha=a.ka;a.ka=b;b=a.F;switch(a.F){case "gt":b="lt";break;case "lt":b="gt";break;case "gte":b="lte";break;case "lte":b="gte";break;default:break a}a.F=b;a.tc=Gd(Ad.xc(),a.ha.G(),a.F)}return[e,d]}return[d,e]}function vg(a){var b={};a.gb().forEach(function(a){b[a.getName()]=null});return b}
function wg(a,b,c){null===a.Xd&&(a.Xd=vg(a.ka.H()));var d=new vd(new Sb(-1,a.Xd),!1);return yd(b,c,d,[I(a.ka.H())])}
function xg(a,b,c,d){var e=[b,c];d||(e=ug(a,b,c));b=e[0];c=e[1];var e=b,f=c,h=a.ha,k=a.ka;d&&(e=c,f=b,h=a.ka,k=a.ha);var n=new Ic,A=[];e.entries.forEach(function(a){var b=String(H(a,h));n.set(b,a)});var O=G(e),ba=G(f);f.entries.forEach(function(a){var b=H(a,k),c=String(b);null!==b&&n.has(c)?n.get(c).forEach(function(b){b=yd(a,ba,b,O);A.push(b)}):d&&A.push(wg(this,a,ba))}.bind(a));a=G(b).concat(G(c));return new F(A,a)}
function yg(a,b,c,d,e){function f(a,b){var c=new vd(b,1<O.length),c=yd(a,ba,c,O);A.push(c)}var h=d.Uf.H(),k=b,n=c;-1!=G(b).indexOf(I(h))&&(k=c,n=b);var A=[],O=G(n),ba=G(k);k.entries.forEach(function(a){var b=this.cg(H(a,d.ig)),b=d.index.get(b);0!=b.length&&(d.index.Ia()?f(a,e.get(b[0])):cf(e,b).forEach(f.bind(null,a)))},a);a=G(k).concat(G(n));return new F(A,a)};function zg(a,b,c){return null===b?new Qd(a,b,c):q(b.m)?new tg(a,b,c):new Qd(a,b,c)};var Ag={};r("lf.schema.DataStoreType",Ag);Ag.INDEXED_DB=0;Ag.MEMORY=1;Ag.LOCAL_STORAGE=2;Ag.FIREBASE=3;Ag.WEB_SQL=4;Ag.OBSERVABLE_STORE=5;function Bg(a,b,c,d){this.Lc=a;this.name=b;this.Bc=c;this.f=d}Bg.prototype.m=function(){return this.Lc+"."+this.name};function eg(a){return a.f.some(function(a){return a.ba.ic()})}function R(a,b,c,d){this.u=a;this.pa=c;this.J=b;this.md=d;this.bb=null}r("lf.schema.Table",R);R.prototype.getName=g("u");R.prototype.getName=R.prototype.getName;R.prototype.Wa=g("bb");
function I(a){return a.bb||a.u}R.prototype.pc=function(a){var b=new this.constructor(this.u);b.bb=a;b.ug=this.ug;return b};R.prototype.as=R.prototype.pc;R.prototype.createRow=R.prototype.vb;R.prototype.deserializeRow=R.prototype.fb;R.prototype.Aa=g("pa");R.prototype.getIndices=R.prototype.Aa;R.prototype.gb=g("J");R.prototype.getColumns=R.prototype.gb;R.prototype.getConstraint=R.prototype.Fb;R.prototype.Cb=g("md");R.prototype.persistentIndex=R.prototype.Cb;function Me(a){return a.u+".#"};function S(a,b){this.child=a;this.Kb=b;this.bb=null}m=S.prototype;m.getName=function(){return this.Kb+"("+this.child.getName()+")"};m.m=function(){return this.Kb+"("+this.child.m()+")"};m.H=function(){return this.child.H()};m.toString=function(){return this.m()};m.G=function(){return this.child.G()};m.Wa=g("bb");m.Aa=function(){return[]};m.za=l(null);m.ic=l(!1);m.pc=function(a){this.bb=a;return this};S.prototype.as=S.prototype.pc;
function Cg(a){for(var b=[a];a instanceof S;)b.push(a.child),a=a.child;return b}function Dg(a){this.bb=a||null;this.S=new R("#UnknownTable",[],[],!1)}m=Dg.prototype;m.getName=l("*");m.m=function(){return this.getName()};m.toString=function(){return this.m()};m.H=g("S");m.G=l(4);m.Wa=g("bb");m.Aa=function(){return[]};m.za=l(null);m.ic=l(!1);r("lf.fn.avg",function(a){return new S(a,"AVG")});function Eg(a){return new S(a||new Dg,"COUNT")}r("lf.fn.count",Eg);function Fg(a){return new S(a,"DISTINCT")}r("lf.fn.distinct",Fg);r("lf.fn.max",function(a){return new S(a,"MAX")});r("lf.fn.min",function(a){return new S(a,"MIN")});r("lf.fn.stddev",function(a){return new S(a,"STDDEV")});r("lf.fn.sum",function(a){return new S(a,"SUM")});r("lf.fn.geomean",function(a){return new S(a,"GEOMEAN")});function T(a,b){J.call(this);this.Mf=b}t(T,J);T.prototype.exec=function(a,b){switch(this.Mf){case 1:return Gg(this,a,b);case 0:return Hg(this,a,b);default:return Ig(this,a,b)}};T.prototype.toString=l("dummy_node");T.prototype.Mc=function(){return this.toString()};function Ig(a,b,c){return new v(function(a){a(this.fa([],b,c))}.bind(a))}function Gg(a,b,c){return Jd(a,0).exec(b,c).then(function(a){return this.fa(a,b,c)}.bind(a))}
function Hg(a,b,c){var d=K(a).map(function(a){return a.exec(b,c)});return db(d).then(function(a){var d=[];a.forEach(function(a){for(var b=0;b<a.length;++b)d.push(a[b])});return this.fa(d,b,c)}.bind(a))};function Jg(a){T.call(this,0,1);this.we=a}t(Jg,T);Jg.prototype.toString=function(){return"aggregation("+this.we.map(function(a){return a.m()}).toString()+")"};Jg.prototype.fa=function(a){a.forEach(function(a){Kg(new Lg(a,this.we))},this);return a};function Lg(a,b){this.Ja=a;this.J=b}
function Kg(a){a.J.forEach(function(a){a=Cg(a).reverse();for(var c=1;c<a.length;c++){var d=a[c],e=Cg(d).slice(-1)[0],f=d.child instanceof S?pd(this.Ja,d.child):this.Ja;if(null!==f.Va&&f.Va.has(d.m()))break;f=Mg(d.Kb,f,e);e=this.Ja;null===e.Va&&(e.Va=y());e.Va.set(d.m(),f)}},a)}
function Mg(a,b,c){var d=null;switch(a){case "MIN":d=Ng(b,c,function(a,b){return b<a?b:a});break;case "MAX":d=Ng(b,c,function(a,b){return b>a?b:a});break;case "DISTINCT":d=Og(b,c);break;case "COUNT":d=Pg(b,c);break;case "SUM":d=Qg(b,c);break;case "AVG":a=Pg(b,c);0<a&&(d=Qg(b,c)/a);break;case "GEOMEAN":d=Rg(b,c);break;default:d=Sg(b,c)}return d}function Ng(a,b,c){return a.entries.reduce(function(a,e){var f=H(e,b);return null===f?a:null===a?f:c(a,f)},null)}
function Pg(a,b){return b instanceof Dg?a.entries.length:a.entries.reduce(function(a,d){return a+(fa(H(d,b))?0:1)},0)}function Qg(a,b){return Ng(a,b,function(a,b){return b+a})}function Sg(a,b){var c=[];a.entries.forEach(function(a){a=H(a,b);null===a||c.push(a)});return 0==c.length?null:sb.apply(null,c)}function Rg(a,b){var c=0,d=a.entries.reduce(function(a,d){var h=H(d,b);if(0==h||null===h)return a;c++;return a+Math.log(h)},0);return 0==c?null:Math.pow(Math.E,d/c)}
function Og(a,b){var c=y();a.entries.forEach(function(a){var e=H(a,b);c.set(e,a)});return new F(z(c),G(a))};function Tg(a,b){this.Da=a;this.aa=b}Tg.prototype.hb=g("Da");Tg.prototype.ca=g("aa");function Ug(){J.call(this)}t(Ug,J);function Vg(a,b){J.call(this);this.table=a;this.values=b}t(Vg,Ug);function Wg(a,b){Vg.call(this,a,b)}t(Wg,Vg);function Xg(a){J.call(this);this.table=a}t(Xg,Ug);Xg.prototype.toString=function(){return"delete("+this.table.getName()+")"};function Yg(a,b){J.call(this);this.table=a;this.qe=b}t(Yg,Ug);
Yg.prototype.toString=function(){var a=[];this.qe&&(a=this.qe.map(function(a){return a.M.getName()},this));return"update("+this.table.getName()+", ["+a.join(",")+"])"};function Zg(a){J.call(this);this.I=a}t(Zg,Ug);Zg.prototype.toString=function(){return"select("+this.I.toString()+")"};function $g(a){J.call(this);this.table=a}t($g,Ug);$g.prototype.toString=function(){var a="table_access("+this.table.getName();null===this.table.Wa()||(a+=" as "+this.table.Wa());return a+")"};
function ah(){J.call(this)}t(ah,Ug);ah.prototype.toString=l("cross_product");function bh(a,b){J.call(this);this.f=a;this.Ob=b}t(bh,Ug);bh.prototype.toString=function(){var a="project("+this.f.toString();if(null!==this.Ob)var b=this.Ob.map(function(a){return a.m()}).join(", "),a=a+(", groupBy("+b+")");return a+")"};function ch(a){J.call(this);this.N=a}t(ch,Ug);ch.prototype.toString=function(){return"order_by("+$d(this.N)+")"};function dh(a){J.call(this);this.f=a}t(dh,Ug);
dh.prototype.toString=function(){return"aggregation("+this.f.toString()+")"};function eh(a){J.call(this);this.f=a}t(eh,Ug);eh.prototype.toString=function(){return"group_by("+this.f.toString()+")"};function fh(a){J.call(this);this.W=a}t(fh,Ug);fh.prototype.toString=function(){return"limit("+this.W+")"};function gh(a){J.call(this);this.K=a}t(gh,Ug);gh.prototype.toString=function(){return"skip("+this.K+")"};function hh(a,b){J.call(this);this.I=a;this.Qb=b}t(hh,Ug);
hh.prototype.toString=function(){return"join(type: "+(this.Qb?"outer":"inner")+", "+this.I.toString()+")"};function ih(){};function jh(){}t(jh,ih);jh.prototype.ob=function(a){this.$=a;this.Ta(this.$);return this.$};jh.prototype.Ta=function(a){if(a instanceof Zg){var b=kh(this,a.I),b=lh(this,b);pg(a,a,b[0],b[1]);a==this.$&&(this.$=b[0]);a=b[0]}K(a).forEach(function(a){this.Ta(a)},this)};function kh(a,b){if(0==K(b).length||"and"!=b.Sb)return[b];var c=K(b).slice().map(function(a){b.removeChild(a);return kh(this,a)},a);return Ea(c)}
function lh(a,b){var c=null,d=null;b.map(function(a,b){var h=new Zg(a);0==b?c=h:L(d,h);d=h},a);return[c,d]};function mh(){}t(mh,ih);mh.prototype.ob=function(a,b){if(3>b.c.length)return a;this.$=a;this.Ta(this.$);return this.$};mh.prototype.Ta=function(a){if(a instanceof ah)for(;2<K(a).length;){for(var b=new ah,c=0;2>c;c++){var d=Ld(a,0);L(b,d)}Kd(a,b,0)}K(a).forEach(function(a){this.Ta(a)},this)};function nh(){T.call(this,0,0)}t(nh,T);nh.prototype.toString=l("cross_product");nh.prototype.fa=function(a){var b=a[0],c=a[1];a=[];for(var d=G(b),e=G(c),f=0;f<b.entries.length;f++)for(var h=0;h<c.entries.length;h++){var k=yd(b.entries[f],d,c.entries[h],e);a.push(k)}b=G(b).concat(G(c));return[new F(a,b)]};function oh(a,b){ce.call(this,a,b);this.Ea=a.l(kc);this.Ib=a.l(lc)}t(oh,ce);oh.prototype.getPriority=l(2);oh.prototype.$d=function(a){0==this.G()?ph(this,a):this.Jc()};function ph(a,b){a.od.forEach(function(a,d){a instanceof Zd&&ge(this.Ib,a,b[d])},a)}oh.prototype.Jc=function(){var a=ie(this.Ib,this.ca());0!=a.length&&(a=new fe(this.global,a),je(this.Ea,a))};function qh(a){Ud.call(this,a)}t(qh,Ud);qh.prototype.ca=function(){var a=B();a.add(this.c);rh(this,this.c.getName(),a);return a};function rh(a,b,c){var d=sh(a.ba.info(),b,1);sh(a.ba.info(),b).forEach(c.add.bind(c));d.forEach(function(a){rh(this,a.getName(),c)},a)}qh.prototype.clone=function(){var a=new qh(this.ba);Xd(a,this);a.c=this.c;return a};qh.prototype.bind=function(a){qh.ab.bind.call(this,a);Yd(this,a);return this};function th(a){Ud.call(this,a)}t(th,Ud);th.prototype.ca=function(){var a=B();a.add(this.Ha);var b=this.ba.info();uh(this.Ha.getName(),b.Ze).forEach(a.add.bind(a));this.ac&&sh(b,this.Ha.getName()).forEach(a.add.bind(a));return a};th.prototype.clone=function(){var a=new th(this.ba);Xd(a,this);a.Ha=this.Ha;this.values&&(a.values=this.values instanceof zd?this.values:this.values.slice());a.ac=this.ac;a.bc=this.bc;return a};
th.prototype.bind=function(a){th.ab.bind.call(this,a);this.bc&&(this.values=this.bc instanceof zd?a[this.bc.za()]:this.bc.map(function(b){return b instanceof zd?a[b.za()]:b}));return this};function vh(a){Ud.call(this,a)}t(vh,Ud);vh.prototype.ca=function(){var a=B();a.add(this.table);var b=this.set.map(function(a){return a.M.m()}),c=this.ba.info();wh(c,b).forEach(a.add.bind(a));xh(c,b).forEach(a.add.bind(a));return a};vh.prototype.clone=function(){var a=new vh(this.ba);Xd(a,this);a.table=this.table;a.set=this.set?this.set.slice():this.set;return a};vh.prototype.bind=function(a){vh.ab.bind.call(this,a);this.set.forEach(function(b){-1!=b.Rc&&(b.value=a[b.Rc])});Yd(this,a);return this};function yh(a,b){if(null==b)return"NULL";switch(a){case 1:return b?1:0;case 3:case 4:return b;case 0:return"'"+Xb(b)+"'";default:return"'"+b.toString()+"'"}}function zh(a,b){var c=a.ac?"INSERT OR REPLACE":"INSERT",d=a.Ha.gb(),c=c+(" INTO "+a.Ha.getName()+"("),c=c+d.map(function(a){return a.getName()}).join(", "),c=c+") VALUES (";return a.values.map(function(a){var f=d.map(function(c){var d=a.o[c.getName()];return b?null!=d?"#":"NULL":yh(c.G(),d)});return c+f.join(", ")+");"}).join("\n")}
function Ah(a){switch(a){case "between":return"BETWEEN";case "eq":return"=";case "gte":return">=";case "gt":return">";case "in":return"IN";case "lte":return"<=";case "lt":return"<";case "match":return"LIKE";case "neq":return"<>";default:return"UNKNOWN"}}function Bh(a,b,c,d){return a instanceof zd?"?"+a.za().toString():d?null!=a?"#":"NULL":"match"==b?"'"+a.toString()+"'":"in"==b?"("+a.map(function(a){return yh(c,a)}).join(", ")+")":"between"==b?yh(c,a[0])+" AND "+yh(c,a[1]):yh(c,a).toString()}
function Ch(a,b){return K(a).map(function(a){return"("+Dh(a,b)+")"}).join("and"==a.Sb?" AND ":" OR ")}function Eh(a){return[a.ha.m(),Ah(a.F),a.ka.m()].join(" ")}function Dh(a,b){if(a instanceof Qd){var c=a.M.m(),d=Ah(a.F),e=Bh(a.value,a.F,a.M.G(),b);return"="==d&&"NULL"==e?[c,"IS NULL"].join(" "):"<>"==d&&"NULL"==e?[c,"IS NOT NULL"].join(" "):[c,d,e].join(" ")}if(a instanceof rg)return Ch(a,b);if(a instanceof tg)return Eh(a);throw new D(357,typeof a);}
function Fh(a,b){var c=Dh(a,b);return c?" WHERE "+c:""}function Gh(a,b){var c="UPDATE "+a.table.getName()+" SET ",c=c+a.set.map(function(a){var b=a.M.m()+" = ";return-1!=a.Rc?b+"?"+a.Rc.toString():b+yh(a.M.G(),a.value).toString()}).join(", ");a.s&&(c+=Fh(a.s,b));return c+";"}
function Hh(a,b){var c="*";a.f.length&&(c=a.f.map(function(a){return a.Wa()?a.m()+" AS "+a.Wa():a.m()}).join(", "));c="SELECT "+c+" FROM ";null!=a.Bb&&0!=a.Bb.size?c+=Ih(a,b):(c+=a.c.map(Jh).join(", "),a.s&&(c+=Fh(a.s,b)));if(a.N)var d=a.N.map(function(a){return a.M.m()+(0==a.lb?" DESC":" ASC")}).join(", "),c=c+(" ORDER BY "+d);a.ja&&(d=a.ja.map(function(a){return a.m()}).join(", "),c+=" GROUP BY "+d);a.W&&(c+=" LIMIT "+a.W.toString());a.K&&(c+=" SKIP "+a.K.toString());return c+";"}
function Jh(a){return I(a)!=a.getName()?a.getName()+" AS "+I(a):a.getName()}function Ih(a,b){for(var c=kg(a.s,function(a){return a instanceof tg}),d=c.map(Eh),e=Jh(a.c[0]),f=1;f<a.c.length;f++)var h=Jh(a.c[f]),e=a.Bb.has(c[d.length-f].Y())?e+(" LEFT OUTER JOIN "+h):e+(" INNER JOIN "+h),e=e+(" ON ("+d[d.length-f]+")");c=Jd(a.s,0);c instanceof tg||(e+=" WHERE "+Dh(c,b));return e}
function Kh(a,b){var c=b||!1,d=a.a.clone();if(d instanceof th)return zh(d,c);if(d instanceof qh){var e="DELETE FROM "+d.c.getName();d.s&&(e+=Fh(d.s,c));return e+";"}if(d instanceof vh)return Gh(d,c);if(d instanceof Zd)return Hh(d,c);throw new D(358,typeof d);};function U(a,b){this.global=a;this.tg=a.l(jc);this.Ea=a.l(kc);this.a=b}r("lf.query.BaseBuilder",U);U.prototype.exec=function(){try{this.cb()}catch(a){return ab(a)}return new v(function(a,b){var c=new oh(this.global,[this.zc()]);je(this.Ea,c).then(function(b){a(nd(b[0]))},b)},this)};U.prototype.exec=U.prototype.exec;U.prototype.Of=function(){var a=function(a){return a.Mc(this.a)+"\n"}.bind(this);return qg(Lh(this).hb(),a)};U.prototype.explain=U.prototype.Of;
U.prototype.bind=function(a){this.a.bind(a);return this};U.prototype.bind=U.prototype.bind;U.prototype.Bg=function(a){return Kh(this,a)};U.prototype.toSql=U.prototype.Bg;U.prototype.cb=aa();function Lh(a){if(null==a.$e){var b;b=a.tg;var c=a.a,d=b.fg.create(c);b=b.qg.create(d,c);a.$e=b}return a.$e}U.prototype.zc=function(){return{context:this.a.clone(),ce:Lh(this)}};function Mh(a){U.call(this,a,new qh(a.l(mc)))}t(Mh,U);r("lf.query.DeleteBuilder",Mh);Mh.prototype.c=function(a){if(null!=this.a.c)throw new D(515);this.a.c=a;return this};Mh.prototype.from=Mh.prototype.c;Mh.prototype.s=function(a){this.yd();this.a.s=a;return this};Mh.prototype.where=Mh.prototype.s;Mh.prototype.yd=function(){if(null==this.a.c)throw new D(548);if(null!=this.a.s)throw new D(516);};Mh.prototype.cb=function(){Mh.ab.cb.call(this);if(null==this.a.c)throw new D(517);};function Nh(a,b){U.call(this,a,new th(a.l(mc)));this.a.ac=b||!1}t(Nh,U);r("lf.query.InsertBuilder",Nh);Nh.prototype.cb=function(){Nh.ab.cb.call(this);var a=this.a;if(null==a.Ha||null==a.values)throw new D(518);if(a.ac&&null===a.Ha.Fb().$c())throw new D(519);};Nh.prototype.Ha=function(a){if(null!=this.a.Ha)throw new D(520);this.a.Ha=a;return this};Nh.prototype.into=Nh.prototype.Ha;
Nh.prototype.values=function(a){if(null!=this.a.values)throw new D(521);a instanceof zd||a.some(function(a){return a instanceof zd})?this.a.bc=a:this.a.values=a;return this};Nh.prototype.values=Nh.prototype.values;function Oh(a){return Ph("and",Array.prototype.slice.call(arguments))}r("lf.op.and",Oh);r("lf.op.or",function(a){return Ph("or",Array.prototype.slice.call(arguments))});function Ph(a,b){var c=new rg(a);b.forEach(function(a){L(c,a)});return c}r("lf.op.not",function(a){a.rd(!0);return a});function V(a,b){U.call(this,a,new Zd(a.l(mc)));this.Ge=this.td=!1;this.a.f=b;Qh(this);Rh(this)}t(V,U);r("lf.query.SelectBuilder",V);V.prototype.cb=function(){V.ab.cb.call(this);var a=this.a;if(null==a.c)throw new D(522);if(q(a.Rb)&&!q(a.W)||q(a.Yb)&&!q(a.K))throw new D(523);null!=this.a.ja?Sh(this):Th(this)};function Qh(a){var b=a.a.f.filter(function(a){return a instanceof S&&"DISTINCT"==a.Kb},a);if(0!=b.length&&(1!=b.length||1!=a.a.f.length))throw new D(524);}
function Sh(a){var b=a.a.f.filter(function(a){return!(a instanceof S)}).map(function(a){return a.m()}),c=!1;if(0==a.a.ja.length||0==a.a.f.length)c=!0;else{var d=a.a.ja.map(function(a){return a.m()});(c=b.some(function(a){return-1==d.indexOf(a)}))||(c=a.a.ja.some(function(a){a=a.G();return 6==a||0==a}))}if(c)throw new D(525);}function Th(a){var b=a.a.f.some(function(a){return a instanceof S},a);a=a.a.f.some(function(a){return!(a instanceof S)},a)||0==a.a.f.length;if(b&&a)throw new D(526);}
function Rh(a){a.a.f.forEach(function(a){if(a instanceof S&&!Uh(a.Kb,a.G()))throw new D(527,a.m());},a)}function Vh(a,b){if(null==a.a.c)throw new D(b);}V.prototype.c=function(a){if(this.Ge)throw new D(515);this.Ge=!0;null==this.a.c&&(this.a.c=[]);this.a.c.push.apply(this.a.c,Array.prototype.slice.call(arguments));return this};V.prototype.from=V.prototype.c;V.prototype.s=function(a){Vh(this,548);if(this.td)throw new D(516);this.td=!0;Wh(this,a);return this};V.prototype.where=V.prototype.s;
function Wh(a,b){if(null!=a.a.s){var c=Oh(b,a.a.s);a.a.s=c}else a.a.s=b}V.prototype.Yf=function(a,b){Vh(this,542);if(this.td)throw new D(547);this.a.c.push(a);Wh(this,b);return this};V.prototype.innerJoin=V.prototype.Yf;V.prototype.dg=function(a,b){Vh(this,542);if(!(b instanceof tg))throw new D(541);if(this.td)throw new D(547);this.a.c.push(a);null==this.a.Bb&&(this.a.Bb=B());var c=b;I(a)!=I(b.ka.H())&&(c=b.reverse());this.a.Bb.add(c.Y());Wh(this,c);return this};V.prototype.leftOuterJoin=V.prototype.dg;
V.prototype.W=function(a){if(null!=(this.a.W||this.a.Rb))throw new D(528);if(a instanceof zd)this.a.Rb=a;else{if(0>a)throw new D(531);this.a.W=a}return this};V.prototype.limit=V.prototype.W;V.prototype.K=function(a){if(null!=(this.a.K||this.a.Yb))throw new D(529);if(a instanceof zd)this.a.Yb=a;else{if(0>a)throw new D(531);this.a.K=a}return this};V.prototype.skip=V.prototype.K;V.prototype.N=function(a,b){Vh(this,549);null==this.a.N&&(this.a.N=[]);this.a.N.push({M:a,lb:null!=b?b:1});return this};
V.prototype.orderBy=V.prototype.N;V.prototype.ja=function(a){Vh(this,549);if(null!=this.a.ja)throw new D(530);null==this.a.ja&&(this.a.ja=[]);this.a.ja.push.apply(this.a.ja,Array.prototype.slice.call(arguments));return this};V.prototype.groupBy=V.prototype.ja;function Uh(a,b){switch(a){case "COUNT":case "DISTINCT":return!0;case "AVG":case "GEOMEAN":case "STDDEV":case "SUM":return 4==b||3==b;case "MAX":case "MIN":return 4==b||3==b||5==b||2==b}return!1}
V.prototype.clone=function(){var a=new V(this.global,this.a.f);a.a=this.a.clone();a.a.Uc=null;return a};V.prototype.clone=V.prototype.clone;function Xh(a,b){U.call(this,a,new vh(a.l(mc)));this.a.table=b}t(Xh,U);r("lf.query.UpdateBuilder",Xh);Xh.prototype.set=function(a,b){var c={Rc:b instanceof zd?b.za():-1,M:a,value:b};null!=this.a.set?this.a.set.push(c):this.a.set=[c];return this};Xh.prototype.set=Xh.prototype.set;Xh.prototype.s=function(a){this.yd();this.a.s=a;return this};Xh.prototype.where=Xh.prototype.s;Xh.prototype.yd=function(){if(null!=this.a.s)throw new D(516);};
Xh.prototype.cb=function(){Xh.ab.cb.call(this);if(null==this.a.set)throw new D(532);if(this.a.set.some(function(a){return a.value instanceof zd}))throw new D(501);};function Yh(a){this.a=a;this.Da=null}Yh.prototype.hc=function(){null===this.Da&&(this.Da=this.Yc());return this.Da};function Zh(a){Yh.call(this,a)}t(Zh,Yh);Zh.prototype.Yc=function(){return this.a.ac?new Wg(this.a.Ha,this.a.values):new Vg(this.a.Ha,this.a.values)};function $h(a){Yh.call(this,a)}t($h,Yh);$h.prototype.Yc=function(){var a=new Yg(this.a.table,this.a.set),b=null!=this.a.s?new Zg(this.a.s.Mb()):null,c=new $g(this.a.table);null===b?L(a,c):(L(b,c),L(a,b));return a};function ai(a,b,c){this.Da=a;this.de=b;this.Vb=c}ai.prototype.hc=function(){this.Vb.forEach(function(a){this.Da=a.ob(this.Da,this.de)},this);return this.Da};function bi(a,b){Yh.call(this,a);this.Vb=b}t(bi,Yh);bi.prototype.Yc=function(){var a=new Xg(this.a.c),b=null!=this.a.s?new Zg(this.a.s.Mb()):null,c=new $g(this.a.c);null===b?L(a,c):(L(b,c),L(a,b));return(new ai(a,this.a,this.Vb)).hc()};function ci(){}t(ci,ih);ci.prototype.ob=function(a,b){if(2>b.c.length)return a;this.$=a;this.Ta(this.$,b);return this.$};ci.prototype.Ta=function(a,b){if(a instanceof Zg&&a.I instanceof tg){var c=a.I.Y(),d=Jd(a,0);d instanceof ah&&(c=null!=b.Bb&&b.Bb.has(c),c=new hh(a.I,c),pg(a,d,c,c),a==this.$&&(this.$=c),a=c)}K(a).forEach(function(a){this.Ta(a,b)},this)};function di(){this.Qc=B()}t(di,ih);di.prototype.ob=function(a,b){this.Qc.clear();if(!q(b.s))return a;this.$=a;this.Ta(this.$);this.Qc.clear();return this.$};di.prototype.Ta=function(a){if(ei(a)){var b=a.I instanceof Qd?fi(this,a):gi(this,a);this.Qc.add(a);b==a&&(b=Jd(a,0));null!==b&&(fa(b.getParent())&&(this.$=b),ei(b)&&!this.Qc.has(b)&&this.Ta(b))}else K(a).forEach(function(a){this.Ta(a)},this)};
function hi(a,b,c){var d=b;if(Jd(b,0)instanceof Zg)d=ng(b),hi(a,b,c);else if(ii(b)){var e=[],d=og(b,c,function(a){a=new Zg(a.I);e.push(a);return a});e.forEach(function(a){hi(this,a,c)},a)}return d}function fi(a,b){var c=B([I(b.I.M.H())]),d=function(a){return ji(this,a,c)}.bind(a);return hi(a,b,d)}function gi(a,b){var c=B([I(b.I.ha.H()),I(b.I.ka.H())]),d=function(a){return ji(this,a,c)}.bind(a);return hi(a,b,d)}
function ji(a,b,c){var d=B();jg(b).forEach(function(a){d.add(I(a.table))},a);b instanceof $g&&d.add(I(b.table));return nc(d,c)}function ei(a){return a instanceof Zg&&!(a.I instanceof rg)}function ii(a){a=Jd(a,0);return a instanceof ah||a instanceof hh};function ki(a,b){Yh.call(this,a);this.Vb=b;this.df=this.Ve=this.mf=this.Ye=this.xe=this.Je=this.lf=this.De=this.of=null}t(ki,Yh);
ki.prototype.Yc=function(){li(this);2<=this.a.c.length&&(this.De=new ah);this.lf=null!=this.a.s?new Zg(this.a.s.Mb()):null;this.a.N&&(this.Ye=new ch(this.a.N));null!=this.a.K&&0<this.a.K&&(this.mf=new gh(this.a.K));null!=this.a.W&&(this.Ve=new fh(this.a.W));null!=this.a.ja&&(this.Je=new eh(this.a.ja));mi(this);this.df=new bh(this.a.f||[],this.a.ja||null);var a=ni(this);return(new ai(a,this.a,this.Vb)).hc()};
function ni(a){for(var b=[a.Ve,a.mf,a.df,a.Ye,a.xe,a.Je,a.lf,a.De],c=null,d=null,e=0;e<b.length;e++){var f=b[e];null!==f&&(null===d?d=f:L(b[c],f),c=e)}a.of.forEach(function(a){L(b[c],a)});return d}function li(a){a.of=a.a.c.map(function(a){return new $g(a)},a)}function mi(a){var b=a.a.f.filter(function(a){return a instanceof S});null!=a.a.N&&a.a.N.forEach(function(a){a.M instanceof S&&b.push(a.M)});0<b.length&&(a.xe=new dh(b))};function oi(){this.je=[new jh,new mh,new di,new ci];this.Id=[new jh]}oi.prototype.create=function(a){var b=null;if(a instanceof th)b=new Zh(a);else if(a instanceof qh)b=new bi(a,this.Id);else if(a instanceof Zd)b=new ki(a,this.je);else if(a instanceof vh)b=new $h(a);else throw new D(513);b=b.hc();return new Tg(b,a.ca())};function pi(a){T.call(this,0,1);this.S=a}t(pi,T);pi.prototype.toString=function(){return"delete("+this.S.getName()+")"};pi.prototype.fa=function(a,b){var c=a[0].entries.map(function(a){return a.ua});b.remove(this.S,c);return[rd()]};function qi(a,b){T.call(this,0,-1);this.table=b;this.D=a.l(ic)}t(qi,T);qi.prototype.toString=function(){return"get_row_count("+this.table.getName()+")"};qi.prototype.fa=function(){var a=this.D.get(Me(this.table)),b=new F([],[this.table.getName()]),c=Eg(),a=a.Ma().na;null===b.Va&&(b.Va=y());b.Va.set(c.m(),a);return[b]};function ri(a,b){T.call(this,0,-1);this.U=a.l(hc);this.D=a.l(ic);this.table=b}t(ri,T);ri.prototype.toString=function(){var a="table_access("+this.table.getName();null===this.table.Wa()||(a+=" as "+this.table.Wa());return a+")"};ri.prototype.fa=function(){var a=this.D.get(Me(this.table)).Xa();return[ud(cf(this.U,a),[I(this.table)])]};function si(a){this.i=a}t(si,ih);si.prototype.ob=function(a,b){this.$=a;if(!this.Ad(b))return a;var c=kg(a,function(a){return a instanceof ri})[0],d=new qi(this.i,c.table);pg(c,c,d,d);return this.$};si.prototype.Ad=function(a){return 1==a.f.length&&1==a.c.length&&null==a.s&&null==a.W&&null==a.K&&null==a.ja?(a=a.f[0],a instanceof S&&"COUNT"==a.Kb&&a.child instanceof Dg):!1};function ti(a){T.call(this,0,1);this.Ie=a}t(ti,T);ti.prototype.toString=function(){return"groupBy("+this.Ie.map(function(a){return a.m()}).toString()+")"};ti.prototype.fa=function(a){return ui(this,a[0])};function ui(a,b){var c=new Ic,d=function(a){return this.Ie.map(function(b){return H(a,b)},this).join(",")}.bind(a);b.entries.forEach(function(a){c.set(d(a),a)},a);return c.keys().map(function(a){return new F(c.get(a),G(b))},a)};function vi(a,b,c){T.call(this,0,0);this.D=a.l(ic);this.U=a.l(hc);this.I=b;this.Qb=c;this.wd="eq"==this.I.F?0:2;this.Le=null}t(vi,T);var wi=["hash","index_nested_loop","nested_loop"];vi.prototype.toString=function(){return"join(type: "+(this.Qb?"outer":"inner")+", impl: "+wi[this.wd]+", "+this.I.toString()+")"};
vi.prototype.fa=function(a){switch(this.wd){case 0:return[xg(this.I,a[0],a[1],this.Qb)];case 1:return[yg(this.I,a[0],a[1],this.Le,this.U)];default:var b=this.I,c=a[0];a=a[1];var d=this.Qb,e=[c,a];d||(e=ug(b,c,a));c=e[0];a=e[1];for(var e=[],f=G(c),h=G(a),k=c.entries.length,n=a.entries.length,A=n+256-1>>8,O=0;O<A;){for(var ba=0;ba<k;ba++){var vb=!1,Mf=H(c.entries[ba],b.ha);if(null!==Mf)for(var Wb=Math.min(O+1<<8,n),wb=O<<8;wb<Wb;wb++)if(b.tc(Mf,H(a.entries[wb],b.ka))){var vb=!0,Pc=yd(c.entries[ba],
f,a.entries[wb],h);e.push(Pc)}d&&!vb&&e.push(wg(b,c.entries[ba],f))}O++}b=G(c).concat(G(a));return[new F(e,b)]}};function xi(a,b){a.wd=1;var c=a.D.get(b.za().m());a.Le={Uf:b,ig:b==a.I.ha?a.I.ka:a.I.ha,index:c}};function yi(a){T.call(this,0,-1);this.ef=a}t(yi,T);yi.prototype.toString=function(){return"no_op_step("+G(this.ef[0]).join(",")+")"};yi.prototype.fa=g("ef");function zi(){}t(zi,ih);zi.prototype.ob=function(a,b){this.$=a;if(!this.Ad(b))return a;kg(a,function(a){return a instanceof vi}).forEach(this.sg,this);return this.$};zi.prototype.Ad=function(a){return 1<a.c.length};
zi.prototype.sg=function(a){if("eq"==a.I.F&&!a.Qb){var b=function(b){if(!(b instanceof ri))return null;b=I(b.table)==I(a.I.ka.H())?a.I.ka:a.I.ha;return fa(b.za())?null:b},c=b(Jd(a,0)),b=b(Jd(a,1));if(null!==c||null!==b){b=null===b?c:b;xi(a,b);var d=new F([],[I(b.H())]);Md(a,new yi([d]),b==c?0:1)}}};function Ai(a){a=a.map(function(a){return a.Gb()});a=zb.apply(null,a);var b=[];yb(a,function(a){b.push(a)});return b}function Bi(a){this.Pb=a}Bi.prototype.Zc=function(){return 1==this.Pb.f.length?[kd()]:[this.Pb.f.map(function(){return kd()})]};function Ci(a,b){this.Pb=a;this.Ca=b;this.Ed=this.Te=null}
function Di(a,b){var c=y();a.Ca.keys().forEach(function(a){var e=this.Ca.get(a).map(function(a){return Vd(b,a)},this),f=new gg([kd()]);e.forEach(function(a){var b=null;"between"==a.F?b=new fd(Td(a,a.value[0]),Td(a,a.value[1]),!1,!1):(b=Td(a,a.value),b="eq"==a.F?new fd(b,b,!1,!1):"gte"==a.F?new fd(b,E,!1,!1):"gt"==a.F?new fd(b,E,!0,!1):"lte"==a.F?new fd(E,b,!1,!1):new fd(E,b,!1,!0));a=a.Ya?gd(b):[b];a=new gg(a);f=hg(f,a)});c.set(a,f)},a);return c}
Ci.prototype.Zc=function(a){if(this.Te==a)return this.Ed;for(var b=Di(this,a),c=this.Pb.f.length-1;0<=c;c--){var d=this.Pb.f[c];if(null!==(b.get(d.ba.getName())||null))break;b.set(d.ba.getName(),new gg([kd()]))}this.Ed=1==this.Pb.f.length?z(b)[0].Gb():Ai(Ei(this,b));this.Te=a;return this.Ed};function Ei(a,b){var c=y(),d=0;a.Pb.f.forEach(function(a){c.set(a.ba.getName(),d);d++});return Rb(b).sort(function(a,b){return c.get(a)-c.get(b)}).map(function(a){return b.get(a)})};function Fi(a,b){this.pf=b;this.D=a.l(ic)}function Gi(a,b,c){c=c.filter(a.Zf,a);if(0==c.length)return null;a=Hi(a,c);if(0==a.length)return null;if(1==a.length)return a[0];var d=Number.MAX_VALUE;return a.reduce(function(a,c){var h=Ii(c,b);return h<d?(d=h,c):a},null)}
function Hi(a,b){return a.pf.Aa().map(function(a){a=new Ji(this.D,a);Ki(a,b);return a},a).filter(function(a){if(null===a.Ca)a=!1;else{for(var b=!1,e=!0,f=0;f<a.yb.f.length;f++){var h=a.Ca.has(a.yb.f[f].ba.getName());if(b&&h){e=!1;break}h||(b=!0)}a=e}return a})}Fi.prototype.Zf=function(a){var b;if(b=a instanceof Qd)Rd(a),b=null!==a.value&&("between"==a.F||"eq"==a.F||"gt"==a.F||"gte"==a.F||"lt"==a.F||"lte"==a.F);return b?a.M.H()==this.pf:!1};
function Ji(a,b){this.D=a;this.yb=b;this.Vf=B(this.yb.f.map(function(a){return a.ba.getName()}));this.Td=this.Ca=null}function Li(a){null===a.Td&&(a.Td=new Ci(a.yb,a.Ca));return a.Td}function Ki(a,b){b.forEach(function(a){var b=a.gb()[0].getName();this.Vf.has(b)&&(null===this.Ca&&(this.Ca=new Ic),this.Ca.set(b,a.Y()))},a)}function Ii(a,b){var c=Li(a).Zc(b),d=a.D.get(a.yb.m());return c.reduce(function(a,b){return a+d.Wc(b)},0)};function Mi(a,b,c,d){T.call(this,0,-1);this.D=a.l(ic);this.index=b;this.Se=c;this.he=d;this.Pc=this.Oc=!1}t(Mi,T);Mi.prototype.toString=function(){return"index_range_scan("+this.index.m()+", ?, "+(this.he?"reverse":"natural")+(this.Oc?", limit:?":"")+(this.Pc?", skip:?":"")+")"};Mi.prototype.Mc=function(a){var b=this.toString(),c=this.Se.Zc(a),b=b.replace("?",c.toString());this.Oc&&(b=b.replace("?",a.W.toString()));this.Pc&&(b=b.replace("?",a.K.toString()));return b};
Mi.prototype.fa=function(a,b,c){a=this.Se.Zc(c);b=this.D.get(this.index.m());c=(1==a.length&&a[0]instanceof fd&&ld(a[0])?gf(b.get(a[0].c),!1,this.Oc?c.W:void 0,this.Pc?c.K:void 0):b.Xa(a,this.he,this.Oc?c.W:void 0,this.Pc?c.K:void 0)).map(function(a){return new Sb(a,{})},this);return[ud(c,[this.index.Lc])]};function Ni(a){T.call(this,0,1);this.nd=a}t(Ni,T);Ni.prototype.toString=l("select(?)");Ni.prototype.Mc=function(a){a=Vd(a,this.nd);return this.toString().replace("?",a.toString())};Ni.prototype.fa=function(a,b,c){return[Vd(c,this.nd).eval(a[0])]};function Oi(a,b){T.call(this,0,1);this.U=a.l(hc);this.S=b}t(Oi,T);Oi.prototype.toString=function(){return"table_access_by_row_id("+this.S.getName()+")"};Oi.prototype.fa=function(a){return[ud(cf(this.U,od(a[0])),[I(this.S)])]};function Pi(a){this.i=a}t(Pi,ih);Pi.prototype.ob=function(a,b){this.$=a;kg(a,function(a){return a instanceof ri}).forEach(function(a){var d=Qi(a);if(0!=d.length){var e=Gi(new Fi(this.i,a.table),b,d.map(function(a){return Vd(b,a.nd)}));if(null!==e){var f=y();d.forEach(function(a){f.set(a.nd,a)},this);this.$=Ri(this,e,f,a)}}},this);return this.$};function Qi(a){var b=[];for(a=a.getParent();a;)a instanceof Ni&&b.push(a),a=a.getParent();return b}
function Ri(a,b,c,d){(null===b.Ca?[]:b.Ca.values()).map(function(a){return c.get(a)}).forEach(lg);b=new Mi(a.i,b.yb,Li(b),!1);a=new Oi(a.i,d.table);L(a,b);pg(d,d,a,b);return b.hb()};function Si(a,b){T.call(this,0,-1);this.D=a.l(ic);this.S=b}t(Si,T);Si.prototype.toString=function(){return"insert("+this.S.getName()+")"};Si.prototype.fa=function(a,b,c){Ti(this.S,c.values,this.D);b.zb(this.S,c.values);return[ud(c.values,[this.S.getName()])]};function Ti(a,b,c){a=a.Fb().$c();if(null===a?0:a.f[0].autoIncrement){var d=a.f[0].ba.getName();c=c.get(a.m()).max();var e=null===c?0:c[0];b.forEach(function(a){if(0==a.o[d]||null==a.o[d])e++,a.o[d]=e})}}
function Ui(a,b){T.call(this,0,-1);this.D=a.l(ic);this.S=b}t(Ui,T);Ui.prototype.toString=function(){return"insert_replace("+this.S.getName()+")"};Ui.prototype.fa=function(a,b,c){Ti(this.S,c.values,this.D);b.Pd(this.S,c.values);return[ud(c.values,[this.S.getName()])]};function Vi(){T.call(this,0,1)}t(Vi,T);Vi.prototype.toString=l("limit(?)");Vi.prototype.Mc=function(a){return this.toString().replace("?",a.W.toString())};Vi.prototype.fa=function(a,b,c){a[0].entries.splice(c.W);return a};function Wi(a){T.call(this,0,1);this.N=a}t(Wi,T);m=Wi.prototype;m.toString=function(){return"order_by("+$d(this.N)+")"};m.fa=function(a){if(1==a.length){var b;b=a[0];for(var c=null,d=0;d<this.N.length;d++){var e=Fg(this.N[d].M);if(null!==b.Va&&b.Va.has(e.m())){c=e;break}}b=c;(null===b?a[0]:pd(a[0],b)).entries.sort(this.Lf.bind(this))}else a.sort(this.vg.bind(this));return a};
m.V=function(a,b){var c=null,d=null,e=null,f=-1;do f++,e=this.N[f].M,c=this.N[f].lb,d=a(e),e=b(e);while(d==e&&f+1<this.N.length);d=d<e?-1:d>e?1:0;return 1==c?d:-d};m.vg=function(a,b){return this.V(function(b){return b instanceof S?pd(a,b):H(a.entries[a.entries.length-1],b)},function(a){return a instanceof S?pd(b,a):H(b.entries[b.entries.length-1],a)})};m.Lf=function(a,b){return this.V(function(b){return H(a,b)},function(a){return H(b,a)})};function Xi(a,b){this.Ja=a;this.J=b}function Yi(a){return a.J.some(function(a){return a instanceof S},a)?Zi(a):$i(a)}function Zi(a){if(1==a.J.length&&"DISTINCT"==a.J[0].Kb)return a=pd(a.Ja,a.J[0]).entries.map(function(a){var b=new vd(new Sb(-1,{}),1<this.Ja.L.size);xd(b,this.J[0],H(a,this.J[0].child));return b},a),new F(a,[]);var b=new vd(new Sb(-1,{}),1<a.Ja.L.size);a.J.forEach(function(a){var d=a instanceof S?pd(this.Ja,a):H(this.Ja.entries[0],a);xd(b,a,d)},a);return new F([b],G(a.Ja))}
function $i(a){var b=Array(a.Ja.entries.length),c=1<a.Ja.L.size;a.Ja.entries.forEach(function(a,e){b[e]=new vd(new Sb(a.ua.id(),{}),c);this.J.forEach(function(c){xd(b[e],c,H(a,c))},this)},a);return new F(b,G(a.Ja))}function aj(a,b){var c=a.map(function(a){return Yi(new Xi(a,b)).entries[0]});return new F(c,G(a[0]))};function bj(a,b){T.call(this,0,1);this.f=a;this.Ob=b}t(bj,T);bj.prototype.toString=function(){var a="project("+this.f.toString();if(null!==this.Ob)var b=this.Ob.map(function(a){return a.m()}).join(", "),a=a+(", groupBy("+b+")");return a+")"};bj.prototype.fa=function(a){0==a.length?a=[rd()]:1==a.length?(a=a[0],a=[0==this.f.length?a:Yi(new Xi(a,this.f))]):a=[aj(a,this.f)];return a};function cj(a){return a.f.some(function(a){return a instanceof S})||null!==a.Ob};function dj(){T.call(this,0,1)}t(dj,T);dj.prototype.toString=l("skip(?)");dj.prototype.Mc=function(a){return this.toString().replace("?",a.K.toString())};dj.prototype.fa=function(a,b,c){return[new F(a[0].entries.slice(c.K),G(a[0]))]};function ej(){}t(ej,ih);ej.prototype.ob=function(a,b){if(!q(b.W)&&!q(b.K))return a;var c=fj(a);if(null===c)return a;kg(a,function(a){return a instanceof Vi||a instanceof dj}).forEach(function(a){a instanceof Vi?c.Oc=!0:c.Pc=!0;lg(a)},this);return c.hb()};function fj(a){a=kg(a,function(a){return a instanceof Mi},function(a){return a instanceof bj&&cj(a)||a instanceof Wi||1!=K(a).length||a instanceof Ni});return 0<a.length?a[0]:null};function gj(a){this.i=a}t(gj,ih);gj.prototype.ob=function(a,b){var c=hj(a,b);if(null===c)return a;var d;a:{var e=c;d=ij(Jd(c,0));if(null!==d){var f;f=c.N;for(var h=null,k=d.table.Aa(),n=0;n<k.length&&null===h;n++)h=jj(k[n],f);f=h;if(null===f){d=e;break a}e=new Mi(this.i,f.yb,new Bi(f.yb),f.Pe);f=new Oi(this.i,d.table);L(f,e);lg(c);e=pg(d,d,f,e)}d=e}if(d==c)a:if(d=c,e=kj(Jd(c,0)),null!==e){f=jj(e.index,c.N);if(null===f)break a;e.he=f.Pe;d=lg(c).parent}return d.hb()};
function kj(a){a=kg(a,function(a){return a instanceof Mi},function(a){return 1!=K(a).length});return 0<a.length?a[0]:null}function ij(a){a=kg(a,function(a){return a instanceof ri},function(a){return 1!=K(a).length});return 0<a.length?a[0]:null}function hj(a,b){return q(b.N)?kg(a,function(a){return a instanceof Wi})[0]:null}function jj(a,b){if(a.f.length!=b.length||!b.every(function(b,c){return b.M.getName()==a.f[c].ba.getName()}))return null;var c=lj(b,a);return c[0]||c[1]?{yb:a,Pe:c[1]}:null}
function lj(a,b){var c=a.reduce(function(a,b){return a<<1|(0==b.lb?0:1)},0),d=b.f.reduce(function(a,b){return a<<1|(0==b.lb?0:1)},0),c=c^d;return[0==c,c==Math.pow(2,Math.max(a.length,b.f.length))-1]};function mj(a,b,c){this.Da=a;this.de=b;this.Vb=c}mj.prototype.hc=function(){this.Vb.forEach(function(a){this.Da=a.ob(this.Da,this.de)},this);return this.Da};function nj(a,b){T.call(this,0,1);this.S=a;this.Eg=b}t(nj,T);nj.prototype.toString=function(){return"update("+this.S.getName()+")"};nj.prototype.fa=function(a,b){var c=a[0].entries.map(function(a){var b=this.S.fb(a.ua.Fa());this.Eg.forEach(function(a){b.o[a.M.getName()]=a.value},this);return b},this);b.update(this.S,c);return[rd()]};function oj(a){this.i=a;this.je=[new zi,new Pi(this.i),new gj(this.i),new ej,new si(this.i)];this.Id=[new Pi(this.i)]}oj.prototype.create=function(a,b){var c=a.hb();if(c instanceof Wg||c instanceof Vg)return pj(this,a,b);if(c instanceof bh||c instanceof fh||c instanceof gh)return pj(this,a,b,this.je);if(c instanceof Xg||c instanceof Yg)return pj(this,a,b,this.Id);throw new D(8);};function pj(a,b,c,d){a=ig(b.hb(),a.hg.bind(a));null!=d&&(a=(new mj(a,c,d)).hc());return new ae(a,b.ca())}
oj.prototype.hg=function(a){if(a instanceof bh)return new bj(a.f,a.Ob);if(a instanceof eh)return new ti(a.f);if(a instanceof dh)return new Jg(a.f);if(a instanceof ch)return new Wi(a.N);if(a instanceof gh)return new dj;if(a instanceof fh)return new Vi;if(a instanceof Zg)return new Ni(a.I.Y());if(a instanceof ah)return new nh;if(a instanceof hh)return new vi(this.i,a.I,a.Qb);if(a instanceof $g)return new ri(this.i,a.table);if(a instanceof Xg)return new pi(a.table);if(a instanceof Yg)return new nj(a.table,
a.qe);if(a instanceof Wg)return new Ui(this.i,a.table);if(a instanceof Vg)return new Si(this.i,a.table);throw new D(514);};function qj(a){this.fg=new oi;this.qg=new oj(a)};function rj(){this.We=y()}function sj(a,b){var c=a.We.get(b.getName())||null;null===c&&(c=new tj,a.We.set(b.getName(),c));return c}function uj(a,b,c,d){c.forEach(function(a){a=sj(this,a);0==d?(a.Za=null,a.uc=b):3==d?(null===a.Xb&&(a.Xb=B()),a.Xb.add(b),null===a.Qa&&(a.Qa=B()),a.Qa.delete(b)):1==d?(null===a.Qa&&(a.Qa=B()),a.Qa.add(b)):2==d&&(a.Za=b)},a)}
function vj(a,b,c,d){var e=!0;c.forEach(function(a){if(e){a=sj(this,a);var c=null===a.Qa||0==a.Qa.size;e=0==d?(null===a.Xb||0==a.Xb.size)&&c&&null===a.uc&&null!==a.Za&&a.Za==b:3==d?null===a.uc&&null===a.Za&&null!==a.Qa&&a.Qa.has(b):1==d?null===a.Za:c&&(null===a.Za||a.Za==b)}},a);return e}function wj(a,b,c,d){var e=vj(a,b,c,d);e&&uj(a,b,c,d);return e}rj.prototype.releaseLock=function(a,b){b.forEach(function(b){sj(this,b).releaseLock(a)},this)};
function xj(a,b){b.forEach(function(a){sj(this,a).Za=null},a)}function tj(){this.Xb=this.Qa=this.Za=this.uc=null}tj.prototype.releaseLock=function(a){this.uc==a&&(this.uc=null);this.Za==a&&(this.Za=null);null===this.Qa||this.Qa.delete(a);null===this.Xb||this.Xb.delete(a)};function yj(){this.Ub=new zj;this.Cc=new rj}function je(a,b){(2>b.getPriority()||2>b.getPriority())&&xj(a.Cc,b.ca());a.Ub.zb(b);Aj(a);return b.Nb().da}function Aj(a){for(var b=a.Ub.Gb(),c=0;c<b.length;c++){var d=b[c],e=!1;if(e=0==d.G()?Bj(a,d,1,3):Bj(a,d,2,0))a.Ub.remove(d),e=a,d.exec().then(e.ng.bind(e,d),e.mg.bind(e,d))}}function Bj(a,b,c,d){var e=!1;wj(a.Cc,b.Y(),b.ca(),c)&&(e=wj(a.Cc,b.Y(),b.ca(),d));return e}yj.prototype.ng=function(a,b){this.Cc.releaseLock(a.Y(),a.ca());a.Nb().resolve(b);Aj(this)};
yj.prototype.mg=function(a,b){this.Cc.releaseLock(a.Y(),a.ca());a.Nb().reject(b);Aj(this)};function zj(){this.Ub=[]}zj.prototype.zb=function(a){ff(this.Ub,a,function(a,c){var d=a.getPriority()-c.getPriority();return 0==d?a.Y()-c.Y():d})};zj.prototype.Gb=function(){return this.Ub.slice()};zj.prototype.remove=function(a){var b=this.Ub;a=xa(b,a);var c;(c=0<=a)&&Array.prototype.splice.call(b,a,1);return c};function Cj(a,b){this.Jd=Ad.xc();this.ee=a;this.jd=b;this.J=Dj(this)}function Dj(a){if(0<a.ee.f.length)return a.ee.f;var b=[];a.ee.c.forEach(function(a){a.gb().forEach(function(a){b.push(a)})});return b}Cj.prototype.V=function(a,b){return this.J.every(function(c){return Gd(this.Jd,c.G(),"eq")(H(a,c),H(b,c))},this)};
function Ej(a,b,c){var d=null===b?[]:b.entries,e=ob(d,c.entries,a.V.bind(a),function(a){return d[a]});b=[];for(var f=0,h=0;h<d.length;h++){var k=d[h];e[f]==k?f++:(k=a.jd.splice(f,1),k=Fj(h,k,0,a.jd),b.push(k))}e=ob(d,c.entries,a.V.bind(a),function(a,b){return c.entries[b]});for(h=f=0;h<c.entries.length;h++)k=c.entries[h],e[f]==k?f++:(a.jd.splice(h,0,k.ua.o),k=Fj(h,[],1,a.jd),b.push(k));return b}function Fj(a,b,c,d){return{Gg:c,index:a,object:d,Jg:b,type:"splice"}};function Gj(){this.fc=y()}Gj.prototype.vd=function(a,b){var c=ka(a.a).toString(),d=this.fc.get(c)||null;null===d&&(d=new Hj(a),this.fc.set(c,d));d.vd(b)};Gj.prototype.fe=function(a,b){var c=ka(a.a).toString(),d=this.fc.get(c)||null;d.fe(b);0<d.Ec.size||this.fc.delete(c)};function ie(a,b){var c=B();b.forEach(function(a){c.add(a.getName())});var d=[];a.fc.forEach(function(a){a=a.zc();a.context.c.some(function(a){return c.has(a.getName())})&&d.push(a)});return d}
function ge(a,b,c){b=ka(null!=b.Uc?b.Uc:b).toString();a=a.fc.get(b)||null;null!==a&&Ij(a,c)}function Hj(a){this.Bf=a;this.Ec=B();this.kg=[];this.Ue=null;this.Jf=new Cj(a.a,this.kg)}Hj.prototype.vd=function(a){this.Ec.has(a)||this.Ec.add(a)};Hj.prototype.fe=function(a){return this.Ec.delete(a)};Hj.prototype.zc=function(){var a=this.Bf;return{context:a.a,ce:Lh(a)}};function Ij(a,b){var c=Ej(a.Jf,a.Ue,b);a.Ue=b;0<c.length&&a.Ec.forEach(function(a){a(c)})};function Jj(a,b){var c=a.l(mc),d=b||{},e=new bf(c);a.nb(hc,e);var e=null,f=!1;null!=d.storeType?e=d.storeType:(q(Qb)||(Qb=new Pb),e=Qb,e=e.Wf?0:e.Fg?4:1);switch(e){case 0:e=new Ie(a,c);break;case 1:e=new Pe(c);break;case 5:e=new Re(c);break;case 4:e=new Ze(a,c,d.webSqlDbSize);break;case 3:e=new ve(c,d.firebase);f=!0;break;default:throw new D(300);}a.nb(gc,e);var h=new fg;a.nb(ic,h);return e.Ga(d.onUpgrade).then(function(){var b=new qj(a);a.nb(jc,b);b=new yj;a.nb(kc,b);b=new Gj;a.nb(lc,b);return h.Ga(c)}).then(function(){if(f){var b=
new ke(a);b.Ka.subscribe(b.Yd.bind(b))}return(new Zf(a)).Ga(c)})};function Kj(a){this.i=a;this.g=a.l(mc);this.aa=B(this.g.ra());this.$a=x()}m=Kj.prototype;m.exec=function(){var a=this.i.l(ic),b=this.i.l(hc),c={};this.g.ra().forEach(function(d){var f=a.get(Me(d)).Xa(),f=cf(b,f).map(function(a){return a.o});c[d.getName()]=f});var d={name:this.g.name(),version:this.g.version(),tables:c},d=new vd(new Sb(-1,d),!0);return w([new F([d],[])])};m.G=l(0);m.ca=g("aa");m.Nb=g("$a");m.Y=function(){return ka(this)};m.getPriority=l(0);function Lj(a,b){this.i=a;this.g=a.l(mc);this.aa=B(this.g.ra());this.$a=x();this.xa=b;this.Ka=a.l(gc);this.U=a.l(hc);this.D=a.l(ic)}m=Lj.prototype;
m.exec=function(){if(!(this.Ka instanceof Ie||this.Ka instanceof Pe||this.Ka instanceof Ze))throw new D(300);var a;a:{a=this.g.ra();for(var b=0;b<a.length;++b)if(0<this.D.get(Me(a[b])).Ma().na){a=!1;break a}a=!0}if(!a)throw new D(110);if(this.g.name()!=this.xa.name||this.g.version()!=this.xa.version)throw new D(111);if(null==this.xa.tables)throw new D(112);return Mj(this)};m.G=l(1);m.ca=g("aa");m.Nb=g("$a");m.Y=function(){return ka(this)};m.getPriority=l(0);
function Mj(a){var b=new ad(a.i,a.aa),b=a.Ka.Db(a.G(),C(a.aa),b),c;for(c in a.xa.tables){var d=a.g.table(c),e=a.xa.tables[c].map(function(a){return d.vb(a)}),f=b.H(c,d.fb,0);a.U.Wb(c,e);var h=a.D.lc.get(c)||[];e.forEach(function(a){h.forEach(function(b){var c=a.jb(b.getName());b.add(c,a.id())})});f.put(e)}return b.ia()};function Nj(a,b){this.i=a;this.Ka=a.l(gc);this.Ea=a.l(kc);this.Ib=a.l(lc);this.aa=B(b);this.Oa=new ad(this.i,this.aa);this.$a=x();this.vc=x();this.te=x()}m=Nj.prototype;m.exec=function(){this.te.resolve();return this.vc.da};m.G=l(1);m.ca=g("aa");m.Nb=g("$a");m.Y=function(){return ka(this)};m.getPriority=l(2);function Oj(a){je(a.Ea,a);return a.te.da}
function Pj(a,b){var c=b.zc();return c.ce.hb().exec(a.Oa,c.context).then(function(a){return nd(a[0])},function(a){this.Oa.Jb();var b=new ib(a.name);this.vc.reject(b);throw a;}.bind(a))}m.ia=function(){this.Ka.Db(this.G(),C(this.aa),this.Oa).ia().then(function(){this.Jc();this.vc.resolve()}.bind(this),function(a){this.Oa.Jb();this.vc.reject(a)}.bind(this));return this.$a.da};m.Jb=function(){this.Oa.Jb();this.vc.resolve();return this.$a.da};
m.Jc=function(){var a=ie(this.Ib,this.aa);0!=a.length&&(a=new fe(this.i,a),je(this.Ea,a))};function Qj(a){this.i=a;this.Ea=a.l(kc);this.Nc=null;this.Ra=0;0==Rj.size&&(Rj.set(0,B([1,4])),Rj.set(1,B([2])),Rj.set(2,B([3,5,6])),Rj.set(3,B([2,7])),Rj.set(4,B([7])),Rj.set(5,B([7])),Rj.set(6,B([7])))}r("lf.proc.Transaction",Qj);var Rj=y();function Sj(a,b){var c=Rj.get(a.Ra)||null;if(null===c||!c.has(b))throw new D(107,a.Ra,b);a.Ra=b}
Qj.prototype.exec=function(a){Sj(this,4);var b=[];try{a.forEach(function(a){a.cb();b.push(a.zc())},this)}catch(c){return Sj(this,7),ab(c)}a=new oh(this.i,b);return je(this.Ea,a).then(function(a){Sj(this,7);return a.map(function(a){return nd(a)})}.bind(this),function(a){Sj(this,7);throw a;}.bind(this))};Qj.prototype.exec=Qj.prototype.exec;Qj.prototype.zf=function(a){Sj(this,1);this.Nc=new Nj(this.i,a);return Oj(this.Nc).then(function(){Sj(this,2)}.bind(this))};Qj.prototype.begin=Qj.prototype.zf;
Qj.prototype.yf=function(a){Sj(this,3);return Pj(this.Nc,a).then(function(a){Sj(this,2);return a}.bind(this),function(a){Sj(this,7);throw a;}.bind(this))};Qj.prototype.attach=Qj.prototype.yf;Qj.prototype.ia=function(){Sj(this,5);return this.Nc.ia().then(function(){Sj(this,7)}.bind(this))};Qj.prototype.commit=Qj.prototype.ia;Qj.prototype.Jb=function(){Sj(this,6);return this.Nc.Jb().then(function(){Sj(this,7)}.bind(this))};Qj.prototype.rollback=Qj.prototype.Jb;function W(a){this.i=a;this.g=a.l(mc);this.fd=!1}r("lf.proc.Database",W);W.prototype.Ga=function(a){this.i.nb(mc,this.g);return Jj(this.i,a).then(function(){this.fd=!0;this.Ea=this.i.l(kc);return this}.bind(this))};W.prototype.init=W.prototype.Ga;W.prototype.xb=g("g");W.prototype.getSchema=W.prototype.xb;function Tj(a){if(!a.fd)throw new D(2);}W.prototype.select=function(a){Tj(this);return new V(this.i,1!=arguments.length||null!=arguments[0]?Array.prototype.slice.call(arguments):[])};
W.prototype.select=W.prototype.select;W.prototype.zb=function(){Tj(this);return new Nh(this.i)};W.prototype.insert=W.prototype.zb;W.prototype.Pd=function(){Tj(this);return new Nh(this.i,!0)};W.prototype.insertOrReplace=W.prototype.Pd;W.prototype.update=function(a){Tj(this);return new Xh(this.i,a)};W.prototype.update=W.prototype.update;W.prototype.delete=function(){Tj(this);return new Mh(this.i)};W.prototype["delete"]=W.prototype.delete;
W.prototype.observe=function(a,b){Tj(this);this.i.l(lc).vd(a,b)};W.prototype.observe=W.prototype.observe;W.prototype.unobserve=function(a,b){Tj(this);this.i.l(lc).fe(a,b)};W.prototype.unobserve=W.prototype.unobserve;W.prototype.Hf=function(){Tj(this);return new Qj(this.i)};W.prototype.createTransaction=W.prototype.Hf;W.prototype.close=function(){try{this.i.l(gc).close()}catch(a){}this.i.clear();this.fd=!1};W.prototype.close=W.prototype.close;
W.prototype.Pf=function(){Tj(this);var a=new Kj(this.i);return je(this.Ea,a).then(function(a){return nd(a[0])[0]})};W.prototype["export"]=W.prototype.Pf;W.prototype.import=function(a){Tj(this);a=new Lj(this.i,a);return je(this.Ea,a).then(l(null))};W.prototype["import"]=W.prototype.import;function X(a,b,c,d,e,f){this.S=a;this.u=b;this.Qe=c;this.Oe=d;this.rf=e;this.bb=f||null}r("lf.schema.BaseColumn",X);m=X.prototype;m.getName=g("u");m.m=function(){return I(this.S)+"."+this.u};m.toString=function(){return this.m()};m.H=g("S");m.G=g("rf");X.prototype.getType=X.prototype.G;X.prototype.Wa=g("bb");X.prototype.Aa=function(){null==this.pa&&(this.pa=[],this.H().Aa().forEach(function(a){-1!=a.f.map(function(a){return a.ba.getName()}).indexOf(this.u)&&this.pa.push(a)},this));return this.pa};
X.prototype.za=function(){if(!q(this.ga)){var a=this.Aa().filter(function(a){return 1!=a.f.length?!1:a.f[0].ba.getName()==this.getName()},this);this.ga=0<a.length?a[0]:null}return this.ga};X.prototype.ic=g("Oe");X.prototype.isNullable=X.prototype.ic;X.prototype.Bc=g("Qe");X.prototype.Na=function(a){return zg(this,a,"eq")};X.prototype.eq=X.prototype.Na;X.prototype.Xe=function(a){return zg(this,a,"neq")};X.prototype.neq=X.prototype.Xe;X.prototype.Ud=function(a){return zg(this,a,"lt")};
X.prototype.lt=X.prototype.Ud;X.prototype.gg=function(a){return zg(this,a,"lte")};X.prototype.lte=X.prototype.gg;X.prototype.Rf=function(a){return zg(this,a,"gt")};X.prototype.gt=X.prototype.Rf;X.prototype.Sf=function(a){return zg(this,a,"gte")};X.prototype.gte=X.prototype.Sf;X.prototype.match=function(a){return zg(this,a,"match")};X.prototype.match=X.prototype.match;X.prototype.Af=function(a,b){return zg(this,[a,b],"between")};X.prototype.between=X.prototype.Af;
X.prototype.Tf=function(a){return zg(this,a,"in")};X.prototype["in"]=X.prototype.Tf;X.prototype.bg=function(){return this.Na(null)};X.prototype.isNull=X.prototype.bg;X.prototype.ag=function(){return this.Xe(null)};X.prototype.isNotNull=X.prototype.ag;X.prototype.pc=function(a){return new X(this.S,this.u,this.Qe,this.Oe,this.rf,a)};X.prototype.as=X.prototype.pc;function Uj(){this.qd=y()}var Vj;Uj.prototype.clear=function(){this.qd.clear()};Uj.prototype.clear=Uj.prototype.clear;Uj.prototype.nb=function(a,b){this.qd.set(a.toString(),b);return b};Uj.prototype.registerService=Uj.prototype.nb;Uj.prototype.l=function(a){var b=this.qd.get(a.toString())||null;if(null===b)throw new D(7,a.toString());return b};Uj.prototype.getService=Uj.prototype.l;Uj.prototype.Sd=function(a){return this.qd.has(a.toString())};Uj.prototype.isRegistered=Uj.prototype.Sd;function Wj(a){this.g=a;this.Bd=new Ic;this.ge=new Ic;this.Ze=new Ic;this.Ce=y();this.h=new Ic;this.ye=new Ic;this.ff=new Ic;this.Be=new Ic;Xj(this)}function Xj(a){a.g.ra().forEach(function(a){var c=a.getName();a.Fb().Od().forEach(function(d){this.Ze.set(c,this.g.table(d.Pa));this.h.set(d.Pa,a);0==d.action?(this.ge.set(d.Pa,d),this.ff.set(d.Pa,a)):(this.Bd.set(d.Pa,d),this.ye.set(d.Pa,a));this.Ce.set(a.getName()+"."+d.tb,d.Pa);this.Be.set(d.Pa+"."+d.Gc,a.getName())},this)},a)}
function Rc(a,b,c){if(null!=c)return 1==c?a.Bd.get(b):a.ge.get(b);c=a.Bd.get(b);a=a.ge.get(b);return null===c&&null===a?null:(c||[]).concat(a||[])}function uh(a,b){var c=b.get(a);return null===c?[]:c}function wh(a,b){var c=B();b.forEach(function(a){(a=this.Ce.get(a))&&c.add(a)},a);return C(c).map(function(a){return this.g.table(a)},a)}function sh(a,b,c){return null!=c?0==c?uh(b,a.ff):uh(b,a.ye):uh(b,a.h)}
function xh(a,b){var c=B();b.forEach(function(a){(a=this.Be.get(a))&&a.forEach(function(a){c.add(a)})},a);return C(c).map(function(a){return this.g.table(a)},a)};function Yj(a,b,c){this.rg=a;this.jg=b;this.Qf=c}r("lf.schema.Constraint",Yj);Yj.prototype.$c=g("rg");Yj.prototype.getPrimaryKey=Yj.prototype.$c;Yj.prototype.Od=g("Qf");Yj.prototype.getForeignKeys=Yj.prototype.Od;function Zj(a,b,c){var d=a.ref.split(".");if(2!=d.length)throw new D(540,c);this.Ae=b;this.tb=a.local;this.Pa=d[0];this.Gc=d[1];this.name=b+"."+c;this.action=a.action;this.timing=a.timing};function Y(a){ak(a);this.Jd=Ad.xc();this.u=a;this.J=y();this.sd=B();this.mc=B();this.hd=B();this.Ba=null;this.pa=y();this.md=!1;this.wb=[]}r("lf.schema.TableBuilder",Y);function bk(a){this.name=a.name;this.lb=a.order;this.autoIncrement=a.autoIncrement}var ck=B([0,6]);function ak(a){if(!/^[A-Za-z_][A-Za-z0-9_]*$/.test(a))throw new D(502,a);}function dk(a,b){if(b==a.u)throw new D(546,b);if(a.J.has(b)||a.pa.has(b)||a.mc.has(b))throw new D(503,a.u+"."+b);}
function ek(a,b){var c=!1;b.forEach(function(a){var b=this.J.get(a.name);c=c||a.autoIncrement;if(a.autoIncrement&&3!=b)throw new D(504);},a);if(c&&1<b.length)throw new D(505);}function fk(a){if(null!==a.Ba){var b=a.pa.get(a.Ba).map(function(a){return a.name}),c=0;if(a.wb.some(function(a,e){c=e;return-1!=b.indexOf(a.tb)},a))throw new D(543,a.wb[c].name);}}
function gk(a){if(null!==a.Ba){var b=function(a){return a.name},c=JSON.stringify(a.pa.get(a.Ba).map(b));a.pa.forEach(function(a,e){if(e!=this.Ba){var f=a.map(b);if(JSON.stringify(f)==c)throw new D(544,this.u+"."+e);}},a)}}function hk(a){null===a.Ba||a.pa.get(a.Ba).forEach(function(a){if(this.hd.has(a.name))throw new D(545,this.u+"."+a.name);},a)}Y.prototype.tf=function(a,b){ak(a);dk(this,a);this.J.set(a,b);ck.has(b)&&this.ve([a]);return this};Y.prototype.addColumn=Y.prototype.tf;
Y.prototype.vf=function(a,b){var c=this.u;this.Ba="pk"+(c[0].toUpperCase()+c.substring(1));ak(this.Ba);dk(this,this.Ba);c=ik(this,a,!0,void 0,b);ek(this,c);1==c.length&&this.sd.add(c[0].name);this.mc.add(this.Ba);this.pa.set(this.Ba,c);return this};Y.prototype.addPrimaryKey=Y.prototype.vf;
Y.prototype.uf=function(a,b){ak(a);dk(this,a);var c=new Zj(b,this.u,a);q(c.action)||(c.action=0);q(c.timing)||(c.timing=0);if(1==c.action&&1==c.timing)throw new D(506);if(!this.J.has(c.tb))throw new D(540,a);this.wb.push(c);this.ue(a,[c.tb],this.sd.has(c.tb));return this};Y.prototype.addForeignKey=Y.prototype.uf;Y.prototype.wf=function(a,b){ak(a);dk(this,a);var c=ik(this,b,!0);1==c.length&&(this.sd.add(c[0].name),jk(this,c[0].name));this.pa.set(a,c);this.mc.add(a);return this};
Y.prototype.addUnique=Y.prototype.wf;function jk(a,b){a.wb.forEach(function(a){a.tb==b&&this.mc.add(a.name.split(".")[1])},a)}Y.prototype.ve=function(a){ik(this,a,!1).forEach(function(a){this.hd.add(a.name)},this);return this};Y.prototype.addNullable=Y.prototype.ve;Y.prototype.ue=function(a,b,c,d){ak(a);dk(this,a);b=ik(this,b,!0,d);c&&this.mc.add(a);this.pa.set(a,b);return this};Y.prototype.addIndex=Y.prototype.ue;Y.prototype.Cb=ca("md");Y.prototype.persistentIndex=Y.prototype.Cb;
Y.prototype.xb=function(){fk(this);gk(this);hk(this);return new (kk(this))};Y.prototype.getSchema=Y.prototype.xb;function lk(a){return a.wb}function ik(a,b,c,d,e){var f=b,f="string"==typeof b[0]?b.map(function(a){return new bk({name:a,order:null!=d?d:1,autoIncrement:e||!1})}):b.map(function(a){return new bk(a)});f.forEach(function(a){if(!this.J.has(a.name))throw new D(508,this.u,a.name);if(c){var b=this.J.get(a.name);if(0==b||6==b)throw new D(509,this.u,a.name);}},a);return f}
function kk(a){function b(){function b(c){return a.pa.get(c).map(function(a){return{ba:this[a.name],lb:a.lb,autoIncrement:a.autoIncrement}},this)}var d=Rb(a.J).map(function(b){this[b]=new X(this,b,a.sd.has(b),a.hd.has(b),a.J.get(b));return this[b]},this),e=Rb(a.pa).map(function(d){return new Bg(a.u,d,a.mc.has(d),b.call(this,d))},this);R.call(this,a.u,d,e,a.md);var f=null===a.Ba?null:new Bg(a.u,a.Ba,!0,b.call(this,a.Ba)),h=d.filter(function(b){return!a.hd.has(b.getName())});this.Df=new Yj(f,h,a.wb);
this.jf=mk(a,d,e)}t(b,R);b.prototype.vb=function(a){return new this.jf(Tb++,a)};b.prototype.createRow=b.prototype.vb;b.prototype.fb=function(a){var b={};this.gb().forEach(function(e){var f=e.getName();e=e.G();var h=a.value[f];if(0==e)if(e=h,null!=e&&""!=e){0!=e.length%2&&(e="0"+e);for(var h=new ArrayBuffer(e.length/2),k=new Uint8Array(h),n=0,A=0;n<e.length;n+=2)k[A++]=parseInt(e.substr(n,2),16);e=h}else e=null;else e=2==e?null!=h?new Date(h):null:h;b[f]=e},this);return new this.jf(a.id,b)};b.prototype.deserializeRow=
b.prototype.fb;b.prototype.Fb=g("Df");b.prototype.getConstraint=b.prototype.Fb;return b}
function mk(a,b,c){function d(a,d){this.J=b;this.pa=c;Sb.call(this,a,d)}t(d,Sb);d.prototype.Ee=function(){var a={};this.J.forEach(function(b){a[b.getName()]=b.ic()?null:Hc[b.G()]});return a};d.prototype.qf=function(){var a={};this.J.forEach(function(b){var c=b.getName();b=b.G();var d=this.o[c];a[c]=0==b?null!=d?Xb(d):null:2==b?null!=d?d.getTime():null:6==b?null!=d?d:null:d},this);return a};var e=function(a){var b=this.J.get(a.getName()),c=this.Jd.Re.get(b)||null;return function(b){return c(b[a.getName()])}}.bind(a),
f=function(a){var b=a.map(function(a){return e(a.ba)});return function(a){return b.map(function(b){return b(a)})}}.bind(a),h={};c.forEach(function(a){var b=a.m();a=1==a.f.length?e(a.f[0].ba):f(a.f);h[b]=a});d.prototype.jb=function(a){return-1!=a.indexOf("#")?this.id():h.hasOwnProperty(a)?h[a](this.o):null};return d};function nk(a,b){this.g=new Z(a,b);this.rb=y();this.wc=!1;this.j=null}r("lf.schema.Builder",nk);function ok(a,b){b.wb.forEach(function(a){var d=a.Pa;if(!this.rb.has(d))throw new D(536,a.name);var d=this.rb.get(d).xb(),e=a.Gc;if(!d.hasOwnProperty(e))throw new D(537,a.name);if(b.xb()[a.tb].G()!=d[e].G())throw new D(538,a.name);if(!d[e].Bc())throw new D(539,a.name);},a)}
nk.prototype.Cf=function(a){a.wb.forEach(function(a){lk(this.rb.get(a.Pa)).forEach(function(c){if(c.tb==a.Gc)throw new D(534,a.name);},this)},this)};function pk(a){a.wc||(a.rb.forEach(function(a){ok(this,a);a=a.xb();this.g.L.set(a.getName(),a)},a),z(a.rb).forEach(a.Cf,a),qk(a),a.rb.clear(),a.wc=!0)}function rk(a,b,c){b.re||(b.re=!0,b.Zd=!0,b.Fe.forEach(function(a){a=c.get(a);if(!a.re)rk(this,a,c);else if(a.Zd&&b!=a)throw new D(533);},a));b.Zd=!1}
function qk(a){var b=y();a.g.L.forEach(function(a,d){b.set(d,new sk(d))},a);a.rb.forEach(function(a,d){a.wb.forEach(function(a){b.get(a.Pa).Fe.add(d)})});z(b).forEach(function(a){rk(this,a,b)},a)}function sk(a){this.Zd=this.re=!1;this.Fe=B();this.Lc=a}nk.prototype.xb=function(){this.wc||pk(this);return this.g};nk.prototype.getSchema=nk.prototype.xb;nk.prototype.He=function(){var a=new fc("ns_"+this.g.name()),b;Vj||(Vj=new Uj);b=Vj;var c=null;b.Sd(a)?c=b.l(a):(c=new Uj,b.nb(a,c));return c};
nk.prototype.getGlobal=nk.prototype.He;nk.prototype.connect=function(a){if(null!==this.j&&this.j.fd)throw new D(113);if(null===this.j){var b=this.He();b.Sd(mc)||b.nb(mc,this.xb());this.j=new W(b)}return this.j.Ga(a)};nk.prototype.connect=nk.prototype.connect;nk.prototype.Gf=function(a){if(this.rb.has(a))throw new D(503,a);if(this.wc)throw new D(535);this.rb.set(a,new Y(a));return this.rb.get(a)};nk.prototype.createTable=nk.prototype.Gf;
nk.prototype.ke=function(a){if(this.wc)throw new D(535);this.g.ke(a);return this};nk.prototype.setPragma=nk.prototype.ke;function Z(a,b){this.u=a;this.$b=b;this.L=y();this.cf={Kf:!1}}r("lf.schema.DatabaseSchema",Z);Z.prototype.name=g("u");Z.prototype.name=Z.prototype.name;Z.prototype.version=g("$b");Z.prototype.version=Z.prototype.version;Z.prototype.ra=function(){return z(this.L)};Z.prototype.tables=Z.prototype.ra;Z.prototype.table=function(a){if(!this.L.has(a))throw new D(101,a);return this.L.get(a)};
Z.prototype.table=Z.prototype.table;Z.prototype.info=function(){this.Me||(this.Me=new Wj(this));return this.Me};Z.prototype.bf=g("cf");Z.prototype.pragma=Z.prototype.bf;Z.prototype.ke=ca("cf");r("lf.schema.create",function(a,b){return new nk(a,b)});v.prototype.catch=v.prototype.ne;v.prototype["catch"]=v.prototype.catch;
try{if(module){module.exports=lf;}}catch(e){}}.bind(window))()
//# sourceMappingURL=lovefield.es6.js.map
