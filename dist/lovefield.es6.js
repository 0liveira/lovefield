if(!self.window){window=this;}
(function(){'use strict';function aa(){return function(){}}function ba(a){return function(b){this[a]=b}}function g(a){return function(){return this[a]}}function l(a){return function(){return a}}var m,p=this;function q(a){return void 0!==a}function da(){}
function ea(a){var b=typeof a;if("object"==b)if(a){if(a instanceof Array)return"array";if(a instanceof Object)return b;var c=Object.prototype.toString.call(a);if("[object Window]"==c)return"object";if("[object Array]"==c||"number"==typeof a.length&&"undefined"!=typeof a.splice&&"undefined"!=typeof a.propertyIsEnumerable&&!a.propertyIsEnumerable("splice"))return"array";if("[object Function]"==c||"undefined"!=typeof a.call&&"undefined"!=typeof a.propertyIsEnumerable&&!a.propertyIsEnumerable("call"))return"function"}else return"null";
else if("function"==b&&"undefined"==typeof a.call)return"object";return b}function fa(a){return null===a}function ga(a){return null!=a}function ha(a){var b=ea(a);return"array"==b||"object"==b&&"number"==typeof a.length}function ia(a){return"string"==typeof a}function ja(a){return"function"==ea(a)}function ka(a){return a[la]||(a[la]=++ma)}var la="closure_uid_"+(1E9*Math.random()>>>0),ma=0;function na(a,b,c){return a.call.apply(a.bind,arguments)}
function oa(a,b,c){if(!a)throw Error();if(2<arguments.length){var d=Array.prototype.slice.call(arguments,2);return function(){var c=Array.prototype.slice.call(arguments);Array.prototype.unshift.apply(c,d);return a.apply(b,c)}}return function(){return a.apply(b,arguments)}}function pa(a,b,c){pa=Function.prototype.bind&&-1!=Function.prototype.bind.toString().indexOf("native code")?na:oa;return pa.apply(null,arguments)}
function qa(a,b){var c=Array.prototype.slice.call(arguments,1);return function(){var b=c.slice();b.push.apply(b,arguments);return a.apply(this,b)}}function r(a,b){var c=a.split("."),d=p;c[0]in d||!d.execScript||d.execScript("var "+c[0]);for(var e;c.length&&(e=c.shift());)!c.length&&q(b)?d[e]=b:d=d[e]?d[e]:d[e]={}}
function t(a,b){function c(){}c.prototype=b.prototype;a.ab=b.prototype;a.prototype=new c;a.prototype.constructor=a;a.Hg=function(a,c,f){for(var h=Array(arguments.length-2),k=2;k<arguments.length;k++)h[k-2]=arguments[k];return b.prototype[c].apply(a,h)}};function ra(a){if(Error.captureStackTrace)Error.captureStackTrace(this,ra);else{var b=Error().stack;b&&(this.stack=b)}a&&(this.message=String(a))}t(ra,Error);ra.prototype.name="CustomError";var sa=String.prototype.trim?function(a){return a.trim()}:function(a){return a.replace(/^[\s\xa0]+|[\s\xa0]+$/g,"")};
function ta(a){var b=0,c=sa(String(ua)).split(".");a=sa(String(a)).split(".");for(var d=Math.max(c.length,a.length),e=0;0==b&&e<d;e++){var f=c[e]||"",h=a[e]||"",k=/(\d*)(\D*)/g,n=/(\d*)(\D*)/g;do{var z=k.exec(f)||["","",""],O=n.exec(h)||["","",""];if(0==z[0].length&&0==O[0].length)break;b=va(0==z[1].length?0:parseInt(z[1],10),0==O[1].length?0:parseInt(O[1],10))||va(0==z[2].length,0==O[2].length)||va(z[2],O[2])}while(0==b)}return b}function va(a,b){return a<b?-1:a>b?1:0};function wa(a,b,c){this.eg=c;this.If=a;this.wg=b;this.nd=0;this.hd=null}wa.prototype.get=function(){var a;0<this.nd?(this.nd--,a=this.hd,this.hd=a.next,a.next=null):a=this.If();return a};wa.prototype.put=function(a){this.wg(a);this.nd<this.eg&&(this.nd++,a.next=this.hd,this.hd=a)};var xa=Array.prototype,ya=xa.indexOf?function(a,b,c){return xa.indexOf.call(a,b,c)}:function(a,b,c){c=null==c?0:0>c?Math.max(0,a.length+c):c;if(ia(a))return ia(b)&&1==b.length?a.indexOf(b,c):-1;for(;c<a.length;c++)if(c in a&&a[c]===b)return c;return-1},za=xa.forEach?function(a,b,c){xa.forEach.call(a,b,c)}:function(a,b,c){for(var d=a.length,e=ia(a)?a.split(""):a,f=0;f<d;f++)f in e&&b.call(c,e[f],f,a)},Aa=xa.map?function(a,b,c){return xa.map.call(a,b,c)}:function(a,b,c){for(var d=a.length,e=Array(d),
f=ia(a)?a.split(""):a,h=0;h<d;h++)h in f&&(e[h]=b.call(c,f[h],h,a));return e},Ca=xa.reduce?function(a,b,c,d){d&&(b=pa(b,d));return xa.reduce.call(a,b,c)}:function(a,b,c,d){var e=c;za(a,function(c,h){e=b.call(d,e,c,h,a)});return e},Da=xa.some?function(a,b,c){return xa.some.call(a,b,c)}:function(a,b,c){for(var d=a.length,e=ia(a)?a.split(""):a,f=0;f<d;f++)if(f in e&&b.call(c,e[f],f,a))return!0;return!1};function Ea(a,b,c){return 2>=arguments.length?xa.slice.call(a,b):xa.slice.call(a,b,c)}
function Fa(a){for(var b=[],c=0;c<a;c++)b[c]=0;return b}function Ga(a){for(var b=[],c=0;c<arguments.length;c++){var d=arguments[c];if("array"==ea(d))for(var e=0;e<d.length;e+=8192)for(var f=Ga.apply(null,Ea(d,e,e+8192)),h=0;h<f.length;h++)b.push(f[h]);else b.push(d)}return b};var Ha;a:{var Ia=p.navigator;if(Ia){var Ja=Ia.userAgent;if(Ja){Ha=Ja;break a}}Ha=""}function u(a){return-1!=Ha.indexOf(a)};function Ka(){return u("Opera")||u("OPR")}function La(){return(u("Chrome")||u("CriOS"))&&!Ka()&&!u("Edge")};function Ma(a){p.setTimeout(function(){throw a;},0)}var Na;
function Oa(){var a=p.MessageChannel;"undefined"===typeof a&&"undefined"!==typeof window&&window.postMessage&&window.addEventListener&&!u("Presto")&&(a=function(){var a=document.createElement("IFRAME");a.style.display="none";a.src="";document.documentElement.appendChild(a);var b=a.contentWindow,a=b.document;a.open();a.write("");a.close();var c="callImmediate"+Math.random(),d="file:"==b.location.protocol?"*":b.location.protocol+"//"+b.location.host,a=pa(function(a){if(("*"==d||a.origin==d)&&a.data==
c)this.port1.onmessage()},this);b.addEventListener("message",a,!1);this.port1={};this.port2={postMessage:function(){b.postMessage(c,d)}}});if("undefined"!==typeof a&&!u("Trident")&&!u("MSIE")){var b=new a,c={},d=c;b.port1.onmessage=function(){if(q(c.next)){c=c.next;var a=c.ze;c.ze=null;a()}};return function(a){d.next={ze:a};d=d.next;b.port2.postMessage(0)}}return"undefined"!==typeof document&&"onreadystatechange"in document.createElement("SCRIPT")?function(a){var b=document.createElement("SCRIPT");
b.onreadystatechange=function(){b.onreadystatechange=null;b.parentNode.removeChild(b);b=null;a();a=null};document.documentElement.appendChild(b)}:function(a){p.setTimeout(a,0)}};function Pa(){this.wd=this.oc=null}var Ra=new wa(function(){return new Qa},function(a){a.reset()},100);Pa.prototype.add=function(a,b){var c=Ra.get();c.set(a,b);this.wd?this.wd.next=c:this.oc=c;this.wd=c};Pa.prototype.remove=function(){var a=null;this.oc&&(a=this.oc,this.oc=this.oc.next,this.oc||(this.wd=null),a.next=null);return a};function Qa(){this.next=this.scope=this.Md=null}Qa.prototype.set=function(a,b){this.Md=a;this.scope=b;this.next=null};
Qa.prototype.reset=function(){this.next=this.scope=this.Md=null};function Sa(a,b){Ta||Ua();Va||(Ta(),Va=!0);Wa.add(a,b)}var Ta;function Ua(){if(p.Promise&&p.Promise.resolve){var a=p.Promise.resolve(void 0);Ta=function(){a.then(Xa)}}else Ta=function(){var a=Xa;!ja(p.setImmediate)||p.Window&&p.Window.prototype&&p.Window.prototype.setImmediate==p.setImmediate?(Na||(Na=Oa()),Na(a)):p.setImmediate(a)}}var Va=!1,Wa=new Pa;function Xa(){for(var a=null;a=Wa.remove();){try{a.Md.call(a.scope)}catch(b){Ma(b)}Ra.put(a)}Va=!1};function v(a,b){this.Ra=0;this.ff=void 0;this.Wc=this.cc=this.B=null;this.gd=this.Kd=!1;if(a!=da)try{var c=this;a.call(b,function(a){Ya(c,2,a)},function(a){Ya(c,3,a)})}catch(d){Ya(this,3,d)}}function $a(){this.next=this.context=this.jc=this.Ic=this.child=null;this.zd=!1}$a.prototype.reset=function(){this.context=this.jc=this.Ic=this.child=null;this.zd=!1};var ab=new wa(function(){return new $a},function(a){a.reset()},100);function bb(a,b,c){var d=ab.get();d.Ic=a;d.jc=b;d.context=c;return d}
function w(a){if(a instanceof v)return a;var b=new v(da);Ya(b,2,a);return b}function cb(a){return new v(function(b,c){c(a)})}function db(a,b,c){eb(a,b,c,null)||Sa(qa(b,a))}function fb(a){return new v(function(b,c){var d=a.length,e=[];if(d)for(var f=function(a,c){d--;e[a]=c;0==d&&b(e)},h=function(a){c(a)},k=0,n;k<a.length;k++)n=a[k],db(n,qa(f,k),h);else b(e)})}function x(){var a,b,c=new v(function(c,e){a=c;b=e});return new gb(c,a,b)}
v.prototype.then=function(a,b,c){return hb(this,ja(a)?a:null,ja(b)?b:null,c)};v.prototype.then=v.prototype.then;v.prototype.$goog_Thenable=!0;v.prototype.oe=function(a,b){return hb(this,null,a,b)};function ib(a,b){a.cc||2!=a.Ra&&3!=a.Ra||jb(a);a.Wc?a.Wc.next=b:a.cc=b;a.Wc=b}
function hb(a,b,c,d){var e=bb(null,null,null);e.child=new v(function(a,h){e.Ic=b?function(c){try{var e=b.call(d,c);a(e)}catch(z){h(z)}}:a;e.jc=c?function(b){try{var e=c.call(d,b);!q(e)&&b instanceof kb?h(b):a(e)}catch(z){h(z)}}:h});e.child.B=a;ib(a,e);return e.child}v.prototype.Cg=function(a){this.Ra=0;Ya(this,2,a)};v.prototype.Dg=function(a){this.Ra=0;Ya(this,3,a)};
function Ya(a,b,c){0==a.Ra&&(a==c&&(b=3,c=new TypeError("Promise cannot resolve to itself")),a.Ra=1,eb(c,a.Cg,a.Dg,a)||(a.ff=c,a.Ra=b,a.B=null,jb(a),3!=b||c instanceof kb||lb(a,c)))}function eb(a,b,c,d){if(a instanceof v)return ib(a,bb(b||da,c||null,d)),!0;var e;if(a)try{e=!!a.$goog_Thenable}catch(h){e=!1}else e=!1;if(e)return a.then(b,c,d),!0;e=typeof a;if("object"==e&&null!=a||"function"==e)try{var f=a.then;if(ja(f))return mb(a,f,b,c,d),!0}catch(h){return c.call(d,h),!0}return!1}
function mb(a,b,c,d,e){function f(a){k||(k=!0,d.call(e,a))}function h(a){k||(k=!0,c.call(e,a))}var k=!1;try{b.call(a,h,f)}catch(n){f(n)}}function jb(a){a.Kd||(a.Kd=!0,Sa(a.Nf,a))}function nb(a){var b=null;a.cc&&(b=a.cc,a.cc=b.next,b.next=null);a.cc||(a.Wc=null);return b}
v.prototype.Nf=function(){for(var a=null;a=nb(this);){var b=this.Ra,c=this.ff;if(3==b&&a.jc&&!a.zd)for(var d=void 0,d=this;d&&d.gd;d=d.B)d.gd=!1;if(a.child)a.child.B=null,ob(a,b,c);else try{a.zd?a.Ic.call(a.context):ob(a,b,c)}catch(e){pb.call(null,e)}ab.put(a)}this.Kd=!1};function ob(a,b,c){2==b?a.Ic.call(a.context,c):a.jc&&a.jc.call(a.context,c)}function lb(a,b){a.gd=!0;Sa(function(){a.gd&&pb.call(null,b)})}var pb=Ma;function kb(a){ra.call(this,a)}t(kb,ra);kb.prototype.name="cancel";
function gb(a,b,c){this.ha=a;this.resolve=b;this.reject=c};/*

 Copyright 2014 The Lovefield Project Authors. All Rights Reserved.

 Licensed under the Apache License, Version 2.0 (the "License");
 you may not use this file except in compliance with the License.
 You may obtain a copy of the License at

     http://www.apache.org/licenses/LICENSE-2.0

 Unless required by applicable law or agreed to in writing, software
 distributed under the License is distributed on an "AS IS" BASIS,
 WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 See the License for the specific language governing permissions and
 limitations under the License.
*/
function y(a,b){this.oa=a;this.o=b||this.Ee()}var qb=0;m=y.prototype;m.id=g("oa");function rb(a){return a.o}m.Ee=function(){return{}};m.pf=g("o");m.Fa=function(){return{id:this.oa,value:this.pf()}};m.Eb=function(a){return"#"==a.substr(-1)?this.oa:null};function sb(a){return new y(a.id,a.value)}function tb(a){return new y(qb++,a||{})}function ub(a){if(null==a)return null;a=new Uint8Array(a);for(var b="",c=0;c<a.length;++c)var d=a[c].toString(16),b=b+(2>d.length?"0"+d:d);return b};function vb(a){this.type=a}function wb(a){y.call(this,-1,a)}t(wb,y);function xb(a,b,c,d){c=c||function(a,b){return a==b};d=d||function(b){return a[b]};for(var e=a.length,f=b.length,h=[],k=0;k<e+1;k++)h[k]=[],h[k][0]=0;for(var n=0;n<f+1;n++)h[0][n]=0;for(k=1;k<=e;k++)for(n=1;n<=f;n++)c(a[k-1],b[n-1])?h[k][n]=h[k-1][n-1]+1:h[k][n]=Math.max(h[k-1][n],h[k][n-1]);for(var z=[],k=e,n=f;0<k&&0<n;)c(a[k-1],b[n-1])?(z.unshift(d(k-1,n-1)),k--,n--):h[k-1][n]>h[k][n-1]?k--:n--;return z}function yb(a){return Ca(arguments,function(a,c){return a+c},0)}
function Ab(a){return yb.apply(null,arguments)/arguments.length}function Bb(a){var b=arguments.length;if(2>b)return 0;var c=Ab.apply(null,arguments);return yb.apply(null,Aa(arguments,function(a){return Math.pow(a-c,2)}))/(b-1)}function Cb(a){return Math.sqrt(Bb.apply(null,arguments))};var Db="StopIteration"in p?p.StopIteration:{message:"StopIteration",stack:""};function Eb(){}Eb.prototype.next=function(){throw Db;};Eb.prototype.se=function(){return this};function Fb(a){if(a instanceof Eb)return a;if("function"==typeof a.se)return a.se(!1);if(ha(a)){var b=0,c=new Eb;c.next=function(){for(;;){if(b>=a.length)throw Db;if(b in a)return a[b++];b++}};return c}throw Error("Not implemented");}
function Gb(a,b){if(ha(a))try{za(a,b,void 0)}catch(c){if(c!==Db)throw c;}else{a=Fb(a);try{for(;;)b.call(void 0,a.next(),void 0,a)}catch(c){if(c!==Db)throw c;}}}function Hb(a){if(Da(arguments,function(a){return!a.length})||!arguments.length)return new Eb;var b=new Eb,c=arguments,d=Fa(c.length);b.next=function(){if(d){for(var a=Aa(d,function(a,b){return c[b][a]}),b=d.length-1;0<=b;b--){if(d[b]<c[b].length-1){d[b]++;break}if(0==b){d=null;break}d[b]=0}return a}throw Db;};return b};function Ib(a){Jb(a);return a.b.concat()}function Jb(a){if(a.Ef!=a.b.length){for(var b=0,c=0;b<a.b.length;){var d=a.b[b];Kb(a.X,d)&&(a.b[c++]=d);b++}a.b.length=c}if(a.Ef!=a.b.length){for(var e={},c=b=0;b<a.b.length;)d=a.b[b],Kb(e,d)||(a.b[c++]=d,e[d]=1),b++;a.b.length=c}}function Kb(a,b){return Object.prototype.hasOwnProperty.call(a,b)};function Lb(){return u("iPhone")&&!u("iPod")&&!u("iPad")};var Mb=Ka(),Nb=u("Trident")||u("MSIE"),Ob=u("Edge"),Pb=u("Gecko")&&!(-1!=Ha.toLowerCase().indexOf("webkit")&&!u("Edge"))&&!(u("Trident")||u("MSIE"))&&!u("Edge"),Qb=-1!=Ha.toLowerCase().indexOf("webkit")&&!u("Edge");function Rb(){var a=Ha;if(Pb)return/rv\:([^\);]+)(\)|;)/.exec(a);if(Ob)return/Edge\/([\d\.]+)/.exec(a);if(Nb)return/\b(?:MSIE|rv)[: ]([^\);]+)(\)|;)/.exec(a);if(Qb)return/WebKit\/(\S+)/.exec(a)}
var ua=function(){if(Mb&&p.opera){var a;var b=p.opera.version;try{a=b()}catch(c){a=b}return a}a="";(b=Rb())&&(a=b?b[1]:"");return Nb&&(b=(b=p.document)?b.documentMode:void 0,b>parseFloat(a))?String(b):a}(),Sb={};var Tb=Lb()||u("iPod"),Ub=u("iPad");!u("Android")||La()||u("Firefox")||Ka();var Vb=La(),Wb=u("Safari")&&!(La()||u("Coast")||Ka()||u("Edge")||u("Silk")||u("Android"))&&!(Lb()||u("iPad")||u("iPod"));/*

 Copyright 2015 The Lovefield Project Authors. All Rights Reserved.

 Licensed under the Apache License, Version 2.0 (the "License");
 you may not use this file except in compliance with the License.
 You may obtain a copy of the License at

     http://www.apache.org/licenses/LICENSE-2.0

 Unless required by applicable law or agreed to in writing, software
 distributed under the License is distributed on an "AS IS" BASIS,
 WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 See the License for the specific language governing permissions and
 limitations under the License.
*/
function Xb(){this.xg=Wb||Ub||Tb;this.Wf=!(this.xg||Nb&&!Sb[10]&&!(Sb[10]=0<=ta(10)));!Nb||Sb[11]||(Sb[11]=0<=ta(11));this.Fg=Vb||Wb}var Yb;function A(){return new window.Map}function Zb(a){var b=0,c=Array(a.size);a.forEach(function(a,e){c[b++]=e});return c}function B(a){var b=0,c=Array(a.size);a.forEach(function(a){c[b++]=a});return c};var $b={};r("lf.TransactionType",$b);$b.READ_ONLY=0;$b.READ_WRITE=1;function ac(a,b){this.qf=a;this.Oa=b||null;this.Y=x()}ac.prototype.ia=function(){return 0==this.qf?this.rc():bc(this)};function bc(a){try{cc(a.Oa)}catch(b){return cb(b)}return dc(a).then(function(a){this.Oa.ia();return a}.bind(a))}function dc(a){ec(a);fc(a);return a.rc()}
function ec(a){a.Oa.rb.forEach(function(a,c){var d=this.Oa.ca().get(c),d=this.G(d.getName(),d.Bb.bind(d)),e=B(a.ya).map(function(a){return a.id()});0<e.length&&d.remove(e).oe(this.Od,this);e=B(a.ma).map(function(a){return a[1]}).concat(B(a.ua));d.put(e).oe(this.Od,this)},a)}function fc(a){gc(a.Oa).forEach(function(a){var c=this.G(a.getName(),sb),d;c.get([-1]).then(function(a){d=a;return c.remove([])}).then(function(){c.put(d);c.put(a.Fa())},this.Od.bind(this))},a)}ac.prototype.Od=function(a){this.Y.reject(a)};function hc(a){this.yg=a}hc.prototype.toString=g("yg");var ic=new hc("backstore"),jc=new hc("cache"),kc=new hc("indexstore"),lc=new hc("engine"),mc=new hc("runner"),nc=new hc("observerregistry"),oc=new hc("schema");function C(a){return q(a)?new window.Set(a):new window.Set}function D(a){var b=0,c=Array(a.size);a.forEach(function(a){c[b++]=a});return c}function pc(a,b){if(b.size>a.size)return!1;var c=!0;b.forEach(function(b){c=c&&a.has(b)});return c};function qc(a,b){this.oa=a;this.o=b||{}}function rc(a){var b=C();a.forEach(function(a){b.add(a>>9)});return D(b)}qc.prototype.W=g("oa");function sc(a,b){b.forEach(function(a){this.o[a.id()]=a.Fa()},a)}function tc(a,b){b.forEach(function(a){delete this.o[a]},a)}qc.prototype.Fa=function(){return{id:this.oa,value:JSON.stringify(this.o)}};function uc(a){return new qc(a.id,JSON.parse(a.value))};function vc(a,b,c){this.ba=a;this.Kb=b;this.gf=c}m=vc.prototype;m.get=function(a){if(0==a.length)return this.zc();var b=this.Kb;return wc(this,a).then(function(c){return a.map(function(a){var e=c.get(a>>9);return b(e.o[a])})})};function wc(a,b){var c=A(),d=x(),e=rc(b).map(function(a){return new v(function(b,d){var e;try{e=this.ba.get(a)}catch(z){d(z);return}e.onerror=d;e.onsuccess=function(a){a=uc(a.target.result);c.set(a.W(),a);b()}},this)},a);fb(e).then(function(){d.resolve(c)});return d.ha}
m.zc=function(){return new v(function(a,b){var c=[],d;try{d=this.ba.openCursor()}catch(e){b(e);return}d.onerror=b;d.onsuccess=function(){var b=d.result;if(b){var f;f=uc(b.value).o;for(var h in f)c.push(this.Kb(f[h]));b.continue()}else a(c)}.bind(this)},this)};m.Sb=function(a){return new v(function(b,c){var d;try{d=a()}catch(e){c(e);return}d.onsuccess=b;d.onerror=c},this)};
m.put=function(a){if(0==a.length)return w();var b=A();a.forEach(function(a){var d;d=a.id()>>9;var e=b.get(d)||null;null===e&&(e=this.gf(this.ba.name,d));sc(e,[a]);b.set(d,e)},this);a=B(b).map(function(a){return this.Sb(function(){return this.ba.put(a.Fa())}.bind(this))},this);return fb(a)};
m.remove=function(a){if(0==a.length)return this.Sb(function(){return this.ba.clear()}.bind(this));var b=A();a.forEach(function(a){var d=a>>9,e=b.get(d)||null;null===e&&(e=this.gf(this.ba.name,d));tc(e,[a]);b.set(d,e)},this);a=B(b).map(function(a){return this.Sb(function(){return 0==Object.keys(a.o).length?this.ba.delete(a.W()):this.ba.put(a.Fa())}.bind(this))},this);return fb(a)};function xc(a,b,c){a=a.j(jc);var d=[c<<9,(c+1<<9)-1];b=a.Xa(b,d[0],d[1]);c=new qc(c);sc(c,b);return c}
function yc(a,b){return new qc(b)};function zc(){};function Ac(a){this.U=a.j(jc);this.D=a.j(kc);this.i=a.j(oc)}Ac.prototype.update=function(a){a.forEach(function(a){Bc(this,a);Cc(this,a)},this)};function Cc(a,b){var c=b.getName();b.ya.forEach(function(a,b){this.U.remove(c,b)},a);b.ua.forEach(function(a){this.U.set(c,a)},a);b.ma.forEach(function(a){this.U.set(c,a[1])},a)}function Bc(a,b){var c=a.i.table(b.getName());Dc(b).forEach(function(a){Ec(this,c,a)},a)}
function Ec(a,b,c){var d=a.D.mc.get(b.getName())||[],e=0;d.forEach(function(a){try{Fc(a,c),e++}catch(b){throw d.slice(0,e).forEach(function(a){Fc(a,[c[1],c[0]])},this),b;}},a)}function Fc(a,b){var c=null===b[1]?void 0:b[1].Eb(a.getName()),d=null===b[0]?void 0:b[0].Eb(a.getName());if(!q(d)&&q(c))a.add(c,b[1].id());else if(q(d)&&q(c)){if(null===c||null===d){if(c==d)return}else if(0==a.dc().compare(d,c))return;a.add(c,b[1].id());a.remove(d,b[0].id())}else q(d)&&!q(c)&&a.remove(d,b[0].id())};var Gc={};r("lf.ConstraintAction",Gc);Gc.RESTRICT=0;Gc.CASCADE=1;var Hc={};r("lf.ConstraintTiming",Hc);Hc.IMMEDIATE=0;Hc.DEFERRABLE=1;var Ic={};r("lf.Order",Ic);Ic.DESC=0;Ic.ASC=1;var Jc={};r("lf.Type",Jc);Jc.ARRAY_BUFFER=0;Jc.BOOLEAN=1;Jc.DATE_TIME=2;Jc.INTEGER=3;Jc.NUMBER=4;Jc.STRING=5;Jc.OBJECT=6;var Kc={0:null,1:!1,2:Object.freeze(new Date(0)),3:0,4:0,5:"",6:null};r("lf.type.DEFAULT_VALUES",Kc);function E(a,b){this.code=a;this.message="http://sn.im/2a0j3wn?c="+a;if(1<arguments.length)for(var c=1;c<=Math.min(4,arguments.length-1);++c)this.message+="&p"+(c-1)+"="+encodeURIComponent(arguments[c].toString().slice(0,64))}t(E,Error);function Lc(){this.X=A();this.size=0}m=Lc.prototype;m.has=function(a){return this.X.has(a)};m.set=function(a,b){var c=this.X.get(a)||null;null===c&&(c=C(),this.X.set(a,c));c.has(b)||(c.add(b),this.size++);return this};m.Vb=function(a,b){var c=this.X.get(a)||null;null===c&&(c=C(),this.X.set(a,c));b.forEach(function(a){c.has(a)||(c.add(a),this.size++)},this);return this};m.Wd=function(a){a.keys().forEach(function(b){var c=a.get(b);this.Vb(b,c)},this);return this};
m.delete=function(a,b){var c=this.X.get(a,null);if(null===c)return!1;var d=c.delete(b);d&&(--this.size,0==c.size&&this.X.delete(a));return d};m.get=function(a){a=this.X.get(a)||null;return null===a?null:D(a)};m.clear=function(){this.X.clear();this.size=0};m.keys=function(){return Zb(this.X)};m.values=function(){var a=[];this.X.forEach(function(b){a.push.apply(a,D(b))});return a};function Mc(a){this.D=a.j(kc);this.i=a.j(oc);this.U=a.j(jc);this.ad=null}function Nc(a,b,c){var d=b.Cb().jg;c.forEach(function(a){d.forEach(function(b){if(null==a.o[b.getName()])throw new E(202,b.m());},this)},a)}function Oc(a,b,c,d){b.Cb().Nd().forEach(function(a){a.timing==d&&Pc(this,a,c)},a)}function Pc(a,b,c){var d=Rc(a,b);c.forEach(function(a){if(Sc(a[0],a[1],b.name)&&(a=a[1].o[b.eb],null!==a&&!d.fb(a)))throw new E(203,b.name);},a)}
function Rc(a,b){null===a.ad&&(a.ad=A());var c=a.ad.get(b.name)||null;null===c&&(c=a.i.table(b.Pa)[b.kc].za(),c=a.D.get(c.m()),a.ad.set(b.name,c));return c}function Sc(a,b,c){return(null===a?null!==b:null===b)||a.Eb(c)!=b.Eb(c)}function Tc(a,b,c,d){b=Uc(a.i.info(),b.getName(),0);null!==b&&(b=b.filter(function(a){return a.timing==d}),0!=b.length&&Vc(a,b,c,function(a,b,c){if(b.fb(c))throw new E(203,a.name);}))}
function Wc(a,b,c){b=Uc(a.i.info(),b.getName(),1);if(null===b)return null;var d=new Lc;Vc(a,b,c,function(a,b,c){b=b.get(c);0<b.length&&d.Vb(a.Ae,b)});return d}function Xc(a,b,c){var d=new Lc;Vc(a,c,b,function(a,b,c,k){b.get(c).forEach(function(b){d.set(b,{Ld:a,og:k[1]})})});return d}function Vc(a,b,c,d){b.forEach(function(a){var b=this.D.get(a.name),h=Rc(this,a);c.forEach(function(c){Sc(c[0],c[1],h.getName())&&d(a,b,c[0].o[a.kc],c)},this)},a)}
function Yc(a,b,c,d){0!=c.length&&(c=c.map(function(a){return[null,a]}),Oc(a,b,c,d))}function Zc(a,b,c,d){0!=c.length&&(Oc(a,b,c,d),Tc(a,b,c,d))}function $c(a,b,c,d){0!=c.length&&(c=c.map(function(a){return[a,null]}),Tc(a,b,c,d))}
function ad(a,b,c){var d={ne:[],jf:new Lc},e=new Lc;e.Vb(b.getName(),c.map(function(a){return a.id()}));do{var f=new Lc;e.keys().forEach(function(a){var b=this.i.table(a);a=e.get(a).map(function(a){return[this.U.get(a),null]},this);b=Wc(this,b,a);null!==b&&(d.ne.unshift.apply(d.ne,b.keys()),f.Wd(b))},a);e=f;d.jf.Wd(e)}while(0<e.size);return d};function bd(a){this.ua=A();this.ma=A();this.ya=A();this.u=a}m=bd.prototype;m.getName=g("u");m.add=function(a){if(this.ya.has(a.id())){var b=[this.ya.get(a.id()),a];this.ma.set(a.id(),b);this.ya.delete(a.id())}else this.ua.set(a.id(),a)};m.modify=function(a){var b=a[1],c=a[0].id();this.ua.has(c)?this.ua.set(c,b):(this.ma.has(c)&&(a=[this.ma.get(a[0].id())[0],b]),this.ma.set(c,a))};
m.delete=function(a){if(this.ua.has(a.id()))this.ua.delete(a.id());else if(this.ma.has(a.id())){var b=this.ma.get(a.id())[0];this.ma.delete(a.id());this.ya.set(a.id(),b)}else this.ya.set(a.id(),a)};m.Wd=function(a){a.ua.forEach(function(a){this.add(a)},this);a.ma.forEach(function(a){this.modify(a)},this);a.ya.forEach(function(a){this.delete(a)},this)};
function Dc(a){var b=[];a.ua.forEach(function(a){b.push([null,a])});a.ma.forEach(function(a){b.push(a)});a.ya.forEach(function(a){b.push([a,null])});return b}m.toString=function(){return"["+Zb(this.ua).toString()+"], ["+Zb(this.ma).toString()+"], ["+Zb(this.ya).toString()+"]"};function cd(a){var b=new bd(a.u);a.ua.forEach(function(a){b.delete(a)});a.ya.forEach(function(a){b.add(a)});a.ma.forEach(function(a){b.modify([a[1],a[0]])});return b}
m.$f=function(){return 0==this.ua.size&&0==this.ya.size&&0==this.ma.size};function dd(a,b){this.$=A();b.forEach(function(a){this.$.set(a.getName(),a)},this);this.i=a.j(oc);this.U=a.j(jc);this.D=a.j(kc);this.wa=new Mc(a);this.jd=new Ac(a);this.rb=A()}function gc(a){var b=[];Zb(a.rb).map(function(a){return this.$.get(a)},a).forEach(function(a){a.zb()&&(a.Aa().forEach(function(a){b.push(this.D.get(a.m()))},this),b.push(this.D.get(a.getName()+".#")))},a);return b}m=dd.prototype;m.ca=g("$");
m.xb=function(a,b){ed(this,a);Nc(this.wa,a,b);Yc(this.wa,a,b,0);for(var c=0;c<b.length;c++)fd(this,a,[null,b[c]])};function fd(a,b,c){var d=b.getName(),e=a.rb.get(d)||new bd(d);a.rb.set(d,e);try{Ec(a.jd,b,c)}catch(h){throw h;}b=c[0];var f=c[1];null===b&&null!==f?(a.U.set(d,f),e.add(f)):null!==b&&null!==f?(a.U.set(d,f),e.modify(c)):null!==b&&null===f&&(a.U.remove(d,b.id()),e.delete(b))}
m.update=function(a,b){ed(this,a);Nc(this.wa,a,b);var c=b.map(function(a){return[this.U.get(a.id()),a]},this);gd(this,a,c);Zc(this.wa,a,c,0);c.forEach(function(b){fd(this,a,b)},this)};m.Qd=function(a,b){ed(this,a);Nc(this.wa,a,b);for(var c=0;c<b.length;c++){var d=b[c],e=null,f,h=a.Cb().dd();if(null===h)f=null;else{f=this.wa;var h=h.m(),k=d.Eb(h);f=f.D.get(h).get(k);f=0==f.length?null:f[0]}null!=f?(e=this.U.get(f),d.oa=f,Zc(this.wa,a,[[e,d]],0)):Yc(this.wa,a,[d],0);fd(this,a,[e,d])}};
m.remove=function(a,b){ed(this,a);hd(this,a,b);$c(this.wa,a,b,0);for(var c=0;c<b.length;c++)fd(this,a,[b[c],null])};function gd(a,b,c){b=Uc(a.i.info(),b.getName(),1);if(null!==b){var d=Xc(a.wa,c,b);d.keys().forEach(function(a){d.get(a).forEach(function(b){var c=this.i.table(b.Ld.Ae),d=this.U.get(a),n=c.Bb(d.Fa());n.o[b.Ld.eb]=b.og.o[b.Ld.kc];fd(this,c,[d,n])},this)},a)}}
function hd(a,b,c){if(null!==Uc(a.i.info(),b.getName(),1)){b=ad(a.wa,b,c);var d=b.jf;b.ne.forEach(function(a){var b=this.i.table(a);a=d.get(a).map(function(a){return this.U.get(a)},this);$c(this.wa,b,a,0);a.forEach(function(a){fd(this,b,[a,null])},this)},a)}}function cc(a){a.rb.forEach(function(a){var c=this.$.get(a.getName());Yc(this.wa,c,B(a.ua),1);$c(this.wa,c,B(a.ya),1);Zc(this.wa,c,B(a.ma),1)},a)}m.ia=aa();m.Hb=function(){var a=B(this.rb).map(function(a){return cd(a)});this.jd.update(a)};
function ed(a,b){if(!a.$.has(b.getName()))throw new E(106,b.getName());};function id(a,b,c,d){this.c=a;this.w=b;this.da=this.c==F?!1:c;this.la=this.w==F?!1:d}var F=new (aa());id.prototype.toString=function(){return(this.da?"(":"[")+(this.c==F?"unbound":this.c)+", "+(this.w==F?"unbound":this.w)+(this.la?")":"]")};function jd(a){if(kd(a))return[];var b=null,c=null;a.c==F||(b=new id(F,a.c,!1,!a.da));a.w==F||(c=new id(a.w,F,!a.la,!1));return[b,c].filter(function(a){return null!==a})}id.prototype.reverse=function(){return new id(this.w,this.c,this.la,this.da)};
function ld(a,b){var c=md(a.c,b.c,!0,a.da,b.da);if(0==c)return!0;var d=-1==c?a:b,c=1==c?a:b;return d.w==F||d.w>c.c||d.w==c.c&&!d.la&&!c.da}function nd(){return new id(F,F,!1,!1)}function kd(a){return a.c==F&&a.w==F}function od(a){return a.c==a.w&&a.c!=F&&!a.da&&!a.la}id.prototype.contains=function(a){var b=this.w==F||a<this.w||a==this.w&&!this.la;return(this.c==F||a>this.c||a==this.c&&!this.da)&&b};
function md(a,b,c,d,e){function f(a){return c?a:1==a?-1:1}d=d||!1;e=e||!1;return a==F?b==F?(d?!e:e)?d?f(1):f(-1):0:f(-1):b==F?f(1):a<b?-1:a==b?(d?!e:e)?d?f(1):f(-1):0:1}function pd(a,b){var c=md(a.c,b.c,!0,a.da,b.da);0==c&&(c=md(a.w,b.w,!1,a.la,b.la));return c};function G(a,b){this.entries=a;this.L=C(b);this.Va=null}function H(a){return D(a.L)}function qd(a){return a.entries.map(function(a){return a.ta.o})}function rd(a){return a.entries.map(function(a){return a.ta.id()})}function sd(a,b){return a.Va.get(b.m())}var td=null;function ud(){null===td&&(td=new G([],[]));return td}
function vd(a){if(0==a.length)return ud();for(var b=a.reduce(function(a,b){return a+b.entries.length},0),c=Array(b),d=0,b=a.map(function(a){var b=A();a.entries.forEach(function(a){c[d++]=a;b.set(a.id,a)});return b}),e=A(),f=0;f<c.length;f++)b.every(function(a){return a.has(c[f].id)})&&e.set(c[f].id,c[f]);return new G(B(e),D(a[0].L))}function wd(a){if(0==a.length)return ud();var b=A();a.forEach(function(a){a.entries.forEach(function(a){b.set(a.id,a)})});return new G(B(b),D(a[0].L))}
function xd(a,b){var c=1<b.length,d=a.map(function(a){return new yd(a,c)});return new G(d,b)}function yd(a,b){this.ta=a;this.id=zd++;this.Sd=b}var zd=0;function I(a,b){var c=b.Wa();return null!==c&&a.ta.o.hasOwnProperty(c)?a.ta.o[c]:a.Sd?a.ta.o[J(b.G())][b.getName()]:a.ta.o[b.getName()]}function Ad(a,b,c){var d=b.Wa();if(null!=d)a.ta.o[d]=c;else if(a.Sd){var d=J(b.G()),e=a.ta.o[d];null==e&&(e={},a.ta.o[d]=e);e[b.getName()]=c}else a.ta.o[b.getName()]=c}
function Bd(a,b,c,d){function e(a,b){if(a.Sd){var c=a.ta.o,d;for(d in c)f[d]=c[d]}else f[b[0]]=a.ta.o}var f={};e(a,b);e(c,d);a=new y(-1,f);return new yd(a,!0)};r("lf.bind",function(a){return new Cd(a)});function Cd(a){this.fa=a}r("lf.Binder",Cd);Cd.prototype.za=g("fa");function Dd(){this.Qe=Ed();var a=Fd();this.gc=A();this.gc.set(1,Gd());this.gc.set(2,Hd());this.gc.set(4,a);this.gc.set(3,a);this.gc.set(5,Id())}Dd.Ac=function(){return Dd.Me?Dd.Me:Dd.Me=new Dd};function Jd(a,b,c){return(a.gc.get(b)||null).get(c)||null}function Ed(){function a(a){return a}var b=A();b.set(1,function(a){return null===a?null:a?1:0});b.set(2,function(a){return null===a?null:a.getTime()});b.set(3,a);b.set(4,a);b.set(5,a);return b}
function Gd(){var a=A();a.set("eq",function(a,c){return a==c});a.set("neq",function(a,c){return a!=c});return a}
function Fd(){var a=Gd();a.set("between",function(a,c){return null===a||null===c[0]||null===c[1]?!1:a>=c[0]&&a<=c[1]});a.set("gte",function(a,c){return null===a||null===c?!1:a>=c});a.set("gt",function(a,c){return null===a||null===c?!1:a>c});a.set("in",function(a,c){return-1!=c.indexOf(a)});a.set("lte",function(a,c){return null===a||null===c?!1:a<=c});a.set("lt",function(a,c){return null===a||null===c?!1:a<c});return a}
function Id(){var a=Fd();a.set("match",function(a,c){return null===a||null===c?!1:(new RegExp(c)).test(a)});return a}
function Hd(){var a=A();a.set("between",function(a,c){return null===a||null===c[0]||null===c[1]?!1:a.getTime()>=c[0].getTime()&&a.getTime()<=c[1].getTime()});a.set("eq",function(a,c){return(null===a?-1:a.getTime())==(null===c?-1:c.getTime())});a.set("gte",function(a,c){return null===a||null===c?!1:a.getTime()>=c.getTime()});a.set("gt",function(a,c){return null===a||null===c?!1:a.getTime()>c.getTime()});a.set("in",function(a,c){return c.some(function(c){return c.getTime()==a.getTime()})});a.set("lte",
function(a,c){return null===a||null===c?!1:a.getTime()<=c.getTime()});a.set("lt",function(a,c){return null===a||null===c?!1:a.getTime()<c.getTime()});a.set("neq",function(a,c){return(null===a?-1:a.getTime())!=(null===c?-1:c.getTime())});return a};function K(){this.g=this.B=null}var Kd=[];K.prototype.getParent=g("B");K.prototype.hb=function(){for(var a=this;!fa(a.getParent());)a=a.getParent();return a};function Ld(a){for(var b=0;!fa(a.getParent());)b++,a=a.getParent();return b}function L(a){return a.g||Kd}function Md(a,b){return L(a)[b]||null}function Nd(a,b,c){b.B=a;null===a.g?a.g=[b]:a.g.splice(c,0,b)}function Od(a,b){b.B=a;null===a.g?a.g=[b]:a.g.push(b)}
function Pd(a,b){var c=a.g&&a.g[b];return c?(c.B=null,a.g.splice(b,1),0==a.g.length&&(a.g=null),c):null}K.prototype.removeChild=function(a){return Pd(this,L(this).indexOf(a))};function Qd(a,b,c){Md(a,c).B=null;b.B=a;a.g[c]=b}function Rd(a,b,c){!1!==b.call(c,a)&&L(a).forEach(function(a){Rd(a,b,c)})};function Sd(){K.call(this);this.oa=Td++}t(Sd,K);var Td=0;Sd.prototype.W=g("oa");function Ud(a,b,c){Sd.call(this);this.N=a;this.value=b;this.F=c;this.vc=Jd(Dd.Ac(),this.N.H(),this.F);this.Ya=!1;this.bc=b}t(Ud,Sd);m=Ud.prototype;m.Jb=function(){var a=new Ud(this.N,this.value,this.F);a.bc=this.bc;a.td(this.Ya);var b=this.W();a.oa=b;return a};m.gb=function(a){return null!=a?(a.push(this.N),a):[this.N]};m.td=ba("Ya");function Vd(a){var b=!1;a.value instanceof Cd||(b="array"==ea(a.value)?!a.value.some(function(a){return a instanceof Cd}):!0);if(!b)throw new E(501);}
m.eval=function(a){Vd(this);if("in"==this.F)return Wd(this,a);var b=a.entries.filter(function(a){return this.vc(I(a,this.N),this.value)!=this.Ya},this);return new G(b,H(a))};m.bind=function(a){if(this.bc instanceof Cd){var b=this.bc.za();if(a.length<=b)throw new E(510);this.value=a[b]}else"array"==ea(this.bc)&&(this.value=this.bc.map(function(b){if(b instanceof Cd){var d=b.za();if(a.length<=d)throw new E(510);return a[b.za()]}return b}))};
function Wd(a,b){var c=C(a.value),d=function(a){return null===a?!1:c.has(a)!=this.Ya}.bind(a),e=b.entries.filter(function(a){return d(I(a,this.N))},a);return new G(e,H(b))}m.toString=function(){return"value_pred("+this.N.m()+" "+this.F+(this.Ya?"(complement)":"")+" "+this.value+")"};function Xd(a){this.aa=a;this.Xc=this.Ca=null}function Yd(a,b){null===a.Ca&&null!=a.s&&(a.Ca=Zd(a.s));return a.Ca.get(b)||null}function Zd(a){var b=A();Rd(a,function(a){b.set(a.W(),a)});return b}function $d(a,b){b.s&&(a.s=b.s.Jb());a.Xc=b}Xd.prototype.bind=function(){return this};function ae(a,b){var c=a.s;null!=c&&Rd(c,function(a){a instanceof Ud&&a.bind(b)})};function be(a){Xd.call(this,a)}t(be,Xd);function ce(a){var b="";a.forEach(function(c,d){b+=c.N.m()+" ";b+=1==c.kb?"ASC":"DESC";d<a.length-1&&(b+=", ")});return b}be.prototype.ca=function(){return C(this.c)};be.prototype.clone=function(){var a=new be(this.aa);$d(a,this);this.f&&(a.f=this.f.slice());this.c&&(a.c=this.c.slice());a.V=this.V;a.K=this.K;this.M&&(a.M=this.M.slice());this.ja&&(a.ja=this.ja.slice());this.Qb&&(a.Qb=this.Qb);this.Xb&&(a.Xb=this.Xb);a.yb=this.yb;return a};
be.prototype.bind=function(a){be.ab.bind.call(this,a);null!=this.Qb&&(this.V=a[this.Qb.za()]);null!=this.Xb&&(this.K=a[this.Xb.za()]);ae(this,a);return this};function de(a,b){this.Da=a;this.$=b}de.prototype.hb=g("Da");de.prototype.ca=g("$");function ee(a){var b=C();a.forEach(function(a){a.ca().forEach(b.add.bind(b))});return b};function fe(a,b){this.global=a;this.Ka=a.j(ic);this.qd=b.map(function(a){return a.context});this.$e=b.map(function(a){return a.de});this.Gd=ee(this.$e);this.pe=ge(this);this.$a=x()}function ge(a){return a.qd.some(function(a){return!(a instanceof be)})?1:0}m=fe.prototype;
m.exec=function(){function a(){var f=d.shift();if(f){var h=e[c.length];return f.hb().exec(b,h).then(function(b){c.push(b[0]);return a()})}return w()}var b=0==this.pe?void 0:new dd(this.global,this.Gd),c=[],d=this.$e.slice(),e=this.qd;return a().then(function(){return this.Ka.Ab(this.pe,D(this.Gd),b).ia()}.bind(this)).then(function(){this.ae(c);return c}.bind(this),function(a){null!=b&&b.Hb();throw a;})};m.H=g("pe");m.ca=g("Gd");m.Lb=g("$a");m.W=function(){return ka(this)};m.ae=aa();function ke(a,b){fe.call(this,a,b);this.Gb=a.j(nc)}t(ke,fe);ke.prototype.getPriority=l(0);ke.prototype.ae=function(a){this.qd.forEach(function(b,c){le(this.Gb,b,a[c])},this)};function me(a,b){this.h=a;this.Gb=a.j(nc);this.Ea=a.j(mc);this.jd=new Ac(a);this.rb=b;var c=a.j(oc),d=this.rb.map(function(a){return c.table(a.getName())});this.$=C(d);this.$a=x()}m=me.prototype;m.exec=function(){this.jd.update(this.rb);this.Lc();return w()};m.H=l(1);m.ca=g("$");m.Lb=g("$a");m.W=function(){return ka(this)};m.getPriority=l(1);m.Lc=function(){var a=ne(this.Gb,this.$);0!=a.length&&(a=new ke(this.h,a),oe(this.Ea,a))};function pe(a){this.h=a;this.Ka=a.j(ic);this.Ea=a.j(mc)}pe.prototype.Zd=function(a){a=new me(this.h,a);oe(this.Ea,a)};function M(a,b){this.Zb=a;this.l=b;this.Sa=A()}r("lf.backstore.FirebaseRawBackStore",M);M.prototype.ed=g("l");M.prototype.fd=function(){throw new E(351);};function qe(a,b){var c=x(),d=a;b.length&&(d=a.child(b));d.once("value",function(a){c.resolve(a.val())},function(a){c.reject(a)});return c.ha}function re(a,b,c){function d(a){a?e.reject(a):e.resolve()}c=c||!1;var e=x();c?a.set(b,d):a.update(b,d);return e.ha}
M.prototype.Ga=function(a){return qe(this.l,"@rev/R").then(function(a){this.La=a;return qe(this.l,"@table")}.bind(this)).then(function(b){var c=0,d;for(d in b)this.Sa.set(d,b[d]),b[d]>c&&(c=b[d]);a.ra().forEach(function(a){this.Sa.has(a.getName())||(b[a.getName()]=++c)},this);d=this.l.child("@table");return re(d,b)}.bind(this))};
function se(a,b,c){var d=a.Sa.get(b);return null!=d?function(){var a={},b=x();this.l.orderByChild("T").equalTo(d).once("value",function(d){d.forEach(function(b){var d=c(b.val());a[parseInt(b.key(),10)]=d});b.resolve(a)});return b.ha}.call(a).then(function(a){a["@rev"]={R:++this.La};return re(this.l,a)}.bind(a)):w()}M.prototype.tc=function(a){return se(this,a,l(null)).then(function(){this.Sa.delete(a);return re(this.l.child("@table/"+a),null,!0)}.bind(this))};M.prototype.dropTable=M.prototype.tc;
M.prototype.pc=function(a,b,c){return se(this,a,function(a){var e=a.P;e[b]=c;return{R:this.La+1,T:a.T,P:e}}.bind(this))};M.prototype.addTableColumn=M.prototype.pc;M.prototype.uc=function(a,b){return se(this,a,function(a){var d=a.P;delete d[b];return{R:this.La+1,T:a.T,P:d}}.bind(this))};M.prototype.dropTableColumn=M.prototype.uc;M.prototype.Kc=function(a,b,c){return se(this,a,function(a){var e=a.P;e[c]=e[b];delete e[b];return{R:this.La+1,T:a.T,P:e}}.bind(this))};M.prototype.renameTableColumn=M.prototype.Kc;
M.prototype.tb=function(){throw new E(351);};M.prototype.createRow=M.prototype.tb;M.prototype.Dc=g("Zb");M.prototype.getVersion=M.prototype.Dc;M.prototype.ec=function(a){var b=x();a=this.Sa.get(a);this.l.orderByChild("T").equalTo(a).once("value",function(a){var d=[];a.forEach(function(a){d.push(a.val().P)});b.resolve(d)});return b.ha};M.prototype.dump=function(){var a={},b=Zb(this.Sa).map(function(b){return this.ec(b).then(function(d){a[b]=d})}.bind(this));return fb(b).then(function(){return a})};
M.prototype.dump=M.prototype.dump;function te(a,b,c){ac.call(this,b,c);this.l=a}t(te,ac);te.prototype.G=function(a){return this.l.Bc(a)};
te.prototype.rc=function(){var a=this.Oa.rb;if(0==a.size)this.Y.resolve();else{var b=this.l.La+1;this.l.La=b;var c={"@rev":{R:b}};a.forEach(function(a,e){var f=this.l.Sa.get(e);a.ua.forEach(function(a,d){c[d]={R:b,T:f,P:a.o}});a.ma.forEach(function(a,d){c[d]={R:b,T:f,P:a[1].o}});a.ya.forEach(function(a,b){c[b]=null})},this);this.l.l.update(c,function(c){null===c?this.Y.resolve():(this.l.La=b-1,c=B(a).map(function(a){return ue(this.l,a.getName())},this),fb(c).then(this.Y.reject.bind(this.Y),this.Y.reject.bind(this.Y)))}.bind(this))}return this.Y.ha};function ve(){this.xa=A()}function we(a,b){if(0==b.length)return B(a.xa);var c=[];b.forEach(function(a){a=this.xa.get(a)||null;null===a||c.push(a)},a);return c}ve.prototype.getData=g("xa");ve.prototype.get=function(a){return w(we(this,a))};function xe(a,b){b.forEach(function(a){this.xa.set(a.id(),a)},a)}ve.prototype.put=function(a){xe(this,a);return w()};function ye(a,b){0==b.length||b.length==a.xa.size?a.xa.clear():b.forEach(function(a){this.xa.delete(a)},a)}
ve.prototype.remove=function(a){ye(this,a);return w()};function ze(a){return 0==a.xa.size?0:Zb(a.xa).reduce(function(a,c){return a>c?a:c},0)};function Ae(a,b){this.i=a;this.xf=b;this.Jc=A();this.La=-1;this.L=A();this.Sa=A();this.Dd=null}m=Ae.prototype;
m.Ga=function(a){this.l=this.xf.child(this.i.name());var b=a||function(){return w()};return qe(this.l,"@db/version").then(function(a){return null===a?re(this.l,Be(this),!0).then(function(){var a=new M(0,this.l);return b(a)}.bind(this)):a==this.i.version()?qe(this.l,"@rev/R").then(function(a){this.La=a;return qe(this.l,"@table")}.bind(this)).then(function(a){for(var b in a)this.Sa.set(b,a[b]);a=this.i.ra().map(function(a){return ue(this,a.getName())},this);return fb(a)}.bind(this)).then(function(){Ce(this);
De(this);return w()}.bind(this)):this.be(a,b).then(function(){return this.Ga()}.bind(this))}.bind(this))};m.be=function(a,b){var c=new M(a,this.l);return c.Ga(this.i).then(function(){return w()}.bind(this)).then(function(){return b(c)}).then(function(){var a=this.l.child("@db");return re(a,{version:this.i.version()},!0)}.bind(this))};
function De(a){a.l.off();a.l.on("child_removed",a.lg.bind(a));a.Ed&&(a.Ed.off(),a.Jc.clear());a.Ed=a.l.orderByChild("R").startAt(a.La+1);a.Ed.on("value",a.Zd.bind(a))}function Ce(a){qb=B(a.L).map(function(a){return ze(a)}).reduce(function(a,c){return a>c?a:c},0)+1}m.lg=function(a){var b=a.val(),c=this.Jc.get(b.T)||null;null===c&&(c=C(),this.Jc.set(b.T,c));c.add(parseInt(a.key(),10))};
m.Zd=function(a){var b=a.child("@rev/R").val();null!=b&&b!=this.La&&(this.La=b,a=Ee(this,a),a.forEach(function(a){var b=this.L.get(a.getName()),e=Zb(a.ya);0<e.length&&ye(b,e);var f=B(a.ua);a.ma.forEach(function(a){f.push(a[1])});xe(b,f)},this),0<a.length&&this.Gc(a),De(this))};
function Ee(a,b){var c=C(),d=A();a.Sa.forEach(function(a,b){var h=this.L.get(b),k=new bd(b);if(this.Jc.has(a)){var n=D(this.Jc.get(a));n.forEach(function(a){c.add(a)});we(h,n).forEach(function(a){k.delete(a)})}d.set(a,k)}.bind(a));b.forEach(function(a){if("@rev"!=a.key()){var b=parseInt(a.key(),10);if(!c.has(b)){a=a.val();var h=d.get(a.T),k=this.L.get(h.getName());k.getData().has(b)?h.modify([we(k,[b])[0],new y(b,a.P)]):h.add(new y(b,a.P))}}}.bind(a));return B(d).filter(function(a){return!a.$f()})}
function ue(a,b){var c=x(),d=a.Sa.get(b);a.l.orderByChild("T").equalTo(d).once("value",function(a){var d=new ve,h=[];a.forEach(function(a){h.push(new y(parseInt(a.key(),10),a.val().P))});xe(d,h);this.L.set(b,d);c.resolve()}.bind(a));return c.ha}function Be(a){var b={};b["@db"]={version:a.i.version()};b["@rev"]={R:1};a.La=1;b["@table"]={};a.i.ra().forEach(function(a,d){var e=a.getName();b["@table"][e]=d;this.L.set(e,new ve);this.Sa.set(e,d)},a);return b}m.Ab=function(a,b,c){return new te(this,a,c)};
m.Bc=function(a){var b=this.L.get(a)||null;if(null!==b)return b;throw new E(101,a);};m.close=aa();m.subscribe=ba("Dd");m.Gc=function(a){null!=this.Dd&&this.Dd(a)};function N(a,b,c,d){this.l=b;this.Ua=c;this.Zb=a;this.Uc=d}r("lf.backstore.IndexedDBRawBackStore",N);N.prototype.ed=g("l");N.prototype.getRawDBInstance=N.prototype.ed;N.prototype.fd=g("Ua");N.prototype.getRawTransaction=N.prototype.fd;N.prototype.tc=function(a){return new v(function(b,c){try{this.l.deleteObjectStore(a)}catch(d){c(d);return}b()},this)};N.prototype.dropTable=N.prototype.tc;
function Fe(a,b,c,d){return new v(function(a,f){var h;try{var k=this.Ua.objectStore(b);h=k.openCursor()}catch(n){f(n);return}h.onsuccess=function(){var b=h.result;b?(c(b),b.continue()):(d(k),a())};h.onerror=f},a)}function Ge(a){var b=null;return b=a instanceof ArrayBuffer?ub(a):a instanceof Date?a.getTime():a}
function He(a,b,c){function d(a){var b=uc(a.value),d=b.o,e;for(e in d){var z=sb(d[e]);c(z);d[e]=z.Fa()}a.update(b.Fa())}function e(a){var b=sb(a.value);c(b);a.update(b.Fa())}return Fe(a,b,a.Uc?d:e,aa())}N.prototype.pc=function(a,b,c){var d=Ge(c);return He(this,a,function(a){a.o[b]=d})};N.prototype.addTableColumn=N.prototype.pc;N.prototype.uc=function(a,b){return He(this,a,function(a){delete a.o[b]})};N.prototype.dropTableColumn=N.prototype.uc;
N.prototype.Kc=function(a,b,c){return He(this,a,function(a){a.o[c]=a.o[b];delete a.o[b]})};N.prototype.renameTableColumn=N.prototype.Kc;function Ie(a,b){var c=[];return new v(function(a,e){var f;try{f=this.Ua.objectStore(b).openCursor()}catch(h){e(h);return}f.onsuccess=function(){var b=f.result;if(b){if(this.Uc){var e;e=uc(b.value).o;for(var n in e)c.push(e[n])}else c.push(b.value);b.continue()}else a(c)}.bind(this);f.onerror=e},a)}N.prototype.tb=function(a){var b={},c;for(c in a)b[c]=Ge(a[c]);return tb(b)};
N.prototype.createRow=N.prototype.tb;N.prototype.Dc=g("Zb");N.prototype.getVersion=N.prototype.Dc;N.prototype.dump=function(){for(var a=this.l.objectStoreNames,b=[],c=0;c<a.length;++c){var d=a.item(c);b.push(this.ec(d))}return fb(b).then(function(b){var c={};b.forEach(function(b,d){c[a.item(d)]=b});return c})};N.prototype.dump=N.prototype.dump;N.prototype.ec=function(a){return Ie(this,a).then(function(a){return a.map(function(a){return a.value})})};function Je(a,b){this.ba=a;this.Kb=b}m=Je.prototype;m.get=function(a){if(0==a.length)return this.zc();a=a.map(function(a){return new v(function(c,d){var e;try{e=this.ba.get(a)}catch(f){d(f);return}e.onerror=d;e.onsuccess=function(a){c(this.Kb(a.target.result))}.bind(this)},this)},this);return fb(a)};
m.zc=function(){return new v(function(a,b){var c=[],d;try{d=this.ba.openCursor()}catch(e){b(e);return}d.onerror=b;d.onsuccess=function(){var b=d.result;b?(c.push(this.Kb(b.value)),b.continue()):a(c)}.bind(this)},this)};m.Sb=function(a){return new v(function(b,c){var d;try{d=a()}catch(e){c(e);return}d.onsuccess=b;d.onerror=c},this)};m.put=function(a){if(0==a.length)return w();a=a.map(function(a){return this.Sb(function(){return this.ba.put(a.Fa())}.bind(this))},this);return fb(a)};
m.remove=function(a){return new v(function(b,c){var d=this.ba.count();d.onsuccess=function(d){if(0==a.length||d.target.result==a.length)return this.Sb(function(){return this.ba.clear()}.bind(this)).then(b,c);d=a.map(function(a){return this.Sb(function(){return this.ba.delete(a)}.bind(this))},this);fb(d).then(b,c)}.bind(this);d.onerror=c},this)};function Ke(a,b,c,d,e){ac.call(this,c,e);this.h=a;this.Ua=b;this.Uc=d;this.Ua.oncomplete=this.Y.resolve.bind(this.Y);this.Ua.onabort=this.Y.reject.bind(this.Y)}t(Ke,ac);Ke.prototype.G=function(a,b,c){return this.Uc?(c=null!=c?c:0,a=this.Ua.objectStore(a),new vc(a,b,0==c?qa(xc,this.h):yc)):new Je(this.Ua.objectStore(a),b)};Ke.prototype.rc=function(){return this.Y.ha};function Le(a,b){this.h=a;this.i=b;this.Vc=b.af().Kf||!1}m=Le.prototype;
m.Ga=function(a){var b=window.indexedDB||window.mozIndexedDB||window.webkitIndexedDB||window.msIndexedDB;if(null==b)throw new E(352);var c=a||function(){return w()};return new v(function(a,e){var f;try{f=b.open(this.i.name(),this.i.version())}catch(h){e(h);return}f.onerror=e;f.onupgradeneeded=function(a){Me(this,c,a).then(aa(),e)}.bind(this);f.onsuccess=function(b){this.l=b.target.result;this.je().then(function(b){qb=b+1;a(this.l)}.bind(this))}.bind(this)},this)};
function Me(a,b,c){var d=c.target.result,e=c.target.transaction;c=new N(c.oldVersion,d,e,a.Vc);Ne(d);a.i.ra().forEach(qa(a.Ff,d,e),a);return b(c)}function Ne(a){for(var b=[],c=0;c<a.objectStoreNames.length;++c){var d=a.objectStoreNames.item(c);-1!=d.indexOf(".")&&b.push(d)}b.forEach(function(b){try{a.deleteObjectStore(b)}catch(c){}})}
m.Ff=function(a,b,c){a.objectStoreNames.contains(c.getName())||a.createObjectStore(c.getName(),{keyPath:"id"});c.zb()&&(c.Aa().forEach(function(c){this.sc(a,b,c.m(),"btree")},this),this.sc(a,b,Oe(c),"rowid"))};m.sc=function(a,b,c,d){a.objectStoreNames.contains(c)||(a.createObjectStore(c,{keyPath:"id"}),a=b.objectStore(c),(this.Vc?new vc(a,sb,yc):new Je(a,sb)).put([new wb(new vb(d))]))};m.Ab=function(a,b,c){b=this.l.transaction(Pe(b),0==a?"readonly":"readwrite");return new Ke(this.h,b,a,this.Vc,c)};
function Pe(a){var b=C();a.forEach(function(a){b.add(a.getName());a.zb()&&(a.Aa().forEach(function(a){b.add(a.m())}),b.add(Oe(a)))});return D(b)}
m.je=function(a){function b(){if(0==d.length)return w();var a=d.shift();return c(a).then(b)}function c(b){return new v(function(c,d){var O;try{O=(a||e.transaction([b])).objectStore(b).openCursor(null,"prev")}catch(ca){d(ca);return}O.onsuccess=function(a){(a=a.target.result)&&(f=Math.max(f,h(a)));c(f)};O.onerror=function(){c(f)}})}var d=this.i.ra().map(function(a){return a.getName()}),e=this.l,f=0,h=function(a){return this.Vc?(a=uc(a.value),Object.keys(a.o).reduce(function(a,b){return Math.max(a,b)},
0)):a.key}.bind(this);return new v(function(a){b().then(function(){a(f)})})};m.close=function(){this.l.close()};m.Bc=function(){throw new E(511);};m.subscribe=aa();m.Gc=aa();function Qe(a,b,c){ac.call(this,b,c);this.ba=a;0==b&&this.Y.resolve()}t(Qe,ac);Qe.prototype.G=function(a){return this.ba.Bc(a)};Qe.prototype.rc=function(){this.Y.resolve();return this.Y.ha};function Re(a){this.i=a;this.L=A()}m=Re.prototype;m.Ga=function(){this.i.ra().forEach(this.Xf,this);return w()};m.Bc=function(a){var b=this.L.get(a)||null;if(null===b)throw new E(101,a);return b};m.Ab=function(a,b,c){return new Qe(this,a,c)};function Se(a,b){if(!a.L.has(b)){var c=new ve;a.L.set(b,c);return c}return null}m.Xf=function(a){Se(this,a.getName());a.zb()&&(a.Aa().forEach(function(a){this.sc(a.m(),"btree")},this),this.sc(Oe(a),"rowid"))};m.sc=function(a,b){var c=Se(this,a);null===c||c.put([new wb(new vb(b))])};
m.close=aa();m.subscribe=aa();m.Gc=aa();function Te(a){Re.call(this,a);this.md=null}t(Te,Re);Te.prototype.subscribe=function(a){null===this.md&&(this.md=a)};Te.prototype.Gc=function(a){null===this.md||this.md(a)};function Ue(a,b,c){this.Ua=a;this.u=b;this.Kb=c}Ue.prototype.get=function(a){var b=this.Kb;return Ve(this.Ua,"SELECT id, value FROM "+this.u+" "+(0==a.length?"":"WHERE id IN ("+a.join(",")+")"),[],function(a){for(var d=a.rows.length,e=Array(d),f=0;f<d;++f)e[f]=b({id:a.rows.item(f).id,value:JSON.parse(a.rows.item(f).value)});return e})};
Ue.prototype.put=function(a){if(0==a.length)return w();var b="INSERT OR REPLACE INTO "+this.u+"(id, value) VALUES (?, ?)";a.forEach(function(a){Ve(this.Ua,b,[a.id(),JSON.stringify(a.o)])},this);return w()};Ue.prototype.remove=function(a){Ve(this.Ua,"DELETE FROM "+this.u+" "+(0==a.length?"":"WHERE id IN ("+a.join(",")+")"),[]);return w()};function We(a,b,c){ac.call(this,b,c);this.l=a;this.L=A();this.Hd=[]}t(We,ac);function Xe(a){return a.replace(".","__d__").replace("#","__s__")}We.prototype.G=function(a,b){var c=this.L.get(a)||null;null===c&&(c=new Ue(this,Xe(a),b),this.L.set(a,c));return c};function Ve(a,b,c,d){var e=x();a.Hd.push({Ag:b,pg:c,transform:d,Y:e});return e.ha}
We.prototype.rc=function(){var a=null,b=this.Y.reject.bind(this.Y),c=function(a,b){this.Y.reject(b)}.bind(this),d=[],e=function(b,h){if(null!==a){var k=h;null!=a.transform&&null!=h&&(k=a.transform(h));d.push(k);a.Y.resolve(k)}0<this.Hd.length?(a=k=this.Hd.shift(),b.executeSql(k.Ag,k.pg,e,c)):this.Y.resolve(d)}.bind(this);0==this.qf?this.l.readTransaction(e,b):this.l.transaction(e,b);return this.Y.ha};function P(a,b,c){this.l=c;this.h=a;this.Zb=b}r("lf.backstore.WebSqlRawBackStore",P);P.prototype.ed=g("l");P.prototype.getRawDBInstance=P.prototype.ed;P.prototype.fd=function(){throw new E(356);};P.prototype.getRawTransaction=P.prototype.fd;function Ye(a){return new We(a.l,1,new dd(a.h,C()))}P.prototype.tc=function(a){var b=Ye(this);Ve(b,"DROP TABLE "+a,[]);return b.ia()};P.prototype.dropTable=P.prototype.tc;
P.prototype.ec=function(a){var b=Ye(this);Ve(b,"SELECT id, value FROM "+a,[]);return b.ia().then(function(a){for(var b=a[0].rows.length,e=Array(b),f=0;f<b;++f)e[f]={id:a[0].rows.item(f).id,value:JSON.parse(a[0].rows.item(f).value)};return w(e)})};function Ze(a,b,c){var d=Ye(a),e="UPDATE "+b+" SET value=? WHERE id=?";return a.ec(b).then(function(a){a.forEach(function(a){a=c(a);Ve(d,e,[JSON.stringify(a.value),a.id])});return d.ia()})}
P.prototype.pc=function(a,b,c){var d=Ge(c);return Ze(this,a,function(a){a.value[b]=d;return a})};P.prototype.addTableColumn=P.prototype.pc;P.prototype.uc=function(a,b){return Ze(this,a,function(a){delete a.value[b];return a})};P.prototype.dropTableColumn=P.prototype.uc;P.prototype.Kc=function(a,b,c){return Ze(this,a,function(a){a.value[c]=a.value[b];delete a.value[b];return a})};P.prototype.renameTableColumn=P.prototype.Kc;P.prototype.tb=function(a){var b={},c;for(c in a)b[c]=Ge(a[c]);return tb(b)};
P.prototype.createRow=P.prototype.tb;P.prototype.Dc=g("Zb");P.prototype.getVersion=P.prototype.Dc;function $e(a){Ve(a,'SELECT tbl_name FROM sqlite_master WHERE type="table"',[],function(a){for(var c=Array(a.rows.length),d=0;d<c.length;++d)c[d]=a.rows.item(d).tbl_name;return c})}
P.prototype.dump=function(){var a=x(),b=Ye(this);$e(b);var c={};b.ia().then(function(b){b=b[0].filter(function(a){return"__lf_ver"!=a&&"__WebKitDatabaseInfoTable__"!=a}).map(function(a){return this.ec(a).then(function(b){c[a]=b})},this);fb(b).then(function(){a.resolve(c)})}.bind(this));return a.ha};P.prototype.dump=P.prototype.dump;function af(a,b,c){this.h=a;this.i=b;this.zg=c||4194304}m=af.prototype;m.Ga=function(a){if(null==window.openDatabase)throw new E(353);var b=a||function(){return w()};return new v(function(a,d){try{var e=window.openDatabase(this.i.name(),"",this.i.name(),this.zg);if(null!=e)this.l=e,bf(this,b).then(a,d);else throw new E(354);}catch(f){d(f)}},this)};
function bf(a,b){var c=x(),d=new We(a.l,1,new dd(a.h,C()));Ve(d,"CREATE TABLE IF NOT EXISTS __lf_ver(id INTEGER PRIMARY KEY, v INTEGER)",[]);Ve(d,"SELECT v FROM __lf_ver WHERE id = 0",[]);d.ia().then(function(a){var d=0;a[1].rows.length&&(d=a[1].rows.item(0).v);d<this.i.version()?this.be(b,d).then(c.resolve.bind(c)):d>this.i.version()?c.reject(new E(108)):c.resolve()}.bind(a));return c.ha}m.Ab=function(a,b,c){if(null!=this.l)return new We(this.l,a,c);throw new E(2);};m.close=aa();
m.Bc=function(){throw new E(512);};m.subscribe=function(){throw new E(355);};m.Gc=function(){throw new E(355);};m.be=function(a,b){var c=x();cf(this).then(function(){a(new P(this.h,b,this.l)).then(function(){return this.je()}.bind(this)).then(c.resolve.bind(c))}.bind(this),c.reject.bind(c));return c.ha};
function cf(a){var b=a.i.ra(),c=new We(a.l,1,new dd(a.h,C())),d=new We(a.l,1,new dd(a.h,C()));Ve(c,"INSERT OR REPLACE INTO __lf_ver VALUES (0, ?)",[a.i.version()]);$e(c);return c.ia().then(function(a){function c(a,b){Ve(d,"INSERT INTO "+a+"(id, value) VALUES(?, ?)",[-1,JSON.stringify(rb(new wb(new vb(b))))])}var h=a[1];h.filter(function(a){return-1!=a.indexOf("__d__")}).forEach(function(a){Ve(d,"DROP TABLE "+a,[])});var k=[],n=[],z=[];b.map(function(a){-1==h.indexOf(a.getName())&&k.push(a.getName());
a.zb&&(a.Aa().forEach(function(a){a=Xe(a.m());k.push(a);n.push(a)}),a=Xe(Oe(a)),k.push(a),z.push(a))});k.forEach(function(a){Ve(d,"CREATE TABLE "+a+"(id INTEGER PRIMARY KEY, value TEXT)",[])});n.forEach(function(a){c(a,"btree")});z.forEach(function(a){c(a,"rowid")});return d.ia()})}
m.je=function(){var a=0,b=x(),c=function(b){var c=new We(this.l,0);Ve(c,"SELECT MAX(id) FROM "+b,[]);return c.ia().then(function(b){b=b[0].rows.item(0)[0];a=Math.max(b,a)})}.bind(this),d=this.i.ra().map(function(a){return c(a.getName())});fb(d).then(function(){b.resolve(a)},function(a){b.reject(a)});return b.ha};function df(a){this.X=A();this.Yb=A();a.ra().forEach(function(a){this.Yb.set(a.getName(),C())},this)}m=df.prototype;m.set=function(a,b){this.X.set(b.id(),b);this.Yb.get(a).add(b.id())};m.Vb=function(a,b){var c=this.Yb.get(a);b.forEach(function(a){this.X.set(a.id(),a);c.add(a.id())},this)};m.get=function(a){return this.X.get(a)||null};function ef(a,b){return b.map(function(a){return this.get(a)},a)}
m.Xa=function(a,b,c){var d=[],e=Math.min(b,c),f=Math.max(b,c);a=this.Yb.get(a);if(a.size<f-e)a.forEach(function(a){a>=e&&a<=f&&(a=this.X.get(a),d.push(a))},this);else for(b=e;b<=f;++b)a.has(b)&&(c=this.X.get(b),d.push(c));return d};m.remove=function(a,b){this.X.delete(b);this.Yb.get(a).delete(b)};m.Ig=function(a){return null!=a?this.Yb.get(a).size:this.X.size};m.clear=function(){this.X.clear();this.Yb.clear()};function ff(a,b,c){var d=0,e=a.length;for(c=c||gf;d<e;){var f=d+e>>1;0>c(a[f],b)?d=f+1:e=f}return d==e&&a[d]==b?d:~d}function gf(a,b){return a-b}function hf(a,b,c){c=ff(a,b,c);return 0>c?(a.splice(-(c+1),0,b),!0):!1};function jf(a,b,c,d){a=b?a.reverse():a;if(null==c&&null==d)return a;c=Math.min(q(c)?c:a.length,a.length);if(0==c)return[];d=Math.min(d||0,a.length);return a.slice(d,d+c)};function kf(a){this.Zc=0==a?mf:nf;this.Xd=0==a?function(a){return null!=a?a.reverse():null}:function(a){return a||null};this.ce=0==a?of:pf}t(kf,zc);function nf(a,b){return a>b?1:a<b?-1:0}function mf(a,b){return nf(b,a)}function pf(a,b){return pd(a,b)}function of(a,b){return pd(b,a)}m=kf.prototype;m.sb=function(a,b){var c=this.Xd(b),d=[c.c==F,c.w==F];if(!d[0]){var e=this.Zc(a,c.c);d[0]=c.da?1==e:-1!=e}d[1]||(e=this.Zc(a,c.w),d[1]=c.la?-1==e:1!=e);return d};
m.compare=function(a,b){return this.Zc(a,b)};m.min=function(a,b){return a<b?1:a==b?0:-1};m.max=function(a,b){return a>b?1:a==b?0:-1};m.Ob=function(a,b){var c=this.sb(a,b);return c[0]&&c[1]};m.mf=function(a){return a.filter(function(a){return null!==a}).sort(function(a,c){return this.ce(a,c)}.bind(this))};m.Rd=function(a){return this.Xd(a).c==F};m.rd=function(a){a=this.Xd(a);return[a.c,a.w]};m.Yc=function(a){return null!==a};m.toString=function(){return this.compare==mf?"SimpleComparator_DESC":"SimpleComparator_ASC"};
function qf(a){kf.call(this,a);this.Zc=0==a?rf:sf}t(qf,kf);function sf(a,b){return null===a?null===b?0:-1:null===b?1:nf(a,b)}function rf(a,b){return sf(b,a)}qf.prototype.Ob=function(a,b){return null===a?kd(b):qf.ab.Ob.call(this,a,b)};qf.prototype.Fb=function(a,b){return null===a?null===b?0:-1:null===b?1:null};qf.prototype.min=function(a,b){var c=this.Fb(a,b);null===c&&(c=qf.ab.min.call(this,a,b));return c};qf.prototype.max=function(a,b){var c=this.Fb(a,b);null===c&&(c=qf.ab.max.call(this,a,b));return c};function tf(a){this.va=a.map(function(a){return new kf(a)})}t(tf,zc);function uf(a,b,c,d){for(var e=0,f=0;f<a.va.length&&0==e;++f)e=d(a.va[f],b[f],c[f]);return e}m=tf.prototype;m.compare=function(a,b){return uf(this,a,b,function(a,b,e){return b==F||e==F?0:a.compare(b,e)})};m.min=function(a,b){return uf(this,a,b,function(a,b,e){return a.min(b,e)})};m.max=function(a,b){return uf(this,a,b,function(a,b,e){return a.max(b,e)})};
m.sb=function(a,b){for(var c=[!0,!0],d=0;d<this.va.length&&(c[0]||c[1]);++d){var e=this.va[d].sb(a[d],b[d]);c[0]=c[0]&&e[0];c[1]=c[1]&&e[1]}return c};m.Ob=function(a,b){for(var c=!0,d=0;d<this.va.length&&c;++d)c=this.va[d].Ob(a[d],b[d]);return c};
m.mf=function(a){var b=a.filter(function(a){return a.every(ga)});a=Array(this.va.length);for(var c=0;c<a.length;c++)a[c]=b.map(function(a){return a[c]});a.forEach(function(a,b){a.sort(function(a,c){return this.va[b].ce(a,c)}.bind(this))},this);b=Array(b.length);for(c=0;c<b.length;c++)b[c]=a.map(function(a){return a[c]});return b.sort(function(a,b){for(var c=0,h=0;h<this.va.length&&0==c;++h)c=this.va[h].ce(a[h],b[h]);return c}.bind(this))};m.Rd=function(a){return this.va[0].Rd(a[0])};
m.rd=function(a){var b=a.map(function(a,b){return this.va[b].rd(a)[0]},this);a=a.map(function(a,b){return this.va[b].rd(a)[1]},this);return[b,a]};m.Yc=function(a){return a.every(function(a,c){return this.va[c].Yc(a)},this)};function vf(a){tf.call(this,a);this.va=a.map(function(a){return new qf(a)})}t(vf,tf);function wf(){this.na=0}wf.prototype.add=function(a,b){this.na+=b};wf.prototype.remove=function(a,b){this.na-=b};wf.prototype.clear=function(){this.na=0};function xf(a,b){a.clear();b.forEach(function(a){this.na+=a.na},a)};function yf(a,b,c,d){this.u=a;this.O=b;this.sf=c;this.pb=new wf;if(d){a=511;a*=a*a;if(d.length>=a)throw new E(6,a);d=zf(this,d);this.qa=d=Af(d)}else this.clear()}var Bf=[];m=yf.prototype;m.getName=g("u");m.toString=function(){return this.qa.toString()};m.add=function(a,b){this.qa=this.qa.xb(a,b)};m.set=function(a,b){this.qa=this.qa.xb(a,b,!0)};m.remove=function(a,b){this.qa=this.qa.remove(a,b)};m.get=function(a){return this.qa.get(a)};
m.$c=function(a){if(null==a)return this.Ma().na;if(a instanceof id){if(kd(a))return this.Ma().na;if(od(a))return this.get(a.c).length}return this.Xa([a]).length};m.Ma=g("pb");m.zc=function(a,b,c,d){c=Array(a);this.qa.fill({offset:b?this.pb.na-a-d:d,count:a,me:0},c);return b?c.reverse():c};
m.Xa=function(a,b,c,d){var e=Cf(this.qa).b[0];if(!q(e)||0==c)return Bf;b=b||!1;c=null!=c?Math.min(c,this.pb.na):this.pb.na;d=d||0;var f=Math.min(Math.max(this.pb.na-d,0),c);if(0==f)return Bf;if(!q(a)||1==a.length&&a[0]instanceof id&&kd(a[0]))return this.zc(f,b,c,d);a=this.O.mf(a);var h=Array(b?this.pb.na:f),k={count:0,V:h.length,reverse:b,K:d},n=this.O instanceof vf;a.forEach(function(a){for(var b=this.O.rd(a),b=this.O.Rd(a)?e:b[0],b=Df(this.qa,b),c=k.count,d=0;null!=b&&k.count<k.V;){if(n){for(var f=
b,Qc=a,Za=k,he=h,ie=f.C.dc(),je=-1,Ba=0;Ba<f.b.length;++Ba)if(ie.Ob(f.b[Ba],Qc)){je=Ba;break}if(-1!=je)for(Ba=je;Ba<f.b.length&&Za.count<Za.V;++Ba){if(!ie.Ob(f.b[Ba],Qc))if(ie.Yc(f.b[Ba]))break;else continue;Ef(f,Za,he,Ba)}}else b.Xa(a,k,h);k.count!=c||0<k.K?(d=0,c=k.count):d++;b=2==d?null:b.next()}},this);h.length>k.count&&h.splice(k.count,h.length-k.count);return b?jf(h,b,c,d):h};m.clear=function(){this.qa=Ff(this);this.pb.clear()};m.fb=function(a){return this.qa.fb(a)};m.min=function(){return this.Fb(this.O.min.bind(this.O))};
m.max=function(){return this.Fb(this.O.max.bind(this.O))};function Gf(a,b,c){if(!a.O.Yc(b.b[c]))if(1<b.b[c].length){if(null===b.b[c][0])return null}else return null;return[b.b[c],a.sf?[b.A[c]]:b.A[c]]}
m.Fb=function(a){var b;a:{b=Cf(this.qa);var c=0;do if(c>=b.b.length)b=b.sa,c=0;else{var d=Gf(this,b,c);if(null!==d){b=d;break a}c++}while(null!==b);b=null}a:{c=Hf(this.qa);d=c.b.length-1;do if(0>d)c=c.lb,d=0;else{var e=Gf(this,c,d);if(null!==e){c=e;break a}d--}while(null!==c);c=null}return null===b||null===c?null:1==a(b[0],c[0])?b:c};m.Ia=g("sf");m.dc=g("O");m.Vd=function(a,b){return null!=a?-1==this.O.compare(a,b):!1};m.Na=function(a,b){return null!=a?0==this.O.compare(a,b):!1};
m.Fa=function(){for(var a=[],b=Cf(this.qa);b;)a.push(new y(b.oa,[b.b,b.A])),b=b.sa;return a};function If(a,b,c,d){a=new yf(b,a,c);d=Jf(d,a);a.qa=d;return a}function Kf(a,b){this.oa=a;this.C=b;this.ib=0;this.sa=this.lb=this.B=null;this.b=[];this.A=[];this.g=[]}function Ff(a){return new Kf(qb++,a)}function Q(a){return 0==a.ib}m=Kf.prototype;m.next=g("sa");
function Lf(a){function b(a){return null!=a?a.oa.toString():"_"}var c=a.oa+"["+a.b.join("|")+"]",d=a.g.map(function(a){return a.oa}).join("|"),e=a.A.join("/"),f=b(a.lb)+"{",f=Q(a)?f+e:f+d,f=f+"}"+b(a.B);a.sa&&(a=Lf(a.sa),c=c+"  "+a[0],f=f+"  "+a[1]);return[c,f]}m.toString=function(){var a="",b=Lf(this),a=a+(b[0]+"\n"+b[1]+"\n");this.g.length&&(a+=this.g[0].toString());return a};function Cf(a){return Q(a)?a:Cf(a.g[0])}function Hf(a){return Q(a)?a:Hf(a.g[a.g.length-1])}
function Mf(a,b){b&&(b.lb=a);a&&(a.sa=b)}function zf(a,b){for(var c=b.length,d=0,e=Ff(a),f=e;0<c;){var h=768<=c?511:257<=c&&511>=c?c:257,k=b.slice(d,d+h);e.b=k.map(function(a){return a.key});e.A=k.map(function(a){return a.value});d+=h;c-=h;0<c&&(h=Ff(e.C),Mf(e,h),e=h)}return f}function Nf(a){var b=a[0],c=Ff(b.C);c.ib=b.ib+1;c.g=a;for(b=0;b<a.length;++b)a[b].B=c,0<b&&c.b.push(a[b].b[0]);return c}
function Af(a){var b=a,c=[];do c.push(b),b=b.sa;while(b);if(512>=c.length)b=Nf(c);else{var d=c.length,e=0,b=Ff(a.C);for(b.ib=a.ib+2;0<d;){a=768<=d?511:257<=d&&511>=d?d:257;var f=c.slice(e,e+a),h=Nf(f);h.B=b;b.g.length&&(b.b.push(f[0].b[0]),Mf(b.g[b.g.length-1],h));b.g.push(h);e+=a;d-=a}}return b}m.get=function(a){var b=Of(this,a);if(Q(this)){var c=Bf;this.C.Na(this.b[b],a)&&(c=c.concat(this.A[b]));return c}b=this.C.Na(this.b[b],a)?b+1:b;return this.g[b].get(a)};
m.fb=function(a){var b=Of(this,a);return this.C.Na(this.b[b],a)?!0:Q(this)?!1:this.g[b].fb(a)};m.remove=function(a,b){Pf(this,a,-1,b);if(null===this.B){var c=this;1==this.g.length&&(c=this.g[0],c.B=null);return c}return this};function Qf(a){return Q(a)?a.b[0]:Qf(a.g[0])}function Rf(a){a.b=[];for(var b=1;b<a.g.length;++b)a.b.push(Qf(a.g[b]))}
function Pf(a,b,c,d){var e=Of(a,b),f=Q(a);if(!f){var h=a.C.Na(a.b[e],b)?e+1:e;if(Pf(a.g[h],b,h,d))Rf(a);else return!1}else if(!a.C.Na(a.b[e],b))return!1;if(a.b.length>e&&a.C.Na(a.b[e],b)){if(q(d)&&!a.C.Ia()&&f&&(h=a.A[e],d=ff(h,d,void 0),0>d?d=!1:(h.splice(d,1),d=!0),d&&a.C.Ma().remove(b,1),a.A[e].length))return!1;a.b.splice(e,1);f&&(f=a.C.Ia()?1:a.A[e].length,a.A.splice(e,1),a.C.Ma().remove(b,f))}if(256>a.b.length&&null!==a.B){a:{b=null;if(a.sa&&256<a.sa.b.length)b=a.sa,e=d=0,f=a.b.length+1;else if(a.lb&&
256<a.lb.b.length)b=a.lb,d=a.lb.b.length-1,e=Q(a)?d:d+1,f=0;else{b=!1;break a}a.b.splice(f,0,b.b[d]);b.b.splice(d,1);d=Q(a)?a.A:a.g;h=null;Q(a)?h=b.A:(h=b.g,h[e].B=a);d.splice(f,0,h[e]);h.splice(e,1);Q(b)||(Rf(b),Rf(a));b=!0}b||Sf(a,c)}return!0}
function Sf(a,b){var c,d,e;a.sa&&511>a.sa.b.length?(c=a.sa,e=d=0):a.lb&&(c=a.lb,d=c.b.length,e=Q(c)?c.A.length:c.g.length);d=[d,0].concat(a.b);Array.prototype.splice.apply(c.b,d);d=null;Q(a)?d=a.A:(d=a.g,d.forEach(function(a){a.B=c}));d=[e,0].concat(d);Array.prototype.splice.apply(Q(c)?c.A:c.g,d);Mf(a.lb,a.sa);Q(c)||Rf(c);-1!=b&&(a.B.b.splice(b,1),a.B.g.splice(b,1))}
m.xb=function(a,b,c){var d=Of(this,a);if(Q(this)){if(this.C.Na(this.b[d],a)){if(c)this.C.Ma().remove(a,this.C.Ia()?1:this.A[d].length),this.A[d]=this.C.Ia()?b:[b];else{if(this.C.Ia())throw new E(201);if(!hf(this.A[d],b))throw new E(109);}this.C.Ma().add(a,1);return this}this.b.splice(d,0,a);this.A.splice(d,0,this.C.Ia()?b:[b]);this.C.Ma().add(a,1);512==this.b.length?(d=Ff(this.C),a=Ff(this.C),a.ib=1,a.b=[this.b[256]],a.g=[this,d],a.B=this.B,this.B=a,d.b=this.b.splice(256),d.A=this.A.splice(256),d.B=
a,Mf(d,this.sa),Mf(this,d),d=a):d=this;return d}d=this.C.Na(this.b[d],a)?d+1:d;a=this.g[d].xb(a,b,c);Q(a)||1!=a.b.length||(this.b.splice(d,0,a.b[0]),a.g[1].B=this,a.g[0].B=this,this.g.splice(d,1,a.g[1]),this.g.splice(d,0,a.g[0]));return 512==this.b.length?Uf(this):this};function Uf(a){var b=Ff(a.C),c=Ff(a.C);b.B=a.B;b.ib=a.ib+1;b.b=[a.b[256]];b.g=[a,c];a.b.splice(256,1);c.B=b;c.ib=a.ib;c.b=a.b.splice(256);c.g=a.g.splice(257);c.g.forEach(function(a){a.B=c});a.B=b;Mf(c,a.sa);Mf(a,c);return b}
function Of(a,b){for(var c=0,d=a.b.length;c<d;){var e=c+d>>1;a.C.Vd(a.b[e],b)?c=e+1:d=e}return c}function Df(a,b){if(!Q(a)){var c=Of(a,b);a.C.Na(a.b[c],b)&&c++;return Df(a.g[c],b)}return a}
m.Xa=function(a,b,c){function d(a){return a[0]?a[1]?0:1:-1}var e=this.C.dc(),f=0,h=this.b.length-1,k=this.b,n=d(e.sb(k[f],a)),z=d(e.sb(k[h],a));if(1!=n&&(-1!=n||-1!=z)){var O=function(a,b){var c=a+b>>1;return c==a?c+1:c},ca=function(b,c,f){if(b>=c)return 0==f?c:-1;var h=d(e.sb(k[b],a));if(0==h)return b;if(1==h)return-1;h=O(b,c);if(h==c)return 0==f?c:-1;var n=d(e.sb(k[h],a));return 0==n?ca(b,h,n):-1==n?ca(h+1,c,f):ca(b+1,h,n)},zb=function(b,c){if(b>=c)return b;var f=d(e.sb(k[c],a));if(0==f)return c;
if(-1==f)return b;f=O(b,c);if(f==c)return b;var h=d(e.sb(k[f],a));return 0==h?zb(f,c):1==h?zb(b,f-1):-1};0!=n&&(f=ca(f+1,h,z));-1!=f&&(h=zb(f,h),-1!=h&&h>=f&&Vf(this,b,c,f,h+1))}};function Ef(a,b,c,d){if(a.C.Ia())!b.reverse&&b.K?b.K--:c[b.count++]=a.A[d];else for(var e=0;e<a.A[d].length&&b.count<c.length;++e)!b.reverse&&b.K?b.K--:c[b.count++]=a.A[d][e]}function Vf(a,b,c,d,e){for(;d<e&&(b.reverse||!(b.count>=b.V));++d)Ef(a,b,c,d)}
m.fill=function(a,b){if(Q(this))for(var c=0;c<this.A.length&&0<a.count;++c)if(0<a.offset){if(a.offset-=this.C.Ia()?1:this.A[c].length,0>a.offset)for(var d=this.A[c].length+a.offset;d<this.A[c].length&&0<a.count;++d)b[a.me++]=this.A[c][d],a.count--}else if(this.C.Ia())b[a.me++]=this.A[c],a.count--;else for(d=0;d<this.A[c].length&&0<a.count;++d)b[a.me++]=this.A[c][d],a.count--;else for(c=0;c<this.g.length&&0<a.count;++c)this.g[c].fill(a,b)};
function Jf(a,b){for(var c=b.Ma(),d=a.map(function(a){var d=new Kf(a.id(),b);d.b=a.o[0];d.A=a.o[1];d.b.forEach(function(a,e){c.add(a,b.Ia()?1:d.A[e].length)});return d}),e=0;e<d.length-1;++e)Mf(d[e],d[e+1]);return 1<d.length?Af(d[0]):d[0]};function Wf(a){if(1==a.f.length)return new kf(a.f[0].kb);var b=a.f.map(function(a){return a.kb});return a.f.some(function(a){return a.aa.ic()})?new vf(b):new tf(b)};function Xf(a){this.fa=a;this.jb=C();this.Mc=new wf;this.pb=new wf}m=Xf.prototype;m.getName=function(){return this.fa.getName()};m.add=function(a,b){null===a?(this.jb.add(b),this.Mc.add(a,1)):this.fa.add(a,b)};m.set=function(a,b){null===a?(this.jb.clear(),this.Mc.clear(),this.add(a,b)):this.fa.set(a,b)};m.remove=function(a,b){null===a?b?(this.jb.delete(b),this.Mc.remove(a,1)):(this.jb.clear(),this.Mc.clear()):this.fa.remove(a,b)};m.get=function(a){return null===a?D(this.jb):this.fa.get(a)};m.$c=function(a){return this.fa.$c(a)};
m.Ma=function(){xf(this.pb,[this.fa.Ma(),this.Mc]);return this.pb};m.Xa=function(a,b,c,d){b=this.fa.Xa(a,b,c,d);return null!=a?b:b.concat(D(this.jb))};m.clear=function(){this.jb.clear();this.fa.clear()};m.fb=function(a){return null===a?0!=this.jb.size:this.fa.fb(a)};m.min=function(){return this.fa.min()};m.max=function(){return this.fa.max()};m.Fa=function(){return[new y(-2,D(this.jb))].concat(this.fa.Fa())};m.dc=function(){return this.fa.dc()};
function Yf(a,b){for(var c=-1,d=0;d<b.length;++d)if(-2==b[d].id()){c=d;break}if(-1==c)throw new E(102);var d=b[c].o,e=b.slice(0);e.splice(c,1);var c=a(e),f=new Xf(c);d.forEach(function(a){f.jb.add(a)});return f}m.Ia=function(){return this.fa.Ia()};function Zf(a){this.u=a;this.ob=C();this.O=new kf(1)}m=Zf.prototype;m.getName=g("u");m.add=function(a){if("number"!=typeof a)throw new E(103);this.ob.add(a)};m.set=function(a,b){this.add(a,b)};m.remove=function(a){this.ob.delete(a)};m.get=function(a){return this.fb(a)?[a]:[]};m.min=function(){return this.Fb(this.O.min.bind(this.O))};m.max=function(){return this.Fb(this.O.max.bind(this.O))};
m.Fb=function(a){if(0==this.ob.size)return null;var b=D(this.ob).reduce(function(b,d){return null===b||1==a(d,b)?d:b},null);return[b,[b]]};m.$c=function(){return this.ob.size};m.Xa=function(a,b,c,d){var e=a||[nd()];a=D(this.ob).filter(function(a){return e.some(function(b){return this.O.Ob(a,b)},this)},this);return jf(a,b,c,d)};m.clear=function(){this.ob.clear()};m.fb=function(a){return this.ob.has(a)};m.Fa=function(){return[new y(0,D(this.ob))]};m.dc=g("O");
function $f(a,b){var c=new Zf(a);b[0].o.forEach(function(a){c.add(a,a)});return c}m.Ia=l(!0);m.Ma=function(){var a=new wf;a.na=this.ob.size;return a};function ag(a){this.Ka=a.j(ic);this.D=a.j(kc);this.U=a.j(jc)}ag.prototype.Ga=function(a){var b=a.ra(),c=function(){if(0==b.length)return w();var a=b.shift();return(a.zb()?bg(this,a):cg(this,a)).then(c)}.bind(this);return c()};function cg(a,b){var c=a.Ka.Ab(0,[b]),d=c.G(b.getName(),b.Bb.bind(b)).get([]).then(function(a){this.U.Vb(b.getName(),a);dg(this,b,a)}.bind(a));c.ia();return d}
function dg(a,b,c){var d=a.D.mc.get(b.getName())||[];c.forEach(function(a){d.forEach(function(b){var c=a.Eb(b.getName());b.add(c,a.id())})})}function bg(a,b){var c=a.Ka.Ab(0,[b]),d=c.G(b.getName(),b.Bb).get([]).then(function(a){this.U.Vb(b.getName(),a)}.bind(a)),e=b.Aa().map(function(a){return eg(this,a,c)},a).concat(fg(a,b,c));c.ia();return fb(e.concat(d))}
function eg(a,b,c){c=c.G(b.m(),sb,1);var d=Wf(b);return c.get([]).then(function(a){if(1<a.length){if(gg(b)){var c=If.bind(void 0,d,b.m(),b.Ec);a=Yf(c,a.slice(1))}else a=If(d,b.m(),b.Ec,a.slice(1));this.D.set(b.Nc,a)}}.bind(a))}function fg(a,b,c){return c.G(Oe(b),sb,1).get([]).then(function(a){1<a.length&&(a=$f(Oe(b),a.slice(1)),this.D.set(b.getName(),a))}.bind(a))};function hg(){this.ba=A();this.mc=A()}hg.prototype.Ga=function(a){a.ra().forEach(function(a){var c=[];this.mc.set(a.getName(),c);var d=Oe(a);if(null===this.get(d)){var e=new Zf(d);c.push(e);this.ba.set(d,e)}a.Aa().forEach(function(a){var b;b=Wf(a);b=new yf(a.m(),b,a.Ec);b=gg(a)?new Xf(b):b;c.push(b);this.ba.set(a.m(),b)},this)},this);return w()};hg.prototype.get=function(a){return this.ba.get(a)||null};
hg.prototype.set=function(a,b){var c=this.mc.get(a)||null;null===c&&(c=[],this.mc.set(a,c));for(var d=null,e=0;e<c.length;e++)if(c[e].getName()==b.getName()){d=e;break}null!==d&&0<c.length?c.splice(d,1,b):c.push(b);this.ba.set(b.getName(),b)};function ig(a){this.lc=[];q(a)&&this.add(a)}ig.prototype.toString=function(){return this.lc.map(function(a){return a.toString()}).join(",")};ig.prototype.fb=function(a){return this.lc.some(function(b){return b.contains(a)})};ig.prototype.Db=g("lc");
ig.prototype.add=function(a){if(0!=a.length)if(a=this.lc.concat(a),1==a.length)this.lc=a;else{a.sort(pd);for(var b=[],c=a[0],d=1;d<a.length;++d)if(ld(c,a[d])){var e=a[d],f=nd();if(c.c!=F&&e.c!=F){var h=md(c.c,e.c,!0);1!=h?(f.c=c.c,f.da=0!=h?c.da:c.da&&e.da):(f.c=e.c,f.da=e.da)}c.w!=F&&e.w!=F&&(h=md(c.w,e.w,!1),-1!=h?(f.w=c.w,f.la=0!=h?c.la:c.la&&e.la):(f.w=e.w,f.la=e.la));c=f}else b.push(c),c=a[d];b.push(c);this.lc=b}};
function jg(a,b){var c=[];a.Db().map(function(a){return b.Db().map(function(b){var c;if(ld(a,b)){c=nd();var h=md(a.c,b.c,!0),h=0==h?a.da?a:b:-1!=h?a:b;c.c=h.c;c.da=h.da;a.w==F||b.w==F?b=a.w==F?b:a:(h=md(a.w,b.w,!1),b=0==h?a.la?a:b:-1==h?a:b);c.w=b.w;c.la=b.la}else c=null;return c})}).forEach(function(a){c=c.concat(a)});return new ig(c.filter(function(a){return null!==a}))};function kg(a,b){var c=[],d=null,e=null;Rd(a,function(a){var h=b(a);null==a.getParent()?e=h:Od(d,h);var k=a.getParent();null!==k&&L(k).length==L(d).length&&(k=c.indexOf(d),-1!=k&&c.splice(k,1));1<L(a).length&&c.push(h);d=null===a.g?c[c.length-1]:h});return e}function lg(a){return mg(a,function(a){return null===a.g})}
function ng(a){var b=a.getParent(),c=0;null!==b&&(c=L(b).indexOf(a),b.removeChild(a));var d=L(a).slice();d.forEach(function(d,f){a.removeChild(d);null===b||Nd(b,d,c+f)});return{parent:b,children:d}}function og(a,b){L(a).slice().forEach(function(c){a.removeChild(c);Od(b,c)});Od(a,b)}function pg(a){var b=Md(a,0);ng(a);og(b,a);return b}
function qg(a,b,c){var d=Md(a,0),e=L(d).slice();if(!e.some(function(a){return b(a)}))return a;ng(a);e.forEach(function(e,h){if(b(e)){var k=c(a);Pd(d,h);Od(k,e);Nd(d,k,h)}});return d}function rg(a,b,c,d){var e=a.getParent();null!==e&&(a=L(e).indexOf(a),Pd(e,a),Nd(e,c,a));L(b).slice().forEach(function(a){b.removeChild(a);Od(d,a)});return c}function mg(a,b,c){function d(a){b(a)&&e.push(a);null!=c&&c(a)||L(a).forEach(d)}var e=[];d(a);return e}
function sg(a,b){var c=b||function(a){return a.toString()+"\n"},d="";Rd(a,function(a){for(var b=0;b<Ld(a);b++)d+="-";d+=c(a)});return d};function tg(a){Sd.call(this);this.Rb=a;this.Ya=!1}t(tg,Sd);m=tg.prototype;m.Jb=function(){return kg(this,function(a){if(a instanceof tg){var b=new tg(a.Rb);b.Ya=a.Ya;a=a.W();b.oa=a;return b}return a.Jb()})};m.gb=function(a){var b=a||[];Rd(this,function(a){a!=this&&a.gb(b)}.bind(this));a=C(b);return D(a)};m.td=function(a){this.Ya!=a&&(this.Ya=a,this.Rb="and"==this.Rb?"or":"and",L(this).forEach(function(b){return b.td(a)}))};
m.eval=function(a){var b=L(this).map(function(b){return b.eval(a)});return ug(this,b)};function ug(a,b){return"and"==a.Rb?vd(b):wd(b)}m.toString=function(){return"combined_pred_"+this.Rb.toString()};function vg(a,b,c){Sd.call(this);this.ga=a;this.ka=b;this.F=c;this.Yd=null;a=Dd.Ac();this.vc=Jd(a,this.ga.H(),this.F);this.cg=a.Qe.get(this.ga.H())||null}t(vg,Sd);m=vg.prototype;m.Jb=function(){var a=new vg(this.ga,this.ka,this.F),b=this.W();a.oa=b;return a};m.gb=function(a){return null!=a?(a.push(this.ga),a.push(this.ka),a):[this.ga,this.ka]};
m.reverse=function(){var a=this.F;switch(this.F){case "gt":a="lt";break;case "lt":a="gt";break;case "gte":a="lte";break;case "lte":a="gte"}return new vg(this.ka,this.ga,a)};m.eval=function(a){var b=a.entries.filter(function(a){var b=I(a,this.ga);a=I(a,this.ka);return this.vc(b,a)},this);return new G(b,H(a))};m.toString=function(){return"join_pred("+this.ga.m()+" "+this.F+" "+this.ka.m()+")"};
function wg(a,b,c){var d=null,e=null;-1!=H(b).indexOf(J(a.ga.G()))?(d=b,e=c):(d=c,e=b);if(d.entries.length>e.entries.length){a:{b=a.ga;a.ga=a.ka;a.ka=b;b=a.F;switch(a.F){case "gt":b="lt";break;case "lt":b="gt";break;case "gte":b="lte";break;case "lte":b="gte";break;default:break a}a.F=b;a.vc=Jd(Dd.Ac(),a.ga.H(),a.F)}return[e,d]}return[d,e]}function xg(a){var b={};a.gb().forEach(function(a){b[a.getName()]=null});return b}
function yg(a,b,c){null===a.Yd&&(a.Yd=xg(a.ka.G()));var d=new yd(new y(-1,a.Yd),!1);return Bd(b,c,d,[J(a.ka.G())])}
function zg(a,b,c,d){var e=[b,c];d||(e=wg(a,b,c));b=e[0];c=e[1];var e=b,f=c,h=a.ga,k=a.ka;d&&(e=c,f=b,h=a.ka,k=a.ga);var n=new Lc,z=[];e.entries.forEach(function(a){var b=String(I(a,h));n.set(b,a)});var O=H(e),ca=H(f);f.entries.forEach(function(a){var b=I(a,k),c=String(b);null!==b&&n.has(c)?n.get(c).forEach(function(b){b=Bd(a,ca,b,O);z.push(b)}):d&&z.push(yg(this,a,ca))}.bind(a));a=H(b).concat(H(c));return new G(z,a)}
function Ag(a,b,c,d,e){function f(a,b){var c=new yd(b,1<O.length),c=Bd(a,ca,c,O);z.push(c)}var h=d.Uf.G(),k=b,n=c;-1!=H(b).indexOf(J(h))&&(k=c,n=b);var z=[],O=H(n),ca=H(k);k.entries.forEach(function(a){var b=this.cg(I(a,d.ig)),b=d.index.get(b);0!=b.length&&(d.index.Ia()?f(a,e.get(b[0])):ef(e,b).forEach(f.bind(null,a)))},a);a=H(k).concat(H(n));return new G(z,a)};function Bg(a,b,c){return null===b?new Ud(a,b,c):q(b.m)?new vg(a,b,c):new Ud(a,b,c)};var Cg={};r("lf.schema.DataStoreType",Cg);Cg.INDEXED_DB=0;Cg.MEMORY=1;Cg.LOCAL_STORAGE=2;Cg.FIREBASE=3;Cg.WEB_SQL=4;Cg.OBSERVABLE_STORE=5;function Dg(a,b,c,d){this.Nc=a;this.name=b;this.Ec=c;this.f=d}Dg.prototype.m=function(){return this.Nc+"."+this.name};function gg(a){return a.f.some(function(a){return a.aa.ic()})}function R(a,b,c,d){this.u=a;this.pa=c;this.J=b;this.od=d;this.bb=null}r("lf.schema.Table",R);R.prototype.getName=g("u");R.prototype.getName=R.prototype.getName;R.prototype.Wa=g("bb");
function J(a){return a.bb||a.u}R.prototype.qc=function(a){var b=new this.constructor(this.u);b.bb=a;b.ug=this.ug;return b};R.prototype.as=R.prototype.qc;R.prototype.createRow=R.prototype.tb;R.prototype.deserializeRow=R.prototype.Bb;R.prototype.Aa=g("pa");R.prototype.getIndices=R.prototype.Aa;R.prototype.gb=g("J");R.prototype.getColumns=R.prototype.gb;R.prototype.getConstraint=R.prototype.Cb;R.prototype.zb=g("od");R.prototype.persistentIndex=R.prototype.zb;function Oe(a){return a.u+".#"};function S(a,b){this.child=a;this.Ib=b;this.bb=null}m=S.prototype;m.getName=function(){return this.Ib+"("+this.child.getName()+")"};m.m=function(){return this.Ib+"("+this.child.m()+")"};m.G=function(){return this.child.G()};m.toString=function(){return this.m()};m.H=function(){return this.child.H()};m.Wa=g("bb");m.Aa=function(){return[]};m.za=l(null);m.ic=l(!1);m.qc=function(a){this.bb=a;return this};S.prototype.as=S.prototype.qc;
function Eg(a){for(var b=[a];a instanceof S;)b.push(a.child),a=a.child;return b}function Fg(a){this.bb=a||null;this.S=new R("#UnknownTable",[],[],!1)}m=Fg.prototype;m.getName=l("*");m.m=function(){return this.getName()};m.toString=function(){return this.m()};m.G=g("S");m.H=l(4);m.Wa=g("bb");m.Aa=function(){return[]};m.za=l(null);m.ic=l(!1);r("lf.fn.avg",function(a){return new S(a,"AVG")});function Gg(a){return new S(a||new Fg,"COUNT")}r("lf.fn.count",Gg);function Hg(a){return new S(a,"DISTINCT")}r("lf.fn.distinct",Hg);r("lf.fn.max",function(a){return new S(a,"MAX")});r("lf.fn.min",function(a){return new S(a,"MIN")});r("lf.fn.stddev",function(a){return new S(a,"STDDEV")});r("lf.fn.sum",function(a){return new S(a,"SUM")});r("lf.fn.geomean",function(a){return new S(a,"GEOMEAN")});function T(a,b){K.call(this);this.Mf=b}t(T,K);T.prototype.exec=function(a,b){switch(this.Mf){case 1:return Ig(this,a,b);case 0:return Jg(this,a,b);default:return Kg(this,a,b)}};T.prototype.toString=l("dummy_node");T.prototype.Oc=function(){return this.toString()};function Kg(a,b,c){return new v(function(a){a(this.ea([],b,c))}.bind(a))}function Ig(a,b,c){return Md(a,0).exec(b,c).then(function(a){return this.ea(a,b,c)}.bind(a))}
function Jg(a,b,c){var d=L(a).map(function(a){return a.exec(b,c)});return fb(d).then(function(a){var d=[];a.forEach(function(a){for(var b=0;b<a.length;++b)d.push(a[b])});return this.ea(d,b,c)}.bind(a))};function Lg(a){T.call(this,0,1);this.we=a}t(Lg,T);Lg.prototype.toString=function(){return"aggregation("+this.we.map(function(a){return a.m()}).toString()+")"};Lg.prototype.ea=function(a){a.forEach(function(a){Mg(new Ng(a,this.we))},this);return a};function Ng(a,b){this.Ja=a;this.J=b}
function Mg(a){a.J.forEach(function(a){a=Eg(a).reverse();for(var c=1;c<a.length;c++){var d=a[c],e=Eg(d).slice(-1)[0],f=d.child instanceof S?sd(this.Ja,d.child):this.Ja;if(null!==f.Va&&f.Va.has(d.m()))break;f=Og(d.Ib,f,e);e=this.Ja;null===e.Va&&(e.Va=A());e.Va.set(d.m(),f)}},a)}
function Og(a,b,c){var d=null;switch(a){case "MIN":d=Pg(b,c,function(a,b){return b<a?b:a});break;case "MAX":d=Pg(b,c,function(a,b){return b>a?b:a});break;case "DISTINCT":d=Qg(b,c);break;case "COUNT":d=Rg(b,c);break;case "SUM":d=Sg(b,c);break;case "AVG":a=Rg(b,c);0<a&&(d=Sg(b,c)/a);break;case "GEOMEAN":d=Tg(b,c);break;default:d=Ug(b,c)}return d}function Pg(a,b,c){return a.entries.reduce(function(a,e){var f=I(e,b);return null===f?a:null===a?f:c(a,f)},null)}
function Rg(a,b){return b instanceof Fg?a.entries.length:a.entries.reduce(function(a,d){return a+(fa(I(d,b))?0:1)},0)}function Sg(a,b){return Pg(a,b,function(a,b){return b+a})}function Ug(a,b){var c=[];a.entries.forEach(function(a){a=I(a,b);null===a||c.push(a)});return 0==c.length?null:Cb.apply(null,c)}function Tg(a,b){var c=0,d=a.entries.reduce(function(a,d){var h=I(d,b);if(0==h||null===h)return a;c++;return a+Math.log(h)},0);return 0==c?null:Math.pow(Math.E,d/c)}
function Qg(a,b){var c=A();a.entries.forEach(function(a){var e=I(a,b);c.set(e,a)});return new G(B(c),H(a))};function Vg(a,b){this.Da=a;this.$=b}Vg.prototype.hb=g("Da");Vg.prototype.ca=g("$");function Wg(){K.call(this)}t(Wg,K);function Xg(a,b){K.call(this);this.table=a;this.values=b}t(Xg,Wg);function Yg(a,b){Xg.call(this,a,b)}t(Yg,Xg);function Zg(a){K.call(this);this.table=a}t(Zg,Wg);Zg.prototype.toString=function(){return"delete("+this.table.getName()+")"};function $g(a,b){K.call(this);this.table=a;this.qe=b}t($g,Wg);
$g.prototype.toString=function(){var a=[];this.qe&&(a=this.qe.map(function(a){return a.N.getName()},this));return"update("+this.table.getName()+", ["+a.join(",")+"])"};function ah(a){K.call(this);this.I=a}t(ah,Wg);ah.prototype.toString=function(){return"select("+this.I.toString()+")"};function bh(a){K.call(this);this.table=a}t(bh,Wg);bh.prototype.toString=function(){var a="table_access("+this.table.getName();null===this.table.Wa()||(a+=" as "+this.table.Wa());return a+")"};
function ch(){K.call(this)}t(ch,Wg);ch.prototype.toString=l("cross_product");function dh(a,b){K.call(this);this.f=a;this.Mb=b}t(dh,Wg);dh.prototype.toString=function(){var a="project("+this.f.toString();if(null!==this.Mb)var b=this.Mb.map(function(a){return a.m()}).join(", "),a=a+(", groupBy("+b+")");return a+")"};function eh(a){K.call(this);this.M=a}t(eh,Wg);eh.prototype.toString=function(){return"order_by("+ce(this.M)+")"};function fh(a){K.call(this);this.f=a}t(fh,Wg);
fh.prototype.toString=function(){return"aggregation("+this.f.toString()+")"};function gh(a){K.call(this);this.f=a}t(gh,Wg);gh.prototype.toString=function(){return"group_by("+this.f.toString()+")"};function hh(a){K.call(this);this.V=a}t(hh,Wg);hh.prototype.toString=function(){return"limit("+this.V+")"};function ih(a){K.call(this);this.K=a}t(ih,Wg);ih.prototype.toString=function(){return"skip("+this.K+")"};function jh(a,b){K.call(this);this.I=a;this.Pb=b}t(jh,Wg);
jh.prototype.toString=function(){return"join(type: "+(this.Pb?"outer":"inner")+", "+this.I.toString()+")"};function kh(){};function lh(){}t(lh,kh);lh.prototype.nb=function(a){this.Z=a;this.Ta(this.Z);return this.Z};lh.prototype.Ta=function(a){if(a instanceof ah){var b=mh(this,a.I),b=nh(this,b);rg(a,a,b[0],b[1]);a==this.Z&&(this.Z=b[0]);a=b[0]}L(a).forEach(function(a){this.Ta(a)},this)};function mh(a,b){if(0==L(b).length||"and"!=b.Rb)return[b];var c=L(b).slice().map(function(a){b.removeChild(a);return mh(this,a)},a);return Ga(c)}
function nh(a,b){var c=null,d=null;b.map(function(a,b){var h=new ah(a);0==b?c=h:Od(d,h);d=h},a);return[c,d]};function oh(){}t(oh,kh);oh.prototype.nb=function(a,b){if(3>b.c.length)return a;this.Z=a;this.Ta(this.Z);return this.Z};oh.prototype.Ta=function(a){if(a instanceof ch)for(;2<L(a).length;){for(var b=new ch,c=0;2>c;c++){var d=Pd(a,0);Od(b,d)}Nd(a,b,0)}L(a).forEach(function(a){this.Ta(a)},this)};function ph(){T.call(this,0,0)}t(ph,T);ph.prototype.toString=l("cross_product");ph.prototype.ea=function(a){var b=a[0],c=a[1];a=[];for(var d=H(b),e=H(c),f=0;f<b.entries.length;f++)for(var h=0;h<c.entries.length;h++){var k=Bd(b.entries[f],d,c.entries[h],e);a.push(k)}b=H(b).concat(H(c));return[new G(a,b)]};function qh(a,b){fe.call(this,a,b);this.Ea=a.j(mc);this.Gb=a.j(nc)}t(qh,fe);qh.prototype.getPriority=l(2);qh.prototype.ae=function(a){0==this.H()?rh(this,a):this.Lc()};function rh(a,b){a.qd.forEach(function(a,d){a instanceof be&&le(this.Gb,a,b[d])},a)}qh.prototype.Lc=function(){var a=ne(this.Gb,this.ca());0!=a.length&&(a=new ke(this.global,a),oe(this.Ea,a))};function sh(a){Xd.call(this,a)}t(sh,Xd);sh.prototype.ca=function(){var a=C();a.add(this.c);th(this,this.c.getName(),a);return a};function th(a,b,c){var d=uh(a.aa.info(),b,1);uh(a.aa.info(),b).forEach(c.add.bind(c));d.forEach(function(a){th(this,a.getName(),c)},a)}sh.prototype.clone=function(){var a=new sh(this.aa);$d(a,this);a.c=this.c;return a};sh.prototype.bind=function(a){sh.ab.bind.call(this,a);ae(this,a);return this};function vh(a){Xd.call(this,a)}t(vh,Xd);vh.prototype.ca=function(){var a=C();a.add(this.Ha);var b=this.aa.info();wh(this.Ha.getName(),b.Ye).forEach(a.add.bind(a));this.$b&&uh(b,this.Ha.getName()).forEach(a.add.bind(a));return a};vh.prototype.clone=function(){var a=new vh(this.aa);$d(a,this);a.Ha=this.Ha;this.values&&(a.values=this.values instanceof Cd?this.values:this.values.slice());a.$b=this.$b;a.ac=this.ac;return a};
vh.prototype.bind=function(a){vh.ab.bind.call(this,a);this.ac&&(this.values=this.ac instanceof Cd?a[this.ac.za()]:this.ac.map(function(b){return b instanceof Cd?a[b.za()]:b}));return this};function xh(a){Xd.call(this,a)}t(xh,Xd);xh.prototype.ca=function(){var a=C();a.add(this.table);var b=this.set.map(function(a){return a.N.m()}),c=this.aa.info();yh(c,b).forEach(a.add.bind(a));zh(c,b).forEach(a.add.bind(a));return a};xh.prototype.clone=function(){var a=new xh(this.aa);$d(a,this);a.table=this.table;a.set=this.set?this.set.slice():this.set;return a};xh.prototype.bind=function(a){xh.ab.bind.call(this,a);this.set.forEach(function(b){-1!=b.Tc&&(b.value=a[b.Tc])});ae(this,a);return this};function Ah(a,b){if(null==b)return"NULL";switch(a){case 1:return b?1:0;case 3:case 4:return b;case 0:return"'"+ub(b)+"'";default:return"'"+b.toString()+"'"}}function Bh(a,b){var c=a.$b?"INSERT OR REPLACE":"INSERT",d=a.Ha.gb(),c=c+(" INTO "+a.Ha.getName()+"("),c=c+d.map(function(a){return a.getName()}).join(", "),c=c+") VALUES (";return a.values.map(function(a){var f=d.map(function(c){var d=a.o[c.getName()];return b?null!=d?"#":"NULL":Ah(c.H(),d)});return c+f.join(", ")+");"}).join("\n")}
function Ch(a){switch(a){case "between":return"BETWEEN";case "eq":return"=";case "gte":return">=";case "gt":return">";case "in":return"IN";case "lte":return"<=";case "lt":return"<";case "match":return"LIKE";case "neq":return"<>";default:return"UNKNOWN"}}function Dh(a,b,c,d){return a instanceof Cd?"?"+a.za().toString():d?null!=a?"#":"NULL":"match"==b?"'"+a.toString()+"'":"in"==b?"("+a.map(function(a){return Ah(c,a)}).join(", ")+")":"between"==b?Ah(c,a[0])+" AND "+Ah(c,a[1]):Ah(c,a).toString()}
function Eh(a,b){return L(a).map(function(a){return"("+Fh(a,b)+")"}).join("and"==a.Rb?" AND ":" OR ")}function Gh(a){return[a.ga.m(),Ch(a.F),a.ka.m()].join(" ")}function Fh(a,b){if(a instanceof Ud){var c=a.N.m(),d=Ch(a.F),e=Dh(a.value,a.F,a.N.H(),b);return"="==d&&"NULL"==e?[c,"IS NULL"].join(" "):"<>"==d&&"NULL"==e?[c,"IS NOT NULL"].join(" "):[c,d,e].join(" ")}if(a instanceof tg)return Eh(a,b);if(a instanceof vg)return Gh(a);throw new E(357,typeof a);}
function Hh(a,b){var c=Fh(a,b);return c?" WHERE "+c:""}function Ih(a,b){var c="UPDATE "+a.table.getName()+" SET ",c=c+a.set.map(function(a){var b=a.N.m()+" = ";return-1!=a.Tc?b+"?"+a.Tc.toString():b+Ah(a.N.H(),a.value).toString()}).join(", ");a.s&&(c+=Hh(a.s,b));return c+";"}
function Jh(a,b){var c="*";a.f.length&&(c=a.f.map(function(a){return a.Wa()?a.m()+" AS "+a.Wa():a.m()}).join(", "));c="SELECT "+c+" FROM ";null!=a.yb&&0!=a.yb.size?c+=Kh(a,b):(c+=a.c.map(Lh).join(", "),a.s&&(c+=Hh(a.s,b)));if(a.M)var d=a.M.map(function(a){return a.N.m()+(0==a.kb?" DESC":" ASC")}).join(", "),c=c+(" ORDER BY "+d);a.ja&&(d=a.ja.map(function(a){return a.m()}).join(", "),c+=" GROUP BY "+d);a.V&&(c+=" LIMIT "+a.V.toString());a.K&&(c+=" SKIP "+a.K.toString());return c+";"}
function Lh(a){return J(a)!=a.getName()?a.getName()+" AS "+J(a):a.getName()}function Kh(a,b){for(var c=mg(a.s,function(a){return a instanceof vg}),d=c.map(Gh),e=Lh(a.c[0]),f=1;f<a.c.length;f++)var h=Lh(a.c[f]),e=a.yb.has(c[d.length-f].W())?e+(" LEFT OUTER JOIN "+h):e+(" INNER JOIN "+h),e=e+(" ON ("+d[d.length-f]+")");c=Md(a.s,0);c instanceof vg||(e+=" WHERE "+Fh(c,b));return e}
function Mh(a,b){var c=b||!1,d=a.a.clone();if(d instanceof vh)return Bh(d,c);if(d instanceof sh){var e="DELETE FROM "+d.c.getName();d.s&&(e+=Hh(d.s,c));return e+";"}if(d instanceof xh)return Ih(d,c);if(d instanceof be)return Jh(d,c);throw new E(358,typeof d);};function U(a,b){this.global=a;this.tg=a.j(lc);this.Ea=a.j(mc);this.a=b}r("lf.query.BaseBuilder",U);U.prototype.exec=function(){try{this.cb()}catch(a){return cb(a)}return new v(function(a,b){var c=new qh(this.global,[this.Cc()]);oe(this.Ea,c).then(function(b){a(qd(b[0]))},b)},this)};U.prototype.exec=U.prototype.exec;U.prototype.Of=function(){var a=function(a){return a.Oc(this.a)+"\n"}.bind(this);return sg(Nh(this).hb(),a)};U.prototype.explain=U.prototype.Of;
U.prototype.bind=function(a){this.a.bind(a);return this};U.prototype.bind=U.prototype.bind;U.prototype.Bg=function(a){return Mh(this,a)};U.prototype.toSql=U.prototype.Bg;U.prototype.cb=aa();function Nh(a){if(null==a.Ze){var b;b=a.tg;var c=a.a,d=b.fg.create(c);b=b.qg.create(d,c);a.Ze=b}return a.Ze}U.prototype.Cc=function(){return{context:this.a.clone(),de:Nh(this)}};function Oh(a){U.call(this,a,new sh(a.j(oc)))}t(Oh,U);r("lf.query.DeleteBuilder",Oh);Oh.prototype.c=function(a){if(null!=this.a.c)throw new E(515);this.a.c=a;return this};Oh.prototype.from=Oh.prototype.c;Oh.prototype.s=function(a){this.Ad();this.a.s=a;return this};Oh.prototype.where=Oh.prototype.s;Oh.prototype.Ad=function(){if(null==this.a.c)throw new E(548);if(null!=this.a.s)throw new E(516);};Oh.prototype.cb=function(){Oh.ab.cb.call(this);if(null==this.a.c)throw new E(517);};function Ph(a,b){U.call(this,a,new vh(a.j(oc)));this.a.$b=b||!1}t(Ph,U);r("lf.query.InsertBuilder",Ph);Ph.prototype.cb=function(){Ph.ab.cb.call(this);var a=this.a;if(null==a.Ha||null==a.values)throw new E(518);if(a.$b&&null===a.Ha.Cb().dd())throw new E(519);};Ph.prototype.Ha=function(a){if(null!=this.a.Ha)throw new E(520);this.a.Ha=a;return this};Ph.prototype.into=Ph.prototype.Ha;
Ph.prototype.values=function(a){if(null!=this.a.values)throw new E(521);a instanceof Cd||a.some(function(a){return a instanceof Cd})?this.a.ac=a:this.a.values=a;return this};Ph.prototype.values=Ph.prototype.values;function Qh(a){return Rh("and",Array.prototype.slice.call(arguments))}r("lf.op.and",Qh);r("lf.op.or",function(a){return Rh("or",Array.prototype.slice.call(arguments))});function Rh(a,b){var c=new tg(a);b.forEach(function(a){Od(c,a)});return c}r("lf.op.not",function(a){a.td(!0);return a});function V(a,b){U.call(this,a,new be(a.j(oc)));this.Ge=this.vd=!1;this.a.f=b;Sh(this);Th(this)}t(V,U);r("lf.query.SelectBuilder",V);V.prototype.cb=function(){V.ab.cb.call(this);var a=this.a;if(null==a.c)throw new E(522);if(q(a.Qb)&&!q(a.V)||q(a.Xb)&&!q(a.K))throw new E(523);null!=this.a.ja?Uh(this):Vh(this)};function Sh(a){var b=a.a.f.filter(function(a){return a instanceof S&&"DISTINCT"==a.Ib},a);if(0!=b.length&&(1!=b.length||1!=a.a.f.length))throw new E(524);}
function Uh(a){var b=a.a.f.filter(function(a){return!(a instanceof S)}).map(function(a){return a.m()}),c=!1;if(0==a.a.ja.length||0==a.a.f.length)c=!0;else{var d=a.a.ja.map(function(a){return a.m()});(c=b.some(function(a){return-1==d.indexOf(a)}))||(c=a.a.ja.some(function(a){a=a.H();return 6==a||0==a}))}if(c)throw new E(525);}function Vh(a){var b=a.a.f.some(function(a){return a instanceof S},a);a=a.a.f.some(function(a){return!(a instanceof S)},a)||0==a.a.f.length;if(b&&a)throw new E(526);}
function Th(a){a.a.f.forEach(function(a){if(a instanceof S&&!Wh(a.Ib,a.H()))throw new E(527,a.m());},a)}function Xh(a,b){if(null==a.a.c)throw new E(b);}V.prototype.c=function(a){if(this.Ge)throw new E(515);this.Ge=!0;null==this.a.c&&(this.a.c=[]);this.a.c.push.apply(this.a.c,Array.prototype.slice.call(arguments));return this};V.prototype.from=V.prototype.c;V.prototype.s=function(a){Xh(this,548);if(this.vd)throw new E(516);this.vd=!0;Yh(this,a);return this};V.prototype.where=V.prototype.s;
function Yh(a,b){if(null!=a.a.s){var c=Qh(b,a.a.s);a.a.s=c}else a.a.s=b}V.prototype.Yf=function(a,b){Xh(this,542);if(this.vd)throw new E(547);this.a.c.push(a);Yh(this,b);return this};V.prototype.innerJoin=V.prototype.Yf;V.prototype.dg=function(a,b){Xh(this,542);if(!(b instanceof vg))throw new E(541);if(this.vd)throw new E(547);this.a.c.push(a);null==this.a.yb&&(this.a.yb=C());var c=b;J(a)!=J(b.ka.G())&&(c=b.reverse());this.a.yb.add(c.W());Yh(this,c);return this};V.prototype.leftOuterJoin=V.prototype.dg;
V.prototype.V=function(a){if(null!=(this.a.V||this.a.Qb))throw new E(528);if(a instanceof Cd)this.a.Qb=a;else{if(0>a)throw new E(531);this.a.V=a}return this};V.prototype.limit=V.prototype.V;V.prototype.K=function(a){if(null!=(this.a.K||this.a.Xb))throw new E(529);if(a instanceof Cd)this.a.Xb=a;else{if(0>a)throw new E(531);this.a.K=a}return this};V.prototype.skip=V.prototype.K;V.prototype.M=function(a,b){Xh(this,549);null==this.a.M&&(this.a.M=[]);this.a.M.push({N:a,kb:null!=b?b:1});return this};
V.prototype.orderBy=V.prototype.M;V.prototype.ja=function(a){Xh(this,549);if(null!=this.a.ja)throw new E(530);null==this.a.ja&&(this.a.ja=[]);this.a.ja.push.apply(this.a.ja,Array.prototype.slice.call(arguments));return this};V.prototype.groupBy=V.prototype.ja;function Wh(a,b){switch(a){case "COUNT":case "DISTINCT":return!0;case "AVG":case "GEOMEAN":case "STDDEV":case "SUM":return 4==b||3==b;case "MAX":case "MIN":return 4==b||3==b||5==b||2==b}return!1}
V.prototype.clone=function(){var a=new V(this.global,this.a.f);a.a=this.a.clone();a.a.Xc=null;return a};V.prototype.clone=V.prototype.clone;function Zh(a,b){U.call(this,a,new xh(a.j(oc)));this.a.table=b}t(Zh,U);r("lf.query.UpdateBuilder",Zh);Zh.prototype.set=function(a,b){var c={Tc:b instanceof Cd?b.za():-1,N:a,value:b};null!=this.a.set?this.a.set.push(c):this.a.set=[c];return this};Zh.prototype.set=Zh.prototype.set;Zh.prototype.s=function(a){this.Ad();this.a.s=a;return this};Zh.prototype.where=Zh.prototype.s;Zh.prototype.Ad=function(){if(null!=this.a.s)throw new E(516);};
Zh.prototype.cb=function(){Zh.ab.cb.call(this);if(null==this.a.set)throw new E(532);if(this.a.set.some(function(a){return a.value instanceof Cd}))throw new E(501);};function $h(a){this.a=a;this.Da=null}$h.prototype.hc=function(){null===this.Da&&(this.Da=this.bd());return this.Da};function ai(a){$h.call(this,a)}t(ai,$h);ai.prototype.bd=function(){return this.a.$b?new Yg(this.a.Ha,this.a.values):new Xg(this.a.Ha,this.a.values)};function bi(a){$h.call(this,a)}t(bi,$h);bi.prototype.bd=function(){var a=new $g(this.a.table,this.a.set),b=null!=this.a.s?new ah(this.a.s.Jb()):null,c=new bh(this.a.table);null===b?Od(a,c):(Od(b,c),Od(a,b));return a};function ci(a,b,c){this.Da=a;this.ee=b;this.Ub=c}ci.prototype.hc=function(){this.Ub.forEach(function(a){this.Da=a.nb(this.Da,this.ee)},this);return this.Da};function di(a,b){$h.call(this,a);this.Ub=b}t(di,$h);di.prototype.bd=function(){var a=new Zg(this.a.c),b=null!=this.a.s?new ah(this.a.s.Jb()):null,c=new bh(this.a.c);null===b?Od(a,c):(Od(b,c),Od(a,b));return(new ci(a,this.a,this.Ub)).hc()};function ei(){}t(ei,kh);ei.prototype.nb=function(a,b){if(2>b.c.length)return a;this.Z=a;this.Ta(this.Z,b);return this.Z};ei.prototype.Ta=function(a,b){if(a instanceof ah&&a.I instanceof vg){var c=a.I.W(),d=Md(a,0);d instanceof ch&&(c=null!=b.yb&&b.yb.has(c),c=new jh(a.I,c),rg(a,d,c,c),a==this.Z&&(this.Z=c),a=c)}L(a).forEach(function(a){this.Ta(a,b)},this)};function fi(){this.Sc=C()}t(fi,kh);fi.prototype.nb=function(a,b){this.Sc.clear();if(!q(b.s))return a;this.Z=a;this.Ta(this.Z);this.Sc.clear();return this.Z};fi.prototype.Ta=function(a){if(gi(a)){var b=a.I instanceof Ud?hi(this,a):ii(this,a);this.Sc.add(a);b==a&&(b=Md(a,0));null!==b&&(fa(b.getParent())&&(this.Z=b),gi(b)&&!this.Sc.has(b)&&this.Ta(b))}else L(a).forEach(function(a){this.Ta(a)},this)};
function ji(a,b,c){var d=b;if(Md(b,0)instanceof ah)d=pg(b),ji(a,b,c);else if(ki(b)){var e=[],d=qg(b,c,function(a){a=new ah(a.I);e.push(a);return a});e.forEach(function(a){ji(this,a,c)},a)}return d}function hi(a,b){var c=C([J(b.I.N.G())]),d=function(a){return li(this,a,c)}.bind(a);return ji(a,b,d)}function ii(a,b){var c=C([J(b.I.ga.G()),J(b.I.ka.G())]),d=function(a){return li(this,a,c)}.bind(a);return ji(a,b,d)}
function li(a,b,c){var d=C();lg(b).forEach(function(a){d.add(J(a.table))},a);b instanceof bh&&d.add(J(b.table));return pc(d,c)}function gi(a){return a instanceof ah&&!(a.I instanceof tg)}function ki(a){a=Md(a,0);return a instanceof ch||a instanceof jh};function mi(a,b){$h.call(this,a);this.Ub=b;this.cf=this.Ue=this.lf=this.Xe=this.xe=this.Je=this.kf=this.De=this.nf=null}t(mi,$h);
mi.prototype.bd=function(){ni(this);2<=this.a.c.length&&(this.De=new ch);this.kf=null!=this.a.s?new ah(this.a.s.Jb()):null;this.a.M&&(this.Xe=new eh(this.a.M));null!=this.a.K&&0<this.a.K&&(this.lf=new ih(this.a.K));null!=this.a.V&&(this.Ue=new hh(this.a.V));null!=this.a.ja&&(this.Je=new gh(this.a.ja));oi(this);this.cf=new dh(this.a.f||[],this.a.ja||null);var a=pi(this);return(new ci(a,this.a,this.Ub)).hc()};
function pi(a){for(var b=[a.Ue,a.lf,a.cf,a.Xe,a.xe,a.Je,a.kf,a.De],c=null,d=null,e=0;e<b.length;e++){var f=b[e];null!==f&&(null===d?d=f:Od(b[c],f),c=e)}a.nf.forEach(function(a){Od(b[c],a)});return d}function ni(a){a.nf=a.a.c.map(function(a){return new bh(a)},a)}function oi(a){var b=a.a.f.filter(function(a){return a instanceof S});null!=a.a.M&&a.a.M.forEach(function(a){a.N instanceof S&&b.push(a.N)});0<b.length&&(a.xe=new fh(b))};function qi(){this.ke=[new lh,new oh,new fi,new ei];this.Id=[new lh]}qi.prototype.create=function(a){var b=null;if(a instanceof vh)b=new ai(a);else if(a instanceof sh)b=new di(a,this.Id);else if(a instanceof be)b=new mi(a,this.ke);else if(a instanceof xh)b=new bi(a);else throw new E(513);b=b.hc();return new Vg(b,a.ca())};function ri(a){T.call(this,0,1);this.S=a}t(ri,T);ri.prototype.toString=function(){return"delete("+this.S.getName()+")"};ri.prototype.ea=function(a,b){var c=a[0].entries.map(function(a){return a.ta});b.remove(this.S,c);return[ud()]};function si(a,b){T.call(this,0,-1);this.table=b;this.D=a.j(kc)}t(si,T);si.prototype.toString=function(){return"get_row_count("+this.table.getName()+")"};si.prototype.ea=function(){var a=this.D.get(Oe(this.table)),b=new G([],[this.table.getName()]),c=Gg(),a=a.Ma().na;null===b.Va&&(b.Va=A());b.Va.set(c.m(),a);return[b]};function ti(a,b){T.call(this,0,-1);this.U=a.j(jc);this.D=a.j(kc);this.table=b}t(ti,T);ti.prototype.toString=function(){var a="table_access("+this.table.getName();null===this.table.Wa()||(a+=" as "+this.table.Wa());return a+")"};ti.prototype.ea=function(){var a=this.D.get(Oe(this.table)).Xa();return[xd(ef(this.U,a),[J(this.table)])]};function ui(a){this.h=a}t(ui,kh);ui.prototype.nb=function(a,b){this.Z=a;if(!this.Bd(b))return a;var c=mg(a,function(a){return a instanceof ti})[0],d=new si(this.h,c.table);rg(c,c,d,d);return this.Z};ui.prototype.Bd=function(a){return 1==a.f.length&&1==a.c.length&&null==a.s&&null==a.V&&null==a.K&&null==a.ja?(a=a.f[0],a instanceof S&&"COUNT"==a.Ib&&a.child instanceof Fg):!1};function vi(a){T.call(this,0,1);this.Ie=a}t(vi,T);vi.prototype.toString=function(){return"groupBy("+this.Ie.map(function(a){return a.m()}).toString()+")"};vi.prototype.ea=function(a){return wi(this,a[0])};function wi(a,b){var c=new Lc,d=function(a){return this.Ie.map(function(b){return I(a,b)},this).join(",")}.bind(a);b.entries.forEach(function(a){c.set(d(a),a)},a);return c.keys().map(function(a){return new G(c.get(a),H(b))},a)};function xi(a,b,c){T.call(this,0,0);this.D=a.j(kc);this.U=a.j(jc);this.I=b;this.Pb=c;this.yd="eq"==this.I.F?0:2;this.Ke=null}t(xi,T);var yi=["hash","index_nested_loop","nested_loop"];xi.prototype.toString=function(){return"join(type: "+(this.Pb?"outer":"inner")+", impl: "+yi[this.yd]+", "+this.I.toString()+")"};
xi.prototype.ea=function(a){switch(this.yd){case 0:return[zg(this.I,a[0],a[1],this.Pb)];case 1:return[Ag(this.I,a[0],a[1],this.Ke,this.U)];default:var b=this.I,c=a[0];a=a[1];var d=this.Pb,e=[c,a];d||(e=wg(b,c,a));c=e[0];a=e[1];for(var e=[],f=H(c),h=H(a),k=c.entries.length,n=a.entries.length,z=n+256-1>>8,O=0;O<z;){for(var ca=0;ca<k;ca++){var zb=!1,Tf=I(c.entries[ca],b.ga);if(null!==Tf)for(var Qc=Math.min(O+1<<8,n),Za=O<<8;Za<Qc;Za++)if(b.vc(Tf,I(a.entries[Za],b.ka))){var zb=!0,he=Bd(c.entries[ca],
f,a.entries[Za],h);e.push(he)}d&&!zb&&e.push(yg(b,c.entries[ca],f))}O++}b=H(c).concat(H(a));return[new G(e,b)]}};function zi(a,b){a.yd=1;var c=a.D.get(b.za().m());a.Ke={Uf:b,ig:b==a.I.ga?a.I.ka:a.I.ga,index:c}};function Ai(a){T.call(this,0,-1);this.df=a}t(Ai,T);Ai.prototype.toString=function(){return"no_op_step("+H(this.df[0]).join(",")+")"};Ai.prototype.ea=g("df");function Bi(){}t(Bi,kh);Bi.prototype.nb=function(a,b){this.Z=a;if(!this.Bd(b))return a;mg(a,function(a){return a instanceof xi}).forEach(this.sg,this);return this.Z};Bi.prototype.Bd=function(a){return 1<a.c.length};
Bi.prototype.sg=function(a){if("eq"==a.I.F&&!a.Pb){var b=function(b){if(!(b instanceof ti))return null;b=J(b.table)==J(a.I.ka.G())?a.I.ka:a.I.ga;return fa(b.za())?null:b},c=b(Md(a,0)),b=b(Md(a,1));if(null!==c||null!==b){b=null===b?c:b;zi(a,b);var d=new G([],[J(b.G())]);Qd(a,new Ai([d]),b==c?0:1)}}};function Ci(a){a=a.map(function(a){return a.Db()});a=Hb.apply(null,a);var b=[];Gb(a,function(a){b.push(a)});return b}function Di(a){this.Nb=a}Di.prototype.cd=function(){return 1==this.Nb.f.length?[nd()]:[this.Nb.f.map(function(){return nd()})]};function Ei(a,b){this.Nb=a;this.Ca=b;this.Fd=this.Se=null}
function Fi(a,b){var c=A();a.Ca.keys().forEach(function(a){var e=this.Ca.get(a).map(function(a){return Yd(b,a)},this),f=new ig([nd()]);e.forEach(function(a){var b=null;"between"==a.F?b=new id(a.value[0],a.value[1],!1,!1):"eq"==a.F?(b=a.value,b=new id(b,b,!1,!1)):b="gte"==a.F?new id(a.value,F,!1,!1):"gt"==a.F?new id(a.value,F,!0,!1):"lte"==a.F?new id(F,a.value,!1,!1):new id(F,a.value,!1,!0);a=a.Ya?jd(b):[b];a=new ig(a);f=jg(f,a)});c.set(a,f)},a);return c}
Ei.prototype.cd=function(a){if(this.Se==a)return this.Fd;for(var b=Fi(this,a),c=this.Nb.f.length-1;0<=c;c--){var d=this.Nb.f[c];if(null!==(b.get(d.aa.getName())||null))break;b.set(d.aa.getName(),new ig([nd()]))}this.Fd=1==this.Nb.f.length?B(b)[0].Db():Ci(Gi(this,b));this.Se=a;return this.Fd};function Gi(a,b){var c=A(),d=0;a.Nb.f.forEach(function(a){c.set(a.aa.getName(),d);d++});return Zb(b).sort(function(a,b){return c.get(a)-c.get(b)}).map(function(a){return b.get(a)})};function Hi(a,b){this.of=b;this.D=a.j(kc)}function Ii(a,b,c){c=c.filter(a.Zf,a);if(0==c.length)return null;a=Ji(a,c);if(0==a.length)return null;if(1==a.length)return a[0];var d=Number.MAX_VALUE;return a.reduce(function(a,c){var h=Ki(c,b);return h<d?(d=h,c):a},null)}
function Ji(a,b){return a.of.Aa().map(function(a){a=new Li(this.D,a);Mi(a,b);return a},a).filter(function(a){if(null===a.Ca)a=!1;else{for(var b=!1,e=!0,f=0;f<a.wb.f.length;f++){var h=a.Ca.has(a.wb.f[f].aa.getName());if(b&&h){e=!1;break}h||(b=!0)}a=e}return a})}Hi.prototype.Zf=function(a){var b;if(b=a instanceof Ud)Vd(a),b=null!==a.value&&("between"==a.F||"eq"==a.F||"gt"==a.F||"gte"==a.F||"lt"==a.F||"lte"==a.F);return b?a.N.G()==this.of:!1};
function Li(a,b){this.D=a;this.wb=b;this.Vf=C(this.wb.f.map(function(a){return a.aa.getName()}));this.Ud=this.Ca=null}function Ni(a){null===a.Ud&&(a.Ud=new Ei(a.wb,a.Ca));return a.Ud}function Mi(a,b){b.forEach(function(a){var b=a.gb()[0].getName();this.Vf.has(b)&&(null===this.Ca&&(this.Ca=new Lc),this.Ca.set(b,a.W()))},a)}function Ki(a,b){var c=Ni(a).cd(b),d=a.D.get(a.wb.m());return c.reduce(function(a,b){return a+d.$c(b)},0)};function Oi(a,b,c,d){T.call(this,0,-1);this.D=a.j(kc);this.index=b;this.Re=c;this.ie=d;this.Rc=this.Qc=!1}t(Oi,T);Oi.prototype.toString=function(){return"index_range_scan("+this.index.m()+", ?, "+(this.ie?"reverse":"natural")+(this.Qc?", limit:?":"")+(this.Rc?", skip:?":"")+")"};Oi.prototype.Oc=function(a){var b=this.toString(),c=this.Re.cd(a),b=b.replace("?",c.toString());this.Qc&&(b=b.replace("?",a.V.toString()));this.Rc&&(b=b.replace("?",a.K.toString()));return b};
Oi.prototype.ea=function(a,b,c){a=this.Re.cd(c);b=this.D.get(this.index.m());c=(1==a.length&&a[0]instanceof id&&od(a[0])?jf(b.get(a[0].c),!1,this.Qc?c.V:void 0,this.Rc?c.K:void 0):b.Xa(a,this.ie,this.Qc?c.V:void 0,this.Rc?c.K:void 0)).map(function(a){return new y(a,{})},this);return[xd(c,[this.index.Nc])]};function Pi(a){T.call(this,0,1);this.pd=a}t(Pi,T);Pi.prototype.toString=l("select(?)");Pi.prototype.Oc=function(a){a=Yd(a,this.pd);return this.toString().replace("?",a.toString())};Pi.prototype.ea=function(a,b,c){return[Yd(c,this.pd).eval(a[0])]};function Qi(a,b){T.call(this,0,1);this.U=a.j(jc);this.S=b}t(Qi,T);Qi.prototype.toString=function(){return"table_access_by_row_id("+this.S.getName()+")"};Qi.prototype.ea=function(a){return[xd(ef(this.U,rd(a[0])),[J(this.S)])]};function Ri(a){this.h=a}t(Ri,kh);Ri.prototype.nb=function(a,b){this.Z=a;mg(a,function(a){return a instanceof ti}).forEach(function(a){var d=Si(a);if(0!=d.length){var e=Ii(new Hi(this.h,a.table),b,d.map(function(a){return Yd(b,a.pd)}));if(null!==e){var f=A();d.forEach(function(a){f.set(a.pd,a)},this);this.Z=Ti(this,e,f,a)}}},this);return this.Z};function Si(a){var b=[];for(a=a.getParent();a;)a instanceof Pi&&b.push(a),a=a.getParent();return b}
function Ti(a,b,c,d){(null===b.Ca?[]:b.Ca.values()).map(function(a){return c.get(a)}).forEach(ng);b=new Oi(a.h,b.wb,Ni(b),!1);a=new Qi(a.h,d.table);Od(a,b);rg(d,d,a,b);return b.hb()};function Ui(a,b){T.call(this,0,-1);this.D=a.j(kc);this.S=b}t(Ui,T);Ui.prototype.toString=function(){return"insert("+this.S.getName()+")"};Ui.prototype.ea=function(a,b,c){Vi(this.S,c.values,this.D);b.xb(this.S,c.values);return[xd(c.values,[this.S.getName()])]};function Vi(a,b,c){a=a.Cb().dd();if(null===a?0:a.f[0].autoIncrement){var d=a.f[0].aa.getName();c=c.get(a.m()).max();var e=null===c?0:c[0];b.forEach(function(a){if(0==a.o[d]||null==a.o[d])e++,a.o[d]=e})}}
function Wi(a,b){T.call(this,0,-1);this.D=a.j(kc);this.S=b}t(Wi,T);Wi.prototype.toString=function(){return"insert_replace("+this.S.getName()+")"};Wi.prototype.ea=function(a,b,c){Vi(this.S,c.values,this.D);b.Qd(this.S,c.values);return[xd(c.values,[this.S.getName()])]};function Xi(){T.call(this,0,1)}t(Xi,T);Xi.prototype.toString=l("limit(?)");Xi.prototype.Oc=function(a){return this.toString().replace("?",a.V.toString())};Xi.prototype.ea=function(a,b,c){a[0].entries.splice(c.V);return a};function Yi(a){T.call(this,0,1);this.M=a}t(Yi,T);m=Yi.prototype;m.toString=function(){return"order_by("+ce(this.M)+")"};m.ea=function(a){if(1==a.length){var b;b=a[0];for(var c=null,d=0;d<this.M.length;d++){var e=Hg(this.M[d].N);if(null!==b.Va&&b.Va.has(e.m())){c=e;break}}b=c;(null===b?a[0]:sd(a[0],b)).entries.sort(this.Lf.bind(this))}else a.sort(this.vg.bind(this));return a};
m.O=function(a,b){var c=null,d=null,e=null,f=-1;do f++,e=this.M[f].N,c=this.M[f].kb,d=a(e),e=b(e);while(d==e&&f+1<this.M.length);d=d<e?-1:d>e?1:0;return 1==c?d:-d};m.vg=function(a,b){return this.O(function(b){return b instanceof S?sd(a,b):I(a.entries[a.entries.length-1],b)},function(a){return a instanceof S?sd(b,a):I(b.entries[b.entries.length-1],a)})};m.Lf=function(a,b){return this.O(function(b){return I(a,b)},function(a){return I(b,a)})};function Zi(a,b){this.Ja=a;this.J=b}function $i(a){return a.J.some(function(a){return a instanceof S},a)?aj(a):bj(a)}function aj(a){if(1==a.J.length&&"DISTINCT"==a.J[0].Ib)return a=sd(a.Ja,a.J[0]).entries.map(function(a){var b=new yd(new y(-1,{}),1<this.Ja.L.size);Ad(b,this.J[0],I(a,this.J[0].child));return b},a),new G(a,[]);var b=new yd(new y(-1,{}),1<a.Ja.L.size);a.J.forEach(function(a){var d=a instanceof S?sd(this.Ja,a):I(this.Ja.entries[0],a);Ad(b,a,d)},a);return new G([b],H(a.Ja))}
function bj(a){var b=Array(a.Ja.entries.length),c=1<a.Ja.L.size;a.Ja.entries.forEach(function(a,e){b[e]=new yd(new y(a.ta.id(),{}),c);this.J.forEach(function(c){Ad(b[e],c,I(a,c))},this)},a);return new G(b,H(a.Ja))}function cj(a,b){var c=a.map(function(a){return $i(new Zi(a,b)).entries[0]});return new G(c,H(a[0]))};function dj(a,b){T.call(this,0,1);this.f=a;this.Mb=b}t(dj,T);dj.prototype.toString=function(){var a="project("+this.f.toString();if(null!==this.Mb)var b=this.Mb.map(function(a){return a.m()}).join(", "),a=a+(", groupBy("+b+")");return a+")"};dj.prototype.ea=function(a){0==a.length?a=[ud()]:1==a.length?(a=a[0],a=[0==this.f.length?a:$i(new Zi(a,this.f))]):a=[cj(a,this.f)];return a};function ej(a){return a.f.some(function(a){return a instanceof S})||null!==a.Mb};function fj(){T.call(this,0,1)}t(fj,T);fj.prototype.toString=l("skip(?)");fj.prototype.Oc=function(a){return this.toString().replace("?",a.K.toString())};fj.prototype.ea=function(a,b,c){return[new G(a[0].entries.slice(c.K),H(a[0]))]};function gj(){}t(gj,kh);gj.prototype.nb=function(a,b){if(!q(b.V)&&!q(b.K))return a;var c=hj(a);if(null===c)return a;mg(a,function(a){return a instanceof Xi||a instanceof fj}).forEach(function(a){a instanceof Xi?c.Qc=!0:c.Rc=!0;ng(a)},this);return c.hb()};function hj(a){a=mg(a,function(a){return a instanceof Oi},function(a){return a instanceof dj&&ej(a)||a instanceof Yi||1!=L(a).length||a instanceof Pi});return 0<a.length?a[0]:null};function ij(a){this.h=a}t(ij,kh);ij.prototype.nb=function(a,b){var c=jj(a,b);if(null===c)return a;var d;a:{var e=c;d=kj(Md(c,0));if(null!==d){var f;f=c.M;for(var h=null,k=d.table.Aa(),n=0;n<k.length&&null===h;n++)h=lj(k[n],f);f=h;if(null===f){d=e;break a}e=new Oi(this.h,f.wb,new Di(f.wb),f.Oe);f=new Qi(this.h,d.table);Od(f,e);ng(c);e=rg(d,d,f,e)}d=e}if(d==c)a:if(d=c,e=mj(Md(c,0)),null!==e){f=lj(e.index,c.M);if(null===f)break a;e.ie=f.Oe;d=ng(c).parent}return d.hb()};
function mj(a){a=mg(a,function(a){return a instanceof Oi},function(a){return 1!=L(a).length});return 0<a.length?a[0]:null}function kj(a){a=mg(a,function(a){return a instanceof ti},function(a){return 1!=L(a).length});return 0<a.length?a[0]:null}function jj(a,b){return q(b.M)?mg(a,function(a){return a instanceof Yi})[0]:null}function lj(a,b){if(a.f.length!=b.length||!b.every(function(b,c){return b.N.getName()==a.f[c].aa.getName()}))return null;var c=nj(b,a);return c[0]||c[1]?{wb:a,Oe:c[1]}:null}
function nj(a,b){var c=a.reduce(function(a,b){return a<<1|(0==b.kb?0:1)},0),d=b.f.reduce(function(a,b){return a<<1|(0==b.kb?0:1)},0),c=c^d;return[0==c,c==Math.pow(2,Math.max(a.length,b.f.length))-1]};function oj(a,b,c){this.Da=a;this.ee=b;this.Ub=c}oj.prototype.hc=function(){this.Ub.forEach(function(a){this.Da=a.nb(this.Da,this.ee)},this);return this.Da};function pj(a,b){T.call(this,0,1);this.S=a;this.Eg=b}t(pj,T);pj.prototype.toString=function(){return"update("+this.S.getName()+")"};pj.prototype.ea=function(a,b){var c=a[0].entries.map(function(a){var b=this.S.Bb(a.ta.Fa());this.Eg.forEach(function(a){b.o[a.N.getName()]=a.value},this);return b},this);b.update(this.S,c);return[ud()]};function qj(a){this.h=a;this.ke=[new Bi,new Ri(this.h),new ij(this.h),new gj,new ui(this.h)];this.Id=[new Ri(this.h)]}qj.prototype.create=function(a,b){var c=a.hb();if(c instanceof Yg||c instanceof Xg)return rj(this,a,b);if(c instanceof dh||c instanceof hh||c instanceof ih)return rj(this,a,b,this.ke);if(c instanceof Zg||c instanceof $g)return rj(this,a,b,this.Id);throw new E(8);};function rj(a,b,c,d){a=kg(b.hb(),a.hg.bind(a));null!=d&&(a=(new oj(a,c,d)).hc());return new de(a,b.ca())}
qj.prototype.hg=function(a){if(a instanceof dh)return new dj(a.f,a.Mb);if(a instanceof gh)return new vi(a.f);if(a instanceof fh)return new Lg(a.f);if(a instanceof eh)return new Yi(a.M);if(a instanceof ih)return new fj;if(a instanceof hh)return new Xi;if(a instanceof ah)return new Pi(a.I.W());if(a instanceof ch)return new ph;if(a instanceof jh)return new xi(this.h,a.I,a.Pb);if(a instanceof bh)return new ti(this.h,a.table);if(a instanceof Zg)return new ri(a.table);if(a instanceof $g)return new pj(a.table,
a.qe);if(a instanceof Yg)return new Wi(this.h,a.table);if(a instanceof Xg)return new Ui(this.h,a.table);throw new E(514);};function sj(a){this.fg=new qi;this.qg=new qj(a)};function tj(){this.Ve=A()}function uj(a,b){var c=a.Ve.get(b.getName())||null;null===c&&(c=new vj,a.Ve.set(b.getName(),c));return c}function wj(a,b,c,d){c.forEach(function(a){a=uj(this,a);0==d?(a.Za=null,a.wc=b):3==d?(null===a.Wb&&(a.Wb=C()),a.Wb.add(b),null===a.Qa&&(a.Qa=C()),a.Qa.delete(b)):1==d?(null===a.Qa&&(a.Qa=C()),a.Qa.add(b)):2==d&&(a.Za=b)},a)}
function xj(a,b,c,d){var e=!0;c.forEach(function(a){if(e){a=uj(this,a);var c=null===a.Qa||0==a.Qa.size;e=0==d?(null===a.Wb||0==a.Wb.size)&&c&&null===a.wc&&null!==a.Za&&a.Za==b:3==d?null===a.wc&&null===a.Za&&null!==a.Qa&&a.Qa.has(b):1==d?null===a.Za:c&&(null===a.Za||a.Za==b)}},a);return e}function yj(a,b,c,d){var e=xj(a,b,c,d);e&&wj(a,b,c,d);return e}tj.prototype.releaseLock=function(a,b){b.forEach(function(b){uj(this,b).releaseLock(a)},this)};
function zj(a,b){b.forEach(function(a){uj(this,a).Za=null},a)}function vj(){this.Wb=this.Qa=this.Za=this.wc=null}vj.prototype.releaseLock=function(a){this.wc==a&&(this.wc=null);this.Za==a&&(this.Za=null);null===this.Qa||this.Qa.delete(a);null===this.Wb||this.Wb.delete(a)};function Aj(){this.Tb=new Bj;this.Fc=new tj}function oe(a,b){(2>b.getPriority()||2>b.getPriority())&&zj(a.Fc,b.ca());a.Tb.xb(b);Cj(a);return b.Lb().ha}function Cj(a){for(var b=a.Tb.Db(),c=0;c<b.length;c++){var d=b[c],e=!1;if(e=0==d.H()?Dj(a,d,1,3):Dj(a,d,2,0))a.Tb.remove(d),e=a,d.exec().then(e.ng.bind(e,d),e.mg.bind(e,d))}}function Dj(a,b,c,d){var e=!1;yj(a.Fc,b.W(),b.ca(),c)&&(e=yj(a.Fc,b.W(),b.ca(),d));return e}Aj.prototype.ng=function(a,b){this.Fc.releaseLock(a.W(),a.ca());a.Lb().resolve(b);Cj(this)};
Aj.prototype.mg=function(a,b){this.Fc.releaseLock(a.W(),a.ca());a.Lb().reject(b);Cj(this)};function Bj(){this.Tb=[]}Bj.prototype.xb=function(a){hf(this.Tb,a,function(a,c){var d=a.getPriority()-c.getPriority();return 0==d?a.W()-c.W():d})};Bj.prototype.Db=function(){return this.Tb.slice()};Bj.prototype.remove=function(a){var b=this.Tb;a=ya(b,a);var c;(c=0<=a)&&xa.splice.call(b,a,1);return c};function Ej(a,b){this.Jd=Dd.Ac();this.fe=a;this.ld=b;this.J=Fj(this)}function Fj(a){if(0<a.fe.f.length)return a.fe.f;var b=[];a.fe.c.forEach(function(a){a.gb().forEach(function(a){b.push(a)})});return b}Ej.prototype.O=function(a,b){return this.J.every(function(c){return Jd(this.Jd,c.H(),"eq")(I(a,c),I(b,c))},this)};
function Gj(a,b,c){var d=null===b?[]:b.entries,e=xb(d,c.entries,a.O.bind(a),function(a){return d[a]});b=[];for(var f=0,h=0;h<d.length;h++){var k=d[h];e[f]==k?f++:(k=a.ld.splice(f,1),k=Hj(h,k,0,a.ld),b.push(k))}e=xb(d,c.entries,a.O.bind(a),function(a,b){return c.entries[b]});for(h=f=0;h<c.entries.length;h++)k=c.entries[h],e[f]==k?f++:(a.ld.splice(h,0,k.ta.o),k=Hj(h,[],1,a.ld),b.push(k));return b}function Hj(a,b,c,d){return{Gg:c,index:a,object:d,Jg:b,type:"splice"}};function Ij(){this.fc=A()}Ij.prototype.xd=function(a,b){var c=ka(a.a).toString(),d=this.fc.get(c)||null;null===d&&(d=new Jj(a),this.fc.set(c,d));d.xd(b)};Ij.prototype.ge=function(a,b){var c=ka(a.a).toString(),d=this.fc.get(c)||null;d.ge(b);0<d.Hc.size||this.fc.delete(c)};function ne(a,b){var c=C();b.forEach(function(a){c.add(a.getName())});var d=[];a.fc.forEach(function(a){a=a.Cc();a.context.c.some(function(a){return c.has(a.getName())})&&d.push(a)});return d}
function le(a,b,c){b=ka(null!=b.Xc?b.Xc:b).toString();a=a.fc.get(b)||null;null!==a&&Kj(a,c)}function Jj(a){this.Bf=a;this.Hc=C();this.kg=[];this.Te=null;this.Jf=new Ej(a.a,this.kg)}Jj.prototype.xd=function(a){this.Hc.has(a)||this.Hc.add(a)};Jj.prototype.ge=function(a){return this.Hc.delete(a)};Jj.prototype.Cc=function(){var a=this.Bf;return{context:a.a,de:Nh(a)}};function Kj(a,b){var c=Gj(a.Jf,a.Te,b);a.Te=b;0<c.length&&a.Hc.forEach(function(a){a(c)})};function Lj(a,b){var c=a.j(oc),d=b||{},e=new df(c);a.mb(jc,e);var e=null,f=!1;null!=d.storeType?e=d.storeType:(q(Yb)||(Yb=new Xb),e=Yb,e=e.Wf?0:e.Fg?4:1);switch(e){case 0:e=new Le(a,c);break;case 1:e=new Re(c);break;case 5:e=new Te(c);break;case 4:e=new af(a,c,d.webSqlDbSize);break;case 3:e=new Ae(c,d.firebase);f=!0;break;default:throw new E(300);}a.mb(ic,e);var h=new hg;a.mb(kc,h);return e.Ga(d.onUpgrade).then(function(){var b=new sj(a);a.mb(lc,b);b=new Aj;a.mb(mc,b);b=new Ij;a.mb(nc,b);return h.Ga(c)}).then(function(){if(f){var b=
new pe(a);b.Ka.subscribe(b.Zd.bind(b))}return(new ag(a)).Ga(c)})};function Mj(a){this.h=a;this.i=a.j(oc);this.$=C(this.i.ra());this.$a=x()}m=Mj.prototype;m.exec=function(){var a=this.h.j(kc),b=this.h.j(jc),c={};this.i.ra().forEach(function(d){var f=a.get(Oe(d)).Xa(),f=ef(b,f).map(function(a){return a.o});c[d.getName()]=f});var d={name:this.i.name(),version:this.i.version(),tables:c},d=new yd(new y(-1,d),!0);return w([new G([d],[])])};m.H=l(0);m.ca=g("$");m.Lb=g("$a");m.W=function(){return ka(this)};m.getPriority=l(0);function Nj(a,b){this.h=a;this.i=a.j(oc);this.$=C(this.i.ra());this.$a=x();this.xa=b;this.Ka=a.j(ic);this.U=a.j(jc);this.D=a.j(kc)}m=Nj.prototype;
m.exec=function(){if(!(this.Ka instanceof Le||this.Ka instanceof Re||this.Ka instanceof af))throw new E(300);var a;a:{a=this.i.ra();for(var b=0;b<a.length;++b)if(0<this.D.get(Oe(a[b])).Ma().na){a=!1;break a}a=!0}if(!a)throw new E(110);if(this.i.name()!=this.xa.name||this.i.version()!=this.xa.version)throw new E(111);if(null==this.xa.tables)throw new E(112);return Oj(this)};m.H=l(1);m.ca=g("$");m.Lb=g("$a");m.W=function(){return ka(this)};m.getPriority=l(0);
function Oj(a){var b=new dd(a.h,a.$),b=a.Ka.Ab(a.H(),D(a.$),b),c;for(c in a.xa.tables){var d=a.i.table(c),e=a.xa.tables[c].map(function(a){return d.tb(a)}),f=b.G(c,d.Bb);a.U.Vb(c,e);var h=a.D.mc.get(c)||[];e.forEach(function(a){h.forEach(function(b){var c=a.Eb(b.getName());b.add(c,a.id())})});f.put(e)}return b.ia()};function Pj(a,b){this.h=a;this.Ka=a.j(ic);this.Ea=a.j(mc);this.Gb=a.j(nc);this.$=C(b);this.Oa=new dd(this.h,this.$);this.$a=x();this.xc=x();this.te=x()}m=Pj.prototype;m.exec=function(){this.te.resolve();return this.xc.ha};m.H=l(1);m.ca=g("$");m.Lb=g("$a");m.W=function(){return ka(this)};m.getPriority=l(2);function Qj(a){oe(a.Ea,a);return a.te.ha}
function Rj(a,b){var c=b.Cc();return c.de.hb().exec(a.Oa,c.context).then(function(a){return qd(a[0])},function(a){this.Oa.Hb();var b=new kb(a.name);this.xc.reject(b);throw a;}.bind(a))}m.ia=function(){this.Ka.Ab(this.H(),D(this.$),this.Oa).ia().then(function(){this.Lc();this.xc.resolve()}.bind(this),function(a){this.Oa.Hb();this.xc.reject(a)}.bind(this));return this.$a.ha};m.Hb=function(){this.Oa.Hb();this.xc.resolve();return this.$a.ha};
m.Lc=function(){var a=ne(this.Gb,this.$);0!=a.length&&(a=new ke(this.h,a),oe(this.Ea,a))};function Sj(a){this.h=a;this.Ea=a.j(mc);this.Pc=null;this.Ra=0;0==Tj.size&&(Tj.set(0,C([1,4])),Tj.set(1,C([2])),Tj.set(2,C([3,5,6])),Tj.set(3,C([2,7])),Tj.set(4,C([7])),Tj.set(5,C([7])),Tj.set(6,C([7])))}r("lf.proc.Transaction",Sj);var Tj=A();function Uj(a,b){var c=Tj.get(a.Ra)||null;if(null===c||!c.has(b))throw new E(107,a.Ra,b);a.Ra=b}
Sj.prototype.exec=function(a){Uj(this,4);var b=[];try{a.forEach(function(a){a.cb();b.push(a.Cc())},this)}catch(c){return Uj(this,7),cb(c)}a=new qh(this.h,b);return oe(this.Ea,a).then(function(a){Uj(this,7);return a.map(function(a){return qd(a)})}.bind(this),function(a){Uj(this,7);throw a;}.bind(this))};Sj.prototype.exec=Sj.prototype.exec;Sj.prototype.zf=function(a){Uj(this,1);this.Pc=new Pj(this.h,a);return Qj(this.Pc).then(function(){Uj(this,2)}.bind(this))};Sj.prototype.begin=Sj.prototype.zf;
Sj.prototype.yf=function(a){Uj(this,3);return Rj(this.Pc,a).then(function(a){Uj(this,2);return a}.bind(this),function(a){Uj(this,7);throw a;}.bind(this))};Sj.prototype.attach=Sj.prototype.yf;Sj.prototype.ia=function(){Uj(this,5);return this.Pc.ia().then(function(){Uj(this,7)}.bind(this))};Sj.prototype.commit=Sj.prototype.ia;Sj.prototype.Hb=function(){Uj(this,6);return this.Pc.Hb().then(function(){Uj(this,7)}.bind(this))};Sj.prototype.rollback=Sj.prototype.Hb;function W(a){this.h=a;this.i=a.j(oc);this.Pd=!1}r("lf.proc.Database",W);W.prototype.Ga=function(a){this.h.mb(oc,this.i);return Lj(this.h,a).then(function(){this.Pd=!0;this.Ea=this.h.j(mc);return this}.bind(this))};W.prototype.init=W.prototype.Ga;W.prototype.vb=g("i");W.prototype.getSchema=W.prototype.vb;function Vj(a){if(!a.Pd)throw new E(2);}W.prototype.select=function(a){Vj(this);return new V(this.h,1!=arguments.length||null!=arguments[0]?Array.prototype.slice.call(arguments):[])};
W.prototype.select=W.prototype.select;W.prototype.xb=function(){Vj(this);return new Ph(this.h)};W.prototype.insert=W.prototype.xb;W.prototype.Qd=function(){Vj(this);return new Ph(this.h,!0)};W.prototype.insertOrReplace=W.prototype.Qd;W.prototype.update=function(a){Vj(this);return new Zh(this.h,a)};W.prototype.update=W.prototype.update;W.prototype.delete=function(){Vj(this);return new Oh(this.h)};W.prototype["delete"]=W.prototype.delete;
W.prototype.observe=function(a,b){Vj(this);this.h.j(nc).xd(a,b)};W.prototype.observe=W.prototype.observe;W.prototype.unobserve=function(a,b){Vj(this);this.h.j(nc).ge(a,b)};W.prototype.unobserve=W.prototype.unobserve;W.prototype.Hf=function(){Vj(this);return new Sj(this.h)};W.prototype.createTransaction=W.prototype.Hf;W.prototype.close=function(){try{this.h.j(ic).close()}catch(a){}this.h.clear();this.Pd=!1};W.prototype.close=W.prototype.close;
W.prototype.Pf=function(){Vj(this);var a=new Mj(this.h);return oe(this.Ea,a).then(function(a){return qd(a[0])[0]})};W.prototype["export"]=W.prototype.Pf;W.prototype.import=function(a){Vj(this);a=new Nj(this.h,a);return oe(this.Ea,a).then(l(null))};W.prototype["import"]=W.prototype.import;function X(a,b,c,d,e,f){this.S=a;this.u=b;this.Pe=c;this.Ne=d;this.rf=e;this.bb=f||null}r("lf.schema.BaseColumn",X);m=X.prototype;m.getName=g("u");m.m=function(){return J(this.S)+"."+this.u};m.toString=function(){return this.m()};m.G=g("S");m.H=g("rf");X.prototype.getType=X.prototype.H;X.prototype.Wa=g("bb");X.prototype.Aa=function(){null==this.pa&&(this.pa=[],this.G().Aa().forEach(function(a){-1!=a.f.map(function(a){return a.aa.getName()}).indexOf(this.u)&&this.pa.push(a)},this));return this.pa};
X.prototype.za=function(){if(!q(this.fa)){var a=this.Aa().filter(function(a){return 1!=a.f.length?!1:a.f[0].aa.getName()==this.getName()},this);this.fa=0<a.length?a[0]:null}return this.fa};X.prototype.ic=g("Ne");X.prototype.isNullable=X.prototype.ic;X.prototype.Ec=g("Pe");X.prototype.Na=function(a){return Bg(this,a,"eq")};X.prototype.eq=X.prototype.Na;X.prototype.We=function(a){return Bg(this,a,"neq")};X.prototype.neq=X.prototype.We;X.prototype.Vd=function(a){return Bg(this,a,"lt")};
X.prototype.lt=X.prototype.Vd;X.prototype.gg=function(a){return Bg(this,a,"lte")};X.prototype.lte=X.prototype.gg;X.prototype.Rf=function(a){return Bg(this,a,"gt")};X.prototype.gt=X.prototype.Rf;X.prototype.Sf=function(a){return Bg(this,a,"gte")};X.prototype.gte=X.prototype.Sf;X.prototype.match=function(a){return Bg(this,a,"match")};X.prototype.match=X.prototype.match;X.prototype.Af=function(a,b){return Bg(this,[a,b],"between")};X.prototype.between=X.prototype.Af;
X.prototype.Tf=function(a){return Bg(this,a,"in")};X.prototype["in"]=X.prototype.Tf;X.prototype.bg=function(){return this.Na(null)};X.prototype.isNull=X.prototype.bg;X.prototype.ag=function(){return this.We(null)};X.prototype.isNotNull=X.prototype.ag;X.prototype.qc=function(a){return new X(this.S,this.u,this.Pe,this.Ne,this.rf,a)};X.prototype.as=X.prototype.qc;function Wj(){this.sd=A()}var Xj;Wj.prototype.clear=function(){this.sd.clear()};Wj.prototype.clear=Wj.prototype.clear;Wj.prototype.mb=function(a,b){this.sd.set(a.toString(),b);return b};Wj.prototype.registerService=Wj.prototype.mb;Wj.prototype.j=function(a){var b=this.sd.get(a.toString())||null;if(null===b)throw new E(7,a.toString());return b};Wj.prototype.getService=Wj.prototype.j;Wj.prototype.Td=function(a){return this.sd.has(a.toString())};Wj.prototype.isRegistered=Wj.prototype.Td;function Yj(a){this.i=a;this.Cd=new Lc;this.he=new Lc;this.Ye=new Lc;this.Ce=A();this.g=new Lc;this.ye=new Lc;this.ef=new Lc;this.Be=new Lc;Zj(this)}function Zj(a){a.i.ra().forEach(function(a){var c=a.getName();a.Cb().Nd().forEach(function(d){this.Ye.set(c,this.i.table(d.Pa));this.g.set(d.Pa,a);0==d.action?(this.he.set(d.Pa,d),this.ef.set(d.Pa,a)):(this.Cd.set(d.Pa,d),this.ye.set(d.Pa,a));this.Ce.set(a.getName()+"."+d.eb,d.Pa);this.Be.set(d.Pa+"."+d.kc,a.getName())},this)},a)}
function Uc(a,b,c){if(null!=c)return 1==c?a.Cd.get(b):a.he.get(b);c=a.Cd.get(b);a=a.he.get(b);return null===c&&null===a?null:(c||[]).concat(a||[])}function wh(a,b){var c=b.get(a);return null===c?[]:c}function yh(a,b){var c=C();b.forEach(function(a){(a=this.Ce.get(a))&&c.add(a)},a);return D(c).map(function(a){return this.i.table(a)},a)}function uh(a,b,c){return null!=c?0==c?wh(b,a.ef):wh(b,a.ye):wh(b,a.g)}
function zh(a,b){var c=C();b.forEach(function(a){(a=this.Be.get(a))&&a.forEach(function(a){c.add(a)})},a);return D(c).map(function(a){return this.i.table(a)},a)};function ak(a,b,c){this.rg=a;this.jg=b;this.Qf=c}r("lf.schema.Constraint",ak);ak.prototype.dd=g("rg");ak.prototype.getPrimaryKey=ak.prototype.dd;ak.prototype.Nd=g("Qf");ak.prototype.getForeignKeys=ak.prototype.Nd;function bk(a,b,c){var d=a.ref.split(".");if(2!=d.length)throw new E(540,c);this.Ae=b;this.eb=a.local;this.Pa=d[0];this.kc=d[1];this.name=b+"."+c;this.action=a.action;this.timing=a.timing};function Y(a){ck(a);this.Jd=Dd.Ac();this.u=a;this.J=A();this.ud=C();this.nc=C();this.kd=C();this.Ba=null;this.pa=A();this.od=!1;this.ub=[]}r("lf.schema.TableBuilder",Y);function dk(a){this.name=a.name;this.kb=a.order;this.autoIncrement=a.autoIncrement}var ek=C([0,6]);function ck(a){if(!/^[A-Za-z_][A-Za-z0-9_]*$/.test(a))throw new E(502,a);}function fk(a,b){if(b==a.u)throw new E(546,b);if(a.J.has(b)||a.pa.has(b)||a.nc.has(b))throw new E(503,a.u+"."+b);}
function gk(a,b){var c=!1;b.forEach(function(a){var b=this.J.get(a.name);c=c||a.autoIncrement;if(a.autoIncrement&&3!=b)throw new E(504);},a);if(c&&1<b.length)throw new E(505);}function hk(a){if(null!==a.Ba){var b=a.pa.get(a.Ba).map(function(a){return a.name}),c=0;if(a.ub.some(function(a,e){c=e;return-1!=b.indexOf(a.eb)},a))throw new E(543,a.ub[c].name);}}
function ik(a){if(null!==a.Ba){var b=function(a){return a.name},c=JSON.stringify(a.pa.get(a.Ba).map(b));a.pa.forEach(function(a,e){if(e!=this.Ba){var f=a.map(b);if(JSON.stringify(f)==c)throw new E(544,this.u+"."+e);}},a)}}function jk(a){null===a.Ba||a.pa.get(a.Ba).forEach(function(a){if(this.kd.has(a.name))throw new E(545,this.u+"."+a.name);},a)}Y.prototype.tf=function(a,b){ck(a);fk(this,a);this.J.set(a,b);ek.has(b)&&this.ve([a]);return this};Y.prototype.addColumn=Y.prototype.tf;
Y.prototype.vf=function(a,b){var c=this.u;this.Ba="pk"+(c[0].toUpperCase()+c.substring(1));ck(this.Ba);fk(this,this.Ba);c=kk(this,a,!0,void 0,b);gk(this,c);1==c.length&&this.ud.add(c[0].name);this.nc.add(this.Ba);this.pa.set(this.Ba,c);return this};Y.prototype.addPrimaryKey=Y.prototype.vf;
Y.prototype.uf=function(a,b){ck(a);fk(this,a);var c=new bk(b,this.u,a);q(c.action)||(c.action=0);q(c.timing)||(c.timing=0);if(1==c.action&&1==c.timing)throw new E(506);if(!this.J.has(c.eb))throw new E(540,a);this.ub.push(c);this.ue(a,[c.eb],this.ud.has(c.eb));return this};Y.prototype.addForeignKey=Y.prototype.uf;Y.prototype.wf=function(a,b){ck(a);fk(this,a);var c=kk(this,b,!0);1==c.length&&(this.ud.add(c[0].name),lk(this,c[0].name));this.pa.set(a,c);this.nc.add(a);return this};
Y.prototype.addUnique=Y.prototype.wf;function lk(a,b){a.ub.forEach(function(a){a.eb==b&&this.nc.add(a.name.split(".")[1])},a)}Y.prototype.ve=function(a){kk(this,a,!1).forEach(function(a){this.kd.add(a.name)},this);return this};Y.prototype.addNullable=Y.prototype.ve;Y.prototype.ue=function(a,b,c,d){ck(a);fk(this,a);b=kk(this,b,!0,d);c&&this.nc.add(a);this.pa.set(a,b);return this};Y.prototype.addIndex=Y.prototype.ue;Y.prototype.zb=ba("od");Y.prototype.persistentIndex=Y.prototype.zb;
Y.prototype.vb=function(){hk(this);ik(this);jk(this);return new (mk(this))};Y.prototype.getSchema=Y.prototype.vb;function nk(a){return a.ub}function kk(a,b,c,d,e){var f=b,f="string"==typeof b[0]?b.map(function(a){return new dk({name:a,order:null!=d?d:1,autoIncrement:e||!1})}):b.map(function(a){return new dk(a)});f.forEach(function(a){if(!this.J.has(a.name))throw new E(508,this.u,a.name);if(c){var b=this.J.get(a.name);if(0==b||6==b)throw new E(509,this.u,a.name);}},a);return f}
function mk(a){function b(){function b(c){return a.pa.get(c).map(function(a){return{aa:this[a.name],kb:a.kb,autoIncrement:a.autoIncrement}},this)}var d=Zb(a.J).map(function(b){this[b]=new X(this,b,a.ud.has(b),a.kd.has(b),a.J.get(b));return this[b]},this),e=Zb(a.pa).map(function(d){return new Dg(a.u,d,a.nc.has(d),b.call(this,d))},this);R.call(this,a.u,d,e,a.od);var f=null===a.Ba?null:new Dg(a.u,a.Ba,!0,b.call(this,a.Ba)),h=d.filter(function(b){return!a.kd.has(b.getName())});this.Df=new ak(f,h,a.ub);
this.hf=ok(a,d,e)}t(b,R);b.prototype.tb=function(a){return new this.hf(qb++,a)};b.prototype.createRow=b.prototype.tb;b.prototype.Bb=function(a){var b={};this.gb().forEach(function(e){var f=e.getName();e=e.H();var h=a.value[f];if(0==e)if(e=h,null!=e&&""!=e){0!=e.length%2&&(e="0"+e);for(var h=new ArrayBuffer(e.length/2),k=new Uint8Array(h),n=0,z=0;n<e.length;n+=2)k[z++]=parseInt(e.substr(n,2),16);e=h}else e=null;else e=2==e?null!=h?new Date(h):null:h;b[f]=e},this);return new this.hf(a.id,b)};b.prototype.deserializeRow=
b.prototype.Bb;b.prototype.Cb=g("Df");b.prototype.getConstraint=b.prototype.Cb;return b}
function ok(a,b,c){function d(a,d){this.J=b;this.pa=c;y.call(this,a,d)}t(d,y);d.prototype.Ee=function(){var a={};this.J.forEach(function(b){a[b.getName()]=b.ic()?null:Kc[b.H()]});return a};d.prototype.pf=function(){var a={};this.J.forEach(function(b){var c=b.getName();b=b.H();var d=this.o[c];a[c]=0==b?null!=d?ub(d):null:2==b?null!=d?d.getTime():null:6==b?null!=d?d:null:d},this);return a};var e=function(a){var b=this.J.get(a.getName()),c=this.Jd.Qe.get(b)||null;return function(b){return c(b[a.getName()])}}.bind(a),
f=function(a){var b=a.map(function(a){return e(a.aa)});return function(a){return b.map(function(b){return b(a)})}}.bind(a),h={};c.forEach(function(a){var b=a.m();a=1==a.f.length?e(a.f[0].aa):f(a.f);h[b]=a});d.prototype.Eb=function(a){return-1!=a.indexOf("#")?this.id():h.hasOwnProperty(a)?h[a](this.o):null};return d};function pk(a,b){this.i=new Z(a,b);this.qb=A();this.yc=!1}r("lf.schema.Builder",pk);function qk(a,b){b.ub.forEach(function(a){var d=a.Pa;if(!this.qb.has(d))throw new E(536,a.name);var d=this.qb.get(d).vb(),e=a.kc;if(!d.hasOwnProperty(e))throw new E(537,a.name);if(b.vb()[a.eb].H()!=d[e].H())throw new E(538,a.name);if(!d[e].Ec())throw new E(539,a.name);},a)}pk.prototype.Cf=function(a){a.ub.forEach(function(a){nk(this.qb.get(a.Pa)).forEach(function(c){if(c.eb==a.kc)throw new E(534,a.name);},this)},this)};
function rk(a){a.yc||(a.qb.forEach(function(a){qk(this,a);a=a.vb();this.i.L.set(a.getName(),a)},a),B(a.qb).forEach(a.Cf,a),sk(a),a.qb.clear(),a.yc=!0)}function tk(a,b,c){b.re||(b.re=!0,b.$d=!0,b.Fe.forEach(function(a){a=c.get(a);if(!a.re)tk(this,a,c);else if(a.$d&&b!=a)throw new E(533);},a));b.$d=!1}function sk(a){var b=A();a.i.L.forEach(function(a,d){b.set(d,new uk(d))},a);a.qb.forEach(function(a,d){a.ub.forEach(function(a){b.get(a.Pa).Fe.add(d)})});B(b).forEach(function(a){tk(this,a,b)},a)}
function uk(a){this.$d=this.re=!1;this.Fe=C();this.Nc=a}pk.prototype.vb=function(){this.yc||rk(this);return this.i};pk.prototype.getSchema=pk.prototype.vb;pk.prototype.He=function(){var a=new hc("ns_"+this.i.name()),b;Xj||(Xj=new Wj);b=Xj;var c=null;b.Td(a)?c=b.j(a):(c=new Wj,b.mb(a,c));return c};pk.prototype.getGlobal=pk.prototype.He;pk.prototype.connect=function(a){var b=this.He();b.Td(oc)||b.mb(oc,this.vb());return(new W(b)).Ga(a)};pk.prototype.connect=pk.prototype.connect;
pk.prototype.Gf=function(a){if(this.qb.has(a))throw new E(503,a);if(this.yc)throw new E(535);this.qb.set(a,new Y(a));return this.qb.get(a)};pk.prototype.createTable=pk.prototype.Gf;pk.prototype.le=function(a){if(this.yc)throw new E(535);this.i.le(a);return this};pk.prototype.setPragma=pk.prototype.le;function Z(a,b){this.u=a;this.Zb=b;this.L=A();this.bf={Kf:!1}}r("lf.schema.DatabaseSchema",Z);Z.prototype.name=g("u");Z.prototype.name=Z.prototype.name;Z.prototype.version=g("Zb");
Z.prototype.version=Z.prototype.version;Z.prototype.ra=function(){return B(this.L)};Z.prototype.tables=Z.prototype.ra;Z.prototype.table=function(a){if(!this.L.has(a))throw new E(101,a);return this.L.get(a)};Z.prototype.table=Z.prototype.table;Z.prototype.info=function(){this.Le||(this.Le=new Yj(this));return this.Le};Z.prototype.af=g("bf");Z.prototype.pragma=Z.prototype.af;Z.prototype.le=ba("bf");r("lf.schema.create",function(a,b){return new pk(a,b)});v.prototype.catch=v.prototype.oe;v.prototype["catch"]=v.prototype.catch;
try{if(module){module.exports=lf;}}catch(e){}}.bind(window))()
//# sourceMappingURL=lovefield.es6.js.map
