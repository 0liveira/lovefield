(function(){'use strict';function aa(){return function(){}}function ba(a){return function(b){this[a]=b}}function g(a){return function(){return this[a]}}function l(a){return function(){return a}}var m,p=this;function q(a){return void 0!==a}function ca(){}
function da(a){var b=typeof a;if("object"==b)if(a){if(a instanceof Array)return"array";if(a instanceof Object)return b;var c=Object.prototype.toString.call(a);if("[object Window]"==c)return"object";if("[object Array]"==c||"number"==typeof a.length&&"undefined"!=typeof a.splice&&"undefined"!=typeof a.propertyIsEnumerable&&!a.propertyIsEnumerable("splice"))return"array";if("[object Function]"==c||"undefined"!=typeof a.call&&"undefined"!=typeof a.propertyIsEnumerable&&!a.propertyIsEnumerable("call"))return"function"}else return"null";
else if("function"==b&&"undefined"==typeof a.call)return"object";return b}function fa(a){return null===a}function ga(a){return null!=a}function ha(a){var b=da(a);return"array"==b||"object"==b&&"number"==typeof a.length}function ia(a){return"string"==typeof a}function ja(a){return"function"==da(a)}function ka(a){return a[ma]||(a[ma]=++na)}var ma="closure_uid_"+(1E9*Math.random()>>>0),na=0;function oa(a,b,c){return a.call.apply(a.bind,arguments)}
function pa(a,b,c){if(!a)throw Error();if(2<arguments.length){var d=Array.prototype.slice.call(arguments,2);return function(){var c=Array.prototype.slice.call(arguments);Array.prototype.unshift.apply(c,d);return a.apply(b,c)}}return function(){return a.apply(b,arguments)}}function qa(a,b,c){qa=Function.prototype.bind&&-1!=Function.prototype.bind.toString().indexOf("native code")?oa:pa;return qa.apply(null,arguments)}
function ra(a,b){var c=Array.prototype.slice.call(arguments,1);return function(){var b=c.slice();b.push.apply(b,arguments);return a.apply(this,b)}}function r(a,b){var c=a.split("."),d=p;c[0]in d||!d.execScript||d.execScript("var "+c[0]);for(var e;c.length&&(e=c.shift());)!c.length&&q(b)?d[e]=b:d=d[e]?d[e]:d[e]={}}
function t(a,b){function c(){}c.prototype=b.prototype;a.Fb=b.prototype;a.prototype=new c;a.prototype.constructor=a;a.tg=function(a,c,f){for(var h=Array(arguments.length-2),k=2;k<arguments.length;k++)h[k-2]=arguments[k];return b.prototype[c].apply(a,h)}};function sa(a){if(Error.captureStackTrace)Error.captureStackTrace(this,sa);else{var b=Error().stack;b&&(this.stack=b)}a&&(this.message=String(a))}t(sa,Error);sa.prototype.name="CustomError";function ta(a,b,c){this.Uf=c;this.yf=a;this.kg=b;this.kd=0;this.fd=null}ta.prototype.get=function(){var a;0<this.kd?(this.kd--,a=this.fd,this.fd=a.next,a.next=null):a=this.yf();return a};ta.prototype.put=function(a){this.kg(a);this.kd<this.Uf&&(this.kd++,a.next=this.fd,this.fd=a)};var ua=Array.prototype,va=ua.indexOf?function(a,b,c){return ua.indexOf.call(a,b,c)}:function(a,b,c){c=null==c?0:0>c?Math.max(0,a.length+c):c;if(ia(a))return ia(b)&&1==b.length?a.indexOf(b,c):-1;for(;c<a.length;c++)if(c in a&&a[c]===b)return c;return-1},wa=ua.forEach?function(a,b,c){ua.forEach.call(a,b,c)}:function(a,b,c){for(var d=a.length,e=ia(a)?a.split(""):a,f=0;f<d;f++)f in e&&b.call(c,e[f],f,a)},xa=ua.map?function(a,b,c){return ua.map.call(a,b,c)}:function(a,b,c){for(var d=a.length,e=Array(d),
f=ia(a)?a.split(""):a,h=0;h<d;h++)h in f&&(e[h]=b.call(c,f[h],h,a));return e},ya=ua.reduce?function(a,b,c,d){d&&(b=qa(b,d));return ua.reduce.call(a,b,c)}:function(a,b,c,d){var e=c;wa(a,function(c,h){e=b.call(d,e,c,h,a)});return e},za=ua.some?function(a,b,c){return ua.some.call(a,b,c)}:function(a,b,c){for(var d=a.length,e=ia(a)?a.split(""):a,f=0;f<d;f++)if(f in e&&b.call(c,e[f],f,a))return!0;return!1};function Aa(a,b,c){return 2>=arguments.length?ua.slice.call(a,b):ua.slice.call(a,b,c)}
function Ba(a){for(var b=[],c=0;c<a;c++)b[c]=0;return b}function Ca(a){for(var b=[],c=0;c<arguments.length;c++){var d=arguments[c];if("array"==da(d))for(var e=0;e<d.length;e+=8192)for(var f=Ca.apply(null,Aa(d,e,e+8192)),h=0;h<f.length;h++)b.push(f[h]);else b.push(d)}return b};var Da;a:{var Ea=p.navigator;if(Ea){var Fa=Ea.userAgent;if(Fa){Da=Fa;break a}}Da=""}function u(a){return-1!=Da.indexOf(a)};function Ga(){return u("Opera")||u("OPR")}function Ha(){return(u("Chrome")||u("CriOS"))&&!Ga()&&!u("Edge")};function Ia(a){p.setTimeout(function(){throw a;},0)}var Ja;
function Ka(){var a=p.MessageChannel;"undefined"===typeof a&&"undefined"!==typeof window&&window.postMessage&&window.addEventListener&&!u("Presto")&&(a=function(){var a=document.createElement("IFRAME");a.style.display="none";a.src="";document.documentElement.appendChild(a);var b=a.contentWindow,a=b.document;a.open();a.write("");a.close();var c="callImmediate"+Math.random(),d="file:"==b.location.protocol?"*":b.location.protocol+"//"+b.location.host,a=qa(function(a){if(("*"==d||a.origin==d)&&a.data==
c)this.port1.onmessage()},this);b.addEventListener("message",a,!1);this.port1={};this.port2={postMessage:function(){b.postMessage(c,d)}}});if("undefined"!==typeof a&&!u("Trident")&&!u("MSIE")){var b=new a,c={},d=c;b.port1.onmessage=function(){if(q(c.next)){c=c.next;var a=c.qe;c.qe=null;a()}};return function(a){d.next={qe:a};d=d.next;b.port2.postMessage(0)}}return"undefined"!==typeof document&&"onreadystatechange"in document.createElement("SCRIPT")?function(a){var b=document.createElement("SCRIPT");
b.onreadystatechange=function(){b.onreadystatechange=null;b.parentNode.removeChild(b);b=null;a();a=null};document.documentElement.appendChild(b)}:function(a){p.setTimeout(a,0)}};function La(){this.ud=this.ic=null}var Na=new ta(function(){return new Ma},function(a){a.reset()},100);La.prototype.add=function(a,b){var c=Na.get();c.set(a,b);this.ud?this.ud.next=c:this.ic=c;this.ud=c};La.prototype.remove=function(){var a=null;this.ic&&(a=this.ic,this.ic=this.ic.next,this.ic||(this.ud=null),a.next=null);return a};function Ma(){this.next=this.scope=this.Hd=null}Ma.prototype.set=function(a,b){this.Hd=a;this.scope=b;this.next=null};
Ma.prototype.reset=function(){this.next=this.scope=this.Hd=null};function Oa(a,b){Pa||Qa();Ra||(Pa(),Ra=!0);Sa.add(a,b)}var Pa;function Qa(){if(p.Promise&&p.Promise.resolve){var a=p.Promise.resolve(void 0);Pa=function(){a.then(Ta)}}else Pa=function(){var a=Ta;!ja(p.setImmediate)||p.Window&&p.Window.prototype&&p.Window.prototype.setImmediate==p.setImmediate?(Ja||(Ja=Ka()),Ja(a)):p.setImmediate(a)}}var Ra=!1,Sa=new La;function Ta(){for(var a=null;a=Sa.remove();){try{a.Hd.call(a.scope)}catch(b){Ia(b)}Na.put(a)}Ra=!1};function v(a,b){this.Qa=0;this.Xe=void 0;this.Vc=this.$b=this.B=null;this.ed=this.Gd=!1;if(a!=ca)try{var c=this;a.call(b,function(a){Ua(c,2,a)},function(a){Ua(c,3,a)})}catch(d){Ua(this,3,d)}}function Wa(){this.next=this.context=this.ec=this.Gc=this.child=null;this.xd=!1}Wa.prototype.reset=function(){this.context=this.ec=this.Gc=this.child=null;this.xd=!1};var Xa=new ta(function(){return new Wa},function(a){a.reset()},100);function Ya(a,b,c){var d=Xa.get();d.Gc=a;d.ec=b;d.context=c;return d}
function w(a){if(a instanceof v)return a;var b=new v(ca);Ua(b,2,a);return b}function Za(a){return new v(function(b,c){c(a)})}function $a(a,b,c){ab(a,b,c,null)||Oa(ra(b,a))}function bb(a){return new v(function(b,c){var d=a.length,e=[];if(d)for(var f=function(a,c){d--;e[a]=c;0==d&&b(e)},h=function(a){c(a)},k=0,n;k<a.length;k++)n=a[k],$a(n,ra(f,k),h);else b(e)})}function x(){var a,b,c=new v(function(c,e){a=c;b=e});return new cb(c,a,b)}
v.prototype.then=function(a,b,c){return db(this,ja(a)?a:null,ja(b)?b:null,c)};v.prototype.then=v.prototype.then;v.prototype.$goog_Thenable=!0;function eb(a,b,c){db(a,null,b,c)}function fb(a,b){a.$b||2!=a.Qa&&3!=a.Qa||gb(a);a.Vc?a.Vc.next=b:a.$b=b;a.Vc=b}
function db(a,b,c,d){var e=Ya(null,null,null);e.child=new v(function(a,h){e.Gc=b?function(c){try{var e=b.call(d,c);a(e)}catch(z){h(z)}}:a;e.ec=c?function(b){try{var e=c.call(d,b);!q(e)&&b instanceof hb?h(b):a(e)}catch(z){h(z)}}:h});e.child.B=a;fb(a,e);return e.child}v.prototype.pg=function(a){this.Qa=0;Ua(this,2,a)};v.prototype.qg=function(a){this.Qa=0;Ua(this,3,a)};
function Ua(a,b,c){0==a.Qa&&(a==c&&(b=3,c=new TypeError("Promise cannot resolve to itself")),a.Qa=1,ab(c,a.pg,a.qg,a)||(a.Xe=c,a.Qa=b,a.B=null,gb(a),3!=b||c instanceof hb||ib(a,c)))}function ab(a,b,c,d){if(a instanceof v)return fb(a,Ya(b||ca,c||null,d)),!0;var e;if(a)try{e=!!a.$goog_Thenable}catch(f){e=!1}else e=!1;if(e)return a.then(b,c,d),!0;e=typeof a;if("object"==e&&null!=a||"function"==e)try{var h=a.then;if(ja(h))return jb(a,h,b,c,d),!0}catch(k){return c.call(d,k),!0}return!1}
function jb(a,b,c,d,e){function f(a){k||(k=!0,d.call(e,a))}function h(a){k||(k=!0,c.call(e,a))}var k=!1;try{b.call(a,h,f)}catch(n){f(n)}}function gb(a){a.Gd||(a.Gd=!0,Oa(a.Df,a))}function kb(a){var b=null;a.$b&&(b=a.$b,a.$b=b.next,b.next=null);a.$b||(a.Vc=null);return b}
v.prototype.Df=function(){for(var a=null;a=kb(this);){var b=this.Qa,c=this.Xe;if(3==b&&a.ec&&!a.xd)for(var d=void 0,d=this;d&&d.ed;d=d.B)d.ed=!1;if(a.child)a.child.B=null,lb(a,b,c);else try{a.xd?a.Gc.call(a.context):lb(a,b,c)}catch(e){mb.call(null,e)}Xa.put(a)}this.Gd=!1};function lb(a,b,c){2==b?a.Gc.call(a.context,c):a.ec&&a.ec.call(a.context,c)}function ib(a,b){a.ed=!0;Oa(function(){a.ed&&mb.call(null,b)})}var mb=Ia;function hb(a){sa.call(this,a)}t(hb,sa);hb.prototype.name="cancel";
function cb(a,b,c){this.ga=a;this.resolve=b;this.reject=c};/*

 Copyright 2014 The Lovefield Project Authors. All Rights Reserved.

 Licensed under the Apache License, Version 2.0 (the "License");
 you may not use this file except in compliance with the License.
 You may obtain a copy of the License at

     http://www.apache.org/licenses/LICENSE-2.0

 Unless required by applicable law or agreed to in writing, software
 distributed under the License is distributed on an "AS IS" BASIS,
 WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 See the License for the specific language governing permissions and
 limitations under the License.
*/
function y(a,b){this.oa=a;this.o=b||this.ve()}var nb=0;m=y.prototype;m.id=g("oa");function ob(a){return a.o}m.ve=function(){return{}};m.ef=g("o");m.Ha=function(){return{id:this.oa,value:this.ef()}};m.Cb=function(a){return"#"==a.substr(-1)?this.oa:null};function pb(a){return new y(a.id,a.value)}function qb(a){return new y(nb++,a||{})}function rb(a){if(null==a)return null;a=new Uint8Array(a);for(var b="",c=0;c<a.length;++c)var d=a[c].toString(16),b=b+(2>d.length?"0"+d:d);return b};function sb(a){this.type=a}function tb(a){y.call(this,-1,a)}t(tb,y);function ub(a,b,c,d){c=c||function(a,b){return a==b};d=d||function(b){return a[b]};for(var e=a.length,f=b.length,h=[],k=0;k<e+1;k++)h[k]=[],h[k][0]=0;for(var n=0;n<f+1;n++)h[0][n]=0;for(k=1;k<=e;k++)for(n=1;n<=f;n++)c(a[k-1],b[n-1])?h[k][n]=h[k-1][n-1]+1:h[k][n]=Math.max(h[k-1][n],h[k][n-1]);for(var z=[],k=e,n=f;0<k&&0<n;)c(a[k-1],b[n-1])?(z.unshift(d(k-1,n-1)),k--,n--):h[k-1][n]>h[k][n-1]?k--:n--;return z}function vb(a){return ya(arguments,function(a,c){return a+c},0)}
function wb(a){return vb.apply(null,arguments)/arguments.length}function xb(a){var b=arguments.length;if(2>b)return 0;var c=wb.apply(null,arguments);return vb.apply(null,xa(arguments,function(a){return Math.pow(a-c,2)}))/(b-1)}function yb(a){return Math.sqrt(xb.apply(null,arguments))};var zb="StopIteration"in p?p.StopIteration:{message:"StopIteration",stack:""};function Ab(){}Ab.prototype.next=function(){throw zb;};Ab.prototype.ke=function(){return this};function Bb(a){if(a instanceof Ab)return a;if("function"==typeof a.ke)return a.ke(!1);if(ha(a)){var b=0,c=new Ab;c.next=function(){for(;;){if(b>=a.length)throw zb;if(b in a)return a[b++];b++}};return c}throw Error("Not implemented");}
function Cb(a,b){if(ha(a))try{wa(a,b,void 0)}catch(c){if(c!==zb)throw c;}else{a=Bb(a);try{for(;;)b.call(void 0,a.next(),void 0,a)}catch(d){if(d!==zb)throw d;}}}function Db(a){if(za(arguments,function(a){return!a.length})||!arguments.length)return new Ab;var b=new Ab,c=arguments,d=Ba(c.length);b.next=function(){if(d){for(var a=xa(d,function(a,b){return c[b][a]}),b=d.length-1;0<=b;b--){if(d[b]<c[b].length-1){d[b]++;break}if(0==b){d=null;break}d[b]=0}return a}throw zb;};return b};function Eb(a){Fb(a);return a.c.concat()}function Fb(a){if(a.uf!=a.c.length){for(var b=0,c=0;b<a.c.length;){var d=a.c[b];Gb(a.W,d)&&(a.c[c++]=d);b++}a.c.length=c}if(a.uf!=a.c.length){for(var e={},c=b=0;b<a.c.length;)d=a.c[b],Gb(e,d)||(a.c[c++]=d,e[d]=1),b++;a.c.length=c}}function Gb(a,b){return Object.prototype.hasOwnProperty.call(a,b)};/*

 Copyright 2015 The Lovefield Project Authors. All Rights Reserved.

 Licensed under the Apache License, Version 2.0 (the "License");
 you may not use this file except in compliance with the License.
 You may obtain a copy of the License at

     http://www.apache.org/licenses/LICENSE-2.0

 Unless required by applicable law or agreed to in writing, software
 distributed under the License is distributed on an "AS IS" BASIS,
 WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 See the License for the specific language governing permissions and
 limitations under the License.
*/
function A(){return new window.Map}function Hb(a){var b=0,c=Array(a.size);a.forEach(function(a,e){c[b++]=e});return c}function B(a){var b=0,c=Array(a.size);a.forEach(function(a){c[b++]=a});return c};var Ib={};r("lf.TransactionType",Ib);Ib.READ_ONLY=0;Ib.READ_WRITE=1;function Jb(a,b){this.Oa=a;this.ff=b;this.X=x()}Jb.prototype.ia=function(){try{Kb(this.Oa)}catch(a){return Za(a)}return(0==this.ff?this.lc():Lb(this)).then(function(a){this.Oa.ia();return a}.bind(this))};function Lb(a){Mb(a);Nb(a);return a.lc()}
function Mb(a){a.Oa.nb.forEach(function(a,c){var d=this.Oa.Z().get(c),d=this.G(d.getName(),d.Jb.bind(d)),e=B(a.Ca).map(function(a){return a.id()});0<e.length&&eb(d.remove(e),this.Jd,this);e=B(a.pa).map(function(a){return a[1]}).concat(B(a.Ba));eb(d.put(e),this.Jd,this)},a)}function Nb(a){Ob(a.Oa).forEach(function(a){var c=this.G(a.getName(),pb),d;c.get([-1]).then(function(a){d=a;return c.remove([])}).then(function(){c.put(d);c.put(a.Ha())},this.Jd.bind(this))},a)}Jb.prototype.Jd=function(a){this.X.reject(a)};function Pb(a){this.lg=a}Pb.prototype.toString=g("lg");var Qb=new Pb("backstore"),Rb=new Pb("cache"),Tb=new Pb("indexstore"),Ub=new Pb("engine"),Vb=new Pb("runner"),Wb=new Pb("observerregistry"),Xb=new Pb("schema");var Yb=Ga(),Zb=u("Trident")||u("MSIE"),$b=u("Edge"),ac=u("Gecko")&&!(-1!=Da.toLowerCase().indexOf("webkit")&&!u("Edge"))&&!(u("Trident")||u("MSIE"))&&!u("Edge"),bc=-1!=Da.toLowerCase().indexOf("webkit")&&!u("Edge");function cc(){var a=Da;if(ac)return/rv\:([^\);]+)(\)|;)/.exec(a);if($b)return/Edge\/([\d\.]+)/.exec(a);if(Zb)return/\b(?:MSIE|rv)[: ]([^\);]+)(\)|;)/.exec(a);if(bc)return/WebKit\/(\S+)/.exec(a)}
(function(){if(Yb&&p.opera){var a=p.opera.version;return ja(a)?a():a}var a="",b=cc();b&&(a=b?b[1]:"");return Zb&&(b=(b=p.document)?b.documentMode:void 0,b>parseFloat(a))?String(b):a})();!u("Android")||Ha()||u("Firefox")||Ga();Ha();function C(a){return q(a)?new window.Set(a):new window.Set}function dc(a){var b=0,c=Array(a.size);a.forEach(function(a){c[b++]=a});return c}function ec(a,b){if(b.size>a.size)return!1;var c=!0;b.forEach(function(b){c=c&&a.has(b)});return c};function fc(a,b){this.oa=a;this.o=b||{}}function gc(a){var b=C();a.forEach(function(a){b.add(a>>9)});return dc(b)}fc.prototype.U=g("oa");function hc(a,b){b.forEach(function(a){this.o[a.id()]=a.Ha()},a)}function ic(a,b){b.forEach(function(a){delete this.o[a]},a)}fc.prototype.Ha=function(){return{id:this.oa,value:JSON.stringify(this.o)}};function jc(a){return new fc(a.id,JSON.parse(a.value))};function kc(a,b,c){this.aa=a;this.Ib=b;this.Ye=c}m=kc.prototype;m.get=function(a){if(0==a.length)return this.uc();var b=this.Ib;return lc(this,a).then(function(c){return a.map(function(a){var e=c.get(a>>9);return b(e.o[a])})})};function lc(a,b){var c=A(),d=x(),e=gc(b).map(function(a){return new v(function(b,d){var e;try{e=this.aa.get(a)}catch(z){d(z);return}e.onerror=d;e.onsuccess=function(a){a=jc(a.target.result);c.set(a.U(),a);b()}},this)},a);bb(e).then(function(){d.resolve(c)});return d.ga}
m.uc=function(){return new v(function(a,b){var c=[],d;try{d=this.aa.openCursor()}catch(e){b(e);return}d.onerror=b;d.onsuccess=function(){var b=d.result;if(b){var e;e=jc(b.value).o;for(var k in e)c.push(this.Ib(e[k]));b.continue()}else a(c)}.bind(this)},this)};m.Qb=function(a){return new v(function(b,c){var d;try{d=a()}catch(e){c(e);return}d.onsuccess=b;d.onerror=c},this)};
m.put=function(a){if(0==a.length)return w();var b=A();a.forEach(function(a){var d;d=a.id()>>9;var e=b.get(d)||null;null===e&&(e=this.Ye(this.aa.name,d));hc(e,[a]);b.set(d,e)},this);a=B(b).map(function(a){return this.Qb(function(){return this.aa.put(a.Ha())}.bind(this))},this);return bb(a)};
m.remove=function(a){if(0==a.length)return this.Qb(function(){return this.aa.clear()}.bind(this));var b=A();a.forEach(function(a){var d=a>>9,e=b.get(d)||null;null===e&&(e=this.Ye(this.aa.name,d));ic(e,[a]);b.set(d,e)},this);a=B(b).map(function(a){return this.Qb(function(){return 0==Object.keys(a.o).length?this.aa.delete(a.U()):this.aa.put(a.Ha())}.bind(this))},this);return bb(a)};function mc(a,b,c){a=a.i(Rb);var d=[c<<9,(c+1<<9)-1];b=a.Wa(b,d[0],d[1]);c=new fc(c);hc(c,b);return c}
function nc(a,b){return new fc(b)};function oc(){};function pc(a){this.ba=a.i(Rb);this.C=a.i(Tb);this.m=a.i(Xb)}pc.prototype.update=function(a){a.forEach(function(a){qc(this,a);rc(this,a)},this)};function rc(a,b){var c=b.getName();b.Ca.forEach(function(a,b){this.ba.remove(c,b)},a);b.Ba.forEach(function(a){this.ba.set(c,a)},a);b.pa.forEach(function(a){this.ba.set(c,a[1])},a)}function qc(a,b){var c=a.m.table(b.getName());sc(b).forEach(function(a){tc(this,c,a)},a)}
function tc(a,b,c){var d=[];(a.C.gc.get(b.getName())||[]).forEach(function(a){try{uc(a,c),d.push(a)}catch(b){throw d.forEach(function(a){uc(a,[c[1],c[0]])},this),b;}},a)}function uc(a,b){var c=null===b[1]?void 0:b[1].Cb(a.getName()),d=null===b[0]?void 0:b[0].Cb(a.getName());if(!q(d)&&q(c))a.add(c,b[1].id());else if(q(d)&&q(c)){if(null===c||null===d){if(c==d)return}else if(0==a.mc().compare(d,c))return;a.add(c,b[1].id());a.remove(d,b[0].id())}else q(d)&&!q(c)&&a.remove(d,b[0].id())};var vc={};r("lf.ConstraintAction",vc);vc.RESTRICT=0;vc.CASCADE=1;var wc={};r("lf.ConstraintTiming",wc);wc.IMMEDIATE=0;wc.DEFERRABLE=1;var xc={};r("lf.Order",xc);xc.DESC=0;xc.ASC=1;var yc={};r("lf.Type",yc);yc.ARRAY_BUFFER=0;yc.BOOLEAN=1;yc.DATE_TIME=2;yc.INTEGER=3;yc.NUMBER=4;yc.STRING=5;yc.OBJECT=6;var zc={0:null,1:!1,2:Object.freeze(new Date(0)),3:0,4:0,5:"",6:null};r("lf.type.DEFAULT_VALUES",zc);function D(a,b){this.code=a;this.message="http://sn.im/2a0j3wn?c="+a;if(1<arguments.length)for(var c=1;c<=Math.min(4,arguments.length-1);++c)this.message+="&p"+(c-1)+"="+encodeURIComponent(arguments[c].toString().slice(0,64))}t(D,Error);function Ac(a){this.C=a.i(Tb);this.m=a.i(Xb);this.Zc=null}function Bc(a,b,c){var d=b.Ab().Zf;c.forEach(function(a){d.forEach(function(b){if(null==a.o[b.getName()])throw new D(202,b.l());},this)},a)}function Cc(a,b,c,d){b.Ab().Id().forEach(function(a){a.timing==d&&Dc(this,a,c)},a)}function Dc(a,b,c){var d=Ec(a,b);c.forEach(function(a){if(Fc(a[0],a[1],b.name)&&(a=a[1].o[b.ob],null!==a&&!d.bb(a)))throw new D(203,b.name);},a)}
function Ec(a,b){null===a.Zc&&(a.Zc=A());var c=a.Zc.get(b.name)||null;null===c&&(c=a.m.table(b.wb)[b.Hc].ua(),c=a.C.get(c.l()),a.Zc.set(b.name,c));return c}function Fc(a,b,c){return(null===a?null!==b:null===b)||a.Cb(c)!=b.Cb(c)}function Gc(a,b,c,d){b=Hc(a.m.info(),b.getName());null!=b&&b.forEach(function(a){if(a.timing==d){var b=this.C.get(a.name),h=Ec(this,a);c.forEach(function(c){if(Fc(c[0],c[1],h.getName())&&b.bb(c[0].o[a.Hc]))throw new D(203,a.name);},this)}},a)}
function Ic(a,b,c,d){0!=c.length&&(c=c.map(function(a){return[null,a]}),Cc(a,b,c,d))}function Kc(a,b,c,d){0!=c.length&&(Cc(a,b,c,d),Gc(a,b,c,d))}function Lc(a,b,c,d){0!=c.length&&(c=c.map(function(a){return[a,null]}),Gc(a,b,c,d))};function Mc(a){this.Ba=A();this.pa=A();this.Ca=A();this.w=a}m=Mc.prototype;m.getName=g("w");m.add=function(a){if(this.Ca.has(a.id())){var b=[this.Ca.get(a.id()),a];this.pa.set(a.id(),b);this.Ca.delete(a.id())}else this.Ba.set(a.id(),a)};m.modify=function(a){var b=a[1],c=a[0].id();this.Ba.has(c)?this.Ba.set(c,b):(this.pa.has(c)&&(a=[this.pa.get(a[0].id())[0],b]),this.pa.set(c,a))};
m.delete=function(a){if(this.Ba.has(a.id()))this.Ba.delete(a.id());else if(this.pa.has(a.id())){var b=this.pa.get(a.id())[0];this.pa.delete(a.id());this.Ca.set(a.id(),b)}else this.Ca.set(a.id(),a)};function sc(a){var b=[];a.Ba.forEach(function(a){b.push([null,a])});a.pa.forEach(function(a){b.push(a)});a.Ca.forEach(function(a){b.push([a,null])});return b}m.toString=function(){return"["+Hb(this.Ba).toString()+"], ["+Hb(this.pa).toString()+"], ["+Hb(this.Ca).toString()+"]"};
function Nc(a){var b=new Mc(a.w);a.Ba.forEach(function(a){b.delete(a)});a.Ca.forEach(function(a){b.add(a)});a.pa.forEach(function(a){b.modify([a[1],a[0]])});return b}m.Pf=function(){return 0==this.Ba.size&&0==this.Ca.size&&0==this.pa.size};function Oc(a,b){this.$=A();b.forEach(function(a){this.$.set(a.getName(),a)},this);this.ba=a.i(Rb);this.C=a.i(Tb);this.Ma=new Ac(a);this.gd=new pc(a);this.nb=A()}function Ob(a){var b=[];Hb(a.nb).map(function(a){return this.$.get(a)},a).forEach(function(a){a.xb()&&(a.va().forEach(function(a){b.push(this.C.get(a.l()))},this),b.push(this.C.get(a.getName()+".#")))},a);return b}m=Oc.prototype;m.Z=g("$");
function Pc(a){var b=[];a.$.forEach(function(a){a.xb()&&(a.va().forEach(function(a){b.push(a.l())}),b.push(a.getName()+".#"))});return b}m.ub=function(a,b){Qc(this,a);Bc(this.Ma,a,b);Ic(this.Ma,a,b,0);for(var c=0;c<b.length;c++)Rc(this,a,[null,b[c]])};
function Rc(a,b,c){var d=b.getName(),e=a.nb.get(d)||new Mc(d);a.nb.set(d,e);try{tc(a.gd,b,c)}catch(f){throw f;}b=c[0];var h=c[1];null===b&&null!==h?(a.ba.set(d,h),e.add(h)):null!==b&&null!==h?(a.ba.set(d,h),e.modify(c)):null!==b&&null===h&&(a.ba.remove(d,b.id()),e.delete(b))}m.update=function(a,b){Qc(this,a);Bc(this.Ma,a,b);for(var c=0;c<b.length;c++){var d=b[c],d=[this.ba.get(d.id()),d];Kc(this.Ma,a,[d],0);Rc(this,a,d)}};
m.Ld=function(a,b){Qc(this,a);Bc(this.Ma,a,b);for(var c=0;c<b.length;c++){var d=b[c],e=null,f,h=a.Ab().bd();if(null===h)f=null;else{f=this.Ma;var h=h.l(),k=d.Cb(h);f=f.C.get(h).get(k);f=0==f.length?null:f[0]}null!=f?(e=this.ba.get(f),d.oa=f,Kc(this.Ma,a,[[e,d]],0)):Ic(this.Ma,a,[d],0);Rc(this,a,[e,d])}};m.remove=function(a,b){Qc(this,a);Lc(this.Ma,a,b,0);for(var c=0;c<b.length;c++)Rc(this,a,[b[c],null])};
function Kb(a){a.nb.forEach(function(a){var c=this.$.get(a.getName());Ic(this.Ma,c,B(a.Ba),1);Lc(this.Ma,c,B(a.Ca),1);Kc(this.Ma,c,B(a.pa),1)},a)}m.ia=aa();m.Eb=function(){var a=B(this.nb).map(function(a){return Nc(a)});this.gd.update(a)};function Qc(a,b){if(!a.$.has(b.getName()))throw new D(106,b.getName());};function Sc(a,b,c,d){this.b=a;this.s=b;this.ca=null===this.b?!1:c;this.ma=null===this.s?!1:d}Sc.prototype.toString=function(){return(this.ca?"(":"[")+(null===this.b?"unbound":this.b)+", "+(null===this.s?"unbound":this.s)+(this.ma?")":"]")};function Tc(a){if(null===a.b&&null===a.s)return[];var b=null,c=null;null===a.b||(b=new Sc(null,a.b,!1,!a.ca));null===a.s||(c=new Sc(a.s,null,!a.ma,!1));return[b,c].filter(function(a){return null!==a})}
Sc.prototype.reverse=function(){return new Sc(this.s,this.b,this.ma,this.ca)};function Uc(a,b){var c=Vc(a.b,b.b,!0,a.ca,b.ca);if(0==c)return!0;var d=-1==c?a:b,c=1==c?a:b;return null===d.s||d.s>c.b||d.s==c.b&&!d.ma&&!c.ca}function Wc(){return new Sc(null,null,!1,!1)}function Xc(a){return null===a.b&&null===a.s}function Yc(a){return null!=a.b&&a.b==a.s&&!a.ca&&!a.ma}
Sc.prototype.contains=function(a){var b=null===this.s||a<this.s||a==this.s&&!this.ma;return(null===this.b||a>this.b||a==this.b&&!this.ca)&&b};function Vc(a,b,c,d,e){function f(a){return c?a:1==a?-1:1}d=d||!1;e=e||!1;return null===a?null===b?(d?!e:e)?d?f(1):f(-1):0:f(-1):null===b?f(1):a<b?-1:a==b?(d?!e:e)?d?f(1):f(-1):0:1}function Zc(a,b){var c=Vc(a.b,b.b,!0,a.ca,b.ca);0==c&&(c=Vc(a.s,b.s,!1,a.ma,b.ma));return c};function E(a,b){this.entries=a;this.K=C(b);this.Ua=null}function F(a){return dc(a.K)}function $c(a){return a.entries.map(function(a){return a.sa.o})}function ad(a){return a.entries.map(function(a){return a.sa.id()})}function bd(a,b){return a.Ua.get(b.l())}var cd=null;function dd(){null===cd&&(cd=new E([],[]));return cd}
function ed(a){if(0==a.length)return dd();for(var b=a.reduce(function(a,b){return a+b.entries.length},0),c=Array(b),d=0,b=a.map(function(a){var b=A();a.entries.forEach(function(a){c[d++]=a;b.set(a.id,a)});return b}),e=A(),f=0;f<c.length;f++)b.every(function(a){return a.has(c[f].id)})&&e.set(c[f].id,c[f]);return new E(B(e),dc(a[0].K))}function fd(a){if(0==a.length)return dd();var b=A();a.forEach(function(a){a.entries.forEach(function(a){b.set(a.id,a)})});return new E(B(b),dc(a[0].K))}
function gd(a,b){var c=1<b.length,d=a.map(function(a){return new hd(a,c)});return new E(d,b)}function hd(a,b){this.sa=a;this.id=id++;this.Od=b}var id=0;function G(a,b){var c=b.Va();return null!==c&&a.sa.o.hasOwnProperty(c)?a.sa.o[c]:a.Od?a.sa.o[H(b.G())][b.getName()]:a.sa.o[b.getName()]}function jd(a,b,c){var d=b.Va();if(null!=d)a.sa.o[d]=c;else if(a.Od){var d=H(b.G()),e=a.sa.o[d];null==e&&(e={},a.sa.o[d]=e);e[b.getName()]=c}else a.sa.o[b.getName()]=c}
function kd(a,b,c,d){function e(a,b){if(a.Od){var c=a.sa.o,d;for(d in c)f[d]=c[d]}else f[b[0]]=a.sa.o}var f={};e(a,b);e(c,d);a=new y(-1,f);return new hd(a,!0)};r("lf.bind",function(a){return new I(a)});function I(a){this.ea=a}r("lf.Binder",I);I.prototype.ua=g("ea");function ld(){this.He=md();var a=nd();this.cc=A();this.cc.set(1,od());this.cc.set(2,pd());this.cc.set(4,a);this.cc.set(3,a);this.cc.set(5,qd())}ld.vc=function(){return ld.De?ld.De:ld.De=new ld};function rd(a,b,c){return(a.cc.get(b)||null).get(c)||null}function md(){function a(a){return a}var b=A();b.set(1,function(a){return null===a?null:a?1:0});b.set(2,function(a){return null===a?null:a.getTime()});b.set(3,a);b.set(4,a);b.set(5,a);return b}
function od(){var a=A();a.set("eq",function(a,c){return a==c});a.set("neq",function(a,c){return a!=c});return a}
function nd(){var a=od();a.set("between",function(a,c){return null===a||null===c[0]||null===c[1]?!1:a>=c[0]&&a<=c[1]});a.set("gte",function(a,c){return null===a||null===c?!1:a>=c});a.set("gt",function(a,c){return null===a||null===c?!1:a>c});a.set("in",function(a,c){return-1!=c.indexOf(a)});a.set("lte",function(a,c){return null===a||null===c?!1:a<=c});a.set("lt",function(a,c){return null===a||null===c?!1:a<c});return a}
function qd(){var a=nd();a.set("match",function(a,c){return null===a||null===c?!1:(new RegExp(c)).test(a)});return a}
function pd(){var a=A();a.set("between",function(a,c){return null===a||null===c[0]||null===c[1]?!1:a.getTime()>=c[0].getTime()&&a.getTime()<=c[1].getTime()});a.set("eq",function(a,c){return(null===a?-1:a.getTime())==(null===c?-1:c.getTime())});a.set("gte",function(a,c){return null===a||null===c?!1:a.getTime()>=c.getTime()});a.set("gt",function(a,c){return null===a||null===c?!1:a.getTime()>c.getTime()});a.set("in",function(a,c){return c.some(function(c){return c.getTime()==a.getTime()})});a.set("lte",
function(a,c){return null===a||null===c?!1:a.getTime()<=c.getTime()});a.set("lt",function(a,c){return null===a||null===c?!1:a.getTime()<c.getTime()});a.set("neq",function(a,c){return(null===a?-1:a.getTime())!=(null===c?-1:c.getTime())});return a};function J(){this.g=this.B=null}var sd=[];J.prototype.getParent=g("B");J.prototype.eb=function(){for(var a=this;!fa(a.getParent());)a=a.getParent();return a};function td(a){for(var b=0;!fa(a.getParent());)b++,a=a.getParent();return b}function K(a){return a.g||sd}function ud(a,b){return K(a)[b]||null}function vd(a,b,c){b.B=a;null===a.g?a.g=[b]:a.g.splice(c,0,b)}function L(a,b){b.B=a;null===a.g?a.g=[b]:a.g.push(b)}
function wd(a,b){var c=a.g&&a.g[b];return c?(c.B=null,a.g.splice(b,1),0==a.g.length&&(a.g=null),c):null}J.prototype.removeChild=function(a){return wd(this,K(this).indexOf(a))};function xd(a,b,c){ud(a,c).B=null;b.B=a;a.g[c]=b}function yd(a,b,c){!1!==b.call(c,a)&&K(a).forEach(function(a){yd(a,b,c)})};function zd(){J.call(this);this.oa=Ad++}t(zd,J);var Ad=0;zd.prototype.U=g("oa");function Bd(a,b,c){zd.call(this);this.N=a;this.value=b;this.F=c;this.qc=rd(ld.vc(),this.N.H(),this.F);this.Xa=!1;this.Zb=b}t(Bd,zd);m=Bd.prototype;m.Hb=function(){var a=new Bd(this.N,this.value,this.F);a.Zb=this.Zb;a.qd(this.Xa);var b=this.U();a.oa=b;return a};m.cb=function(a){return null!=a?(a.push(this.N),a):[this.N]};m.qd=ba("Xa");function Cd(a){var b=!1;a.value instanceof I||(b="array"==da(a.value)?!a.value.some(function(a){return a instanceof I}):!0);if(!b)throw new D(501);}
m.eval=function(a){Cd(this);if("in"==this.F)return Dd(this,a);var b=a.entries.filter(function(a){return this.qc(G(a,this.N),this.value)!=this.Xa},this);return new E(b,F(a))};m.bind=function(a){if(this.Zb instanceof I){var b=this.Zb.ua();if(a.length<=b)throw new D(510);this.value=a[b]}else"array"==da(this.Zb)&&(this.value=this.Zb.map(function(b){if(b instanceof I){var d=b.ua();if(a.length<=d)throw new D(510);return a[b.ua()]}return b}))};
function Dd(a,b){var c=C(a.value),d=function(a){return null===a?!1:c.has(a)!=this.Xa}.bind(a),e=b.entries.filter(function(a){return d(G(a,this.N))},a);return new E(e,F(b))}m.toString=function(){return"value_pred("+this.N.l()+" "+this.F+(this.Xa?"(complement)":"")+" "+this.value+")"};function Ed(a){this.ha=a;this.Wc=this.ya=null}function Fd(a,b){null===a.ya&&null!=a.u&&(a.ya=Gd(a.u));return a.ya.get(b)||null}function Gd(a){var b=A();yd(a,function(a){b.set(a.U(),a)});return b}function Hd(a,b){b.u&&(a.u=b.u.Hb());a.Wc=b}Ed.prototype.bind=function(){return this};function Id(a,b){var c=a.u;null!=c&&yd(c,function(a){a instanceof Bd&&a.bind(b)})};function Jd(a){Ed.call(this,a)}t(Jd,Ed);function Kd(a){var b="";a.forEach(function(c,d){b+=c.N.l()+" ";b+=1==c.hb?"ASC":"DESC";d<a.length-1&&(b+=", ")});return b}Jd.prototype.Z=function(){return C(this.b)};Jd.prototype.clone=function(){var a=new Jd(this.ha);Hd(a,this);this.f&&(a.f=this.f.slice());this.b&&(a.b=this.b.slice());a.V=this.V;a.M=this.M;this.L&&(a.L=this.L.slice());this.ja&&(a.ja=this.ja.slice());this.Ob&&(a.Ob=this.Ob);this.Ub&&(a.Ub=this.Ub);a.vb=this.vb;return a};
Jd.prototype.bind=function(a){Jd.Fb.bind.call(this,a);null!=this.Ob&&(this.V=a[this.Ob.ua()]);null!=this.Ub&&(this.M=a[this.Ub.ua()]);Id(this,a);return this};function Ld(a,b){this.za=a;this.$=b}Ld.prototype.eb=g("za");Ld.prototype.Z=g("$");function Md(a){var b=C();a.forEach(function(a){a.Z().forEach(b.add.bind(b))});return b};function Nd(a,b){this.global=a;this.Ia=a.i(Qb);this.nd=b.map(function(a){return a.context});this.Re=b.map(function(a){return a.Zd});this.te=Md(this.Re);this.gf=Od(this);this.Za=x()}function Od(a){return a.nd.some(function(a){return!(a instanceof Jd)})?1:0}m=Nd.prototype;
m.exec=function(){function a(){var f=d.shift();if(f){var h=e[c.length];return f.eb().exec(b,h).then(function(b){c.push(b[0]);return a()})}return w()}var b=new Oc(this.global,this.te),c=[],d=this.Re.slice(),e=this.nd;return a().then(function(){return this.Ia.zb(this.gf,b).ia()}.bind(this)).then(function(){this.Wd(c);return c}.bind(this),function(a){b.Eb();throw a;})};m.H=g("gf");m.Z=g("te");m.Kb=g("Za");m.U=function(){return ka(this)};m.Wd=aa();function Pd(a,b){Nd.call(this,a,b);this.Db=a.i(Wb)}t(Pd,Nd);Pd.prototype.getPriority=l(0);Pd.prototype.Wd=function(a){this.nd.forEach(function(b,c){Qd(this.Db,b,a[c])},this)};function Rd(a,b){this.h=a;this.Db=a.i(Wb);this.Aa=a.i(Vb);this.gd=new pc(a);this.nb=b;var c=a.i(Xb),d=this.nb.map(function(a){return c.table(a.getName())});this.$=C(d);this.Za=x()}m=Rd.prototype;m.exec=function(){this.gd.update(this.nb);this.Kc();return w()};m.H=l(1);m.Z=g("$");m.Kb=g("Za");m.U=function(){return ka(this)};m.getPriority=l(1);m.Kc=function(){var a=Sd(this.Db,this.$);0!=a.length&&(a=new Pd(this.h,a),Td(this.Aa,a))};function Ud(a){this.h=a;this.Ia=a.i(Qb);this.Aa=a.i(Vb)}Ud.prototype.Ud=function(a){a=new Rd(this.h,a);Td(this.Aa,a)};function M(a,b){this.Wb=a;this.j=b;this.Ra=A()}r("lf.backstore.FirebaseRawBackStore",M);M.prototype.cd=g("j");M.prototype.dd=function(){throw new D(351);};function Vd(a,b){var c=x(),d=a;b.length&&(d=a.child(b));d.once("value",function(a){c.resolve(a.val())},function(a){c.reject(a)});return c.ga}function Wd(a,b,c){function d(a){a?e.reject(a):e.resolve()}c=c||!1;var e=x();c?a.set(b,d):a.update(b,d);return e.ga}
M.prototype.Da=function(a){return Vd(this.j,"@rev/R").then(function(a){this.Ka=a;return Vd(this.j,"@table")}.bind(this)).then(function(b){var c=0,d;for(d in b)this.Ra.set(d,b[d]),b[d]>c&&(c=b[d]);a.ra().forEach(function(a){this.Ra.has(a.getName())||(b[a.getName()]=++c)},this);d=this.j.child("@table");return Wd(d,b)}.bind(this))};
function Xd(a,b,c){var d=a.Ra.get(b);return null!=d?function(){var a={},b=x();this.j.orderByChild("T").equalTo(d).once("value",function(d){d.forEach(function(b){var d=c(b.val());a[parseInt(b.key(),10)]=d});b.resolve(a)});return b.ga}.call(a).then(function(a){a["@rev"]={R:++this.Ka};return Wd(this.j,a)}.bind(a)):w()}M.prototype.oc=function(a){return Xd(this,a,l(null)).then(function(){this.Ra.delete(a);return Wd(this.j.child("@table/"+a),null,!0)}.bind(this))};M.prototype.dropTable=M.prototype.oc;
M.prototype.jc=function(a,b,c){return Xd(this,a,function(a){var e=a.P;e[b]=c;return{R:this.Ka+1,T:a.T,P:e}}.bind(this))};M.prototype.addTableColumn=M.prototype.jc;M.prototype.pc=function(a,b){return Xd(this,a,function(a){var d=a.P;delete d[b];return{R:this.Ka+1,T:a.T,P:d}}.bind(this))};M.prototype.dropTableColumn=M.prototype.pc;M.prototype.Jc=function(a,b,c){return Xd(this,a,function(a){var e=a.P;e[c]=e[b];delete e[b];return{R:this.Ka+1,T:a.T,P:e}}.bind(this))};M.prototype.renameTableColumn=M.prototype.Jc;
M.prototype.qb=function(){throw new D(351);};M.prototype.createRow=M.prototype.qb;M.prototype.yc=g("Wb");M.prototype.getVersion=M.prototype.yc;M.prototype.ac=function(a){var b=x();a=this.Ra.get(a);this.j.orderByChild("T").equalTo(a).once("value",function(a){var d=[];a.forEach(function(a){d.push(a.val().P)});b.resolve(d)});return b.ga};M.prototype.dump=function(){var a={},b=Hb(this.Ra).map(function(b){return this.ac(b).then(function(d){a[b]=d})}.bind(this));return bb(b).then(function(){return a})};
M.prototype.dump=M.prototype.dump;function Yd(a,b,c){Jb.call(this,c,b);this.j=a}t(Yd,Jb);Yd.prototype.G=function(a){return this.j.wc(a)};
Yd.prototype.lc=function(){var a=this.Oa.nb;if(0==a.size)this.X.resolve();else{var b=this.j.Ka+1;this.j.Ka=b;var c={"@rev":{R:b}};a.forEach(function(a,e){var f=this.j.Ra.get(e);a.Ba.forEach(function(a,d){c[d]={R:b,T:f,P:a.o}});a.pa.forEach(function(a,d){c[d]={R:b,T:f,P:a[1].o}});a.Ca.forEach(function(a,b){c[b]=null})},this);this.j.j.update(c,function(c){null===c?this.X.resolve():(this.j.Ka=b-1,c=B(a).map(function(a){return Zd(this.j,a.getName())},this),bb(c).then(this.X.reject.bind(this.X),this.X.reject.bind(this.X)))}.bind(this))}return this.X.ga};function $d(){this.ta=A()}function ae(a,b){if(0==b.length)return B(a.ta);var c=[];b.forEach(function(a){a=this.ta.get(a)||null;null===a||c.push(a)},a);return c}$d.prototype.getData=g("ta");$d.prototype.get=function(a){return w(ae(this,a))};function be(a,b){b.forEach(function(a){this.ta.set(a.id(),a)},a)}$d.prototype.put=function(a){be(this,a);return w()};function ce(a,b){0==b.length||b.length==a.ta.size?a.ta.clear():b.forEach(function(a){this.ta.delete(a)},a)}
$d.prototype.remove=function(a){ce(this,a);return w()};function de(a){return 0==a.ta.size?0:Hb(a.ta).reduce(function(a,c){return a>c?a:c},0)};function ee(a,b){this.m=a;this.nf=b;this.Ic=A();this.Ka=-1;this.K=A();this.Ra=A();this.Ad=null}m=ee.prototype;
m.Da=function(a){this.j=this.nf.child(this.m.name());var b=a||function(){return w()};return Vd(this.j,"@db/version").then(function(a){return null===a?Wd(this.j,fe(this),!0).then(function(){var a=new M(0,this.j);return b(a)}.bind(this)):a==this.m.version()?Vd(this.j,"@rev/R").then(function(a){this.Ka=a;return Vd(this.j,"@table")}.bind(this)).then(function(a){for(var b in a)this.Ra.set(b,a[b]);a=this.m.ra().map(function(a){return Zd(this,a.getName())},this);return bb(a)}.bind(this)).then(function(){ge(this);
he(this);return w()}.bind(this)):this.Xd(a,b).then(function(){return this.Da()}.bind(this))}.bind(this))};m.Xd=function(a,b){var c=new M(a,this.j);return c.Da(this.m).then(function(){return w()}.bind(this)).then(function(){return b(c)}).then(function(){var a=this.j.child("@db");return Wd(a,{version:this.m.version()},!0)}.bind(this))};
function he(a){a.j.off();a.j.on("child_removed",a.ag.bind(a));a.Bd&&(a.Bd.off(),a.Ic.clear());a.Bd=a.j.orderByChild("R").startAt(a.Ka+1);a.Bd.on("value",a.Ud.bind(a))}function ge(a){nb=B(a.K).map(function(a){return de(a)}).reduce(function(a,c){return a>c?a:c},0)+1}m.ag=function(a){var b=a.val(),c=this.Ic.get(b.T)||null;null===c&&(c=C(),this.Ic.set(b.T,c));c.add(parseInt(a.key(),10))};
m.Ud=function(a){var b=a.child("@rev/R").val();null!=b&&b!=this.Ka&&(this.Ka=b,a=ie(this,a),a.forEach(function(a){var b=this.K.get(a.getName()),e=Hb(a.Ca);0<e.length&&ce(b,e);var f=B(a.Ba);a.pa.forEach(function(a){f.push(a[1])});be(b,f)},this),0<a.length&&this.Dc(a),he(this))};
function ie(a,b){var c=C(),d=A();a.Ra.forEach(function(a,b){var h=this.K.get(b),k=new Mc(b);if(this.Ic.has(a)){var n=dc(this.Ic.get(a));n.forEach(function(a){c.add(a)});ae(h,n).forEach(function(a){k.delete(a)})}d.set(a,k)}.bind(a));b.forEach(function(a){if("@rev"!=a.key()){var b=parseInt(a.key(),10);if(!c.has(b)){a=a.val();var h=d.get(a.T),k=this.K.get(h.getName());k.getData().has(b)?h.modify([ae(k,[b])[0],new y(b,a.P)]):h.add(new y(b,a.P))}}}.bind(a));return B(d).filter(function(a){return!a.Pf()})}
function Zd(a,b){var c=x(),d=a.Ra.get(b);a.j.orderByChild("T").equalTo(d).once("value",function(a){var d=new $d,h=[];a.forEach(function(a){h.push(new y(parseInt(a.key(),10),a.val().P))});be(d,h);this.K.set(b,d);c.resolve()}.bind(a));return c.ga}function fe(a){var b={};b["@db"]={version:a.m.version()};b["@rev"]={R:1};a.Ka=1;b["@table"]={};a.m.ra().forEach(function(a,d){var e=a.getName();b["@table"][e]=d;this.K.set(e,new $d);this.Ra.set(e,d)},a);return b}m.zb=function(a,b){return new Yd(this,a,b)};
m.wc=function(a){var b=this.K.get(a)||null;if(null!==b)return b;throw new D(101,a);};m.close=aa();m.subscribe=ba("Ad");m.Dc=function(a){null!=this.Ad&&this.Ad(a)};function N(a,b,c,d){this.j=b;this.Ta=c;this.Wb=a;this.Tc=d}r("lf.backstore.IndexedDBRawBackStore",N);N.prototype.cd=g("j");N.prototype.getRawDBInstance=N.prototype.cd;N.prototype.dd=g("Ta");N.prototype.getRawTransaction=N.prototype.dd;N.prototype.oc=function(a){return new v(function(b,c){try{this.j.deleteObjectStore(a)}catch(d){c(d);return}b()},this)};N.prototype.dropTable=N.prototype.oc;
function je(a,b,c,d){return new v(function(a,f){var h;try{var k=this.Ta.objectStore(b);h=k.openCursor()}catch(n){f(n);return}h.onsuccess=function(){var b=h.result;b?(c(b),b.continue()):(d(k),a())};h.onerror=f},a)}function ke(a){var b=null;return b=a instanceof ArrayBuffer?rb(a):a instanceof Date?a.getTime():a}
function le(a,b,c){function d(a){var b=jc(a.value),d=b.o,e;for(e in d){var z=pb(d[e]);c(z);d[e]=z.Ha()}a.update(b.Ha())}function e(a){var b=pb(a.value);c(b);a.update(b.Ha())}return je(a,b,a.Tc?d:e,aa())}N.prototype.jc=function(a,b,c){var d=ke(c);return le(this,a,function(a){a.o[b]=d})};N.prototype.addTableColumn=N.prototype.jc;N.prototype.pc=function(a,b){return le(this,a,function(a){delete a.o[b]})};N.prototype.dropTableColumn=N.prototype.pc;
N.prototype.Jc=function(a,b,c){return le(this,a,function(a){a.o[c]=a.o[b];delete a.o[b]})};N.prototype.renameTableColumn=N.prototype.Jc;function me(a,b){var c=[];return new v(function(a,e){var f;try{f=this.Ta.objectStore(b).openCursor()}catch(h){e(h);return}f.onsuccess=function(){var b=f.result;if(b){if(this.Tc){var e;e=jc(b.value).o;for(var h in e)c.push(e[h])}else c.push(b.value);b.continue()}else a(c)}.bind(this);f.onerror=e},a)}N.prototype.qb=function(a){var b={},c;for(c in a)b[c]=ke(a[c]);return qb(b)};
N.prototype.createRow=N.prototype.qb;N.prototype.yc=g("Wb");N.prototype.getVersion=N.prototype.yc;N.prototype.dump=function(){for(var a=this.j.objectStoreNames,b=[],c=0;c<a.length;++c){var d=a.item(c);b.push(this.ac(d))}return bb(b).then(function(b){var c={};b.forEach(function(b,d){c[a.item(d)]=b});return c})};N.prototype.dump=N.prototype.dump;N.prototype.ac=function(a){return me(this,a).then(function(a){return a.map(function(a){return a.value})})};function ne(a,b){this.aa=a;this.Ib=b}m=ne.prototype;m.get=function(a){if(0==a.length)return this.uc();a=a.map(function(a){return new v(function(c,d){var e;try{e=this.aa.get(a)}catch(f){d(f);return}e.onerror=d;e.onsuccess=function(a){c(this.Ib(a.target.result))}.bind(this)},this)},this);return bb(a)};
m.uc=function(){return new v(function(a,b){var c=[],d;try{d=this.aa.openCursor()}catch(e){b(e);return}d.onerror=b;d.onsuccess=function(){var b=d.result;b?(c.push(this.Ib(b.value)),b.continue()):a(c)}.bind(this)},this)};m.Qb=function(a){return new v(function(b,c){var d;try{d=a()}catch(e){c(e);return}d.onsuccess=b;d.onerror=c},this)};m.put=function(a){if(0==a.length)return w();a=a.map(function(a){return this.Qb(function(){return this.aa.put(a.Ha())}.bind(this))},this);return bb(a)};
m.remove=function(a){return new v(function(b,c){var d=this.aa.count();d.onsuccess=function(d){if(0==a.length||d.target.result==a.length)return this.Qb(function(){return this.aa.clear()}.bind(this)).then(b,c);d=a.map(function(a){return this.Qb(function(){return this.aa.delete(a)}.bind(this))},this);bb(d).then(b,c)}.bind(this);d.onerror=c},this)};function oe(a,b,c,d,e){Jb.call(this,c,d);this.h=a;this.Ta=b;this.Tc=e;this.Ta.oncomplete=this.X.resolve.bind(this.X);this.Ta.onabort=this.X.reject.bind(this.X)}t(oe,Jb);oe.prototype.G=function(a,b,c){return this.Tc?(c=null!=c?c:0,a=this.Ta.objectStore(a),new kc(a,b,0==c?ra(mc,this.h):nc)):new ne(this.Ta.objectStore(a),b)};oe.prototype.lc=function(){return this.X.ga};function pe(a,b){this.h=a;this.m=b;this.Uc=b.Se().Af||!1}m=pe.prototype;
m.Da=function(a){var b=window.indexedDB||window.mozIndexedDB||window.webkitIndexedDB||window.msIndexedDB;if(null==b)throw new D(352);var c=a||function(){return w()};return new v(function(a,e){var f;try{f=b.open(this.m.name(),this.m.version())}catch(h){e(h);return}f.onerror=e;f.onupgradeneeded=function(a){qe(this,c,a).then(aa(),e)}.bind(this);f.onsuccess=function(b){this.j=b.target.result;this.de().then(function(b){nb=b+1;a(this.j)}.bind(this))}.bind(this)},this)};
function qe(a,b,c){var d=c.target.result,e=c.target.transaction;c=new N(c.oldVersion,d,e,a.Uc);re(d);a.m.ra().forEach(ra(a.vf,d,e),a);return b(c)}function re(a){for(var b=[],c=0;c<a.objectStoreNames.length;++c){var d=a.objectStoreNames.item(c);-1!=d.indexOf(".")&&b.push(d)}b.forEach(function(b){try{a.deleteObjectStore(b)}catch(c){}})}
m.vf=function(a,b,c){a.objectStoreNames.contains(c.getName())||a.createObjectStore(c.getName(),{keyPath:"id"});c.xb()&&(c.va().forEach(function(c){this.nc(a,b,c.l(),"btree")},this),this.nc(a,b,se(c),"rowid"))};m.nc=function(a,b,c,d){a.objectStoreNames.contains(c)||(a.createObjectStore(c,{keyPath:"id"}),a=b.objectStore(c),(this.Uc?new kc(a,pb,nc):new ne(a,pb)).put([new tb(new sb(d))]))};
m.zb=function(a,b){var c=Hb(b.Z());Pc(b).forEach(function(a){c.push(a)});var d=this.j.transaction(c,0==a?"readonly":"readwrite");return new oe(this.h,d,b,a,this.Uc)};
m.de=function(a){function b(){if(0==d.length)return w();var a=d.shift();return c(a).then(b)}function c(b){return new v(function(c,d){var ea;try{ea=(a||e.transaction([b])).objectStore(b).openCursor(null,"prev")}catch(la){d(la);return}ea.onsuccess=function(a){(a=a.target.result)&&(f=Math.max(f,h(a)));c(f)};ea.onerror=function(){c(f)}})}var d=this.m.ra().map(function(a){return a.getName()}),e=this.j,f=0,h=function(a){return this.Uc?(a=jc(a.value),Object.keys(a.o).reduce(function(a,b){return Math.max(a,
b)},0)):a.key}.bind(this);return new v(function(a){b().then(function(){a(f)})})};m.close=function(){this.j.close()};m.wc=function(){throw new D(511);};m.subscribe=aa();m.Dc=aa();function te(a,b,c){Jb.call(this,c,b);this.aa=a;0==b&&this.X.resolve()}t(te,Jb);te.prototype.G=function(a){return this.aa.wc(a)};te.prototype.lc=function(){this.X.resolve();return this.X.ga};function ue(a){this.m=a;this.K=A()}m=ue.prototype;m.Da=function(){this.m.ra().forEach(this.Mf,this);return w()};m.wc=function(a){var b=this.K.get(a)||null;if(null===b)throw new D(101,a);return b};m.zb=function(a,b){return new te(this,a,b)};function ve(a,b){if(!a.K.has(b)){var c=new $d;a.K.set(b,c);return c}return null}m.Mf=function(a){ve(this,a.getName());a.xb()&&(a.va().forEach(function(a){this.nc(a.l(),"btree")},this),this.nc(se(a),"rowid"))};m.nc=function(a,b){var c=ve(this,a);null===c||c.put([new tb(new sb(b))])};
m.close=aa();m.subscribe=aa();m.Dc=aa();function we(a){ue.call(this,a);this.jd=null}t(we,ue);we.prototype.subscribe=function(a){null===this.jd&&(this.jd=a)};we.prototype.Dc=function(a){null===this.jd||this.jd(a)};function xe(a,b,c){this.Ta=a;this.w=b;this.Ib=c}xe.prototype.get=function(a){var b=this.Ib;return ye(this.Ta,"SELECT id, value FROM "+this.w+" "+(0==a.length?"":"WHERE id IN ("+a.join(",")+")"),[],function(a){for(var d=a.rows.length,e=Array(d),f=0;f<d;++f)e[f]=b({id:a.rows.item(f).id,value:JSON.parse(a.rows.item(f).value)});return e})};
xe.prototype.put=function(a){if(0==a.length)return w();var b="INSERT OR REPLACE INTO "+this.w+"(id, value) VALUES (?, ?)";a.forEach(function(a){ye(this.Ta,b,[a.id(),JSON.stringify(a.o)])},this);return w()};xe.prototype.remove=function(a){ye(this.Ta,"DELETE FROM "+this.w+" "+(0==a.length?"":"WHERE id IN ("+a.join(",")+")"),[]);return w()};function ze(a,b,c){Jb.call(this,b,c);this.j=a;this.K=A();this.Dd=[]}t(ze,Jb);function Ae(a){return a.replace(".","__d__").replace("#","__s__")}ze.prototype.G=function(a,b){var c=this.K.get(a)||null;null===c&&(c=new xe(this,Ae(a),b),this.K.set(a,c));return c};function ye(a,b,c,d){var e=x();a.Dd.push({ng:b,dg:c,transform:d,X:e});return e.ga}
ze.prototype.lc=function(){var a=null,b=this.X.reject.bind(this.X),c=function(a,b){this.X.reject(b)}.bind(this),d=[],e=function(b,h){if(null!==a){var k=h;null!=a.transform&&null!=h&&(k=a.transform(h));d.push(k);a.X.resolve(k)}0<this.Dd.length?(a=k=this.Dd.shift(),b.executeSql(k.ng,k.dg,e,c)):this.X.resolve(d)}.bind(this);0==this.ff?this.j.readTransaction(e,b):this.j.transaction(e,b);return this.X.ga};function O(a,b,c){this.j=c;this.h=a;this.Wb=b}r("lf.backstore.WebSqlRawBackStore",O);O.prototype.cd=g("j");O.prototype.getRawDBInstance=O.prototype.cd;O.prototype.dd=function(){throw new D(356);};O.prototype.getRawTransaction=O.prototype.dd;function Be(a){return new ze(a.j,new Oc(a.h,C()),1)}O.prototype.oc=function(a){var b=Be(this);ye(b,"DROP TABLE "+a,[]);return b.ia()};O.prototype.dropTable=O.prototype.oc;
O.prototype.ac=function(a){var b=Be(this);ye(b,"SELECT id, value FROM "+a,[]);return b.ia().then(function(a){for(var b=a[0].rows.length,e=Array(b),f=0;f<b;++f)e[f]={id:a[0].rows.item(f).id,value:JSON.parse(a[0].rows.item(f).value)};return w(e)})};function Ce(a,b,c){var d=Be(a),e="UPDATE "+b+" SET value=? WHERE id=?";return a.ac(b).then(function(a){a.forEach(function(a){a=c(a);ye(d,e,[JSON.stringify(a.value),a.id])});return d.ia()})}
O.prototype.jc=function(a,b,c){var d=ke(c);return Ce(this,a,function(a){a.value[b]=d;return a})};O.prototype.addTableColumn=O.prototype.jc;O.prototype.pc=function(a,b){return Ce(this,a,function(a){delete a.value[b];return a})};O.prototype.dropTableColumn=O.prototype.pc;O.prototype.Jc=function(a,b,c){return Ce(this,a,function(a){a.value[c]=a.value[b];delete a.value[b];return a})};O.prototype.renameTableColumn=O.prototype.Jc;O.prototype.qb=function(a){var b={},c;for(c in a)b[c]=ke(a[c]);return qb(b)};
O.prototype.createRow=O.prototype.qb;O.prototype.yc=g("Wb");O.prototype.getVersion=O.prototype.yc;function De(a){ye(a,'SELECT tbl_name FROM sqlite_master WHERE type="table"',[],function(a){for(var c=Array(a.rows.length),d=0;d<c.length;++d)c[d]=a.rows.item(d).tbl_name;return c})}
O.prototype.dump=function(){var a=x(),b=Be(this);De(b);var c={};b.ia().then(function(b){b=b[0].filter(function(a){return"__lf_ver"!=a&&"__WebKitDatabaseInfoTable__"!=a}).map(function(a){return this.ac(a).then(function(b){c[a]=b})},this);bb(b).then(function(){a.resolve(c)})}.bind(this));return a.ga};O.prototype.dump=O.prototype.dump;function Ee(a,b,c){this.h=a;this.m=b;this.mg=c||4194304}function Fe(a){return new Oc(a.h,C())}m=Ee.prototype;m.Da=function(a){if(null==window.openDatabase)throw new D(353);var b=a||function(){return w()};return new v(function(a,d){try{var e=window.openDatabase(this.m.name(),"",this.m.name(),this.mg);if(null!=e)this.j=e,Ge(this,b).then(a,d);else throw new D(354);}catch(f){d(f)}},this)};
function Ge(a,b){var c=x(),d=new ze(a.j,Fe(a),1);ye(d,"CREATE TABLE IF NOT EXISTS __lf_ver(id INTEGER PRIMARY KEY, v INTEGER)",[]);ye(d,"SELECT v FROM __lf_ver WHERE id = 0",[]);d.ia().then(function(a){var d=0;a[1].rows.length&&(d=a[1].rows.item(0).v);d<this.m.version()?this.Xd(b,d).then(c.resolve.bind(c)):d>this.m.version()?c.reject(new D(108)):c.resolve()}.bind(a));return c.ga}m.zb=function(a,b){if(null!=this.j)return new ze(this.j,b,a);throw new D(2);};m.close=aa();
m.wc=function(){throw new D(512);};m.subscribe=function(){throw new D(355);};m.Dc=function(){throw new D(355);};m.Xd=function(a,b){var c=x();He(this).then(function(){a(new O(this.h,b,this.j)).then(function(){return this.de()}.bind(this)).then(c.resolve.bind(c))}.bind(this),c.reject.bind(c));return c.ga};
function He(a){var b=a.m.ra(),c=new ze(a.j,Fe(a),1),d=new ze(a.j,Fe(a),1);ye(c,"INSERT OR REPLACE INTO __lf_ver VALUES (0, ?)",[a.m.version()]);De(c);return c.ia().then(function(a){function c(a,b){ye(d,"INSERT INTO "+a+"(id, value) VALUES(?, ?)",[-1,JSON.stringify(ob(new tb(new sb(b))))])}var h=a[1];h.filter(function(a){return-1!=a.indexOf("__d__")}).forEach(function(a){ye(d,"DROP TABLE "+a,[])});var k=[],n=[],z=[];b.map(function(a){-1==h.indexOf(a.getName())&&k.push(a.getName());a.xb&&(a.va().forEach(function(a){a=
Ae(a.l());k.push(a);n.push(a)}),a=Ae(se(a)),k.push(a),z.push(a))});k.forEach(function(a){ye(d,"CREATE TABLE "+a+"(id INTEGER PRIMARY KEY, value TEXT)",[])});n.forEach(function(a){c(a,"btree")});z.forEach(function(a){c(a,"rowid")});return d.ia()})}
m.de=function(){var a=0,b=x(),c=function(b){var c=new ze(this.j,Fe(this),0);ye(c,"SELECT MAX(id) FROM "+b,[]);return c.ia().then(function(b){b=b[0].rows.item(0)[0];a=Math.max(b,a)})}.bind(this),d=this.m.ra().map(function(a){return c(a.getName())});bb(d).then(function(){b.resolve(a)},function(a){b.reject(a)});return b.ga};function Ie(a){this.W=A();this.Vb=A();a.ra().forEach(function(a){this.Vb.set(a.getName(),C())},this)}m=Ie.prototype;m.set=function(a,b){this.W.set(b.id(),b);this.Vb.get(a).add(b.id())};m.rd=function(a,b){var c=this.Vb.get(a);b.forEach(function(a){this.W.set(a.id(),a);c.add(a.id())},this)};m.get=function(a){return this.W.get(a)||null};function Je(a,b){return b.map(function(a){return this.get(a)},a)}
m.Wa=function(a,b,c){var d=[],e=Math.min(b,c),f=Math.max(b,c);a=this.Vb.get(a);if(a.size<f-e)a.forEach(function(a){a>=e&&a<=f&&(a=this.W.get(a),d.push(a))},this);else for(b=e;b<=f;++b)a.has(b)&&(c=this.W.get(b),d.push(c));return d};m.remove=function(a,b){this.W.delete(b);this.Vb.get(a).delete(b)};m.ug=function(a){return null!=a?this.Vb.get(a).size:this.W.size};m.clear=function(){this.W.clear();this.Vb.clear()};function Ke(a,b,c){var d=0,e=a.length;for(c=c||Le;d<e;){var f=d+e>>1;0>c(a[f],b)?d=f+1:e=f}return d==e&&a[d]==b?d:~d}function Le(a,b){return a-b}function Me(a,b,c){c=Ke(a,b,c);return 0>c?(a.splice(-(c+1),0,b),!0):!1};function Ne(a,b,c,d){a=b?a.reverse():a;if(null==c&&null==d)return a;c=Math.min(q(c)?c:a.length,a.length);if(0==c)return[];d=Math.min(d||0,a.length);return a.slice(d,d+c)};function Oe(){this.na=0}Oe.prototype.add=function(a,b){this.na+=b};Oe.prototype.remove=function(a,b){this.na-=b};Oe.prototype.clear=function(){this.na=0};function Pe(a,b){a.clear();b.forEach(function(a){this.na+=a.na},a)};function Qe(a,b,c,d){this.w=a;this.S=b;this.he=c;this.lb=new Oe;if(d){a=511;a*=a*a;if(d.length>=a)throw new D(6,a);d=Re(this,d);this.qa=d=Se(d)}else this.clear()}var Te=[];m=Qe.prototype;m.getName=g("w");m.toString=function(){return this.qa.toString()};m.add=function(a,b){this.qa=this.qa.ub(a,b)};m.set=function(a,b){this.qa=this.qa.ub(a,b,!0)};m.remove=function(a,b){this.qa=this.qa.remove(a,b)};m.get=function(a){return this.qa.get(a)};
m.Yc=function(a){if(null==a)return this.La().na;if(a instanceof Sc){if(Xc(a))return this.La().na;if(Yc(a))return this.get(a.b).length}return this.Wa([a]).length};m.La=g("lb");m.uc=function(a,b,c,d){c=Array(a);this.qa.fill({offset:b?this.lb.na-a-d:d,count:a,ge:0},c);return b?c.reverse():c};
m.Wa=function(a,b,c,d){var e=Ue(this.qa).c[0];if(!q(e)||0==c)return Te;b=b||!1;c=null!=c?Math.min(c,this.lb.na):this.lb.na;d=d||0;var f=Math.min(Math.max(this.lb.na-d,0),c);if(0==f)return Te;if(!q(a)||1==a.length&&a[0]instanceof Sc&&Xc(a[0]))return this.uc(f,b,c,d);a=this.S.bf(a);var h=Array(b?this.lb.na:f),k={count:0,V:h.length,reverse:b,M:d};a.forEach(function(a){for(var b=this.S.od(a),b=this.S.Nd(a)?e:b[0],b=Ve(this.qa,b),c=k.count,d=0;null!=b&&k.count<k.V;)b.Wa(a,k,h),k.count!=c?(d=0,c=k.count):
d++,b=2==d?null:b.next()},this);h.splice(k.count,f-k.count);return b?Ne(h,b,c,d):h};m.clear=function(){this.qa=We(this);this.lb.clear()};m.bb=function(a){return this.qa.bb(a)};m.min=function(){return this.Cc(this.S.min.bind(this.S))};m.max=function(){return this.Cc(this.S.max.bind(this.S))};m.Cc=function(a){var b=Ue(this.qa),c=Xe(this.qa);if(0==b.c.length&&0==c.c.length)return null;var d=b.c[0],b=b.A[0],e=c.c[c.c.length-1],c=c.A[c.c.length-1];return 1==a(d,e)?[d,this.he?[b]:b]:[e,this.he?[c]:c]};
m.Fa=g("he");m.mc=g("S");m.Rd=function(a,b){return null!=a?-1==this.S.compare(a,b):!1};m.Na=function(a,b){return null!=a?0==this.S.compare(a,b):!1};m.Ha=function(){for(var a=[],b=Ue(this.qa);b;)a.push(new y(b.oa,[b.c,b.A])),b=b.wa;return a};function Ye(a,b,c,d){a=new Qe(b,a,c);d=Ze(d,a);a.qa=d;return a}function $e(a,b){this.oa=a;this.D=b;this.fb=0;this.wa=this.yb=this.B=null;this.c=[];this.A=[];this.g=[]}function We(a){return new $e(nb++,a)}function P(a){return 0==a.fb}m=$e.prototype;m.next=g("wa");
function af(a){function b(a){return null!=a?a.oa.toString():"_"}var c=a.oa+"["+a.c.join("|")+"]",d=a.g.map(function(a){return a.oa}).join("|"),e=a.A.join("/"),f=b(a.yb)+"{",f=P(a)?f+e:f+d,f=f+"}"+b(a.B);a.wa&&(a=af(a.wa),c=c+"  "+a[0],f=f+"  "+a[1]);return[c,f]}m.toString=function(){var a="",b=af(this),a=a+(b[0]+"\n"+b[1]+"\n");this.g.length&&(a+=this.g[0].toString());return a};function Ue(a){return P(a)?a:Ue(a.g[0])}function Xe(a){return P(a)?a:Xe(a.g[a.g.length-1])}
function bf(a,b){b&&(b.yb=a);a&&(a.wa=b)}function Re(a,b){for(var c=b.length,d=0,e=We(a),f=e;0<c;){var h=768<=c?511:257<=c&&511>=c?c:257,k=b.slice(d,d+h);e.c=k.map(function(a){return a.key});e.A=k.map(function(a){return a.value});d+=h;c-=h;0<c&&(h=We(e.D),bf(e,h),e=h)}return f}function cf(a){var b=a[0],c=We(b.D);c.fb=b.fb+1;c.g=a;for(b=0;b<a.length;++b)a[b].B=c,0<b&&c.c.push(a[b].c[0]);return c}
function Se(a){var b=a,c=[];do c.push(b),b=b.wa;while(b);if(512>=c.length)b=cf(c);else{var d=c.length,e=0,b=We(a.D);for(b.fb=a.fb+2;0<d;){a=768<=d?511:257<=d&&511>=d?d:257;var f=c.slice(e,e+a),h=cf(f);h.B=b;b.g.length&&(b.c.push(f[0].c[0]),bf(b.g[b.g.length-1],h));b.g.push(h);e+=a;d-=a}}return b}m.get=function(a){var b=df(this,a);if(P(this)){var c=Te;this.D.Na(this.c[b],a)&&(c=c.concat(this.A[b]));return c}b=this.D.Na(this.c[b],a)?b+1:b;return this.g[b].get(a)};
m.bb=function(a){var b=df(this,a);return this.D.Na(this.c[b],a)?!0:P(this)?!1:this.g[b].bb(a)};m.remove=function(a,b){ef(this,a,-1,b);if(null==this.B){var c=this;1==this.g.length&&(c=this.g[0],c.B=null);return c}return this};function ff(a){return P(a)?a.c[0]:ff(a.g[0])}function gf(a){a.c=[];for(var b=1;b<a.g.length;++b)a.c.push(ff(a.g[b]))}
function ef(a,b,c,d){var e=df(a,b),f=P(a);if(!f){var h=a.D.Na(a.c[e],b)?e+1:e;if(ef(a.g[h],b,h,d))gf(a);else return!1}else if(!a.D.Na(a.c[e],b))return!1;if(a.c.length>e&&a.D.Na(a.c[e],b)){if(q(d)&&!a.D.Fa()&&f&&(h=a.A[e],d=Ke(h,d,void 0),0>d?d=!1:(h.splice(d,1),d=!0),d&&a.D.La().remove(b,1),a.A[e].length))return!1;a.c.splice(e,1);f&&(f=a.D.Fa()?1:a.A[e].length,a.A.splice(e,1),a.D.La().remove(b,f))}if(256>a.c.length&&null!=a.B){a:{b=null;if(a.wa&&256<a.wa.c.length)b=a.wa,e=d=0,f=a.c.length+1;else if(a.yb&&
256<a.yb.c.length)b=a.yb,d=a.yb.c.length-1,e=P(a)?d:d+1,f=0;else{b=!1;break a}a.c.splice(f,0,b.c[d]);b.c.splice(d,1);d=P(a)?a.A:a.g;h=null;P(a)?h=b.A:(h=b.g,h[e].B=a);d.splice(f,0,h[e]);h.splice(e,1);P(b)||(gf(b),gf(a));b=!0}b||hf(a,c)}return!0}
function hf(a,b){var c,d,e;a.wa&&511>a.wa.c.length?(c=a.wa,e=d=0):a.yb&&(c=a.yb,d=c.c.length,e=P(c)?c.A.length:c.g.length);d=[d,0].concat(a.c);Array.prototype.splice.apply(c.c,d);d=null;P(a)?d=a.A:(d=a.g,d.forEach(function(a){a.B=c}));d=[e,0].concat(d);Array.prototype.splice.apply(P(c)?c.A:c.g,d);bf(a.yb,a.wa);P(c)||gf(c);-1!=b&&(a.B.c.splice(b,1),a.B.g.splice(b,1))}
m.ub=function(a,b,c){var d=df(this,a);if(P(this)){if(this.D.Na(this.c[d],a)){if(c)this.D.La().remove(a,this.D.Fa()?1:this.A[d].length),this.A[d]=this.D.Fa()?b:[b];else{if(this.D.Fa())throw new D(201);if(!Me(this.A[d],b))throw new D(109);}this.D.La().add(a,1);return this}this.c.splice(d,0,a);this.A.splice(d,0,this.D.Fa()?b:[b]);this.D.La().add(a,1);512==this.c.length?(d=We(this.D),a=We(this.D),a.fb=1,a.c=[this.c[256]],a.g=[this,d],a.B=this.B,this.B=a,d.c=this.c.splice(256),d.A=this.A.splice(256),d.B=
a,bf(d,this.wa),bf(this,d),d=a):d=this;return d}d=this.D.Na(this.c[d],a)?d+1:d;a=this.g[d].ub(a,b,c);P(a)||1!=a.c.length||(this.c.splice(d,0,a.c[0]),a.g[1].B=this,a.g[0].B=this,this.g.splice(d,1,a.g[1]),this.g.splice(d,0,a.g[0]));return 512==this.c.length?jf(this):this};function jf(a){var b=We(a.D),c=We(a.D);b.B=a.B;b.fb=a.fb+1;b.c=[a.c[256]];b.g=[a,c];a.c.splice(256,1);c.B=b;c.fb=a.fb;c.c=a.c.splice(256);c.g=a.g.splice(257);c.g.forEach(function(a){a.B=c});a.B=b;bf(c,a.wa);bf(a,c);return b}
function df(a,b){for(var c=0,d=a.c.length;c<d;){var e=c+d>>1;a.D.Rd(a.c[e],b)?c=e+1:d=e}return c}function Ve(a,b){if(!P(a)){var c=df(a,b);a.D.Na(a.c[c],b)&&c++;return Ve(a.g[c],b)}return a}
m.Wa=function(a,b,c){function d(a){return a[0]?a[1]?0:1:-1}var e=this.D.mc(),f=0,h=this.c.length-1,k=this.c,n=d(e.pb(k[f],a)),z=d(e.pb(k[h],a));if(1!=n&&(-1!=n||-1!=z)){var ea=function(a,b){var c=a+b>>1;return c==a?c+1:c},la=function(b,c,f){if(b>=c)return 0==f?c:-1;var h=d(e.pb(k[b],a));if(0==h)return b;if(1==h)return-1;h=ea(b,c);if(h==c)return 0==f?c:-1;var n=d(e.pb(k[h],a));return 0==n?la(b,h,n):-1==n?la(h+1,c,f):la(b+1,h,n)},Va=function(b,c){if(b>=c)return b;var f=d(e.pb(k[c],a));if(0==f)return c;
if(-1==f)return b;f=ea(b,c);if(f==c)return b;var h=d(e.pb(k[f],a));return 0==h?Va(f,c):1==h?Va(b,f-1):-1};0!=n&&(f=la(f+1,h,z));-1!=f&&(h=Va(f,h),-1!=h&&h>=f&&kf(this,b,c,f,h+1))}};function kf(a,b,c,d,e){for(;d<e&&(b.reverse||!(b.count>=b.V));++d)if(a.D.Fa())!b.reverse&&b.M?b.M--:c[b.count++]=a.A[d];else for(var f=0;f<a.A[d].length&&b.count<c.length;++f)!b.reverse&&b.M?b.M--:c[b.count++]=a.A[d][f]}
m.fill=function(a,b){if(P(this))for(var c=0;c<this.A.length&&0<a.count;++c)if(0<a.offset){if(a.offset-=this.D.Fa()?1:this.A[c].length,0>a.offset)for(var d=this.A[c].length+a.offset;d<this.A[c].length&&0<a.count;++d)b[a.ge++]=this.A[c][d],a.count--}else if(this.D.Fa())b[a.ge++]=this.A[c],a.count--;else for(d=0;d<this.A[c].length&&0<a.count;++d)b[a.ge++]=this.A[c][d],a.count--;else for(c=0;c<this.g.length&&0<a.count;++c)this.g[c].fill(a,b)};
function Ze(a,b){for(var c=b.La(),d=a.map(function(a){var d=new $e(a.id(),b);d.c=a.o[0];d.A=a.o[1];d.c.forEach(function(a,e){c.add(a,b.Fa()?1:d.A[e].length)});return d}),e=0;e<d.length-1;++e)bf(d[e],d[e+1]);return 1<d.length?Se(d[0]):d[0]};function mf(a){if(1==a.f.length)return new nf(a.f[0].hb);a=a.f.map(function(a){return a.hb});return new of(a)}function nf(a){this.Xc=0==a?pf:qf;this.Sd=0==a?function(a){return null!=a?a.reverse():null}:function(a){return a||null};this.Yd=0==a?rf:sf}t(nf,oc);function qf(a,b){return a>b?1:a<b?-1:0}function pf(a,b){return qf(b,a)}function sf(a,b){return Zc(a,b)}function rf(a,b){return Zc(b,a)}m=nf.prototype;
m.pb=function(a,b){var c=this.Sd(b),d=[null===c.b,null===c.s];if(!d[0]){var e=this.Xc(a,c.b);d[0]=c.ca?1==e:-1!=e}d[1]||(e=this.Xc(a,c.s),d[1]=c.ma?-1==e:1!=e);return d};m.compare=function(a,b){return this.Xc(a,b)};m.min=function(a,b){return a<b?1:a==b?0:-1};m.max=function(a,b){return a>b?1:a==b?0:-1};m.Md=function(a,b){var c=this.pb(a,b);return c[0]&&c[1]};m.bf=function(a){return a.filter(function(a){return null!==a}).sort(function(a,c){return this.Yd(a,c)}.bind(this))};m.Nd=function(a){return fa(this.Sd(a).b)};
m.od=function(a){a=this.Sd(a);return[a.b,a.s]};m.toString=function(){return this.Xc==pf?"SimpleComparator_DESC":"SimpleComparator_ASC"};function of(a){this.Ja=a.map(function(a){return new nf(a)})}t(of,oc);function tf(a,b,c,d){for(var e=0,f=0;f<a.Ja.length&&0==e;++f)e=d(a.Ja[f],b[f],c[f]);return e}m=of.prototype;m.compare=function(a,b){return tf(this,a,b,function(a,b,e){return a.compare(b,e)})};m.min=function(a,b){return tf(this,a,b,function(a,b,e){return a.min(b,e)})};
m.max=function(a,b){return tf(this,a,b,function(a,b,e){return a.max(b,e)})};m.pb=function(a,b){for(var c=[!0,!0],d=0;d<this.Ja.length&&(c[0]||c[1]);++d){var e=this.Ja[d].pb(a[d],b[d]);c[0]=c[0]&&e[0];c[1]=c[1]&&e[1]}return c};m.Md=function(a,b){for(var c=!0,d=0;d<this.Ja.length&&c;++d)c=this.Ja[d].Md(a[d],b[d]);return c};
m.bf=function(a){var b=a.filter(function(a){return a.every(ga)});a=Array(this.Ja.length);for(var c=0;c<a.length;c++)a[c]=b.map(function(a){return a[c]});a.forEach(function(a,b){a.sort(function(a,c){return this.Ja[b].Yd(a,c)}.bind(this))},this);b=Array(b.length);for(c=0;c<b.length;c++)b[c]=a.map(function(a){return a[c]});return b.sort(function(a,b){for(var c=0,h=0;h<this.Ja.length&&0==c;++h)c=this.Ja[h].Yd(a[h],b[h]);return c}.bind(this))};m.Nd=function(a){return this.Ja[0].Nd(a[0])};
m.od=function(a){var b=a.map(function(a,b){return this.Ja[b].od(a)[0]},this);a=a.map(function(a,b){return this.Ja[b].od(a)[1]},this);return[b,a]};function uf(a){this.ea=a;this.gb=C();this.Lc=new Oe;this.lb=new Oe}m=uf.prototype;m.getName=function(){return this.ea.getName()};m.add=function(a,b){null===a?(this.gb.add(b),this.Lc.add(a,1)):this.ea.add(a,b)};m.set=function(a,b){null===a?(this.gb.clear(),this.Lc.clear(),this.add(a,b)):this.ea.set(a,b)};m.remove=function(a,b){null===a?b?(this.gb.delete(b),this.Lc.remove(a,1)):(this.gb.clear(),this.Lc.clear()):this.ea.remove(a,b)};m.get=function(a){return null===a?dc(this.gb):this.ea.get(a)};
m.Yc=function(a){return this.ea.Yc(a)};m.La=function(){Pe(this.lb,[this.ea.La(),this.Lc]);return this.lb};m.Wa=function(a,b,c,d){b=this.ea.Wa(a,b,c,d);return null!=a?b:b.concat(dc(this.gb))};m.clear=function(){this.gb.clear();this.ea.clear()};m.bb=function(a){return null===a?0!=this.gb.size:this.ea.bb(a)};m.min=function(){return this.ea.min()};m.max=function(){return this.ea.max()};m.Ha=function(){return[new y(-2,dc(this.gb))].concat(this.ea.Ha())};m.mc=function(){return this.ea.mc()};
function vf(a,b){for(var c=-1,d=0;d<b.length;++d)if(-2==b[d].id()){c=d;break}if(-1==c)throw new D(102);var d=b[c].o,e=b.slice(0);e.splice(c,1);var c=a(e),f=new uf(c);d.forEach(function(a){f.gb.add(a)});return f}m.Fa=function(){return this.ea.Fa()};function wf(a){this.w=a;this.kb=C();this.S=new nf(1)}m=wf.prototype;m.getName=g("w");m.add=function(a){if("number"!=typeof a)throw new D(103);this.kb.add(a)};m.set=function(a,b){this.add(a,b)};m.remove=function(a){this.kb.delete(a)};m.get=function(a){return this.bb(a)?[a]:[]};m.min=function(){return this.Cc(this.S.min.bind(this.S))};m.max=function(){return this.Cc(this.S.max.bind(this.S))};
m.Cc=function(a){if(0==this.kb.size)return null;var b=dc(this.kb).reduce(function(b,d){return null===b||1==a(d,b)?d:b},null);return[b,[b]]};m.Yc=function(){return this.kb.size};m.Wa=function(a,b,c,d){var e=a||[Wc()];a=dc(this.kb).filter(function(a){return e.some(function(b){return this.S.Md(a,b)},this)},this);return Ne(a,b,c,d)};m.clear=function(){this.kb.clear()};m.bb=function(a){return this.kb.has(a)};m.Ha=function(){return[new y(0,dc(this.kb))]};m.mc=g("S");
function xf(a,b){var c=new wf(a);b[0].o.forEach(function(a){c.add(a,a)});return c}m.Fa=l(!0);m.La=function(){var a=new Oe;a.na=this.kb.size;return a};function yf(a){this.h=a;this.Ia=a.i(Qb);this.C=a.i(Tb);this.ba=a.i(Rb)}yf.prototype.Da=function(a){var b=a.ra(),c=function(){if(0==b.length)return w();var a=b.shift();return(a.xb()?zf(this,a):Af(this,a)).then(c)}.bind(this);return c()};function Af(a,b){var c=new Oc(a.h,C([b])),c=a.Ia.zb(0,c),d=c.G(b.getName(),b.Jb.bind(b)).get([]).then(function(a){this.ba.rd(b.getName(),a);Bf(this,b,a)}.bind(a));c.ia();return d}
function Bf(a,b,c){var d=a.C.gc.get(b.getName())||[];c.forEach(function(a){d.forEach(function(b){var c=a.Cb(b.getName());b.add(c,a.id())})})}function zf(a,b){var c=new Oc(a.h,C([b])),d=a.Ia.zb(0,c),c=d.G(b.getName(),b.Jb).get([]).then(function(a){this.ba.rd(b.getName(),a)}.bind(a)),e=b.va().map(function(a){return Cf(this,a,d)},a).concat(Df(a,b,d));d.ia();return bb(e.concat(c))}
function Cf(a,b,c){c=c.G(b.l(),pb,1);var d=mf(b);return c.get([]).then(function(a){if(1<a.length){if(Ef(b)){var c=Ye.bind(void 0,d,b.l(),b.Ac);a=vf(c,a.slice(1))}else a=Ye(d,b.l(),b.Ac,a.slice(1));this.C.set(b.Mc,a)}}.bind(a))}function Df(a,b,c){return c.G(se(b),pb,1).get([]).then(function(a){1<a.length&&(a=xf(se(b),a.slice(1)),this.C.set(b.getName(),a))}.bind(a))};function Ff(){this.aa=A();this.gc=A()}Ff.prototype.Da=function(a){a.ra().forEach(function(a){var c=[];this.gc.set(a.getName(),c);var d=se(a);if(null===this.get(d)){var e=new wf(d);c.push(e);this.aa.set(d,e)}a.va().forEach(function(a){var b;b=mf(a);b=new Qe(a.l(),b,a.Ac);b=Ef(a)?new uf(b):b;c.push(b);this.aa.set(a.l(),b)},this)},this);return w()};Ff.prototype.get=function(a){return this.aa.get(a)||null};
Ff.prototype.set=function(a,b){var c=this.gc.get(a)||null;null===c&&(c=[],this.gc.set(a,c));for(var d=null,e=0;e<c.length;e++)if(c[e].getName()==b.getName()){d=e;break}null!==d&&0<c.length?c.splice(d,1,b):c.push(b);this.aa.set(b.getName(),b)};function Gf(a){this.fc=[];q(a)&&this.add(a)}Gf.prototype.toString=function(){return this.fc.map(function(a){return a.toString()}).join(",")};Gf.prototype.bb=function(a){return this.fc.some(function(b){return b.contains(a)})};Gf.prototype.Bb=g("fc");
Gf.prototype.add=function(a){if(0!=a.length)if(a=this.fc.concat(a),1==a.length)this.fc=a;else{a.sort(Zc);for(var b=[],c=a[0],d=1;d<a.length;++d)if(Uc(c,a[d])){var e=a[d],f=Wc();if(null!==c.b&&null!==e.b){var h=Vc(c.b,e.b,!0);1!=h?(f.b=c.b,f.ca=0!=h?c.ca:c.ca&&e.ca):(f.b=e.b,f.ca=e.ca)}null!==c.s&&null!==e.s&&(h=Vc(c.s,e.s,!1),-1!=h?(f.s=c.s,f.ma=0!=h?c.ma:c.ma&&e.ma):(f.s=e.s,f.ma=e.ma));c=f}else b.push(c),c=a[d];b.push(c);this.fc=b}};
function Jf(a,b){var c=[];a.Bb().map(function(a){return b.Bb().map(function(b){var c;if(Uc(a,b)){c=Wc();var h=Vc(a.b,b.b,!0),h=0==h?a.ca?a:b:-1!=h?a:b;c.b=h.b;c.ca=h.ca;null===a.s||null===b.s?b=null===a.s?b:a:(h=Vc(a.s,b.s,!1),b=0==h?a.ma?a:b:-1==h?a:b);c.s=b.s;c.ma=b.ma}else c=null;return c})}).forEach(function(a){c=c.concat(a)});return new Gf(c.filter(function(a){return null!==a}))};function Kf(a,b){var c=[],d=null,e=null;yd(a,function(a){var h=b(a);null==a.getParent()?e=h:L(d,h);var k=a.getParent();null!==k&&K(k).length==K(d).length&&(k=c.indexOf(d),-1!=k&&c.splice(k,1));1<K(a).length&&c.push(h);d=null===a.g?c[c.length-1]:h});return e}function Lf(a){return Mf(a,function(a){return null===a.g})}
function Nf(a){var b=a.getParent(),c=0;null!==b&&(c=K(b).indexOf(a),b.removeChild(a));var d=K(a).slice();d.forEach(function(d,f){a.removeChild(d);null===b||vd(b,d,c+f)});return{parent:b,children:d}}function Of(a,b){K(a).slice().forEach(function(c){a.removeChild(c);L(b,c)});L(a,b)}function Pf(a){var b=ud(a,0);Nf(a);Of(b,a);return b}
function Qf(a,b,c){var d=ud(a,0),e=K(d).slice();if(!e.some(function(a){return b(a)}))return a;Nf(a);e.forEach(function(e,h){if(b(e)){var k=c(a);wd(d,h);L(k,e);vd(d,k,h)}});return d}function Rf(a,b,c,d){var e=a.getParent();null!==e&&(a=K(e).indexOf(a),wd(e,a),vd(e,c,a));K(b).slice().forEach(function(a){b.removeChild(a);L(d,a)});return c}function Mf(a,b,c){function d(a){b(a)&&e.push(a);null!=c&&c(a)||K(a).forEach(d)}var e=[];d(a);return e}
function Sf(a,b){var c=b||function(a){return a.toString()+"\n"},d="";yd(a,function(a){for(var b=0;b<td(a);b++)d+="-";d+=c(a)});return d};function Tf(a){zd.call(this);this.Pb=a;this.Xa=!1}t(Tf,zd);m=Tf.prototype;m.Hb=function(){return Kf(this,function(a){if(a instanceof Tf){var b=new Tf(a.Pb);b.Xa=a.Xa;a=a.U();b.oa=a;return b}return a.Hb()})};m.cb=function(a){var b=a||[];yd(this,function(a){a!=this&&a.cb(b)}.bind(this));a=C(b);return dc(a)};m.qd=function(a){this.Xa!=a&&(this.Xa=a,this.Pb="and"==this.Pb?"or":"and",K(this).forEach(function(b){return b.qd(a)}))};
m.eval=function(a){var b=K(this).map(function(b){return b.eval(a)});return Uf(this,b)};function Uf(a,b){return"and"==a.Pb?ed(b):fd(b)}m.toString=function(){return"combined_pred_"+this.Pb.toString()};function Vf(){this.W=A();this.size=0}m=Vf.prototype;m.has=function(a){return this.W.has(a)};m.set=function(a,b){var c=this.W.get(a)||null;null===c&&(c=C(),this.W.set(a,c));c.has(b)||(c.add(b),this.size++);return this};m.rd=function(a,b){var c=this.W.get(a)||null;null===c&&(c=C(),this.W.set(a,c));b.forEach(function(a){c.has(a)||(c.add(a),this.size++)},this);return this};
m.delete=function(a,b){var c=this.W.get(a,null);if(null===c)return!1;var d=c.delete(b);d&&(--this.size,0==c.size&&this.W.delete(a));return d};m.get=function(a){a=this.W.get(a)||null;return null===a?null:dc(a)};m.clear=function(){this.W.clear();this.size=0};m.keys=function(){return Hb(this.W)};m.values=function(){var a=[];this.W.forEach(function(b){a.push.apply(a,dc(b))});return a};function Wf(a,b,c){zd.call(this);this.fa=a;this.la=b;this.F=c;this.Td=null;a=ld.vc();this.qc=rd(a,this.fa.H(),this.F);this.Sf=a.He.get(this.fa.H())||null}t(Wf,zd);m=Wf.prototype;m.Hb=function(){var a=new Wf(this.fa,this.la,this.F),b=this.U();a.oa=b;return a};m.cb=function(a){return null!=a?(a.push(this.fa),a.push(this.la),a):[this.fa,this.la]};
m.reverse=function(){var a=this.F;switch(this.F){case "gt":a="lt";break;case "lt":a="gt";break;case "gte":a="lte";break;case "lte":a="gte"}return new Wf(this.la,this.fa,a)};m.eval=function(a){var b=a.entries.filter(function(a){var b=G(a,this.fa);a=G(a,this.la);return this.qc(b,a)},this);return new E(b,F(a))};m.toString=function(){return"join_pred("+this.fa.l()+" "+this.F+" "+this.la.l()+")"};
function Xf(a,b,c){var d=null,e=null;-1!=F(b).indexOf(H(a.fa.G()))?(d=b,e=c):(d=c,e=b);if(d.entries.length>e.entries.length){a:{b=a.fa;a.fa=a.la;a.la=b;b=a.F;switch(a.F){case "gt":b="lt";break;case "lt":b="gt";break;case "gte":b="lte";break;case "lte":b="gte";break;default:break a}a.F=b;a.qc=rd(ld.vc(),a.fa.H(),a.F)}return[e,d]}return[d,e]}function Yf(a){var b={};a.cb().forEach(function(a){b[a.getName()]=null});return b}
function Zf(a,b,c){null===a.Td&&(a.Td=Yf(a.la.G()));var d=new hd(new y(-1,a.Td),!1);return kd(b,c,d,[H(a.la.G())])}
function $f(a,b,c,d){var e=[b,c];d||(e=Xf(a,b,c));b=e[0];c=e[1];var e=b,f=c,h=a.fa,k=a.la;d&&(e=c,f=b,h=a.la,k=a.fa);var n=new Vf,z=[];e.entries.forEach(function(a){var b=String(G(a,h));n.set(b,a)});var ea=F(e),la=F(f);f.entries.forEach(function(a){var b=G(a,k),c=String(b);null!==b&&n.has(c)?n.get(c).forEach(function(b){b=kd(a,la,b,ea);z.push(b)}):d&&z.push(Zf(this,a,la))}.bind(a));a=F(b).concat(F(c));return new E(z,a)}
function ag(a,b,c,d,e){function f(a,b){var c=new hd(b,1<ea.length),c=kd(a,la,c,ea);z.push(c)}var h=d.Kf.G(),k=b,n=c;-1!=F(b).indexOf(H(h))&&(k=c,n=b);var z=[],ea=F(n),la=F(k);k.entries.forEach(function(a){var b=this.Sf(G(a,d.Yf)),b=d.index.get(b);0!=b.length&&(d.index.Fa()?f(a,e.get(b[0])):Je(e,b).forEach(f.bind(null,a)))},a);a=F(k).concat(F(n));return new E(z,a)};function bg(a,b,c){return null===b?new Bd(a,b,c):q(b.l)?new Wf(a,b,c):new Bd(a,b,c)};var cg={};r("lf.schema.DataStoreType",cg);cg.INDEXED_DB=0;cg.MEMORY=1;cg.LOCAL_STORAGE=2;cg.FIREBASE=3;cg.WEB_SQL=4;cg.OBSERVABLE_STORE=5;function dg(a,b,c,d){this.Mc=a;this.name=b;this.Ac=c;this.f=d}dg.prototype.l=function(){return this.Mc+"."+this.name};function Ef(a){return a.f.some(function(a){return a.ha.zc()})}function Q(a,b,c,d){this.w=a;this.ka=c;this.J=b;this.ld=d;this.$a=null}r("lf.schema.Table",Q);Q.prototype.getName=g("w");Q.prototype.getName=Q.prototype.getName;Q.prototype.Va=g("$a");
function H(a){return a.$a||a.w}Q.prototype.kc=function(a){var b=new this.constructor(this.w);b.$a=a;b.ig=this.ig;return b};Q.prototype.as=Q.prototype.kc;Q.prototype.createRow=Q.prototype.qb;Q.prototype.deserializeRow=Q.prototype.Jb;Q.prototype.va=g("ka");Q.prototype.getIndices=Q.prototype.va;Q.prototype.cb=g("J");Q.prototype.getColumns=Q.prototype.cb;Q.prototype.getConstraint=Q.prototype.Ab;Q.prototype.xb=g("ld");Q.prototype.persistentIndex=Q.prototype.xb;function se(a){return a.w+".#"};function R(a,b){this.child=a;this.Gb=b;this.$a=null}m=R.prototype;m.getName=function(){return this.Gb+"("+this.child.getName()+")"};m.l=function(){return this.Gb+"("+this.child.l()+")"};m.G=function(){return this.child.G()};m.toString=function(){return this.l()};m.H=function(){return this.child.H()};m.Va=g("$a");m.va=function(){return[]};m.ua=l(null);m.zc=l(!1);m.kc=function(a){this.$a=a;return this};R.prototype.as=R.prototype.kc;
function eg(a){for(var b=[a];a instanceof R;)b.push(a.child),a=a.child;return b}function fg(a){this.$a=a||null;this.O=new Q("#UnknownTable",[],[],!1)}m=fg.prototype;m.getName=l("*");m.l=function(){return this.getName()};m.toString=function(){return this.l()};m.G=g("O");m.H=l(4);m.Va=g("$a");m.va=function(){return[]};m.ua=l(null);m.zc=l(!1);r("lf.fn.avg",function(a){return new R(a,"AVG")});function gg(a){return new R(a||new fg,"COUNT")}r("lf.fn.count",gg);function hg(a){return new R(a,"DISTINCT")}r("lf.fn.distinct",hg);r("lf.fn.max",function(a){return new R(a,"MAX")});r("lf.fn.min",function(a){return new R(a,"MIN")});r("lf.fn.stddev",function(a){return new R(a,"STDDEV")});r("lf.fn.sum",function(a){return new R(a,"SUM")});r("lf.fn.geomean",function(a){return new R(a,"GEOMEAN")});function S(a,b){J.call(this);this.Cf=b}t(S,J);S.prototype.exec=function(a,b){switch(this.Cf){case 1:return ig(this,a,b);case 0:return jg(this,a,b);default:return kg(this,a,b)}};S.prototype.toString=l("dummy_node");S.prototype.Nc=function(){return this.toString()};function kg(a,b,c){return new v(function(a){a(this.da(b,[],c))}.bind(a))}function ig(a,b,c){return ud(a,0).exec(b,c).then(function(a){return this.da(b,a,c)}.bind(a))}
function jg(a,b,c){var d=K(a).map(function(a){return a.exec(b,c)});return bb(d).then(function(a){var d=[];a.forEach(function(a){for(var b=0;b<a.length;++b)d.push(a[b])});return this.da(b,d,c)}.bind(a))};function lg(a){S.call(this,0,1);this.oe=a}t(lg,S);lg.prototype.toString=function(){return"aggregation("+this.oe.map(function(a){return a.l()}).toString()+")"};lg.prototype.da=function(a,b){b.forEach(function(a){mg(new ng(a,this.oe))},this);return b};function ng(a,b){this.Ga=a;this.J=b}
function mg(a){a.J.forEach(function(a){a=eg(a).reverse();for(var c=1;c<a.length;c++){var d=a[c],e=eg(d).slice(-1)[0],f=d.child instanceof R?bd(this.Ga,d.child):this.Ga;if(null!==f.Ua&&f.Ua.has(d.l()))break;f=og(d.Gb,f,e);e=this.Ga;null===e.Ua&&(e.Ua=A());e.Ua.set(d.l(),f)}},a)}
function og(a,b,c){var d=null;switch(a){case "MIN":d=pg(b,c,function(a,b){return b<a?b:a});break;case "MAX":d=pg(b,c,function(a,b){return b>a?b:a});break;case "DISTINCT":d=qg(b,c);break;case "COUNT":d=rg(b,c);break;case "SUM":d=sg(b,c);break;case "AVG":a=rg(b,c);0<a&&(d=sg(b,c)/a);break;case "GEOMEAN":d=tg(b,c);break;default:d=ug(b,c)}return d}function pg(a,b,c){return a.entries.reduce(function(a,e){var f=G(e,b);return null===f?a:null===a?f:c(a,f)},null)}
function rg(a,b){return b instanceof fg?a.entries.length:a.entries.reduce(function(a,d){return a+(fa(G(d,b))?0:1)},0)}function sg(a,b){return pg(a,b,function(a,b){return b+a})}function ug(a,b){var c=[];a.entries.forEach(function(a){a=G(a,b);null===a||c.push(a)});return 0==c.length?null:yb.apply(null,c)}function tg(a,b){var c=0,d=a.entries.reduce(function(a,d){var h=G(d,b);if(0==h||null===h)return a;c++;return a+Math.log(h)},0);return 0==c?null:Math.pow(Math.E,d/c)}
function qg(a,b){var c=A();a.entries.forEach(function(a){var e=G(a,b);c.set(e,a)});return new E(B(c),F(a))};function vg(a,b){this.za=a;this.$=b}vg.prototype.eb=g("za");vg.prototype.Z=g("$");function wg(){J.call(this)}t(wg,J);function xg(a,b){J.call(this);this.table=a;this.values=b}t(xg,wg);function yg(a,b){xg.call(this,a,b)}t(yg,xg);function zg(a){J.call(this);this.table=a}t(zg,wg);zg.prototype.toString=function(){return"delete("+this.table.getName()+")"};function Ag(a,b){J.call(this);this.table=a;this.ie=b}t(Ag,wg);
Ag.prototype.toString=function(){var a=[];this.ie&&(a=this.ie.map(function(a){return a.N.getName()},this));return"update("+this.table.getName()+", ["+a.join(",")+"])"};function Bg(a){J.call(this);this.I=a}t(Bg,wg);Bg.prototype.toString=function(){return"select("+this.I.toString()+")"};function Cg(a){J.call(this);this.table=a}t(Cg,wg);Cg.prototype.toString=function(){var a="table_access("+this.table.getName();null===this.table.Va()||(a+=" as "+this.table.Va());return a+")"};
function Dg(){J.call(this)}t(Dg,wg);Dg.prototype.toString=l("cross_product");function Eg(a,b){J.call(this);this.f=a;this.Lb=b}t(Eg,wg);Eg.prototype.toString=function(){var a="project("+this.f.toString();if(null!==this.Lb)var b=this.Lb.map(function(a){return a.l()}).join(", "),a=a+(", groupBy("+b+")");return a+")"};function Fg(a){J.call(this);this.L=a}t(Fg,wg);Fg.prototype.toString=function(){return"order_by("+Kd(this.L)+")"};function Gg(a){J.call(this);this.f=a}t(Gg,wg);
Gg.prototype.toString=function(){return"aggregation("+this.f.toString()+")"};function Hg(a){J.call(this);this.f=a}t(Hg,wg);Hg.prototype.toString=function(){return"group_by("+this.f.toString()+")"};function Ig(a){J.call(this);this.V=a}t(Ig,wg);Ig.prototype.toString=function(){return"limit("+this.V+")"};function Jg(a){J.call(this);this.M=a}t(Jg,wg);Jg.prototype.toString=function(){return"skip("+this.M+")"};function Kg(a,b){J.call(this);this.I=a;this.Nb=b}t(Kg,wg);
Kg.prototype.toString=function(){return"join(type: "+(this.Nb?"outer":"inner")+", "+this.I.toString()+")"};function Lg(){};function Mg(){}t(Mg,Lg);Mg.prototype.jb=function(a){this.Y=a;this.Sa(this.Y);return this.Y};Mg.prototype.Sa=function(a){if(a instanceof Bg){var b=Ng(this,a.I),b=Og(this,b);Rf(a,a,b[0],b[1]);a==this.Y&&(this.Y=b[0]);a=b[0]}K(a).forEach(function(a){this.Sa(a)},this)};function Ng(a,b){if(0==K(b).length||"and"!=b.Pb)return[b];var c=K(b).slice().map(function(a){b.removeChild(a);return Ng(this,a)},a);return Ca(c)}
function Og(a,b){var c=null,d=null;b.map(function(a,b){var h=new Bg(a);0==b?c=h:L(d,h);d=h},a);return[c,d]};function Pg(){}t(Pg,Lg);Pg.prototype.jb=function(a,b){if(3>b.b.length)return a;this.Y=a;this.Sa(this.Y);return this.Y};Pg.prototype.Sa=function(a){if(a instanceof Dg)for(;2<K(a).length;){for(var b=new Dg,c=0;2>c;c++){var d=wd(a,0);L(b,d)}vd(a,b,0)}K(a).forEach(function(a){this.Sa(a)},this)};function Qg(){S.call(this,0,0)}t(Qg,S);Qg.prototype.toString=l("cross_product");Qg.prototype.da=function(a,b){for(var c=b[0],d=b[1],e=[],f=F(c),h=F(d),k=0;k<c.entries.length;k++)for(var n=0;n<d.entries.length;n++){var z=kd(c.entries[k],f,d.entries[n],h);e.push(z)}c=F(c).concat(F(d));return[new E(e,c)]};function Rg(a,b){Nd.call(this,a,b);this.Aa=a.i(Vb);this.Db=a.i(Wb)}t(Rg,Nd);Rg.prototype.getPriority=l(2);Rg.prototype.Wd=function(a){0==this.H()?Sg(this,a):this.Kc()};function Sg(a,b){a.nd.forEach(function(a,d){a instanceof Jd&&Qd(this.Db,a,b[d])},a)}Rg.prototype.Kc=function(){var a=Sd(this.Db,this.Z());0!=a.length&&(a=new Pd(this.global,a),Td(this.Aa,a))};function Tg(a){Ed.call(this,a)}t(Tg,Ed);Tg.prototype.Z=function(){var a=C();a.add(this.b);var b=this.ha.info();Ug(this.b.getName(),b.g).forEach(a.add.bind(a));return a};Tg.prototype.clone=function(){var a=new Tg(this.ha);Hd(a,this);a.b=this.b;return a};Tg.prototype.bind=function(a){Tg.Fb.bind.call(this,a);Id(this,a);return this};function Vg(a){Ed.call(this,a)}t(Vg,Ed);Vg.prototype.Z=function(){var a=C();a.add(this.Ea);var b=this.ha.info();Ug(this.Ea.getName(),b.Pe).forEach(a.add.bind(a));this.Xb&&Ug(this.Ea.getName(),b.g).forEach(a.add.bind(a));return a};Vg.prototype.clone=function(){var a=new Vg(this.ha);Hd(a,this);a.Ea=this.Ea;this.values&&(a.values=this.values instanceof I?this.values:this.values.slice());a.Xb=this.Xb;a.Yb=this.Yb;return a};
Vg.prototype.bind=function(a){Vg.Fb.bind.call(this,a);this.Yb&&(this.values=this.Yb instanceof I?a[this.Yb.ua()]:this.Yb.map(function(b){return b instanceof I?a[b.ua()]:b}));return this};function Wg(a){Ed.call(this,a)}t(Wg,Ed);Wg.prototype.Z=function(){var a=C();a.add(this.table);var b=this.set.map(function(a){return a.N.l()}),c=this.ha.info();Xg(c,b).forEach(a.add.bind(a));Yg(c,b).forEach(a.add.bind(a));return a};Wg.prototype.clone=function(){var a=new Wg(this.ha);Hd(a,this);a.table=this.table;a.set=this.set?this.set.slice():this.set;return a};Wg.prototype.bind=function(a){Wg.Fb.bind.call(this,a);this.set.forEach(function(b){-1!=b.Sc&&(b.value=a[b.Sc])});Id(this,a);return this};function Zg(a,b){if(null==b)return"NULL";switch(a){case 1:return b?1:0;case 3:case 4:return b;case 0:return"'"+rb(b)+"'";default:return"'"+b.toString()+"'"}}function $g(a,b){var c=a.Xb?"INSERT OR REPLACE":"INSERT",d=a.Ea.cb(),c=c+(" INTO "+a.Ea.getName()+"("),c=c+d.map(function(a){return a.getName()}).join(", "),c=c+") VALUES (";return a.values.map(function(a){var f=d.map(function(c){var d=a.o[c.getName()];return b?null!=d?"#":"NULL":Zg(c.H(),d)});return c+f.join(", ")+");"}).join("\n")}
function ah(a){switch(a){case "between":return"BETWEEN";case "eq":return"=";case "gte":return">=";case "gt":return">";case "in":return"IN";case "lte":return"<=";case "lt":return"<";case "match":return"LIKE";case "neq":return"<>";default:return"UNKNOWN"}}function bh(a,b,c,d){return a instanceof I?"?"+a.ua().toString():d?null!=a?"#":"NULL":"match"==b?"'"+a.toString()+"'":"in"==b?"("+a.map(function(a){return Zg(c,a)}).join(", ")+")":"between"==b?Zg(c,a[0])+" AND "+Zg(c,a[1]):Zg(c,a).toString()}
function ch(a,b){return K(a).map(function(a){return"("+dh(a,b)+")"}).join("and"==a.Pb?" AND ":" OR ")}function eh(a){return[a.fa.l(),ah(a.F),a.la.l()].join(" ")}function dh(a,b){if(a instanceof Bd){var c=a.N.l(),d=ah(a.F),e=bh(a.value,a.F,a.N.H(),b);return"="==d&&"NULL"==e?[c,"IS NULL"].join(" "):"<>"==d&&"NULL"==e?[c,"IS NOT NULL"].join(" "):[c,d,e].join(" ")}if(a instanceof Tf)return ch(a,b);if(a instanceof Wf)return eh(a);throw new D(357,typeof a);}
function fh(a,b){var c=dh(a,b);return c?" WHERE "+c:""}function gh(a,b){var c="UPDATE "+a.table.getName()+" SET ",c=c+a.set.map(function(a){var b=a.N.l()+" = ";return-1!=a.Sc?b+"?"+a.Sc.toString():b+Zg(a.N.H(),a.value).toString()}).join(", ");a.u&&(c+=fh(a.u,b));return c+";"}
function hh(a,b){var c="*";a.f.length&&(c=a.f.map(function(a){return a.Va()?a.l()+" AS "+a.Va():a.l()}).join(", "));c="SELECT "+c+" FROM ";null!=a.vb&&0!=a.vb.size?c+=ih(a,b):(c+=a.b.map(jh).join(", "),a.u&&(c+=fh(a.u,b)));if(a.L)var d=a.L.map(function(a){return a.N.l()+(0==a.hb?" DESC":" ASC")}).join(", "),c=c+(" ORDER BY "+d);a.ja&&(d=a.ja.map(function(a){return a.l()}).join(", "),c+=" GROUP BY "+d);a.V&&(c+=" LIMIT "+a.V.toString());a.M&&(c+=" SKIP "+a.M.toString());return c+";"}
function jh(a){return H(a)!=a.getName()?a.getName()+" AS "+H(a):a.getName()}function ih(a,b){for(var c=Mf(a.u,function(a){return a instanceof Wf}),d=c.map(eh),e=jh(a.b[0]),f=1;f<a.b.length;f++)var h=jh(a.b[f]),e=a.vb.has(c[d.length-f].U())?e+(" LEFT OUTER JOIN "+h):e+(" INNER JOIN "+h),e=e+(" ON ("+d[d.length-f]+")");c=ud(a.u,0);c instanceof Wf||(e+=" WHERE "+dh(c,b));return e}
function kh(a,b){var c=b||!1,d=a.a.clone();if(d instanceof Vg)return $g(d,c);if(d instanceof Tg){var e="DELETE FROM "+d.b.getName();d.u&&(e+=fh(d.u,c));return e+";"}if(d instanceof Wg)return gh(d,c);if(d instanceof Jd)return hh(d,c);throw new D(358,typeof d);};function T(a,b){this.global=a;this.hg=a.i(Ub);this.Aa=a.i(Vb);this.a=b}r("lf.query.BaseBuilder",T);T.prototype.exec=function(){try{this.ab()}catch(a){return Za(a)}return new v(function(a,c){var d=new Rg(this.global,[this.xc()]);Td(this.Aa,d).then(function(c){a($c(c[0]))},c)},this)};T.prototype.exec=T.prototype.exec;T.prototype.Ef=function(){var a=function(a){return a.Nc(this.a)+"\n"}.bind(this);return Sf(lh(this).eb(),a)};T.prototype.explain=T.prototype.Ef;
T.prototype.bind=function(a){this.a.bind(a);return this};T.prototype.bind=T.prototype.bind;T.prototype.og=function(a){return kh(this,a)};T.prototype.toSql=T.prototype.og;T.prototype.ab=aa();function lh(a){if(null==a.Qe){var b;b=a.hg;var c=a.a,d=b.Vf.create(c);b=b.eg.create(d,c);a.Qe=b}return a.Qe}T.prototype.xc=function(){return{context:this.a.clone(),Zd:lh(this)}};function mh(a){T.call(this,a,new Tg(a.i(Xb)))}t(mh,T);r("lf.query.DeleteBuilder",mh);mh.prototype.b=function(a){if(null!=this.a.b)throw new D(515);this.a.b=a;return this};mh.prototype.from=mh.prototype.b;mh.prototype.u=function(a){this.yd();this.a.u=a;return this};mh.prototype.where=mh.prototype.u;mh.prototype.yd=function(){if(null==this.a.b)throw new D(548);if(null!=this.a.u)throw new D(516);};mh.prototype.ab=function(){mh.Fb.ab.call(this);if(null==this.a.b)throw new D(517);};function nh(a,b){T.call(this,a,new Vg(a.i(Xb)));this.a.Xb=b||!1}t(nh,T);r("lf.query.InsertBuilder",nh);nh.prototype.ab=function(){nh.Fb.ab.call(this);var a=this.a;if(null==a.Ea||null==a.values)throw new D(518);if(a.Xb&&null===a.Ea.Ab().bd())throw new D(519);};nh.prototype.Ea=function(a){if(null!=this.a.Ea)throw new D(520);this.a.Ea=a;return this};nh.prototype.into=nh.prototype.Ea;
nh.prototype.values=function(a){if(null!=this.a.values)throw new D(521);a instanceof I||a.some(function(a){return a instanceof I})?this.a.Yb=a:this.a.values=a;return this};nh.prototype.values=nh.prototype.values;function oh(a){return ph("and",Array.prototype.slice.call(arguments))}r("lf.op.and",oh);r("lf.op.or",function(a){return ph("or",Array.prototype.slice.call(arguments))});function ph(a,b){var c=new Tf(a);b.forEach(function(a){L(c,a)});return c}r("lf.op.not",function(a){a.qd(!0);return a});function U(a,b){T.call(this,a,new Jd(a.i(Xb)));this.xe=this.td=!1;this.a.f=b;qh(this);rh(this)}t(U,T);r("lf.query.SelectBuilder",U);U.prototype.ab=function(){U.Fb.ab.call(this);var a=this.a;if(null==a.b)throw new D(522);if(q(a.Ob)&&!q(a.V)||q(a.Ub)&&!q(a.M))throw new D(523);null!=this.a.ja?sh(this):th(this)};function qh(a){var b=a.a.f.filter(function(a){return a instanceof R&&"DISTINCT"==a.Gb},a);if(0!=b.length&&(1!=b.length||1!=a.a.f.length))throw new D(524);}
function sh(a){var b=a.a.f.filter(function(a){return!(a instanceof R)}).map(function(a){return a.l()}),c=!1;if(0==a.a.ja.length||0==a.a.f.length)c=!0;else{var d=a.a.ja.map(function(a){return a.l()});(c=b.some(function(a){return-1==d.indexOf(a)}))||(c=a.a.ja.some(function(a){a=a.H();return 6==a||0==a}))}if(c)throw new D(525);}function th(a){var b=a.a.f.some(function(a){return a instanceof R},a);a=a.a.f.some(function(a){return!(a instanceof R)},a)||0==a.a.f.length;if(b&&a)throw new D(526);}
function rh(a){a.a.f.forEach(function(a){if(a instanceof R&&!uh(a.Gb,a.H()))throw new D(527,a.l());},a)}function vh(a,b){if(null==a.a.b)throw new D(b);}U.prototype.b=function(a){if(this.xe)throw new D(515);this.xe=!0;null==this.a.b&&(this.a.b=[]);this.a.b.push.apply(this.a.b,Array.prototype.slice.call(arguments));return this};U.prototype.from=U.prototype.b;U.prototype.u=function(a){vh(this,548);if(this.td)throw new D(516);this.td=!0;wh(this,a);return this};U.prototype.where=U.prototype.u;
function wh(a,b){if(null!=a.a.u){var c=oh(b,a.a.u);a.a.u=c}else a.a.u=b}U.prototype.Nf=function(a,b){vh(this,542);if(this.td)throw new D(547);this.a.b.push(a);wh(this,b);return this};U.prototype.innerJoin=U.prototype.Nf;U.prototype.Tf=function(a,b){vh(this,542);if(!(b instanceof Wf))throw new D(541);if(this.td)throw new D(547);this.a.b.push(a);null==this.a.vb&&(this.a.vb=C());var c=b;H(a)!=H(b.la.G())&&(c=b.reverse());this.a.vb.add(c.U());wh(this,c);return this};U.prototype.leftOuterJoin=U.prototype.Tf;
U.prototype.V=function(a){if(null!=(this.a.V||this.a.Ob))throw new D(528);if(a instanceof I)this.a.Ob=a;else{if(0>a)throw new D(531);this.a.V=a}return this};U.prototype.limit=U.prototype.V;U.prototype.M=function(a){if(null!=(this.a.M||this.a.Ub))throw new D(529);if(a instanceof I)this.a.Ub=a;else{if(0>a)throw new D(531);this.a.M=a}return this};U.prototype.skip=U.prototype.M;U.prototype.L=function(a,b){vh(this,549);null==this.a.L&&(this.a.L=[]);this.a.L.push({N:a,hb:null!=b?b:1});return this};
U.prototype.orderBy=U.prototype.L;U.prototype.ja=function(a){vh(this,549);if(null!=this.a.ja)throw new D(530);null==this.a.ja&&(this.a.ja=[]);this.a.ja.push.apply(this.a.ja,Array.prototype.slice.call(arguments));return this};U.prototype.groupBy=U.prototype.ja;function uh(a,b){switch(a){case "COUNT":case "DISTINCT":return!0;case "AVG":case "GEOMEAN":case "STDDEV":case "SUM":return 4==b||3==b;case "MAX":case "MIN":return 4==b||3==b||5==b||2==b}return!1}
U.prototype.clone=function(){var a=new U(this.global,this.a.f);a.a=this.a.clone();a.a.Wc=null;return a};U.prototype.clone=U.prototype.clone;function xh(a,b){T.call(this,a,new Wg(a.i(Xb)));this.a.table=b}t(xh,T);r("lf.query.UpdateBuilder",xh);xh.prototype.set=function(a,b){var c={Sc:b instanceof I?b.ua():-1,N:a,value:b};null!=this.a.set?this.a.set.push(c):this.a.set=[c];return this};xh.prototype.set=xh.prototype.set;xh.prototype.u=function(a){this.yd();this.a.u=a;return this};xh.prototype.where=xh.prototype.u;xh.prototype.yd=function(){if(null!=this.a.u)throw new D(516);};
xh.prototype.ab=function(){xh.Fb.ab.call(this);if(null==this.a.set)throw new D(532);if(this.a.set.some(function(a){return a.value instanceof I}))throw new D(501);};function yh(a){this.a=a;this.za=null}yh.prototype.dc=function(){null===this.za&&(this.za=this.$c());return this.za};function zh(a){yh.call(this,a)}t(zh,yh);zh.prototype.$c=function(){return this.a.Xb?new yg(this.a.Ea,this.a.values):new xg(this.a.Ea,this.a.values)};function Ah(a){yh.call(this,a)}t(Ah,yh);Ah.prototype.$c=function(){var a=new Ag(this.a.table,this.a.set),b=null!=this.a.u?new Bg(this.a.u.Hb()):null,c=new Cg(this.a.table);null===b?L(a,c):(L(b,c),L(a,b));return a};function Bh(a,b,c){this.za=a;this.$d=b;this.Sb=c}Bh.prototype.dc=function(){this.Sb.forEach(function(a){this.za=a.jb(this.za,this.$d)},this);return this.za};function Ch(a,b){yh.call(this,a);this.Sb=b}t(Ch,yh);Ch.prototype.$c=function(){var a=new zg(this.a.b),b=null!=this.a.u?new Bg(this.a.u.Hb()):null,c=new Cg(this.a.b);null===b?L(a,c):(L(b,c),L(a,b));return(new Bh(a,this.a,this.Sb)).dc()};function Dh(){}t(Dh,Lg);Dh.prototype.jb=function(a,b){if(2>b.b.length)return a;this.Y=a;this.Sa(this.Y,b);return this.Y};Dh.prototype.Sa=function(a,b){if(a instanceof Bg&&a.I instanceof Wf){var c=a.I.U(),d=ud(a,0);d instanceof Dg&&(c=null!=b.vb&&b.vb.has(c),c=new Kg(a.I,c),Rf(a,d,c,c),a==this.Y&&(this.Y=c),a=c)}K(a).forEach(function(a){this.Sa(a,b)},this)};function Eh(){this.Rc=C()}t(Eh,Lg);Eh.prototype.jb=function(a,b){this.Rc.clear();if(!q(b.u))return a;this.Y=a;this.Sa(this.Y);this.Rc.clear();return this.Y};Eh.prototype.Sa=function(a){if(Fh(a)){var b=a.I instanceof Bd?Gh(this,a):Hh(this,a);this.Rc.add(a);b==a&&(b=ud(a,0));null!==b&&(fa(b.getParent())&&(this.Y=b),Fh(b)&&!this.Rc.has(b)&&this.Sa(b))}else K(a).forEach(function(a){this.Sa(a)},this)};
function Ih(a,b,c){var d=b;if(ud(b,0)instanceof Bg)d=Pf(b),Ih(a,b,c);else if(Jh(b)){var e=[],d=Qf(b,c,function(a){a=new Bg(a.I);e.push(a);return a});e.forEach(function(a){Ih(this,a,c)},a)}return d}function Gh(a,b){var c=C([H(b.I.N.G())]),d=function(a){return Kh(this,a,c)}.bind(a);return Ih(a,b,d)}function Hh(a,b){var c=C([H(b.I.fa.G()),H(b.I.la.G())]),d=function(a){return Kh(this,a,c)}.bind(a);return Ih(a,b,d)}
function Kh(a,b,c){var d=C();Lf(b).forEach(function(a){d.add(H(a.table))},a);b instanceof Cg&&d.add(H(b.table));return ec(d,c)}function Fh(a){return a instanceof Bg&&!(a.I instanceof Tf)}function Jh(a){a=ud(a,0);return a instanceof Dg||a instanceof Kg};function Lh(a,b){yh.call(this,a);this.Sb=b;this.Ue=this.Le=this.af=this.Oe=this.pe=this.Ae=this.$e=this.ue=this.cf=null}t(Lh,yh);
Lh.prototype.$c=function(){Mh(this);2<=this.a.b.length&&(this.ue=new Dg);this.$e=null!=this.a.u?new Bg(this.a.u.Hb()):null;this.a.L&&(this.Oe=new Fg(this.a.L));null!=this.a.M&&0<this.a.M&&(this.af=new Jg(this.a.M));null!=this.a.V&&(this.Le=new Ig(this.a.V));null!=this.a.ja&&(this.Ae=new Hg(this.a.ja));Nh(this);this.Ue=new Eg(this.a.f||[],this.a.ja||null);var a=Oh(this);return(new Bh(a,this.a,this.Sb)).dc()};
function Oh(a){for(var b=[a.Le,a.af,a.Ue,a.Oe,a.pe,a.Ae,a.$e,a.ue],c=null,d=null,e=0;e<b.length;e++){var f=b[e];null!==f&&(null===d?d=f:L(b[c],f),c=e)}a.cf.forEach(function(a){L(b[c],a)});return d}function Mh(a){a.cf=a.a.b.map(function(a){return new Cg(a)},a)}function Nh(a){var b=a.a.f.filter(function(a){return a instanceof R});null!=a.a.L&&a.a.L.forEach(function(a){a.N instanceof R&&b.push(a.N)});0<b.length&&(a.pe=new Gg(b))};function Ph(){this.ee=[new Mg,new Pg,new Eh,new Dh];this.Ed=[new Mg]}Ph.prototype.create=function(a){var b=null;if(a instanceof Vg)b=new zh(a);else if(a instanceof Tg)b=new Ch(a,this.Ed);else if(a instanceof Jd)b=new Lh(a,this.ee);else if(a instanceof Wg)b=new Ah(a);else throw new D(513);b=b.dc();return new vg(b,a.Z())};function Qh(a){S.call(this,0,1);this.O=a}t(Qh,S);Qh.prototype.toString=function(){return"delete("+this.O.getName()+")"};Qh.prototype.da=function(a,b){var c=b[0].entries.map(function(a){return a.sa});a.remove(this.O,c);return[dd()]};function Rh(a,b){S.call(this,0,-1);this.table=b;this.C=a.i(Tb)}t(Rh,S);Rh.prototype.toString=function(){return"get_row_count("+this.table.getName()+")"};Rh.prototype.da=function(){var a=this.C.get(se(this.table)),b=new E([],[this.table.getName()]),c=gg(),a=a.La().na;null===b.Ua&&(b.Ua=A());b.Ua.set(c.l(),a);return[b]};function Sh(a,b){S.call(this,0,-1);this.ba=a.i(Rb);this.C=a.i(Tb);this.table=b}t(Sh,S);Sh.prototype.toString=function(){var a="table_access("+this.table.getName();null===this.table.Va()||(a+=" as "+this.table.Va());return a+")"};Sh.prototype.da=function(){var a=this.C.get(se(this.table)).Wa();return[gd(Je(this.ba,a),[H(this.table)])]};function Th(a){this.h=a}t(Th,Lg);Th.prototype.jb=function(a,b){this.Y=a;if(!this.zd(b))return a;var c=Mf(a,function(a){return a instanceof Sh})[0],d=new Rh(this.h,c.table);Rf(c,c,d,d);return this.Y};Th.prototype.zd=function(a){return 1==a.f.length&&1==a.b.length&&null==a.u&&null==a.V&&null==a.M&&null==a.ja?(a=a.f[0],a instanceof R&&"COUNT"==a.Gb&&a.child instanceof fg):!1};function Uh(a){S.call(this,0,1);this.ze=a}t(Uh,S);Uh.prototype.toString=function(){return"groupBy("+this.ze.map(function(a){return a.l()}).toString()+")"};Uh.prototype.da=function(a,b){return Vh(this,b[0])};function Vh(a,b){var c=new Vf,d=function(a){return this.ze.map(function(b){return G(a,b)},this).join(",")}.bind(a);b.entries.forEach(function(a){c.set(d(a),a)},a);return c.keys().map(function(a){return new E(c.get(a),F(b))},a)};function Wh(a,b,c){S.call(this,0,0);this.C=a.i(Tb);this.ba=a.i(Rb);this.I=b;this.Nb=c;this.wd="eq"==this.I.F?0:2;this.Be=null}t(Wh,S);var Xh=["hash","index_nested_loop","nested_loop"];Wh.prototype.toString=function(){return"join(type: "+(this.Nb?"outer":"inner")+", impl: "+Xh[this.wd]+", "+this.I.toString()+")"};
Wh.prototype.da=function(a,b){switch(this.wd){case 0:return[$f(this.I,b[0],b[1],this.Nb)];case 1:return[ag(this.I,b[0],b[1],this.Be,this.ba)];default:var c=this.I,d=b[0],e=b[1],f=this.Nb,h=[d,e];f||(h=Xf(c,d,e));for(var d=h[0],e=h[1],h=[],k=F(d),n=F(e),z=d.entries.length,ea=e.entries.length,la=ea+256-1>>8,Va=0;Va<la;){for(var Sb=0;Sb<z;Sb++){var Hf=!1,If=G(d.entries[Sb],c.fa);if(null!==If)for(var Yh=Math.min(Va+1<<8,ea),Jc=Va<<8;Jc<Yh;Jc++)if(c.qc(If,G(e.entries[Jc],c.la))){var Hf=!0,Zi=kd(d.entries[Sb],
k,e.entries[Jc],n);h.push(Zi)}f&&!Hf&&h.push(Zf(c,d.entries[Sb],k))}Va++}c=F(d).concat(F(e));return[new E(h,c)]}};function Zh(a,b){a.wd=1;var c=a.C.get(b.ua().l());a.Be={Kf:b,Yf:b==a.I.fa?a.I.la:a.I.fa,index:c}};function $h(a){S.call(this,0,-1);this.We=a}t($h,S);$h.prototype.toString=function(){return"no_op_step("+F(this.We[0]).join(",")+")"};$h.prototype.da=g("We");function ai(){}t(ai,Lg);ai.prototype.jb=function(a,b){this.Y=a;if(!this.zd(b))return a;Mf(a,function(a){return a instanceof Wh}).forEach(this.gg,this);return this.Y};ai.prototype.zd=function(a){return 1<a.b.length};
ai.prototype.gg=function(a){if("eq"==a.I.F&&!a.Nb){var b=function(b){if(!(b instanceof Sh))return null;b=H(b.table)==H(a.I.la.G())?a.I.la:a.I.fa;return fa(b.ua())?null:b},c=b(ud(a,0)),b=b(ud(a,1));if(null!==c||null!==b){b=null===b?c:b;Zh(a,b);var d=new E([],[H(b.G())]);xd(a,new $h([d]),b==c?0:1)}}};function bi(a){a=a.map(function(a){return a.Bb()});a=Db.apply(null,a);var b=[];Cb(a,function(a){b.push(a)});return b}function ci(a){this.Mb=a}ci.prototype.ad=function(){return 1==this.Mb.f.length?[Wc()]:[this.Mb.f.map(function(){return Wc()})]};function di(a,b){this.Mb=a;this.ya=b;this.Cd=this.Je=null}
function ei(a,b){var c=A();a.ya.keys().forEach(function(a){var e=this.ya.get(a).map(function(a){return Fd(b,a)},this),f=new Gf([Wc()]);e.forEach(function(a){var b=null;"between"==a.F?b=new Sc(a.value[0],a.value[1],!1,!1):"eq"==a.F?(b=a.value,b=new Sc(b,b,!1,!1)):b="gte"==a.F?new Sc(a.value,null,!1,!1):"gt"==a.F?new Sc(a.value,null,!0,!1):"lte"==a.F?new Sc(null,a.value,!1,!1):new Sc(null,a.value,!1,!0);a=a.Xa?Tc(b):[b];a=new Gf(a);f=Jf(f,a)});c.set(a,f)},a);return c}
di.prototype.ad=function(a){if(this.Je==a)return this.Cd;for(var b=ei(this,a),c=this.Mb.f.length-1;0<=c;c--){var d=this.Mb.f[c];if(null!==(b.get(d.ha.getName())||null))break;b.set(d.ha.getName(),new Gf([Wc()]))}this.Cd=1==this.Mb.f.length?B(b)[0].Bb():bi(fi(this,b));this.Je=a;return this.Cd};function fi(a,b){var c=A(),d=0;a.Mb.f.forEach(function(a){c.set(a.ha.getName(),d);d++});return Hb(b).sort(function(a,b){return c.get(a)-c.get(b)}).map(function(a){return b.get(a)})};function gi(a,b){this.df=b;this.C=a.i(Tb)}function hi(a,b,c){c=c.filter(a.Of,a);if(0==c.length)return null;a=ii(a,c);if(0==a.length)return null;if(1==a.length)return a[0];var d=Number.MAX_VALUE;return a.reduce(function(a,c){var h=ji(c,b);return h<d?(d=h,c):a},null)}
function ii(a,b){return a.df.va().map(function(a){a=new ki(this.C,a);li(a,b);return a},a).filter(function(a){if(null===a.ya)a=!1;else{for(var b=!1,e=!0,f=0;f<a.tb.f.length;f++){var h=a.ya.has(a.tb.f[f].ha.getName());if(b&&h){e=!1;break}h||(b=!0)}a=e}return a})}gi.prototype.Of=function(a){var b;if(b=a instanceof Bd)Cd(a),b=null!==a.value&&("between"==a.F||"eq"==a.F||"gt"==a.F||"gte"==a.F||"lt"==a.F||"lte"==a.F);return b?a.N.G()==this.df:!1};
function ki(a,b){this.C=a;this.tb=b;this.Lf=C(this.tb.f.map(function(a){return a.ha.getName()}));this.Qd=this.ya=null}function mi(a){null===a.Qd&&(a.Qd=new di(a.tb,a.ya));return a.Qd}function li(a,b){b.forEach(function(a){var b=a.cb()[0].getName();this.Lf.has(b)&&(null===this.ya&&(this.ya=new Vf),this.ya.set(b,a.U()))},a)}function ji(a,b){var c=mi(a).ad(b),d=a.C.get(a.tb.l());return c.reduce(function(a,b){return a+d.Yc(b)},0)};function ni(a,b,c,d){S.call(this,0,-1);this.C=a.i(Tb);this.index=b;this.Ie=c;this.ce=d;this.Qc=this.Pc=!1}t(ni,S);ni.prototype.toString=function(){return"index_range_scan("+this.index.l()+", ?, "+(this.ce?"reverse":"natural")+(this.Pc?", limit:?":"")+(this.Qc?", skip:?":"")+")"};ni.prototype.Nc=function(a){var b=this.toString(),c=this.Ie.ad(a),b=b.replace("?",c.toString());this.Pc&&(b=b.replace("?",a.V.toString()));this.Qc&&(b=b.replace("?",a.M.toString()));return b};
ni.prototype.da=function(a,b,c){a=this.Ie.ad(c);b=this.C.get(this.index.l());c=(1==a.length&&a[0]instanceof Sc&&Yc(a[0])?Ne(b.get(a[0].b),!1,this.Pc?c.V:void 0,this.Qc?c.M:void 0):b.Wa(a,this.ce,this.Pc?c.V:void 0,this.Qc?c.M:void 0)).map(function(a){return new y(a,{})},this);return[gd(c,[this.index.Mc])]};function oi(a){S.call(this,0,1);this.md=a}t(oi,S);oi.prototype.toString=l("select(?)");oi.prototype.Nc=function(a){a=Fd(a,this.md);return this.toString().replace("?",a.toString())};oi.prototype.da=function(a,b,c){return[Fd(c,this.md).eval(b[0])]};function pi(a,b){S.call(this,0,1);this.ba=a.i(Rb);this.O=b}t(pi,S);pi.prototype.toString=function(){return"table_access_by_row_id("+this.O.getName()+")"};pi.prototype.da=function(a,b){return[gd(Je(this.ba,ad(b[0])),[H(this.O)])]};function qi(a){this.h=a}t(qi,Lg);qi.prototype.jb=function(a,b){this.Y=a;Mf(a,function(a){return a instanceof Sh}).forEach(function(a){var d=ri(a);if(0!=d.length){var e=hi(new gi(this.h,a.table),b,d.map(function(a){return Fd(b,a.md)}));if(null!==e){var f=A();d.forEach(function(a){f.set(a.md,a)},this);this.Y=si(this,e,f,a)}}},this);return this.Y};function ri(a){var b=[];for(a=a.getParent();a;)a instanceof oi&&b.push(a),a=a.getParent();return b}
function si(a,b,c,d){(null===b.ya?[]:b.ya.values()).map(function(a){return c.get(a)}).forEach(Nf);b=new ni(a.h,b.tb,mi(b),!1);a=new pi(a.h,d.table);L(a,b);Rf(d,d,a,b);return b.eb()};function ti(a,b){S.call(this,0,-1);this.C=a.i(Tb);this.O=b}t(ti,S);ti.prototype.toString=function(){return"insert("+this.O.getName()+")"};ti.prototype.da=function(a,b,c){ui(this.O,c.values,this.C);a.ub(this.O,c.values);return[gd(c.values,[this.O.getName()])]};function ui(a,b,c){a=a.Ab().bd();if(null===a?0:a.f[0].autoIncrement){var d=a.f[0].ha.getName();c=c.get(a.l()).max();var e=null===c?0:c[0];b.forEach(function(a){if(0==a.o[d]||null==a.o[d])e++,a.o[d]=e})}}
function vi(a,b){S.call(this,0,-1);this.C=a.i(Tb);this.O=b}t(vi,S);vi.prototype.toString=function(){return"insert_replace("+this.O.getName()+")"};vi.prototype.da=function(a,b,c){ui(this.O,c.values,this.C);a.Ld(this.O,c.values);return[gd(c.values,[this.O.getName()])]};function wi(){S.call(this,0,1)}t(wi,S);wi.prototype.toString=l("limit(?)");wi.prototype.Nc=function(a){return this.toString().replace("?",a.V.toString())};wi.prototype.da=function(a,b,c){b[0].entries.splice(c.V);return b};function xi(a){S.call(this,0,1);this.L=a}t(xi,S);m=xi.prototype;m.toString=function(){return"order_by("+Kd(this.L)+")"};m.da=function(a,b){if(1==b.length){var c;c=b[0];for(var d=null,e=0;e<this.L.length;e++){var f=hg(this.L[e].N);if(null!==c.Ua&&c.Ua.has(f.l())){d=f;break}}c=d;(null===c?b[0]:bd(b[0],c)).entries.sort(this.Bf.bind(this))}else b.sort(this.jg.bind(this));return b};
m.S=function(a,b){var c=null,d=null,e=null,f=-1;do f++,e=this.L[f].N,c=this.L[f].hb,d=a(e),e=b(e);while(d==e&&f+1<this.L.length);d=d<e?-1:d>e?1:0;return 1==c?d:-d};m.jg=function(a,b){return this.S(function(b){return b instanceof R?bd(a,b):G(a.entries[a.entries.length-1],b)},function(a){return a instanceof R?bd(b,a):G(b.entries[b.entries.length-1],a)})};m.Bf=function(a,b){return this.S(function(b){return G(a,b)},function(a){return G(b,a)})};function yi(a,b){this.Ga=a;this.J=b}function zi(a){return a.J.some(function(a){return a instanceof R},a)?Ai(a):Bi(a)}function Ai(a){if(1==a.J.length&&"DISTINCT"==a.J[0].Gb)return a=bd(a.Ga,a.J[0]).entries.map(function(a){var b=new hd(new y(-1,{}),1<this.Ga.K.size);jd(b,this.J[0],G(a,this.J[0].child));return b},a),new E(a,[]);var b=new hd(new y(-1,{}),1<a.Ga.K.size);a.J.forEach(function(a){var d=a instanceof R?bd(this.Ga,a):G(this.Ga.entries[0],a);jd(b,a,d)},a);return new E([b],F(a.Ga))}
function Bi(a){var b=Array(a.Ga.entries.length),c=1<a.Ga.K.size;a.Ga.entries.forEach(function(a,e){b[e]=new hd(new y(a.sa.id(),{}),c);this.J.forEach(function(c){jd(b[e],c,G(a,c))},this)},a);return new E(b,F(a.Ga))}function Ci(a,b){var c=a.map(function(a){return zi(new yi(a,b)).entries[0]});return new E(c,F(a[0]))};function Di(a,b){S.call(this,0,1);this.f=a;this.Lb=b}t(Di,S);Di.prototype.toString=function(){var a="project("+this.f.toString();if(null!==this.Lb)var b=this.Lb.map(function(a){return a.l()}).join(", "),a=a+(", groupBy("+b+")");return a+")"};Di.prototype.da=function(a,b){var c;0==b.length?c=[dd()]:1==b.length?(c=b[0],c=[0==this.f.length?c:zi(new yi(c,this.f))]):c=[Ci(b,this.f)];return c};function Ei(a){return a.f.some(function(a){return a instanceof R})||null!==a.Lb};function Fi(){S.call(this,0,1)}t(Fi,S);Fi.prototype.toString=l("skip(?)");Fi.prototype.Nc=function(a){return this.toString().replace("?",a.M.toString())};Fi.prototype.da=function(a,b,c){return[new E(b[0].entries.slice(c.M),F(b[0]))]};function Gi(){}t(Gi,Lg);Gi.prototype.jb=function(a,b){if(!q(b.V)&&!q(b.M))return a;var c=Hi(a);if(null===c)return a;Mf(a,function(a){return a instanceof wi||a instanceof Fi}).forEach(function(a){a instanceof wi?c.Pc=!0:c.Qc=!0;Nf(a)},this);return c.eb()};function Hi(a){a=Mf(a,function(a){return a instanceof ni},function(a){return a instanceof Di&&Ei(a)||a instanceof xi||1!=K(a).length||a instanceof oi});return 0<a.length?a[0]:null};function Ii(a){this.h=a}t(Ii,Lg);Ii.prototype.jb=function(a,b){var c=Ji(a,b);if(null===c)return a;var d;a:{var e=c;d=Ki(ud(c,0));if(null!==d){var f;f=c.L;for(var h=null,k=d.table.va(),n=0;n<k.length&&null===h;n++)h=Li(k[n],f);f=h;if(null===f){d=e;break a}e=new ni(this.h,f.tb,new ci(f.tb),f.Fe);f=new pi(this.h,d.table);L(f,e);Nf(c);e=Rf(d,d,f,e)}d=e}if(d==c)a:if(d=c,e=Mi(ud(c,0)),null!==e){f=Li(e.index,c.L);if(null===f)break a;e.ce=f.Fe;d=Nf(c).parent}return d.eb()};
function Mi(a){a=Mf(a,function(a){return a instanceof ni},function(a){return 1!=K(a).length});return 0<a.length?a[0]:null}function Ki(a){a=Mf(a,function(a){return a instanceof Sh},function(a){return 1!=K(a).length});return 0<a.length?a[0]:null}function Ji(a,b){return q(b.L)?Mf(a,function(a){return a instanceof xi})[0]:null}function Li(a,b){if(a.f.length!=b.length||!b.every(function(b,c){return b.N.getName()==a.f[c].ha.getName()}))return null;var c=Ni(b,a);return c[0]||c[1]?{tb:a,Fe:c[1]}:null}
function Ni(a,b){var c=a.reduce(function(a,b){return a<<1|(0==b.hb?0:1)},0),d=b.f.reduce(function(a,b){return a<<1|(0==b.hb?0:1)},0),d=c^d,c=0==d,d=d==Math.pow(2,Math.max(a.length,b.f.length))-1;return[c,d]};function Oi(a,b,c){this.za=a;this.$d=b;this.Sb=c}Oi.prototype.dc=function(){this.Sb.forEach(function(a){this.za=a.jb(this.za,this.$d)},this);return this.za};function Pi(a,b){S.call(this,0,1);this.O=a;this.rg=b}t(Pi,S);Pi.prototype.toString=function(){return"update("+this.O.getName()+")"};Pi.prototype.da=function(a,b){var c=b[0].entries.map(function(a){var b=this.O.Jb(a.sa.Ha());this.rg.forEach(function(a){b.o[a.N.getName()]=a.value},this);return b},this);a.update(this.O,c);return[dd()]};function Qi(a){this.h=a;this.ee=[new ai,new qi(this.h),new Ii(this.h),new Gi,new Th(this.h)];this.Ed=[new qi(this.h)]}Qi.prototype.create=function(a,b){var c=a.eb();if(c instanceof yg||c instanceof xg)return Ri(this,a,b);if(c instanceof Eg||c instanceof Ig||c instanceof Jg)return Ri(this,a,b,this.ee);if(c instanceof zg||c instanceof Ag)return Ri(this,a,b,this.Ed);throw new D(8);};function Ri(a,b,c,d){a=Kf(b.eb(),a.Xf.bind(a));null!=d&&(a=(new Oi(a,c,d)).dc());return new Ld(a,b.Z())}
Qi.prototype.Xf=function(a){if(a instanceof Eg)return new Di(a.f,a.Lb);if(a instanceof Hg)return new Uh(a.f);if(a instanceof Gg)return new lg(a.f);if(a instanceof Fg)return new xi(a.L);if(a instanceof Jg)return new Fi;if(a instanceof Ig)return new wi;if(a instanceof Bg)return new oi(a.I.U());if(a instanceof Dg)return new Qg;if(a instanceof Kg)return new Wh(this.h,a.I,a.Nb);if(a instanceof Cg)return new Sh(this.h,a.table);if(a instanceof zg)return new Qh(a.table);if(a instanceof Ag)return new Pi(a.table,
a.ie);if(a instanceof yg)return new vi(this.h,a.table);if(a instanceof xg)return new ti(this.h,a.table);throw new D(514);};function Si(a){this.Vf=new Ph;this.eg=new Qi(a)};function Ti(){this.Me=A()}function Ui(a,b){var c=a.Me.get(b.getName())||null;null===c&&(c=new Vi,a.Me.set(b.getName(),c));return c}function Wi(a,b,c,d){c.forEach(function(a){a=Ui(this,a);0==d?(a.Ya=null,a.rc=b):3==d?(null===a.Tb&&(a.Tb=C()),a.Tb.add(b),null===a.Pa&&(a.Pa=C()),a.Pa.delete(b)):1==d?(null===a.Pa&&(a.Pa=C()),a.Pa.add(b)):2==d&&(a.Ya=b)},a)}
function Xi(a,b,c,d){var e=!0;c.forEach(function(a){if(e){a=Ui(this,a);var c=null===a.Pa||0==a.Pa.size;e=0==d?(null===a.Tb||0==a.Tb.size)&&c&&null===a.rc&&null!==a.Ya&&a.Ya==b:3==d?null===a.rc&&null===a.Ya&&null!==a.Pa&&a.Pa.has(b):1==d?null===a.Ya:c&&(null===a.Ya||a.Ya==b)}},a);return e}function Yi(a,b,c,d){var e=Xi(a,b,c,d);e&&Wi(a,b,c,d);return e}Ti.prototype.releaseLock=function(a,b){b.forEach(function(b){Ui(this,b).releaseLock(a)},this)};
function $i(a,b){b.forEach(function(a){Ui(this,a).Ya=null},a)}function Vi(){this.Tb=this.Pa=this.Ya=this.rc=null}Vi.prototype.releaseLock=function(a){this.rc==a&&(this.rc=null);this.Ya==a&&(this.Ya=null);null===this.Pa||this.Pa.delete(a);null===this.Tb||this.Tb.delete(a)};function aj(){this.Rb=new bj;this.Bc=new Ti}function Td(a,b){(2>b.getPriority()||2>b.getPriority())&&$i(a.Bc,b.Z());a.Rb.ub(b);cj(a);return b.Kb().ga}function cj(a){for(var b=a.Rb.Bb(),c=0;c<b.length;c++){var d=b[c],e=!1;if(e=0==d.H()?dj(a,d,1,3):dj(a,d,2,0))a.Rb.remove(d),e=a,d.exec().then(e.cg.bind(e,d),e.bg.bind(e,d))}}function dj(a,b,c,d){var e=!1;Yi(a.Bc,b.U(),b.Z(),c)&&(e=Yi(a.Bc,b.U(),b.Z(),d));return e}aj.prototype.cg=function(a,b){this.Bc.releaseLock(a.U(),a.Z());a.Kb().resolve(b);cj(this)};
aj.prototype.bg=function(a,b){this.Bc.releaseLock(a.U(),a.Z());a.Kb().reject(b);cj(this)};function bj(){this.Rb=[]}bj.prototype.ub=function(a){Me(this.Rb,a,function(a,c){var d=a.getPriority()-c.getPriority();return 0==d?a.U()-c.U():d})};bj.prototype.Bb=function(){return this.Rb.slice()};bj.prototype.remove=function(a){var b=this.Rb;a=va(b,a);var c;(c=0<=a)&&ua.splice.call(b,a,1);return c};function ej(a,b){this.Fd=ld.vc();this.ae=a;this.hd=b;this.J=fj(this)}function fj(a){if(0<a.ae.f.length)return a.ae.f;var b=[];a.ae.b.forEach(function(a){a.cb().forEach(function(a){b.push(a)})});return b}ej.prototype.S=function(a,b){return this.J.every(function(c){return rd(this.Fd,c.H(),"eq")(G(a,c),G(b,c))},this)};
function gj(a,b,c){var d=null===b?[]:b.entries,e=ub(d,c.entries,a.S.bind(a),function(a){return d[a]});b=[];for(var f=0,h=0;h<d.length;h++){var k=d[h];e[f]==k?f++:(k=a.hd.splice(f,1),k=hj(h,k,0,a.hd),b.push(k))}e=ub(d,c.entries,a.S.bind(a),function(a,b){return c.entries[b]});for(h=f=0;h<c.entries.length;h++)k=c.entries[h],e[f]==k?f++:(a.hd.splice(h,0,k.sa.o),k=hj(h,[],1,a.hd),b.push(k));return b}function hj(a,b,c,d){return{sg:c,index:a,object:d,vg:b,type:"splice"}};function ij(){this.bc=A()}ij.prototype.vd=function(a,b){var c=ka(a.a).toString(),d=this.bc.get(c)||null;null===d&&(d=new jj(a),this.bc.set(c,d));d.vd(b)};ij.prototype.be=function(a,b){var c=ka(a.a).toString(),d=this.bc.get(c)||null;d.be(b);0<d.Fc.size||this.bc.delete(c)};function Sd(a,b){var c=C();b.forEach(function(a){c.add(a.getName())});var d=[];a.bc.forEach(function(a){a=a.xc();a.context.b.some(function(a){return c.has(a.getName())})&&d.push(a)});return d}
function Qd(a,b,c){b=ka(null!=b.Wc?b.Wc:b).toString();a=a.bc.get(b)||null;null!==a&&kj(a,c)}function jj(a){this.rf=a;this.Fc=C();this.$f=[];this.Ke=null;this.zf=new ej(a.a,this.$f)}jj.prototype.vd=function(a){this.Fc.has(a)||this.Fc.add(a)};jj.prototype.be=function(a){return this.Fc.delete(a)};jj.prototype.xc=function(){var a=this.rf;return{context:a.a,Zd:lh(a)}};function kj(a,b){var c=gj(a.zf,a.Ke,b);a.Ke=b;0<c.length&&a.Fc.forEach(function(a){a(c)})};function lj(a,b){var c=a.i(Xb),d=b||{},e=new Ie(c);a.ib(Rb,e);var e=null,f=!1;switch(d.storeType||0){case 1:e=new ue(c);break;case 5:e=new we(c);break;case 4:e=new Ee(a,c,d.webSqlDbSize);break;case 3:e=new ee(c,d.firebase);f=!0;break;default:e=new pe(a,c)}a.ib(Qb,e);var h=new Ff;a.ib(Tb,h);return e.Da(d.onUpgrade).then(function(){var b=new Si(a);a.ib(Ub,b);b=new aj;a.ib(Vb,b);b=new ij;a.ib(Wb,b);return h.Da(c)}).then(function(){if(f){var b=new Ud(a);b.Ia.subscribe(b.Ud.bind(b))}return(new yf(a)).Da(c)})}
;function mj(a){this.h=a;this.m=a.i(Xb);this.$=C(this.m.ra());this.Za=x()}m=mj.prototype;m.exec=function(){var a=this.h.i(Tb),b=this.h.i(Rb),c={};this.m.ra().forEach(function(d){var f=a.get(se(d)).Wa(),f=Je(b,f).map(function(a){return a.o});c[d.getName()]=f});var d={name:this.m.name(),version:this.m.version(),tables:c},d=new hd(new y(-1,d),!0);return w([new E([d],[])])};m.H=l(0);m.Z=g("$");m.Kb=g("Za");m.U=function(){return ka(this)};m.getPriority=l(0);function nj(a,b){this.h=a;this.m=a.i(Xb);this.$=C(this.m.ra());this.Za=x();this.ta=b;this.Ia=a.i(Qb);this.ba=a.i(Rb);this.C=a.i(Tb)}m=nj.prototype;
m.exec=function(){if(!(this.Ia instanceof pe||this.Ia instanceof ue||this.Ia instanceof Ee))throw new D(300);var a;a:{a=this.m.ra();for(var b=0;b<a.length;++b)if(0<this.C.get(se(a[b])).La().na){a=!1;break a}a=!0}if(!a)throw new D(110);if(this.m.name()!=this.ta.name||this.m.version()!=this.ta.version)throw new D(111);if(null==this.ta.tables)throw new D(112);return oj(this)};m.H=l(1);m.Z=g("$");m.Kb=g("Za");m.U=function(){return ka(this)};m.getPriority=l(0);
function oj(a){var b=new Oc(a.h,a.$),b=a.Ia.zb(a.H(),b),c;for(c in a.ta.tables){var d=a.m.table(c),e=a.ta.tables[c].map(function(a){return d.qb(a)}),f=b.G(c,d.Jb);a.ba.rd(c,e);var h=a.C.gc.get(c)||[];e.forEach(function(a){h.forEach(function(b){var c=a.Cb(b.getName());b.add(c,a.id())})});f.put(e)}return b.ia()};function pj(a,b){this.h=a;this.Ia=a.i(Qb);this.Aa=a.i(Vb);this.Db=a.i(Wb);this.$=C(b);this.Oa=new Oc(this.h,this.$);this.Za=x();this.sc=x();this.le=x()}m=pj.prototype;m.exec=function(){this.le.resolve();return this.sc.ga};m.H=l(1);m.Z=g("$");m.Kb=g("Za");m.U=function(){return ka(this)};m.getPriority=l(2);function qj(a){Td(a.Aa,a);return a.le.ga}
function rj(a,b){var c=b.xc();return c.Zd.eb().exec(a.Oa,c.context).then(function(a){return $c(a[0])},function(a){this.Oa.Eb();var b=new hb(a.name);this.sc.reject(b);throw a;}.bind(a))}m.ia=function(){this.Ia.zb(this.H(),this.Oa).ia().then(function(){this.Kc();this.sc.resolve()}.bind(this),function(a){this.Oa.Eb();this.sc.reject(a)}.bind(this));return this.Za.ga};m.Eb=function(){this.Oa.Eb();this.sc.resolve();return this.Za.ga};
m.Kc=function(){var a=Sd(this.Db,this.$);0!=a.length&&(a=new Pd(this.h,a),Td(this.Aa,a))};function sj(a){this.h=a;this.Aa=a.i(Vb);this.Oc=null;this.Qa=0;0==tj.size&&(tj.set(0,C([1,4])),tj.set(1,C([2])),tj.set(2,C([3,5,6])),tj.set(3,C([2,7])),tj.set(4,C([7])),tj.set(5,C([7])),tj.set(6,C([7])))}r("lf.proc.Transaction",sj);var tj=A();function uj(a,b){var c=tj.get(a.Qa)||null;if(null===c||!c.has(b))throw new D(107,a.Qa,b);a.Qa=b}
sj.prototype.exec=function(a){uj(this,4);var b=[];try{a.forEach(function(a){a.ab();b.push(a.xc())},this)}catch(c){return uj(this,7),Za(c)}a=new Rg(this.h,b);return Td(this.Aa,a).then(function(a){uj(this,7);return a.map(function(a){return $c(a)})}.bind(this),function(a){uj(this,7);throw a;}.bind(this))};sj.prototype.exec=sj.prototype.exec;sj.prototype.pf=function(a){uj(this,1);this.Oc=new pj(this.h,a);return qj(this.Oc).then(function(){uj(this,2)}.bind(this))};sj.prototype.begin=sj.prototype.pf;
sj.prototype.of=function(a){uj(this,3);return rj(this.Oc,a).then(function(a){uj(this,2);return a}.bind(this),function(a){uj(this,7);throw a;}.bind(this))};sj.prototype.attach=sj.prototype.of;sj.prototype.ia=function(){uj(this,5);return this.Oc.ia().then(function(){uj(this,7)}.bind(this))};sj.prototype.commit=sj.prototype.ia;sj.prototype.Eb=function(){uj(this,6);return this.Oc.Eb().then(function(){uj(this,7)}.bind(this))};sj.prototype.rollback=sj.prototype.Eb;function V(a){this.h=a;this.m=a.i(Xb);this.Kd=!1}r("lf.proc.Database",V);V.prototype.Da=function(a){this.h.ib(Xb,this.m);return lj(this.h,a).then(function(){this.Kd=!0;this.Aa=this.h.i(Vb);return this}.bind(this))};V.prototype.init=V.prototype.Da;V.prototype.sb=g("m");V.prototype.getSchema=V.prototype.sb;function vj(a){if(!a.Kd)throw new D(2);}V.prototype.select=function(a){vj(this);return new U(this.h,1!=arguments.length||null!=arguments[0]?Array.prototype.slice.call(arguments):[])};
V.prototype.select=V.prototype.select;V.prototype.ub=function(){vj(this);return new nh(this.h)};V.prototype.insert=V.prototype.ub;V.prototype.Ld=function(){vj(this);return new nh(this.h,!0)};V.prototype.insertOrReplace=V.prototype.Ld;V.prototype.update=function(a){vj(this);return new xh(this.h,a)};V.prototype.update=V.prototype.update;V.prototype.delete=function(){vj(this);return new mh(this.h)};V.prototype["delete"]=V.prototype.delete;
V.prototype.observe=function(a,b){vj(this);this.h.i(Wb).vd(a,b)};V.prototype.observe=V.prototype.observe;V.prototype.unobserve=function(a,b){vj(this);this.h.i(Wb).be(a,b)};V.prototype.unobserve=V.prototype.unobserve;V.prototype.xf=function(){vj(this);return new sj(this.h)};V.prototype.createTransaction=V.prototype.xf;V.prototype.close=function(){try{this.h.i(Qb).close()}catch(a){}this.h.clear();this.Kd=!1};V.prototype.close=V.prototype.close;
V.prototype.Ff=function(){vj(this);var a=new mj(this.h);return Td(this.Aa,a).then(function(a){return $c(a[0])[0]})};V.prototype["export"]=V.prototype.Ff;V.prototype.import=function(a){vj(this);a=new nj(this.h,a);return Td(this.Aa,a).then(l(null))};V.prototype["import"]=V.prototype.import;function W(a,b,c,d,e,f){this.O=a;this.w=b;this.Ge=c;this.Ee=d;this.hf=e;this.$a=f||null}r("lf.schema.BaseColumn",W);m=W.prototype;m.getName=g("w");m.l=function(){return H(this.O)+"."+this.w};m.toString=function(){return this.l()};m.G=g("O");m.H=g("hf");W.prototype.getType=W.prototype.H;W.prototype.Va=g("$a");W.prototype.va=function(){null==this.ka&&(this.ka=[],this.G().va().forEach(function(a){-1!=a.f.map(function(a){return a.ha.getName()}).indexOf(this.w)&&this.ka.push(a)},this));return this.ka};
W.prototype.ua=function(){if(!q(this.ea)){var a=this.va().filter(function(a){return 1!=a.f.length?!1:a.f[0].ha.getName()==this.getName()},this);this.ea=0<a.length?a[0]:null}return this.ea};W.prototype.zc=g("Ee");W.prototype.isNullable=W.prototype.zc;W.prototype.Ac=g("Ge");W.prototype.Na=function(a){return bg(this,a,"eq")};W.prototype.eq=W.prototype.Na;W.prototype.Ne=function(a){return bg(this,a,"neq")};W.prototype.neq=W.prototype.Ne;W.prototype.Rd=function(a){return bg(this,a,"lt")};
W.prototype.lt=W.prototype.Rd;W.prototype.Wf=function(a){return bg(this,a,"lte")};W.prototype.lte=W.prototype.Wf;W.prototype.Hf=function(a){return bg(this,a,"gt")};W.prototype.gt=W.prototype.Hf;W.prototype.If=function(a){return bg(this,a,"gte")};W.prototype.gte=W.prototype.If;W.prototype.match=function(a){return bg(this,a,"match")};W.prototype.match=W.prototype.match;W.prototype.qf=function(a,b){return bg(this,[a,b],"between")};W.prototype.between=W.prototype.qf;
W.prototype.Jf=function(a){return bg(this,a,"in")};W.prototype["in"]=W.prototype.Jf;W.prototype.Rf=function(){return this.Na(null)};W.prototype.isNull=W.prototype.Rf;W.prototype.Qf=function(){return this.Ne(null)};W.prototype.isNotNull=W.prototype.Qf;W.prototype.kc=function(a){return new W(this.O,this.w,this.Ge,this.Ee,this.hf,a)};W.prototype.as=W.prototype.kc;function wj(){this.pd=A()}var xj;wj.prototype.clear=function(){this.pd.clear()};wj.prototype.clear=wj.prototype.clear;wj.prototype.ib=function(a,b){this.pd.set(a.toString(),b);return b};wj.prototype.registerService=wj.prototype.ib;wj.prototype.i=function(a){var b=this.pd.get(a.toString())||null;if(null===b)throw new D(7,a.toString());return b};wj.prototype.getService=wj.prototype.i;wj.prototype.Pd=function(a){return this.pd.has(a.toString())};wj.prototype.isRegistered=wj.prototype.Pd;function yj(a){this.m=a;this.Ve=new Vf;this.Pe=new Vf;this.se=A();this.g=new Vf;this.re=new Vf;zj(this)}function zj(a){a.m.ra().forEach(function(a){var c=a.getName();a.Ab().Id().forEach(function(d){this.Ve.set(d.wb,d);this.Pe.set(c,this.m.table(d.wb));this.g.set(d.wb,a);this.se.set(a.getName()+"."+d.ob,d.wb);this.re.set(d.wb+"."+d.Hc,a.getName())},this)},a)}function Hc(a,b){return a.Ve.get(b)}function Ug(a,b){var c=b.get(a);return null===c?[]:c}
function Xg(a,b){var c=C();b.forEach(function(a){(a=this.se.get(a))&&c.add(a)},a);return dc(c).map(function(a){return this.m.table(a)},a)}function Yg(a,b){var c=C();b.forEach(function(a){(a=this.re.get(a))&&a.forEach(function(a){c.add(a)})},a);return dc(c).map(function(a){return this.m.table(a)},a)};function Aj(a,b,c){this.fg=a;this.Zf=b;this.Gf=c}r("lf.schema.Constraint",Aj);Aj.prototype.bd=g("fg");Aj.prototype.getPrimaryKey=Aj.prototype.bd;Aj.prototype.Id=g("Gf");Aj.prototype.getForeignKeys=Aj.prototype.Id;function Bj(a,b){var c=a.ref.split(".");if(2!=c.length)throw new D(540,b);this.ob=a.local;this.wb=c[0];this.Hc=c[1];this.name=b;this.action=a.action;this.timing=a.timing};function X(a){Cj(a);this.Fd=ld.vc();this.w=a;this.J=A();this.sd=C();this.hc=C();this.Ec=C();this.xa=null;this.ka=A();this.ld=!1;this.rb=[]}r("lf.schema.TableBuilder",X);function Dj(a){this.name=a.name;this.hb=a.order;this.autoIncrement=a.autoIncrement}var Ej=C([0,6]);function Cj(a){if(!/^[A-Za-z_][A-Za-z0-9_]*$/.test(a))throw new D(502,a);}function Fj(a,b){if(b==a.w)throw new D(546,b);if(a.J.has(b)||a.ka.has(b)||a.hc.has(b))throw new D(503,a.w+"."+b);}
function Gj(a,b){var c=!1;b.forEach(function(a){var b=this.J.get(a.name);c=c||a.autoIncrement;if(a.autoIncrement&&3!=b)throw new D(504);},a);if(c&&1<b.length)throw new D(505);}function Hj(a){if(null!==a.xa){var b=a.ka.get(a.xa).map(function(a){return a.name}),c=0;if(a.rb.some(function(a,e){c=e;return-1!=b.indexOf(a.ob)},a))throw new D(543,a.rb[c].name);}}
function Ij(a){if(null!==a.xa){var b=function(a){return a.name},c=JSON.stringify(a.ka.get(a.xa).map(b));a.ka.forEach(function(a,e){if(e!=this.xa){var f=a.map(b);if(JSON.stringify(f)==c)throw new D(544,this.w+"."+e);}},a)}}function Jj(a){null===a.xa||a.ka.get(a.xa).forEach(function(a){if(this.Ec.has(a.name))throw new D(545,this.w+"."+a.name);},a)}X.prototype.jf=function(a,b){Cj(a);Fj(this,a);this.J.set(a,b);Ej.has(b)&&this.ne([a]);return this};X.prototype.addColumn=X.prototype.jf;
X.prototype.lf=function(a,b){var c=this.w;this.xa="pk"+(c[0].toUpperCase()+c.substring(1));Cj(this.xa);Fj(this,this.xa);c=Kj(this,a,!0,void 0,b);Gj(this,c);1==c.length&&this.sd.add(c[0].name);this.hc.add(this.xa);this.ka.set(this.xa,c);return this};X.prototype.addPrimaryKey=X.prototype.lf;
X.prototype.kf=function(a,b){Cj(a);Fj(this,a);var c=new Bj(b,this.w+"."+a);q(c.action)||(c.action=0);q(c.timing)||(c.timing=0);if(1==c.action&&1==c.timing)throw new D(506);if(!this.J.has(c.ob))throw new D(540,a);this.rb.push(c);this.me(a,[c.ob],this.sd.has(c.ob));return this};X.prototype.addForeignKey=X.prototype.kf;X.prototype.mf=function(a,b){Cj(a);Fj(this,a);var c=Kj(this,b,!0);Lj(this,a,c);1==c.length&&(this.sd.add(c[0].name),Mj(this,c[0].name));this.ka.set(a,c);this.hc.add(a);return this};
X.prototype.addUnique=X.prototype.mf;function Mj(a,b){a.rb.forEach(function(a){a.ob==b&&this.hc.add(a.name.split(".")[1])},a)}X.prototype.ne=function(a){a=Kj(this,a,!1);Nj(this,a);a.forEach(function(a){this.Ec.add(a.name)},this);return this};X.prototype.addNullable=X.prototype.ne;function Nj(a,b){Hb(a.ka).forEach(function(a){var d=C();this.ka.get(a).forEach(function(a){d.add(a.name)});var e=b.filter(function(a){return d.has(a.name)});if(1<d.size&&0<e.length)throw new D(507,a,e.join(","));},a)}
X.prototype.me=function(a,b,c,d){Cj(a);Fj(this,a);b=Kj(this,b,!0,d);Lj(this,a,b);c&&this.hc.add(a);this.ka.set(a,b);return this};X.prototype.addIndex=X.prototype.me;function Lj(a,b,c){if(1<c.length&&(a=c.filter(function(a){return this.Ec.has(a.name)},a),0<a.length))throw new D(507,b,a.join(","));}X.prototype.xb=ba("ld");X.prototype.persistentIndex=X.prototype.xb;X.prototype.sb=function(){Hj(this);Ij(this);Jj(this);return new (Oj(this))};X.prototype.getSchema=X.prototype.sb;
function Pj(a){return a.rb}function Kj(a,b,c,d,e){var f=b,f="string"==typeof b[0]?b.map(function(a){return new Dj({name:a,order:null!=d?d:1,autoIncrement:e||!1})}):b.map(function(a){return new Dj(a)});f.forEach(function(a){if(!this.J.has(a.name))throw new D(508,this.w,a.name);if(c){var b=this.J.get(a.name);if(0==b||6==b)throw new D(509,this.w,a.name);}},a);return f}
function Oj(a){function b(){function b(c){return a.ka.get(c).map(function(a){return{ha:this[a.name],hb:a.hb,autoIncrement:a.autoIncrement}},this)}var d=Hb(a.J).map(function(b){this[b]=new W(this,b,a.sd.has(b),a.Ec.has(b),a.J.get(b));return this[b]},this),e=Hb(a.ka).map(function(d){return new dg(a.w,d,a.hc.has(d),b.call(this,d))},this);Q.call(this,a.w,d,e,a.ld);var f=null===a.xa?null:new dg(a.w,a.xa,!0,b.call(this,a.xa)),h=d.filter(function(b){return!a.Ec.has(b.getName())});this.tf=new Aj(f,h,a.rb);
this.Ze=Qj(a,d,e)}t(b,Q);b.prototype.qb=function(a){return new this.Ze(nb++,a)};b.prototype.createRow=b.prototype.qb;b.prototype.Jb=function(a){var b={};this.cb().forEach(function(e){var f=e.getName();e=e.H();var h=a.value[f];if(0==e)if(e=h,null!=e&&""!=e){0!=e.length%2&&(e="0"+e);for(var h=new ArrayBuffer(e.length/2),k=new Uint8Array(h),n=0,z=0;n<e.length;n+=2)k[z++]=parseInt(e.substr(n,2),16);e=h}else e=null;else e=2==e?null!=h?new Date(h):null:h;b[f]=e},this);return new this.Ze(a.id,b)};b.prototype.deserializeRow=
b.prototype.Jb;b.prototype.Ab=g("tf");b.prototype.getConstraint=b.prototype.Ab;return b}
function Qj(a,b,c){function d(a,d){this.J=b;this.ka=c;y.call(this,a,d)}t(d,y);d.prototype.ve=function(){var a={};this.J.forEach(function(b){a[b.getName()]=b.zc()?null:zc[b.H()]});return a};d.prototype.ef=function(){var a={};this.J.forEach(function(b){var c=b.getName();b=b.H();var d=this.o[c];a[c]=0==b?null!=d?rb(d):null:2==b?null!=d?d.getTime():null:6==b?null!=d?d:null:d},this);return a};var e=function(a){var b=this.J.get(a.getName()),c=this.Fd.He.get(b)||null;return function(b){return c(b[a.getName()])}}.bind(a),
f=function(a){var b=a.map(function(a){return e(a.ha)});return function(a){return b.map(function(b){return b(a)})}}.bind(a),h={};c.forEach(function(a){var b=a.l();a=1==a.f.length?e(a.f[0].ha):f(a.f);h[b]=a});d.prototype.Cb=function(a){return-1!=a.indexOf("#")?this.id():h.hasOwnProperty(a)?h[a](this.o):null};return d};function Y(a,b){this.m=new Z(a,b);this.mb=A();this.tc=!1}r("lf.schema.Builder",Y);function Rj(a,b){b.rb.forEach(function(a){var d=a.wb;if(!this.mb.has(d))throw new D(536,a.name);var d=this.mb.get(d).sb(),e=a.Hc;if(!d.hasOwnProperty(e))throw new D(537,a.name);if(b.sb()[a.ob].H()!=d[e].H())throw new D(538,a.name);if(!d[e].Ac())throw new D(539,a.name);},a)}Y.prototype.sf=function(a){a.rb.forEach(function(a){Pj(this.mb.get(a.wb)).forEach(function(c){if(c.ob==a.Hc)throw new D(534,a.name);},this)},this)};
function Sj(a){a.tc||(a.mb.forEach(function(a){Rj(this,a);a=a.sb();this.m.K.set(a.getName(),a)},a),B(a.mb).forEach(a.sf,a),Tj(a),a.mb.clear(),a.tc=!0)}function Uj(a,b,c){b.je||(b.je=!0,b.Vd=!0,b.we.forEach(function(a){a=c.get(a);if(!a.je)Uj(this,a,c);else if(a.Vd&&b!=a)throw new D(533);},a));b.Vd=!1}function Tj(a){var b=A();a.m.K.forEach(function(a,d){b.set(d,new Vj(d))},a);a.mb.forEach(function(a,d){a.rb.forEach(function(a){b.get(a.wb).we.add(d)})});B(b).forEach(function(a){Uj(this,a,b)},a)}
function Vj(a){this.Vd=this.je=!1;this.we=C();this.Mc=a}Y.prototype.sb=function(){this.tc||Sj(this);return this.m};Y.prototype.getSchema=Y.prototype.sb;Y.prototype.ye=function(){var a=new Pb("ns_"+this.m.name()),b;xj||(xj=new wj);b=xj;var c=null;b.Pd(a)?c=b.i(a):(c=new wj,b.ib(a,c));return c};Y.prototype.getGlobal=Y.prototype.ye;Y.prototype.connect=function(a){var b=this.ye();b.Pd(Xb)||b.ib(Xb,this.sb());return(new V(b)).Da(a)};Y.prototype.connect=Y.prototype.connect;
Y.prototype.wf=function(a){if(this.mb.has(a))throw new D(503,a);if(this.tc)throw new D(535);this.mb.set(a,new X(a));return this.mb.get(a)};Y.prototype.createTable=Y.prototype.wf;Y.prototype.fe=function(a){if(this.tc)throw new D(535);this.m.fe(a);return this};Y.prototype.setPragma=Y.prototype.fe;function Z(a,b){this.w=a;this.Wb=b;this.K=A();this.Te={Af:!1}}r("lf.schema.DatabaseSchema",Z);Z.prototype.name=g("w");Z.prototype.name=Z.prototype.name;Z.prototype.version=g("Wb");Z.prototype.version=Z.prototype.version;
Z.prototype.ra=function(){return B(this.K)};Z.prototype.tables=Z.prototype.ra;Z.prototype.table=function(a){if(!this.K.has(a))throw new D(101,a);return this.K.get(a)};Z.prototype.table=Z.prototype.table;Z.prototype.info=function(){this.Ce||(this.Ce=new yj(this));return this.Ce};Z.prototype.Se=g("Te");Z.prototype.pragma=Z.prototype.Se;Z.prototype.fe=ba("Te");r("lf.schema.create",function(a,b){return new Y(a,b)});}.bind(window))()
//# sourceMappingURL=lovefield.es6.js.map
