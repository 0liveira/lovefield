(function(){'use strict';function aa(){return function(){}}function ba(a){return function(b){this[a]=b}}function g(a){return function(){return this[a]}}function l(a){return function(){return a}}var m,n=this;function q(a){return void 0!==a}function ca(){}
function da(a){var b=typeof a;if("object"==b)if(a){if(a instanceof Array)return"array";if(a instanceof Object)return b;var c=Object.prototype.toString.call(a);if("[object Window]"==c)return"object";if("[object Array]"==c||"number"==typeof a.length&&"undefined"!=typeof a.splice&&"undefined"!=typeof a.propertyIsEnumerable&&!a.propertyIsEnumerable("splice"))return"array";if("[object Function]"==c||"undefined"!=typeof a.call&&"undefined"!=typeof a.propertyIsEnumerable&&!a.propertyIsEnumerable("call"))return"function"}else return"null";
else if("function"==b&&"undefined"==typeof a.call)return"object";return b}function fa(a){return null===a}function ga(a){return null!=a}function ha(a){var b=da(a);return"array"==b||"object"==b&&"number"==typeof a.length}function ja(a){return"string"==typeof a}function ka(a){return"function"==da(a)}function la(a){return a[ma]||(a[ma]=++na)}var ma="closure_uid_"+(1E9*Math.random()>>>0),na=0;function oa(a,b,c){return a.call.apply(a.bind,arguments)}
function pa(a,b,c){if(!a)throw Error();if(2<arguments.length){var d=Array.prototype.slice.call(arguments,2);return function(){var c=Array.prototype.slice.call(arguments);Array.prototype.unshift.apply(c,d);return a.apply(b,c)}}return function(){return a.apply(b,arguments)}}function qa(a,b,c){qa=Function.prototype.bind&&-1!=Function.prototype.bind.toString().indexOf("native code")?oa:pa;return qa.apply(null,arguments)}
function ra(a,b){var c=Array.prototype.slice.call(arguments,1);return function(){var b=c.slice();b.push.apply(b,arguments);return a.apply(this,b)}}function r(a,b){var c=a.split("."),d=n;c[0]in d||!d.execScript||d.execScript("var "+c[0]);for(var e;c.length&&(e=c.shift());)!c.length&&q(b)?d[e]=b:d=d[e]?d[e]:d[e]={}}
function t(a,b){function c(){}c.prototype=b.prototype;a.Cb=b.prototype;a.prototype=new c;a.prototype.constructor=a;a.tg=function(a,c,f){for(var h=Array(arguments.length-2),k=2;k<arguments.length;k++)h[k-2]=arguments[k];return b.prototype[c].apply(a,h)}};function sa(a){if(Error.captureStackTrace)Error.captureStackTrace(this,sa);else{var b=Error().stack;b&&(this.stack=b)}a&&(this.message=String(a))}t(sa,Error);sa.prototype.name="CustomError";function ta(a,b,c){this.Uf=c;this.yf=a;this.kg=b;this.kd=0;this.fd=null}ta.prototype.get=function(){var a;0<this.kd?(this.kd--,a=this.fd,this.fd=a.next,a.next=null):a=this.yf();return a};ta.prototype.put=function(a){this.kg(a);this.kd<this.Uf&&(this.kd++,a.next=this.fd,this.fd=a)};var ua=Array.prototype,va=ua.indexOf?function(a,b,c){return ua.indexOf.call(a,b,c)}:function(a,b,c){c=null==c?0:0>c?Math.max(0,a.length+c):c;if(ja(a))return ja(b)&&1==b.length?a.indexOf(b,c):-1;for(;c<a.length;c++)if(c in a&&a[c]===b)return c;return-1},wa=ua.forEach?function(a,b,c){ua.forEach.call(a,b,c)}:function(a,b,c){for(var d=a.length,e=ja(a)?a.split(""):a,f=0;f<d;f++)f in e&&b.call(c,e[f],f,a)},xa=ua.map?function(a,b,c){return ua.map.call(a,b,c)}:function(a,b,c){for(var d=a.length,e=Array(d),
f=ja(a)?a.split(""):a,h=0;h<d;h++)h in f&&(e[h]=b.call(c,f[h],h,a));return e},ya=ua.reduce?function(a,b,c,d){d&&(b=qa(b,d));return ua.reduce.call(a,b,c)}:function(a,b,c,d){var e=c;wa(a,function(c,h){e=b.call(d,e,c,h,a)});return e},za=ua.some?function(a,b,c){return ua.some.call(a,b,c)}:function(a,b,c){for(var d=a.length,e=ja(a)?a.split(""):a,f=0;f<d;f++)if(f in e&&b.call(c,e[f],f,a))return!0;return!1};function Aa(a,b,c){return 2>=arguments.length?ua.slice.call(a,b):ua.slice.call(a,b,c)}
function Ba(a){for(var b=[],c=0;c<a;c++)b[c]=0;return b}function Ca(a){for(var b=[],c=0;c<arguments.length;c++){var d=arguments[c];if("array"==da(d))for(var e=0;e<d.length;e+=8192)for(var f=Ca.apply(null,Aa(d,e,e+8192)),h=0;h<f.length;h++)b.push(f[h]);else b.push(d)}return b};var Da;a:{var Ea=n.navigator;if(Ea){var Fa=Ea.userAgent;if(Fa){Da=Fa;break a}}Da=""}function u(a){return-1!=Da.indexOf(a)};function Ga(){return u("Opera")||u("OPR")}function Ha(){return(u("Chrome")||u("CriOS"))&&!Ga()&&!u("Edge")};function Ia(a){n.setTimeout(function(){throw a;},0)}var Ja;
function Ka(){var a=n.MessageChannel;"undefined"===typeof a&&"undefined"!==typeof window&&window.postMessage&&window.addEventListener&&!u("Presto")&&(a=function(){var a=document.createElement("IFRAME");a.style.display="none";a.src="";document.documentElement.appendChild(a);var b=a.contentWindow,a=b.document;a.open();a.write("");a.close();var c="callImmediate"+Math.random(),d="file:"==b.location.protocol?"*":b.location.protocol+"//"+b.location.host,a=qa(function(a){if(("*"==d||a.origin==d)&&a.data==
c)this.port1.onmessage()},this);b.addEventListener("message",a,!1);this.port1={};this.port2={postMessage:function(){b.postMessage(c,d)}}});if("undefined"!==typeof a&&!u("Trident")&&!u("MSIE")){var b=new a,c={},d=c;b.port1.onmessage=function(){if(q(c.next)){c=c.next;var a=c.qe;c.qe=null;a()}};return function(a){d.next={qe:a};d=d.next;b.port2.postMessage(0)}}return"undefined"!==typeof document&&"onreadystatechange"in document.createElement("SCRIPT")?function(a){var b=document.createElement("SCRIPT");
b.onreadystatechange=function(){b.onreadystatechange=null;b.parentNode.removeChild(b);b=null;a();a=null};document.documentElement.appendChild(b)}:function(a){n.setTimeout(a,0)}};function La(){this.sd=this.gc=null}var Na=new ta(function(){return new Ma},function(a){a.reset()},100);La.prototype.add=function(a,b){var c=Na.get();c.set(a,b);this.sd?this.sd.next=c:this.gc=c;this.sd=c};La.prototype.remove=function(){var a=null;this.gc&&(a=this.gc,this.gc=this.gc.next,this.gc||(this.sd=null),a.next=null);return a};function Ma(){this.next=this.scope=this.Fd=null}Ma.prototype.set=function(a,b){this.Fd=a;this.scope=b;this.next=null};
Ma.prototype.reset=function(){this.next=this.scope=this.Fd=null};function Oa(a,b){Pa||Qa();Sa||(Pa(),Sa=!0);Ta.add(a,b)}var Pa;function Qa(){if(n.Promise&&n.Promise.resolve){var a=n.Promise.resolve(void 0);Pa=function(){a.then(Ua)}}else Pa=function(){var a=Ua;!ka(n.setImmediate)||n.Window&&n.Window.prototype&&n.Window.prototype.setImmediate==n.setImmediate?(Ja||(Ja=Ka()),Ja(a)):n.setImmediate(a)}}var Sa=!1,Ta=new La;function Ua(){for(var a=null;a=Ta.remove();){try{a.Fd.call(a.scope)}catch(b){Ia(b)}Na.put(a)}Sa=!1};function v(a,b){this.Oa=0;this.Xe=void 0;this.Vc=this.Yb=this.B=null;this.ed=this.Ed=!1;if(a!=ca)try{var c=this;a.call(b,function(a){Va(c,2,a)},function(a){Va(c,3,a)})}catch(d){Va(this,3,d)}}function Wa(){this.next=this.context=this.ec=this.Ec=this.child=null;this.vd=!1}Wa.prototype.reset=function(){this.context=this.ec=this.Ec=this.child=null;this.vd=!1};var Xa=new ta(function(){return new Wa},function(a){a.reset()},100);function Ya(a,b,c){var d=Xa.get();d.Ec=a;d.ec=b;d.context=c;return d}
function w(a){if(a instanceof v)return a;var b=new v(ca);Va(b,2,a);return b}function Za(a){return new v(function(b,c){c(a)})}function $a(a,b,c){ab(a,b,c,null)||Oa(ra(b,a))}function bb(a){return new v(function(b,c){var d=a.length,e=[];if(d)for(var f=function(a,c){d--;e[a]=c;0==d&&b(e)},h=function(a){c(a)},k=0,p;k<a.length;k++)p=a[k],$a(p,ra(f,k),h);else b(e)})}function x(){var a,b,c=new v(function(c,e){a=c;b=e});return new cb(c,a,b)}
v.prototype.then=function(a,b,c){return db(this,ka(a)?a:null,ka(b)?b:null,c)};v.prototype.then=v.prototype.then;v.prototype.$goog_Thenable=!0;function eb(a,b,c){db(a,null,b,c)}function fb(a,b){a.Yb||2!=a.Oa&&3!=a.Oa||gb(a);a.Vc?a.Vc.next=b:a.Yb=b;a.Vc=b}
function db(a,b,c,d){var e=Ya(null,null,null);e.child=new v(function(a,h){e.Ec=b?function(c){try{var e=b.call(d,c);a(e)}catch(D){h(D)}}:a;e.ec=c?function(b){try{var e=c.call(d,b);!q(e)&&b instanceof hb?h(b):a(e)}catch(D){h(D)}}:h});e.child.B=a;fb(a,e);return e.child}v.prototype.pg=function(a){this.Oa=0;Va(this,2,a)};v.prototype.qg=function(a){this.Oa=0;Va(this,3,a)};
function Va(a,b,c){0==a.Oa&&(a==c&&(b=3,c=new TypeError("Promise cannot resolve to itself")),a.Oa=1,ab(c,a.pg,a.qg,a)||(a.Xe=c,a.Oa=b,a.B=null,gb(a),3!=b||c instanceof hb||ib(a,c)))}function ab(a,b,c,d){if(a instanceof v)return fb(a,Ya(b||ca,c||null,d)),!0;var e;if(a)try{e=!!a.$goog_Thenable}catch(f){e=!1}else e=!1;if(e)return a.then(b,c,d),!0;e=typeof a;if("object"==e&&null!=a||"function"==e)try{var h=a.then;if(ka(h))return jb(a,h,b,c,d),!0}catch(k){return c.call(d,k),!0}return!1}
function jb(a,b,c,d,e){function f(a){k||(k=!0,d.call(e,a))}function h(a){k||(k=!0,c.call(e,a))}var k=!1;try{b.call(a,h,f)}catch(p){f(p)}}function gb(a){a.Ed||(a.Ed=!0,Oa(a.Df,a))}function kb(a){var b=null;a.Yb&&(b=a.Yb,a.Yb=b.next,b.next=null);a.Yb||(a.Vc=null);return b}
v.prototype.Df=function(){for(var a=null;a=kb(this);){var b=this.Oa,c=this.Xe;if(3==b&&a.ec&&!a.vd)for(var d=void 0,d=this;d&&d.ed;d=d.B)d.ed=!1;if(a.child)a.child.B=null,lb(a,b,c);else try{a.vd?a.Ec.call(a.context):lb(a,b,c)}catch(e){mb.call(null,e)}Xa.put(a)}this.Ed=!1};function lb(a,b,c){2==b?a.Ec.call(a.context,c):a.ec&&a.ec.call(a.context,c)}function ib(a,b){a.ed=!0;Oa(function(){a.ed&&mb.call(null,b)})}var mb=Ia;function hb(a){sa.call(this,a)}t(hb,sa);hb.prototype.name="cancel";
function cb(a,b,c){this.ha=a;this.resolve=b;this.reject=c};/*

 Copyright 2014 The Lovefield Project Authors. All Rights Reserved.

 Licensed under the Apache License, Version 2.0 (the "License");
 you may not use this file except in compliance with the License.
 You may obtain a copy of the License at

     http://www.apache.org/licenses/LICENSE-2.0

 Unless required by applicable law or agreed to in writing, software
 distributed under the License is distributed on an "AS IS" BASIS,
 WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 See the License for the specific language governing permissions and
 limitations under the License.
*/
function y(a,b){this.na=a;this.m=b||this.ve()}var nb=0;m=y.prototype;m.id=g("na");m.ve=function(){return{}};m.ef=g("m");m.Fa=function(){return{id:this.na,value:this.ef()}};m.Lb=function(a){return"#"==a.substr(-1)?this.na:null};function ob(a){return new y(a.id,a.value)}function pb(a){return new y(nb++,a||{})}function qb(a){if(null==a)return null;a=new Uint8Array(a);for(var b="",c=0;c<a.length;++c)var d=a[c].toString(16),b=b+(2>d.length?"0"+d:d);return b};function rb(a){this.type=a}function sb(a){y.call(this,-1,a)}t(sb,y);function tb(a,b,c,d){c=c||function(a,b){return a==b};d=d||function(b){return a[b]};for(var e=a.length,f=b.length,h=[],k=0;k<e+1;k++)h[k]=[],h[k][0]=0;for(var p=0;p<f+1;p++)h[0][p]=0;for(k=1;k<=e;k++)for(p=1;p<=f;p++)c(a[k-1],b[p-1])?h[k][p]=h[k-1][p-1]+1:h[k][p]=Math.max(h[k-1][p],h[k][p-1]);for(var D=[],k=e,p=f;0<k&&0<p;)c(a[k-1],b[p-1])?(D.unshift(d(k-1,p-1)),k--,p--):h[k-1][p]>h[k][p-1]?k--:p--;return D}function ub(a){return ya(arguments,function(a,c){return a+c},0)}
function vb(a){return ub.apply(null,arguments)/arguments.length}function wb(a){var b=arguments.length;if(2>b)return 0;var c=vb.apply(null,arguments);return ub.apply(null,xa(arguments,function(a){return Math.pow(a-c,2)}))/(b-1)}function xb(a){return Math.sqrt(wb.apply(null,arguments))};var yb="StopIteration"in n?n.StopIteration:{message:"StopIteration",stack:""};function zb(){}zb.prototype.next=function(){throw yb;};zb.prototype.ke=function(){return this};function Ab(a){if(a instanceof zb)return a;if("function"==typeof a.ke)return a.ke(!1);if(ha(a)){var b=0,c=new zb;c.next=function(){for(;;){if(b>=a.length)throw yb;if(b in a)return a[b++];b++}};return c}throw Error("Not implemented");}
function Bb(a,b){if(ha(a))try{wa(a,b,void 0)}catch(c){if(c!==yb)throw c;}else{a=Ab(a);try{for(;;)b.call(void 0,a.next(),void 0,a)}catch(d){if(d!==yb)throw d;}}}function Cb(a){if(za(arguments,function(a){return!a.length})||!arguments.length)return new zb;var b=new zb,c=arguments,d=Ba(c.length);b.next=function(){if(d){for(var a=xa(d,function(a,b){return c[b][a]}),b=d.length-1;0<=b;b--){if(d[b]<c[b].length-1){d[b]++;break}if(0==b){d=null;break}d[b]=0}return a}throw yb;};return b};function Db(a){Eb(a);return a.c.concat()}function Eb(a){if(a.uf!=a.c.length){for(var b=0,c=0;b<a.c.length;){var d=a.c[b];Fb(a.U,d)&&(a.c[c++]=d);b++}a.c.length=c}if(a.uf!=a.c.length){for(var e={},c=b=0;b<a.c.length;)d=a.c[b],Fb(e,d)||(a.c[c++]=d,e[d]=1),b++;a.c.length=c}}function Fb(a,b){return Object.prototype.hasOwnProperty.call(a,b)};/*

 Copyright 2015 The Lovefield Project Authors. All Rights Reserved.

 Licensed under the Apache License, Version 2.0 (the "License");
 you may not use this file except in compliance with the License.
 You may obtain a copy of the License at

     http://www.apache.org/licenses/LICENSE-2.0

 Unless required by applicable law or agreed to in writing, software
 distributed under the License is distributed on an "AS IS" BASIS,
 WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 See the License for the specific language governing permissions and
 limitations under the License.
*/
function z(){return new window.Map}function Gb(a){var b=0,c=Array(a.size);a.forEach(function(a,e){c[b++]=e});return c}function A(a){var b=0,c=Array(a.size);a.forEach(function(a){c[b++]=a});return c};var Hb={};r("lf.TransactionType",Hb);Hb.READ_ONLY=0;Hb.READ_WRITE=1;function Ib(a,b){this.La=a;this.ff=b;this.$=x()}Ib.prototype.ma=function(){try{Jb(this.La)}catch(a){return Za(a)}return(0==this.ff?this.jc():Kb(this)).then(function(a){this.La.ma();return a}.bind(this))};function Kb(a){Lb(a);Mb(a);return a.jc()}
function Lb(a){a.La.kb.forEach(function(a,c){var d=this.La.Z().get(c),d=this.I(d.getName(),d.Zb.bind(d)),e=A(a.za).map(function(a){return a.id()});0<e.length&&eb(d.remove(e),this.Hd,this);e=A(a.oa).map(function(a){return a[1]}).concat(A(a.ya));eb(d.put(e),this.Hd,this)},a)}function Mb(a){Nb(a.La).forEach(function(a){var c=this.I(a.getName(),ob),d;c.get([-1]).then(function(a){d=a;return c.remove([])}).then(function(){c.put(d);c.put(a.Fa())},this.Hd.bind(this))},a)}Ib.prototype.Hd=function(a){this.$.reject(a)};function Ob(a){this.lg=a}Ob.prototype.toString=g("lg");var Pb=new Ob("backstore"),Rb=new Ob("cache"),Sb=new Ob("indexstore"),Tb=new Ob("engine"),Ub=new Ob("runner"),Vb=new Ob("observerregistry"),Wb=new Ob("schema");var Xb=Ga(),Yb=u("Trident")||u("MSIE"),Zb=u("Edge"),$b=u("Gecko")&&!(-1!=Da.toLowerCase().indexOf("webkit")&&!u("Edge"))&&!(u("Trident")||u("MSIE"))&&!u("Edge"),ac=-1!=Da.toLowerCase().indexOf("webkit")&&!u("Edge");function bc(){var a=Da;if($b)return/rv\:([^\);]+)(\)|;)/.exec(a);if(Zb)return/Edge\/([\d\.]+)/.exec(a);if(Yb)return/\b(?:MSIE|rv)[: ]([^\);]+)(\)|;)/.exec(a);if(ac)return/WebKit\/(\S+)/.exec(a)}
(function(){if(Xb&&n.opera){var a=n.opera.version;return ka(a)?a():a}var a="",b=bc();b&&(a=b?b[1]:"");return Yb&&(b=(b=n.document)?b.documentMode:void 0,b>parseFloat(a))?String(b):a})();!u("Android")||Ha()||u("Firefox")||Ga();Ha();function B(a){return q(a)?new window.Set(a):new window.Set}function cc(a){var b=0,c=Array(a.size);a.forEach(function(a){c[b++]=a});return c}function dc(a,b){if(b.size>a.size)return!1;var c=!0;b.forEach(function(b){c=c&&a.has(b)});return c};function ec(a,b){this.na=a;this.m=b||{}}function fc(a){var b=B();a.forEach(function(a){b.add(a>>9)});return cc(b)}ec.prototype.W=g("na");function gc(a,b){b.forEach(function(a){this.m[a.id()]=a.Fa()},a)}function hc(a,b){b.forEach(function(a){delete this.m[a]},a)}ec.prototype.Fa=function(){return{id:this.na,value:JSON.stringify(this.m)}};function ic(a){return new ec(a.id,JSON.parse(a.value))};function jc(a,b,c){this.Y=a;this.Hb=b;this.Ye=c}m=jc.prototype;m.get=function(a){if(0==a.length)return this.sc();var b=this.Hb;return kc(this,a).then(function(c){return a.map(function(a){var e=c.get(a>>9);return b(e.m[a])})})};function kc(a,b){var c=z(),d=x(),e=fc(b).map(function(a){return new v(function(b,d){var e;try{e=this.Y.get(a)}catch(D){d(D);return}e.onerror=d;e.onsuccess=function(a){a=ic(a.target.result);c.set(a.W(),a);b()}},this)},a);bb(e).then(function(){d.resolve(c)});return d.ha}
m.sc=function(){return new v(function(a,b){var c=[],d;try{d=this.Y.openCursor()}catch(e){b(e);return}d.onerror=b;d.onsuccess=function(){var b=d.result;if(b){var e;e=ic(b.value).m;for(var k in e)c.push(this.Hb(e[k]));b.continue()}else a(c)}.bind(this)},this)};m.Ob=function(a){return new v(function(b,c){var d;try{d=a()}catch(e){c(e);return}d.onsuccess=b;d.onerror=c},this)};
m.put=function(a){if(0==a.length)return w();var b=z();a.forEach(function(a){var d;d=a.id()>>9;var e=b.get(d)||null;null===e&&(e=this.Ye(this.Y.name,d));gc(e,[a]);b.set(d,e)},this);a=A(b).map(function(a){return this.Ob(function(){return this.Y.put(a.Fa())}.bind(this))},this);return bb(a)};
m.remove=function(a){if(0==a.length)return this.Ob(function(){return this.Y.clear()}.bind(this));var b=z();a.forEach(function(a){var d=a>>9,e=b.get(d)||null;null===e&&(e=this.Ye(this.Y.name,d));hc(e,[a]);b.set(d,e)},this);a=A(b).map(function(a){return this.Ob(function(){return 0==Object.keys(a.m).length?this.Y.delete(a.W()):this.Y.put(a.Fa())}.bind(this))},this);return bb(a)};function lc(a,b,c){a=a.l(Rb);var d=[c<<9,(c+1<<9)-1];b=a.Ua(b,d[0],d[1]);c=new ec(c);gc(c,b);return c}
function mc(a,b){return new ec(b)};function nc(){};function oc(a){this.ka=a.l(Rb);this.F=a.l(Sb);this.o=a.l(Wb)}oc.prototype.update=function(a){a.forEach(function(a){pc(this,a);qc(this,a)},this)};function qc(a,b){var c=b.getName();b.za.forEach(function(a,b){this.ka.remove(c,b)},a);b.ya.forEach(function(a){this.ka.set(c,a)},a);b.oa.forEach(function(a){this.ka.set(c,a[1])},a)}function pc(a,b){var c=a.o.table(b.getName());rc(b).forEach(function(a){sc(this,c,a)},a)}
function sc(a,b,c){var d=[];(a.F.Kc.get(b.getName())||[]).forEach(function(a){try{tc(a,c),d.push(a)}catch(b){throw d.forEach(function(a){tc(a,[c[1],c[0]])},this),b;}},a)}function tc(a,b){var c=null===b[1]?void 0:b[1].Lb(a.getName()),d=null===b[0]?void 0:b[0].Lb(a.getName());if(!q(d)&&q(c))a.add(c,b[1].id());else if(q(d)&&q(c)){if(null===c||null===d){if(c==d)return}else if(0==a.kc().compare(d,c))return;a.add(c,b[1].id());a.remove(d,b[0].id())}else q(d)&&!q(c)&&a.remove(d,b[0].id())};var uc={};r("lf.ConstraintAction",uc);uc.RESTRICT=0;uc.CASCADE=1;var vc={};r("lf.ConstraintTiming",vc);vc.IMMEDIATE=0;vc.DEFERRABLE=1;var wc={};r("lf.Order",wc);wc.DESC=0;wc.ASC=1;var xc={};r("lf.Type",xc);xc.ARRAY_BUFFER=0;xc.BOOLEAN=1;xc.DATE_TIME=2;xc.INTEGER=3;xc.NUMBER=4;xc.STRING=5;xc.OBJECT=6;var yc={0:null,1:!1,2:Object.freeze(new Date(0)),3:0,4:0,5:"",6:null};r("lf.type.DEFAULT_VALUES",yc);function C(a,b){this.code=a;this.message="http://sn.im/2a0j3wn?c="+a;if(1<arguments.length)for(var c=1;c<=Math.min(4,arguments.length-1);++c)this.message+="&p"+(c-1)+"="+encodeURIComponent(String(arguments[c].toString().slice(0,64)))}t(C,Error);function zc(a){this.F=a.l(Sb);this.o=a.l(Wb);this.Zc=null}function Ac(a,b,c){var d=b.xb().Zf;c.forEach(function(a){d.forEach(function(b){if(null==a.m[b.getName()])throw new C(202,b.j());},this)},a)}function Bc(a,b,c,d){b.xb().Gd().forEach(function(a){a.timing==d&&Cc(this,a,c)},a)}function Cc(a,b,c){var d=Dc(a,b);c.forEach(function(a){if(Ec(a[0],a[1],b.name)&&(a=a[1].m[b.Eb],null!==a&&!d.Za(a)))throw new C(203,b.name);},a)}
function Dc(a,b){null===a.Zc&&(a.Zc=z());var c=a.Zc.get(b.name)||null;null===c&&(c=a.o.table(b.rb)[b.Fc].sa(),c=a.F.get(c.j()),a.Zc.set(b.name,c));return c}function Ec(a,b,c){return(null===a?null!==b:null===b)||a.Lb(c)!=b.Lb(c)}function Fc(a,b,c,d){b=Gc(a.o.info(),b.getName());null!=b&&b.forEach(function(a){if(a.timing==d){var b=this.F.get(a.name),h=Dc(this,a);c.forEach(function(c){if(Ec(c[0],c[1],h.getName())&&b.Za(c[0].m[a.Fc]))throw new C(203,a.name);},this)}},a)}
function Ic(a,b,c,d){0!=c.length&&(c=c.map(function(a){return[null,a]}),Bc(a,b,c,d))}function Jc(a,b,c,d){0!=c.length&&(Bc(a,b,c,d),Fc(a,b,c,d))}function Kc(a,b,c,d){0!=c.length&&(c=c.map(function(a){return[a,null]}),Fc(a,b,c,d))};function Lc(a){this.ya=z();this.oa=z();this.za=z();this.s=a}m=Lc.prototype;m.getName=g("s");m.add=function(a){if(this.za.has(a.id())){var b=[this.za.get(a.id()),a];this.oa.set(a.id(),b);this.za.delete(a.id())}else this.ya.set(a.id(),a)};m.modify=function(a){var b=a[1],c=a[0].id();this.ya.has(c)?this.ya.set(c,b):(this.oa.has(c)&&(a=[this.oa.get(a[0].id())[0],b]),this.oa.set(c,a))};
m.delete=function(a){if(this.ya.has(a.id()))this.ya.delete(a.id());else if(this.oa.has(a.id())){var b=this.oa.get(a.id())[0];this.oa.delete(a.id());this.za.set(a.id(),b)}else this.za.set(a.id(),a)};function rc(a){var b=[];a.ya.forEach(function(a){b.push([null,a])});a.oa.forEach(function(a){b.push(a)});a.za.forEach(function(a){b.push([a,null])});return b}m.toString=function(){return"["+Gb(this.ya).toString()+"], ["+Gb(this.oa).toString()+"], ["+Gb(this.za).toString()+"]"};
function Mc(a){var b=new Lc(a.s);a.ya.forEach(function(a){b.delete(a)});a.za.forEach(function(a){b.add(a)});a.oa.forEach(function(a){b.modify([a[1],a[0]])});return b}m.Pf=function(){return 0==this.ya.size&&0==this.za.size&&0==this.oa.size};function Nc(a,b){this.ja=z();b.forEach(function(a){this.ja.set(a.getName(),a)},this);this.ka=a.l(Rb);this.F=a.l(Sb);this.Ja=new zc(a);this.gd=new oc(a);this.kb=z()}function Nb(a){var b=[];Gb(a.kb).map(function(a){return this.ja.get(a)},a).forEach(function(a){a.Ab()&&(a.Aa().forEach(function(a){b.push(this.F.get(a.j()))},this),b.push(this.F.get(a.getName()+".#")))},a);return b}m=Nc.prototype;m.Z=g("ja");
function Oc(a){var b=[];a.ja.forEach(function(a){a.Ab()&&(a.Aa().forEach(function(a){b.push(a.j())}),b.push(a.getName()+".#"))});return b}m.pb=function(a,b){Pc(this,a);Ac(this.Ja,a,b);Ic(this.Ja,a,b,0);for(var c=0;c<b.length;c++)Qc(this,a,[null,b[c]])};
function Qc(a,b,c){var d=b.getName(),e=a.kb.get(d)||new Lc(d);a.kb.set(d,e);try{sc(a.gd,b,c)}catch(f){throw f;}b=c[0];var h=c[1];null===b&&null!==h?(a.ka.set(d,h),e.add(h)):null!==b&&null!==h?(a.ka.set(d,h),e.modify(c)):null!==b&&null===h&&(a.ka.remove(d,b.id()),e.delete(b))}m.update=function(a,b){Pc(this,a);Ac(this.Ja,a,b);for(var c=0;c<b.length;c++){var d=b[c],d=[this.ka.get(d.id()),d];Jc(this.Ja,a,[d],0);Qc(this,a,d)}};
m.Jd=function(a,b){Pc(this,a);Ac(this.Ja,a,b);for(var c=0;c<b.length;c++){var d=b[c],e=null,f,h=a.xb().bd();if(null===h)f=null;else{f=this.Ja;var h=h.j(),k=d.Lb(h);f=f.F.get(h).get(k);f=0==f.length?null:f[0]}null!=f?(e=this.ka.get(f),d.na=f,Jc(this.Ja,a,[[e,d]],0)):Ic(this.Ja,a,[d],0);Qc(this,a,[e,d])}};m.remove=function(a,b){Pc(this,a);Kc(this.Ja,a,b,0);for(var c=0;c<b.length;c++)Qc(this,a,[b[c],null])};
function Jb(a){a.kb.forEach(function(a){var c=this.ja.get(a.getName());Ic(this.Ja,c,A(a.ya),1);Kc(this.Ja,c,A(a.za),1);Jc(this.Ja,c,A(a.oa),1)},a)}m.ma=aa();m.Bb=function(){var a=A(this.kb).map(function(a){return Mc(a)});this.gd.update(a)};function Pc(a,b){if(!a.ja.has(b.getName()))throw new C(106,b.getName());};function Rc(a,b,c,d){this.b=a;this.u=b;this.aa=null===this.b?!1:c;this.la=null===this.u?!1:d}Rc.prototype.toString=function(){return(this.aa?"(":"[")+(null===this.b?"unbound":this.b)+", "+(null===this.u?"unbound":this.u)+(this.la?")":"]")};function Sc(a){if(null===a.b&&null===a.u)return[];var b=null,c=null;null===a.b||(b=new Rc(null,a.b,!1,!a.aa));null===a.u||(c=new Rc(a.u,null,!a.la,!1));return[b,c].filter(function(a){return null!==a})}
Rc.prototype.reverse=function(){return new Rc(this.u,this.b,this.la,this.aa)};function Tc(a,b){var c=Uc(a.b,b.b,!0,a.aa,b.aa);if(0==c)return!0;var d=-1==c?a:b,c=1==c?a:b;return null===d.u||d.u>c.b||d.u==c.b&&!d.la&&!c.aa}function Vc(){return new Rc(null,null,!1,!1)}function Wc(a){return null===a.b&&null===a.u}function Xc(a){return null!=a.b&&a.b==a.u&&!a.aa&&!a.la}
Rc.prototype.contains=function(a){var b=null===this.u||a<this.u||a==this.u&&!this.la;return(null===this.b||a>this.b||a==this.b&&!this.aa)&&b};function Uc(a,b,c,d,e){function f(a){return c?a:1==a?-1:1}d=d||!1;e=e||!1;return null===a?null===b?(d?!e:e)?d?f(1):f(-1):0:f(-1):null===b?f(1):a<b?-1:a==b?(d?!e:e)?d?f(1):f(-1):0:1}function Yc(a,b){var c=Uc(a.b,b.b,!0,a.aa,b.aa);0==c&&(c=Uc(a.u,b.u,!1,a.la,b.la));return c};function E(a,b){this.entries=a;this.J=B(b);this.Sa=null}function F(a){return cc(a.J)}function Zc(a){return a.entries.map(function(a){return a.ra.m})}function $c(a){return a.entries.map(function(a){return a.ra.id()})}function ad(a,b){return a.Sa.get(b.j())}var bd=null;function cd(){null===bd&&(bd=new E([],[]));return bd}
function dd(a){if(0==a.length)return cd();for(var b=a.reduce(function(a,b){return a+b.entries.length},0),c=Array(b),d=0,b=a.map(function(a){var b=z();a.entries.forEach(function(a){c[d++]=a;b.set(a.id,a)});return b}),e=z(),f=0;f<c.length;f++)b.every(function(a){return a.has(c[f].id)})&&e.set(c[f].id,c[f]);return new E(A(e),cc(a[0].J))}function ed(a){if(0==a.length)return cd();var b=z();a.forEach(function(a){a.entries.forEach(function(a){b.set(a.id,a)})});return new E(A(b),cc(a[0].J))}
function fd(a,b){var c=1<b.length,d=a.map(function(a){return new gd(a,c)});return new E(d,b)}function gd(a,b){this.ra=a;this.id=hd++;this.Md=b}var hd=0;function G(a,b){var c=b.Ta();return null!==c&&a.ra.m.hasOwnProperty(c)?a.ra.m[c]:a.Md?a.ra.m[H(b.I())][b.getName()]:a.ra.m[b.getName()]}function id(a,b,c){var d=b.Ta();if(null!=d)a.ra.m[d]=c;else if(a.Md){var d=H(b.I()),e=a.ra.m[d];null==e&&(e={},a.ra.m[d]=e);e[b.getName()]=c}else a.ra.m[b.getName()]=c}
function jd(a,b,c,d){function e(a,b){if(a.Md){var c=a.ra.m,d;for(d in c)f[d]=c[d]}else f[b[0]]=a.ra.m}var f={};e(a,b);e(c,d);a=new y(-1,f);return new gd(a,!0)};r("lf.bind",function(a){return new I(a)});function I(a){this.ca=a}r("lf.Binder",I);I.prototype.sa=g("ca");function kd(){this.He=ld();var a=md();this.bc=z();this.bc.set(1,nd());this.bc.set(2,od());this.bc.set(4,a);this.bc.set(3,a);this.bc.set(5,pd())}kd.tc=function(){return kd.De?kd.De:kd.De=new kd};function qd(a,b,c){return(a.bc.get(b)||null).get(c)||null}function ld(){function a(a){return a}var b=z();b.set(1,function(a){return null===a?null:a?1:0});b.set(2,function(a){return null===a?null:a.getTime()});b.set(3,a);b.set(4,a);b.set(5,a);return b}
function nd(){var a=z();a.set("eq",function(a,c){return a==c});a.set("neq",function(a,c){return a!=c});return a}
function md(){var a=nd();a.set("between",function(a,c){return null===a||null===c[0]||null===c[1]?!1:a>=c[0]&&a<=c[1]});a.set("gte",function(a,c){return null===a||null===c?!1:a>=c});a.set("gt",function(a,c){return null===a||null===c?!1:a>c});a.set("in",function(a,c){return-1!=c.indexOf(a)});a.set("lte",function(a,c){return null===a||null===c?!1:a<=c});a.set("lt",function(a,c){return null===a||null===c?!1:a<c});return a}
function pd(){var a=md();a.set("match",function(a,c){return null===a||null===c?!1:(new RegExp(c)).test(a)});return a}
function od(){var a=z();a.set("between",function(a,c){return null===a||null===c[0]||null===c[1]?!1:a.getTime()>=c[0].getTime()&&a.getTime()<=c[1].getTime()});a.set("eq",function(a,c){return(null===a?-1:a.getTime())==(null===c?-1:c.getTime())});a.set("gte",function(a,c){return null===a||null===c?!1:a.getTime()>=c.getTime()});a.set("gt",function(a,c){return null===a||null===c?!1:a.getTime()>c.getTime()});a.set("in",function(a,c){return c.some(function(c){return c.getTime()==a.getTime()})});a.set("lte",
function(a,c){return null===a||null===c?!1:a.getTime()<=c.getTime()});a.set("lt",function(a,c){return null===a||null===c?!1:a.getTime()<c.getTime()});a.set("neq",function(a,c){return(null===a?-1:a.getTime())!=(null===c?-1:c.getTime())});return a};function J(){this.g=this.B=null}var rd=[];J.prototype.getParent=g("B");J.prototype.ab=function(){for(var a=this;!fa(a.getParent());)a=a.getParent();return a};function sd(a){for(var b=0;!fa(a.getParent());)b++,a=a.getParent();return b}function K(a){return a.g||rd}function td(a,b){return K(a)[b]||null}function ud(a,b,c){b.B=a;null===a.g?a.g=[b]:a.g.splice(c,0,b)}function L(a,b){b.B=a;null===a.g?a.g=[b]:a.g.push(b)}
function vd(a,b){var c=a.g&&a.g[b];return c?(c.B=null,a.g.splice(b,1),0==a.g.length&&(a.g=null),c):null}J.prototype.removeChild=function(a){return vd(this,K(this).indexOf(a))};function wd(a,b,c){td(a,c).B=null;b.B=a;a.g[c]=b}function xd(a,b,c){!1!==b.call(c,a)&&K(a).forEach(function(a){xd(a,b,c)})};function yd(){J.call(this);this.na=zd++}t(yd,J);var zd=0;yd.prototype.W=g("na");function Ad(a,b,c){yd.call(this);this.L=a;this.value=b;this.D=c;this.oc=qd(kd.tc(),this.L.K(),this.D);this.Va=!1;this.Xb=b}t(Ad,yd);m=Ad.prototype;m.Fb=function(){var a=new Ad(this.L,this.value,this.D);a.Xb=this.Xb;a.qd(this.Va);var b=this.W();a.na=b;return a};m.$a=function(a){return null!=a?(a.push(this.L),a):[this.L]};m.qd=ba("Va");function Bd(a){var b=!1;a.value instanceof I||(b="array"==da(a.value)?!a.value.some(function(a){return a instanceof I}):!0);if(!b)throw new C(501);}
m.eval=function(a){Bd(this);if("in"==this.D)return Cd(this,a);var b=a.entries.filter(function(a){return this.oc(G(a,this.L),this.value)!=this.Va},this);return new E(b,F(a))};m.bind=function(a){if(this.Xb instanceof I){var b=this.Xb.sa();if(a.length<=b)throw new C(510);this.value=a[b]}else"array"==da(this.Xb)&&(this.value=this.Xb.map(function(b){if(b instanceof I){var d=b.sa();if(a.length<=d)throw new C(510);return a[b.sa()]}return b}))};
function Cd(a,b){var c=B(a.value),d=function(a){return null===a?!1:c.has(a)!=this.Va}.bind(a),e=b.entries.filter(function(a){return d(G(a,this.L))},a);return new E(e,F(b))}m.toString=function(){return"value_pred("+this.L.j()+" "+this.D+(this.Va?"(complement)":"")+" "+this.value+")"};function Dd(a){this.ea=a;this.Wc=this.va=null}function Ed(a,b){null===a.va&&null!=a.A&&(a.va=Fd(a.A));return a.va.get(b)||null}function Fd(a){var b=z();xd(a,function(a){b.set(a.W(),a)});return b}function Gd(a,b){b.A&&(a.A=b.A.Fb());a.Wc=b}Dd.prototype.bind=function(){return this};function Hd(a,b){var c=a.A;null!=c&&xd(c,function(a){a instanceof Ad&&a.bind(b)})};function Id(a){Dd.call(this,a)}t(Id,Dd);function Jd(a){var b="";a.forEach(function(c,d){b+=c.L.j()+" ";b+=1==c.eb?"ASC":"DESC";d<a.length-1&&(b+=", ")});return b}Id.prototype.Z=function(){return B(this.b)};Id.prototype.clone=function(){var a=new Id(this.ea);Gd(a,this);this.f&&(a.f=this.f.slice());this.b&&(a.b=this.b.slice());a.X=this.X;a.N=this.N;this.M&&(a.M=this.M.slice());this.fa&&(a.fa=this.fa.slice());this.Mb&&(a.Mb=this.Mb);this.Sb&&(a.Sb=this.Sb);a.qb=this.qb;return a};
Id.prototype.bind=function(a){Id.Cb.bind.call(this,a);null!=this.Mb&&(this.X=a[this.Mb.sa()]);null!=this.Sb&&(this.N=a[this.Sb.sa()]);Hd(this,a);return this};function Kd(a,b){this.wa=a;this.ja=b}Kd.prototype.ab=g("wa");Kd.prototype.Z=g("ja");function Ld(a){var b=B();a.forEach(function(a){a.Z().forEach(b.add.bind(b))});return b};function Md(a,b){this.global=a;this.ub=a.l(Pb);this.nd=b.map(function(a){return a.context});this.Re=b.map(function(a){return a.Xd});this.te=Ld(this.Re);this.gf=Nd(this);this.tb=x()}function Nd(a){return a.nd.some(function(a){return!(a instanceof Id)})?1:0}m=Md.prototype;
m.exec=function(){function a(){var f=d.shift();if(f){var h=e[c.length];return f.ab().exec(b,h).then(function(b){c.push(b[0]);return a()})}return w()}var b=new Nc(this.global,this.te),c=[],d=this.Re.slice(),e=this.nd;return a().then(function(){return this.ub.Gb(this.gf,b).ma()}.bind(this)).then(function(){this.Ud(c);return c}.bind(this),function(a){b.Bb();throw a;})};m.K=g("gf");m.Z=g("te");m.dc=g("tb");m.W=function(){return la(this)};m.Ud=aa();function Od(a,b){Md.call(this,a,b);this.zb=a.l(Vb)}t(Od,Md);Od.prototype.getPriority=l(0);Od.prototype.Ud=function(a){this.nd.forEach(function(b,c){Pd(this.zb,b,a[c])},this)};function Qd(a,b){this.h=a;this.zb=a.l(Vb);this.Na=a.l(Ub);this.gd=new oc(a);this.kb=b;var c=a.l(Wb),d=this.kb.map(function(a){return c.table(a.getName())});this.ja=B(d);this.tb=x()}m=Qd.prototype;m.exec=function(){this.gd.update(this.kb);this.Ic();return w()};m.K=l(1);m.Z=g("ja");m.dc=g("tb");m.W=function(){return la(this)};m.getPriority=l(1);m.Ic=function(){var a=Rd(this.zb,this.ja);0!=a.length&&(a=new Od(this.h,a),Sd(this.Na,a))};function Td(a){this.h=a;this.ub=a.l(Pb);this.Na=a.l(Ub)}Td.prototype.Sd=function(a){a=new Qd(this.h,a);Sd(this.Na,a)};function M(a,b){this.Ub=a;this.i=b;this.Qa=z()}r("lf.backstore.FirebaseRawBackStore",M);M.prototype.cd=g("i");M.prototype.dd=function(){throw new C(351);};function Ud(a,b){var c=x(),d=a;b.length&&(d=a.child(b));d.once("value",function(a){c.resolve(a.val())},function(a){c.reject(a)});return c.ha}function Vd(a,b,c){function d(a){a?e.reject(a):e.resolve()}c=c||!1;var e=x();c?a.set(b,d):a.update(b,d);return e.ha}
M.prototype.Ba=function(a){return Ud(this.i,"@rev/R").then(function(a){this.Ha=a;return Ud(this.i,"@table")}.bind(this)).then(function(b){var c=0,d;for(d in b)this.Qa.set(d,b[d]),b[d]>c&&(c=b[d]);a.xa().forEach(function(a){this.Qa.has(a.getName())||(b[a.getName()]=++c)},this);d=this.i.child("@table");return Vd(d,b)}.bind(this))};
function Wd(a,b,c){var d=a.Qa.get(b);return null!=d?function(){var a={},b=x();this.i.orderByChild("T").equalTo(d).once("value",function(d){d.forEach(function(b){var d=c(b.val());a[parseInt(b.key(),10)]=d});b.resolve(a)});return b.ha}.call(a).then(function(a){a["@rev"]={R:++this.Ha};return Vd(this.i,a)}.bind(a)):w()}M.prototype.mc=function(a){return Wd(this,a,l(null)).then(function(){this.Qa.delete(a);return Vd(this.i.child("@table/"+a),null,!0)}.bind(this))};M.prototype.dropTable=M.prototype.mc;
M.prototype.hc=function(a,b,c){return Wd(this,a,function(a){var e=a.P;e[b]=c;return{R:this.Ha+1,T:a.T,P:e}}.bind(this))};M.prototype.addTableColumn=M.prototype.hc;M.prototype.nc=function(a,b){return Wd(this,a,function(a){var d=a.P;delete d[b];return{R:this.Ha+1,T:a.T,P:d}}.bind(this))};M.prototype.dropTableColumn=M.prototype.nc;M.prototype.Hc=function(a,b,c){return Wd(this,a,function(a){var e=a.P;e[c]=e[b];delete e[b];return{R:this.Ha+1,T:a.T,P:e}}.bind(this))};M.prototype.renameTableColumn=M.prototype.Hc;
M.prototype.vb=function(){throw new C(351);};M.prototype.createRow=M.prototype.vb;M.prototype.wc=g("Ub");M.prototype.getVersion=M.prototype.wc;M.prototype.$b=function(a){var b=x();a=this.Qa.get(a);this.i.orderByChild("T").equalTo(a).once("value",function(a){var d=[];a.forEach(function(a){d.push(a.val().P)});b.resolve(d)});return b.ha};M.prototype.dump=function(){var a={},b=Gb(this.Qa).map(function(b){return this.$b(b).then(function(d){a[b]=d})}.bind(this));return bb(b).then(function(){return a})};
M.prototype.dump=M.prototype.dump;function Xd(a,b,c){Ib.call(this,c,b);this.i=a}t(Xd,Ib);Xd.prototype.I=function(a){return this.i.uc(a)};
Xd.prototype.jc=function(){var a=this.La.kb;if(0==a.size)this.$.resolve();else{var b=this.i.Ha+1;this.i.Ha=b;var c={"@rev":{R:b}};a.forEach(function(a,e){var f=this.i.Qa.get(e);a.ya.forEach(function(a,d){c[d]={R:b,T:f,P:a.m}});a.oa.forEach(function(a,d){c[d]={R:b,T:f,P:a[1].m}});a.za.forEach(function(a,b){c[b]=null})},this);this.i.i.update(c,function(c){null===c?this.$.resolve():(this.i.Ha=b-1,c=A(a).map(function(a){return Yd(this.i,a.getName())},this),bb(c).then(this.$.reject.bind(this.$),this.$.reject.bind(this.$)))}.bind(this))}return this.$.ha};function Zd(){this.mb=z()}function $d(a,b){if(0==b.length)return A(a.mb);var c=[];b.forEach(function(a){a=this.mb.get(a)||null;null===a||c.push(a)},a);return c}Zd.prototype.getData=g("mb");Zd.prototype.get=function(a){return w($d(this,a))};function ae(a,b){b.forEach(function(a){this.mb.set(a.id(),a)},a)}Zd.prototype.put=function(a){ae(this,a);return w()};function be(a,b){0==b.length||b.length==a.mb.size?a.mb.clear():b.forEach(function(a){this.mb.delete(a)},a)}
Zd.prototype.remove=function(a){be(this,a);return w()};function ce(a){return 0==a.mb.size?0:Gb(a.mb).reduce(function(a,c){return a>c?a:c},0)};function de(a,b){this.o=a;this.nf=b;this.Gc=z();this.Ha=-1;this.J=z();this.Qa=z();this.yd=null}m=de.prototype;
m.Ba=function(a){this.i=this.nf.child(this.o.name());var b=a||function(){return w()};return Ud(this.i,"@db/version").then(function(a){return null===a?Vd(this.i,ee(this),!0).then(function(){var a=new M(0,this.i);return b(a)}.bind(this)):a==this.o.version()?Ud(this.i,"@rev/R").then(function(a){this.Ha=a;return Ud(this.i,"@table")}.bind(this)).then(function(a){for(var b in a)this.Qa.set(b,a[b]);a=this.o.xa().map(function(a){return Yd(this,a.getName())},this);return bb(a)}.bind(this)).then(function(){fe(this);
ge(this);return w()}.bind(this)):this.Vd(a,b).then(function(){return this.Ba()}.bind(this))}.bind(this))};m.Vd=function(a,b){var c=new M(a,this.i);return c.Ba(this.o).then(function(){return w()}.bind(this)).then(function(){return b(c)}).then(function(){var a=this.i.child("@db");return Vd(a,{version:this.o.version()},!0)}.bind(this))};
function ge(a){a.i.off();a.i.on("child_removed",a.ag.bind(a));a.zd&&(a.zd.off(),a.Gc.clear());a.zd=a.i.orderByChild("R").startAt(a.Ha+1);a.zd.on("value",a.Sd.bind(a))}function fe(a){nb=A(a.J).map(function(a){return ce(a)}).reduce(function(a,c){return a>c?a:c},0)+1}m.ag=function(a){var b=a.val(),c=this.Gc.get(b.T)||null;null===c&&(c=B(),this.Gc.set(b.T,c));c.add(parseInt(a.key(),10))};
m.Sd=function(a){var b=a.child("@rev/R").val();null!=b&&b!=this.Ha&&(this.Ha=b,a=he(this,a),a.forEach(function(a){var b=this.J.get(a.getName()),e=Gb(a.za);0<e.length&&be(b,e);var f=A(a.ya);a.oa.forEach(function(a){f.push(a[1])});ae(b,f)},this),0<a.length&&this.Bc(a),ge(this))};
function he(a,b){var c=B(),d=z();a.Qa.forEach(function(a,b){var h=this.J.get(b),k=new Lc(b);if(this.Gc.has(a)){var p=cc(this.Gc.get(a));p.forEach(function(a){c.add(a)});$d(h,p).forEach(function(a){k.delete(a)})}d.set(a,k)}.bind(a));b.forEach(function(a){if("@rev"!=a.key()){var b=parseInt(a.key(),10);if(!c.has(b)){a=a.val();var h=d.get(a.T),k=this.J.get(h.getName());k.getData().has(b)?h.modify([$d(k,[b])[0],new y(b,a.P)]):h.add(new y(b,a.P))}}}.bind(a));return A(d).filter(function(a){return!a.Pf()})}
function Yd(a,b){var c=x(),d=a.Qa.get(b);a.i.orderByChild("T").equalTo(d).once("value",function(a){var d=new Zd,h=[];a.forEach(function(a){h.push(new y(parseInt(a.key(),10),a.val().P))});ae(d,h);this.J.set(b,d);c.resolve()}.bind(a));return c.ha}function ee(a){var b={};b["@db"]={version:a.o.version()};b["@rev"]={R:1};a.Ha=1;b["@table"]={};a.o.xa().forEach(function(a,d){var e=a.getName();b["@table"][e]=d;this.J.set(e,new Zd);this.Qa.set(e,d)},a);return b}m.Gb=function(a,b){return new Xd(this,a,b)};
m.uc=function(a){var b=this.J.get(a)||null;if(null!==b)return b;throw new C(101,a);};m.close=aa();m.subscribe=ba("yd");m.Bc=function(a){null!=this.yd&&this.yd(a)};function N(a,b,c,d){this.i=b;this.Ia=c;this.Ub=a;this.Tc=d}r("lf.backstore.IndexedDBRawBackStore",N);N.prototype.cd=g("i");N.prototype.getRawDBInstance=N.prototype.cd;N.prototype.dd=g("Ia");N.prototype.getRawTransaction=N.prototype.dd;N.prototype.mc=function(a){return new v(function(b,c){try{this.i.deleteObjectStore(a)}catch(d){c(d);return}b()},this)};N.prototype.dropTable=N.prototype.mc;
function ie(a,b,c,d){return new v(function(a,f){var h;try{var k=this.Ia.objectStore(b);h=k.openCursor()}catch(p){f(p);return}h.onsuccess=function(){var b=h.result;b?(c(b),b.continue()):(d(k),a())};h.onerror=f},a)}function je(a){var b=null;return b=a instanceof ArrayBuffer?qb(a):a instanceof Date?a.getTime():a}
function ke(a,b,c){function d(a){var b=ic(a.value),d=b.m,e;for(e in d){var D=ob(d[e]);c(D);d[e]=D.Fa()}a.update(b.Fa())}function e(a){var b=ob(a.value);c(b);a.update(b.Fa())}return ie(a,b,a.Tc?d:e,aa())}N.prototype.hc=function(a,b,c){var d=je(c);return ke(this,a,function(a){a.m[b]=d})};N.prototype.addTableColumn=N.prototype.hc;N.prototype.nc=function(a,b){return ke(this,a,function(a){delete a.m[b]})};N.prototype.dropTableColumn=N.prototype.nc;
N.prototype.Hc=function(a,b,c){return ke(this,a,function(a){a.m[c]=a.m[b];delete a.m[b]})};N.prototype.renameTableColumn=N.prototype.Hc;function le(a,b){var c=[];return new v(function(a,e){var f;try{f=this.Ia.objectStore(b).openCursor()}catch(h){e(h);return}f.onsuccess=function(){var b=f.result;if(b){if(this.Tc){var e;e=ic(b.value).m;for(var h in e)c.push(e[h])}else c.push(b.value);b.continue()}else a(c)}.bind(this);f.onerror=e},a)}N.prototype.vb=function(a){var b={},c;for(c in a)b[c]=je(a[c]);return pb(b)};
N.prototype.createRow=N.prototype.vb;N.prototype.wc=g("Ub");N.prototype.getVersion=N.prototype.wc;N.prototype.dump=function(){for(var a=this.i.objectStoreNames,b=[],c=0;c<a.length;++c){var d=a.item(c);b.push(this.$b(d))}return bb(b).then(function(b){var c={};b.forEach(function(b,d){c[a.item(d)]=b});return c})};N.prototype.dump=N.prototype.dump;N.prototype.$b=function(a){return le(this,a).then(function(a){return a.map(function(a){return a.value})})};function me(a,b){this.Y=a;this.Hb=b}m=me.prototype;m.get=function(a){if(0==a.length)return this.sc();a=a.map(function(a){return new v(function(c,d){var e;try{e=this.Y.get(a)}catch(f){d(f);return}e.onerror=d;e.onsuccess=function(a){c(this.Hb(a.target.result))}.bind(this)},this)},this);return bb(a)};
m.sc=function(){return new v(function(a,b){var c=[],d;try{d=this.Y.openCursor()}catch(e){b(e);return}d.onerror=b;d.onsuccess=function(){var b=d.result;b?(c.push(this.Hb(b.value)),b.continue()):a(c)}.bind(this)},this)};m.Ob=function(a){return new v(function(b,c){var d;try{d=a()}catch(e){c(e);return}d.onsuccess=b;d.onerror=c},this)};m.put=function(a){if(0==a.length)return w();a=a.map(function(a){return this.Ob(function(){return this.Y.put(a.Fa())}.bind(this))},this);return bb(a)};
m.remove=function(a){return new v(function(b,c){var d=this.Y.count();d.onsuccess=function(d){if(0==a.length||d.target.result==a.length)return this.Ob(function(){return this.Y.clear()}.bind(this)).then(b,c);d=a.map(function(a){return this.Ob(function(){return this.Y.delete(a)}.bind(this))},this);bb(d).then(b,c)}.bind(this);d.onerror=c},this)};function ne(a,b,c,d,e){Ib.call(this,c,d);this.h=a;this.Ia=b;this.Tc=e;this.Ia.oncomplete=this.$.resolve.bind(this.$);this.Ia.onabort=this.$.reject.bind(this.$)}t(ne,Ib);ne.prototype.I=function(a,b,c){return this.Tc?(c=null!=c?c:0,a=this.Ia.objectStore(a),new jc(a,b,0==c?ra(lc,this.h):mc)):new me(this.Ia.objectStore(a),b)};ne.prototype.jc=function(){return this.$.ha};function oe(a,b){this.h=a;this.o=b;this.Uc=b.Se().Af||!1}m=oe.prototype;
m.Ba=function(a){var b=window.indexedDB||window.mozIndexedDB||window.webkitIndexedDB||window.msIndexedDB;if(null==b)throw new C(352);var c=a||function(){return w()};return new v(function(a,e){var f;try{f=b.open(this.o.name(),this.o.version())}catch(h){e(h);return}f.onerror=e;f.onupgradeneeded=function(a){pe(this,c,a).then(aa(),e)}.bind(this);f.onsuccess=function(b){this.i=b.target.result;this.be().then(function(b){nb=b+1;a(this.i)}.bind(this))}.bind(this)},this)};
function pe(a,b,c){var d=c.target.result,e=c.target.transaction;c=new N(c.oldVersion,d,e,a.Uc);qe(d);a.o.xa().forEach(ra(a.vf,d,e),a);return b(c)}function qe(a){for(var b=[],c=0;c<a.objectStoreNames.length;++c){var d=a.objectStoreNames.item(c);-1!=d.indexOf(".")&&b.push(d)}b.forEach(function(b){try{a.deleteObjectStore(b)}catch(c){}})}
m.vf=function(a,b,c){a.objectStoreNames.contains(c.getName())||a.createObjectStore(c.getName(),{keyPath:"id"});c.Ab()&&(c.Aa().forEach(function(c){this.lc(a,b,c.j(),"btree")},this),this.lc(a,b,c.s+".#","rowid"))};m.lc=function(a,b,c,d){a.objectStoreNames.contains(c)||(a.createObjectStore(c,{keyPath:"id"}),a=b.objectStore(c),(this.Uc?new jc(a,ob,mc):new me(a,ob)).put([new sb(new rb(d))]))};
m.Gb=function(a,b){var c=Gb(b.Z());Oc(b).forEach(function(a){c.push(a)});var d=this.i.transaction(c,0==a?"readonly":"readwrite");return new ne(this.h,d,b,a,this.Uc)};
m.be=function(a){function b(){if(0==d.length)return w();var a=d.shift();return c(a).then(b)}function c(b){return new v(function(c,d){var ea;try{ea=(a||e.transaction([b])).objectStore(b).openCursor(null,"prev")}catch(ia){d(ia);return}ea.onsuccess=function(a){(a=a.target.result)&&(f=Math.max(f,h(a)));c(f)};ea.onerror=function(){c(f)}})}var d=this.o.xa().map(function(a){return a.getName()}),e=this.i,f=0,h=function(a){return this.Uc?(a=ic(a.value),Object.keys(a.m).reduce(function(a,b){return Math.max(a,
b)},0)):a.key}.bind(this);return new v(function(a){b().then(function(){a(f)})})};m.close=function(){this.i.close()};m.uc=function(){throw new C(511);};m.subscribe=aa();m.Bc=aa();function re(a,b,c){Ib.call(this,c,b);this.Y=a;0==b&&this.$.resolve()}t(re,Ib);re.prototype.I=function(a){return this.Y.uc(a)};re.prototype.jc=function(){this.$.resolve();return this.$.ha};function se(a){this.o=a;this.J=z()}m=se.prototype;m.Ba=function(){this.o.xa().forEach(this.Mf,this);return w()};m.uc=function(a){var b=this.J.get(a)||null;if(null===b)throw new C(101,a);return b};m.Gb=function(a,b){return new re(this,a,b)};function te(a,b){if(!a.J.has(b)){var c=new Zd;a.J.set(b,c);return c}return null}m.Mf=function(a){te(this,a.getName());a.Ab()&&(a.Aa().forEach(function(a){this.lc(a.j(),"btree")},this),this.lc(a.s+".#","rowid"))};m.lc=function(a,b){var c=te(this,a);null===c||c.put([new sb(new rb(b))])};
m.close=aa();m.subscribe=aa();m.Bc=aa();function ue(a){se.call(this,a);this.jd=null}t(ue,se);ue.prototype.subscribe=function(a){null===this.jd&&(this.jd=a)};ue.prototype.Bc=function(a){null===this.jd||this.jd(a)};function ve(a,b,c){this.Ia=a;this.s=b;this.Hb=c}ve.prototype.get=function(a){var b=this.Hb;we(this.Ia,"SELECT id, value FROM "+this.s+" "+(0==a.length?"":"WHERE id IN ("+a.join(",")+")"),[],function(a){for(var d=a.rows.length,e=Array(d),f=0;f<d;++f)e[f]=b({id:a.rows.item(f).id,value:JSON.parse(a.rows.item(f).value)});return e});return this.Ia.ma()};
ve.prototype.put=function(a){if(0==a.length)return w();var b="INSERT OR REPLACE INTO "+this.s+"(id, value) VALUES (?, ?)";a.forEach(function(a){we(this.Ia,b,[a.id(),JSON.stringify(a.m)])},this);return w()};ve.prototype.remove=function(a){we(this.Ia,"DELETE FROM "+this.s+" "+(0==a.length?"":"WHERE id IN ("+a.join(",")+")"),[]);return w()};function xe(a,b,c){Ib.call(this,b,c);this.i=a;this.J=z();this.Bd=[]}t(xe,Ib);xe.prototype.I=function(a,b){var c=this.J.get(a)||null;null===c&&(c=new ve(this,a,b),this.J.set(a,c));return c};function we(a,b,c,d){a.Bd.push({ng:b,dg:c,transform:d})}
xe.prototype.jc=function(){var a,b,c=this.$.reject.bind(this.$),d=function(a,b){this.$.reject(b)}.bind(this),e=function(c,h){a=h;if(this.Bd.length){var k=this.Bd.shift();b=k.transform;c.executeSql(k.ng,k.dg,e,d)}else k=a,null!=b&&null!=a&&(k=b(a)),this.$.resolve(k)}.bind(this);0==this.ff?this.i.readTransaction(e,c):this.i.transaction(e,c);return this.$.ha};function O(a,b,c){this.i=c;this.h=a;this.Ub=b}r("lf.backstore.WebSqlRawBackStore",O);O.prototype.cd=g("i");O.prototype.getRawDBInstance=O.prototype.cd;O.prototype.dd=function(){throw new C(356);};O.prototype.getRawTransaction=O.prototype.dd;function ye(a){return new xe(a.i,new Nc(a.h,B()),1)}O.prototype.mc=function(a){var b=ye(this);we(b,"DROP TABLE "+a,[]);return b.ma()};O.prototype.dropTable=O.prototype.mc;
O.prototype.$b=function(a){var b=ye(this);we(b,"SELECT id, value FROM "+a,[]);return b.ma().then(function(a){for(var b=a.rows.length,e=Array(b),f=0;f<b;++f)e[f]={id:a.rows.item(f).id,value:JSON.parse(a.rows.item(f).value)};return w(e)})};function ze(a,b,c){var d=ye(a),e="UPDATE "+b+" SET value=? WHERE id=?";return a.$b(b).then(function(a){a.forEach(function(a){a=c(a);we(d,e,[JSON.stringify(a.value),a.id])});return d.ma()})}
O.prototype.hc=function(a,b,c){var d=je(c);return ze(this,a,function(a){a.value[b]=d;return a})};O.prototype.addTableColumn=O.prototype.hc;O.prototype.nc=function(a,b){return ze(this,a,function(a){delete a.value[b];return a})};O.prototype.dropTableColumn=O.prototype.nc;O.prototype.Hc=function(a,b,c){return ze(this,a,function(a){a.value[c]=a.value[b];delete a.value[b];return a})};O.prototype.renameTableColumn=O.prototype.Hc;O.prototype.vb=function(a){var b={},c;for(c in a)b[c]=je(a[c]);return pb(b)};
O.prototype.createRow=O.prototype.vb;O.prototype.wc=g("Ub");O.prototype.getVersion=O.prototype.wc;function Ae(a){we(a,'SELECT tbl_name FROM sqlite_master WHERE type="table"',[],function(a){for(var c=Array(a.rows.length),d=0;d<c.length;++d)c[d]=a.rows.item(d).tbl_name;return c})}
O.prototype.dump=function(){var a=x(),b=ye(this);Ae(b);var c={};b.ma().then(function(b){b=b.filter(function(a){return"__lf_ver"!=a&&"__WebKitDatabaseInfoTable__"!=a}).map(function(a){return this.$b(a).then(function(b){c[a]=b})},this);bb(b).then(function(){a.resolve(c)})}.bind(this));return a.ha};O.prototype.dump=O.prototype.dump;function Be(a,b,c){this.h=a;this.o=b;this.mg=c||4194304}function Ce(a){return new Nc(a.h,B())}m=Be.prototype;m.Ba=function(a){if(null==window.openDatabase)throw new C(353);var b=a||function(){return w()};return new v(function(a,d){try{var e=window.openDatabase(this.o.name(),"",this.o.name(),this.mg);if(null!=e)this.i=e,De(this,b).then(a,d);else throw new C(354);}catch(f){d(f)}},this)};
function De(a,b){var c=x(),d=new xe(a.i,Ce(a),1);we(d,"CREATE TABLE IF NOT EXISTS __lf_ver(id INTEGER PRIMARY KEY, v INTEGER)",[]);we(d,"SELECT v FROM __lf_ver WHERE id = 0",[]);d.ma().then(function(a){var d=0;a.rows.length&&(d=a.rows.item(0).v);d<this.o.version()?this.Vd(b,d).then(c.resolve.bind(c)):d>this.o.version()?c.reject(new C(108)):c.resolve()}.bind(a));return c.ha}m.Gb=function(a,b){if(null!=this.i)return new xe(this.i,b,a);throw new C(2);};m.close=aa();m.uc=function(){throw new C(512);};
m.subscribe=function(){throw new C(355);};m.Bc=function(){throw new C(355);};m.Vd=function(a,b){var c=x();Ee(this).then(function(){a(new O(this.h,b,this.i)).then(function(){return this.be()}.bind(this)).then(c.resolve.bind(c))}.bind(this),c.reject.bind(c));return c.ha};
function Ee(a){var b=a.o.xa(),c=new xe(a.i,Ce(a),1),d=new xe(a.i,Ce(a),1);we(c,"INSERT OR REPLACE INTO __lf_ver VALUES (0, ?)",[a.o.version()]);Ae(c);return c.ma().then(function(a){a.filter(function(a){return-1!=a.indexOf(".")}).forEach(function(a){we(d,"DROP TABLE "+a,[])});var c=a.filter(function(a){return-1==a.indexOf(".")});b.map(function(a){return a.getName()}).filter(function(a){return-1==c.indexOf(a)}).forEach(function(a){we(d,"CREATE TABLE "+a+"(id INTEGER PRIMARY KEY, value TEXT)",[])});
return d.ma()})}m.be=function(){var a=0,b=x(),c=function(b){var c=new xe(this.i,Ce(this),0);we(c,"SELECT MAX(id) FROM "+b,[]);return c.ma().then(function(b){b=b.rows.item(0)[0];a=Math.max(b,a)})}.bind(this),d=this.o.xa().map(function(a){return c(a.getName())});bb(d).then(function(){b.resolve(a)},function(a){b.reject(a)});return b.ha};function Fe(a){this.U=z();this.Tb=z();a.xa().forEach(function(a){this.Tb.set(a.getName(),B())},this)}m=Fe.prototype;m.set=function(a,b){this.U.set(b.id(),b);this.Tb.get(a).add(b.id())};m.de=function(a,b){var c=this.Tb.get(a);b.forEach(function(a){this.U.set(a.id(),a);c.add(a.id())},this)};m.get=function(a){return this.U.get(a)||null};function Ge(a,b){return b.map(function(a){return this.get(a)},a)}
m.Ua=function(a,b,c){var d=[],e=Math.min(b,c),f=Math.max(b,c);a=this.Tb.get(a);if(a.size<f-e)a.forEach(function(a){a>=e&&a<=f&&(a=this.U.get(a),d.push(a))},this);else for(b=e;b<=f;++b)a.has(b)&&(c=this.U.get(b),d.push(c));return d};m.remove=function(a,b){this.U.delete(b);this.Tb.get(a).delete(b)};m.ug=function(a){return null!=a?this.Tb.get(a).size:this.U.size};m.clear=function(){this.U.clear();this.Tb.clear()};function He(a,b,c){var d=0,e=a.length;for(c=c||Ie;d<e;){var f=d+e>>1;0>c(a[f],b)?d=f+1:e=f}return d==e&&a[d]==b?d:~d}function Ie(a,b){return a-b}function Je(a,b,c){c=He(a,b,c);return 0>c?(a.splice(-(c+1),0,b),!0):!1};function Ke(a,b,c,d){a=b?a.reverse():a;if(null==c&&null==d)return a;c=Math.min(q(c)?c:a.length,a.length);if(0==c)return[];d=Math.min(d||0,a.length);return a.slice(d,d+c)};function Le(){this.qa=0}Le.prototype.add=function(a,b){this.qa+=b};Le.prototype.remove=function(a,b){this.qa-=b};Le.prototype.clear=function(){this.qa=0};function Me(a,b){a.clear();b.forEach(function(a){this.qa+=a.qa},a)};function Ne(a,b,c,d){this.s=a;this.S=b;this.he=c;this.ib=new Le;if(d){a=511;a*=a*a;if(d.length>=a)throw new C(6,a);d=Oe(this,d);this.pa=d=Pe(d)}else this.clear()}var Qe=[];m=Ne.prototype;m.getName=g("s");m.toString=function(){return this.pa.toString()};m.add=function(a,b){this.pa=this.pa.pb(a,b)};m.set=function(a,b){this.pa=this.pa.pb(a,b,!0)};m.remove=function(a,b){this.pa=this.pa.remove(a,b)};m.get=function(a){return this.pa.get(a)};
m.Yc=function(a){if(null==a)return this.Pa().qa;if(a instanceof Rc){if(Wc(a))return this.Pa().qa;if(Xc(a))return this.get(a.b).length}return this.Ua([a]).length};m.Pa=g("ib");m.sc=function(a,b,c,d){c=Array(a);this.pa.fill({offset:b?this.ib.qa-a-d:d,count:a,fe:0},c);return b?c.reverse():c};
m.Ua=function(a,b,c,d){var e=Re(this.pa).c[0];if(!q(e)||0==c)return Qe;b=b||!1;c=null!=c?Math.min(c,this.ib.qa):this.ib.qa;d=d||0;var f=Math.min(Math.max(this.ib.qa-d,0),c);if(0==f)return Qe;if(!q(a)||1==a.length&&a[0]instanceof Rc&&Wc(a[0]))return this.sc(f,b,c,d);a=this.S.bf(a);var h=Array(b?this.ib.qa:f),k={count:0,X:h.length,reverse:b,N:d};a.forEach(function(a){for(var b=this.S.od(a),b=this.S.Ld(a)?e:b[0],b=Se(this.pa,b),c=k.count,d=0;null!=b&&k.count<k.X;)b.Ua(a,k,h),k.count!=c?(d=0,c=k.count):
d++,b=2==d?null:b.next()},this);h.splice(k.count,f-k.count);return b?Ke(h,b,c,d):h};m.clear=function(){this.pa=Te(this);this.ib.clear()};m.Za=function(a){return this.pa.Za(a)};m.min=function(){return this.Ac(this.S.min.bind(this.S))};m.max=function(){return this.Ac(this.S.max.bind(this.S))};m.Ac=function(a){var b=Re(this.pa),c=Ue(this.pa);if(0==b.c.length&&0==c.c.length)return null;var d=b.c[0],b=b.w[0],e=c.c[c.c.length-1],c=c.w[c.c.length-1];return 1==a(d,e)?[d,this.he?[b]:b]:[e,this.he?[c]:c]};
m.Da=g("he");m.kc=g("S");m.Pd=function(a,b){return null!=a?-1==this.S.compare(a,b):!1};m.Ka=function(a,b){return null!=a?0==this.S.compare(a,b):!1};m.Fa=function(){for(var a=[],b=Re(this.pa);b;)a.push(new y(b.na,[b.c,b.w])),b=b.ta;return a};function Ve(a,b,c,d){a=new Ne(b,a,c);d=We(d,a);a.pa=d;return a}function Xe(a,b){this.na=a;this.C=b;this.bb=0;this.ta=this.sb=this.B=null;this.c=[];this.w=[];this.g=[]}function Te(a){return new Xe(nb++,a)}function P(a){return 0==a.bb}m=Xe.prototype;m.next=g("ta");
function Ye(a){function b(a){return null!=a?a.na.toString():"_"}var c=a.na+"["+a.c.join("|")+"]",d=a.g.map(function(a){return a.na}).join("|"),e=a.w.join("/"),f=b(a.sb)+"{",f=P(a)?f+e:f+d,f=f+"}"+b(a.B);a.ta&&(a=Ye(a.ta),c=c+"  "+a[0],f=f+"  "+a[1]);return[c,f]}m.toString=function(){var a="",b=Ye(this),a=a+(b[0]+"\n"+b[1]+"\n");this.g.length&&(a+=this.g[0].toString());return a};function Re(a){return P(a)?a:Re(a.g[0])}function Ue(a){return P(a)?a:Ue(a.g[a.g.length-1])}
function Ze(a,b){b&&(b.sb=a);a&&(a.ta=b)}function Oe(a,b){for(var c=b.length,d=0,e=Te(a),f=e;0<c;){var h=768<=c?511:257<=c&&511>=c?c:257,k=b.slice(d,d+h);e.c=k.map(function(a){return a.key});e.w=k.map(function(a){return a.value});d+=h;c-=h;0<c&&(h=Te(e.C),Ze(e,h),e=h)}return f}function $e(a){var b=a[0],c=Te(b.C);c.bb=b.bb+1;c.g=a;for(b=0;b<a.length;++b)a[b].B=c,0<b&&c.c.push(a[b].c[0]);return c}
function Pe(a){var b=a,c=[];do c.push(b),b=b.ta;while(b);if(512>=c.length)b=$e(c);else{var d=c.length,e=0,b=Te(a.C);for(b.bb=a.bb+2;0<d;){a=768<=d?511:257<=d&&511>=d?d:257;var f=c.slice(e,e+a),h=$e(f);h.B=b;b.g.length&&(b.c.push(f[0].c[0]),Ze(b.g[b.g.length-1],h));b.g.push(h);e+=a;d-=a}}return b}m.get=function(a){var b=af(this,a);if(P(this)){var c=Qe;this.C.Ka(this.c[b],a)&&(c=c.concat(this.w[b]));return c}b=this.C.Ka(this.c[b],a)?b+1:b;return this.g[b].get(a)};
m.Za=function(a){var b=af(this,a);return this.C.Ka(this.c[b],a)?!0:P(this)?!1:this.g[b].Za(a)};m.remove=function(a,b){bf(this,a,-1,b);if(null==this.B){var c=this;1==this.g.length&&(c=this.g[0],c.B=null);return c}return this};function cf(a){return P(a)?a.c[0]:cf(a.g[0])}function df(a){a.c=[];for(var b=1;b<a.g.length;++b)a.c.push(cf(a.g[b]))}
function bf(a,b,c,d){var e=af(a,b),f=P(a);if(!f){var h=a.C.Ka(a.c[e],b)?e+1:e;if(bf(a.g[h],b,h,d))df(a);else return!1}else if(!a.C.Ka(a.c[e],b))return!1;if(a.c.length>e&&a.C.Ka(a.c[e],b)){if(q(d)&&!a.C.Da()&&f&&(h=a.w[e],d=He(h,d,void 0),0>d?d=!1:(h.splice(d,1),d=!0),d&&a.C.Pa().remove(b,1),a.w[e].length))return!1;a.c.splice(e,1);f&&(f=a.C.Da()?1:a.w[e].length,a.w.splice(e,1),a.C.Pa().remove(b,f))}if(256>a.c.length&&null!=a.B){a:{b=null;if(a.ta&&256<a.ta.c.length)b=a.ta,e=d=0,f=a.c.length+1;else if(a.sb&&
256<a.sb.c.length)b=a.sb,d=a.sb.c.length-1,e=P(a)?d:d+1,f=0;else{b=!1;break a}a.c.splice(f,0,b.c[d]);b.c.splice(d,1);d=P(a)?a.w:a.g;h=null;P(a)?h=b.w:(h=b.g,h[e].B=a);d.splice(f,0,h[e]);h.splice(e,1);P(b)||(df(b),df(a));b=!0}b||ef(a,c)}return!0}
function ef(a,b){var c,d,e;a.ta&&511>a.ta.c.length?(c=a.ta,e=d=0):a.sb&&(c=a.sb,d=c.c.length,e=P(c)?c.w.length:c.g.length);d=[d,0].concat(a.c);Array.prototype.splice.apply(c.c,d);d=null;P(a)?d=a.w:(d=a.g,d.forEach(function(a){a.B=c}));d=[e,0].concat(d);Array.prototype.splice.apply(P(c)?c.w:c.g,d);Ze(a.sb,a.ta);P(c)||df(c);-1!=b&&(a.B.c.splice(b,1),a.B.g.splice(b,1))}
m.pb=function(a,b,c){var d=af(this,a);if(P(this)){if(this.C.Ka(this.c[d],a)){if(c)this.C.Pa().remove(a,this.C.Da()?1:this.w[d].length),this.w[d]=this.C.Da()?b:[b];else{if(this.C.Da())throw new C(201);if(!Je(this.w[d],b))throw new C(109);}this.C.Pa().add(a,1);return this}this.c.splice(d,0,a);this.w.splice(d,0,this.C.Da()?b:[b]);this.C.Pa().add(a,1);512==this.c.length?(d=Te(this.C),a=Te(this.C),a.bb=1,a.c=[this.c[256]],a.g=[this,d],a.B=this.B,this.B=a,d.c=this.c.splice(256),d.w=this.w.splice(256),d.B=
a,Ze(d,this.ta),Ze(this,d),d=a):d=this;return d}d=this.C.Ka(this.c[d],a)?d+1:d;a=this.g[d].pb(a,b,c);P(a)||1!=a.c.length||(this.c.splice(d,0,a.c[0]),a.g[1].B=this,a.g[0].B=this,this.g.splice(d,1,a.g[1]),this.g.splice(d,0,a.g[0]));return 512==this.c.length?ff(this):this};function ff(a){var b=Te(a.C),c=Te(a.C);b.B=a.B;b.bb=a.bb+1;b.c=[a.c[256]];b.g=[a,c];a.c.splice(256,1);c.B=b;c.bb=a.bb;c.c=a.c.splice(256);c.g=a.g.splice(257);c.g.forEach(function(a){a.B=c});a.B=b;Ze(c,a.ta);Ze(a,c);return b}
function af(a,b){for(var c=0,d=a.c.length;c<d;){var e=c+d>>1;a.C.Pd(a.c[e],b)?c=e+1:d=e}return c}function Se(a,b){if(!P(a)){var c=af(a,b);a.C.Ka(a.c[c],b)&&c++;return Se(a.g[c],b)}return a}
m.Ua=function(a,b,c){function d(a){return a[0]?a[1]?0:1:-1}var e=this.C.kc(),f=0,h=this.c.length-1,k=this.c,p=d(e.lb(k[f],a)),D=d(e.lb(k[h],a));if(1!=p&&(-1!=p||-1!=D)){var ea=function(a,b){var c=a+b>>1;return c==a?c+1:c},ia=function(b,c,f){if(b>=c)return 0==f?c:-1;var h=d(e.lb(k[b],a));if(0==h)return b;if(1==h)return-1;h=ea(b,c);if(h==c)return 0==f?c:-1;var p=d(e.lb(k[h],a));return 0==p?ia(b,h,p):-1==p?ia(h+1,c,f):ia(b+1,h,p)},Ra=function(b,c){if(b>=c)return b;var f=d(e.lb(k[c],a));if(0==f)return c;
if(-1==f)return b;f=ea(b,c);if(f==c)return b;var h=d(e.lb(k[f],a));return 0==h?Ra(f,c):1==h?Ra(b,f-1):-1};0!=p&&(f=ia(f+1,h,D));-1!=f&&(h=Ra(f,h),-1!=h&&h>=f&&gf(this,b,c,f,h+1))}};function gf(a,b,c,d,e){for(;d<e&&(b.reverse||!(b.count>=b.X));++d)if(a.C.Da())!b.reverse&&b.N?b.N--:c[b.count++]=a.w[d];else for(var f=0;f<a.w[d].length&&b.count<c.length;++f)!b.reverse&&b.N?b.N--:c[b.count++]=a.w[d][f]}
m.fill=function(a,b){if(P(this))for(var c=0;c<this.w.length&&0<a.count;++c)if(0<a.offset){if(a.offset-=this.C.Da()?1:this.w[c].length,0>a.offset)for(var d=this.w[c].length+a.offset;d<this.w[c].length&&0<a.count;++d)b[a.fe++]=this.w[c][d],a.count--}else if(this.C.Da())b[a.fe++]=this.w[c],a.count--;else for(d=0;d<this.w[c].length&&0<a.count;++d)b[a.fe++]=this.w[c][d],a.count--;else for(c=0;c<this.g.length&&0<a.count;++c)this.g[c].fill(a,b)};
function We(a,b){for(var c=b.Pa(),d=a.map(function(a){var d=new Xe(a.id(),b);d.c=a.m[0];d.w=a.m[1];d.c.forEach(function(a,e){c.add(a,b.Da()?1:d.w[e].length)});return d}),e=0;e<d.length-1;++e)Ze(d[e],d[e+1]);return 1<d.length?Pe(d[0]):d[0]};function hf(a){if(1==a.f.length)return new jf(a.f[0].eb);a=a.f.map(function(a){return a.eb});return new kf(a)}function jf(a){this.Xc=0==a?mf:nf;this.Qd=0==a?function(a){return null!=a?a.reverse():null}:function(a){return a||null};this.Wd=0==a?of:pf}t(jf,nc);function nf(a,b){return a>b?1:a<b?-1:0}function mf(a,b){return nf(b,a)}function pf(a,b){return Yc(a,b)}function of(a,b){return Yc(b,a)}m=jf.prototype;
m.lb=function(a,b){var c=this.Qd(b),d=[null===c.b,null===c.u];if(!d[0]){var e=this.Xc(a,c.b);d[0]=c.aa?1==e:-1!=e}d[1]||(e=this.Xc(a,c.u),d[1]=c.la?-1==e:1!=e);return d};m.compare=function(a,b){return this.Xc(a,b)};m.min=function(a,b){return a<b?1:a==b?0:-1};m.max=function(a,b){return a>b?1:a==b?0:-1};m.Kd=function(a,b){var c=this.lb(a,b);return c[0]&&c[1]};m.bf=function(a){return a.filter(function(a){return null!==a}).sort(function(a,c){return this.Wd(a,c)}.bind(this))};m.Ld=function(a){return fa(this.Qd(a).b)};
m.od=function(a){a=this.Qd(a);return[a.b,a.u]};m.toString=function(){return this.Xc==mf?"SimpleComparator_DESC":"SimpleComparator_ASC"};function kf(a){this.Ga=a.map(function(a){return new jf(a)})}t(kf,nc);function qf(a,b,c,d){for(var e=0,f=0;f<a.Ga.length&&0==e;++f)e=d(a.Ga[f],b[f],c[f]);return e}m=kf.prototype;m.compare=function(a,b){return qf(this,a,b,function(a,b,e){return a.compare(b,e)})};m.min=function(a,b){return qf(this,a,b,function(a,b,e){return a.min(b,e)})};
m.max=function(a,b){return qf(this,a,b,function(a,b,e){return a.max(b,e)})};m.lb=function(a,b){for(var c=[!0,!0],d=0;d<this.Ga.length&&(c[0]||c[1]);++d){var e=this.Ga[d].lb(a[d],b[d]);c[0]=c[0]&&e[0];c[1]=c[1]&&e[1]}return c};m.Kd=function(a,b){for(var c=!0,d=0;d<this.Ga.length&&c;++d)c=this.Ga[d].Kd(a[d],b[d]);return c};
m.bf=function(a){var b=a.filter(function(a){return a.every(ga)});a=Array(this.Ga.length);for(var c=0;c<a.length;c++)a[c]=b.map(function(a){return a[c]});a.forEach(function(a,b){a.sort(function(a,c){return this.Ga[b].Wd(a,c)}.bind(this))},this);b=Array(b.length);for(c=0;c<b.length;c++)b[c]=a.map(function(a){return a[c]});return b.sort(function(a,b){for(var c=0,h=0;h<this.Ga.length&&0==c;++h)c=this.Ga[h].Wd(a[h],b[h]);return c}.bind(this))};m.Ld=function(a){return this.Ga[0].Ld(a[0])};
m.od=function(a){var b=a.map(function(a,b){return this.Ga[b].od(a)[0]},this);a=a.map(function(a,b){return this.Ga[b].od(a)[1]},this);return[b,a]};function rf(a){this.ca=a;this.cb=B();this.Jc=new Le;this.ib=new Le}m=rf.prototype;m.getName=function(){return this.ca.getName()};m.add=function(a,b){null===a?(this.cb.add(b),this.Jc.add(a,1)):this.ca.add(a,b)};m.set=function(a,b){null===a?(this.cb.clear(),this.Jc.clear(),this.add(a,b)):this.ca.set(a,b)};m.remove=function(a,b){null===a?b?(this.cb.delete(b),this.Jc.remove(a,1)):(this.cb.clear(),this.Jc.clear()):this.ca.remove(a,b)};m.get=function(a){return null===a?cc(this.cb):this.ca.get(a)};
m.Yc=function(a){return this.ca.Yc(a)};m.Pa=function(){Me(this.ib,[this.ca.Pa(),this.Jc]);return this.ib};m.Ua=function(a,b,c,d){b=this.ca.Ua(a,b,c,d);return null!=a?b:b.concat(cc(this.cb))};m.clear=function(){this.cb.clear();this.ca.clear()};m.Za=function(a){return null===a?0!=this.cb.size:this.ca.Za(a)};m.min=function(){return this.ca.min()};m.max=function(){return this.ca.max()};m.Fa=function(){return[new y(-2,cc(this.cb))].concat(this.ca.Fa())};m.kc=function(){return this.ca.kc()};
function sf(a,b){for(var c=-1,d=0;d<b.length;++d)if(-2==b[d].id()){c=d;break}if(-1==c)throw new C(102);var d=b[c].m,e=b.slice(0);e.splice(c,1);var c=a(e),f=new rf(c);d.forEach(function(a){f.cb.add(a)});return f}m.Da=function(){return this.ca.Da()};function tf(a){this.s=a;this.hb=B();this.S=new jf(1)}m=tf.prototype;m.getName=g("s");m.add=function(a){if("number"!=typeof a)throw new C(103);this.hb.add(a)};m.set=function(a,b){this.add(a,b)};m.remove=function(a){this.hb.delete(a)};m.get=function(a){return this.Za(a)?[a]:[]};m.min=function(){return this.Ac(this.S.min.bind(this.S))};m.max=function(){return this.Ac(this.S.max.bind(this.S))};
m.Ac=function(a){if(0==this.hb.size)return null;var b=cc(this.hb).reduce(function(b,d){return null===b||1==a(d,b)?d:b},null);return[b,[b]]};m.Yc=function(){return this.hb.size};m.Ua=function(a,b,c,d){var e=a||[Vc()];a=cc(this.hb).filter(function(a){return e.some(function(b){return this.S.Kd(a,b)},this)},this);return Ke(a,b,c,d)};m.clear=function(){this.hb.clear()};m.Za=function(a){return this.hb.has(a)};m.Fa=function(){return[new y(0,cc(this.hb))]};m.kc=g("S");
function uf(a,b){var c=new tf(a);b[0].m.forEach(function(a){c.add(a,a)});return c}m.Da=l(!0);m.Pa=function(){var a=new Le;a.qa=this.hb.size;return a};function vf(a){this.h=a;this.ub=a.l(Pb);this.F=a.l(Sb);this.ka=a.l(Rb)}vf.prototype.Ba=function(a){var b=a.xa(),c=function(){if(0==b.length)return w();var a=b.shift();return(a.Ab()?wf(this,a):xf(this,a)).then(c)}.bind(this);return c()};function xf(a,b){var c=new Nc(a.h,B([b]));return a.ub.Gb(0,c).I(b.getName(),b.Zb.bind(b)).get([]).then(function(a){this.ka.de(b.getName(),a);yf(this,b,a)}.bind(a))}
function yf(a,b,c){var d=a.F.Kc.get(b.getName())||[];c.forEach(function(a){d.forEach(function(b){var c=a.Lb(b.getName());b.add(c,a.id())})})}function wf(a,b){var c=new Nc(a.h,B([b])),d=a.ub.Gb(0,c),c=d.I(b.getName(),b.Zb).get([]).then(function(a){this.ka.de(b.getName(),a)}.bind(a)),e=b.Aa().map(function(a){return zf(this,a,d)},a).concat(Af(a,b,d));return bb(e.concat(c))}
function zf(a,b,c){c=c.I(b.j(),ob,1);var d=hf(b);return c.get([]).then(function(a){if(1<a.length){if(Bf(b)){var c=Ve.bind(void 0,d,b.j(),b.yc);a=sf(c,a.slice(1))}else a=Ve(d,b.j(),b.yc,a.slice(1));this.F.set(b.Lc,a)}}.bind(a))}function Af(a,b,c){return c.I(b.s+".#",ob,1).get([]).then(function(a){1<a.length&&(a=uf(b.s+".#",a.slice(1)),this.F.set(b.getName(),a))}.bind(a))};function Cf(){this.Y=z();this.Kc=z()}Cf.prototype.Ba=function(a){a.xa().forEach(function(a){var c=[];this.Kc.set(a.getName(),c);var d=a.s+".#";if(null===this.get(d)){var e=new tf(d);c.push(e);this.Y.set(d,e)}a.Aa().forEach(function(a){var b;b=hf(a);b=new Ne(a.j(),b,a.yc);b=Bf(a)?new rf(b):b;c.push(b);this.Y.set(a.j(),b)},this)},this);return w()};Cf.prototype.get=function(a){return this.Y.get(a)||null};
Cf.prototype.set=function(a,b){var c=this.Kc.get(a)||null;null===c&&(c=[],this.Kc.set(a,c));for(var d=null,e=0;e<c.length;e++)if(c[e].getName()==b.getName()){d=e;break}null!==d&&0<c.length?c.splice(d,1,b):c.push(b);this.Y.set(b.getName(),b)};function Df(a){this.fc=[];q(a)&&this.add(a)}Df.prototype.toString=function(){return this.fc.map(function(a){return a.toString()}).join(",")};Df.prototype.Za=function(a){return this.fc.some(function(b){return b.contains(a)})};Df.prototype.yb=g("fc");
Df.prototype.add=function(a){if(0!=a.length)if(a=this.fc.concat(a),1==a.length)this.fc=a;else{a.sort(Yc);for(var b=[],c=a[0],d=1;d<a.length;++d)if(Tc(c,a[d])){var e=a[d],f=Vc();if(null!==c.b&&null!==e.b){var h=Uc(c.b,e.b,!0);1!=h?(f.b=c.b,f.aa=0!=h?c.aa:c.aa&&e.aa):(f.b=e.b,f.aa=e.aa)}null!==c.u&&null!==e.u&&(h=Uc(c.u,e.u,!1),-1!=h?(f.u=c.u,f.la=0!=h?c.la:c.la&&e.la):(f.u=e.u,f.la=e.la));c=f}else b.push(c),c=a[d];b.push(c);this.fc=b}};
function Ef(a,b){var c=[];a.yb().map(function(a){return b.yb().map(function(b){var c;if(Tc(a,b)){c=Vc();var h=Uc(a.b,b.b,!0),h=0==h?a.aa?a:b:-1!=h?a:b;c.b=h.b;c.aa=h.aa;null===a.u||null===b.u?b=null===a.u?b:a:(h=Uc(a.u,b.u,!1),b=0==h?a.la?a:b:-1==h?a:b);c.u=b.u;c.la=b.la}else c=null;return c})}).forEach(function(a){c=c.concat(a)});return new Df(c.filter(function(a){return null!==a}))};function Hf(a,b){var c=[],d=null,e=null;xd(a,function(a){var h=b(a);null==a.getParent()?e=h:L(d,h);var k=a.getParent();null!==k&&K(k).length==K(d).length&&(k=c.indexOf(d),-1!=k&&c.splice(k,1));1<K(a).length&&c.push(h);d=null===a.g?c[c.length-1]:h});return e}function If(a){return Jf(a,function(a){return null===a.g})}
function Kf(a){var b=a.getParent(),c=0;null!==b&&(c=K(b).indexOf(a),b.removeChild(a));var d=K(a).slice();d.forEach(function(d,f){a.removeChild(d);null===b||ud(b,d,c+f)});return{parent:b,children:d}}function Lf(a,b){K(a).slice().forEach(function(c){a.removeChild(c);L(b,c)});L(a,b)}function Mf(a){var b=td(a,0);Kf(a);Lf(b,a);return b}
function Nf(a,b,c){var d=td(a,0),e=K(d).slice();if(!e.some(function(a){return b(a)}))return a;Kf(a);e.forEach(function(e,h){if(b(e)){var k=c(a);vd(d,h);L(k,e);ud(d,k,h)}});return d}function Of(a,b,c,d){var e=a.getParent();null!==e&&(a=K(e).indexOf(a),vd(e,a),ud(e,c,a));K(b).slice().forEach(function(a){b.removeChild(a);L(d,a)});return c}function Jf(a,b,c){function d(a){b(a)&&e.push(a);null!=c&&c(a)||K(a).forEach(d)}var e=[];d(a);return e}
function Pf(a,b){var c=b||function(a){return a.toString()+"\n"},d="";xd(a,function(a){for(var b=0;b<sd(a);b++)d+="-";d+=c(a)});return d};function Qf(a){yd.call(this);this.Nb=a;this.Va=!1}t(Qf,yd);m=Qf.prototype;m.Fb=function(){return Hf(this,function(a){if(a instanceof Qf){var b=new Qf(a.Nb);b.Va=a.Va;a=a.W();b.na=a;return b}return a.Fb()})};m.$a=function(a){var b=a||[];xd(this,function(a){a!=this&&a.$a(b)}.bind(this));a=B(b);return cc(a)};m.qd=function(a){this.Va!=a&&(this.Va=a,this.Nb="and"==this.Nb?"or":"and",K(this).forEach(function(b){return b.qd(a)}))};
m.eval=function(a){var b=K(this).map(function(b){return b.eval(a)});return Rf(this,b)};function Rf(a,b){return"and"==a.Nb?dd(b):ed(b)}m.toString=function(){return"combined_pred_"+this.Nb.toString()};function Sf(){this.U=z();this.size=0}m=Sf.prototype;m.has=function(a){return this.U.has(a)};m.set=function(a,b){var c=this.U.get(a)||null;null===c&&(c=B(),this.U.set(a,c));c.has(b)||(c.add(b),this.size++);return this};m.de=function(a,b){var c=this.U.get(a)||null;null===c&&(c=B(),this.U.set(a,c));b.forEach(function(a){c.has(a)||(c.add(a),this.size++)},this);return this};
m.delete=function(a,b){var c=this.U.get(a,null);if(null===c)return!1;var d=c.delete(b);d&&(--this.size,0==c.size&&this.U.delete(a));return d};m.get=function(a){a=this.U.get(a)||null;return null===a?null:cc(a)};m.clear=function(){this.U.clear();this.size=0};m.keys=function(){return Gb(this.U)};m.values=function(){var a=[];this.U.forEach(function(b){a.push.apply(a,cc(b))});return a};function Tf(a,b,c){yd.call(this);this.da=a;this.ia=b;this.D=c;this.Rd=null;a=kd.tc();this.oc=qd(a,this.da.K(),this.D);this.Sf=a.He.get(this.da.K())||null}t(Tf,yd);m=Tf.prototype;m.Fb=function(){var a=new Tf(this.da,this.ia,this.D),b=this.W();a.na=b;return a};m.$a=function(a){return null!=a?(a.push(this.da),a.push(this.ia),a):[this.da,this.ia]};
m.reverse=function(){var a=this.D;switch(this.D){case "gt":a="lt";break;case "lt":a="gt";break;case "gte":a="lte";break;case "lte":a="gte"}return new Tf(this.ia,this.da,a)};m.eval=function(a){var b=a.entries.filter(function(a){var b=G(a,this.da);a=G(a,this.ia);return this.oc(b,a)},this);return new E(b,F(a))};m.toString=function(){return"join_pred("+this.da.j()+" "+this.D+" "+this.ia.j()+")"};
function Uf(a,b,c){var d=null,e=null;-1!=F(b).indexOf(H(a.da.I()))?(d=b,e=c):(d=c,e=b);if(d.entries.length>e.entries.length){a:{b=a.da;a.da=a.ia;a.ia=b;b=a.D;switch(a.D){case "gt":b="lt";break;case "lt":b="gt";break;case "gte":b="lte";break;case "lte":b="gte";break;default:break a}a.D=b;a.oc=qd(kd.tc(),a.da.K(),a.D)}return[e,d]}return[d,e]}function Vf(a){var b={};a.$a().forEach(function(a){b[a.getName()]=null});return b}
function Wf(a,b,c){null===a.Rd&&(a.Rd=Vf(a.ia.I()));var d=new gd(new y(-1,a.Rd),!1);return jd(b,c,d,[H(a.ia.I())])}
function Xf(a,b,c,d){var e=[b,c];d||(e=Uf(a,b,c));b=e[0];c=e[1];var e=b,f=c,h=a.da,k=a.ia;d&&(e=c,f=b,h=a.ia,k=a.da);var p=new Sf,D=[];e.entries.forEach(function(a){var b=String(G(a,h));p.set(b,a)});var ea=F(e),ia=F(f);f.entries.forEach(function(a){var b=G(a,k),c=String(b);null!==b&&p.has(c)?p.get(c).forEach(function(b){b=jd(a,ia,b,ea);D.push(b)}):d&&D.push(Wf(this,a,ia))}.bind(a));a=F(b).concat(F(c));return new E(D,a)}
function Yf(a,b,c,d,e){function f(a,b){var c=new gd(b,1<ea.length),c=jd(a,ia,c,ea);D.push(c)}var h=d.Kf.I(),k=b,p=c;-1!=F(b).indexOf(H(h))&&(k=c,p=b);var D=[],ea=F(p),ia=F(k);k.entries.forEach(function(a){var b=this.Sf(G(a,d.Yf)),b=d.index.get(b);0!=b.length&&(d.index.Da()?f(a,e.get(b[0])):Ge(e,b).forEach(f.bind(null,a)))},a);a=F(k).concat(F(p));return new E(D,a)};function Zf(a,b,c){return null===b?new Ad(a,b,c):q(b.j)?new Tf(a,b,c):new Ad(a,b,c)};var $f={};r("lf.schema.DataStoreType",$f);$f.INDEXED_DB=0;$f.MEMORY=1;$f.LOCAL_STORAGE=2;$f.FIREBASE=3;$f.WEB_SQL=4;$f.OBSERVABLE_STORE=5;function ag(a,b,c,d){this.Lc=a;this.name=b;this.yc=c;this.f=d}ag.prototype.j=function(){return this.Lc+"."+this.name};function Bf(a){return a.f.some(function(a){return a.ea.xc()})}function Q(a,b,c,d){this.s=a;this.ga=c;this.H=b;this.ld=d;this.Xa=null}r("lf.schema.Table",Q);Q.prototype.getName=g("s");Q.prototype.getName=Q.prototype.getName;Q.prototype.Ta=g("Xa");
function H(a){return a.Xa||a.s}Q.prototype.ic=function(a){var b=new this.constructor(this.s);b.Xa=a;b.ig=this.ig;return b};Q.prototype.as=Q.prototype.ic;Q.prototype.createRow=Q.prototype.vb;Q.prototype.deserializeRow=Q.prototype.Zb;Q.prototype.Aa=g("ga");Q.prototype.getIndices=Q.prototype.Aa;Q.prototype.$a=g("H");Q.prototype.getColumns=Q.prototype.$a;Q.prototype.getConstraint=Q.prototype.xb;Q.prototype.Ab=g("ld");Q.prototype.persistentIndex=Q.prototype.Ab;function R(a,b){this.child=a;this.Db=b;this.Xa=null}m=R.prototype;m.getName=function(){return this.Db+"("+this.child.getName()+")"};m.j=function(){return this.Db+"("+this.child.j()+")"};m.I=function(){return this.child.I()};m.toString=function(){return this.j()};m.K=function(){return this.child.K()};m.Ta=g("Xa");m.Aa=function(){return[]};m.sa=l(null);m.xc=l(!1);m.ic=function(a){this.Xa=a;return this};R.prototype.as=R.prototype.ic;
function bg(a){for(var b=[a];a instanceof R;)b.push(a.child),a=a.child;return b}function cg(a){this.Xa=a||null;this.O=new Q("#UnknownTable",[],[],!1)}m=cg.prototype;m.getName=l("*");m.j=function(){return this.getName()};m.toString=function(){return this.j()};m.I=g("O");m.K=l(4);m.Ta=g("Xa");m.Aa=function(){return[]};m.sa=l(null);m.xc=l(!1);r("lf.fn.avg",function(a){return new R(a,"AVG")});function dg(a){return new R(a||new cg,"COUNT")}r("lf.fn.count",dg);function eg(a){return new R(a,"DISTINCT")}r("lf.fn.distinct",eg);r("lf.fn.max",function(a){return new R(a,"MAX")});r("lf.fn.min",function(a){return new R(a,"MIN")});r("lf.fn.stddev",function(a){return new R(a,"STDDEV")});r("lf.fn.sum",function(a){return new R(a,"SUM")});r("lf.fn.geomean",function(a){return new R(a,"GEOMEAN")});function S(a,b){J.call(this);this.Cf=b}t(S,J);S.prototype.exec=function(a,b){switch(this.Cf){case 1:return fg(this,a,b);case 0:return gg(this,a,b);default:return hg(this,a,b)}};S.prototype.toString=l("dummy_node");S.prototype.Mc=function(){return this.toString()};function hg(a,b,c){return new v(function(a){a(this.ba(b,[],c))}.bind(a))}function fg(a,b,c){return td(a,0).exec(b,c).then(function(a){return this.ba(b,a,c)}.bind(a))}
function gg(a,b,c){var d=K(a).map(function(a){return a.exec(b,c)});return bb(d).then(function(a){var d=[];a.forEach(function(a){for(var b=0;b<a.length;++b)d.push(a[b])});return this.ba(b,d,c)}.bind(a))};function ig(a){S.call(this,0,1);this.oe=a}t(ig,S);ig.prototype.toString=function(){return"aggregation("+this.oe.map(function(a){return a.j()}).toString()+")"};ig.prototype.ba=function(a,b){b.forEach(function(a){jg(new kg(a,this.oe))},this);return b};function kg(a,b){this.Ea=a;this.H=b}
function jg(a){a.H.forEach(function(a){a=bg(a).reverse();for(var c=1;c<a.length;c++){var d=a[c],e=bg(d).slice(-1)[0],f=d.child instanceof R?ad(this.Ea,d.child):this.Ea;if(null!==f.Sa&&f.Sa.has(d.j()))break;f=lg(d.Db,f,e);e=this.Ea;null===e.Sa&&(e.Sa=z());e.Sa.set(d.j(),f)}},a)}
function lg(a,b,c){var d=null;switch(a){case "MIN":d=mg(b,c,function(a,b){return b<a?b:a});break;case "MAX":d=mg(b,c,function(a,b){return b>a?b:a});break;case "DISTINCT":d=ng(b,c);break;case "COUNT":d=og(b,c);break;case "SUM":d=pg(b,c);break;case "AVG":a=og(b,c);0<a&&(d=pg(b,c)/a);break;case "GEOMEAN":d=qg(b,c);break;default:d=rg(b,c)}return d}function mg(a,b,c){return a.entries.reduce(function(a,e){var f=G(e,b);return null===f?a:null===a?f:c(a,f)},null)}
function og(a,b){return b instanceof cg?a.entries.length:a.entries.reduce(function(a,d){return a+(fa(G(d,b))?0:1)},0)}function pg(a,b){return mg(a,b,function(a,b){return b+a})}function rg(a,b){var c=[];a.entries.forEach(function(a){a=G(a,b);null===a||c.push(a)});return 0==c.length?null:xb.apply(null,c)}function qg(a,b){var c=0,d=a.entries.reduce(function(a,d){var h=G(d,b);if(0==h||null===h)return a;c++;return a+Math.log(h)},0);return 0==c?null:Math.pow(Math.E,d/c)}
function ng(a,b){var c=z();a.entries.forEach(function(a){var e=G(a,b);c.set(e,a)});return new E(A(c),F(a))};function sg(a,b){this.wa=a;this.ja=b}sg.prototype.ab=g("wa");sg.prototype.Z=g("ja");function tg(){J.call(this)}t(tg,J);function ug(a,b){J.call(this);this.table=a;this.values=b}t(ug,tg);function vg(a,b){ug.call(this,a,b)}t(vg,ug);function wg(a){J.call(this);this.table=a}t(wg,tg);wg.prototype.toString=function(){return"delete("+this.table.getName()+")"};function xg(a,b){J.call(this);this.table=a;this.ie=b}t(xg,tg);
xg.prototype.toString=function(){var a=[];this.ie&&(a=this.ie.map(function(a){return a.L.getName()},this));return"update("+this.table.getName()+", ["+a.join(",")+"])"};function yg(a){J.call(this);this.G=a}t(yg,tg);yg.prototype.toString=function(){return"select("+this.G.toString()+")"};function zg(a){J.call(this);this.table=a}t(zg,tg);zg.prototype.toString=function(){var a="table_access("+this.table.getName();null===this.table.Ta()||(a+=" as "+this.table.Ta());return a+")"};
function Ag(){J.call(this)}t(Ag,tg);Ag.prototype.toString=l("cross_product");function Bg(a,b){J.call(this);this.f=a;this.Ib=b}t(Bg,tg);Bg.prototype.toString=function(){var a="project("+this.f.toString();if(null!==this.Ib)var b=this.Ib.map(function(a){return a.j()}).join(", "),a=a+(", groupBy("+b+")");return a+")"};function Cg(a){J.call(this);this.M=a}t(Cg,tg);Cg.prototype.toString=function(){return"order_by("+Jd(this.M)+")"};function Dg(a){J.call(this);this.f=a}t(Dg,tg);
Dg.prototype.toString=function(){return"aggregation("+this.f.toString()+")"};function Eg(a){J.call(this);this.f=a}t(Eg,tg);Eg.prototype.toString=function(){return"group_by("+this.f.toString()+")"};function Fg(a){J.call(this);this.X=a}t(Fg,tg);Fg.prototype.toString=function(){return"limit("+this.X+")"};function Gg(a){J.call(this);this.N=a}t(Gg,tg);Gg.prototype.toString=function(){return"skip("+this.N+")"};function Hg(a,b){J.call(this);this.G=a;this.Kb=b}t(Hg,tg);
Hg.prototype.toString=function(){return"join(type: "+(this.Kb?"outer":"inner")+", "+this.G.toString()+")"};function Ig(){};function Jg(){}t(Jg,Ig);Jg.prototype.gb=function(a){this.V=a;this.Ra(this.V);return this.V};Jg.prototype.Ra=function(a){if(a instanceof yg){var b=Kg(this,a.G),b=Lg(this,b);Of(a,a,b[0],b[1]);a==this.V&&(this.V=b[0]);a=b[0]}K(a).forEach(function(a){this.Ra(a)},this)};function Kg(a,b){if(0==K(b).length||"and"!=b.Nb)return[b];var c=K(b).slice().map(function(a){b.removeChild(a);return Kg(this,a)},a);return Ca(c)}
function Lg(a,b){var c=null,d=null;b.map(function(a,b){var h=new yg(a);0==b?c=h:L(d,h);d=h},a);return[c,d]};function Mg(){}t(Mg,Ig);Mg.prototype.gb=function(a){this.V=a;this.Ra(this.V);return this.V};Mg.prototype.Ra=function(a){if(a instanceof Ag)for(;2<K(a).length;){for(var b=new Ag,c=0;2>c;c++){var d=vd(a,0);L(b,d)}ud(a,b,0)}K(a).forEach(function(a){this.Ra(a)},this)};function Ng(){S.call(this,0,0)}t(Ng,S);Ng.prototype.toString=l("cross_product");Ng.prototype.ba=function(a,b){for(var c=b[0],d=b[1],e=[],f=F(c),h=F(d),k=0;k<c.entries.length;k++)for(var p=0;p<d.entries.length;p++){var D=jd(c.entries[k],f,d.entries[p],h);e.push(D)}c=F(c).concat(F(d));return[new E(e,c)]};function Og(a,b){Md.call(this,a,b);this.Na=a.l(Ub);this.zb=a.l(Vb)}t(Og,Md);Og.prototype.getPriority=l(2);Og.prototype.Ud=function(a){0==this.K()?Pg(this,a):this.Ic()};function Pg(a,b){a.nd.forEach(function(a,d){a instanceof Id&&Pd(this.zb,a,b[d])},a)}Og.prototype.Ic=function(){var a=Rd(this.zb,this.Z());0!=a.length&&(a=new Od(this.global,a),Sd(this.Na,a))};function Qg(a){Dd.call(this,a)}t(Qg,Dd);Qg.prototype.Z=function(){var a=B();a.add(this.b);var b=this.ea.info();Rg(this.b.getName(),b.g).forEach(a.add.bind(a));return a};Qg.prototype.clone=function(){var a=new Qg(this.ea);Gd(a,this);a.b=this.b;return a};Qg.prototype.bind=function(a){Qg.Cb.bind.call(this,a);Hd(this,a);return this};function Sg(a){Dd.call(this,a)}t(Sg,Dd);Sg.prototype.Z=function(){var a=B();a.add(this.Ca);var b=this.ea.info();Rg(this.Ca.getName(),b.Pe).forEach(a.add.bind(a));this.Vb&&Rg(this.Ca.getName(),b.g).forEach(a.add.bind(a));return a};Sg.prototype.clone=function(){var a=new Sg(this.ea);Gd(a,this);a.Ca=this.Ca;this.values&&(a.values=this.values instanceof I?this.values:this.values.slice());a.Vb=this.Vb;a.Wb=this.Wb;return a};
Sg.prototype.bind=function(a){Sg.Cb.bind.call(this,a);this.Wb&&(this.values=this.Wb instanceof I?a[this.Wb.sa()]:this.Wb.map(function(b){return b instanceof I?a[b.sa()]:b}));return this};function Tg(a){Dd.call(this,a)}t(Tg,Dd);Tg.prototype.Z=function(){var a=B();a.add(this.table);var b=this.set.map(function(a){return a.L.j()}),c=this.ea.info();Ug(c,b).forEach(a.add.bind(a));Vg(c,b).forEach(a.add.bind(a));return a};Tg.prototype.clone=function(){var a=new Tg(this.ea);Gd(a,this);a.table=this.table;a.set=this.set?this.set.slice():this.set;return a};Tg.prototype.bind=function(a){Tg.Cb.bind.call(this,a);this.set.forEach(function(b){-1!=b.Sc&&(b.value=a[b.Sc])});Hd(this,a);return this};function Wg(a,b){if(null==b)return"NULL";switch(a){case 1:return b?1:0;case 3:case 4:return b;case 0:return"'"+qb(b)+"'";default:return"'"+b.toString()+"'"}}function Xg(a,b){var c=a.Vb?"INSERT OR REPLACE":"INSERT",d=a.Ca.$a(),c=c+(" INTO "+a.Ca.getName()+"("),c=c+d.map(function(a){return a.getName()}).join(", "),c=c+") VALUES (";return a.values.map(function(a){var f=d.map(function(c){var d=a.m[c.getName()];return b?null!=d?"#":"NULL":Wg(c.K(),d)});return c+f.join(", ")+");"}).join("\n")}
function Yg(a){switch(a){case "between":return"BETWEEN";case "eq":return"=";case "gte":return">=";case "gt":return">";case "in":return"IN";case "lte":return"<=";case "lt":return"<";case "match":return"LIKE";case "neq":return"<>";default:return"UNKNOWN"}}function Zg(a,b,c,d){return a instanceof I?"?"+a.sa().toString():d?null!=a?"#":"NULL":"match"==b?"'"+a.toString()+"'":"in"==b?"("+a.map(function(a){return Wg(c,a)}).join(", ")+")":"between"==b?Wg(c,a[0])+" AND "+Wg(c,a[1]):Wg(c,a).toString()}
function $g(a,b){return K(a).map(function(a){return"("+ah(a,b)+")"}).join("and"==a.Nb?" AND ":" OR ")}function bh(a){return[a.da.j(),Yg(a.D),a.ia.j()].join(" ")}function ah(a,b){if(a instanceof Ad){var c=a.L.j(),d=Yg(a.D),e=Zg(a.value,a.D,a.L.K(),b);return"="==d&&"NULL"==e?[c,"IS NULL"].join(" "):"<>"==d&&"NULL"==e?[c,"IS NOT NULL"].join(" "):[c,d,e].join(" ")}if(a instanceof Qf)return $g(a,b);if(a instanceof Tf)return bh(a);throw new C(357,typeof a);}
function ch(a,b){var c=ah(a,b);return c?" WHERE "+c:""}function dh(a,b){var c="UPDATE "+a.table.getName()+" SET ",c=c+a.set.map(function(a){var b=a.L.j()+" = ";return-1!=a.Sc?b+"?"+a.Sc.toString():b+Wg(a.L.K(),a.value).toString()}).join(", ");a.A&&(c+=ch(a.A,b));return c+";"}
function eh(a,b){var c="*";a.f.length&&(c=a.f.map(function(a){return a.Ta()?a.j()+" AS "+a.Ta():a.j()}).join(", "));c="SELECT "+c+" FROM ";null!=a.qb&&0!=a.qb.size?c+=fh(a,b):(c+=a.b.map(gh).join(", "),a.A&&(c+=ch(a.A,b)));if(a.M)var d=a.M.map(function(a){return a.L.j()+(0==a.eb?" DESC":" ASC")}).join(", "),c=c+(" ORDER BY "+d);a.fa&&(d=a.fa.map(function(a){return a.j()}).join(", "),c+=" GROUP BY "+d);a.X&&(c+=" LIMIT "+a.X.toString());a.N&&(c+=" SKIP "+a.N.toString());return c+";"}
function gh(a){return H(a)!=a.getName()?a.getName()+" AS "+H(a):a.getName()}function fh(a,b){for(var c=Jf(a.A,function(a){return a instanceof Tf}),d=c.map(bh),e=gh(a.b[0]),f=1;f<a.b.length;f++)var h=gh(a.b[f]),e=a.qb.has(c[d.length-f].W())?e+(" LEFT OUTER JOIN "+h):e+(" INNER JOIN "+h),e=e+(" ON ("+d[d.length-f]+")");c=td(a.A,0);c instanceof Tf||(e+=" WHERE "+ah(c,b));return e}
function hh(a,b){var c=b||!1,d=a.a.clone();if(d instanceof Sg)return Xg(d,c);if(d instanceof Qg){var e="DELETE FROM "+d.b.getName();d.A&&(e+=ch(d.A,c));return e+";"}if(d instanceof Tg)return dh(d,c);if(d instanceof Id)return eh(d,c);throw new C(358,typeof d);};function T(a,b){this.global=a;this.hg=a.l(Tb);this.Na=a.l(Ub);this.a=b}r("lf.query.BaseBuilder",T);T.prototype.exec=function(){try{this.Ya()}catch(a){return Za(a)}return new v(function(a,c){var d=new Og(this.global,[this.vc()]);Sd(this.Na,d).then(function(c){a(Zc(c[0]))},c)},this)};T.prototype.exec=T.prototype.exec;T.prototype.Ef=function(){var a=function(a){return a.Mc(this.a)+"\n"}.bind(this);return Pf(ih(this).ab(),a)};T.prototype.explain=T.prototype.Ef;
T.prototype.bind=function(a){this.a.bind(a);return this};T.prototype.bind=T.prototype.bind;T.prototype.og=function(a){return hh(this,a)};T.prototype.toSql=T.prototype.og;T.prototype.Ya=aa();function ih(a){if(null==a.Qe){var b;b=a.hg;var c=a.a,d=b.Vf.create(c);b=b.eg.create(d,c);a.Qe=b}return a.Qe}T.prototype.vc=function(){return{context:this.a.clone(),Xd:ih(this)}};function jh(a){T.call(this,a,new Qg(a.l(Wb)))}t(jh,T);r("lf.query.DeleteBuilder",jh);jh.prototype.b=function(a){if(null!=this.a.b)throw new C(515);this.a.b=a;return this};jh.prototype.from=jh.prototype.b;jh.prototype.A=function(a){this.wd();this.a.A=a;return this};jh.prototype.where=jh.prototype.A;jh.prototype.wd=function(){if(null==this.a.b)throw new C(548);if(null!=this.a.A)throw new C(516);};jh.prototype.Ya=function(){jh.Cb.Ya.call(this);if(null==this.a.b)throw new C(517);};function kh(a,b){T.call(this,a,new Sg(a.l(Wb)));this.a.Vb=b||!1}t(kh,T);r("lf.query.InsertBuilder",kh);kh.prototype.Ya=function(){kh.Cb.Ya.call(this);var a=this.a;if(null==a.Ca||null==a.values)throw new C(518);if(a.Vb&&null===a.Ca.xb().bd())throw new C(519);};kh.prototype.Ca=function(a){if(null!=this.a.Ca)throw new C(520);this.a.Ca=a;return this};kh.prototype.into=kh.prototype.Ca;
kh.prototype.values=function(a){if(null!=this.a.values)throw new C(521);a instanceof I||a.some(function(a){return a instanceof I})?this.a.Wb=a:this.a.values=a;return this};kh.prototype.values=kh.prototype.values;function lh(a){return mh("and",Array.prototype.slice.call(arguments))}r("lf.op.and",lh);r("lf.op.or",function(a){return mh("or",Array.prototype.slice.call(arguments))});function mh(a,b){var c=new Qf(a);b.forEach(function(a){L(c,a)});return c}r("lf.op.not",function(a){a.qd(!0);return a});function U(a,b){T.call(this,a,new Id(a.l(Wb)));this.xe=this.rd=!1;this.a.f=b;nh(this);oh(this)}t(U,T);r("lf.query.SelectBuilder",U);U.prototype.Ya=function(){U.Cb.Ya.call(this);var a=this.a;if(null==a.b)throw new C(522);if(q(a.Mb)&&!q(a.X)||q(a.Sb)&&!q(a.N))throw new C(523);null!=this.a.fa?ph(this):qh(this)};function nh(a){var b=a.a.f.filter(function(a){return a instanceof R&&"DISTINCT"==a.Db},a);if(0!=b.length&&(1!=b.length||1!=a.a.f.length))throw new C(524);}
function ph(a){var b=a.a.f.filter(function(a){return!(a instanceof R)}).map(function(a){return a.j()}),c=!1;if(0==a.a.fa.length||0==a.a.f.length)c=!0;else{var d=a.a.fa.map(function(a){return a.j()});(c=b.some(function(a){return-1==d.indexOf(a)}))||(c=a.a.fa.some(function(a){a=a.K();return 6==a||0==a}))}if(c)throw new C(525);}function qh(a){var b=a.a.f.some(function(a){return a instanceof R},a);a=a.a.f.some(function(a){return!(a instanceof R)},a)||0==a.a.f.length;if(b&&a)throw new C(526);}
function oh(a){a.a.f.forEach(function(a){if(a instanceof R&&!rh(a.Db,a.K()))throw new C(527,a.j());},a)}function sh(a,b){if(null==a.a.b)throw new C(b);}U.prototype.b=function(a){if(this.xe)throw new C(515);this.xe=!0;null==this.a.b&&(this.a.b=[]);this.a.b.push.apply(this.a.b,Array.prototype.slice.call(arguments));return this};U.prototype.from=U.prototype.b;U.prototype.A=function(a){sh(this,548);if(this.rd)throw new C(516);this.rd=!0;th(this,a);return this};U.prototype.where=U.prototype.A;
function th(a,b){if(null!=a.a.A){var c=lh(b,a.a.A);a.a.A=c}else a.a.A=b}U.prototype.Nf=function(a,b){sh(this,542);if(this.rd)throw new C(547);this.a.b.push(a);th(this,b);return this};U.prototype.innerJoin=U.prototype.Nf;U.prototype.Tf=function(a,b){sh(this,542);if(!(b instanceof Tf))throw new C(541);if(this.rd)throw new C(547);this.a.b.push(a);null==this.a.qb&&(this.a.qb=B());var c=b;H(a)!=H(b.ia.I())&&(c=b.reverse());this.a.qb.add(c.W());th(this,c);return this};U.prototype.leftOuterJoin=U.prototype.Tf;
U.prototype.X=function(a){if(null!=(this.a.X||this.a.Mb))throw new C(528);if(a instanceof I)this.a.Mb=a;else{if(0>a)throw new C(531);this.a.X=a}return this};U.prototype.limit=U.prototype.X;U.prototype.N=function(a){if(null!=(this.a.N||this.a.Sb))throw new C(529);if(a instanceof I)this.a.Sb=a;else{if(0>a)throw new C(531);this.a.N=a}return this};U.prototype.skip=U.prototype.N;U.prototype.M=function(a,b){sh(this,549);null==this.a.M&&(this.a.M=[]);this.a.M.push({L:a,eb:null!=b?b:1});return this};
U.prototype.orderBy=U.prototype.M;U.prototype.fa=function(a){sh(this,549);if(null!=this.a.fa)throw new C(530);null==this.a.fa&&(this.a.fa=[]);this.a.fa.push.apply(this.a.fa,Array.prototype.slice.call(arguments));return this};U.prototype.groupBy=U.prototype.fa;function rh(a,b){switch(a){case "COUNT":case "DISTINCT":return!0;case "AVG":case "GEOMEAN":case "STDDEV":case "SUM":return 4==b||3==b;case "MAX":case "MIN":return 4==b||3==b||5==b||2==b}return!1}
U.prototype.clone=function(){var a=new U(this.global,this.a.f);a.a=this.a.clone();a.a.Wc=null;return a};U.prototype.clone=U.prototype.clone;function uh(a,b){T.call(this,a,new Tg(a.l(Wb)));this.a.table=b}t(uh,T);r("lf.query.UpdateBuilder",uh);uh.prototype.set=function(a,b){var c={Sc:b instanceof I?b.sa():-1,L:a,value:b};null!=this.a.set?this.a.set.push(c):this.a.set=[c];return this};uh.prototype.set=uh.prototype.set;uh.prototype.A=function(a){this.wd();this.a.A=a;return this};uh.prototype.where=uh.prototype.A;uh.prototype.wd=function(){if(null!=this.a.A)throw new C(516);};
uh.prototype.Ya=function(){uh.Cb.Ya.call(this);if(null==this.a.set)throw new C(532);if(this.a.set.some(function(a){return a.value instanceof I}))throw new C(501);};function vh(a){this.a=a;this.wa=null}vh.prototype.cc=function(){null===this.wa&&(this.wa=this.$c());return this.wa};function wh(a){vh.call(this,a)}t(wh,vh);wh.prototype.$c=function(){return this.a.Vb?new vg(this.a.Ca,this.a.values):new ug(this.a.Ca,this.a.values)};function xh(a){vh.call(this,a)}t(xh,vh);xh.prototype.$c=function(){var a=new xg(this.a.table,this.a.set),b=null!=this.a.A?new yg(this.a.A.Fb()):null,c=new zg(this.a.table);null===b?L(a,c):(L(b,c),L(a,b));return a};function yh(a,b,c){this.wa=a;this.Yd=b;this.Qb=c}yh.prototype.cc=function(){this.Qb.forEach(function(a){this.wa=a.gb(this.wa,this.Yd)},this);return this.wa};function zh(a,b){vh.call(this,a);this.Qb=b}t(zh,vh);zh.prototype.$c=function(){var a=new wg(this.a.b),b=null!=this.a.A?new yg(this.a.A.Fb()):null,c=new zg(this.a.b);null===b?L(a,c):(L(b,c),L(a,b));return(new yh(a,this.a,this.Qb)).cc()};function Ah(){}t(Ah,Ig);Ah.prototype.gb=function(a,b){this.V=a;this.Ra(this.V,b);return this.V};Ah.prototype.Ra=function(a,b){if(a instanceof yg&&a.G instanceof Tf){var c=a.G.W(),d=td(a,0);d instanceof Ag&&(c=q(b)&&null!=b.qb&&b.qb.has(c),c=new Hg(a.G,c),Of(a,d,c,c),a==this.V&&(this.V=c),a=c)}K(a).forEach(function(a){this.Ra(a,b)},this)};function Bh(){this.Rc=B()}t(Bh,Ig);Bh.prototype.gb=function(a){this.Rc.clear();this.V=a;this.Ra(this.V);this.Rc.clear();return this.V};Bh.prototype.Ra=function(a){if(Ch(a)){var b=a.G instanceof Ad?Dh(this,a):Eh(this,a);this.Rc.add(a);b==a&&(b=td(a,0));null!==b&&(fa(b.getParent())&&(this.V=b),Ch(b)&&!this.Rc.has(b)&&this.Ra(b))}else K(a).forEach(function(a){this.Ra(a)},this)};
function Fh(a,b,c){var d=b;if(td(b,0)instanceof yg)d=Mf(b),Fh(a,b,c);else if(Gh(b)){var e=[],d=Nf(b,c,function(a){a=new yg(a.G);e.push(a);return a});e.forEach(function(a){Fh(this,a,c)},a)}return d}function Dh(a,b){var c=B([H(b.G.L.I())]),d=function(a){return Hh(this,a,c)}.bind(a);return Fh(a,b,d)}function Eh(a,b){var c=B([H(b.G.da.I()),H(b.G.ia.I())]),d=function(a){return Hh(this,a,c)}.bind(a);return Fh(a,b,d)}
function Hh(a,b,c){var d=B();If(b).forEach(function(a){d.add(H(a.table))},a);b instanceof zg&&d.add(H(b.table));return dc(d,c)}function Ch(a){return a instanceof yg&&!(a.G instanceof Qf)}function Gh(a){a=td(a,0);return a instanceof Ag||a instanceof Hg};function Ih(a,b){vh.call(this,a);this.Qb=b;this.Ue=this.Le=this.af=this.Oe=this.pe=this.Ae=this.$e=this.ue=this.cf=null}t(Ih,vh);
Ih.prototype.$c=function(){Jh(this);2<=this.a.b.length&&(this.ue=new Ag);this.$e=null!=this.a.A?new yg(this.a.A.Fb()):null;this.a.M&&(this.Oe=new Cg(this.a.M));null!=this.a.N&&0<this.a.N&&(this.af=new Gg(this.a.N));null!=this.a.X&&(this.Le=new Fg(this.a.X));null!=this.a.fa&&(this.Ae=new Eg(this.a.fa));Kh(this);this.Ue=new Bg(this.a.f||[],this.a.fa||null);var a=Lh(this);return(new yh(a,this.a,this.Qb)).cc()};
function Lh(a){for(var b=[a.Le,a.af,a.Ue,a.Oe,a.pe,a.Ae,a.$e,a.ue],c=null,d=null,e=0;e<b.length;e++){var f=b[e];null!==f&&(null===d?d=f:L(b[c],f),c=e)}a.cf.forEach(function(a){L(b[c],a)});return d}function Jh(a){a.cf=a.a.b.map(function(a){return new zg(a)},a)}function Kh(a){var b=a.a.f.filter(function(a){return a instanceof R});null!=a.a.M&&a.a.M.forEach(function(a){a.L instanceof R&&b.push(a.L)});0<b.length&&(a.pe=new Dg(b))};function Mh(){this.ce=[new Jg,new Mg,new Bh,new Ah];this.Cd=[new Jg]}Mh.prototype.create=function(a){var b=null;if(a instanceof Sg)b=new wh(a);else if(a instanceof Qg)b=new zh(a,this.Cd);else if(a instanceof Id)b=new Ih(a,this.ce);else if(a instanceof Tg)b=new xh(a);else throw new C(513);b=b.cc();return new sg(b,a.Z())};function Nh(a){S.call(this,0,1);this.O=a}t(Nh,S);Nh.prototype.toString=function(){return"delete("+this.O.getName()+")"};Nh.prototype.ba=function(a,b){var c=b[0].entries.map(function(a){return a.ra});a.remove(this.O,c);return[cd()]};function Oh(a,b){S.call(this,0,-1);this.table=b;this.F=a.l(Sb)}t(Oh,S);Oh.prototype.toString=function(){return"get_row_count("+this.table.getName()+")"};Oh.prototype.ba=function(){var a=this.F.get(this.table.s+".#"),b=new E([],[this.table.getName()]),c=dg(),a=a.Pa().qa;null===b.Sa&&(b.Sa=z());b.Sa.set(c.j(),a);return[b]};function Ph(a,b){S.call(this,0,-1);this.ka=a.l(Rb);this.F=a.l(Sb);this.table=b}t(Ph,S);Ph.prototype.toString=function(){var a="table_access("+this.table.getName();null===this.table.Ta()||(a+=" as "+this.table.Ta());return a+")"};Ph.prototype.ba=function(){var a=this.F.get(this.table.s+".#").Ua();return[fd(Ge(this.ka,a),[H(this.table)])]};function Qh(a){this.h=a}t(Qh,Ig);Qh.prototype.gb=function(a,b){this.V=a;if(!this.xd(b))return a;var c=Jf(a,function(a){return a instanceof Ph})[0],d=new Oh(this.h,c.table);Of(c,c,d,d);return this.V};Qh.prototype.xd=function(a){return 1==a.f.length&&1==a.b.length&&null==a.A&&null==a.X&&null==a.N&&null==a.fa?(a=a.f[0],a instanceof R&&"COUNT"==a.Db&&a.child instanceof cg):!1};function Rh(a){S.call(this,0,1);this.ze=a}t(Rh,S);Rh.prototype.toString=function(){return"groupBy("+this.ze.map(function(a){return a.j()}).toString()+")"};Rh.prototype.ba=function(a,b){return Sh(this,b[0])};function Sh(a,b){var c=new Sf,d=function(a){return this.ze.map(function(b){return G(a,b)},this).join(",")}.bind(a);b.entries.forEach(function(a){c.set(d(a),a)},a);return c.keys().map(function(a){return new E(c.get(a),F(b))},a)};function Th(a,b,c){S.call(this,0,0);this.F=a.l(Sb);this.ka=a.l(Rb);this.G=b;this.Kb=c;this.ud="eq"==this.G.D?0:2;this.Be=null}t(Th,S);var Vh=["hash","index_nested_loop","nested_loop"];Th.prototype.toString=function(){return"join(type: "+(this.Kb?"outer":"inner")+", impl: "+Vh[this.ud]+", "+this.G.toString()+")"};
Th.prototype.ba=function(a,b){switch(this.ud){case 0:return[Xf(this.G,b[0],b[1],this.Kb)];case 1:return[Yf(this.G,b[0],b[1],this.Be,this.ka)];default:var c=this.G,d=b[0],e=b[1],f=this.Kb,h=[d,e];f||(h=Uf(c,d,e));for(var d=h[0],e=h[1],h=[],k=F(d),p=F(e),D=d.entries.length,ea=e.entries.length,ia=ea+256-1>>8,Ra=0;Ra<ia;){for(var Qb=0;Qb<D;Qb++){var Ff=!1,Gf=G(d.entries[Qb],c.da);if(null!==Gf)for(var Uh=Math.min(Ra+1<<8,ea),Hc=Ra<<8;Hc<Uh;Hc++)if(c.oc(Gf,G(e.entries[Hc],c.ia))){var Ff=!0,Vi=jd(d.entries[Qb],
k,e.entries[Hc],p);h.push(Vi)}f&&!Ff&&h.push(Wf(c,d.entries[Qb],k))}Ra++}c=F(d).concat(F(e));return[new E(h,c)]}};function Wh(a,b){a.ud=1;var c=a.F.get(b.sa().j());a.Be={Kf:b,Yf:b==a.G.da?a.G.ia:a.G.da,index:c}};function Xh(a){S.call(this,0,-1);this.We=a}t(Xh,S);Xh.prototype.toString=function(){return"no_op_step("+F(this.We[0]).join(",")+")"};Xh.prototype.ba=g("We");function Yh(){}t(Yh,Ig);Yh.prototype.gb=function(a,b){this.V=a;if(!this.xd(b))return a;Jf(a,function(a){return a instanceof Th}).forEach(this.gg,this);return this.V};Yh.prototype.xd=function(a){return 1<a.b.length};
Yh.prototype.gg=function(a){if("eq"==a.G.D&&!a.Kb){var b=function(b){if(!(b instanceof Ph))return null;b=H(b.table)==H(a.G.ia.I())?a.G.ia:a.G.da;return fa(b.sa())?null:b},c=b(td(a,0)),b=b(td(a,1));if(null!==c||null!==b){b=null===b?c:b;Wh(a,b);var d=new E([],[H(b.I())]);wd(a,new Xh([d]),b==c?0:1)}}};function Zh(a){a=a.map(function(a){return a.yb()});a=Cb.apply(null,a);var b=[];Bb(a,function(a){b.push(a)});return b}function $h(a){this.Jb=a}$h.prototype.ad=function(){return 1==this.Jb.f.length?[Vc()]:[this.Jb.f.map(function(){return Vc()})]};function ai(a,b){this.Jb=a;this.va=b;this.Ad=this.Je=null}
function bi(a,b){var c=z();a.va.keys().forEach(function(a){var e=this.va.get(a).map(function(a){return Ed(b,a)},this),f=new Df([Vc()]);e.forEach(function(a){var b=null;"between"==a.D?b=new Rc(a.value[0],a.value[1],!1,!1):"eq"==a.D?(b=a.value,b=new Rc(b,b,!1,!1)):b="gte"==a.D?new Rc(a.value,null,!1,!1):"gt"==a.D?new Rc(a.value,null,!0,!1):"lte"==a.D?new Rc(null,a.value,!1,!1):new Rc(null,a.value,!1,!0);a=a.Va?Sc(b):[b];a=new Df(a);f=Ef(f,a)});c.set(a,f)},a);return c}
ai.prototype.ad=function(a){if(this.Je==a)return this.Ad;for(var b=bi(this,a),c=this.Jb.f.length-1;0<=c;c--){var d=this.Jb.f[c];if(null!==(b.get(d.ea.getName())||null))break;b.set(d.ea.getName(),new Df([Vc()]))}this.Ad=1==this.Jb.f.length?A(b)[0].yb():Zh(ci(this,b));this.Je=a;return this.Ad};function ci(a,b){var c=z(),d=0;a.Jb.f.forEach(function(a){c.set(a.ea.getName(),d);d++});return Gb(b).sort(function(a,b){return c.get(a)-c.get(b)}).map(function(a){return b.get(a)})};function di(a,b){this.df=b;this.F=a.l(Sb)}function ei(a,b,c){c=c.filter(a.Of,a);if(0==c.length)return null;a=fi(a,c);if(0==a.length)return null;if(1==a.length)return a[0];var d=Number.MAX_VALUE;return a.reduce(function(a,c){var h=gi(c,b);return h<d?(d=h,c):a},null)}
function fi(a,b){return a.df.Aa().map(function(a){a=new hi(this.F,a);ii(a,b);return a},a).filter(function(a){if(null===a.va)a=!1;else{for(var b=!1,e=!0,f=0;f<a.ob.f.length;f++){var h=a.va.has(a.ob.f[f].ea.getName());if(b&&h){e=!1;break}h||(b=!0)}a=e}return a})}di.prototype.Of=function(a){var b;if(b=a instanceof Ad)Bd(a),b=null!==a.value&&("between"==a.D||"eq"==a.D||"gt"==a.D||"gte"==a.D||"lt"==a.D||"lte"==a.D);return b?a.L.I()==this.df:!1};
function hi(a,b){this.F=a;this.ob=b;this.Lf=B(this.ob.f.map(function(a){return a.ea.getName()}));this.Od=this.va=null}function ji(a){null===a.Od&&(a.Od=new ai(a.ob,a.va));return a.Od}function ii(a,b){b.forEach(function(a){var b=a.$a()[0].getName();this.Lf.has(b)&&(null===this.va&&(this.va=new Sf),this.va.set(b,a.W()))},a)}function gi(a,b){var c=ji(a).ad(b),d=a.F.get(a.ob.j());return c.reduce(function(a,b){return a+d.Yc(b)},0)};function ki(a,b,c,d){S.call(this,0,-1);this.F=a.l(Sb);this.index=b;this.Ie=c;this.ae=d;this.Qc=this.Pc=!1}t(ki,S);ki.prototype.toString=function(){return"index_range_scan("+this.index.j()+", ?, "+(this.ae?"reverse":"natural")+(this.Pc?", limit:?":"")+(this.Qc?", skip:?":"")+")"};ki.prototype.Mc=function(a){var b=this.toString(),c=this.Ie.ad(a),b=b.replace("?",c.toString());this.Pc&&(b=b.replace("?",a.X.toString()));this.Qc&&(b=b.replace("?",a.N.toString()));return b};
ki.prototype.ba=function(a,b,c){a=this.Ie.ad(c);b=this.F.get(this.index.j());c=(1==a.length&&a[0]instanceof Rc&&Xc(a[0])?Ke(b.get(a[0].b),!1,this.Pc?c.X:void 0,this.Qc?c.N:void 0):b.Ua(a,this.ae,this.Pc?c.X:void 0,this.Qc?c.N:void 0)).map(function(a){return new y(a,{})},this);return[fd(c,[this.index.Lc])]};function li(a){S.call(this,0,1);this.md=a}t(li,S);li.prototype.toString=l("select(?)");li.prototype.Mc=function(a){a=Ed(a,this.md);return this.toString().replace("?",a.toString())};li.prototype.ba=function(a,b,c){return[Ed(c,this.md).eval(b[0])]};function mi(a,b){S.call(this,0,1);this.ka=a.l(Rb);this.O=b}t(mi,S);mi.prototype.toString=function(){return"table_access_by_row_id("+this.O.getName()+")"};mi.prototype.ba=function(a,b){return[fd(Ge(this.ka,$c(b[0])),[H(this.O)])]};function ni(a){this.h=a}t(ni,Ig);ni.prototype.gb=function(a,b){this.V=a;Jf(a,function(a){return a instanceof Ph}).forEach(function(a){var d=oi(a);if(0!=d.length){var e=ei(new di(this.h,a.table),b,d.map(function(a){return Ed(b,a.md)}));if(null!==e){var f=z();d.forEach(function(a){f.set(a.md,a)},this);this.V=pi(this,e,f,a)}}},this);return this.V};function oi(a){var b=[];for(a=a.getParent();a;)a instanceof li&&b.push(a),a=a.getParent();return b}
function pi(a,b,c,d){(null===b.va?[]:b.va.values()).map(function(a){return c.get(a)}).forEach(Kf);b=new ki(a.h,b.ob,ji(b),!1);a=new mi(a.h,d.table);L(a,b);Of(d,d,a,b);return b.ab()};function qi(a,b){S.call(this,0,-1);this.F=a.l(Sb);this.O=b}t(qi,S);qi.prototype.toString=function(){return"insert("+this.O.getName()+")"};qi.prototype.ba=function(a,b,c){ri(this.O,c.values,this.F);a.pb(this.O,c.values);return[fd(c.values,[this.O.getName()])]};function ri(a,b,c){a=a.xb().bd();if(null===a?0:a.f[0].autoIncrement){var d=a.f[0].ea.getName();c=c.get(a.j()).max();var e=null===c?0:c[0];b.forEach(function(a){if(0==a.m[d]||null==a.m[d])e++,a.m[d]=e})}}
function si(a,b){S.call(this,0,-1);this.F=a.l(Sb);this.O=b}t(si,S);si.prototype.toString=function(){return"insert_replace("+this.O.getName()+")"};si.prototype.ba=function(a,b,c){ri(this.O,c.values,this.F);a.Jd(this.O,c.values);return[fd(c.values,[this.O.getName()])]};function ti(){S.call(this,0,1)}t(ti,S);ti.prototype.toString=l("limit(?)");ti.prototype.Mc=function(a){return this.toString().replace("?",a.X.toString())};ti.prototype.ba=function(a,b,c){b[0].entries.splice(c.X);return b};function ui(a){S.call(this,0,1);this.M=a}t(ui,S);m=ui.prototype;m.toString=function(){return"order_by("+Jd(this.M)+")"};m.ba=function(a,b){if(1==b.length){var c;c=b[0];for(var d=null,e=0;e<this.M.length;e++){var f=eg(this.M[e].L);if(null!==c.Sa&&c.Sa.has(f.j())){d=f;break}}c=d;(null===c?b[0]:ad(b[0],c)).entries.sort(this.Bf.bind(this))}else b.sort(this.jg.bind(this));return b};
m.S=function(a,b){var c=null,d=null,e=null,f=-1;do f++,e=this.M[f].L,c=this.M[f].eb,d=a(e),e=b(e);while(d==e&&f+1<this.M.length);d=d<e?-1:d>e?1:0;return 1==c?d:-d};m.jg=function(a,b){return this.S(function(b){return b instanceof R?ad(a,b):G(a.entries[a.entries.length-1],b)},function(a){return a instanceof R?ad(b,a):G(b.entries[b.entries.length-1],a)})};m.Bf=function(a,b){return this.S(function(b){return G(a,b)},function(a){return G(b,a)})};function vi(a,b){this.Ea=a;this.H=b}function wi(a){return a.H.some(function(a){return a instanceof R},a)?xi(a):yi(a)}function xi(a){if(1==a.H.length&&"DISTINCT"==a.H[0].Db)return a=ad(a.Ea,a.H[0]).entries.map(function(a){var b=new gd(new y(-1,{}),1<this.Ea.J.size);id(b,this.H[0],G(a,this.H[0].child));return b},a),new E(a,[]);var b=new gd(new y(-1,{}),1<a.Ea.J.size);a.H.forEach(function(a){var d=a instanceof R?ad(this.Ea,a):G(this.Ea.entries[0],a);id(b,a,d)},a);return new E([b],F(a.Ea))}
function yi(a){var b=Array(a.Ea.entries.length),c=1<a.Ea.J.size;a.Ea.entries.forEach(function(a,e){b[e]=new gd(new y(a.ra.id(),{}),c);this.H.forEach(function(c){id(b[e],c,G(a,c))},this)},a);return new E(b,F(a.Ea))}function zi(a,b){var c=a.map(function(a){return wi(new vi(a,b)).entries[0]});return new E(c,F(a[0]))};function Ai(a,b){S.call(this,0,1);this.f=a;this.Ib=b}t(Ai,S);Ai.prototype.toString=function(){var a="project("+this.f.toString();if(null!==this.Ib)var b=this.Ib.map(function(a){return a.j()}).join(", "),a=a+(", groupBy("+b+")");return a+")"};Ai.prototype.ba=function(a,b){var c;0==b.length?c=[cd()]:1==b.length?(c=b[0],c=[0==this.f.length?c:wi(new vi(c,this.f))]):c=[zi(b,this.f)];return c};function Bi(a){return a.f.some(function(a){return a instanceof R})||null!==a.Ib};function Ci(){S.call(this,0,1)}t(Ci,S);Ci.prototype.toString=l("skip(?)");Ci.prototype.Mc=function(a){return this.toString().replace("?",a.N.toString())};Ci.prototype.ba=function(a,b,c){return[new E(b[0].entries.slice(c.N),F(b[0]))]};function Di(){}t(Di,Ig);Di.prototype.gb=function(a){var b=Jf(a,function(a){return a instanceof ti||a instanceof Ci});if(0==b.length)return a;var c=Ei(a);if(null===c)return a;b.forEach(function(a){a instanceof ti?c.Pc=!0:c.Qc=!0;Kf(a)},this);return c.ab()};function Ei(a){a=Jf(a,function(a){return a instanceof ki},function(a){return a instanceof Ai&&Bi(a)||a instanceof ui||1!=K(a).length||a instanceof li});return 0<a.length?a[0]:null};function Fi(a){this.h=a}t(Fi,Ig);Fi.prototype.gb=function(a){var b=Gi(a);if(null===b)return a;a:{var c=b;a=Hi(td(b,0));if(null!==a){var d;d=b.M;for(var e=null,f=a.table.Aa(),h=0;h<f.length&&null===e;h++)e=Ii(f[h],d);d=e;if(null===d){a=c;break a}c=new ki(this.h,d.ob,new $h(d.ob),d.Fe);d=new mi(this.h,a.table);L(d,c);Kf(b);c=Of(a,a,d,c)}a=c}if(a==b)a:if(a=b,c=Ji(td(b,0)),null!==c){d=Ii(c.index,b.M);if(null===d)break a;c.ae=d.Fe;a=Kf(b).parent}return a.ab()};
function Ji(a){a=Jf(a,function(a){return a instanceof ki},function(a){return 1!=K(a).length});return 0<a.length?a[0]:null}function Hi(a){a=Jf(a,function(a){return a instanceof Ph},function(a){return 1!=K(a).length});return 0<a.length?a[0]:null}function Gi(a){a=Jf(a,function(a){return a instanceof ui});return 0<a.length?a[0]:null}
function Ii(a,b){if(a.f.length!=b.length||!b.every(function(b,c){return b.L.getName()==a.f[c].ea.getName()}))return null;var c=Ki(b,a);return c[0]||c[1]?{ob:a,Fe:c[1]}:null}function Ki(a,b){var c=a.reduce(function(a,b){return a<<1|(0==b.eb?0:1)},0),d=b.f.reduce(function(a,b){return a<<1|(0==b.eb?0:1)},0),d=c^d,c=0==d,d=d==Math.pow(2,Math.max(a.length,b.f.length))-1;return[c,d]};function Li(a,b,c){this.wa=a;this.Yd=b;this.Qb=c}Li.prototype.cc=function(){this.Qb.forEach(function(a){this.wa=a.gb(this.wa,this.Yd)},this);return this.wa};function Mi(a,b){S.call(this,0,1);this.O=a;this.rg=b}t(Mi,S);Mi.prototype.toString=function(){return"update("+this.O.getName()+")"};Mi.prototype.ba=function(a,b){var c=b[0].entries.map(function(a){var b=this.O.Zb(a.ra.Fa());this.rg.forEach(function(a){b.m[a.L.getName()]=a.value},this);return b},this);a.update(this.O,c);return[cd()]};function Ni(a){this.h=a;this.ce=[new Yh,new ni(this.h),new Fi(this.h),new Di,new Qh(this.h)];this.Cd=[new ni(this.h)]}Ni.prototype.create=function(a,b){var c=a.ab();if(c instanceof vg||c instanceof ug)return Oi(this,a,b);if(c instanceof Bg||c instanceof Fg||c instanceof Gg)return Oi(this,a,b,this.ce);if(c instanceof wg||c instanceof xg)return Oi(this,a,b,this.Cd);throw new C(8);};function Oi(a,b,c,d){a=Hf(b.ab(),a.Xf.bind(a));null!=d&&(a=(new Li(a,c,d)).cc());return new Kd(a,b.Z())}
Ni.prototype.Xf=function(a){if(a instanceof Bg)return new Ai(a.f,a.Ib);if(a instanceof Eg)return new Rh(a.f);if(a instanceof Dg)return new ig(a.f);if(a instanceof Cg)return new ui(a.M);if(a instanceof Gg)return new Ci;if(a instanceof Fg)return new ti;if(a instanceof yg)return new li(a.G.W());if(a instanceof Ag)return new Ng;if(a instanceof Hg)return new Th(this.h,a.G,a.Kb);if(a instanceof zg)return new Ph(this.h,a.table);if(a instanceof wg)return new Nh(a.table);if(a instanceof xg)return new Mi(a.table,
a.ie);if(a instanceof vg)return new si(this.h,a.table);if(a instanceof ug)return new qi(this.h,a.table);throw new C(514);};function Pi(a){this.Vf=new Mh;this.eg=new Ni(a)};function Qi(){this.Me=z()}function Ri(a,b){var c=a.Me.get(b.getName())||null;null===c&&(c=new Si,a.Me.set(b.getName(),c));return c}function Ti(a,b,c,d){c.forEach(function(a){a=Ri(this,a);0==d?(a.Wa=null,a.pc=b):3==d?(null===a.Rb&&(a.Rb=B()),a.Rb.add(b),null===a.Ma&&(a.Ma=B()),a.Ma.delete(b)):1==d?(null===a.Ma&&(a.Ma=B()),a.Ma.add(b)):2==d&&(a.Wa=b)},a)}
function Ui(a,b,c,d){var e=!0;c.forEach(function(a){if(e){a=Ri(this,a);var c=null===a.Ma||0==a.Ma.size;e=0==d?(null===a.Rb||0==a.Rb.size)&&c&&null===a.pc&&null!==a.Wa&&a.Wa==b:3==d?null===a.pc&&null===a.Wa&&null!==a.Ma&&a.Ma.has(b):1==d?null===a.Wa:c&&(null===a.Wa||a.Wa==b)}},a);return e}function Wi(a,b,c,d){var e=Ui(a,b,c,d);e&&Ti(a,b,c,d);return e}Qi.prototype.releaseLock=function(a,b){b.forEach(function(b){Ri(this,b).releaseLock(a)},this)};
function Xi(a,b){b.forEach(function(a){Ri(this,a).Wa=null},a)}function Si(){this.Rb=this.Ma=this.Wa=this.pc=null}Si.prototype.releaseLock=function(a){this.pc==a&&(this.pc=null);this.Wa==a&&(this.Wa=null);null===this.Ma||this.Ma.delete(a);null===this.Rb||this.Rb.delete(a)};function Yi(){this.Pb=new Zi;this.zc=new Qi}function Sd(a,b){(2>b.getPriority()||2>b.getPriority())&&Xi(a.zc,b.Z());a.Pb.pb(b);$i(a);return b.dc().ha}function $i(a){for(var b=a.Pb.yb(),c=0;c<b.length;c++){var d=b[c],e=!1;if(e=0==d.K()?aj(a,d,1,3):aj(a,d,2,0))a.Pb.remove(d),e=a,d.exec().then(e.cg.bind(e,d),e.bg.bind(e,d))}}function aj(a,b,c,d){var e=!1;Wi(a.zc,b.W(),b.Z(),c)&&(e=Wi(a.zc,b.W(),b.Z(),d));return e}Yi.prototype.cg=function(a,b){this.zc.releaseLock(a.W(),a.Z());a.dc().resolve(b);$i(this)};
Yi.prototype.bg=function(a,b){this.zc.releaseLock(a.W(),a.Z());a.dc().reject(b);$i(this)};function Zi(){this.Pb=[]}Zi.prototype.pb=function(a){Je(this.Pb,a,function(a,c){var d=a.getPriority()-c.getPriority();return 0==d?a.W()-c.W():d})};Zi.prototype.yb=function(){return this.Pb.slice()};Zi.prototype.remove=function(a){var b=this.Pb;a=va(b,a);var c;(c=0<=a)&&ua.splice.call(b,a,1);return c};function bj(a,b){this.Dd=kd.tc();this.Zd=a;this.hd=b;this.H=cj(this)}function cj(a){if(0<a.Zd.f.length)return a.Zd.f;var b=[];a.Zd.b.forEach(function(a){a.$a().forEach(function(a){b.push(a)})});return b}bj.prototype.S=function(a,b){return this.H.every(function(c){return qd(this.Dd,c.K(),"eq")(G(a,c),G(b,c))},this)};
function dj(a,b,c){var d=null===b?[]:b.entries,e=tb(d,c.entries,a.S.bind(a),function(a){return d[a]});b=[];for(var f=0,h=0;h<d.length;h++){var k=d[h];e[f]==k?f++:(k=a.hd.splice(f,1),k=ej(h,k,0,a.hd),b.push(k))}e=tb(d,c.entries,a.S.bind(a),function(a,b){return c.entries[b]});for(h=f=0;h<c.entries.length;h++)k=c.entries[h],e[f]==k?f++:(a.hd.splice(h,0,k.ra.m),k=ej(h,[],1,a.hd),b.push(k));return b}function ej(a,b,c,d){return{sg:c,index:a,object:d,vg:b,type:"splice"}};function fj(){this.ac=z()}fj.prototype.td=function(a,b){var c=la(a.a).toString(),d=this.ac.get(c)||null;null===d&&(d=new gj(a),this.ac.set(c,d));d.td(b)};fj.prototype.$d=function(a,b){var c=la(a.a).toString(),d=this.ac.get(c)||null;d.$d(b);0<d.Dc.size||this.ac.delete(c)};function Rd(a,b){var c=B();b.forEach(function(a){c.add(a.getName())});var d=[];a.ac.forEach(function(a){a=a.vc();a.context.b.some(function(a){return c.has(a.getName())})&&d.push(a)});return d}
function Pd(a,b,c){b=la(null!=b.Wc?b.Wc:b).toString();a=a.ac.get(b)||null;null!==a&&hj(a,c)}function gj(a){this.rf=a;this.Dc=B();this.$f=[];this.Ke=null;this.zf=new bj(a.a,this.$f)}gj.prototype.td=function(a){this.Dc.has(a)||this.Dc.add(a)};gj.prototype.$d=function(a){return this.Dc.delete(a)};gj.prototype.vc=function(){var a=this.rf;return{context:a.a,Xd:ih(a)}};function hj(a,b){var c=dj(a.zf,a.Ke,b);a.Ke=b;0<c.length&&a.Dc.forEach(function(a){a(c)})};function ij(a,b){var c=a.l(Wb),d=b||{},e=new Fe(c);a.fb(Rb,e);var e=null,f=!1;switch(d.storeType||0){case 1:e=new se(c);break;case 5:e=new ue(c);break;case 4:e=new Be(a,c,d.webSqlDbSize);break;case 3:e=new de(c,d.firebase);f=!0;break;default:e=new oe(a,c)}a.fb(Pb,e);var h=new Cf;a.fb(Sb,h);return e.Ba(d.onUpgrade).then(function(){var b=new Pi(a);a.fb(Tb,b);b=new Yi;a.fb(Ub,b);b=new fj;a.fb(Vb,b);return h.Ba(c)}).then(function(){if(f){var b=new Td(a);b.ub.subscribe(b.Sd.bind(b))}return(new vf(a)).Ba(c)})}
;function jj(a){this.h=a;this.o=a.l(Wb);this.ja=B(this.o.xa());this.tb=x()}m=jj.prototype;m.exec=function(){var a=this.h.l(Sb),b=this.h.l(Rb),c={};this.o.xa().forEach(function(d){var f=a.get(d.s+".#").Ua(),f=Ge(b,f).map(function(a){return a.m});c[d.getName()]=f});var d={name:this.o.name(),version:this.o.version(),tables:c},d=new gd(new y(-1,d),!0);return w([new E([d],[])])};m.K=l(0);m.Z=g("ja");m.dc=g("tb");m.W=function(){return la(this)};m.getPriority=l(0);function kj(a,b){this.h=a;this.ub=a.l(Pb);this.Na=a.l(Ub);this.zb=a.l(Vb);this.ja=B(b);this.La=new Nc(this.h,this.ja);this.tb=x();this.qc=x();this.le=x()}m=kj.prototype;m.exec=function(){this.le.resolve();return this.qc.ha};m.K=l(1);m.Z=g("ja");m.dc=g("tb");m.W=function(){return la(this)};m.getPriority=l(2);function lj(a){Sd(a.Na,a);return a.le.ha}
function mj(a,b){var c=b.vc();return c.Xd.ab().exec(a.La,c.context).then(function(a){return Zc(a[0])},function(a){this.La.Bb();var b=new hb(a.name);this.qc.reject(b);throw a;}.bind(a))}m.ma=function(){this.ub.Gb(this.K(),this.La).ma().then(function(){this.Ic();this.qc.resolve()}.bind(this),function(a){this.La.Bb();this.qc.reject(a)}.bind(this));return this.tb.ha};m.Bb=function(){this.La.Bb();this.qc.resolve();return this.tb.ha};
m.Ic=function(){var a=Rd(this.zb,this.ja);0!=a.length&&(a=new Od(this.h,a),Sd(this.Na,a))};function nj(a){this.h=a;this.Na=a.l(Ub);this.Nc=null;this.Oa=0;0==oj.size&&(oj.set(0,B([1,4])),oj.set(1,B([2])),oj.set(2,B([3,5,6])),oj.set(3,B([2,7])),oj.set(4,B([7])),oj.set(5,B([7])),oj.set(6,B([7])))}r("lf.proc.Transaction",nj);var oj=z();function pj(a,b){var c=oj.get(a.Oa)||null;if(null===c||!c.has(b))throw new C(107,a.Oa,b);a.Oa=b}
nj.prototype.exec=function(a){pj(this,4);var b=[];try{a.forEach(function(a){a.Ya();b.push(a.vc())},this)}catch(c){return pj(this,7),Za(c)}a=new Og(this.h,b);return Sd(this.Na,a).then(function(a){pj(this,7);return a.map(function(a){return Zc(a)})}.bind(this),function(a){pj(this,7);throw a;}.bind(this))};nj.prototype.exec=nj.prototype.exec;nj.prototype.pf=function(a){pj(this,1);this.Nc=new kj(this.h,a);return lj(this.Nc).then(function(){pj(this,2)}.bind(this))};nj.prototype.begin=nj.prototype.pf;
nj.prototype.of=function(a){pj(this,3);return mj(this.Nc,a).then(function(a){pj(this,2);return a}.bind(this),function(a){pj(this,7);throw a;}.bind(this))};nj.prototype.attach=nj.prototype.of;nj.prototype.ma=function(){pj(this,5);return this.Nc.ma().then(function(){pj(this,7)}.bind(this))};nj.prototype.commit=nj.prototype.ma;nj.prototype.Bb=function(){pj(this,6);return this.Nc.Bb().then(function(){pj(this,7)}.bind(this))};nj.prototype.rollback=nj.prototype.Bb;function V(a){this.h=a;this.o=a.l(Wb);this.Id=!1}r("lf.proc.Database",V);V.prototype.Ba=function(a){this.h.fb(Wb,this.o);return ij(this.h,a).then(function(){this.Id=!0;return this}.bind(this))};V.prototype.init=V.prototype.Ba;V.prototype.nb=g("o");V.prototype.getSchema=V.prototype.nb;function qj(a){if(!a.Id)throw new C(2);}V.prototype.select=function(a){qj(this);return new U(this.h,1!=arguments.length||null!=arguments[0]?Array.prototype.slice.call(arguments):[])};V.prototype.select=V.prototype.select;
V.prototype.pb=function(){qj(this);return new kh(this.h)};V.prototype.insert=V.prototype.pb;V.prototype.Jd=function(){qj(this);return new kh(this.h,!0)};V.prototype.insertOrReplace=V.prototype.Jd;V.prototype.update=function(a){qj(this);return new uh(this.h,a)};V.prototype.update=V.prototype.update;V.prototype.delete=function(){qj(this);return new jh(this.h)};V.prototype["delete"]=V.prototype.delete;V.prototype.observe=function(a,b){this.h.l(Vb).td(a,b)};V.prototype.observe=V.prototype.observe;
V.prototype.unobserve=function(a,b){this.h.l(Vb).$d(a,b)};V.prototype.unobserve=V.prototype.unobserve;V.prototype.xf=function(){qj(this);return new nj(this.h)};V.prototype.createTransaction=V.prototype.xf;V.prototype.close=function(){try{this.h.l(Pb).close()}catch(a){}this.h.clear();this.Id=!1};V.prototype.close=V.prototype.close;V.prototype.Ff=function(){var a=this.h.l(Ub),b=new jj(this.h);return Sd(a,b).then(function(a){return Zc(a[0])[0]})};V.prototype["export"]=V.prototype.Ff;function W(a,b,c,d,e,f){this.O=a;this.s=b;this.Ge=c;this.Ee=d;this.hf=e;this.Xa=f||null}r("lf.schema.BaseColumn",W);m=W.prototype;m.getName=g("s");m.j=function(){return H(this.O)+"."+this.s};m.toString=function(){return this.j()};m.I=g("O");m.K=g("hf");W.prototype.getType=W.prototype.K;W.prototype.Ta=g("Xa");W.prototype.Aa=function(){null==this.ga&&(this.ga=[],this.I().Aa().forEach(function(a){-1!=a.f.map(function(a){return a.ea.getName()}).indexOf(this.s)&&this.ga.push(a)},this));return this.ga};
W.prototype.sa=function(){if(!q(this.ca)){var a=this.Aa().filter(function(a){return 1!=a.f.length?!1:a.f[0].ea.getName()==this.getName()},this);this.ca=0<a.length?a[0]:null}return this.ca};W.prototype.xc=g("Ee");W.prototype.isNullable=W.prototype.xc;W.prototype.yc=g("Ge");W.prototype.Ka=function(a){return Zf(this,a,"eq")};W.prototype.eq=W.prototype.Ka;W.prototype.Ne=function(a){return Zf(this,a,"neq")};W.prototype.neq=W.prototype.Ne;W.prototype.Pd=function(a){return Zf(this,a,"lt")};
W.prototype.lt=W.prototype.Pd;W.prototype.Wf=function(a){return Zf(this,a,"lte")};W.prototype.lte=W.prototype.Wf;W.prototype.Hf=function(a){return Zf(this,a,"gt")};W.prototype.gt=W.prototype.Hf;W.prototype.If=function(a){return Zf(this,a,"gte")};W.prototype.gte=W.prototype.If;W.prototype.match=function(a){return Zf(this,a,"match")};W.prototype.match=W.prototype.match;W.prototype.qf=function(a,b){return Zf(this,[a,b],"between")};W.prototype.between=W.prototype.qf;
W.prototype.Jf=function(a){return Zf(this,a,"in")};W.prototype["in"]=W.prototype.Jf;W.prototype.Rf=function(){return this.Ka(null)};W.prototype.isNull=W.prototype.Rf;W.prototype.Qf=function(){return this.Ne(null)};W.prototype.isNotNull=W.prototype.Qf;W.prototype.ic=function(a){return new W(this.O,this.s,this.Ge,this.Ee,this.hf,a)};W.prototype.as=W.prototype.ic;function rj(){this.pd=z()}var sj;rj.prototype.clear=function(){this.pd.clear()};rj.prototype.clear=rj.prototype.clear;rj.prototype.fb=function(a,b){this.pd.set(a.toString(),b);return b};rj.prototype.registerService=rj.prototype.fb;rj.prototype.l=function(a){var b=this.pd.get(a.toString())||null;if(null===b)throw new C(7,a.toString());return b};rj.prototype.getService=rj.prototype.l;rj.prototype.Nd=function(a){return this.pd.has(a.toString())};rj.prototype.isRegistered=rj.prototype.Nd;function tj(a){this.o=a;this.Ve=new Sf;this.Pe=new Sf;this.se=z();this.g=new Sf;this.re=new Sf;uj(this)}function uj(a){a.o.xa().forEach(function(a){var c=a.getName();a.xb().Gd().forEach(function(d){this.Ve.set(d.rb,d);this.Pe.set(c,this.o.table(d.rb));this.g.set(d.rb,a);this.se.set(a.getName()+"."+d.Eb,d.rb);this.re.set(d.rb+"."+d.Fc,a.getName())},this)},a)}function Gc(a,b){return a.Ve.get(b)}function Rg(a,b){var c=b.get(a);return null===c?[]:c}
function Ug(a,b){var c=B();b.forEach(function(a){(a=this.se.get(a))&&c.add(a)},a);return cc(c).map(function(a){return this.o.table(a)},a)}function Vg(a,b){var c=B();b.forEach(function(a){(a=this.re.get(a))&&a.forEach(function(a){c.add(a)})},a);return cc(c).map(function(a){return this.o.table(a)},a)};function vj(a,b,c){this.fg=a;this.Zf=b;this.Gf=c}r("lf.schema.Constraint",vj);vj.prototype.bd=g("fg");vj.prototype.getPrimaryKey=vj.prototype.bd;vj.prototype.Gd=g("Gf");vj.prototype.getForeignKeys=vj.prototype.Gd;function wj(a,b){var c=a.ref.split(".");if(2!=c.length)throw new C(540,b);this.Eb=a.local;this.rb=c[0];this.Fc=c[1];this.name=b;this.action=a.action;this.timing=a.timing};function X(a){xj(a);this.Dd=kd.tc();this.s=a;this.H=z();this.ge=B();this.Oc=B();this.Cc=B();this.ua=null;this.ga=z();this.ld=!1;this.wb=[]}r("lf.schema.TableBuilder",X);function yj(a){this.name=a.name;this.eb=a.order;this.autoIncrement=a.autoIncrement}var zj=B([0,6]);function xj(a){if(!/^[A-Za-z_][A-Za-z0-9_]*$/.test(a))throw new C(502,a);}function Aj(a,b){if(b==a.s)throw new C(546,b);if(a.H.has(b)||a.ga.has(b)||a.Oc.has(b))throw new C(503,a.s+"."+b);}
function Bj(a,b){var c=!1;b.forEach(function(a){var b=this.H.get(a.name);c=c||a.autoIncrement;if(a.autoIncrement&&3!=b)throw new C(504);},a);if(c&&1<b.length)throw new C(505);}function Cj(a){if(null!==a.ua){var b=a.ga.get(a.ua).map(function(a){return a.name}),c=0;if(a.wb.some(function(a,e){c=e;return-1!=b.indexOf(a.Eb)},a))throw new C(543,a.wb[c].name);}}
function Dj(a){if(null!==a.ua){var b=function(a){return a.name},c=JSON.stringify(a.ga.get(a.ua).map(b));a.ga.forEach(function(a,e){if(e!=this.ua){var f=a.map(b);if(JSON.stringify(f)==c)throw new C(544,this.s+"."+e);}},a)}}function Ej(a){null===a.ua||a.ga.get(a.ua).forEach(function(a){if(this.Cc.has(a.name))throw new C(545,this.s+"."+a.name);},a)}X.prototype.jf=function(a,b){xj(a);Aj(this,a);this.H.set(a,b);zj.has(b)&&this.ne([a]);return this};X.prototype.addColumn=X.prototype.jf;
X.prototype.lf=function(a,b){var c=this.s;this.ua="pk"+(c[0].toUpperCase()+c.substring(1));xj(this.ua);Aj(this,this.ua);c=Fj(this,a,!0,void 0,b);Bj(this,c);1==c.length&&this.ge.add(c[0].name);this.Oc.add(this.ua);this.ga.set(this.ua,c);return this};X.prototype.addPrimaryKey=X.prototype.lf;
X.prototype.kf=function(a,b){xj(a);Aj(this,a);var c=new wj(b,this.s+"."+a);q(c.action)||(c.action=0);q(c.timing)||(c.timing=0);if(1==c.action&&1==c.timing)throw new C(506);if(!this.H.has(c.Eb))throw new C(540,a);this.wb.push(c);this.me(a,[c.Eb],!1);return this};X.prototype.addForeignKey=X.prototype.kf;X.prototype.mf=function(a,b){xj(a);Aj(this,a);var c=Fj(this,b,!0);Gj(this,a,c);1==c.length&&this.ge.add(c[0].name);this.ga.set(a,c);this.Oc.add(a);return this};X.prototype.addUnique=X.prototype.mf;
X.prototype.ne=function(a){a=Fj(this,a,!1);Hj(this,a);a.forEach(function(a){this.Cc.add(a.name)},this);return this};X.prototype.addNullable=X.prototype.ne;function Hj(a,b){Gb(a.ga).forEach(function(a){var d=B();this.ga.get(a).forEach(function(a){d.add(a.name)});var e=b.filter(function(a){return d.has(a.name)});if(1<d.size&&0<e.length)throw new C(507,a,e.join(","));},a)}X.prototype.me=function(a,b,c,d){xj(a);Aj(this,a);b=Fj(this,b,!0,d);Gj(this,a,b);c&&this.Oc.add(a);this.ga.set(a,b);return this};
X.prototype.addIndex=X.prototype.me;function Gj(a,b,c){if(1<c.length&&(a=c.filter(function(a){return this.Cc.has(a.name)},a),0<a.length))throw new C(507,b,a.join(","));}X.prototype.Ab=ba("ld");X.prototype.persistentIndex=X.prototype.Ab;X.prototype.nb=function(){Cj(this);Dj(this);Ej(this);return new (Ij(this))};X.prototype.getSchema=X.prototype.nb;function Jj(a){return a.wb}
function Fj(a,b,c,d,e){var f=b,f="string"==typeof b[0]?b.map(function(a){return new yj({name:a,order:null!=d?d:1,autoIncrement:e||!1})}):b.map(function(a){return new yj(a)});f.forEach(function(a){if(!this.H.has(a.name))throw new C(508,this.s,a.name);if(c){var b=this.H.get(a.name);if(0==b||6==b)throw new C(509,this.s,a.name);}},a);return f}
function Ij(a){function b(){function b(c){return a.ga.get(c).map(function(a){return{ea:this[a.name],eb:a.eb,autoIncrement:a.autoIncrement}},this)}var d=Gb(a.H).map(function(b){this[b]=new W(this,b,a.ge.has(b),a.Cc.has(b),a.H.get(b));return this[b]},this),e=Gb(a.ga).map(function(d){return new ag(a.s,d,a.Oc.has(d),b.call(this,d))},this);Q.call(this,a.s,d,e,a.ld);var f=null===a.ua?null:new ag(a.s,a.ua,!0,b.call(this,a.ua)),h=d.filter(function(b){return!a.Cc.has(b.getName())});this.tf=new vj(f,h,a.wb);
this.Ze=Kj(a,d,e)}t(b,Q);b.prototype.vb=function(a){return new this.Ze(nb++,a)};b.prototype.createRow=b.prototype.vb;b.prototype.Zb=function(a){var b={};this.$a().forEach(function(e){var f=e.getName();e=e.K();var h=a.value[f];if(0==e)if(e=h,null!=e&&""!=e){0!=e.length%2&&(e="0"+e);for(var h=new ArrayBuffer(e.length/2),k=new Uint8Array(h),p=0,D=0;p<e.length;p+=2)k[D++]=parseInt(e.substr(p,2),16);e=h}else e=null;else e=2==e?null!=h?new Date(h):null:h;b[f]=e},this);return new this.Ze(a.id,b)};b.prototype.deserializeRow=
b.prototype.Zb;b.prototype.xb=g("tf");b.prototype.getConstraint=b.prototype.xb;return b}
function Kj(a,b,c){function d(a,d){this.H=b;this.ga=c;y.call(this,a,d)}t(d,y);d.prototype.ve=function(){var a={};this.H.forEach(function(b){a[b.getName()]=b.xc()?null:yc[b.K()]});return a};d.prototype.ef=function(){var a={};this.H.forEach(function(b){var c=b.getName();b=b.K();var d=this.m[c];a[c]=0==b?null!=d?qb(d):null:2==b?null!=d?d.getTime():null:6==b?null!=d?d:null:d},this);return a};var e=function(a){var b=this.H.get(a.getName()),c=this.Dd.He.get(b)||null;return function(b){return c(b[a.getName()])}}.bind(a),
f=function(a){var b=a.map(function(a){return e(a.ea)});return function(a){return b.map(function(b){return b(a)})}}.bind(a),h={};c.forEach(function(a){var b=a.j();a=1==a.f.length?e(a.f[0].ea):f(a.f);h[b]=a});d.prototype.Lb=function(a){return-1!=a.indexOf("#")?this.id():h.hasOwnProperty(a)?h[a](this.m):null};return d};function Y(a,b){this.o=new Z(a,b);this.jb=z();this.rc=!1}r("lf.schema.Builder",Y);function Lj(a,b){b.wb.forEach(function(a){var d=a.rb;if(!this.jb.has(d))throw new C(536,a.name);var d=this.jb.get(d).nb(),e=a.Fc;if(!d.hasOwnProperty(e))throw new C(537,a.name);if(b.nb()[a.Eb].K()!=d[e].K())throw new C(538,a.name);if(!d[e].yc())throw new C(539,a.name);},a)}Y.prototype.sf=function(a){a.wb.forEach(function(a){Jj(this.jb.get(a.rb)).forEach(function(c){if(c.Eb==a.Fc)throw new C(534,a.name);},this)},this)};
function Mj(a){a.rc||(a.jb.forEach(function(a){Lj(this,a);a=a.nb();this.o.J.set(a.getName(),a)},a),A(a.jb).forEach(a.sf,a),Nj(a),a.jb.clear(),a.rc=!0)}function Oj(a,b,c){b.je||(b.je=!0,b.Td=!0,b.we.forEach(function(a){a=c.get(a);if(!a.je)Oj(this,a,c);else if(a.Td&&b!=a)throw new C(533);},a));b.Td=!1}function Nj(a){var b=z();a.o.J.forEach(function(a,d){b.set(d,new Pj(d))},a);a.jb.forEach(function(a,d){a.wb.forEach(function(a){b.get(a.rb).we.add(d)})});A(b).forEach(function(a){Oj(this,a,b)},a)}
function Pj(a){this.Td=this.je=!1;this.we=B();this.Lc=a}Y.prototype.nb=function(){this.rc||Mj(this);return this.o};Y.prototype.getSchema=Y.prototype.nb;Y.prototype.ye=function(){var a=new Ob("ns_"+this.o.name()),b;sj||(sj=new rj);b=sj;var c=null;b.Nd(a)?c=b.l(a):(c=new rj,b.fb(a,c));return c};Y.prototype.getGlobal=Y.prototype.ye;Y.prototype.connect=function(a){var b=this.ye();b.Nd(Wb)||b.fb(Wb,this.nb());return(new V(b)).Ba(a)};Y.prototype.connect=Y.prototype.connect;
Y.prototype.wf=function(a){if(this.jb.has(a))throw new C(503,a);if(this.rc)throw new C(535);this.jb.set(a,new X(a));return this.jb.get(a)};Y.prototype.createTable=Y.prototype.wf;Y.prototype.ee=function(a){if(this.rc)throw new C(535);this.o.ee(a);return this};Y.prototype.setPragma=Y.prototype.ee;function Z(a,b){this.s=a;this.Ub=b;this.J=z();this.Te={Af:!1}}r("lf.schema.DatabaseSchema",Z);Z.prototype.name=g("s");Z.prototype.name=Z.prototype.name;Z.prototype.version=g("Ub");Z.prototype.version=Z.prototype.version;
Z.prototype.xa=function(){return A(this.J)};Z.prototype.tables=Z.prototype.xa;Z.prototype.table=function(a){if(!this.J.has(a))throw new C(101,a);return this.J.get(a)};Z.prototype.table=Z.prototype.table;Z.prototype.info=function(){this.Ce||(this.Ce=new tj(this));return this.Ce};Z.prototype.Se=g("Te");Z.prototype.pragma=Z.prototype.Se;Z.prototype.ee=ba("Te");r("lf.schema.create",function(a,b){return new Y(a,b)});}.bind(window))()
//# sourceMappingURL=lovefield.es6.js.map
