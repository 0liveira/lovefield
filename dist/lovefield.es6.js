if(!self.window){window=self;}
(function(){'use strict';function aa(){return function(){}}function ca(a){return function(b){this[a]=b}}function g(a){return function(){return this[a]}}function l(a){return function(){return a}}var m,da=this;function n(a){return void 0!==a}function ea(){}function fa(){throw Error("unimplemented abstract method");}
function ga(a){var b=typeof a;if("object"==b)if(a){if(a instanceof Array)return"array";if(a instanceof Object)return b;var c=Object.prototype.toString.call(a);if("[object Window]"==c)return"object";if("[object Array]"==c||"number"==typeof a.length&&"undefined"!=typeof a.splice&&"undefined"!=typeof a.propertyIsEnumerable&&!a.propertyIsEnumerable("splice"))return"array";if("[object Function]"==c||"undefined"!=typeof a.call&&"undefined"!=typeof a.propertyIsEnumerable&&!a.propertyIsEnumerable("call"))return"function"}else return"null";
else if("function"==b&&"undefined"==typeof a.call)return"object";return b}function ha(a){return null!=a}function ia(a){var b=ga(a);return"array"==b||"object"==b&&"number"==typeof a.length}function ja(a){return"string"==typeof a}function ka(a){return"function"==ga(a)}function la(a){return a[ma]||(a[ma]=++na)}var ma="closure_uid_"+(1E9*Math.random()>>>0),na=0;function oa(a,b,c){return a.call.apply(a.bind,arguments)}
function pa(a,b,c){if(!a)throw Error();if(2<arguments.length){var d=Array.prototype.slice.call(arguments,2);return function(){var c=Array.prototype.slice.call(arguments);Array.prototype.unshift.apply(c,d);return a.apply(b,c)}}return function(){return a.apply(b,arguments)}}function qa(a,b,c){qa=Function.prototype.bind&&-1!=Function.prototype.bind.toString().indexOf("native code")?oa:pa;return qa.apply(null,arguments)}
function sa(a,b){var c=Array.prototype.slice.call(arguments,1);return function(){var b=c.slice();b.push.apply(b,arguments);return a.apply(this,b)}}function q(a,b){a=a.split(".");var c=da;a[0]in c||!c.execScript||c.execScript("var "+a[0]);for(var d;a.length&&(d=a.shift());)!a.length&&n(b)?c[d]=b:c=c[d]?c[d]:c[d]={}}
function r(a,b){function c(){}c.prototype=b.prototype;a.gb=b.prototype;a.prototype=new c;a.prototype.constructor=a;a.Rg=function(a,c,f){for(var d=Array(arguments.length-2),e=2;e<arguments.length;e++)d[e-2]=arguments[e];return b.prototype[c].apply(a,d)}};function ta(a){if(Error.captureStackTrace)Error.captureStackTrace(this,ta);else{var b=Error().stack;b&&(this.stack=b)}a&&(this.message=String(a))}r(ta,Error);ta.prototype.name="CustomError";var ua=String.prototype.trim?function(a){return a.trim()}:function(a){return a.replace(/^[\s\xa0]+|[\s\xa0]+$/g,"")};function va(a,b){return a<b?-1:a>b?1:0};function wa(a,b,c){this.mg=c;this.Kf=a;this.Fg=b;this.md=0;this.cd=null}wa.prototype.get=function(){var a;0<this.md?(this.md--,a=this.cd,this.cd=a.next,a.next=null):a=this.Kf();return a};wa.prototype.put=function(a){this.Fg(a);this.md<this.mg&&(this.md++,a.next=this.cd,this.cd=a)};var xa=Array.prototype.indexOf?function(a,b,c){return Array.prototype.indexOf.call(a,b,c)}:function(a,b,c){c=null==c?0:0>c?Math.max(0,a.length+c):c;if(ja(a))return ja(b)&&1==b.length?a.indexOf(b,c):-1;for(;c<a.length;c++)if(c in a&&a[c]===b)return c;return-1},ya=Array.prototype.forEach?function(a,b,c){Array.prototype.forEach.call(a,b,c)}:function(a,b,c){for(var d=a.length,e=ja(a)?a.split(""):a,f=0;f<d;f++)f in e&&b.call(c,e[f],f,a)},za=Array.prototype.map?function(a,b,c){return Array.prototype.map.call(a,
b,c)}:function(a,b,c){for(var d=a.length,e=Array(d),f=ja(a)?a.split(""):a,h=0;h<d;h++)h in f&&(e[h]=b.call(c,f[h],h,a));return e},Aa=Array.prototype.reduce?function(a,b,c,d){d&&(b=qa(b,d));return Array.prototype.reduce.call(a,b,c)}:function(a,b,c,d){var e=c;ya(a,function(c,h){e=b.call(d,e,c,h,a)});return e},Ba=Array.prototype.some?function(a,b,c){return Array.prototype.some.call(a,b,c)}:function(a,b,c){for(var d=a.length,e=ja(a)?a.split(""):a,f=0;f<d;f++)if(f in e&&b.call(c,e[f],f,a))return!0;return!1};
function Ca(a,b,c){return 2>=arguments.length?Array.prototype.slice.call(a,b):Array.prototype.slice.call(a,b,c)}function Da(a){for(var b=[],c=0;c<a;c++)b[c]=0;return b}function Ea(a){for(var b=[],c=0;c<arguments.length;c++){var d=arguments[c];if("array"==ga(d))for(var e=0;e<d.length;e+=8192)for(var f=Ea.apply(null,Ca(d,e,e+8192)),h=0;h<f.length;h++)b.push(f[h]);else b.push(d)}return b};var Fa;a:{var Ga=da.navigator;if(Ga){var Ha=Ga.userAgent;if(Ha){Fa=Ha;break a}}Fa=""}function t(a){return-1!=Fa.indexOf(a)};function Ia(){return(t("Chrome")||t("CriOS"))&&!t("Edge")};function Ja(a){da.setTimeout(function(){throw a;},0)}var Ka;
function Ma(){var a=da.MessageChannel;"undefined"===typeof a&&"undefined"!==typeof window&&window.postMessage&&window.addEventListener&&!t("Presto")&&(a=function(){var a=document.createElement("IFRAME");a.style.display="none";a.src="";document.documentElement.appendChild(a);var b=a.contentWindow,a=b.document;a.open();a.write("");a.close();var c="callImmediate"+Math.random(),d="file:"==b.location.protocol?"*":b.location.protocol+"//"+b.location.host,a=qa(function(a){if(("*"==d||a.origin==d)&&a.data==
c)this.port1.onmessage()},this);b.addEventListener("message",a,!1);this.port1={};this.port2={postMessage:function(){b.postMessage(c,d)}}});if("undefined"!==typeof a&&!t("Trident")&&!t("MSIE")){var b=new a,c={},d=c;b.port1.onmessage=function(){if(n(c.next)){c=c.next;var a=c.Ae;c.Ae=null;a()}};return function(a){d.next={Ae:a};d=d.next;b.port2.postMessage(0)}}return"undefined"!==typeof document&&"onreadystatechange"in document.createElement("SCRIPT")?function(a){var b=document.createElement("SCRIPT");
b.onreadystatechange=function(){b.onreadystatechange=null;b.parentNode.removeChild(b);b=null;a();a=null};document.documentElement.appendChild(b)}:function(a){da.setTimeout(a,0)}};function Na(){this.wd=this.nc=null}var Pa=new wa(function(){return new Oa},function(a){a.reset()},100);Na.prototype.add=function(a,b){var c=Pa.get();c.set(a,b);this.wd?this.wd.next=c:this.nc=c;this.wd=c};Na.prototype.remove=function(){var a=null;this.nc&&(a=this.nc,this.nc=this.nc.next,this.nc||(this.wd=null),a.next=null);return a};function Oa(){this.next=this.scope=this.Od=null}Oa.prototype.set=function(a,b){this.Od=a;this.scope=b;this.next=null};
Oa.prototype.reset=function(){this.next=this.scope=this.Od=null};function Qa(a,b){Ra||Sa();Ta||(Ra(),Ta=!0);Ua.add(a,b)}var Ra;function Sa(){var a=da.Promise;if(-1!=String(a).indexOf("[native code]")){var b=a.resolve(void 0);Ra=function(){b.then(Va)}}else Ra=function(){var a=Va;!ka(da.setImmediate)||da.Window&&da.Window.prototype&&!t("Edge")&&da.Window.prototype.setImmediate==da.setImmediate?(Ka||(Ka=Ma()),Ka(a)):da.setImmediate(a)}}var Ta=!1,Ua=new Na;function Va(){for(var a;a=Ua.remove();){try{a.Od.call(a.scope)}catch(b){Ja(b)}Pa.put(a)}Ta=!1};function u(a,b){this.Ra=0;this.gf=void 0;this.Tc=this.bc=this.C=null;this.bd=this.Md=!1;if(a!=ea)try{var c=this;a.call(b,function(a){Wa(c,2,a)},function(a){Wa(c,3,a)})}catch(d){Wa(this,3,d)}}function Xa(){this.next=this.context=this.hc=this.Fc=this.child=null;this.zd=!1}Xa.prototype.reset=function(){this.context=this.hc=this.Fc=this.child=null;this.zd=!1};var Ya=new wa(function(){return new Xa},function(a){a.reset()},100);function Za(a,b,c){var d=Ya.get();d.Fc=a;d.hc=b;d.context=c;return d}
function v(a){if(a instanceof u)return a;var b=new u(ea);Wa(b,2,a);return b}function $a(a){return new u(function(b,c){c(a)})}function ab(a,b,c){bb(a,b,c,null)||Qa(sa(b,a))}function cb(a){return new u(function(b,c){var d=a.length,e=[];if(d)for(var f=function(a,c){d--;e[a]=c;0==d&&b(e)},h=function(a){c(a)},k=0,p;k<a.length;k++)p=a[k],ab(p,sa(f,k),h);else b(e)})}function w(){var a,b,c=new u(function(c,e){a=c;b=e});return new db(c,a,b)}
u.prototype.then=function(a,b,c){return eb(this,ka(a)?a:null,ka(b)?b:null,c)};u.prototype.then=u.prototype.then;u.prototype.$goog_Thenable=!0;u.prototype.pe=function(a,b){return eb(this,null,a,b)};function fb(a,b){a.bc||2!=a.Ra&&3!=a.Ra||gb(a);a.Tc?a.Tc.next=b:a.bc=b;a.Tc=b}
function eb(a,b,c,d){var e=Za(null,null,null);e.child=new u(function(a,h){e.Fc=b?function(c){try{var e=b.call(d,c);a(e)}catch(K){h(K)}}:a;e.hc=c?function(b){try{var e=c.call(d,b);!n(e)&&b instanceof hb?h(b):a(e)}catch(K){h(K)}}:h});e.child.C=a;fb(a,e);return e.child}u.prototype.Mg=function(a){this.Ra=0;Wa(this,2,a)};u.prototype.Ng=function(a){this.Ra=0;Wa(this,3,a)};
function Wa(a,b,c){0==a.Ra&&(a===c&&(b=3,c=new TypeError("Promise cannot resolve to itself")),a.Ra=1,bb(c,a.Mg,a.Ng,a)||(a.gf=c,a.Ra=b,a.C=null,gb(a),3!=b||c instanceof hb||ib(a,c)))}function bb(a,b,c,d){if(a instanceof u)return fb(a,Za(b||ea,c||null,d)),!0;var e;if(a)try{e=!!a.$goog_Thenable}catch(h){e=!1}else e=!1;if(e)return a.then(b,c,d),!0;e=typeof a;if("object"==e&&null!=a||"function"==e)try{var f=a.then;if(ka(f))return jb(a,f,b,c,d),!0}catch(h){return c.call(d,h),!0}return!1}
function jb(a,b,c,d,e){function f(a){k||(k=!0,d.call(e,a))}function h(a){k||(k=!0,c.call(e,a))}var k=!1;try{b.call(a,h,f)}catch(p){f(p)}}function gb(a){a.Md||(a.Md=!0,Qa(a.Rf,a))}function kb(a){var b=null;a.bc&&(b=a.bc,a.bc=b.next,b.next=null);a.bc||(a.Tc=null);return b}
u.prototype.Rf=function(){for(var a;a=kb(this);){var b=this.Ra,c=this.gf;if(3==b&&a.hc&&!a.zd){var d;for(d=this;d&&d.bd;d=d.C)d.bd=!1}if(a.child)a.child.C=null,lb(a,b,c);else try{a.zd?a.Fc.call(a.context):lb(a,b,c)}catch(e){mb.call(null,e)}Ya.put(a)}this.Md=!1};function lb(a,b,c){2==b?a.Fc.call(a.context,c):a.hc&&a.hc.call(a.context,c)}function ib(a,b){a.bd=!0;Qa(function(){a.bd&&mb.call(null,b)})}var mb=Ja;function hb(a){ta.call(this,a)}r(hb,ta);hb.prototype.name="cancel";
function db(a,b,c){this.ha=a;this.resolve=b;this.reject=c};function nb(a,b,c,d){c=c||function(a,b){return a==b};d=d||function(b){return a[b]};for(var e=a.length,f=b.length,h=[],k=0;k<e+1;k++)h[k]=[],h[k][0]=0;for(var p=0;p<f+1;p++)h[0][p]=0;for(k=1;k<=e;k++)for(p=1;p<=f;p++)c(a[k-1],b[p-1])?h[k][p]=h[k-1][p-1]+1:h[k][p]=Math.max(h[k-1][p],h[k][p-1]);for(var K=[],k=e,p=f;0<k&&0<p;)c(a[k-1],b[p-1])?(K.unshift(d(k-1,p-1)),k--,p--):h[k-1][p]>h[k][p-1]?k--:p--;return K}function ob(a){return Aa(arguments,function(a,c){return a+c},0)}
function pb(a){return ob.apply(null,arguments)/arguments.length}function qb(a){var b=arguments.length;if(2>b)return 0;var c=pb.apply(null,arguments);return ob.apply(null,za(arguments,function(a){return Math.pow(a-c,2)}))/(b-1)}function rb(a){return Math.sqrt(qb.apply(null,arguments))};var sb="StopIteration"in da?da.StopIteration:{message:"StopIteration",stack:""};function tb(){}tb.prototype.next=function(){throw sb;};tb.prototype.te=function(){return this};function ub(a){if(a instanceof tb)return a;if("function"==typeof a.te)return a.te(!1);if(ia(a)){var b=0,c=new tb;c.next=function(){for(;;){if(b>=a.length)throw sb;if(b in a)return a[b++];b++}};return c}throw Error("Not implemented");}
function vb(a,b){if(ia(a))try{ya(a,b,void 0)}catch(c){if(c!==sb)throw c;}else{a=ub(a);try{for(;;)b.call(void 0,a.next(),void 0,a)}catch(c){if(c!==sb)throw c;}}}function wb(a){if(Ba(arguments,function(a){return!a.length})||!arguments.length)return new tb;var b=new tb,c=arguments,d=Da(c.length);b.next=function(){if(d){for(var a=za(d,function(a,b){return c[b][a]}),b=d.length-1;0<=b;b--){if(d[b]<c[b].length-1){d[b]++;break}if(0==b){d=null;break}d[b]=0}return a}throw sb;};return b};function xb(a){Ab(a);return a.a.concat()}function Ab(a){if(a.Gf!=a.a.length){for(var b=0,c=0;b<a.a.length;){var d=a.a[b];Bb(a.$,d)&&(a.a[c++]=d);b++}a.a.length=c}if(a.Gf!=a.a.length){for(var e={},c=b=0;b<a.a.length;)d=a.a[b],Bb(e,d)||(a.a[c++]=d,e[d]=1),b++;a.a.length=c}}function Bb(a,b){return Object.prototype.hasOwnProperty.call(a,b)};function Cb(){return t("iPhone")&&!t("iPod")&&!t("iPad")};function Db(a,b){var c=Eb;return Object.prototype.hasOwnProperty.call(c,a)?c[a]:c[a]=b(a)};var Fb=t("Opera"),Gb=t("Trident")||t("MSIE"),Hb=t("Edge"),Ib=t("Gecko")&&!(-1!=Fa.toLowerCase().indexOf("webkit")&&!t("Edge"))&&!(t("Trident")||t("MSIE"))&&!t("Edge"),Jb=-1!=Fa.toLowerCase().indexOf("webkit")&&!t("Edge"),Kb;
a:{var Lb="",Mb=function(){var a=Fa;if(Ib)return/rv\:([^\);]+)(\)|;)/.exec(a);if(Hb)return/Edge\/([\d\.]+)/.exec(a);if(Gb)return/\b(?:MSIE|rv)[: ]([^\);]+)(\)|;)/.exec(a);if(Jb)return/WebKit\/(\S+)/.exec(a);if(Fb)return/(?:Version)[ \/]?(\S+)/.exec(a)}();Mb&&(Lb=Mb?Mb[1]:"");if(Gb){var Nb,Ob=da.document;Nb=Ob?Ob.documentMode:void 0;if(null!=Nb&&Nb>parseFloat(Lb)){Kb=String(Nb);break a}}Kb=Lb}var Pb=Kb,Eb={};
function Qb(a){return Db(a,function(){for(var b=0,c=ua(String(Pb)).split("."),d=ua(String(a)).split("."),e=Math.max(c.length,d.length),f=0;0==b&&f<e;f++){var h=c[f]||"",k=d[f]||"";do{h=/(\d*)(\D*)(.*)/.exec(h)||["","","",""];k=/(\d*)(\D*)(.*)/.exec(k)||["","","",""];if(0==h[0].length&&0==k[0].length)break;b=va(0==h[1].length?0:parseInt(h[1],10),0==k[1].length?0:parseInt(k[1],10))||va(0==h[2].length,0==k[2].length)||va(h[2],k[2]);h=h[3];k=k[3]}while(0==b)}return 0<=b})};var Rb=Cb()||t("iPod"),Sb=t("iPad"),Tb=Ia(),Ub=t("Safari")&&!(Ia()||t("Coast")||t("Opera")||t("Edge")||t("Silk")||t("Android"))&&!(Cb()||t("iPad")||t("iPod"));/*

 Copyright 2015 The Lovefield Project Authors. All Rights Reserved.

 Licensed under the Apache License, Version 2.0 (the "License");
 you may not use this file except in compliance with the License.
 You may obtain a copy of the License at

     http://www.apache.org/licenses/LICENSE-2.0

 Unless required by applicable law or agreed to in writing, software
 distributed under the License is distributed on an "AS IS" BASIS,
 WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 See the License for the specific language governing permissions and
 limitations under the License.
*/
function Vb(){this.Gg=Ub||Sb||Rb;this.bg=!(this.Gg||Gb&&!Qb(10));!Gb||Qb(11);this.Qg=Tb||Ub}var Wb;function x(){return new window.Map}function Xb(a){var b=0,c=Array(a.size);a.forEach(function(a,e){c[b++]=e});return c}function y(a){var b=0,c=Array(a.size);a.forEach(function(a){c[b++]=a});return c};/*

 Copyright 2014 The Lovefield Project Authors. All Rights Reserved.

 Licensed under the Apache License, Version 2.0 (the "License");
 you may not use this file except in compliance with the License.
 You may obtain a copy of the License at

     http://www.apache.org/licenses/LICENSE-2.0

 Unless required by applicable law or agreed to in writing, software
 distributed under the License is distributed on an "AS IS" BASIS,
 WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 See the License for the specific language governing permissions and
 limitations under the License.
*/
function Yb(a,b){this.ra=a;this.l=b||this.Fe()}var Zb=0;m=Yb.prototype;m.id=g("ra");m.Fe=function(){return{}};m.qf=g("l");m.Ia=function(){return{id:this.ra,value:this.qf()}};m.mb=function(a){return"#"==a.substr(-1)?this.ra:null};function $b(a){return new Yb(a.id,a.value)}function ac(a){return new Yb(Zb++,a||{})}function bc(a){if(null==a)return null;a=new Uint8Array(a);for(var b="",c=0;c<a.length;++c)var d=a[c].toString(16),b=b+(2>d.length?"0"+d:d);return b};var cc={};q("lf.TransactionType",cc);cc.READ_ONLY=0;cc.READ_WRITE=1;function z(a,b,c,d,e){this.rd=a;this.fg=b;this.Pg=c;this.Mf=d;this.Df=e}q("lf.TransactionStats",z);z.prototype.Kg=g("rd");z.prototype.success=z.prototype.Kg;z.prototype.eg=g("fg");z.prototype.insertedRowCount=z.prototype.eg;z.prototype.Og=g("Pg");z.prototype.updatedRowCount=z.prototype.Og;z.prototype.Lf=g("Mf");z.prototype.deletedRowCount=z.prototype.Lf;z.prototype.Cf=g("Df");z.prototype.changedTableCount=z.prototype.Cf;function dc(a,b){this.td=a;this.Pa=b||null;this.O=w();this.rd=!1;this.ya=null}m=dc.prototype;m.G=fa;m.cc=fa;m.ka=function(){return(0==this.td?this.cc():ec(this)).then(function(a){this.rd=!0;return a}.bind(this))};function ec(a){try{fc(a.Pa)}catch(b){return $a(b)}return gc(a).then(function(a){this.Pa.ka();return a}.bind(a))}function gc(a){hc(a);ic(a);return a.cc()}
function hc(a){a.Pa.hb.forEach(function(a,c){c=this.Pa.ca().get(c);c=this.G(c.getName(),c.$a.bind(c),0);var b=y(a.wa).map(function(a){return a.id()});0<b.length&&c.remove(b).pe(this.Ne,this);a=y(a.la).map(function(a){return a[1]}).concat(y(a.va));c.put(a).pe(this.Ne,this)},a)}function ic(a){jc(a.Pa).forEach(function(a){var b=this.G(a.getName(),$b,1);b.remove([]);b.put(a.Ia())},a)}m.Ne=function(a){this.O.reject(a)};
m.X=function(){if(null===this.ya)if(this.rd)if(0==this.td)this.ya=new z(!0,0,0,0,0);else{var a=0,b=0,c=0,d=0;this.Pa.hb.forEach(function(e){d++;a+=e.va.size;c+=e.la.size;b+=e.wa.size});this.ya=new z(!0,a,c,b,d)}else this.ya=new z(!1,0,0,0,0);return this.ya};function kc(a){this.Hg=a}kc.prototype.toString=g("Hg");var lc=new kc("backstore"),mc=new kc("cache"),nc=new kc("indexstore"),oc=new kc("engine"),pc=new kc("runner"),qc=new kc("observerregistry"),A=new kc("schema");function B(a){return n(a)?new window.Set(a):new window.Set}function C(a){var b=0,c=Array(a.size);a.forEach(function(a){c[b++]=a});return c}function rc(a,b){if(b.size>a.size)return!1;var c=!0;b.forEach(function(b){c=c&&a.has(b)});return c};function sc(a,b){this.ra=a;this.l=b||{}}function tc(a){var b=B();a.forEach(function(a){b.add(a>>9)});return C(b)}sc.prototype.V=g("ra");function uc(a,b){b.forEach(function(a){this.l[a.id()]=a.Ia()},a)}function vc(a,b){b.forEach(function(a){delete this.l[a]},a)}sc.prototype.Ia=function(){return{id:this.ra,value:JSON.stringify(this.l)}};function wc(a){return new sc(a.id,JSON.parse(a.value))};function xc(a,b,c){this.Y=a;this.Gb=b;this.hf=c}m=xc.prototype;m.get=function(a){if(0==a.length)return this.Qd();var b=this.Gb;return yc(this,a).then(function(c){return a.map(function(a){var d=c.get(a>>9);return b(d.l[a])})})};function yc(a,b){var c=x(),d=w();a=tc(b).map(function(a){return new u(function(b,d){var e;try{e=this.Y.get(a)}catch(p){d(p);return}e.onerror=d;e.onsuccess=function(a){a=wc(a.target.result);c.set(a.V(),a);b()}},this)},a);cb(a).then(function(){d.resolve(c)});return d.ha}
m.Qd=function(){return new u(function(a,b){var c=[],d;try{d=this.Y.openCursor()}catch(e){b(e);return}d.onerror=b;d.onsuccess=function(){var b=d.result;if(b){var f=wc(b.value).l,h;for(h in f)c.push(this.Gb(f[h]));b.continue()}else a(c)}.bind(this)},this)};m.Rb=function(a){return new u(function(b,c){var d;try{d=a()}catch(e){c(e);return}d.onsuccess=b;d.onerror=c},this)};
m.put=function(a){if(0==a.length)return v();var b=x();a.forEach(function(a){var c=a.id()>>9,e=b.get(c)||null;null===e&&(e=this.hf(this.Y.name,c));uc(e,[a]);b.set(c,e)},this);a=y(b).map(function(a){return this.Rb(function(){return this.Y.put(a.Ia())}.bind(this))},this);return cb(a)};
m.remove=function(a){if(0==a.length)return this.Rb(function(){return this.Y.clear()}.bind(this));var b=x();a.forEach(function(a){var c=a>>9,e=b.get(c)||null;null===e&&(e=this.hf(this.Y.name,c));vc(e,[a]);b.set(c,e)},this);a=y(b).map(function(a){return this.Rb(function(){return 0==Object.keys(a.l).length?this.Y.delete(a.V()):this.Y.put(a.Ia())}.bind(this))},this);return cb(a)};function zc(a,b,c){a=a.b(mc);var d=[c<<9,(c+1<<9)-1];b=a.Sa(b,d[0],d[1]);c=new sc(c);uc(c,b);return c}
function Ac(a,b){return new sc(b)};function Bc(a){this.U=a.b(mc);this.B=a.b(nc);this.g=a.b(A)}Bc.prototype.update=function(a){a.forEach(function(a){Cc(this,a);Dc(this,a)},this)};function Dc(a,b){var c=b.getName();b.wa.forEach(function(a,b){this.U.remove(c,b)},a);b.va.forEach(function(a){this.U.set(c,a)},a);b.la.forEach(function(a){this.U.set(c,a[1])},a)}function Cc(a,b){var c=a.g.table(b.getName());Ec(b).forEach(function(a){Fc(this,c,a)},a)}
function Fc(a,b,c){var d=a.B.kc.get(b.getName())||[],e=0;d.forEach(function(a){try{Gc(a,c),e++}catch(h){throw d.slice(0,e).forEach(function(a){Gc(a,[c[1],c[0]])},this),h;}},a)}function Gc(a,b){var c=null===b[1]?void 0:b[1].mb(a.getName()),d=null===b[0]?void 0:b[0].mb(a.getName());if(!n(d)&&n(c))a.add(c,b[1].id());else if(n(d)&&n(c)){if(null===c||null===d){if(c==d)return}else if(0==a.ib().compare(d,c))return;a.add(c,b[1].id());a.remove(d,b[0].id())}else n(d)&&!n(c)&&a.remove(d,b[0].id())};var Hc={};q("lf.ConstraintAction",Hc);Hc.RESTRICT=0;Hc.CASCADE=1;var Ic={};q("lf.ConstraintTiming",Ic);Ic.IMMEDIATE=0;Ic.DEFERRABLE=1;var Jc={};q("lf.Order",Jc);Jc.DESC=0;Jc.ASC=1;var Kc={};q("lf.Type",Kc);Kc.ARRAY_BUFFER=0;Kc.BOOLEAN=1;Kc.DATE_TIME=2;Kc.INTEGER=3;Kc.NUMBER=4;Kc.STRING=5;Kc.OBJECT=6;var Lc={0:null,1:!1,2:Object.freeze(new Date(0)),3:0,4:0,5:"",6:null};q("lf.type.DEFAULT_VALUES",Lc);function D(a,b){this.code=a;this.message="http://google.github.io/lovefield/error_lookup/src/error_lookup.html?c="+a;if(1<arguments.length)for(var c=1;c<=Math.min(4,arguments.length-1);++c)this.message+="&p"+(c-1)+"="+encodeURIComponent(String(arguments[c]).slice(0,64))}r(D,Error);function Mc(){this.$=x();this.size=0}m=Mc.prototype;m.has=function(a){return this.$.has(a)};m.set=function(a,b){var c=this.$.get(a)||null;null===c&&(c=B(),this.$.set(a,c));c.has(b)||(c.add(b),this.size++);return this};m.Ub=function(a,b){var c=this.$.get(a)||null;null===c&&(c=B(),this.$.set(a,c));b.forEach(function(a){c.has(a)||(c.add(a),this.size++)},this);return this};m.Wd=function(a){a.keys().forEach(function(b){var c=a.get(b);this.Ub(b,c)},this);return this};
m.delete=function(a,b){var c=this.$.get(a)||null;if(null===c)return!1;if(b=c.delete(b))--this.size,0==c.size&&this.$.delete(a);return b};m.get=function(a){a=this.$.get(a)||null;return null===a?null:C(a)};m.clear=function(){this.$.clear();this.size=0};m.keys=function(){return Xb(this.$)};m.values=function(){var a=[];this.$.forEach(function(b){a.push.apply(a,C(b))});return a};function Nc(a){this.B=a.b(nc);this.g=a.b(A);this.U=a.b(mc);this.Yc=null}function Oc(a,b,c){var d=b.xb().sg;c.forEach(function(a){d.forEach(function(b){if(null==a.l[b.getName()])throw new D(202,b.j());},this)},a)}function Qc(a,b,c,d){b.xb().Pd.forEach(function(a){a.timing==d&&Rc(this,a,c)},a)}function Rc(a,b,c){var d=Sc(a,b);c.forEach(function(a){if(Tc(a[0],a[1],b.name)&&(a=a[1].mb(b.name),null!==a&&!d.jb(a)))throw new D(203,b.name);},a)}
function Sc(a,b){null===a.Yc&&(a.Yc=x());var c=a.Yc.get(b.name)||null;null===c&&(c=a.g.table(b.Ua)[b.Gc].Ba(),c=a.B.get(c.j()),a.Yc.set(b.name,c));return c}function Tc(a,b,c){return(null===a?null!==b:null===b)||a.mb(c)!=b.mb(c)}function Uc(a,b,c,d){b=Vc(a.g.info(),b.getName(),0);null!==b&&(b=b.filter(function(a){return a.timing==d}),0!=b.length&&Wc(a,b,c,function(a,b,c){if(b.jb(c))throw new D(203,a.name);}))}
function Xc(a,b,c){b=Vc(a.g.info(),b.getName(),1);if(null===b)return null;var d=new Mc;Wc(a,b,c,function(a,b,c){b=b.get(c);0<b.length&&d.Ub(a.Be,b)});return d}function Yc(a,b,c){var d=new Mc;Wc(a,c,b,function(a,b,c,k){b.get(c).forEach(function(b){d.set(b,{Nd:a,xg:k[1]})})});return d}function Wc(a,b,c,d){b.forEach(function(a){var b=this.B.get(a.name),e=Sc(this,a);c.forEach(function(c){if(Tc(c[0],c[1],e.getName())){var f=c[0].mb(e.getName());d(a,b,f,c)}},this)},a)}
function Zc(a,b,c,d){0!=c.length&&(c=c.map(function(a){return[null,a]}),Qc(a,b,c,d))}function $c(a,b,c,d){0!=c.length&&(Qc(a,b,c,d),Uc(a,b,c,d))}function ad(a,b,c,d){0!=c.length&&(c=c.map(function(a){return[a,null]}),Uc(a,b,c,d))}
function bd(a,b,c){var d={oe:[],kf:new Mc},e=new Mc;e.Ub(b.getName(),c.map(function(a){return a.id()}));do{var f=new Mc;e.keys().forEach(function(a){var b=this.g.table(a);a=e.get(a).map(function(a){return[this.U.get(a),null]},this);b=Xc(this,b,a);null!==b&&(d.oe.unshift.apply(d.oe,b.keys()),f.Wd(b))},a);e=f;d.kf.Wd(e)}while(0<e.size);return d};function cd(a){this.va=x();this.la=x();this.wa=x();this.w=a}m=cd.prototype;m.getName=g("w");m.add=function(a){if(this.wa.has(a.id())){var b=[this.wa.get(a.id()),a];this.la.set(a.id(),b);this.wa.delete(a.id())}else this.va.set(a.id(),a)};m.modify=function(a){var b=a[1],c=a[0].id();this.va.has(c)?this.va.set(c,b):(this.la.has(c)&&(a=[this.la.get(a[0].id())[0],b]),this.la.set(c,a))};
m.delete=function(a){if(this.va.has(a.id()))this.va.delete(a.id());else if(this.la.has(a.id())){var b=this.la.get(a.id())[0];this.la.delete(a.id());this.wa.set(a.id(),b)}else this.wa.set(a.id(),a)};m.Wd=function(a){a.va.forEach(function(a){this.add(a)},this);a.la.forEach(function(a){this.modify(a)},this);a.wa.forEach(function(a){this.delete(a)},this)};
function Ec(a){var b=[];a.va.forEach(function(a){b.push([null,a])});a.la.forEach(function(a){b.push(a)});a.wa.forEach(function(a){b.push([a,null])});return b}m.toString=function(){return"["+Xb(this.va).toString()+"], ["+Xb(this.la).toString()+"], ["+Xb(this.wa).toString()+"]"};function dd(a){var b=new cd(a.w);a.va.forEach(function(a){b.delete(a)});a.wa.forEach(function(a){b.add(a)});a.la.forEach(function(a){b.modify([a[1],a[0]])});return b}
m.hg=function(){return 0==this.va.size&&0==this.wa.size&&0==this.la.size};function ed(a,b){this.aa=x();b.forEach(function(a){this.aa.set(a.getName(),a)},this);this.g=a.b(A);this.U=a.b(mc);this.B=a.b(nc);this.za=new Nc(a);this.dd=new Bc(a);this.hb=x()}function jc(a){var b=[];Xb(a.hb).map(function(a){return this.aa.get(a)},a).forEach(function(a){a.Cb()&&(a.Ca().forEach(function(a){b.push(this.B.get(a.j()))},this),b.push(this.B.get(a.getName()+".#")))},a);return b}m=ed.prototype;m.ca=g("aa");
m.Ab=function(a,b){fd(this,a);Oc(this.za,a,b);Zc(this.za,a,b,0);for(var c=0;c<b.length;c++)gd(this,a,[null,b[c]])};function gd(a,b,c){var d=b.getName(),e=a.hb.get(d)||new cd(d);a.hb.set(d,e);try{Fc(a.dd,b,c)}catch(h){throw h;}b=c[0];var f=c[1];null===b&&null!==f?(a.U.set(d,f),e.add(f)):null!==b&&null!==f?(a.U.set(d,f),e.modify(c)):null!==b&&null===f&&(a.U.remove(d,b.id()),e.delete(b))}
m.update=function(a,b){fd(this,a);Oc(this.za,a,b);b=b.map(function(a){return[this.U.get(a.id()),a]},this);hd(this,a,b);$c(this.za,a,b,0);b.forEach(function(b){gd(this,a,b)},this)};m.Rd=function(a,b){fd(this,a);Oc(this.za,a,b);for(var c=0;c<b.length;c++){var d=b[c],e=null,f,h=this.za;f=d;var k=a.xb().od;null===k?f=null:(k=k.j(),f=f.mb(k),f=h.B.get(k).get(f),f=0==f.length?null:f[0]);null!=f?(e=this.U.get(f),d.ra=f,$c(this.za,a,[[e,d]],0)):Zc(this.za,a,[d],0);gd(this,a,[e,d])}};
m.remove=function(a,b){fd(this,a);id(this,a,b);ad(this.za,a,b,0);for(var c=0;c<b.length;c++)gd(this,a,[b[c],null])};function hd(a,b,c){b=Vc(a.g.info(),b.getName(),1);if(null!==b){var d=Yc(a.za,c,b);d.keys().forEach(function(a){d.get(a).forEach(function(b){var c=this.g.table(b.Nd.Be),d=this.U.get(a),e=c.$a(d.Ia());e.l[b.Nd.ub]=b.xg.l[b.Nd.Gc];gd(this,c,[d,e])},this)},a)}}
function id(a,b,c){if(null!==Vc(a.g.info(),b.getName(),1)){b=bd(a.za,b,c);var d=b.kf;b.oe.forEach(function(a){var b=this.g.table(a);a=d.get(a).map(function(a){return this.U.get(a)},this);ad(this.za,b,a,0);a.forEach(function(a){gd(this,b,[a,null])},this)},a)}}function fc(a){a.hb.forEach(function(a){var b=this.aa.get(a.getName());Zc(this.za,b,y(a.va),1);ad(this.za,b,y(a.wa),1);$c(this.za,b,y(a.la),1)},a)}m.ka=aa();m.Jb=function(){var a=y(this.hb).map(function(a){return dd(a)});this.dd.update(a)};
function fd(a,b){if(!a.aa.has(b.getName()))throw new D(106,b.getName());};function E(a,b,c,d){this.from=a;this.o=b;this.ea=this.from==F?!1:c;this.na=this.o==F?!1:d}var F=new (aa());E.prototype.toString=function(){return(this.ea?"(":"[")+(this.from==F?"unbound":this.from)+", "+(this.o==F?"unbound":this.o)+(this.na?")":"]")};function jd(a){if(kd(a))return[];var b=null,c=null;a.from==F||(b=new E(F,a.from,!1,!a.ea));a.o==F||(c=new E(a.o,F,!a.na,!1));return[b,c].filter(function(a){return null!==a})}E.prototype.reverse=function(){return new E(this.o,this.from,this.na,this.ea)};
function ld(a,b){var c=md(a.from,b.from,!0,a.ea,b.ea);if(0==c)return!0;var d=-1==c?a:b;a=1==c?a:b;return d.o==F||d.o>a.from||d.o==a.from&&!d.na&&!a.ea}function nd(){return new E(F,F,!1,!1)}function kd(a){return a.from==F&&a.o==F}function od(a){return a.from==a.o&&a.from!=F&&!a.ea&&!a.na}E.prototype.contains=function(a){var b=this.o==F||a<this.o||a==this.o&&!this.na;return(this.from==F||a>this.from||a==this.from&&!this.ea)&&b};
function md(a,b,c,d,e){function f(a){return c?a:1==a?-1:1}d=d||!1;e=e||!1;return a==F?b==F?(d?!e:e)?d?f(1):f(-1):0:f(-1):b==F?f(1):a<b?-1:a==b?(d?!e:e)?d?f(1):f(-1):0:1}function pd(a,b){var c=md(a.from,b.from,!0,a.ea,b.ea);0==c&&(c=md(a.o,b.o,!1,a.na,b.na));return c}function qd(a){if(0==a.length)return[];a.sort(pd);for(var b=Array(a.length+1),c=0;c<b.length;c++)b[c]=0==c?new E(F,a[c].from,!1,!0):c==b.length-1?new E(a[c-1].o,F,!0,!1):new E(a[c-1].o,a[c].from,!0,!0);return b};function rd(a){this.jc=[];n(a)&&this.add(a)}rd.prototype.toString=function(){return this.jc.map(function(a){return a.toString()}).join(",")};rd.prototype.jb=function(a){return this.jc.some(function(b){return b.contains(a)})};rd.prototype.zb=g("jc");
rd.prototype.add=function(a){if(0!=a.length)if(a=this.jc.concat(a),1==a.length)this.jc=a;else{a.sort(pd);for(var b=[],c=a[0],d=1;d<a.length;++d)if(ld(c,a[d])){var e=a[d],f=nd();if(c.from!=F&&e.from!=F){var h=md(c.from,e.from,!0);1!=h?(f.from=c.from,f.ea=0!=h?c.ea:c.ea&&e.ea):(f.from=e.from,f.ea=e.ea)}c.o!=F&&e.o!=F&&(h=md(c.o,e.o,!1),-1!=h?(f.o=c.o,f.na=0!=h?c.na:c.na&&e.na):(f.o=e.o,f.na=e.na));c=f}else b.push(c),c=a[d];b.push(c);this.jc=b}};
function sd(a,b){var c=[];a.zb().map(function(a){return b.zb().map(function(b){var c;if(ld(a,b)){c=nd();var d=md(a.from,b.from,!0),d=0==d?a.ea?a:b:-1!=d?a:b;c.from=d.from;c.ea=d.ea;a.o==F||b.o==F?b=a.o==F?b:a:(d=md(a.o,b.o,!1),b=0==d?a.na?a:b:-1==d?a:b);c.o=b.o;c.na=b.na}else c=null;return c})}).forEach(function(a){c=c.concat(a)});return new rd(c.filter(function(a){return null!==a}))};function G(a,b){this.entries=a;this.L=B(b);this.Ya=null}G.prototype.m=function(){return C(this.L)};function td(a){return a.entries.map(function(a){return a.ua.l})}function ud(a){return a.entries.map(function(a){return a.ua.id()})}function vd(a,b){return a.Ya.get(b.j())}var wd=null;function xd(){null===wd&&(wd=new G([],[]));return wd}
function yd(a){if(0==a.length)return xd();for(var b=a.reduce(function(a,b){return a+b.entries.length},0),c=Array(b),d=0,b=a.map(function(a){var b=x();a.entries.forEach(function(a){c[d++]=a;b.set(a.id,a)});return b}),e=x(),f=0;f<c.length;f++)b.every(function(a){return a.has(c[f].id)})&&e.set(c[f].id,c[f]);return new G(y(e),C(a[0].L))}function zd(a){if(0==a.length)return xd();var b=x();a.forEach(function(a){a.entries.forEach(function(a){b.set(a.id,a)})});return new G(y(b),C(a[0].L))}
function Ad(a,b){var c=1<b.length;a=a.map(function(a){return new Bd(a,c)});return new G(a,b)}function Bd(a,b){this.ua=a;this.id=Cd++;this.Td=b}var Cd=0;function H(a,b){var c=b.Ja;return null!==c&&a.ua.l.hasOwnProperty(c)?a.ua.l[c]:a.Td?a.ua.l[Dd(b.G())][b.getName()]:a.ua.l[b.getName()]}function Ed(a,b,c){var d=b.Ja;if(null!=d)a.ua.l[d]=c;else if(a.Td){var d=Dd(b.G()),e=a.ua.l[d];null==e&&(e={},a.ua.l[d]=e);e[b.getName()]=c}else a.ua.l[b.getName()]=c}
function Fd(a,b,c,d){function e(a,b){if(a.Td){a=a.ua.l;for(var c in a)f[c]=a[c]}else f[b[0]]=a.ua.l}var f={};e(a,b);e(c,d);a=new Yb(-1,f);return new Bd(a,!0)};q("lf.bind",function(a){return new Gd(a)});function Gd(a){this.fa=a}q("lf.Binder",Gd);Gd.prototype.Ba=g("fa");function Hd(){this.Te=Id();var a=Jd();this.Mb=x();this.Mb.set(1,Kd());this.Mb.set(2,Ld());this.Mb.set(4,a);this.Mb.set(3,a);this.Mb.set(5,Md());this.Mb.set(6,Nd())}var Od;function Pd(){null!=Od||(Od=new Hd);return Od}function Qd(a,b,c){a=a.Mb.get(b)||null;if(null===a)throw new D(550);c=a.get(c)||null;if(null===c)throw new D(550);return c}
function Id(){function a(a){return a}var b=x();b.set(1,function(a){return null===a?null:a?1:0});b.set(2,function(a){return null===a?null:a.getTime()});b.set(3,a);b.set(4,a);b.set(5,a);return b}function Kd(){var a=x();a.set("eq",function(a,c){return a==c});a.set("neq",function(a,c){return a!=c});return a}
function Jd(){var a=Kd();a.set("between",function(a,c){return null===a||null===c[0]||null===c[1]?!1:a>=c[0]&&a<=c[1]});a.set("gte",function(a,c){return null===a||null===c?!1:a>=c});a.set("gt",function(a,c){return null===a||null===c?!1:a>c});a.set("in",function(a,c){return-1!=c.indexOf(a)});a.set("lte",function(a,c){return null===a||null===c?!1:a<=c});a.set("lt",function(a,c){return null===a||null===c?!1:a<c});return a}
function Md(){var a=Jd();a.set("match",function(a,c){return null===a||null===c?!1:(new RegExp(c)).test(a)});return a}function Nd(){var a=x();a.set("eq",function(a,c){if(null!==c)throw new D(550);return null===a});a.set("neq",function(a,c){if(null!==c)throw new D(550);return null!==a});return a}
function Ld(){var a=x();a.set("between",function(a,c){return null===a||null===c[0]||null===c[1]?!1:a.getTime()>=c[0].getTime()&&a.getTime()<=c[1].getTime()});a.set("eq",function(a,c){return(null===a?-1:a.getTime())==(null===c?-1:c.getTime())});a.set("gte",function(a,c){return null===a||null===c?!1:a.getTime()>=c.getTime()});a.set("gt",function(a,c){return null===a||null===c?!1:a.getTime()>c.getTime()});a.set("in",function(a,c){return c.some(function(b){return b.getTime()==a.getTime()})});a.set("lte",
function(a,c){return null===a||null===c?!1:a.getTime()<=c.getTime()});a.set("lt",function(a,c){return null===a||null===c?!1:a.getTime()<c.getTime()});a.set("neq",function(a,c){return(null===a?-1:a.getTime())!=(null===c?-1:c.getTime())});return a};function I(){this.h=this.C=null}var Rd=[];I.prototype.getParent=g("C");I.prototype.bb=function(){for(var a=this;null!==a.getParent();)a=a.getParent();return a};function Sd(a){for(var b=0;null!==a.getParent();)b++,a=a.getParent();return b}function J(a){return a.h||Rd}function Td(a,b){return J(a)[b]||null}function Ud(a,b,c){b.C=a;null===a.h?a.h=[b]:a.h.splice(c,0,b)}function L(a,b){b.C=a;null===a.h?a.h=[b]:a.h.push(b)}
function Vd(a,b){var c=a.h&&a.h[b];return c?(c.C=null,a.h.splice(b,1),0==a.h.length&&(a.h=null),c):null}I.prototype.removeChild=function(a){return Vd(this,J(this).indexOf(a))};function Wd(a,b,c){Td(a,c).C=null;b.C=a;a.h[c]=b}function Xd(a,b,c){!1!==b.call(c,a)&&J(a).forEach(function(a){Xd(a,b,c)})};function Yd(){I.call(this);this.ra=Zd++}r(Yd,I);var Zd=0;m=Yd.prototype;m.eval=fa;m.Lc=fa;m.Eb=fa;m.ab=fa;m.m=fa;m.V=g("ra");function $d(a,b,c){Yd.call(this);this.I=a;this.value=b;this.D=c;this.sc=Qd(Pd(),this.I.H(),this.D);this.Ta=!1;this.ac=b}r($d,Yd);m=$d.prototype;m.Eb=function(){var a=new $d(this.I,this.value,this.D);a.ac=this.ac;a.Lc(this.Ta);var b=this.V();a.ra=b;return a};m.ab=function(a){return null!=a?(a.push(this.I),a):[this.I]};m.m=function(a){a=null!=a?a:B();a.add(this.I.G());return a};m.Lc=ca("Ta");
function ae(a){var b=!1;a.value instanceof Gd||(b="array"==ga(a.value)?!a.value.some(function(a){return a instanceof Gd}):!0);if(!b)throw new D(501);}m.eval=function(a){ae(this);if("in"==this.D)return be(this,a);var b=a.entries.filter(function(a){return this.sc(H(a,this.I),this.value)!=this.Ta},this);return new G(b,a.m())};
m.bind=function(a){if(this.ac instanceof Gd){var b=this.ac.Ba();if(a.length<=b)throw new D(510);this.value=a[b]}else"array"==ga(this.ac)&&(this.value=this.ac.map(function(b){if(b instanceof Gd){var c=b.Ba();if(a.length<=c)throw new D(510);return a[b.Ba()]}return b}))};function be(a,b){var c=B(a.value),d=function(a){return null===a?!1:c.has(a)!=this.Ta}.bind(a);a=b.entries.filter(function(a){return d(H(a,this.I))},a);return new G(a,b.m())}
m.toString=function(){return"value_pred("+this.I.j()+" "+this.D+(this.Ta?"(complement)":"")+" "+this.value+")"};m.gd=function(){ae(this);return null!==this.value&&("between"==this.D||"in"==this.D||"eq"==this.D||"gt"==this.D||"gte"==this.D||"lt"==this.D||"lte"==this.D)};
m.qe=function(){var a=null;if("between"==this.D)a=new E(ce(this,this.value[0]),ce(this,this.value[1]),!1,!1);else{if("in"==this.D)return a=this.value.map(function(a){return new E(a,a,!1,!1)}),new rd(this.Ta?qd(a):a);a=ce(this,this.value);a="eq"==this.D?new E(a,a,!1,!1):"gte"==this.D?new E(a,F,!1,!1):"gt"==this.D?new E(a,F,!0,!1):"lte"==this.D?new E(F,a,!1,!1):new E(F,a,!1,!0)}return new rd(this.Ta?jd(a):[a])};function ce(a,b){return 2==a.I.H()?b.getTime():b};function de(a){this.da=a;this.Uc=this.Fa=null}function fe(a,b){null===a.Fa&&null!=a.u&&(a.Fa=ge(a.u));return a.Fa.get(b)||null}function ge(a){var b=x();Xd(a,function(a){b.set(a.V(),a)});return b}de.prototype.ca=fa;de.prototype.clone=fa;function he(a,b){b.u&&(a.u=b.u.Eb());a.Uc=b}de.prototype.bind=function(){return this};function ie(a,b){a=a.u;null!=a&&Xd(a,function(a){a instanceof $d&&a.bind(b)})};function je(a){de.call(this,a)}r(je,de);function ke(a){var b="";a.forEach(function(c,d){b+=c.I.j()+" ";b+=1==c.order?"ASC":"DESC";d<a.length-1&&(b+=", ")});return b}je.prototype.ca=function(){return B(this.from)};je.prototype.clone=function(){var a=new je(this.da);he(a,this);this.f&&(a.f=this.f.slice());this.from&&(a.from=this.from.slice());a.W=this.W;a.K=this.K;this.M&&(a.M=this.M.slice());this.qa&&(a.qa=this.qa.slice());this.Qb&&(a.Qb=this.Qb);this.Wb&&(a.Wb=this.Wb);a.eb=this.eb;return a};
je.prototype.bind=function(a){je.gb.bind.call(this,a);null!=this.Qb&&(this.W=a[this.Qb.Ba()]);null!=this.Wb&&(this.K=a[this.Wb.Ba()]);ie(this,a);return this};function le(a,b){this.Ga=a;this.aa=b}le.prototype.bb=g("Ga");le.prototype.ca=g("aa");function me(a){var b=B();a.forEach(function(a){a.ca().forEach(b.add.bind(b))});return b};function ne(a,b){this.global=a;this.Na=a.b(lc);this.pd=b.map(function(a){return a.context});this.cf=b.map(function(a){return a.de});this.Hd=me(this.cf);this.re=oe(this);this.Db=w()}function oe(a){return a.pd.some(function(a){return!(a instanceof je)})?1:0}m=ne.prototype;
m.exec=function(){function a(){var f=d.shift();if(f){var h=e[c.length];return f.bb().exec(b,h).then(function(b){c.push(b[0]);return a()})}return v()}var b=0==this.re?void 0:new ed(this.global,this.Hd),c=[],d=this.cf.slice(),e=this.pd;return a().then(function(){this.ja=this.Na.Fb(this.re,C(this.Hd),b);return this.ja.ka()}.bind(this)).then(function(){this.ae(c);return c}.bind(this),function(a){null!=b&&b.Jb();throw a;})};m.H=g("re");m.ca=g("Hd");m.V=function(){return la(this)};m.getPriority=fa;
m.ae=aa();m.X=function(){var a=null;null!=this.ja&&(a=this.ja.X());return null===a?new z(!1,0,0,0,0):a};function pe(a,b){ne.call(this,a,b);this.Ib=a.b(qc)}r(pe,ne);pe.prototype.getPriority=l(0);pe.prototype.ae=function(a){this.pd.forEach(function(b,c){qe(this.Ib,b,a[c])},this)};function re(a,b){this.c=a;this.Ib=a.b(qc);this.Ha=a.b(pc);this.dd=new Bc(a);this.hb=b;var c=a.b(A);a=this.hb.map(function(a){return c.table(a.getName())});this.aa=B(a);this.Db=w()}m=re.prototype;m.exec=function(){this.dd.update(this.hb);this.Jc();return v()};m.H=l(1);m.ca=g("aa");m.V=function(){return la(this)};m.getPriority=l(1);m.Jc=function(){var a=se(this.Ib,this.aa);0!=a.length&&(a=new pe(this.c,a),te(this.Ha,a))};function ue(a){this.c=a;this.Na=a.b(lc);this.Ha=a.b(pc)}ue.prototype.Zd=function(a){a=new re(this.c,a);te(this.Ha,a)};function M(a,b){this.Yb=a;this.i=b;this.Xa=x()}q("lf.backstore.FirebaseRawBackStore",M);M.prototype.$c=g("i");M.prototype.ad=function(){throw new D(351);};function ve(a,b){var c=w(),d=a;b.length&&(d=a.child(b));d.once("value",function(a){c.resolve(a.val())},function(a){c.reject(a)});return c.ha}function we(a,b,c){function d(a){a?e.reject(a):e.resolve()}c=c||!1;var e=w();c?a.set(b,d):a.update(b,d);return e.ha}
M.prototype.Da=function(a){return ve(this.i,"@rev/R").then(function(a){this.Qa=a;return ve(this.i,"@table")}.bind(this)).then(function(b){var c=0,d;for(d in b)this.Xa.set(d,b[d]),b[d]>c&&(c=b[d]);a.oa().forEach(function(a){this.Xa.has(a.getName())||(b[a.getName()]=++c)},this);d=this.i.child("@table");return we(d,b)}.bind(this))};
function xe(a,b,c){var d=a.Xa.get(b);return null!=d?function(){var a={},b=w();this.i.orderByChild("T").equalTo(d).once("value",function(d){d.forEach(function(b){var d=c(b.val());a[parseInt(b.key(),10)]=d});b.resolve(a)});return b.ha}.call(a).then(function(a){a["@rev"]={R:++this.Qa};return we(this.i,a)}.bind(a)):v()}M.prototype.qc=function(a){return xe(this,a,l(null)).then(function(){this.Xa.delete(a);return we(this.i.child("@table/"+a),null,!0)}.bind(this))};M.prototype.dropTable=M.prototype.qc;
M.prototype.oc=function(a,b,c){return xe(this,a,function(a){var d=a.P;d[b]=c;return{R:this.Qa+1,T:a.T,P:d}}.bind(this))};M.prototype.addTableColumn=M.prototype.oc;M.prototype.rc=function(a,b){return xe(this,a,function(a){var c=a.P;delete c[b];return{R:this.Qa+1,T:a.T,P:c}}.bind(this))};M.prototype.dropTableColumn=M.prototype.rc;M.prototype.Ic=function(a,b,c){return xe(this,a,function(a){var d=a.P;d[c]=d[b];delete d[b];return{R:this.Qa+1,T:a.T,P:d}}.bind(this))};M.prototype.renameTableColumn=M.prototype.Ic;
M.prototype.kb=function(){throw new D(351);};M.prototype.createRow=M.prototype.kb;M.prototype.zc=g("Yb");M.prototype.getVersion=M.prototype.zc;M.prototype.dc=function(a){var b=w();a=this.Xa.get(a);this.i.orderByChild("T").equalTo(a).once("value",function(a){var c=[];a.forEach(function(a){c.push(a.val().P)});b.resolve(c)});return b.ha};M.prototype.dump=function(){var a={},b=Xb(this.Xa).map(function(b){return this.dc(b).then(function(c){a[b]=c})}.bind(this));return cb(b).then(function(){return a})};
M.prototype.dump=M.prototype.dump;function ye(a,b,c){dc.call(this,b,c);this.i=a}r(ye,dc);ye.prototype.G=function(a){return this.i.xc(a)};
ye.prototype.cc=function(){if(0==this.td)return this.O.resolve(),this.O.ha;var a=this.Pa.hb;if(0==a.size)this.O.resolve();else{var b=this.i.Qa+1;this.i.Qa=b;var c={"@rev":{R:b}};a.forEach(function(a,e){var d=this.i.Xa.get(e);a.va.forEach(function(a,e){c[e]={R:b,T:d,P:a.l}});a.la.forEach(function(a,e){c[e]={R:b,T:d,P:a[1].l}});a.wa.forEach(function(a,b){c[b]=null})},this);this.i.i.update(c,function(c){null===c?this.O.resolve():(this.i.Qa=b-1,c=y(a).map(function(a){return ze(this.i,a.getName())},this),
cb(c).then(this.O.reject.bind(this.O),this.O.reject.bind(this.O)))}.bind(this))}return this.O.ha};function Ae(){this.Aa=x()}function Be(a,b){if(0==b.length)return y(a.Aa);var c=[];b.forEach(function(a){a=this.Aa.get(a)||null;null===a||c.push(a)},a);return c}Ae.prototype.getData=g("Aa");Ae.prototype.get=function(a){return v(Be(this,a))};function Ce(a,b){b.forEach(function(a){this.Aa.set(a.id(),a)},a)}Ae.prototype.put=function(a){Ce(this,a);return v()};function De(a,b){0==b.length||b.length==a.Aa.size?a.Aa.clear():b.forEach(function(a){this.Aa.delete(a)},a)}
Ae.prototype.remove=function(a){De(this,a);return v()};function Ee(a){return 0==a.Aa.size?0:Xb(a.Aa).reduce(function(a,c){return a>c?a:c},0)};function Fe(a,b){this.g=a;this.xf=b;this.Hc=x();this.Qa=-1;this.L=x();this.Xa=x();this.Ed=null}m=Fe.prototype;
m.Da=function(a){this.i=this.xf.child(this.g.name());var b=a||function(){return v()};return ve(this.i,"@db/version").then(function(a){return null===a?we(this.i,Ge(this),!0).then(function(){var a=new M(0,this.i);return b(a)}.bind(this)).then(function(){return this.Da()}.bind(this)):a==this.g.version()?ve(this.i,"@rev/R").then(function(a){this.Qa=a;return ve(this.i,"@table")}.bind(this)).then(function(a){for(var b in a)this.Xa.set(b,a[b]);a=this.g.oa().map(function(a){return ze(this,a.getName())},this);
return cb(a)}.bind(this)).then(function(){He(this);Ie(this);return v()}.bind(this)):this.be(a,b).then(function(){return this.Da()}.bind(this))}.bind(this))};m.be=function(a,b){var c=new M(a,this.i);return c.Da(this.g).then(function(){return v()}.bind(this)).then(function(){return b(c)}).then(function(){var a=this.i.child("@db");return we(a,{version:this.g.version()},!0)}.bind(this))};
function Ie(a){a.i.off();a.i.on("child_removed",a.ug.bind(a));a.Fd&&(a.Fd.off(),a.Hc.clear());a.Fd=a.i.orderByChild("R").startAt(a.Qa+1);a.Fd.on("value",a.Zd.bind(a))}function He(a){Zb=y(a.L).map(function(a){return Ee(a)}).reduce(function(a,c){return a>c?a:c},0)+1}m.ug=function(a){var b=a.val(),c=this.Hc.get(b.T)||null;null===c&&(c=B(),this.Hc.set(b.T,c));c.add(parseInt(a.key(),10))};
m.Zd=function(a){var b=a.child("@rev/R").val();null!=b&&b!=this.Qa&&(this.Qa=b,a=Je(this,a),a.forEach(function(a){var b=this.L.get(a.getName()),c=Xb(a.wa);0<c.length&&De(b,c);var f=y(a.va);a.la.forEach(function(a){f.push(a[1])});Ce(b,f)},this),0<a.length&&this.Dc(a),Ie(this))};
function Je(a,b){var c=B(),d=x();a.Xa.forEach(function(a,b){var e=this.L.get(b),f=new cd(b);this.Hc.has(a)&&(b=C(this.Hc.get(a)),b.forEach(function(a){c.add(a)}),Be(e,b).forEach(function(a){f.delete(a)}));d.set(a,f)}.bind(a));b.forEach(function(a){if("@rev"!=a.key()){var b=parseInt(a.key(),10);if(!c.has(b)){var e=a.val();a=d.get(e.T);var k=this.L.get(a.getName()),e=this.g.table(a.getName()).$a({id:b,value:e.P});k.getData().has(b)?a.modify([Be(k,[b])[0],e]):a.add(e)}}}.bind(a));return y(d).filter(function(a){return!a.hg()})}
function ze(a,b){var c=w(),d=a.Xa.get(b),e=a.g.table(b);a.i.orderByChild("T").equalTo(d).once("value",function(a){var d=new Ae,f=[];a.forEach(function(a){f.push(e.$a({id:parseInt(a.key(),10),value:a.val().P}))});Ce(d,f);this.L.set(b,d);c.resolve()}.bind(a));return c.ha}function Ge(a){var b={};b["@db"]={version:a.g.version()};b["@rev"]={R:1};a.Qa=1;b["@table"]={};a.g.oa().forEach(function(a,d){a=a.getName();b["@table"][a]=d;this.L.set(a,new Ae);this.Xa.set(a,d)},a);return b}
m.Fb=function(a,b,c){return new ye(this,a,c)};m.xc=function(a){var b=this.L.get(a)||null;if(null!==b)return b;throw new D(101,a);};m.close=aa();m.subscribe=ca("Ed");m.Dc=function(a){null!=this.Ed&&this.Ed(a)};function N(a,b,c,d){this.i=b;this.ja=c;this.Yb=a;this.Sc=d}q("lf.backstore.IndexedDBRawBackStore",N);N.prototype.$c=g("i");N.prototype.getRawDBInstance=N.prototype.$c;N.prototype.ad=g("ja");N.prototype.getRawTransaction=N.prototype.ad;N.prototype.qc=function(a){return new u(function(b,c){try{this.i.deleteObjectStore(a)}catch(d){c(d);return}b()},this)};N.prototype.dropTable=N.prototype.qc;
function Ke(a,b,c,d){return new u(function(a,f){var e;try{var k=this.ja.objectStore(b);e=k.openCursor()}catch(p){f(p);return}e.onsuccess=function(){var b=e.result;b?(c(b),b.continue()):(d(k),a())};e.onerror=f},a)}function Le(a){return a instanceof ArrayBuffer?bc(a):a instanceof Date?a.getTime():a}
function Me(a,b,c){function d(a){var b=wc(a.value),d=b.l,e;for(e in d){var f=$b(d[e]);c(f);d[e]=f.Ia()}a.update(b.Ia())}function e(a){var b=$b(a.value);c(b);a.update(b.Ia())}return Ke(a,b,a.Sc?d:e,aa())}N.prototype.oc=function(a,b,c){var d=Le(c);return Me(this,a,function(a){a.l[b]=d})};N.prototype.addTableColumn=N.prototype.oc;N.prototype.rc=function(a,b){return Me(this,a,function(a){delete a.l[b]})};N.prototype.dropTableColumn=N.prototype.rc;
N.prototype.Ic=function(a,b,c){return Me(this,a,function(a){a.l[c]=a.l[b];delete a.l[b]})};N.prototype.renameTableColumn=N.prototype.Ic;function Ne(a,b){var c=[];return new u(function(a,e){var d;try{d=this.ja.objectStore(b).openCursor()}catch(h){e(h);return}d.onsuccess=function(){var b=d.result;if(b){if(this.Sc){var e=wc(b.value).l,f;for(f in e)c.push(e[f])}else c.push(b.value);b.continue()}else a(c)}.bind(this);d.onerror=e},a)}N.prototype.kb=function(a){var b={},c;for(c in a)b[c]=Le(a[c]);return ac(b)};
N.prototype.createRow=N.prototype.kb;N.prototype.zc=g("Yb");N.prototype.getVersion=N.prototype.zc;N.prototype.dump=function(){for(var a=this.i.objectStoreNames,b=[],c=0;c<a.length;++c){var d=a.item(c);b.push(this.dc(d))}return cb(b).then(function(b){var c={};b.forEach(function(b,d){c[a.item(d)]=b});return c})};N.prototype.dump=N.prototype.dump;N.prototype.dc=function(a){return Ne(this,a).then(function(a){return a.map(function(a){return a.value})})};function Oe(a,b){this.Y=a;this.Gb=b}Oe.prototype.get=function(a){if(0==a.length)return null!=this.Y.getAll?Pe(this):Qe(this);a=a.map(function(a){return new u(function(b,d){var c;try{c=this.Y.get(a)}catch(f){d(f);return}c.onerror=d;c.onsuccess=function(a){b(this.Gb(a.target.result))}.bind(this)},this)},this);return cb(a)};
function Qe(a){return new u(function(a,c){var b=[],e;try{e=this.Y.openCursor()}catch(f){c(f);return}e.onerror=c;e.onsuccess=function(){var c=e.result;c?(b.push(this.Gb(c.value)),c.continue()):a(b)}.bind(this)},a)}function Pe(a){return new u(function(a,c){var b;try{b=this.Y.getAll()}catch(e){c(e);return}b.onerror=c;b.onsuccess=function(){var c=b.result.map(function(a){return this.Gb(a)},this);a(c)}.bind(this)},a)}
Oe.prototype.Rb=function(a){return new u(function(b,c){var d;try{d=a()}catch(e){c(e);return}d.onsuccess=b;d.onerror=c},this)};Oe.prototype.put=function(a){if(0==a.length)return v();a=a.map(function(a){return this.Rb(function(){return this.Y.put(a.Ia())}.bind(this))},this);return cb(a)};
Oe.prototype.remove=function(a){return new u(function(b,c){var d=this.Y.count();d.onsuccess=function(d){if(0==a.length||d.target.result==a.length)return this.Rb(function(){return this.Y.clear()}.bind(this)).then(b,c);d=a.map(function(a){return this.Rb(function(){return this.Y.delete(a)}.bind(this))},this);cb(d).then(b,c)}.bind(this);d.onerror=c},this)};function Re(a,b,c,d,e){dc.call(this,c,e);this.c=a;this.ja=b;this.Sc=d;this.ja.oncomplete=this.O.resolve.bind(this.O);this.ja.onabort=this.O.reject.bind(this.O)}r(Re,dc);Re.prototype.G=function(a,b,c){return this.Sc?(c=null!=c?c:0,a=this.ja.objectStore(a),new xc(a,b,0==c?sa(zc,this.c):Ac)):new Oe(this.ja.objectStore(a),b)};Re.prototype.cc=function(){return this.O.ha};function Se(a,b){this.c=a;this.g=b;this.Bd=b.ee.Of||!1}m=Se.prototype;
m.Da=function(a){var b=window.indexedDB||window.mozIndexedDB||window.webkitIndexedDB||window.msIndexedDB;if(null==b)throw new D(352);var c=a||function(){return v()};return new u(function(a,e){var d;try{d=b.open(this.g.name(),this.g.version())}catch(h){e(h);return}d.onerror=function(a){a=a.target.error;e(new D(361,a.name,a.message))};d.onupgradeneeded=function(a){Te(this,c,a).then(aa(),e)}.bind(this);d.onsuccess=function(b){this.i=b.target.result;this.ke().then(function(b){Zb=Math.max(Zb,b+1);a(this.i)}.bind(this))}.bind(this)},
this)};function Te(a,b,c){var d=c.target.result;c=new N(c.oldVersion,d,c.target.transaction,a.Bd);Ue(d);a.g.oa().forEach(sa(a.Hf,d),a);return b(c)}function Ue(a){for(var b=[],c=0;c<a.objectStoreNames.length;++c){var d=a.objectStoreNames.item(c);-1!=d.indexOf(".")&&b.push(d)}b.forEach(function(b){try{a.deleteObjectStore(b)}catch(f){}})}
m.Hf=function(a,b){a.objectStoreNames.contains(b.getName())||a.createObjectStore(b.getName(),{keyPath:"id"});b.Cb()&&(b.Ca().forEach(function(b){Ve(a,b.j())},this),Ve(a,We(b)))};function Ve(a,b){a.objectStoreNames.contains(b)||a.createObjectStore(b,{keyPath:"id"})}m.Fb=function(a,b,c){b=this.i.transaction(Xe(b),0==a?"readonly":"readwrite");return new Re(this.c,b,a,this.Bd,c)};
function Xe(a){var b=B();a.forEach(function(a){b.add(a.getName());a.Cb()&&(a.Ca().forEach(function(a){b.add(a.j())}),b.add(We(a)))});return C(b)}
m.ke=function(a){function b(){if(0==d.length)return v();var a=d.shift();return c(a).then(b)}function c(b){return new u(function(c,d){var k;try{k=(a||e.transaction([b])).objectStore(b).openCursor(null,"prev")}catch(ba){d(ba);return}k.onsuccess=function(a){(a=a.target.result)&&(f=Math.max(f,h(a)));c(f)};k.onerror=function(){c(f)}})}var d=this.g.oa().map(function(a){return a.getName()}),e=this.i,f=0,h=function(a){return this.Bd?(a=wc(a.value),Object.keys(a.l).reduce(function(a,b){return Math.max(a,b)},
0)):a.key}.bind(this);return new u(function(a){b().then(function(){a(f)})})};m.close=function(){this.i.close()};m.xc=function(){throw new D(511);};m.subscribe=aa();m.Dc=aa();function Ye(a,b,c){dc.call(this,b,c);this.Y=a;0==b&&this.O.resolve()}r(Ye,dc);Ye.prototype.G=function(a){return this.Y.xc(a)};Ye.prototype.cc=function(){this.O.resolve();return this.O.ha};function Ze(a){this.g=a;this.L=x()}m=Ze.prototype;m.Da=function(){this.g.oa().forEach(this.cg,this);return v()};m.xc=function(a){var b=this.L.get(a)||null;if(null===b)throw new D(101,a);return b};m.Fb=function(a,b,c){return new Ye(this,a,c)};function $e(a,b){if(!a.L.has(b)){var c=new Ae;a.L.set(b,c)}}m.cg=function(a){$e(this,a.getName());a.Cb()&&(a.Ca().forEach(function(a){$e(this,a.j())},this),$e(this,We(a)))};m.close=aa();m.subscribe=aa();m.Dc=aa();function af(a){Ze.call(this,a);this.ld=null}r(af,Ze);af.prototype.subscribe=function(a){null===this.ld&&(this.ld=a)};af.prototype.Dc=function(a){null===this.ld||this.ld(a)};function bf(a,b,c){this.ja=a;this.w='"'+b+'"';this.Gb=c}bf.prototype.get=function(a){var b=this.Gb;return cf(this.ja,"SELECT id, value FROM "+this.w+" "+(0==a.length?"":"WHERE id IN ("+a.join(",")+")"),[],function(a){for(var c=a.rows.length,e=Array(c),f=0;f<c;++f)e[f]=b({id:a.rows.item(f).id,value:JSON.parse(a.rows.item(f).value)});return e})};
bf.prototype.put=function(a){if(0==a.length)return v();var b="INSERT OR REPLACE INTO "+this.w+"(id, value) VALUES (?, ?)";a.forEach(function(a){cf(this.ja,b,[a.id(),JSON.stringify(a.l)])},this);return v()};bf.prototype.remove=function(a){cf(this.ja,"DELETE FROM "+this.w+" "+(0==a.length?"":"WHERE id IN ("+a.join(",")+")"),[]);return v()};function df(a,b,c){dc.call(this,b,c);this.i=a;this.L=x();this.Id=[]}r(df,dc);function ef(a){return a.replace(".","__d__").replace("#","__s__")}df.prototype.G=function(a,b){var c=this.L.get(a)||null;null===c&&(c=new bf(this,ef(a),b),this.L.set(a,c));return c};function cf(a,b,c,d){var e=w();a.Id.push({Jg:b,yg:c,transform:d,O:e});return e.ha}
df.prototype.cc=function(){var a=null,b=this.O.reject.bind(this.O),c=function(a,b){this.O.reject(b)}.bind(this),d=[],e=function(b,h){if(null!==a){var f=h;null!=a.transform&&null!=h&&(f=a.transform(h));d.push(f);a.O.resolve(f)}0<this.Id.length?(a=h=this.Id.shift(),b.executeSql(h.Jg,h.yg,e,c)):this.O.resolve(d)}.bind(this);0==this.td?this.i.readTransaction(e,b):this.i.transaction(e,b);return this.O.ha};function O(a,b,c){this.i=c;this.c=a;this.Yb=b}q("lf.backstore.WebSqlRawBackStore",O);O.prototype.$c=g("i");O.prototype.getRawDBInstance=O.prototype.$c;O.prototype.ad=function(){throw new D(356);};O.prototype.getRawTransaction=O.prototype.ad;function ff(a){return new df(a.i,1,new ed(a.c,B()))}O.prototype.qc=function(a){var b=ff(this);cf(b,"DROP TABLE "+a,[]);return b.ka()};O.prototype.dropTable=O.prototype.qc;
O.prototype.dc=function(a){var b=ff(this);cf(b,"SELECT id, value FROM "+a,[]);return b.ka().then(function(a){for(var b=a[0].rows.length,c=Array(b),f=0;f<b;++f)c[f]={id:a[0].rows.item(f).id,value:JSON.parse(a[0].rows.item(f).value)};return v(c)})};function gf(a,b,c){var d=ff(a),e="UPDATE "+b+" SET value=? WHERE id=?";return a.dc(b).then(function(a){a.forEach(function(a){a=c(a);cf(d,e,[JSON.stringify(a.value),a.id])});return d.ka()})}
O.prototype.oc=function(a,b,c){var d=Le(c);return gf(this,a,function(a){a.value[b]=d;return a})};O.prototype.addTableColumn=O.prototype.oc;O.prototype.rc=function(a,b){return gf(this,a,function(a){delete a.value[b];return a})};O.prototype.dropTableColumn=O.prototype.rc;O.prototype.Ic=function(a,b,c){return gf(this,a,function(a){a.value[c]=a.value[b];delete a.value[b];return a})};O.prototype.renameTableColumn=O.prototype.Ic;O.prototype.kb=function(a){var b={},c;for(c in a)b[c]=Le(a[c]);return ac(b)};
O.prototype.createRow=O.prototype.kb;O.prototype.zc=g("Yb");O.prototype.getVersion=O.prototype.zc;function hf(a){cf(a,'SELECT tbl_name FROM sqlite_master WHERE type="table"',[],function(a){for(var b=Array(a.rows.length),d=0;d<b.length;++d)b[d]=a.rows.item(d).tbl_name;return b})}
O.prototype.dump=function(){var a=w(),b=ff(this);hf(b);var c={};b.ka().then(function(b){b=b[0].filter(function(a){return"__lf_ver"!=a&&"__WebKitDatabaseInfoTable__"!=a}).map(function(a){return this.dc(a).then(function(b){c[a]=b})},this);cb(b).then(function(){a.resolve(c)})}.bind(this));return a.ha};O.prototype.dump=O.prototype.dump;function jf(a,b,c){this.c=a;this.g=b;this.Ig=c||1}m=jf.prototype;m.Da=function(a){if(null==window.openDatabase)throw new D(353);var b=a||function(){return v()};return new u(function(a,d){var c=window.openDatabase(this.g.name(),"",this.g.name(),this.Ig);if(null!=c)this.i=c,kf(this,b).then(function(){this.ke().then(a,d)}.bind(this),function(a){if(a instanceof D)throw a;throw new D(354,a.message);});else throw new D(354);},this)};
function kf(a,b){var c=w(),d=new df(a.i,1,new ed(a.c,B()));cf(d,"CREATE TABLE IF NOT EXISTS __lf_ver(id INTEGER PRIMARY KEY, v INTEGER)",[]);cf(d,"SELECT v FROM __lf_ver WHERE id = 0",[]);d.ka().then(function(a){var d=0;a[1].rows.length&&(d=a[1].rows.item(0).v);d<this.g.version()?this.be(b,d).then(c.resolve.bind(c)):d>this.g.version()?c.reject(new D(108)):c.resolve()}.bind(a),c.reject.bind(c));return c.ha}m.Fb=function(a,b,c){if(null!=this.i)return new df(this.i,a,c);throw new D(2);};m.close=aa();
m.xc=function(){throw new D(512);};m.subscribe=function(){throw new D(355);};m.Dc=function(){throw new D(355);};m.be=function(a,b){return mf(this).then(function(){return a(new O(this.c,b,this.i))}.bind(this))};
function mf(a){var b=a.g.oa(),c=new df(a.i,1,new ed(a.c,B())),d=new df(a.i,1,new ed(a.c,B()));cf(c,"INSERT OR REPLACE INTO __lf_ver VALUES (0, ?)",[a.g.version()]);hf(c);return c.ka().then(function(a){var c=a[1];c.filter(function(a){return-1!=a.indexOf("__d__")}).forEach(function(a){cf(d,"DROP TABLE "+('"'+a+'"'),[])});var e=[],k=[],p=[];b.map(function(a){-1==c.indexOf(a.getName())&&e.push(a.getName());a.Cb&&(a.Ca().forEach(function(a){a=ef(a.j());e.push(a);k.push(a)}),a=ef(We(a)),e.push(a),p.push(a))});
e.forEach(function(a){cf(d,"CREATE TABLE "+('"'+a+'"')+"(id INTEGER PRIMARY KEY, value TEXT)",[])});return d.ka()})}m.ke=function(){var a=0,b=w(),c=function(b){var c=new df(this.i,0);cf(c,"SELECT MAX(id) FROM "+('"'+b+'"'),[]);return c.ka().then(function(b){b=b[0].rows.item(0)["MAX(id)"];a=Math.max(b,a)})}.bind(this),d=this.g.oa().map(function(a){return c(a.getName())});cb(d).then(function(){Zb=Math.max(Zb,a+1);b.resolve()},function(a){b.reject(a)});return b.ha};function nf(a){this.$=x();this.Xb=x();a.oa().forEach(function(a){this.Xb.set(a.getName(),B())},this)}m=nf.prototype;m.set=function(a,b){this.$.set(b.id(),b);this.Xb.get(a).add(b.id())};m.Ub=function(a,b){var c=this.Xb.get(a);b.forEach(function(a){this.$.set(a.id(),a);c.add(a.id())},this)};m.get=function(a){return this.$.get(a)||null};function of(a,b){return b.map(function(a){return this.get(a)},a)}
m.Sa=function(a,b,c){var d=[],e=Math.min(b,c),f=Math.max(b,c);a=this.Xb.get(a);if(a.size<f-e)a.forEach(function(a){a>=e&&a<=f&&(a=this.$.get(a),d.push(a))},this);else for(b=e;b<=f;++b)a.has(b)&&(c=this.$.get(b),d.push(c));return d};m.remove=function(a,b){this.$.delete(b);this.Xb.get(a).delete(b)};m.Sg=function(a){return null!=a?this.Xb.get(a).size:this.$.size};m.clear=function(){this.$.clear();this.Xb.clear()};function pf(a,b,c){var d=0,e=a.length;for(c=c||qf;d<e;){var f=d+e>>1;0>c(a[f],b)?d=f+1:e=f}return d==e&&a[d]==b?d:~d}function qf(a,b){return a-b}function rf(a,b,c){c=pf(a,b,c);return 0>c?(a.splice(-(c+1),0,b),!0):!1};function sf(a,b,c,d){a=b?a.reverse():a;if(null==c&&null==d)return a;c=Math.min(n(c)?c:a.length,a.length);if(0==c)return[];d=Math.min(d||0,a.length);return a.slice(d,d+c)};function tf(){this.ia=0;this.Cc=null}tf.prototype.add=function(a,b){this.ia+=b;this.Cc=null===this.Cc?a:a>this.Cc?a:this.Cc};tf.prototype.remove=function(a,b){this.ia-=b};tf.prototype.clear=function(){this.ia=0};function uf(a,b){a.clear();b.forEach(function(a){this.ia+=a.ia},a)};function vf(a,b,c,d){this.w=a;this.Z=b;this.sf=c;this.ya=new tf;if(d){a=511;a*=a*a;if(d.length>=a)throw new D(6,a);d=wf(this,d);this.ta=d=xf(d)}else this.clear()}var yf=[];m=vf.prototype;m.getName=g("w");m.toString=function(){return this.ta.toString()};m.add=function(a,b){this.ta=this.ta.Ab(a,b)};m.set=function(a,b){this.ta=this.ta.Ab(a,b,!0)};m.remove=function(a,b){this.ta=this.ta.remove(a,b)};m.get=function(a){return this.ta.get(a)};
m.Xc=function(a){if(null==a)return this.X().ia;if(a instanceof E){if(kd(a))return this.X().ia;if(od(a))return this.get(a.from).length}return this.Sa([a]).length};m.X=g("ya");m.Qd=function(a,b,c,d){c=Array(a);this.ta.fill({offset:b?this.ya.ia-a-d:d,count:a,ne:0},c);return b?c.reverse():c};
m.Sa=function(a,b,c,d){var e=zf(this.ta).a[0];if(!n(e)||0==c)return yf;b=b||!1;c=null!=c?Math.min(c,this.ya.ia):this.ya.ia;d=d||0;var f=Math.min(Math.max(this.ya.ia-d,0),c);if(0==f)return yf;if(!n(a)||1==a.length&&a[0]instanceof E&&kd(a[0]))return this.Qd(f,b,c,d);a=this.Z.nf(a);var h=Array(b?this.ya.ia:f),k={count:0,W:h.length,reverse:b,K:d},p=1<this.ib().Ud();a.forEach(function(a){for(var b=this.Z.qd(a),b=this.Z.Sd(a)?e:b[0],b=this.ta.Uf(b),c=0;null!=b&&k.count<k.W;){if(p){for(var d=b,f=a,K=k,zb=
h,Pc=d.s.ib(),ee=-1,La=0;La<d.a.length;++La)if(Pc.Bb(d.a[La],f)){ee=La;break}if(-1!=ee)for(La=ee;La<d.a.length&&K.count<K.W;++La)Pc.Bb(d.a[La],f)&&Af(d,K,zb,La)}else b.Sa(a,k,h);0!=k.K||b.fd(a)?c=0:c++;b=2==c?null:b.next()}},this);h.length>k.count&&h.splice(k.count,h.length-k.count);return b?sf(h,b,c,d):h};m.clear=function(){this.ta=Bf(this);this.ya.clear()};m.jb=function(a){return this.ta.jb(a)};m.min=function(){return this.Hb(this.Z.min.bind(this.Z))};m.max=function(){return this.Hb(this.Z.max.bind(this.Z))};
function Cf(a,b,c){if(!a.Z.Jd(b.a[c]))if(1<b.a[c].length){if(null===b.a[c][0])return null}else return null;return[b.a[c],a.sf?[b.A[c]]:b.A[c]]}m.Hb=function(a){var b;a:{b=zf(this.ta);var c=0;do if(c>=b.a.length)b=b.xa,c=0;else{var d=Cf(this,b,c);if(null!==d){b=d;break a}c++}while(null!==b);b=null}a:{c=Df(this.ta);d=c.a.length-1;do if(0>d)c=c.pb,d=0;else{var e=Cf(this,c,d);if(null!==e){c=e;break a}d--}while(null!==c);c=null}return null===b||null===c?null:1==a(b[0],c[0])?b:c};m.La=g("sf");m.ib=g("Z");
m.Oa=function(a,b){return null!=a?0==this.Z.compare(a,b):!1};m.Ia=function(){for(var a=[],b=zf(this.ta);b;)a.push(new Yb(b.ra,[b.a,b.A])),b=b.xa;return a};function Ef(a,b,c,d){a=new vf(b,a,c);d=Ff(d,a);a.ta=d;return a}function Gf(a,b){this.ra=a;this.s=b;this.lb=0;this.xa=this.pb=this.C=null;this.a=[];this.A=[];this.h=[];this.Uf=1==b.ib().Ud()?this.Je:this.Ie}function Bf(a){return new Gf(Zb++,a)}function P(a){return 0==a.lb}m=Gf.prototype;m.next=g("xa");
function Hf(a){function b(a){return null!=a?a.ra.toString():"_"}var c=a.ra+"["+a.a.join("|")+"]",d=a.h.map(function(a){return a.ra}).join("|"),e=a.A.join("/"),f=b(a.pb)+"{",f=P(a)?f+e:f+d,f=f+"}"+b(a.C);a.xa&&(a=Hf(a.xa),c=c+"  "+a[0],f=f+"  "+a[1]);return[c,f]}m.toString=function(){var a="",b=Hf(this),a=a+(b[0]+"\n"+b[1]+"\n");this.h.length&&(a+=this.h[0].toString());return a};function zf(a){return P(a)?a:zf(a.h[0])}function Df(a){return P(a)?a:Df(a.h[a.h.length-1])}
function If(a,b){b&&(b.pb=a);a&&(a.xa=b)}function wf(a,b){for(var c=b.length,d=0,e=a=Bf(a);0<c;){var f=768<=c?511:257<=c&&511>=c?c:257,h=b.slice(d,d+f);a.a=h.map(function(a){return a.key});a.A=h.map(function(a){return a.value});d+=f;c-=f;0<c&&(f=Bf(a.s),If(a,f),a=f)}return e}function Jf(a){var b=a[0],c=Bf(b.s);c.lb=b.lb+1;c.h=a;for(b=0;b<a.length;++b)a[b].C=c,0<b&&c.a.push(a[b].a[0]);return c}
function xf(a){var b=a,c=[];do c.push(b),b=b.xa;while(b);if(512>=c.length)b=Jf(c);else{var d=c.length,e=0,b=Bf(a.s);for(b.lb=a.lb+2;0<d;){a=768<=d?511:257<=d&&511>=d?d:257;var f=c.slice(e,e+a),h=Jf(f);h.C=b;b.h.length&&(b.a.push(f[0].a[0]),If(b.h[b.h.length-1],h));b.h.push(h);e+=a;d-=a}}return b}m.get=function(a){var b=Kf(this,a);if(P(this)){var c=yf;this.s.Oa(this.a[b],a)&&(c=c.concat(this.A[b]));return c}b=this.s.Oa(this.a[b],a)?b+1:b;return this.h[b].get(a)};
m.jb=function(a){var b=Kf(this,a);return this.s.Oa(this.a[b],a)?!0:P(this)?!1:this.h[b].jb(a)};m.remove=function(a,b){Lf(this,a,-1,b);return null===this.C?(a=this,1==this.h.length&&(a=this.h[0],a.C=null),a):this};function Mf(a){return P(a)?a.a[0]:Mf(a.h[0])}function Nf(a){a.a=[];for(var b=1;b<a.h.length;++b)a.a.push(Mf(a.h[b]))}
function Lf(a,b,c,d){var e=Kf(a,b),f=P(a);if(!f){var h=a.s.Oa(a.a[e],b)?e+1:e;if(Lf(a.h[h],b,h,d))Nf(a);else return!1}else if(!a.s.Oa(a.a[e],b))return!1;if(a.a.length>e&&a.s.Oa(a.a[e],b)){if(n(d)&&!a.s.La()&&f&&(h=a.A[e],d=pf(h,d,void 0),0>d?d=!1:(h.splice(d,1),d=!0),d&&a.s.X().remove(b,1),a.A[e].length))return!1;a.a.splice(e,1);f&&(f=a.s.La()?1:a.A[e].length,a.A.splice(e,1),a.s.X().remove(b,f))}if(256>a.a.length&&null!==a.C){a:{if(a.xa&&256<a.xa.a.length)b=a.xa,e=d=0,f=a.a.length+1;else if(a.pb&&
256<a.pb.a.length)b=a.pb,d=a.pb.a.length-1,e=P(a)?d:d+1,f=0;else{b=!1;break a}a.a.splice(f,0,b.a[d]);b.a.splice(d,1);d=P(a)?a.A:a.h;P(a)?h=b.A:(h=b.h,h[e].C=a);d.splice(f,0,h[e]);h.splice(e,1);P(b)||(Nf(b),Nf(a));b=!0}b||Of(a,c)}return!0}
function Of(a,b){var c,d,e;a.xa&&511>a.xa.a.length?(c=a.xa,e=d=0):a.pb&&(c=a.pb,d=c.a.length,e=P(c)?c.A.length:c.h.length);d=[d,0].concat(a.a);Array.prototype.splice.apply(c.a,d);d=null;P(a)?d=a.A:(d=a.h,d.forEach(function(a){a.C=c}));d=[e,0].concat(d);Array.prototype.splice.apply(P(c)?c.A:c.h,d);If(a.pb,a.xa);P(c)||Nf(c);-1!=b&&(a.C.a.splice(b,1),a.C.h.splice(b,1))}
m.Ab=function(a,b,c){var d=Kf(this,a);if(P(this)){if(this.s.Oa(this.a[d],a)){if(c)this.s.X().remove(a,this.s.La()?1:this.A[d].length),this.A[d]=this.s.La()?b:[b];else{if(this.s.La())throw new D(201,this.s.getName(),JSON.stringify(a));if(!rf(this.A[d],b))throw new D(109);}this.s.X().add(a,1);return this}this.a.splice(d,0,a);this.A.splice(d,0,this.s.La()?b:[b]);this.s.X().add(a,1);512==this.a.length?(d=Bf(this.s),a=Bf(this.s),a.lb=1,a.a=[this.a[256]],a.h=[this,d],a.C=this.C,this.C=a,d.a=this.a.splice(256),
d.A=this.A.splice(256),d.C=a,If(d,this.xa),If(this,d),d=a):d=this;return d}d=this.s.Oa(this.a[d],a)?d+1:d;a=this.h[d].Ab(a,b,c);P(a)||1!=a.a.length||(this.a.splice(d,0,a.a[0]),a.h[1].C=this,a.h[0].C=this,this.h.splice(d,1,a.h[1]),this.h.splice(d,0,a.h[0]));return 512==this.a.length?Pf(this):this};
function Pf(a){var b=Bf(a.s),c=Bf(a.s);b.C=a.C;b.lb=a.lb+1;b.a=[a.a[256]];b.h=[a,c];a.a.splice(256,1);c.C=b;c.lb=a.lb;c.a=a.a.splice(256);c.h=a.h.splice(257);c.h.forEach(function(a){a.C=c});a.C=b;If(c,a.xa);If(a,c);return b}function Kf(a,b){for(var c=0,d=a.a.length,e=a.s.ib();c<d;){var f=c+d>>1;-1==e.compare(a.a[f],b)?c=f+1:d=f}return c}m.Je=function(a){if(!P(this)){var b=Kf(this,a);this.s.Oa(this.a[b],a)&&b++;return this.h[b].Je(a)}return this};
m.Ie=function(a){if(!P(this)){var b=Kf(this,a);this.s.Oa(this.a[b],a)&&(a.some(function(a){return a==F})||b++);return this.h[b].Ie(a)}return this};
m.Sa=function(a,b,c){function d(a){return a[0]?a[1]?0:1:-1}var e=this.s.ib(),f=0,h=this.a.length-1,k=this.a,p=d(e.vb(k[f],a)),K=d(e.vb(k[h],a));if(1!=p&&(-1!=p||-1!=K)){var ra=function(a,b){b=a+b>>1;return b==a?b+1:b},ba=function(b,c,f){if(b>=c)return 0==f?c:-1;var h=d(e.vb(k[b],a));if(0==h)return b;if(1==h)return-1;h=ra(b,c);if(h==c)return 0==f?c:-1;var p=d(e.vb(k[h],a));return 0==p?ba(b,h,p):-1==p?ba(h+1,c,f):ba(b+1,h,p)},yb=function(b,c){if(b>=c)return b;var f=d(e.vb(k[c],a));if(0==f)return c;
if(-1==f)return b;f=ra(b,c);if(f==c)return b;var h=d(e.vb(k[f],a));return 0==h?yb(f,c):1==h?yb(b,f-1):-1};0!=p&&(f=ba(f+1,h,K));-1!=f&&(h=yb(f,h),-1!=h&&h>=f&&Qf(this,b,c,f,h+1))}};function Af(a,b,c,d){if(a.s.La())!b.reverse&&b.K?b.K--:c[b.count++]=a.A[d];else for(var e=0;e<a.A[d].length&&b.count<c.length;++e)!b.reverse&&b.K?b.K--:c[b.count++]=a.A[d][e]}function Qf(a,b,c,d,e){for(;d<e&&(b.reverse||!(b.count>=b.W));++d)Af(a,b,c,d)}
m.fill=function(a,b){if(P(this))for(var c=0;c<this.A.length&&0<a.count;++c)if(0<a.offset){if(a.offset-=this.s.La()?1:this.A[c].length,0>a.offset)for(var d=this.A[c].length+a.offset;d<this.A[c].length&&0<a.count;++d)b[a.ne++]=this.A[c][d],a.count--}else if(this.s.La())b[a.ne++]=this.A[c],a.count--;else for(d=0;d<this.A[c].length&&0<a.count;++d)b[a.ne++]=this.A[c][d],a.count--;else for(c=0;c<this.h.length&&0<a.count;++c)this.h[c].fill(a,b)};
function Ff(a,b){var c=b.X();a=a.map(function(a){var d=new Gf(a.id(),b);d.a=a.l[0];d.A=a.l[1];d.a.forEach(function(a,e){c.add(a,b.La()?1:d.A[e].length)});return d});for(var d=0;d<a.length-1;++d)If(a[d],a[d+1]);return 1<a.length?xf(a[0]):a[0]}m.fd=function(a){return this.s.ib().fd(this.a[0],a)};function Rf(a){this.Vc=0==a?Sf:Tf;this.Xd=0==a?function(a){return null!=a?a.reverse():null}:function(a){return a||null};this.ce=0==a?Uf:Wf}function Tf(a,b){return a>b?1:a<b?-1:0}function Sf(a,b){return Tf(b,a)}function Wf(a,b){return pd(a,b)}function Uf(a,b){return pd(b,a)}m=Rf.prototype;m.vb=function(a,b){b=this.Xd(b);var c=[b.from==F,b.o==F];if(!c[0]){var d=this.Vc(a,b.from);c[0]=b.ea?1==d:-1!=d}c[1]||(d=this.Vc(a,b.o),c[1]=b.na?-1==d:1!=d);return c};m.compare=function(a,b){return this.Vc(a,b)};
m.min=function(a,b){return a<b?1:a==b?0:-1};m.max=function(a,b){return a>b?1:a==b?0:-1};m.Bb=function(a,b){a=this.vb(a,b);return a[0]&&a[1]};m.fd=function(a,b){return this.Bb(a,b)};m.nf=function(a){return a.filter(function(a){return null!==a}).sort(function(a,c){return this.ce(a,c)}.bind(this))};m.Sd=function(a){return this.Xd(a).from==F};m.qd=function(a){a=this.Xd(a);return[a.from,a.o]};m.Jd=function(a){return null!==a};m.Ud=l(1);
m.toString=function(){return this.compare==Sf?"SimpleComparator_DESC":"SimpleComparator_ASC"};function Xf(a){Rf.call(this,a);this.Vc=0==a?Yf:Zf}r(Xf,Rf);function Zf(a,b){return null===a?null===b?0:-1:null===b?1:Tf(a,b)}function Yf(a,b){return Zf(b,a)}Xf.prototype.Bb=function(a,b){return null===a?kd(b):Xf.gb.Bb.call(this,a,b)};Xf.prototype.Hb=function(a,b){return null===a?null===b?0:-1:null===b?1:null};Xf.prototype.min=function(a,b){var c=this.Hb(a,b);null===c&&(c=Xf.gb.min.call(this,a,b));return c};
Xf.prototype.max=function(a,b){var c=this.Hb(a,b);null===c&&(c=Xf.gb.max.call(this,a,b));return c};function $f(a){this.pa=a.map(function(a){return new Rf(a)})}function ag(a,b,c,d){for(var e=0,f=0;f<a.pa.length&&0==e;++f)e=d(a.pa[f],b[f],c[f]);return e}m=$f.prototype;m.compare=function(a,b){return ag(this,a,b,function(a,b,e){return b==F||e==F?0:a.compare(b,e)})};m.min=function(a,b){return ag(this,a,b,function(a,b,e){return a.min(b,e)})};m.max=function(a,b){return ag(this,a,b,function(a,b,e){return a.max(b,e)})};
m.vb=function(a,b){for(var c=[!0,!0],d=0;d<this.pa.length&&(c[0]||c[1]);++d){var e=this.pa[d].vb(a[d],b[d]);c[0]=c[0]&&e[0];c[1]=c[1]&&e[1]}return c};m.Bb=function(a,b){for(var c=!0,d=0;d<this.pa.length&&c;++d)c=this.pa[d].Bb(a[d],b[d]);return c};m.fd=function(a,b){return this.pa[0].Bb(a[0],b[0])};
m.nf=function(a){var b=a.filter(function(a){return a.every(ha)});a=Array(this.pa.length);for(var c=0;c<a.length;c++)a[c]=b.map(function(a){return a[c]});a.forEach(function(a,b){a.sort(function(a,c){return this.pa[b].ce(a,c)}.bind(this))},this);b=Array(b.length);for(c=0;c<b.length;c++)b[c]=a.map(function(a){return a[c]});return b.sort(function(a,b){for(var c=0,d=0;d<this.pa.length&&0==c;++d)c=this.pa[d].ce(a[d],b[d]);return c}.bind(this))};m.Sd=function(a){return this.pa[0].Sd(a[0])};
m.qd=function(a){var b=a.map(function(a,b){return this.pa[b].qd(a)[0]},this);a=a.map(function(a,b){return this.pa[b].qd(a)[1]},this);return[b,a]};m.Jd=function(a){return a.every(function(a,c){return this.pa[c].Jd(a)},this)};m.Ud=function(){return this.pa.length};function bg(a){$f.call(this,a);this.pa=a.map(function(a){return new Xf(a)})}r(bg,$f);function cg(a){if(1==a.f.length)return new Rf(a.f[0].order);var b=a.f.map(function(a){return a.order});return a.f.some(function(a){return a.da.gc()})?new bg(b):new $f(b)};function dg(a){this.fa=a;this.nb=B();this.Mc=new tf;this.ya=new tf}m=dg.prototype;m.getName=function(){return this.fa.getName()};m.add=function(a,b){null===a?(this.nb.add(b),this.Mc.add(a,1)):this.fa.add(a,b)};m.set=function(a,b){null===a?(this.nb.clear(),this.Mc.clear(),this.add(a,b)):this.fa.set(a,b)};m.remove=function(a,b){null===a?b?(this.nb.delete(b),this.Mc.remove(a,1)):(this.nb.clear(),this.Mc.clear()):this.fa.remove(a,b)};m.get=function(a){return null===a?C(this.nb):this.fa.get(a)};m.Xc=function(a){return this.fa.Xc(a)};
m.X=function(){uf(this.ya,[this.fa.X(),this.Mc]);return this.ya};m.Sa=function(a,b,c,d){b=this.fa.Sa(a,b,c,d);return null!=a?b:b.concat(C(this.nb))};m.clear=function(){this.nb.clear();this.fa.clear()};m.jb=function(a){return null===a?0!=this.nb.size:this.fa.jb(a)};m.min=function(){return this.fa.min()};m.max=function(){return this.fa.max()};m.Ia=function(){return[new Yb(-2,C(this.nb))].concat(this.fa.Ia())};m.ib=function(){return this.fa.ib()};
function eg(a,b){for(var c=-1,d=0;d<b.length;++d)if(-2==b[d].id()){c=d;break}if(-1==c)throw new D(102);d=b[c].l;b=b.slice(0);b.splice(c,1);a=a(b);var e=new dg(a);d.forEach(function(a){e.nb.add(a)});return e}m.La=function(){return this.fa.La()};function fg(a){this.w=a;this.rb=B();this.Z=new Rf(1)}m=fg.prototype;m.getName=g("w");m.add=function(a){if("number"!=typeof a)throw new D(103);this.rb.add(a)};m.set=function(a,b){this.add(a,b)};m.remove=function(a){this.rb.delete(a)};m.get=function(a){return this.jb(a)?[a]:[]};m.min=function(){return this.Hb(this.Z.min.bind(this.Z))};m.max=function(){return this.Hb(this.Z.max.bind(this.Z))};
m.Hb=function(a){if(0==this.rb.size)return null;var b=C(this.rb).reduce(function(b,d){return null===b||1==a(d,b)?d:b},null);return[b,[b]]};m.Xc=function(){return this.rb.size};m.Sa=function(a,b,c,d){var e=a||[nd()];a=C(this.rb).filter(function(a){return e.some(function(b){return this.Z.Bb(a,b)},this)},this);return sf(a,b,c,d)};m.clear=function(){this.rb.clear()};m.jb=function(a){return this.rb.has(a)};m.Ia=function(){return[new Yb(0,C(this.rb))]};m.ib=g("Z");
function gg(a,b){var c=new fg(a);b[0].l.forEach(function(a){c.add(a,a)});return c}m.La=l(!0);m.X=function(){var a=new tf;a.ia=this.rb.size;return a};function hg(a){this.Na=a.b(lc);this.B=a.b(nc);this.U=a.b(mc)}hg.prototype.Da=function(a){var b=a.oa(),c=function(){if(0==b.length)return v();var a=b.shift();return(a.Cb()?ig(this,a):jg(this,a)).then(c)}.bind(this);return c()};function jg(a,b){var c=a.Na.Fb(0,[b]);a=c.G(b.getName(),b.$a.bind(b),0).get([]).then(function(a){this.U.Ub(b.getName(),a);kg(this,b,a)}.bind(a));c.ka();return a}
function kg(a,b,c){var d=a.B.kc.get(b.getName())||[];c.forEach(function(a){d.forEach(function(b){var c=a.mb(b.getName());b.add(c,a.id())})})}function ig(a,b){var c=a.Na.Fb(0,[b]),d=c.G(b.getName(),b.$a,0).get([]).then(function(a){this.U.Ub(b.getName(),a)}.bind(a));a=b.Ca().map(function(a){return lg(this,a,c)},a).concat(mg(a,b,c));c.ka();return cb(a.concat(d))}
function lg(a,b,c){c=c.G(b.j(),$b,1);var d=cg(b);return c.get([]).then(function(a){if(0<a.length){if(ng(b)){var c=Ef.bind(void 0,d,b.j(),b.Ac);a=eg(c,a)}else a=Ef(d,b.j(),b.Ac,a);this.B.set(b.lc,a)}}.bind(a))}function mg(a,b,c){return c.G(We(b),$b,1).get([]).then(function(a){0<a.length&&(a=gg(We(b),a),this.B.set(b.getName(),a))}.bind(a))};function og(){this.Y=x();this.kc=x()}og.prototype.Da=function(a){a.oa().forEach(function(a){var b=[];this.kc.set(a.getName(),b);var d=We(a);if(null===this.get(d)){var e=new fg(d);b.push(e);this.Y.set(d,e)}a.Ca().forEach(function(a){var c;c=cg(a);c=new vf(a.j(),c,a.Ac);c=ng(a)&&1==a.f.length?new dg(c):c;b.push(c);this.Y.set(a.j(),c)},this)},this);return v()};og.prototype.get=function(a){return this.Y.get(a)||null};
og.prototype.set=function(a,b){var c=this.kc.get(a)||null;null===c&&(c=[],this.kc.set(a,c));a=null;for(var d=0;d<c.length;d++)if(c[d].getName()==b.getName()){a=d;break}null!==a&&0<c.length?c.splice(a,1,b):c.push(b);this.Y.set(b.getName(),b)};function pg(a,b){var c=[],d=null,e=null;Xd(a,function(a){var f=b(a);null==a.getParent()?e=f:L(d,f);var k=a.getParent();null!==k&&J(k).length==J(d).length&&(k=c.indexOf(d),-1!=k&&c.splice(k,1));1<J(a).length&&c.push(f);d=null===a.h?c[c.length-1]:f});return e}function qg(a){return rg(a,function(a){return null===a.h})}
function sg(a){var b=a.getParent(),c=0;null!==b&&(c=J(b).indexOf(a),b.removeChild(a));var d=J(a).slice();d.forEach(function(d,f){a.removeChild(d);null===b||Ud(b,d,c+f)});return{parent:b,children:d}}function tg(a,b){J(a).slice().forEach(function(c){a.removeChild(c);L(b,c)});L(a,b)}function ug(a){var b=Td(a,0);sg(a);tg(b,a);return b}
function vg(a,b,c){var d=Td(a,0),e=J(d).slice();if(!e.some(function(a){return b(a)}))return a;sg(a);e.forEach(function(e,h){if(b(e)){var f=c(a);Vd(d,h);L(f,e);Ud(d,f,h)}});return d}function wg(a,b,c,d){var e=a.getParent();null!==e&&(a=J(e).indexOf(a),Vd(e,a),Ud(e,c,a));J(b).slice().forEach(function(a){b.removeChild(a);L(d,a)});return c}function rg(a,b,c){function d(a){b(a)&&e.push(a);null!=c&&c(a)||J(a).forEach(d)}var e=[];d(a);return e}
function xg(a,b){var c=b||function(a){return a.toString()+"\n"},d="";Xd(a,function(a){for(var b=0;b<Sd(a);b++)d+="-";d+=c(a)});return d};function yg(a){Yd.call(this);this.ob=a;this.Ta=!1}r(yg,Yd);m=yg.prototype;m.Eb=function(){return pg(this,function(a){if(a instanceof yg){var b=new yg(a.ob);b.Ta=a.Ta;a=a.V();b.ra=a;return b}return a.Eb()})};m.ab=function(a){var b=a||[];Xd(this,function(a){a!=this&&a.ab(b)}.bind(this));a=B(b);return C(a)};m.m=function(a){var b=null!=a?a:B();Xd(this,function(a){a!=this&&a.m(b)}.bind(this));return b};m.Lc=function(a){this.Ta!=a&&(this.Ta=a,this.ob="and"==this.ob?"or":"and",J(this).forEach(function(b){return b.Lc(a)}))};
m.eval=function(a){var b=J(this).map(function(b){return b.eval(a)});return zg(this,b)};function zg(a,b){return"and"==a.ob?yd(b):zd(b)}m.toString=function(){return"combined_pred_"+this.ob.toString()};m.qe=function(){if("or"==this.ob){var a=new rd;J(this).forEach(function(b){b=b.qe().zb();a.add(b)});return a}return new rd};m.gd=function(){return"or"==this.ob?Ag(this):!1};
function Ag(a){var b=null;return J(a).every(function(a){if(!(a instanceof $d&&a.gd()))return!1;null===b&&(b=a.I);return b.j()==a.I.j()})};function Bg(a,b,c){Yd.call(this);this.ga=a;this.ma=b;this.D=c;this.Yd=null;a=Pd();this.sc=Qd(a,this.ga.H(),this.D);this.kg=a.Te.get(this.ga.H())||null}r(Bg,Yd);m=Bg.prototype;m.Eb=function(){var a=new Bg(this.ga,this.ma,this.D),b=this.V();a.ra=b;return a};m.ab=function(a){return null!=a?(a.push(this.ga),a.push(this.ma),a):[this.ga,this.ma]};m.m=function(a){a=null!=a?a:B();a.add(this.ga.G());a.add(this.ma.G());return a};
m.reverse=function(){var a=this.D;switch(this.D){case "gt":a="lt";break;case "lt":a="gt";break;case "gte":a="lte";break;case "lte":a="gte"}return new Bg(this.ma,this.ga,a)};m.eval=function(a){var b=a.entries.filter(function(a){var b=H(a,this.ga);a=H(a,this.ma);return this.sc(b,a)},this);return new G(b,a.m())};m.toString=function(){return"join_pred("+this.ga.j()+" "+this.D+" "+this.ma.j()+")"};
function Cg(a,b,c){var d;-1!=b.m().indexOf(Dd(a.ga.G()))?(d=b,b=c):d=c;if(d.entries.length>b.entries.length){a:{c=a.ga;a.ga=a.ma;a.ma=c;switch(a.D){case "gt":c="lt";break;case "lt":c="gt";break;case "gte":c="lte";break;case "lte":c="gte";break;default:break a}a.D=c;a.sc=Qd(Pd(),a.ga.H(),a.D)}return[b,d]}return[d,b]}function Dg(a){var b={};a.ab().forEach(function(a){b[a.getName()]=null});return b}
function Eg(a,b,c){null===a.Yd&&(a.Yd=Dg(a.ma.G()));var d=new Bd(new Yb(-1,a.Yd),!1);return Fd(b,c,d,[Dd(a.ma.G())])}
function Fg(a,b,c,d){var e=[b,c];d||(e=Cg(a,b,c));b=e[0];c=e[1];var e=b,f=c,h=a.ga,k=a.ma;d&&(e=c,f=b,h=a.ma,k=a.ga);var p=new Mc,K=[];e.entries.forEach(function(a){var b=String(H(a,h));p.set(b,a)});var ra=e.m(),ba=f.m();f.entries.forEach(function(a){var b=H(a,k),c=String(b);null!==b&&p.has(c)?p.get(c).forEach(function(b){b=Fd(a,ba,b,ra);K.push(b)}):d&&K.push(Eg(this,a,ba))}.bind(a));a=b.m().concat(c.m());return new G(K,a)}
function Gg(a,b,c,d,e){function f(a,b){b=new Bd(b,1<ra.length);a=Fd(a,ba,b,ra);K.push(a)}var h=d.$f.G(),k=b,p=c;-1!=b.m().indexOf(Dd(h))&&(k=c,p=b);var K=[],ra=p.m(),ba=k.m();k.entries.forEach(function(a){var b=this.kg(H(a,d.rg)),b=d.index.get(b);0!=b.length&&(d.index.La()?f(a,e.get(b[0])):of(e,b).forEach(f.bind(null,a)))},a);a=k.m().concat(p.m());return new G(K,a)};function Hg(a,b,c){return null===b?new $d(a,b,c):n(b.j)?new Bg(a,b,c):new $d(a,b,c)};var Ig={};q("lf.schema.DataStoreType",Ig);Ig.INDEXED_DB=0;Ig.MEMORY=1;Ig.LOCAL_STORAGE=2;Ig.FIREBASE=3;Ig.WEB_SQL=4;Ig.OBSERVABLE_STORE=5;function Jg(a,b,c,d){this.lc=a;this.name=b;this.Ac=c;this.f=d}Jg.prototype.j=function(){return this.lc+"."+this.name};function ng(a){return a.f.some(function(a){return a.da.gc()})}function Q(a,b,c,d){this.w=a;this.sa=c;this.J=b;this.nd=d;this.Ja=null}q("lf.schema.Table",Q);Q.prototype.getName=g("w");Q.prototype.getName=Q.prototype.getName;
function Dd(a){return a.Ja||a.w}Q.prototype.pc=function(a){var b=new this.constructor(this.w);b.Ja=a;b.Dg=this.Dg;return b};Q.prototype.as=Q.prototype.pc;Q.prototype.kb=fa;Q.prototype.createRow=Q.prototype.kb;Q.prototype.$a=fa;Q.prototype.deserializeRow=Q.prototype.$a;Q.prototype.Ca=g("sa");Q.prototype.getIndices=Q.prototype.Ca;Q.prototype.ab=g("J");Q.prototype.getColumns=Q.prototype.ab;Q.prototype.xb=fa;Q.prototype.getConstraint=Q.prototype.xb;Q.prototype.Cb=g("nd");Q.prototype.persistentIndex=Q.prototype.Cb;
function We(a){return a.w+".#"};function R(a,b){this.child=a;this.Lb=b;this.Ja=null}m=R.prototype;m.getName=function(){return this.Lb+"("+this.child.getName()+")"};m.j=function(){return this.Lb+"("+this.child.j()+")"};m.G=function(){return this.child.G()};m.toString=function(){return this.j()};m.H=function(){return this.child.H()};m.Ca=function(){return[]};m.Ba=l(null);m.gc=l(!1);m.pc=function(a){this.Ja=a;return this};R.prototype.as=R.prototype.pc;
function Kg(a){for(var b=[a];a instanceof R;)b.push(a.child),a=a.child;return b}function Lg(a){this.Ja=a||null;this.S=new Q("#UnknownTable",[],[],!1)}m=Lg.prototype;m.getName=l("*");m.j=function(){return this.getName()};m.toString=function(){return this.j()};m.G=g("S");m.H=l(4);m.Ca=function(){return[]};m.Ba=l(null);m.gc=l(!1);q("lf.fn.avg",function(a){return new R(a,"AVG")});function Mg(a){return new R(a||new Lg,"COUNT")}q("lf.fn.count",Mg);function Ng(a){return new R(a,"DISTINCT")}q("lf.fn.distinct",Ng);q("lf.fn.max",function(a){return new R(a,"MAX")});q("lf.fn.min",function(a){return new R(a,"MIN")});q("lf.fn.stddev",function(a){return new R(a,"STDDEV")});q("lf.fn.sum",function(a){return new R(a,"SUM")});q("lf.fn.geomean",function(a){return new R(a,"GEOMEAN")});function S(a,b){I.call(this);this.Qf=b}r(S,I);S.prototype.ba=fa;S.prototype.exec=function(a,b){switch(this.Qf){case 1:return Og(this,a,b);case 0:return Pg(this,a,b);default:return Qg(this,a,b)}};S.prototype.toString=l("dummy_node");S.prototype.Nc=function(){return this.toString()};function Qg(a,b,c){return new u(function(a){a(this.ba([],b,c))}.bind(a))}function Og(a,b,c){return Td(a,0).exec(b,c).then(function(a){return this.ba(a,b,c)}.bind(a))}
function Pg(a,b,c){var d=J(a).map(function(a){return a.exec(b,c)});return cb(d).then(function(a){var d=[];a.forEach(function(a){for(var b=0;b<a.length;++b)d.push(a[b])});return this.ba(d,b,c)}.bind(a))};function Rg(a){S.call(this,0,1);this.xe=a}r(Rg,S);Rg.prototype.toString=function(){return"aggregation("+this.xe.map(function(a){return a.j()}).toString()+")"};Rg.prototype.ba=function(a){a.forEach(function(a){Sg(new Tg(a,this.xe))},this);return a};function Tg(a,b){this.Ma=a;this.J=b}
function Sg(a){a.J.forEach(function(a){a=Kg(a).reverse();for(var b=1;b<a.length;b++){var d=a[b],e=Kg(d).slice(-1)[0],f=d.child instanceof R?vd(this.Ma,d.child):this.Ma;if(null!==f.Ya&&f.Ya.has(d.j()))break;f=Ug(d.Lb,f,e);e=this.Ma;null===e.Ya&&(e.Ya=x());e.Ya.set(d.j(),f)}},a)}
function Ug(a,b,c){var d=null;switch(a){case "MIN":d=Vg(b,c,function(a,b){return b<a?b:a});break;case "MAX":d=Vg(b,c,function(a,b){return b>a?b:a});break;case "DISTINCT":d=Wg(b,c);break;case "COUNT":d=Xg(b,c);break;case "SUM":d=Yg(b,c);break;case "AVG":a=Xg(b,c);0<a&&(d=Yg(b,c)/a);break;case "GEOMEAN":d=Zg(b,c);break;default:d=$g(b,c)}return d}function Vg(a,b,c){return a.entries.reduce(function(a,e){e=H(e,b);return null===e?a:null===a?e:c(a,e)},null)}
function Xg(a,b){return b instanceof Lg?a.entries.length:a.entries.reduce(function(a,d){return a+(null===H(d,b)?0:1)},0)}function Yg(a,b){return Vg(a,b,function(a,b){return b+a})}function $g(a,b){var c=[];a.entries.forEach(function(a){a=H(a,b);null===a||c.push(a)});return 0==c.length?null:rb.apply(null,c)}function Zg(a,b){var c=0;a=a.entries.reduce(function(a,e){e=H(e,b);if(0==e||null===e)return a;c++;return a+Math.log(e)},0);return 0==c?null:Math.pow(Math.E,a/c)}
function Wg(a,b){var c=x();a.entries.forEach(function(a){var d=H(a,b);c.set(d,a)});return new G(y(c),a.m())};function ah(a,b){this.Ga=a;this.aa=b}ah.prototype.bb=g("Ga");ah.prototype.ca=g("aa");function bh(){I.call(this)}r(bh,I);function ch(a,b){I.call(this);this.table=a;this.values=b}r(ch,bh);function dh(a,b){ch.call(this,a,b)}r(dh,ch);function eh(a){I.call(this);this.table=a}r(eh,bh);eh.prototype.toString=function(){return"delete("+this.table.getName()+")"};function fh(a){I.call(this);this.table=a}r(fh,bh);fh.prototype.toString=function(){return"update("+this.table.getName()+")"};
function gh(a){I.call(this);this.N=a}r(gh,bh);gh.prototype.toString=function(){return"select("+this.N.toString()+")"};function hh(a){I.call(this);this.table=a}r(hh,bh);hh.prototype.toString=function(){var a="table_access("+this.table.getName();null===this.table.Ja||(a+=" as "+this.table.Ja);return a+")"};function ih(){I.call(this)}r(ih,bh);ih.prototype.toString=l("cross_product");function jh(a,b){I.call(this);this.f=a;this.Nb=b}r(jh,bh);
jh.prototype.toString=function(){var a="project("+this.f.toString();if(null!==this.Nb)var b=this.Nb.map(function(a){return a.j()}).join(", "),a=a+(", groupBy("+b+")");return a+")"};function kh(a){I.call(this);this.M=a}r(kh,bh);kh.prototype.toString=function(){return"order_by("+ke(this.M)+")"};function lh(a){I.call(this);this.f=a}r(lh,bh);lh.prototype.toString=function(){return"aggregation("+this.f.toString()+")"};function mh(a){I.call(this);this.f=a}r(mh,bh);
mh.prototype.toString=function(){return"group_by("+this.f.toString()+")"};function nh(a){I.call(this);this.W=a}r(nh,bh);nh.prototype.toString=function(){return"limit("+this.W+")"};function oh(a){I.call(this);this.K=a}r(oh,bh);oh.prototype.toString=function(){return"skip("+this.K+")"};function ph(a,b){I.call(this);this.N=a;this.Pb=b}r(ph,bh);ph.prototype.toString=function(){return"join(type: "+(this.Pb?"outer":"inner")+", "+this.N.toString()+")"};function qh(){}qh.prototype.Wa=fa;function rh(){}r(rh,qh);rh.prototype.Wa=function(a){this.F=a;this.tb(this.F);return this.F};rh.prototype.tb=function(a){if(a instanceof gh){var b=sh(this,a.N),b=th(this,b);wg(a,a,b[0],b[1]);a==this.F&&(this.F=b[0]);a=b[0]}J(a).forEach(function(a){this.tb(a)},this)};function sh(a,b){if(0==J(b).length||"and"!=b.ob)return[b];a=J(b).slice().map(function(a){b.removeChild(a);return sh(this,a)},a);return Ea(a)}
function th(a,b){var c=null,d=null;b.map(function(a,b){a=new gh(a);0==b?c=a:L(d,a);d=a},a);return[c,d]};function uh(){}r(uh,qh);uh.prototype.Wa=function(a,b){if(3>b.from.length)return a;this.F=a;this.tb(this.F);return this.F};uh.prototype.tb=function(a){if(a instanceof ih)for(;2<J(a).length;){for(var b=new ih,c=0;2>c;c++){var d=Vd(a,0);L(b,d)}Ud(a,b,0)}J(a).forEach(function(a){this.tb(a)},this)};function vh(){S.call(this,0,0)}r(vh,S);vh.prototype.toString=l("cross_product");vh.prototype.ba=function(a){var b=a[0],c=a[1];a=[];for(var d=b.m(),e=c.m(),f=0;f<b.entries.length;f++)for(var h=0;h<c.entries.length;h++){var k=Fd(b.entries[f],d,c.entries[h],e);a.push(k)}b=b.m().concat(c.m());return[new G(a,b)]};function wh(a,b){ne.call(this,a,b);this.Ha=a.b(pc);this.Ib=a.b(qc)}r(wh,ne);wh.prototype.getPriority=l(2);wh.prototype.ae=function(a){0==this.H()?xh(this,a):this.Jc()};function xh(a,b){a.pd.forEach(function(a,d){a instanceof je&&qe(this.Ib,a,b[d])},a)}wh.prototype.Jc=function(){var a=se(this.Ib,this.ca());0!=a.length&&(a=new pe(this.global,a),te(this.Ha,a))};function yh(a){de.call(this,a)}r(yh,de);yh.prototype.ca=function(){var a=B();a.add(this.from);zh(this,this.from.getName(),a);return a};function zh(a,b,c){var d=Ah(a.da.info(),b,1);Ah(a.da.info(),b).forEach(c.add.bind(c));d.forEach(function(a){zh(this,a.getName(),c)},a)}yh.prototype.clone=function(){var a=new yh(this.da);he(a,this);a.from=this.from;return a};yh.prototype.bind=function(a){yh.gb.bind.call(this,a);ie(this,a);return this};function Bh(a){de.call(this,a)}r(Bh,de);Bh.prototype.ca=function(){var a=B();a.add(this.Ka);var b=this.da.info();Ch(this.Ka.getName(),b.af).forEach(a.add.bind(a));this.Zb&&Ah(b,this.Ka.getName()).forEach(a.add.bind(a));return a};Bh.prototype.clone=function(){var a=new Bh(this.da);he(a,this);a.Ka=this.Ka;this.values&&(a.values=this.values instanceof Gd?this.values:this.values.slice());a.Zb=this.Zb;a.$b=this.$b;return a};
Bh.prototype.bind=function(a){Bh.gb.bind.call(this,a);this.$b&&(this.values=this.$b instanceof Gd?a[this.$b.Ba()]:this.$b.map(function(b){return b instanceof Gd?a[b.Ba()]:b}));return this};function Dh(a){de.call(this,a)}r(Dh,de);Dh.prototype.ca=function(){var a=B();a.add(this.table);var b=this.set.map(function(a){return a.I.j()}),c=this.da.info();Eh(c,b).forEach(a.add.bind(a));Fh(c,b).forEach(a.add.bind(a));return a};Dh.prototype.clone=function(){var a=new Dh(this.da);he(a,this);a.table=this.table;a.set=this.set?Gh(this.set):this.set;return a};Dh.prototype.bind=function(a){Dh.gb.bind.call(this,a);this.set.forEach(function(b){-1!=b.Rc&&(b.value=a[b.Rc])});ie(this,a);return this};
function Gh(a){return a.map(function(a){var b={},d;for(d in a)b[d]=a[d];return b})};function Hh(a,b){if(null==b)return"NULL";switch(a){case 1:return b?1:0;case 3:case 4:return b;case 0:return"'"+bc(b)+"'";default:return"'"+b.toString()+"'"}}function Ih(a,b){var c=a.Zb?"INSERT OR REPLACE":"INSERT",d=a.Ka.ab(),c=c+(" INTO "+a.Ka.getName()+"("),c=c+d.map(function(a){return a.getName()}).join(", "),c=c+") VALUES (";return a.values.map(function(a){var e=d.map(function(c){var d=a.l[c.getName()];return b?null!=d?"#":"NULL":Hh(c.H(),d)});return c+e.join(", ")+");"}).join("\n")}
function Jh(a){switch(a){case "between":return"BETWEEN";case "eq":return"=";case "gte":return">=";case "gt":return">";case "in":return"IN";case "lte":return"<=";case "lt":return"<";case "match":return"LIKE";case "neq":return"<>";default:return"UNKNOWN"}}function Kh(a,b,c,d){return a instanceof Gd?"?"+a.Ba().toString():d?null!=a?"#":"NULL":"match"==b?"'"+a.toString()+"'":"in"==b?"("+a.map(function(a){return Hh(c,a)}).join(", ")+")":"between"==b?Hh(c,a[0])+" AND "+Hh(c,a[1]):Hh(c,a).toString()}
function Lh(a,b){return J(a).map(function(a){return"("+Mh(a,b)+")"}).join("and"==a.ob?" AND ":" OR ")}function Nh(a){return[a.ga.j(),Jh(a.D),a.ma.j()].join(" ")}function Mh(a,b){if(a instanceof $d){var c=a.I.j(),d=Jh(a.D);a=Kh(a.value,a.D,a.I.H(),b);return"="==d&&"NULL"==a?[c,"IS NULL"].join(" "):"<>"==d&&"NULL"==a?[c,"IS NOT NULL"].join(" "):[c,d,a].join(" ")}if(a instanceof yg)return Lh(a,b);if(a instanceof Bg)return Nh(a);throw new D(357,typeof a);}
function Oh(a,b){return(a=Mh(a,b))?" WHERE "+a:""}function Ph(a,b){var c="UPDATE "+a.table.getName()+" SET ",c=c+a.set.map(function(a){var b=a.I.j()+" = ";return-1!=a.Rc?b+"?"+a.Rc.toString():b+Hh(a.I.H(),a.value).toString()}).join(", ");a.u&&(c+=Oh(a.u,b));return c+";"}
function Qh(a,b){var c="*";a.f.length&&(c=a.f.map(function(a){return a.Ja?a.j()+" AS "+a.Ja:a.j()}).join(", "));c="SELECT "+c+" FROM ";null!=a.eb&&0!=a.eb.size?c+=Rh(a,b):(c+=a.from.map(Sh).join(", "),a.u&&(c+=Oh(a.u,b)));a.M&&(b=a.M.map(function(a){return a.I.j()+(0==a.order?" DESC":" ASC")}).join(", "),c+=" ORDER BY "+b);a.qa&&(b=a.qa.map(function(a){return a.j()}).join(", "),c+=" GROUP BY "+b);a.W&&(c+=" LIMIT "+a.W.toString());a.K&&(c+=" SKIP "+a.K.toString());return c+";"}
function Sh(a){return Dd(a)!=a.getName()?a.getName()+" AS "+Dd(a):a.getName()}function Rh(a,b){for(var c=rg(a.u,function(a){return a instanceof Bg}),d=c.map(Nh),e=Sh(a.from[0]),f=1;f<a.from.length;f++)var h=Sh(a.from[f]),e=a.eb.has(c[d.length-f].V())?e+(" LEFT OUTER JOIN "+h):e+(" INNER JOIN "+h),e=e+(" ON ("+d[d.length-f]+")");a=Td(a.u,0);a instanceof Bg||(e+=" WHERE "+Mh(a,b));return e}
function Th(a,b){b=b||!1;a=a.query.clone();if(a instanceof Bh)return Ih(a,b);if(a instanceof yh){var c="DELETE FROM "+a.from.getName();a.u&&(c+=Oh(a.u,b));return c+";"}if(a instanceof Dh)return Ph(a,b);if(a instanceof je)return Qh(a,b);throw new D(358,typeof a);};function T(a,b){this.global=a;this.Cg=a.b(oc);this.Ha=a.b(pc);this.query=b}q("lf.query.BaseBuilder",T);T.prototype.exec=function(){try{this.Za()}catch(a){return $a(a)}return new u(function(a,b){var c=new wh(this.global,[this.yc()]);te(this.Ha,c).then(function(b){a(td(b[0]))},b)},this)};T.prototype.exec=T.prototype.exec;T.prototype.Sf=function(){var a=function(a){return a.Nc(this.query)+"\n"}.bind(this);return xg(Uh(this).bb(),a)};T.prototype.explain=T.prototype.Sf;
T.prototype.bind=function(a){this.query.bind(a);return this};T.prototype.bind=T.prototype.bind;T.prototype.Lg=function(a){return Th(this,a)};T.prototype.toSql=T.prototype.Lg;T.prototype.Za=aa();function Uh(a){if(null==a.bf){var b;b=a.Cg;var c=a.query,d=b.ng.create(c);b=b.zg.create(d,c);a.bf=b}return a.bf}T.prototype.yc=function(){return{context:this.query.clone(),de:Uh(this)}};function Vh(a){T.call(this,a,new yh(a.b(A)))}r(Vh,T);q("lf.query.DeleteBuilder",Vh);Vh.prototype.from=function(a){if(null!=this.query.from)throw new D(515);this.query.from=a;return this};Vh.prototype.from=Vh.prototype.from;Vh.prototype.u=function(a){this.Ad();this.query.u=a;return this};Vh.prototype.where=Vh.prototype.u;Vh.prototype.Ad=function(){if(null==this.query.from)throw new D(548);if(null!=this.query.u)throw new D(516);};
Vh.prototype.Za=function(){Vh.gb.Za.call(this);if(null==this.query.from)throw new D(517);};function Wh(a,b){T.call(this,a,new Bh(a.b(A)));this.query.Zb=b||!1}r(Wh,T);q("lf.query.InsertBuilder",Wh);Wh.prototype.Za=function(){Wh.gb.Za.call(this);var a=this.query;if(null==a.Ka||null==a.values)throw new D(518);if(a.Zb&&null===a.Ka.xb().od)throw new D(519);};Wh.prototype.Ka=function(a){if(null!=this.query.Ka)throw new D(520);this.query.Ka=a;return this};Wh.prototype.into=Wh.prototype.Ka;
Wh.prototype.values=function(a){if(null!=this.query.values)throw new D(521);a instanceof Gd||a.some(function(a){return a instanceof Gd})?this.query.$b=a:this.query.values=a;return this};Wh.prototype.values=Wh.prototype.values;function Xh(a){return Yh("and",Array.prototype.slice.call(arguments))}q("lf.op.and",Xh);q("lf.op.or",function(a){return Yh("or",Array.prototype.slice.call(arguments))});function Yh(a,b){var c=new yg(a);b.forEach(function(a){L(c,a)});return c}q("lf.op.not",function(a){a.Lc(!0);return a});function U(a,b){T.call(this,a,new je(a.b(A)));this.He=this.vd=!1;this.query.f=b;Zh(this);$h(this)}r(U,T);q("lf.query.SelectBuilder",U);U.prototype.Za=function(){U.gb.Za.call(this);var a=this.query;if(null==a.from)throw new D(522);if(n(a.Qb)&&!n(a.W)||n(a.Wb)&&!n(a.K))throw new D(523);null!=this.query.qa?ai(this):bi(this)};function Zh(a){var b=a.query.f.filter(function(a){return a instanceof R&&"DISTINCT"==a.Lb},a);if(0!=b.length&&(1!=b.length||1!=a.query.f.length))throw new D(524);}
function ai(a){if(a.query.qa.some(function(a){a=a.H();return 6==a||0==a}))throw new D(525);}function bi(a){var b=a.query.f.some(function(a){return a instanceof R},a);a=a.query.f.some(function(a){return!(a instanceof R)},a)||0==a.query.f.length;if(b&&a)throw new D(526);}function $h(a){a.query.f.forEach(function(a){if(a instanceof R&&!ci(a.Lb,a.H()))throw new D(527,a.j());},a)}function di(a,b){if(null==a.query.from)throw new D(b);}
U.prototype.from=function(a){if(this.He)throw new D(515);this.He=!0;null==this.query.from&&(this.query.from=[]);this.query.from.push.apply(this.query.from,Array.prototype.slice.call(arguments));return this};U.prototype.from=U.prototype.from;U.prototype.u=function(a){di(this,548);if(this.vd)throw new D(516);this.vd=!0;ei(this,a);return this};U.prototype.where=U.prototype.u;function ei(a,b){null!=a.query.u&&(b=Xh(b,a.query.u));a.query.u=b}
U.prototype.dg=function(a,b){di(this,542);if(this.vd)throw new D(547);this.query.from.push(a);ei(this,b);return this};U.prototype.innerJoin=U.prototype.dg;U.prototype.lg=function(a,b){di(this,542);if(!(b instanceof Bg))throw new D(541);if(this.vd)throw new D(547);this.query.from.push(a);null==this.query.eb&&(this.query.eb=B());var c=b;Dd(a)!=Dd(b.ma.G())&&(c=b.reverse());this.query.eb.add(c.V());ei(this,c);return this};U.prototype.leftOuterJoin=U.prototype.lg;
U.prototype.W=function(a){if(null!=(this.query.W||this.query.Qb))throw new D(528);if(a instanceof Gd)this.query.Qb=a;else{if(0>a)throw new D(531);this.query.W=a}return this};U.prototype.limit=U.prototype.W;U.prototype.K=function(a){if(null!=(this.query.K||this.query.Wb))throw new D(529);if(a instanceof Gd)this.query.Wb=a;else{if(0>a)throw new D(531);this.query.K=a}return this};U.prototype.skip=U.prototype.K;
U.prototype.M=function(a,b){di(this,549);null==this.query.M&&(this.query.M=[]);this.query.M.push({I:a,order:null!=b?b:1});return this};U.prototype.orderBy=U.prototype.M;U.prototype.qa=function(a){di(this,549);if(null!=this.query.qa)throw new D(530);null==this.query.qa&&(this.query.qa=[]);this.query.qa.push.apply(this.query.qa,Array.prototype.slice.call(arguments));return this};U.prototype.groupBy=U.prototype.qa;
function ci(a,b){switch(a){case "COUNT":case "DISTINCT":return!0;case "AVG":case "GEOMEAN":case "STDDEV":case "SUM":return 4==b||3==b;case "MAX":case "MIN":return 4==b||3==b||5==b||2==b}return!1}U.prototype.clone=function(){var a=new U(this.global,this.query.f);a.query=this.query.clone();a.query.Uc=null;return a};U.prototype.clone=U.prototype.clone;function fi(a,b){T.call(this,a,new Dh(a.b(A)));this.query.table=b}r(fi,T);q("lf.query.UpdateBuilder",fi);fi.prototype.set=function(a,b){a={Rc:b instanceof Gd?b.Ba():-1,I:a,value:b};null!=this.query.set?this.query.set.push(a):this.query.set=[a];return this};fi.prototype.set=fi.prototype.set;fi.prototype.u=function(a){this.Ad();this.query.u=a;return this};fi.prototype.where=fi.prototype.u;fi.prototype.Ad=function(){if(null!=this.query.u)throw new D(516);};
fi.prototype.Za=function(){fi.gb.Za.call(this);if(null==this.query.set)throw new D(532);if(this.query.set.some(function(a){return a.value instanceof Gd}))throw new D(501);};function gi(a){this.query=a;this.Ga=null}gi.prototype.fc=function(){null===this.Ga&&(this.Ga=this.wc());return this.Ga};gi.prototype.wc=fa;function hi(a){gi.call(this,a)}r(hi,gi);hi.prototype.wc=function(){return this.query.Zb?new dh(this.query.Ka,this.query.values):new ch(this.query.Ka,this.query.values)};function ii(a){gi.call(this,a)}r(ii,gi);
ii.prototype.wc=function(){var a=new fh(this.query.table),b=null!=this.query.u?new gh(this.query.u.Eb()):null,c=new hh(this.query.table);null===b?L(a,c):(L(b,c),L(a,b));return a};function ji(a,b,c){this.Ga=a;this.fe=b;this.Tb=c}ji.prototype.fc=function(){this.Tb.forEach(function(a){this.Ga=a.Wa(this.Ga,this.fe)},this);return this.Ga};function ki(a,b){gi.call(this,a);this.Tb=b}r(ki,gi);ki.prototype.wc=function(){var a=new eh(this.query.from),b=null!=this.query.u?new gh(this.query.u.Eb()):null,c=new hh(this.query.from);null===b?L(a,c):(L(b,c),L(a,b));return(new ji(a,this.query,this.Tb)).fc()};function li(){}r(li,qh);li.prototype.Wa=function(a,b){if(2>b.from.length)return a;this.F=a;this.tb(this.F,b);return this.F};li.prototype.tb=function(a,b){if(a instanceof gh&&a.N instanceof Bg){var c=a.N.V(),d=Td(a,0);d instanceof ih&&(c=null!=b.eb&&b.eb.has(c),c=new ph(a.N,c),wg(a,d,c,c),a==this.F&&(this.F=c),a=c)}J(a).forEach(function(a){this.tb(a,b)},this)};function mi(){this.Qc=B()}r(mi,qh);mi.prototype.Wa=function(a,b){if(!n(b.u))return a;this.Qc.clear();this.F=a;this.tb(this.F,b);this.Qc.clear();return this.F};mi.prototype.tb=function(a,b){var c=function(a){J(a).forEach(d)}.bind(this),d=function(a){if(!this.Qc.has(a)){if(a instanceof gh){var e=a.N.m(),h=function(a){return ni(this,a,e)}.bind(this),h=oi(this,b,a,h);this.Qc.add(a);h!=a&&(null===h.getParent()&&(this.F=h),d(h))}c(a)}}.bind(this);d(a)};
function oi(a,b,c,d){var e=c;if(pi(b,c))e=ug(c),oi(a,b,c,d);else if(qi(c)){var f=[],e=vg(c,d,function(a){a=new gh(a.N);f.push(a);return a});f.forEach(function(a){oi(this,b,a,d)},a)}return e}function ni(a,b,c){var d=B();qg(b).forEach(function(a){d.add(a.table)},a);b instanceof hh&&d.add(b.table);return rc(d,c)}function qi(a){a=Td(a,0);return a instanceof ih||a instanceof ph}
function pi(a,b){var c=Td(b,0);if(!(c instanceof gh))return!1;if(null==a.eb)return!0;b=b.N instanceof Bg;a=a.eb.has(c.N.V());return b||!a};function ri(a,b){gi.call(this,a);this.Tb=b;this.df=this.Xe=this.mf=this.$e=this.ye=this.Me=this.lf=this.Ee=this.pf=null}r(ri,gi);
ri.prototype.wc=function(){si(this);2<=this.query.from.length&&(this.Ee=new ih);this.lf=null!=this.query.u?new gh(this.query.u.Eb()):null;this.query.M&&(this.$e=new kh(this.query.M));null!=this.query.K&&0<this.query.K&&(this.mf=new oh(this.query.K));null!=this.query.W&&(this.Xe=new nh(this.query.W));null!=this.query.qa&&(this.Me=new mh(this.query.qa));ti(this);this.df=new jh(this.query.f||[],this.query.qa||null);var a=ui(this);return(new ji(a,this.query,this.Tb)).fc()};
function ui(a){for(var b=[a.Xe,a.mf,a.df,a.$e,a.ye,a.Me,a.lf,a.Ee],c=-1,d=null,e=0;e<b.length;e++){var f=b[e];null!==f&&(null===d?d=f:L(b[c],f),c=e)}a.pf.forEach(function(a){L(b[c],a)});return d}function si(a){a.pf=a.query.from.map(function(a){return new hh(a)},a)}function ti(a){var b=a.query.f.filter(function(a){return a instanceof R});null!=a.query.M&&a.query.M.forEach(function(a){a.I instanceof R&&b.push(a.I)});0<b.length&&(a.ye=new lh(b))};function vi(){this.le=[new rh,new uh,new mi,new li];this.Kd=[new rh]}vi.prototype.create=function(a){var b;if(a instanceof Bh)b=new hi(a);else if(a instanceof yh)b=new ki(a,this.Kd);else if(a instanceof je)b=new ri(a,this.le);else if(a instanceof Dh)b=new ii(a);else throw new D(513);b=b.fc();return new ah(b,a.ca())};function wi(a){S.call(this,0,1);this.S=a}r(wi,S);wi.prototype.toString=function(){return"delete("+this.S.getName()+")"};wi.prototype.ba=function(a,b){a=a[0].entries.map(function(a){return a.ua});b.remove(this.S,a);return[xd()]};function xi(a,b){S.call(this,0,-1);this.table=b;this.B=a.b(nc)}r(xi,S);xi.prototype.toString=function(){return"get_row_count("+this.table.getName()+")"};xi.prototype.ba=function(){var a=this.B.get(We(this.table)),b=new G([],[this.table.getName()]),c=Mg(),a=a.X().ia;null===b.Ya&&(b.Ya=x());b.Ya.set(c.j(),a);return[b]};function yi(a,b){S.call(this,0,-1);this.U=a.b(mc);this.B=a.b(nc);this.table=b}r(yi,S);yi.prototype.toString=function(){var a="table_access("+this.table.getName();null===this.table.Ja||(a+=" as "+this.table.Ja);return a+")"};yi.prototype.ba=function(){var a=this.B.get(We(this.table)).Sa();return[Ad(of(this.U,a),[Dd(this.table)])]};function zi(a){this.c=a}r(zi,qh);zi.prototype.Wa=function(a,b){this.F=a;if(!this.Cd(b))return a;a=rg(a,function(a){return a instanceof yi})[0];b=new xi(this.c,a.table);wg(a,a,b,b);return this.F};zi.prototype.Cd=function(a){return 1==a.f.length&&1==a.from.length&&null==a.u&&null==a.W&&null==a.K&&null==a.qa?(a=a.f[0],a instanceof R&&"COUNT"==a.Lb&&a.child instanceof Lg):!1};function Ai(a){S.call(this,0,1);this.Le=a}r(Ai,S);Ai.prototype.toString=function(){return"groupBy("+this.Le.map(function(a){return a.j()}).toString()+")"};Ai.prototype.ba=function(a){return Bi(this,a[0])};function Bi(a,b){var c=new Mc,d=function(a){return this.Le.map(function(b){return H(a,b)},this).join(",")}.bind(a);b.entries.forEach(function(a){c.set(d(a),a)},a);return c.keys().map(function(a){return new G(c.get(a),b.m())},a)};function Ci(a,b,c){S.call(this,0,0);this.B=a.b(nc);this.U=a.b(mc);this.N=b;this.Pb=c;this.yd="eq"==this.N.D?0:2;this.Oe=null}r(Ci,S);var Di=["hash","index_nested_loop","nested_loop"];Ci.prototype.toString=function(){return"join(type: "+(this.Pb?"outer":"inner")+", impl: "+Di[this.yd]+", "+this.N.toString()+")"};
Ci.prototype.ba=function(a){switch(this.yd){case 0:return[Fg(this.N,a[0],a[1],this.Pb)];case 1:return[Gg(this.N,a[0],a[1],this.Oe,this.U)];default:var b=this.N,c=a[0];a=a[1];var d=this.Pb,e=[c,a];d||(e=Cg(b,c,a));c=e[0];a=e[1];for(var e=[],f=c.m(),h=a.m(),k=c.entries.length,p=a.entries.length,K=p+256-1>>8,ra=0;ra<K;){for(var ba=0;ba<k;ba++){var yb=!1,Vf=H(c.entries[ba],b.ga);if(null!==Vf)for(var Fi=Math.min(ra+1<<8,p),zb=ra<<8;zb<Fi;zb++)if(b.sc(Vf,H(a.entries[zb],b.ma))){var yb=!0,Pc=Fd(c.entries[ba],
f,a.entries[zb],h);e.push(Pc)}d&&!yb&&e.push(Eg(b,c.entries[ba],f))}ra++}b=c.m().concat(a.m());return[new G(e,b)]}};function Ei(a,b){a.yd=1;var c=a.B.get(b.Ba().j());a.Oe={$f:b,rg:b==a.N.ga?a.N.ma:a.N.ga,index:c}};function Gi(a){S.call(this,0,-1);this.ef=a}r(Gi,S);Gi.prototype.toString=function(){return"no_op_step("+this.ef[0].m().join(",")+")"};Gi.prototype.ba=g("ef");function Hi(){}r(Hi,qh);Hi.prototype.Wa=function(a,b){this.F=a;if(!this.Cd(b))return a;rg(a,function(a){return a instanceof Ci}).forEach(this.Bg,this);return this.F};Hi.prototype.Cd=function(a){return 1<a.from.length};
Hi.prototype.Bg=function(a){if("eq"==a.N.D&&!a.Pb){var b=function(b){if(!(b instanceof yi))return null;b=Dd(b.table)==Dd(a.N.ma.G())?a.N.ma:a.N.ga;return null===b.Ba()?null:b},c=b(Td(a,0)),b=b(Td(a,1));if(null!==c||null!==b){b=null===b?c:b;Ei(a,b);var d=new G([],[Dd(b.G())]);Wd(a,new Gi([d]),b==c?0:1)}}};function Ii(a){a=a.map(function(a){return a.zb()});a=wb.apply(null,a);var b=[];vb(a,function(a){b.push(a)});return b}function Ji(a){this.Ob=a}Ji.prototype.Zc=function(){return 1==this.Ob.f.length?[nd()]:[this.Ob.f.map(function(){return nd()})]};function Ki(a,b){this.Ob=a;this.Fa=b;this.Gd=this.Ve=null}
function Li(a,b){var c=x();a.Fa.keys().forEach(function(a){var d=this.Fa.get(a).map(function(a){return fe(b,a)},this),f=new rd([nd()]);d.forEach(function(a){f=sd(f,a.qe())});c.set(a,f)},a);return c}Ki.prototype.Zc=function(a){if(this.Ve==a)return this.Gd;for(var b=Li(this,a),c=this.Ob.f.length-1;0<=c;c--){var d=this.Ob.f[c];if(null!==(b.get(d.da.getName())||null))break;b.set(d.da.getName(),new rd([nd()]))}this.Gd=1==this.Ob.f.length?y(b)[0].zb():Ii(Mi(this,b));this.Ve=a;return this.Gd};
function Mi(a,b){var c=x(),d=0;a.Ob.f.forEach(function(a){c.set(a.da.getName(),d);d++});return Xb(b).sort(function(a,b){return c.get(a)-c.get(b)}).map(function(a){return b.get(a)})};function Ni(a,b){this.sd=b;this.B=a.b(nc)}function Oi(a){a=a.B.get(We(a.sd));return Math.floor(.02*a.X().ia)}function Pi(a,b,c){c=c.filter(a.gg,a);if(0==c.length)return null;a=Qi(a,c);if(0==a.length)return null;if(1==a.length)return a[0];var d=Number.MAX_VALUE;return a.reduce(function(a,c){var e=Ri(c,b);return e<d?(d=e,c):a},null)}
function Qi(a,b){return a.sd.Ca().map(function(a){a=new Si(this.B,a);Ti(a,b);return a},a).filter(function(a){if(null===a.Fa)a=!1;else{for(var b=!1,c=!0,f=0;f<a.cb.f.length;f++){var h=a.Fa.has(a.cb.f[f].da.getName());if(b&&h){c=!1;break}h||(b=!0)}a=c}return a})}Ni.prototype.gg=function(a){return a instanceof $d?!a.gd()||a.I.G()!=this.sd||"in"==a.D&&a.value.length>Oi(this)?!1:!0:a instanceof yg?a.gd()&&Td(a,0).I.G()==this.sd?J(a).length<=Oi(this):!1:!1};
function Si(a,b){this.B=a;this.cb=b;this.ag=B(this.cb.f.map(function(a){return a.da.getName()}));this.Vd=this.Fa=null}function Ui(a){null===a.Vd&&(a.Vd=new Ki(a.cb,a.Fa));return a.Vd}function Ti(a,b){b.forEach(function(a){var b=a.ab()[0].getName();this.ag.has(b)&&(null===this.Fa&&(this.Fa=new Mc),this.Fa.set(b,a.V()))},a)}function Ri(a,b){b=Ui(a).Zc(b);var c=a.B.get(a.cb.j());return b.reduce(function(a,b){return a+c.Xc(b)},0)};function Vi(a,b,c,d){S.call(this,0,-1);this.B=a.b(nc);this.index=b;this.Ue=c;this.je=d;this.Pc=this.Oc=!1}r(Vi,S);Vi.prototype.toString=function(){return"index_range_scan("+this.index.j()+", ?, "+(this.je?"reverse":"natural")+(this.Oc?", limit:?":"")+(this.Pc?", skip:?":"")+")"};Vi.prototype.Nc=function(a){var b=this.toString(),c=this.Ue.Zc(a),b=b.replace("?",c.toString());this.Oc&&(b=b.replace("?",a.W.toString()));this.Pc&&(b=b.replace("?",a.K.toString()));return b};
Vi.prototype.ba=function(a,b,c){a=this.Ue.Zc(c);b=this.B.get(this.index.j());c=(1==a.length&&a[0]instanceof E&&od(a[0])?sf(b.get(a[0].from),!1,this.Oc?c.W:void 0,this.Pc?c.K:void 0):b.Sa(a,this.je,this.Oc?c.W:void 0,this.Pc?c.K:void 0)).map(function(a){return new Yb(a,{})},this);return[Ad(c,[this.index.lc])]};function Wi(){S.call(this,0,0)}r(Wi,S);Wi.prototype.toString=l("multi_index_range_scan()");
Wi.prototype.ba=function(a){var b=x();a.forEach(function(a){a.entries.forEach(function(a){b.set(a.ua.id(),a)})});var c=y(b);return[new G(c,a[0].m())]};function Xi(a){S.call(this,0,1);this.ic=a}r(Xi,S);Xi.prototype.toString=l("select(?)");Xi.prototype.Nc=function(a){a=fe(a,this.ic);return this.toString().replace("?",a.toString())};Xi.prototype.ba=function(a,b,c){return[fe(c,this.ic).eval(a[0])]};function Yi(a,b){S.call(this,0,1);this.U=a.b(mc);this.S=b}r(Yi,S);Yi.prototype.toString=function(){return"table_access_by_row_id("+this.S.getName()+")"};Yi.prototype.ba=function(a){return[Ad(of(this.U,ud(a[0])),[Dd(this.S)])]};function Zi(a){this.c=a}r(Zi,qh);Zi.prototype.Wa=function(a,b){this.F=a;rg(a,function(a){return a instanceof yi}).forEach(function(a){var c=$i(a);if(0!=c.length){var e=Pi(new Ni(this.c,a.table),b,c.map(function(a){return fe(b,a.ic)}));if(null!==e){var f=x();c.forEach(function(a){f.set(a.ic,a)},this);this.F=aj(this,e,f,a)}}},this);return this.F};function $i(a){var b=[];for(a=a.getParent();a;){if(a instanceof Xi)b.push(a);else if(a instanceof Ci)break;a=a.getParent()}return b}
function aj(a,b,c,d){(null===b.Fa?[]:b.Fa.values()).map(function(a){return c.get(a)}).forEach(sg);b=new Vi(a.c,b.cb,Ui(b),!1);a=new Yi(a.c,d.table);L(a,b);wg(d,d,a,b);return b.bb()};function bj(a,b){S.call(this,0,-1);this.B=a.b(nc);this.S=b}r(bj,S);bj.prototype.toString=function(){return"insert("+this.S.getName()+")"};bj.prototype.ba=function(a,b,c){cj(this.S,c.values,this.B);b.Ab(this.S,c.values);return[Ad(c.values,[this.S.getName()])]};function cj(a,b,c){a=a.xb().od;if(null===a?0:a.f[0].autoIncrement){var d=a.f[0].da.getName();c=c.get(a.j()).X().Cc;var e=null===c?0:c;b.forEach(function(a){if(0==a.l[d]||null==a.l[d])e++,a.l[d]=e})}}
function dj(a,b){S.call(this,0,-1);this.B=a.b(nc);this.S=b}r(dj,S);dj.prototype.toString=function(){return"insert_replace("+this.S.getName()+")"};dj.prototype.ba=function(a,b,c){cj(this.S,c.values,this.B);b.Rd(this.S,c.values);return[Ad(c.values,[this.S.getName()])]};function ej(){S.call(this,0,1)}r(ej,S);ej.prototype.toString=l("limit(?)");ej.prototype.Nc=function(a){return this.toString().replace("?",a.W.toString())};ej.prototype.ba=function(a,b,c){a[0].entries.splice(c.W);return a};function fj(a){S.call(this,0,1);this.M=a}r(fj,S);m=fj.prototype;m.toString=function(){return"order_by("+ke(this.M)+")"};m.ba=function(a){if(1==a.length){var b;b=a[0];for(var c=null,d=0;d<this.M.length;d++){var e=Ng(this.M[d].I);if(null!==b.Ya&&b.Ya.has(e.j())){c=e;break}}b=c;(null===b?a[0]:vd(a[0],b)).entries.sort(this.Pf.bind(this))}else a.sort(this.Eg.bind(this));return a};
m.Z=function(a,b){var c,d,e,f=-1;do f++,e=this.M[f].I,c=this.M[f].order,d=a(e),e=b(e);while(d==e&&f+1<this.M.length);a=d<e?-1:d>e?1:0;return 1==c?a:-a};m.Eg=function(a,b){return this.Z(function(b){return b instanceof R?vd(a,b):H(a.entries[a.entries.length-1],b)},function(a){return a instanceof R?vd(b,a):H(b.entries[b.entries.length-1],a)})};m.Pf=function(a,b){return this.Z(function(b){return H(a,b)},function(a){return H(b,a)})};function gj(a,b){this.Ma=a;this.J=b}function hj(a){return a.J.some(function(a){return a instanceof R},a)?ij(a):jj(a)}function ij(a){if(1==a.J.length&&"DISTINCT"==a.J[0].Lb)return a=vd(a.Ma,a.J[0]).entries.map(function(a){var b=new Bd(new Yb(-1,{}),1<this.Ma.L.size);Ed(b,this.J[0],H(a,this.J[0].child));return b},a),new G(a,[]);var b=new Bd(new Yb(-1,{}),1<a.Ma.L.size);a.J.forEach(function(a){var c=a instanceof R?vd(this.Ma,a):H(this.Ma.entries[0],a);Ed(b,a,c)},a);return new G([b],a.Ma.m())}
function jj(a){var b=Array(a.Ma.entries.length),c=1<a.Ma.L.size;a.Ma.entries.forEach(function(a,e){b[e]=new Bd(new Yb(a.ua.id(),{}),c);this.J.forEach(function(c){Ed(b[e],c,H(a,c))},this)},a);return new G(b,a.Ma.m())}function kj(a,b){var c=a.map(function(a){return hj(new gj(a,b)).entries[0]});return new G(c,a[0].m())};function lj(a,b){S.call(this,0,1);this.f=a;this.Nb=b}r(lj,S);lj.prototype.toString=function(){var a="project("+this.f.toString();if(null!==this.Nb)var b=this.Nb.map(function(a){return a.j()}).join(", "),a=a+(", groupBy("+b+")");return a+")"};lj.prototype.ba=function(a){0==a.length?a=[xd()]:1==a.length?(a=a[0],a=[0==this.f.length?a:hj(new gj(a,this.f))]):a=[kj(a,this.f)];return a};function mj(a){return a.f.some(function(a){return a instanceof R})||null!==a.Nb};function nj(){S.call(this,0,1)}r(nj,S);nj.prototype.toString=l("skip(?)");nj.prototype.Nc=function(a){return this.toString().replace("?",a.K.toString())};nj.prototype.ba=function(a,b,c){return[new G(a[0].entries.slice(c.K),a[0].m())]};function oj(){}r(oj,qh);oj.prototype.Wa=function(a,b){if(!n(b.W)&&!n(b.K))return a;var c=pj(a);if(null===c)return a;rg(a,function(a){return a instanceof ej||a instanceof nj}).forEach(function(a){a instanceof ej?c.Oc=!0:c.Pc=!0;sg(a)},this);return c.bb()};function pj(a){a=rg(a,function(a){return a instanceof Vi},function(a){return a instanceof lj&&mj(a)||a instanceof fj||1!=J(a).length||a instanceof Xi});return 0<a.length?a[0]:null};function qj(a){this.c=a}r(qj,qh);qj.prototype.Wa=function(a,b){this.F=a;var c=rj(this,b);if(0==c.length)return this.F;var d,e=0;do d=c[e++],a=sj(this,d,b);while(null===a&&e<c.length);if(null===a)return this.F;b=tj(this,a[0].cb.lc);return null===b?this.F:this.F=uj(this,d,b,a)};function rj(a,b){return rg(a.F,function(a){if(!(a instanceof Xi))return!1;a=fe(b,a.ic);return a instanceof yg&&"or"==a.ob})}function tj(a,b){return rg(a.F,function(a){return a instanceof yi&&a.table.getName()==b})[0]||null}
function sj(a,b,c){b=fe(c,b.ic);var d=b.m();if(1!=d.size)return null;var d=C(d)[0],e=new Ni(a.c,d),f=null;return J(b).every(function(a){a=Pi(e,c,[a]);null===a||(null===f?f=[a]:f.push(a));return null!==a})?f:null}function uj(a,b,c,d){var e=new Yi(a.c,c.table),f=new Wi;L(e,f);d.forEach(function(a){a=new Vi(this.c,a.cb,Ui(a),!1);L(f,a)},a);sg(b);wg(c,c,e,f);return f.bb()};function vj(a){this.c=a}r(vj,qh);vj.prototype.Wa=function(a,b){b=wj(a,b);if(null===b)return a;a:{var c=b;a=xj(Td(b,0));if(null!==a){var d;d=b.M;for(var e=null,f=a.table.Ca(),h=0;h<f.length&&null===e;h++)e=yj(f[h],d);d=e;if(null===d){a=c;break a}c=new Vi(this.c,d.cb,new Ji(d.cb),d.Re);d=new Yi(this.c,a.table);L(d,c);sg(b);c=wg(a,a,d,c)}a=c}a==b&&(a=b,c=zj(Td(b,0)),null!==c&&(d=yj(c.index,b.M),null!==d&&(c.je=d.Re,a=sg(b).parent)));return a.bb()};
function zj(a){a=rg(a,function(a){return a instanceof Vi},function(a){return 1!=J(a).length});return 0<a.length?a[0]:null}function xj(a){a=rg(a,function(a){return a instanceof yi},function(a){return 1!=J(a).length});return 0<a.length?a[0]:null}function wj(a,b){return n(b.M)?rg(a,function(a){return a instanceof fj})[0]:null}function yj(a,b){if(a.f.length!=b.length||!b.every(function(b,d){return b.I.getName()==a.f[d].da.getName()}))return null;b=Aj(b,a);return b[0]||b[1]?{cb:a,Re:b[1]}:null}
function Aj(a,b){var c=a.reduce(function(a,b){return a<<1|(0==b.order?0:1)},0),d=b.f.reduce(function(a,b){return a<<1|(0==b.order?0:1)},0),c=c^d;return[0==c,c==Math.pow(2,Math.max(a.length,b.f.length))-1]};function Bj(a,b,c){this.Ga=a;this.fe=b;this.Tb=c}Bj.prototype.fc=function(){this.Tb.forEach(function(a){this.Ga=a.Wa(this.Ga,this.fe)},this);return this.Ga};function Cj(a){S.call(this,0,1);this.S=a}r(Cj,S);Cj.prototype.toString=function(){return"update("+this.S.getName()+")"};Cj.prototype.ba=function(a,b,c){a=a[0].entries.map(function(a){var b=this.S.$a(a.ua.Ia());c.set.forEach(function(a){b.l[a.I.getName()]=a.value},this);return b},this);b.update(this.S,a);return[xd()]};function Dj(a){this.c=a;this.le=[new Hi,new Zi(this.c),new qj(this.c),new vj(this.c),new oj,new zi(this.c)];this.Kd=[new Zi(this.c)]}Dj.prototype.create=function(a,b){var c=a.bb();if(c instanceof dh||c instanceof ch)return Ej(this,a,b);if(c instanceof jh||c instanceof nh||c instanceof oh)return Ej(this,a,b,this.le);if(c instanceof eh||c instanceof fh)return Ej(this,a,b,this.Kd);throw new D(8);};
function Ej(a,b,c,d){a=pg(b.bb(),a.qg.bind(a));null!=d&&(a=(new Bj(a,c,d)).fc());return new le(a,b.ca())}
Dj.prototype.qg=function(a){if(a instanceof jh)return new lj(a.f,a.Nb);if(a instanceof mh)return new Ai(a.f);if(a instanceof lh)return new Rg(a.f);if(a instanceof kh)return new fj(a.M);if(a instanceof oh)return new nj;if(a instanceof nh)return new ej;if(a instanceof gh)return new Xi(a.N.V());if(a instanceof ih)return new vh;if(a instanceof ph)return new Ci(this.c,a.N,a.Pb);if(a instanceof hh)return new yi(this.c,a.table);if(a instanceof eh)return new wi(a.table);if(a instanceof fh)return new Cj(a.table);
if(a instanceof dh)return new dj(this.c,a.table);if(a instanceof ch)return new bj(this.c,a.table);throw new D(514);};function Fj(a){this.ng=new vi;this.zg=new Dj(a)};function Gj(){this.Ye=x()}function Hj(a,b){var c=a.Ye.get(b.getName())||null;null===c&&(c=new Ij,a.Ye.set(b.getName(),c));return c}function Jj(a,b,c,d){c.forEach(function(a){a=Hj(this,a);0==d?(a.fb=null,a.tc=b):3==d?(null===a.Vb&&(a.Vb=B()),a.Vb.add(b),null===a.Va&&(a.Va=B()),a.Va.delete(b)):1==d?(null===a.Va&&(a.Va=B()),a.Va.add(b)):2==d&&(a.fb=b)},a)}
function Kj(a,b,c,d){var e=!0;c.forEach(function(a){if(e){a=Hj(this,a);var c=null===a.Va||0==a.Va.size;e=0==d?(null===a.Vb||0==a.Vb.size)&&c&&null===a.tc&&null!==a.fb&&a.fb==b:3==d?null===a.tc&&null===a.fb&&null!==a.Va&&a.Va.has(b):1==d?null===a.fb:c&&(null===a.fb||a.fb==b)}},a);return e}function Lj(a,b,c,d){var e=Kj(a,b,c,d);e&&Jj(a,b,c,d);return e}Gj.prototype.releaseLock=function(a,b){b.forEach(function(b){Hj(this,b).releaseLock(a)},this)};
function Mj(a,b){b.forEach(function(a){Hj(this,a).fb=null},a)}function Ij(){this.Vb=this.Va=this.fb=this.tc=null}Ij.prototype.releaseLock=function(a){this.tc==a&&(this.tc=null);this.fb==a&&(this.fb=null);null===this.Va||this.Va.delete(a);null===this.Vb||this.Vb.delete(a)};function Nj(){this.Sb=new Oj;this.Bc=new Gj}function te(a,b){(2>b.getPriority()||2>b.getPriority())&&Mj(a.Bc,b.ca());a.Sb.Ab(b);Pj(a);return b.Db.ha}function Pj(a){for(var b=a.Sb.zb(),c=0;c<b.length;c++){var d=b[c];if(0==d.H()?Qj(a,d,1,3):Qj(a,d,2,0)){a.Sb.remove(d);var e=a;d.exec().then(e.wg.bind(e,d),e.vg.bind(e,d))}}}function Qj(a,b,c,d){var e=!1;Lj(a.Bc,b.V(),b.ca(),c)&&(e=Lj(a.Bc,b.V(),b.ca(),d));return e}Nj.prototype.wg=function(a,b){this.Bc.releaseLock(a.V(),a.ca());a.Db.resolve(b);Pj(this)};
Nj.prototype.vg=function(a,b){this.Bc.releaseLock(a.V(),a.ca());a.Db.reject(b);Pj(this)};function Oj(){this.Sb=[]}Oj.prototype.Ab=function(a){rf(this.Sb,a,function(a,c){var b=a.getPriority()-c.getPriority();return 0==b?a.V()-c.V():b})};Oj.prototype.zb=function(){return this.Sb.slice()};Oj.prototype.remove=function(a){var b=this.Sb;a=xa(b,a);var c;(c=0<=a)&&Array.prototype.splice.call(b,a,1);return c};function Rj(){this.Kc=x()}var Sj;function Tj(){Sj||(Sj=new Rj);return Sj}Rj.prototype.clear=function(){this.Kc.clear()};Rj.prototype.clear=Rj.prototype.clear;Rj.prototype.qb=function(a,b){this.Kc.set(a.toString(),b);return b};Rj.prototype.registerService=Rj.prototype.qb;Rj.prototype.b=function(a){var b=this.Kc.get(a.toString())||null;if(null===b)throw new D(7,a.toString());return b};Rj.prototype.getService=Rj.prototype.b;Rj.prototype.hd=function(a){return this.Kc.has(a.toString())};
Rj.prototype.isRegistered=Rj.prototype.hd;function Uj(){var a=Tj();return Xb(a.Kc)};function Vj(a,b,c,d){return null!=a?null!=b?Wj(a,b,c,d):Xj(a):Yj()}function Zj(a){var b="";try{b=JSON.stringify(a)}catch(c){}return b}function ak(a){var b=Tj();a=new kc("ns_"+a);return b.hd(a)?b.b(a):null}function Yj(){var a={};Uj().forEach(function(b){"ns_"==b.substring(0,3)&&(b=b.substring(3),a[b]=ak(b).b(A).version())});return Zj(a)}function Xj(a){a=ak(a);var b={};if(null!=a){var c=a.b(nc);a.b(A).oa().forEach(function(a){b[a.getName()]=c.get(We(a)).X().ia})}return Zj(b)}
function Wj(a,b,c,d){var e=ak(a);a=[];if(null!=e){var f=null;try{f=e.b(A).table(b)}catch(h){}null!=f&&(b=e.b(nc),e=e.b(mc),c=b.get(We(f)).Sa(void 0,!1,c,d),c.length&&(a=of(e,c).map(function(a){return a.l})))}return Zj(a)};function bk(a,b){this.Ld=Pd();this.ge=a;this.kd=b;this.J=ck(this)}function ck(a){if(0<a.ge.f.length)return a.ge.f;var b=[];a.ge.from.forEach(function(a){a.ab().forEach(function(a){b.push(a)})});return b}bk.prototype.Z=function(a,b){return this.J.every(function(c){return Qd(this.Ld,c.H(),"eq")(H(a,c),H(b,c))},this)};
function dk(a,b,c){var d=null===b?[]:b.entries,e=nb(d,c.entries,a.Z.bind(a),function(a){return d[a]});b=[];for(var f=0,h=0;h<d.length;h++){var k=d[h];e[f]==k?f++:(k=a.kd.splice(f,1),k=ek(h,k,0,a.kd),b.push(k))}e=nb(d,c.entries,a.Z.bind(a),function(a,b){return c.entries[b]});for(h=f=0;h<c.entries.length;h++)k=c.entries[h],e[f]==k?f++:(a.kd.splice(h,0,k.ua.l),k=ek(h,[],1,a.kd),b.push(k));return b}function ek(a,b,c,d){return{addedCount:c,index:a,object:d,removed:b,type:"splice"}};function fk(){this.ec=x()}fk.prototype.xd=function(a,b){var c=la(a.query).toString(),d=this.ec.get(c)||null;null===d&&(d=new gk(a),this.ec.set(c,d));d.xd(b)};fk.prototype.he=function(a,b){a=la(a.query).toString();var c=this.ec.get(a)||null;c.he(b);0<c.Ec.size||this.ec.delete(a)};function se(a,b){var c=B();b.forEach(function(a){c.add(a.getName())});var d=[];a.ec.forEach(function(a){a=a.yc();a.context.from.some(function(a){return c.has(a.getName())})&&d.push(a)});return d}
function qe(a,b,c){b=la(null!=b.Uc?b.Uc:b).toString();a=a.ec.get(b)||null;null!==a&&hk(a,c)}function gk(a){this.Bf=a;this.Ec=B();this.tg=[];this.We=null;this.Nf=new bk(a.query,this.tg)}gk.prototype.xd=function(a){this.Ec.has(a)||this.Ec.add(a)};gk.prototype.he=function(a){return this.Ec.delete(a)};gk.prototype.yc=function(){var a=this.Bf;return{context:a.query,de:Uh(a)}};function hk(a,b){var c=dk(a.Nf,a.We,b);a.We=b;0<c.length&&a.Ec.forEach(function(a){a(c)})};function ik(a,b){var c=a.b(A),d=b||{};b=new nf(c);a.qb(mc,b);b=null;var e=!1;null!=d.storeType?b=d.storeType:(n(Wb)||(Wb=new Vb),b=Wb,b=b.bg?0:b.Qg?4:1);switch(b){case 0:b=new Se(a,c);break;case 1:b=new Ze(c);break;case 5:b=new af(c);break;case 4:b=new jf(a,c,d.webSqlDbSize);break;case 3:b=new Fe(c,d.firebase);e=!0;break;default:throw new D(300);}a.qb(lc,b);var f=new og;a.qb(nc,f);return b.Da(d.onUpgrade).then(function(){var b=new Fj(a);a.qb(oc,b);b=new Nj;a.qb(pc,b);b=new fk;a.qb(qc,b);return f.Da(c)}).then(function(){if(e){var b=
new ue(a);b.Na.subscribe(b.Zd.bind(b))}d.enableInspector&&(window.top["#lfInspect"]=Vj);return(new hg(a)).Da(c)})};function jk(a){this.c=a;this.g=a.b(A);this.aa=B(this.g.oa());this.Db=w()}function kk(a){var b=a.c.b(nc),c=a.c.b(mc),d={};a.g.oa().forEach(function(a){var e=b.get(We(a)).Sa(),e=of(c,e).map(function(a){return a.l});d[a.getName()]=e});return{name:a.g.name(),version:a.g.version(),tables:d}}m=jk.prototype;m.exec=function(){var a=kk(this),a=new Bd(new Yb(-1,a),!0);return v([new G([a],[])])};m.H=l(0);m.ca=g("aa");m.V=function(){return la(this)};m.getPriority=l(0);function lk(a,b){this.c=a;this.g=a.b(A);this.aa=B(this.g.oa());this.Db=w();this.Aa=b;this.Na=a.b(lc);this.U=a.b(mc);this.B=a.b(nc)}m=lk.prototype;
m.exec=function(){if(!(this.Na instanceof Se||this.Na instanceof Ze||this.Na instanceof jf))throw new D(300);var a;a:{a=this.g.oa();for(var b=0;b<a.length;++b)if(0<this.B.get(We(a[b])).X().ia){a=!1;break a}a=!0}if(!a)throw new D(110);if(this.g.name()!=this.Aa.name||this.g.version()!=this.Aa.version)throw new D(111);if(null==this.Aa.tables)throw new D(112);return mk(this)};m.H=l(1);m.ca=g("aa");m.V=function(){return la(this)};m.getPriority=l(0);
function mk(a){var b=new ed(a.c,a.aa),b=a.Na.Fb(a.H(),C(a.aa),b),c;for(c in a.Aa.tables){var d=a.g.table(c),e=a.Aa.tables[c].map(function(a){return d.kb(a)}),f=b.G(c,d.$a,0);a.U.Ub(c,e);var h=a.B.kc.get(c)||[];e.forEach(function(a){h.forEach(function(b){var c=a.mb(b.getName());b.add(c,a.id())})});f.put(e)}return b.ka()};function nk(a,b){this.c=a;this.Na=a.b(lc);this.Ha=a.b(pc);this.Ib=a.b(qc);this.aa=B(b);this.Pa=new ed(this.c,this.aa);this.Db=w();this.uc=w();this.ue=w()}m=nk.prototype;m.exec=function(){this.ue.resolve();return this.uc.ha};m.H=l(1);m.ca=g("aa");m.V=function(){return la(this)};m.getPriority=l(2);function ok(a){te(a.Ha,a);return a.ue.ha}
function pk(a,b){b=b.yc();return b.de.bb().exec(a.Pa,b.context).then(function(a){return td(a[0])},function(a){this.Pa.Jb();var b=new hb(a.name);this.uc.reject(b);throw a;}.bind(a))}m.ka=function(){this.ja=this.Na.Fb(this.H(),C(this.aa),this.Pa);this.ja.ka().then(function(){this.Jc();this.uc.resolve()}.bind(this),function(a){this.Pa.Jb();this.uc.reject(a)}.bind(this));return this.Db.ha};m.Jb=function(){this.Pa.Jb();this.uc.resolve();return this.Db.ha};
m.Jc=function(){var a=se(this.Ib,this.aa);0!=a.length&&(a=new pe(this.c,a),te(this.Ha,a))};m.X=function(){var a=null;null!=this.ja&&(a=this.ja.X());return null===a?new z(!1,0,0,0,0):a};function V(a){this.c=a;this.Ha=a.b(pc);this.Kb=null;this.Ra=0;0==qk.size&&(qk.set(0,B([1,4])),qk.set(1,B([2])),qk.set(2,B([3,5,6])),qk.set(3,B([2,7])),qk.set(4,B([7])),qk.set(5,B([7])),qk.set(6,B([7])))}q("lf.proc.Transaction",V);var qk=x();function rk(a,b){var c=qk.get(a.Ra)||null;if(null===c||!c.has(b))throw new D(107,a.Ra,b);a.Ra=b}
V.prototype.exec=function(a){rk(this,4);var b=[];try{a.forEach(function(a){a.Za();b.push(a.yc())},this)}catch(c){return rk(this,7),$a(c)}this.Kb=new wh(this.c,b);return te(this.Ha,this.Kb).then(function(a){rk(this,7);return a.map(function(a){return td(a)})}.bind(this),function(a){rk(this,7);throw a;}.bind(this))};V.prototype.exec=V.prototype.exec;V.prototype.zf=function(a){rk(this,1);this.Kb=new nk(this.c,a);return ok(this.Kb).then(function(){rk(this,2)}.bind(this))};V.prototype.begin=V.prototype.zf;
V.prototype.yf=function(a){rk(this,3);try{a.Za()}catch(b){return rk(this,7),$a(b)}return pk(this.Kb,a).then(function(a){rk(this,2);return a}.bind(this),function(a){rk(this,7);throw a;}.bind(this))};V.prototype.attach=V.prototype.yf;V.prototype.ka=function(){rk(this,5);return this.Kb.ka().then(function(){rk(this,7)}.bind(this))};V.prototype.commit=V.prototype.ka;V.prototype.Jb=function(){rk(this,6);return this.Kb.Jb().then(function(){rk(this,7)}.bind(this))};V.prototype.rollback=V.prototype.Jb;
V.prototype.X=function(){if(7!=this.Ra)throw new D(105);return this.Kb.X()};V.prototype.stats=V.prototype.X;function W(a){this.c=a;this.g=a.b(A);this.ed=!1}q("lf.proc.Database",W);W.prototype.Da=function(a){this.c.qb(A,this.g);return ik(this.c,a).then(function(){this.ed=!0;this.Ha=this.c.b(pc);return this}.bind(this))};W.prototype.init=W.prototype.Da;W.prototype.yb=g("g");W.prototype.getSchema=W.prototype.yb;function sk(a){if(!a.ed)throw new D(2);}W.prototype.select=function(a){sk(this);return new U(this.c,1!=arguments.length||null!=arguments[0]?Array.prototype.slice.call(arguments):[])};
W.prototype.select=W.prototype.select;W.prototype.Ab=function(){sk(this);return new Wh(this.c)};W.prototype.insert=W.prototype.Ab;W.prototype.Rd=function(){sk(this);return new Wh(this.c,!0)};W.prototype.insertOrReplace=W.prototype.Rd;W.prototype.update=function(a){sk(this);return new fi(this.c,a)};W.prototype.update=W.prototype.update;W.prototype.delete=function(){sk(this);return new Vh(this.c)};W.prototype["delete"]=W.prototype.delete;
W.prototype.observe=function(a,b){sk(this);this.c.b(qc).xd(a,b)};W.prototype.observe=W.prototype.observe;W.prototype.unobserve=function(a,b){sk(this);this.c.b(qc).he(a,b)};W.prototype.unobserve=W.prototype.unobserve;W.prototype.Jf=function(){sk(this);return new V(this.c)};W.prototype.createTransaction=W.prototype.Jf;W.prototype.close=function(){try{this.c.b(lc).close()}catch(a){}this.c.clear();this.ed=!1};W.prototype.close=W.prototype.close;
W.prototype.Tf=function(){sk(this);var a=new jk(this.c);return te(this.Ha,a).then(function(a){return td(a[0])[0]})};W.prototype["export"]=W.prototype.Tf;W.prototype.import=function(a){sk(this);a=new lk(this.c,a);return te(this.Ha,a).then(l(null))};W.prototype["import"]=W.prototype.import;function X(a,b,c,d,e,f){this.S=a;this.w=b;this.Se=c;this.Qe=d;this.rf=e;this.Ja=f||null}q("lf.schema.BaseColumn",X);m=X.prototype;m.getName=g("w");m.j=function(){return Dd(this.S)+"."+this.w};m.toString=function(){return this.j()};m.G=g("S");m.H=g("rf");X.prototype.getType=X.prototype.H;X.prototype.Ca=function(){null==this.sa&&(this.sa=[],this.G().Ca().forEach(function(a){-1!=a.f.map(function(a){return a.da.getName()}).indexOf(this.w)&&this.sa.push(a)},this));return this.sa};
X.prototype.Ba=function(){if(!n(this.fa)){var a=this.Ca().filter(function(a){return 1!=a.f.length?!1:a.f[0].da.getName()==this.getName()},this);this.fa=0<a.length?a[0]:null}return this.fa};X.prototype.gc=g("Qe");X.prototype.isNullable=X.prototype.gc;X.prototype.Ac=g("Se");X.prototype.Oa=function(a){return Hg(this,a,"eq")};X.prototype.eq=X.prototype.Oa;X.prototype.Ze=function(a){return Hg(this,a,"neq")};X.prototype.neq=X.prototype.Ze;X.prototype.og=function(a){return Hg(this,a,"lt")};
X.prototype.lt=X.prototype.og;X.prototype.pg=function(a){return Hg(this,a,"lte")};X.prototype.lte=X.prototype.pg;X.prototype.Xf=function(a){return Hg(this,a,"gt")};X.prototype.gt=X.prototype.Xf;X.prototype.Yf=function(a){return Hg(this,a,"gte")};X.prototype.gte=X.prototype.Yf;X.prototype.match=function(a){return Hg(this,a,"match")};X.prototype.match=X.prototype.match;X.prototype.Af=function(a,b){return Hg(this,[a,b],"between")};X.prototype.between=X.prototype.Af;
X.prototype.Zf=function(a){return Hg(this,a,"in")};X.prototype["in"]=X.prototype.Zf;X.prototype.jg=function(){return this.Oa(null)};X.prototype.isNull=X.prototype.jg;X.prototype.ig=function(){return this.Ze(null)};X.prototype.isNotNull=X.prototype.ig;X.prototype.pc=function(a){return new X(this.S,this.w,this.Se,this.Qe,this.rf,a)};X.prototype.as=X.prototype.pc;function tk(a){this.g=a;this.Dd=new Mc;this.ie=new Mc;this.af=new Mc;this.De=x();this.h=new Mc;this.ze=new Mc;this.ff=new Mc;this.Ce=new Mc;uk(this)}function uk(a){a.g.oa().forEach(function(a){var b=a.getName();a.xb().Pd.forEach(function(c){this.af.set(b,this.g.table(c.Ua));this.h.set(c.Ua,a);0==c.action?(this.ie.set(c.Ua,c),this.ff.set(c.Ua,a)):(this.Dd.set(c.Ua,c),this.ze.set(c.Ua,a));this.De.set(a.getName()+"."+c.ub,c.Ua);this.Ce.set(c.Ua+"."+c.Gc,a.getName())},this)},a)}
function Vc(a,b,c){if(null!=c)return 1==c?a.Dd.get(b):a.ie.get(b);c=a.Dd.get(b);a=a.ie.get(b);return null===c&&null===a?null:(c||[]).concat(a||[])}function Ch(a,b){a=b.get(a);return null===a?[]:a}function Eh(a,b){var c=B();b.forEach(function(a){(a=this.De.get(a))&&c.add(a)},a);return C(c).map(function(a){return this.g.table(a)},a)}function Ah(a,b,c){return null!=c?0==c?Ch(b,a.ff):Ch(b,a.ze):Ch(b,a.h)}
function Fh(a,b){var c=B();b.forEach(function(a){(a=this.Ce.get(a))&&a.forEach(function(a){c.add(a)})},a);return C(c).map(function(a){return this.g.table(a)},a)};function vk(a,b,c){this.od=a;this.sg=b;this.Pd=c}q("lf.schema.Constraint",vk);vk.prototype.Wf=g("od");vk.prototype.getPrimaryKey=vk.prototype.Wf;vk.prototype.Vf=g("Pd");vk.prototype.getForeignKeys=vk.prototype.Vf;function wk(a,b,c){var d=a.ref.split(".");if(2!=d.length)throw new D(540,c);this.Be=b;this.ub=a.local;this.Ua=d[0];this.Gc=d[1];this.name=b+"."+c;this.action=a.action;this.timing=a.timing};function Y(a){xk(a);this.Ld=Pd();this.w=a;this.J=x();this.ud=B();this.mc=B();this.jd=B();this.Ea=null;this.sa=x();this.nd=!1;this.wb=[]}q("lf.schema.TableBuilder",Y);function yk(a){this.name=a.name;this.order=a.order;this.autoIncrement=a.autoIncrement}var zk=B([0,6]);function xk(a){if(!/^[A-Za-z_][A-Za-z0-9_]*$/.test(a))throw new D(502,a);}function Ak(a,b){if(b==a.w)throw new D(546,b);if(a.J.has(b)||a.sa.has(b)||a.mc.has(b))throw new D(503,a.w+"."+b);}
function Bk(a,b){var c=!1;b.forEach(function(a){var b=this.J.get(a.name);c=c||a.autoIncrement;if(a.autoIncrement&&3!=b)throw new D(504);},a);if(c&&1<b.length)throw new D(505);}function Ck(a){if(null!==a.Ea){var b=a.sa.get(a.Ea).map(function(a){return a.name}),c=0;if(a.wb.some(function(a,e){c=e;return-1!=b.indexOf(a.ub)},a))throw new D(543,a.wb[c].name);}}
function Dk(a){if(null!==a.Ea){var b=function(a){return a.name},c=JSON.stringify(a.sa.get(a.Ea).map(b));a.sa.forEach(function(a,e){if(e!=this.Ea&&(a=a.map(b),JSON.stringify(a)==c))throw new D(544,this.w+"."+e);},a)}}function Ek(a){null===a.Ea||a.sa.get(a.Ea).forEach(function(a){if(this.jd.has(a.name))throw new D(545,this.w+"."+a.name);},a)}Y.prototype.tf=function(a,b){xk(a);Ak(this,a);this.J.set(a,b);zk.has(b)&&this.we([a]);return this};Y.prototype.addColumn=Y.prototype.tf;
Y.prototype.vf=function(a,b){var c=this.w;this.Ea="pk"+(c[0].toUpperCase()+c.substring(1));xk(this.Ea);Ak(this,this.Ea);a=Fk(this,a,!0,void 0,b);Bk(this,a);1==a.length&&this.ud.add(a[0].name);this.mc.add(this.Ea);this.sa.set(this.Ea,a);return this};Y.prototype.addPrimaryKey=Y.prototype.vf;
Y.prototype.uf=function(a,b){xk(a);Ak(this,a);b=new wk(b,this.w,a);n(b.action)||(b.action=0);n(b.timing)||(b.timing=0);if(1==b.action&&1==b.timing)throw new D(506);if(!this.J.has(b.ub))throw new D(540,a);this.wb.push(b);this.ve(a,[b.ub],this.ud.has(b.ub));return this};Y.prototype.addForeignKey=Y.prototype.uf;Y.prototype.wf=function(a,b){xk(a);Ak(this,a);b=Fk(this,b,!0);1==b.length&&(this.ud.add(b[0].name),Gk(this,b[0].name));this.sa.set(a,b);this.mc.add(a);return this};Y.prototype.addUnique=Y.prototype.wf;
function Gk(a,b){a.wb.forEach(function(a){a.ub==b&&this.mc.add(a.name.split(".")[1])},a)}Y.prototype.we=function(a){Fk(this,a,!1).forEach(function(a){this.jd.add(a.name)},this);return this};Y.prototype.addNullable=Y.prototype.we;Y.prototype.ve=function(a,b,c,d){xk(a);Ak(this,a);b=Fk(this,b,!0,d);c&&this.mc.add(a);this.sa.set(a,b);return this};Y.prototype.addIndex=Y.prototype.ve;Y.prototype.Cb=ca("nd");Y.prototype.persistentIndex=Y.prototype.Cb;
Y.prototype.yb=function(){Ck(this);Dk(this);Ek(this);return new (Hk(this))};Y.prototype.getSchema=Y.prototype.yb;function Fk(a,b,c,d,e){var f=b,f="string"==typeof b[0]?b.map(function(a){return new yk({name:a,order:null!=d?d:1,autoIncrement:e||!1})}):b.map(function(a){return new yk(a)});f.forEach(function(a){if(!this.J.has(a.name))throw new D(508,this.w,a.name);if(c){var b=this.J.get(a.name);if(0==b||6==b)throw new D(509,this.w,a.name);}},a);return f}
function Hk(a){function b(){function b(b){return a.sa.get(b).map(function(a){return{da:this[a.name],order:a.order,autoIncrement:a.autoIncrement}},this)}var d=Xb(a.J).map(function(b){this[b]=new X(this,b,a.ud.has(b),a.jd.has(b),a.J.get(b));return this[b]},this),e=Xb(a.sa).map(function(c){return new Jg(a.w,c,a.mc.has(c),b.call(this,c))},this);Q.call(this,a.w,d,e,a.nd);var f=null===a.Ea?null:new Jg(a.w,a.Ea,!0,b.call(this,a.Ea)),h=d.filter(function(b){return!a.jd.has(b.getName())});this.Ff=new vk(f,
h,a.wb);this.jf=Ik(a,d,e)}r(b,Q);b.prototype.kb=function(a){return new this.jf(Zb++,a)};b.prototype.createRow=b.prototype.kb;b.prototype.$a=function(a){var b={};this.ab().forEach(function(c){var d=c.getName();c=c.H();var e=a.value[d];if(0==c)if(c=e,null!=c&&""!=c){0!=c.length%2&&(c="0"+c);for(var e=new ArrayBuffer(c.length/2),k=new Uint8Array(e),p=0,K=0;p<c.length;p+=2)k[K++]=parseInt(c.substr(p,2),16);c=e}else c=null;else c=2==c?null!=e?new Date(e):null:e;b[d]=c},this);return new this.jf(a.id,b)};
b.prototype.deserializeRow=b.prototype.$a;b.prototype.xb=g("Ff");b.prototype.getConstraint=b.prototype.xb;return b}
function Ik(a,b,c){function d(a,d){this.J=b;this.sa=c;Yb.call(this,a,d)}r(d,Yb);d.prototype.Fe=function(){var a={};this.J.forEach(function(b){a[b.getName()]=b.gc()?null:Lc[b.H()]});return a};d.prototype.qf=function(){var a={};this.J.forEach(function(b){var c=b.getName();b=b.H();var d=this.l[c];a[c]=0==b?null!=d?bc(d):null:2==b?null!=d?d.getTime():null:6==b?null!=d?d:null:d},this);return a};var e=function(a){var b=this.J.get(a.getName()),c=this.Ld.Te.get(b)||null;return function(b){return c(b[a.getName()])}}.bind(a),
f=function(a){var b=a.map(function(a){return e(a.da)});return function(a){return b.map(function(b){return b(a)})}}.bind(a),h={};c.forEach(function(a){var b=a.j();a=1==a.f.length?e(a.f[0].da):f(a.f);h[b]=a});d.prototype.mb=function(a){return-1!=a.indexOf("#")?this.id():h.hasOwnProperty(a)?h[a](this.l):null};return d};function Jk(a,b){this.g=new Z(a,b);this.sb=x();this.vc=!1;this.i=null;this.Wc=!1}q("lf.schema.Builder",Jk);function Kk(a,b){b.wb.forEach(function(a){var c=a.Ua;if(!this.sb.has(c))throw new D(536,a.name);var c=this.sb.get(c).yb(),e=a.Gc;if(!c.hasOwnProperty(e))throw new D(537,a.name);if(b.yb()[a.ub].H()!=c[e].H())throw new D(538,a.name);if(!c[e].Ac())throw new D(539,a.name);},a)}
Jk.prototype.Ef=function(a){a.wb.forEach(function(a){this.sb.get(a.Ua).wb.forEach(function(b){if(b.ub==a.Gc)throw new D(534,a.name);},this)},this)};function Lk(a){a.vc||(a.sb.forEach(function(a){Kk(this,a);a=a.yb();this.g.L.set(a.getName(),a)},a),y(a.sb).forEach(a.Ef,a),Mk(a),a.sb.clear(),a.vc=!0)}function Nk(a,b,c){b.se||(b.se=!0,b.$d=!0,b.Ge.forEach(function(a){a=c.get(a);if(!a.se)Nk(this,a,c);else if(a.$d&&b!=a)throw new D(533);},a));b.$d=!1}
function Mk(a){var b=x();a.g.L.forEach(function(a,d){b.set(d,new Ok(d))},a);a.sb.forEach(function(a,d){a.wb.forEach(function(a){b.get(a.Ua).Ge.add(d)})});y(b).forEach(function(a){Nk(this,a,b)},a)}function Ok(a){this.$d=this.se=!1;this.Ge=B();this.lc=a}Jk.prototype.yb=function(){this.vc||Lk(this);return this.g};Jk.prototype.getSchema=Jk.prototype.yb;Jk.prototype.Ke=function(){var a=new kc("ns_"+this.g.name()),b=Tj(),c;b.hd(a)?c=b.b(a):(c=new Rj,b.qb(a,c));return c};Jk.prototype.getGlobal=Jk.prototype.Ke;
Jk.prototype.connect=function(a){if(this.Wc||null!==this.i&&this.i.ed)throw new D(113);this.Wc=!0;if(null===this.i){var b=this.Ke();b.hd(A)||b.qb(A,this.yb());this.i=new W(b)}return this.i.Da(a).then(function(a){this.Wc=!1;return a}.bind(this),function(a){this.Wc=!1;throw a;}.bind(this))};Jk.prototype.connect=Jk.prototype.connect;Jk.prototype.If=function(a){if(this.sb.has(a))throw new D(503,a);if(this.vc)throw new D(535);this.sb.set(a,new Y(a));return this.sb.get(a)};Jk.prototype.createTable=Jk.prototype.If;
Jk.prototype.me=function(a){if(this.vc)throw new D(535);this.g.me(a);return this};Jk.prototype.setPragma=Jk.prototype.me;function Z(a,b){this.w=a;this.Yb=b;this.L=x();this.ee={Of:!1}}q("lf.schema.DatabaseSchema",Z);Z.prototype.name=g("w");Z.prototype.name=Z.prototype.name;Z.prototype.version=g("Yb");Z.prototype.version=Z.prototype.version;Z.prototype.oa=function(){return y(this.L)};Z.prototype.tables=Z.prototype.oa;Z.prototype.table=function(a){if(!this.L.has(a))throw new D(101,a);return this.L.get(a)};
Z.prototype.table=Z.prototype.table;Z.prototype.info=function(){this.Pe||(this.Pe=new tk(this));return this.Pe};Z.prototype.Ag=g("ee");Z.prototype.pragma=Z.prototype.Ag;Z.prototype.me=ca("ee");q("lf.schema.create",function(a,b){return new Jk(a,b)});u.prototype.catch=u.prototype.pe;u.prototype["catch"]=u.prototype.catch;
try{if(module){module.exports=lf;}}catch(e){}}.bind(window))();
//# sourceMappingURL=lovefield.es6.js.map
