/*
  Copyright 2014 The Lovefield Project Authors. All Rights Reserved.

  Licensed under the Apache License, Version 2.0 (the "License");
  you may not use this file except in compliance with the License.
  You may obtain a copy of the License at

  http://www.apache.org/licenses/LICENSE-2.0

  Unless required by applicable law or agreed to in writing, software
  distributed under the License is distributed on an "AS IS" BASIS,
  WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
  See the License for the specific language governing permissions and
  limitations under the License.
*/
(function(){'use strict';var aa=Object,ba=Math,ca=window,da=parseInt,ea=document,e=Array,fa=Error,ga=Function,ha=String;function ia(a,b){return a.table=b}function ja(a,b){return a.name=b}function ka(a,b){return a.dump=b}function la(a,b){return a.clone=b}function ma(a,b){return a.exec=b}function na(a,b){return a.getName=b}function oa(a,b){return a.close=b}function pa(a,b){return a.value=b}function qa(a,b){return a.update=b}function ra(a,b){return a.delete=b}function sa(a,b){return a.onsuccess=b}
function ta(a,b){return a.clear=b}function ua(a,b){return a.values=b}function wa(a,b){return a.remove=b}function xa(a,b){return a.child=b}function ya(a,b){return a.next=b}function za(a,b){return a.onerror=b}function Aa(a,b){return a.length=b}function f(a,b){return a.toString=b}function Ba(a,b){return a.bind=b}function Ca(a,b){return a.subscribe=b}function Da(a,b){return a.forEach=b}function Ea(a,b){return a.getPriority=b}
var Fa="openCursor",Ga="filter",Ha="once",Ia="objectStoreNames",Ja="split",h="table",Ka="reduce",m="join",La="reject",Ma="timing",Na="item",n="slice",Oa="unshift",Pa="target",q="name",r="call",t="prototype",Qa="exec",u="getName",Ra="close",Sa="concat",v="value",Ta="setImmediate",Ua="every",Va="update",Wa="global",Xa="propertyIsEnumerable",Ya="delete",Za="sort",$a="indexOf",ab="some",bb="orderByChild",cb="clear",db="values",eb="replace",fb="continue",gb="addAll",hb="removeChild",w="remove",ib="child",
jb="create",x="push",z="then",kb="transaction",lb="index",mb="context",A="splice",nb="autoIncrement",ob="next",pb="shift",qb="hasOwnProperty",rb="contains",sb="version",tb="objectStore",ub="apply",B="entries",C="length",vb="info",D="toString",wb="compare",E="bind",xb="getParent",yb="rows",F="forEach",zb="getPriority",Ab="getTime",Bb="resolve",Cb="result",Db="size";function Eb(){return function(){}}function Fb(a){return function(b){this[a]=b}}function G(a){return function(){return this[a]}}
function Gb(a){return function(){return a}}var H,Hb=this;function Ib(a){return void 0!==a}function I(a,b,c){a=a[Ja](".");c=c||Hb;a[0]in c||!c.execScript||c.execScript("var "+a[0]);for(var d;a[C]&&(d=a[pb]());)!a[C]&&Ib(b)?c[d]=b:c=c[d]?c[d]:c[d]={}}function Jb(){}function Kb(a){a.Be=function(){return a.lg?a.lg:a.lg=new a}}
function Lb(a){var b=typeof a;if("object"==b)if(a){if(a instanceof e)return"array";if(a instanceof aa)return b;var c=aa[t][D][r](a);if("[object Window]"==c)return"object";if("[object Array]"==c||"number"==typeof a[C]&&"undefined"!=typeof a[A]&&"undefined"!=typeof a[Xa]&&!a[Xa]("splice"))return"array";if("[object Function]"==c||"undefined"!=typeof a[r]&&"undefined"!=typeof a[Xa]&&!a[Xa]("call"))return"function"}else return"null";else if("function"==b&&"undefined"==typeof a[r])return"object";return b}
function Mb(a){return null===a}function Nb(a){return null!=a}function Ob(a){var b=Lb(a);return"array"==b||"object"==b&&"number"==typeof a[C]}function Pb(a){return"string"==typeof a}function Qb(a){return"function"==Lb(a)}function Rb(a){return a[Sb]||(a[Sb]=++Ub)}var Sb="closure_uid_"+(1E9*ba.random()>>>0),Ub=0;function Vb(a,b,c){return a[r][ub](a[E],arguments)}
function Wb(a,b,c){if(!a)throw fa();if(2<arguments[C]){var d=e[t][n][r](arguments,2);return function(){var c=e[t][n][r](arguments);e[t][Oa][ub](c,d);return a[ub](b,c)}}return function(){return a[ub](b,arguments)}}function J(a,b,c){J=ga[t][E]&&-1!=ga[t][E][D]()[$a]("native code")?Vb:Wb;return J[ub](null,arguments)}function Xb(a,b){var c=e[t][n][r](arguments,1);return function(){var b=c[n]();b[x][ub](b,arguments);return a[ub](this,b)}}
function K(a,b){function c(){}c.prototype=b[t];a.Jb=b[t];a.prototype=new c;a[t].constructor=a;a.pl=function(a,c,k){for(var l=e(arguments[C]-2),p=2;p<arguments[C];p++)l[p-2]=arguments[p];return b[t][c][ub](a,l)}}Ba(ga[t],ga[t][E]||function(a,b){if(1<arguments[C]){var c=e[t][n][r](arguments,1);c[Oa](this,a);return J[ub](null,c)}return J(this,a)});function Yb(a){if(fa.captureStackTrace)fa.captureStackTrace(this,Yb);else{var b=fa().stack;b&&(this.stack=b)}a&&(this.message=ha(a))}K(Yb,fa);ja(Yb[t],"CustomError");function Zb(a,b){for(var c=a[Ja]("%s"),d="",g=e[t][n][r](arguments,1);g[C]&&1<c[C];)d+=c[pb]()+g[pb]();return d+c[m]("%s")};function $b(a,b){b[Oa](a);Yb[r](this,Zb[ub](null,b));b[pb]()}K($b,Yb);ja($b[t],"AssertionError");function ac(a,b,c,d){var g="Assertion failed";if(c)var g=g+(": "+c),k=d;else a&&(g+=": "+a,k=b);throw new $b(""+g,k||[]);}function L(a,b,c){a||ac("",null,b,e[t][n][r](arguments,2));return a}function bc(a,b){throw new $b("Failure"+(a?": "+a:""),e[t][n][r](arguments,1));}function cc(a,b,c){Qb(a)||ac("Expected function but got %s: %s.",[Lb(a),a],b,e[t][n][r](arguments,2));return a};function dc(a,b,c){this.hk=c;this.ui=a;this.Rk=b;this.Sd=0;this.Ld=null}dc[t].get=function(){var a;0<this.Sd?(this.Sd--,a=this.Ld,this.Ld=a[ob],ya(a,null)):a=this.ui();return a};dc[t].put=function(a){this.Rk(a);this.Sd<this.hk&&(this.Sd++,ya(a,this.Ld),this.Ld=a)};var ec=e[t],fc=ec[$a]?function(a,b,c){L(null!=a[C]);return ec[$a][r](a,b,c)}:function(a,b,c){c=null==c?0:0>c?ba.max(0,a[C]+c):c;if(Pb(a))return Pb(b)&&1==b[C]?a[$a](b,c):-1;for(;c<a[C];c++)if(c in a&&a[c]===b)return c;return-1},gc=ec[F]?function(a,b,c){L(null!=a[C]);ec[F][r](a,b,c)}:function(a,b,c){for(var d=a[C],g=Pb(a)?a[Ja](""):a,k=0;k<d;k++)k in g&&b[r](c,g[k],k,a)},hc=ec.map?function(a,b,c){L(null!=a[C]);return ec.map[r](a,b,c)}:function(a,b,c){for(var d=a[C],g=e(d),k=Pb(a)?a[Ja](""):a,l=0;l<
d;l++)l in k&&(g[l]=b[r](c,k[l],l,a));return g},ic=ec[Ka]?function(a,b,c,d){L(null!=a[C]);d&&(b=J(b,d));return ec[Ka][r](a,b,c)}:function(a,b,c,d){var g=c;gc(a,function(c,l){g=b[r](d,g,c,l,a)});return g},jc=ec[ab]?function(a,b,c){L(null!=a[C]);return ec[ab][r](a,b,c)}:function(a,b,c){for(var d=a[C],g=Pb(a)?a[Ja](""):a,k=0;k<d;k++)if(k in g&&b[r](c,g[k],k,a))return!0;return!1},kc=ec[Ua]?function(a,b,c){L(null!=a[C]);return ec[Ua][r](a,b,c)}:function(a,b,c){for(var d=a[C],g=Pb(a)?a[Ja](""):a,k=0;k<
d;k++)if(k in g&&!b[r](c,g[k],k,a))return!1;return!0};function lc(a,b){L(null!=a[C]);return 1==ec[A][r](a,b,1)[C]}function mc(a,b,c){a:{for(var d=a[C],g=Pb(a)?a[Ja](""):a,k=0;k<d;k++)if(k in g&&b[r](c,g[k],k,a)){b=k;break a}b=-1}return 0<=b?(lc(a,b),!0):!1}function nc(a){var b=a[C];if(0<b){for(var c=e(b),d=0;d<b;d++)c[d]=a[d];return c}return[]}
function oc(a,b){for(var c=1;c<arguments[C];c++){var d=arguments[c];if(Ob(d)){var g=a[C]||0,k=d[C]||0;Aa(a,g+k);for(var l=0;l<k;l++)a[g+l]=d[l]}else a[x](d)}}function pc(a,b,c,d){L(null!=a[C]);return ec[A][ub](a,qc(arguments,1))}function qc(a,b,c){L(null!=a[C]);return 2>=arguments[C]?ec[n][r](a,b):ec[n][r](a,b,c)}function rc(a,b,c,d,g){for(var k=0,l=a[C],p;k<l;){var y=k+l>>1,va;va=c?b[r](g,a[y],y,a):b(d,a[y]);0<va?k=y+1:(l=y,p=!va)}return p?k:~k}function sc(a,b){return a>b?1:a<b?-1:0}
function tc(a,b,c){c=rc(a,c||sc,!1,b);return 0>c?(pc(a,-(c+1),0,b),!0):!1}function uc(a,b){for(var c=[],d=0;d<b;d++)c[d]=a;return c}function vc(a){for(var b=[],c=0;c<arguments[C];c++){var d=arguments[c];if("array"==Lb(d))for(var g=0;g<d[C];g+=8192)for(var k=qc(d,g,g+8192),k=vc[ub](null,k),l=0;l<k[C];l++)b[x](k[l]);else b[x](d)}return b};function wc(a,b,c){for(var d in a)b[r](c,a[d],d,a)}function xc(a,b,c){for(var d in a)if(b[r](c,a[d],d,a))return!0;return!1}function yc(a){var b=[],c=0,d;for(d in a)b[c++]=a[d];return b}function zc(a){var b=[],c=0,d;for(d in a)b[c++]=d;return b};var Ac;a:{var Bc=Hb.navigator;if(Bc){var Cc=Bc.userAgent;if(Cc){Ac=Cc;break a}}Ac=""};function Dc(a){Hb.setTimeout(function(){throw a;},0)}var Ec;
function Fc(){var a=Hb.MessageChannel;"undefined"===typeof a&&"undefined"!==typeof ca&&ca.postMessage&&ca.addEventListener&&-1==Ac[$a]("Presto")&&(a=function(){var a=ea.createElement("IFRAME");a.style.display="none";a.src="";ea.documentElement.appendChild(a);var b=a.contentWindow,a=b.document;a.open();a.write("");a[Ra]();var c="callImmediate"+ba.random(),d="file:"==b.location.protocol?"*":b.location.protocol+"//"+b.location.host,a=J(function(a){if(("*"==d||a.origin==d)&&a.data==c)this.port1.onmessage()},
this);b.addEventListener("message",a,!1);this.port1={};this.port2={postMessage:function(){b.postMessage(c,d)}}});if("undefined"!==typeof a&&-1==Ac[$a]("Trident")&&-1==Ac[$a]("MSIE")){var b=new a,c={},d=c;b.port1.onmessage=function(){if(Ib(c[ob])){c=c[ob];var a=c.Cf;c.Cf=null;a()}};return function(a){ya(d,{Cf:a});d=d[ob];b.port2.postMessage(0)}}return"undefined"!==typeof ea&&"onreadystatechange"in ea.createElement("SCRIPT")?function(a){var b=ea.createElement("SCRIPT");b.onreadystatechange=function(){b.onreadystatechange=
null;b.parentNode[hb](b);b=null;a();a=null};ea.documentElement.appendChild(b)}:function(a){Hb.setTimeout(a,0)}};function Gc(){this.de=this.dc=null}var Ic=new dc(function(){return new Hc},function(a){a.reset()},100);Gc[t].add=function(a,b){var c=this.Jj();c.set(a,b);this.de?ya(this.de,c):(L(!this.dc),this.dc=c);this.de=c};wa(Gc[t],function(){var a=null;this.dc&&(a=this.dc,this.dc=this.dc[ob],this.dc||(this.de=null),ya(a,null));return a});Gc[t].Sk=function(a){Ic.put(a)};Gc[t].Jj=function(){return Ic.get()};function Hc(){this.scope=this.we=null;ya(this,null)}
Hc[t].set=function(a,b){this.we=a;this.scope=b;ya(this,null)};Hc[t].reset=function(){this.scope=this.we=null;ya(this,null)};function Jc(a,b){Kc||Lc();Mc||(Kc(),Mc=!0);Nc.add(a,b)}var Kc;function Lc(){if(Hb.Promise&&Hb.Promise[Bb]){var a=Hb.Promise[Bb]();Kc=function(){a[z](Oc)}}else Kc=function(){var a=Oc;if(!Qb(Hb[Ta])||Hb.Window&&Hb.Window[t]&&Hb.Window[t][Ta]==Hb[Ta])Ec||(Ec=Fc()),Ec(a);else Hb[Ta](a)}}var Mc=!1,Nc=new Gc;[][x](function(){Mc=!1;Nc=new Gc});function Oc(){for(var a=null;a=Nc[w]();){try{a.we[r](a.scope)}catch(b){Dc(b)}Nc.Sk(a)}Mc=!1};function M(a,b){this.Ka=0;this.Ug=void 0;this.rd=this.ic=this.D=null;this.Kd=this.ve=!1;if(a!=Jb)try{var c=this;a[r](b,function(a){c.yc(2,a)},function(a){if(!(a instanceof Pc))try{if(a instanceof fa)throw a;throw fa("Promise rejected.");}catch(b){}c.yc(3,a)})}catch(d){this.yc(3,d)}}function Qc(){xa(this,null);this.context=this.uc=this.Tb=null;ya(this,null);this.ge=!1}Qc[t].reset=function(){xa(this,null);this.context=this.uc=this.Tb=null;this.ge=!1};
var Rc=new dc(function(){return new Qc},function(a){a.reset()},100);function Sc(a,b,c){var d=Rc.get();d.Tb=a;d.uc=b;d.context=c;return d}function Tc(a){if(a instanceof M)return a;var b=new M(Jb);b.yc(2,a);return b}function Uc(a){return new M(function(b,c){c(a)})}function Vc(a,b,c){Wc(a,b,c,null)||Jc(Xb(b,a))}function Xc(a){return new M(function(b,c){var d=a[C],g=[];if(d)for(var k=function(a,c){d--;g[a]=c;0==d&&b(g)},l=function(a){c(a)},p=0,y;y=a[p];p++)Vc(y,Xb(k,p),l);else b(g)})}
function Yc(){var a,b,c=new M(function(c,g){a=c;b=g});return new Zc(c,a,b)}M[t].then=function(a,b,c){null!=a&&cc(a,"opt_onFulfilled should be a function.");null!=b&&cc(b,"opt_onRejected should be a function. Did you pass opt_context as the second argument instead of the third?");return this.sf(Qb(a)?a:null,Qb(b)?b:null,c)};M[t].then=M[t][z];M[t].$goog_Thenable=!0;H=M[t];
H.el=function(a,b,c){null!=a&&cc(a,"opt_onFulfilled should be a function.");null!=b&&cc(b,"opt_onRejected should be a function. Did you pass opt_context as the second argument instead of the third?");this.rf(Sc(a||Jb,b||null,c))};H.hh=function(a,b){return this.sf(null,a,b)};H.rf=function(a){this.Tj()||2!=this.Ka&&3!=this.Ka||this.Xg();this.Hk(a)};
H.sf=function(a,b,c){var d=Sc(null,null,null);xa(d,new M(function(g,k){d.Tb=a?function(b){try{var d=a[r](c,b);g(d)}catch(y){k(y)}}:g;d.uc=b?function(a){try{var d=b[r](c,a);!Ib(d)&&a instanceof Pc?k(a):g(d)}catch(y){k(y)}}:k}));d[ib].D=this;this.rf(d);return d[ib]};H.hl=function(a){L(1==this.Ka);this.Ka=0;this.yc(2,a)};H.il=function(a){L(1==this.Ka);this.Ka=0;this.yc(3,a)};
H.yc=function(a,b){0==this.Ka&&(this==b&&(a=3,b=new TypeError("Promise cannot resolve to itself")),this.Ka=1,Wc(b,this.hl,this.il,this)||(this.Ug=b,this.Ka=a,this.D=null,this.Xg(),3!=a||b instanceof Pc||$c(this,b)))};
function Wc(a,b,c,d){if(a instanceof M)return a.el(b,c,d),!0;var g;if(a)try{g=!!a.$goog_Thenable}catch(k){g=!1}else g=!1;if(g)return a[z](b,c,d),!0;g=typeof a;if("object"==g&&null!=a||"function"==g)try{var l=a[z];if(Qb(l))return ad(a,l,b,c,d),!0}catch(p){return c[r](d,p),!0}return!1}function ad(a,b,c,d,g){function k(a){p||(p=!0,d[r](g,a))}function l(a){p||(p=!0,c[r](g,a))}var p=!1;try{b[r](a,l,k)}catch(y){k(y)}}H.Xg=function(){this.ve||(this.ve=!0,Jc(this.Oi,this))};H.Tj=function(){return!!this.ic};
H.Hk=function(a){L(null!=a.Tb);this.rd?ya(this.rd,a):this.ic=a;this.rd=a};H.Bk=function(){var a=null;this.ic&&(a=this.ic,this.ic=a[ob],ya(a,null));this.ic||(this.rd=null);null!=a&&L(null!=a.Tb);return a};H.Oi=function(){for(var a=null;a=this.Bk();)this.Ni(a,this.Ka,this.Ug);this.ve=!1};H.Ni=function(a,b,c){3==b&&a.uc&&!a.ge&&this.Pk();if(a[ib])a[ib].D=null,bd(a,b,c);else try{a.ge?a.Tb[r](a[mb]):bd(a,b,c)}catch(d){cd[r](null,d)}Rc.put(a)};
function bd(a,b,c){2==b?a.Tb[r](a[mb],c):a.uc&&a.uc[r](a[mb],c)}H.xh=Eb();H.Pk=function(){var a;for(a=this;a&&a.Kd;a=a.D)a.Kd=!1};function $c(a,b){a.Kd=!0;Jc(function(){a.Kd&&(a.xh(b),cd[r](null,b))})}var cd=Dc;function Pc(a){Yb[r](this,a)}K(Pc,Yb);ja(Pc[t],"cancel");function Zc(a,b,c){this.ha=a;this.resolve=b;this.reject=c};
function dd(a,b){this.za=a;this.Vb=b||this.Mf()}var ed=0;H=dd[t];H.id=G("za");H.Fh=Fb("za");H.u=G("Vb");H.Mf=function(){return{}};H.ih=G("Vb");H.Ja=function(){return{id:this.za,value:this.ih()}};H.Rb=function(a){return"#"==a.substr(-1)?this.za:null};function fd(a){return new dd(a.id,a[v])}function gd(a){return new dd(ed++,a||{})}function hd(a){if(null==a)return"";a=new Uint8Array(a);for(var b="",c=0;c<a[C];++c)var d=a[c][D](16),b=b+(2>d[C]?"0"+d:d);return b};
function id(a){this.type=a}function jd(a){dd[r](this,-1,a)}K(jd,dd);
var kd={};I("lf.TransactionType",kd,void 0);kd.READ_ONLY=0;kd.READ_WRITE=1;

function ld(a,b){this.Ta=a;this.jh=b;this.aa=Yc()}H=ld[t];H.sj=G("Ta");H.oa=function(){try{this.Ta.Sh()}catch(a){return Uc(a)}return(0==this.jh?this.Ic():this.mk())[z](J(function(a){this.Ta.oa();return a},this))};H.mk=function(){this.nk();this.lk();return this.Ic()};
H.nk=function(){var a=this.Ta.Yf();a.J()[F](function(b){var c=this.Ta.ga().get(b),c=this.O(c[u](),J(c.mc,c));b=a.get(b);var d=b.Sc().c().map(function(a){return a.id()});0<d[C]&&c[w](d).hh(this.Ie,this);b=b.Uc().c().map(function(a){return a[1]})[Sa](b.Rc().c());c.put(b).hh(this.Ie,this)},this)};H.lk=function(){this.Ta.pj()[F](function(a){var b=this.O(a[u](),fd),c;b.get([-1])[z](function(a){c=a;return b[w]([])})[z](function(){b.put(c);b.put(a.Ja())},J(this.Ie,this))},this)};H.Ie=function(a){this.aa[La](a)};function md(a,b,c,d){c=c||function(a,b){return a==b};d=d||function(b){return a[b]};for(var g=a[C],k=b[C],l=[],p=0;p<g+1;p++)l[p]=[],l[p][0]=0;for(var y=0;y<k+1;y++)l[0][y]=0;for(p=1;p<=g;p++)for(y=1;y<=k;y++)c(a[p-1],b[y-1])?l[p][y]=l[p-1][y-1]+1:l[p][y]=ba.max(l[p-1][y],l[p][y-1]);for(var va=[],p=g,y=k;0<p&&0<y;)c(a[p-1],b[y-1])?(va[Oa](d(p-1,y-1)),p--,y--):l[p-1][y]>l[p][y-1]?p--:y--;return va}function nd(a){return ic(arguments,function(a,c){return a+c},0)}
function od(a){return nd[ub](null,arguments)/arguments[C]}function pd(a){var b=arguments[C];if(2>b)return 0;var c=od[ub](null,arguments);return nd[ub](null,hc(arguments,function(a){return ba.pow(a-c,2)}))/(b-1)}function qd(a){return ba.sqrt(pd[ub](null,arguments))};var rd="StopIteration"in Hb?Hb.StopIteration:{message:"StopIteration",stack:""};function sd(){}ya(sd[t],function(){throw rd;});sd[t].Bc=function(){return this};function td(a){if(a instanceof sd)return a;if("function"==typeof a.Bc)return a.Bc(!1);if(Ob(a)){var b=0,c=new sd;ya(c,function(){for(;;){if(b>=a[C])throw rd;if(b in a)return a[b++];b++}});return c}throw fa("Not implemented");}
function ud(a,b,c){if(Ob(a))try{gc(a,b,c)}catch(d){if(d!==rd)throw d;}else{a=td(a);try{for(;;)b[r](c,a[ob](),void 0,a)}catch(g){if(g!==rd)throw g;}}}function vd(a){if(jc(arguments,function(a){return!a[C]})||!arguments[C])return new sd;var b=new sd,c=arguments,d=uc(0,c[C]);ya(b,function(){if(d){for(var a=hc(d,function(a,b){return c[b][a]}),b=d[C]-1;0<=b;b--){L(d);if(d[b]<c[b][C]-1){d[b]++;break}if(0==b){d=null;break}d[b]=0}return a}throw rd;});return b};function N(a,b){this.g={};this.b=[];this.Qa=this.$=0;var c=arguments[C];if(1<c){if(c%2)throw fa("Uneven number of arguments");for(var d=0;d<c;d+=2)this.set(arguments[d],arguments[d+1])}else a&&this[gb](a)}H=N[t];H.ra=G("$");H.c=function(){this.Gc();for(var a=[],b=0;b<this.b[C];b++)a[x](this.g[this.b[b]]);return a};H.J=function(){this.Gc();return this.b[Sa]()};H.A=function(a){return wd(this.g,a)};H.vd=function(a){for(var b=0;b<this.b[C];b++){var c=this.b[b];if(wd(this.g,c)&&this.g[c]==a)return!0}return!1};
H.Nc=function(a,b){if(this===a)return!0;if(this.$!=a.ra())return!1;var c=b||xd;this.Gc();for(var d,g=0;d=this.b[g];g++)if(!c(this.get(d),a.get(d)))return!1;return!0};function xd(a,b){return a===b}H.Ha=function(){return 0==this.$};ta(H,function(){this.g={};Aa(this.b,0);this.Qa=this.$=0});wa(H,function(a){return wd(this.g,a)?(delete this.g[a],this.$--,this.Qa++,this.b[C]>2*this.$&&this.Gc(),!0):!1});
H.Gc=function(){if(this.$!=this.b[C]){for(var a=0,b=0;a<this.b[C];){var c=this.b[a];wd(this.g,c)&&(this.b[b++]=c);a++}Aa(this.b,b)}if(this.$!=this.b[C]){for(var d={},b=a=0;a<this.b[C];)c=this.b[a],wd(d,c)||(this.b[b++]=c,d[c]=1),a++;Aa(this.b,b)}};H.get=function(a,b){return wd(this.g,a)?this.g[a]:b};H.set=function(a,b){wd(this.g,a)||(this.$++,this.b[x](a),this.Qa++);this.g[a]=b};H.addAll=function(a){var b;a instanceof N?(b=a.J(),a=a.c()):(b=zc(a),a=yc(a));for(var c=0;c<b[C];c++)this.set(b[c],a[c])};
Da(H,function(a,b){for(var c=this.J(),d=0;d<c[C];d++){var g=c[d],k=this.get(g);a[r](b,k,g,this)}});la(H,function(){return new N(this)});H.Bc=function(a){this.Gc();var b=0,c=this.Qa,d=this,g=new sd;ya(g,function(){if(c!=d.Qa)throw fa("The map has changed since the iterator was created");if(b>=d.b[C])throw rd;var g=d.b[b++];return a?g:d.g[g]});return g};function wd(a,b){return aa[t][qb][r](a,b)};
function yd(a){this.Tk=a}f(yd[t],G("Tk"));var zd=new yd("backstore"),Ad=new yd("cache"),Bd=new yd("indexstore"),Cd=new yd("engine"),Dd=new yd("runner"),Ed=new yd("observerregistry"),Fd=new yd("schema");
function Gd(a){if("function"==typeof a.ra)a=a.ra();else if(Ob(a)||Pb(a))a=a[C];else{var b=0,c;for(c in a)b++;a=b}return a}function Hd(a){if("function"==typeof a.c)return a.c();if(Pb(a))return a[Ja]("");if(Ob(a)){for(var b=[],c=a[C],d=0;d<c;d++)b[x](a[d]);return b}return yc(a)}
function Id(a,b,c){if("function"==typeof a[Ua])return a[Ua](b,c);if(Ob(a)||Pb(a))return kc(a,b,c);var d;if("function"==typeof a.J)d=a.J();else if("function"!=typeof a.c)if(Ob(a)||Pb(a)){d=[];for(var g=a[C],k=0;k<g;k++)d[x](k)}else d=zc(a);else d=void 0;for(var g=Hd(a),k=g[C],l=0;l<k;l++)if(!b[r](c,g[l],d&&d[l],a))return!1;return!0};function O(a){this.g=new N;a&&this[gb](a)}function Jd(a){var b=typeof a;return"object"==b&&a||"function"==b?"o"+Rb(a):b.substr(0,1)+a}H=O[t];H.ra=function(){return this.g.ra()};H.add=function(a){this.g.set(Jd(a),a)};H.addAll=function(a){a=Hd(a);for(var b=a[C],c=0;c<b;c++)this.add(a[c])};wa(H,function(a){return this.g[w](Jd(a))});ta(H,function(){this.g[cb]()});H.Ha=function(){return this.g.Ha()};H.contains=function(a){return this.g.A(Jd(a))};H.li=function(a){return Id(a,this[rb],this)};H.c=function(){return this.g.c()};
la(H,function(){return new O(this)});H.Nc=function(a){return this.ra()==Gd(a)&&this.ek(a)};H.ek=function(a){var b=Gd(a);if(this.ra()>b)return!1;!(a instanceof O)&&5<b&&(a=new O(a));return Id(this,function(b){var d=a;if("function"==typeof d[rb])b=d[rb](b);else if("function"==typeof d.vd)b=d.vd(b);else if(Ob(d)||Pb(d))b=0<=fc(d,b);else a:{for(var g in d)if(d[g]==b){b=!0;break a}b=!1}return b})};H.Bc=function(){return this.g.Bc(!1)};
function Kd(a,b){this.za=a;this.Vb=b||{}}function Ld(a){var b=new O;a[F](function(a){b.add(a>>9)});return b.c()}H=Kd[t];H.da=G("za");H.rc=G("Vb");H.ah=function(a){a[F](function(a){this.Vb[a.id()]=a.Ja()},this)};H.Ok=function(a){a[F](function(a){var c=this.Vb;a in c&&delete c[a]},this)};H.Ja=function(){return{id:this.za,value:JSON.stringify(this.Vb)}};function Md(a){return new Kd(a.id,JSON.parse(a[v]))};

function Nd(a,b,c){this.S=a;this.Nb=b;this.Vg=c}H=Nd[t];H.get=function(a){return 0==a[C]?this.ze():this.wj(a)[z](J(function(b){return a.map(function(a){var d=b.get(a>>9);L(d,"Containing page is empty");return this.Nb(d.rc()[a])},this)},this))};H.wj=function(a){var b=new N,c=Yc();a=Ld(a).map(function(a){return new M(function(c,k){var l;try{l=this.S.get(a)}catch(p){k(p);return}za(l,k);sa(l,J(function(a){a=Md(a[Pa][Cb]);b.set(a.da(),a);c()},this))},this)},this);Xc(a)[z](function(){c[Bb](b)});return c.ha};
H.ze=function(){return new M(function(a,b){var c=[],d;try{d=this.S[Fa]()}catch(g){b(g);return}za(d,b);sa(d,J(function(){var b=d[Cb];if(b){var g=Md(b[v]).rc(),p;for(p in g)c[x](this.Nb(g[p]));b[fb]()}else a(c)},this))},this)};H.Wb=function(a){return new M(function(b,c){var d;try{d=a()}catch(g){c(g);return}sa(d,b);za(d,c)},this)};
H.put=function(a){if(0==a[C])return Tc();var b=new N;a[F](function(a){var d;d=a.id()>>9;var g=b.get(d,null);null===g&&(g=this.Vg(this.S[q],d));g.ah([a]);b.set(d,g)},this);a=b.c().map(function(a){return this.Wb(J(function(){return this.S.put(a.Ja())},this))},this);return Xc(a)};
wa(H,function(a){if(0==a[C])return this.Wb(J(function(){return this.S[cb]()},this));var b=new N;a[F](function(a){var d=a>>9,g=b.get(d,null);null===g&&(g=this.Vg(this.S[q],d));g.Ok([a]);b.set(d,g)},this);a=b.c().map(function(a){return this.Wb(J(function(){var b;a:{b=a.rc();for(var g in b){b=!1;break a}b=!0}return b?this.S[Ya](a.da()):this.S.put(a.Ja())},this))},this);return Xc(a)});function Od(a,b,c){a=a.o(Ad);var d=[c<<9,(c+1<<9)-1];b=a.bb(b,d[0],d[1]);c=new Kd(c);c.ah(b);return c}
function Pd(a,b){return new Kd(b)};
function Qd(){};
function Rd(a){this.qa=a.o(Ad);this.H=a.o(Bd);this.s=a.o(Fd)}qa(Rd[t],function(a){a[F](function(a){this.ll(a);this.jl(a)},this)});Rd[t].jl=function(a){var b=a[u]();a.Sc().c()[F](function(a){this.qa[w](b,[a.id()])},this);a.Rc()[F](function(a){this.qa.set(b,[a])},this);a.Uc()[F](function(a){this.qa.set(b,[a[1]])},this)};Rd[t].ll=function(a){var b=this.s[h](a[u]());a.mj()[F](function(a){this.nh(b,a)},this)};
Rd[t].nh=function(a,b){a.Ea().map(function(a){return this.H.get(a.l())},this)[Sa]([this.H.get(a.Ob())])[F](function(a){var d=null===b[1]?null:b[1].Rb(a[u]()),g=null===b[0]?null:b[0].Rb(a[u]());null===g&&null!==d?a.add(d,b[1].id()):null===g||null===d?null!==g&&null===d&&a[w](g,b[0].id()):0!=a.Jc()[wb](g,d)&&(a.add(d,b[1].id()),a[w](g,b[0].id()))})};
var Sd={};I("lf.ConstraintAction",Sd,void 0);Sd.RESTRICT=0;Sd.CASCADE=1;var Td={};I("lf.ConstraintTiming",Td,void 0);Td.IMMEDIATE=0;Td.DEFERRABLE=1;var Ud={};I("lf.Order",Ud,void 0);Ud.DESC=0;Ud.ASC=1;var Vd={};I("lf.Type",Vd,void 0);Vd.ARRAY_BUFFER=0;Vd.BOOLEAN=1;Vd.DATE_TIME=2;Vd.INTEGER=3;Vd.NUMBER=4;Vd.STRING=5;Vd.OBJECT=6;var Wd={0:null,1:!1,2:aa.freeze(new Date(0)),3:0,4:0,5:"",6:null};I("lf.type.DEFAULT_VALUES",Wd,void 0);
function P(a,b){this.code=a;this.message="http://sn.im/2a0j3wn?c="+a;if(1<arguments[C])for(var c=1;c<=ba.min(4,arguments[C]-1);++c)this.message+="&p"+(c-1)+"="+encodeURIComponent(ha(arguments[c][D]()[n](0,64)))}K(P,fa);

function Xd(a){this.H=a.o(Bd);this.s=a.o(Fd)}H=Xd[t];H.Vi=function(a,b){var c=a.Eb().Ee();return null===c?null:this.Ui(c,b)};H.Ui=function(a,b){var c=a.l(),d=b.Rb(c),c=this.H.get(c).get(d);return 0==c[C]?null:c[0]};H.oe=function(a,b){var c=a.Eb().uj();b[F](function(a){c[F](function(b){if(null==a.u()[b[u]()])throw new P(202,b.l());},this)},this)};H.Gf=function(a,b,c){a.Eb().Zf()[F](function(a){a[Ma]==c&&this.ci(a,b)},this)};
H.ci=function(a,b){b[F](function(b){if(Yd(b[0],b[1],a[q])){b=b[1].u()[a.lc];var d=this.bg(a);if(null!==b&&!d.A(b))throw new P(203,a[q]);}},this)};H.bg=function(a){var b=this.s[h](a.eb)[a.wc].Ea()[Ga](function(b){return 1==b.h[C]&&b.h[0].fa[u]()==a.wc})[0];return this.H.get(b.l())};function Yd(a,b,c){return(null===a?null!==b:null===b)||a.Rb(c)!=b.Rb(c)}
H.Hf=function(a,b,c){a=this.s[vb]().Cj(a[u]());null!=a&&a[F](function(a){if(a[Ma]==c){var g=this.H.get(a[q]);b[F](function(b){var c=this.bg(a);if(Yd(b[0],b[1],c[u]())&&g.A(b[0].u()[a.wc]))throw new P(203,a[q]);},this)}},this)};H.me=function(a,b,c){0!=b[C]&&(b=b.map(function(a){return[null,a]}),this.Gf(a,b,c))};H.ne=function(a,b,c){0!=b[C]&&(this.Gf(a,b,c),this.Hf(a,b,c))};H.Ff=function(a,b,c){0!=b[C]&&(b=b.map(function(a){return[a,null]}),this.Hf(a,b,c))};
function Zd(a){this.ib=new N;this.La=new N;this.lb=new N;this.B=a}H=Zd[t];na(H,G("B"));H.Rc=G("ib");H.Uc=G("La");H.Sc=G("lb");H.add=function(a){if(this.lb.A(a.id())){var b=[this.lb.get(a.id()),a];this.La.set(a.id(),b);this.lb[w](a.id())}else this.ib.set(a.id(),a)};H.modify=function(a){var b=a[0],c=a[1];L(b.id()==c.id(),"Row ID mismatch between old/new values.");b=b.id();this.ib.A(b)?this.ib.set(b,c):(this.La.A(b)&&(a=[this.La.get(a[0].id())[0],c]),this.La.set(b,a))};
ra(H,function(a){if(this.ib.A(a.id()))this.ib[w](a.id());else if(this.La.A(a.id())){var b=this.La.get(a.id())[0];this.La[w](a.id());this.lb.set(a.id(),b)}else this.lb.set(a.id(),a)});H.mj=function(){var a=[];this.ib.c()[F](function(b){a[x]([null,b])},this);this.La.c()[F](function(b){a[x](b)},this);this.lb.c()[F](function(b){a[x]([b,null])},this);return a};f(H,function(){return"["+this.ib.J()[D]()+"], ["+this.La.J()[D]()+"], ["+this.lb.J()[D]()+"]"});
H.Dj=function(){var a=new Zd(this.B);this.ib.c()[F](function(b){a[Ya](b)},this);this.lb.c()[F](function(b){a.add(b)},this);this.La.c()[F](function(b){a.modify([b[1],b[0]])},this);return a};H.Ha=function(){return this.ib.Ha()&&this.lb.Ha()&&this.La.Ha()};
function $d(a,b){this.pa=new N;b[F](function(a){this.pa.set(a[u](),a)},this);this.qa=a.o(Ad);this.H=a.o(Bd);this.Ra=new Xd(a);this.Md=new Rd(a);this.We=this.be=!1;this.Bb=new N}H=$d[t];H.Yf=G("Bb");H.pj=function(){var a=[];this.Bb.J().map(function(a){return this.pa.get(a)},this)[F](function(b){b.Xb()&&(b.Ea()[F](function(b){a[x](this.H.get(b.l()))},this),a[x](this.H.get(b[u]()+".#")))},this);return a};H.ga=G("pa");
H.qj=function(){var a=[];this.pa.c()[F](function(b){b.Xb()&&(b.Ea()[F](function(b){a[x](b.l())}),a[x](b[u]()+".#"))});return a};H.xb=function(a,b){this.Fc();this.sd(a);this.Ra.oe(a,b);this.Ra.me(a,b,0);for(var c=0;c<b[C];c++)this.Nd(a,[null,b[c]])};
H.Nd=function(a,b){var c=a[u](),d=this.Bb.get(c,null)||new Zd(c);this.Bb.set(c,d);try{this.Md.nh(a,b)}catch(g){throw this.We=!0,g;}var k=b[0],l=b[1];null===k&&null!==l?(this.qa.set(c,[l]),d.add(l)):null!==k&&null!==l?(this.qa.set(c,[l]),d.modify(b)):null!==k&&null===l&&(this.qa[w](c,[k.id()]),d[Ya](k))};qa(H,function(a,b){this.Fc();this.sd(a);this.Ra.oe(a,b);for(var c=0;c<b[C];c++){var d=b[c],d=[this.qa.get([d.id()])[0],d];this.Ra.ne(a,[d],0);this.Nd(a,d)}});
H.Ke=function(a,b){this.Fc();this.sd(a);this.Ra.oe(a,b);for(var c=0;c<b[C];c++){var d=b[c],g=null,k=this.Ra.Vi(a,d);null!=k?(g=this.qa.get([k])[0],d.Fh(k),this.Ra.ne(a,[[g,d]],0)):this.Ra.me(a,[d],0);this.Nd(a,[g,d])}};wa(H,function(a,b){this.Fc();this.sd(a);this.Ra.Ff(a,b,0);for(var c=0;c<b[C];c++)this.Nd(a,[b[c],null])});H.Sh=function(){this.Bb.c()[F](function(a){var b=this.pa.get(a[u]());this.Ra.me(b,a.Rc().c(),1);this.Ra.Ff(b,a.Sc().c(),1);this.Ra.ne(b,a.Uc().c(),1)},this)};
H.oa=function(){this.Fc();this.be=!0};H.Fc=function(){L(!this.We,"Attemptted to use journal that needs to be rolled back.");L(!this.be,"Attemptted to commit a terminated journal.")};H.Hb=function(){L(!this.be,"Attempted to rollback a terminated journal.");var a=this.Bb.c().map(function(a){return a.Dj()},this);this.Md[Va](a);this.be=!0;this.We=!1};H.sd=function(a){if(!this.pa.A(a[u]()))throw new P(106,a[u]());};
function ae(a,b,c,d){this.f=a;this.w=b;this.Y=null===this.f?!1:c;this.ba=null===this.w?!1:d}H=ae[t];f(H,function(){return(this.Y?"(":"[")+(null===this.f?"unbound":this.f)+", "+(null===this.w?"unbound":this.w)+(this.ba?")":"]")});H.hi=function(){if(null===this.f&&null===this.w)return[];var a=null,b=null;null===this.f||(a=new ae(null,this.f,!1,!this.Y));null===this.w||(b=new ae(this.w,null,!this.ba,!1));return[a,b][Ga](function(a){return null!==a})};
H.reverse=function(){return new ae(this.w,this.f,this.ba,this.Y)};H.Ig=function(a){var b=be(this.f,a.f,!0,this.Y,a.Y);if(0==b)return!0;var c=-1==b?this:a;a=1==b?this:a;return null===c.w||c.w>a.f||c.w==a.f&&!c.ba&&!a.Y};function ce(){return new ae(null,null,!1,!1)}H.dk=function(){return null!=this.f&&this.f==this.w&&!this.Y&&!this.ba};H.contains=function(a){var b=null===this.w||a<this.w||a==this.w&&!this.ba;return(null===this.f||a>this.f||a==this.f&&!this.Y)&&b};
H.Nc=function(a){return this.f==a.f&&this.Y==a.Y&&this.w==a.w&&this.ba==a.ba};function be(a,b,c,d,g){function k(a){return c?a:1==a?-1:1}d=d||!1;g=g||!1;return null===a?null===b?(d?!g:g)?d?k(1):k(-1):0:k(-1):null===b?k(1):a<b?-1:a==b?(d?!g:g)?d?k(1):k(-1):0:1}function de(a,b){var c=be(a.f,b.f,!0,a.Y,b.Y);0==c&&(c=be(a.w,b.w,!1,a.ba,b.ba));return c};
function ee(a,b){this.entries=a;this.G=new O(b);this.Kb=null}H=ee[t];H.ak=function(a){return this.G.Nc(a.G)};function fe(a,b){L(a.ak(b),"Intersection/union operations only apply to compatible relations.")}H.W=function(){return this.G.c()};H.Me=function(){return 1<this.G.ra()};H.Ce=function(){return this[B].map(function(a){return a.xa.u()})};H.Fj=function(){return this[B].map(function(a){return a.xa.id()})};H.Uk=function(a,b){null===this.Kb&&(this.Kb=new N);this.Kb.set(a.l(),b)};
H.qc=function(a){L(null!==this.Kb,"getAggregationResult called before any results have been calculated.");var b=this.Kb.get(a.l(),void 0);L(Ib(b),"Could not find result for "+a.l());return b};H.Rj=function(a){return null!==this.Kb&&this.Kb.A(a.l())};var ge=null;function he(){null===ge&&(ge=new ee([],[]));return ge}
function ie(a){if(0==a[C])return he();for(var b=a[Ka](function(b,c){fe(a[0],c);return b+c[B][C]},0),c=e(b),d=0,b=a.map(function(a){var b=new N;a[B][F](function(a){c[d++]=a;b.set(a.id,a)});return b}),g=new N,k=0;k<c[C];k++)b[Ua](function(a){return a.A(c[k].id)})&&g.set(c[k].id,c[k]);return new ee(g.c(),a[0].G.c())}function je(a){if(0==a[C])return he();var b=new N;a[F](function(c){fe(a[0],c);c[B][F](function(a){b.set(a.id,a)})});return new ee(b.c(),a[0].G.c())}
function ke(a,b){var c=1<b[C],d=a.map(function(a){return new le(a,c)});return new ee(d,b)}function le(a,b){this.xa=a;this.id=me++;this.Ne=b}var me=0;le[t].N=function(a){var b=a.ab();return null!==b&&this.xa.u()[qb](b)?this.xa.u()[b]:this.Ne?this.xa.u()[a.O().sa()][a[u]()]:this.xa.u()[a[u]()]};le[t].ff=function(a,b){var c=a.ab();if(null!=c)this.xa.u()[c]=b;else if(this.Ne){var c=a.O().sa(),d=this.xa.u()[c];null==d&&(d={},this.xa.u()[c]=d);d[a[u]()]=b}else this.xa.u()[a[u]()]=b};
function ne(a,b,c,d){function g(a,b){if(a.Ne){var c=a.xa.u(),d;for(d in c)k[d]=c[d]}else L(!k[qb](b[0]),"Attempted to join table with itself, without using table alias, or same alias "+b[0]+"is reused for multiple tables."),k[b[0]]=a.xa.u()}var k={};g(a,b);g(c,d);a=new dd(-1,k);return new le(a,!0)};
I("lf.bind",function(a){return new oe(a)},void 0);function oe(a){this.ta=a}I("lf.Binder",oe,void 0);oe[t].ub=G("ta");
function pe(){var a=qe();this.Fi=new N(1,re(),2,se(),4,a,3,a,5,te())}Kb(pe);pe[t].Ae=function(a,b){var c=this.Fi.get(a,null);L(null!==c,"Could not find evaluation map for "+a);c=c.get(b,null);L(null!==c,"Could not find evaluator for "+a+", "+b);return c};
function qe(){return new N("between",function(a,b){return a>=b[0]&&a<=b[1]},"eq",function(a,b){return a==b},"gte",function(a,b){return a>=b},"gt",function(a,b){return a>b},"in",function(a,b){return-1!=b[$a](a)},"lte",function(a,b){return a<=b},"lt",function(a,b){return a<b},"neq",function(a,b){return a!=b})}
function te(){return new N("between",function(a,b){return a>=b[0]&&a<=b[1]},"eq",function(a,b){return a==b},"gte",function(a,b){return a>=b},"gt",function(a,b){return a>b},"in",function(a,b){return-1!=b[$a](a)},"lte",function(a,b){return a<=b},"lt",function(a,b){return a<b},"match",function(a,b){return(new RegExp(b)).test(a)},"neq",function(a,b){return a!=b})}
function se(){return new N("between",function(a,b){return a[Ab]()>=b[0][Ab]()&&a[Ab]()<=b[1][Ab]()},"eq",function(a,b){return(null===a?-1:a[Ab]())==(null===b?-1:b[Ab]())},"gte",function(a,b){return a[Ab]()>=b[Ab]()},"gt",function(a,b){return a[Ab]()>b[Ab]()},"in",function(a,b){return b[ab](function(b){return b[Ab]()==a[Ab]()})},"lte",function(a,b){return a[Ab]()<=b[Ab]()},"lt",function(a,b){return a[Ab]()<b[Ab]()},"neq",function(a,b){return(null===a?-1:a[Ab]())!=(null===b?-1:b[Ab]())})}
function re(){return new N("eq",function(a,b){return a==b},"neq",function(a,b){return a!=b})};function ue(a,b){this.wg=a;this.oh=b}ue[t].getKey=G("wg");ue[t].Kj=G("oh");la(ue[t],function(){return new ue(this.wg,this.oh)});function ve(a,b){ue[r](this,a,b);this.i=this.D=null}K(ve,ue);var we=[];H=ve[t];la(H,function(){return new ve(this.getKey(),this.Kj())});H.getParent=G("D");H.og=function(){return!this.ya()};H.ca=function(){return this.i||we};H.sb=function(a){return this.ca()[a]||null};H.ya=function(){return this.ca()[C]};H.oj=function(){for(var a=0,b=this;b[xb]();)a++,b=b[xb]();return a};H.mb=function(){for(var a=this;a[xb]();)a=a[xb]();return a};H.contains=function(a){do a=a[xb]();while(a&&a!=this);return Boolean(a)};
H.zc=function(a,b){if(!1!==a[r](b,this))for(var c=this.ca(),d=0;d<c[C];d++)c[d].zc(a,b)};H.Zg=Fb("D");H.ka=function(a){this.Cc(a,this.i?this.i[C]:0)};H.Cc=function(a,b){L(!a[xb]());a.Zg(this);this.i=this.i||[];L(0<=b&&b<=this.i[C]);pc(this.i,b,0,a)};H.Yd=function(a){var b=this.i&&this.i[a];return b?(b.Zg(null),lc(this.i,a),0==this.i[C]&&(this.i=null),b):null};H.removeChild=function(a){return this.Yd(fc(this.ca(),a))};

function xe(){ve[r](this,"","");this.za=ye++}K(xe,ve);var ye=0;xe[t].da=G("za");xe[t].gf=Fb("za");
function ze(a,b,c){xe[r](this);this.I=a;pa(this,b);this.V=c;this.yd=pe.Be().Ae(this.I.Z(),this.V);this.cb=!1;this.hc=b}K(ze,xe);H=ze[t];H.Lb=function(){var a=new ze(this.I,this[v],this.V);a.Vk(this.hc);a.ae(this.cb);a.gf(this.da());return a};H.tb=function(a){return null!=a?(a[x](this.I),a):[this.I]};H.ae=Fb("cb");H.Vk=Fb("hc");H.Df=function(){var a=!1;this[v]instanceof oe||(a="array"==Lb(this[v])?!this[v][ab](function(a){return a instanceof oe}):!0);if(!a)throw new P(501);};
H.eval=function(a){this.Df();if("in"==this.V)return this.Bi(a);var b=a[B][Ga](function(a){return this.yd(a.N(this.I),this[v])!=this.cb},this);return new ee(b,a.W())};Ba(H,function(a){if(this.hc instanceof oe){var b=this.hc.ub();if(a[C]<=b)throw new P(510);pa(this,a[b])}else"array"==Lb(this.hc)&&pa(this,this.hc.map(function(b){if(b instanceof oe){if(a[C]<=b.ub())throw new P(510);return a[b.ub()]}return b}))});
H.Bi=function(a){L("in"==this.V,"ValuePredicate#evalAsIn_() called for wrong predicate type.");var b=new O(this[v]),c=J(function(a){return b[rb](a)!=this.cb},this),d=a[B][Ga](function(a){return c(a.N(this.I))},this);return new ee(d,a.W())};f(H,function(){return"value_pred("+this.I.l()+" "+this.V+(this.cb?"(complement)":"")+" "+this[v]+")"});H.ng=function(){this.Df();return null!==this[v]&&("between"==this.V||"eq"==this.V||"gt"==this.V||"gte"==this.V||"lt"==this.V||"lte"==this.V)};
H.fl=function(){L(this.ng(),"Could not convert predicate to key range.");var a=null;"between"==this.V?a=new ae(this[v][0],this[v][1],!1,!1):"eq"==this.V?(a=this[v],a=new ae(a,a,!1,!1)):a="gte"==this.V?new ae(this[v],null,!1,!1):"gt"==this.V?new ae(this[v],null,!0,!1):"lte"==this.V?new ae(null,this[v],!1,!1):new ae(null,this[v],!1,!0);return this.cb?a.hi():[a]};
function Ae(a){this.fa=a;this.Hc=this.va=null}Ae[t].Gd=function(a){null===this.va&&null!=this.C&&(this.va=Be(this.C));a=this.va.get(a,null);L(null!==a);return a};function Be(a){var b=new N;a.zc(function(a){b.set(a.da(),a)});return b}Ae[t].td=function(a){a.C&&(this.C=a.C.Lb());this.Hc=a};Ba(Ae[t],function(){L(null==this.Hc);return this});Ae[t].je=function(a){var b=this.C;null!=b&&b.zc(function(b){b instanceof ze&&b[E](a)})};
function Ce(a){Ae[r](this,a)}K(Ce,Ae);function De(a){var b="";a[F](function(c,d){b+=c.I.l()+" ";b+=1==c.ob?"ASC":"DESC";d<a[C]-1&&(b+=", ")});return b}Ce[t].ga=function(){return new O(this.f)};la(Ce[t],function(){var a=new Ce(this.fa);a.td(this);this.h&&(a.h=this.h[n]());this.f&&(a.f=this.f[n]());a.na=this.na;a.ja=this.ja;this.K&&(a.K=this.K[n]());this.ma&&(a.ma=this.ma[n]());this.Sb&&(a.Sb=this.Sb);this.cc&&(a.cc=this.cc);a.vc=this.vc;return a});
Ba(Ce[t],function(a){Ce.Jb[E][r](this,a);null!=this.Sb&&(this.na=a[this.Sb.ub()]);null!=this.cc&&(this.ja=a[this.cc.ub()]);this.je(a);return this});
function Ee(a,b){this.Ca=a;this.pa=b}Ee[t].mb=G("Ca");Ee[t].Sf=Gb("plan description");Ee[t].ga=G("pa");function Fe(a){var b=new O;a[F](function(a){b[gb](a.ga())});return b};

function Ge(a,b){this.global=a;this.Cb=a.o(zd);this.Wd=b.map(function(a){return a[mb]});this.Lg=b.map(function(a){return a.Xe});this.Jf=Fe(this.Lg);this.kh=this.xi();this.Zb=Yc()}H=Ge[t];H.xi=function(){return this.Wd[ab](function(a){return!(a instanceof Ce)})?1:0};
ma(H,function(){var a=new $d(this[Wa],this.Jf.c()),b=[],c=this.Lg[n](),d=J(function(){var g=c[pb]();if(g){var k=this.Wd[b[C]];return g.mb()[Qa](a,k)[z](function(a){b[x](a[0]);return d()})}return Tc()},this);return d()[z](J(function(){return this.Cb.Mb(this.kh,a).oa()},this))[z](J(function(){this.Ue(b);return b},this),J(function(b){a.Hb();throw b;},this))});H.Z=G("kh");H.ga=G("Jf");H.Vc=G("Zb");H.da=function(){return Rb(this)};H.Ue=Eb();
function He(a,b){Ge[r](this,a,b);this.Fb=a.o(Ed)}K(He,Ge);Ea(He[t],Gb(0));He[t].Ue=function(a){this.Wd[F](function(b,c){this.Fb.mh(b,a[c])},this)};
function Ie(a,b){this.m=a;this.Fb=a.o(Ed);this.Ya=a.o(Dd);this.Md=new Rd(a);this.Bb=b;var c=a.o(Fd),d=this.Bb.map(function(a){return c[h](a[u]())});this.pa=new O(d);this.Zb=Yc()}H=Ie[t];ma(H,function(){this.Md[Va](this.Bb);this.gd();return Tc()});H.Z=Gb(1);H.ga=G("pa");H.Vc=G("Zb");H.da=function(){return Rb(this)};Ea(H,Gb(1));H.gd=function(){var a=this.Fb.He(this.pa.c());0!=a[C]&&(a=new He(this.m,a),this.Ya.$b(a))};
function Je(a){this.m=a;this.Cb=a.o(zd);this.Ya=a.o(Dd)}Je[t].bl=function(){this.Cb.subscribe(this.Se[E](this))};Je[t].Se=function(a){a=new Ie(this.m,a);this.Ya.$b(a)};


function Q(a,b){this.Qa=a;this.j=b;this.hb=new N}I("lf.backstore.FirebaseRawBackStore",Q,void 0);H=Q[t];H.Hd=G("j");H.Id=function(){throw new P(351);};function Ke(a,b){var c=Yc(),d=a;b[C]&&(d=a[ib](b));d[Ha]("value",function(a){c[Bb](a.val())},function(a){c[La](a)});return c.ha}function Le(a,b,c){function d(a){a?g[La](a):g[Bb]()}c=c||!1;var g=Yc();c?a.set(b,d):a[Va](b,d);return g.ha}
H.Fa=function(a){return Ke(this.j,"@rev/R")[z](function(a){this.Xa=a;return Ke(this.j,"@table")}[E](this))[z](function(b){var c=0,d;for(d in b)this.hb.set(d,b[d]),b[d]>c&&(c=b[d]);a.Za()[F](function(a){this.hb.A(a[u]())||(b[a[u]()]=++c)},this);d=this.j[ib]("@table");return Le(d,b)}[E](this))};
H.ce=function(a,b){var c=this.hb.get(a);return null!=c?function(){var a={},g=Yc();this.j[bb]("T").equalTo(c)[Ha]("value",function(c){c[F](function(c){var g=b(c.val());a[da(c.key(),10)]=g});g[Bb](a)});return g.ha}[r](this)[z](function(a){a["@rev"]={R:++this.Xa};return Le(this.j,a)}[E](this)):Tc()};H.Lc=function(a){return this.ce(a,Gb(null))[z](function(){this.hb[w](a);return Le(this.j[ib]("@table/"+a),null,!0)}[E](this))};Q[t].dropTable=Q[t].Lc;
Q[t].Dc=function(a,b,c){return this.ce(a,function(a){var g=a.P;g[b]=c;return{R:this.Xa+1,T:a.T,P:g}}[E](this))};Q[t].addTableColumn=Q[t].Dc;Q[t].Mc=function(a,b){return this.ce(a,function(a){var d=a.P;delete d[b];return{R:this.Xa+1,T:a.T,P:d}}[E](this))};Q[t].dropTableColumn=Q[t].Mc;Q[t].fd=function(a,b,c){return this.ce(a,function(a){var g=a.P;g[c]=g[b];delete g[b];return{R:this.Xa+1,T:a.T,P:g}}[E](this))};Q[t].renameTableColumn=Q[t].fd;Q[t].Db=function(){throw new P(351);};Q[t].createRow=Q[t].Db;
Q[t].Yc=G("Qa");Q[t].getVersion=Q[t].Yc;Q[t].nc=function(a){var b=Yc();a=this.hb.get(a);this.j[bb]("T").equalTo(a)[Ha]("value",function(a){var d=[];a[F](function(a){d[x](a.val().P)});b[Bb](d)});return b.ha};ka(Q[t],function(){var a={},b=this.hb.J().map(function(b){return this.nc(b)[z](function(d){a[b]=d})}[E](this));return Xc(b)[z](function(){return a})});ka(Q[t],Q[t].dump);
function Me(a,b,c){ld[r](this,c,b);this.j=a}K(Me,ld);Me[t].O=function(a){return this.j.Wc(a)};
Me[t].Ic=function(){var a=this.sj().Yf();if(0==a.ra())this.aa[Bb]();else{var b=this.j.Ej()+1;this.j.$g(b);var c={"@rev":{R:b}};a[F](function(a){var g=this.j.eg(a[u]());a.Rc()[F](function(a,d){c[d]={R:b,T:g,P:a.u()}});a.Uc()[F](function(a,d){c[d]={R:b,T:g,P:a[1].u()}});a.Sc()[F](function(a,b){c[b]=null})},this);this.j.Bj()[Va](c,function(c){if(null===c)this.aa[Bb]();else this.j.$g(b-1),c=a.c().map(function(a){return this.j.Qg(a[u]())},this),Xc(c)[z](this.aa[La][E](this.aa),this.aa[La][E](this.aa))}[E](this))}return this.aa.ha};
function Ne(){this.rb=new N}H=Ne[t];H.Ge=function(a){if(0==a[C])return this.rb.c();var b=[];a[F](function(a){a=this.rb.get(a,null);null===a||b[x](a)},this);return b};H.getData=G("rb");H.get=function(a){return Tc(this.Ge(a))};H.Ye=function(a){a[F](function(a){this.rb.set(a.id(),a)},this)};H.put=function(a){this.Ye(a);return Tc()};H.Rg=function(a){0==a[C]||a[C]==this.rb.ra()?this.rb[cb]():a[F](function(a){this.rb[w](a)},this)};wa(H,function(a){this.Rg(a);return Tc()});
H.tj=function(){return this.rb.Ha()?0:this.rb.J()[Ka](function(a,b){return a>b?a:b},0)};
function Oe(a,b){this.s=a;this.wh=b;this.ed=new N;this.Xa=-1;this.G=new N;this.hb=new N;this.ke=null}H=Oe[t];H.Ej=G("Xa");H.$g=Fb("Xa");
H.Fa=function(a){this.j=this.wh[ib](this.s[q]());var b=a||function(){return Tc()};return Ke(this.j,"@db/version")[z](function(a){return null===a?Le(this.j,this.mi(),!0)[z](function(){var a=new Q(0,this.j);return b(a)}[E](this)):a==this.s[sb]()?Ke(this.j,"@rev/R")[z](function(a){this.Xa=a;return Ke(this.j,"@table")}[E](this))[z](function(a){for(var b in a)this.hb.set(b,a[b]);a=this.s.Za().map(function(a){return this.Qg(a[u]())},this);return Xc(a)}[E](this))[z](function(){this.Wj();this.Ag();return Tc()}[E](this)):
this.Ve(a,b)[z](function(){return this.Fa()}[E](this))}[E](this))};H.Ve=function(a,b){var c=new Q(a,this.j);return c.Fa(this.s)[z](function(){return this.kl()}[E](this))[z](function(){return b(c)})[z](function(){var a=this.j[ib]("@db");return Le(a,{version:this.s[sb]()},!0)}[E](this))};H.kl=function(){return Tc()};H.Ag=function(){this.j.off();this.j.on("child_removed",this.uk[E](this));this.le&&(this.le.off(),this.ed[cb]());this.le=this.j[bb]("R").startAt(this.Xa+1);this.le.on("value",this.Se[E](this))};
H.Wj=function(){ed=this.G.c().map(function(a){return a.tj()})[Ka](function(a,b){return a>b?a:b},0)+1};H.uk=function(a){var b=a.val(),c=this.ed.get(b.T,null);null===c&&(c=new O,this.ed.set(b.T,c));c.add(da(a.key(),10))};H.Se=function(a){var b=a[ib]("@rev/R").val();null!=b&&b!=this.Xa&&(this.Xa=b,a=this.aj(a),a[F](function(a){var b=this.G.get(a[u]()),g=a.Sc().J();g[C]&&b.Rg(g);var k=a.Rc().c();a.Uc()[F](function(a){k[x](a[1])});b.Ye(k)},this),a[C]&&this.cd(a),this.Ag())};
H.aj=function(a){var b=new O,c=new N;this.hb[F](function(a,g){var k=this.G.get(g),l=new Zd(g);if(this.ed.A(a)){var p=this.ed.get(a).c();b[gb](p);k.Ge(p)[F](function(a){l[Ya](a)})}c.set(a,l)}[E](this));a[F](function(a){if("@rev"!=a.key()){var g=da(a.key(),10);if(!b[rb](g)){a=a.val();var k=c.get(a.T),l=this.G.get(k[u]());l.getData().A(g)?k.modify([l.Ge([g])[0],new dd(g,a.P)]):k.add(new dd(g,a.P))}}}[E](this));return c.c()[Ga](function(a){return!a.Ha()})};
H.Qg=function(a){var b=Yc(),c=this.eg(a);this.j[bb]("T").equalTo(c)[Ha]("value",function(c){var g=new Ne,k=[];c[F](function(a){k[x](new dd(da(a.key(),10),a.val().P))});g.Ye(k);this.G.set(a,g);b[Bb]()}[E](this));return b.ha};H.eg=function(a){return this.hb.get(a)};H.mi=function(){var a={};a["@db"]={version:this.s[sb]()};a["@rev"]={R:1};this.Xa=1;a["@table"]={};this.s.Za()[F](function(b,c){var d=b[u]();a["@table"][d]=c;this.G.set(d,new Ne);this.hb.set(d,c)},this);return a};
H.Mb=function(a,b){return new Me(this,a,b)};H.Wc=function(a){var b=this.G.get(a,null);if(null!==b)return b;throw new P(101,a);};H.Bj=G("j");oa(H,Eb());Ca(H,Fb("ke"));H.cd=function(a){null!=this.ke&&this.ke(a)};
function R(a,b,c,d){this.j=b;this.Pa=c;this.Qa=a;this.pd=d}I("lf.backstore.IndexedDBRawBackStore",R,void 0);R[t].Hd=G("j");R[t].getRawDBInstance=R[t].Hd;R[t].Id=G("Pa");R[t].getRawTransaction=R[t].Id;R[t].Lc=function(a){return new M(function(b,c){try{this.j.deleteObjectStore(a)}catch(d){c(d);return}b()},this)};R[t].dropTable=R[t].Lc;
R[t].yk=function(a,b,c){return new M(function(d,g){var k;try{var l=this.Pa[tb](a);k=l[Fa]()}catch(p){g(p);return}sa(k,function(){var a=k[Cb];a?(b(a),a[fb]()):(c(l),d())});za(k,g)},this)};function Pe(a){var b=null;return b=a instanceof ArrayBuffer?hd(a):a instanceof Date?a[Ab]():a}R[t].lf=function(a,b){function c(a){var c=Md(a[v]),d=c.rc(),p;for(p in d){var y=fd(d[p]);b(y);d[p]=y.Ja()}a[Va](c.Ja())}function d(a){var c=fd(a[v]);b(c);a[Va](c.Ja())}return this.yk(a,this.pd?c:d,Eb())};
R[t].Dc=function(a,b,c){var d=Pe(c);return this.lf(a,function(a){a.u()[b]=d})};R[t].addTableColumn=R[t].Dc;R[t].Mc=function(a,b){return this.lf(a,function(a){delete a.u()[b]})};R[t].dropTableColumn=R[t].Mc;R[t].fd=function(a,b,c){return this.lf(a,function(a){a.u()[c]=a.u()[b];delete a.u()[b]})};R[t].renameTableColumn=R[t].fd;
R[t].Ij=function(a){var b=[];return new M(function(c,d){var g;try{g=this.Pa[tb](a)[Fa]()}catch(k){d(k);return}sa(g,J(function(){var a=g[Cb];if(a){if(this.pd){var d=Md(a[v]).rc(),k;for(k in d)b[x](d[k])}else b[x](a[v]);a[fb]()}else c(b)},this));za(g,d)},this)};R[t].Db=function(a){var b={};wc(a,J(function(a,d){b[d]=Pe(a)},this));return gd(b)};R[t].createRow=R[t].Db;R[t].Yc=G("Qa");R[t].getVersion=R[t].Yc;
ka(R[t],function(){for(var a=this.j[Ia],b=[],c=0;c<a[C];++c){var d=a[Na](c);b[x](this.nc(d))}return Xc(b)[z](function(b){var c={};b[F](function(b,d){c[a[Na](d)]=b});return c})});ka(R[t],R[t].dump);R[t].nc=function(a){return this.Ij(a)[z](function(a){return a.map(function(a){return a[v]})})};
function Qe(a,b){this.S=a;this.Nb=b}H=Qe[t];H.get=function(a){if(0==a[C])return this.ze();a=a.map(function(a){return new M(function(c,d){var g;try{g=this.S.get(a)}catch(k){d(k);return}za(g,d);sa(g,J(function(a){c(this.Nb(a[Pa][Cb]))},this))},this)},this);return Xc(a)};H.ze=function(){return new M(function(a,b){var c=[],d;try{d=this.S[Fa]()}catch(g){b(g);return}za(d,b);sa(d,J(function(){var b=d[Cb];b?(c[x](this.Nb(b[v])),b[fb]()):a(c)},this))},this)};
H.Wb=function(a){return new M(function(b,c){var d;try{d=a()}catch(g){c(g);return}sa(d,b);za(d,c)},this)};H.put=function(a){if(0==a[C])return Tc();a=a.map(function(a){return this.Wb(J(function(){return this.S.put(a.Ja())},this))},this);return Xc(a)};
wa(H,function(a){return new M(function(b,c){var d=this.S.count();sa(d,J(function(d){if(0==a[C]||d[Pa][Cb]==a[C])return this.Wb(J(function(){return this.S[cb]()},this))[z](b,c);d=a.map(function(a){return this.Wb(J(function(){return this.S[Ya](a)},this))},this);Xc(d)[z](b,c)},this));za(d,c)},this)});
function Re(a,b,c,d,g){ld[r](this,c,d);this.m=a;this.Pa=b;this.pd=g;this.Pa.oncomplete=J(this.aa[Bb],this.aa);this.Pa.onabort=J(this.aa[La],this.aa)}K(Re,ld);Re[t].O=function(a,b,c){return this.pd?(c=null!=c?c:0,a=this.Pa[tb](a),new Nd(a,b,0==c?Xb(Od,this.m):Pd)):new Qe(this.Pa[tb](a),b)};Re[t].Ic=function(){return this.aa.ha};
function Se(a,b){this.m=a;this.s=b;this.qd=b.Mg().zi||!1}H=Se[t];H.Fa=function(a){var b=ca.indexedDB||ca.mozIndexedDB||ca.webkitIndexedDB||ca.msIndexedDB;if(null==b)throw new P(352);var c=a||function(){return Tc()};return new M(function(a,g){var k;try{k=b.open(this.s[q](),this.s[sb]())}catch(l){g(l);return}za(k,g);k.onupgradeneeded=J(function(a){this.xk(c,a)[z](Eb(),g)},this);sa(k,J(function(b){this.j=b[Pa][Cb];this.ef()[z](J(function(b){ed=b+1;a(this.j)},this))},this))},this)};
H.xk=function(a,b){var c=b[Pa][Cb],d=b[Pa][kb],g=new R(b.oldVersion,c,d,this.qd);this.Nk(c,d);this.si(c,d);return a(g)};H.Nk=function(a){for(var b=[],c=0;c<a[Ia][C];++c){var d=a[Ia][Na](c);-1!=d[$a](".")&&b[x](d)}b[F](function(b){try{a.deleteObjectStore(b)}catch(c){}})};H.si=function(a,b){this.s.Za()[F](Xb(this.oi,a,b),this)};H.oi=function(a,b,c){a[Ia][rb](c[u]())||a.createObjectStore(c[u](),{keyPath:"id"});c.Xb()&&(c.Ea()[F](function(c){this.Kc(a,b,c.l(),"btree")},this),this.Kc(a,b,c.Ob(),"rowid"))};
H.Kc=function(a,b,c,d){a[Ia][rb](c)||(a.createObjectStore(c,{keyPath:"id"}),a=b[tb](c),(this.qd?new Nd(a,fd,Pd):new Qe(a,fd)).put([new jd(new id(d))]))};H.Mb=function(a,b){var c=b.ga().c().map(function(a){return a[u]()});b.qj()[F](function(a){c[x](a)});var d=this.j[kb](c,0==a?"readonly":"readwrite");return new Re(this.m,d,b,a,this.qd)};
H.ef=function(a){function b(){if(0==c[C])return Tc();var a=c[pb]();return l(a)[z](b)}var c=this.s.Za().map(function(a){return a[u]()}),d=this.j,g=0,k=J(function(a){return this.qd?(a=Md(a[v]),zc(a.rc())[Ka](function(a,b){return ba.max(a,b)},0)):a.key},this),l=J(function(b){return new M(function(c,l){var Tb;try{Tb=(a||d[kb]([b]))[tb](b)[Fa](null,"prev")}catch(jh){l(jh);return}sa(Tb,function(a){(a=a[Pa][Cb])&&(g=ba.max(g,k(a)));c(g)});za(Tb,function(){c(g)})},this)},this);return new M(function(a){b()[z](function(){a(g)})})};
oa(H,function(){this.j[Ra]()});H.Wc=function(){throw new P(511);};Ca(H,Eb());H.cd=Eb();



function Te(a,b,c){ld[r](this,c,b);this.S=a;0==b&&this.aa[Bb]()}K(Te,ld);Te[t].O=function(a){return this.S.Wc(a)};Te[t].Ic=function(){this.aa[Bb]();return this.aa.ha};
function Ue(a){this.s=a;this.G=new N}H=Ue[t];H.Fa=function(){this.s.Za()[F](this.Xj,this);return Tc()};H.Wc=function(a){var b=this.G.get(a,null);if(null===b)throw new P(101,a);return b};H.Mb=function(a,b){return new Te(this,a,b)};H.Kf=function(a){if(!this.G.A(a)){var b=new Ne;this.G.set(a,b);return b}return null};H.Xj=function(a){this.Kf(a[u]());a.Xb()&&(a.Ea()[F](function(a){this.Kc(a.l(),"btree")},this),this.Kc(a.Ob(),"rowid"))};H.Kc=function(a,b){var c=this.Kf(a);null===c||c.put([new jd(new id(b))])};
oa(H,Eb());Ca(H,Eb());H.cd=Eb();
function Ve(a){Ue[r](this,a);this.Rd=null}K(Ve,Ue);Ca(Ve[t],function(a){null===this.Rd&&(this.Rd=a)});Ve[t].cd=function(a){null===this.Rd||this.Rd(a)};
function We(a,b,c){this.Pa=a;this.B=b;this.Nb=c}We[t].get=function(a){var b=this.Nb;this.Pa.Ma("SELECT id, value FROM "+this.B+" "+(0==a[C]?"":"WHERE id IN ("+a[m](",")+")"),[],function(a){for(var d=a[yb][C],g=e(d),k=0;k<d;++k)g[k]=b({id:a[yb][Na](k).id,value:JSON.parse(a[yb][Na](k)[v])});return g});return this.Pa.oa()};
We[t].put=function(a){if(0==a[C])return Tc();var b="INSERT OR REPLACE INTO "+this.B+"(id, value) VALUES (?, ?)";a[F](function(a){this.Pa.Ma(b,[a.id(),JSON.stringify(a.u())])},this);return Tc()};wa(We[t],function(a){this.Pa.Ma("DELETE FROM "+this.B+" "+(0==a[C]?"":"WHERE id IN ("+a[m](",")+")"),[]);return Tc()});
function Xe(a,b,c){ld[r](this,b,c);this.j=a;this.G=new N;this.re=[]}K(Xe,ld);Xe[t].O=function(a,b){var c=this.G.get(a,null);null===c&&(c=new We(this,a,b),this.G.set(a,c));return c};Xe[t].Ma=function(a,b,c){this.re[x]({cl:a,zk:b,transform:c})};
Xe[t].Ic=function(){var a,b,c=this.aa[La][E](this.aa),d=function(a,b){this.aa[La](b)}[E](this),g=J(function(c,l){a=l;if(this.re[C]){var p=this.re[pb]();b=p.transform;c.executeSql(p.cl,p.zk,g,d)}else p=a,null!=b&&null!=a&&(p=b(a)),this.aa[Bb](p)},this);0==this.jh?this.j.readTransaction(g,c):this.j[kb](g,c);return this.aa.ha};
function S(a,b,c){this.j=c;this.m=a;this.Qa=b}I("lf.backstore.WebSqlRawBackStore",S,void 0);S[t].Hd=G("j");S[t].getRawDBInstance=S[t].Hd;S[t].Id=function(){throw new P(356);};S[t].getRawTransaction=S[t].Id;S[t].xd=function(){return new Xe(this.j,new $d(this.m,[]),1)};S[t].Lc=function(a){var b=this.xd();b.Ma("DROP TABLE "+a,[]);return b.oa()};S[t].dropTable=S[t].Lc;
S[t].nc=function(a){var b=this.xd();b.Ma("SELECT id, value FROM "+a,[]);return b.oa()[z](function(a){for(var b=a[yb][C],g=e(b),k=0;k<b;++k)g[k]={id:a[yb][Na](k).id,value:JSON.parse(a[yb][Na](k)[v])};return Tc(g)})};S[t].kf=function(a,b){var c=this.xd(),d="UPDATE "+a+" SET value=? WHERE id=?";return this.nc(a)[z](function(a){a[F](function(a){a=b(a);c.Ma(d,[JSON.stringify(a[v]),a.id])});return c.oa()})};S[t].Dc=function(a,b,c){var d=Pe(c);return this.kf(a,function(a){a[v][b]=d;return a})};
S[t].addTableColumn=S[t].Dc;S[t].Mc=function(a,b){return this.kf(a,function(a){delete a[v][b];return a})};S[t].dropTableColumn=S[t].Mc;S[t].fd=function(a,b,c){return this.kf(a,function(a){a[v][c]=a[v][b];delete a[v][b];return a})};S[t].renameTableColumn=S[t].fd;S[t].Db=function(a){var b={},c;for(c in a)b[c]=Pe(a[c]);return gd(b)};S[t].createRow=S[t].Db;S[t].Yc=G("Qa");S[t].getVersion=S[t].Yc;
function Ye(a){a.Ma('SELECT tbl_name FROM sqlite_master WHERE type="table"',[],function(a){for(var c=e(a[yb][C]),d=0;d<c[C];++d)c[d]=a[yb][Na](d).tbl_name;return c})}ka(S[t],function(){var a=Yc(),b=this.xd();Ye(b);var c={};b.oa()[z](J(function(b){b=b[Ga](function(a){return"__lf_ver"!=a&&"__WebKitDatabaseInfoTable__"!=a}).map(function(a){return this.nc(a)[z](function(b){c[a]=b})},this);Xc(b)[z](function(){a[Bb](c)})},this));return a.ha});ka(S[t],S[t].dump);
function Ze(a,b,c){this.m=a;this.s=b;this.Zk=c||4194304}H=Ze[t];H.Bd=function(){return new $d(this.m,[])};H.Fa=function(a){if(null==ca.openDatabase)throw new P(353);var b=a||function(){return Tc()};return new M(J(function(a,d){try{var g=ca.openDatabase(this.s[q](),"",this.s[q](),this.Zk);if(null!=g)this.j=g,this.di(b)[z](a,d);else throw new P(354);}catch(k){d(k)}},this))};
H.di=function(a){var b=Yc(),c=new Xe(this.j,this.Bd(),1);c.Ma("CREATE TABLE IF NOT EXISTS __lf_ver(id INTEGER PRIMARY KEY, v INTEGER)",[]);c.Ma("SELECT v FROM __lf_ver WHERE id = 0",[]);c.oa()[z](J(function(c){var g=0;c[yb][C]&&(g=c[yb][Na](0).v);g<this.s[sb]()?this.Ve(a,g)[z](b[Bb][E](b)):g>this.s[sb]()?b[La](new P(108)):b[Bb]()},this));return b.ha};H.Mb=function(a,b){if(null!=this.j)return new Xe(this.j,b,a);throw new P(2);};oa(H,Eb());H.Wc=function(){throw new P(512);};
H.Dg=function(){throw new P(355);};Ca(H,function(){this.Dg()});H.cd=function(){this.Dg()};H.Ve=function(a,b){var c=Yc();this.Ck()[z](J(function(){a(new S(this.m,b,this.j))[z](J(function(){return this.ef()},this))[z](c[Bb][E](c))},this),c[La][E](c));return c.ha};
H.Ck=function(){var a=this.s.Za(),b=new Xe(this.j,this.Bd(),1),c=new Xe(this.j,this.Bd(),1);b.Ma("INSERT OR REPLACE INTO __lf_ver VALUES (0, ?)",[this.s[sb]()]);Ye(b);return b.oa()[z](function(b){b[Ga](function(a){return-1!=a[$a](".")})[F](function(a){c.Ma("DROP TABLE "+a,[])});var g=b[Ga](function(a){return-1==a[$a](".")});a.map(function(a){return a[u]()})[Ga](function(a){return-1==g[$a](a)})[F](function(a){c.Ma("CREATE TABLE "+a+"(id INTEGER PRIMARY KEY, value TEXT)",[])});return c.oa()})};
H.ef=function(){var a=0,b=Yc(),c=J(function(b){var c=new Xe(this.j,this.Bd(),0);c.Ma("SELECT MAX(id) FROM "+b,[]);return c.oa()[z](function(b){b=b[yb][Na](0)[0];a=ba.max(b,a)})},this),d=this.s.Za().map(function(a){return c(a[u]())});Xc(d)[z](function(){b[Bb](a)},function(a){b[La](a)});return b.ha};

function $e(){this.g=new N;aa.defineProperty(this,"size",{get:function(){return this.g.ra()}})}ta($e[t],function(){this.g[cb]()});ta($e[t],$e[t][cb]);ra($e[t],function(a){return this.g[w](a)});$e[t]["delete"]=$e[t][Ya];Da($e[t],function(a,b){return this.g[F](a,b)});Da($e[t],$e[t][F]);$e[t].get=function(a){return this.g.get(a)};$e[t].get=$e[t].get;$e[t].has=function(a){return this.g.A(a)};$e[t].has=$e[t].has;$e[t].set=function(a,b){return this.g.set(a,b)};$e[t].set=$e[t].set;
var af=ca.Map&&ca.Map[t][db]&&ca.Map[t][F]?ca.Map:$e;function bf(a){if(a instanceof $e)return a.g.J();var b=0,c=e(a[Db]);a[F](function(a,g){c[b++]=g});return c}function cf(a){if(a instanceof $e)return a.g.c();var b=0,c=e(a[Db]);a[F](function(a){c[b++]=a});return c};
function df(a){this.ac=new O(a);aa.defineProperty(this,"size",{get:function(){return this.ac.ra()}})}df[t].add=function(a){this.ac.add(a)};df[t].add=df[t].add;ta(df[t],function(){this.ac[cb]()});ta(df[t],df[t][cb]);ra(df[t],function(a){return this.ac[w](a)});df[t]["delete"]=df[t][Ya];Da(df[t],function(a,b){this.ac.c()[F](a,b)});df[t].has=function(a){return this.ac[rb](a)};df[t].has=df[t].has;var ef=ca.Set&&ca.Set[t][db]&&ca.Set[t][F]?ca.Set:df;
function ff(a){if(a instanceof df)return a.ac.c();var b=0,c=e(a[Db]);a[F](function(a){c[b++]=a});return c};
function gf(){this.g=new af;this.fh=new af}H=gf[t];H.Jd=function(a){var b=this.fh.get(a);Ib(b)||(b=new ef,this.fh.set(a,b));return b};H.set=function(a,b){var c=this.Jd(a);b[F](J(function(a){this.g.set(a.id(),a);c.add(a.id())},this))};H.get=function(a){return a.map(J(function(a){return this.g.get(a)||null},this))};
H.bb=function(a,b,c){var d=[],g=ba.min(b,c),k=ba.max(b,c);a=this.Jd(a);if(a[Db]<k-g)a[F](function(a){a>=g&&a<=k&&(a=this.g.get(a),L(null!=a,"Inconsistent cache"),d[x](a))},this);else for(b=g;b<=k;++b)a.has(b)&&(c=this.g.get(b),L(null!=c,"Inconsistent cache"),d[x](c));return d};wa(H,function(a,b){var c=this.Jd(a);b[F](function(a){this.g[Ya](a);c[Ya](a)},this)});H.ra=function(a){return null!=a?this.Jd(a)[Db]:this.g[Db]};
function hf(a,b,c,d){a=b?a.reverse():a;if(null==c&&null==d)return a;c=ba.min(Ib(c)?c:a[C],a[C]);if(0==c)return[];d=ba.min(d||0,a[C]);return a[n](d,d+c)};
function jf(a,b,c,d){this.B=a;this.M=b;this.nf=c;if(d){a=511;a*=a*a;if(d[C]>=a)throw new P(6,a);d=kf(this,d);this.wa=d=mf(d)}else this[cb]()}var nf=[];H=jf[t];na(H,G("B"));f(H,function(){return this.wa[D]()});H.add=function(a,b){this.wa=this.wa.xb(a,b)};H.set=function(a,b){this.wa=this.wa.xb(a,b,!0)};wa(H,function(a,b){this.wa=this.wa[w](a,b)});H.get=function(a){return this.wa.get(a)};H.wd=function(a){return null!=a?this.bb([a])[C]:this.bb()[C]};
H.bb=function(a,b,c,d){var g=this.wa.Ed().b[0];if(!Ib(g)||0==c)return nf;var k=(c||0)+(d||0),k=0<k&&!b?k:Number.POSITIVE_INFINITY,l=[];(Ib(a)?this.M.dh(a):[this.M.ye()])[F](function(a){for(var b=this.M.Xd(a),b=this.M.Le(a)?g:b[0],b=this.wa.Xf(b),c=0;null!=b&&l[C]<k;)0!=b.bb(a,l)?c=0:c++,b=2==c?null:b[ob]()},this);return hf(l,b,c,d)};ta(H,function(){this.wa=of(this)});H.A=function(a){return this.wa.A(a)};H.min=function(){return this.bd(J(this.M.min,this.M))};
H.max=function(){return this.bd(J(this.M.max,this.M))};H.bd=function(a){var b=this.wa.Ed(),c=this.wa.dg();if(0==b.b[C]&&0==c.b[C])return[null,null];var d=b.b[0],b=b.U[0],g=c.b[c.b[C]-1],c=c.U[c.b[C]-1];return 1==a(d,g)?[d,this.nf?[b]:b]:[g,this.nf?[c]:c]};H.yb=G("nf");H.Jc=G("M");H.Qe=function(a,b){return null!=a?-1==this.M[wb](a,b):!1};H.Sa=function(a,b){return null!=a?0==this.M[wb](a,b):!1};H.Ja=function(){for(var a=[],b=this.wa.Ed();b;)a[x](new dd(b.za,[b.b,b.U])),b=b.Aa;return a};
function pf(a,b,c,d){a=new jf(b,a,c);d=qf(d,a);a.wa=d;return a}function rf(a,b){this.za=a;this.X=b;this.nb=0;this.Aa=this.zb=this.D=null;this.b=[];this.U=[];this.i=[]}function of(a){return new rf(ed++,a)}H=rf[t];H.ea=function(){return 0==this.nb};H.tg=function(){return null==this.D};ya(H,G("Aa"));
function sf(a){function b(a){return null!=a?a.za[D]():"_"}var c=a.za+"["+a.b[m]("|")+"]",d=a.i.map(function(a){return a.za})[m]("|"),g=a.U[m]("/"),k=b(a.zb)+"{",k=a.ea()?k+g:k+d,k=k+"}"+b(a.D);a.Aa&&(a=sf(a.Aa),c=c+"  "+a[0],k=k+"  "+a[1]);return[c,k]}f(H,function(){var a="",b=sf(this),a=a+(b[0]+"\n"+b[1]+"\n");this.i[C]&&(a+=this.i[0][D]());return a});H.Ed=function(){return this.ea()?this:this.i[0].Ed()};H.dg=function(){return this.ea()?this:this.i[this.i[C]-1].dg()};
function tf(a,b){b&&(b.zb=a);a&&(a.Aa=b)}function kf(a,b){for(var c=b[C],d=0,g=of(a),k=g;0<c;){var l=768<=c?511:257<=c&&511>=c?c:257,p=b[n](d,d+l);g.b=p.map(function(a){return a.key});g.U=p.map(function(a){return a[v]});d+=l;c-=l;0<c&&(l=of(g.X),tf(g,l),g=l)}return k}function uf(a){var b=a[0],c=of(b.X);c.nb=b.nb+1;c.i=a;for(b=0;b<a[C];++b)a[b].D=c,0<b&&c.b[x](a[b].b[0]);return c}
function mf(a){var b=a,c=[];do c[x](b),b=b.Aa;while(b);if(512>=c[C])b=uf(c);else{var d=c[C],g=0,b=of(a.X);for(b.nb=a.nb+2;0<d;){a=768<=d?511:257<=d&&511>=d?d:257;var k=c[n](g,g+a),l=uf(k);l.D=b;b.i[C]&&(b.b[x](k[0].b[0]),tf(b.i[b.i[C]-1],l));b.i[x](l);g+=a;d-=a}}return b}H.get=function(a){var b=this.hd(a);if(this.ea()){var c=nf;this.X.Sa(this.b[b],a)&&(c=c[Sa](this.U[b]));return c}b=this.X.Sa(this.b[b],a)?b+1:b;return this.i[b].get(a)};
H.A=function(a){var b=this.hd(a);return this.X.Sa(this.b[b],a)?!0:this.ea()?!1:this.i[b].A(a)};wa(H,function(a,b){this.Nf(a,-1,b);if(this.tg()){var c=this;1==this.i[C]&&(c=this.i[0],c.D=null);return c}return this});function vf(a){return a.ea()?a.b[0]:vf(a.i[0])}H.zd=function(){this.b=[];for(var a=1;a<this.i[C];++a)this.b[x](vf(this.i[a]))};
H.Nf=function(a,b,c){var d=this.hd(a);if(!this.ea()){var g=this.X.Sa(this.b[d],a)?d+1:d;if(this.i[g].Nf(a,g,c))this.zd();else return!1}else if(!this.X.Sa(this.b[d],a))return!1;if(this.b[C]>d&&this.X.Sa(this.b[d],a)){if(Ib(c)&&!this.X.yb()&&this.ea()&&(a=this.U[d],c=rc(a,sc,!1,c),0<=c&&lc(a,c),this.U[d][C]))return!1;this.b[A](d,1);this.ea()&&this.U[A](d,1)}256>this.b[C]&&!this.tg()&&(this.dl()||this.qk(b));return!0};
H.dl=function(){var a=null,b,c,d;if(this.Aa&&256<this.Aa.b[C])a=this.Aa,c=b=0,d=this.b[C]+1;else if(this.zb&&256<this.zb.b[C])a=this.zb,b=this.zb.b[C]-1,c=this.ea()?b:b+1,d=0;else return!1;this.b[A](d,0,a.b[b]);a.b[A](b,1);b=this.ea()?this.U:this.i;var g=null;this.ea()?g=a.U:(g=a.i,g[c].D=this);b[A](d,0,g[c]);g[A](c,1);a.ea()||(a.zd(),this.zd());return!0};
H.qk=function(a){var b,c,d;this.Aa&&511>this.Aa.b[C]?(b=this.Aa,d=c=0):this.zb&&(b=this.zb,c=b.b[C],d=b.ea()?b.U[C]:b.i[C]);c=[c,0][Sa](this.b);e[t][A][ub](b.b,c);c=null;this.ea()?c=this.U:(c=this.i,c[F](function(a){a.D=b}));c=[d,0][Sa](c);e[t][A][ub](b.ea()?b.U:b.i,c);tf(this.zb,this.Aa);b.ea()||b.zd();-1!=a&&(this.D.b[A](a,1),this.D.i[A](a,1))};
H.xb=function(a,b,c){var d=this.hd(a);if(this.ea()){if(this.X.Sa(this.b[d],a)){if(c)return this.U[d]=this.X.yb()?b:[b],this;if(this.X.yb())throw new P(201);if(this.U[d])return tc(this.U[d],b),this;this.U[d]=[b]}this.b[A](d,0,a);this.U[A](d,0,this.X.yb()?b:[b]);return 512==this.b[C]?this.al():this}d=this.X.Sa(this.b[d],a)?d+1:d;a=this.i[d].xb(a,b,c);a.ea()||1!=a.b[C]||(this.b[A](d,0,a.b[0]),a.i[1].D=this,a.i[0].D=this,this.i[A](d,1,a.i[1]),this.i[A](d,0,a.i[0]));return 512==this.b[C]?this.$k():this};
H.al=function(){var a=of(this.X),b=of(this.X);b.nb=1;b.b=[this.b[256]];b.i=[this,a];b.D=this.D;this.D=b;a.b=this.b[A](256);a.U=this.U[A](256);a.D=b;tf(a,this.Aa);tf(this,a);return b};H.$k=function(){var a=of(this.X),b=of(this.X);a.D=this.D;a.nb=this.nb+1;a.b=[this.b[256]];a.i=[this,b];this.b[A](256,1);b.D=a;b.nb=this.nb;b.b=this.b[A](256);b.i=this.i[A](257);b.i[F](function(a){a.D=b});this.D=a;tf(b,this.Aa);tf(this,b);return a};
H.hd=function(a){for(var b=0,c=this.b[C];b<c;){var d=b+c>>1;this.X.Qe(this.b[d],a)?b=d+1:c=d}return b};H.Xf=function(a){if(!this.ea()){var b=this.hd(a);this.X.Sa(this.b[b],a)&&b++;return this.i[b].Xf(a)}return this};
H.bb=function(a,b){var c=-1,d=this.b[C]-1,g=this.X.Jc(),k=J(function(b){for(;b<this.b[C];++b){var k=g.sc(this.b[b],a);if(-1!=c){if(!k){d=b-1;break}}else k&&(c=b)}},this);g.sc(this.b[0],a)?c=0:k(1);if(-1==c)return 0;g.sc(this.b[d],a)||k(c);return d==this.b[C]-1?this.xf(b,this.U[n](c)):d>=c?this.xf(b,this.U[n](c,d+1)):0};H.xf=function(a,b){var c=this.X.yb()?b:vc(b);a[x][ub](a,c);return c[C]};
function qf(a,b){for(var c=a.map(function(a){var c=new rf(a.id(),b);c.b=a.u()[0];c.U=a.u()[1];return c}),d=0;d<c[C]-1;++d)tf(c[d],c[d+1]);return 1<c[C]?mf(c[0]):c[0]};
function wf(a){if(1==a.h[C])return new xf(a.h[0].ob);a=a.h.map(function(a){return a.ob});return new yf(a)}function xf(a){this.ud=0==a?zf:Af;this.Re=0==a?function(a){return null!=a?a.reverse():null}:function(a){return a||null};this.Hg=0==a?Bf:Cf}K(xf,Qd);function Af(a,b){return a>b?1:a<b?-1:0}function zf(a,b){return Af(b,a)}function Cf(a,b){return de(a,b)}function Bf(a,b){return de(b,a)}H=xf[t];
H.se=function(a,b){var c=this.Re(b),d=[null===c.f,null===c.w];if(!d[0]){var g=this.ud(a,c.f);d[0]=c.Y?1==g:-1!=g}d[1]||(g=this.ud(a,c.w),d[1]=c.ba?-1==g:1!=g);return d};H.compare=function(a,b){return this.ud(a,b)};H.min=function(a,b){return a<b?1:a==b?0:-1};H.max=function(a,b){return a>b?1:a==b?0:-1};H.sc=function(a,b){var c=this.se(a,b);return c[0]&&c[1]};H.ye=function(){return ce()};H.Gg=function(a,b){return this.Hg(a,b)};
H.dh=function(a){return a[Ga](function(a){return null!==a})[Za](J(function(a,c){return this.Hg(a,c)},this))};H.Le=function(a){return Mb(this.Re(a).f)};H.Xd=function(a){a=this.Re(a);return[a.f,a.w]};f(H,function(){return this.ud==zf?"SimpleComparator_DESC":"SimpleComparator_ASC"});function yf(a){this.Da=a.map(function(a){return new xf(a)})}K(yf,Qd);H=yf[t];H.xe=function(a,b,c){for(var d=0,g=0;g<this.Da[C]&&0==d;++g)d=c(this.Da[g],a[g],b[g]);return d};
H.compare=function(a,b){return this.xe(a,b,function(a,b,g){return a[wb](b,g)})};H.min=function(a,b){return this.xe(a,b,function(a,b,g){return a.min(b,g)})};H.max=function(a,b){return this.xe(a,b,function(a,b,g){return a.max(b,g)})};H.se=function(a,b){for(var c=[!0,!0],d=0;d<this.Da[C]&&(c[0]||c[1]);++d){var g=this.Da[d].se(a[d],b[d]);c[0]=c[0]&&g[0];c[1]=c[1]&&g[1]}return c};H.sc=function(a,b){for(var c=!0,d=0;d<this.Da[C]&&c;++d)c=this.Da[d].sc(a[d],b[d]);return c};H.ye=function(){return this.Da.map(function(a){return a.ye()})};
H.dh=function(a){var b=a[Ga](function(a){return a[Ua](Nb)});a=e(this.Da[C]);for(var c=0;c<a[C];c++)a[c]=b.map(function(a){return a[c]});a[F](function(a,b){a[Za](J(function(a,c){return this.Da[b].Gg(a,c)},this))},this);b=e(b[C]);for(c=0;c<b[C];c++)b[c]=a.map(function(a){return a[c]});return b[Za](J(function(a,b){for(var c=0,l=0;l<this.Da[C]&&0==c;++l)c=this.Da[l].Gg(a[l],b[l]);return c},this))};H.Le=function(a){return this.Da[0].Le(a[0])};
H.Xd=function(a){var b=a.map(function(a,b){return this.Da[b].Xd(a)[0]},this);a=a.map(function(a,b){return this.Da[b].Xd(a)[1]},this);return[b,a]};
function Df(a){this.ta=a;this.Va=new O}H=Df[t];na(H,function(){return this.ta[u]()});H.add=function(a,b){if(null===a){if(this.yb()&&!this.Va.Ha())throw new P(201);this.Va.add(b)}else this.ta.add(a,b)};H.set=function(a,b){null===a?(this.Va[cb](),this.Va.add(b)):this.ta.set(a,b)};wa(H,function(a,b){null===a?b?this.Va[w](b):this.Va[cb]():this.ta[w](a,b)});H.get=function(a){return null===a?this.Va.c():this.ta.get(a)};H.wd=function(a){return this.ta.wd(a)};
H.bb=function(a,b,c,d){b=this.ta.bb(a,b,c,d);return null!=a?b:b[Sa](this.Va.c())};ta(H,function(){this.Va[cb]();this.ta[cb]()});H.A=function(a){return null===a?!this.Va.Ha():this.ta.A(a)};H.min=function(){return this.ta.min()};H.max=function(){return this.ta.max()};H.Ja=function(){return[new dd(-2,this.Va.c())][Sa](this.ta.Ja())};H.Jc=function(){return this.ta.Jc()};H.yb=function(){return this.ta.yb()};
function Ef(a){this.B=a;this.Ab=new ef;this.M=new xf(1)}H=Ef[t];na(H,G("B"));H.add=function(a){if("number"!=typeof a)throw new P(103);this.Ab.add(a)};H.set=function(a,b){this.add(a,b)};wa(H,function(a){this.Ab[Ya](a)});H.get=function(a){return this.A(a)?[a]:[]};H.min=function(){return this.bd(J(this.M.min,this.M))};H.max=function(){return this.bd(J(this.M.max,this.M))};
H.bd=function(a){if(0==this.Ab[Db])return[null,null];var b=ff(this.Ab)[Ka](J(function(b,d){return null===b||1==a(d,b)?d:b},this),null);return[b,[b]]};H.wd=function(){return this.Ab[Db]};H.bb=function(a,b,c,d){var g=a||[ce()];a=ff(this.Ab)[Ga](function(a){return g[ab](function(b){return this.M.sc(a,b)},this)},this);return hf(a,b,c,d)};ta(H,function(){this.Ab[cb]()});H.A=function(a){return this.Ab.has(a)};H.Ja=function(){return[new dd(0,ff(this.Ab))]};H.Jc=G("M");
function Ff(a,b){var c=new Ef(a);b[0].u()[F](function(a){c.add(a,a)});return c}H.yb=Gb(!0);
function Gf(a){this.m=a;this.Cb=a.o(zd);this.H=a.o(Bd);this.qa=a.o(Ad)}H=Gf[t];H.Fa=function(a){var b=a.Za(),c=J(function(){if(0==b[C])return Tc();var a=b[pb]();return(a.Xb()?this.Pi(a):this.Qi(a))[z](c)},this);return c()};H.Qi=function(a){var b=new $d(this.m,[a]);return this.Cb.Mb(0,b).O(a[u](),J(a.mc,a)).get([])[z](J(function(b){this.qa.set(a[u](),b);this.Ik(a,b)},this))};H.Ik=function(a,b){var c=this.H.Hj(a[u]());b[F](function(a){c[F](function(b){var c=a.Rb(b[u]());b.add(c,a.id())})})};
H.Pi=function(a){var b=new $d(this.m,[a]),c=this.Cb.Mb(0,b),b=c.O(a[u](),a.mc).get([])[z](J(function(b){this.qa.set(a[u](),b)},this)),d=a.Ea().map(function(a){return this.Jk(a,c)},this)[Sa](this.Kk(a,c));return Xc(d[Sa](b))};
H.Jk=function(a,b){var c=b.O(a.l(),fd,1),d=wf(a);return c.get([])[z](J(function(b){L("btree"==b[0].u().type);if(1<b[C]){if(a.ig()){var c=pf[E](void 0,d,a.l(),a.$c),l=b[n](1),p=-1;for(b=0;b<l[C];++b)if(-2==l[b].id()){p=b;break}if(-1==p)throw new P(102);b=l[p].u();l=l[n](0);l[A](p,1);c=c(l);c=new Df(c);c.Va[gb](b)}else c=pf(d,a.l(),a.$c,b[n](1));this.H.set(c)}},this))};
H.Kk=function(a,b){return b.O(a.Ob(),fd,1).get([])[z](J(function(b){L("rowid"==b[0].u().type);1<b[C]&&(b=Ff(a.Ob(),b[n](1)),this.H.set(b))},this))};


function Hf(){this.S=new N}Hf[t].Fa=function(a){a.Za()[F](function(a){var c=a.Ob();if(null===this.get(c)){var d=new Ef(c);this.S.set(c,d)}a.Ea()[F](function(a){this.S.set(a.l(),If(a))},this)},this);return Tc()};function If(a){var b=wf(a),b=new jf(a.l(),b,a.$c);return a.ig()?new Df(b):b}Hf[t].get=function(a){return this.S.get(a,null)};Hf[t].set=function(a){return this.S.set(a[u](),a)};Hf[t].Hj=function(a){var b=[],c=a+".";this.S.J()[F](function(a){0==a[$a](c)&&b[x](this.S.get(a))},this);return b};
function Jf(a){this.fb=[];Ib(a)&&this.add(a)}H=Jf[t];f(H,function(){return this.fb.map(function(a){return a[D]()})[m](",")});H.A=function(a){return this.fb[ab](function(b){return b[rb](a)})};H.c=G("fb");
H.add=function(a){if(0!=a[C])if(a=this.fb[Sa](a),1==a[C])this.fb=a;else{a[Za](de);for(var b=[],c=a[0],d=1;d<a[C];++d)if(c.Ig(a[d])){var g=a[d],k=ce();if(null!==c.f&&null!==g.f){var l=be(c.f,g.f,!0);1!=l?(k.f=c.f,k.Y=0!=l?c.Y:c.Y&&g.Y):(k.f=g.f,k.Y=g.Y)}null!==c.w&&null!==g.w&&(l=be(c.w,g.w,!1),-1!=l?(k.w=c.w,k.ba=0!=l?c.ba:c.ba&&g.ba):(k.w=g.w,k.ba=g.ba));c=k}else b[x](c),c=a[d];b[x](c);this.fb=b}};
H.Nc=function(a){return this.fb[C]==a.fb[C]?0==this.fb[C]||this.fb[Ua](function(b,c){return b.Nc(a.fb[c])}):!1};function Kf(a,b){var c=[];a.c().map(function(a){return b.c().map(function(b){var c;if(a.Ig(b)){c=ce();var l=be(a.f,b.f,!0),l=0==l?a.Y?a:b:-1!=l?a:b;c.f=l.f;c.Y=l.Y;null===a.w||null===b.w?b=null===a.w?b:a:(l=be(a.w,b.w,!1),b=0==l?a.ba?a:b:-1==l?a:b);c.w=b.w;c.ba=b.ba}else c=null;return c})})[F](function(a){c=c[Sa](a)});return new Jf(c[Ga](function(a){return null!==a}))};
function Lf(a,b){var c=[],d=null,g=null;a.zc(function(a){var l=b(a);null==a[xb]()?g=l:d.ka(l);var p=a[xb]();null!==p&&p.ya()==d.ya()&&(p=c[$a](d),-1!=p&&c[A](p,1));1<a.ya()&&c[x](l);d=a.og()?c[c[C]-1]:l});return g}function Mf(a){return Nf(a,function(a){return a.og()})}function Of(a){var b=a[xb](),c=0;null!==b&&(c=b.ca()[$a](a),b[hb](a));var d=a.ca()[n]();d[F](function(d,k){a[hb](d);null===b||b.Cc(d,c+k)});return{parent:b,children:d}}
function Pf(a,b){a.ca()[n]()[F](function(c){a[hb](c);b.ka(c)});a.ka(b)}function Qf(a){L(1==a.ya());var b=a.sb(0);L(1==b.ya());Of(a);Pf(b,a);return b}function Rf(a,b,c){L(1==a.ya());var d=a.sb(0);L(1<d.ya());var g=d.ca()[n]();if(!g[ab](function(a){return b(a)}))return a;Of(a);g[F](function(g,l){if(b(g)){var p=c(a);d.Yd(l);p.ka(g);d.Cc(p,l)}});return d}function Sf(a,b,c,d){var g=a[xb]();null!==g&&(a=g.ca()[$a](a),g.Yd(a),g.Cc(c,a));b.ca()[n]()[F](function(a){b[hb](a);d.ka(a)});return c}
function Nf(a,b,c){function d(a){b(a)&&g[x](a);null!=c&&c(a)||a.ca()[F](d)}var g=[];d(a);return g}function Tf(a,b){var c=b||function(a){return a[D]()+"\n"},d="";a.zc(function(a){for(var b=0;b<a.oj();b++)d+="-";d+=c(a)});return d};

function Uf(a){xe[r](this);this.Ub=a;this.cb=!1}K(Uf,xe);H=Uf[t];H.Lb=function(){return Lf(this,function(a){if(a instanceof Uf){var b=new Uf(a.Ub);b.cb=a.cb;b.gf(a.da());return b}return a.Lb()}[E](this))};H.tb=function(a){var b=a||[];this.zc(function(a){a!=this&&a.tb(b)}[E](this));return(new O(b)).c()};H.ae=function(a){this.cb!=a&&(this.cb=a,this.Ub="and"==this.Ub?"or":"and",this.ca()[F](function(b){return b.ae(a)}))};H.eval=function(a){var b=this.ca().map(function(b){return b.eval(a)});return this.gi(b)};
H.gi=function(a){return"and"==this.Ub?ie(a):je(a)};f(H,function(){return"combined_pred_"+this.Ub[D]()});function Vf(a,b){return a===b?0!==a||1/a===1/b:a!==a&&b!==b};function Wf(){this[cb]()}var Xf=aa[t][Xa],Yf=aa[t][qb];H=Wf[t];H.set=function(a,b){this.nd(a);var c=!this.Zc(a);this.g[a]=b;if("__proto__"==a||!Zf&&!Xf[r](this.g,a)){delete this.g[a];var d=fc(this.Ib,a);if(c=0>d)d=this.Ib[C];this.Ib[d]=a;this.Zd[d]=b}c&&this.$++};H.get=function(a,b){this.nd(a);if(this.Zc(a))return this.g[a];var c=fc(this.Ib,a);return 0<=c?this.Zd[c]:b};
wa(H,function(a){this.nd(a);if(this.Zc(a))return this.$--,delete this.g[a],!0;a=fc(this.Ib,a);return 0<=a?(this.$--,lc(this.Ib,a),lc(this.Zd,a),!0):!1});H.addAll=function(a){gc(a.J(),function(b){this.set(b,a.get(b))},this)};H.Ha=function(){return!this.$};H.ra=G("$");H.A=function(a){this.nd(a);return this.Zc(a)||0<=fc(this.Ib,a)};H.vd=function(a){return xc(this.g,function(b,c){return this.Zc(c)&&Vf(b,a)},this)||0<=fc(this.Zd,a)};
H.J=function(){var a;if($f)a=nc(aa.keys(this.g));else{a=[];for(var b in this.g)Yf[r](this.g,b)&&a[x](b)}oc(a,this.Ib);return a};H.c=function(){for(var a=[],b=this.J(),c=0;c<b[C];c++)a[x](this.get(b[c]));return a};H.getEntries=function(){for(var a=[],b=this.J(),c=0;c<b[C];c++){var d=b[c];a[x]([d,this.get(d)])}return a};ta(H,function(){this.g=Zf?aa[jb](null):{};this.Ib=[];this.Zd=[];this.$=0});la(H,function(){var a=new Wf;a[gb](this);return a});
H.Zc=function(a){return"__proto__"==a?!1:Zf?a in this.g:Yf[r](this.g,a)};H.nd=function(a){L(Pb(a),"key must be a string.")};var Zf=!!aa[jb],$f=!!aa.keys;function ag(){this[cb]()}H=ag[t];H.$=0;ta(H,function(){this.$=0;this.g=new Wf});la(H,function(){var a=new ag;a.rh(this);return a});H.add=function(a,b){var c=this.g.get(a);c||this.g.set(a,c=[]);c[x](b);this.$++};H.rh=function(a){gc(a.getEntries(),function(a){this.add(a[0],a[1])},this)};H.get=function(a){return(a=this.g.get(a))?nc(a):[]};wa(H,function(a,b){var c=this.g.get(a);if(!c)return!1;var d=mc(c,function(a){return Vf(b,a)});d&&(this.$--,0==c[C]&&this.g[w](a));return d});H.Ha=function(){return!this.$};
H.ra=G("$");H.A=function(a){return this.g.A(a)};H.vd=function(a){return jc(this.g.c(),function(b){return jc(b,function(b){return Vf(b,a)})})};H.J=function(){return this.g.J()};H.c=function(){return vc(this.g.c())};H.getEntries=function(){for(var a=this.J(),b=[],c=0;c<a[C];c++)for(var d=a[c],g=this.get(d),k=0;k<g[C];k++)b[x]([d,g[k]]);return b};
function bg(a,b,c){xe[r](this);this.Ua=a;this.Na=b;this.V=c;this.yd=pe.Be().Ae(this.Ua.Z(),this.V)}K(bg,xe);H=bg[t];H.Lb=function(){var a=new bg(this.Ua,this.Na,this.V);a.gf(this.da());return a};H.tb=function(a){return null!=a?(a[x](this.Ua),a[x](this.Na),a):[this.Ua,this.Na]};H.eval=function(a){var b=a[B][Ga](function(a){var b=a.N(this.Ua);a=a.N(this.Na);return this.yd(b,a)},this);return new ee(b,a.W())};f(H,function(){return"join_pred("+this.Ua.l()+", "+this.Na.l()+")"});
H.yf=function(a){return-1!=a.W()[$a](this.Ua.O().sa())};H.yh=function(a){return-1!=a.W()[$a](this.Na.O().sa())};H.wi=function(a,b){var c=null,d=null;this.yf(a)?(this.Af(a,b),c=a,d=b):(this.Af(b,a),c=b,d=a);return[c,d]};H.Af=function(a,b){L(this.yf(a),"Mismatch between join predicate left operand and right relation.");L(this.yh(b),"Mismatch between join predicate right operand and right relation.")};
H.Di=function(a,b,c){var d=[a,b];c||(d=this.wi(a,b));a=d[0];d=d[1];return c?this.Qf(a,d,c):"eq"==this.V?this.Ei(a,d):this.Qf(a,d,c)};H.ni=function(a){var b={};a.tb()[F](function(a){b[a[u]()]=null});return b};
H.Qf=function(a,b,c){for(var d=[],g=null,k=a.W(),l=b.W(),p=0;p<a[B][C];p++){for(var y=!1,va=0;va<b[B][C];va++)if(this.yd(a[B][p].N(this.Ua),b[B][va].N(this.Na))){var y=!0,Tb=ne(a[B][p],k,b[B][va],l);d[x](Tb)}c&&!y&&(null===g&&(g=this.ni(this.Na.O())),y=new le(new dd(-1,g),!1),Tb=ne(a[B][p],k,y,l),d[x](Tb))}a=a.W()[Sa](b.W());return new ee(d,a)};
H.Ei=function(a,b){var c=a,d=b,g=this.Ua,k=this.Na;a[B][C]>b[B][C]&&(c=b,d=a,g=this.Na,k=this.Ua);var l=new ag,p=[];c[B][F](function(a){var b=ha(a.N(g));l.add(b,a)});var y=c.W(),va=d.W();d[B][F](function(a){var b=ha(a.N(k));l.A(b)&&l.get(b)[F](function(b){b=ne(a,va,b,y);p[x](b)})});c=a.W()[Sa](b.W());return new ee(p,c)};
function cg(a,b,c){return null===b?new ze(a,b,c):Ib(b.l)?new bg(a,b,c):new ze(a,b,c)};
var dg={};I("lf.schema.DataStoreType",dg,void 0);dg.INDEXED_DB=0;dg.MEMORY=1;dg.LOCAL_STORAGE=2;dg.FIREBASE=3;dg.WEB_SQL=4;dg.OBSERVABLE_STORE=5;function eg(a,b,c,d){this.jf=a;ja(this,b);this.$c=c;this.h=d}eg[t].l=function(){return this.jf+"."+this[q]};eg[t].ig=function(){return this.h[ab](function(a){return a.fa.tc()})};function fg(a,b,c,d){this.B=a;this.ua=c;this.F=b;this.Td=d;this.jb=null}I("lf.schema.Table",fg,void 0);na(fg[t],G("B"));fg[t].ab=G("jb");fg[t].sa=function(){return this.jb||this.B};
fg[t].Ec=function(a){var b=new this.constructor(this.B);b.jb=a;b.Lk=this.Lk;return b};fg[t].as=fg[t].Ec;fg[t].createRow=fg[t].Db;fg[t].deserializeRow=fg[t].mc;fg[t].Ea=G("ua");fg[t].tb=G("F");fg[t].getConstraint=fg[t].Eb;fg[t].Xb=G("Td");fg[t].Ob=function(){return this.B+".#"};
function T(a,b){xa(this,a);this.ec=b;this.jb=null}H=T[t];na(H,function(){return this.ec+"("+this[ib][u]()+")"});H.l=function(){return this.ec+"("+this[ib].l()+")"};H.O=function(){return this[ib].O()};f(H,function(){return this.l()});H.Z=function(){return this[ib].Z()};H.ab=G("jb");H.Ea=function(){return[]};H.tc=Gb(!1);H.Ec=function(a){this.jb=a;return this};T[t].as=T[t].Ec;T[t].Wf=function(){for(var a=[this],b=this;b instanceof T;)a[x](b[ib]),b=b[ib];return a};
function gg(a){this.jb=a||null;this.L=new fg("#UnknownTable",[],[],!1)}H=gg[t];na(H,Gb("*"));H.l=function(){return this[u]()};f(H,function(){return this.l()});H.O=G("L");H.Z=Gb(4);H.ab=G("jb");H.Ea=function(){return[]};H.tc=Gb(!1);
I("lf.fn.avg",function(a){return new T(a,"AVG")},void 0);I("lf.fn.count",function(a){return new T(a||new gg,"COUNT")},void 0);function hg(a){return new T(a,"DISTINCT")}I("lf.fn.distinct",hg,void 0);I("lf.fn.max",function(a){return new T(a,"MAX")},void 0);I("lf.fn.min",function(a){return new T(a,"MIN")},void 0);I("lf.fn.stddev",function(a){return new T(a,"STDDEV")},void 0);I("lf.fn.sum",function(a){return new T(a,"SUM")},void 0);I("lf.fn.geomean",function(a){return new T(a,"GEOMEAN")},void 0);
function U(a,b){ve[r](this,"","");this.Mi=b;this.Eg=a}K(U,ve);H=U[t];ma(H,function(a,b){switch(this.Mi){case 1:return this.Hi(a,b);case 0:return this.Gi(a,b);default:return this.Ji(a,b)}});f(H,Gb("dummy_node"));H.jd=function(){return this[D]()};H.zf=function(a){L(-1==this.Eg||a[C]==this.Eg)};H.Ji=function(a,b){return new M(J(function(c){c(this.la(a,[],b))},this))};H.Hi=function(a,b){return this.sb(0)[Qa](a,b)[z](J(function(c){this.zf(c);return this.la(a,c,b)},this))};
H.Gi=function(a,b){var c=this.ca().map(function(c){return c[Qa](a,b)});return Xc(c)[z](J(function(c){var g=[];c[F](function(a){for(var b=0;b<a[C];++b)g[x](a[b])});this.zf(g);return this.la(a,g,b)},this))};
function ig(a){U[r](this,-1,1);this.vf=a}K(ig,U);f(ig[t],function(){return"aggregation("+this.vf.map(function(a){return a.l()})[D]()+")"});ig[t].la=function(a,b){b[F](function(a){(new jg(a,this.vf)).Lh()},this);return b};function jg(a,b){this.Ia=a;this.F=b}
jg[t].Lh=function(){this.F[F](function(a){a=a.Wf().reverse();for(var b=1;b<a[C];b++){var c=a[b],d=c.Wf()[n](-1)[0],g=this.rj(c),k=null;switch(c.ec){case "MIN":k=kg(g,d);break;case "MAX":k=lg(g,d);break;case "DISTINCT":k=mg(g,d);break;case "COUNT":k=g[B][C];break;case "SUM":k=ng(g,d);break;case "AVG":0<g[B][C]&&(k=ng(g,d)/g[B][C]);break;case "GEOMEAN":k=og(g,d);break;default:k=pg(g,d)}this.Ia.Uk(c,k)}},this)};jg[t].rj=function(a){return a[ib]instanceof T?this.Ia.qc(a[ib]):this.Ia};
function kg(a,b){var c=null;a[B][F](function(a){a=a.N(b);if(null===c||a<c)c=a});return c}function lg(a,b){var c=null;a[B][F](function(a){a=a.N(b);if(null===c||a>c)c=a});return c}function ng(a,b){return a[B][Ka](function(a,d){return a+d.N(b)},0)}function pg(a,b){var c=a[B].map(function(a){return a.N(b)});return qd[ub](null,c)}function og(a,b){var c=0,d=a[B][Ka](function(a,d){var l=d.N(b);return 0!=l?(c++,a+ba.log(l)):a},0);return 0==c?null:ba.pow(ba.E,d/c)}
function mg(a,b){var c=new N;a[B][F](function(a){var g=a.N(b);c.set(g,a)});return new ee(c.c(),a.W())};
function qg(a,b){this.Ca=a;this.pa=b}qg[t].mb=G("Ca");qg[t].ga=G("pa");function V(){ve[r](this,"","")}K(V,ve);function rg(a,b){V[r](this);ia(this,a);ua(this,b)}K(rg,V);function sg(a,b){rg[r](this,a,b)}K(sg,rg);function tg(a){V[r](this);ia(this,a)}K(tg,V);f(tg[t],function(){return"delete("+this[h][u]()+")"});function ug(a,b){V[r](this);ia(this,a);this.of=b}K(ug,V);f(ug[t],function(){var a=[];this.of&&(a=this.of.map(function(a){return a.I[u]()},this));return"update("+this[h][u]()+", ["+a[m](",")+"])"});
function vg(a){V[r](this);this.Ba=a}K(vg,V);f(vg[t],function(){return"select("+this.Ba[D]()+")"});function wg(a){V[r](this);ia(this,a)}K(wg,V);f(wg[t],function(){var a="table_access("+this[h][u]();null===this[h].ab()||(a+=" as "+this[h].ab());return a+")"});function xg(){V[r](this)}K(xg,V);f(xg[t],Gb("cross_product"));function yg(a,b){V[r](this);this.h=a;this.Pb=b}K(yg,V);
f(yg[t],function(){var a="project("+this.h[D]();if(null!==this.Pb)var b=this.Pb.map(function(a){return a.l()})[m](", "),a=a+(", groupBy("+b+")");return a+")"});function zg(a){V[r](this);this.K=a}K(zg,V);f(zg[t],function(){return"order_by("+De(this.K)+")"});function Ag(a){V[r](this);this.h=a}K(Ag,V);f(Ag[t],function(){return"aggregation("+this.h[D]()+")"});function Bg(a){V[r](this);this.h=a}K(Bg,V);f(Bg[t],function(){return"group_by("+this.h[D]()+")"});function Cg(a){V[r](this);this.na=a}K(Cg,V);
f(Cg[t],function(){return"limit("+this.na+")"});function Dg(a){V[r](this);this.ja=a}K(Dg,V);f(Dg[t],function(){return"skip("+this.ja+")"});function Eg(a,b){V[r](this);this.Ba=a;this.qg=b}K(Eg,V);f(Eg[t],function(){return(this.qg?"left_outer_join":"join")+"("+this.Ba[D]()+")"});
function Fg(){};
function Gg(){}K(Gg,Fg);Gg[t].Gb=function(a){this.ia=a;this.$a(this.ia);return this.ia};Gg[t].$a=function(a){if(a instanceof vg){L(1==a.ya(),"SelectNode must have exactly one child.");var b=this.Bf(a.Ba),b=this.pi(b);Sf(a,a,b[0],b[1]);a==this.ia&&(this.ia=b[0]);a=b[0]}a.ca()[F](function(a){this.$a(a)},this)};Gg[t].Bf=function(a){if(0==a.ya()||"and"!=a.Ub)return[a];var b=a.ca()[n]().map(function(b){a[hb](b);return this.Bf(b)},this);return vc(b)};
Gg[t].pi=function(a){var b=null,c=null;a.map(function(a,g){var k=new vg(a);0==g?b=k:c.ka(k);c=k},this);return[b,c]};
function Hg(){}K(Hg,Fg);Hg[t].Gb=function(a){this.ia=a;this.$a(this.ia);return this.ia};Hg[t].$a=function(a){if(a instanceof xg)for(;2<a.ya();){for(var b=new xg,c=0;2>c;c++){var d=a.Yd(0);b.ka(d)}a.Cc(b,0)}a.ca()[F](function(a){this.$a(a)},this)};
function Ig(){U[r](this,2,0)}K(Ig,U);f(Ig[t],Gb("cross_product"));Ig[t].la=function(a,b){for(var c=b[0],d=b[1],g=[],k=c.W(),l=d.W(),p=0;p<c[B][C];p++)for(var y=0;y<d[B][C];y++){var va=ne(c[B][p],k,d[B][y],l);g[x](va)}c=c.W()[Sa](d.W());return[new ee(g,c)]};

function Jg(a,b){Ge[r](this,a,b);this.Ya=a.o(Dd);this.Fb=a.o(Ed)}K(Jg,Ge);Ea(Jg[t],Gb(2));Jg[t].Ue=function(a){0==this.Z()?this.sk(a):this.gd()};Jg[t].sk=function(a){this.Wd[F](function(b,c){b instanceof Ce&&this.Fb.mh(b,a[c])},this)};Jg[t].gd=function(){var a=this.Fb.He(this.ga().c());0!=a[C]&&(a=new He(this[Wa],a),this.Ya.$b(a))};
function Kg(a){Ae[r](this,a)}K(Kg,Ae);Kg[t].ga=function(){var a=new O([this.f]);a[gb](this.fa[vb]().Vf(this.f[u]()));return a};la(Kg[t],function(){var a=new Kg(this.fa);a.td(this);a.f=this.f;return a});Ba(Kg[t],function(a){Kg.Jb[E][r](this,a);this.je(a);return this});
function Lg(a){Ae[r](this,a)}K(Lg,Ae);Lg[t].ga=function(){var a=new O([this.Ga]),b=this.fa[vb]();a[gb](b.xj(this.Ga[u]()));this.fc&&a[gb](b.Vf(this.Ga[u]()));return a};la(Lg[t],function(){var a=new Lg(this.fa);a.td(this);a.Ga=this.Ga;this[db]&&ua(a,this[db]instanceof oe?this[db]:this[db][n]());a.fc=this.fc;a.gc=this.gc;return a});Ba(Lg[t],function(a){Lg.Jb[E][r](this,a);this.gc&&ua(this,this.gc instanceof oe?a[this.gc.ub()]:this.gc.map(function(b){return b instanceof oe?a[b.ub()]:b}));return this});
function Mg(a){Ae[r](this,a)}K(Mg,Ae);Mg[t].ga=function(){var a=new O([this[h]]),b=this.set.map(function(a){return a.I.l()}),c=this.fa[vb]();a[gb](c.yj(b));a[gb](c.nj(b));return a};la(Mg[t],function(){var a=new Mg(this.fa);a.td(this);ia(a,this[h]);a.set=this.set?this.set[n]():this.set;return a});Ba(Mg[t],function(a){Mg.Jb[E][r](this,a);this.set[F](function(b){-1!=b.od&&pa(b,a[b.od])});this.je(a);return this});
function Ng(a,b){if(null==b)return"NULL";switch(a){case 1:return b?1:0;case 3:case 4:return b;case 0:return"'"+hd(b)+"'";default:return"'"+b[D]()+"'"}}function Og(a,b){var c=a.fc?"INSERT OR REPLACE":"INSERT",d=a.Ga.tb(),c=c+(" INTO "+a.Ga[u]()+"("),c=c+d.map(function(a){return a[u]()})[m](", "),c=c+") VALUES (";return a[db].map(function(a){var k=d.map(function(c){var d=a.u()[c[u]()];return b?null!=d?"#":"NULL":Ng(c.Z(),d)});return c+k[m](", ")+");"})[m]("\n")}
function Pg(a){switch(a){case "between":return"BETWEEN";case "eq":return"=";case "gte":return">=";case "gt":return">";case "in":return"IN";case "lte":return"<=";case "lt":return"<";case "match":return"LIKE";case "neq":return"<>";default:return"UNKNOWN"}}function Qg(a,b,c,d){return a instanceof oe?"?"+a.ub()[D]():d?null!=a?"#":"NULL":"match"==b?"'"+a[D]()+"'":"in"==b?"("+a.map(function(a){return Ng(c,a)})[m](", ")+")":"between"==b?Ng(c,a[0])+" AND "+Ng(c,a[1]):Ng(c,a)[D]()}
function Rg(a,b){return a.ca().map(function(a){return"("+Sg(a,b)+")"})[m]("and"==a.Ub?" AND ":" OR ")}function Sg(a,b){if(a instanceof ze)return[a.I.l(),Pg(a.V),Qg(a[v],a.V,a.I.Z(),b)][m](" ");if(a instanceof Uf)return Rg(a,b);if(a instanceof bg)return[a.Ua.l(),Pg(a.V),a.Na.l()][m](" ");throw new P(357,typeof a);}function Tg(a,b){var c=Sg(a,b);return c?" WHERE "+c:""}
function Ug(a,b){var c="UPDATE "+a[h][u]()+" SET ",c=c+a.set.map(function(a){var b=a.I.l()+" = ";return-1!=a.od?b+"?"+a.od[D]():b+Ng(a.I.Z(),a[v])[D]()})[m](", ");a.C&&(c+=Tg(a.C,b));return c+";"}
function Vg(a,b){var c="*";a.h[C]&&(c=a.h.map(function(a){return a.ab()?a.l()+" AS "+a.ab():a.l()})[m](", "));var d=a.f.map(function(a){return a.sa()!=a[u]()?a[u]()+" AS "+a.sa():a[u]()})[m](", "),c="SELECT "+c+" FROM "+d;a.C&&(c+=Tg(a.C,b));a.K&&(d=a.K.map(function(a){return a.I.l()+(0==a.ob?" DESC":" ASC")})[m](", "),c+=" ORDER BY "+d);a.ma&&(d=a.ma.map(function(a){return a.l()})[m](", "),c+=" GROUP BY "+d);a.na&&(c+=" LIMIT "+a.na[D]());a.ja&&(c+=" SKIP "+a.ja[D]());return c+";"}
function Wg(a,b){var c=b||!1,d=a.cg();if(d instanceof Lg)return Og(d,c);if(d instanceof Kg){var g="DELETE FROM "+d.f[u]();d.C&&(g+=Tg(d.C,c));return g+";"}if(d instanceof Mg)return Ug(d,c);if(d instanceof Ce)return Vg(d,c);throw new P(358,typeof d);};
function Xg(a,b){this.global=a;this.Gk=a.o(Cd);this.Ya=a.o(Dd);this.a=b}I("lf.query.BaseBuilder",Xg,void 0);ma(Xg[t],function(){try{this.kb()}catch(a){return Uc(a)}return new M(function(a,c){var d=new Jg(this[Wa],[this.Xc()]);this.Ya.$b(d)[z](function(c){a(c[0].Ce())},c)},this)});ma(Xg[t],Xg[t][Qa]);Xg[t].Sf=function(){var a=J(function(a){return a.jd(this.a)+"\n"},this);return Tf(this.De().mb(),a)};Xg[t].explain=Xg[t].Sf;Ba(Xg[t],function(a){this.a[E](a);return this});Ba(Xg[t],Xg[t][E]);
Xg[t].gl=function(a){return Wg(this,a)};Xg[t].toSql=Xg[t].gl;H=Xg[t];H.kb=Eb();H.cg=function(){return this.a.clone()};H.Fd=G("a");H.De=function(){null==this.Kg&&(this.Kg=this.Gk.zj(this.a));return this.Kg};H.Xc=function(){return{context:this.cg(),Xe:this.De()}};H.vj=function(){return{context:this.Fd(),Xe:this.De()}};
function Yg(a){Xg[r](this,a,new Kg(a.o(Fd)))}K(Yg,Xg);I("lf.query.DeleteBuilder",Yg,void 0);Yg[t].f=function(a){this.Ch();this.a.f=a;return this};Yg[t].from=Yg[t].f;Yg[t].C=function(a){this.he();this.a.C=a;return this};Yg[t].where=Yg[t].C;Yg[t].Ch=function(){if(null!=this.a.f)throw new P(515);};Yg[t].he=function(){if(null!=this.a.C)throw new P(516);};Yg[t].kb=function(){Yg.Jb.kb[r](this);if(null==this.a.f)throw new P(517);};
function Zg(a,b){Xg[r](this,a,new Lg(a.o(Fd)));this.a.fc=b||!1}K(Zg,Xg);I("lf.query.InsertBuilder",Zg,void 0);Zg[t].kb=function(){Zg.Jb.kb[r](this);var a=this.a;if(null==a.Ga||null==a[db])throw new P(518);if(a.fc&&null===a.Ga.Eb().Ee())throw new P(519);};Zg[t].Ga=function(a){this.Dh();this.a.Ga=a;return this};Zg[t].into=Zg[t].Ga;ua(Zg[t],function(a){this.Eh();a instanceof oe||a[ab](function(a){return a instanceof oe})?this.a.gc=a:ua(this.a,a);return this});ua(Zg[t],Zg[t][db]);
Zg[t].Dh=function(){if(null!=this.a.Ga)throw new P(520);};Zg[t].Eh=function(){if(null!=this.a[db])throw new P(521);};
function $g(a){return ah("and",e[t][n][r](arguments))}I("lf.op.and",$g,void 0);I("lf.op.or",function(a){return ah("or",e[t][n][r](arguments))},void 0);function ah(a,b){var c=new Uf(a);b[F](function(a){c.ka(a)});return c}I("lf.op.not",function(a){a.ae(!0);return a},void 0);
function W(a,b){Xg[r](this,a,new Ce(a.o(Fd)));this.Uf=this.ph=!1;this.a.h=b;this.Th();this.Rh()}K(W,Xg);I("lf.query.SelectBuilder",W,void 0);H=W[t];H.kb=function(){W.Jb.kb[r](this);var a=this.a;if(null==a.f)throw new P(522);if(Ib(a.Sb)&&!Ib(a.na)||Ib(a.cc)&&!Ib(a.ja))throw new P(523);this.bi()};H.Th=function(){var a=this.a.h[Ga](function(a){return a instanceof T&&"DISTINCT"==a.ec},this);if(0!=a[C]&&(1!=a[C]||1!=this.a.h[C]))throw new P(524);};H.bi=function(){null!=this.a.ma?this.Xh():this.ai()};
H.Xh=function(){var a=this.a.h[Ga](function(a){return!(a instanceof T)}).map(function(a){return a.l()}),b=!1;if(0==this.a.ma[C]||0==this.a.h[C])b=!0;else{var c=this.a.ma.map(function(a){return a.l()});(b=a[ab](function(a){return-1==c[$a](a)}))||(b=this.a.ma[ab](function(a){a=a.Z();return 6==a||0==a}))}if(b)throw new P(525);};
H.ai=function(){var a=this.a.h[ab](function(a){return a instanceof T},this),b=this.a.h[ab](function(a){return!(a instanceof T)},this)||0==this.a.h[C];if(a&&b)throw new P(526);};H.Rh=function(){this.a.h[F](function(a){if(a instanceof T&&!bh(a.ec,a.Z()))throw new P(527,a.l());},this)};H.f=function(a){if(this.Uf)throw new P(515);this.Uf=!0;null==this.a.f&&(this.a.f=[]);this.a.f[x][ub](this.a.f,e[t][n][r](arguments));return this};W[t].from=W[t].f;
W[t].C=function(a){if(this.ph)throw new P(516);this.ph=!0;this.ie(a);return this};W[t].where=W[t].C;W[t].ie=function(a){null!=this.a.C&&(a=$g(a,this.a.C));this.a.C=a};W[t].Zj=function(a,b){null==this.a.f&&(this.a.f=[]);this.a.f[x](a);this.ie(b);return this};W[t].innerJoin=W[t].Zj;W[t].gk=function(a,b){null==this.a.f&&(this.a.f=[]);this.a.f[x](a);null==this.a.vc&&(this.a.vc=new O);if(a.sa()!=b.Na.O().sa())throw new P(541);this.a.vc.add(b.da());this.ie(b);return this};W[t].leftOuterJoin=W[t].gk;
W[t].na=function(a){if(null!=(this.a.na||this.a.Sb))throw new P(528);if(a instanceof oe)this.a.Sb=a;else{if(0>a)throw new P(531);this.a.na=a}return this};W[t].limit=W[t].na;W[t].ja=function(a){if(null!=(this.a.ja||this.a.cc))throw new P(529);if(a instanceof oe)this.a.cc=a;else{if(0>a)throw new P(531);this.a.ja=a}return this};W[t].skip=W[t].ja;W[t].K=function(a,b){null==this.a.K&&(this.a.K=[]);this.a.K[x]({I:a,ob:null!=b?b:1});return this};W[t].orderBy=W[t].K;
W[t].ma=function(a){if(null!=this.a.ma)throw new P(530);null==this.a.ma&&(this.a.ma=[]);this.a.ma[x][ub](this.a.ma,e[t][n][r](arguments));return this};W[t].groupBy=W[t].ma;function bh(a,b){switch(a){case "COUNT":case "DISTINCT":return!0;case "AVG":case "GEOMEAN":case "STDDEV":case "SUM":return 4==b||3==b;case "MAX":case "MIN":return 4==b||3==b||5==b||2==b}return!1}la(W[t],function(){var a=new W(this[Wa],this.a.h);a.a=this.a.clone();a.a.Hc=null;return a});la(W[t],W[t].clone);
function ch(a,b){Xg[r](this,a,new Mg(a.o(Fd)));ia(this.a,b)}K(ch,Xg);I("lf.query.UpdateBuilder",ch,void 0);ch[t].set=function(a,b){var c={od:b instanceof oe?b.ub():-1,I:a,value:b};null!=this.a.set?this.a.set[x](c):this.a.set=[c];return this};ch[t].set=ch[t].set;ch[t].C=function(a){this.he();this.a.C=a;return this};ch[t].where=ch[t].C;ch[t].he=function(){if(null!=this.a.C)throw new P(516);};
ch[t].kb=function(){ch.Jb.kb[r](this);if(null==this.a.set)throw new P(532);if(this.a.set[ab](function(a){return a[v]instanceof oe}))throw new P(501);};
function dh(a){this.a=a;this.Ca=null}dh[t].pc=function(){null===this.Ca&&(this.Ca=this.Ad());return this.Ca};function eh(a){dh[r](this,a)}K(eh,dh);eh[t].Ad=function(){return this.a.fc?new sg(this.a.Ga,this.a[db]):new rg(this.a.Ga,this.a[db])};function fh(a){dh[r](this,a)}K(fh,dh);fh[t].Ad=function(){var a=new ug(this.a[h],this.a.set),b=null!=this.a.C?new vg(this.a.C.Lb()):null,c=new wg(this.a[h]);null===b?a.ka(c):(b.ka(c),a.ka(b));return a};
function gh(a,b,c){this.Ca=a;this.Ze=b;this.df=c}gh[t].pc=function(){this.df[F](function(a){this.Ca=a.Gb(this.Ca,this.Ze)},this);return this.Ca};
function hh(a){dh[r](this,a)}K(hh,dh);hh[t].Ad=function(){var a=new tg(this.a.f),b=null!=this.a.C?new vg(this.a.C.Lb()):null,c=new wg(this.a.f);null===b?a.ka(c):(b.ka(c),a.ka(b));return(new gh(a,this.a,[new Gg])).pc()};
function ih(){}K(ih,Fg);ih[t].Gb=function(a,b){this.ia=a;this.$a(this.ia,b);return this.ia};ih[t].$a=function(a,b){if(a instanceof vg&&a.Ba instanceof bg){L(1==a.ya(),"SelectNode must have exactly one child.");var c=a.Ba.da(),d=a.sb(0);d instanceof xg&&(c=Ib(b)&&null!=b.vc&&b.vc[rb](c),c=new Eg(a.Ba,c),Sf(a,d,c,c),a==this.ia&&(this.ia=c),a=c)}a.ca()[F](function(a){this.$a(a,b)},this)};
function kh(){this.fe=new O}K(kh,Fg);H=kh[t];H.Gb=function(a){this.ia=a;this.$a(this.ia);this.fe[cb]();return this.ia};H.$a=function(a){if(this.mg(a)){var b=a.Ba instanceof ze?this.Fk(a):this.Ek(a);this.fe.add(a);b==a&&(b=a.sb(0));null!==b&&(Mb(b[xb]())&&(this.ia=b),this.mg(b)&&!this.fe[rb](b)&&this.$a(b))}else a.ca()[F](function(a){this.$a(a)},this)};
H.Vd=function(a,b){var c=a;if(this.Yk(a))c=Qf(a),this.Vd(a,b);else if(this.Xk(a)){var d=[],c=Rf(a,b,function(a){a=new vg(a.Ba);d[x](a);return a});d[F](function(a){this.Vd(a,b)},this)}return c};H.Fk=function(a){var b=new O([a.Ba.I.O().sa()]),c=function(a){return this.Of(a,b)}[E](this);return this.Vd(a,c)};H.Ek=function(a){var b=new O([a.Ba.Ua.O().sa(),a.Ba.Na.O().sa()]),c=function(a){return this.Of(a,b)}[E](this);return this.Vd(a,c)};
H.Of=function(a,b){var c=new O;Mf(a)[F](function(a){c.add(a[h].sa())},this);a instanceof wg&&c.add(a[h].sa());return c.li(b)};H.mg=function(a){return a instanceof vg&&!(a.Ba instanceof Uf)};H.Xk=function(a){a=a.sb(0);return a instanceof xg||a instanceof Eg};H.Yk=function(a){return a.sb(0)instanceof vg};
function lh(a){dh[r](this,a);this.Pg=this.zg=this.bh=this.Fg=this.wf=this.hg=this.Yg=this.Lf=this.eh=null}K(lh,dh);H=lh[t];H.Ad=function(){this.ej();var a=this.ii(),b=[new Gg,new Hg,new kh,new ih];return(new gh(a,this.a,b)).pc()};H.ej=function(){this.kj();this.$i();this.ij();this.fj();this.jj();this.dj();this.bj();this.Zi();this.gj()};
H.ii=function(){for(var a=[this.zg,this.bh,this.Pg,this.Fg,this.wf,this.hg,this.Yg,this.Lf],b=null,c=null,d=0;d<a[C];d++){var g=a[d];null!==g&&(null===c?c=g:a[b].ka(g),b=d)}this.eh[F](function(c){a[b].ka(c)});return c};H.kj=function(){this.eh=this.a.f.map(function(a){return new wg(a)},this)};H.$i=function(){2<=this.a.f[C]&&(this.Lf=new xg)};H.ij=function(){this.Yg=null!=this.a.C?new vg(this.a.C.Lb()):null};H.fj=function(){this.a.K&&(this.Fg=new zg(this.a.K))};
H.dj=function(){null!=this.a.na&&(this.zg=new Cg(this.a.na))};H.jj=function(){null!=this.a.ja&&0<this.a.ja&&(this.bh=new Dg(this.a.ja))};H.bj=function(){null!=this.a.ma&&(this.hg=new Bg(this.a.ma))};H.Zi=function(){var a=this.a.h[Ga](function(a){return a instanceof T});null!=this.a.K&&this.a.K[F](function(b){b.I instanceof T&&a[x](b.I)});0<a[C]&&(this.wf=new Ag(a))};H.gj=function(){this.Pg=new yg(this.a.h||[],this.a.ma||null)};
function mh(){}mh[t].create=function(a){var b=null;if(a instanceof Lg)b=new eh(a);else if(a instanceof Kg)b=new hh(a);else if(a instanceof Ce)b=new lh(a);else if(a instanceof Mg)b=new fh(a);else throw new P(513);b=b.pc();return new qg(b,a.ga())};
function nh(a){U[r](this,1,1);this.L=a}K(nh,U);f(nh[t],function(){return"delete("+this.L[u]()+")"});nh[t].la=function(a,b){var c=b[0][B].map(function(a){return a.xa});a[w](this.L,c);return[he()]};
function oh(a){U[r](this,1,1);this.gg=a}K(oh,U);f(oh[t],function(){return"groupBy("+this.gg.map(function(a){return a.l()})[D]()+")"});oh[t].la=function(a,b){return this.Nh(b[0])};oh[t].Nh=function(a){var b=new ag,c=function(a){return this.gg.map(function(b){return a.N(b)},this)[m](",")}[E](this);a[B][F](function(a){b.add(c(a),a)},this);return b.J().map(function(c){return new ee(b.get(c),a.W())},this)};
function ph(a){L(1<a[C],"Should only be called for cross-column indices.");a=a.map(function(a){return a.c()});a=vd[ub](null,a);var b=[];ud(a,function(a){b[x](a)});return b}function qh(a){this.Qb=a}qh[t].Dd=function(){return 1==this.Qb.h[C]?[ce()]:[this.Qb.h.map(function(){return ce()})]};function rh(a,b){this.Qb=a;this.va=b;this.qe=this.xg=null}
rh[t].Oh=function(a){var b=new N;this.va.J()[F](function(c){var d=this.va.get(c).map(function(b){return a.Gd(b)},this),g=new Jf([ce()]);d[F](function(a){a=new Jf(a.fl());g=Kf(g,a)});b.set(c,g)},this);return b};rh[t].Ri=function(a){for(var b=this.Qb.h[C]-1;0<=b;b--){var c=this.Qb.h[b];if(null!==a.get(c.fa[u](),null))break;a.set(c.fa[u](),new Jf([ce()]))}};rh[t].Dd=function(a){if(this.xg==a)return this.qe;var b=this.Oh(a);this.Ri(b);this.qe=1==this.Qb.h[C]?b.c()[0].c():ph(this.Gj(b));this.xg=a;return this.qe};
rh[t].Gj=function(a){var b=new N,c=0;this.Qb.h[F](function(a){b.set(a.fa[u](),c);c++});return a.J()[Za](function(a,c){return b.get(a)-b.get(c)}).map(function(b){return a.get(b)})};
function sh(a,b){this.gh=b;this.H=a.o(Bd)}sh[t].ei=function(a,b){var c=b[Ga](this.$j,this);if(0==c[C])return null;c=this.cj(c);if(0==c[C])return null;if(1==c[C])return c[0];var d=Number.MAX_VALUE;return c[Ka](function(b,c){var l=c.Mh(a);return l<d?(d=l,c):b},null)};sh[t].cj=function(a){return this.gh.Ea().map(function(b){b=new th(this.H,b);b.ki(a);return b},this)[Ga](function(a){return a.fk()})};sh[t].$j=function(a){return a instanceof ze&&a.ng()?a.I.O()==this.gh:!1};
function th(a,b){this.H=a;this.wb=b;this.jg=new O;this.jg[gb](this.wb.h.map(function(a){return a.fa[u]()}));this.Pe=this.va=null}H=th[t];H.Aj=function(){return null===this.va?[]:this.va.c()};H.ag=function(){L(this.va);null===this.Pe&&(this.Pe=new rh(this.wb,this.va));return this.Pe};H.ki=function(a){a[F](function(a){var c=a.tb()[0][u]();this.jg[rb](c)&&(null===this.va&&(this.va=new ag),this.va.add(c,a.da()))},this)};
H.fk=function(){if(null===this.va)return!1;for(var a=!1,b=!0,c=0;c<this.wb.h[C];c++){var d=this.va.A(this.wb.h[c].fa[u]());if(a&&d){b=!1;break}d||(a=!0)}return b};H.Mh=function(a){a=this.ag().Dd(a);var b=this.H.get(this.wb.l());return a[Ka](function(a,d){return a+b.wd(d)},0)};
function uh(a,b,c,d){U[r](this,0,-1);this.H=a.o(Bd);this.index=b;this.vg=c;this.cf=d;this.md=this.ld=!1}K(uh,U);f(uh[t],function(){return"index_range_scan("+this[lb].l()+", ?, "+(this.cf?"reverse":"natural")+(this.ld?", limit:?":"")+(this.md?", skip:?":"")+")"});uh[t].jd=function(a){var b=this[D](),c=this.vg.Dd(a),b=b[eb]("?",c[D]());this.ld&&(b=b[eb]("?",a.na[D]()));this.md&&(b=b[eb]("?",a.ja[D]()));return b};
uh[t].la=function(a,b,c){a=this.vg.Dd(c);b=this.H.get(this[lb].l());c=(1==a[C]&&a[0]instanceof ae&&a[0].dk()?hf(b.get(a[0].f),!1,this.ld?c.na:void 0,this.md?c.ja:void 0):b.bb(a,this.cf,this.ld?c.na:void 0,this.md?c.ja:void 0)).map(function(a){return new dd(a,{})},this);return[ke(c,[this[lb].jf])]};
function vh(a){U[r](this,1,1);this.Ud=a}K(vh,U);f(vh[t],Gb("select(?)"));vh[t].jd=function(a){a=a.Gd(this.Ud);return this[D]()[eb]("?",a[D]())};vh[t].la=function(a,b,c){return[c.Gd(this.Ud).eval(b[0])]};
function wh(a,b){U[r](this,1,1);this.qa=a.o(Ad);this.L=b}K(wh,U);f(wh[t],function(){return"table_access_by_row_id("+this.L[u]()+")"});wh[t].la=function(a,b){return[ke(this.qa.get(b[0].Fj()),[this.L.sa()])]};
function xh(a,b){U[r](this,0,-1);this.qa=a.o(Ad);this.H=a.o(Bd);ia(this,b)}K(xh,U);f(xh[t],function(){var a="table_access("+this[h][u]();null===this[h].ab()||(a+=" as "+this[h].ab());return a+")"});xh[t].la=function(){var a=this.H.get(this[h].Ob()).bb();return[ke(this.qa.get(a),[this[h].sa()])]};
function yh(a){this.m=a}K(yh,Fg);yh[t].Gb=function(a,b){this.ia=a;Nf(a,function(a){return a instanceof xh})[F](function(a){var d=this.Xi(a);if(0!=d[C]){var g=(new sh(this.m,a[h])).ei(b,d.map(function(a){return b.Gd(a.Ud)}));if(null!==g){var k=new N;d[F](function(a){k.set(a.Ud,a)},this);this.ia=this.Qk(g,k,a,b)}}},this);return this.ia};yh[t].Xi=function(a){var b=[];for(a=a[xb]();a;)a instanceof vh&&b[x](a),a=a[xb]();return b};
yh[t].Qk=function(a,b,c){a.Aj().map(function(a){return b.get(a)})[F](Of);a=new uh(this.m,a.wb,a.ag(),!1);var d=new wh(this.m,c[h]);d.ka(a);Sf(c,c,d,a);return a.mb()};
function zh(a,b){U[r](this,0,-1);this.H=a.o(Bd);this.L=b}K(zh,U);f(zh[t],function(){return"insert("+this.L[u]()+")"});zh[t].la=function(a,b,c){Ah(this.L,c[db],this.H);a.xb(this.L,c[db]);return[ke(c[db],[this.L[u]()])]};function Ah(a,b,c){a=a.Eb().Ee();if(null===a?0:a.h[0][nb]){var d=a.h[0].fa[u](),g=c.get(a.l()).max()[0]||0;b[F](function(a){if(0==a.u()[d]||null==a.u()[d])g++,a.u()[d]=g})}}function Bh(a,b){U[r](this,0,-1);this.H=a.o(Bd);this.L=b}K(Bh,U);
f(Bh[t],function(){return"insert_replace("+this.L[u]()+")"});Bh[t].la=function(a,b,c){Ah(this.L,c[db],this.H);a.Ke(this.L,c[db]);return[ke(c[db],[this.L[u]()])]};
function Ch(a,b){U[r](this,2,0);this.Og=a;this.rg=b}K(Ch,U);f(Ch[t],function(){return(this.rg?"left_outer_join":"join")+"("+this.Og[D]()+")"});Ch[t].la=function(a,b){return[this.Og.Di(b[0],b[1],this.rg)]};
function Dh(){U[r](this,1,1)}K(Dh,U);f(Dh[t],Gb("limit(?)"));Dh[t].jd=function(a){return this[D]()[eb]("?",a.na[D]())};Dh[t].la=function(a,b,c){b[0][B][A](c.na);return b};
function Eh(a){U[r](this,-1,1);this.K=a}K(Eh,U);H=Eh[t];f(H,function(){return"order_by("+De(this.K)+")"});H.la=function(a,b){if(1==b[C]){var c=this.Ti(b[0]);(null===c?b[0]:b[0].qc(c))[B][Za](this.Ai[E](this))}else b[Za](this.Mk[E](this));return b};H.Ti=function(a){for(var b=null,c=0;c<this.K[C];c++){var d=hg(this.K[c].I);if(a.Rj(d)){b=d;break}}return b};
H.M=function(a,b){var c=null,d=null,g=null,k=-1;do k++,g=this.K[k].I,c=this.K[k].ob,d=a(g),g=b(g);while(d==g&&k+1<this.K[C]);d=d<g?-1:d>g?1:0;return 1==c?d:-d};H.Mk=function(a,b){return this.M(function(b){return b instanceof T?a.qc(b):a[B][a[B][C]-1].N(b)},function(a){return a instanceof T?b.qc(a):b[B][b[B][C]-1].N(a)})};H.Ai=function(a,b){return this.M(function(b){return a.N(b)},function(a){return b.N(a)})};
function Fh(a,b){this.Ia=a;this.F=b}Fh[t].fg=function(){return this.F[ab](function(a){return a instanceof T},this)?this.Pj():this.Qj()};
Fh[t].Pj=function(){if(1==this.F[C]&&"DISTINCT"==this.F[0].ec){var a=this.Ia.qc(this.F[0])[B].map(function(a){var b=new le(new dd(-1,{}),this.Ia.Me());b.ff(this.F[0],a.N(this.F[0][ib]));return b},this);return new ee(a,[])}var b=new le(new dd(-1,{}),this.Ia.Me());this.F[F](function(a){var d=a instanceof T?this.Ia.qc(a):this.Ia[B][0].N(a);b.ff(a,d)},this);return new ee([b],this.Ia.W())};
Fh[t].Qj=function(){var a=e(this.Ia[B][C]),b=this.Ia.Me();this.Ia[B][F](function(c,d){a[d]=new le(new dd(c.xa.id(),{}),b);this.F[F](function(b){a[d].ff(b,c.N(b))},this)},this);return new ee(a,this.Ia.W())};function Gh(a,b){var c=a.map(function(a){return(new Fh(a,b)).fg()[B][0]});return new ee(c,a[0].W())};
function Hh(a,b){U[r](this,-1,1);this.h=a;this.Pb=b}K(Hh,U);H=Hh[t];f(H,function(){var a="project("+this.h[D]();if(null!==this.Pb)var b=this.Pb.map(function(a){return a.l()})[m](", "),a=a+(", groupBy("+b+")");return a+")"});H.la=function(a,b){return 0==b[C]?[he()]:1==b[C]?[this.Ki(b[0])]:[this.Ii(b)]};H.Sj=function(){return this.h[ab](function(a){return a instanceof T})||null!==this.Pb};H.Ii=function(a){return Gh(a,this.h)};H.Ki=function(a){return 0==this.h[C]?a:(new Fh(a,this.h)).fg()};
function Ih(){U[r](this,1,1)}K(Ih,U);f(Ih[t],Gb("skip(?)"));Ih[t].jd=function(a){return this[D]()[eb]("?",a.ja[D]())};Ih[t].la=function(a,b,c){return[new ee(b[0][B][n](c.ja),b[0].W())]};
function Jh(){}K(Jh,Fg);Jh[t].Gb=function(a){var b=Nf(a,function(a){return a instanceof Dh||a instanceof Ih});if(0==b[C])return a;var c=this.Wi(a);if(null===c)return a;b[F](function(a){this.pk(a,c)},this);return c.mb()};Jh[t].pk=function(a,b){a instanceof Dh?b.ld=!0:b.md=!0;return Of(a).parent};Jh[t].Wi=function(a){a=Nf(a,function(a){return a instanceof uh},function(a){return a instanceof Hh&&a.Sj()||a instanceof Eh||1!=a.ya()||a instanceof vh});return 0<a[C]?a[0]:null};
function Kh(a){this.m=a}K(Kh,Fg);Kh[t].Gb=function(a){var b=Lh(a);if(null===b)return a;a=this.Bh(b);a==b&&(a=this.Ah(b));return a.mb()};Kh[t].Bh=function(a){var b=a,c=Mh(a.sb(0));if(null!==c){var d;d=a.K;for(var g=null,k=c[h].Ea(),l=0;l<k[C]&&null===g;l++)g=Nh(k[l],d);d=g;if(null===d)return b;b=new uh(this.m,d.wb,new qh(d.wb),d.sg);d=new wh(this.m,c[h]);d.ka(b);Of(a);b=Sf(c,c,d,b)}return b};
Kh[t].Ah=function(a){var b=a,c=Oh(a.sb(0));if(null!==c){var d=Nh(c[lb],a.K);if(null===d)return b;c.cf=d.sg;b=Of(a).parent}return b};function Oh(a){a=Nf(a,function(a){return a instanceof uh},function(a){return 1!=a.ya()});return 0<a[C]?a[0]:null}function Mh(a){a=Nf(a,function(a){return a instanceof xh},function(a){return 1!=a.ya()});return 0<a[C]?a[0]:null}function Lh(a){a=Nf(a,function(a){return a instanceof Eh});return 0<a[C]?a[0]:null}
function Nh(a,b){if(a.h[C]!=b[C]||!b[Ua](function(b,c){return b.I[u]()==a.h[c].fa[u]()}))return null;var c=Ph(b,a);return c[0]||c[1]?{wb:a,sg:c[1]}:null}function Ph(a,b){var c=a[Ka](function(a,b){return a<<1|(0==b.ob?0:1)},0),d=b.h[Ka](function(a,b){return a<<1|(0==b.ob?0:1)},0),d=c^d,c=0==d,d=d==ba.pow(2,ba.max(a[C],b.h[C]))-1;return[c,d]};
function Qh(a,b,c){this.Ca=a;this.Ze=b;this.df=c}Qh[t].pc=function(){this.df[F](function(a){this.Ca=a.Gb(this.Ca,this.Ze)},this);return this.Ca};
function Rh(a,b){U[r](this,1,1);this.L=a;this.nl=b}K(Rh,U);f(Rh[t],function(){return"update("+this.L[u]()+")"});Rh[t].la=function(a,b){var c=b[0][B].map(function(a){var b=this.L.mc(a.xa.Ja());this.nl[F](function(a){b.u()[a.I[u]()]=a[v]},this);return b},this);a[Va](this.L,c);return[he()]};
function Sh(a){this.m=a}Sh[t].create=function(a,b){var c=a.mb();if(c instanceof sg||c instanceof rg)return this.ue(a,b);if(c instanceof yg||c instanceof Cg||c instanceof Dg)return this.ue(a,b,[new yh(this.m),new Kh(this.m),new Jh]);if(c instanceof tg||c instanceof ug)return this.ue(a,b,[new yh(this.m)]);throw new P(8);};Sh[t].ue=function(a,b,c){var d=Lf(a.mb(),J(this.kk,this));null!=c&&(d=(new Qh(d,b,c)).pc());return new Ee(d,a.ga())};
Sh[t].kk=function(a){if(a instanceof yg)return new Hh(a.h,a.Pb);if(a instanceof Bg)return new oh(a.h);if(a instanceof Ag)return new ig(a.h);if(a instanceof zg)return new Eh(a.K);if(a instanceof Dg)return new Ih;if(a instanceof Cg)return new Dh;if(a instanceof vg)return new vh(a.Ba.da());if(a instanceof xg)return new Ig;if(a instanceof Eg)return new Ch(a.Ba,a.qg);if(a instanceof wg)return new xh(this.m,a[h]);if(a instanceof tg)return new nh(a[h]);if(a instanceof ug)return new Rh(a[h],a.of);if(a instanceof
sg)return new Bh(this.m,a[h]);if(a instanceof rg)return new zh(this.m,a[h]);throw new P(514);};

function Th(a){this.ik=new mh;this.Ak=new Sh(a)}Th[t].zj=function(a){var b=this.ik[jb](a);return this.Ak[jb](b,a)};
function Uh(){this.Bg=new N}H=Uh[t];H.Cd=function(a){var b=this.Bg.get(a[u](),null);null===b&&(b=new Vh,this.Bg.set(a[u](),b));return b};H.Mj=function(a,b,c){b[F](function(b){this.Cd(b).Lj(a,c)},this)};H.Qh=function(a,b,c){return b[Ua](function(b){return this.Cd(b).Ph(a,c)},this)};H.Sg=function(a,b,c){var d=this.Qh(a,b,c);d&&this.Mj(a,b,c);return d};H.releaseLock=function(a,b){b[F](function(b){this.Cd(b).releaseLock(a)},this)};H.fi=function(a){a[F](function(a){this.Cd(a).gb=null},this)};
function Vh(){this.bc=this.Wa=this.gb=this.Oc=null}Vh[t].releaseLock=function(a){this.Oc==a&&(this.Oc=null);this.gb==a&&(this.gb=null);null===this.Wa||this.Wa[w](a);null===this.bc||this.bc[w](a)};Vh[t].Ph=function(a,b){var c=null===this.Wa||this.Wa.Ha();return 0==b?(null===this.bc||this.bc.Ha())&&c&&null===this.Oc&&null!==this.gb&&this.gb==a:3==b?null===this.Oc&&null===this.gb&&null!==this.Wa&&this.Wa[rb](a):1==b?null===this.gb:c&&(null===this.gb||this.gb==a)};
Vh[t].Lj=function(a,b){0==b?(this.gb=null,this.Oc=a):3==b?(null===this.bc&&(this.bc=new O),this.bc.add(a),null===this.Wa&&(this.Wa=new O),this.Wa[w](a)):1==b?(null===this.Wa&&(this.Wa=new O),this.Wa.add(a)):2==b&&(this.gb=a)};
function Wh(){this.Yb=new Xh;this.ad=new Uh}H=Wh[t];H.$b=function(a){(2>a[zb]()||2>a[zb]())&&this.ad.fi(a.ga().c());this.Yb.xb(a);this.te();return a.Vc().ha};H.te=function(){for(var a=this.Yb.c(),b=0;b<a[C];b++){var c=a[b],d=!1;if(d=0==c.Z()?this.Tg(c,1,3):this.Tg(c,2,0))this.Yb[w](c),this.Li(c)}};H.Tg=function(a,b,c){var d=!1,g=a.ga().c();this.ad.Sg(a.da(),g,b)&&(d=this.ad.Sg(a.da(),g,c));return d};H.Li=function(a){a[Qa]()[z](J(this.wk,this,a),J(this.vk,this,a))};
H.wk=function(a,b){this.ad.releaseLock(a.da(),a.ga().c());a.Vc()[Bb](b);this.te()};H.vk=function(a,b){this.ad.releaseLock(a.da(),a.ga().c());a.Vc()[La](b);this.te()};function Xh(){this.Yb=[]}Xh[t].xb=function(a){tc(this.Yb,a,function(a,c){var d=a[zb]()-c[zb]();return 0==d?a.da()-c.da():d})};Xh[t].c=function(){return this.Yb[n]()};wa(Xh[t],function(a){var b=this.Yb;a=fc(b,a);var c;(c=0<=a)&&lc(b,a);return c});

function Yh(a,b){this.Ci=pe.Be();this.$e=a;this.Qd=b;this.F=this.vi()}Yh[t].vi=function(){if(0<this.$e.h[C])return this.$e.h;var a=[];this.$e.f[F](function(b){b.tb()[F](function(b){a[x](b)})});return a};Yh[t].M=function(a,b){return this.F[Ua](function(c){return this.Ci.Ae(c.Z(),"eq")(a.N(c),b.N(c))},this)};
Yh[t].zh=function(a,b){for(var c=null===a?[]:a[B],d=md(c,b[B],J(this.M,this),function(a){return c[a]}),g=[],k=0,l=0;l<c[C];l++){var p=c[l];d[k]==p?k++:(p=this.Qd[A](k,1),p=Zh(l,p,0,this.Qd),g[x](p))}d=md(c,b[B],J(this.M,this),function(a,c){return b[B][c]});for(l=k=0;l<b[B][C];l++)p=b[B][l],d[k]==p?k++:(this.Qd[A](l,0,p.xa.u()),p=Zh(l,[],1,this.Qd),g[x](p));return g};function Zh(a,b,c,d){return{ol:c,index:a,object:d,ql:b,type:"splice"}};
function $h(){this.oc=new N}H=$h[t];H.Fe=function(a){return Rb(a)[D]()};H.ee=function(a,b){var c=this.Fe(a.Fd()),d=this.oc.get(c,null);null===d&&(d=new ai(a),this.oc.set(c,d));d.ee(b)};H.bf=function(a,b){var c=this.Fe(a.Fd()),d=this.oc.get(c,null);L(null!=d,"Attempted to unobserve a query that was not observed.");var g=d.bf(b);L(g,"removeObserver: Inconsistent state detected.");d.Uj()||this.oc[w](c)};
H.He=function(a){var b=new O;a[F](function(a){b.add(a[u]())});var c=[];this.oc.c()[F](function(a){a=a.Xc();a[mb].f[ab](function(a){return b[rb](a[u]())})&&c[x](a)});return c};H.mh=function(a,b){var c=this.Fe(null!=a.Hc?a.Hc:a),c=this.oc.get(c,null);return null!==c?(c.ml(b),!0):!1};function ai(a){this.Kh=a;this.dd=new O;this.tk=[];this.yg=null;this.yi=new Yh(a.Fd(),this.tk)}H=ai[t];H.ee=function(a){this.dd[rb](a)?bc("Attempted to register observer twice."):this.dd.add(a)};H.bf=function(a){return this.dd[w](a)};
H.Xc=function(){return this.Kh.vj()};H.Uj=function(){return 0<this.dd.ra()};H.ml=function(a){var b=this.yi.zh(this.yg,a);this.yg=a;0<b[C]&&this.dd.c()[F](function(a){a(b)})};
function bi(a,b){var c=a.o(Fd),d=b||{},g=new gf;a.pb(Ad,g);var g=null,k=!1;switch(d.storeType||0){case 1:g=new Ue(c);break;case 5:g=new Ve(c);break;case 4:g=new Ze(a,c,d.webSqlDbSize);break;case 3:g=new Oe(c,d.firebase);k=!0;break;default:g=new Se(a,c)}a.pb(zd,g);var l=new Hf;a.pb(Bd,l);return g.Fa(d.onUpgrade)[z](function(){a.pb(Cd,new Th(a));var b=new Wh;a.pb(Dd,b);b=new $h;a.pb(Ed,b);return l.Fa(c)})[z](function(){k&&(new Je(a)).bl();return(new Gf(a)).Fa(c)})};

function ci(a,b){this.m=a;this.Cb=a.o(zd);this.Ya=a.o(Dd);this.Fb=a.o(Ed);this.pa=new O(b);this.Ta=new $d(this.m,this.pa.c());this.Zb=Yc();this.Pc=Yc();this.qf=Yc()}H=ci[t];ma(H,function(){this.qf[Bb]();return this.Pc.ha});H.Z=Gb(1);H.ga=G("pa");H.Vc=G("Zb");H.da=function(){return Rb(this)};Ea(H,Gb(2));H.qh=function(){this.Ya.$b(this);return this.qf.ha};
H.Hh=function(a){a=a.Xc();return a.Xe.mb()[Qa](this.Ta,a[mb])[z](function(a){return a[0].Ce()},J(function(a){this.Ta.Hb();var c=new Pc(a[q]);this.Pc[La](c);throw a;},this))};H.oa=function(){this.Cb.Mb(this.Z(),this.Ta).oa()[z](J(function(){this.gd();this.Pc[Bb]()},this),J(function(a){this.Ta.Hb();this.Pc[La](a)},this));return this.Zb.ha};H.Hb=function(){this.Ta.Hb();this.Pc[Bb]();return this.Zb.ha};H.gd=function(){var a=this.Fb.He(this.pa.c());0!=a[C]&&(a=new He(this.m,a),this.Ya.$b(a))};
function di(a){this.m=a;this.Ya=a.o(Dd);this.kd=null;this.Ka=0}I("lf.proc.Transaction",di,void 0);var ei=new N(0,new O([1,4]),1,new O([2]),2,new O([3,5,6]),3,new O([2,7]),4,new O([7]),5,new O([7]),6,new O([7]));di[t].Oa=function(a){var b=ei.get(this.Ka,null);if(null===b||!b[rb](a))throw new P(107,this.Ka,a);this.Ka=a};
ma(di[t],function(a){this.Oa(4);var b=[];try{a[F](function(a){a.kb();b[x](a.Xc())},this)}catch(c){return this.Oa(7),Uc(c)}a=new Jg(this.m,b);return this.Ya.$b(a)[z](J(function(a){this.Oa(7);return a.map(function(a){return a.Ce()})},this),J(function(a){this.Oa(7);throw a;},this))});ma(di[t],di[t][Qa]);di[t].Ih=function(a){this.Oa(1);this.kd=new ci(this.m,a);return this.kd.qh()[z](J(function(){this.Oa(2)},this))};di[t].begin=di[t].Ih;
di[t].Gh=function(a){this.Oa(3);return this.kd.Hh(a)[z](J(function(a){this.Oa(2);return a},this),J(function(a){this.Oa(7);throw a;},this))};di[t].attach=di[t].Gh;di[t].oa=function(){this.Oa(5);return this.kd.oa()[z](J(function(){this.Oa(7)},this))};di[t].commit=di[t].oa;di[t].Hb=function(){this.Oa(6);return this.kd.Hb()[z](J(function(){this.Oa(7)},this))};di[t].rollback=di[t].Hb;
function X(a){this.m=a;this.s=a.o(Fd);this.Je=!1}I("lf.proc.Database",X,void 0);X[t].Fa=function(a){this.m.pb(Fd,this.s);return bi(this.m,a)[z](J(function(){this.Je=!0;return this},this))};X[t].init=X[t].Fa;X[t].vb=G("s");X[t].getSchema=X[t].vb;X[t].jc=function(){if(!this.Je)throw new P(2);};X[t].select=function(a){this.jc();return new W(this.m,1!=arguments[C]||null!=arguments[0]?e[t][n][r](arguments):[])};X[t].select=X[t].select;X[t].xb=function(){this.jc();return new Zg(this.m)};X[t].insert=X[t].xb;
X[t].Ke=function(){this.jc();return new Zg(this.m,!0)};X[t].insertOrReplace=X[t].Ke;qa(X[t],function(a){this.jc();return new ch(this.m,a)});qa(X[t],X[t][Va]);ra(X[t],function(){this.jc();return new Yg(this.m)});X[t]["delete"]=X[t][Ya];X[t].observe=function(a,b){this.m.o(Ed).ee(a,b)};X[t].observe=X[t].observe;X[t].unobserve=function(a,b){this.m.o(Ed).bf(a,b)};X[t].unobserve=X[t].unobserve;X[t].ti=function(){this.jc();return new di(this.m)};X[t].createTransaction=X[t].ti;
oa(X[t],function(){try{this.m.o(zd)[Ra]()}catch(a){}this.m[cb]();this.Je=!1});oa(X[t],X[t][Ra]);
function Y(a,b,c,d,g,k){this.L=a;this.B=b;this.ug=c;this.pg=d;this.lh=g;this.jb=k||null}I("lf.schema.BaseColumn",Y,void 0);H=Y[t];na(H,G("B"));H.l=function(){return this.L.sa()+"."+this.B};f(H,function(){return this.l()});H.O=G("L");H.Z=G("lh");H.ab=G("jb");H.Ea=function(){null==this.ua&&(this.ua=[],this.O().Ea()[F](function(a){-1!=a.h.map(function(a){return a.fa[u]()})[$a](this.B)&&this.ua[x](a)},this));return this.ua};H.tc=G("pg");H.$c=G("ug");H.Sa=function(a){return cg(this,a,"eq")};Y[t].eq=Y[t].Sa;
Y[t].Cg=function(a){return cg(this,a,"neq")};Y[t].neq=Y[t].Cg;Y[t].Qe=function(a){return cg(this,a,"lt")};Y[t].lt=Y[t].Qe;Y[t].jk=function(a){return cg(this,a,"lte")};Y[t].lte=Y[t].jk;Y[t].Nj=function(a){return cg(this,a,"gt")};Y[t].gt=Y[t].Nj;Y[t].Oj=function(a){return cg(this,a,"gte")};Y[t].gte=Y[t].Oj;Y[t].match=function(a){return cg(this,a,"match")};Y[t].match=Y[t].match;Y[t].Jh=function(a,b){return cg(this,[a,b],"between")};Y[t].between=Y[t].Jh;Y[t].Vj=function(a){return cg(this,a,"in")};
Y[t]["in"]=Y[t].Vj;Y[t].ck=function(){return this.Sa(null)};Y[t].isNull=Y[t].ck;Y[t].bk=function(){return this.Cg(null)};Y[t].isNotNull=Y[t].bk;Y[t].Ec=function(a){return new Y(this.L,this.B,this.ug,this.pg,this.lh,a)};Y[t].as=Y[t].Ec;
function fi(){this.$d=new N}var gi;ta(fi[t],function(){this.$d[cb]()});ta(fi[t],fi[t][cb]);fi[t].pb=function(a,b){this.$d.set(a[D](),b);return b};fi[t].registerService=fi[t].pb;fi[t].o=function(a){var b=this.$d.get(a[D](),null);if(null==b)throw new P(7,a[D]());return b};fi[t].getService=fi[t].o;fi[t].Oe=function(a){return this.$d.A(a[D]())};fi[t].isRegistered=fi[t].Oe;
function hi(a){this.s=a;this.af=new af;this.Jg=new af;this.If=new af;this.i=new af;this.pe=new af;this.Yj()}H=hi[t];H.Yj=function(){this.s.Za()[F](function(a){var b=new ef;a.Eb().Zf()[F](function(c){var d=this.af.get(c.eb)||[];d[x](c);this.af.set(c.eb,d);b.add(this.s[h](c.eb));(d=this.i.get(c.eb))||(d=new ef);d.add(a);this.i.set(c.eb,d);this.If.set(a[u]()+"."+c.lc,c.eb);c=c.eb+"."+c.wc;d=this.pe.get(c)||[];d[x](a[u]());this.pe.set(c,d)},this);0!=b[Db]&&this.Jg.set(a[u](),b)},this)};
H.Cj=function(a){return this.af.get(a)||null};H.Rf=function(a,b){var c=b.get(a);return c?ff(c):[]};H.xj=function(a){return this.Rf(a,this.Jg)};H.yj=function(a){var b=new ef;a[F](function(a){(a=this.If.get(a))&&b.add(a)},this);return ff(b).map(function(a){return this.s[h](a)},this)};H.Vf=function(a){return this.Rf(a,this.i)};H.nj=function(a){var b=new ef;a[F](function(a){(a=this.pe.get(a))&&a[F](function(a){b.add(a)})},this);return ff(b).map(function(a){return this.s[h](a)},this)};
function ii(a,b,c){this.Dk=a;this.rk=b;this.Yi=c}ii[t].Ee=G("Dk");ii[t].uj=G("rk");ii[t].Zf=G("Yi");
function ji(a,b){var c=a.ref[Ja](".");if(2!=c[C])throw new P(540,b);this.lc=a.local;this.eb=c[0];this.wc=c[1];ja(this,b);this.action=a.action;this.timing=a[Ma]};
function Z(a){this.B=a;this.F=new af;this.mf=new ef;this.Ac=new ef;this.Pd=new ef;var b=this.B;this.xc="pk"+(b[0].toUpperCase()+b.substring(1));this.ua=new af;this.Td=!1;this.kc(a);this.Tf=[]}I("lf.schema.TableBuilder",Z,void 0);function ki(a){ja(this,a[q]);this.ob=a.order;this.autoIncrement=a[nb]}var li=new ef([0,6]);Z[t].kc=function(a){if(!/^[A-Za-z_][A-Za-z0-9_]*$/.test(a))throw new P(502,a);if(this.F.has(a)||this.ua.has(a)||this.Ac.has(a))throw new P(503,this.B+"."+a);};
Z[t].$h=function(a){var b=!1;a[F](function(a){var d=this.F.get(a[q]);b=b||a[nb];if(a[nb]&&3!=d)throw new P(504);},this);if(b&&1<a[C])throw new P(505);};Z[t].sh=function(a,b){this.kc(a);this.F.set(a,b);li.has(b)&&this.uf([a]);return this};Z[t].addColumn=Z[t].sh;Z[t].uh=function(a,b){this.kc(this.xc);var c=this.Od(a,!0,void 0,b);this.$h(c);1==c[C]&&this.mf.add(c[0][q]);this.Ac.add(this.xc);this.ua.set(this.xc,c);return this};Z[t].addPrimaryKey=Z[t].uh;
Z[t].th=function(a,b){this.kc(a);var c=new ji(b,this.B+"."+a);Ib(c.action)||(c.action=0);Ib(c[Ma])||(c.timing=0);if(1==c.action&&1==c[Ma])throw new P(506);if(!this.F.has(c.lc))throw new P(540,a);this.Tf[x](c);this.tf(a,[c.lc],!1);return this};Z[t].addForeignKey=Z[t].th;Z[t].vh=function(a,b){this.kc(a);var c=this.Od(b,!0);1==c[C]&&this.mf.add(c[0][q]);this.ua.set(a,c);this.Ac.add(a);return this};Z[t].addUnique=Z[t].vh;
Z[t].uf=function(a){a=this.Od(a,!1);this.Zh(a);a[F](function(a){this.Pd.add(a[q])},this);return this};Z[t].addNullable=Z[t].uf;Z[t].Zh=function(a){bf(this.ua)[F](function(b){var c=new ef;this.ua.get(b)[F](function(a){c.add(a[q])});var d=a[Ga](function(a){return c.has(a[q])});if(1<c[Db]&&0<d[C])throw new P(507,b,d[m](","));},this)};Z[t].tf=function(a,b,c,d){this.kc(a);b=this.Od(b,!0,d);this.Yh(a,b);c&&this.Ac.add(a);this.ua.set(a,b);return this};Z[t].addIndex=Z[t].tf;
Z[t].Yh=function(a,b){if(1<b[C]){var c=b[Ga](function(a){return this.Pd.has(a[q])},this);if(0<c[C])throw new P(507,a,c[m](","));}};Z[t].Xb=Fb("Td");Z[t].persistentIndex=Z[t].Xb;Z[t].vb=function(){return new (this.lj())};Z[t].getSchema=Z[t].vb;Z[t].Tc=G("Tf");
Z[t].Od=function(a,b,c,d){var g=a,g="string"==typeof a[0]?a.map(function(a){return new ki({name:a,order:c||1,autoIncrement:d||!1})}):a.map(function(a){return new ki(a)});g[F](function(a){if(!this.F.has(a[q]))throw new P(508,this.B,a[q]);if(b){var c=this.F.get(a[q]);if(0==c||6==c)throw new P(509,this.B,a[q]);}},this);return g};
Z[t].lj=function(){function a(){function a(c){return b.ua.get(c).map(function(a){return{fa:this[a[q]],ob:a.ob,autoIncrement:a[nb]}},this)}var d=bf(b.F).map(function(a){this[a]=new Y(this,a,b.mf.has(a),b.Pd.has(a),b.F.get(a));return this[a]},this),g=bf(b.ua).map(function(d){return new eg(b.B,d,b.Ac.has(d),a[r](this,d))},this);fg[r](this,b.B,d,g,b.Td);var k=b.ua.has(b.xc)?new eg(b.B,b.xc,!0,a[r](this,b.xc)):null,l=d[Ga](function(a){return!b.Pd.has(a[u]())}),p=ff(b.Ac).map(function(d){return new eg(b.B,
d,!0,a[r](this,d))},this);this.ji=new ii(k,l,b.Tc(),p);this.Wg=b.hj(d,g)}var b=this;K(a,fg);a[t].Db=function(a){return new this.Wg(ed++,a)};a[t].createRow=a[t].Db;a[t].mc=function(a){var b={};this.tb()[F](function(g){var k=g[u]();g=g.Z();var l=a[v][k];if(0==g)if(null===l)g=l;else if(g=l,""==g)g=null;else{0!=g[C]%2&&(g="0"+g);for(var l=new ArrayBuffer(g[C]/2),p=new Uint8Array(l),y=0,va=0;y<g[C];y+=2)p[va++]=da(g.substr(y,2),16);g=l}else g=2==g?null===l?l:new Date(l):l;b[k]=g},this);return new this.Wg(a.id,
b)};a[t].deserializeRow=a[t].mc;a[t].Eb=G("ji");a[t].getConstraint=a[t].Eb;return a};
Z[t].hj=function(a,b){function c(c,d){this.F=a;this.ua=b;dd[r](this,c,d)}K(c,dd);c[t].Mf=function(){var a={};this.F[F](function(b){a[b[u]()]=b.tc()?null:Wd[b.Z()]});return a};c[t].ih=function(){var a={};this.F[F](function(b){var c=b[u]();b=b.Z();var d=this.u()[c];a[c]=0==b?null===d?d:hd(d):2==b?null===d?d:d[Ab]():d},this);return a};var d=J(function(a){var b=this.F.get(a[u]());return 2==b?function(b){b=b[a[u]()];return a.tc()&&null===b?null:b[Ab]()}:1==b?function(b){return a.tc()?(b=b[a[u]()],null===
b?null:b?1:0):b[a[u]()]?1:0}:function(b){return b[a[u]()]}},this),g=J(function(a){var b=a.map(function(a){return d(a.fa)});return function(a){return b.map(function(b){return b(a)})}},this),k={};b[F](function(a){var b=a.l();a=1==a.h[C]?d(a.h[0].fa):g(a.h);k[b]=a});c[t].Rb=function(a){return-1!=a[$a]("#")?this.id():k[qb](a)?k[a](this.u()):null};return c};
function mi(a,b){this.s=new ni(a,b);this.qb=new N;this.Qc=!1}I("lf.schema.Builder",mi,void 0);H=mi[t];H.Wh=function(a){a.Tc()[F](function(b){var c=b.eb;if(!this.qb.A(c))throw new P(536,b[q]);var c=this.qb.get(c).vb(),d=b.wc;if(!c[qb](d))throw new P(537,b[q]);if(a.vb()[b.lc].Z()!=c[d].Z())throw new P(538,b[q]);if(!c[d].$c())throw new P(539,b[q]);},this)};H.Vh=function(a){a.Tc()[F](function(a){this.qb.get(a.eb).Tc()[F](function(c){if(c.lc==a.wc)throw new P(534,a[q]);},this)},this)};
H.Si=function(){this.Qc||(this.qb.c()[F](function(a){this.Wh(a);this.s.Wk(a.vb())},this),this.qb.c()[F](this.Vh,this),this.Uh(),this.qb[cb](),this.Qc=!0)};H.Ef=function(a,b){a.pf||(a.pf=!0,a.Te=!0,a.Pf[F](function(c){c=b.get(c);if(!c.pf)this.Ef(c,b);else if(c.Te&&a!=c)throw new P(533);},this));a.Te=!1};H.Uh=function(){var a=new af;this.s.G.J()[F](function(b){a.set(b,new oi(b))},this);this.qb[F](function(b,c){b.Tc()[F](function(b){a.get(b.eb).Pf.add(c)})});cf(a)[F](function(b){this.Ef(b,a)},this)};
function oi(a){this.Te=this.pf=!1;this.Pf=new ef;this.jf=a}H.vb=function(){this.Qc||this.Si();return this.s};mi[t].getSchema=mi[t].vb;mi[t].$f=function(){var a=new yd("ns_"+this.s[q]()),b;gi||(gi=new fi);b=gi;var c=null;b.Oe(a)?c=b.o(a):(c=new fi,b.pb(a,c));return c};mi[t].getGlobal=mi[t].$f;mi[t].connect=function(a){var b=this.$f();b.Oe(Fd)||b.pb(Fd,this.vb());return(new X(b)).Fa(a)};mi[t].connect=mi[t].connect;
mi[t].ri=function(a){if(this.qb.A(a))throw new P(503,a);if(this.Qc)throw new P(535);this.qb.set(a,new Z(a));return this.qb.get(a)};mi[t].createTable=mi[t].ri;mi[t].hf=function(a){if(this.Qc)throw new P(535);this.s.hf(a);return this};mi[t].setPragma=mi[t].hf;function ni(a,b){this.B=a;this.Qa=b;this.G=new N;this.Ng={zi:!1}}I("lf.schema.DatabaseSchema",ni,void 0);ja(ni[t],G("B"));ja(ni[t],ni[t][q]);ni[t].version=G("Qa");ni[t].version=ni[t][sb];ni[t].Za=function(){return this.G.c()};ni[t].tables=ni[t].Za;
ia(ni[t],function(a){if(!this.G.A(a))throw new P(101,a);return this.G.get(a)});ia(ni[t],ni[t][h]);ni[t].info=function(){this.kg||(this.kg=new hi(this));return this.kg};ni[t].Wk=function(a){this.G.set(a[u](),a)};ni[t].Mg=G("Ng");ni[t].pragma=ni[t].Mg;ni[t].hf=Fb("Ng");I("lf.schema.create",function(a,b){return new mi(a,b)},void 0);}.bind(window))()
