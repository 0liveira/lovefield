/*
  Copyright 2014 The Lovefield Project Authors. All Rights Reserved.

  Licensed under the Apache License, Version 2.0 (the "License");
  you may not use this file except in compliance with the License.
  You may obtain a copy of the License at

  http://www.apache.org/licenses/LICENSE-2.0

  Unless required by applicable law or agreed to in writing, software
  distributed under the License is distributed on an "AS IS" BASIS,
  WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
  See the License for the specific language governing permissions and
  limitations under the License.
*/
(function(){'use strict';var aa=window,ba=Object,ca=Function,da=document,ea=Math,e=Array,fa=Error,ga=parseInt;function ha(a,b){return a.exec=b}function ia(a,b){return a.getName=b}function ja(a,b){return a.remove=b}function ka(a,b){return a.forEach=b}function la(a,b){return a.values=b}function ma(a,b){return a.clear=b}function na(a,b){return a.bind=b}function f(a,b){return a.toString=b}function oa(a,b){return a.table=b}function pa(a,b){return a.dump=b}function qa(a,b){return a.next=b}
function ra(a,b){return a.close=b}function sa(a,b){return a.clone=b}function ta(a,b){return a.child=b}function ua(a,b){return a.onerror=b}function va(a,b){return a.value=b}function wa(a,b){return a.getPriority=b}function xa(a,b){return a.delete=b}function ya(a,b){return a.subscribe=b}function za(a,b){return a.name=b}function Aa(a,b){return a.length=b}function Ba(a,b){return a.onsuccess=b}function Ca(a,b){return a.update=b}
var Da="context",Ea="filter",Fa="version",Ga="getParent",Ha="shift",Ia="exec",Ja="replace",Ka="concat",La="objectStoreNames",k="getName",m="remove",Ma="orderByChild",Na="autoIncrement",n="forEach",Oa="values",Pa="clear",q="bind",Qa="getTime",Sa="continue",r="toString",Ta="global",Ua="propertyIsEnumerable",Va="create",t="table",Wa="compare",Xa="result",Ya="size",Za="index",$a="next",ab="split",bb="hasOwnProperty",cb="close",db="once",eb="setImmediate",fb="transaction",gb="child",hb="rows",u="contains",
ib="apply",v="push",jb="reject",kb="reduce",lb="addAll",w="slice",x="value",mb="item",nb="objectStore",ob="indexOf",pb="getPriority",qb="delete",rb="name",y="length",z="prototype",A="then",C="entries",sb="removeChild",tb="openCursor",ub="target",D="call",vb="resolve",wb="some",xb="sort",yb="every",zb="update",E="splice",F="join",Ab="unshift";function Bb(){return function(){}}function Cb(a){return function(b){this[a]=b}}function G(a){return function(){return this[a]}}
function Db(a){return function(){return a}}var H,Eb=this;function Fb(a){return void 0!==a}function I(a,b,c){a=a[ab](".");c=c||Eb;a[0]in c||!c.execScript||c.execScript("var "+a[0]);for(var d;a[y]&&(d=a[Ha]());)!a[y]&&Fb(b)?c[d]=b:c=c[d]?c[d]:c[d]={}}function Gb(){}function Hb(a){a.ve=function(){return a.Sf?a.Sf:a.Sf=new a}}
function Ib(a){var b=typeof a;if("object"==b)if(a){if(a instanceof e)return"array";if(a instanceof ba)return b;var c=ba[z][r][D](a);if("[object Window]"==c)return"object";if("[object Array]"==c||"number"==typeof a[y]&&"undefined"!=typeof a[E]&&"undefined"!=typeof a[Ua]&&!a[Ua]("splice"))return"array";if("[object Function]"==c||"undefined"!=typeof a[D]&&"undefined"!=typeof a[Ua]&&!a[Ua]("call"))return"function"}else return"null";else if("function"==b&&"undefined"==typeof a[D])return"object";return b}
function Jb(a){return null===a}function Kb(a){return null!=a}function Lb(a){var b=Ib(a);return"array"==b||"object"==b&&"number"==typeof a[y]}function Mb(a){return"string"==typeof a}function Nb(a){return"function"==Ib(a)}function Ob(a){return a[Pb]||(a[Pb]=++Qb)}var Pb="closure_uid_"+(1E9*ea.random()>>>0),Qb=0;function Rb(a,b,c){return a[D][ib](a[q],arguments)}
function Sb(a,b,c){if(!a)throw fa();if(2<arguments[y]){var d=e[z][w][D](arguments,2);return function(){var c=e[z][w][D](arguments);e[z][Ab][ib](c,d);return a[ib](b,c)}}return function(){return a[ib](b,arguments)}}function J(a,b,c){J=ca[z][q]&&-1!=ca[z][q][r]()[ob]("native code")?Rb:Sb;return J[ib](null,arguments)}function Tb(a,b){var c=e[z][w][D](arguments,1);return function(){var b=c[w]();b[v][ib](b,arguments);return a[ib](this,b)}}
function K(a,b){function c(){}c.prototype=b[z];a.eb=b[z];a.prototype=new c;a[z].constructor=a;a.Lk=function(a,c,h){for(var l=e(arguments[y]-2),p=2;p<arguments[y];p++)l[p-2]=arguments[p];return b[z][c][ib](a,l)}}na(ca[z],ca[z][q]||function(a,b){if(1<arguments[y]){var c=e[z][w][D](arguments,1);c[Ab](this,a);return J[ib](null,c)}return J(this,a)});function Ub(a){if(fa.captureStackTrace)fa.captureStackTrace(this,Ub);else{var b=fa().stack;b&&(this.stack=b)}a&&(this.message=String(a))}K(Ub,fa);za(Ub[z],"CustomError");function Vb(a,b){for(var c=a[ab]("%s"),d="",g=e[z][w][D](arguments,1);g[y]&&1<c[y];)d+=c[Ha]()+g[Ha]();return d+c[F]("%s")};function Wb(a,b){b[Ab](a);Ub[D](this,Vb[ib](null,b));b[Ha]()}K(Wb,Ub);za(Wb[z],"AssertionError");function Xb(a,b,c,d){var g="Assertion failed";if(c)var g=g+(": "+c),h=d;else a&&(g+=": "+a,h=b);throw new Wb(""+g,h||[]);}function L(a,b,c){a||Xb("",null,b,e[z][w][D](arguments,2));return a}function Yb(a,b){throw new Wb("Failure"+(a?": "+a:""),e[z][w][D](arguments,1));}function Zb(a,b,c){Nb(a)||Xb("Expected function but got %s: %s.",[Ib(a),a],b,e[z][w][D](arguments,2));return a};function $b(a,b,c){this.Bj=c;this.Uh=a;this.lk=b;this.Md=0;this.Fd=null}$b[z].get=function(){var a;0<this.Md?(this.Md--,a=this.Fd,this.Fd=a[$a],qa(a,null)):a=this.Uh();return a};$b[z].put=function(a){this.lk(a);this.Md<this.Bj&&(this.Md++,qa(a,this.Fd),this.Fd=a)};var ac=e[z],bc=ac[ob]?function(a,b,c){L(null!=a[y]);return ac[ob][D](a,b,c)}:function(a,b,c){c=null==c?0:0>c?ea.max(0,a[y]+c):c;if(Mb(a))return Mb(b)&&1==b[y]?a[ob](b,c):-1;for(;c<a[y];c++)if(c in a&&a[c]===b)return c;return-1},cc=ac[n]?function(a,b,c){L(null!=a[y]);ac[n][D](a,b,c)}:function(a,b,c){for(var d=a[y],g=Mb(a)?a[ab](""):a,h=0;h<d;h++)h in g&&b[D](c,g[h],h,a)},dc=ac.map?function(a,b,c){L(null!=a[y]);return ac.map[D](a,b,c)}:function(a,b,c){for(var d=a[y],g=e(d),h=Mb(a)?a[ab](""):a,l=0;l<
d;l++)l in h&&(g[l]=b[D](c,h[l],l,a));return g},ec=ac[kb]?function(a,b,c,d){L(null!=a[y]);d&&(b=J(b,d));return ac[kb][D](a,b,c)}:function(a,b,c,d){var g=c;cc(a,function(c,l){g=b[D](d,g,c,l,a)});return g},fc=ac[wb]?function(a,b,c){L(null!=a[y]);return ac[wb][D](a,b,c)}:function(a,b,c){for(var d=a[y],g=Mb(a)?a[ab](""):a,h=0;h<d;h++)if(h in g&&b[D](c,g[h],h,a))return!0;return!1},gc=ac[yb]?function(a,b,c){L(null!=a[y]);return ac[yb][D](a,b,c)}:function(a,b,c){for(var d=a[y],g=Mb(a)?a[ab](""):a,h=0;h<
d;h++)if(h in g&&!b[D](c,g[h],h,a))return!1;return!0};function hc(a,b){L(null!=a[y]);return 1==ac[E][D](a,b,1)[y]}function ic(a,b,c){a:{for(var d=a[y],g=Mb(a)?a[ab](""):a,h=0;h<d;h++)if(h in g&&b[D](c,g[h],h,a)){b=h;break a}b=-1}return 0<=b?(hc(a,b),!0):!1}function jc(a){var b=a[y];if(0<b){for(var c=e(b),d=0;d<b;d++)c[d]=a[d];return c}return[]}
function kc(a,b){for(var c=1;c<arguments[y];c++){var d=arguments[c];if(Lb(d)){var g=a[y]||0,h=d[y]||0;Aa(a,g+h);for(var l=0;l<h;l++)a[g+l]=d[l]}else a[v](d)}}function lc(a,b,c,d){L(null!=a[y]);return ac[E][ib](a,mc(arguments,1))}function mc(a,b,c){L(null!=a[y]);return 2>=arguments[y]?ac[w][D](a,b):ac[w][D](a,b,c)}function nc(a,b,c,d,g){for(var h=0,l=a[y],p;h<l;){var B=h+l>>1,Ra;Ra=c?b[D](g,a[B],B,a):b(d,a[B]);0<Ra?h=B+1:(l=B,p=!Ra)}return p?h:~h}function oc(a,b){return a>b?1:a<b?-1:0}
function pc(a,b,c){c=nc(a,c||oc,!1,b);return 0>c?(lc(a,-(c+1),0,b),!0):!1}function qc(a,b){for(var c=[],d=0;d<b;d++)c[d]=a;return c}function rc(a){for(var b=[],c=0;c<arguments[y];c++){var d=arguments[c];if("array"==Ib(d))for(var g=0;g<d[y];g+=8192)for(var h=mc(d,g,g+8192),h=rc[ib](null,h),l=0;l<h[y];l++)b[v](h[l]);else b[v](d)}return b};function sc(a,b,c){for(var d in a)b[D](c,a[d],d,a)}function tc(a,b,c){for(var d in a)if(b[D](c,a[d],d,a))return!0;return!1}function uc(a){var b=[],c=0,d;for(d in a)b[c++]=a[d];return b}function vc(a){var b=[],c=0,d;for(d in a)b[c++]=d;return b};var wc;a:{var xc=Eb.navigator;if(xc){var yc=xc.userAgent;if(yc){wc=yc;break a}}wc=""};function zc(a){Eb.setTimeout(function(){throw a;},0)}var Ac;
function Bc(){var a=Eb.MessageChannel;"undefined"===typeof a&&"undefined"!==typeof aa&&aa.postMessage&&aa.addEventListener&&-1==wc[ob]("Presto")&&(a=function(){var a=da.createElement("IFRAME");a.style.display="none";a.src="";da.documentElement.appendChild(a);var b=a.contentWindow,a=b.document;a.open();a.write("");a[cb]();var c="callImmediate"+ea.random(),d="file:"==b.location.protocol?"*":b.location.protocol+"//"+b.location.host,a=J(function(a){if(("*"==d||a.origin==d)&&a.data==c)this.port1.onmessage()},
this);b.addEventListener("message",a,!1);this.port1={};this.port2={postMessage:function(){b.postMessage(c,d)}}});if("undefined"!==typeof a&&-1==wc[ob]("Edge")&&-1==wc[ob]("Trident")&&-1==wc[ob]("MSIE")){var b=new a,c={},d=c;b.port1.onmessage=function(){if(Fb(c[$a])){c=c[$a];var a=c.tf;c.tf=null;a()}};return function(a){qa(d,{tf:a});d=d[$a];b.port2.postMessage(0)}}return"undefined"!==typeof da&&"onreadystatechange"in da.createElement("SCRIPT")?function(a){var b=da.createElement("SCRIPT");b.onreadystatechange=
function(){b.onreadystatechange=null;b.parentNode[sb](b);b=null;a();a=null};da.documentElement.appendChild(b)}:function(a){Eb.setTimeout(a,0)}};function Cc(){this.ae=this.Zb=null}var Ec=new $b(function(){return new Dc},function(a){a.reset()},100);Cc[z].add=function(a,b){var c=this.fj();c.set(a,b);this.ae?qa(this.ae,c):(L(!this.Zb),this.Zb=c);this.ae=c};ja(Cc[z],function(){var a=null;this.Zb&&(a=this.Zb,this.Zb=this.Zb[$a],this.Zb||(this.ae=null),qa(a,null));return a});Cc[z].mk=function(a){Ec.put(a)};Cc[z].fj=function(){return Ec.get()};function Dc(){this.scope=this.qe=null;qa(this,null)}
Dc[z].set=function(a,b){this.qe=a;this.scope=b;qa(this,null)};Dc[z].reset=function(){this.scope=this.qe=null;qa(this,null)};function Fc(a,b){Gc||Hc();Ic||(Gc(),Ic=!0);Jc.add(a,b)}var Gc;function Hc(){if(Eb.Promise&&Eb.Promise[vb]){var a=Eb.Promise[vb]();Gc=function(){a[A](Kc)}}else Gc=function(){var a=Kc;if(!Nb(Eb[eb])||Eb.Window&&Eb.Window[z]&&Eb.Window[z][eb]==Eb[eb])Ac||(Ac=Bc()),Ac(a);else Eb[eb](a)}}var Ic=!1,Jc=new Cc;[][v](function(){Ic=!1;Jc=new Cc});function Kc(){for(var a=null;a=Jc[m]();){try{a.qe[D](a.scope)}catch(b){zc(b)}Jc.mk(a)}Ic=!1};function M(a,b){this.Fa=0;this.yg=void 0;this.fd=this.cc=this.C=null;this.Ed=this.pe=!1;if(a!=Gb)try{var c=this;a[D](b,function(a){c.qc(2,a)},function(a){if(!(a instanceof Lc))try{if(a instanceof fa)throw a;throw fa("Promise rejected.");}catch(b){}c.qc(3,a)})}catch(d){this.qc(3,d)}}function Mc(){ta(this,null);this.context=this.oc=this.Ob=null;qa(this,null);this.de=!1}Mc[z].reset=function(){ta(this,null);this.context=this.oc=this.Ob=null;this.de=!1};
var Nc=new $b(function(){return new Mc},function(a){a.reset()},100);function Oc(a,b,c){var d=Nc.get();d.Ob=a;d.oc=b;d.context=c;return d}function Pc(a){if(a instanceof M)return a;var b=new M(Gb);b.qc(2,a);return b}function Qc(a){return new M(function(b,c){c(a)})}function Rc(a,b,c){Sc(a,b,c,null)||Fc(Tb(b,a))}function Tc(a){return new M(function(b,c){var d=a[y],g=[];if(d)for(var h=function(a,c){d--;g[a]=c;0==d&&b(g)},l=function(a){c(a)},p=0,B;B=a[p];p++)Rc(B,Tb(h,p),l);else b(g)})}
function Uc(){var a,b,c=new M(function(c,g){a=c;b=g});return new Vc(c,a,b)}M[z].then=function(a,b,c){null!=a&&Zb(a,"opt_onFulfilled should be a function.");null!=b&&Zb(b,"opt_onRejected should be a function. Did you pass opt_context as the second argument instead of the third?");return this.hf(Nb(a)?a:null,Nb(b)?b:null,c)};M[z].then=M[z][A];M[z].$goog_Thenable=!0;H=M[z];
H.Ak=function(a,b,c){null!=a&&Zb(a,"opt_onFulfilled should be a function.");null!=b&&Zb(b,"opt_onRejected should be a function. Did you pass opt_context as the second argument instead of the third?");this.gf(Oc(a||Gb,b||null,c))};H.Lg=function(a,b){return this.hf(null,a,b)};H.gf=function(a){this.pj()||2!=this.Fa&&3!=this.Fa||this.Bg();this.ck(a)};
H.hf=function(a,b,c){var d=Oc(null,null,null);ta(d,new M(function(g,h){d.Ob=a?function(b){try{var d=a[D](c,b);g(d)}catch(B){h(B)}}:g;d.oc=b?function(a){try{var d=b[D](c,a);!Fb(d)&&a instanceof Lc?h(a):g(d)}catch(B){h(B)}}:h}));d[gb].C=this;this.gf(d);return d[gb]};H.Dk=function(a){L(1==this.Fa);this.Fa=0;this.qc(2,a)};H.Ek=function(a){L(1==this.Fa);this.Fa=0;this.qc(3,a)};
H.qc=function(a,b){0==this.Fa&&(this==b&&(a=3,b=new TypeError("Promise cannot resolve to itself")),this.Fa=1,Sc(b,this.Dk,this.Ek,this)||(this.yg=b,this.Fa=a,this.C=null,this.Bg(),3!=a||b instanceof Lc||Wc(this,b)))};
function Sc(a,b,c,d){if(a instanceof M)return a.Ak(b,c,d),!0;var g;if(a)try{g=!!a.$goog_Thenable}catch(h){g=!1}else g=!1;if(g)return a[A](b,c,d),!0;g=typeof a;if("object"==g&&null!=a||"function"==g)try{var l=a[A];if(Nb(l))return Xc(a,l,b,c,d),!0}catch(p){return c[D](d,p),!0}return!1}function Xc(a,b,c,d,g){function h(a){p||(p=!0,d[D](g,a))}function l(a){p||(p=!0,c[D](g,a))}var p=!1;try{b[D](a,l,h)}catch(B){h(B)}}H.Bg=function(){this.pe||(this.pe=!0,Fc(this.oi,this))};H.pj=function(){return!!this.cc};
H.ck=function(a){L(null!=a.Ob);this.fd?qa(this.fd,a):this.cc=a;this.fd=a};H.Wj=function(){var a=null;this.cc&&(a=this.cc,this.cc=a[$a],qa(a,null));this.cc||(this.fd=null);null!=a&&L(null!=a.Ob);return a};H.oi=function(){for(var a=null;a=this.Wj();)this.ni(a,this.Fa,this.yg);this.pe=!1};H.ni=function(a,b,c){3==b&&a.oc&&!a.de&&this.jk();if(a[gb])a[gb].C=null,Yc(a,b,c);else try{a.de?a.Ob[D](a[Da]):Yc(a,b,c)}catch(d){Zc[D](null,d)}Nc.put(a)};
function Yc(a,b,c){2==b?a.Ob[D](a[Da],c):a.oc&&a.oc[D](a[Da],c)}H.bh=Bb();H.jk=function(){var a;for(a=this;a&&a.Ed;a=a.C)a.Ed=!1};function Wc(a,b){a.Ed=!0;Fc(function(){a.Ed&&(a.bh(b),Zc[D](null,b))})}var Zc=zc;function Lc(a){Ub[D](this,a)}K(Lc,Ub);za(Lc[z],"cancel");function Vc(a,b,c){this.ga=a;this.resolve=b;this.reject=c};
function $c(a,b){this.va=a;this.Qb=b||this.yf()}var ad=0;H=$c[z];H.id=G("va");H.kh=Cb("va");H.w=G("Qb");H.yf=function(){return{}};H.Mg=G("Qb");H.Ea=function(){return{id:this.va,value:this.Mg()}};H.Qc=function(a){return"#"==a.substr(-1)?this.va:null};function bd(a){return new $c(a.id,a[x])}function cd(a){return new $c(ad++,a||{})}function dd(a){if(null==a)return"";a=new Uint8Array(a);for(var b="",c=0;c<a[y];++c)var d=a[c][r](16),b=b+(2>d[y]?"0"+d:d);return b};
function ed(a){this.type=a}function fd(a){$c[D](this,-1,a)}K(fd,$c);
var gd={};I("lf.TransactionType",gd,void 0);gd.READ_ONLY=0;gd.READ_WRITE=1;

function hd(a,b){this.Ya=a;this.Ng=b;this.ca=Uc()}H=hd[z];H.Si=G("Ya");H.U=function(){return(0==this.Ng?Pc():this.Gj())[A](J(function(){this.Ya.U()},this))};H.Gj=function(){this.Hj();this.Fj();return this.ca.ga};H.Hj=function(){var a=this.Ya.Gf();a.H()[n](function(b){var c=this.Ya.da().get(b),c=this.Z(c[k](),J(c.fc,c));b=a.get(b);var d=b.td().c().map(function(a){return a.id()});0<d[y]&&c[m](d).Lg(this.Ce,this);b=b.yd().c().map(function(a){return a[1]})[Ka](b.sd().c());c.put(b).Lg(this.Ce,this)},this)};
H.Fj=function(){this.Ya.Pi()[n](function(a){var b=this.Z(a[k](),bd),c;b.get([-1])[A](function(a){c=a;return b[m]([])})[A](function(){b.put(c);b.put(a.Ea())},J(this.Ce,this))},this)};H.Ce=function(a){this.ca[jb](a)};function id(a,b,c,d){c=c||function(a,b){return a==b};d=d||function(b){return a[b]};for(var g=a[y],h=b[y],l=[],p=0;p<g+1;p++)l[p]=[],l[p][0]=0;for(var B=0;B<h+1;B++)l[0][B]=0;for(p=1;p<=g;p++)for(B=1;B<=h;B++)c(a[p-1],b[B-1])?l[p][B]=l[p-1][B-1]+1:l[p][B]=ea.max(l[p-1][B],l[p][B-1]);for(var Ra=[],p=g,B=h;0<p&&0<B;)c(a[p-1],b[B-1])?(Ra[Ab](d(p-1,B-1)),p--,B--):l[p-1][B]>l[p][B-1]?p--:B--;return Ra}function jd(a){return ec(arguments,function(a,c){return a+c},0)}
function kd(a){return jd[ib](null,arguments)/arguments[y]}function ld(a){var b=arguments[y];if(2>b)return 0;var c=kd[ib](null,arguments);return jd[ib](null,dc(arguments,function(a){return ea.pow(a-c,2)}))/(b-1)}function md(a){return ea.sqrt(ld[ib](null,arguments))};var nd="StopIteration"in Eb?Eb.StopIteration:{message:"StopIteration",stack:""};function od(){}qa(od[z],function(){throw nd;});od[z].tc=function(){return this};function pd(a){if(a instanceof od)return a;if("function"==typeof a.tc)return a.tc(!1);if(Lb(a)){var b=0,c=new od;qa(c,function(){for(;;){if(b>=a[y])throw nd;if(b in a)return a[b++];b++}});return c}throw fa("Not implemented");}
function qd(a,b,c){if(Lb(a))try{cc(a,b,c)}catch(d){if(d!==nd)throw d;}else{a=pd(a);try{for(;;)b[D](c,a[$a](),void 0,a)}catch(g){if(g!==nd)throw g;}}}function rd(a){if(fc(arguments,function(a){return!a[y]})||!arguments[y])return new od;var b=new od,c=arguments,d=qc(0,c[y]);qa(b,function(){if(d){for(var a=dc(d,function(a,b){return c[b][a]}),b=d[y]-1;0<=b;b--){L(d);if(d[b]<c[b][y]-1){d[b]++;break}if(0==b){d=null;break}d[b]=0}return a}throw nd;});return b};function N(a,b){this.g={};this.b=[];this.Ma=this.aa=0;var c=arguments[y];if(1<c){if(c%2)throw fa("Uneven number of arguments");for(var d=0;d<c;d+=2)this.set(arguments[d],arguments[d+1])}else a&&this[lb](a)}H=N[z];H.na=G("aa");H.c=function(){this.zc();for(var a=[],b=0;b<this.b[y];b++)a[v](this.g[this.b[b]]);return a};H.H=function(){this.zc();return this.b[Ka]()};H.s=function(a){return sd(this.g,a)};H.ld=function(a){for(var b=0;b<this.b[y];b++){var c=this.b[b];if(sd(this.g,c)&&this.g[c]==a)return!0}return!1};
H.Fc=function(a,b){if(this===a)return!0;if(this.aa!=a.na())return!1;var c=b||td;this.zc();for(var d,g=0;d=this.b[g];g++)if(!c(this.get(d),a.get(d)))return!1;return!0};function td(a,b){return a===b}H.Ha=function(){return 0==this.aa};ma(H,function(){this.g={};Aa(this.b,0);this.Ma=this.aa=0});ja(H,function(a){return sd(this.g,a)?(delete this.g[a],this.aa--,this.Ma++,this.b[y]>2*this.aa&&this.zc(),!0):!1});
H.zc=function(){if(this.aa!=this.b[y]){for(var a=0,b=0;a<this.b[y];){var c=this.b[a];sd(this.g,c)&&(this.b[b++]=c);a++}Aa(this.b,b)}if(this.aa!=this.b[y]){for(var d={},b=a=0;a<this.b[y];)c=this.b[a],sd(d,c)||(this.b[b++]=c,d[c]=1),a++;Aa(this.b,b)}};H.get=function(a,b){return sd(this.g,a)?this.g[a]:b};H.set=function(a,b){sd(this.g,a)||(this.aa++,this.b[v](a),this.Ma++);this.g[a]=b};H.addAll=function(a){var b;a instanceof N?(b=a.H(),a=a.c()):(b=vc(a),a=uc(a));for(var c=0;c<b[y];c++)this.set(b[c],a[c])};
ka(H,function(a,b){for(var c=this.H(),d=0;d<c[y];d++){var g=c[d],h=this.get(g);a[D](b,h,g,this)}});sa(H,function(){return new N(this)});H.tc=function(a){this.zc();var b=0,c=this.Ma,d=this,g=new od;qa(g,function(){if(c!=d.Ma)throw fa("The map has changed since the iterator was created");if(b>=d.b[y])throw nd;var g=d.b[b++];return a?g:d.g[g]});return g};function sd(a,b){return ba[z][bb][D](a,b)};
function ud(a){this.nk=a}f(ud[z],G("nk"));var vd=new ud("backstore"),wd=new ud("cache"),xd=new ud("indexstore"),yd=new ud("engine"),zd=new ud("runner"),Ad=new ud("observerregistry"),Bd=new ud("schema");
function Cd(a){if("function"==typeof a.na)a=a.na();else if(Lb(a)||Mb(a))a=a[y];else{var b=0,c;for(c in a)b++;a=b}return a}function Dd(a){if("function"==typeof a.c)return a.c();if(Mb(a))return a[ab]("");if(Lb(a)){for(var b=[],c=a[y],d=0;d<c;d++)b[v](a[d]);return b}return uc(a)}
function Ed(a,b,c){if("function"==typeof a[yb])return a[yb](b,c);if(Lb(a)||Mb(a))return gc(a,b,c);var d;if("function"==typeof a.H)d=a.H();else if("function"!=typeof a.c)if(Lb(a)||Mb(a)){d=[];for(var g=a[y],h=0;h<g;h++)d[v](h)}else d=vc(a);else d=void 0;for(var g=Dd(a),h=g[y],l=0;l<h;l++)if(!b[D](c,g[l],d&&d[l],a))return!1;return!0};function O(a){this.g=new N;a&&this[lb](a)}function Fd(a){var b=typeof a;return"object"==b&&a||"function"==b?"o"+Ob(a):b.substr(0,1)+a}H=O[z];H.na=function(){return this.g.na()};H.add=function(a){this.g.set(Fd(a),a)};H.addAll=function(a){a=Dd(a);for(var b=a[y],c=0;c<b;c++)this.add(a[c])};ja(H,function(a){return this.g[m](Fd(a))});ma(H,function(){this.g[Pa]()});H.Ha=function(){return this.g.Ha()};H.contains=function(a){return this.g.s(Fd(a))};H.Nh=function(a){return Ed(a,this[u],this)};H.c=function(){return this.g.c()};
sa(H,function(){return new O(this)});H.Fc=function(a){return this.na()==Cd(a)&&this.yj(a)};H.yj=function(a){var b=Cd(a);if(this.na()>b)return!1;!(a instanceof O)&&5<b&&(a=new O(a));return Ed(this,function(b){var d=a;if("function"==typeof d[u])b=d[u](b);else if("function"==typeof d.ld)b=d.ld(b);else if(Lb(d)||Mb(d))b=0<=bc(d,b);else a:{for(var g in d)if(d[g]==b){b=!0;break a}b=!1}return b})};H.tc=function(){return this.g.tc(!1)};
function Gd(a,b){this.va=a;this.Qb=b||{}}function Hd(a){var b=new O;a[n](function(a){b.add(a>>9)});return b.c()}H=Gd[z];H.ka=G("va");H.lc=G("Qb");H.Eg=function(a){a[n](function(a){this.Qb[a.id()]=a.Ea()},this)};H.ik=function(a){a[n](function(a){var c=this.Qb;a in c&&delete c[a]},this)};H.Ea=function(){return{id:this.va,value:JSON.stringify(this.Qb)}};function Id(a){return new Gd(a.id,JSON.parse(a[x]))};

function Jd(a,b,c){this.O=a;this.Ib=b;this.zg=c}H=Jd[z];H.get=function(a){return 0==a[y]?this.te():this.Wi(a)[A](J(function(b){return a.map(function(a){var d=b.get(a>>9);L(d,"Containing page is empty");return this.Ib(d.lc()[a])},this)},this))};H.Wi=function(a){var b=new N,c=Uc();a=Hd(a).map(function(a){return new M(function(c,h){var l;try{l=this.O.get(a)}catch(p){h(p);return}ua(l,h);Ba(l,J(function(a){a=Id(a[ub][Xa]);b.set(a.ka(),a);c()},this))},this)},this);Tc(a)[A](function(){c[vb](b)});return c.ga};
H.te=function(){return new M(function(a,b){var c=[],d;try{d=this.O[tb]()}catch(g){b(g);return}ua(d,b);Ba(d,J(function(){var b=d[Xa];if(b){var g=Id(b[x]).lc(),p;for(p in g)c[v](this.Ib(g[p]));b[Sa]()}else a(c)},this))},this)};H.Rb=function(a){return new M(function(b,c){var d;try{d=a()}catch(g){c(g);return}Ba(d,b);ua(d,c)},this)};
H.put=function(a){if(0==a[y])return Pc();var b=new N;a[n](function(a){var d;d=a.id()>>9;var g=b.get(d,null);null===g&&(g=this.zg(this.O[rb],d));g.Eg([a]);b.set(d,g)},this);a=b.c().map(function(a){return this.Rb(J(function(){return this.O.put(a.Ea())},this))},this);return Tc(a)};
ja(H,function(a){if(0==a[y])return this.Rb(J(function(){return this.O[Pa]()},this));var b=new N;a[n](function(a){var d=a>>9,g=b.get(d,null);null===g&&(g=this.zg(this.O[rb],d));g.ik([a]);b.set(d,g)},this);a=b.c().map(function(a){return this.Rb(J(function(){var b;a:{b=a.lc();for(var g in b){b=!1;break a}b=!0}return b?this.O[qb](a.ka()):this.O.put(a.Ea())},this))},this);return Tc(a)});function Kd(a,b,c){a=a.o(wd);var d=[c<<9,(c+1<<9)-1];b=a.Va(b,d[0],d[1]);c=new Gd(c);c.Eg(b);return c}
function Ld(a,b){return new Gd(b)};
function Md(){};
function Nd(a){this.pa=a.o(wd);this.N=a.o(xd);this.A=a.o(Bd)}Ca(Nd[z],function(a){a[n](function(a){this.Hk(a);this.Fk(a)},this)});Nd[z].Fk=function(a){var b=a[k]();a.td().c()[n](function(a){this.pa[m](b,[a.id()])},this);a.sd()[n](function(a){this.pa.set(b,[a])},this);a.yd()[n](function(a){this.pa.set(b,[a[1]])},this)};Nd[z].Hk=function(a){var b=this.A[t](a[k]());a.Ni()[n](function(a){this.Rg(b,a)},this)};
Nd[z].Rg=function(a,b){a.Ga().map(function(a){return this.N.get(a.l())},this)[Ka]([this.N.get(a.Kb())])[n](function(a){var d=null===b[1]?null:b[1].Qc(a[k]()),g=null===b[0]?null:b[0].Qc(a[k]());null===g&&null!==d?a.add(d,b[1].id()):null===g||null===d?null!==g&&null===d&&a[m](g,b[0].id()):0!=a.Bc()[Wa](g,d)&&(a.add(d,b[1].id()),a[m](g,b[0].id()))})};
function P(a,b){za(this,a);this.message=b};
function Od(a){this.N=a.o(xd)}Od[z].wi=function(a,b){var c=a.kc().ye();return null===c?null:this.vi(c,b)};Od[z].vi=function(a,b){var c=a.l(),d=b.Qc(c),c=this.N.get(c).get(d);return 0==c[y]?null:c[0]};Od[z].je=function(a,b){var c=a.kc().Ui();b[n](function(a){c[n](function(b){if(null===a.w()[b[k]()])throw new P("ConstraintError","Attempted to insert NULL value to non-nullable field "+b.l());},this)},this)};
function Pd(a){this.hb=new N;this.Ia=new N;this.kb=new N;this.B=a}H=Pd[z];ia(H,G("B"));H.sd=G("hb");H.yd=G("Ia");H.td=G("kb");H.add=function(a){if(this.kb.s(a.id())){var b=[this.kb.get(a.id()),a];this.Ia.set(a.id(),b);this.kb[m](a.id())}else this.hb.set(a.id(),a)};H.modify=function(a){var b=a[0],c=a[1];L(b.id()==c.id(),"Row ID mismatch between old/new values.");b=b.id();this.hb.s(b)?this.hb.set(b,c):(this.Ia.s(b)&&(a=[this.Ia.get(a[0].id())[0],c]),this.Ia.set(b,a))};
xa(H,function(a){if(this.hb.s(a.id()))this.hb[m](a.id());else if(this.Ia.s(a.id())){var b=this.Ia.get(a.id())[0];this.Ia[m](a.id());this.kb.set(a.id(),b)}else this.kb.set(a.id(),a)});H.Ni=function(){var a=[];this.hb.c()[n](function(b){a[v]([null,b])},this);this.Ia.c()[n](function(b){a[v](b)},this);this.kb.c()[n](function(b){a[v]([b,null])},this);return a};f(H,function(){return"["+this.hb.H()[r]()+"], ["+this.Ia.H()[r]()+"], ["+this.kb.H()[r]()+"]"});
H.$i=function(){var a=new Pd(this.B);this.hb.c()[n](function(b){a[qb](b)},this);this.kb.c()[n](function(b){a.add(b)},this);this.Ia.c()[n](function(b){a.modify([b[1],b[0]])},this);return a};H.Ha=function(){return this.hb.Ha()&&this.kb.Ha()&&this.Ia.Ha()};
function Qd(a,b){this.Sa=new N;b[n](function(a){this.Sa.set(a[k](),a)},this);this.pa=a.o(wd);this.N=a.o(xd);this.kd=new Od(a);this.Gd=new Nd(a);this.Qe=this.Xd=!1;this.Eb=new N}H=Qd[z];H.Gf=G("Eb");H.Pi=function(){var a=[];this.Eb.H().map(function(a){return this.Sa.get(a)},this)[n](function(b){b.Sb()&&(b.Ga()[n](function(b){a[v](this.N.get(b.l()))},this),a[v](this.N.get(b[k]()+".#")))},this);return a};H.da=G("Sa");
H.Qi=function(){var a=[];this.Sa.c()[n](function(b){b.Sb()&&(b.Ga()[n](function(b){a[v](b.l())}),a[v](b[k]()+".#"))});return a};H.tb=function(a,b){this.yc();this.gd(a);this.kd.je(a,b);for(var c=0;c<b[y];c++)this.Hd(a,null,b[c])};
H.Hd=function(a,b,c){var d=a[k](),g=this.Eb.get(d,null)||new Pd(d);this.Eb.set(d,g);var h=[b,c];try{this.Gd.Rg(a,h)}catch(l){throw this.Qe=!0,l;}null===b&&null!==c?(this.pa.set(d,[c]),g.add(c)):null!==b&&null!==c?(this.pa.set(d,[c]),g.modify(h)):null!==b&&null===c&&(this.pa[m](d,[b.id()]),g[qb](b))};Ca(H,function(a,b){this.yc();this.gd(a);this.kd.je(a,b);for(var c=0;c<b[y];c++){var d=b[c],g=this.pa.get([d.id()])[0];this.Hd(a,g,d)}});
H.Fe=function(a,b){this.yc();this.gd(a);this.kd.je(a,b);for(var c=0;c<b[y];c++){var d=b[c],g=null,h=this.kd.wi(a,d);null!=h&&(g=this.pa.get([h])[0],d.kh(h));this.Hd(a,g,d)}};ja(H,function(a,b){this.yc();this.gd(a);for(var c=0;c<b[y];c++)this.Hd(a,b[c],null)});H.U=function(){this.yc();this.Xd=!0};H.yc=function(){L(!this.Qe,"Attemptted to use journal that needs to be rolled back.");L(!this.Xd,"Attemptted to commit a terminated journal.")};
H.Bb=function(){L(!this.Xd,"Attempted to rollback a terminated journal.");var a=this.Eb.c().map(function(a){return a.$i()},this);this.Gd[zb](a);this.Xd=!0;this.Qe=!1};H.gd=function(a){if(!this.Sa.s(a[k]()))throw new P("ScopeError",a[k]()+" is not in the journal's scope.");};
var Rd={};I("lf.ConstraintAction",Rd,void 0);Rd.RESTRICT=0;Rd.CASCADE=1;var Sd={};I("lf.ConstraintTiming",Sd,void 0);Sd.IMMEDIATE=0;Sd.DEFERRABLE=1;var Td={};I("lf.Order",Td,void 0);Td.DESC=0;Td.ASC=1;var Ud={};I("lf.Type",Ud,void 0);Ud.ARRAY_BUFFER=0;Ud.BOOLEAN=1;Ud.DATE_TIME=2;Ud.INTEGER=3;Ud.NUMBER=4;Ud.STRING=5;Ud.OBJECT=6;var Vd={0:new ArrayBuffer(0),1:!1,2:ba.freeze(new Date(0)),3:0,4:0,5:"",6:ba.freeze({})};I("lf.type.DEFAULT_VALUES",Vd,void 0);
function Wd(a,b,c,d){this.f=a;this.u=b;this.ba=null===this.f?!1:c;this.fa=null===this.u?!1:d}H=Wd[z];f(H,function(){return(this.ba?"(":"[")+(null===this.f?"unbound":this.f)+", "+(null===this.u?"unbound":this.u)+(this.fa?")":"]")});H.Jh=function(){if(null===this.f&&null===this.u)return[];var a=null,b=null;null===this.f||(a=new Wd(null,this.f,!1,!this.ba));null===this.u||(b=new Wd(this.u,null,!this.fa,!1));return[a,b][Ea](function(a){return null!==a})};
H.reverse=function(){return new Wd(this.u,this.f,this.fa,this.ba)};H.ng=function(a){var b=Xd(this.f,a.f,!0,this.ba,a.ba);if(0==b)return!0;var c=-1==b?this:a;a=1==b?this:a;return null===c.u||c.u>a.f||c.u==a.f&&!c.fa&&!a.ba};function Yd(){return new Wd(null,null,!1,!1)}H.contains=function(a){var b=null===this.u||a<this.u||a==this.u&&!this.fa;return(null===this.f||a>this.f||a==this.f&&!this.ba)&&b};H.Fc=function(a){return this.f==a.f&&this.ba==a.ba&&this.u==a.u&&this.fa==a.fa};
function Xd(a,b,c,d,g){function h(a){return c?a:1==a?-1:1}d=d||!1;g=g||!1;return null===a?null===b?(d?!g:g)?d?h(1):h(-1):0:h(-1):null===b?h(1):a<b?-1:a==b?(d?!g:g)?d?h(1):h(-1):0:1}function Zd(a,b){var c=Xd(a.f,b.f,!0,a.ba,b.ba);0==c&&(c=Xd(a.u,b.u,!1,a.fa,b.fa));return c};
function $d(a,b){this.entries=a;this.I=new O(b);this.Fb=null}H=$d[z];H.vj=function(a){return this.I.Fc(a.I)};function ae(a,b){L(a.vj(b),"Intersection/union operations only apply to compatible relations.")}H.W=function(){return this.I.c()};H.He=function(){return 1<this.I.na()};H.we=function(){return this[C].map(function(a){return a.ta.w()})};H.bj=function(){return this[C].map(function(a){return a.ta.id()})};H.pk=function(a,b){null===this.Fb&&(this.Fb=new N);this.Fb.set(a.l(),b)};
H.jc=function(a){L(null!==this.Fb,"getAggregationResult called before any results have been calculated.");var b=this.Fb.get(a.l(),void 0);L(Fb(b),"Could not find result for "+a.l());return b};H.nj=function(a){return null!==this.Fb&&this.Fb.s(a.l())};var be=null;function ce(){null===be&&(be=new $d([],[]));return be}
function de(a){if(0==a[y])return ce();for(var b=a[kb](function(b,c){ae(a[0],c);return b+c[C][y]},0),c=e(b),d=0,b=a.map(function(a){var b=new N;a[C][n](function(a){c[d++]=a;b.set(a.id,a)});return b}),g=new N,h=0;h<c[y];h++)b[yb](function(a){return a.s(c[h].id)})&&g.set(c[h].id,c[h]);return new $d(g.c(),a[0].I.c())}function ee(a){if(0==a[y])return ce();var b=new N;a[n](function(c){ae(a[0],c);c[C][n](function(a){b.set(a.id,a)})});return new $d(b.c(),a[0].I.c())}
function fe(a,b){var c=1<b[y],d=a.map(function(a){return new ge(a,c)});return new $d(d,b)}function ge(a,b){this.ta=a;this.id=he++;this.Ie=b}var he=0;ge[z].M=function(a){var b=a.Ua();return null!==b&&this.ta.w()[bb](b)?this.ta.w()[b]:this.Ie?this.ta.w()[a.Z().za()][a[k]()]:this.ta.w()[a[k]()]};ge[z].Xe=function(a,b){var c=a.Ua();if(null!=c)this.ta.w()[c]=b;else if(this.Ie){var c=a.Z().za(),d=this.ta.w()[c];null==d&&(d={},this.ta.w()[c]=d);d[a[k]()]=b}else this.ta.w()[a[k]()]=b};
function ie(a,b,c,d){function g(a,b){if(a.Ie){var c=a.ta.w(),d;for(d in c)h[d]=c[d]}else L(!h[bb](b[0]),"Attempted to join table with itself, without using table alias, or same alias "+b[0]+"is reused for multiple tables."),h[b[0]]=a.ta.w()}var h={};g(a,b);g(c,d);a=new $c(-1,h);return new ge(a,!0)};
I("lf.bind",function(a){return new je(a)},void 0);function je(a){this.wa=a}I("lf.Binder",je,void 0);je[z].qb=G("wa");
function ke(){var a=le();this.fi=new N(1,me(),2,ne(),4,a,3,a,5,oe())}Hb(ke);ke[z].ue=function(a,b){var c=this.fi.get(a,null);L(null!==c,"Could not find evaluation map for "+a);c=c.get(b,null);L(null!==c,"Could not find evaluator for "+a+", "+b);return c};
function le(){return new N("between",function(a,b){return a>=b[0]&&a<=b[1]},"eq",function(a,b){return a==b},"gte",function(a,b){return a>=b},"gt",function(a,b){return a>b},"in",function(a,b){return-1!=b[ob](a)},"lte",function(a,b){return a<=b},"lt",function(a,b){return a<b},"neq",function(a,b){return a!=b})}
function oe(){return new N("between",function(a,b){return a>=b[0]&&a<=b[1]},"eq",function(a,b){return a==b},"gte",function(a,b){return a>=b},"gt",function(a,b){return a>b},"in",function(a,b){return-1!=b[ob](a)},"lte",function(a,b){return a<=b},"lt",function(a,b){return a<b},"match",function(a,b){return(new RegExp(b)).test(a)},"neq",function(a,b){return a!=b})}
function ne(){return new N("between",function(a,b){return a[Qa]()>=b[0][Qa]()&&a[Qa]()<=b[1][Qa]()},"eq",function(a,b){return(null===a?-1:a[Qa]())==(null===b?-1:b[Qa]())},"gte",function(a,b){return a[Qa]()>=b[Qa]()},"gt",function(a,b){return a[Qa]()>b[Qa]()},"in",function(a,b){return b[wb](function(b){return b[Qa]()==a[Qa]()})},"lte",function(a,b){return a[Qa]()<=b[Qa]()},"lt",function(a,b){return a[Qa]()<b[Qa]()},"neq",function(a,b){return(null===a?-1:a[Qa]())!=(null===b?-1:b[Qa]())})}
function me(){return new N("eq",function(a,b){return a==b},"neq",function(a,b){return a!=b})};function pe(a,b){this.ag=a;this.Sg=b}pe[z].getKey=G("ag");pe[z].gj=G("Sg");sa(pe[z],function(){return new pe(this.ag,this.Sg)});function qe(a,b){pe[D](this,a,b);this.i=this.C=null}K(qe,pe);var re=[];H=qe[z];sa(H,function(){return new qe(this.getKey(),this.gj())});H.getParent=G("C");H.Vf=function(){return!this.ua()};H.Y=function(){return this.i||re};H.pb=function(a){return this.Y()[a]||null};H.ua=function(){return this.Y()[y]};H.Oi=function(){for(var a=0,b=this;b[Ga]();)a++,b=b[Ga]();return a};H.Jb=function(){for(var a=this;a[Ga]();)a=a[Ga]();return a};H.contains=function(a){do a=a[Ga]();while(a&&a!=this);return Boolean(a)};
H.rc=function(a,b){if(!1!==a[D](b,this))for(var c=this.Y(),d=0;d<c[y];d++)c[d].rc(a,b)};H.Ze=Cb("C");H.ia=function(a){this.uc(a,this.i?this.i[y]:0)};H.uc=function(a,b){L(!a[Ga]());a.Ze(this);this.i=this.i||[];L(0<=b&&b<=this.i[y]);lc(this.i,b,0,a)};H.Td=function(a){var b=this.i&&this.i[a];return b?(b.Ze(null),hc(this.i,a),0==this.i[y]&&(this.i=null),b):null};H.removeChild=function(a){return this.Td(bc(this.Y(),a))};

function se(){qe[D](this,"","");this.va=te++}K(se,qe);var te=0;se[z].ka=G("va");se[z].Ye=Cb("va");
function ue(a,b,c){se[D](this);this.K=a;va(this,b);this.V=c;this.od=ke.ve().ue(this.K.$(),this.V);this.Xa=!1;this.bc=b}K(ue,se);H=ue[z];H.Gb=function(){var a=new ue(this.K,this[x],this.V);a.qk(this.bc);a.Wd(this.Xa);a.Ye(this.ka());return a};H.yb=function(a){return null!=a?(a[v](this.K),a):[this.K]};H.Wd=Cb("Xa");H.qk=Cb("bc");
H.uf=function(){var a=!1;this[x]instanceof je||(a="array"==Ib(this[x])?!this[x][wb](function(a){return a instanceof je}):!0);if(!a)throw new P("SyntaxError","Value is not bounded");};H.eval=function(a){this.uf();if("in"==this.V)return this.ai(a);var b=a[C][Ea](function(a){return this.od(a.M(this.K),this[x])!=this.Xa},this);return new $d(b,a.W())};
na(H,function(a){function b(b){if(a[y]<=b)throw new P("SyntaxError","Cannot bind to given array: out of range.");}if(this.bc instanceof je){var c=this.bc.qb();b(c);va(this,a[c])}else"array"==Ib(this.bc)&&va(this,this.bc.map(function(c){return c instanceof je?(b(c.qb()),a[c.qb()]):c}))});
H.ai=function(a){L("in"==this.V,"ValuePredicate#evalAsIn_() called for wrong predicate type.");var b=new O(this[x]),c=J(function(a){return b[u](a)!=this.Xa},this),d=a[C][Ea](function(a){return c(a.M(this.K))},this);return new $d(d,a.W())};f(H,function(){return"value_pred("+this.K.l()+" "+this.V+(this.Xa?"(complement)":"")+" "+this[x]+")"});H.Uf=function(){this.uf();return null!==this[x]&&("between"==this.V||"eq"==this.V||"gt"==this.V||"gte"==this.V||"lt"==this.V||"lte"==this.V)};
H.Bk=function(){L(this.Uf(),"Could not convert predicate to key range.");var a=null;"between"==this.V?a=new Wd(this[x][0],this[x][1],!1,!1):"eq"==this.V?(a=this[x],a=new Wd(a,a,!1,!1)):a="gte"==this.V?new Wd(this[x],null,!1,!1):"gt"==this.V?new Wd(this[x],null,!0,!1):"lte"==this.V?new Wd(null,this[x],!1,!1):new Wd(null,this[x],!1,!0);return this.Xa?a.Jh():[a]};
function ve(){this.Ac=this.ra=null}ve[z].Ad=function(a){null===this.ra&&null!=this.D&&(this.ra=we(this.D));a=this.ra.get(a,null);L(null!==a);return a};function we(a){var b=new N;a.rc(function(a){b.set(a.ka(),a)});return b}ve[z].hd=function(a){a.D&&(this.D=a.D.Gb());this.Ac=a};na(ve[z],function(){L(null==this.Ac);return this});ve[z].ge=function(a){var b=this.D;null!=b&&b.rc(function(b){b instanceof ue&&b[q](a)})};
function xe(){ve[D](this)}K(xe,ve);function ye(a){var b="";a[n](function(c,d){b+=c.K.l()+" ";b+=1==c.mb?"ASC":"DESC";d<a[y]-1&&(b+=", ")});return b}sa(xe[z],function(){var a=new xe;a.hd(this);this.h&&(a.h=this.h[w]());this.f&&(a.f=this.f[w]());a.oa=this.oa;a.ma=this.ma;this.J&&(a.J=this.J[w]());this.la&&(a.la=this.la[w]());this.Nb&&(a.Nb=this.Nb);this.Yb&&(a.Yb=this.Yb);return a});
na(xe[z],function(a){xe.eb[q][D](this,a);null!=this.Nb&&(this.oa=a[this.Nb.qb()]);null!=this.Yb&&(this.ma=a[this.Yb.qb()]);this.ge(a);return this});
function ze(a){this.Da=a}ze[z].Jb=G("Da");ze[z].Bf=Db("plan description");ze[z].da=function(){function a(c){var d=c.da();d&&b.add(d);c.Y()[n](function(b){a(b)})}var b=new O;a(this.Da);return b.c()};function Ae(a){var b=new O;a[n](function(a){b[lb](a.da())});return b};

function Ce(a,b){this.global=a;this.wb=a.o(vd);this.Qd=b.map(function(a){return a[Da]});this.pg=b.map(function(a){return a.Re});this.vf=Ae(this.pg);this.Og=this.Xh();this.Ub=Uc()}H=Ce[z];H.Xh=function(){return this.Qd[wb](function(a){return!(a instanceof xe)})?1:0};
ha(H,function(){var a=new Qd(this[Ta],this.vf.c()),b=[],c=this.pg[w](),d=J(function(){var g=c[Ha]();if(g){var h=this.Qd[b[y]];return g.Jb()[Ia](a,h)[A](function(a){b[v](a[0]);return d()})}return Pc()},this);return d()[A](J(function(){return this.wb.Hb(this.Og,a).U()},this))[A](J(function(){this.Oe(b);return b},this),J(function(b){a.Bb();throw b;},this))});H.$=G("Og");H.da=G("vf");H.Jc=G("Ub");H.ka=function(){return Ob(this)};H.Oe=Bb();
function De(a,b){Ce[D](this,a,b);this.zb=a.o(Ad)}K(De,Ce);wa(De[z],Db(0));De[z].Oe=function(a){this.Qd[n](function(b,c){this.zb.Qg(b,a[c])},this)};
function Ee(a,b){this.m=a;this.zb=a.o(Ad);this.Ra=a.o(zd);this.Gd=new Nd(a);this.Eb=b;var c=a.o(Bd),d=this.Eb.map(function(a){return c[t](a[k]())});this.Sa=new O(d);this.Ub=Uc()}H=Ee[z];ha(H,function(){this.Gd[zb](this.Eb);this.Yc();return Pc()});H.$=Db(1);H.da=G("Sa");H.Jc=G("Ub");H.ka=function(){return Ob(this)};wa(H,Db(1));H.Yc=function(){var a=this.zb.Be(this.Sa.c());0!=a[y]&&(a=new De(this.m,a),this.Ra.Vb(a))};
function Fe(a){this.m=a;this.wb=a.o(vd);this.Ra=a.o(zd)}Fe[z].xk=function(){this.wb.subscribe(this.Ne[q](this))};Fe[z].Ne=function(a){a=new Ee(this.m,a);this.Ra.Vb(a)};


function Q(a,b){this.Ma=a;this.j=b;this.fb=new N}I("lf.backstore.FirebaseRawBackStore",Q,void 0);H=Q[z];H.Bd=G("j");H.Cd=function(){throw new P("NotSupportedError","Firebase does not have raw transaction.");};function Ge(a,b){var c=Uc(),d=a;b[y]&&(d=a[gb](b));d[db]("value",function(a){c[vb](a.val())},function(a){c[jb](a)});return c.ga}function He(a,b,c){function d(a){a?g[jb](a):g[vb]()}c=c||!1;var g=Uc();c?a.set(b,d):a[zb](b,d);return g.ga}
H.Aa=function(a){return Ge(this.j,"@rev/R")[A](function(a){this.Qa=a;return Ge(this.j,"@table")}[q](this))[A](function(b){var c=0,d;for(d in b)this.fb.set(d,b[d]),b[d]>c&&(c=b[d]);a.gb()[n](function(a){this.fb.s(a[k]())||(b[a[k]()]=++c)},this);d=this.j[gb]("@table");return He(d,b)}[q](this))};
H.Yd=function(a,b){var c=this.fb.get(a);return null!=c?function(){var a={},g=Uc();this.j[Ma]("T").equalTo(c)[db]("value",function(c){c[n](function(c){var g=b(c.val());a[ga(c.key(),10)]=g});g[vb](a)});return g.ga}[D](this)[A](function(a){a["@rev"]={R:++this.Qa};return He(this.j,a)}[q](this)):Pc()};H.Dc=function(a){return this.Yd(a,Db(null))[A](function(){this.fb[m](a);return He(this.j[gb]("@table/"+a),null,!0)}[q](this))};Q[z].dropTable=Q[z].Dc;
Q[z].vc=function(a,b,c){return this.Yd(a,function(a){var g=a.P;g[b]=c;return{R:this.Qa+1,T:a.T,P:g}}[q](this))};Q[z].addTableColumn=Q[z].vc;Q[z].Ec=function(a,b){return this.Yd(a,function(a){var d=a.P;delete d[b];return{R:this.Qa+1,T:a.T,P:d}}[q](this))};Q[z].dropTableColumn=Q[z].Ec;Q[z].Xc=function(a,b,c){return this.Yd(a,function(a){var g=a.P;g[c]=g[b];delete g[b];return{R:this.Qa+1,T:a.T,P:g}}[q](this))};Q[z].renameTableColumn=Q[z].Xc;
Q[z].xb=function(){throw new P("NotSupportedError","Firebase does not have raw transaction.");};Q[z].createRow=Q[z].xb;Q[z].Mc=G("Ma");Q[z].getVersion=Q[z].Mc;Q[z].gc=function(a){var b=Uc();a=this.fb.get(a);this.j[Ma]("T").equalTo(a)[db]("value",function(a){var d=[];a[n](function(a){d[v](a.val().P)});b[vb](d)});return b.ga};pa(Q[z],function(){var a={},b=this.fb.H().map(function(b){return this.gc(b)[A](function(d){a[b]=d})}[q](this));return Tc(b)[A](function(){return a})});pa(Q[z],Q[z].dump);
function Ie(a,b,c){hd[D](this,c,b);this.j=a}K(Ie,hd);Ie[z].Z=function(a){return this.j.Kc(a)};
Ie[z].U=function(){Ie.eb.U[D](this);var a=this.Si().Gf();if(0==a.na())this.ca[vb]();else{var b=this.j.aj()+1;this.j.Dg(b);var c={"@rev":{R:b}};a[n](function(a){var g=this.j.Mf(a[k]());a.sd()[n](function(a,d){c[d]={R:b,T:g,P:a.w()}});a.yd()[n](function(a,d){c[d]={R:b,T:g,P:a[1].w()}});a.td()[n](function(a,b){c[b]=null})},this);this.j.Zi()[zb](c,function(c){if(null===c)this.ca[vb]();else this.j.Dg(b-1),c=a.c().map(function(a){return this.j.ug(a[k]())},this),Tc(c)[A](this.ca[jb][q](this.ca),this.ca[jb][q](this.ca))}[q](this))}return this.ca.ga};
function Je(){this.ob=new N}H=Je[z];H.Ae=function(a){if(0==a[y])return this.ob.c();var b=[];a[n](function(a){a=this.ob.get(a,null);null===a||b[v](a)},this);return b};H.getData=G("ob");H.get=function(a){return Pc(this.Ae(a))};H.Se=function(a){a[n](function(a){this.ob.set(a.id(),a)},this)};H.put=function(a){this.Se(a);return Pc()};H.vg=function(a){0==a[y]||a[y]==this.ob.na()?this.ob[Pa]():a[n](function(a){this.ob[m](a)},this)};ja(H,function(a){this.vg(a);return Pc()});
H.Ti=function(){return this.ob.Ha()?0:this.ob.H()[kb](function(a,b){return a>b?a:b},0)};
function Ke(a,b){this.A=a;this.ah=b;this.Wc=new N;this.Qa=-1;this.I=new N;this.fb=new N;this.he=null}H=Ke[z];H.aj=G("Qa");H.Dg=Cb("Qa");
H.Aa=function(a){this.j=this.ah[gb](this.A[rb]());var b=a||function(){return Pc()};return Ge(this.j,"@db/version")[A](function(a){return null===a?He(this.j,this.Oh(),!0)[A](function(){var a=new Q(0,this.j);return b(a)}[q](this)):a==this.A[Fa]()?Ge(this.j,"@rev/R")[A](function(a){this.Qa=a;return Ge(this.j,"@table")}[q](this))[A](function(a){for(var b in a)this.fb.set(b,a[b]);a=this.A.gb().map(function(a){return this.ug(a[k]())},this);return Tc(a)}[q](this))[A](function(){this.sj();this.eg();return Pc()}[q](this)):
this.Pe(a,b)[A](function(){return this.Aa()}[q](this))}[q](this))};H.Pe=function(a,b){var c=new Q(a,this.j);return c.Aa(this.A)[A](function(){return this.Gk()}[q](this))[A](function(){return b(c)})[A](function(){var a=this.j[gb]("@db");return He(a,{version:this.A[Fa]()},!0)}[q](this))};H.Gk=function(){return Pc()};H.eg=function(){this.j.off();this.j.on("child_removed",this.Nj[q](this));this.ie&&(this.ie.off(),this.Wc[Pa]());this.ie=this.j[Ma]("R").startAt(this.Qa+1);this.ie.on("value",this.Ne[q](this))};
H.sj=function(){ad=this.I.c().map(function(a){return a.Ti()})[kb](function(a,b){return a>b?a:b},0)+1};H.Nj=function(a){var b=a.val(),c=this.Wc.get(b.T,null);null===c&&(c=new O,this.Wc.set(b.T,c));c.add(ga(a.key(),10))};H.Ne=function(a){var b=a[gb]("@rev/R").val();null!=b&&b!=this.Qa&&(this.Qa=b,a=this.Bi(a),a[n](function(a){var b=this.I.get(a[k]()),g=a.td().H();g[y]&&b.vg(g);var h=a.sd().c();a.yd()[n](function(a){h[v](a[1])});b.Se(h)},this),a[y]&&this.Tc(a),this.eg())};
H.Bi=function(a){var b=new O,c=new N;this.fb[n](function(a,g){var h=this.I.get(g),l=new Pd(g);if(this.Wc.s(a)){var p=this.Wc.get(a).c();b[lb](p);h.Ae(p)[n](function(a){l[qb](a)})}c.set(a,l)}[q](this));a[n](function(a){if("@rev"!=a.key()){var g=ga(a.key(),10);if(!b[u](g)){a=a.val();var h=c.get(a.T),l=this.I.get(h[k]());l.getData().s(g)?h.modify([l.Ae([g])[0],new $c(g,a.P)]):h.add(new $c(g,a.P))}}}[q](this));return c.c()[Ea](function(a){return!a.Ha()})};
H.ug=function(a){var b=Uc(),c=this.Mf(a);this.j[Ma]("T").equalTo(c)[db]("value",function(c){var g=new Je,h=[];c[n](function(a){h[v](new $c(ga(a.key(),10),a.val().P))});g.Se(h);this.I.set(a,g);b[vb]()}[q](this));return b.ga};H.Mf=function(a){return this.fb.get(a)};H.Oh=function(){var a={};a["@db"]={version:this.A[Fa]()};a["@rev"]={R:1};this.Qa=1;a["@table"]={};this.A.gb()[n](function(b,c){var d=b[k]();a["@table"][d]=c;this.I.set(d,new Je);this.fb.set(d,c)},this);return a};
H.Hb=function(a,b){return new Ie(this,a,b)};H.Kc=function(a){var b=this.I.get(a,null);if(null!==b)return b;throw new P("DataError","Table "+a+" not found");};H.Zi=G("j");ra(H,Bb());ya(H,Cb("he"));H.Tc=function(a){null!=this.he&&this.he(a)};
function R(a,b,c,d){this.j=b;this.La=c;this.Ma=a;this.dd=d}I("lf.backstore.IndexedDBRawBackStore",R,void 0);R[z].Bd=G("j");R[z].getRawDBInstance=R[z].Bd;R[z].Cd=G("La");R[z].getRawTransaction=R[z].Cd;R[z].Dc=function(a){return new M(function(b,c){try{this.j.deleteObjectStore(a)}catch(d){c(d);return}b()},this)};R[z].dropTable=R[z].Dc;
R[z].Rj=function(a,b,c){return new M(function(d,g){var h;try{var l=this.La[nb](a);h=l[tb]()}catch(p){g(p);return}Ba(h,function(){var a=h[Xa];a?(b(a),a[Sa]()):(c(l),d())});ua(h,g)},this)};function Le(a){var b=null;return b=a instanceof ArrayBuffer?dd(a):a instanceof Date?a[Qa]():a}R[z].bf=function(a,b){function c(a){var c=Id(a[x]),d=c.lc(),p;for(p in d){var B=bd(d[p]);b(B);d[p]=B.Ea()}a[zb](c.Ea())}function d(a){var c=bd(a[x]);b(c);a[zb](c.Ea())}return this.Rj(a,this.dd?c:d,Bb())};
R[z].vc=function(a,b,c){var d=Le(c);return this.bf(a,function(a){a.w()[b]=d})};R[z].addTableColumn=R[z].vc;R[z].Ec=function(a,b){return this.bf(a,function(a){delete a.w()[b]})};R[z].dropTableColumn=R[z].Ec;R[z].Xc=function(a,b,c){return this.bf(a,function(a){a.w()[c]=a.w()[b];delete a.w()[b]})};R[z].renameTableColumn=R[z].Xc;
R[z].ej=function(a){var b=[];return new M(function(c,d){var g;try{g=this.La[nb](a)[tb]()}catch(h){d(h);return}Ba(g,J(function(){var a=g[Xa];if(a){if(this.dd){var d=Id(a[x]).lc(),h;for(h in d)b[v](d[h])}else b[v](a[x]);a[Sa]()}else c(b)},this));ua(g,d)},this)};R[z].xb=function(a){var b={};sc(a,J(function(a,d){b[d]=Le(a)},this));return cd(b)};R[z].createRow=R[z].xb;R[z].Mc=G("Ma");R[z].getVersion=R[z].Mc;
pa(R[z],function(){for(var a=this.j[La],b=[],c=0;c<a[y];++c){var d=a[mb](c);b[v](this.gc(d))}return Tc(b)[A](function(b){var c={};b[n](function(b,d){c[a[mb](d)]=b});return c})});pa(R[z],R[z].dump);R[z].gc=function(a){return this.ej(a)[A](function(a){return a.map(function(a){return a[x]})})};
function Me(a,b){this.O=a;this.Ib=b}H=Me[z];H.get=function(a){if(0==a[y])return this.te();a=a.map(function(a){return new M(function(c,d){var g;try{g=this.O.get(a)}catch(h){d(h);return}ua(g,d);Ba(g,J(function(a){c(this.Ib(a[ub][Xa]))},this))},this)},this);return Tc(a)};H.te=function(){return new M(function(a,b){var c=[],d;try{d=this.O[tb]()}catch(g){b(g);return}ua(d,b);Ba(d,J(function(){var b=d[Xa];b?(c[v](this.Ib(b[x])),b[Sa]()):a(c)},this))},this)};
H.Rb=function(a){return new M(function(b,c){var d;try{d=a()}catch(g){c(g);return}Ba(d,b);ua(d,c)},this)};H.put=function(a){if(0==a[y])return Pc();a=a.map(function(a){return this.Rb(J(function(){return this.O.put(a.Ea())},this))},this);return Tc(a)};
ja(H,function(a){return new M(function(b,c){var d=this.O.count();Ba(d,J(function(d){if(0==a[y]||d[ub][Xa]==a[y])return this.Rb(J(function(){return this.O[Pa]()},this))[A](b,c);d=a.map(function(a){return this.Rb(J(function(){return this.O[qb](a)},this))},this);Tc(d)[A](b,c)},this));ua(d,c)},this)});
function Ne(a,b,c,d,g){hd[D](this,c,d);this.m=a;this.La=b;this.dd=g;this.La.oncomplete=J(this.ca[vb],this.ca);this.La.onabort=J(this.ca[jb],this.ca)}K(Ne,hd);Ne[z].Z=function(a,b,c){return this.dd?(c=null!=c?c:0,a=this.La[nb](a),new Jd(a,b,0==c?Tb(Kd,this.m):Ld)):new Me(this.La[nb](a),b)};
function Oe(a,b){this.m=a;this.A=b;this.ed=b.qg().Zh||!1}H=Oe[z];
H.Aa=function(a){var b=aa.indexedDB||aa.mozIndexedDB||aa.webkitIndexedDB||aa.msIndexedDB;if(null==b)throw new P("NotSupportedError","IndexedDB not supported by platform.");var c=a||function(){return Pc()};return new M(function(a,g){var h;try{h=b.open(this.A[rb](),this.A[Fa]())}catch(l){g(l);return}ua(h,g);h.onupgradeneeded=J(function(a){this.Qj(c,a)[A](Bb(),g)},this);Ba(h,J(function(b){this.j=b[ub][Xa];this.We()[A](J(function(b){ad=b+1;a(this.j)},this))},this))},this)};
H.Qj=function(a,b){var c=b[ub][Xa],d=b[ub][fb],g=new R(b.oldVersion,c,d,this.ed);this.hk(c,d);this.Sh(c,d);return a(g)};H.hk=function(a){for(var b=[],c=0;c<a[La][y];++c){var d=a[La][mb](c);-1!=d[ob](".")&&b[v](d)}b[n](function(b){try{a.deleteObjectStore(b)}catch(c){}})};H.Sh=function(a,b){this.A.gb()[n](Tb(this.Ph,a,b),this)};H.Ph=function(a,b,c){a[La][u](c[k]())||a.createObjectStore(c[k](),{keyPath:"id"});c.Sb()&&(c.Ga()[n](function(c){this.Cc(a,b,c.l(),"btree")},this),this.Cc(a,b,c.Kb(),"rowid"))};
H.Cc=function(a,b,c,d){a[La][u](c)||(a.createObjectStore(c,{keyPath:"id"}),a=b[nb](c),(this.ed?new Jd(a,bd,Ld):new Me(a,bd)).put([new fd(new ed(d))]))};H.Hb=function(a,b){var c=b.da().c().map(function(a){return a[k]()});b.Qi()[n](function(a){c[v](a)});var d=this.j[fb](c,0==a?"readonly":"readwrite");return new Ne(this.m,d,b,a,this.ed)};
H.We=function(a){function b(){if(0==c[y])return Pc();var a=c[Ha]();return l(a)[A](b)}var c=this.A.gb().map(function(a){return a[k]()}),d=this.j,g=0,h=J(function(a){return this.ed?(a=Id(a[x]),vc(a.lc())[kb](function(a,b){return ea.max(a,b)},0)):a.key},this),l=J(function(b){return new M(function(c,l){var Be;try{Be=(a||d[fb]([b]))[nb](b)[tb](null,"prev")}catch(ch){l(ch);return}Ba(Be,function(a){(a=a[ub][Xa])&&(g=ea.max(g,h(a)));c(g)});ua(Be,function(){c(g)})},this)},this);return new M(function(a){b()[A](function(){a(g)})})};
ra(H,function(){this.j[cb]()});H.Kc=function(){throw new P("SyntaxError","IndexedDB tables needs to be acquired from transactions");};ya(H,Bb());H.Tc=Bb();



function Pe(a,b,c){hd[D](this,c,b);this.O=a;0==b&&this.ca[vb]()}K(Pe,hd);Pe[z].Z=function(a){return this.O.Kc(a)};Pe[z].U=function(){Pe.eb.U[D](this);this.ca[vb]();return this.ca.ga};
function Qe(a){this.A=a;this.I=new N}H=Qe[z];H.Aa=function(){this.A.gb()[n](this.tj,this);return Pc()};H.Kc=function(a){var b=this.I.get(a,null);if(null===b)throw new P("DataError","Table "+a+" does not exist.");return b};H.Hb=function(a,b){return new Pe(this,a,b)};H.wf=function(a){if(!this.I.s(a)){var b=new Je;this.I.set(a,b);return b}return null};H.tj=function(a){this.wf(a[k]());a.Sb()&&(a.Ga()[n](function(a){this.Cc(a.l(),"btree")},this),this.Cc(a.Kb(),"rowid"))};
H.Cc=function(a,b){var c=this.wf(a);null===c||c.put([new fd(new ed(b))])};ra(H,Bb());ya(H,Bb());H.Tc=Bb();
function Re(a){Qe[D](this,a);this.Ld=null}K(Re,Qe);ya(Re[z],function(a){null===this.Ld&&(this.Ld=a)});Re[z].Tc=function(a){null===this.Ld||this.Ld(a)};
function Se(a,b,c){this.La=a;this.B=b;this.Ib=c}Se[z].get=function(a){var b=this.Ib;this.La.Ja("SELECT id, value FROM "+this.B+" "+(0==a[y]?"":"WHERE id IN ("+a[F](",")+")"),[],function(a){for(var d=a[hb][y],g=e(d),h=0;h<d;++h)g[h]=b({id:a[hb][mb](h).id,value:JSON.parse(a[hb][mb](h)[x])});return g});return this.La.U()};
Se[z].put=function(a){if(0==a[y])return Pc();var b="INSERT OR REPLACE INTO "+this.B+"(id, value) VALUES (?, ?)";a[n](function(a){this.La.Ja(b,[a.id(),JSON.stringify(a.w())])},this);return Pc()};ja(Se[z],function(a){this.La.Ja("DELETE FROM "+this.B+" "+(0==a[y]?"":"WHERE id IN ("+a[F](",")+")"),[]);return Pc()});
function Te(a,b,c){hd[D](this,b,c);this.j=a;this.I=new N;this.le=[]}K(Te,hd);Te[z].Z=function(a,b){var c=this.I.get(a,null);null===c&&(c=new Se(this,a,b),this.I.set(a,c));return c};Te[z].Ja=function(a,b,c){this.le[v]({yk:a,Sj:b,transform:c})};
Te[z].U=function(){Te.eb.U[D](this);var a,b,c=this.ca[jb][q](this.ca),d=function(a,b){this.ca[jb](b)}[q](this),g=J(function(c,l){a=l;if(this.le[y]){var p=this.le[Ha]();b=p.transform;c.executeSql(p.yk,p.Sj,g,d)}else p=a,null!=b&&null!=a&&(p=b(a)),this.ca[vb](p)},this);0==this.Ng?this.j.readTransaction(g,c):this.j[fb](g,c);return this.ca.ga};
function S(a,b,c){this.j=c;this.m=a;this.Ma=b}I("lf.backstore.WebSqlRawBackStore",S,void 0);S[z].Bd=G("j");S[z].getRawDBInstance=S[z].Bd;S[z].Cd=function(){throw new P("NotSupportedError","Use the raw instance to create transaction instead.");};S[z].getRawTransaction=S[z].Cd;S[z].nd=function(){return new Te(this.j,new Qd(this.m,[]),1)};S[z].Dc=function(a){var b=this.nd();b.Ja("DROP TABLE "+a,[]);return b.U()};S[z].dropTable=S[z].Dc;
S[z].gc=function(a){var b=this.nd();b.Ja("SELECT id, value FROM "+a,[]);return b.U()[A](function(a){for(var b=a[hb][y],g=e(b),h=0;h<b;++h)g[h]={id:a[hb][mb](h).id,value:JSON.parse(a[hb][mb](h)[x])};return Pc(g)})};S[z].af=function(a,b){var c=this.nd(),d="UPDATE "+a+" SET value=? WHERE id=?";return this.gc(a)[A](function(a){a[n](function(a){a=b(a);c.Ja(d,[JSON.stringify(a[x]),a.id])});return c.U()})};S[z].vc=function(a,b,c){var d=Le(c);return this.af(a,function(a){a[x][b]=d;return a})};
S[z].addTableColumn=S[z].vc;S[z].Ec=function(a,b){return this.af(a,function(a){delete a[x][b];return a})};S[z].dropTableColumn=S[z].Ec;S[z].Xc=function(a,b,c){return this.af(a,function(a){a[x][c]=a[x][b];delete a[x][b];return a})};S[z].renameTableColumn=S[z].Xc;S[z].xb=function(a){var b={},c;for(c in a)b[c]=Le(a[c]);return cd(b)};S[z].createRow=S[z].xb;S[z].Mc=G("Ma");S[z].getVersion=S[z].Mc;
function Ue(a){a.Ja('SELECT tbl_name FROM sqlite_master WHERE type="table"',[],function(a){for(var c=e(a[hb][y]),d=0;d<c[y];++d)c[d]=a[hb][mb](d).tbl_name;return c})}pa(S[z],function(){var a=Uc(),b=this.nd();Ue(b);var c={};b.U()[A](J(function(b){b=b[Ea](function(a){return"__lf_ver"!=a&&"__WebKitDatabaseInfoTable__"!=a}).map(function(a){return this.gc(a)[A](function(b){c[a]=b})},this);Tc(b)[A](function(){a[vb](c)})},this));return a.ga});pa(S[z],S[z].dump);
function Ve(a,b,c){this.m=a;this.A=b;this.uk=c||4194304}H=Ve[z];H.ud=function(){return new Qd(this.m,[])};H.Aa=function(a){if(null==aa.openDatabase)throw new P("NotSupportedError","WebSql not supported by platform.");var b=a||function(){return Pc()};return new M(J(function(a,d){try{var g=aa.openDatabase(this.A[rb](),"",this.A[rb](),this.uk);if(null!=g)this.j=g,this.Fh(b)[A](a,d);else throw new P("NotSupportedError","Unable to open database.");}catch(h){d(h)}},this))};
H.Fh=function(a){var b=Uc(),c=new Te(this.j,this.ud(),1);c.Ja("CREATE TABLE IF NOT EXISTS __lf_ver(id INTEGER PRIMARY KEY, v INTEGER)",[]);c.Ja("SELECT v FROM __lf_ver WHERE id = 0",[]);c.U()[A](J(function(c){var g=0;c[hb][y]&&(g=c[hb][mb](0).v);g<this.A[Fa]()?this.Pe(a,g)[A](b[vb][q](b)):g>this.A[Fa]()?b[jb](new P("DataError","Attempt to open a newer database with old code")):b[vb]()},this));return b.ga};
H.Hb=function(a,b){if(null!=this.j)return new Te(this.j,b,a);throw new P("DataError","Attempt to create transaction from uninitialized DB");};ra(H,Bb());H.Kc=function(){throw new P("SyntaxError","WebSQL tables needs to be acquired from transactions");};H.ig=function(){throw new P("NotSupportedError","WebSQL does not support change notification");};ya(H,function(){this.ig()});H.Tc=function(){this.ig()};
H.Pe=function(a,b){var c=Uc();this.Xj()[A](J(function(){a(new S(this.m,b,this.j))[A](J(function(){return this.We()},this))[A](c[vb][q](c))},this),c[jb][q](c));return c.ga};
H.Xj=function(){var a=this.A.gb(),b=new Te(this.j,this.ud(),1),c=new Te(this.j,this.ud(),1);b.Ja("INSERT OR REPLACE INTO __lf_ver VALUES (0, ?)",[this.A[Fa]()]);Ue(b);return b.U()[A](function(b){b[Ea](function(a){return-1!=a[ob](".")})[n](function(a){c.Ja("DROP TABLE "+a,[])});var g=b[Ea](function(a){return-1==a[ob](".")});a.map(function(a){return a[k]()})[Ea](function(a){return-1==g[ob](a)})[n](function(a){c.Ja("CREATE TABLE "+a+"(id INTEGER PRIMARY KEY, value TEXT)",[])});return c.U()})};
H.We=function(){var a=0,b=Uc(),c=J(function(b){var c=new Te(this.j,this.ud(),0);c.Ja("SELECT MAX(id) FROM "+b,[]);return c.U()[A](function(b){b=b[hb][mb](0)[0];a=ea.max(b,a)})},this),d=this.A.gb().map(function(a){return c(a[k]())});Tc(d)[A](function(){b[vb](a)},function(a){b[jb](a)});return b.ga};

function We(){this.g=new N;ba.defineProperty(this,"size",{get:function(){return this.g.na()}})}ma(We[z],function(){this.g[Pa]()});ma(We[z],We[z][Pa]);xa(We[z],function(a){return this.g[m](a)});We[z]["delete"]=We[z][qb];ka(We[z],function(a,b){return this.g[n](a,b)});ka(We[z],We[z][n]);We[z].get=function(a){return this.g.get(a)};We[z].get=We[z].get;We[z].has=function(a){return this.g.s(a)};We[z].has=We[z].has;We[z].set=function(a,b){return this.g.set(a,b)};We[z].set=We[z].set;
var Xe=aa.Map&&aa.Map[z][Oa]&&aa.Map[z][n]?aa.Map:We;
function Ye(){this.Wb=new O;ba.defineProperty(this,"size",{get:function(){return this.Wb.na()}})}Ye[z].add=function(a){this.Wb.add(a)};Ye[z].add=Ye[z].add;ma(Ye[z],function(){this.Wb[Pa]()});ma(Ye[z],Ye[z][Pa]);xa(Ye[z],function(a){return this.Wb[m](a)});Ye[z]["delete"]=Ye[z][qb];ka(Ye[z],function(a,b){this.Wb.c()[n](a,b)});Ye[z].has=function(a){return this.Wb[u](a)};Ye[z].has=Ye[z].has;var Ze=aa.Set&&aa.Set[z][Oa]&&aa.Set[z][n]?aa.Set:Ye;
function $e(a){if(a instanceof Ye)return a.Wb.c();var b=0,c=e(a[Ya]);a[n](function(a){c[b++]=a});return c};
function af(){this.g=new Xe;this.Jg=new Xe}H=af[z];H.Dd=function(a){var b=this.Jg.get(a);Fb(b)||(b=new Ze,this.Jg.set(a,b));return b};H.set=function(a,b){var c=this.Dd(a);b[n](J(function(a){this.g.set(a.id(),a);c.add(a.id())},this))};H.get=function(a){return a.map(J(function(a){return this.g.get(a)||null},this))};
H.Va=function(a,b,c){var d=[],g=ea.min(b,c),h=ea.max(b,c);a=this.Dd(a);if(a[Ya]<h-g)a[n](function(a){a>=g&&a<=h&&(a=this.g.get(a),L(null!=a,"Inconsistent cache"),d[v](a))},this);else for(b=g;b<=h;++b)a.has(b)&&(c=this.g.get(b),L(null!=c,"Inconsistent cache"),d[v](c));return d};ja(H,function(a,b){var c=this.Dd(a);b[n](function(a){this.g[qb](a);c[qb](a)},this)});H.na=function(a){return null!=a?this.Dd(a)[Ya]:this.g[Ya]};
function bf(a,b,c,d){a=b?a.reverse():a;if(null==c&&null==d)return a;c=ea.min(Fb(c)?c:a[y],a[y]);if(0==c)return[];d=ea.min(d||0,a[y]);return a[w](d,d+c)};
function cf(a,b,c,d){this.B=a;this.L=b;this.df=c;if(d){a=511;a*=a*a;if(d[y]>=a)throw new P("TooManyRowsError","B-Tree implementation supports at most "+a+" rows.");d=df(this,d);this.sa=d=ef(d)}else this[Pa]()}var ff=[];H=cf[z];ia(H,G("B"));f(H,function(){return this.sa[r]()});H.add=function(a,b){this.sa=this.sa.tb(a,b)};H.set=function(a,b){this.sa=this.sa.tb(a,b,!0)};ja(H,function(a,b){this.sa=this.sa[m](a,b)});H.get=function(a){return this.sa.get(a)};
H.md=function(a){return null!=a?this.Va([a])[y]:this.Va()[y]};H.Va=function(a,b,c,d){var g=this.sa.xd().b[0];if(!Fb(g)||0==c)return ff;var h=(c||0)+(d||0),h=0<h&&!b?h:Number.POSITIVE_INFINITY,l=[];(Fb(a)?this.L.Gg(a):[this.L.se()])[n](function(a){for(var b=this.L.Rd(a),b=this.L.Ge(a)?g:b[0],b=this.sa.Ff(b),c=0;null!=b&&l[y]<h;)0!=b.Va(a,l)?c=0:c++,b=2==c?null:b[$a]()},this);return bf(l,b,c,d)};ma(H,function(){this.sa=gf(this)});H.s=function(a){return this.sa.s(a)};
H.min=function(){return this.Sc(J(this.L.min,this.L))};H.max=function(){return this.Sc(J(this.L.max,this.L))};H.Sc=function(a){var b=this.sa.xd(),c=this.sa.Lf();if(0==b.b[y]&&0==c.b[y])return[null,null];var d=b.b[0],b=b.S[0],g=c.b[c.b[y]-1],c=c.S[c.b[y]-1];return 1==a(d,g)?[d,this.df?[b]:b]:[g,this.df?[c]:c]};H.Pc=G("df");H.Bc=G("L");H.Le=function(a,b){return null!=a?-1==this.L[Wa](a,b):!1};H.Na=function(a,b){return null!=a?0==this.L[Wa](a,b):!1};
H.Ea=function(){for(var a=[],b=this.sa.xd();b;)a[v](new $c(b.va,[b.b,b.S])),b=b.xa;return a};function hf(a,b,c,d){a=new cf(b,a,c);d=jf(d,a);a.sa=d;return a}function kf(a,b){this.va=a;this.X=b;this.lb=0;this.xa=this.ub=this.C=null;this.b=[];this.S=[];this.i=[]}function gf(a){return new kf(ad++,a)}H=kf[z];H.ea=function(){return 0==this.lb};H.Yf=function(){return null==this.C};qa(H,G("xa"));
function mf(a){function b(a){return null!=a?a.va[r]():"_"}var c=a.va+"["+a.b[F]("|")+"]",d=a.i.map(function(a){return a.va})[F]("|"),g=a.S[F]("/"),h=b(a.ub)+"{",h=a.ea()?h+g:h+d,h=h+"}"+b(a.C);a.xa&&(a=mf(a.xa),c=c+"  "+a[0],h=h+"  "+a[1]);return[c,h]}f(H,function(){var a="",b=mf(this),a=a+(b[0]+"\n"+b[1]+"\n");this.i[y]&&(a+=this.i[0][r]());return a});H.xd=function(){return this.ea()?this:this.i[0].xd()};H.Lf=function(){return this.ea()?this:this.i[this.i[y]-1].Lf()};
function nf(a,b){b&&(b.ub=a);a&&(a.xa=b)}function df(a,b){for(var c=b[y],d=0,g=gf(a),h=g;0<c;){var l=768<=c?511:257<=c&&511>=c?c:257,p=b[w](d,d+l);g.b=p.map(function(a){return a.key});g.S=p.map(function(a){return a[x]});d+=l;c-=l;0<c&&(l=gf(g.X),nf(g,l),g=l)}return h}function of(a){var b=a[0],c=gf(b.X);c.lb=b.lb+1;c.i=a;for(b=0;b<a[y];++b)a[b].C=c,0<b&&c.b[v](a[b].b[0]);return c}
function ef(a){var b=a,c=[];do c[v](b),b=b.xa;while(b);if(512>=c[y])b=of(c);else{var d=c[y],g=0,b=gf(a.X);for(b.lb=a.lb+2;0<d;){a=768<=d?511:257<=d&&511>=d?d:257;var h=c[w](g,g+a),l=of(h);l.C=b;b.i[y]&&(b.b[v](h[0].b[0]),nf(b.i[b.i[y]-1],l));b.i[v](l);g+=a;d-=a}}return b}H.get=function(a){var b=this.Zc(a);if(this.ea()){var c=ff;this.X.Na(this.b[b],a)&&(c=c[Ka](this.S[b]));return c}b=this.X.Na(this.b[b],a)?b+1:b;return this.i[b].get(a)};
H.s=function(a){var b=this.Zc(a);return this.X.Na(this.b[b],a)?!0:this.ea()?!1:this.i[b].s(a)};ja(H,function(a,b){this.zf(a,-1,b);if(this.Yf()){var c=this;1==this.i[y]&&(c=this.i[0],c.C=null);return c}return this});function pf(a){return a.ea()?a.b[0]:pf(a.i[0])}H.pd=function(){this.b=[];for(var a=1;a<this.i[y];++a)this.b[v](pf(this.i[a]))};
H.zf=function(a,b,c){var d=this.Zc(a);if(!this.ea()){var g=this.X.Na(this.b[d],a)?d+1:d;if(this.i[g].zf(a,g,c))this.pd();else return!1}else if(!this.X.Na(this.b[d],a))return!1;if(this.b[y]>d&&this.X.Na(this.b[d],a)){if(Fb(c)&&!this.X.Pc()&&this.ea()&&(a=this.S[d],c=nc(a,oc,!1,c),0<=c&&hc(a,c),this.S[d][y]))return!1;this.b[E](d,1);this.ea()&&this.S[E](d,1)}256>this.b[y]&&!this.Yf()&&(this.zk()||this.Jj(b));return!0};
H.zk=function(){var a=null,b,c,d;if(this.xa&&256<this.xa.b[y])a=this.xa,c=b=0,d=this.b[y]+1;else if(this.ub&&256<this.ub.b[y])a=this.ub,b=this.ub.b[y]-1,c=this.ea()?b:b+1,d=0;else return!1;this.b[E](d,0,a.b[b]);a.b[E](b,1);b=this.ea()?this.S:this.i;var g=null;this.ea()?g=a.S:(g=a.i,g[c].C=this);b[E](d,0,g[c]);g[E](c,1);a.ea()||(a.pd(),this.pd());return!0};
H.Jj=function(a){var b,c,d;this.xa&&511>this.xa.b[y]?(b=this.xa,d=c=0):this.ub&&(b=this.ub,c=b.b[y],d=b.ea()?b.S[y]:b.i[y]);c=[c,0][Ka](this.b);e[z][E][ib](b.b,c);c=null;this.ea()?c=this.S:(c=this.i,c[n](function(a){a.C=b}));c=[d,0][Ka](c);e[z][E][ib](b.ea()?b.S:b.i,c);nf(this.ub,this.xa);b.ea()||b.pd();-1!=a&&(this.C.b[E](a,1),this.C.i[E](a,1))};
H.tb=function(a,b,c){var d=this.Zc(a);if(this.ea()){if(this.X.Na(this.b[d],a)){if(c)return this.S[d]=this.X.Pc()?b:[b],this;if(this.X.Pc())throw new P("ConstraintError","Duplicate key not allowed");if(this.S[d])return pc(this.S[d],b),this;this.S[d]=[b]}this.b[E](d,0,a);this.S[E](d,0,this.X.Pc()?b:[b]);return 512==this.b[y]?this.wk():this}d=this.X.Na(this.b[d],a)?d+1:d;a=this.i[d].tb(a,b,c);a.ea()||1!=a.b[y]||(this.b[E](d,0,a.b[0]),a.i[1].C=this,a.i[0].C=this,this.i[E](d,1,a.i[1]),this.i[E](d,0,a.i[0]));
return 512==this.b[y]?this.vk():this};H.wk=function(){var a=gf(this.X),b=gf(this.X);b.lb=1;b.b=[this.b[256]];b.i=[this,a];b.C=this.C;this.C=b;a.b=this.b[E](256);a.S=this.S[E](256);a.C=b;nf(a,this.xa);nf(this,a);return b};H.vk=function(){var a=gf(this.X),b=gf(this.X);a.C=this.C;a.lb=this.lb+1;a.b=[this.b[256]];a.i=[this,b];this.b[E](256,1);b.C=a;b.lb=this.lb;b.b=this.b[E](256);b.i=this.i[E](257);b.i[n](function(a){a.C=b});this.C=a;nf(b,this.xa);nf(this,b);return a};
H.Zc=function(a){for(var b=0,c=this.b[y];b<c;){var d=b+c>>1;this.X.Le(this.b[d],a)?b=d+1:c=d}return b};H.Ff=function(a){if(!this.ea()){var b=this.Zc(a);this.X.Na(this.b[b],a)&&b++;return this.i[b].Ff(a)}return this};
H.Va=function(a,b){var c=-1,d=this.b[y]-1,g=this.X.Bc(),h=J(function(b){for(;b<this.b[y];++b){var h=g.mc(this.b[b],a);if(-1!=c){if(!h){d=b-1;break}}else h&&(c=b)}},this);g.mc(this.b[0],a)?c=0:h(1);if(-1==c)return 0;g.mc(this.b[d],a)||h(c);return d==this.b[y]-1?this.mf(b,this.S[w](c)):d>=c?this.mf(b,this.S[w](c,d+1)):0};H.mf=function(a,b){var c=this.X.Pc()?b:rc(b);a[v][ib](a,c);return c[y]};
function jf(a,b){for(var c=a.map(function(a){var c=new kf(a.id(),b);c.b=a.w()[0];c.S=a.w()[1];return c}),d=0;d<c[y]-1;++d)nf(c[d],c[d+1]);return 1<c[y]?ef(c[0]):c[0]};
function qf(a){if(1==a.h[y])return new rf(a.h[0].mb);a=a.h.map(function(a){return a.mb});return new sf(a)}function rf(a){this.jd=0==a?tf:uf;this.Me=0==a?function(a){return null!=a?a.reverse():null}:function(a){return a||null};this.mg=0==a?vf:wf}K(rf,Md);function uf(a,b){return a>b?1:a<b?-1:0}function tf(a,b){return uf(b,a)}function wf(a,b){return Zd(a,b)}function vf(a,b){return Zd(b,a)}H=rf[z];
H.me=function(a,b){var c=this.Me(b),d=[null===c.f,null===c.u];if(!d[0]){var g=this.jd(a,c.f);d[0]=c.ba?1==g:-1!=g}d[1]||(g=this.jd(a,c.u),d[1]=c.fa?-1==g:1!=g);return d};H.compare=function(a,b){return this.jd(a,b)};H.min=function(a,b){return a<b?1:a==b?0:-1};H.max=function(a,b){return a>b?1:a==b?0:-1};H.mc=function(a,b){var c=this.me(a,b);return c[0]&&c[1]};H.se=function(){return Yd()};H.lg=function(a,b){return this.mg(a,b)};
H.Gg=function(a){return a[Ea](function(a){return null!==a})[xb](J(function(a,c){return this.mg(a,c)},this))};H.Ge=function(a){return Jb(this.Me(a).f)};H.Rd=function(a){a=this.Me(a);return[a.f,a.u]};f(H,function(){return this.jd==tf?"SimpleComparator_DESC":"SimpleComparator_ASC"});function sf(a){this.ya=a.map(function(a){return new rf(a)})}K(sf,Md);H=sf[z];H.re=function(a,b,c){for(var d=0,g=0;g<this.ya[y]&&0==d;++g)d=c(this.ya[g],a[g],b[g]);return d};
H.compare=function(a,b){return this.re(a,b,function(a,b,g){return a[Wa](b,g)})};H.min=function(a,b){return this.re(a,b,function(a,b,g){return a.min(b,g)})};H.max=function(a,b){return this.re(a,b,function(a,b,g){return a.max(b,g)})};H.me=function(a,b){for(var c=[!0,!0],d=0;d<this.ya[y]&&(c[0]||c[1]);++d){var g=this.ya[d].me(a[d],b[d]);c[0]=c[0]&&g[0];c[1]=c[1]&&g[1]}return c};H.mc=function(a,b){for(var c=!0,d=0;d<this.ya[y]&&c;++d)c=this.ya[d].mc(a[d],b[d]);return c};H.se=function(){return this.ya.map(function(a){return a.se()})};
H.Gg=function(a){var b=a[Ea](function(a){return a[yb](Kb)});a=e(this.ya[y]);for(var c=0;c<a[y];c++)a[c]=b.map(function(a){return a[c]});a[n](function(a,b){a[xb](J(function(a,c){return this.ya[b].lg(a,c)},this))},this);b=e(b[y]);for(c=0;c<b[y];c++)b[c]=a.map(function(a){return a[c]});return b[xb](J(function(a,b){for(var c=0,l=0;l<this.ya[y]&&0==c;++l)c=this.ya[l].lg(a[l],b[l]);return c},this))};H.Ge=function(a){return this.ya[0].Ge(a[0])};
H.Rd=function(a){var b=a.map(function(a,b){return this.ya[b].Rd(a)[0]},this);a=a.map(function(a,b){return this.ya[b].Rd(a)[1]},this);return[b,a]};
function xf(a){this.wa=a;this.Za=new O}H=xf[z];ia(H,function(){return this.wa[k]()});H.add=function(a,b){null===a?this.Za.add(b):this.wa.add(a,b)};H.set=function(a,b){null===a?(this.Za[Pa](),this.Za.add(b)):this.wa.set(a,b)};ja(H,function(a,b){null===a?b?this.Za[m](b):this.Za[Pa]():this.wa[m](a,b)});H.get=function(a){return null===a?this.Za.c():this.wa.get(a)};H.md=function(a){return this.wa.md(a)};H.Va=function(a,b,c,d){b=this.wa.Va(a,b,c,d);return null!=a?b:b[Ka](this.Za.c())};
ma(H,function(){this.Za[Pa]();this.wa[Pa]()});H.s=function(a){return null===a?!this.Za.Ha():this.wa.s(a)};H.min=function(){return this.wa.min()};H.max=function(){return this.wa.max()};H.Ea=function(){return[new $c(-2,this.Za.c())][Ka](this.wa.Ea())};H.Bc=function(){return this.wa.Bc()};
function yf(a){this.B=a;this.vb=new Ze;this.L=new rf(1)}H=yf[z];ia(H,G("B"));H.add=function(a){if("number"!=typeof a)throw new P("DataError","Row id must be numbers");this.vb.add(a)};H.set=function(a,b){this.add(a,b)};ja(H,function(a){this.vb[qb](a)});H.get=function(a){return this.s(a)?[a]:[]};H.min=function(){return this.Sc(J(this.L.min,this.L))};H.max=function(){return this.Sc(J(this.L.max,this.L))};
H.Sc=function(a){if(0==this.vb[Ya])return[null,null];var b=$e(this.vb)[kb](J(function(b,d){return null===b||1==a(d,b)?d:b},this),null);return[b,[b]]};H.md=function(){return this.vb[Ya]};H.Va=function(a,b,c,d){var g=a||[Yd()];a=$e(this.vb)[Ea](function(a){return g[wb](function(b){return this.L.mc(a,b)},this)},this);return bf(a,b,c,d)};ma(H,function(){this.vb[Pa]()});H.s=function(a){return this.vb.has(a)};H.Ea=function(){return[new $c(0,$e(this.vb))]};H.Bc=G("L");
function zf(a,b){var c=new yf(a);b[0].w()[n](function(a){c.add(a,a)});return c};
function Af(a){this.m=a;this.wb=a.o(vd);this.N=a.o(xd);this.pa=a.o(wd)}H=Af[z];H.Aa=function(a){var b=a.gb(),c=J(function(){if(0==b[y])return Pc();var a=b[Ha]();return(a.Sb()?this.pi(a):this.ri(a))[A](c)},this);return c()};H.ri=function(a){var b=new Qd(this.m,[a]);return this.wb.Hb(0,b).Z(a[k](),J(a.fc,a)).get([])[A](J(function(b){this.pa.set(a[k](),b);this.dk(a,b)},this))};H.dk=function(a,b){var c=this.N.dj(a[k]());b[n](function(a){c[n](function(b){var c=a.Qc(b[k]());b.add(c,a.id())})})};
H.pi=function(a){var b=new Qd(this.m,[a]),c=this.wb.Hb(0,b),b=c.Z(a[k](),a.fc).get([])[A](J(function(b){this.pa.set(a[k](),b)},this)),d=a.Ga().map(function(a){return this.ek(a,c)},this)[Ka](this.fk(a,c));return Tc(d[Ka](b))};
H.ek=function(a,b){var c=b.Z(a.l(),bd,1),d=qf(a);return c.get([])[A](J(function(b){L("btree"==b[0].w().type);if(1<b[y]){if(a.Qf()){var c=hf[q](void 0,d,a.l(),a.Oc),l=b[w](1),p=-1;for(b=0;b<l[y];++b)if(-2==l[b].id()){p=b;break}if(-1==p)throw new P("DataError","Data corruption detected");b=l[p].w();l=l[w](0);l[E](p,1);c=c(l);c=new xf(c);c.Za[lb](b)}else c=hf(d,a.l(),a.Oc,b[w](1));this.N.set(c)}},this))};
H.fk=function(a,b){return b.Z(a.Kb(),bd,1).get([])[A](J(function(b){L("rowid"==b[0].w().type);1<b[y]&&(b=zf(a.Kb(),b[w](1)),this.N.set(b))},this))};


function Bf(){this.O=new N}Bf[z].Aa=function(a){a.gb()[n](function(a){var c=a.Kb();if(null===this.get(c)){var d=new yf(c);this.O.set(c,d)}a.Ga()[n](function(a){this.O.set(a.l(),Cf(a))},this)},this);return Pc()};function Cf(a){var b=qf(a),b=new cf(a.l(),b,a.Oc);return a.Qf()?new xf(b):b}Bf[z].get=function(a){return this.O.get(a,null)};Bf[z].set=function(a){return this.O.set(a[k](),a)};Bf[z].dj=function(a){var b=[],c=a+".";this.O.H()[n](function(a){0==a[ob](c)&&b[v](this.O.get(a))},this);return b};
function Df(a){this.$a=[];Fb(a)&&this.add(a)}H=Df[z];f(H,function(){return this.$a.map(function(a){return a[r]()})[F](",")});H.s=function(a){return this.$a[wb](function(b){return b[u](a)})};H.c=G("$a");
H.add=function(a){if(0!=a[y])if(a=this.$a[Ka](a),1==a[y])this.$a=a;else{a[xb](Zd);for(var b=[],c=a[0],d=1;d<a[y];++d)if(c.ng(a[d])){var g=a[d],h=Yd();if(null!==c.f&&null!==g.f){var l=Xd(c.f,g.f,!0);1!=l?(h.f=c.f,h.ba=0!=l?c.ba:c.ba&&g.ba):(h.f=g.f,h.ba=g.ba)}null!==c.u&&null!==g.u&&(l=Xd(c.u,g.u,!1),-1!=l?(h.u=c.u,h.fa=0!=l?c.fa:c.fa&&g.fa):(h.u=g.u,h.fa=g.fa));c=h}else b[v](c),c=a[d];b[v](c);this.$a=b}};
H.Fc=function(a){return this.$a[y]==a.$a[y]?0==this.$a[y]||this.$a[yb](function(b,c){return b.Fc(a.$a[c])}):!1};function Ef(a,b){var c=[];a.c().map(function(a){return b.c().map(function(b){var c;if(a.ng(b)){c=Yd();var l=Xd(a.f,b.f,!0),l=0==l?a.ba?a:b:-1!=l?a:b;c.f=l.f;c.ba=l.ba;null===a.u||null===b.u?b=null===a.u?b:a:(l=Xd(a.u,b.u,!1),b=0==l?a.fa?a:b:-1==l?a:b);c.u=b.u;c.fa=b.fa}else c=null;return c})})[n](function(a){c=c[Ka](a)});return new Df(c[Ea](function(a){return null!==a}))};
function Ff(a,b){var c=[],d=null,g=null;a.rc(function(a){var l=b(a);null==a[Ga]()?g=l:d.ia(l);var p=a[Ga]();null!==p&&p.ua()==d.ua()&&(p=c[ob](d),-1!=p&&c[E](p,1));1<a.ua()&&c[v](l);d=a.Vf()?c[c[y]-1]:l});return g}function Gf(a){return Hf(a,function(a){return a.Vf()})}function If(a){var b=a[Ga](),c=0;null!==b&&(c=b.Y()[ob](a),b[sb](a));var d=a.Y()[w]();d[n](function(d,h){a[sb](d);null===b||b.uc(d,c+h)});return{parent:b,children:d}}
function Jf(a,b){a.Y()[w]()[n](function(c){a[sb](c);b.ia(c)});a.ia(b)}function Kf(a){L(1==a.ua());var b=a.pb(0);L(1==b.ua());If(a);Jf(b,a);return b}function Lf(a,b,c){L(1==a.ua());var d=a.pb(0);L(1<d.ua());var g=d.Y()[w]();if(!g[wb](function(a){return b(a)}))return a;If(a);g[n](function(g,l){if(b(g)){var p=c(a);d.Td(l);p.ia(g);d.uc(p,l)}});return d}function Mf(a,b,c,d){var g=a[Ga]();null!==g&&(a=g.Y()[ob](a),g.Td(a),g.uc(c,a));b.Y()[w]()[n](function(a){b[sb](a);d.ia(a)});return c}
function Hf(a,b,c){function d(a){b(a)&&g[v](a);null!=c&&c(a)||a.Y()[n](d)}var g=[];d(a);return g}function Nf(a,b){var c=b||function(a){return a[r]()+"\n"},d="";a.rc(function(a){for(var b=0;b<a.Oi();b++)d+="-";d+=c(a)});return d};

function Of(a){se[D](this);this.Pb=a;this.Xa=!1}K(Of,se);H=Of[z];H.Gb=function(){return Ff(this,function(a){if(a instanceof Of){var b=new Of(a.Pb);b.Xa=a.Xa;b.Ye(a.ka());return b}return a.Gb()}[q](this))};H.yb=function(a){var b=a||[];this.rc(function(a){a!=this&&a.yb(b)}[q](this));return(new O(b)).c()};H.Wd=function(a){this.Xa!=a&&(this.Xa=a,this.Pb="and"==this.Pb?"or":"and",this.Y()[n](function(b){return b.Wd(a)}))};H.eval=function(a){var b=this.Y().map(function(b){return b.eval(a)});return this.Ih(b)};
H.Ih=function(a){return"and"==this.Pb?de(a):ee(a)};f(H,function(){return"combined_pred_"+this.Pb[r]()});function Pf(a,b){return a===b?0!==a||1/a===1/b:a!==a&&b!==b};function Qf(){this[Pa]()}var Rf=ba[z][Ua],Sf=ba[z][bb];H=Qf[z];H.set=function(a,b){this.bd(a);var c=!this.Nc(a);this.g[a]=b;if("__proto__"==a||!Tf&&!Rf[D](this.g,a)){delete this.g[a];var d=bc(this.Cb,a);if(c=0>d)d=this.Cb[y];this.Cb[d]=a;this.Ud[d]=b}c&&this.aa++};H.get=function(a,b){this.bd(a);if(this.Nc(a))return this.g[a];var c=bc(this.Cb,a);return 0<=c?this.Ud[c]:b};
ja(H,function(a){this.bd(a);if(this.Nc(a))return this.aa--,delete this.g[a],!0;a=bc(this.Cb,a);return 0<=a?(this.aa--,hc(this.Cb,a),hc(this.Ud,a),!0):!1});H.addAll=function(a){cc(a.H(),function(b){this.set(b,a.get(b))},this)};H.Ha=function(){return!this.aa};H.na=G("aa");H.s=function(a){this.bd(a);return this.Nc(a)||0<=bc(this.Cb,a)};H.ld=function(a){return tc(this.g,function(b,c){return this.Nc(c)&&Pf(b,a)},this)||0<=bc(this.Ud,a)};
H.H=function(){var a;if(Uf)a=jc(ba.keys(this.g));else{a=[];for(var b in this.g)Sf[D](this.g,b)&&a[v](b)}kc(a,this.Cb);return a};H.c=function(){for(var a=[],b=this.H(),c=0;c<b[y];c++)a[v](this.get(b[c]));return a};H.getEntries=function(){for(var a=[],b=this.H(),c=0;c<b[y];c++){var d=b[c];a[v]([d,this.get(d)])}return a};ma(H,function(){this.g=Tf?ba[Va](null):{};this.Cb=[];this.Ud=[];this.aa=0});sa(H,function(){var a=new Qf;a[lb](this);return a});
H.Nc=function(a){return"__proto__"==a?!1:Tf?a in this.g:Sf[D](this.g,a)};H.bd=function(a){L(Mb(a),"key must be a string.")};var Tf=!!ba[Va],Uf=!!ba.keys;function Vf(){this[Pa]()}H=Vf[z];H.aa=0;ma(H,function(){this.aa=0;this.g=new Qf});sa(H,function(){var a=new Vf;a.Vg(this);return a});H.add=function(a,b){var c=this.g.get(a);c||this.g.set(a,c=[]);c[v](b);this.aa++};H.Vg=function(a){cc(a.getEntries(),function(a){this.add(a[0],a[1])},this)};H.get=function(a){return(a=this.g.get(a))?jc(a):[]};ja(H,function(a,b){var c=this.g.get(a);if(!c)return!1;var d=ic(c,function(a){return Pf(b,a)});d&&(this.aa--,0==c[y]&&this.g[m](a));return d});H.Ha=function(){return!this.aa};
H.na=G("aa");H.s=function(a){return this.g.s(a)};H.ld=function(a){return fc(this.g.c(),function(b){return fc(b,function(b){return Pf(b,a)})})};H.H=function(){return this.g.H()};H.c=function(){return rc(this.g.c())};H.getEntries=function(){for(var a=this.H(),b=[],c=0;c<a[y];c++)for(var d=a[c],g=this.get(d),h=0;h<g[y];h++)b[v]([d,g[h]]);return b};
function Wf(a,b,c){se[D](this);this.Oa=a;this.bb=b;this.V=c;this.od=ke.ve().ue(this.Oa.$(),this.V)}K(Wf,se);H=Wf[z];H.Gb=function(){var a=new Wf(this.Oa,this.bb,this.V);a.Ye(this.ka());return a};H.yb=function(a){return null!=a?(a[v](this.Oa),a[v](this.bb),a):[this.Oa,this.bb]};H.eval=function(a){var b=a[C][Ea](function(a){var b=a.M(this.Oa);a=a.M(this.bb);return this.od(b,a)},this);return new $d(b,a.W())};f(H,function(){return"join_pred("+this.Oa.l()+", "+this.bb.l()+")"});
H.nf=function(a){return-1!=a.W()[ob](this.Oa.Z().za())};H.dh=function(a){return-1!=a.W()[ob](this.bb.Z().za())};H.Wh=function(a,b){var c=null,d=null;this.nf(a)?(this.qf(a,b),c=a,d=b):(this.qf(b,a),c=b,d=a);return[c,d]};H.qf=function(a,b){L(this.nf(a),"Mismatch between join predicate left operand and right relation.");L(this.dh(b),"Mismatch between join predicate right operand and right relation.")};H.ci=function(a,b){var c=this.Wh(a,b),d=c[0],c=c[1];return"eq"==this.V?this.di(d,c):this.ei(d,c)};
H.ei=function(a,b){for(var c=[],d=a.W(),g=b.W(),h=0;h<a[C][y];h++)for(var l=0;l<b[C][y];l++)if(this.od(a[C][h].M(this.Oa),b[C][l].M(this.bb))){var p=ie(a[C][h],d,b[C][l],g);c[v](p)}d=a.W()[Ka](b.W());return new $d(c,d)};
H.di=function(a,b){var c=a,d=b,g=this.Oa,h=this.bb;a[C][y]>b[C][y]&&(c=b,d=a,g=this.bb,h=this.Oa);var l=new Vf,p=[];c[C][n](function(a){var b=String(a.M(g));l.add(b,a)});var B=c.W(),Ra=d.W();d[C][n](function(a){var b=String(a.M(h));l.s(b)&&l.get(b)[n](function(b){b=ie(a,Ra,b,B);p[v](b)})});c=a.W()[Ka](b.W());return new $d(p,c)};
function Xf(a,b,c){return null===b?new ue(a,b,c):Fb(b.l)?new Wf(a,b,c):new ue(a,b,c)};
var Yf={};I("lf.schema.DataStoreType",Yf,void 0);Yf.INDEXED_DB=0;Yf.MEMORY=1;Yf.LOCAL_STORAGE=2;Yf.FIREBASE=3;Yf.WEB_SQL=4;Yf.OBSERVABLE_STORE=5;function Zf(a,b,c,d){this.Ig=a;za(this,b);this.Oc=c;this.h=d}Zf[z].l=function(){return this.Ig+"."+this[rb]};Zf[z].Qf=function(){return this.h[wb](function(a){return a.cb.nc()})};function $f(a,b,c,d){this.B=a;this.qa=c;this.G=b;this.Nd=d;this.ib=null}I("lf.schema.Table",$f,void 0);ia($f[z],G("B"));$f[z].Ua=G("ib");$f[z].za=function(){return this.ib||this.B};
$f[z].xc=function(a){var b=new this.constructor(this.B);b.ib=a;return b};$f[z].as=$f[z].xc;$f[z].createRow=$f[z].xb;$f[z].deserializeRow=$f[z].fc;$f[z].Ga=G("qa");$f[z].yb=G("G");$f[z].getConstraint=$f[z].kc;$f[z].Sb=G("Nd");$f[z].Kb=function(){return this.B+".#"};
function T(a,b){ta(this,a);this.$b=b;this.ib=null}H=T[z];ia(H,function(){return this.$b+"("+this[gb][k]()+")"});H.l=function(){return this.$b+"("+this[gb].l()+")"};H.Z=function(){return this[gb].Z()};f(H,function(){return this.l()});H.$=function(){return this[gb].$()};H.Ua=G("ib");H.Ga=function(){return[]};H.nc=Db(!1);H.xc=function(a){this.ib=a;return this};T[z].as=T[z].xc;T[z].Ef=function(){for(var a=[this],b=this;b instanceof T;)a[v](b[gb]),b=b[gb];return a};
function ag(a){this.ib=a||null;this.F=new $f("#UnknownTable",[],[],!1)}H=ag[z];ia(H,Db("*"));H.l=function(){return this[k]()};f(H,function(){return this.l()});H.Z=G("F");H.$=Db(4);H.Ua=G("ib");H.Ga=function(){return[]};H.nc=Db(!1);
I("lf.fn.avg",function(a){return new T(a,"AVG")},void 0);I("lf.fn.count",function(a){return new T(a||new ag,"COUNT")},void 0);function bg(a){return new T(a,"DISTINCT")}I("lf.fn.distinct",bg,void 0);I("lf.fn.max",function(a){return new T(a,"MAX")},void 0);I("lf.fn.min",function(a){return new T(a,"MIN")},void 0);I("lf.fn.stddev",function(a){return new T(a,"STDDEV")},void 0);I("lf.fn.sum",function(a){return new T(a,"SUM")},void 0);I("lf.fn.geomean",function(a){return new T(a,"GEOMEAN")},void 0);
function U(a,b){qe[D](this,"","");this.mi=b;this.jg=a}K(U,qe);H=U[z];H.da=Db(null);ha(H,function(a,b){switch(this.mi){case 1:return this.hi(a,b);case 0:return this.gi(a,b);default:return this.ji(a,b)}});f(H,Db("dummy_node"));H.$c=function(){return this[r]()};H.of=function(a){L(-1==this.jg||a[y]==this.jg)};H.ji=function(a,b){return new M(J(function(c){c(this.ja(a,[],b))},this))};H.hi=function(a,b){return this.pb(0)[Ia](a,b)[A](J(function(c){this.of(c);return this.ja(a,c,b)},this))};
H.gi=function(a,b){var c=this.Y().map(function(c){return c[Ia](a,b)});return Tc(c)[A](J(function(c){var g=[];c[n](function(a){for(var b=0;b<a[y];++b)g[v](a[b])});this.of(g);return this.ja(a,g,b)},this))};
function cg(a){U[D](this,-1,1);this.kf=a}K(cg,U);f(cg[z],function(){return"aggregation("+this.kf.map(function(a){return a.l()})[r]()+")"});cg[z].ja=function(a,b){b[n](function(a){(new dg(a,this.kf)).qh()},this);return b};function dg(a,b){this.Ca=a;this.G=b}
dg[z].qh=function(){this.G[n](function(a){a=a.Ef().reverse();for(var b=1;b<a[y];b++){var c=a[b],d=c.Ef()[w](-1)[0],g=this.Ri(c),h=null;switch(c.$b){case "MIN":h=eg(g,d);break;case "MAX":h=fg(g,d);break;case "DISTINCT":h=gg(g,d);break;case "COUNT":h=g[C][y];break;case "SUM":h=hg(g,d);break;case "AVG":0<g[C][y]&&(h=hg(g,d)/g[C][y]);break;case "GEOMEAN":h=ig(g,d);break;default:h=jg(g,d)}this.Ca.pk(c,h)}},this)};dg[z].Ri=function(a){return a[gb]instanceof T?this.Ca.jc(a[gb]):this.Ca};
function eg(a,b){var c=null;a[C][n](function(a){a=a.M(b);if(null===c||a<c)c=a});return c}function fg(a,b){var c=null;a[C][n](function(a){a=a.M(b);if(null===c||a>c)c=a});return c}function hg(a,b){return a[C][kb](function(a,d){return a+d.M(b)},0)}function jg(a,b){var c=a[C].map(function(a){return a.M(b)});return md[ib](null,c)}function ig(a,b){var c=0,d=a[C][kb](function(a,d){var l=d.M(b);return 0!=l?(c++,a+ea.log(l)):a},0);return 0==c?null:ea.pow(ea.E,d/c)}
function gg(a,b){var c=new N;a[C][n](function(a){var g=a.M(b);c.set(g,a)});return new $d(c.c(),a.W())};
function V(){qe[D](this,"","")}K(V,qe);function kg(a,b){V[D](this);oa(this,a);la(this,b)}K(kg,V);function lg(a,b){kg[D](this,a,b)}K(lg,kg);function mg(a){V[D](this);oa(this,a)}K(mg,V);f(mg[z],function(){return"delete("+this[t][k]()+")"});function ng(a,b){V[D](this);oa(this,a);this.ef=b}K(ng,V);f(ng[z],function(){var a=[];this.ef&&(a=this.ef.map(function(a){return a.K[k]()},this));return"update("+this[t][k]()+", ["+a[F](",")+"])"});function og(a){V[D](this);this.Ba=a}K(og,V);
f(og[z],function(){return"select("+this.Ba[r]()+")"});function pg(a){V[D](this);oa(this,a)}K(pg,V);f(pg[z],function(){var a="table_access("+this[t][k]();null===this[t].Ua()||(a+=" as "+this[t].Ua());return a+")"});function qg(){V[D](this)}K(qg,V);f(qg[z],Db("cross_product"));function rg(a,b){V[D](this);this.h=a;this.Lb=b}K(rg,V);f(rg[z],function(){var a="project("+this.h[r]();if(null!==this.Lb)var b=this.Lb.map(function(a){return a.l()})[F](", "),a=a+(", groupBy("+b+")");return a+")"});
function sg(a){V[D](this);this.J=a}K(sg,V);f(sg[z],function(){return"order_by("+ye(this.J)+")"});function tg(a){V[D](this);this.h=a}K(tg,V);f(tg[z],function(){return"aggregation("+this.h[r]()+")"});function ug(a){V[D](this);this.h=a}K(ug,V);f(ug[z],function(){return"group_by("+this.h[r]()+")"});function vg(a){V[D](this);this.oa=a}K(vg,V);f(vg[z],function(){return"limit("+this.oa+")"});function wg(a){V[D](this);this.ma=a}K(wg,V);f(wg[z],function(){return"skip("+this.ma+")"});
function xg(a){V[D](this);this.Ba=a}K(xg,V);f(xg[z],function(){return"join("+this.Ba[r]()+")"});
function yg(){};
function zg(){}K(zg,yg);zg[z].Ab=function(a){this.ha=a;this.Ta(this.ha);return this.ha};zg[z].Ta=function(a){if(a instanceof og){L(1==a.ua(),"SelectNode must have exactly one child.");var b=this.sf(a.Ba),b=this.Qh(b);Mf(a,a,b[0],b[1]);a==this.ha&&(this.ha=b[0]);a=b[0]}a.Y()[n](function(a){this.Ta(a)},this)};zg[z].sf=function(a){if(0==a.ua()||"and"!=a.Pb)return[a];var b=a.Y()[w]().map(function(b){a[sb](b);return this.sf(b)},this);return rc(b)};
zg[z].Qh=function(a){var b=null,c=null;a.map(function(a,g){var h=new og(a);0==g?b=h:c.ia(h);c=h},this);return[b,c]};
function Ag(){}K(Ag,yg);Ag[z].Ab=function(a){this.ha=a;this.Ta(this.ha);return this.ha};Ag[z].Ta=function(a){if(a instanceof qg)for(;2<a.ua();){for(var b=new qg,c=0;2>c;c++){var d=a.Td(0);b.ia(d)}a.uc(b,0)}a.Y()[n](function(a){this.Ta(a)},this)};
function Bg(){U[D](this,2,0)}K(Bg,U);f(Bg[z],Db("cross_product"));Bg[z].ja=function(a,b){for(var c=b[0],d=b[1],g=[],h=c.W(),l=d.W(),p=0;p<c[C][y];p++)for(var B=0;B<d[C][y];B++){var Ra=ie(c[C][p],h,d[C][B],l);g[v](Ra)}c=c.W()[Ka](d.W());return[new $d(g,c)]};

function Cg(a,b){Ce[D](this,a,b);this.Ra=a.o(zd);this.zb=a.o(Ad)}K(Cg,Ce);wa(Cg[z],Db(2));Cg[z].Oe=function(a){0==this.$()?this.Lj(a):this.Yc()};Cg[z].Lj=function(a){this.Qd[n](function(b,c){b instanceof xe&&this.zb.Qg(b,a[c])},this)};Cg[z].Yc=function(){var a=this.zb.Be(this.da().c());0!=a[y]&&(a=new De(this[Ta],a),this.Ra.Vb(a))};
function Dg(){ve[D](this)}K(Dg,ve);sa(Dg[z],function(){var a=new Dg;a.hd(this);a.f=this.f;return a});na(Dg[z],function(a){Dg.eb[q][D](this,a);this.ge(a);return this});
function Eg(){ve[D](this)}K(Eg,ve);sa(Eg[z],function(){var a=new Eg;a.hd(this);a.Wa=this.Wa;this[Oa]&&la(a,this[Oa]instanceof je?this[Oa]:this[Oa][w]());a.wc=this.wc;a.ac=this.ac;return a});na(Eg[z],function(a){Eg.eb[q][D](this,a);this.ac&&la(this,this.ac instanceof je?a[this.ac.qb()]:this.ac.map(function(b){return b instanceof je?a[b.qb()]:b}));return this});
function Fg(){ve[D](this)}K(Fg,ve);sa(Fg[z],function(){var a=new Fg;a.hd(this);oa(a,this[t]);a.set=this.set?this.set[w]():this.set;return a});na(Fg[z],function(a){Fg.eb[q][D](this,a);this.set[n](function(b){-1!=b.cd&&va(b,a[b.cd])});this.ge(a);return this});
function Gg(a,b){if(null==b)return"NULL";switch(a){case 1:return b?1:0;case 3:case 4:return b;case 0:return"'"+dd(b)+"'";default:return"'"+b[r]()+"'"}}function Hg(a,b){var c=a.wc?"INSERT OR REPLACE":"INSERT",d=a.Wa.yb(),c=c+(" INTO "+a.Wa[k]()+"("),c=c+d.map(function(a){return a[k]()})[F](", "),c=c+") VALUES (";return a[Oa].map(function(a){var h=d.map(function(c){var d=a.w()[c[k]()];return b?null!=d?"#":"NULL":Gg(c.$(),d)});return c+h[F](", ")+");"})[F]("\n")}
function Ig(a){switch(a){case "between":return"BETWEEN";case "eq":return"=";case "gte":return">=";case "gt":return">";case "in":return"IN";case "lte":return"<=";case "lt":return"<";case "match":return"LIKE";case "neq":return"<>";default:return"UNKNOWN"}}function Jg(a,b,c,d){return a instanceof je?"?"+a.qb()[r]():d?null!=a?"#":"NULL":"match"==b?"'"+a[r]()+"'":"in"==b?"("+a.map(function(a){return Gg(c,a)})[F](", ")+")":"between"==b?Gg(c,a[0])+" AND "+Gg(c,a[1]):Gg(c,a)[r]()}
function Kg(a,b){return a.Y().map(function(a){return"("+Lg(a,b)+")"})[F]("and"==a.Pb?" AND ":" OR ")}function Lg(a,b){if(a instanceof ue)return[a.K.l(),Ig(a.V),Jg(a[x],a.V,a.K.$(),b)][F](" ");if(a instanceof Of)return Kg(a,b);if(a instanceof Wf)return[a.Oa.l(),Ig(a.V),a.bb.l()][F](" ");throw new P("NotSupportedError","toSql does not support predicate type: "+typeof a);}function Mg(a,b){var c=Lg(a,b);return c?" WHERE "+c:""}
function Ng(a,b){var c="UPDATE "+a[t][k]()+" SET ",c=c+a.set.map(function(a){var b=a.K.l()+" = ";return-1!=a.cd?b+"?"+a.cd[r]():b+Gg(a.K.$(),a[x])[r]()})[F](", ");a.D&&(c+=Mg(a.D,b));return c+";"}
function Og(a,b){var c="*";a.h[y]&&(c=a.h.map(function(a){return a.Ua()?a.l()+" AS "+a.Ua():a.l()})[F](", "));var d=a.f.map(function(a){return a.za()!=a[k]()?a[k]()+" AS "+a.za():a[k]()})[F](", "),c="SELECT "+c+" FROM "+d;a.D&&(c+=Mg(a.D,b));a.J&&(d=a.J.map(function(a){return a.K.l()+(0==a.mb?" DESC":" ASC")})[F](", "),c+=" ORDER BY "+d);a.la&&(d=a.la.map(function(a){return a.l()})[F](", "),c+=" GROUP BY "+d);a.oa&&(c+=" LIMIT "+a.oa[r]());a.ma&&(c+=" SKIP "+a.ma[r]());return c+";"}
function Pg(a,b){var c=b||!1,d=a.Kf();if(d instanceof Eg)return Hg(d,c);if(d instanceof Dg){var g="DELETE FROM "+d.f[k]();d.D&&(g+=Mg(d.D,c));return g+";"}if(d instanceof Fg)return Ng(d,c);if(d instanceof xe)return Og(d,c);throw new P("NotSupportedError","toSql not implemented for "+typeof d);};
function Qg(a,b){this.global=a;this.bk=a.o(yd);this.Ra=a.o(zd);this.a=b}I("lf.query.BaseBuilder",Qg,void 0);ha(Qg[z],function(){try{this.jb()}catch(a){return Qc(a)}return new M(function(a,c){var d=new Cg(this[Ta],[this.Lc()]);this.Ra.Vb(d)[A](function(c){a(c[0].we())},c)},this)});ha(Qg[z],Qg[z][Ia]);Qg[z].Bf=function(){var a=J(function(a){return a.$c(this.a)+"\n"},this);return Nf(this.xe().Jb(),a)};Qg[z].explain=Qg[z].Bf;na(Qg[z],function(a){this.a[q](a);return this});na(Qg[z],Qg[z][q]);
Qg[z].Ck=function(a){return Pg(this,a)};Qg[z].toSql=Qg[z].Ck;H=Qg[z];H.jb=Bb();H.Kf=function(){return this.a.clone()};H.zd=G("a");H.xe=function(){null==this.og&&(this.og=this.bk.Xi(this.a));return this.og};H.Lc=function(){return{context:this.Kf(),Re:this.xe()}};H.Vi=function(){return{context:this.zd(),Re:this.xe()}};
function Rg(a){Qg[D](this,a,new Dg)}K(Rg,Qg);I("lf.query.DeleteBuilder",Rg,void 0);Rg[z].f=function(a){this.hh();this.a.f=a;return this};Rg[z].from=Rg[z].f;Rg[z].D=function(a){this.fe();this.a.D=a;return this};Rg[z].where=Rg[z].D;Rg[z].hh=function(){if(null!=this.a.f)throw new P("SyntaxError","from() has already been called.");};Rg[z].fe=function(){if(null!=this.a.D)throw new P("SyntaxError","where() has already been called.");};
Rg[z].jb=function(){Rg.eb.jb[D](this);if(null==this.a.f)throw new P("SyntaxError","Invalid usage of delete()");};
function Sg(a,b){Qg[D](this,a,new Eg);this.a.wc=b||!1}K(Sg,Qg);I("lf.query.InsertBuilder",Sg,void 0);Sg[z].jb=function(){Sg.eb.jb[D](this);var a=this.a;if(null==a.Wa||null==a[Oa])throw new P("SyntaxError","Invalid usage of insert()");if(a.wc&&null===a.Wa.kc().ye())throw new P("SyntaxError","Attempted to insert or replace in a table with no primary key.");};Sg[z].Wa=function(a){this.ih();this.a.Wa=a;return this};Sg[z].into=Sg[z].Wa;
la(Sg[z],function(a){this.jh();a instanceof je||a[wb](function(a){return a instanceof je})?this.a.ac=a:la(this.a,a);return this});la(Sg[z],Sg[z][Oa]);Sg[z].ih=function(){if(null!=this.a.Wa)throw new P("SyntaxError","into() has already been called.");};Sg[z].jh=function(){if(null!=this.a[Oa])throw new P("SyntaxError","values() has already been called.");};
function Tg(a){return Ug("and",e[z][w][D](arguments))}I("lf.op.and",Tg,void 0);I("lf.op.or",function(a){return Ug("or",e[z][w][D](arguments))},void 0);function Ug(a,b){var c=new Of(a);b[n](function(a){c.ia(a)});return c}I("lf.op.not",function(a){a.Wd(!0);return a},void 0);
function W(a,b){Qg[D](this,a,new xe);this.Df=this.Tg=!1;this.a.h=b;this.xh();this.wh()}K(W,Qg);I("lf.query.SelectBuilder",W,void 0);H=W[z];H.jb=function(){W.eb.jb[D](this);var a=this.a;if(null==a.f)throw new P("SyntaxError","Invalid usage of select()");if(Fb(a.Nb)&&!Fb(a.oa)||Fb(a.Yb)&&!Fb(a.ma))throw new P("SyntaxError","Binding parameters of limit/skip without providing values");this.Eh()};
H.xh=function(){var a=this.a.h[Ea](function(a){return a instanceof T&&"DISTINCT"==a.$b},this);if(0!=a[y]&&(1!=a[y]||1!=this.a.h[y]))throw new P("SyntaxError","Invalid usage of lf.fn.distinct()");};H.Eh=function(){null!=this.a.la?this.zh():this.Dh()};
H.zh=function(){var a=this.a.h[Ea](function(a){return!(a instanceof T)}).map(function(a){return a.l()}),b=!1;if(0==this.a.la[y]||0==this.a.h[y])b=!0;else{var c=this.a.la.map(function(a){return a.l()});(b=a[wb](function(a){return-1==c[ob](a)}))||(b=this.a.la[wb](function(a){a=a.$();return 6==a||0==a}))}if(b)throw new P("SyntaxError","Invalid projection list or groupBy columns");};
H.Dh=function(){var a=this.a.h[wb](function(a){return a instanceof T},this),b=this.a.h[wb](function(a){return!(a instanceof T)},this)||0==this.a.h[y];if(a&&b)throw new P("SyntaxError","Invalid projection list, aggregated and non-aggregated can't be mixed.");};H.wh=function(){this.a.h[n](function(a){if(a instanceof T&&!Vg(a.$b,a.$()))throw new P("SyntaxError","Invalid aggregation detected for"+a.l());},this)};
H.ee=function(a,b){if(null!=a)throw new P("SyntaxError",b+"() has already been called.");};H.pf=function(a,b){if(0>a)throw new P("SyntaxError",b+"() does not accept negative values");};H.f=function(a){if(this.Df)throw new P("SyntaxError","from() has already been called.");this.Df=!0;null==this.a.f&&(this.a.f=[]);this.a.f[v][ib](this.a.f,e[z][w][D](arguments));return this};W[z].from=W[z].f;
W[z].D=function(a){if(this.Tg)throw new P("SyntaxError","where() has already been called.");this.Tg=!0;this.rf(a);return this};W[z].where=W[z].D;W[z].rf=function(a){null!=this.a.D&&(a=Tg(a,this.a.D));this.a.D=a};W[z].Ee=function(a,b){null==this.a.f&&(this.a.f=[]);this.a.f[v](a);this.rf(b);return this};W[z].innerJoin=W[z].Ee;W[z].Aj=function(){throw new P("NotSupportedError","Not implemented yet");};W[z].leftOuterJoin=W[z].Aj;
W[z].oa=function(a){this.ee(this.a.oa||this.a.Nb,"limit");a instanceof je?this.a.Nb=a:(this.pf(a,"limit"),this.a.oa=a);return this};W[z].limit=W[z].oa;W[z].ma=function(a){this.ee(this.a.ma||this.a.Yb,"skip");a instanceof je?this.a.Yb=a:(this.pf(a,"skip"),this.a.ma=a);return this};W[z].skip=W[z].ma;W[z].J=function(a,b){null==this.a.J&&(this.a.J=[]);this.a.J[v]({K:a,mb:null!=b?b:1});return this};W[z].orderBy=W[z].J;
W[z].la=function(a){this.ee(this.a.la,"groupBy");null==this.a.la&&(this.a.la=[]);this.a.la[v][ib](this.a.la,e[z][w][D](arguments));return this};W[z].groupBy=W[z].la;function Vg(a,b){switch(a){case "COUNT":case "DISTINCT":return!0;case "AVG":case "GEOMEAN":case "STDDEV":case "SUM":return 4==b||3==b;case "MAX":case "MIN":return 4==b||3==b||5==b||2==b}return!1}sa(W[z],function(){var a=new W(this[Ta],this.a.h);a.a=this.a.clone();a.a.Ac=null;return a});sa(W[z],W[z].clone);
function Wg(a,b){Qg[D](this,a,new Fg);oa(this.a,b)}K(Wg,Qg);I("lf.query.UpdateBuilder",Wg,void 0);Wg[z].set=function(a,b){var c={cd:b instanceof je?b.qb():-1,K:a,value:b};null!=this.a.set?this.a.set[v](c):this.a.set=[c];return this};Wg[z].set=Wg[z].set;Wg[z].D=function(a){this.fe();this.a.D=a;return this};Wg[z].where=Wg[z].D;Wg[z].fe=function(){if(null!=this.a.D)throw new P("SyntaxError","where() has already been called.");};
Wg[z].jb=function(){Wg.eb.jb[D](this);if(null==this.a.set)throw new P("SyntaxError","Invalid usage of update()");if(this.a.set[wb](function(a){return a[x]instanceof je}))throw new P("SyntaxError","Update set value not bound");};
function Xg(a){this.a=a;this.Da=null}Xg[z].ic=function(){null===this.Da&&(this.Da=this.rd());return this.Da};function Yg(a){Xg[D](this,a)}K(Yg,Xg);Yg[z].rd=function(){return this.a.wc?new lg(this.a.Wa,this.a[Oa]):new kg(this.a.Wa,this.a[Oa])};function Zg(a){Xg[D](this,a)}K(Zg,Xg);Zg[z].rd=function(){var a=new ng(this.a[t],this.a.set),b=null!=this.a.D?new og(this.a.D.Gb()):null,c=new pg(this.a[t]);null===b?a.ia(c):(b.ia(c),a.ia(b));return a};
function $g(a,b){this.Da=a;this.Ve=b}$g[z].ic=function(){this.Ve[n](function(a){this.Da=a.Ab(this.Da)},this);return this.Da};
function ah(a){Xg[D](this,a)}K(ah,Xg);ah[z].rd=function(){var a=new mg(this.a.f),b=null!=this.a.D?new og(this.a.D.Gb()):null,c=new pg(this.a.f);null===b?a.ia(c):(b.ia(c),a.ia(b));return(new $g(a,[new zg])).ic()};
function bh(){}K(bh,yg);bh[z].Ab=function(a){this.ha=a;this.Ta(this.ha);return this.ha};bh[z].Ta=function(a){if(a instanceof og&&a.Ba instanceof Wf){L(1==a.ua(),"SelectNode must have exactly one child.");var b=a.pb(0);if(b instanceof qg){var c=new xg(a.Ba);Mf(a,b,c,c);a==this.ha&&(this.ha=c);a=c}}a.Y()[n](function(a){this.Ta(a)},this)};
function dh(){this.ce=new O}K(dh,yg);H=dh[z];H.Ab=function(a){this.ha=a;this.Ta(this.ha);this.ce[Pa]();return this.ha};H.Ta=function(a){if(this.Tf(a)){var b=a.Ba instanceof ue?this.$j(a):this.Zj(a);this.ce.add(a);b==a&&(b=a.pb(0));null!==b&&(Jb(b[Ga]())&&(this.ha=b),this.Tf(b)&&!this.ce[u](b)&&this.Ta(b))}else a.Y()[n](function(a){this.Ta(a)},this)};
H.Pd=function(a,b){var c=a;if(this.tk(a))c=Kf(a),this.Pd(a,b);else if(this.sk(a)){var d=[],c=Lf(a,b,function(a){a=new og(a.Ba);d[v](a);return a});d[n](function(a){this.Pd(a,b)},this)}return c};H.$j=function(a){var b=new O([a.Ba.K.Z().za()]),c=function(a){return this.Af(a,b)}[q](this);return this.Pd(a,c)};H.Zj=function(a){var b=new O([a.Ba.Oa.Z().za(),a.Ba.bb.Z().za()]),c=function(a){return this.Af(a,b)}[q](this);return this.Pd(a,c)};
H.Af=function(a,b){var c=new O;Gf(a)[n](function(a){c.add(a[t].za())},this);a instanceof pg&&c.add(a[t].za());return c.Nh(b)};H.Tf=function(a){return a instanceof og&&!(a.Ba instanceof Of)};H.sk=function(a){a=a.pb(0);return a instanceof qg||a instanceof xg};H.tk=function(a){return a.pb(0)instanceof og};
function eh(a){Xg[D](this,a);this.tg=this.dg=this.Fg=this.kg=this.lf=this.Pf=this.Cg=this.xf=this.Hg=null}K(eh,Xg);H=eh[z];H.rd=function(){this.Fi();var a=this.Kh(),b=[new zg,new Ag,new dh,new bh];return(new $g(a,b)).ic()};H.Fi=function(){this.Li();this.Ai();this.Ji();this.Gi();this.Ki();this.Ei();this.Ci();this.zi();this.Hi()};
H.Kh=function(){for(var a=[this.dg,this.Fg,this.tg,this.kg,this.lf,this.Pf,this.Cg,this.xf],b=null,c=null,d=0;d<a[y];d++){var g=a[d];null!==g&&(null===c?c=g:a[b].ia(g),b=d)}this.Hg[n](function(c){a[b].ia(c)});return c};H.Li=function(){this.Hg=this.a.f.map(function(a){return new pg(a)},this)};H.Ai=function(){2<=this.a.f[y]&&(this.xf=new qg)};H.Ji=function(){this.Cg=null!=this.a.D?new og(this.a.D.Gb()):null};H.Gi=function(){this.a.J&&(this.kg=new sg(this.a.J))};
H.Ei=function(){null!=this.a.oa&&(this.dg=new vg(this.a.oa))};H.Ki=function(){null!=this.a.ma&&0<this.a.ma&&(this.Fg=new wg(this.a.ma))};H.Ci=function(){null!=this.a.la&&(this.Pf=new ug(this.a.la))};H.zi=function(){var a=this.a.h[Ea](function(a){return a instanceof T});null!=this.a.J&&this.a.J[n](function(b){b.K instanceof T&&a[v](b.K)});0<a[y]&&(this.lf=new tg(a))};H.Hi=function(){this.tg=new rg(this.a.h||[],this.a.la||null)};
function fh(){}fh[z].create=function(a){var b=null;if(a instanceof Eg)b=new Yg(a);else if(a instanceof Dg)b=new ah(a);else if(a instanceof xe)b=new eh(a);else if(a instanceof Fg)b=new Zg(a);else throw new P("SyntaxError","Unknown query context");return b.ic()};
function gh(a){U[D](this,1,1);this.F=a}K(gh,U);f(gh[z],function(){return"delete("+this.F[k]()+")"});gh[z].da=G("F");gh[z].ja=function(a,b){var c=b[0][C].map(function(a){return a.ta});a[m](this.F,c);return[ce()]};
function hh(a){U[D](this,1,1);this.Of=a}K(hh,U);f(hh[z],function(){return"groupBy("+this.Of.map(function(a){return a.l()})[r]()+")"});hh[z].ja=function(a,b){return this.sh(b[0])};hh[z].sh=function(a){var b=new Vf,c=function(a){return this.Of.map(function(b){return a.M(b)},this)[F](",")}[q](this);a[C][n](function(a){b.add(c(a),a)},this);return b.H().map(function(c){return new $d(b.get(c),a.W())},this)};
function ih(a){L(1<a[y],"Should only be called for cross-column indices.");a=a.map(function(a){return a.c()});a=rd[ib](null,a);var b=[];qd(a,function(a){b[v](a)});return b}function jh(a){this.Mb=a}jh[z].wd=function(){return 1==this.Mb.h[y]?[Yd()]:[this.Mb.h.map(function(){return Yd()})]};function kh(a,b){this.Mb=a;this.ra=b;this.ke=this.bg=null}
kh[z].th=function(a){var b=new N;this.ra.H()[n](function(c){var d=this.ra.get(c).map(function(b){return a.Ad(b)},this),g=new Df([Yd()]);d[n](function(a){a=new Df(a.Bk());g=Ef(g,a)});b.set(c,g)},this);return b};kh[z].si=function(a){for(var b=this.Mb.h[y]-1;0<=b;b--){var c=this.Mb.h[b];if(null!==a.get(c.cb[k](),null))break;a.set(c.cb[k](),new Df([Yd()]))}};kh[z].wd=function(a){if(this.bg==a)return this.ke;var b=this.th(a);this.si(b);this.ke=1==this.Mb.h[y]?b.c()[0].c():ih(this.cj(b));this.bg=a;return this.ke};
kh[z].cj=function(a){var b=new N,c=0;this.Mb.h[n](function(a){b.set(a.cb[k](),c);c++});return a.H()[xb](function(a,c){return b.get(a)-b.get(c)}).map(function(b){return a.get(b)})};
function lh(a,b){this.Kg=b;this.N=a.o(xd)}lh[z].Gh=function(a,b){var c=b[Ea](this.uj,this);if(0==c[y])return null;c=this.Di(c);if(0==c[y])return null;if(1==c[y])return c[0];var d=Number.MAX_VALUE;return c[kb](function(b,c){var l=c.rh(a);return l<d?(d=l,c):b},null)};lh[z].Di=function(a){return this.Kg.Ga().map(function(b){b=new mh(this.N,b);b.Mh(a);return b},this)[Ea](function(a){return a.zj()})};lh[z].uj=function(a){return a instanceof ue&&a.Uf()?a.K.Z()==this.Kg:!1};
function mh(a,b){this.N=a;this.sb=b;this.Rf=new O;this.Rf[lb](this.sb.h.map(function(a){return a.cb[k]()}));this.Ke=this.ra=null}H=mh[z];H.Yi=function(){return null===this.ra?[]:this.ra.c()};H.Jf=function(){L(this.ra);null===this.Ke&&(this.Ke=new kh(this.sb,this.ra));return this.Ke};H.Mh=function(a){a[n](function(a){var c=a.yb()[0][k]();this.Rf[u](c)&&(null===this.ra&&(this.ra=new Vf),this.ra.add(c,a.ka()))},this)};
H.zj=function(){if(null===this.ra)return!1;for(var a=!1,b=!0,c=0;c<this.sb.h[y];c++){var d=this.ra.s(this.sb.h[c].cb[k]());if(a&&d){b=!1;break}d||(a=!0)}return b};H.rh=function(a){a=this.Jf().wd(a);var b=this.N.get(this.sb.l());return a[kb](function(a,d){return a+b.md(d)},0)};
function nh(a,b,c,d){U[D](this,0,-1);this.N=a.o(xd);this.index=b;this.$f=c;this.Ue=d;this.$d=this.Zd=!1}K(nh,U);f(nh[z],function(){return"index_range_scan("+this[Za].l()+", ?, "+(this.Ue?"reverse":"natural")+(this.Zd?", limit:?":"")+(this.$d?", skip:?":"")+")"});nh[z].$c=function(a){var b=this[r](),c=this.$f.wd(a),b=b[Ja]("?",c[r]());this.Zd&&(b=b[Ja]("?",a.oa[r]()));this.$d&&(b=b[Ja]("?",a.ma[r]()));return b};
nh[z].ja=function(a,b,c){a=this.$f.wd(c);c=this.N.get(this[Za].l()).Va(a,this.Ue,this.Zd?c.oa:void 0,this.$d?c.ma:void 0).map(function(a){return new $c(a,{})},this);return[fe(c,[this[Za].Ig])]};
function oh(a){U[D](this,1,1);this.Od=a}K(oh,U);f(oh[z],Db("select(?)"));oh[z].$c=function(a){a=a.Ad(this.Od);return this[r]()[Ja]("?",a[r]())};oh[z].ja=function(a,b,c){return[c.Ad(this.Od).eval(b[0])]};
function ph(a,b){U[D](this,1,1);this.pa=a.o(wd);this.F=b}K(ph,U);f(ph[z],function(){return"table_access_by_row_id("+this.F[k]()+")"});ph[z].da=G("F");ph[z].ja=function(a,b){return[fe(this.pa.get(b[0].bj()),[this.F.za()])]};
function qh(a,b){U[D](this,0,-1);this.pa=a.o(wd);this.N=a.o(xd);oa(this,b)}K(qh,U);f(qh[z],function(){var a="table_access("+this[t][k]();null===this[t].Ua()||(a+=" as "+this[t].Ua());return a+")"});qh[z].da=G("table");qh[z].ja=function(){var a=this.N.get(this[t].Kb()).Va();return[fe(this.pa.get(a),[this[t].za()])]};
function rh(a){this.m=a}K(rh,yg);rh[z].Ab=function(a,b){this.ha=a;Hf(a,function(a){return a instanceof qh})[n](function(a){var d=this.yi(a);if(0!=d[y]){var g=(new lh(this.m,a[t])).Gh(b,d.map(function(a){return b.Ad(a.Od)}));if(null!==g){var h=new N;d[n](function(a){h.set(a.Od,a)},this);this.ha=this.kk(g,h,a,b)}}},this);return this.ha};rh[z].yi=function(a){var b=[];for(a=a[Ga]();a;)a instanceof oh&&b[v](a),a=a[Ga]();return b};
rh[z].kk=function(a,b,c){a.Yi().map(function(a){return b.get(a)})[n](If);a=new nh(this.m,a.sb,a.Jf(),!1);var d=new ph(this.m,c[t]);d.ia(a);Mf(c,c,d,a);return a.Jb()};
function sh(a,b){U[D](this,0,-1);this.N=a.o(xd);this.F=b}K(sh,U);f(sh[z],function(){return"insert("+this.F[k]()+")"});sh[z].da=G("F");sh[z].ja=function(a,b,c){th(this.F,c[Oa],this.N);a.tb(this.F,c[Oa]);return[fe(c[Oa],[this.F[k]()])]};function th(a,b,c){a=a.kc().ye();if(null===a?0:a.h[0][Na]){var d=a.h[0].cb[k](),g=c.get(a.l()).max()[0]||0;b[n](function(a){if(0==a.w()[d]||null==a.w()[d])g++,a.w()[d]=g})}}function uh(a,b){U[D](this,0,-1);this.N=a.o(xd);this.F=b}K(uh,U);
f(uh[z],function(){return"insert_replace("+this.F[k]()+")"});uh[z].da=G("F");uh[z].ja=function(a,b,c){th(this.F,c[Oa],this.N);a.Fe(this.F,c[Oa]);return[fe(c[Oa],[this.F[k]()])]};
function vh(a){U[D](this,2,0);this.sg=a}K(vh,U);f(vh[z],function(){return"join("+this.sg[r]()+")"});vh[z].ja=function(a,b){return[this.sg.ci(b[0],b[1])]};
function wh(){U[D](this,1,1)}K(wh,U);f(wh[z],Db("limit(?)"));wh[z].$c=function(a){return this[r]()[Ja]("?",a.oa[r]())};wh[z].ja=function(a,b,c){b[0][C][E](c.oa);return b};
function xh(a){U[D](this,-1,1);this.J=a}K(xh,U);H=xh[z];f(H,function(){return"order_by("+ye(this.J)+")"});H.ja=function(a,b){if(1==b[y]){var c=this.ui(b[0]);(null===c?b[0]:b[0].jc(c))[C][xb](this.$h[q](this))}else b[xb](this.gk[q](this));return b};H.ui=function(a){for(var b=null,c=0;c<this.J[y];c++){var d=bg(this.J[c].K);if(a.nj(d)){b=d;break}}return b};
H.L=function(a,b){var c=null,d=null,g=null,h=-1;do h++,g=this.J[h].K,c=this.J[h].mb,d=a(g),g=b(g);while(d==g&&h+1<this.J[y]);d=d<g?-1:d>g?1:0;return 1==c?d:-d};H.gk=function(a,b){return this.L(function(b){return b instanceof T?a.jc(b):a[C][a[C][y]-1].M(b)},function(a){return a instanceof T?b.jc(a):b[C][b[C][y]-1].M(a)})};H.$h=function(a,b){return this.L(function(b){return a.M(b)},function(a){return b.M(a)})};
function yh(a,b){this.Ca=a;this.G=b}yh[z].Nf=function(){return this.G[wb](function(a){return a instanceof T},this)?this.lj():this.mj()};
yh[z].lj=function(){if(1==this.G[y]&&"DISTINCT"==this.G[0].$b){var a=this.Ca.jc(this.G[0])[C].map(function(a){var b=new ge(new $c(-1,{}),this.Ca.He());b.Xe(this.G[0],a.M(this.G[0][gb]));return b},this);return new $d(a,[])}var b=new ge(new $c(-1,{}),this.Ca.He());this.G[n](function(a){var d=a instanceof T?this.Ca.jc(a):this.Ca[C][0].M(a);b.Xe(a,d)},this);return new $d([b],this.Ca.W())};
yh[z].mj=function(){var a=e(this.Ca[C][y]),b=this.Ca.He();this.Ca[C][n](function(c,d){a[d]=new ge(new $c(c.ta.id(),{}),b);this.G[n](function(b){a[d].Xe(b,c.M(b))},this)},this);return new $d(a,this.Ca.W())};function zh(a,b){var c=a.map(function(a){return(new yh(a,b)).Nf()[C][0]});return new $d(c,a[0].W())};
function Ah(a,b){U[D](this,-1,1);this.h=a;this.Lb=b}K(Ah,U);H=Ah[z];f(H,function(){var a="project("+this.h[r]();if(null!==this.Lb)var b=this.Lb.map(function(a){return a.l()})[F](", "),a=a+(", groupBy("+b+")");return a+")"});H.ja=function(a,b){return 0==b[y]?[ce()]:1==b[y]?[this.ki(b[0])]:[this.ii(b)]};H.oj=function(){return this.h[wb](function(a){return a instanceof T})||null!==this.Lb};H.ii=function(a){return zh(a,this.h)};H.ki=function(a){return 0==this.h[y]?a:(new yh(a,this.h)).Nf()};
function Bh(){U[D](this,1,1)}K(Bh,U);f(Bh[z],Db("skip(?)"));Bh[z].$c=function(a){return this[r]()[Ja]("?",a.ma[r]())};Bh[z].ja=function(a,b,c){return[new $d(b[0][C][w](c.ma),b[0].W())]};
function Ch(){}K(Ch,yg);Ch[z].Ab=function(a){var b=Hf(a,function(a){return a instanceof wh||a instanceof Bh});if(0==b[y])return a;var c=this.xi(a);if(null===c)return a;b[n](function(a){this.Ij(a,c)},this);return c.Jb()};Ch[z].Ij=function(a,b){a instanceof wh?b.Zd=!0:b.$d=!0;return If(a).parent};Ch[z].xi=function(a){a=Hf(a,function(a){return a instanceof nh},function(a){return a instanceof Ah&&a.oj()||a instanceof xh||1!=a.ua()||a instanceof oh});return 0<a[y]?a[0]:null};
function Dh(a){this.m=a}K(Dh,yg);Dh[z].Ab=function(a){var b=Eh(a);if(null===b)return a;a=this.gh(b);a==b&&(a=this.fh(b));return a.Jb()};Dh[z].gh=function(a){var b=a,c=Fh(a.pb(0));if(null!==c){var d;d=a.J;for(var g=null,h=c[t].Ga(),l=0;l<h[y]&&null===g;l++)g=Gh(h[l],d);d=g;if(null===d)return b;b=new nh(this.m,d.sb,new jh(d.sb),d.Xf);d=new ph(this.m,c[t]);d.ia(b);If(a);b=Mf(c,c,d,b)}return b};
Dh[z].fh=function(a){var b=a,c=Hh(a.pb(0));if(null!==c){var d=Gh(c[Za],a.J);if(null===d)return b;c.Ue=d.Xf;b=If(a).parent}return b};function Hh(a){a=Hf(a,function(a){return a instanceof nh},function(a){return 1!=a.ua()});return 0<a[y]?a[0]:null}function Fh(a){a=Hf(a,function(a){return a instanceof qh},function(a){return 1!=a.ua()});return 0<a[y]?a[0]:null}function Eh(a){a=Hf(a,function(a){return a instanceof xh});return 0<a[y]?a[0]:null}
function Gh(a,b){if(a.h[y]!=b[y]||!b[yb](function(b,c){return b.K[k]()==a.h[c].cb[k]()}))return null;var c=Ih(b,a);return c[0]||c[1]?{sb:a,Xf:c[1]}:null}function Ih(a,b){var c=a[kb](function(a,b){return a<<1|(0==b.mb?0:1)},0),d=b.h[kb](function(a,b){return a<<1|(0==b.mb?0:1)},0),d=c^d,c=0==d,d=d==ea.pow(2,ea.max(a[y],b.h[y]))-1;return[c,d]};
function Jh(a,b,c){this.Da=a;this.ak=b;this.Ve=c}Jh[z].ic=function(){this.Ve[n](function(a){this.Da=a.Ab(this.Da,this.ak)},this);return this.Da};
function Kh(a,b){U[D](this,1,1);this.F=a;this.Jk=b}K(Kh,U);f(Kh[z],function(){return"update("+this.F[k]()+")"});Kh[z].da=G("F");Kh[z].ja=function(a,b){var c=b[0][C].map(function(a){var b=this.F.fc(a.ta.Ea());this.Jk[n](function(a){b.w()[a.K[k]()]=a[x]},this);return b},this);a[zb](this.F,c);return[ce()]};
function Lh(a){this.m=a}Lh[z].create=function(a,b){if(a instanceof lg||a instanceof kg)return this.oe(a,b);if(a instanceof rg||a instanceof vg||a instanceof wg)return this.oe(a,b,[new rh(this.m),new Dh(this.m),new Ch]);if(a instanceof mg||a instanceof ng)return this.oe(a,b,[new rh(this.m)]);throw new P("NotSupportedError","Unknown query plan node");};Lh[z].oe=function(a,b,c){a=Ff(a,J(this.Ej,this));return null!=c?new ze((new Jh(a,b,c)).ic()):new ze(a)};
Lh[z].Ej=function(a){if(a instanceof rg)return new Ah(a.h,a.Lb);if(a instanceof ug)return new hh(a.h);if(a instanceof tg)return new cg(a.h);if(a instanceof sg)return new xh(a.J);if(a instanceof wg)return new Bh;if(a instanceof vg)return new wh;if(a instanceof og)return new oh(a.Ba.ka());if(a instanceof qg)return new Bg;if(a instanceof xg)return new vh(a.Ba);if(a instanceof pg)return new qh(this.m,a[t]);if(a instanceof mg)return new gh(a[t]);if(a instanceof ng)return new Kh(a[t],a.ef);if(a instanceof
lg)return new uh(this.m,a[t]);if(a instanceof kg)return new sh(this.m,a[t]);throw new P("NotSupportedError","Unknown node type");};

function Mh(a){this.Cj=new fh;this.Vj=new Lh(a)}Mh[z].Xi=function(a){var b=this.Cj[Va](a);return this.Vj[Va](b,a)};
function Nh(){this.gg=new N}H=Nh[z];H.vd=function(a){var b=this.gg.get(a[k](),null);null===b&&(b=new Oh,this.gg.set(a[k](),b));return b};H.ij=function(a,b,c){b[n](function(b){this.vd(b).hj(a,c)},this)};H.vh=function(a,b,c){return b[yb](function(b){return this.vd(b).uh(a,c)},this)};H.wg=function(a,b,c){var d=this.vh(a,b,c);d&&this.ij(a,b,c);return d};H.Sd=function(a,b){b[n](function(b){this.vd(b).Sd(a)},this)};H.Hh=function(a){a[n](function(a){this.vd(a).ab=null},this)};
function Oh(){this.Xb=this.Pa=this.ab=this.Gc=null}Oh[z].Sd=function(a){this.Gc==a&&(this.Gc=null);this.ab==a&&(this.ab=null);null===this.Pa||this.Pa[m](a);null===this.Xb||this.Xb[m](a)};Oh[z].uh=function(a,b){var c=null===this.Pa||this.Pa.Ha();return 0==b?(null===this.Xb||this.Xb.Ha())&&c&&null===this.Gc&&null!==this.ab&&this.ab==a:3==b?null===this.Gc&&null===this.ab&&null!==this.Pa&&this.Pa[u](a):1==b?null===this.ab:c&&(null===this.ab||this.ab==a)};
Oh[z].hj=function(a,b){0==b?(this.ab=null,this.Gc=a):3==b?(null===this.Xb&&(this.Xb=new O),this.Xb.add(a),null===this.Pa&&(this.Pa=new O),this.Pa[m](a)):1==b?(null===this.Pa&&(this.Pa=new O),this.Pa.add(a)):2==b&&(this.ab=a)};
function Ph(){this.Tb=new Qh;this.Rc=new Nh}H=Ph[z];H.Vb=function(a){(2>a[pb]()||2>a[pb]())&&this.Rc.Hh(a.da().c());this.Tb.tb(a);this.ne();return a.Jc().ga};H.ne=function(){for(var a=this.Tb.c(),b=0;b<a[y];b++){var c=a[b],d=!1;if(d=0==c.$()?this.xg(c,1,3):this.xg(c,2,0))this.Tb[m](c),this.li(c)}};H.xg=function(a,b,c){var d=!1,g=a.da().c();this.Rc.wg(a.ka(),g,b)&&(d=this.Rc.wg(a.ka(),g,c));return d};H.li=function(a){a[Ia]()[A](J(this.Pj,this,a),J(this.Oj,this,a))};
H.Pj=function(a,b){this.Rc.Sd(a.ka(),a.da().c());a.Jc()[vb](b);this.ne()};H.Oj=function(a,b){this.Rc.Sd(a.ka(),a.da().c());a.Jc()[jb](b);this.ne()};function Qh(){this.Tb=[]}Qh[z].tb=function(a){pc(this.Tb,a,function(a,c){var d=a[pb]()-c[pb]();return 0==d?a.ka()-c.ka():d})};Qh[z].c=function(){return this.Tb[w]()};ja(Qh[z],function(a){var b=this.Tb;a=bc(b,a);var c;(c=0<=a)&&hc(b,a);return c});
function Rh(a,b){this.bi=ke.ve();this.Vc=a;this.Kd=b;this.G=this.Vh()}Rh[z].Vh=function(){if(0<this.Vc.h[y])return this.Vc.h;var a=[],b=this.Vc.f[w]();null!=this.Vc.Ee&&b[v](this.Vc.Ee);b[n](function(b){b.yb()[n](function(b){a[v](b)})});return a};Rh[z].L=function(a,b){return this.G[yb](function(c){return this.bi.ue(c.$(),"eq")(a.M(c),b.M(c))},this)};
Rh[z].eh=function(a,b){for(var c=null===a?[]:a[C],d=id(c,b[C],J(this.L,this),function(a){return c[a]}),g=[],h=0,l=0;l<c[y];l++){var p=c[l];d[h]==p?h++:(p=this.Kd[E](h,1),p=Sh(l,p,0,this.Kd),g[v](p))}d=id(c,b[C],J(this.L,this),function(a,c){return b[C][c]});for(l=h=0;l<b[C][y];l++)p=b[C][l],d[h]==p?h++:(this.Kd[E](l,0,p.ta.w()),p=Sh(l,[],1,this.Kd),g[v](p));return g};function Sh(a,b,c,d){return{Kk:c,index:a,object:d,Mk:b,type:"splice"}};
function Th(){this.hc=new N}H=Th[z];H.ze=function(a){return Ob(a)[r]()};H.be=function(a,b){var c=this.ze(a.zd()),d=this.hc.get(c,null);null===d&&(d=new Uh(a),this.hc.set(c,d));d.be(b)};H.Te=function(a,b){var c=this.ze(a.zd()),d=this.hc.get(c,null);L(null!=d,"Attempted to unobserve a query that was not observed.");var g=d.Te(b);L(g,"removeObserver: Inconsistent state detected.");d.qj()||this.hc[m](c)};
H.Be=function(a){var b=new O;a[n](function(a){b.add(a[k]())});var c=[];this.hc.c()[n](function(a){a=a.Lc();a[Da].f[wb](function(a){return b[u](a[k]())})&&c[v](a)});return c};H.Qg=function(a,b){var c=this.ze(null!=a.Ac?a.Ac:a),c=this.hc.get(c,null);return null!==c?(c.Ik(b),!0):!1};function Uh(a){this.ph=a;this.Uc=new O;this.Mj=[];this.cg=null;this.Yh=new Rh(a.zd(),this.Mj)}H=Uh[z];H.be=function(a){this.Uc[u](a)?Yb("Attempted to register observer twice."):this.Uc.add(a)};H.Te=function(a){return this.Uc[m](a)};
H.Lc=function(){return this.ph.Vi()};H.qj=function(){return 0<this.Uc.na()};H.Ik=function(a){var b=this.Yh.eh(this.cg,a);this.cg=a;0<b[y]&&this.Uc.c()[n](function(a){a(b)})};
function Vh(a,b){var c=a.o(Bd),d=b||{},g=d.storeType||0,h=new af;a.nb(wd,h);var h=null,l=!1;switch(g){case 1:h=new Qe(c);break;case 5:h=new Re(c);break;case 4:h=new Ve(a,c,d.webSqlDbSize);break;case 3:h=new Ke(c,d.firebase);l=!0;break;default:h=new Oe(a,c)}a.nb(vd,h);var p=new Bf;a.nb(xd,p);return h.Aa(d.onUpgrade)[A](function(){a.nb(yd,new Mh(a));var b=new Ph;a.nb(zd,b);b=new Th;a.nb(Ad,b);return p.Aa(c)})[A](function(){l&&(new Fe(a)).xk();return(new Af(a)).Aa(c)})};

function Wh(a,b){this.m=a;this.wb=a.o(vd);this.Ra=a.o(zd);this.zb=a.o(Ad);this.Sa=new O(b);this.Ya=new Qd(this.m,this.Sa.c());this.Ub=Uc();this.Hc=Uc();this.ff=Uc()}H=Wh[z];ha(H,function(){this.ff[vb]();return this.Hc.ga});H.$=Db(1);H.da=G("Sa");H.Jc=G("Ub");H.ka=function(){return Ob(this)};wa(H,Db(2));H.Ug=function(){this.Ra.Vb(this);return this.ff.ga};
H.mh=function(a){a=a.Lc();return a.Re.Jb()[Ia](this.Ya,a[Da])[A](function(a){return a[0].we()},J(function(a){this.Ya.Bb();var c=new Lc(a[rb]);this.Hc[jb](c);throw a;},this))};H.U=function(){this.wb.Hb(this.$(),this.Ya).U()[A](J(function(){this.Yc();this.Hc[vb]()},this),J(function(a){this.Ya.Bb();this.Hc[jb](a)},this));return this.Ub.ga};H.Bb=function(){this.Ya.Bb();this.Hc[vb]();return this.Ub.ga};H.Yc=function(){var a=this.zb.Be(this.Sa.c());0!=a[y]&&(a=new De(this.m,a),this.Ra.Vb(a))};
function Xh(a){this.m=a;this.Ra=a.o(zd);this.ad=null;this.Fa=0}I("lf.proc.Transaction",Xh,void 0);var Yh=new N(0,new O([1,4]),1,new O([2]),2,new O([3,5,6]),3,new O([2,7]),4,new O([7]),5,new O([7]),6,new O([7]));Xh[z].Ka=function(a){var b=Yh.get(this.Fa,null);if(null===b||!b[u](a))throw new P("TransactionError","Invalid transaction state transition, from "+this.Fa+" to "+a+".");this.Fa=a};
ha(Xh[z],function(a){this.Ka(4);var b=[];try{a[n](function(a){a.jb();b[v](a.Lc())},this)}catch(c){return this.Ka(7),Qc(c)}a=new Cg(this.m,b);return this.Ra.Vb(a)[A](J(function(a){this.Ka(7);return a.map(function(a){return a.we()})},this),J(function(a){this.Ka(7);throw a;},this))});ha(Xh[z],Xh[z][Ia]);Xh[z].nh=function(a){this.Ka(1);this.ad=new Wh(this.m,a);return this.ad.Ug()[A](J(function(){this.Ka(2)},this))};Xh[z].begin=Xh[z].nh;
Xh[z].lh=function(a){this.Ka(3);return this.ad.mh(a)[A](J(function(a){this.Ka(2);return a},this),J(function(a){this.Ka(7);throw a;},this))};Xh[z].attach=Xh[z].lh;Xh[z].U=function(){this.Ka(5);return this.ad.U()[A](J(function(){this.Ka(7)},this))};Xh[z].commit=Xh[z].U;Xh[z].Bb=function(){this.Ka(6);return this.ad.Bb()[A](J(function(){this.Ka(7)},this))};Xh[z].rollback=Xh[z].Bb;
function X(a){this.m=a;this.A=a.o(Bd);this.De=!1}I("lf.proc.Database",X,void 0);X[z].Aa=function(a){this.m.nb(Bd,this.A);return Vh(this.m,a)[A](J(function(){this.De=!0;return this},this))};X[z].init=X[z].Aa;X[z].rb=G("A");X[z].getSchema=X[z].rb;X[z].dc=function(){if(!this.De)throw new P("UninitializedError","Database is not initialized");};X[z].select=function(a){this.dc();return new W(this.m,1!=arguments[y]||null!=arguments[0]?e[z][w][D](arguments):[])};X[z].select=X[z].select;
X[z].tb=function(){this.dc();return new Sg(this.m)};X[z].insert=X[z].tb;X[z].Fe=function(){this.dc();return new Sg(this.m,!0)};X[z].insertOrReplace=X[z].Fe;Ca(X[z],function(a){this.dc();return new Wg(this.m,a)});Ca(X[z],X[z][zb]);xa(X[z],function(){this.dc();return new Rg(this.m)});X[z]["delete"]=X[z][qb];X[z].observe=function(a,b){this.m.o(Ad).be(a,b)};X[z].observe=X[z].observe;X[z].unobserve=function(a,b){this.m.o(Ad).Te(a,b)};X[z].unobserve=X[z].unobserve;X[z].Th=function(){this.dc();return new Xh(this.m)};
X[z].createTransaction=X[z].Th;ra(X[z],function(){try{this.m.o(vd)[cb]()}catch(a){}this.m[Pa]();this.De=!1});ra(X[z],X[z][cb]);
function Y(a,b,c,d,g,h){this.F=a;this.B=b;this.Zf=c;this.Wf=d;this.Pg=g;this.ib=h||null;this.i=this.C=null}I("lf.schema.BaseColumn",Y,void 0);H=Y[z];ia(H,G("B"));H.l=function(){return this.F.za()+"."+this.B};f(H,function(){return this.l()});H.Z=G("F");H.$=G("Pg");H.Ua=G("ib");H.Ga=function(){null==this.qa&&(this.qa=[],this.Z().Ga()[n](function(a){-1!=a.h.map(function(a){return a.cb[k]()})[ob](this.B)&&this.qa[v](a)},this));return this.qa};H.nc=G("Wf");H.Oc=G("Zf");H.Ze=Cb("C");H.getParent=G("C");
H.Y=G("i");H.Na=function(a){return Xf(this,a,"eq")};Y[z].eq=Y[z].Na;Y[z].hg=function(a){return Xf(this,a,"neq")};Y[z].neq=Y[z].hg;Y[z].Le=function(a){return Xf(this,a,"lt")};Y[z].lt=Y[z].Le;Y[z].Dj=function(a){return Xf(this,a,"lte")};Y[z].lte=Y[z].Dj;Y[z].jj=function(a){return Xf(this,a,"gt")};Y[z].gt=Y[z].jj;Y[z].kj=function(a){return Xf(this,a,"gte")};Y[z].gte=Y[z].kj;Y[z].match=function(a){return Xf(this,a,"match")};Y[z].match=Y[z].match;Y[z].oh=function(a,b){return Xf(this,[a,b],"between")};
Y[z].between=Y[z].oh;Y[z].rj=function(a){return Xf(this,a,"in")};Y[z]["in"]=Y[z].rj;Y[z].xj=function(){return this.Na(null)};Y[z].isNull=Y[z].xj;Y[z].wj=function(){return this.hg(null)};Y[z].isNotNull=Y[z].wj;Y[z].xc=function(a){return new Y(this.F,this.B,this.Zf,this.Wf,this.Pg,a)};Y[z].as=Y[z].xc;
function Zh(){this.Vd=new N}var $h;ma(Zh[z],function(){this.Vd[Pa]()});ma(Zh[z],Zh[z][Pa]);Zh[z].nb=function(a,b){this.Vd.set(a[r](),b);return b};Zh[z].registerService=Zh[z].nb;Zh[z].o=function(a){var b=this.Vd.get(a[r](),null);if(null==b)throw new P("NotFoundError",a[r]());return b};Zh[z].getService=Zh[z].o;Zh[z].Je=function(a){return this.Vd.s(a[r]())};Zh[z].isRegistered=Zh[z].Je;
function ai(a,b){this.Yj=a;this.Kj=b}ai[z].ye=G("Yj");ai[z].Ui=G("Kj");
function Z(a){this.B=a;this.G=new N;this.cf=new O;this.sc=new O;this.Jd=new O;var b=this.B;this.pc="pk"+(b[0].toUpperCase()+b.substring(1));this.qa=new N;this.Nd=!1;this.ec(a);this.Cf=[]}I("lf.schema.TableBuilder",Z,void 0);function bi(a,b){var c=a.ref[ab](".");if(2!=c[y])throw new P("SyntaxError","Foreign key {"+b+"} does not have a valid form 'table.column'");this.fg=a.local;this.Uj=c[0];this.Tj=c[1];this.qd=b;this.action=a.action;this.timing=a.timing}
function ci(a){za(this,a[rb]);this.mb=a.order;this.autoIncrement=a[Na]}var di=new O([0,6]);Z[z].ec=function(a){if(!/^[A-Za-z_][A-Za-z0-9_]*$/.test(a))throw new P("SyntaxError",a+" violates naming rule");if(this.G.s(a)||this.qa.s(a)||this.sc[u](a))throw new P("SyntaxError",this.B+"."+a+" is already defined");};
Z[z].Ch=function(a){var b=!1;a[n](function(a){var d=this.G.get(a[rb]);b=b||a[Na];if(a[Na]&&3!=d)throw new P("SyntaxError","Can not use autoIncrement with a non-integer primary key.");},this);if(b&&1<a[y])throw new P("SyntaxError","Can not use autoIncrement with a cross-column primary key.");};Z[z].Wg=function(a,b){this.ec(a);this.G.set(a,b);di[u](b)&&this.jf([a]);return this};Z[z].addColumn=Z[z].Wg;
Z[z].Zg=function(a,b){this.ec(this.pc);var c=this.Id(a,!0,void 0,b);this.Ch(c);1==c[y]&&this.cf.add(c[0][rb]);this.sc.add(this.pc);this.qa.set(this.pc,c);return this};Z[z].addPrimaryKey=Z[z].Zg;
Z[z].Xg=function(a,b){this.ec(a);var c=new bi(b,a);Fb(c.action)||(c.action=0);Fb(c.timing)||(c.timing=0);if(1==c.action&&1==c.timing)throw new P("SyntaxError","Lovefield allows only immediate evaluation of cascading constraints");if(!this.G.s(c.fg))throw new P("SyntaxError","Enter a valid column name for theforeign key in local table");this.Cf[v](c);return this};Z[z].addForeignKey=Z[z].Xg;
Z[z].$g=function(a,b){this.ec(a);var c=this.Id(b,!0);1==c[y]&&this.cf.add(c[0][rb]);this.qa.set(a,c);this.sc.add(a);return this};Z[z].addUnique=Z[z].$g;Z[z].jf=function(a){a=this.Id(a,!1);this.Bh(a);a[n](function(a){this.Jd.add(a[rb])},this);return this};Z[z].addNullable=Z[z].jf;
Z[z].Bh=function(a){this.qa.H()[n](function(b){var c=new O;this.qa.get(b)[n](function(a){c.add(a[rb])});var d=a[Ea](function(a){return c[u](a[rb])});if(1<c.na()&&0<d[y])throw new P("SyntaxError","Cross-column index "+b+" refers to nullable columns: "+d[F](","));},this)};Z[z].Yg=function(a,b,c,d){this.ec(a);b=this.Id(b,!0,d);this.Ah(a,b);c&&this.sc.add(a);this.qa.set(a,b);return this};Z[z].addIndex=Z[z].Yg;
Z[z].Ah=function(a,b){if(1<b[y]){var c=b[Ea](function(a){return this.Jd[u](a[rb])},this);if(0<c[y])throw new P("SyntaxError","Cross-column index "+a+" refers to nullable columns: "+c[F](","));}};Z[z].Sb=Cb("Nd");Z[z].persistentIndex=Z[z].Sb;Z[z].rb=function(){return new (this.Mi())};Z[z].getSchema=Z[z].rb;Z[z].Hf=G("Cf");Z[z].getFkSpecs=Z[z].Hf;
Z[z].Id=function(a,b,c,d){var g=a,g="string"==typeof a[0]?a.map(function(a){return new ci({name:a,order:c||1,autoIncrement:d||!1})}):a.map(function(a){return new ci(a)});g[n](function(a){if(!this.G.s(a[rb]))throw new P("SyntaxError",this.B+" does not have column: "+a[rb]);if(b){var c=this.G.get(a[rb]);if(0==c||6==c)throw new P("SyntaxError",this.B+" index on non-indexable column: "+a[rb]);}},this);return g};
Z[z].Mi=function(){function a(){function a(c){return b.qa.get(c).map(function(a){return{cb:this[a[rb]],mb:a.mb,autoIncrement:a[Na]}},this)}var d=b.G.H().map(function(a){this[a]=new Y(this,a,b.cf[u](a),b.Jd[u](a),b.G.get(a));return this[a]},this),g=b.qa.H().map(function(d){return new Zf(b.B,d,b.sc[u](d),a[D](this,d))},this);$f[D](this,b.B,d,g,b.Nd);var h=b.qa.s(b.pc)?new Zf(b.B,b.pc,!0,a[D](this,b.pc)):null,l=d[Ea](function(a){return!b.Jd[u](a[k]())}),p=b.sc.c().map(function(d){return new Zf(b.B,d,
!0,a[D](this,d))},this);this.Lh=new ai(h,l,[],p);this.Ag=b.Ii(d,g)}var b=this;K(a,$f);a[z].xb=function(a){return new this.Ag(ad++,a)};a[z].createRow=a[z].xb;a[z].fc=function(a){var b={};this.yb()[n](function(g){var h=g[k]();g=g.$();var l=a[x][h];if(0==g)if(null===l)g=l;else if(g=l,""==g)g=null;else{0!=g[y]%2&&(g="0"+g);for(var l=new ArrayBuffer(g[y]/2),p=new Uint8Array(l),B=0,Ra=0;B<g[y];B+=2)p[Ra++]=ga(g.substr(B,2),16);g=l}else g=2==g?null===l?l:new Date(l):l;b[h]=g},this);return new this.Ag(a.id,
b)};a[z].deserializeRow=a[z].fc;a[z].kc=G("Lh");a[z].getConstraint=a[z].kc;return a};
Z[z].Ii=function(a,b){function c(c,d){this.G=a;this.qa=b;$c[D](this,c,d)}K(c,$c);c[z].yf=function(){var a={};this.G[n](function(b){a[b[k]()]=b.nc()?null:Vd[b.$()]});return a};c[z].Mg=function(){var a={};this.G[n](function(b){var c=b[k]();b=b.$();var d=this.w()[c];a[c]=0==b?null===d?d:dd(d):2==b?null===d?d:d[Qa]():d},this);return a};var d=J(function(a){var b=this.G.get(a[k]());return 2==b?function(b){b=b[a[k]()];return a.nc()&&null===b?null:b[Qa]()}:1==b?function(b){return a.nc()?(b=b[a[k]()],null===
b?null:b?1:0):b[a[k]()]?1:0}:function(b){return b[a[k]()]}},this),g=J(function(a){var b=a.map(function(a){return d(a.cb)});return function(a){return b.map(function(b){return b(a)})}},this),h={};b[n](function(a){var b=a.l();a=1==a.h[y]?d(a.h[0].cb):g(a.h);h[b]=a});c[z].Qc=function(a){return-1!=a[ob]("#")?this.id():h[bb](a)?h[a](this.w()):null};return c};
function ei(a,b){this.A=new fi(a,b);this.Db=new N;this.Ic=!1}I("lf.schema.Builder",ei,void 0);
ei[z].yh=function(a){var b=a.Hf();0!=b[y]&&b[n](function(b){var d=b.Uj;if(!this.Db.s(d))throw new P("SyntaxError","Foreign Key {"+b.qd+"} refers to invalid table");var d=this.Db.get(d).rb(),g=b.Tj;if(!d[bb](g))throw new P("SyntaxError","Foreign Key {"+b.qd+"} refers to invalid column ");if(a.rb()[b.fg].$()!=d[g].$())throw new P("SyntaxError","Foreign Key {"+b.qd+"} refers to a column of different type");if(!d[g].Oc())throw new P("SyntaxError","Foreign Key {"+b.qd+"} refers to a non-unique column");
},this)};ei[z].ti=function(){this.Ic||(this.Db.H()[n](function(a){a=this.Db.get(a);this.yh(a);this.A.rk(a.rb())},this),this.Db[Pa](),this.Ic=!0)};ei[z].rb=function(){this.Ic||this.ti();return this.A};ei[z].getSchema=ei[z].rb;ei[z].If=function(){var a=new ud("ns_"+this.A[rb]()),b;$h||($h=new Zh);b=$h;var c=null;b.Je(a)?c=b.o(a):(c=new Zh,b.nb(a,c));return c};ei[z].getGlobal=ei[z].If;ei[z].connect=function(a){var b=this.If();b.Je(Bd)||b.nb(Bd,this.rb());return(new X(b)).Aa(a)};ei[z].connect=ei[z].connect;
ei[z].Rh=function(a){if(this.Db.s(a)||this.Ic)throw new P("SyntaxError","Table is already created or schema is already finalized.");this.Db.set(a,new Z(a));return this.Db.get(a)};ei[z].createTable=ei[z].Rh;ei[z].$e=function(a){if(this.Ic)throw new P("SyntaxError","Schema is already finalized.");this.A.$e(a);return this};ei[z].setPragma=ei[z].$e;function fi(a,b){this.B=a;this.Ma=b;this.I=new N;this.rg={Zh:!1}}I("lf.schema.DatabaseSchema",fi,void 0);za(fi[z],G("B"));za(fi[z],fi[z][rb]);
fi[z].version=G("Ma");fi[z].version=fi[z][Fa];fi[z].gb=function(){return this.I.c()};fi[z].tables=fi[z].gb;oa(fi[z],function(a){if(!this.I.s(a))throw new P("NotFoundError",a+" is not found in database");return this.I.get(a)});oa(fi[z],fi[z][t]);fi[z].rk=function(a){this.I.set(a[k](),a)};fi[z].qg=G("rg");fi[z].pragma=fi[z].qg;fi[z].$e=Cb("rg");I("lf.schema.create",function(a,b){return new ei(a,b)},void 0);}.bind(window))()
