var window = this;
(function(){'use strict';function aa(){return function(){}}function ba(a){return function(b){this[a]=b}}function f(a){return function(){return this[a]}}function l(a){return function(){return a}}var m,p=this;function q(a){return void 0!==a}function ca(){}
function da(a){var b=typeof a;if("object"==b)if(a){if(a instanceof Array)return"array";if(a instanceof Object)return b;var c=Object.prototype.toString.call(a);if("[object Window]"==c)return"object";if("[object Array]"==c||"number"==typeof a.length&&"undefined"!=typeof a.splice&&"undefined"!=typeof a.propertyIsEnumerable&&!a.propertyIsEnumerable("splice"))return"array";if("[object Function]"==c||"undefined"!=typeof a.call&&"undefined"!=typeof a.propertyIsEnumerable&&!a.propertyIsEnumerable("call"))return"function"}else return"null";
else if("function"==b&&"undefined"==typeof a.call)return"object";return b}function ea(a){return null===a}function fa(a){return null!=a}function ha(a){var b=da(a);return"array"==b||"object"==b&&"number"==typeof a.length}function ia(a){return"string"==typeof a}function ja(a){return"function"==da(a)}function ka(a){return a[la]||(a[la]=++ma)}var la="closure_uid_"+(1E9*Math.random()>>>0),ma=0;function oa(a,b,c){return a.call.apply(a.bind,arguments)}
function pa(a,b,c){if(!a)throw Error();if(2<arguments.length){var d=Array.prototype.slice.call(arguments,2);return function(){var c=Array.prototype.slice.call(arguments);Array.prototype.unshift.apply(c,d);return a.apply(b,c)}}return function(){return a.apply(b,arguments)}}function qa(a,b,c){qa=Function.prototype.bind&&-1!=Function.prototype.bind.toString().indexOf("native code")?oa:pa;return qa.apply(null,arguments)}
function ra(a,b){var c=Array.prototype.slice.call(arguments,1);return function(){var b=c.slice();b.push.apply(b,arguments);return a.apply(this,b)}}function r(a,b){var c=a.split("."),d=p;c[0]in d||!d.execScript||d.execScript("var "+c[0]);for(var e;c.length&&(e=c.shift());)!c.length&&q(b)?d[e]=b:d=d[e]?d[e]:d[e]={}}
function t(a,b){function c(){}c.prototype=b.prototype;a.Hb=b.prototype;a.prototype=new c;a.prototype.constructor=a;a.vg=function(a,c,g){for(var h=Array(arguments.length-2),k=2;k<arguments.length;k++)h[k-2]=arguments[k];return b.prototype[c].apply(a,h)}};function sa(a){if(Error.captureStackTrace)Error.captureStackTrace(this,sa);else{var b=Error().stack;b&&(this.stack=b)}a&&(this.message=String(a))}t(sa,Error);sa.prototype.name="CustomError";function ta(a,b,c){this.Wf=c;this.Bf=a;this.mg=b;this.pd=0;this.kd=null}ta.prototype.get=function(){var a;0<this.pd?(this.pd--,a=this.kd,this.kd=a.next,a.next=null):a=this.Bf();return a};ta.prototype.put=function(a){this.mg(a);this.pd<this.Wf&&(this.pd++,a.next=this.kd,this.kd=a)};var ua=Array.prototype,va=ua.indexOf?function(a,b,c){return ua.indexOf.call(a,b,c)}:function(a,b,c){c=null==c?0:0>c?Math.max(0,a.length+c):c;if(ia(a))return ia(b)&&1==b.length?a.indexOf(b,c):-1;for(;c<a.length;c++)if(c in a&&a[c]===b)return c;return-1},wa=ua.forEach?function(a,b,c){ua.forEach.call(a,b,c)}:function(a,b,c){for(var d=a.length,e=ia(a)?a.split(""):a,g=0;g<d;g++)g in e&&b.call(c,e[g],g,a)},xa=ua.map?function(a,b,c){return ua.map.call(a,b,c)}:function(a,b,c){for(var d=a.length,e=Array(d),
g=ia(a)?a.split(""):a,h=0;h<d;h++)h in g&&(e[h]=b.call(c,g[h],h,a));return e},ya=ua.reduce?function(a,b,c,d){d&&(b=qa(b,d));return ua.reduce.call(a,b,c)}:function(a,b,c,d){var e=c;wa(a,function(c,h){e=b.call(d,e,c,h,a)});return e},za=ua.some?function(a,b,c){return ua.some.call(a,b,c)}:function(a,b,c){for(var d=a.length,e=ia(a)?a.split(""):a,g=0;g<d;g++)if(g in e&&b.call(c,e[g],g,a))return!0;return!1};function Aa(a,b,c){return 2>=arguments.length?ua.slice.call(a,b):ua.slice.call(a,b,c)}
function Ba(a){for(var b=[],c=0;c<a;c++)b[c]=0;return b}function Ca(a){for(var b=[],c=0;c<arguments.length;c++){var d=arguments[c];if("array"==da(d))for(var e=0;e<d.length;e+=8192)for(var g=Ca.apply(null,Aa(d,e,e+8192)),h=0;h<g.length;h++)b.push(g[h]);else b.push(d)}return b};function Da(a){var b=[],c=0,d;for(d in a)b[c++]=a[d];return b};var Ea;a:{var Fa=p.navigator;if(Fa){var Ga=Fa.userAgent;if(Ga){Ea=Ga;break a}}Ea=""}function u(a){return-1!=Ea.indexOf(a)};function Ha(){return u("Opera")||u("OPR")}function Ia(){return(u("Chrome")||u("CriOS"))&&!Ha()&&!u("Edge")};function Ja(a){p.setTimeout(function(){throw a;},0)}var Ka;
function La(){var a=p.MessageChannel;"undefined"===typeof a&&"undefined"!==typeof window&&window.postMessage&&window.addEventListener&&!u("Presto")&&(a=function(){var a=document.createElement("IFRAME");a.style.display="none";a.src="";document.documentElement.appendChild(a);var b=a.contentWindow,a=b.document;a.open();a.write("");a.close();var c="callImmediate"+Math.random(),d="file:"==b.location.protocol?"*":b.location.protocol+"//"+b.location.host,a=qa(function(a){if(("*"==d||a.origin==d)&&a.data==
c)this.port1.onmessage()},this);b.addEventListener("message",a,!1);this.port1={};this.port2={postMessage:function(){b.postMessage(c,d)}}});if("undefined"!==typeof a&&!u("Trident")&&!u("MSIE")){var b=new a,c={},d=c;b.port1.onmessage=function(){if(q(c.next)){c=c.next;var a=c.ue;c.ue=null;a()}};return function(a){d.next={ue:a};d=d.next;b.port2.postMessage(0)}}return"undefined"!==typeof document&&"onreadystatechange"in document.createElement("SCRIPT")?function(a){var b=document.createElement("SCRIPT");
b.onreadystatechange=function(){b.onreadystatechange=null;b.parentNode.removeChild(b);b=null;a();a=null};document.documentElement.appendChild(b)}:function(a){p.setTimeout(a,0)}};function Ma(){this.zd=this.kc=null}var Oa=new ta(function(){return new Na},function(a){a.reset()},100);Ma.prototype.add=function(a,b){var c=Oa.get();c.set(a,b);this.zd?this.zd.next=c:this.kc=c;this.zd=c};Ma.prototype.remove=function(){var a=null;this.kc&&(a=this.kc,this.kc=this.kc.next,this.kc||(this.zd=null),a.next=null);return a};function Na(){this.next=this.scope=this.Md=null}Na.prototype.set=function(a,b){this.Md=a;this.scope=b;this.next=null};
Na.prototype.reset=function(){this.next=this.scope=this.Md=null};function Pa(a,b){Qa||Ra();Sa||(Qa(),Sa=!0);Ta.add(a,b)}var Qa;function Ra(){if(p.Promise&&p.Promise.resolve){var a=p.Promise.resolve(void 0);Qa=function(){a.then(Ua)}}else Qa=function(){var a=Ua;!ja(p.setImmediate)||p.Window&&p.Window.prototype&&p.Window.prototype.setImmediate==p.setImmediate?(Ka||(Ka=La()),Ka(a)):p.setImmediate(a)}}var Sa=!1,Ta=new Ma;function Ua(){for(var a=null;a=Ta.remove();){try{a.Md.call(a.scope)}catch(b){Ja(b)}Oa.put(a)}Sa=!1};function v(a,b){this.Ta=0;this.af=void 0;this.Zc=this.bc=this.C=null;this.jd=this.Ld=!1;if(a!=ca)try{var c=this;a.call(b,function(a){Va(c,2,a)},function(a){Va(c,3,a)})}catch(d){Va(this,3,d)}}function Wa(){this.next=this.context=this.gc=this.Kc=this.child=null;this.Cd=!1}Wa.prototype.reset=function(){this.context=this.gc=this.Kc=this.child=null;this.Cd=!1};var Ya=new ta(function(){return new Wa},function(a){a.reset()},100);function Za(a,b,c){var d=Ya.get();d.Kc=a;d.gc=b;d.context=c;return d}
function w(a){if(a instanceof v)return a;var b=new v(ca);Va(b,2,a);return b}function $a(a){return new v(function(b,c){c(a)})}function ab(a,b,c){bb(a,b,c,null)||Pa(ra(b,a))}function cb(a){return new v(function(b,c){var d=a.length,e=[];if(d)for(var g=function(a,c){d--;e[a]=c;0==d&&b(e)},h=function(a){c(a)},k=0,n;k<a.length;k++)n=a[k],ab(n,ra(g,k),h);else b(e)})}function x(){var a,b,c=new v(function(c,e){a=c;b=e});return new db(c,a,b)}
v.prototype.then=function(a,b,c){return eb(this,ja(a)?a:null,ja(b)?b:null,c)};v.prototype.then=v.prototype.then;v.prototype.$goog_Thenable=!0;function fb(a,b,c){eb(a,null,b,c)}function gb(a,b){a.bc||2!=a.Ta&&3!=a.Ta||hb(a);a.Zc?a.Zc.next=b:a.bc=b;a.Zc=b}
function eb(a,b,c,d){var e=Za(null,null,null);e.child=new v(function(a,h){e.Kc=b?function(c){try{var e=b.call(d,c);a(e)}catch(z){h(z)}}:a;e.gc=c?function(b){try{var e=c.call(d,b);!q(e)&&b instanceof ib?h(b):a(e)}catch(z){h(z)}}:h});e.child.C=a;gb(a,e);return e.child}v.prototype.rg=function(a){this.Ta=0;Va(this,2,a)};v.prototype.sg=function(a){this.Ta=0;Va(this,3,a)};
function Va(a,b,c){0==a.Ta&&(a==c&&(b=3,c=new TypeError("Promise cannot resolve to itself")),a.Ta=1,bb(c,a.rg,a.sg,a)||(a.af=c,a.Ta=b,a.C=null,hb(a),3!=b||c instanceof ib||jb(a,c)))}function bb(a,b,c,d){if(a instanceof v)return gb(a,Za(b||ca,c||null,d)),!0;var e;if(a)try{e=!!a.$goog_Thenable}catch(g){e=!1}else e=!1;if(e)return a.then(b,c,d),!0;e=typeof a;if("object"==e&&null!=a||"function"==e)try{var h=a.then;if(ja(h))return kb(a,h,b,c,d),!0}catch(k){return c.call(d,k),!0}return!1}
function kb(a,b,c,d,e){function g(a){k||(k=!0,d.call(e,a))}function h(a){k||(k=!0,c.call(e,a))}var k=!1;try{b.call(a,h,g)}catch(n){g(n)}}function hb(a){a.Ld||(a.Ld=!0,Pa(a.Gf,a))}function lb(a){var b=null;a.bc&&(b=a.bc,a.bc=b.next,b.next=null);a.bc||(a.Zc=null);return b}
v.prototype.Gf=function(){for(var a=null;a=lb(this);){var b=this.Ta,c=this.af;if(3==b&&a.gc&&!a.Cd)for(var d=void 0,d=this;d&&d.jd;d=d.C)d.jd=!1;if(a.child)a.child.C=null,mb(a,b,c);else try{a.Cd?a.Kc.call(a.context):mb(a,b,c)}catch(e){nb.call(null,e)}Ya.put(a)}this.Ld=!1};function mb(a,b,c){2==b?a.Kc.call(a.context,c):a.gc&&a.gc.call(a.context,c)}function jb(a,b){a.jd=!0;Pa(function(){a.jd&&nb.call(null,b)})}var nb=Ja;function ib(a){sa.call(this,a)}t(ib,sa);ib.prototype.name="cancel";
function db(a,b,c){this.ga=a;this.resolve=b;this.reject=c};/*

 Copyright 2014 The Lovefield Project Authors. All Rights Reserved.

 Licensed under the Apache License, Version 2.0 (the "License");
 you may not use this file except in compliance with the License.
 You may obtain a copy of the License at

     http://www.apache.org/licenses/LICENSE-2.0

 Unless required by applicable law or agreed to in writing, software
 distributed under the License is distributed on an "AS IS" BASIS,
 WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 See the License for the specific language governing permissions and
 limitations under the License.
*/
function y(a,b){this.oa=a;this.s=b||this.ze()}var ob=0;m=y.prototype;m.id=f("oa");function pb(a){return a.s}m.ze=function(){return{}};m.jf=f("s");m.Ia=function(){return{id:this.oa,value:this.jf()}};m.Eb=function(a){return"#"==a.substr(-1)?this.oa:null};function qb(a){return new y(a.id,a.value)}function rb(a){return new y(ob++,a||{})}function sb(a){if(null==a)return null;a=new Uint8Array(a);for(var b="",c=0;c<a.length;++c)var d=a[c].toString(16),b=b+(2>d.length?"0"+d:d);return b};function tb(a){this.type=a}function ub(a){y.call(this,-1,a)}t(ub,y);function vb(a,b,c,d){c=c||function(a,b){return a==b};d=d||function(b){return a[b]};for(var e=a.length,g=b.length,h=[],k=0;k<e+1;k++)h[k]=[],h[k][0]=0;for(var n=0;n<g+1;n++)h[0][n]=0;for(k=1;k<=e;k++)for(n=1;n<=g;n++)c(a[k-1],b[n-1])?h[k][n]=h[k-1][n-1]+1:h[k][n]=Math.max(h[k-1][n],h[k][n-1]);for(var z=[],k=e,n=g;0<k&&0<n;)c(a[k-1],b[n-1])?(z.unshift(d(k-1,n-1)),k--,n--):h[k-1][n]>h[k][n-1]?k--:n--;return z}function wb(a){return ya(arguments,function(a,c){return a+c},0)}
function xb(a){return wb.apply(null,arguments)/arguments.length}function yb(a){var b=arguments.length;if(2>b)return 0;var c=xb.apply(null,arguments);return wb.apply(null,xa(arguments,function(a){return Math.pow(a-c,2)}))/(b-1)}function zb(a){return Math.sqrt(yb.apply(null,arguments))};var Ab="StopIteration"in p?p.StopIteration:{message:"StopIteration",stack:""};function Bb(){}Bb.prototype.next=function(){throw Ab;};Bb.prototype.lc=function(){return this};function Cb(a){if(a instanceof Bb)return a;if("function"==typeof a.lc)return a.lc(!1);if(ha(a)){var b=0,c=new Bb;c.next=function(){for(;;){if(b>=a.length)throw Ab;if(b in a)return a[b++];b++}};return c}throw Error("Not implemented");}
function Db(a,b){if(ha(a))try{wa(a,b,void 0)}catch(c){if(c!==Ab)throw c;}else{a=Cb(a);try{for(;;)b.call(void 0,a.next(),void 0,a)}catch(d){if(d!==Ab)throw d;}}}function Eb(a){if(za(arguments,function(a){return!a.length})||!arguments.length)return new Bb;var b=new Bb,c=arguments,d=Ba(c.length);b.next=function(){if(d){for(var a=xa(d,function(a,b){return c[b][a]}),b=d.length-1;0<=b;b--){if(d[b]<c[b].length-1){d[b]++;break}if(0==b){d=null;break}d[b]=0}return a}throw Ab;};return b};function Fb(a,b){this.o={};this.b=[];this.Oa=this.Bb=0;var c=arguments.length;if(1<c){if(c%2)throw Error("Uneven number of arguments");for(var d=0;d<c;d+=2)this.set(arguments[d],arguments[d+1])}else a&&this.addAll(a)}m=Fb.prototype;m.yc=f("Bb");m.wa=function(){Gb(this);for(var a=[],b=0;b<this.b.length;b++)a.push(this.o[this.b[b]]);return a};function Hb(a){Gb(a);return a.b.concat()}m.La=function(a){return Ib(this.o,a)};m.md=function(){return 0==this.Bb};
m.clear=function(){this.o={};this.Oa=this.Bb=this.b.length=0};m.remove=function(a){return Ib(this.o,a)?(delete this.o[a],this.Bb--,this.Oa++,this.b.length>2*this.Bb&&Gb(this),!0):!1};function Gb(a){if(a.Bb!=a.b.length){for(var b=0,c=0;b<a.b.length;){var d=a.b[b];Ib(a.o,d)&&(a.b[c++]=d);b++}a.b.length=c}if(a.Bb!=a.b.length){for(var e={},c=b=0;b<a.b.length;)d=a.b[b],Ib(e,d)||(a.b[c++]=d,e[d]=1),b++;a.b.length=c}}m.get=function(a,b){return Ib(this.o,a)?this.o[a]:b};
m.set=function(a,b){Ib(this.o,a)||(this.Bb++,this.b.push(a),this.Oa++);this.o[a]=b};m.addAll=function(a){var b;if(a instanceof Fb)b=Hb(a),a=a.wa();else{b=[];var c=0,d;for(d in a)b[c++]=d;a=Da(a)}for(c=0;c<b.length;c++)this.set(b[c],a[c])};m.forEach=function(a,b){for(var c=Hb(this),d=0;d<c.length;d++){var e=c[d],g=this.get(e);a.call(b,g,e,this)}};m.clone=function(){return new Fb(this)};
m.lc=function(a){Gb(this);var b=0,c=this.Oa,d=this,e=new Bb;e.next=function(){if(c!=d.Oa)throw Error("The map has changed since the iterator was created");if(b>=d.b.length)throw Ab;var e=d.b[b++];return a?e:d.o[e]};return e};function Ib(a,b){return Object.prototype.hasOwnProperty.call(a,b)};/*

 Copyright 2015 The Lovefield Project Authors. All Rights Reserved.

 Licensed under the Apache License, Version 2.0 (the "License");
 you may not use this file except in compliance with the License.
 You may obtain a copy of the License at

     http://www.apache.org/licenses/LICENSE-2.0

 Unless required by applicable law or agreed to in writing, software
 distributed under the License is distributed on an "AS IS" BASIS,
 WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 See the License for the specific language governing permissions and
 limitations under the License.
*/
function A(){this.o=new Fb;Object.defineProperty(this,"size",{get:function(){return this.o.yc()}})}A.prototype.clear=function(){this.o.clear()};A.prototype.clear=A.prototype.clear;A.prototype.delete=function(a){return this.o.remove(a)};A.prototype["delete"]=A.prototype.delete;A.prototype.forEach=function(a,b){return this.o.forEach(a,b)};A.prototype.forEach=A.prototype.forEach;A.prototype.get=function(a){return this.o.get(a)};A.prototype.get=A.prototype.get;A.prototype.has=function(a){return this.o.La(a)};
A.prototype.has=A.prototype.has;A.prototype.set=function(a,b){return this.o.set(a,b)};A.prototype.set=A.prototype.set;function B(){return window.Map&&window.Map.prototype.values&&window.Map.prototype.forEach?new window.Map:new A}function Jb(a){if(a instanceof A)return Hb(a.o);var b=0,c=Array(a.size);a.forEach(function(a,e){c[b++]=e});return c}function C(a){if(a instanceof A)return a.o.wa();var b=0,c=Array(a.size);a.forEach(function(a){c[b++]=a});return c};var Kb={};r("lf.TransactionType",Kb);Kb.READ_ONLY=0;Kb.READ_WRITE=1;function Lb(a,b){this.Ra=a;this.kf=b;this.X=x()}Lb.prototype.ia=function(){try{Mb(this.Ra)}catch(a){return $a(a)}return(0==this.kf?this.oc():Nb(this)).then(function(a){this.Ra.ia();return a}.bind(this))};function Nb(a){Ob(a);Pb(a);return a.oc()}
function Ob(a){a.Ra.pb.forEach(function(a,c){var d=this.Ra.Z().get(c),d=this.H(d.getName(),d.Lb.bind(d)),e=C(a.Da).map(function(a){return a.id()});0<e.length&&fb(d.remove(e),this.Od,this);e=C(a.pa).map(function(a){return a[1]}).concat(C(a.Ca));fb(d.put(e),this.Od,this)},a)}function Pb(a){Qb(a.Ra).forEach(function(a){var c=this.H(a.getName(),qb),d;c.get([-1]).then(function(a){d=a;return c.remove([])}).then(function(){c.put(d);c.put(a.Ia())},this.Od.bind(this))},a)}Lb.prototype.Od=function(a){this.X.reject(a)};function Rb(a){this.ng=a}Rb.prototype.toString=f("ng");var Sb=new Rb("backstore"),Tb=new Rb("cache"),Ub=new Rb("indexstore"),Vb=new Rb("engine"),Xb=new Rb("runner"),Yb=new Rb("observerregistry"),Zb=new Rb("schema");function $b(a){if("function"==typeof a.wa)return a.wa();if(ia(a))return a.split("");if(ha(a)){for(var b=[],c=a.length,d=0;d<c;d++)b.push(a[d]);return b}return Da(a)};function ac(a){this.o=new Fb;a&&this.addAll(a)}function bc(a){var b=typeof a;return"object"==b&&a||"function"==b?"o"+ka(a):b.substr(0,1)+a}m=ac.prototype;m.yc=function(){return this.o.yc()};m.add=function(a){this.o.set(bc(a),a)};m.addAll=function(a){a=$b(a);for(var b=a.length,c=0;c<b;c++)this.add(a[c])};m.remove=function(a){return this.o.remove(bc(a))};m.clear=function(){this.o.clear()};m.md=function(){return this.o.md()};m.contains=function(a){return this.o.La(bc(a))};m.wa=function(){return this.o.wa()};
m.clone=function(){return new ac(this)};m.lc=function(){return this.o.lc(!1)};var cc=Ha(),dc=u("Trident")||u("MSIE"),ec=u("Edge"),fc=u("Gecko")&&!(-1!=Ea.toLowerCase().indexOf("webkit")&&!u("Edge"))&&!(u("Trident")||u("MSIE"))&&!u("Edge"),gc=-1!=Ea.toLowerCase().indexOf("webkit")&&!u("Edge");function hc(){var a=Ea;if(fc)return/rv\:([^\);]+)(\)|;)/.exec(a);if(ec)return/Edge\/([\d\.]+)/.exec(a);if(dc)return/\b(?:MSIE|rv)[: ]([^\);]+)(\)|;)/.exec(a);if(gc)return/WebKit\/(\S+)/.exec(a)}
(function(){if(cc&&p.opera){var a=p.opera.version;return ja(a)?a():a}var a="",b=hc();b&&(a=b?b[1]:"");return dc&&(b=(b=p.document)?b.documentMode:void 0,b>parseFloat(a))?String(b):a})();!u("Android")||Ia()||u("Firefox")||Ha();Ia();var ic=u("Safari")&&!(Ia()||u("Coast")||Ha()||u("Edge")||u("Silk")||u("Android"))&&!(u("iPhone")&&!u("iPod")&&!u("iPad")||u("iPad")||u("iPod"));function jc(a){this.Vb=new ac(a);Object.defineProperty(this,"size",{get:function(){return this.Vb.yc()}})}jc.prototype.add=function(a){this.Vb.add(a)};jc.prototype.add=jc.prototype.add;jc.prototype.clear=function(){this.Vb.clear()};jc.prototype.clear=jc.prototype.clear;jc.prototype.delete=function(a){return this.Vb.remove(a)};jc.prototype["delete"]=jc.prototype.delete;jc.prototype.forEach=function(a,b){this.Vb.wa().forEach(a,b)};jc.prototype.has=function(a){return this.Vb.contains(a)};
jc.prototype.has=jc.prototype.has;function D(a){return window.Set&&window.Set.prototype.values&&window.Set.prototype.forEach&&!ic?new window.Set(a):new jc(a)}function kc(a){if(a instanceof jc)return a.Vb.wa();var b=0,c=Array(a.size);a.forEach(function(a){c[b++]=a});return c}function lc(a,b){if(b.size>a.size)return!1;var c=!0;b.forEach(function(b){c=c&&a.has(b)});return c};function mc(a,b){this.oa=a;this.s=b||{}}function nc(a){var b=D();a.forEach(function(a){b.add(a>>9)});return kc(b)}mc.prototype.V=f("oa");function oc(a,b){b.forEach(function(a){this.s[a.id()]=a.Ia()},a)}function pc(a,b){b.forEach(function(a){delete this.s[a]},a)}mc.prototype.Ia=function(){return{id:this.oa,value:JSON.stringify(this.s)}};function qc(a){return new mc(a.id,JSON.parse(a.value))};function rc(a,b,c){this.aa=a;this.Kb=b;this.bf=c}m=rc.prototype;m.get=function(a){if(0==a.length)return this.xc();var b=this.Kb;return sc(this,a).then(function(c){return a.map(function(a){var e=c.get(a>>9);return b(e.s[a])})})};function sc(a,b){var c=B(),d=x(),e=nc(b).map(function(a){return new v(function(b,d){var e;try{e=this.aa.get(a)}catch(z){d(z);return}e.onerror=d;e.onsuccess=function(a){a=qc(a.target.result);c.set(a.V(),a);b()}},this)},a);cb(e).then(function(){d.resolve(c)});return d.ga}
m.xc=function(){return new v(function(a,b){var c=[],d;try{d=this.aa.openCursor()}catch(e){b(e);return}d.onerror=b;d.onsuccess=function(){var b=d.result;if(b){var e;e=qc(b.value).s;for(var k in e)c.push(this.Kb(e[k]));b.continue()}else a(c)}.bind(this)},this)};m.Sb=function(a){return new v(function(b,c){var d;try{d=a()}catch(e){c(e);return}d.onsuccess=b;d.onerror=c},this)};
m.put=function(a){if(0==a.length)return w();var b=B();a.forEach(function(a){var d;d=a.id()>>9;var e=b.get(d)||null;null===e&&(e=this.bf(this.aa.name,d));oc(e,[a]);b.set(d,e)},this);a=C(b).map(function(a){return this.Sb(function(){return this.aa.put(a.Ia())}.bind(this))},this);return cb(a)};
m.remove=function(a){if(0==a.length)return this.Sb(function(){return this.aa.clear()}.bind(this));var b=B();a.forEach(function(a){var d=a>>9,e=b.get(d)||null;null===e&&(e=this.bf(this.aa.name,d));pc(e,[a]);b.set(d,e)},this);a=C(b).map(function(a){return this.Sb(function(){return 0==Object.keys(a.s).length?this.aa.delete(a.V()):this.aa.put(a.Ia())}.bind(this))},this);return cb(a)};function tc(a,b,c){a=a.i(Tb);var d=[c<<9,(c+1<<9)-1];b=a.Za(b,d[0],d[1]);c=new mc(c);oc(c,b);return c}
function uc(a,b){return new mc(b)};function vc(){};function wc(a){this.ba=a.i(Tb);this.D=a.i(Ub);this.m=a.i(Zb)}wc.prototype.update=function(a){a.forEach(function(a){xc(this,a);yc(this,a)},this)};function yc(a,b){var c=b.getName();b.Da.forEach(function(a,b){this.ba.remove(c,b)},a);b.Ca.forEach(function(a){this.ba.set(c,a)},a);b.pa.forEach(function(a){this.ba.set(c,a[1])},a)}function xc(a,b){var c=a.m.table(b.getName());zc(b).forEach(function(a){Ac(this,c,a)},a)}
function Ac(a,b,c){var d=[];(a.D.ic.get(b.getName())||[]).forEach(function(a){try{Bc(a,c),d.push(a)}catch(b){throw d.forEach(function(a){Bc(a,[c[1],c[0]])},this),b;}},a)}function Bc(a,b){var c=null===b[1]?void 0:b[1].Eb(a.getName()),d=null===b[0]?void 0:b[0].Eb(a.getName());if(!q(d)&&q(c))a.add(c,b[1].id());else if(q(d)&&q(c)){if(null===c||null===d){if(c==d)return}else if(0==a.pc().compare(d,c))return;a.add(c,b[1].id());a.remove(d,b[0].id())}else q(d)&&!q(c)&&a.remove(d,b[0].id())};var Cc={};r("lf.ConstraintAction",Cc);Cc.RESTRICT=0;Cc.CASCADE=1;var Dc={};r("lf.ConstraintTiming",Dc);Dc.IMMEDIATE=0;Dc.DEFERRABLE=1;var Ec={};r("lf.Order",Ec);Ec.DESC=0;Ec.ASC=1;var Fc={};r("lf.Type",Fc);Fc.ARRAY_BUFFER=0;Fc.BOOLEAN=1;Fc.DATE_TIME=2;Fc.INTEGER=3;Fc.NUMBER=4;Fc.STRING=5;Fc.OBJECT=6;var Gc={0:null,1:!1,2:Object.freeze(new Date(0)),3:0,4:0,5:"",6:null};r("lf.type.DEFAULT_VALUES",Gc);function E(a,b){this.code=a;this.message="http://sn.im/2a0j3wn?c="+a;if(1<arguments.length)for(var c=1;c<=Math.min(4,arguments.length-1);++c)this.message+="&p"+(c-1)+"="+encodeURIComponent(arguments[c].toString().slice(0,64))}t(E,Error);function Hc(a){this.D=a.i(Ub);this.m=a.i(Zb);this.cd=null}function Ic(a,b,c){var d=b.Db().ag;c.forEach(function(a){d.forEach(function(b){if(null==a.s[b.getName()])throw new E(202,b.l());},this)},a)}function Jc(a,b,c,d){b.Db().Nd().forEach(function(a){a.timing==d&&Kc(this,a,c)},a)}function Kc(a,b,c){var d=Lc(a,b);c.forEach(function(a){if(Mc(a[0],a[1],b.name)&&(a=a[1].s[b.qb],null!==a&&!d.La(a)))throw new E(203,b.name);},a)}
function Lc(a,b){null===a.cd&&(a.cd=B());var c=a.cd.get(b.name)||null;null===c&&(c=a.m.table(b.yb)[b.Lc].ua(),c=a.D.get(c.l()),a.cd.set(b.name,c));return c}function Mc(a,b,c){return(null===a?null!==b:null===b)||a.Eb(c)!=b.Eb(c)}function Nc(a,b,c,d){b=Oc(a.m.info(),b.getName());null!=b&&b.forEach(function(a){if(a.timing==d){var b=this.D.get(a.name),h=Lc(this,a);c.forEach(function(c){if(Mc(c[0],c[1],h.getName())&&b.La(c[0].s[a.Lc]))throw new E(203,a.name);},this)}},a)}
function Qc(a,b,c,d){0!=c.length&&(c=c.map(function(a){return[null,a]}),Jc(a,b,c,d))}function Rc(a,b,c,d){0!=c.length&&(Jc(a,b,c,d),Nc(a,b,c,d))}function Sc(a,b,c,d){0!=c.length&&(c=c.map(function(a){return[a,null]}),Nc(a,b,c,d))};function Tc(a){this.Ca=B();this.pa=B();this.Da=B();this.A=a}m=Tc.prototype;m.getName=f("A");m.add=function(a){if(this.Da.has(a.id())){var b=[this.Da.get(a.id()),a];this.pa.set(a.id(),b);this.Da.delete(a.id())}else this.Ca.set(a.id(),a)};m.modify=function(a){var b=a[1],c=a[0].id();this.Ca.has(c)?this.Ca.set(c,b):(this.pa.has(c)&&(a=[this.pa.get(a[0].id())[0],b]),this.pa.set(c,a))};
m.delete=function(a){if(this.Ca.has(a.id()))this.Ca.delete(a.id());else if(this.pa.has(a.id())){var b=this.pa.get(a.id())[0];this.pa.delete(a.id());this.Da.set(a.id(),b)}else this.Da.set(a.id(),a)};function zc(a){var b=[];a.Ca.forEach(function(a){b.push([null,a])});a.pa.forEach(function(a){b.push(a)});a.Da.forEach(function(a){b.push([a,null])});return b}m.toString=function(){return"["+Jb(this.Ca).toString()+"], ["+Jb(this.pa).toString()+"], ["+Jb(this.Da).toString()+"]"};
function Uc(a){var b=new Tc(a.A);a.Ca.forEach(function(a){b.delete(a)});a.Da.forEach(function(a){b.add(a)});a.pa.forEach(function(a){b.modify([a[1],a[0]])});return b}m.md=function(){return 0==this.Ca.size&&0==this.Da.size&&0==this.pa.size};function Vc(a,b){this.$=B();b.forEach(function(a){this.$.set(a.getName(),a)},this);this.ba=a.i(Tb);this.D=a.i(Ub);this.Pa=new Hc(a);this.ld=new wc(a);this.pb=B()}function Qb(a){var b=[];Jb(a.pb).map(function(a){return this.$.get(a)},a).forEach(function(a){a.zb()&&(a.va().forEach(function(a){b.push(this.D.get(a.l()))},this),b.push(this.D.get(a.getName()+".#")))},a);return b}m=Vc.prototype;m.Z=f("$");
function Wc(a){var b=[];a.$.forEach(function(a){a.zb()&&(a.va().forEach(function(a){b.push(a.l())}),b.push(a.getName()+".#"))});return b}m.wb=function(a,b){Xc(this,a);Ic(this.Pa,a,b);Qc(this.Pa,a,b,0);for(var c=0;c<b.length;c++)Yc(this,a,[null,b[c]])};
function Yc(a,b,c){var d=b.getName(),e=a.pb.get(d)||new Tc(d);a.pb.set(d,e);try{Ac(a.ld,b,c)}catch(g){throw g;}b=c[0];var h=c[1];null===b&&null!==h?(a.ba.set(d,h),e.add(h)):null!==b&&null!==h?(a.ba.set(d,h),e.modify(c)):null!==b&&null===h&&(a.ba.remove(d,b.id()),e.delete(b))}m.update=function(a,b){Xc(this,a);Ic(this.Pa,a,b);for(var c=0;c<b.length;c++){var d=b[c],d=[this.ba.get(d.id()),d];Rc(this.Pa,a,[d],0);Yc(this,a,d)}};
m.Qd=function(a,b){Xc(this,a);Ic(this.Pa,a,b);for(var c=0;c<b.length;c++){var d=b[c],e=null,g,h=a.Db().fd();if(null===h)g=null;else{g=this.Pa;var h=h.l(),k=d.Eb(h);g=g.D.get(h).get(k);g=0==g.length?null:g[0]}null!=g?(e=this.ba.get(g),d.oa=g,Rc(this.Pa,a,[[e,d]],0)):Qc(this.Pa,a,[d],0);Yc(this,a,[e,d])}};m.remove=function(a,b){Xc(this,a);Sc(this.Pa,a,b,0);for(var c=0;c<b.length;c++)Yc(this,a,[b[c],null])};
function Mb(a){a.pb.forEach(function(a){var c=this.$.get(a.getName());Qc(this.Pa,c,C(a.Ca),1);Sc(this.Pa,c,C(a.Da),1);Rc(this.Pa,c,C(a.pa),1)},a)}m.ia=aa();m.Gb=function(){var a=C(this.pb).map(function(a){return Uc(a)});this.ld.update(a)};function Xc(a,b){if(!a.$.has(b.getName()))throw new E(106,b.getName());};function Zc(a,b,c,d){this.c=a;this.u=b;this.ca=null===this.c?!1:c;this.ma=null===this.u?!1:d}Zc.prototype.toString=function(){return(this.ca?"(":"[")+(null===this.c?"unbound":this.c)+", "+(null===this.u?"unbound":this.u)+(this.ma?")":"]")};function $c(a){if(null===a.c&&null===a.u)return[];var b=null,c=null;null===a.c||(b=new Zc(null,a.c,!1,!a.ca));null===a.u||(c=new Zc(a.u,null,!a.ma,!1));return[b,c].filter(function(a){return null!==a})}
Zc.prototype.reverse=function(){return new Zc(this.u,this.c,this.ma,this.ca)};function ad(a,b){var c=bd(a.c,b.c,!0,a.ca,b.ca);if(0==c)return!0;var d=-1==c?a:b,c=1==c?a:b;return null===d.u||d.u>c.c||d.u==c.c&&!d.ma&&!c.ca}function cd(){return new Zc(null,null,!1,!1)}function dd(a){return null===a.c&&null===a.u}function ed(a){return null!=a.c&&a.c==a.u&&!a.ca&&!a.ma}
Zc.prototype.contains=function(a){var b=null===this.u||a<this.u||a==this.u&&!this.ma;return(null===this.c||a>this.c||a==this.c&&!this.ca)&&b};function bd(a,b,c,d,e){function g(a){return c?a:1==a?-1:1}d=d||!1;e=e||!1;return null===a?null===b?(d?!e:e)?d?g(1):g(-1):0:g(-1):null===b?g(1):a<b?-1:a==b?(d?!e:e)?d?g(1):g(-1):0:1}function fd(a,b){var c=bd(a.c,b.c,!0,a.ca,b.ca);0==c&&(c=bd(a.u,b.u,!1,a.ma,b.ma));return c};function F(a,b){this.entries=a;this.L=D(b);this.Xa=null}function G(a){return kc(a.L)}function gd(a){return a.entries.map(function(a){return a.sa.s})}function hd(a){return a.entries.map(function(a){return a.sa.id()})}function id(a,b){return a.Xa.get(b.l())}var jd=null;function kd(){null===jd&&(jd=new F([],[]));return jd}
function ld(a){if(0==a.length)return kd();for(var b=a.reduce(function(a,b){return a+b.entries.length},0),c=Array(b),d=0,b=a.map(function(a){var b=B();a.entries.forEach(function(a){c[d++]=a;b.set(a.id,a)});return b}),e=B(),g=0;g<c.length;g++)b.every(function(a){return a.has(c[g].id)})&&e.set(c[g].id,c[g]);return new F(C(e),kc(a[0].L))}function md(a){if(0==a.length)return kd();var b=B();a.forEach(function(a){a.entries.forEach(function(a){b.set(a.id,a)})});return new F(C(b),kc(a[0].L))}
function nd(a,b){var c=1<b.length,d=a.map(function(a){return new od(a,c)});return new F(d,b)}function od(a,b){this.sa=a;this.id=pd++;this.Td=b}var pd=0;function H(a,b){var c=b.Ya();return null!==c&&a.sa.s.hasOwnProperty(c)?a.sa.s[c]:a.Td?a.sa.s[I(b.H())][b.getName()]:a.sa.s[b.getName()]}function qd(a,b,c){var d=b.Ya();if(null!=d)a.sa.s[d]=c;else if(a.Td){var d=I(b.H()),e=a.sa.s[d];null==e&&(e={},a.sa.s[d]=e);e[b.getName()]=c}else a.sa.s[b.getName()]=c}
function rd(a,b,c,d){function e(a,b){if(a.Td){var c=a.sa.s,d;for(d in c)g[d]=c[d]}else g[b[0]]=a.sa.s}var g={};e(a,b);e(c,d);a=new y(-1,g);return new od(a,!0)};r("lf.bind",function(a){return new sd(a)});function sd(a){this.ea=a}r("lf.Binder",sd);sd.prototype.ua=f("ea");function td(){this.Le=ud();var a=vd();this.ec=B();this.ec.set(1,wd());this.ec.set(2,xd());this.ec.set(4,a);this.ec.set(3,a);this.ec.set(5,yd())}td.zc=function(){return td.He?td.He:td.He=new td};function zd(a,b,c){return(a.ec.get(b)||null).get(c)||null}function ud(){function a(a){return a}var b=B();b.set(1,function(a){return null===a?null:a?1:0});b.set(2,function(a){return null===a?null:a.getTime()});b.set(3,a);b.set(4,a);b.set(5,a);return b}
function wd(){var a=B();a.set("eq",function(a,c){return a==c});a.set("neq",function(a,c){return a!=c});return a}
function vd(){var a=wd();a.set("between",function(a,c){return null===a||null===c[0]||null===c[1]?!1:a>=c[0]&&a<=c[1]});a.set("gte",function(a,c){return null===a||null===c?!1:a>=c});a.set("gt",function(a,c){return null===a||null===c?!1:a>c});a.set("in",function(a,c){return-1!=c.indexOf(a)});a.set("lte",function(a,c){return null===a||null===c?!1:a<=c});a.set("lt",function(a,c){return null===a||null===c?!1:a<c});return a}
function yd(){var a=vd();a.set("match",function(a,c){return null===a||null===c?!1:(new RegExp(c)).test(a)});return a}
function xd(){var a=B();a.set("between",function(a,c){return null===a||null===c[0]||null===c[1]?!1:a.getTime()>=c[0].getTime()&&a.getTime()<=c[1].getTime()});a.set("eq",function(a,c){return(null===a?-1:a.getTime())==(null===c?-1:c.getTime())});a.set("gte",function(a,c){return null===a||null===c?!1:a.getTime()>=c.getTime()});a.set("gt",function(a,c){return null===a||null===c?!1:a.getTime()>c.getTime()});a.set("in",function(a,c){return c.some(function(c){return c.getTime()==a.getTime()})});a.set("lte",
function(a,c){return null===a||null===c?!1:a.getTime()<=c.getTime()});a.set("lt",function(a,c){return null===a||null===c?!1:a.getTime()<c.getTime()});a.set("neq",function(a,c){return(null===a?-1:a.getTime())!=(null===c?-1:c.getTime())});return a};function J(){this.g=this.C=null}var Ad=[];J.prototype.getParent=f("C");J.prototype.gb=function(){for(var a=this;!ea(a.getParent());)a=a.getParent();return a};function Bd(a){for(var b=0;!ea(a.getParent());)b++,a=a.getParent();return b}function K(a){return a.g||Ad}function Cd(a,b){return K(a)[b]||null}function Dd(a,b,c){b.C=a;null===a.g?a.g=[b]:a.g.splice(c,0,b)}function L(a,b){b.C=a;null===a.g?a.g=[b]:a.g.push(b)}
function Ed(a,b){var c=a.g&&a.g[b];return c?(c.C=null,a.g.splice(b,1),0==a.g.length&&(a.g=null),c):null}J.prototype.removeChild=function(a){return Ed(this,K(this).indexOf(a))};function Fd(a,b,c){Cd(a,c).C=null;b.C=a;a.g[c]=b}function Gd(a,b,c){!1!==b.call(c,a)&&K(a).forEach(function(a){Gd(a,b,c)})};function Hd(){J.call(this);this.oa=Id++}t(Hd,J);var Id=0;Hd.prototype.V=f("oa");function Jd(a,b,c){Hd.call(this);this.O=a;this.value=b;this.G=c;this.tc=zd(td.zc(),this.O.I(),this.G);this.$a=!1;this.ac=b}t(Jd,Hd);m=Jd.prototype;m.Jb=function(){var a=new Jd(this.O,this.value,this.G);a.ac=this.ac;a.vd(this.$a);var b=this.V();a.oa=b;return a};m.fb=function(a){return null!=a?(a.push(this.O),a):[this.O]};m.vd=ba("$a");function Kd(a){var b=!1;a.value instanceof sd||(b="array"==da(a.value)?!a.value.some(function(a){return a instanceof sd}):!0);if(!b)throw new E(501);}
m.eval=function(a){Kd(this);if("in"==this.G)return Ld(this,a);var b=a.entries.filter(function(a){return this.tc(H(a,this.O),this.value)!=this.$a},this);return new F(b,G(a))};m.bind=function(a){if(this.ac instanceof sd){var b=this.ac.ua();if(a.length<=b)throw new E(510);this.value=a[b]}else"array"==da(this.ac)&&(this.value=this.ac.map(function(b){if(b instanceof sd){var d=b.ua();if(a.length<=d)throw new E(510);return a[b.ua()]}return b}))};
function Ld(a,b){var c=D(a.value),d=function(a){return null===a?!1:c.has(a)!=this.$a}.bind(a),e=b.entries.filter(function(a){return d(H(a,this.O))},a);return new F(e,G(b))}m.toString=function(){return"value_pred("+this.O.l()+" "+this.G+(this.$a?"(complement)":"")+" "+this.value+")"};function Md(a){this.ha=a;this.$c=this.za=null}function Nd(a,b){null===a.za&&null!=a.w&&(a.za=Od(a.w));return a.za.get(b)||null}function Od(a){var b=B();Gd(a,function(a){b.set(a.V(),a)});return b}function Pd(a,b){b.w&&(a.w=b.w.Jb());a.$c=b}Md.prototype.bind=function(){return this};function Qd(a,b){var c=a.w;null!=c&&Gd(c,function(a){a instanceof Jd&&a.bind(b)})};function Rd(a){Md.call(this,a)}t(Rd,Md);function Sd(a){var b="";a.forEach(function(c,d){b+=c.O.l()+" ";b+=1==c.jb?"ASC":"DESC";d<a.length-1&&(b+=", ")});return b}Rd.prototype.Z=function(){return D(this.c)};Rd.prototype.clone=function(){var a=new Rd(this.ha);Pd(a,this);this.f&&(a.f=this.f.slice());this.c&&(a.c=this.c.slice());a.W=this.W;a.N=this.N;this.M&&(a.M=this.M.slice());this.ja&&(a.ja=this.ja.slice());this.Qb&&(a.Qb=this.Qb);this.Xb&&(a.Xb=this.Xb);a.xb=this.xb;return a};
Rd.prototype.bind=function(a){Rd.Hb.bind.call(this,a);null!=this.Qb&&(this.W=a[this.Qb.ua()]);null!=this.Xb&&(this.N=a[this.Xb.ua()]);Qd(this,a);return this};function Td(a,b){this.Aa=a;this.$=b}Td.prototype.gb=f("Aa");Td.prototype.Z=f("$");function Ud(a){var b=D();a.forEach(function(a){a.Z().forEach(b.add.bind(b))});return b};function Vd(a,b){this.global=a;this.Ja=a.i(Sb);this.sd=b.map(function(a){return a.context});this.Ve=b.map(function(a){return a.de});this.xe=Ud(this.Ve);this.lf=Wd(this);this.bb=x()}function Wd(a){return a.sd.some(function(a){return!(a instanceof Rd)})?1:0}m=Vd.prototype;
m.exec=function(){function a(){var g=d.shift();if(g){var h=e[c.length];return g.gb().exec(b,h).then(function(b){c.push(b[0]);return a()})}return w()}var b=new Vc(this.global,this.xe),c=[],d=this.Ve.slice(),e=this.sd;return a().then(function(){return this.Ja.Cb(this.lf,b).ia()}.bind(this)).then(function(){this.ae(c);return c}.bind(this),function(a){b.Gb();throw a;})};m.I=f("lf");m.Z=f("xe");m.Mb=f("bb");m.V=function(){return ka(this)};m.ae=aa();function Xd(a,b){Vd.call(this,a,b);this.Fb=a.i(Yb)}t(Xd,Vd);Xd.prototype.getPriority=l(0);Xd.prototype.ae=function(a){this.sd.forEach(function(b,c){Yd(this.Fb,b,a[c])},this)};function Zd(a,b){this.h=a;this.Fb=a.i(Yb);this.Ba=a.i(Xb);this.ld=new wc(a);this.pb=b;var c=a.i(Zb),d=this.pb.map(function(a){return c.table(a.getName())});this.$=D(d);this.bb=x()}m=Zd.prototype;m.exec=function(){this.ld.update(this.pb);this.Oc();return w()};m.I=l(1);m.Z=f("$");m.Mb=f("bb");m.V=function(){return ka(this)};m.getPriority=l(1);m.Oc=function(){var a=$d(this.Fb,this.$);0!=a.length&&(a=new Xd(this.h,a),ae(this.Ba,a))};function be(a){this.h=a;this.Ja=a.i(Sb);this.Ba=a.i(Xb)}be.prototype.Zd=function(a){a=new Zd(this.h,a);ae(this.Ba,a)};function M(a,b){this.Oa=a;this.j=b;this.Ua=B()}r("lf.backstore.FirebaseRawBackStore",M);M.prototype.gd=f("j");M.prototype.hd=function(){throw new E(351);};function ce(a,b){var c=x(),d=a;b.length&&(d=a.child(b));d.once("value",function(a){c.resolve(a.val())},function(a){c.reject(a)});return c.ga}function de(a,b,c){function d(a){a?e.reject(a):e.resolve()}c=c||!1;var e=x();c?a.set(b,d):a.update(b,d);return e.ga}
M.prototype.Ea=function(a){return ce(this.j,"@rev/R").then(function(a){this.Ma=a;return ce(this.j,"@table")}.bind(this)).then(function(b){var c=0,d;for(d in b)this.Ua.set(d,b[d]),b[d]>c&&(c=b[d]);a.ra().forEach(function(a){this.Ua.has(a.getName())||(b[a.getName()]=++c)},this);d=this.j.child("@table");return de(d,b)}.bind(this))};
function ee(a,b,c){var d=a.Ua.get(b);return null!=d?function(){var a={},b=x();this.j.orderByChild("T").equalTo(d).once("value",function(d){d.forEach(function(b){var d=c(b.val());a[parseInt(b.key(),10)]=d});b.resolve(a)});return b.ga}.call(a).then(function(a){a["@rev"]={R:++this.Ma};return de(this.j,a)}.bind(a)):w()}M.prototype.rc=function(a){return ee(this,a,l(null)).then(function(){this.Ua.delete(a);return de(this.j.child("@table/"+a),null,!0)}.bind(this))};M.prototype.dropTable=M.prototype.rc;
M.prototype.mc=function(a,b,c){return ee(this,a,function(a){var e=a.P;e[b]=c;return{R:this.Ma+1,T:a.T,P:e}}.bind(this))};M.prototype.addTableColumn=M.prototype.mc;M.prototype.sc=function(a,b){return ee(this,a,function(a){var d=a.P;delete d[b];return{R:this.Ma+1,T:a.T,P:d}}.bind(this))};M.prototype.dropTableColumn=M.prototype.sc;M.prototype.Nc=function(a,b,c){return ee(this,a,function(a){var e=a.P;e[c]=e[b];delete e[b];return{R:this.Ma+1,T:a.T,P:e}}.bind(this))};M.prototype.renameTableColumn=M.prototype.Nc;
M.prototype.sb=function(){throw new E(351);};M.prototype.createRow=M.prototype.sb;M.prototype.Cc=f("Oa");M.prototype.getVersion=M.prototype.Cc;M.prototype.cc=function(a){var b=x();a=this.Ua.get(a);this.j.orderByChild("T").equalTo(a).once("value",function(a){var d=[];a.forEach(function(a){d.push(a.val().P)});b.resolve(d)});return b.ga};M.prototype.dump=function(){var a={},b=Jb(this.Ua).map(function(b){return this.cc(b).then(function(d){a[b]=d})}.bind(this));return cb(b).then(function(){return a})};
M.prototype.dump=M.prototype.dump;function fe(a,b,c){Lb.call(this,c,b);this.j=a}t(fe,Lb);fe.prototype.H=function(a){return this.j.Ac(a)};
fe.prototype.oc=function(){var a=this.Ra.pb;if(0==a.size)this.X.resolve();else{var b=this.j.Ma+1;this.j.Ma=b;var c={"@rev":{R:b}};a.forEach(function(a,e){var g=this.j.Ua.get(e);a.Ca.forEach(function(a,d){c[d]={R:b,T:g,P:a.s}});a.pa.forEach(function(a,d){c[d]={R:b,T:g,P:a[1].s}});a.Da.forEach(function(a,b){c[b]=null})},this);this.j.j.update(c,function(c){null===c?this.X.resolve():(this.j.Ma=b-1,c=C(a).map(function(a){return ge(this.j,a.getName())},this),cb(c).then(this.X.reject.bind(this.X),this.X.reject.bind(this.X)))}.bind(this))}return this.X.ga};function he(){this.ta=B()}function ie(a,b){if(0==b.length)return C(a.ta);var c=[];b.forEach(function(a){a=this.ta.get(a)||null;null===a||c.push(a)},a);return c}he.prototype.getData=f("ta");he.prototype.get=function(a){return w(ie(this,a))};function je(a,b){b.forEach(function(a){this.ta.set(a.id(),a)},a)}he.prototype.put=function(a){je(this,a);return w()};function ke(a,b){0==b.length||b.length==a.ta.size?a.ta.clear():b.forEach(function(a){this.ta.delete(a)},a)}
he.prototype.remove=function(a){ke(this,a);return w()};function le(a){return 0==a.ta.size?0:Jb(a.ta).reduce(function(a,c){return a>c?a:c},0)};function me(a,b){this.m=a;this.rf=b;this.Mc=B();this.Ma=-1;this.L=B();this.Ua=B();this.Fd=null}m=me.prototype;
m.Ea=function(a){this.j=this.rf.child(this.m.name());var b=a||function(){return w()};return ce(this.j,"@db/version").then(function(a){return null===a?de(this.j,ne(this),!0).then(function(){var a=new M(0,this.j);return b(a)}.bind(this)):a==this.m.version()?ce(this.j,"@rev/R").then(function(a){this.Ma=a;return ce(this.j,"@table")}.bind(this)).then(function(a){for(var b in a)this.Ua.set(b,a[b]);a=this.m.ra().map(function(a){return ge(this,a.getName())},this);return cb(a)}.bind(this)).then(function(){oe(this);
pe(this);return w()}.bind(this)):this.be(a,b).then(function(){return this.Ea()}.bind(this))}.bind(this))};m.be=function(a,b){var c=new M(a,this.j);return c.Ea(this.m).then(function(){return w()}.bind(this)).then(function(){return b(c)}).then(function(){var a=this.j.child("@db");return de(a,{version:this.m.version()},!0)}.bind(this))};
function pe(a){a.j.off();a.j.on("child_removed",a.cg.bind(a));a.Gd&&(a.Gd.off(),a.Mc.clear());a.Gd=a.j.orderByChild("R").startAt(a.Ma+1);a.Gd.on("value",a.Zd.bind(a))}function oe(a){ob=C(a.L).map(function(a){return le(a)}).reduce(function(a,c){return a>c?a:c},0)+1}m.cg=function(a){var b=a.val(),c=this.Mc.get(b.T)||null;null===c&&(c=D(),this.Mc.set(b.T,c));c.add(parseInt(a.key(),10))};
m.Zd=function(a){var b=a.child("@rev/R").val();null!=b&&b!=this.Ma&&(this.Ma=b,a=qe(this,a),a.forEach(function(a){var b=this.L.get(a.getName()),e=Jb(a.Da);0<e.length&&ke(b,e);var g=C(a.Ca);a.pa.forEach(function(a){g.push(a[1])});je(b,g)},this),0<a.length&&this.Hc(a),pe(this))};
function qe(a,b){var c=D(),d=B();a.Ua.forEach(function(a,b){var h=this.L.get(b),k=new Tc(b);if(this.Mc.has(a)){var n=kc(this.Mc.get(a));n.forEach(function(a){c.add(a)});ie(h,n).forEach(function(a){k.delete(a)})}d.set(a,k)}.bind(a));b.forEach(function(a){if("@rev"!=a.key()){var b=parseInt(a.key(),10);if(!c.has(b)){a=a.val();var h=d.get(a.T),k=this.L.get(h.getName());k.getData().has(b)?h.modify([ie(k,[b])[0],new y(b,a.P)]):h.add(new y(b,a.P))}}}.bind(a));return C(d).filter(function(a){return!a.md()})}
function ge(a,b){var c=x(),d=a.Ua.get(b);a.j.orderByChild("T").equalTo(d).once("value",function(a){var d=new he,h=[];a.forEach(function(a){h.push(new y(parseInt(a.key(),10),a.val().P))});je(d,h);this.L.set(b,d);c.resolve()}.bind(a));return c.ga}function ne(a){var b={};b["@db"]={version:a.m.version()};b["@rev"]={R:1};a.Ma=1;b["@table"]={};a.m.ra().forEach(function(a,d){var e=a.getName();b["@table"][e]=d;this.L.set(e,new he);this.Ua.set(e,d)},a);return b}m.Cb=function(a,b){return new fe(this,a,b)};
m.Ac=function(a){var b=this.L.get(a)||null;if(null!==b)return b;throw new E(101,a);};m.close=aa();m.subscribe=ba("Fd");m.Hc=function(a){null!=this.Fd&&this.Fd(a)};function N(a,b,c,d){this.j=b;this.Wa=c;this.Oa=a;this.Xc=d}r("lf.backstore.IndexedDBRawBackStore",N);N.prototype.gd=f("j");N.prototype.getRawDBInstance=N.prototype.gd;N.prototype.hd=f("Wa");N.prototype.getRawTransaction=N.prototype.hd;N.prototype.rc=function(a){return new v(function(b,c){try{this.j.deleteObjectStore(a)}catch(d){c(d);return}b()},this)};N.prototype.dropTable=N.prototype.rc;
function re(a,b,c,d){return new v(function(a,g){var h;try{var k=this.Wa.objectStore(b);h=k.openCursor()}catch(n){g(n);return}h.onsuccess=function(){var b=h.result;b?(c(b),b.continue()):(d(k),a())};h.onerror=g},a)}function se(a){var b=null;return b=a instanceof ArrayBuffer?sb(a):a instanceof Date?a.getTime():a}
function te(a,b,c){function d(a){var b=qc(a.value),d=b.s,e;for(e in d){var z=qb(d[e]);c(z);d[e]=z.Ia()}a.update(b.Ia())}function e(a){var b=qb(a.value);c(b);a.update(b.Ia())}return re(a,b,a.Xc?d:e,aa())}N.prototype.mc=function(a,b,c){var d=se(c);return te(this,a,function(a){a.s[b]=d})};N.prototype.addTableColumn=N.prototype.mc;N.prototype.sc=function(a,b){return te(this,a,function(a){delete a.s[b]})};N.prototype.dropTableColumn=N.prototype.sc;
N.prototype.Nc=function(a,b,c){return te(this,a,function(a){a.s[c]=a.s[b];delete a.s[b]})};N.prototype.renameTableColumn=N.prototype.Nc;function ue(a,b){var c=[];return new v(function(a,e){var g;try{g=this.Wa.objectStore(b).openCursor()}catch(h){e(h);return}g.onsuccess=function(){var b=g.result;if(b){if(this.Xc){var e;e=qc(b.value).s;for(var h in e)c.push(e[h])}else c.push(b.value);b.continue()}else a(c)}.bind(this);g.onerror=e},a)}N.prototype.sb=function(a){var b={},c;for(c in a)b[c]=se(a[c]);return rb(b)};
N.prototype.createRow=N.prototype.sb;N.prototype.Cc=f("Oa");N.prototype.getVersion=N.prototype.Cc;N.prototype.dump=function(){for(var a=this.j.objectStoreNames,b=[],c=0;c<a.length;++c){var d=a.item(c);b.push(this.cc(d))}return cb(b).then(function(b){var c={};b.forEach(function(b,d){c[a.item(d)]=b});return c})};N.prototype.dump=N.prototype.dump;N.prototype.cc=function(a){return ue(this,a).then(function(a){return a.map(function(a){return a.value})})};function ve(a,b){this.aa=a;this.Kb=b}m=ve.prototype;m.get=function(a){if(0==a.length)return this.xc();a=a.map(function(a){return new v(function(c,d){var e;try{e=this.aa.get(a)}catch(g){d(g);return}e.onerror=d;e.onsuccess=function(a){c(this.Kb(a.target.result))}.bind(this)},this)},this);return cb(a)};
m.xc=function(){return new v(function(a,b){var c=[],d;try{d=this.aa.openCursor()}catch(e){b(e);return}d.onerror=b;d.onsuccess=function(){var b=d.result;b?(c.push(this.Kb(b.value)),b.continue()):a(c)}.bind(this)},this)};m.Sb=function(a){return new v(function(b,c){var d;try{d=a()}catch(e){c(e);return}d.onsuccess=b;d.onerror=c},this)};m.put=function(a){if(0==a.length)return w();a=a.map(function(a){return this.Sb(function(){return this.aa.put(a.Ia())}.bind(this))},this);return cb(a)};
m.remove=function(a){return new v(function(b,c){var d=this.aa.count();d.onsuccess=function(d){if(0==a.length||d.target.result==a.length)return this.Sb(function(){return this.aa.clear()}.bind(this)).then(b,c);d=a.map(function(a){return this.Sb(function(){return this.aa.delete(a)}.bind(this))},this);cb(d).then(b,c)}.bind(this);d.onerror=c},this)};function we(a,b,c,d,e){Lb.call(this,c,d);this.h=a;this.Wa=b;this.Xc=e;this.Wa.oncomplete=this.X.resolve.bind(this.X);this.Wa.onabort=this.X.reject.bind(this.X)}t(we,Lb);we.prototype.H=function(a,b,c){return this.Xc?(c=null!=c?c:0,a=this.Wa.objectStore(a),new rc(a,b,0==c?ra(tc,this.h):uc)):new ve(this.Wa.objectStore(a),b)};we.prototype.oc=function(){return this.X.ga};function xe(a,b){this.h=a;this.m=b;this.Yc=b.We().Df||!1}m=xe.prototype;
m.Ea=function(a){var b=window.indexedDB||window.mozIndexedDB||window.webkitIndexedDB||window.msIndexedDB;if(null==b)throw new E(352);var c=a||function(){return w()};return new v(function(a,e){var g;try{g=b.open(this.m.name(),this.m.version())}catch(h){e(h);return}g.onerror=e;g.onupgradeneeded=function(a){ye(this,c,a).then(aa(),e)}.bind(this);g.onsuccess=function(b){this.j=b.target.result;this.ie().then(function(b){ob=b+1;a(this.j)}.bind(this))}.bind(this)},this)};
function ye(a,b,c){var d=c.target.result,e=c.target.transaction;c=new N(c.oldVersion,d,e,a.Yc);ze(d);a.m.ra().forEach(ra(a.yf,d,e),a);return b(c)}function ze(a){for(var b=[],c=0;c<a.objectStoreNames.length;++c){var d=a.objectStoreNames.item(c);-1!=d.indexOf(".")&&b.push(d)}b.forEach(function(b){try{a.deleteObjectStore(b)}catch(c){}})}
m.yf=function(a,b,c){a.objectStoreNames.contains(c.getName())||a.createObjectStore(c.getName(),{keyPath:"id"});c.zb()&&(c.va().forEach(function(c){this.qc(a,b,c.l(),"btree")},this),this.qc(a,b,Ae(c),"rowid"))};m.qc=function(a,b,c,d){a.objectStoreNames.contains(c)||(a.createObjectStore(c,{keyPath:"id"}),a=b.objectStore(c),(this.Yc?new rc(a,qb,uc):new ve(a,qb)).put([new ub(new tb(d))]))};
m.Cb=function(a,b){var c=Jb(b.Z());Wc(b).forEach(function(a){c.push(a)});var d=this.j.transaction(c,0==a?"readonly":"readwrite");return new we(this.h,d,b,a,this.Yc)};
m.ie=function(a){function b(){if(0==d.length)return w();var a=d.shift();return c(a).then(b)}function c(b){return new v(function(c,d){var ga;try{ga=(a||e.transaction([b])).objectStore(b).openCursor(null,"prev")}catch(na){d(na);return}ga.onsuccess=function(a){(a=a.target.result)&&(g=Math.max(g,h(a)));c(g)};ga.onerror=function(){c(g)}})}var d=this.m.ra().map(function(a){return a.getName()}),e=this.j,g=0,h=function(a){return this.Yc?(a=qc(a.value),Object.keys(a.s).reduce(function(a,b){return Math.max(a,
b)},0)):a.key}.bind(this);return new v(function(a){b().then(function(){a(g)})})};m.close=function(){this.j.close()};m.Ac=function(){throw new E(511);};m.subscribe=aa();m.Hc=aa();function Be(a,b,c){Lb.call(this,c,b);this.aa=a;0==b&&this.X.resolve()}t(Be,Lb);Be.prototype.H=function(a){return this.aa.Ac(a)};Be.prototype.oc=function(){this.X.resolve();return this.X.ga};function Ce(a){this.m=a;this.L=B()}m=Ce.prototype;m.Ea=function(){this.m.ra().forEach(this.Pf,this);return w()};m.Ac=function(a){var b=this.L.get(a)||null;if(null===b)throw new E(101,a);return b};m.Cb=function(a,b){return new Be(this,a,b)};function De(a,b){if(!a.L.has(b)){var c=new he;a.L.set(b,c);return c}return null}m.Pf=function(a){De(this,a.getName());a.zb()&&(a.va().forEach(function(a){this.qc(a.l(),"btree")},this),this.qc(Ae(a),"rowid"))};m.qc=function(a,b){var c=De(this,a);null===c||c.put([new ub(new tb(b))])};
m.close=aa();m.subscribe=aa();m.Hc=aa();function Ee(a){Ce.call(this,a);this.od=null}t(Ee,Ce);Ee.prototype.subscribe=function(a){null===this.od&&(this.od=a)};Ee.prototype.Hc=function(a){null===this.od||this.od(a)};function Fe(a,b,c){this.Wa=a;this.A=b;this.Kb=c}Fe.prototype.get=function(a){var b=this.Kb;return Ge(this.Wa,"SELECT id, value FROM "+this.A+" "+(0==a.length?"":"WHERE id IN ("+a.join(",")+")"),[],function(a){for(var d=a.rows.length,e=Array(d),g=0;g<d;++g)e[g]=b({id:a.rows.item(g).id,value:JSON.parse(a.rows.item(g).value)});return e})};
Fe.prototype.put=function(a){if(0==a.length)return w();var b="INSERT OR REPLACE INTO "+this.A+"(id, value) VALUES (?, ?)";a.forEach(function(a){Ge(this.Wa,b,[a.id(),JSON.stringify(a.s)])},this);return w()};Fe.prototype.remove=function(a){Ge(this.Wa,"DELETE FROM "+this.A+" "+(0==a.length?"":"WHERE id IN ("+a.join(",")+")"),[]);return w()};function He(a,b,c){Lb.call(this,b,c);this.j=a;this.L=B();this.Id=[]}t(He,Lb);function Ie(a){return a.replace(".","__d__").replace("#","__s__")}He.prototype.H=function(a,b){var c=this.L.get(a)||null;null===c&&(c=new Fe(this,Ie(a),b),this.L.set(a,c));return c};function Ge(a,b,c,d){var e=x();a.Id.push({pg:b,fg:c,transform:d,X:e});return e.ga}
He.prototype.oc=function(){var a=null,b=this.X.reject.bind(this.X),c=function(a,b){this.X.reject(b)}.bind(this),d=[],e=function(b,h){if(null!==a){var k=h;null!=a.transform&&null!=h&&(k=a.transform(h));d.push(k);a.X.resolve(k)}0<this.Id.length?(a=k=this.Id.shift(),b.executeSql(k.pg,k.fg,e,c)):this.X.resolve(d)}.bind(this);0==this.kf?this.j.readTransaction(e,b):this.j.transaction(e,b);return this.X.ga};function O(a,b,c){this.j=c;this.h=a;this.Oa=b}r("lf.backstore.WebSqlRawBackStore",O);O.prototype.gd=f("j");O.prototype.getRawDBInstance=O.prototype.gd;O.prototype.hd=function(){throw new E(356);};O.prototype.getRawTransaction=O.prototype.hd;function Je(a){return new He(a.j,new Vc(a.h,D()),1)}O.prototype.rc=function(a){var b=Je(this);Ge(b,"DROP TABLE "+a,[]);return b.ia()};O.prototype.dropTable=O.prototype.rc;
O.prototype.cc=function(a){var b=Je(this);Ge(b,"SELECT id, value FROM "+a,[]);return b.ia().then(function(a){for(var b=a[0].rows.length,e=Array(b),g=0;g<b;++g)e[g]={id:a[0].rows.item(g).id,value:JSON.parse(a[0].rows.item(g).value)};return w(e)})};function Ke(a,b,c){var d=Je(a),e="UPDATE "+b+" SET value=? WHERE id=?";return a.cc(b).then(function(a){a.forEach(function(a){a=c(a);Ge(d,e,[JSON.stringify(a.value),a.id])});return d.ia()})}
O.prototype.mc=function(a,b,c){var d=se(c);return Ke(this,a,function(a){a.value[b]=d;return a})};O.prototype.addTableColumn=O.prototype.mc;O.prototype.sc=function(a,b){return Ke(this,a,function(a){delete a.value[b];return a})};O.prototype.dropTableColumn=O.prototype.sc;O.prototype.Nc=function(a,b,c){return Ke(this,a,function(a){a.value[c]=a.value[b];delete a.value[b];return a})};O.prototype.renameTableColumn=O.prototype.Nc;O.prototype.sb=function(a){var b={},c;for(c in a)b[c]=se(a[c]);return rb(b)};
O.prototype.createRow=O.prototype.sb;O.prototype.Cc=f("Oa");O.prototype.getVersion=O.prototype.Cc;function Le(a){Ge(a,'SELECT tbl_name FROM sqlite_master WHERE type="table"',[],function(a){for(var c=Array(a.rows.length),d=0;d<c.length;++d)c[d]=a.rows.item(d).tbl_name;return c})}
O.prototype.dump=function(){var a=x(),b=Je(this);Le(b);var c={};b.ia().then(function(b){b=b[0].filter(function(a){return"__lf_ver"!=a&&"__WebKitDatabaseInfoTable__"!=a}).map(function(a){return this.cc(a).then(function(b){c[a]=b})},this);cb(b).then(function(){a.resolve(c)})}.bind(this));return a.ga};O.prototype.dump=O.prototype.dump;function Me(a,b,c){this.h=a;this.m=b;this.og=c||4194304}function Ne(a){return new Vc(a.h,D())}m=Me.prototype;m.Ea=function(a){if(null==window.openDatabase)throw new E(353);var b=a||function(){return w()};return new v(function(a,d){try{var e=window.openDatabase(this.m.name(),"",this.m.name(),this.og);if(null!=e)this.j=e,Oe(this,b).then(a,d);else throw new E(354);}catch(g){d(g)}},this)};
function Oe(a,b){var c=x(),d=new He(a.j,Ne(a),1);Ge(d,"CREATE TABLE IF NOT EXISTS __lf_ver(id INTEGER PRIMARY KEY, v INTEGER)",[]);Ge(d,"SELECT v FROM __lf_ver WHERE id = 0",[]);d.ia().then(function(a){var d=0;a[1].rows.length&&(d=a[1].rows.item(0).v);d<this.m.version()?this.be(b,d).then(c.resolve.bind(c)):d>this.m.version()?c.reject(new E(108)):c.resolve()}.bind(a));return c.ga}m.Cb=function(a,b){if(null!=this.j)return new He(this.j,b,a);throw new E(2);};m.close=aa();
m.Ac=function(){throw new E(512);};m.subscribe=function(){throw new E(355);};m.Hc=function(){throw new E(355);};m.be=function(a,b){var c=x();Pe(this).then(function(){a(new O(this.h,b,this.j)).then(function(){return this.ie()}.bind(this)).then(c.resolve.bind(c))}.bind(this),c.reject.bind(c));return c.ga};
function Pe(a){var b=a.m.ra(),c=new He(a.j,Ne(a),1),d=new He(a.j,Ne(a),1);Ge(c,"INSERT OR REPLACE INTO __lf_ver VALUES (0, ?)",[a.m.version()]);Le(c);return c.ia().then(function(a){function c(a,b){Ge(d,"INSERT INTO "+a+"(id, value) VALUES(?, ?)",[-1,JSON.stringify(pb(new ub(new tb(b))))])}var h=a[1];h.filter(function(a){return-1!=a.indexOf("__d__")}).forEach(function(a){Ge(d,"DROP TABLE "+a,[])});var k=[],n=[],z=[];b.map(function(a){-1==h.indexOf(a.getName())&&k.push(a.getName());a.zb&&(a.va().forEach(function(a){a=
Ie(a.l());k.push(a);n.push(a)}),a=Ie(Ae(a)),k.push(a),z.push(a))});k.forEach(function(a){Ge(d,"CREATE TABLE "+a+"(id INTEGER PRIMARY KEY, value TEXT)",[])});n.forEach(function(a){c(a,"btree")});z.forEach(function(a){c(a,"rowid")});return d.ia()})}
m.ie=function(){var a=0,b=x(),c=function(b){var c=new He(this.j,Ne(this),0);Ge(c,"SELECT MAX(id) FROM "+b,[]);return c.ia().then(function(b){b=b[0].rows.item(0)[0];a=Math.max(b,a)})}.bind(this),d=this.m.ra().map(function(a){return c(a.getName())});cb(d).then(function(){b.resolve(a)},function(a){b.reject(a)});return b.ga};function Qe(a){this.o=B();this.Yb=B();a.ra().forEach(function(a){this.Yb.set(a.getName(),D())},this)}m=Qe.prototype;m.set=function(a,b){this.o.set(b.id(),b);this.Yb.get(a).add(b.id())};m.wd=function(a,b){var c=this.Yb.get(a);b.forEach(function(a){this.o.set(a.id(),a);c.add(a.id())},this)};m.get=function(a){return this.o.get(a)||null};function Re(a,b){return b.map(function(a){return this.get(a)},a)}
m.Za=function(a,b,c){var d=[],e=Math.min(b,c),g=Math.max(b,c);a=this.Yb.get(a);if(a.size<g-e)a.forEach(function(a){a>=e&&a<=g&&(a=this.o.get(a),d.push(a))},this);else for(b=e;b<=g;++b)a.has(b)&&(c=this.o.get(b),d.push(c));return d};m.remove=function(a,b){this.o.delete(b);this.Yb.get(a).delete(b)};m.yc=function(a){return null!=a?this.Yb.get(a).size:this.o.size};m.clear=function(){this.o.clear();this.Yb.clear()};function Se(a,b,c){var d=0,e=a.length;for(c=c||Te;d<e;){var g=d+e>>1;0>c(a[g],b)?d=g+1:e=g}return d==e&&a[d]==b?d:~d}function Te(a,b){return a-b}function Ue(a,b,c){c=Se(a,b,c);return 0>c?(a.splice(-(c+1),0,b),!0):!1};function Ve(a,b,c,d){a=b?a.reverse():a;if(null==c&&null==d)return a;c=Math.min(q(c)?c:a.length,a.length);if(0==c)return[];d=Math.min(d||0,a.length);return a.slice(d,d+c)};function We(){this.na=0}We.prototype.add=function(a,b){this.na+=b};We.prototype.remove=function(a,b){this.na-=b};We.prototype.clear=function(){this.na=0};function Xe(a,b){a.clear();b.forEach(function(a){this.na+=a.na},a)};function Ye(a,b,c,d){this.A=a;this.U=b;this.me=c;this.nb=new We;if(d){a=511;a*=a*a;if(d.length>=a)throw new E(6,a);d=Ze(this,d);this.qa=d=$e(d)}else this.clear()}var af=[];m=Ye.prototype;m.getName=f("A");m.toString=function(){return this.qa.toString()};m.add=function(a,b){this.qa=this.qa.wb(a,b)};m.set=function(a,b){this.qa=this.qa.wb(a,b,!0)};m.remove=function(a,b){this.qa=this.qa.remove(a,b)};m.get=function(a){return this.qa.get(a)};
m.bd=function(a){if(null==a)return this.Na().na;if(a instanceof Zc){if(dd(a))return this.Na().na;if(ed(a))return this.get(a.c).length}return this.Za([a]).length};m.Na=f("nb");m.xc=function(a,b,c,d){c=Array(a);this.qa.fill({offset:b?this.nb.na-a-d:d,count:a,le:0},c);return b?c.reverse():c};
m.Za=function(a,b,c,d){var e=bf(this.qa).b[0];if(!q(e)||0==c)return af;b=b||!1;c=null!=c?Math.min(c,this.nb.na):this.nb.na;d=d||0;var g=Math.min(Math.max(this.nb.na-d,0),c);if(0==g)return af;if(!q(a)||1==a.length&&a[0]instanceof Zc&&dd(a[0]))return this.xc(g,b,c,d);a=this.U.ff(a);var h=Array(b?this.nb.na:g),k={count:0,W:h.length,reverse:b,N:d};a.forEach(function(a){for(var b=this.U.td(a),b=this.U.Sd(a)?e:b[0],b=cf(this.qa,b),c=k.count,d=0;null!=b&&k.count<k.W;)b.Za(a,k,h),k.count!=c?(d=0,c=k.count):
d++,b=2==d?null:b.next()},this);h.splice(k.count,g-k.count);return b?Ve(h,b,c,d):h};m.clear=function(){this.qa=df(this);this.nb.clear()};m.La=function(a){return this.qa.La(a)};m.min=function(){return this.Gc(this.U.min.bind(this.U))};m.max=function(){return this.Gc(this.U.max.bind(this.U))};m.Gc=function(a){var b=bf(this.qa),c=ef(this.qa);if(0==b.b.length&&0==c.b.length)return null;var d=b.b[0],b=b.B[0],e=c.b[c.b.length-1],c=c.B[c.b.length-1];return 1==a(d,e)?[d,this.me?[b]:b]:[e,this.me?[c]:c]};
m.Ga=f("me");m.pc=f("U");m.Wd=function(a,b){return null!=a?-1==this.U.compare(a,b):!1};m.Qa=function(a,b){return null!=a?0==this.U.compare(a,b):!1};m.Ia=function(){for(var a=[],b=bf(this.qa);b;)a.push(new y(b.oa,[b.b,b.B])),b=b.xa;return a};function ff(a,b,c,d){a=new Ye(b,a,c);d=gf(d,a);a.qa=d;return a}function hf(a,b){this.oa=a;this.F=b;this.hb=0;this.xa=this.Ab=this.C=null;this.b=[];this.B=[];this.g=[]}function df(a){return new hf(ob++,a)}function P(a){return 0==a.hb}m=hf.prototype;m.next=f("xa");
function jf(a){function b(a){return null!=a?a.oa.toString():"_"}var c=a.oa+"["+a.b.join("|")+"]",d=a.g.map(function(a){return a.oa}).join("|"),e=a.B.join("/"),g=b(a.Ab)+"{",g=P(a)?g+e:g+d,g=g+"}"+b(a.C);a.xa&&(a=jf(a.xa),c=c+"  "+a[0],g=g+"  "+a[1]);return[c,g]}m.toString=function(){var a="",b=jf(this),a=a+(b[0]+"\n"+b[1]+"\n");this.g.length&&(a+=this.g[0].toString());return a};function bf(a){return P(a)?a:bf(a.g[0])}function ef(a){return P(a)?a:ef(a.g[a.g.length-1])}
function kf(a,b){b&&(b.Ab=a);a&&(a.xa=b)}function Ze(a,b){for(var c=b.length,d=0,e=df(a),g=e;0<c;){var h=768<=c?511:257<=c&&511>=c?c:257,k=b.slice(d,d+h);e.b=k.map(function(a){return a.key});e.B=k.map(function(a){return a.value});d+=h;c-=h;0<c&&(h=df(e.F),kf(e,h),e=h)}return g}function mf(a){var b=a[0],c=df(b.F);c.hb=b.hb+1;c.g=a;for(b=0;b<a.length;++b)a[b].C=c,0<b&&c.b.push(a[b].b[0]);return c}
function $e(a){var b=a,c=[];do c.push(b),b=b.xa;while(b);if(512>=c.length)b=mf(c);else{var d=c.length,e=0,b=df(a.F);for(b.hb=a.hb+2;0<d;){a=768<=d?511:257<=d&&511>=d?d:257;var g=c.slice(e,e+a),h=mf(g);h.C=b;b.g.length&&(b.b.push(g[0].b[0]),kf(b.g[b.g.length-1],h));b.g.push(h);e+=a;d-=a}}return b}m.get=function(a){var b=nf(this,a);if(P(this)){var c=af;this.F.Qa(this.b[b],a)&&(c=c.concat(this.B[b]));return c}b=this.F.Qa(this.b[b],a)?b+1:b;return this.g[b].get(a)};
m.La=function(a){var b=nf(this,a);return this.F.Qa(this.b[b],a)?!0:P(this)?!1:this.g[b].La(a)};m.remove=function(a,b){of(this,a,-1,b);if(null==this.C){var c=this;1==this.g.length&&(c=this.g[0],c.C=null);return c}return this};function pf(a){return P(a)?a.b[0]:pf(a.g[0])}function qf(a){a.b=[];for(var b=1;b<a.g.length;++b)a.b.push(pf(a.g[b]))}
function of(a,b,c,d){var e=nf(a,b),g=P(a);if(!g){var h=a.F.Qa(a.b[e],b)?e+1:e;if(of(a.g[h],b,h,d))qf(a);else return!1}else if(!a.F.Qa(a.b[e],b))return!1;if(a.b.length>e&&a.F.Qa(a.b[e],b)){if(q(d)&&!a.F.Ga()&&g&&(h=a.B[e],d=Se(h,d,void 0),0>d?d=!1:(h.splice(d,1),d=!0),d&&a.F.Na().remove(b,1),a.B[e].length))return!1;a.b.splice(e,1);g&&(g=a.F.Ga()?1:a.B[e].length,a.B.splice(e,1),a.F.Na().remove(b,g))}if(256>a.b.length&&null!=a.C){a:{b=null;if(a.xa&&256<a.xa.b.length)b=a.xa,e=d=0,g=a.b.length+1;else if(a.Ab&&
256<a.Ab.b.length)b=a.Ab,d=a.Ab.b.length-1,e=P(a)?d:d+1,g=0;else{b=!1;break a}a.b.splice(g,0,b.b[d]);b.b.splice(d,1);d=P(a)?a.B:a.g;h=null;P(a)?h=b.B:(h=b.g,h[e].C=a);d.splice(g,0,h[e]);h.splice(e,1);P(b)||(qf(b),qf(a));b=!0}b||rf(a,c)}return!0}
function rf(a,b){var c,d,e;a.xa&&511>a.xa.b.length?(c=a.xa,e=d=0):a.Ab&&(c=a.Ab,d=c.b.length,e=P(c)?c.B.length:c.g.length);d=[d,0].concat(a.b);Array.prototype.splice.apply(c.b,d);d=null;P(a)?d=a.B:(d=a.g,d.forEach(function(a){a.C=c}));d=[e,0].concat(d);Array.prototype.splice.apply(P(c)?c.B:c.g,d);kf(a.Ab,a.xa);P(c)||qf(c);-1!=b&&(a.C.b.splice(b,1),a.C.g.splice(b,1))}
m.wb=function(a,b,c){var d=nf(this,a);if(P(this)){if(this.F.Qa(this.b[d],a)){if(c)this.F.Na().remove(a,this.F.Ga()?1:this.B[d].length),this.B[d]=this.F.Ga()?b:[b];else{if(this.F.Ga())throw new E(201);if(!Ue(this.B[d],b))throw new E(109);}this.F.Na().add(a,1);return this}this.b.splice(d,0,a);this.B.splice(d,0,this.F.Ga()?b:[b]);this.F.Na().add(a,1);512==this.b.length?(d=df(this.F),a=df(this.F),a.hb=1,a.b=[this.b[256]],a.g=[this,d],a.C=this.C,this.C=a,d.b=this.b.splice(256),d.B=this.B.splice(256),d.C=
a,kf(d,this.xa),kf(this,d),d=a):d=this;return d}d=this.F.Qa(this.b[d],a)?d+1:d;a=this.g[d].wb(a,b,c);P(a)||1!=a.b.length||(this.b.splice(d,0,a.b[0]),a.g[1].C=this,a.g[0].C=this,this.g.splice(d,1,a.g[1]),this.g.splice(d,0,a.g[0]));return 512==this.b.length?sf(this):this};function sf(a){var b=df(a.F),c=df(a.F);b.C=a.C;b.hb=a.hb+1;b.b=[a.b[256]];b.g=[a,c];a.b.splice(256,1);c.C=b;c.hb=a.hb;c.b=a.b.splice(256);c.g=a.g.splice(257);c.g.forEach(function(a){a.C=c});a.C=b;kf(c,a.xa);kf(a,c);return b}
function nf(a,b){for(var c=0,d=a.b.length;c<d;){var e=c+d>>1;a.F.Wd(a.b[e],b)?c=e+1:d=e}return c}function cf(a,b){if(!P(a)){var c=nf(a,b);a.F.Qa(a.b[c],b)&&c++;return cf(a.g[c],b)}return a}
m.Za=function(a,b,c){function d(a){return a[0]?a[1]?0:1:-1}var e=this.F.pc(),g=0,h=this.b.length-1,k=this.b,n=d(e.rb(k[g],a)),z=d(e.rb(k[h],a));if(1!=n&&(-1!=n||-1!=z)){var ga=function(a,b){var c=a+b>>1;return c==a?c+1:c},na=function(b,c,g){if(b>=c)return 0==g?c:-1;var h=d(e.rb(k[b],a));if(0==h)return b;if(1==h)return-1;h=ga(b,c);if(h==c)return 0==g?c:-1;var n=d(e.rb(k[h],a));return 0==n?na(b,h,n):-1==n?na(h+1,c,g):na(b+1,h,n)},Xa=function(b,c){if(b>=c)return b;var g=d(e.rb(k[c],a));if(0==g)return c;
if(-1==g)return b;g=ga(b,c);if(g==c)return b;var h=d(e.rb(k[g],a));return 0==h?Xa(g,c):1==h?Xa(b,g-1):-1};0!=n&&(g=na(g+1,h,z));-1!=g&&(h=Xa(g,h),-1!=h&&h>=g&&tf(this,b,c,g,h+1))}};function tf(a,b,c,d,e){for(;d<e&&(b.reverse||!(b.count>=b.W));++d)if(a.F.Ga())!b.reverse&&b.N?b.N--:c[b.count++]=a.B[d];else for(var g=0;g<a.B[d].length&&b.count<c.length;++g)!b.reverse&&b.N?b.N--:c[b.count++]=a.B[d][g]}
m.fill=function(a,b){if(P(this))for(var c=0;c<this.B.length&&0<a.count;++c)if(0<a.offset){if(a.offset-=this.F.Ga()?1:this.B[c].length,0>a.offset)for(var d=this.B[c].length+a.offset;d<this.B[c].length&&0<a.count;++d)b[a.le++]=this.B[c][d],a.count--}else if(this.F.Ga())b[a.le++]=this.B[c],a.count--;else for(d=0;d<this.B[c].length&&0<a.count;++d)b[a.le++]=this.B[c][d],a.count--;else for(c=0;c<this.g.length&&0<a.count;++c)this.g[c].fill(a,b)};
function gf(a,b){for(var c=b.Na(),d=a.map(function(a){var d=new hf(a.id(),b);d.b=a.s[0];d.B=a.s[1];d.b.forEach(function(a,e){c.add(a,b.Ga()?1:d.B[e].length)});return d}),e=0;e<d.length-1;++e)kf(d[e],d[e+1]);return 1<d.length?$e(d[0]):d[0]};function uf(a){if(1==a.f.length)return new vf(a.f[0].jb);a=a.f.map(function(a){return a.jb});return new wf(a)}function vf(a){this.ad=0==a?xf:yf;this.Xd=0==a?function(a){return null!=a?a.reverse():null}:function(a){return a||null};this.ce=0==a?zf:Af}t(vf,vc);function yf(a,b){return a>b?1:a<b?-1:0}function xf(a,b){return yf(b,a)}function Af(a,b){return fd(a,b)}function zf(a,b){return fd(b,a)}m=vf.prototype;
m.rb=function(a,b){var c=this.Xd(b),d=[null===c.c,null===c.u];if(!d[0]){var e=this.ad(a,c.c);d[0]=c.ca?1==e:-1!=e}d[1]||(e=this.ad(a,c.u),d[1]=c.ma?-1==e:1!=e);return d};m.compare=function(a,b){return this.ad(a,b)};m.min=function(a,b){return a<b?1:a==b?0:-1};m.max=function(a,b){return a>b?1:a==b?0:-1};m.Rd=function(a,b){var c=this.rb(a,b);return c[0]&&c[1]};m.ff=function(a){return a.filter(function(a){return null!==a}).sort(function(a,c){return this.ce(a,c)}.bind(this))};m.Sd=function(a){return ea(this.Xd(a).c)};
m.td=function(a){a=this.Xd(a);return[a.c,a.u]};m.toString=function(){return this.ad==xf?"SimpleComparator_DESC":"SimpleComparator_ASC"};function wf(a){this.Ka=a.map(function(a){return new vf(a)})}t(wf,vc);function Bf(a,b,c,d){for(var e=0,g=0;g<a.Ka.length&&0==e;++g)e=d(a.Ka[g],b[g],c[g]);return e}m=wf.prototype;m.compare=function(a,b){return Bf(this,a,b,function(a,b,e){return a.compare(b,e)})};m.min=function(a,b){return Bf(this,a,b,function(a,b,e){return a.min(b,e)})};
m.max=function(a,b){return Bf(this,a,b,function(a,b,e){return a.max(b,e)})};m.rb=function(a,b){for(var c=[!0,!0],d=0;d<this.Ka.length&&(c[0]||c[1]);++d){var e=this.Ka[d].rb(a[d],b[d]);c[0]=c[0]&&e[0];c[1]=c[1]&&e[1]}return c};m.Rd=function(a,b){for(var c=!0,d=0;d<this.Ka.length&&c;++d)c=this.Ka[d].Rd(a[d],b[d]);return c};
m.ff=function(a){var b=a.filter(function(a){return a.every(fa)});a=Array(this.Ka.length);for(var c=0;c<a.length;c++)a[c]=b.map(function(a){return a[c]});a.forEach(function(a,b){a.sort(function(a,c){return this.Ka[b].ce(a,c)}.bind(this))},this);b=Array(b.length);for(c=0;c<b.length;c++)b[c]=a.map(function(a){return a[c]});return b.sort(function(a,b){for(var c=0,h=0;h<this.Ka.length&&0==c;++h)c=this.Ka[h].ce(a[h],b[h]);return c}.bind(this))};m.Sd=function(a){return this.Ka[0].Sd(a[0])};
m.td=function(a){var b=a.map(function(a,b){return this.Ka[b].td(a)[0]},this);a=a.map(function(a,b){return this.Ka[b].td(a)[1]},this);return[b,a]};function Cf(a){this.ea=a;this.ib=D();this.Pc=new We;this.nb=new We}m=Cf.prototype;m.getName=function(){return this.ea.getName()};m.add=function(a,b){null===a?(this.ib.add(b),this.Pc.add(a,1)):this.ea.add(a,b)};m.set=function(a,b){null===a?(this.ib.clear(),this.Pc.clear(),this.add(a,b)):this.ea.set(a,b)};m.remove=function(a,b){null===a?b?(this.ib.delete(b),this.Pc.remove(a,1)):(this.ib.clear(),this.Pc.clear()):this.ea.remove(a,b)};m.get=function(a){return null===a?kc(this.ib):this.ea.get(a)};
m.bd=function(a){return this.ea.bd(a)};m.Na=function(){Xe(this.nb,[this.ea.Na(),this.Pc]);return this.nb};m.Za=function(a,b,c,d){b=this.ea.Za(a,b,c,d);return null!=a?b:b.concat(kc(this.ib))};m.clear=function(){this.ib.clear();this.ea.clear()};m.La=function(a){return null===a?0!=this.ib.size:this.ea.La(a)};m.min=function(){return this.ea.min()};m.max=function(){return this.ea.max()};m.Ia=function(){return[new y(-2,kc(this.ib))].concat(this.ea.Ia())};m.pc=function(){return this.ea.pc()};
function Df(a,b){for(var c=-1,d=0;d<b.length;++d)if(-2==b[d].id()){c=d;break}if(-1==c)throw new E(102);var d=b[c].s,e=b.slice(0);e.splice(c,1);var c=a(e),g=new Cf(c);d.forEach(function(a){g.ib.add(a)});return g}m.Ga=function(){return this.ea.Ga()};function Ef(a){this.A=a;this.mb=D();this.U=new vf(1)}m=Ef.prototype;m.getName=f("A");m.add=function(a){if("number"!=typeof a)throw new E(103);this.mb.add(a)};m.set=function(a,b){this.add(a,b)};m.remove=function(a){this.mb.delete(a)};m.get=function(a){return this.La(a)?[a]:[]};m.min=function(){return this.Gc(this.U.min.bind(this.U))};m.max=function(){return this.Gc(this.U.max.bind(this.U))};
m.Gc=function(a){if(0==this.mb.size)return null;var b=kc(this.mb).reduce(function(b,d){return null===b||1==a(d,b)?d:b},null);return[b,[b]]};m.bd=function(){return this.mb.size};m.Za=function(a,b,c,d){var e=a||[cd()];a=kc(this.mb).filter(function(a){return e.some(function(b){return this.U.Rd(a,b)},this)},this);return Ve(a,b,c,d)};m.clear=function(){this.mb.clear()};m.La=function(a){return this.mb.has(a)};m.Ia=function(){return[new y(0,kc(this.mb))]};m.pc=f("U");
function Ff(a,b){var c=new Ef(a);b[0].s.forEach(function(a){c.add(a,a)});return c}m.Ga=l(!0);m.Na=function(){var a=new We;a.na=this.mb.size;return a};function Gf(a){this.h=a;this.Ja=a.i(Sb);this.D=a.i(Ub);this.ba=a.i(Tb)}Gf.prototype.Ea=function(a){var b=a.ra(),c=function(){if(0==b.length)return w();var a=b.shift();return(a.zb()?Hf(this,a):If(this,a)).then(c)}.bind(this);return c()};function If(a,b){var c=new Vc(a.h,D([b])),c=a.Ja.Cb(0,c),d=c.H(b.getName(),b.Lb.bind(b)).get([]).then(function(a){this.ba.wd(b.getName(),a);Jf(this,b,a)}.bind(a));c.ia();return d}
function Jf(a,b,c){var d=a.D.ic.get(b.getName())||[];c.forEach(function(a){d.forEach(function(b){var c=a.Eb(b.getName());b.add(c,a.id())})})}function Hf(a,b){var c=new Vc(a.h,D([b])),d=a.Ja.Cb(0,c),c=d.H(b.getName(),b.Lb).get([]).then(function(a){this.ba.wd(b.getName(),a)}.bind(a)),e=b.va().map(function(a){return Kf(this,a,d)},a).concat(Lf(a,b,d));d.ia();return cb(e.concat(c))}
function Kf(a,b,c){c=c.H(b.l(),qb,1);var d=uf(b);return c.get([]).then(function(a){if(1<a.length){if(Mf(b)){var c=ff.bind(void 0,d,b.l(),b.Ec);a=Df(c,a.slice(1))}else a=ff(d,b.l(),b.Ec,a.slice(1));this.D.set(b.Qc,a)}}.bind(a))}function Lf(a,b,c){return c.H(Ae(b),qb,1).get([]).then(function(a){1<a.length&&(a=Ff(Ae(b),a.slice(1)),this.D.set(b.getName(),a))}.bind(a))};function Nf(){this.aa=B();this.ic=B()}Nf.prototype.Ea=function(a){a.ra().forEach(function(a){var c=[];this.ic.set(a.getName(),c);var d=Ae(a);if(null===this.get(d)){var e=new Ef(d);c.push(e);this.aa.set(d,e)}a.va().forEach(function(a){var b;b=uf(a);b=new Ye(a.l(),b,a.Ec);b=Mf(a)?new Cf(b):b;c.push(b);this.aa.set(a.l(),b)},this)},this);return w()};Nf.prototype.get=function(a){return this.aa.get(a)||null};
Nf.prototype.set=function(a,b){var c=this.ic.get(a)||null;null===c&&(c=[],this.ic.set(a,c));for(var d=null,e=0;e<c.length;e++)if(c[e].getName()==b.getName()){d=e;break}null!==d&&0<c.length?c.splice(d,1,b):c.push(b);this.aa.set(b.getName(),b)};function Of(a){this.hc=[];q(a)&&this.add(a)}Of.prototype.toString=function(){return this.hc.map(function(a){return a.toString()}).join(",")};Of.prototype.La=function(a){return this.hc.some(function(b){return b.contains(a)})};Of.prototype.wa=f("hc");
Of.prototype.add=function(a){if(0!=a.length)if(a=this.hc.concat(a),1==a.length)this.hc=a;else{a.sort(fd);for(var b=[],c=a[0],d=1;d<a.length;++d)if(ad(c,a[d])){var e=a[d],g=cd();if(null!==c.c&&null!==e.c){var h=bd(c.c,e.c,!0);1!=h?(g.c=c.c,g.ca=0!=h?c.ca:c.ca&&e.ca):(g.c=e.c,g.ca=e.ca)}null!==c.u&&null!==e.u&&(h=bd(c.u,e.u,!1),-1!=h?(g.u=c.u,g.ma=0!=h?c.ma:c.ma&&e.ma):(g.u=e.u,g.ma=e.ma));c=g}else b.push(c),c=a[d];b.push(c);this.hc=b}};
function Rf(a,b){var c=[];a.wa().map(function(a){return b.wa().map(function(b){var c;if(ad(a,b)){c=cd();var h=bd(a.c,b.c,!0),h=0==h?a.ca?a:b:-1!=h?a:b;c.c=h.c;c.ca=h.ca;null===a.u||null===b.u?b=null===a.u?b:a:(h=bd(a.u,b.u,!1),b=0==h?a.ma?a:b:-1==h?a:b);c.u=b.u;c.ma=b.ma}else c=null;return c})}).forEach(function(a){c=c.concat(a)});return new Of(c.filter(function(a){return null!==a}))};function Sf(a,b){var c=[],d=null,e=null;Gd(a,function(a){var h=b(a);null==a.getParent()?e=h:L(d,h);var k=a.getParent();null!==k&&K(k).length==K(d).length&&(k=c.indexOf(d),-1!=k&&c.splice(k,1));1<K(a).length&&c.push(h);d=null===a.g?c[c.length-1]:h});return e}function Tf(a){return Uf(a,function(a){return null===a.g})}
function Vf(a){var b=a.getParent(),c=0;null!==b&&(c=K(b).indexOf(a),b.removeChild(a));var d=K(a).slice();d.forEach(function(d,g){a.removeChild(d);null===b||Dd(b,d,c+g)});return{parent:b,children:d}}function Wf(a,b){K(a).slice().forEach(function(c){a.removeChild(c);L(b,c)});L(a,b)}function Xf(a){var b=Cd(a,0);Vf(a);Wf(b,a);return b}
function Yf(a,b,c){var d=Cd(a,0),e=K(d).slice();if(!e.some(function(a){return b(a)}))return a;Vf(a);e.forEach(function(e,h){if(b(e)){var k=c(a);Ed(d,h);L(k,e);Dd(d,k,h)}});return d}function Zf(a,b,c,d){var e=a.getParent();null!==e&&(a=K(e).indexOf(a),Ed(e,a),Dd(e,c,a));K(b).slice().forEach(function(a){b.removeChild(a);L(d,a)});return c}function Uf(a,b,c){function d(a){b(a)&&e.push(a);null!=c&&c(a)||K(a).forEach(d)}var e=[];d(a);return e}
function $f(a,b){var c=b||function(a){return a.toString()+"\n"},d="";Gd(a,function(a){for(var b=0;b<Bd(a);b++)d+="-";d+=c(a)});return d};function ag(a){Hd.call(this);this.Rb=a;this.$a=!1}t(ag,Hd);m=ag.prototype;m.Jb=function(){return Sf(this,function(a){if(a instanceof ag){var b=new ag(a.Rb);b.$a=a.$a;a=a.V();b.oa=a;return b}return a.Jb()})};m.fb=function(a){var b=a||[];Gd(this,function(a){a!=this&&a.fb(b)}.bind(this));a=D(b);return kc(a)};m.vd=function(a){this.$a!=a&&(this.$a=a,this.Rb="and"==this.Rb?"or":"and",K(this).forEach(function(b){return b.vd(a)}))};
m.eval=function(a){var b=K(this).map(function(b){return b.eval(a)});return bg(this,b)};function bg(a,b){return"and"==a.Rb?ld(b):md(b)}m.toString=function(){return"combined_pred_"+this.Rb.toString()};function cg(){this.o=B();this.size=0}m=cg.prototype;m.has=function(a){return this.o.has(a)};m.set=function(a,b){var c=this.o.get(a)||null;null===c&&(c=D(),this.o.set(a,c));c.has(b)||(c.add(b),this.size++);return this};m.wd=function(a,b){var c=this.o.get(a)||null;null===c&&(c=D(),this.o.set(a,c));b.forEach(function(a){c.has(a)||(c.add(a),this.size++)},this);return this};
m.delete=function(a,b){var c=this.o.get(a,null);if(null===c)return!1;var d=c.delete(b);d&&(--this.size,0==c.size&&this.o.delete(a));return d};m.get=function(a){a=this.o.get(a)||null;return null===a?null:kc(a)};m.clear=function(){this.o.clear();this.size=0};m.keys=function(){return Jb(this.o)};m.values=function(){var a=[];this.o.forEach(function(b){a.push.apply(a,kc(b))});return a};function dg(a,b,c){Hd.call(this);this.fa=a;this.la=b;this.G=c;this.Yd=null;a=td.zc();this.tc=zd(a,this.fa.I(),this.G);this.Uf=a.Le.get(this.fa.I())||null}t(dg,Hd);m=dg.prototype;m.Jb=function(){var a=new dg(this.fa,this.la,this.G),b=this.V();a.oa=b;return a};m.fb=function(a){return null!=a?(a.push(this.fa),a.push(this.la),a):[this.fa,this.la]};
m.reverse=function(){var a=this.G;switch(this.G){case "gt":a="lt";break;case "lt":a="gt";break;case "gte":a="lte";break;case "lte":a="gte"}return new dg(this.la,this.fa,a)};m.eval=function(a){var b=a.entries.filter(function(a){var b=H(a,this.fa);a=H(a,this.la);return this.tc(b,a)},this);return new F(b,G(a))};m.toString=function(){return"join_pred("+this.fa.l()+" "+this.G+" "+this.la.l()+")"};
function eg(a,b,c){var d=null,e=null;-1!=G(b).indexOf(I(a.fa.H()))?(d=b,e=c):(d=c,e=b);if(d.entries.length>e.entries.length){a:{b=a.fa;a.fa=a.la;a.la=b;b=a.G;switch(a.G){case "gt":b="lt";break;case "lt":b="gt";break;case "gte":b="lte";break;case "lte":b="gte";break;default:break a}a.G=b;a.tc=zd(td.zc(),a.fa.I(),a.G)}return[e,d]}return[d,e]}function fg(a){var b={};a.fb().forEach(function(a){b[a.getName()]=null});return b}
function gg(a,b,c){null===a.Yd&&(a.Yd=fg(a.la.H()));var d=new od(new y(-1,a.Yd),!1);return rd(b,c,d,[I(a.la.H())])}
function hg(a,b,c,d){var e=[b,c];d||(e=eg(a,b,c));b=e[0];c=e[1];var e=b,g=c,h=a.fa,k=a.la;d&&(e=c,g=b,h=a.la,k=a.fa);var n=new cg,z=[];e.entries.forEach(function(a){var b=String(H(a,h));n.set(b,a)});var ga=G(e),na=G(g);g.entries.forEach(function(a){var b=H(a,k),c=String(b);null!==b&&n.has(c)?n.get(c).forEach(function(b){b=rd(a,na,b,ga);z.push(b)}):d&&z.push(gg(this,a,na))}.bind(a));a=G(b).concat(G(c));return new F(z,a)}
function ig(a,b,c,d,e){function g(a,b){var c=new od(b,1<ga.length),c=rd(a,na,c,ga);z.push(c)}var h=d.Nf.H(),k=b,n=c;-1!=G(b).indexOf(I(h))&&(k=c,n=b);var z=[],ga=G(n),na=G(k);k.entries.forEach(function(a){var b=this.Uf(H(a,d.$f)),b=d.index.get(b);0!=b.length&&(d.index.Ga()?g(a,e.get(b[0])):Re(e,b).forEach(g.bind(null,a)))},a);a=G(k).concat(G(n));return new F(z,a)};function jg(a,b,c){return null===b?new Jd(a,b,c):q(b.l)?new dg(a,b,c):new Jd(a,b,c)};var kg={};r("lf.schema.DataStoreType",kg);kg.INDEXED_DB=0;kg.MEMORY=1;kg.LOCAL_STORAGE=2;kg.FIREBASE=3;kg.WEB_SQL=4;kg.OBSERVABLE_STORE=5;function lg(a,b,c,d){this.Qc=a;this.name=b;this.Ec=c;this.f=d}lg.prototype.l=function(){return this.Qc+"."+this.name};function Mf(a){return a.f.some(function(a){return a.ha.Dc()})}function Q(a,b,c,d){this.A=a;this.ka=c;this.K=b;this.qd=d;this.cb=null}r("lf.schema.Table",Q);Q.prototype.getName=f("A");Q.prototype.getName=Q.prototype.getName;Q.prototype.Ya=f("cb");
function I(a){return a.cb||a.A}Q.prototype.nc=function(a){var b=new this.constructor(this.A);b.cb=a;b.kg=this.kg;return b};Q.prototype.as=Q.prototype.nc;Q.prototype.createRow=Q.prototype.sb;Q.prototype.deserializeRow=Q.prototype.Lb;Q.prototype.va=f("ka");Q.prototype.getIndices=Q.prototype.va;Q.prototype.fb=f("K");Q.prototype.getColumns=Q.prototype.fb;Q.prototype.getConstraint=Q.prototype.Db;Q.prototype.zb=f("qd");Q.prototype.persistentIndex=Q.prototype.zb;function Ae(a){return a.A+".#"};function R(a,b){this.child=a;this.Ib=b;this.cb=null}m=R.prototype;m.getName=function(){return this.Ib+"("+this.child.getName()+")"};m.l=function(){return this.Ib+"("+this.child.l()+")"};m.H=function(){return this.child.H()};m.toString=function(){return this.l()};m.I=function(){return this.child.I()};m.Ya=f("cb");m.va=function(){return[]};m.ua=l(null);m.Dc=l(!1);m.nc=function(a){this.cb=a;return this};R.prototype.as=R.prototype.nc;
function mg(a){for(var b=[a];a instanceof R;)b.push(a.child),a=a.child;return b}function ng(a){this.cb=a||null;this.S=new Q("#UnknownTable",[],[],!1)}m=ng.prototype;m.getName=l("*");m.l=function(){return this.getName()};m.toString=function(){return this.l()};m.H=f("S");m.I=l(4);m.Ya=f("cb");m.va=function(){return[]};m.ua=l(null);m.Dc=l(!1);r("lf.fn.avg",function(a){return new R(a,"AVG")});function og(a){return new R(a||new ng,"COUNT")}r("lf.fn.count",og);function pg(a){return new R(a,"DISTINCT")}r("lf.fn.distinct",pg);r("lf.fn.max",function(a){return new R(a,"MAX")});r("lf.fn.min",function(a){return new R(a,"MIN")});r("lf.fn.stddev",function(a){return new R(a,"STDDEV")});r("lf.fn.sum",function(a){return new R(a,"SUM")});r("lf.fn.geomean",function(a){return new R(a,"GEOMEAN")});function S(a,b){J.call(this);this.Ff=b}t(S,J);S.prototype.exec=function(a,b){switch(this.Ff){case 1:return qg(this,a,b);case 0:return rg(this,a,b);default:return sg(this,a,b)}};S.prototype.toString=l("dummy_node");S.prototype.Rc=function(){return this.toString()};function sg(a,b,c){return new v(function(a){a(this.da(b,[],c))}.bind(a))}function qg(a,b,c){return Cd(a,0).exec(b,c).then(function(a){return this.da(b,a,c)}.bind(a))}
function rg(a,b,c){var d=K(a).map(function(a){return a.exec(b,c)});return cb(d).then(function(a){var d=[];a.forEach(function(a){for(var b=0;b<a.length;++b)d.push(a[b])});return this.da(b,d,c)}.bind(a))};function tg(a){S.call(this,0,1);this.se=a}t(tg,S);tg.prototype.toString=function(){return"aggregation("+this.se.map(function(a){return a.l()}).toString()+")"};tg.prototype.da=function(a,b){b.forEach(function(a){ug(new vg(a,this.se))},this);return b};function vg(a,b){this.Ha=a;this.K=b}
function ug(a){a.K.forEach(function(a){a=mg(a).reverse();for(var c=1;c<a.length;c++){var d=a[c],e=mg(d).slice(-1)[0],g=d.child instanceof R?id(this.Ha,d.child):this.Ha;if(null!==g.Xa&&g.Xa.has(d.l()))break;g=wg(d.Ib,g,e);e=this.Ha;null===e.Xa&&(e.Xa=B());e.Xa.set(d.l(),g)}},a)}
function wg(a,b,c){var d=null;switch(a){case "MIN":d=xg(b,c,function(a,b){return b<a?b:a});break;case "MAX":d=xg(b,c,function(a,b){return b>a?b:a});break;case "DISTINCT":d=yg(b,c);break;case "COUNT":d=zg(b,c);break;case "SUM":d=Ag(b,c);break;case "AVG":a=zg(b,c);0<a&&(d=Ag(b,c)/a);break;case "GEOMEAN":d=Bg(b,c);break;default:d=Cg(b,c)}return d}function xg(a,b,c){return a.entries.reduce(function(a,e){var g=H(e,b);return null===g?a:null===a?g:c(a,g)},null)}
function zg(a,b){return b instanceof ng?a.entries.length:a.entries.reduce(function(a,d){return a+(ea(H(d,b))?0:1)},0)}function Ag(a,b){return xg(a,b,function(a,b){return b+a})}function Cg(a,b){var c=[];a.entries.forEach(function(a){a=H(a,b);null===a||c.push(a)});return 0==c.length?null:zb.apply(null,c)}function Bg(a,b){var c=0,d=a.entries.reduce(function(a,d){var h=H(d,b);if(0==h||null===h)return a;c++;return a+Math.log(h)},0);return 0==c?null:Math.pow(Math.E,d/c)}
function yg(a,b){var c=B();a.entries.forEach(function(a){var e=H(a,b);c.set(e,a)});return new F(C(c),G(a))};function Dg(a,b){this.Aa=a;this.$=b}Dg.prototype.gb=f("Aa");Dg.prototype.Z=f("$");function Eg(){J.call(this)}t(Eg,J);function Fg(a,b){J.call(this);this.table=a;this.values=b}t(Fg,Eg);function Gg(a,b){Fg.call(this,a,b)}t(Gg,Fg);function Hg(a){J.call(this);this.table=a}t(Hg,Eg);Hg.prototype.toString=function(){return"delete("+this.table.getName()+")"};function Ig(a,b){J.call(this);this.table=a;this.ne=b}t(Ig,Eg);
Ig.prototype.toString=function(){var a=[];this.ne&&(a=this.ne.map(function(a){return a.O.getName()},this));return"update("+this.table.getName()+", ["+a.join(",")+"])"};function Jg(a){J.call(this);this.J=a}t(Jg,Eg);Jg.prototype.toString=function(){return"select("+this.J.toString()+")"};function Kg(a){J.call(this);this.table=a}t(Kg,Eg);Kg.prototype.toString=function(){var a="table_access("+this.table.getName();null===this.table.Ya()||(a+=" as "+this.table.Ya());return a+")"};
function Lg(){J.call(this)}t(Lg,Eg);Lg.prototype.toString=l("cross_product");function Mg(a,b){J.call(this);this.f=a;this.Nb=b}t(Mg,Eg);Mg.prototype.toString=function(){var a="project("+this.f.toString();if(null!==this.Nb)var b=this.Nb.map(function(a){return a.l()}).join(", "),a=a+(", groupBy("+b+")");return a+")"};function Ng(a){J.call(this);this.M=a}t(Ng,Eg);Ng.prototype.toString=function(){return"order_by("+Sd(this.M)+")"};function Og(a){J.call(this);this.f=a}t(Og,Eg);
Og.prototype.toString=function(){return"aggregation("+this.f.toString()+")"};function Pg(a){J.call(this);this.f=a}t(Pg,Eg);Pg.prototype.toString=function(){return"group_by("+this.f.toString()+")"};function Qg(a){J.call(this);this.W=a}t(Qg,Eg);Qg.prototype.toString=function(){return"limit("+this.W+")"};function Rg(a){J.call(this);this.N=a}t(Rg,Eg);Rg.prototype.toString=function(){return"skip("+this.N+")"};function Sg(a,b){J.call(this);this.J=a;this.Pb=b}t(Sg,Eg);
Sg.prototype.toString=function(){return"join(type: "+(this.Pb?"outer":"inner")+", "+this.J.toString()+")"};function Tg(){};function Ug(){}t(Ug,Tg);Ug.prototype.lb=function(a){this.Y=a;this.Va(this.Y);return this.Y};Ug.prototype.Va=function(a){if(a instanceof Jg){var b=Vg(this,a.J),b=Wg(this,b);Zf(a,a,b[0],b[1]);a==this.Y&&(this.Y=b[0]);a=b[0]}K(a).forEach(function(a){this.Va(a)},this)};function Vg(a,b){if(0==K(b).length||"and"!=b.Rb)return[b];var c=K(b).slice().map(function(a){b.removeChild(a);return Vg(this,a)},a);return Ca(c)}
function Wg(a,b){var c=null,d=null;b.map(function(a,b){var h=new Jg(a);0==b?c=h:L(d,h);d=h},a);return[c,d]};function Xg(){}t(Xg,Tg);Xg.prototype.lb=function(a,b){if(3>b.c.length)return a;this.Y=a;this.Va(this.Y);return this.Y};Xg.prototype.Va=function(a){if(a instanceof Lg)for(;2<K(a).length;){for(var b=new Lg,c=0;2>c;c++){var d=Ed(a,0);L(b,d)}Dd(a,b,0)}K(a).forEach(function(a){this.Va(a)},this)};function Yg(){S.call(this,0,0)}t(Yg,S);Yg.prototype.toString=l("cross_product");Yg.prototype.da=function(a,b){for(var c=b[0],d=b[1],e=[],g=G(c),h=G(d),k=0;k<c.entries.length;k++)for(var n=0;n<d.entries.length;n++){var z=rd(c.entries[k],g,d.entries[n],h);e.push(z)}c=G(c).concat(G(d));return[new F(e,c)]};function Zg(a,b){Vd.call(this,a,b);this.Ba=a.i(Xb);this.Fb=a.i(Yb)}t(Zg,Vd);Zg.prototype.getPriority=l(2);Zg.prototype.ae=function(a){0==this.I()?$g(this,a):this.Oc()};function $g(a,b){a.sd.forEach(function(a,d){a instanceof Rd&&Yd(this.Fb,a,b[d])},a)}Zg.prototype.Oc=function(){var a=$d(this.Fb,this.Z());0!=a.length&&(a=new Xd(this.global,a),ae(this.Ba,a))};function ah(a){Md.call(this,a)}t(ah,Md);ah.prototype.Z=function(){var a=D();a.add(this.c);var b=this.ha.info();bh(this.c.getName(),b.g).forEach(a.add.bind(a));return a};ah.prototype.clone=function(){var a=new ah(this.ha);Pd(a,this);a.c=this.c;return a};ah.prototype.bind=function(a){ah.Hb.bind.call(this,a);Qd(this,a);return this};function ch(a){Md.call(this,a)}t(ch,Md);ch.prototype.Z=function(){var a=D();a.add(this.Fa);var b=this.ha.info();bh(this.Fa.getName(),b.Te).forEach(a.add.bind(a));this.Zb&&bh(this.Fa.getName(),b.g).forEach(a.add.bind(a));return a};ch.prototype.clone=function(){var a=new ch(this.ha);Pd(a,this);a.Fa=this.Fa;this.values&&(a.values=this.values instanceof sd?this.values:this.values.slice());a.Zb=this.Zb;a.$b=this.$b;return a};
ch.prototype.bind=function(a){ch.Hb.bind.call(this,a);this.$b&&(this.values=this.$b instanceof sd?a[this.$b.ua()]:this.$b.map(function(b){return b instanceof sd?a[b.ua()]:b}));return this};function dh(a){Md.call(this,a)}t(dh,Md);dh.prototype.Z=function(){var a=D();a.add(this.table);var b=this.set.map(function(a){return a.O.l()}),c=this.ha.info();eh(c,b).forEach(a.add.bind(a));fh(c,b).forEach(a.add.bind(a));return a};dh.prototype.clone=function(){var a=new dh(this.ha);Pd(a,this);a.table=this.table;a.set=this.set?this.set.slice():this.set;return a};dh.prototype.bind=function(a){dh.Hb.bind.call(this,a);this.set.forEach(function(b){-1!=b.Wc&&(b.value=a[b.Wc])});Qd(this,a);return this};function gh(a,b){if(null==b)return"NULL";switch(a){case 1:return b?1:0;case 3:case 4:return b;case 0:return"'"+sb(b)+"'";default:return"'"+b.toString()+"'"}}function hh(a,b){var c=a.Zb?"INSERT OR REPLACE":"INSERT",d=a.Fa.fb(),c=c+(" INTO "+a.Fa.getName()+"("),c=c+d.map(function(a){return a.getName()}).join(", "),c=c+") VALUES (";return a.values.map(function(a){var g=d.map(function(c){var d=a.s[c.getName()];return b?null!=d?"#":"NULL":gh(c.I(),d)});return c+g.join(", ")+");"}).join("\n")}
function ih(a){switch(a){case "between":return"BETWEEN";case "eq":return"=";case "gte":return">=";case "gt":return">";case "in":return"IN";case "lte":return"<=";case "lt":return"<";case "match":return"LIKE";case "neq":return"<>";default:return"UNKNOWN"}}function jh(a,b,c,d){return a instanceof sd?"?"+a.ua().toString():d?null!=a?"#":"NULL":"match"==b?"'"+a.toString()+"'":"in"==b?"("+a.map(function(a){return gh(c,a)}).join(", ")+")":"between"==b?gh(c,a[0])+" AND "+gh(c,a[1]):gh(c,a).toString()}
function kh(a,b){return K(a).map(function(a){return"("+lh(a,b)+")"}).join("and"==a.Rb?" AND ":" OR ")}function mh(a){return[a.fa.l(),ih(a.G),a.la.l()].join(" ")}function lh(a,b){if(a instanceof Jd){var c=a.O.l(),d=ih(a.G),e=jh(a.value,a.G,a.O.I(),b);return"="==d&&"NULL"==e?[c,"IS NULL"].join(" "):"<>"==d&&"NULL"==e?[c,"IS NOT NULL"].join(" "):[c,d,e].join(" ")}if(a instanceof ag)return kh(a,b);if(a instanceof dg)return mh(a);throw new E(357,typeof a);}
function nh(a,b){var c=lh(a,b);return c?" WHERE "+c:""}function oh(a,b){var c="UPDATE "+a.table.getName()+" SET ",c=c+a.set.map(function(a){var b=a.O.l()+" = ";return-1!=a.Wc?b+"?"+a.Wc.toString():b+gh(a.O.I(),a.value).toString()}).join(", ");a.w&&(c+=nh(a.w,b));return c+";"}
function ph(a,b){var c="*";a.f.length&&(c=a.f.map(function(a){return a.Ya()?a.l()+" AS "+a.Ya():a.l()}).join(", "));c="SELECT "+c+" FROM ";null!=a.xb&&0!=a.xb.size?c+=qh(a,b):(c+=a.c.map(rh).join(", "),a.w&&(c+=nh(a.w,b)));if(a.M)var d=a.M.map(function(a){return a.O.l()+(0==a.jb?" DESC":" ASC")}).join(", "),c=c+(" ORDER BY "+d);a.ja&&(d=a.ja.map(function(a){return a.l()}).join(", "),c+=" GROUP BY "+d);a.W&&(c+=" LIMIT "+a.W.toString());a.N&&(c+=" SKIP "+a.N.toString());return c+";"}
function rh(a){return I(a)!=a.getName()?a.getName()+" AS "+I(a):a.getName()}function qh(a,b){for(var c=Uf(a.w,function(a){return a instanceof dg}),d=c.map(mh),e=rh(a.c[0]),g=1;g<a.c.length;g++)var h=rh(a.c[g]),e=a.xb.has(c[d.length-g].V())?e+(" LEFT OUTER JOIN "+h):e+(" INNER JOIN "+h),e=e+(" ON ("+d[d.length-g]+")");c=Cd(a.w,0);c instanceof dg||(e+=" WHERE "+lh(c,b));return e}
function sh(a,b){var c=b||!1,d=a.a.clone();if(d instanceof ch)return hh(d,c);if(d instanceof ah){var e="DELETE FROM "+d.c.getName();d.w&&(e+=nh(d.w,c));return e+";"}if(d instanceof dh)return oh(d,c);if(d instanceof Rd)return ph(d,c);throw new E(358,typeof d);};function T(a,b){this.global=a;this.jg=a.i(Vb);this.Ba=a.i(Xb);this.a=b}r("lf.query.BaseBuilder",T);T.prototype.exec=function(){try{this.eb()}catch(a){return $a(a)}return new v(function(a,c){var d=new Zg(this.global,[this.Bc()]);ae(this.Ba,d).then(function(c){a(gd(c[0]))},c)},this)};T.prototype.exec=T.prototype.exec;T.prototype.Hf=function(){var a=function(a){return a.Rc(this.a)+"\n"}.bind(this);return $f(th(this).gb(),a)};T.prototype.explain=T.prototype.Hf;
T.prototype.bind=function(a){this.a.bind(a);return this};T.prototype.bind=T.prototype.bind;T.prototype.qg=function(a){return sh(this,a)};T.prototype.toSql=T.prototype.qg;T.prototype.eb=aa();function th(a){if(null==a.Ue){var b;b=a.jg;var c=a.a,d=b.Xf.create(c);b=b.gg.create(d,c);a.Ue=b}return a.Ue}T.prototype.Bc=function(){return{context:this.a.clone(),de:th(this)}};function uh(a){T.call(this,a,new ah(a.i(Zb)))}t(uh,T);r("lf.query.DeleteBuilder",uh);uh.prototype.c=function(a){if(null!=this.a.c)throw new E(515);this.a.c=a;return this};uh.prototype.from=uh.prototype.c;uh.prototype.w=function(a){this.Dd();this.a.w=a;return this};uh.prototype.where=uh.prototype.w;uh.prototype.Dd=function(){if(null==this.a.c)throw new E(548);if(null!=this.a.w)throw new E(516);};uh.prototype.eb=function(){uh.Hb.eb.call(this);if(null==this.a.c)throw new E(517);};function vh(a,b){T.call(this,a,new ch(a.i(Zb)));this.a.Zb=b||!1}t(vh,T);r("lf.query.InsertBuilder",vh);vh.prototype.eb=function(){vh.Hb.eb.call(this);var a=this.a;if(null==a.Fa||null==a.values)throw new E(518);if(a.Zb&&null===a.Fa.Db().fd())throw new E(519);};vh.prototype.Fa=function(a){if(null!=this.a.Fa)throw new E(520);this.a.Fa=a;return this};vh.prototype.into=vh.prototype.Fa;
vh.prototype.values=function(a){if(null!=this.a.values)throw new E(521);a instanceof sd||a.some(function(a){return a instanceof sd})?this.a.$b=a:this.a.values=a;return this};vh.prototype.values=vh.prototype.values;function wh(a){return xh("and",Array.prototype.slice.call(arguments))}r("lf.op.and",wh);r("lf.op.or",function(a){return xh("or",Array.prototype.slice.call(arguments))});function xh(a,b){var c=new ag(a);b.forEach(function(a){L(c,a)});return c}r("lf.op.not",function(a){a.vd(!0);return a});function U(a,b){T.call(this,a,new Rd(a.i(Zb)));this.Be=this.yd=!1;this.a.f=b;yh(this);zh(this)}t(U,T);r("lf.query.SelectBuilder",U);U.prototype.eb=function(){U.Hb.eb.call(this);var a=this.a;if(null==a.c)throw new E(522);if(q(a.Qb)&&!q(a.W)||q(a.Xb)&&!q(a.N))throw new E(523);null!=this.a.ja?Ah(this):Bh(this)};function yh(a){var b=a.a.f.filter(function(a){return a instanceof R&&"DISTINCT"==a.Ib},a);if(0!=b.length&&(1!=b.length||1!=a.a.f.length))throw new E(524);}
function Ah(a){var b=a.a.f.filter(function(a){return!(a instanceof R)}).map(function(a){return a.l()}),c=!1;if(0==a.a.ja.length||0==a.a.f.length)c=!0;else{var d=a.a.ja.map(function(a){return a.l()});(c=b.some(function(a){return-1==d.indexOf(a)}))||(c=a.a.ja.some(function(a){a=a.I();return 6==a||0==a}))}if(c)throw new E(525);}function Bh(a){var b=a.a.f.some(function(a){return a instanceof R},a);a=a.a.f.some(function(a){return!(a instanceof R)},a)||0==a.a.f.length;if(b&&a)throw new E(526);}
function zh(a){a.a.f.forEach(function(a){if(a instanceof R&&!Ch(a.Ib,a.I()))throw new E(527,a.l());},a)}function Dh(a,b){if(null==a.a.c)throw new E(b);}U.prototype.c=function(a){if(this.Be)throw new E(515);this.Be=!0;null==this.a.c&&(this.a.c=[]);this.a.c.push.apply(this.a.c,Array.prototype.slice.call(arguments));return this};U.prototype.from=U.prototype.c;U.prototype.w=function(a){Dh(this,548);if(this.yd)throw new E(516);this.yd=!0;Eh(this,a);return this};U.prototype.where=U.prototype.w;
function Eh(a,b){if(null!=a.a.w){var c=wh(b,a.a.w);a.a.w=c}else a.a.w=b}U.prototype.Qf=function(a,b){Dh(this,542);if(this.yd)throw new E(547);this.a.c.push(a);Eh(this,b);return this};U.prototype.innerJoin=U.prototype.Qf;U.prototype.Vf=function(a,b){Dh(this,542);if(!(b instanceof dg))throw new E(541);if(this.yd)throw new E(547);this.a.c.push(a);null==this.a.xb&&(this.a.xb=D());var c=b;I(a)!=I(b.la.H())&&(c=b.reverse());this.a.xb.add(c.V());Eh(this,c);return this};U.prototype.leftOuterJoin=U.prototype.Vf;
U.prototype.W=function(a){if(null!=(this.a.W||this.a.Qb))throw new E(528);if(a instanceof sd)this.a.Qb=a;else{if(0>a)throw new E(531);this.a.W=a}return this};U.prototype.limit=U.prototype.W;U.prototype.N=function(a){if(null!=(this.a.N||this.a.Xb))throw new E(529);if(a instanceof sd)this.a.Xb=a;else{if(0>a)throw new E(531);this.a.N=a}return this};U.prototype.skip=U.prototype.N;U.prototype.M=function(a,b){Dh(this,549);null==this.a.M&&(this.a.M=[]);this.a.M.push({O:a,jb:null!=b?b:1});return this};
U.prototype.orderBy=U.prototype.M;U.prototype.ja=function(a){Dh(this,549);if(null!=this.a.ja)throw new E(530);null==this.a.ja&&(this.a.ja=[]);this.a.ja.push.apply(this.a.ja,Array.prototype.slice.call(arguments));return this};U.prototype.groupBy=U.prototype.ja;function Ch(a,b){switch(a){case "COUNT":case "DISTINCT":return!0;case "AVG":case "GEOMEAN":case "STDDEV":case "SUM":return 4==b||3==b;case "MAX":case "MIN":return 4==b||3==b||5==b||2==b}return!1}
U.prototype.clone=function(){var a=new U(this.global,this.a.f);a.a=this.a.clone();a.a.$c=null;return a};U.prototype.clone=U.prototype.clone;function Fh(a,b){T.call(this,a,new dh(a.i(Zb)));this.a.table=b}t(Fh,T);r("lf.query.UpdateBuilder",Fh);Fh.prototype.set=function(a,b){var c={Wc:b instanceof sd?b.ua():-1,O:a,value:b};null!=this.a.set?this.a.set.push(c):this.a.set=[c];return this};Fh.prototype.set=Fh.prototype.set;Fh.prototype.w=function(a){this.Dd();this.a.w=a;return this};Fh.prototype.where=Fh.prototype.w;Fh.prototype.Dd=function(){if(null!=this.a.w)throw new E(516);};
Fh.prototype.eb=function(){Fh.Hb.eb.call(this);if(null==this.a.set)throw new E(532);if(this.a.set.some(function(a){return a.value instanceof sd}))throw new E(501);};function Gh(a){this.a=a;this.Aa=null}Gh.prototype.fc=function(){null===this.Aa&&(this.Aa=this.dd());return this.Aa};function Hh(a){Gh.call(this,a)}t(Hh,Gh);Hh.prototype.dd=function(){return this.a.Zb?new Gg(this.a.Fa,this.a.values):new Fg(this.a.Fa,this.a.values)};function Ih(a){Gh.call(this,a)}t(Ih,Gh);Ih.prototype.dd=function(){var a=new Ig(this.a.table,this.a.set),b=null!=this.a.w?new Jg(this.a.w.Jb()):null,c=new Kg(this.a.table);null===b?L(a,c):(L(b,c),L(a,b));return a};function Jh(a,b,c){this.Aa=a;this.ee=b;this.Ub=c}Jh.prototype.fc=function(){this.Ub.forEach(function(a){this.Aa=a.lb(this.Aa,this.ee)},this);return this.Aa};function Kh(a,b){Gh.call(this,a);this.Ub=b}t(Kh,Gh);Kh.prototype.dd=function(){var a=new Hg(this.a.c),b=null!=this.a.w?new Jg(this.a.w.Jb()):null,c=new Kg(this.a.c);null===b?L(a,c):(L(b,c),L(a,b));return(new Jh(a,this.a,this.Ub)).fc()};function Lh(){}t(Lh,Tg);Lh.prototype.lb=function(a,b){if(2>b.c.length)return a;this.Y=a;this.Va(this.Y,b);return this.Y};Lh.prototype.Va=function(a,b){if(a instanceof Jg&&a.J instanceof dg){var c=a.J.V(),d=Cd(a,0);d instanceof Lg&&(c=null!=b.xb&&b.xb.has(c),c=new Sg(a.J,c),Zf(a,d,c,c),a==this.Y&&(this.Y=c),a=c)}K(a).forEach(function(a){this.Va(a,b)},this)};function Mh(){this.Vc=D()}t(Mh,Tg);Mh.prototype.lb=function(a,b){this.Vc.clear();if(!q(b.w))return a;this.Y=a;this.Va(this.Y);this.Vc.clear();return this.Y};Mh.prototype.Va=function(a){if(Nh(a)){var b=a.J instanceof Jd?Oh(this,a):Ph(this,a);this.Vc.add(a);b==a&&(b=Cd(a,0));null!==b&&(ea(b.getParent())&&(this.Y=b),Nh(b)&&!this.Vc.has(b)&&this.Va(b))}else K(a).forEach(function(a){this.Va(a)},this)};
function Qh(a,b,c){var d=b;if(Cd(b,0)instanceof Jg)d=Xf(b),Qh(a,b,c);else if(Rh(b)){var e=[],d=Yf(b,c,function(a){a=new Jg(a.J);e.push(a);return a});e.forEach(function(a){Qh(this,a,c)},a)}return d}function Oh(a,b){var c=D([I(b.J.O.H())]),d=function(a){return Sh(this,a,c)}.bind(a);return Qh(a,b,d)}function Ph(a,b){var c=D([I(b.J.fa.H()),I(b.J.la.H())]),d=function(a){return Sh(this,a,c)}.bind(a);return Qh(a,b,d)}
function Sh(a,b,c){var d=D();Tf(b).forEach(function(a){d.add(I(a.table))},a);b instanceof Kg&&d.add(I(b.table));return lc(d,c)}function Nh(a){return a instanceof Jg&&!(a.J instanceof ag)}function Rh(a){a=Cd(a,0);return a instanceof Lg||a instanceof Sg};function Th(a,b){Gh.call(this,a);this.Ub=b;this.Ye=this.Pe=this.ef=this.Se=this.te=this.Ee=this.df=this.ye=this.gf=null}t(Th,Gh);
Th.prototype.dd=function(){Uh(this);2<=this.a.c.length&&(this.ye=new Lg);this.df=null!=this.a.w?new Jg(this.a.w.Jb()):null;this.a.M&&(this.Se=new Ng(this.a.M));null!=this.a.N&&0<this.a.N&&(this.ef=new Rg(this.a.N));null!=this.a.W&&(this.Pe=new Qg(this.a.W));null!=this.a.ja&&(this.Ee=new Pg(this.a.ja));Vh(this);this.Ye=new Mg(this.a.f||[],this.a.ja||null);var a=Wh(this);return(new Jh(a,this.a,this.Ub)).fc()};
function Wh(a){for(var b=[a.Pe,a.ef,a.Ye,a.Se,a.te,a.Ee,a.df,a.ye],c=null,d=null,e=0;e<b.length;e++){var g=b[e];null!==g&&(null===d?d=g:L(b[c],g),c=e)}a.gf.forEach(function(a){L(b[c],a)});return d}function Uh(a){a.gf=a.a.c.map(function(a){return new Kg(a)},a)}function Vh(a){var b=a.a.f.filter(function(a){return a instanceof R});null!=a.a.M&&a.a.M.forEach(function(a){a.O instanceof R&&b.push(a.O)});0<b.length&&(a.te=new Og(b))};function Xh(){this.je=[new Ug,new Xg,new Mh,new Lh];this.Jd=[new Ug]}Xh.prototype.create=function(a){var b=null;if(a instanceof ch)b=new Hh(a);else if(a instanceof ah)b=new Kh(a,this.Jd);else if(a instanceof Rd)b=new Th(a,this.je);else if(a instanceof dh)b=new Ih(a);else throw new E(513);b=b.fc();return new Dg(b,a.Z())};function Yh(a){S.call(this,0,1);this.S=a}t(Yh,S);Yh.prototype.toString=function(){return"delete("+this.S.getName()+")"};Yh.prototype.da=function(a,b){var c=b[0].entries.map(function(a){return a.sa});a.remove(this.S,c);return[kd()]};function Zh(a,b){S.call(this,0,-1);this.table=b;this.D=a.i(Ub)}t(Zh,S);Zh.prototype.toString=function(){return"get_row_count("+this.table.getName()+")"};Zh.prototype.da=function(){var a=this.D.get(Ae(this.table)),b=new F([],[this.table.getName()]),c=og(),a=a.Na().na;null===b.Xa&&(b.Xa=B());b.Xa.set(c.l(),a);return[b]};function $h(a,b){S.call(this,0,-1);this.ba=a.i(Tb);this.D=a.i(Ub);this.table=b}t($h,S);$h.prototype.toString=function(){var a="table_access("+this.table.getName();null===this.table.Ya()||(a+=" as "+this.table.Ya());return a+")"};$h.prototype.da=function(){var a=this.D.get(Ae(this.table)).Za();return[nd(Re(this.ba,a),[I(this.table)])]};function ai(a){this.h=a}t(ai,Tg);ai.prototype.lb=function(a,b){this.Y=a;if(!this.Ed(b))return a;var c=Uf(a,function(a){return a instanceof $h})[0],d=new Zh(this.h,c.table);Zf(c,c,d,d);return this.Y};ai.prototype.Ed=function(a){return 1==a.f.length&&1==a.c.length&&null==a.w&&null==a.W&&null==a.N&&null==a.ja?(a=a.f[0],a instanceof R&&"COUNT"==a.Ib&&a.child instanceof ng):!1};function bi(a){S.call(this,0,1);this.De=a}t(bi,S);bi.prototype.toString=function(){return"groupBy("+this.De.map(function(a){return a.l()}).toString()+")"};bi.prototype.da=function(a,b){return ci(this,b[0])};function ci(a,b){var c=new cg,d=function(a){return this.De.map(function(b){return H(a,b)},this).join(",")}.bind(a);b.entries.forEach(function(a){c.set(d(a),a)},a);return c.keys().map(function(a){return new F(c.get(a),G(b))},a)};function di(a,b,c){S.call(this,0,0);this.D=a.i(Ub);this.ba=a.i(Tb);this.J=b;this.Pb=c;this.Bd="eq"==this.J.G?0:2;this.Fe=null}t(di,S);var ei=["hash","index_nested_loop","nested_loop"];di.prototype.toString=function(){return"join(type: "+(this.Pb?"outer":"inner")+", impl: "+ei[this.Bd]+", "+this.J.toString()+")"};
di.prototype.da=function(a,b){switch(this.Bd){case 0:return[hg(this.J,b[0],b[1],this.Pb)];case 1:return[ig(this.J,b[0],b[1],this.Fe,this.ba)];default:var c=this.J,d=b[0],e=b[1],g=this.Pb,h=[d,e];g||(h=eg(c,d,e));for(var d=h[0],e=h[1],h=[],k=G(d),n=G(e),z=d.entries.length,ga=e.entries.length,na=ga+256-1>>8,Xa=0;Xa<na;){for(var Wb=0;Wb<z;Wb++){var Pf=!1,Qf=H(d.entries[Wb],c.fa);if(null!==Qf)for(var gi=Math.min(Xa+1<<8,ga),Pc=Xa<<8;Pc<gi;Pc++)if(c.tc(Qf,H(e.entries[Pc],c.la))){var Pf=!0,hj=rd(d.entries[Wb],
k,e.entries[Pc],n);h.push(hj)}g&&!Pf&&h.push(gg(c,d.entries[Wb],k))}Xa++}c=G(d).concat(G(e));return[new F(h,c)]}};function fi(a,b){a.Bd=1;var c=a.D.get(b.ua().l());a.Fe={Nf:b,$f:b==a.J.fa?a.J.la:a.J.fa,index:c}};function hi(a){S.call(this,0,-1);this.$e=a}t(hi,S);hi.prototype.toString=function(){return"no_op_step("+G(this.$e[0]).join(",")+")"};hi.prototype.da=f("$e");function ii(){}t(ii,Tg);ii.prototype.lb=function(a,b){this.Y=a;if(!this.Ed(b))return a;Uf(a,function(a){return a instanceof di}).forEach(this.ig,this);return this.Y};ii.prototype.Ed=function(a){return 1<a.c.length};
ii.prototype.ig=function(a){if("eq"==a.J.G&&!a.Pb){var b=function(b){if(!(b instanceof $h))return null;b=I(b.table)==I(a.J.la.H())?a.J.la:a.J.fa;return ea(b.ua())?null:b},c=b(Cd(a,0)),b=b(Cd(a,1));if(null!==c||null!==b){b=null===b?c:b;fi(a,b);var d=new F([],[I(b.H())]);Fd(a,new hi([d]),b==c?0:1)}}};function ji(a){a=a.map(function(a){return a.wa()});a=Eb.apply(null,a);var b=[];Db(a,function(a){b.push(a)});return b}function ki(a){this.Ob=a}ki.prototype.ed=function(){return 1==this.Ob.f.length?[cd()]:[this.Ob.f.map(function(){return cd()})]};function li(a,b){this.Ob=a;this.za=b;this.Hd=this.Ne=null}
function mi(a,b){var c=B();a.za.keys().forEach(function(a){var e=this.za.get(a).map(function(a){return Nd(b,a)},this),g=new Of([cd()]);e.forEach(function(a){var b=null;"between"==a.G?b=new Zc(a.value[0],a.value[1],!1,!1):"eq"==a.G?(b=a.value,b=new Zc(b,b,!1,!1)):b="gte"==a.G?new Zc(a.value,null,!1,!1):"gt"==a.G?new Zc(a.value,null,!0,!1):"lte"==a.G?new Zc(null,a.value,!1,!1):new Zc(null,a.value,!1,!0);a=a.$a?$c(b):[b];a=new Of(a);g=Rf(g,a)});c.set(a,g)},a);return c}
li.prototype.ed=function(a){if(this.Ne==a)return this.Hd;for(var b=mi(this,a),c=this.Ob.f.length-1;0<=c;c--){var d=this.Ob.f[c];if(null!==(b.get(d.ha.getName())||null))break;b.set(d.ha.getName(),new Of([cd()]))}this.Hd=1==this.Ob.f.length?C(b)[0].wa():ji(ni(this,b));this.Ne=a;return this.Hd};function ni(a,b){var c=B(),d=0;a.Ob.f.forEach(function(a){c.set(a.ha.getName(),d);d++});return Jb(b).sort(function(a,b){return c.get(a)-c.get(b)}).map(function(a){return b.get(a)})};function oi(a,b){this.hf=b;this.D=a.i(Ub)}function pi(a,b,c){c=c.filter(a.Rf,a);if(0==c.length)return null;a=qi(a,c);if(0==a.length)return null;if(1==a.length)return a[0];var d=Number.MAX_VALUE;return a.reduce(function(a,c){var h=ri(c,b);return h<d?(d=h,c):a},null)}
function qi(a,b){return a.hf.va().map(function(a){a=new si(this.D,a);ti(a,b);return a},a).filter(function(a){if(null===a.za)a=!1;else{for(var b=!1,e=!0,g=0;g<a.vb.f.length;g++){var h=a.za.has(a.vb.f[g].ha.getName());if(b&&h){e=!1;break}h||(b=!0)}a=e}return a})}oi.prototype.Rf=function(a){var b;if(b=a instanceof Jd)Kd(a),b=null!==a.value&&("between"==a.G||"eq"==a.G||"gt"==a.G||"gte"==a.G||"lt"==a.G||"lte"==a.G);return b?a.O.H()==this.hf:!1};
function si(a,b){this.D=a;this.vb=b;this.Of=D(this.vb.f.map(function(a){return a.ha.getName()}));this.Vd=this.za=null}function ui(a){null===a.Vd&&(a.Vd=new li(a.vb,a.za));return a.Vd}function ti(a,b){b.forEach(function(a){var b=a.fb()[0].getName();this.Of.has(b)&&(null===this.za&&(this.za=new cg),this.za.set(b,a.V()))},a)}function ri(a,b){var c=ui(a).ed(b),d=a.D.get(a.vb.l());return c.reduce(function(a,b){return a+d.bd(b)},0)};function vi(a,b,c,d){S.call(this,0,-1);this.D=a.i(Ub);this.index=b;this.Me=c;this.he=d;this.Uc=this.Tc=!1}t(vi,S);vi.prototype.toString=function(){return"index_range_scan("+this.index.l()+", ?, "+(this.he?"reverse":"natural")+(this.Tc?", limit:?":"")+(this.Uc?", skip:?":"")+")"};vi.prototype.Rc=function(a){var b=this.toString(),c=this.Me.ed(a),b=b.replace("?",c.toString());this.Tc&&(b=b.replace("?",a.W.toString()));this.Uc&&(b=b.replace("?",a.N.toString()));return b};
vi.prototype.da=function(a,b,c){a=this.Me.ed(c);b=this.D.get(this.index.l());c=(1==a.length&&a[0]instanceof Zc&&ed(a[0])?Ve(b.get(a[0].c),!1,this.Tc?c.W:void 0,this.Uc?c.N:void 0):b.Za(a,this.he,this.Tc?c.W:void 0,this.Uc?c.N:void 0)).map(function(a){return new y(a,{})},this);return[nd(c,[this.index.Qc])]};function wi(a){S.call(this,0,1);this.rd=a}t(wi,S);wi.prototype.toString=l("select(?)");wi.prototype.Rc=function(a){a=Nd(a,this.rd);return this.toString().replace("?",a.toString())};wi.prototype.da=function(a,b,c){return[Nd(c,this.rd).eval(b[0])]};function xi(a,b){S.call(this,0,1);this.ba=a.i(Tb);this.S=b}t(xi,S);xi.prototype.toString=function(){return"table_access_by_row_id("+this.S.getName()+")"};xi.prototype.da=function(a,b){return[nd(Re(this.ba,hd(b[0])),[I(this.S)])]};function yi(a){this.h=a}t(yi,Tg);yi.prototype.lb=function(a,b){this.Y=a;Uf(a,function(a){return a instanceof $h}).forEach(function(a){var d=zi(a);if(0!=d.length){var e=pi(new oi(this.h,a.table),b,d.map(function(a){return Nd(b,a.rd)}));if(null!==e){var g=B();d.forEach(function(a){g.set(a.rd,a)},this);this.Y=Ai(this,e,g,a)}}},this);return this.Y};function zi(a){var b=[];for(a=a.getParent();a;)a instanceof wi&&b.push(a),a=a.getParent();return b}
function Ai(a,b,c,d){(null===b.za?[]:b.za.values()).map(function(a){return c.get(a)}).forEach(Vf);b=new vi(a.h,b.vb,ui(b),!1);a=new xi(a.h,d.table);L(a,b);Zf(d,d,a,b);return b.gb()};function Bi(a,b){S.call(this,0,-1);this.D=a.i(Ub);this.S=b}t(Bi,S);Bi.prototype.toString=function(){return"insert("+this.S.getName()+")"};Bi.prototype.da=function(a,b,c){Ci(this.S,c.values,this.D);a.wb(this.S,c.values);return[nd(c.values,[this.S.getName()])]};function Ci(a,b,c){a=a.Db().fd();if(null===a?0:a.f[0].autoIncrement){var d=a.f[0].ha.getName();c=c.get(a.l()).max();var e=null===c?0:c[0];b.forEach(function(a){if(0==a.s[d]||null==a.s[d])e++,a.s[d]=e})}}
function Di(a,b){S.call(this,0,-1);this.D=a.i(Ub);this.S=b}t(Di,S);Di.prototype.toString=function(){return"insert_replace("+this.S.getName()+")"};Di.prototype.da=function(a,b,c){Ci(this.S,c.values,this.D);a.Qd(this.S,c.values);return[nd(c.values,[this.S.getName()])]};function Ei(){S.call(this,0,1)}t(Ei,S);Ei.prototype.toString=l("limit(?)");Ei.prototype.Rc=function(a){return this.toString().replace("?",a.W.toString())};Ei.prototype.da=function(a,b,c){b[0].entries.splice(c.W);return b};function Fi(a){S.call(this,0,1);this.M=a}t(Fi,S);m=Fi.prototype;m.toString=function(){return"order_by("+Sd(this.M)+")"};m.da=function(a,b){if(1==b.length){var c;c=b[0];for(var d=null,e=0;e<this.M.length;e++){var g=pg(this.M[e].O);if(null!==c.Xa&&c.Xa.has(g.l())){d=g;break}}c=d;(null===c?b[0]:id(b[0],c)).entries.sort(this.Ef.bind(this))}else b.sort(this.lg.bind(this));return b};
m.U=function(a,b){var c=null,d=null,e=null,g=-1;do g++,e=this.M[g].O,c=this.M[g].jb,d=a(e),e=b(e);while(d==e&&g+1<this.M.length);d=d<e?-1:d>e?1:0;return 1==c?d:-d};m.lg=function(a,b){return this.U(function(b){return b instanceof R?id(a,b):H(a.entries[a.entries.length-1],b)},function(a){return a instanceof R?id(b,a):H(b.entries[b.entries.length-1],a)})};m.Ef=function(a,b){return this.U(function(b){return H(a,b)},function(a){return H(b,a)})};function Gi(a,b){this.Ha=a;this.K=b}function Hi(a){return a.K.some(function(a){return a instanceof R},a)?Ii(a):Ji(a)}function Ii(a){if(1==a.K.length&&"DISTINCT"==a.K[0].Ib)return a=id(a.Ha,a.K[0]).entries.map(function(a){var b=new od(new y(-1,{}),1<this.Ha.L.size);qd(b,this.K[0],H(a,this.K[0].child));return b},a),new F(a,[]);var b=new od(new y(-1,{}),1<a.Ha.L.size);a.K.forEach(function(a){var d=a instanceof R?id(this.Ha,a):H(this.Ha.entries[0],a);qd(b,a,d)},a);return new F([b],G(a.Ha))}
function Ji(a){var b=Array(a.Ha.entries.length),c=1<a.Ha.L.size;a.Ha.entries.forEach(function(a,e){b[e]=new od(new y(a.sa.id(),{}),c);this.K.forEach(function(c){qd(b[e],c,H(a,c))},this)},a);return new F(b,G(a.Ha))}function Ki(a,b){var c=a.map(function(a){return Hi(new Gi(a,b)).entries[0]});return new F(c,G(a[0]))};function Li(a,b){S.call(this,0,1);this.f=a;this.Nb=b}t(Li,S);Li.prototype.toString=function(){var a="project("+this.f.toString();if(null!==this.Nb)var b=this.Nb.map(function(a){return a.l()}).join(", "),a=a+(", groupBy("+b+")");return a+")"};Li.prototype.da=function(a,b){var c;0==b.length?c=[kd()]:1==b.length?(c=b[0],c=[0==this.f.length?c:Hi(new Gi(c,this.f))]):c=[Ki(b,this.f)];return c};function Mi(a){return a.f.some(function(a){return a instanceof R})||null!==a.Nb};function Ni(){S.call(this,0,1)}t(Ni,S);Ni.prototype.toString=l("skip(?)");Ni.prototype.Rc=function(a){return this.toString().replace("?",a.N.toString())};Ni.prototype.da=function(a,b,c){return[new F(b[0].entries.slice(c.N),G(b[0]))]};function Oi(){}t(Oi,Tg);Oi.prototype.lb=function(a,b){if(!q(b.W)&&!q(b.N))return a;var c=Pi(a);if(null===c)return a;Uf(a,function(a){return a instanceof Ei||a instanceof Ni}).forEach(function(a){a instanceof Ei?c.Tc=!0:c.Uc=!0;Vf(a)},this);return c.gb()};function Pi(a){a=Uf(a,function(a){return a instanceof vi},function(a){return a instanceof Li&&Mi(a)||a instanceof Fi||1!=K(a).length||a instanceof wi});return 0<a.length?a[0]:null};function Qi(a){this.h=a}t(Qi,Tg);Qi.prototype.lb=function(a,b){var c=Ri(a,b);if(null===c)return a;var d;a:{var e=c;d=Si(Cd(c,0));if(null!==d){var g;g=c.M;for(var h=null,k=d.table.va(),n=0;n<k.length&&null===h;n++)h=Ti(k[n],g);g=h;if(null===g){d=e;break a}e=new vi(this.h,g.vb,new ki(g.vb),g.Je);g=new xi(this.h,d.table);L(g,e);Vf(c);e=Zf(d,d,g,e)}d=e}if(d==c)a:if(d=c,e=Ui(Cd(c,0)),null!==e){g=Ti(e.index,c.M);if(null===g)break a;e.he=g.Je;d=Vf(c).parent}return d.gb()};
function Ui(a){a=Uf(a,function(a){return a instanceof vi},function(a){return 1!=K(a).length});return 0<a.length?a[0]:null}function Si(a){a=Uf(a,function(a){return a instanceof $h},function(a){return 1!=K(a).length});return 0<a.length?a[0]:null}function Ri(a,b){return q(b.M)?Uf(a,function(a){return a instanceof Fi})[0]:null}function Ti(a,b){if(a.f.length!=b.length||!b.every(function(b,c){return b.O.getName()==a.f[c].ha.getName()}))return null;var c=Vi(b,a);return c[0]||c[1]?{vb:a,Je:c[1]}:null}
function Vi(a,b){var c=a.reduce(function(a,b){return a<<1|(0==b.jb?0:1)},0),d=b.f.reduce(function(a,b){return a<<1|(0==b.jb?0:1)},0),d=c^d,c=0==d,d=d==Math.pow(2,Math.max(a.length,b.f.length))-1;return[c,d]};function Wi(a,b,c){this.Aa=a;this.ee=b;this.Ub=c}Wi.prototype.fc=function(){this.Ub.forEach(function(a){this.Aa=a.lb(this.Aa,this.ee)},this);return this.Aa};function Xi(a,b){S.call(this,0,1);this.S=a;this.tg=b}t(Xi,S);Xi.prototype.toString=function(){return"update("+this.S.getName()+")"};Xi.prototype.da=function(a,b){var c=b[0].entries.map(function(a){var b=this.S.Lb(a.sa.Ia());this.tg.forEach(function(a){b.s[a.O.getName()]=a.value},this);return b},this);a.update(this.S,c);return[kd()]};function Yi(a){this.h=a;this.je=[new ii,new yi(this.h),new Qi(this.h),new Oi,new ai(this.h)];this.Jd=[new yi(this.h)]}Yi.prototype.create=function(a,b){var c=a.gb();if(c instanceof Gg||c instanceof Fg)return Zi(this,a,b);if(c instanceof Mg||c instanceof Qg||c instanceof Rg)return Zi(this,a,b,this.je);if(c instanceof Hg||c instanceof Ig)return Zi(this,a,b,this.Jd);throw new E(8);};function Zi(a,b,c,d){a=Sf(b.gb(),a.Zf.bind(a));null!=d&&(a=(new Wi(a,c,d)).fc());return new Td(a,b.Z())}
Yi.prototype.Zf=function(a){if(a instanceof Mg)return new Li(a.f,a.Nb);if(a instanceof Pg)return new bi(a.f);if(a instanceof Og)return new tg(a.f);if(a instanceof Ng)return new Fi(a.M);if(a instanceof Rg)return new Ni;if(a instanceof Qg)return new Ei;if(a instanceof Jg)return new wi(a.J.V());if(a instanceof Lg)return new Yg;if(a instanceof Sg)return new di(this.h,a.J,a.Pb);if(a instanceof Kg)return new $h(this.h,a.table);if(a instanceof Hg)return new Yh(a.table);if(a instanceof Ig)return new Xi(a.table,
a.ne);if(a instanceof Gg)return new Di(this.h,a.table);if(a instanceof Fg)return new Bi(this.h,a.table);throw new E(514);};function $i(a){this.Xf=new Xh;this.gg=new Yi(a)};function aj(){this.Qe=B()}function bj(a,b){var c=a.Qe.get(b.getName())||null;null===c&&(c=new cj,a.Qe.set(b.getName(),c));return c}function dj(a,b,c,d){c.forEach(function(a){a=bj(this,a);0==d?(a.ab=null,a.uc=b):3==d?(null===a.Wb&&(a.Wb=D()),a.Wb.add(b),null===a.Sa&&(a.Sa=D()),a.Sa.delete(b)):1==d?(null===a.Sa&&(a.Sa=D()),a.Sa.add(b)):2==d&&(a.ab=b)},a)}
function ej(a,b,c,d){var e=!0;c.forEach(function(a){if(e){a=bj(this,a);var c=null===a.Sa||0==a.Sa.size;e=0==d?(null===a.Wb||0==a.Wb.size)&&c&&null===a.uc&&null!==a.ab&&a.ab==b:3==d?null===a.uc&&null===a.ab&&null!==a.Sa&&a.Sa.has(b):1==d?null===a.ab:c&&(null===a.ab||a.ab==b)}},a);return e}function fj(a,b,c,d){var e=ej(a,b,c,d);e&&dj(a,b,c,d);return e}aj.prototype.releaseLock=function(a,b){b.forEach(function(b){bj(this,b).releaseLock(a)},this)};
function gj(a,b){b.forEach(function(a){bj(this,a).ab=null},a)}function cj(){this.Wb=this.Sa=this.ab=this.uc=null}cj.prototype.releaseLock=function(a){this.uc==a&&(this.uc=null);this.ab==a&&(this.ab=null);null===this.Sa||this.Sa.delete(a);null===this.Wb||this.Wb.delete(a)};function ij(){this.Tb=new jj;this.Fc=new aj}function ae(a,b){(2>b.getPriority()||2>b.getPriority())&&gj(a.Fc,b.Z());a.Tb.wb(b);kj(a);return b.Mb().ga}function kj(a){for(var b=a.Tb.wa(),c=0;c<b.length;c++){var d=b[c],e=!1;if(e=0==d.I()?lj(a,d,1,3):lj(a,d,2,0))a.Tb.remove(d),e=a,d.exec().then(e.eg.bind(e,d),e.dg.bind(e,d))}}function lj(a,b,c,d){var e=!1;fj(a.Fc,b.V(),b.Z(),c)&&(e=fj(a.Fc,b.V(),b.Z(),d));return e}ij.prototype.eg=function(a,b){this.Fc.releaseLock(a.V(),a.Z());a.Mb().resolve(b);kj(this)};
ij.prototype.dg=function(a,b){this.Fc.releaseLock(a.V(),a.Z());a.Mb().reject(b);kj(this)};function jj(){this.Tb=[]}jj.prototype.wb=function(a){Ue(this.Tb,a,function(a,c){var d=a.getPriority()-c.getPriority();return 0==d?a.V()-c.V():d})};jj.prototype.wa=function(){return this.Tb.slice()};jj.prototype.remove=function(a){var b=this.Tb;a=va(b,a);var c;(c=0<=a)&&ua.splice.call(b,a,1);return c};function mj(a,b){this.Kd=td.zc();this.fe=a;this.nd=b;this.K=nj(this)}function nj(a){if(0<a.fe.f.length)return a.fe.f;var b=[];a.fe.c.forEach(function(a){a.fb().forEach(function(a){b.push(a)})});return b}mj.prototype.U=function(a,b){return this.K.every(function(c){return zd(this.Kd,c.I(),"eq")(H(a,c),H(b,c))},this)};
function oj(a,b,c){var d=null===b?[]:b.entries,e=vb(d,c.entries,a.U.bind(a),function(a){return d[a]});b=[];for(var g=0,h=0;h<d.length;h++){var k=d[h];e[g]==k?g++:(k=a.nd.splice(g,1),k=pj(h,k,0,a.nd),b.push(k))}e=vb(d,c.entries,a.U.bind(a),function(a,b){return c.entries[b]});for(h=g=0;h<c.entries.length;h++)k=c.entries[h],e[g]==k?g++:(a.nd.splice(h,0,k.sa.s),k=pj(h,[],1,a.nd),b.push(k));return b}function pj(a,b,c,d){return{ug:c,index:a,object:d,wg:b,type:"splice"}};function qj(){this.dc=B()}qj.prototype.Ad=function(a,b){var c=ka(a.a).toString(),d=this.dc.get(c)||null;null===d&&(d=new rj(a),this.dc.set(c,d));d.Ad(b)};qj.prototype.ge=function(a,b){var c=ka(a.a).toString(),d=this.dc.get(c)||null;d.ge(b);0<d.Jc.size||this.dc.delete(c)};function $d(a,b){var c=D();b.forEach(function(a){c.add(a.getName())});var d=[];a.dc.forEach(function(a){a=a.Bc();a.context.c.some(function(a){return c.has(a.getName())})&&d.push(a)});return d}
function Yd(a,b,c){b=ka(null!=b.$c?b.$c:b).toString();a=a.dc.get(b)||null;null!==a&&sj(a,c)}function rj(a){this.vf=a;this.Jc=D();this.bg=[];this.Oe=null;this.Cf=new mj(a.a,this.bg)}rj.prototype.Ad=function(a){this.Jc.has(a)||this.Jc.add(a)};rj.prototype.ge=function(a){return this.Jc.delete(a)};rj.prototype.Bc=function(){var a=this.vf;return{context:a.a,de:th(a)}};function sj(a,b){var c=oj(a.Cf,a.Oe,b);a.Oe=b;0<c.length&&a.Jc.forEach(function(a){a(c)})};function tj(a,b){var c=a.i(Zb),d=b||{},e=new Qe(c);a.kb(Tb,e);var e=null,g=!1;switch(d.storeType||0){case 1:e=new Ce(c);break;case 5:e=new Ee(c);break;case 4:e=new Me(a,c,d.webSqlDbSize);break;case 3:e=new me(c,d.firebase);g=!0;break;default:e=new xe(a,c)}a.kb(Sb,e);var h=new Nf;a.kb(Ub,h);return e.Ea(d.onUpgrade).then(function(){var b=new $i(a);a.kb(Vb,b);b=new ij;a.kb(Xb,b);b=new qj;a.kb(Yb,b);return h.Ea(c)}).then(function(){if(g){var b=new be(a);b.Ja.subscribe(b.Zd.bind(b))}return(new Gf(a)).Ea(c)})}
;function uj(a){this.h=a;this.m=a.i(Zb);this.$=D(this.m.ra());this.bb=x()}m=uj.prototype;m.exec=function(){var a=this.h.i(Ub),b=this.h.i(Tb),c={};this.m.ra().forEach(function(d){var g=a.get(Ae(d)).Za(),g=Re(b,g).map(function(a){return a.s});c[d.getName()]=g});var d={name:this.m.name(),version:this.m.version(),tables:c},d=new od(new y(-1,d),!0);return w([new F([d],[])])};m.I=l(0);m.Z=f("$");m.Mb=f("bb");m.V=function(){return ka(this)};m.getPriority=l(0);function vj(a,b){this.h=a;this.m=a.i(Zb);this.$=D(this.m.ra());this.bb=x();this.ta=b;this.Ja=a.i(Sb);this.ba=a.i(Tb);this.D=a.i(Ub)}m=vj.prototype;
m.exec=function(){if(!(this.Ja instanceof xe||this.Ja instanceof Ce||this.Ja instanceof Me))throw new E(300);var a;a:{a=this.m.ra();for(var b=0;b<a.length;++b)if(0<this.D.get(Ae(a[b])).Na().na){a=!1;break a}a=!0}if(!a)throw new E(110);if(this.m.name()!=this.ta.name||this.m.version()!=this.ta.version)throw new E(111);if(null==this.ta.tables)throw new E(112);return wj(this)};m.I=l(1);m.Z=f("$");m.Mb=f("bb");m.V=function(){return ka(this)};m.getPriority=l(0);
function wj(a){var b=new Vc(a.h,a.$),b=a.Ja.Cb(a.I(),b),c;for(c in a.ta.tables){var d=a.m.table(c),e=a.ta.tables[c].map(function(a){return d.sb(a)}),g=b.H(c,d.Lb);a.ba.wd(c,e);var h=a.D.ic.get(c)||[];e.forEach(function(a){h.forEach(function(b){var c=a.Eb(b.getName());b.add(c,a.id())})});g.put(e)}return b.ia()};function xj(a,b){this.h=a;this.Ja=a.i(Sb);this.Ba=a.i(Xb);this.Fb=a.i(Yb);this.$=D(b);this.Ra=new Vc(this.h,this.$);this.bb=x();this.vc=x();this.pe=x()}m=xj.prototype;m.exec=function(){this.pe.resolve();return this.vc.ga};m.I=l(1);m.Z=f("$");m.Mb=f("bb");m.V=function(){return ka(this)};m.getPriority=l(2);function yj(a){ae(a.Ba,a);return a.pe.ga}
function zj(a,b){var c=b.Bc();return c.de.gb().exec(a.Ra,c.context).then(function(a){return gd(a[0])},function(a){this.Ra.Gb();var b=new ib(a.name);this.vc.reject(b);throw a;}.bind(a))}m.ia=function(){this.Ja.Cb(this.I(),this.Ra).ia().then(function(){this.Oc();this.vc.resolve()}.bind(this),function(a){this.Ra.Gb();this.vc.reject(a)}.bind(this));return this.bb.ga};m.Gb=function(){this.Ra.Gb();this.vc.resolve();return this.bb.ga};
m.Oc=function(){var a=$d(this.Fb,this.$);0!=a.length&&(a=new Xd(this.h,a),ae(this.Ba,a))};function Aj(a){this.h=a;this.Ba=a.i(Xb);this.Sc=null;this.Ta=0;0==Bj.size&&(Bj.set(0,D([1,4])),Bj.set(1,D([2])),Bj.set(2,D([3,5,6])),Bj.set(3,D([2,7])),Bj.set(4,D([7])),Bj.set(5,D([7])),Bj.set(6,D([7])))}r("lf.proc.Transaction",Aj);var Bj=B();function Cj(a,b){var c=Bj.get(a.Ta)||null;if(null===c||!c.has(b))throw new E(107,a.Ta,b);a.Ta=b}
Aj.prototype.exec=function(a){Cj(this,4);var b=[];try{a.forEach(function(a){a.eb();b.push(a.Bc())},this)}catch(c){return Cj(this,7),$a(c)}a=new Zg(this.h,b);return ae(this.Ba,a).then(function(a){Cj(this,7);return a.map(function(a){return gd(a)})}.bind(this),function(a){Cj(this,7);throw a;}.bind(this))};Aj.prototype.exec=Aj.prototype.exec;Aj.prototype.tf=function(a){Cj(this,1);this.Sc=new xj(this.h,a);return yj(this.Sc).then(function(){Cj(this,2)}.bind(this))};Aj.prototype.begin=Aj.prototype.tf;
Aj.prototype.sf=function(a){Cj(this,3);return zj(this.Sc,a).then(function(a){Cj(this,2);return a}.bind(this),function(a){Cj(this,7);throw a;}.bind(this))};Aj.prototype.attach=Aj.prototype.sf;Aj.prototype.ia=function(){Cj(this,5);return this.Sc.ia().then(function(){Cj(this,7)}.bind(this))};Aj.prototype.commit=Aj.prototype.ia;Aj.prototype.Gb=function(){Cj(this,6);return this.Sc.Gb().then(function(){Cj(this,7)}.bind(this))};Aj.prototype.rollback=Aj.prototype.Gb;function V(a){this.h=a;this.m=a.i(Zb);this.Pd=!1}r("lf.proc.Database",V);V.prototype.Ea=function(a){this.h.kb(Zb,this.m);return tj(this.h,a).then(function(){this.Pd=!0;this.Ba=this.h.i(Xb);return this}.bind(this))};V.prototype.init=V.prototype.Ea;V.prototype.ub=f("m");V.prototype.getSchema=V.prototype.ub;function Dj(a){if(!a.Pd)throw new E(2);}V.prototype.select=function(a){Dj(this);return new U(this.h,1!=arguments.length||null!=arguments[0]?Array.prototype.slice.call(arguments):[])};
V.prototype.select=V.prototype.select;V.prototype.wb=function(){Dj(this);return new vh(this.h)};V.prototype.insert=V.prototype.wb;V.prototype.Qd=function(){Dj(this);return new vh(this.h,!0)};V.prototype.insertOrReplace=V.prototype.Qd;V.prototype.update=function(a){Dj(this);return new Fh(this.h,a)};V.prototype.update=V.prototype.update;V.prototype.delete=function(){Dj(this);return new uh(this.h)};V.prototype["delete"]=V.prototype.delete;
V.prototype.observe=function(a,b){Dj(this);this.h.i(Yb).Ad(a,b)};V.prototype.observe=V.prototype.observe;V.prototype.unobserve=function(a,b){Dj(this);this.h.i(Yb).ge(a,b)};V.prototype.unobserve=V.prototype.unobserve;V.prototype.Af=function(){Dj(this);return new Aj(this.h)};V.prototype.createTransaction=V.prototype.Af;V.prototype.close=function(){try{this.h.i(Sb).close()}catch(a){}this.h.clear();this.Pd=!1};V.prototype.close=V.prototype.close;
V.prototype.If=function(){Dj(this);var a=new uj(this.h);return ae(this.Ba,a).then(function(a){return gd(a[0])[0]})};V.prototype["export"]=V.prototype.If;V.prototype.import=function(a){Dj(this);a=new vj(this.h,a);return ae(this.Ba,a).then(l(null))};V.prototype["import"]=V.prototype.import;function W(a,b,c,d,e,g){this.S=a;this.A=b;this.Ke=c;this.Ie=d;this.mf=e;this.cb=g||null}r("lf.schema.BaseColumn",W);m=W.prototype;m.getName=f("A");m.l=function(){return I(this.S)+"."+this.A};m.toString=function(){return this.l()};m.H=f("S");m.I=f("mf");W.prototype.getType=W.prototype.I;W.prototype.Ya=f("cb");W.prototype.va=function(){null==this.ka&&(this.ka=[],this.H().va().forEach(function(a){-1!=a.f.map(function(a){return a.ha.getName()}).indexOf(this.A)&&this.ka.push(a)},this));return this.ka};
W.prototype.ua=function(){if(!q(this.ea)){var a=this.va().filter(function(a){return 1!=a.f.length?!1:a.f[0].ha.getName()==this.getName()},this);this.ea=0<a.length?a[0]:null}return this.ea};W.prototype.Dc=f("Ie");W.prototype.isNullable=W.prototype.Dc;W.prototype.Ec=f("Ke");W.prototype.Qa=function(a){return jg(this,a,"eq")};W.prototype.eq=W.prototype.Qa;W.prototype.Re=function(a){return jg(this,a,"neq")};W.prototype.neq=W.prototype.Re;W.prototype.Wd=function(a){return jg(this,a,"lt")};
W.prototype.lt=W.prototype.Wd;W.prototype.Yf=function(a){return jg(this,a,"lte")};W.prototype.lte=W.prototype.Yf;W.prototype.Kf=function(a){return jg(this,a,"gt")};W.prototype.gt=W.prototype.Kf;W.prototype.Lf=function(a){return jg(this,a,"gte")};W.prototype.gte=W.prototype.Lf;W.prototype.match=function(a){return jg(this,a,"match")};W.prototype.match=W.prototype.match;W.prototype.uf=function(a,b){return jg(this,[a,b],"between")};W.prototype.between=W.prototype.uf;
W.prototype.Mf=function(a){return jg(this,a,"in")};W.prototype["in"]=W.prototype.Mf;W.prototype.Tf=function(){return this.Qa(null)};W.prototype.isNull=W.prototype.Tf;W.prototype.Sf=function(){return this.Re(null)};W.prototype.isNotNull=W.prototype.Sf;W.prototype.nc=function(a){return new W(this.S,this.A,this.Ke,this.Ie,this.mf,a)};W.prototype.as=W.prototype.nc;function Ej(){this.ud=B()}var Fj;Ej.prototype.clear=function(){this.ud.clear()};Ej.prototype.clear=Ej.prototype.clear;Ej.prototype.kb=function(a,b){this.ud.set(a.toString(),b);return b};Ej.prototype.registerService=Ej.prototype.kb;Ej.prototype.i=function(a){var b=this.ud.get(a.toString())||null;if(null===b)throw new E(7,a.toString());return b};Ej.prototype.getService=Ej.prototype.i;Ej.prototype.Ud=function(a){return this.ud.has(a.toString())};Ej.prototype.isRegistered=Ej.prototype.Ud;function Gj(a){this.m=a;this.Ze=new cg;this.Te=new cg;this.we=B();this.g=new cg;this.ve=new cg;Hj(this)}function Hj(a){a.m.ra().forEach(function(a){var c=a.getName();a.Db().Nd().forEach(function(d){this.Ze.set(d.yb,d);this.Te.set(c,this.m.table(d.yb));this.g.set(d.yb,a);this.we.set(a.getName()+"."+d.qb,d.yb);this.ve.set(d.yb+"."+d.Lc,a.getName())},this)},a)}function Oc(a,b){return a.Ze.get(b)}function bh(a,b){var c=b.get(a);return null===c?[]:c}
function eh(a,b){var c=D();b.forEach(function(a){(a=this.we.get(a))&&c.add(a)},a);return kc(c).map(function(a){return this.m.table(a)},a)}function fh(a,b){var c=D();b.forEach(function(a){(a=this.ve.get(a))&&a.forEach(function(a){c.add(a)})},a);return kc(c).map(function(a){return this.m.table(a)},a)};function Ij(a,b,c){this.hg=a;this.ag=b;this.Jf=c}r("lf.schema.Constraint",Ij);Ij.prototype.fd=f("hg");Ij.prototype.getPrimaryKey=Ij.prototype.fd;Ij.prototype.Nd=f("Jf");Ij.prototype.getForeignKeys=Ij.prototype.Nd;function Jj(a,b){var c=a.ref.split(".");if(2!=c.length)throw new E(540,b);this.qb=a.local;this.yb=c[0];this.Lc=c[1];this.name=b;this.action=a.action;this.timing=a.timing};function X(a){Kj(a);this.Kd=td.zc();this.A=a;this.K=B();this.xd=D();this.jc=D();this.Ic=D();this.ya=null;this.ka=B();this.qd=!1;this.tb=[]}r("lf.schema.TableBuilder",X);function Lj(a){this.name=a.name;this.jb=a.order;this.autoIncrement=a.autoIncrement}var Mj=D([0,6]);function Kj(a){if(!/^[A-Za-z_][A-Za-z0-9_]*$/.test(a))throw new E(502,a);}function Nj(a,b){if(b==a.A)throw new E(546,b);if(a.K.has(b)||a.ka.has(b)||a.jc.has(b))throw new E(503,a.A+"."+b);}
function Oj(a,b){var c=!1;b.forEach(function(a){var b=this.K.get(a.name);c=c||a.autoIncrement;if(a.autoIncrement&&3!=b)throw new E(504);},a);if(c&&1<b.length)throw new E(505);}function Pj(a){if(null!==a.ya){var b=a.ka.get(a.ya).map(function(a){return a.name}),c=0;if(a.tb.some(function(a,e){c=e;return-1!=b.indexOf(a.qb)},a))throw new E(543,a.tb[c].name);}}
function Qj(a){if(null!==a.ya){var b=function(a){return a.name},c=JSON.stringify(a.ka.get(a.ya).map(b));a.ka.forEach(function(a,e){if(e!=this.ya){var g=a.map(b);if(JSON.stringify(g)==c)throw new E(544,this.A+"."+e);}},a)}}function Rj(a){null===a.ya||a.ka.get(a.ya).forEach(function(a){if(this.Ic.has(a.name))throw new E(545,this.A+"."+a.name);},a)}X.prototype.nf=function(a,b){Kj(a);Nj(this,a);this.K.set(a,b);Mj.has(b)&&this.re([a]);return this};X.prototype.addColumn=X.prototype.nf;
X.prototype.pf=function(a,b){var c=this.A;this.ya="pk"+(c[0].toUpperCase()+c.substring(1));Kj(this.ya);Nj(this,this.ya);c=Sj(this,a,!0,void 0,b);Oj(this,c);1==c.length&&this.xd.add(c[0].name);this.jc.add(this.ya);this.ka.set(this.ya,c);return this};X.prototype.addPrimaryKey=X.prototype.pf;
X.prototype.of=function(a,b){Kj(a);Nj(this,a);var c=new Jj(b,this.A+"."+a);q(c.action)||(c.action=0);q(c.timing)||(c.timing=0);if(1==c.action&&1==c.timing)throw new E(506);if(!this.K.has(c.qb))throw new E(540,a);this.tb.push(c);this.qe(a,[c.qb],this.xd.has(c.qb));return this};X.prototype.addForeignKey=X.prototype.of;X.prototype.qf=function(a,b){Kj(a);Nj(this,a);var c=Sj(this,b,!0);Tj(this,a,c);1==c.length&&(this.xd.add(c[0].name),Uj(this,c[0].name));this.ka.set(a,c);this.jc.add(a);return this};
X.prototype.addUnique=X.prototype.qf;function Uj(a,b){a.tb.forEach(function(a){a.qb==b&&this.jc.add(a.name.split(".")[1])},a)}X.prototype.re=function(a){a=Sj(this,a,!1);Vj(this,a);a.forEach(function(a){this.Ic.add(a.name)},this);return this};X.prototype.addNullable=X.prototype.re;function Vj(a,b){Jb(a.ka).forEach(function(a){var d=D();this.ka.get(a).forEach(function(a){d.add(a.name)});var e=b.filter(function(a){return d.has(a.name)});if(1<d.size&&0<e.length)throw new E(507,a,e.join(","));},a)}
X.prototype.qe=function(a,b,c,d){Kj(a);Nj(this,a);b=Sj(this,b,!0,d);Tj(this,a,b);c&&this.jc.add(a);this.ka.set(a,b);return this};X.prototype.addIndex=X.prototype.qe;function Tj(a,b,c){if(1<c.length&&(a=c.filter(function(a){return this.Ic.has(a.name)},a),0<a.length))throw new E(507,b,a.join(","));}X.prototype.zb=ba("qd");X.prototype.persistentIndex=X.prototype.zb;X.prototype.ub=function(){Pj(this);Qj(this);Rj(this);return new (Wj(this))};X.prototype.getSchema=X.prototype.ub;
function Xj(a){return a.tb}function Sj(a,b,c,d,e){var g=b,g="string"==typeof b[0]?b.map(function(a){return new Lj({name:a,order:null!=d?d:1,autoIncrement:e||!1})}):b.map(function(a){return new Lj(a)});g.forEach(function(a){if(!this.K.has(a.name))throw new E(508,this.A,a.name);if(c){var b=this.K.get(a.name);if(0==b||6==b)throw new E(509,this.A,a.name);}},a);return g}
function Wj(a){function b(){function b(c){return a.ka.get(c).map(function(a){return{ha:this[a.name],jb:a.jb,autoIncrement:a.autoIncrement}},this)}var d=Jb(a.K).map(function(b){this[b]=new W(this,b,a.xd.has(b),a.Ic.has(b),a.K.get(b));return this[b]},this),e=Jb(a.ka).map(function(d){return new lg(a.A,d,a.jc.has(d),b.call(this,d))},this);Q.call(this,a.A,d,e,a.qd);var g=null===a.ya?null:new lg(a.A,a.ya,!0,b.call(this,a.ya)),h=d.filter(function(b){return!a.Ic.has(b.getName())});this.xf=new Ij(g,h,a.tb);
this.cf=Yj(a,d,e)}t(b,Q);b.prototype.sb=function(a){return new this.cf(ob++,a)};b.prototype.createRow=b.prototype.sb;b.prototype.Lb=function(a){var b={};this.fb().forEach(function(e){var g=e.getName();e=e.I();var h=a.value[g];if(0==e)if(e=h,null!=e&&""!=e){0!=e.length%2&&(e="0"+e);for(var h=new ArrayBuffer(e.length/2),k=new Uint8Array(h),n=0,z=0;n<e.length;n+=2)k[z++]=parseInt(e.substr(n,2),16);e=h}else e=null;else e=2==e?null!=h?new Date(h):null:h;b[g]=e},this);return new this.cf(a.id,b)};b.prototype.deserializeRow=
b.prototype.Lb;b.prototype.Db=f("xf");b.prototype.getConstraint=b.prototype.Db;return b}
function Yj(a,b,c){function d(a,d){this.K=b;this.ka=c;y.call(this,a,d)}t(d,y);d.prototype.ze=function(){var a={};this.K.forEach(function(b){a[b.getName()]=b.Dc()?null:Gc[b.I()]});return a};d.prototype.jf=function(){var a={};this.K.forEach(function(b){var c=b.getName();b=b.I();var d=this.s[c];a[c]=0==b?null!=d?sb(d):null:2==b?null!=d?d.getTime():null:6==b?null!=d?d:null:d},this);return a};var e=function(a){var b=this.K.get(a.getName()),c=this.Kd.Le.get(b)||null;return function(b){return c(b[a.getName()])}}.bind(a),
g=function(a){var b=a.map(function(a){return e(a.ha)});return function(a){return b.map(function(b){return b(a)})}}.bind(a),h={};c.forEach(function(a){var b=a.l();a=1==a.f.length?e(a.f[0].ha):g(a.f);h[b]=a});d.prototype.Eb=function(a){return-1!=a.indexOf("#")?this.id():h.hasOwnProperty(a)?h[a](this.s):null};return d};function Y(a,b){this.m=new Z(a,b);this.ob=B();this.wc=!1}r("lf.schema.Builder",Y);function Zj(a,b){b.tb.forEach(function(a){var d=a.yb;if(!this.ob.has(d))throw new E(536,a.name);var d=this.ob.get(d).ub(),e=a.Lc;if(!d.hasOwnProperty(e))throw new E(537,a.name);if(b.ub()[a.qb].I()!=d[e].I())throw new E(538,a.name);if(!d[e].Ec())throw new E(539,a.name);},a)}Y.prototype.wf=function(a){a.tb.forEach(function(a){Xj(this.ob.get(a.yb)).forEach(function(c){if(c.qb==a.Lc)throw new E(534,a.name);},this)},this)};
function ak(a){a.wc||(a.ob.forEach(function(a){Zj(this,a);a=a.ub();this.m.L.set(a.getName(),a)},a),C(a.ob).forEach(a.wf,a),bk(a),a.ob.clear(),a.wc=!0)}function ck(a,b,c){b.oe||(b.oe=!0,b.$d=!0,b.Ae.forEach(function(a){a=c.get(a);if(!a.oe)ck(this,a,c);else if(a.$d&&b!=a)throw new E(533);},a));b.$d=!1}function bk(a){var b=B();a.m.L.forEach(function(a,d){b.set(d,new dk(d))},a);a.ob.forEach(function(a,d){a.tb.forEach(function(a){b.get(a.yb).Ae.add(d)})});C(b).forEach(function(a){ck(this,a,b)},a)}
function dk(a){this.$d=this.oe=!1;this.Ae=D();this.Qc=a}Y.prototype.ub=function(){this.wc||ak(this);return this.m};Y.prototype.getSchema=Y.prototype.ub;Y.prototype.Ce=function(){var a=new Rb("ns_"+this.m.name()),b;Fj||(Fj=new Ej);b=Fj;var c=null;b.Ud(a)?c=b.i(a):(c=new Ej,b.kb(a,c));return c};Y.prototype.getGlobal=Y.prototype.Ce;Y.prototype.connect=function(a){var b=this.Ce();b.Ud(Zb)||b.kb(Zb,this.ub());return(new V(b)).Ea(a)};Y.prototype.connect=Y.prototype.connect;
Y.prototype.zf=function(a){if(this.ob.has(a))throw new E(503,a);if(this.wc)throw new E(535);this.ob.set(a,new X(a));return this.ob.get(a)};Y.prototype.createTable=Y.prototype.zf;Y.prototype.ke=function(a){if(this.wc)throw new E(535);this.m.ke(a);return this};Y.prototype.setPragma=Y.prototype.ke;function Z(a,b){this.A=a;this.Oa=b;this.L=B();this.Xe={Df:!1}}r("lf.schema.DatabaseSchema",Z);Z.prototype.name=f("A");Z.prototype.name=Z.prototype.name;Z.prototype.version=f("Oa");Z.prototype.version=Z.prototype.version;
Z.prototype.ra=function(){return C(this.L)};Z.prototype.tables=Z.prototype.ra;Z.prototype.table=function(a){if(!this.L.has(a))throw new E(101,a);return this.L.get(a)};Z.prototype.table=Z.prototype.table;Z.prototype.info=function(){this.Ge||(this.Ge=new Gj(this));return this.Ge};Z.prototype.We=f("Xe");Z.prototype.pragma=Z.prototype.We;Z.prototype.ke=ba("Xe");r("lf.schema.create",function(a,b){return new Y(a,b)});}.bind(window))()
//# sourceMappingURL=lovefield.min.js.map
