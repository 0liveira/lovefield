if(!self.window){window=this;}
(function(){'use strict';function aa(){return function(){}}function ba(a){return function(b){this[a]=b}}function g(a){return function(){return this[a]}}function l(a){return function(){return a}}var m,p=this;function q(a){return void 0!==a}function ca(){}
function ea(a){var b=typeof a;if("object"==b)if(a){if(a instanceof Array)return"array";if(a instanceof Object)return b;var c=Object.prototype.toString.call(a);if("[object Window]"==c)return"object";if("[object Array]"==c||"number"==typeof a.length&&"undefined"!=typeof a.splice&&"undefined"!=typeof a.propertyIsEnumerable&&!a.propertyIsEnumerable("splice"))return"array";if("[object Function]"==c||"undefined"!=typeof a.call&&"undefined"!=typeof a.propertyIsEnumerable&&!a.propertyIsEnumerable("call"))return"function"}else return"null";
else if("function"==b&&"undefined"==typeof a.call)return"object";return b}function fa(a){return null===a}function ga(a){return null!=a}function ha(a){var b=ea(a);return"array"==b||"object"==b&&"number"==typeof a.length}function ia(a){return"string"==typeof a}function ja(a){return"function"==ea(a)}function ka(a){return a[la]||(a[la]=++ma)}var la="closure_uid_"+(1E9*Math.random()>>>0),ma=0;function na(a,b,c){return a.call.apply(a.bind,arguments)}
function oa(a,b,c){if(!a)throw Error();if(2<arguments.length){var d=Array.prototype.slice.call(arguments,2);return function(){var c=Array.prototype.slice.call(arguments);Array.prototype.unshift.apply(c,d);return a.apply(b,c)}}return function(){return a.apply(b,arguments)}}function pa(a,b,c){pa=Function.prototype.bind&&-1!=Function.prototype.bind.toString().indexOf("native code")?na:oa;return pa.apply(null,arguments)}
function qa(a,b){var c=Array.prototype.slice.call(arguments,1);return function(){var b=c.slice();b.push.apply(b,arguments);return a.apply(this,b)}}function r(a,b){var c=a.split("."),d=p;c[0]in d||!d.execScript||d.execScript("var "+c[0]);for(var e;c.length&&(e=c.shift());)!c.length&&q(b)?d[e]=b:d=d[e]?d[e]:d[e]={}}
function t(a,b){function c(){}c.prototype=b.prototype;a.eb=b.prototype;a.prototype=new c;a.prototype.constructor=a;a.Jg=function(a,c,f){for(var h=Array(arguments.length-2),k=2;k<arguments.length;k++)h[k-2]=arguments[k];return b.prototype[c].apply(a,h)}};function ra(a){if(Error.captureStackTrace)Error.captureStackTrace(this,ra);else{var b=Error().stack;b&&(this.stack=b)}a&&(this.message=String(a))}t(ra,Error);ra.prototype.name="CustomError";var sa=String.prototype.trim?function(a){return a.trim()}:function(a){return a.replace(/^[\s\xa0]+|[\s\xa0]+$/g,"")};
function ta(a){var b=0,c=sa(String(ua)).split(".");a=sa(String(a)).split(".");for(var d=Math.max(c.length,a.length),e=0;0==b&&e<d;e++){var f=c[e]||"",h=a[e]||"",k=/(\d*)(\D*)/g,n=/(\d*)(\D*)/g;do{var B=k.exec(f)||["","",""],O=n.exec(h)||["","",""];if(0==B[0].length&&0==O[0].length)break;b=va(0==B[1].length?0:parseInt(B[1],10),0==O[1].length?0:parseInt(O[1],10))||va(0==B[2].length,0==O[2].length)||va(B[2],O[2])}while(0==b)}return b}function va(a,b){return a<b?-1:a>b?1:0};function wa(a,b,c){this.fg=c;this.Kf=a;this.zg=b;this.pd=0;this.gd=null}wa.prototype.get=function(){var a;0<this.pd?(this.pd--,a=this.gd,this.gd=a.next,a.next=null):a=this.Kf();return a};wa.prototype.put=function(a){this.zg(a);this.pd<this.fg&&(this.pd++,a.next=this.gd,this.gd=a)};var xa=Array.prototype.indexOf?function(a,b,c){return Array.prototype.indexOf.call(a,b,c)}:function(a,b,c){c=null==c?0:0>c?Math.max(0,a.length+c):c;if(ia(a))return ia(b)&&1==b.length?a.indexOf(b,c):-1;for(;c<a.length;c++)if(c in a&&a[c]===b)return c;return-1},ya=Array.prototype.forEach?function(a,b,c){Array.prototype.forEach.call(a,b,c)}:function(a,b,c){for(var d=a.length,e=ia(a)?a.split(""):a,f=0;f<d;f++)f in e&&b.call(c,e[f],f,a)},za=Array.prototype.map?function(a,b,c){return Array.prototype.map.call(a,
b,c)}:function(a,b,c){for(var d=a.length,e=Array(d),f=ia(a)?a.split(""):a,h=0;h<d;h++)h in f&&(e[h]=b.call(c,f[h],h,a));return e},Aa=Array.prototype.reduce?function(a,b,c,d){d&&(b=pa(b,d));return Array.prototype.reduce.call(a,b,c)}:function(a,b,c,d){var e=c;ya(a,function(c,h){e=b.call(d,e,c,h,a)});return e},Ba=Array.prototype.some?function(a,b,c){return Array.prototype.some.call(a,b,c)}:function(a,b,c){for(var d=a.length,e=ia(a)?a.split(""):a,f=0;f<d;f++)if(f in e&&b.call(c,e[f],f,a))return!0;return!1};
function Ca(a,b,c){return 2>=arguments.length?Array.prototype.slice.call(a,b):Array.prototype.slice.call(a,b,c)}function Da(a){for(var b=[],c=0;c<a;c++)b[c]=0;return b}function Ea(a){for(var b=[],c=0;c<arguments.length;c++){var d=arguments[c];if("array"==ea(d))for(var e=0;e<d.length;e+=8192)for(var f=Ea.apply(null,Ca(d,e,e+8192)),h=0;h<f.length;h++)b.push(f[h]);else b.push(d)}return b};function Fa(a){var b=[],c=0,d;for(d in a)b[c++]=a[d];return b};var Ga;a:{var Ha=p.navigator;if(Ha){var Ia=Ha.userAgent;if(Ia){Ga=Ia;break a}}Ga=""}function u(a){return-1!=Ga.indexOf(a)};function Ja(){return u("Opera")||u("OPR")}function La(){return(u("Chrome")||u("CriOS"))&&!Ja()&&!u("Edge")};function Ma(a){p.setTimeout(function(){throw a;},0)}var Na;
function Oa(){var a=p.MessageChannel;"undefined"===typeof a&&"undefined"!==typeof window&&window.postMessage&&window.addEventListener&&!u("Presto")&&(a=function(){var a=document.createElement("IFRAME");a.style.display="none";a.src="";document.documentElement.appendChild(a);var b=a.contentWindow,a=b.document;a.open();a.write("");a.close();var c="callImmediate"+Math.random(),d="file:"==b.location.protocol?"*":b.location.protocol+"//"+b.location.host,a=pa(function(a){if(("*"==d||a.origin==d)&&a.data==
c)this.port1.onmessage()},this);b.addEventListener("message",a,!1);this.port1={};this.port2={postMessage:function(){b.postMessage(c,d)}}});if("undefined"!==typeof a&&!u("Trident")&&!u("MSIE")){var b=new a,c={},d=c;b.port1.onmessage=function(){if(q(c.next)){c=c.next;var a=c.Ee;c.Ee=null;a()}};return function(a){d.next={Ee:a};d=d.next;b.port2.postMessage(0)}}return"undefined"!==typeof document&&"onreadystatechange"in document.createElement("SCRIPT")?function(a){var b=document.createElement("SCRIPT");
b.onreadystatechange=function(){b.onreadystatechange=null;b.parentNode.removeChild(b);b=null;a();a=null};document.documentElement.appendChild(b)}:function(a){p.setTimeout(a,0)}};function Pa(){this.yd=this.pc=null}var Ra=new wa(function(){return new Qa},function(a){a.reset()},100);Pa.prototype.add=function(a,b){var c=Ra.get();c.set(a,b);this.yd?this.yd.next=c:this.pc=c;this.yd=c};Pa.prototype.remove=function(){var a=null;this.pc&&(a=this.pc,this.pc=this.pc.next,this.pc||(this.yd=null),a.next=null);return a};function Qa(){this.next=this.scope=this.Qd=null}Qa.prototype.set=function(a,b){this.Qd=a;this.scope=b;this.next=null};
Qa.prototype.reset=function(){this.next=this.scope=this.Qd=null};function Sa(a,b){Ta||Ua();Va||(Ta(),Va=!0);Wa.add(a,b)}var Ta;function Ua(){if(p.Promise&&p.Promise.resolve){var a=p.Promise.resolve(void 0);Ta=function(){a.then(Xa)}}else Ta=function(){var a=Xa;!ja(p.setImmediate)||p.Window&&p.Window.prototype&&p.Window.prototype.setImmediate==p.setImmediate?(Na||(Na=Oa()),Na(a)):p.setImmediate(a)}}var Va=!1,Wa=new Pa;function Xa(){for(var a=null;a=Wa.remove();){try{a.Qd.call(a.scope)}catch(b){Ma(b)}Ra.put(a)}Va=!1};function v(a,b){this.Va=0;this.lf=void 0;this.Wc=this.fc=this.G=null;this.fd=this.Od=!1;if(a!=ca)try{var c=this;a.call(b,function(a){Ya(c,2,a)},function(a){Ya(c,3,a)})}catch(d){Ya(this,3,d)}}function Za(){this.next=this.context=this.lc=this.Ic=this.child=null;this.Bd=!1}Za.prototype.reset=function(){this.context=this.lc=this.Ic=this.child=null;this.Bd=!1};var $a=new wa(function(){return new Za},function(a){a.reset()},100);function ab(a,b,c){var d=$a.get();d.Ic=a;d.lc=b;d.context=c;return d}
function w(a){if(a instanceof v)return a;var b=new v(ca);Ya(b,2,a);return b}function bb(a){return new v(function(b,c){c(a)})}function cb(a,b,c){db(a,b,c,null)||Sa(qa(b,a))}function eb(a){return new v(function(b,c){var d=a.length,e=[];if(d)for(var f=function(a,c){d--;e[a]=c;0==d&&b(e)},h=function(a){c(a)},k=0,n;k<a.length;k++)n=a[k],cb(n,qa(f,k),h);else b(e)})}function x(){var a,b,c=new v(function(c,e){a=c;b=e});return new fb(c,a,b)}
v.prototype.then=function(a,b,c){return gb(this,ja(a)?a:null,ja(b)?b:null,c)};v.prototype.then=v.prototype.then;v.prototype.$goog_Thenable=!0;v.prototype.te=function(a,b){return gb(this,null,a,b)};function hb(a,b){a.fc||2!=a.Va&&3!=a.Va||ib(a);a.Wc?a.Wc.next=b:a.fc=b;a.Wc=b}
function gb(a,b,c,d){var e=ab(null,null,null);e.child=new v(function(a,h){e.Ic=b?function(c){try{var e=b.call(d,c);a(e)}catch(B){h(B)}}:a;e.lc=c?function(b){try{var e=c.call(d,b);!q(e)&&b instanceof jb?h(b):a(e)}catch(B){h(B)}}:h});e.child.G=a;hb(a,e);return e.child}v.prototype.Eg=function(a){this.Va=0;Ya(this,2,a)};v.prototype.Fg=function(a){this.Va=0;Ya(this,3,a)};
function Ya(a,b,c){0==a.Va&&(a==c&&(b=3,c=new TypeError("Promise cannot resolve to itself")),a.Va=1,db(c,a.Eg,a.Fg,a)||(a.lf=c,a.Va=b,a.G=null,ib(a),3!=b||c instanceof jb||kb(a,c)))}function db(a,b,c,d){if(a instanceof v)return hb(a,ab(b||ca,c||null,d)),!0;var e;if(a)try{e=!!a.$goog_Thenable}catch(h){e=!1}else e=!1;if(e)return a.then(b,c,d),!0;e=typeof a;if("object"==e&&null!=a||"function"==e)try{var f=a.then;if(ja(f))return lb(a,f,b,c,d),!0}catch(h){return c.call(d,h),!0}return!1}
function lb(a,b,c,d,e){function f(a){k||(k=!0,d.call(e,a))}function h(a){k||(k=!0,c.call(e,a))}var k=!1;try{b.call(a,h,f)}catch(n){f(n)}}function ib(a){a.Od||(a.Od=!0,Sa(a.Pf,a))}function mb(a){var b=null;a.fc&&(b=a.fc,a.fc=b.next,b.next=null);a.fc||(a.Wc=null);return b}
v.prototype.Pf=function(){for(var a=null;a=mb(this);){var b=this.Va,c=this.lf;if(3==b&&a.lc&&!a.Bd)for(var d=void 0,d=this;d&&d.fd;d=d.G)d.fd=!1;if(a.child)a.child.G=null,nb(a,b,c);else try{a.Bd?a.Ic.call(a.context):nb(a,b,c)}catch(e){ob.call(null,e)}$a.put(a)}this.Od=!1};function nb(a,b,c){2==b?a.Ic.call(a.context,c):a.lc&&a.lc.call(a.context,c)}function kb(a,b){a.fd=!0;Sa(function(){a.fd&&ob.call(null,b)})}var ob=Ma;function jb(a){ra.call(this,a)}t(jb,ra);jb.prototype.name="cancel";
function fb(a,b,c){this.da=a;this.resolve=b;this.reject=c};function pb(a,b,c,d){c=c||function(a,b){return a==b};d=d||function(b){return a[b]};for(var e=a.length,f=b.length,h=[],k=0;k<e+1;k++)h[k]=[],h[k][0]=0;for(var n=0;n<f+1;n++)h[0][n]=0;for(k=1;k<=e;k++)for(n=1;n<=f;n++)c(a[k-1],b[n-1])?h[k][n]=h[k-1][n-1]+1:h[k][n]=Math.max(h[k-1][n],h[k][n-1]);for(var B=[],k=e,n=f;0<k&&0<n;)c(a[k-1],b[n-1])?(B.unshift(d(k-1,n-1)),k--,n--):h[k-1][n]>h[k][n-1]?k--:n--;return B}function qb(a){return Aa(arguments,function(a,c){return a+c},0)}
function rb(a){return qb.apply(null,arguments)/arguments.length}function sb(a){var b=arguments.length;if(2>b)return 0;var c=rb.apply(null,arguments);return qb.apply(null,za(arguments,function(a){return Math.pow(a-c,2)}))/(b-1)}function tb(a){return Math.sqrt(sb.apply(null,arguments))};var ub="StopIteration"in p?p.StopIteration:{message:"StopIteration",stack:""};function vb(){}vb.prototype.next=function(){throw ub;};vb.prototype.qc=function(){return this};function wb(a){if(a instanceof vb)return a;if("function"==typeof a.qc)return a.qc(!1);if(ha(a)){var b=0,c=new vb;c.next=function(){for(;;){if(b>=a.length)throw ub;if(b in a)return a[b++];b++}};return c}throw Error("Not implemented");}
function xb(a,b){if(ha(a))try{ya(a,b,void 0)}catch(c){if(c!==ub)throw c;}else{a=wb(a);try{for(;;)b.call(void 0,a.next(),void 0,a)}catch(c){if(c!==ub)throw c;}}}function yb(a){if(Ba(arguments,function(a){return!a.length})||!arguments.length)return new vb;var b=new vb,c=arguments,d=Da(c.length);b.next=function(){if(d){for(var a=za(d,function(a,b){return c[b][a]}),b=d.length-1;0<=b;b--){if(d[b]<c[b].length-1){d[b]++;break}if(0==b){d=null;break}d[b]=0}return a}throw ub;};return b};function Bb(a,b){this.o={};this.b=[];this.Pa=this.Fb=0;var c=arguments.length;if(1<c){if(c%2)throw Error("Uneven number of arguments");for(var d=0;d<c;d+=2)this.set(arguments[d],arguments[d+1])}else a&&this.addAll(a)}m=Bb.prototype;m.Ac=g("Fb");m.ta=function(){Cb(this);for(var a=[],b=0;b<this.b.length;b++)a.push(this.o[this.b[b]]);return a};function Db(a){Cb(a);return a.b.concat()}m.Na=function(a){return Eb(this.o,a)};m.kd=function(){return 0==this.Fb};
m.clear=function(){this.o={};this.Pa=this.Fb=this.b.length=0};m.remove=function(a){return Eb(this.o,a)?(delete this.o[a],this.Fb--,this.Pa++,this.b.length>2*this.Fb&&Cb(this),!0):!1};function Cb(a){if(a.Fb!=a.b.length){for(var b=0,c=0;b<a.b.length;){var d=a.b[b];Eb(a.o,d)&&(a.b[c++]=d);b++}a.b.length=c}if(a.Fb!=a.b.length){for(var e={},c=b=0;b<a.b.length;)d=a.b[b],Eb(e,d)||(a.b[c++]=d,e[d]=1),b++;a.b.length=c}}m.get=function(a,b){return Eb(this.o,a)?this.o[a]:b};
m.set=function(a,b){Eb(this.o,a)||(this.Fb++,this.b.push(a),this.Pa++);this.o[a]=b};m.addAll=function(a){var b;if(a instanceof Bb)b=Db(a),a=a.ta();else{b=[];var c=0,d;for(d in a)b[c++]=d;a=Fa(a)}for(c=0;c<b.length;c++)this.set(b[c],a[c])};m.forEach=function(a,b){for(var c=Db(this),d=0;d<c.length;d++){var e=c[d],f=this.get(e);a.call(b,f,e,this)}};m.clone=function(){return new Bb(this)};
m.qc=function(a){Cb(this);var b=0,c=this.Pa,d=this,e=new vb;e.next=function(){if(c!=d.Pa)throw Error("The map has changed since the iterator was created");if(b>=d.b.length)throw ub;var e=d.b[b++];return a?e:d.o[e]};return e};function Eb(a,b){return Object.prototype.hasOwnProperty.call(a,b)};function Fb(){return u("iPhone")&&!u("iPod")&&!u("iPad")};var Gb=Ja(),Hb=u("Trident")||u("MSIE"),Ib=u("Edge"),Jb=u("Gecko")&&!(-1!=Ga.toLowerCase().indexOf("webkit")&&!u("Edge"))&&!(u("Trident")||u("MSIE"))&&!u("Edge"),Kb=-1!=Ga.toLowerCase().indexOf("webkit")&&!u("Edge");function Lb(){var a=Ga;if(Jb)return/rv\:([^\);]+)(\)|;)/.exec(a);if(Ib)return/Edge\/([\d\.]+)/.exec(a);if(Hb)return/\b(?:MSIE|rv)[: ]([^\);]+)(\)|;)/.exec(a);if(Kb)return/WebKit\/(\S+)/.exec(a)}
var ua=function(){if(Gb&&p.opera){var a;var b=p.opera.version;try{a=b()}catch(c){a=b}return a}a="";(b=Lb())&&(a=b?b[1]:"");return Hb&&(b=(b=p.document)?b.documentMode:void 0,b>parseFloat(a))?String(b):a}(),Mb={};var Nb=Fb()||u("iPod"),Ob=u("iPad");!u("Android")||La()||u("Firefox")||Ja();var Pb=La(),Qb=u("Safari")&&!(La()||u("Coast")||Ja()||u("Edge")||u("Silk")||u("Android"))&&!(Fb()||u("iPad")||u("iPod"));/*

 Copyright 2015 The Lovefield Project Authors. All Rights Reserved.

 Licensed under the Apache License, Version 2.0 (the "License");
 you may not use this file except in compliance with the License.
 You may obtain a copy of the License at

     http://www.apache.org/licenses/LICENSE-2.0

 Unless required by applicable law or agreed to in writing, software
 distributed under the License is distributed on an "AS IS" BASIS,
 WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 See the License for the specific language governing permissions and
 limitations under the License.
*/
function Rb(){this.me=Qb||Ob||Nb;this.Yf=!(this.me||Hb&&!Mb[10]&&!(Mb[10]=0<=ta(10)));!Hb||Mb[11]||(Mb[11]=0<=ta(11));this.Hg=Pb||Qb;this.jg=q(window.Map)&&q(window.Map.prototype.values)&&q(window.Map.prototype.forEach)&&!this.me;this.kg=q(window.Set)&&q(window.Set.prototype.values)&&q(window.Set.prototype.forEach)&&!this.me}var Sb;function Tb(){q(Sb)||(Sb=new Rb);return Sb};function y(){this.o=new Bb;Object.defineProperty(this,"size",{get:function(){return this.o.Ac()}})}y.prototype.clear=function(){this.o.clear()};y.prototype.clear=y.prototype.clear;y.prototype.delete=function(a){return this.o.remove(a)};y.prototype["delete"]=y.prototype.delete;y.prototype.forEach=function(a,b){return this.o.forEach(a,b)};y.prototype.forEach=y.prototype.forEach;y.prototype.get=function(a){return this.o.get(a)};y.prototype.get=y.prototype.get;y.prototype.has=function(a){return this.o.Na(a)};
y.prototype.has=y.prototype.has;y.prototype.set=function(a,b){return this.o.set(a,b)};y.prototype.set=y.prototype.set;var Ub=Tb().jg;function z(){return Ub?new window.Map:new y}function Vb(a){if(a instanceof y)return Db(a.o);var b=0,c=Array(a.size);a.forEach(function(a,e){c[b++]=e});return c}function A(a){if(a instanceof y)return a.o.ta();var b=0,c=Array(a.size);a.forEach(function(a){c[b++]=a});return c};/*

 Copyright 2014 The Lovefield Project Authors. All Rights Reserved.

 Licensed under the Apache License, Version 2.0 (the "License");
 you may not use this file except in compliance with the License.
 You may obtain a copy of the License at

     http://www.apache.org/licenses/LICENSE-2.0

 Unless required by applicable law or agreed to in writing, software
 distributed under the License is distributed on an "AS IS" BASIS,
 WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 See the License for the specific language governing permissions and
 limitations under the License.
*/
function Wb(a,b){this.oa=a;this.s=b||this.Je()}var Xb=0;m=Wb.prototype;m.id=g("oa");m.Je=function(){return{}};m.tf=g("s");m.Ga=function(){return{id:this.oa,value:this.tf()}};m.lb=function(a){return"#"==a.substr(-1)?this.oa:null};function Yb(a){return new Wb(a.id,a.value)}function Zb(a){return new Wb(Xb++,a||{})}function ac(a){if(null==a)return null;a=new Uint8Array(a);for(var b="",c=0;c<a.length;++c)var d=a[c].toString(16),b=b+(2>d.length?"0"+d:d);return b};var bc={};r("lf.TransactionType",bc);bc.READ_ONLY=0;bc.READ_WRITE=1;function cc(a,b){this.ue=a;this.Sa=b||null;this.S=x()}cc.prototype.ia=function(){return 0==this.ue?this.tc():dc(this)};function dc(a){try{ec(a.Sa)}catch(b){return bb(b)}return fc(a).then(function(a){this.Sa.ia();return a}.bind(a))}function fc(a){gc(a);hc(a);return a.tc()}
function gc(a){a.Sa.ub.forEach(function(a,c){var d=this.Sa.ca().get(c),d=this.I(d.getName(),d.hb.bind(d),0),e=A(a.za).map(function(a){return a.id()});0<e.length&&d.remove(e).te(this.Pe,this);e=A(a.na).map(function(a){return a[1]}).concat(A(a.wa));d.put(e).te(this.Pe,this)},a)}function hc(a){ic(a.Sa).forEach(function(a){var c=this.I(a.getName(),Yb,1);c.remove([]);c.put(a.Ga())},a)}cc.prototype.Pe=function(a){this.S.reject(a)};function jc(a){this.Ag=a}jc.prototype.toString=g("Ag");var kc=new jc("backstore"),lc=new jc("cache"),mc=new jc("indexstore"),nc=new jc("engine"),oc=new jc("runner"),pc=new jc("observerregistry"),qc=new jc("schema");function rc(a){if(a.ta&&"function"==typeof a.ta)return a.ta();if(ia(a))return a.split("");if(ha(a)){for(var b=[],c=a.length,d=0;d<c;d++)b.push(a[d]);return b}return Fa(a)};function sc(a){this.o=new Bb;a&&this.addAll(a)}function tc(a){var b=typeof a;return"object"==b&&a||"function"==b?"o"+ka(a):b.substr(0,1)+a}m=sc.prototype;m.Ac=function(){return this.o.Ac()};m.add=function(a){this.o.set(tc(a),a)};m.addAll=function(a){a=rc(a);for(var b=a.length,c=0;c<b;c++)this.add(a[c])};m.remove=function(a){return this.o.remove(tc(a))};m.clear=function(){this.o.clear()};m.kd=function(){return this.o.kd()};m.contains=function(a){return this.o.Na(tc(a))};m.ta=function(){return this.o.ta()};
m.clone=function(){return new sc(this)};m.qc=function(){return this.o.qc(!1)};function uc(a){this.Zb=new sc(a);Object.defineProperty(this,"size",{get:function(){return this.Zb.Ac()}})}uc.prototype.add=function(a){this.Zb.add(a)};uc.prototype.add=uc.prototype.add;uc.prototype.clear=function(){this.Zb.clear()};uc.prototype.clear=uc.prototype.clear;uc.prototype.delete=function(a){return this.Zb.remove(a)};uc.prototype["delete"]=uc.prototype.delete;uc.prototype.forEach=function(a,b){this.Zb.ta().forEach(a,b)};uc.prototype.has=function(a){return this.Zb.contains(a)};
uc.prototype.has=uc.prototype.has;var vc=Tb().kg;function C(a){return vc?q(a)?new window.Set(a):new window.Set:new uc(a)}function D(a){if(a instanceof uc)return a.Zb.ta();var b=0,c=Array(a.size);a.forEach(function(a){c[b++]=a});return c}function wc(a,b){if(b.size>a.size)return!1;var c=!0;b.forEach(function(b){c=c&&a.has(b)});return c};function xc(a,b){this.oa=a;this.s=b||{}}function yc(a){var b=C();a.forEach(function(a){b.add(a>>9)});return D(b)}xc.prototype.Z=g("oa");function zc(a,b){b.forEach(function(a){this.s[a.id()]=a.Ga()},a)}function Ac(a,b){b.forEach(function(a){delete this.s[a]},a)}xc.prototype.Ga=function(){return{id:this.oa,value:JSON.stringify(this.s)}};function Bc(a){return new xc(a.id,JSON.parse(a.value))};function Cc(a,b,c){this.Y=a;this.Hb=b;this.mf=c}m=Cc.prototype;m.get=function(a){if(0==a.length)return this.Rd();var b=this.Hb;return Dc(this,a).then(function(c){return a.map(function(a){var e=c.get(a>>9);return b(e.s[a])})})};function Dc(a,b){var c=z(),d=x(),e=yc(b).map(function(a){return new v(function(b,d){var e;try{e=this.Y.get(a)}catch(B){d(B);return}e.onerror=d;e.onsuccess=function(a){a=Bc(a.target.result);c.set(a.Z(),a);b()}},this)},a);eb(e).then(function(){d.resolve(c)});return d.da}
m.Rd=function(){return new v(function(a,b){var c=[],d;try{d=this.Y.openCursor()}catch(e){b(e);return}d.onerror=b;d.onsuccess=function(){var b=d.result;if(b){var f;f=Bc(b.value).s;for(var h in f)c.push(this.Hb(f[h]));b.continue()}else a(c)}.bind(this)},this)};m.Vb=function(a){return new v(function(b,c){var d;try{d=a()}catch(e){c(e);return}d.onsuccess=b;d.onerror=c},this)};
m.put=function(a){if(0==a.length)return w();var b=z();a.forEach(function(a){var d;d=a.id()>>9;var e=b.get(d)||null;null===e&&(e=this.mf(this.Y.name,d));zc(e,[a]);b.set(d,e)},this);a=A(b).map(function(a){return this.Vb(function(){return this.Y.put(a.Ga())}.bind(this))},this);return eb(a)};
m.remove=function(a){if(0==a.length)return this.Vb(function(){return this.Y.clear()}.bind(this));var b=z();a.forEach(function(a){var d=a>>9,e=b.get(d)||null;null===e&&(e=this.mf(this.Y.name,d));Ac(e,[a]);b.set(d,e)},this);a=A(b).map(function(a){return this.Vb(function(){return 0==Object.keys(a.s).length?this.Y.delete(a.Z()):this.Y.put(a.Ga())}.bind(this))},this);return eb(a)};function Ec(a,b,c){a=a.l(lc);var d=[c<<9,(c+1<<9)-1];b=a.ab(b,d[0],d[1]);c=new xc(c);zc(c,b);return c}
function Fc(a,b){return new xc(b)};function Gc(a){this.V=a.l(lc);this.F=a.l(mc);this.g=a.l(qc)}Gc.prototype.update=function(a){a.forEach(function(a){Hc(this,a);Ic(this,a)},this)};function Ic(a,b){var c=b.getName();b.za.forEach(function(a,b){this.V.remove(c,b)},a);b.wa.forEach(function(a){this.V.set(c,a)},a);b.na.forEach(function(a){this.V.set(c,a[1])},a)}function Hc(a,b){var c=a.g.table(b.getName());Jc(b).forEach(function(a){Kc(this,c,a)},a)}
function Kc(a,b,c){var d=a.F.nc.get(b.getName())||[],e=0;d.forEach(function(a){try{Lc(a,c),e++}catch(b){throw d.slice(0,e).forEach(function(a){Lc(a,[c[1],c[0]])},this),b;}},a)}function Lc(a,b){var c=null===b[1]?void 0:b[1].lb(a.getName()),d=null===b[0]?void 0:b[0].lb(a.getName());if(!q(d)&&q(c))a.add(c,b[1].id());else if(q(d)&&q(c)){if(null===c||null===d){if(c==d)return}else if(0==a.Nb().compare(d,c))return;a.add(c,b[1].id());a.remove(d,b[0].id())}else q(d)&&!q(c)&&a.remove(d,b[0].id())};var Mc={};r("lf.ConstraintAction",Mc);Mc.RESTRICT=0;Mc.CASCADE=1;var Nc={};r("lf.ConstraintTiming",Nc);Nc.IMMEDIATE=0;Nc.DEFERRABLE=1;var Oc={};r("lf.Order",Oc);Oc.DESC=0;Oc.ASC=1;var Pc={};r("lf.Type",Pc);Pc.ARRAY_BUFFER=0;Pc.BOOLEAN=1;Pc.DATE_TIME=2;Pc.INTEGER=3;Pc.NUMBER=4;Pc.STRING=5;Pc.OBJECT=6;var Qc={0:null,1:!1,2:Object.freeze(new Date(0)),3:0,4:0,5:"",6:null};r("lf.type.DEFAULT_VALUES",Qc);function E(a,b){this.code=a;this.message="http://sn.im/2a0j3wn?c="+a;if(1<arguments.length)for(var c=1;c<=Math.min(4,arguments.length-1);++c)this.message+="&p"+(c-1)+"="+encodeURIComponent(arguments[c].toString().slice(0,64))}t(E,Error);function Rc(){this.o=z();this.size=0}m=Rc.prototype;m.has=function(a){return this.o.has(a)};m.set=function(a,b){var c=this.o.get(a)||null;null===c&&(c=C(),this.o.set(a,c));c.has(b)||(c.add(b),this.size++);return this};m.Yb=function(a,b){var c=this.o.get(a)||null;null===c&&(c=C(),this.o.set(a,c));b.forEach(function(a){c.has(a)||(c.add(a),this.size++)},this);return this};m.Zd=function(a){a.keys().forEach(function(b){var c=a.get(b);this.Yb(b,c)},this);return this};
m.delete=function(a,b){var c=this.o.get(a,null);if(null===c)return!1;var d=c.delete(b);d&&(--this.size,0==c.size&&this.o.delete(a));return d};m.get=function(a){a=this.o.get(a)||null;return null===a?null:D(a)};m.clear=function(){this.o.clear();this.size=0};m.keys=function(){return Vb(this.o)};m.values=function(){var a=[];this.o.forEach(function(b){a.push.apply(a,D(b))});return a};function Sc(a){this.F=a.l(mc);this.g=a.l(qc);this.V=a.l(lc);this.$c=null}function Tc(a,b,c){var d=b.Ib().mg;c.forEach(function(a){d.forEach(function(b){if(null==a.s[b.getName()])throw new E(202,b.m());},this)},a)}function Uc(a,b,c,d){b.Ib().Sd().forEach(function(a){a.timing==d&&Wc(this,a,c)},a)}function Wc(a,b,c){var d=Xc(a,b);c.forEach(function(a){if(Yc(a[0],a[1],b.name)&&(a=a[1].lb(b.name),null!==a&&!d.Na(a)))throw new E(203,b.name);},a)}
function Xc(a,b){null===a.$c&&(a.$c=z());var c=a.$c.get(b.name)||null;null===c&&(c=a.g.table(b.Ta)[b.Jc].Aa(),c=a.F.get(c.m()),a.$c.set(b.name,c));return c}function Yc(a,b,c){return(null===a?null!==b:null===b)||a.lb(c)!=b.lb(c)}function Zc(a,b,c,d){b=$c(a.g.info(),b.getName(),0);null!==b&&(b=b.filter(function(a){return a.timing==d}),0!=b.length&&ad(a,b,c,function(a,b,c){if(b.Na(c))throw new E(203,a.name);}))}
function bd(a,b,c){b=$c(a.g.info(),b.getName(),1);if(null===b)return null;var d=new Rc;ad(a,b,c,function(a,b,c){b=b.get(c);0<b.length&&d.Yb(a.Fe,b)});return d}function cd(a,b,c){var d=new Rc;ad(a,c,b,function(a,b,c,k){b.get(c).forEach(function(b){d.set(b,{Pd:a,rg:k[1]})})});return d}function ad(a,b,c,d){b.forEach(function(a){var b=this.F.get(a.name),h=Xc(this,a);c.forEach(function(c){if(Yc(c[0],c[1],h.getName())){var n=c[0].lb(h.getName());d(a,b,n,c)}},this)},a)}
function dd(a,b,c,d){0!=c.length&&(c=c.map(function(a){return[null,a]}),Uc(a,b,c,d))}function ed(a,b,c,d){0!=c.length&&(Uc(a,b,c,d),Zc(a,b,c,d))}function fd(a,b,c,d){0!=c.length&&(c=c.map(function(a){return[a,null]}),Zc(a,b,c,d))}
function gd(a,b,c){var d={re:[],of:new Rc},e=new Rc;e.Yb(b.getName(),c.map(function(a){return a.id()}));do{var f=new Rc;e.keys().forEach(function(a){var b=this.g.table(a);a=e.get(a).map(function(a){return[this.V.get(a),null]},this);b=bd(this,b,a);null!==b&&(d.re.unshift.apply(d.re,b.keys()),f.Zd(b))},a);e=f;d.of.Zd(e)}while(0<e.size);return d};function hd(a){this.wa=z();this.na=z();this.za=z();this.A=a}m=hd.prototype;m.getName=g("A");m.add=function(a){if(this.za.has(a.id())){var b=[this.za.get(a.id()),a];this.na.set(a.id(),b);this.za.delete(a.id())}else this.wa.set(a.id(),a)};m.modify=function(a){var b=a[1],c=a[0].id();this.wa.has(c)?this.wa.set(c,b):(this.na.has(c)&&(a=[this.na.get(a[0].id())[0],b]),this.na.set(c,a))};
m.delete=function(a){if(this.wa.has(a.id()))this.wa.delete(a.id());else if(this.na.has(a.id())){var b=this.na.get(a.id())[0];this.na.delete(a.id());this.za.set(a.id(),b)}else this.za.set(a.id(),a)};m.Zd=function(a){a.wa.forEach(function(a){this.add(a)},this);a.na.forEach(function(a){this.modify(a)},this);a.za.forEach(function(a){this.delete(a)},this)};
function Jc(a){var b=[];a.wa.forEach(function(a){b.push([null,a])});a.na.forEach(function(a){b.push(a)});a.za.forEach(function(a){b.push([a,null])});return b}m.toString=function(){return"["+Vb(this.wa).toString()+"], ["+Vb(this.na).toString()+"], ["+Vb(this.za).toString()+"]"};function id(a){var b=new hd(a.A);a.wa.forEach(function(a){b.delete(a)});a.za.forEach(function(a){b.add(a)});a.na.forEach(function(a){b.modify([a[1],a[0]])});return b}
m.kd=function(){return 0==this.wa.size&&0==this.za.size&&0==this.na.size};function jd(a,b){this.aa=z();b.forEach(function(a){this.aa.set(a.getName(),a)},this);this.g=a.l(qc);this.V=a.l(lc);this.F=a.l(mc);this.xa=new Sc(a);this.hd=new Gc(a);this.ub=z()}function ic(a){var b=[];Vb(a.ub).map(function(a){return this.aa.get(a)},a).forEach(function(a){a.Eb()&&(a.Ba().forEach(function(a){b.push(this.F.get(a.m()))},this),b.push(this.F.get(a.getName()+".#")))},a);return b}m=jd.prototype;m.ca=g("aa");
m.Bb=function(a,b){kd(this,a);Tc(this.xa,a,b);dd(this.xa,a,b,0);for(var c=0;c<b.length;c++)ld(this,a,[null,b[c]])};function ld(a,b,c){var d=b.getName(),e=a.ub.get(d)||new hd(d);a.ub.set(d,e);try{Kc(a.hd,b,c)}catch(h){throw h;}b=c[0];var f=c[1];null===b&&null!==f?(a.V.set(d,f),e.add(f)):null!==b&&null!==f?(a.V.set(d,f),e.modify(c)):null!==b&&null===f&&(a.V.remove(d,b.id()),e.delete(b))}
m.update=function(a,b){kd(this,a);Tc(this.xa,a,b);var c=b.map(function(a){return[this.V.get(a.id()),a]},this);md(this,a,c);ed(this.xa,a,c,0);c.forEach(function(b){ld(this,a,b)},this)};m.Td=function(a,b){kd(this,a);Tc(this.xa,a,b);for(var c=0;c<b.length;c++){var d=b[c],e=null,f,h=a.Ib().cd();if(null===h)f=null;else{f=this.xa;var h=h.m(),k=d.lb(h);f=f.F.get(h).get(k);f=0==f.length?null:f[0]}null!=f?(e=this.V.get(f),d.oa=f,ed(this.xa,a,[[e,d]],0)):dd(this.xa,a,[d],0);ld(this,a,[e,d])}};
m.remove=function(a,b){kd(this,a);nd(this,a,b);fd(this.xa,a,b,0);for(var c=0;c<b.length;c++)ld(this,a,[b[c],null])};function md(a,b,c){b=$c(a.g.info(),b.getName(),1);if(null!==b){var d=cd(a.xa,c,b);d.keys().forEach(function(a){d.get(a).forEach(function(b){var c=this.g.table(b.Pd.Fe),d=this.V.get(a),n=c.hb(d.Ga());n.s[b.Pd.vb]=b.rg.s[b.Pd.Jc];ld(this,c,[d,n])},this)},a)}}
function nd(a,b,c){if(null!==$c(a.g.info(),b.getName(),1)){b=gd(a.xa,b,c);var d=b.of;b.re.forEach(function(a){var b=this.g.table(a);a=d.get(a).map(function(a){return this.V.get(a)},this);fd(this.xa,b,a,0);a.forEach(function(a){ld(this,b,[a,null])},this)},a)}}function ec(a){a.ub.forEach(function(a){var c=this.aa.get(a.getName());dd(this.xa,c,A(a.wa),1);fd(this.xa,c,A(a.za),1);ed(this.xa,c,A(a.na),1)},a)}m.ia=aa();m.Lb=function(){var a=A(this.ub).map(function(a){return id(a)});this.hd.update(a)};
function kd(a,b){if(!a.aa.has(b.getName()))throw new E(106,b.getName());};function F(a,b,c,d){this.c=a;this.u=b;this.ea=this.c==G?!1:c;this.ma=this.u==G?!1:d}var G=new (aa());F.prototype.toString=function(){return(this.ea?"(":"[")+(this.c==G?"unbound":this.c)+", "+(this.u==G?"unbound":this.u)+(this.ma?")":"]")};function od(a){if(pd(a))return[];var b=null,c=null;a.c==G||(b=new F(G,a.c,!1,!a.ea));a.u==G||(c=new F(a.u,G,!a.ma,!1));return[b,c].filter(function(a){return null!==a})}F.prototype.reverse=function(){return new F(this.u,this.c,this.ma,this.ea)};
function qd(a,b){var c=rd(a.c,b.c,!0,a.ea,b.ea);if(0==c)return!0;var d=-1==c?a:b,c=1==c?a:b;return d.u==G||d.u>c.c||d.u==c.c&&!d.ma&&!c.ea}function sd(){return new F(G,G,!1,!1)}function pd(a){return a.c==G&&a.u==G}function td(a){return a.c==a.u&&a.c!=G&&!a.ea&&!a.ma}F.prototype.contains=function(a){var b=this.u==G||a<this.u||a==this.u&&!this.ma;return(this.c==G||a>this.c||a==this.c&&!this.ea)&&b};
function rd(a,b,c,d,e){function f(a){return c?a:1==a?-1:1}d=d||!1;e=e||!1;return a==G?b==G?(d?!e:e)?d?f(1):f(-1):0:f(-1):b==G?f(1):a<b?-1:a==b?(d?!e:e)?d?f(1):f(-1):0:1}function ud(a,b){var c=rd(a.c,b.c,!0,a.ea,b.ea);0==c&&(c=rd(a.u,b.u,!1,a.ma,b.ma));return c}function vd(a){if(0==a.length)return[];a.sort(ud);for(var b=Array(a.length+1),c=0;c<b.length;c++)b[c]=0==c?new F(G,a[c].c,!1,!0):c==b.length-1?new F(a[c-1].u,G,!0,!1):new F(a[c-1].u,a[c].c,!0,!0);return b};function H(a,b){this.entries=a;this.M=C(b);this.Za=null}function I(a){return D(a.M)}function wd(a){return a.entries.map(function(a){return a.va.s})}function xd(a){return a.entries.map(function(a){return a.va.id()})}function yd(a,b){return a.Za.get(b.m())}var zd=null;function Ad(){null===zd&&(zd=new H([],[]));return zd}
function Bd(a){if(0==a.length)return Ad();for(var b=a.reduce(function(a,b){return a+b.entries.length},0),c=Array(b),d=0,b=a.map(function(a){var b=z();a.entries.forEach(function(a){c[d++]=a;b.set(a.id,a)});return b}),e=z(),f=0;f<c.length;f++)b.every(function(a){return a.has(c[f].id)})&&e.set(c[f].id,c[f]);return new H(A(e),D(a[0].M))}function Cd(a){if(0==a.length)return Ad();var b=z();a.forEach(function(a){a.entries.forEach(function(a){b.set(a.id,a)})});return new H(A(b),D(a[0].M))}
function Dd(a,b){var c=1<b.length,d=a.map(function(a){return new Ed(a,c)});return new H(d,b)}function Ed(a,b){this.va=a;this.id=Fd++;this.Vd=b}var Fd=0;function J(a,b){var c=b.$a();return null!==c&&a.va.s.hasOwnProperty(c)?a.va.s[c]:a.Vd?a.va.s[K(b.I())][b.getName()]:a.va.s[b.getName()]}function Gd(a,b,c){var d=b.$a();if(null!=d)a.va.s[d]=c;else if(a.Vd){var d=K(b.I()),e=a.va.s[d];null==e&&(e={},a.va.s[d]=e);e[b.getName()]=c}else a.va.s[b.getName()]=c}
function Hd(a,b,c,d){function e(a,b){if(a.Vd){var c=a.va.s,d;for(d in c)f[d]=c[d]}else f[b[0]]=a.va.s}var f={};e(a,b);e(c,d);a=new Wb(-1,f);return new Ed(a,!0)};r("lf.bind",function(a){return new Id(a)});function Id(a){this.ga=a}r("lf.Binder",Id);Id.prototype.Aa=g("ga");function Jd(){this.Ve=Kd();var a=Ld();this.ic=z();this.ic.set(1,Md());this.ic.set(2,Nd());this.ic.set(4,a);this.ic.set(3,a);this.ic.set(5,Od())}var Pd;function Qd(){null!=Pd||(Pd=new Jd);return Pd}function Rd(a,b,c){return(a.ic.get(b)||null).get(c)||null}function Kd(){function a(a){return a}var b=z();b.set(1,function(a){return null===a?null:a?1:0});b.set(2,function(a){return null===a?null:a.getTime()});b.set(3,a);b.set(4,a);b.set(5,a);return b}
function Md(){var a=z();a.set("eq",function(a,c){return a==c});a.set("neq",function(a,c){return a!=c});return a}
function Ld(){var a=Md();a.set("between",function(a,c){return null===a||null===c[0]||null===c[1]?!1:a>=c[0]&&a<=c[1]});a.set("gte",function(a,c){return null===a||null===c?!1:a>=c});a.set("gt",function(a,c){return null===a||null===c?!1:a>c});a.set("in",function(a,c){return-1!=c.indexOf(a)});a.set("lte",function(a,c){return null===a||null===c?!1:a<=c});a.set("lt",function(a,c){return null===a||null===c?!1:a<c});return a}
function Od(){var a=Ld();a.set("match",function(a,c){return null===a||null===c?!1:(new RegExp(c)).test(a)});return a}
function Nd(){var a=z();a.set("between",function(a,c){return null===a||null===c[0]||null===c[1]?!1:a.getTime()>=c[0].getTime()&&a.getTime()<=c[1].getTime()});a.set("eq",function(a,c){return(null===a?-1:a.getTime())==(null===c?-1:c.getTime())});a.set("gte",function(a,c){return null===a||null===c?!1:a.getTime()>=c.getTime()});a.set("gt",function(a,c){return null===a||null===c?!1:a.getTime()>c.getTime()});a.set("in",function(a,c){return c.some(function(c){return c.getTime()==a.getTime()})});a.set("lte",
function(a,c){return null===a||null===c?!1:a.getTime()<=c.getTime()});a.set("lt",function(a,c){return null===a||null===c?!1:a.getTime()<c.getTime()});a.set("neq",function(a,c){return(null===a?-1:a.getTime())!=(null===c?-1:c.getTime())});return a};function L(){this.h=this.G=null}var Sd=[];L.prototype.getParent=g("G");L.prototype.jb=function(){for(var a=this;!fa(a.getParent());)a=a.getParent();return a};function Td(a){for(var b=0;!fa(a.getParent());)b++,a=a.getParent();return b}function M(a){return a.h||Sd}function Ud(a,b){return M(a)[b]||null}function Vd(a,b,c){b.G=a;null===a.h?a.h=[b]:a.h.splice(c,0,b)}function Wd(a,b){b.G=a;null===a.h?a.h=[b]:a.h.push(b)}
function Xd(a,b){var c=a.h&&a.h[b];return c?(c.G=null,a.h.splice(b,1),0==a.h.length&&(a.h=null),c):null}L.prototype.removeChild=function(a){return Xd(this,M(this).indexOf(a))};function Yd(a,b,c){Ud(a,c).G=null;b.G=a;a.h[c]=b}function Zd(a,b,c){!1!==b.call(c,a)&&M(a).forEach(function(a){Zd(a,b,c)})};function $d(){L.call(this);this.oa=ae++}t($d,L);var ae=0;$d.prototype.Z=g("oa");function be(a,b,c){$d.call(this);this.N=a;this.value=b;this.D=c;this.wc=Rd(Qd(),this.N.H(),this.D);this.Ra=!1;this.ec=b}t(be,$d);m=be.prototype;m.Ob=function(){var a=new be(this.N,this.value,this.D);a.ec=this.ec;a.vd(this.Ra);var b=this.Z();a.oa=b;return a};m.ib=function(a){return null!=a?(a.push(this.N),a):[this.N]};m.vd=ba("Ra");function ce(a){var b=!1;a.value instanceof Id||(b="array"==ea(a.value)?!a.value.some(function(a){return a instanceof Id}):!0);if(!b)throw new E(501);}
m.eval=function(a){ce(this);if("in"==this.D)return de(this,a);var b=a.entries.filter(function(a){return this.wc(J(a,this.N),this.value)!=this.Ra},this);return new H(b,I(a))};m.bind=function(a){if(this.ec instanceof Id){var b=this.ec.Aa();if(a.length<=b)throw new E(510);this.value=a[b]}else"array"==ea(this.ec)&&(this.value=this.ec.map(function(b){if(b instanceof Id){var d=b.Aa();if(a.length<=d)throw new E(510);return a[b.Aa()]}return b}))};
function de(a,b){var c=C(a.value),d=function(a){return null===a?!1:c.has(a)!=this.Ra}.bind(a),e=b.entries.filter(function(a){return d(J(a,this.N))},a);return new H(e,I(b))}m.toString=function(){return"value_pred("+this.N.m()+" "+this.D+(this.Ra?"(complement)":"")+" "+this.value+")"};
function ee(a){var b=null;if("between"==a.D)b=new F(fe(a,a.value[0]),fe(a,a.value[1]),!1,!1);else{if("in"==a.D)return b=a.value.map(function(a){return new F(a,a,!1,!1)}),a.Ra?vd(b):b;b=fe(a,a.value);b="eq"==a.D?new F(b,b,!1,!1):"gte"==a.D?new F(b,G,!1,!1):"gt"==a.D?new F(b,G,!0,!1):"lte"==a.D?new F(G,b,!1,!1):new F(G,b,!1,!0)}return a.Ra?od(b):[b]}function fe(a,b){return 2==a.N.H()?b.getTime():b};function ge(a){this.ba=a;this.Xc=this.Da=null}function he(a,b){null===a.Da&&null!=a.w&&(a.Da=ie(a.w));return a.Da.get(b)||null}function ie(a){var b=z();Zd(a,function(a){b.set(a.Z(),a)});return b}function je(a,b){b.w&&(a.w=b.w.Ob());a.Xc=b}ge.prototype.bind=function(){return this};function ke(a,b){var c=a.w;null!=c&&Zd(c,function(a){a instanceof be&&a.bind(b)})};function le(a){ge.call(this,a)}t(le,ge);function me(a){var b="";a.forEach(function(c,d){b+=c.N.m()+" ";b+=1==c.nb?"ASC":"DESC";d<a.length-1&&(b+=", ")});return b}le.prototype.ca=function(){return C(this.c)};le.prototype.clone=function(){var a=new le(this.ba);je(a,this);this.f&&(a.f=this.f.slice());this.c&&(a.c=this.c.slice());a.X=this.X;a.L=this.L;this.O&&(a.O=this.O.slice());this.ja&&(a.ja=this.ja.slice());this.Tb&&(a.Tb=this.Tb);this.ac&&(a.ac=this.ac);a.Db=this.Db;return a};
le.prototype.bind=function(a){le.eb.bind.call(this,a);null!=this.Tb&&(this.X=a[this.Tb.Aa()]);null!=this.ac&&(this.L=a[this.ac.Aa()]);ke(this,a);return this};function ne(a,b){this.Ea=a;this.aa=b}ne.prototype.jb=g("Ea");ne.prototype.ca=g("aa");function pe(a){var b=C();a.forEach(function(a){a.ca().forEach(b.add.bind(b))});return b};function qe(a,b){this.global=a;this.Ma=a.l(kc);this.sd=b.map(function(a){return a.context});this.ef=b.map(function(a){return a.ge});this.Jd=pe(this.ef);this.ve=re(this);this.cb=x()}function re(a){return a.sd.some(function(a){return!(a instanceof le)})?1:0}m=qe.prototype;
m.exec=function(){function a(){var f=d.shift();if(f){var h=e[c.length];return f.jb().exec(b,h).then(function(b){c.push(b[0]);return a()})}return w()}var b=0==this.ve?void 0:new jd(this.global,this.Jd),c=[],d=this.ef.slice(),e=this.sd;return a().then(function(){return this.Ma.Gb(this.ve,D(this.Jd),b).ia()}.bind(this)).then(function(){this.de(c);return c}.bind(this),function(a){null!=b&&b.Lb();throw a;})};m.H=g("ve");m.ca=g("Jd");m.Pb=g("cb");m.Z=function(){return ka(this)};m.de=aa();function se(a,b){qe.call(this,a,b);this.Kb=a.l(pc)}t(se,qe);se.prototype.getPriority=l(0);se.prototype.de=function(a){this.sd.forEach(function(b,c){te(this.Kb,b,a[c])},this)};function ue(a,b){this.i=a;this.Kb=a.l(pc);this.Fa=a.l(oc);this.hd=new Gc(a);this.ub=b;var c=a.l(qc),d=this.ub.map(function(a){return c.table(a.getName())});this.aa=C(d);this.cb=x()}m=ue.prototype;m.exec=function(){this.hd.update(this.ub);this.Mc();return w()};m.H=l(1);m.ca=g("aa");m.Pb=g("cb");m.Z=function(){return ka(this)};m.getPriority=l(1);m.Mc=function(){var a=ve(this.Kb,this.aa);0!=a.length&&(a=new se(this.i,a),we(this.Fa,a))};function xe(a){this.i=a;this.Ma=a.l(kc);this.Fa=a.l(oc)}xe.prototype.be=function(a){a=new ue(this.i,a);we(this.Fa,a)};function N(a,b){this.Pa=a;this.j=b;this.Wa=z()}r("lf.backstore.FirebaseRawBackStore",N);N.prototype.dd=g("j");N.prototype.ed=function(){throw new E(351);};function ye(a,b){var c=x(),d=a;b.length&&(d=a.child(b));d.once("value",function(a){c.resolve(a.val())},function(a){c.reject(a)});return c.da}function ze(a,b,c){function d(a){a?e.reject(a):e.resolve()}c=c||!1;var e=x();c?a.set(b,d):a.update(b,d);return e.da}
N.prototype.Ha=function(a){return ye(this.j,"@rev/R").then(function(a){this.Oa=a;return ye(this.j,"@table")}.bind(this)).then(function(b){var c=0,d;for(d in b)this.Wa.set(d,b[d]),b[d]>c&&(c=b[d]);a.ra().forEach(function(a){this.Wa.has(a.getName())||(b[a.getName()]=++c)},this);d=this.j.child("@table");return ze(d,b)}.bind(this))};
function Ae(a,b,c){var d=a.Wa.get(b);return null!=d?function(){var a={},b=x();this.j.orderByChild("T").equalTo(d).once("value",function(d){d.forEach(function(b){var d=c(b.val());a[parseInt(b.key(),10)]=d});b.resolve(a)});return b.da}.call(a).then(function(a){a["@rev"]={R:++this.Oa};return ze(this.j,a)}.bind(a)):w()}N.prototype.uc=function(a){return Ae(this,a,l(null)).then(function(){this.Wa.delete(a);return ze(this.j.child("@table/"+a),null,!0)}.bind(this))};N.prototype.dropTable=N.prototype.uc;
N.prototype.rc=function(a,b,c){return Ae(this,a,function(a){var e=a.P;e[b]=c;return{R:this.Oa+1,T:a.T,P:e}}.bind(this))};N.prototype.addTableColumn=N.prototype.rc;N.prototype.vc=function(a,b){return Ae(this,a,function(a){var d=a.P;delete d[b];return{R:this.Oa+1,T:a.T,P:d}}.bind(this))};N.prototype.dropTableColumn=N.prototype.vc;N.prototype.Lc=function(a,b,c){return Ae(this,a,function(a){var e=a.P;e[c]=e[b];delete e[b];return{R:this.Oa+1,T:a.T,P:e}}.bind(this))};N.prototype.renameTableColumn=N.prototype.Lc;
N.prototype.xb=function(){throw new E(351);};N.prototype.createRow=N.prototype.xb;N.prototype.Dc=g("Pa");N.prototype.getVersion=N.prototype.Dc;N.prototype.gc=function(a){var b=x();a=this.Wa.get(a);this.j.orderByChild("T").equalTo(a).once("value",function(a){var d=[];a.forEach(function(a){d.push(a.val().P)});b.resolve(d)});return b.da};N.prototype.dump=function(){var a={},b=Vb(this.Wa).map(function(b){return this.gc(b).then(function(d){a[b]=d})}.bind(this));return eb(b).then(function(){return a})};
N.prototype.dump=N.prototype.dump;function Be(a,b,c){cc.call(this,b,c);this.j=a}t(Be,cc);Be.prototype.I=function(a){return this.j.Bc(a)};
Be.prototype.tc=function(){if(0==this.ue)return this.S.resolve(),this.S.da;var a=this.Sa.ub;if(0==a.size)this.S.resolve();else{var b=this.j.Oa+1;this.j.Oa=b;var c={"@rev":{R:b}};a.forEach(function(a,e){var f=this.j.Wa.get(e);a.wa.forEach(function(a,d){c[d]={R:b,T:f,P:a.s}});a.na.forEach(function(a,d){c[d]={R:b,T:f,P:a[1].s}});a.za.forEach(function(a,b){c[b]=null})},this);this.j.j.update(c,function(c){null===c?this.S.resolve():(this.j.Oa=b-1,c=A(a).map(function(a){return Ce(this.j,a.getName())},this),
eb(c).then(this.S.reject.bind(this.S),this.S.reject.bind(this.S)))}.bind(this))}return this.S.da};function De(){this.ya=z()}function Ee(a,b){if(0==b.length)return A(a.ya);var c=[];b.forEach(function(a){a=this.ya.get(a)||null;null===a||c.push(a)},a);return c}De.prototype.getData=g("ya");De.prototype.get=function(a){return w(Ee(this,a))};function Fe(a,b){b.forEach(function(a){this.ya.set(a.id(),a)},a)}De.prototype.put=function(a){Fe(this,a);return w()};function Ge(a,b){0==b.length||b.length==a.ya.size?a.ya.clear():b.forEach(function(a){this.ya.delete(a)},a)}
De.prototype.remove=function(a){Ge(this,a);return w()};function He(a){return 0==a.ya.size?0:Vb(a.ya).reduce(function(a,c){return a>c?a:c},0)};function Ie(a,b){this.g=a;this.Af=b;this.Kc=z();this.Oa=-1;this.M=z();this.Wa=z();this.Gd=null}m=Ie.prototype;
m.Ha=function(a){this.j=this.Af.child(this.g.name());var b=a||function(){return w()};return ye(this.j,"@db/version").then(function(a){return null===a?ze(this.j,Je(this),!0).then(function(){var a=new N(0,this.j);return b(a)}.bind(this)):a==this.g.version()?ye(this.j,"@rev/R").then(function(a){this.Oa=a;return ye(this.j,"@table")}.bind(this)).then(function(a){for(var b in a)this.Wa.set(b,a[b]);a=this.g.ra().map(function(a){return Ce(this,a.getName())},this);return eb(a)}.bind(this)).then(function(){Ke(this);
Le(this);return w()}.bind(this)):this.ee(a,b).then(function(){return this.Ha()}.bind(this))}.bind(this))};m.ee=function(a,b){var c=new N(a,this.j);return c.Ha(this.g).then(function(){return w()}.bind(this)).then(function(){return b(c)}).then(function(){var a=this.j.child("@db");return ze(a,{version:this.g.version()},!0)}.bind(this))};
function Le(a){a.j.off();a.j.on("child_removed",a.og.bind(a));a.Hd&&(a.Hd.off(),a.Kc.clear());a.Hd=a.j.orderByChild("R").startAt(a.Oa+1);a.Hd.on("value",a.be.bind(a))}function Ke(a){Xb=A(a.M).map(function(a){return He(a)}).reduce(function(a,c){return a>c?a:c},0)+1}m.og=function(a){var b=a.val(),c=this.Kc.get(b.T)||null;null===c&&(c=C(),this.Kc.set(b.T,c));c.add(parseInt(a.key(),10))};
m.be=function(a){var b=a.child("@rev/R").val();null!=b&&b!=this.Oa&&(this.Oa=b,a=Me(this,a),a.forEach(function(a){var b=this.M.get(a.getName()),e=Vb(a.za);0<e.length&&Ge(b,e);var f=A(a.wa);a.na.forEach(function(a){f.push(a[1])});Fe(b,f)},this),0<a.length&&this.Gc(a),Le(this))};
function Me(a,b){var c=C(),d=z();a.Wa.forEach(function(a,b){var h=this.M.get(b),k=new hd(b);if(this.Kc.has(a)){var n=D(this.Kc.get(a));n.forEach(function(a){c.add(a)});Ee(h,n).forEach(function(a){k.delete(a)})}d.set(a,k)}.bind(a));b.forEach(function(a){if("@rev"!=a.key()){var b=parseInt(a.key(),10);if(!c.has(b)){var h=a.val();a=d.get(h.T);var k=this.M.get(a.getName()),h=this.g.table(a.getName()).hb({id:b,value:h.P});k.getData().has(b)?a.modify([Ee(k,[b])[0],h]):a.add(h)}}}.bind(a));return A(d).filter(function(a){return!a.kd()})}
function Ce(a,b){var c=x(),d=a.Wa.get(b),e=a.g.table(b);a.j.orderByChild("T").equalTo(d).once("value",function(a){var d=new De,k=[];a.forEach(function(a){k.push(e.hb({id:parseInt(a.key(),10),value:a.val().P}))});Fe(d,k);this.M.set(b,d);c.resolve()}.bind(a));return c.da}function Je(a){var b={};b["@db"]={version:a.g.version()};b["@rev"]={R:1};a.Oa=1;b["@table"]={};a.g.ra().forEach(function(a,d){var e=a.getName();b["@table"][e]=d;this.M.set(e,new De);this.Wa.set(e,d)},a);return b}
m.Gb=function(a,b,c){return new Be(this,a,c)};m.Bc=function(a){var b=this.M.get(a)||null;if(null!==b)return b;throw new E(101,a);};m.close=aa();m.subscribe=ba("Gd");m.Gc=function(a){null!=this.Gd&&this.Gd(a)};function P(a,b,c,d){this.j=b;this.Ya=c;this.Pa=a;this.Vc=d}r("lf.backstore.IndexedDBRawBackStore",P);P.prototype.dd=g("j");P.prototype.getRawDBInstance=P.prototype.dd;P.prototype.ed=g("Ya");P.prototype.getRawTransaction=P.prototype.ed;P.prototype.uc=function(a){return new v(function(b,c){try{this.j.deleteObjectStore(a)}catch(d){c(d);return}b()},this)};P.prototype.dropTable=P.prototype.uc;
function Ne(a,b,c,d){return new v(function(a,f){var h;try{var k=this.Ya.objectStore(b);h=k.openCursor()}catch(n){f(n);return}h.onsuccess=function(){var b=h.result;b?(c(b),b.continue()):(d(k),a())};h.onerror=f},a)}function Oe(a){var b=null;return b=a instanceof ArrayBuffer?ac(a):a instanceof Date?a.getTime():a}
function Pe(a,b,c){function d(a){var b=Bc(a.value),d=b.s,e;for(e in d){var B=Yb(d[e]);c(B);d[e]=B.Ga()}a.update(b.Ga())}function e(a){var b=Yb(a.value);c(b);a.update(b.Ga())}return Ne(a,b,a.Vc?d:e,aa())}P.prototype.rc=function(a,b,c){var d=Oe(c);return Pe(this,a,function(a){a.s[b]=d})};P.prototype.addTableColumn=P.prototype.rc;P.prototype.vc=function(a,b){return Pe(this,a,function(a){delete a.s[b]})};P.prototype.dropTableColumn=P.prototype.vc;
P.prototype.Lc=function(a,b,c){return Pe(this,a,function(a){a.s[c]=a.s[b];delete a.s[b]})};P.prototype.renameTableColumn=P.prototype.Lc;function Qe(a,b){var c=[];return new v(function(a,e){var f;try{f=this.Ya.objectStore(b).openCursor()}catch(h){e(h);return}f.onsuccess=function(){var b=f.result;if(b){if(this.Vc){var e;e=Bc(b.value).s;for(var n in e)c.push(e[n])}else c.push(b.value);b.continue()}else a(c)}.bind(this);f.onerror=e},a)}P.prototype.xb=function(a){var b={},c;for(c in a)b[c]=Oe(a[c]);return Zb(b)};
P.prototype.createRow=P.prototype.xb;P.prototype.Dc=g("Pa");P.prototype.getVersion=P.prototype.Dc;P.prototype.dump=function(){for(var a=this.j.objectStoreNames,b=[],c=0;c<a.length;++c){var d=a.item(c);b.push(this.gc(d))}return eb(b).then(function(b){var c={};b.forEach(function(b,d){c[a.item(d)]=b});return c})};P.prototype.dump=P.prototype.dump;P.prototype.gc=function(a){return Qe(this,a).then(function(a){return a.map(function(a){return a.value})})};function Re(a,b){this.Y=a;this.Hb=b}Re.prototype.get=function(a){if(0==a.length)return null!=this.Y.getAll?Se(this):Te(this);a=a.map(function(a){return new v(function(c,d){var e;try{e=this.Y.get(a)}catch(f){d(f);return}e.onerror=d;e.onsuccess=function(a){c(this.Hb(a.target.result))}.bind(this)},this)},this);return eb(a)};
function Te(a){return new v(function(a,c){var d=[],e;try{e=this.Y.openCursor()}catch(f){c(f);return}e.onerror=c;e.onsuccess=function(){var c=e.result;c?(d.push(this.Hb(c.value)),c.continue()):a(d)}.bind(this)},a)}function Se(a){return new v(function(a,c){var d;try{d=this.Y.getAll()}catch(e){c(e);return}d.onerror=c;d.onsuccess=function(){var c=d.result.map(function(a){return this.Hb(a)},this);a(c)}.bind(this)},a)}
Re.prototype.Vb=function(a){return new v(function(b,c){var d;try{d=a()}catch(e){c(e);return}d.onsuccess=b;d.onerror=c},this)};Re.prototype.put=function(a){if(0==a.length)return w();a=a.map(function(a){return this.Vb(function(){return this.Y.put(a.Ga())}.bind(this))},this);return eb(a)};
Re.prototype.remove=function(a){return new v(function(b,c){var d=this.Y.count();d.onsuccess=function(d){if(0==a.length||d.target.result==a.length)return this.Vb(function(){return this.Y.clear()}.bind(this)).then(b,c);d=a.map(function(a){return this.Vb(function(){return this.Y.delete(a)}.bind(this))},this);eb(d).then(b,c)}.bind(this);d.onerror=c},this)};function Ue(a,b,c,d,e){cc.call(this,c,e);this.i=a;this.Ya=b;this.Vc=d;this.Ya.oncomplete=this.S.resolve.bind(this.S);this.Ya.onabort=this.S.reject.bind(this.S)}t(Ue,cc);Ue.prototype.I=function(a,b,c){return this.Vc?(c=null!=c?c:0,a=this.Ya.objectStore(a),new Cc(a,b,0==c?qa(Ec,this.i):Fc)):new Re(this.Ya.objectStore(a),b)};Ue.prototype.tc=function(){return this.S.da};function Ve(a,b){this.i=a;this.g=b;this.Dd=b.ff().Mf||!1}m=Ve.prototype;
m.Ha=function(a){var b=window.indexedDB||window.mozIndexedDB||window.webkitIndexedDB||window.msIndexedDB;if(null==b)throw new E(352);var c=a||function(){return w()};return new v(function(a,e){var f;try{f=b.open(this.g.name(),this.g.version())}catch(h){e(h);return}f.onerror=e;f.onupgradeneeded=function(a){We(this,c,a).then(aa(),e)}.bind(this);f.onsuccess=function(b){this.j=b.target.result;this.ne().then(function(b){Xb=b+1;a(this.j)}.bind(this))}.bind(this)},this)};
function We(a,b,c){var d=c.target.result;c=new P(c.oldVersion,d,c.target.transaction,a.Dd);Xe(d);a.g.ra().forEach(qa(a.Hf,d),a);return b(c)}function Xe(a){for(var b=[],c=0;c<a.objectStoreNames.length;++c){var d=a.objectStoreNames.item(c);-1!=d.indexOf(".")&&b.push(d)}b.forEach(function(b){try{a.deleteObjectStore(b)}catch(c){}})}m.Hf=function(a,b){a.objectStoreNames.contains(b.getName())||a.createObjectStore(b.getName(),{keyPath:"id"});b.Eb()&&(b.Ba().forEach(function(b){Ye(a,b.m())},this),Ye(a,Ze(b)))};
function Ye(a,b){a.objectStoreNames.contains(b)||a.createObjectStore(b,{keyPath:"id"})}m.Gb=function(a,b,c){b=this.j.transaction($e(b),0==a?"readonly":"readwrite");return new Ue(this.i,b,a,this.Dd,c)};function $e(a){var b=C();a.forEach(function(a){b.add(a.getName());a.Eb()&&(a.Ba().forEach(function(a){b.add(a.m())}),b.add(Ze(a)))});return D(b)}
m.ne=function(a){function b(){if(0==d.length)return w();var a=d.shift();return c(a).then(b)}function c(b){return new v(function(c,d){var O;try{O=(a||e.transaction([b])).objectStore(b).openCursor(null,"prev")}catch(da){d(da);return}O.onsuccess=function(a){(a=a.target.result)&&(f=Math.max(f,h(a)));c(f)};O.onerror=function(){c(f)}})}var d=this.g.ra().map(function(a){return a.getName()}),e=this.j,f=0,h=function(a){return this.Dd?(a=Bc(a.value),Object.keys(a.s).reduce(function(a,b){return Math.max(a,b)},
0)):a.key}.bind(this);return new v(function(a){b().then(function(){a(f)})})};m.close=function(){this.j.close()};m.Bc=function(){throw new E(511);};m.subscribe=aa();m.Gc=aa();function af(a,b,c){cc.call(this,b,c);this.Y=a;0==b&&this.S.resolve()}t(af,cc);af.prototype.I=function(a){return this.Y.Bc(a)};af.prototype.tc=function(){this.S.resolve();return this.S.da};function bf(a){this.g=a;this.M=z()}m=bf.prototype;m.Ha=function(){this.g.ra().forEach(this.Zf,this);return w()};m.Bc=function(a){var b=this.M.get(a)||null;if(null===b)throw new E(101,a);return b};m.Gb=function(a,b,c){return new af(this,a,c)};function cf(a,b){if(!a.M.has(b)){var c=new De;a.M.set(b,c)}}m.Zf=function(a){cf(this,a.getName());a.Eb()&&(a.Ba().forEach(function(a){cf(this,a.m())},this),cf(this,Ze(a)))};m.close=aa();m.subscribe=aa();m.Gc=aa();function df(a){bf.call(this,a);this.od=null}t(df,bf);df.prototype.subscribe=function(a){null===this.od&&(this.od=a)};df.prototype.Gc=function(a){null===this.od||this.od(a)};function ef(a,b,c){this.Ya=a;this.A=b;this.Hb=c}ef.prototype.get=function(a){var b=this.Hb;return ff(this.Ya,"SELECT id, value FROM "+this.A+" "+(0==a.length?"":"WHERE id IN ("+a.join(",")+")"),[],function(a){for(var d=a.rows.length,e=Array(d),f=0;f<d;++f)e[f]=b({id:a.rows.item(f).id,value:JSON.parse(a.rows.item(f).value)});return e})};
ef.prototype.put=function(a){if(0==a.length)return w();var b="INSERT OR REPLACE INTO "+this.A+"(id, value) VALUES (?, ?)";a.forEach(function(a){ff(this.Ya,b,[a.id(),JSON.stringify(a.s)])},this);return w()};ef.prototype.remove=function(a){ff(this.Ya,"DELETE FROM "+this.A+" "+(0==a.length?"":"WHERE id IN ("+a.join(",")+")"),[]);return w()};function gf(a,b,c){cc.call(this,b,c);this.j=a;this.M=z();this.Kd=[]}t(gf,cc);function hf(a){return a.replace(".","__d__").replace("#","__s__")}gf.prototype.I=function(a,b){var c=this.M.get(a)||null;null===c&&(c=new ef(this,hf(a),b),this.M.set(a,c));return c};function ff(a,b,c,d){var e=x();a.Kd.push({Cg:b,sg:c,transform:d,S:e});return e.da}
gf.prototype.tc=function(){var a=null,b=this.S.reject.bind(this.S),c=function(a,b){this.S.reject(b)}.bind(this),d=[],e=function(b,h){if(null!==a){var k=h;null!=a.transform&&null!=h&&(k=a.transform(h));d.push(k);a.S.resolve(k)}0<this.Kd.length?(a=k=this.Kd.shift(),b.executeSql(k.Cg,k.sg,e,c)):this.S.resolve(d)}.bind(this);0==this.ue?this.j.readTransaction(e,b):this.j.transaction(e,b);return this.S.da};function Q(a,b,c){this.j=c;this.i=a;this.Pa=b}r("lf.backstore.WebSqlRawBackStore",Q);Q.prototype.dd=g("j");Q.prototype.getRawDBInstance=Q.prototype.dd;Q.prototype.ed=function(){throw new E(356);};Q.prototype.getRawTransaction=Q.prototype.ed;function jf(a){return new gf(a.j,1,new jd(a.i,C()))}Q.prototype.uc=function(a){var b=jf(this);ff(b,"DROP TABLE "+a,[]);return b.ia()};Q.prototype.dropTable=Q.prototype.uc;
Q.prototype.gc=function(a){var b=jf(this);ff(b,"SELECT id, value FROM "+a,[]);return b.ia().then(function(a){for(var b=a[0].rows.length,e=Array(b),f=0;f<b;++f)e[f]={id:a[0].rows.item(f).id,value:JSON.parse(a[0].rows.item(f).value)};return w(e)})};function kf(a,b,c){var d=jf(a),e="UPDATE "+b+" SET value=? WHERE id=?";return a.gc(b).then(function(a){a.forEach(function(a){a=c(a);ff(d,e,[JSON.stringify(a.value),a.id])});return d.ia()})}
Q.prototype.rc=function(a,b,c){var d=Oe(c);return kf(this,a,function(a){a.value[b]=d;return a})};Q.prototype.addTableColumn=Q.prototype.rc;Q.prototype.vc=function(a,b){return kf(this,a,function(a){delete a.value[b];return a})};Q.prototype.dropTableColumn=Q.prototype.vc;Q.prototype.Lc=function(a,b,c){return kf(this,a,function(a){a.value[c]=a.value[b];delete a.value[b];return a})};Q.prototype.renameTableColumn=Q.prototype.Lc;Q.prototype.xb=function(a){var b={},c;for(c in a)b[c]=Oe(a[c]);return Zb(b)};
Q.prototype.createRow=Q.prototype.xb;Q.prototype.Dc=g("Pa");Q.prototype.getVersion=Q.prototype.Dc;function mf(a){ff(a,'SELECT tbl_name FROM sqlite_master WHERE type="table"',[],function(a){for(var c=Array(a.rows.length),d=0;d<c.length;++d)c[d]=a.rows.item(d).tbl_name;return c})}
Q.prototype.dump=function(){var a=x(),b=jf(this);mf(b);var c={};b.ia().then(function(b){b=b[0].filter(function(a){return"__lf_ver"!=a&&"__WebKitDatabaseInfoTable__"!=a}).map(function(a){return this.gc(a).then(function(b){c[a]=b})},this);eb(b).then(function(){a.resolve(c)})}.bind(this));return a.da};Q.prototype.dump=Q.prototype.dump;function nf(a,b,c){this.i=a;this.g=b;this.Bg=c||4194304}m=nf.prototype;m.Ha=function(a){if(null==window.openDatabase)throw new E(353);var b=a||function(){return w()};return new v(function(a,d){try{var e=window.openDatabase(this.g.name(),"",this.g.name(),this.Bg);if(null!=e)this.j=e,of(this,b).then(a,d);else throw new E(354);}catch(f){d(f)}},this)};
function of(a,b){var c=x(),d=new gf(a.j,1,new jd(a.i,C()));ff(d,"CREATE TABLE IF NOT EXISTS __lf_ver(id INTEGER PRIMARY KEY, v INTEGER)",[]);ff(d,"SELECT v FROM __lf_ver WHERE id = 0",[]);d.ia().then(function(a){var d=0;a[1].rows.length&&(d=a[1].rows.item(0).v);d<this.g.version()?this.ee(b,d).then(c.resolve.bind(c)):d>this.g.version()?c.reject(new E(108)):c.resolve()}.bind(a));return c.da}m.Gb=function(a,b,c){if(null!=this.j)return new gf(this.j,a,c);throw new E(2);};m.close=aa();
m.Bc=function(){throw new E(512);};m.subscribe=function(){throw new E(355);};m.Gc=function(){throw new E(355);};m.ee=function(a,b){var c=x();pf(this).then(function(){a(new Q(this.i,b,this.j)).then(function(){return this.ne()}.bind(this)).then(c.resolve.bind(c))}.bind(this),c.reject.bind(c));return c.da};
function pf(a){var b=a.g.ra(),c=new gf(a.j,1,new jd(a.i,C())),d=new gf(a.j,1,new jd(a.i,C()));ff(c,"INSERT OR REPLACE INTO __lf_ver VALUES (0, ?)",[a.g.version()]);mf(c);return c.ia().then(function(a){var c=a[1];c.filter(function(a){return-1!=a.indexOf("__d__")}).forEach(function(a){ff(d,"DROP TABLE "+a,[])});var h=[],k=[],n=[];b.map(function(a){-1==c.indexOf(a.getName())&&h.push(a.getName());a.Eb&&(a.Ba().forEach(function(a){a=hf(a.m());h.push(a);k.push(a)}),a=hf(Ze(a)),h.push(a),n.push(a))});h.forEach(function(a){ff(d,
"CREATE TABLE "+a+"(id INTEGER PRIMARY KEY, value TEXT)",[])});return d.ia()})}m.ne=function(){var a=0,b=x(),c=function(b){var c=new gf(this.j,0);ff(c,"SELECT MAX(id) FROM "+b,[]);return c.ia().then(function(b){b=b[0].rows.item(0)[0];a=Math.max(b,a)})}.bind(this),d=this.g.ra().map(function(a){return c(a.getName())});eb(d).then(function(){b.resolve(a)},function(a){b.reject(a)});return b.da};function qf(a){this.o=z();this.bc=z();a.ra().forEach(function(a){this.bc.set(a.getName(),C())},this)}m=qf.prototype;m.set=function(a,b){this.o.set(b.id(),b);this.bc.get(a).add(b.id())};m.Yb=function(a,b){var c=this.bc.get(a);b.forEach(function(a){this.o.set(a.id(),a);c.add(a.id())},this)};m.get=function(a){return this.o.get(a)||null};function rf(a,b){return b.map(function(a){return this.get(a)},a)}
m.ab=function(a,b,c){var d=[],e=Math.min(b,c),f=Math.max(b,c);a=this.bc.get(a);if(a.size<f-e)a.forEach(function(a){a>=e&&a<=f&&(a=this.o.get(a),d.push(a))},this);else for(b=e;b<=f;++b)a.has(b)&&(c=this.o.get(b),d.push(c));return d};m.remove=function(a,b){this.o.delete(b);this.bc.get(a).delete(b)};m.Ac=function(a){return null!=a?this.bc.get(a).size:this.o.size};m.clear=function(){this.o.clear();this.bc.clear()};function sf(a,b,c){var d=0,e=a.length;for(c=c||tf;d<e;){var f=d+e>>1;0>c(a[f],b)?d=f+1:e=f}return d==e&&a[d]==b?d:~d}function tf(a,b){return a-b}function uf(a,b,c){c=sf(a,b,c);return 0>c?(a.splice(-(c+1),0,b),!0):!1};function vf(a,b,c,d){a=b?a.reverse():a;if(null==c&&null==d)return a;c=Math.min(q(c)?c:a.length,a.length);if(0==c)return[];d=Math.min(d||0,a.length);return a.slice(d,d+c)};function wf(){this.la=0}wf.prototype.add=function(a,b){this.la+=b};wf.prototype.remove=function(a,b){this.la-=b};wf.prototype.clear=function(){this.la=0};function xf(a,b){a.clear();b.forEach(function(a){this.la+=a.la},a)};function yf(a,b,c,d){this.A=a;this.W=b;this.vf=c;this.sb=new wf;if(d){a=511;a*=a*a;if(d.length>=a)throw new E(6,a);d=zf(this,d);this.qa=d=Af(d)}else this.clear()}var Bf=[];m=yf.prototype;m.getName=g("A");m.toString=function(){return this.qa.toString()};m.add=function(a,b){this.qa=this.qa.Bb(a,b)};m.set=function(a,b){this.qa=this.qa.Bb(a,b,!0)};m.remove=function(a,b){this.qa=this.qa.remove(a,b)};m.get=function(a){return this.qa.get(a)};
m.Zc=function(a){if(null==a)return this.La().la;if(a instanceof F){if(pd(a))return this.La().la;if(td(a))return this.get(a.c).length}return this.ab([a]).length};m.La=g("sb");m.Rd=function(a,b,c,d){c=Array(a);this.qa.fill({offset:b?this.sb.la-a-d:d,count:a,qe:0},c);return b?c.reverse():c};
m.ab=function(a,b,c,d){var e=Cf(this.qa).b[0];if(!q(e)||0==c)return Bf;b=b||!1;c=null!=c?Math.min(c,this.sb.la):this.sb.la;d=d||0;var f=Math.min(Math.max(this.sb.la-d,0),c);if(0==f)return Bf;if(!q(a)||1==a.length&&a[0]instanceof F&&pd(a[0]))return this.Rd(f,b,c,d);a=this.W.rf(a);var h=Array(b?this.sb.la:f),k={count:0,X:h.length,reverse:b,L:d},n=1<e.length;a.forEach(function(a){for(var b=this.W.td(a),b=this.W.Ud(a)?e:b[0],b=Df(this.qa,b),c=0;null!=b&&k.count<k.X;){if(n){for(var d=b,f=a,$b=k,Ab=h,Vc=
d.B.Nb(),oe=-1,Ka=0;Ka<d.b.length;++Ka)if(Vc.Cb(d.b[Ka],f)){oe=Ka;break}if(-1!=oe)for(Ka=oe;Ka<d.b.length&&$b.count<$b.X;++Ka)Vc.Cb(d.b[Ka],f)&&Ef(d,$b,Ab,Ka)}else b.ab(a,k,h);0!=k.L||b.ld(a)?c=0:c++;b=2==c?null:b.next()}},this);h.length>k.count&&h.splice(k.count,h.length-k.count);return b?vf(h,b,c,d):h};m.clear=function(){this.qa=Ff(this);this.sb.clear()};m.Na=function(a){return this.qa.Na(a)};m.min=function(){return this.Jb(this.W.min.bind(this.W))};m.max=function(){return this.Jb(this.W.max.bind(this.W))};
function Gf(a,b,c){if(!a.W.Ld(b.b[c]))if(1<b.b[c].length){if(null===b.b[c][0])return null}else return null;return[b.b[c],a.vf?[b.C[c]]:b.C[c]]}m.Jb=function(a){var b;a:{b=Cf(this.qa);var c=0;do if(c>=b.b.length)b=b.ua,c=0;else{var d=Gf(this,b,c);if(null!==d){b=d;break a}c++}while(null!==b);b=null}a:{c=Hf(this.qa);d=c.b.length-1;do if(0>d)c=c.ob,d=0;else{var e=Gf(this,c,d);if(null!==e){c=e;break a}d--}while(null!==c);c=null}return null===b||null===c?null:1==a(b[0],c[0])?b:c};m.Ja=g("vf");m.Nb=g("W");
m.Yd=function(a,b){return null!=a?-1==this.W.compare(a,b):!1};m.Qa=function(a,b){return null!=a?0==this.W.compare(a,b):!1};m.Ga=function(){for(var a=[],b=Cf(this.qa);b;)a.push(new Wb(b.oa,[b.b,b.C])),b=b.ua;return a};function If(a,b,c,d){a=new yf(b,a,c);d=Jf(d,a);a.qa=d;return a}function Kf(a,b){this.oa=a;this.B=b;this.kb=0;this.ua=this.ob=this.G=null;this.b=[];this.C=[];this.h=[]}function Ff(a){return new Kf(Xb++,a)}function R(a){return 0==a.kb}m=Kf.prototype;m.next=g("ua");
function Lf(a){function b(a){return null!=a?a.oa.toString():"_"}var c=a.oa+"["+a.b.join("|")+"]",d=a.h.map(function(a){return a.oa}).join("|"),e=a.C.join("/"),f=b(a.ob)+"{",f=R(a)?f+e:f+d,f=f+"}"+b(a.G);a.ua&&(a=Lf(a.ua),c=c+"  "+a[0],f=f+"  "+a[1]);return[c,f]}m.toString=function(){var a="",b=Lf(this),a=a+(b[0]+"\n"+b[1]+"\n");this.h.length&&(a+=this.h[0].toString());return a};function Cf(a){return R(a)?a:Cf(a.h[0])}function Hf(a){return R(a)?a:Hf(a.h[a.h.length-1])}
function Mf(a,b){b&&(b.ob=a);a&&(a.ua=b)}function zf(a,b){for(var c=b.length,d=0,e=Ff(a),f=e;0<c;){var h=768<=c?511:257<=c&&511>=c?c:257,k=b.slice(d,d+h);e.b=k.map(function(a){return a.key});e.C=k.map(function(a){return a.value});d+=h;c-=h;0<c&&(h=Ff(e.B),Mf(e,h),e=h)}return f}function Nf(a){var b=a[0],c=Ff(b.B);c.kb=b.kb+1;c.h=a;for(b=0;b<a.length;++b)a[b].G=c,0<b&&c.b.push(a[b].b[0]);return c}
function Af(a){var b=a,c=[];do c.push(b),b=b.ua;while(b);if(512>=c.length)b=Nf(c);else{var d=c.length,e=0,b=Ff(a.B);for(b.kb=a.kb+2;0<d;){a=768<=d?511:257<=d&&511>=d?d:257;var f=c.slice(e,e+a),h=Nf(f);h.G=b;b.h.length&&(b.b.push(f[0].b[0]),Mf(b.h[b.h.length-1],h));b.h.push(h);e+=a;d-=a}}return b}m.get=function(a){var b=Of(this,a);if(R(this)){var c=Bf;this.B.Qa(this.b[b],a)&&(c=c.concat(this.C[b]));return c}b=this.B.Qa(this.b[b],a)?b+1:b;return this.h[b].get(a)};
m.Na=function(a){var b=Of(this,a);return this.B.Qa(this.b[b],a)?!0:R(this)?!1:this.h[b].Na(a)};m.remove=function(a,b){Pf(this,a,-1,b);if(null===this.G){var c=this;1==this.h.length&&(c=this.h[0],c.G=null);return c}return this};function Qf(a){return R(a)?a.b[0]:Qf(a.h[0])}function Rf(a){a.b=[];for(var b=1;b<a.h.length;++b)a.b.push(Qf(a.h[b]))}
function Pf(a,b,c,d){var e=Of(a,b),f=R(a);if(!f){var h=a.B.Qa(a.b[e],b)?e+1:e;if(Pf(a.h[h],b,h,d))Rf(a);else return!1}else if(!a.B.Qa(a.b[e],b))return!1;if(a.b.length>e&&a.B.Qa(a.b[e],b)){if(q(d)&&!a.B.Ja()&&f&&(h=a.C[e],d=sf(h,d,void 0),0>d?d=!1:(h.splice(d,1),d=!0),d&&a.B.La().remove(b,1),a.C[e].length))return!1;a.b.splice(e,1);f&&(f=a.B.Ja()?1:a.C[e].length,a.C.splice(e,1),a.B.La().remove(b,f))}if(256>a.b.length&&null!==a.G){a:{b=null;if(a.ua&&256<a.ua.b.length)b=a.ua,e=d=0,f=a.b.length+1;else if(a.ob&&
256<a.ob.b.length)b=a.ob,d=a.ob.b.length-1,e=R(a)?d:d+1,f=0;else{b=!1;break a}a.b.splice(f,0,b.b[d]);b.b.splice(d,1);d=R(a)?a.C:a.h;h=null;R(a)?h=b.C:(h=b.h,h[e].G=a);d.splice(f,0,h[e]);h.splice(e,1);R(b)||(Rf(b),Rf(a));b=!0}b||Sf(a,c)}return!0}
function Sf(a,b){var c,d,e;a.ua&&511>a.ua.b.length?(c=a.ua,e=d=0):a.ob&&(c=a.ob,d=c.b.length,e=R(c)?c.C.length:c.h.length);d=[d,0].concat(a.b);Array.prototype.splice.apply(c.b,d);d=null;R(a)?d=a.C:(d=a.h,d.forEach(function(a){a.G=c}));d=[e,0].concat(d);Array.prototype.splice.apply(R(c)?c.C:c.h,d);Mf(a.ob,a.ua);R(c)||Rf(c);-1!=b&&(a.G.b.splice(b,1),a.G.h.splice(b,1))}
m.Bb=function(a,b,c){var d=Of(this,a);if(R(this)){if(this.B.Qa(this.b[d],a)){if(c)this.B.La().remove(a,this.B.Ja()?1:this.C[d].length),this.C[d]=this.B.Ja()?b:[b];else{if(this.B.Ja())throw new E(201);if(!uf(this.C[d],b))throw new E(109);}this.B.La().add(a,1);return this}this.b.splice(d,0,a);this.C.splice(d,0,this.B.Ja()?b:[b]);this.B.La().add(a,1);512==this.b.length?(d=Ff(this.B),a=Ff(this.B),a.kb=1,a.b=[this.b[256]],a.h=[this,d],a.G=this.G,this.G=a,d.b=this.b.splice(256),d.C=this.C.splice(256),d.G=
a,Mf(d,this.ua),Mf(this,d),d=a):d=this;return d}d=this.B.Qa(this.b[d],a)?d+1:d;a=this.h[d].Bb(a,b,c);R(a)||1!=a.b.length||(this.b.splice(d,0,a.b[0]),a.h[1].G=this,a.h[0].G=this,this.h.splice(d,1,a.h[1]),this.h.splice(d,0,a.h[0]));return 512==this.b.length?Tf(this):this};function Tf(a){var b=Ff(a.B),c=Ff(a.B);b.G=a.G;b.kb=a.kb+1;b.b=[a.b[256]];b.h=[a,c];a.b.splice(256,1);c.G=b;c.kb=a.kb;c.b=a.b.splice(256);c.h=a.h.splice(257);c.h.forEach(function(a){a.G=c});a.G=b;Mf(c,a.ua);Mf(a,c);return b}
function Of(a,b){for(var c=0,d=a.b.length;c<d;){var e=c+d>>1;a.B.Yd(a.b[e],b)?c=e+1:d=e}return c}function Df(a,b){if(!R(a)){var c=Of(a,b);a.B.Qa(a.b[c],b)&&c++;return Df(a.h[c],b)}return a}
m.ab=function(a,b,c){function d(a){return a[0]?a[1]?0:1:-1}var e=this.B.Nb(),f=0,h=this.b.length-1,k=this.b,n=d(e.wb(k[f],a)),B=d(e.wb(k[h],a));if(1!=n&&(-1!=n||-1!=B)){var O=function(a,b){var c=a+b>>1;return c==a?c+1:c},da=function(b,c,f){if(b>=c)return 0==f?c:-1;var h=d(e.wb(k[b],a));if(0==h)return b;if(1==h)return-1;h=O(b,c);if(h==c)return 0==f?c:-1;var n=d(e.wb(k[h],a));return 0==n?da(b,h,n):-1==n?da(h+1,c,f):da(b+1,h,n)},zb=function(b,c){if(b>=c)return b;var f=d(e.wb(k[c],a));if(0==f)return c;
if(-1==f)return b;f=O(b,c);if(f==c)return b;var h=d(e.wb(k[f],a));return 0==h?zb(f,c):1==h?zb(b,f-1):-1};0!=n&&(f=da(f+1,h,B));-1!=f&&(h=zb(f,h),-1!=h&&h>=f&&Uf(this,b,c,f,h+1))}};function Ef(a,b,c,d){if(a.B.Ja())!b.reverse&&b.L?b.L--:c[b.count++]=a.C[d];else for(var e=0;e<a.C[d].length&&b.count<c.length;++e)!b.reverse&&b.L?b.L--:c[b.count++]=a.C[d][e]}function Uf(a,b,c,d,e){for(;d<e&&(b.reverse||!(b.count>=b.X));++d)Ef(a,b,c,d)}
m.fill=function(a,b){if(R(this))for(var c=0;c<this.C.length&&0<a.count;++c)if(0<a.offset){if(a.offset-=this.B.Ja()?1:this.C[c].length,0>a.offset)for(var d=this.C[c].length+a.offset;d<this.C[c].length&&0<a.count;++d)b[a.qe++]=this.C[c][d],a.count--}else if(this.B.Ja())b[a.qe++]=this.C[c],a.count--;else for(d=0;d<this.C[c].length&&0<a.count;++d)b[a.qe++]=this.C[c][d],a.count--;else for(c=0;c<this.h.length&&0<a.count;++c)this.h[c].fill(a,b)};
function Jf(a,b){for(var c=b.La(),d=a.map(function(a){var d=new Kf(a.id(),b);d.b=a.s[0];d.C=a.s[1];d.b.forEach(function(a,e){c.add(a,b.Ja()?1:d.C[e].length)});return d}),e=0;e<d.length-1;++e)Mf(d[e],d[e+1]);return 1<d.length?Af(d[0]):d[0]}m.ld=function(a){return this.B.Nb().ld(this.b[0],a)};function Vf(a){this.Yc=0==a?Xf:Yf;this.$d=0==a?function(a){return null!=a?a.reverse():null}:function(a){return a||null};this.fe=0==a?Zf:$f}function Yf(a,b){return a>b?1:a<b?-1:0}function Xf(a,b){return Yf(b,a)}function $f(a,b){return ud(a,b)}function Zf(a,b){return ud(b,a)}m=Vf.prototype;m.wb=function(a,b){var c=this.$d(b),d=[c.c==G,c.u==G];if(!d[0]){var e=this.Yc(a,c.c);d[0]=c.ea?1==e:-1!=e}d[1]||(e=this.Yc(a,c.u),d[1]=c.ma?-1==e:1!=e);return d};m.compare=function(a,b){return this.Yc(a,b)};
m.min=function(a,b){return a<b?1:a==b?0:-1};m.max=function(a,b){return a>b?1:a==b?0:-1};m.Cb=function(a,b){var c=this.wb(a,b);return c[0]&&c[1]};m.ld=function(a,b){return this.Cb(a,b)};m.rf=function(a){return a.filter(function(a){return null!==a}).sort(function(a,c){return this.fe(a,c)}.bind(this))};m.Ud=function(a){return this.$d(a).c==G};m.td=function(a){a=this.$d(a);return[a.c,a.u]};m.Ld=function(a){return null!==a};m.toString=function(){return this.compare==Xf?"SimpleComparator_DESC":"SimpleComparator_ASC"};
function ag(a){Vf.call(this,a);this.Yc=0==a?bg:cg}t(ag,Vf);function cg(a,b){return null===a?null===b?0:-1:null===b?1:Yf(a,b)}function bg(a,b){return cg(b,a)}ag.prototype.Cb=function(a,b){return null===a?pd(b):ag.eb.Cb.call(this,a,b)};ag.prototype.Jb=function(a,b){return null===a?null===b?0:-1:null===b?1:null};ag.prototype.min=function(a,b){var c=this.Jb(a,b);null===c&&(c=ag.eb.min.call(this,a,b));return c};ag.prototype.max=function(a,b){var c=this.Jb(a,b);null===c&&(c=ag.eb.max.call(this,a,b));return c};function dg(a){this.sa=a.map(function(a){return new Vf(a)})}function eg(a,b,c,d){for(var e=0,f=0;f<a.sa.length&&0==e;++f)e=d(a.sa[f],b[f],c[f]);return e}m=dg.prototype;m.compare=function(a,b){return eg(this,a,b,function(a,b,e){return b==G||e==G?0:a.compare(b,e)})};m.min=function(a,b){return eg(this,a,b,function(a,b,e){return a.min(b,e)})};m.max=function(a,b){return eg(this,a,b,function(a,b,e){return a.max(b,e)})};
m.wb=function(a,b){for(var c=[!0,!0],d=0;d<this.sa.length&&(c[0]||c[1]);++d){var e=this.sa[d].wb(a[d],b[d]);c[0]=c[0]&&e[0];c[1]=c[1]&&e[1]}return c};m.Cb=function(a,b){for(var c=!0,d=0;d<this.sa.length&&c;++d)c=this.sa[d].Cb(a[d],b[d]);return c};m.ld=function(a,b){return this.sa[0].Cb(a[0],b[0])};
m.rf=function(a){var b=a.filter(function(a){return a.every(ga)});a=Array(this.sa.length);for(var c=0;c<a.length;c++)a[c]=b.map(function(a){return a[c]});a.forEach(function(a,b){a.sort(function(a,c){return this.sa[b].fe(a,c)}.bind(this))},this);b=Array(b.length);for(c=0;c<b.length;c++)b[c]=a.map(function(a){return a[c]});return b.sort(function(a,b){for(var c=0,h=0;h<this.sa.length&&0==c;++h)c=this.sa[h].fe(a[h],b[h]);return c}.bind(this))};m.Ud=function(a){return this.sa[0].Ud(a[0])};
m.td=function(a){var b=a.map(function(a,b){return this.sa[b].td(a)[0]},this);a=a.map(function(a,b){return this.sa[b].td(a)[1]},this);return[b,a]};m.Ld=function(a){return a.every(function(a,c){return this.sa[c].Ld(a)},this)};function fg(a){dg.call(this,a);this.sa=a.map(function(a){return new ag(a)})}t(fg,dg);function gg(a){if(1==a.f.length)return new Vf(a.f[0].nb);var b=a.f.map(function(a){return a.nb});return a.f.some(function(a){return a.ba.kc()})?new fg(b):new dg(b)};function hg(a){this.ga=a;this.mb=C();this.Nc=new wf;this.sb=new wf}m=hg.prototype;m.getName=function(){return this.ga.getName()};m.add=function(a,b){null===a?(this.mb.add(b),this.Nc.add(a,1)):this.ga.add(a,b)};m.set=function(a,b){null===a?(this.mb.clear(),this.Nc.clear(),this.add(a,b)):this.ga.set(a,b)};m.remove=function(a,b){null===a?b?(this.mb.delete(b),this.Nc.remove(a,1)):(this.mb.clear(),this.Nc.clear()):this.ga.remove(a,b)};m.get=function(a){return null===a?D(this.mb):this.ga.get(a)};m.Zc=function(a){return this.ga.Zc(a)};
m.La=function(){xf(this.sb,[this.ga.La(),this.Nc]);return this.sb};m.ab=function(a,b,c,d){b=this.ga.ab(a,b,c,d);return null!=a?b:b.concat(D(this.mb))};m.clear=function(){this.mb.clear();this.ga.clear()};m.Na=function(a){return null===a?0!=this.mb.size:this.ga.Na(a)};m.min=function(){return this.ga.min()};m.max=function(){return this.ga.max()};m.Ga=function(){return[new Wb(-2,D(this.mb))].concat(this.ga.Ga())};m.Nb=function(){return this.ga.Nb()};
function ig(a,b){for(var c=-1,d=0;d<b.length;++d)if(-2==b[d].id()){c=d;break}if(-1==c)throw new E(102);var d=b[c].s,e=b.slice(0);e.splice(c,1);var c=a(e),f=new hg(c);d.forEach(function(a){f.mb.add(a)});return f}m.Ja=function(){return this.ga.Ja()};function jg(a){this.A=a;this.rb=C();this.W=new Vf(1)}m=jg.prototype;m.getName=g("A");m.add=function(a){if("number"!=typeof a)throw new E(103);this.rb.add(a)};m.set=function(a,b){this.add(a,b)};m.remove=function(a){this.rb.delete(a)};m.get=function(a){return this.Na(a)?[a]:[]};m.min=function(){return this.Jb(this.W.min.bind(this.W))};m.max=function(){return this.Jb(this.W.max.bind(this.W))};
m.Jb=function(a){if(0==this.rb.size)return null;var b=D(this.rb).reduce(function(b,d){return null===b||1==a(d,b)?d:b},null);return[b,[b]]};m.Zc=function(){return this.rb.size};m.ab=function(a,b,c,d){var e=a||[sd()];a=D(this.rb).filter(function(a){return e.some(function(b){return this.W.Cb(a,b)},this)},this);return vf(a,b,c,d)};m.clear=function(){this.rb.clear()};m.Na=function(a){return this.rb.has(a)};m.Ga=function(){return[new Wb(0,D(this.rb))]};m.Nb=g("W");
function kg(a,b){var c=new jg(a);b[0].s.forEach(function(a){c.add(a,a)});return c}m.Ja=l(!0);m.La=function(){var a=new wf;a.la=this.rb.size;return a};function lg(a){this.Ma=a.l(kc);this.F=a.l(mc);this.V=a.l(lc)}lg.prototype.Ha=function(a){var b=a.ra(),c=function(){if(0==b.length)return w();var a=b.shift();return(a.Eb()?mg(this,a):ng(this,a)).then(c)}.bind(this);return c()};function ng(a,b){var c=a.Ma.Gb(0,[b]),d=c.I(b.getName(),b.hb.bind(b),0).get([]).then(function(a){this.V.Yb(b.getName(),a);og(this,b,a)}.bind(a));c.ia();return d}
function og(a,b,c){var d=a.F.nc.get(b.getName())||[];c.forEach(function(a){d.forEach(function(b){var c=a.lb(b.getName());b.add(c,a.id())})})}function mg(a,b){var c=a.Ma.Gb(0,[b]),d=c.I(b.getName(),b.hb,0).get([]).then(function(a){this.V.Yb(b.getName(),a)}.bind(a)),e=b.Ba().map(function(a){return pg(this,a,c)},a).concat(qg(a,b,c));c.ia();return eb(e.concat(d))}
function pg(a,b,c){c=c.I(b.m(),Yb,1);var d=gg(b);return c.get([]).then(function(a){if(0<a.length){if(rg(b)){var c=If.bind(void 0,d,b.m(),b.Ec);a=ig(c,a)}else a=If(d,b.m(),b.Ec,a);this.F.set(b.Oc,a)}}.bind(a))}function qg(a,b,c){return c.I(Ze(b),Yb,1).get([]).then(function(a){0<a.length&&(a=kg(Ze(b),a),this.F.set(b.getName(),a))}.bind(a))};function sg(){this.Y=z();this.nc=z()}sg.prototype.Ha=function(a){a.ra().forEach(function(a){var c=[];this.nc.set(a.getName(),c);var d=Ze(a);if(null===this.get(d)){var e=new jg(d);c.push(e);this.Y.set(d,e)}a.Ba().forEach(function(a){var b;b=gg(a);b=new yf(a.m(),b,a.Ec);b=rg(a)&&1==a.f.length?new hg(b):b;c.push(b);this.Y.set(a.m(),b)},this)},this);return w()};sg.prototype.get=function(a){return this.Y.get(a)||null};
sg.prototype.set=function(a,b){var c=this.nc.get(a)||null;null===c&&(c=[],this.nc.set(a,c));for(var d=null,e=0;e<c.length;e++)if(c[e].getName()==b.getName()){d=e;break}null!==d&&0<c.length?c.splice(d,1,b):c.push(b);this.Y.set(b.getName(),b)};function tg(a){this.mc=[];q(a)&&this.add(a)}tg.prototype.toString=function(){return this.mc.map(function(a){return a.toString()}).join(",")};tg.prototype.Na=function(a){return this.mc.some(function(b){return b.contains(a)})};tg.prototype.ta=g("mc");
tg.prototype.add=function(a){if(0!=a.length)if(a=this.mc.concat(a),1==a.length)this.mc=a;else{a.sort(ud);for(var b=[],c=a[0],d=1;d<a.length;++d)if(qd(c,a[d])){var e=a[d],f=sd();if(c.c!=G&&e.c!=G){var h=rd(c.c,e.c,!0);1!=h?(f.c=c.c,f.ea=0!=h?c.ea:c.ea&&e.ea):(f.c=e.c,f.ea=e.ea)}c.u!=G&&e.u!=G&&(h=rd(c.u,e.u,!1),-1!=h?(f.u=c.u,f.ma=0!=h?c.ma:c.ma&&e.ma):(f.u=e.u,f.ma=e.ma));c=f}else b.push(c),c=a[d];b.push(c);this.mc=b}};
function ug(a,b){var c=[];a.ta().map(function(a){return b.ta().map(function(b){var c;if(qd(a,b)){c=sd();var h=rd(a.c,b.c,!0),h=0==h?a.ea?a:b:-1!=h?a:b;c.c=h.c;c.ea=h.ea;a.u==G||b.u==G?b=a.u==G?b:a:(h=rd(a.u,b.u,!1),b=0==h?a.ma?a:b:-1==h?a:b);c.u=b.u;c.ma=b.ma}else c=null;return c})}).forEach(function(a){c=c.concat(a)});return new tg(c.filter(function(a){return null!==a}))};function vg(a,b){var c=[],d=null,e=null;Zd(a,function(a){var h=b(a);null==a.getParent()?e=h:Wd(d,h);var k=a.getParent();null!==k&&M(k).length==M(d).length&&(k=c.indexOf(d),-1!=k&&c.splice(k,1));1<M(a).length&&c.push(h);d=null===a.h?c[c.length-1]:h});return e}function wg(a){return xg(a,function(a){return null===a.h})}
function yg(a){var b=a.getParent(),c=0;null!==b&&(c=M(b).indexOf(a),b.removeChild(a));var d=M(a).slice();d.forEach(function(d,f){a.removeChild(d);null===b||Vd(b,d,c+f)});return{parent:b,children:d}}function zg(a,b){M(a).slice().forEach(function(c){a.removeChild(c);Wd(b,c)});Wd(a,b)}function Ag(a){var b=Ud(a,0);yg(a);zg(b,a);return b}
function Bg(a,b,c){var d=Ud(a,0),e=M(d).slice();if(!e.some(function(a){return b(a)}))return a;yg(a);e.forEach(function(e,h){if(b(e)){var k=c(a);Xd(d,h);Wd(k,e);Vd(d,k,h)}});return d}function Cg(a,b,c,d){var e=a.getParent();null!==e&&(a=M(e).indexOf(a),Xd(e,a),Vd(e,c,a));M(b).slice().forEach(function(a){b.removeChild(a);Wd(d,a)});return c}function xg(a,b,c){function d(a){b(a)&&e.push(a);null!=c&&c(a)||M(a).forEach(d)}var e=[];d(a);return e}
function Dg(a,b){var c=b||function(a){return a.toString()+"\n"},d="";Zd(a,function(a){for(var b=0;b<Td(a);b++)d+="-";d+=c(a)});return d};function Eg(a){$d.call(this);this.Ub=a;this.Ra=!1}t(Eg,$d);m=Eg.prototype;m.Ob=function(){return vg(this,function(a){if(a instanceof Eg){var b=new Eg(a.Ub);b.Ra=a.Ra;a=a.Z();b.oa=a;return b}return a.Ob()})};m.ib=function(a){var b=a||[];Zd(this,function(a){a!=this&&a.ib(b)}.bind(this));a=C(b);return D(a)};m.vd=function(a){this.Ra!=a&&(this.Ra=a,this.Ub="and"==this.Ub?"or":"and",M(this).forEach(function(b){return b.vd(a)}))};
m.eval=function(a){var b=M(this).map(function(b){return b.eval(a)});return Fg(this,b)};function Fg(a,b){return"and"==a.Ub?Bd(b):Cd(b)}m.toString=function(){return"combined_pred_"+this.Ub.toString()};function Gg(a,b,c){$d.call(this);this.ha=a;this.ka=b;this.D=c;this.ae=null;a=Qd();this.wc=Rd(a,this.ha.H(),this.D);this.dg=a.Ve.get(this.ha.H())||null}t(Gg,$d);m=Gg.prototype;m.Ob=function(){var a=new Gg(this.ha,this.ka,this.D),b=this.Z();a.oa=b;return a};m.ib=function(a){return null!=a?(a.push(this.ha),a.push(this.ka),a):[this.ha,this.ka]};
m.reverse=function(){var a=this.D;switch(this.D){case "gt":a="lt";break;case "lt":a="gt";break;case "gte":a="lte";break;case "lte":a="gte"}return new Gg(this.ka,this.ha,a)};m.eval=function(a){var b=a.entries.filter(function(a){var b=J(a,this.ha);a=J(a,this.ka);return this.wc(b,a)},this);return new H(b,I(a))};m.toString=function(){return"join_pred("+this.ha.m()+" "+this.D+" "+this.ka.m()+")"};
function Hg(a,b,c){var d=null,e=null;-1!=I(b).indexOf(K(a.ha.I()))?(d=b,e=c):(d=c,e=b);if(d.entries.length>e.entries.length){a:{b=a.ha;a.ha=a.ka;a.ka=b;b=a.D;switch(a.D){case "gt":b="lt";break;case "lt":b="gt";break;case "gte":b="lte";break;case "lte":b="gte";break;default:break a}a.D=b;a.wc=Rd(Qd(),a.ha.H(),a.D)}return[e,d]}return[d,e]}function Ig(a){var b={};a.ib().forEach(function(a){b[a.getName()]=null});return b}
function Jg(a,b,c){null===a.ae&&(a.ae=Ig(a.ka.I()));var d=new Ed(new Wb(-1,a.ae),!1);return Hd(b,c,d,[K(a.ka.I())])}
function Kg(a,b,c,d){var e=[b,c];d||(e=Hg(a,b,c));b=e[0];c=e[1];var e=b,f=c,h=a.ha,k=a.ka;d&&(e=c,f=b,h=a.ka,k=a.ha);var n=new Rc,B=[];e.entries.forEach(function(a){var b=String(J(a,h));n.set(b,a)});var O=I(e),da=I(f);f.entries.forEach(function(a){var b=J(a,k),c=String(b);null!==b&&n.has(c)?n.get(c).forEach(function(b){b=Hd(a,da,b,O);B.push(b)}):d&&B.push(Jg(this,a,da))}.bind(a));a=I(b).concat(I(c));return new H(B,a)}
function Lg(a,b,c,d,e){function f(a,b){var c=new Ed(b,1<O.length),c=Hd(a,da,c,O);B.push(c)}var h=d.Wf.I(),k=b,n=c;-1!=I(b).indexOf(K(h))&&(k=c,n=b);var B=[],O=I(n),da=I(k);k.entries.forEach(function(a){var b=this.dg(J(a,d.lg)),b=d.index.get(b);0!=b.length&&(d.index.Ja()?f(a,e.get(b[0])):rf(e,b).forEach(f.bind(null,a)))},a);a=I(k).concat(I(n));return new H(B,a)};function Mg(a,b,c){return null===b?new be(a,b,c):q(b.m)?new Gg(a,b,c):new be(a,b,c)};var Ng={};r("lf.schema.DataStoreType",Ng);Ng.INDEXED_DB=0;Ng.MEMORY=1;Ng.LOCAL_STORAGE=2;Ng.FIREBASE=3;Ng.WEB_SQL=4;Ng.OBSERVABLE_STORE=5;function Og(a,b,c,d){this.Oc=a;this.name=b;this.Ec=c;this.f=d}Og.prototype.m=function(){return this.Oc+"."+this.name};function rg(a){return a.f.some(function(a){return a.ba.kc()})}function S(a,b,c,d){this.A=a;this.pa=c;this.K=b;this.qd=d;this.fb=null}r("lf.schema.Table",S);S.prototype.getName=g("A");S.prototype.getName=S.prototype.getName;S.prototype.$a=g("fb");
function K(a){return a.fb||a.A}S.prototype.sc=function(a){var b=new this.constructor(this.A);b.fb=a;b.xg=this.xg;return b};S.prototype.as=S.prototype.sc;S.prototype.createRow=S.prototype.xb;S.prototype.deserializeRow=S.prototype.hb;S.prototype.Ba=g("pa");S.prototype.getIndices=S.prototype.Ba;S.prototype.ib=g("K");S.prototype.getColumns=S.prototype.ib;S.prototype.getConstraint=S.prototype.Ib;S.prototype.Eb=g("qd");S.prototype.persistentIndex=S.prototype.Eb;function Ze(a){return a.A+".#"};function T(a,b){this.child=a;this.Mb=b;this.fb=null}m=T.prototype;m.getName=function(){return this.Mb+"("+this.child.getName()+")"};m.m=function(){return this.Mb+"("+this.child.m()+")"};m.I=function(){return this.child.I()};m.toString=function(){return this.m()};m.H=function(){return this.child.H()};m.$a=g("fb");m.Ba=function(){return[]};m.Aa=l(null);m.kc=l(!1);m.sc=function(a){this.fb=a;return this};T.prototype.as=T.prototype.sc;
function Pg(a){for(var b=[a];a instanceof T;)b.push(a.child),a=a.child;return b}function Qg(a){this.fb=a||null;this.U=new S("#UnknownTable",[],[],!1)}m=Qg.prototype;m.getName=l("*");m.m=function(){return this.getName()};m.toString=function(){return this.m()};m.I=g("U");m.H=l(4);m.$a=g("fb");m.Ba=function(){return[]};m.Aa=l(null);m.kc=l(!1);r("lf.fn.avg",function(a){return new T(a,"AVG")});function Rg(a){return new T(a||new Qg,"COUNT")}r("lf.fn.count",Rg);function Sg(a){return new T(a,"DISTINCT")}r("lf.fn.distinct",Sg);r("lf.fn.max",function(a){return new T(a,"MAX")});r("lf.fn.min",function(a){return new T(a,"MIN")});r("lf.fn.stddev",function(a){return new T(a,"STDDEV")});r("lf.fn.sum",function(a){return new T(a,"SUM")});r("lf.fn.geomean",function(a){return new T(a,"GEOMEAN")});function U(a,b){L.call(this);this.Of=b}t(U,L);U.prototype.exec=function(a,b){switch(this.Of){case 1:return Tg(this,a,b);case 0:return Ug(this,a,b);default:return Vg(this,a,b)}};U.prototype.toString=l("dummy_node");U.prototype.Pc=function(){return this.toString()};function Vg(a,b,c){return new v(function(a){a(this.fa([],b,c))}.bind(a))}function Tg(a,b,c){return Ud(a,0).exec(b,c).then(function(a){return this.fa(a,b,c)}.bind(a))}
function Ug(a,b,c){var d=M(a).map(function(a){return a.exec(b,c)});return eb(d).then(function(a){var d=[];a.forEach(function(a){for(var b=0;b<a.length;++b)d.push(a[b])});return this.fa(d,b,c)}.bind(a))};function Wg(a){U.call(this,0,1);this.Be=a}t(Wg,U);Wg.prototype.toString=function(){return"aggregation("+this.Be.map(function(a){return a.m()}).toString()+")"};Wg.prototype.fa=function(a){a.forEach(function(a){Xg(new Yg(a,this.Be))},this);return a};function Yg(a,b){this.Ka=a;this.K=b}
function Xg(a){a.K.forEach(function(a){a=Pg(a).reverse();for(var c=1;c<a.length;c++){var d=a[c],e=Pg(d).slice(-1)[0],f=d.child instanceof T?yd(this.Ka,d.child):this.Ka;if(null!==f.Za&&f.Za.has(d.m()))break;f=Zg(d.Mb,f,e);e=this.Ka;null===e.Za&&(e.Za=z());e.Za.set(d.m(),f)}},a)}
function Zg(a,b,c){var d=null;switch(a){case "MIN":d=$g(b,c,function(a,b){return b<a?b:a});break;case "MAX":d=$g(b,c,function(a,b){return b>a?b:a});break;case "DISTINCT":d=ah(b,c);break;case "COUNT":d=bh(b,c);break;case "SUM":d=ch(b,c);break;case "AVG":a=bh(b,c);0<a&&(d=ch(b,c)/a);break;case "GEOMEAN":d=dh(b,c);break;default:d=eh(b,c)}return d}function $g(a,b,c){return a.entries.reduce(function(a,e){var f=J(e,b);return null===f?a:null===a?f:c(a,f)},null)}
function bh(a,b){return b instanceof Qg?a.entries.length:a.entries.reduce(function(a,d){return a+(fa(J(d,b))?0:1)},0)}function ch(a,b){return $g(a,b,function(a,b){return b+a})}function eh(a,b){var c=[];a.entries.forEach(function(a){a=J(a,b);null===a||c.push(a)});return 0==c.length?null:tb.apply(null,c)}function dh(a,b){var c=0,d=a.entries.reduce(function(a,d){var h=J(d,b);if(0==h||null===h)return a;c++;return a+Math.log(h)},0);return 0==c?null:Math.pow(Math.E,d/c)}
function ah(a,b){var c=z();a.entries.forEach(function(a){var e=J(a,b);c.set(e,a)});return new H(A(c),I(a))};function fh(a,b){this.Ea=a;this.aa=b}fh.prototype.jb=g("Ea");fh.prototype.ca=g("aa");function gh(){L.call(this)}t(gh,L);function hh(a,b){L.call(this);this.table=a;this.values=b}t(hh,gh);function ih(a,b){hh.call(this,a,b)}t(ih,hh);function jh(a){L.call(this);this.table=a}t(jh,gh);jh.prototype.toString=function(){return"delete("+this.table.getName()+")"};function kh(a,b){L.call(this);this.table=a;this.we=b}t(kh,gh);
kh.prototype.toString=function(){var a=[];this.we&&(a=this.we.map(function(a){return a.N.getName()},this));return"update("+this.table.getName()+", ["+a.join(",")+"])"};function lh(a){L.call(this);this.J=a}t(lh,gh);lh.prototype.toString=function(){return"select("+this.J.toString()+")"};function mh(a){L.call(this);this.table=a}t(mh,gh);mh.prototype.toString=function(){var a="table_access("+this.table.getName();null===this.table.$a()||(a+=" as "+this.table.$a());return a+")"};
function nh(){L.call(this)}t(nh,gh);nh.prototype.toString=l("cross_product");function oh(a,b){L.call(this);this.f=a;this.Qb=b}t(oh,gh);oh.prototype.toString=function(){var a="project("+this.f.toString();if(null!==this.Qb)var b=this.Qb.map(function(a){return a.m()}).join(", "),a=a+(", groupBy("+b+")");return a+")"};function ph(a){L.call(this);this.O=a}t(ph,gh);ph.prototype.toString=function(){return"order_by("+me(this.O)+")"};function qh(a){L.call(this);this.f=a}t(qh,gh);
qh.prototype.toString=function(){return"aggregation("+this.f.toString()+")"};function rh(a){L.call(this);this.f=a}t(rh,gh);rh.prototype.toString=function(){return"group_by("+this.f.toString()+")"};function sh(a){L.call(this);this.X=a}t(sh,gh);sh.prototype.toString=function(){return"limit("+this.X+")"};function th(a){L.call(this);this.L=a}t(th,gh);th.prototype.toString=function(){return"skip("+this.L+")"};function uh(a,b){L.call(this);this.J=a;this.Sb=b}t(uh,gh);
uh.prototype.toString=function(){return"join(type: "+(this.Sb?"outer":"inner")+", "+this.J.toString()+")"};function vh(){};function wh(){}t(wh,vh);wh.prototype.qb=function(a){this.$=a;this.Xa(this.$);return this.$};wh.prototype.Xa=function(a){if(a instanceof lh){var b=xh(this,a.J),b=yh(this,b);Cg(a,a,b[0],b[1]);a==this.$&&(this.$=b[0]);a=b[0]}M(a).forEach(function(a){this.Xa(a)},this)};function xh(a,b){if(0==M(b).length||"and"!=b.Ub)return[b];var c=M(b).slice().map(function(a){b.removeChild(a);return xh(this,a)},a);return Ea(c)}
function yh(a,b){var c=null,d=null;b.map(function(a,b){var h=new lh(a);0==b?c=h:Wd(d,h);d=h},a);return[c,d]};function zh(){}t(zh,vh);zh.prototype.qb=function(a,b){if(3>b.c.length)return a;this.$=a;this.Xa(this.$);return this.$};zh.prototype.Xa=function(a){if(a instanceof nh)for(;2<M(a).length;){for(var b=new nh,c=0;2>c;c++){var d=Xd(a,0);Wd(b,d)}Vd(a,b,0)}M(a).forEach(function(a){this.Xa(a)},this)};function Ah(){U.call(this,0,0)}t(Ah,U);Ah.prototype.toString=l("cross_product");Ah.prototype.fa=function(a){var b=a[0],c=a[1];a=[];for(var d=I(b),e=I(c),f=0;f<b.entries.length;f++)for(var h=0;h<c.entries.length;h++){var k=Hd(b.entries[f],d,c.entries[h],e);a.push(k)}b=I(b).concat(I(c));return[new H(a,b)]};function Bh(a,b){qe.call(this,a,b);this.Fa=a.l(oc);this.Kb=a.l(pc)}t(Bh,qe);Bh.prototype.getPriority=l(2);Bh.prototype.de=function(a){0==this.H()?Ch(this,a):this.Mc()};function Ch(a,b){a.sd.forEach(function(a,d){a instanceof le&&te(this.Kb,a,b[d])},a)}Bh.prototype.Mc=function(){var a=ve(this.Kb,this.ca());0!=a.length&&(a=new se(this.global,a),we(this.Fa,a))};function Dh(a){ge.call(this,a)}t(Dh,ge);Dh.prototype.ca=function(){var a=C();a.add(this.c);Eh(this,this.c.getName(),a);return a};function Eh(a,b,c){var d=Fh(a.ba.info(),b,1);Fh(a.ba.info(),b).forEach(c.add.bind(c));d.forEach(function(a){Eh(this,a.getName(),c)},a)}Dh.prototype.clone=function(){var a=new Dh(this.ba);je(a,this);a.c=this.c;return a};Dh.prototype.bind=function(a){Dh.eb.bind.call(this,a);ke(this,a);return this};function Gh(a){ge.call(this,a)}t(Gh,ge);Gh.prototype.ca=function(){var a=C();a.add(this.Ia);var b=this.ba.info();Hh(this.Ia.getName(),b.cf).forEach(a.add.bind(a));this.cc&&Fh(b,this.Ia.getName()).forEach(a.add.bind(a));return a};Gh.prototype.clone=function(){var a=new Gh(this.ba);je(a,this);a.Ia=this.Ia;this.values&&(a.values=this.values instanceof Id?this.values:this.values.slice());a.cc=this.cc;a.dc=this.dc;return a};
Gh.prototype.bind=function(a){Gh.eb.bind.call(this,a);this.dc&&(this.values=this.dc instanceof Id?a[this.dc.Aa()]:this.dc.map(function(b){return b instanceof Id?a[b.Aa()]:b}));return this};function Ih(a){ge.call(this,a)}t(Ih,ge);Ih.prototype.ca=function(){var a=C();a.add(this.table);var b=this.set.map(function(a){return a.N.m()}),c=this.ba.info();Jh(c,b).forEach(a.add.bind(a));Kh(c,b).forEach(a.add.bind(a));return a};Ih.prototype.clone=function(){var a=new Ih(this.ba);je(a,this);a.table=this.table;a.set=this.set?this.set.slice():this.set;return a};Ih.prototype.bind=function(a){Ih.eb.bind.call(this,a);this.set.forEach(function(b){-1!=b.Uc&&(b.value=a[b.Uc])});ke(this,a);return this};function Lh(a,b){if(null==b)return"NULL";switch(a){case 1:return b?1:0;case 3:case 4:return b;case 0:return"'"+ac(b)+"'";default:return"'"+b.toString()+"'"}}function Mh(a,b){var c=a.cc?"INSERT OR REPLACE":"INSERT",d=a.Ia.ib(),c=c+(" INTO "+a.Ia.getName()+"("),c=c+d.map(function(a){return a.getName()}).join(", "),c=c+") VALUES (";return a.values.map(function(a){var f=d.map(function(c){var d=a.s[c.getName()];return b?null!=d?"#":"NULL":Lh(c.H(),d)});return c+f.join(", ")+");"}).join("\n")}
function Nh(a){switch(a){case "between":return"BETWEEN";case "eq":return"=";case "gte":return">=";case "gt":return">";case "in":return"IN";case "lte":return"<=";case "lt":return"<";case "match":return"LIKE";case "neq":return"<>";default:return"UNKNOWN"}}function Oh(a,b,c,d){return a instanceof Id?"?"+a.Aa().toString():d?null!=a?"#":"NULL":"match"==b?"'"+a.toString()+"'":"in"==b?"("+a.map(function(a){return Lh(c,a)}).join(", ")+")":"between"==b?Lh(c,a[0])+" AND "+Lh(c,a[1]):Lh(c,a).toString()}
function Ph(a,b){return M(a).map(function(a){return"("+Qh(a,b)+")"}).join("and"==a.Ub?" AND ":" OR ")}function Rh(a){return[a.ha.m(),Nh(a.D),a.ka.m()].join(" ")}function Qh(a,b){if(a instanceof be){var c=a.N.m(),d=Nh(a.D),e=Oh(a.value,a.D,a.N.H(),b);return"="==d&&"NULL"==e?[c,"IS NULL"].join(" "):"<>"==d&&"NULL"==e?[c,"IS NOT NULL"].join(" "):[c,d,e].join(" ")}if(a instanceof Eg)return Ph(a,b);if(a instanceof Gg)return Rh(a);throw new E(357,typeof a);}
function Sh(a,b){var c=Qh(a,b);return c?" WHERE "+c:""}function Th(a,b){var c="UPDATE "+a.table.getName()+" SET ",c=c+a.set.map(function(a){var b=a.N.m()+" = ";return-1!=a.Uc?b+"?"+a.Uc.toString():b+Lh(a.N.H(),a.value).toString()}).join(", ");a.w&&(c+=Sh(a.w,b));return c+";"}
function Uh(a,b){var c="*";a.f.length&&(c=a.f.map(function(a){return a.$a()?a.m()+" AS "+a.$a():a.m()}).join(", "));c="SELECT "+c+" FROM ";null!=a.Db&&0!=a.Db.size?c+=Vh(a,b):(c+=a.c.map(Wh).join(", "),a.w&&(c+=Sh(a.w,b)));if(a.O)var d=a.O.map(function(a){return a.N.m()+(0==a.nb?" DESC":" ASC")}).join(", "),c=c+(" ORDER BY "+d);a.ja&&(d=a.ja.map(function(a){return a.m()}).join(", "),c+=" GROUP BY "+d);a.X&&(c+=" LIMIT "+a.X.toString());a.L&&(c+=" SKIP "+a.L.toString());return c+";"}
function Wh(a){return K(a)!=a.getName()?a.getName()+" AS "+K(a):a.getName()}function Vh(a,b){for(var c=xg(a.w,function(a){return a instanceof Gg}),d=c.map(Rh),e=Wh(a.c[0]),f=1;f<a.c.length;f++)var h=Wh(a.c[f]),e=a.Db.has(c[d.length-f].Z())?e+(" LEFT OUTER JOIN "+h):e+(" INNER JOIN "+h),e=e+(" ON ("+d[d.length-f]+")");c=Ud(a.w,0);c instanceof Gg||(e+=" WHERE "+Qh(c,b));return e}
function Xh(a,b){var c=b||!1,d=a.a.clone();if(d instanceof Gh)return Mh(d,c);if(d instanceof Dh){var e="DELETE FROM "+d.c.getName();d.w&&(e+=Sh(d.w,c));return e+";"}if(d instanceof Ih)return Th(d,c);if(d instanceof le)return Uh(d,c);throw new E(358,typeof d);};function V(a,b){this.global=a;this.wg=a.l(nc);this.Fa=a.l(oc);this.a=b}r("lf.query.BaseBuilder",V);V.prototype.exec=function(){try{this.gb()}catch(a){return bb(a)}return new v(function(a,b){var c=new Bh(this.global,[this.Cc()]);we(this.Fa,c).then(function(b){a(wd(b[0]))},b)},this)};V.prototype.exec=V.prototype.exec;V.prototype.Qf=function(){var a=function(a){return a.Pc(this.a)+"\n"}.bind(this);return Dg(Yh(this).jb(),a)};V.prototype.explain=V.prototype.Qf;
V.prototype.bind=function(a){this.a.bind(a);return this};V.prototype.bind=V.prototype.bind;V.prototype.Dg=function(a){return Xh(this,a)};V.prototype.toSql=V.prototype.Dg;V.prototype.gb=aa();function Yh(a){if(null==a.df){var b;b=a.wg;var c=a.a,d=b.gg.create(c);b=b.tg.create(d,c);a.df=b}return a.df}V.prototype.Cc=function(){return{context:this.a.clone(),ge:Yh(this)}};function Zh(a){V.call(this,a,new Dh(a.l(qc)))}t(Zh,V);r("lf.query.DeleteBuilder",Zh);Zh.prototype.c=function(a){if(null!=this.a.c)throw new E(515);this.a.c=a;return this};Zh.prototype.from=Zh.prototype.c;Zh.prototype.w=function(a){this.Cd();this.a.w=a;return this};Zh.prototype.where=Zh.prototype.w;Zh.prototype.Cd=function(){if(null==this.a.c)throw new E(548);if(null!=this.a.w)throw new E(516);};Zh.prototype.gb=function(){Zh.eb.gb.call(this);if(null==this.a.c)throw new E(517);};function $h(a,b){V.call(this,a,new Gh(a.l(qc)));this.a.cc=b||!1}t($h,V);r("lf.query.InsertBuilder",$h);$h.prototype.gb=function(){$h.eb.gb.call(this);var a=this.a;if(null==a.Ia||null==a.values)throw new E(518);if(a.cc&&null===a.Ia.Ib().cd())throw new E(519);};$h.prototype.Ia=function(a){if(null!=this.a.Ia)throw new E(520);this.a.Ia=a;return this};$h.prototype.into=$h.prototype.Ia;
$h.prototype.values=function(a){if(null!=this.a.values)throw new E(521);a instanceof Id||a.some(function(a){return a instanceof Id})?this.a.dc=a:this.a.values=a;return this};$h.prototype.values=$h.prototype.values;function ai(a){return bi("and",Array.prototype.slice.call(arguments))}r("lf.op.and",ai);r("lf.op.or",function(a){return bi("or",Array.prototype.slice.call(arguments))});function bi(a,b){var c=new Eg(a);b.forEach(function(a){Wd(c,a)});return c}r("lf.op.not",function(a){a.vd(!0);return a});function W(a,b){V.call(this,a,new le(a.l(qc)));this.Le=this.xd=!1;this.a.f=b;ci(this);di(this)}t(W,V);r("lf.query.SelectBuilder",W);W.prototype.gb=function(){W.eb.gb.call(this);var a=this.a;if(null==a.c)throw new E(522);if(q(a.Tb)&&!q(a.X)||q(a.ac)&&!q(a.L))throw new E(523);null!=this.a.ja?ei(this):fi(this)};function ci(a){var b=a.a.f.filter(function(a){return a instanceof T&&"DISTINCT"==a.Mb},a);if(0!=b.length&&(1!=b.length||1!=a.a.f.length))throw new E(524);}
function ei(a){var b=a.a.f.filter(function(a){return!(a instanceof T)}).map(function(a){return a.m()}),c=!1;if(0==a.a.ja.length||0==a.a.f.length)c=!0;else{var d=a.a.ja.map(function(a){return a.m()});(c=b.some(function(a){return-1==d.indexOf(a)}))||(c=a.a.ja.some(function(a){a=a.H();return 6==a||0==a}))}if(c)throw new E(525);}function fi(a){var b=a.a.f.some(function(a){return a instanceof T},a);a=a.a.f.some(function(a){return!(a instanceof T)},a)||0==a.a.f.length;if(b&&a)throw new E(526);}
function di(a){a.a.f.forEach(function(a){if(a instanceof T&&!gi(a.Mb,a.H()))throw new E(527,a.m());},a)}function hi(a,b){if(null==a.a.c)throw new E(b);}W.prototype.c=function(a){if(this.Le)throw new E(515);this.Le=!0;null==this.a.c&&(this.a.c=[]);this.a.c.push.apply(this.a.c,Array.prototype.slice.call(arguments));return this};W.prototype.from=W.prototype.c;W.prototype.w=function(a){hi(this,548);if(this.xd)throw new E(516);this.xd=!0;ii(this,a);return this};W.prototype.where=W.prototype.w;
function ii(a,b){if(null!=a.a.w){var c=ai(b,a.a.w);a.a.w=c}else a.a.w=b}W.prototype.$f=function(a,b){hi(this,542);if(this.xd)throw new E(547);this.a.c.push(a);ii(this,b);return this};W.prototype.innerJoin=W.prototype.$f;W.prototype.eg=function(a,b){hi(this,542);if(!(b instanceof Gg))throw new E(541);if(this.xd)throw new E(547);this.a.c.push(a);null==this.a.Db&&(this.a.Db=C());var c=b;K(a)!=K(b.ka.I())&&(c=b.reverse());this.a.Db.add(c.Z());ii(this,c);return this};W.prototype.leftOuterJoin=W.prototype.eg;
W.prototype.X=function(a){if(null!=(this.a.X||this.a.Tb))throw new E(528);if(a instanceof Id)this.a.Tb=a;else{if(0>a)throw new E(531);this.a.X=a}return this};W.prototype.limit=W.prototype.X;W.prototype.L=function(a){if(null!=(this.a.L||this.a.ac))throw new E(529);if(a instanceof Id)this.a.ac=a;else{if(0>a)throw new E(531);this.a.L=a}return this};W.prototype.skip=W.prototype.L;W.prototype.O=function(a,b){hi(this,549);null==this.a.O&&(this.a.O=[]);this.a.O.push({N:a,nb:null!=b?b:1});return this};
W.prototype.orderBy=W.prototype.O;W.prototype.ja=function(a){hi(this,549);if(null!=this.a.ja)throw new E(530);null==this.a.ja&&(this.a.ja=[]);this.a.ja.push.apply(this.a.ja,Array.prototype.slice.call(arguments));return this};W.prototype.groupBy=W.prototype.ja;function gi(a,b){switch(a){case "COUNT":case "DISTINCT":return!0;case "AVG":case "GEOMEAN":case "STDDEV":case "SUM":return 4==b||3==b;case "MAX":case "MIN":return 4==b||3==b||5==b||2==b}return!1}
W.prototype.clone=function(){var a=new W(this.global,this.a.f);a.a=this.a.clone();a.a.Xc=null;return a};W.prototype.clone=W.prototype.clone;function ji(a,b){V.call(this,a,new Ih(a.l(qc)));this.a.table=b}t(ji,V);r("lf.query.UpdateBuilder",ji);ji.prototype.set=function(a,b){var c={Uc:b instanceof Id?b.Aa():-1,N:a,value:b};null!=this.a.set?this.a.set.push(c):this.a.set=[c];return this};ji.prototype.set=ji.prototype.set;ji.prototype.w=function(a){this.Cd();this.a.w=a;return this};ji.prototype.where=ji.prototype.w;ji.prototype.Cd=function(){if(null!=this.a.w)throw new E(516);};
ji.prototype.gb=function(){ji.eb.gb.call(this);if(null==this.a.set)throw new E(532);if(this.a.set.some(function(a){return a.value instanceof Id}))throw new E(501);};function ki(a){this.a=a;this.Ea=null}ki.prototype.jc=function(){null===this.Ea&&(this.Ea=this.ad());return this.Ea};function li(a){ki.call(this,a)}t(li,ki);li.prototype.ad=function(){return this.a.cc?new ih(this.a.Ia,this.a.values):new hh(this.a.Ia,this.a.values)};function mi(a){ki.call(this,a)}t(mi,ki);mi.prototype.ad=function(){var a=new kh(this.a.table,this.a.set),b=null!=this.a.w?new lh(this.a.w.Ob()):null,c=new mh(this.a.table);null===b?Wd(a,c):(Wd(b,c),Wd(a,b));return a};function ni(a,b,c){this.Ea=a;this.he=b;this.Xb=c}ni.prototype.jc=function(){this.Xb.forEach(function(a){this.Ea=a.qb(this.Ea,this.he)},this);return this.Ea};function oi(a,b){ki.call(this,a);this.Xb=b}t(oi,ki);oi.prototype.ad=function(){var a=new jh(this.a.c),b=null!=this.a.w?new lh(this.a.w.Ob()):null,c=new mh(this.a.c);null===b?Wd(a,c):(Wd(b,c),Wd(a,b));return(new ni(a,this.a,this.Xb)).jc()};function pi(){}t(pi,vh);pi.prototype.qb=function(a,b){if(2>b.c.length)return a;this.$=a;this.Xa(this.$,b);return this.$};pi.prototype.Xa=function(a,b){if(a instanceof lh&&a.J instanceof Gg){var c=a.J.Z(),d=Ud(a,0);d instanceof nh&&(c=null!=b.Db&&b.Db.has(c),c=new uh(a.J,c),Cg(a,d,c,c),a==this.$&&(this.$=c),a=c)}M(a).forEach(function(a){this.Xa(a,b)},this)};function qi(){this.Tc=C()}t(qi,vh);qi.prototype.qb=function(a,b){this.Tc.clear();if(!q(b.w))return a;this.$=a;this.Xa(this.$);this.Tc.clear();return this.$};qi.prototype.Xa=function(a){if(ri(a)){var b=a.J instanceof be?si(this,a):ti(this,a);this.Tc.add(a);b==a&&(b=Ud(a,0));null!==b&&(fa(b.getParent())&&(this.$=b),ri(b)&&!this.Tc.has(b)&&this.Xa(b))}else M(a).forEach(function(a){this.Xa(a)},this)};
function ui(a,b,c){var d=b;if(Ud(b,0)instanceof lh)d=Ag(b),ui(a,b,c);else if(vi(b)){var e=[],d=Bg(b,c,function(a){a=new lh(a.J);e.push(a);return a});e.forEach(function(a){ui(this,a,c)},a)}return d}function si(a,b){var c=C([K(b.J.N.I())]),d=function(a){return wi(this,a,c)}.bind(a);return ui(a,b,d)}function ti(a,b){var c=C([K(b.J.ha.I()),K(b.J.ka.I())]),d=function(a){return wi(this,a,c)}.bind(a);return ui(a,b,d)}
function wi(a,b,c){var d=C();wg(b).forEach(function(a){d.add(K(a.table))},a);b instanceof mh&&d.add(K(b.table));return wc(d,c)}function ri(a){return a instanceof lh&&!(a.J instanceof Eg)}function vi(a){a=Ud(a,0);return a instanceof nh||a instanceof uh};function xi(a,b){ki.call(this,a);this.Xb=b;this.hf=this.Ze=this.qf=this.bf=this.Ce=this.Oe=this.pf=this.Ie=this.sf=null}t(xi,ki);
xi.prototype.ad=function(){yi(this);2<=this.a.c.length&&(this.Ie=new nh);this.pf=null!=this.a.w?new lh(this.a.w.Ob()):null;this.a.O&&(this.bf=new ph(this.a.O));null!=this.a.L&&0<this.a.L&&(this.qf=new th(this.a.L));null!=this.a.X&&(this.Ze=new sh(this.a.X));null!=this.a.ja&&(this.Oe=new rh(this.a.ja));zi(this);this.hf=new oh(this.a.f||[],this.a.ja||null);var a=Ai(this);return(new ni(a,this.a,this.Xb)).jc()};
function Ai(a){for(var b=[a.Ze,a.qf,a.hf,a.bf,a.Ce,a.Oe,a.pf,a.Ie],c=null,d=null,e=0;e<b.length;e++){var f=b[e];null!==f&&(null===d?d=f:Wd(b[c],f),c=e)}a.sf.forEach(function(a){Wd(b[c],a)});return d}function yi(a){a.sf=a.a.c.map(function(a){return new mh(a)},a)}function zi(a){var b=a.a.f.filter(function(a){return a instanceof T});null!=a.a.O&&a.a.O.forEach(function(a){a.N instanceof T&&b.push(a.N)});0<b.length&&(a.Ce=new qh(b))};function Bi(){this.oe=[new wh,new zh,new qi,new pi];this.Md=[new wh]}Bi.prototype.create=function(a){var b=null;if(a instanceof Gh)b=new li(a);else if(a instanceof Dh)b=new oi(a,this.Md);else if(a instanceof le)b=new xi(a,this.oe);else if(a instanceof Ih)b=new mi(a);else throw new E(513);b=b.jc();return new fh(b,a.ca())};function Ci(a){U.call(this,0,1);this.U=a}t(Ci,U);Ci.prototype.toString=function(){return"delete("+this.U.getName()+")"};Ci.prototype.fa=function(a,b){var c=a[0].entries.map(function(a){return a.va});b.remove(this.U,c);return[Ad()]};function Di(a,b){U.call(this,0,-1);this.table=b;this.F=a.l(mc)}t(Di,U);Di.prototype.toString=function(){return"get_row_count("+this.table.getName()+")"};Di.prototype.fa=function(){var a=this.F.get(Ze(this.table)),b=new H([],[this.table.getName()]),c=Rg(),a=a.La().la;null===b.Za&&(b.Za=z());b.Za.set(c.m(),a);return[b]};function Ei(a,b){U.call(this,0,-1);this.V=a.l(lc);this.F=a.l(mc);this.table=b}t(Ei,U);Ei.prototype.toString=function(){var a="table_access("+this.table.getName();null===this.table.$a()||(a+=" as "+this.table.$a());return a+")"};Ei.prototype.fa=function(){var a=this.F.get(Ze(this.table)).ab();return[Dd(rf(this.V,a),[K(this.table)])]};function Fi(a){this.i=a}t(Fi,vh);Fi.prototype.qb=function(a,b){this.$=a;if(!this.Ed(b))return a;var c=xg(a,function(a){return a instanceof Ei})[0],d=new Di(this.i,c.table);Cg(c,c,d,d);return this.$};Fi.prototype.Ed=function(a){return 1==a.f.length&&1==a.c.length&&null==a.w&&null==a.X&&null==a.L&&null==a.ja?(a=a.f[0],a instanceof T&&"COUNT"==a.Mb&&a.child instanceof Qg):!1};function Gi(a){U.call(this,0,1);this.Ne=a}t(Gi,U);Gi.prototype.toString=function(){return"groupBy("+this.Ne.map(function(a){return a.m()}).toString()+")"};Gi.prototype.fa=function(a){return Hi(this,a[0])};function Hi(a,b){var c=new Rc,d=function(a){return this.Ne.map(function(b){return J(a,b)},this).join(",")}.bind(a);b.entries.forEach(function(a){c.set(d(a),a)},a);return c.keys().map(function(a){return new H(c.get(a),I(b))},a)};function Ii(a,b,c){U.call(this,0,0);this.F=a.l(mc);this.V=a.l(lc);this.J=b;this.Sb=c;this.Ad="eq"==this.J.D?0:2;this.Qe=null}t(Ii,U);var Ji=["hash","index_nested_loop","nested_loop"];Ii.prototype.toString=function(){return"join(type: "+(this.Sb?"outer":"inner")+", impl: "+Ji[this.Ad]+", "+this.J.toString()+")"};
Ii.prototype.fa=function(a){switch(this.Ad){case 0:return[Kg(this.J,a[0],a[1],this.Sb)];case 1:return[Lg(this.J,a[0],a[1],this.Qe,this.V)];default:var b=this.J,c=a[0];a=a[1];var d=this.Sb,e=[c,a];d||(e=Hg(b,c,a));c=e[0];a=e[1];for(var e=[],f=I(c),h=I(a),k=c.entries.length,n=a.entries.length,B=n+256-1>>8,O=0;O<B;){for(var da=0;da<k;da++){var zb=!1,Wf=J(c.entries[da],b.ha);if(null!==Wf)for(var $b=Math.min(O+1<<8,n),Ab=O<<8;Ab<$b;Ab++)if(b.wc(Wf,J(a.entries[Ab],b.ka))){var zb=!0,Vc=Hd(c.entries[da],
f,a.entries[Ab],h);e.push(Vc)}d&&!zb&&e.push(Jg(b,c.entries[da],f))}O++}b=I(c).concat(I(a));return[new H(e,b)]}};function Ki(a,b){a.Ad=1;var c=a.F.get(b.Aa().m());a.Qe={Wf:b,lg:b==a.J.ha?a.J.ka:a.J.ha,index:c}};function Li(a){U.call(this,0,-1);this.jf=a}t(Li,U);Li.prototype.toString=function(){return"no_op_step("+I(this.jf[0]).join(",")+")"};Li.prototype.fa=g("jf");function Mi(){}t(Mi,vh);Mi.prototype.qb=function(a,b){this.$=a;if(!this.Ed(b))return a;xg(a,function(a){return a instanceof Ii}).forEach(this.vg,this);return this.$};Mi.prototype.Ed=function(a){return 1<a.c.length};
Mi.prototype.vg=function(a){if("eq"==a.J.D&&!a.Sb){var b=function(b){if(!(b instanceof Ei))return null;b=K(b.table)==K(a.J.ka.I())?a.J.ka:a.J.ha;return fa(b.Aa())?null:b},c=b(Ud(a,0)),b=b(Ud(a,1));if(null!==c||null!==b){b=null===b?c:b;Ki(a,b);var d=new H([],[K(b.I())]);Yd(a,new Li([d]),b==c?0:1)}}};function Ni(a){a=a.map(function(a){return a.ta()});a=yb.apply(null,a);var b=[];xb(a,function(a){b.push(a)});return b}function Oi(a){this.Rb=a}Oi.prototype.bd=function(){return 1==this.Rb.f.length?[sd()]:[this.Rb.f.map(function(){return sd()})]};function Pi(a,b){this.Rb=a;this.Da=b;this.Id=this.Xe=null}
function Qi(a,b){var c=z();a.Da.keys().forEach(function(a){var e=this.Da.get(a).map(function(a){return he(b,a)},this),f=new tg([sd()]);e.forEach(function(a){a=new tg(ee(a));f=ug(f,a)});c.set(a,f)},a);return c}Pi.prototype.bd=function(a){if(this.Xe==a)return this.Id;for(var b=Qi(this,a),c=this.Rb.f.length-1;0<=c;c--){var d=this.Rb.f[c];if(null!==(b.get(d.ba.getName())||null))break;b.set(d.ba.getName(),new tg([sd()]))}this.Id=1==this.Rb.f.length?A(b)[0].ta():Ni(Ri(this,b));this.Xe=a;return this.Id};
function Ri(a,b){var c=z(),d=0;a.Rb.f.forEach(function(a){c.set(a.ba.getName(),d);d++});return Vb(b).sort(function(a,b){return c.get(a)-c.get(b)}).map(function(a){return b.get(a)})};function Si(a,b){this.se=b;this.F=a.l(mc)}function Ti(a,b,c){c=c.filter(a.ag,a);if(0==c.length)return null;a=Ui(a,c);if(0==a.length)return null;if(1==a.length)return a[0];var d=Number.MAX_VALUE;return a.reduce(function(a,c){var h=Vi(c,b);return h<d?(d=h,c):a},null)}
function Ui(a,b){return a.se.Ba().map(function(a){a=new Wi(this.F,a);Xi(a,b);return a},a).filter(function(a){if(null===a.Da)a=!1;else{for(var b=!1,e=!0,f=0;f<a.Ab.f.length;f++){var h=a.Da.has(a.Ab.f[f].ba.getName());if(b&&h){e=!1;break}h||(b=!0)}a=e}return a})}
Si.prototype.ag=function(a){var b;if(b=a instanceof be)ce(a),b=null!==a.value&&("between"==a.D||"in"==a.D||"eq"==a.D||"gt"==a.D||"gte"==a.D||"lt"==a.D||"lte"==a.D);!(b=!b||a.N.I()!=this.se)&&(b="in"==a.D)&&(a=a.value.length,b=this.F.get(Ze(this.se)),b=Math.floor(.02*b.La().la),b=a>b);return b?!1:!0};function Wi(a,b){this.F=a;this.Ab=b;this.Xf=C(this.Ab.f.map(function(a){return a.ba.getName()}));this.Xd=this.Da=null}function Yi(a){null===a.Xd&&(a.Xd=new Pi(a.Ab,a.Da));return a.Xd}
function Xi(a,b){b.forEach(function(a){var b=a.ib()[0].getName();this.Xf.has(b)&&(null===this.Da&&(this.Da=new Rc),this.Da.set(b,a.Z()))},a)}function Vi(a,b){var c=Yi(a).bd(b),d=a.F.get(a.Ab.m());return c.reduce(function(a,b){return a+d.Zc(b)},0)};function Zi(a,b,c,d){U.call(this,0,-1);this.F=a.l(mc);this.index=b;this.We=c;this.le=d;this.Sc=this.Rc=!1}t(Zi,U);Zi.prototype.toString=function(){return"index_range_scan("+this.index.m()+", ?, "+(this.le?"reverse":"natural")+(this.Rc?", limit:?":"")+(this.Sc?", skip:?":"")+")"};Zi.prototype.Pc=function(a){var b=this.toString(),c=this.We.bd(a),b=b.replace("?",c.toString());this.Rc&&(b=b.replace("?",a.X.toString()));this.Sc&&(b=b.replace("?",a.L.toString()));return b};
Zi.prototype.fa=function(a,b,c){a=this.We.bd(c);b=this.F.get(this.index.m());c=(1==a.length&&a[0]instanceof F&&td(a[0])?vf(b.get(a[0].c),!1,this.Rc?c.X:void 0,this.Sc?c.L:void 0):b.ab(a,this.le,this.Rc?c.X:void 0,this.Sc?c.L:void 0)).map(function(a){return new Wb(a,{})},this);return[Dd(c,[this.index.Oc])]};function $i(a){U.call(this,0,1);this.rd=a}t($i,U);$i.prototype.toString=l("select(?)");$i.prototype.Pc=function(a){a=he(a,this.rd);return this.toString().replace("?",a.toString())};$i.prototype.fa=function(a,b,c){return[he(c,this.rd).eval(a[0])]};function aj(a,b){U.call(this,0,1);this.V=a.l(lc);this.U=b}t(aj,U);aj.prototype.toString=function(){return"table_access_by_row_id("+this.U.getName()+")"};aj.prototype.fa=function(a){return[Dd(rf(this.V,xd(a[0])),[K(this.U)])]};function bj(a){this.i=a}t(bj,vh);bj.prototype.qb=function(a,b){this.$=a;xg(a,function(a){return a instanceof Ei}).forEach(function(a){var d=cj(a);if(0!=d.length){var e=Ti(new Si(this.i,a.table),b,d.map(function(a){return he(b,a.rd)}));if(null!==e){var f=z();d.forEach(function(a){f.set(a.rd,a)},this);this.$=dj(this,e,f,a)}}},this);return this.$};function cj(a){var b=[];for(a=a.getParent();a;)a instanceof $i&&b.push(a),a=a.getParent();return b}
function dj(a,b,c,d){(null===b.Da?[]:b.Da.values()).map(function(a){return c.get(a)}).forEach(yg);b=new Zi(a.i,b.Ab,Yi(b),!1);a=new aj(a.i,d.table);Wd(a,b);Cg(d,d,a,b);return b.jb()};function ej(a,b){U.call(this,0,-1);this.F=a.l(mc);this.U=b}t(ej,U);ej.prototype.toString=function(){return"insert("+this.U.getName()+")"};ej.prototype.fa=function(a,b,c){fj(this.U,c.values,this.F);b.Bb(this.U,c.values);return[Dd(c.values,[this.U.getName()])]};function fj(a,b,c){a=a.Ib().cd();if(null===a?0:a.f[0].autoIncrement){var d=a.f[0].ba.getName();c=c.get(a.m()).max();var e=null===c?0:c[0];b.forEach(function(a){if(0==a.s[d]||null==a.s[d])e++,a.s[d]=e})}}
function gj(a,b){U.call(this,0,-1);this.F=a.l(mc);this.U=b}t(gj,U);gj.prototype.toString=function(){return"insert_replace("+this.U.getName()+")"};gj.prototype.fa=function(a,b,c){fj(this.U,c.values,this.F);b.Td(this.U,c.values);return[Dd(c.values,[this.U.getName()])]};function hj(){U.call(this,0,1)}t(hj,U);hj.prototype.toString=l("limit(?)");hj.prototype.Pc=function(a){return this.toString().replace("?",a.X.toString())};hj.prototype.fa=function(a,b,c){a[0].entries.splice(c.X);return a};function ij(a){U.call(this,0,1);this.O=a}t(ij,U);m=ij.prototype;m.toString=function(){return"order_by("+me(this.O)+")"};m.fa=function(a){if(1==a.length){var b;b=a[0];for(var c=null,d=0;d<this.O.length;d++){var e=Sg(this.O[d].N);if(null!==b.Za&&b.Za.has(e.m())){c=e;break}}b=c;(null===b?a[0]:yd(a[0],b)).entries.sort(this.Nf.bind(this))}else a.sort(this.yg.bind(this));return a};
m.W=function(a,b){var c=null,d=null,e=null,f=-1;do f++,e=this.O[f].N,c=this.O[f].nb,d=a(e),e=b(e);while(d==e&&f+1<this.O.length);d=d<e?-1:d>e?1:0;return 1==c?d:-d};m.yg=function(a,b){return this.W(function(b){return b instanceof T?yd(a,b):J(a.entries[a.entries.length-1],b)},function(a){return a instanceof T?yd(b,a):J(b.entries[b.entries.length-1],a)})};m.Nf=function(a,b){return this.W(function(b){return J(a,b)},function(a){return J(b,a)})};function jj(a,b){this.Ka=a;this.K=b}function kj(a){return a.K.some(function(a){return a instanceof T},a)?lj(a):mj(a)}function lj(a){if(1==a.K.length&&"DISTINCT"==a.K[0].Mb)return a=yd(a.Ka,a.K[0]).entries.map(function(a){var b=new Ed(new Wb(-1,{}),1<this.Ka.M.size);Gd(b,this.K[0],J(a,this.K[0].child));return b},a),new H(a,[]);var b=new Ed(new Wb(-1,{}),1<a.Ka.M.size);a.K.forEach(function(a){var d=a instanceof T?yd(this.Ka,a):J(this.Ka.entries[0],a);Gd(b,a,d)},a);return new H([b],I(a.Ka))}
function mj(a){var b=Array(a.Ka.entries.length),c=1<a.Ka.M.size;a.Ka.entries.forEach(function(a,e){b[e]=new Ed(new Wb(a.va.id(),{}),c);this.K.forEach(function(c){Gd(b[e],c,J(a,c))},this)},a);return new H(b,I(a.Ka))}function nj(a,b){var c=a.map(function(a){return kj(new jj(a,b)).entries[0]});return new H(c,I(a[0]))};function oj(a,b){U.call(this,0,1);this.f=a;this.Qb=b}t(oj,U);oj.prototype.toString=function(){var a="project("+this.f.toString();if(null!==this.Qb)var b=this.Qb.map(function(a){return a.m()}).join(", "),a=a+(", groupBy("+b+")");return a+")"};oj.prototype.fa=function(a){0==a.length?a=[Ad()]:1==a.length?(a=a[0],a=[0==this.f.length?a:kj(new jj(a,this.f))]):a=[nj(a,this.f)];return a};function pj(a){return a.f.some(function(a){return a instanceof T})||null!==a.Qb};function qj(){U.call(this,0,1)}t(qj,U);qj.prototype.toString=l("skip(?)");qj.prototype.Pc=function(a){return this.toString().replace("?",a.L.toString())};qj.prototype.fa=function(a,b,c){return[new H(a[0].entries.slice(c.L),I(a[0]))]};function rj(){}t(rj,vh);rj.prototype.qb=function(a,b){if(!q(b.X)&&!q(b.L))return a;var c=sj(a);if(null===c)return a;xg(a,function(a){return a instanceof hj||a instanceof qj}).forEach(function(a){a instanceof hj?c.Rc=!0:c.Sc=!0;yg(a)},this);return c.jb()};function sj(a){a=xg(a,function(a){return a instanceof Zi},function(a){return a instanceof oj&&pj(a)||a instanceof ij||1!=M(a).length||a instanceof $i});return 0<a.length?a[0]:null};function tj(a){this.i=a}t(tj,vh);tj.prototype.qb=function(a,b){var c=uj(a,b);if(null===c)return a;var d;a:{var e=c;d=vj(Ud(c,0));if(null!==d){var f;f=c.O;for(var h=null,k=d.table.Ba(),n=0;n<k.length&&null===h;n++)h=wj(k[n],f);f=h;if(null===f){d=e;break a}e=new Zi(this.i,f.Ab,new Oi(f.Ab),f.Te);f=new aj(this.i,d.table);Wd(f,e);yg(c);e=Cg(d,d,f,e)}d=e}if(d==c)a:if(d=c,e=xj(Ud(c,0)),null!==e){f=wj(e.index,c.O);if(null===f)break a;e.le=f.Te;d=yg(c).parent}return d.jb()};
function xj(a){a=xg(a,function(a){return a instanceof Zi},function(a){return 1!=M(a).length});return 0<a.length?a[0]:null}function vj(a){a=xg(a,function(a){return a instanceof Ei},function(a){return 1!=M(a).length});return 0<a.length?a[0]:null}function uj(a,b){return q(b.O)?xg(a,function(a){return a instanceof ij})[0]:null}function wj(a,b){if(a.f.length!=b.length||!b.every(function(b,c){return b.N.getName()==a.f[c].ba.getName()}))return null;var c=yj(b,a);return c[0]||c[1]?{Ab:a,Te:c[1]}:null}
function yj(a,b){var c=a.reduce(function(a,b){return a<<1|(0==b.nb?0:1)},0),d=b.f.reduce(function(a,b){return a<<1|(0==b.nb?0:1)},0),c=c^d;return[0==c,c==Math.pow(2,Math.max(a.length,b.f.length))-1]};function zj(a,b,c){this.Ea=a;this.he=b;this.Xb=c}zj.prototype.jc=function(){this.Xb.forEach(function(a){this.Ea=a.qb(this.Ea,this.he)},this);return this.Ea};function Aj(a,b){U.call(this,0,1);this.U=a;this.Gg=b}t(Aj,U);Aj.prototype.toString=function(){return"update("+this.U.getName()+")"};Aj.prototype.fa=function(a,b){var c=a[0].entries.map(function(a){var b=this.U.hb(a.va.Ga());this.Gg.forEach(function(a){b.s[a.N.getName()]=a.value},this);return b},this);b.update(this.U,c);return[Ad()]};function Bj(a){this.i=a;this.oe=[new Mi,new bj(this.i),new tj(this.i),new rj,new Fi(this.i)];this.Md=[new bj(this.i)]}Bj.prototype.create=function(a,b){var c=a.jb();if(c instanceof ih||c instanceof hh)return Cj(this,a,b);if(c instanceof oh||c instanceof sh||c instanceof th)return Cj(this,a,b,this.oe);if(c instanceof jh||c instanceof kh)return Cj(this,a,b,this.Md);throw new E(8);};function Cj(a,b,c,d){a=vg(b.jb(),a.ig.bind(a));null!=d&&(a=(new zj(a,c,d)).jc());return new ne(a,b.ca())}
Bj.prototype.ig=function(a){if(a instanceof oh)return new oj(a.f,a.Qb);if(a instanceof rh)return new Gi(a.f);if(a instanceof qh)return new Wg(a.f);if(a instanceof ph)return new ij(a.O);if(a instanceof th)return new qj;if(a instanceof sh)return new hj;if(a instanceof lh)return new $i(a.J.Z());if(a instanceof nh)return new Ah;if(a instanceof uh)return new Ii(this.i,a.J,a.Sb);if(a instanceof mh)return new Ei(this.i,a.table);if(a instanceof jh)return new Ci(a.table);if(a instanceof kh)return new Aj(a.table,
a.we);if(a instanceof ih)return new gj(this.i,a.table);if(a instanceof hh)return new ej(this.i,a.table);throw new E(514);};function Dj(a){this.gg=new Bi;this.tg=new Bj(a)};function Ej(){this.$e=z()}function Fj(a,b){var c=a.$e.get(b.getName())||null;null===c&&(c=new Gj,a.$e.set(b.getName(),c));return c}function Hj(a,b,c,d){c.forEach(function(a){a=Fj(this,a);0==d?(a.bb=null,a.xc=b):3==d?(null===a.$b&&(a.$b=C()),a.$b.add(b),null===a.Ua&&(a.Ua=C()),a.Ua.delete(b)):1==d?(null===a.Ua&&(a.Ua=C()),a.Ua.add(b)):2==d&&(a.bb=b)},a)}
function Ij(a,b,c,d){var e=!0;c.forEach(function(a){if(e){a=Fj(this,a);var c=null===a.Ua||0==a.Ua.size;e=0==d?(null===a.$b||0==a.$b.size)&&c&&null===a.xc&&null!==a.bb&&a.bb==b:3==d?null===a.xc&&null===a.bb&&null!==a.Ua&&a.Ua.has(b):1==d?null===a.bb:c&&(null===a.bb||a.bb==b)}},a);return e}function Jj(a,b,c,d){var e=Ij(a,b,c,d);e&&Hj(a,b,c,d);return e}Ej.prototype.releaseLock=function(a,b){b.forEach(function(b){Fj(this,b).releaseLock(a)},this)};
function Kj(a,b){b.forEach(function(a){Fj(this,a).bb=null},a)}function Gj(){this.$b=this.Ua=this.bb=this.xc=null}Gj.prototype.releaseLock=function(a){this.xc==a&&(this.xc=null);this.bb==a&&(this.bb=null);null===this.Ua||this.Ua.delete(a);null===this.$b||this.$b.delete(a)};function Lj(){this.Wb=new Mj;this.Fc=new Ej}function we(a,b){(2>b.getPriority()||2>b.getPriority())&&Kj(a.Fc,b.ca());a.Wb.Bb(b);Nj(a);return b.Pb().da}function Nj(a){for(var b=a.Wb.ta(),c=0;c<b.length;c++){var d=b[c],e=!1;if(e=0==d.H()?Oj(a,d,1,3):Oj(a,d,2,0))a.Wb.remove(d),e=a,d.exec().then(e.qg.bind(e,d),e.pg.bind(e,d))}}function Oj(a,b,c,d){var e=!1;Jj(a.Fc,b.Z(),b.ca(),c)&&(e=Jj(a.Fc,b.Z(),b.ca(),d));return e}Lj.prototype.qg=function(a,b){this.Fc.releaseLock(a.Z(),a.ca());a.Pb().resolve(b);Nj(this)};
Lj.prototype.pg=function(a,b){this.Fc.releaseLock(a.Z(),a.ca());a.Pb().reject(b);Nj(this)};function Mj(){this.Wb=[]}Mj.prototype.Bb=function(a){uf(this.Wb,a,function(a,c){var d=a.getPriority()-c.getPriority();return 0==d?a.Z()-c.Z():d})};Mj.prototype.ta=function(){return this.Wb.slice()};Mj.prototype.remove=function(a){var b=this.Wb;a=xa(b,a);var c;(c=0<=a)&&Array.prototype.splice.call(b,a,1);return c};function Pj(a,b){this.Nd=Qd();this.ie=a;this.nd=b;this.K=Qj(this)}function Qj(a){if(0<a.ie.f.length)return a.ie.f;var b=[];a.ie.c.forEach(function(a){a.ib().forEach(function(a){b.push(a)})});return b}Pj.prototype.W=function(a,b){return this.K.every(function(c){return Rd(this.Nd,c.H(),"eq")(J(a,c),J(b,c))},this)};
function Rj(a,b,c){var d=null===b?[]:b.entries,e=pb(d,c.entries,a.W.bind(a),function(a){return d[a]});b=[];for(var f=0,h=0;h<d.length;h++){var k=d[h];e[f]==k?f++:(k=a.nd.splice(f,1),k=Sj(h,k,0,a.nd),b.push(k))}e=pb(d,c.entries,a.W.bind(a),function(a,b){return c.entries[b]});for(h=f=0;h<c.entries.length;h++)k=c.entries[h],e[f]==k?f++:(a.nd.splice(h,0,k.va.s),k=Sj(h,[],1,a.nd),b.push(k));return b}function Sj(a,b,c,d){return{Ig:c,index:a,object:d,Kg:b,type:"splice"}};function Tj(){this.hc=z()}Tj.prototype.zd=function(a,b){var c=ka(a.a).toString(),d=this.hc.get(c)||null;null===d&&(d=new Uj(a),this.hc.set(c,d));d.zd(b)};Tj.prototype.je=function(a,b){var c=ka(a.a).toString(),d=this.hc.get(c)||null;d.je(b);0<d.Hc.size||this.hc.delete(c)};function ve(a,b){var c=C();b.forEach(function(a){c.add(a.getName())});var d=[];a.hc.forEach(function(a){a=a.Cc();a.context.c.some(function(a){return c.has(a.getName())})&&d.push(a)});return d}
function te(a,b,c){b=ka(null!=b.Xc?b.Xc:b).toString();a=a.hc.get(b)||null;null!==a&&Vj(a,c)}function Uj(a){this.Ef=a;this.Hc=C();this.ng=[];this.Ye=null;this.Lf=new Pj(a.a,this.ng)}Uj.prototype.zd=function(a){this.Hc.has(a)||this.Hc.add(a)};Uj.prototype.je=function(a){return this.Hc.delete(a)};Uj.prototype.Cc=function(){var a=this.Ef;return{context:a.a,ge:Yh(a)}};function Vj(a,b){var c=Rj(a.Lf,a.Ye,b);a.Ye=b;0<c.length&&a.Hc.forEach(function(a){a(c)})};function Wj(a,b){var c=a.l(qc),d=b||{},e=new qf(c);a.pb(lc,e);var e=null,f=!1;null!=d.storeType?e=d.storeType:(e=Tb(),e=e.Yf?0:e.Hg?4:1);switch(e){case 0:e=new Ve(a,c);break;case 1:e=new bf(c);break;case 5:e=new df(c);break;case 4:e=new nf(a,c,d.webSqlDbSize);break;case 3:e=new Ie(c,d.firebase);f=!0;break;default:throw new E(300);}a.pb(kc,e);var h=new sg;a.pb(mc,h);return e.Ha(d.onUpgrade).then(function(){var b=new Dj(a);a.pb(nc,b);b=new Lj;a.pb(oc,b);b=new Tj;a.pb(pc,b);return h.Ha(c)}).then(function(){if(f){var b=
new xe(a);b.Ma.subscribe(b.be.bind(b))}return(new lg(a)).Ha(c)})};function Xj(a){this.i=a;this.g=a.l(qc);this.aa=C(this.g.ra());this.cb=x()}m=Xj.prototype;m.exec=function(){var a=this.i.l(mc),b=this.i.l(lc),c={};this.g.ra().forEach(function(d){var f=a.get(Ze(d)).ab(),f=rf(b,f).map(function(a){return a.s});c[d.getName()]=f});var d={name:this.g.name(),version:this.g.version(),tables:c},d=new Ed(new Wb(-1,d),!0);return w([new H([d],[])])};m.H=l(0);m.ca=g("aa");m.Pb=g("cb");m.Z=function(){return ka(this)};m.getPriority=l(0);function Yj(a,b){this.i=a;this.g=a.l(qc);this.aa=C(this.g.ra());this.cb=x();this.ya=b;this.Ma=a.l(kc);this.V=a.l(lc);this.F=a.l(mc)}m=Yj.prototype;
m.exec=function(){if(!(this.Ma instanceof Ve||this.Ma instanceof bf||this.Ma instanceof nf))throw new E(300);var a;a:{a=this.g.ra();for(var b=0;b<a.length;++b)if(0<this.F.get(Ze(a[b])).La().la){a=!1;break a}a=!0}if(!a)throw new E(110);if(this.g.name()!=this.ya.name||this.g.version()!=this.ya.version)throw new E(111);if(null==this.ya.tables)throw new E(112);return Zj(this)};m.H=l(1);m.ca=g("aa");m.Pb=g("cb");m.Z=function(){return ka(this)};m.getPriority=l(0);
function Zj(a){var b=new jd(a.i,a.aa),b=a.Ma.Gb(a.H(),D(a.aa),b),c;for(c in a.ya.tables){var d=a.g.table(c),e=a.ya.tables[c].map(function(a){return d.xb(a)}),f=b.I(c,d.hb,0);a.V.Yb(c,e);var h=a.F.nc.get(c)||[];e.forEach(function(a){h.forEach(function(b){var c=a.lb(b.getName());b.add(c,a.id())})});f.put(e)}return b.ia()};function ak(a,b){this.i=a;this.Ma=a.l(kc);this.Fa=a.l(oc);this.Kb=a.l(pc);this.aa=C(b);this.Sa=new jd(this.i,this.aa);this.cb=x();this.yc=x();this.ye=x()}m=ak.prototype;m.exec=function(){this.ye.resolve();return this.yc.da};m.H=l(1);m.ca=g("aa");m.Pb=g("cb");m.Z=function(){return ka(this)};m.getPriority=l(2);function bk(a){we(a.Fa,a);return a.ye.da}
function ck(a,b){var c=b.Cc();return c.ge.jb().exec(a.Sa,c.context).then(function(a){return wd(a[0])},function(a){this.Sa.Lb();var b=new jb(a.name);this.yc.reject(b);throw a;}.bind(a))}m.ia=function(){this.Ma.Gb(this.H(),D(this.aa),this.Sa).ia().then(function(){this.Mc();this.yc.resolve()}.bind(this),function(a){this.Sa.Lb();this.yc.reject(a)}.bind(this));return this.cb.da};m.Lb=function(){this.Sa.Lb();this.yc.resolve();return this.cb.da};
m.Mc=function(){var a=ve(this.Kb,this.aa);0!=a.length&&(a=new se(this.i,a),we(this.Fa,a))};function dk(a){this.i=a;this.Fa=a.l(oc);this.Qc=null;this.Va=0;0==ek.size&&(ek.set(0,C([1,4])),ek.set(1,C([2])),ek.set(2,C([3,5,6])),ek.set(3,C([2,7])),ek.set(4,C([7])),ek.set(5,C([7])),ek.set(6,C([7])))}r("lf.proc.Transaction",dk);var ek=z();function fk(a,b){var c=ek.get(a.Va)||null;if(null===c||!c.has(b))throw new E(107,a.Va,b);a.Va=b}
dk.prototype.exec=function(a){fk(this,4);var b=[];try{a.forEach(function(a){a.gb();b.push(a.Cc())},this)}catch(c){return fk(this,7),bb(c)}a=new Bh(this.i,b);return we(this.Fa,a).then(function(a){fk(this,7);return a.map(function(a){return wd(a)})}.bind(this),function(a){fk(this,7);throw a;}.bind(this))};dk.prototype.exec=dk.prototype.exec;dk.prototype.Cf=function(a){fk(this,1);this.Qc=new ak(this.i,a);return bk(this.Qc).then(function(){fk(this,2)}.bind(this))};dk.prototype.begin=dk.prototype.Cf;
dk.prototype.Bf=function(a){fk(this,3);return ck(this.Qc,a).then(function(a){fk(this,2);return a}.bind(this),function(a){fk(this,7);throw a;}.bind(this))};dk.prototype.attach=dk.prototype.Bf;dk.prototype.ia=function(){fk(this,5);return this.Qc.ia().then(function(){fk(this,7)}.bind(this))};dk.prototype.commit=dk.prototype.ia;dk.prototype.Lb=function(){fk(this,6);return this.Qc.Lb().then(function(){fk(this,7)}.bind(this))};dk.prototype.rollback=dk.prototype.Lb;function X(a){this.i=a;this.g=a.l(qc);this.jd=!1}r("lf.proc.Database",X);X.prototype.Ha=function(a){this.i.pb(qc,this.g);return Wj(this.i,a).then(function(){this.jd=!0;this.Fa=this.i.l(oc);return this}.bind(this))};X.prototype.init=X.prototype.Ha;X.prototype.zb=g("g");X.prototype.getSchema=X.prototype.zb;function gk(a){if(!a.jd)throw new E(2);}X.prototype.select=function(a){gk(this);return new W(this.i,1!=arguments.length||null!=arguments[0]?Array.prototype.slice.call(arguments):[])};
X.prototype.select=X.prototype.select;X.prototype.Bb=function(){gk(this);return new $h(this.i)};X.prototype.insert=X.prototype.Bb;X.prototype.Td=function(){gk(this);return new $h(this.i,!0)};X.prototype.insertOrReplace=X.prototype.Td;X.prototype.update=function(a){gk(this);return new ji(this.i,a)};X.prototype.update=X.prototype.update;X.prototype.delete=function(){gk(this);return new Zh(this.i)};X.prototype["delete"]=X.prototype.delete;
X.prototype.observe=function(a,b){gk(this);this.i.l(pc).zd(a,b)};X.prototype.observe=X.prototype.observe;X.prototype.unobserve=function(a,b){gk(this);this.i.l(pc).je(a,b)};X.prototype.unobserve=X.prototype.unobserve;X.prototype.Jf=function(){gk(this);return new dk(this.i)};X.prototype.createTransaction=X.prototype.Jf;X.prototype.close=function(){try{this.i.l(kc).close()}catch(a){}this.i.clear();this.jd=!1};X.prototype.close=X.prototype.close;
X.prototype.Rf=function(){gk(this);var a=new Xj(this.i);return we(this.Fa,a).then(function(a){return wd(a[0])[0]})};X.prototype["export"]=X.prototype.Rf;X.prototype.import=function(a){gk(this);a=new Yj(this.i,a);return we(this.Fa,a).then(l(null))};X.prototype["import"]=X.prototype.import;function Y(a,b,c,d,e,f){this.U=a;this.A=b;this.Ue=c;this.Se=d;this.uf=e;this.fb=f||null}r("lf.schema.BaseColumn",Y);m=Y.prototype;m.getName=g("A");m.m=function(){return K(this.U)+"."+this.A};m.toString=function(){return this.m()};m.I=g("U");m.H=g("uf");Y.prototype.getType=Y.prototype.H;Y.prototype.$a=g("fb");Y.prototype.Ba=function(){null==this.pa&&(this.pa=[],this.I().Ba().forEach(function(a){-1!=a.f.map(function(a){return a.ba.getName()}).indexOf(this.A)&&this.pa.push(a)},this));return this.pa};
Y.prototype.Aa=function(){if(!q(this.ga)){var a=this.Ba().filter(function(a){return 1!=a.f.length?!1:a.f[0].ba.getName()==this.getName()},this);this.ga=0<a.length?a[0]:null}return this.ga};Y.prototype.kc=g("Se");Y.prototype.isNullable=Y.prototype.kc;Y.prototype.Ec=g("Ue");Y.prototype.Qa=function(a){return Mg(this,a,"eq")};Y.prototype.eq=Y.prototype.Qa;Y.prototype.af=function(a){return Mg(this,a,"neq")};Y.prototype.neq=Y.prototype.af;Y.prototype.Yd=function(a){return Mg(this,a,"lt")};
Y.prototype.lt=Y.prototype.Yd;Y.prototype.hg=function(a){return Mg(this,a,"lte")};Y.prototype.lte=Y.prototype.hg;Y.prototype.Tf=function(a){return Mg(this,a,"gt")};Y.prototype.gt=Y.prototype.Tf;Y.prototype.Uf=function(a){return Mg(this,a,"gte")};Y.prototype.gte=Y.prototype.Uf;Y.prototype.match=function(a){return Mg(this,a,"match")};Y.prototype.match=Y.prototype.match;Y.prototype.Df=function(a,b){return Mg(this,[a,b],"between")};Y.prototype.between=Y.prototype.Df;
Y.prototype.Vf=function(a){return Mg(this,a,"in")};Y.prototype["in"]=Y.prototype.Vf;Y.prototype.cg=function(){return this.Qa(null)};Y.prototype.isNull=Y.prototype.cg;Y.prototype.bg=function(){return this.af(null)};Y.prototype.isNotNull=Y.prototype.bg;Y.prototype.sc=function(a){return new Y(this.U,this.A,this.Ue,this.Se,this.uf,a)};Y.prototype.as=Y.prototype.sc;function hk(){this.ud=z()}var ik;hk.prototype.clear=function(){this.ud.clear()};hk.prototype.clear=hk.prototype.clear;hk.prototype.pb=function(a,b){this.ud.set(a.toString(),b);return b};hk.prototype.registerService=hk.prototype.pb;hk.prototype.l=function(a){var b=this.ud.get(a.toString())||null;if(null===b)throw new E(7,a.toString());return b};hk.prototype.getService=hk.prototype.l;hk.prototype.Wd=function(a){return this.ud.has(a.toString())};hk.prototype.isRegistered=hk.prototype.Wd;function jk(a){this.g=a;this.Fd=new Rc;this.ke=new Rc;this.cf=new Rc;this.He=z();this.h=new Rc;this.De=new Rc;this.kf=new Rc;this.Ge=new Rc;kk(this)}function kk(a){a.g.ra().forEach(function(a){var c=a.getName();a.Ib().Sd().forEach(function(d){this.cf.set(c,this.g.table(d.Ta));this.h.set(d.Ta,a);0==d.action?(this.ke.set(d.Ta,d),this.kf.set(d.Ta,a)):(this.Fd.set(d.Ta,d),this.De.set(d.Ta,a));this.He.set(a.getName()+"."+d.vb,d.Ta);this.Ge.set(d.Ta+"."+d.Jc,a.getName())},this)},a)}
function $c(a,b,c){if(null!=c)return 1==c?a.Fd.get(b):a.ke.get(b);c=a.Fd.get(b);a=a.ke.get(b);return null===c&&null===a?null:(c||[]).concat(a||[])}function Hh(a,b){var c=b.get(a);return null===c?[]:c}function Jh(a,b){var c=C();b.forEach(function(a){(a=this.He.get(a))&&c.add(a)},a);return D(c).map(function(a){return this.g.table(a)},a)}function Fh(a,b,c){return null!=c?0==c?Hh(b,a.kf):Hh(b,a.De):Hh(b,a.h)}
function Kh(a,b){var c=C();b.forEach(function(a){(a=this.Ge.get(a))&&a.forEach(function(a){c.add(a)})},a);return D(c).map(function(a){return this.g.table(a)},a)};function lk(a,b,c){this.ug=a;this.mg=b;this.Sf=c}r("lf.schema.Constraint",lk);lk.prototype.cd=g("ug");lk.prototype.getPrimaryKey=lk.prototype.cd;lk.prototype.Sd=g("Sf");lk.prototype.getForeignKeys=lk.prototype.Sd;function mk(a,b,c){var d=a.ref.split(".");if(2!=d.length)throw new E(540,c);this.Fe=b;this.vb=a.local;this.Ta=d[0];this.Jc=d[1];this.name=b+"."+c;this.action=a.action;this.timing=a.timing};function Z(a){nk(a);this.Nd=Qd();this.A=a;this.K=z();this.wd=C();this.oc=C();this.md=C();this.Ca=null;this.pa=z();this.qd=!1;this.yb=[]}r("lf.schema.TableBuilder",Z);function ok(a){this.name=a.name;this.nb=a.order;this.autoIncrement=a.autoIncrement}var pk=C([0,6]);function nk(a){if(!/^[A-Za-z_][A-Za-z0-9_]*$/.test(a))throw new E(502,a);}function qk(a,b){if(b==a.A)throw new E(546,b);if(a.K.has(b)||a.pa.has(b)||a.oc.has(b))throw new E(503,a.A+"."+b);}
function rk(a,b){var c=!1;b.forEach(function(a){var b=this.K.get(a.name);c=c||a.autoIncrement;if(a.autoIncrement&&3!=b)throw new E(504);},a);if(c&&1<b.length)throw new E(505);}function sk(a){if(null!==a.Ca){var b=a.pa.get(a.Ca).map(function(a){return a.name}),c=0;if(a.yb.some(function(a,e){c=e;return-1!=b.indexOf(a.vb)},a))throw new E(543,a.yb[c].name);}}
function tk(a){if(null!==a.Ca){var b=function(a){return a.name},c=JSON.stringify(a.pa.get(a.Ca).map(b));a.pa.forEach(function(a,e){if(e!=this.Ca){var f=a.map(b);if(JSON.stringify(f)==c)throw new E(544,this.A+"."+e);}},a)}}function uk(a){null===a.Ca||a.pa.get(a.Ca).forEach(function(a){if(this.md.has(a.name))throw new E(545,this.A+"."+a.name);},a)}Z.prototype.wf=function(a,b){nk(a);qk(this,a);this.K.set(a,b);pk.has(b)&&this.Ae([a]);return this};Z.prototype.addColumn=Z.prototype.wf;
Z.prototype.yf=function(a,b){var c=this.A;this.Ca="pk"+(c[0].toUpperCase()+c.substring(1));nk(this.Ca);qk(this,this.Ca);c=vk(this,a,!0,void 0,b);rk(this,c);1==c.length&&this.wd.add(c[0].name);this.oc.add(this.Ca);this.pa.set(this.Ca,c);return this};Z.prototype.addPrimaryKey=Z.prototype.yf;
Z.prototype.xf=function(a,b){nk(a);qk(this,a);var c=new mk(b,this.A,a);q(c.action)||(c.action=0);q(c.timing)||(c.timing=0);if(1==c.action&&1==c.timing)throw new E(506);if(!this.K.has(c.vb))throw new E(540,a);this.yb.push(c);this.ze(a,[c.vb],this.wd.has(c.vb));return this};Z.prototype.addForeignKey=Z.prototype.xf;Z.prototype.zf=function(a,b){nk(a);qk(this,a);var c=vk(this,b,!0);1==c.length&&(this.wd.add(c[0].name),wk(this,c[0].name));this.pa.set(a,c);this.oc.add(a);return this};
Z.prototype.addUnique=Z.prototype.zf;function wk(a,b){a.yb.forEach(function(a){a.vb==b&&this.oc.add(a.name.split(".")[1])},a)}Z.prototype.Ae=function(a){vk(this,a,!1).forEach(function(a){this.md.add(a.name)},this);return this};Z.prototype.addNullable=Z.prototype.Ae;Z.prototype.ze=function(a,b,c,d){nk(a);qk(this,a);b=vk(this,b,!0,d);c&&this.oc.add(a);this.pa.set(a,b);return this};Z.prototype.addIndex=Z.prototype.ze;Z.prototype.Eb=ba("qd");Z.prototype.persistentIndex=Z.prototype.Eb;
Z.prototype.zb=function(){sk(this);tk(this);uk(this);return new (xk(this))};Z.prototype.getSchema=Z.prototype.zb;function yk(a){return a.yb}function vk(a,b,c,d,e){var f=b,f="string"==typeof b[0]?b.map(function(a){return new ok({name:a,order:null!=d?d:1,autoIncrement:e||!1})}):b.map(function(a){return new ok(a)});f.forEach(function(a){if(!this.K.has(a.name))throw new E(508,this.A,a.name);if(c){var b=this.K.get(a.name);if(0==b||6==b)throw new E(509,this.A,a.name);}},a);return f}
function xk(a){function b(){function b(c){return a.pa.get(c).map(function(a){return{ba:this[a.name],nb:a.nb,autoIncrement:a.autoIncrement}},this)}var d=Vb(a.K).map(function(b){this[b]=new Y(this,b,a.wd.has(b),a.md.has(b),a.K.get(b));return this[b]},this),e=Vb(a.pa).map(function(d){return new Og(a.A,d,a.oc.has(d),b.call(this,d))},this);S.call(this,a.A,d,e,a.qd);var f=null===a.Ca?null:new Og(a.A,a.Ca,!0,b.call(this,a.Ca)),h=d.filter(function(b){return!a.md.has(b.getName())});this.Gf=new lk(f,h,a.yb);
this.nf=zk(a,d,e)}t(b,S);b.prototype.xb=function(a){return new this.nf(Xb++,a)};b.prototype.createRow=b.prototype.xb;b.prototype.hb=function(a){var b={};this.ib().forEach(function(e){var f=e.getName();e=e.H();var h=a.value[f];if(0==e)if(e=h,null!=e&&""!=e){0!=e.length%2&&(e="0"+e);for(var h=new ArrayBuffer(e.length/2),k=new Uint8Array(h),n=0,B=0;n<e.length;n+=2)k[B++]=parseInt(e.substr(n,2),16);e=h}else e=null;else e=2==e?null!=h?new Date(h):null:h;b[f]=e},this);return new this.nf(a.id,b)};b.prototype.deserializeRow=
b.prototype.hb;b.prototype.Ib=g("Gf");b.prototype.getConstraint=b.prototype.Ib;return b}
function zk(a,b,c){function d(a,d){this.K=b;this.pa=c;Wb.call(this,a,d)}t(d,Wb);d.prototype.Je=function(){var a={};this.K.forEach(function(b){a[b.getName()]=b.kc()?null:Qc[b.H()]});return a};d.prototype.tf=function(){var a={};this.K.forEach(function(b){var c=b.getName();b=b.H();var d=this.s[c];a[c]=0==b?null!=d?ac(d):null:2==b?null!=d?d.getTime():null:6==b?null!=d?d:null:d},this);return a};var e=function(a){var b=this.K.get(a.getName()),c=this.Nd.Ve.get(b)||null;return function(b){return c(b[a.getName()])}}.bind(a),
f=function(a){var b=a.map(function(a){return e(a.ba)});return function(a){return b.map(function(b){return b(a)})}}.bind(a),h={};c.forEach(function(a){var b=a.m();a=1==a.f.length?e(a.f[0].ba):f(a.f);h[b]=a});d.prototype.lb=function(a){return-1!=a.indexOf("#")?this.id():h.hasOwnProperty(a)?h[a](this.s):null};return d};function Ak(a,b){this.g=new Bk(a,b);this.tb=z();this.zc=!1;this.j=null}r("lf.schema.Builder",Ak);function Ck(a,b){b.yb.forEach(function(a){var d=a.Ta;if(!this.tb.has(d))throw new E(536,a.name);var d=this.tb.get(d).zb(),e=a.Jc;if(!d.hasOwnProperty(e))throw new E(537,a.name);if(b.zb()[a.vb].H()!=d[e].H())throw new E(538,a.name);if(!d[e].Ec())throw new E(539,a.name);},a)}
Ak.prototype.Ff=function(a){a.yb.forEach(function(a){yk(this.tb.get(a.Ta)).forEach(function(c){if(c.vb==a.Jc)throw new E(534,a.name);},this)},this)};function Dk(a){a.zc||(a.tb.forEach(function(a){Ck(this,a);a=a.zb();this.g.M.set(a.getName(),a)},a),A(a.tb).forEach(a.Ff,a),Ek(a),a.tb.clear(),a.zc=!0)}function Fk(a,b,c){b.xe||(b.xe=!0,b.ce=!0,b.Ke.forEach(function(a){a=c.get(a);if(!a.xe)Fk(this,a,c);else if(a.ce&&b!=a)throw new E(533);},a));b.ce=!1}
function Ek(a){var b=z();a.g.M.forEach(function(a,d){b.set(d,new Gk(d))},a);a.tb.forEach(function(a,d){a.yb.forEach(function(a){b.get(a.Ta).Ke.add(d)})});A(b).forEach(function(a){Fk(this,a,b)},a)}function Gk(a){this.ce=this.xe=!1;this.Ke=C();this.Oc=a}Ak.prototype.zb=function(){this.zc||Dk(this);return this.g};Ak.prototype.getSchema=Ak.prototype.zb;Ak.prototype.Me=function(){var a=new jc("ns_"+this.g.name()),b;ik||(ik=new hk);b=ik;var c=null;b.Wd(a)?c=b.l(a):(c=new hk,b.pb(a,c));return c};
Ak.prototype.getGlobal=Ak.prototype.Me;Ak.prototype.connect=function(a){if(null!==this.j&&this.j.jd)throw new E(113);if(null===this.j){var b=this.Me();b.Wd(qc)||b.pb(qc,this.zb());this.j=new X(b)}return this.j.Ha(a)};Ak.prototype.connect=Ak.prototype.connect;Ak.prototype.If=function(a){if(this.tb.has(a))throw new E(503,a);if(this.zc)throw new E(535);this.tb.set(a,new Z(a));return this.tb.get(a)};Ak.prototype.createTable=Ak.prototype.If;
Ak.prototype.pe=function(a){if(this.zc)throw new E(535);this.g.pe(a);return this};Ak.prototype.setPragma=Ak.prototype.pe;function Bk(a,b){this.A=a;this.Pa=b;this.M=z();this.gf={Mf:!1}}r("lf.schema.DatabaseSchema",Bk);Bk.prototype.name=g("A");Bk.prototype.name=Bk.prototype.name;Bk.prototype.version=g("Pa");Bk.prototype.version=Bk.prototype.version;Bk.prototype.ra=function(){return A(this.M)};Bk.prototype.tables=Bk.prototype.ra;Bk.prototype.table=function(a){if(!this.M.has(a))throw new E(101,a);return this.M.get(a)};
Bk.prototype.table=Bk.prototype.table;Bk.prototype.info=function(){this.Re||(this.Re=new jk(this));return this.Re};Bk.prototype.ff=g("gf");Bk.prototype.pragma=Bk.prototype.ff;Bk.prototype.pe=ba("gf");r("lf.schema.create",function(a,b){return new Ak(a,b)});v.prototype.catch=v.prototype.te;v.prototype["catch"]=v.prototype.catch;
try{if(module){module.exports=lf;}}catch(e){}}.bind(window))()
//# sourceMappingURL=lovefield.min.js.map
