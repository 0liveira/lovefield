if(!self.window){window=self;}
(function(){'use strict';function aa(){return function(){}}function ba(a){return function(b){this[a]=b}}function g(a){return function(){return this[a]}}function l(a){return function(){return a}}var m,da=this;function n(a){return void 0!==a}function ea(){}function fa(){throw Error("unimplemented abstract method");}
function ga(a){var b=typeof a;if("object"==b)if(a){if(a instanceof Array)return"array";if(a instanceof Object)return b;var c=Object.prototype.toString.call(a);if("[object Window]"==c)return"object";if("[object Array]"==c||"number"==typeof a.length&&"undefined"!=typeof a.splice&&"undefined"!=typeof a.propertyIsEnumerable&&!a.propertyIsEnumerable("splice"))return"array";if("[object Function]"==c||"undefined"!=typeof a.call&&"undefined"!=typeof a.propertyIsEnumerable&&!a.propertyIsEnumerable("call"))return"function"}else return"null";
else if("function"==b&&"undefined"==typeof a.call)return"object";return b}function ha(a){return null!=a}function ia(a){var b=ga(a);return"array"==b||"object"==b&&"number"==typeof a.length}function ja(a){return"string"==typeof a}function ka(a){return"function"==ga(a)}function la(a){return a[ma]||(a[ma]=++na)}var ma="closure_uid_"+(1E9*Math.random()>>>0),na=0;function oa(a,b,c){return a.call.apply(a.bind,arguments)}
function pa(a,b,c){if(!a)throw Error();if(2<arguments.length){var d=Array.prototype.slice.call(arguments,2);return function(){var c=Array.prototype.slice.call(arguments);Array.prototype.unshift.apply(c,d);return a.apply(b,c)}}return function(){return a.apply(b,arguments)}}function qa(a,b,c){qa=Function.prototype.bind&&-1!=Function.prototype.bind.toString().indexOf("native code")?oa:pa;return qa.apply(null,arguments)}
function ra(a,b){var c=Array.prototype.slice.call(arguments,1);return function(){var b=c.slice();b.push.apply(b,arguments);return a.apply(this,b)}}function q(a,b){a=a.split(".");var c=da;a[0]in c||!c.execScript||c.execScript("var "+a[0]);for(var d;a.length&&(d=a.shift());)!a.length&&n(b)?c[d]=b:c=c[d]?c[d]:c[d]={}}
function r(a,b){function c(){}c.prototype=b.prototype;a.jb=b.prototype;a.prototype=new c;a.prototype.constructor=a;a.Vg=function(a,c,f){for(var d=Array(arguments.length-2),e=2;e<arguments.length;e++)d[e-2]=arguments[e];return b.prototype[c].apply(a,d)}};function sa(a){if(Error.captureStackTrace)Error.captureStackTrace(this,sa);else{var b=Error().stack;b&&(this.stack=b)}a&&(this.message=String(a))}r(sa,Error);sa.prototype.name="CustomError";var ua=String.prototype.trim?function(a){return a.trim()}:function(a){return a.replace(/^[\s\xa0]+|[\s\xa0]+$/g,"")};function va(a,b){return a<b?-1:a>b?1:0};function wa(a,b,c){this.pg=c;this.Of=a;this.Kg=b;this.rd=0;this.gd=null}wa.prototype.get=function(){var a;0<this.rd?(this.rd--,a=this.gd,this.gd=a.next,a.next=null):a=this.Of();return a};wa.prototype.put=function(a){this.Kg(a);this.rd<this.pg&&(this.rd++,a.next=this.gd,this.gd=a)};var xa=Array.prototype.indexOf?function(a,b,c){return Array.prototype.indexOf.call(a,b,c)}:function(a,b,c){c=null==c?0:0>c?Math.max(0,a.length+c):c;if(ja(a))return ja(b)&&1==b.length?a.indexOf(b,c):-1;for(;c<a.length;c++)if(c in a&&a[c]===b)return c;return-1},ya=Array.prototype.forEach?function(a,b,c){Array.prototype.forEach.call(a,b,c)}:function(a,b,c){for(var d=a.length,e=ja(a)?a.split(""):a,f=0;f<d;f++)f in e&&b.call(c,e[f],f,a)},za=Array.prototype.map?function(a,b,c){return Array.prototype.map.call(a,
b,c)}:function(a,b,c){for(var d=a.length,e=Array(d),f=ja(a)?a.split(""):a,h=0;h<d;h++)h in f&&(e[h]=b.call(c,f[h],h,a));return e},Aa=Array.prototype.reduce?function(a,b,c,d){d&&(b=qa(b,d));return Array.prototype.reduce.call(a,b,c)}:function(a,b,c,d){var e=c;ya(a,function(c,h){e=b.call(d,e,c,h,a)});return e},Ba=Array.prototype.some?function(a,b,c){return Array.prototype.some.call(a,b,c)}:function(a,b,c){for(var d=a.length,e=ja(a)?a.split(""):a,f=0;f<d;f++)if(f in e&&b.call(c,e[f],f,a))return!0;return!1};
function Ca(a,b,c){return 2>=arguments.length?Array.prototype.slice.call(a,b):Array.prototype.slice.call(a,b,c)}function Da(a){for(var b=[],c=0;c<a;c++)b[c]=0;return b}function Ea(a){for(var b=[],c=0;c<arguments.length;c++){var d=arguments[c];if("array"==ga(d))for(var e=0;e<d.length;e+=8192)for(var f=Ea.apply(null,Ca(d,e,e+8192)),h=0;h<f.length;h++)b.push(f[h]);else b.push(d)}return b};function Fa(a){var b=[],c=0,d;for(d in a)b[c++]=a[d];return b};var Ga;a:{var Ha=da.navigator;if(Ha){var Ia=Ha.userAgent;if(Ia){Ga=Ia;break a}}Ga=""}function t(a){return-1!=Ga.indexOf(a)};function Ja(){return(t("Chrome")||t("CriOS"))&&!t("Edge")};function Ka(a){da.setTimeout(function(){throw a;},0)}var La;
function Ma(){var a=da.MessageChannel;"undefined"===typeof a&&"undefined"!==typeof window&&window.postMessage&&window.addEventListener&&!t("Presto")&&(a=function(){var a=document.createElement("IFRAME");a.style.display="none";a.src="";document.documentElement.appendChild(a);var b=a.contentWindow,a=b.document;a.open();a.write("");a.close();var c="callImmediate"+Math.random(),d="file:"==b.location.protocol?"*":b.location.protocol+"//"+b.location.host,a=qa(function(a){if(("*"==d||a.origin==d)&&a.data==
c)this.port1.onmessage()},this);b.addEventListener("message",a,!1);this.port1={};this.port2={postMessage:function(){b.postMessage(c,d)}}});if("undefined"!==typeof a&&!t("Trident")&&!t("MSIE")){var b=new a,c={},d=c;b.port1.onmessage=function(){if(n(c.next)){c=c.next;var a=c.Fe;c.Fe=null;a()}};return function(a){d.next={Fe:a};d=d.next;b.port2.postMessage(0)}}return"undefined"!==typeof document&&"onreadystatechange"in document.createElement("SCRIPT")?function(a){var b=document.createElement("SCRIPT");
b.onreadystatechange=function(){b.onreadystatechange=null;b.parentNode.removeChild(b);b=null;a();a=null};document.documentElement.appendChild(b)}:function(a){da.setTimeout(a,0)}};function Na(){this.Bd=this.pc=null}var Qa=new wa(function(){return new Pa},function(a){a.reset()},100);Na.prototype.add=function(a,b){var c=Qa.get();c.set(a,b);this.Bd?this.Bd.next=c:this.pc=c;this.Bd=c};Na.prototype.remove=function(){var a=null;this.pc&&(a=this.pc,this.pc=this.pc.next,this.pc||(this.Bd=null),a.next=null);return a};function Pa(){this.next=this.scope=this.Td=null}Pa.prototype.set=function(a,b){this.Td=a;this.scope=b;this.next=null};
Pa.prototype.reset=function(){this.next=this.scope=this.Td=null};function Ra(a,b){Sa||Ta();Ua||(Sa(),Ua=!0);Va.add(a,b)}var Sa;function Ta(){var a=da.Promise;if(-1!=String(a).indexOf("[native code]")){var b=a.resolve(void 0);Sa=function(){b.then(Wa)}}else Sa=function(){var a=Wa;!ka(da.setImmediate)||da.Window&&da.Window.prototype&&!t("Edge")&&da.Window.prototype.setImmediate==da.setImmediate?(La||(La=Ma()),La(a)):da.setImmediate(a)}}var Ua=!1,Va=new Na;function Wa(){for(var a;a=Va.remove();){try{a.Td.call(a.scope)}catch(b){Ka(b)}Qa.put(a)}Ua=!1};function u(a,b){this.Ta=0;this.mf=void 0;this.Xc=this.dc=this.D=null;this.fd=this.Rd=!1;if(a!=ea)try{var c=this;a.call(b,function(a){Xa(c,2,a)},function(a){Xa(c,3,a)})}catch(d){Xa(this,3,d)}}function Ya(){this.next=this.context=this.jc=this.Jc=this.child=null;this.Ed=!1}Ya.prototype.reset=function(){this.context=this.jc=this.Jc=this.child=null;this.Ed=!1};var Za=new wa(function(){return new Ya},function(a){a.reset()},100);function $a(a,b,c){var d=Za.get();d.Jc=a;d.jc=b;d.context=c;return d}
function v(a){if(a instanceof u)return a;var b=new u(ea);Xa(b,2,a);return b}function ab(a){return new u(function(b,c){c(a)})}function bb(a,b,c){cb(a,b,c,null)||Ra(ra(b,a))}function db(a){return new u(function(b,c){var d=a.length,e=[];if(d)for(var f=function(a,c){d--;e[a]=c;0==d&&b(e)},h=function(a){c(a)},k=0,p;k<a.length;k++)p=a[k],bb(p,ra(f,k),h);else b(e)})}function w(){var a,b,c=new u(function(c,e){a=c;b=e});return new eb(c,a,b)}
u.prototype.then=function(a,b,c){return fb(this,ka(a)?a:null,ka(b)?b:null,c)};u.prototype.then=u.prototype.then;u.prototype.$goog_Thenable=!0;u.prototype.ve=function(a,b){return fb(this,null,a,b)};function gb(a,b){a.dc||2!=a.Ta&&3!=a.Ta||hb(a);a.Xc?a.Xc.next=b:a.dc=b;a.Xc=b}
function fb(a,b,c,d){var e=$a(null,null,null);e.child=new u(function(a,h){e.Jc=b?function(c){try{var e=b.call(d,c);a(e)}catch(K){h(K)}}:a;e.jc=c?function(b){try{var e=c.call(d,b);!n(e)&&b instanceof ib?h(b):a(e)}catch(K){h(K)}}:h});e.child.D=a;gb(a,e);return e.child}u.prototype.Qg=function(a){this.Ta=0;Xa(this,2,a)};u.prototype.Rg=function(a){this.Ta=0;Xa(this,3,a)};
function Xa(a,b,c){0==a.Ta&&(a===c&&(b=3,c=new TypeError("Promise cannot resolve to itself")),a.Ta=1,cb(c,a.Qg,a.Rg,a)||(a.mf=c,a.Ta=b,a.D=null,hb(a),3!=b||c instanceof ib||jb(a,c)))}function cb(a,b,c,d){if(a instanceof u)return gb(a,$a(b||ea,c||null,d)),!0;var e;if(a)try{e=!!a.$goog_Thenable}catch(h){e=!1}else e=!1;if(e)return a.then(b,c,d),!0;e=typeof a;if("object"==e&&null!=a||"function"==e)try{var f=a.then;if(ka(f))return kb(a,f,b,c,d),!0}catch(h){return c.call(d,h),!0}return!1}
function kb(a,b,c,d,e){function f(a){k||(k=!0,d.call(e,a))}function h(a){k||(k=!0,c.call(e,a))}var k=!1;try{b.call(a,h,f)}catch(p){f(p)}}function hb(a){a.Rd||(a.Rd=!0,Ra(a.Vf,a))}function lb(a){var b=null;a.dc&&(b=a.dc,a.dc=b.next,b.next=null);a.dc||(a.Xc=null);return b}
u.prototype.Vf=function(){for(var a;a=lb(this);){var b=this.Ta,c=this.mf;if(3==b&&a.jc&&!a.Ed){var d;for(d=this;d&&d.fd;d=d.D)d.fd=!1}if(a.child)a.child.D=null,mb(a,b,c);else try{a.Ed?a.Jc.call(a.context):mb(a,b,c)}catch(e){nb.call(null,e)}Za.put(a)}this.Rd=!1};function mb(a,b,c){2==b?a.Jc.call(a.context,c):a.jc&&a.jc.call(a.context,c)}function jb(a,b){a.fd=!0;Ra(function(){a.fd&&nb.call(null,b)})}var nb=Ka;function ib(a){sa.call(this,a)}r(ib,sa);ib.prototype.name="cancel";
function eb(a,b,c){this.ha=a;this.resolve=b;this.reject=c};function ob(a,b,c,d){c=c||function(a,b){return a==b};d=d||function(b){return a[b]};for(var e=a.length,f=b.length,h=[],k=0;k<e+1;k++)h[k]=[],h[k][0]=0;for(var p=0;p<f+1;p++)h[0][p]=0;for(k=1;k<=e;k++)for(p=1;p<=f;p++)c(a[k-1],b[p-1])?h[k][p]=h[k-1][p-1]+1:h[k][p]=Math.max(h[k-1][p],h[k][p-1]);for(var K=[],k=e,p=f;0<k&&0<p;)c(a[k-1],b[p-1])?(K.unshift(d(k-1,p-1)),k--,p--):h[k-1][p]>h[k][p-1]?k--:p--;return K}function pb(a){return Aa(arguments,function(a,c){return a+c},0)}
function qb(a){return pb.apply(null,arguments)/arguments.length}function rb(a){var b=arguments.length;if(2>b)return 0;var c=qb.apply(null,arguments);return pb.apply(null,za(arguments,function(a){return Math.pow(a-c,2)}))/(b-1)}function sb(a){return Math.sqrt(rb.apply(null,arguments))};var tb="StopIteration"in da?da.StopIteration:{message:"StopIteration",stack:""};function ub(){}ub.prototype.next=function(){throw tb;};ub.prototype.qc=function(){return this};function vb(a){if(a instanceof ub)return a;if("function"==typeof a.qc)return a.qc(!1);if(ia(a)){var b=0,c=new ub;c.next=function(){for(;;){if(b>=a.length)throw tb;if(b in a)return a[b++];b++}};return c}throw Error("Not implemented");}
function wb(a,b){if(ia(a))try{ya(a,b,void 0)}catch(c){if(c!==tb)throw c;}else{a=vb(a);try{for(;;)b.call(void 0,a.next(),void 0,a)}catch(c){if(c!==tb)throw c;}}}function xb(a){if(Ba(arguments,function(a){return!a.length})||!arguments.length)return new ub;var b=new ub,c=arguments,d=Da(c.length);b.next=function(){if(d){for(var a=za(d,function(a,b){return c[b][a]}),b=d.length-1;0<=b;b--){if(d[b]<c[b].length-1){d[b]++;break}if(0==b){d=null;break}d[b]=0}return a}throw tb;};return b};function yb(a,b){this.l={};this.a=[];this.Ua=this.Gb=0;var c=arguments.length;if(1<c){if(c%2)throw Error("Uneven number of arguments");for(var d=0;d<c;d+=2)this.set(arguments[d],arguments[d+1])}else a&&this.addAll(a)}m=yb.prototype;m.Ac=g("Gb");m.qa=function(){zb(this);for(var a=[],b=0;b<this.a.length;b++)a.push(this.l[this.a[b]]);return a};function Ab(a){zb(a);return a.a.concat()}m.Pa=function(a){return Bb(this.l,a)};m.kd=function(){return 0==this.Gb};
m.clear=function(){this.l={};this.Ua=this.Gb=this.a.length=0};m.remove=function(a){return Bb(this.l,a)?(delete this.l[a],this.Gb--,this.Ua++,this.a.length>2*this.Gb&&zb(this),!0):!1};function zb(a){if(a.Gb!=a.a.length){for(var b=0,c=0;b<a.a.length;){var d=a.a[b];Bb(a.l,d)&&(a.a[c++]=d);b++}a.a.length=c}if(a.Gb!=a.a.length){for(var e={},c=b=0;b<a.a.length;)d=a.a[b],Bb(e,d)||(a.a[c++]=d,e[d]=1),b++;a.a.length=c}}m.get=function(a,b){return Bb(this.l,a)?this.l[a]:b};
m.set=function(a,b){Bb(this.l,a)||(this.Gb++,this.a.push(a),this.Ua++);this.l[a]=b};m.addAll=function(a){var b;if(a instanceof yb)b=Ab(a),a=a.qa();else{b=[];var c=0,d;for(d in a)b[c++]=d;a=Fa(a)}for(c=0;c<b.length;c++)this.set(b[c],a[c])};m.forEach=function(a,b){for(var c=Ab(this),d=0;d<c.length;d++){var e=c[d],f=this.get(e);a.call(b,f,e,this)}};m.clone=function(){return new yb(this)};
m.qc=function(a){zb(this);var b=0,c=this.Ua,d=this,e=new ub;e.next=function(){if(c!=d.Ua)throw Error("The map has changed since the iterator was created");if(b>=d.a.length)throw tb;var e=d.a[b++];return a?e:d.l[e]};return e};function Bb(a,b){return Object.prototype.hasOwnProperty.call(a,b)};function Cb(){return t("iPhone")&&!t("iPod")&&!t("iPad")};function Fb(a,b){var c=Gb;return Object.prototype.hasOwnProperty.call(c,a)?c[a]:c[a]=b(a)};var Hb=t("Opera"),Ib=t("Trident")||t("MSIE"),Jb=t("Edge"),Kb=t("Gecko")&&!(-1!=Ga.toLowerCase().indexOf("webkit")&&!t("Edge"))&&!(t("Trident")||t("MSIE"))&&!t("Edge"),Lb=-1!=Ga.toLowerCase().indexOf("webkit")&&!t("Edge"),Mb;
a:{var Nb="",Ob=function(){var a=Ga;if(Kb)return/rv\:([^\);]+)(\)|;)/.exec(a);if(Jb)return/Edge\/([\d\.]+)/.exec(a);if(Ib)return/\b(?:MSIE|rv)[: ]([^\);]+)(\)|;)/.exec(a);if(Lb)return/WebKit\/(\S+)/.exec(a);if(Hb)return/(?:Version)[ \/]?(\S+)/.exec(a)}();Ob&&(Nb=Ob?Ob[1]:"");if(Ib){var Pb,Qb=da.document;Pb=Qb?Qb.documentMode:void 0;if(null!=Pb&&Pb>parseFloat(Nb)){Mb=String(Pb);break a}}Mb=Nb}var Rb=Mb,Gb={};
function Sb(a){return Fb(a,function(){for(var b=0,c=ua(String(Rb)).split("."),d=ua(String(a)).split("."),e=Math.max(c.length,d.length),f=0;0==b&&f<e;f++){var h=c[f]||"",k=d[f]||"";do{h=/(\d*)(\D*)(.*)/.exec(h)||["","","",""];k=/(\d*)(\D*)(.*)/.exec(k)||["","","",""];if(0==h[0].length&&0==k[0].length)break;b=va(0==h[1].length?0:parseInt(h[1],10),0==k[1].length?0:parseInt(k[1],10))||va(0==h[2].length,0==k[2].length)||va(h[2],k[2]);h=h[3];k=k[3]}while(0==b)}return 0<=b})};var Tb=Cb()||t("iPod"),Ub=t("iPad"),Vb=Ja(),Wb=t("Safari")&&!(Ja()||t("Coast")||t("Opera")||t("Edge")||t("Silk")||t("Android"))&&!(Cb()||t("iPad")||t("iPod"));/*

 Copyright 2015 The Lovefield Project Authors. All Rights Reserved.

 Licensed under the Apache License, Version 2.0 (the "License");
 you may not use this file except in compliance with the License.
 You may obtain a copy of the License at

     http://www.apache.org/licenses/LICENSE-2.0

 Unless required by applicable law or agreed to in writing, software
 distributed under the License is distributed on an "AS IS" BASIS,
 WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 See the License for the specific language governing permissions and
 limitations under the License.
*/
function Xb(){this.pe=Wb||Ub||Tb;this.fg=!(this.pe||Ib&&!Sb(10));!Ib||Sb(11);this.Ug=Vb||Wb;this.ug=n(window.Map)&&n(window.Map.prototype.values)&&n(window.Map.prototype.forEach)&&!this.pe;this.vg=n(window.Set)&&n(window.Set.prototype.values)&&n(window.Set.prototype.forEach)&&!this.pe}var Yb;function Zb(){n(Yb)||(Yb=new Xb);return Yb};function x(){this.l=new yb;Object.defineProperty(this,"size",{get:function(){return this.l.Ac()}})}x.prototype.clear=function(){this.l.clear()};x.prototype.clear=x.prototype.clear;x.prototype.delete=function(a){return this.l.remove(a)};x.prototype["delete"]=x.prototype.delete;x.prototype.forEach=function(a,b){return this.l.forEach(a,b)};x.prototype.forEach=x.prototype.forEach;x.prototype.get=function(a){return this.l.get(a)};x.prototype.get=x.prototype.get;x.prototype.has=function(a){return this.l.Pa(a)};
x.prototype.has=x.prototype.has;x.prototype.set=function(a,b){return this.l.set(a,b)};x.prototype.set=x.prototype.set;var $b=Zb().ug;function y(){return $b?new window.Map:new x}function ac(a){if(a instanceof x)return Ab(a.l);var b=0,c=Array(a.size);a.forEach(function(a,e){c[b++]=e});return c}function z(a){if(a instanceof x)return a.l.qa();var b=0,c=Array(a.size);a.forEach(function(a){c[b++]=a});return c};/*

 Copyright 2014 The Lovefield Project Authors. All Rights Reserved.

 Licensed under the Apache License, Version 2.0 (the "License");
 you may not use this file except in compliance with the License.
 You may obtain a copy of the License at

     http://www.apache.org/licenses/LICENSE-2.0

 Unless required by applicable law or agreed to in writing, software
 distributed under the License is distributed on an "AS IS" BASIS,
 WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 See the License for the specific language governing permissions and
 limitations under the License.
*/
function bc(a,b){this.sa=a;this.m=b||this.Ke()}var cc=0;m=bc.prototype;m.id=g("sa");m.Ke=function(){return{}};m.vf=g("m");m.Ja=function(){return{id:this.sa,value:this.vf()}};m.ob=function(a){return"#"==a.substr(-1)?this.sa:null};function dc(a){return new bc(a.id,a.value)}function ec(a){return new bc(cc++,a||{})}function fc(a){if(null==a)return null;a=new Uint8Array(a);for(var b="",c=0;c<a.length;++c)var d=a[c].toString(16),b=b+(2>d.length?"0"+d:d);return b};var gc={};q("lf.TransactionType",gc);gc.READ_ONLY=0;gc.READ_WRITE=1;function A(a,b,c,d,e){this.wd=a;this.jg=b;this.Tg=c;this.Qf=d;this.If=e}q("lf.TransactionStats",A);A.prototype.Og=g("wd");A.prototype.success=A.prototype.Og;A.prototype.ig=g("jg");A.prototype.insertedRowCount=A.prototype.ig;A.prototype.Sg=g("Tg");A.prototype.updatedRowCount=A.prototype.Sg;A.prototype.Pf=g("Qf");A.prototype.deletedRowCount=A.prototype.Pf;A.prototype.Hf=g("If");A.prototype.changedTableCount=A.prototype.Hf;function hc(a,b){this.yd=a;this.Ra=b||null;this.S=w();this.wd=!1;this.za=null}m=hc.prototype;m.H=fa;m.ec=fa;m.ka=function(){return(0==this.yd?this.ec():ic(this)).then(function(a){this.wd=!0;return a}.bind(this))};function ic(a){try{jc(a.Ra)}catch(b){return ab(b)}return kc(a).then(function(a){this.Ra.ka();return a}.bind(a))}function kc(a){lc(a);mc(a);return a.ec()}
function lc(a){a.Ra.kb.forEach(function(a,c){c=this.Ra.ca().get(c);c=this.H(c.getName(),c.cb.bind(c),0);var b=z(a.xa).map(function(a){return a.id()});0<b.length&&c.remove(b).ve(this.Se,this);a=z(a.la).map(function(a){return a[1]}).concat(z(a.wa));c.put(a).ve(this.Se,this)},a)}function mc(a){nc(a.Ra).forEach(function(a){var b=this.H(a.getName(),dc,1);b.remove([]);b.put(a.Ja())},a)}m.Se=function(a){this.S.reject(a)};
m.Y=function(){if(null===this.za)if(this.wd)if(0==this.yd)this.za=new A(!0,0,0,0,0);else{var a=0,b=0,c=0,d=0;this.Ra.kb.forEach(function(e){d++;a+=e.wa.size;c+=e.la.size;b+=e.xa.size});this.za=new A(!0,a,c,b,d)}else this.za=new A(!1,0,0,0,0);return this.za};function oc(a){this.Lg=a}oc.prototype.toString=g("Lg");var pc=new oc("backstore"),qc=new oc("cache"),rc=new oc("indexstore"),sc=new oc("engine"),tc=new oc("runner"),uc=new oc("observerregistry"),vc=new oc("schema");function wc(a){if(a.qa&&"function"==typeof a.qa)return a.qa();if(ja(a))return a.split("");if(ia(a)){for(var b=[],c=a.length,d=0;d<c;d++)b.push(a[d]);return b}return Fa(a)};function xc(a){this.l=new yb;a&&this.addAll(a)}function yc(a){var b=typeof a;return"object"==b&&a||"function"==b?"o"+la(a):b.substr(0,1)+a}m=xc.prototype;m.Ac=function(){return this.l.Ac()};m.add=function(a){this.l.set(yc(a),a)};m.addAll=function(a){a=wc(a);for(var b=a.length,c=0;c<b;c++)this.add(a[c])};m.remove=function(a){return this.l.remove(yc(a))};m.clear=function(){this.l.clear()};m.kd=function(){return this.l.kd()};m.contains=function(a){return this.l.Pa(yc(a))};m.qa=function(){return this.l.qa()};
m.clone=function(){return new xc(this)};m.qc=function(){return this.l.qc(!1)};function zc(a){this.Xb=new xc(a);Object.defineProperty(this,"size",{get:function(){return this.Xb.Ac()}})}zc.prototype.add=function(a){this.Xb.add(a)};zc.prototype.add=zc.prototype.add;zc.prototype.clear=function(){this.Xb.clear()};zc.prototype.clear=zc.prototype.clear;zc.prototype.delete=function(a){return this.Xb.remove(a)};zc.prototype["delete"]=zc.prototype.delete;zc.prototype.forEach=function(a,b){this.Xb.qa().forEach(a,b)};zc.prototype.has=function(a){return this.Xb.contains(a)};
zc.prototype.has=zc.prototype.has;var Ac=Zb().vg;function B(a){return Ac?n(a)?new window.Set(a):new window.Set:new zc(a)}function C(a){if(a instanceof zc)return a.Xb.qa();var b=0,c=Array(a.size);a.forEach(function(a){c[b++]=a});return c}function Bc(a,b){if(b.size>a.size)return!1;var c=!0;b.forEach(function(b){c=c&&a.has(b)});return c};function Cc(a,b){this.sa=a;this.m=b||{}}function Dc(a){var b=B();a.forEach(function(a){b.add(a>>9)});return C(b)}Cc.prototype.W=g("sa");function Ec(a,b){b.forEach(function(a){this.m[a.id()]=a.Ja()},a)}function Fc(a,b){b.forEach(function(a){delete this.m[a]},a)}Cc.prototype.Ja=function(){return{id:this.sa,value:JSON.stringify(this.m)}};function Gc(a){return new Cc(a.id,JSON.parse(a.value))};function Hc(a,b,c){this.Z=a;this.Ib=b;this.nf=c}m=Hc.prototype;m.get=function(a){if(0==a.length)return this.Vd();var b=this.Ib;return Ic(this,a).then(function(c){return a.map(function(a){var d=c.get(a>>9);return b(d.m[a])})})};function Ic(a,b){var c=y(),d=w();a=Dc(b).map(function(a){return new u(function(b,d){var e;try{e=this.Z.get(a)}catch(p){d(p);return}e.onerror=d;e.onsuccess=function(a){a=Gc(a.target.result);c.set(a.W(),a);b()}},this)},a);db(a).then(function(){d.resolve(c)});return d.ha}
m.Vd=function(){return new u(function(a,b){var c=[],d;try{d=this.Z.openCursor()}catch(e){b(e);return}d.onerror=b;d.onsuccess=function(){var b=d.result;if(b){var f=Gc(b.value).m,h;for(h in f)c.push(this.Ib(f[h]));b.continue()}else a(c)}.bind(this)},this)};m.Tb=function(a){return new u(function(b,c){var d;try{d=a()}catch(e){c(e);return}d.onsuccess=b;d.onerror=c},this)};
m.put=function(a){if(0==a.length)return v();var b=y();a.forEach(function(a){var c=a.id()>>9,e=b.get(c)||null;null===e&&(e=this.nf(this.Z.name,c));Ec(e,[a]);b.set(c,e)},this);a=z(b).map(function(a){return this.Tb(function(){return this.Z.put(a.Ja())}.bind(this))},this);return db(a)};
m.remove=function(a){if(0==a.length)return this.Tb(function(){return this.Z.clear()}.bind(this));var b=y();a.forEach(function(a){var c=a>>9,e=b.get(c)||null;null===e&&(e=this.nf(this.Z.name,c));Fc(e,[a]);b.set(c,e)},this);a=z(b).map(function(a){return this.Tb(function(){return 0==Object.keys(a.m).length?this.Z.delete(a.W()):this.Z.put(a.Ja())}.bind(this))},this);return db(a)};function Jc(a,b,c){a=a.b(qc);var d=[c<<9,(c+1<<9)-1];b=a.Va(b,d[0],d[1]);c=new Cc(c);Ec(c,b);return c}
function Kc(a,b){return new Cc(b)};function Lc(a){this.V=a.b(qc);this.C=a.b(rc);this.g=a.b(vc)}Lc.prototype.update=function(a){a.forEach(function(a){Mc(this,a);Nc(this,a)},this)};function Nc(a,b){var c=b.getName();b.xa.forEach(function(a,b){this.V.remove(c,b)},a);b.wa.forEach(function(a){this.V.set(c,a)},a);b.la.forEach(function(a){this.V.set(c,a[1])},a)}function Mc(a,b){var c=a.g.table(b.getName());Oc(b).forEach(function(a){Pc(this,c,a)},a)}
function Pc(a,b,c){var d=a.C.mc.get(b.getName())||[],e=0;d.forEach(function(a){try{Qc(a,c),e++}catch(h){throw d.slice(0,e).forEach(function(a){Qc(a,[c[1],c[0]])},this),h;}},a)}function Qc(a,b){var c=null===b[1]?void 0:b[1].ob(a.getName()),d=null===b[0]?void 0:b[0].ob(a.getName());if(!n(d)&&n(c))a.add(c,b[1].id());else if(n(d)&&n(c)){if(null===c||null===d){if(c==d)return}else if(0==a.lb().compare(d,c))return;a.add(c,b[1].id());a.remove(d,b[0].id())}else n(d)&&!n(c)&&a.remove(d,b[0].id())};var Rc={};q("lf.ConstraintAction",Rc);Rc.RESTRICT=0;Rc.CASCADE=1;var Sc={};q("lf.ConstraintTiming",Sc);Sc.IMMEDIATE=0;Sc.DEFERRABLE=1;var Tc={};q("lf.Order",Tc);Tc.DESC=0;Tc.ASC=1;var Vc={};q("lf.Type",Vc);Vc.ARRAY_BUFFER=0;Vc.BOOLEAN=1;Vc.DATE_TIME=2;Vc.INTEGER=3;Vc.NUMBER=4;Vc.STRING=5;Vc.OBJECT=6;var Wc={0:null,1:!1,2:Object.freeze(new Date(0)),3:0,4:0,5:"",6:null};q("lf.type.DEFAULT_VALUES",Wc);function D(a,b){this.code=a;this.message="http://google.github.io/lovefield/error_lookup/src/error_lookup.html?c="+a;if(1<arguments.length)for(var c=1;c<=Math.min(4,arguments.length-1);++c)this.message+="&p"+(c-1)+"="+encodeURIComponent(String(arguments[c]).slice(0,64))}r(D,Error);function Xc(){this.l=y();this.size=0}m=Xc.prototype;m.has=function(a){return this.l.has(a)};m.set=function(a,b){var c=this.l.get(a)||null;null===c&&(c=B(),this.l.set(a,c));c.has(b)||(c.add(b),this.size++);return this};m.Wb=function(a,b){var c=this.l.get(a)||null;null===c&&(c=B(),this.l.set(a,c));b.forEach(function(a){c.has(a)||(c.add(a),this.size++)},this);return this};m.ae=function(a){a.keys().forEach(function(b){var c=a.get(b);this.Wb(b,c)},this);return this};
m.delete=function(a,b){var c=this.l.get(a)||null;if(null===c)return!1;if(b=c.delete(b))--this.size,0==c.size&&this.l.delete(a);return b};m.get=function(a){a=this.l.get(a)||null;return null===a?null:C(a)};m.clear=function(){this.l.clear();this.size=0};m.keys=function(){return ac(this.l)};m.values=function(){var a=[];this.l.forEach(function(b){a.push.apply(a,C(b))});return a};function Yc(a){this.C=a.b(rc);this.g=a.b(vc);this.V=a.b(qc);this.bd=null}function Zc(a,b,c){var d=b.zb().xg;c.forEach(function(a){d.forEach(function(b){if(null==a.m[b.getName()])throw new D(202,b.j());},this)},a)}function $c(a,b,c,d){b.zb().Ud.forEach(function(a){a.timing==d&&ad(this,a,c)},a)}function ad(a,b,c){var d=bd(a,b);c.forEach(function(a){if(cd(a[0],a[1],b.name)&&(a=a[1].ob(b.name),null!==a&&!d.Pa(a)))throw new D(203,b.name);},a)}
function bd(a,b){null===a.bd&&(a.bd=y());var c=a.bd.get(b.name)||null;null===c&&(c=a.g.table(b.Xa)[b.Kc].Ca(),c=a.C.get(c.j()),a.bd.set(b.name,c));return c}function cd(a,b,c){return(null===a?null!==b:null===b)||a.ob(c)!=b.ob(c)}function dd(a,b,c,d){b=ed(a.g.info(),b.getName(),0);null!==b&&(b=b.filter(function(a){return a.timing==d}),0!=b.length&&fd(a,b,c,function(a,b,c){if(b.Pa(c))throw new D(203,a.name);}))}
function gd(a,b,c){b=ed(a.g.info(),b.getName(),1);if(null===b)return null;var d=new Xc;fd(a,b,c,function(a,b,c){b=b.get(c);0<b.length&&d.Wb(a.Ge,b)});return d}function hd(a,b,c){var d=new Xc;fd(a,c,b,function(a,b,c,k){b.get(c).forEach(function(b){d.set(b,{Sd:a,Cg:k[1]})})});return d}function fd(a,b,c,d){b.forEach(function(a){var b=this.C.get(a.name),e=bd(this,a);c.forEach(function(c){if(cd(c[0],c[1],e.getName())){var f=c[0].ob(e.getName());d(a,b,f,c)}},this)},a)}
function id(a,b,c,d){0!=c.length&&(c=c.map(function(a){return[null,a]}),$c(a,b,c,d))}function jd(a,b,c,d){0!=c.length&&($c(a,b,c,d),dd(a,b,c,d))}function kd(a,b,c,d){0!=c.length&&(c=c.map(function(a){return[a,null]}),dd(a,b,c,d))}
function ld(a,b,c){var d={ue:[],qf:new Xc},e=new Xc;e.Wb(b.getName(),c.map(function(a){return a.id()}));do{var f=new Xc;e.keys().forEach(function(a){var b=this.g.table(a);a=e.get(a).map(function(a){return[this.V.get(a),null]},this);b=gd(this,b,a);null!==b&&(d.ue.unshift.apply(d.ue,b.keys()),f.ae(b))},a);e=f;d.qf.ae(e)}while(0<e.size);return d};function md(a){this.wa=y();this.la=y();this.xa=y();this.A=a}m=md.prototype;m.getName=g("A");m.add=function(a){if(this.xa.has(a.id())){var b=[this.xa.get(a.id()),a];this.la.set(a.id(),b);this.xa.delete(a.id())}else this.wa.set(a.id(),a)};m.modify=function(a){var b=a[1],c=a[0].id();this.wa.has(c)?this.wa.set(c,b):(this.la.has(c)&&(a=[this.la.get(a[0].id())[0],b]),this.la.set(c,a))};
m.delete=function(a){if(this.wa.has(a.id()))this.wa.delete(a.id());else if(this.la.has(a.id())){var b=this.la.get(a.id())[0];this.la.delete(a.id());this.xa.set(a.id(),b)}else this.xa.set(a.id(),a)};m.ae=function(a){a.wa.forEach(function(a){this.add(a)},this);a.la.forEach(function(a){this.modify(a)},this);a.xa.forEach(function(a){this.delete(a)},this)};
function Oc(a){var b=[];a.wa.forEach(function(a){b.push([null,a])});a.la.forEach(function(a){b.push(a)});a.xa.forEach(function(a){b.push([a,null])});return b}m.toString=function(){return"["+ac(this.wa).toString()+"], ["+ac(this.la).toString()+"], ["+ac(this.xa).toString()+"]"};function nd(a){var b=new md(a.A);a.wa.forEach(function(a){b.delete(a)});a.xa.forEach(function(a){b.add(a)});a.la.forEach(function(a){b.modify([a[1],a[0]])});return b}
m.kd=function(){return 0==this.wa.size&&0==this.xa.size&&0==this.la.size};function od(a,b){this.aa=y();b.forEach(function(a){this.aa.set(a.getName(),a)},this);this.g=a.b(vc);this.V=a.b(qc);this.C=a.b(rc);this.Aa=new Yc(a);this.hd=new Lc(a);this.kb=y()}function nc(a){var b=[];ac(a.kb).map(function(a){return this.aa.get(a)},a).forEach(function(a){a.Db()&&(a.Da().forEach(function(a){b.push(this.C.get(a.j()))},this),b.push(this.C.get(a.getName()+".#")))},a);return b}m=od.prototype;m.ca=g("aa");
m.Bb=function(a,b){pd(this,a);Zc(this.Aa,a,b);id(this.Aa,a,b,0);for(var c=0;c<b.length;c++)qd(this,a,[null,b[c]])};function qd(a,b,c){var d=b.getName(),e=a.kb.get(d)||new md(d);a.kb.set(d,e);try{Pc(a.hd,b,c)}catch(h){throw h;}b=c[0];var f=c[1];null===b&&null!==f?(a.V.set(d,f),e.add(f)):null!==b&&null!==f?(a.V.set(d,f),e.modify(c)):null!==b&&null===f&&(a.V.remove(d,b.id()),e.delete(b))}
m.update=function(a,b){pd(this,a);Zc(this.Aa,a,b);b=b.map(function(a){return[this.V.get(a.id()),a]},this);rd(this,a,b);jd(this.Aa,a,b,0);b.forEach(function(b){qd(this,a,b)},this)};m.Wd=function(a,b){pd(this,a);Zc(this.Aa,a,b);for(var c=0;c<b.length;c++){var d=b[c],e=null,f,h=this.Aa;f=d;var k=a.zb().td;null===k?f=null:(k=k.j(),f=f.ob(k),f=h.C.get(k).get(f),f=0==f.length?null:f[0]);null!=f?(e=this.V.get(f),d.sa=f,jd(this.Aa,a,[[e,d]],0)):id(this.Aa,a,[d],0);qd(this,a,[e,d])}};
m.remove=function(a,b){pd(this,a);sd(this,a,b);kd(this.Aa,a,b,0);for(var c=0;c<b.length;c++)qd(this,a,[b[c],null])};function rd(a,b,c){b=ed(a.g.info(),b.getName(),1);if(null!==b){var d=hd(a.Aa,c,b);d.keys().forEach(function(a){d.get(a).forEach(function(b){var c=this.g.table(b.Sd.Ge),d=this.V.get(a),e=c.cb(d.Ja());e.m[b.Sd.wb]=b.Cg.m[b.Sd.Kc];qd(this,c,[d,e])},this)},a)}}
function sd(a,b,c){if(null!==ed(a.g.info(),b.getName(),1)){b=ld(a.Aa,b,c);var d=b.qf;b.ue.forEach(function(a){var b=this.g.table(a);a=d.get(a).map(function(a){return this.V.get(a)},this);kd(this.Aa,b,a,0);a.forEach(function(a){qd(this,b,[a,null])},this)},a)}}function jc(a){a.kb.forEach(function(a){var b=this.aa.get(a.getName());id(this.Aa,b,z(a.wa),1);kd(this.Aa,b,z(a.xa),1);jd(this.Aa,b,z(a.la),1)},a)}m.ka=aa();m.Lb=function(){var a=z(this.kb).map(function(a){return nd(a)});this.hd.update(a)};
function pd(a,b){if(!a.aa.has(b.getName()))throw new D(106,b.getName());};function E(a,b,c,d){this.from=a;this.s=b;this.ea=this.from==F?!1:c;this.na=this.s==F?!1:d}var F=new (aa());E.prototype.toString=function(){return(this.ea?"(":"[")+(this.from==F?"unbound":this.from)+", "+(this.s==F?"unbound":this.s)+(this.na?")":"]")};function td(a){if(ud(a))return[];var b=null,c=null;a.from==F||(b=new E(F,a.from,!1,!a.ea));a.s==F||(c=new E(a.s,F,!a.na,!1));return[b,c].filter(function(a){return null!==a})}E.prototype.reverse=function(){return new E(this.s,this.from,this.na,this.ea)};
function vd(a,b){var c=wd(a.from,b.from,!0,a.ea,b.ea);if(0==c)return!0;var d=-1==c?a:b;a=1==c?a:b;return d.s==F||d.s>a.from||d.s==a.from&&!d.na&&!a.ea}function xd(){return new E(F,F,!1,!1)}function ud(a){return a.from==F&&a.s==F}function yd(a){return a.from==a.s&&a.from!=F&&!a.ea&&!a.na}E.prototype.contains=function(a){var b=this.s==F||a<this.s||a==this.s&&!this.na;return(this.from==F||a>this.from||a==this.from&&!this.ea)&&b};
function wd(a,b,c,d,e){function f(a){return c?a:1==a?-1:1}d=d||!1;e=e||!1;return a==F?b==F?(d?!e:e)?d?f(1):f(-1):0:f(-1):b==F?f(1):a<b?-1:a==b?(d?!e:e)?d?f(1):f(-1):0:1}function zd(a,b){var c=wd(a.from,b.from,!0,a.ea,b.ea);0==c&&(c=wd(a.s,b.s,!1,a.na,b.na));return c}function Ad(a){if(0==a.length)return[];a.sort(zd);for(var b=Array(a.length+1),c=0;c<b.length;c++)b[c]=0==c?new E(F,a[c].from,!1,!0):c==b.length-1?new E(a[c-1].s,F,!0,!1):new E(a[c-1].s,a[c].from,!0,!0);return b};function Bd(a){this.lc=[];n(a)&&this.add(a)}Bd.prototype.toString=function(){return this.lc.map(function(a){return a.toString()}).join(",")};Bd.prototype.Pa=function(a){return this.lc.some(function(b){return b.contains(a)})};Bd.prototype.qa=g("lc");
Bd.prototype.add=function(a){if(0!=a.length)if(a=this.lc.concat(a),1==a.length)this.lc=a;else{a.sort(zd);for(var b=[],c=a[0],d=1;d<a.length;++d)if(vd(c,a[d])){var e=a[d],f=xd();if(c.from!=F&&e.from!=F){var h=wd(c.from,e.from,!0);1!=h?(f.from=c.from,f.ea=0!=h?c.ea:c.ea&&e.ea):(f.from=e.from,f.ea=e.ea)}c.s!=F&&e.s!=F&&(h=wd(c.s,e.s,!1),-1!=h?(f.s=c.s,f.na=0!=h?c.na:c.na&&e.na):(f.s=e.s,f.na=e.na));c=f}else b.push(c),c=a[d];b.push(c);this.lc=b}};
function Cd(a,b){var c=[];a.qa().map(function(a){return b.qa().map(function(b){var c;if(vd(a,b)){c=xd();var d=wd(a.from,b.from,!0),d=0==d?a.ea?a:b:-1!=d?a:b;c.from=d.from;c.ea=d.ea;a.s==F||b.s==F?b=a.s==F?b:a:(d=wd(a.s,b.s,!1),b=0==d?a.na?a:b:-1==d?a:b);c.s=b.s;c.na=b.na}else c=null;return c})}).forEach(function(a){c=c.concat(a)});return new Bd(c.filter(function(a){return null!==a}))};function G(a,b){this.entries=a;this.M=B(b);this.ab=null}G.prototype.o=function(){return C(this.M)};function Dd(a){return a.entries.map(function(a){return a.va.m})}function Ed(a){return a.entries.map(function(a){return a.va.id()})}function Fd(a,b){return a.ab.get(b.j())}var Gd=null;function Hd(){null===Gd&&(Gd=new G([],[]));return Gd}
function Id(a){if(0==a.length)return Hd();for(var b=a.reduce(function(a,b){return a+b.entries.length},0),c=Array(b),d=0,b=a.map(function(a){var b=y();a.entries.forEach(function(a){c[d++]=a;b.set(a.id,a)});return b}),e=y(),f=0;f<c.length;f++)b.every(function(a){return a.has(c[f].id)})&&e.set(c[f].id,c[f]);return new G(z(e),C(a[0].M))}function Jd(a){if(0==a.length)return Hd();var b=y();a.forEach(function(a){a.entries.forEach(function(a){b.set(a.id,a)})});return new G(z(b),C(a[0].M))}
function Kd(a,b){var c=1<b.length;a=a.map(function(a){return new Ld(a,c)});return new G(a,b)}function Ld(a,b){this.va=a;this.id=Md++;this.Yd=b}var Md=0;function H(a,b){var c=b.Ka;return null!==c&&a.va.m.hasOwnProperty(c)?a.va.m[c]:a.Yd?a.va.m[Nd(b.H())][b.getName()]:a.va.m[b.getName()]}function Od(a,b,c){var d=b.Ka;if(null!=d)a.va.m[d]=c;else if(a.Yd){var d=Nd(b.H()),e=a.va.m[d];null==e&&(e={},a.va.m[d]=e);e[b.getName()]=c}else a.va.m[b.getName()]=c}
function Pd(a,b,c,d){function e(a,b){if(a.Yd){a=a.va.m;for(var c in a)f[c]=a[c]}else f[b[0]]=a.va.m}var f={};e(a,b);e(c,d);a=new bc(-1,f);return new Ld(a,!0)};q("lf.bind",function(a){return new Qd(a)});function Qd(a){this.fa=a}q("lf.Binder",Qd);Qd.prototype.Ca=g("fa");function Rd(){this.Ye=Sd();var a=Td();this.Ob=y();this.Ob.set(1,Ud());this.Ob.set(2,Vd());this.Ob.set(4,a);this.Ob.set(3,a);this.Ob.set(5,Wd());this.Ob.set(6,Xd())}var Yd;function Zd(){null!=Yd||(Yd=new Rd);return Yd}function $d(a,b,c){a=a.Ob.get(b)||null;if(null===a)throw new D(550);c=a.get(c)||null;if(null===c)throw new D(550);return c}
function Sd(){function a(a){return a}var b=y();b.set(1,function(a){return null===a?null:a?1:0});b.set(2,function(a){return null===a?null:a.getTime()});b.set(3,a);b.set(4,a);b.set(5,a);return b}function Ud(){var a=y();a.set("eq",function(a,c){return a==c});a.set("neq",function(a,c){return a!=c});return a}
function Td(){var a=Ud();a.set("between",function(a,c){return null===a||null===c[0]||null===c[1]?!1:a>=c[0]&&a<=c[1]});a.set("gte",function(a,c){return null===a||null===c?!1:a>=c});a.set("gt",function(a,c){return null===a||null===c?!1:a>c});a.set("in",function(a,c){return-1!=c.indexOf(a)});a.set("lte",function(a,c){return null===a||null===c?!1:a<=c});a.set("lt",function(a,c){return null===a||null===c?!1:a<c});return a}
function Wd(){var a=Td();a.set("match",function(a,c){return null===a||null===c?!1:(new RegExp(c)).test(a)});return a}function Xd(){var a=y();a.set("eq",function(a,c){if(null!==c)throw new D(550);return null===a});a.set("neq",function(a,c){if(null!==c)throw new D(550);return null!==a});return a}
function Vd(){var a=y();a.set("between",function(a,c){return null===a||null===c[0]||null===c[1]?!1:a.getTime()>=c[0].getTime()&&a.getTime()<=c[1].getTime()});a.set("eq",function(a,c){return(null===a?-1:a.getTime())==(null===c?-1:c.getTime())});a.set("gte",function(a,c){return null===a||null===c?!1:a.getTime()>=c.getTime()});a.set("gt",function(a,c){return null===a||null===c?!1:a.getTime()>c.getTime()});a.set("in",function(a,c){return c.some(function(b){return b.getTime()==a.getTime()})});a.set("lte",
function(a,c){return null===a||null===c?!1:a.getTime()<=c.getTime()});a.set("lt",function(a,c){return null===a||null===c?!1:a.getTime()<c.getTime()});a.set("neq",function(a,c){return(null===a?-1:a.getTime())!=(null===c?-1:c.getTime())});return a};function I(){this.h=this.D=null}var ae=[];I.prototype.getParent=g("D");I.prototype.fb=function(){for(var a=this;null!==a.getParent();)a=a.getParent();return a};function be(a){for(var b=0;null!==a.getParent();)b++,a=a.getParent();return b}function J(a){return a.h||ae}function ce(a,b){return J(a)[b]||null}function de(a,b,c){b.D=a;null===a.h?a.h=[b]:a.h.splice(c,0,b)}function L(a,b){b.D=a;null===a.h?a.h=[b]:a.h.push(b)}
function ee(a,b){var c=a.h&&a.h[b];return c?(c.D=null,a.h.splice(b,1),0==a.h.length&&(a.h=null),c):null}I.prototype.removeChild=function(a){return ee(this,J(this).indexOf(a))};function fe(a,b,c){ce(a,c).D=null;b.D=a;a.h[c]=b}function ge(a,b,c){!1!==b.call(c,a)&&J(a).forEach(function(a){ge(a,b,c)})};function he(){I.call(this);this.sa=ie++}r(he,I);var ie=0;m=he.prototype;m.eval=fa;m.Pc=fa;m.Fb=fa;m.eb=fa;m.o=fa;m.W=g("sa");function je(a,b,c){he.call(this);this.J=a;this.value=b;this.F=c;this.vc=$d(Zd(),this.J.I(),this.F);this.Wa=!1;this.cc=b}r(je,he);m=je.prototype;m.Fb=function(){var a=new je(this.J,this.value,this.F);a.cc=this.cc;a.Pc(this.Wa);var b=this.W();a.sa=b;return a};m.eb=function(a){return null!=a?(a.push(this.J),a):[this.J]};m.o=function(a){a=null!=a?a:B();a.add(this.J.H());return a};m.Pc=ba("Wa");
function ke(a){var b=!1;a.value instanceof Qd||(b="array"==ga(a.value)?!a.value.some(function(a){return a instanceof Qd}):!0);if(!b)throw new D(501);}m.eval=function(a){ke(this);if("in"==this.F)return le(this,a);var b=a.entries.filter(function(a){return this.vc(H(a,this.J),this.value)!=this.Wa},this);return new G(b,a.o())};
m.bind=function(a){if(this.cc instanceof Qd){var b=this.cc.Ca();if(a.length<=b)throw new D(510);this.value=a[b]}else"array"==ga(this.cc)&&(this.value=this.cc.map(function(b){if(b instanceof Qd){var c=b.Ca();if(a.length<=c)throw new D(510);return a[b.Ca()]}return b}))};function le(a,b){var c=B(a.value),d=function(a){return null===a?!1:c.has(a)!=this.Wa}.bind(a);a=b.entries.filter(function(a){return d(H(a,this.J))},a);return new G(a,b.o())}
m.toString=function(){return"value_pred("+this.J.j()+" "+this.F+(this.Wa?"(complement)":"")+" "+this.value+")"};m.md=function(){ke(this);return null!==this.value&&("between"==this.F||"in"==this.F||"eq"==this.F||"gt"==this.F||"gte"==this.F||"lt"==this.F||"lte"==this.F)};
m.we=function(){var a=null;if("between"==this.F)a=new E(me(this,this.value[0]),me(this,this.value[1]),!1,!1);else{if("in"==this.F)return a=this.value.map(function(a){return new E(a,a,!1,!1)}),new Bd(this.Wa?Ad(a):a);a=me(this,this.value);a="eq"==this.F?new E(a,a,!1,!1):"gte"==this.F?new E(a,F,!1,!1):"gt"==this.F?new E(a,F,!0,!1):"lte"==this.F?new E(F,a,!1,!1):new E(F,a,!1,!0)}return new Bd(this.Wa?td(a):[a])};function me(a,b){return 2==a.J.I()?b.getTime():b};function ne(a){this.da=a;this.Yc=this.Ga=null}function pe(a,b){null===a.Ga&&null!=a.w&&(a.Ga=qe(a.w));return a.Ga.get(b)||null}function qe(a){var b=y();ge(a,function(a){b.set(a.W(),a)});return b}ne.prototype.ca=fa;ne.prototype.clone=fa;function re(a,b){b.w&&(a.w=b.w.Fb());a.Yc=b}ne.prototype.bind=function(){return this};function se(a,b){a=a.w;null!=a&&ge(a,function(a){a instanceof je&&a.bind(b)})};function te(a){ne.call(this,a)}r(te,ne);function ue(a){var b="";a.forEach(function(c,d){b+=c.J.j()+" ";b+=1==c.order?"ASC":"DESC";d<a.length-1&&(b+=", ")});return b}te.prototype.ca=function(){return B(this.from)};te.prototype.clone=function(){var a=new te(this.da);re(a,this);this.f&&(a.f=this.f.slice());this.from&&(a.from=this.from.slice());a.X=this.X;a.L=this.L;this.N&&(a.N=this.N.slice());this.ra&&(a.ra=this.ra.slice());this.Sb&&(a.Sb=this.Sb);this.Zb&&(a.Zb=this.Zb);a.hb=this.hb;return a};
te.prototype.bind=function(a){te.jb.bind.call(this,a);null!=this.Sb&&(this.X=a[this.Sb.Ca()]);null!=this.Zb&&(this.L=a[this.Zb.Ca()]);se(this,a);return this};function ve(a,b){this.Ha=a;this.aa=b}ve.prototype.fb=g("Ha");ve.prototype.ca=g("aa");function we(a){var b=B();a.forEach(function(a){a.ca().forEach(b.add.bind(b))});return b};function xe(a,b){this.global=a;this.Oa=a.b(pc);this.ud=b.map(function(a){return a.context});this.hf=b.map(function(a){return a.ie});this.Md=we(this.hf);this.xe=ye(this);this.Eb=w()}function ye(a){return a.ud.some(function(a){return!(a instanceof te)})?1:0}m=xe.prototype;
m.exec=function(){function a(){var f=d.shift();if(f){var h=e[c.length];return f.fb().exec(b,h).then(function(b){c.push(b[0]);return a()})}return v()}var b=0==this.xe?void 0:new od(this.global,this.Md),c=[],d=this.hf.slice(),e=this.ud;return a().then(function(){this.ja=this.Oa.Hb(this.xe,C(this.Md),b);return this.ja.ka()}.bind(this)).then(function(){this.fe(c);return c}.bind(this),function(a){null!=b&&b.Lb();throw a;})};m.I=g("xe");m.ca=g("Md");m.W=function(){return la(this)};m.getPriority=fa;
m.fe=aa();m.Y=function(){var a=null;null!=this.ja&&(a=this.ja.Y());return null===a?new A(!1,0,0,0,0):a};function ze(a,b){xe.call(this,a,b);this.Kb=a.b(uc)}r(ze,xe);ze.prototype.getPriority=l(0);ze.prototype.fe=function(a){this.ud.forEach(function(b,c){Ae(this.Kb,b,a[c])},this)};function Be(a,b){this.c=a;this.Kb=a.b(uc);this.Ia=a.b(tc);this.hd=new Lc(a);this.kb=b;var c=a.b(vc);a=this.kb.map(function(a){return c.table(a.getName())});this.aa=B(a);this.Eb=w()}m=Be.prototype;m.exec=function(){this.hd.update(this.kb);this.Nc();return v()};m.I=l(1);m.ca=g("aa");m.W=function(){return la(this)};m.getPriority=l(1);m.Nc=function(){var a=Ce(this.Kb,this.aa);0!=a.length&&(a=new ze(this.c,a),De(this.Ia,a))};function Ee(a){this.c=a;this.Oa=a.b(pc);this.Ia=a.b(tc)}Ee.prototype.de=function(a){a=new Be(this.c,a);De(this.Ia,a)};function M(a,b){this.Ua=a;this.i=b;this.$a=y()}q("lf.backstore.FirebaseRawBackStore",M);M.prototype.dd=g("i");M.prototype.ed=function(){throw new D(351);};function Fe(a,b){var c=w(),d=a;b.length&&(d=a.child(b));d.once("value",function(a){c.resolve(a.val())},function(a){c.reject(a)});return c.ha}function Ge(a,b,c){function d(a){a?e.reject(a):e.resolve()}c=c||!1;var e=w();c?a.set(b,d):a.update(b,d);return e.ha}
M.prototype.Ea=function(a){return Fe(this.i,"@rev/R").then(function(a){this.Sa=a;return Fe(this.i,"@table")}.bind(this)).then(function(b){var c=0,d;for(d in b)this.$a.set(d,b[d]),b[d]>c&&(c=b[d]);a.oa().forEach(function(a){this.$a.has(a.getName())||(b[a.getName()]=++c)},this);d=this.i.child("@table");return Ge(d,b)}.bind(this))};
function He(a,b,c){var d=a.$a.get(b);return null!=d?function(){var a={},b=w();this.i.orderByChild("T").equalTo(d).once("value",function(d){d.forEach(function(b){var d=c(b.val());a[parseInt(b.key(),10)]=d});b.resolve(a)});return b.ha}.call(a).then(function(a){a["@rev"]={R:++this.Sa};return Ge(this.i,a)}.bind(a)):v()}M.prototype.tc=function(a){return He(this,a,l(null)).then(function(){this.$a.delete(a);return Ge(this.i.child("@table/"+a),null,!0)}.bind(this))};M.prototype.dropTable=M.prototype.tc;
M.prototype.rc=function(a,b,c){return He(this,a,function(a){var d=a.P;d[b]=c;return{R:this.Sa+1,T:a.T,P:d}}.bind(this))};M.prototype.addTableColumn=M.prototype.rc;M.prototype.uc=function(a,b){return He(this,a,function(a){var c=a.P;delete c[b];return{R:this.Sa+1,T:a.T,P:c}}.bind(this))};M.prototype.dropTableColumn=M.prototype.uc;M.prototype.Mc=function(a,b,c){return He(this,a,function(a){var d=a.P;d[c]=d[b];delete d[b];return{R:this.Sa+1,T:a.T,P:d}}.bind(this))};M.prototype.renameTableColumn=M.prototype.Mc;
M.prototype.mb=function(){throw new D(351);};M.prototype.createRow=M.prototype.mb;M.prototype.Dc=g("Ua");M.prototype.getVersion=M.prototype.Dc;M.prototype.fc=function(a){var b=w();a=this.$a.get(a);this.i.orderByChild("T").equalTo(a).once("value",function(a){var c=[];a.forEach(function(a){c.push(a.val().P)});b.resolve(c)});return b.ha};M.prototype.dump=function(){var a={},b=ac(this.$a).map(function(b){return this.fc(b).then(function(c){a[b]=c})}.bind(this));return db(b).then(function(){return a})};
M.prototype.dump=M.prototype.dump;function Ie(a,b,c){hc.call(this,b,c);this.i=a}r(Ie,hc);Ie.prototype.H=function(a){return this.i.Bc(a)};
Ie.prototype.ec=function(){if(0==this.yd)return this.S.resolve(),this.S.ha;var a=this.Ra.kb;if(0==a.size)this.S.resolve();else{var b=this.i.Sa+1;this.i.Sa=b;var c={"@rev":{R:b}};a.forEach(function(a,e){var d=this.i.$a.get(e);a.wa.forEach(function(a,e){c[e]={R:b,T:d,P:a.m}});a.la.forEach(function(a,e){c[e]={R:b,T:d,P:a[1].m}});a.xa.forEach(function(a,b){c[b]=null})},this);this.i.i.update(c,function(c){null===c?this.S.resolve():(this.i.Sa=b-1,c=z(a).map(function(a){return Je(this.i,a.getName())},this),
db(c).then(this.S.reject.bind(this.S),this.S.reject.bind(this.S)))}.bind(this))}return this.S.ha};function Ke(){this.Ba=y()}function Le(a,b){if(0==b.length)return z(a.Ba);var c=[];b.forEach(function(a){a=this.Ba.get(a)||null;null===a||c.push(a)},a);return c}Ke.prototype.getData=g("Ba");Ke.prototype.get=function(a){return v(Le(this,a))};function Me(a,b){b.forEach(function(a){this.Ba.set(a.id(),a)},a)}Ke.prototype.put=function(a){Me(this,a);return v()};function Ne(a,b){0==b.length||b.length==a.Ba.size?a.Ba.clear():b.forEach(function(a){this.Ba.delete(a)},a)}
Ke.prototype.remove=function(a){Ne(this,a);return v()};function Oe(a){return 0==a.Ba.size?0:ac(a.Ba).reduce(function(a,c){return a>c?a:c},0)};function Pe(a,b){this.g=a;this.Cf=b;this.Lc=y();this.Sa=-1;this.M=y();this.$a=y();this.Jd=null}m=Pe.prototype;
m.Ea=function(a){this.i=this.Cf.child(this.g.name());var b=a||function(){return v()};return Fe(this.i,"@db/version").then(function(a){return null===a?Ge(this.i,Qe(this),!0).then(function(){var a=new M(0,this.i);return b(a)}.bind(this)).then(function(){return this.Ea()}.bind(this)):a==this.g.version()?Fe(this.i,"@rev/R").then(function(a){this.Sa=a;return Fe(this.i,"@table")}.bind(this)).then(function(a){for(var b in a)this.$a.set(b,a[b]);a=this.g.oa().map(function(a){return Je(this,a.getName())},this);
return db(a)}.bind(this)).then(function(){Re(this);Se(this);return v()}.bind(this)):this.ge(a,b).then(function(){return this.Ea()}.bind(this))}.bind(this))};m.ge=function(a,b){var c=new M(a,this.i);return c.Ea(this.g).then(function(){return v()}.bind(this)).then(function(){return b(c)}).then(function(){var a=this.i.child("@db");return Ge(a,{version:this.g.version()},!0)}.bind(this))};
function Se(a){a.i.off();a.i.on("child_removed",a.zg.bind(a));a.Kd&&(a.Kd.off(),a.Lc.clear());a.Kd=a.i.orderByChild("R").startAt(a.Sa+1);a.Kd.on("value",a.de.bind(a))}function Re(a){cc=z(a.M).map(function(a){return Oe(a)}).reduce(function(a,c){return a>c?a:c},0)+1}m.zg=function(a){var b=a.val(),c=this.Lc.get(b.T)||null;null===c&&(c=B(),this.Lc.set(b.T,c));c.add(parseInt(a.key(),10))};
m.de=function(a){var b=a.child("@rev/R").val();null!=b&&b!=this.Sa&&(this.Sa=b,a=Te(this,a),a.forEach(function(a){var b=this.M.get(a.getName()),c=ac(a.xa);0<c.length&&Ne(b,c);var f=z(a.wa);a.la.forEach(function(a){f.push(a[1])});Me(b,f)},this),0<a.length&&this.Hc(a),Se(this))};
function Te(a,b){var c=B(),d=y();a.$a.forEach(function(a,b){var e=this.M.get(b),f=new md(b);this.Lc.has(a)&&(b=C(this.Lc.get(a)),b.forEach(function(a){c.add(a)}),Le(e,b).forEach(function(a){f.delete(a)}));d.set(a,f)}.bind(a));b.forEach(function(a){if("@rev"!=a.key()){var b=parseInt(a.key(),10);if(!c.has(b)){var e=a.val();a=d.get(e.T);var k=this.M.get(a.getName()),e=this.g.table(a.getName()).cb({id:b,value:e.P});k.getData().has(b)?a.modify([Le(k,[b])[0],e]):a.add(e)}}}.bind(a));return z(d).filter(function(a){return!a.kd()})}
function Je(a,b){var c=w(),d=a.$a.get(b),e=a.g.table(b);a.i.orderByChild("T").equalTo(d).once("value",function(a){var d=new Ke,f=[];a.forEach(function(a){f.push(e.cb({id:parseInt(a.key(),10),value:a.val().P}))});Me(d,f);this.M.set(b,d);c.resolve()}.bind(a));return c.ha}function Qe(a){var b={};b["@db"]={version:a.g.version()};b["@rev"]={R:1};a.Sa=1;b["@table"]={};a.g.oa().forEach(function(a,d){a=a.getName();b["@table"][a]=d;this.M.set(a,new Ke);this.$a.set(a,d)},a);return b}
m.Hb=function(a,b,c){return new Ie(this,a,c)};m.Bc=function(a){var b=this.M.get(a)||null;if(null!==b)return b;throw new D(101,a);};m.close=aa();m.subscribe=ba("Jd");m.Hc=function(a){null!=this.Jd&&this.Jd(a)};function N(a,b,c,d){this.i=b;this.ja=c;this.Ua=a;this.Wc=d}q("lf.backstore.IndexedDBRawBackStore",N);N.prototype.dd=g("i");N.prototype.getRawDBInstance=N.prototype.dd;N.prototype.ed=g("ja");N.prototype.getRawTransaction=N.prototype.ed;N.prototype.tc=function(a){return new u(function(b,c){try{this.i.deleteObjectStore(a)}catch(d){c(d);return}b()},this)};N.prototype.dropTable=N.prototype.tc;
function Ue(a,b,c,d){return new u(function(a,f){var e;try{var k=this.ja.objectStore(b);e=k.openCursor()}catch(p){f(p);return}e.onsuccess=function(){var b=e.result;b?(c(b),b.continue()):(d(k),a())};e.onerror=f},a)}function Ve(a){return a instanceof ArrayBuffer?fc(a):a instanceof Date?a.getTime():a}
function We(a,b,c){function d(a){var b=Gc(a.value),d=b.m,e;for(e in d){var f=dc(d[e]);c(f);d[e]=f.Ja()}a.update(b.Ja())}function e(a){var b=dc(a.value);c(b);a.update(b.Ja())}return Ue(a,b,a.Wc?d:e,aa())}N.prototype.rc=function(a,b,c){var d=Ve(c);return We(this,a,function(a){a.m[b]=d})};N.prototype.addTableColumn=N.prototype.rc;N.prototype.uc=function(a,b){return We(this,a,function(a){delete a.m[b]})};N.prototype.dropTableColumn=N.prototype.uc;
N.prototype.Mc=function(a,b,c){return We(this,a,function(a){a.m[c]=a.m[b];delete a.m[b]})};N.prototype.renameTableColumn=N.prototype.Mc;function Xe(a,b){var c=[];return new u(function(a,e){var d;try{d=this.ja.objectStore(b).openCursor()}catch(h){e(h);return}d.onsuccess=function(){var b=d.result;if(b){if(this.Wc){var e=Gc(b.value).m,f;for(f in e)c.push(e[f])}else c.push(b.value);b.continue()}else a(c)}.bind(this);d.onerror=e},a)}N.prototype.mb=function(a){var b={},c;for(c in a)b[c]=Ve(a[c]);return ec(b)};
N.prototype.createRow=N.prototype.mb;N.prototype.Dc=g("Ua");N.prototype.getVersion=N.prototype.Dc;N.prototype.dump=function(){for(var a=this.i.objectStoreNames,b=[],c=0;c<a.length;++c){var d=a.item(c);b.push(this.fc(d))}return db(b).then(function(b){var c={};b.forEach(function(b,d){c[a.item(d)]=b});return c})};N.prototype.dump=N.prototype.dump;N.prototype.fc=function(a){return Xe(this,a).then(function(a){return a.map(function(a){return a.value})})};function Ye(a,b){this.Z=a;this.Ib=b}Ye.prototype.get=function(a){if(0==a.length)return null!=this.Z.getAll?Ze(this):$e(this);a=a.map(function(a){return new u(function(b,d){var c;try{c=this.Z.get(a)}catch(f){d(f);return}c.onerror=d;c.onsuccess=function(a){b(this.Ib(a.target.result))}.bind(this)},this)},this);return db(a)};
function $e(a){return new u(function(a,c){var b=[],e;try{e=this.Z.openCursor()}catch(f){c(f);return}e.onerror=c;e.onsuccess=function(){var c=e.result;c?(b.push(this.Ib(c.value)),c.continue()):a(b)}.bind(this)},a)}function Ze(a){return new u(function(a,c){var b;try{b=this.Z.getAll()}catch(e){c(e);return}b.onerror=c;b.onsuccess=function(){var c=b.result.map(function(a){return this.Ib(a)},this);a(c)}.bind(this)},a)}
Ye.prototype.Tb=function(a){return new u(function(b,c){var d;try{d=a()}catch(e){c(e);return}d.onsuccess=b;d.onerror=c},this)};Ye.prototype.put=function(a){if(0==a.length)return v();a=a.map(function(a){return this.Tb(function(){return this.Z.put(a.Ja())}.bind(this))},this);return db(a)};
Ye.prototype.remove=function(a){return new u(function(b,c){var d=this.Z.count();d.onsuccess=function(d){if(0==a.length||d.target.result==a.length)return this.Tb(function(){return this.Z.clear()}.bind(this)).then(b,c);d=a.map(function(a){return this.Tb(function(){return this.Z.delete(a)}.bind(this))},this);db(d).then(b,c)}.bind(this);d.onerror=c},this)};function af(a,b,c,d,e){hc.call(this,c,e);this.c=a;this.ja=b;this.Wc=d;this.ja.oncomplete=this.S.resolve.bind(this.S);this.ja.onabort=this.S.reject.bind(this.S)}r(af,hc);af.prototype.H=function(a,b,c){return this.Wc?(c=null!=c?c:0,a=this.ja.objectStore(a),new Hc(a,b,0==c?ra(Jc,this.c):Kc)):new Ye(this.ja.objectStore(a),b)};af.prototype.ec=function(){return this.S.ha};function bf(a,b){this.c=a;this.g=b;this.Gd=b.je.Sf||!1}m=bf.prototype;
m.Ea=function(a){var b=window.indexedDB||window.mozIndexedDB||window.webkitIndexedDB||window.msIndexedDB;if(null==b)throw new D(352);var c=a||function(){return v()};return new u(function(a,e){var d;try{d=b.open(this.g.name(),this.g.version())}catch(h){e(h);return}d.onerror=function(a){a=a.target.error;e(new D(361,a.name,a.message))};d.onupgradeneeded=function(a){cf(this,c,a).then(aa(),e)}.bind(this);d.onsuccess=function(b){this.i=b.target.result;this.qe().then(function(b){cc=Math.max(cc,b+1);a(this.i)}.bind(this))}.bind(this)},
this)};function cf(a,b,c){var d=c.target.result;c=new N(c.oldVersion,d,c.target.transaction,a.Gd);df(d);a.g.oa().forEach(ra(a.Lf,d),a);return b(c)}function df(a){for(var b=[],c=0;c<a.objectStoreNames.length;++c){var d=a.objectStoreNames.item(c);-1!=d.indexOf(".")&&b.push(d)}b.forEach(function(b){try{a.deleteObjectStore(b)}catch(f){}})}
m.Lf=function(a,b){a.objectStoreNames.contains(b.getName())||a.createObjectStore(b.getName(),{keyPath:"id"});b.Db()&&(b.Da().forEach(function(b){ef(a,b.j())},this),ef(a,ff(b)))};function ef(a,b){a.objectStoreNames.contains(b)||a.createObjectStore(b,{keyPath:"id"})}m.Hb=function(a,b,c){b=this.i.transaction(gf(b),0==a?"readonly":"readwrite");return new af(this.c,b,a,this.Gd,c)};
function gf(a){var b=B();a.forEach(function(a){b.add(a.getName());a.Db()&&(a.Da().forEach(function(a){b.add(a.j())}),b.add(ff(a)))});return C(b)}
m.qe=function(a){function b(){if(0==d.length)return v();var a=d.shift();return c(a).then(b)}function c(b){return new u(function(c,d){var k;try{k=(a||e.transaction([b])).objectStore(b).openCursor(null,"prev")}catch(ca){d(ca);return}k.onsuccess=function(a){(a=a.target.result)&&(f=Math.max(f,h(a)));c(f)};k.onerror=function(){c(f)}})}var d=this.g.oa().map(function(a){return a.getName()}),e=this.i,f=0,h=function(a){return this.Gd?(a=Gc(a.value),Object.keys(a.m).reduce(function(a,b){return Math.max(a,b)},
0)):a.key}.bind(this);return new u(function(a){b().then(function(){a(f)})})};m.close=function(){this.i.close()};m.Bc=function(){throw new D(511);};m.subscribe=aa();m.Hc=aa();function hf(a,b,c){hc.call(this,b,c);this.Z=a;0==b&&this.S.resolve()}r(hf,hc);hf.prototype.H=function(a){return this.Z.Bc(a)};hf.prototype.ec=function(){this.S.resolve();return this.S.ha};function jf(a){this.g=a;this.M=y()}m=jf.prototype;m.Ea=function(){this.g.oa().forEach(this.gg,this);return v()};m.Bc=function(a){var b=this.M.get(a)||null;if(null===b)throw new D(101,a);return b};m.Hb=function(a,b,c){return new hf(this,a,c)};function kf(a,b){if(!a.M.has(b)){var c=new Ke;a.M.set(b,c)}}m.gg=function(a){kf(this,a.getName());a.Db()&&(a.Da().forEach(function(a){kf(this,a.j())},this),kf(this,ff(a)))};m.close=aa();m.subscribe=aa();m.Hc=aa();function mf(a){jf.call(this,a);this.qd=null}r(mf,jf);mf.prototype.subscribe=function(a){null===this.qd&&(this.qd=a)};mf.prototype.Hc=function(a){null===this.qd||this.qd(a)};function nf(a,b,c){this.ja=a;this.A='"'+b+'"';this.Ib=c}nf.prototype.get=function(a){var b=this.Ib;return of(this.ja,"SELECT id, value FROM "+this.A+" "+(0==a.length?"":"WHERE id IN ("+a.join(",")+")"),[],function(a){for(var c=a.rows.length,e=Array(c),f=0;f<c;++f)e[f]=b({id:a.rows.item(f).id,value:JSON.parse(a.rows.item(f).value)});return e})};
nf.prototype.put=function(a){if(0==a.length)return v();var b="INSERT OR REPLACE INTO "+this.A+"(id, value) VALUES (?, ?)";a.forEach(function(a){of(this.ja,b,[a.id(),JSON.stringify(a.m)])},this);return v()};nf.prototype.remove=function(a){of(this.ja,"DELETE FROM "+this.A+" "+(0==a.length?"":"WHERE id IN ("+a.join(",")+")"),[]);return v()};function pf(a,b,c){hc.call(this,b,c);this.i=a;this.M=y();this.Nd=[]}r(pf,hc);function qf(a){return a.replace(".","__d__").replace("#","__s__")}pf.prototype.H=function(a,b){var c=this.M.get(a)||null;null===c&&(c=new nf(this,qf(a),b),this.M.set(a,c));return c};function of(a,b,c,d){var e=w();a.Nd.push({Ng:b,Dg:c,transform:d,S:e});return e.ha}
pf.prototype.ec=function(){var a=null,b=this.S.reject.bind(this.S),c=function(a,b){this.S.reject(b)}.bind(this),d=[],e=function(b,h){if(null!==a){var f=h;null!=a.transform&&null!=h&&(f=a.transform(h));d.push(f);a.S.resolve(f)}0<this.Nd.length?(a=h=this.Nd.shift(),b.executeSql(h.Ng,h.Dg,e,c)):this.S.resolve(d)}.bind(this);0==this.yd?this.i.readTransaction(e,b):this.i.transaction(e,b);return this.S.ha};function O(a,b,c){this.i=c;this.c=a;this.Ua=b}q("lf.backstore.WebSqlRawBackStore",O);O.prototype.dd=g("i");O.prototype.getRawDBInstance=O.prototype.dd;O.prototype.ed=function(){throw new D(356);};O.prototype.getRawTransaction=O.prototype.ed;function rf(a){return new pf(a.i,1,new od(a.c,B()))}O.prototype.tc=function(a){var b=rf(this);of(b,"DROP TABLE "+a,[]);return b.ka()};O.prototype.dropTable=O.prototype.tc;
O.prototype.fc=function(a){var b=rf(this);of(b,"SELECT id, value FROM "+a,[]);return b.ka().then(function(a){for(var b=a[0].rows.length,c=Array(b),f=0;f<b;++f)c[f]={id:a[0].rows.item(f).id,value:JSON.parse(a[0].rows.item(f).value)};return v(c)})};function sf(a,b,c){var d=rf(a),e="UPDATE "+b+" SET value=? WHERE id=?";return a.fc(b).then(function(a){a.forEach(function(a){a=c(a);of(d,e,[JSON.stringify(a.value),a.id])});return d.ka()})}
O.prototype.rc=function(a,b,c){var d=Ve(c);return sf(this,a,function(a){a.value[b]=d;return a})};O.prototype.addTableColumn=O.prototype.rc;O.prototype.uc=function(a,b){return sf(this,a,function(a){delete a.value[b];return a})};O.prototype.dropTableColumn=O.prototype.uc;O.prototype.Mc=function(a,b,c){return sf(this,a,function(a){a.value[c]=a.value[b];delete a.value[b];return a})};O.prototype.renameTableColumn=O.prototype.Mc;O.prototype.mb=function(a){var b={},c;for(c in a)b[c]=Ve(a[c]);return ec(b)};
O.prototype.createRow=O.prototype.mb;O.prototype.Dc=g("Ua");O.prototype.getVersion=O.prototype.Dc;function tf(a){of(a,'SELECT tbl_name FROM sqlite_master WHERE type="table"',[],function(a){for(var b=Array(a.rows.length),d=0;d<b.length;++d)b[d]=a.rows.item(d).tbl_name;return b})}
O.prototype.dump=function(){var a=w(),b=rf(this);tf(b);var c={};b.ka().then(function(b){b=b[0].filter(function(a){return"__lf_ver"!=a&&"__WebKitDatabaseInfoTable__"!=a}).map(function(a){return this.fc(a).then(function(b){c[a]=b})},this);db(b).then(function(){a.resolve(c)})}.bind(this));return a.ha};O.prototype.dump=O.prototype.dump;function uf(a,b,c){this.c=a;this.g=b;this.Mg=c||1}m=uf.prototype;m.Ea=function(a){if(null==window.openDatabase)throw new D(353);var b=a||function(){return v()};return new u(function(a,d){var c=window.openDatabase(this.g.name(),"",this.g.name(),this.Mg);if(null!=c)this.i=c,vf(this,b).then(function(){this.qe().then(a,d)}.bind(this),function(a){if(a instanceof D)throw a;throw new D(354,a.message);});else throw new D(354);},this)};
function vf(a,b){var c=w(),d=new pf(a.i,1,new od(a.c,B()));of(d,"CREATE TABLE IF NOT EXISTS __lf_ver(id INTEGER PRIMARY KEY, v INTEGER)",[]);of(d,"SELECT v FROM __lf_ver WHERE id = 0",[]);d.ka().then(function(a){var d=0;a[1].rows.length&&(d=a[1].rows.item(0).v);d<this.g.version()?this.ge(b,d).then(c.resolve.bind(c)):d>this.g.version()?c.reject(new D(108)):c.resolve()}.bind(a),c.reject.bind(c));return c.ha}m.Hb=function(a,b,c){if(null!=this.i)return new pf(this.i,a,c);throw new D(2);};m.close=aa();
m.Bc=function(){throw new D(512);};m.subscribe=function(){throw new D(355);};m.Hc=function(){throw new D(355);};m.ge=function(a,b){return wf(this).then(function(){return a(new O(this.c,b,this.i))}.bind(this))};
function wf(a){var b=a.g.oa(),c=new pf(a.i,1,new od(a.c,B())),d=new pf(a.i,1,new od(a.c,B()));of(c,"INSERT OR REPLACE INTO __lf_ver VALUES (0, ?)",[a.g.version()]);tf(c);return c.ka().then(function(a){var c=a[1];c.filter(function(a){return-1!=a.indexOf("__d__")}).forEach(function(a){of(d,"DROP TABLE "+('"'+a+'"'),[])});var e=[],k=[],p=[];b.map(function(a){-1==c.indexOf(a.getName())&&e.push(a.getName());a.Db&&(a.Da().forEach(function(a){a=qf(a.j());e.push(a);k.push(a)}),a=qf(ff(a)),e.push(a),p.push(a))});
e.forEach(function(a){of(d,"CREATE TABLE "+('"'+a+'"')+"(id INTEGER PRIMARY KEY, value TEXT)",[])});return d.ka()})}m.qe=function(){var a=0,b=w(),c=function(b){var c=new pf(this.i,0);of(c,"SELECT MAX(id) FROM "+('"'+b+'"'),[]);return c.ka().then(function(b){b=b[0].rows.item(0)["MAX(id)"];a=Math.max(b,a)})}.bind(this),d=this.g.oa().map(function(a){return c(a.getName())});db(d).then(function(){cc=Math.max(cc,a+1);b.resolve()},function(a){b.reject(a)});return b.ha};function xf(a){this.l=y();this.$b=y();a.oa().forEach(function(a){this.$b.set(a.getName(),B())},this)}m=xf.prototype;m.set=function(a,b){this.l.set(b.id(),b);this.$b.get(a).add(b.id())};m.Wb=function(a,b){var c=this.$b.get(a);b.forEach(function(a){this.l.set(a.id(),a);c.add(a.id())},this)};m.get=function(a){return this.l.get(a)||null};function yf(a,b){return b.map(function(a){return this.get(a)},a)}
m.Va=function(a,b,c){var d=[],e=Math.min(b,c),f=Math.max(b,c);a=this.$b.get(a);if(a.size<f-e)a.forEach(function(a){a>=e&&a<=f&&(a=this.l.get(a),d.push(a))},this);else for(b=e;b<=f;++b)a.has(b)&&(c=this.l.get(b),d.push(c));return d};m.remove=function(a,b){this.l.delete(b);this.$b.get(a).delete(b)};m.Ac=function(a){return null!=a?this.$b.get(a).size:this.l.size};m.clear=function(){this.l.clear();this.$b.clear()};function zf(a,b,c){var d=0,e=a.length;for(c=c||Af;d<e;){var f=d+e>>1;0>c(a[f],b)?d=f+1:e=f}return d==e&&a[d]==b?d:~d}function Af(a,b){return a-b}function Bf(a,b,c){c=zf(a,b,c);return 0>c?(a.splice(-(c+1),0,b),!0):!1};function Cf(a,b,c,d){a=b?a.reverse():a;if(null==c&&null==d)return a;c=Math.min(n(c)?c:a.length,a.length);if(0==c)return[];d=Math.min(d||0,a.length);return a.slice(d,d+c)};function Df(){this.ia=0;this.Gc=null}Df.prototype.add=function(a,b){this.ia+=b;this.Gc=null===this.Gc?a:a>this.Gc?a:this.Gc};Df.prototype.remove=function(a,b){this.ia-=b};Df.prototype.clear=function(){this.ia=0};function Ef(a,b){a.clear();b.forEach(function(a){this.ia+=a.ia},a)};function Ff(a,b,c,d){this.A=a;this.$=b;this.xf=c;this.za=new Df;if(d){a=511;a*=a*a;if(d.length>=a)throw new D(6,a);d=Gf(this,d);this.ua=d=Hf(d)}else this.clear()}var If=[];m=Ff.prototype;m.getName=g("A");m.toString=function(){return this.ua.toString()};m.add=function(a,b){this.ua=this.ua.Bb(a,b)};m.set=function(a,b){this.ua=this.ua.Bb(a,b,!0)};m.remove=function(a,b){this.ua=this.ua.remove(a,b)};m.get=function(a){return this.ua.get(a)};
m.ad=function(a){if(null==a)return this.Y().ia;if(a instanceof E){if(ud(a))return this.Y().ia;if(yd(a))return this.get(a.from).length}return this.Va([a]).length};m.Y=g("za");m.Vd=function(a,b,c,d){c=Array(a);this.ua.fill({offset:b?this.za.ia-a-d:d,count:a,te:0},c);return b?c.reverse():c};
m.Va=function(a,b,c,d){var e=Jf(this.ua).a[0];if(!n(e)||0==c)return If;b=b||!1;c=null!=c?Math.min(c,this.za.ia):this.za.ia;d=d||0;var f=Math.min(Math.max(this.za.ia-d,0),c);if(0==f)return If;if(!n(a)||1==a.length&&a[0]instanceof E&&ud(a[0]))return this.Vd(f,b,c,d);a=this.$.tf(a);var h=Array(b?this.za.ia:f),k={count:0,X:h.length,reverse:b,L:d},p=1<this.lb().Zd();a.forEach(function(a){for(var b=this.$.vd(a),b=this.$.Xd(a)?e:b[0],b=this.ua.Yf(b),c=0;null!=b&&k.count<k.X;){if(p){for(var d=b,f=a,K=k,Eb=
h,Uc=d.u.lb(),oe=-1,Oa=0;Oa<d.a.length;++Oa)if(Uc.Cb(d.a[Oa],f)){oe=Oa;break}if(-1!=oe)for(Oa=oe;Oa<d.a.length&&K.count<K.X;++Oa)Uc.Cb(d.a[Oa],f)&&Kf(d,K,Eb,Oa)}else b.Va(a,k,h);0!=k.L||b.ld(a)?c=0:c++;b=2==c?null:b.next()}},this);h.length>k.count&&h.splice(k.count,h.length-k.count);return b?Cf(h,b,c,d):h};m.clear=function(){this.ua=Lf(this);this.za.clear()};m.Pa=function(a){return this.ua.Pa(a)};m.min=function(){return this.Jb(this.$.min.bind(this.$))};m.max=function(){return this.Jb(this.$.max.bind(this.$))};
function Mf(a,b,c){if(!a.$.Od(b.a[c]))if(1<b.a[c].length){if(null===b.a[c][0])return null}else return null;return[b.a[c],a.xf?[b.B[c]]:b.B[c]]}m.Jb=function(a){var b;a:{b=Jf(this.ua);var c=0;do if(c>=b.a.length)b=b.ya,c=0;else{var d=Mf(this,b,c);if(null!==d){b=d;break a}c++}while(null!==b);b=null}a:{c=Nf(this.ua);d=c.a.length-1;do if(0>d)c=c.rb,d=0;else{var e=Mf(this,c,d);if(null!==e){c=e;break a}d--}while(null!==c);c=null}return null===b||null===c?null:1==a(b[0],c[0])?b:c};m.Ma=g("xf");m.lb=g("$");
m.Qa=function(a,b){return null!=a?0==this.$.compare(a,b):!1};m.Ja=function(){for(var a=[],b=Jf(this.ua);b;)a.push(new bc(b.sa,[b.a,b.B])),b=b.ya;return a};function Of(a,b,c,d){a=new Ff(b,a,c);d=Pf(d,a);a.ua=d;return a}function Qf(a,b){this.sa=a;this.u=b;this.nb=0;this.ya=this.rb=this.D=null;this.a=[];this.B=[];this.h=[];this.Yf=1==b.lb().Zd()?this.Oe:this.Ne}function Lf(a){return new Qf(cc++,a)}function P(a){return 0==a.nb}m=Qf.prototype;m.next=g("ya");
function Rf(a){function b(a){return null!=a?a.sa.toString():"_"}var c=a.sa+"["+a.a.join("|")+"]",d=a.h.map(function(a){return a.sa}).join("|"),e=a.B.join("/"),f=b(a.rb)+"{",f=P(a)?f+e:f+d,f=f+"}"+b(a.D);a.ya&&(a=Rf(a.ya),c=c+"  "+a[0],f=f+"  "+a[1]);return[c,f]}m.toString=function(){var a="",b=Rf(this),a=a+(b[0]+"\n"+b[1]+"\n");this.h.length&&(a+=this.h[0].toString());return a};function Jf(a){return P(a)?a:Jf(a.h[0])}function Nf(a){return P(a)?a:Nf(a.h[a.h.length-1])}
function Sf(a,b){b&&(b.rb=a);a&&(a.ya=b)}function Gf(a,b){for(var c=b.length,d=0,e=a=Lf(a);0<c;){var f=768<=c?511:257<=c&&511>=c?c:257,h=b.slice(d,d+f);a.a=h.map(function(a){return a.key});a.B=h.map(function(a){return a.value});d+=f;c-=f;0<c&&(f=Lf(a.u),Sf(a,f),a=f)}return e}function Tf(a){var b=a[0],c=Lf(b.u);c.nb=b.nb+1;c.h=a;for(b=0;b<a.length;++b)a[b].D=c,0<b&&c.a.push(a[b].a[0]);return c}
function Hf(a){var b=a,c=[];do c.push(b),b=b.ya;while(b);if(512>=c.length)b=Tf(c);else{var d=c.length,e=0,b=Lf(a.u);for(b.nb=a.nb+2;0<d;){a=768<=d?511:257<=d&&511>=d?d:257;var f=c.slice(e,e+a),h=Tf(f);h.D=b;b.h.length&&(b.a.push(f[0].a[0]),Sf(b.h[b.h.length-1],h));b.h.push(h);e+=a;d-=a}}return b}m.get=function(a){var b=Uf(this,a);if(P(this)){var c=If;this.u.Qa(this.a[b],a)&&(c=c.concat(this.B[b]));return c}b=this.u.Qa(this.a[b],a)?b+1:b;return this.h[b].get(a)};
m.Pa=function(a){var b=Uf(this,a);return this.u.Qa(this.a[b],a)?!0:P(this)?!1:this.h[b].Pa(a)};m.remove=function(a,b){Vf(this,a,-1,b);return null===this.D?(a=this,1==this.h.length&&(a=this.h[0],a.D=null),a):this};function Wf(a){return P(a)?a.a[0]:Wf(a.h[0])}function Xf(a){a.a=[];for(var b=1;b<a.h.length;++b)a.a.push(Wf(a.h[b]))}
function Vf(a,b,c,d){var e=Uf(a,b),f=P(a);if(!f){var h=a.u.Qa(a.a[e],b)?e+1:e;if(Vf(a.h[h],b,h,d))Xf(a);else return!1}else if(!a.u.Qa(a.a[e],b))return!1;if(a.a.length>e&&a.u.Qa(a.a[e],b)){if(n(d)&&!a.u.Ma()&&f&&(h=a.B[e],d=zf(h,d,void 0),0>d?d=!1:(h.splice(d,1),d=!0),d&&a.u.Y().remove(b,1),a.B[e].length))return!1;a.a.splice(e,1);f&&(f=a.u.Ma()?1:a.B[e].length,a.B.splice(e,1),a.u.Y().remove(b,f))}if(256>a.a.length&&null!==a.D){a:{if(a.ya&&256<a.ya.a.length)b=a.ya,e=d=0,f=a.a.length+1;else if(a.rb&&
256<a.rb.a.length)b=a.rb,d=a.rb.a.length-1,e=P(a)?d:d+1,f=0;else{b=!1;break a}a.a.splice(f,0,b.a[d]);b.a.splice(d,1);d=P(a)?a.B:a.h;P(a)?h=b.B:(h=b.h,h[e].D=a);d.splice(f,0,h[e]);h.splice(e,1);P(b)||(Xf(b),Xf(a));b=!0}b||Yf(a,c)}return!0}
function Yf(a,b){var c,d,e;a.ya&&511>a.ya.a.length?(c=a.ya,e=d=0):a.rb&&(c=a.rb,d=c.a.length,e=P(c)?c.B.length:c.h.length);d=[d,0].concat(a.a);Array.prototype.splice.apply(c.a,d);d=null;P(a)?d=a.B:(d=a.h,d.forEach(function(a){a.D=c}));d=[e,0].concat(d);Array.prototype.splice.apply(P(c)?c.B:c.h,d);Sf(a.rb,a.ya);P(c)||Xf(c);-1!=b&&(a.D.a.splice(b,1),a.D.h.splice(b,1))}
m.Bb=function(a,b,c){var d=Uf(this,a);if(P(this)){if(this.u.Qa(this.a[d],a)){if(c)this.u.Y().remove(a,this.u.Ma()?1:this.B[d].length),this.B[d]=this.u.Ma()?b:[b];else{if(this.u.Ma())throw new D(201,this.u.getName(),JSON.stringify(a));if(!Bf(this.B[d],b))throw new D(109);}this.u.Y().add(a,1);return this}this.a.splice(d,0,a);this.B.splice(d,0,this.u.Ma()?b:[b]);this.u.Y().add(a,1);512==this.a.length?(d=Lf(this.u),a=Lf(this.u),a.nb=1,a.a=[this.a[256]],a.h=[this,d],a.D=this.D,this.D=a,d.a=this.a.splice(256),
d.B=this.B.splice(256),d.D=a,Sf(d,this.ya),Sf(this,d),d=a):d=this;return d}d=this.u.Qa(this.a[d],a)?d+1:d;a=this.h[d].Bb(a,b,c);P(a)||1!=a.a.length||(this.a.splice(d,0,a.a[0]),a.h[1].D=this,a.h[0].D=this,this.h.splice(d,1,a.h[1]),this.h.splice(d,0,a.h[0]));return 512==this.a.length?Zf(this):this};
function Zf(a){var b=Lf(a.u),c=Lf(a.u);b.D=a.D;b.nb=a.nb+1;b.a=[a.a[256]];b.h=[a,c];a.a.splice(256,1);c.D=b;c.nb=a.nb;c.a=a.a.splice(256);c.h=a.h.splice(257);c.h.forEach(function(a){a.D=c});a.D=b;Sf(c,a.ya);Sf(a,c);return b}function Uf(a,b){for(var c=0,d=a.a.length,e=a.u.lb();c<d;){var f=c+d>>1;-1==e.compare(a.a[f],b)?c=f+1:d=f}return c}m.Oe=function(a){if(!P(this)){var b=Uf(this,a);this.u.Qa(this.a[b],a)&&b++;return this.h[b].Oe(a)}return this};
m.Ne=function(a){if(!P(this)){var b=Uf(this,a);this.u.Qa(this.a[b],a)&&(a.some(function(a){return a==F})||b++);return this.h[b].Ne(a)}return this};
m.Va=function(a,b,c){function d(a){return a[0]?a[1]?0:1:-1}var e=this.u.lb(),f=0,h=this.a.length-1,k=this.a,p=d(e.xb(k[f],a)),K=d(e.xb(k[h],a));if(1!=p&&(-1!=p||-1!=K)){var ta=function(a,b){b=a+b>>1;return b==a?b+1:b},ca=function(b,c,f){if(b>=c)return 0==f?c:-1;var h=d(e.xb(k[b],a));if(0==h)return b;if(1==h)return-1;h=ta(b,c);if(h==c)return 0==f?c:-1;var p=d(e.xb(k[h],a));return 0==p?ca(b,h,p):-1==p?ca(h+1,c,f):ca(b+1,h,p)},Db=function(b,c){if(b>=c)return b;var f=d(e.xb(k[c],a));if(0==f)return c;
if(-1==f)return b;f=ta(b,c);if(f==c)return b;var h=d(e.xb(k[f],a));return 0==h?Db(f,c):1==h?Db(b,f-1):-1};0!=p&&(f=ca(f+1,h,K));-1!=f&&(h=Db(f,h),-1!=h&&h>=f&&$f(this,b,c,f,h+1))}};function Kf(a,b,c,d){if(a.u.Ma())!b.reverse&&b.L?b.L--:c[b.count++]=a.B[d];else for(var e=0;e<a.B[d].length&&b.count<c.length;++e)!b.reverse&&b.L?b.L--:c[b.count++]=a.B[d][e]}function $f(a,b,c,d,e){for(;d<e&&(b.reverse||!(b.count>=b.X));++d)Kf(a,b,c,d)}
m.fill=function(a,b){if(P(this))for(var c=0;c<this.B.length&&0<a.count;++c)if(0<a.offset){if(a.offset-=this.u.Ma()?1:this.B[c].length,0>a.offset)for(var d=this.B[c].length+a.offset;d<this.B[c].length&&0<a.count;++d)b[a.te++]=this.B[c][d],a.count--}else if(this.u.Ma())b[a.te++]=this.B[c],a.count--;else for(d=0;d<this.B[c].length&&0<a.count;++d)b[a.te++]=this.B[c][d],a.count--;else for(c=0;c<this.h.length&&0<a.count;++c)this.h[c].fill(a,b)};
function Pf(a,b){var c=b.Y();a=a.map(function(a){var d=new Qf(a.id(),b);d.a=a.m[0];d.B=a.m[1];d.a.forEach(function(a,e){c.add(a,b.Ma()?1:d.B[e].length)});return d});for(var d=0;d<a.length-1;++d)Sf(a[d],a[d+1]);return 1<a.length?Hf(a[0]):a[0]}m.ld=function(a){return this.u.lb().ld(this.a[0],a)};function ag(a){this.Zc=0==a?bg:cg;this.be=0==a?function(a){return null!=a?a.reverse():null}:function(a){return a||null};this.he=0==a?eg:fg}function cg(a,b){return a>b?1:a<b?-1:0}function bg(a,b){return cg(b,a)}function fg(a,b){return zd(a,b)}function eg(a,b){return zd(b,a)}m=ag.prototype;m.xb=function(a,b){b=this.be(b);var c=[b.from==F,b.s==F];if(!c[0]){var d=this.Zc(a,b.from);c[0]=b.ea?1==d:-1!=d}c[1]||(d=this.Zc(a,b.s),c[1]=b.na?-1==d:1!=d);return c};m.compare=function(a,b){return this.Zc(a,b)};
m.min=function(a,b){return a<b?1:a==b?0:-1};m.max=function(a,b){return a>b?1:a==b?0:-1};m.Cb=function(a,b){a=this.xb(a,b);return a[0]&&a[1]};m.ld=function(a,b){return this.Cb(a,b)};m.tf=function(a){return a.filter(function(a){return null!==a}).sort(function(a,c){return this.he(a,c)}.bind(this))};m.Xd=function(a){return this.be(a).from==F};m.vd=function(a){a=this.be(a);return[a.from,a.s]};m.Od=function(a){return null!==a};m.Zd=l(1);
m.toString=function(){return this.compare==bg?"SimpleComparator_DESC":"SimpleComparator_ASC"};function gg(a){ag.call(this,a);this.Zc=0==a?hg:ig}r(gg,ag);function ig(a,b){return null===a?null===b?0:-1:null===b?1:cg(a,b)}function hg(a,b){return ig(b,a)}gg.prototype.Cb=function(a,b){return null===a?ud(b):gg.jb.Cb.call(this,a,b)};gg.prototype.Jb=function(a,b){return null===a?null===b?0:-1:null===b?1:null};gg.prototype.min=function(a,b){var c=this.Jb(a,b);null===c&&(c=gg.jb.min.call(this,a,b));return c};
gg.prototype.max=function(a,b){var c=this.Jb(a,b);null===c&&(c=gg.jb.max.call(this,a,b));return c};function jg(a){this.pa=a.map(function(a){return new ag(a)})}function kg(a,b,c,d){for(var e=0,f=0;f<a.pa.length&&0==e;++f)e=d(a.pa[f],b[f],c[f]);return e}m=jg.prototype;m.compare=function(a,b){return kg(this,a,b,function(a,b,e){return b==F||e==F?0:a.compare(b,e)})};m.min=function(a,b){return kg(this,a,b,function(a,b,e){return a.min(b,e)})};m.max=function(a,b){return kg(this,a,b,function(a,b,e){return a.max(b,e)})};
m.xb=function(a,b){for(var c=[!0,!0],d=0;d<this.pa.length&&(c[0]||c[1]);++d){var e=this.pa[d].xb(a[d],b[d]);c[0]=c[0]&&e[0];c[1]=c[1]&&e[1]}return c};m.Cb=function(a,b){for(var c=!0,d=0;d<this.pa.length&&c;++d)c=this.pa[d].Cb(a[d],b[d]);return c};m.ld=function(a,b){return this.pa[0].Cb(a[0],b[0])};
m.tf=function(a){var b=a.filter(function(a){return a.every(ha)});a=Array(this.pa.length);for(var c=0;c<a.length;c++)a[c]=b.map(function(a){return a[c]});a.forEach(function(a,b){a.sort(function(a,c){return this.pa[b].he(a,c)}.bind(this))},this);b=Array(b.length);for(c=0;c<b.length;c++)b[c]=a.map(function(a){return a[c]});return b.sort(function(a,b){for(var c=0,d=0;d<this.pa.length&&0==c;++d)c=this.pa[d].he(a[d],b[d]);return c}.bind(this))};m.Xd=function(a){return this.pa[0].Xd(a[0])};
m.vd=function(a){var b=a.map(function(a,b){return this.pa[b].vd(a)[0]},this);a=a.map(function(a,b){return this.pa[b].vd(a)[1]},this);return[b,a]};m.Od=function(a){return a.every(function(a,c){return this.pa[c].Od(a)},this)};m.Zd=function(){return this.pa.length};function lg(a){jg.call(this,a);this.pa=a.map(function(a){return new gg(a)})}r(lg,jg);function mg(a){if(1==a.f.length)return new ag(a.f[0].order);var b=a.f.map(function(a){return a.order});return a.f.some(function(a){return a.da.ic()})?new lg(b):new jg(b)};function ng(a){this.fa=a;this.pb=B();this.Qc=new Df;this.za=new Df}m=ng.prototype;m.getName=function(){return this.fa.getName()};m.add=function(a,b){null===a?(this.pb.add(b),this.Qc.add(a,1)):this.fa.add(a,b)};m.set=function(a,b){null===a?(this.pb.clear(),this.Qc.clear(),this.add(a,b)):this.fa.set(a,b)};m.remove=function(a,b){null===a?b?(this.pb.delete(b),this.Qc.remove(a,1)):(this.pb.clear(),this.Qc.clear()):this.fa.remove(a,b)};m.get=function(a){return null===a?C(this.pb):this.fa.get(a)};m.ad=function(a){return this.fa.ad(a)};
m.Y=function(){Ef(this.za,[this.fa.Y(),this.Qc]);return this.za};m.Va=function(a,b,c,d){b=this.fa.Va(a,b,c,d);return null!=a?b:b.concat(C(this.pb))};m.clear=function(){this.pb.clear();this.fa.clear()};m.Pa=function(a){return null===a?0!=this.pb.size:this.fa.Pa(a)};m.min=function(){return this.fa.min()};m.max=function(){return this.fa.max()};m.Ja=function(){return[new bc(-2,C(this.pb))].concat(this.fa.Ja())};m.lb=function(){return this.fa.lb()};
function og(a,b){for(var c=-1,d=0;d<b.length;++d)if(-2==b[d].id()){c=d;break}if(-1==c)throw new D(102);d=b[c].m;b=b.slice(0);b.splice(c,1);a=a(b);var e=new ng(a);d.forEach(function(a){e.pb.add(a)});return e}m.Ma=function(){return this.fa.Ma()};function pg(a){this.A=a;this.tb=B();this.$=new ag(1)}m=pg.prototype;m.getName=g("A");m.add=function(a){if("number"!=typeof a)throw new D(103);this.tb.add(a)};m.set=function(a,b){this.add(a,b)};m.remove=function(a){this.tb.delete(a)};m.get=function(a){return this.Pa(a)?[a]:[]};m.min=function(){return this.Jb(this.$.min.bind(this.$))};m.max=function(){return this.Jb(this.$.max.bind(this.$))};
m.Jb=function(a){if(0==this.tb.size)return null;var b=C(this.tb).reduce(function(b,d){return null===b||1==a(d,b)?d:b},null);return[b,[b]]};m.ad=function(){return this.tb.size};m.Va=function(a,b,c,d){var e=a||[xd()];a=C(this.tb).filter(function(a){return e.some(function(b){return this.$.Cb(a,b)},this)},this);return Cf(a,b,c,d)};m.clear=function(){this.tb.clear()};m.Pa=function(a){return this.tb.has(a)};m.Ja=function(){return[new bc(0,C(this.tb))]};m.lb=g("$");
function qg(a,b){var c=new pg(a);b[0].m.forEach(function(a){c.add(a,a)});return c}m.Ma=l(!0);m.Y=function(){var a=new Df;a.ia=this.tb.size;return a};function rg(a){this.Oa=a.b(pc);this.C=a.b(rc);this.V=a.b(qc)}rg.prototype.Ea=function(a){var b=a.oa(),c=function(){if(0==b.length)return v();var a=b.shift();return(a.Db()?sg(this,a):tg(this,a)).then(c)}.bind(this);return c()};function tg(a,b){var c=a.Oa.Hb(0,[b]);a=c.H(b.getName(),b.cb.bind(b),0).get([]).then(function(a){this.V.Wb(b.getName(),a);ug(this,b,a)}.bind(a));c.ka();return a}
function ug(a,b,c){var d=a.C.mc.get(b.getName())||[];c.forEach(function(a){d.forEach(function(b){var c=a.ob(b.getName());b.add(c,a.id())})})}function sg(a,b){var c=a.Oa.Hb(0,[b]),d=c.H(b.getName(),b.cb,0).get([]).then(function(a){this.V.Wb(b.getName(),a)}.bind(a));a=b.Da().map(function(a){return vg(this,a,c)},a).concat(wg(a,b,c));c.ka();return db(a.concat(d))}
function vg(a,b,c){c=c.H(b.j(),dc,1);var d=mg(b);return c.get([]).then(function(a){if(0<a.length){if(xg(b)){var c=Of.bind(void 0,d,b.j(),b.Ec);a=og(c,a)}else a=Of(d,b.j(),b.Ec,a);this.C.set(b.nc,a)}}.bind(a))}function wg(a,b,c){return c.H(ff(b),dc,1).get([]).then(function(a){0<a.length&&(a=qg(ff(b),a),this.C.set(b.getName(),a))}.bind(a))};function yg(){this.Z=y();this.mc=y()}yg.prototype.Ea=function(a){a.oa().forEach(function(a){var b=[];this.mc.set(a.getName(),b);var d=ff(a);if(null===this.get(d)){var e=new pg(d);b.push(e);this.Z.set(d,e)}a.Da().forEach(function(a){var c;c=mg(a);c=new Ff(a.j(),c,a.Ec);c=xg(a)&&1==a.f.length?new ng(c):c;b.push(c);this.Z.set(a.j(),c)},this)},this);return v()};yg.prototype.get=function(a){return this.Z.get(a)||null};
yg.prototype.set=function(a,b){var c=this.mc.get(a)||null;null===c&&(c=[],this.mc.set(a,c));a=null;for(var d=0;d<c.length;d++)if(c[d].getName()==b.getName()){a=d;break}null!==a&&0<c.length?c.splice(a,1,b):c.push(b);this.Z.set(b.getName(),b)};function zg(a,b){var c=[],d=null,e=null;ge(a,function(a){var f=b(a);null==a.getParent()?e=f:L(d,f);var k=a.getParent();null!==k&&J(k).length==J(d).length&&(k=c.indexOf(d),-1!=k&&c.splice(k,1));1<J(a).length&&c.push(f);d=null===a.h?c[c.length-1]:f});return e}function Ag(a){return Bg(a,function(a){return null===a.h})}
function Cg(a){var b=a.getParent(),c=0;null!==b&&(c=J(b).indexOf(a),b.removeChild(a));var d=J(a).slice();d.forEach(function(d,f){a.removeChild(d);null===b||de(b,d,c+f)});return{parent:b,children:d}}function Dg(a,b){J(a).slice().forEach(function(c){a.removeChild(c);L(b,c)});L(a,b)}function Eg(a){var b=ce(a,0);Cg(a);Dg(b,a);return b}
function Fg(a,b,c){var d=ce(a,0),e=J(d).slice();if(!e.some(function(a){return b(a)}))return a;Cg(a);e.forEach(function(e,h){if(b(e)){var f=c(a);ee(d,h);L(f,e);de(d,f,h)}});return d}function Gg(a,b,c,d){var e=a.getParent();null!==e&&(a=J(e).indexOf(a),ee(e,a),de(e,c,a));J(b).slice().forEach(function(a){b.removeChild(a);L(d,a)});return c}function Bg(a,b,c){function d(a){b(a)&&e.push(a);null!=c&&c(a)||J(a).forEach(d)}var e=[];d(a);return e}
function Hg(a,b){var c=b||function(a){return a.toString()+"\n"},d="";ge(a,function(a){for(var b=0;b<be(a);b++)d+="-";d+=c(a)});return d};function Ig(a){he.call(this);this.qb=a;this.Wa=!1}r(Ig,he);m=Ig.prototype;m.Fb=function(){return zg(this,function(a){if(a instanceof Ig){var b=new Ig(a.qb);b.Wa=a.Wa;a=a.W();b.sa=a;return b}return a.Fb()})};m.eb=function(a){var b=a||[];ge(this,function(a){a!=this&&a.eb(b)}.bind(this));a=B(b);return C(a)};m.o=function(a){var b=null!=a?a:B();ge(this,function(a){a!=this&&a.o(b)}.bind(this));return b};m.Pc=function(a){this.Wa!=a&&(this.Wa=a,this.qb="and"==this.qb?"or":"and",J(this).forEach(function(b){return b.Pc(a)}))};
m.eval=function(a){var b=J(this).map(function(b){return b.eval(a)});return Jg(this,b)};function Jg(a,b){return"and"==a.qb?Id(b):Jd(b)}m.toString=function(){return"combined_pred_"+this.qb.toString()};m.we=function(){if("or"==this.qb){var a=new Bd;J(this).forEach(function(b){b=b.we().qa();a.add(b)});return a}return new Bd};m.md=function(){return"or"==this.qb?Kg(this):!1};
function Kg(a){var b=null;return J(a).every(function(a){if(!(a instanceof je&&a.md()))return!1;null===b&&(b=a.J);return b.j()==a.J.j()})};function Lg(a,b,c){he.call(this);this.ga=a;this.ma=b;this.F=c;this.ce=null;a=Zd();this.vc=$d(a,this.ga.I(),this.F);this.ng=a.Ye.get(this.ga.I())||null}r(Lg,he);m=Lg.prototype;m.Fb=function(){var a=new Lg(this.ga,this.ma,this.F),b=this.W();a.sa=b;return a};m.eb=function(a){return null!=a?(a.push(this.ga),a.push(this.ma),a):[this.ga,this.ma]};m.o=function(a){a=null!=a?a:B();a.add(this.ga.H());a.add(this.ma.H());return a};
m.reverse=function(){var a=this.F;switch(this.F){case "gt":a="lt";break;case "lt":a="gt";break;case "gte":a="lte";break;case "lte":a="gte"}return new Lg(this.ma,this.ga,a)};m.eval=function(a){var b=a.entries.filter(function(a){var b=H(a,this.ga);a=H(a,this.ma);return this.vc(b,a)},this);return new G(b,a.o())};m.toString=function(){return"join_pred("+this.ga.j()+" "+this.F+" "+this.ma.j()+")"};
function Mg(a,b,c){var d;-1!=b.o().indexOf(Nd(a.ga.H()))?(d=b,b=c):d=c;if(d.entries.length>b.entries.length){a:{c=a.ga;a.ga=a.ma;a.ma=c;switch(a.F){case "gt":c="lt";break;case "lt":c="gt";break;case "gte":c="lte";break;case "lte":c="gte";break;default:break a}a.F=c;a.vc=$d(Zd(),a.ga.I(),a.F)}return[b,d]}return[d,b]}function Ng(a){var b={};a.eb().forEach(function(a){b[a.getName()]=null});return b}
function Og(a,b,c){null===a.ce&&(a.ce=Ng(a.ma.H()));var d=new Ld(new bc(-1,a.ce),!1);return Pd(b,c,d,[Nd(a.ma.H())])}
function Pg(a,b,c,d){var e=[b,c];d||(e=Mg(a,b,c));b=e[0];c=e[1];var e=b,f=c,h=a.ga,k=a.ma;d&&(e=c,f=b,h=a.ma,k=a.ga);var p=new Xc,K=[];e.entries.forEach(function(a){var b=String(H(a,h));p.set(b,a)});var ta=e.o(),ca=f.o();f.entries.forEach(function(a){var b=H(a,k),c=String(b);null!==b&&p.has(c)?p.get(c).forEach(function(b){b=Pd(a,ca,b,ta);K.push(b)}):d&&K.push(Og(this,a,ca))}.bind(a));a=b.o().concat(c.o());return new G(K,a)}
function Qg(a,b,c,d,e){function f(a,b){b=new Ld(b,1<ta.length);a=Pd(a,ca,b,ta);K.push(a)}var h=d.dg.H(),k=b,p=c;-1!=b.o().indexOf(Nd(h))&&(k=c,p=b);var K=[],ta=p.o(),ca=k.o();k.entries.forEach(function(a){var b=this.ng(H(a,d.wg)),b=d.index.get(b);0!=b.length&&(d.index.Ma()?f(a,e.get(b[0])):yf(e,b).forEach(f.bind(null,a)))},a);a=k.o().concat(p.o());return new G(K,a)};function Rg(a,b,c){return null===b?new je(a,b,c):n(b.j)?new Lg(a,b,c):new je(a,b,c)};var Sg={};q("lf.schema.DataStoreType",Sg);Sg.INDEXED_DB=0;Sg.MEMORY=1;Sg.LOCAL_STORAGE=2;Sg.FIREBASE=3;Sg.WEB_SQL=4;Sg.OBSERVABLE_STORE=5;function Tg(a,b,c,d){this.nc=a;this.name=b;this.Ec=c;this.f=d}Tg.prototype.j=function(){return this.nc+"."+this.name};function xg(a){return a.f.some(function(a){return a.da.ic()})}function Q(a,b,c,d){this.A=a;this.ta=c;this.K=b;this.sd=d;this.Ka=null}q("lf.schema.Table",Q);Q.prototype.getName=g("A");Q.prototype.getName=Q.prototype.getName;
function Nd(a){return a.Ka||a.A}Q.prototype.sc=function(a){var b=new this.constructor(this.A);b.Ka=a;b.Ig=this.Ig;return b};Q.prototype.as=Q.prototype.sc;Q.prototype.mb=fa;Q.prototype.createRow=Q.prototype.mb;Q.prototype.cb=fa;Q.prototype.deserializeRow=Q.prototype.cb;Q.prototype.Da=g("ta");Q.prototype.getIndices=Q.prototype.Da;Q.prototype.eb=g("K");Q.prototype.getColumns=Q.prototype.eb;Q.prototype.zb=fa;Q.prototype.getConstraint=Q.prototype.zb;Q.prototype.Db=g("sd");Q.prototype.persistentIndex=Q.prototype.Db;
function ff(a){return a.A+".#"};function R(a,b){this.child=a;this.Nb=b;this.Ka=null}m=R.prototype;m.getName=function(){return this.Nb+"("+this.child.getName()+")"};m.j=function(){return this.Nb+"("+this.child.j()+")"};m.H=function(){return this.child.H()};m.toString=function(){return this.j()};m.I=function(){return this.child.I()};m.Da=function(){return[]};m.Ca=l(null);m.ic=l(!1);m.sc=function(a){this.Ka=a;return this};R.prototype.as=R.prototype.sc;
function Ug(a){for(var b=[a];a instanceof R;)b.push(a.child),a=a.child;return b}function Vg(a){this.Ka=a||null;this.U=new Q("#UnknownTable",[],[],!1)}m=Vg.prototype;m.getName=l("*");m.j=function(){return this.getName()};m.toString=function(){return this.j()};m.H=g("U");m.I=l(4);m.Da=function(){return[]};m.Ca=l(null);m.ic=l(!1);q("lf.fn.avg",function(a){return new R(a,"AVG")});function Wg(a){return new R(a||new Vg,"COUNT")}q("lf.fn.count",Wg);function Xg(a){return new R(a,"DISTINCT")}q("lf.fn.distinct",Xg);q("lf.fn.max",function(a){return new R(a,"MAX")});q("lf.fn.min",function(a){return new R(a,"MIN")});q("lf.fn.stddev",function(a){return new R(a,"STDDEV")});q("lf.fn.sum",function(a){return new R(a,"SUM")});q("lf.fn.geomean",function(a){return new R(a,"GEOMEAN")});function S(a,b){I.call(this);this.Uf=b}r(S,I);S.prototype.ba=fa;S.prototype.exec=function(a,b){switch(this.Uf){case 1:return Yg(this,a,b);case 0:return Zg(this,a,b);default:return $g(this,a,b)}};S.prototype.toString=l("dummy_node");S.prototype.Rc=function(){return this.toString()};function $g(a,b,c){return new u(function(a){a(this.ba([],b,c))}.bind(a))}function Yg(a,b,c){return ce(a,0).exec(b,c).then(function(a){return this.ba(a,b,c)}.bind(a))}
function Zg(a,b,c){var d=J(a).map(function(a){return a.exec(b,c)});return db(d).then(function(a){var d=[];a.forEach(function(a){for(var b=0;b<a.length;++b)d.push(a[b])});return this.ba(d,b,c)}.bind(a))};function ah(a){S.call(this,0,1);this.Ce=a}r(ah,S);ah.prototype.toString=function(){return"aggregation("+this.Ce.map(function(a){return a.j()}).toString()+")"};ah.prototype.ba=function(a){a.forEach(function(a){bh(new ch(a,this.Ce))},this);return a};function ch(a,b){this.Na=a;this.K=b}
function bh(a){a.K.forEach(function(a){a=Ug(a).reverse();for(var b=1;b<a.length;b++){var d=a[b],e=Ug(d).slice(-1)[0],f=d.child instanceof R?Fd(this.Na,d.child):this.Na;if(null!==f.ab&&f.ab.has(d.j()))break;f=dh(d.Nb,f,e);e=this.Na;null===e.ab&&(e.ab=y());e.ab.set(d.j(),f)}},a)}
function dh(a,b,c){var d=null;switch(a){case "MIN":d=eh(b,c,function(a,b){return b<a?b:a});break;case "MAX":d=eh(b,c,function(a,b){return b>a?b:a});break;case "DISTINCT":d=fh(b,c);break;case "COUNT":d=gh(b,c);break;case "SUM":d=hh(b,c);break;case "AVG":a=gh(b,c);0<a&&(d=hh(b,c)/a);break;case "GEOMEAN":d=ih(b,c);break;default:d=jh(b,c)}return d}function eh(a,b,c){return a.entries.reduce(function(a,e){e=H(e,b);return null===e?a:null===a?e:c(a,e)},null)}
function gh(a,b){return b instanceof Vg?a.entries.length:a.entries.reduce(function(a,d){return a+(null===H(d,b)?0:1)},0)}function hh(a,b){return eh(a,b,function(a,b){return b+a})}function jh(a,b){var c=[];a.entries.forEach(function(a){a=H(a,b);null===a||c.push(a)});return 0==c.length?null:sb.apply(null,c)}function ih(a,b){var c=0;a=a.entries.reduce(function(a,e){e=H(e,b);if(0==e||null===e)return a;c++;return a+Math.log(e)},0);return 0==c?null:Math.pow(Math.E,a/c)}
function fh(a,b){var c=y();a.entries.forEach(function(a){var d=H(a,b);c.set(d,a)});return new G(z(c),a.o())};function kh(a,b){this.Ha=a;this.aa=b}kh.prototype.fb=g("Ha");kh.prototype.ca=g("aa");function lh(){I.call(this)}r(lh,I);function mh(a,b){I.call(this);this.table=a;this.values=b}r(mh,lh);function nh(a,b){mh.call(this,a,b)}r(nh,mh);function oh(a){I.call(this);this.table=a}r(oh,lh);oh.prototype.toString=function(){return"delete("+this.table.getName()+")"};function ph(a){I.call(this);this.table=a}r(ph,lh);ph.prototype.toString=function(){return"update("+this.table.getName()+")"};
function qh(a){I.call(this);this.O=a}r(qh,lh);qh.prototype.toString=function(){return"select("+this.O.toString()+")"};function rh(a){I.call(this);this.table=a}r(rh,lh);rh.prototype.toString=function(){var a="table_access("+this.table.getName();null===this.table.Ka||(a+=" as "+this.table.Ka);return a+")"};function sh(){I.call(this)}r(sh,lh);sh.prototype.toString=l("cross_product");function th(a,b){I.call(this);this.f=a;this.Pb=b}r(th,lh);
th.prototype.toString=function(){var a="project("+this.f.toString();if(null!==this.Pb)var b=this.Pb.map(function(a){return a.j()}).join(", "),a=a+(", groupBy("+b+")");return a+")"};function uh(a){I.call(this);this.N=a}r(uh,lh);uh.prototype.toString=function(){return"order_by("+ue(this.N)+")"};function vh(a){I.call(this);this.f=a}r(vh,lh);vh.prototype.toString=function(){return"aggregation("+this.f.toString()+")"};function wh(a){I.call(this);this.f=a}r(wh,lh);
wh.prototype.toString=function(){return"group_by("+this.f.toString()+")"};function xh(a){I.call(this);this.X=a}r(xh,lh);xh.prototype.toString=function(){return"limit("+this.X+")"};function yh(a){I.call(this);this.L=a}r(yh,lh);yh.prototype.toString=function(){return"skip("+this.L+")"};function zh(a,b){I.call(this);this.O=a;this.Rb=b}r(zh,lh);zh.prototype.toString=function(){return"join(type: "+(this.Rb?"outer":"inner")+", "+this.O.toString()+")"};function Ah(){}Ah.prototype.Za=fa;function Bh(){}r(Bh,Ah);Bh.prototype.Za=function(a){this.G=a;this.vb(this.G);return this.G};Bh.prototype.vb=function(a){if(a instanceof qh){var b=Ch(this,a.O),b=Dh(this,b);Gg(a,a,b[0],b[1]);a==this.G&&(this.G=b[0]);a=b[0]}J(a).forEach(function(a){this.vb(a)},this)};function Ch(a,b){if(0==J(b).length||"and"!=b.qb)return[b];a=J(b).slice().map(function(a){b.removeChild(a);return Ch(this,a)},a);return Ea(a)}
function Dh(a,b){var c=null,d=null;b.map(function(a,b){a=new qh(a);0==b?c=a:L(d,a);d=a},a);return[c,d]};function Eh(){}r(Eh,Ah);Eh.prototype.Za=function(a,b){if(3>b.from.length)return a;this.G=a;this.vb(this.G);return this.G};Eh.prototype.vb=function(a){if(a instanceof sh)for(;2<J(a).length;){for(var b=new sh,c=0;2>c;c++){var d=ee(a,0);L(b,d)}de(a,b,0)}J(a).forEach(function(a){this.vb(a)},this)};function Fh(){S.call(this,0,0)}r(Fh,S);Fh.prototype.toString=l("cross_product");Fh.prototype.ba=function(a){var b=a[0],c=a[1];a=[];for(var d=b.o(),e=c.o(),f=0;f<b.entries.length;f++)for(var h=0;h<c.entries.length;h++){var k=Pd(b.entries[f],d,c.entries[h],e);a.push(k)}b=b.o().concat(c.o());return[new G(a,b)]};function Gh(a,b){xe.call(this,a,b);this.Ia=a.b(tc);this.Kb=a.b(uc)}r(Gh,xe);Gh.prototype.getPriority=l(2);Gh.prototype.fe=function(a){0==this.I()?Hh(this,a):this.Nc()};function Hh(a,b){a.ud.forEach(function(a,d){a instanceof te&&Ae(this.Kb,a,b[d])},a)}Gh.prototype.Nc=function(){var a=Ce(this.Kb,this.ca());0!=a.length&&(a=new ze(this.global,a),De(this.Ia,a))};function Ih(a){ne.call(this,a)}r(Ih,ne);Ih.prototype.ca=function(){var a=B();a.add(this.from);Jh(this,this.from.getName(),a);return a};function Jh(a,b,c){var d=Kh(a.da.info(),b,1);Kh(a.da.info(),b).forEach(c.add.bind(c));d.forEach(function(a){Jh(this,a.getName(),c)},a)}Ih.prototype.clone=function(){var a=new Ih(this.da);re(a,this);a.from=this.from;return a};Ih.prototype.bind=function(a){Ih.jb.bind.call(this,a);se(this,a);return this};function Lh(a){ne.call(this,a)}r(Lh,ne);Lh.prototype.ca=function(){var a=B();a.add(this.La);var b=this.da.info();Mh(this.La.getName(),b.ff).forEach(a.add.bind(a));this.ac&&Kh(b,this.La.getName()).forEach(a.add.bind(a));return a};Lh.prototype.clone=function(){var a=new Lh(this.da);re(a,this);a.La=this.La;this.values&&(a.values=this.values instanceof Qd?this.values:this.values.slice());a.ac=this.ac;a.bc=this.bc;return a};
Lh.prototype.bind=function(a){Lh.jb.bind.call(this,a);this.bc&&(this.values=this.bc instanceof Qd?a[this.bc.Ca()]:this.bc.map(function(b){return b instanceof Qd?a[b.Ca()]:b}));return this};function Nh(a){ne.call(this,a)}r(Nh,ne);Nh.prototype.ca=function(){var a=B();a.add(this.table);var b=this.set.map(function(a){return a.J.j()}),c=this.da.info();Oh(c,b).forEach(a.add.bind(a));Ph(c,b).forEach(a.add.bind(a));return a};Nh.prototype.clone=function(){var a=new Nh(this.da);re(a,this);a.table=this.table;a.set=this.set?Qh(this.set):this.set;return a};Nh.prototype.bind=function(a){Nh.jb.bind.call(this,a);this.set.forEach(function(b){-1!=b.Vc&&(b.value=a[b.Vc])});se(this,a);return this};
function Qh(a){return a.map(function(a){var b={},d;for(d in a)b[d]=a[d];return b})};function Rh(a,b){if(null==b)return"NULL";switch(a){case 1:return b?1:0;case 3:case 4:return b;case 0:return"'"+fc(b)+"'";default:return"'"+b.toString()+"'"}}function Sh(a,b){var c=a.ac?"INSERT OR REPLACE":"INSERT",d=a.La.eb(),c=c+(" INTO "+a.La.getName()+"("),c=c+d.map(function(a){return a.getName()}).join(", "),c=c+") VALUES (";return a.values.map(function(a){var e=d.map(function(c){var d=a.m[c.getName()];return b?null!=d?"#":"NULL":Rh(c.I(),d)});return c+e.join(", ")+");"}).join("\n")}
function Th(a){switch(a){case "between":return"BETWEEN";case "eq":return"=";case "gte":return">=";case "gt":return">";case "in":return"IN";case "lte":return"<=";case "lt":return"<";case "match":return"LIKE";case "neq":return"<>";default:return"UNKNOWN"}}function Uh(a,b,c,d){return a instanceof Qd?"?"+a.Ca().toString():d?null!=a?"#":"NULL":"match"==b?"'"+a.toString()+"'":"in"==b?"("+a.map(function(a){return Rh(c,a)}).join(", ")+")":"between"==b?Rh(c,a[0])+" AND "+Rh(c,a[1]):Rh(c,a).toString()}
function Vh(a,b){return J(a).map(function(a){return"("+Wh(a,b)+")"}).join("and"==a.qb?" AND ":" OR ")}function Xh(a){return[a.ga.j(),Th(a.F),a.ma.j()].join(" ")}function Wh(a,b){if(a instanceof je){var c=a.J.j(),d=Th(a.F);a=Uh(a.value,a.F,a.J.I(),b);return"="==d&&"NULL"==a?[c,"IS NULL"].join(" "):"<>"==d&&"NULL"==a?[c,"IS NOT NULL"].join(" "):[c,d,a].join(" ")}if(a instanceof Ig)return Vh(a,b);if(a instanceof Lg)return Xh(a);throw new D(357,typeof a);}
function Yh(a,b){return(a=Wh(a,b))?" WHERE "+a:""}function Zh(a,b){var c="UPDATE "+a.table.getName()+" SET ",c=c+a.set.map(function(a){var b=a.J.j()+" = ";return-1!=a.Vc?b+"?"+a.Vc.toString():b+Rh(a.J.I(),a.value).toString()}).join(", ");a.w&&(c+=Yh(a.w,b));return c+";"}
function $h(a,b){var c="*";a.f.length&&(c=a.f.map(function(a){return a.Ka?a.j()+" AS "+a.Ka:a.j()}).join(", "));c="SELECT "+c+" FROM ";null!=a.hb&&0!=a.hb.size?c+=ai(a,b):(c+=a.from.map(bi).join(", "),a.w&&(c+=Yh(a.w,b)));a.N&&(b=a.N.map(function(a){return a.J.j()+(0==a.order?" DESC":" ASC")}).join(", "),c+=" ORDER BY "+b);a.ra&&(b=a.ra.map(function(a){return a.j()}).join(", "),c+=" GROUP BY "+b);a.X&&(c+=" LIMIT "+a.X.toString());a.L&&(c+=" SKIP "+a.L.toString());return c+";"}
function bi(a){return Nd(a)!=a.getName()?a.getName()+" AS "+Nd(a):a.getName()}function ai(a,b){for(var c=Bg(a.w,function(a){return a instanceof Lg}),d=c.map(Xh),e=bi(a.from[0]),f=1;f<a.from.length;f++)var h=bi(a.from[f]),e=a.hb.has(c[d.length-f].W())?e+(" LEFT OUTER JOIN "+h):e+(" INNER JOIN "+h),e=e+(" ON ("+d[d.length-f]+")");a=ce(a.w,0);a instanceof Lg||(e+=" WHERE "+Wh(a,b));return e}
function ci(a,b){b=b||!1;a=a.query.clone();if(a instanceof Lh)return Sh(a,b);if(a instanceof Ih){var c="DELETE FROM "+a.from.getName();a.w&&(c+=Yh(a.w,b));return c+";"}if(a instanceof Nh)return Zh(a,b);if(a instanceof te)return $h(a,b);throw new D(358,typeof a);};function T(a,b){this.global=a;this.Hg=a.b(sc);this.Ia=a.b(tc);this.query=b}q("lf.query.BaseBuilder",T);T.prototype.exec=function(){try{this.bb()}catch(a){return ab(a)}return new u(function(a,b){var c=new Gh(this.global,[this.Cc()]);De(this.Ia,c).then(function(b){a(Dd(b[0]))},b)},this)};T.prototype.exec=T.prototype.exec;T.prototype.Wf=function(){var a=function(a){return a.Rc(this.query)+"\n"}.bind(this);return Hg(di(this).fb(),a)};T.prototype.explain=T.prototype.Wf;
T.prototype.bind=function(a){this.query.bind(a);return this};T.prototype.bind=T.prototype.bind;T.prototype.Pg=function(a){return ci(this,a)};T.prototype.toSql=T.prototype.Pg;T.prototype.bb=aa();function di(a){if(null==a.gf){var b;b=a.Hg;var c=a.query,d=b.qg.create(c);b=b.Eg.create(d,c);a.gf=b}return a.gf}T.prototype.Cc=function(){return{context:this.query.clone(),ie:di(this)}};function ei(a){T.call(this,a,new Ih(a.b(vc)))}r(ei,T);q("lf.query.DeleteBuilder",ei);ei.prototype.from=function(a){if(null!=this.query.from)throw new D(515);this.query.from=a;return this};ei.prototype.from=ei.prototype.from;ei.prototype.w=function(a){this.Fd();this.query.w=a;return this};ei.prototype.where=ei.prototype.w;ei.prototype.Fd=function(){if(null==this.query.from)throw new D(548);if(null!=this.query.w)throw new D(516);};
ei.prototype.bb=function(){ei.jb.bb.call(this);if(null==this.query.from)throw new D(517);};function fi(a,b){T.call(this,a,new Lh(a.b(vc)));this.query.ac=b||!1}r(fi,T);q("lf.query.InsertBuilder",fi);fi.prototype.bb=function(){fi.jb.bb.call(this);var a=this.query;if(null==a.La||null==a.values)throw new D(518);if(a.ac&&null===a.La.zb().td)throw new D(519);};fi.prototype.La=function(a){if(null!=this.query.La)throw new D(520);this.query.La=a;return this};fi.prototype.into=fi.prototype.La;
fi.prototype.values=function(a){if(null!=this.query.values)throw new D(521);a instanceof Qd||a.some(function(a){return a instanceof Qd})?this.query.bc=a:this.query.values=a;return this};fi.prototype.values=fi.prototype.values;function gi(a){return hi("and",Array.prototype.slice.call(arguments))}q("lf.op.and",gi);q("lf.op.or",function(a){return hi("or",Array.prototype.slice.call(arguments))});function hi(a,b){var c=new Ig(a);b.forEach(function(a){L(c,a)});return c}q("lf.op.not",function(a){a.Pc(!0);return a});function U(a,b){T.call(this,a,new te(a.b(vc)));this.Me=this.Ad=!1;this.query.f=b;ii(this);ji(this)}r(U,T);q("lf.query.SelectBuilder",U);U.prototype.bb=function(){U.jb.bb.call(this);var a=this.query;if(null==a.from)throw new D(522);if(n(a.Sb)&&!n(a.X)||n(a.Zb)&&!n(a.L))throw new D(523);null!=this.query.ra?ki(this):li(this)};function ii(a){var b=a.query.f.filter(function(a){return a instanceof R&&"DISTINCT"==a.Nb},a);if(0!=b.length&&(1!=b.length||1!=a.query.f.length))throw new D(524);}
function ki(a){if(a.query.ra.some(function(a){a=a.I();return 6==a||0==a}))throw new D(525);}function li(a){var b=a.query.f.some(function(a){return a instanceof R},a);a=a.query.f.some(function(a){return!(a instanceof R)},a)||0==a.query.f.length;if(b&&a)throw new D(526);}function ji(a){a.query.f.forEach(function(a){if(a instanceof R&&!mi(a.Nb,a.I()))throw new D(527,a.j());},a)}function ni(a,b){if(null==a.query.from)throw new D(b);}
U.prototype.from=function(a){if(this.Me)throw new D(515);this.Me=!0;null==this.query.from&&(this.query.from=[]);this.query.from.push.apply(this.query.from,Array.prototype.slice.call(arguments));return this};U.prototype.from=U.prototype.from;U.prototype.w=function(a){ni(this,548);if(this.Ad)throw new D(516);this.Ad=!0;oi(this,a);return this};U.prototype.where=U.prototype.w;function oi(a,b){null!=a.query.w&&(b=gi(b,a.query.w));a.query.w=b}
U.prototype.hg=function(a,b){ni(this,542);if(this.Ad)throw new D(547);this.query.from.push(a);oi(this,b);return this};U.prototype.innerJoin=U.prototype.hg;U.prototype.og=function(a,b){ni(this,542);if(!(b instanceof Lg))throw new D(541);if(this.Ad)throw new D(547);this.query.from.push(a);null==this.query.hb&&(this.query.hb=B());var c=b;Nd(a)!=Nd(b.ma.H())&&(c=b.reverse());this.query.hb.add(c.W());oi(this,c);return this};U.prototype.leftOuterJoin=U.prototype.og;
U.prototype.X=function(a){if(null!=(this.query.X||this.query.Sb))throw new D(528);if(a instanceof Qd)this.query.Sb=a;else{if(0>a)throw new D(531);this.query.X=a}return this};U.prototype.limit=U.prototype.X;U.prototype.L=function(a){if(null!=(this.query.L||this.query.Zb))throw new D(529);if(a instanceof Qd)this.query.Zb=a;else{if(0>a)throw new D(531);this.query.L=a}return this};U.prototype.skip=U.prototype.L;
U.prototype.N=function(a,b){ni(this,549);null==this.query.N&&(this.query.N=[]);this.query.N.push({J:a,order:null!=b?b:1});return this};U.prototype.orderBy=U.prototype.N;U.prototype.ra=function(a){ni(this,549);if(null!=this.query.ra)throw new D(530);null==this.query.ra&&(this.query.ra=[]);this.query.ra.push.apply(this.query.ra,Array.prototype.slice.call(arguments));return this};U.prototype.groupBy=U.prototype.ra;
function mi(a,b){switch(a){case "COUNT":case "DISTINCT":return!0;case "AVG":case "GEOMEAN":case "STDDEV":case "SUM":return 4==b||3==b;case "MAX":case "MIN":return 4==b||3==b||5==b||2==b}return!1}U.prototype.clone=function(){var a=new U(this.global,this.query.f);a.query=this.query.clone();a.query.Yc=null;return a};U.prototype.clone=U.prototype.clone;function pi(a,b){T.call(this,a,new Nh(a.b(vc)));this.query.table=b}r(pi,T);q("lf.query.UpdateBuilder",pi);pi.prototype.set=function(a,b){a={Vc:b instanceof Qd?b.Ca():-1,J:a,value:b};null!=this.query.set?this.query.set.push(a):this.query.set=[a];return this};pi.prototype.set=pi.prototype.set;pi.prototype.w=function(a){this.Fd();this.query.w=a;return this};pi.prototype.where=pi.prototype.w;pi.prototype.Fd=function(){if(null!=this.query.w)throw new D(516);};
pi.prototype.bb=function(){pi.jb.bb.call(this);if(null==this.query.set)throw new D(532);if(this.query.set.some(function(a){return a.value instanceof Qd}))throw new D(501);};function qi(a){this.query=a;this.Ha=null}qi.prototype.hc=function(){null===this.Ha&&(this.Ha=this.zc());return this.Ha};qi.prototype.zc=fa;function ri(a){qi.call(this,a)}r(ri,qi);ri.prototype.zc=function(){return this.query.ac?new nh(this.query.La,this.query.values):new mh(this.query.La,this.query.values)};function si(a){qi.call(this,a)}r(si,qi);
si.prototype.zc=function(){var a=new ph(this.query.table),b=null!=this.query.w?new qh(this.query.w.Fb()):null,c=new rh(this.query.table);null===b?L(a,c):(L(b,c),L(a,b));return a};function ti(a,b,c){this.Ha=a;this.ke=b;this.Vb=c}ti.prototype.hc=function(){this.Vb.forEach(function(a){this.Ha=a.Za(this.Ha,this.ke)},this);return this.Ha};function ui(a,b){qi.call(this,a);this.Vb=b}r(ui,qi);ui.prototype.zc=function(){var a=new oh(this.query.from),b=null!=this.query.w?new qh(this.query.w.Fb()):null,c=new rh(this.query.from);null===b?L(a,c):(L(b,c),L(a,b));return(new ti(a,this.query,this.Vb)).hc()};function vi(){}r(vi,Ah);vi.prototype.Za=function(a,b){if(2>b.from.length)return a;this.G=a;this.vb(this.G,b);return this.G};vi.prototype.vb=function(a,b){if(a instanceof qh&&a.O instanceof Lg){var c=a.O.W(),d=ce(a,0);d instanceof sh&&(c=null!=b.hb&&b.hb.has(c),c=new zh(a.O,c),Gg(a,d,c,c),a==this.G&&(this.G=c),a=c)}J(a).forEach(function(a){this.vb(a,b)},this)};function wi(){this.Uc=B()}r(wi,Ah);wi.prototype.Za=function(a,b){if(!n(b.w))return a;this.Uc.clear();this.G=a;this.vb(this.G,b);this.Uc.clear();return this.G};wi.prototype.vb=function(a,b){var c=function(a){J(a).forEach(d)}.bind(this),d=function(a){if(!this.Uc.has(a)){if(a instanceof qh){var e=a.O.o(),h=function(a){return xi(this,a,e)}.bind(this),h=yi(this,b,a,h);this.Uc.add(a);h!=a&&(null===h.getParent()&&(this.G=h),d(h))}c(a)}}.bind(this);d(a)};
function yi(a,b,c,d){var e=c;if(zi(b,c))e=Eg(c),yi(a,b,c,d);else if(Ai(c)){var f=[],e=Fg(c,d,function(a){a=new qh(a.O);f.push(a);return a});f.forEach(function(a){yi(this,b,a,d)},a)}return e}function xi(a,b,c){var d=B();Ag(b).forEach(function(a){d.add(a.table)},a);b instanceof rh&&d.add(b.table);return Bc(d,c)}function Ai(a){a=ce(a,0);return a instanceof sh||a instanceof zh}
function zi(a,b){var c=ce(b,0);if(!(c instanceof qh))return!1;if(null==a.hb)return!0;b=b.O instanceof Lg;a=a.hb.has(c.O.W());return b||!a};function Bi(a,b){qi.call(this,a);this.Vb=b;this.jf=this.bf=this.sf=this.ef=this.De=this.Re=this.rf=this.Je=this.uf=null}r(Bi,qi);
Bi.prototype.zc=function(){Ci(this);2<=this.query.from.length&&(this.Je=new sh);this.rf=null!=this.query.w?new qh(this.query.w.Fb()):null;this.query.N&&(this.ef=new uh(this.query.N));null!=this.query.L&&0<this.query.L&&(this.sf=new yh(this.query.L));null!=this.query.X&&(this.bf=new xh(this.query.X));null!=this.query.ra&&(this.Re=new wh(this.query.ra));Di(this);this.jf=new th(this.query.f||[],this.query.ra||null);var a=Ei(this);return(new ti(a,this.query,this.Vb)).hc()};
function Ei(a){for(var b=[a.bf,a.sf,a.jf,a.ef,a.De,a.Re,a.rf,a.Je],c=-1,d=null,e=0;e<b.length;e++){var f=b[e];null!==f&&(null===d?d=f:L(b[c],f),c=e)}a.uf.forEach(function(a){L(b[c],a)});return d}function Ci(a){a.uf=a.query.from.map(function(a){return new rh(a)},a)}function Di(a){var b=a.query.f.filter(function(a){return a instanceof R});null!=a.query.N&&a.query.N.forEach(function(a){a.J instanceof R&&b.push(a.J)});0<b.length&&(a.De=new vh(b))};function Fi(){this.re=[new Bh,new Eh,new wi,new vi];this.Pd=[new Bh]}Fi.prototype.create=function(a){var b;if(a instanceof Lh)b=new ri(a);else if(a instanceof Ih)b=new ui(a,this.Pd);else if(a instanceof te)b=new Bi(a,this.re);else if(a instanceof Nh)b=new si(a);else throw new D(513);b=b.hc();return new kh(b,a.ca())};function Gi(a){S.call(this,0,1);this.U=a}r(Gi,S);Gi.prototype.toString=function(){return"delete("+this.U.getName()+")"};Gi.prototype.ba=function(a,b){a=a[0].entries.map(function(a){return a.va});b.remove(this.U,a);return[Hd()]};function Hi(a,b){S.call(this,0,-1);this.table=b;this.C=a.b(rc)}r(Hi,S);Hi.prototype.toString=function(){return"get_row_count("+this.table.getName()+")"};Hi.prototype.ba=function(){var a=this.C.get(ff(this.table)),b=new G([],[this.table.getName()]),c=Wg(),a=a.Y().ia;null===b.ab&&(b.ab=y());b.ab.set(c.j(),a);return[b]};function Ii(a,b){S.call(this,0,-1);this.V=a.b(qc);this.C=a.b(rc);this.table=b}r(Ii,S);Ii.prototype.toString=function(){var a="table_access("+this.table.getName();null===this.table.Ka||(a+=" as "+this.table.Ka);return a+")"};Ii.prototype.ba=function(){var a=this.C.get(ff(this.table)).Va();return[Kd(yf(this.V,a),[Nd(this.table)])]};function Ji(a){this.c=a}r(Ji,Ah);Ji.prototype.Za=function(a,b){this.G=a;if(!this.Hd(b))return a;a=Bg(a,function(a){return a instanceof Ii})[0];b=new Hi(this.c,a.table);Gg(a,a,b,b);return this.G};Ji.prototype.Hd=function(a){return 1==a.f.length&&1==a.from.length&&null==a.w&&null==a.X&&null==a.L&&null==a.ra?(a=a.f[0],a instanceof R&&"COUNT"==a.Nb&&a.child instanceof Vg):!1};function Ki(a){S.call(this,0,1);this.Qe=a}r(Ki,S);Ki.prototype.toString=function(){return"groupBy("+this.Qe.map(function(a){return a.j()}).toString()+")"};Ki.prototype.ba=function(a){return Li(this,a[0])};function Li(a,b){var c=new Xc,d=function(a){return this.Qe.map(function(b){return H(a,b)},this).join(",")}.bind(a);b.entries.forEach(function(a){c.set(d(a),a)},a);return c.keys().map(function(a){return new G(c.get(a),b.o())},a)};function Mi(a,b,c){S.call(this,0,0);this.C=a.b(rc);this.V=a.b(qc);this.O=b;this.Rb=c;this.Dd="eq"==this.O.F?0:2;this.Te=null}r(Mi,S);var Ni=["hash","index_nested_loop","nested_loop"];Mi.prototype.toString=function(){return"join(type: "+(this.Rb?"outer":"inner")+", impl: "+Ni[this.Dd]+", "+this.O.toString()+")"};
Mi.prototype.ba=function(a){switch(this.Dd){case 0:return[Pg(this.O,a[0],a[1],this.Rb)];case 1:return[Qg(this.O,a[0],a[1],this.Te,this.V)];default:var b=this.O,c=a[0];a=a[1];var d=this.Rb,e=[c,a];d||(e=Mg(b,c,a));c=e[0];a=e[1];for(var e=[],f=c.o(),h=a.o(),k=c.entries.length,p=a.entries.length,K=p+256-1>>8,ta=0;ta<K;){for(var ca=0;ca<k;ca++){var Db=!1,dg=H(c.entries[ca],b.ga);if(null!==dg)for(var Qi=Math.min(ta+1<<8,p),Eb=ta<<8;Eb<Qi;Eb++)if(b.vc(dg,H(a.entries[Eb],b.ma))){var Db=!0,Uc=Pd(c.entries[ca],
f,a.entries[Eb],h);e.push(Uc)}d&&!Db&&e.push(Og(b,c.entries[ca],f))}ta++}b=c.o().concat(a.o());return[new G(e,b)]}};function Oi(a,b){a.Dd=1;var c=a.C.get(b.Ca().j());a.Te={dg:b,wg:b==a.O.ga?a.O.ma:a.O.ga,index:c}};function Pi(a){S.call(this,0,-1);this.kf=a}r(Pi,S);Pi.prototype.toString=function(){return"no_op_step("+this.kf[0].o().join(",")+")"};Pi.prototype.ba=g("kf");function Ri(){}r(Ri,Ah);Ri.prototype.Za=function(a,b){this.G=a;if(!this.Hd(b))return a;Bg(a,function(a){return a instanceof Mi}).forEach(this.Gg,this);return this.G};Ri.prototype.Hd=function(a){return 1<a.from.length};
Ri.prototype.Gg=function(a){if("eq"==a.O.F&&!a.Rb){var b=function(b){if(!(b instanceof Ii))return null;b=Nd(b.table)==Nd(a.O.ma.H())?a.O.ma:a.O.ga;return null===b.Ca()?null:b},c=b(ce(a,0)),b=b(ce(a,1));if(null!==c||null!==b){b=null===b?c:b;Oi(a,b);var d=new G([],[Nd(b.H())]);fe(a,new Pi([d]),b==c?0:1)}}};function Si(a){a=a.map(function(a){return a.qa()});a=xb.apply(null,a);var b=[];wb(a,function(a){b.push(a)});return b}function Ti(a){this.Qb=a}Ti.prototype.cd=function(){return 1==this.Qb.f.length?[xd()]:[this.Qb.f.map(function(){return xd()})]};function Ui(a,b){this.Qb=a;this.Ga=b;this.Ld=this.$e=null}
function Vi(a,b){var c=y();a.Ga.keys().forEach(function(a){var d=this.Ga.get(a).map(function(a){return pe(b,a)},this),f=new Bd([xd()]);d.forEach(function(a){f=Cd(f,a.we())});c.set(a,f)},a);return c}Ui.prototype.cd=function(a){if(this.$e==a)return this.Ld;for(var b=Vi(this,a),c=this.Qb.f.length-1;0<=c;c--){var d=this.Qb.f[c];if(null!==(b.get(d.da.getName())||null))break;b.set(d.da.getName(),new Bd([xd()]))}this.Ld=1==this.Qb.f.length?z(b)[0].qa():Si(Wi(this,b));this.$e=a;return this.Ld};
function Wi(a,b){var c=y(),d=0;a.Qb.f.forEach(function(a){c.set(a.da.getName(),d);d++});return ac(b).sort(function(a,b){return c.get(a)-c.get(b)}).map(function(a){return b.get(a)})};function Xi(a,b){this.xd=b;this.C=a.b(rc)}function Yi(a){a=a.C.get(ff(a.xd));return Math.floor(.02*a.Y().ia)}function Zi(a,b,c){c=c.filter(a.kg,a);if(0==c.length)return null;a=$i(a,c);if(0==a.length)return null;if(1==a.length)return a[0];var d=Number.MAX_VALUE;return a.reduce(function(a,c){var e=aj(c,b);return e<d?(d=e,c):a},null)}
function $i(a,b){return a.xd.Da().map(function(a){a=new bj(this.C,a);cj(a,b);return a},a).filter(function(a){if(null===a.Ga)a=!1;else{for(var b=!1,c=!0,f=0;f<a.gb.f.length;f++){var h=a.Ga.has(a.gb.f[f].da.getName());if(b&&h){c=!1;break}h||(b=!0)}a=c}return a})}Xi.prototype.kg=function(a){return a instanceof je?!a.md()||a.J.H()!=this.xd||"in"==a.F&&a.value.length>Yi(this)?!1:!0:a instanceof Ig?a.md()&&ce(a,0).J.H()==this.xd?J(a).length<=Yi(this):!1:!1};
function bj(a,b){this.C=a;this.gb=b;this.eg=B(this.gb.f.map(function(a){return a.da.getName()}));this.$d=this.Ga=null}function dj(a){null===a.$d&&(a.$d=new Ui(a.gb,a.Ga));return a.$d}function cj(a,b){b.forEach(function(a){var b=a.eb()[0].getName();this.eg.has(b)&&(null===this.Ga&&(this.Ga=new Xc),this.Ga.set(b,a.W()))},a)}function aj(a,b){b=dj(a).cd(b);var c=a.C.get(a.gb.j());return b.reduce(function(a,b){return a+c.ad(b)},0)};function ej(a,b,c,d){S.call(this,0,-1);this.C=a.b(rc);this.index=b;this.Ze=c;this.oe=d;this.Tc=this.Sc=!1}r(ej,S);ej.prototype.toString=function(){return"index_range_scan("+this.index.j()+", ?, "+(this.oe?"reverse":"natural")+(this.Sc?", limit:?":"")+(this.Tc?", skip:?":"")+")"};ej.prototype.Rc=function(a){var b=this.toString(),c=this.Ze.cd(a),b=b.replace("?",c.toString());this.Sc&&(b=b.replace("?",a.X.toString()));this.Tc&&(b=b.replace("?",a.L.toString()));return b};
ej.prototype.ba=function(a,b,c){a=this.Ze.cd(c);b=this.C.get(this.index.j());c=(1==a.length&&a[0]instanceof E&&yd(a[0])?Cf(b.get(a[0].from),!1,this.Sc?c.X:void 0,this.Tc?c.L:void 0):b.Va(a,this.oe,this.Sc?c.X:void 0,this.Tc?c.L:void 0)).map(function(a){return new bc(a,{})},this);return[Kd(c,[this.index.nc])]};function fj(){S.call(this,0,0)}r(fj,S);fj.prototype.toString=l("multi_index_range_scan()");
fj.prototype.ba=function(a){var b=y();a.forEach(function(a){a.entries.forEach(function(a){b.set(a.va.id(),a)})});var c=z(b);return[new G(c,a[0].o())]};function gj(a){S.call(this,0,1);this.kc=a}r(gj,S);gj.prototype.toString=l("select(?)");gj.prototype.Rc=function(a){a=pe(a,this.kc);return this.toString().replace("?",a.toString())};gj.prototype.ba=function(a,b,c){return[pe(c,this.kc).eval(a[0])]};function hj(a,b){S.call(this,0,1);this.V=a.b(qc);this.U=b}r(hj,S);hj.prototype.toString=function(){return"table_access_by_row_id("+this.U.getName()+")"};hj.prototype.ba=function(a){return[Kd(yf(this.V,Ed(a[0])),[Nd(this.U)])]};function ij(a){this.c=a}r(ij,Ah);ij.prototype.Za=function(a,b){this.G=a;Bg(a,function(a){return a instanceof Ii}).forEach(function(a){var c=jj(a);if(0!=c.length){var e=Zi(new Xi(this.c,a.table),b,c.map(function(a){return pe(b,a.kc)}));if(null!==e){var f=y();c.forEach(function(a){f.set(a.kc,a)},this);this.G=kj(this,e,f,a)}}},this);return this.G};function jj(a){var b=[];for(a=a.getParent();a;){if(a instanceof gj)b.push(a);else if(a instanceof Mi)break;a=a.getParent()}return b}
function kj(a,b,c,d){(null===b.Ga?[]:b.Ga.values()).map(function(a){return c.get(a)}).forEach(Cg);b=new ej(a.c,b.gb,dj(b),!1);a=new hj(a.c,d.table);L(a,b);Gg(d,d,a,b);return b.fb()};function lj(a,b){S.call(this,0,-1);this.C=a.b(rc);this.U=b}r(lj,S);lj.prototype.toString=function(){return"insert("+this.U.getName()+")"};lj.prototype.ba=function(a,b,c){mj(this.U,c.values,this.C);b.Bb(this.U,c.values);return[Kd(c.values,[this.U.getName()])]};function mj(a,b,c){a=a.zb().td;if(null===a?0:a.f[0].autoIncrement){var d=a.f[0].da.getName();c=c.get(a.j()).Y().Gc;var e=null===c?0:c;b.forEach(function(a){if(0==a.m[d]||null==a.m[d])e++,a.m[d]=e})}}
function nj(a,b){S.call(this,0,-1);this.C=a.b(rc);this.U=b}r(nj,S);nj.prototype.toString=function(){return"insert_replace("+this.U.getName()+")"};nj.prototype.ba=function(a,b,c){mj(this.U,c.values,this.C);b.Wd(this.U,c.values);return[Kd(c.values,[this.U.getName()])]};function oj(){S.call(this,0,1)}r(oj,S);oj.prototype.toString=l("limit(?)");oj.prototype.Rc=function(a){return this.toString().replace("?",a.X.toString())};oj.prototype.ba=function(a,b,c){a[0].entries.splice(c.X);return a};function pj(a){S.call(this,0,1);this.N=a}r(pj,S);m=pj.prototype;m.toString=function(){return"order_by("+ue(this.N)+")"};m.ba=function(a){if(1==a.length){var b;b=a[0];for(var c=null,d=0;d<this.N.length;d++){var e=Xg(this.N[d].J);if(null!==b.ab&&b.ab.has(e.j())){c=e;break}}b=c;(null===b?a[0]:Fd(a[0],b)).entries.sort(this.Tf.bind(this))}else a.sort(this.Jg.bind(this));return a};
m.$=function(a,b){var c,d,e,f=-1;do f++,e=this.N[f].J,c=this.N[f].order,d=a(e),e=b(e);while(d==e&&f+1<this.N.length);a=d<e?-1:d>e?1:0;return 1==c?a:-a};m.Jg=function(a,b){return this.$(function(b){return b instanceof R?Fd(a,b):H(a.entries[a.entries.length-1],b)},function(a){return a instanceof R?Fd(b,a):H(b.entries[b.entries.length-1],a)})};m.Tf=function(a,b){return this.$(function(b){return H(a,b)},function(a){return H(b,a)})};function qj(a,b){this.Na=a;this.K=b}function rj(a){return a.K.some(function(a){return a instanceof R},a)?sj(a):tj(a)}function sj(a){if(1==a.K.length&&"DISTINCT"==a.K[0].Nb)return a=Fd(a.Na,a.K[0]).entries.map(function(a){var b=new Ld(new bc(-1,{}),1<this.Na.M.size);Od(b,this.K[0],H(a,this.K[0].child));return b},a),new G(a,[]);var b=new Ld(new bc(-1,{}),1<a.Na.M.size);a.K.forEach(function(a){var c=a instanceof R?Fd(this.Na,a):H(this.Na.entries[0],a);Od(b,a,c)},a);return new G([b],a.Na.o())}
function tj(a){var b=Array(a.Na.entries.length),c=1<a.Na.M.size;a.Na.entries.forEach(function(a,e){b[e]=new Ld(new bc(a.va.id(),{}),c);this.K.forEach(function(c){Od(b[e],c,H(a,c))},this)},a);return new G(b,a.Na.o())}function uj(a,b){var c=a.map(function(a){return rj(new qj(a,b)).entries[0]});return new G(c,a[0].o())};function vj(a,b){S.call(this,0,1);this.f=a;this.Pb=b}r(vj,S);vj.prototype.toString=function(){var a="project("+this.f.toString();if(null!==this.Pb)var b=this.Pb.map(function(a){return a.j()}).join(", "),a=a+(", groupBy("+b+")");return a+")"};vj.prototype.ba=function(a){0==a.length?a=[Hd()]:1==a.length?(a=a[0],a=[0==this.f.length?a:rj(new qj(a,this.f))]):a=[uj(a,this.f)];return a};function wj(a){return a.f.some(function(a){return a instanceof R})||null!==a.Pb};function xj(){S.call(this,0,1)}r(xj,S);xj.prototype.toString=l("skip(?)");xj.prototype.Rc=function(a){return this.toString().replace("?",a.L.toString())};xj.prototype.ba=function(a,b,c){return[new G(a[0].entries.slice(c.L),a[0].o())]};function yj(){}r(yj,Ah);yj.prototype.Za=function(a,b){if(!n(b.X)&&!n(b.L))return a;var c=zj(a);if(null===c)return a;Bg(a,function(a){return a instanceof oj||a instanceof xj}).forEach(function(a){a instanceof oj?c.Sc=!0:c.Tc=!0;Cg(a)},this);return c.fb()};function zj(a){a=Bg(a,function(a){return a instanceof ej},function(a){return a instanceof vj&&wj(a)||a instanceof pj||1!=J(a).length||a instanceof gj});return 0<a.length?a[0]:null};function Aj(a){this.c=a}r(Aj,Ah);Aj.prototype.Za=function(a,b){this.G=a;var c=Bj(this,b);if(0==c.length)return this.G;var d,e=0;do d=c[e++],a=Cj(this,d,b);while(null===a&&e<c.length);if(null===a)return this.G;b=Dj(this,a[0].gb.nc);return null===b?this.G:this.G=Ej(this,d,b,a)};function Bj(a,b){return Bg(a.G,function(a){if(!(a instanceof gj))return!1;a=pe(b,a.kc);return a instanceof Ig&&"or"==a.qb})}function Dj(a,b){return Bg(a.G,function(a){return a instanceof Ii&&a.table.getName()==b})[0]||null}
function Cj(a,b,c){b=pe(c,b.kc);var d=b.o();if(1!=d.size)return null;var d=C(d)[0],e=new Xi(a.c,d),f=null;return J(b).every(function(a){a=Zi(e,c,[a]);null===a||(null===f?f=[a]:f.push(a));return null!==a})?f:null}function Ej(a,b,c,d){var e=new hj(a.c,c.table),f=new fj;L(e,f);d.forEach(function(a){a=new ej(this.c,a.gb,dj(a),!1);L(f,a)},a);Cg(b);Gg(c,c,e,f);return f.fb()};function Fj(a){this.c=a}r(Fj,Ah);Fj.prototype.Za=function(a,b){b=Gj(a,b);if(null===b)return a;a:{var c=b;a=Hj(ce(b,0));if(null!==a){var d;d=b.N;for(var e=null,f=a.table.Da(),h=0;h<f.length&&null===e;h++)e=Ij(f[h],d);d=e;if(null===d){a=c;break a}c=new ej(this.c,d.gb,new Ti(d.gb),d.We);d=new hj(this.c,a.table);L(d,c);Cg(b);c=Gg(a,a,d,c)}a=c}a==b&&(a=b,c=Jj(ce(b,0)),null!==c&&(d=Ij(c.index,b.N),null!==d&&(c.oe=d.We,a=Cg(b).parent)));return a.fb()};
function Jj(a){a=Bg(a,function(a){return a instanceof ej},function(a){return 1!=J(a).length});return 0<a.length?a[0]:null}function Hj(a){a=Bg(a,function(a){return a instanceof Ii},function(a){return 1!=J(a).length});return 0<a.length?a[0]:null}function Gj(a,b){return n(b.N)?Bg(a,function(a){return a instanceof pj})[0]:null}function Ij(a,b){if(a.f.length!=b.length||!b.every(function(b,d){return b.J.getName()==a.f[d].da.getName()}))return null;b=Kj(b,a);return b[0]||b[1]?{gb:a,We:b[1]}:null}
function Kj(a,b){var c=a.reduce(function(a,b){return a<<1|(0==b.order?0:1)},0),d=b.f.reduce(function(a,b){return a<<1|(0==b.order?0:1)},0),c=c^d;return[0==c,c==Math.pow(2,Math.max(a.length,b.f.length))-1]};function Lj(a,b,c){this.Ha=a;this.ke=b;this.Vb=c}Lj.prototype.hc=function(){this.Vb.forEach(function(a){this.Ha=a.Za(this.Ha,this.ke)},this);return this.Ha};function Mj(a){S.call(this,0,1);this.U=a}r(Mj,S);Mj.prototype.toString=function(){return"update("+this.U.getName()+")"};Mj.prototype.ba=function(a,b,c){a=a[0].entries.map(function(a){var b=this.U.cb(a.va.Ja());c.set.forEach(function(a){b.m[a.J.getName()]=a.value},this);return b},this);b.update(this.U,a);return[Hd()]};function Nj(a){this.c=a;this.re=[new Ri,new ij(this.c),new Aj(this.c),new Fj(this.c),new yj,new Ji(this.c)];this.Pd=[new ij(this.c)]}Nj.prototype.create=function(a,b){var c=a.fb();if(c instanceof nh||c instanceof mh)return Oj(this,a,b);if(c instanceof th||c instanceof xh||c instanceof yh)return Oj(this,a,b,this.re);if(c instanceof oh||c instanceof ph)return Oj(this,a,b,this.Pd);throw new D(8);};
function Oj(a,b,c,d){a=zg(b.fb(),a.tg.bind(a));null!=d&&(a=(new Lj(a,c,d)).hc());return new ve(a,b.ca())}
Nj.prototype.tg=function(a){if(a instanceof th)return new vj(a.f,a.Pb);if(a instanceof wh)return new Ki(a.f);if(a instanceof vh)return new ah(a.f);if(a instanceof uh)return new pj(a.N);if(a instanceof yh)return new xj;if(a instanceof xh)return new oj;if(a instanceof qh)return new gj(a.O.W());if(a instanceof sh)return new Fh;if(a instanceof zh)return new Mi(this.c,a.O,a.Rb);if(a instanceof rh)return new Ii(this.c,a.table);if(a instanceof oh)return new Gi(a.table);if(a instanceof ph)return new Mj(a.table);
if(a instanceof nh)return new nj(this.c,a.table);if(a instanceof mh)return new lj(this.c,a.table);throw new D(514);};function Pj(a){this.qg=new Fi;this.Eg=new Nj(a)};function Qj(){this.cf=y()}function Rj(a,b){var c=a.cf.get(b.getName())||null;null===c&&(c=new Sj,a.cf.set(b.getName(),c));return c}function Tj(a,b,c,d){c.forEach(function(a){a=Rj(this,a);0==d?(a.ib=null,a.wc=b):3==d?(null===a.Yb&&(a.Yb=B()),a.Yb.add(b),null===a.Ya&&(a.Ya=B()),a.Ya.delete(b)):1==d?(null===a.Ya&&(a.Ya=B()),a.Ya.add(b)):2==d&&(a.ib=b)},a)}
function Uj(a,b,c,d){var e=!0;c.forEach(function(a){if(e){a=Rj(this,a);var c=null===a.Ya||0==a.Ya.size;e=0==d?(null===a.Yb||0==a.Yb.size)&&c&&null===a.wc&&null!==a.ib&&a.ib==b:3==d?null===a.wc&&null===a.ib&&null!==a.Ya&&a.Ya.has(b):1==d?null===a.ib:c&&(null===a.ib||a.ib==b)}},a);return e}function Vj(a,b,c,d){var e=Uj(a,b,c,d);e&&Tj(a,b,c,d);return e}Qj.prototype.releaseLock=function(a,b){b.forEach(function(b){Rj(this,b).releaseLock(a)},this)};
function Wj(a,b){b.forEach(function(a){Rj(this,a).ib=null},a)}function Sj(){this.Yb=this.Ya=this.ib=this.wc=null}Sj.prototype.releaseLock=function(a){this.wc==a&&(this.wc=null);this.ib==a&&(this.ib=null);null===this.Ya||this.Ya.delete(a);null===this.Yb||this.Yb.delete(a)};function Xj(){this.Ub=new Yj;this.Fc=new Qj}function De(a,b){(2>b.getPriority()||2>b.getPriority())&&Wj(a.Fc,b.ca());a.Ub.Bb(b);Zj(a);return b.Eb.ha}function Zj(a){for(var b=a.Ub.qa(),c=0;c<b.length;c++){var d=b[c];if(0==d.I()?ak(a,d,1,3):ak(a,d,2,0)){a.Ub.remove(d);var e=a;d.exec().then(e.Bg.bind(e,d),e.Ag.bind(e,d))}}}function ak(a,b,c,d){var e=!1;Vj(a.Fc,b.W(),b.ca(),c)&&(e=Vj(a.Fc,b.W(),b.ca(),d));return e}Xj.prototype.Bg=function(a,b){this.Fc.releaseLock(a.W(),a.ca());a.Eb.resolve(b);Zj(this)};
Xj.prototype.Ag=function(a,b){this.Fc.releaseLock(a.W(),a.ca());a.Eb.reject(b);Zj(this)};function Yj(){this.Ub=[]}Yj.prototype.Bb=function(a){Bf(this.Ub,a,function(a,c){var b=a.getPriority()-c.getPriority();return 0==b?a.W()-c.W():b})};Yj.prototype.qa=function(){return this.Ub.slice()};Yj.prototype.remove=function(a){var b=this.Ub;a=xa(b,a);var c;(c=0<=a)&&Array.prototype.splice.call(b,a,1);return c};function bk(){this.Oc=y()}var ck;function dk(){ck||(ck=new bk);return ck}bk.prototype.clear=function(){this.Oc.clear()};bk.prototype.clear=bk.prototype.clear;bk.prototype.sb=function(a,b){this.Oc.set(a.toString(),b);return b};bk.prototype.registerService=bk.prototype.sb;bk.prototype.b=function(a){var b=this.Oc.get(a.toString())||null;if(null===b)throw new D(7,a.toString());return b};bk.prototype.getService=bk.prototype.b;bk.prototype.nd=function(a){return this.Oc.has(a.toString())};
bk.prototype.isRegistered=bk.prototype.nd;function ek(){var a=dk();return ac(a.Oc)};function fk(a,b,c,d){return null!=a?null!=b?gk(a,b,c,d):hk(a):ik()}function jk(a){var b="";try{b=JSON.stringify(a)}catch(c){}return b}function kk(a){var b=dk();a=new oc("ns_"+a);return b.nd(a)?b.b(a):null}function ik(){var a={};ek().forEach(function(b){"ns_"==b.substring(0,3)&&(b=b.substring(3),a[b]=kk(b).b(vc).version())});return jk(a)}function hk(a){a=kk(a);var b={};if(null!=a){var c=a.b(rc);a.b(vc).oa().forEach(function(a){b[a.getName()]=c.get(ff(a)).Y().ia})}return jk(b)}
function gk(a,b,c,d){var e=kk(a);a=[];if(null!=e){var f=null;try{f=e.b(vc).table(b)}catch(h){}null!=f&&(b=e.b(rc),e=e.b(qc),c=b.get(ff(f)).Va(void 0,!1,c,d),c.length&&(a=yf(e,c).map(function(a){return a.m})))}return jk(a)};function lk(a,b){this.Qd=Zd();this.le=a;this.pd=b;this.K=mk(this)}function mk(a){if(0<a.le.f.length)return a.le.f;var b=[];a.le.from.forEach(function(a){a.eb().forEach(function(a){b.push(a)})});return b}lk.prototype.$=function(a,b){return this.K.every(function(c){return $d(this.Qd,c.I(),"eq")(H(a,c),H(b,c))},this)};
function nk(a,b,c){var d=null===b?[]:b.entries,e=ob(d,c.entries,a.$.bind(a),function(a){return d[a]});b=[];for(var f=0,h=0;h<d.length;h++){var k=d[h];e[f]==k?f++:(k=a.pd.splice(f,1),k=ok(h,k,0,a.pd),b.push(k))}e=ob(d,c.entries,a.$.bind(a),function(a,b){return c.entries[b]});for(h=f=0;h<c.entries.length;h++)k=c.entries[h],e[f]==k?f++:(a.pd.splice(h,0,k.va.m),k=ok(h,[],1,a.pd),b.push(k));return b}function ok(a,b,c,d){return{addedCount:c,index:a,object:d,removed:b,type:"splice"}};function pk(){this.gc=y()}pk.prototype.Cd=function(a,b){var c=la(a.query).toString(),d=this.gc.get(c)||null;null===d&&(d=new qk(a),this.gc.set(c,d));d.Cd(b)};pk.prototype.me=function(a,b){a=la(a.query).toString();var c=this.gc.get(a)||null;c.me(b);0<c.Ic.size||this.gc.delete(a)};function Ce(a,b){var c=B();b.forEach(function(a){c.add(a.getName())});var d=[];a.gc.forEach(function(a){a=a.Cc();a.context.from.some(function(a){return c.has(a.getName())})&&d.push(a)});return d}
function Ae(a,b,c){b=la(null!=b.Yc?b.Yc:b).toString();a=a.gc.get(b)||null;null!==a&&rk(a,c)}function qk(a){this.Gf=a;this.Ic=B();this.yg=[];this.af=null;this.Rf=new lk(a.query,this.yg)}qk.prototype.Cd=function(a){this.Ic.has(a)||this.Ic.add(a)};qk.prototype.me=function(a){return this.Ic.delete(a)};qk.prototype.Cc=function(){var a=this.Gf;return{context:a.query,ie:di(a)}};function rk(a,b){var c=nk(a.Rf,a.af,b);a.af=b;0<c.length&&a.Ic.forEach(function(a){a(c)})};function sk(a,b){var c=a.b(vc),d=b||{};b=new xf(c);a.sb(qc,b);b=null;var e=!1;null!=d.storeType?b=d.storeType:(b=Zb(),b=b.fg?0:b.Ug?4:1);switch(b){case 0:b=new bf(a,c);break;case 1:b=new jf(c);break;case 5:b=new mf(c);break;case 4:b=new uf(a,c,d.webSqlDbSize);break;case 3:b=new Pe(c,d.firebase);e=!0;break;default:throw new D(300);}a.sb(pc,b);var f=new yg;a.sb(rc,f);return b.Ea(d.onUpgrade).then(function(){var b=new Pj(a);a.sb(sc,b);b=new Xj;a.sb(tc,b);b=new pk;a.sb(uc,b);return f.Ea(c)}).then(function(){if(e){var b=
new Ee(a);b.Oa.subscribe(b.de.bind(b))}d.enableInspector&&(window.top["#lfInspect"]=fk);return(new rg(a)).Ea(c)})};function tk(a){this.c=a;this.g=a.b(vc);this.aa=B(this.g.oa());this.Eb=w()}function uk(a){var b=a.c.b(rc),c=a.c.b(qc),d={};a.g.oa().forEach(function(a){var e=b.get(ff(a)).Va(),e=yf(c,e).map(function(a){return a.m});d[a.getName()]=e});return{name:a.g.name(),version:a.g.version(),tables:d}}m=tk.prototype;m.exec=function(){var a=uk(this),a=new Ld(new bc(-1,a),!0);return v([new G([a],[])])};m.I=l(0);m.ca=g("aa");m.W=function(){return la(this)};m.getPriority=l(0);function vk(a,b){this.c=a;this.g=a.b(vc);this.aa=B(this.g.oa());this.Eb=w();this.Ba=b;this.Oa=a.b(pc);this.V=a.b(qc);this.C=a.b(rc)}m=vk.prototype;
m.exec=function(){if(!(this.Oa instanceof bf||this.Oa instanceof jf||this.Oa instanceof uf))throw new D(300);var a;a:{a=this.g.oa();for(var b=0;b<a.length;++b)if(0<this.C.get(ff(a[b])).Y().ia){a=!1;break a}a=!0}if(!a)throw new D(110);if(this.g.name()!=this.Ba.name||this.g.version()!=this.Ba.version)throw new D(111);if(null==this.Ba.tables)throw new D(112);return wk(this)};m.I=l(1);m.ca=g("aa");m.W=function(){return la(this)};m.getPriority=l(0);
function wk(a){var b=new od(a.c,a.aa),b=a.Oa.Hb(a.I(),C(a.aa),b),c;for(c in a.Ba.tables){var d=a.g.table(c),e=a.Ba.tables[c].map(function(a){return d.mb(a)}),f=b.H(c,d.cb,0);a.V.Wb(c,e);var h=a.C.mc.get(c)||[];e.forEach(function(a){h.forEach(function(b){var c=a.ob(b.getName());b.add(c,a.id())})});f.put(e)}return b.ka()};function xk(a,b){this.c=a;this.Oa=a.b(pc);this.Ia=a.b(tc);this.Kb=a.b(uc);this.aa=B(b);this.Ra=new od(this.c,this.aa);this.Eb=w();this.xc=w();this.ze=w()}m=xk.prototype;m.exec=function(){this.ze.resolve();return this.xc.ha};m.I=l(1);m.ca=g("aa");m.W=function(){return la(this)};m.getPriority=l(2);function yk(a){De(a.Ia,a);return a.ze.ha}
function zk(a,b){b=b.Cc();return b.ie.fb().exec(a.Ra,b.context).then(function(a){return Dd(a[0])},function(a){this.Ra.Lb();var b=new ib(a.name);this.xc.reject(b);throw a;}.bind(a))}m.ka=function(){this.ja=this.Oa.Hb(this.I(),C(this.aa),this.Ra);this.ja.ka().then(function(){this.Nc();this.xc.resolve()}.bind(this),function(a){this.Ra.Lb();this.xc.reject(a)}.bind(this));return this.Eb.ha};m.Lb=function(){this.Ra.Lb();this.xc.resolve();return this.Eb.ha};
m.Nc=function(){var a=Ce(this.Kb,this.aa);0!=a.length&&(a=new ze(this.c,a),De(this.Ia,a))};m.Y=function(){var a=null;null!=this.ja&&(a=this.ja.Y());return null===a?new A(!1,0,0,0,0):a};function V(a){this.c=a;this.Ia=a.b(tc);this.Mb=null;this.Ta=0;0==Ak.size&&(Ak.set(0,B([1,4])),Ak.set(1,B([2])),Ak.set(2,B([3,5,6])),Ak.set(3,B([2,7])),Ak.set(4,B([7])),Ak.set(5,B([7])),Ak.set(6,B([7])))}q("lf.proc.Transaction",V);var Ak=y();function Bk(a,b){var c=Ak.get(a.Ta)||null;if(null===c||!c.has(b))throw new D(107,a.Ta,b);a.Ta=b}
V.prototype.exec=function(a){Bk(this,4);var b=[];try{a.forEach(function(a){a.bb();b.push(a.Cc())},this)}catch(c){return Bk(this,7),ab(c)}this.Mb=new Gh(this.c,b);return De(this.Ia,this.Mb).then(function(a){Bk(this,7);return a.map(function(a){return Dd(a)})}.bind(this),function(a){Bk(this,7);throw a;}.bind(this))};V.prototype.exec=V.prototype.exec;V.prototype.Ef=function(a){Bk(this,1);this.Mb=new xk(this.c,a);return yk(this.Mb).then(function(){Bk(this,2)}.bind(this))};V.prototype.begin=V.prototype.Ef;
V.prototype.Df=function(a){Bk(this,3);try{a.bb()}catch(b){return Bk(this,7),ab(b)}return zk(this.Mb,a).then(function(a){Bk(this,2);return a}.bind(this),function(a){Bk(this,7);throw a;}.bind(this))};V.prototype.attach=V.prototype.Df;V.prototype.ka=function(){Bk(this,5);return this.Mb.ka().then(function(){Bk(this,7)}.bind(this))};V.prototype.commit=V.prototype.ka;V.prototype.Lb=function(){Bk(this,6);return this.Mb.Lb().then(function(){Bk(this,7)}.bind(this))};V.prototype.rollback=V.prototype.Lb;
V.prototype.Y=function(){if(7!=this.Ta)throw new D(105);return this.Mb.Y()};V.prototype.stats=V.prototype.Y;function W(a){this.c=a;this.g=a.b(vc);this.jd=!1}q("lf.proc.Database",W);W.prototype.Ea=function(a){this.c.sb(vc,this.g);return sk(this.c,a).then(function(){this.jd=!0;this.Ia=this.c.b(tc);return this}.bind(this))};W.prototype.init=W.prototype.Ea;W.prototype.Ab=g("g");W.prototype.getSchema=W.prototype.Ab;function Ck(a){if(!a.jd)throw new D(2);}W.prototype.select=function(a){Ck(this);return new U(this.c,1!=arguments.length||null!=arguments[0]?Array.prototype.slice.call(arguments):[])};
W.prototype.select=W.prototype.select;W.prototype.Bb=function(){Ck(this);return new fi(this.c)};W.prototype.insert=W.prototype.Bb;W.prototype.Wd=function(){Ck(this);return new fi(this.c,!0)};W.prototype.insertOrReplace=W.prototype.Wd;W.prototype.update=function(a){Ck(this);return new pi(this.c,a)};W.prototype.update=W.prototype.update;W.prototype.delete=function(){Ck(this);return new ei(this.c)};W.prototype["delete"]=W.prototype.delete;
W.prototype.observe=function(a,b){Ck(this);this.c.b(uc).Cd(a,b)};W.prototype.observe=W.prototype.observe;W.prototype.unobserve=function(a,b){Ck(this);this.c.b(uc).me(a,b)};W.prototype.unobserve=W.prototype.unobserve;W.prototype.Nf=function(){Ck(this);return new V(this.c)};W.prototype.createTransaction=W.prototype.Nf;W.prototype.close=function(){try{this.c.b(pc).close()}catch(a){}this.c.clear();this.jd=!1};W.prototype.close=W.prototype.close;
W.prototype.Xf=function(){Ck(this);var a=new tk(this.c);return De(this.Ia,a).then(function(a){return Dd(a[0])[0]})};W.prototype["export"]=W.prototype.Xf;W.prototype.import=function(a){Ck(this);a=new vk(this.c,a);return De(this.Ia,a).then(l(null))};W.prototype["import"]=W.prototype.import;function X(a,b,c,d,e,f){this.U=a;this.A=b;this.Xe=c;this.Ve=d;this.wf=e;this.Ka=f||null}q("lf.schema.BaseColumn",X);m=X.prototype;m.getName=g("A");m.j=function(){return Nd(this.U)+"."+this.A};m.toString=function(){return this.j()};m.H=g("U");m.I=g("wf");X.prototype.getType=X.prototype.I;X.prototype.Da=function(){null==this.ta&&(this.ta=[],this.H().Da().forEach(function(a){-1!=a.f.map(function(a){return a.da.getName()}).indexOf(this.A)&&this.ta.push(a)},this));return this.ta};
X.prototype.Ca=function(){if(!n(this.fa)){var a=this.Da().filter(function(a){return 1!=a.f.length?!1:a.f[0].da.getName()==this.getName()},this);this.fa=0<a.length?a[0]:null}return this.fa};X.prototype.ic=g("Ve");X.prototype.isNullable=X.prototype.ic;X.prototype.Ec=g("Xe");X.prototype.Qa=function(a){return Rg(this,a,"eq")};X.prototype.eq=X.prototype.Qa;X.prototype.df=function(a){return Rg(this,a,"neq")};X.prototype.neq=X.prototype.df;X.prototype.rg=function(a){return Rg(this,a,"lt")};
X.prototype.lt=X.prototype.rg;X.prototype.sg=function(a){return Rg(this,a,"lte")};X.prototype.lte=X.prototype.sg;X.prototype.ag=function(a){return Rg(this,a,"gt")};X.prototype.gt=X.prototype.ag;X.prototype.bg=function(a){return Rg(this,a,"gte")};X.prototype.gte=X.prototype.bg;X.prototype.match=function(a){return Rg(this,a,"match")};X.prototype.match=X.prototype.match;X.prototype.Ff=function(a,b){return Rg(this,[a,b],"between")};X.prototype.between=X.prototype.Ff;
X.prototype.cg=function(a){return Rg(this,a,"in")};X.prototype["in"]=X.prototype.cg;X.prototype.mg=function(){return this.Qa(null)};X.prototype.isNull=X.prototype.mg;X.prototype.lg=function(){return this.df(null)};X.prototype.isNotNull=X.prototype.lg;X.prototype.sc=function(a){return new X(this.U,this.A,this.Xe,this.Ve,this.wf,a)};X.prototype.as=X.prototype.sc;function Dk(a){this.g=a;this.Id=new Xc;this.ne=new Xc;this.ff=new Xc;this.Ie=y();this.h=new Xc;this.Ee=new Xc;this.lf=new Xc;this.He=new Xc;Ek(this)}function Ek(a){a.g.oa().forEach(function(a){var b=a.getName();a.zb().Ud.forEach(function(c){this.ff.set(b,this.g.table(c.Xa));this.h.set(c.Xa,a);0==c.action?(this.ne.set(c.Xa,c),this.lf.set(c.Xa,a)):(this.Id.set(c.Xa,c),this.Ee.set(c.Xa,a));this.Ie.set(a.getName()+"."+c.wb,c.Xa);this.He.set(c.Xa+"."+c.Kc,a.getName())},this)},a)}
function ed(a,b,c){if(null!=c)return 1==c?a.Id.get(b):a.ne.get(b);c=a.Id.get(b);a=a.ne.get(b);return null===c&&null===a?null:(c||[]).concat(a||[])}function Mh(a,b){a=b.get(a);return null===a?[]:a}function Oh(a,b){var c=B();b.forEach(function(a){(a=this.Ie.get(a))&&c.add(a)},a);return C(c).map(function(a){return this.g.table(a)},a)}function Kh(a,b,c){return null!=c?0==c?Mh(b,a.lf):Mh(b,a.Ee):Mh(b,a.h)}
function Ph(a,b){var c=B();b.forEach(function(a){(a=this.He.get(a))&&a.forEach(function(a){c.add(a)})},a);return C(c).map(function(a){return this.g.table(a)},a)};function Fk(a,b,c){this.td=a;this.xg=b;this.Ud=c}q("lf.schema.Constraint",Fk);Fk.prototype.$f=g("td");Fk.prototype.getPrimaryKey=Fk.prototype.$f;Fk.prototype.Zf=g("Ud");Fk.prototype.getForeignKeys=Fk.prototype.Zf;function Gk(a,b,c){var d=a.ref.split(".");if(2!=d.length)throw new D(540,c);this.Ge=b;this.wb=a.local;this.Xa=d[0];this.Kc=d[1];this.name=b+"."+c;this.action=a.action;this.timing=a.timing};function Y(a){Hk(a);this.Qd=Zd();this.A=a;this.K=y();this.zd=B();this.oc=B();this.od=B();this.Fa=null;this.ta=y();this.sd=!1;this.yb=[]}q("lf.schema.TableBuilder",Y);function Ik(a){this.name=a.name;this.order=a.order;this.autoIncrement=a.autoIncrement}var Jk=B([0,6]);function Hk(a){if(!/^[A-Za-z_][A-Za-z0-9_]*$/.test(a))throw new D(502,a);}function Kk(a,b){if(b==a.A)throw new D(546,b);if(a.K.has(b)||a.ta.has(b)||a.oc.has(b))throw new D(503,a.A+"."+b);}
function Lk(a,b){var c=!1;b.forEach(function(a){var b=this.K.get(a.name);c=c||a.autoIncrement;if(a.autoIncrement&&3!=b)throw new D(504);},a);if(c&&1<b.length)throw new D(505);}function Mk(a){if(null!==a.Fa){var b=a.ta.get(a.Fa).map(function(a){return a.name}),c=0;if(a.yb.some(function(a,e){c=e;return-1!=b.indexOf(a.wb)},a))throw new D(543,a.yb[c].name);}}
function Nk(a){if(null!==a.Fa){var b=function(a){return a.name},c=JSON.stringify(a.ta.get(a.Fa).map(b));a.ta.forEach(function(a,e){if(e!=this.Fa&&(a=a.map(b),JSON.stringify(a)==c))throw new D(544,this.A+"."+e);},a)}}function Ok(a){null===a.Fa||a.ta.get(a.Fa).forEach(function(a){if(this.od.has(a.name))throw new D(545,this.A+"."+a.name);},a)}Y.prototype.yf=function(a,b){Hk(a);Kk(this,a);this.K.set(a,b);Jk.has(b)&&this.Be([a]);return this};Y.prototype.addColumn=Y.prototype.yf;
Y.prototype.Af=function(a,b){var c=this.A;this.Fa="pk"+(c[0].toUpperCase()+c.substring(1));Hk(this.Fa);Kk(this,this.Fa);a=Pk(this,a,!0,void 0,b);Lk(this,a);1==a.length&&this.zd.add(a[0].name);this.oc.add(this.Fa);this.ta.set(this.Fa,a);return this};Y.prototype.addPrimaryKey=Y.prototype.Af;
Y.prototype.zf=function(a,b){Hk(a);Kk(this,a);b=new Gk(b,this.A,a);n(b.action)||(b.action=0);n(b.timing)||(b.timing=0);if(1==b.action&&1==b.timing)throw new D(506);if(!this.K.has(b.wb))throw new D(540,a);this.yb.push(b);this.Ae(a,[b.wb],this.zd.has(b.wb));return this};Y.prototype.addForeignKey=Y.prototype.zf;Y.prototype.Bf=function(a,b){Hk(a);Kk(this,a);b=Pk(this,b,!0);1==b.length&&(this.zd.add(b[0].name),Qk(this,b[0].name));this.ta.set(a,b);this.oc.add(a);return this};Y.prototype.addUnique=Y.prototype.Bf;
function Qk(a,b){a.yb.forEach(function(a){a.wb==b&&this.oc.add(a.name.split(".")[1])},a)}Y.prototype.Be=function(a){Pk(this,a,!1).forEach(function(a){this.od.add(a.name)},this);return this};Y.prototype.addNullable=Y.prototype.Be;Y.prototype.Ae=function(a,b,c,d){Hk(a);Kk(this,a);b=Pk(this,b,!0,d);c&&this.oc.add(a);this.ta.set(a,b);return this};Y.prototype.addIndex=Y.prototype.Ae;Y.prototype.Db=ba("sd");Y.prototype.persistentIndex=Y.prototype.Db;
Y.prototype.Ab=function(){Mk(this);Nk(this);Ok(this);return new (Rk(this))};Y.prototype.getSchema=Y.prototype.Ab;function Pk(a,b,c,d,e){var f=b,f="string"==typeof b[0]?b.map(function(a){return new Ik({name:a,order:null!=d?d:1,autoIncrement:e||!1})}):b.map(function(a){return new Ik(a)});f.forEach(function(a){if(!this.K.has(a.name))throw new D(508,this.A,a.name);if(c){var b=this.K.get(a.name);if(0==b||6==b)throw new D(509,this.A,a.name);}},a);return f}
function Rk(a){function b(){function b(b){return a.ta.get(b).map(function(a){return{da:this[a.name],order:a.order,autoIncrement:a.autoIncrement}},this)}var d=ac(a.K).map(function(b){this[b]=new X(this,b,a.zd.has(b),a.od.has(b),a.K.get(b));return this[b]},this),e=ac(a.ta).map(function(c){return new Tg(a.A,c,a.oc.has(c),b.call(this,c))},this);Q.call(this,a.A,d,e,a.sd);var f=null===a.Fa?null:new Tg(a.A,a.Fa,!0,b.call(this,a.Fa)),h=d.filter(function(b){return!a.od.has(b.getName())});this.Kf=new Fk(f,
h,a.yb);this.pf=Sk(a,d,e)}r(b,Q);b.prototype.mb=function(a){return new this.pf(cc++,a)};b.prototype.createRow=b.prototype.mb;b.prototype.cb=function(a){var b={};this.eb().forEach(function(c){var d=c.getName();c=c.I();var e=a.value[d];if(0==c)if(c=e,null!=c&&""!=c){0!=c.length%2&&(c="0"+c);for(var e=new ArrayBuffer(c.length/2),k=new Uint8Array(e),p=0,K=0;p<c.length;p+=2)k[K++]=parseInt(c.substr(p,2),16);c=e}else c=null;else c=2==c?null!=e?new Date(e):null:e;b[d]=c},this);return new this.pf(a.id,b)};
b.prototype.deserializeRow=b.prototype.cb;b.prototype.zb=g("Kf");b.prototype.getConstraint=b.prototype.zb;return b}
function Sk(a,b,c){function d(a,d){this.K=b;this.ta=c;bc.call(this,a,d)}r(d,bc);d.prototype.Ke=function(){var a={};this.K.forEach(function(b){a[b.getName()]=b.ic()?null:Wc[b.I()]});return a};d.prototype.vf=function(){var a={};this.K.forEach(function(b){var c=b.getName();b=b.I();var d=this.m[c];a[c]=0==b?null!=d?fc(d):null:2==b?null!=d?d.getTime():null:6==b?null!=d?d:null:d},this);return a};var e=function(a){var b=this.K.get(a.getName()),c=this.Qd.Ye.get(b)||null;return function(b){return c(b[a.getName()])}}.bind(a),
f=function(a){var b=a.map(function(a){return e(a.da)});return function(a){return b.map(function(b){return b(a)})}}.bind(a),h={};c.forEach(function(a){var b=a.j();a=1==a.f.length?e(a.f[0].da):f(a.f);h[b]=a});d.prototype.ob=function(a){return-1!=a.indexOf("#")?this.id():h.hasOwnProperty(a)?h[a](this.m):null};return d};function Tk(a,b){this.g=new Z(a,b);this.ub=y();this.yc=!1;this.i=null;this.$c=!1}q("lf.schema.Builder",Tk);function Uk(a,b){b.yb.forEach(function(a){var c=a.Xa;if(!this.ub.has(c))throw new D(536,a.name);var c=this.ub.get(c).Ab(),e=a.Kc;if(!c.hasOwnProperty(e))throw new D(537,a.name);if(b.Ab()[a.wb].I()!=c[e].I())throw new D(538,a.name);if(!c[e].Ec())throw new D(539,a.name);},a)}
Tk.prototype.Jf=function(a){a.yb.forEach(function(a){this.ub.get(a.Xa).yb.forEach(function(b){if(b.wb==a.Kc)throw new D(534,a.name);},this)},this)};function Vk(a){a.yc||(a.ub.forEach(function(a){Uk(this,a);a=a.Ab();this.g.M.set(a.getName(),a)},a),z(a.ub).forEach(a.Jf,a),Wk(a),a.ub.clear(),a.yc=!0)}function Xk(a,b,c){b.ye||(b.ye=!0,b.ee=!0,b.Le.forEach(function(a){a=c.get(a);if(!a.ye)Xk(this,a,c);else if(a.ee&&b!=a)throw new D(533);},a));b.ee=!1}
function Wk(a){var b=y();a.g.M.forEach(function(a,d){b.set(d,new Yk(d))},a);a.ub.forEach(function(a,d){a.yb.forEach(function(a){b.get(a.Xa).Le.add(d)})});z(b).forEach(function(a){Xk(this,a,b)},a)}function Yk(a){this.ee=this.ye=!1;this.Le=B();this.nc=a}Tk.prototype.Ab=function(){this.yc||Vk(this);return this.g};Tk.prototype.getSchema=Tk.prototype.Ab;Tk.prototype.Pe=function(){var a=new oc("ns_"+this.g.name()),b=dk(),c;b.nd(a)?c=b.b(a):(c=new bk,b.sb(a,c));return c};Tk.prototype.getGlobal=Tk.prototype.Pe;
Tk.prototype.connect=function(a){if(this.$c||null!==this.i&&this.i.jd)throw new D(113);this.$c=!0;if(null===this.i){var b=this.Pe();b.nd(vc)||b.sb(vc,this.Ab());this.i=new W(b)}return this.i.Ea(a).then(function(a){this.$c=!1;return a}.bind(this),function(a){this.$c=!1;throw a;}.bind(this))};Tk.prototype.connect=Tk.prototype.connect;Tk.prototype.Mf=function(a){if(this.ub.has(a))throw new D(503,a);if(this.yc)throw new D(535);this.ub.set(a,new Y(a));return this.ub.get(a)};Tk.prototype.createTable=Tk.prototype.Mf;
Tk.prototype.se=function(a){if(this.yc)throw new D(535);this.g.se(a);return this};Tk.prototype.setPragma=Tk.prototype.se;function Z(a,b){this.A=a;this.Ua=b;this.M=y();this.je={Sf:!1}}q("lf.schema.DatabaseSchema",Z);Z.prototype.name=g("A");Z.prototype.name=Z.prototype.name;Z.prototype.version=g("Ua");Z.prototype.version=Z.prototype.version;Z.prototype.oa=function(){return z(this.M)};Z.prototype.tables=Z.prototype.oa;Z.prototype.table=function(a){if(!this.M.has(a))throw new D(101,a);return this.M.get(a)};
Z.prototype.table=Z.prototype.table;Z.prototype.info=function(){this.Ue||(this.Ue=new Dk(this));return this.Ue};Z.prototype.Fg=g("je");Z.prototype.pragma=Z.prototype.Fg;Z.prototype.se=ba("je");q("lf.schema.create",function(a,b){return new Tk(a,b)});u.prototype.catch=u.prototype.ve;u.prototype["catch"]=u.prototype.catch;
try{if(module){module.exports=lf;}}catch(e){}}.bind(window))();
//# sourceMappingURL=lovefield.min.js.map
