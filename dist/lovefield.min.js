if(!self.window){window=this;}
(function(){'use strict';function aa(){return function(){}}function ba(a){return function(b){this[a]=b}}function g(a){return function(){return this[a]}}function l(a){return function(){return a}}var m,p=this;function q(a){return void 0!==a}function ca(){}
function ea(a){var b=typeof a;if("object"==b)if(a){if(a instanceof Array)return"array";if(a instanceof Object)return b;var c=Object.prototype.toString.call(a);if("[object Window]"==c)return"object";if("[object Array]"==c||"number"==typeof a.length&&"undefined"!=typeof a.splice&&"undefined"!=typeof a.propertyIsEnumerable&&!a.propertyIsEnumerable("splice"))return"array";if("[object Function]"==c||"undefined"!=typeof a.call&&"undefined"!=typeof a.propertyIsEnumerable&&!a.propertyIsEnumerable("call"))return"function"}else return"null";
else if("function"==b&&"undefined"==typeof a.call)return"object";return b}function fa(a){return null===a}function ga(a){return null!=a}function ha(a){var b=ea(a);return"array"==b||"object"==b&&"number"==typeof a.length}function ia(a){return"string"==typeof a}function ja(a){return"function"==ea(a)}function ka(a){return a[la]||(a[la]=++ma)}var la="closure_uid_"+(1E9*Math.random()>>>0),ma=0;function na(a,b,c){return a.call.apply(a.bind,arguments)}
function oa(a,b,c){if(!a)throw Error();if(2<arguments.length){var d=Array.prototype.slice.call(arguments,2);return function(){var c=Array.prototype.slice.call(arguments);Array.prototype.unshift.apply(c,d);return a.apply(b,c)}}return function(){return a.apply(b,arguments)}}function pa(a,b,c){pa=Function.prototype.bind&&-1!=Function.prototype.bind.toString().indexOf("native code")?na:oa;return pa.apply(null,arguments)}
function qa(a,b){var c=Array.prototype.slice.call(arguments,1);return function(){var b=c.slice();b.push.apply(b,arguments);return a.apply(this,b)}}function r(a,b){var c=a.split("."),d=p;c[0]in d||!d.execScript||d.execScript("var "+c[0]);for(var e;c.length&&(e=c.shift());)!c.length&&q(b)?d[e]=b:d=d[e]?d[e]:d[e]={}}
function t(a,b){function c(){}c.prototype=b.prototype;a.eb=b.prototype;a.prototype=new c;a.prototype.constructor=a;a.Lg=function(a,c,f){for(var h=Array(arguments.length-2),k=2;k<arguments.length;k++)h[k-2]=arguments[k];return b.prototype[c].apply(a,h)}};function ra(a){if(Error.captureStackTrace)Error.captureStackTrace(this,ra);else{var b=Error().stack;b&&(this.stack=b)}a&&(this.message=String(a))}t(ra,Error);ra.prototype.name="CustomError";var sa=String.prototype.trim?function(a){return a.trim()}:function(a){return a.replace(/^[\s\xa0]+|[\s\xa0]+$/g,"")};
function ta(a){var b=0,c=sa(String(ua)).split(".");a=sa(String(a)).split(".");for(var d=Math.max(c.length,a.length),e=0;0==b&&e<d;e++){var f=c[e]||"",h=a[e]||"",k=/(\d*)(\D*)/g,n=/(\d*)(\D*)/g;do{var A=k.exec(f)||["","",""],O=n.exec(h)||["","",""];if(0==A[0].length&&0==O[0].length)break;b=va(0==A[1].length?0:parseInt(A[1],10),0==O[1].length?0:parseInt(O[1],10))||va(0==A[2].length,0==O[2].length)||va(A[2],O[2])}while(0==b)}return b}function va(a,b){return a<b?-1:a>b?1:0};function wa(a,b,c){this.hg=c;this.Mf=a;this.Bg=b;this.sd=0;this.ld=null}wa.prototype.get=function(){var a;0<this.sd?(this.sd--,a=this.ld,this.ld=a.next,a.next=null):a=this.Mf();return a};wa.prototype.put=function(a){this.Bg(a);this.sd<this.hg&&(this.sd++,a.next=this.ld,this.ld=a)};var xa=Array.prototype.indexOf?function(a,b,c){return Array.prototype.indexOf.call(a,b,c)}:function(a,b,c){c=null==c?0:0>c?Math.max(0,a.length+c):c;if(ia(a))return ia(b)&&1==b.length?a.indexOf(b,c):-1;for(;c<a.length;c++)if(c in a&&a[c]===b)return c;return-1},ya=Array.prototype.forEach?function(a,b,c){Array.prototype.forEach.call(a,b,c)}:function(a,b,c){for(var d=a.length,e=ia(a)?a.split(""):a,f=0;f<d;f++)f in e&&b.call(c,e[f],f,a)},za=Array.prototype.map?function(a,b,c){return Array.prototype.map.call(a,
b,c)}:function(a,b,c){for(var d=a.length,e=Array(d),f=ia(a)?a.split(""):a,h=0;h<d;h++)h in f&&(e[h]=b.call(c,f[h],h,a));return e},Aa=Array.prototype.reduce?function(a,b,c,d){d&&(b=pa(b,d));return Array.prototype.reduce.call(a,b,c)}:function(a,b,c,d){var e=c;ya(a,function(c,h){e=b.call(d,e,c,h,a)});return e},Ba=Array.prototype.some?function(a,b,c){return Array.prototype.some.call(a,b,c)}:function(a,b,c){for(var d=a.length,e=ia(a)?a.split(""):a,f=0;f<d;f++)if(f in e&&b.call(c,e[f],f,a))return!0;return!1};
function Da(a,b,c){return 2>=arguments.length?Array.prototype.slice.call(a,b):Array.prototype.slice.call(a,b,c)}function Ea(a){for(var b=[],c=0;c<a;c++)b[c]=0;return b}function Fa(a){for(var b=[],c=0;c<arguments.length;c++){var d=arguments[c];if("array"==ea(d))for(var e=0;e<d.length;e+=8192)for(var f=Fa.apply(null,Da(d,e,e+8192)),h=0;h<f.length;h++)b.push(f[h]);else b.push(d)}return b};function Ga(a){var b=[],c=0,d;for(d in a)b[c++]=a[d];return b};var Ha;a:{var Ia=p.navigator;if(Ia){var Ja=Ia.userAgent;if(Ja){Ha=Ja;break a}}Ha=""}function u(a){return-1!=Ha.indexOf(a)};function Ka(){return u("Opera")||u("OPR")}function La(){return(u("Chrome")||u("CriOS"))&&!Ka()&&!u("Edge")};function Ma(a){p.setTimeout(function(){throw a;},0)}var Na;
function Oa(){var a=p.MessageChannel;"undefined"===typeof a&&"undefined"!==typeof window&&window.postMessage&&window.addEventListener&&!u("Presto")&&(a=function(){var a=document.createElement("IFRAME");a.style.display="none";a.src="";document.documentElement.appendChild(a);var b=a.contentWindow,a=b.document;a.open();a.write("");a.close();var c="callImmediate"+Math.random(),d="file:"==b.location.protocol?"*":b.location.protocol+"//"+b.location.host,a=pa(function(a){if(("*"==d||a.origin==d)&&a.data==
c)this.port1.onmessage()},this);b.addEventListener("message",a,!1);this.port1={};this.port2={postMessage:function(){b.postMessage(c,d)}}});if("undefined"!==typeof a&&!u("Trident")&&!u("MSIE")){var b=new a,c={},d=c;b.port1.onmessage=function(){if(q(c.next)){c=c.next;var a=c.Fe;c.Fe=null;a()}};return function(a){d.next={Fe:a};d=d.next;b.port2.postMessage(0)}}return"undefined"!==typeof document&&"onreadystatechange"in document.createElement("SCRIPT")?function(a){var b=document.createElement("SCRIPT");
b.onreadystatechange=function(){b.onreadystatechange=null;b.parentNode.removeChild(b);b=null;a();a=null};document.documentElement.appendChild(b)}:function(a){p.setTimeout(a,0)}};function Pa(){this.Bd=this.qc=null}var Ra=new wa(function(){return new Qa},function(a){a.reset()},100);Pa.prototype.add=function(a,b){var c=Ra.get();c.set(a,b);this.Bd?this.Bd.next=c:this.qc=c;this.Bd=c};Pa.prototype.remove=function(){var a=null;this.qc&&(a=this.qc,this.qc=this.qc.next,this.qc||(this.Bd=null),a.next=null);return a};function Qa(){this.next=this.scope=this.Rd=null}Qa.prototype.set=function(a,b){this.Rd=a;this.scope=b;this.next=null};
Qa.prototype.reset=function(){this.next=this.scope=this.Rd=null};function Sa(a,b){Ta||Ua();Va||(Ta(),Va=!0);Wa.add(a,b)}var Ta;function Ua(){if(p.Promise&&p.Promise.resolve){var a=p.Promise.resolve(void 0);Ta=function(){a.then(Xa)}}else Ta=function(){var a=Xa;!ja(p.setImmediate)||p.Window&&p.Window.prototype&&p.Window.prototype.setImmediate==p.setImmediate?(Na||(Na=Oa()),Na(a)):p.setImmediate(a)}}var Va=!1,Wa=new Pa;function Xa(){for(var a=null;a=Wa.remove();){try{a.Rd.call(a.scope)}catch(b){Ma(b)}Ra.put(a)}Va=!1};function v(a,b){this.Ua=0;this.mf=void 0;this.Zc=this.ec=this.C=null;this.kd=this.Pd=!1;if(a!=ca)try{var c=this;a.call(b,function(a){Ya(c,2,a)},function(a){Ya(c,3,a)})}catch(d){Ya(this,3,d)}}function Za(){this.next=this.context=this.lc=this.Lc=this.child=null;this.Ed=!1}Za.prototype.reset=function(){this.context=this.lc=this.Lc=this.child=null;this.Ed=!1};var ab=new wa(function(){return new Za},function(a){a.reset()},100);function bb(a,b,c){var d=ab.get();d.Lc=a;d.lc=b;d.context=c;return d}
function w(a){if(a instanceof v)return a;var b=new v(ca);Ya(b,2,a);return b}function cb(a){return new v(function(b,c){c(a)})}function db(a,b,c){eb(a,b,c,null)||Sa(qa(b,a))}function fb(a){return new v(function(b,c){var d=a.length,e=[];if(d)for(var f=function(a,c){d--;e[a]=c;0==d&&b(e)},h=function(a){c(a)},k=0,n;k<a.length;k++)n=a[k],db(n,qa(f,k),h);else b(e)})}function x(){var a,b,c=new v(function(c,e){a=c;b=e});return new gb(c,a,b)}
v.prototype.then=function(a,b,c){return hb(this,ja(a)?a:null,ja(b)?b:null,c)};v.prototype.then=v.prototype.then;v.prototype.$goog_Thenable=!0;v.prototype.ue=function(a,b){return hb(this,null,a,b)};function ib(a,b){a.ec||2!=a.Ua&&3!=a.Ua||jb(a);a.Zc?a.Zc.next=b:a.ec=b;a.Zc=b}
function hb(a,b,c,d){var e=bb(null,null,null);e.child=new v(function(a,h){e.Lc=b?function(c){try{var e=b.call(d,c);a(e)}catch(A){h(A)}}:a;e.lc=c?function(b){try{var e=c.call(d,b);!q(e)&&b instanceof kb?h(b):a(e)}catch(A){h(A)}}:h});e.child.C=a;ib(a,e);return e.child}v.prototype.Gg=function(a){this.Ua=0;Ya(this,2,a)};v.prototype.Hg=function(a){this.Ua=0;Ya(this,3,a)};
function Ya(a,b,c){0==a.Ua&&(a==c&&(b=3,c=new TypeError("Promise cannot resolve to itself")),a.Ua=1,eb(c,a.Gg,a.Hg,a)||(a.mf=c,a.Ua=b,a.C=null,jb(a),3!=b||c instanceof kb||lb(a,c)))}function eb(a,b,c,d){if(a instanceof v)return ib(a,bb(b||ca,c||null,d)),!0;var e;if(a)try{e=!!a.$goog_Thenable}catch(h){e=!1}else e=!1;if(e)return a.then(b,c,d),!0;e=typeof a;if("object"==e&&null!=a||"function"==e)try{var f=a.then;if(ja(f))return mb(a,f,b,c,d),!0}catch(h){return c.call(d,h),!0}return!1}
function mb(a,b,c,d,e){function f(a){k||(k=!0,d.call(e,a))}function h(a){k||(k=!0,c.call(e,a))}var k=!1;try{b.call(a,h,f)}catch(n){f(n)}}function jb(a){a.Pd||(a.Pd=!0,Sa(a.Rf,a))}function nb(a){var b=null;a.ec&&(b=a.ec,a.ec=b.next,b.next=null);a.ec||(a.Zc=null);return b}
v.prototype.Rf=function(){for(var a=null;a=nb(this);){var b=this.Ua,c=this.mf;if(3==b&&a.lc&&!a.Ed)for(var d=void 0,d=this;d&&d.kd;d=d.C)d.kd=!1;if(a.child)a.child.C=null,ob(a,b,c);else try{a.Ed?a.Lc.call(a.context):ob(a,b,c)}catch(e){pb.call(null,e)}ab.put(a)}this.Pd=!1};function ob(a,b,c){2==b?a.Lc.call(a.context,c):a.lc&&a.lc.call(a.context,c)}function lb(a,b){a.kd=!0;Sa(function(){a.kd&&pb.call(null,b)})}var pb=Ma;function kb(a){ra.call(this,a)}t(kb,ra);kb.prototype.name="cancel";
function gb(a,b,c){this.da=a;this.resolve=b;this.reject=c};/*

 Copyright 2014 The Lovefield Project Authors. All Rights Reserved.

 Licensed under the Apache License, Version 2.0 (the "License");
 you may not use this file except in compliance with the License.
 You may obtain a copy of the License at

     http://www.apache.org/licenses/LICENSE-2.0

 Unless required by applicable law or agreed to in writing, software
 distributed under the License is distributed on an "AS IS" BASIS,
 WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 See the License for the specific language governing permissions and
 limitations under the License.
*/
function y(a,b){this.oa=a;this.s=b||this.Ke()}var qb=0;m=y.prototype;m.id=g("oa");function rb(a){return a.s}m.Ke=function(){return{}};m.vf=g("s");m.Ga=function(){return{id:this.oa,value:this.vf()}};m.Hb=function(a){return"#"==a.substr(-1)?this.oa:null};function sb(a){return new y(a.id,a.value)}function tb(a){return new y(qb++,a||{})}function ub(a){if(null==a)return null;a=new Uint8Array(a);for(var b="",c=0;c<a.length;++c)var d=a[c].toString(16),b=b+(2>d.length?"0"+d:d);return b};function vb(a){this.type=a}function wb(a){y.call(this,-1,a)}t(wb,y);function xb(a,b,c,d){c=c||function(a,b){return a==b};d=d||function(b){return a[b]};for(var e=a.length,f=b.length,h=[],k=0;k<e+1;k++)h[k]=[],h[k][0]=0;for(var n=0;n<f+1;n++)h[0][n]=0;for(k=1;k<=e;k++)for(n=1;n<=f;n++)c(a[k-1],b[n-1])?h[k][n]=h[k-1][n-1]+1:h[k][n]=Math.max(h[k-1][n],h[k][n-1]);for(var A=[],k=e,n=f;0<k&&0<n;)c(a[k-1],b[n-1])?(A.unshift(d(k-1,n-1)),k--,n--):h[k-1][n]>h[k][n-1]?k--:n--;return A}function yb(a){return Aa(arguments,function(a,c){return a+c},0)}
function zb(a){return yb.apply(null,arguments)/arguments.length}function Ab(a){var b=arguments.length;if(2>b)return 0;var c=zb.apply(null,arguments);return yb.apply(null,za(arguments,function(a){return Math.pow(a-c,2)}))/(b-1)}function Bb(a){return Math.sqrt(Ab.apply(null,arguments))};var Cb="StopIteration"in p?p.StopIteration:{message:"StopIteration",stack:""};function Db(){}Db.prototype.next=function(){throw Cb;};Db.prototype.rc=function(){return this};function Fb(a){if(a instanceof Db)return a;if("function"==typeof a.rc)return a.rc(!1);if(ha(a)){var b=0,c=new Db;c.next=function(){for(;;){if(b>=a.length)throw Cb;if(b in a)return a[b++];b++}};return c}throw Error("Not implemented");}
function Gb(a,b){if(ha(a))try{ya(a,b,void 0)}catch(c){if(c!==Cb)throw c;}else{a=Fb(a);try{for(;;)b.call(void 0,a.next(),void 0,a)}catch(c){if(c!==Cb)throw c;}}}function Hb(a){if(Ba(arguments,function(a){return!a.length})||!arguments.length)return new Db;var b=new Db,c=arguments,d=Ea(c.length);b.next=function(){if(d){for(var a=za(d,function(a,b){return c[b][a]}),b=d.length-1;0<=b;b--){if(d[b]<c[b].length-1){d[b]++;break}if(0==b){d=null;break}d[b]=0}return a}throw Cb;};return b};function Ib(a,b){this.o={};this.b=[];this.Pa=this.Cb=0;var c=arguments.length;if(1<c){if(c%2)throw Error("Uneven number of arguments");for(var d=0;d<c;d+=2)this.set(arguments[d],arguments[d+1])}else a&&this.addAll(a)}m=Ib.prototype;m.Cc=g("Cb");m.sa=function(){Jb(this);for(var a=[],b=0;b<this.b.length;b++)a.push(this.o[this.b[b]]);return a};function Kb(a){Jb(a);return a.b.concat()}m.Ma=function(a){return Lb(this.o,a)};m.od=function(){return 0==this.Cb};
m.clear=function(){this.o={};this.Pa=this.Cb=this.b.length=0};m.remove=function(a){return Lb(this.o,a)?(delete this.o[a],this.Cb--,this.Pa++,this.b.length>2*this.Cb&&Jb(this),!0):!1};function Jb(a){if(a.Cb!=a.b.length){for(var b=0,c=0;b<a.b.length;){var d=a.b[b];Lb(a.o,d)&&(a.b[c++]=d);b++}a.b.length=c}if(a.Cb!=a.b.length){for(var e={},c=b=0;b<a.b.length;)d=a.b[b],Lb(e,d)||(a.b[c++]=d,e[d]=1),b++;a.b.length=c}}m.get=function(a,b){return Lb(this.o,a)?this.o[a]:b};
m.set=function(a,b){Lb(this.o,a)||(this.Cb++,this.b.push(a),this.Pa++);this.o[a]=b};m.addAll=function(a){var b;if(a instanceof Ib)b=Kb(a),a=a.sa();else{b=[];var c=0,d;for(d in a)b[c++]=d;a=Ga(a)}for(c=0;c<b.length;c++)this.set(b[c],a[c])};m.forEach=function(a,b){for(var c=Kb(this),d=0;d<c.length;d++){var e=c[d],f=this.get(e);a.call(b,f,e,this)}};m.clone=function(){return new Ib(this)};
m.rc=function(a){Jb(this);var b=0,c=this.Pa,d=this,e=new Db;e.next=function(){if(c!=d.Pa)throw Error("The map has changed since the iterator was created");if(b>=d.b.length)throw Cb;var e=d.b[b++];return a?e:d.o[e]};return e};function Lb(a,b){return Object.prototype.hasOwnProperty.call(a,b)};function Mb(){return u("iPhone")&&!u("iPod")&&!u("iPad")};var Nb=Ka(),Ob=u("Trident")||u("MSIE"),Pb=u("Edge"),Qb=u("Gecko")&&!(-1!=Ha.toLowerCase().indexOf("webkit")&&!u("Edge"))&&!(u("Trident")||u("MSIE"))&&!u("Edge"),Rb=-1!=Ha.toLowerCase().indexOf("webkit")&&!u("Edge");function Sb(){var a=Ha;if(Qb)return/rv\:([^\);]+)(\)|;)/.exec(a);if(Pb)return/Edge\/([\d\.]+)/.exec(a);if(Ob)return/\b(?:MSIE|rv)[: ]([^\);]+)(\)|;)/.exec(a);if(Rb)return/WebKit\/(\S+)/.exec(a)}
var ua=function(){if(Nb&&p.opera){var a;var b=p.opera.version;try{a=b()}catch(c){a=b}return a}a="";(b=Sb())&&(a=b?b[1]:"");return Ob&&(b=(b=p.document)?b.documentMode:void 0,b>parseFloat(a))?String(b):a}(),Tb={};var Ub=Mb()||u("iPod"),Vb=u("iPad");!u("Android")||La()||u("Firefox")||Ka();var Wb=La(),Xb=u("Safari")&&!(La()||u("Coast")||Ka()||u("Edge")||u("Silk")||u("Android"))&&!(Mb()||u("iPad")||u("iPod"));/*

 Copyright 2015 The Lovefield Project Authors. All Rights Reserved.

 Licensed under the Apache License, Version 2.0 (the "License");
 you may not use this file except in compliance with the License.
 You may obtain a copy of the License at

     http://www.apache.org/licenses/LICENSE-2.0

 Unless required by applicable law or agreed to in writing, software
 distributed under the License is distributed on an "AS IS" BASIS,
 WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 See the License for the specific language governing permissions and
 limitations under the License.
*/
function Yb(){this.oe=Xb||Vb||Ub;this.$f=!(this.oe||Ob&&!Tb[10]&&!(Tb[10]=0<=ta(10)));!Ob||Tb[11]||(Tb[11]=0<=ta(11));this.Jg=Wb||Xb;this.lg=q(window.Map)&&q(window.Map.prototype.values)&&q(window.Map.prototype.forEach)&&!this.oe;this.mg=q(window.Set)&&q(window.Set.prototype.values)&&q(window.Set.prototype.forEach)&&!this.oe}var Zb;function $b(){q(Zb)||(Zb=new Yb);return Zb};function z(){this.o=new Ib;Object.defineProperty(this,"size",{get:function(){return this.o.Cc()}})}z.prototype.clear=function(){this.o.clear()};z.prototype.clear=z.prototype.clear;z.prototype.delete=function(a){return this.o.remove(a)};z.prototype["delete"]=z.prototype.delete;z.prototype.forEach=function(a,b){return this.o.forEach(a,b)};z.prototype.forEach=z.prototype.forEach;z.prototype.get=function(a){return this.o.get(a)};z.prototype.get=z.prototype.get;z.prototype.has=function(a){return this.o.Ma(a)};
z.prototype.has=z.prototype.has;z.prototype.set=function(a,b){return this.o.set(a,b)};z.prototype.set=z.prototype.set;var ac=$b().lg;function B(){return ac?new window.Map:new z}function bc(a){if(a instanceof z)return Kb(a.o);var b=0,c=Array(a.size);a.forEach(function(a,e){c[b++]=e});return c}function C(a){if(a instanceof z)return a.o.sa();var b=0,c=Array(a.size);a.forEach(function(a){c[b++]=a});return c};var cc={};r("lf.TransactionType",cc);cc.READ_ONLY=0;cc.READ_WRITE=1;function dc(a,b){this.ve=a;this.Ra=b||null;this.U=x()}dc.prototype.ia=function(){return 0==this.ve?this.uc():ec(this)};function ec(a){try{fc(a.Ra)}catch(b){return cb(b)}return gc(a).then(function(a){this.Ra.ia();return a}.bind(a))}function gc(a){hc(a);ic(a);return a.uc()}
function hc(a){a.Ra.tb.forEach(function(a,c){var d=this.Ra.ca().get(c),d=this.I(d.getName(),d.Fb.bind(d)),e=C(a.za).map(function(a){return a.id()});0<e.length&&d.remove(e).ue(this.Ud,this);e=C(a.ma).map(function(a){return a[1]}).concat(C(a.va));d.put(e).ue(this.Ud,this)},a)}function ic(a){jc(a.Ra).forEach(function(a){var c=this.I(a.getName(),sb),d;c.get([-1]).then(function(a){d=a;return c.remove([])}).then(function(){c.put(d);c.put(a.Ga())},this.Ud.bind(this))},a)}dc.prototype.Ud=function(a){this.U.reject(a)};function kc(a){this.Cg=a}kc.prototype.toString=g("Cg");var lc=new kc("backstore"),mc=new kc("cache"),nc=new kc("indexstore"),oc=new kc("engine"),pc=new kc("runner"),qc=new kc("observerregistry"),rc=new kc("schema");function sc(a){if(a.sa&&"function"==typeof a.sa)return a.sa();if(ia(a))return a.split("");if(ha(a)){for(var b=[],c=a.length,d=0;d<c;d++)b.push(a[d]);return b}return Ga(a)};function tc(a){this.o=new Ib;a&&this.addAll(a)}function uc(a){var b=typeof a;return"object"==b&&a||"function"==b?"o"+ka(a):b.substr(0,1)+a}m=tc.prototype;m.Cc=function(){return this.o.Cc()};m.add=function(a){this.o.set(uc(a),a)};m.addAll=function(a){a=sc(a);for(var b=a.length,c=0;c<b;c++)this.add(a[c])};m.remove=function(a){return this.o.remove(uc(a))};m.clear=function(){this.o.clear()};m.od=function(){return this.o.od()};m.contains=function(a){return this.o.Ma(uc(a))};m.sa=function(){return this.o.sa()};
m.clone=function(){return new tc(this)};m.rc=function(){return this.o.rc(!1)};function vc(a){this.Yb=new tc(a);Object.defineProperty(this,"size",{get:function(){return this.Yb.Cc()}})}vc.prototype.add=function(a){this.Yb.add(a)};vc.prototype.add=vc.prototype.add;vc.prototype.clear=function(){this.Yb.clear()};vc.prototype.clear=vc.prototype.clear;vc.prototype.delete=function(a){return this.Yb.remove(a)};vc.prototype["delete"]=vc.prototype.delete;vc.prototype.forEach=function(a,b){this.Yb.sa().forEach(a,b)};vc.prototype.has=function(a){return this.Yb.contains(a)};
vc.prototype.has=vc.prototype.has;var wc=$b().mg;function D(a){return wc?q(a)?new window.Set(a):new window.Set:new vc(a)}function E(a){if(a instanceof vc)return a.Yb.sa();var b=0,c=Array(a.size);a.forEach(function(a){c[b++]=a});return c}function xc(a,b){if(b.size>a.size)return!1;var c=!0;b.forEach(function(b){c=c&&a.has(b)});return c};function yc(a,b){this.oa=a;this.s=b||{}}function zc(a){var b=D();a.forEach(function(a){b.add(a>>9)});return E(b)}yc.prototype.Z=g("oa");function Ac(a,b){b.forEach(function(a){this.s[a.id()]=a.Ga()},a)}function Bc(a,b){b.forEach(function(a){delete this.s[a]},a)}yc.prototype.Ga=function(){return{id:this.oa,value:JSON.stringify(this.s)}};function Cc(a){return new yc(a.id,JSON.parse(a.value))};function Dc(a,b,c){this.Y=a;this.Eb=b;this.nf=c}m=Dc.prototype;m.get=function(a){if(0==a.length)return this.Sd();var b=this.Eb;return Ec(this,a).then(function(c){return a.map(function(a){var e=c.get(a>>9);return b(e.s[a])})})};function Ec(a,b){var c=B(),d=x(),e=zc(b).map(function(a){return new v(function(b,d){var e;try{e=this.Y.get(a)}catch(A){d(A);return}e.onerror=d;e.onsuccess=function(a){a=Cc(a.target.result);c.set(a.Z(),a);b()}},this)},a);fb(e).then(function(){d.resolve(c)});return d.da}
m.Sd=function(){return new v(function(a,b){var c=[],d;try{d=this.Y.openCursor()}catch(e){b(e);return}d.onerror=b;d.onsuccess=function(){var b=d.result;if(b){var f;f=Cc(b.value).s;for(var h in f)c.push(this.Eb(f[h]));b.continue()}else a(c)}.bind(this)},this)};m.Ub=function(a){return new v(function(b,c){var d;try{d=a()}catch(e){c(e);return}d.onsuccess=b;d.onerror=c},this)};
m.put=function(a){if(0==a.length)return w();var b=B();a.forEach(function(a){var d;d=a.id()>>9;var e=b.get(d)||null;null===e&&(e=this.nf(this.Y.name,d));Ac(e,[a]);b.set(d,e)},this);a=C(b).map(function(a){return this.Ub(function(){return this.Y.put(a.Ga())}.bind(this))},this);return fb(a)};
m.remove=function(a){if(0==a.length)return this.Ub(function(){return this.Y.clear()}.bind(this));var b=B();a.forEach(function(a){var d=a>>9,e=b.get(d)||null;null===e&&(e=this.nf(this.Y.name,d));Bc(e,[a]);b.set(d,e)},this);a=C(b).map(function(a){return this.Ub(function(){return 0==Object.keys(a.s).length?this.Y.delete(a.Z()):this.Y.put(a.Ga())}.bind(this))},this);return fb(a)};function Fc(a,b,c){a=a.l(mc);var d=[c<<9,(c+1<<9)-1];b=a.$a(b,d[0],d[1]);c=new yc(c);Ac(c,b);return c}
function Gc(a,b){return new yc(b)};function Hc(){};function Ic(a){this.W=a.l(mc);this.F=a.l(nc);this.i=a.l(rc)}Ic.prototype.update=function(a){a.forEach(function(a){Jc(this,a);Kc(this,a)},this)};function Kc(a,b){var c=b.getName();b.za.forEach(function(a,b){this.W.remove(c,b)},a);b.va.forEach(function(a){this.W.set(c,a)},a);b.ma.forEach(function(a){this.W.set(c,a[1])},a)}function Jc(a,b){var c=a.i.table(b.getName());Lc(b).forEach(function(a){Mc(this,c,a)},a)}
function Mc(a,b,c){var d=a.F.oc.get(b.getName())||[],e=0;d.forEach(function(a){try{Nc(a,c),e++}catch(b){throw d.slice(0,e).forEach(function(a){Nc(a,[c[1],c[0]])},this),b;}},a)}function Nc(a,b){var c=null===b[1]?void 0:b[1].Hb(a.getName()),d=null===b[0]?void 0:b[0].Hb(a.getName());if(!q(d)&&q(c))a.add(c,b[1].id());else if(q(d)&&q(c)){if(null===c||null===d){if(c==d)return}else if(0==a.fc().compare(d,c))return;a.add(c,b[1].id());a.remove(d,b[0].id())}else q(d)&&!q(c)&&a.remove(d,b[0].id())};var Oc={};r("lf.ConstraintAction",Oc);Oc.RESTRICT=0;Oc.CASCADE=1;var Pc={};r("lf.ConstraintTiming",Pc);Pc.IMMEDIATE=0;Pc.DEFERRABLE=1;var Qc={};r("lf.Order",Qc);Qc.DESC=0;Qc.ASC=1;var Rc={};r("lf.Type",Rc);Rc.ARRAY_BUFFER=0;Rc.BOOLEAN=1;Rc.DATE_TIME=2;Rc.INTEGER=3;Rc.NUMBER=4;Rc.STRING=5;Rc.OBJECT=6;var Sc={0:null,1:!1,2:Object.freeze(new Date(0)),3:0,4:0,5:"",6:null};r("lf.type.DEFAULT_VALUES",Sc);function F(a,b){this.code=a;this.message="http://sn.im/2a0j3wn?c="+a;if(1<arguments.length)for(var c=1;c<=Math.min(4,arguments.length-1);++c)this.message+="&p"+(c-1)+"="+encodeURIComponent(arguments[c].toString().slice(0,64))}t(F,Error);function Tc(){this.o=B();this.size=0}m=Tc.prototype;m.has=function(a){return this.o.has(a)};m.set=function(a,b){var c=this.o.get(a)||null;null===c&&(c=D(),this.o.set(a,c));c.has(b)||(c.add(b),this.size++);return this};m.Xb=function(a,b){var c=this.o.get(a)||null;null===c&&(c=D(),this.o.set(a,c));b.forEach(function(a){c.has(a)||(c.add(a),this.size++)},this);return this};m.ae=function(a){a.keys().forEach(function(b){var c=a.get(b);this.Xb(b,c)},this);return this};
m.delete=function(a,b){var c=this.o.get(a,null);if(null===c)return!1;var d=c.delete(b);d&&(--this.size,0==c.size&&this.o.delete(a));return d};m.get=function(a){a=this.o.get(a)||null;return null===a?null:E(a)};m.clear=function(){this.o.clear();this.size=0};m.keys=function(){return bc(this.o)};m.values=function(){var a=[];this.o.forEach(function(b){a.push.apply(a,E(b))});return a};function Uc(a){this.F=a.l(nc);this.i=a.l(rc);this.W=a.l(mc);this.dd=null}function Wc(a,b,c){var d=b.Gb().og;c.forEach(function(a){d.forEach(function(b){if(null==a.s[b.getName()])throw new F(202,b.m());},this)},a)}function Xc(a,b,c,d){b.Gb().Td().forEach(function(a){a.timing==d&&Yc(this,a,c)},a)}function Yc(a,b,c){var d=Zc(a,b);c.forEach(function(a){if($c(a[0],a[1],b.name)&&(a=a[1].s[b.hb],null!==a&&!d.Ma(a)))throw new F(203,b.name);},a)}
function Zc(a,b){null===a.dd&&(a.dd=B());var c=a.dd.get(b.name)||null;null===c&&(c=a.i.table(b.Sa)[b.mc].Aa(),c=a.F.get(c.m()),a.dd.set(b.name,c));return c}function $c(a,b,c){return(null===a?null!==b:null===b)||a.Hb(c)!=b.Hb(c)}function ad(a,b,c,d){b=bd(a.i.info(),b.getName(),0);null!==b&&(b=b.filter(function(a){return a.timing==d}),0!=b.length&&cd(a,b,c,function(a,b,c){if(b.Ma(c))throw new F(203,a.name);}))}
function dd(a,b,c){b=bd(a.i.info(),b.getName(),1);if(null===b)return null;var d=new Tc;cd(a,b,c,function(a,b,c){b=b.get(c);0<b.length&&d.Xb(a.Ge,b)});return d}function ed(a,b,c){var d=new Tc;cd(a,c,b,function(a,b,c,k){b.get(c).forEach(function(b){d.set(b,{Qd:a,tg:k[1]})})});return d}function cd(a,b,c,d){b.forEach(function(a){var b=this.F.get(a.name),h=Zc(this,a);c.forEach(function(c){$c(c[0],c[1],h.getName())&&d(a,b,c[0].s[a.mc],c)},this)},a)}
function fd(a,b,c,d){0!=c.length&&(c=c.map(function(a){return[null,a]}),Xc(a,b,c,d))}function gd(a,b,c,d){0!=c.length&&(Xc(a,b,c,d),ad(a,b,c,d))}function hd(a,b,c,d){0!=c.length&&(c=c.map(function(a){return[a,null]}),ad(a,b,c,d))}
function id(a,b,c){var d={te:[],pf:new Tc},e=new Tc;e.Xb(b.getName(),c.map(function(a){return a.id()}));do{var f=new Tc;e.keys().forEach(function(a){var b=this.i.table(a);a=e.get(a).map(function(a){return[this.W.get(a),null]},this);b=dd(this,b,a);null!==b&&(d.te.unshift.apply(d.te,b.keys()),f.ae(b))},a);e=f;d.pf.ae(e)}while(0<e.size);return d};function jd(a){this.va=B();this.ma=B();this.za=B();this.w=a}m=jd.prototype;m.getName=g("w");m.add=function(a){if(this.za.has(a.id())){var b=[this.za.get(a.id()),a];this.ma.set(a.id(),b);this.za.delete(a.id())}else this.va.set(a.id(),a)};m.modify=function(a){var b=a[1],c=a[0].id();this.va.has(c)?this.va.set(c,b):(this.ma.has(c)&&(a=[this.ma.get(a[0].id())[0],b]),this.ma.set(c,a))};
m.delete=function(a){if(this.va.has(a.id()))this.va.delete(a.id());else if(this.ma.has(a.id())){var b=this.ma.get(a.id())[0];this.ma.delete(a.id());this.za.set(a.id(),b)}else this.za.set(a.id(),a)};m.ae=function(a){a.va.forEach(function(a){this.add(a)},this);a.ma.forEach(function(a){this.modify(a)},this);a.za.forEach(function(a){this.delete(a)},this)};
function Lc(a){var b=[];a.va.forEach(function(a){b.push([null,a])});a.ma.forEach(function(a){b.push(a)});a.za.forEach(function(a){b.push([a,null])});return b}m.toString=function(){return"["+bc(this.va).toString()+"], ["+bc(this.ma).toString()+"], ["+bc(this.za).toString()+"]"};function kd(a){var b=new jd(a.w);a.va.forEach(function(a){b.delete(a)});a.za.forEach(function(a){b.add(a)});a.ma.forEach(function(a){b.modify([a[1],a[0]])});return b}
m.od=function(){return 0==this.va.size&&0==this.za.size&&0==this.ma.size};function ld(a,b){this.aa=B();b.forEach(function(a){this.aa.set(a.getName(),a)},this);this.i=a.l(rc);this.W=a.l(mc);this.F=a.l(nc);this.xa=new Uc(a);this.md=new Ic(a);this.tb=B()}function jc(a){var b=[];bc(a.tb).map(function(a){return this.aa.get(a)},a).forEach(function(a){a.Bb()&&(a.Ba().forEach(function(a){b.push(this.F.get(a.m()))},this),b.push(this.F.get(a.getName()+".#")))},a);return b}m=ld.prototype;m.ca=g("aa");
m.zb=function(a,b){md(this,a);Wc(this.xa,a,b);fd(this.xa,a,b,0);for(var c=0;c<b.length;c++)nd(this,a,[null,b[c]])};function nd(a,b,c){var d=b.getName(),e=a.tb.get(d)||new jd(d);a.tb.set(d,e);try{Mc(a.md,b,c)}catch(h){throw h;}b=c[0];var f=c[1];null===b&&null!==f?(a.W.set(d,f),e.add(f)):null!==b&&null!==f?(a.W.set(d,f),e.modify(c)):null!==b&&null===f&&(a.W.remove(d,b.id()),e.delete(b))}
m.update=function(a,b){md(this,a);Wc(this.xa,a,b);var c=b.map(function(a){return[this.W.get(a.id()),a]},this);od(this,a,c);gd(this.xa,a,c,0);c.forEach(function(b){nd(this,a,b)},this)};m.Vd=function(a,b){md(this,a);Wc(this.xa,a,b);for(var c=0;c<b.length;c++){var d=b[c],e=null,f,h=a.Gb().gd();if(null===h)f=null;else{f=this.xa;var h=h.m(),k=d.Hb(h);f=f.F.get(h).get(k);f=0==f.length?null:f[0]}null!=f?(e=this.W.get(f),d.oa=f,gd(this.xa,a,[[e,d]],0)):fd(this.xa,a,[d],0);nd(this,a,[e,d])}};
m.remove=function(a,b){md(this,a);pd(this,a,b);hd(this.xa,a,b,0);for(var c=0;c<b.length;c++)nd(this,a,[b[c],null])};function od(a,b,c){b=bd(a.i.info(),b.getName(),1);if(null!==b){var d=ed(a.xa,c,b);d.keys().forEach(function(a){d.get(a).forEach(function(b){var c=this.i.table(b.Qd.Ge),d=this.W.get(a),n=c.Fb(d.Ga());n.s[b.Qd.hb]=b.tg.s[b.Qd.mc];nd(this,c,[d,n])},this)},a)}}
function pd(a,b,c){if(null!==bd(a.i.info(),b.getName(),1)){b=id(a.xa,b,c);var d=b.pf;b.te.forEach(function(a){var b=this.i.table(a);a=d.get(a).map(function(a){return this.W.get(a)},this);hd(this.xa,b,a,0);a.forEach(function(a){nd(this,b,[a,null])},this)},a)}}function fc(a){a.tb.forEach(function(a){var c=this.aa.get(a.getName());fd(this.xa,c,C(a.va),1);hd(this.xa,c,C(a.za),1);gd(this.xa,c,C(a.ma),1)},a)}m.ia=aa();m.Kb=function(){var a=C(this.tb).map(function(a){return kd(a)});this.md.update(a)};
function md(a,b){if(!a.aa.has(b.getName()))throw new F(106,b.getName());};function qd(a,b,c,d){this.c=a;this.A=b;this.ea=this.c==G?!1:c;this.la=this.A==G?!1:d}var G=new (aa());qd.prototype.toString=function(){return(this.ea?"(":"[")+(this.c==G?"unbound":this.c)+", "+(this.A==G?"unbound":this.A)+(this.la?")":"]")};function rd(a){if(sd(a))return[];var b=null,c=null;a.c==G||(b=new qd(G,a.c,!1,!a.ea));a.A==G||(c=new qd(a.A,G,!a.la,!1));return[b,c].filter(function(a){return null!==a})}qd.prototype.reverse=function(){return new qd(this.A,this.c,this.la,this.ea)};
function td(a,b){var c=ud(a.c,b.c,!0,a.ea,b.ea);if(0==c)return!0;var d=-1==c?a:b,c=1==c?a:b;return d.A==G||d.A>c.c||d.A==c.c&&!d.la&&!c.ea}function vd(){return new qd(G,G,!1,!1)}function sd(a){return a.c==G&&a.A==G}function wd(a){return a.c==a.A&&a.c!=G&&!a.ea&&!a.la}qd.prototype.contains=function(a){var b=this.A==G||a<this.A||a==this.A&&!this.la;return(this.c==G||a>this.c||a==this.c&&!this.ea)&&b};
function ud(a,b,c,d,e){function f(a){return c?a:1==a?-1:1}d=d||!1;e=e||!1;return a==G?b==G?(d?!e:e)?d?f(1):f(-1):0:f(-1):b==G?f(1):a<b?-1:a==b?(d?!e:e)?d?f(1):f(-1):0:1}function xd(a,b){var c=ud(a.c,b.c,!0,a.ea,b.ea);0==c&&(c=ud(a.A,b.A,!1,a.la,b.la));return c};function H(a,b){this.entries=a;this.M=D(b);this.Ya=null}function I(a){return E(a.M)}function yd(a){return a.entries.map(function(a){return a.ua.s})}function zd(a){return a.entries.map(function(a){return a.ua.id()})}function Ad(a,b){return a.Ya.get(b.m())}var Bd=null;function Cd(){null===Bd&&(Bd=new H([],[]));return Bd}
function Dd(a){if(0==a.length)return Cd();for(var b=a.reduce(function(a,b){return a+b.entries.length},0),c=Array(b),d=0,b=a.map(function(a){var b=B();a.entries.forEach(function(a){c[d++]=a;b.set(a.id,a)});return b}),e=B(),f=0;f<c.length;f++)b.every(function(a){return a.has(c[f].id)})&&e.set(c[f].id,c[f]);return new H(C(e),E(a[0].M))}function Ed(a){if(0==a.length)return Cd();var b=B();a.forEach(function(a){a.entries.forEach(function(a){b.set(a.id,a)})});return new H(C(b),E(a[0].M))}
function Fd(a,b){var c=1<b.length,d=a.map(function(a){return new Gd(a,c)});return new H(d,b)}function Gd(a,b){this.ua=a;this.id=Hd++;this.Xd=b}var Hd=0;function J(a,b){var c=b.Za();return null!==c&&a.ua.s.hasOwnProperty(c)?a.ua.s[c]:a.Xd?a.ua.s[K(b.I())][b.getName()]:a.ua.s[b.getName()]}function Id(a,b,c){var d=b.Za();if(null!=d)a.ua.s[d]=c;else if(a.Xd){var d=K(b.I()),e=a.ua.s[d];null==e&&(e={},a.ua.s[d]=e);e[b.getName()]=c}else a.ua.s[b.getName()]=c}
function Jd(a,b,c,d){function e(a,b){if(a.Xd){var c=a.ua.s,d;for(d in c)f[d]=c[d]}else f[b[0]]=a.ua.s}var f={};e(a,b);e(c,d);a=new y(-1,f);return new Gd(a,!0)};r("lf.bind",function(a){return new Kd(a)});function Kd(a){this.ga=a}r("lf.Binder",Kd);Kd.prototype.Aa=g("ga");function Ld(){this.We=Md();var a=Nd();this.ic=B();this.ic.set(1,Od());this.ic.set(2,Pd());this.ic.set(4,a);this.ic.set(3,a);this.ic.set(5,Qd())}Ld.Dc=function(){return Ld.Se?Ld.Se:Ld.Se=new Ld};function Rd(a,b,c){return(a.ic.get(b)||null).get(c)||null}function Md(){function a(a){return a}var b=B();b.set(1,function(a){return null===a?null:a?1:0});b.set(2,function(a){return null===a?null:a.getTime()});b.set(3,a);b.set(4,a);b.set(5,a);return b}
function Od(){var a=B();a.set("eq",function(a,c){return a==c});a.set("neq",function(a,c){return a!=c});return a}
function Nd(){var a=Od();a.set("between",function(a,c){return null===a||null===c[0]||null===c[1]?!1:a>=c[0]&&a<=c[1]});a.set("gte",function(a,c){return null===a||null===c?!1:a>=c});a.set("gt",function(a,c){return null===a||null===c?!1:a>c});a.set("in",function(a,c){return-1!=c.indexOf(a)});a.set("lte",function(a,c){return null===a||null===c?!1:a<=c});a.set("lt",function(a,c){return null===a||null===c?!1:a<c});return a}
function Qd(){var a=Nd();a.set("match",function(a,c){return null===a||null===c?!1:(new RegExp(c)).test(a)});return a}
function Pd(){var a=B();a.set("between",function(a,c){return null===a||null===c[0]||null===c[1]?!1:a.getTime()>=c[0].getTime()&&a.getTime()<=c[1].getTime()});a.set("eq",function(a,c){return(null===a?-1:a.getTime())==(null===c?-1:c.getTime())});a.set("gte",function(a,c){return null===a||null===c?!1:a.getTime()>=c.getTime()});a.set("gt",function(a,c){return null===a||null===c?!1:a.getTime()>c.getTime()});a.set("in",function(a,c){return c.some(function(c){return c.getTime()==a.getTime()})});a.set("lte",
function(a,c){return null===a||null===c?!1:a.getTime()<=c.getTime()});a.set("lt",function(a,c){return null===a||null===c?!1:a.getTime()<c.getTime()});a.set("neq",function(a,c){return(null===a?-1:a.getTime())!=(null===c?-1:c.getTime())});return a};function L(){this.g=this.C=null}var Sd=[];L.prototype.getParent=g("C");L.prototype.jb=function(){for(var a=this;!fa(a.getParent());)a=a.getParent();return a};function Td(a){for(var b=0;!fa(a.getParent());)b++,a=a.getParent();return b}function M(a){return a.g||Sd}function Ud(a,b){return M(a)[b]||null}function Vd(a,b,c){b.C=a;null===a.g?a.g=[b]:a.g.splice(c,0,b)}function Wd(a,b){b.C=a;null===a.g?a.g=[b]:a.g.push(b)}
function Xd(a,b){var c=a.g&&a.g[b];return c?(c.C=null,a.g.splice(b,1),0==a.g.length&&(a.g=null),c):null}L.prototype.removeChild=function(a){return Xd(this,M(this).indexOf(a))};function Yd(a,b,c){Ud(a,c).C=null;b.C=a;a.g[c]=b}function Zd(a,b,c){!1!==b.call(c,a)&&M(a).forEach(function(a){Zd(a,b,c)})};function $d(){L.call(this);this.oa=ae++}t($d,L);var ae=0;$d.prototype.Z=g("oa");function be(a,b,c){$d.call(this);this.N=a;this.value=b;this.G=c;this.yc=Rd(Ld.Dc(),this.N.H(),this.G);this.ab=!1;this.dc=b}t(be,$d);m=be.prototype;m.Mb=function(){var a=new be(this.N,this.value,this.G);a.dc=this.dc;a.yd(this.ab);var b=this.Z();a.oa=b;return a};m.ib=function(a){return null!=a?(a.push(this.N),a):[this.N]};m.yd=ba("ab");function ce(a){var b=!1;a.value instanceof Kd||(b="array"==ea(a.value)?!a.value.some(function(a){return a instanceof Kd}):!0);if(!b)throw new F(501);}
m.eval=function(a){ce(this);if("in"==this.G)return de(this,a);var b=a.entries.filter(function(a){return this.yc(J(a,this.N),this.value)!=this.ab},this);return new H(b,I(a))};m.bind=function(a){if(this.dc instanceof Kd){var b=this.dc.Aa();if(a.length<=b)throw new F(510);this.value=a[b]}else"array"==ea(this.dc)&&(this.value=this.dc.map(function(b){if(b instanceof Kd){var d=b.Aa();if(a.length<=d)throw new F(510);return a[b.Aa()]}return b}))};
function de(a,b){var c=D(a.value),d=function(a){return null===a?!1:c.has(a)!=this.ab}.bind(a),e=b.entries.filter(function(a){return d(J(a,this.N))},a);return new H(e,I(b))}m.toString=function(){return"value_pred("+this.N.m()+" "+this.G+(this.ab?"(complement)":"")+" "+this.value+")"};function ee(a,b){return 2==a.N.H()?b.getTime():b};function fe(a){this.ba=a;this.$c=this.Da=null}function ge(a,b){null===a.Da&&null!=a.u&&(a.Da=he(a.u));return a.Da.get(b)||null}function he(a){var b=B();Zd(a,function(a){b.set(a.Z(),a)});return b}function ie(a,b){b.u&&(a.u=b.u.Mb());a.$c=b}fe.prototype.bind=function(){return this};function je(a,b){var c=a.u;null!=c&&Zd(c,function(a){a instanceof be&&a.bind(b)})};function ke(a){fe.call(this,a)}t(ke,fe);function le(a){var b="";a.forEach(function(c,d){b+=c.N.m()+" ";b+=1==c.mb?"ASC":"DESC";d<a.length-1&&(b+=", ")});return b}ke.prototype.ca=function(){return D(this.c)};ke.prototype.clone=function(){var a=new ke(this.ba);ie(a,this);this.f&&(a.f=this.f.slice());this.c&&(a.c=this.c.slice());a.X=this.X;a.L=this.L;this.O&&(a.O=this.O.slice());this.ja&&(a.ja=this.ja.slice());this.Sb&&(a.Sb=this.Sb);this.$b&&(a.$b=this.$b);a.Ab=this.Ab;return a};
ke.prototype.bind=function(a){ke.eb.bind.call(this,a);null!=this.Sb&&(this.X=a[this.Sb.Aa()]);null!=this.$b&&(this.L=a[this.$b.Aa()]);je(this,a);return this};function me(a,b){this.Ea=a;this.aa=b}me.prototype.jb=g("Ea");me.prototype.ca=g("aa");function ne(a){var b=D();a.forEach(function(a){a.ca().forEach(b.add.bind(b))});return b};function oe(a,b){this.global=a;this.La=a.l(lc);this.vd=b.map(function(a){return a.context});this.ff=b.map(function(a){return a.ie});this.Ld=ne(this.ff);this.we=pe(this);this.cb=x()}function pe(a){return a.vd.some(function(a){return!(a instanceof ke)})?1:0}m=oe.prototype;
m.exec=function(){function a(){var f=d.shift();if(f){var h=e[c.length];return f.jb().exec(b,h).then(function(b){c.push(b[0]);return a()})}return w()}var b=0==this.we?void 0:new ld(this.global,this.Ld),c=[],d=this.ff.slice(),e=this.vd;return a().then(function(){return this.La.Db(this.we,E(this.Ld),b).ia()}.bind(this)).then(function(){this.fe(c);return c}.bind(this),function(a){null!=b&&b.Kb();throw a;})};m.H=g("we");m.ca=g("Ld");m.Nb=g("cb");m.Z=function(){return ka(this)};m.fe=aa();function qe(a,b){oe.call(this,a,b);this.Jb=a.l(qc)}t(qe,oe);qe.prototype.getPriority=l(0);qe.prototype.fe=function(a){this.vd.forEach(function(b,c){ue(this.Jb,b,a[c])},this)};function ve(a,b){this.h=a;this.Jb=a.l(qc);this.Fa=a.l(pc);this.md=new Ic(a);this.tb=b;var c=a.l(rc),d=this.tb.map(function(a){return c.table(a.getName())});this.aa=D(d);this.cb=x()}m=ve.prototype;m.exec=function(){this.md.update(this.tb);this.Oc();return w()};m.H=l(1);m.ca=g("aa");m.Nb=g("cb");m.Z=function(){return ka(this)};m.getPriority=l(1);m.Oc=function(){var a=we(this.Jb,this.aa);0!=a.length&&(a=new qe(this.h,a),xe(this.Fa,a))};function ye(a){this.h=a;this.La=a.l(lc);this.Fa=a.l(pc)}ye.prototype.de=function(a){a=new ve(this.h,a);xe(this.Fa,a)};function N(a,b){this.Pa=a;this.j=b;this.Va=B()}r("lf.backstore.FirebaseRawBackStore",N);N.prototype.hd=g("j");N.prototype.jd=function(){throw new F(351);};function ze(a,b){var c=x(),d=a;b.length&&(d=a.child(b));d.once("value",function(a){c.resolve(a.val())},function(a){c.reject(a)});return c.da}function Ae(a,b,c){function d(a){a?e.reject(a):e.resolve()}c=c||!1;var e=x();c?a.set(b,d):a.update(b,d);return e.da}
N.prototype.Ha=function(a){return ze(this.j,"@rev/R").then(function(a){this.Na=a;return ze(this.j,"@table")}.bind(this)).then(function(b){var c=0,d;for(d in b)this.Va.set(d,b[d]),b[d]>c&&(c=b[d]);a.ra().forEach(function(a){this.Va.has(a.getName())||(b[a.getName()]=++c)},this);d=this.j.child("@table");return Ae(d,b)}.bind(this))};
function Be(a,b,c){var d=a.Va.get(b);return null!=d?function(){var a={},b=x();this.j.orderByChild("T").equalTo(d).once("value",function(d){d.forEach(function(b){var d=c(b.val());a[parseInt(b.key(),10)]=d});b.resolve(a)});return b.da}.call(a).then(function(a){a["@rev"]={R:++this.Na};return Ae(this.j,a)}.bind(a)):w()}N.prototype.wc=function(a){return Be(this,a,l(null)).then(function(){this.Va.delete(a);return Ae(this.j.child("@table/"+a),null,!0)}.bind(this))};N.prototype.dropTable=N.prototype.wc;
N.prototype.sc=function(a,b,c){return Be(this,a,function(a){var e=a.P;e[b]=c;return{R:this.Na+1,T:a.T,P:e}}.bind(this))};N.prototype.addTableColumn=N.prototype.sc;N.prototype.xc=function(a,b){return Be(this,a,function(a){var d=a.P;delete d[b];return{R:this.Na+1,T:a.T,P:d}}.bind(this))};N.prototype.dropTableColumn=N.prototype.xc;N.prototype.Nc=function(a,b,c){return Be(this,a,function(a){var e=a.P;e[c]=e[b];delete e[b];return{R:this.Na+1,T:a.T,P:e}}.bind(this))};N.prototype.renameTableColumn=N.prototype.Nc;
N.prototype.vb=function(){throw new F(351);};N.prototype.createRow=N.prototype.vb;N.prototype.Gc=g("Pa");N.prototype.getVersion=N.prototype.Gc;N.prototype.gc=function(a){var b=x();a=this.Va.get(a);this.j.orderByChild("T").equalTo(a).once("value",function(a){var d=[];a.forEach(function(a){d.push(a.val().P)});b.resolve(d)});return b.da};N.prototype.dump=function(){var a={},b=bc(this.Va).map(function(b){return this.gc(b).then(function(d){a[b]=d})}.bind(this));return fb(b).then(function(){return a})};
N.prototype.dump=N.prototype.dump;function Ce(a,b,c){dc.call(this,b,c);this.j=a}t(Ce,dc);Ce.prototype.I=function(a){return this.j.Ec(a)};
Ce.prototype.uc=function(){if(0==this.ve)return this.U.resolve(),this.U.da;var a=this.Ra.tb;if(0==a.size)this.U.resolve();else{var b=this.j.Na+1;this.j.Na=b;var c={"@rev":{R:b}};a.forEach(function(a,e){var f=this.j.Va.get(e);a.va.forEach(function(a,d){c[d]={R:b,T:f,P:a.s}});a.ma.forEach(function(a,d){c[d]={R:b,T:f,P:a[1].s}});a.za.forEach(function(a,b){c[b]=null})},this);this.j.j.update(c,function(c){null===c?this.U.resolve():(this.j.Na=b-1,c=C(a).map(function(a){return De(this.j,a.getName())},this),
fb(c).then(this.U.reject.bind(this.U),this.U.reject.bind(this.U)))}.bind(this))}return this.U.da};function Ee(){this.ya=B()}function Fe(a,b){if(0==b.length)return C(a.ya);var c=[];b.forEach(function(a){a=this.ya.get(a)||null;null===a||c.push(a)},a);return c}Ee.prototype.getData=g("ya");Ee.prototype.get=function(a){return w(Fe(this,a))};function Ge(a,b){b.forEach(function(a){this.ya.set(a.id(),a)},a)}Ee.prototype.put=function(a){Ge(this,a);return w()};function He(a,b){0==b.length||b.length==a.ya.size?a.ya.clear():b.forEach(function(a){this.ya.delete(a)},a)}
Ee.prototype.remove=function(a){He(this,a);return w()};function Ie(a){return 0==a.ya.size?0:bc(a.ya).reduce(function(a,c){return a>c?a:c},0)};function Je(a,b){this.i=a;this.Cf=b;this.Mc=B();this.Na=-1;this.M=B();this.Va=B();this.Id=null}m=Je.prototype;
m.Ha=function(a){this.j=this.Cf.child(this.i.name());var b=a||function(){return w()};return ze(this.j,"@db/version").then(function(a){return null===a?Ae(this.j,Ke(this),!0).then(function(){var a=new N(0,this.j);return b(a)}.bind(this)):a==this.i.version()?ze(this.j,"@rev/R").then(function(a){this.Na=a;return ze(this.j,"@table")}.bind(this)).then(function(a){for(var b in a)this.Va.set(b,a[b]);a=this.i.ra().map(function(a){return De(this,a.getName())},this);return fb(a)}.bind(this)).then(function(){Le(this);
Me(this);return w()}.bind(this)):this.ge(a,b).then(function(){return this.Ha()}.bind(this))}.bind(this))};m.ge=function(a,b){var c=new N(a,this.j);return c.Ha(this.i).then(function(){return w()}.bind(this)).then(function(){return b(c)}).then(function(){var a=this.j.child("@db");return Ae(a,{version:this.i.version()},!0)}.bind(this))};
function Me(a){a.j.off();a.j.on("child_removed",a.qg.bind(a));a.Jd&&(a.Jd.off(),a.Mc.clear());a.Jd=a.j.orderByChild("R").startAt(a.Na+1);a.Jd.on("value",a.de.bind(a))}function Le(a){qb=C(a.M).map(function(a){return Ie(a)}).reduce(function(a,c){return a>c?a:c},0)+1}m.qg=function(a){var b=a.val(),c=this.Mc.get(b.T)||null;null===c&&(c=D(),this.Mc.set(b.T,c));c.add(parseInt(a.key(),10))};
m.de=function(a){var b=a.child("@rev/R").val();null!=b&&b!=this.Na&&(this.Na=b,a=Ne(this,a),a.forEach(function(a){var b=this.M.get(a.getName()),e=bc(a.za);0<e.length&&He(b,e);var f=C(a.va);a.ma.forEach(function(a){f.push(a[1])});Ge(b,f)},this),0<a.length&&this.Jc(a),Me(this))};
function Ne(a,b){var c=D(),d=B();a.Va.forEach(function(a,b){var h=this.M.get(b),k=new jd(b);if(this.Mc.has(a)){var n=E(this.Mc.get(a));n.forEach(function(a){c.add(a)});Fe(h,n).forEach(function(a){k.delete(a)})}d.set(a,k)}.bind(a));b.forEach(function(a){if("@rev"!=a.key()){var b=parseInt(a.key(),10);if(!c.has(b)){a=a.val();var h=d.get(a.T),k=this.M.get(h.getName());k.getData().has(b)?h.modify([Fe(k,[b])[0],new y(b,a.P)]):h.add(new y(b,a.P))}}}.bind(a));return C(d).filter(function(a){return!a.od()})}
function De(a,b){var c=x(),d=a.Va.get(b);a.j.orderByChild("T").equalTo(d).once("value",function(a){var d=new Ee,h=[];a.forEach(function(a){h.push(new y(parseInt(a.key(),10),a.val().P))});Ge(d,h);this.M.set(b,d);c.resolve()}.bind(a));return c.da}function Ke(a){var b={};b["@db"]={version:a.i.version()};b["@rev"]={R:1};a.Na=1;b["@table"]={};a.i.ra().forEach(function(a,d){var e=a.getName();b["@table"][e]=d;this.M.set(e,new Ee);this.Va.set(e,d)},a);return b}m.Db=function(a,b,c){return new Ce(this,a,c)};
m.Ec=function(a){var b=this.M.get(a)||null;if(null!==b)return b;throw new F(101,a);};m.close=aa();m.subscribe=ba("Id");m.Jc=function(a){null!=this.Id&&this.Id(a)};function P(a,b,c,d){this.j=b;this.Xa=c;this.Pa=a;this.Xc=d}r("lf.backstore.IndexedDBRawBackStore",P);P.prototype.hd=g("j");P.prototype.getRawDBInstance=P.prototype.hd;P.prototype.jd=g("Xa");P.prototype.getRawTransaction=P.prototype.jd;P.prototype.wc=function(a){return new v(function(b,c){try{this.j.deleteObjectStore(a)}catch(d){c(d);return}b()},this)};P.prototype.dropTable=P.prototype.wc;
function Oe(a,b,c,d){return new v(function(a,f){var h;try{var k=this.Xa.objectStore(b);h=k.openCursor()}catch(n){f(n);return}h.onsuccess=function(){var b=h.result;b?(c(b),b.continue()):(d(k),a())};h.onerror=f},a)}function Pe(a){var b=null;return b=a instanceof ArrayBuffer?ub(a):a instanceof Date?a.getTime():a}
function Qe(a,b,c){function d(a){var b=Cc(a.value),d=b.s,e;for(e in d){var A=sb(d[e]);c(A);d[e]=A.Ga()}a.update(b.Ga())}function e(a){var b=sb(a.value);c(b);a.update(b.Ga())}return Oe(a,b,a.Xc?d:e,aa())}P.prototype.sc=function(a,b,c){var d=Pe(c);return Qe(this,a,function(a){a.s[b]=d})};P.prototype.addTableColumn=P.prototype.sc;P.prototype.xc=function(a,b){return Qe(this,a,function(a){delete a.s[b]})};P.prototype.dropTableColumn=P.prototype.xc;
P.prototype.Nc=function(a,b,c){return Qe(this,a,function(a){a.s[c]=a.s[b];delete a.s[b]})};P.prototype.renameTableColumn=P.prototype.Nc;function Re(a,b){var c=[];return new v(function(a,e){var f;try{f=this.Xa.objectStore(b).openCursor()}catch(h){e(h);return}f.onsuccess=function(){var b=f.result;if(b){if(this.Xc){var e;e=Cc(b.value).s;for(var n in e)c.push(e[n])}else c.push(b.value);b.continue()}else a(c)}.bind(this);f.onerror=e},a)}P.prototype.vb=function(a){var b={},c;for(c in a)b[c]=Pe(a[c]);return tb(b)};
P.prototype.createRow=P.prototype.vb;P.prototype.Gc=g("Pa");P.prototype.getVersion=P.prototype.Gc;P.prototype.dump=function(){for(var a=this.j.objectStoreNames,b=[],c=0;c<a.length;++c){var d=a.item(c);b.push(this.gc(d))}return fb(b).then(function(b){var c={};b.forEach(function(b,d){c[a.item(d)]=b});return c})};P.prototype.dump=P.prototype.dump;P.prototype.gc=function(a){return Re(this,a).then(function(a){return a.map(function(a){return a.value})})};function Se(a,b){this.Y=a;this.Eb=b}Se.prototype.get=function(a){if(0==a.length)return null!=this.Y.getAll?Te(this):Ue(this);a=a.map(function(a){return new v(function(c,d){var e;try{e=this.Y.get(a)}catch(f){d(f);return}e.onerror=d;e.onsuccess=function(a){c(this.Eb(a.target.result))}.bind(this)},this)},this);return fb(a)};
function Ue(a){return new v(function(a,c){var d=[],e;try{e=this.Y.openCursor()}catch(f){c(f);return}e.onerror=c;e.onsuccess=function(){var c=e.result;c?(d.push(this.Eb(c.value)),c.continue()):a(d)}.bind(this)},a)}function Te(a){return new v(function(a,c){var d;try{d=this.Y.getAll()}catch(e){c(e);return}d.onerror=c;d.onsuccess=function(){var c=d.result.map(function(a){return this.Eb(a)},this);a(c)}.bind(this)},a)}
Se.prototype.Ub=function(a){return new v(function(b,c){var d;try{d=a()}catch(e){c(e);return}d.onsuccess=b;d.onerror=c},this)};Se.prototype.put=function(a){if(0==a.length)return w();a=a.map(function(a){return this.Ub(function(){return this.Y.put(a.Ga())}.bind(this))},this);return fb(a)};
Se.prototype.remove=function(a){return new v(function(b,c){var d=this.Y.count();d.onsuccess=function(d){if(0==a.length||d.target.result==a.length)return this.Ub(function(){return this.Y.clear()}.bind(this)).then(b,c);d=a.map(function(a){return this.Ub(function(){return this.Y.delete(a)}.bind(this))},this);fb(d).then(b,c)}.bind(this);d.onerror=c},this)};function Ve(a,b,c,d,e){dc.call(this,c,e);this.h=a;this.Xa=b;this.Xc=d;this.Xa.oncomplete=this.U.resolve.bind(this.U);this.Xa.onabort=this.U.reject.bind(this.U)}t(Ve,dc);Ve.prototype.I=function(a,b,c){return this.Xc?(c=null!=c?c:0,a=this.Xa.objectStore(a),new Dc(a,b,0==c?qa(Fc,this.h):Gc)):new Se(this.Xa.objectStore(a),b)};Ve.prototype.uc=function(){return this.U.da};function We(a,b){this.h=a;this.i=b;this.Yc=b.gf().Of||!1}m=We.prototype;
m.Ha=function(a){var b=window.indexedDB||window.mozIndexedDB||window.webkitIndexedDB||window.msIndexedDB;if(null==b)throw new F(352);var c=a||function(){return w()};return new v(function(a,e){var f;try{f=b.open(this.i.name(),this.i.version())}catch(h){e(h);return}f.onerror=e;f.onupgradeneeded=function(a){Xe(this,c,a).then(aa(),e)}.bind(this);f.onsuccess=function(b){this.j=b.target.result;this.pe().then(function(b){qb=b+1;a(this.j)}.bind(this))}.bind(this)},this)};
function Xe(a,b,c){var d=c.target.result,e=c.target.transaction;c=new P(c.oldVersion,d,e,a.Yc);Ye(d);a.i.ra().forEach(qa(a.Jf,d,e),a);return b(c)}function Ye(a){for(var b=[],c=0;c<a.objectStoreNames.length;++c){var d=a.objectStoreNames.item(c);-1!=d.indexOf(".")&&b.push(d)}b.forEach(function(b){try{a.deleteObjectStore(b)}catch(c){}})}
m.Jf=function(a,b,c){a.objectStoreNames.contains(c.getName())||a.createObjectStore(c.getName(),{keyPath:"id"});c.Bb()&&(c.Ba().forEach(function(c){this.vc(a,b,c.m(),"btree")},this),this.vc(a,b,Ze(c),"rowid"))};m.vc=function(a,b,c,d){a.objectStoreNames.contains(c)||(a.createObjectStore(c,{keyPath:"id"}),a=b.objectStore(c),(this.Yc?new Dc(a,sb,Gc):new Se(a,sb)).put([new wb(new vb(d))]))};m.Db=function(a,b,c){b=this.j.transaction($e(b),0==a?"readonly":"readwrite");return new Ve(this.h,b,a,this.Yc,c)};
function $e(a){var b=D();a.forEach(function(a){b.add(a.getName());a.Bb()&&(a.Ba().forEach(function(a){b.add(a.m())}),b.add(Ze(a)))});return E(b)}
m.pe=function(a){function b(){if(0==d.length)return w();var a=d.shift();return c(a).then(b)}function c(b){return new v(function(c,d){var O;try{O=(a||e.transaction([b])).objectStore(b).openCursor(null,"prev")}catch(da){d(da);return}O.onsuccess=function(a){(a=a.target.result)&&(f=Math.max(f,h(a)));c(f)};O.onerror=function(){c(f)}})}var d=this.i.ra().map(function(a){return a.getName()}),e=this.j,f=0,h=function(a){return this.Yc?(a=Cc(a.value),Object.keys(a.s).reduce(function(a,b){return Math.max(a,b)},
0)):a.key}.bind(this);return new v(function(a){b().then(function(){a(f)})})};m.close=function(){this.j.close()};m.Ec=function(){throw new F(511);};m.subscribe=aa();m.Jc=aa();function af(a,b,c){dc.call(this,b,c);this.Y=a;0==b&&this.U.resolve()}t(af,dc);af.prototype.I=function(a){return this.Y.Ec(a)};af.prototype.uc=function(){this.U.resolve();return this.U.da};function bf(a){this.i=a;this.M=B()}m=bf.prototype;m.Ha=function(){this.i.ra().forEach(this.ag,this);return w()};m.Ec=function(a){var b=this.M.get(a)||null;if(null===b)throw new F(101,a);return b};m.Db=function(a,b,c){return new af(this,a,c)};function cf(a,b){if(!a.M.has(b)){var c=new Ee;a.M.set(b,c);return c}return null}m.ag=function(a){cf(this,a.getName());a.Bb()&&(a.Ba().forEach(function(a){this.vc(a.m(),"btree")},this),this.vc(Ze(a),"rowid"))};m.vc=function(a,b){var c=cf(this,a);null===c||c.put([new wb(new vb(b))])};
m.close=aa();m.subscribe=aa();m.Jc=aa();function df(a){bf.call(this,a);this.rd=null}t(df,bf);df.prototype.subscribe=function(a){null===this.rd&&(this.rd=a)};df.prototype.Jc=function(a){null===this.rd||this.rd(a)};function ef(a,b,c){this.Xa=a;this.w=b;this.Eb=c}ef.prototype.get=function(a){var b=this.Eb;return ff(this.Xa,"SELECT id, value FROM "+this.w+" "+(0==a.length?"":"WHERE id IN ("+a.join(",")+")"),[],function(a){for(var d=a.rows.length,e=Array(d),f=0;f<d;++f)e[f]=b({id:a.rows.item(f).id,value:JSON.parse(a.rows.item(f).value)});return e})};
ef.prototype.put=function(a){if(0==a.length)return w();var b="INSERT OR REPLACE INTO "+this.w+"(id, value) VALUES (?, ?)";a.forEach(function(a){ff(this.Xa,b,[a.id(),JSON.stringify(a.s)])},this);return w()};ef.prototype.remove=function(a){ff(this.Xa,"DELETE FROM "+this.w+" "+(0==a.length?"":"WHERE id IN ("+a.join(",")+")"),[]);return w()};function gf(a,b,c){dc.call(this,b,c);this.j=a;this.M=B();this.Md=[]}t(gf,dc);function hf(a){return a.replace(".","__d__").replace("#","__s__")}gf.prototype.I=function(a,b){var c=this.M.get(a)||null;null===c&&(c=new ef(this,hf(a),b),this.M.set(a,c));return c};function ff(a,b,c,d){var e=x();a.Md.push({Eg:b,ug:c,transform:d,U:e});return e.da}
gf.prototype.uc=function(){var a=null,b=this.U.reject.bind(this.U),c=function(a,b){this.U.reject(b)}.bind(this),d=[],e=function(b,h){if(null!==a){var k=h;null!=a.transform&&null!=h&&(k=a.transform(h));d.push(k);a.U.resolve(k)}0<this.Md.length?(a=k=this.Md.shift(),b.executeSql(k.Eg,k.ug,e,c)):this.U.resolve(d)}.bind(this);0==this.ve?this.j.readTransaction(e,b):this.j.transaction(e,b);return this.U.da};function Q(a,b,c){this.j=c;this.h=a;this.Pa=b}r("lf.backstore.WebSqlRawBackStore",Q);Q.prototype.hd=g("j");Q.prototype.getRawDBInstance=Q.prototype.hd;Q.prototype.jd=function(){throw new F(356);};Q.prototype.getRawTransaction=Q.prototype.jd;function jf(a){return new gf(a.j,1,new ld(a.h,D()))}Q.prototype.wc=function(a){var b=jf(this);ff(b,"DROP TABLE "+a,[]);return b.ia()};Q.prototype.dropTable=Q.prototype.wc;
Q.prototype.gc=function(a){var b=jf(this);ff(b,"SELECT id, value FROM "+a,[]);return b.ia().then(function(a){for(var b=a[0].rows.length,e=Array(b),f=0;f<b;++f)e[f]={id:a[0].rows.item(f).id,value:JSON.parse(a[0].rows.item(f).value)};return w(e)})};function kf(a,b,c){var d=jf(a),e="UPDATE "+b+" SET value=? WHERE id=?";return a.gc(b).then(function(a){a.forEach(function(a){a=c(a);ff(d,e,[JSON.stringify(a.value),a.id])});return d.ia()})}
Q.prototype.sc=function(a,b,c){var d=Pe(c);return kf(this,a,function(a){a.value[b]=d;return a})};Q.prototype.addTableColumn=Q.prototype.sc;Q.prototype.xc=function(a,b){return kf(this,a,function(a){delete a.value[b];return a})};Q.prototype.dropTableColumn=Q.prototype.xc;Q.prototype.Nc=function(a,b,c){return kf(this,a,function(a){a.value[c]=a.value[b];delete a.value[b];return a})};Q.prototype.renameTableColumn=Q.prototype.Nc;Q.prototype.vb=function(a){var b={},c;for(c in a)b[c]=Pe(a[c]);return tb(b)};
Q.prototype.createRow=Q.prototype.vb;Q.prototype.Gc=g("Pa");Q.prototype.getVersion=Q.prototype.Gc;function mf(a){ff(a,'SELECT tbl_name FROM sqlite_master WHERE type="table"',[],function(a){for(var c=Array(a.rows.length),d=0;d<c.length;++d)c[d]=a.rows.item(d).tbl_name;return c})}
Q.prototype.dump=function(){var a=x(),b=jf(this);mf(b);var c={};b.ia().then(function(b){b=b[0].filter(function(a){return"__lf_ver"!=a&&"__WebKitDatabaseInfoTable__"!=a}).map(function(a){return this.gc(a).then(function(b){c[a]=b})},this);fb(b).then(function(){a.resolve(c)})}.bind(this));return a.da};Q.prototype.dump=Q.prototype.dump;function nf(a,b,c){this.h=a;this.i=b;this.Dg=c||4194304}m=nf.prototype;m.Ha=function(a){if(null==window.openDatabase)throw new F(353);var b=a||function(){return w()};return new v(function(a,d){try{var e=window.openDatabase(this.i.name(),"",this.i.name(),this.Dg);if(null!=e)this.j=e,of(this,b).then(a,d);else throw new F(354);}catch(f){d(f)}},this)};
function of(a,b){var c=x(),d=new gf(a.j,1,new ld(a.h,D()));ff(d,"CREATE TABLE IF NOT EXISTS __lf_ver(id INTEGER PRIMARY KEY, v INTEGER)",[]);ff(d,"SELECT v FROM __lf_ver WHERE id = 0",[]);d.ia().then(function(a){var d=0;a[1].rows.length&&(d=a[1].rows.item(0).v);d<this.i.version()?this.ge(b,d).then(c.resolve.bind(c)):d>this.i.version()?c.reject(new F(108)):c.resolve()}.bind(a));return c.da}m.Db=function(a,b,c){if(null!=this.j)return new gf(this.j,a,c);throw new F(2);};m.close=aa();
m.Ec=function(){throw new F(512);};m.subscribe=function(){throw new F(355);};m.Jc=function(){throw new F(355);};m.ge=function(a,b){var c=x();pf(this).then(function(){a(new Q(this.h,b,this.j)).then(function(){return this.pe()}.bind(this)).then(c.resolve.bind(c))}.bind(this),c.reject.bind(c));return c.da};
function pf(a){var b=a.i.ra(),c=new gf(a.j,1,new ld(a.h,D())),d=new gf(a.j,1,new ld(a.h,D()));ff(c,"INSERT OR REPLACE INTO __lf_ver VALUES (0, ?)",[a.i.version()]);mf(c);return c.ia().then(function(a){function c(a,b){ff(d,"INSERT INTO "+a+"(id, value) VALUES(?, ?)",[-1,JSON.stringify(rb(new wb(new vb(b))))])}var h=a[1];h.filter(function(a){return-1!=a.indexOf("__d__")}).forEach(function(a){ff(d,"DROP TABLE "+a,[])});var k=[],n=[],A=[];b.map(function(a){-1==h.indexOf(a.getName())&&k.push(a.getName());
a.Bb&&(a.Ba().forEach(function(a){a=hf(a.m());k.push(a);n.push(a)}),a=hf(Ze(a)),k.push(a),A.push(a))});k.forEach(function(a){ff(d,"CREATE TABLE "+a+"(id INTEGER PRIMARY KEY, value TEXT)",[])});n.forEach(function(a){c(a,"btree")});A.forEach(function(a){c(a,"rowid")});return d.ia()})}
m.pe=function(){var a=0,b=x(),c=function(b){var c=new gf(this.j,0);ff(c,"SELECT MAX(id) FROM "+b,[]);return c.ia().then(function(b){b=b[0].rows.item(0)[0];a=Math.max(b,a)})}.bind(this),d=this.i.ra().map(function(a){return c(a.getName())});fb(d).then(function(){b.resolve(a)},function(a){b.reject(a)});return b.da};function qf(a){this.o=B();this.ac=B();a.ra().forEach(function(a){this.ac.set(a.getName(),D())},this)}m=qf.prototype;m.set=function(a,b){this.o.set(b.id(),b);this.ac.get(a).add(b.id())};m.Xb=function(a,b){var c=this.ac.get(a);b.forEach(function(a){this.o.set(a.id(),a);c.add(a.id())},this)};m.get=function(a){return this.o.get(a)||null};function rf(a,b){return b.map(function(a){return this.get(a)},a)}
m.$a=function(a,b,c){var d=[],e=Math.min(b,c),f=Math.max(b,c);a=this.ac.get(a);if(a.size<f-e)a.forEach(function(a){a>=e&&a<=f&&(a=this.o.get(a),d.push(a))},this);else for(b=e;b<=f;++b)a.has(b)&&(c=this.o.get(b),d.push(c));return d};m.remove=function(a,b){this.o.delete(b);this.ac.get(a).delete(b)};m.Cc=function(a){return null!=a?this.ac.get(a).size:this.o.size};m.clear=function(){this.o.clear();this.ac.clear()};function sf(a,b,c){var d=0,e=a.length;for(c=c||tf;d<e;){var f=d+e>>1;0>c(a[f],b)?d=f+1:e=f}return d==e&&a[d]==b?d:~d}function tf(a,b){return a-b}function uf(a,b,c){c=sf(a,b,c);return 0>c?(a.splice(-(c+1),0,b),!0):!1};function vf(a,b,c,d){a=b?a.reverse():a;if(null==c&&null==d)return a;c=Math.min(q(c)?c:a.length,a.length);if(0==c)return[];d=Math.min(d||0,a.length);return a.slice(d,d+c)};function wf(a){this.bd=0==a?xf:yf;this.be=0==a?function(a){return null!=a?a.reverse():null}:function(a){return a||null};this.he=0==a?zf:Af}t(wf,Hc);function yf(a,b){return a>b?1:a<b?-1:0}function xf(a,b){return yf(b,a)}function Af(a,b){return xd(a,b)}function zf(a,b){return xd(b,a)}m=wf.prototype;m.ub=function(a,b){var c=this.be(b),d=[c.c==G,c.A==G];if(!d[0]){var e=this.bd(a,c.c);d[0]=c.ea?1==e:-1!=e}d[1]||(e=this.bd(a,c.A),d[1]=c.la?-1==e:1!=e);return d};
m.compare=function(a,b){return this.bd(a,b)};m.min=function(a,b){return a<b?1:a==b?0:-1};m.max=function(a,b){return a>b?1:a==b?0:-1};m.Qb=function(a,b){var c=this.ub(a,b);return c[0]&&c[1]};m.sf=function(a){return a.filter(function(a){return null!==a}).sort(function(a,c){return this.he(a,c)}.bind(this))};m.Wd=function(a){return this.be(a).c==G};m.wd=function(a){a=this.be(a);return[a.c,a.A]};m.ad=function(a){return null!==a};m.toString=function(){return this.compare==xf?"SimpleComparator_DESC":"SimpleComparator_ASC"};
function Bf(a){wf.call(this,a);this.bd=0==a?Cf:Df}t(Bf,wf);function Df(a,b){return null===a?null===b?0:-1:null===b?1:yf(a,b)}function Cf(a,b){return Df(b,a)}Bf.prototype.Qb=function(a,b){return null===a?sd(b):Bf.eb.Qb.call(this,a,b)};Bf.prototype.Ib=function(a,b){return null===a?null===b?0:-1:null===b?1:null};Bf.prototype.min=function(a,b){var c=this.Ib(a,b);null===c&&(c=Bf.eb.min.call(this,a,b));return c};Bf.prototype.max=function(a,b){var c=this.Ib(a,b);null===c&&(c=Bf.eb.max.call(this,a,b));return c};function Ef(a){this.wa=a.map(function(a){return new wf(a)})}t(Ef,Hc);function Ff(a,b,c,d){for(var e=0,f=0;f<a.wa.length&&0==e;++f)e=d(a.wa[f],b[f],c[f]);return e}m=Ef.prototype;m.compare=function(a,b){return Ff(this,a,b,function(a,b,e){return b==G||e==G?0:a.compare(b,e)})};m.min=function(a,b){return Ff(this,a,b,function(a,b,e){return a.min(b,e)})};m.max=function(a,b){return Ff(this,a,b,function(a,b,e){return a.max(b,e)})};
m.ub=function(a,b){for(var c=[!0,!0],d=0;d<this.wa.length&&(c[0]||c[1]);++d){var e=this.wa[d].ub(a[d],b[d]);c[0]=c[0]&&e[0];c[1]=c[1]&&e[1]}return c};m.Qb=function(a,b){for(var c=!0,d=0;d<this.wa.length&&c;++d)c=this.wa[d].Qb(a[d],b[d]);return c};
m.sf=function(a){var b=a.filter(function(a){return a.every(ga)});a=Array(this.wa.length);for(var c=0;c<a.length;c++)a[c]=b.map(function(a){return a[c]});a.forEach(function(a,b){a.sort(function(a,c){return this.wa[b].he(a,c)}.bind(this))},this);b=Array(b.length);for(c=0;c<b.length;c++)b[c]=a.map(function(a){return a[c]});return b.sort(function(a,b){for(var c=0,h=0;h<this.wa.length&&0==c;++h)c=this.wa[h].he(a[h],b[h]);return c}.bind(this))};m.Wd=function(a){return this.wa[0].Wd(a[0])};
m.wd=function(a){var b=a.map(function(a,b){return this.wa[b].wd(a)[0]},this);a=a.map(function(a,b){return this.wa[b].wd(a)[1]},this);return[b,a]};m.ad=function(a){return a.every(function(a,c){return this.wa[c].ad(a)},this)};function Gf(a){Ef.call(this,a);this.wa=a.map(function(a){return new Bf(a)})}t(Gf,Ef);function Hf(){this.na=0}Hf.prototype.add=function(a,b){this.na+=b};Hf.prototype.remove=function(a,b){this.na-=b};Hf.prototype.clear=function(){this.na=0};function If(a,b){a.clear();b.forEach(function(a){this.na+=a.na},a)};function Jf(a,b,c,d){this.w=a;this.S=b;this.xf=c;this.rb=new Hf;if(d){a=511;a*=a*a;if(d.length>=a)throw new F(6,a);d=Kf(this,d);this.qa=d=Lf(d)}else this.clear()}var Mf=[];m=Jf.prototype;m.getName=g("w");m.toString=function(){return this.qa.toString()};m.add=function(a,b){this.qa=this.qa.zb(a,b)};m.set=function(a,b){this.qa=this.qa.zb(a,b,!0)};m.remove=function(a,b){this.qa=this.qa.remove(a,b)};m.get=function(a){return this.qa.get(a)};
m.cd=function(a){if(null==a)return this.Oa().na;if(a instanceof qd){if(sd(a))return this.Oa().na;if(wd(a))return this.get(a.c).length}return this.$a([a]).length};m.Oa=g("rb");m.Sd=function(a,b,c,d){c=Array(a);this.qa.fill({offset:b?this.rb.na-a-d:d,count:a,se:0},c);return b?c.reverse():c};
m.$a=function(a,b,c,d){var e=Nf(this.qa).b[0];if(!q(e)||0==c)return Mf;b=b||!1;c=null!=c?Math.min(c,this.rb.na):this.rb.na;d=d||0;var f=Math.min(Math.max(this.rb.na-d,0),c);if(0==f)return Mf;if(!q(a)||1==a.length&&a[0]instanceof qd&&sd(a[0]))return this.Sd(f,b,c,d);a=this.S.sf(a);var h=Array(b?this.rb.na:f),k={count:0,X:h.length,reverse:b,L:d},n=this.S instanceof Gf;a.forEach(function(a){for(var b=this.S.wd(a),b=this.S.Wd(a)?e:b[0],b=Of(this.qa,b),c=k.count,d=0;null!=b&&k.count<k.X;){if(n){for(var f=
b,Vc=a,$a=k,re=h,se=f.D.fc(),te=-1,Ca=0;Ca<f.b.length;++Ca)if(se.Qb(f.b[Ca],Vc)){te=Ca;break}if(-1!=te)for(Ca=te;Ca<f.b.length&&$a.count<$a.X;++Ca){if(!se.Qb(f.b[Ca],Vc))if(se.ad(f.b[Ca]))break;else continue;Pf(f,$a,re,Ca)}}else b.$a(a,k,h);k.count!=c||0<k.L?(d=0,c=k.count):d++;b=2==d?null:b.next()}},this);h.length>k.count&&h.splice(k.count,h.length-k.count);return b?vf(h,b,c,d):h};m.clear=function(){this.qa=Qf(this);this.rb.clear()};m.Ma=function(a){return this.qa.Ma(a)};m.min=function(){return this.Ib(this.S.min.bind(this.S))};
m.max=function(){return this.Ib(this.S.max.bind(this.S))};function Rf(a,b,c){if(!a.S.ad(b.b[c]))if(1<b.b[c].length){if(null===b.b[c][0])return null}else return null;return[b.b[c],a.xf?[b.B[c]]:b.B[c]]}
m.Ib=function(a){var b;a:{b=Nf(this.qa);var c=0;do if(c>=b.b.length)b=b.ta,c=0;else{var d=Rf(this,b,c);if(null!==d){b=d;break a}c++}while(null!==b);b=null}a:{c=Sf(this.qa);d=c.b.length-1;do if(0>d)c=c.nb,d=0;else{var e=Rf(this,c,d);if(null!==e){c=e;break a}d--}while(null!==c);c=null}return null===b||null===c?null:1==a(b[0],c[0])?b:c};m.Ja=g("xf");m.fc=g("S");m.$d=function(a,b){return null!=a?-1==this.S.compare(a,b):!1};m.Qa=function(a,b){return null!=a?0==this.S.compare(a,b):!1};
m.Ga=function(){for(var a=[],b=Nf(this.qa);b;)a.push(new y(b.oa,[b.b,b.B])),b=b.ta;return a};function Tf(a,b,c,d){a=new Jf(b,a,c);d=Uf(d,a);a.qa=d;return a}function Vf(a,b){this.oa=a;this.D=b;this.kb=0;this.ta=this.nb=this.C=null;this.b=[];this.B=[];this.g=[]}function Qf(a){return new Vf(qb++,a)}function R(a){return 0==a.kb}m=Vf.prototype;m.next=g("ta");
function Wf(a){function b(a){return null!=a?a.oa.toString():"_"}var c=a.oa+"["+a.b.join("|")+"]",d=a.g.map(function(a){return a.oa}).join("|"),e=a.B.join("/"),f=b(a.nb)+"{",f=R(a)?f+e:f+d,f=f+"}"+b(a.C);a.ta&&(a=Wf(a.ta),c=c+"  "+a[0],f=f+"  "+a[1]);return[c,f]}m.toString=function(){var a="",b=Wf(this),a=a+(b[0]+"\n"+b[1]+"\n");this.g.length&&(a+=this.g[0].toString());return a};function Nf(a){return R(a)?a:Nf(a.g[0])}function Sf(a){return R(a)?a:Sf(a.g[a.g.length-1])}
function Xf(a,b){b&&(b.nb=a);a&&(a.ta=b)}function Kf(a,b){for(var c=b.length,d=0,e=Qf(a),f=e;0<c;){var h=768<=c?511:257<=c&&511>=c?c:257,k=b.slice(d,d+h);e.b=k.map(function(a){return a.key});e.B=k.map(function(a){return a.value});d+=h;c-=h;0<c&&(h=Qf(e.D),Xf(e,h),e=h)}return f}function Yf(a){var b=a[0],c=Qf(b.D);c.kb=b.kb+1;c.g=a;for(b=0;b<a.length;++b)a[b].C=c,0<b&&c.b.push(a[b].b[0]);return c}
function Lf(a){var b=a,c=[];do c.push(b),b=b.ta;while(b);if(512>=c.length)b=Yf(c);else{var d=c.length,e=0,b=Qf(a.D);for(b.kb=a.kb+2;0<d;){a=768<=d?511:257<=d&&511>=d?d:257;var f=c.slice(e,e+a),h=Yf(f);h.C=b;b.g.length&&(b.b.push(f[0].b[0]),Xf(b.g[b.g.length-1],h));b.g.push(h);e+=a;d-=a}}return b}m.get=function(a){var b=Zf(this,a);if(R(this)){var c=Mf;this.D.Qa(this.b[b],a)&&(c=c.concat(this.B[b]));return c}b=this.D.Qa(this.b[b],a)?b+1:b;return this.g[b].get(a)};
m.Ma=function(a){var b=Zf(this,a);return this.D.Qa(this.b[b],a)?!0:R(this)?!1:this.g[b].Ma(a)};m.remove=function(a,b){$f(this,a,-1,b);if(null===this.C){var c=this;1==this.g.length&&(c=this.g[0],c.C=null);return c}return this};function ag(a){return R(a)?a.b[0]:ag(a.g[0])}function cg(a){a.b=[];for(var b=1;b<a.g.length;++b)a.b.push(ag(a.g[b]))}
function $f(a,b,c,d){var e=Zf(a,b),f=R(a);if(!f){var h=a.D.Qa(a.b[e],b)?e+1:e;if($f(a.g[h],b,h,d))cg(a);else return!1}else if(!a.D.Qa(a.b[e],b))return!1;if(a.b.length>e&&a.D.Qa(a.b[e],b)){if(q(d)&&!a.D.Ja()&&f&&(h=a.B[e],d=sf(h,d,void 0),0>d?d=!1:(h.splice(d,1),d=!0),d&&a.D.Oa().remove(b,1),a.B[e].length))return!1;a.b.splice(e,1);f&&(f=a.D.Ja()?1:a.B[e].length,a.B.splice(e,1),a.D.Oa().remove(b,f))}if(256>a.b.length&&null!==a.C){a:{b=null;if(a.ta&&256<a.ta.b.length)b=a.ta,e=d=0,f=a.b.length+1;else if(a.nb&&
256<a.nb.b.length)b=a.nb,d=a.nb.b.length-1,e=R(a)?d:d+1,f=0;else{b=!1;break a}a.b.splice(f,0,b.b[d]);b.b.splice(d,1);d=R(a)?a.B:a.g;h=null;R(a)?h=b.B:(h=b.g,h[e].C=a);d.splice(f,0,h[e]);h.splice(e,1);R(b)||(cg(b),cg(a));b=!0}b||dg(a,c)}return!0}
function dg(a,b){var c,d,e;a.ta&&511>a.ta.b.length?(c=a.ta,e=d=0):a.nb&&(c=a.nb,d=c.b.length,e=R(c)?c.B.length:c.g.length);d=[d,0].concat(a.b);Array.prototype.splice.apply(c.b,d);d=null;R(a)?d=a.B:(d=a.g,d.forEach(function(a){a.C=c}));d=[e,0].concat(d);Array.prototype.splice.apply(R(c)?c.B:c.g,d);Xf(a.nb,a.ta);R(c)||cg(c);-1!=b&&(a.C.b.splice(b,1),a.C.g.splice(b,1))}
m.zb=function(a,b,c){var d=Zf(this,a);if(R(this)){if(this.D.Qa(this.b[d],a)){if(c)this.D.Oa().remove(a,this.D.Ja()?1:this.B[d].length),this.B[d]=this.D.Ja()?b:[b];else{if(this.D.Ja())throw new F(201);if(!uf(this.B[d],b))throw new F(109);}this.D.Oa().add(a,1);return this}this.b.splice(d,0,a);this.B.splice(d,0,this.D.Ja()?b:[b]);this.D.Oa().add(a,1);512==this.b.length?(d=Qf(this.D),a=Qf(this.D),a.kb=1,a.b=[this.b[256]],a.g=[this,d],a.C=this.C,this.C=a,d.b=this.b.splice(256),d.B=this.B.splice(256),d.C=
a,Xf(d,this.ta),Xf(this,d),d=a):d=this;return d}d=this.D.Qa(this.b[d],a)?d+1:d;a=this.g[d].zb(a,b,c);R(a)||1!=a.b.length||(this.b.splice(d,0,a.b[0]),a.g[1].C=this,a.g[0].C=this,this.g.splice(d,1,a.g[1]),this.g.splice(d,0,a.g[0]));return 512==this.b.length?eg(this):this};function eg(a){var b=Qf(a.D),c=Qf(a.D);b.C=a.C;b.kb=a.kb+1;b.b=[a.b[256]];b.g=[a,c];a.b.splice(256,1);c.C=b;c.kb=a.kb;c.b=a.b.splice(256);c.g=a.g.splice(257);c.g.forEach(function(a){a.C=c});a.C=b;Xf(c,a.ta);Xf(a,c);return b}
function Zf(a,b){for(var c=0,d=a.b.length;c<d;){var e=c+d>>1;a.D.$d(a.b[e],b)?c=e+1:d=e}return c}function Of(a,b){if(!R(a)){var c=Zf(a,b);a.D.Qa(a.b[c],b)&&c++;return Of(a.g[c],b)}return a}
m.$a=function(a,b,c){function d(a){return a[0]?a[1]?0:1:-1}var e=this.D.fc(),f=0,h=this.b.length-1,k=this.b,n=d(e.ub(k[f],a)),A=d(e.ub(k[h],a));if(1!=n&&(-1!=n||-1!=A)){var O=function(a,b){var c=a+b>>1;return c==a?c+1:c},da=function(b,c,f){if(b>=c)return 0==f?c:-1;var h=d(e.ub(k[b],a));if(0==h)return b;if(1==h)return-1;h=O(b,c);if(h==c)return 0==f?c:-1;var n=d(e.ub(k[h],a));return 0==n?da(b,h,n):-1==n?da(h+1,c,f):da(b+1,h,n)},Eb=function(b,c){if(b>=c)return b;var f=d(e.ub(k[c],a));if(0==f)return c;
if(-1==f)return b;f=O(b,c);if(f==c)return b;var h=d(e.ub(k[f],a));return 0==h?Eb(f,c):1==h?Eb(b,f-1):-1};0!=n&&(f=da(f+1,h,A));-1!=f&&(h=Eb(f,h),-1!=h&&h>=f&&fg(this,b,c,f,h+1))}};function Pf(a,b,c,d){if(a.D.Ja())!b.reverse&&b.L?b.L--:c[b.count++]=a.B[d];else for(var e=0;e<a.B[d].length&&b.count<c.length;++e)!b.reverse&&b.L?b.L--:c[b.count++]=a.B[d][e]}function fg(a,b,c,d,e){for(;d<e&&(b.reverse||!(b.count>=b.X));++d)Pf(a,b,c,d)}
m.fill=function(a,b){if(R(this))for(var c=0;c<this.B.length&&0<a.count;++c)if(0<a.offset){if(a.offset-=this.D.Ja()?1:this.B[c].length,0>a.offset)for(var d=this.B[c].length+a.offset;d<this.B[c].length&&0<a.count;++d)b[a.se++]=this.B[c][d],a.count--}else if(this.D.Ja())b[a.se++]=this.B[c],a.count--;else for(d=0;d<this.B[c].length&&0<a.count;++d)b[a.se++]=this.B[c][d],a.count--;else for(c=0;c<this.g.length&&0<a.count;++c)this.g[c].fill(a,b)};
function Uf(a,b){for(var c=b.Oa(),d=a.map(function(a){var d=new Vf(a.id(),b);d.b=a.s[0];d.B=a.s[1];d.b.forEach(function(a,e){c.add(a,b.Ja()?1:d.B[e].length)});return d}),e=0;e<d.length-1;++e)Xf(d[e],d[e+1]);return 1<d.length?Lf(d[0]):d[0]};function gg(a){if(1==a.f.length)return new wf(a.f[0].mb);var b=a.f.map(function(a){return a.mb});return a.f.some(function(a){return a.ba.kc()})?new Gf(b):new Ef(b)};function hg(a){this.ga=a;this.lb=D();this.Pc=new Hf;this.rb=new Hf}m=hg.prototype;m.getName=function(){return this.ga.getName()};m.add=function(a,b){null===a?(this.lb.add(b),this.Pc.add(a,1)):this.ga.add(a,b)};m.set=function(a,b){null===a?(this.lb.clear(),this.Pc.clear(),this.add(a,b)):this.ga.set(a,b)};m.remove=function(a,b){null===a?b?(this.lb.delete(b),this.Pc.remove(a,1)):(this.lb.clear(),this.Pc.clear()):this.ga.remove(a,b)};m.get=function(a){return null===a?E(this.lb):this.ga.get(a)};m.cd=function(a){return this.ga.cd(a)};
m.Oa=function(){If(this.rb,[this.ga.Oa(),this.Pc]);return this.rb};m.$a=function(a,b,c,d){b=this.ga.$a(a,b,c,d);return null!=a?b:b.concat(E(this.lb))};m.clear=function(){this.lb.clear();this.ga.clear()};m.Ma=function(a){return null===a?0!=this.lb.size:this.ga.Ma(a)};m.min=function(){return this.ga.min()};m.max=function(){return this.ga.max()};m.Ga=function(){return[new y(-2,E(this.lb))].concat(this.ga.Ga())};m.fc=function(){return this.ga.fc()};
function ig(a,b){for(var c=-1,d=0;d<b.length;++d)if(-2==b[d].id()){c=d;break}if(-1==c)throw new F(102);var d=b[c].s,e=b.slice(0);e.splice(c,1);var c=a(e),f=new hg(c);d.forEach(function(a){f.lb.add(a)});return f}m.Ja=function(){return this.ga.Ja()};function jg(a){this.w=a;this.qb=D();this.S=new wf(1)}m=jg.prototype;m.getName=g("w");m.add=function(a){if("number"!=typeof a)throw new F(103);this.qb.add(a)};m.set=function(a,b){this.add(a,b)};m.remove=function(a){this.qb.delete(a)};m.get=function(a){return this.Ma(a)?[a]:[]};m.min=function(){return this.Ib(this.S.min.bind(this.S))};m.max=function(){return this.Ib(this.S.max.bind(this.S))};
m.Ib=function(a){if(0==this.qb.size)return null;var b=E(this.qb).reduce(function(b,d){return null===b||1==a(d,b)?d:b},null);return[b,[b]]};m.cd=function(){return this.qb.size};m.$a=function(a,b,c,d){var e=a||[vd()];a=E(this.qb).filter(function(a){return e.some(function(b){return this.S.Qb(a,b)},this)},this);return vf(a,b,c,d)};m.clear=function(){this.qb.clear()};m.Ma=function(a){return this.qb.has(a)};m.Ga=function(){return[new y(0,E(this.qb))]};m.fc=g("S");
function kg(a,b){var c=new jg(a);b[0].s.forEach(function(a){c.add(a,a)});return c}m.Ja=l(!0);m.Oa=function(){var a=new Hf;a.na=this.qb.size;return a};function lg(a){this.La=a.l(lc);this.F=a.l(nc);this.W=a.l(mc)}lg.prototype.Ha=function(a){var b=a.ra(),c=function(){if(0==b.length)return w();var a=b.shift();return(a.Bb()?mg(this,a):ng(this,a)).then(c)}.bind(this);return c()};function ng(a,b){var c=a.La.Db(0,[b]),d=c.I(b.getName(),b.Fb.bind(b)).get([]).then(function(a){this.W.Xb(b.getName(),a);og(this,b,a)}.bind(a));c.ia();return d}
function og(a,b,c){var d=a.F.oc.get(b.getName())||[];c.forEach(function(a){d.forEach(function(b){var c=a.Hb(b.getName());b.add(c,a.id())})})}function mg(a,b){var c=a.La.Db(0,[b]),d=c.I(b.getName(),b.Fb).get([]).then(function(a){this.W.Xb(b.getName(),a)}.bind(a)),e=b.Ba().map(function(a){return pg(this,a,c)},a).concat(qg(a,b,c));c.ia();return fb(e.concat(d))}
function pg(a,b,c){c=c.I(b.m(),sb,1);var d=gg(b);return c.get([]).then(function(a){if(1<a.length){if(rg(b)){var c=Tf.bind(void 0,d,b.m(),b.Hc);a=ig(c,a.slice(1))}else a=Tf(d,b.m(),b.Hc,a.slice(1));this.F.set(b.Qc,a)}}.bind(a))}function qg(a,b,c){return c.I(Ze(b),sb,1).get([]).then(function(a){1<a.length&&(a=kg(Ze(b),a.slice(1)),this.F.set(b.getName(),a))}.bind(a))};function sg(){this.Y=B();this.oc=B()}sg.prototype.Ha=function(a){a.ra().forEach(function(a){var c=[];this.oc.set(a.getName(),c);var d=Ze(a);if(null===this.get(d)){var e=new jg(d);c.push(e);this.Y.set(d,e)}a.Ba().forEach(function(a){var b;b=gg(a);b=new Jf(a.m(),b,a.Hc);b=rg(a)&&1==a.f.length?new hg(b):b;c.push(b);this.Y.set(a.m(),b)},this)},this);return w()};sg.prototype.get=function(a){return this.Y.get(a)||null};
sg.prototype.set=function(a,b){var c=this.oc.get(a)||null;null===c&&(c=[],this.oc.set(a,c));for(var d=null,e=0;e<c.length;e++)if(c[e].getName()==b.getName()){d=e;break}null!==d&&0<c.length?c.splice(d,1,b):c.push(b);this.Y.set(b.getName(),b)};function tg(a){this.nc=[];q(a)&&this.add(a)}tg.prototype.toString=function(){return this.nc.map(function(a){return a.toString()}).join(",")};tg.prototype.Ma=function(a){return this.nc.some(function(b){return b.contains(a)})};tg.prototype.sa=g("nc");
tg.prototype.add=function(a){if(0!=a.length)if(a=this.nc.concat(a),1==a.length)this.nc=a;else{a.sort(xd);for(var b=[],c=a[0],d=1;d<a.length;++d)if(td(c,a[d])){var e=a[d],f=vd();if(c.c!=G&&e.c!=G){var h=ud(c.c,e.c,!0);1!=h?(f.c=c.c,f.ea=0!=h?c.ea:c.ea&&e.ea):(f.c=e.c,f.ea=e.ea)}c.A!=G&&e.A!=G&&(h=ud(c.A,e.A,!1),-1!=h?(f.A=c.A,f.la=0!=h?c.la:c.la&&e.la):(f.A=e.A,f.la=e.la));c=f}else b.push(c),c=a[d];b.push(c);this.nc=b}};
function ug(a,b){var c=[];a.sa().map(function(a){return b.sa().map(function(b){var c;if(td(a,b)){c=vd();var h=ud(a.c,b.c,!0),h=0==h?a.ea?a:b:-1!=h?a:b;c.c=h.c;c.ea=h.ea;a.A==G||b.A==G?b=a.A==G?b:a:(h=ud(a.A,b.A,!1),b=0==h?a.la?a:b:-1==h?a:b);c.A=b.A;c.la=b.la}else c=null;return c})}).forEach(function(a){c=c.concat(a)});return new tg(c.filter(function(a){return null!==a}))};function vg(a,b){var c=[],d=null,e=null;Zd(a,function(a){var h=b(a);null==a.getParent()?e=h:Wd(d,h);var k=a.getParent();null!==k&&M(k).length==M(d).length&&(k=c.indexOf(d),-1!=k&&c.splice(k,1));1<M(a).length&&c.push(h);d=null===a.g?c[c.length-1]:h});return e}function wg(a){return xg(a,function(a){return null===a.g})}
function yg(a){var b=a.getParent(),c=0;null!==b&&(c=M(b).indexOf(a),b.removeChild(a));var d=M(a).slice();d.forEach(function(d,f){a.removeChild(d);null===b||Vd(b,d,c+f)});return{parent:b,children:d}}function zg(a,b){M(a).slice().forEach(function(c){a.removeChild(c);Wd(b,c)});Wd(a,b)}function Ag(a){var b=Ud(a,0);yg(a);zg(b,a);return b}
function Bg(a,b,c){var d=Ud(a,0),e=M(d).slice();if(!e.some(function(a){return b(a)}))return a;yg(a);e.forEach(function(e,h){if(b(e)){var k=c(a);Xd(d,h);Wd(k,e);Vd(d,k,h)}});return d}function Cg(a,b,c,d){var e=a.getParent();null!==e&&(a=M(e).indexOf(a),Xd(e,a),Vd(e,c,a));M(b).slice().forEach(function(a){b.removeChild(a);Wd(d,a)});return c}function xg(a,b,c){function d(a){b(a)&&e.push(a);null!=c&&c(a)||M(a).forEach(d)}var e=[];d(a);return e}
function Dg(a,b){var c=b||function(a){return a.toString()+"\n"},d="";Zd(a,function(a){for(var b=0;b<Td(a);b++)d+="-";d+=c(a)});return d};function Eg(a){$d.call(this);this.Tb=a;this.ab=!1}t(Eg,$d);m=Eg.prototype;m.Mb=function(){return vg(this,function(a){if(a instanceof Eg){var b=new Eg(a.Tb);b.ab=a.ab;a=a.Z();b.oa=a;return b}return a.Mb()})};m.ib=function(a){var b=a||[];Zd(this,function(a){a!=this&&a.ib(b)}.bind(this));a=D(b);return E(a)};m.yd=function(a){this.ab!=a&&(this.ab=a,this.Tb="and"==this.Tb?"or":"and",M(this).forEach(function(b){return b.yd(a)}))};
m.eval=function(a){var b=M(this).map(function(b){return b.eval(a)});return Fg(this,b)};function Fg(a,b){return"and"==a.Tb?Dd(b):Ed(b)}m.toString=function(){return"combined_pred_"+this.Tb.toString()};function Gg(a,b,c){$d.call(this);this.ha=a;this.ka=b;this.G=c;this.ce=null;a=Ld.Dc();this.yc=Rd(a,this.ha.H(),this.G);this.fg=a.We.get(this.ha.H())||null}t(Gg,$d);m=Gg.prototype;m.Mb=function(){var a=new Gg(this.ha,this.ka,this.G),b=this.Z();a.oa=b;return a};m.ib=function(a){return null!=a?(a.push(this.ha),a.push(this.ka),a):[this.ha,this.ka]};
m.reverse=function(){var a=this.G;switch(this.G){case "gt":a="lt";break;case "lt":a="gt";break;case "gte":a="lte";break;case "lte":a="gte"}return new Gg(this.ka,this.ha,a)};m.eval=function(a){var b=a.entries.filter(function(a){var b=J(a,this.ha);a=J(a,this.ka);return this.yc(b,a)},this);return new H(b,I(a))};m.toString=function(){return"join_pred("+this.ha.m()+" "+this.G+" "+this.ka.m()+")"};
function Hg(a,b,c){var d=null,e=null;-1!=I(b).indexOf(K(a.ha.I()))?(d=b,e=c):(d=c,e=b);if(d.entries.length>e.entries.length){a:{b=a.ha;a.ha=a.ka;a.ka=b;b=a.G;switch(a.G){case "gt":b="lt";break;case "lt":b="gt";break;case "gte":b="lte";break;case "lte":b="gte";break;default:break a}a.G=b;a.yc=Rd(Ld.Dc(),a.ha.H(),a.G)}return[e,d]}return[d,e]}function Ig(a){var b={};a.ib().forEach(function(a){b[a.getName()]=null});return b}
function Jg(a,b,c){null===a.ce&&(a.ce=Ig(a.ka.I()));var d=new Gd(new y(-1,a.ce),!1);return Jd(b,c,d,[K(a.ka.I())])}
function Kg(a,b,c,d){var e=[b,c];d||(e=Hg(a,b,c));b=e[0];c=e[1];var e=b,f=c,h=a.ha,k=a.ka;d&&(e=c,f=b,h=a.ka,k=a.ha);var n=new Tc,A=[];e.entries.forEach(function(a){var b=String(J(a,h));n.set(b,a)});var O=I(e),da=I(f);f.entries.forEach(function(a){var b=J(a,k),c=String(b);null!==b&&n.has(c)?n.get(c).forEach(function(b){b=Jd(a,da,b,O);A.push(b)}):d&&A.push(Jg(this,a,da))}.bind(a));a=I(b).concat(I(c));return new H(A,a)}
function Lg(a,b,c,d,e){function f(a,b){var c=new Gd(b,1<O.length),c=Jd(a,da,c,O);A.push(c)}var h=d.Yf.I(),k=b,n=c;-1!=I(b).indexOf(K(h))&&(k=c,n=b);var A=[],O=I(n),da=I(k);k.entries.forEach(function(a){var b=this.fg(J(a,d.ng)),b=d.index.get(b);0!=b.length&&(d.index.Ja()?f(a,e.get(b[0])):rf(e,b).forEach(f.bind(null,a)))},a);a=I(k).concat(I(n));return new H(A,a)};function Mg(a,b,c){return null===b?new be(a,b,c):q(b.m)?new Gg(a,b,c):new be(a,b,c)};var Ng={};r("lf.schema.DataStoreType",Ng);Ng.INDEXED_DB=0;Ng.MEMORY=1;Ng.LOCAL_STORAGE=2;Ng.FIREBASE=3;Ng.WEB_SQL=4;Ng.OBSERVABLE_STORE=5;function Og(a,b,c,d){this.Qc=a;this.name=b;this.Hc=c;this.f=d}Og.prototype.m=function(){return this.Qc+"."+this.name};function rg(a){return a.f.some(function(a){return a.ba.kc()})}function S(a,b,c,d){this.w=a;this.pa=c;this.K=b;this.td=d;this.fb=null}r("lf.schema.Table",S);S.prototype.getName=g("w");S.prototype.getName=S.prototype.getName;S.prototype.Za=g("fb");
function K(a){return a.fb||a.w}S.prototype.tc=function(a){var b=new this.constructor(this.w);b.fb=a;b.zg=this.zg;return b};S.prototype.as=S.prototype.tc;S.prototype.createRow=S.prototype.vb;S.prototype.deserializeRow=S.prototype.Fb;S.prototype.Ba=g("pa");S.prototype.getIndices=S.prototype.Ba;S.prototype.ib=g("K");S.prototype.getColumns=S.prototype.ib;S.prototype.getConstraint=S.prototype.Gb;S.prototype.Bb=g("td");S.prototype.persistentIndex=S.prototype.Bb;function Ze(a){return a.w+".#"};function T(a,b){this.child=a;this.Lb=b;this.fb=null}m=T.prototype;m.getName=function(){return this.Lb+"("+this.child.getName()+")"};m.m=function(){return this.Lb+"("+this.child.m()+")"};m.I=function(){return this.child.I()};m.toString=function(){return this.m()};m.H=function(){return this.child.H()};m.Za=g("fb");m.Ba=function(){return[]};m.Aa=l(null);m.kc=l(!1);m.tc=function(a){this.fb=a;return this};T.prototype.as=T.prototype.tc;
function Pg(a){for(var b=[a];a instanceof T;)b.push(a.child),a=a.child;return b}function Qg(a){this.fb=a||null;this.V=new S("#UnknownTable",[],[],!1)}m=Qg.prototype;m.getName=l("*");m.m=function(){return this.getName()};m.toString=function(){return this.m()};m.I=g("V");m.H=l(4);m.Za=g("fb");m.Ba=function(){return[]};m.Aa=l(null);m.kc=l(!1);r("lf.fn.avg",function(a){return new T(a,"AVG")});function Rg(a){return new T(a||new Qg,"COUNT")}r("lf.fn.count",Rg);function Sg(a){return new T(a,"DISTINCT")}r("lf.fn.distinct",Sg);r("lf.fn.max",function(a){return new T(a,"MAX")});r("lf.fn.min",function(a){return new T(a,"MIN")});r("lf.fn.stddev",function(a){return new T(a,"STDDEV")});r("lf.fn.sum",function(a){return new T(a,"SUM")});r("lf.fn.geomean",function(a){return new T(a,"GEOMEAN")});function U(a,b){L.call(this);this.Qf=b}t(U,L);U.prototype.exec=function(a,b){switch(this.Qf){case 1:return Tg(this,a,b);case 0:return Ug(this,a,b);default:return Vg(this,a,b)}};U.prototype.toString=l("dummy_node");U.prototype.Rc=function(){return this.toString()};function Vg(a,b,c){return new v(function(a){a(this.fa([],b,c))}.bind(a))}function Tg(a,b,c){return Ud(a,0).exec(b,c).then(function(a){return this.fa(a,b,c)}.bind(a))}
function Ug(a,b,c){var d=M(a).map(function(a){return a.exec(b,c)});return fb(d).then(function(a){var d=[];a.forEach(function(a){for(var b=0;b<a.length;++b)d.push(a[b])});return this.fa(d,b,c)}.bind(a))};function Wg(a){U.call(this,0,1);this.Ce=a}t(Wg,U);Wg.prototype.toString=function(){return"aggregation("+this.Ce.map(function(a){return a.m()}).toString()+")"};Wg.prototype.fa=function(a){a.forEach(function(a){Xg(new Yg(a,this.Ce))},this);return a};function Yg(a,b){this.Ka=a;this.K=b}
function Xg(a){a.K.forEach(function(a){a=Pg(a).reverse();for(var c=1;c<a.length;c++){var d=a[c],e=Pg(d).slice(-1)[0],f=d.child instanceof T?Ad(this.Ka,d.child):this.Ka;if(null!==f.Ya&&f.Ya.has(d.m()))break;f=Zg(d.Lb,f,e);e=this.Ka;null===e.Ya&&(e.Ya=B());e.Ya.set(d.m(),f)}},a)}
function Zg(a,b,c){var d=null;switch(a){case "MIN":d=$g(b,c,function(a,b){return b<a?b:a});break;case "MAX":d=$g(b,c,function(a,b){return b>a?b:a});break;case "DISTINCT":d=ah(b,c);break;case "COUNT":d=bh(b,c);break;case "SUM":d=ch(b,c);break;case "AVG":a=bh(b,c);0<a&&(d=ch(b,c)/a);break;case "GEOMEAN":d=dh(b,c);break;default:d=eh(b,c)}return d}function $g(a,b,c){return a.entries.reduce(function(a,e){var f=J(e,b);return null===f?a:null===a?f:c(a,f)},null)}
function bh(a,b){return b instanceof Qg?a.entries.length:a.entries.reduce(function(a,d){return a+(fa(J(d,b))?0:1)},0)}function ch(a,b){return $g(a,b,function(a,b){return b+a})}function eh(a,b){var c=[];a.entries.forEach(function(a){a=J(a,b);null===a||c.push(a)});return 0==c.length?null:Bb.apply(null,c)}function dh(a,b){var c=0,d=a.entries.reduce(function(a,d){var h=J(d,b);if(0==h||null===h)return a;c++;return a+Math.log(h)},0);return 0==c?null:Math.pow(Math.E,d/c)}
function ah(a,b){var c=B();a.entries.forEach(function(a){var e=J(a,b);c.set(e,a)});return new H(C(c),I(a))};function fh(a,b){this.Ea=a;this.aa=b}fh.prototype.jb=g("Ea");fh.prototype.ca=g("aa");function gh(){L.call(this)}t(gh,L);function hh(a,b){L.call(this);this.table=a;this.values=b}t(hh,gh);function ih(a,b){hh.call(this,a,b)}t(ih,hh);function jh(a){L.call(this);this.table=a}t(jh,gh);jh.prototype.toString=function(){return"delete("+this.table.getName()+")"};function kh(a,b){L.call(this);this.table=a;this.xe=b}t(kh,gh);
kh.prototype.toString=function(){var a=[];this.xe&&(a=this.xe.map(function(a){return a.N.getName()},this));return"update("+this.table.getName()+", ["+a.join(",")+"])"};function lh(a){L.call(this);this.J=a}t(lh,gh);lh.prototype.toString=function(){return"select("+this.J.toString()+")"};function mh(a){L.call(this);this.table=a}t(mh,gh);mh.prototype.toString=function(){var a="table_access("+this.table.getName();null===this.table.Za()||(a+=" as "+this.table.Za());return a+")"};
function nh(){L.call(this)}t(nh,gh);nh.prototype.toString=l("cross_product");function oh(a,b){L.call(this);this.f=a;this.Ob=b}t(oh,gh);oh.prototype.toString=function(){var a="project("+this.f.toString();if(null!==this.Ob)var b=this.Ob.map(function(a){return a.m()}).join(", "),a=a+(", groupBy("+b+")");return a+")"};function ph(a){L.call(this);this.O=a}t(ph,gh);ph.prototype.toString=function(){return"order_by("+le(this.O)+")"};function qh(a){L.call(this);this.f=a}t(qh,gh);
qh.prototype.toString=function(){return"aggregation("+this.f.toString()+")"};function rh(a){L.call(this);this.f=a}t(rh,gh);rh.prototype.toString=function(){return"group_by("+this.f.toString()+")"};function sh(a){L.call(this);this.X=a}t(sh,gh);sh.prototype.toString=function(){return"limit("+this.X+")"};function th(a){L.call(this);this.L=a}t(th,gh);th.prototype.toString=function(){return"skip("+this.L+")"};function uh(a,b){L.call(this);this.J=a;this.Rb=b}t(uh,gh);
uh.prototype.toString=function(){return"join(type: "+(this.Rb?"outer":"inner")+", "+this.J.toString()+")"};function vh(){};function wh(){}t(wh,vh);wh.prototype.pb=function(a){this.$=a;this.Wa(this.$);return this.$};wh.prototype.Wa=function(a){if(a instanceof lh){var b=xh(this,a.J),b=yh(this,b);Cg(a,a,b[0],b[1]);a==this.$&&(this.$=b[0]);a=b[0]}M(a).forEach(function(a){this.Wa(a)},this)};function xh(a,b){if(0==M(b).length||"and"!=b.Tb)return[b];var c=M(b).slice().map(function(a){b.removeChild(a);return xh(this,a)},a);return Fa(c)}
function yh(a,b){var c=null,d=null;b.map(function(a,b){var h=new lh(a);0==b?c=h:Wd(d,h);d=h},a);return[c,d]};function zh(){}t(zh,vh);zh.prototype.pb=function(a,b){if(3>b.c.length)return a;this.$=a;this.Wa(this.$);return this.$};zh.prototype.Wa=function(a){if(a instanceof nh)for(;2<M(a).length;){for(var b=new nh,c=0;2>c;c++){var d=Xd(a,0);Wd(b,d)}Vd(a,b,0)}M(a).forEach(function(a){this.Wa(a)},this)};function Ah(){U.call(this,0,0)}t(Ah,U);Ah.prototype.toString=l("cross_product");Ah.prototype.fa=function(a){var b=a[0],c=a[1];a=[];for(var d=I(b),e=I(c),f=0;f<b.entries.length;f++)for(var h=0;h<c.entries.length;h++){var k=Jd(b.entries[f],d,c.entries[h],e);a.push(k)}b=I(b).concat(I(c));return[new H(a,b)]};function Bh(a,b){oe.call(this,a,b);this.Fa=a.l(pc);this.Jb=a.l(qc)}t(Bh,oe);Bh.prototype.getPriority=l(2);Bh.prototype.fe=function(a){0==this.H()?Ch(this,a):this.Oc()};function Ch(a,b){a.vd.forEach(function(a,d){a instanceof ke&&ue(this.Jb,a,b[d])},a)}Bh.prototype.Oc=function(){var a=we(this.Jb,this.ca());0!=a.length&&(a=new qe(this.global,a),xe(this.Fa,a))};function Dh(a){fe.call(this,a)}t(Dh,fe);Dh.prototype.ca=function(){var a=D();a.add(this.c);Eh(this,this.c.getName(),a);return a};function Eh(a,b,c){var d=Fh(a.ba.info(),b,1);Fh(a.ba.info(),b).forEach(c.add.bind(c));d.forEach(function(a){Eh(this,a.getName(),c)},a)}Dh.prototype.clone=function(){var a=new Dh(this.ba);ie(a,this);a.c=this.c;return a};Dh.prototype.bind=function(a){Dh.eb.bind.call(this,a);je(this,a);return this};function Gh(a){fe.call(this,a)}t(Gh,fe);Gh.prototype.ca=function(){var a=D();a.add(this.Ia);var b=this.ba.info();Hh(this.Ia.getName(),b.df).forEach(a.add.bind(a));this.bc&&Fh(b,this.Ia.getName()).forEach(a.add.bind(a));return a};Gh.prototype.clone=function(){var a=new Gh(this.ba);ie(a,this);a.Ia=this.Ia;this.values&&(a.values=this.values instanceof Kd?this.values:this.values.slice());a.bc=this.bc;a.cc=this.cc;return a};
Gh.prototype.bind=function(a){Gh.eb.bind.call(this,a);this.cc&&(this.values=this.cc instanceof Kd?a[this.cc.Aa()]:this.cc.map(function(b){return b instanceof Kd?a[b.Aa()]:b}));return this};function Ih(a){fe.call(this,a)}t(Ih,fe);Ih.prototype.ca=function(){var a=D();a.add(this.table);var b=this.set.map(function(a){return a.N.m()}),c=this.ba.info();Jh(c,b).forEach(a.add.bind(a));Kh(c,b).forEach(a.add.bind(a));return a};Ih.prototype.clone=function(){var a=new Ih(this.ba);ie(a,this);a.table=this.table;a.set=this.set?this.set.slice():this.set;return a};Ih.prototype.bind=function(a){Ih.eb.bind.call(this,a);this.set.forEach(function(b){-1!=b.Wc&&(b.value=a[b.Wc])});je(this,a);return this};function Lh(a,b){if(null==b)return"NULL";switch(a){case 1:return b?1:0;case 3:case 4:return b;case 0:return"'"+ub(b)+"'";default:return"'"+b.toString()+"'"}}function Mh(a,b){var c=a.bc?"INSERT OR REPLACE":"INSERT",d=a.Ia.ib(),c=c+(" INTO "+a.Ia.getName()+"("),c=c+d.map(function(a){return a.getName()}).join(", "),c=c+") VALUES (";return a.values.map(function(a){var f=d.map(function(c){var d=a.s[c.getName()];return b?null!=d?"#":"NULL":Lh(c.H(),d)});return c+f.join(", ")+");"}).join("\n")}
function Nh(a){switch(a){case "between":return"BETWEEN";case "eq":return"=";case "gte":return">=";case "gt":return">";case "in":return"IN";case "lte":return"<=";case "lt":return"<";case "match":return"LIKE";case "neq":return"<>";default:return"UNKNOWN"}}function Oh(a,b,c,d){return a instanceof Kd?"?"+a.Aa().toString():d?null!=a?"#":"NULL":"match"==b?"'"+a.toString()+"'":"in"==b?"("+a.map(function(a){return Lh(c,a)}).join(", ")+")":"between"==b?Lh(c,a[0])+" AND "+Lh(c,a[1]):Lh(c,a).toString()}
function Ph(a,b){return M(a).map(function(a){return"("+Qh(a,b)+")"}).join("and"==a.Tb?" AND ":" OR ")}function Rh(a){return[a.ha.m(),Nh(a.G),a.ka.m()].join(" ")}function Qh(a,b){if(a instanceof be){var c=a.N.m(),d=Nh(a.G),e=Oh(a.value,a.G,a.N.H(),b);return"="==d&&"NULL"==e?[c,"IS NULL"].join(" "):"<>"==d&&"NULL"==e?[c,"IS NOT NULL"].join(" "):[c,d,e].join(" ")}if(a instanceof Eg)return Ph(a,b);if(a instanceof Gg)return Rh(a);throw new F(357,typeof a);}
function Sh(a,b){var c=Qh(a,b);return c?" WHERE "+c:""}function Th(a,b){var c="UPDATE "+a.table.getName()+" SET ",c=c+a.set.map(function(a){var b=a.N.m()+" = ";return-1!=a.Wc?b+"?"+a.Wc.toString():b+Lh(a.N.H(),a.value).toString()}).join(", ");a.u&&(c+=Sh(a.u,b));return c+";"}
function Uh(a,b){var c="*";a.f.length&&(c=a.f.map(function(a){return a.Za()?a.m()+" AS "+a.Za():a.m()}).join(", "));c="SELECT "+c+" FROM ";null!=a.Ab&&0!=a.Ab.size?c+=Vh(a,b):(c+=a.c.map(Wh).join(", "),a.u&&(c+=Sh(a.u,b)));if(a.O)var d=a.O.map(function(a){return a.N.m()+(0==a.mb?" DESC":" ASC")}).join(", "),c=c+(" ORDER BY "+d);a.ja&&(d=a.ja.map(function(a){return a.m()}).join(", "),c+=" GROUP BY "+d);a.X&&(c+=" LIMIT "+a.X.toString());a.L&&(c+=" SKIP "+a.L.toString());return c+";"}
function Wh(a){return K(a)!=a.getName()?a.getName()+" AS "+K(a):a.getName()}function Vh(a,b){for(var c=xg(a.u,function(a){return a instanceof Gg}),d=c.map(Rh),e=Wh(a.c[0]),f=1;f<a.c.length;f++)var h=Wh(a.c[f]),e=a.Ab.has(c[d.length-f].Z())?e+(" LEFT OUTER JOIN "+h):e+(" INNER JOIN "+h),e=e+(" ON ("+d[d.length-f]+")");c=Ud(a.u,0);c instanceof Gg||(e+=" WHERE "+Qh(c,b));return e}
function Xh(a,b){var c=b||!1,d=a.a.clone();if(d instanceof Gh)return Mh(d,c);if(d instanceof Dh){var e="DELETE FROM "+d.c.getName();d.u&&(e+=Sh(d.u,c));return e+";"}if(d instanceof Ih)return Th(d,c);if(d instanceof ke)return Uh(d,c);throw new F(358,typeof d);};function V(a,b){this.global=a;this.yg=a.l(oc);this.Fa=a.l(pc);this.a=b}r("lf.query.BaseBuilder",V);V.prototype.exec=function(){try{this.gb()}catch(a){return cb(a)}return new v(function(a,b){var c=new Bh(this.global,[this.Fc()]);xe(this.Fa,c).then(function(b){a(yd(b[0]))},b)},this)};V.prototype.exec=V.prototype.exec;V.prototype.Sf=function(){var a=function(a){return a.Rc(this.a)+"\n"}.bind(this);return Dg(Yh(this).jb(),a)};V.prototype.explain=V.prototype.Sf;
V.prototype.bind=function(a){this.a.bind(a);return this};V.prototype.bind=V.prototype.bind;V.prototype.Fg=function(a){return Xh(this,a)};V.prototype.toSql=V.prototype.Fg;V.prototype.gb=aa();function Yh(a){if(null==a.ef){var b;b=a.yg;var c=a.a,d=b.ig.create(c);b=b.vg.create(d,c);a.ef=b}return a.ef}V.prototype.Fc=function(){return{context:this.a.clone(),ie:Yh(this)}};function Zh(a){V.call(this,a,new Dh(a.l(rc)))}t(Zh,V);r("lf.query.DeleteBuilder",Zh);Zh.prototype.c=function(a){if(null!=this.a.c)throw new F(515);this.a.c=a;return this};Zh.prototype.from=Zh.prototype.c;Zh.prototype.u=function(a){this.Fd();this.a.u=a;return this};Zh.prototype.where=Zh.prototype.u;Zh.prototype.Fd=function(){if(null==this.a.c)throw new F(548);if(null!=this.a.u)throw new F(516);};Zh.prototype.gb=function(){Zh.eb.gb.call(this);if(null==this.a.c)throw new F(517);};function $h(a,b){V.call(this,a,new Gh(a.l(rc)));this.a.bc=b||!1}t($h,V);r("lf.query.InsertBuilder",$h);$h.prototype.gb=function(){$h.eb.gb.call(this);var a=this.a;if(null==a.Ia||null==a.values)throw new F(518);if(a.bc&&null===a.Ia.Gb().gd())throw new F(519);};$h.prototype.Ia=function(a){if(null!=this.a.Ia)throw new F(520);this.a.Ia=a;return this};$h.prototype.into=$h.prototype.Ia;
$h.prototype.values=function(a){if(null!=this.a.values)throw new F(521);a instanceof Kd||a.some(function(a){return a instanceof Kd})?this.a.cc=a:this.a.values=a;return this};$h.prototype.values=$h.prototype.values;function ai(a){return bi("and",Array.prototype.slice.call(arguments))}r("lf.op.and",ai);r("lf.op.or",function(a){return bi("or",Array.prototype.slice.call(arguments))});function bi(a,b){var c=new Eg(a);b.forEach(function(a){Wd(c,a)});return c}r("lf.op.not",function(a){a.yd(!0);return a});function W(a,b){V.call(this,a,new ke(a.l(rc)));this.Me=this.Ad=!1;this.a.f=b;ci(this);di(this)}t(W,V);r("lf.query.SelectBuilder",W);W.prototype.gb=function(){W.eb.gb.call(this);var a=this.a;if(null==a.c)throw new F(522);if(q(a.Sb)&&!q(a.X)||q(a.$b)&&!q(a.L))throw new F(523);null!=this.a.ja?ei(this):fi(this)};function ci(a){var b=a.a.f.filter(function(a){return a instanceof T&&"DISTINCT"==a.Lb},a);if(0!=b.length&&(1!=b.length||1!=a.a.f.length))throw new F(524);}
function ei(a){var b=a.a.f.filter(function(a){return!(a instanceof T)}).map(function(a){return a.m()}),c=!1;if(0==a.a.ja.length||0==a.a.f.length)c=!0;else{var d=a.a.ja.map(function(a){return a.m()});(c=b.some(function(a){return-1==d.indexOf(a)}))||(c=a.a.ja.some(function(a){a=a.H();return 6==a||0==a}))}if(c)throw new F(525);}function fi(a){var b=a.a.f.some(function(a){return a instanceof T},a);a=a.a.f.some(function(a){return!(a instanceof T)},a)||0==a.a.f.length;if(b&&a)throw new F(526);}
function di(a){a.a.f.forEach(function(a){if(a instanceof T&&!gi(a.Lb,a.H()))throw new F(527,a.m());},a)}function hi(a,b){if(null==a.a.c)throw new F(b);}W.prototype.c=function(a){if(this.Me)throw new F(515);this.Me=!0;null==this.a.c&&(this.a.c=[]);this.a.c.push.apply(this.a.c,Array.prototype.slice.call(arguments));return this};W.prototype.from=W.prototype.c;W.prototype.u=function(a){hi(this,548);if(this.Ad)throw new F(516);this.Ad=!0;ii(this,a);return this};W.prototype.where=W.prototype.u;
function ii(a,b){if(null!=a.a.u){var c=ai(b,a.a.u);a.a.u=c}else a.a.u=b}W.prototype.bg=function(a,b){hi(this,542);if(this.Ad)throw new F(547);this.a.c.push(a);ii(this,b);return this};W.prototype.innerJoin=W.prototype.bg;W.prototype.gg=function(a,b){hi(this,542);if(!(b instanceof Gg))throw new F(541);if(this.Ad)throw new F(547);this.a.c.push(a);null==this.a.Ab&&(this.a.Ab=D());var c=b;K(a)!=K(b.ka.I())&&(c=b.reverse());this.a.Ab.add(c.Z());ii(this,c);return this};W.prototype.leftOuterJoin=W.prototype.gg;
W.prototype.X=function(a){if(null!=(this.a.X||this.a.Sb))throw new F(528);if(a instanceof Kd)this.a.Sb=a;else{if(0>a)throw new F(531);this.a.X=a}return this};W.prototype.limit=W.prototype.X;W.prototype.L=function(a){if(null!=(this.a.L||this.a.$b))throw new F(529);if(a instanceof Kd)this.a.$b=a;else{if(0>a)throw new F(531);this.a.L=a}return this};W.prototype.skip=W.prototype.L;W.prototype.O=function(a,b){hi(this,549);null==this.a.O&&(this.a.O=[]);this.a.O.push({N:a,mb:null!=b?b:1});return this};
W.prototype.orderBy=W.prototype.O;W.prototype.ja=function(a){hi(this,549);if(null!=this.a.ja)throw new F(530);null==this.a.ja&&(this.a.ja=[]);this.a.ja.push.apply(this.a.ja,Array.prototype.slice.call(arguments));return this};W.prototype.groupBy=W.prototype.ja;function gi(a,b){switch(a){case "COUNT":case "DISTINCT":return!0;case "AVG":case "GEOMEAN":case "STDDEV":case "SUM":return 4==b||3==b;case "MAX":case "MIN":return 4==b||3==b||5==b||2==b}return!1}
W.prototype.clone=function(){var a=new W(this.global,this.a.f);a.a=this.a.clone();a.a.$c=null;return a};W.prototype.clone=W.prototype.clone;function ji(a,b){V.call(this,a,new Ih(a.l(rc)));this.a.table=b}t(ji,V);r("lf.query.UpdateBuilder",ji);ji.prototype.set=function(a,b){var c={Wc:b instanceof Kd?b.Aa():-1,N:a,value:b};null!=this.a.set?this.a.set.push(c):this.a.set=[c];return this};ji.prototype.set=ji.prototype.set;ji.prototype.u=function(a){this.Fd();this.a.u=a;return this};ji.prototype.where=ji.prototype.u;ji.prototype.Fd=function(){if(null!=this.a.u)throw new F(516);};
ji.prototype.gb=function(){ji.eb.gb.call(this);if(null==this.a.set)throw new F(532);if(this.a.set.some(function(a){return a.value instanceof Kd}))throw new F(501);};function ki(a){this.a=a;this.Ea=null}ki.prototype.jc=function(){null===this.Ea&&(this.Ea=this.ed());return this.Ea};function li(a){ki.call(this,a)}t(li,ki);li.prototype.ed=function(){return this.a.bc?new ih(this.a.Ia,this.a.values):new hh(this.a.Ia,this.a.values)};function mi(a){ki.call(this,a)}t(mi,ki);mi.prototype.ed=function(){var a=new kh(this.a.table,this.a.set),b=null!=this.a.u?new lh(this.a.u.Mb()):null,c=new mh(this.a.table);null===b?Wd(a,c):(Wd(b,c),Wd(a,b));return a};function ni(a,b,c){this.Ea=a;this.je=b;this.Wb=c}ni.prototype.jc=function(){this.Wb.forEach(function(a){this.Ea=a.pb(this.Ea,this.je)},this);return this.Ea};function oi(a,b){ki.call(this,a);this.Wb=b}t(oi,ki);oi.prototype.ed=function(){var a=new jh(this.a.c),b=null!=this.a.u?new lh(this.a.u.Mb()):null,c=new mh(this.a.c);null===b?Wd(a,c):(Wd(b,c),Wd(a,b));return(new ni(a,this.a,this.Wb)).jc()};function pi(){}t(pi,vh);pi.prototype.pb=function(a,b){if(2>b.c.length)return a;this.$=a;this.Wa(this.$,b);return this.$};pi.prototype.Wa=function(a,b){if(a instanceof lh&&a.J instanceof Gg){var c=a.J.Z(),d=Ud(a,0);d instanceof nh&&(c=null!=b.Ab&&b.Ab.has(c),c=new uh(a.J,c),Cg(a,d,c,c),a==this.$&&(this.$=c),a=c)}M(a).forEach(function(a){this.Wa(a,b)},this)};function qi(){this.Vc=D()}t(qi,vh);qi.prototype.pb=function(a,b){this.Vc.clear();if(!q(b.u))return a;this.$=a;this.Wa(this.$);this.Vc.clear();return this.$};qi.prototype.Wa=function(a){if(ri(a)){var b=a.J instanceof be?si(this,a):ti(this,a);this.Vc.add(a);b==a&&(b=Ud(a,0));null!==b&&(fa(b.getParent())&&(this.$=b),ri(b)&&!this.Vc.has(b)&&this.Wa(b))}else M(a).forEach(function(a){this.Wa(a)},this)};
function ui(a,b,c){var d=b;if(Ud(b,0)instanceof lh)d=Ag(b),ui(a,b,c);else if(vi(b)){var e=[],d=Bg(b,c,function(a){a=new lh(a.J);e.push(a);return a});e.forEach(function(a){ui(this,a,c)},a)}return d}function si(a,b){var c=D([K(b.J.N.I())]),d=function(a){return wi(this,a,c)}.bind(a);return ui(a,b,d)}function ti(a,b){var c=D([K(b.J.ha.I()),K(b.J.ka.I())]),d=function(a){return wi(this,a,c)}.bind(a);return ui(a,b,d)}
function wi(a,b,c){var d=D();wg(b).forEach(function(a){d.add(K(a.table))},a);b instanceof mh&&d.add(K(b.table));return xc(d,c)}function ri(a){return a instanceof lh&&!(a.J instanceof Eg)}function vi(a){a=Ud(a,0);return a instanceof nh||a instanceof uh};function xi(a,b){ki.call(this,a);this.Wb=b;this.jf=this.$e=this.rf=this.cf=this.De=this.Pe=this.qf=this.Je=this.tf=null}t(xi,ki);
xi.prototype.ed=function(){yi(this);2<=this.a.c.length&&(this.Je=new nh);this.qf=null!=this.a.u?new lh(this.a.u.Mb()):null;this.a.O&&(this.cf=new ph(this.a.O));null!=this.a.L&&0<this.a.L&&(this.rf=new th(this.a.L));null!=this.a.X&&(this.$e=new sh(this.a.X));null!=this.a.ja&&(this.Pe=new rh(this.a.ja));zi(this);this.jf=new oh(this.a.f||[],this.a.ja||null);var a=Ai(this);return(new ni(a,this.a,this.Wb)).jc()};
function Ai(a){for(var b=[a.$e,a.rf,a.jf,a.cf,a.De,a.Pe,a.qf,a.Je],c=null,d=null,e=0;e<b.length;e++){var f=b[e];null!==f&&(null===d?d=f:Wd(b[c],f),c=e)}a.tf.forEach(function(a){Wd(b[c],a)});return d}function yi(a){a.tf=a.a.c.map(function(a){return new mh(a)},a)}function zi(a){var b=a.a.f.filter(function(a){return a instanceof T});null!=a.a.O&&a.a.O.forEach(function(a){a.N instanceof T&&b.push(a.N)});0<b.length&&(a.De=new qh(b))};function Bi(){this.qe=[new wh,new zh,new qi,new pi];this.Nd=[new wh]}Bi.prototype.create=function(a){var b=null;if(a instanceof Gh)b=new li(a);else if(a instanceof Dh)b=new oi(a,this.Nd);else if(a instanceof ke)b=new xi(a,this.qe);else if(a instanceof Ih)b=new mi(a);else throw new F(513);b=b.jc();return new fh(b,a.ca())};function Ci(a){U.call(this,0,1);this.V=a}t(Ci,U);Ci.prototype.toString=function(){return"delete("+this.V.getName()+")"};Ci.prototype.fa=function(a,b){var c=a[0].entries.map(function(a){return a.ua});b.remove(this.V,c);return[Cd()]};function Di(a,b){U.call(this,0,-1);this.table=b;this.F=a.l(nc)}t(Di,U);Di.prototype.toString=function(){return"get_row_count("+this.table.getName()+")"};Di.prototype.fa=function(){var a=this.F.get(Ze(this.table)),b=new H([],[this.table.getName()]),c=Rg(),a=a.Oa().na;null===b.Ya&&(b.Ya=B());b.Ya.set(c.m(),a);return[b]};function Ei(a,b){U.call(this,0,-1);this.W=a.l(mc);this.F=a.l(nc);this.table=b}t(Ei,U);Ei.prototype.toString=function(){var a="table_access("+this.table.getName();null===this.table.Za()||(a+=" as "+this.table.Za());return a+")"};Ei.prototype.fa=function(){var a=this.F.get(Ze(this.table)).$a();return[Fd(rf(this.W,a),[K(this.table)])]};function Fi(a){this.h=a}t(Fi,vh);Fi.prototype.pb=function(a,b){this.$=a;if(!this.Gd(b))return a;var c=xg(a,function(a){return a instanceof Ei})[0],d=new Di(this.h,c.table);Cg(c,c,d,d);return this.$};Fi.prototype.Gd=function(a){return 1==a.f.length&&1==a.c.length&&null==a.u&&null==a.X&&null==a.L&&null==a.ja?(a=a.f[0],a instanceof T&&"COUNT"==a.Lb&&a.child instanceof Qg):!1};function Gi(a){U.call(this,0,1);this.Oe=a}t(Gi,U);Gi.prototype.toString=function(){return"groupBy("+this.Oe.map(function(a){return a.m()}).toString()+")"};Gi.prototype.fa=function(a){return Hi(this,a[0])};function Hi(a,b){var c=new Tc,d=function(a){return this.Oe.map(function(b){return J(a,b)},this).join(",")}.bind(a);b.entries.forEach(function(a){c.set(d(a),a)},a);return c.keys().map(function(a){return new H(c.get(a),I(b))},a)};function Ii(a,b,c){U.call(this,0,0);this.F=a.l(nc);this.W=a.l(mc);this.J=b;this.Rb=c;this.Dd="eq"==this.J.G?0:2;this.Qe=null}t(Ii,U);var Ji=["hash","index_nested_loop","nested_loop"];Ii.prototype.toString=function(){return"join(type: "+(this.Rb?"outer":"inner")+", impl: "+Ji[this.Dd]+", "+this.J.toString()+")"};
Ii.prototype.fa=function(a){switch(this.Dd){case 0:return[Kg(this.J,a[0],a[1],this.Rb)];case 1:return[Lg(this.J,a[0],a[1],this.Qe,this.W)];default:var b=this.J,c=a[0];a=a[1];var d=this.Rb,e=[c,a];d||(e=Hg(b,c,a));c=e[0];a=e[1];for(var e=[],f=I(c),h=I(a),k=c.entries.length,n=a.entries.length,A=n+256-1>>8,O=0;O<A;){for(var da=0;da<k;da++){var Eb=!1,bg=J(c.entries[da],b.ha);if(null!==bg)for(var Vc=Math.min(O+1<<8,n),$a=O<<8;$a<Vc;$a++)if(b.yc(bg,J(a.entries[$a],b.ka))){var Eb=!0,re=Jd(c.entries[da],
f,a.entries[$a],h);e.push(re)}d&&!Eb&&e.push(Jg(b,c.entries[da],f))}O++}b=I(c).concat(I(a));return[new H(e,b)]}};function Ki(a,b){a.Dd=1;var c=a.F.get(b.Aa().m());a.Qe={Yf:b,ng:b==a.J.ha?a.J.ka:a.J.ha,index:c}};function Li(a){U.call(this,0,-1);this.kf=a}t(Li,U);Li.prototype.toString=function(){return"no_op_step("+I(this.kf[0]).join(",")+")"};Li.prototype.fa=g("kf");function Mi(){}t(Mi,vh);Mi.prototype.pb=function(a,b){this.$=a;if(!this.Gd(b))return a;xg(a,function(a){return a instanceof Ii}).forEach(this.xg,this);return this.$};Mi.prototype.Gd=function(a){return 1<a.c.length};
Mi.prototype.xg=function(a){if("eq"==a.J.G&&!a.Rb){var b=function(b){if(!(b instanceof Ei))return null;b=K(b.table)==K(a.J.ka.I())?a.J.ka:a.J.ha;return fa(b.Aa())?null:b},c=b(Ud(a,0)),b=b(Ud(a,1));if(null!==c||null!==b){b=null===b?c:b;Ki(a,b);var d=new H([],[K(b.I())]);Yd(a,new Li([d]),b==c?0:1)}}};function Ni(a){a=a.map(function(a){return a.sa()});a=Hb.apply(null,a);var b=[];Gb(a,function(a){b.push(a)});return b}function Oi(a){this.Pb=a}Oi.prototype.fd=function(){return 1==this.Pb.f.length?[vd()]:[this.Pb.f.map(function(){return vd()})]};function Pi(a,b){this.Pb=a;this.Da=b;this.Kd=this.Ye=null}
function Qi(a,b){var c=B();a.Da.keys().forEach(function(a){var e=this.Da.get(a).map(function(a){return ge(b,a)},this),f=new tg([vd()]);e.forEach(function(a){var b=null;"between"==a.G?b=new qd(ee(a,a.value[0]),ee(a,a.value[1]),!1,!1):(b=ee(a,a.value),b="eq"==a.G?new qd(b,b,!1,!1):"gte"==a.G?new qd(b,G,!1,!1):"gt"==a.G?new qd(b,G,!0,!1):"lte"==a.G?new qd(G,b,!1,!1):new qd(G,b,!1,!0));a=a.ab?rd(b):[b];a=new tg(a);f=ug(f,a)});c.set(a,f)},a);return c}
Pi.prototype.fd=function(a){if(this.Ye==a)return this.Kd;for(var b=Qi(this,a),c=this.Pb.f.length-1;0<=c;c--){var d=this.Pb.f[c];if(null!==(b.get(d.ba.getName())||null))break;b.set(d.ba.getName(),new tg([vd()]))}this.Kd=1==this.Pb.f.length?C(b)[0].sa():Ni(Ri(this,b));this.Ye=a;return this.Kd};function Ri(a,b){var c=B(),d=0;a.Pb.f.forEach(function(a){c.set(a.ba.getName(),d);d++});return bc(b).sort(function(a,b){return c.get(a)-c.get(b)}).map(function(a){return b.get(a)})};function Si(a,b){this.uf=b;this.F=a.l(nc)}function Ti(a,b,c){c=c.filter(a.cg,a);if(0==c.length)return null;a=Ui(a,c);if(0==a.length)return null;if(1==a.length)return a[0];var d=Number.MAX_VALUE;return a.reduce(function(a,c){var h=Vi(c,b);return h<d?(d=h,c):a},null)}
function Ui(a,b){return a.uf.Ba().map(function(a){a=new Wi(this.F,a);Xi(a,b);return a},a).filter(function(a){if(null===a.Da)a=!1;else{for(var b=!1,e=!0,f=0;f<a.yb.f.length;f++){var h=a.Da.has(a.yb.f[f].ba.getName());if(b&&h){e=!1;break}h||(b=!0)}a=e}return a})}Si.prototype.cg=function(a){var b;if(b=a instanceof be)ce(a),b=null!==a.value&&("between"==a.G||"eq"==a.G||"gt"==a.G||"gte"==a.G||"lt"==a.G||"lte"==a.G);return b?a.N.I()==this.uf:!1};
function Wi(a,b){this.F=a;this.yb=b;this.Zf=D(this.yb.f.map(function(a){return a.ba.getName()}));this.Zd=this.Da=null}function Yi(a){null===a.Zd&&(a.Zd=new Pi(a.yb,a.Da));return a.Zd}function Xi(a,b){b.forEach(function(a){var b=a.ib()[0].getName();this.Zf.has(b)&&(null===this.Da&&(this.Da=new Tc),this.Da.set(b,a.Z()))},a)}function Vi(a,b){var c=Yi(a).fd(b),d=a.F.get(a.yb.m());return c.reduce(function(a,b){return a+d.cd(b)},0)};function Zi(a,b,c,d){U.call(this,0,-1);this.F=a.l(nc);this.index=b;this.Xe=c;this.ne=d;this.Uc=this.Tc=!1}t(Zi,U);Zi.prototype.toString=function(){return"index_range_scan("+this.index.m()+", ?, "+(this.ne?"reverse":"natural")+(this.Tc?", limit:?":"")+(this.Uc?", skip:?":"")+")"};Zi.prototype.Rc=function(a){var b=this.toString(),c=this.Xe.fd(a),b=b.replace("?",c.toString());this.Tc&&(b=b.replace("?",a.X.toString()));this.Uc&&(b=b.replace("?",a.L.toString()));return b};
Zi.prototype.fa=function(a,b,c){a=this.Xe.fd(c);b=this.F.get(this.index.m());c=(1==a.length&&a[0]instanceof qd&&wd(a[0])?vf(b.get(a[0].c),!1,this.Tc?c.X:void 0,this.Uc?c.L:void 0):b.$a(a,this.ne,this.Tc?c.X:void 0,this.Uc?c.L:void 0)).map(function(a){return new y(a,{})},this);return[Fd(c,[this.index.Qc])]};function $i(a){U.call(this,0,1);this.ud=a}t($i,U);$i.prototype.toString=l("select(?)");$i.prototype.Rc=function(a){a=ge(a,this.ud);return this.toString().replace("?",a.toString())};$i.prototype.fa=function(a,b,c){return[ge(c,this.ud).eval(a[0])]};function aj(a,b){U.call(this,0,1);this.W=a.l(mc);this.V=b}t(aj,U);aj.prototype.toString=function(){return"table_access_by_row_id("+this.V.getName()+")"};aj.prototype.fa=function(a){return[Fd(rf(this.W,zd(a[0])),[K(this.V)])]};function bj(a){this.h=a}t(bj,vh);bj.prototype.pb=function(a,b){this.$=a;xg(a,function(a){return a instanceof Ei}).forEach(function(a){var d=cj(a);if(0!=d.length){var e=Ti(new Si(this.h,a.table),b,d.map(function(a){return ge(b,a.ud)}));if(null!==e){var f=B();d.forEach(function(a){f.set(a.ud,a)},this);this.$=dj(this,e,f,a)}}},this);return this.$};function cj(a){var b=[];for(a=a.getParent();a;)a instanceof $i&&b.push(a),a=a.getParent();return b}
function dj(a,b,c,d){(null===b.Da?[]:b.Da.values()).map(function(a){return c.get(a)}).forEach(yg);b=new Zi(a.h,b.yb,Yi(b),!1);a=new aj(a.h,d.table);Wd(a,b);Cg(d,d,a,b);return b.jb()};function ej(a,b){U.call(this,0,-1);this.F=a.l(nc);this.V=b}t(ej,U);ej.prototype.toString=function(){return"insert("+this.V.getName()+")"};ej.prototype.fa=function(a,b,c){fj(this.V,c.values,this.F);b.zb(this.V,c.values);return[Fd(c.values,[this.V.getName()])]};function fj(a,b,c){a=a.Gb().gd();if(null===a?0:a.f[0].autoIncrement){var d=a.f[0].ba.getName();c=c.get(a.m()).max();var e=null===c?0:c[0];b.forEach(function(a){if(0==a.s[d]||null==a.s[d])e++,a.s[d]=e})}}
function gj(a,b){U.call(this,0,-1);this.F=a.l(nc);this.V=b}t(gj,U);gj.prototype.toString=function(){return"insert_replace("+this.V.getName()+")"};gj.prototype.fa=function(a,b,c){fj(this.V,c.values,this.F);b.Vd(this.V,c.values);return[Fd(c.values,[this.V.getName()])]};function hj(){U.call(this,0,1)}t(hj,U);hj.prototype.toString=l("limit(?)");hj.prototype.Rc=function(a){return this.toString().replace("?",a.X.toString())};hj.prototype.fa=function(a,b,c){a[0].entries.splice(c.X);return a};function ij(a){U.call(this,0,1);this.O=a}t(ij,U);m=ij.prototype;m.toString=function(){return"order_by("+le(this.O)+")"};m.fa=function(a){if(1==a.length){var b;b=a[0];for(var c=null,d=0;d<this.O.length;d++){var e=Sg(this.O[d].N);if(null!==b.Ya&&b.Ya.has(e.m())){c=e;break}}b=c;(null===b?a[0]:Ad(a[0],b)).entries.sort(this.Pf.bind(this))}else a.sort(this.Ag.bind(this));return a};
m.S=function(a,b){var c=null,d=null,e=null,f=-1;do f++,e=this.O[f].N,c=this.O[f].mb,d=a(e),e=b(e);while(d==e&&f+1<this.O.length);d=d<e?-1:d>e?1:0;return 1==c?d:-d};m.Ag=function(a,b){return this.S(function(b){return b instanceof T?Ad(a,b):J(a.entries[a.entries.length-1],b)},function(a){return a instanceof T?Ad(b,a):J(b.entries[b.entries.length-1],a)})};m.Pf=function(a,b){return this.S(function(b){return J(a,b)},function(a){return J(b,a)})};function jj(a,b){this.Ka=a;this.K=b}function kj(a){return a.K.some(function(a){return a instanceof T},a)?lj(a):mj(a)}function lj(a){if(1==a.K.length&&"DISTINCT"==a.K[0].Lb)return a=Ad(a.Ka,a.K[0]).entries.map(function(a){var b=new Gd(new y(-1,{}),1<this.Ka.M.size);Id(b,this.K[0],J(a,this.K[0].child));return b},a),new H(a,[]);var b=new Gd(new y(-1,{}),1<a.Ka.M.size);a.K.forEach(function(a){var d=a instanceof T?Ad(this.Ka,a):J(this.Ka.entries[0],a);Id(b,a,d)},a);return new H([b],I(a.Ka))}
function mj(a){var b=Array(a.Ka.entries.length),c=1<a.Ka.M.size;a.Ka.entries.forEach(function(a,e){b[e]=new Gd(new y(a.ua.id(),{}),c);this.K.forEach(function(c){Id(b[e],c,J(a,c))},this)},a);return new H(b,I(a.Ka))}function nj(a,b){var c=a.map(function(a){return kj(new jj(a,b)).entries[0]});return new H(c,I(a[0]))};function oj(a,b){U.call(this,0,1);this.f=a;this.Ob=b}t(oj,U);oj.prototype.toString=function(){var a="project("+this.f.toString();if(null!==this.Ob)var b=this.Ob.map(function(a){return a.m()}).join(", "),a=a+(", groupBy("+b+")");return a+")"};oj.prototype.fa=function(a){0==a.length?a=[Cd()]:1==a.length?(a=a[0],a=[0==this.f.length?a:kj(new jj(a,this.f))]):a=[nj(a,this.f)];return a};function pj(a){return a.f.some(function(a){return a instanceof T})||null!==a.Ob};function qj(){U.call(this,0,1)}t(qj,U);qj.prototype.toString=l("skip(?)");qj.prototype.Rc=function(a){return this.toString().replace("?",a.L.toString())};qj.prototype.fa=function(a,b,c){return[new H(a[0].entries.slice(c.L),I(a[0]))]};function rj(){}t(rj,vh);rj.prototype.pb=function(a,b){if(!q(b.X)&&!q(b.L))return a;var c=sj(a);if(null===c)return a;xg(a,function(a){return a instanceof hj||a instanceof qj}).forEach(function(a){a instanceof hj?c.Tc=!0:c.Uc=!0;yg(a)},this);return c.jb()};function sj(a){a=xg(a,function(a){return a instanceof Zi},function(a){return a instanceof oj&&pj(a)||a instanceof ij||1!=M(a).length||a instanceof $i});return 0<a.length?a[0]:null};function tj(a){this.h=a}t(tj,vh);tj.prototype.pb=function(a,b){var c=uj(a,b);if(null===c)return a;var d;a:{var e=c;d=vj(Ud(c,0));if(null!==d){var f;f=c.O;for(var h=null,k=d.table.Ba(),n=0;n<k.length&&null===h;n++)h=wj(k[n],f);f=h;if(null===f){d=e;break a}e=new Zi(this.h,f.yb,new Oi(f.yb),f.Ue);f=new aj(this.h,d.table);Wd(f,e);yg(c);e=Cg(d,d,f,e)}d=e}if(d==c)a:if(d=c,e=xj(Ud(c,0)),null!==e){f=wj(e.index,c.O);if(null===f)break a;e.ne=f.Ue;d=yg(c).parent}return d.jb()};
function xj(a){a=xg(a,function(a){return a instanceof Zi},function(a){return 1!=M(a).length});return 0<a.length?a[0]:null}function vj(a){a=xg(a,function(a){return a instanceof Ei},function(a){return 1!=M(a).length});return 0<a.length?a[0]:null}function uj(a,b){return q(b.O)?xg(a,function(a){return a instanceof ij})[0]:null}function wj(a,b){if(a.f.length!=b.length||!b.every(function(b,c){return b.N.getName()==a.f[c].ba.getName()}))return null;var c=yj(b,a);return c[0]||c[1]?{yb:a,Ue:c[1]}:null}
function yj(a,b){var c=a.reduce(function(a,b){return a<<1|(0==b.mb?0:1)},0),d=b.f.reduce(function(a,b){return a<<1|(0==b.mb?0:1)},0),c=c^d;return[0==c,c==Math.pow(2,Math.max(a.length,b.f.length))-1]};function zj(a,b,c){this.Ea=a;this.je=b;this.Wb=c}zj.prototype.jc=function(){this.Wb.forEach(function(a){this.Ea=a.pb(this.Ea,this.je)},this);return this.Ea};function Aj(a,b){U.call(this,0,1);this.V=a;this.Ig=b}t(Aj,U);Aj.prototype.toString=function(){return"update("+this.V.getName()+")"};Aj.prototype.fa=function(a,b){var c=a[0].entries.map(function(a){var b=this.V.Fb(a.ua.Ga());this.Ig.forEach(function(a){b.s[a.N.getName()]=a.value},this);return b},this);b.update(this.V,c);return[Cd()]};function Bj(a){this.h=a;this.qe=[new Mi,new bj(this.h),new tj(this.h),new rj,new Fi(this.h)];this.Nd=[new bj(this.h)]}Bj.prototype.create=function(a,b){var c=a.jb();if(c instanceof ih||c instanceof hh)return Cj(this,a,b);if(c instanceof oh||c instanceof sh||c instanceof th)return Cj(this,a,b,this.qe);if(c instanceof jh||c instanceof kh)return Cj(this,a,b,this.Nd);throw new F(8);};function Cj(a,b,c,d){a=vg(b.jb(),a.kg.bind(a));null!=d&&(a=(new zj(a,c,d)).jc());return new me(a,b.ca())}
Bj.prototype.kg=function(a){if(a instanceof oh)return new oj(a.f,a.Ob);if(a instanceof rh)return new Gi(a.f);if(a instanceof qh)return new Wg(a.f);if(a instanceof ph)return new ij(a.O);if(a instanceof th)return new qj;if(a instanceof sh)return new hj;if(a instanceof lh)return new $i(a.J.Z());if(a instanceof nh)return new Ah;if(a instanceof uh)return new Ii(this.h,a.J,a.Rb);if(a instanceof mh)return new Ei(this.h,a.table);if(a instanceof jh)return new Ci(a.table);if(a instanceof kh)return new Aj(a.table,
a.xe);if(a instanceof ih)return new gj(this.h,a.table);if(a instanceof hh)return new ej(this.h,a.table);throw new F(514);};function Dj(a){this.ig=new Bi;this.vg=new Bj(a)};function Ej(){this.af=B()}function Fj(a,b){var c=a.af.get(b.getName())||null;null===c&&(c=new Gj,a.af.set(b.getName(),c));return c}function Hj(a,b,c,d){c.forEach(function(a){a=Fj(this,a);0==d?(a.bb=null,a.zc=b):3==d?(null===a.Zb&&(a.Zb=D()),a.Zb.add(b),null===a.Ta&&(a.Ta=D()),a.Ta.delete(b)):1==d?(null===a.Ta&&(a.Ta=D()),a.Ta.add(b)):2==d&&(a.bb=b)},a)}
function Ij(a,b,c,d){var e=!0;c.forEach(function(a){if(e){a=Fj(this,a);var c=null===a.Ta||0==a.Ta.size;e=0==d?(null===a.Zb||0==a.Zb.size)&&c&&null===a.zc&&null!==a.bb&&a.bb==b:3==d?null===a.zc&&null===a.bb&&null!==a.Ta&&a.Ta.has(b):1==d?null===a.bb:c&&(null===a.bb||a.bb==b)}},a);return e}function Jj(a,b,c,d){var e=Ij(a,b,c,d);e&&Hj(a,b,c,d);return e}Ej.prototype.releaseLock=function(a,b){b.forEach(function(b){Fj(this,b).releaseLock(a)},this)};
function Kj(a,b){b.forEach(function(a){Fj(this,a).bb=null},a)}function Gj(){this.Zb=this.Ta=this.bb=this.zc=null}Gj.prototype.releaseLock=function(a){this.zc==a&&(this.zc=null);this.bb==a&&(this.bb=null);null===this.Ta||this.Ta.delete(a);null===this.Zb||this.Zb.delete(a)};function Lj(){this.Vb=new Mj;this.Ic=new Ej}function xe(a,b){(2>b.getPriority()||2>b.getPriority())&&Kj(a.Ic,b.ca());a.Vb.zb(b);Nj(a);return b.Nb().da}function Nj(a){for(var b=a.Vb.sa(),c=0;c<b.length;c++){var d=b[c],e=!1;if(e=0==d.H()?Oj(a,d,1,3):Oj(a,d,2,0))a.Vb.remove(d),e=a,d.exec().then(e.sg.bind(e,d),e.rg.bind(e,d))}}function Oj(a,b,c,d){var e=!1;Jj(a.Ic,b.Z(),b.ca(),c)&&(e=Jj(a.Ic,b.Z(),b.ca(),d));return e}Lj.prototype.sg=function(a,b){this.Ic.releaseLock(a.Z(),a.ca());a.Nb().resolve(b);Nj(this)};
Lj.prototype.rg=function(a,b){this.Ic.releaseLock(a.Z(),a.ca());a.Nb().reject(b);Nj(this)};function Mj(){this.Vb=[]}Mj.prototype.zb=function(a){uf(this.Vb,a,function(a,c){var d=a.getPriority()-c.getPriority();return 0==d?a.Z()-c.Z():d})};Mj.prototype.sa=function(){return this.Vb.slice()};Mj.prototype.remove=function(a){var b=this.Vb;a=xa(b,a);var c;(c=0<=a)&&Array.prototype.splice.call(b,a,1);return c};function Pj(a,b){this.Od=Ld.Dc();this.ke=a;this.qd=b;this.K=Qj(this)}function Qj(a){if(0<a.ke.f.length)return a.ke.f;var b=[];a.ke.c.forEach(function(a){a.ib().forEach(function(a){b.push(a)})});return b}Pj.prototype.S=function(a,b){return this.K.every(function(c){return Rd(this.Od,c.H(),"eq")(J(a,c),J(b,c))},this)};
function Rj(a,b,c){var d=null===b?[]:b.entries,e=xb(d,c.entries,a.S.bind(a),function(a){return d[a]});b=[];for(var f=0,h=0;h<d.length;h++){var k=d[h];e[f]==k?f++:(k=a.qd.splice(f,1),k=Sj(h,k,0,a.qd),b.push(k))}e=xb(d,c.entries,a.S.bind(a),function(a,b){return c.entries[b]});for(h=f=0;h<c.entries.length;h++)k=c.entries[h],e[f]==k?f++:(a.qd.splice(h,0,k.ua.s),k=Sj(h,[],1,a.qd),b.push(k));return b}function Sj(a,b,c,d){return{Kg:c,index:a,object:d,Mg:b,type:"splice"}};function Tj(){this.hc=B()}Tj.prototype.Cd=function(a,b){var c=ka(a.a).toString(),d=this.hc.get(c)||null;null===d&&(d=new Uj(a),this.hc.set(c,d));d.Cd(b)};Tj.prototype.le=function(a,b){var c=ka(a.a).toString(),d=this.hc.get(c)||null;d.le(b);0<d.Kc.size||this.hc.delete(c)};function we(a,b){var c=D();b.forEach(function(a){c.add(a.getName())});var d=[];a.hc.forEach(function(a){a=a.Fc();a.context.c.some(function(a){return c.has(a.getName())})&&d.push(a)});return d}
function ue(a,b,c){b=ka(null!=b.$c?b.$c:b).toString();a=a.hc.get(b)||null;null!==a&&Vj(a,c)}function Uj(a){this.Gf=a;this.Kc=D();this.pg=[];this.Ze=null;this.Nf=new Pj(a.a,this.pg)}Uj.prototype.Cd=function(a){this.Kc.has(a)||this.Kc.add(a)};Uj.prototype.le=function(a){return this.Kc.delete(a)};Uj.prototype.Fc=function(){var a=this.Gf;return{context:a.a,ie:Yh(a)}};function Vj(a,b){var c=Rj(a.Nf,a.Ze,b);a.Ze=b;0<c.length&&a.Kc.forEach(function(a){a(c)})};function Wj(a,b){var c=a.l(rc),d=b||{},e=new qf(c);a.ob(mc,e);var e=null,f=!1;null!=d.storeType?e=d.storeType:(e=$b(),e=e.$f?0:e.Jg?4:1);switch(e){case 0:e=new We(a,c);break;case 1:e=new bf(c);break;case 5:e=new df(c);break;case 4:e=new nf(a,c,d.webSqlDbSize);break;case 3:e=new Je(c,d.firebase);f=!0;break;default:throw new F(300);}a.ob(lc,e);var h=new sg;a.ob(nc,h);return e.Ha(d.onUpgrade).then(function(){var b=new Dj(a);a.ob(oc,b);b=new Lj;a.ob(pc,b);b=new Tj;a.ob(qc,b);return h.Ha(c)}).then(function(){if(f){var b=
new ye(a);b.La.subscribe(b.de.bind(b))}return(new lg(a)).Ha(c)})};function Xj(a){this.h=a;this.i=a.l(rc);this.aa=D(this.i.ra());this.cb=x()}m=Xj.prototype;m.exec=function(){var a=this.h.l(nc),b=this.h.l(mc),c={};this.i.ra().forEach(function(d){var f=a.get(Ze(d)).$a(),f=rf(b,f).map(function(a){return a.s});c[d.getName()]=f});var d={name:this.i.name(),version:this.i.version(),tables:c},d=new Gd(new y(-1,d),!0);return w([new H([d],[])])};m.H=l(0);m.ca=g("aa");m.Nb=g("cb");m.Z=function(){return ka(this)};m.getPriority=l(0);function Yj(a,b){this.h=a;this.i=a.l(rc);this.aa=D(this.i.ra());this.cb=x();this.ya=b;this.La=a.l(lc);this.W=a.l(mc);this.F=a.l(nc)}m=Yj.prototype;
m.exec=function(){if(!(this.La instanceof We||this.La instanceof bf||this.La instanceof nf))throw new F(300);var a;a:{a=this.i.ra();for(var b=0;b<a.length;++b)if(0<this.F.get(Ze(a[b])).Oa().na){a=!1;break a}a=!0}if(!a)throw new F(110);if(this.i.name()!=this.ya.name||this.i.version()!=this.ya.version)throw new F(111);if(null==this.ya.tables)throw new F(112);return Zj(this)};m.H=l(1);m.ca=g("aa");m.Nb=g("cb");m.Z=function(){return ka(this)};m.getPriority=l(0);
function Zj(a){var b=new ld(a.h,a.aa),b=a.La.Db(a.H(),E(a.aa),b),c;for(c in a.ya.tables){var d=a.i.table(c),e=a.ya.tables[c].map(function(a){return d.vb(a)}),f=b.I(c,d.Fb);a.W.Xb(c,e);var h=a.F.oc.get(c)||[];e.forEach(function(a){h.forEach(function(b){var c=a.Hb(b.getName());b.add(c,a.id())})});f.put(e)}return b.ia()};function ak(a,b){this.h=a;this.La=a.l(lc);this.Fa=a.l(pc);this.Jb=a.l(qc);this.aa=D(b);this.Ra=new ld(this.h,this.aa);this.cb=x();this.Ac=x();this.ze=x()}m=ak.prototype;m.exec=function(){this.ze.resolve();return this.Ac.da};m.H=l(1);m.ca=g("aa");m.Nb=g("cb");m.Z=function(){return ka(this)};m.getPriority=l(2);function bk(a){xe(a.Fa,a);return a.ze.da}
function ck(a,b){var c=b.Fc();return c.ie.jb().exec(a.Ra,c.context).then(function(a){return yd(a[0])},function(a){this.Ra.Kb();var b=new kb(a.name);this.Ac.reject(b);throw a;}.bind(a))}m.ia=function(){this.La.Db(this.H(),E(this.aa),this.Ra).ia().then(function(){this.Oc();this.Ac.resolve()}.bind(this),function(a){this.Ra.Kb();this.Ac.reject(a)}.bind(this));return this.cb.da};m.Kb=function(){this.Ra.Kb();this.Ac.resolve();return this.cb.da};
m.Oc=function(){var a=we(this.Jb,this.aa);0!=a.length&&(a=new qe(this.h,a),xe(this.Fa,a))};function dk(a){this.h=a;this.Fa=a.l(pc);this.Sc=null;this.Ua=0;0==ek.size&&(ek.set(0,D([1,4])),ek.set(1,D([2])),ek.set(2,D([3,5,6])),ek.set(3,D([2,7])),ek.set(4,D([7])),ek.set(5,D([7])),ek.set(6,D([7])))}r("lf.proc.Transaction",dk);var ek=B();function fk(a,b){var c=ek.get(a.Ua)||null;if(null===c||!c.has(b))throw new F(107,a.Ua,b);a.Ua=b}
dk.prototype.exec=function(a){fk(this,4);var b=[];try{a.forEach(function(a){a.gb();b.push(a.Fc())},this)}catch(c){return fk(this,7),cb(c)}a=new Bh(this.h,b);return xe(this.Fa,a).then(function(a){fk(this,7);return a.map(function(a){return yd(a)})}.bind(this),function(a){fk(this,7);throw a;}.bind(this))};dk.prototype.exec=dk.prototype.exec;dk.prototype.Ef=function(a){fk(this,1);this.Sc=new ak(this.h,a);return bk(this.Sc).then(function(){fk(this,2)}.bind(this))};dk.prototype.begin=dk.prototype.Ef;
dk.prototype.Df=function(a){fk(this,3);return ck(this.Sc,a).then(function(a){fk(this,2);return a}.bind(this),function(a){fk(this,7);throw a;}.bind(this))};dk.prototype.attach=dk.prototype.Df;dk.prototype.ia=function(){fk(this,5);return this.Sc.ia().then(function(){fk(this,7)}.bind(this))};dk.prototype.commit=dk.prototype.ia;dk.prototype.Kb=function(){fk(this,6);return this.Sc.Kb().then(function(){fk(this,7)}.bind(this))};dk.prototype.rollback=dk.prototype.Kb;function X(a){this.h=a;this.i=a.l(rc);this.nd=!1}r("lf.proc.Database",X);X.prototype.Ha=function(a){this.h.ob(rc,this.i);return Wj(this.h,a).then(function(){this.nd=!0;this.Fa=this.h.l(pc);return this}.bind(this))};X.prototype.init=X.prototype.Ha;X.prototype.xb=g("i");X.prototype.getSchema=X.prototype.xb;function gk(a){if(!a.nd)throw new F(2);}X.prototype.select=function(a){gk(this);return new W(this.h,1!=arguments.length||null!=arguments[0]?Array.prototype.slice.call(arguments):[])};
X.prototype.select=X.prototype.select;X.prototype.zb=function(){gk(this);return new $h(this.h)};X.prototype.insert=X.prototype.zb;X.prototype.Vd=function(){gk(this);return new $h(this.h,!0)};X.prototype.insertOrReplace=X.prototype.Vd;X.prototype.update=function(a){gk(this);return new ji(this.h,a)};X.prototype.update=X.prototype.update;X.prototype.delete=function(){gk(this);return new Zh(this.h)};X.prototype["delete"]=X.prototype.delete;
X.prototype.observe=function(a,b){gk(this);this.h.l(qc).Cd(a,b)};X.prototype.observe=X.prototype.observe;X.prototype.unobserve=function(a,b){gk(this);this.h.l(qc).le(a,b)};X.prototype.unobserve=X.prototype.unobserve;X.prototype.Lf=function(){gk(this);return new dk(this.h)};X.prototype.createTransaction=X.prototype.Lf;X.prototype.close=function(){try{this.h.l(lc).close()}catch(a){}this.h.clear();this.nd=!1};X.prototype.close=X.prototype.close;
X.prototype.Tf=function(){gk(this);var a=new Xj(this.h);return xe(this.Fa,a).then(function(a){return yd(a[0])[0]})};X.prototype["export"]=X.prototype.Tf;X.prototype.import=function(a){gk(this);a=new Yj(this.h,a);return xe(this.Fa,a).then(l(null))};X.prototype["import"]=X.prototype.import;function Y(a,b,c,d,e,f){this.V=a;this.w=b;this.Ve=c;this.Te=d;this.wf=e;this.fb=f||null}r("lf.schema.BaseColumn",Y);m=Y.prototype;m.getName=g("w");m.m=function(){return K(this.V)+"."+this.w};m.toString=function(){return this.m()};m.I=g("V");m.H=g("wf");Y.prototype.getType=Y.prototype.H;Y.prototype.Za=g("fb");Y.prototype.Ba=function(){null==this.pa&&(this.pa=[],this.I().Ba().forEach(function(a){-1!=a.f.map(function(a){return a.ba.getName()}).indexOf(this.w)&&this.pa.push(a)},this));return this.pa};
Y.prototype.Aa=function(){if(!q(this.ga)){var a=this.Ba().filter(function(a){return 1!=a.f.length?!1:a.f[0].ba.getName()==this.getName()},this);this.ga=0<a.length?a[0]:null}return this.ga};Y.prototype.kc=g("Te");Y.prototype.isNullable=Y.prototype.kc;Y.prototype.Hc=g("Ve");Y.prototype.Qa=function(a){return Mg(this,a,"eq")};Y.prototype.eq=Y.prototype.Qa;Y.prototype.bf=function(a){return Mg(this,a,"neq")};Y.prototype.neq=Y.prototype.bf;Y.prototype.$d=function(a){return Mg(this,a,"lt")};
Y.prototype.lt=Y.prototype.$d;Y.prototype.jg=function(a){return Mg(this,a,"lte")};Y.prototype.lte=Y.prototype.jg;Y.prototype.Vf=function(a){return Mg(this,a,"gt")};Y.prototype.gt=Y.prototype.Vf;Y.prototype.Wf=function(a){return Mg(this,a,"gte")};Y.prototype.gte=Y.prototype.Wf;Y.prototype.match=function(a){return Mg(this,a,"match")};Y.prototype.match=Y.prototype.match;Y.prototype.Ff=function(a,b){return Mg(this,[a,b],"between")};Y.prototype.between=Y.prototype.Ff;
Y.prototype.Xf=function(a){return Mg(this,a,"in")};Y.prototype["in"]=Y.prototype.Xf;Y.prototype.eg=function(){return this.Qa(null)};Y.prototype.isNull=Y.prototype.eg;Y.prototype.dg=function(){return this.bf(null)};Y.prototype.isNotNull=Y.prototype.dg;Y.prototype.tc=function(a){return new Y(this.V,this.w,this.Ve,this.Te,this.wf,a)};Y.prototype.as=Y.prototype.tc;function hk(){this.xd=B()}var ik;hk.prototype.clear=function(){this.xd.clear()};hk.prototype.clear=hk.prototype.clear;hk.prototype.ob=function(a,b){this.xd.set(a.toString(),b);return b};hk.prototype.registerService=hk.prototype.ob;hk.prototype.l=function(a){var b=this.xd.get(a.toString())||null;if(null===b)throw new F(7,a.toString());return b};hk.prototype.getService=hk.prototype.l;hk.prototype.Yd=function(a){return this.xd.has(a.toString())};hk.prototype.isRegistered=hk.prototype.Yd;function jk(a){this.i=a;this.Hd=new Tc;this.me=new Tc;this.df=new Tc;this.Ie=B();this.g=new Tc;this.Ee=new Tc;this.lf=new Tc;this.He=new Tc;kk(this)}function kk(a){a.i.ra().forEach(function(a){var c=a.getName();a.Gb().Td().forEach(function(d){this.df.set(c,this.i.table(d.Sa));this.g.set(d.Sa,a);0==d.action?(this.me.set(d.Sa,d),this.lf.set(d.Sa,a)):(this.Hd.set(d.Sa,d),this.Ee.set(d.Sa,a));this.Ie.set(a.getName()+"."+d.hb,d.Sa);this.He.set(d.Sa+"."+d.mc,a.getName())},this)},a)}
function bd(a,b,c){if(null!=c)return 1==c?a.Hd.get(b):a.me.get(b);c=a.Hd.get(b);a=a.me.get(b);return null===c&&null===a?null:(c||[]).concat(a||[])}function Hh(a,b){var c=b.get(a);return null===c?[]:c}function Jh(a,b){var c=D();b.forEach(function(a){(a=this.Ie.get(a))&&c.add(a)},a);return E(c).map(function(a){return this.i.table(a)},a)}function Fh(a,b,c){return null!=c?0==c?Hh(b,a.lf):Hh(b,a.Ee):Hh(b,a.g)}
function Kh(a,b){var c=D();b.forEach(function(a){(a=this.He.get(a))&&a.forEach(function(a){c.add(a)})},a);return E(c).map(function(a){return this.i.table(a)},a)};function lk(a,b,c){this.wg=a;this.og=b;this.Uf=c}r("lf.schema.Constraint",lk);lk.prototype.gd=g("wg");lk.prototype.getPrimaryKey=lk.prototype.gd;lk.prototype.Td=g("Uf");lk.prototype.getForeignKeys=lk.prototype.Td;function mk(a,b,c){var d=a.ref.split(".");if(2!=d.length)throw new F(540,c);this.Ge=b;this.hb=a.local;this.Sa=d[0];this.mc=d[1];this.name=b+"."+c;this.action=a.action;this.timing=a.timing};function Z(a){nk(a);this.Od=Ld.Dc();this.w=a;this.K=B();this.zd=D();this.pc=D();this.pd=D();this.Ca=null;this.pa=B();this.td=!1;this.wb=[]}r("lf.schema.TableBuilder",Z);function ok(a){this.name=a.name;this.mb=a.order;this.autoIncrement=a.autoIncrement}var pk=D([0,6]);function nk(a){if(!/^[A-Za-z_][A-Za-z0-9_]*$/.test(a))throw new F(502,a);}function qk(a,b){if(b==a.w)throw new F(546,b);if(a.K.has(b)||a.pa.has(b)||a.pc.has(b))throw new F(503,a.w+"."+b);}
function rk(a,b){var c=!1;b.forEach(function(a){var b=this.K.get(a.name);c=c||a.autoIncrement;if(a.autoIncrement&&3!=b)throw new F(504);},a);if(c&&1<b.length)throw new F(505);}function sk(a){if(null!==a.Ca){var b=a.pa.get(a.Ca).map(function(a){return a.name}),c=0;if(a.wb.some(function(a,e){c=e;return-1!=b.indexOf(a.hb)},a))throw new F(543,a.wb[c].name);}}
function tk(a){if(null!==a.Ca){var b=function(a){return a.name},c=JSON.stringify(a.pa.get(a.Ca).map(b));a.pa.forEach(function(a,e){if(e!=this.Ca){var f=a.map(b);if(JSON.stringify(f)==c)throw new F(544,this.w+"."+e);}},a)}}function uk(a){null===a.Ca||a.pa.get(a.Ca).forEach(function(a){if(this.pd.has(a.name))throw new F(545,this.w+"."+a.name);},a)}Z.prototype.yf=function(a,b){nk(a);qk(this,a);this.K.set(a,b);pk.has(b)&&this.Be([a]);return this};Z.prototype.addColumn=Z.prototype.yf;
Z.prototype.Af=function(a,b){var c=this.w;this.Ca="pk"+(c[0].toUpperCase()+c.substring(1));nk(this.Ca);qk(this,this.Ca);c=vk(this,a,!0,void 0,b);rk(this,c);1==c.length&&this.zd.add(c[0].name);this.pc.add(this.Ca);this.pa.set(this.Ca,c);return this};Z.prototype.addPrimaryKey=Z.prototype.Af;
Z.prototype.zf=function(a,b){nk(a);qk(this,a);var c=new mk(b,this.w,a);q(c.action)||(c.action=0);q(c.timing)||(c.timing=0);if(1==c.action&&1==c.timing)throw new F(506);if(!this.K.has(c.hb))throw new F(540,a);this.wb.push(c);this.Ae(a,[c.hb],this.zd.has(c.hb));return this};Z.prototype.addForeignKey=Z.prototype.zf;Z.prototype.Bf=function(a,b){nk(a);qk(this,a);var c=vk(this,b,!0);1==c.length&&(this.zd.add(c[0].name),wk(this,c[0].name));this.pa.set(a,c);this.pc.add(a);return this};
Z.prototype.addUnique=Z.prototype.Bf;function wk(a,b){a.wb.forEach(function(a){a.hb==b&&this.pc.add(a.name.split(".")[1])},a)}Z.prototype.Be=function(a){vk(this,a,!1).forEach(function(a){this.pd.add(a.name)},this);return this};Z.prototype.addNullable=Z.prototype.Be;Z.prototype.Ae=function(a,b,c,d){nk(a);qk(this,a);b=vk(this,b,!0,d);c&&this.pc.add(a);this.pa.set(a,b);return this};Z.prototype.addIndex=Z.prototype.Ae;Z.prototype.Bb=ba("td");Z.prototype.persistentIndex=Z.prototype.Bb;
Z.prototype.xb=function(){sk(this);tk(this);uk(this);return new (xk(this))};Z.prototype.getSchema=Z.prototype.xb;function yk(a){return a.wb}function vk(a,b,c,d,e){var f=b,f="string"==typeof b[0]?b.map(function(a){return new ok({name:a,order:null!=d?d:1,autoIncrement:e||!1})}):b.map(function(a){return new ok(a)});f.forEach(function(a){if(!this.K.has(a.name))throw new F(508,this.w,a.name);if(c){var b=this.K.get(a.name);if(0==b||6==b)throw new F(509,this.w,a.name);}},a);return f}
function xk(a){function b(){function b(c){return a.pa.get(c).map(function(a){return{ba:this[a.name],mb:a.mb,autoIncrement:a.autoIncrement}},this)}var d=bc(a.K).map(function(b){this[b]=new Y(this,b,a.zd.has(b),a.pd.has(b),a.K.get(b));return this[b]},this),e=bc(a.pa).map(function(d){return new Og(a.w,d,a.pc.has(d),b.call(this,d))},this);S.call(this,a.w,d,e,a.td);var f=null===a.Ca?null:new Og(a.w,a.Ca,!0,b.call(this,a.Ca)),h=d.filter(function(b){return!a.pd.has(b.getName())});this.If=new lk(f,h,a.wb);
this.of=zk(a,d,e)}t(b,S);b.prototype.vb=function(a){return new this.of(qb++,a)};b.prototype.createRow=b.prototype.vb;b.prototype.Fb=function(a){var b={};this.ib().forEach(function(e){var f=e.getName();e=e.H();var h=a.value[f];if(0==e)if(e=h,null!=e&&""!=e){0!=e.length%2&&(e="0"+e);for(var h=new ArrayBuffer(e.length/2),k=new Uint8Array(h),n=0,A=0;n<e.length;n+=2)k[A++]=parseInt(e.substr(n,2),16);e=h}else e=null;else e=2==e?null!=h?new Date(h):null:h;b[f]=e},this);return new this.of(a.id,b)};b.prototype.deserializeRow=
b.prototype.Fb;b.prototype.Gb=g("If");b.prototype.getConstraint=b.prototype.Gb;return b}
function zk(a,b,c){function d(a,d){this.K=b;this.pa=c;y.call(this,a,d)}t(d,y);d.prototype.Ke=function(){var a={};this.K.forEach(function(b){a[b.getName()]=b.kc()?null:Sc[b.H()]});return a};d.prototype.vf=function(){var a={};this.K.forEach(function(b){var c=b.getName();b=b.H();var d=this.s[c];a[c]=0==b?null!=d?ub(d):null:2==b?null!=d?d.getTime():null:6==b?null!=d?d:null:d},this);return a};var e=function(a){var b=this.K.get(a.getName()),c=this.Od.We.get(b)||null;return function(b){return c(b[a.getName()])}}.bind(a),
f=function(a){var b=a.map(function(a){return e(a.ba)});return function(a){return b.map(function(b){return b(a)})}}.bind(a),h={};c.forEach(function(a){var b=a.m();a=1==a.f.length?e(a.f[0].ba):f(a.f);h[b]=a});d.prototype.Hb=function(a){return-1!=a.indexOf("#")?this.id():h.hasOwnProperty(a)?h[a](this.s):null};return d};function Ak(a,b){this.i=new Bk(a,b);this.sb=B();this.Bc=!1;this.j=null}r("lf.schema.Builder",Ak);function Ck(a,b){b.wb.forEach(function(a){var d=a.Sa;if(!this.sb.has(d))throw new F(536,a.name);var d=this.sb.get(d).xb(),e=a.mc;if(!d.hasOwnProperty(e))throw new F(537,a.name);if(b.xb()[a.hb].H()!=d[e].H())throw new F(538,a.name);if(!d[e].Hc())throw new F(539,a.name);},a)}
Ak.prototype.Hf=function(a){a.wb.forEach(function(a){yk(this.sb.get(a.Sa)).forEach(function(c){if(c.hb==a.mc)throw new F(534,a.name);},this)},this)};function Dk(a){a.Bc||(a.sb.forEach(function(a){Ck(this,a);a=a.xb();this.i.M.set(a.getName(),a)},a),C(a.sb).forEach(a.Hf,a),Ek(a),a.sb.clear(),a.Bc=!0)}function Fk(a,b,c){b.ye||(b.ye=!0,b.ee=!0,b.Le.forEach(function(a){a=c.get(a);if(!a.ye)Fk(this,a,c);else if(a.ee&&b!=a)throw new F(533);},a));b.ee=!1}
function Ek(a){var b=B();a.i.M.forEach(function(a,d){b.set(d,new Gk(d))},a);a.sb.forEach(function(a,d){a.wb.forEach(function(a){b.get(a.Sa).Le.add(d)})});C(b).forEach(function(a){Fk(this,a,b)},a)}function Gk(a){this.ee=this.ye=!1;this.Le=D();this.Qc=a}Ak.prototype.xb=function(){this.Bc||Dk(this);return this.i};Ak.prototype.getSchema=Ak.prototype.xb;Ak.prototype.Ne=function(){var a=new kc("ns_"+this.i.name()),b;ik||(ik=new hk);b=ik;var c=null;b.Yd(a)?c=b.l(a):(c=new hk,b.ob(a,c));return c};
Ak.prototype.getGlobal=Ak.prototype.Ne;Ak.prototype.connect=function(a){if(null!==this.j&&this.j.nd)throw new F(113);if(null===this.j){var b=this.Ne();b.Yd(rc)||b.ob(rc,this.xb());this.j=new X(b)}return this.j.Ha(a)};Ak.prototype.connect=Ak.prototype.connect;Ak.prototype.Kf=function(a){if(this.sb.has(a))throw new F(503,a);if(this.Bc)throw new F(535);this.sb.set(a,new Z(a));return this.sb.get(a)};Ak.prototype.createTable=Ak.prototype.Kf;
Ak.prototype.re=function(a){if(this.Bc)throw new F(535);this.i.re(a);return this};Ak.prototype.setPragma=Ak.prototype.re;function Bk(a,b){this.w=a;this.Pa=b;this.M=B();this.hf={Of:!1}}r("lf.schema.DatabaseSchema",Bk);Bk.prototype.name=g("w");Bk.prototype.name=Bk.prototype.name;Bk.prototype.version=g("Pa");Bk.prototype.version=Bk.prototype.version;Bk.prototype.ra=function(){return C(this.M)};Bk.prototype.tables=Bk.prototype.ra;Bk.prototype.table=function(a){if(!this.M.has(a))throw new F(101,a);return this.M.get(a)};
Bk.prototype.table=Bk.prototype.table;Bk.prototype.info=function(){this.Re||(this.Re=new jk(this));return this.Re};Bk.prototype.gf=g("hf");Bk.prototype.pragma=Bk.prototype.gf;Bk.prototype.re=ba("hf");r("lf.schema.create",function(a,b){return new Ak(a,b)});v.prototype.catch=v.prototype.ue;v.prototype["catch"]=v.prototype.catch;
try{if(module){module.exports=lf;}}catch(e){}}.bind(window))()
//# sourceMappingURL=lovefield.min.js.map
