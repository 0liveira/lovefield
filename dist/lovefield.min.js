var window = this;
(function(){'use strict';function aa(){return function(){}}function ba(a){return function(b){this[a]=b}}function g(a){return function(){return this[a]}}function l(a){return function(){return a}}var m,p=this;function q(a){return void 0!==a}function ca(){}
function ea(a){var b=typeof a;if("object"==b)if(a){if(a instanceof Array)return"array";if(a instanceof Object)return b;var c=Object.prototype.toString.call(a);if("[object Window]"==c)return"object";if("[object Array]"==c||"number"==typeof a.length&&"undefined"!=typeof a.splice&&"undefined"!=typeof a.propertyIsEnumerable&&!a.propertyIsEnumerable("splice"))return"array";if("[object Function]"==c||"undefined"!=typeof a.call&&"undefined"!=typeof a.propertyIsEnumerable&&!a.propertyIsEnumerable("call"))return"function"}else return"null";
else if("function"==b&&"undefined"==typeof a.call)return"object";return b}function fa(a){return null===a}function ga(a){return null!=a}function ha(a){var b=ea(a);return"array"==b||"object"==b&&"number"==typeof a.length}function ia(a){return"string"==typeof a}function ja(a){return"function"==ea(a)}function ka(a){return a[la]||(a[la]=++ma)}var la="closure_uid_"+(1E9*Math.random()>>>0),ma=0;function na(a,b,c){return a.call.apply(a.bind,arguments)}
function oa(a,b,c){if(!a)throw Error();if(2<arguments.length){var d=Array.prototype.slice.call(arguments,2);return function(){var c=Array.prototype.slice.call(arguments);Array.prototype.unshift.apply(c,d);return a.apply(b,c)}}return function(){return a.apply(b,arguments)}}function pa(a,b,c){pa=Function.prototype.bind&&-1!=Function.prototype.bind.toString().indexOf("native code")?na:oa;return pa.apply(null,arguments)}
function qa(a,b){var c=Array.prototype.slice.call(arguments,1);return function(){var b=c.slice();b.push.apply(b,arguments);return a.apply(this,b)}}function r(a,b){var c=a.split("."),d=p;c[0]in d||!d.execScript||d.execScript("var "+c[0]);for(var e;c.length&&(e=c.shift());)!c.length&&q(b)?d[e]=b:d=d[e]?d[e]:d[e]={}}
function t(a,b){function c(){}c.prototype=b.prototype;a.Ib=b.prototype;a.prototype=new c;a.prototype.constructor=a;a.Jg=function(a,c,f){for(var h=Array(arguments.length-2),k=2;k<arguments.length;k++)h[k-2]=arguments[k];return b.prototype[c].apply(a,h)}};function ra(a){if(Error.captureStackTrace)Error.captureStackTrace(this,ra);else{var b=Error().stack;b&&(this.stack=b)}a&&(this.message=String(a))}t(ra,Error);ra.prototype.name="CustomError";var sa=String.prototype.trim?function(a){return a.trim()}:function(a){return a.replace(/^[\s\xa0]+|[\s\xa0]+$/g,"")};
function ta(a){var b=0,c=sa(String(ua)).split(".");a=sa(String(a)).split(".");for(var d=Math.max(c.length,a.length),e=0;0==b&&e<d;e++){var f=c[e]||"",h=a[e]||"",k=/(\d*)(\D*)/g,n=/(\d*)(\D*)/g;do{var A=k.exec(f)||["","",""],O=n.exec(h)||["","",""];if(0==A[0].length&&0==O[0].length)break;b=va(0==A[1].length?0:parseInt(A[1],10),0==O[1].length?0:parseInt(O[1],10))||va(0==A[2].length,0==O[2].length)||va(A[2],O[2])}while(0==b)}return b}function va(a,b){return a<b?-1:a>b?1:0};function wa(a,b,c){this.fg=c;this.Kf=a;this.zg=b;this.pd=0;this.kd=null}wa.prototype.get=function(){var a;0<this.pd?(this.pd--,a=this.kd,this.kd=a.next,a.next=null):a=this.Kf();return a};wa.prototype.put=function(a){this.zg(a);this.pd<this.fg&&(this.pd++,a.next=this.kd,this.kd=a)};var xa=Array.prototype,ya=xa.indexOf?function(a,b,c){return xa.indexOf.call(a,b,c)}:function(a,b,c){c=null==c?0:0>c?Math.max(0,a.length+c):c;if(ia(a))return ia(b)&&1==b.length?a.indexOf(b,c):-1;for(;c<a.length;c++)if(c in a&&a[c]===b)return c;return-1},za=xa.forEach?function(a,b,c){xa.forEach.call(a,b,c)}:function(a,b,c){for(var d=a.length,e=ia(a)?a.split(""):a,f=0;f<d;f++)f in e&&b.call(c,e[f],f,a)},Aa=xa.map?function(a,b,c){return xa.map.call(a,b,c)}:function(a,b,c){for(var d=a.length,e=Array(d),
f=ia(a)?a.split(""):a,h=0;h<d;h++)h in f&&(e[h]=b.call(c,f[h],h,a));return e},Ba=xa.reduce?function(a,b,c,d){d&&(b=pa(b,d));return xa.reduce.call(a,b,c)}:function(a,b,c,d){var e=c;za(a,function(c,h){e=b.call(d,e,c,h,a)});return e},Ca=xa.some?function(a,b,c){return xa.some.call(a,b,c)}:function(a,b,c){for(var d=a.length,e=ia(a)?a.split(""):a,f=0;f<d;f++)if(f in e&&b.call(c,e[f],f,a))return!0;return!1};function Da(a,b,c){return 2>=arguments.length?xa.slice.call(a,b):xa.slice.call(a,b,c)}
function Ea(a){for(var b=[],c=0;c<a;c++)b[c]=0;return b}function Fa(a){for(var b=[],c=0;c<arguments.length;c++){var d=arguments[c];if("array"==ea(d))for(var e=0;e<d.length;e+=8192)for(var f=Fa.apply(null,Da(d,e,e+8192)),h=0;h<f.length;h++)b.push(f[h]);else b.push(d)}return b};function Ga(a){var b=[],c=0,d;for(d in a)b[c++]=a[d];return b};var Ha;a:{var Ia=p.navigator;if(Ia){var Ja=Ia.userAgent;if(Ja){Ha=Ja;break a}}Ha=""}function u(a){return-1!=Ha.indexOf(a)};function Ka(){return u("Opera")||u("OPR")}function La(){return(u("Chrome")||u("CriOS"))&&!Ka()&&!u("Edge")};function Ma(a){p.setTimeout(function(){throw a;},0)}var Na;
function Oa(){var a=p.MessageChannel;"undefined"===typeof a&&"undefined"!==typeof window&&window.postMessage&&window.addEventListener&&!u("Presto")&&(a=function(){var a=document.createElement("IFRAME");a.style.display="none";a.src="";document.documentElement.appendChild(a);var b=a.contentWindow,a=b.document;a.open();a.write("");a.close();var c="callImmediate"+Math.random(),d="file:"==b.location.protocol?"*":b.location.protocol+"//"+b.location.host,a=pa(function(a){if(("*"==d||a.origin==d)&&a.data==
c)this.port1.onmessage()},this);b.addEventListener("message",a,!1);this.port1={};this.port2={postMessage:function(){b.postMessage(c,d)}}});if("undefined"!==typeof a&&!u("Trident")&&!u("MSIE")){var b=new a,c={},d=c;b.port1.onmessage=function(){if(q(c.next)){c=c.next;var a=c.De;c.De=null;a()}};return function(a){d.next={De:a};d=d.next;b.port2.postMessage(0)}}return"undefined"!==typeof document&&"onreadystatechange"in document.createElement("SCRIPT")?function(a){var b=document.createElement("SCRIPT");
b.onreadystatechange=function(){b.onreadystatechange=null;b.parentNode.removeChild(b);b=null;a();a=null};document.documentElement.appendChild(b)}:function(a){p.setTimeout(a,0)}};function Pa(){this.yd=this.mc=null}var Ra=new wa(function(){return new Qa},function(a){a.reset()},100);Pa.prototype.add=function(a,b){var c=Ra.get();c.set(a,b);this.yd?this.yd.next=c:this.mc=c;this.yd=c};Pa.prototype.remove=function(){var a=null;this.mc&&(a=this.mc,this.mc=this.mc.next,this.mc||(this.yd=null),a.next=null);return a};function Qa(){this.next=this.scope=this.Od=null}Qa.prototype.set=function(a,b){this.Od=a;this.scope=b;this.next=null};
Qa.prototype.reset=function(){this.next=this.scope=this.Od=null};function Sa(a,b){Ta||Ua();Va||(Ta(),Va=!0);Wa.add(a,b)}var Ta;function Ua(){if(p.Promise&&p.Promise.resolve){var a=p.Promise.resolve(void 0);Ta=function(){a.then(Xa)}}else Ta=function(){var a=Xa;!ja(p.setImmediate)||p.Window&&p.Window.prototype&&p.Window.prototype.setImmediate==p.setImmediate?(Na||(Na=Oa()),Na(a)):p.setImmediate(a)}}var Va=!1,Wa=new Pa;function Xa(){for(var a=null;a=Wa.remove();){try{a.Od.call(a.scope)}catch(b){Ma(b)}Ra.put(a)}Va=!1};function v(a,b){this.Ua=0;this.kf=void 0;this.$c=this.cc=this.C=null;this.jd=this.Md=!1;if(a!=ca)try{var c=this;a.call(b,function(a){Ya(c,2,a)},function(a){Ya(c,3,a)})}catch(d){Ya(this,3,d)}}function Za(){this.next=this.context=this.hc=this.Mc=this.child=null;this.Bd=!1}Za.prototype.reset=function(){this.context=this.hc=this.Mc=this.child=null;this.Bd=!1};var $a=new wa(function(){return new Za},function(a){a.reset()},100);function ab(a,b,c){var d=$a.get();d.Mc=a;d.hc=b;d.context=c;return d}
function w(a){if(a instanceof v)return a;var b=new v(ca);Ya(b,2,a);return b}function bb(a){return new v(function(b,c){c(a)})}function cb(a,b,c){db(a,b,c,null)||Sa(qa(b,a))}function eb(a){return new v(function(b,c){var d=a.length,e=[];if(d)for(var f=function(a,c){d--;e[a]=c;0==d&&b(e)},h=function(a){c(a)},k=0,n;k<a.length;k++)n=a[k],cb(n,qa(f,k),h);else b(e)})}function x(){var a,b,c=new v(function(c,e){a=c;b=e});return new fb(c,a,b)}
v.prototype.then=function(a,b,c){return gb(this,ja(a)?a:null,ja(b)?b:null,c)};v.prototype.then=v.prototype.then;v.prototype.$goog_Thenable=!0;v.prototype.se=function(a,b){return gb(this,null,a,b)};function hb(a,b){a.cc||2!=a.Ua&&3!=a.Ua||ib(a);a.$c?a.$c.next=b:a.cc=b;a.$c=b}
function gb(a,b,c,d){var e=ab(null,null,null);e.child=new v(function(a,h){e.Mc=b?function(c){try{var e=b.call(d,c);a(e)}catch(A){h(A)}}:a;e.hc=c?function(b){try{var e=c.call(d,b);!q(e)&&b instanceof jb?h(b):a(e)}catch(A){h(A)}}:h});e.child.C=a;hb(a,e);return e.child}v.prototype.Eg=function(a){this.Ua=0;Ya(this,2,a)};v.prototype.Fg=function(a){this.Ua=0;Ya(this,3,a)};
function Ya(a,b,c){0==a.Ua&&(a==c&&(b=3,c=new TypeError("Promise cannot resolve to itself")),a.Ua=1,db(c,a.Eg,a.Fg,a)||(a.kf=c,a.Ua=b,a.C=null,ib(a),3!=b||c instanceof jb||kb(a,c)))}function db(a,b,c,d){if(a instanceof v)return hb(a,ab(b||ca,c||null,d)),!0;var e;if(a)try{e=!!a.$goog_Thenable}catch(h){e=!1}else e=!1;if(e)return a.then(b,c,d),!0;e=typeof a;if("object"==e&&null!=a||"function"==e)try{var f=a.then;if(ja(f))return lb(a,f,b,c,d),!0}catch(h){return c.call(d,h),!0}return!1}
function lb(a,b,c,d,e){function f(a){k||(k=!0,d.call(e,a))}function h(a){k||(k=!0,c.call(e,a))}var k=!1;try{b.call(a,h,f)}catch(n){f(n)}}function ib(a){a.Md||(a.Md=!0,Sa(a.Pf,a))}function mb(a){var b=null;a.cc&&(b=a.cc,a.cc=b.next,b.next=null);a.cc||(a.$c=null);return b}
v.prototype.Pf=function(){for(var a=null;a=mb(this);){var b=this.Ua,c=this.kf;if(3==b&&a.hc&&!a.Bd)for(var d=void 0,d=this;d&&d.jd;d=d.C)d.jd=!1;if(a.child)a.child.C=null,nb(a,b,c);else try{a.Bd?a.Mc.call(a.context):nb(a,b,c)}catch(e){ob.call(null,e)}$a.put(a)}this.Md=!1};function nb(a,b,c){2==b?a.Mc.call(a.context,c):a.hc&&a.hc.call(a.context,c)}function kb(a,b){a.jd=!0;Sa(function(){a.jd&&ob.call(null,b)})}var ob=Ma;function jb(a){ra.call(this,a)}t(jb,ra);jb.prototype.name="cancel";
function fb(a,b,c){this.ha=a;this.resolve=b;this.reject=c};/*

 Copyright 2014 The Lovefield Project Authors. All Rights Reserved.

 Licensed under the Apache License, Version 2.0 (the "License");
 you may not use this file except in compliance with the License.
 You may obtain a copy of the License at

     http://www.apache.org/licenses/LICENSE-2.0

 Unless required by applicable law or agreed to in writing, software
 distributed under the License is distributed on an "AS IS" BASIS,
 WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 See the License for the specific language governing permissions and
 limitations under the License.
*/
function y(a,b){this.pa=a;this.s=b||this.Ie()}var pb=0;m=y.prototype;m.id=g("pa");function qb(a){return a.s}m.Ie=function(){return{}};m.tf=g("s");m.Fa=function(){return{id:this.pa,value:this.tf()}};m.Fb=function(a){return"#"==a.substr(-1)?this.pa:null};function rb(a){return new y(a.id,a.value)}function sb(a){return new y(pb++,a||{})}function tb(a){if(null==a)return null;a=new Uint8Array(a);for(var b="",c=0;c<a.length;++c)var d=a[c].toString(16),b=b+(2>d.length?"0"+d:d);return b};function ub(a){this.type=a}function vb(a){y.call(this,-1,a)}t(vb,y);function wb(a,b,c,d){c=c||function(a,b){return a==b};d=d||function(b){return a[b]};for(var e=a.length,f=b.length,h=[],k=0;k<e+1;k++)h[k]=[],h[k][0]=0;for(var n=0;n<f+1;n++)h[0][n]=0;for(k=1;k<=e;k++)for(n=1;n<=f;n++)c(a[k-1],b[n-1])?h[k][n]=h[k-1][n-1]+1:h[k][n]=Math.max(h[k-1][n],h[k][n-1]);for(var A=[],k=e,n=f;0<k&&0<n;)c(a[k-1],b[n-1])?(A.unshift(d(k-1,n-1)),k--,n--):h[k-1][n]>h[k][n-1]?k--:n--;return A}function xb(a){return Ba(arguments,function(a,c){return a+c},0)}
function yb(a){return xb.apply(null,arguments)/arguments.length}function zb(a){var b=arguments.length;if(2>b)return 0;var c=yb.apply(null,arguments);return xb.apply(null,Aa(arguments,function(a){return Math.pow(a-c,2)}))/(b-1)}function Bb(a){return Math.sqrt(zb.apply(null,arguments))};var Cb="StopIteration"in p?p.StopIteration:{message:"StopIteration",stack:""};function Db(){}Db.prototype.next=function(){throw Cb;};Db.prototype.nc=function(){return this};function Eb(a){if(a instanceof Db)return a;if("function"==typeof a.nc)return a.nc(!1);if(ha(a)){var b=0,c=new Db;c.next=function(){for(;;){if(b>=a.length)throw Cb;if(b in a)return a[b++];b++}};return c}throw Error("Not implemented");}
function Fb(a,b){if(ha(a))try{za(a,b,void 0)}catch(c){if(c!==Cb)throw c;}else{a=Eb(a);try{for(;;)b.call(void 0,a.next(),void 0,a)}catch(c){if(c!==Cb)throw c;}}}function Gb(a){if(Ca(arguments,function(a){return!a.length})||!arguments.length)return new Db;var b=new Db,c=arguments,d=Ea(c.length);b.next=function(){if(d){for(var a=Aa(d,function(a,b){return c[b][a]}),b=d.length-1;0<=b;b--){if(d[b]<c[b].length-1){d[b]++;break}if(0==b){d=null;break}d[b]=0}return a}throw Cb;};return b};function Hb(a,b){this.o={};this.b=[];this.Pa=this.Bb=0;var c=arguments.length;if(1<c){if(c%2)throw Error("Uneven number of arguments");for(var d=0;d<c;d+=2)this.set(arguments[d],arguments[d+1])}else a&&this.addAll(a)}m=Hb.prototype;m.Ac=g("Bb");m.za=function(){Ib(this);for(var a=[],b=0;b<this.b.length;b++)a.push(this.o[this.b[b]]);return a};function Jb(a){Ib(a);return a.b.concat()}m.Ma=function(a){return Kb(this.o,a)};m.md=function(){return 0==this.Bb};
m.clear=function(){this.o={};this.Pa=this.Bb=this.b.length=0};m.remove=function(a){return Kb(this.o,a)?(delete this.o[a],this.Bb--,this.Pa++,this.b.length>2*this.Bb&&Ib(this),!0):!1};function Ib(a){if(a.Bb!=a.b.length){for(var b=0,c=0;b<a.b.length;){var d=a.b[b];Kb(a.o,d)&&(a.b[c++]=d);b++}a.b.length=c}if(a.Bb!=a.b.length){for(var e={},c=b=0;b<a.b.length;)d=a.b[b],Kb(e,d)||(a.b[c++]=d,e[d]=1),b++;a.b.length=c}}m.get=function(a,b){return Kb(this.o,a)?this.o[a]:b};
m.set=function(a,b){Kb(this.o,a)||(this.Bb++,this.b.push(a),this.Pa++);this.o[a]=b};m.addAll=function(a){var b;if(a instanceof Hb)b=Jb(a),a=a.za();else{b=[];var c=0,d;for(d in a)b[c++]=d;a=Ga(a)}for(c=0;c<b.length;c++)this.set(b[c],a[c])};m.forEach=function(a,b){for(var c=Jb(this),d=0;d<c.length;d++){var e=c[d],f=this.get(e);a.call(b,f,e,this)}};m.clone=function(){return new Hb(this)};
m.nc=function(a){Ib(this);var b=0,c=this.Pa,d=this,e=new Db;e.next=function(){if(c!=d.Pa)throw Error("The map has changed since the iterator was created");if(b>=d.b.length)throw Cb;var e=d.b[b++];return a?e:d.o[e]};return e};function Kb(a,b){return Object.prototype.hasOwnProperty.call(a,b)};function Lb(){return u("iPhone")&&!u("iPod")&&!u("iPad")};var Mb=Ka(),Nb=u("Trident")||u("MSIE"),Ob=u("Edge"),Pb=u("Gecko")&&!(-1!=Ha.toLowerCase().indexOf("webkit")&&!u("Edge"))&&!(u("Trident")||u("MSIE"))&&!u("Edge"),Qb=-1!=Ha.toLowerCase().indexOf("webkit")&&!u("Edge");function Rb(){var a=Ha;if(Pb)return/rv\:([^\);]+)(\)|;)/.exec(a);if(Ob)return/Edge\/([\d\.]+)/.exec(a);if(Nb)return/\b(?:MSIE|rv)[: ]([^\);]+)(\)|;)/.exec(a);if(Qb)return/WebKit\/(\S+)/.exec(a)}
var ua=function(){if(Mb&&p.opera){var a;var b=p.opera.version;try{a=b()}catch(c){a=b}return a}a="";(b=Rb())&&(a=b?b[1]:"");return Nb&&(b=(b=p.document)?b.documentMode:void 0,b>parseFloat(a))?String(b):a}(),Sb={};var Tb=Lb()||u("iPod"),Ub=u("iPad");!u("Android")||La()||u("Firefox")||Ka();var Vb=La(),Wb=u("Safari")&&!(La()||u("Coast")||Ka()||u("Edge")||u("Silk")||u("Android"))&&!(Lb()||u("iPad")||u("iPod"));/*

 Copyright 2015 The Lovefield Project Authors. All Rights Reserved.

 Licensed under the Apache License, Version 2.0 (the "License");
 you may not use this file except in compliance with the License.
 You may obtain a copy of the License at

     http://www.apache.org/licenses/LICENSE-2.0

 Unless required by applicable law or agreed to in writing, software
 distributed under the License is distributed on an "AS IS" BASIS,
 WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 See the License for the specific language governing permissions and
 limitations under the License.
*/
function Xb(){this.me=Wb||Ub||Tb;this.Yf=!(this.me||Nb&&!Sb[10]&&!(Sb[10]=0<=ta(10)));!Nb||Sb[11]||(Sb[11]=0<=ta(11));this.Hg=Vb||Wb;this.jg=q(window.Map)&&q(window.Map.prototype.values)&&q(window.Map.prototype.forEach)&&!this.me;this.kg=q(window.Set)&&q(window.Set.prototype.values)&&q(window.Set.prototype.forEach)&&!this.me}var Yb;function Zb(){q(Yb)||(Yb=new Xb);return Yb};function z(){this.o=new Hb;Object.defineProperty(this,"size",{get:function(){return this.o.Ac()}})}z.prototype.clear=function(){this.o.clear()};z.prototype.clear=z.prototype.clear;z.prototype.delete=function(a){return this.o.remove(a)};z.prototype["delete"]=z.prototype.delete;z.prototype.forEach=function(a,b){return this.o.forEach(a,b)};z.prototype.forEach=z.prototype.forEach;z.prototype.get=function(a){return this.o.get(a)};z.prototype.get=z.prototype.get;z.prototype.has=function(a){return this.o.Ma(a)};
z.prototype.has=z.prototype.has;z.prototype.set=function(a,b){return this.o.set(a,b)};z.prototype.set=z.prototype.set;var $b=Zb().jg;function B(){return $b?new window.Map:new z}function ac(a){if(a instanceof z)return Jb(a.o);var b=0,c=Array(a.size);a.forEach(function(a,e){c[b++]=e});return c}function C(a){if(a instanceof z)return a.o.za();var b=0,c=Array(a.size);a.forEach(function(a){c[b++]=a});return c};var bc={};r("lf.TransactionType",bc);bc.READ_ONLY=0;bc.READ_WRITE=1;function cc(a,b){this.uf=a;this.Ra=b||null;this.Y=x()}cc.prototype.ia=function(){return 0==this.uf?this.qc():dc(this)};function dc(a){try{ec(a.Ra)}catch(b){return bb(b)}return fc(a).then(function(a){this.Ra.ia();return a}.bind(a))}function fc(a){gc(a);hc(a);return a.qc()}
function gc(a){a.Ra.rb.forEach(function(a,c){var d=this.Ra.ba().get(c),d=this.H(d.getName(),d.Db.bind(d)),e=C(a.wa).map(function(a){return a.id()});0<e.length&&d.remove(e).se(this.Qd,this);e=C(a.na).map(function(a){return a[1]}).concat(C(a.ta));d.put(e).se(this.Qd,this)},a)}function hc(a){ic(a.Ra).forEach(function(a){var c=this.H(a.getName(),rb),d;c.get([-1]).then(function(a){d=a;return c.remove([])}).then(function(){c.put(d);c.put(a.Fa())},this.Qd.bind(this))},a)}cc.prototype.Qd=function(a){this.Y.reject(a)};function jc(a){this.Ag=a}jc.prototype.toString=g("Ag");var kc=new jc("backstore"),lc=new jc("cache"),mc=new jc("indexstore"),nc=new jc("engine"),oc=new jc("runner"),pc=new jc("observerregistry"),qc=new jc("schema");function rc(a){if("function"==typeof a.za)return a.za();if(ia(a))return a.split("");if(ha(a)){for(var b=[],c=a.length,d=0;d<c;d++)b.push(a[d]);return b}return Ga(a)};function sc(a){this.o=new Hb;a&&this.addAll(a)}function tc(a){var b=typeof a;return"object"==b&&a||"function"==b?"o"+ka(a):b.substr(0,1)+a}m=sc.prototype;m.Ac=function(){return this.o.Ac()};m.add=function(a){this.o.set(tc(a),a)};m.addAll=function(a){a=rc(a);for(var b=a.length,c=0;c<b;c++)this.add(a[c])};m.remove=function(a){return this.o.remove(tc(a))};m.clear=function(){this.o.clear()};m.md=function(){return this.o.md()};m.contains=function(a){return this.o.Ma(tc(a))};m.za=function(){return this.o.za()};
m.clone=function(){return new sc(this)};m.nc=function(){return this.o.nc(!1)};function uc(a){this.Wb=new sc(a);Object.defineProperty(this,"size",{get:function(){return this.Wb.Ac()}})}uc.prototype.add=function(a){this.Wb.add(a)};uc.prototype.add=uc.prototype.add;uc.prototype.clear=function(){this.Wb.clear()};uc.prototype.clear=uc.prototype.clear;uc.prototype.delete=function(a){return this.Wb.remove(a)};uc.prototype["delete"]=uc.prototype.delete;uc.prototype.forEach=function(a,b){this.Wb.za().forEach(a,b)};uc.prototype.has=function(a){return this.Wb.contains(a)};
uc.prototype.has=uc.prototype.has;var vc=Zb().kg;function D(a){return vc?q(a)?new window.Set(a):new window.Set:new uc(a)}function E(a){if(a instanceof uc)return a.Wb.za();var b=0,c=Array(a.size);a.forEach(function(a){c[b++]=a});return c}function wc(a,b){if(b.size>a.size)return!1;var c=!0;b.forEach(function(b){c=c&&a.has(b)});return c};function xc(a,b){this.pa=a;this.s=b||{}}function yc(a){var b=D();a.forEach(function(a){b.add(a>>9)});return E(b)}xc.prototype.W=g("pa");function zc(a,b){b.forEach(function(a){this.s[a.id()]=a.Fa()},a)}function Ac(a,b){b.forEach(function(a){delete this.s[a]},a)}xc.prototype.Fa=function(){return{id:this.pa,value:JSON.stringify(this.s)}};function Bc(a){return new xc(a.id,JSON.parse(a.value))};function Cc(a,b,c){this.aa=a;this.Lb=b;this.lf=c}m=Cc.prototype;m.get=function(a){if(0==a.length)return this.zc();var b=this.Lb;return Dc(this,a).then(function(c){return a.map(function(a){var e=c.get(a>>9);return b(e.s[a])})})};function Dc(a,b){var c=B(),d=x(),e=yc(b).map(function(a){return new v(function(b,d){var e;try{e=this.aa.get(a)}catch(A){d(A);return}e.onerror=d;e.onsuccess=function(a){a=Bc(a.target.result);c.set(a.W(),a);b()}},this)},a);eb(e).then(function(){d.resolve(c)});return d.ha}
m.zc=function(){return new v(function(a,b){var c=[],d;try{d=this.aa.openCursor()}catch(e){b(e);return}d.onerror=b;d.onsuccess=function(){var b=d.result;if(b){var f;f=Bc(b.value).s;for(var h in f)c.push(this.Lb(f[h]));b.continue()}else a(c)}.bind(this)},this)};m.Sb=function(a){return new v(function(b,c){var d;try{d=a()}catch(e){c(e);return}d.onsuccess=b;d.onerror=c},this)};
m.put=function(a){if(0==a.length)return w();var b=B();a.forEach(function(a){var d;d=a.id()>>9;var e=b.get(d)||null;null===e&&(e=this.lf(this.aa.name,d));zc(e,[a]);b.set(d,e)},this);a=C(b).map(function(a){return this.Sb(function(){return this.aa.put(a.Fa())}.bind(this))},this);return eb(a)};
m.remove=function(a){if(0==a.length)return this.Sb(function(){return this.aa.clear()}.bind(this));var b=B();a.forEach(function(a){var d=a>>9,e=b.get(d)||null;null===e&&(e=this.lf(this.aa.name,d));Ac(e,[a]);b.set(d,e)},this);a=C(b).map(function(a){return this.Sb(function(){return 0==Object.keys(a.s).length?this.aa.delete(a.W()):this.aa.put(a.Fa())}.bind(this))},this);return eb(a)};function Ec(a,b,c){a=a.j(lc);var d=[c<<9,(c+1<<9)-1];b=a.$a(b,d[0],d[1]);c=new xc(c);zc(c,b);return c}
function Fc(a,b){return new xc(b)};function Gc(){};function Hc(a){this.U=a.j(lc);this.D=a.j(mc);this.i=a.j(qc)}Hc.prototype.update=function(a){a.forEach(function(a){Ic(this,a);Jc(this,a)},this)};function Jc(a,b){var c=b.getName();b.wa.forEach(function(a,b){this.U.remove(c,b)},a);b.ta.forEach(function(a){this.U.set(c,a)},a);b.na.forEach(function(a){this.U.set(c,a[1])},a)}function Ic(a,b){var c=a.i.table(b.getName());Kc(b).forEach(function(a){Lc(this,c,a)},a)}
function Lc(a,b,c){var d=a.D.kc.get(b.getName())||[],e=0;d.forEach(function(a){try{Mc(a,c),e++}catch(b){throw d.slice(0,e).forEach(function(a){Mc(a,[c[1],c[0]])},this),b;}},a)}function Mc(a,b){var c=null===b[1]?void 0:b[1].Fb(a.getName()),d=null===b[0]?void 0:b[0].Fb(a.getName());if(!q(d)&&q(c))a.add(c,b[1].id());else if(q(d)&&q(c)){if(null===c||null===d){if(c==d)return}else if(0==a.rc().compare(d,c))return;a.add(c,b[1].id());a.remove(d,b[0].id())}else q(d)&&!q(c)&&a.remove(d,b[0].id())};var Nc={};r("lf.ConstraintAction",Nc);Nc.RESTRICT=0;Nc.CASCADE=1;var Oc={};r("lf.ConstraintTiming",Oc);Oc.IMMEDIATE=0;Oc.DEFERRABLE=1;var Pc={};r("lf.Order",Pc);Pc.DESC=0;Pc.ASC=1;var Qc={};r("lf.Type",Qc);Qc.ARRAY_BUFFER=0;Qc.BOOLEAN=1;Qc.DATE_TIME=2;Qc.INTEGER=3;Qc.NUMBER=4;Qc.STRING=5;Qc.OBJECT=6;var Sc={0:null,1:!1,2:Object.freeze(new Date(0)),3:0,4:0,5:"",6:null};r("lf.type.DEFAULT_VALUES",Sc);function F(a,b){this.code=a;this.message="http://sn.im/2a0j3wn?c="+a;if(1<arguments.length)for(var c=1;c<=Math.min(4,arguments.length-1);++c)this.message+="&p"+(c-1)+"="+encodeURIComponent(arguments[c].toString().slice(0,64))}t(F,Error);function Tc(){this.o=B();this.size=0}m=Tc.prototype;m.has=function(a){return this.o.has(a)};m.set=function(a,b){var c=this.o.get(a)||null;null===c&&(c=D(),this.o.set(a,c));c.has(b)||(c.add(b),this.size++);return this};m.Vb=function(a,b){var c=this.o.get(a)||null;null===c&&(c=D(),this.o.set(a,c));b.forEach(function(a){c.has(a)||(c.add(a),this.size++)},this);return this};m.Zd=function(a){a.keys().forEach(function(b){var c=a.get(b);this.Vb(b,c)},this);return this};
m.delete=function(a,b){var c=this.o.get(a,null);if(null===c)return!1;var d=c.delete(b);d&&(--this.size,0==c.size&&this.o.delete(a));return d};m.get=function(a){a=this.o.get(a)||null;return null===a?null:E(a)};m.clear=function(){this.o.clear();this.size=0};m.keys=function(){return ac(this.o)};m.values=function(){var a=[];this.o.forEach(function(b){a.push.apply(a,E(b))});return a};function Uc(a){this.D=a.j(mc);this.i=a.j(qc);this.U=a.j(lc);this.cd=null}function Vc(a,b,c){var d=b.Eb().mg;c.forEach(function(a){d.forEach(function(b){if(null==a.s[b.getName()])throw new F(202,b.m());},this)},a)}function Wc(a,b,c,d){b.Eb().Pd().forEach(function(a){a.timing==d&&Xc(this,a,c)},a)}function Xc(a,b,c){var d=Yc(a,b);c.forEach(function(a){if(Zc(a[0],a[1],b.name)&&(a=a[1].s[b.gb],null!==a&&!d.Ma(a)))throw new F(203,b.name);},a)}
function Yc(a,b){null===a.cd&&(a.cd=B());var c=a.cd.get(b.name)||null;null===c&&(c=a.i.table(b.Sa)[b.ic].xa(),c=a.D.get(c.m()),a.cd.set(b.name,c));return c}function Zc(a,b,c){return(null===a?null!==b:null===b)||a.Fb(c)!=b.Fb(c)}function $c(a,b,c,d){b=ad(a.i.info(),b.getName(),0);null!==b&&(b=b.filter(function(a){return a.timing==d}),0!=b.length&&bd(a,b,c,function(a,b,c){if(b.Ma(c))throw new F(203,a.name);}))}
function cd(a,b,c){b=ad(a.i.info(),b.getName(),1);if(null===b)return null;var d=new Tc;bd(a,b,c,function(a,b,c){b=b.get(c);0<b.length&&d.Vb(a.Ee,b)});return d}function dd(a,b,c){var d=new Tc;bd(a,c,b,function(a,b,c,k){b.get(c).forEach(function(b){d.set(b,{Nd:a,rg:k[1]})})});return d}function bd(a,b,c,d){b.forEach(function(a){var b=this.D.get(a.name),h=Yc(this,a);c.forEach(function(c){Zc(c[0],c[1],h.getName())&&d(a,b,c[0].s[a.ic],c)},this)},a)}
function ed(a,b,c,d){0!=c.length&&(c=c.map(function(a){return[null,a]}),Wc(a,b,c,d))}function fd(a,b,c,d){0!=c.length&&(Wc(a,b,c,d),$c(a,b,c,d))}function gd(a,b,c,d){0!=c.length&&(c=c.map(function(a){return[a,null]}),$c(a,b,c,d))}
function hd(a,b,c){var d={re:[],nf:new Tc},e=new Tc;e.Vb(b.getName(),c.map(function(a){return a.id()}));do{var f=new Tc;e.keys().forEach(function(a){var b=this.i.table(a);a=e.get(a).map(function(a){return[this.U.get(a),null]},this);b=cd(this,b,a);null!==b&&(d.re.unshift.apply(d.re,b.keys()),f.Zd(b))},a);e=f;d.nf.Zd(e)}while(0<e.size);return d};function id(a){this.ta=B();this.na=B();this.wa=B();this.w=a}m=id.prototype;m.getName=g("w");m.add=function(a){if(this.wa.has(a.id())){var b=[this.wa.get(a.id()),a];this.na.set(a.id(),b);this.wa.delete(a.id())}else this.ta.set(a.id(),a)};m.modify=function(a){var b=a[1],c=a[0].id();this.ta.has(c)?this.ta.set(c,b):(this.na.has(c)&&(a=[this.na.get(a[0].id())[0],b]),this.na.set(c,a))};
m.delete=function(a){if(this.ta.has(a.id()))this.ta.delete(a.id());else if(this.na.has(a.id())){var b=this.na.get(a.id())[0];this.na.delete(a.id());this.wa.set(a.id(),b)}else this.wa.set(a.id(),a)};m.Zd=function(a){a.ta.forEach(function(a){this.add(a)},this);a.na.forEach(function(a){this.modify(a)},this);a.wa.forEach(function(a){this.delete(a)},this)};
function Kc(a){var b=[];a.ta.forEach(function(a){b.push([null,a])});a.na.forEach(function(a){b.push(a)});a.wa.forEach(function(a){b.push([a,null])});return b}m.toString=function(){return"["+ac(this.ta).toString()+"], ["+ac(this.na).toString()+"], ["+ac(this.wa).toString()+"]"};function jd(a){var b=new id(a.w);a.ta.forEach(function(a){b.delete(a)});a.wa.forEach(function(a){b.add(a)});a.na.forEach(function(a){b.modify([a[1],a[0]])});return b}
m.md=function(){return 0==this.ta.size&&0==this.wa.size&&0==this.na.size};function kd(a,b){this.$=B();b.forEach(function(a){this.$.set(a.getName(),a)},this);this.i=a.j(qc);this.U=a.j(lc);this.D=a.j(mc);this.ua=new Uc(a);this.ld=new Hc(a);this.rb=B()}function ic(a){var b=[];ac(a.rb).map(function(a){return this.$.get(a)},a).forEach(function(a){a.zb()&&(a.ya().forEach(function(a){b.push(this.D.get(a.m()))},this),b.push(this.D.get(a.getName()+".#")))},a);return b}m=kd.prototype;m.ba=g("$");
m.xb=function(a,b){ld(this,a);Vc(this.ua,a,b);ed(this.ua,a,b,0);for(var c=0;c<b.length;c++)md(this,a,[null,b[c]])};function md(a,b,c){var d=b.getName(),e=a.rb.get(d)||new id(d);a.rb.set(d,e);try{Lc(a.ld,b,c)}catch(h){throw h;}b=c[0];var f=c[1];null===b&&null!==f?(a.U.set(d,f),e.add(f)):null!==b&&null!==f?(a.U.set(d,f),e.modify(c)):null!==b&&null===f&&(a.U.remove(d,b.id()),e.delete(b))}
m.update=function(a,b){ld(this,a);Vc(this.ua,a,b);var c=b.map(function(a){return[this.U.get(a.id()),a]},this);nd(this,a,c);fd(this.ua,a,c,0);c.forEach(function(b){md(this,a,b)},this)};m.Sd=function(a,b){ld(this,a);Vc(this.ua,a,b);for(var c=0;c<b.length;c++){var d=b[c],e=null,f,h=a.Eb().fd();if(null===h)f=null;else{f=this.ua;var h=h.m(),k=d.Fb(h);f=f.D.get(h).get(k);f=0==f.length?null:f[0]}null!=f?(e=this.U.get(f),d.pa=f,fd(this.ua,a,[[e,d]],0)):ed(this.ua,a,[d],0);md(this,a,[e,d])}};
m.remove=function(a,b){ld(this,a);od(this,a,b);gd(this.ua,a,b,0);for(var c=0;c<b.length;c++)md(this,a,[b[c],null])};function nd(a,b,c){b=ad(a.i.info(),b.getName(),1);if(null!==b){var d=dd(a.ua,c,b);d.keys().forEach(function(a){d.get(a).forEach(function(b){var c=this.i.table(b.Nd.Ee),d=this.U.get(a),n=c.Db(d.Fa());n.s[b.Nd.gb]=b.rg.s[b.Nd.ic];md(this,c,[d,n])},this)},a)}}
function od(a,b,c){if(null!==ad(a.i.info(),b.getName(),1)){b=hd(a.ua,b,c);var d=b.nf;b.re.forEach(function(a){var b=this.i.table(a);a=d.get(a).map(function(a){return this.U.get(a)},this);gd(this.ua,b,a,0);a.forEach(function(a){md(this,b,[a,null])},this)},a)}}function ec(a){a.rb.forEach(function(a){var c=this.$.get(a.getName());ed(this.ua,c,C(a.ta),1);gd(this.ua,c,C(a.wa),1);fd(this.ua,c,C(a.na),1)},a)}m.ia=aa();m.Hb=function(){var a=C(this.rb).map(function(a){return jd(a)});this.ld.update(a)};
function ld(a,b){if(!a.$.has(b.getName()))throw new F(106,b.getName());};function pd(a,b,c,d){this.c=a;this.A=b;this.da=this.c==G?!1:c;this.ma=this.A==G?!1:d}var G=new (aa());pd.prototype.toString=function(){return(this.da?"(":"[")+(this.c==G?"unbound":this.c)+", "+(this.A==G?"unbound":this.A)+(this.ma?")":"]")};function qd(a){if(rd(a))return[];var b=null,c=null;a.c==G||(b=new pd(G,a.c,!1,!a.da));a.A==G||(c=new pd(a.A,G,!a.ma,!1));return[b,c].filter(function(a){return null!==a})}pd.prototype.reverse=function(){return new pd(this.A,this.c,this.ma,this.da)};
function sd(a,b){var c=td(a.c,b.c,!0,a.da,b.da);if(0==c)return!0;var d=-1==c?a:b,c=1==c?a:b;return d.A==G||d.A>c.c||d.A==c.c&&!d.ma&&!c.da}function ud(){return new pd(G,G,!1,!1)}function rd(a){return a.c==G&&a.A==G}function vd(a){return a.c==a.A&&a.c!=G&&!a.da&&!a.ma}pd.prototype.contains=function(a){var b=this.A==G||a<this.A||a==this.A&&!this.ma;return(this.c==G||a>this.c||a==this.c&&!this.da)&&b};
function td(a,b,c,d,e){function f(a){return c?a:1==a?-1:1}d=d||!1;e=e||!1;return a==G?b==G?(d?!e:e)?d?f(1):f(-1):0:f(-1):b==G?f(1):a<b?-1:a==b?(d?!e:e)?d?f(1):f(-1):0:1}function wd(a,b){var c=td(a.c,b.c,!0,a.da,b.da);0==c&&(c=td(a.A,b.A,!1,a.ma,b.ma));return c};function H(a,b){this.entries=a;this.M=D(b);this.Ya=null}function I(a){return E(a.M)}function xd(a){return a.entries.map(function(a){return a.sa.s})}function yd(a){return a.entries.map(function(a){return a.sa.id()})}function zd(a,b){return a.Ya.get(b.m())}var Ad=null;function Bd(){null===Ad&&(Ad=new H([],[]));return Ad}
function Cd(a){if(0==a.length)return Bd();for(var b=a.reduce(function(a,b){return a+b.entries.length},0),c=Array(b),d=0,b=a.map(function(a){var b=B();a.entries.forEach(function(a){c[d++]=a;b.set(a.id,a)});return b}),e=B(),f=0;f<c.length;f++)b.every(function(a){return a.has(c[f].id)})&&e.set(c[f].id,c[f]);return new H(C(e),E(a[0].M))}function Dd(a){if(0==a.length)return Bd();var b=B();a.forEach(function(a){a.entries.forEach(function(a){b.set(a.id,a)})});return new H(C(b),E(a[0].M))}
function Ed(a,b){var c=1<b.length,d=a.map(function(a){return new Fd(a,c)});return new H(d,b)}function Fd(a,b){this.sa=a;this.id=Gd++;this.Vd=b}var Gd=0;function J(a,b){var c=b.Za();return null!==c&&a.sa.s.hasOwnProperty(c)?a.sa.s[c]:a.Vd?a.sa.s[K(b.H())][b.getName()]:a.sa.s[b.getName()]}function Hd(a,b,c){var d=b.Za();if(null!=d)a.sa.s[d]=c;else if(a.Vd){var d=K(b.H()),e=a.sa.s[d];null==e&&(e={},a.sa.s[d]=e);e[b.getName()]=c}else a.sa.s[b.getName()]=c}
function Id(a,b,c,d){function e(a,b){if(a.Vd){var c=a.sa.s,d;for(d in c)f[d]=c[d]}else f[b[0]]=a.sa.s}var f={};e(a,b);e(c,d);a=new y(-1,f);return new Fd(a,!0)};r("lf.bind",function(a){return new Jd(a)});function Jd(a){this.fa=a}r("lf.Binder",Jd);Jd.prototype.xa=g("fa");function Kd(){this.Ue=Ld();var a=Md();this.fc=B();this.fc.set(1,Nd());this.fc.set(2,Od());this.fc.set(4,a);this.fc.set(3,a);this.fc.set(5,Pd())}Kd.Bc=function(){return Kd.Qe?Kd.Qe:Kd.Qe=new Kd};function Qd(a,b,c){return(a.fc.get(b)||null).get(c)||null}function Ld(){function a(a){return a}var b=B();b.set(1,function(a){return null===a?null:a?1:0});b.set(2,function(a){return null===a?null:a.getTime()});b.set(3,a);b.set(4,a);b.set(5,a);return b}
function Nd(){var a=B();a.set("eq",function(a,c){return a==c});a.set("neq",function(a,c){return a!=c});return a}
function Md(){var a=Nd();a.set("between",function(a,c){return null===a||null===c[0]||null===c[1]?!1:a>=c[0]&&a<=c[1]});a.set("gte",function(a,c){return null===a||null===c?!1:a>=c});a.set("gt",function(a,c){return null===a||null===c?!1:a>c});a.set("in",function(a,c){return-1!=c.indexOf(a)});a.set("lte",function(a,c){return null===a||null===c?!1:a<=c});a.set("lt",function(a,c){return null===a||null===c?!1:a<c});return a}
function Pd(){var a=Md();a.set("match",function(a,c){return null===a||null===c?!1:(new RegExp(c)).test(a)});return a}
function Od(){var a=B();a.set("between",function(a,c){return null===a||null===c[0]||null===c[1]?!1:a.getTime()>=c[0].getTime()&&a.getTime()<=c[1].getTime()});a.set("eq",function(a,c){return(null===a?-1:a.getTime())==(null===c?-1:c.getTime())});a.set("gte",function(a,c){return null===a||null===c?!1:a.getTime()>=c.getTime()});a.set("gt",function(a,c){return null===a||null===c?!1:a.getTime()>c.getTime()});a.set("in",function(a,c){return c.some(function(c){return c.getTime()==a.getTime()})});a.set("lte",
function(a,c){return null===a||null===c?!1:a.getTime()<=c.getTime()});a.set("lt",function(a,c){return null===a||null===c?!1:a.getTime()<c.getTime()});a.set("neq",function(a,c){return(null===a?-1:a.getTime())!=(null===c?-1:c.getTime())});return a};function L(){this.g=this.C=null}var Rd=[];L.prototype.getParent=g("C");L.prototype.ib=function(){for(var a=this;!fa(a.getParent());)a=a.getParent();return a};function Sd(a){for(var b=0;!fa(a.getParent());)b++,a=a.getParent();return b}function M(a){return a.g||Rd}function Td(a,b){return M(a)[b]||null}function Ud(a,b,c){b.C=a;null===a.g?a.g=[b]:a.g.splice(c,0,b)}function Vd(a,b){b.C=a;null===a.g?a.g=[b]:a.g.push(b)}
function Wd(a,b){var c=a.g&&a.g[b];return c?(c.C=null,a.g.splice(b,1),0==a.g.length&&(a.g=null),c):null}L.prototype.removeChild=function(a){return Wd(this,M(this).indexOf(a))};function Xd(a,b,c){Td(a,c).C=null;b.C=a;a.g[c]=b}function Yd(a,b,c){!1!==b.call(c,a)&&M(a).forEach(function(a){Yd(a,b,c)})};function Zd(){L.call(this);this.pa=$d++}t(Zd,L);var $d=0;Zd.prototype.W=g("pa");function ae(a,b,c){Zd.call(this);this.O=a;this.value=b;this.G=c;this.vc=Qd(Kd.Bc(),this.O.I(),this.G);this.ab=!1;this.bc=b}t(ae,Zd);m=ae.prototype;m.Kb=function(){var a=new ae(this.O,this.value,this.G);a.bc=this.bc;a.vd(this.ab);var b=this.W();a.pa=b;return a};m.hb=function(a){return null!=a?(a.push(this.O),a):[this.O]};m.vd=ba("ab");function be(a){var b=!1;a.value instanceof Jd||(b="array"==ea(a.value)?!a.value.some(function(a){return a instanceof Jd}):!0);if(!b)throw new F(501);}
m.eval=function(a){be(this);if("in"==this.G)return ce(this,a);var b=a.entries.filter(function(a){return this.vc(J(a,this.O),this.value)!=this.ab},this);return new H(b,I(a))};m.bind=function(a){if(this.bc instanceof Jd){var b=this.bc.xa();if(a.length<=b)throw new F(510);this.value=a[b]}else"array"==ea(this.bc)&&(this.value=this.bc.map(function(b){if(b instanceof Jd){var d=b.xa();if(a.length<=d)throw new F(510);return a[b.xa()]}return b}))};
function ce(a,b){var c=D(a.value),d=function(a){return null===a?!1:c.has(a)!=this.ab}.bind(a),e=b.entries.filter(function(a){return d(J(a,this.O))},a);return new H(e,I(b))}m.toString=function(){return"value_pred("+this.O.m()+" "+this.G+(this.ab?"(complement)":"")+" "+this.value+")"};function de(a){this.ca=a;this.ad=this.Ca=null}function ee(a,b){null===a.Ca&&null!=a.u&&(a.Ca=fe(a.u));return a.Ca.get(b)||null}function fe(a){var b=B();Yd(a,function(a){b.set(a.W(),a)});return b}function ge(a,b){b.u&&(a.u=b.u.Kb());a.ad=b}de.prototype.bind=function(){return this};function he(a,b){var c=a.u;null!=c&&Yd(c,function(a){a instanceof ae&&a.bind(b)})};function ie(a){de.call(this,a)}t(ie,de);function je(a){var b="";a.forEach(function(c,d){b+=c.O.m()+" ";b+=1==c.lb?"ASC":"DESC";d<a.length-1&&(b+=", ")});return b}ie.prototype.ba=function(){return D(this.c)};ie.prototype.clone=function(){var a=new ie(this.ca);ge(a,this);this.f&&(a.f=this.f.slice());this.c&&(a.c=this.c.slice());a.X=this.X;a.L=this.L;this.N&&(a.N=this.N.slice());this.ja&&(a.ja=this.ja.slice());this.Qb&&(a.Qb=this.Qb);this.Yb&&(a.Yb=this.Yb);a.yb=this.yb;return a};
ie.prototype.bind=function(a){ie.Ib.bind.call(this,a);null!=this.Qb&&(this.X=a[this.Qb.xa()]);null!=this.Yb&&(this.L=a[this.Yb.xa()]);he(this,a);return this};function ke(a,b){this.Da=a;this.$=b}ke.prototype.ib=g("Da");ke.prototype.ba=g("$");function le(a){var b=D();a.forEach(function(a){a.ba().forEach(b.add.bind(b))});return b};function me(a,b){this.global=a;this.Ka=a.j(kc);this.sd=b.map(function(a){return a.context});this.df=b.map(function(a){return a.ge});this.Id=le(this.df);this.te=ne(this);this.cb=x()}function ne(a){return a.sd.some(function(a){return!(a instanceof ie)})?1:0}m=me.prototype;
m.exec=function(){function a(){var f=d.shift();if(f){var h=e[c.length];return f.ib().exec(b,h).then(function(b){c.push(b[0]);return a()})}return w()}var b=0==this.te?void 0:new kd(this.global,this.Id),c=[],d=this.df.slice(),e=this.sd;return a().then(function(){return this.Ka.Cb(this.te,E(this.Id),b).ia()}.bind(this)).then(function(){this.de(c);return c}.bind(this),function(a){null!=b&&b.Hb();throw a;})};m.I=g("te");m.ba=g("Id");m.Mb=g("cb");m.W=function(){return ka(this)};m.de=aa();function oe(a,b){me.call(this,a,b);this.Gb=a.j(pc)}t(oe,me);oe.prototype.getPriority=l(0);oe.prototype.de=function(a){this.sd.forEach(function(b,c){pe(this.Gb,b,a[c])},this)};function qe(a,b){this.h=a;this.Gb=a.j(pc);this.Ea=a.j(oc);this.ld=new Hc(a);this.rb=b;var c=a.j(qc),d=this.rb.map(function(a){return c.table(a.getName())});this.$=D(d);this.cb=x()}m=qe.prototype;m.exec=function(){this.ld.update(this.rb);this.Pc();return w()};m.I=l(1);m.ba=g("$");m.Mb=g("cb");m.W=function(){return ka(this)};m.getPriority=l(1);m.Pc=function(){var a=re(this.Gb,this.$);0!=a.length&&(a=new oe(this.h,a),se(this.Ea,a))};function te(a){this.h=a;this.Ka=a.j(kc);this.Ea=a.j(oc)}te.prototype.be=function(a){a=new qe(this.h,a);se(this.Ea,a)};function N(a,b){this.Pa=a;this.l=b;this.Va=B()}r("lf.backstore.FirebaseRawBackStore",N);N.prototype.gd=g("l");N.prototype.hd=function(){throw new F(351);};function ue(a,b){var c=x(),d=a;b.length&&(d=a.child(b));d.once("value",function(a){c.resolve(a.val())},function(a){c.reject(a)});return c.ha}function ve(a,b,c){function d(a){a?e.reject(a):e.resolve()}c=c||!1;var e=x();c?a.set(b,d):a.update(b,d);return e.ha}
N.prototype.Ga=function(a){return ue(this.l,"@rev/R").then(function(a){this.Na=a;return ue(this.l,"@table")}.bind(this)).then(function(b){var c=0,d;for(d in b)this.Va.set(d,b[d]),b[d]>c&&(c=b[d]);a.ra().forEach(function(a){this.Va.has(a.getName())||(b[a.getName()]=++c)},this);d=this.l.child("@table");return ve(d,b)}.bind(this))};
function we(a,b,c){var d=a.Va.get(b);return null!=d?function(){var a={},b=x();this.l.orderByChild("T").equalTo(d).once("value",function(d){d.forEach(function(b){var d=c(b.val());a[parseInt(b.key(),10)]=d});b.resolve(a)});return b.ha}.call(a).then(function(a){a["@rev"]={R:++this.Na};return ve(this.l,a)}.bind(a)):w()}N.prototype.tc=function(a){return we(this,a,l(null)).then(function(){this.Va.delete(a);return ve(this.l.child("@table/"+a),null,!0)}.bind(this))};N.prototype.dropTable=N.prototype.tc;
N.prototype.oc=function(a,b,c){return we(this,a,function(a){var e=a.P;e[b]=c;return{R:this.Na+1,T:a.T,P:e}}.bind(this))};N.prototype.addTableColumn=N.prototype.oc;N.prototype.uc=function(a,b){return we(this,a,function(a){var d=a.P;delete d[b];return{R:this.Na+1,T:a.T,P:d}}.bind(this))};N.prototype.dropTableColumn=N.prototype.uc;N.prototype.Oc=function(a,b,c){return we(this,a,function(a){var e=a.P;e[c]=e[b];delete e[b];return{R:this.Na+1,T:a.T,P:e}}.bind(this))};N.prototype.renameTableColumn=N.prototype.Oc;
N.prototype.tb=function(){throw new F(351);};N.prototype.createRow=N.prototype.tb;N.prototype.Ec=g("Pa");N.prototype.getVersion=N.prototype.Ec;N.prototype.dc=function(a){var b=x();a=this.Va.get(a);this.l.orderByChild("T").equalTo(a).once("value",function(a){var d=[];a.forEach(function(a){d.push(a.val().P)});b.resolve(d)});return b.ha};N.prototype.dump=function(){var a={},b=ac(this.Va).map(function(b){return this.dc(b).then(function(d){a[b]=d})}.bind(this));return eb(b).then(function(){return a})};
N.prototype.dump=N.prototype.dump;function xe(a,b,c){cc.call(this,b,c);this.l=a}t(xe,cc);xe.prototype.H=function(a){return this.l.Cc(a)};
xe.prototype.qc=function(){var a=this.Ra.rb;if(0==a.size)this.Y.resolve();else{var b=this.l.Na+1;this.l.Na=b;var c={"@rev":{R:b}};a.forEach(function(a,e){var f=this.l.Va.get(e);a.ta.forEach(function(a,d){c[d]={R:b,T:f,P:a.s}});a.na.forEach(function(a,d){c[d]={R:b,T:f,P:a[1].s}});a.wa.forEach(function(a,b){c[b]=null})},this);this.l.l.update(c,function(c){null===c?this.Y.resolve():(this.l.Na=b-1,c=C(a).map(function(a){return ye(this.l,a.getName())},this),eb(c).then(this.Y.reject.bind(this.Y),this.Y.reject.bind(this.Y)))}.bind(this))}return this.Y.ha};function ze(){this.va=B()}function Ae(a,b){if(0==b.length)return C(a.va);var c=[];b.forEach(function(a){a=this.va.get(a)||null;null===a||c.push(a)},a);return c}ze.prototype.getData=g("va");ze.prototype.get=function(a){return w(Ae(this,a))};function Be(a,b){b.forEach(function(a){this.va.set(a.id(),a)},a)}ze.prototype.put=function(a){Be(this,a);return w()};function Ce(a,b){0==b.length||b.length==a.va.size?a.va.clear():b.forEach(function(a){this.va.delete(a)},a)}
ze.prototype.remove=function(a){Ce(this,a);return w()};function De(a){return 0==a.va.size?0:ac(a.va).reduce(function(a,c){return a>c?a:c},0)};function Ee(a,b){this.i=a;this.Af=b;this.Nc=B();this.Na=-1;this.M=B();this.Va=B();this.Fd=null}m=Ee.prototype;
m.Ga=function(a){this.l=this.Af.child(this.i.name());var b=a||function(){return w()};return ue(this.l,"@db/version").then(function(a){return null===a?ve(this.l,Fe(this),!0).then(function(){var a=new N(0,this.l);return b(a)}.bind(this)):a==this.i.version()?ue(this.l,"@rev/R").then(function(a){this.Na=a;return ue(this.l,"@table")}.bind(this)).then(function(a){for(var b in a)this.Va.set(b,a[b]);a=this.i.ra().map(function(a){return ye(this,a.getName())},this);return eb(a)}.bind(this)).then(function(){Ge(this);
He(this);return w()}.bind(this)):this.ee(a,b).then(function(){return this.Ga()}.bind(this))}.bind(this))};m.ee=function(a,b){var c=new N(a,this.l);return c.Ga(this.i).then(function(){return w()}.bind(this)).then(function(){return b(c)}).then(function(){var a=this.l.child("@db");return ve(a,{version:this.i.version()},!0)}.bind(this))};
function He(a){a.l.off();a.l.on("child_removed",a.og.bind(a));a.Gd&&(a.Gd.off(),a.Nc.clear());a.Gd=a.l.orderByChild("R").startAt(a.Na+1);a.Gd.on("value",a.be.bind(a))}function Ge(a){pb=C(a.M).map(function(a){return De(a)}).reduce(function(a,c){return a>c?a:c},0)+1}m.og=function(a){var b=a.val(),c=this.Nc.get(b.T)||null;null===c&&(c=D(),this.Nc.set(b.T,c));c.add(parseInt(a.key(),10))};
m.be=function(a){var b=a.child("@rev/R").val();null!=b&&b!=this.Na&&(this.Na=b,a=Ie(this,a),a.forEach(function(a){var b=this.M.get(a.getName()),e=ac(a.wa);0<e.length&&Ce(b,e);var f=C(a.ta);a.na.forEach(function(a){f.push(a[1])});Be(b,f)},this),0<a.length&&this.Jc(a),He(this))};
function Ie(a,b){var c=D(),d=B();a.Va.forEach(function(a,b){var h=this.M.get(b),k=new id(b);if(this.Nc.has(a)){var n=E(this.Nc.get(a));n.forEach(function(a){c.add(a)});Ae(h,n).forEach(function(a){k.delete(a)})}d.set(a,k)}.bind(a));b.forEach(function(a){if("@rev"!=a.key()){var b=parseInt(a.key(),10);if(!c.has(b)){a=a.val();var h=d.get(a.T),k=this.M.get(h.getName());k.getData().has(b)?h.modify([Ae(k,[b])[0],new y(b,a.P)]):h.add(new y(b,a.P))}}}.bind(a));return C(d).filter(function(a){return!a.md()})}
function ye(a,b){var c=x(),d=a.Va.get(b);a.l.orderByChild("T").equalTo(d).once("value",function(a){var d=new ze,h=[];a.forEach(function(a){h.push(new y(parseInt(a.key(),10),a.val().P))});Be(d,h);this.M.set(b,d);c.resolve()}.bind(a));return c.ha}function Fe(a){var b={};b["@db"]={version:a.i.version()};b["@rev"]={R:1};a.Na=1;b["@table"]={};a.i.ra().forEach(function(a,d){var e=a.getName();b["@table"][e]=d;this.M.set(e,new ze);this.Va.set(e,d)},a);return b}m.Cb=function(a,b,c){return new xe(this,a,c)};
m.Cc=function(a){var b=this.M.get(a)||null;if(null!==b)return b;throw new F(101,a);};m.close=aa();m.subscribe=ba("Fd");m.Jc=function(a){null!=this.Fd&&this.Fd(a)};function P(a,b,c,d){this.l=b;this.Xa=c;this.Pa=a;this.Yc=d}r("lf.backstore.IndexedDBRawBackStore",P);P.prototype.gd=g("l");P.prototype.getRawDBInstance=P.prototype.gd;P.prototype.hd=g("Xa");P.prototype.getRawTransaction=P.prototype.hd;P.prototype.tc=function(a){return new v(function(b,c){try{this.l.deleteObjectStore(a)}catch(d){c(d);return}b()},this)};P.prototype.dropTable=P.prototype.tc;
function Je(a,b,c,d){return new v(function(a,f){var h;try{var k=this.Xa.objectStore(b);h=k.openCursor()}catch(n){f(n);return}h.onsuccess=function(){var b=h.result;b?(c(b),b.continue()):(d(k),a())};h.onerror=f},a)}function Ke(a){var b=null;return b=a instanceof ArrayBuffer?tb(a):a instanceof Date?a.getTime():a}
function Le(a,b,c){function d(a){var b=Bc(a.value),d=b.s,e;for(e in d){var A=rb(d[e]);c(A);d[e]=A.Fa()}a.update(b.Fa())}function e(a){var b=rb(a.value);c(b);a.update(b.Fa())}return Je(a,b,a.Yc?d:e,aa())}P.prototype.oc=function(a,b,c){var d=Ke(c);return Le(this,a,function(a){a.s[b]=d})};P.prototype.addTableColumn=P.prototype.oc;P.prototype.uc=function(a,b){return Le(this,a,function(a){delete a.s[b]})};P.prototype.dropTableColumn=P.prototype.uc;
P.prototype.Oc=function(a,b,c){return Le(this,a,function(a){a.s[c]=a.s[b];delete a.s[b]})};P.prototype.renameTableColumn=P.prototype.Oc;function Me(a,b){var c=[];return new v(function(a,e){var f;try{f=this.Xa.objectStore(b).openCursor()}catch(h){e(h);return}f.onsuccess=function(){var b=f.result;if(b){if(this.Yc){var e;e=Bc(b.value).s;for(var n in e)c.push(e[n])}else c.push(b.value);b.continue()}else a(c)}.bind(this);f.onerror=e},a)}P.prototype.tb=function(a){var b={},c;for(c in a)b[c]=Ke(a[c]);return sb(b)};
P.prototype.createRow=P.prototype.tb;P.prototype.Ec=g("Pa");P.prototype.getVersion=P.prototype.Ec;P.prototype.dump=function(){for(var a=this.l.objectStoreNames,b=[],c=0;c<a.length;++c){var d=a.item(c);b.push(this.dc(d))}return eb(b).then(function(b){var c={};b.forEach(function(b,d){c[a.item(d)]=b});return c})};P.prototype.dump=P.prototype.dump;P.prototype.dc=function(a){return Me(this,a).then(function(a){return a.map(function(a){return a.value})})};function Ne(a,b){this.aa=a;this.Lb=b}m=Ne.prototype;m.get=function(a){if(0==a.length)return this.zc();a=a.map(function(a){return new v(function(c,d){var e;try{e=this.aa.get(a)}catch(f){d(f);return}e.onerror=d;e.onsuccess=function(a){c(this.Lb(a.target.result))}.bind(this)},this)},this);return eb(a)};
m.zc=function(){return new v(function(a,b){var c=[],d;try{d=this.aa.openCursor()}catch(e){b(e);return}d.onerror=b;d.onsuccess=function(){var b=d.result;b?(c.push(this.Lb(b.value)),b.continue()):a(c)}.bind(this)},this)};m.Sb=function(a){return new v(function(b,c){var d;try{d=a()}catch(e){c(e);return}d.onsuccess=b;d.onerror=c},this)};m.put=function(a){if(0==a.length)return w();a=a.map(function(a){return this.Sb(function(){return this.aa.put(a.Fa())}.bind(this))},this);return eb(a)};
m.remove=function(a){return new v(function(b,c){var d=this.aa.count();d.onsuccess=function(d){if(0==a.length||d.target.result==a.length)return this.Sb(function(){return this.aa.clear()}.bind(this)).then(b,c);d=a.map(function(a){return this.Sb(function(){return this.aa.delete(a)}.bind(this))},this);eb(d).then(b,c)}.bind(this);d.onerror=c},this)};function Oe(a,b,c,d,e){cc.call(this,c,e);this.h=a;this.Xa=b;this.Yc=d;this.Xa.oncomplete=this.Y.resolve.bind(this.Y);this.Xa.onabort=this.Y.reject.bind(this.Y)}t(Oe,cc);Oe.prototype.H=function(a,b,c){return this.Yc?(c=null!=c?c:0,a=this.Xa.objectStore(a),new Cc(a,b,0==c?qa(Ec,this.h):Fc)):new Ne(this.Xa.objectStore(a),b)};Oe.prototype.qc=function(){return this.Y.ha};function Pe(a,b){this.h=a;this.i=b;this.Zc=b.ef().Mf||!1}m=Pe.prototype;
m.Ga=function(a){var b=window.indexedDB||window.mozIndexedDB||window.webkitIndexedDB||window.msIndexedDB;if(null==b)throw new F(352);var c=a||function(){return w()};return new v(function(a,e){var f;try{f=b.open(this.i.name(),this.i.version())}catch(h){e(h);return}f.onerror=e;f.onupgradeneeded=function(a){Qe(this,c,a).then(aa(),e)}.bind(this);f.onsuccess=function(b){this.l=b.target.result;this.ne().then(function(b){pb=b+1;a(this.l)}.bind(this))}.bind(this)},this)};
function Qe(a,b,c){var d=c.target.result,e=c.target.transaction;c=new P(c.oldVersion,d,e,a.Zc);Re(d);a.i.ra().forEach(qa(a.Hf,d,e),a);return b(c)}function Re(a){for(var b=[],c=0;c<a.objectStoreNames.length;++c){var d=a.objectStoreNames.item(c);-1!=d.indexOf(".")&&b.push(d)}b.forEach(function(b){try{a.deleteObjectStore(b)}catch(c){}})}
m.Hf=function(a,b,c){a.objectStoreNames.contains(c.getName())||a.createObjectStore(c.getName(),{keyPath:"id"});c.zb()&&(c.ya().forEach(function(c){this.sc(a,b,c.m(),"btree")},this),this.sc(a,b,Se(c),"rowid"))};m.sc=function(a,b,c,d){a.objectStoreNames.contains(c)||(a.createObjectStore(c,{keyPath:"id"}),a=b.objectStore(c),(this.Zc?new Cc(a,rb,Fc):new Ne(a,rb)).put([new vb(new ub(d))]))};m.Cb=function(a,b,c){b=this.l.transaction(Te(b),0==a?"readonly":"readwrite");return new Oe(this.h,b,a,this.Zc,c)};
function Te(a){var b=D();a.forEach(function(a){b.add(a.getName());a.zb()&&(a.ya().forEach(function(a){b.add(a.m())}),b.add(Se(a)))});return E(b)}
m.ne=function(a){function b(){if(0==d.length)return w();var a=d.shift();return c(a).then(b)}function c(b){return new v(function(c,d){var O;try{O=(a||e.transaction([b])).objectStore(b).openCursor(null,"prev")}catch(da){d(da);return}O.onsuccess=function(a){(a=a.target.result)&&(f=Math.max(f,h(a)));c(f)};O.onerror=function(){c(f)}})}var d=this.i.ra().map(function(a){return a.getName()}),e=this.l,f=0,h=function(a){return this.Zc?(a=Bc(a.value),Object.keys(a.s).reduce(function(a,b){return Math.max(a,b)},
0)):a.key}.bind(this);return new v(function(a){b().then(function(){a(f)})})};m.close=function(){this.l.close()};m.Cc=function(){throw new F(511);};m.subscribe=aa();m.Jc=aa();function Ue(a,b,c){cc.call(this,b,c);this.aa=a;0==b&&this.Y.resolve()}t(Ue,cc);Ue.prototype.H=function(a){return this.aa.Cc(a)};Ue.prototype.qc=function(){this.Y.resolve();return this.Y.ha};function Ve(a){this.i=a;this.M=B()}m=Ve.prototype;m.Ga=function(){this.i.ra().forEach(this.Zf,this);return w()};m.Cc=function(a){var b=this.M.get(a)||null;if(null===b)throw new F(101,a);return b};m.Cb=function(a,b,c){return new Ue(this,a,c)};function We(a,b){if(!a.M.has(b)){var c=new ze;a.M.set(b,c);return c}return null}m.Zf=function(a){We(this,a.getName());a.zb()&&(a.ya().forEach(function(a){this.sc(a.m(),"btree")},this),this.sc(Se(a),"rowid"))};m.sc=function(a,b){var c=We(this,a);null===c||c.put([new vb(new ub(b))])};
m.close=aa();m.subscribe=aa();m.Jc=aa();function Xe(a){Ve.call(this,a);this.od=null}t(Xe,Ve);Xe.prototype.subscribe=function(a){null===this.od&&(this.od=a)};Xe.prototype.Jc=function(a){null===this.od||this.od(a)};function Ye(a,b,c){this.Xa=a;this.w=b;this.Lb=c}Ye.prototype.get=function(a){var b=this.Lb;return Ze(this.Xa,"SELECT id, value FROM "+this.w+" "+(0==a.length?"":"WHERE id IN ("+a.join(",")+")"),[],function(a){for(var d=a.rows.length,e=Array(d),f=0;f<d;++f)e[f]=b({id:a.rows.item(f).id,value:JSON.parse(a.rows.item(f).value)});return e})};
Ye.prototype.put=function(a){if(0==a.length)return w();var b="INSERT OR REPLACE INTO "+this.w+"(id, value) VALUES (?, ?)";a.forEach(function(a){Ze(this.Xa,b,[a.id(),JSON.stringify(a.s)])},this);return w()};Ye.prototype.remove=function(a){Ze(this.Xa,"DELETE FROM "+this.w+" "+(0==a.length?"":"WHERE id IN ("+a.join(",")+")"),[]);return w()};function $e(a,b,c){cc.call(this,b,c);this.l=a;this.M=B();this.Jd=[]}t($e,cc);function af(a){return a.replace(".","__d__").replace("#","__s__")}$e.prototype.H=function(a,b){var c=this.M.get(a)||null;null===c&&(c=new Ye(this,af(a),b),this.M.set(a,c));return c};function Ze(a,b,c,d){var e=x();a.Jd.push({Cg:b,sg:c,transform:d,Y:e});return e.ha}
$e.prototype.qc=function(){var a=null,b=this.Y.reject.bind(this.Y),c=function(a,b){this.Y.reject(b)}.bind(this),d=[],e=function(b,h){if(null!==a){var k=h;null!=a.transform&&null!=h&&(k=a.transform(h));d.push(k);a.Y.resolve(k)}0<this.Jd.length?(a=k=this.Jd.shift(),b.executeSql(k.Cg,k.sg,e,c)):this.Y.resolve(d)}.bind(this);0==this.uf?this.l.readTransaction(e,b):this.l.transaction(e,b);return this.Y.ha};function Q(a,b,c){this.l=c;this.h=a;this.Pa=b}r("lf.backstore.WebSqlRawBackStore",Q);Q.prototype.gd=g("l");Q.prototype.getRawDBInstance=Q.prototype.gd;Q.prototype.hd=function(){throw new F(356);};Q.prototype.getRawTransaction=Q.prototype.hd;function bf(a){return new $e(a.l,1,new kd(a.h,D()))}Q.prototype.tc=function(a){var b=bf(this);Ze(b,"DROP TABLE "+a,[]);return b.ia()};Q.prototype.dropTable=Q.prototype.tc;
Q.prototype.dc=function(a){var b=bf(this);Ze(b,"SELECT id, value FROM "+a,[]);return b.ia().then(function(a){for(var b=a[0].rows.length,e=Array(b),f=0;f<b;++f)e[f]={id:a[0].rows.item(f).id,value:JSON.parse(a[0].rows.item(f).value)};return w(e)})};function cf(a,b,c){var d=bf(a),e="UPDATE "+b+" SET value=? WHERE id=?";return a.dc(b).then(function(a){a.forEach(function(a){a=c(a);Ze(d,e,[JSON.stringify(a.value),a.id])});return d.ia()})}
Q.prototype.oc=function(a,b,c){var d=Ke(c);return cf(this,a,function(a){a.value[b]=d;return a})};Q.prototype.addTableColumn=Q.prototype.oc;Q.prototype.uc=function(a,b){return cf(this,a,function(a){delete a.value[b];return a})};Q.prototype.dropTableColumn=Q.prototype.uc;Q.prototype.Oc=function(a,b,c){return cf(this,a,function(a){a.value[c]=a.value[b];delete a.value[b];return a})};Q.prototype.renameTableColumn=Q.prototype.Oc;Q.prototype.tb=function(a){var b={},c;for(c in a)b[c]=Ke(a[c]);return sb(b)};
Q.prototype.createRow=Q.prototype.tb;Q.prototype.Ec=g("Pa");Q.prototype.getVersion=Q.prototype.Ec;function df(a){Ze(a,'SELECT tbl_name FROM sqlite_master WHERE type="table"',[],function(a){for(var c=Array(a.rows.length),d=0;d<c.length;++d)c[d]=a.rows.item(d).tbl_name;return c})}
Q.prototype.dump=function(){var a=x(),b=bf(this);df(b);var c={};b.ia().then(function(b){b=b[0].filter(function(a){return"__lf_ver"!=a&&"__WebKitDatabaseInfoTable__"!=a}).map(function(a){return this.dc(a).then(function(b){c[a]=b})},this);eb(b).then(function(){a.resolve(c)})}.bind(this));return a.ha};Q.prototype.dump=Q.prototype.dump;function ef(a,b,c){this.h=a;this.i=b;this.Bg=c||4194304}m=ef.prototype;m.Ga=function(a){if(null==window.openDatabase)throw new F(353);var b=a||function(){return w()};return new v(function(a,d){try{var e=window.openDatabase(this.i.name(),"",this.i.name(),this.Bg);if(null!=e)this.l=e,ff(this,b).then(a,d);else throw new F(354);}catch(f){d(f)}},this)};
function ff(a,b){var c=x(),d=new $e(a.l,1,new kd(a.h,D()));Ze(d,"CREATE TABLE IF NOT EXISTS __lf_ver(id INTEGER PRIMARY KEY, v INTEGER)",[]);Ze(d,"SELECT v FROM __lf_ver WHERE id = 0",[]);d.ia().then(function(a){var d=0;a[1].rows.length&&(d=a[1].rows.item(0).v);d<this.i.version()?this.ee(b,d).then(c.resolve.bind(c)):d>this.i.version()?c.reject(new F(108)):c.resolve()}.bind(a));return c.ha}m.Cb=function(a,b,c){if(null!=this.l)return new $e(this.l,a,c);throw new F(2);};m.close=aa();
m.Cc=function(){throw new F(512);};m.subscribe=function(){throw new F(355);};m.Jc=function(){throw new F(355);};m.ee=function(a,b){var c=x();gf(this).then(function(){a(new Q(this.h,b,this.l)).then(function(){return this.ne()}.bind(this)).then(c.resolve.bind(c))}.bind(this),c.reject.bind(c));return c.ha};
function gf(a){var b=a.i.ra(),c=new $e(a.l,1,new kd(a.h,D())),d=new $e(a.l,1,new kd(a.h,D()));Ze(c,"INSERT OR REPLACE INTO __lf_ver VALUES (0, ?)",[a.i.version()]);df(c);return c.ia().then(function(a){function c(a,b){Ze(d,"INSERT INTO "+a+"(id, value) VALUES(?, ?)",[-1,JSON.stringify(qb(new vb(new ub(b))))])}var h=a[1];h.filter(function(a){return-1!=a.indexOf("__d__")}).forEach(function(a){Ze(d,"DROP TABLE "+a,[])});var k=[],n=[],A=[];b.map(function(a){-1==h.indexOf(a.getName())&&k.push(a.getName());
a.zb&&(a.ya().forEach(function(a){a=af(a.m());k.push(a);n.push(a)}),a=af(Se(a)),k.push(a),A.push(a))});k.forEach(function(a){Ze(d,"CREATE TABLE "+a+"(id INTEGER PRIMARY KEY, value TEXT)",[])});n.forEach(function(a){c(a,"btree")});A.forEach(function(a){c(a,"rowid")});return d.ia()})}
m.ne=function(){var a=0,b=x(),c=function(b){var c=new $e(this.l,0);Ze(c,"SELECT MAX(id) FROM "+b,[]);return c.ia().then(function(b){b=b[0].rows.item(0)[0];a=Math.max(b,a)})}.bind(this),d=this.i.ra().map(function(a){return c(a.getName())});eb(d).then(function(){b.resolve(a)},function(a){b.reject(a)});return b.ha};function hf(a){this.o=B();this.Zb=B();a.ra().forEach(function(a){this.Zb.set(a.getName(),D())},this)}m=hf.prototype;m.set=function(a,b){this.o.set(b.id(),b);this.Zb.get(a).add(b.id())};m.Vb=function(a,b){var c=this.Zb.get(a);b.forEach(function(a){this.o.set(a.id(),a);c.add(a.id())},this)};m.get=function(a){return this.o.get(a)||null};function jf(a,b){return b.map(function(a){return this.get(a)},a)}
m.$a=function(a,b,c){var d=[],e=Math.min(b,c),f=Math.max(b,c);a=this.Zb.get(a);if(a.size<f-e)a.forEach(function(a){a>=e&&a<=f&&(a=this.o.get(a),d.push(a))},this);else for(b=e;b<=f;++b)a.has(b)&&(c=this.o.get(b),d.push(c));return d};m.remove=function(a,b){this.o.delete(b);this.Zb.get(a).delete(b)};m.Ac=function(a){return null!=a?this.Zb.get(a).size:this.o.size};m.clear=function(){this.o.clear();this.Zb.clear()};function kf(a,b,c){var d=0,e=a.length;for(c=c||mf;d<e;){var f=d+e>>1;0>c(a[f],b)?d=f+1:e=f}return d==e&&a[d]==b?d:~d}function mf(a,b){return a-b}function nf(a,b,c){c=kf(a,b,c);return 0>c?(a.splice(-(c+1),0,b),!0):!1};function of(a,b,c,d){a=b?a.reverse():a;if(null==c&&null==d)return a;c=Math.min(q(c)?c:a.length,a.length);if(0==c)return[];d=Math.min(d||0,a.length);return a.slice(d,d+c)};function pf(){this.oa=0}pf.prototype.add=function(a,b){this.oa+=b};pf.prototype.remove=function(a,b){this.oa-=b};pf.prototype.clear=function(){this.oa=0};function qf(a,b){a.clear();b.forEach(function(a){this.oa+=a.oa},a)};function rf(a,b,c,d){this.w=a;this.V=b;this.ue=c;this.pb=new pf;if(d){a=511;a*=a*a;if(d.length>=a)throw new F(6,a);d=sf(this,d);this.qa=d=tf(d)}else this.clear()}var uf=[];m=rf.prototype;m.getName=g("w");m.toString=function(){return this.qa.toString()};m.add=function(a,b){this.qa=this.qa.xb(a,b)};m.set=function(a,b){this.qa=this.qa.xb(a,b,!0)};m.remove=function(a,b){this.qa=this.qa.remove(a,b)};m.get=function(a){return this.qa.get(a)};
m.bd=function(a){if(null==a)return this.Oa().oa;if(a instanceof pd){if(rd(a))return this.Oa().oa;if(vd(a))return this.get(a.c).length}return this.$a([a]).length};m.Oa=g("pb");m.zc=function(a,b,c,d){c=Array(a);this.qa.fill({offset:b?this.pb.oa-a-d:d,count:a,qe:0},c);return b?c.reverse():c};
m.$a=function(a,b,c,d){var e=vf(this.qa).b[0];if(!q(e)||0==c)return uf;b=b||!1;c=null!=c?Math.min(c,this.pb.oa):this.pb.oa;d=d||0;var f=Math.min(Math.max(this.pb.oa-d,0),c);if(0==f)return uf;if(!q(a)||1==a.length&&a[0]instanceof pd&&rd(a[0]))return this.zc(f,b,c,d);a=this.V.qf(a);var h=Array(b?this.pb.oa:f),k={count:0,X:h.length,reverse:b,L:d};a.forEach(function(a){for(var b=this.V.td(a),b=this.V.Ud(a)?e:b[0],b=wf(this.qa,b),c=k.count,d=0;null!=b&&k.count<k.X;)b.$a(a,k,h),k.count!=c||0<k.L?(d=0,c=
k.count):d++,b=2==d?null:b.next()},this);h.length>k.count&&h.splice(k.count,h.length-k.count);return b?of(h,b,c,d):h};m.clear=function(){this.qa=xf(this);this.pb.clear()};m.Ma=function(a){return this.qa.Ma(a)};m.min=function(){return this.Ic(this.V.min.bind(this.V))};m.max=function(){return this.Ic(this.V.max.bind(this.V))};
m.Ic=function(a){var b=vf(this.qa),c=yf(this.qa);if(0==b.b.length&&0==c.b.length)return null;var d=b.b[0],b=b.B[0],e=c.b[c.b.length-1],c=c.B[c.b.length-1];return 1==a(d,e)?[d,this.ue?[b]:b]:[e,this.ue?[c]:c]};m.Ia=g("ue");m.rc=g("V");m.Yd=function(a,b){return null!=a?-1==this.V.compare(a,b):!1};m.Qa=function(a,b){return null!=a?0==this.V.compare(a,b):!1};m.Fa=function(){for(var a=[],b=vf(this.qa);b;)a.push(new y(b.pa,[b.b,b.B])),b=b.Aa;return a};
function zf(a,b,c,d){a=new rf(b,a,c);d=Af(d,a);a.qa=d;return a}function Bf(a,b){this.pa=a;this.F=b;this.jb=0;this.Aa=this.Ab=this.C=null;this.b=[];this.B=[];this.g=[]}function xf(a){return new Bf(pb++,a)}function R(a){return 0==a.jb}m=Bf.prototype;m.next=g("Aa");
function Cf(a){function b(a){return null!=a?a.pa.toString():"_"}var c=a.pa+"["+a.b.join("|")+"]",d=a.g.map(function(a){return a.pa}).join("|"),e=a.B.join("/"),f=b(a.Ab)+"{",f=R(a)?f+e:f+d,f=f+"}"+b(a.C);a.Aa&&(a=Cf(a.Aa),c=c+"  "+a[0],f=f+"  "+a[1]);return[c,f]}m.toString=function(){var a="",b=Cf(this),a=a+(b[0]+"\n"+b[1]+"\n");this.g.length&&(a+=this.g[0].toString());return a};function vf(a){return R(a)?a:vf(a.g[0])}function yf(a){return R(a)?a:yf(a.g[a.g.length-1])}
function Df(a,b){b&&(b.Ab=a);a&&(a.Aa=b)}function sf(a,b){for(var c=b.length,d=0,e=xf(a),f=e;0<c;){var h=768<=c?511:257<=c&&511>=c?c:257,k=b.slice(d,d+h);e.b=k.map(function(a){return a.key});e.B=k.map(function(a){return a.value});d+=h;c-=h;0<c&&(h=xf(e.F),Df(e,h),e=h)}return f}function Ef(a){var b=a[0],c=xf(b.F);c.jb=b.jb+1;c.g=a;for(b=0;b<a.length;++b)a[b].C=c,0<b&&c.b.push(a[b].b[0]);return c}
function tf(a){var b=a,c=[];do c.push(b),b=b.Aa;while(b);if(512>=c.length)b=Ef(c);else{var d=c.length,e=0,b=xf(a.F);for(b.jb=a.jb+2;0<d;){a=768<=d?511:257<=d&&511>=d?d:257;var f=c.slice(e,e+a),h=Ef(f);h.C=b;b.g.length&&(b.b.push(f[0].b[0]),Df(b.g[b.g.length-1],h));b.g.push(h);e+=a;d-=a}}return b}m.get=function(a){var b=Ff(this,a);if(R(this)){var c=uf;this.F.Qa(this.b[b],a)&&(c=c.concat(this.B[b]));return c}b=this.F.Qa(this.b[b],a)?b+1:b;return this.g[b].get(a)};
m.Ma=function(a){var b=Ff(this,a);return this.F.Qa(this.b[b],a)?!0:R(this)?!1:this.g[b].Ma(a)};m.remove=function(a,b){Gf(this,a,-1,b);if(null==this.C){var c=this;1==this.g.length&&(c=this.g[0],c.C=null);return c}return this};function Hf(a){return R(a)?a.b[0]:Hf(a.g[0])}function If(a){a.b=[];for(var b=1;b<a.g.length;++b)a.b.push(Hf(a.g[b]))}
function Gf(a,b,c,d){var e=Ff(a,b),f=R(a);if(!f){var h=a.F.Qa(a.b[e],b)?e+1:e;if(Gf(a.g[h],b,h,d))If(a);else return!1}else if(!a.F.Qa(a.b[e],b))return!1;if(a.b.length>e&&a.F.Qa(a.b[e],b)){if(q(d)&&!a.F.Ia()&&f&&(h=a.B[e],d=kf(h,d,void 0),0>d?d=!1:(h.splice(d,1),d=!0),d&&a.F.Oa().remove(b,1),a.B[e].length))return!1;a.b.splice(e,1);f&&(f=a.F.Ia()?1:a.B[e].length,a.B.splice(e,1),a.F.Oa().remove(b,f))}if(256>a.b.length&&null!=a.C){a:{b=null;if(a.Aa&&256<a.Aa.b.length)b=a.Aa,e=d=0,f=a.b.length+1;else if(a.Ab&&
256<a.Ab.b.length)b=a.Ab,d=a.Ab.b.length-1,e=R(a)?d:d+1,f=0;else{b=!1;break a}a.b.splice(f,0,b.b[d]);b.b.splice(d,1);d=R(a)?a.B:a.g;h=null;R(a)?h=b.B:(h=b.g,h[e].C=a);d.splice(f,0,h[e]);h.splice(e,1);R(b)||(If(b),If(a));b=!0}b||Jf(a,c)}return!0}
function Jf(a,b){var c,d,e;a.Aa&&511>a.Aa.b.length?(c=a.Aa,e=d=0):a.Ab&&(c=a.Ab,d=c.b.length,e=R(c)?c.B.length:c.g.length);d=[d,0].concat(a.b);Array.prototype.splice.apply(c.b,d);d=null;R(a)?d=a.B:(d=a.g,d.forEach(function(a){a.C=c}));d=[e,0].concat(d);Array.prototype.splice.apply(R(c)?c.B:c.g,d);Df(a.Ab,a.Aa);R(c)||If(c);-1!=b&&(a.C.b.splice(b,1),a.C.g.splice(b,1))}
m.xb=function(a,b,c){var d=Ff(this,a);if(R(this)){if(this.F.Qa(this.b[d],a)){if(c)this.F.Oa().remove(a,this.F.Ia()?1:this.B[d].length),this.B[d]=this.F.Ia()?b:[b];else{if(this.F.Ia())throw new F(201);if(!nf(this.B[d],b))throw new F(109);}this.F.Oa().add(a,1);return this}this.b.splice(d,0,a);this.B.splice(d,0,this.F.Ia()?b:[b]);this.F.Oa().add(a,1);512==this.b.length?(d=xf(this.F),a=xf(this.F),a.jb=1,a.b=[this.b[256]],a.g=[this,d],a.C=this.C,this.C=a,d.b=this.b.splice(256),d.B=this.B.splice(256),d.C=
a,Df(d,this.Aa),Df(this,d),d=a):d=this;return d}d=this.F.Qa(this.b[d],a)?d+1:d;a=this.g[d].xb(a,b,c);R(a)||1!=a.b.length||(this.b.splice(d,0,a.b[0]),a.g[1].C=this,a.g[0].C=this,this.g.splice(d,1,a.g[1]),this.g.splice(d,0,a.g[0]));return 512==this.b.length?Kf(this):this};function Kf(a){var b=xf(a.F),c=xf(a.F);b.C=a.C;b.jb=a.jb+1;b.b=[a.b[256]];b.g=[a,c];a.b.splice(256,1);c.C=b;c.jb=a.jb;c.b=a.b.splice(256);c.g=a.g.splice(257);c.g.forEach(function(a){a.C=c});a.C=b;Df(c,a.Aa);Df(a,c);return b}
function Ff(a,b){for(var c=0,d=a.b.length;c<d;){var e=c+d>>1;a.F.Yd(a.b[e],b)?c=e+1:d=e}return c}function wf(a,b){if(!R(a)){var c=Ff(a,b);a.F.Qa(a.b[c],b)&&c++;return wf(a.g[c],b)}return a}
m.$a=function(a,b,c){function d(a){return a[0]?a[1]?0:1:-1}var e=this.F.rc(),f=0,h=this.b.length-1,k=this.b,n=d(e.sb(k[f],a)),A=d(e.sb(k[h],a));if(1!=n&&(-1!=n||-1!=A)){var O=function(a,b){var c=a+b>>1;return c==a?c+1:c},da=function(b,c,f){if(b>=c)return 0==f?c:-1;var h=d(e.sb(k[b],a));if(0==h)return b;if(1==h)return-1;h=O(b,c);if(h==c)return 0==f?c:-1;var n=d(e.sb(k[h],a));return 0==n?da(b,h,n):-1==n?da(h+1,c,f):da(b+1,h,n)},Ab=function(b,c){if(b>=c)return b;var f=d(e.sb(k[c],a));if(0==f)return c;
if(-1==f)return b;f=O(b,c);if(f==c)return b;var h=d(e.sb(k[f],a));return 0==h?Ab(f,c):1==h?Ab(b,f-1):-1};0!=n&&(f=da(f+1,h,A));-1!=f&&(h=Ab(f,h),-1!=h&&h>=f&&Lf(this,b,c,f,h+1))}};function Lf(a,b,c,d,e){for(;d<e&&(b.reverse||!(b.count>=b.X));++d)if(a.F.Ia())!b.reverse&&b.L?b.L--:c[b.count++]=a.B[d];else for(var f=0;f<a.B[d].length&&b.count<c.length;++f)!b.reverse&&b.L?b.L--:c[b.count++]=a.B[d][f]}
m.fill=function(a,b){if(R(this))for(var c=0;c<this.B.length&&0<a.count;++c)if(0<a.offset){if(a.offset-=this.F.Ia()?1:this.B[c].length,0>a.offset)for(var d=this.B[c].length+a.offset;d<this.B[c].length&&0<a.count;++d)b[a.qe++]=this.B[c][d],a.count--}else if(this.F.Ia())b[a.qe++]=this.B[c],a.count--;else for(d=0;d<this.B[c].length&&0<a.count;++d)b[a.qe++]=this.B[c][d],a.count--;else for(c=0;c<this.g.length&&0<a.count;++c)this.g[c].fill(a,b)};
function Af(a,b){for(var c=b.Oa(),d=a.map(function(a){var d=new Bf(a.id(),b);d.b=a.s[0];d.B=a.s[1];d.b.forEach(function(a,e){c.add(a,b.Ia()?1:d.B[e].length)});return d}),e=0;e<d.length-1;++e)Df(d[e],d[e+1]);return 1<d.length?tf(d[0]):d[0]};function Mf(a){this.compare=0==a?Nf:Of;this.$d=0==a?function(a){return null!=a?a.reverse():null}:function(a){return a||null};this.fe=0==a?Pf:Qf}t(Mf,Gc);function Of(a,b){return a>b?1:a<b?-1:0}function Nf(a,b){return Of(b,a)}function Qf(a,b){return wd(a,b)}function Pf(a,b){return wd(b,a)}m=Mf.prototype;m.sb=function(a,b){var c=this.$d(b),d=[c.c==G,c.A==G];if(!d[0]){var e=this.compare(a,c.c);d[0]=c.da?1==e:-1!=e}d[1]||(e=this.compare(a,c.A),d[1]=c.ma?-1==e:1!=e);return d};
m.compare=function(a,b){return this.compare(a,b)};m.min=function(a,b){return a<b?1:a==b?0:-1};m.max=function(a,b){return a>b?1:a==b?0:-1};m.Td=function(a,b){var c=this.sb(a,b);return c[0]&&c[1]};m.qf=function(a){return a.filter(function(a){return null!==a}).sort(function(a,c){return this.fe(a,c)}.bind(this))};m.Ud=function(a){return this.$d(a).c==G};m.td=function(a){a=this.$d(a);return[a.c,a.A]};m.toString=function(){return this.compare==Nf?"SimpleComparator_DESC":"SimpleComparator_ASC"};function Rf(a){this.La=a.map(function(a){return new Mf(a)})}t(Rf,Gc);function Sf(a,b,c,d){for(var e=0,f=0;f<a.La.length&&0==e;++f)e=d(a.La[f],b[f],c[f]);return e}m=Rf.prototype;m.compare=function(a,b){return Sf(this,a,b,function(a,b,e){return b==G||e==G?0:a.compare(b,e)})};m.min=function(a,b){return Sf(this,a,b,function(a,b,e){return a.min(b,e)})};m.max=function(a,b){return Sf(this,a,b,function(a,b,e){return a.max(b,e)})};
m.sb=function(a,b){for(var c=[!0,!0],d=0;d<this.La.length&&(c[0]||c[1]);++d){var e=this.La[d].sb(a[d],b[d]);c[0]=c[0]&&e[0];c[1]=c[1]&&e[1]}return c};m.Td=function(a,b){for(var c=!0,d=0;d<this.La.length&&c;++d)c=this.La[d].Td(a[d],b[d]);return c};
m.qf=function(a){var b=a.filter(function(a){return a.every(ga)});a=Array(this.La.length);for(var c=0;c<a.length;c++)a[c]=b.map(function(a){return a[c]});a.forEach(function(a,b){a.sort(function(a,c){return this.La[b].fe(a,c)}.bind(this))},this);b=Array(b.length);for(c=0;c<b.length;c++)b[c]=a.map(function(a){return a[c]});return b.sort(function(a,b){for(var c=0,h=0;h<this.La.length&&0==c;++h)c=this.La[h].fe(a[h],b[h]);return c}.bind(this))};m.Ud=function(a){return this.La[0].Ud(a[0])};
m.td=function(a){var b=a.map(function(a,b){return this.La[b].td(a)[0]},this);a=a.map(function(a,b){return this.La[b].td(a)[1]},this);return[b,a]};function Tf(a){if(1==a.f.length)return new Mf(a.f[0].lb);a=a.f.map(function(a){return a.lb});return new Rf(a)};function Uf(a){this.fa=a;this.kb=D();this.Qc=new pf;this.pb=new pf}m=Uf.prototype;m.getName=function(){return this.fa.getName()};m.add=function(a,b){null===a?(this.kb.add(b),this.Qc.add(a,1)):this.fa.add(a,b)};m.set=function(a,b){null===a?(this.kb.clear(),this.Qc.clear(),this.add(a,b)):this.fa.set(a,b)};m.remove=function(a,b){null===a?b?(this.kb.delete(b),this.Qc.remove(a,1)):(this.kb.clear(),this.Qc.clear()):this.fa.remove(a,b)};m.get=function(a){return null===a?E(this.kb):this.fa.get(a)};m.bd=function(a){return this.fa.bd(a)};
m.Oa=function(){qf(this.pb,[this.fa.Oa(),this.Qc]);return this.pb};m.$a=function(a,b,c,d){b=this.fa.$a(a,b,c,d);return null!=a?b:b.concat(E(this.kb))};m.clear=function(){this.kb.clear();this.fa.clear()};m.Ma=function(a){return null===a?0!=this.kb.size:this.fa.Ma(a)};m.min=function(){return this.fa.min()};m.max=function(){return this.fa.max()};m.Fa=function(){return[new y(-2,E(this.kb))].concat(this.fa.Fa())};m.rc=function(){return this.fa.rc()};
function Vf(a,b){for(var c=-1,d=0;d<b.length;++d)if(-2==b[d].id()){c=d;break}if(-1==c)throw new F(102);var d=b[c].s,e=b.slice(0);e.splice(c,1);var c=a(e),f=new Uf(c);d.forEach(function(a){f.kb.add(a)});return f}m.Ia=function(){return this.fa.Ia()};function Wf(a){this.w=a;this.ob=D();this.V=new Mf(1)}m=Wf.prototype;m.getName=g("w");m.add=function(a){if("number"!=typeof a)throw new F(103);this.ob.add(a)};m.set=function(a,b){this.add(a,b)};m.remove=function(a){this.ob.delete(a)};m.get=function(a){return this.Ma(a)?[a]:[]};m.min=function(){return this.Ic(this.V.min.bind(this.V))};m.max=function(){return this.Ic(this.V.max.bind(this.V))};
m.Ic=function(a){if(0==this.ob.size)return null;var b=E(this.ob).reduce(function(b,d){return null===b||1==a(d,b)?d:b},null);return[b,[b]]};m.bd=function(){return this.ob.size};m.$a=function(a,b,c,d){var e=a||[ud()];a=E(this.ob).filter(function(a){return e.some(function(b){return this.V.Td(a,b)},this)},this);return of(a,b,c,d)};m.clear=function(){this.ob.clear()};m.Ma=function(a){return this.ob.has(a)};m.Fa=function(){return[new y(0,E(this.ob))]};m.rc=g("V");
function Xf(a,b){var c=new Wf(a);b[0].s.forEach(function(a){c.add(a,a)});return c}m.Ia=l(!0);m.Oa=function(){var a=new pf;a.oa=this.ob.size;return a};function Zf(a){this.Ka=a.j(kc);this.D=a.j(mc);this.U=a.j(lc)}Zf.prototype.Ga=function(a){var b=a.ra(),c=function(){if(0==b.length)return w();var a=b.shift();return(a.zb()?$f(this,a):ag(this,a)).then(c)}.bind(this);return c()};function ag(a,b){var c=a.Ka.Cb(0,[b]),d=c.H(b.getName(),b.Db.bind(b)).get([]).then(function(a){this.U.Vb(b.getName(),a);bg(this,b,a)}.bind(a));c.ia();return d}
function bg(a,b,c){var d=a.D.kc.get(b.getName())||[];c.forEach(function(a){d.forEach(function(b){var c=a.Fb(b.getName());b.add(c,a.id())})})}function $f(a,b){var c=a.Ka.Cb(0,[b]),d=c.H(b.getName(),b.Db).get([]).then(function(a){this.U.Vb(b.getName(),a)}.bind(a)),e=b.ya().map(function(a){return cg(this,a,c)},a).concat(dg(a,b,c));c.ia();return eb(e.concat(d))}
function cg(a,b,c){c=c.H(b.m(),rb,1);var d=Tf(b);return c.get([]).then(function(a){if(1<a.length){if(eg(b)){var c=zf.bind(void 0,d,b.m(),b.Gc);a=Vf(c,a.slice(1))}else a=zf(d,b.m(),b.Gc,a.slice(1));this.D.set(b.Rc,a)}}.bind(a))}function dg(a,b,c){return c.H(Se(b),rb,1).get([]).then(function(a){1<a.length&&(a=Xf(Se(b),a.slice(1)),this.D.set(b.getName(),a))}.bind(a))};function fg(){this.aa=B();this.kc=B()}fg.prototype.Ga=function(a){a.ra().forEach(function(a){var c=[];this.kc.set(a.getName(),c);var d=Se(a);if(null===this.get(d)){var e=new Wf(d);c.push(e);this.aa.set(d,e)}a.ya().forEach(function(a){var b;b=Tf(a);b=new rf(a.m(),b,a.Gc);b=eg(a)?new Uf(b):b;c.push(b);this.aa.set(a.m(),b)},this)},this);return w()};fg.prototype.get=function(a){return this.aa.get(a)||null};
fg.prototype.set=function(a,b){var c=this.kc.get(a)||null;null===c&&(c=[],this.kc.set(a,c));for(var d=null,e=0;e<c.length;e++)if(c[e].getName()==b.getName()){d=e;break}null!==d&&0<c.length?c.splice(d,1,b):c.push(b);this.aa.set(b.getName(),b)};function gg(a){this.jc=[];q(a)&&this.add(a)}gg.prototype.toString=function(){return this.jc.map(function(a){return a.toString()}).join(",")};gg.prototype.Ma=function(a){return this.jc.some(function(b){return b.contains(a)})};gg.prototype.za=g("jc");
gg.prototype.add=function(a){if(0!=a.length)if(a=this.jc.concat(a),1==a.length)this.jc=a;else{a.sort(wd);for(var b=[],c=a[0],d=1;d<a.length;++d)if(sd(c,a[d])){var e=a[d],f=ud();if(c.c!=G&&e.c!=G){var h=td(c.c,e.c,!0);1!=h?(f.c=c.c,f.da=0!=h?c.da:c.da&&e.da):(f.c=e.c,f.da=e.da)}c.A!=G&&e.A!=G&&(h=td(c.A,e.A,!1),-1!=h?(f.A=c.A,f.ma=0!=h?c.ma:c.ma&&e.ma):(f.A=e.A,f.ma=e.ma));c=f}else b.push(c),c=a[d];b.push(c);this.jc=b}};
function hg(a,b){var c=[];a.za().map(function(a){return b.za().map(function(b){var c;if(sd(a,b)){c=ud();var h=td(a.c,b.c,!0),h=0==h?a.da?a:b:-1!=h?a:b;c.c=h.c;c.da=h.da;a.A==G||b.A==G?b=a.A==G?b:a:(h=td(a.A,b.A,!1),b=0==h?a.ma?a:b:-1==h?a:b);c.A=b.A;c.ma=b.ma}else c=null;return c})}).forEach(function(a){c=c.concat(a)});return new gg(c.filter(function(a){return null!==a}))};function ig(a,b){var c=[],d=null,e=null;Yd(a,function(a){var h=b(a);null==a.getParent()?e=h:Vd(d,h);var k=a.getParent();null!==k&&M(k).length==M(d).length&&(k=c.indexOf(d),-1!=k&&c.splice(k,1));1<M(a).length&&c.push(h);d=null===a.g?c[c.length-1]:h});return e}function jg(a){return kg(a,function(a){return null===a.g})}
function lg(a){var b=a.getParent(),c=0;null!==b&&(c=M(b).indexOf(a),b.removeChild(a));var d=M(a).slice();d.forEach(function(d,f){a.removeChild(d);null===b||Ud(b,d,c+f)});return{parent:b,children:d}}function mg(a,b){M(a).slice().forEach(function(c){a.removeChild(c);Vd(b,c)});Vd(a,b)}function ng(a){var b=Td(a,0);lg(a);mg(b,a);return b}
function og(a,b,c){var d=Td(a,0),e=M(d).slice();if(!e.some(function(a){return b(a)}))return a;lg(a);e.forEach(function(e,h){if(b(e)){var k=c(a);Wd(d,h);Vd(k,e);Ud(d,k,h)}});return d}function pg(a,b,c,d){var e=a.getParent();null!==e&&(a=M(e).indexOf(a),Wd(e,a),Ud(e,c,a));M(b).slice().forEach(function(a){b.removeChild(a);Vd(d,a)});return c}function kg(a,b,c){function d(a){b(a)&&e.push(a);null!=c&&c(a)||M(a).forEach(d)}var e=[];d(a);return e}
function qg(a,b){var c=b||function(a){return a.toString()+"\n"},d="";Yd(a,function(a){for(var b=0;b<Sd(a);b++)d+="-";d+=c(a)});return d};function rg(a){Zd.call(this);this.Rb=a;this.ab=!1}t(rg,Zd);m=rg.prototype;m.Kb=function(){return ig(this,function(a){if(a instanceof rg){var b=new rg(a.Rb);b.ab=a.ab;a=a.W();b.pa=a;return b}return a.Kb()})};m.hb=function(a){var b=a||[];Yd(this,function(a){a!=this&&a.hb(b)}.bind(this));a=D(b);return E(a)};m.vd=function(a){this.ab!=a&&(this.ab=a,this.Rb="and"==this.Rb?"or":"and",M(this).forEach(function(b){return b.vd(a)}))};
m.eval=function(a){var b=M(this).map(function(b){return b.eval(a)});return sg(this,b)};function sg(a,b){return"and"==a.Rb?Cd(b):Dd(b)}m.toString=function(){return"combined_pred_"+this.Rb.toString()};function tg(a,b,c){Zd.call(this);this.ga=a;this.la=b;this.G=c;this.ae=null;a=Kd.Bc();this.vc=Qd(a,this.ga.I(),this.G);this.dg=a.Ue.get(this.ga.I())||null}t(tg,Zd);m=tg.prototype;m.Kb=function(){var a=new tg(this.ga,this.la,this.G),b=this.W();a.pa=b;return a};m.hb=function(a){return null!=a?(a.push(this.ga),a.push(this.la),a):[this.ga,this.la]};
m.reverse=function(){var a=this.G;switch(this.G){case "gt":a="lt";break;case "lt":a="gt";break;case "gte":a="lte";break;case "lte":a="gte"}return new tg(this.la,this.ga,a)};m.eval=function(a){var b=a.entries.filter(function(a){var b=J(a,this.ga);a=J(a,this.la);return this.vc(b,a)},this);return new H(b,I(a))};m.toString=function(){return"join_pred("+this.ga.m()+" "+this.G+" "+this.la.m()+")"};
function ug(a,b,c){var d=null,e=null;-1!=I(b).indexOf(K(a.ga.H()))?(d=b,e=c):(d=c,e=b);if(d.entries.length>e.entries.length){a:{b=a.ga;a.ga=a.la;a.la=b;b=a.G;switch(a.G){case "gt":b="lt";break;case "lt":b="gt";break;case "gte":b="lte";break;case "lte":b="gte";break;default:break a}a.G=b;a.vc=Qd(Kd.Bc(),a.ga.I(),a.G)}return[e,d]}return[d,e]}function vg(a){var b={};a.hb().forEach(function(a){b[a.getName()]=null});return b}
function wg(a,b,c){null===a.ae&&(a.ae=vg(a.la.H()));var d=new Fd(new y(-1,a.ae),!1);return Id(b,c,d,[K(a.la.H())])}
function xg(a,b,c,d){var e=[b,c];d||(e=ug(a,b,c));b=e[0];c=e[1];var e=b,f=c,h=a.ga,k=a.la;d&&(e=c,f=b,h=a.la,k=a.ga);var n=new Tc,A=[];e.entries.forEach(function(a){var b=String(J(a,h));n.set(b,a)});var O=I(e),da=I(f);f.entries.forEach(function(a){var b=J(a,k),c=String(b);null!==b&&n.has(c)?n.get(c).forEach(function(b){b=Id(a,da,b,O);A.push(b)}):d&&A.push(wg(this,a,da))}.bind(a));a=I(b).concat(I(c));return new H(A,a)}
function yg(a,b,c,d,e){function f(a,b){var c=new Fd(b,1<O.length),c=Id(a,da,c,O);A.push(c)}var h=d.Wf.H(),k=b,n=c;-1!=I(b).indexOf(K(h))&&(k=c,n=b);var A=[],O=I(n),da=I(k);k.entries.forEach(function(a){var b=this.dg(J(a,d.lg)),b=d.index.get(b);0!=b.length&&(d.index.Ia()?f(a,e.get(b[0])):jf(e,b).forEach(f.bind(null,a)))},a);a=I(k).concat(I(n));return new H(A,a)};function zg(a,b,c){return null===b?new ae(a,b,c):q(b.m)?new tg(a,b,c):new ae(a,b,c)};var Ag={};r("lf.schema.DataStoreType",Ag);Ag.INDEXED_DB=0;Ag.MEMORY=1;Ag.LOCAL_STORAGE=2;Ag.FIREBASE=3;Ag.WEB_SQL=4;Ag.OBSERVABLE_STORE=5;function Bg(a,b,c,d){this.Rc=a;this.name=b;this.Gc=c;this.f=d}Bg.prototype.m=function(){return this.Rc+"."+this.name};function eg(a){return a.f.some(function(a){return a.ca.Fc()})}function S(a,b,c,d){this.w=a;this.ka=c;this.K=b;this.qd=d;this.eb=null}r("lf.schema.Table",S);S.prototype.getName=g("w");S.prototype.getName=S.prototype.getName;S.prototype.Za=g("eb");
function K(a){return a.eb||a.w}S.prototype.pc=function(a){var b=new this.constructor(this.w);b.eb=a;b.xg=this.xg;return b};S.prototype.as=S.prototype.pc;S.prototype.createRow=S.prototype.tb;S.prototype.deserializeRow=S.prototype.Db;S.prototype.ya=g("ka");S.prototype.getIndices=S.prototype.ya;S.prototype.hb=g("K");S.prototype.getColumns=S.prototype.hb;S.prototype.getConstraint=S.prototype.Eb;S.prototype.zb=g("qd");S.prototype.persistentIndex=S.prototype.zb;function Se(a){return a.w+".#"};function T(a,b){this.child=a;this.Jb=b;this.eb=null}m=T.prototype;m.getName=function(){return this.Jb+"("+this.child.getName()+")"};m.m=function(){return this.Jb+"("+this.child.m()+")"};m.H=function(){return this.child.H()};m.toString=function(){return this.m()};m.I=function(){return this.child.I()};m.Za=g("eb");m.ya=function(){return[]};m.xa=l(null);m.Fc=l(!1);m.pc=function(a){this.eb=a;return this};T.prototype.as=T.prototype.pc;
function Cg(a){for(var b=[a];a instanceof T;)b.push(a.child),a=a.child;return b}function Dg(a){this.eb=a||null;this.S=new S("#UnknownTable",[],[],!1)}m=Dg.prototype;m.getName=l("*");m.m=function(){return this.getName()};m.toString=function(){return this.m()};m.H=g("S");m.I=l(4);m.Za=g("eb");m.ya=function(){return[]};m.xa=l(null);m.Fc=l(!1);r("lf.fn.avg",function(a){return new T(a,"AVG")});function Eg(a){return new T(a||new Dg,"COUNT")}r("lf.fn.count",Eg);function Fg(a){return new T(a,"DISTINCT")}r("lf.fn.distinct",Fg);r("lf.fn.max",function(a){return new T(a,"MAX")});r("lf.fn.min",function(a){return new T(a,"MIN")});r("lf.fn.stddev",function(a){return new T(a,"STDDEV")});r("lf.fn.sum",function(a){return new T(a,"SUM")});r("lf.fn.geomean",function(a){return new T(a,"GEOMEAN")});function U(a,b){L.call(this);this.Of=b}t(U,L);U.prototype.exec=function(a,b){switch(this.Of){case 1:return Gg(this,a,b);case 0:return Hg(this,a,b);default:return Ig(this,a,b)}};U.prototype.toString=l("dummy_node");U.prototype.Sc=function(){return this.toString()};function Ig(a,b,c){return new v(function(a){a(this.ea([],b,c))}.bind(a))}function Gg(a,b,c){return Td(a,0).exec(b,c).then(function(a){return this.ea(a,b,c)}.bind(a))}
function Hg(a,b,c){var d=M(a).map(function(a){return a.exec(b,c)});return eb(d).then(function(a){var d=[];a.forEach(function(a){for(var b=0;b<a.length;++b)d.push(a[b])});return this.ea(d,b,c)}.bind(a))};function Jg(a){U.call(this,0,1);this.Ae=a}t(Jg,U);Jg.prototype.toString=function(){return"aggregation("+this.Ae.map(function(a){return a.m()}).toString()+")"};Jg.prototype.ea=function(a){a.forEach(function(a){Kg(new Lg(a,this.Ae))},this);return a};function Lg(a,b){this.Ja=a;this.K=b}
function Kg(a){a.K.forEach(function(a){a=Cg(a).reverse();for(var c=1;c<a.length;c++){var d=a[c],e=Cg(d).slice(-1)[0],f=d.child instanceof T?zd(this.Ja,d.child):this.Ja;if(null!==f.Ya&&f.Ya.has(d.m()))break;f=Mg(d.Jb,f,e);e=this.Ja;null===e.Ya&&(e.Ya=B());e.Ya.set(d.m(),f)}},a)}
function Mg(a,b,c){var d=null;switch(a){case "MIN":d=Ng(b,c,function(a,b){return b<a?b:a});break;case "MAX":d=Ng(b,c,function(a,b){return b>a?b:a});break;case "DISTINCT":d=Og(b,c);break;case "COUNT":d=Pg(b,c);break;case "SUM":d=Qg(b,c);break;case "AVG":a=Pg(b,c);0<a&&(d=Qg(b,c)/a);break;case "GEOMEAN":d=Rg(b,c);break;default:d=Sg(b,c)}return d}function Ng(a,b,c){return a.entries.reduce(function(a,e){var f=J(e,b);return null===f?a:null===a?f:c(a,f)},null)}
function Pg(a,b){return b instanceof Dg?a.entries.length:a.entries.reduce(function(a,d){return a+(fa(J(d,b))?0:1)},0)}function Qg(a,b){return Ng(a,b,function(a,b){return b+a})}function Sg(a,b){var c=[];a.entries.forEach(function(a){a=J(a,b);null===a||c.push(a)});return 0==c.length?null:Bb.apply(null,c)}function Rg(a,b){var c=0,d=a.entries.reduce(function(a,d){var h=J(d,b);if(0==h||null===h)return a;c++;return a+Math.log(h)},0);return 0==c?null:Math.pow(Math.E,d/c)}
function Og(a,b){var c=B();a.entries.forEach(function(a){var e=J(a,b);c.set(e,a)});return new H(C(c),I(a))};function Tg(a,b){this.Da=a;this.$=b}Tg.prototype.ib=g("Da");Tg.prototype.ba=g("$");function Ug(){L.call(this)}t(Ug,L);function Vg(a,b){L.call(this);this.table=a;this.values=b}t(Vg,Ug);function Wg(a,b){Vg.call(this,a,b)}t(Wg,Vg);function Xg(a){L.call(this);this.table=a}t(Xg,Ug);Xg.prototype.toString=function(){return"delete("+this.table.getName()+")"};function Yg(a,b){L.call(this);this.table=a;this.ve=b}t(Yg,Ug);
Yg.prototype.toString=function(){var a=[];this.ve&&(a=this.ve.map(function(a){return a.O.getName()},this));return"update("+this.table.getName()+", ["+a.join(",")+"])"};function Zg(a){L.call(this);this.J=a}t(Zg,Ug);Zg.prototype.toString=function(){return"select("+this.J.toString()+")"};function $g(a){L.call(this);this.table=a}t($g,Ug);$g.prototype.toString=function(){var a="table_access("+this.table.getName();null===this.table.Za()||(a+=" as "+this.table.Za());return a+")"};
function ah(){L.call(this)}t(ah,Ug);ah.prototype.toString=l("cross_product");function bh(a,b){L.call(this);this.f=a;this.Nb=b}t(bh,Ug);bh.prototype.toString=function(){var a="project("+this.f.toString();if(null!==this.Nb)var b=this.Nb.map(function(a){return a.m()}).join(", "),a=a+(", groupBy("+b+")");return a+")"};function ch(a){L.call(this);this.N=a}t(ch,Ug);ch.prototype.toString=function(){return"order_by("+je(this.N)+")"};function dh(a){L.call(this);this.f=a}t(dh,Ug);
dh.prototype.toString=function(){return"aggregation("+this.f.toString()+")"};function eh(a){L.call(this);this.f=a}t(eh,Ug);eh.prototype.toString=function(){return"group_by("+this.f.toString()+")"};function fh(a){L.call(this);this.X=a}t(fh,Ug);fh.prototype.toString=function(){return"limit("+this.X+")"};function gh(a){L.call(this);this.L=a}t(gh,Ug);gh.prototype.toString=function(){return"skip("+this.L+")"};function hh(a,b){L.call(this);this.J=a;this.Pb=b}t(hh,Ug);
hh.prototype.toString=function(){return"join(type: "+(this.Pb?"outer":"inner")+", "+this.J.toString()+")"};function ih(){};function jh(){}t(jh,ih);jh.prototype.nb=function(a){this.Z=a;this.Wa(this.Z);return this.Z};jh.prototype.Wa=function(a){if(a instanceof Zg){var b=kh(this,a.J),b=lh(this,b);pg(a,a,b[0],b[1]);a==this.Z&&(this.Z=b[0]);a=b[0]}M(a).forEach(function(a){this.Wa(a)},this)};function kh(a,b){if(0==M(b).length||"and"!=b.Rb)return[b];var c=M(b).slice().map(function(a){b.removeChild(a);return kh(this,a)},a);return Fa(c)}
function lh(a,b){var c=null,d=null;b.map(function(a,b){var h=new Zg(a);0==b?c=h:Vd(d,h);d=h},a);return[c,d]};function mh(){}t(mh,ih);mh.prototype.nb=function(a,b){if(3>b.c.length)return a;this.Z=a;this.Wa(this.Z);return this.Z};mh.prototype.Wa=function(a){if(a instanceof ah)for(;2<M(a).length;){for(var b=new ah,c=0;2>c;c++){var d=Wd(a,0);Vd(b,d)}Ud(a,b,0)}M(a).forEach(function(a){this.Wa(a)},this)};function nh(){U.call(this,0,0)}t(nh,U);nh.prototype.toString=l("cross_product");nh.prototype.ea=function(a){var b=a[0],c=a[1];a=[];for(var d=I(b),e=I(c),f=0;f<b.entries.length;f++)for(var h=0;h<c.entries.length;h++){var k=Id(b.entries[f],d,c.entries[h],e);a.push(k)}b=I(b).concat(I(c));return[new H(a,b)]};function oh(a,b){me.call(this,a,b);this.Ea=a.j(oc);this.Gb=a.j(pc)}t(oh,me);oh.prototype.getPriority=l(2);oh.prototype.de=function(a){0==this.I()?ph(this,a):this.Pc()};function ph(a,b){a.sd.forEach(function(a,d){a instanceof ie&&pe(this.Gb,a,b[d])},a)}oh.prototype.Pc=function(){var a=re(this.Gb,this.ba());0!=a.length&&(a=new oe(this.global,a),se(this.Ea,a))};function qh(a){de.call(this,a)}t(qh,de);qh.prototype.ba=function(){var a=D();a.add(this.c);rh(this,this.c.getName(),a);return a};function rh(a,b,c){var d=sh(a.ca.info(),b,1);sh(a.ca.info(),b).forEach(c.add.bind(c));d.forEach(function(a){rh(this,a.getName(),c)},a)}qh.prototype.clone=function(){var a=new qh(this.ca);ge(a,this);a.c=this.c;return a};qh.prototype.bind=function(a){qh.Ib.bind.call(this,a);he(this,a);return this};function th(a){de.call(this,a)}t(th,de);th.prototype.ba=function(){var a=D();a.add(this.Ha);var b=this.ca.info();uh(this.Ha.getName(),b.bf).forEach(a.add.bind(a));this.$b&&sh(b,this.Ha.getName()).forEach(a.add.bind(a));return a};th.prototype.clone=function(){var a=new th(this.ca);ge(a,this);a.Ha=this.Ha;this.values&&(a.values=this.values instanceof Jd?this.values:this.values.slice());a.$b=this.$b;a.ac=this.ac;return a};
th.prototype.bind=function(a){th.Ib.bind.call(this,a);this.ac&&(this.values=this.ac instanceof Jd?a[this.ac.xa()]:this.ac.map(function(b){return b instanceof Jd?a[b.xa()]:b}));return this};function vh(a){de.call(this,a)}t(vh,de);vh.prototype.ba=function(){var a=D();a.add(this.table);var b=this.set.map(function(a){return a.O.m()}),c=this.ca.info();wh(c,b).forEach(a.add.bind(a));xh(c,b).forEach(a.add.bind(a));return a};vh.prototype.clone=function(){var a=new vh(this.ca);ge(a,this);a.table=this.table;a.set=this.set?this.set.slice():this.set;return a};vh.prototype.bind=function(a){vh.Ib.bind.call(this,a);this.set.forEach(function(b){-1!=b.Xc&&(b.value=a[b.Xc])});he(this,a);return this};function yh(a,b){if(null==b)return"NULL";switch(a){case 1:return b?1:0;case 3:case 4:return b;case 0:return"'"+tb(b)+"'";default:return"'"+b.toString()+"'"}}function zh(a,b){var c=a.$b?"INSERT OR REPLACE":"INSERT",d=a.Ha.hb(),c=c+(" INTO "+a.Ha.getName()+"("),c=c+d.map(function(a){return a.getName()}).join(", "),c=c+") VALUES (";return a.values.map(function(a){var f=d.map(function(c){var d=a.s[c.getName()];return b?null!=d?"#":"NULL":yh(c.I(),d)});return c+f.join(", ")+");"}).join("\n")}
function Ah(a){switch(a){case "between":return"BETWEEN";case "eq":return"=";case "gte":return">=";case "gt":return">";case "in":return"IN";case "lte":return"<=";case "lt":return"<";case "match":return"LIKE";case "neq":return"<>";default:return"UNKNOWN"}}function Bh(a,b,c,d){return a instanceof Jd?"?"+a.xa().toString():d?null!=a?"#":"NULL":"match"==b?"'"+a.toString()+"'":"in"==b?"("+a.map(function(a){return yh(c,a)}).join(", ")+")":"between"==b?yh(c,a[0])+" AND "+yh(c,a[1]):yh(c,a).toString()}
function Ch(a,b){return M(a).map(function(a){return"("+Dh(a,b)+")"}).join("and"==a.Rb?" AND ":" OR ")}function Eh(a){return[a.ga.m(),Ah(a.G),a.la.m()].join(" ")}function Dh(a,b){if(a instanceof ae){var c=a.O.m(),d=Ah(a.G),e=Bh(a.value,a.G,a.O.I(),b);return"="==d&&"NULL"==e?[c,"IS NULL"].join(" "):"<>"==d&&"NULL"==e?[c,"IS NOT NULL"].join(" "):[c,d,e].join(" ")}if(a instanceof rg)return Ch(a,b);if(a instanceof tg)return Eh(a);throw new F(357,typeof a);}
function Fh(a,b){var c=Dh(a,b);return c?" WHERE "+c:""}function Gh(a,b){var c="UPDATE "+a.table.getName()+" SET ",c=c+a.set.map(function(a){var b=a.O.m()+" = ";return-1!=a.Xc?b+"?"+a.Xc.toString():b+yh(a.O.I(),a.value).toString()}).join(", ");a.u&&(c+=Fh(a.u,b));return c+";"}
function Hh(a,b){var c="*";a.f.length&&(c=a.f.map(function(a){return a.Za()?a.m()+" AS "+a.Za():a.m()}).join(", "));c="SELECT "+c+" FROM ";null!=a.yb&&0!=a.yb.size?c+=Ih(a,b):(c+=a.c.map(Jh).join(", "),a.u&&(c+=Fh(a.u,b)));if(a.N)var d=a.N.map(function(a){return a.O.m()+(0==a.lb?" DESC":" ASC")}).join(", "),c=c+(" ORDER BY "+d);a.ja&&(d=a.ja.map(function(a){return a.m()}).join(", "),c+=" GROUP BY "+d);a.X&&(c+=" LIMIT "+a.X.toString());a.L&&(c+=" SKIP "+a.L.toString());return c+";"}
function Jh(a){return K(a)!=a.getName()?a.getName()+" AS "+K(a):a.getName()}function Ih(a,b){for(var c=kg(a.u,function(a){return a instanceof tg}),d=c.map(Eh),e=Jh(a.c[0]),f=1;f<a.c.length;f++)var h=Jh(a.c[f]),e=a.yb.has(c[d.length-f].W())?e+(" LEFT OUTER JOIN "+h):e+(" INNER JOIN "+h),e=e+(" ON ("+d[d.length-f]+")");c=Td(a.u,0);c instanceof tg||(e+=" WHERE "+Dh(c,b));return e}
function Kh(a,b){var c=b||!1,d=a.a.clone();if(d instanceof th)return zh(d,c);if(d instanceof qh){var e="DELETE FROM "+d.c.getName();d.u&&(e+=Fh(d.u,c));return e+";"}if(d instanceof vh)return Gh(d,c);if(d instanceof ie)return Hh(d,c);throw new F(358,typeof d);};function V(a,b){this.global=a;this.wg=a.j(nc);this.Ea=a.j(oc);this.a=b}r("lf.query.BaseBuilder",V);V.prototype.exec=function(){try{this.fb()}catch(a){return bb(a)}return new v(function(a,b){var c=new oh(this.global,[this.Dc()]);se(this.Ea,c).then(function(b){a(xd(b[0]))},b)},this)};V.prototype.exec=V.prototype.exec;V.prototype.Qf=function(){var a=function(a){return a.Sc(this.a)+"\n"}.bind(this);return qg(Lh(this).ib(),a)};V.prototype.explain=V.prototype.Qf;
V.prototype.bind=function(a){this.a.bind(a);return this};V.prototype.bind=V.prototype.bind;V.prototype.Dg=function(a){return Kh(this,a)};V.prototype.toSql=V.prototype.Dg;V.prototype.fb=aa();function Lh(a){if(null==a.cf){var b;b=a.wg;var c=a.a,d=b.gg.create(c);b=b.tg.create(d,c);a.cf=b}return a.cf}V.prototype.Dc=function(){return{context:this.a.clone(),ge:Lh(this)}};function Mh(a){V.call(this,a,new qh(a.j(qc)))}t(Mh,V);r("lf.query.DeleteBuilder",Mh);Mh.prototype.c=function(a){if(null!=this.a.c)throw new F(515);this.a.c=a;return this};Mh.prototype.from=Mh.prototype.c;Mh.prototype.u=function(a){this.Cd();this.a.u=a;return this};Mh.prototype.where=Mh.prototype.u;Mh.prototype.Cd=function(){if(null==this.a.c)throw new F(548);if(null!=this.a.u)throw new F(516);};Mh.prototype.fb=function(){Mh.Ib.fb.call(this);if(null==this.a.c)throw new F(517);};function Nh(a,b){V.call(this,a,new th(a.j(qc)));this.a.$b=b||!1}t(Nh,V);r("lf.query.InsertBuilder",Nh);Nh.prototype.fb=function(){Nh.Ib.fb.call(this);var a=this.a;if(null==a.Ha||null==a.values)throw new F(518);if(a.$b&&null===a.Ha.Eb().fd())throw new F(519);};Nh.prototype.Ha=function(a){if(null!=this.a.Ha)throw new F(520);this.a.Ha=a;return this};Nh.prototype.into=Nh.prototype.Ha;
Nh.prototype.values=function(a){if(null!=this.a.values)throw new F(521);a instanceof Jd||a.some(function(a){return a instanceof Jd})?this.a.ac=a:this.a.values=a;return this};Nh.prototype.values=Nh.prototype.values;function Oh(a){return Ph("and",Array.prototype.slice.call(arguments))}r("lf.op.and",Oh);r("lf.op.or",function(a){return Ph("or",Array.prototype.slice.call(arguments))});function Ph(a,b){var c=new rg(a);b.forEach(function(a){Vd(c,a)});return c}r("lf.op.not",function(a){a.vd(!0);return a});function W(a,b){V.call(this,a,new ie(a.j(qc)));this.Ke=this.xd=!1;this.a.f=b;Qh(this);Rh(this)}t(W,V);r("lf.query.SelectBuilder",W);W.prototype.fb=function(){W.Ib.fb.call(this);var a=this.a;if(null==a.c)throw new F(522);if(q(a.Qb)&&!q(a.X)||q(a.Yb)&&!q(a.L))throw new F(523);null!=this.a.ja?Sh(this):Th(this)};function Qh(a){var b=a.a.f.filter(function(a){return a instanceof T&&"DISTINCT"==a.Jb},a);if(0!=b.length&&(1!=b.length||1!=a.a.f.length))throw new F(524);}
function Sh(a){var b=a.a.f.filter(function(a){return!(a instanceof T)}).map(function(a){return a.m()}),c=!1;if(0==a.a.ja.length||0==a.a.f.length)c=!0;else{var d=a.a.ja.map(function(a){return a.m()});(c=b.some(function(a){return-1==d.indexOf(a)}))||(c=a.a.ja.some(function(a){a=a.I();return 6==a||0==a}))}if(c)throw new F(525);}function Th(a){var b=a.a.f.some(function(a){return a instanceof T},a);a=a.a.f.some(function(a){return!(a instanceof T)},a)||0==a.a.f.length;if(b&&a)throw new F(526);}
function Rh(a){a.a.f.forEach(function(a){if(a instanceof T&&!Uh(a.Jb,a.I()))throw new F(527,a.m());},a)}function Vh(a,b){if(null==a.a.c)throw new F(b);}W.prototype.c=function(a){if(this.Ke)throw new F(515);this.Ke=!0;null==this.a.c&&(this.a.c=[]);this.a.c.push.apply(this.a.c,Array.prototype.slice.call(arguments));return this};W.prototype.from=W.prototype.c;W.prototype.u=function(a){Vh(this,548);if(this.xd)throw new F(516);this.xd=!0;Wh(this,a);return this};W.prototype.where=W.prototype.u;
function Wh(a,b){if(null!=a.a.u){var c=Oh(b,a.a.u);a.a.u=c}else a.a.u=b}W.prototype.$f=function(a,b){Vh(this,542);if(this.xd)throw new F(547);this.a.c.push(a);Wh(this,b);return this};W.prototype.innerJoin=W.prototype.$f;W.prototype.eg=function(a,b){Vh(this,542);if(!(b instanceof tg))throw new F(541);if(this.xd)throw new F(547);this.a.c.push(a);null==this.a.yb&&(this.a.yb=D());var c=b;K(a)!=K(b.la.H())&&(c=b.reverse());this.a.yb.add(c.W());Wh(this,c);return this};W.prototype.leftOuterJoin=W.prototype.eg;
W.prototype.X=function(a){if(null!=(this.a.X||this.a.Qb))throw new F(528);if(a instanceof Jd)this.a.Qb=a;else{if(0>a)throw new F(531);this.a.X=a}return this};W.prototype.limit=W.prototype.X;W.prototype.L=function(a){if(null!=(this.a.L||this.a.Yb))throw new F(529);if(a instanceof Jd)this.a.Yb=a;else{if(0>a)throw new F(531);this.a.L=a}return this};W.prototype.skip=W.prototype.L;W.prototype.N=function(a,b){Vh(this,549);null==this.a.N&&(this.a.N=[]);this.a.N.push({O:a,lb:null!=b?b:1});return this};
W.prototype.orderBy=W.prototype.N;W.prototype.ja=function(a){Vh(this,549);if(null!=this.a.ja)throw new F(530);null==this.a.ja&&(this.a.ja=[]);this.a.ja.push.apply(this.a.ja,Array.prototype.slice.call(arguments));return this};W.prototype.groupBy=W.prototype.ja;function Uh(a,b){switch(a){case "COUNT":case "DISTINCT":return!0;case "AVG":case "GEOMEAN":case "STDDEV":case "SUM":return 4==b||3==b;case "MAX":case "MIN":return 4==b||3==b||5==b||2==b}return!1}
W.prototype.clone=function(){var a=new W(this.global,this.a.f);a.a=this.a.clone();a.a.ad=null;return a};W.prototype.clone=W.prototype.clone;function Xh(a,b){V.call(this,a,new vh(a.j(qc)));this.a.table=b}t(Xh,V);r("lf.query.UpdateBuilder",Xh);Xh.prototype.set=function(a,b){var c={Xc:b instanceof Jd?b.xa():-1,O:a,value:b};null!=this.a.set?this.a.set.push(c):this.a.set=[c];return this};Xh.prototype.set=Xh.prototype.set;Xh.prototype.u=function(a){this.Cd();this.a.u=a;return this};Xh.prototype.where=Xh.prototype.u;Xh.prototype.Cd=function(){if(null!=this.a.u)throw new F(516);};
Xh.prototype.fb=function(){Xh.Ib.fb.call(this);if(null==this.a.set)throw new F(532);if(this.a.set.some(function(a){return a.value instanceof Jd}))throw new F(501);};function Yh(a){this.a=a;this.Da=null}Yh.prototype.gc=function(){null===this.Da&&(this.Da=this.dd());return this.Da};function Zh(a){Yh.call(this,a)}t(Zh,Yh);Zh.prototype.dd=function(){return this.a.$b?new Wg(this.a.Ha,this.a.values):new Vg(this.a.Ha,this.a.values)};function $h(a){Yh.call(this,a)}t($h,Yh);$h.prototype.dd=function(){var a=new Yg(this.a.table,this.a.set),b=null!=this.a.u?new Zg(this.a.u.Kb()):null,c=new $g(this.a.table);null===b?Vd(a,c):(Vd(b,c),Vd(a,b));return a};function ai(a,b,c){this.Da=a;this.he=b;this.Ub=c}ai.prototype.gc=function(){this.Ub.forEach(function(a){this.Da=a.nb(this.Da,this.he)},this);return this.Da};function bi(a,b){Yh.call(this,a);this.Ub=b}t(bi,Yh);bi.prototype.dd=function(){var a=new Xg(this.a.c),b=null!=this.a.u?new Zg(this.a.u.Kb()):null,c=new $g(this.a.c);null===b?Vd(a,c):(Vd(b,c),Vd(a,b));return(new ai(a,this.a,this.Ub)).gc()};function ci(){}t(ci,ih);ci.prototype.nb=function(a,b){if(2>b.c.length)return a;this.Z=a;this.Wa(this.Z,b);return this.Z};ci.prototype.Wa=function(a,b){if(a instanceof Zg&&a.J instanceof tg){var c=a.J.W(),d=Td(a,0);d instanceof ah&&(c=null!=b.yb&&b.yb.has(c),c=new hh(a.J,c),pg(a,d,c,c),a==this.Z&&(this.Z=c),a=c)}M(a).forEach(function(a){this.Wa(a,b)},this)};function di(){this.Wc=D()}t(di,ih);di.prototype.nb=function(a,b){this.Wc.clear();if(!q(b.u))return a;this.Z=a;this.Wa(this.Z);this.Wc.clear();return this.Z};di.prototype.Wa=function(a){if(ei(a)){var b=a.J instanceof ae?fi(this,a):gi(this,a);this.Wc.add(a);b==a&&(b=Td(a,0));null!==b&&(fa(b.getParent())&&(this.Z=b),ei(b)&&!this.Wc.has(b)&&this.Wa(b))}else M(a).forEach(function(a){this.Wa(a)},this)};
function hi(a,b,c){var d=b;if(Td(b,0)instanceof Zg)d=ng(b),hi(a,b,c);else if(ii(b)){var e=[],d=og(b,c,function(a){a=new Zg(a.J);e.push(a);return a});e.forEach(function(a){hi(this,a,c)},a)}return d}function fi(a,b){var c=D([K(b.J.O.H())]),d=function(a){return ji(this,a,c)}.bind(a);return hi(a,b,d)}function gi(a,b){var c=D([K(b.J.ga.H()),K(b.J.la.H())]),d=function(a){return ji(this,a,c)}.bind(a);return hi(a,b,d)}
function ji(a,b,c){var d=D();jg(b).forEach(function(a){d.add(K(a.table))},a);b instanceof $g&&d.add(K(b.table));return wc(d,c)}function ei(a){return a instanceof Zg&&!(a.J instanceof rg)}function ii(a){a=Td(a,0);return a instanceof ah||a instanceof hh};function ki(a,b){Yh.call(this,a);this.Ub=b;this.gf=this.Ye=this.pf=this.af=this.Be=this.Ne=this.of=this.He=this.rf=null}t(ki,Yh);
ki.prototype.dd=function(){li(this);2<=this.a.c.length&&(this.He=new ah);this.of=null!=this.a.u?new Zg(this.a.u.Kb()):null;this.a.N&&(this.af=new ch(this.a.N));null!=this.a.L&&0<this.a.L&&(this.pf=new gh(this.a.L));null!=this.a.X&&(this.Ye=new fh(this.a.X));null!=this.a.ja&&(this.Ne=new eh(this.a.ja));mi(this);this.gf=new bh(this.a.f||[],this.a.ja||null);var a=ni(this);return(new ai(a,this.a,this.Ub)).gc()};
function ni(a){for(var b=[a.Ye,a.pf,a.gf,a.af,a.Be,a.Ne,a.of,a.He],c=null,d=null,e=0;e<b.length;e++){var f=b[e];null!==f&&(null===d?d=f:Vd(b[c],f),c=e)}a.rf.forEach(function(a){Vd(b[c],a)});return d}function li(a){a.rf=a.a.c.map(function(a){return new $g(a)},a)}function mi(a){var b=a.a.f.filter(function(a){return a instanceof T});null!=a.a.N&&a.a.N.forEach(function(a){a.O instanceof T&&b.push(a.O)});0<b.length&&(a.Be=new dh(b))};function oi(){this.oe=[new jh,new mh,new di,new ci];this.Kd=[new jh]}oi.prototype.create=function(a){var b=null;if(a instanceof th)b=new Zh(a);else if(a instanceof qh)b=new bi(a,this.Kd);else if(a instanceof ie)b=new ki(a,this.oe);else if(a instanceof vh)b=new $h(a);else throw new F(513);b=b.gc();return new Tg(b,a.ba())};function pi(a){U.call(this,0,1);this.S=a}t(pi,U);pi.prototype.toString=function(){return"delete("+this.S.getName()+")"};pi.prototype.ea=function(a,b){var c=a[0].entries.map(function(a){return a.sa});b.remove(this.S,c);return[Bd()]};function qi(a,b){U.call(this,0,-1);this.table=b;this.D=a.j(mc)}t(qi,U);qi.prototype.toString=function(){return"get_row_count("+this.table.getName()+")"};qi.prototype.ea=function(){var a=this.D.get(Se(this.table)),b=new H([],[this.table.getName()]),c=Eg(),a=a.Oa().oa;null===b.Ya&&(b.Ya=B());b.Ya.set(c.m(),a);return[b]};function ri(a,b){U.call(this,0,-1);this.U=a.j(lc);this.D=a.j(mc);this.table=b}t(ri,U);ri.prototype.toString=function(){var a="table_access("+this.table.getName();null===this.table.Za()||(a+=" as "+this.table.Za());return a+")"};ri.prototype.ea=function(){var a=this.D.get(Se(this.table)).$a();return[Ed(jf(this.U,a),[K(this.table)])]};function si(a){this.h=a}t(si,ih);si.prototype.nb=function(a,b){this.Z=a;if(!this.Dd(b))return a;var c=kg(a,function(a){return a instanceof ri})[0],d=new qi(this.h,c.table);pg(c,c,d,d);return this.Z};si.prototype.Dd=function(a){return 1==a.f.length&&1==a.c.length&&null==a.u&&null==a.X&&null==a.L&&null==a.ja?(a=a.f[0],a instanceof T&&"COUNT"==a.Jb&&a.child instanceof Dg):!1};function ti(a){U.call(this,0,1);this.Me=a}t(ti,U);ti.prototype.toString=function(){return"groupBy("+this.Me.map(function(a){return a.m()}).toString()+")"};ti.prototype.ea=function(a){return ui(this,a[0])};function ui(a,b){var c=new Tc,d=function(a){return this.Me.map(function(b){return J(a,b)},this).join(",")}.bind(a);b.entries.forEach(function(a){c.set(d(a),a)},a);return c.keys().map(function(a){return new H(c.get(a),I(b))},a)};function vi(a,b,c){U.call(this,0,0);this.D=a.j(mc);this.U=a.j(lc);this.J=b;this.Pb=c;this.Ad="eq"==this.J.G?0:2;this.Oe=null}t(vi,U);var wi=["hash","index_nested_loop","nested_loop"];vi.prototype.toString=function(){return"join(type: "+(this.Pb?"outer":"inner")+", impl: "+wi[this.Ad]+", "+this.J.toString()+")"};
vi.prototype.ea=function(a){switch(this.Ad){case 0:return[xg(this.J,a[0],a[1],this.Pb)];case 1:return[yg(this.J,a[0],a[1],this.Oe,this.U)];default:var b=this.J,c=a[0];a=a[1];var d=this.Pb,e=[c,a];d||(e=ug(b,c,a));c=e[0];a=e[1];for(var e=[],f=I(c),h=I(a),k=c.entries.length,n=a.entries.length,A=n+256-1>>8,O=0;O<A;){for(var da=0;da<k;da++){var Ab=!1,Yf=J(c.entries[da],b.ga);if(null!==Yf)for(var Ai=Math.min(O+1<<8,n),Rc=O<<8;Rc<Ai;Rc++)if(b.vc(Yf,J(a.entries[Rc],b.la))){var Ab=!0,Bi=Id(c.entries[da],
f,a.entries[Rc],h);e.push(Bi)}d&&!Ab&&e.push(wg(b,c.entries[da],f))}O++}b=I(c).concat(I(a));return[new H(e,b)]}};function xi(a,b){a.Ad=1;var c=a.D.get(b.xa().m());a.Oe={Wf:b,lg:b==a.J.ga?a.J.la:a.J.ga,index:c}};function yi(a){U.call(this,0,-1);this.hf=a}t(yi,U);yi.prototype.toString=function(){return"no_op_step("+I(this.hf[0]).join(",")+")"};yi.prototype.ea=g("hf");function zi(){}t(zi,ih);zi.prototype.nb=function(a,b){this.Z=a;if(!this.Dd(b))return a;kg(a,function(a){return a instanceof vi}).forEach(this.vg,this);return this.Z};zi.prototype.Dd=function(a){return 1<a.c.length};
zi.prototype.vg=function(a){if("eq"==a.J.G&&!a.Pb){var b=function(b){if(!(b instanceof ri))return null;b=K(b.table)==K(a.J.la.H())?a.J.la:a.J.ga;return fa(b.xa())?null:b},c=b(Td(a,0)),b=b(Td(a,1));if(null!==c||null!==b){b=null===b?c:b;xi(a,b);var d=new H([],[K(b.H())]);Xd(a,new yi([d]),b==c?0:1)}}};function Ci(a){a=a.map(function(a){return a.za()});a=Gb.apply(null,a);var b=[];Fb(a,function(a){b.push(a)});return b}function Di(a){this.Ob=a}Di.prototype.ed=function(){return 1==this.Ob.f.length?[ud()]:[this.Ob.f.map(function(){return ud()})]};function Ei(a,b){this.Ob=a;this.Ca=b;this.Hd=this.We=null}
function Fi(a,b){var c=B();a.Ca.keys().forEach(function(a){var e=this.Ca.get(a).map(function(a){return ee(b,a)},this),f=new gg([ud()]);e.forEach(function(a){var b=null;"between"==a.G?b=new pd(a.value[0],a.value[1],!1,!1):"eq"==a.G?(b=a.value,b=new pd(b,b,!1,!1)):b="gte"==a.G?new pd(a.value,G,!1,!1):"gt"==a.G?new pd(a.value,G,!0,!1):"lte"==a.G?new pd(G,a.value,!1,!1):new pd(G,a.value,!1,!0);a=a.ab?qd(b):[b];a=new gg(a);f=hg(f,a)});c.set(a,f)},a);return c}
Ei.prototype.ed=function(a){if(this.We==a)return this.Hd;for(var b=Fi(this,a),c=this.Ob.f.length-1;0<=c;c--){var d=this.Ob.f[c];if(null!==(b.get(d.ca.getName())||null))break;b.set(d.ca.getName(),new gg([ud()]))}this.Hd=1==this.Ob.f.length?C(b)[0].za():Ci(Gi(this,b));this.We=a;return this.Hd};function Gi(a,b){var c=B(),d=0;a.Ob.f.forEach(function(a){c.set(a.ca.getName(),d);d++});return ac(b).sort(function(a,b){return c.get(a)-c.get(b)}).map(function(a){return b.get(a)})};function Hi(a,b){this.sf=b;this.D=a.j(mc)}function Ii(a,b,c){c=c.filter(a.ag,a);if(0==c.length)return null;a=Ji(a,c);if(0==a.length)return null;if(1==a.length)return a[0];var d=Number.MAX_VALUE;return a.reduce(function(a,c){var h=Ki(c,b);return h<d?(d=h,c):a},null)}
function Ji(a,b){return a.sf.ya().map(function(a){a=new Li(this.D,a);Mi(a,b);return a},a).filter(function(a){if(null===a.Ca)a=!1;else{for(var b=!1,e=!0,f=0;f<a.wb.f.length;f++){var h=a.Ca.has(a.wb.f[f].ca.getName());if(b&&h){e=!1;break}h||(b=!0)}a=e}return a})}Hi.prototype.ag=function(a){var b;if(b=a instanceof ae)be(a),b=null!==a.value&&("between"==a.G||"eq"==a.G||"gt"==a.G||"gte"==a.G||"lt"==a.G||"lte"==a.G);return b?a.O.H()==this.sf:!1};
function Li(a,b){this.D=a;this.wb=b;this.Xf=D(this.wb.f.map(function(a){return a.ca.getName()}));this.Xd=this.Ca=null}function Ni(a){null===a.Xd&&(a.Xd=new Ei(a.wb,a.Ca));return a.Xd}function Mi(a,b){b.forEach(function(a){var b=a.hb()[0].getName();this.Xf.has(b)&&(null===this.Ca&&(this.Ca=new Tc),this.Ca.set(b,a.W()))},a)}function Ki(a,b){var c=Ni(a).ed(b),d=a.D.get(a.wb.m());return c.reduce(function(a,b){return a+d.bd(b)},0)};function Oi(a,b,c,d){U.call(this,0,-1);this.D=a.j(mc);this.index=b;this.Ve=c;this.le=d;this.Vc=this.Uc=!1}t(Oi,U);Oi.prototype.toString=function(){return"index_range_scan("+this.index.m()+", ?, "+(this.le?"reverse":"natural")+(this.Uc?", limit:?":"")+(this.Vc?", skip:?":"")+")"};Oi.prototype.Sc=function(a){var b=this.toString(),c=this.Ve.ed(a),b=b.replace("?",c.toString());this.Uc&&(b=b.replace("?",a.X.toString()));this.Vc&&(b=b.replace("?",a.L.toString()));return b};
Oi.prototype.ea=function(a,b,c){a=this.Ve.ed(c);b=this.D.get(this.index.m());c=(1==a.length&&a[0]instanceof pd&&vd(a[0])?of(b.get(a[0].c),!1,this.Uc?c.X:void 0,this.Vc?c.L:void 0):b.$a(a,this.le,this.Uc?c.X:void 0,this.Vc?c.L:void 0)).map(function(a){return new y(a,{})},this);return[Ed(c,[this.index.Rc])]};function Pi(a){U.call(this,0,1);this.rd=a}t(Pi,U);Pi.prototype.toString=l("select(?)");Pi.prototype.Sc=function(a){a=ee(a,this.rd);return this.toString().replace("?",a.toString())};Pi.prototype.ea=function(a,b,c){return[ee(c,this.rd).eval(a[0])]};function Qi(a,b){U.call(this,0,1);this.U=a.j(lc);this.S=b}t(Qi,U);Qi.prototype.toString=function(){return"table_access_by_row_id("+this.S.getName()+")"};Qi.prototype.ea=function(a){return[Ed(jf(this.U,yd(a[0])),[K(this.S)])]};function Ri(a){this.h=a}t(Ri,ih);Ri.prototype.nb=function(a,b){this.Z=a;kg(a,function(a){return a instanceof ri}).forEach(function(a){var d=Si(a);if(0!=d.length){var e=Ii(new Hi(this.h,a.table),b,d.map(function(a){return ee(b,a.rd)}));if(null!==e){var f=B();d.forEach(function(a){f.set(a.rd,a)},this);this.Z=Ti(this,e,f,a)}}},this);return this.Z};function Si(a){var b=[];for(a=a.getParent();a;)a instanceof Pi&&b.push(a),a=a.getParent();return b}
function Ti(a,b,c,d){(null===b.Ca?[]:b.Ca.values()).map(function(a){return c.get(a)}).forEach(lg);b=new Oi(a.h,b.wb,Ni(b),!1);a=new Qi(a.h,d.table);Vd(a,b);pg(d,d,a,b);return b.ib()};function Ui(a,b){U.call(this,0,-1);this.D=a.j(mc);this.S=b}t(Ui,U);Ui.prototype.toString=function(){return"insert("+this.S.getName()+")"};Ui.prototype.ea=function(a,b,c){Vi(this.S,c.values,this.D);b.xb(this.S,c.values);return[Ed(c.values,[this.S.getName()])]};function Vi(a,b,c){a=a.Eb().fd();if(null===a?0:a.f[0].autoIncrement){var d=a.f[0].ca.getName();c=c.get(a.m()).max();var e=null===c?0:c[0];b.forEach(function(a){if(0==a.s[d]||null==a.s[d])e++,a.s[d]=e})}}
function Wi(a,b){U.call(this,0,-1);this.D=a.j(mc);this.S=b}t(Wi,U);Wi.prototype.toString=function(){return"insert_replace("+this.S.getName()+")"};Wi.prototype.ea=function(a,b,c){Vi(this.S,c.values,this.D);b.Sd(this.S,c.values);return[Ed(c.values,[this.S.getName()])]};function Xi(){U.call(this,0,1)}t(Xi,U);Xi.prototype.toString=l("limit(?)");Xi.prototype.Sc=function(a){return this.toString().replace("?",a.X.toString())};Xi.prototype.ea=function(a,b,c){a[0].entries.splice(c.X);return a};function Yi(a){U.call(this,0,1);this.N=a}t(Yi,U);m=Yi.prototype;m.toString=function(){return"order_by("+je(this.N)+")"};m.ea=function(a){if(1==a.length){var b;b=a[0];for(var c=null,d=0;d<this.N.length;d++){var e=Fg(this.N[d].O);if(null!==b.Ya&&b.Ya.has(e.m())){c=e;break}}b=c;(null===b?a[0]:zd(a[0],b)).entries.sort(this.Nf.bind(this))}else a.sort(this.yg.bind(this));return a};
m.V=function(a,b){var c=null,d=null,e=null,f=-1;do f++,e=this.N[f].O,c=this.N[f].lb,d=a(e),e=b(e);while(d==e&&f+1<this.N.length);d=d<e?-1:d>e?1:0;return 1==c?d:-d};m.yg=function(a,b){return this.V(function(b){return b instanceof T?zd(a,b):J(a.entries[a.entries.length-1],b)},function(a){return a instanceof T?zd(b,a):J(b.entries[b.entries.length-1],a)})};m.Nf=function(a,b){return this.V(function(b){return J(a,b)},function(a){return J(b,a)})};function Zi(a,b){this.Ja=a;this.K=b}function $i(a){return a.K.some(function(a){return a instanceof T},a)?aj(a):bj(a)}function aj(a){if(1==a.K.length&&"DISTINCT"==a.K[0].Jb)return a=zd(a.Ja,a.K[0]).entries.map(function(a){var b=new Fd(new y(-1,{}),1<this.Ja.M.size);Hd(b,this.K[0],J(a,this.K[0].child));return b},a),new H(a,[]);var b=new Fd(new y(-1,{}),1<a.Ja.M.size);a.K.forEach(function(a){var d=a instanceof T?zd(this.Ja,a):J(this.Ja.entries[0],a);Hd(b,a,d)},a);return new H([b],I(a.Ja))}
function bj(a){var b=Array(a.Ja.entries.length),c=1<a.Ja.M.size;a.Ja.entries.forEach(function(a,e){b[e]=new Fd(new y(a.sa.id(),{}),c);this.K.forEach(function(c){Hd(b[e],c,J(a,c))},this)},a);return new H(b,I(a.Ja))}function cj(a,b){var c=a.map(function(a){return $i(new Zi(a,b)).entries[0]});return new H(c,I(a[0]))};function dj(a,b){U.call(this,0,1);this.f=a;this.Nb=b}t(dj,U);dj.prototype.toString=function(){var a="project("+this.f.toString();if(null!==this.Nb)var b=this.Nb.map(function(a){return a.m()}).join(", "),a=a+(", groupBy("+b+")");return a+")"};dj.prototype.ea=function(a){0==a.length?a=[Bd()]:1==a.length?(a=a[0],a=[0==this.f.length?a:$i(new Zi(a,this.f))]):a=[cj(a,this.f)];return a};function ej(a){return a.f.some(function(a){return a instanceof T})||null!==a.Nb};function fj(){U.call(this,0,1)}t(fj,U);fj.prototype.toString=l("skip(?)");fj.prototype.Sc=function(a){return this.toString().replace("?",a.L.toString())};fj.prototype.ea=function(a,b,c){return[new H(a[0].entries.slice(c.L),I(a[0]))]};function gj(){}t(gj,ih);gj.prototype.nb=function(a,b){if(!q(b.X)&&!q(b.L))return a;var c=hj(a);if(null===c)return a;kg(a,function(a){return a instanceof Xi||a instanceof fj}).forEach(function(a){a instanceof Xi?c.Uc=!0:c.Vc=!0;lg(a)},this);return c.ib()};function hj(a){a=kg(a,function(a){return a instanceof Oi},function(a){return a instanceof dj&&ej(a)||a instanceof Yi||1!=M(a).length||a instanceof Pi});return 0<a.length?a[0]:null};function ij(a){this.h=a}t(ij,ih);ij.prototype.nb=function(a,b){var c=jj(a,b);if(null===c)return a;var d;a:{var e=c;d=kj(Td(c,0));if(null!==d){var f;f=c.N;for(var h=null,k=d.table.ya(),n=0;n<k.length&&null===h;n++)h=lj(k[n],f);f=h;if(null===f){d=e;break a}e=new Oi(this.h,f.wb,new Di(f.wb),f.Se);f=new Qi(this.h,d.table);Vd(f,e);lg(c);e=pg(d,d,f,e)}d=e}if(d==c)a:if(d=c,e=mj(Td(c,0)),null!==e){f=lj(e.index,c.N);if(null===f)break a;e.le=f.Se;d=lg(c).parent}return d.ib()};
function mj(a){a=kg(a,function(a){return a instanceof Oi},function(a){return 1!=M(a).length});return 0<a.length?a[0]:null}function kj(a){a=kg(a,function(a){return a instanceof ri},function(a){return 1!=M(a).length});return 0<a.length?a[0]:null}function jj(a,b){return q(b.N)?kg(a,function(a){return a instanceof Yi})[0]:null}function lj(a,b){if(a.f.length!=b.length||!b.every(function(b,c){return b.O.getName()==a.f[c].ca.getName()}))return null;var c=nj(b,a);return c[0]||c[1]?{wb:a,Se:c[1]}:null}
function nj(a,b){var c=a.reduce(function(a,b){return a<<1|(0==b.lb?0:1)},0),d=b.f.reduce(function(a,b){return a<<1|(0==b.lb?0:1)},0),c=c^d;return[0==c,c==Math.pow(2,Math.max(a.length,b.f.length))-1]};function oj(a,b,c){this.Da=a;this.he=b;this.Ub=c}oj.prototype.gc=function(){this.Ub.forEach(function(a){this.Da=a.nb(this.Da,this.he)},this);return this.Da};function pj(a,b){U.call(this,0,1);this.S=a;this.Gg=b}t(pj,U);pj.prototype.toString=function(){return"update("+this.S.getName()+")"};pj.prototype.ea=function(a,b){var c=a[0].entries.map(function(a){var b=this.S.Db(a.sa.Fa());this.Gg.forEach(function(a){b.s[a.O.getName()]=a.value},this);return b},this);b.update(this.S,c);return[Bd()]};function qj(a){this.h=a;this.oe=[new zi,new Ri(this.h),new ij(this.h),new gj,new si(this.h)];this.Kd=[new Ri(this.h)]}qj.prototype.create=function(a,b){var c=a.ib();if(c instanceof Wg||c instanceof Vg)return rj(this,a,b);if(c instanceof bh||c instanceof fh||c instanceof gh)return rj(this,a,b,this.oe);if(c instanceof Xg||c instanceof Yg)return rj(this,a,b,this.Kd);throw new F(8);};function rj(a,b,c,d){a=ig(b.ib(),a.ig.bind(a));null!=d&&(a=(new oj(a,c,d)).gc());return new ke(a,b.ba())}
qj.prototype.ig=function(a){if(a instanceof bh)return new dj(a.f,a.Nb);if(a instanceof eh)return new ti(a.f);if(a instanceof dh)return new Jg(a.f);if(a instanceof ch)return new Yi(a.N);if(a instanceof gh)return new fj;if(a instanceof fh)return new Xi;if(a instanceof Zg)return new Pi(a.J.W());if(a instanceof ah)return new nh;if(a instanceof hh)return new vi(this.h,a.J,a.Pb);if(a instanceof $g)return new ri(this.h,a.table);if(a instanceof Xg)return new pi(a.table);if(a instanceof Yg)return new pj(a.table,
a.ve);if(a instanceof Wg)return new Wi(this.h,a.table);if(a instanceof Vg)return new Ui(this.h,a.table);throw new F(514);};function sj(a){this.gg=new oi;this.tg=new qj(a)};function tj(){this.Ze=B()}function uj(a,b){var c=a.Ze.get(b.getName())||null;null===c&&(c=new vj,a.Ze.set(b.getName(),c));return c}function wj(a,b,c,d){c.forEach(function(a){a=uj(this,a);0==d?(a.bb=null,a.wc=b):3==d?(null===a.Xb&&(a.Xb=D()),a.Xb.add(b),null===a.Ta&&(a.Ta=D()),a.Ta.delete(b)):1==d?(null===a.Ta&&(a.Ta=D()),a.Ta.add(b)):2==d&&(a.bb=b)},a)}
function xj(a,b,c,d){var e=!0;c.forEach(function(a){if(e){a=uj(this,a);var c=null===a.Ta||0==a.Ta.size;e=0==d?(null===a.Xb||0==a.Xb.size)&&c&&null===a.wc&&null!==a.bb&&a.bb==b:3==d?null===a.wc&&null===a.bb&&null!==a.Ta&&a.Ta.has(b):1==d?null===a.bb:c&&(null===a.bb||a.bb==b)}},a);return e}function yj(a,b,c,d){var e=xj(a,b,c,d);e&&wj(a,b,c,d);return e}tj.prototype.releaseLock=function(a,b){b.forEach(function(b){uj(this,b).releaseLock(a)},this)};
function zj(a,b){b.forEach(function(a){uj(this,a).bb=null},a)}function vj(){this.Xb=this.Ta=this.bb=this.wc=null}vj.prototype.releaseLock=function(a){this.wc==a&&(this.wc=null);this.bb==a&&(this.bb=null);null===this.Ta||this.Ta.delete(a);null===this.Xb||this.Xb.delete(a)};function Aj(){this.Tb=new Bj;this.Hc=new tj}function se(a,b){(2>b.getPriority()||2>b.getPriority())&&zj(a.Hc,b.ba());a.Tb.xb(b);Cj(a);return b.Mb().ha}function Cj(a){for(var b=a.Tb.za(),c=0;c<b.length;c++){var d=b[c],e=!1;if(e=0==d.I()?Dj(a,d,1,3):Dj(a,d,2,0))a.Tb.remove(d),e=a,d.exec().then(e.qg.bind(e,d),e.pg.bind(e,d))}}function Dj(a,b,c,d){var e=!1;yj(a.Hc,b.W(),b.ba(),c)&&(e=yj(a.Hc,b.W(),b.ba(),d));return e}Aj.prototype.qg=function(a,b){this.Hc.releaseLock(a.W(),a.ba());a.Mb().resolve(b);Cj(this)};
Aj.prototype.pg=function(a,b){this.Hc.releaseLock(a.W(),a.ba());a.Mb().reject(b);Cj(this)};function Bj(){this.Tb=[]}Bj.prototype.xb=function(a){nf(this.Tb,a,function(a,c){var d=a.getPriority()-c.getPriority();return 0==d?a.W()-c.W():d})};Bj.prototype.za=function(){return this.Tb.slice()};Bj.prototype.remove=function(a){var b=this.Tb;a=ya(b,a);var c;(c=0<=a)&&xa.splice.call(b,a,1);return c};function Ej(a,b){this.Ld=Kd.Bc();this.ie=a;this.nd=b;this.K=Fj(this)}function Fj(a){if(0<a.ie.f.length)return a.ie.f;var b=[];a.ie.c.forEach(function(a){a.hb().forEach(function(a){b.push(a)})});return b}Ej.prototype.V=function(a,b){return this.K.every(function(c){return Qd(this.Ld,c.I(),"eq")(J(a,c),J(b,c))},this)};
function Gj(a,b,c){var d=null===b?[]:b.entries,e=wb(d,c.entries,a.V.bind(a),function(a){return d[a]});b=[];for(var f=0,h=0;h<d.length;h++){var k=d[h];e[f]==k?f++:(k=a.nd.splice(f,1),k=Hj(h,k,0,a.nd),b.push(k))}e=wb(d,c.entries,a.V.bind(a),function(a,b){return c.entries[b]});for(h=f=0;h<c.entries.length;h++)k=c.entries[h],e[f]==k?f++:(a.nd.splice(h,0,k.sa.s),k=Hj(h,[],1,a.nd),b.push(k));return b}function Hj(a,b,c,d){return{Ig:c,index:a,object:d,Kg:b,type:"splice"}};function Ij(){this.ec=B()}Ij.prototype.zd=function(a,b){var c=ka(a.a).toString(),d=this.ec.get(c)||null;null===d&&(d=new Jj(a),this.ec.set(c,d));d.zd(b)};Ij.prototype.je=function(a,b){var c=ka(a.a).toString(),d=this.ec.get(c)||null;d.je(b);0<d.Lc.size||this.ec.delete(c)};function re(a,b){var c=D();b.forEach(function(a){c.add(a.getName())});var d=[];a.ec.forEach(function(a){a=a.Dc();a.context.c.some(function(a){return c.has(a.getName())})&&d.push(a)});return d}
function pe(a,b,c){b=ka(null!=b.ad?b.ad:b).toString();a=a.ec.get(b)||null;null!==a&&Kj(a,c)}function Jj(a){this.Ef=a;this.Lc=D();this.ng=[];this.Xe=null;this.Lf=new Ej(a.a,this.ng)}Jj.prototype.zd=function(a){this.Lc.has(a)||this.Lc.add(a)};Jj.prototype.je=function(a){return this.Lc.delete(a)};Jj.prototype.Dc=function(){var a=this.Ef;return{context:a.a,ge:Lh(a)}};function Kj(a,b){var c=Gj(a.Lf,a.Xe,b);a.Xe=b;0<c.length&&a.Lc.forEach(function(a){a(c)})};function Lj(a,b){var c=a.j(qc),d=b||{},e=new hf(c);a.mb(lc,e);var e=null,f=!1;null!=d.storeType?e=d.storeType:(e=Zb(),e=e.Yf?0:e.Hg?4:1);switch(e){case 0:e=new Pe(a,c);break;case 1:e=new Ve(c);break;case 5:e=new Xe(c);break;case 4:e=new ef(a,c,d.webSqlDbSize);break;case 3:e=new Ee(c,d.firebase);f=!0;break;default:throw new F(300);}a.mb(kc,e);var h=new fg;a.mb(mc,h);return e.Ga(d.onUpgrade).then(function(){var b=new sj(a);a.mb(nc,b);b=new Aj;a.mb(oc,b);b=new Ij;a.mb(pc,b);return h.Ga(c)}).then(function(){if(f){var b=
new te(a);b.Ka.subscribe(b.be.bind(b))}return(new Zf(a)).Ga(c)})};function Mj(a){this.h=a;this.i=a.j(qc);this.$=D(this.i.ra());this.cb=x()}m=Mj.prototype;m.exec=function(){var a=this.h.j(mc),b=this.h.j(lc),c={};this.i.ra().forEach(function(d){var f=a.get(Se(d)).$a(),f=jf(b,f).map(function(a){return a.s});c[d.getName()]=f});var d={name:this.i.name(),version:this.i.version(),tables:c},d=new Fd(new y(-1,d),!0);return w([new H([d],[])])};m.I=l(0);m.ba=g("$");m.Mb=g("cb");m.W=function(){return ka(this)};m.getPriority=l(0);function Nj(a,b){this.h=a;this.i=a.j(qc);this.$=D(this.i.ra());this.cb=x();this.va=b;this.Ka=a.j(kc);this.U=a.j(lc);this.D=a.j(mc)}m=Nj.prototype;
m.exec=function(){if(!(this.Ka instanceof Pe||this.Ka instanceof Ve||this.Ka instanceof ef))throw new F(300);var a;a:{a=this.i.ra();for(var b=0;b<a.length;++b)if(0<this.D.get(Se(a[b])).Oa().oa){a=!1;break a}a=!0}if(!a)throw new F(110);if(this.i.name()!=this.va.name||this.i.version()!=this.va.version)throw new F(111);if(null==this.va.tables)throw new F(112);return Oj(this)};m.I=l(1);m.ba=g("$");m.Mb=g("cb");m.W=function(){return ka(this)};m.getPriority=l(0);
function Oj(a){var b=new kd(a.h,a.$),b=a.Ka.Cb(a.I(),E(a.$),b),c;for(c in a.va.tables){var d=a.i.table(c),e=a.va.tables[c].map(function(a){return d.tb(a)}),f=b.H(c,d.Db);a.U.Vb(c,e);var h=a.D.kc.get(c)||[];e.forEach(function(a){h.forEach(function(b){var c=a.Fb(b.getName());b.add(c,a.id())})});f.put(e)}return b.ia()};function Pj(a,b){this.h=a;this.Ka=a.j(kc);this.Ea=a.j(oc);this.Gb=a.j(pc);this.$=D(b);this.Ra=new kd(this.h,this.$);this.cb=x();this.xc=x();this.xe=x()}m=Pj.prototype;m.exec=function(){this.xe.resolve();return this.xc.ha};m.I=l(1);m.ba=g("$");m.Mb=g("cb");m.W=function(){return ka(this)};m.getPriority=l(2);function Qj(a){se(a.Ea,a);return a.xe.ha}
function Rj(a,b){var c=b.Dc();return c.ge.ib().exec(a.Ra,c.context).then(function(a){return xd(a[0])},function(a){this.Ra.Hb();var b=new jb(a.name);this.xc.reject(b);throw a;}.bind(a))}m.ia=function(){this.Ka.Cb(this.I(),E(this.$),this.Ra).ia().then(function(){this.Pc();this.xc.resolve()}.bind(this),function(a){this.Ra.Hb();this.xc.reject(a)}.bind(this));return this.cb.ha};m.Hb=function(){this.Ra.Hb();this.xc.resolve();return this.cb.ha};
m.Pc=function(){var a=re(this.Gb,this.$);0!=a.length&&(a=new oe(this.h,a),se(this.Ea,a))};function Sj(a){this.h=a;this.Ea=a.j(oc);this.Tc=null;this.Ua=0;0==Tj.size&&(Tj.set(0,D([1,4])),Tj.set(1,D([2])),Tj.set(2,D([3,5,6])),Tj.set(3,D([2,7])),Tj.set(4,D([7])),Tj.set(5,D([7])),Tj.set(6,D([7])))}r("lf.proc.Transaction",Sj);var Tj=B();function Uj(a,b){var c=Tj.get(a.Ua)||null;if(null===c||!c.has(b))throw new F(107,a.Ua,b);a.Ua=b}
Sj.prototype.exec=function(a){Uj(this,4);var b=[];try{a.forEach(function(a){a.fb();b.push(a.Dc())},this)}catch(c){return Uj(this,7),bb(c)}a=new oh(this.h,b);return se(this.Ea,a).then(function(a){Uj(this,7);return a.map(function(a){return xd(a)})}.bind(this),function(a){Uj(this,7);throw a;}.bind(this))};Sj.prototype.exec=Sj.prototype.exec;Sj.prototype.Cf=function(a){Uj(this,1);this.Tc=new Pj(this.h,a);return Qj(this.Tc).then(function(){Uj(this,2)}.bind(this))};Sj.prototype.begin=Sj.prototype.Cf;
Sj.prototype.Bf=function(a){Uj(this,3);return Rj(this.Tc,a).then(function(a){Uj(this,2);return a}.bind(this),function(a){Uj(this,7);throw a;}.bind(this))};Sj.prototype.attach=Sj.prototype.Bf;Sj.prototype.ia=function(){Uj(this,5);return this.Tc.ia().then(function(){Uj(this,7)}.bind(this))};Sj.prototype.commit=Sj.prototype.ia;Sj.prototype.Hb=function(){Uj(this,6);return this.Tc.Hb().then(function(){Uj(this,7)}.bind(this))};Sj.prototype.rollback=Sj.prototype.Hb;function X(a){this.h=a;this.i=a.j(qc);this.Rd=!1}r("lf.proc.Database",X);X.prototype.Ga=function(a){this.h.mb(qc,this.i);return Lj(this.h,a).then(function(){this.Rd=!0;this.Ea=this.h.j(oc);return this}.bind(this))};X.prototype.init=X.prototype.Ga;X.prototype.vb=g("i");X.prototype.getSchema=X.prototype.vb;function Vj(a){if(!a.Rd)throw new F(2);}X.prototype.select=function(a){Vj(this);return new W(this.h,1!=arguments.length||null!=arguments[0]?Array.prototype.slice.call(arguments):[])};
X.prototype.select=X.prototype.select;X.prototype.xb=function(){Vj(this);return new Nh(this.h)};X.prototype.insert=X.prototype.xb;X.prototype.Sd=function(){Vj(this);return new Nh(this.h,!0)};X.prototype.insertOrReplace=X.prototype.Sd;X.prototype.update=function(a){Vj(this);return new Xh(this.h,a)};X.prototype.update=X.prototype.update;X.prototype.delete=function(){Vj(this);return new Mh(this.h)};X.prototype["delete"]=X.prototype.delete;
X.prototype.observe=function(a,b){Vj(this);this.h.j(pc).zd(a,b)};X.prototype.observe=X.prototype.observe;X.prototype.unobserve=function(a,b){Vj(this);this.h.j(pc).je(a,b)};X.prototype.unobserve=X.prototype.unobserve;X.prototype.Jf=function(){Vj(this);return new Sj(this.h)};X.prototype.createTransaction=X.prototype.Jf;X.prototype.close=function(){try{this.h.j(kc).close()}catch(a){}this.h.clear();this.Rd=!1};X.prototype.close=X.prototype.close;
X.prototype.Rf=function(){Vj(this);var a=new Mj(this.h);return se(this.Ea,a).then(function(a){return xd(a[0])[0]})};X.prototype["export"]=X.prototype.Rf;X.prototype.import=function(a){Vj(this);a=new Nj(this.h,a);return se(this.Ea,a).then(l(null))};X.prototype["import"]=X.prototype.import;function Y(a,b,c,d,e,f){this.S=a;this.w=b;this.Te=c;this.Re=d;this.vf=e;this.eb=f||null}r("lf.schema.BaseColumn",Y);m=Y.prototype;m.getName=g("w");m.m=function(){return K(this.S)+"."+this.w};m.toString=function(){return this.m()};m.H=g("S");m.I=g("vf");Y.prototype.getType=Y.prototype.I;Y.prototype.Za=g("eb");Y.prototype.ya=function(){null==this.ka&&(this.ka=[],this.H().ya().forEach(function(a){-1!=a.f.map(function(a){return a.ca.getName()}).indexOf(this.w)&&this.ka.push(a)},this));return this.ka};
Y.prototype.xa=function(){if(!q(this.fa)){var a=this.ya().filter(function(a){return 1!=a.f.length?!1:a.f[0].ca.getName()==this.getName()},this);this.fa=0<a.length?a[0]:null}return this.fa};Y.prototype.Fc=g("Re");Y.prototype.isNullable=Y.prototype.Fc;Y.prototype.Gc=g("Te");Y.prototype.Qa=function(a){return zg(this,a,"eq")};Y.prototype.eq=Y.prototype.Qa;Y.prototype.$e=function(a){return zg(this,a,"neq")};Y.prototype.neq=Y.prototype.$e;Y.prototype.Yd=function(a){return zg(this,a,"lt")};
Y.prototype.lt=Y.prototype.Yd;Y.prototype.hg=function(a){return zg(this,a,"lte")};Y.prototype.lte=Y.prototype.hg;Y.prototype.Tf=function(a){return zg(this,a,"gt")};Y.prototype.gt=Y.prototype.Tf;Y.prototype.Uf=function(a){return zg(this,a,"gte")};Y.prototype.gte=Y.prototype.Uf;Y.prototype.match=function(a){return zg(this,a,"match")};Y.prototype.match=Y.prototype.match;Y.prototype.Df=function(a,b){return zg(this,[a,b],"between")};Y.prototype.between=Y.prototype.Df;
Y.prototype.Vf=function(a){return zg(this,a,"in")};Y.prototype["in"]=Y.prototype.Vf;Y.prototype.cg=function(){return this.Qa(null)};Y.prototype.isNull=Y.prototype.cg;Y.prototype.bg=function(){return this.$e(null)};Y.prototype.isNotNull=Y.prototype.bg;Y.prototype.pc=function(a){return new Y(this.S,this.w,this.Te,this.Re,this.vf,a)};Y.prototype.as=Y.prototype.pc;function Wj(){this.ud=B()}var Xj;Wj.prototype.clear=function(){this.ud.clear()};Wj.prototype.clear=Wj.prototype.clear;Wj.prototype.mb=function(a,b){this.ud.set(a.toString(),b);return b};Wj.prototype.registerService=Wj.prototype.mb;Wj.prototype.j=function(a){var b=this.ud.get(a.toString())||null;if(null===b)throw new F(7,a.toString());return b};Wj.prototype.getService=Wj.prototype.j;Wj.prototype.Wd=function(a){return this.ud.has(a.toString())};Wj.prototype.isRegistered=Wj.prototype.Wd;function Yj(a){this.i=a;this.Ed=new Tc;this.ke=new Tc;this.bf=new Tc;this.Ge=B();this.g=new Tc;this.Ce=new Tc;this.jf=new Tc;this.Fe=new Tc;Zj(this)}function Zj(a){a.i.ra().forEach(function(a){var c=a.getName();a.Eb().Pd().forEach(function(d){this.bf.set(c,this.i.table(d.Sa));this.g.set(d.Sa,a);0==d.action?(this.ke.set(d.Sa,d),this.jf.set(d.Sa,a)):(this.Ed.set(d.Sa,d),this.Ce.set(d.Sa,a));this.Ge.set(a.getName()+"."+d.gb,d.Sa);this.Fe.set(d.Sa+"."+d.ic,a.getName())},this)},a)}
function ad(a,b,c){if(null!=c)return 1==c?a.Ed.get(b):a.ke.get(b);c=a.Ed.get(b);a=a.ke.get(b);return null===c&&null===a?null:(c||[]).concat(a||[])}function uh(a,b){var c=b.get(a);return null===c?[]:c}function wh(a,b){var c=D();b.forEach(function(a){(a=this.Ge.get(a))&&c.add(a)},a);return E(c).map(function(a){return this.i.table(a)},a)}function sh(a,b,c){return null!=c?0==c?uh(b,a.jf):uh(b,a.Ce):uh(b,a.g)}
function xh(a,b){var c=D();b.forEach(function(a){(a=this.Fe.get(a))&&a.forEach(function(a){c.add(a)})},a);return E(c).map(function(a){return this.i.table(a)},a)};function ak(a,b,c){this.ug=a;this.mg=b;this.Sf=c}r("lf.schema.Constraint",ak);ak.prototype.fd=g("ug");ak.prototype.getPrimaryKey=ak.prototype.fd;ak.prototype.Pd=g("Sf");ak.prototype.getForeignKeys=ak.prototype.Pd;function bk(a,b,c){var d=a.ref.split(".");if(2!=d.length)throw new F(540,c);this.Ee=b;this.gb=a.local;this.Sa=d[0];this.ic=d[1];this.name=b+"."+c;this.action=a.action;this.timing=a.timing};function Z(a){ck(a);this.Ld=Kd.Bc();this.w=a;this.K=B();this.wd=D();this.lc=D();this.Kc=D();this.Ba=null;this.ka=B();this.qd=!1;this.ub=[]}r("lf.schema.TableBuilder",Z);function dk(a){this.name=a.name;this.lb=a.order;this.autoIncrement=a.autoIncrement}var ek=D([0,6]);function ck(a){if(!/^[A-Za-z_][A-Za-z0-9_]*$/.test(a))throw new F(502,a);}function fk(a,b){if(b==a.w)throw new F(546,b);if(a.K.has(b)||a.ka.has(b)||a.lc.has(b))throw new F(503,a.w+"."+b);}
function gk(a,b){var c=!1;b.forEach(function(a){var b=this.K.get(a.name);c=c||a.autoIncrement;if(a.autoIncrement&&3!=b)throw new F(504);},a);if(c&&1<b.length)throw new F(505);}function hk(a){if(null!==a.Ba){var b=a.ka.get(a.Ba).map(function(a){return a.name}),c=0;if(a.ub.some(function(a,e){c=e;return-1!=b.indexOf(a.gb)},a))throw new F(543,a.ub[c].name);}}
function ik(a){if(null!==a.Ba){var b=function(a){return a.name},c=JSON.stringify(a.ka.get(a.Ba).map(b));a.ka.forEach(function(a,e){if(e!=this.Ba){var f=a.map(b);if(JSON.stringify(f)==c)throw new F(544,this.w+"."+e);}},a)}}function jk(a){null===a.Ba||a.ka.get(a.Ba).forEach(function(a){if(this.Kc.has(a.name))throw new F(545,this.w+"."+a.name);},a)}Z.prototype.wf=function(a,b){ck(a);fk(this,a);this.K.set(a,b);ek.has(b)&&this.ze([a]);return this};Z.prototype.addColumn=Z.prototype.wf;
Z.prototype.yf=function(a,b){var c=this.w;this.Ba="pk"+(c[0].toUpperCase()+c.substring(1));ck(this.Ba);fk(this,this.Ba);c=kk(this,a,!0,void 0,b);gk(this,c);1==c.length&&this.wd.add(c[0].name);this.lc.add(this.Ba);this.ka.set(this.Ba,c);return this};Z.prototype.addPrimaryKey=Z.prototype.yf;
Z.prototype.xf=function(a,b){ck(a);fk(this,a);var c=new bk(b,this.w,a);q(c.action)||(c.action=0);q(c.timing)||(c.timing=0);if(1==c.action&&1==c.timing)throw new F(506);if(!this.K.has(c.gb))throw new F(540,a);this.ub.push(c);this.ye(a,[c.gb],this.wd.has(c.gb));return this};Z.prototype.addForeignKey=Z.prototype.xf;Z.prototype.zf=function(a,b){ck(a);fk(this,a);var c=kk(this,b,!0);lk(this,a,c);1==c.length&&(this.wd.add(c[0].name),mk(this,c[0].name));this.ka.set(a,c);this.lc.add(a);return this};
Z.prototype.addUnique=Z.prototype.zf;function mk(a,b){a.ub.forEach(function(a){a.gb==b&&this.lc.add(a.name.split(".")[1])},a)}Z.prototype.ze=function(a){a=kk(this,a,!1);nk(this,a);a.forEach(function(a){this.Kc.add(a.name)},this);return this};Z.prototype.addNullable=Z.prototype.ze;function nk(a,b){ac(a.ka).forEach(function(a){var d=D();this.ka.get(a).forEach(function(a){d.add(a.name)});var e=b.filter(function(a){return d.has(a.name)});if(1<d.size&&0<e.length)throw new F(507,a,e.join(","));},a)}
Z.prototype.ye=function(a,b,c,d){ck(a);fk(this,a);b=kk(this,b,!0,d);lk(this,a,b);c&&this.lc.add(a);this.ka.set(a,b);return this};Z.prototype.addIndex=Z.prototype.ye;function lk(a,b,c){if(1<c.length&&(a=c.filter(function(a){return this.Kc.has(a.name)},a),0<a.length))throw new F(507,b,a.join(","));}Z.prototype.zb=ba("qd");Z.prototype.persistentIndex=Z.prototype.zb;Z.prototype.vb=function(){hk(this);ik(this);jk(this);return new (ok(this))};Z.prototype.getSchema=Z.prototype.vb;
function pk(a){return a.ub}function kk(a,b,c,d,e){var f=b,f="string"==typeof b[0]?b.map(function(a){return new dk({name:a,order:null!=d?d:1,autoIncrement:e||!1})}):b.map(function(a){return new dk(a)});f.forEach(function(a){if(!this.K.has(a.name))throw new F(508,this.w,a.name);if(c){var b=this.K.get(a.name);if(0==b||6==b)throw new F(509,this.w,a.name);}},a);return f}
function ok(a){function b(){function b(c){return a.ka.get(c).map(function(a){return{ca:this[a.name],lb:a.lb,autoIncrement:a.autoIncrement}},this)}var d=ac(a.K).map(function(b){this[b]=new Y(this,b,a.wd.has(b),a.Kc.has(b),a.K.get(b));return this[b]},this),e=ac(a.ka).map(function(d){return new Bg(a.w,d,a.lc.has(d),b.call(this,d))},this);S.call(this,a.w,d,e,a.qd);var f=null===a.Ba?null:new Bg(a.w,a.Ba,!0,b.call(this,a.Ba)),h=d.filter(function(b){return!a.Kc.has(b.getName())});this.Gf=new ak(f,h,a.ub);
this.mf=qk(a,d,e)}t(b,S);b.prototype.tb=function(a){return new this.mf(pb++,a)};b.prototype.createRow=b.prototype.tb;b.prototype.Db=function(a){var b={};this.hb().forEach(function(e){var f=e.getName();e=e.I();var h=a.value[f];if(0==e)if(e=h,null!=e&&""!=e){0!=e.length%2&&(e="0"+e);for(var h=new ArrayBuffer(e.length/2),k=new Uint8Array(h),n=0,A=0;n<e.length;n+=2)k[A++]=parseInt(e.substr(n,2),16);e=h}else e=null;else e=2==e?null!=h?new Date(h):null:h;b[f]=e},this);return new this.mf(a.id,b)};b.prototype.deserializeRow=
b.prototype.Db;b.prototype.Eb=g("Gf");b.prototype.getConstraint=b.prototype.Eb;return b}
function qk(a,b,c){function d(a,d){this.K=b;this.ka=c;y.call(this,a,d)}t(d,y);d.prototype.Ie=function(){var a={};this.K.forEach(function(b){a[b.getName()]=b.Fc()?null:Sc[b.I()]});return a};d.prototype.tf=function(){var a={};this.K.forEach(function(b){var c=b.getName();b=b.I();var d=this.s[c];a[c]=0==b?null!=d?tb(d):null:2==b?null!=d?d.getTime():null:6==b?null!=d?d:null:d},this);return a};var e=function(a){var b=this.K.get(a.getName()),c=this.Ld.Ue.get(b)||null;return function(b){return c(b[a.getName()])}}.bind(a),
f=function(a){var b=a.map(function(a){return e(a.ca)});return function(a){return b.map(function(b){return b(a)})}}.bind(a),h={};c.forEach(function(a){var b=a.m();a=1==a.f.length?e(a.f[0].ca):f(a.f);h[b]=a});d.prototype.Fb=function(a){return-1!=a.indexOf("#")?this.id():h.hasOwnProperty(a)?h[a](this.s):null};return d};function rk(a,b){this.i=new sk(a,b);this.qb=B();this.yc=!1}r("lf.schema.Builder",rk);function tk(a,b){b.ub.forEach(function(a){var d=a.Sa;if(!this.qb.has(d))throw new F(536,a.name);var d=this.qb.get(d).vb(),e=a.ic;if(!d.hasOwnProperty(e))throw new F(537,a.name);if(b.vb()[a.gb].I()!=d[e].I())throw new F(538,a.name);if(!d[e].Gc())throw new F(539,a.name);},a)}
rk.prototype.Ff=function(a){a.ub.forEach(function(a){pk(this.qb.get(a.Sa)).forEach(function(c){if(c.gb==a.ic)throw new F(534,a.name);},this)},this)};function uk(a){a.yc||(a.qb.forEach(function(a){tk(this,a);a=a.vb();this.i.M.set(a.getName(),a)},a),C(a.qb).forEach(a.Ff,a),vk(a),a.qb.clear(),a.yc=!0)}function wk(a,b,c){b.we||(b.we=!0,b.ce=!0,b.Je.forEach(function(a){a=c.get(a);if(!a.we)wk(this,a,c);else if(a.ce&&b!=a)throw new F(533);},a));b.ce=!1}
function vk(a){var b=B();a.i.M.forEach(function(a,d){b.set(d,new xk(d))},a);a.qb.forEach(function(a,d){a.ub.forEach(function(a){b.get(a.Sa).Je.add(d)})});C(b).forEach(function(a){wk(this,a,b)},a)}function xk(a){this.ce=this.we=!1;this.Je=D();this.Rc=a}rk.prototype.vb=function(){this.yc||uk(this);return this.i};rk.prototype.getSchema=rk.prototype.vb;rk.prototype.Le=function(){var a=new jc("ns_"+this.i.name()),b;Xj||(Xj=new Wj);b=Xj;var c=null;b.Wd(a)?c=b.j(a):(c=new Wj,b.mb(a,c));return c};
rk.prototype.getGlobal=rk.prototype.Le;rk.prototype.connect=function(a){var b=this.Le();b.Wd(qc)||b.mb(qc,this.vb());return(new X(b)).Ga(a)};rk.prototype.connect=rk.prototype.connect;rk.prototype.If=function(a){if(this.qb.has(a))throw new F(503,a);if(this.yc)throw new F(535);this.qb.set(a,new Z(a));return this.qb.get(a)};rk.prototype.createTable=rk.prototype.If;rk.prototype.pe=function(a){if(this.yc)throw new F(535);this.i.pe(a);return this};rk.prototype.setPragma=rk.prototype.pe;
function sk(a,b){this.w=a;this.Pa=b;this.M=B();this.ff={Mf:!1}}r("lf.schema.DatabaseSchema",sk);sk.prototype.name=g("w");sk.prototype.name=sk.prototype.name;sk.prototype.version=g("Pa");sk.prototype.version=sk.prototype.version;sk.prototype.ra=function(){return C(this.M)};sk.prototype.tables=sk.prototype.ra;sk.prototype.table=function(a){if(!this.M.has(a))throw new F(101,a);return this.M.get(a)};sk.prototype.table=sk.prototype.table;sk.prototype.info=function(){this.Pe||(this.Pe=new Yj(this));return this.Pe};
sk.prototype.ef=g("ff");sk.prototype.pragma=sk.prototype.ef;sk.prototype.pe=ba("ff");r("lf.schema.create",function(a,b){return new rk(a,b)});v.prototype.catch=v.prototype.se;v.prototype["catch"]=v.prototype.catch;}.bind(window))()
//# sourceMappingURL=lovefield.min.js.map
