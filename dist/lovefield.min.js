/*
  Copyright 2014 The Lovefield Project Authors. All Rights Reserved.

  Licensed under the Apache License, Version 2.0 (the "License");
  you may not use this file except in compliance with the License.
  You may obtain a copy of the License at

  http://www.apache.org/licenses/LICENSE-2.0

  Unless required by applicable law or agreed to in writing, software
  distributed under the License is distributed on an "AS IS" BASIS,
  WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
  See the License for the specific language governing permissions and
  limitations under the License.
*/
(function(){'use strict';var aa=window,ba=Object,ca=Function,da=document,ea=Math,e=Array,fa=Error,ga=parseInt;function ha(a,b){return a.exec=b}function ia(a,b){return a.getName=b}function ja(a,b){return a.remove=b}function ka(a,b){return a.forEach=b}function la(a,b){return a.values=b}function ma(a,b){return a.clear=b}function na(a,b){return a.bind=b}function f(a,b){return a.toString=b}function oa(a,b){return a.table=b}function pa(a,b){return a.dump=b}function qa(a,b){return a.next=b}
function ra(a,b){return a.close=b}function sa(a,b){return a.clone=b}function ta(a,b){return a.child=b}function ua(a,b){return a.onerror=b}function va(a,b){return a.value=b}function wa(a,b){return a.getPriority=b}function xa(a,b){return a.delete=b}function ya(a,b){return a.subscribe=b}function za(a,b){return a.name=b}function Aa(a,b){return a.length=b}function Ba(a,b){return a.onsuccess=b}function Ca(a,b){return a.update=b}
var Da="context",Ea="filter",Fa="version",Ga="getParent",Ha="shift",Ia="exec",Ja="replace",Ka="concat",La="objectStoreNames",k="getName",m="remove",Ma="orderByChild",Na="autoIncrement",n="forEach",Oa="values",Qa="clear",q="bind",Ra="getTime",Sa="continue",r="toString",Ta="global",Ua="propertyIsEnumerable",Va="create",t="table",Wa="compare",Xa="result",Ya="size",Za="index",$a="next",ab="split",bb="hasOwnProperty",cb="close",db="once",eb="setImmediate",fb="transaction",gb="child",hb="rows",u="contains",
v="apply",w="push",ib="reject",jb="reduce",kb="addAll",x="slice",y="value",lb="item",mb="objectStore",z="indexOf",nb="getPriority",ob="delete",pb="name",A="length",C="prototype",D="then",E="entries",qb="removeChild",rb="openCursor",sb="target",F="call",tb="resolve",ub="some",vb="sort",wb="every",xb="update",G="splice",H="join",yb="unshift";function zb(){return function(){}}function Ab(a){return function(b){this[a]=b}}function I(a){return function(){return this[a]}}
function Bb(a){return function(){return a}}var J,Cb=this;function Db(a){return void 0!==a}function K(a,b,c){a=a[ab](".");c=c||Cb;a[0]in c||!c.execScript||c.execScript("var "+a[0]);for(var d;a[A]&&(d=a[Ha]());)!a[A]&&Db(b)?c[d]=b:c=c[d]?c[d]:c[d]={}}function Eb(){}function Fb(a){a.qe=function(){return a.Lf?a.Lf:a.Lf=new a}}
function Gb(a){var b=typeof a;if("object"==b)if(a){if(a instanceof e)return"array";if(a instanceof ba)return b;var c=ba[C][r][F](a);if("[object Window]"==c)return"object";if("[object Array]"==c||"number"==typeof a[A]&&"undefined"!=typeof a[G]&&"undefined"!=typeof a[Ua]&&!a[Ua]("splice"))return"array";if("[object Function]"==c||"undefined"!=typeof a[F]&&"undefined"!=typeof a[Ua]&&!a[Ua]("call"))return"function"}else return"null";else if("function"==b&&"undefined"==typeof a[F])return"object";return b}
function Hb(a){return null===a}function Ib(a){return null!=a}function Jb(a){var b=Gb(a);return"array"==b||"object"==b&&"number"==typeof a[A]}function Kb(a){return"string"==typeof a}function Lb(a){return"function"==Gb(a)}function Mb(a){return a[Nb]||(a[Nb]=++Ob)}var Nb="closure_uid_"+(1E9*ea.random()>>>0),Ob=0;function Pb(a,b,c){return a[F][v](a[q],arguments)}
function Qb(a,b,c){if(!a)throw fa();if(2<arguments[A]){var d=e[C][x][F](arguments,2);return function(){var c=e[C][x][F](arguments);e[C][yb][v](c,d);return a[v](b,c)}}return function(){return a[v](b,arguments)}}function L(a,b,c){L=ca[C][q]&&-1!=ca[C][q][r]()[z]("native code")?Pb:Qb;return L[v](null,arguments)}function Rb(a,b){var c=e[C][x][F](arguments,1);return function(){var b=c[x]();b[w][v](b,arguments);return a[v](this,b)}}
function M(a,b){function c(){}c.prototype=b[C];a.eb=b[C];a.prototype=new c;a[C].constructor=a;a.Dk=function(a,c,h){for(var l=e(arguments[A]-2),p=2;p<arguments[A];p++)l[p-2]=arguments[p];return b[C][c][v](a,l)}}na(ca[C],ca[C][q]||function(a,b){if(1<arguments[A]){var c=e[C][x][F](arguments,1);c[yb](this,a);return L[v](null,c)}return L(this,a)});function Sb(a){if(fa.captureStackTrace)fa.captureStackTrace(this,Sb);else{var b=fa().stack;b&&(this.stack=b)}a&&(this.message=String(a))}M(Sb,fa);za(Sb[C],"CustomError");function Tb(a,b){for(var c=a[ab]("%s"),d="",g=e[C][x][F](arguments,1);g[A]&&1<c[A];)d+=c[Ha]()+g[Ha]();return d+c[H]("%s")};function Ub(a,b){b[yb](a);Sb[F](this,Tb[v](null,b));b[Ha]()}M(Ub,Sb);za(Ub[C],"AssertionError");function Vb(a,b,c,d){var g="Assertion failed";if(c)var g=g+(": "+c),h=d;else a&&(g+=": "+a,h=b);throw new Ub(""+g,h||[]);}function N(a,b,c){a||Vb("",null,b,e[C][x][F](arguments,2));return a}function Wb(a,b){throw new Ub("Failure"+(a?": "+a:""),e[C][x][F](arguments,1));}function Xb(a,b,c){Lb(a)||Vb("Expected function but got %s: %s.",[Gb(a),a],b,e[C][x][F](arguments,2));return a};function Yb(a,b,c){this.wj=c;this.Ph=a;this.ek=b;this.Ed=0;this.wd=null}Yb[C].get=function(){var a;0<this.Ed?(this.Ed--,a=this.wd,this.wd=a[$a],qa(a,null)):a=this.Ph();return a};Yb[C].put=function(a){this.ek(a);this.Ed<this.wj&&(this.Ed++,qa(a,this.wd),this.wd=a)};var Zb=e[C],$b=Zb[z]?function(a,b,c){N(null!=a[A]);return Zb[z][F](a,b,c)}:function(a,b,c){c=null==c?0:0>c?ea.max(0,a[A]+c):c;if(Kb(a))return Kb(b)&&1==b[A]?a[z](b,c):-1;for(;c<a[A];c++)if(c in a&&a[c]===b)return c;return-1},ac=Zb[n]?function(a,b,c){N(null!=a[A]);Zb[n][F](a,b,c)}:function(a,b,c){for(var d=a[A],g=Kb(a)?a[ab](""):a,h=0;h<d;h++)h in g&&b[F](c,g[h],h,a)},bc=Zb.map?function(a,b,c){N(null!=a[A]);return Zb.map[F](a,b,c)}:function(a,b,c){for(var d=a[A],g=e(d),h=Kb(a)?a[ab](""):a,l=0;l<d;l++)l in
h&&(g[l]=b[F](c,h[l],l,a));return g},cc=Zb[jb]?function(a,b,c,d){N(null!=a[A]);d&&(b=L(b,d));return Zb[jb][F](a,b,c)}:function(a,b,c,d){var g=c;ac(a,function(c,l){g=b[F](d,g,c,l,a)});return g},dc=Zb[ub]?function(a,b,c){N(null!=a[A]);return Zb[ub][F](a,b,c)}:function(a,b,c){for(var d=a[A],g=Kb(a)?a[ab](""):a,h=0;h<d;h++)if(h in g&&b[F](c,g[h],h,a))return!0;return!1},ec=Zb[wb]?function(a,b,c){N(null!=a[A]);return Zb[wb][F](a,b,c)}:function(a,b,c){for(var d=a[A],g=Kb(a)?a[ab](""):a,h=0;h<d;h++)if(h in
g&&!b[F](c,g[h],h,a))return!1;return!0};function fc(a,b){N(null!=a[A]);return 1==Zb[G][F](a,b,1)[A]}function gc(a,b,c){a:{for(var d=a[A],g=Kb(a)?a[ab](""):a,h=0;h<d;h++)if(h in g&&b[F](c,g[h],h,a)){b=h;break a}b=-1}return 0<=b?(fc(a,b),!0):!1}function hc(a){var b=a[A];if(0<b){for(var c=e(b),d=0;d<b;d++)c[d]=a[d];return c}return[]}function ic(a,b){for(var c=1;c<arguments[A];c++){var d=arguments[c];if(Jb(d)){var g=a[A]||0,h=d[A]||0;Aa(a,g+h);for(var l=0;l<h;l++)a[g+l]=d[l]}else a[w](d)}}
function jc(a,b,c,d){N(null!=a[A]);return Zb[G][v](a,kc(arguments,1))}function kc(a,b,c){N(null!=a[A]);return 2>=arguments[A]?Zb[x][F](a,b):Zb[x][F](a,b,c)}function lc(a,b,c,d,g){for(var h=0,l=a[A],p;h<l;){var B=h+l>>1,Pa;Pa=c?b[F](g,a[B],B,a):b(d,a[B]);0<Pa?h=B+1:(l=B,p=!Pa)}return p?h:~h}function mc(a,b){return a>b?1:a<b?-1:0}function nc(a,b,c){c=lc(a,c||mc,!1,b);return 0>c?(jc(a,-(c+1),0,b),!0):!1}function oc(a,b){for(var c=[],d=0;d<b;d++)c[d]=a;return c}
function pc(a){for(var b=[],c=0;c<arguments[A];c++){var d=arguments[c];if("array"==Gb(d))for(var g=0;g<d[A];g+=8192)for(var h=kc(d,g,g+8192),h=pc[v](null,h),l=0;l<h[A];l++)b[w](h[l]);else b[w](d)}return b};function qc(a,b,c){for(var d in a)b[F](c,a[d],d,a)}function rc(a,b,c){for(var d in a)if(b[F](c,a[d],d,a))return!0;return!1}function sc(a){var b=[],c=0,d;for(d in a)b[c++]=a[d];return b}function tc(a){var b=[],c=0,d;for(d in a)b[c++]=d;return b};var uc;a:{var vc=Cb.navigator;if(vc){var wc=vc.userAgent;if(wc){uc=wc;break a}}uc=""};function xc(a){Cb.setTimeout(function(){throw a;},0)}var yc;
function zc(){var a=Cb.MessageChannel;"undefined"===typeof a&&"undefined"!==typeof aa&&aa.postMessage&&aa.addEventListener&&-1==uc[z]("Presto")&&(a=function(){var a=da.createElement("IFRAME");a.style.display="none";a.src="";da.documentElement.appendChild(a);var b=a.contentWindow,a=b.document;a.open();a.write("");a[cb]();var c="callImmediate"+ea.random(),d="file:"==b.location.protocol?"*":b.location.protocol+"//"+b.location.host,a=L(function(a){if(("*"==d||a.origin==d)&&a.data==c)this.port1.onmessage()},
this);b.addEventListener("message",a,!1);this.port1={};this.port2={postMessage:function(){b.postMessage(c,d)}}});if("undefined"!==typeof a&&-1==uc[z]("Edge")&&-1==uc[z]("Trident")&&-1==uc[z]("MSIE")){var b=new a,c={},d=c;b.port1.onmessage=function(){if(Db(c[$a])){c=c[$a];var a=c.of;c.of=null;a()}};return function(a){qa(d,{of:a});d=d[$a];b.port2.postMessage(0)}}return"undefined"!==typeof da&&"onreadystatechange"in da.createElement("SCRIPT")?function(a){var b=da.createElement("SCRIPT");b.onreadystatechange=
function(){b.onreadystatechange=null;b.parentNode[qb](b);b=null;a();a=null};da.documentElement.appendChild(b)}:function(a){Cb.setTimeout(a,0)}};function Ac(){this.Td=this.Xb=null}var Cc=new Yb(function(){return new Bc},function(a){a.reset()},100);Ac[C].add=function(a,b){var c=this.aj();c.set(a,b);this.Td?qa(this.Td,c):(N(!this.Xb),this.Xb=c);this.Td=c};ja(Ac[C],function(){var a=null;this.Xb&&(a=this.Xb,this.Xb=this.Xb[$a],this.Xb||(this.Td=null),qa(a,null));return a});Ac[C].fk=function(a){Cc.put(a)};Ac[C].aj=function(){return Cc.get()};function Bc(){this.scope=this.le=null;qa(this,null)}
Bc[C].set=function(a,b){this.le=a;this.scope=b;qa(this,null)};Bc[C].reset=function(){this.scope=this.le=null;qa(this,null)};function Dc(a,b){Ec||Fc();Gc||(Ec(),Gc=!0);Hc.add(a,b)}var Ec;function Fc(){if(Cb.Promise&&Cb.Promise[tb]){var a=Cb.Promise[tb]();Ec=function(){a[D](Ic)}}else Ec=function(){var a=Ic;if(!Lb(Cb[eb])||Cb.Window&&Cb.Window[C]&&Cb.Window[C][eb]==Cb[eb])yc||(yc=zc()),yc(a);else Cb[eb](a)}}var Gc=!1,Hc=new Ac;[][w](function(){Gc=!1;Hc=new Ac});function Ic(){for(var a=null;a=Hc[m]();){try{a.le[F](a.scope)}catch(b){xc(b)}Hc.fk(a)}Gc=!1};function O(a,b){this.ya=0;this.qg=void 0;this.$c=this.ac=this.F=null;this.vd=this.ke=!1;if(a==Jc)this.oc(2,b);else try{var c=this;a[F](b,function(a){c.oc(2,a)},function(a){if(!(a instanceof Kc))try{if(a instanceof fa)throw a;throw fa("Promise rejected.");}catch(b){}c.oc(3,a)})}catch(d){this.oc(3,d)}}function Lc(){ta(this,null);this.context=this.mc=this.Mb=null;qa(this,null);this.Xd=!1}Lc[C].reset=function(){ta(this,null);this.context=this.mc=this.Mb=null;this.Xd=!1};
var Mc=new Yb(function(){return new Lc},function(a){a.reset()},100);function Nc(a,b,c){var d=Mc.get();d.Mb=a;d.mc=b;d.context=c;return d}function Jc(){}function Oc(a){return a instanceof O?a:new O(Jc,a)}function Pc(a){return new O(function(b,c){c(a)})}function Qc(a){return new O(function(b,c){var d=a[A],g=[];if(d)for(var h=function(a,c){d--;g[a]=c;0==d&&b(g)},l=function(a){c(a)},p=0,B;B=a[p];p++)Rc(B,Rb(h,p),l);else b(g)})}
function Sc(){var a,b,c=new O(function(c,g){a=c;b=g});return new Tc(c,a,b)}O[C].then=function(a,b,c){null!=a&&Xb(a,"opt_onFulfilled should be a function.");null!=b&&Xb(b,"opt_onRejected should be a function. Did you pass opt_context as the second argument instead of the third?");return this.cf(Lb(a)?a:null,Lb(b)?b:null,c)};O[C].then=O[C][D];O[C].$goog_Thenable=!0;J=O[C];
J.tk=function(a,b,c){null!=a&&Xb(a,"opt_onFulfilled should be a function.");null!=b&&Xb(b,"opt_onRejected should be a function. Did you pass opt_context as the second argument instead of the third?");this.bf(Nc(a||Eb,b||null,c))};function Rc(a,b,c,d){a instanceof O?a.tk(b,c,d):a[D](b,c,d)}J.Eg=function(a,b){return this.cf(null,a,b)};J.bf=function(a){this.kj()||2!=this.ya&&3!=this.ya||this.tg();this.Wj(a)};
J.cf=function(a,b,c){var d=Nc(null,null,null);ta(d,new O(function(g,h){d.Mb=a?function(b){try{var d=a[F](c,b);g(d)}catch(B){h(B)}}:g;d.mc=b?function(a){try{var d=b[F](c,a);!Db(d)&&a instanceof Kc?h(a):g(d)}catch(B){h(B)}}:h}));d[gb].F=this;this.bf(d);return d[gb]};J.Jg=function(a){N(1==this.ya);this.ya=0;this.oc(2,a)};J.Kg=function(a){N(1==this.ya);this.ya=0;this.oc(3,a)};
J.oc=function(a,b){if(0==this.ya){if(this==b)a=3,b=new TypeError("Promise cannot resolve to itself");else{var c;if(b)try{c=!!b.$goog_Thenable}catch(d){c=!1}else c=!1;if(c){this.ya=1;Rc(b,this.Jg,this.Kg,this);return}c=typeof b;if("object"==c&&null!=b||"function"==c)try{var g=b[D];if(Lb(g)){this.wk(b,g);return}}catch(h){a=3,b=h}}this.qg=b;this.ya=a;this.F=null;this.tg();3!=a||b instanceof Kc||Uc(this,b)}};
J.wk=function(a,b){function c(a){h||(h=!0,g.Kg(a))}function d(a){h||(h=!0,g.Jg(a))}this.ya=1;var g=this,h=!1;try{b[F](a,d,c)}catch(l){c(l)}};J.tg=function(){this.ke||(this.ke=!0,Dc(this.ji,this))};J.kj=function(){return!!this.ac};J.Wj=function(a){N(null!=a.Mb);this.$c?qa(this.$c,a):this.ac=a;this.$c=a};J.Pj=function(){var a=null;this.ac&&(a=this.ac,this.ac=a[$a],qa(a,null));this.ac||(this.$c=null);null!=a&&N(null!=a.Mb);return a};
J.ji=function(){for(var a=null;a=this.Pj();)this.ii(a,this.ya,this.qg);this.ke=!1};J.ii=function(a,b,c){3==b&&a.mc&&!a.Xd&&this.ck();if(a[gb])a[gb].F=null,Vc(a,b,c);else try{a.Xd?a.Mb[F](a[Da]):Vc(a,b,c)}catch(d){Wc[F](null,d)}Mc.put(a)};function Vc(a,b,c){2==b?a.Mb[F](a[Da],c):a.mc&&a.mc[F](a[Da],c)}J.Yg=zb();J.ck=function(){var a;for(a=this;a&&a.vd;a=a.F)a.vd=!1};function Uc(a,b){a.vd=!0;Dc(function(){a.vd&&(a.Yg(b),Wc[F](null,b))})}var Wc=xc;function Kc(a){Sb[F](this,a)}M(Kc,Sb);za(Kc[C],"cancel");
function Tc(a,b,c){this.ga=a;this.resolve=b;this.reject=c};
function Xc(a,b){this.va=a;this.Ob=b||this.tf()}var Yc=0;J=Xc[C];J.id=I("va");J.gh=Ab("va");J.w=I("Ob");J.tf=function(){return{}};J.Fg=I("Ob");J.Fa=function(){return{id:this.va,value:this.Fg()}};J.Lc=function(a){return"#"==a.substr(-1)?this.va:null};function Zc(a){return new Xc(a.id,a[y])}function $c(a){return new Xc(Yc++,a||{})}function ad(a){if(null==a)return"";a=new Uint8Array(a);for(var b="",c=0;c<a[A];++c)var d=a[c][r](16),b=b+(2>d[A]?"0"+d:d);return b};
function bd(a){this.type=a}function cd(a){Xc[F](this,-1,a)}M(cd,Xc);
var dd={};K("lf.TransactionType",dd,void 0);dd.READ_ONLY=0;dd.READ_WRITE=1;

function ed(a,b){this.Ya=a;this.Gg=b;this.ba=Sc()}J=ed[C];J.Ni=I("Ya");J.U=function(){return(0==this.Gg?Oc():this.Bj())[D](L(function(){this.Ya.U()},this))};J.Bj=function(){this.Cj();this.Aj();return this.ba.ga};J.Cj=function(){var a=this.Ya.Af();a.G()[n](function(b){var c=this.Ya.ca().get(b),c=this.Y(c[k](),L(c.dc,c));b=a.get(b);var d=b.md().c().map(function(a){return a.id()});0<d[A]&&c[m](d).Eg(this.ye,this);b=b.rd().c().map(function(a){return a[1]})[Ka](b.ld().c());c.put(b).Eg(this.ye,this)},this)};
J.Aj=function(){this.Ya.Ki()[n](function(a){var b=this.Y(a[k](),Zc),c;b.get([-1])[D](function(a){c=a;return b[m]([])})[D](function(){b.put(c);b.put(a.Fa())},L(this.ye,this))},this)};J.ye=function(a){this.ba[ib](a)};function fd(a,b,c,d){c=c||function(a,b){return a==b};d=d||function(b){return a[b]};for(var g=a[A],h=b[A],l=[],p=0;p<g+1;p++)l[p]=[],l[p][0]=0;for(var B=0;B<h+1;B++)l[0][B]=0;for(p=1;p<=g;p++)for(B=1;B<=h;B++)c(a[p-1],b[B-1])?l[p][B]=l[p-1][B-1]+1:l[p][B]=ea.max(l[p-1][B],l[p][B-1]);for(var Pa=[],p=g,B=h;0<p&&0<B;)c(a[p-1],b[B-1])?(Pa[yb](d(p-1,B-1)),p--,B--):l[p-1][B]>l[p][B-1]?p--:B--;return Pa}function gd(a){return cc(arguments,function(a,c){return a+c},0)}
function hd(a){return gd[v](null,arguments)/arguments[A]}function id(a){var b=arguments[A];if(2>b)return 0;var c=hd[v](null,arguments);return gd[v](null,bc(arguments,function(a){return ea.pow(a-c,2)}))/(b-1)}function jd(a){return ea.sqrt(id[v](null,arguments))};var kd="StopIteration"in Cb?Cb.StopIteration:{message:"StopIteration",stack:""};function ld(){}qa(ld[C],function(){throw kd;});ld[C].sc=function(){return this};function md(a){if(a instanceof ld)return a;if("function"==typeof a.sc)return a.sc(!1);if(Jb(a)){var b=0,c=new ld;qa(c,function(){for(;;){if(b>=a[A])throw kd;if(b in a)return a[b++];b++}});return c}throw fa("Not implemented");}
function nd(a,b,c){if(Jb(a))try{ac(a,b,c)}catch(d){if(d!==kd)throw d;}else{a=md(a);try{for(;;)b[F](c,a[$a](),void 0,a)}catch(g){if(g!==kd)throw g;}}}function od(a){if(dc(arguments,function(a){return!a[A]})||!arguments[A])return new ld;var b=new ld,c=arguments,d=oc(0,c[A]);qa(b,function(){if(d){for(var a=bc(d,function(a,b){return c[b][a]}),b=d[A]-1;0<=b;b--){N(d);if(d[b]<c[b][A]-1){d[b]++;break}if(0==b){d=null;break}d[b]=0}return a}throw kd;});return b};function P(a,b){this.g={};this.b=[];this.La=this.Z=0;var c=arguments[A];if(1<c){if(c%2)throw fa("Uneven number of arguments");for(var d=0;d<c;d+=2)this.set(arguments[d],arguments[d+1])}else a&&this[kb](a)}J=P[C];J.na=I("Z");J.c=function(){this.yc();for(var a=[],b=0;b<this.b[A];b++)a[w](this.g[this.b[b]]);return a};J.G=function(){this.yc();return this.b[Ka]()};J.s=function(a){return pd(this.g,a)};J.ed=function(a){for(var b=0;b<this.b[A];b++){var c=this.b[b];if(pd(this.g,c)&&this.g[c]==a)return!0}return!1};
J.Cc=function(a,b){if(this===a)return!0;if(this.Z!=a.na())return!1;var c=b||qd;this.yc();for(var d,g=0;d=this.b[g];g++)if(!c(this.get(d),a.get(d)))return!1;return!0};function qd(a,b){return a===b}J.Ha=function(){return 0==this.Z};ma(J,function(){this.g={};Aa(this.b,0);this.La=this.Z=0});ja(J,function(a){return pd(this.g,a)?(delete this.g[a],this.Z--,this.La++,this.b[A]>2*this.Z&&this.yc(),!0):!1});
J.yc=function(){if(this.Z!=this.b[A]){for(var a=0,b=0;a<this.b[A];){var c=this.b[a];pd(this.g,c)&&(this.b[b++]=c);a++}Aa(this.b,b)}if(this.Z!=this.b[A]){for(var d={},b=a=0;a<this.b[A];)c=this.b[a],pd(d,c)||(this.b[b++]=c,d[c]=1),a++;Aa(this.b,b)}};J.get=function(a,b){return pd(this.g,a)?this.g[a]:b};J.set=function(a,b){pd(this.g,a)||(this.Z++,this.b[w](a),this.La++);this.g[a]=b};J.addAll=function(a){var b;a instanceof P?(b=a.G(),a=a.c()):(b=tc(a),a=sc(a));for(var c=0;c<b[A];c++)this.set(b[c],a[c])};
ka(J,function(a,b){for(var c=this.G(),d=0;d<c[A];d++){var g=c[d],h=this.get(g);a[F](b,h,g,this)}});sa(J,function(){return new P(this)});J.sc=function(a){this.yc();var b=0,c=this.La,d=this,g=new ld;qa(g,function(){if(c!=d.La)throw fa("The map has changed since the iterator was created");if(b>=d.b[A])throw kd;var g=d.b[b++];return a?g:d.g[g]});return g};function pd(a,b){return ba[C][bb][F](a,b)};
function rd(a){this.gk=a}f(rd[C],I("gk"));var sd=new rd("backstore"),td=new rd("cache"),ud=new rd("indexstore"),vd=new rd("engine"),wd=new rd("runner"),xd=new rd("observerregistry"),yd=new rd("schema");
function zd(a){if("function"==typeof a.na)a=a.na();else if(Jb(a)||Kb(a))a=a[A];else{var b=0,c;for(c in a)b++;a=b}return a}function Ad(a){if("function"==typeof a.c)return a.c();if(Kb(a))return a[ab]("");if(Jb(a)){for(var b=[],c=a[A],d=0;d<c;d++)b[w](a[d]);return b}return sc(a)}
function Bd(a,b,c){if("function"==typeof a[wb])return a[wb](b,c);if(Jb(a)||Kb(a))return ec(a,b,c);var d;if("function"==typeof a.G)d=a.G();else if("function"!=typeof a.c)if(Jb(a)||Kb(a)){d=[];for(var g=a[A],h=0;h<g;h++)d[w](h)}else d=tc(a);else d=void 0;for(var g=Ad(a),h=g[A],l=0;l<h;l++)if(!b[F](c,g[l],d&&d[l],a))return!1;return!0};function Q(a){this.g=new P;a&&this[kb](a)}function Cd(a){var b=typeof a;return"object"==b&&a||"function"==b?"o"+Mb(a):b.substr(0,1)+a}J=Q[C];J.na=function(){return this.g.na()};J.add=function(a){this.g.set(Cd(a),a)};J.addAll=function(a){a=Ad(a);for(var b=a[A],c=0;c<b;c++)this.add(a[c])};ja(J,function(a){return this.g[m](Cd(a))});ma(J,function(){this.g[Qa]()});J.Ha=function(){return this.g.Ha()};J.contains=function(a){return this.g.s(Cd(a))};J.Ih=function(a){return Bd(a,this[u],this)};J.c=function(){return this.g.c()};
sa(J,function(){return new Q(this)});J.Cc=function(a){return this.na()==zd(a)&&this.tj(a)};J.tj=function(a){var b=zd(a);if(this.na()>b)return!1;!(a instanceof Q)&&5<b&&(a=new Q(a));return Bd(this,function(b){var d=a;if("function"==typeof d[u])b=d[u](b);else if("function"==typeof d.ed)b=d.ed(b);else if(Jb(d)||Kb(d))b=0<=$b(d,b);else a:{for(var g in d)if(d[g]==b){b=!0;break a}b=!1}return b})};J.sc=function(){return this.g.sc(!1)};
function Dd(a,b){this.va=a;this.Ob=b||{}}function Ed(a){var b=new Q;a[n](function(a){b.add(a>>9)});return b.c()}J=Dd[C];J.ka=I("va");J.jc=I("Ob");J.xg=function(a){a[n](function(a){this.Ob[a.id()]=a.Fa()},this)};J.bk=function(a){a[n](function(a){var c=this.Ob;a in c&&delete c[a]},this)};J.Fa=function(){return{id:this.va,value:JSON.stringify(this.Ob)}};function Fd(a){return new Dd(a.id,JSON.parse(a[y]))};

function Gd(a,b,c){this.O=a;this.Fb=b;this.rg=c}J=Gd[C];J.get=function(a){return 0==a[A]?this.oe():this.Ri(a)[D](L(function(b){return a.map(function(a){var d=b.get(a>>9);N(d,"Containing page is empty");return this.Fb(d.jc()[a])},this)},this))};J.Ri=function(a){var b=new P,c=Sc();a=Ed(a).map(function(a){return new O(function(c,h){var l;try{l=this.O.get(a)}catch(p){h(p);return}ua(l,h);Ba(l,L(function(a){a=Fd(a[sb][Xa]);b.set(a.ka(),a);c()},this))},this)},this);Qc(a)[D](function(){c[tb](b)});return c.ga};
J.oe=function(){return new O(function(a,b){var c=[],d;try{d=this.O[rb]()}catch(g){b(g);return}ua(d,b);Ba(d,L(function(){var b=d[Xa];if(b){var g=Fd(b[y]).jc(),p;for(p in g)c[w](this.Fb(g[p]));b[Sa]()}else a(c)},this))},this)};J.Pb=function(a){return new O(function(b,c){var d;try{d=a()}catch(g){c(g);return}Ba(d,b);ua(d,c)},this)};
J.put=function(a){if(0==a[A])return Oc();var b=new P;a[n](function(a){var d;d=a.id()>>9;var g=b.get(d,null);null===g&&(g=this.rg(this.O[pb],d));g.xg([a]);b.set(d,g)},this);a=b.c().map(function(a){return this.Pb(L(function(){return this.O.put(a.Fa())},this))},this);return Qc(a)};
ja(J,function(a){if(0==a[A])return this.Pb(L(function(){return this.O[Qa]()},this));var b=new P;a[n](function(a){var d=a>>9,g=b.get(d,null);null===g&&(g=this.rg(this.O[pb],d));g.bk([a]);b.set(d,g)},this);a=b.c().map(function(a){return this.Pb(L(function(){var b;a:{b=a.jc();for(var g in b){b=!1;break a}b=!0}return b?this.O[ob](a.ka()):this.O.put(a.Fa())},this))},this);return Qc(a)});function Hd(a,b,c){a=a.o(td);var d=[c<<9,(c+1<<9)-1];b=a.Va(b,d[0],d[1]);c=new Dd(c);c.xg(b);return c}
function Id(a,b){return new Dd(b)};
function Jd(){};
function Kd(a){this.pa=a.o(td);this.N=a.o(ud);this.A=a.o(yd)}Ca(Kd[C],function(a){a[n](function(a){this.zk(a);this.xk(a)},this)});Kd[C].xk=function(a){var b=a[k]();a.md().c()[n](function(a){this.pa[m](b,[a.id()])},this);a.ld()[n](function(a){this.pa.set(b,[a])},this);a.rd()[n](function(a){this.pa.set(b,[a[1]])},this)};Kd[C].zk=function(a){var b=this.A[t](a[k]());a.Ii()[n](function(a){this.Ng(b,a)},this)};
Kd[C].Ng=function(a,b){a.Ga().map(function(a){return this.N.get(a.l())},this)[Ka]([this.N.get(a.Hb())])[n](function(a){var d=null===b[1]?null:b[1].Lc(a[k]()),g=null===b[0]?null:b[0].Lc(a[k]());null===g&&null!==d?a.add(d,b[1].id()):null===g||null===d?null!==g&&null===d&&a[m](g,b[0].id()):0!=a.Ac()[Wa](g,d)&&(a.add(d,b[1].id()),a[m](g,b[0].id()))})};
function R(a,b){za(this,a);this.message=b};
function Ld(a){this.N=a.o(ud)}Ld[C].ri=function(a,b){var c=a.ic().te();return null===c?null:this.pi(c,b)};Ld[C].pi=function(a,b){var c=a.l(),d=b.Lc(c),c=this.N.get(c).get(d);return 0==c[A]?null:c[0]};Ld[C].ce=function(a,b){var c=a.ic().Pi();b[n](function(a){c[n](function(b){if(null===a.w()[b[k]()])throw new R("ConstraintError","Attempted to insert NULL value to non-nullable field "+b.l());},this)},this)};
function Md(a){this.hb=new P;this.Ia=new P;this.kb=new P;this.B=a}J=Md[C];ia(J,I("B"));J.ld=I("hb");J.rd=I("Ia");J.md=I("kb");J.add=function(a){if(this.kb.s(a.id())){var b=[this.kb.get(a.id()),a];this.Ia.set(a.id(),b);this.kb[m](a.id())}else this.hb.set(a.id(),a)};J.modify=function(a){var b=a[0],c=a[1];N(b.id()==c.id(),"Row ID mismatch between old/new values.");b=b.id();this.hb.s(b)?this.hb.set(b,c):(this.Ia.s(b)&&(a=[this.Ia.get(a[0].id())[0],c]),this.Ia.set(b,a))};
xa(J,function(a){if(this.hb.s(a.id()))this.hb[m](a.id());else if(this.Ia.s(a.id())){var b=this.Ia.get(a.id())[0];this.Ia[m](a.id());this.kb.set(a.id(),b)}else this.kb.set(a.id(),a)});J.Ii=function(){var a=[];this.hb.c()[n](function(b){a[w]([null,b])},this);this.Ia.c()[n](function(b){a[w](b)},this);this.kb.c()[n](function(b){a[w]([b,null])},this);return a};f(J,function(){return"["+this.hb.G()[r]()+"], ["+this.Ia.G()[r]()+"], ["+this.kb.G()[r]()+"]"});
J.Vi=function(){var a=new Md(this.B);this.hb.c()[n](function(b){a[ob](b)},this);this.kb.c()[n](function(b){a.add(b)},this);this.Ia.c()[n](function(b){a.modify([b[1],b[0]])},this);return a};J.Ha=function(){return this.hb.Ha()&&this.kb.Ha()&&this.Ia.Ha()};
function Nd(a,b){this.Ra=new P;b[n](function(a){this.Ra.set(a[k](),a)},this);this.pa=a.o(td);this.N=a.o(ud);this.dd=new Ld(a);this.xd=new Kd(a);this.Me=this.Pd=!1;this.Bb=new P}J=Nd[C];J.Af=I("Bb");J.Ki=function(){var a=[];this.Bb.G().map(function(a){return this.Ra.get(a)},this)[n](function(b){b.Qb()&&(b.Ga()[n](function(b){a[w](this.N.get(b.l()))},this),a[w](this.N.get(b[k]()+".#")))},this);return a};J.ca=I("Ra");
J.Li=function(){var a=[];this.Ra.c()[n](function(b){b.Qb()&&(b.Ga()[n](function(b){a[w](b.l())}),a[w](b[k]()+".#"))});return a};J.rb=function(a,b){this.wc();this.ad(a);this.dd.ce(a,b);for(var c=0;c<b[A];c++)this.zd(a,null,b[c])};
J.zd=function(a,b,c){var d=a[k](),g=this.Bb.get(d,null)||new Md(d);this.Bb.set(d,g);var h=[b,c];try{this.xd.Ng(a,h)}catch(l){throw this.Me=!0,l;}null===b&&null!==c?(this.pa.set(d,[c]),g.add(c)):null!==b&&null!==c?(this.pa.set(d,[c]),g.modify(h)):null!==b&&null===c&&(this.pa[m](d,[b.id()]),g[ob](b))};Ca(J,function(a,b){this.wc();this.ad(a);this.dd.ce(a,b);for(var c=0;c<b[A];c++){var d=b[c],g=this.pa.get([d.id()])[0];this.zd(a,g,d)}});
J.Be=function(a,b){this.wc();this.ad(a);this.dd.ce(a,b);for(var c=0;c<b[A];c++){var d=b[c],g=null,h=this.dd.ri(a,d);null!=h&&(g=this.pa.get([h])[0],d.gh(h));this.zd(a,g,d)}};ja(J,function(a,b){this.wc();this.ad(a);for(var c=0;c<b[A];c++)this.zd(a,b[c],null)});J.U=function(){this.wc();this.Pd=!0};J.wc=function(){N(!this.Me,"Attemptted to use journal that needs to be rolled back.");N(!this.Pd,"Attemptted to commit a terminated journal.")};
J.zb=function(){N(!this.Pd,"Attempted to rollback a terminated journal.");var a=this.Bb.c().map(function(a){return a.Vi()},this);this.xd[xb](a);this.Pd=!0;this.Me=!1};J.ad=function(a){if(!this.Ra.s(a[k]()))throw new R("ScopeError",a[k]()+" is not in the journal's scope.");};
var Od={};K("lf.Order",Od,void 0);Od.DESC=0;Od.ASC=1;
function Pd(a,b,c,d){this.f=a;this.u=b;this.$=null===this.f?!1:c;this.fa=null===this.u?!1:d}J=Pd[C];f(J,function(){return(this.$?"(":"[")+(null===this.f?"unbound":this.f)+", "+(null===this.u?"unbound":this.u)+(this.fa?")":"]")});J.Eh=function(){if(null===this.f&&null===this.u)return[];var a=null,b=null;null===this.f||(a=new Pd(null,this.f,!1,!this.$));null===this.u||(b=new Pd(this.u,null,!this.fa,!1));return[a,b][Ea](function(a){return null!==a})};
J.reverse=function(){return new Pd(this.u,this.f,this.fa,this.$)};J.fg=function(a){var b=Qd(this.f,a.f,!0,this.$,a.$);if(0==b)return!0;var c=-1==b?this:a;a=1==b?this:a;return null===c.u||c.u>a.f||c.u==a.f&&!c.fa&&!a.$};function Rd(){return new Pd(null,null,!1,!1)}J.contains=function(a){var b=null===this.u||a<this.u||a==this.u&&!this.fa;return(null===this.f||a>this.f||a==this.f&&!this.$)&&b};J.Cc=function(a){return this.f==a.f&&this.$==a.$&&this.u==a.u&&this.fa==a.fa};
function Qd(a,b,c,d,g){function h(a){return c?a:1==a?-1:1}d=d||!1;g=g||!1;return null===a?null===b?(d?!g:g)?d?h(1):h(-1):0:h(-1):null===b?h(1):a<b?-1:a==b?(d?!g:g)?d?h(1):h(-1):0:1}function Sd(a,b){var c=Qd(a.f,b.f,!0,a.$,b.$);0==c&&(c=Qd(a.u,b.u,!1,a.fa,b.fa));return c};
function Td(a,b){this.entries=a;this.I=new Q(b);this.Cb=null}J=Td[C];J.qj=function(a){return this.I.Cc(a.I)};function Ud(a,b){N(a.qj(b),"Intersection/union operations only apply to compatible relations.")}J.W=function(){return this.I.c()};J.De=function(){return 1<this.I.na()};J.re=function(){return this[E].map(function(a){return a.ta.w()})};J.Xi=function(){return this[E].map(function(a){return a.ta.id()})};J.hk=function(a,b){null===this.Cb&&(this.Cb=new P);this.Cb.set(a.l(),b)};
J.hc=function(a){N(null!==this.Cb,"getAggregationResult called before any results have been calculated.");var b=this.Cb.get(a.l(),void 0);N(Db(b),"Could not find result for "+a.l());return b};J.ij=function(a){return null!==this.Cb&&this.Cb.s(a.l())};var Vd=null;function Wd(){null===Vd&&(Vd=new Td([],[]));return Vd}
function Xd(a){if(0==a[A])return Wd();for(var b=a[jb](function(b,c){Ud(a[0],c);return b+c[E][A]},0),c=e(b),d=0,b=a.map(function(a){var b=new P;a[E][n](function(a){c[d++]=a;b.set(a.id,a)});return b}),g=new P,h=0;h<c[A];h++)b[wb](function(a){return a.s(c[h].id)})&&g.set(c[h].id,c[h]);return new Td(g.c(),a[0].I.c())}function Yd(a){if(0==a[A])return Wd();var b=new P;a[n](function(c){Ud(a[0],c);c[E][n](function(a){b.set(a.id,a)})});return new Td(b.c(),a[0].I.c())}
function Zd(a,b){var c=1<b[A],d=a.map(function(a){return new $d(a,c)});return new Td(d,b)}function $d(a,b){this.ta=a;this.id=ae++;this.Ee=b}var ae=0;$d[C].M=function(a){var b=a.Ua();return null!==b&&this.ta.w()[bb](b)?this.ta.w()[b]:this.Ee?this.ta.w()[a.Y().Aa()][a[k]()]:this.ta.w()[a[k]()]};$d[C].Ue=function(a,b){var c=a.Ua();if(null!=c)this.ta.w()[c]=b;else if(this.Ee){var c=a.Y().Aa(),d=this.ta.w()[c];null==d&&(d={},this.ta.w()[c]=d);d[a[k]()]=b}else this.ta.w()[a[k]()]=b};
function be(a,b,c,d){function g(a,b){if(a.Ee){var c=a.ta.w(),d;for(d in c)h[d]=c[d]}else N(!h[bb](b[0]),"Attempted to join table with itself, without using table alias, or same alias "+b[0]+"is reused for multiple tables."),h[b[0]]=a.ta.w()}var h={};g(a,b);g(c,d);a=new Xc(-1,h);return new $d(a,!0)};
K("lf.bind",function(a){return new ce(a)},void 0);function ce(a){this.wa=a}K("lf.Binder",ce,void 0);ce[C].pb=I("wa");
var de={};K("lf.Type",de,void 0);de.ARRAY_BUFFER=0;de.BOOLEAN=1;de.DATE_TIME=2;de.INTEGER=3;de.NUMBER=4;de.STRING=5;de.OBJECT=6;var ee={0:new ArrayBuffer(0),1:!1,2:ba.freeze(new Date(0)),3:0,4:0,5:"",6:ba.freeze({})};K("lf.type.DEFAULT_VALUES",ee,void 0);
function fe(){var a=ge();this.ai=new P(1,he(),2,ie(),4,a,3,a,5,je())}Fb(fe);fe[C].pe=function(a,b){var c=this.ai.get(a,null);N(null!==c,"Could not find evaluation map for "+a);c=c.get(b,null);N(null!==c,"Could not find evaluator for "+a+", "+b);return c};
function ge(){return new P("between",function(a,b){return a>=b[0]&&a<=b[1]},"eq",function(a,b){return a==b},"gte",function(a,b){return a>=b},"gt",function(a,b){return a>b},"in",function(a,b){return-1!=b[z](a)},"lte",function(a,b){return a<=b},"lt",function(a,b){return a<b},"neq",function(a,b){return a!=b})}
function je(){return new P("between",function(a,b){return a>=b[0]&&a<=b[1]},"eq",function(a,b){return a==b},"gte",function(a,b){return a>=b},"gt",function(a,b){return a>b},"in",function(a,b){return-1!=b[z](a)},"lte",function(a,b){return a<=b},"lt",function(a,b){return a<b},"match",function(a,b){return(new RegExp(b)).test(a)},"neq",function(a,b){return a!=b})}
function ie(){return new P("between",function(a,b){return a[Ra]()>=b[0][Ra]()&&a[Ra]()<=b[1][Ra]()},"eq",function(a,b){return(null===a?-1:a[Ra]())==(null===b?-1:b[Ra]())},"gte",function(a,b){return a[Ra]()>=b[Ra]()},"gt",function(a,b){return a[Ra]()>b[Ra]()},"in",function(a,b){return b[ub](function(b){return b[Ra]()==a[Ra]()})},"lte",function(a,b){return a[Ra]()<=b[Ra]()},"lt",function(a,b){return a[Ra]()<b[Ra]()},"neq",function(a,b){return(null===a?-1:a[Ra]())!=(null===b?-1:b[Ra]())})}
function he(){return new P("eq",function(a,b){return a==b},"neq",function(a,b){return a!=b})};function ke(a,b){this.Uf=a;this.Og=b}ke[C].getKey=I("Uf");ke[C].bj=I("Og");sa(ke[C],function(){return new ke(this.Uf,this.Og)});function le(a,b){ke[F](this,a,b);this.i=this.F=null}M(le,ke);var me=[];J=le[C];sa(J,function(){return new le(this.getKey(),this.bj())});J.getParent=I("F");J.Of=function(){return!this.ua()};J.aa=function(){return this.i||me};J.ob=function(a){return this.aa()[a]||null};J.ua=function(){return this.aa()[A]};J.Ji=function(){for(var a=0,b=this;b[Ga]();)a++,b=b[Ga]();return a};J.Gb=function(){for(var a=this;a[Ga]();)a=a[Ga]();return a};J.contains=function(a){do a=a[Ga]();while(a&&a!=this);return Boolean(a)};
J.qc=function(a,b){if(!1!==a[F](b,this))for(var c=this.aa(),d=0;d<c[A];d++)c[d].qc(a,b)};J.vg=Ab("F");J.ia=function(a){this.tc(a,this.i?this.i[A]:0)};J.tc=function(a,b){N(!a[Ga]());a.vg(this);this.i=this.i||[];N(0<=b&&b<=this.i[A]);jc(this.i,b,0,a)};J.Ld=function(a){var b=this.i&&this.i[a];return b?(b.vg(null),fc(this.i,a),0==this.i[A]&&(this.i=null),b):null};J.removeChild=function(a){return this.Ld($b(this.aa(),a))};

function ne(){le[F](this,"","");this.va=oe++}M(ne,le);var oe=0;ne[C].ka=I("va");ne[C].Ve=Ab("va");
function pe(a,b,c){ne[F](this);this.K=a;va(this,b);this.V=c;this.hd=fe.qe().pe(this.K.da(),this.V);this.Xa=!1;this.$b=b}M(pe,ne);J=pe[C];J.Db=function(){var a=new pe(this.K,this[y],this.V);a.ik(this.$b);a.Od(this.Xa);a.Ve(this.ka());return a};J.wb=function(a){return null!=a?(a[w](this.K),a):[this.K]};J.Od=Ab("Xa");J.ik=Ab("$b");
J.pf=function(){var a=!1;this[y]instanceof ce||(a="array"==Gb(this[y])?!this[y][ub](function(a){return a instanceof ce}):!0);if(!a)throw new R("SyntaxError","Value is not bounded");};J.eval=function(a){this.pf();if("in"==this.V)return this.Wh(a);var b=a[E][Ea](function(a){return this.hd(a.M(this.K),this[y])!=this.Xa},this);return new Td(b,a.W())};
na(J,function(a){function b(b){if(a[A]<=b)throw new R("SyntaxError","Cannot bind to given array: out of range.");}if(this.$b instanceof ce){var c=this.$b.pb();b(c);va(this,a[c])}else"array"==Gb(this.$b)&&va(this,this.$b.map(function(c){return c instanceof ce?(b(c.pb()),a[c.pb()]):c}))});
J.Wh=function(a){N("in"==this.V,"ValuePredicate#evalAsIn_() called for wrong predicate type.");var b=new Q(this[y]),c=L(function(a){return b[u](a)!=this.Xa},this),d=a[E][Ea](function(a){return c(a.M(this.K))},this);return new Td(d,a.W())};f(J,function(){return"value_pred("+this.K.l()+" "+this.V+(this.Xa?"(complement)":"")+" "+this[y]+")"});J.Nf=function(){this.pf();return null!==this[y]&&("between"==this.V||"eq"==this.V||"gt"==this.V||"gte"==this.V||"lt"==this.V||"lte"==this.V)};
J.uk=function(){N(this.Nf(),"Could not convert predicate to key range.");var a=null;"between"==this.V?a=new Pd(this[y][0],this[y][1],!1,!1):"eq"==this.V?(a=this[y],a=new Pd(a,a,!1,!1)):a="gte"==this.V?new Pd(this[y],null,!1,!1):"gt"==this.V?new Pd(this[y],null,!0,!1):"lte"==this.V?new Pd(null,this[y],!1,!1):new Pd(null,this[y],!1,!0);return this.Xa?a.Eh():[a]};
function qe(){this.zc=this.ra=null}qe[C].td=function(a){null===this.ra&&null!=this.C&&(this.ra=re(this.C));a=this.ra.get(a,null);N(null!==a);return a};function re(a){var b=new P;a.qc(function(a){b.set(a.ka(),a)});return b}qe[C].bd=function(a){a.C&&(this.C=a.C.Db());this.zc=a};na(qe[C],function(){N(null==this.zc);return this});qe[C].$d=function(a){var b=this.C;null!=b&&b.qc(function(b){b instanceof pe&&b[q](a)})};
function se(){qe[F](this)}M(se,qe);function te(a){var b="";a[n](function(c,d){b+=c.K.l()+" ";b+=1==c.sb?"ASC":"DESC";d<a[A]-1&&(b+=", ")});return b}sa(se[C],function(){var a=new se;a.bd(this);this.h&&(a.h=this.h[x]());this.f&&(a.f=this.f[x]());a.oa=this.oa;a.ma=this.ma;this.J&&(a.J=this.J[x]());this.la&&(a.la=this.la[x]());this.Lb&&(a.Lb=this.Lb);this.Wb&&(a.Wb=this.Wb);return a});
na(se[C],function(a){se.eb[q][F](this,a);null!=this.Lb&&(this.oa=a[this.Lb.pb()]);null!=this.Wb&&(this.ma=a[this.Wb.pb()]);this.$d(a);return this});
function ue(a){this.Ea=a}ue[C].Gb=I("Ea");ue[C].wf=Bb("plan description");ue[C].ca=function(){function a(c){var d=c.ca();d&&b.add(d);c.aa()[n](function(b){a(b)})}var b=new Q;a(this.Ea);return b.c()};function ve(a){var b=new Q;a[n](function(a){b[kb](a.ca())});return b};

function we(a,b){this.global=a;this.vb=a.o(sd);this.Id=b.map(function(a){return a[Da]});this.hg=b.map(function(a){return a.Ne});this.qf=ve(this.hg);this.Hg=this.Sh();this.Sb=Sc()}J=we[C];J.Sh=function(){return this.Id[ub](function(a){return!(a instanceof se)})?1:0};
ha(J,function(){var a=new Nd(this[Ta],this.qf.c()),b=[],c=this.hg[x](),d=L(function(){var g=c[Ha]();if(g){var h=this.Id[b[A]];return g.Gb()[Ia](a,h)[D](function(a){b[w](a[0]);return d()})}return Oc()},this);return d()[D](L(function(){return this.vb.Eb(this.Hg,a).U()},this))[D](L(function(){this.Ke(b);return b},this),L(function(b){a.zb();throw b;},this))});J.da=I("Hg");J.ca=I("qf");J.Gc=I("Sb");J.ka=function(){return Mb(this)};J.Ke=zb();
function ye(a,b){we[F](this,a,b);this.xb=a.o(xd)}M(ye,we);wa(ye[C],Bb(0));ye[C].Ke=function(a){this.Id[n](function(b,c){this.xb.Mg(b,a[c])},this)};
function ze(a,b){this.m=a;this.xb=a.o(xd);this.Qa=a.o(wd);this.xd=new Kd(a);this.Bb=b;var c=a.o(yd),d=this.Bb.map(function(a){return c[t](a[k]())});this.Ra=new Q(d);this.Sb=Sc()}J=ze[C];ha(J,function(){this.xd[xb](this.Bb);this.Sc();return Oc()});J.da=Bb(1);J.ca=I("Ra");J.Gc=I("Sb");J.ka=function(){return Mb(this)};wa(J,Bb(1));J.Sc=function(){var a=this.xb.we(this.Ra.c());0!=a[A]&&(a=new ye(this.m,a),this.Qa.Tb(a))};
function Ae(a){this.m=a;this.vb=a.o(sd);this.Qa=a.o(wd)}Ae[C].qk=function(){this.vb.subscribe(this.Je[q](this))};Ae[C].Je=function(a){a=new ze(this.m,a);this.Qa.Tb(a)};


function S(a,b){this.La=a;this.j=b;this.fb=new P}K("lf.backstore.FirebaseRawBackStore",S,void 0);function Be(a,b){var c=Sc(),d=a;b[A]&&(d=a[gb](b));d[db]("value",function(a){c[tb](a.val())},function(a){c[ib](a)});return c.ga}function Ce(a,b,c){function d(a){a?g[ib](a):g[tb]()}c=c||!1;var g=Sc();c?a.set(b,d):a[xb](b,d);return g.ga}
S[C].Ba=function(a){return Be(this.j,"@rev/R")[D](function(a){this.Pa=a;return Be(this.j,"@table")}[q](this))[D](function(b){var c=0,d;for(d in b)this.fb.set(d,b[d]),b[d]>c&&(c=b[d]);a.gb()[n](function(a){this.fb.s(a[k]())||(b[a[k]()]=++c)},this);d=this.j[gb]("@table");return Ce(d,b)}[q](this))};
S[C].Qd=function(a,b){var c=this.fb.get(a);return null!=c?function(){var a={},g=Sc();this.j[Ma]("T").equalTo(c)[db]("value",function(c){c[n](function(c){var g=b(c.val());a[ga(c.key(),10)]=g});g[tb](a)});return g.ga}[F](this)[D](function(a){a["@rev"]={R:++this.Pa};return Ce(this.j,a)}[q](this)):Oc()};S[C].ie=function(a){return this.Qd(a,Bb(null))[D](function(){this.fb[m](a);return Ce(this.j[gb]("@table/"+a),null,!0)}[q](this))};S[C].dropTable=S[C].ie;
S[C].Vd=function(a,b,c){return this.Qd(a,function(a){var g=a.P;g[b]=c;return{R:this.Pa+1,T:a.T,P:g}}[q](this))};S[C].addTableColumn=S[C].Vd;S[C].je=function(a,b){return this.Qd(a,function(a){var d=a.P;delete d[b];return{R:this.Pa+1,T:a.T,P:d}}[q](this))};S[C].dropTableColumn=S[C].je;S[C].Qe=function(a,b,c){return this.Qd(a,function(a){var g=a.P;g[c]=g[b];delete g[b];return{R:this.Pa+1,T:a.T,P:g}}[q](this))};S[C].renameTableColumn=S[C].Qe;
S[C].cc=function(){throw new R("NotSupportedError","Firebase does not have raw transaction.");};S[C].createRow=S[C].cc;S[C].xe=I("La");S[C].getVersion=S[C].xe;S[C].ec=function(a){var b=Sc();a=this.fb.get(a);this.j[Ma]("T").equalTo(a)[db]("value",function(a){var d=[];a[n](function(a){d[w](a.val().P)});b[tb](d)});return b.ga};pa(S[C],function(){var a={},b=this.fb.G().map(function(b){return this.ec(b)[D](function(d){a[b]=d})}[q](this));return Qc(b)[D](function(){return a})});pa(S[C],S[C].dump);
function De(a,b,c){ed[F](this,c,b);this.j=a}M(De,ed);De[C].Y=function(a){return this.j.Hc(a)};
De[C].U=function(){De.eb.U[F](this);var a=this.Ni().Af();if(0==a.na())this.ba[tb]();else{var b=this.j.Wi()+1;this.j.wg(b);var c={"@rev":{R:b}};a[n](function(a){var g=this.j.Ff(a[k]());a.ld()[n](function(a,d){c[d]={R:b,T:g,P:a.w()}});a.rd()[n](function(a,d){c[d]={R:b,T:g,P:a[1].w()}});a.md()[n](function(a,b){c[b]=null})},this);this.j.Ui()[xb](c,function(c){if(null===c)this.ba[tb]();else this.j.wg(b-1),c=a.c().map(function(a){return this.j.mg(a[k]())},this),Qc(c)[D](this.ba[ib][q](this.ba),this.ba[ib][q](this.ba))}[q](this))}return this.ba.ga};
function Ee(){this.nb=new P}J=Ee[C];J.ve=function(a){if(0==a[A])return this.nb.c();var b=[];a[n](function(a){a=this.nb.get(a,null);null===a||b[w](a)},this);return b};J.getData=I("nb");J.get=function(a){return Oc(this.ve(a))};J.Oe=function(a){a[n](function(a){this.nb.set(a.id(),a)},this)};J.put=function(a){this.Oe(a);return Oc()};J.ng=function(a){0==a[A]||a[A]==this.nb.na()?this.nb[Qa]():a[n](function(a){this.nb[m](a)},this)};ja(J,function(a){this.ng(a);return Oc()});
J.Oi=function(){return this.nb.Ha()?0:this.nb.G()[jb](function(a,b){return a>b?a:b},0)};
function Fe(a,b){this.A=a;this.Xg=b;this.Rc=new P;this.Pa=-1;this.I=new P;this.fb=new P;this.ae=null}J=Fe[C];J.Wi=I("Pa");J.wg=Ab("Pa");
J.Ba=function(a){this.j=this.Xg[gb](this.A[pb]());var b=a||function(){return Oc()};return Be(this.j,"@db/version")[D](function(a){return null===a?Ce(this.j,this.Jh(),!0)[D](function(){var a=new S(0,this.j);return b(a)}[q](this)):a==this.A[Fa]()?Be(this.j,"@rev/R")[D](function(a){this.Pa=a;return Be(this.j,"@table")}[q](this))[D](function(a){for(var b in a)this.fb.set(b,a[b]);a=this.A.gb().map(function(a){return this.mg(a[k]())},this);return Qc(a)}[q](this))[D](function(){this.nj();this.Yf();return Oc()}[q](this)):
this.Le(a,b)[D](function(){return this.Ba()}[q](this))}[q](this))};J.Le=function(a,b){var c=new S(a,this.j);return c.Ba(this.A)[D](function(){return this.yk()}[q](this))[D](function(){return b(c)})[D](function(){var a=this.j[gb]("@db");return Ce(a,{version:this.A[Fa]()},!0)}[q](this))};J.yk=function(){return Oc()};J.Yf=function(){this.j.off();this.j.on("child_removed",this.Ij[q](this));this.be&&(this.be.off(),this.Rc[Qa]());this.be=this.j[Ma]("R").startAt(this.Pa+1);this.be.on("value",this.Je[q](this))};
J.nj=function(){Yc=this.I.c().map(function(a){return a.Oi()})[jb](function(a,b){return a>b?a:b},0)+1};J.Ij=function(a){var b=a.val(),c=this.Rc.get(b.T,null);null===c&&(c=new Q,this.Rc.set(b.T,c));c.add(ga(a.key(),10))};J.Je=function(a){var b=a[gb]("@rev/R").val();null!=b&&b!=this.Pa&&(this.Pa=b,a=this.wi(a),a[n](function(a){var b=this.I.get(a[k]()),g=a.md().G();g[A]&&b.ng(g);var h=a.ld().c();a.rd()[n](function(a){h[w](a[1])});b.Oe(h)},this),a[A]&&this.Oc(a),this.Yf())};
J.wi=function(a){var b=new Q,c=new P;this.fb[n](function(a,g){var h=this.I.get(g),l=new Md(g);if(this.Rc.s(a)){var p=this.Rc.get(a).c();b[kb](p);h.ve(p)[n](function(a){l[ob](a)})}c.set(a,l)}[q](this));a[n](function(a){if("@rev"!=a.key()){var g=ga(a.key(),10);if(!b[u](g)){a=a.val();var h=c.get(a.T),l=this.I.get(h[k]());l.getData().s(g)?h.modify([l.ve([g])[0],new Xc(g,a.P)]):h.add(new Xc(g,a.P))}}}[q](this));return c.c()[Ea](function(a){return!a.Ha()})};
J.mg=function(a){var b=Sc(),c=this.Ff(a);this.j[Ma]("T").equalTo(c)[db]("value",function(c){var g=new Ee,h=[];c[n](function(a){h[w](new Xc(ga(a.key(),10),a.val().P))});g.Oe(h);this.I.set(a,g);b[tb]()}[q](this));return b.ga};J.Ff=function(a){return this.fb.get(a)};J.Jh=function(){var a={};a["@db"]={version:this.A[Fa]()};a["@rev"]={R:1};this.Pa=1;a["@table"]={};this.A.gb()[n](function(b,c){var d=b[k]();a["@table"][d]=c;this.I.set(d,new Ee);this.fb.set(d,c)},this);return a};
J.Eb=function(a,b){return new De(this,a,b)};J.Hc=function(a){var b=this.I.get(a,null);if(null!==b)return b;throw new R("DataError","Table "+a+" not found");};J.Ui=I("j");ra(J,zb());ya(J,Ab("ae"));J.Oc=function(a){null!=this.ae&&this.ae(a)};
function Ge(a,b,c,d){this.j=b;this.Ta=c;this.La=a;this.Yc=d}J=Ge[C];J.ie=function(a){return new O(function(b,c){try{this.j.deleteObjectStore(a)}catch(d){c(d);return}b()},this)};J.Mj=function(a,b,c){return new O(function(d,g){var h;try{var l=this.Ta[mb](a);h=l[rb]()}catch(p){g(p);return}Ba(h,function(){var a=h[Xa];a?(b(a),a[Sa]()):(c(l),d())});ua(h,g)},this)};function He(a){var b=null;return b=a instanceof ArrayBuffer?ad(a):a instanceof Date?a[Ra]():a}
J.Ye=function(a,b){function c(a){var c=Fd(a[y]),d=c.jc(),p;for(p in d){var B=Zc(d[p]);b(B);d[p]=B.Fa()}a[xb](c.Fa())}function d(a){var c=Zc(a[y]);b(c);a[xb](c.Fa())}return this.Mj(a,this.Yc?c:d,zb())};J.Vd=function(a,b,c){var d=He(c);return this.Ye(a,function(a){a.w()[b]=d})};J.je=function(a,b){return this.Ye(a,function(a){delete a.w()[b]})};J.Qe=function(a,b,c){return this.Ye(a,function(a){a.w()[c]=a.w()[b];delete a.w()[b]})};
J.$i=function(a){var b=[];return new O(function(c,d){var g;try{g=this.Ta[mb](a)[rb]()}catch(h){d(h);return}Ba(g,L(function(){var a=g[Xa];if(a){if(this.Yc){var d=Fd(a[y]).jc(),h;for(h in d)b[w](d[h])}else b[w](a[y]);a[Sa]()}else c(b)},this));ua(g,d)},this)};J.cc=function(a){var b={};qc(a,L(function(a,d){b[d]=He(a)},this));return $c(b)};J.xe=I("La");
pa(J,function(){for(var a=this.j[La],b=[],c=0;c<a[A];++c){var d=a[lb](c);b[w](this.ec(d))}return Qc(b)[D](function(b){var c={};b[n](function(b,d){c[a[lb](d)]=b});return c})});J.ec=function(a){return this.$i(a)[D](function(a){return a.map(function(a){return a[y]})})};
function Ie(a,b){this.O=a;this.Fb=b}J=Ie[C];J.get=function(a){if(0==a[A])return this.oe();a=a.map(function(a){return new O(function(c,d){var g;try{g=this.O.get(a)}catch(h){d(h);return}ua(g,d);Ba(g,L(function(a){c(this.Fb(a[sb][Xa]))},this))},this)},this);return Qc(a)};J.oe=function(){return new O(function(a,b){var c=[],d;try{d=this.O[rb]()}catch(g){b(g);return}ua(d,b);Ba(d,L(function(){var b=d[Xa];b?(c[w](this.Fb(b[y])),b[Sa]()):a(c)},this))},this)};
J.Pb=function(a){return new O(function(b,c){var d;try{d=a()}catch(g){c(g);return}Ba(d,b);ua(d,c)},this)};J.put=function(a){if(0==a[A])return Oc();a=a.map(function(a){return this.Pb(L(function(){return this.O.put(a.Fa())},this))},this);return Qc(a)};
ja(J,function(a){return new O(function(b,c){var d=this.O.count();Ba(d,L(function(d){if(0==a[A]||d[sb][Xa]==a[A])return this.Pb(L(function(){return this.O[Qa]()},this))[D](b,c);d=a.map(function(a){return this.Pb(L(function(){return this.O[ob](a)},this))},this);Qc(d)[D](b,c)},this));ua(d,c)},this)});
function Je(a,b,c,d,g){ed[F](this,c,d);this.m=a;this.Ta=b;this.Yc=g;this.Ta.oncomplete=L(this.ba[tb],this.ba);this.Ta.onabort=L(this.ba[ib],this.ba)}M(Je,ed);Je[C].Y=function(a,b,c){return this.Yc?(c=null!=c?c:0,a=this.Ta[mb](a),new Gd(a,b,0==c?Rb(Hd,this.m):Id)):new Ie(this.Ta[mb](a),b)};
function Ke(a,b){this.m=a;this.A=b;this.Zc=b.ig().Uh||!1}J=Ke[C];
J.Ba=function(a){var b=aa.indexedDB||aa.mozIndexedDB||aa.webkitIndexedDB||aa.msIndexedDB;if(null==b)throw new R("NotSupportedError","IndexedDB not supported by platform.");var c=a||function(){return Oc()};return new O(function(a,g){var h;try{h=b.open(this.A[pb](),this.A[Fa]())}catch(l){g(l);return}ua(h,g);h.onupgradeneeded=L(function(a){this.Lj(c,a)[D](zb(),g)},this);Ba(h,L(function(b){this.j=b[sb][Xa];this.Te()[D](L(function(b){Yc=b+1;a(this.j)},this))},this))},this)};
J.Lj=function(a,b){var c=b[sb][Xa],d=b[sb][fb],g=new Ge(b.oldVersion,c,d,this.Zc);this.ak(c,d);this.Nh(c,d);return a(g)};J.ak=function(a){for(var b=[],c=0;c<a[La][A];++c){var d=a[La][lb](c);-1!=d[z](".")&&b[w](d)}b[n](function(b){try{a.deleteObjectStore(b)}catch(c){}})};J.Nh=function(a,b){this.A.gb()[n](Rb(this.Kh,a,b),this)};J.Kh=function(a,b,c){a[La][u](c[k]())||a.createObjectStore(c[k](),{keyPath:"id"});c.Qb()&&(c.Ga()[n](function(c){this.Bc(a,b,c.l(),"btree")},this),this.Bc(a,b,c.Hb(),"rowid"))};
J.Bc=function(a,b,c,d){a[La][u](c)||(a.createObjectStore(c,{keyPath:"id"}),a=b[mb](c),(this.Zc?new Gd(a,Zc,Id):new Ie(a,Zc)).put([new cd(new bd(d))]))};J.Eb=function(a,b){var c=b.ca().c().map(function(a){return a[k]()});b.Li()[n](function(a){c[w](a)});var d=this.j[fb](c,0==a?"readonly":"readwrite");return new Je(this.m,d,b,a,this.Zc)};
J.Te=function(a){function b(){if(0==c[A])return Oc();var a=c[Ha]();return l(a)[D](b)}var c=this.A.gb().map(function(a){return a[k]()}),d=this.j,g=0,h=L(function(a){return this.Zc?(a=Fd(a[y]),tc(a.jc())[jb](function(a,b){return ea.max(a,b)},0)):a.key},this),l=L(function(b){return new O(function(c,l){var xe;try{xe=(a||d[fb]([b]))[mb](b)[rb](null,"prev")}catch(ah){l(ah);return}Ba(xe,function(a){(a=a[sb][Xa])&&(g=ea.max(g,h(a)));c(g)});ua(xe,function(){c(g)})},this)},this);return new O(function(a){b()[D](function(){a(g)})})};
ra(J,function(){this.j[cb]()});J.Hc=function(){throw new R("SyntaxError","IndexedDB tables needs to be acquired from transactions");};ya(J,zb());J.Oc=zb();



function Le(a,b,c){ed[F](this,c,b);this.O=a;0==b&&this.ba[tb]()}M(Le,ed);Le[C].Y=function(a){return this.O.Hc(a)};Le[C].U=function(){Le.eb.U[F](this);this.ba[tb]();return this.ba.ga};
function Me(a){this.A=a;this.I=new P}J=Me[C];J.Ba=function(){this.A.gb()[n](this.oj,this);return Oc()};J.Hc=function(a){var b=this.I.get(a,null);if(null===b)throw new R("DataError","Table "+a+" does not exist.");return b};J.Eb=function(a,b){return new Le(this,a,b)};J.rf=function(a){if(!this.I.s(a)){var b=new Ee;this.I.set(a,b);return b}return null};J.oj=function(a){this.rf(a[k]());a.Qb()&&(a.Ga()[n](function(a){this.Bc(a.l(),"btree")},this),this.Bc(a.Hb(),"rowid"))};
J.Bc=function(a,b){var c=this.rf(a);null===c||c.put([new cd(new bd(b))])};ra(J,zb());ya(J,zb());J.Oc=zb();
function Ne(a){Me[F](this,a);this.Dd=null}M(Ne,Me);ya(Ne[C],function(a){null===this.Dd&&(this.Dd=a)});Ne[C].Oc=function(a){null===this.Dd||this.Dd(a)};
function Oe(a,b,c){this.Ta=a;this.B=b;this.Fb=c}Oe[C].get=function(a){var b=this.Fb;this.Ta.Ja("SELECT id, value FROM "+this.B+" "+(0==a[A]?"":"WHERE id IN ("+a[H](",")+")"),[],function(a){for(var d=a[hb][A],g=e(d),h=0;h<d;++h)g[h]=b({id:a[hb][lb](h).id,value:JSON.parse(a[hb][lb](h)[y])});return g});return this.Ta.U()};
Oe[C].put=function(a){if(0==a[A])return Oc();var b="INSERT OR REPLACE INTO "+this.B+"(id, value) VALUES (?, ?)";a[n](function(a){this.Ta.Ja(b,[a.id(),JSON.stringify(a.w())])},this);return Oc()};ja(Oe[C],function(a){this.Ta.Ja("DELETE FROM "+this.B+" "+(0==a[A]?"":"WHERE id IN ("+a[H](",")+")"),[]);return Oc()});
function Pe(a,b,c){ed[F](this,b,c);this.j=a;this.I=new P;this.ee=[]}M(Pe,ed);Pe[C].Y=function(a,b){var c=this.I.get(a,null);null===c&&(c=new Oe(this,a,b),this.I.set(a,c));return c};Pe[C].Ja=function(a,b,c){this.ee[w]({rk:a,Nj:b,transform:c})};
Pe[C].U=function(){Pe.eb.U[F](this);var a,b,c=this.ba[ib][q](this.ba),d=function(a,b){this.ba[ib](b)}[q](this),g=L(function(c,l){a=l;if(this.ee[A]){var p=this.ee[Ha]();b=p.transform;c.executeSql(p.rk,p.Nj,g,d)}else p=a,null!=b&&null!=a&&(p=b(a)),this.ba[tb](p)},this);0==this.Gg?this.j.readTransaction(g,c):this.j[fb](g,c);return this.ba.ga};
function Qe(a,b,c){this.j=c;this.m=a;this.La=b}J=Qe[C];J.gd=function(){return new Pe(this.j,new Nd(this.m,[]),1)};J.ie=function(a){var b=this.gd();b.Ja("DROP TABLE "+a,[]);return b.U()};J.ec=function(a){var b=this.gd();b.Ja("SELECT id, value FROM "+a,[]);return b.U()[D](function(a){for(var b=a[hb][A],g=e(b),h=0;h<b;++h)g[h]={id:a[hb][lb](h).id,value:JSON.parse(a[hb][lb](h)[y])};return Oc(g)})};
J.Xe=function(a,b){var c=this.gd(),d="UPDATE "+a+" SET value=? WHERE id=?";return this.ec(a)[D](function(a){a[n](function(a){a=b(a);c.Ja(d,[JSON.stringify(a[y]),a.id])});return c.U()})};J.Vd=function(a,b,c){var d=He(c);return this.Xe(a,function(a){a[y][b]=d;return a})};J.je=function(a,b){return this.Xe(a,function(a){delete a[y][b];return a})};J.Qe=function(a,b,c){return this.Xe(a,function(a){a[y][c]=a[y][b];delete a[y][b];return a})};J.cc=function(a){var b={},c;for(c in a)b[c]=He(a[c]);return $c(b)};
J.xe=I("La");function Re(a){a.Ja('SELECT tbl_name FROM sqlite_master WHERE type="table"',[],function(a){for(var c=e(a[hb][A]),d=0;d<c[A];++d)c[d]=a[hb][lb](d).tbl_name;return c})}pa(J,function(){var a=Sc(),b=this.gd();Re(b);var c={};b.U()[D](L(function(b){b=b[Ea](function(a){return"__lf_ver"!=a&&"__WebKitDatabaseInfoTable__"!=a}).map(function(a){return this.ec(a)[D](function(b){c[a]=b})},this);Qc(b)[D](function(){a[tb](c)})},this));return a.ga});
function Se(a,b,c){this.m=a;this.A=b;this.mk=c||4194304}J=Se[C];J.nd=function(){return new Nd(this.m,[])};J.Ba=function(a){if(null==aa.openDatabase)throw new R("NotSupportedError","WebSql not supported by platform.");var b=a||function(){return Oc()};return new O(L(function(a,d){try{var g=aa.openDatabase(this.A[pb](),"",this.A[pb](),this.mk);if(null!=g)this.j=g,this.Ah(b)[D](a,d);else throw new R("NotSupportedError","Unable to open database.");}catch(h){d(h)}},this))};
J.Ah=function(a){var b=Sc(),c=new Pe(this.j,this.nd(),1);c.Ja("CREATE TABLE IF NOT EXISTS __lf_ver(id INTEGER PRIMARY KEY, v INTEGER)",[]);c.Ja("SELECT v FROM __lf_ver WHERE id = 0",[]);c.U()[D](L(function(c){var g=0;c[hb][A]&&(g=c[hb][lb](0).v);g<this.A[Fa]()?this.Le(a,g)[D](b[tb][q](b)):g>this.A[Fa]()?b[ib](new R("DataError","Attempt to open a newer database with old code")):b[tb]()},this));return b.ga};
J.Eb=function(a,b){if(null!=this.j)return new Pe(this.j,b,a);throw new R("DataError","Attempt to create transaction from uninitialized DB");};ra(J,zb());J.Hc=function(){throw new R("SyntaxError","WebSQL tables needs to be acquired from transactions");};J.ag=function(){throw new R("NotSupportedError","WebSQL does not support change notification");};ya(J,function(){this.ag()});J.Oc=function(){this.ag()};
J.Le=function(a,b){var c=Sc();this.Qj()[D](L(function(){a(new Qe(this.m,b,this.j))[D](L(function(){return this.Te()},this))[D](c[tb][q](c))},this),c[ib][q](c));return c.ga};
J.Qj=function(){var a=this.A.gb(),b=new Pe(this.j,this.nd(),1),c=new Pe(this.j,this.nd(),1);b.Ja("INSERT OR REPLACE INTO __lf_ver VALUES (0, ?)",[this.A[Fa]()]);Re(b);return b.U()[D](function(b){b[Ea](function(a){return-1!=a[z](".")})[n](function(a){c.Ja("DROP TABLE "+a,[])});var g=b[Ea](function(a){return-1==a[z](".")});a.map(function(a){return a[k]()})[Ea](function(a){return-1==g[z](a)})[n](function(a){c.Ja("CREATE TABLE "+a+"(id INTEGER PRIMARY KEY, value TEXT)",[])});return c.U()})};
J.Te=function(){var a=0,b=Sc(),c=L(function(b){var c=new Pe(this.j,this.nd(),0);c.Ja("SELECT MAX(id) FROM "+b,[]);return c.U()[D](function(b){b=b[hb][lb](0)[0];a=ea.max(b,a)})},this),d=this.A.gb().map(function(a){return c(a[k]())});Qc(d)[D](function(){b[tb](a)},function(a){b[ib](a)});return b.ga};

function Te(){this.g=new P;ba.defineProperty(this,"size",{get:function(){return this.g.na()}})}ma(Te[C],function(){this.g[Qa]()});ma(Te[C],Te[C][Qa]);xa(Te[C],function(a){return this.g[m](a)});Te[C]["delete"]=Te[C][ob];ka(Te[C],function(a,b){return this.g[n](a,b)});ka(Te[C],Te[C][n]);Te[C].get=function(a){return this.g.get(a)};Te[C].get=Te[C].get;Te[C].has=function(a){return this.g.s(a)};Te[C].has=Te[C].has;Te[C].set=function(a,b){return this.g.set(a,b)};Te[C].set=Te[C].set;
var Ue=aa.Map&&aa.Map[C][Oa]&&aa.Map[C][n]?aa.Map:Te;
function Ve(){this.Ub=new Q;ba.defineProperty(this,"size",{get:function(){return this.Ub.na()}})}Ve[C].add=function(a){this.Ub.add(a)};Ve[C].add=Ve[C].add;ma(Ve[C],function(){this.Ub[Qa]()});ma(Ve[C],Ve[C][Qa]);xa(Ve[C],function(a){return this.Ub[m](a)});Ve[C]["delete"]=Ve[C][ob];ka(Ve[C],function(a,b){this.Ub.c()[n](a,b)});Ve[C].has=function(a){return this.Ub[u](a)};Ve[C].has=Ve[C].has;var We=aa.Set&&aa.Set[C][Oa]&&aa.Set[C][n]?aa.Set:Ve;
function Xe(a){if(a instanceof Ve)return a.Ub.c();var b=0,c=e(a[Ya]);a[n](function(a){c[b++]=a});return c};
function Ye(){this.g=new Ue;this.Cg=new Ue}J=Ye[C];J.ud=function(a){var b=this.Cg.get(a);Db(b)||(b=new We,this.Cg.set(a,b));return b};J.set=function(a,b){var c=this.ud(a);b[n](L(function(a){this.g.set(a.id(),a);c.add(a.id())},this))};J.get=function(a){return a.map(L(function(a){return this.g.get(a)||null},this))};
J.Va=function(a,b,c){var d=[],g=ea.min(b,c),h=ea.max(b,c);a=this.ud(a);if(a[Ya]<h-g)a[n](function(a){a>=g&&a<=h&&(a=this.g.get(a),N(null!=a,"Inconsistent cache"),d[w](a))},this);else for(b=g;b<=h;++b)a.has(b)&&(c=this.g.get(b),N(null!=c,"Inconsistent cache"),d[w](c));return d};ja(J,function(a,b){var c=this.ud(a);b[n](function(a){this.g[ob](a);c[ob](a)},this)});J.na=function(a){return null!=a?this.ud(a)[Ya]:this.g[Ya]};
function Ze(a,b,c,d){a=b?a.reverse():a;if(null==c&&null==d)return a;c=ea.min(Db(c)?c:a[A],a[A]);if(0==c)return[];d=ea.min(d||0,a[A]);return a[x](d,d+c)};
function $e(a,b,c,d){this.B=a;this.L=b;this.Ze=c;if(d){a=511;a*=a*a;if(d[A]>=a)throw new R("TooManyRowsError","B-Tree implementation supports at most "+a+" rows.");d=af(this,d);this.sa=d=bf(d)}else this[Qa]()}var cf=[];J=$e[C];ia(J,I("B"));f(J,function(){return this.sa[r]()});J.add=function(a,b){this.sa=this.sa.rb(a,b)};J.set=function(a,b){this.sa=this.sa.rb(a,b,!0)};ja(J,function(a,b){this.sa=this.sa[m](a,b)});J.get=function(a){return this.sa.get(a)};
J.fd=function(a){return null!=a?this.Va([a])[A]:this.Va()[A]};J.Va=function(a,b,c,d){var g=this.sa.qd().b[0];if(!Db(g)||0==c)return cf;var h=(c||0)+(d||0),h=0<h&&!b?h:Number.POSITIVE_INFINITY,l=[];(Db(a)?this.L.zg(a):[this.L.ne()])[n](function(a){for(var b=this.L.Jd(a),b=this.L.Ce(a)?g:b[0],b=this.sa.zf(b),c=0;null!=b&&l[A]<h;)0!=b.Va(a,l)?c=0:c++,b=2==c?null:b[$a]()},this);return Ze(l,b,c,d)};ma(J,function(){this.sa=df(this)});J.s=function(a){return this.sa.s(a)};
J.min=function(){return this.Nc(L(this.L.min,this.L))};J.max=function(){return this.Nc(L(this.L.max,this.L))};J.Nc=function(a){var b=this.sa.qd(),c=this.sa.Ef();if(0==b.b[A]&&0==c.b[A])return[null,null];var d=b.b[0],b=b.S[0],g=c.b[c.b[A]-1],c=c.S[c.b[A]-1];return 1==a(d,g)?[d,this.Ze?[b]:b]:[g,this.Ze?[c]:c]};J.Kc=I("Ze");J.Ac=I("L");J.He=function(a,b){return null!=a?-1==this.L[Wa](a,b):!1};J.Ma=function(a,b){return null!=a?0==this.L[Wa](a,b):!1};
J.Fa=function(){for(var a=[],b=this.sa.qd();b;)a[w](new Xc(b.va,[b.b,b.S])),b=b.xa;return a};function ef(a,b,c,d){a=new $e(b,a,c);d=ff(d,a);a.sa=d;return a}function gf(a,b){this.va=a;this.X=b;this.lb=0;this.xa=this.tb=this.F=null;this.b=[];this.S=[];this.i=[]}function df(a){return new gf(Yc++,a)}J=gf[C];J.ea=function(){return 0==this.lb};J.Rf=function(){return null==this.F};qa(J,I("xa"));
function hf(a){function b(a){return null!=a?a.va[r]():"_"}var c=a.va+"["+a.b[H]("|")+"]",d=a.i.map(function(a){return a.va})[H]("|"),g=a.S[H]("/"),h=b(a.tb)+"{",h=a.ea()?h+g:h+d,h=h+"}"+b(a.F);a.xa&&(a=hf(a.xa),c=c+"  "+a[0],h=h+"  "+a[1]);return[c,h]}f(J,function(){var a="",b=hf(this),a=a+(b[0]+"\n"+b[1]+"\n");this.i[A]&&(a+=this.i[0][r]());return a});J.qd=function(){return this.ea()?this:this.i[0].qd()};J.Ef=function(){return this.ea()?this:this.i[this.i[A]-1].Ef()};
function jf(a,b){b&&(b.tb=a);a&&(a.xa=b)}function af(a,b){for(var c=b[A],d=0,g=df(a),h=g;0<c;){var l=768<=c?511:257<=c&&511>=c?c:257,p=b[x](d,d+l);g.b=p.map(function(a){return a.key});g.S=p.map(function(a){return a[y]});d+=l;c-=l;0<c&&(l=df(g.X),jf(g,l),g=l)}return h}function kf(a){var b=a[0],c=df(b.X);c.lb=b.lb+1;c.i=a;for(b=0;b<a[A];++b)a[b].F=c,0<b&&c.b[w](a[b].b[0]);return c}
function bf(a){var b=a,c=[];do c[w](b),b=b.xa;while(b);if(512>=c[A])b=kf(c);else{var d=c[A],g=0,b=df(a.X);for(b.lb=a.lb+2;0<d;){a=768<=d?511:257<=d&&511>=d?d:257;var h=c[x](g,g+a),l=kf(h);l.F=b;b.i[A]&&(b.b[w](h[0].b[0]),jf(b.i[b.i[A]-1],l));b.i[w](l);g+=a;d-=a}}return b}J.get=function(a){var b=this.Tc(a);if(this.ea()){var c=cf;this.X.Ma(this.b[b],a)&&(c=c[Ka](this.S[b]));return c}b=this.X.Ma(this.b[b],a)?b+1:b;return this.i[b].get(a)};
J.s=function(a){var b=this.Tc(a);return this.X.Ma(this.b[b],a)?!0:this.ea()?!1:this.i[b].s(a)};ja(J,function(a,b){this.uf(a,-1,b);if(this.Rf()){var c=this;1==this.i[A]&&(c=this.i[0],c.F=null);return c}return this});function mf(a){return a.ea()?a.b[0]:mf(a.i[0])}J.jd=function(){this.b=[];for(var a=1;a<this.i[A];++a)this.b[w](mf(this.i[a]))};
J.uf=function(a,b,c){var d=this.Tc(a);if(!this.ea()){var g=this.X.Ma(this.b[d],a)?d+1:d;if(this.i[g].uf(a,g,c))this.jd();else return!1}else if(!this.X.Ma(this.b[d],a))return!1;if(this.b[A]>d&&this.X.Ma(this.b[d],a)){if(Db(c)&&!this.X.Kc()&&this.ea()&&(a=this.S[d],c=lc(a,mc,!1,c),0<=c&&fc(a,c),this.S[d][A]))return!1;this.b[G](d,1);this.ea()&&this.S[G](d,1)}256>this.b[A]&&!this.Rf()&&(this.sk()||this.Ej(b));return!0};
J.sk=function(){var a=null,b,c,d;if(this.xa&&256<this.xa.b[A])a=this.xa,c=b=0,d=this.b[A]+1;else if(this.tb&&256<this.tb.b[A])a=this.tb,b=this.tb.b[A]-1,c=this.ea()?b:b+1,d=0;else return!1;this.b[G](d,0,a.b[b]);a.b[G](b,1);b=this.ea()?this.S:this.i;var g=null;this.ea()?g=a.S:(g=a.i,g[c].F=this);b[G](d,0,g[c]);g[G](c,1);a.ea()||(a.jd(),this.jd());return!0};
J.Ej=function(a){var b,c,d;this.xa&&511>this.xa.b[A]?(b=this.xa,d=c=0):this.tb&&(b=this.tb,c=b.b[A],d=b.ea()?b.S[A]:b.i[A]);c=[c,0][Ka](this.b);e[C][G][v](b.b,c);c=null;this.ea()?c=this.S:(c=this.i,c[n](function(a){a.F=b}));c=[d,0][Ka](c);e[C][G][v](b.ea()?b.S:b.i,c);jf(this.tb,this.xa);b.ea()||b.jd();-1!=a&&(this.F.b[G](a,1),this.F.i[G](a,1))};
J.rb=function(a,b,c){var d=this.Tc(a);if(this.ea()){if(this.X.Ma(this.b[d],a)){if(c)return this.S[d]=this.X.Kc()?b:[b],this;if(this.X.Kc())throw new R("ConstraintError","Duplicate key not allowed");if(this.S[d])return nc(this.S[d],b),this;this.S[d]=[b]}this.b[G](d,0,a);this.S[G](d,0,this.X.Kc()?b:[b]);return 512==this.b[A]?this.pk():this}d=this.X.Ma(this.b[d],a)?d+1:d;a=this.i[d].rb(a,b,c);a.ea()||1!=a.b[A]||(this.b[G](d,0,a.b[0]),a.i[1].F=this,a.i[0].F=this,this.i[G](d,1,a.i[1]),this.i[G](d,0,a.i[0]));
return 512==this.b[A]?this.nk():this};J.pk=function(){var a=df(this.X),b=df(this.X);b.lb=1;b.b=[this.b[256]];b.i=[this,a];b.F=this.F;this.F=b;a.b=this.b[G](256);a.S=this.S[G](256);a.F=b;jf(a,this.xa);jf(this,a);return b};J.nk=function(){var a=df(this.X),b=df(this.X);a.F=this.F;a.lb=this.lb+1;a.b=[this.b[256]];a.i=[this,b];this.b[G](256,1);b.F=a;b.lb=this.lb;b.b=this.b[G](256);b.i=this.i[G](257);b.i[n](function(a){a.F=b});this.F=a;jf(b,this.xa);jf(this,b);return a};
J.Tc=function(a){for(var b=0,c=this.b[A];b<c;){var d=b+c>>1;this.X.He(this.b[d],a)?b=d+1:c=d}return b};J.zf=function(a){if(!this.ea()){var b=this.Tc(a);this.X.Ma(this.b[b],a)&&b++;return this.i[b].zf(a)}return this};
J.Va=function(a,b){var c=-1,d=this.b[A]-1,g=this.X.Ac(),h=L(function(b){for(;b<this.b[A];++b){var h=g.kc(this.b[b],a);if(-1!=c){if(!h){d=b-1;break}}else h&&(c=b)}},this);g.kc(this.b[0],a)?c=0:h(1);if(-1==c)return 0;g.kc(this.b[d],a)||h(c);return d==this.b[A]-1?this.gf(b,this.S[x](c)):d>=c?this.gf(b,this.S[x](c,d+1)):0};J.gf=function(a,b){var c=this.X.Kc()?b:pc(b);a[w][v](a,c);return c[A]};
function ff(a,b){for(var c=a.map(function(a){var c=new gf(a.id(),b);c.b=a.w()[0];c.S=a.w()[1];return c}),d=0;d<c[A]-1;++d)jf(c[d],c[d+1]);return 1<c[A]?bf(c[0]):c[0]};
function nf(a){if(1==a.h[A])return new of(a.h[0].sb);a=a.h.map(function(a){return a.sb});return new pf(a)}function of(a){this.cd=0==a?qf:rf;this.Ie=0==a?function(a){return null!=a?a.reverse():null}:function(a){return a||null};this.eg=0==a?sf:tf}M(of,Jd);function rf(a,b){return a>b?1:a<b?-1:0}function qf(a,b){return rf(b,a)}function tf(a,b){return Sd(a,b)}function sf(a,b){return Sd(b,a)}J=of[C];
J.fe=function(a,b){var c=this.Ie(b),d=[null===c.f,null===c.u];if(!d[0]){var g=this.cd(a,c.f);d[0]=c.$?1==g:-1!=g}d[1]||(g=this.cd(a,c.u),d[1]=c.fa?-1==g:1!=g);return d};J.compare=function(a,b){return this.cd(a,b)};J.min=function(a,b){return a<b?1:a==b?0:-1};J.max=function(a,b){return a>b?1:a==b?0:-1};J.kc=function(a,b){var c=this.fe(a,b);return c[0]&&c[1]};J.ne=function(){return Rd()};J.dg=function(a,b){return this.eg(a,b)};
J.zg=function(a){return a[Ea](function(a){return null!==a})[vb](L(function(a,c){return this.eg(a,c)},this))};J.Ce=function(a){return Hb(this.Ie(a).f)};J.Jd=function(a){a=this.Ie(a);return[a.f,a.u]};f(J,function(){return this.cd==qf?"SimpleComparator_DESC":"SimpleComparator_ASC"});function pf(a){this.za=a.map(function(a){return new of(a)})}M(pf,Jd);J=pf[C];J.me=function(a,b,c){for(var d=0,g=0;g<this.za[A]&&0==d;++g)d=c(this.za[g],a[g],b[g]);return d};
J.compare=function(a,b){return this.me(a,b,function(a,b,g){return a[Wa](b,g)})};J.min=function(a,b){return this.me(a,b,function(a,b,g){return a.min(b,g)})};J.max=function(a,b){return this.me(a,b,function(a,b,g){return a.max(b,g)})};J.fe=function(a,b){for(var c=[!0,!0],d=0;d<this.za[A]&&(c[0]||c[1]);++d){var g=this.za[d].fe(a[d],b[d]);c[0]=c[0]&&g[0];c[1]=c[1]&&g[1]}return c};J.kc=function(a,b){for(var c=!0,d=0;d<this.za[A]&&c;++d)c=this.za[d].kc(a[d],b[d]);return c};J.ne=function(){return this.za.map(function(a){return a.ne()})};
J.zg=function(a){var b=a[Ea](function(a){return a[wb](Ib)});a=e(this.za[A]);for(var c=0;c<a[A];c++)a[c]=b.map(function(a){return a[c]});a[n](function(a,b){a[vb](L(function(a,c){return this.za[b].dg(a,c)},this))},this);b=e(b[A]);for(c=0;c<b[A];c++)b[c]=a.map(function(a){return a[c]});return b[vb](L(function(a,b){for(var c=0,l=0;l<this.za[A]&&0==c;++l)c=this.za[l].dg(a[l],b[l]);return c},this))};J.Ce=function(a){return this.za[0].Ce(a[0])};
J.Jd=function(a){var b=a.map(function(a,b){return this.za[b].Jd(a)[0]},this);a=a.map(function(a,b){return this.za[b].Jd(a)[1]},this);return[b,a]};
function uf(a){this.wa=a;this.Za=new Q}J=uf[C];ia(J,function(){return this.wa[k]()});J.add=function(a,b){null===a?this.Za.add(b):this.wa.add(a,b)};J.set=function(a,b){null===a?(this.Za[Qa](),this.Za.add(b)):this.wa.set(a,b)};ja(J,function(a,b){null===a?b?this.Za[m](b):this.Za[Qa]():this.wa[m](a,b)});J.get=function(a){return null===a?this.Za.c():this.wa.get(a)};J.fd=function(a){return this.wa.fd(a)};J.Va=function(a,b,c,d){b=this.wa.Va(a,b,c,d);return null!=a?b:b[Ka](this.Za.c())};
ma(J,function(){this.Za[Qa]();this.wa[Qa]()});J.s=function(a){return null===a?!this.Za.Ha():this.wa.s(a)};J.min=function(){return this.wa.min()};J.max=function(){return this.wa.max()};J.Fa=function(){return[new Xc(-2,this.Za.c())][Ka](this.wa.Fa())};J.Ac=function(){return this.wa.Ac()};
function vf(a){this.B=a;this.ub=new We;this.L=new of(1)}J=vf[C];ia(J,I("B"));J.add=function(a){if("number"!=typeof a)throw new R("DataError","Row id must be numbers");this.ub.add(a)};J.set=function(a,b){this.add(a,b)};ja(J,function(a){this.ub[ob](a)});J.get=function(a){return this.s(a)?[a]:[]};J.min=function(){return this.Nc(L(this.L.min,this.L))};J.max=function(){return this.Nc(L(this.L.max,this.L))};
J.Nc=function(a){if(0==this.ub[Ya])return[null,null];var b=Xe(this.ub)[jb](L(function(b,d){return null===b||1==a(d,b)?d:b},this),null);return[b,[b]]};J.fd=function(){return this.ub[Ya]};J.Va=function(a,b,c,d){var g=a||[Rd()];a=Xe(this.ub)[Ea](function(a){return g[ub](function(b){return this.L.kc(a,b)},this)},this);return Ze(a,b,c,d)};ma(J,function(){this.ub[Qa]()});J.s=function(a){return this.ub.has(a)};J.Fa=function(){return[new Xc(0,Xe(this.ub))]};J.Ac=I("L");
function wf(a,b){var c=new vf(a);b[0].w()[n](function(a){c.add(a,a)});return c};
function xf(a){this.m=a;this.vb=a.o(sd);this.N=a.o(ud);this.pa=a.o(td)}J=xf[C];J.Ba=function(a){var b=a.gb(),c=L(function(){if(0==b[A])return Oc();var a=b[Ha]();return(a.Qb()?this.ki(a):this.li(a))[D](c)},this);return c()};J.li=function(a){var b=new Nd(this.m,[a]);return this.vb.Eb(0,b).Y(a[k](),L(a.dc,a)).get([])[D](L(function(b){this.pa.set(a[k](),b);this.Xj(a,b)},this))};J.Xj=function(a,b){var c=this.N.Zi(a[k]());b[n](function(a){c[n](function(b){var c=a.Lc(b[k]());b.add(c,a.id())})})};
J.ki=function(a){var b=new Nd(this.m,[a]),c=this.vb.Eb(0,b),b=c.Y(a[k](),a.dc).get([])[D](L(function(b){this.pa.set(a[k](),b)},this)),d=a.Ga().map(function(a){return this.Yj(a,c)},this)[Ka](this.Zj(a,c));return Qc(d[Ka](b))};
J.Yj=function(a,b){var c=b.Y(a.l(),Zc,1),d=nf(a);return c.get([])[D](L(function(b){N("btree"==b[0].w().type);if(1<b[A]){if(a.Jf()){var c=ef[q](void 0,d,a.l(),a.yd),l=b[x](1),p=-1;for(b=0;b<l[A];++b)if(-2==l[b].id()){p=b;break}if(-1==p)throw new R("DataError","Data corruption detected");b=l[p].w();l=l[x](0);l[G](p,1);c=c(l);c=new uf(c);c.Za[kb](b)}else c=ef(d,a.l(),a.yd,b[x](1));this.N.set(c)}},this))};
J.Zj=function(a,b){return b.Y(a.Hb(),Zc,1).get([])[D](L(function(b){N("rowid"==b[0].w().type);1<b[A]&&(b=wf(a.Hb(),b[x](1)),this.N.set(b))},this))};


function yf(){this.O=new P}yf[C].Ba=function(a){a.gb()[n](function(a){var c=a.Hb();if(null===this.get(c)){var d=new vf(c);this.O.set(c,d)}a.Ga()[n](function(a){this.O.set(a.l(),zf(a))},this)},this);return Oc()};function zf(a){var b=nf(a),b=new $e(a.l(),b,a.yd);return a.Jf()?new uf(b):b}yf[C].get=function(a){return this.O.get(a,null)};yf[C].set=function(a){return this.O.set(a[k](),a)};yf[C].Zi=function(a){var b=[],c=a+".";this.O.G()[n](function(a){0==a[z](c)&&b[w](this.O.get(a))},this);return b};
function Af(a){this.$a=[];Db(a)&&this.add(a)}J=Af[C];f(J,function(){return this.$a.map(function(a){return a[r]()})[H](",")});J.s=function(a){return this.$a[ub](function(b){return b[u](a)})};J.c=I("$a");
J.add=function(a){if(0!=a[A])if(a=this.$a[Ka](a),1==a[A])this.$a=a;else{a[vb](Sd);for(var b=[],c=a[0],d=1;d<a[A];++d)if(c.fg(a[d])){var g=a[d],h=Rd();if(null!==c.f&&null!==g.f){var l=Qd(c.f,g.f,!0);1!=l?(h.f=c.f,h.$=0!=l?c.$:c.$&&g.$):(h.f=g.f,h.$=g.$)}null!==c.u&&null!==g.u&&(l=Qd(c.u,g.u,!1),-1!=l?(h.u=c.u,h.fa=0!=l?c.fa:c.fa&&g.fa):(h.u=g.u,h.fa=g.fa));c=h}else b[w](c),c=a[d];b[w](c);this.$a=b}};
J.Cc=function(a){return this.$a[A]==a.$a[A]?0==this.$a[A]||this.$a[wb](function(b,c){return b.Cc(a.$a[c])}):!1};function Bf(a,b){var c=[];a.c().map(function(a){return b.c().map(function(b){var c;if(a.fg(b)){c=Rd();var l=Qd(a.f,b.f,!0),l=0==l?a.$?a:b:-1!=l?a:b;c.f=l.f;c.$=l.$;null===a.u||null===b.u?b=null===a.u?b:a:(l=Qd(a.u,b.u,!1),b=0==l?a.fa?a:b:-1==l?a:b);c.u=b.u;c.fa=b.fa}else c=null;return c})})[n](function(a){c=c[Ka](a)});return new Af(c[Ea](function(a){return null!==a}))};
function Cf(a,b){var c=[],d=null,g=null;a.qc(function(a){var l=b(a);null==a[Ga]()?g=l:d.ia(l);var p=a[Ga]();null!==p&&p.ua()==d.ua()&&(p=c[z](d),-1!=p&&c[G](p,1));1<a.ua()&&c[w](l);d=a.Of()?c[c[A]-1]:l});return g}function Df(a){return Ef(a,function(a){return a.Of()})}function Ff(a){var b=a[Ga](),c=0;null!==b&&(c=b.aa()[z](a),b[qb](a));var d=a.aa()[x]();d[n](function(d,h){a[qb](d);null===b||b.tc(d,c+h)});return{parent:b,children:d}}
function Gf(a,b){a.aa()[x]()[n](function(c){a[qb](c);b.ia(c)});a.ia(b)}function Hf(a){N(1==a.ua());var b=a.ob(0);N(1==b.ua());Ff(a);Gf(b,a);return b}function If(a,b,c){N(1==a.ua());var d=a.ob(0);N(1<d.ua());var g=d.aa()[x]();if(!g[ub](function(a){return b(a)}))return a;Ff(a);g[n](function(g,l){if(b(g)){var p=c(a);d.Ld(l);p.ia(g);d.tc(p,l)}});return d}function Jf(a,b,c,d){var g=a[Ga]();null!==g&&(a=g.aa()[z](a),g.Ld(a),g.tc(c,a));b.aa()[x]()[n](function(a){b[qb](a);d.ia(a)});return c}
function Ef(a,b,c){function d(a){b(a)&&g[w](a);null!=c&&c(a)||a.aa()[n](d)}var g=[];d(a);return g}function Kf(a,b){var c=b||function(a){return a[r]()+"\n"},d="";a.qc(function(a){for(var b=0;b<a.Ji();b++)d+="-";d+=c(a)});return d};

function Lf(a){ne[F](this);this.Nb=a;this.Xa=!1}M(Lf,ne);J=Lf[C];J.Db=function(){return Cf(this,function(a){if(a instanceof Lf){var b=new Lf(a.Nb);b.Xa=a.Xa;b.Ve(a.ka());return b}return a.Db()}[q](this))};J.wb=function(a){var b=a||[];this.qc(function(a){a!=this&&a.wb(b)}[q](this));return(new Q(b)).c()};J.Od=function(a){this.Xa!=a&&(this.Xa=a,this.Nb="and"==this.Nb?"or":"and",this.aa()[n](function(b){return b.Od(a)}))};J.eval=function(a){var b=this.aa().map(function(b){return b.eval(a)});return this.Dh(b)};
J.Dh=function(a){return"and"==this.Nb?Xd(a):Yd(a)};f(J,function(){return"combined_pred_"+this.Nb[r]()});function Mf(a,b){return a===b?0!==a||1/a===1/b:a!==a&&b!==b};function Nf(){this[Qa]()}var Of=ba[C][Ua],Pf=ba[C][bb];J=Nf[C];J.set=function(a,b){this.Wc(a);var c=!this.Jc(a);this.g[a]=b;if("__proto__"==a||!Qf&&!Of[F](this.g,a)){delete this.g[a];var d=$b(this.Ab,a);if(c=0>d)d=this.Ab[A];this.Ab[d]=a;this.Md[d]=b}c&&this.Z++};J.get=function(a,b){this.Wc(a);if(this.Jc(a))return this.g[a];var c=$b(this.Ab,a);return 0<=c?this.Md[c]:b};
ja(J,function(a){this.Wc(a);if(this.Jc(a))return this.Z--,delete this.g[a],!0;a=$b(this.Ab,a);return 0<=a?(this.Z--,fc(this.Ab,a),fc(this.Md,a),!0):!1});J.addAll=function(a){ac(a.G(),function(b){this.set(b,a.get(b))},this)};J.Ha=function(){return!this.Z};J.na=I("Z");J.s=function(a){this.Wc(a);return this.Jc(a)||0<=$b(this.Ab,a)};J.ed=function(a){return rc(this.g,function(b,c){return this.Jc(c)&&Mf(b,a)},this)||0<=$b(this.Md,a)};
J.G=function(){var a;if(Rf)a=hc(ba.keys(this.g));else{a=[];for(var b in this.g)Pf[F](this.g,b)&&a[w](b)}ic(a,this.Ab);return a};J.c=function(){for(var a=[],b=this.G(),c=0;c<b[A];c++)a[w](this.get(b[c]));return a};J.getEntries=function(){for(var a=[],b=this.G(),c=0;c<b[A];c++){var d=b[c];a[w]([d,this.get(d)])}return a};ma(J,function(){this.g=Qf?ba[Va](null):{};this.Ab=[];this.Md=[];this.Z=0});sa(J,function(){var a=new Nf;a[kb](this);return a});
J.Jc=function(a){return"__proto__"==a?!1:Qf?a in this.g:Pf[F](this.g,a)};J.Wc=function(a){N(Kb(a),"key must be a string.")};var Qf=!!ba[Va],Rf=!!ba.keys;function Sf(){this[Qa]()}J=Sf[C];J.Z=0;ma(J,function(){this.Z=0;this.g=new Nf});sa(J,function(){var a=new Sf;a.Rg(this);return a});J.add=function(a,b){var c=this.g.get(a);c||this.g.set(a,c=[]);c[w](b);this.Z++};J.Rg=function(a){ac(a.getEntries(),function(a){this.add(a[0],a[1])},this)};J.get=function(a){return(a=this.g.get(a))?hc(a):[]};ja(J,function(a,b){var c=this.g.get(a);if(!c)return!1;var d=gc(c,function(a){return Mf(b,a)});d&&(this.Z--,0==c[A]&&this.g[m](a));return d});J.Ha=function(){return!this.Z};
J.na=I("Z");J.s=function(a){return this.g.s(a)};J.ed=function(a){return dc(this.g.c(),function(b){return dc(b,function(b){return Mf(b,a)})})};J.G=function(){return this.g.G()};J.c=function(){return pc(this.g.c())};J.getEntries=function(){for(var a=this.G(),b=[],c=0;c<a[A];c++)for(var d=a[c],g=this.get(d),h=0;h<g[A];h++)b[w]([d,g[h]]);return b};
function Tf(a,b,c){ne[F](this);this.Na=a;this.bb=b;this.V=c;this.hd=fe.qe().pe(this.Na.da(),this.V)}M(Tf,ne);J=Tf[C];J.Db=function(){var a=new Tf(this.Na,this.bb,this.V);a.Ve(this.ka());return a};J.wb=function(a){return null!=a?(a[w](this.Na),a[w](this.bb),a):[this.Na,this.bb]};J.eval=function(a){var b=a[E][Ea](function(a){var b=a.M(this.Na);a=a.M(this.bb);return this.hd(b,a)},this);return new Td(b,a.W())};f(J,function(){return"join_pred("+this.Na.l()+", "+this.bb.l()+")"});
J.hf=function(a){return-1!=a.W()[z](this.Na.Y().Aa())};J.Zg=function(a){return-1!=a.W()[z](this.bb.Y().Aa())};J.Rh=function(a,b){var c=null,d=null;this.hf(a)?(this.lf(a,b),c=a,d=b):(this.lf(b,a),c=b,d=a);return[c,d]};J.lf=function(a,b){N(this.hf(a),"Mismatch between join predicate left operand and right relation.");N(this.Zg(b),"Mismatch between join predicate right operand and right relation.")};J.Yh=function(a,b){var c=this.Rh(a,b),d=c[0],c=c[1];return"eq"==this.V?this.Zh(d,c):this.$h(d,c)};
J.$h=function(a,b){for(var c=[],d=a.W(),g=b.W(),h=0;h<a[E][A];h++)for(var l=0;l<b[E][A];l++)if(this.hd(a[E][h].M(this.Na),b[E][l].M(this.bb))){var p=be(a[E][h],d,b[E][l],g);c[w](p)}d=a.W()[Ka](b.W());return new Td(c,d)};
J.Zh=function(a,b){var c=a,d=b,g=this.Na,h=this.bb;a[E][A]>b[E][A]&&(c=b,d=a,g=this.bb,h=this.Na);var l=new Sf,p=[];c[E][n](function(a){var b=String(a.M(g));l.add(b,a)});var B=c.W(),Pa=d.W();d[E][n](function(a){var b=String(a.M(h));l.s(b)&&l.get(b)[n](function(b){b=be(a,Pa,b,B);p[w](b)})});c=a.W()[Ka](b.W());return new Td(p,c)};
function Uf(a,b,c){return null===b?new pe(a,b,c):Db(b.l)?new Tf(a,b,c):new pe(a,b,c)};
var Vf={};K("lf.schema.DataStoreType",Vf,void 0);Vf.INDEXED_DB=0;Vf.MEMORY=1;Vf.LOCAL_STORAGE=2;Vf.FIREBASE=3;Vf.WEB_SQL=4;Vf.OBSERVABLE_STORE=5;function Wf(a,b,c,d){this.Bg=a;za(this,b);this.yd=c;this.h=d}Wf[C].l=function(){return this.Bg+"."+this[pb]};Wf[C].Jf=function(){return this.h[ub](function(a){return a.cb.lc()})};function Xf(a,b,c,d){this.B=a;this.qa=c;this.H=b;this.Fd=d;this.ib=null}K("lf.schema.Table",Xf,void 0);ia(Xf[C],I("B"));Xf[C].Ua=I("ib");Xf[C].Aa=function(){return this.ib||this.B};
Xf[C].vc=function(a){var b=new this.constructor(this.B);b.ib=a;return b};Xf[C].as=Xf[C].vc;Xf[C].createRow=Xf[C].cc;Xf[C].deserializeRow=Xf[C].dc;Xf[C].Ga=I("qa");Xf[C].wb=I("H");Xf[C].getConstraint=Xf[C].ic;Xf[C].Qb=I("Fd");Xf[C].Hb=function(){return this.B+".#"};
function T(a,b){ta(this,a);this.Yb=b;this.ib=null}J=T[C];ia(J,function(){return this.Yb+"("+this[gb][k]()+")"});J.l=function(){return this.Yb+"("+this[gb].l()+")"};J.Y=function(){return this[gb].Y()};f(J,function(){return this.l()});J.da=function(){return this[gb].da()};J.Ua=I("ib");J.Ga=function(){return[]};J.lc=Bb(!1);J.vc=function(a){this.ib=a;return this};T[C].as=T[C].vc;T[C].yf=function(){for(var a=[this],b=this;b instanceof T;)a[w](b[gb]),b=b[gb];return a};
function Yf(a){this.ib=a||null;this.D=new Xf("#UnknownTable",[],[],!1)}J=Yf[C];ia(J,Bb("*"));J.l=function(){return this[k]()};f(J,function(){return this.l()});J.Y=I("D");J.da=Bb(4);J.Ua=I("ib");J.Ga=function(){return[]};J.lc=Bb(!1);
K("lf.fn.avg",function(a){return new T(a,"AVG")},void 0);K("lf.fn.count",function(a){return new T(a||new Yf,"COUNT")},void 0);function Zf(a){return new T(a,"DISTINCT")}K("lf.fn.distinct",Zf,void 0);K("lf.fn.max",function(a){return new T(a,"MAX")},void 0);K("lf.fn.min",function(a){return new T(a,"MIN")},void 0);K("lf.fn.stddev",function(a){return new T(a,"STDDEV")},void 0);K("lf.fn.sum",function(a){return new T(a,"SUM")},void 0);K("lf.fn.geomean",function(a){return new T(a,"GEOMEAN")},void 0);
function U(a,b){le[F](this,"","");this.hi=b;this.bg=a}M(U,le);J=U[C];J.ca=Bb(null);ha(J,function(a,b){switch(this.hi){case 1:return this.ci(a,b);case 0:return this.bi(a,b);default:return this.ei(a,b)}});f(J,Bb("dummy_node"));J.Uc=function(){return this[r]()};J.jf=function(a){N(-1==this.bg||a[A]==this.bg)};J.ei=function(a,b){return new O(L(function(c){c(this.ja(a,[],b))},this))};J.ci=function(a,b){return this.ob(0)[Ia](a,b)[D](L(function(c){this.jf(c);return this.ja(a,c,b)},this))};
J.bi=function(a,b){var c=this.aa().map(function(c){return c[Ia](a,b)});return Qc(c)[D](L(function(c){var g=[];c[n](function(a){for(var b=0;b<a[A];++b)g[w](a[b])});this.jf(g);return this.ja(a,g,b)},this))};
function $f(a){U[F](this,-1,1);this.ef=a}M($f,U);f($f[C],function(){return"aggregation("+this.ef.map(function(a){return a.l()})[r]()+")"});$f[C].ja=function(a,b){b[n](function(a){(new ag(a,this.ef)).mh()},this);return b};function ag(a,b){this.Da=a;this.H=b}
ag[C].mh=function(){this.H[n](function(a){a=a.yf().reverse();for(var b=1;b<a[A];b++){var c=a[b],d=c.yf()[x](-1)[0],g=this.Mi(c),h=null;switch(c.Yb){case "MIN":h=bg(g,d);break;case "MAX":h=cg(g,d);break;case "DISTINCT":h=dg(g,d);break;case "COUNT":h=g[E][A];break;case "SUM":h=eg(g,d);break;case "AVG":0<g[E][A]&&(h=eg(g,d)/g[E][A]);break;case "GEOMEAN":h=fg(g,d);break;default:h=gg(g,d)}this.Da.hk(c,h)}},this)};ag[C].Mi=function(a){return a[gb]instanceof T?this.Da.hc(a[gb]):this.Da};
function bg(a,b){var c=null;a[E][n](function(a){a=a.M(b);if(null===c||a<c)c=a});return c}function cg(a,b){var c=null;a[E][n](function(a){a=a.M(b);if(null===c||a>c)c=a});return c}function eg(a,b){return a[E][jb](function(a,d){return a+d.M(b)},0)}function gg(a,b){var c=a[E].map(function(a){return a.M(b)});return jd[v](null,c)}function fg(a,b){var c=0,d=a[E][jb](function(a,d){var l=d.M(b);return 0!=l?(c++,a+ea.log(l)):a},0);return 0==c?null:ea.pow(ea.E,d/c)}
function dg(a,b){var c=new P;a[E][n](function(a){var g=a.M(b);c.set(g,a)});return new Td(c.c(),a.W())};
function V(){le[F](this,"","")}M(V,le);function hg(a,b){V[F](this);oa(this,a);la(this,b)}M(hg,V);function ig(a,b){hg[F](this,a,b)}M(ig,hg);function jg(a){V[F](this);oa(this,a)}M(jg,V);f(jg[C],function(){return"delete("+this[t][k]()+")"});function kg(a,b){V[F](this);oa(this,a);this.$e=b}M(kg,V);f(kg[C],function(){var a=[];this.$e&&(a=this.$e.map(function(a){return a.K[k]()},this));return"update("+this[t][k]()+", ["+a[H](",")+"])"});function lg(a){V[F](this);this.Ca=a}M(lg,V);
f(lg[C],function(){return"select("+this.Ca[r]()+")"});function mg(a){V[F](this);oa(this,a)}M(mg,V);f(mg[C],function(){var a="table_access("+this[t][k]();null===this[t].Ua()||(a+=" as "+this[t].Ua());return a+")"});function ng(){V[F](this)}M(ng,V);f(ng[C],Bb("cross_product"));function og(a,b){V[F](this);this.h=a;this.Jb=b}M(og,V);f(og[C],function(){var a="project("+this.h[r]();if(null!==this.Jb)var b=this.Jb.map(function(a){return a.l()})[H](", "),a=a+(", groupBy("+b+")");return a+")"});
function pg(a){V[F](this);this.J=a}M(pg,V);f(pg[C],function(){return"order_by("+te(this.J)+")"});function qg(a){V[F](this);this.h=a}M(qg,V);f(qg[C],function(){return"aggregation("+this.h[r]()+")"});function rg(a){V[F](this);this.h=a}M(rg,V);f(rg[C],function(){return"group_by("+this.h[r]()+")"});function sg(a){V[F](this);this.oa=a}M(sg,V);f(sg[C],function(){return"limit("+this.oa+")"});function tg(a){V[F](this);this.ma=a}M(tg,V);f(tg[C],function(){return"skip("+this.ma+")"});
function ug(a){V[F](this);this.Ca=a}M(ug,V);f(ug[C],function(){return"join("+this.Ca[r]()+")"});
function vg(){};
function wg(){}M(wg,vg);wg[C].yb=function(a){this.ha=a;this.Sa(this.ha);return this.ha};wg[C].Sa=function(a){if(a instanceof lg){N(1==a.ua(),"SelectNode must have exactly one child.");var b=this.nf(a.Ca),b=this.Lh(b);Jf(a,a,b[0],b[1]);a==this.ha&&(this.ha=b[0]);a=b[0]}a.aa()[n](function(a){this.Sa(a)},this)};wg[C].nf=function(a){if(0==a.ua()||"and"!=a.Nb)return[a];var b=a.aa()[x]().map(function(b){a[qb](b);return this.nf(b)},this);return pc(b)};
wg[C].Lh=function(a){var b=null,c=null;a.map(function(a,g){var h=new lg(a);0==g?b=h:c.ia(h);c=h},this);return[b,c]};
function xg(){}M(xg,vg);xg[C].yb=function(a){this.ha=a;this.Sa(this.ha);return this.ha};xg[C].Sa=function(a){if(a instanceof ng)for(;2<a.ua();){for(var b=new ng,c=0;2>c;c++){var d=a.Ld(0);b.ia(d)}a.tc(b,0)}a.aa()[n](function(a){this.Sa(a)},this)};
function yg(){U[F](this,2,0)}M(yg,U);f(yg[C],Bb("cross_product"));yg[C].ja=function(a,b){for(var c=b[0],d=b[1],g=[],h=c.W(),l=d.W(),p=0;p<c[E][A];p++)for(var B=0;B<d[E][A];B++){var Pa=be(c[E][p],h,d[E][B],l);g[w](Pa)}c=c.W()[Ka](d.W());return[new Td(g,c)]};

function zg(a,b){we[F](this,a,b);this.Qa=a.o(wd);this.xb=a.o(xd)}M(zg,we);wa(zg[C],Bb(2));zg[C].Ke=function(a){0==this.da()?this.Gj(a):this.Sc()};zg[C].Gj=function(a){this.Id[n](function(b,c){b instanceof se&&this.xb.Mg(b,a[c])},this)};zg[C].Sc=function(){var a=this.xb.we(this.ca().c());0!=a[A]&&(a=new ye(this[Ta],a),this.Qa.Tb(a))};
function Ag(){qe[F](this)}M(Ag,qe);sa(Ag[C],function(){var a=new Ag;a.bd(this);a.f=this.f;return a});na(Ag[C],function(a){Ag.eb[q][F](this,a);this.$d(a);return this});
function Bg(){qe[F](this)}M(Bg,qe);sa(Bg[C],function(){var a=new Bg;a.bd(this);a.Wa=this.Wa;this[Oa]&&la(a,this[Oa]instanceof ce?this[Oa]:this[Oa][x]());a.uc=this.uc;a.Zb=this.Zb;return a});na(Bg[C],function(a){Bg.eb[q][F](this,a);this.Zb&&la(this,this.Zb instanceof ce?a[this.Zb.pb()]:this.Zb.map(function(b){return b instanceof ce?a[b.pb()]:b}));return this});
function Cg(){qe[F](this)}M(Cg,qe);sa(Cg[C],function(){var a=new Cg;a.bd(this);oa(a,this[t]);a.set=this.set?this.set[x]():this.set;return a});na(Cg[C],function(a){Cg.eb[q][F](this,a);this.set[n](function(b){-1!=b.Xc&&va(b,a[b.Xc])});this.$d(a);return this});
function Dg(a,b){if(null==b)return"NULL";switch(a){case 1:return b?1:0;case 3:case 4:return b;case 0:return"'"+ad(b)+"'";default:return"'"+b[r]()+"'"}}function Eg(a,b){var c=a.uc?"INSERT OR REPLACE":"INSERT",d=a.Wa.wb(),c=c+(" INTO "+a.Wa[k]()+"("),c=c+d.map(function(a){return a[k]()})[H](", "),c=c+") VALUES (";return a[Oa].map(function(a){var h=d.map(function(c){var d=a.w()[c[k]()];return b?null!=d?"#":"NULL":Dg(c.da(),d)});return c+h[H](", ")+");"})[H]("\n")}
function Fg(a){switch(a){case "between":return"BETWEEN";case "eq":return"=";case "gte":return">=";case "gt":return">";case "in":return"IN";case "lte":return"<=";case "lt":return"<";case "match":return"LIKE";case "neq":return"<>";default:return"UNKNOWN"}}function Gg(a,b,c,d){return a instanceof ce?"?"+a.pb()[r]():d?null!=a?"#":"NULL":"match"==b?"'"+a[r]()+"'":"in"==b?"("+a.map(function(a){return Dg(c,a)})[H](", ")+")":"between"==b?Dg(c,a[0])+" AND "+Dg(c,a[1]):Dg(c,a)[r]()}
function Hg(a,b){return a.aa().map(function(a){return"("+Ig(a,b)+")"})[H]("and"==a.Nb?" AND ":" OR ")}function Ig(a,b){if(a instanceof pe)return[a.K.l(),Fg(a.V),Gg(a[y],a.V,a.K.da(),b)][H](" ");if(a instanceof Lf)return Hg(a,b);if(a instanceof Tf)return[a.Na.l(),Fg(a.V),a.bb.l()][H](" ");throw new R("NotSupportedError","toSql does not support predicate type: "+typeof a);}function Jg(a,b){var c=Ig(a,b);return c?" WHERE "+c:""}
function Kg(a,b){var c="UPDATE "+a[t][k]()+" SET ",c=c+a.set.map(function(a){var b=a.K.l()+" = ";return-1!=a.Xc?b+"?"+a.Xc[r]():b+Dg(a.K.da(),a[y])[r]()})[H](", ");a.C&&(c+=Jg(a.C,b));return c+";"}
function Lg(a,b){var c="*";a.h[A]&&(c=a.h.map(function(a){return a.Ua()?a.l()+" AS "+a.Ua():a.l()})[H](", "));var d=a.f.map(function(a){return a.Aa()!=a[k]()?a[k]()+" AS "+a.Aa():a[k]()})[H](", "),c="SELECT "+c+" FROM "+d;a.C&&(c+=Jg(a.C,b));a.J&&(d=a.J.map(function(a){return a.K.l()+(0==a.sb?" DESC":" ASC")})[H](", "),c+=" ORDER BY "+d);a.la&&(d=a.la.map(function(a){return a.l()})[H](", "),c+=" GROUP BY "+d);a.oa&&(c+=" LIMIT "+a.oa[r]());a.ma&&(c+=" SKIP "+a.ma[r]());return c+";"}
function Mg(a,b){var c=b||!1,d=a.Df();if(d instanceof Bg)return Eg(d,c);if(d instanceof Ag){var g="DELETE FROM "+d.f[k]();d.C&&(g+=Jg(d.C,c));return g+";"}if(d instanceof Cg)return Kg(d,c);if(d instanceof se)return Lg(d,c);throw new R("NotSupportedError","toSql not implemented for "+typeof d);};
function Ng(a,b){this.global=a;this.Vj=a.o(vd);this.Qa=a.o(wd);this.a=b}K("lf.query.BaseBuilder",Ng,void 0);ha(Ng[C],function(){try{this.jb()}catch(a){return Pc(a)}return new O(function(a,c){var d=new zg(this[Ta],[this.Ic()]);this.Qa.Tb(d)[D](function(c){a(c[0].re())},c)},this)});ha(Ng[C],Ng[C][Ia]);Ng[C].wf=function(){var a=L(function(a){return a.Uc(this.a)+"\n"},this);return Kf(this.se().Gb(),a)};Ng[C].explain=Ng[C].wf;na(Ng[C],function(a){this.a[q](a);return this});na(Ng[C],Ng[C][q]);
Ng[C].vk=function(a){return Mg(this,a)};Ng[C].toSql=Ng[C].vk;J=Ng[C];J.jb=zb();J.Df=function(){return this.a.clone()};J.sd=I("a");J.se=function(){null==this.gg&&(this.gg=this.Vj.Si(this.a));return this.gg};J.Ic=function(){return{context:this.Df(),Ne:this.se()}};J.Qi=function(){return{context:this.sd(),Ne:this.se()}};
function Og(a){Ng[F](this,a,new Ag)}M(Og,Ng);K("lf.query.DeleteBuilder",Og,void 0);Og[C].f=function(a){this.dh();this.a.f=a;return this};Og[C].from=Og[C].f;Og[C].C=function(a){this.Zd();this.a.C=a;return this};Og[C].where=Og[C].C;Og[C].dh=function(){if(null!=this.a.f)throw new R("SyntaxError","from() has already been called.");};Og[C].Zd=function(){if(null!=this.a.C)throw new R("SyntaxError","where() has already been called.");};
Og[C].jb=function(){Og.eb.jb[F](this);if(null==this.a.f)throw new R("SyntaxError","Invalid usage of delete()");};
function Pg(a,b){Ng[F](this,a,new Bg);this.a.uc=b||!1}M(Pg,Ng);K("lf.query.InsertBuilder",Pg,void 0);Pg[C].jb=function(){Pg.eb.jb[F](this);var a=this.a;if(null==a.Wa||null==a[Oa])throw new R("SyntaxError","Invalid usage of insert()");if(a.uc&&null===a.Wa.ic().te())throw new R("SyntaxError","Attempted to insert or replace in a table with no primary key.");};Pg[C].Wa=function(a){this.eh();this.a.Wa=a;return this};Pg[C].into=Pg[C].Wa;
la(Pg[C],function(a){this.fh();a instanceof ce||a[ub](function(a){return a instanceof ce})?this.a.Zb=a:la(this.a,a);return this});la(Pg[C],Pg[C][Oa]);Pg[C].eh=function(){if(null!=this.a.Wa)throw new R("SyntaxError","into() has already been called.");};Pg[C].fh=function(){if(null!=this.a[Oa])throw new R("SyntaxError","values() has already been called.");};
function Qg(a){return Rg("and",e[C][x][F](arguments))}K("lf.op.and",Qg,void 0);K("lf.op.or",function(a){return Rg("or",e[C][x][F](arguments))},void 0);function Rg(a,b){var c=new Lf(a);b[n](function(a){c.ia(a)});return c}K("lf.op.not",function(a){a.Od(!0);return a},void 0);
function W(a,b){Ng[F](this,a,new se);this.xf=this.Pg=!1;this.a.h=b;this.th();this.sh()}M(W,Ng);K("lf.query.SelectBuilder",W,void 0);J=W[C];J.jb=function(){W.eb.jb[F](this);var a=this.a;if(null==a.f)throw new R("SyntaxError","Invalid usage of select()");if(Db(a.Lb)&&!Db(a.oa)||Db(a.Wb)&&!Db(a.ma))throw new R("SyntaxError","Binding parameters of limit/skip without providing values");this.zh()};
J.th=function(){var a=this.a.h[Ea](function(a){return a instanceof T&&"DISTINCT"==a.Yb},this);if(0!=a[A]&&(1!=a[A]||1!=this.a.h[A]))throw new R("SyntaxError","Invalid usage of lf.fn.distinct()");};J.zh=function(){null!=this.a.la?this.uh():this.yh()};
J.uh=function(){var a=this.a.h[Ea](function(a){return!(a instanceof T)}).map(function(a){return a.l()}),b=!1;if(0==this.a.la[A]||0==this.a.h[A])b=!0;else{var c=this.a.la.map(function(a){return a.l()});(b=a[ub](function(a){return-1==c[z](a)}))||(b=this.a.la[ub](function(a){a=a.da();return 6==a||0==a}))}if(b)throw new R("SyntaxError","Invalid projection list or groupBy columns");};
J.yh=function(){var a=this.a.h[ub](function(a){return a instanceof T},this),b=this.a.h[ub](function(a){return!(a instanceof T)},this)||0==this.a.h[A];if(a&&b)throw new R("SyntaxError","Invalid projection list, aggregated and non-aggregated can't be mixed.");};J.sh=function(){this.a.h[n](function(a){if(a instanceof T&&!Sg(a.Yb,a.da()))throw new R("SyntaxError","Invalid aggregation detected for"+a.l());},this)};
J.Yd=function(a,b){if(null!=a)throw new R("SyntaxError",b+"() has already been called.");};J.kf=function(a,b){if(0>a)throw new R("SyntaxError",b+"() does not accept negative values");};J.f=function(a){if(this.xf)throw new R("SyntaxError","from() has already been called.");this.xf=!0;null==this.a.f&&(this.a.f=[]);this.a.f[w][v](this.a.f,e[C][x][F](arguments));return this};W[C].from=W[C].f;
W[C].C=function(a){if(this.Pg)throw new R("SyntaxError","where() has already been called.");this.Pg=!0;this.mf(a);return this};W[C].where=W[C].C;W[C].mf=function(a){null!=this.a.C&&(a=Qg(a,this.a.C));this.a.C=a};W[C].Ae=function(a,b){null==this.a.f&&(this.a.f=[]);this.a.f[w](a);this.mf(b);return this};W[C].innerJoin=W[C].Ae;W[C].vj=function(){throw new R("NotSupportedError","Not implemented yet");};W[C].leftOuterJoin=W[C].vj;
W[C].oa=function(a){this.Yd(this.a.oa||this.a.Lb,"limit");a instanceof ce?this.a.Lb=a:(this.kf(a,"limit"),this.a.oa=a);return this};W[C].limit=W[C].oa;W[C].ma=function(a){this.Yd(this.a.ma||this.a.Wb,"skip");a instanceof ce?this.a.Wb=a:(this.kf(a,"skip"),this.a.ma=a);return this};W[C].skip=W[C].ma;W[C].J=function(a,b){null==this.a.J&&(this.a.J=[]);this.a.J[w]({K:a,sb:null!=b?b:1});return this};W[C].orderBy=W[C].J;
W[C].la=function(a){this.Yd(this.a.la,"groupBy");null==this.a.la&&(this.a.la=[]);this.a.la[w][v](this.a.la,e[C][x][F](arguments));return this};W[C].groupBy=W[C].la;function Sg(a,b){switch(a){case "COUNT":case "DISTINCT":return!0;case "AVG":case "GEOMEAN":case "STDDEV":case "SUM":return 4==b||3==b;case "MAX":case "MIN":return 4==b||3==b||5==b||2==b}return!1}sa(W[C],function(){var a=new W(this[Ta],this.a.h);a.a=this.a.clone();a.a.zc=null;return a});sa(W[C],W[C].clone);
function Tg(a,b){Ng[F](this,a,new Cg);oa(this.a,b)}M(Tg,Ng);K("lf.query.UpdateBuilder",Tg,void 0);Tg[C].set=function(a,b){var c={Xc:b instanceof ce?b.pb():-1,K:a,value:b};null!=this.a.set?this.a.set[w](c):this.a.set=[c];return this};Tg[C].set=Tg[C].set;Tg[C].C=function(a){this.Zd();this.a.C=a;return this};Tg[C].where=Tg[C].C;Tg[C].Zd=function(){if(null!=this.a.C)throw new R("SyntaxError","where() has already been called.");};
Tg[C].jb=function(){Tg.eb.jb[F](this);if(null==this.a.set)throw new R("SyntaxError","Invalid usage of update()");if(this.a.set[ub](function(a){return a[y]instanceof ce}))throw new R("SyntaxError","Update set value not bound");};
function Ug(a){this.a=a;this.Ea=null}Ug[C].gc=function(){null===this.Ea&&(this.Ea=this.kd());return this.Ea};function Vg(a){Ug[F](this,a)}M(Vg,Ug);Vg[C].kd=function(){return this.a.uc?new ig(this.a.Wa,this.a[Oa]):new hg(this.a.Wa,this.a[Oa])};function Wg(a){Ug[F](this,a)}M(Wg,Ug);Wg[C].kd=function(){var a=new kg(this.a[t],this.a.set),b=null!=this.a.C?new lg(this.a.C.Db()):null,c=new mg(this.a[t]);null===b?a.ia(c):(b.ia(c),a.ia(b));return a};
function Xg(a,b){this.Ea=a;this.Se=b}Xg[C].gc=function(){this.Se[n](function(a){this.Ea=a.yb(this.Ea)},this);return this.Ea};
function Yg(a){Ug[F](this,a)}M(Yg,Ug);Yg[C].kd=function(){var a=new jg(this.a.f),b=null!=this.a.C?new lg(this.a.C.Db()):null,c=new mg(this.a.f);null===b?a.ia(c):(b.ia(c),a.ia(b));return(new Xg(a,[new wg])).gc()};
function Zg(){}M(Zg,vg);Zg[C].yb=function(a){this.ha=a;this.Sa(this.ha);return this.ha};Zg[C].Sa=function(a){if(a instanceof lg&&a.Ca instanceof Tf){N(1==a.ua(),"SelectNode must have exactly one child.");var b=a.ob(0);if(b instanceof ng){var c=new ug(a.Ca);Jf(a,b,c,c);a==this.ha&&(this.ha=c);a=c}}a.aa()[n](function(a){this.Sa(a)},this)};
function $g(){this.Wd=new Q}M($g,vg);J=$g[C];J.yb=function(a){this.ha=a;this.Sa(this.ha);this.Wd[Qa]();return this.ha};J.Sa=function(a){if(this.Mf(a)){var b=a.Ca instanceof pe?this.Tj(a):this.Sj(a);this.Wd.add(a);b==a&&(b=a.ob(0));null!==b&&(Hb(b[Ga]())&&(this.ha=b),this.Mf(b)&&!this.Wd[u](b)&&this.Sa(b))}else a.aa()[n](function(a){this.Sa(a)},this)};
J.Hd=function(a,b){var c=a;if(this.lk(a))c=Hf(a),this.Hd(a,b);else if(this.kk(a)){var d=[],c=If(a,b,function(a){a=new lg(a.Ca);d[w](a);return a});d[n](function(a){this.Hd(a,b)},this)}return c};J.Tj=function(a){var b=new Q([a.Ca.K.Y().Aa()]),c=function(a){return this.vf(a,b)}[q](this);return this.Hd(a,c)};J.Sj=function(a){var b=new Q([a.Ca.Na.Y().Aa(),a.Ca.bb.Y().Aa()]),c=function(a){return this.vf(a,b)}[q](this);return this.Hd(a,c)};
J.vf=function(a,b){var c=new Q;Df(a)[n](function(a){c.add(a[t].Aa())},this);a instanceof mg&&c.add(a[t].Aa());return c.Ih(b)};J.Mf=function(a){return a instanceof lg&&!(a.Ca instanceof Lf)};J.kk=function(a){a=a.ob(0);return a instanceof ng||a instanceof ug};J.lk=function(a){return a.ob(0)instanceof lg};
function bh(a){Ug[F](this,a);this.lg=this.Xf=this.yg=this.cg=this.ff=this.If=this.ug=this.sf=this.Ag=null}M(bh,Ug);J=bh[C];J.kd=function(){this.Ai();var a=this.Fh(),b=[new wg,new xg,new $g,new Zg];return(new Xg(a,b)).gc()};J.Ai=function(){this.Gi();this.vi();this.Ei();this.Bi();this.Fi();this.zi();this.xi();this.ui();this.Ci()};
J.Fh=function(){for(var a=[this.Xf,this.yg,this.lg,this.cg,this.ff,this.If,this.ug,this.sf],b=null,c=null,d=0;d<a[A];d++){var g=a[d];null!==g&&(null===c?c=g:a[b].ia(g),b=d)}this.Ag[n](function(c){a[b].ia(c)});return c};J.Gi=function(){this.Ag=this.a.f.map(function(a){return new mg(a)},this)};J.vi=function(){2<=this.a.f[A]&&(this.sf=new ng)};J.Ei=function(){this.ug=null!=this.a.C?new lg(this.a.C.Db()):null};J.Bi=function(){this.a.J&&(this.cg=new pg(this.a.J))};
J.zi=function(){null!=this.a.oa&&(this.Xf=new sg(this.a.oa))};J.Fi=function(){null!=this.a.ma&&0<this.a.ma&&(this.yg=new tg(this.a.ma))};J.xi=function(){null!=this.a.la&&(this.If=new rg(this.a.la))};J.ui=function(){var a=this.a.h[Ea](function(a){return a instanceof T});null!=this.a.J&&this.a.J[n](function(b){b.K instanceof T&&a[w](b.K)});0<a[A]&&(this.ff=new qg(a))};J.Ci=function(){this.lg=new og(this.a.h||[],this.a.la||null)};
function ch(){}ch[C].create=function(a){var b=null;if(a instanceof Bg)b=new Vg(a);else if(a instanceof Ag)b=new Yg(a);else if(a instanceof se)b=new bh(a);else if(a instanceof Cg)b=new Wg(a);else throw new R("SyntaxError","Unknown query context");return b.gc()};
function dh(a){U[F](this,1,1);this.D=a}M(dh,U);f(dh[C],function(){return"delete("+this.D[k]()+")"});dh[C].ca=I("D");dh[C].ja=function(a,b){var c=b[0][E].map(function(a){return a.ta});a[m](this.D,c);return[Wd()]};
function eh(a){U[F](this,1,1);this.Hf=a}M(eh,U);f(eh[C],function(){return"groupBy("+this.Hf.map(function(a){return a.l()})[r]()+")"});eh[C].ja=function(a,b){return this.oh(b[0])};eh[C].oh=function(a){var b=new Sf,c=function(a){return this.Hf.map(function(b){return a.M(b)},this)[H](",")}[q](this);a[E][n](function(a){b.add(c(a),a)},this);return b.G().map(function(c){return new Td(b.get(c),a.W())},this)};
function fh(a){N(1<a[A],"Should only be called for cross-column indices.");a=a.map(function(a){return a.c()});a=od[v](null,a);var b=[];nd(a,function(a){b[w](a)});return b}function gh(a){this.Kb=a}gh[C].pd=function(){return 1==this.Kb.h[A]?[Rd()]:[this.Kb.h.map(function(){return Rd()})]};function hh(a,b){this.Kb=a;this.ra=b;this.de=this.Vf=null}
hh[C].ph=function(a){var b=new P;this.ra.G()[n](function(c){var d=this.ra.get(c).map(function(b){return a.td(b)},this),g=new Af([Rd()]);d[n](function(a){a=new Af(a.uk());g=Bf(g,a)});b.set(c,g)},this);return b};hh[C].mi=function(a){for(var b=this.Kb.h[A]-1;0<=b;b--){var c=this.Kb.h[b];if(null!==a.get(c.cb[k](),null))break;a.set(c.cb[k](),new Af([Rd()]))}};hh[C].pd=function(a){if(this.Vf==a)return this.de;var b=this.ph(a);this.mi(b);this.de=1==this.Kb.h[A]?b.c()[0].c():fh(this.Yi(b));this.Vf=a;return this.de};
hh[C].Yi=function(a){var b=new P,c=0;this.Kb.h[n](function(a){b.set(a.cb[k](),c);c++});return a.G()[vb](function(a,c){return b.get(a)-b.get(c)}).map(function(b){return a.get(b)})};
function ih(a,b){this.Dg=b;this.N=a.o(ud)}ih[C].Bh=function(a,b){var c=b[Ea](this.pj,this);if(0==c[A])return null;c=this.yi(c);if(0==c[A])return null;if(1==c[A])return c[0];var d=Number.MAX_VALUE;return c[jb](function(b,c){var l=c.nh(a);return l<d?(d=l,c):b},null)};ih[C].yi=function(a){return this.Dg.Ga().map(function(b){b=new jh(this.N,b);b.Hh(a);return b},this)[Ea](function(a){return a.uj()})};ih[C].pj=function(a){return a instanceof pe&&a.Nf()?a.K.Y()==this.Dg:!1};
function jh(a,b){this.N=a;this.qb=b;this.Kf=new Q;this.Kf[kb](this.qb.h.map(function(a){return a.cb[k]()}));this.Ge=this.ra=null}J=jh[C];J.Ti=function(){return null===this.ra?[]:this.ra.c()};J.Cf=function(){N(this.ra);null===this.Ge&&(this.Ge=new hh(this.qb,this.ra));return this.Ge};J.Hh=function(a){a[n](function(a){var c=a.wb()[0][k]();this.Kf[u](c)&&(null===this.ra&&(this.ra=new Sf),this.ra.add(c,a.ka()))},this)};
J.uj=function(){if(null===this.ra)return!1;for(var a=!1,b=!0,c=0;c<this.qb.h[A];c++){var d=this.ra.s(this.qb.h[c].cb[k]());if(a&&d){b=!1;break}d||(a=!0)}return b};J.nh=function(a){a=this.Cf().pd(a);var b=this.N.get(this.qb.l());return a[jb](function(a,d){return a+b.fd(d)},0)};
function kh(a,b,c,d){U[F](this,0,-1);this.N=a.o(ud);this.index=b;this.Tf=c;this.Re=d;this.Sd=this.Rd=!1}M(kh,U);f(kh[C],function(){return"index_range_scan("+this[Za].l()+", ?, "+(this.Re?"reverse":"natural")+(this.Rd?", limit:?":"")+(this.Sd?", skip:?":"")+")"});kh[C].Uc=function(a){var b=this[r](),c=this.Tf.pd(a),b=b[Ja]("?",c[r]());this.Rd&&(b=b[Ja]("?",a.oa[r]()));this.Sd&&(b=b[Ja]("?",a.ma[r]()));return b};
kh[C].ja=function(a,b,c){a=this.Tf.pd(c);c=this.N.get(this[Za].l()).Va(a,this.Re,this.Rd?c.oa:void 0,this.Sd?c.ma:void 0).map(function(a){return new Xc(a,{})},this);return[Zd(c,[this[Za].Bg])]};
function lh(a){U[F](this,1,1);this.Gd=a}M(lh,U);f(lh[C],Bb("select(?)"));lh[C].Uc=function(a){a=a.td(this.Gd);return this[r]()[Ja]("?",a[r]())};lh[C].ja=function(a,b,c){return[c.td(this.Gd).eval(b[0])]};
function mh(a,b){U[F](this,1,1);this.pa=a.o(td);this.D=b}M(mh,U);f(mh[C],function(){return"table_access_by_row_id("+this.D[k]()+")"});mh[C].ca=I("D");mh[C].ja=function(a,b){return[Zd(this.pa.get(b[0].Xi()),[this.D.Aa()])]};
function nh(a,b){U[F](this,0,-1);this.pa=a.o(td);this.N=a.o(ud);oa(this,b)}M(nh,U);f(nh[C],function(){var a="table_access("+this[t][k]();null===this[t].Ua()||(a+=" as "+this[t].Ua());return a+")"});nh[C].ca=I("table");nh[C].ja=function(){var a=this.N.get(this[t].Hb()).Va();return[Zd(this.pa.get(a),[this[t].Aa()])]};
function oh(a){this.m=a}M(oh,vg);oh[C].yb=function(a,b){this.ha=a;Ef(a,function(a){return a instanceof nh})[n](function(a){var d=this.ti(a);if(0!=d[A]){var g=(new ih(this.m,a[t])).Bh(b,d.map(function(a){return b.td(a.Gd)}));if(null!==g){var h=new P;d[n](function(a){h.set(a.Gd,a)},this);this.ha=this.dk(g,h,a,b)}}},this);return this.ha};oh[C].ti=function(a){var b=[];for(a=a[Ga]();a;)a instanceof lh&&b[w](a),a=a[Ga]();return b};
oh[C].dk=function(a,b,c){a.Ti().map(function(a){return b.get(a)})[n](Ff);a=new kh(this.m,a.qb,a.Cf(),!1);var d=new mh(this.m,c[t]);d.ia(a);Jf(c,c,d,a);return a.Gb()};
function ph(a,b){U[F](this,0,-1);this.N=a.o(ud);this.D=b}M(ph,U);f(ph[C],function(){return"insert("+this.D[k]()+")"});ph[C].ca=I("D");ph[C].ja=function(a,b,c){qh(this.D,c[Oa],this.N);a.rb(this.D,c[Oa]);return[Zd(c[Oa],[this.D[k]()])]};function qh(a,b,c){a=a.ic().te();if(null===a?0:a.h[0][Na]){var d=a.h[0].cb[k](),g=c.get(a.l()).max()[0]||0;b[n](function(a){if(0==a.w()[d]||null==a.w()[d])g++,a.w()[d]=g})}}function rh(a,b){U[F](this,0,-1);this.N=a.o(ud);this.D=b}M(rh,U);
f(rh[C],function(){return"insert_replace("+this.D[k]()+")"});rh[C].ca=I("D");rh[C].ja=function(a,b,c){qh(this.D,c[Oa],this.N);a.Be(this.D,c[Oa]);return[Zd(c[Oa],[this.D[k]()])]};
function sh(a){U[F](this,2,0);this.kg=a}M(sh,U);f(sh[C],function(){return"join("+this.kg[r]()+")"});sh[C].ja=function(a,b){return[this.kg.Yh(b[0],b[1])]};
function th(){U[F](this,1,1)}M(th,U);f(th[C],Bb("limit(?)"));th[C].Uc=function(a){return this[r]()[Ja]("?",a.oa[r]())};th[C].ja=function(a,b,c){b[0][E][G](c.oa);return b};
function uh(a){U[F](this,-1,1);this.J=a}M(uh,U);J=uh[C];f(J,function(){return"order_by("+te(this.J)+")"});J.ja=function(a,b){if(1==b[A]){var c=this.oi(b[0]);(null===c?b[0]:b[0].hc(c))[E][vb](this.Vh[q](this))}else b[vb](this.$j[q](this));return b};J.oi=function(a){for(var b=null,c=0;c<this.J[A];c++){var d=Zf(this.J[c].K);if(a.ij(d)){b=d;break}}return b};
J.L=function(a,b){var c=null,d=null,g=null,h=-1;do h++,g=this.J[h].K,c=this.J[h].sb,d=a(g),g=b(g);while(d==g&&h+1<this.J[A]);d=d<g?-1:d>g?1:0;return 1==c?d:-d};J.$j=function(a,b){return this.L(function(b){return b instanceof T?a.hc(b):a[E][a[E][A]-1].M(b)},function(a){return a instanceof T?b.hc(a):b[E][b[E][A]-1].M(a)})};J.Vh=function(a,b){return this.L(function(b){return a.M(b)},function(a){return b.M(a)})};
function vh(a,b){this.Da=a;this.H=b}vh[C].Gf=function(){return this.H[ub](function(a){return a instanceof T},this)?this.gj():this.hj()};
vh[C].gj=function(){if(1==this.H[A]&&"DISTINCT"==this.H[0].Yb){var a=this.Da.hc(this.H[0])[E].map(function(a){var b=new $d(new Xc(-1,{}),this.Da.De());b.Ue(this.H[0],a.M(this.H[0][gb]));return b},this);return new Td(a,[])}var b=new $d(new Xc(-1,{}),this.Da.De());this.H[n](function(a){var d=a instanceof T?this.Da.hc(a):this.Da[E][0].M(a);b.Ue(a,d)},this);return new Td([b],this.Da.W())};
vh[C].hj=function(){var a=e(this.Da[E][A]),b=this.Da.De();this.Da[E][n](function(c,d){a[d]=new $d(new Xc(c.ta.id(),{}),b);this.H[n](function(b){a[d].Ue(b,c.M(b))},this)},this);return new Td(a,this.Da.W())};function wh(a,b){var c=a.map(function(a){return(new vh(a,b)).Gf()[E][0]});return new Td(c,a[0].W())};
function xh(a,b){U[F](this,-1,1);this.h=a;this.Jb=b}M(xh,U);J=xh[C];f(J,function(){var a="project("+this.h[r]();if(null!==this.Jb)var b=this.Jb.map(function(a){return a.l()})[H](", "),a=a+(", groupBy("+b+")");return a+")"});J.ja=function(a,b){return 0==b[A]?[Wd()]:1==b[A]?[this.fi(b[0])]:[this.di(b)]};J.jj=function(){return this.h[ub](function(a){return a instanceof T})||null!==this.Jb};J.di=function(a){return wh(a,this.h)};J.fi=function(a){return 0==this.h[A]?a:(new vh(a,this.h)).Gf()};
function yh(){U[F](this,1,1)}M(yh,U);f(yh[C],Bb("skip(?)"));yh[C].Uc=function(a){return this[r]()[Ja]("?",a.ma[r]())};yh[C].ja=function(a,b,c){return[new Td(b[0][E][x](c.ma),b[0].W())]};
function zh(){}M(zh,vg);zh[C].yb=function(a){var b=Ef(a,function(a){return a instanceof th||a instanceof yh});if(0==b[A])return a;var c=this.si(a);if(null===c)return a;b[n](function(a){this.Dj(a,c)},this);return c.Gb()};zh[C].Dj=function(a,b){a instanceof th?b.Rd=!0:b.Sd=!0;return Ff(a).parent};zh[C].si=function(a){a=Ef(a,function(a){return a instanceof kh},function(a){return a instanceof xh&&a.jj()||a instanceof uh||1!=a.ua()||a instanceof lh});return 0<a[A]?a[0]:null};
function Ah(a){this.m=a}M(Ah,vg);Ah[C].yb=function(a){var b=Bh(a);if(null===b)return a;a=this.bh(b);a==b&&(a=this.ah(b));return a.Gb()};Ah[C].bh=function(a){var b=a,c=Ch(a.ob(0));if(null!==c){var d;d=a.J;for(var g=null,h=c[t].Ga(),l=0;l<h[A]&&null===g;l++)g=Dh(h[l],d);d=g;if(null===d)return b;b=new kh(this.m,d.qb,new gh(d.qb),d.Qf);d=new mh(this.m,c[t]);d.ia(b);Ff(a);b=Jf(c,c,d,b)}return b};
Ah[C].ah=function(a){var b=a,c=Eh(a.ob(0));if(null!==c){var d=Dh(c[Za],a.J);if(null===d)return b;c.Re=d.Qf;b=Ff(a).parent}return b};function Eh(a){a=Ef(a,function(a){return a instanceof kh},function(a){return 1!=a.ua()});return 0<a[A]?a[0]:null}function Ch(a){a=Ef(a,function(a){return a instanceof nh},function(a){return 1!=a.ua()});return 0<a[A]?a[0]:null}function Bh(a){a=Ef(a,function(a){return a instanceof uh});return 0<a[A]?a[0]:null}
function Dh(a,b){if(a.h[A]!=b[A]||!b[wb](function(b,c){return b.K[k]()==a.h[c].cb[k]()}))return null;var c=Fh(b,a);return c[0]||c[1]?{qb:a,Qf:c[1]}:null}function Fh(a,b){var c=a[jb](function(a,b){return a<<1|(0==b.sb?0:1)},0),d=b.h[jb](function(a,b){return a<<1|(0==b.sb?0:1)},0),d=c^d,c=0==d,d=d==ea.pow(2,ea.max(a[A],b.h[A]))-1;return[c,d]};
function Gh(a,b,c){this.Ea=a;this.Uj=b;this.Se=c}Gh[C].gc=function(){this.Se[n](function(a){this.Ea=a.yb(this.Ea,this.Uj)},this);return this.Ea};
function Hh(a,b){U[F](this,1,1);this.D=a;this.Bk=b}M(Hh,U);f(Hh[C],function(){return"update("+this.D[k]()+")"});Hh[C].ca=I("D");Hh[C].ja=function(a,b){var c=b[0][E].map(function(a){var b=this.D.dc(a.ta.Fa());this.Bk[n](function(a){b.w()[a.K[k]()]=a[y]},this);return b},this);a[xb](this.D,c);return[Wd()]};
function Ih(a){this.m=a}Ih[C].create=function(a,b){if(a instanceof ig||a instanceof hg)return this.he(a,b);if(a instanceof og||a instanceof sg||a instanceof tg)return this.he(a,b,[new oh(this.m),new Ah(this.m),new zh]);if(a instanceof jg||a instanceof kg)return this.he(a,b,[new oh(this.m)]);throw new R("NotSupportedError","Unknown query plan node");};Ih[C].he=function(a,b,c){a=Cf(a,L(this.zj,this));return null!=c?new ue((new Gh(a,b,c)).gc()):new ue(a)};
Ih[C].zj=function(a){if(a instanceof og)return new xh(a.h,a.Jb);if(a instanceof rg)return new eh(a.h);if(a instanceof qg)return new $f(a.h);if(a instanceof pg)return new uh(a.J);if(a instanceof tg)return new yh;if(a instanceof sg)return new th;if(a instanceof lg)return new lh(a.Ca.ka());if(a instanceof ng)return new yg;if(a instanceof ug)return new sh(a.Ca);if(a instanceof mg)return new nh(this.m,a[t]);if(a instanceof jg)return new dh(a[t]);if(a instanceof kg)return new Hh(a[t],a.$e);if(a instanceof
ig)return new rh(this.m,a[t]);if(a instanceof hg)return new ph(this.m,a[t]);throw new R("NotSupportedError","Unknown node type");};

function Jh(a){this.xj=new ch;this.Oj=new Ih(a)}Jh[C].Si=function(a){var b=this.xj[Va](a);return this.Oj[Va](b,a)};
function Kh(){this.Zf=new P}J=Kh[C];J.od=function(a){var b=this.Zf.get(a[k](),null);null===b&&(b=new Lh,this.Zf.set(a[k](),b));return b};J.dj=function(a,b,c){b[n](function(b){this.od(b).cj(a,c)},this)};J.rh=function(a,b,c){return b[wb](function(b){return this.od(b).qh(a,c)},this)};J.og=function(a,b,c){var d=this.rh(a,b,c);d&&this.dj(a,b,c);return d};J.Kd=function(a,b){b[n](function(b){this.od(b).Kd(a)},this)};J.Ch=function(a){a[n](function(a){this.od(a).ab=null},this)};
function Lh(){this.Vb=this.Oa=this.ab=this.Dc=null}Lh[C].Kd=function(a){this.Dc==a&&(this.Dc=null);this.ab==a&&(this.ab=null);null===this.Oa||this.Oa[m](a);null===this.Vb||this.Vb[m](a)};Lh[C].qh=function(a,b){var c=null===this.Oa||this.Oa.Ha();return 0==b?(null===this.Vb||this.Vb.Ha())&&c&&null===this.Dc&&null!==this.ab&&this.ab==a:3==b?null===this.Dc&&null===this.ab&&null!==this.Oa&&this.Oa[u](a):1==b?null===this.ab:c&&(null===this.ab||this.ab==a)};
Lh[C].cj=function(a,b){0==b?(this.ab=null,this.Dc=a):3==b?(null===this.Vb&&(this.Vb=new Q),this.Vb.add(a),null===this.Oa&&(this.Oa=new Q),this.Oa[m](a)):1==b?(null===this.Oa&&(this.Oa=new Q),this.Oa.add(a)):2==b&&(this.ab=a)};
function Mh(){this.Rb=new Nh;this.Mc=new Kh}J=Mh[C];J.Tb=function(a){(2>a[nb]()||2>a[nb]())&&this.Mc.Ch(a.ca().c());this.Rb.rb(a);this.ge();return a.Gc().ga};J.ge=function(){for(var a=this.Rb.c(),b=0;b<a[A];b++){var c=a[b],d=!1;if(d=0==c.da()?this.pg(c,1,3):this.pg(c,2,0))this.Rb[m](c),this.gi(c)}};J.pg=function(a,b,c){var d=!1,g=a.ca().c();this.Mc.og(a.ka(),g,b)&&(d=this.Mc.og(a.ka(),g,c));return d};J.gi=function(a){a[Ia]()[D](L(this.Kj,this,a),L(this.Jj,this,a))};
J.Kj=function(a,b){this.Mc.Kd(a.ka(),a.ca().c());a.Gc()[tb](b);this.ge()};J.Jj=function(a,b){this.Mc.Kd(a.ka(),a.ca().c());a.Gc()[ib](b);this.ge()};function Nh(){this.Rb=[]}Nh[C].rb=function(a){nc(this.Rb,a,function(a,c){var d=a[nb]()-c[nb]();return 0==d?a.ka()-c.ka():d})};Nh[C].c=function(){return this.Rb[x]()};ja(Nh[C],function(a){var b=this.Rb;a=$b(b,a);var c;(c=0<=a)&&fc(b,a);return c});
function Oh(a,b){this.Xh=fe.qe();this.Qc=a;this.Cd=b;this.H=this.Qh()}Oh[C].Qh=function(){if(0<this.Qc.h[A])return this.Qc.h;var a=[],b=this.Qc.f[x]();null!=this.Qc.Ae&&b[w](this.Qc.Ae);b[n](function(b){b.wb()[n](function(b){a[w](b)})});return a};Oh[C].L=function(a,b){return this.H[wb](function(c){return this.Xh.pe(c.da(),"eq")(a.M(c),b.M(c))},this)};
Oh[C].$g=function(a,b){for(var c=null===a?[]:a[E],d=fd(c,b[E],L(this.L,this),function(a){return c[a]}),g=[],h=0,l=0;l<c[A];l++){var p=c[l];d[h]==p?h++:(p=this.Cd[G](h,1),p=Ph(l,p,0,this.Cd),g[w](p))}d=fd(c,b[E],L(this.L,this),function(a,c){return b[E][c]});for(l=h=0;l<b[E][A];l++)p=b[E][l],d[h]==p?h++:(this.Cd[G](l,0,p.ta.w()),p=Ph(l,[],1,this.Cd),g[w](p));return g};function Ph(a,b,c,d){return{Ck:c,index:a,object:d,Gk:b,type:"splice"}};
function Qh(){this.fc=new P}J=Qh[C];J.ue=function(a){return Mb(a)[r]()};J.Ud=function(a,b){var c=this.ue(a.sd()),d=this.fc.get(c,null);null===d&&(d=new Rh(a),this.fc.set(c,d));d.Ud(b)};J.Pe=function(a,b){var c=this.ue(a.sd()),d=this.fc.get(c,null);N(null!=d,"Attempted to unobserve a query that was not observed.");var g=d.Pe(b);N(g,"removeObserver: Inconsistent state detected.");d.lj()||this.fc[m](c)};
J.we=function(a){var b=new Q;a[n](function(a){b.add(a[k]())});var c=[];this.fc.c()[n](function(a){a=a.Ic();a[Da].f[ub](function(a){return b[u](a[k]())})&&c[w](a)});return c};J.Mg=function(a,b){var c=this.ue(null!=a.zc?a.zc:a),c=this.fc.get(c,null);return null!==c?(c.Ak(b),!0):!1};function Rh(a){this.lh=a;this.Pc=new Q;this.Hj=[];this.Wf=null;this.Th=new Oh(a.sd(),this.Hj)}J=Rh[C];J.Ud=function(a){this.Pc[u](a)?Wb("Attempted to register observer twice."):this.Pc.add(a)};J.Pe=function(a){return this.Pc[m](a)};
J.Ic=function(){return this.lh.Qi()};J.lj=function(){return 0<this.Pc.na()};J.Ak=function(a){var b=this.Th.$g(this.Wf,a);this.Wf=a;0<b[A]&&this.Pc.c()[n](function(a){a(b)})};
function Sh(a,b){var c=a.o(yd),d=b||{},g=d.Hk||0,h=new Ye;a.mb(td,h);var h=null,l=!1;switch(g){case 1:h=new Me(c);break;case 5:h=new Ne(c);break;case 4:h=new Se(a,c,d.Ik);break;case 3:h=new Fe(c,d.Ek);l=!0;break;default:h=new Ke(a,c)}a.mb(sd,h);var p=new yf;a.mb(ud,p);return h.Ba(d.Fk)[D](function(){a.mb(vd,new Jh(a));var b=new Mh;a.mb(wd,b);b=new Qh;a.mb(xd,b);return p.Ba(c)})[D](function(){l&&(new Ae(a)).qk();return(new xf(a)).Ba(c)})};

function Th(a,b){this.m=a;this.vb=a.o(sd);this.Qa=a.o(wd);this.xb=a.o(xd);this.Ra=new Q(b);this.Ya=new Nd(this.m,this.Ra.c());this.Sb=Sc();this.Ec=Sc();this.af=Sc()}J=Th[C];ha(J,function(){this.af[tb]();return this.Ec.ga});J.da=Bb(1);J.ca=I("Ra");J.Gc=I("Sb");J.ka=function(){return Mb(this)};wa(J,Bb(2));J.Qg=function(){this.Qa.Tb(this);return this.af.ga};
J.ih=function(a){a=a.Ic();return a.Ne.Gb()[Ia](this.Ya,a[Da])[D](function(a){return a[0].re()},L(function(a){this.Ya.zb();var c=new Kc(a[pb]);this.Ec[ib](c);throw a;},this))};J.U=function(){this.vb.Eb(this.da(),this.Ya).U()[D](L(function(){this.Sc();this.Ec[tb]()},this),L(function(a){this.Ya.zb();this.Ec[ib](a)},this));return this.Sb.ga};J.zb=function(){this.Ya.zb();this.Ec[tb]();return this.Sb.ga};J.Sc=function(){var a=this.xb.we(this.Ra.c());0!=a[A]&&(a=new ye(this.m,a),this.Qa.Tb(a))};
function Uh(a){this.m=a;this.Qa=a.o(wd);this.Vc=null;this.ya=0}K("lf.proc.Transaction",Uh,void 0);var Vh=new P(0,new Q([1,4]),1,new Q([2]),2,new Q([3,5,6]),3,new Q([2,7]),4,new Q([7]),5,new Q([7]),6,new Q([7]));Uh[C].Ka=function(a){var b=Vh.get(this.ya,null);if(null===b||!b[u](a))throw new R("TransactionError","Invalid transaction state transition, from "+this.ya+" to "+a+".");this.ya=a};
ha(Uh[C],function(a){this.Ka(4);var b=[];try{a[n](function(a){a.jb();b[w](a.Ic())},this)}catch(c){return this.Ka(7),Pc(c)}a=new zg(this.m,b);return this.Qa.Tb(a)[D](L(function(a){this.Ka(7);return a.map(function(a){return a.re()})},this),L(function(a){this.Ka(7);throw a;},this))});ha(Uh[C],Uh[C][Ia]);Uh[C].jh=function(a){this.Ka(1);this.Vc=new Th(this.m,a);return this.Vc.Qg()[D](L(function(){this.Ka(2)},this))};Uh[C].begin=Uh[C].jh;
Uh[C].hh=function(a){this.Ka(3);return this.Vc.ih(a)[D](L(function(a){this.Ka(2);return a},this),L(function(a){this.Ka(7);throw a;},this))};Uh[C].attach=Uh[C].hh;Uh[C].U=function(){this.Ka(5);return this.Vc.U()[D](L(function(){this.Ka(7)},this))};Uh[C].commit=Uh[C].U;Uh[C].zb=function(){this.Ka(6);return this.Vc.zb()[D](L(function(){this.Ka(7)},this))};Uh[C].rollback=Uh[C].zb;
function X(a){this.m=a;this.A=a.o(yd);this.ze=!1}K("lf.proc.Database",X,void 0);X[C].Ba=function(a){this.m.mb(yd,this.A);return Sh(this.m,a)[D](L(function(){this.ze=!0;return this},this))};X[C].init=X[C].Ba;X[C].Ib=I("A");X[C].getSchema=X[C].Ib;X[C].bc=function(){if(!this.ze)throw new R("UninitializedError","Database is not initialized");};X[C].select=function(a){this.bc();return new W(this.m,1!=arguments[A]||null!=arguments[0]?e[C][x][F](arguments):[])};X[C].select=X[C].select;
X[C].rb=function(){this.bc();return new Pg(this.m)};X[C].insert=X[C].rb;X[C].Be=function(){this.bc();return new Pg(this.m,!0)};X[C].insertOrReplace=X[C].Be;Ca(X[C],function(a){this.bc();return new Tg(this.m,a)});Ca(X[C],X[C][xb]);xa(X[C],function(){this.bc();return new Og(this.m)});X[C]["delete"]=X[C][ob];X[C].observe=function(a,b){this.m.o(xd).Ud(a,b)};X[C].observe=X[C].observe;X[C].unobserve=function(a,b){this.m.o(xd).Pe(a,b)};X[C].unobserve=X[C].unobserve;X[C].Oh=function(){this.bc();return new Uh(this.m)};
X[C].createTransaction=X[C].Oh;ra(X[C],function(){try{this.m.o(sd)[cb]()}catch(a){}this.m[Qa]();this.ze=!1});ra(X[C],X[C][cb]);
function Y(a,b,c,d,g,h){this.D=a;this.B=b;this.Sf=c;this.Pf=d;this.Ig=g;this.ib=h||null}K("lf.schema.BaseColumn",Y,void 0);J=Y[C];ia(J,I("B"));J.l=function(){return this.D.Aa()+"."+this.B};f(J,function(){return this.l()});J.Y=I("D");J.da=I("Ig");J.Ua=I("ib");J.Ga=function(){null==this.qa&&(this.qa=[],this.Y().Ga()[n](function(a){-1!=a.h.map(function(a){return a.cb[k]()})[z](this.B)&&this.qa[w](a)},this));return this.qa};J.lc=I("Pf");J.yd=I("Sf");J.Ma=function(a){return Uf(this,a,"eq")};Y[C].eq=Y[C].Ma;
Y[C].$f=function(a){return Uf(this,a,"neq")};Y[C].neq=Y[C].$f;Y[C].He=function(a){return Uf(this,a,"lt")};Y[C].lt=Y[C].He;Y[C].yj=function(a){return Uf(this,a,"lte")};Y[C].lte=Y[C].yj;Y[C].ej=function(a){return Uf(this,a,"gt")};Y[C].gt=Y[C].ej;Y[C].fj=function(a){return Uf(this,a,"gte")};Y[C].gte=Y[C].fj;Y[C].match=function(a){return Uf(this,a,"match")};Y[C].match=Y[C].match;Y[C].kh=function(a,b){return Uf(this,[a,b],"between")};Y[C].between=Y[C].kh;Y[C].mj=function(a){return Uf(this,a,"in")};
Y[C]["in"]=Y[C].mj;Y[C].sj=function(){return this.Ma(null)};Y[C].isNull=Y[C].sj;Y[C].rj=function(){return this.$f(null)};Y[C].isNotNull=Y[C].rj;Y[C].vc=function(a){return new Y(this.D,this.B,this.Sf,this.Pf,this.Ig,a)};Y[C].as=Y[C].vc;
function Wh(){this.Nd=new P}var Xh;ma(Wh[C],function(){this.Nd[Qa]()});ma(Wh[C],Wh[C][Qa]);Wh[C].mb=function(a,b){this.Nd.set(a[r](),b);return b};Wh[C].registerService=Wh[C].mb;Wh[C].o=function(a){var b=this.Nd.get(a[r](),null);if(null==b)throw new R("NotFoundError",a[r]());return b};Wh[C].getService=Wh[C].o;Wh[C].Fe=function(a){return this.Nd.s(a[r]())};Wh[C].isRegistered=Wh[C].Fe;
var Yh={};K("lf.ConstraintAction",Yh,void 0);Yh.RESTRICT=0;Yh.CASCADE=1;var Zh={};K("lf.ConstraintTiming",Zh,void 0);Zh.IMMEDIATE=0;Zh.DEFERRABLE=1;
function $h(a,b){this.Rj=a;this.Fj=b}$h[C].te=I("Rj");$h[C].Pi=I("Fj");
function Z(a){this.B=a;this.H=new P;this.Lg=new Q;this.rc=new Q;this.Bd=new Q;var b=this.B;this.nc="pk"+(b[0].toUpperCase()+b.substring(1));this.qa=new P;this.Fd=!1;this.xc(a)}K("lf.schema.TableBuilder",Z,void 0);var ai=new Q([0,6]);Z[C].xc=function(a){if(!/^[A-Za-z_][A-Za-z0-9_]*$/.test(a))throw new R("SyntaxError",a+" violates naming rule");if(this.H.s(a)||this.qa.s(a)||this.rc[u](a))throw new R("SyntaxError",this.B+"."+a+" is already defined");};
Z[C].xh=function(a){var b=!1;a[n](function(a){var d=this.H.get(a[pb]);b=b||a[Na];if(a[Na]&&3!=d)throw new R("SyntaxError","Can not use autoIncrement with a non-integer primary key.");},this);if(b&&1<a[A])throw new R("SyntaxError","Can not use autoIncrement with a cross-column primary key.");};Z[C].Sg=function(a,b){this.xc(a);this.H.set(a,b);ai[u](b)&&this.df([a]);return this};Z[C].addColumn=Z[C].Sg;
Z[C].Vg=function(a,b){this.xc(this.nc);var c=this.Ad(a,!0,void 0,b);this.xh(c);c[n](function(a){this.Lg.add(a[pb])},this);this.rc.add(this.nc);this.qa.set(this.nc,c);return this};Z[C].addPrimaryKey=Z[C].Vg;Z[C].Tg=function(a,b){Db(b.action)||(b.action=0);Db(b.timing)||(b.timing=0);if(1==b.action&&1==b.timing)throw new R("SyntaxError","Lovefield allows only immediate evaluation of cascading constraints");return this};Z[C].addForeignKey=Z[C].Tg;
Z[C].Wg=function(a,b){this.xc(a);var c=this.Ad(b,!0);this.qa.set(a,c);this.rc.add(a);return this};Z[C].addUnique=Z[C].Wg;Z[C].df=function(a){a=this.Ad(a,!1);this.wh(a);a[n](function(a){this.Bd.add(a[pb])},this);return this};Z[C].addNullable=Z[C].df;
Z[C].wh=function(a){this.qa.G()[n](function(b){var c=new Q;this.qa.get(b)[n](function(a){c.add(a[pb])});var d=a[Ea](function(a){return c[u](a[pb])});if(1<c.na()&&0<d[A])throw new R("SyntaxError","Cross-column index "+b+" refers to nullable columns: "+d[H](","));},this)};Z[C].Ug=function(a,b,c,d){this.xc(a);b=this.Ad(b,!0,d);this.vh(a,b);c&&this.rc.add(a);this.qa.set(a,b);return this};Z[C].addIndex=Z[C].Ug;
Z[C].vh=function(a,b){if(1<b[A]){var c=b[Ea](function(a){return this.Bd[u](a[pb])},this);if(0<c[A])throw new R("SyntaxError","Cross-column index "+a+" refers to nullable columns: "+c[H](","));}};Z[C].Qb=Ab("Fd");Z[C].persistentIndex=Z[C].Qb;Z[C].Ib=function(){return new (this.Hi())};Z[C].getSchema=Z[C].Ib;
Z[C].Ad=function(a,b,c,d){var g=a;"string"==typeof a[0]&&(g=a.map(function(a){return{name:a,order:c||1,autoIncrement:d||!1}}));g[n](function(a){if(!this.H.s(a[pb]))throw new R("SyntaxError",this.B+" does not have column: "+a[pb]);if(b){var c=this.H.get(a[pb]);if(0==c||6==c)throw new R("SyntaxError",this.B+" index on non-indexable column: "+a[pb]);}},this);return g};
Z[C].Hi=function(){function a(){function a(c){return b.qa.get(c).map(function(a){return{cb:this[a[pb]],sb:a.sb,autoIncrement:a[Na]}},this)}var d=b.H.G().map(function(a){this[a]=new Y(this,a,b.Lg[u](a),b.Bd[u](a),b.H.get(a));return this[a]},this),g=b.qa.G().map(function(d){return new Wf(b.B,d,b.rc[u](d),a[F](this,d))},this);Xf[F](this,b.B,d,g,b.Fd);var h=b.qa.s(b.nc)?new Wf(b.B,b.nc,!0,a[F](this,b.nc)):null,l=d[Ea](function(a){return!b.Bd[u](a[k]())}),p=b.rc.c().map(function(d){return new Wf(b.B,d,
!0,a[F](this,d))},this);this.Gh=new $h(h,l,[],p);this.sg=b.Di(d,g)}var b=this;M(a,Xf);a[C].cc=function(a){return new this.sg(Yc++,a)};a[C].createRow=a[C].cc;a[C].dc=function(a){var b={};this.wb()[n](function(g){var h=g[k]();g=g.da();var l=a[y][h];if(0==g)if(null===l)g=l;else if(g=l,""==g)g=null;else{0!=g[A]%2&&(g="0"+g);for(var l=new ArrayBuffer(g[A]/2),p=new Uint8Array(l),B=0,Pa=0;B<g[A];B+=2)p[Pa++]=ga(g.substr(B,2),16);g=l}else g=2==g?null===l?l:new Date(l):l;b[h]=g},this);return new this.sg(a.id,
b)};a[C].deserializeRow=a[C].dc;a[C].ic=I("Gh");a[C].getConstraint=a[C].ic;return a};
Z[C].Di=function(a,b){function c(c,d){this.H=a;this.qa=b;Xc[F](this,c,d)}M(c,Xc);c[C].tf=function(){var a={};this.H[n](function(b){a[b[k]()]=b.lc()?null:ee[b.da()]});return a};c[C].Fg=function(){var a={};this.H[n](function(b){var c=b[k]();b=b.da();var d=this.w()[c];a[c]=0==b?null===d?d:ad(d):2==b?null===d?d:d[Ra]():d},this);return a};var d=L(function(a){var b=this.H.get(a[k]());return 2==b?function(b){b=b[a[k]()];return a.lc()&&null===b?null:b[Ra]()}:1==b?function(b){return a.lc()?(b=b[a[k]()],null===
b?null:b?1:0):b[a[k]()]?1:0}:function(b){return b[a[k]()]}},this),g=L(function(a){var b=a.map(function(a){return d(a.cb)});return function(a){return b.map(function(b){return b(a)})}},this),h={};b[n](function(a){var b=a.l();a=1==a.h[A]?d(a.h[0].cb):g(a.h);h[b]=a});c[C].Lc=function(a){return-1!=a[z]("#")?this.id():h[bb](a)?h[a](this.w()):null};return c};
function bi(a,b){this.A=new ci(a,b);this.pc=new P;this.Fc=!1}K("lf.schema.Builder",bi,void 0);bi[C].ni=function(){this.Fc||(this.pc.G()[n](function(a){a=this.pc.get(a);this.A.jk(a.Ib())},this),this.pc[Qa](),this.Fc=!0)};bi[C].Ib=function(){this.Fc||this.ni();return this.A};bi[C].getSchema=bi[C].Ib;bi[C].Bf=function(){var a=new rd("ns_"+this.A[pb]()),b;Xh||(Xh=new Wh);b=Xh;var c=null;b.Fe(a)?c=b.o(a):(c=new Wh,b.mb(a,c));return c};bi[C].getGlobal=bi[C].Bf;
bi[C].connect=function(a){var b=this.Bf();b.Fe(yd)||b.mb(yd,this.Ib());return(new X(b)).Ba(a)};bi[C].connect=bi[C].connect;bi[C].Mh=function(a){if(this.pc.s(a)||this.Fc)throw new R("SyntaxError","Table is already created or schema is already finalized.");this.pc.set(a,new Z(a));return this.pc.get(a)};bi[C].createTable=bi[C].Mh;bi[C].We=function(a){if(this.Fc)throw new R("SyntaxError","Schema is already finalized.");this.A.We(a);return this};bi[C].setPragma=bi[C].We;
function ci(a,b){this.B=a;this.La=b;this.I=new P;this.jg={Uh:!1}}K("lf.schema.DatabaseSchema",ci,void 0);za(ci[C],I("B"));za(ci[C],ci[C][pb]);ci[C].version=I("La");ci[C].version=ci[C][Fa];ci[C].gb=function(){return this.I.c()};ci[C].tables=ci[C].gb;oa(ci[C],function(a){if(!this.I.s(a))throw new R("NotFoundError",a+" is not found in database");return this.I.get(a)});oa(ci[C],ci[C][t]);ci[C].jk=function(a){this.I.set(a[k](),a)};ci[C].ig=I("jg");ci[C].pragma=ci[C].ig;ci[C].We=Ab("jg");
K("lf.schema.create",function(a,b){return new bi(a,b)},void 0);}.bind(window))()
