/*
  Copyright 2014 The Lovefield Project Authors. All Rights Reserved.

  Licensed under the Apache License, Version 2.0 (the "License");
  you may not use this file except in compliance with the License.
  You may obtain a copy of the License at

  http://www.apache.org/licenses/LICENSE-2.0

  Unless required by applicable law or agreed to in writing, software
  distributed under the License is distributed on an "AS IS" BASIS,
  WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
  See the License for the specific language governing permissions and
  limitations under the License.
*/
(function(){'use strict';var aa=window,ba=Object,ca=Function,da=document,ea=Math,e=Array,fa=Error,ga=parseInt;function ha(a,b){return a.exec=b}function ia(a,b){return a.getName=b}function ja(a,b){return a.remove=b}function ka(a,b){return a.forEach=b}function la(a,b){return a.values=b}function ma(a,b){return a.clear=b}function na(a,b){return a.bind=b}function f(a,b){return a.toString=b}function oa(a,b){return a.table=b}function pa(a,b){return a.dump=b}function qa(a,b){return a.next=b}
function ra(a,b){return a.close=b}function sa(a,b){return a.clone=b}function ta(a,b){return a.child=b}function ua(a,b){return a.onerror=b}function va(a,b){return a.value=b}function wa(a,b){return a.getPriority=b}function xa(a,b){return a.delete=b}function ya(a,b){return a.subscribe=b}function za(a,b){return a.name=b}function Aa(a,b){return a.length=b}function Ba(a,b){return a.onsuccess=b}function Ca(a,b){return a.update=b}
var Da="context",Ea="filter",Fa="version",Ga="getParent",Ha="shift",Ia="exec",Ja="replace",Ka="concat",La="objectStoreNames",k="getName",m="remove",Ma="orderByChild",Na="autoIncrement",n="forEach",Oa="values",Pa="clear",q="bind",Qa="getTime",Sa="continue",r="toString",Ta="global",Ua="propertyIsEnumerable",Va="create",t="table",Wa="compare",Xa="result",Ya="size",Za="index",$a="next",ab="split",bb="hasOwnProperty",cb="close",db="once",eb="setImmediate",fb="transaction",gb="child",hb="rows",u="contains",
ib="apply",v="push",jb="reject",kb="reduce",lb="addAll",w="slice",x="value",mb="item",nb="objectStore",ob="indexOf",pb="getPriority",qb="delete",rb="name",y="length",z="prototype",A="then",C="entries",sb="removeChild",tb="openCursor",ub="target",D="call",vb="resolve",wb="some",xb="sort",yb="every",zb="update",E="splice",F="join",Ab="unshift";function Bb(){return function(){}}function Cb(a){return function(b){this[a]=b}}function G(a){return function(){return this[a]}}
function Db(a){return function(){return a}}var H,Eb=this;function Fb(a){return void 0!==a}function I(a,b,c){a=a[ab](".");c=c||Eb;a[0]in c||!c.execScript||c.execScript("var "+a[0]);for(var d;a[y]&&(d=a[Ha]());)!a[y]&&Fb(b)?c[d]=b:c=c[d]?c[d]:c[d]={}}function Gb(){}function Hb(a){a.we=function(){return a.Zf?a.Zf:a.Zf=new a}}
function Ib(a){var b=typeof a;if("object"==b)if(a){if(a instanceof e)return"array";if(a instanceof ba)return b;var c=ba[z][r][D](a);if("[object Window]"==c)return"object";if("[object Array]"==c||"number"==typeof a[y]&&"undefined"!=typeof a[E]&&"undefined"!=typeof a[Ua]&&!a[Ua]("splice"))return"array";if("[object Function]"==c||"undefined"!=typeof a[D]&&"undefined"!=typeof a[Ua]&&!a[Ua]("call"))return"function"}else return"null";else if("function"==b&&"undefined"==typeof a[D])return"object";return b}
function Jb(a){return null===a}function Kb(a){return null!=a}function Lb(a){var b=Ib(a);return"array"==b||"object"==b&&"number"==typeof a[y]}function Mb(a){return"string"==typeof a}function Nb(a){return"function"==Ib(a)}function Ob(a){return a[Pb]||(a[Pb]=++Qb)}var Pb="closure_uid_"+(1E9*ea.random()>>>0),Qb=0;function Rb(a,b,c){return a[D][ib](a[q],arguments)}
function Sb(a,b,c){if(!a)throw fa();if(2<arguments[y]){var d=e[z][w][D](arguments,2);return function(){var c=e[z][w][D](arguments);e[z][Ab][ib](c,d);return a[ib](b,c)}}return function(){return a[ib](b,arguments)}}function J(a,b,c){J=ca[z][q]&&-1!=ca[z][q][r]()[ob]("native code")?Rb:Sb;return J[ib](null,arguments)}function Tb(a,b){var c=e[z][w][D](arguments,1);return function(){var b=c[w]();b[v][ib](b,arguments);return a[ib](this,b)}}
function K(a,b){function c(){}c.prototype=b[z];a.eb=b[z];a.prototype=new c;a[z].constructor=a;a.Rk=function(a,c,h){for(var l=e(arguments[y]-2),p=2;p<arguments[y];p++)l[p-2]=arguments[p];return b[z][c][ib](a,l)}}na(ca[z],ca[z][q]||function(a,b){if(1<arguments[y]){var c=e[z][w][D](arguments,1);c[Ab](this,a);return J[ib](null,c)}return J(this,a)});function Ub(a){if(fa.captureStackTrace)fa.captureStackTrace(this,Ub);else{var b=fa().stack;b&&(this.stack=b)}a&&(this.message=String(a))}K(Ub,fa);za(Ub[z],"CustomError");function Vb(a,b){for(var c=a[ab]("%s"),d="",g=e[z][w][D](arguments,1);g[y]&&1<c[y];)d+=c[Ha]()+g[Ha]();return d+c[F]("%s")};function Wb(a,b){b[Ab](a);Ub[D](this,Vb[ib](null,b));b[Ha]()}K(Wb,Ub);za(Wb[z],"AssertionError");function Xb(a,b,c,d){var g="Assertion failed";if(c)var g=g+(": "+c),h=d;else a&&(g+=": "+a,h=b);throw new Wb(""+g,h||[]);}function L(a,b,c){a||Xb("",null,b,e[z][w][D](arguments,2));return a}function Yb(a,b){throw new Wb("Failure"+(a?": "+a:""),e[z][w][D](arguments,1));}function Zb(a,b,c){Nb(a)||Xb("Expected function but got %s: %s.",[Ib(a),a],b,e[z][w][D](arguments,2));return a};function $b(a,b,c){this.Jj=c;this.bi=a;this.sk=b;this.Nd=0;this.Gd=null}$b[z].get=function(){var a;0<this.Nd?(this.Nd--,a=this.Gd,this.Gd=a[$a],qa(a,null)):a=this.bi();return a};$b[z].put=function(a){this.sk(a);this.Nd<this.Jj&&(this.Nd++,qa(a,this.Gd),this.Gd=a)};var ac=e[z],bc=ac[ob]?function(a,b,c){L(null!=a[y]);return ac[ob][D](a,b,c)}:function(a,b,c){c=null==c?0:0>c?ea.max(0,a[y]+c):c;if(Mb(a))return Mb(b)&&1==b[y]?a[ob](b,c):-1;for(;c<a[y];c++)if(c in a&&a[c]===b)return c;return-1},cc=ac[n]?function(a,b,c){L(null!=a[y]);ac[n][D](a,b,c)}:function(a,b,c){for(var d=a[y],g=Mb(a)?a[ab](""):a,h=0;h<d;h++)h in g&&b[D](c,g[h],h,a)},dc=ac.map?function(a,b,c){L(null!=a[y]);return ac.map[D](a,b,c)}:function(a,b,c){for(var d=a[y],g=e(d),h=Mb(a)?a[ab](""):a,l=0;l<
d;l++)l in h&&(g[l]=b[D](c,h[l],l,a));return g},ec=ac[kb]?function(a,b,c,d){L(null!=a[y]);d&&(b=J(b,d));return ac[kb][D](a,b,c)}:function(a,b,c,d){var g=c;cc(a,function(c,l){g=b[D](d,g,c,l,a)});return g},fc=ac[wb]?function(a,b,c){L(null!=a[y]);return ac[wb][D](a,b,c)}:function(a,b,c){for(var d=a[y],g=Mb(a)?a[ab](""):a,h=0;h<d;h++)if(h in g&&b[D](c,g[h],h,a))return!0;return!1},gc=ac[yb]?function(a,b,c){L(null!=a[y]);return ac[yb][D](a,b,c)}:function(a,b,c){for(var d=a[y],g=Mb(a)?a[ab](""):a,h=0;h<
d;h++)if(h in g&&!b[D](c,g[h],h,a))return!1;return!0};function hc(a,b){L(null!=a[y]);return 1==ac[E][D](a,b,1)[y]}function ic(a,b,c){a:{for(var d=a[y],g=Mb(a)?a[ab](""):a,h=0;h<d;h++)if(h in g&&b[D](c,g[h],h,a)){b=h;break a}b=-1}return 0<=b?(hc(a,b),!0):!1}function jc(a){var b=a[y];if(0<b){for(var c=e(b),d=0;d<b;d++)c[d]=a[d];return c}return[]}
function kc(a,b){for(var c=1;c<arguments[y];c++){var d=arguments[c];if(Lb(d)){var g=a[y]||0,h=d[y]||0;Aa(a,g+h);for(var l=0;l<h;l++)a[g+l]=d[l]}else a[v](d)}}function lc(a,b,c,d){L(null!=a[y]);return ac[E][ib](a,mc(arguments,1))}function mc(a,b,c){L(null!=a[y]);return 2>=arguments[y]?ac[w][D](a,b):ac[w][D](a,b,c)}function nc(a,b,c,d,g){for(var h=0,l=a[y],p;h<l;){var B=h+l>>1,Ra;Ra=c?b[D](g,a[B],B,a):b(d,a[B]);0<Ra?h=B+1:(l=B,p=!Ra)}return p?h:~h}function oc(a,b){return a>b?1:a<b?-1:0}
function pc(a,b,c){c=nc(a,c||oc,!1,b);return 0>c?(lc(a,-(c+1),0,b),!0):!1}function qc(a,b){for(var c=[],d=0;d<b;d++)c[d]=a;return c}function rc(a){for(var b=[],c=0;c<arguments[y];c++){var d=arguments[c];if("array"==Ib(d))for(var g=0;g<d[y];g+=8192)for(var h=mc(d,g,g+8192),h=rc[ib](null,h),l=0;l<h[y];l++)b[v](h[l]);else b[v](d)}return b};function sc(a,b,c){for(var d in a)b[D](c,a[d],d,a)}function tc(a,b,c){for(var d in a)if(b[D](c,a[d],d,a))return!0;return!1}function uc(a){var b=[],c=0,d;for(d in a)b[c++]=a[d];return b}function vc(a){var b=[],c=0,d;for(d in a)b[c++]=d;return b};var wc;a:{var xc=Eb.navigator;if(xc){var yc=xc.userAgent;if(yc){wc=yc;break a}}wc=""};function zc(a){Eb.setTimeout(function(){throw a;},0)}var Ac;
function Bc(){var a=Eb.MessageChannel;"undefined"===typeof a&&"undefined"!==typeof aa&&aa.postMessage&&aa.addEventListener&&-1==wc[ob]("Presto")&&(a=function(){var a=da.createElement("IFRAME");a.style.display="none";a.src="";da.documentElement.appendChild(a);var b=a.contentWindow,a=b.document;a.open();a.write("");a[cb]();var c="callImmediate"+ea.random(),d="file:"==b.location.protocol?"*":b.location.protocol+"//"+b.location.host,a=J(function(a){if(("*"==d||a.origin==d)&&a.data==c)this.port1.onmessage()},
this);b.addEventListener("message",a,!1);this.port1={};this.port2={postMessage:function(){b.postMessage(c,d)}}});if("undefined"!==typeof a&&-1==wc[ob]("Edge")&&-1==wc[ob]("Trident")&&-1==wc[ob]("MSIE")){var b=new a,c={},d=c;b.port1.onmessage=function(){if(Fb(c[$a])){c=c[$a];var a=c.zf;c.zf=null;a()}};return function(a){qa(d,{zf:a});d=d[$a];b.port2.postMessage(0)}}return"undefined"!==typeof da&&"onreadystatechange"in da.createElement("SCRIPT")?function(a){var b=da.createElement("SCRIPT");b.onreadystatechange=
function(){b.onreadystatechange=null;b.parentNode[sb](b);b=null;a();a=null};da.documentElement.appendChild(b)}:function(a){Eb.setTimeout(a,0)}};function Cc(){this.be=this.Zb=null}var Ec=new $b(function(){return new Dc},function(a){a.reset()},100);Cc[z].add=function(a,b){var c=this.nj();c.set(a,b);this.be?qa(this.be,c):(L(!this.Zb),this.Zb=c);this.be=c};ja(Cc[z],function(){var a=null;this.Zb&&(a=this.Zb,this.Zb=this.Zb[$a],this.Zb||(this.be=null),qa(a,null));return a});Cc[z].tk=function(a){Ec.put(a)};Cc[z].nj=function(){return Ec.get()};function Dc(){this.scope=this.re=null;qa(this,null)}
Dc[z].set=function(a,b){this.re=a;this.scope=b;qa(this,null)};Dc[z].reset=function(){this.scope=this.re=null;qa(this,null)};function Fc(a,b){Gc||Hc();Ic||(Gc(),Ic=!0);Jc.add(a,b)}var Gc;function Hc(){if(Eb.Promise&&Eb.Promise[vb]){var a=Eb.Promise[vb]();Gc=function(){a[A](Kc)}}else Gc=function(){var a=Kc;if(!Nb(Eb[eb])||Eb.Window&&Eb.Window[z]&&Eb.Window[z][eb]==Eb[eb])Ac||(Ac=Bc()),Ac(a);else Eb[eb](a)}}var Ic=!1,Jc=new Cc;[][v](function(){Ic=!1;Jc=new Cc});function Kc(){for(var a=null;a=Jc[m]();){try{a.re[D](a.scope)}catch(b){zc(b)}Jc.tk(a)}Ic=!1};function M(a,b){this.Fa=0;this.Fg=void 0;this.gd=this.cc=this.C=null;this.Fd=this.qe=!1;if(a!=Gb)try{var c=this;a[D](b,function(a){c.qc(2,a)},function(a){if(!(a instanceof Lc))try{if(a instanceof fa)throw a;throw fa("Promise rejected.");}catch(b){}c.qc(3,a)})}catch(d){this.qc(3,d)}}function Mc(){ta(this,null);this.context=this.oc=this.Ob=null;qa(this,null);this.ee=!1}Mc[z].reset=function(){ta(this,null);this.context=this.oc=this.Ob=null;this.ee=!1};
var Nc=new $b(function(){return new Mc},function(a){a.reset()},100);function Oc(a,b,c){var d=Nc.get();d.Ob=a;d.oc=b;d.context=c;return d}function Pc(a){if(a instanceof M)return a;var b=new M(Gb);b.qc(2,a);return b}function Qc(a){return new M(function(b,c){c(a)})}function Rc(a,b,c){Sc(a,b,c,null)||Fc(Tb(b,a))}function Tc(a){return new M(function(b,c){var d=a[y],g=[];if(d)for(var h=function(a,c){d--;g[a]=c;0==d&&b(g)},l=function(a){c(a)},p=0,B;B=a[p];p++)Rc(B,Tb(h,p),l);else b(g)})}
function Uc(){var a,b,c=new M(function(c,g){a=c;b=g});return new Vc(c,a,b)}M[z].then=function(a,b,c){null!=a&&Zb(a,"opt_onFulfilled should be a function.");null!=b&&Zb(b,"opt_onRejected should be a function. Did you pass opt_context as the second argument instead of the third?");return this.of(Nb(a)?a:null,Nb(b)?b:null,c)};M[z].then=M[z][A];M[z].$goog_Thenable=!0;H=M[z];
H.Gk=function(a,b,c){null!=a&&Zb(a,"opt_onFulfilled should be a function.");null!=b&&Zb(b,"opt_onRejected should be a function. Did you pass opt_context as the second argument instead of the third?");this.nf(Oc(a||Gb,b||null,c))};H.Rg=function(a,b){return this.of(null,a,b)};H.nf=function(a){this.xj()||2!=this.Fa&&3!=this.Fa||this.Ig();this.ik(a)};
H.of=function(a,b,c){var d=Oc(null,null,null);ta(d,new M(function(g,h){d.Ob=a?function(b){try{var d=a[D](c,b);g(d)}catch(B){h(B)}}:g;d.oc=b?function(a){try{var d=b[D](c,a);!Fb(d)&&a instanceof Lc?h(a):g(d)}catch(B){h(B)}}:h}));d[gb].C=this;this.nf(d);return d[gb]};H.Jk=function(a){L(1==this.Fa);this.Fa=0;this.qc(2,a)};H.Kk=function(a){L(1==this.Fa);this.Fa=0;this.qc(3,a)};
H.qc=function(a,b){0==this.Fa&&(this==b&&(a=3,b=new TypeError("Promise cannot resolve to itself")),this.Fa=1,Sc(b,this.Jk,this.Kk,this)||(this.Fg=b,this.Fa=a,this.C=null,this.Ig(),3!=a||b instanceof Lc||Wc(this,b)))};
function Sc(a,b,c,d){if(a instanceof M)return a.Gk(b,c,d),!0;var g;if(a)try{g=!!a.$goog_Thenable}catch(h){g=!1}else g=!1;if(g)return a[A](b,c,d),!0;g=typeof a;if("object"==g&&null!=a||"function"==g)try{var l=a[A];if(Nb(l))return Xc(a,l,b,c,d),!0}catch(p){return c[D](d,p),!0}return!1}function Xc(a,b,c,d,g){function h(a){p||(p=!0,d[D](g,a))}function l(a){p||(p=!0,c[D](g,a))}var p=!1;try{b[D](a,l,h)}catch(B){h(B)}}H.Ig=function(){this.qe||(this.qe=!0,Fc(this.xi,this))};H.xj=function(){return!!this.cc};
H.ik=function(a){L(null!=a.Ob);this.gd?qa(this.gd,a):this.cc=a;this.gd=a};H.bk=function(){var a=null;this.cc&&(a=this.cc,this.cc=a[$a],qa(a,null));this.cc||(this.gd=null);null!=a&&L(null!=a.Ob);return a};H.xi=function(){for(var a=null;a=this.bk();)this.wi(a,this.Fa,this.Fg);this.qe=!1};H.wi=function(a,b,c){3==b&&a.oc&&!a.ee&&this.qk();if(a[gb])a[gb].C=null,Yc(a,b,c);else try{a.ee?a.Ob[D](a[Da]):Yc(a,b,c)}catch(d){Zc[D](null,d)}Nc.put(a)};
function Yc(a,b,c){2==b?a.Ob[D](a[Da],c):a.oc&&a.oc[D](a[Da],c)}H.ih=Bb();H.qk=function(){var a;for(a=this;a&&a.Fd;a=a.C)a.Fd=!1};function Wc(a,b){a.Fd=!0;Fc(function(){a.Fd&&(a.ih(b),Zc[D](null,b))})}var Zc=zc;function Lc(a){Ub[D](this,a)}K(Lc,Ub);za(Lc[z],"cancel");function Vc(a,b,c){this.ga=a;this.resolve=b;this.reject=c};
function $c(a,b){this.va=a;this.Qb=b||this.Ff()}var ad=0;H=$c[z];H.id=G("va");H.qh=Cb("va");H.w=G("Qb");H.Ff=function(){return{}};H.Sg=G("Qb");H.Ea=function(){return{id:this.va,value:this.Sg()}};H.Rc=function(a){return"#"==a.substr(-1)?this.va:null};function bd(a){return new $c(a.id,a[x])}function cd(a){return new $c(ad++,a||{})}function dd(a){if(null==a)return"";a=new Uint8Array(a);for(var b="",c=0;c<a[y];++c)var d=a[c][r](16),b=b+(2>d[y]?"0"+d:d);return b};
function ed(a){this.type=a}function fd(a){$c[D](this,-1,a)}K(fd,$c);
var gd={};I("lf.TransactionType",gd,void 0);gd.READ_ONLY=0;gd.READ_WRITE=1;

function hd(a,b){this.Ya=a;this.Tg=b;this.ca=Uc()}H=hd[z];H.$i=G("Ya");H.U=function(){return(0==this.Tg?Pc():this.Oj())[A](J(function(){this.Ya.U()},this))};H.Oj=function(){this.Pj();this.Nj();return this.ca.ga};H.Pj=function(){var a=this.Ya.Of();a.H()[n](function(b){var c=this.Ya.da().get(b),c=this.Z(c[k](),J(c.fc,c));b=a.get(b);var d=b.td().c().map(function(a){return a.id()});0<d[y]&&c[m](d).Rg(this.De,this);b=b.zd().c().map(function(a){return a[1]})[Ka](b.sd().c());c.put(b).Rg(this.De,this)},this)};
H.Nj=function(){this.Ya.Xi()[n](function(a){var b=this.Z(a[k](),bd),c;b.get([-1])[A](function(a){c=a;return b[m]([])})[A](function(){b.put(c);b.put(a.Ea())},J(this.De,this))},this)};H.De=function(a){this.ca[jb](a)};function id(a,b,c,d){c=c||function(a,b){return a==b};d=d||function(b){return a[b]};for(var g=a[y],h=b[y],l=[],p=0;p<g+1;p++)l[p]=[],l[p][0]=0;for(var B=0;B<h+1;B++)l[0][B]=0;for(p=1;p<=g;p++)for(B=1;B<=h;B++)c(a[p-1],b[B-1])?l[p][B]=l[p-1][B-1]+1:l[p][B]=ea.max(l[p-1][B],l[p][B-1]);for(var Ra=[],p=g,B=h;0<p&&0<B;)c(a[p-1],b[B-1])?(Ra[Ab](d(p-1,B-1)),p--,B--):l[p-1][B]>l[p][B-1]?p--:B--;return Ra}function jd(a){return ec(arguments,function(a,c){return a+c},0)}
function kd(a){return jd[ib](null,arguments)/arguments[y]}function ld(a){var b=arguments[y];if(2>b)return 0;var c=kd[ib](null,arguments);return jd[ib](null,dc(arguments,function(a){return ea.pow(a-c,2)}))/(b-1)}function md(a){return ea.sqrt(ld[ib](null,arguments))};var nd="StopIteration"in Eb?Eb.StopIteration:{message:"StopIteration",stack:""};function od(){}qa(od[z],function(){throw nd;});od[z].tc=function(){return this};function pd(a){if(a instanceof od)return a;if("function"==typeof a.tc)return a.tc(!1);if(Lb(a)){var b=0,c=new od;qa(c,function(){for(;;){if(b>=a[y])throw nd;if(b in a)return a[b++];b++}});return c}throw fa("Not implemented");}
function qd(a,b,c){if(Lb(a))try{cc(a,b,c)}catch(d){if(d!==nd)throw d;}else{a=pd(a);try{for(;;)b[D](c,a[$a](),void 0,a)}catch(g){if(g!==nd)throw g;}}}function rd(a){if(fc(arguments,function(a){return!a[y]})||!arguments[y])return new od;var b=new od,c=arguments,d=qc(0,c[y]);qa(b,function(){if(d){for(var a=dc(d,function(a,b){return c[b][a]}),b=d[y]-1;0<=b;b--){L(d);if(d[b]<c[b][y]-1){d[b]++;break}if(0==b){d=null;break}d[b]=0}return a}throw nd;});return b};function N(a,b){this.g={};this.b=[];this.Ma=this.aa=0;var c=arguments[y];if(1<c){if(c%2)throw fa("Uneven number of arguments");for(var d=0;d<c;d+=2)this.set(arguments[d],arguments[d+1])}else a&&this[lb](a)}H=N[z];H.na=G("aa");H.c=function(){this.zc();for(var a=[],b=0;b<this.b[y];b++)a[v](this.g[this.b[b]]);return a};H.H=function(){this.zc();return this.b[Ka]()};H.s=function(a){return sd(this.g,a)};H.md=function(a){for(var b=0;b<this.b[y];b++){var c=this.b[b];if(sd(this.g,c)&&this.g[c]==a)return!0}return!1};
H.Fc=function(a,b){if(this===a)return!0;if(this.aa!=a.na())return!1;var c=b||td;this.zc();for(var d,g=0;d=this.b[g];g++)if(!c(this.get(d),a.get(d)))return!1;return!0};function td(a,b){return a===b}H.Ha=function(){return 0==this.aa};ma(H,function(){this.g={};Aa(this.b,0);this.Ma=this.aa=0});ja(H,function(a){return sd(this.g,a)?(delete this.g[a],this.aa--,this.Ma++,this.b[y]>2*this.aa&&this.zc(),!0):!1});
H.zc=function(){if(this.aa!=this.b[y]){for(var a=0,b=0;a<this.b[y];){var c=this.b[a];sd(this.g,c)&&(this.b[b++]=c);a++}Aa(this.b,b)}if(this.aa!=this.b[y]){for(var d={},b=a=0;a<this.b[y];)c=this.b[a],sd(d,c)||(this.b[b++]=c,d[c]=1),a++;Aa(this.b,b)}};H.get=function(a,b){return sd(this.g,a)?this.g[a]:b};H.set=function(a,b){sd(this.g,a)||(this.aa++,this.b[v](a),this.Ma++);this.g[a]=b};H.addAll=function(a){var b;a instanceof N?(b=a.H(),a=a.c()):(b=vc(a),a=uc(a));for(var c=0;c<b[y];c++)this.set(b[c],a[c])};
ka(H,function(a,b){for(var c=this.H(),d=0;d<c[y];d++){var g=c[d],h=this.get(g);a[D](b,h,g,this)}});sa(H,function(){return new N(this)});H.tc=function(a){this.zc();var b=0,c=this.Ma,d=this,g=new od;qa(g,function(){if(c!=d.Ma)throw fa("The map has changed since the iterator was created");if(b>=d.b[y])throw nd;var g=d.b[b++];return a?g:d.g[g]});return g};function sd(a,b){return ba[z][bb][D](a,b)};
function ud(a){this.uk=a}f(ud[z],G("uk"));var vd=new ud("backstore"),wd=new ud("cache"),xd=new ud("indexstore"),yd=new ud("engine"),zd=new ud("runner"),Ad=new ud("observerregistry"),Bd=new ud("schema");
function Cd(a){if("function"==typeof a.na)a=a.na();else if(Lb(a)||Mb(a))a=a[y];else{var b=0,c;for(c in a)b++;a=b}return a}function Dd(a){if("function"==typeof a.c)return a.c();if(Mb(a))return a[ab]("");if(Lb(a)){for(var b=[],c=a[y],d=0;d<c;d++)b[v](a[d]);return b}return uc(a)}
function Ed(a,b,c){if("function"==typeof a[yb])return a[yb](b,c);if(Lb(a)||Mb(a))return gc(a,b,c);var d;if("function"==typeof a.H)d=a.H();else if("function"!=typeof a.c)if(Lb(a)||Mb(a)){d=[];for(var g=a[y],h=0;h<g;h++)d[v](h)}else d=vc(a);else d=void 0;for(var g=Dd(a),h=g[y],l=0;l<h;l++)if(!b[D](c,g[l],d&&d[l],a))return!1;return!0};function O(a){this.g=new N;a&&this[lb](a)}function Fd(a){var b=typeof a;return"object"==b&&a||"function"==b?"o"+Ob(a):b.substr(0,1)+a}H=O[z];H.na=function(){return this.g.na()};H.add=function(a){this.g.set(Fd(a),a)};H.addAll=function(a){a=Dd(a);for(var b=a[y],c=0;c<b;c++)this.add(a[c])};ja(H,function(a){return this.g[m](Fd(a))});ma(H,function(){this.g[Pa]()});H.Ha=function(){return this.g.Ha()};H.contains=function(a){return this.g.s(Fd(a))};H.Vh=function(a){return Ed(a,this[u],this)};H.c=function(){return this.g.c()};
sa(H,function(){return new O(this)});H.Fc=function(a){return this.na()==Cd(a)&&this.Gj(a)};H.Gj=function(a){var b=Cd(a);if(this.na()>b)return!1;!(a instanceof O)&&5<b&&(a=new O(a));return Ed(this,function(b){var d=a;if("function"==typeof d[u])b=d[u](b);else if("function"==typeof d.md)b=d.md(b);else if(Lb(d)||Mb(d))b=0<=bc(d,b);else a:{for(var g in d)if(d[g]==b){b=!0;break a}b=!1}return b})};H.tc=function(){return this.g.tc(!1)};
function Gd(a,b){this.va=a;this.Qb=b||{}}function Hd(a){var b=new O;a[n](function(a){b.add(a>>9)});return b.c()}H=Gd[z];H.ka=G("va");H.lc=G("Qb");H.Lg=function(a){a[n](function(a){this.Qb[a.id()]=a.Ea()},this)};H.pk=function(a){a[n](function(a){var c=this.Qb;a in c&&delete c[a]},this)};H.Ea=function(){return{id:this.va,value:JSON.stringify(this.Qb)}};function Id(a){return new Gd(a.id,JSON.parse(a[x]))};

function Jd(a,b,c){this.O=a;this.Ib=b;this.Gg=c}H=Jd[z];H.get=function(a){return 0==a[y]?this.ue():this.dj(a)[A](J(function(b){return a.map(function(a){var d=b.get(a>>9);L(d,"Containing page is empty");return this.Ib(d.lc()[a])},this)},this))};H.dj=function(a){var b=new N,c=Uc();a=Hd(a).map(function(a){return new M(function(c,h){var l;try{l=this.O.get(a)}catch(p){h(p);return}ua(l,h);Ba(l,J(function(a){a=Id(a[ub][Xa]);b.set(a.ka(),a);c()},this))},this)},this);Tc(a)[A](function(){c[vb](b)});return c.ga};
H.ue=function(){return new M(function(a,b){var c=[],d;try{d=this.O[tb]()}catch(g){b(g);return}ua(d,b);Ba(d,J(function(){var b=d[Xa];if(b){var g=Id(b[x]).lc(),p;for(p in g)c[v](this.Ib(g[p]));b[Sa]()}else a(c)},this))},this)};H.Rb=function(a){return new M(function(b,c){var d;try{d=a()}catch(g){c(g);return}Ba(d,b);ua(d,c)},this)};
H.put=function(a){if(0==a[y])return Pc();var b=new N;a[n](function(a){var d;d=a.id()>>9;var g=b.get(d,null);null===g&&(g=this.Gg(this.O[rb],d));g.Lg([a]);b.set(d,g)},this);a=b.c().map(function(a){return this.Rb(J(function(){return this.O.put(a.Ea())},this))},this);return Tc(a)};
ja(H,function(a){if(0==a[y])return this.Rb(J(function(){return this.O[Pa]()},this));var b=new N;a[n](function(a){var d=a>>9,g=b.get(d,null);null===g&&(g=this.Gg(this.O[rb],d));g.pk([a]);b.set(d,g)},this);a=b.c().map(function(a){return this.Rb(J(function(){var b;a:{b=a.lc();for(var g in b){b=!1;break a}b=!0}return b?this.O[qb](a.ka()):this.O.put(a.Ea())},this))},this);return Tc(a)});function Kd(a,b,c){a=a.o(wd);var d=[c<<9,(c+1<<9)-1];b=a.Va(b,d[0],d[1]);c=new Gd(c);c.Lg(b);return c}
function Ld(a,b){return new Gd(b)};
function Md(){};
function Nd(a){this.pa=a.o(wd);this.N=a.o(xd);this.A=a.o(Bd)}Ca(Nd[z],function(a){a[n](function(a){this.Nk(a);this.Lk(a)},this)});Nd[z].Lk=function(a){var b=a[k]();a.td().c()[n](function(a){this.pa[m](b,[a.id()])},this);a.sd()[n](function(a){this.pa.set(b,[a])},this);a.zd()[n](function(a){this.pa.set(b,[a[1]])},this)};Nd[z].Nk=function(a){var b=this.A[t](a[k]());a.Vi()[n](function(a){this.Xg(b,a)},this)};
Nd[z].Xg=function(a,b){a.Ga().map(function(a){return this.N.get(a.l())},this)[Ka]([this.N.get(a.Kb())])[n](function(a){var d=null===b[1]?null:b[1].Rc(a[k]()),g=null===b[0]?null:b[0].Rc(a[k]());null===g&&null!==d?a.add(d,b[1].id()):null===g||null===d?null!==g&&null===d&&a[m](g,b[0].id()):0!=a.Bc()[Wa](g,d)&&(a.add(d,b[1].id()),a[m](g,b[0].id()))})};
function P(a,b){za(this,a);this.message=b};
function Od(a){this.N=a.o(xd)}Od[z].Ei=function(a,b){var c=a.kc().ze();return null===c?null:this.Di(c,b)};Od[z].Di=function(a,b){var c=a.l(),d=b.Rc(c),c=this.N.get(c).get(d);return 0==c[y]?null:c[0]};Od[z].ke=function(a,b){var c=a.kc().bj();b[n](function(a){c[n](function(b){if(null===a.w()[b[k]()])throw new P("ConstraintError","Attempted to insert NULL value to non-nullable field "+b.l());},this)},this)};
function Pd(a){this.hb=new N;this.Ia=new N;this.kb=new N;this.B=a}H=Pd[z];ia(H,G("B"));H.sd=G("hb");H.zd=G("Ia");H.td=G("kb");H.add=function(a){if(this.kb.s(a.id())){var b=[this.kb.get(a.id()),a];this.Ia.set(a.id(),b);this.kb[m](a.id())}else this.hb.set(a.id(),a)};H.modify=function(a){var b=a[0],c=a[1];L(b.id()==c.id(),"Row ID mismatch between old/new values.");b=b.id();this.hb.s(b)?this.hb.set(b,c):(this.Ia.s(b)&&(a=[this.Ia.get(a[0].id())[0],c]),this.Ia.set(b,a))};
xa(H,function(a){if(this.hb.s(a.id()))this.hb[m](a.id());else if(this.Ia.s(a.id())){var b=this.Ia.get(a.id())[0];this.Ia[m](a.id());this.kb.set(a.id(),b)}else this.kb.set(a.id(),a)});H.Vi=function(){var a=[];this.hb.c()[n](function(b){a[v]([null,b])},this);this.Ia.c()[n](function(b){a[v](b)},this);this.kb.c()[n](function(b){a[v]([b,null])},this);return a};f(H,function(){return"["+this.hb.H()[r]()+"], ["+this.Ia.H()[r]()+"], ["+this.kb.H()[r]()+"]"});
H.hj=function(){var a=new Pd(this.B);this.hb.c()[n](function(b){a[qb](b)},this);this.kb.c()[n](function(b){a.add(b)},this);this.Ia.c()[n](function(b){a.modify([b[1],b[0]])},this);return a};H.Ha=function(){return this.hb.Ha()&&this.kb.Ha()&&this.Ia.Ha()};
function Qd(a,b){this.Sa=new N;b[n](function(a){this.Sa.set(a[k](),a)},this);this.pa=a.o(wd);this.N=a.o(xd);this.ld=new Od(a);this.Hd=new Nd(a);this.Ue=this.Yd=!1;this.Eb=new N}H=Qd[z];H.Of=G("Eb");H.Xi=function(){var a=[];this.Eb.H().map(function(a){return this.Sa.get(a)},this)[n](function(b){b.Sb()&&(b.Ga()[n](function(b){a[v](this.N.get(b.l()))},this),a[v](this.N.get(b[k]()+".#")))},this);return a};H.da=G("Sa");
H.Yi=function(){var a=[];this.Sa.c()[n](function(b){b.Sb()&&(b.Ga()[n](function(b){a[v](b.l())}),a[v](b[k]()+".#"))});return a};H.ub=function(a,b){this.yc();this.hd(a);this.ld.ke(a,b);for(var c=0;c<b[y];c++)this.Id(a,null,b[c])};
H.Id=function(a,b,c){var d=a[k](),g=this.Eb.get(d,null)||new Pd(d);this.Eb.set(d,g);var h=[b,c];try{this.Hd.Xg(a,h)}catch(l){throw this.Ue=!0,l;}null===b&&null!==c?(this.pa.set(d,[c]),g.add(c)):null!==b&&null!==c?(this.pa.set(d,[c]),g.modify(h)):null!==b&&null===c&&(this.pa[m](d,[b.id()]),g[qb](b))};Ca(H,function(a,b){this.yc();this.hd(a);this.ld.ke(a,b);for(var c=0;c<b[y];c++){var d=b[c],g=this.pa.get([d.id()])[0];this.Id(a,g,d)}});
H.Ge=function(a,b){this.yc();this.hd(a);this.ld.ke(a,b);for(var c=0;c<b[y];c++){var d=b[c],g=null,h=this.ld.Ei(a,d);null!=h&&(g=this.pa.get([h])[0],d.qh(h));this.Id(a,g,d)}};ja(H,function(a,b){this.yc();this.hd(a);for(var c=0;c<b[y];c++)this.Id(a,b[c],null)});H.U=function(){this.yc();this.Yd=!0};H.yc=function(){L(!this.Ue,"Attemptted to use journal that needs to be rolled back.");L(!this.Yd,"Attemptted to commit a terminated journal.")};
H.Cb=function(){L(!this.Yd,"Attempted to rollback a terminated journal.");var a=this.Eb.c().map(function(a){return a.hj()},this);this.Hd[zb](a);this.Yd=!0;this.Ue=!1};H.hd=function(a){if(!this.Sa.s(a[k]()))throw new P("ScopeError",a[k]()+" is not in the journal's scope.");};
var Rd={};I("lf.ConstraintAction",Rd,void 0);Rd.RESTRICT=0;Rd.CASCADE=1;var Sd={};I("lf.ConstraintTiming",Sd,void 0);Sd.IMMEDIATE=0;Sd.DEFERRABLE=1;var Td={};I("lf.Order",Td,void 0);Td.DESC=0;Td.ASC=1;var Ud={};I("lf.Type",Ud,void 0);Ud.ARRAY_BUFFER=0;Ud.BOOLEAN=1;Ud.DATE_TIME=2;Ud.INTEGER=3;Ud.NUMBER=4;Ud.STRING=5;Ud.OBJECT=6;var Vd={0:new ArrayBuffer(0),1:!1,2:ba.freeze(new Date(0)),3:0,4:0,5:"",6:ba.freeze({})};I("lf.type.DEFAULT_VALUES",Vd,void 0);
function Wd(a,b,c,d){this.f=a;this.u=b;this.ba=null===this.f?!1:c;this.fa=null===this.u?!1:d}H=Wd[z];f(H,function(){return(this.ba?"(":"[")+(null===this.f?"unbound":this.f)+", "+(null===this.u?"unbound":this.u)+(this.fa?")":"]")});H.Rh=function(){if(null===this.f&&null===this.u)return[];var a=null,b=null;null===this.f||(a=new Wd(null,this.f,!1,!this.ba));null===this.u||(b=new Wd(this.u,null,!this.fa,!1));return[a,b][Ea](function(a){return null!==a})};
H.reverse=function(){return new Wd(this.u,this.f,this.fa,this.ba)};H.tg=function(a){var b=Xd(this.f,a.f,!0,this.ba,a.ba);if(0==b)return!0;var c=-1==b?this:a;a=1==b?this:a;return null===c.u||c.u>a.f||c.u==a.f&&!c.fa&&!a.ba};function Yd(){return new Wd(null,null,!1,!1)}H.contains=function(a){var b=null===this.u||a<this.u||a==this.u&&!this.fa;return(null===this.f||a>this.f||a==this.f&&!this.ba)&&b};H.Fc=function(a){return this.f==a.f&&this.ba==a.ba&&this.u==a.u&&this.fa==a.fa};
function Xd(a,b,c,d,g){function h(a){return c?a:1==a?-1:1}d=d||!1;g=g||!1;return null===a?null===b?(d?!g:g)?d?h(1):h(-1):0:h(-1):null===b?h(1):a<b?-1:a==b?(d?!g:g)?d?h(1):h(-1):0:1}function Zd(a,b){var c=Xd(a.f,b.f,!0,a.ba,b.ba);0==c&&(c=Xd(a.u,b.u,!1,a.fa,b.fa));return c};
function $d(a,b){this.entries=a;this.I=new O(b);this.Fb=null}H=$d[z];H.Dj=function(a){return this.I.Fc(a.I)};function ae(a,b){L(a.Dj(b),"Intersection/union operations only apply to compatible relations.")}H.W=function(){return this.I.c()};H.Ie=function(){return 1<this.I.na()};H.xe=function(){return this[C].map(function(a){return a.ta.w()})};H.jj=function(){return this[C].map(function(a){return a.ta.id()})};H.vk=function(a,b){null===this.Fb&&(this.Fb=new N);this.Fb.set(a.l(),b)};
H.jc=function(a){L(null!==this.Fb,"getAggregationResult called before any results have been calculated.");var b=this.Fb.get(a.l(),void 0);L(Fb(b),"Could not find result for "+a.l());return b};H.vj=function(a){return null!==this.Fb&&this.Fb.s(a.l())};var be=null;function ce(){null===be&&(be=new $d([],[]));return be}
function de(a){if(0==a[y])return ce();for(var b=a[kb](function(b,c){ae(a[0],c);return b+c[C][y]},0),c=e(b),d=0,b=a.map(function(a){var b=new N;a[C][n](function(a){c[d++]=a;b.set(a.id,a)});return b}),g=new N,h=0;h<c[y];h++)b[yb](function(a){return a.s(c[h].id)})&&g.set(c[h].id,c[h]);return new $d(g.c(),a[0].I.c())}function ee(a){if(0==a[y])return ce();var b=new N;a[n](function(c){ae(a[0],c);c[C][n](function(a){b.set(a.id,a)})});return new $d(b.c(),a[0].I.c())}
function fe(a,b){var c=1<b[y],d=a.map(function(a){return new ge(a,c)});return new $d(d,b)}function ge(a,b){this.ta=a;this.id=he++;this.Je=b}var he=0;ge[z].M=function(a){var b=a.Ua();return null!==b&&this.ta.w()[bb](b)?this.ta.w()[b]:this.Je?this.ta.w()[a.Z().za()][a[k]()]:this.ta.w()[a[k]()]};ge[z].af=function(a,b){var c=a.Ua();if(null!=c)this.ta.w()[c]=b;else if(this.Je){var c=a.Z().za(),d=this.ta.w()[c];null==d&&(d={},this.ta.w()[c]=d);d[a[k]()]=b}else this.ta.w()[a[k]()]=b};
function ie(a,b,c,d){function g(a,b){if(a.Je){var c=a.ta.w(),d;for(d in c)h[d]=c[d]}else L(!h[bb](b[0]),"Attempted to join table with itself, without using table alias, or same alias "+b[0]+"is reused for multiple tables."),h[b[0]]=a.ta.w()}var h={};g(a,b);g(c,d);a=new $c(-1,h);return new ge(a,!0)};
I("lf.bind",function(a){return new je(a)},void 0);function je(a){this.wa=a}I("lf.Binder",je,void 0);je[z].rb=G("wa");
function ke(){var a=le();this.ni=new N(1,me(),2,ne(),4,a,3,a,5,oe())}Hb(ke);ke[z].ve=function(a,b){var c=this.ni.get(a,null);L(null!==c,"Could not find evaluation map for "+a);c=c.get(b,null);L(null!==c,"Could not find evaluator for "+a+", "+b);return c};
function le(){return new N("between",function(a,b){return a>=b[0]&&a<=b[1]},"eq",function(a,b){return a==b},"gte",function(a,b){return a>=b},"gt",function(a,b){return a>b},"in",function(a,b){return-1!=b[ob](a)},"lte",function(a,b){return a<=b},"lt",function(a,b){return a<b},"neq",function(a,b){return a!=b})}
function oe(){return new N("between",function(a,b){return a>=b[0]&&a<=b[1]},"eq",function(a,b){return a==b},"gte",function(a,b){return a>=b},"gt",function(a,b){return a>b},"in",function(a,b){return-1!=b[ob](a)},"lte",function(a,b){return a<=b},"lt",function(a,b){return a<b},"match",function(a,b){return(new RegExp(b)).test(a)},"neq",function(a,b){return a!=b})}
function ne(){return new N("between",function(a,b){return a[Qa]()>=b[0][Qa]()&&a[Qa]()<=b[1][Qa]()},"eq",function(a,b){return(null===a?-1:a[Qa]())==(null===b?-1:b[Qa]())},"gte",function(a,b){return a[Qa]()>=b[Qa]()},"gt",function(a,b){return a[Qa]()>b[Qa]()},"in",function(a,b){return b[wb](function(b){return b[Qa]()==a[Qa]()})},"lte",function(a,b){return a[Qa]()<=b[Qa]()},"lt",function(a,b){return a[Qa]()<b[Qa]()},"neq",function(a,b){return(null===a?-1:a[Qa]())!=(null===b?-1:b[Qa]())})}
function me(){return new N("eq",function(a,b){return a==b},"neq",function(a,b){return a!=b})};function pe(a,b){this.hg=a;this.Yg=b}pe[z].getKey=G("hg");pe[z].oj=G("Yg");sa(pe[z],function(){return new pe(this.hg,this.Yg)});function qe(a,b){pe[D](this,a,b);this.i=this.C=null}K(qe,pe);var re=[];H=qe[z];sa(H,function(){return new qe(this.getKey(),this.oj())});H.getParent=G("C");H.bg=function(){return!this.ua()};H.Y=function(){return this.i||re};H.qb=function(a){return this.Y()[a]||null};H.ua=function(){return this.Y()[y]};H.Wi=function(){for(var a=0,b=this;b[Ga]();)a++,b=b[Ga]();return a};H.Jb=function(){for(var a=this;a[Ga]();)a=a[Ga]();return a};H.contains=function(a){do a=a[Ga]();while(a&&a!=this);return Boolean(a)};
H.rc=function(a,b){if(!1!==a[D](b,this))for(var c=this.Y(),d=0;d<c[y];d++)c[d].rc(a,b)};H.cf=Cb("C");H.ia=function(a){this.uc(a,this.i?this.i[y]:0)};H.uc=function(a,b){L(!a[Ga]());a.cf(this);this.i=this.i||[];L(0<=b&&b<=this.i[y]);lc(this.i,b,0,a)};H.Ud=function(a){var b=this.i&&this.i[a];return b?(b.cf(null),hc(this.i,a),0==this.i[y]&&(this.i=null),b):null};H.removeChild=function(a){return this.Ud(bc(this.Y(),a))};

function se(){qe[D](this,"","");this.va=te++}K(se,qe);var te=0;se[z].ka=G("va");se[z].bf=Cb("va");
function ue(a,b,c){se[D](this);this.K=a;va(this,b);this.V=c;this.pd=ke.we().ve(this.K.$(),this.V);this.Xa=!1;this.bc=b}K(ue,se);H=ue[z];H.Gb=function(){var a=new ue(this.K,this[x],this.V);a.wk(this.bc);a.Xd(this.Xa);a.bf(this.ka());return a};H.zb=function(a){return null!=a?(a[v](this.K),a):[this.K]};H.Xd=Cb("Xa");H.wk=Cb("bc");
H.Af=function(){var a=!1;this[x]instanceof je||(a="array"==Ib(this[x])?!this[x][wb](function(a){return a instanceof je}):!0);if(!a)throw new P("SyntaxError","Value is not bounded");};H.eval=function(a){this.Af();if("in"==this.V)return this.ii(a);var b=a[C][Ea](function(a){return this.pd(a.M(this.K),this[x])!=this.Xa},this);return new $d(b,a.W())};
na(H,function(a){function b(b){if(a[y]<=b)throw new P("SyntaxError","Cannot bind to given array: out of range.");}if(this.bc instanceof je){var c=this.bc.rb();b(c);va(this,a[c])}else"array"==Ib(this.bc)&&va(this,this.bc.map(function(c){return c instanceof je?(b(c.rb()),a[c.rb()]):c}))});
H.ii=function(a){L("in"==this.V,"ValuePredicate#evalAsIn_() called for wrong predicate type.");var b=new O(this[x]),c=J(function(a){return b[u](a)!=this.Xa},this),d=a[C][Ea](function(a){return c(a.M(this.K))},this);return new $d(d,a.W())};f(H,function(){return"value_pred("+this.K.l()+" "+this.V+(this.Xa?"(complement)":"")+" "+this[x]+")"});H.ag=function(){this.Af();return null!==this[x]&&("between"==this.V||"eq"==this.V||"gt"==this.V||"gte"==this.V||"lt"==this.V||"lte"==this.V)};
H.Hk=function(){L(this.ag(),"Could not convert predicate to key range.");var a=null;"between"==this.V?a=new Wd(this[x][0],this[x][1],!1,!1):"eq"==this.V?(a=this[x],a=new Wd(a,a,!1,!1)):a="gte"==this.V?new Wd(this[x],null,!1,!1):"gt"==this.V?new Wd(this[x],null,!0,!1):"lte"==this.V?new Wd(null,this[x],!1,!1):new Wd(null,this[x],!1,!0);return this.Xa?a.Rh():[a]};
function ve(){this.Ac=this.ra=null}ve[z].Bd=function(a){null===this.ra&&null!=this.D&&(this.ra=we(this.D));a=this.ra.get(a,null);L(null!==a);return a};function we(a){var b=new N;a.rc(function(a){b.set(a.ka(),a)});return b}ve[z].jd=function(a){a.D&&(this.D=a.D.Gb());this.Ac=a};na(ve[z],function(){L(null==this.Ac);return this});ve[z].he=function(a){var b=this.D;null!=b&&b.rc(function(b){b instanceof ue&&b[q](a)})};
function xe(){ve[D](this)}K(xe,ve);function ye(a){var b="";a[n](function(c,d){b+=c.K.l()+" ";b+=1==c.mb?"ASC":"DESC";d<a[y]-1&&(b+=", ")});return b}sa(xe[z],function(){var a=new xe;a.jd(this);this.h&&(a.h=this.h[w]());this.f&&(a.f=this.f[w]());a.oa=this.oa;a.ma=this.ma;this.J&&(a.J=this.J[w]());this.la&&(a.la=this.la[w]());this.Nb&&(a.Nb=this.Nb);this.Yb&&(a.Yb=this.Yb);return a});
na(xe[z],function(a){xe.eb[q][D](this,a);null!=this.Nb&&(this.oa=a[this.Nb.rb()]);null!=this.Yb&&(this.ma=a[this.Yb.rb()]);this.he(a);return this});
function ze(a){this.Da=a}ze[z].Jb=G("Da");ze[z].Jf=Db("plan description");ze[z].da=function(){function a(c){var d=c.da();d&&b.add(d);c.Y()[n](function(b){a(b)})}var b=new O;a(this.Da);return b.c()};function Ae(a){var b=new O;a[n](function(a){b[lb](a.da())});return b};

function Ce(a,b){this.global=a;this.xb=a.o(vd);this.Rd=b.map(function(a){return a[Da]});this.wg=b.map(function(a){return a.Ve});this.Cf=Ae(this.wg);this.Ug=this.ei();this.Ub=Uc()}H=Ce[z];H.ei=function(){return this.Rd[wb](function(a){return!(a instanceof xe)})?1:0};
ha(H,function(){var a=new Qd(this[Ta],this.Cf.c()),b=[],c=this.wg[w](),d=J(function(){var g=c[Ha]();if(g){var h=this.Rd[b[y]];return g.Jb()[Ia](a,h)[A](function(a){b[v](a[0]);return d()})}return Pc()},this);return d()[A](J(function(){return this.xb.Hb(this.Ug,a).U()},this))[A](J(function(){this.Re(b);return b},this),J(function(b){a.Cb();throw b;},this))});H.$=G("Ug");H.da=G("Cf");H.Kc=G("Ub");H.ka=function(){return Ob(this)};H.Re=Bb();
function De(a,b){Ce[D](this,a,b);this.Ab=a.o(Ad)}K(De,Ce);wa(De[z],Db(0));De[z].Re=function(a){this.Rd[n](function(b,c){this.Ab.Wg(b,a[c])},this)};
function Ee(a,b){this.m=a;this.Ab=a.o(Ad);this.Ra=a.o(zd);this.Hd=new Nd(a);this.Eb=b;var c=a.o(Bd),d=this.Eb.map(function(a){return c[t](a[k]())});this.Sa=new O(d);this.Ub=Uc()}H=Ee[z];ha(H,function(){this.Hd[zb](this.Eb);this.Zc();return Pc()});H.$=Db(1);H.da=G("Sa");H.Kc=G("Ub");H.ka=function(){return Ob(this)};wa(H,Db(1));H.Zc=function(){var a=this.Ab.Ce(this.Sa.c());0!=a[y]&&(a=new De(this.m,a),this.Ra.Vb(a))};
function Fe(a){this.m=a;this.xb=a.o(vd);this.Ra=a.o(zd)}Fe[z].Dk=function(){this.xb.subscribe(this.Pe[q](this))};Fe[z].Pe=function(a){a=new Ee(this.m,a);this.Ra.Vb(a)};


function Q(a,b){this.Ma=a;this.j=b;this.fb=new N}I("lf.backstore.FirebaseRawBackStore",Q,void 0);H=Q[z];H.Cd=G("j");H.Dd=function(){throw new P("NotSupportedError","Firebase does not have raw transaction.");};function Ge(a,b){var c=Uc(),d=a;b[y]&&(d=a[gb](b));d[db]("value",function(a){c[vb](a.val())},function(a){c[jb](a)});return c.ga}function He(a,b,c){function d(a){a?g[jb](a):g[vb]()}c=c||!1;var g=Uc();c?a.set(b,d):a[zb](b,d);return g.ga}
H.Aa=function(a){return Ge(this.j,"@rev/R")[A](function(a){this.Qa=a;return Ge(this.j,"@table")}[q](this))[A](function(b){var c=0,d;for(d in b)this.fb.set(d,b[d]),b[d]>c&&(c=b[d]);a.gb()[n](function(a){this.fb.s(a[k]())||(b[a[k]()]=++c)},this);d=this.j[gb]("@table");return He(d,b)}[q](this))};
H.Zd=function(a,b){var c=this.fb.get(a);return null!=c?function(){var a={},g=Uc();this.j[Ma]("T").equalTo(c)[db]("value",function(c){c[n](function(c){var g=b(c.val());a[ga(c.key(),10)]=g});g[vb](a)});return g.ga}[D](this)[A](function(a){a["@rev"]={R:++this.Qa};return He(this.j,a)}[q](this)):Pc()};H.Dc=function(a){return this.Zd(a,Db(null))[A](function(){this.fb[m](a);return He(this.j[gb]("@table/"+a),null,!0)}[q](this))};Q[z].dropTable=Q[z].Dc;
Q[z].vc=function(a,b,c){return this.Zd(a,function(a){var g=a.P;g[b]=c;return{R:this.Qa+1,T:a.T,P:g}}[q](this))};Q[z].addTableColumn=Q[z].vc;Q[z].Ec=function(a,b){return this.Zd(a,function(a){var d=a.P;delete d[b];return{R:this.Qa+1,T:a.T,P:d}}[q](this))};Q[z].dropTableColumn=Q[z].Ec;Q[z].Yc=function(a,b,c){return this.Zd(a,function(a){var g=a.P;g[c]=g[b];delete g[b];return{R:this.Qa+1,T:a.T,P:g}}[q](this))};Q[z].renameTableColumn=Q[z].Yc;
Q[z].yb=function(){throw new P("NotSupportedError","Firebase does not have raw transaction.");};Q[z].createRow=Q[z].yb;Q[z].Nc=G("Ma");Q[z].getVersion=Q[z].Nc;Q[z].gc=function(a){var b=Uc();a=this.fb.get(a);this.j[Ma]("T").equalTo(a)[db]("value",function(a){var d=[];a[n](function(a){d[v](a.val().P)});b[vb](d)});return b.ga};pa(Q[z],function(){var a={},b=this.fb.H().map(function(b){return this.gc(b)[A](function(d){a[b]=d})}[q](this));return Tc(b)[A](function(){return a})});pa(Q[z],Q[z].dump);
function Ie(a,b,c){hd[D](this,c,b);this.j=a}K(Ie,hd);Ie[z].Z=function(a){return this.j.Lc(a)};
Ie[z].U=function(){Ie.eb.U[D](this);var a=this.$i().Of();if(0==a.na())this.ca[vb]();else{var b=this.j.ij()+1;this.j.Kg(b);var c={"@rev":{R:b}};a[n](function(a){var g=this.j.Tf(a[k]());a.sd()[n](function(a,d){c[d]={R:b,T:g,P:a.w()}});a.zd()[n](function(a,d){c[d]={R:b,T:g,P:a[1].w()}});a.td()[n](function(a,b){c[b]=null})},this);this.j.gj()[zb](c,function(c){if(null===c)this.ca[vb]();else this.j.Kg(b-1),c=a.c().map(function(a){return this.j.Bg(a[k]())},this),Tc(c)[A](this.ca[jb][q](this.ca),this.ca[jb][q](this.ca))}[q](this))}return this.ca.ga};
function Je(){this.pb=new N}H=Je[z];H.Be=function(a){if(0==a[y])return this.pb.c();var b=[];a[n](function(a){a=this.pb.get(a,null);null===a||b[v](a)},this);return b};H.getData=G("pb");H.get=function(a){return Pc(this.Be(a))};H.We=function(a){a[n](function(a){this.pb.set(a.id(),a)},this)};H.put=function(a){this.We(a);return Pc()};H.Cg=function(a){0==a[y]||a[y]==this.pb.na()?this.pb[Pa]():a[n](function(a){this.pb[m](a)},this)};ja(H,function(a){this.Cg(a);return Pc()});
H.aj=function(){return this.pb.Ha()?0:this.pb.H()[kb](function(a,b){return a>b?a:b},0)};
function Ke(a,b){this.A=a;this.hh=b;this.Xc=new N;this.Qa=-1;this.I=new N;this.fb=new N;this.ie=null}H=Ke[z];H.ij=G("Qa");H.Kg=Cb("Qa");
H.Aa=function(a){this.j=this.hh[gb](this.A[rb]());var b=a||function(){return Pc()};return Ge(this.j,"@db/version")[A](function(a){return null===a?He(this.j,this.Wh(),!0)[A](function(){var a=new Q(0,this.j);return b(a)}[q](this)):a==this.A[Fa]()?Ge(this.j,"@rev/R")[A](function(a){this.Qa=a;return Ge(this.j,"@table")}[q](this))[A](function(a){for(var b in a)this.fb.set(b,a[b]);a=this.A.gb().map(function(a){return this.Bg(a[k]())},this);return Tc(a)}[q](this))[A](function(){this.Aj();this.lg();return Pc()}[q](this)):
this.Se(a,b)[A](function(){return this.Aa()}[q](this))}[q](this))};H.Se=function(a,b){var c=new Q(a,this.j);return c.Aa(this.A)[A](function(){return this.Mk()}[q](this))[A](function(){return b(c)})[A](function(){var a=this.j[gb]("@db");return He(a,{version:this.A[Fa]()},!0)}[q](this))};H.Mk=function(){return Pc()};H.lg=function(){this.j.off();this.j.on("child_removed",this.Vj[q](this));this.je&&(this.je.off(),this.Xc[Pa]());this.je=this.j[Ma]("R").startAt(this.Qa+1);this.je.on("value",this.Pe[q](this))};
H.Aj=function(){ad=this.I.c().map(function(a){return a.aj()})[kb](function(a,b){return a>b?a:b},0)+1};H.Vj=function(a){var b=a.val(),c=this.Xc.get(b.T,null);null===c&&(c=new O,this.Xc.set(b.T,c));c.add(ga(a.key(),10))};H.Pe=function(a){var b=a[gb]("@rev/R").val();null!=b&&b!=this.Qa&&(this.Qa=b,a=this.Ji(a),a[n](function(a){var b=this.I.get(a[k]()),g=a.td().H();g[y]&&b.Cg(g);var h=a.sd().c();a.zd()[n](function(a){h[v](a[1])});b.We(h)},this),a[y]&&this.Uc(a),this.lg())};
H.Ji=function(a){var b=new O,c=new N;this.fb[n](function(a,g){var h=this.I.get(g),l=new Pd(g);if(this.Xc.s(a)){var p=this.Xc.get(a).c();b[lb](p);h.Be(p)[n](function(a){l[qb](a)})}c.set(a,l)}[q](this));a[n](function(a){if("@rev"!=a.key()){var g=ga(a.key(),10);if(!b[u](g)){a=a.val();var h=c.get(a.T),l=this.I.get(h[k]());l.getData().s(g)?h.modify([l.Be([g])[0],new $c(g,a.P)]):h.add(new $c(g,a.P))}}}[q](this));return c.c()[Ea](function(a){return!a.Ha()})};
H.Bg=function(a){var b=Uc(),c=this.Tf(a);this.j[Ma]("T").equalTo(c)[db]("value",function(c){var g=new Je,h=[];c[n](function(a){h[v](new $c(ga(a.key(),10),a.val().P))});g.We(h);this.I.set(a,g);b[vb]()}[q](this));return b.ga};H.Tf=function(a){return this.fb.get(a)};H.Wh=function(){var a={};a["@db"]={version:this.A[Fa]()};a["@rev"]={R:1};this.Qa=1;a["@table"]={};this.A.gb()[n](function(b,c){var d=b[k]();a["@table"][d]=c;this.I.set(d,new Je);this.fb.set(d,c)},this);return a};
H.Hb=function(a,b){return new Ie(this,a,b)};H.Lc=function(a){var b=this.I.get(a,null);if(null!==b)return b;throw new P("DataError","Table "+a+" not found");};H.gj=G("j");ra(H,Bb());ya(H,Cb("ie"));H.Uc=function(a){null!=this.ie&&this.ie(a)};
function R(a,b,c,d){this.j=b;this.La=c;this.Ma=a;this.ed=d}I("lf.backstore.IndexedDBRawBackStore",R,void 0);R[z].Cd=G("j");R[z].getRawDBInstance=R[z].Cd;R[z].Dd=G("La");R[z].getRawTransaction=R[z].Dd;R[z].Dc=function(a){return new M(function(b,c){try{this.j.deleteObjectStore(a)}catch(d){c(d);return}b()},this)};R[z].dropTable=R[z].Dc;
R[z].Zj=function(a,b,c){return new M(function(d,g){var h;try{var l=this.La[nb](a);h=l[tb]()}catch(p){g(p);return}Ba(h,function(){var a=h[Xa];a?(b(a),a[Sa]()):(c(l),d())});ua(h,g)},this)};function Le(a){var b=null;return b=a instanceof ArrayBuffer?dd(a):a instanceof Date?a[Qa]():a}R[z].gf=function(a,b){function c(a){var c=Id(a[x]),d=c.lc(),p;for(p in d){var B=bd(d[p]);b(B);d[p]=B.Ea()}a[zb](c.Ea())}function d(a){var c=bd(a[x]);b(c);a[zb](c.Ea())}return this.Zj(a,this.ed?c:d,Bb())};
R[z].vc=function(a,b,c){var d=Le(c);return this.gf(a,function(a){a.w()[b]=d})};R[z].addTableColumn=R[z].vc;R[z].Ec=function(a,b){return this.gf(a,function(a){delete a.w()[b]})};R[z].dropTableColumn=R[z].Ec;R[z].Yc=function(a,b,c){return this.gf(a,function(a){a.w()[c]=a.w()[b];delete a.w()[b]})};R[z].renameTableColumn=R[z].Yc;
R[z].mj=function(a){var b=[];return new M(function(c,d){var g;try{g=this.La[nb](a)[tb]()}catch(h){d(h);return}Ba(g,J(function(){var a=g[Xa];if(a){if(this.ed){var d=Id(a[x]).lc(),h;for(h in d)b[v](d[h])}else b[v](a[x]);a[Sa]()}else c(b)},this));ua(g,d)},this)};R[z].yb=function(a){var b={};sc(a,J(function(a,d){b[d]=Le(a)},this));return cd(b)};R[z].createRow=R[z].yb;R[z].Nc=G("Ma");R[z].getVersion=R[z].Nc;
pa(R[z],function(){for(var a=this.j[La],b=[],c=0;c<a[y];++c){var d=a[mb](c);b[v](this.gc(d))}return Tc(b)[A](function(b){var c={};b[n](function(b,d){c[a[mb](d)]=b});return c})});pa(R[z],R[z].dump);R[z].gc=function(a){return this.mj(a)[A](function(a){return a.map(function(a){return a[x]})})};
function Me(a,b){this.O=a;this.Ib=b}H=Me[z];H.get=function(a){if(0==a[y])return this.ue();a=a.map(function(a){return new M(function(c,d){var g;try{g=this.O.get(a)}catch(h){d(h);return}ua(g,d);Ba(g,J(function(a){c(this.Ib(a[ub][Xa]))},this))},this)},this);return Tc(a)};H.ue=function(){return new M(function(a,b){var c=[],d;try{d=this.O[tb]()}catch(g){b(g);return}ua(d,b);Ba(d,J(function(){var b=d[Xa];b?(c[v](this.Ib(b[x])),b[Sa]()):a(c)},this))},this)};
H.Rb=function(a){return new M(function(b,c){var d;try{d=a()}catch(g){c(g);return}Ba(d,b);ua(d,c)},this)};H.put=function(a){if(0==a[y])return Pc();a=a.map(function(a){return this.Rb(J(function(){return this.O.put(a.Ea())},this))},this);return Tc(a)};
ja(H,function(a){return new M(function(b,c){var d=this.O.count();Ba(d,J(function(d){if(0==a[y]||d[ub][Xa]==a[y])return this.Rb(J(function(){return this.O[Pa]()},this))[A](b,c);d=a.map(function(a){return this.Rb(J(function(){return this.O[qb](a)},this))},this);Tc(d)[A](b,c)},this));ua(d,c)},this)});
function Ne(a,b,c,d,g){hd[D](this,c,d);this.m=a;this.La=b;this.ed=g;this.La.oncomplete=J(this.ca[vb],this.ca);this.La.onabort=J(this.ca[jb],this.ca)}K(Ne,hd);Ne[z].Z=function(a,b,c){return this.ed?(c=null!=c?c:0,a=this.La[nb](a),new Jd(a,b,0==c?Tb(Kd,this.m):Ld)):new Me(this.La[nb](a),b)};
function Oe(a,b){this.m=a;this.A=b;this.fd=b.xg().gi||!1}H=Oe[z];
H.Aa=function(a){var b=aa.indexedDB||aa.mozIndexedDB||aa.webkitIndexedDB||aa.msIndexedDB;if(null==b)throw new P("NotSupportedError","IndexedDB not supported by platform.");var c=a||function(){return Pc()};return new M(function(a,g){var h;try{h=b.open(this.A[rb](),this.A[Fa]())}catch(l){g(l);return}ua(h,g);h.onupgradeneeded=J(function(a){this.Yj(c,a)[A](Bb(),g)},this);Ba(h,J(function(b){this.j=b[ub][Xa];this.$e()[A](J(function(b){ad=b+1;a(this.j)},this))},this))},this)};
H.Yj=function(a,b){var c=b[ub][Xa],d=b[ub][fb],g=new R(b.oldVersion,c,d,this.fd);this.nk(c,d);this.$h(c,d);return a(g)};H.nk=function(a){for(var b=[],c=0;c<a[La][y];++c){var d=a[La][mb](c);-1!=d[ob](".")&&b[v](d)}b[n](function(b){try{a.deleteObjectStore(b)}catch(c){}})};H.$h=function(a,b){this.A.gb()[n](Tb(this.Xh,a,b),this)};H.Xh=function(a,b,c){a[La][u](c[k]())||a.createObjectStore(c[k](),{keyPath:"id"});c.Sb()&&(c.Ga()[n](function(c){this.Cc(a,b,c.l(),"btree")},this),this.Cc(a,b,c.Kb(),"rowid"))};
H.Cc=function(a,b,c,d){a[La][u](c)||(a.createObjectStore(c,{keyPath:"id"}),a=b[nb](c),(this.fd?new Jd(a,bd,Ld):new Me(a,bd)).put([new fd(new ed(d))]))};H.Hb=function(a,b){var c=b.da().c().map(function(a){return a[k]()});b.Yi()[n](function(a){c[v](a)});var d=this.j[fb](c,0==a?"readonly":"readwrite");return new Ne(this.m,d,b,a,this.fd)};
H.$e=function(a){function b(){if(0==c[y])return Pc();var a=c[Ha]();return l(a)[A](b)}var c=this.A.gb().map(function(a){return a[k]()}),d=this.j,g=0,h=J(function(a){return this.fd?(a=Id(a[x]),vc(a.lc())[kb](function(a,b){return ea.max(a,b)},0)):a.key},this),l=J(function(b){return new M(function(c,l){var Be;try{Be=(a||d[fb]([b]))[nb](b)[tb](null,"prev")}catch(ch){l(ch);return}Ba(Be,function(a){(a=a[ub][Xa])&&(g=ea.max(g,h(a)));c(g)});ua(Be,function(){c(g)})},this)},this);return new M(function(a){b()[A](function(){a(g)})})};
ra(H,function(){this.j[cb]()});H.Lc=function(){throw new P("SyntaxError","IndexedDB tables needs to be acquired from transactions");};ya(H,Bb());H.Uc=Bb();



function Pe(a,b,c){hd[D](this,c,b);this.O=a;0==b&&this.ca[vb]()}K(Pe,hd);Pe[z].Z=function(a){return this.O.Lc(a)};Pe[z].U=function(){Pe.eb.U[D](this);this.ca[vb]();return this.ca.ga};
function Qe(a){this.A=a;this.I=new N}H=Qe[z];H.Aa=function(){this.A.gb()[n](this.Bj,this);return Pc()};H.Lc=function(a){var b=this.I.get(a,null);if(null===b)throw new P("DataError","Table "+a+" does not exist.");return b};H.Hb=function(a,b){return new Pe(this,a,b)};H.Df=function(a){if(!this.I.s(a)){var b=new Je;this.I.set(a,b);return b}return null};H.Bj=function(a){this.Df(a[k]());a.Sb()&&(a.Ga()[n](function(a){this.Cc(a.l(),"btree")},this),this.Cc(a.Kb(),"rowid"))};
H.Cc=function(a,b){var c=this.Df(a);null===c||c.put([new fd(new ed(b))])};ra(H,Bb());ya(H,Bb());H.Uc=Bb();
function Re(a){Qe[D](this,a);this.Md=null}K(Re,Qe);ya(Re[z],function(a){null===this.Md&&(this.Md=a)});Re[z].Uc=function(a){null===this.Md||this.Md(a)};
function Se(a,b,c){this.La=a;this.B=b;this.Ib=c}Se[z].get=function(a){var b=this.Ib;this.La.Ja("SELECT id, value FROM "+this.B+" "+(0==a[y]?"":"WHERE id IN ("+a[F](",")+")"),[],function(a){for(var d=a[hb][y],g=e(d),h=0;h<d;++h)g[h]=b({id:a[hb][mb](h).id,value:JSON.parse(a[hb][mb](h)[x])});return g});return this.La.U()};
Se[z].put=function(a){if(0==a[y])return Pc();var b="INSERT OR REPLACE INTO "+this.B+"(id, value) VALUES (?, ?)";a[n](function(a){this.La.Ja(b,[a.id(),JSON.stringify(a.w())])},this);return Pc()};ja(Se[z],function(a){this.La.Ja("DELETE FROM "+this.B+" "+(0==a[y]?"":"WHERE id IN ("+a[F](",")+")"),[]);return Pc()});
function Te(a,b,c){hd[D](this,b,c);this.j=a;this.I=new N;this.me=[]}K(Te,hd);Te[z].Z=function(a,b){var c=this.I.get(a,null);null===c&&(c=new Se(this,a,b),this.I.set(a,c));return c};Te[z].Ja=function(a,b,c){this.me[v]({Ek:a,$j:b,transform:c})};
Te[z].U=function(){Te.eb.U[D](this);var a,b,c=this.ca[jb][q](this.ca),d=function(a,b){this.ca[jb](b)}[q](this),g=J(function(c,l){a=l;if(this.me[y]){var p=this.me[Ha]();b=p.transform;c.executeSql(p.Ek,p.$j,g,d)}else p=a,null!=b&&null!=a&&(p=b(a)),this.ca[vb](p)},this);0==this.Tg?this.j.readTransaction(g,c):this.j[fb](g,c);return this.ca.ga};
function S(a,b,c){this.j=c;this.m=a;this.Ma=b}I("lf.backstore.WebSqlRawBackStore",S,void 0);S[z].Cd=G("j");S[z].getRawDBInstance=S[z].Cd;S[z].Dd=function(){throw new P("NotSupportedError","Use the raw instance to create transaction instead.");};S[z].getRawTransaction=S[z].Dd;S[z].od=function(){return new Te(this.j,new Qd(this.m,[]),1)};S[z].Dc=function(a){var b=this.od();b.Ja("DROP TABLE "+a,[]);return b.U()};S[z].dropTable=S[z].Dc;
S[z].gc=function(a){var b=this.od();b.Ja("SELECT id, value FROM "+a,[]);return b.U()[A](function(a){for(var b=a[hb][y],g=e(b),h=0;h<b;++h)g[h]={id:a[hb][mb](h).id,value:JSON.parse(a[hb][mb](h)[x])};return Pc(g)})};S[z].ff=function(a,b){var c=this.od(),d="UPDATE "+a+" SET value=? WHERE id=?";return this.gc(a)[A](function(a){a[n](function(a){a=b(a);c.Ja(d,[JSON.stringify(a[x]),a.id])});return c.U()})};S[z].vc=function(a,b,c){var d=Le(c);return this.ff(a,function(a){a[x][b]=d;return a})};
S[z].addTableColumn=S[z].vc;S[z].Ec=function(a,b){return this.ff(a,function(a){delete a[x][b];return a})};S[z].dropTableColumn=S[z].Ec;S[z].Yc=function(a,b,c){return this.ff(a,function(a){a[x][c]=a[x][b];delete a[x][b];return a})};S[z].renameTableColumn=S[z].Yc;S[z].yb=function(a){var b={},c;for(c in a)b[c]=Le(a[c]);return cd(b)};S[z].createRow=S[z].yb;S[z].Nc=G("Ma");S[z].getVersion=S[z].Nc;
function Ue(a){a.Ja('SELECT tbl_name FROM sqlite_master WHERE type="table"',[],function(a){for(var c=e(a[hb][y]),d=0;d<c[y];++d)c[d]=a[hb][mb](d).tbl_name;return c})}pa(S[z],function(){var a=Uc(),b=this.od();Ue(b);var c={};b.U()[A](J(function(b){b=b[Ea](function(a){return"__lf_ver"!=a&&"__WebKitDatabaseInfoTable__"!=a}).map(function(a){return this.gc(a)[A](function(b){c[a]=b})},this);Tc(b)[A](function(){a[vb](c)})},this));return a.ga});pa(S[z],S[z].dump);
function Ve(a,b,c){this.m=a;this.A=b;this.Ak=c||4194304}H=Ve[z];H.ud=function(){return new Qd(this.m,[])};H.Aa=function(a){if(null==aa.openDatabase)throw new P("NotSupportedError","WebSql not supported by platform.");var b=a||function(){return Pc()};return new M(J(function(a,d){try{var g=aa.openDatabase(this.A[rb](),"",this.A[rb](),this.Ak);if(null!=g)this.j=g,this.Nh(b)[A](a,d);else throw new P("NotSupportedError","Unable to open database.");}catch(h){d(h)}},this))};
H.Nh=function(a){var b=Uc(),c=new Te(this.j,this.ud(),1);c.Ja("CREATE TABLE IF NOT EXISTS __lf_ver(id INTEGER PRIMARY KEY, v INTEGER)",[]);c.Ja("SELECT v FROM __lf_ver WHERE id = 0",[]);c.U()[A](J(function(c){var g=0;c[hb][y]&&(g=c[hb][mb](0).v);g<this.A[Fa]()?this.Se(a,g)[A](b[vb][q](b)):g>this.A[Fa]()?b[jb](new P("DataError","Attempt to open a newer database with old code")):b[vb]()},this));return b.ga};
H.Hb=function(a,b){if(null!=this.j)return new Te(this.j,b,a);throw new P("DataError","Attempt to create transaction from uninitialized DB");};ra(H,Bb());H.Lc=function(){throw new P("SyntaxError","WebSQL tables needs to be acquired from transactions");};H.og=function(){throw new P("NotSupportedError","WebSQL does not support change notification");};ya(H,function(){this.og()});H.Uc=function(){this.og()};
H.Se=function(a,b){var c=Uc();this.ck()[A](J(function(){a(new S(this.m,b,this.j))[A](J(function(){return this.$e()},this))[A](c[vb][q](c))},this),c[jb][q](c));return c.ga};
H.ck=function(){var a=this.A.gb(),b=new Te(this.j,this.ud(),1),c=new Te(this.j,this.ud(),1);b.Ja("INSERT OR REPLACE INTO __lf_ver VALUES (0, ?)",[this.A[Fa]()]);Ue(b);return b.U()[A](function(b){b[Ea](function(a){return-1!=a[ob](".")})[n](function(a){c.Ja("DROP TABLE "+a,[])});var g=b[Ea](function(a){return-1==a[ob](".")});a.map(function(a){return a[k]()})[Ea](function(a){return-1==g[ob](a)})[n](function(a){c.Ja("CREATE TABLE "+a+"(id INTEGER PRIMARY KEY, value TEXT)",[])});return c.U()})};
H.$e=function(){var a=0,b=Uc(),c=J(function(b){var c=new Te(this.j,this.ud(),0);c.Ja("SELECT MAX(id) FROM "+b,[]);return c.U()[A](function(b){b=b[hb][mb](0)[0];a=ea.max(b,a)})},this),d=this.A.gb().map(function(a){return c(a[k]())});Tc(d)[A](function(){b[vb](a)},function(a){b[jb](a)});return b.ga};

function We(){this.g=new N;ba.defineProperty(this,"size",{get:function(){return this.g.na()}})}ma(We[z],function(){this.g[Pa]()});ma(We[z],We[z][Pa]);xa(We[z],function(a){return this.g[m](a)});We[z]["delete"]=We[z][qb];ka(We[z],function(a,b){return this.g[n](a,b)});ka(We[z],We[z][n]);We[z].get=function(a){return this.g.get(a)};We[z].get=We[z].get;We[z].has=function(a){return this.g.s(a)};We[z].has=We[z].has;We[z].set=function(a,b){return this.g.set(a,b)};We[z].set=We[z].set;
var Xe=aa.Map&&aa.Map[z][Oa]&&aa.Map[z][n]?aa.Map:We;function Ye(a){if(a instanceof We)return a.g.c();var b=0,c=e(a[Ya]);a[n](function(a){c[b++]=a});return c};
function Ze(){this.Wb=new O;ba.defineProperty(this,"size",{get:function(){return this.Wb.na()}})}Ze[z].add=function(a){this.Wb.add(a)};Ze[z].add=Ze[z].add;ma(Ze[z],function(){this.Wb[Pa]()});ma(Ze[z],Ze[z][Pa]);xa(Ze[z],function(a){return this.Wb[m](a)});Ze[z]["delete"]=Ze[z][qb];ka(Ze[z],function(a,b){this.Wb.c()[n](a,b)});Ze[z].has=function(a){return this.Wb[u](a)};Ze[z].has=Ze[z].has;var $e=aa.Set&&aa.Set[z][Oa]&&aa.Set[z][n]?aa.Set:Ze;
function af(a){if(a instanceof Ze)return a.Wb.c();var b=0,c=e(a[Ya]);a[n](function(a){c[b++]=a});return c};
function bf(){this.g=new Xe;this.Pg=new Xe}H=bf[z];H.Ed=function(a){var b=this.Pg.get(a);Fb(b)||(b=new $e,this.Pg.set(a,b));return b};H.set=function(a,b){var c=this.Ed(a);b[n](J(function(a){this.g.set(a.id(),a);c.add(a.id())},this))};H.get=function(a){return a.map(J(function(a){return this.g.get(a)||null},this))};
H.Va=function(a,b,c){var d=[],g=ea.min(b,c),h=ea.max(b,c);a=this.Ed(a);if(a[Ya]<h-g)a[n](function(a){a>=g&&a<=h&&(a=this.g.get(a),L(null!=a,"Inconsistent cache"),d[v](a))},this);else for(b=g;b<=h;++b)a.has(b)&&(c=this.g.get(b),L(null!=c,"Inconsistent cache"),d[v](c));return d};ja(H,function(a,b){var c=this.Ed(a);b[n](function(a){this.g[qb](a);c[qb](a)},this)});H.na=function(a){return null!=a?this.Ed(a)[Ya]:this.g[Ya]};
function cf(a,b,c,d){a=b?a.reverse():a;if(null==c&&null==d)return a;c=ea.min(Fb(c)?c:a[y],a[y]);if(0==c)return[];d=ea.min(d||0,a[y]);return a[w](d,d+c)};
function df(a,b,c,d){this.B=a;this.L=b;this.jf=c;if(d){a=511;a*=a*a;if(d[y]>=a)throw new P("TooManyRowsError","B-Tree implementation supports at most "+a+" rows.");d=ef(this,d);this.sa=d=ff(d)}else this[Pa]()}var gf=[];H=df[z];ia(H,G("B"));f(H,function(){return this.sa[r]()});H.add=function(a,b){this.sa=this.sa.ub(a,b)};H.set=function(a,b){this.sa=this.sa.ub(a,b,!0)};ja(H,function(a,b){this.sa=this.sa[m](a,b)});H.get=function(a){return this.sa.get(a)};
H.nd=function(a){return null!=a?this.Va([a])[y]:this.Va()[y]};H.Va=function(a,b,c,d){var g=this.sa.yd().b[0];if(!Fb(g)||0==c)return gf;var h=(c||0)+(d||0),h=0<h&&!b?h:Number.POSITIVE_INFINITY,l=[];(Fb(a)?this.L.Ng(a):[this.L.te()])[n](function(a){for(var b=this.L.Sd(a),b=this.L.He(a)?g:b[0],b=this.sa.Nf(b),c=0;null!=b&&l[y]<h;)0!=b.Va(a,l)?c=0:c++,b=2==c?null:b[$a]()},this);return cf(l,b,c,d)};ma(H,function(){this.sa=hf(this)});H.s=function(a){return this.sa.s(a)};
H.min=function(){return this.Tc(J(this.L.min,this.L))};H.max=function(){return this.Tc(J(this.L.max,this.L))};H.Tc=function(a){var b=this.sa.yd(),c=this.sa.Sf();if(0==b.b[y]&&0==c.b[y])return[null,null];var d=b.b[0],b=b.S[0],g=c.b[c.b[y]-1],c=c.S[c.b[y]-1];return 1==a(d,g)?[d,this.jf?[b]:b]:[g,this.jf?[c]:c]};H.Qc=G("jf");H.Bc=G("L");H.Ne=function(a,b){return null!=a?-1==this.L[Wa](a,b):!1};H.Na=function(a,b){return null!=a?0==this.L[Wa](a,b):!1};
H.Ea=function(){for(var a=[],b=this.sa.yd();b;)a[v](new $c(b.va,[b.b,b.S])),b=b.xa;return a};function jf(a,b,c,d){a=new df(b,a,c);d=kf(d,a);a.sa=d;return a}function mf(a,b){this.va=a;this.X=b;this.lb=0;this.xa=this.vb=this.C=null;this.b=[];this.S=[];this.i=[]}function hf(a){return new mf(ad++,a)}H=mf[z];H.ea=function(){return 0==this.lb};H.eg=function(){return null==this.C};qa(H,G("xa"));
function nf(a){function b(a){return null!=a?a.va[r]():"_"}var c=a.va+"["+a.b[F]("|")+"]",d=a.i.map(function(a){return a.va})[F]("|"),g=a.S[F]("/"),h=b(a.vb)+"{",h=a.ea()?h+g:h+d,h=h+"}"+b(a.C);a.xa&&(a=nf(a.xa),c=c+"  "+a[0],h=h+"  "+a[1]);return[c,h]}f(H,function(){var a="",b=nf(this),a=a+(b[0]+"\n"+b[1]+"\n");this.i[y]&&(a+=this.i[0][r]());return a});H.yd=function(){return this.ea()?this:this.i[0].yd()};H.Sf=function(){return this.ea()?this:this.i[this.i[y]-1].Sf()};
function of(a,b){b&&(b.vb=a);a&&(a.xa=b)}function ef(a,b){for(var c=b[y],d=0,g=hf(a),h=g;0<c;){var l=768<=c?511:257<=c&&511>=c?c:257,p=b[w](d,d+l);g.b=p.map(function(a){return a.key});g.S=p.map(function(a){return a[x]});d+=l;c-=l;0<c&&(l=hf(g.X),of(g,l),g=l)}return h}function pf(a){var b=a[0],c=hf(b.X);c.lb=b.lb+1;c.i=a;for(b=0;b<a[y];++b)a[b].C=c,0<b&&c.b[v](a[b].b[0]);return c}
function ff(a){var b=a,c=[];do c[v](b),b=b.xa;while(b);if(512>=c[y])b=pf(c);else{var d=c[y],g=0,b=hf(a.X);for(b.lb=a.lb+2;0<d;){a=768<=d?511:257<=d&&511>=d?d:257;var h=c[w](g,g+a),l=pf(h);l.C=b;b.i[y]&&(b.b[v](h[0].b[0]),of(b.i[b.i[y]-1],l));b.i[v](l);g+=a;d-=a}}return b}H.get=function(a){var b=this.$c(a);if(this.ea()){var c=gf;this.X.Na(this.b[b],a)&&(c=c[Ka](this.S[b]));return c}b=this.X.Na(this.b[b],a)?b+1:b;return this.i[b].get(a)};
H.s=function(a){var b=this.$c(a);return this.X.Na(this.b[b],a)?!0:this.ea()?!1:this.i[b].s(a)};ja(H,function(a,b){this.Gf(a,-1,b);if(this.eg()){var c=this;1==this.i[y]&&(c=this.i[0],c.C=null);return c}return this});function qf(a){return a.ea()?a.b[0]:qf(a.i[0])}H.qd=function(){this.b=[];for(var a=1;a<this.i[y];++a)this.b[v](qf(this.i[a]))};
H.Gf=function(a,b,c){var d=this.$c(a);if(!this.ea()){var g=this.X.Na(this.b[d],a)?d+1:d;if(this.i[g].Gf(a,g,c))this.qd();else return!1}else if(!this.X.Na(this.b[d],a))return!1;if(this.b[y]>d&&this.X.Na(this.b[d],a)){if(Fb(c)&&!this.X.Qc()&&this.ea()&&(a=this.S[d],c=nc(a,oc,!1,c),0<=c&&hc(a,c),this.S[d][y]))return!1;this.b[E](d,1);this.ea()&&this.S[E](d,1)}256>this.b[y]&&!this.eg()&&(this.Fk()||this.Rj(b));return!0};
H.Fk=function(){var a=null,b,c,d;if(this.xa&&256<this.xa.b[y])a=this.xa,c=b=0,d=this.b[y]+1;else if(this.vb&&256<this.vb.b[y])a=this.vb,b=this.vb.b[y]-1,c=this.ea()?b:b+1,d=0;else return!1;this.b[E](d,0,a.b[b]);a.b[E](b,1);b=this.ea()?this.S:this.i;var g=null;this.ea()?g=a.S:(g=a.i,g[c].C=this);b[E](d,0,g[c]);g[E](c,1);a.ea()||(a.qd(),this.qd());return!0};
H.Rj=function(a){var b,c,d;this.xa&&511>this.xa.b[y]?(b=this.xa,d=c=0):this.vb&&(b=this.vb,c=b.b[y],d=b.ea()?b.S[y]:b.i[y]);c=[c,0][Ka](this.b);e[z][E][ib](b.b,c);c=null;this.ea()?c=this.S:(c=this.i,c[n](function(a){a.C=b}));c=[d,0][Ka](c);e[z][E][ib](b.ea()?b.S:b.i,c);of(this.vb,this.xa);b.ea()||b.qd();-1!=a&&(this.C.b[E](a,1),this.C.i[E](a,1))};
H.ub=function(a,b,c){var d=this.$c(a);if(this.ea()){if(this.X.Na(this.b[d],a)){if(c)return this.S[d]=this.X.Qc()?b:[b],this;if(this.X.Qc())throw new P("ConstraintError","Duplicate key not allowed");if(this.S[d])return pc(this.S[d],b),this;this.S[d]=[b]}this.b[E](d,0,a);this.S[E](d,0,this.X.Qc()?b:[b]);return 512==this.b[y]?this.Ck():this}d=this.X.Na(this.b[d],a)?d+1:d;a=this.i[d].ub(a,b,c);a.ea()||1!=a.b[y]||(this.b[E](d,0,a.b[0]),a.i[1].C=this,a.i[0].C=this,this.i[E](d,1,a.i[1]),this.i[E](d,0,a.i[0]));
return 512==this.b[y]?this.Bk():this};H.Ck=function(){var a=hf(this.X),b=hf(this.X);b.lb=1;b.b=[this.b[256]];b.i=[this,a];b.C=this.C;this.C=b;a.b=this.b[E](256);a.S=this.S[E](256);a.C=b;of(a,this.xa);of(this,a);return b};H.Bk=function(){var a=hf(this.X),b=hf(this.X);a.C=this.C;a.lb=this.lb+1;a.b=[this.b[256]];a.i=[this,b];this.b[E](256,1);b.C=a;b.lb=this.lb;b.b=this.b[E](256);b.i=this.i[E](257);b.i[n](function(a){a.C=b});this.C=a;of(b,this.xa);of(this,b);return a};
H.$c=function(a){for(var b=0,c=this.b[y];b<c;){var d=b+c>>1;this.X.Ne(this.b[d],a)?b=d+1:c=d}return b};H.Nf=function(a){if(!this.ea()){var b=this.$c(a);this.X.Na(this.b[b],a)&&b++;return this.i[b].Nf(a)}return this};
H.Va=function(a,b){var c=-1,d=this.b[y]-1,g=this.X.Bc(),h=J(function(b){for(;b<this.b[y];++b){var h=g.mc(this.b[b],a);if(-1!=c){if(!h){d=b-1;break}}else h&&(c=b)}},this);g.mc(this.b[0],a)?c=0:h(1);if(-1==c)return 0;g.mc(this.b[d],a)||h(c);return d==this.b[y]-1?this.sf(b,this.S[w](c)):d>=c?this.sf(b,this.S[w](c,d+1)):0};H.sf=function(a,b){var c=this.X.Qc()?b:rc(b);a[v][ib](a,c);return c[y]};
function kf(a,b){for(var c=a.map(function(a){var c=new mf(a.id(),b);c.b=a.w()[0];c.S=a.w()[1];return c}),d=0;d<c[y]-1;++d)of(c[d],c[d+1]);return 1<c[y]?ff(c[0]):c[0]};
function rf(a){if(1==a.h[y])return new sf(a.h[0].mb);a=a.h.map(function(a){return a.mb});return new tf(a)}function sf(a){this.kd=0==a?uf:vf;this.Oe=0==a?function(a){return null!=a?a.reverse():null}:function(a){return a||null};this.sg=0==a?wf:xf}K(sf,Md);function vf(a,b){return a>b?1:a<b?-1:0}function uf(a,b){return vf(b,a)}function xf(a,b){return Zd(a,b)}function wf(a,b){return Zd(b,a)}H=sf[z];
H.ne=function(a,b){var c=this.Oe(b),d=[null===c.f,null===c.u];if(!d[0]){var g=this.kd(a,c.f);d[0]=c.ba?1==g:-1!=g}d[1]||(g=this.kd(a,c.u),d[1]=c.fa?-1==g:1!=g);return d};H.compare=function(a,b){return this.kd(a,b)};H.min=function(a,b){return a<b?1:a==b?0:-1};H.max=function(a,b){return a>b?1:a==b?0:-1};H.mc=function(a,b){var c=this.ne(a,b);return c[0]&&c[1]};H.te=function(){return Yd()};H.rg=function(a,b){return this.sg(a,b)};
H.Ng=function(a){return a[Ea](function(a){return null!==a})[xb](J(function(a,c){return this.sg(a,c)},this))};H.He=function(a){return Jb(this.Oe(a).f)};H.Sd=function(a){a=this.Oe(a);return[a.f,a.u]};f(H,function(){return this.kd==uf?"SimpleComparator_DESC":"SimpleComparator_ASC"});function tf(a){this.ya=a.map(function(a){return new sf(a)})}K(tf,Md);H=tf[z];H.se=function(a,b,c){for(var d=0,g=0;g<this.ya[y]&&0==d;++g)d=c(this.ya[g],a[g],b[g]);return d};
H.compare=function(a,b){return this.se(a,b,function(a,b,g){return a[Wa](b,g)})};H.min=function(a,b){return this.se(a,b,function(a,b,g){return a.min(b,g)})};H.max=function(a,b){return this.se(a,b,function(a,b,g){return a.max(b,g)})};H.ne=function(a,b){for(var c=[!0,!0],d=0;d<this.ya[y]&&(c[0]||c[1]);++d){var g=this.ya[d].ne(a[d],b[d]);c[0]=c[0]&&g[0];c[1]=c[1]&&g[1]}return c};H.mc=function(a,b){for(var c=!0,d=0;d<this.ya[y]&&c;++d)c=this.ya[d].mc(a[d],b[d]);return c};H.te=function(){return this.ya.map(function(a){return a.te()})};
H.Ng=function(a){var b=a[Ea](function(a){return a[yb](Kb)});a=e(this.ya[y]);for(var c=0;c<a[y];c++)a[c]=b.map(function(a){return a[c]});a[n](function(a,b){a[xb](J(function(a,c){return this.ya[b].rg(a,c)},this))},this);b=e(b[y]);for(c=0;c<b[y];c++)b[c]=a.map(function(a){return a[c]});return b[xb](J(function(a,b){for(var c=0,l=0;l<this.ya[y]&&0==c;++l)c=this.ya[l].rg(a[l],b[l]);return c},this))};H.He=function(a){return this.ya[0].He(a[0])};
H.Sd=function(a){var b=a.map(function(a,b){return this.ya[b].Sd(a)[0]},this);a=a.map(function(a,b){return this.ya[b].Sd(a)[1]},this);return[b,a]};
function yf(a){this.wa=a;this.Za=new O}H=yf[z];ia(H,function(){return this.wa[k]()});H.add=function(a,b){null===a?this.Za.add(b):this.wa.add(a,b)};H.set=function(a,b){null===a?(this.Za[Pa](),this.Za.add(b)):this.wa.set(a,b)};ja(H,function(a,b){null===a?b?this.Za[m](b):this.Za[Pa]():this.wa[m](a,b)});H.get=function(a){return null===a?this.Za.c():this.wa.get(a)};H.nd=function(a){return this.wa.nd(a)};H.Va=function(a,b,c,d){b=this.wa.Va(a,b,c,d);return null!=a?b:b[Ka](this.Za.c())};
ma(H,function(){this.Za[Pa]();this.wa[Pa]()});H.s=function(a){return null===a?!this.Za.Ha():this.wa.s(a)};H.min=function(){return this.wa.min()};H.max=function(){return this.wa.max()};H.Ea=function(){return[new $c(-2,this.Za.c())][Ka](this.wa.Ea())};H.Bc=function(){return this.wa.Bc()};
function zf(a){this.B=a;this.wb=new $e;this.L=new sf(1)}H=zf[z];ia(H,G("B"));H.add=function(a){if("number"!=typeof a)throw new P("DataError","Row id must be numbers");this.wb.add(a)};H.set=function(a,b){this.add(a,b)};ja(H,function(a){this.wb[qb](a)});H.get=function(a){return this.s(a)?[a]:[]};H.min=function(){return this.Tc(J(this.L.min,this.L))};H.max=function(){return this.Tc(J(this.L.max,this.L))};
H.Tc=function(a){if(0==this.wb[Ya])return[null,null];var b=af(this.wb)[kb](J(function(b,d){return null===b||1==a(d,b)?d:b},this),null);return[b,[b]]};H.nd=function(){return this.wb[Ya]};H.Va=function(a,b,c,d){var g=a||[Yd()];a=af(this.wb)[Ea](function(a){return g[wb](function(b){return this.L.mc(a,b)},this)},this);return cf(a,b,c,d)};ma(H,function(){this.wb[Pa]()});H.s=function(a){return this.wb.has(a)};H.Ea=function(){return[new $c(0,af(this.wb))]};H.Bc=G("L");
function Af(a,b){var c=new zf(a);b[0].w()[n](function(a){c.add(a,a)});return c};
function Bf(a){this.m=a;this.xb=a.o(vd);this.N=a.o(xd);this.pa=a.o(wd)}H=Bf[z];H.Aa=function(a){var b=a.gb(),c=J(function(){if(0==b[y])return Pc();var a=b[Ha]();return(a.Sb()?this.yi(a):this.zi(a))[A](c)},this);return c()};H.zi=function(a){var b=new Qd(this.m,[a]);return this.xb.Hb(0,b).Z(a[k](),J(a.fc,a)).get([])[A](J(function(b){this.pa.set(a[k](),b);this.jk(a,b)},this))};H.jk=function(a,b){var c=this.N.lj(a[k]());b[n](function(a){c[n](function(b){var c=a.Rc(b[k]());b.add(c,a.id())})})};
H.yi=function(a){var b=new Qd(this.m,[a]),c=this.xb.Hb(0,b),b=c.Z(a[k](),a.fc).get([])[A](J(function(b){this.pa.set(a[k](),b)},this)),d=a.Ga().map(function(a){return this.kk(a,c)},this)[Ka](this.lk(a,c));return Tc(d[Ka](b))};
H.kk=function(a,b){var c=b.Z(a.l(),bd,1),d=rf(a);return c.get([])[A](J(function(b){L("btree"==b[0].w().type);if(1<b[y]){if(a.Xf()){var c=jf[q](void 0,d,a.l(),a.Pc),l=b[w](1),p=-1;for(b=0;b<l[y];++b)if(-2==l[b].id()){p=b;break}if(-1==p)throw new P("DataError","Data corruption detected");b=l[p].w();l=l[w](0);l[E](p,1);c=c(l);c=new yf(c);c.Za[lb](b)}else c=jf(d,a.l(),a.Pc,b[w](1));this.N.set(c)}},this))};
H.lk=function(a,b){return b.Z(a.Kb(),bd,1).get([])[A](J(function(b){L("rowid"==b[0].w().type);1<b[y]&&(b=Af(a.Kb(),b[w](1)),this.N.set(b))},this))};


function Cf(){this.O=new N}Cf[z].Aa=function(a){a.gb()[n](function(a){var c=a.Kb();if(null===this.get(c)){var d=new zf(c);this.O.set(c,d)}a.Ga()[n](function(a){this.O.set(a.l(),Df(a))},this)},this);return Pc()};function Df(a){var b=rf(a),b=new df(a.l(),b,a.Pc);return a.Xf()?new yf(b):b}Cf[z].get=function(a){return this.O.get(a,null)};Cf[z].set=function(a){return this.O.set(a[k](),a)};Cf[z].lj=function(a){var b=[],c=a+".";this.O.H()[n](function(a){0==a[ob](c)&&b[v](this.O.get(a))},this);return b};
function Ef(a){this.$a=[];Fb(a)&&this.add(a)}H=Ef[z];f(H,function(){return this.$a.map(function(a){return a[r]()})[F](",")});H.s=function(a){return this.$a[wb](function(b){return b[u](a)})};H.c=G("$a");
H.add=function(a){if(0!=a[y])if(a=this.$a[Ka](a),1==a[y])this.$a=a;else{a[xb](Zd);for(var b=[],c=a[0],d=1;d<a[y];++d)if(c.tg(a[d])){var g=a[d],h=Yd();if(null!==c.f&&null!==g.f){var l=Xd(c.f,g.f,!0);1!=l?(h.f=c.f,h.ba=0!=l?c.ba:c.ba&&g.ba):(h.f=g.f,h.ba=g.ba)}null!==c.u&&null!==g.u&&(l=Xd(c.u,g.u,!1),-1!=l?(h.u=c.u,h.fa=0!=l?c.fa:c.fa&&g.fa):(h.u=g.u,h.fa=g.fa));c=h}else b[v](c),c=a[d];b[v](c);this.$a=b}};
H.Fc=function(a){return this.$a[y]==a.$a[y]?0==this.$a[y]||this.$a[yb](function(b,c){return b.Fc(a.$a[c])}):!1};function Ff(a,b){var c=[];a.c().map(function(a){return b.c().map(function(b){var c;if(a.tg(b)){c=Yd();var l=Xd(a.f,b.f,!0),l=0==l?a.ba?a:b:-1!=l?a:b;c.f=l.f;c.ba=l.ba;null===a.u||null===b.u?b=null===a.u?b:a:(l=Xd(a.u,b.u,!1),b=0==l?a.fa?a:b:-1==l?a:b);c.u=b.u;c.fa=b.fa}else c=null;return c})})[n](function(a){c=c[Ka](a)});return new Ef(c[Ea](function(a){return null!==a}))};
function Gf(a,b){var c=[],d=null,g=null;a.rc(function(a){var l=b(a);null==a[Ga]()?g=l:d.ia(l);var p=a[Ga]();null!==p&&p.ua()==d.ua()&&(p=c[ob](d),-1!=p&&c[E](p,1));1<a.ua()&&c[v](l);d=a.bg()?c[c[y]-1]:l});return g}function Hf(a){return If(a,function(a){return a.bg()})}function Jf(a){var b=a[Ga](),c=0;null!==b&&(c=b.Y()[ob](a),b[sb](a));var d=a.Y()[w]();d[n](function(d,h){a[sb](d);null===b||b.uc(d,c+h)});return{parent:b,children:d}}
function Kf(a,b){a.Y()[w]()[n](function(c){a[sb](c);b.ia(c)});a.ia(b)}function Lf(a){L(1==a.ua());var b=a.qb(0);L(1==b.ua());Jf(a);Kf(b,a);return b}function Mf(a,b,c){L(1==a.ua());var d=a.qb(0);L(1<d.ua());var g=d.Y()[w]();if(!g[wb](function(a){return b(a)}))return a;Jf(a);g[n](function(g,l){if(b(g)){var p=c(a);d.Ud(l);p.ia(g);d.uc(p,l)}});return d}function Nf(a,b,c,d){var g=a[Ga]();null!==g&&(a=g.Y()[ob](a),g.Ud(a),g.uc(c,a));b.Y()[w]()[n](function(a){b[sb](a);d.ia(a)});return c}
function If(a,b,c){function d(a){b(a)&&g[v](a);null!=c&&c(a)||a.Y()[n](d)}var g=[];d(a);return g}function Of(a,b){var c=b||function(a){return a[r]()+"\n"},d="";a.rc(function(a){for(var b=0;b<a.Wi();b++)d+="-";d+=c(a)});return d};

function Pf(a){se[D](this);this.Pb=a;this.Xa=!1}K(Pf,se);H=Pf[z];H.Gb=function(){return Gf(this,function(a){if(a instanceof Pf){var b=new Pf(a.Pb);b.Xa=a.Xa;b.bf(a.ka());return b}return a.Gb()}[q](this))};H.zb=function(a){var b=a||[];this.rc(function(a){a!=this&&a.zb(b)}[q](this));return(new O(b)).c()};H.Xd=function(a){this.Xa!=a&&(this.Xa=a,this.Pb="and"==this.Pb?"or":"and",this.Y()[n](function(b){return b.Xd(a)}))};H.eval=function(a){var b=this.Y().map(function(b){return b.eval(a)});return this.Qh(b)};
H.Qh=function(a){return"and"==this.Pb?de(a):ee(a)};f(H,function(){return"combined_pred_"+this.Pb[r]()});function Qf(a,b){return a===b?0!==a||1/a===1/b:a!==a&&b!==b};function Rf(){this[Pa]()}var Sf=ba[z][Ua],Tf=ba[z][bb];H=Rf[z];H.set=function(a,b){this.cd(a);var c=!this.Oc(a);this.g[a]=b;if("__proto__"==a||!Uf&&!Sf[D](this.g,a)){delete this.g[a];var d=bc(this.Db,a);if(c=0>d)d=this.Db[y];this.Db[d]=a;this.Vd[d]=b}c&&this.aa++};H.get=function(a,b){this.cd(a);if(this.Oc(a))return this.g[a];var c=bc(this.Db,a);return 0<=c?this.Vd[c]:b};
ja(H,function(a){this.cd(a);if(this.Oc(a))return this.aa--,delete this.g[a],!0;a=bc(this.Db,a);return 0<=a?(this.aa--,hc(this.Db,a),hc(this.Vd,a),!0):!1});H.addAll=function(a){cc(a.H(),function(b){this.set(b,a.get(b))},this)};H.Ha=function(){return!this.aa};H.na=G("aa");H.s=function(a){this.cd(a);return this.Oc(a)||0<=bc(this.Db,a)};H.md=function(a){return tc(this.g,function(b,c){return this.Oc(c)&&Qf(b,a)},this)||0<=bc(this.Vd,a)};
H.H=function(){var a;if(Vf)a=jc(ba.keys(this.g));else{a=[];for(var b in this.g)Tf[D](this.g,b)&&a[v](b)}kc(a,this.Db);return a};H.c=function(){for(var a=[],b=this.H(),c=0;c<b[y];c++)a[v](this.get(b[c]));return a};H.getEntries=function(){for(var a=[],b=this.H(),c=0;c<b[y];c++){var d=b[c];a[v]([d,this.get(d)])}return a};ma(H,function(){this.g=Uf?ba[Va](null):{};this.Db=[];this.Vd=[];this.aa=0});sa(H,function(){var a=new Rf;a[lb](this);return a});
H.Oc=function(a){return"__proto__"==a?!1:Uf?a in this.g:Tf[D](this.g,a)};H.cd=function(a){L(Mb(a),"key must be a string.")};var Uf=!!ba[Va],Vf=!!ba.keys;function Wf(){this[Pa]()}H=Wf[z];H.aa=0;ma(H,function(){this.aa=0;this.g=new Rf});sa(H,function(){var a=new Wf;a.ah(this);return a});H.add=function(a,b){var c=this.g.get(a);c||this.g.set(a,c=[]);c[v](b);this.aa++};H.ah=function(a){cc(a.getEntries(),function(a){this.add(a[0],a[1])},this)};H.get=function(a){return(a=this.g.get(a))?jc(a):[]};ja(H,function(a,b){var c=this.g.get(a);if(!c)return!1;var d=ic(c,function(a){return Qf(b,a)});d&&(this.aa--,0==c[y]&&this.g[m](a));return d});H.Ha=function(){return!this.aa};
H.na=G("aa");H.s=function(a){return this.g.s(a)};H.md=function(a){return fc(this.g.c(),function(b){return fc(b,function(b){return Qf(b,a)})})};H.H=function(){return this.g.H()};H.c=function(){return rc(this.g.c())};H.getEntries=function(){for(var a=this.H(),b=[],c=0;c<a[y];c++)for(var d=a[c],g=this.get(d),h=0;h<g[y];h++)b[v]([d,g[h]]);return b};
function Xf(a,b,c){se[D](this);this.Oa=a;this.bb=b;this.V=c;this.pd=ke.we().ve(this.Oa.$(),this.V)}K(Xf,se);H=Xf[z];H.Gb=function(){var a=new Xf(this.Oa,this.bb,this.V);a.bf(this.ka());return a};H.zb=function(a){return null!=a?(a[v](this.Oa),a[v](this.bb),a):[this.Oa,this.bb]};H.eval=function(a){var b=a[C][Ea](function(a){var b=a.M(this.Oa);a=a.M(this.bb);return this.pd(b,a)},this);return new $d(b,a.W())};f(H,function(){return"join_pred("+this.Oa.l()+", "+this.bb.l()+")"});
H.tf=function(a){return-1!=a.W()[ob](this.Oa.Z().za())};H.jh=function(a){return-1!=a.W()[ob](this.bb.Z().za())};H.di=function(a,b){var c=null,d=null;this.tf(a)?(this.wf(a,b),c=a,d=b):(this.wf(b,a),c=b,d=a);return[c,d]};H.wf=function(a,b){L(this.tf(a),"Mismatch between join predicate left operand and right relation.");L(this.jh(b),"Mismatch between join predicate right operand and right relation.")};H.ki=function(a,b){var c=this.di(a,b),d=c[0],c=c[1];return"eq"==this.V?this.li(d,c):this.mi(d,c)};
H.mi=function(a,b){for(var c=[],d=a.W(),g=b.W(),h=0;h<a[C][y];h++)for(var l=0;l<b[C][y];l++)if(this.pd(a[C][h].M(this.Oa),b[C][l].M(this.bb))){var p=ie(a[C][h],d,b[C][l],g);c[v](p)}d=a.W()[Ka](b.W());return new $d(c,d)};
H.li=function(a,b){var c=a,d=b,g=this.Oa,h=this.bb;a[C][y]>b[C][y]&&(c=b,d=a,g=this.bb,h=this.Oa);var l=new Wf,p=[];c[C][n](function(a){var b=String(a.M(g));l.add(b,a)});var B=c.W(),Ra=d.W();d[C][n](function(a){var b=String(a.M(h));l.s(b)&&l.get(b)[n](function(b){b=ie(a,Ra,b,B);p[v](b)})});c=a.W()[Ka](b.W());return new $d(p,c)};
function Yf(a,b,c){return null===b?new ue(a,b,c):Fb(b.l)?new Xf(a,b,c):new ue(a,b,c)};
var Zf={};I("lf.schema.DataStoreType",Zf,void 0);Zf.INDEXED_DB=0;Zf.MEMORY=1;Zf.LOCAL_STORAGE=2;Zf.FIREBASE=3;Zf.WEB_SQL=4;Zf.OBSERVABLE_STORE=5;function $f(a,b,c,d){this.ef=a;za(this,b);this.Pc=c;this.h=d}$f[z].l=function(){return this.ef+"."+this[rb]};$f[z].Xf=function(){return this.h[wb](function(a){return a.cb.nc()})};function ag(a,b,c,d){this.B=a;this.qa=c;this.G=b;this.Od=d;this.ib=null}I("lf.schema.Table",ag,void 0);ia(ag[z],G("B"));ag[z].Ua=G("ib");ag[z].za=function(){return this.ib||this.B};
ag[z].xc=function(a){var b=new this.constructor(this.B);b.ib=a;return b};ag[z].as=ag[z].xc;ag[z].createRow=ag[z].yb;ag[z].deserializeRow=ag[z].fc;ag[z].Ga=G("qa");ag[z].zb=G("G");ag[z].getConstraint=ag[z].kc;ag[z].Sb=G("Od");ag[z].Kb=function(){return this.B+".#"};
function T(a,b){ta(this,a);this.$b=b;this.ib=null}H=T[z];ia(H,function(){return this.$b+"("+this[gb][k]()+")"});H.l=function(){return this.$b+"("+this[gb].l()+")"};H.Z=function(){return this[gb].Z()};f(H,function(){return this.l()});H.$=function(){return this[gb].$()};H.Ua=G("ib");H.Ga=function(){return[]};H.nc=Db(!1);H.xc=function(a){this.ib=a;return this};T[z].as=T[z].xc;T[z].Mf=function(){for(var a=[this],b=this;b instanceof T;)a[v](b[gb]),b=b[gb];return a};
function bg(a){this.ib=a||null;this.F=new ag("#UnknownTable",[],[],!1)}H=bg[z];ia(H,Db("*"));H.l=function(){return this[k]()};f(H,function(){return this.l()});H.Z=G("F");H.$=Db(4);H.Ua=G("ib");H.Ga=function(){return[]};H.nc=Db(!1);
I("lf.fn.avg",function(a){return new T(a,"AVG")},void 0);I("lf.fn.count",function(a){return new T(a||new bg,"COUNT")},void 0);function cg(a){return new T(a,"DISTINCT")}I("lf.fn.distinct",cg,void 0);I("lf.fn.max",function(a){return new T(a,"MAX")},void 0);I("lf.fn.min",function(a){return new T(a,"MIN")},void 0);I("lf.fn.stddev",function(a){return new T(a,"STDDEV")},void 0);I("lf.fn.sum",function(a){return new T(a,"SUM")},void 0);I("lf.fn.geomean",function(a){return new T(a,"GEOMEAN")},void 0);
function U(a,b){qe[D](this,"","");this.vi=b;this.pg=a}K(U,qe);H=U[z];H.da=Db(null);ha(H,function(a,b){switch(this.vi){case 1:return this.pi(a,b);case 0:return this.oi(a,b);default:return this.si(a,b)}});f(H,Db("dummy_node"));H.ad=function(){return this[r]()};H.uf=function(a){L(-1==this.pg||a[y]==this.pg)};H.si=function(a,b){return new M(J(function(c){c(this.ja(a,[],b))},this))};H.pi=function(a,b){return this.qb(0)[Ia](a,b)[A](J(function(c){this.uf(c);return this.ja(a,c,b)},this))};
H.oi=function(a,b){var c=this.Y().map(function(c){return c[Ia](a,b)});return Tc(c)[A](J(function(c){var g=[];c[n](function(a){for(var b=0;b<a[y];++b)g[v](a[b])});this.uf(g);return this.ja(a,g,b)},this))};
function dg(a){U[D](this,-1,1);this.qf=a}K(dg,U);f(dg[z],function(){return"aggregation("+this.qf.map(function(a){return a.l()})[r]()+")"});dg[z].ja=function(a,b){b[n](function(a){(new eg(a,this.qf)).wh()},this);return b};function eg(a,b){this.Ca=a;this.G=b}
eg[z].wh=function(){this.G[n](function(a){a=a.Mf().reverse();for(var b=1;b<a[y];b++){var c=a[b],d=c.Mf()[w](-1)[0],g=this.Zi(c),h=null;switch(c.$b){case "MIN":h=fg(g,d);break;case "MAX":h=gg(g,d);break;case "DISTINCT":h=hg(g,d);break;case "COUNT":h=g[C][y];break;case "SUM":h=ig(g,d);break;case "AVG":0<g[C][y]&&(h=ig(g,d)/g[C][y]);break;case "GEOMEAN":h=jg(g,d);break;default:h=kg(g,d)}this.Ca.vk(c,h)}},this)};eg[z].Zi=function(a){return a[gb]instanceof T?this.Ca.jc(a[gb]):this.Ca};
function fg(a,b){var c=null;a[C][n](function(a){a=a.M(b);if(null===c||a<c)c=a});return c}function gg(a,b){var c=null;a[C][n](function(a){a=a.M(b);if(null===c||a>c)c=a});return c}function ig(a,b){return a[C][kb](function(a,d){return a+d.M(b)},0)}function kg(a,b){var c=a[C].map(function(a){return a.M(b)});return md[ib](null,c)}function jg(a,b){var c=0,d=a[C][kb](function(a,d){var l=d.M(b);return 0!=l?(c++,a+ea.log(l)):a},0);return 0==c?null:ea.pow(ea.E,d/c)}
function hg(a,b){var c=new N;a[C][n](function(a){var g=a.M(b);c.set(g,a)});return new $d(c.c(),a.W())};
function V(){qe[D](this,"","")}K(V,qe);function lg(a,b){V[D](this);oa(this,a);la(this,b)}K(lg,V);function mg(a,b){lg[D](this,a,b)}K(mg,lg);function ng(a){V[D](this);oa(this,a)}K(ng,V);f(ng[z],function(){return"delete("+this[t][k]()+")"});function og(a,b){V[D](this);oa(this,a);this.kf=b}K(og,V);f(og[z],function(){var a=[];this.kf&&(a=this.kf.map(function(a){return a.K[k]()},this));return"update("+this[t][k]()+", ["+a[F](",")+"])"});function pg(a){V[D](this);this.Ba=a}K(pg,V);
f(pg[z],function(){return"select("+this.Ba[r]()+")"});function qg(a){V[D](this);oa(this,a)}K(qg,V);f(qg[z],function(){var a="table_access("+this[t][k]();null===this[t].Ua()||(a+=" as "+this[t].Ua());return a+")"});function rg(){V[D](this)}K(rg,V);f(rg[z],Db("cross_product"));function sg(a,b){V[D](this);this.h=a;this.Lb=b}K(sg,V);f(sg[z],function(){var a="project("+this.h[r]();if(null!==this.Lb)var b=this.Lb.map(function(a){return a.l()})[F](", "),a=a+(", groupBy("+b+")");return a+")"});
function tg(a){V[D](this);this.J=a}K(tg,V);f(tg[z],function(){return"order_by("+ye(this.J)+")"});function ug(a){V[D](this);this.h=a}K(ug,V);f(ug[z],function(){return"aggregation("+this.h[r]()+")"});function vg(a){V[D](this);this.h=a}K(vg,V);f(vg[z],function(){return"group_by("+this.h[r]()+")"});function wg(a){V[D](this);this.oa=a}K(wg,V);f(wg[z],function(){return"limit("+this.oa+")"});function xg(a){V[D](this);this.ma=a}K(xg,V);f(xg[z],function(){return"skip("+this.ma+")"});
function yg(a){V[D](this);this.Ba=a}K(yg,V);f(yg[z],function(){return"join("+this.Ba[r]()+")"});
function zg(){};
function Ag(){}K(Ag,zg);Ag[z].Bb=function(a){this.ha=a;this.Ta(this.ha);return this.ha};Ag[z].Ta=function(a){if(a instanceof pg){L(1==a.ua(),"SelectNode must have exactly one child.");var b=this.yf(a.Ba),b=this.Yh(b);Nf(a,a,b[0],b[1]);a==this.ha&&(this.ha=b[0]);a=b[0]}a.Y()[n](function(a){this.Ta(a)},this)};Ag[z].yf=function(a){if(0==a.ua()||"and"!=a.Pb)return[a];var b=a.Y()[w]().map(function(b){a[sb](b);return this.yf(b)},this);return rc(b)};
Ag[z].Yh=function(a){var b=null,c=null;a.map(function(a,g){var h=new pg(a);0==g?b=h:c.ia(h);c=h},this);return[b,c]};
function Bg(){}K(Bg,zg);Bg[z].Bb=function(a){this.ha=a;this.Ta(this.ha);return this.ha};Bg[z].Ta=function(a){if(a instanceof rg)for(;2<a.ua();){for(var b=new rg,c=0;2>c;c++){var d=a.Ud(0);b.ia(d)}a.uc(b,0)}a.Y()[n](function(a){this.Ta(a)},this)};
function Cg(){U[D](this,2,0)}K(Cg,U);f(Cg[z],Db("cross_product"));Cg[z].ja=function(a,b){for(var c=b[0],d=b[1],g=[],h=c.W(),l=d.W(),p=0;p<c[C][y];p++)for(var B=0;B<d[C][y];B++){var Ra=ie(c[C][p],h,d[C][B],l);g[v](Ra)}c=c.W()[Ka](d.W());return[new $d(g,c)]};

function Dg(a,b){Ce[D](this,a,b);this.Ra=a.o(zd);this.Ab=a.o(Ad)}K(Dg,Ce);wa(Dg[z],Db(2));Dg[z].Re=function(a){0==this.$()?this.Tj(a):this.Zc()};Dg[z].Tj=function(a){this.Rd[n](function(b,c){b instanceof xe&&this.Ab.Wg(b,a[c])},this)};Dg[z].Zc=function(){var a=this.Ab.Ce(this.da().c());0!=a[y]&&(a=new De(this[Ta],a),this.Ra.Vb(a))};
function Eg(){ve[D](this)}K(Eg,ve);sa(Eg[z],function(){var a=new Eg;a.jd(this);a.f=this.f;return a});na(Eg[z],function(a){Eg.eb[q][D](this,a);this.he(a);return this});
function Fg(){ve[D](this)}K(Fg,ve);sa(Fg[z],function(){var a=new Fg;a.jd(this);a.Wa=this.Wa;this[Oa]&&la(a,this[Oa]instanceof je?this[Oa]:this[Oa][w]());a.wc=this.wc;a.ac=this.ac;return a});na(Fg[z],function(a){Fg.eb[q][D](this,a);this.ac&&la(this,this.ac instanceof je?a[this.ac.rb()]:this.ac.map(function(b){return b instanceof je?a[b.rb()]:b}));return this});
function Gg(){ve[D](this)}K(Gg,ve);sa(Gg[z],function(){var a=new Gg;a.jd(this);oa(a,this[t]);a.set=this.set?this.set[w]():this.set;return a});na(Gg[z],function(a){Gg.eb[q][D](this,a);this.set[n](function(b){-1!=b.dd&&va(b,a[b.dd])});this.he(a);return this});
function Hg(a,b){if(null==b)return"NULL";switch(a){case 1:return b?1:0;case 3:case 4:return b;case 0:return"'"+dd(b)+"'";default:return"'"+b[r]()+"'"}}function Ig(a,b){var c=a.wc?"INSERT OR REPLACE":"INSERT",d=a.Wa.zb(),c=c+(" INTO "+a.Wa[k]()+"("),c=c+d.map(function(a){return a[k]()})[F](", "),c=c+") VALUES (";return a[Oa].map(function(a){var h=d.map(function(c){var d=a.w()[c[k]()];return b?null!=d?"#":"NULL":Hg(c.$(),d)});return c+h[F](", ")+");"})[F]("\n")}
function Jg(a){switch(a){case "between":return"BETWEEN";case "eq":return"=";case "gte":return">=";case "gt":return">";case "in":return"IN";case "lte":return"<=";case "lt":return"<";case "match":return"LIKE";case "neq":return"<>";default:return"UNKNOWN"}}function Kg(a,b,c,d){return a instanceof je?"?"+a.rb()[r]():d?null!=a?"#":"NULL":"match"==b?"'"+a[r]()+"'":"in"==b?"("+a.map(function(a){return Hg(c,a)})[F](", ")+")":"between"==b?Hg(c,a[0])+" AND "+Hg(c,a[1]):Hg(c,a)[r]()}
function Lg(a,b){return a.Y().map(function(a){return"("+Mg(a,b)+")"})[F]("and"==a.Pb?" AND ":" OR ")}function Mg(a,b){if(a instanceof ue)return[a.K.l(),Jg(a.V),Kg(a[x],a.V,a.K.$(),b)][F](" ");if(a instanceof Pf)return Lg(a,b);if(a instanceof Xf)return[a.Oa.l(),Jg(a.V),a.bb.l()][F](" ");throw new P("NotSupportedError","toSql does not support predicate type: "+typeof a);}function Ng(a,b){var c=Mg(a,b);return c?" WHERE "+c:""}
function Og(a,b){var c="UPDATE "+a[t][k]()+" SET ",c=c+a.set.map(function(a){var b=a.K.l()+" = ";return-1!=a.dd?b+"?"+a.dd[r]():b+Hg(a.K.$(),a[x])[r]()})[F](", ");a.D&&(c+=Ng(a.D,b));return c+";"}
function Pg(a,b){var c="*";a.h[y]&&(c=a.h.map(function(a){return a.Ua()?a.l()+" AS "+a.Ua():a.l()})[F](", "));var d=a.f.map(function(a){return a.za()!=a[k]()?a[k]()+" AS "+a.za():a[k]()})[F](", "),c="SELECT "+c+" FROM "+d;a.D&&(c+=Ng(a.D,b));a.J&&(d=a.J.map(function(a){return a.K.l()+(0==a.mb?" DESC":" ASC")})[F](", "),c+=" ORDER BY "+d);a.la&&(d=a.la.map(function(a){return a.l()})[F](", "),c+=" GROUP BY "+d);a.oa&&(c+=" LIMIT "+a.oa[r]());a.ma&&(c+=" SKIP "+a.ma[r]());return c+";"}
function Qg(a,b){var c=b||!1,d=a.Rf();if(d instanceof Fg)return Ig(d,c);if(d instanceof Eg){var g="DELETE FROM "+d.f[k]();d.D&&(g+=Ng(d.D,c));return g+";"}if(d instanceof Gg)return Og(d,c);if(d instanceof xe)return Pg(d,c);throw new P("NotSupportedError","toSql not implemented for "+typeof d);};
function Rg(a,b){this.global=a;this.hk=a.o(yd);this.Ra=a.o(zd);this.a=b}I("lf.query.BaseBuilder",Rg,void 0);ha(Rg[z],function(){try{this.jb()}catch(a){return Qc(a)}return new M(function(a,c){var d=new Dg(this[Ta],[this.Mc()]);this.Ra.Vb(d)[A](function(c){a(c[0].xe())},c)},this)});ha(Rg[z],Rg[z][Ia]);Rg[z].Jf=function(){var a=J(function(a){return a.ad(this.a)+"\n"},this);return Of(this.ye().Jb(),a)};Rg[z].explain=Rg[z].Jf;na(Rg[z],function(a){this.a[q](a);return this});na(Rg[z],Rg[z][q]);
Rg[z].Ik=function(a){return Qg(this,a)};Rg[z].toSql=Rg[z].Ik;H=Rg[z];H.jb=Bb();H.Rf=function(){return this.a.clone()};H.Ad=G("a");H.ye=function(){null==this.vg&&(this.vg=this.hk.ej(this.a));return this.vg};H.Mc=function(){return{context:this.Rf(),Ve:this.ye()}};H.cj=function(){return{context:this.Ad(),Ve:this.ye()}};
function Sg(a){Rg[D](this,a,new Eg)}K(Sg,Rg);I("lf.query.DeleteBuilder",Sg,void 0);Sg[z].f=function(a){this.nh();this.a.f=a;return this};Sg[z].from=Sg[z].f;Sg[z].D=function(a){this.ge();this.a.D=a;return this};Sg[z].where=Sg[z].D;Sg[z].nh=function(){if(null!=this.a.f)throw new P("SyntaxError","from() has already been called.");};Sg[z].ge=function(){if(null!=this.a.D)throw new P("SyntaxError","where() has already been called.");};
Sg[z].jb=function(){Sg.eb.jb[D](this);if(null==this.a.f)throw new P("SyntaxError","Invalid usage of delete()");};
function Tg(a,b){Rg[D](this,a,new Fg);this.a.wc=b||!1}K(Tg,Rg);I("lf.query.InsertBuilder",Tg,void 0);Tg[z].jb=function(){Tg.eb.jb[D](this);var a=this.a;if(null==a.Wa||null==a[Oa])throw new P("SyntaxError","Invalid usage of insert()");if(a.wc&&null===a.Wa.kc().ze())throw new P("SyntaxError","Attempted to insert or replace in a table with no primary key.");};Tg[z].Wa=function(a){this.oh();this.a.Wa=a;return this};Tg[z].into=Tg[z].Wa;
la(Tg[z],function(a){this.ph();a instanceof je||a[wb](function(a){return a instanceof je})?this.a.ac=a:la(this.a,a);return this});la(Tg[z],Tg[z][Oa]);Tg[z].oh=function(){if(null!=this.a.Wa)throw new P("SyntaxError","into() has already been called.");};Tg[z].ph=function(){if(null!=this.a[Oa])throw new P("SyntaxError","values() has already been called.");};
function Ug(a){return Vg("and",e[z][w][D](arguments))}I("lf.op.and",Ug,void 0);I("lf.op.or",function(a){return Vg("or",e[z][w][D](arguments))},void 0);function Vg(a,b){var c=new Pf(a);b[n](function(a){c.ia(a)});return c}I("lf.op.not",function(a){a.Xd(!0);return a},void 0);
function W(a,b){Rg[D](this,a,new xe);this.Lf=this.Zg=!1;this.a.h=b;this.Dh();this.Ch()}K(W,Rg);I("lf.query.SelectBuilder",W,void 0);H=W[z];H.jb=function(){W.eb.jb[D](this);var a=this.a;if(null==a.f)throw new P("SyntaxError","Invalid usage of select()");if(Fb(a.Nb)&&!Fb(a.oa)||Fb(a.Yb)&&!Fb(a.ma))throw new P("SyntaxError","Binding parameters of limit/skip without providing values");this.Mh()};
H.Dh=function(){var a=this.a.h[Ea](function(a){return a instanceof T&&"DISTINCT"==a.$b},this);if(0!=a[y]&&(1!=a[y]||1!=this.a.h[y]))throw new P("SyntaxError","Invalid usage of lf.fn.distinct()");};H.Mh=function(){null!=this.a.la?this.Hh():this.Lh()};
H.Hh=function(){var a=this.a.h[Ea](function(a){return!(a instanceof T)}).map(function(a){return a.l()}),b=!1;if(0==this.a.la[y]||0==this.a.h[y])b=!0;else{var c=this.a.la.map(function(a){return a.l()});(b=a[wb](function(a){return-1==c[ob](a)}))||(b=this.a.la[wb](function(a){a=a.$();return 6==a||0==a}))}if(b)throw new P("SyntaxError","Invalid projection list or groupBy columns");};
H.Lh=function(){var a=this.a.h[wb](function(a){return a instanceof T},this),b=this.a.h[wb](function(a){return!(a instanceof T)},this)||0==this.a.h[y];if(a&&b)throw new P("SyntaxError","Invalid projection list, aggregated and non-aggregated can't be mixed.");};H.Ch=function(){this.a.h[n](function(a){if(a instanceof T&&!Wg(a.$b,a.$()))throw new P("SyntaxError","Invalid aggregation detected for"+a.l());},this)};
H.fe=function(a,b){if(null!=a)throw new P("SyntaxError",b+"() has already been called.");};H.vf=function(a,b){if(0>a)throw new P("SyntaxError",b+"() does not accept negative values");};H.f=function(a){if(this.Lf)throw new P("SyntaxError","from() has already been called.");this.Lf=!0;null==this.a.f&&(this.a.f=[]);this.a.f[v][ib](this.a.f,e[z][w][D](arguments));return this};W[z].from=W[z].f;
W[z].D=function(a){if(this.Zg)throw new P("SyntaxError","where() has already been called.");this.Zg=!0;this.xf(a);return this};W[z].where=W[z].D;W[z].xf=function(a){null!=this.a.D&&(a=Ug(a,this.a.D));this.a.D=a};W[z].Fe=function(a,b){null==this.a.f&&(this.a.f=[]);this.a.f[v](a);this.xf(b);return this};W[z].innerJoin=W[z].Fe;W[z].Ij=function(){throw new P("NotSupportedError","Not implemented yet");};W[z].leftOuterJoin=W[z].Ij;
W[z].oa=function(a){this.fe(this.a.oa||this.a.Nb,"limit");a instanceof je?this.a.Nb=a:(this.vf(a,"limit"),this.a.oa=a);return this};W[z].limit=W[z].oa;W[z].ma=function(a){this.fe(this.a.ma||this.a.Yb,"skip");a instanceof je?this.a.Yb=a:(this.vf(a,"skip"),this.a.ma=a);return this};W[z].skip=W[z].ma;W[z].J=function(a,b){null==this.a.J&&(this.a.J=[]);this.a.J[v]({K:a,mb:null!=b?b:1});return this};W[z].orderBy=W[z].J;
W[z].la=function(a){this.fe(this.a.la,"groupBy");null==this.a.la&&(this.a.la=[]);this.a.la[v][ib](this.a.la,e[z][w][D](arguments));return this};W[z].groupBy=W[z].la;function Wg(a,b){switch(a){case "COUNT":case "DISTINCT":return!0;case "AVG":case "GEOMEAN":case "STDDEV":case "SUM":return 4==b||3==b;case "MAX":case "MIN":return 4==b||3==b||5==b||2==b}return!1}sa(W[z],function(){var a=new W(this[Ta],this.a.h);a.a=this.a.clone();a.a.Ac=null;return a});sa(W[z],W[z].clone);
function Xg(a,b){Rg[D](this,a,new Gg);oa(this.a,b)}K(Xg,Rg);I("lf.query.UpdateBuilder",Xg,void 0);Xg[z].set=function(a,b){var c={dd:b instanceof je?b.rb():-1,K:a,value:b};null!=this.a.set?this.a.set[v](c):this.a.set=[c];return this};Xg[z].set=Xg[z].set;Xg[z].D=function(a){this.ge();this.a.D=a;return this};Xg[z].where=Xg[z].D;Xg[z].ge=function(){if(null!=this.a.D)throw new P("SyntaxError","where() has already been called.");};
Xg[z].jb=function(){Xg.eb.jb[D](this);if(null==this.a.set)throw new P("SyntaxError","Invalid usage of update()");if(this.a.set[wb](function(a){return a[x]instanceof je}))throw new P("SyntaxError","Update set value not bound");};
function Yg(a){this.a=a;this.Da=null}Yg[z].ic=function(){null===this.Da&&(this.Da=this.rd());return this.Da};function Zg(a){Yg[D](this,a)}K(Zg,Yg);Zg[z].rd=function(){return this.a.wc?new mg(this.a.Wa,this.a[Oa]):new lg(this.a.Wa,this.a[Oa])};function $g(a){Yg[D](this,a)}K($g,Yg);$g[z].rd=function(){var a=new og(this.a[t],this.a.set),b=null!=this.a.D?new pg(this.a.D.Gb()):null,c=new qg(this.a[t]);null===b?a.ia(c):(b.ia(c),a.ia(b));return a};
function ah(a,b){this.Da=a;this.Ze=b}ah[z].ic=function(){this.Ze[n](function(a){this.Da=a.Bb(this.Da)},this);return this.Da};
function bh(a){Yg[D](this,a)}K(bh,Yg);bh[z].rd=function(){var a=new ng(this.a.f),b=null!=this.a.D?new pg(this.a.D.Gb()):null,c=new qg(this.a.f);null===b?a.ia(c):(b.ia(c),a.ia(b));return(new ah(a,[new Ag])).ic()};
function dh(){}K(dh,zg);dh[z].Bb=function(a){this.ha=a;this.Ta(this.ha);return this.ha};dh[z].Ta=function(a){if(a instanceof pg&&a.Ba instanceof Xf){L(1==a.ua(),"SelectNode must have exactly one child.");var b=a.qb(0);if(b instanceof rg){var c=new yg(a.Ba);Nf(a,b,c,c);a==this.ha&&(this.ha=c);a=c}}a.Y()[n](function(a){this.Ta(a)},this)};
function eh(){this.de=new O}K(eh,zg);H=eh[z];H.Bb=function(a){this.ha=a;this.Ta(this.ha);this.de[Pa]();return this.ha};H.Ta=function(a){if(this.$f(a)){var b=a.Ba instanceof ue?this.fk(a):this.ek(a);this.de.add(a);b==a&&(b=a.qb(0));null!==b&&(Jb(b[Ga]())&&(this.ha=b),this.$f(b)&&!this.de[u](b)&&this.Ta(b))}else a.Y()[n](function(a){this.Ta(a)},this)};
H.Qd=function(a,b){var c=a;if(this.zk(a))c=Lf(a),this.Qd(a,b);else if(this.yk(a)){var d=[],c=Mf(a,b,function(a){a=new pg(a.Ba);d[v](a);return a});d[n](function(a){this.Qd(a,b)},this)}return c};H.fk=function(a){var b=new O([a.Ba.K.Z().za()]),c=function(a){return this.Hf(a,b)}[q](this);return this.Qd(a,c)};H.ek=function(a){var b=new O([a.Ba.Oa.Z().za(),a.Ba.bb.Z().za()]),c=function(a){return this.Hf(a,b)}[q](this);return this.Qd(a,c)};
H.Hf=function(a,b){var c=new O;Hf(a)[n](function(a){c.add(a[t].za())},this);a instanceof qg&&c.add(a[t].za());return c.Vh(b)};H.$f=function(a){return a instanceof pg&&!(a.Ba instanceof Pf)};H.yk=function(a){a=a.qb(0);return a instanceof rg||a instanceof yg};H.zk=function(a){return a.qb(0)instanceof pg};
function fh(a){Yg[D](this,a);this.Ag=this.kg=this.Mg=this.qg=this.rf=this.Wf=this.Jg=this.Ef=this.Og=null}K(fh,Yg);H=fh[z];H.rd=function(){this.Ni();var a=this.Sh(),b=[new Ag,new Bg,new eh,new dh];return(new ah(a,b)).ic()};H.Ni=function(){this.Ti();this.Ii();this.Ri();this.Oi();this.Si();this.Mi();this.Ki();this.Hi();this.Pi()};
H.Sh=function(){for(var a=[this.kg,this.Mg,this.Ag,this.qg,this.rf,this.Wf,this.Jg,this.Ef],b=null,c=null,d=0;d<a[y];d++){var g=a[d];null!==g&&(null===c?c=g:a[b].ia(g),b=d)}this.Og[n](function(c){a[b].ia(c)});return c};H.Ti=function(){this.Og=this.a.f.map(function(a){return new qg(a)},this)};H.Ii=function(){2<=this.a.f[y]&&(this.Ef=new rg)};H.Ri=function(){this.Jg=null!=this.a.D?new pg(this.a.D.Gb()):null};H.Oi=function(){this.a.J&&(this.qg=new tg(this.a.J))};
H.Mi=function(){null!=this.a.oa&&(this.kg=new wg(this.a.oa))};H.Si=function(){null!=this.a.ma&&0<this.a.ma&&(this.Mg=new xg(this.a.ma))};H.Ki=function(){null!=this.a.la&&(this.Wf=new vg(this.a.la))};H.Hi=function(){var a=this.a.h[Ea](function(a){return a instanceof T});null!=this.a.J&&this.a.J[n](function(b){b.K instanceof T&&a[v](b.K)});0<a[y]&&(this.rf=new ug(a))};H.Pi=function(){this.Ag=new sg(this.a.h||[],this.a.la||null)};
function gh(){}gh[z].create=function(a){var b=null;if(a instanceof Fg)b=new Zg(a);else if(a instanceof Eg)b=new bh(a);else if(a instanceof xe)b=new fh(a);else if(a instanceof Gg)b=new $g(a);else throw new P("SyntaxError","Unknown query context");return b.ic()};
function hh(a){U[D](this,1,1);this.F=a}K(hh,U);f(hh[z],function(){return"delete("+this.F[k]()+")"});hh[z].da=G("F");hh[z].ja=function(a,b){var c=b[0][C].map(function(a){return a.ta});a[m](this.F,c);return[ce()]};
function ih(a){U[D](this,1,1);this.Vf=a}K(ih,U);f(ih[z],function(){return"groupBy("+this.Vf.map(function(a){return a.l()})[r]()+")"});ih[z].ja=function(a,b){return this.yh(b[0])};ih[z].yh=function(a){var b=new Wf,c=function(a){return this.Vf.map(function(b){return a.M(b)},this)[F](",")}[q](this);a[C][n](function(a){b.add(c(a),a)},this);return b.H().map(function(c){return new $d(b.get(c),a.W())},this)};
function jh(a){L(1<a[y],"Should only be called for cross-column indices.");a=a.map(function(a){return a.c()});a=rd[ib](null,a);var b=[];qd(a,function(a){b[v](a)});return b}function kh(a){this.Mb=a}kh[z].xd=function(){return 1==this.Mb.h[y]?[Yd()]:[this.Mb.h.map(function(){return Yd()})]};function lh(a,b){this.Mb=a;this.ra=b;this.le=this.ig=null}
lh[z].zh=function(a){var b=new N;this.ra.H()[n](function(c){var d=this.ra.get(c).map(function(b){return a.Bd(b)},this),g=new Ef([Yd()]);d[n](function(a){a=new Ef(a.Hk());g=Ff(g,a)});b.set(c,g)},this);return b};lh[z].Ai=function(a){for(var b=this.Mb.h[y]-1;0<=b;b--){var c=this.Mb.h[b];if(null!==a.get(c.cb[k](),null))break;a.set(c.cb[k](),new Ef([Yd()]))}};lh[z].xd=function(a){if(this.ig==a)return this.le;var b=this.zh(a);this.Ai(b);this.le=1==this.Mb.h[y]?b.c()[0].c():jh(this.kj(b));this.ig=a;return this.le};
lh[z].kj=function(a){var b=new N,c=0;this.Mb.h[n](function(a){b.set(a.cb[k](),c);c++});return a.H()[xb](function(a,c){return b.get(a)-b.get(c)}).map(function(b){return a.get(b)})};
function mh(a,b){this.Qg=b;this.N=a.o(xd)}mh[z].Oh=function(a,b){var c=b[Ea](this.Cj,this);if(0==c[y])return null;c=this.Li(c);if(0==c[y])return null;if(1==c[y])return c[0];var d=Number.MAX_VALUE;return c[kb](function(b,c){var l=c.xh(a);return l<d?(d=l,c):b},null)};mh[z].Li=function(a){return this.Qg.Ga().map(function(b){b=new nh(this.N,b);b.Uh(a);return b},this)[Ea](function(a){return a.Hj()})};mh[z].Cj=function(a){return a instanceof ue&&a.ag()?a.K.Z()==this.Qg:!1};
function nh(a,b){this.N=a;this.tb=b;this.Yf=new O;this.Yf[lb](this.tb.h.map(function(a){return a.cb[k]()}));this.Le=this.ra=null}H=nh[z];H.fj=function(){return null===this.ra?[]:this.ra.c()};H.Qf=function(){L(this.ra);null===this.Le&&(this.Le=new lh(this.tb,this.ra));return this.Le};H.Uh=function(a){a[n](function(a){var c=a.zb()[0][k]();this.Yf[u](c)&&(null===this.ra&&(this.ra=new Wf),this.ra.add(c,a.ka()))},this)};
H.Hj=function(){if(null===this.ra)return!1;for(var a=!1,b=!0,c=0;c<this.tb.h[y];c++){var d=this.ra.s(this.tb.h[c].cb[k]());if(a&&d){b=!1;break}d||(a=!0)}return b};H.xh=function(a){a=this.Qf().xd(a);var b=this.N.get(this.tb.l());return a[kb](function(a,d){return a+b.nd(d)},0)};
function oh(a,b,c,d){U[D](this,0,-1);this.N=a.o(xd);this.index=b;this.gg=c;this.Ye=d;this.ae=this.$d=!1}K(oh,U);f(oh[z],function(){return"index_range_scan("+this[Za].l()+", ?, "+(this.Ye?"reverse":"natural")+(this.$d?", limit:?":"")+(this.ae?", skip:?":"")+")"});oh[z].ad=function(a){var b=this[r](),c=this.gg.xd(a),b=b[Ja]("?",c[r]());this.$d&&(b=b[Ja]("?",a.oa[r]()));this.ae&&(b=b[Ja]("?",a.ma[r]()));return b};
oh[z].ja=function(a,b,c){a=this.gg.xd(c);c=this.N.get(this[Za].l()).Va(a,this.Ye,this.$d?c.oa:void 0,this.ae?c.ma:void 0).map(function(a){return new $c(a,{})},this);return[fe(c,[this[Za].ef])]};
function ph(a){U[D](this,1,1);this.Pd=a}K(ph,U);f(ph[z],Db("select(?)"));ph[z].ad=function(a){a=a.Bd(this.Pd);return this[r]()[Ja]("?",a[r]())};ph[z].ja=function(a,b,c){return[c.Bd(this.Pd).eval(b[0])]};
function qh(a,b){U[D](this,1,1);this.pa=a.o(wd);this.F=b}K(qh,U);f(qh[z],function(){return"table_access_by_row_id("+this.F[k]()+")"});qh[z].da=G("F");qh[z].ja=function(a,b){return[fe(this.pa.get(b[0].jj()),[this.F.za()])]};
function rh(a,b){U[D](this,0,-1);this.pa=a.o(wd);this.N=a.o(xd);oa(this,b)}K(rh,U);f(rh[z],function(){var a="table_access("+this[t][k]();null===this[t].Ua()||(a+=" as "+this[t].Ua());return a+")"});rh[z].da=G("table");rh[z].ja=function(){var a=this.N.get(this[t].Kb()).Va();return[fe(this.pa.get(a),[this[t].za()])]};
function sh(a){this.m=a}K(sh,zg);sh[z].Bb=function(a,b){this.ha=a;If(a,function(a){return a instanceof rh})[n](function(a){var d=this.Gi(a);if(0!=d[y]){var g=(new mh(this.m,a[t])).Oh(b,d.map(function(a){return b.Bd(a.Pd)}));if(null!==g){var h=new N;d[n](function(a){h.set(a.Pd,a)},this);this.ha=this.rk(g,h,a,b)}}},this);return this.ha};sh[z].Gi=function(a){var b=[];for(a=a[Ga]();a;)a instanceof ph&&b[v](a),a=a[Ga]();return b};
sh[z].rk=function(a,b,c){a.fj().map(function(a){return b.get(a)})[n](Jf);a=new oh(this.m,a.tb,a.Qf(),!1);var d=new qh(this.m,c[t]);d.ia(a);Nf(c,c,d,a);return a.Jb()};
function th(a,b){U[D](this,0,-1);this.N=a.o(xd);this.F=b}K(th,U);f(th[z],function(){return"insert("+this.F[k]()+")"});th[z].da=G("F");th[z].ja=function(a,b,c){uh(this.F,c[Oa],this.N);a.ub(this.F,c[Oa]);return[fe(c[Oa],[this.F[k]()])]};function uh(a,b,c){a=a.kc().ze();if(null===a?0:a.h[0][Na]){var d=a.h[0].cb[k](),g=c.get(a.l()).max()[0]||0;b[n](function(a){if(0==a.w()[d]||null==a.w()[d])g++,a.w()[d]=g})}}function vh(a,b){U[D](this,0,-1);this.N=a.o(xd);this.F=b}K(vh,U);
f(vh[z],function(){return"insert_replace("+this.F[k]()+")"});vh[z].da=G("F");vh[z].ja=function(a,b,c){uh(this.F,c[Oa],this.N);a.Ge(this.F,c[Oa]);return[fe(c[Oa],[this.F[k]()])]};
function wh(a){U[D](this,2,0);this.zg=a}K(wh,U);f(wh[z],function(){return"join("+this.zg[r]()+")"});wh[z].ja=function(a,b){return[this.zg.ki(b[0],b[1])]};
function xh(){U[D](this,1,1)}K(xh,U);f(xh[z],Db("limit(?)"));xh[z].ad=function(a){return this[r]()[Ja]("?",a.oa[r]())};xh[z].ja=function(a,b,c){b[0][C][E](c.oa);return b};
function yh(a){U[D](this,-1,1);this.J=a}K(yh,U);H=yh[z];f(H,function(){return"order_by("+ye(this.J)+")"});H.ja=function(a,b){if(1==b[y]){var c=this.Ci(b[0]);(null===c?b[0]:b[0].jc(c))[C][xb](this.hi[q](this))}else b[xb](this.mk[q](this));return b};H.Ci=function(a){for(var b=null,c=0;c<this.J[y];c++){var d=cg(this.J[c].K);if(a.vj(d)){b=d;break}}return b};
H.L=function(a,b){var c=null,d=null,g=null,h=-1;do h++,g=this.J[h].K,c=this.J[h].mb,d=a(g),g=b(g);while(d==g&&h+1<this.J[y]);d=d<g?-1:d>g?1:0;return 1==c?d:-d};H.mk=function(a,b){return this.L(function(b){return b instanceof T?a.jc(b):a[C][a[C][y]-1].M(b)},function(a){return a instanceof T?b.jc(a):b[C][b[C][y]-1].M(a)})};H.hi=function(a,b){return this.L(function(b){return a.M(b)},function(a){return b.M(a)})};
function zh(a,b){this.Ca=a;this.G=b}zh[z].Uf=function(){return this.G[wb](function(a){return a instanceof T},this)?this.tj():this.uj()};
zh[z].tj=function(){if(1==this.G[y]&&"DISTINCT"==this.G[0].$b){var a=this.Ca.jc(this.G[0])[C].map(function(a){var b=new ge(new $c(-1,{}),this.Ca.Ie());b.af(this.G[0],a.M(this.G[0][gb]));return b},this);return new $d(a,[])}var b=new ge(new $c(-1,{}),this.Ca.Ie());this.G[n](function(a){var d=a instanceof T?this.Ca.jc(a):this.Ca[C][0].M(a);b.af(a,d)},this);return new $d([b],this.Ca.W())};
zh[z].uj=function(){var a=e(this.Ca[C][y]),b=this.Ca.Ie();this.Ca[C][n](function(c,d){a[d]=new ge(new $c(c.ta.id(),{}),b);this.G[n](function(b){a[d].af(b,c.M(b))},this)},this);return new $d(a,this.Ca.W())};function Ah(a,b){var c=a.map(function(a){return(new zh(a,b)).Uf()[C][0]});return new $d(c,a[0].W())};
function Bh(a,b){U[D](this,-1,1);this.h=a;this.Lb=b}K(Bh,U);H=Bh[z];f(H,function(){var a="project("+this.h[r]();if(null!==this.Lb)var b=this.Lb.map(function(a){return a.l()})[F](", "),a=a+(", groupBy("+b+")");return a+")"});H.ja=function(a,b){return 0==b[y]?[ce()]:1==b[y]?[this.ti(b[0])]:[this.ri(b)]};H.wj=function(){return this.h[wb](function(a){return a instanceof T})||null!==this.Lb};H.ri=function(a){return Ah(a,this.h)};H.ti=function(a){return 0==this.h[y]?a:(new zh(a,this.h)).Uf()};
function Ch(){U[D](this,1,1)}K(Ch,U);f(Ch[z],Db("skip(?)"));Ch[z].ad=function(a){return this[r]()[Ja]("?",a.ma[r]())};Ch[z].ja=function(a,b,c){return[new $d(b[0][C][w](c.ma),b[0].W())]};
function Dh(){}K(Dh,zg);Dh[z].Bb=function(a){var b=If(a,function(a){return a instanceof xh||a instanceof Ch});if(0==b[y])return a;var c=this.Fi(a);if(null===c)return a;b[n](function(a){this.Qj(a,c)},this);return c.Jb()};Dh[z].Qj=function(a,b){a instanceof xh?b.$d=!0:b.ae=!0;return Jf(a).parent};Dh[z].Fi=function(a){a=If(a,function(a){return a instanceof oh},function(a){return a instanceof Bh&&a.wj()||a instanceof yh||1!=a.ua()||a instanceof ph});return 0<a[y]?a[0]:null};
function Eh(a){this.m=a}K(Eh,zg);Eh[z].Bb=function(a){var b=Fh(a);if(null===b)return a;a=this.mh(b);a==b&&(a=this.lh(b));return a.Jb()};Eh[z].mh=function(a){var b=a,c=Gh(a.qb(0));if(null!==c){var d;d=a.J;for(var g=null,h=c[t].Ga(),l=0;l<h[y]&&null===g;l++)g=Hh(h[l],d);d=g;if(null===d)return b;b=new oh(this.m,d.tb,new kh(d.tb),d.dg);d=new qh(this.m,c[t]);d.ia(b);Jf(a);b=Nf(c,c,d,b)}return b};
Eh[z].lh=function(a){var b=a,c=Ih(a.qb(0));if(null!==c){var d=Hh(c[Za],a.J);if(null===d)return b;c.Ye=d.dg;b=Jf(a).parent}return b};function Ih(a){a=If(a,function(a){return a instanceof oh},function(a){return 1!=a.ua()});return 0<a[y]?a[0]:null}function Gh(a){a=If(a,function(a){return a instanceof rh},function(a){return 1!=a.ua()});return 0<a[y]?a[0]:null}function Fh(a){a=If(a,function(a){return a instanceof yh});return 0<a[y]?a[0]:null}
function Hh(a,b){if(a.h[y]!=b[y]||!b[yb](function(b,c){return b.K[k]()==a.h[c].cb[k]()}))return null;var c=Jh(b,a);return c[0]||c[1]?{tb:a,dg:c[1]}:null}function Jh(a,b){var c=a[kb](function(a,b){return a<<1|(0==b.mb?0:1)},0),d=b.h[kb](function(a,b){return a<<1|(0==b.mb?0:1)},0),d=c^d,c=0==d,d=d==ea.pow(2,ea.max(a[y],b.h[y]))-1;return[c,d]};
function Kh(a,b,c){this.Da=a;this.gk=b;this.Ze=c}Kh[z].ic=function(){this.Ze[n](function(a){this.Da=a.Bb(this.Da,this.gk)},this);return this.Da};
function Lh(a,b){U[D](this,1,1);this.F=a;this.Pk=b}K(Lh,U);f(Lh[z],function(){return"update("+this.F[k]()+")"});Lh[z].da=G("F");Lh[z].ja=function(a,b){var c=b[0][C].map(function(a){var b=this.F.fc(a.ta.Ea());this.Pk[n](function(a){b.w()[a.K[k]()]=a[x]},this);return b},this);a[zb](this.F,c);return[ce()]};
function Mh(a){this.m=a}Mh[z].create=function(a,b){if(a instanceof mg||a instanceof lg)return this.pe(a,b);if(a instanceof sg||a instanceof wg||a instanceof xg)return this.pe(a,b,[new sh(this.m),new Eh(this.m),new Dh]);if(a instanceof ng||a instanceof og)return this.pe(a,b,[new sh(this.m)]);throw new P("NotSupportedError","Unknown query plan node");};Mh[z].pe=function(a,b,c){a=Gf(a,J(this.Mj,this));return null!=c?new ze((new Kh(a,b,c)).ic()):new ze(a)};
Mh[z].Mj=function(a){if(a instanceof sg)return new Bh(a.h,a.Lb);if(a instanceof vg)return new ih(a.h);if(a instanceof ug)return new dg(a.h);if(a instanceof tg)return new yh(a.J);if(a instanceof xg)return new Ch;if(a instanceof wg)return new xh;if(a instanceof pg)return new ph(a.Ba.ka());if(a instanceof rg)return new Cg;if(a instanceof yg)return new wh(a.Ba);if(a instanceof qg)return new rh(this.m,a[t]);if(a instanceof ng)return new hh(a[t]);if(a instanceof og)return new Lh(a[t],a.kf);if(a instanceof
mg)return new vh(this.m,a[t]);if(a instanceof lg)return new th(this.m,a[t]);throw new P("NotSupportedError","Unknown node type");};

function Nh(a){this.Kj=new gh;this.ak=new Mh(a)}Nh[z].ej=function(a){var b=this.Kj[Va](a);return this.ak[Va](b,a)};
function Oh(){this.mg=new N}H=Oh[z];H.vd=function(a){var b=this.mg.get(a[k](),null);null===b&&(b=new Ph,this.mg.set(a[k](),b));return b};H.qj=function(a,b,c){b[n](function(b){this.vd(b).pj(a,c)},this)};H.Bh=function(a,b,c){return b[yb](function(b){return this.vd(b).Ah(a,c)},this)};H.Dg=function(a,b,c){var d=this.Bh(a,b,c);d&&this.qj(a,b,c);return d};H.Td=function(a,b){b[n](function(b){this.vd(b).Td(a)},this)};H.Ph=function(a){a[n](function(a){this.vd(a).ab=null},this)};
function Ph(){this.Xb=this.Pa=this.ab=this.Gc=null}Ph[z].Td=function(a){this.Gc==a&&(this.Gc=null);this.ab==a&&(this.ab=null);null===this.Pa||this.Pa[m](a);null===this.Xb||this.Xb[m](a)};Ph[z].Ah=function(a,b){var c=null===this.Pa||this.Pa.Ha();return 0==b?(null===this.Xb||this.Xb.Ha())&&c&&null===this.Gc&&null!==this.ab&&this.ab==a:3==b?null===this.Gc&&null===this.ab&&null!==this.Pa&&this.Pa[u](a):1==b?null===this.ab:c&&(null===this.ab||this.ab==a)};
Ph[z].pj=function(a,b){0==b?(this.ab=null,this.Gc=a):3==b?(null===this.Xb&&(this.Xb=new O),this.Xb.add(a),null===this.Pa&&(this.Pa=new O),this.Pa[m](a)):1==b?(null===this.Pa&&(this.Pa=new O),this.Pa.add(a)):2==b&&(this.ab=a)};
function Qh(){this.Tb=new Rh;this.Sc=new Oh}H=Qh[z];H.Vb=function(a){(2>a[pb]()||2>a[pb]())&&this.Sc.Ph(a.da().c());this.Tb.ub(a);this.oe();return a.Kc().ga};H.oe=function(){for(var a=this.Tb.c(),b=0;b<a[y];b++){var c=a[b],d=!1;if(d=0==c.$()?this.Eg(c,1,3):this.Eg(c,2,0))this.Tb[m](c),this.ui(c)}};H.Eg=function(a,b,c){var d=!1,g=a.da().c();this.Sc.Dg(a.ka(),g,b)&&(d=this.Sc.Dg(a.ka(),g,c));return d};H.ui=function(a){a[Ia]()[A](J(this.Xj,this,a),J(this.Wj,this,a))};
H.Xj=function(a,b){this.Sc.Td(a.ka(),a.da().c());a.Kc()[vb](b);this.oe()};H.Wj=function(a,b){this.Sc.Td(a.ka(),a.da().c());a.Kc()[jb](b);this.oe()};function Rh(){this.Tb=[]}Rh[z].ub=function(a){pc(this.Tb,a,function(a,c){var d=a[pb]()-c[pb]();return 0==d?a.ka()-c.ka():d})};Rh[z].c=function(){return this.Tb[w]()};ja(Rh[z],function(a){var b=this.Tb;a=bc(b,a);var c;(c=0<=a)&&hc(b,a);return c});
function Sh(a,b){this.ji=ke.we();this.Wc=a;this.Ld=b;this.G=this.ci()}Sh[z].ci=function(){if(0<this.Wc.h[y])return this.Wc.h;var a=[],b=this.Wc.f[w]();null!=this.Wc.Fe&&b[v](this.Wc.Fe);b[n](function(b){b.zb()[n](function(b){a[v](b)})});return a};Sh[z].L=function(a,b){return this.G[yb](function(c){return this.ji.ve(c.$(),"eq")(a.M(c),b.M(c))},this)};
Sh[z].kh=function(a,b){for(var c=null===a?[]:a[C],d=id(c,b[C],J(this.L,this),function(a){return c[a]}),g=[],h=0,l=0;l<c[y];l++){var p=c[l];d[h]==p?h++:(p=this.Ld[E](h,1),p=Th(l,p,0,this.Ld),g[v](p))}d=id(c,b[C],J(this.L,this),function(a,c){return b[C][c]});for(l=h=0;l<b[C][y];l++)p=b[C][l],d[h]==p?h++:(this.Ld[E](l,0,p.ta.w()),p=Th(l,[],1,this.Ld),g[v](p));return g};function Th(a,b,c,d){return{Qk:c,index:a,object:d,Sk:b,type:"splice"}};
function Uh(){this.hc=new N}H=Uh[z];H.Ae=function(a){return Ob(a)[r]()};H.ce=function(a,b){var c=this.Ae(a.Ad()),d=this.hc.get(c,null);null===d&&(d=new Vh(a),this.hc.set(c,d));d.ce(b)};H.Xe=function(a,b){var c=this.Ae(a.Ad()),d=this.hc.get(c,null);L(null!=d,"Attempted to unobserve a query that was not observed.");var g=d.Xe(b);L(g,"removeObserver: Inconsistent state detected.");d.yj()||this.hc[m](c)};
H.Ce=function(a){var b=new O;a[n](function(a){b.add(a[k]())});var c=[];this.hc.c()[n](function(a){a=a.Mc();a[Da].f[wb](function(a){return b[u](a[k]())})&&c[v](a)});return c};H.Wg=function(a,b){var c=this.Ae(null!=a.Ac?a.Ac:a),c=this.hc.get(c,null);return null!==c?(c.Ok(b),!0):!1};function Vh(a){this.vh=a;this.Vc=new O;this.Uj=[];this.jg=null;this.fi=new Sh(a.Ad(),this.Uj)}H=Vh[z];H.ce=function(a){this.Vc[u](a)?Yb("Attempted to register observer twice."):this.Vc.add(a)};H.Xe=function(a){return this.Vc[m](a)};
H.Mc=function(){return this.vh.cj()};H.yj=function(){return 0<this.Vc.na()};H.Ok=function(a){var b=this.fi.kh(this.jg,a);this.jg=a;0<b[y]&&this.Vc.c()[n](function(a){a(b)})};
function Wh(a,b){var c=a.o(Bd),d=b||{},g=d.storeType||0,h=new bf;a.nb(wd,h);var h=null,l=!1;switch(g){case 1:h=new Qe(c);break;case 5:h=new Re(c);break;case 4:h=new Ve(a,c,d.webSqlDbSize);break;case 3:h=new Ke(c,d.firebase);l=!0;break;default:h=new Oe(a,c)}a.nb(vd,h);var p=new Cf;a.nb(xd,p);return h.Aa(d.onUpgrade)[A](function(){a.nb(yd,new Nh(a));var b=new Qh;a.nb(zd,b);b=new Uh;a.nb(Ad,b);return p.Aa(c)})[A](function(){l&&(new Fe(a)).Dk();return(new Bf(a)).Aa(c)})};

function Xh(a,b){this.m=a;this.xb=a.o(vd);this.Ra=a.o(zd);this.Ab=a.o(Ad);this.Sa=new O(b);this.Ya=new Qd(this.m,this.Sa.c());this.Ub=Uc();this.Hc=Uc();this.mf=Uc()}H=Xh[z];ha(H,function(){this.mf[vb]();return this.Hc.ga});H.$=Db(1);H.da=G("Sa");H.Kc=G("Ub");H.ka=function(){return Ob(this)};wa(H,Db(2));H.$g=function(){this.Ra.Vb(this);return this.mf.ga};
H.sh=function(a){a=a.Mc();return a.Ve.Jb()[Ia](this.Ya,a[Da])[A](function(a){return a[0].xe()},J(function(a){this.Ya.Cb();var c=new Lc(a[rb]);this.Hc[jb](c);throw a;},this))};H.U=function(){this.xb.Hb(this.$(),this.Ya).U()[A](J(function(){this.Zc();this.Hc[vb]()},this),J(function(a){this.Ya.Cb();this.Hc[jb](a)},this));return this.Ub.ga};H.Cb=function(){this.Ya.Cb();this.Hc[vb]();return this.Ub.ga};H.Zc=function(){var a=this.Ab.Ce(this.Sa.c());0!=a[y]&&(a=new De(this.m,a),this.Ra.Vb(a))};
function Yh(a){this.m=a;this.Ra=a.o(zd);this.bd=null;this.Fa=0}I("lf.proc.Transaction",Yh,void 0);var Zh=new N(0,new O([1,4]),1,new O([2]),2,new O([3,5,6]),3,new O([2,7]),4,new O([7]),5,new O([7]),6,new O([7]));Yh[z].Ka=function(a){var b=Zh.get(this.Fa,null);if(null===b||!b[u](a))throw new P("TransactionError","Invalid transaction state transition, from "+this.Fa+" to "+a+".");this.Fa=a};
ha(Yh[z],function(a){this.Ka(4);var b=[];try{a[n](function(a){a.jb();b[v](a.Mc())},this)}catch(c){return this.Ka(7),Qc(c)}a=new Dg(this.m,b);return this.Ra.Vb(a)[A](J(function(a){this.Ka(7);return a.map(function(a){return a.xe()})},this),J(function(a){this.Ka(7);throw a;},this))});ha(Yh[z],Yh[z][Ia]);Yh[z].th=function(a){this.Ka(1);this.bd=new Xh(this.m,a);return this.bd.$g()[A](J(function(){this.Ka(2)},this))};Yh[z].begin=Yh[z].th;
Yh[z].rh=function(a){this.Ka(3);return this.bd.sh(a)[A](J(function(a){this.Ka(2);return a},this),J(function(a){this.Ka(7);throw a;},this))};Yh[z].attach=Yh[z].rh;Yh[z].U=function(){this.Ka(5);return this.bd.U()[A](J(function(){this.Ka(7)},this))};Yh[z].commit=Yh[z].U;Yh[z].Cb=function(){this.Ka(6);return this.bd.Cb()[A](J(function(){this.Ka(7)},this))};Yh[z].rollback=Yh[z].Cb;
function X(a){this.m=a;this.A=a.o(Bd);this.Ee=!1}I("lf.proc.Database",X,void 0);X[z].Aa=function(a){this.m.nb(Bd,this.A);return Wh(this.m,a)[A](J(function(){this.Ee=!0;return this},this))};X[z].init=X[z].Aa;X[z].sb=G("A");X[z].getSchema=X[z].sb;X[z].dc=function(){if(!this.Ee)throw new P("UninitializedError","Database is not initialized");};X[z].select=function(a){this.dc();return new W(this.m,1!=arguments[y]||null!=arguments[0]?e[z][w][D](arguments):[])};X[z].select=X[z].select;
X[z].ub=function(){this.dc();return new Tg(this.m)};X[z].insert=X[z].ub;X[z].Ge=function(){this.dc();return new Tg(this.m,!0)};X[z].insertOrReplace=X[z].Ge;Ca(X[z],function(a){this.dc();return new Xg(this.m,a)});Ca(X[z],X[z][zb]);xa(X[z],function(){this.dc();return new Sg(this.m)});X[z]["delete"]=X[z][qb];X[z].observe=function(a,b){this.m.o(Ad).ce(a,b)};X[z].observe=X[z].observe;X[z].unobserve=function(a,b){this.m.o(Ad).Xe(a,b)};X[z].unobserve=X[z].unobserve;X[z].ai=function(){this.dc();return new Yh(this.m)};
X[z].createTransaction=X[z].ai;ra(X[z],function(){try{this.m.o(vd)[cb]()}catch(a){}this.m[Pa]();this.Ee=!1});ra(X[z],X[z][cb]);
function Y(a,b,c,d,g,h){this.F=a;this.B=b;this.fg=c;this.cg=d;this.Vg=g;this.ib=h||null;this.i=this.C=null}I("lf.schema.BaseColumn",Y,void 0);H=Y[z];ia(H,G("B"));H.l=function(){return this.F.za()+"."+this.B};f(H,function(){return this.l()});H.Z=G("F");H.$=G("Vg");H.Ua=G("ib");H.Ga=function(){null==this.qa&&(this.qa=[],this.Z().Ga()[n](function(a){-1!=a.h.map(function(a){return a.cb[k]()})[ob](this.B)&&this.qa[v](a)},this));return this.qa};H.nc=G("cg");H.Pc=G("fg");H.cf=Cb("C");H.getParent=G("C");
H.Y=G("i");H.Na=function(a){return Yf(this,a,"eq")};Y[z].eq=Y[z].Na;Y[z].ng=function(a){return Yf(this,a,"neq")};Y[z].neq=Y[z].ng;Y[z].Ne=function(a){return Yf(this,a,"lt")};Y[z].lt=Y[z].Ne;Y[z].Lj=function(a){return Yf(this,a,"lte")};Y[z].lte=Y[z].Lj;Y[z].rj=function(a){return Yf(this,a,"gt")};Y[z].gt=Y[z].rj;Y[z].sj=function(a){return Yf(this,a,"gte")};Y[z].gte=Y[z].sj;Y[z].match=function(a){return Yf(this,a,"match")};Y[z].match=Y[z].match;Y[z].uh=function(a,b){return Yf(this,[a,b],"between")};
Y[z].between=Y[z].uh;Y[z].zj=function(a){return Yf(this,a,"in")};Y[z]["in"]=Y[z].zj;Y[z].Fj=function(){return this.Na(null)};Y[z].isNull=Y[z].Fj;Y[z].Ej=function(){return this.ng(null)};Y[z].isNotNull=Y[z].Ej;Y[z].xc=function(a){return new Y(this.F,this.B,this.fg,this.cg,this.Vg,a)};Y[z].as=Y[z].xc;
function $h(){this.Wd=new N}var ai;ma($h[z],function(){this.Wd[Pa]()});ma($h[z],$h[z][Pa]);$h[z].nb=function(a,b){this.Wd.set(a[r](),b);return b};$h[z].registerService=$h[z].nb;$h[z].o=function(a){var b=this.Wd.get(a[r](),null);if(null==b)throw new P("NotFoundError",a[r]());return b};$h[z].getService=$h[z].o;$h[z].Ke=function(a){return this.Wd.s(a[r]())};$h[z].isRegistered=$h[z].Ke;
function bi(a,b){this.dk=a;this.Sj=b}bi[z].ze=G("dk");bi[z].bj=G("Sj");
function Z(a){this.B=a;this.G=new N;this.hf=new O;this.sc=new O;this.Kd=new O;var b=this.B;this.pc="pk"+(b[0].toUpperCase()+b.substring(1));this.qa=new N;this.Od=!1;this.ec(a);this.Kf=[]}I("lf.schema.TableBuilder",Z,void 0);function ci(a,b){var c=a.ref[ab](".");if(2!=c[y])throw new P("SyntaxError","Foreign key {"+b+"} does not have a valid form 'table.column'");this.Me=a.local;this.Te=c[0];this.ug=c[1];this.Jc=b;this.action=a.action;this.timing=a.timing}
function di(a){za(this,a[rb]);this.mb=a.order;this.autoIncrement=a[Na]}var ei=new O([0,6]);Z[z].ec=function(a){if(!/^[A-Za-z_][A-Za-z0-9_]*$/.test(a))throw new P("SyntaxError",a+" violates naming rule");if(this.G.s(a)||this.qa.s(a)||this.sc[u](a))throw new P("SyntaxError",this.B+"."+a+" is already defined");};
Z[z].Kh=function(a){var b=!1;a[n](function(a){var d=this.G.get(a[rb]);b=b||a[Na];if(a[Na]&&3!=d)throw new P("SyntaxError","Can not use autoIncrement with a non-integer primary key.");},this);if(b&&1<a[y])throw new P("SyntaxError","Can not use autoIncrement with a cross-column primary key.");};Z[z].bh=function(a,b){this.ec(a);this.G.set(a,b);ei[u](b)&&this.pf([a]);return this};Z[z].addColumn=Z[z].bh;
Z[z].fh=function(a,b){this.ec(this.pc);var c=this.Jd(a,!0,void 0,b);this.Kh(c);1==c[y]&&this.hf.add(c[0][rb]);this.sc.add(this.pc);this.qa.set(this.pc,c);return this};Z[z].addPrimaryKey=Z[z].fh;
Z[z].dh=function(a,b){this.ec(a);var c=new ci(b,a);Fb(c.action)||(c.action=0);Fb(c.timing)||(c.timing=0);if(1==c.action&&1==c.timing)throw new P("SyntaxError","Lovefield allows only immediate evaluation of cascading constraints");if(!this.G.s(c.Me))throw new P("SyntaxError","Enter a valid column name for theforeign key in local table");this.Kf[v](c);return this};Z[z].addForeignKey=Z[z].dh;
Z[z].gh=function(a,b){this.ec(a);var c=this.Jd(b,!0);1==c[y]&&this.hf.add(c[0][rb]);this.qa.set(a,c);this.sc.add(a);return this};Z[z].addUnique=Z[z].gh;Z[z].pf=function(a){a=this.Jd(a,!1);this.Jh(a);a[n](function(a){this.Kd.add(a[rb])},this);return this};Z[z].addNullable=Z[z].pf;
Z[z].Jh=function(a){this.qa.H()[n](function(b){var c=new O;this.qa.get(b)[n](function(a){c.add(a[rb])});var d=a[Ea](function(a){return c[u](a[rb])});if(1<c.na()&&0<d[y])throw new P("SyntaxError","Cross-column index "+b+" refers to nullable columns: "+d[F](","));},this)};Z[z].eh=function(a,b,c,d){this.ec(a);b=this.Jd(b,!0,d);this.Ih(a,b);c&&this.sc.add(a);this.qa.set(a,b);return this};Z[z].addIndex=Z[z].eh;
Z[z].Ih=function(a,b){if(1<b[y]){var c=b[Ea](function(a){return this.Kd[u](a[rb])},this);if(0<c[y])throw new P("SyntaxError","Cross-column index "+a+" refers to nullable columns: "+c[F](","));}};Z[z].Sb=Cb("Od");Z[z].persistentIndex=Z[z].Sb;Z[z].sb=function(){return new (this.Ui())};Z[z].getSchema=Z[z].sb;Z[z].wd=G("Kf");
Z[z].Jd=function(a,b,c,d){var g=a,g="string"==typeof a[0]?a.map(function(a){return new di({name:a,order:c||1,autoIncrement:d||!1})}):a.map(function(a){return new di(a)});g[n](function(a){if(!this.G.s(a[rb]))throw new P("SyntaxError",this.B+" does not have column: "+a[rb]);if(b){var c=this.G.get(a[rb]);if(0==c||6==c)throw new P("SyntaxError",this.B+" index on non-indexable column: "+a[rb]);}},this);return g};
Z[z].Ui=function(){function a(){function a(c){return b.qa.get(c).map(function(a){return{cb:this[a[rb]],mb:a.mb,autoIncrement:a[Na]}},this)}var d=b.G.H().map(function(a){this[a]=new Y(this,a,b.hf[u](a),b.Kd[u](a),b.G.get(a));return this[a]},this),g=b.qa.H().map(function(d){return new $f(b.B,d,b.sc[u](d),a[D](this,d))},this);ag[D](this,b.B,d,g,b.Od);var h=b.qa.s(b.pc)?new $f(b.B,b.pc,!0,a[D](this,b.pc)):null,l=d[Ea](function(a){return!b.Kd[u](a[k]())}),p=b.sc.c().map(function(d){return new $f(b.B,d,
!0,a[D](this,d))},this);this.Th=new bi(h,l,[],p);this.Hg=b.Qi(d,g)}var b=this;K(a,ag);a[z].yb=function(a){return new this.Hg(ad++,a)};a[z].createRow=a[z].yb;a[z].fc=function(a){var b={};this.zb()[n](function(g){var h=g[k]();g=g.$();var l=a[x][h];if(0==g)if(null===l)g=l;else if(g=l,""==g)g=null;else{0!=g[y]%2&&(g="0"+g);for(var l=new ArrayBuffer(g[y]/2),p=new Uint8Array(l),B=0,Ra=0;B<g[y];B+=2)p[Ra++]=ga(g.substr(B,2),16);g=l}else g=2==g?null===l?l:new Date(l):l;b[h]=g},this);return new this.Hg(a.id,
b)};a[z].deserializeRow=a[z].fc;a[z].kc=G("Th");a[z].getConstraint=a[z].kc;return a};
Z[z].Qi=function(a,b){function c(c,d){this.G=a;this.qa=b;$c[D](this,c,d)}K(c,$c);c[z].Ff=function(){var a={};this.G[n](function(b){a[b[k]()]=b.nc()?null:Vd[b.$()]});return a};c[z].Sg=function(){var a={};this.G[n](function(b){var c=b[k]();b=b.$();var d=this.w()[c];a[c]=0==b?null===d?d:dd(d):2==b?null===d?d:d[Qa]():d},this);return a};var d=J(function(a){var b=this.G.get(a[k]());return 2==b?function(b){b=b[a[k]()];return a.nc()&&null===b?null:b[Qa]()}:1==b?function(b){return a.nc()?(b=b[a[k]()],null===
b?null:b?1:0):b[a[k]()]?1:0}:function(b){return b[a[k]()]}},this),g=J(function(a){var b=a.map(function(a){return d(a.cb)});return function(a){return b.map(function(b){return b(a)})}},this),h={};b[n](function(a){var b=a.l();a=1==a.h[y]?d(a.h[0].cb):g(a.h);h[b]=a});c[z].Rc=function(a){return-1!=a[ob]("#")?this.id():h[bb](a)?h[a](this.w()):null};return c};
function fi(a,b){this.A=new gi(a,b);this.ob=new N;this.Ic=!1}I("lf.schema.Builder",fi,void 0);H=fi[z];
H.Gh=function(a){a.wd()[n](function(b){var c=b.Te;if(!this.ob.s(c))throw new P("SyntaxError","Foreign Key {"+b.Jc+"} refers to invalid table");var c=this.ob.get(c).sb(),d=b.ug;if(!c[bb](d))throw new P("SyntaxError","Foreign Key {"+b.Jc+"} refers to invalid column ");if(a.sb()[b.Me].$()!=c[d].$())throw new P("SyntaxError","Foreign Key {"+b.Jc+"} refers to a column of different type");if(!c[d].Pc())throw new P("SyntaxError","Foreign Key {"+b.Jc+"} refers to a non-unique column");},this)};
H.Fh=function(a){a.wd()[n](function(a){this.ob.get(a.Te).wd()[n](function(c){if(c.Me==a.ug)throw new P("SyntaxError","Foreign Key {"+a.Jc+"} refers to the source of other foreign key.");},this)},this)};H.Bi=function(){this.Ic||(this.ob.c()[n](function(a){this.Gh(a);this.A.xk(a.sb())},this),this.ob.c()[n](function(a){this.Fh(a)},this),this.Eh(),this.ob[Pa](),this.Ic=!0)};
H.Bf=function(a,b){a.lf||(a.lf=!0,a.Qe=!0,a.If[n](function(c){c=b.get(c);if(!c.lf)this.Bf(c,b);else if(c.Qe&&a!=c)throw new P("SyntaxError","There is a loop in the schema");},this));a.Qe=!1};H.Eh=function(){var a=new Xe;this.A.I.H()[n](function(b){a.set(b,new hi(b))},this);this.ob[n](function(b,c){b.wd()[n](function(b){a.get(b.Te).If.add(c)})});Ye(a)[n](function(b){this.Bf(b,a)},this)};function hi(a){this.Qe=this.lf=!1;this.If=new $e;this.ef=a}H.sb=function(){this.Ic||this.Bi();return this.A};
fi[z].getSchema=fi[z].sb;fi[z].Pf=function(){var a=new ud("ns_"+this.A[rb]()),b;ai||(ai=new $h);b=ai;var c=null;b.Ke(a)?c=b.o(a):(c=new $h,b.nb(a,c));return c};fi[z].getGlobal=fi[z].Pf;fi[z].connect=function(a){var b=this.Pf();b.Ke(Bd)||b.nb(Bd,this.sb());return(new X(b)).Aa(a)};fi[z].connect=fi[z].connect;fi[z].Zh=function(a){if(this.ob.s(a)||this.Ic)throw new P("SyntaxError","Table is already created or schema is already finalized.");this.ob.set(a,new Z(a));return this.ob.get(a)};
fi[z].createTable=fi[z].Zh;fi[z].df=function(a){if(this.Ic)throw new P("SyntaxError","Schema is already finalized.");this.A.df(a);return this};fi[z].setPragma=fi[z].df;function gi(a,b){this.B=a;this.Ma=b;this.I=new N;this.yg={gi:!1}}I("lf.schema.DatabaseSchema",gi,void 0);za(gi[z],G("B"));za(gi[z],gi[z][rb]);gi[z].version=G("Ma");gi[z].version=gi[z][Fa];gi[z].gb=function(){return this.I.c()};gi[z].tables=gi[z].gb;
oa(gi[z],function(a){if(!this.I.s(a))throw new P("NotFoundError",a+" is not found in database");return this.I.get(a)});oa(gi[z],gi[z][t]);gi[z].xk=function(a){this.I.set(a[k](),a)};gi[z].xg=G("yg");gi[z].pragma=gi[z].xg;gi[z].df=Cb("yg");I("lf.schema.create",function(a,b){return new fi(a,b)},void 0);}.bind(window))()
