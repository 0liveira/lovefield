var window = this;
(function(){'use strict';function aa(){return function(){}}function ba(a){return function(b){this[a]=b}}function g(a){return function(){return this[a]}}function l(a){return function(){return a}}var m,p=this;function q(a){return void 0!==a}function ca(){}
function da(a){var b=typeof a;if("object"==b)if(a){if(a instanceof Array)return"array";if(a instanceof Object)return b;var c=Object.prototype.toString.call(a);if("[object Window]"==c)return"object";if("[object Array]"==c||"number"==typeof a.length&&"undefined"!=typeof a.splice&&"undefined"!=typeof a.propertyIsEnumerable&&!a.propertyIsEnumerable("splice"))return"array";if("[object Function]"==c||"undefined"!=typeof a.call&&"undefined"!=typeof a.propertyIsEnumerable&&!a.propertyIsEnumerable("call"))return"function"}else return"null";
else if("function"==b&&"undefined"==typeof a.call)return"object";return b}function ea(a){return null===a}function fa(a){return null!=a}function ga(a){var b=da(a);return"array"==b||"object"==b&&"number"==typeof a.length}function ha(a){return"string"==typeof a}function ia(a){return"function"==da(a)}function ja(a){return a[ka]||(a[ka]=++la)}var ka="closure_uid_"+(1E9*Math.random()>>>0),la=0;function ma(a,b,c){return a.call.apply(a.bind,arguments)}
function na(a,b,c){if(!a)throw Error();if(2<arguments.length){var d=Array.prototype.slice.call(arguments,2);return function(){var c=Array.prototype.slice.call(arguments);Array.prototype.unshift.apply(c,d);return a.apply(b,c)}}return function(){return a.apply(b,arguments)}}function oa(a,b,c){oa=Function.prototype.bind&&-1!=Function.prototype.bind.toString().indexOf("native code")?ma:na;return oa.apply(null,arguments)}
function pa(a,b){var c=Array.prototype.slice.call(arguments,1);return function(){var b=c.slice();b.push.apply(b,arguments);return a.apply(this,b)}}function r(a,b){var c=a.split("."),d=p;c[0]in d||!d.execScript||d.execScript("var "+c[0]);for(var e;c.length&&(e=c.shift());)!c.length&&q(b)?d[e]=b:d=d[e]?d[e]:d[e]={}}
function t(a,b){function c(){}c.prototype=b.prototype;a.Ib=b.prototype;a.prototype=new c;a.prototype.constructor=a;a.Jg=function(a,c,f){for(var h=Array(arguments.length-2),k=2;k<arguments.length;k++)h[k-2]=arguments[k];return b.prototype[c].apply(a,h)}};function ra(a){if(Error.captureStackTrace)Error.captureStackTrace(this,ra);else{var b=Error().stack;b&&(this.stack=b)}a&&(this.message=String(a))}t(ra,Error);ra.prototype.name="CustomError";var sa=String.prototype.trim?function(a){return a.trim()}:function(a){return a.replace(/^[\s\xa0]+|[\s\xa0]+$/g,"")};
function ta(a){var b=0,c=sa(String(ua)).split(".");a=sa(String(a)).split(".");for(var d=Math.max(c.length,a.length),e=0;0==b&&e<d;e++){var f=c[e]||"",h=a[e]||"",k=/(\d*)(\D*)/g,n=/(\d*)(\D*)/g;do{var x=k.exec(f)||["","",""],T=n.exec(h)||["","",""];if(0==x[0].length&&0==T[0].length)break;b=va(0==x[1].length?0:parseInt(x[1],10),0==T[1].length?0:parseInt(T[1],10))||va(0==x[2].length,0==T[2].length)||va(x[2],T[2])}while(0==b)}return b}function va(a,b){return a<b?-1:a>b?1:0};function wa(a,b,c){this.fg=c;this.Kf=a;this.zg=b;this.pd=0;this.kd=null}wa.prototype.get=function(){var a;0<this.pd?(this.pd--,a=this.kd,this.kd=a.next,a.next=null):a=this.Kf();return a};wa.prototype.put=function(a){this.zg(a);this.pd<this.fg&&(this.pd++,a.next=this.kd,this.kd=a)};var xa=Array.prototype,ya=xa.indexOf?function(a,b,c){return xa.indexOf.call(a,b,c)}:function(a,b,c){c=null==c?0:0>c?Math.max(0,a.length+c):c;if(ha(a))return ha(b)&&1==b.length?a.indexOf(b,c):-1;for(;c<a.length;c++)if(c in a&&a[c]===b)return c;return-1},za=xa.forEach?function(a,b,c){xa.forEach.call(a,b,c)}:function(a,b,c){for(var d=a.length,e=ha(a)?a.split(""):a,f=0;f<d;f++)f in e&&b.call(c,e[f],f,a)},Aa=xa.map?function(a,b,c){return xa.map.call(a,b,c)}:function(a,b,c){for(var d=a.length,e=Array(d),
f=ha(a)?a.split(""):a,h=0;h<d;h++)h in f&&(e[h]=b.call(c,f[h],h,a));return e},Ba=xa.reduce?function(a,b,c,d){d&&(b=oa(b,d));return xa.reduce.call(a,b,c)}:function(a,b,c,d){var e=c;za(a,function(c,h){e=b.call(d,e,c,h,a)});return e},Ca=xa.some?function(a,b,c){return xa.some.call(a,b,c)}:function(a,b,c){for(var d=a.length,e=ha(a)?a.split(""):a,f=0;f<d;f++)if(f in e&&b.call(c,e[f],f,a))return!0;return!1};function Da(a,b,c){return 2>=arguments.length?xa.slice.call(a,b):xa.slice.call(a,b,c)}
function Ea(a){for(var b=[],c=0;c<a;c++)b[c]=0;return b}function Fa(a){for(var b=[],c=0;c<arguments.length;c++){var d=arguments[c];if("array"==da(d))for(var e=0;e<d.length;e+=8192)for(var f=Fa.apply(null,Da(d,e,e+8192)),h=0;h<f.length;h++)b.push(f[h]);else b.push(d)}return b};function Ga(a){var b=[],c=0,d;for(d in a)b[c++]=a[d];return b};var Ha;a:{var Ia=p.navigator;if(Ia){var Ja=Ia.userAgent;if(Ja){Ha=Ja;break a}}Ha=""}function u(a){return-1!=Ha.indexOf(a)};function Ka(){return u("Opera")||u("OPR")}function La(){return(u("Chrome")||u("CriOS"))&&!Ka()&&!u("Edge")};function Ma(a){p.setTimeout(function(){throw a;},0)}var Na;
function Oa(){var a=p.MessageChannel;"undefined"===typeof a&&"undefined"!==typeof window&&window.postMessage&&window.addEventListener&&!u("Presto")&&(a=function(){var a=document.createElement("IFRAME");a.style.display="none";a.src="";document.documentElement.appendChild(a);var b=a.contentWindow,a=b.document;a.open();a.write("");a.close();var c="callImmediate"+Math.random(),d="file:"==b.location.protocol?"*":b.location.protocol+"//"+b.location.host,a=oa(function(a){if(("*"==d||a.origin==d)&&a.data==
c)this.port1.onmessage()},this);b.addEventListener("message",a,!1);this.port1={};this.port2={postMessage:function(){b.postMessage(c,d)}}});if("undefined"!==typeof a&&!u("Trident")&&!u("MSIE")){var b=new a,c={},d=c;b.port1.onmessage=function(){if(q(c.next)){c=c.next;var a=c.Be;c.Be=null;a()}};return function(a){d.next={Be:a};d=d.next;b.port2.postMessage(0)}}return"undefined"!==typeof document&&"onreadystatechange"in document.createElement("SCRIPT")?function(a){var b=document.createElement("SCRIPT");
b.onreadystatechange=function(){b.onreadystatechange=null;b.parentNode.removeChild(b);b=null;a();a=null};document.documentElement.appendChild(b)}:function(a){p.setTimeout(a,0)}};function Pa(){this.yd=this.mc=null}var Ra=new wa(function(){return new Qa},function(a){a.reset()},100);Pa.prototype.add=function(a,b){var c=Ra.get();c.set(a,b);this.yd?this.yd.next=c:this.mc=c;this.yd=c};Pa.prototype.remove=function(){var a=null;this.mc&&(a=this.mc,this.mc=this.mc.next,this.mc||(this.yd=null),a.next=null);return a};function Qa(){this.next=this.scope=this.Nd=null}Qa.prototype.set=function(a,b){this.Nd=a;this.scope=b;this.next=null};
Qa.prototype.reset=function(){this.next=this.scope=this.Nd=null};function Sa(a,b){Ta||Ua();Va||(Ta(),Va=!0);Wa.add(a,b)}var Ta;function Ua(){if(p.Promise&&p.Promise.resolve){var a=p.Promise.resolve(void 0);Ta=function(){a.then(Xa)}}else Ta=function(){var a=Xa;!ia(p.setImmediate)||p.Window&&p.Window.prototype&&p.Window.prototype.setImmediate==p.setImmediate?(Na||(Na=Oa()),Na(a)):p.setImmediate(a)}}var Va=!1,Wa=new Pa;function Xa(){for(var a=null;a=Wa.remove();){try{a.Nd.call(a.scope)}catch(b){Ma(b)}Ra.put(a)}Va=!1};function v(a,b){this.Ua=0;this.jf=void 0;this.$c=this.cc=this.C=null;this.jd=this.Ld=!1;if(a!=ca)try{var c=this;a.call(b,function(a){Ya(c,2,a)},function(a){Ya(c,3,a)})}catch(d){Ya(this,3,d)}}function Za(){this.next=this.context=this.hc=this.Mc=this.child=null;this.Bd=!1}Za.prototype.reset=function(){this.context=this.hc=this.Mc=this.child=null;this.Bd=!1};var ab=new wa(function(){return new Za},function(a){a.reset()},100);function bb(a,b,c){var d=ab.get();d.Mc=a;d.hc=b;d.context=c;return d}
function w(a){if(a instanceof v)return a;var b=new v(ca);Ya(b,2,a);return b}function cb(a){return new v(function(b,c){c(a)})}function db(a,b,c){eb(a,b,c,null)||Sa(pa(b,a))}function fb(a){return new v(function(b,c){var d=a.length,e=[];if(d)for(var f=function(a,c){d--;e[a]=c;0==d&&b(e)},h=function(a){c(a)},k=0,n;k<a.length;k++)n=a[k],db(n,pa(f,k),h);else b(e)})}function y(){var a,b,c=new v(function(c,e){a=c;b=e});return new gb(c,a,b)}
v.prototype.then=function(a,b,c){return hb(this,ia(a)?a:null,ia(b)?b:null,c)};v.prototype.then=v.prototype.then;v.prototype.$goog_Thenable=!0;v.prototype.re=function(a,b){return hb(this,null,a,b)};function ib(a,b){a.cc||2!=a.Ua&&3!=a.Ua||jb(a);a.$c?a.$c.next=b:a.cc=b;a.$c=b}
function hb(a,b,c,d){var e=bb(null,null,null);e.child=new v(function(a,h){e.Mc=b?function(c){try{var e=b.call(d,c);a(e)}catch(x){h(x)}}:a;e.hc=c?function(b){try{var e=c.call(d,b);!q(e)&&b instanceof kb?h(b):a(e)}catch(x){h(x)}}:h});e.child.C=a;ib(a,e);return e.child}v.prototype.Eg=function(a){this.Ua=0;Ya(this,2,a)};v.prototype.Fg=function(a){this.Ua=0;Ya(this,3,a)};
function Ya(a,b,c){0==a.Ua&&(a==c&&(b=3,c=new TypeError("Promise cannot resolve to itself")),a.Ua=1,eb(c,a.Eg,a.Fg,a)||(a.jf=c,a.Ua=b,a.C=null,jb(a),3!=b||c instanceof kb||lb(a,c)))}function eb(a,b,c,d){if(a instanceof v)return ib(a,bb(b||ca,c||null,d)),!0;var e;if(a)try{e=!!a.$goog_Thenable}catch(h){e=!1}else e=!1;if(e)return a.then(b,c,d),!0;e=typeof a;if("object"==e&&null!=a||"function"==e)try{var f=a.then;if(ia(f))return mb(a,f,b,c,d),!0}catch(h){return c.call(d,h),!0}return!1}
function mb(a,b,c,d,e){function f(a){k||(k=!0,d.call(e,a))}function h(a){k||(k=!0,c.call(e,a))}var k=!1;try{b.call(a,h,f)}catch(n){f(n)}}function jb(a){a.Ld||(a.Ld=!0,Sa(a.Pf,a))}function nb(a){var b=null;a.cc&&(b=a.cc,a.cc=b.next,b.next=null);a.cc||(a.$c=null);return b}
v.prototype.Pf=function(){for(var a=null;a=nb(this);){var b=this.Ua,c=this.jf;if(3==b&&a.hc&&!a.Bd)for(var d=void 0,d=this;d&&d.jd;d=d.C)d.jd=!1;if(a.child)a.child.C=null,ob(a,b,c);else try{a.Bd?a.Mc.call(a.context):ob(a,b,c)}catch(e){pb.call(null,e)}ab.put(a)}this.Ld=!1};function ob(a,b,c){2==b?a.Mc.call(a.context,c):a.hc&&a.hc.call(a.context,c)}function lb(a,b){a.jd=!0;Sa(function(){a.jd&&pb.call(null,b)})}var pb=Ma;function kb(a){ra.call(this,a)}t(kb,ra);kb.prototype.name="cancel";
function gb(a,b,c){this.ha=a;this.resolve=b;this.reject=c};/*

 Copyright 2014 The Lovefield Project Authors. All Rights Reserved.

 Licensed under the Apache License, Version 2.0 (the "License");
 you may not use this file except in compliance with the License.
 You may obtain a copy of the License at

     http://www.apache.org/licenses/LICENSE-2.0

 Unless required by applicable law or agreed to in writing, software
 distributed under the License is distributed on an "AS IS" BASIS,
 WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 See the License for the specific language governing permissions and
 limitations under the License.
*/
function z(a,b){this.pa=a;this.s=b||this.He()}var qb=0;m=z.prototype;m.id=g("pa");function rb(a){return a.s}m.He=function(){return{}};m.sf=g("s");m.Fa=function(){return{id:this.pa,value:this.sf()}};m.Fb=function(a){return"#"==a.substr(-1)?this.pa:null};function sb(a){return new z(a.id,a.value)}function tb(a){return new z(qb++,a||{})}function ub(a){if(null==a)return null;a=new Uint8Array(a);for(var b="",c=0;c<a.length;++c)var d=a[c].toString(16),b=b+(2>d.length?"0"+d:d);return b};function vb(a){this.type=a}function wb(a){z.call(this,-1,a)}t(wb,z);function xb(a,b,c,d){c=c||function(a,b){return a==b};d=d||function(b){return a[b]};for(var e=a.length,f=b.length,h=[],k=0;k<e+1;k++)h[k]=[],h[k][0]=0;for(var n=0;n<f+1;n++)h[0][n]=0;for(k=1;k<=e;k++)for(n=1;n<=f;n++)c(a[k-1],b[n-1])?h[k][n]=h[k-1][n-1]+1:h[k][n]=Math.max(h[k-1][n],h[k][n-1]);for(var x=[],k=e,n=f;0<k&&0<n;)c(a[k-1],b[n-1])?(x.unshift(d(k-1,n-1)),k--,n--):h[k-1][n]>h[k][n-1]?k--:n--;return x}function yb(a){return Ba(arguments,function(a,c){return a+c},0)}
function zb(a){return yb.apply(null,arguments)/arguments.length}function Ab(a){var b=arguments.length;if(2>b)return 0;var c=zb.apply(null,arguments);return yb.apply(null,Aa(arguments,function(a){return Math.pow(a-c,2)}))/(b-1)}function Bb(a){return Math.sqrt(Ab.apply(null,arguments))};var Cb="StopIteration"in p?p.StopIteration:{message:"StopIteration",stack:""};function Db(){}Db.prototype.next=function(){throw Cb;};Db.prototype.nc=function(){return this};function Eb(a){if(a instanceof Db)return a;if("function"==typeof a.nc)return a.nc(!1);if(ga(a)){var b=0,c=new Db;c.next=function(){for(;;){if(b>=a.length)throw Cb;if(b in a)return a[b++];b++}};return c}throw Error("Not implemented");}
function Fb(a,b){if(ga(a))try{za(a,b,void 0)}catch(c){if(c!==Cb)throw c;}else{a=Eb(a);try{for(;;)b.call(void 0,a.next(),void 0,a)}catch(c){if(c!==Cb)throw c;}}}function Gb(a){if(Ca(arguments,function(a){return!a.length})||!arguments.length)return new Db;var b=new Db,c=arguments,d=Ea(c.length);b.next=function(){if(d){for(var a=Aa(d,function(a,b){return c[b][a]}),b=d.length-1;0<=b;b--){if(d[b]<c[b].length-1){d[b]++;break}if(0==b){d=null;break}d[b]=0}return a}throw Cb;};return b};function Hb(a,b){this.o={};this.b=[];this.Pa=this.Bb=0;var c=arguments.length;if(1<c){if(c%2)throw Error("Uneven number of arguments");for(var d=0;d<c;d+=2)this.set(arguments[d],arguments[d+1])}else a&&this.addAll(a)}m=Hb.prototype;m.Ac=g("Bb");m.za=function(){Ib(this);for(var a=[],b=0;b<this.b.length;b++)a.push(this.o[this.b[b]]);return a};function Jb(a){Ib(a);return a.b.concat()}m.Ma=function(a){return Kb(this.o,a)};m.md=function(){return 0==this.Bb};
m.clear=function(){this.o={};this.Pa=this.Bb=this.b.length=0};m.remove=function(a){return Kb(this.o,a)?(delete this.o[a],this.Bb--,this.Pa++,this.b.length>2*this.Bb&&Ib(this),!0):!1};function Ib(a){if(a.Bb!=a.b.length){for(var b=0,c=0;b<a.b.length;){var d=a.b[b];Kb(a.o,d)&&(a.b[c++]=d);b++}a.b.length=c}if(a.Bb!=a.b.length){for(var e={},c=b=0;b<a.b.length;)d=a.b[b],Kb(e,d)||(a.b[c++]=d,e[d]=1),b++;a.b.length=c}}m.get=function(a,b){return Kb(this.o,a)?this.o[a]:b};
m.set=function(a,b){Kb(this.o,a)||(this.Bb++,this.b.push(a),this.Pa++);this.o[a]=b};m.addAll=function(a){var b;if(a instanceof Hb)b=Jb(a),a=a.za();else{b=[];var c=0,d;for(d in a)b[c++]=d;a=Ga(a)}for(c=0;c<b.length;c++)this.set(b[c],a[c])};m.forEach=function(a,b){for(var c=Jb(this),d=0;d<c.length;d++){var e=c[d],f=this.get(e);a.call(b,f,e,this)}};m.clone=function(){return new Hb(this)};
m.nc=function(a){Ib(this);var b=0,c=this.Pa,d=this,e=new Db;e.next=function(){if(c!=d.Pa)throw Error("The map has changed since the iterator was created");if(b>=d.b.length)throw Cb;var e=d.b[b++];return a?e:d.o[e]};return e};function Kb(a,b){return Object.prototype.hasOwnProperty.call(a,b)};function Lb(){return u("iPhone")&&!u("iPod")&&!u("iPad")};var Mb=Ka(),Nb=u("Trident")||u("MSIE"),Ob=u("Edge"),Pb=u("Gecko")&&!(-1!=Ha.toLowerCase().indexOf("webkit")&&!u("Edge"))&&!(u("Trident")||u("MSIE"))&&!u("Edge"),Qb=-1!=Ha.toLowerCase().indexOf("webkit")&&!u("Edge");function Rb(){var a=Ha;if(Pb)return/rv\:([^\);]+)(\)|;)/.exec(a);if(Ob)return/Edge\/([\d\.]+)/.exec(a);if(Nb)return/\b(?:MSIE|rv)[: ]([^\);]+)(\)|;)/.exec(a);if(Qb)return/WebKit\/(\S+)/.exec(a)}
var ua=function(){if(Mb&&p.opera){var a;var b=p.opera.version;try{a=b()}catch(c){a=b}return a}a="";(b=Rb())&&(a=b?b[1]:"");return Nb&&(b=(b=p.document)?b.documentMode:void 0,b>parseFloat(a))?String(b):a}(),Sb={};var Tb=Lb()||u("iPod"),Ub=u("iPad");!u("Android")||La()||u("Firefox")||Ka();var Vb=La(),Wb=u("Safari")&&!(La()||u("Coast")||Ka()||u("Edge")||u("Silk")||u("Android"))&&!(Lb()||u("iPad")||u("iPod"));/*

 Copyright 2015 The Lovefield Project Authors. All Rights Reserved.

 Licensed under the Apache License, Version 2.0 (the "License");
 you may not use this file except in compliance with the License.
 You may obtain a copy of the License at

     http://www.apache.org/licenses/LICENSE-2.0

 Unless required by applicable law or agreed to in writing, software
 distributed under the License is distributed on an "AS IS" BASIS,
 WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 See the License for the specific language governing permissions and
 limitations under the License.
*/
function Yb(){this.le=Wb||Ub||Tb;this.Yf=!(this.le||Nb&&!Sb[10]&&!(Sb[10]=0<=ta(10)));!Nb||Sb[11]||(Sb[11]=0<=ta(11));this.Hg=Vb||Wb;this.jg=q(window.Map)&&q(window.Map.prototype.values)&&q(window.Map.prototype.forEach)&&!this.le;this.kg=q(window.Set)&&q(window.Set.prototype.values)&&q(window.Set.prototype.forEach)&&!this.le}var Zb;function $b(){q(Zb)||(Zb=new Yb);return Zb};function A(){this.o=new Hb;Object.defineProperty(this,"size",{get:function(){return this.o.Ac()}})}A.prototype.clear=function(){this.o.clear()};A.prototype.clear=A.prototype.clear;A.prototype.delete=function(a){return this.o.remove(a)};A.prototype["delete"]=A.prototype.delete;A.prototype.forEach=function(a,b){return this.o.forEach(a,b)};A.prototype.forEach=A.prototype.forEach;A.prototype.get=function(a){return this.o.get(a)};A.prototype.get=A.prototype.get;A.prototype.has=function(a){return this.o.Ma(a)};
A.prototype.has=A.prototype.has;A.prototype.set=function(a,b){return this.o.set(a,b)};A.prototype.set=A.prototype.set;var ac=$b().jg;function B(){return ac?new window.Map:new A}function bc(a){if(a instanceof A)return Jb(a.o);var b=0,c=Array(a.size);a.forEach(function(a,e){c[b++]=e});return c}function C(a){if(a instanceof A)return a.o.za();var b=0,c=Array(a.size);a.forEach(function(a){c[b++]=a});return c};var cc={};r("lf.TransactionType",cc);cc.READ_ONLY=0;cc.READ_WRITE=1;function dc(a,b){this.Ra=a;this.tf=b;this.Y=y()}dc.prototype.ia=function(){try{ec(this.Ra)}catch(a){return cb(a)}return(0==this.tf?this.qc():fc(this)).then(function(a){this.Ra.ia();return a}.bind(this))};function fc(a){gc(a);hc(a);return a.qc()}
function gc(a){a.Ra.rb.forEach(function(a,c){var d=this.Ra.$().get(c),d=this.H(d.getName(),d.Db.bind(d)),e=C(a.wa).map(function(a){return a.id()});0<e.length&&d.remove(e).re(this.Pd,this);e=C(a.na).map(function(a){return a[1]}).concat(C(a.ta));d.put(e).re(this.Pd,this)},a)}function hc(a){ic(a.Ra).forEach(function(a){var c=this.H(a.getName(),sb),d;c.get([-1]).then(function(a){d=a;return c.remove([])}).then(function(){c.put(d);c.put(a.Fa())},this.Pd.bind(this))},a)}dc.prototype.Pd=function(a){this.Y.reject(a)};function jc(a){this.Ag=a}jc.prototype.toString=g("Ag");var kc=new jc("backstore"),lc=new jc("cache"),mc=new jc("indexstore"),nc=new jc("engine"),oc=new jc("runner"),pc=new jc("observerregistry"),qc=new jc("schema");function rc(a){if("function"==typeof a.za)return a.za();if(ha(a))return a.split("");if(ga(a)){for(var b=[],c=a.length,d=0;d<c;d++)b.push(a[d]);return b}return Ga(a)};function sc(a){this.o=new Hb;a&&this.addAll(a)}function tc(a){var b=typeof a;return"object"==b&&a||"function"==b?"o"+ja(a):b.substr(0,1)+a}m=sc.prototype;m.Ac=function(){return this.o.Ac()};m.add=function(a){this.o.set(tc(a),a)};m.addAll=function(a){a=rc(a);for(var b=a.length,c=0;c<b;c++)this.add(a[c])};m.remove=function(a){return this.o.remove(tc(a))};m.clear=function(){this.o.clear()};m.md=function(){return this.o.md()};m.contains=function(a){return this.o.Ma(tc(a))};m.za=function(){return this.o.za()};
m.clone=function(){return new sc(this)};m.nc=function(){return this.o.nc(!1)};function uc(a){this.Wb=new sc(a);Object.defineProperty(this,"size",{get:function(){return this.Wb.Ac()}})}uc.prototype.add=function(a){this.Wb.add(a)};uc.prototype.add=uc.prototype.add;uc.prototype.clear=function(){this.Wb.clear()};uc.prototype.clear=uc.prototype.clear;uc.prototype.delete=function(a){return this.Wb.remove(a)};uc.prototype["delete"]=uc.prototype.delete;uc.prototype.forEach=function(a,b){this.Wb.za().forEach(a,b)};uc.prototype.has=function(a){return this.Wb.contains(a)};
uc.prototype.has=uc.prototype.has;var vc=$b().kg;function D(a){return vc?q(a)?new window.Set(a):new window.Set:new uc(a)}function wc(a){if(a instanceof uc)return a.Wb.za();var b=0,c=Array(a.size);a.forEach(function(a){c[b++]=a});return c}function xc(a,b){if(b.size>a.size)return!1;var c=!0;b.forEach(function(b){c=c&&a.has(b)});return c};function yc(a,b){this.pa=a;this.s=b||{}}function zc(a){var b=D();a.forEach(function(a){b.add(a>>9)});return wc(b)}yc.prototype.W=g("pa");function Ac(a,b){b.forEach(function(a){this.s[a.id()]=a.Fa()},a)}function Bc(a,b){b.forEach(function(a){delete this.s[a]},a)}yc.prototype.Fa=function(){return{id:this.pa,value:JSON.stringify(this.s)}};function Cc(a){return new yc(a.id,JSON.parse(a.value))};function Dc(a,b,c){this.ba=a;this.Lb=b;this.kf=c}m=Dc.prototype;m.get=function(a){if(0==a.length)return this.zc();var b=this.Lb;return Ec(this,a).then(function(c){return a.map(function(a){var e=c.get(a>>9);return b(e.s[a])})})};function Ec(a,b){var c=B(),d=y(),e=zc(b).map(function(a){return new v(function(b,d){var e;try{e=this.ba.get(a)}catch(x){d(x);return}e.onerror=d;e.onsuccess=function(a){a=Cc(a.target.result);c.set(a.W(),a);b()}},this)},a);fb(e).then(function(){d.resolve(c)});return d.ha}
m.zc=function(){return new v(function(a,b){var c=[],d;try{d=this.ba.openCursor()}catch(e){b(e);return}d.onerror=b;d.onsuccess=function(){var b=d.result;if(b){var f;f=Cc(b.value).s;for(var h in f)c.push(this.Lb(f[h]));b.continue()}else a(c)}.bind(this)},this)};m.Sb=function(a){return new v(function(b,c){var d;try{d=a()}catch(e){c(e);return}d.onsuccess=b;d.onerror=c},this)};
m.put=function(a){if(0==a.length)return w();var b=B();a.forEach(function(a){var d;d=a.id()>>9;var e=b.get(d)||null;null===e&&(e=this.kf(this.ba.name,d));Ac(e,[a]);b.set(d,e)},this);a=C(b).map(function(a){return this.Sb(function(){return this.ba.put(a.Fa())}.bind(this))},this);return fb(a)};
m.remove=function(a){if(0==a.length)return this.Sb(function(){return this.ba.clear()}.bind(this));var b=B();a.forEach(function(a){var d=a>>9,e=b.get(d)||null;null===e&&(e=this.kf(this.ba.name,d));Bc(e,[a]);b.set(d,e)},this);a=C(b).map(function(a){return this.Sb(function(){return 0==Object.keys(a.s).length?this.ba.delete(a.W()):this.ba.put(a.Fa())}.bind(this))},this);return fb(a)};function Fc(a,b,c){a=a.j(lc);var d=[c<<9,(c+1<<9)-1];b=a.$a(b,d[0],d[1]);c=new yc(c);Ac(c,b);return c}
function Gc(a,b){return new yc(b)};function Hc(){};function Ic(a){this.U=a.j(lc);this.D=a.j(mc);this.i=a.j(qc)}Ic.prototype.update=function(a){a.forEach(function(a){Jc(this,a);Kc(this,a)},this)};function Kc(a,b){var c=b.getName();b.wa.forEach(function(a,b){this.U.remove(c,b)},a);b.ta.forEach(function(a){this.U.set(c,a)},a);b.na.forEach(function(a){this.U.set(c,a[1])},a)}function Jc(a,b){var c=a.i.table(b.getName());Lc(b).forEach(function(a){Mc(this,c,a)},a)}
function Mc(a,b,c){var d=a.D.kc.get(b.getName())||[],e=0;d.forEach(function(a){try{Nc(a,c),e++}catch(b){throw d.slice(0,e).forEach(function(a){Nc(a,[c[1],c[0]])},this),b;}},a)}function Nc(a,b){var c=null===b[1]?void 0:b[1].Fb(a.getName()),d=null===b[0]?void 0:b[0].Fb(a.getName());if(!q(d)&&q(c))a.add(c,b[1].id());else if(q(d)&&q(c)){if(null===c||null===d){if(c==d)return}else if(0==a.rc().compare(d,c))return;a.add(c,b[1].id());a.remove(d,b[0].id())}else q(d)&&!q(c)&&a.remove(d,b[0].id())};var Oc={};r("lf.ConstraintAction",Oc);Oc.RESTRICT=0;Oc.CASCADE=1;var Pc={};r("lf.ConstraintTiming",Pc);Pc.IMMEDIATE=0;Pc.DEFERRABLE=1;var Qc={};r("lf.Order",Qc);Qc.DESC=0;Qc.ASC=1;var Rc={};r("lf.Type",Rc);Rc.ARRAY_BUFFER=0;Rc.BOOLEAN=1;Rc.DATE_TIME=2;Rc.INTEGER=3;Rc.NUMBER=4;Rc.STRING=5;Rc.OBJECT=6;var Sc={0:null,1:!1,2:Object.freeze(new Date(0)),3:0,4:0,5:"",6:null};r("lf.type.DEFAULT_VALUES",Sc);function E(a,b){this.code=a;this.message="http://sn.im/2a0j3wn?c="+a;if(1<arguments.length)for(var c=1;c<=Math.min(4,arguments.length-1);++c)this.message+="&p"+(c-1)+"="+encodeURIComponent(arguments[c].toString().slice(0,64))}t(E,Error);function Uc(){this.o=B();this.size=0}m=Uc.prototype;m.has=function(a){return this.o.has(a)};m.set=function(a,b){var c=this.o.get(a)||null;null===c&&(c=D(),this.o.set(a,c));c.has(b)||(c.add(b),this.size++);return this};m.Vb=function(a,b){var c=this.o.get(a)||null;null===c&&(c=D(),this.o.set(a,c));b.forEach(function(a){c.has(a)||(c.add(a),this.size++)},this);return this};m.Yd=function(a){a.keys().forEach(function(b){var c=a.get(b);this.Vb(b,c)},this);return this};
m.delete=function(a,b){var c=this.o.get(a,null);if(null===c)return!1;var d=c.delete(b);d&&(--this.size,0==c.size&&this.o.delete(a));return d};m.get=function(a){a=this.o.get(a)||null;return null===a?null:wc(a)};m.clear=function(){this.o.clear();this.size=0};m.keys=function(){return bc(this.o)};m.values=function(){var a=[];this.o.forEach(function(b){a.push.apply(a,wc(b))});return a};function Vc(a){this.D=a.j(mc);this.i=a.j(qc);this.U=a.j(lc);this.cd=null}function Wc(a,b,c){var d=b.Eb().mg;c.forEach(function(a){d.forEach(function(b){if(null==a.s[b.getName()])throw new E(202,b.m());},this)},a)}function Xc(a,b,c,d){b.Eb().Od().forEach(function(a){a.timing==d&&Yc(this,a,c)},a)}function Yc(a,b,c){var d=Zc(a,b);c.forEach(function(a){if($c(a[0],a[1],b.name)&&(a=a[1].s[b.gb],null!==a&&!d.Ma(a)))throw new E(203,b.name);},a)}
function Zc(a,b){null===a.cd&&(a.cd=B());var c=a.cd.get(b.name)||null;null===c&&(c=a.i.table(b.Sa)[b.ic].xa(),c=a.D.get(c.m()),a.cd.set(b.name,c));return c}function $c(a,b,c){return(null===a?null!==b:null===b)||a.Fb(c)!=b.Fb(c)}function ad(a,b,c,d){b=bd(a.i.info(),b.getName(),0);null!==b&&(b=b.filter(function(a){return a.timing==d}),0!=b.length&&cd(a,b,c,function(a,b,c){if(b.Ma(c))throw new E(203,a.name);}))}
function dd(a,b,c){b=bd(a.i.info(),b.getName(),1);if(null===b)return null;var d=new Uc;cd(a,b,c,function(a,b,c){b=b.get(c);0<b.length&&d.Vb(a.Ce,b)});return d}function ed(a,b,c){var d=new Uc;cd(a,c,b,function(a,b,c,k){b.get(c).forEach(function(b){d.set(b,{Md:a,rg:k[1]})})});return d}function cd(a,b,c,d){b.forEach(function(a){var b=this.D.get(a.name),h=Zc(this,a);c.forEach(function(c){$c(c[0],c[1],h.getName())&&d(a,b,c[0].s[a.ic],c)},this)},a)}
function fd(a,b,c,d){0!=c.length&&(c=c.map(function(a){return[null,a]}),Xc(a,b,c,d))}function gd(a,b,c,d){0!=c.length&&(Xc(a,b,c,d),ad(a,b,c,d))}function hd(a,b,c,d){0!=c.length&&(c=c.map(function(a){return[a,null]}),ad(a,b,c,d))}
function id(a,b,c){var d={qe:[],mf:new Uc},e=new Uc;e.Vb(b.getName(),c.map(function(a){return a.id()}));do{var f=new Uc;e.keys().forEach(function(a){var b=this.i.table(a);a=e.get(a).map(function(a){return[this.U.get(a),null]},this);b=dd(this,b,a);null!==b&&(d.qe.unshift.apply(d.qe,b.keys()),f.Yd(b))},a);e=f;d.mf.Yd(e)}while(0<e.size);return d};function jd(a){this.ta=B();this.na=B();this.wa=B();this.w=a}m=jd.prototype;m.getName=g("w");m.add=function(a){if(this.wa.has(a.id())){var b=[this.wa.get(a.id()),a];this.na.set(a.id(),b);this.wa.delete(a.id())}else this.ta.set(a.id(),a)};m.modify=function(a){var b=a[1],c=a[0].id();this.ta.has(c)?this.ta.set(c,b):(this.na.has(c)&&(a=[this.na.get(a[0].id())[0],b]),this.na.set(c,a))};
m.delete=function(a){if(this.ta.has(a.id()))this.ta.delete(a.id());else if(this.na.has(a.id())){var b=this.na.get(a.id())[0];this.na.delete(a.id());this.wa.set(a.id(),b)}else this.wa.set(a.id(),a)};m.Yd=function(a){a.ta.forEach(function(a){this.add(a)},this);a.na.forEach(function(a){this.modify(a)},this);a.wa.forEach(function(a){this.delete(a)},this)};
function Lc(a){var b=[];a.ta.forEach(function(a){b.push([null,a])});a.na.forEach(function(a){b.push(a)});a.wa.forEach(function(a){b.push([a,null])});return b}m.toString=function(){return"["+bc(this.ta).toString()+"], ["+bc(this.na).toString()+"], ["+bc(this.wa).toString()+"]"};function kd(a){var b=new jd(a.w);a.ta.forEach(function(a){b.delete(a)});a.wa.forEach(function(a){b.add(a)});a.na.forEach(function(a){b.modify([a[1],a[0]])});return b}
m.md=function(){return 0==this.ta.size&&0==this.wa.size&&0==this.na.size};function ld(a,b){this.aa=B();b.forEach(function(a){this.aa.set(a.getName(),a)},this);this.i=a.j(qc);this.U=a.j(lc);this.D=a.j(mc);this.ua=new Vc(a);this.ld=new Ic(a);this.rb=B()}function ic(a){var b=[];bc(a.rb).map(function(a){return this.aa.get(a)},a).forEach(function(a){a.zb()&&(a.ya().forEach(function(a){b.push(this.D.get(a.m()))},this),b.push(this.D.get(a.getName()+".#")))},a);return b}m=ld.prototype;m.$=g("aa");
function md(a){var b=[];a.aa.forEach(function(a){a.zb()&&(a.ya().forEach(function(a){b.push(a.m())}),b.push(a.getName()+".#"))});return b}m.xb=function(a,b){nd(this,a);Wc(this.ua,a,b);fd(this.ua,a,b,0);for(var c=0;c<b.length;c++)od(this,a,[null,b[c]])};
function od(a,b,c){var d=b.getName(),e=a.rb.get(d)||new jd(d);a.rb.set(d,e);try{Mc(a.ld,b,c)}catch(h){throw h;}b=c[0];var f=c[1];null===b&&null!==f?(a.U.set(d,f),e.add(f)):null!==b&&null!==f?(a.U.set(d,f),e.modify(c)):null!==b&&null===f&&(a.U.remove(d,b.id()),e.delete(b))}m.update=function(a,b){nd(this,a);Wc(this.ua,a,b);var c=b.map(function(a){return[this.U.get(a.id()),a]},this);pd(this,a,c);gd(this.ua,a,c,0);c.forEach(function(b){od(this,a,b)},this)};
m.Rd=function(a,b){nd(this,a);Wc(this.ua,a,b);for(var c=0;c<b.length;c++){var d=b[c],e=null,f,h=a.Eb().fd();if(null===h)f=null;else{f=this.ua;var h=h.m(),k=d.Fb(h);f=f.D.get(h).get(k);f=0==f.length?null:f[0]}null!=f?(e=this.U.get(f),d.pa=f,gd(this.ua,a,[[e,d]],0)):fd(this.ua,a,[d],0);od(this,a,[e,d])}};m.remove=function(a,b){nd(this,a);qd(this,a,b);hd(this.ua,a,b,0);for(var c=0;c<b.length;c++)od(this,a,[b[c],null])};
function pd(a,b,c){b=bd(a.i.info(),b.getName(),1);if(null!==b){var d=ed(a.ua,c,b);d.keys().forEach(function(a){d.get(a).forEach(function(b){var c=this.i.table(b.Md.Ce),d=this.U.get(a),n=c.Db(d.Fa());n.s[b.Md.gb]=b.rg.s[b.Md.ic];od(this,c,[d,n])},this)},a)}}
function qd(a,b,c){if(null!==bd(a.i.info(),b.getName(),1)){b=id(a.ua,b,c);var d=b.mf;b.qe.forEach(function(a){var b=this.i.table(a);a=d.get(a).map(function(a){return this.U.get(a)},this);hd(this.ua,b,a,0);a.forEach(function(a){od(this,b,[a,null])},this)},a)}}function ec(a){a.rb.forEach(function(a){var c=this.aa.get(a.getName());fd(this.ua,c,C(a.ta),1);hd(this.ua,c,C(a.wa),1);gd(this.ua,c,C(a.na),1)},a)}m.ia=aa();m.Hb=function(){var a=C(this.rb).map(function(a){return kd(a)});this.ld.update(a)};
function nd(a,b){if(!a.aa.has(b.getName()))throw new E(106,b.getName());};function rd(a,b,c,d){this.c=a;this.A=b;this.da=this.c==F?!1:c;this.ma=this.A==F?!1:d}var F=new (aa());rd.prototype.toString=function(){return(this.da?"(":"[")+(this.c==F?"unbound":this.c)+", "+(this.A==F?"unbound":this.A)+(this.ma?")":"]")};function sd(a){if(td(a))return[];var b=null,c=null;a.c==F||(b=new rd(F,a.c,!1,!a.da));a.A==F||(c=new rd(a.A,F,!a.ma,!1));return[b,c].filter(function(a){return null!==a})}rd.prototype.reverse=function(){return new rd(this.A,this.c,this.ma,this.da)};
function ud(a,b){var c=vd(a.c,b.c,!0,a.da,b.da);if(0==c)return!0;var d=-1==c?a:b,c=1==c?a:b;return d.A==F||d.A>c.c||d.A==c.c&&!d.ma&&!c.da}function wd(){return new rd(F,F,!1,!1)}function td(a){return a.c==F&&a.A==F}function xd(a){return a.c==a.A&&a.c!=F&&!a.da&&!a.ma}rd.prototype.contains=function(a){var b=this.A==F||a<this.A||a==this.A&&!this.ma;return(this.c==F||a>this.c||a==this.c&&!this.da)&&b};
function vd(a,b,c,d,e){function f(a){return c?a:1==a?-1:1}d=d||!1;e=e||!1;return a==F?b==F?(d?!e:e)?d?f(1):f(-1):0:f(-1):b==F?f(1):a<b?-1:a==b?(d?!e:e)?d?f(1):f(-1):0:1}function yd(a,b){var c=vd(a.c,b.c,!0,a.da,b.da);0==c&&(c=vd(a.A,b.A,!1,a.ma,b.ma));return c};function G(a,b){this.entries=a;this.L=D(b);this.Ya=null}function H(a){return wc(a.L)}function zd(a){return a.entries.map(function(a){return a.sa.s})}function Ad(a){return a.entries.map(function(a){return a.sa.id()})}function Bd(a,b){return a.Ya.get(b.m())}var Cd=null;function Dd(){null===Cd&&(Cd=new G([],[]));return Cd}
function Ed(a){if(0==a.length)return Dd();for(var b=a.reduce(function(a,b){return a+b.entries.length},0),c=Array(b),d=0,b=a.map(function(a){var b=B();a.entries.forEach(function(a){c[d++]=a;b.set(a.id,a)});return b}),e=B(),f=0;f<c.length;f++)b.every(function(a){return a.has(c[f].id)})&&e.set(c[f].id,c[f]);return new G(C(e),wc(a[0].L))}function Fd(a){if(0==a.length)return Dd();var b=B();a.forEach(function(a){a.entries.forEach(function(a){b.set(a.id,a)})});return new G(C(b),wc(a[0].L))}
function Gd(a,b){var c=1<b.length,d=a.map(function(a){return new Hd(a,c)});return new G(d,b)}function Hd(a,b){this.sa=a;this.id=Id++;this.Ud=b}var Id=0;function I(a,b){var c=b.Za();return null!==c&&a.sa.s.hasOwnProperty(c)?a.sa.s[c]:a.Ud?a.sa.s[J(b.H())][b.getName()]:a.sa.s[b.getName()]}function Jd(a,b,c){var d=b.Za();if(null!=d)a.sa.s[d]=c;else if(a.Ud){var d=J(b.H()),e=a.sa.s[d];null==e&&(e={},a.sa.s[d]=e);e[b.getName()]=c}else a.sa.s[b.getName()]=c}
function Kd(a,b,c,d){function e(a,b){if(a.Ud){var c=a.sa.s,d;for(d in c)f[d]=c[d]}else f[b[0]]=a.sa.s}var f={};e(a,b);e(c,d);a=new z(-1,f);return new Hd(a,!0)};r("lf.bind",function(a){return new Ld(a)});function Ld(a){this.fa=a}r("lf.Binder",Ld);Ld.prototype.xa=g("fa");function Md(){this.Te=Nd();var a=Od();this.fc=B();this.fc.set(1,Pd());this.fc.set(2,Qd());this.fc.set(4,a);this.fc.set(3,a);this.fc.set(5,Rd())}Md.Bc=function(){return Md.Pe?Md.Pe:Md.Pe=new Md};function Sd(a,b,c){return(a.fc.get(b)||null).get(c)||null}function Nd(){function a(a){return a}var b=B();b.set(1,function(a){return null===a?null:a?1:0});b.set(2,function(a){return null===a?null:a.getTime()});b.set(3,a);b.set(4,a);b.set(5,a);return b}
function Pd(){var a=B();a.set("eq",function(a,c){return a==c});a.set("neq",function(a,c){return a!=c});return a}
function Od(){var a=Pd();a.set("between",function(a,c){return null===a||null===c[0]||null===c[1]?!1:a>=c[0]&&a<=c[1]});a.set("gte",function(a,c){return null===a||null===c?!1:a>=c});a.set("gt",function(a,c){return null===a||null===c?!1:a>c});a.set("in",function(a,c){return-1!=c.indexOf(a)});a.set("lte",function(a,c){return null===a||null===c?!1:a<=c});a.set("lt",function(a,c){return null===a||null===c?!1:a<c});return a}
function Rd(){var a=Od();a.set("match",function(a,c){return null===a||null===c?!1:(new RegExp(c)).test(a)});return a}
function Qd(){var a=B();a.set("between",function(a,c){return null===a||null===c[0]||null===c[1]?!1:a.getTime()>=c[0].getTime()&&a.getTime()<=c[1].getTime()});a.set("eq",function(a,c){return(null===a?-1:a.getTime())==(null===c?-1:c.getTime())});a.set("gte",function(a,c){return null===a||null===c?!1:a.getTime()>=c.getTime()});a.set("gt",function(a,c){return null===a||null===c?!1:a.getTime()>c.getTime()});a.set("in",function(a,c){return c.some(function(c){return c.getTime()==a.getTime()})});a.set("lte",
function(a,c){return null===a||null===c?!1:a.getTime()<=c.getTime()});a.set("lt",function(a,c){return null===a||null===c?!1:a.getTime()<c.getTime()});a.set("neq",function(a,c){return(null===a?-1:a.getTime())!=(null===c?-1:c.getTime())});return a};function K(){this.h=this.C=null}var Td=[];K.prototype.getParent=g("C");K.prototype.ib=function(){for(var a=this;!ea(a.getParent());)a=a.getParent();return a};function Ud(a){for(var b=0;!ea(a.getParent());)b++,a=a.getParent();return b}function L(a){return a.h||Td}function Vd(a,b){return L(a)[b]||null}function Wd(a,b,c){b.C=a;null===a.h?a.h=[b]:a.h.splice(c,0,b)}function Xd(a,b){b.C=a;null===a.h?a.h=[b]:a.h.push(b)}
function Yd(a,b){var c=a.h&&a.h[b];return c?(c.C=null,a.h.splice(b,1),0==a.h.length&&(a.h=null),c):null}K.prototype.removeChild=function(a){return Yd(this,L(this).indexOf(a))};function Zd(a,b,c){Vd(a,c).C=null;b.C=a;a.h[c]=b}function $d(a,b,c){!1!==b.call(c,a)&&L(a).forEach(function(a){$d(a,b,c)})};function ae(){K.call(this);this.pa=be++}t(ae,K);var be=0;ae.prototype.W=g("pa");function ce(a,b,c){ae.call(this);this.O=a;this.value=b;this.G=c;this.vc=Sd(Md.Bc(),this.O.I(),this.G);this.ab=!1;this.bc=b}t(ce,ae);m=ce.prototype;m.Kb=function(){var a=new ce(this.O,this.value,this.G);a.bc=this.bc;a.vd(this.ab);var b=this.W();a.pa=b;return a};m.hb=function(a){return null!=a?(a.push(this.O),a):[this.O]};m.vd=ba("ab");function de(a){var b=!1;a.value instanceof Ld||(b="array"==da(a.value)?!a.value.some(function(a){return a instanceof Ld}):!0);if(!b)throw new E(501);}
m.eval=function(a){de(this);if("in"==this.G)return ee(this,a);var b=a.entries.filter(function(a){return this.vc(I(a,this.O),this.value)!=this.ab},this);return new G(b,H(a))};m.bind=function(a){if(this.bc instanceof Ld){var b=this.bc.xa();if(a.length<=b)throw new E(510);this.value=a[b]}else"array"==da(this.bc)&&(this.value=this.bc.map(function(b){if(b instanceof Ld){var d=b.xa();if(a.length<=d)throw new E(510);return a[b.xa()]}return b}))};
function ee(a,b){var c=D(a.value),d=function(a){return null===a?!1:c.has(a)!=this.ab}.bind(a),e=b.entries.filter(function(a){return d(I(a,this.O))},a);return new G(e,H(b))}m.toString=function(){return"value_pred("+this.O.m()+" "+this.G+(this.ab?"(complement)":"")+" "+this.value+")"};function fe(a){this.ca=a;this.ad=this.Ca=null}function ge(a,b){null===a.Ca&&null!=a.u&&(a.Ca=he(a.u));return a.Ca.get(b)||null}function he(a){var b=B();$d(a,function(a){b.set(a.W(),a)});return b}function ie(a,b){b.u&&(a.u=b.u.Kb());a.ad=b}fe.prototype.bind=function(){return this};function je(a,b){var c=a.u;null!=c&&$d(c,function(a){a instanceof ce&&a.bind(b)})};function ke(a){fe.call(this,a)}t(ke,fe);function le(a){var b="";a.forEach(function(c,d){b+=c.O.m()+" ";b+=1==c.lb?"ASC":"DESC";d<a.length-1&&(b+=", ")});return b}ke.prototype.$=function(){return D(this.c)};ke.prototype.clone=function(){var a=new ke(this.ca);ie(a,this);this.f&&(a.f=this.f.slice());this.c&&(a.c=this.c.slice());a.X=this.X;a.N=this.N;this.M&&(a.M=this.M.slice());this.ja&&(a.ja=this.ja.slice());this.Qb&&(a.Qb=this.Qb);this.Yb&&(a.Yb=this.Yb);a.yb=this.yb;return a};
ke.prototype.bind=function(a){ke.Ib.bind.call(this,a);null!=this.Qb&&(this.X=a[this.Qb.xa()]);null!=this.Yb&&(this.N=a[this.Yb.xa()]);je(this,a);return this};function me(a,b){this.Da=a;this.aa=b}me.prototype.ib=g("Da");me.prototype.$=g("aa");function ne(a){var b=D();a.forEach(function(a){a.$().forEach(b.add.bind(b))});return b};function oe(a,b){this.global=a;this.Ka=a.j(kc);this.sd=b.map(function(a){return a.context});this.cf=b.map(function(a){return a.fe});this.Fe=ne(this.cf);this.uf=pe(this);this.cb=y()}function pe(a){return a.sd.some(function(a){return!(a instanceof ke)})?1:0}m=oe.prototype;
m.exec=function(){function a(){var f=d.shift();if(f){var h=e[c.length];return f.ib().exec(b,h).then(function(b){c.push(b[0]);return a()})}return w()}var b=new ld(this.global,this.Fe),c=[],d=this.cf.slice(),e=this.sd;return a().then(function(){return this.Ka.Cb(this.uf,b).ia()}.bind(this)).then(function(){this.ce(c);return c}.bind(this),function(a){b.Hb();throw a;})};m.I=g("uf");m.$=g("Fe");m.Mb=g("cb");m.W=function(){return ja(this)};m.ce=aa();function qe(a,b){oe.call(this,a,b);this.Gb=a.j(pc)}t(qe,oe);qe.prototype.getPriority=l(0);qe.prototype.ce=function(a){this.sd.forEach(function(b,c){re(this.Gb,b,a[c])},this)};function se(a,b){this.g=a;this.Gb=a.j(pc);this.Ea=a.j(oc);this.ld=new Ic(a);this.rb=b;var c=a.j(qc),d=this.rb.map(function(a){return c.table(a.getName())});this.aa=D(d);this.cb=y()}m=se.prototype;m.exec=function(){this.ld.update(this.rb);this.Pc();return w()};m.I=l(1);m.$=g("aa");m.Mb=g("cb");m.W=function(){return ja(this)};m.getPriority=l(1);m.Pc=function(){var a=te(this.Gb,this.aa);0!=a.length&&(a=new qe(this.g,a),ue(this.Ea,a))};function ve(a){this.g=a;this.Ka=a.j(kc);this.Ea=a.j(oc)}ve.prototype.ae=function(a){a=new se(this.g,a);ue(this.Ea,a)};function M(a,b){this.Pa=a;this.l=b;this.Va=B()}r("lf.backstore.FirebaseRawBackStore",M);M.prototype.gd=g("l");M.prototype.hd=function(){throw new E(351);};function we(a,b){var c=y(),d=a;b.length&&(d=a.child(b));d.once("value",function(a){c.resolve(a.val())},function(a){c.reject(a)});return c.ha}function xe(a,b,c){function d(a){a?e.reject(a):e.resolve()}c=c||!1;var e=y();c?a.set(b,d):a.update(b,d);return e.ha}
M.prototype.Ga=function(a){return we(this.l,"@rev/R").then(function(a){this.Na=a;return we(this.l,"@table")}.bind(this)).then(function(b){var c=0,d;for(d in b)this.Va.set(d,b[d]),b[d]>c&&(c=b[d]);a.ra().forEach(function(a){this.Va.has(a.getName())||(b[a.getName()]=++c)},this);d=this.l.child("@table");return xe(d,b)}.bind(this))};
function ye(a,b,c){var d=a.Va.get(b);return null!=d?function(){var a={},b=y();this.l.orderByChild("T").equalTo(d).once("value",function(d){d.forEach(function(b){var d=c(b.val());a[parseInt(b.key(),10)]=d});b.resolve(a)});return b.ha}.call(a).then(function(a){a["@rev"]={R:++this.Na};return xe(this.l,a)}.bind(a)):w()}M.prototype.tc=function(a){return ye(this,a,l(null)).then(function(){this.Va.delete(a);return xe(this.l.child("@table/"+a),null,!0)}.bind(this))};M.prototype.dropTable=M.prototype.tc;
M.prototype.oc=function(a,b,c){return ye(this,a,function(a){var e=a.P;e[b]=c;return{R:this.Na+1,T:a.T,P:e}}.bind(this))};M.prototype.addTableColumn=M.prototype.oc;M.prototype.uc=function(a,b){return ye(this,a,function(a){var d=a.P;delete d[b];return{R:this.Na+1,T:a.T,P:d}}.bind(this))};M.prototype.dropTableColumn=M.prototype.uc;M.prototype.Oc=function(a,b,c){return ye(this,a,function(a){var e=a.P;e[c]=e[b];delete e[b];return{R:this.Na+1,T:a.T,P:e}}.bind(this))};M.prototype.renameTableColumn=M.prototype.Oc;
M.prototype.tb=function(){throw new E(351);};M.prototype.createRow=M.prototype.tb;M.prototype.Ec=g("Pa");M.prototype.getVersion=M.prototype.Ec;M.prototype.dc=function(a){var b=y();a=this.Va.get(a);this.l.orderByChild("T").equalTo(a).once("value",function(a){var d=[];a.forEach(function(a){d.push(a.val().P)});b.resolve(d)});return b.ha};M.prototype.dump=function(){var a={},b=bc(this.Va).map(function(b){return this.dc(b).then(function(d){a[b]=d})}.bind(this));return fb(b).then(function(){return a})};
M.prototype.dump=M.prototype.dump;function ze(a,b,c){dc.call(this,c,b);this.l=a}t(ze,dc);ze.prototype.H=function(a){return this.l.Cc(a)};
ze.prototype.qc=function(){var a=this.Ra.rb;if(0==a.size)this.Y.resolve();else{var b=this.l.Na+1;this.l.Na=b;var c={"@rev":{R:b}};a.forEach(function(a,e){var f=this.l.Va.get(e);a.ta.forEach(function(a,d){c[d]={R:b,T:f,P:a.s}});a.na.forEach(function(a,d){c[d]={R:b,T:f,P:a[1].s}});a.wa.forEach(function(a,b){c[b]=null})},this);this.l.l.update(c,function(c){null===c?this.Y.resolve():(this.l.Na=b-1,c=C(a).map(function(a){return Ae(this.l,a.getName())},this),fb(c).then(this.Y.reject.bind(this.Y),this.Y.reject.bind(this.Y)))}.bind(this))}return this.Y.ha};function Be(){this.va=B()}function Ce(a,b){if(0==b.length)return C(a.va);var c=[];b.forEach(function(a){a=this.va.get(a)||null;null===a||c.push(a)},a);return c}Be.prototype.getData=g("va");Be.prototype.get=function(a){return w(Ce(this,a))};function De(a,b){b.forEach(function(a){this.va.set(a.id(),a)},a)}Be.prototype.put=function(a){De(this,a);return w()};function Ee(a,b){0==b.length||b.length==a.va.size?a.va.clear():b.forEach(function(a){this.va.delete(a)},a)}
Be.prototype.remove=function(a){Ee(this,a);return w()};function Fe(a){return 0==a.va.size?0:bc(a.va).reduce(function(a,c){return a>c?a:c},0)};function Ge(a,b){this.i=a;this.Af=b;this.Nc=B();this.Na=-1;this.L=B();this.Va=B();this.Fd=null}m=Ge.prototype;
m.Ga=function(a){this.l=this.Af.child(this.i.name());var b=a||function(){return w()};return we(this.l,"@db/version").then(function(a){return null===a?xe(this.l,He(this),!0).then(function(){var a=new M(0,this.l);return b(a)}.bind(this)):a==this.i.version()?we(this.l,"@rev/R").then(function(a){this.Na=a;return we(this.l,"@table")}.bind(this)).then(function(a){for(var b in a)this.Va.set(b,a[b]);a=this.i.ra().map(function(a){return Ae(this,a.getName())},this);return fb(a)}.bind(this)).then(function(){Ie(this);
Je(this);return w()}.bind(this)):this.de(a,b).then(function(){return this.Ga()}.bind(this))}.bind(this))};m.de=function(a,b){var c=new M(a,this.l);return c.Ga(this.i).then(function(){return w()}.bind(this)).then(function(){return b(c)}).then(function(){var a=this.l.child("@db");return xe(a,{version:this.i.version()},!0)}.bind(this))};
function Je(a){a.l.off();a.l.on("child_removed",a.og.bind(a));a.Gd&&(a.Gd.off(),a.Nc.clear());a.Gd=a.l.orderByChild("R").startAt(a.Na+1);a.Gd.on("value",a.ae.bind(a))}function Ie(a){qb=C(a.L).map(function(a){return Fe(a)}).reduce(function(a,c){return a>c?a:c},0)+1}m.og=function(a){var b=a.val(),c=this.Nc.get(b.T)||null;null===c&&(c=D(),this.Nc.set(b.T,c));c.add(parseInt(a.key(),10))};
m.ae=function(a){var b=a.child("@rev/R").val();null!=b&&b!=this.Na&&(this.Na=b,a=Ke(this,a),a.forEach(function(a){var b=this.L.get(a.getName()),e=bc(a.wa);0<e.length&&Ee(b,e);var f=C(a.ta);a.na.forEach(function(a){f.push(a[1])});De(b,f)},this),0<a.length&&this.Jc(a),Je(this))};
function Ke(a,b){var c=D(),d=B();a.Va.forEach(function(a,b){var h=this.L.get(b),k=new jd(b);if(this.Nc.has(a)){var n=wc(this.Nc.get(a));n.forEach(function(a){c.add(a)});Ce(h,n).forEach(function(a){k.delete(a)})}d.set(a,k)}.bind(a));b.forEach(function(a){if("@rev"!=a.key()){var b=parseInt(a.key(),10);if(!c.has(b)){a=a.val();var h=d.get(a.T),k=this.L.get(h.getName());k.getData().has(b)?h.modify([Ce(k,[b])[0],new z(b,a.P)]):h.add(new z(b,a.P))}}}.bind(a));return C(d).filter(function(a){return!a.md()})}
function Ae(a,b){var c=y(),d=a.Va.get(b);a.l.orderByChild("T").equalTo(d).once("value",function(a){var d=new Be,h=[];a.forEach(function(a){h.push(new z(parseInt(a.key(),10),a.val().P))});De(d,h);this.L.set(b,d);c.resolve()}.bind(a));return c.ha}function He(a){var b={};b["@db"]={version:a.i.version()};b["@rev"]={R:1};a.Na=1;b["@table"]={};a.i.ra().forEach(function(a,d){var e=a.getName();b["@table"][e]=d;this.L.set(e,new Be);this.Va.set(e,d)},a);return b}m.Cb=function(a,b){return new ze(this,a,b)};
m.Cc=function(a){var b=this.L.get(a)||null;if(null!==b)return b;throw new E(101,a);};m.close=aa();m.subscribe=ba("Fd");m.Jc=function(a){null!=this.Fd&&this.Fd(a)};function N(a,b,c,d){this.l=b;this.Xa=c;this.Pa=a;this.Yc=d}r("lf.backstore.IndexedDBRawBackStore",N);N.prototype.gd=g("l");N.prototype.getRawDBInstance=N.prototype.gd;N.prototype.hd=g("Xa");N.prototype.getRawTransaction=N.prototype.hd;N.prototype.tc=function(a){return new v(function(b,c){try{this.l.deleteObjectStore(a)}catch(d){c(d);return}b()},this)};N.prototype.dropTable=N.prototype.tc;
function Le(a,b,c,d){return new v(function(a,f){var h;try{var k=this.Xa.objectStore(b);h=k.openCursor()}catch(n){f(n);return}h.onsuccess=function(){var b=h.result;b?(c(b),b.continue()):(d(k),a())};h.onerror=f},a)}function Me(a){var b=null;return b=a instanceof ArrayBuffer?ub(a):a instanceof Date?a.getTime():a}
function Ne(a,b,c){function d(a){var b=Cc(a.value),d=b.s,e;for(e in d){var x=sb(d[e]);c(x);d[e]=x.Fa()}a.update(b.Fa())}function e(a){var b=sb(a.value);c(b);a.update(b.Fa())}return Le(a,b,a.Yc?d:e,aa())}N.prototype.oc=function(a,b,c){var d=Me(c);return Ne(this,a,function(a){a.s[b]=d})};N.prototype.addTableColumn=N.prototype.oc;N.prototype.uc=function(a,b){return Ne(this,a,function(a){delete a.s[b]})};N.prototype.dropTableColumn=N.prototype.uc;
N.prototype.Oc=function(a,b,c){return Ne(this,a,function(a){a.s[c]=a.s[b];delete a.s[b]})};N.prototype.renameTableColumn=N.prototype.Oc;function Oe(a,b){var c=[];return new v(function(a,e){var f;try{f=this.Xa.objectStore(b).openCursor()}catch(h){e(h);return}f.onsuccess=function(){var b=f.result;if(b){if(this.Yc){var e;e=Cc(b.value).s;for(var n in e)c.push(e[n])}else c.push(b.value);b.continue()}else a(c)}.bind(this);f.onerror=e},a)}N.prototype.tb=function(a){var b={},c;for(c in a)b[c]=Me(a[c]);return tb(b)};
N.prototype.createRow=N.prototype.tb;N.prototype.Ec=g("Pa");N.prototype.getVersion=N.prototype.Ec;N.prototype.dump=function(){for(var a=this.l.objectStoreNames,b=[],c=0;c<a.length;++c){var d=a.item(c);b.push(this.dc(d))}return fb(b).then(function(b){var c={};b.forEach(function(b,d){c[a.item(d)]=b});return c})};N.prototype.dump=N.prototype.dump;N.prototype.dc=function(a){return Oe(this,a).then(function(a){return a.map(function(a){return a.value})})};function Pe(a,b){this.ba=a;this.Lb=b}m=Pe.prototype;m.get=function(a){if(0==a.length)return this.zc();a=a.map(function(a){return new v(function(c,d){var e;try{e=this.ba.get(a)}catch(f){d(f);return}e.onerror=d;e.onsuccess=function(a){c(this.Lb(a.target.result))}.bind(this)},this)},this);return fb(a)};
m.zc=function(){return new v(function(a,b){var c=[],d;try{d=this.ba.openCursor()}catch(e){b(e);return}d.onerror=b;d.onsuccess=function(){var b=d.result;b?(c.push(this.Lb(b.value)),b.continue()):a(c)}.bind(this)},this)};m.Sb=function(a){return new v(function(b,c){var d;try{d=a()}catch(e){c(e);return}d.onsuccess=b;d.onerror=c},this)};m.put=function(a){if(0==a.length)return w();a=a.map(function(a){return this.Sb(function(){return this.ba.put(a.Fa())}.bind(this))},this);return fb(a)};
m.remove=function(a){return new v(function(b,c){var d=this.ba.count();d.onsuccess=function(d){if(0==a.length||d.target.result==a.length)return this.Sb(function(){return this.ba.clear()}.bind(this)).then(b,c);d=a.map(function(a){return this.Sb(function(){return this.ba.delete(a)}.bind(this))},this);fb(d).then(b,c)}.bind(this);d.onerror=c},this)};function Qe(a,b,c,d,e){dc.call(this,c,d);this.g=a;this.Xa=b;this.Yc=e;this.Xa.oncomplete=this.Y.resolve.bind(this.Y);this.Xa.onabort=this.Y.reject.bind(this.Y)}t(Qe,dc);Qe.prototype.H=function(a,b,c){return this.Yc?(c=null!=c?c:0,a=this.Xa.objectStore(a),new Dc(a,b,0==c?pa(Fc,this.g):Gc)):new Pe(this.Xa.objectStore(a),b)};Qe.prototype.qc=function(){return this.Y.ha};function Re(a,b){this.g=a;this.i=b;this.Zc=b.df().Mf||!1}m=Re.prototype;
m.Ga=function(a){var b=window.indexedDB||window.mozIndexedDB||window.webkitIndexedDB||window.msIndexedDB;if(null==b)throw new E(352);var c=a||function(){return w()};return new v(function(a,e){var f;try{f=b.open(this.i.name(),this.i.version())}catch(h){e(h);return}f.onerror=e;f.onupgradeneeded=function(a){Se(this,c,a).then(aa(),e)}.bind(this);f.onsuccess=function(b){this.l=b.target.result;this.me().then(function(b){qb=b+1;a(this.l)}.bind(this))}.bind(this)},this)};
function Se(a,b,c){var d=c.target.result,e=c.target.transaction;c=new N(c.oldVersion,d,e,a.Zc);Te(d);a.i.ra().forEach(pa(a.Hf,d,e),a);return b(c)}function Te(a){for(var b=[],c=0;c<a.objectStoreNames.length;++c){var d=a.objectStoreNames.item(c);-1!=d.indexOf(".")&&b.push(d)}b.forEach(function(b){try{a.deleteObjectStore(b)}catch(c){}})}
m.Hf=function(a,b,c){a.objectStoreNames.contains(c.getName())||a.createObjectStore(c.getName(),{keyPath:"id"});c.zb()&&(c.ya().forEach(function(c){this.sc(a,b,c.m(),"btree")},this),this.sc(a,b,Ue(c),"rowid"))};m.sc=function(a,b,c,d){a.objectStoreNames.contains(c)||(a.createObjectStore(c,{keyPath:"id"}),a=b.objectStore(c),(this.Zc?new Dc(a,sb,Gc):new Pe(a,sb)).put([new wb(new vb(d))]))};
m.Cb=function(a,b){var c=bc(b.$());md(b).forEach(function(a){c.push(a)});var d=this.l.transaction(c,0==a?"readonly":"readwrite");return new Qe(this.g,d,b,a,this.Zc)};
m.me=function(a){function b(){if(0==d.length)return w();var a=d.shift();return c(a).then(b)}function c(b){return new v(function(c,d){var T;try{T=(a||e.transaction([b])).objectStore(b).openCursor(null,"prev")}catch(qa){d(qa);return}T.onsuccess=function(a){(a=a.target.result)&&(f=Math.max(f,h(a)));c(f)};T.onerror=function(){c(f)}})}var d=this.i.ra().map(function(a){return a.getName()}),e=this.l,f=0,h=function(a){return this.Zc?(a=Cc(a.value),Object.keys(a.s).reduce(function(a,b){return Math.max(a,b)},
0)):a.key}.bind(this);return new v(function(a){b().then(function(){a(f)})})};m.close=function(){this.l.close()};m.Cc=function(){throw new E(511);};m.subscribe=aa();m.Jc=aa();function Ve(a,b,c){dc.call(this,c,b);this.ba=a;0==b&&this.Y.resolve()}t(Ve,dc);Ve.prototype.H=function(a){return this.ba.Cc(a)};Ve.prototype.qc=function(){this.Y.resolve();return this.Y.ha};function We(a){this.i=a;this.L=B()}m=We.prototype;m.Ga=function(){this.i.ra().forEach(this.Zf,this);return w()};m.Cc=function(a){var b=this.L.get(a)||null;if(null===b)throw new E(101,a);return b};m.Cb=function(a,b){return new Ve(this,a,b)};function Xe(a,b){if(!a.L.has(b)){var c=new Be;a.L.set(b,c);return c}return null}m.Zf=function(a){Xe(this,a.getName());a.zb()&&(a.ya().forEach(function(a){this.sc(a.m(),"btree")},this),this.sc(Ue(a),"rowid"))};m.sc=function(a,b){var c=Xe(this,a);null===c||c.put([new wb(new vb(b))])};
m.close=aa();m.subscribe=aa();m.Jc=aa();function Ye(a){We.call(this,a);this.od=null}t(Ye,We);Ye.prototype.subscribe=function(a){null===this.od&&(this.od=a)};Ye.prototype.Jc=function(a){null===this.od||this.od(a)};function Ze(a,b,c){this.Xa=a;this.w=b;this.Lb=c}Ze.prototype.get=function(a){var b=this.Lb;return $e(this.Xa,"SELECT id, value FROM "+this.w+" "+(0==a.length?"":"WHERE id IN ("+a.join(",")+")"),[],function(a){for(var d=a.rows.length,e=Array(d),f=0;f<d;++f)e[f]=b({id:a.rows.item(f).id,value:JSON.parse(a.rows.item(f).value)});return e})};
Ze.prototype.put=function(a){if(0==a.length)return w();var b="INSERT OR REPLACE INTO "+this.w+"(id, value) VALUES (?, ?)";a.forEach(function(a){$e(this.Xa,b,[a.id(),JSON.stringify(a.s)])},this);return w()};Ze.prototype.remove=function(a){$e(this.Xa,"DELETE FROM "+this.w+" "+(0==a.length?"":"WHERE id IN ("+a.join(",")+")"),[]);return w()};function af(a,b,c){dc.call(this,b,c);this.l=a;this.L=B();this.Id=[]}t(af,dc);function bf(a){return a.replace(".","__d__").replace("#","__s__")}af.prototype.H=function(a,b){var c=this.L.get(a)||null;null===c&&(c=new Ze(this,bf(a),b),this.L.set(a,c));return c};function $e(a,b,c,d){var e=y();a.Id.push({Cg:b,sg:c,transform:d,Y:e});return e.ha}
af.prototype.qc=function(){var a=null,b=this.Y.reject.bind(this.Y),c=function(a,b){this.Y.reject(b)}.bind(this),d=[],e=function(b,h){if(null!==a){var k=h;null!=a.transform&&null!=h&&(k=a.transform(h));d.push(k);a.Y.resolve(k)}0<this.Id.length?(a=k=this.Id.shift(),b.executeSql(k.Cg,k.sg,e,c)):this.Y.resolve(d)}.bind(this);0==this.tf?this.l.readTransaction(e,b):this.l.transaction(e,b);return this.Y.ha};function O(a,b,c){this.l=c;this.g=a;this.Pa=b}r("lf.backstore.WebSqlRawBackStore",O);O.prototype.gd=g("l");O.prototype.getRawDBInstance=O.prototype.gd;O.prototype.hd=function(){throw new E(356);};O.prototype.getRawTransaction=O.prototype.hd;function cf(a){return new af(a.l,new ld(a.g,D()),1)}O.prototype.tc=function(a){var b=cf(this);$e(b,"DROP TABLE "+a,[]);return b.ia()};O.prototype.dropTable=O.prototype.tc;
O.prototype.dc=function(a){var b=cf(this);$e(b,"SELECT id, value FROM "+a,[]);return b.ia().then(function(a){for(var b=a[0].rows.length,e=Array(b),f=0;f<b;++f)e[f]={id:a[0].rows.item(f).id,value:JSON.parse(a[0].rows.item(f).value)};return w(e)})};function df(a,b,c){var d=cf(a),e="UPDATE "+b+" SET value=? WHERE id=?";return a.dc(b).then(function(a){a.forEach(function(a){a=c(a);$e(d,e,[JSON.stringify(a.value),a.id])});return d.ia()})}
O.prototype.oc=function(a,b,c){var d=Me(c);return df(this,a,function(a){a.value[b]=d;return a})};O.prototype.addTableColumn=O.prototype.oc;O.prototype.uc=function(a,b){return df(this,a,function(a){delete a.value[b];return a})};O.prototype.dropTableColumn=O.prototype.uc;O.prototype.Oc=function(a,b,c){return df(this,a,function(a){a.value[c]=a.value[b];delete a.value[b];return a})};O.prototype.renameTableColumn=O.prototype.Oc;O.prototype.tb=function(a){var b={},c;for(c in a)b[c]=Me(a[c]);return tb(b)};
O.prototype.createRow=O.prototype.tb;O.prototype.Ec=g("Pa");O.prototype.getVersion=O.prototype.Ec;function ef(a){$e(a,'SELECT tbl_name FROM sqlite_master WHERE type="table"',[],function(a){for(var c=Array(a.rows.length),d=0;d<c.length;++d)c[d]=a.rows.item(d).tbl_name;return c})}
O.prototype.dump=function(){var a=y(),b=cf(this);ef(b);var c={};b.ia().then(function(b){b=b[0].filter(function(a){return"__lf_ver"!=a&&"__WebKitDatabaseInfoTable__"!=a}).map(function(a){return this.dc(a).then(function(b){c[a]=b})},this);fb(b).then(function(){a.resolve(c)})}.bind(this));return a.ha};O.prototype.dump=O.prototype.dump;function ff(a,b,c){this.g=a;this.i=b;this.Bg=c||4194304}function gf(a){return new ld(a.g,D())}m=ff.prototype;m.Ga=function(a){if(null==window.openDatabase)throw new E(353);var b=a||function(){return w()};return new v(function(a,d){try{var e=window.openDatabase(this.i.name(),"",this.i.name(),this.Bg);if(null!=e)this.l=e,hf(this,b).then(a,d);else throw new E(354);}catch(f){d(f)}},this)};
function hf(a,b){var c=y(),d=new af(a.l,gf(a),1);$e(d,"CREATE TABLE IF NOT EXISTS __lf_ver(id INTEGER PRIMARY KEY, v INTEGER)",[]);$e(d,"SELECT v FROM __lf_ver WHERE id = 0",[]);d.ia().then(function(a){var d=0;a[1].rows.length&&(d=a[1].rows.item(0).v);d<this.i.version()?this.de(b,d).then(c.resolve.bind(c)):d>this.i.version()?c.reject(new E(108)):c.resolve()}.bind(a));return c.ha}m.Cb=function(a,b){if(null!=this.l)return new af(this.l,b,a);throw new E(2);};m.close=aa();
m.Cc=function(){throw new E(512);};m.subscribe=function(){throw new E(355);};m.Jc=function(){throw new E(355);};m.de=function(a,b){var c=y();jf(this).then(function(){a(new O(this.g,b,this.l)).then(function(){return this.me()}.bind(this)).then(c.resolve.bind(c))}.bind(this),c.reject.bind(c));return c.ha};
function jf(a){var b=a.i.ra(),c=new af(a.l,gf(a),1),d=new af(a.l,gf(a),1);$e(c,"INSERT OR REPLACE INTO __lf_ver VALUES (0, ?)",[a.i.version()]);ef(c);return c.ia().then(function(a){function c(a,b){$e(d,"INSERT INTO "+a+"(id, value) VALUES(?, ?)",[-1,JSON.stringify(rb(new wb(new vb(b))))])}var h=a[1];h.filter(function(a){return-1!=a.indexOf("__d__")}).forEach(function(a){$e(d,"DROP TABLE "+a,[])});var k=[],n=[],x=[];b.map(function(a){-1==h.indexOf(a.getName())&&k.push(a.getName());a.zb&&(a.ya().forEach(function(a){a=
bf(a.m());k.push(a);n.push(a)}),a=bf(Ue(a)),k.push(a),x.push(a))});k.forEach(function(a){$e(d,"CREATE TABLE "+a+"(id INTEGER PRIMARY KEY, value TEXT)",[])});n.forEach(function(a){c(a,"btree")});x.forEach(function(a){c(a,"rowid")});return d.ia()})}
m.me=function(){var a=0,b=y(),c=function(b){var c=new af(this.l,gf(this),0);$e(c,"SELECT MAX(id) FROM "+b,[]);return c.ia().then(function(b){b=b[0].rows.item(0)[0];a=Math.max(b,a)})}.bind(this),d=this.i.ra().map(function(a){return c(a.getName())});fb(d).then(function(){b.resolve(a)},function(a){b.reject(a)});return b.ha};function kf(a){this.o=B();this.Zb=B();a.ra().forEach(function(a){this.Zb.set(a.getName(),D())},this)}m=kf.prototype;m.set=function(a,b){this.o.set(b.id(),b);this.Zb.get(a).add(b.id())};m.Vb=function(a,b){var c=this.Zb.get(a);b.forEach(function(a){this.o.set(a.id(),a);c.add(a.id())},this)};m.get=function(a){return this.o.get(a)||null};function mf(a,b){return b.map(function(a){return this.get(a)},a)}
m.$a=function(a,b,c){var d=[],e=Math.min(b,c),f=Math.max(b,c);a=this.Zb.get(a);if(a.size<f-e)a.forEach(function(a){a>=e&&a<=f&&(a=this.o.get(a),d.push(a))},this);else for(b=e;b<=f;++b)a.has(b)&&(c=this.o.get(b),d.push(c));return d};m.remove=function(a,b){this.o.delete(b);this.Zb.get(a).delete(b)};m.Ac=function(a){return null!=a?this.Zb.get(a).size:this.o.size};m.clear=function(){this.o.clear();this.Zb.clear()};function nf(a,b,c){var d=0,e=a.length;for(c=c||of;d<e;){var f=d+e>>1;0>c(a[f],b)?d=f+1:e=f}return d==e&&a[d]==b?d:~d}function of(a,b){return a-b}function pf(a,b,c){c=nf(a,b,c);return 0>c?(a.splice(-(c+1),0,b),!0):!1};function qf(a,b,c,d){a=b?a.reverse():a;if(null==c&&null==d)return a;c=Math.min(q(c)?c:a.length,a.length);if(0==c)return[];d=Math.min(d||0,a.length);return a.slice(d,d+c)};function rf(){this.oa=0}rf.prototype.add=function(a,b){this.oa+=b};rf.prototype.remove=function(a,b){this.oa-=b};rf.prototype.clear=function(){this.oa=0};function sf(a,b){a.clear();b.forEach(function(a){this.oa+=a.oa},a)};function tf(a,b,c,d){this.w=a;this.V=b;this.se=c;this.pb=new rf;if(d){a=511;a*=a*a;if(d.length>=a)throw new E(6,a);d=uf(this,d);this.qa=d=vf(d)}else this.clear()}var wf=[];m=tf.prototype;m.getName=g("w");m.toString=function(){return this.qa.toString()};m.add=function(a,b){this.qa=this.qa.xb(a,b)};m.set=function(a,b){this.qa=this.qa.xb(a,b,!0)};m.remove=function(a,b){this.qa=this.qa.remove(a,b)};m.get=function(a){return this.qa.get(a)};
m.bd=function(a){if(null==a)return this.Oa().oa;if(a instanceof rd){if(td(a))return this.Oa().oa;if(xd(a))return this.get(a.c).length}return this.$a([a]).length};m.Oa=g("pb");m.zc=function(a,b,c,d){c=Array(a);this.qa.fill({offset:b?this.pb.oa-a-d:d,count:a,pe:0},c);return b?c.reverse():c};
m.$a=function(a,b,c,d){var e=xf(this.qa).b[0];if(!q(e)||0==c)return wf;b=b||!1;c=null!=c?Math.min(c,this.pb.oa):this.pb.oa;d=d||0;var f=Math.min(Math.max(this.pb.oa-d,0),c);if(0==f)return wf;if(!q(a)||1==a.length&&a[0]instanceof rd&&td(a[0]))return this.zc(f,b,c,d);a=this.V.pf(a);var h=Array(b?this.pb.oa:f),k={count:0,X:h.length,reverse:b,N:d};a.forEach(function(a){for(var b=this.V.td(a),b=this.V.Td(a)?e:b[0],b=yf(this.qa,b),c=k.count,d=0;null!=b&&k.count<k.X;)b.$a(a,k,h),k.count!=c?(d=0,c=k.count):
d++,b=2==d?null:b.next()},this);h.splice(k.count,f-k.count);return b?qf(h,b,c,d):h};m.clear=function(){this.qa=zf(this);this.pb.clear()};m.Ma=function(a){return this.qa.Ma(a)};m.min=function(){return this.Ic(this.V.min.bind(this.V))};m.max=function(){return this.Ic(this.V.max.bind(this.V))};m.Ic=function(a){var b=xf(this.qa),c=Af(this.qa);if(0==b.b.length&&0==c.b.length)return null;var d=b.b[0],b=b.B[0],e=c.b[c.b.length-1],c=c.B[c.b.length-1];return 1==a(d,e)?[d,this.se?[b]:b]:[e,this.se?[c]:c]};
m.Ia=g("se");m.rc=g("V");m.Xd=function(a,b){return null!=a?-1==this.V.compare(a,b):!1};m.Qa=function(a,b){return null!=a?0==this.V.compare(a,b):!1};m.Fa=function(){for(var a=[],b=xf(this.qa);b;)a.push(new z(b.pa,[b.b,b.B])),b=b.Aa;return a};function Bf(a,b,c,d){a=new tf(b,a,c);d=Cf(d,a);a.qa=d;return a}function Df(a,b){this.pa=a;this.F=b;this.jb=0;this.Aa=this.Ab=this.C=null;this.b=[];this.B=[];this.h=[]}function zf(a){return new Df(qb++,a)}function P(a){return 0==a.jb}m=Df.prototype;m.next=g("Aa");
function Ef(a){function b(a){return null!=a?a.pa.toString():"_"}var c=a.pa+"["+a.b.join("|")+"]",d=a.h.map(function(a){return a.pa}).join("|"),e=a.B.join("/"),f=b(a.Ab)+"{",f=P(a)?f+e:f+d,f=f+"}"+b(a.C);a.Aa&&(a=Ef(a.Aa),c=c+"  "+a[0],f=f+"  "+a[1]);return[c,f]}m.toString=function(){var a="",b=Ef(this),a=a+(b[0]+"\n"+b[1]+"\n");this.h.length&&(a+=this.h[0].toString());return a};function xf(a){return P(a)?a:xf(a.h[0])}function Af(a){return P(a)?a:Af(a.h[a.h.length-1])}
function Ff(a,b){b&&(b.Ab=a);a&&(a.Aa=b)}function uf(a,b){for(var c=b.length,d=0,e=zf(a),f=e;0<c;){var h=768<=c?511:257<=c&&511>=c?c:257,k=b.slice(d,d+h);e.b=k.map(function(a){return a.key});e.B=k.map(function(a){return a.value});d+=h;c-=h;0<c&&(h=zf(e.F),Ff(e,h),e=h)}return f}function Gf(a){var b=a[0],c=zf(b.F);c.jb=b.jb+1;c.h=a;for(b=0;b<a.length;++b)a[b].C=c,0<b&&c.b.push(a[b].b[0]);return c}
function vf(a){var b=a,c=[];do c.push(b),b=b.Aa;while(b);if(512>=c.length)b=Gf(c);else{var d=c.length,e=0,b=zf(a.F);for(b.jb=a.jb+2;0<d;){a=768<=d?511:257<=d&&511>=d?d:257;var f=c.slice(e,e+a),h=Gf(f);h.C=b;b.h.length&&(b.b.push(f[0].b[0]),Ff(b.h[b.h.length-1],h));b.h.push(h);e+=a;d-=a}}return b}m.get=function(a){var b=Hf(this,a);if(P(this)){var c=wf;this.F.Qa(this.b[b],a)&&(c=c.concat(this.B[b]));return c}b=this.F.Qa(this.b[b],a)?b+1:b;return this.h[b].get(a)};
m.Ma=function(a){var b=Hf(this,a);return this.F.Qa(this.b[b],a)?!0:P(this)?!1:this.h[b].Ma(a)};m.remove=function(a,b){If(this,a,-1,b);if(null==this.C){var c=this;1==this.h.length&&(c=this.h[0],c.C=null);return c}return this};function Jf(a){return P(a)?a.b[0]:Jf(a.h[0])}function Kf(a){a.b=[];for(var b=1;b<a.h.length;++b)a.b.push(Jf(a.h[b]))}
function If(a,b,c,d){var e=Hf(a,b),f=P(a);if(!f){var h=a.F.Qa(a.b[e],b)?e+1:e;if(If(a.h[h],b,h,d))Kf(a);else return!1}else if(!a.F.Qa(a.b[e],b))return!1;if(a.b.length>e&&a.F.Qa(a.b[e],b)){if(q(d)&&!a.F.Ia()&&f&&(h=a.B[e],d=nf(h,d,void 0),0>d?d=!1:(h.splice(d,1),d=!0),d&&a.F.Oa().remove(b,1),a.B[e].length))return!1;a.b.splice(e,1);f&&(f=a.F.Ia()?1:a.B[e].length,a.B.splice(e,1),a.F.Oa().remove(b,f))}if(256>a.b.length&&null!=a.C){a:{b=null;if(a.Aa&&256<a.Aa.b.length)b=a.Aa,e=d=0,f=a.b.length+1;else if(a.Ab&&
256<a.Ab.b.length)b=a.Ab,d=a.Ab.b.length-1,e=P(a)?d:d+1,f=0;else{b=!1;break a}a.b.splice(f,0,b.b[d]);b.b.splice(d,1);d=P(a)?a.B:a.h;h=null;P(a)?h=b.B:(h=b.h,h[e].C=a);d.splice(f,0,h[e]);h.splice(e,1);P(b)||(Kf(b),Kf(a));b=!0}b||Lf(a,c)}return!0}
function Lf(a,b){var c,d,e;a.Aa&&511>a.Aa.b.length?(c=a.Aa,e=d=0):a.Ab&&(c=a.Ab,d=c.b.length,e=P(c)?c.B.length:c.h.length);d=[d,0].concat(a.b);Array.prototype.splice.apply(c.b,d);d=null;P(a)?d=a.B:(d=a.h,d.forEach(function(a){a.C=c}));d=[e,0].concat(d);Array.prototype.splice.apply(P(c)?c.B:c.h,d);Ff(a.Ab,a.Aa);P(c)||Kf(c);-1!=b&&(a.C.b.splice(b,1),a.C.h.splice(b,1))}
m.xb=function(a,b,c){var d=Hf(this,a);if(P(this)){if(this.F.Qa(this.b[d],a)){if(c)this.F.Oa().remove(a,this.F.Ia()?1:this.B[d].length),this.B[d]=this.F.Ia()?b:[b];else{if(this.F.Ia())throw new E(201);if(!pf(this.B[d],b))throw new E(109);}this.F.Oa().add(a,1);return this}this.b.splice(d,0,a);this.B.splice(d,0,this.F.Ia()?b:[b]);this.F.Oa().add(a,1);512==this.b.length?(d=zf(this.F),a=zf(this.F),a.jb=1,a.b=[this.b[256]],a.h=[this,d],a.C=this.C,this.C=a,d.b=this.b.splice(256),d.B=this.B.splice(256),d.C=
a,Ff(d,this.Aa),Ff(this,d),d=a):d=this;return d}d=this.F.Qa(this.b[d],a)?d+1:d;a=this.h[d].xb(a,b,c);P(a)||1!=a.b.length||(this.b.splice(d,0,a.b[0]),a.h[1].C=this,a.h[0].C=this,this.h.splice(d,1,a.h[1]),this.h.splice(d,0,a.h[0]));return 512==this.b.length?Mf(this):this};function Mf(a){var b=zf(a.F),c=zf(a.F);b.C=a.C;b.jb=a.jb+1;b.b=[a.b[256]];b.h=[a,c];a.b.splice(256,1);c.C=b;c.jb=a.jb;c.b=a.b.splice(256);c.h=a.h.splice(257);c.h.forEach(function(a){a.C=c});a.C=b;Ff(c,a.Aa);Ff(a,c);return b}
function Hf(a,b){for(var c=0,d=a.b.length;c<d;){var e=c+d>>1;a.F.Xd(a.b[e],b)?c=e+1:d=e}return c}function yf(a,b){if(!P(a)){var c=Hf(a,b);a.F.Qa(a.b[c],b)&&c++;return yf(a.h[c],b)}return a}
m.$a=function(a,b,c){function d(a){return a[0]?a[1]?0:1:-1}var e=this.F.rc(),f=0,h=this.b.length-1,k=this.b,n=d(e.sb(k[f],a)),x=d(e.sb(k[h],a));if(1!=n&&(-1!=n||-1!=x)){var T=function(a,b){var c=a+b>>1;return c==a?c+1:c},qa=function(b,c,f){if(b>=c)return 0==f?c:-1;var h=d(e.sb(k[b],a));if(0==h)return b;if(1==h)return-1;h=T(b,c);if(h==c)return 0==f?c:-1;var n=d(e.sb(k[h],a));return 0==n?qa(b,h,n):-1==n?qa(h+1,c,f):qa(b+1,h,n)},$a=function(b,c){if(b>=c)return b;var f=d(e.sb(k[c],a));if(0==f)return c;
if(-1==f)return b;f=T(b,c);if(f==c)return b;var h=d(e.sb(k[f],a));return 0==h?$a(f,c):1==h?$a(b,f-1):-1};0!=n&&(f=qa(f+1,h,x));-1!=f&&(h=$a(f,h),-1!=h&&h>=f&&Nf(this,b,c,f,h+1))}};function Nf(a,b,c,d,e){for(;d<e&&(b.reverse||!(b.count>=b.X));++d)if(a.F.Ia())!b.reverse&&b.N?b.N--:c[b.count++]=a.B[d];else for(var f=0;f<a.B[d].length&&b.count<c.length;++f)!b.reverse&&b.N?b.N--:c[b.count++]=a.B[d][f]}
m.fill=function(a,b){if(P(this))for(var c=0;c<this.B.length&&0<a.count;++c)if(0<a.offset){if(a.offset-=this.F.Ia()?1:this.B[c].length,0>a.offset)for(var d=this.B[c].length+a.offset;d<this.B[c].length&&0<a.count;++d)b[a.pe++]=this.B[c][d],a.count--}else if(this.F.Ia())b[a.pe++]=this.B[c],a.count--;else for(d=0;d<this.B[c].length&&0<a.count;++d)b[a.pe++]=this.B[c][d],a.count--;else for(c=0;c<this.h.length&&0<a.count;++c)this.h[c].fill(a,b)};
function Cf(a,b){for(var c=b.Oa(),d=a.map(function(a){var d=new Df(a.id(),b);d.b=a.s[0];d.B=a.s[1];d.b.forEach(function(a,e){c.add(a,b.Ia()?1:d.B[e].length)});return d}),e=0;e<d.length-1;++e)Ff(d[e],d[e+1]);return 1<d.length?vf(d[0]):d[0]};function Of(a){this.compare=0==a?Pf:Qf;this.Zd=0==a?function(a){return null!=a?a.reverse():null}:function(a){return a||null};this.ee=0==a?Rf:Sf}t(Of,Hc);function Qf(a,b){return a>b?1:a<b?-1:0}function Pf(a,b){return Qf(b,a)}function Sf(a,b){return yd(a,b)}function Rf(a,b){return yd(b,a)}m=Of.prototype;m.sb=function(a,b){var c=this.Zd(b),d=[c.c==F,c.A==F];if(!d[0]){var e=this.compare(a,c.c);d[0]=c.da?1==e:-1!=e}d[1]||(e=this.compare(a,c.A),d[1]=c.ma?-1==e:1!=e);return d};
m.compare=function(a,b){return this.compare(a,b)};m.min=function(a,b){return a<b?1:a==b?0:-1};m.max=function(a,b){return a>b?1:a==b?0:-1};m.Sd=function(a,b){var c=this.sb(a,b);return c[0]&&c[1]};m.pf=function(a){return a.filter(function(a){return null!==a}).sort(function(a,c){return this.ee(a,c)}.bind(this))};m.Td=function(a){return this.Zd(a).c==F};m.td=function(a){a=this.Zd(a);return[a.c,a.A]};m.toString=function(){return this.compare==Pf?"SimpleComparator_DESC":"SimpleComparator_ASC"};function Tf(a){this.La=a.map(function(a){return new Of(a)})}t(Tf,Hc);function Uf(a,b,c,d){for(var e=0,f=0;f<a.La.length&&0==e;++f)e=d(a.La[f],b[f],c[f]);return e}m=Tf.prototype;m.compare=function(a,b){return Uf(this,a,b,function(a,b,e){return b==F||e==F?0:a.compare(b,e)})};m.min=function(a,b){return Uf(this,a,b,function(a,b,e){return a.min(b,e)})};m.max=function(a,b){return Uf(this,a,b,function(a,b,e){return a.max(b,e)})};
m.sb=function(a,b){for(var c=[!0,!0],d=0;d<this.La.length&&(c[0]||c[1]);++d){var e=this.La[d].sb(a[d],b[d]);c[0]=c[0]&&e[0];c[1]=c[1]&&e[1]}return c};m.Sd=function(a,b){for(var c=!0,d=0;d<this.La.length&&c;++d)c=this.La[d].Sd(a[d],b[d]);return c};
m.pf=function(a){var b=a.filter(function(a){return a.every(fa)});a=Array(this.La.length);for(var c=0;c<a.length;c++)a[c]=b.map(function(a){return a[c]});a.forEach(function(a,b){a.sort(function(a,c){return this.La[b].ee(a,c)}.bind(this))},this);b=Array(b.length);for(c=0;c<b.length;c++)b[c]=a.map(function(a){return a[c]});return b.sort(function(a,b){for(var c=0,h=0;h<this.La.length&&0==c;++h)c=this.La[h].ee(a[h],b[h]);return c}.bind(this))};m.Td=function(a){return this.La[0].Td(a[0])};
m.td=function(a){var b=a.map(function(a,b){return this.La[b].td(a)[0]},this);a=a.map(function(a,b){return this.La[b].td(a)[1]},this);return[b,a]};function Vf(a){if(1==a.f.length)return new Of(a.f[0].lb);a=a.f.map(function(a){return a.lb});return new Tf(a)};function Wf(a){this.fa=a;this.kb=D();this.Qc=new rf;this.pb=new rf}m=Wf.prototype;m.getName=function(){return this.fa.getName()};m.add=function(a,b){null===a?(this.kb.add(b),this.Qc.add(a,1)):this.fa.add(a,b)};m.set=function(a,b){null===a?(this.kb.clear(),this.Qc.clear(),this.add(a,b)):this.fa.set(a,b)};m.remove=function(a,b){null===a?b?(this.kb.delete(b),this.Qc.remove(a,1)):(this.kb.clear(),this.Qc.clear()):this.fa.remove(a,b)};m.get=function(a){return null===a?wc(this.kb):this.fa.get(a)};
m.bd=function(a){return this.fa.bd(a)};m.Oa=function(){sf(this.pb,[this.fa.Oa(),this.Qc]);return this.pb};m.$a=function(a,b,c,d){b=this.fa.$a(a,b,c,d);return null!=a?b:b.concat(wc(this.kb))};m.clear=function(){this.kb.clear();this.fa.clear()};m.Ma=function(a){return null===a?0!=this.kb.size:this.fa.Ma(a)};m.min=function(){return this.fa.min()};m.max=function(){return this.fa.max()};m.Fa=function(){return[new z(-2,wc(this.kb))].concat(this.fa.Fa())};m.rc=function(){return this.fa.rc()};
function Xf(a,b){for(var c=-1,d=0;d<b.length;++d)if(-2==b[d].id()){c=d;break}if(-1==c)throw new E(102);var d=b[c].s,e=b.slice(0);e.splice(c,1);var c=a(e),f=new Wf(c);d.forEach(function(a){f.kb.add(a)});return f}m.Ia=function(){return this.fa.Ia()};function Yf(a){this.w=a;this.ob=D();this.V=new Of(1)}m=Yf.prototype;m.getName=g("w");m.add=function(a){if("number"!=typeof a)throw new E(103);this.ob.add(a)};m.set=function(a,b){this.add(a,b)};m.remove=function(a){this.ob.delete(a)};m.get=function(a){return this.Ma(a)?[a]:[]};m.min=function(){return this.Ic(this.V.min.bind(this.V))};m.max=function(){return this.Ic(this.V.max.bind(this.V))};
m.Ic=function(a){if(0==this.ob.size)return null;var b=wc(this.ob).reduce(function(b,d){return null===b||1==a(d,b)?d:b},null);return[b,[b]]};m.bd=function(){return this.ob.size};m.$a=function(a,b,c,d){var e=a||[wd()];a=wc(this.ob).filter(function(a){return e.some(function(b){return this.V.Sd(a,b)},this)},this);return qf(a,b,c,d)};m.clear=function(){this.ob.clear()};m.Ma=function(a){return this.ob.has(a)};m.Fa=function(){return[new z(0,wc(this.ob))]};m.rc=g("V");
function Zf(a,b){var c=new Yf(a);b[0].s.forEach(function(a){c.add(a,a)});return c}m.Ia=l(!0);m.Oa=function(){var a=new rf;a.oa=this.ob.size;return a};function bg(a){this.g=a;this.Ka=a.j(kc);this.D=a.j(mc);this.U=a.j(lc)}bg.prototype.Ga=function(a){var b=a.ra(),c=function(){if(0==b.length)return w();var a=b.shift();return(a.zb()?cg(this,a):dg(this,a)).then(c)}.bind(this);return c()};function dg(a,b){var c=new ld(a.g,D([b])),c=a.Ka.Cb(0,c),d=c.H(b.getName(),b.Db.bind(b)).get([]).then(function(a){this.U.Vb(b.getName(),a);eg(this,b,a)}.bind(a));c.ia();return d}
function eg(a,b,c){var d=a.D.kc.get(b.getName())||[];c.forEach(function(a){d.forEach(function(b){var c=a.Fb(b.getName());b.add(c,a.id())})})}function cg(a,b){var c=new ld(a.g,D([b])),d=a.Ka.Cb(0,c),c=d.H(b.getName(),b.Db).get([]).then(function(a){this.U.Vb(b.getName(),a)}.bind(a)),e=b.ya().map(function(a){return fg(this,a,d)},a).concat(gg(a,b,d));d.ia();return fb(e.concat(c))}
function fg(a,b,c){c=c.H(b.m(),sb,1);var d=Vf(b);return c.get([]).then(function(a){if(1<a.length){if(hg(b)){var c=Bf.bind(void 0,d,b.m(),b.Gc);a=Xf(c,a.slice(1))}else a=Bf(d,b.m(),b.Gc,a.slice(1));this.D.set(b.Rc,a)}}.bind(a))}function gg(a,b,c){return c.H(Ue(b),sb,1).get([]).then(function(a){1<a.length&&(a=Zf(Ue(b),a.slice(1)),this.D.set(b.getName(),a))}.bind(a))};function ig(){this.ba=B();this.kc=B()}ig.prototype.Ga=function(a){a.ra().forEach(function(a){var c=[];this.kc.set(a.getName(),c);var d=Ue(a);if(null===this.get(d)){var e=new Yf(d);c.push(e);this.ba.set(d,e)}a.ya().forEach(function(a){var b;b=Vf(a);b=new tf(a.m(),b,a.Gc);b=hg(a)?new Wf(b):b;c.push(b);this.ba.set(a.m(),b)},this)},this);return w()};ig.prototype.get=function(a){return this.ba.get(a)||null};
ig.prototype.set=function(a,b){var c=this.kc.get(a)||null;null===c&&(c=[],this.kc.set(a,c));for(var d=null,e=0;e<c.length;e++)if(c[e].getName()==b.getName()){d=e;break}null!==d&&0<c.length?c.splice(d,1,b):c.push(b);this.ba.set(b.getName(),b)};function jg(a){this.jc=[];q(a)&&this.add(a)}jg.prototype.toString=function(){return this.jc.map(function(a){return a.toString()}).join(",")};jg.prototype.Ma=function(a){return this.jc.some(function(b){return b.contains(a)})};jg.prototype.za=g("jc");
jg.prototype.add=function(a){if(0!=a.length)if(a=this.jc.concat(a),1==a.length)this.jc=a;else{a.sort(yd);for(var b=[],c=a[0],d=1;d<a.length;++d)if(ud(c,a[d])){var e=a[d],f=wd();if(c.c!=F&&e.c!=F){var h=vd(c.c,e.c,!0);1!=h?(f.c=c.c,f.da=0!=h?c.da:c.da&&e.da):(f.c=e.c,f.da=e.da)}c.A!=F&&e.A!=F&&(h=vd(c.A,e.A,!1),-1!=h?(f.A=c.A,f.ma=0!=h?c.ma:c.ma&&e.ma):(f.A=e.A,f.ma=e.ma));c=f}else b.push(c),c=a[d];b.push(c);this.jc=b}};
function kg(a,b){var c=[];a.za().map(function(a){return b.za().map(function(b){var c;if(ud(a,b)){c=wd();var h=vd(a.c,b.c,!0),h=0==h?a.da?a:b:-1!=h?a:b;c.c=h.c;c.da=h.da;a.A==F||b.A==F?b=a.A==F?b:a:(h=vd(a.A,b.A,!1),b=0==h?a.ma?a:b:-1==h?a:b);c.A=b.A;c.ma=b.ma}else c=null;return c})}).forEach(function(a){c=c.concat(a)});return new jg(c.filter(function(a){return null!==a}))};function lg(a,b){var c=[],d=null,e=null;$d(a,function(a){var h=b(a);null==a.getParent()?e=h:Xd(d,h);var k=a.getParent();null!==k&&L(k).length==L(d).length&&(k=c.indexOf(d),-1!=k&&c.splice(k,1));1<L(a).length&&c.push(h);d=null===a.h?c[c.length-1]:h});return e}function mg(a){return ng(a,function(a){return null===a.h})}
function og(a){var b=a.getParent(),c=0;null!==b&&(c=L(b).indexOf(a),b.removeChild(a));var d=L(a).slice();d.forEach(function(d,f){a.removeChild(d);null===b||Wd(b,d,c+f)});return{parent:b,children:d}}function pg(a,b){L(a).slice().forEach(function(c){a.removeChild(c);Xd(b,c)});Xd(a,b)}function qg(a){var b=Vd(a,0);og(a);pg(b,a);return b}
function rg(a,b,c){var d=Vd(a,0),e=L(d).slice();if(!e.some(function(a){return b(a)}))return a;og(a);e.forEach(function(e,h){if(b(e)){var k=c(a);Yd(d,h);Xd(k,e);Wd(d,k,h)}});return d}function sg(a,b,c,d){var e=a.getParent();null!==e&&(a=L(e).indexOf(a),Yd(e,a),Wd(e,c,a));L(b).slice().forEach(function(a){b.removeChild(a);Xd(d,a)});return c}function ng(a,b,c){function d(a){b(a)&&e.push(a);null!=c&&c(a)||L(a).forEach(d)}var e=[];d(a);return e}
function tg(a,b){var c=b||function(a){return a.toString()+"\n"},d="";$d(a,function(a){for(var b=0;b<Ud(a);b++)d+="-";d+=c(a)});return d};function ug(a){ae.call(this);this.Rb=a;this.ab=!1}t(ug,ae);m=ug.prototype;m.Kb=function(){return lg(this,function(a){if(a instanceof ug){var b=new ug(a.Rb);b.ab=a.ab;a=a.W();b.pa=a;return b}return a.Kb()})};m.hb=function(a){var b=a||[];$d(this,function(a){a!=this&&a.hb(b)}.bind(this));a=D(b);return wc(a)};m.vd=function(a){this.ab!=a&&(this.ab=a,this.Rb="and"==this.Rb?"or":"and",L(this).forEach(function(b){return b.vd(a)}))};
m.eval=function(a){var b=L(this).map(function(b){return b.eval(a)});return vg(this,b)};function vg(a,b){return"and"==a.Rb?Ed(b):Fd(b)}m.toString=function(){return"combined_pred_"+this.Rb.toString()};function wg(a,b,c){ae.call(this);this.ga=a;this.la=b;this.G=c;this.$d=null;a=Md.Bc();this.vc=Sd(a,this.ga.I(),this.G);this.dg=a.Te.get(this.ga.I())||null}t(wg,ae);m=wg.prototype;m.Kb=function(){var a=new wg(this.ga,this.la,this.G),b=this.W();a.pa=b;return a};m.hb=function(a){return null!=a?(a.push(this.ga),a.push(this.la),a):[this.ga,this.la]};
m.reverse=function(){var a=this.G;switch(this.G){case "gt":a="lt";break;case "lt":a="gt";break;case "gte":a="lte";break;case "lte":a="gte"}return new wg(this.la,this.ga,a)};m.eval=function(a){var b=a.entries.filter(function(a){var b=I(a,this.ga);a=I(a,this.la);return this.vc(b,a)},this);return new G(b,H(a))};m.toString=function(){return"join_pred("+this.ga.m()+" "+this.G+" "+this.la.m()+")"};
function xg(a,b,c){var d=null,e=null;-1!=H(b).indexOf(J(a.ga.H()))?(d=b,e=c):(d=c,e=b);if(d.entries.length>e.entries.length){a:{b=a.ga;a.ga=a.la;a.la=b;b=a.G;switch(a.G){case "gt":b="lt";break;case "lt":b="gt";break;case "gte":b="lte";break;case "lte":b="gte";break;default:break a}a.G=b;a.vc=Sd(Md.Bc(),a.ga.I(),a.G)}return[e,d]}return[d,e]}function yg(a){var b={};a.hb().forEach(function(a){b[a.getName()]=null});return b}
function zg(a,b,c){null===a.$d&&(a.$d=yg(a.la.H()));var d=new Hd(new z(-1,a.$d),!1);return Kd(b,c,d,[J(a.la.H())])}
function Ag(a,b,c,d){var e=[b,c];d||(e=xg(a,b,c));b=e[0];c=e[1];var e=b,f=c,h=a.ga,k=a.la;d&&(e=c,f=b,h=a.la,k=a.ga);var n=new Uc,x=[];e.entries.forEach(function(a){var b=String(I(a,h));n.set(b,a)});var T=H(e),qa=H(f);f.entries.forEach(function(a){var b=I(a,k),c=String(b);null!==b&&n.has(c)?n.get(c).forEach(function(b){b=Kd(a,qa,b,T);x.push(b)}):d&&x.push(zg(this,a,qa))}.bind(a));a=H(b).concat(H(c));return new G(x,a)}
function Bg(a,b,c,d,e){function f(a,b){var c=new Hd(b,1<T.length),c=Kd(a,qa,c,T);x.push(c)}var h=d.Wf.H(),k=b,n=c;-1!=H(b).indexOf(J(h))&&(k=c,n=b);var x=[],T=H(n),qa=H(k);k.entries.forEach(function(a){var b=this.dg(I(a,d.lg)),b=d.index.get(b);0!=b.length&&(d.index.Ia()?f(a,e.get(b[0])):mf(e,b).forEach(f.bind(null,a)))},a);a=H(k).concat(H(n));return new G(x,a)};function Cg(a,b,c){return null===b?new ce(a,b,c):q(b.m)?new wg(a,b,c):new ce(a,b,c)};var Dg={};r("lf.schema.DataStoreType",Dg);Dg.INDEXED_DB=0;Dg.MEMORY=1;Dg.LOCAL_STORAGE=2;Dg.FIREBASE=3;Dg.WEB_SQL=4;Dg.OBSERVABLE_STORE=5;function Eg(a,b,c,d){this.Rc=a;this.name=b;this.Gc=c;this.f=d}Eg.prototype.m=function(){return this.Rc+"."+this.name};function hg(a){return a.f.some(function(a){return a.ca.Fc()})}function Q(a,b,c,d){this.w=a;this.ka=c;this.K=b;this.qd=d;this.eb=null}r("lf.schema.Table",Q);Q.prototype.getName=g("w");Q.prototype.getName=Q.prototype.getName;Q.prototype.Za=g("eb");
function J(a){return a.eb||a.w}Q.prototype.pc=function(a){var b=new this.constructor(this.w);b.eb=a;b.xg=this.xg;return b};Q.prototype.as=Q.prototype.pc;Q.prototype.createRow=Q.prototype.tb;Q.prototype.deserializeRow=Q.prototype.Db;Q.prototype.ya=g("ka");Q.prototype.getIndices=Q.prototype.ya;Q.prototype.hb=g("K");Q.prototype.getColumns=Q.prototype.hb;Q.prototype.getConstraint=Q.prototype.Eb;Q.prototype.zb=g("qd");Q.prototype.persistentIndex=Q.prototype.zb;function Ue(a){return a.w+".#"};function R(a,b){this.child=a;this.Jb=b;this.eb=null}m=R.prototype;m.getName=function(){return this.Jb+"("+this.child.getName()+")"};m.m=function(){return this.Jb+"("+this.child.m()+")"};m.H=function(){return this.child.H()};m.toString=function(){return this.m()};m.I=function(){return this.child.I()};m.Za=g("eb");m.ya=function(){return[]};m.xa=l(null);m.Fc=l(!1);m.pc=function(a){this.eb=a;return this};R.prototype.as=R.prototype.pc;
function Fg(a){for(var b=[a];a instanceof R;)b.push(a.child),a=a.child;return b}function Gg(a){this.eb=a||null;this.S=new Q("#UnknownTable",[],[],!1)}m=Gg.prototype;m.getName=l("*");m.m=function(){return this.getName()};m.toString=function(){return this.m()};m.H=g("S");m.I=l(4);m.Za=g("eb");m.ya=function(){return[]};m.xa=l(null);m.Fc=l(!1);r("lf.fn.avg",function(a){return new R(a,"AVG")});function Hg(a){return new R(a||new Gg,"COUNT")}r("lf.fn.count",Hg);function Ig(a){return new R(a,"DISTINCT")}r("lf.fn.distinct",Ig);r("lf.fn.max",function(a){return new R(a,"MAX")});r("lf.fn.min",function(a){return new R(a,"MIN")});r("lf.fn.stddev",function(a){return new R(a,"STDDEV")});r("lf.fn.sum",function(a){return new R(a,"SUM")});r("lf.fn.geomean",function(a){return new R(a,"GEOMEAN")});function S(a,b){K.call(this);this.Of=b}t(S,K);S.prototype.exec=function(a,b){switch(this.Of){case 1:return Jg(this,a,b);case 0:return Kg(this,a,b);default:return Lg(this,a,b)}};S.prototype.toString=l("dummy_node");S.prototype.Sc=function(){return this.toString()};function Lg(a,b,c){return new v(function(a){a(this.ea(b,[],c))}.bind(a))}function Jg(a,b,c){return Vd(a,0).exec(b,c).then(function(a){return this.ea(b,a,c)}.bind(a))}
function Kg(a,b,c){var d=L(a).map(function(a){return a.exec(b,c)});return fb(d).then(function(a){var d=[];a.forEach(function(a){for(var b=0;b<a.length;++b)d.push(a[b])});return this.ea(b,d,c)}.bind(a))};function Mg(a){S.call(this,0,1);this.ye=a}t(Mg,S);Mg.prototype.toString=function(){return"aggregation("+this.ye.map(function(a){return a.m()}).toString()+")"};Mg.prototype.ea=function(a,b){b.forEach(function(a){Ng(new Og(a,this.ye))},this);return b};function Og(a,b){this.Ja=a;this.K=b}
function Ng(a){a.K.forEach(function(a){a=Fg(a).reverse();for(var c=1;c<a.length;c++){var d=a[c],e=Fg(d).slice(-1)[0],f=d.child instanceof R?Bd(this.Ja,d.child):this.Ja;if(null!==f.Ya&&f.Ya.has(d.m()))break;f=Pg(d.Jb,f,e);e=this.Ja;null===e.Ya&&(e.Ya=B());e.Ya.set(d.m(),f)}},a)}
function Pg(a,b,c){var d=null;switch(a){case "MIN":d=Qg(b,c,function(a,b){return b<a?b:a});break;case "MAX":d=Qg(b,c,function(a,b){return b>a?b:a});break;case "DISTINCT":d=Rg(b,c);break;case "COUNT":d=Sg(b,c);break;case "SUM":d=Tg(b,c);break;case "AVG":a=Sg(b,c);0<a&&(d=Tg(b,c)/a);break;case "GEOMEAN":d=Ug(b,c);break;default:d=Vg(b,c)}return d}function Qg(a,b,c){return a.entries.reduce(function(a,e){var f=I(e,b);return null===f?a:null===a?f:c(a,f)},null)}
function Sg(a,b){return b instanceof Gg?a.entries.length:a.entries.reduce(function(a,d){return a+(ea(I(d,b))?0:1)},0)}function Tg(a,b){return Qg(a,b,function(a,b){return b+a})}function Vg(a,b){var c=[];a.entries.forEach(function(a){a=I(a,b);null===a||c.push(a)});return 0==c.length?null:Bb.apply(null,c)}function Ug(a,b){var c=0,d=a.entries.reduce(function(a,d){var h=I(d,b);if(0==h||null===h)return a;c++;return a+Math.log(h)},0);return 0==c?null:Math.pow(Math.E,d/c)}
function Rg(a,b){var c=B();a.entries.forEach(function(a){var e=I(a,b);c.set(e,a)});return new G(C(c),H(a))};function Wg(a,b){this.Da=a;this.aa=b}Wg.prototype.ib=g("Da");Wg.prototype.$=g("aa");function Xg(){K.call(this)}t(Xg,K);function Yg(a,b){K.call(this);this.table=a;this.values=b}t(Yg,Xg);function Zg(a,b){Yg.call(this,a,b)}t(Zg,Yg);function $g(a){K.call(this);this.table=a}t($g,Xg);$g.prototype.toString=function(){return"delete("+this.table.getName()+")"};function ah(a,b){K.call(this);this.table=a;this.te=b}t(ah,Xg);
ah.prototype.toString=function(){var a=[];this.te&&(a=this.te.map(function(a){return a.O.getName()},this));return"update("+this.table.getName()+", ["+a.join(",")+"])"};function bh(a){K.call(this);this.J=a}t(bh,Xg);bh.prototype.toString=function(){return"select("+this.J.toString()+")"};function ch(a){K.call(this);this.table=a}t(ch,Xg);ch.prototype.toString=function(){var a="table_access("+this.table.getName();null===this.table.Za()||(a+=" as "+this.table.Za());return a+")"};
function dh(){K.call(this)}t(dh,Xg);dh.prototype.toString=l("cross_product");function eh(a,b){K.call(this);this.f=a;this.Nb=b}t(eh,Xg);eh.prototype.toString=function(){var a="project("+this.f.toString();if(null!==this.Nb)var b=this.Nb.map(function(a){return a.m()}).join(", "),a=a+(", groupBy("+b+")");return a+")"};function fh(a){K.call(this);this.M=a}t(fh,Xg);fh.prototype.toString=function(){return"order_by("+le(this.M)+")"};function gh(a){K.call(this);this.f=a}t(gh,Xg);
gh.prototype.toString=function(){return"aggregation("+this.f.toString()+")"};function hh(a){K.call(this);this.f=a}t(hh,Xg);hh.prototype.toString=function(){return"group_by("+this.f.toString()+")"};function ih(a){K.call(this);this.X=a}t(ih,Xg);ih.prototype.toString=function(){return"limit("+this.X+")"};function jh(a){K.call(this);this.N=a}t(jh,Xg);jh.prototype.toString=function(){return"skip("+this.N+")"};function kh(a,b){K.call(this);this.J=a;this.Pb=b}t(kh,Xg);
kh.prototype.toString=function(){return"join(type: "+(this.Pb?"outer":"inner")+", "+this.J.toString()+")"};function lh(){};function mh(){}t(mh,lh);mh.prototype.nb=function(a){this.Z=a;this.Wa(this.Z);return this.Z};mh.prototype.Wa=function(a){if(a instanceof bh){var b=nh(this,a.J),b=oh(this,b);sg(a,a,b[0],b[1]);a==this.Z&&(this.Z=b[0]);a=b[0]}L(a).forEach(function(a){this.Wa(a)},this)};function nh(a,b){if(0==L(b).length||"and"!=b.Rb)return[b];var c=L(b).slice().map(function(a){b.removeChild(a);return nh(this,a)},a);return Fa(c)}
function oh(a,b){var c=null,d=null;b.map(function(a,b){var h=new bh(a);0==b?c=h:Xd(d,h);d=h},a);return[c,d]};function ph(){}t(ph,lh);ph.prototype.nb=function(a,b){if(3>b.c.length)return a;this.Z=a;this.Wa(this.Z);return this.Z};ph.prototype.Wa=function(a){if(a instanceof dh)for(;2<L(a).length;){for(var b=new dh,c=0;2>c;c++){var d=Yd(a,0);Xd(b,d)}Wd(a,b,0)}L(a).forEach(function(a){this.Wa(a)},this)};function qh(){S.call(this,0,0)}t(qh,S);qh.prototype.toString=l("cross_product");qh.prototype.ea=function(a,b){for(var c=b[0],d=b[1],e=[],f=H(c),h=H(d),k=0;k<c.entries.length;k++)for(var n=0;n<d.entries.length;n++){var x=Kd(c.entries[k],f,d.entries[n],h);e.push(x)}c=H(c).concat(H(d));return[new G(e,c)]};function rh(a,b){oe.call(this,a,b);this.Ea=a.j(oc);this.Gb=a.j(pc)}t(rh,oe);rh.prototype.getPriority=l(2);rh.prototype.ce=function(a){0==this.I()?sh(this,a):this.Pc()};function sh(a,b){a.sd.forEach(function(a,d){a instanceof ke&&re(this.Gb,a,b[d])},a)}rh.prototype.Pc=function(){var a=te(this.Gb,this.$());0!=a.length&&(a=new qe(this.global,a),ue(this.Ea,a))};function th(a){fe.call(this,a)}t(th,fe);th.prototype.$=function(){var a=D();a.add(this.c);uh(this,this.c.getName(),a);return a};function uh(a,b,c){var d=vh(a.ca.info(),b,1);vh(a.ca.info(),b).forEach(c.add.bind(c));d.forEach(function(a){uh(this,a.getName(),c)},a)}th.prototype.clone=function(){var a=new th(this.ca);ie(a,this);a.c=this.c;return a};th.prototype.bind=function(a){th.Ib.bind.call(this,a);je(this,a);return this};function wh(a){fe.call(this,a)}t(wh,fe);wh.prototype.$=function(){var a=D();a.add(this.Ha);var b=this.ca.info();xh(this.Ha.getName(),b.af).forEach(a.add.bind(a));this.$b&&vh(b,this.Ha.getName()).forEach(a.add.bind(a));return a};wh.prototype.clone=function(){var a=new wh(this.ca);ie(a,this);a.Ha=this.Ha;this.values&&(a.values=this.values instanceof Ld?this.values:this.values.slice());a.$b=this.$b;a.ac=this.ac;return a};
wh.prototype.bind=function(a){wh.Ib.bind.call(this,a);this.ac&&(this.values=this.ac instanceof Ld?a[this.ac.xa()]:this.ac.map(function(b){return b instanceof Ld?a[b.xa()]:b}));return this};function yh(a){fe.call(this,a)}t(yh,fe);yh.prototype.$=function(){var a=D();a.add(this.table);var b=this.set.map(function(a){return a.O.m()}),c=this.ca.info();zh(c,b).forEach(a.add.bind(a));Ah(c,b).forEach(a.add.bind(a));return a};yh.prototype.clone=function(){var a=new yh(this.ca);ie(a,this);a.table=this.table;a.set=this.set?this.set.slice():this.set;return a};yh.prototype.bind=function(a){yh.Ib.bind.call(this,a);this.set.forEach(function(b){-1!=b.Xc&&(b.value=a[b.Xc])});je(this,a);return this};function Bh(a,b){if(null==b)return"NULL";switch(a){case 1:return b?1:0;case 3:case 4:return b;case 0:return"'"+ub(b)+"'";default:return"'"+b.toString()+"'"}}function Ch(a,b){var c=a.$b?"INSERT OR REPLACE":"INSERT",d=a.Ha.hb(),c=c+(" INTO "+a.Ha.getName()+"("),c=c+d.map(function(a){return a.getName()}).join(", "),c=c+") VALUES (";return a.values.map(function(a){var f=d.map(function(c){var d=a.s[c.getName()];return b?null!=d?"#":"NULL":Bh(c.I(),d)});return c+f.join(", ")+");"}).join("\n")}
function Dh(a){switch(a){case "between":return"BETWEEN";case "eq":return"=";case "gte":return">=";case "gt":return">";case "in":return"IN";case "lte":return"<=";case "lt":return"<";case "match":return"LIKE";case "neq":return"<>";default:return"UNKNOWN"}}function Eh(a,b,c,d){return a instanceof Ld?"?"+a.xa().toString():d?null!=a?"#":"NULL":"match"==b?"'"+a.toString()+"'":"in"==b?"("+a.map(function(a){return Bh(c,a)}).join(", ")+")":"between"==b?Bh(c,a[0])+" AND "+Bh(c,a[1]):Bh(c,a).toString()}
function Fh(a,b){return L(a).map(function(a){return"("+Gh(a,b)+")"}).join("and"==a.Rb?" AND ":" OR ")}function Hh(a){return[a.ga.m(),Dh(a.G),a.la.m()].join(" ")}function Gh(a,b){if(a instanceof ce){var c=a.O.m(),d=Dh(a.G),e=Eh(a.value,a.G,a.O.I(),b);return"="==d&&"NULL"==e?[c,"IS NULL"].join(" "):"<>"==d&&"NULL"==e?[c,"IS NOT NULL"].join(" "):[c,d,e].join(" ")}if(a instanceof ug)return Fh(a,b);if(a instanceof wg)return Hh(a);throw new E(357,typeof a);}
function Ih(a,b){var c=Gh(a,b);return c?" WHERE "+c:""}function Jh(a,b){var c="UPDATE "+a.table.getName()+" SET ",c=c+a.set.map(function(a){var b=a.O.m()+" = ";return-1!=a.Xc?b+"?"+a.Xc.toString():b+Bh(a.O.I(),a.value).toString()}).join(", ");a.u&&(c+=Ih(a.u,b));return c+";"}
function Kh(a,b){var c="*";a.f.length&&(c=a.f.map(function(a){return a.Za()?a.m()+" AS "+a.Za():a.m()}).join(", "));c="SELECT "+c+" FROM ";null!=a.yb&&0!=a.yb.size?c+=Lh(a,b):(c+=a.c.map(Mh).join(", "),a.u&&(c+=Ih(a.u,b)));if(a.M)var d=a.M.map(function(a){return a.O.m()+(0==a.lb?" DESC":" ASC")}).join(", "),c=c+(" ORDER BY "+d);a.ja&&(d=a.ja.map(function(a){return a.m()}).join(", "),c+=" GROUP BY "+d);a.X&&(c+=" LIMIT "+a.X.toString());a.N&&(c+=" SKIP "+a.N.toString());return c+";"}
function Mh(a){return J(a)!=a.getName()?a.getName()+" AS "+J(a):a.getName()}function Lh(a,b){for(var c=ng(a.u,function(a){return a instanceof wg}),d=c.map(Hh),e=Mh(a.c[0]),f=1;f<a.c.length;f++)var h=Mh(a.c[f]),e=a.yb.has(c[d.length-f].W())?e+(" LEFT OUTER JOIN "+h):e+(" INNER JOIN "+h),e=e+(" ON ("+d[d.length-f]+")");c=Vd(a.u,0);c instanceof wg||(e+=" WHERE "+Gh(c,b));return e}
function Nh(a,b){var c=b||!1,d=a.a.clone();if(d instanceof wh)return Ch(d,c);if(d instanceof th){var e="DELETE FROM "+d.c.getName();d.u&&(e+=Ih(d.u,c));return e+";"}if(d instanceof yh)return Jh(d,c);if(d instanceof ke)return Kh(d,c);throw new E(358,typeof d);};function U(a,b){this.global=a;this.wg=a.j(nc);this.Ea=a.j(oc);this.a=b}r("lf.query.BaseBuilder",U);U.prototype.exec=function(){try{this.fb()}catch(a){return cb(a)}return new v(function(a,b){var c=new rh(this.global,[this.Dc()]);ue(this.Ea,c).then(function(b){a(zd(b[0]))},b)},this)};U.prototype.exec=U.prototype.exec;U.prototype.Qf=function(){var a=function(a){return a.Sc(this.a)+"\n"}.bind(this);return tg(Oh(this).ib(),a)};U.prototype.explain=U.prototype.Qf;
U.prototype.bind=function(a){this.a.bind(a);return this};U.prototype.bind=U.prototype.bind;U.prototype.Dg=function(a){return Nh(this,a)};U.prototype.toSql=U.prototype.Dg;U.prototype.fb=aa();function Oh(a){if(null==a.bf){var b;b=a.wg;var c=a.a,d=b.gg.create(c);b=b.tg.create(d,c);a.bf=b}return a.bf}U.prototype.Dc=function(){return{context:this.a.clone(),fe:Oh(this)}};function Ph(a){U.call(this,a,new th(a.j(qc)))}t(Ph,U);r("lf.query.DeleteBuilder",Ph);Ph.prototype.c=function(a){if(null!=this.a.c)throw new E(515);this.a.c=a;return this};Ph.prototype.from=Ph.prototype.c;Ph.prototype.u=function(a){this.Cd();this.a.u=a;return this};Ph.prototype.where=Ph.prototype.u;Ph.prototype.Cd=function(){if(null==this.a.c)throw new E(548);if(null!=this.a.u)throw new E(516);};Ph.prototype.fb=function(){Ph.Ib.fb.call(this);if(null==this.a.c)throw new E(517);};function Qh(a,b){U.call(this,a,new wh(a.j(qc)));this.a.$b=b||!1}t(Qh,U);r("lf.query.InsertBuilder",Qh);Qh.prototype.fb=function(){Qh.Ib.fb.call(this);var a=this.a;if(null==a.Ha||null==a.values)throw new E(518);if(a.$b&&null===a.Ha.Eb().fd())throw new E(519);};Qh.prototype.Ha=function(a){if(null!=this.a.Ha)throw new E(520);this.a.Ha=a;return this};Qh.prototype.into=Qh.prototype.Ha;
Qh.prototype.values=function(a){if(null!=this.a.values)throw new E(521);a instanceof Ld||a.some(function(a){return a instanceof Ld})?this.a.ac=a:this.a.values=a;return this};Qh.prototype.values=Qh.prototype.values;function Rh(a){return Sh("and",Array.prototype.slice.call(arguments))}r("lf.op.and",Rh);r("lf.op.or",function(a){return Sh("or",Array.prototype.slice.call(arguments))});function Sh(a,b){var c=new ug(a);b.forEach(function(a){Xd(c,a)});return c}r("lf.op.not",function(a){a.vd(!0);return a});function V(a,b){U.call(this,a,new ke(a.j(qc)));this.Je=this.xd=!1;this.a.f=b;Th(this);Uh(this)}t(V,U);r("lf.query.SelectBuilder",V);V.prototype.fb=function(){V.Ib.fb.call(this);var a=this.a;if(null==a.c)throw new E(522);if(q(a.Qb)&&!q(a.X)||q(a.Yb)&&!q(a.N))throw new E(523);null!=this.a.ja?Vh(this):Wh(this)};function Th(a){var b=a.a.f.filter(function(a){return a instanceof R&&"DISTINCT"==a.Jb},a);if(0!=b.length&&(1!=b.length||1!=a.a.f.length))throw new E(524);}
function Vh(a){var b=a.a.f.filter(function(a){return!(a instanceof R)}).map(function(a){return a.m()}),c=!1;if(0==a.a.ja.length||0==a.a.f.length)c=!0;else{var d=a.a.ja.map(function(a){return a.m()});(c=b.some(function(a){return-1==d.indexOf(a)}))||(c=a.a.ja.some(function(a){a=a.I();return 6==a||0==a}))}if(c)throw new E(525);}function Wh(a){var b=a.a.f.some(function(a){return a instanceof R},a);a=a.a.f.some(function(a){return!(a instanceof R)},a)||0==a.a.f.length;if(b&&a)throw new E(526);}
function Uh(a){a.a.f.forEach(function(a){if(a instanceof R&&!Xh(a.Jb,a.I()))throw new E(527,a.m());},a)}function Yh(a,b){if(null==a.a.c)throw new E(b);}V.prototype.c=function(a){if(this.Je)throw new E(515);this.Je=!0;null==this.a.c&&(this.a.c=[]);this.a.c.push.apply(this.a.c,Array.prototype.slice.call(arguments));return this};V.prototype.from=V.prototype.c;V.prototype.u=function(a){Yh(this,548);if(this.xd)throw new E(516);this.xd=!0;Zh(this,a);return this};V.prototype.where=V.prototype.u;
function Zh(a,b){if(null!=a.a.u){var c=Rh(b,a.a.u);a.a.u=c}else a.a.u=b}V.prototype.$f=function(a,b){Yh(this,542);if(this.xd)throw new E(547);this.a.c.push(a);Zh(this,b);return this};V.prototype.innerJoin=V.prototype.$f;V.prototype.eg=function(a,b){Yh(this,542);if(!(b instanceof wg))throw new E(541);if(this.xd)throw new E(547);this.a.c.push(a);null==this.a.yb&&(this.a.yb=D());var c=b;J(a)!=J(b.la.H())&&(c=b.reverse());this.a.yb.add(c.W());Zh(this,c);return this};V.prototype.leftOuterJoin=V.prototype.eg;
V.prototype.X=function(a){if(null!=(this.a.X||this.a.Qb))throw new E(528);if(a instanceof Ld)this.a.Qb=a;else{if(0>a)throw new E(531);this.a.X=a}return this};V.prototype.limit=V.prototype.X;V.prototype.N=function(a){if(null!=(this.a.N||this.a.Yb))throw new E(529);if(a instanceof Ld)this.a.Yb=a;else{if(0>a)throw new E(531);this.a.N=a}return this};V.prototype.skip=V.prototype.N;V.prototype.M=function(a,b){Yh(this,549);null==this.a.M&&(this.a.M=[]);this.a.M.push({O:a,lb:null!=b?b:1});return this};
V.prototype.orderBy=V.prototype.M;V.prototype.ja=function(a){Yh(this,549);if(null!=this.a.ja)throw new E(530);null==this.a.ja&&(this.a.ja=[]);this.a.ja.push.apply(this.a.ja,Array.prototype.slice.call(arguments));return this};V.prototype.groupBy=V.prototype.ja;function Xh(a,b){switch(a){case "COUNT":case "DISTINCT":return!0;case "AVG":case "GEOMEAN":case "STDDEV":case "SUM":return 4==b||3==b;case "MAX":case "MIN":return 4==b||3==b||5==b||2==b}return!1}
V.prototype.clone=function(){var a=new V(this.global,this.a.f);a.a=this.a.clone();a.a.ad=null;return a};V.prototype.clone=V.prototype.clone;function $h(a,b){U.call(this,a,new yh(a.j(qc)));this.a.table=b}t($h,U);r("lf.query.UpdateBuilder",$h);$h.prototype.set=function(a,b){var c={Xc:b instanceof Ld?b.xa():-1,O:a,value:b};null!=this.a.set?this.a.set.push(c):this.a.set=[c];return this};$h.prototype.set=$h.prototype.set;$h.prototype.u=function(a){this.Cd();this.a.u=a;return this};$h.prototype.where=$h.prototype.u;$h.prototype.Cd=function(){if(null!=this.a.u)throw new E(516);};
$h.prototype.fb=function(){$h.Ib.fb.call(this);if(null==this.a.set)throw new E(532);if(this.a.set.some(function(a){return a.value instanceof Ld}))throw new E(501);};function ai(a){this.a=a;this.Da=null}ai.prototype.gc=function(){null===this.Da&&(this.Da=this.dd());return this.Da};function bi(a){ai.call(this,a)}t(bi,ai);bi.prototype.dd=function(){return this.a.$b?new Zg(this.a.Ha,this.a.values):new Yg(this.a.Ha,this.a.values)};function ci(a){ai.call(this,a)}t(ci,ai);ci.prototype.dd=function(){var a=new ah(this.a.table,this.a.set),b=null!=this.a.u?new bh(this.a.u.Kb()):null,c=new ch(this.a.table);null===b?Xd(a,c):(Xd(b,c),Xd(a,b));return a};function di(a,b,c){this.Da=a;this.ge=b;this.Ub=c}di.prototype.gc=function(){this.Ub.forEach(function(a){this.Da=a.nb(this.Da,this.ge)},this);return this.Da};function ei(a,b){ai.call(this,a);this.Ub=b}t(ei,ai);ei.prototype.dd=function(){var a=new $g(this.a.c),b=null!=this.a.u?new bh(this.a.u.Kb()):null,c=new ch(this.a.c);null===b?Xd(a,c):(Xd(b,c),Xd(a,b));return(new di(a,this.a,this.Ub)).gc()};function fi(){}t(fi,lh);fi.prototype.nb=function(a,b){if(2>b.c.length)return a;this.Z=a;this.Wa(this.Z,b);return this.Z};fi.prototype.Wa=function(a,b){if(a instanceof bh&&a.J instanceof wg){var c=a.J.W(),d=Vd(a,0);d instanceof dh&&(c=null!=b.yb&&b.yb.has(c),c=new kh(a.J,c),sg(a,d,c,c),a==this.Z&&(this.Z=c),a=c)}L(a).forEach(function(a){this.Wa(a,b)},this)};function gi(){this.Wc=D()}t(gi,lh);gi.prototype.nb=function(a,b){this.Wc.clear();if(!q(b.u))return a;this.Z=a;this.Wa(this.Z);this.Wc.clear();return this.Z};gi.prototype.Wa=function(a){if(hi(a)){var b=a.J instanceof ce?ii(this,a):ji(this,a);this.Wc.add(a);b==a&&(b=Vd(a,0));null!==b&&(ea(b.getParent())&&(this.Z=b),hi(b)&&!this.Wc.has(b)&&this.Wa(b))}else L(a).forEach(function(a){this.Wa(a)},this)};
function ki(a,b,c){var d=b;if(Vd(b,0)instanceof bh)d=qg(b),ki(a,b,c);else if(li(b)){var e=[],d=rg(b,c,function(a){a=new bh(a.J);e.push(a);return a});e.forEach(function(a){ki(this,a,c)},a)}return d}function ii(a,b){var c=D([J(b.J.O.H())]),d=function(a){return mi(this,a,c)}.bind(a);return ki(a,b,d)}function ji(a,b){var c=D([J(b.J.ga.H()),J(b.J.la.H())]),d=function(a){return mi(this,a,c)}.bind(a);return ki(a,b,d)}
function mi(a,b,c){var d=D();mg(b).forEach(function(a){d.add(J(a.table))},a);b instanceof ch&&d.add(J(b.table));return xc(d,c)}function hi(a){return a instanceof bh&&!(a.J instanceof ug)}function li(a){a=Vd(a,0);return a instanceof dh||a instanceof kh};function ni(a,b){ai.call(this,a);this.Ub=b;this.ff=this.Xe=this.of=this.$e=this.ze=this.Me=this.nf=this.Ge=this.qf=null}t(ni,ai);
ni.prototype.dd=function(){oi(this);2<=this.a.c.length&&(this.Ge=new dh);this.nf=null!=this.a.u?new bh(this.a.u.Kb()):null;this.a.M&&(this.$e=new fh(this.a.M));null!=this.a.N&&0<this.a.N&&(this.of=new jh(this.a.N));null!=this.a.X&&(this.Xe=new ih(this.a.X));null!=this.a.ja&&(this.Me=new hh(this.a.ja));pi(this);this.ff=new eh(this.a.f||[],this.a.ja||null);var a=qi(this);return(new di(a,this.a,this.Ub)).gc()};
function qi(a){for(var b=[a.Xe,a.of,a.ff,a.$e,a.ze,a.Me,a.nf,a.Ge],c=null,d=null,e=0;e<b.length;e++){var f=b[e];null!==f&&(null===d?d=f:Xd(b[c],f),c=e)}a.qf.forEach(function(a){Xd(b[c],a)});return d}function oi(a){a.qf=a.a.c.map(function(a){return new ch(a)},a)}function pi(a){var b=a.a.f.filter(function(a){return a instanceof R});null!=a.a.M&&a.a.M.forEach(function(a){a.O instanceof R&&b.push(a.O)});0<b.length&&(a.ze=new gh(b))};function ri(){this.ne=[new mh,new ph,new gi,new fi];this.Jd=[new mh]}ri.prototype.create=function(a){var b=null;if(a instanceof wh)b=new bi(a);else if(a instanceof th)b=new ei(a,this.Jd);else if(a instanceof ke)b=new ni(a,this.ne);else if(a instanceof yh)b=new ci(a);else throw new E(513);b=b.gc();return new Wg(b,a.$())};function si(a){S.call(this,0,1);this.S=a}t(si,S);si.prototype.toString=function(){return"delete("+this.S.getName()+")"};si.prototype.ea=function(a,b){var c=b[0].entries.map(function(a){return a.sa});a.remove(this.S,c);return[Dd()]};function ti(a,b){S.call(this,0,-1);this.table=b;this.D=a.j(mc)}t(ti,S);ti.prototype.toString=function(){return"get_row_count("+this.table.getName()+")"};ti.prototype.ea=function(){var a=this.D.get(Ue(this.table)),b=new G([],[this.table.getName()]),c=Hg(),a=a.Oa().oa;null===b.Ya&&(b.Ya=B());b.Ya.set(c.m(),a);return[b]};function ui(a,b){S.call(this,0,-1);this.U=a.j(lc);this.D=a.j(mc);this.table=b}t(ui,S);ui.prototype.toString=function(){var a="table_access("+this.table.getName();null===this.table.Za()||(a+=" as "+this.table.Za());return a+")"};ui.prototype.ea=function(){var a=this.D.get(Ue(this.table)).$a();return[Gd(mf(this.U,a),[J(this.table)])]};function vi(a){this.g=a}t(vi,lh);vi.prototype.nb=function(a,b){this.Z=a;if(!this.Dd(b))return a;var c=ng(a,function(a){return a instanceof ui})[0],d=new ti(this.g,c.table);sg(c,c,d,d);return this.Z};vi.prototype.Dd=function(a){return 1==a.f.length&&1==a.c.length&&null==a.u&&null==a.X&&null==a.N&&null==a.ja?(a=a.f[0],a instanceof R&&"COUNT"==a.Jb&&a.child instanceof Gg):!1};function wi(a){S.call(this,0,1);this.Le=a}t(wi,S);wi.prototype.toString=function(){return"groupBy("+this.Le.map(function(a){return a.m()}).toString()+")"};wi.prototype.ea=function(a,b){return xi(this,b[0])};function xi(a,b){var c=new Uc,d=function(a){return this.Le.map(function(b){return I(a,b)},this).join(",")}.bind(a);b.entries.forEach(function(a){c.set(d(a),a)},a);return c.keys().map(function(a){return new G(c.get(a),H(b))},a)};function yi(a,b,c){S.call(this,0,0);this.D=a.j(mc);this.U=a.j(lc);this.J=b;this.Pb=c;this.Ad="eq"==this.J.G?0:2;this.Ne=null}t(yi,S);var zi=["hash","index_nested_loop","nested_loop"];yi.prototype.toString=function(){return"join(type: "+(this.Pb?"outer":"inner")+", impl: "+zi[this.Ad]+", "+this.J.toString()+")"};
yi.prototype.ea=function(a,b){switch(this.Ad){case 0:return[Ag(this.J,b[0],b[1],this.Pb)];case 1:return[Bg(this.J,b[0],b[1],this.Ne,this.U)];default:var c=this.J,d=b[0],e=b[1],f=this.Pb,h=[d,e];f||(h=xg(c,d,e));for(var d=h[0],e=h[1],h=[],k=H(d),n=H(e),x=d.entries.length,T=e.entries.length,qa=T+256-1>>8,$a=0;$a<qa;){for(var Xb=0;Xb<x;Xb++){var $f=!1,ag=I(d.entries[Xb],c.ga);if(null!==ag)for(var Ci=Math.min($a+1<<8,T),Tc=$a<<8;Tc<Ci;Tc++)if(c.vc(ag,I(e.entries[Tc],c.la))){var $f=!0,Dj=Kd(d.entries[Xb],
k,e.entries[Tc],n);h.push(Dj)}f&&!$f&&h.push(zg(c,d.entries[Xb],k))}$a++}c=H(d).concat(H(e));return[new G(h,c)]}};function Ai(a,b){a.Ad=1;var c=a.D.get(b.xa().m());a.Ne={Wf:b,lg:b==a.J.ga?a.J.la:a.J.ga,index:c}};function Bi(a){S.call(this,0,-1);this.gf=a}t(Bi,S);Bi.prototype.toString=function(){return"no_op_step("+H(this.gf[0]).join(",")+")"};Bi.prototype.ea=g("gf");function Di(){}t(Di,lh);Di.prototype.nb=function(a,b){this.Z=a;if(!this.Dd(b))return a;ng(a,function(a){return a instanceof yi}).forEach(this.vg,this);return this.Z};Di.prototype.Dd=function(a){return 1<a.c.length};
Di.prototype.vg=function(a){if("eq"==a.J.G&&!a.Pb){var b=function(b){if(!(b instanceof ui))return null;b=J(b.table)==J(a.J.la.H())?a.J.la:a.J.ga;return ea(b.xa())?null:b},c=b(Vd(a,0)),b=b(Vd(a,1));if(null!==c||null!==b){b=null===b?c:b;Ai(a,b);var d=new G([],[J(b.H())]);Zd(a,new Bi([d]),b==c?0:1)}}};function Ei(a){a=a.map(function(a){return a.za()});a=Gb.apply(null,a);var b=[];Fb(a,function(a){b.push(a)});return b}function Fi(a){this.Ob=a}Fi.prototype.ed=function(){return 1==this.Ob.f.length?[wd()]:[this.Ob.f.map(function(){return wd()})]};function Gi(a,b){this.Ob=a;this.Ca=b;this.Hd=this.Ve=null}
function Hi(a,b){var c=B();a.Ca.keys().forEach(function(a){var e=this.Ca.get(a).map(function(a){return ge(b,a)},this),f=new jg([wd()]);e.forEach(function(a){var b=null;"between"==a.G?b=new rd(a.value[0],a.value[1],!1,!1):"eq"==a.G?(b=a.value,b=new rd(b,b,!1,!1)):b="gte"==a.G?new rd(a.value,F,!1,!1):"gt"==a.G?new rd(a.value,F,!0,!1):"lte"==a.G?new rd(F,a.value,!1,!1):new rd(F,a.value,!1,!0);a=a.ab?sd(b):[b];a=new jg(a);f=kg(f,a)});c.set(a,f)},a);return c}
Gi.prototype.ed=function(a){if(this.Ve==a)return this.Hd;for(var b=Hi(this,a),c=this.Ob.f.length-1;0<=c;c--){var d=this.Ob.f[c];if(null!==(b.get(d.ca.getName())||null))break;b.set(d.ca.getName(),new jg([wd()]))}this.Hd=1==this.Ob.f.length?C(b)[0].za():Ei(Ii(this,b));this.Ve=a;return this.Hd};function Ii(a,b){var c=B(),d=0;a.Ob.f.forEach(function(a){c.set(a.ca.getName(),d);d++});return bc(b).sort(function(a,b){return c.get(a)-c.get(b)}).map(function(a){return b.get(a)})};function Ji(a,b){this.rf=b;this.D=a.j(mc)}function Ki(a,b,c){c=c.filter(a.ag,a);if(0==c.length)return null;a=Li(a,c);if(0==a.length)return null;if(1==a.length)return a[0];var d=Number.MAX_VALUE;return a.reduce(function(a,c){var h=Mi(c,b);return h<d?(d=h,c):a},null)}
function Li(a,b){return a.rf.ya().map(function(a){a=new Ni(this.D,a);Oi(a,b);return a},a).filter(function(a){if(null===a.Ca)a=!1;else{for(var b=!1,e=!0,f=0;f<a.wb.f.length;f++){var h=a.Ca.has(a.wb.f[f].ca.getName());if(b&&h){e=!1;break}h||(b=!0)}a=e}return a})}Ji.prototype.ag=function(a){var b;if(b=a instanceof ce)de(a),b=null!==a.value&&("between"==a.G||"eq"==a.G||"gt"==a.G||"gte"==a.G||"lt"==a.G||"lte"==a.G);return b?a.O.H()==this.rf:!1};
function Ni(a,b){this.D=a;this.wb=b;this.Xf=D(this.wb.f.map(function(a){return a.ca.getName()}));this.Wd=this.Ca=null}function Pi(a){null===a.Wd&&(a.Wd=new Gi(a.wb,a.Ca));return a.Wd}function Oi(a,b){b.forEach(function(a){var b=a.hb()[0].getName();this.Xf.has(b)&&(null===this.Ca&&(this.Ca=new Uc),this.Ca.set(b,a.W()))},a)}function Mi(a,b){var c=Pi(a).ed(b),d=a.D.get(a.wb.m());return c.reduce(function(a,b){return a+d.bd(b)},0)};function Qi(a,b,c,d){S.call(this,0,-1);this.D=a.j(mc);this.index=b;this.Ue=c;this.ke=d;this.Vc=this.Uc=!1}t(Qi,S);Qi.prototype.toString=function(){return"index_range_scan("+this.index.m()+", ?, "+(this.ke?"reverse":"natural")+(this.Uc?", limit:?":"")+(this.Vc?", skip:?":"")+")"};Qi.prototype.Sc=function(a){var b=this.toString(),c=this.Ue.ed(a),b=b.replace("?",c.toString());this.Uc&&(b=b.replace("?",a.X.toString()));this.Vc&&(b=b.replace("?",a.N.toString()));return b};
Qi.prototype.ea=function(a,b,c){a=this.Ue.ed(c);b=this.D.get(this.index.m());c=(1==a.length&&a[0]instanceof rd&&xd(a[0])?qf(b.get(a[0].c),!1,this.Uc?c.X:void 0,this.Vc?c.N:void 0):b.$a(a,this.ke,this.Uc?c.X:void 0,this.Vc?c.N:void 0)).map(function(a){return new z(a,{})},this);return[Gd(c,[this.index.Rc])]};function Ri(a){S.call(this,0,1);this.rd=a}t(Ri,S);Ri.prototype.toString=l("select(?)");Ri.prototype.Sc=function(a){a=ge(a,this.rd);return this.toString().replace("?",a.toString())};Ri.prototype.ea=function(a,b,c){return[ge(c,this.rd).eval(b[0])]};function Si(a,b){S.call(this,0,1);this.U=a.j(lc);this.S=b}t(Si,S);Si.prototype.toString=function(){return"table_access_by_row_id("+this.S.getName()+")"};Si.prototype.ea=function(a,b){return[Gd(mf(this.U,Ad(b[0])),[J(this.S)])]};function Ti(a){this.g=a}t(Ti,lh);Ti.prototype.nb=function(a,b){this.Z=a;ng(a,function(a){return a instanceof ui}).forEach(function(a){var d=Ui(a);if(0!=d.length){var e=Ki(new Ji(this.g,a.table),b,d.map(function(a){return ge(b,a.rd)}));if(null!==e){var f=B();d.forEach(function(a){f.set(a.rd,a)},this);this.Z=Vi(this,e,f,a)}}},this);return this.Z};function Ui(a){var b=[];for(a=a.getParent();a;)a instanceof Ri&&b.push(a),a=a.getParent();return b}
function Vi(a,b,c,d){(null===b.Ca?[]:b.Ca.values()).map(function(a){return c.get(a)}).forEach(og);b=new Qi(a.g,b.wb,Pi(b),!1);a=new Si(a.g,d.table);Xd(a,b);sg(d,d,a,b);return b.ib()};function Wi(a,b){S.call(this,0,-1);this.D=a.j(mc);this.S=b}t(Wi,S);Wi.prototype.toString=function(){return"insert("+this.S.getName()+")"};Wi.prototype.ea=function(a,b,c){Xi(this.S,c.values,this.D);a.xb(this.S,c.values);return[Gd(c.values,[this.S.getName()])]};function Xi(a,b,c){a=a.Eb().fd();if(null===a?0:a.f[0].autoIncrement){var d=a.f[0].ca.getName();c=c.get(a.m()).max();var e=null===c?0:c[0];b.forEach(function(a){if(0==a.s[d]||null==a.s[d])e++,a.s[d]=e})}}
function Yi(a,b){S.call(this,0,-1);this.D=a.j(mc);this.S=b}t(Yi,S);Yi.prototype.toString=function(){return"insert_replace("+this.S.getName()+")"};Yi.prototype.ea=function(a,b,c){Xi(this.S,c.values,this.D);a.Rd(this.S,c.values);return[Gd(c.values,[this.S.getName()])]};function Zi(){S.call(this,0,1)}t(Zi,S);Zi.prototype.toString=l("limit(?)");Zi.prototype.Sc=function(a){return this.toString().replace("?",a.X.toString())};Zi.prototype.ea=function(a,b,c){b[0].entries.splice(c.X);return b};function $i(a){S.call(this,0,1);this.M=a}t($i,S);m=$i.prototype;m.toString=function(){return"order_by("+le(this.M)+")"};m.ea=function(a,b){if(1==b.length){var c;c=b[0];for(var d=null,e=0;e<this.M.length;e++){var f=Ig(this.M[e].O);if(null!==c.Ya&&c.Ya.has(f.m())){d=f;break}}c=d;(null===c?b[0]:Bd(b[0],c)).entries.sort(this.Nf.bind(this))}else b.sort(this.yg.bind(this));return b};
m.V=function(a,b){var c=null,d=null,e=null,f=-1;do f++,e=this.M[f].O,c=this.M[f].lb,d=a(e),e=b(e);while(d==e&&f+1<this.M.length);d=d<e?-1:d>e?1:0;return 1==c?d:-d};m.yg=function(a,b){return this.V(function(b){return b instanceof R?Bd(a,b):I(a.entries[a.entries.length-1],b)},function(a){return a instanceof R?Bd(b,a):I(b.entries[b.entries.length-1],a)})};m.Nf=function(a,b){return this.V(function(b){return I(a,b)},function(a){return I(b,a)})};function aj(a,b){this.Ja=a;this.K=b}function bj(a){return a.K.some(function(a){return a instanceof R},a)?cj(a):dj(a)}function cj(a){if(1==a.K.length&&"DISTINCT"==a.K[0].Jb)return a=Bd(a.Ja,a.K[0]).entries.map(function(a){var b=new Hd(new z(-1,{}),1<this.Ja.L.size);Jd(b,this.K[0],I(a,this.K[0].child));return b},a),new G(a,[]);var b=new Hd(new z(-1,{}),1<a.Ja.L.size);a.K.forEach(function(a){var d=a instanceof R?Bd(this.Ja,a):I(this.Ja.entries[0],a);Jd(b,a,d)},a);return new G([b],H(a.Ja))}
function dj(a){var b=Array(a.Ja.entries.length),c=1<a.Ja.L.size;a.Ja.entries.forEach(function(a,e){b[e]=new Hd(new z(a.sa.id(),{}),c);this.K.forEach(function(c){Jd(b[e],c,I(a,c))},this)},a);return new G(b,H(a.Ja))}function ej(a,b){var c=a.map(function(a){return bj(new aj(a,b)).entries[0]});return new G(c,H(a[0]))};function fj(a,b){S.call(this,0,1);this.f=a;this.Nb=b}t(fj,S);fj.prototype.toString=function(){var a="project("+this.f.toString();if(null!==this.Nb)var b=this.Nb.map(function(a){return a.m()}).join(", "),a=a+(", groupBy("+b+")");return a+")"};fj.prototype.ea=function(a,b){var c;0==b.length?c=[Dd()]:1==b.length?(c=b[0],c=[0==this.f.length?c:bj(new aj(c,this.f))]):c=[ej(b,this.f)];return c};function gj(a){return a.f.some(function(a){return a instanceof R})||null!==a.Nb};function hj(){S.call(this,0,1)}t(hj,S);hj.prototype.toString=l("skip(?)");hj.prototype.Sc=function(a){return this.toString().replace("?",a.N.toString())};hj.prototype.ea=function(a,b,c){return[new G(b[0].entries.slice(c.N),H(b[0]))]};function ij(){}t(ij,lh);ij.prototype.nb=function(a,b){if(!q(b.X)&&!q(b.N))return a;var c=jj(a);if(null===c)return a;ng(a,function(a){return a instanceof Zi||a instanceof hj}).forEach(function(a){a instanceof Zi?c.Uc=!0:c.Vc=!0;og(a)},this);return c.ib()};function jj(a){a=ng(a,function(a){return a instanceof Qi},function(a){return a instanceof fj&&gj(a)||a instanceof $i||1!=L(a).length||a instanceof Ri});return 0<a.length?a[0]:null};function kj(a){this.g=a}t(kj,lh);kj.prototype.nb=function(a,b){var c=lj(a,b);if(null===c)return a;var d;a:{var e=c;d=mj(Vd(c,0));if(null!==d){var f;f=c.M;for(var h=null,k=d.table.ya(),n=0;n<k.length&&null===h;n++)h=nj(k[n],f);f=h;if(null===f){d=e;break a}e=new Qi(this.g,f.wb,new Fi(f.wb),f.Re);f=new Si(this.g,d.table);Xd(f,e);og(c);e=sg(d,d,f,e)}d=e}if(d==c)a:if(d=c,e=oj(Vd(c,0)),null!==e){f=nj(e.index,c.M);if(null===f)break a;e.ke=f.Re;d=og(c).parent}return d.ib()};
function oj(a){a=ng(a,function(a){return a instanceof Qi},function(a){return 1!=L(a).length});return 0<a.length?a[0]:null}function mj(a){a=ng(a,function(a){return a instanceof ui},function(a){return 1!=L(a).length});return 0<a.length?a[0]:null}function lj(a,b){return q(b.M)?ng(a,function(a){return a instanceof $i})[0]:null}function nj(a,b){if(a.f.length!=b.length||!b.every(function(b,c){return b.O.getName()==a.f[c].ca.getName()}))return null;var c=pj(b,a);return c[0]||c[1]?{wb:a,Re:c[1]}:null}
function pj(a,b){var c=a.reduce(function(a,b){return a<<1|(0==b.lb?0:1)},0),d=b.f.reduce(function(a,b){return a<<1|(0==b.lb?0:1)},0),c=c^d;return[0==c,c==Math.pow(2,Math.max(a.length,b.f.length))-1]};function qj(a,b,c){this.Da=a;this.ge=b;this.Ub=c}qj.prototype.gc=function(){this.Ub.forEach(function(a){this.Da=a.nb(this.Da,this.ge)},this);return this.Da};function rj(a,b){S.call(this,0,1);this.S=a;this.Gg=b}t(rj,S);rj.prototype.toString=function(){return"update("+this.S.getName()+")"};rj.prototype.ea=function(a,b){var c=b[0].entries.map(function(a){var b=this.S.Db(a.sa.Fa());this.Gg.forEach(function(a){b.s[a.O.getName()]=a.value},this);return b},this);a.update(this.S,c);return[Dd()]};function sj(a){this.g=a;this.ne=[new Di,new Ti(this.g),new kj(this.g),new ij,new vi(this.g)];this.Jd=[new Ti(this.g)]}sj.prototype.create=function(a,b){var c=a.ib();if(c instanceof Zg||c instanceof Yg)return tj(this,a,b);if(c instanceof eh||c instanceof ih||c instanceof jh)return tj(this,a,b,this.ne);if(c instanceof $g||c instanceof ah)return tj(this,a,b,this.Jd);throw new E(8);};function tj(a,b,c,d){a=lg(b.ib(),a.ig.bind(a));null!=d&&(a=(new qj(a,c,d)).gc());return new me(a,b.$())}
sj.prototype.ig=function(a){if(a instanceof eh)return new fj(a.f,a.Nb);if(a instanceof hh)return new wi(a.f);if(a instanceof gh)return new Mg(a.f);if(a instanceof fh)return new $i(a.M);if(a instanceof jh)return new hj;if(a instanceof ih)return new Zi;if(a instanceof bh)return new Ri(a.J.W());if(a instanceof dh)return new qh;if(a instanceof kh)return new yi(this.g,a.J,a.Pb);if(a instanceof ch)return new ui(this.g,a.table);if(a instanceof $g)return new si(a.table);if(a instanceof ah)return new rj(a.table,
a.te);if(a instanceof Zg)return new Yi(this.g,a.table);if(a instanceof Yg)return new Wi(this.g,a.table);throw new E(514);};function uj(a){this.gg=new ri;this.tg=new sj(a)};function vj(){this.Ye=B()}function wj(a,b){var c=a.Ye.get(b.getName())||null;null===c&&(c=new xj,a.Ye.set(b.getName(),c));return c}function yj(a,b,c,d){c.forEach(function(a){a=wj(this,a);0==d?(a.bb=null,a.wc=b):3==d?(null===a.Xb&&(a.Xb=D()),a.Xb.add(b),null===a.Ta&&(a.Ta=D()),a.Ta.delete(b)):1==d?(null===a.Ta&&(a.Ta=D()),a.Ta.add(b)):2==d&&(a.bb=b)},a)}
function zj(a,b,c,d){var e=!0;c.forEach(function(a){if(e){a=wj(this,a);var c=null===a.Ta||0==a.Ta.size;e=0==d?(null===a.Xb||0==a.Xb.size)&&c&&null===a.wc&&null!==a.bb&&a.bb==b:3==d?null===a.wc&&null===a.bb&&null!==a.Ta&&a.Ta.has(b):1==d?null===a.bb:c&&(null===a.bb||a.bb==b)}},a);return e}function Aj(a,b,c,d){var e=zj(a,b,c,d);e&&yj(a,b,c,d);return e}vj.prototype.releaseLock=function(a,b){b.forEach(function(b){wj(this,b).releaseLock(a)},this)};
function Bj(a,b){b.forEach(function(a){wj(this,a).bb=null},a)}function xj(){this.Xb=this.Ta=this.bb=this.wc=null}xj.prototype.releaseLock=function(a){this.wc==a&&(this.wc=null);this.bb==a&&(this.bb=null);null===this.Ta||this.Ta.delete(a);null===this.Xb||this.Xb.delete(a)};function Cj(){this.Tb=new Ej;this.Hc=new vj}function ue(a,b){(2>b.getPriority()||2>b.getPriority())&&Bj(a.Hc,b.$());a.Tb.xb(b);Fj(a);return b.Mb().ha}function Fj(a){for(var b=a.Tb.za(),c=0;c<b.length;c++){var d=b[c],e=!1;if(e=0==d.I()?Gj(a,d,1,3):Gj(a,d,2,0))a.Tb.remove(d),e=a,d.exec().then(e.qg.bind(e,d),e.pg.bind(e,d))}}function Gj(a,b,c,d){var e=!1;Aj(a.Hc,b.W(),b.$(),c)&&(e=Aj(a.Hc,b.W(),b.$(),d));return e}Cj.prototype.qg=function(a,b){this.Hc.releaseLock(a.W(),a.$());a.Mb().resolve(b);Fj(this)};
Cj.prototype.pg=function(a,b){this.Hc.releaseLock(a.W(),a.$());a.Mb().reject(b);Fj(this)};function Ej(){this.Tb=[]}Ej.prototype.xb=function(a){pf(this.Tb,a,function(a,c){var d=a.getPriority()-c.getPriority();return 0==d?a.W()-c.W():d})};Ej.prototype.za=function(){return this.Tb.slice()};Ej.prototype.remove=function(a){var b=this.Tb;a=ya(b,a);var c;(c=0<=a)&&xa.splice.call(b,a,1);return c};function Hj(a,b){this.Kd=Md.Bc();this.he=a;this.nd=b;this.K=Ij(this)}function Ij(a){if(0<a.he.f.length)return a.he.f;var b=[];a.he.c.forEach(function(a){a.hb().forEach(function(a){b.push(a)})});return b}Hj.prototype.V=function(a,b){return this.K.every(function(c){return Sd(this.Kd,c.I(),"eq")(I(a,c),I(b,c))},this)};
function Jj(a,b,c){var d=null===b?[]:b.entries,e=xb(d,c.entries,a.V.bind(a),function(a){return d[a]});b=[];for(var f=0,h=0;h<d.length;h++){var k=d[h];e[f]==k?f++:(k=a.nd.splice(f,1),k=Kj(h,k,0,a.nd),b.push(k))}e=xb(d,c.entries,a.V.bind(a),function(a,b){return c.entries[b]});for(h=f=0;h<c.entries.length;h++)k=c.entries[h],e[f]==k?f++:(a.nd.splice(h,0,k.sa.s),k=Kj(h,[],1,a.nd),b.push(k));return b}function Kj(a,b,c,d){return{Ig:c,index:a,object:d,Kg:b,type:"splice"}};function Lj(){this.ec=B()}Lj.prototype.zd=function(a,b){var c=ja(a.a).toString(),d=this.ec.get(c)||null;null===d&&(d=new Mj(a),this.ec.set(c,d));d.zd(b)};Lj.prototype.ie=function(a,b){var c=ja(a.a).toString(),d=this.ec.get(c)||null;d.ie(b);0<d.Lc.size||this.ec.delete(c)};function te(a,b){var c=D();b.forEach(function(a){c.add(a.getName())});var d=[];a.ec.forEach(function(a){a=a.Dc();a.context.c.some(function(a){return c.has(a.getName())})&&d.push(a)});return d}
function re(a,b,c){b=ja(null!=b.ad?b.ad:b).toString();a=a.ec.get(b)||null;null!==a&&Nj(a,c)}function Mj(a){this.Ef=a;this.Lc=D();this.ng=[];this.We=null;this.Lf=new Hj(a.a,this.ng)}Mj.prototype.zd=function(a){this.Lc.has(a)||this.Lc.add(a)};Mj.prototype.ie=function(a){return this.Lc.delete(a)};Mj.prototype.Dc=function(){var a=this.Ef;return{context:a.a,fe:Oh(a)}};function Nj(a,b){var c=Jj(a.Lf,a.We,b);a.We=b;0<c.length&&a.Lc.forEach(function(a){a(c)})};function Oj(a,b){var c=a.j(qc),d=b||{},e=new kf(c);a.mb(lc,e);var e=null,f=!1;null!=d.storeType?e=d.storeType:(e=$b(),e=e.Yf?0:e.Hg?4:1);switch(e){case 0:e=new Re(a,c);break;case 1:e=new We(c);break;case 5:e=new Ye(c);break;case 4:e=new ff(a,c,d.webSqlDbSize);break;case 3:e=new Ge(c,d.firebase);f=!0;break;default:throw new E(300);}a.mb(kc,e);var h=new ig;a.mb(mc,h);return e.Ga(d.onUpgrade).then(function(){var b=new uj(a);a.mb(nc,b);b=new Cj;a.mb(oc,b);b=new Lj;a.mb(pc,b);return h.Ga(c)}).then(function(){if(f){var b=
new ve(a);b.Ka.subscribe(b.ae.bind(b))}return(new bg(a)).Ga(c)})};function Pj(a){this.g=a;this.i=a.j(qc);this.aa=D(this.i.ra());this.cb=y()}m=Pj.prototype;m.exec=function(){var a=this.g.j(mc),b=this.g.j(lc),c={};this.i.ra().forEach(function(d){var f=a.get(Ue(d)).$a(),f=mf(b,f).map(function(a){return a.s});c[d.getName()]=f});var d={name:this.i.name(),version:this.i.version(),tables:c},d=new Hd(new z(-1,d),!0);return w([new G([d],[])])};m.I=l(0);m.$=g("aa");m.Mb=g("cb");m.W=function(){return ja(this)};m.getPriority=l(0);function Qj(a,b){this.g=a;this.i=a.j(qc);this.aa=D(this.i.ra());this.cb=y();this.va=b;this.Ka=a.j(kc);this.U=a.j(lc);this.D=a.j(mc)}m=Qj.prototype;
m.exec=function(){if(!(this.Ka instanceof Re||this.Ka instanceof We||this.Ka instanceof ff))throw new E(300);var a;a:{a=this.i.ra();for(var b=0;b<a.length;++b)if(0<this.D.get(Ue(a[b])).Oa().oa){a=!1;break a}a=!0}if(!a)throw new E(110);if(this.i.name()!=this.va.name||this.i.version()!=this.va.version)throw new E(111);if(null==this.va.tables)throw new E(112);return Rj(this)};m.I=l(1);m.$=g("aa");m.Mb=g("cb");m.W=function(){return ja(this)};m.getPriority=l(0);
function Rj(a){var b=new ld(a.g,a.aa),b=a.Ka.Cb(a.I(),b),c;for(c in a.va.tables){var d=a.i.table(c),e=a.va.tables[c].map(function(a){return d.tb(a)}),f=b.H(c,d.Db);a.U.Vb(c,e);var h=a.D.kc.get(c)||[];e.forEach(function(a){h.forEach(function(b){var c=a.Fb(b.getName());b.add(c,a.id())})});f.put(e)}return b.ia()};function Sj(a,b){this.g=a;this.Ka=a.j(kc);this.Ea=a.j(oc);this.Gb=a.j(pc);this.aa=D(b);this.Ra=new ld(this.g,this.aa);this.cb=y();this.xc=y();this.ve=y()}m=Sj.prototype;m.exec=function(){this.ve.resolve();return this.xc.ha};m.I=l(1);m.$=g("aa");m.Mb=g("cb");m.W=function(){return ja(this)};m.getPriority=l(2);function Tj(a){ue(a.Ea,a);return a.ve.ha}
function Uj(a,b){var c=b.Dc();return c.fe.ib().exec(a.Ra,c.context).then(function(a){return zd(a[0])},function(a){this.Ra.Hb();var b=new kb(a.name);this.xc.reject(b);throw a;}.bind(a))}m.ia=function(){this.Ka.Cb(this.I(),this.Ra).ia().then(function(){this.Pc();this.xc.resolve()}.bind(this),function(a){this.Ra.Hb();this.xc.reject(a)}.bind(this));return this.cb.ha};m.Hb=function(){this.Ra.Hb();this.xc.resolve();return this.cb.ha};
m.Pc=function(){var a=te(this.Gb,this.aa);0!=a.length&&(a=new qe(this.g,a),ue(this.Ea,a))};function Vj(a){this.g=a;this.Ea=a.j(oc);this.Tc=null;this.Ua=0;0==Wj.size&&(Wj.set(0,D([1,4])),Wj.set(1,D([2])),Wj.set(2,D([3,5,6])),Wj.set(3,D([2,7])),Wj.set(4,D([7])),Wj.set(5,D([7])),Wj.set(6,D([7])))}r("lf.proc.Transaction",Vj);var Wj=B();function Xj(a,b){var c=Wj.get(a.Ua)||null;if(null===c||!c.has(b))throw new E(107,a.Ua,b);a.Ua=b}
Vj.prototype.exec=function(a){Xj(this,4);var b=[];try{a.forEach(function(a){a.fb();b.push(a.Dc())},this)}catch(c){return Xj(this,7),cb(c)}a=new rh(this.g,b);return ue(this.Ea,a).then(function(a){Xj(this,7);return a.map(function(a){return zd(a)})}.bind(this),function(a){Xj(this,7);throw a;}.bind(this))};Vj.prototype.exec=Vj.prototype.exec;Vj.prototype.Cf=function(a){Xj(this,1);this.Tc=new Sj(this.g,a);return Tj(this.Tc).then(function(){Xj(this,2)}.bind(this))};Vj.prototype.begin=Vj.prototype.Cf;
Vj.prototype.Bf=function(a){Xj(this,3);return Uj(this.Tc,a).then(function(a){Xj(this,2);return a}.bind(this),function(a){Xj(this,7);throw a;}.bind(this))};Vj.prototype.attach=Vj.prototype.Bf;Vj.prototype.ia=function(){Xj(this,5);return this.Tc.ia().then(function(){Xj(this,7)}.bind(this))};Vj.prototype.commit=Vj.prototype.ia;Vj.prototype.Hb=function(){Xj(this,6);return this.Tc.Hb().then(function(){Xj(this,7)}.bind(this))};Vj.prototype.rollback=Vj.prototype.Hb;function W(a){this.g=a;this.i=a.j(qc);this.Qd=!1}r("lf.proc.Database",W);W.prototype.Ga=function(a){this.g.mb(qc,this.i);return Oj(this.g,a).then(function(){this.Qd=!0;this.Ea=this.g.j(oc);return this}.bind(this))};W.prototype.init=W.prototype.Ga;W.prototype.vb=g("i");W.prototype.getSchema=W.prototype.vb;function Yj(a){if(!a.Qd)throw new E(2);}W.prototype.select=function(a){Yj(this);return new V(this.g,1!=arguments.length||null!=arguments[0]?Array.prototype.slice.call(arguments):[])};
W.prototype.select=W.prototype.select;W.prototype.xb=function(){Yj(this);return new Qh(this.g)};W.prototype.insert=W.prototype.xb;W.prototype.Rd=function(){Yj(this);return new Qh(this.g,!0)};W.prototype.insertOrReplace=W.prototype.Rd;W.prototype.update=function(a){Yj(this);return new $h(this.g,a)};W.prototype.update=W.prototype.update;W.prototype.delete=function(){Yj(this);return new Ph(this.g)};W.prototype["delete"]=W.prototype.delete;
W.prototype.observe=function(a,b){Yj(this);this.g.j(pc).zd(a,b)};W.prototype.observe=W.prototype.observe;W.prototype.unobserve=function(a,b){Yj(this);this.g.j(pc).ie(a,b)};W.prototype.unobserve=W.prototype.unobserve;W.prototype.Jf=function(){Yj(this);return new Vj(this.g)};W.prototype.createTransaction=W.prototype.Jf;W.prototype.close=function(){try{this.g.j(kc).close()}catch(a){}this.g.clear();this.Qd=!1};W.prototype.close=W.prototype.close;
W.prototype.Rf=function(){Yj(this);var a=new Pj(this.g);return ue(this.Ea,a).then(function(a){return zd(a[0])[0]})};W.prototype["export"]=W.prototype.Rf;W.prototype.import=function(a){Yj(this);a=new Qj(this.g,a);return ue(this.Ea,a).then(l(null))};W.prototype["import"]=W.prototype.import;function X(a,b,c,d,e,f){this.S=a;this.w=b;this.Se=c;this.Qe=d;this.vf=e;this.eb=f||null}r("lf.schema.BaseColumn",X);m=X.prototype;m.getName=g("w");m.m=function(){return J(this.S)+"."+this.w};m.toString=function(){return this.m()};m.H=g("S");m.I=g("vf");X.prototype.getType=X.prototype.I;X.prototype.Za=g("eb");X.prototype.ya=function(){null==this.ka&&(this.ka=[],this.H().ya().forEach(function(a){-1!=a.f.map(function(a){return a.ca.getName()}).indexOf(this.w)&&this.ka.push(a)},this));return this.ka};
X.prototype.xa=function(){if(!q(this.fa)){var a=this.ya().filter(function(a){return 1!=a.f.length?!1:a.f[0].ca.getName()==this.getName()},this);this.fa=0<a.length?a[0]:null}return this.fa};X.prototype.Fc=g("Qe");X.prototype.isNullable=X.prototype.Fc;X.prototype.Gc=g("Se");X.prototype.Qa=function(a){return Cg(this,a,"eq")};X.prototype.eq=X.prototype.Qa;X.prototype.Ze=function(a){return Cg(this,a,"neq")};X.prototype.neq=X.prototype.Ze;X.prototype.Xd=function(a){return Cg(this,a,"lt")};
X.prototype.lt=X.prototype.Xd;X.prototype.hg=function(a){return Cg(this,a,"lte")};X.prototype.lte=X.prototype.hg;X.prototype.Tf=function(a){return Cg(this,a,"gt")};X.prototype.gt=X.prototype.Tf;X.prototype.Uf=function(a){return Cg(this,a,"gte")};X.prototype.gte=X.prototype.Uf;X.prototype.match=function(a){return Cg(this,a,"match")};X.prototype.match=X.prototype.match;X.prototype.Df=function(a,b){return Cg(this,[a,b],"between")};X.prototype.between=X.prototype.Df;
X.prototype.Vf=function(a){return Cg(this,a,"in")};X.prototype["in"]=X.prototype.Vf;X.prototype.cg=function(){return this.Qa(null)};X.prototype.isNull=X.prototype.cg;X.prototype.bg=function(){return this.Ze(null)};X.prototype.isNotNull=X.prototype.bg;X.prototype.pc=function(a){return new X(this.S,this.w,this.Se,this.Qe,this.vf,a)};X.prototype.as=X.prototype.pc;function Zj(){this.ud=B()}var ak;Zj.prototype.clear=function(){this.ud.clear()};Zj.prototype.clear=Zj.prototype.clear;Zj.prototype.mb=function(a,b){this.ud.set(a.toString(),b);return b};Zj.prototype.registerService=Zj.prototype.mb;Zj.prototype.j=function(a){var b=this.ud.get(a.toString())||null;if(null===b)throw new E(7,a.toString());return b};Zj.prototype.getService=Zj.prototype.j;Zj.prototype.Vd=function(a){return this.ud.has(a.toString())};Zj.prototype.isRegistered=Zj.prototype.Vd;function bk(a){this.i=a;this.Ed=new Uc;this.je=new Uc;this.af=new Uc;this.Ee=B();this.h=new Uc;this.Ae=new Uc;this.hf=new Uc;this.De=new Uc;ck(this)}function ck(a){a.i.ra().forEach(function(a){var c=a.getName();a.Eb().Od().forEach(function(d){this.af.set(c,this.i.table(d.Sa));this.h.set(d.Sa,a);0==d.action?(this.je.set(d.Sa,d),this.hf.set(d.Sa,a)):(this.Ed.set(d.Sa,d),this.Ae.set(d.Sa,a));this.Ee.set(a.getName()+"."+d.gb,d.Sa);this.De.set(d.Sa+"."+d.ic,a.getName())},this)},a)}
function bd(a,b,c){if(null!=c)return 1==c?a.Ed.get(b):a.je.get(b);c=a.Ed.get(b);a=a.je.get(b);return null===c&&null===a?null:(c||[]).concat(a||[])}function xh(a,b){var c=b.get(a);return null===c?[]:c}function zh(a,b){var c=D();b.forEach(function(a){(a=this.Ee.get(a))&&c.add(a)},a);return wc(c).map(function(a){return this.i.table(a)},a)}function vh(a,b,c){return null!=c?0==c?xh(b,a.hf):xh(b,a.Ae):xh(b,a.h)}
function Ah(a,b){var c=D();b.forEach(function(a){(a=this.De.get(a))&&a.forEach(function(a){c.add(a)})},a);return wc(c).map(function(a){return this.i.table(a)},a)};function dk(a,b,c){this.ug=a;this.mg=b;this.Sf=c}r("lf.schema.Constraint",dk);dk.prototype.fd=g("ug");dk.prototype.getPrimaryKey=dk.prototype.fd;dk.prototype.Od=g("Sf");dk.prototype.getForeignKeys=dk.prototype.Od;function ek(a,b,c){var d=a.ref.split(".");if(2!=d.length)throw new E(540,c);this.Ce=b;this.gb=a.local;this.Sa=d[0];this.ic=d[1];this.name=b+"."+c;this.action=a.action;this.timing=a.timing};function Y(a){fk(a);this.Kd=Md.Bc();this.w=a;this.K=B();this.wd=D();this.lc=D();this.Kc=D();this.Ba=null;this.ka=B();this.qd=!1;this.ub=[]}r("lf.schema.TableBuilder",Y);function gk(a){this.name=a.name;this.lb=a.order;this.autoIncrement=a.autoIncrement}var hk=D([0,6]);function fk(a){if(!/^[A-Za-z_][A-Za-z0-9_]*$/.test(a))throw new E(502,a);}function ik(a,b){if(b==a.w)throw new E(546,b);if(a.K.has(b)||a.ka.has(b)||a.lc.has(b))throw new E(503,a.w+"."+b);}
function jk(a,b){var c=!1;b.forEach(function(a){var b=this.K.get(a.name);c=c||a.autoIncrement;if(a.autoIncrement&&3!=b)throw new E(504);},a);if(c&&1<b.length)throw new E(505);}function kk(a){if(null!==a.Ba){var b=a.ka.get(a.Ba).map(function(a){return a.name}),c=0;if(a.ub.some(function(a,e){c=e;return-1!=b.indexOf(a.gb)},a))throw new E(543,a.ub[c].name);}}
function lk(a){if(null!==a.Ba){var b=function(a){return a.name},c=JSON.stringify(a.ka.get(a.Ba).map(b));a.ka.forEach(function(a,e){if(e!=this.Ba){var f=a.map(b);if(JSON.stringify(f)==c)throw new E(544,this.w+"."+e);}},a)}}function mk(a){null===a.Ba||a.ka.get(a.Ba).forEach(function(a){if(this.Kc.has(a.name))throw new E(545,this.w+"."+a.name);},a)}Y.prototype.wf=function(a,b){fk(a);ik(this,a);this.K.set(a,b);hk.has(b)&&this.xe([a]);return this};Y.prototype.addColumn=Y.prototype.wf;
Y.prototype.yf=function(a,b){var c=this.w;this.Ba="pk"+(c[0].toUpperCase()+c.substring(1));fk(this.Ba);ik(this,this.Ba);c=nk(this,a,!0,void 0,b);jk(this,c);1==c.length&&this.wd.add(c[0].name);this.lc.add(this.Ba);this.ka.set(this.Ba,c);return this};Y.prototype.addPrimaryKey=Y.prototype.yf;
Y.prototype.xf=function(a,b){fk(a);ik(this,a);var c=new ek(b,this.w,a);q(c.action)||(c.action=0);q(c.timing)||(c.timing=0);if(1==c.action&&1==c.timing)throw new E(506);if(!this.K.has(c.gb))throw new E(540,a);this.ub.push(c);this.we(a,[c.gb],this.wd.has(c.gb));return this};Y.prototype.addForeignKey=Y.prototype.xf;Y.prototype.zf=function(a,b){fk(a);ik(this,a);var c=nk(this,b,!0);ok(this,a,c);1==c.length&&(this.wd.add(c[0].name),pk(this,c[0].name));this.ka.set(a,c);this.lc.add(a);return this};
Y.prototype.addUnique=Y.prototype.zf;function pk(a,b){a.ub.forEach(function(a){a.gb==b&&this.lc.add(a.name.split(".")[1])},a)}Y.prototype.xe=function(a){a=nk(this,a,!1);qk(this,a);a.forEach(function(a){this.Kc.add(a.name)},this);return this};Y.prototype.addNullable=Y.prototype.xe;function qk(a,b){bc(a.ka).forEach(function(a){var d=D();this.ka.get(a).forEach(function(a){d.add(a.name)});var e=b.filter(function(a){return d.has(a.name)});if(1<d.size&&0<e.length)throw new E(507,a,e.join(","));},a)}
Y.prototype.we=function(a,b,c,d){fk(a);ik(this,a);b=nk(this,b,!0,d);ok(this,a,b);c&&this.lc.add(a);this.ka.set(a,b);return this};Y.prototype.addIndex=Y.prototype.we;function ok(a,b,c){if(1<c.length&&(a=c.filter(function(a){return this.Kc.has(a.name)},a),0<a.length))throw new E(507,b,a.join(","));}Y.prototype.zb=ba("qd");Y.prototype.persistentIndex=Y.prototype.zb;Y.prototype.vb=function(){kk(this);lk(this);mk(this);return new (rk(this))};Y.prototype.getSchema=Y.prototype.vb;
function sk(a){return a.ub}function nk(a,b,c,d,e){var f=b,f="string"==typeof b[0]?b.map(function(a){return new gk({name:a,order:null!=d?d:1,autoIncrement:e||!1})}):b.map(function(a){return new gk(a)});f.forEach(function(a){if(!this.K.has(a.name))throw new E(508,this.w,a.name);if(c){var b=this.K.get(a.name);if(0==b||6==b)throw new E(509,this.w,a.name);}},a);return f}
function rk(a){function b(){function b(c){return a.ka.get(c).map(function(a){return{ca:this[a.name],lb:a.lb,autoIncrement:a.autoIncrement}},this)}var d=bc(a.K).map(function(b){this[b]=new X(this,b,a.wd.has(b),a.Kc.has(b),a.K.get(b));return this[b]},this),e=bc(a.ka).map(function(d){return new Eg(a.w,d,a.lc.has(d),b.call(this,d))},this);Q.call(this,a.w,d,e,a.qd);var f=null===a.Ba?null:new Eg(a.w,a.Ba,!0,b.call(this,a.Ba)),h=d.filter(function(b){return!a.Kc.has(b.getName())});this.Gf=new dk(f,h,a.ub);
this.lf=tk(a,d,e)}t(b,Q);b.prototype.tb=function(a){return new this.lf(qb++,a)};b.prototype.createRow=b.prototype.tb;b.prototype.Db=function(a){var b={};this.hb().forEach(function(e){var f=e.getName();e=e.I();var h=a.value[f];if(0==e)if(e=h,null!=e&&""!=e){0!=e.length%2&&(e="0"+e);for(var h=new ArrayBuffer(e.length/2),k=new Uint8Array(h),n=0,x=0;n<e.length;n+=2)k[x++]=parseInt(e.substr(n,2),16);e=h}else e=null;else e=2==e?null!=h?new Date(h):null:h;b[f]=e},this);return new this.lf(a.id,b)};b.prototype.deserializeRow=
b.prototype.Db;b.prototype.Eb=g("Gf");b.prototype.getConstraint=b.prototype.Eb;return b}
function tk(a,b,c){function d(a,d){this.K=b;this.ka=c;z.call(this,a,d)}t(d,z);d.prototype.He=function(){var a={};this.K.forEach(function(b){a[b.getName()]=b.Fc()?null:Sc[b.I()]});return a};d.prototype.sf=function(){var a={};this.K.forEach(function(b){var c=b.getName();b=b.I();var d=this.s[c];a[c]=0==b?null!=d?ub(d):null:2==b?null!=d?d.getTime():null:6==b?null!=d?d:null:d},this);return a};var e=function(a){var b=this.K.get(a.getName()),c=this.Kd.Te.get(b)||null;return function(b){return c(b[a.getName()])}}.bind(a),
f=function(a){var b=a.map(function(a){return e(a.ca)});return function(a){return b.map(function(b){return b(a)})}}.bind(a),h={};c.forEach(function(a){var b=a.m();a=1==a.f.length?e(a.f[0].ca):f(a.f);h[b]=a});d.prototype.Fb=function(a){return-1!=a.indexOf("#")?this.id():h.hasOwnProperty(a)?h[a](this.s):null};return d};function uk(a,b){this.i=new Z(a,b);this.qb=B();this.yc=!1}r("lf.schema.Builder",uk);function vk(a,b){b.ub.forEach(function(a){var d=a.Sa;if(!this.qb.has(d))throw new E(536,a.name);var d=this.qb.get(d).vb(),e=a.ic;if(!d.hasOwnProperty(e))throw new E(537,a.name);if(b.vb()[a.gb].I()!=d[e].I())throw new E(538,a.name);if(!d[e].Gc())throw new E(539,a.name);},a)}uk.prototype.Ff=function(a){a.ub.forEach(function(a){sk(this.qb.get(a.Sa)).forEach(function(c){if(c.gb==a.ic)throw new E(534,a.name);},this)},this)};
function wk(a){a.yc||(a.qb.forEach(function(a){vk(this,a);a=a.vb();this.i.L.set(a.getName(),a)},a),C(a.qb).forEach(a.Ff,a),xk(a),a.qb.clear(),a.yc=!0)}function yk(a,b,c){b.ue||(b.ue=!0,b.be=!0,b.Ie.forEach(function(a){a=c.get(a);if(!a.ue)yk(this,a,c);else if(a.be&&b!=a)throw new E(533);},a));b.be=!1}function xk(a){var b=B();a.i.L.forEach(function(a,d){b.set(d,new zk(d))},a);a.qb.forEach(function(a,d){a.ub.forEach(function(a){b.get(a.Sa).Ie.add(d)})});C(b).forEach(function(a){yk(this,a,b)},a)}
function zk(a){this.be=this.ue=!1;this.Ie=D();this.Rc=a}uk.prototype.vb=function(){this.yc||wk(this);return this.i};uk.prototype.getSchema=uk.prototype.vb;uk.prototype.Ke=function(){var a=new jc("ns_"+this.i.name()),b;ak||(ak=new Zj);b=ak;var c=null;b.Vd(a)?c=b.j(a):(c=new Zj,b.mb(a,c));return c};uk.prototype.getGlobal=uk.prototype.Ke;uk.prototype.connect=function(a){var b=this.Ke();b.Vd(qc)||b.mb(qc,this.vb());return(new W(b)).Ga(a)};uk.prototype.connect=uk.prototype.connect;
uk.prototype.If=function(a){if(this.qb.has(a))throw new E(503,a);if(this.yc)throw new E(535);this.qb.set(a,new Y(a));return this.qb.get(a)};uk.prototype.createTable=uk.prototype.If;uk.prototype.oe=function(a){if(this.yc)throw new E(535);this.i.oe(a);return this};uk.prototype.setPragma=uk.prototype.oe;function Z(a,b){this.w=a;this.Pa=b;this.L=B();this.ef={Mf:!1}}r("lf.schema.DatabaseSchema",Z);Z.prototype.name=g("w");Z.prototype.name=Z.prototype.name;Z.prototype.version=g("Pa");
Z.prototype.version=Z.prototype.version;Z.prototype.ra=function(){return C(this.L)};Z.prototype.tables=Z.prototype.ra;Z.prototype.table=function(a){if(!this.L.has(a))throw new E(101,a);return this.L.get(a)};Z.prototype.table=Z.prototype.table;Z.prototype.info=function(){this.Oe||(this.Oe=new bk(this));return this.Oe};Z.prototype.df=g("ef");Z.prototype.pragma=Z.prototype.df;Z.prototype.oe=ba("ef");r("lf.schema.create",function(a,b){return new uk(a,b)});v.prototype.catch=v.prototype.re;v.prototype["catch"]=v.prototype.catch;}.bind(window))()
//# sourceMappingURL=lovefield.min.js.map
