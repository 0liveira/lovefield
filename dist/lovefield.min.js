if(!self.window){window=this;}
(function(){'use strict';function aa(){return function(){}}function ba(a){return function(b){this[a]=b}}function g(a){return function(){return this[a]}}function l(a){return function(){return a}}var m,p=this;function q(a){return void 0!==a}function da(){}
function ea(a){var b=typeof a;if("object"==b)if(a){if(a instanceof Array)return"array";if(a instanceof Object)return b;var c=Object.prototype.toString.call(a);if("[object Window]"==c)return"object";if("[object Array]"==c||"number"==typeof a.length&&"undefined"!=typeof a.splice&&"undefined"!=typeof a.propertyIsEnumerable&&!a.propertyIsEnumerable("splice"))return"array";if("[object Function]"==c||"undefined"!=typeof a.call&&"undefined"!=typeof a.propertyIsEnumerable&&!a.propertyIsEnumerable("call"))return"function"}else return"null";
else if("function"==b&&"undefined"==typeof a.call)return"object";return b}function fa(a){return null===a}function ga(a){return null!=a}function ha(a){var b=ea(a);return"array"==b||"object"==b&&"number"==typeof a.length}function ia(a){return"string"==typeof a}function ja(a){return"function"==ea(a)}function ka(a){return a[la]||(a[la]=++ma)}var la="closure_uid_"+(1E9*Math.random()>>>0),ma=0;function na(a,b,c){return a.call.apply(a.bind,arguments)}
function oa(a,b,c){if(!a)throw Error();if(2<arguments.length){var d=Array.prototype.slice.call(arguments,2);return function(){var c=Array.prototype.slice.call(arguments);Array.prototype.unshift.apply(c,d);return a.apply(b,c)}}return function(){return a.apply(b,arguments)}}function pa(a,b,c){pa=Function.prototype.bind&&-1!=Function.prototype.bind.toString().indexOf("native code")?na:oa;return pa.apply(null,arguments)}
function qa(a,b){var c=Array.prototype.slice.call(arguments,1);return function(){var b=c.slice();b.push.apply(b,arguments);return a.apply(this,b)}}function r(a,b){var c=a.split("."),d=p;c[0]in d||!d.execScript||d.execScript("var "+c[0]);for(var e;c.length&&(e=c.shift());)!c.length&&q(b)?d[e]=b:d=d[e]?d[e]:d[e]={}}
function t(a,b){function c(){}c.prototype=b.prototype;a.eb=b.prototype;a.prototype=new c;a.prototype.constructor=a;a.Lg=function(a,c,f){for(var h=Array(arguments.length-2),k=2;k<arguments.length;k++)h[k-2]=arguments[k];return b.prototype[c].apply(a,h)}};function ra(a){if(Error.captureStackTrace)Error.captureStackTrace(this,ra);else{var b=Error().stack;b&&(this.stack=b)}a&&(this.message=String(a))}t(ra,Error);ra.prototype.name="CustomError";var sa=String.prototype.trim?function(a){return a.trim()}:function(a){return a.replace(/^[\s\xa0]+|[\s\xa0]+$/g,"")};
function ta(a){var b=0,c=sa(String(ua)).split(".");a=sa(String(a)).split(".");for(var d=Math.max(c.length,a.length),e=0;0==b&&e<d;e++){var f=c[e]||"",h=a[e]||"",k=/(\d*)(\D*)/g,n=/(\d*)(\D*)/g;do{var B=k.exec(f)||["","",""],O=n.exec(h)||["","",""];if(0==B[0].length&&0==O[0].length)break;b=va(0==B[1].length?0:parseInt(B[1],10),0==O[1].length?0:parseInt(O[1],10))||va(0==B[2].length,0==O[2].length)||va(B[2],O[2])}while(0==b)}return b}function va(a,b){return a<b?-1:a>b?1:0};function wa(a,b,c){this.hg=c;this.Mf=a;this.Bg=b;this.qd=0;this.hd=null}wa.prototype.get=function(){var a;0<this.qd?(this.qd--,a=this.hd,this.hd=a.next,a.next=null):a=this.Mf();return a};wa.prototype.put=function(a){this.Bg(a);this.qd<this.hg&&(this.qd++,a.next=this.hd,this.hd=a)};var xa=Array.prototype.indexOf?function(a,b,c){return Array.prototype.indexOf.call(a,b,c)}:function(a,b,c){c=null==c?0:0>c?Math.max(0,a.length+c):c;if(ia(a))return ia(b)&&1==b.length?a.indexOf(b,c):-1;for(;c<a.length;c++)if(c in a&&a[c]===b)return c;return-1},ya=Array.prototype.forEach?function(a,b,c){Array.prototype.forEach.call(a,b,c)}:function(a,b,c){for(var d=a.length,e=ia(a)?a.split(""):a,f=0;f<d;f++)f in e&&b.call(c,e[f],f,a)},za=Array.prototype.map?function(a,b,c){return Array.prototype.map.call(a,
b,c)}:function(a,b,c){for(var d=a.length,e=Array(d),f=ia(a)?a.split(""):a,h=0;h<d;h++)h in f&&(e[h]=b.call(c,f[h],h,a));return e},Aa=Array.prototype.reduce?function(a,b,c,d){d&&(b=pa(b,d));return Array.prototype.reduce.call(a,b,c)}:function(a,b,c,d){var e=c;ya(a,function(c,h){e=b.call(d,e,c,h,a)});return e},Ba=Array.prototype.some?function(a,b,c){return Array.prototype.some.call(a,b,c)}:function(a,b,c){for(var d=a.length,e=ia(a)?a.split(""):a,f=0;f<d;f++)if(f in e&&b.call(c,e[f],f,a))return!0;return!1};
function Ca(a,b,c){return 2>=arguments.length?Array.prototype.slice.call(a,b):Array.prototype.slice.call(a,b,c)}function Da(a){for(var b=[],c=0;c<a;c++)b[c]=0;return b}function Ea(a){for(var b=[],c=0;c<arguments.length;c++){var d=arguments[c];if("array"==ea(d))for(var e=0;e<d.length;e+=8192)for(var f=Ea.apply(null,Ca(d,e,e+8192)),h=0;h<f.length;h++)b.push(f[h]);else b.push(d)}return b};function Fa(a){var b=[],c=0,d;for(d in a)b[c++]=a[d];return b};var Ga;a:{var Ha=p.navigator;if(Ha){var Ia=Ha.userAgent;if(Ia){Ga=Ia;break a}}Ga=""}function u(a){return-1!=Ga.indexOf(a)};function Ja(){return u("Opera")||u("OPR")}function Ka(){return(u("Chrome")||u("CriOS"))&&!Ja()&&!u("Edge")};function Ma(a){p.setTimeout(function(){throw a;},0)}var Na;
function Oa(){var a=p.MessageChannel;"undefined"===typeof a&&"undefined"!==typeof window&&window.postMessage&&window.addEventListener&&!u("Presto")&&(a=function(){var a=document.createElement("IFRAME");a.style.display="none";a.src="";document.documentElement.appendChild(a);var b=a.contentWindow,a=b.document;a.open();a.write("");a.close();var c="callImmediate"+Math.random(),d="file:"==b.location.protocol?"*":b.location.protocol+"//"+b.location.host,a=pa(function(a){if(("*"==d||a.origin==d)&&a.data==
c)this.port1.onmessage()},this);b.addEventListener("message",a,!1);this.port1={};this.port2={postMessage:function(){b.postMessage(c,d)}}});if("undefined"!==typeof a&&!u("Trident")&&!u("MSIE")){var b=new a,c={},d=c;b.port1.onmessage=function(){if(q(c.next)){c=c.next;var a=c.Ee;c.Ee=null;a()}};return function(a){d.next={Ee:a};d=d.next;b.port2.postMessage(0)}}return"undefined"!==typeof document&&"onreadystatechange"in document.createElement("SCRIPT")?function(a){var b=document.createElement("SCRIPT");
b.onreadystatechange=function(){b.onreadystatechange=null;b.parentNode.removeChild(b);b=null;a();a=null};document.documentElement.appendChild(b)}:function(a){p.setTimeout(a,0)}};function Pa(){this.zd=this.pc=null}var Ra=new wa(function(){return new Qa},function(a){a.reset()},100);Pa.prototype.add=function(a,b){var c=Ra.get();c.set(a,b);this.zd?this.zd.next=c:this.pc=c;this.zd=c};Pa.prototype.remove=function(){var a=null;this.pc&&(a=this.pc,this.pc=this.pc.next,this.pc||(this.zd=null),a.next=null);return a};function Qa(){this.next=this.scope=this.Rd=null}Qa.prototype.set=function(a,b){this.Rd=a;this.scope=b;this.next=null};
Qa.prototype.reset=function(){this.next=this.scope=this.Rd=null};function Sa(a,b){Ta||Ua();Va||(Ta(),Va=!0);Wa.add(a,b)}var Ta;function Ua(){if(p.Promise&&p.Promise.resolve){var a=p.Promise.resolve(void 0);Ta=function(){a.then(Xa)}}else Ta=function(){var a=Xa;!ja(p.setImmediate)||p.Window&&p.Window.prototype&&p.Window.prototype.setImmediate==p.setImmediate?(Na||(Na=Oa()),Na(a)):p.setImmediate(a)}}var Va=!1,Wa=new Pa;function Xa(){for(var a=null;a=Wa.remove();){try{a.Rd.call(a.scope)}catch(b){Ma(b)}Ra.put(a)}Va=!1};function v(a,b){this.Ua=0;this.mf=void 0;this.Xc=this.fc=this.D=null;this.gd=this.Pd=!1;if(a!=da)try{var c=this;a.call(b,function(a){Ya(c,2,a)},function(a){Ya(c,3,a)})}catch(d){Ya(this,3,d)}}function Za(){this.next=this.context=this.lc=this.Jc=this.child=null;this.Cd=!1}Za.prototype.reset=function(){this.context=this.lc=this.Jc=this.child=null;this.Cd=!1};var $a=new wa(function(){return new Za},function(a){a.reset()},100);function ab(a,b,c){var d=$a.get();d.Jc=a;d.lc=b;d.context=c;return d}
function w(a){if(a instanceof v)return a;var b=new v(da);Ya(b,2,a);return b}function bb(a){return new v(function(b,c){c(a)})}function cb(a,b,c){db(a,b,c,null)||Sa(qa(b,a))}function eb(a){return new v(function(b,c){var d=a.length,e=[];if(d)for(var f=function(a,c){d--;e[a]=c;0==d&&b(e)},h=function(a){c(a)},k=0,n;k<a.length;k++)n=a[k],cb(n,qa(f,k),h);else b(e)})}function x(){var a,b,c=new v(function(c,e){a=c;b=e});return new fb(c,a,b)}
v.prototype.then=function(a,b,c){return gb(this,ja(a)?a:null,ja(b)?b:null,c)};v.prototype.then=v.prototype.then;v.prototype.$goog_Thenable=!0;v.prototype.te=function(a,b){return gb(this,null,a,b)};function hb(a,b){a.fc||2!=a.Ua&&3!=a.Ua||ib(a);a.Xc?a.Xc.next=b:a.fc=b;a.Xc=b}
function gb(a,b,c,d){var e=ab(null,null,null);e.child=new v(function(a,h){e.Jc=b?function(c){try{var e=b.call(d,c);a(e)}catch(B){h(B)}}:a;e.lc=c?function(b){try{var e=c.call(d,b);!q(e)&&b instanceof jb?h(b):a(e)}catch(B){h(B)}}:h});e.child.D=a;hb(a,e);return e.child}v.prototype.Gg=function(a){this.Ua=0;Ya(this,2,a)};v.prototype.Hg=function(a){this.Ua=0;Ya(this,3,a)};
function Ya(a,b,c){0==a.Ua&&(a==c&&(b=3,c=new TypeError("Promise cannot resolve to itself")),a.Ua=1,db(c,a.Gg,a.Hg,a)||(a.mf=c,a.Ua=b,a.D=null,ib(a),3!=b||c instanceof jb||kb(a,c)))}function db(a,b,c,d){if(a instanceof v)return hb(a,ab(b||da,c||null,d)),!0;var e;if(a)try{e=!!a.$goog_Thenable}catch(h){e=!1}else e=!1;if(e)return a.then(b,c,d),!0;e=typeof a;if("object"==e&&null!=a||"function"==e)try{var f=a.then;if(ja(f))return lb(a,f,b,c,d),!0}catch(h){return c.call(d,h),!0}return!1}
function lb(a,b,c,d,e){function f(a){k||(k=!0,d.call(e,a))}function h(a){k||(k=!0,c.call(e,a))}var k=!1;try{b.call(a,h,f)}catch(n){f(n)}}function ib(a){a.Pd||(a.Pd=!0,Sa(a.Rf,a))}function mb(a){var b=null;a.fc&&(b=a.fc,a.fc=b.next,b.next=null);a.fc||(a.Xc=null);return b}
v.prototype.Rf=function(){for(var a=null;a=mb(this);){var b=this.Ua,c=this.mf;if(3==b&&a.lc&&!a.Cd)for(var d=void 0,d=this;d&&d.gd;d=d.D)d.gd=!1;if(a.child)a.child.D=null,nb(a,b,c);else try{a.Cd?a.Jc.call(a.context):nb(a,b,c)}catch(e){ob.call(null,e)}$a.put(a)}this.Pd=!1};function nb(a,b,c){2==b?a.Jc.call(a.context,c):a.lc&&a.lc.call(a.context,c)}function kb(a,b){a.gd=!0;Sa(function(){a.gd&&ob.call(null,b)})}var ob=Ma;function jb(a){ra.call(this,a)}t(jb,ra);jb.prototype.name="cancel";
function fb(a,b,c){this.da=a;this.resolve=b;this.reject=c};function pb(a,b,c,d){c=c||function(a,b){return a==b};d=d||function(b){return a[b]};for(var e=a.length,f=b.length,h=[],k=0;k<e+1;k++)h[k]=[],h[k][0]=0;for(var n=0;n<f+1;n++)h[0][n]=0;for(k=1;k<=e;k++)for(n=1;n<=f;n++)c(a[k-1],b[n-1])?h[k][n]=h[k-1][n-1]+1:h[k][n]=Math.max(h[k-1][n],h[k][n-1]);for(var B=[],k=e,n=f;0<k&&0<n;)c(a[k-1],b[n-1])?(B.unshift(d(k-1,n-1)),k--,n--):h[k-1][n]>h[k][n-1]?k--:n--;return B}function qb(a){return Aa(arguments,function(a,c){return a+c},0)}
function rb(a){return qb.apply(null,arguments)/arguments.length}function sb(a){var b=arguments.length;if(2>b)return 0;var c=rb.apply(null,arguments);return qb.apply(null,za(arguments,function(a){return Math.pow(a-c,2)}))/(b-1)}function tb(a){return Math.sqrt(sb.apply(null,arguments))};var ub="StopIteration"in p?p.StopIteration:{message:"StopIteration",stack:""};function vb(){}vb.prototype.next=function(){throw ub;};vb.prototype.qc=function(){return this};function wb(a){if(a instanceof vb)return a;if("function"==typeof a.qc)return a.qc(!1);if(ha(a)){var b=0,c=new vb;c.next=function(){for(;;){if(b>=a.length)throw ub;if(b in a)return a[b++];b++}};return c}throw Error("Not implemented");}
function xb(a,b){if(ha(a))try{ya(a,b,void 0)}catch(c){if(c!==ub)throw c;}else{a=wb(a);try{for(;;)b.call(void 0,a.next(),void 0,a)}catch(c){if(c!==ub)throw c;}}}function yb(a){if(Ba(arguments,function(a){return!a.length})||!arguments.length)return new vb;var b=new vb,c=arguments,d=Da(c.length);b.next=function(){if(d){for(var a=za(d,function(a,b){return c[b][a]}),b=d.length-1;0<=b;b--){if(d[b]<c[b].length-1){d[b]++;break}if(0==b){d=null;break}d[b]=0}return a}throw ub;};return b};function zb(a,b){this.o={};this.b=[];this.Pa=this.Fb=0;var c=arguments.length;if(1<c){if(c%2)throw Error("Uneven number of arguments");for(var d=0;d<c;d+=2)this.set(arguments[d],arguments[d+1])}else a&&this.addAll(a)}m=zb.prototype;m.Ac=g("Fb");m.ta=function(){Cb(this);for(var a=[],b=0;b<this.b.length;b++)a.push(this.o[this.b[b]]);return a};function Db(a){Cb(a);return a.b.concat()}m.Ma=function(a){return Eb(this.o,a)};m.ld=function(){return 0==this.Fb};
m.clear=function(){this.o={};this.Pa=this.Fb=this.b.length=0};m.remove=function(a){return Eb(this.o,a)?(delete this.o[a],this.Fb--,this.Pa++,this.b.length>2*this.Fb&&Cb(this),!0):!1};function Cb(a){if(a.Fb!=a.b.length){for(var b=0,c=0;b<a.b.length;){var d=a.b[b];Eb(a.o,d)&&(a.b[c++]=d);b++}a.b.length=c}if(a.Fb!=a.b.length){for(var e={},c=b=0;b<a.b.length;)d=a.b[b],Eb(e,d)||(a.b[c++]=d,e[d]=1),b++;a.b.length=c}}m.get=function(a,b){return Eb(this.o,a)?this.o[a]:b};
m.set=function(a,b){Eb(this.o,a)||(this.Fb++,this.b.push(a),this.Pa++);this.o[a]=b};m.addAll=function(a){var b;if(a instanceof zb)b=Db(a),a=a.ta();else{b=[];var c=0,d;for(d in a)b[c++]=d;a=Fa(a)}for(c=0;c<b.length;c++)this.set(b[c],a[c])};m.forEach=function(a,b){for(var c=Db(this),d=0;d<c.length;d++){var e=c[d],f=this.get(e);a.call(b,f,e,this)}};m.clone=function(){return new zb(this)};
m.qc=function(a){Cb(this);var b=0,c=this.Pa,d=this,e=new vb;e.next=function(){if(c!=d.Pa)throw Error("The map has changed since the iterator was created");if(b>=d.b.length)throw ub;var e=d.b[b++];return a?e:d.o[e]};return e};function Eb(a,b){return Object.prototype.hasOwnProperty.call(a,b)};function Fb(){return u("iPhone")&&!u("iPod")&&!u("iPad")};var Gb=Ja(),Hb=u("Trident")||u("MSIE"),Ib=u("Edge"),Jb=u("Gecko")&&!(-1!=Ga.toLowerCase().indexOf("webkit")&&!u("Edge"))&&!(u("Trident")||u("MSIE"))&&!u("Edge"),Kb=-1!=Ga.toLowerCase().indexOf("webkit")&&!u("Edge");function Lb(){var a=Ga;if(Jb)return/rv\:([^\);]+)(\)|;)/.exec(a);if(Ib)return/Edge\/([\d\.]+)/.exec(a);if(Hb)return/\b(?:MSIE|rv)[: ]([^\);]+)(\)|;)/.exec(a);if(Kb)return/WebKit\/(\S+)/.exec(a)}
var ua=function(){if(Gb&&p.opera){var a;var b=p.opera.version;try{a=b()}catch(c){a=b}return a}a="";(b=Lb())&&(a=b?b[1]:"");return Hb&&(b=(b=p.document)?b.documentMode:void 0,b>parseFloat(a))?String(b):a}(),Mb={};var Nb=Fb()||u("iPod"),Ob=u("iPad");!u("Android")||Ka()||u("Firefox")||Ja();var Pb=Ka(),Qb=u("Safari")&&!(Ka()||u("Coast")||Ja()||u("Edge")||u("Silk")||u("Android"))&&!(Fb()||u("iPad")||u("iPod"));/*

 Copyright 2015 The Lovefield Project Authors. All Rights Reserved.

 Licensed under the Apache License, Version 2.0 (the "License");
 you may not use this file except in compliance with the License.
 You may obtain a copy of the License at

     http://www.apache.org/licenses/LICENSE-2.0

 Unless required by applicable law or agreed to in writing, software
 distributed under the License is distributed on an "AS IS" BASIS,
 WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 See the License for the specific language governing permissions and
 limitations under the License.
*/
function Rb(){this.ne=Qb||Ob||Nb;this.$f=!(this.ne||Hb&&!Mb[10]&&!(Mb[10]=0<=ta(10)));!Hb||Mb[11]||(Mb[11]=0<=ta(11));this.Jg=Pb||Qb;this.lg=q(window.Map)&&q(window.Map.prototype.values)&&q(window.Map.prototype.forEach)&&!this.ne;this.mg=q(window.Set)&&q(window.Set.prototype.values)&&q(window.Set.prototype.forEach)&&!this.ne}var Sb;function Tb(){q(Sb)||(Sb=new Rb);return Sb};function y(){this.o=new zb;Object.defineProperty(this,"size",{get:function(){return this.o.Ac()}})}y.prototype.clear=function(){this.o.clear()};y.prototype.clear=y.prototype.clear;y.prototype.delete=function(a){return this.o.remove(a)};y.prototype["delete"]=y.prototype.delete;y.prototype.forEach=function(a,b){return this.o.forEach(a,b)};y.prototype.forEach=y.prototype.forEach;y.prototype.get=function(a){return this.o.get(a)};y.prototype.get=y.prototype.get;y.prototype.has=function(a){return this.o.Ma(a)};
y.prototype.has=y.prototype.has;y.prototype.set=function(a,b){return this.o.set(a,b)};y.prototype.set=y.prototype.set;var Ub=Tb().lg;function z(){return Ub?new window.Map:new y}function Vb(a){if(a instanceof y)return Db(a.o);var b=0,c=Array(a.size);a.forEach(function(a,e){c[b++]=e});return c}function A(a){if(a instanceof y)return a.o.ta();var b=0,c=Array(a.size);a.forEach(function(a){c[b++]=a});return c};/*

 Copyright 2014 The Lovefield Project Authors. All Rights Reserved.

 Licensed under the Apache License, Version 2.0 (the "License");
 you may not use this file except in compliance with the License.
 You may obtain a copy of the License at

     http://www.apache.org/licenses/LICENSE-2.0

 Unless required by applicable law or agreed to in writing, software
 distributed under the License is distributed on an "AS IS" BASIS,
 WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 See the License for the specific language governing permissions and
 limitations under the License.
*/
function Wb(a,b){this.oa=a;this.s=b||this.Je()}var Xb=0;m=Wb.prototype;m.id=g("oa");m.Je=function(){return{}};m.vf=g("s");m.Ga=function(){return{id:this.oa,value:this.vf()}};m.lb=function(a){return"#"==a.substr(-1)?this.oa:null};function Yb(a){return new Wb(a.id,a.value)}function Zb(a){return new Wb(Xb++,a||{})}function ac(a){if(null==a)return null;a=new Uint8Array(a);for(var b="",c=0;c<a.length;++c)var d=a[c].toString(16),b=b+(2>d.length?"0"+d:d);return b};var bc={};r("lf.TransactionType",bc);bc.READ_ONLY=0;bc.READ_WRITE=1;function cc(a,b){this.ue=a;this.Ra=b||null;this.S=x()}cc.prototype.ia=function(){return 0==this.ue?this.tc():dc(this)};function dc(a){try{ec(a.Ra)}catch(b){return bb(b)}return fc(a).then(function(a){this.Ra.ia();return a}.bind(a))}function fc(a){gc(a);hc(a);return a.tc()}
function gc(a){a.Ra.ub.forEach(function(a,c){var d=this.Ra.ca().get(c),d=this.I(d.getName(),d.hb.bind(d),0),e=A(a.za).map(function(a){return a.id()});0<e.length&&d.remove(e).te(this.Pe,this);e=A(a.ma).map(function(a){return a[1]}).concat(A(a.wa));d.put(e).te(this.Pe,this)},a)}function hc(a){ic(a.Ra).forEach(function(a){var c=this.I(a.getName(),Yb,1);c.remove([]);c.put(a.Ga())},a)}cc.prototype.Pe=function(a){this.S.reject(a)};function jc(a){this.Cg=a}jc.prototype.toString=g("Cg");var kc=new jc("backstore"),lc=new jc("cache"),mc=new jc("indexstore"),nc=new jc("engine"),oc=new jc("runner"),pc=new jc("observerregistry"),qc=new jc("schema");function rc(a){if(a.ta&&"function"==typeof a.ta)return a.ta();if(ia(a))return a.split("");if(ha(a)){for(var b=[],c=a.length,d=0;d<c;d++)b.push(a[d]);return b}return Fa(a)};function sc(a){this.o=new zb;a&&this.addAll(a)}function tc(a){var b=typeof a;return"object"==b&&a||"function"==b?"o"+ka(a):b.substr(0,1)+a}m=sc.prototype;m.Ac=function(){return this.o.Ac()};m.add=function(a){this.o.set(tc(a),a)};m.addAll=function(a){a=rc(a);for(var b=a.length,c=0;c<b;c++)this.add(a[c])};m.remove=function(a){return this.o.remove(tc(a))};m.clear=function(){this.o.clear()};m.ld=function(){return this.o.ld()};m.contains=function(a){return this.o.Ma(tc(a))};m.ta=function(){return this.o.ta()};
m.clone=function(){return new sc(this)};m.qc=function(){return this.o.qc(!1)};function uc(a){this.Zb=new sc(a);Object.defineProperty(this,"size",{get:function(){return this.Zb.Ac()}})}uc.prototype.add=function(a){this.Zb.add(a)};uc.prototype.add=uc.prototype.add;uc.prototype.clear=function(){this.Zb.clear()};uc.prototype.clear=uc.prototype.clear;uc.prototype.delete=function(a){return this.Zb.remove(a)};uc.prototype["delete"]=uc.prototype.delete;uc.prototype.forEach=function(a,b){this.Zb.ta().forEach(a,b)};uc.prototype.has=function(a){return this.Zb.contains(a)};
uc.prototype.has=uc.prototype.has;var vc=Tb().mg;function C(a){return vc?q(a)?new window.Set(a):new window.Set:new uc(a)}function D(a){if(a instanceof uc)return a.Zb.ta();var b=0,c=Array(a.size);a.forEach(function(a){c[b++]=a});return c}function wc(a,b){if(b.size>a.size)return!1;var c=!0;b.forEach(function(b){c=c&&a.has(b)});return c};function xc(a,b){this.oa=a;this.s=b||{}}function yc(a){var b=C();a.forEach(function(a){b.add(a>>9)});return D(b)}xc.prototype.Z=g("oa");function zc(a,b){b.forEach(function(a){this.s[a.id()]=a.Ga()},a)}function Ac(a,b){b.forEach(function(a){delete this.s[a]},a)}xc.prototype.Ga=function(){return{id:this.oa,value:JSON.stringify(this.s)}};function Bc(a){return new xc(a.id,JSON.parse(a.value))};function Cc(a,b,c){this.Y=a;this.Hb=b;this.nf=c}m=Cc.prototype;m.get=function(a){if(0==a.length)return this.Sd();var b=this.Hb;return Dc(this,a).then(function(c){return a.map(function(a){var e=c.get(a>>9);return b(e.s[a])})})};function Dc(a,b){var c=z(),d=x(),e=yc(b).map(function(a){return new v(function(b,d){var e;try{e=this.Y.get(a)}catch(B){d(B);return}e.onerror=d;e.onsuccess=function(a){a=Bc(a.target.result);c.set(a.Z(),a);b()}},this)},a);eb(e).then(function(){d.resolve(c)});return d.da}
m.Sd=function(){return new v(function(a,b){var c=[],d;try{d=this.Y.openCursor()}catch(e){b(e);return}d.onerror=b;d.onsuccess=function(){var b=d.result;if(b){var f;f=Bc(b.value).s;for(var h in f)c.push(this.Hb(f[h]));b.continue()}else a(c)}.bind(this)},this)};m.Vb=function(a){return new v(function(b,c){var d;try{d=a()}catch(e){c(e);return}d.onsuccess=b;d.onerror=c},this)};
m.put=function(a){if(0==a.length)return w();var b=z();a.forEach(function(a){var d;d=a.id()>>9;var e=b.get(d)||null;null===e&&(e=this.nf(this.Y.name,d));zc(e,[a]);b.set(d,e)},this);a=A(b).map(function(a){return this.Vb(function(){return this.Y.put(a.Ga())}.bind(this))},this);return eb(a)};
m.remove=function(a){if(0==a.length)return this.Vb(function(){return this.Y.clear()}.bind(this));var b=z();a.forEach(function(a){var d=a>>9,e=b.get(d)||null;null===e&&(e=this.nf(this.Y.name,d));Ac(e,[a]);b.set(d,e)},this);a=A(b).map(function(a){return this.Vb(function(){return 0==Object.keys(a.s).length?this.Y.delete(a.Z()):this.Y.put(a.Ga())}.bind(this))},this);return eb(a)};function Ec(a,b,c){a=a.l(lc);var d=[c<<9,(c+1<<9)-1];b=a.$a(b,d[0],d[1]);c=new xc(c);zc(c,b);return c}
function Fc(a,b){return new xc(b)};function Gc(a){this.V=a.l(lc);this.F=a.l(mc);this.g=a.l(qc)}Gc.prototype.update=function(a){a.forEach(function(a){Hc(this,a);Ic(this,a)},this)};function Ic(a,b){var c=b.getName();b.za.forEach(function(a,b){this.V.remove(c,b)},a);b.wa.forEach(function(a){this.V.set(c,a)},a);b.ma.forEach(function(a){this.V.set(c,a[1])},a)}function Hc(a,b){var c=a.g.table(b.getName());Jc(b).forEach(function(a){Kc(this,c,a)},a)}
function Kc(a,b,c){var d=a.F.nc.get(b.getName())||[],e=0;d.forEach(function(a){try{Lc(a,c),e++}catch(b){throw d.slice(0,e).forEach(function(a){Lc(a,[c[1],c[0]])},this),b;}},a)}function Lc(a,b){var c=null===b[1]?void 0:b[1].lb(a.getName()),d=null===b[0]?void 0:b[0].lb(a.getName());if(!q(d)&&q(c))a.add(c,b[1].id());else if(q(d)&&q(c)){if(null===c||null===d){if(c==d)return}else if(0==a.Nb().compare(d,c))return;a.add(c,b[1].id());a.remove(d,b[0].id())}else q(d)&&!q(c)&&a.remove(d,b[0].id())};var Mc={};r("lf.ConstraintAction",Mc);Mc.RESTRICT=0;Mc.CASCADE=1;var Nc={};r("lf.ConstraintTiming",Nc);Nc.IMMEDIATE=0;Nc.DEFERRABLE=1;var Oc={};r("lf.Order",Oc);Oc.DESC=0;Oc.ASC=1;var Pc={};r("lf.Type",Pc);Pc.ARRAY_BUFFER=0;Pc.BOOLEAN=1;Pc.DATE_TIME=2;Pc.INTEGER=3;Pc.NUMBER=4;Pc.STRING=5;Pc.OBJECT=6;var Qc={0:null,1:!1,2:Object.freeze(new Date(0)),3:0,4:0,5:"",6:null};r("lf.type.DEFAULT_VALUES",Qc);function E(a,b){this.code=a;this.message="http://sn.im/2a0j3wn?c="+a;if(1<arguments.length)for(var c=1;c<=Math.min(4,arguments.length-1);++c)this.message+="&p"+(c-1)+"="+encodeURIComponent(arguments[c].toString().slice(0,64))}t(E,Error);function Rc(){this.o=z();this.size=0}m=Rc.prototype;m.has=function(a){return this.o.has(a)};m.set=function(a,b){var c=this.o.get(a)||null;null===c&&(c=C(),this.o.set(a,c));c.has(b)||(c.add(b),this.size++);return this};m.Yb=function(a,b){var c=this.o.get(a)||null;null===c&&(c=C(),this.o.set(a,c));b.forEach(function(a){c.has(a)||(c.add(a),this.size++)},this);return this};m.$d=function(a){a.keys().forEach(function(b){var c=a.get(b);this.Yb(b,c)},this);return this};
m.delete=function(a,b){var c=this.o.get(a,null);if(null===c)return!1;var d=c.delete(b);d&&(--this.size,0==c.size&&this.o.delete(a));return d};m.get=function(a){a=this.o.get(a)||null;return null===a?null:D(a)};m.clear=function(){this.o.clear();this.size=0};m.keys=function(){return Vb(this.o)};m.values=function(){var a=[];this.o.forEach(function(b){a.push.apply(a,D(b))});return a};function Sc(a){this.F=a.l(mc);this.g=a.l(qc);this.V=a.l(lc);this.ad=null}function Tc(a,b,c){var d=b.Ib().og;c.forEach(function(a){d.forEach(function(b){if(null==a.s[b.getName()])throw new E(202,b.m());},this)},a)}function Vc(a,b,c,d){b.Ib().Td().forEach(function(a){a.timing==d&&Wc(this,a,c)},a)}function Wc(a,b,c){var d=Xc(a,b);c.forEach(function(a){if(Yc(a[0],a[1],b.name)&&(a=a[1].lb(b.name),null!==a&&!d.Ma(a)))throw new E(203,b.name);},a)}
function Xc(a,b){null===a.ad&&(a.ad=z());var c=a.ad.get(b.name)||null;null===c&&(c=a.g.table(b.Sa)[b.Kc].Aa(),c=a.F.get(c.m()),a.ad.set(b.name,c));return c}function Yc(a,b,c){return(null===a?null!==b:null===b)||a.lb(c)!=b.lb(c)}function Zc(a,b,c,d){b=$c(a.g.info(),b.getName(),0);null!==b&&(b=b.filter(function(a){return a.timing==d}),0!=b.length&&ad(a,b,c,function(a,b,c){if(b.Ma(c))throw new E(203,a.name);}))}
function bd(a,b,c){b=$c(a.g.info(),b.getName(),1);if(null===b)return null;var d=new Rc;ad(a,b,c,function(a,b,c){b=b.get(c);0<b.length&&d.Yb(a.Fe,b)});return d}function cd(a,b,c){var d=new Rc;ad(a,c,b,function(a,b,c,k){b.get(c).forEach(function(b){d.set(b,{Qd:a,tg:k[1]})})});return d}function ad(a,b,c,d){b.forEach(function(a){var b=this.F.get(a.name),h=Xc(this,a);c.forEach(function(c){if(Yc(c[0],c[1],h.getName())){var n=c[0].lb(h.getName());d(a,b,n,c)}},this)},a)}
function dd(a,b,c,d){0!=c.length&&(c=c.map(function(a){return[null,a]}),Vc(a,b,c,d))}function ed(a,b,c,d){0!=c.length&&(Vc(a,b,c,d),Zc(a,b,c,d))}function fd(a,b,c,d){0!=c.length&&(c=c.map(function(a){return[a,null]}),Zc(a,b,c,d))}
function gd(a,b,c){var d={se:[],pf:new Rc},e=new Rc;e.Yb(b.getName(),c.map(function(a){return a.id()}));do{var f=new Rc;e.keys().forEach(function(a){var b=this.g.table(a);a=e.get(a).map(function(a){return[this.V.get(a),null]},this);b=bd(this,b,a);null!==b&&(d.se.unshift.apply(d.se,b.keys()),f.$d(b))},a);e=f;d.pf.$d(e)}while(0<e.size);return d};function hd(a){this.wa=z();this.ma=z();this.za=z();this.w=a}m=hd.prototype;m.getName=g("w");m.add=function(a){if(this.za.has(a.id())){var b=[this.za.get(a.id()),a];this.ma.set(a.id(),b);this.za.delete(a.id())}else this.wa.set(a.id(),a)};m.modify=function(a){var b=a[1],c=a[0].id();this.wa.has(c)?this.wa.set(c,b):(this.ma.has(c)&&(a=[this.ma.get(a[0].id())[0],b]),this.ma.set(c,a))};
m.delete=function(a){if(this.wa.has(a.id()))this.wa.delete(a.id());else if(this.ma.has(a.id())){var b=this.ma.get(a.id())[0];this.ma.delete(a.id());this.za.set(a.id(),b)}else this.za.set(a.id(),a)};m.$d=function(a){a.wa.forEach(function(a){this.add(a)},this);a.ma.forEach(function(a){this.modify(a)},this);a.za.forEach(function(a){this.delete(a)},this)};
function Jc(a){var b=[];a.wa.forEach(function(a){b.push([null,a])});a.ma.forEach(function(a){b.push(a)});a.za.forEach(function(a){b.push([a,null])});return b}m.toString=function(){return"["+Vb(this.wa).toString()+"], ["+Vb(this.ma).toString()+"], ["+Vb(this.za).toString()+"]"};function id(a){var b=new hd(a.w);a.wa.forEach(function(a){b.delete(a)});a.za.forEach(function(a){b.add(a)});a.ma.forEach(function(a){b.modify([a[1],a[0]])});return b}
m.ld=function(){return 0==this.wa.size&&0==this.za.size&&0==this.ma.size};function jd(a,b){this.aa=z();b.forEach(function(a){this.aa.set(a.getName(),a)},this);this.g=a.l(qc);this.V=a.l(lc);this.F=a.l(mc);this.xa=new Sc(a);this.jd=new Gc(a);this.ub=z()}function ic(a){var b=[];Vb(a.ub).map(function(a){return this.aa.get(a)},a).forEach(function(a){a.Eb()&&(a.Ba().forEach(function(a){b.push(this.F.get(a.m()))},this),b.push(this.F.get(a.getName()+".#")))},a);return b}m=jd.prototype;m.ca=g("aa");
m.Bb=function(a,b){kd(this,a);Tc(this.xa,a,b);dd(this.xa,a,b,0);for(var c=0;c<b.length;c++)ld(this,a,[null,b[c]])};function ld(a,b,c){var d=b.getName(),e=a.ub.get(d)||new hd(d);a.ub.set(d,e);try{Kc(a.jd,b,c)}catch(h){throw h;}b=c[0];var f=c[1];null===b&&null!==f?(a.V.set(d,f),e.add(f)):null!==b&&null!==f?(a.V.set(d,f),e.modify(c)):null!==b&&null===f&&(a.V.remove(d,b.id()),e.delete(b))}
m.update=function(a,b){kd(this,a);Tc(this.xa,a,b);var c=b.map(function(a){return[this.V.get(a.id()),a]},this);md(this,a,c);ed(this.xa,a,c,0);c.forEach(function(b){ld(this,a,b)},this)};m.Ud=function(a,b){kd(this,a);Tc(this.xa,a,b);for(var c=0;c<b.length;c++){var d=b[c],e=null,f,h=a.Ib().dd();if(null===h)f=null;else{f=this.xa;var h=h.m(),k=d.lb(h);f=f.F.get(h).get(k);f=0==f.length?null:f[0]}null!=f?(e=this.V.get(f),d.oa=f,ed(this.xa,a,[[e,d]],0)):dd(this.xa,a,[d],0);ld(this,a,[e,d])}};
m.remove=function(a,b){kd(this,a);nd(this,a,b);fd(this.xa,a,b,0);for(var c=0;c<b.length;c++)ld(this,a,[b[c],null])};function md(a,b,c){b=$c(a.g.info(),b.getName(),1);if(null!==b){var d=cd(a.xa,c,b);d.keys().forEach(function(a){d.get(a).forEach(function(b){var c=this.g.table(b.Qd.Fe),d=this.V.get(a),n=c.hb(d.Ga());n.s[b.Qd.vb]=b.tg.s[b.Qd.Kc];ld(this,c,[d,n])},this)},a)}}
function nd(a,b,c){if(null!==$c(a.g.info(),b.getName(),1)){b=gd(a.xa,b,c);var d=b.pf;b.se.forEach(function(a){var b=this.g.table(a);a=d.get(a).map(function(a){return this.V.get(a)},this);fd(this.xa,b,a,0);a.forEach(function(a){ld(this,b,[a,null])},this)},a)}}function ec(a){a.ub.forEach(function(a){var c=this.aa.get(a.getName());dd(this.xa,c,A(a.wa),1);fd(this.xa,c,A(a.za),1);ed(this.xa,c,A(a.ma),1)},a)}m.ia=aa();m.Lb=function(){var a=A(this.ub).map(function(a){return id(a)});this.jd.update(a)};
function kd(a,b){if(!a.aa.has(b.getName()))throw new E(106,b.getName());};function od(a,b,c,d){this.c=a;this.A=b;this.ea=this.c==F?!1:c;this.la=this.A==F?!1:d}var F=new (aa());od.prototype.toString=function(){return(this.ea?"(":"[")+(this.c==F?"unbound":this.c)+", "+(this.A==F?"unbound":this.A)+(this.la?")":"]")};function pd(a){if(qd(a))return[];var b=null,c=null;a.c==F||(b=new od(F,a.c,!1,!a.ea));a.A==F||(c=new od(a.A,F,!a.la,!1));return[b,c].filter(function(a){return null!==a})}od.prototype.reverse=function(){return new od(this.A,this.c,this.la,this.ea)};
function rd(a,b){var c=sd(a.c,b.c,!0,a.ea,b.ea);if(0==c)return!0;var d=-1==c?a:b,c=1==c?a:b;return d.A==F||d.A>c.c||d.A==c.c&&!d.la&&!c.ea}function td(){return new od(F,F,!1,!1)}function qd(a){return a.c==F&&a.A==F}function ud(a){return a.c==a.A&&a.c!=F&&!a.ea&&!a.la}od.prototype.contains=function(a){var b=this.A==F||a<this.A||a==this.A&&!this.la;return(this.c==F||a>this.c||a==this.c&&!this.ea)&&b};
function sd(a,b,c,d,e){function f(a){return c?a:1==a?-1:1}d=d||!1;e=e||!1;return a==F?b==F?(d?!e:e)?d?f(1):f(-1):0:f(-1):b==F?f(1):a<b?-1:a==b?(d?!e:e)?d?f(1):f(-1):0:1}function vd(a,b){var c=sd(a.c,b.c,!0,a.ea,b.ea);0==c&&(c=sd(a.A,b.A,!1,a.la,b.la));return c};function G(a,b){this.entries=a;this.M=C(b);this.Ya=null}function H(a){return D(a.M)}function wd(a){return a.entries.map(function(a){return a.va.s})}function xd(a){return a.entries.map(function(a){return a.va.id()})}function yd(a,b){return a.Ya.get(b.m())}var zd=null;function Ad(){null===zd&&(zd=new G([],[]));return zd}
function Bd(a){if(0==a.length)return Ad();for(var b=a.reduce(function(a,b){return a+b.entries.length},0),c=Array(b),d=0,b=a.map(function(a){var b=z();a.entries.forEach(function(a){c[d++]=a;b.set(a.id,a)});return b}),e=z(),f=0;f<c.length;f++)b.every(function(a){return a.has(c[f].id)})&&e.set(c[f].id,c[f]);return new G(A(e),D(a[0].M))}function Cd(a){if(0==a.length)return Ad();var b=z();a.forEach(function(a){a.entries.forEach(function(a){b.set(a.id,a)})});return new G(A(b),D(a[0].M))}
function Dd(a,b){var c=1<b.length,d=a.map(function(a){return new Ed(a,c)});return new G(d,b)}function Ed(a,b){this.va=a;this.id=Fd++;this.Wd=b}var Fd=0;function I(a,b){var c=b.Za();return null!==c&&a.va.s.hasOwnProperty(c)?a.va.s[c]:a.Wd?a.va.s[J(b.I())][b.getName()]:a.va.s[b.getName()]}function Gd(a,b,c){var d=b.Za();if(null!=d)a.va.s[d]=c;else if(a.Wd){var d=J(b.I()),e=a.va.s[d];null==e&&(e={},a.va.s[d]=e);e[b.getName()]=c}else a.va.s[b.getName()]=c}
function Hd(a,b,c,d){function e(a,b){if(a.Wd){var c=a.va.s,d;for(d in c)f[d]=c[d]}else f[b[0]]=a.va.s}var f={};e(a,b);e(c,d);a=new Wb(-1,f);return new Ed(a,!0)};r("lf.bind",function(a){return new Id(a)});function Id(a){this.ga=a}r("lf.Binder",Id);Id.prototype.Aa=g("ga");function Jd(){this.We=Kd();var a=Ld();this.ic=z();this.ic.set(1,Md());this.ic.set(2,Nd());this.ic.set(4,a);this.ic.set(3,a);this.ic.set(5,Od())}Jd.Bc=function(){return Jd.Se?Jd.Se:Jd.Se=new Jd};function Pd(a,b,c){return(a.ic.get(b)||null).get(c)||null}function Kd(){function a(a){return a}var b=z();b.set(1,function(a){return null===a?null:a?1:0});b.set(2,function(a){return null===a?null:a.getTime()});b.set(3,a);b.set(4,a);b.set(5,a);return b}
function Md(){var a=z();a.set("eq",function(a,c){return a==c});a.set("neq",function(a,c){return a!=c});return a}
function Ld(){var a=Md();a.set("between",function(a,c){return null===a||null===c[0]||null===c[1]?!1:a>=c[0]&&a<=c[1]});a.set("gte",function(a,c){return null===a||null===c?!1:a>=c});a.set("gt",function(a,c){return null===a||null===c?!1:a>c});a.set("in",function(a,c){return-1!=c.indexOf(a)});a.set("lte",function(a,c){return null===a||null===c?!1:a<=c});a.set("lt",function(a,c){return null===a||null===c?!1:a<c});return a}
function Od(){var a=Ld();a.set("match",function(a,c){return null===a||null===c?!1:(new RegExp(c)).test(a)});return a}
function Nd(){var a=z();a.set("between",function(a,c){return null===a||null===c[0]||null===c[1]?!1:a.getTime()>=c[0].getTime()&&a.getTime()<=c[1].getTime()});a.set("eq",function(a,c){return(null===a?-1:a.getTime())==(null===c?-1:c.getTime())});a.set("gte",function(a,c){return null===a||null===c?!1:a.getTime()>=c.getTime()});a.set("gt",function(a,c){return null===a||null===c?!1:a.getTime()>c.getTime()});a.set("in",function(a,c){return c.some(function(c){return c.getTime()==a.getTime()})});a.set("lte",
function(a,c){return null===a||null===c?!1:a.getTime()<=c.getTime()});a.set("lt",function(a,c){return null===a||null===c?!1:a.getTime()<c.getTime()});a.set("neq",function(a,c){return(null===a?-1:a.getTime())!=(null===c?-1:c.getTime())});return a};function K(){this.h=this.D=null}var Qd=[];K.prototype.getParent=g("D");K.prototype.jb=function(){for(var a=this;!fa(a.getParent());)a=a.getParent();return a};function Rd(a){for(var b=0;!fa(a.getParent());)b++,a=a.getParent();return b}function L(a){return a.h||Qd}function Sd(a,b){return L(a)[b]||null}function Td(a,b,c){b.D=a;null===a.h?a.h=[b]:a.h.splice(c,0,b)}function Ud(a,b){b.D=a;null===a.h?a.h=[b]:a.h.push(b)}
function Vd(a,b){var c=a.h&&a.h[b];return c?(c.D=null,a.h.splice(b,1),0==a.h.length&&(a.h=null),c):null}K.prototype.removeChild=function(a){return Vd(this,L(this).indexOf(a))};function Wd(a,b,c){Sd(a,c).D=null;b.D=a;a.h[c]=b}function Xd(a,b,c){!1!==b.call(c,a)&&L(a).forEach(function(a){Xd(a,b,c)})};function Yd(){K.call(this);this.oa=Zd++}t(Yd,K);var Zd=0;Yd.prototype.Z=g("oa");function $d(a,b,c){Yd.call(this);this.N=a;this.value=b;this.G=c;this.wc=Pd(Jd.Bc(),this.N.H(),this.G);this.ab=!1;this.ec=b}t($d,Yd);m=$d.prototype;m.Ob=function(){var a=new $d(this.N,this.value,this.G);a.ec=this.ec;a.wd(this.ab);var b=this.Z();a.oa=b;return a};m.ib=function(a){return null!=a?(a.push(this.N),a):[this.N]};m.wd=ba("ab");function ae(a){var b=!1;a.value instanceof Id||(b="array"==ea(a.value)?!a.value.some(function(a){return a instanceof Id}):!0);if(!b)throw new E(501);}
m.eval=function(a){ae(this);if("in"==this.G)return be(this,a);var b=a.entries.filter(function(a){return this.wc(I(a,this.N),this.value)!=this.ab},this);return new G(b,H(a))};m.bind=function(a){if(this.ec instanceof Id){var b=this.ec.Aa();if(a.length<=b)throw new E(510);this.value=a[b]}else"array"==ea(this.ec)&&(this.value=this.ec.map(function(b){if(b instanceof Id){var d=b.Aa();if(a.length<=d)throw new E(510);return a[b.Aa()]}return b}))};
function be(a,b){var c=C(a.value),d=function(a){return null===a?!1:c.has(a)!=this.ab}.bind(a),e=b.entries.filter(function(a){return d(I(a,this.N))},a);return new G(e,H(b))}m.toString=function(){return"value_pred("+this.N.m()+" "+this.G+(this.ab?"(complement)":"")+" "+this.value+")"};function ce(a,b){return 2==a.N.H()?b.getTime():b};function de(a){this.ba=a;this.Yc=this.Da=null}function ee(a,b){null===a.Da&&null!=a.u&&(a.Da=fe(a.u));return a.Da.get(b)||null}function fe(a){var b=z();Xd(a,function(a){b.set(a.Z(),a)});return b}function ge(a,b){b.u&&(a.u=b.u.Ob());a.Yc=b}de.prototype.bind=function(){return this};function he(a,b){var c=a.u;null!=c&&Xd(c,function(a){a instanceof $d&&a.bind(b)})};function ie(a){de.call(this,a)}t(ie,de);function je(a){var b="";a.forEach(function(c,d){b+=c.N.m()+" ";b+=1==c.nb?"ASC":"DESC";d<a.length-1&&(b+=", ")});return b}ie.prototype.ca=function(){return C(this.c)};ie.prototype.clone=function(){var a=new ie(this.ba);ge(a,this);this.f&&(a.f=this.f.slice());this.c&&(a.c=this.c.slice());a.X=this.X;a.L=this.L;this.O&&(a.O=this.O.slice());this.ja&&(a.ja=this.ja.slice());this.Tb&&(a.Tb=this.Tb);this.ac&&(a.ac=this.ac);a.Db=this.Db;return a};
ie.prototype.bind=function(a){ie.eb.bind.call(this,a);null!=this.Tb&&(this.X=a[this.Tb.Aa()]);null!=this.ac&&(this.L=a[this.ac.Aa()]);he(this,a);return this};function ke(a,b){this.Ea=a;this.aa=b}ke.prototype.jb=g("Ea");ke.prototype.ca=g("aa");function le(a){var b=C();a.forEach(function(a){a.ca().forEach(b.add.bind(b))});return b};function me(a,b){this.global=a;this.La=a.l(kc);this.td=b.map(function(a){return a.context});this.ff=b.map(function(a){return a.he});this.Kd=le(this.ff);this.ve=oe(this);this.cb=x()}function oe(a){return a.td.some(function(a){return!(a instanceof ie)})?1:0}m=me.prototype;
m.exec=function(){function a(){var f=d.shift();if(f){var h=e[c.length];return f.jb().exec(b,h).then(function(b){c.push(b[0]);return a()})}return w()}var b=0==this.ve?void 0:new jd(this.global,this.Kd),c=[],d=this.ff.slice(),e=this.td;return a().then(function(){return this.La.Gb(this.ve,D(this.Kd),b).ia()}.bind(this)).then(function(){this.ee(c);return c}.bind(this),function(a){null!=b&&b.Lb();throw a;})};m.H=g("ve");m.ca=g("Kd");m.Pb=g("cb");m.Z=function(){return ka(this)};m.ee=aa();function pe(a,b){me.call(this,a,b);this.Kb=a.l(pc)}t(pe,me);pe.prototype.getPriority=l(0);pe.prototype.ee=function(a){this.td.forEach(function(b,c){qe(this.Kb,b,a[c])},this)};function re(a,b){this.i=a;this.Kb=a.l(pc);this.Fa=a.l(oc);this.jd=new Gc(a);this.ub=b;var c=a.l(qc),d=this.ub.map(function(a){return c.table(a.getName())});this.aa=C(d);this.cb=x()}m=re.prototype;m.exec=function(){this.jd.update(this.ub);this.Nc();return w()};m.H=l(1);m.ca=g("aa");m.Pb=g("cb");m.Z=function(){return ka(this)};m.getPriority=l(1);m.Nc=function(){var a=se(this.Kb,this.aa);0!=a.length&&(a=new pe(this.i,a),te(this.Fa,a))};function ue(a){this.i=a;this.La=a.l(kc);this.Fa=a.l(oc)}ue.prototype.ce=function(a){a=new re(this.i,a);te(this.Fa,a)};function M(a,b){this.Pa=a;this.j=b;this.Va=z()}r("lf.backstore.FirebaseRawBackStore",M);M.prototype.ed=g("j");M.prototype.fd=function(){throw new E(351);};function ve(a,b){var c=x(),d=a;b.length&&(d=a.child(b));d.once("value",function(a){c.resolve(a.val())},function(a){c.reject(a)});return c.da}function we(a,b,c){function d(a){a?e.reject(a):e.resolve()}c=c||!1;var e=x();c?a.set(b,d):a.update(b,d);return e.da}
M.prototype.Ha=function(a){return ve(this.j,"@rev/R").then(function(a){this.Na=a;return ve(this.j,"@table")}.bind(this)).then(function(b){var c=0,d;for(d in b)this.Va.set(d,b[d]),b[d]>c&&(c=b[d]);a.ra().forEach(function(a){this.Va.has(a.getName())||(b[a.getName()]=++c)},this);d=this.j.child("@table");return we(d,b)}.bind(this))};
function xe(a,b,c){var d=a.Va.get(b);return null!=d?function(){var a={},b=x();this.j.orderByChild("T").equalTo(d).once("value",function(d){d.forEach(function(b){var d=c(b.val());a[parseInt(b.key(),10)]=d});b.resolve(a)});return b.da}.call(a).then(function(a){a["@rev"]={R:++this.Na};return we(this.j,a)}.bind(a)):w()}M.prototype.uc=function(a){return xe(this,a,l(null)).then(function(){this.Va.delete(a);return we(this.j.child("@table/"+a),null,!0)}.bind(this))};M.prototype.dropTable=M.prototype.uc;
M.prototype.rc=function(a,b,c){return xe(this,a,function(a){var e=a.P;e[b]=c;return{R:this.Na+1,T:a.T,P:e}}.bind(this))};M.prototype.addTableColumn=M.prototype.rc;M.prototype.vc=function(a,b){return xe(this,a,function(a){var d=a.P;delete d[b];return{R:this.Na+1,T:a.T,P:d}}.bind(this))};M.prototype.dropTableColumn=M.prototype.vc;M.prototype.Mc=function(a,b,c){return xe(this,a,function(a){var e=a.P;e[c]=e[b];delete e[b];return{R:this.Na+1,T:a.T,P:e}}.bind(this))};M.prototype.renameTableColumn=M.prototype.Mc;
M.prototype.xb=function(){throw new E(351);};M.prototype.createRow=M.prototype.xb;M.prototype.Ec=g("Pa");M.prototype.getVersion=M.prototype.Ec;M.prototype.gc=function(a){var b=x();a=this.Va.get(a);this.j.orderByChild("T").equalTo(a).once("value",function(a){var d=[];a.forEach(function(a){d.push(a.val().P)});b.resolve(d)});return b.da};M.prototype.dump=function(){var a={},b=Vb(this.Va).map(function(b){return this.gc(b).then(function(d){a[b]=d})}.bind(this));return eb(b).then(function(){return a})};
M.prototype.dump=M.prototype.dump;function ye(a,b,c){cc.call(this,b,c);this.j=a}t(ye,cc);ye.prototype.I=function(a){return this.j.Cc(a)};
ye.prototype.tc=function(){if(0==this.ue)return this.S.resolve(),this.S.da;var a=this.Ra.ub;if(0==a.size)this.S.resolve();else{var b=this.j.Na+1;this.j.Na=b;var c={"@rev":{R:b}};a.forEach(function(a,e){var f=this.j.Va.get(e);a.wa.forEach(function(a,d){c[d]={R:b,T:f,P:a.s}});a.ma.forEach(function(a,d){c[d]={R:b,T:f,P:a[1].s}});a.za.forEach(function(a,b){c[b]=null})},this);this.j.j.update(c,function(c){null===c?this.S.resolve():(this.j.Na=b-1,c=A(a).map(function(a){return ze(this.j,a.getName())},this),
eb(c).then(this.S.reject.bind(this.S),this.S.reject.bind(this.S)))}.bind(this))}return this.S.da};function Ae(){this.ya=z()}function Be(a,b){if(0==b.length)return A(a.ya);var c=[];b.forEach(function(a){a=this.ya.get(a)||null;null===a||c.push(a)},a);return c}Ae.prototype.getData=g("ya");Ae.prototype.get=function(a){return w(Be(this,a))};function Ce(a,b){b.forEach(function(a){this.ya.set(a.id(),a)},a)}Ae.prototype.put=function(a){Ce(this,a);return w()};function De(a,b){0==b.length||b.length==a.ya.size?a.ya.clear():b.forEach(function(a){this.ya.delete(a)},a)}
Ae.prototype.remove=function(a){De(this,a);return w()};function Ee(a){return 0==a.ya.size?0:Vb(a.ya).reduce(function(a,c){return a>c?a:c},0)};function Fe(a,b){this.g=a;this.Cf=b;this.Lc=z();this.Na=-1;this.M=z();this.Va=z();this.Hd=null}m=Fe.prototype;
m.Ha=function(a){this.j=this.Cf.child(this.g.name());var b=a||function(){return w()};return ve(this.j,"@db/version").then(function(a){return null===a?we(this.j,Ge(this),!0).then(function(){var a=new M(0,this.j);return b(a)}.bind(this)):a==this.g.version()?ve(this.j,"@rev/R").then(function(a){this.Na=a;return ve(this.j,"@table")}.bind(this)).then(function(a){for(var b in a)this.Va.set(b,a[b]);a=this.g.ra().map(function(a){return ze(this,a.getName())},this);return eb(a)}.bind(this)).then(function(){He(this);
Ie(this);return w()}.bind(this)):this.fe(a,b).then(function(){return this.Ha()}.bind(this))}.bind(this))};m.fe=function(a,b){var c=new M(a,this.j);return c.Ha(this.g).then(function(){return w()}.bind(this)).then(function(){return b(c)}).then(function(){var a=this.j.child("@db");return we(a,{version:this.g.version()},!0)}.bind(this))};
function Ie(a){a.j.off();a.j.on("child_removed",a.qg.bind(a));a.Id&&(a.Id.off(),a.Lc.clear());a.Id=a.j.orderByChild("R").startAt(a.Na+1);a.Id.on("value",a.ce.bind(a))}function He(a){Xb=A(a.M).map(function(a){return Ee(a)}).reduce(function(a,c){return a>c?a:c},0)+1}m.qg=function(a){var b=a.val(),c=this.Lc.get(b.T)||null;null===c&&(c=C(),this.Lc.set(b.T,c));c.add(parseInt(a.key(),10))};
m.ce=function(a){var b=a.child("@rev/R").val();null!=b&&b!=this.Na&&(this.Na=b,a=Je(this,a),a.forEach(function(a){var b=this.M.get(a.getName()),e=Vb(a.za);0<e.length&&De(b,e);var f=A(a.wa);a.ma.forEach(function(a){f.push(a[1])});Ce(b,f)},this),0<a.length&&this.Hc(a),Ie(this))};
function Je(a,b){var c=C(),d=z();a.Va.forEach(function(a,b){var h=this.M.get(b),k=new hd(b);if(this.Lc.has(a)){var n=D(this.Lc.get(a));n.forEach(function(a){c.add(a)});Be(h,n).forEach(function(a){k.delete(a)})}d.set(a,k)}.bind(a));b.forEach(function(a){if("@rev"!=a.key()){var b=parseInt(a.key(),10);if(!c.has(b)){var h=a.val();a=d.get(h.T);var k=this.M.get(a.getName()),h=this.g.table(a.getName()).hb({id:b,value:h.P});k.getData().has(b)?a.modify([Be(k,[b])[0],h]):a.add(h)}}}.bind(a));return A(d).filter(function(a){return!a.ld()})}
function ze(a,b){var c=x(),d=a.Va.get(b),e=a.g.table(b);a.j.orderByChild("T").equalTo(d).once("value",function(a){var d=new Ae,k=[];a.forEach(function(a){k.push(e.hb({id:parseInt(a.key(),10),value:a.val().P}))});Ce(d,k);this.M.set(b,d);c.resolve()}.bind(a));return c.da}function Ge(a){var b={};b["@db"]={version:a.g.version()};b["@rev"]={R:1};a.Na=1;b["@table"]={};a.g.ra().forEach(function(a,d){var e=a.getName();b["@table"][e]=d;this.M.set(e,new Ae);this.Va.set(e,d)},a);return b}
m.Gb=function(a,b,c){return new ye(this,a,c)};m.Cc=function(a){var b=this.M.get(a)||null;if(null!==b)return b;throw new E(101,a);};m.close=aa();m.subscribe=ba("Hd");m.Hc=function(a){null!=this.Hd&&this.Hd(a)};function N(a,b,c,d){this.j=b;this.Xa=c;this.Pa=a;this.Wc=d}r("lf.backstore.IndexedDBRawBackStore",N);N.prototype.ed=g("j");N.prototype.getRawDBInstance=N.prototype.ed;N.prototype.fd=g("Xa");N.prototype.getRawTransaction=N.prototype.fd;N.prototype.uc=function(a){return new v(function(b,c){try{this.j.deleteObjectStore(a)}catch(d){c(d);return}b()},this)};N.prototype.dropTable=N.prototype.uc;
function Ke(a,b,c,d){return new v(function(a,f){var h;try{var k=this.Xa.objectStore(b);h=k.openCursor()}catch(n){f(n);return}h.onsuccess=function(){var b=h.result;b?(c(b),b.continue()):(d(k),a())};h.onerror=f},a)}function Le(a){var b=null;return b=a instanceof ArrayBuffer?ac(a):a instanceof Date?a.getTime():a}
function Me(a,b,c){function d(a){var b=Bc(a.value),d=b.s,e;for(e in d){var B=Yb(d[e]);c(B);d[e]=B.Ga()}a.update(b.Ga())}function e(a){var b=Yb(a.value);c(b);a.update(b.Ga())}return Ke(a,b,a.Wc?d:e,aa())}N.prototype.rc=function(a,b,c){var d=Le(c);return Me(this,a,function(a){a.s[b]=d})};N.prototype.addTableColumn=N.prototype.rc;N.prototype.vc=function(a,b){return Me(this,a,function(a){delete a.s[b]})};N.prototype.dropTableColumn=N.prototype.vc;
N.prototype.Mc=function(a,b,c){return Me(this,a,function(a){a.s[c]=a.s[b];delete a.s[b]})};N.prototype.renameTableColumn=N.prototype.Mc;function Ne(a,b){var c=[];return new v(function(a,e){var f;try{f=this.Xa.objectStore(b).openCursor()}catch(h){e(h);return}f.onsuccess=function(){var b=f.result;if(b){if(this.Wc){var e;e=Bc(b.value).s;for(var n in e)c.push(e[n])}else c.push(b.value);b.continue()}else a(c)}.bind(this);f.onerror=e},a)}N.prototype.xb=function(a){var b={},c;for(c in a)b[c]=Le(a[c]);return Zb(b)};
N.prototype.createRow=N.prototype.xb;N.prototype.Ec=g("Pa");N.prototype.getVersion=N.prototype.Ec;N.prototype.dump=function(){for(var a=this.j.objectStoreNames,b=[],c=0;c<a.length;++c){var d=a.item(c);b.push(this.gc(d))}return eb(b).then(function(b){var c={};b.forEach(function(b,d){c[a.item(d)]=b});return c})};N.prototype.dump=N.prototype.dump;N.prototype.gc=function(a){return Ne(this,a).then(function(a){return a.map(function(a){return a.value})})};function Oe(a,b){this.Y=a;this.Hb=b}Oe.prototype.get=function(a){if(0==a.length)return null!=this.Y.getAll?Pe(this):Qe(this);a=a.map(function(a){return new v(function(c,d){var e;try{e=this.Y.get(a)}catch(f){d(f);return}e.onerror=d;e.onsuccess=function(a){c(this.Hb(a.target.result))}.bind(this)},this)},this);return eb(a)};
function Qe(a){return new v(function(a,c){var d=[],e;try{e=this.Y.openCursor()}catch(f){c(f);return}e.onerror=c;e.onsuccess=function(){var c=e.result;c?(d.push(this.Hb(c.value)),c.continue()):a(d)}.bind(this)},a)}function Pe(a){return new v(function(a,c){var d;try{d=this.Y.getAll()}catch(e){c(e);return}d.onerror=c;d.onsuccess=function(){var c=d.result.map(function(a){return this.Hb(a)},this);a(c)}.bind(this)},a)}
Oe.prototype.Vb=function(a){return new v(function(b,c){var d;try{d=a()}catch(e){c(e);return}d.onsuccess=b;d.onerror=c},this)};Oe.prototype.put=function(a){if(0==a.length)return w();a=a.map(function(a){return this.Vb(function(){return this.Y.put(a.Ga())}.bind(this))},this);return eb(a)};
Oe.prototype.remove=function(a){return new v(function(b,c){var d=this.Y.count();d.onsuccess=function(d){if(0==a.length||d.target.result==a.length)return this.Vb(function(){return this.Y.clear()}.bind(this)).then(b,c);d=a.map(function(a){return this.Vb(function(){return this.Y.delete(a)}.bind(this))},this);eb(d).then(b,c)}.bind(this);d.onerror=c},this)};function Re(a,b,c,d,e){cc.call(this,c,e);this.i=a;this.Xa=b;this.Wc=d;this.Xa.oncomplete=this.S.resolve.bind(this.S);this.Xa.onabort=this.S.reject.bind(this.S)}t(Re,cc);Re.prototype.I=function(a,b,c){return this.Wc?(c=null!=c?c:0,a=this.Xa.objectStore(a),new Cc(a,b,0==c?qa(Ec,this.i):Fc)):new Oe(this.Xa.objectStore(a),b)};Re.prototype.tc=function(){return this.S.da};function Se(a,b){this.i=a;this.g=b;this.Ed=b.gf().Of||!1}m=Se.prototype;
m.Ha=function(a){var b=window.indexedDB||window.mozIndexedDB||window.webkitIndexedDB||window.msIndexedDB;if(null==b)throw new E(352);var c=a||function(){return w()};return new v(function(a,e){var f;try{f=b.open(this.g.name(),this.g.version())}catch(h){e(h);return}f.onerror=e;f.onupgradeneeded=function(a){Te(this,c,a).then(aa(),e)}.bind(this);f.onsuccess=function(b){this.j=b.target.result;this.oe().then(function(b){Xb=b+1;a(this.j)}.bind(this))}.bind(this)},this)};
function Te(a,b,c){var d=c.target.result;c=new N(c.oldVersion,d,c.target.transaction,a.Ed);Ue(d);a.g.ra().forEach(qa(a.Jf,d),a);return b(c)}function Ue(a){for(var b=[],c=0;c<a.objectStoreNames.length;++c){var d=a.objectStoreNames.item(c);-1!=d.indexOf(".")&&b.push(d)}b.forEach(function(b){try{a.deleteObjectStore(b)}catch(c){}})}m.Jf=function(a,b){a.objectStoreNames.contains(b.getName())||a.createObjectStore(b.getName(),{keyPath:"id"});b.Eb()&&(b.Ba().forEach(function(b){Ve(a,b.m())},this),Ve(a,We(b)))};
function Ve(a,b){a.objectStoreNames.contains(b)||a.createObjectStore(b,{keyPath:"id"})}m.Gb=function(a,b,c){b=this.j.transaction(Xe(b),0==a?"readonly":"readwrite");return new Re(this.i,b,a,this.Ed,c)};function Xe(a){var b=C();a.forEach(function(a){b.add(a.getName());a.Eb()&&(a.Ba().forEach(function(a){b.add(a.m())}),b.add(We(a)))});return D(b)}
m.oe=function(a){function b(){if(0==d.length)return w();var a=d.shift();return c(a).then(b)}function c(b){return new v(function(c,d){var O;try{O=(a||e.transaction([b])).objectStore(b).openCursor(null,"prev")}catch(ca){d(ca);return}O.onsuccess=function(a){(a=a.target.result)&&(f=Math.max(f,h(a)));c(f)};O.onerror=function(){c(f)}})}var d=this.g.ra().map(function(a){return a.getName()}),e=this.j,f=0,h=function(a){return this.Ed?(a=Bc(a.value),Object.keys(a.s).reduce(function(a,b){return Math.max(a,b)},
0)):a.key}.bind(this);return new v(function(a){b().then(function(){a(f)})})};m.close=function(){this.j.close()};m.Cc=function(){throw new E(511);};m.subscribe=aa();m.Hc=aa();function Ye(a,b,c){cc.call(this,b,c);this.Y=a;0==b&&this.S.resolve()}t(Ye,cc);Ye.prototype.I=function(a){return this.Y.Cc(a)};Ye.prototype.tc=function(){this.S.resolve();return this.S.da};function Ze(a){this.g=a;this.M=z()}m=Ze.prototype;m.Ha=function(){this.g.ra().forEach(this.ag,this);return w()};m.Cc=function(a){var b=this.M.get(a)||null;if(null===b)throw new E(101,a);return b};m.Gb=function(a,b,c){return new Ye(this,a,c)};function $e(a,b){if(!a.M.has(b)){var c=new Ae;a.M.set(b,c)}}m.ag=function(a){$e(this,a.getName());a.Eb()&&(a.Ba().forEach(function(a){$e(this,a.m())},this),$e(this,We(a)))};m.close=aa();m.subscribe=aa();m.Hc=aa();function af(a){Ze.call(this,a);this.pd=null}t(af,Ze);af.prototype.subscribe=function(a){null===this.pd&&(this.pd=a)};af.prototype.Hc=function(a){null===this.pd||this.pd(a)};function bf(a,b,c){this.Xa=a;this.w=b;this.Hb=c}bf.prototype.get=function(a){var b=this.Hb;return cf(this.Xa,"SELECT id, value FROM "+this.w+" "+(0==a.length?"":"WHERE id IN ("+a.join(",")+")"),[],function(a){for(var d=a.rows.length,e=Array(d),f=0;f<d;++f)e[f]=b({id:a.rows.item(f).id,value:JSON.parse(a.rows.item(f).value)});return e})};
bf.prototype.put=function(a){if(0==a.length)return w();var b="INSERT OR REPLACE INTO "+this.w+"(id, value) VALUES (?, ?)";a.forEach(function(a){cf(this.Xa,b,[a.id(),JSON.stringify(a.s)])},this);return w()};bf.prototype.remove=function(a){cf(this.Xa,"DELETE FROM "+this.w+" "+(0==a.length?"":"WHERE id IN ("+a.join(",")+")"),[]);return w()};function df(a,b,c){cc.call(this,b,c);this.j=a;this.M=z();this.Ld=[]}t(df,cc);function ef(a){return a.replace(".","__d__").replace("#","__s__")}df.prototype.I=function(a,b){var c=this.M.get(a)||null;null===c&&(c=new bf(this,ef(a),b),this.M.set(a,c));return c};function cf(a,b,c,d){var e=x();a.Ld.push({Eg:b,ug:c,transform:d,S:e});return e.da}
df.prototype.tc=function(){var a=null,b=this.S.reject.bind(this.S),c=function(a,b){this.S.reject(b)}.bind(this),d=[],e=function(b,h){if(null!==a){var k=h;null!=a.transform&&null!=h&&(k=a.transform(h));d.push(k);a.S.resolve(k)}0<this.Ld.length?(a=k=this.Ld.shift(),b.executeSql(k.Eg,k.ug,e,c)):this.S.resolve(d)}.bind(this);0==this.ue?this.j.readTransaction(e,b):this.j.transaction(e,b);return this.S.da};function P(a,b,c){this.j=c;this.i=a;this.Pa=b}r("lf.backstore.WebSqlRawBackStore",P);P.prototype.ed=g("j");P.prototype.getRawDBInstance=P.prototype.ed;P.prototype.fd=function(){throw new E(356);};P.prototype.getRawTransaction=P.prototype.fd;function ff(a){return new df(a.j,1,new jd(a.i,C()))}P.prototype.uc=function(a){var b=ff(this);cf(b,"DROP TABLE "+a,[]);return b.ia()};P.prototype.dropTable=P.prototype.uc;
P.prototype.gc=function(a){var b=ff(this);cf(b,"SELECT id, value FROM "+a,[]);return b.ia().then(function(a){for(var b=a[0].rows.length,e=Array(b),f=0;f<b;++f)e[f]={id:a[0].rows.item(f).id,value:JSON.parse(a[0].rows.item(f).value)};return w(e)})};function gf(a,b,c){var d=ff(a),e="UPDATE "+b+" SET value=? WHERE id=?";return a.gc(b).then(function(a){a.forEach(function(a){a=c(a);cf(d,e,[JSON.stringify(a.value),a.id])});return d.ia()})}
P.prototype.rc=function(a,b,c){var d=Le(c);return gf(this,a,function(a){a.value[b]=d;return a})};P.prototype.addTableColumn=P.prototype.rc;P.prototype.vc=function(a,b){return gf(this,a,function(a){delete a.value[b];return a})};P.prototype.dropTableColumn=P.prototype.vc;P.prototype.Mc=function(a,b,c){return gf(this,a,function(a){a.value[c]=a.value[b];delete a.value[b];return a})};P.prototype.renameTableColumn=P.prototype.Mc;P.prototype.xb=function(a){var b={},c;for(c in a)b[c]=Le(a[c]);return Zb(b)};
P.prototype.createRow=P.prototype.xb;P.prototype.Ec=g("Pa");P.prototype.getVersion=P.prototype.Ec;function hf(a){cf(a,'SELECT tbl_name FROM sqlite_master WHERE type="table"',[],function(a){for(var c=Array(a.rows.length),d=0;d<c.length;++d)c[d]=a.rows.item(d).tbl_name;return c})}
P.prototype.dump=function(){var a=x(),b=ff(this);hf(b);var c={};b.ia().then(function(b){b=b[0].filter(function(a){return"__lf_ver"!=a&&"__WebKitDatabaseInfoTable__"!=a}).map(function(a){return this.gc(a).then(function(b){c[a]=b})},this);eb(b).then(function(){a.resolve(c)})}.bind(this));return a.da};P.prototype.dump=P.prototype.dump;function jf(a,b,c){this.i=a;this.g=b;this.Dg=c||4194304}m=jf.prototype;m.Ha=function(a){if(null==window.openDatabase)throw new E(353);var b=a||function(){return w()};return new v(function(a,d){try{var e=window.openDatabase(this.g.name(),"",this.g.name(),this.Dg);if(null!=e)this.j=e,kf(this,b).then(a,d);else throw new E(354);}catch(f){d(f)}},this)};
function kf(a,b){var c=x(),d=new df(a.j,1,new jd(a.i,C()));cf(d,"CREATE TABLE IF NOT EXISTS __lf_ver(id INTEGER PRIMARY KEY, v INTEGER)",[]);cf(d,"SELECT v FROM __lf_ver WHERE id = 0",[]);d.ia().then(function(a){var d=0;a[1].rows.length&&(d=a[1].rows.item(0).v);d<this.g.version()?this.fe(b,d).then(c.resolve.bind(c)):d>this.g.version()?c.reject(new E(108)):c.resolve()}.bind(a));return c.da}m.Gb=function(a,b,c){if(null!=this.j)return new df(this.j,a,c);throw new E(2);};m.close=aa();
m.Cc=function(){throw new E(512);};m.subscribe=function(){throw new E(355);};m.Hc=function(){throw new E(355);};m.fe=function(a,b){var c=x();mf(this).then(function(){a(new P(this.i,b,this.j)).then(function(){return this.oe()}.bind(this)).then(c.resolve.bind(c))}.bind(this),c.reject.bind(c));return c.da};
function mf(a){var b=a.g.ra(),c=new df(a.j,1,new jd(a.i,C())),d=new df(a.j,1,new jd(a.i,C()));cf(c,"INSERT OR REPLACE INTO __lf_ver VALUES (0, ?)",[a.g.version()]);hf(c);return c.ia().then(function(a){var c=a[1];c.filter(function(a){return-1!=a.indexOf("__d__")}).forEach(function(a){cf(d,"DROP TABLE "+a,[])});var h=[],k=[],n=[];b.map(function(a){-1==c.indexOf(a.getName())&&h.push(a.getName());a.Eb&&(a.Ba().forEach(function(a){a=ef(a.m());h.push(a);k.push(a)}),a=ef(We(a)),h.push(a),n.push(a))});h.forEach(function(a){cf(d,
"CREATE TABLE "+a+"(id INTEGER PRIMARY KEY, value TEXT)",[])});return d.ia()})}m.oe=function(){var a=0,b=x(),c=function(b){var c=new df(this.j,0);cf(c,"SELECT MAX(id) FROM "+b,[]);return c.ia().then(function(b){b=b[0].rows.item(0)[0];a=Math.max(b,a)})}.bind(this),d=this.g.ra().map(function(a){return c(a.getName())});eb(d).then(function(){b.resolve(a)},function(a){b.reject(a)});return b.da};function nf(a){this.o=z();this.bc=z();a.ra().forEach(function(a){this.bc.set(a.getName(),C())},this)}m=nf.prototype;m.set=function(a,b){this.o.set(b.id(),b);this.bc.get(a).add(b.id())};m.Yb=function(a,b){var c=this.bc.get(a);b.forEach(function(a){this.o.set(a.id(),a);c.add(a.id())},this)};m.get=function(a){return this.o.get(a)||null};function of(a,b){return b.map(function(a){return this.get(a)},a)}
m.$a=function(a,b,c){var d=[],e=Math.min(b,c),f=Math.max(b,c);a=this.bc.get(a);if(a.size<f-e)a.forEach(function(a){a>=e&&a<=f&&(a=this.o.get(a),d.push(a))},this);else for(b=e;b<=f;++b)a.has(b)&&(c=this.o.get(b),d.push(c));return d};m.remove=function(a,b){this.o.delete(b);this.bc.get(a).delete(b)};m.Ac=function(a){return null!=a?this.bc.get(a).size:this.o.size};m.clear=function(){this.o.clear();this.bc.clear()};function pf(a,b,c){var d=0,e=a.length;for(c=c||qf;d<e;){var f=d+e>>1;0>c(a[f],b)?d=f+1:e=f}return d==e&&a[d]==b?d:~d}function qf(a,b){return a-b}function rf(a,b,c){c=pf(a,b,c);return 0>c?(a.splice(-(c+1),0,b),!0):!1};function sf(a,b,c,d){a=b?a.reverse():a;if(null==c&&null==d)return a;c=Math.min(q(c)?c:a.length,a.length);if(0==c)return[];d=Math.min(d||0,a.length);return a.slice(d,d+c)};function tf(){this.na=0}tf.prototype.add=function(a,b){this.na+=b};tf.prototype.remove=function(a,b){this.na-=b};tf.prototype.clear=function(){this.na=0};function uf(a,b){a.clear();b.forEach(function(a){this.na+=a.na},a)};function vf(a,b,c,d){this.w=a;this.W=b;this.xf=c;this.sb=new tf;if(d){a=511;a*=a*a;if(d.length>=a)throw new E(6,a);d=wf(this,d);this.qa=d=xf(d)}else this.clear()}var yf=[];m=vf.prototype;m.getName=g("w");m.toString=function(){return this.qa.toString()};m.add=function(a,b){this.qa=this.qa.Bb(a,b)};m.set=function(a,b){this.qa=this.qa.Bb(a,b,!0)};m.remove=function(a,b){this.qa=this.qa.remove(a,b)};m.get=function(a){return this.qa.get(a)};
m.$c=function(a){if(null==a)return this.Oa().na;if(a instanceof od){if(qd(a))return this.Oa().na;if(ud(a))return this.get(a.c).length}return this.$a([a]).length};m.Oa=g("sb");m.Sd=function(a,b,c,d){c=Array(a);this.qa.fill({offset:b?this.sb.na-a-d:d,count:a,re:0},c);return b?c.reverse():c};
m.$a=function(a,b,c,d){var e=zf(this.qa).b[0];if(!q(e)||0==c)return yf;b=b||!1;c=null!=c?Math.min(c,this.sb.na):this.sb.na;d=d||0;var f=Math.min(Math.max(this.sb.na-d,0),c);if(0==f)return yf;if(!q(a)||1==a.length&&a[0]instanceof od&&qd(a[0]))return this.Sd(f,b,c,d);a=this.W.sf(a);var h=Array(b?this.sb.na:f),k={count:0,X:h.length,reverse:b,L:d},n=1<e.length;a.forEach(function(a){for(var b=this.W.ud(a),b=this.W.Vd(a)?e:b[0],b=Af(this.qa,b),c=0;null!=b&&k.count<k.X;){if(n){for(var d=b,f=a,$b=k,Bb=h,
Uc=d.B.Nb(),ne=-1,La=0;La<d.b.length;++La)if(Uc.Cb(d.b[La],f)){ne=La;break}if(-1!=ne)for(La=ne;La<d.b.length&&$b.count<$b.X;++La)Uc.Cb(d.b[La],f)&&Bf(d,$b,Bb,La)}else b.$a(a,k,h);0!=k.L||b.md(a)?c=0:c++;b=2==c?null:b.next()}},this);h.length>k.count&&h.splice(k.count,h.length-k.count);return b?sf(h,b,c,d):h};m.clear=function(){this.qa=Cf(this);this.sb.clear()};m.Ma=function(a){return this.qa.Ma(a)};m.min=function(){return this.Jb(this.W.min.bind(this.W))};m.max=function(){return this.Jb(this.W.max.bind(this.W))};
function Df(a,b,c){if(!a.W.Md(b.b[c]))if(1<b.b[c].length){if(null===b.b[c][0])return null}else return null;return[b.b[c],a.xf?[b.C[c]]:b.C[c]]}m.Jb=function(a){var b;a:{b=zf(this.qa);var c=0;do if(c>=b.b.length)b=b.ua,c=0;else{var d=Df(this,b,c);if(null!==d){b=d;break a}c++}while(null!==b);b=null}a:{c=Ef(this.qa);d=c.b.length-1;do if(0>d)c=c.ob,d=0;else{var e=Df(this,c,d);if(null!==e){c=e;break a}d--}while(null!==c);c=null}return null===b||null===c?null:1==a(b[0],c[0])?b:c};m.Ja=g("xf");m.Nb=g("W");
m.Zd=function(a,b){return null!=a?-1==this.W.compare(a,b):!1};m.Qa=function(a,b){return null!=a?0==this.W.compare(a,b):!1};m.Ga=function(){for(var a=[],b=zf(this.qa);b;)a.push(new Wb(b.oa,[b.b,b.C])),b=b.ua;return a};function Ff(a,b,c,d){a=new vf(b,a,c);d=Gf(d,a);a.qa=d;return a}function Hf(a,b){this.oa=a;this.B=b;this.kb=0;this.ua=this.ob=this.D=null;this.b=[];this.C=[];this.h=[]}function Cf(a){return new Hf(Xb++,a)}function Q(a){return 0==a.kb}m=Hf.prototype;m.next=g("ua");
function If(a){function b(a){return null!=a?a.oa.toString():"_"}var c=a.oa+"["+a.b.join("|")+"]",d=a.h.map(function(a){return a.oa}).join("|"),e=a.C.join("/"),f=b(a.ob)+"{",f=Q(a)?f+e:f+d,f=f+"}"+b(a.D);a.ua&&(a=If(a.ua),c=c+"  "+a[0],f=f+"  "+a[1]);return[c,f]}m.toString=function(){var a="",b=If(this),a=a+(b[0]+"\n"+b[1]+"\n");this.h.length&&(a+=this.h[0].toString());return a};function zf(a){return Q(a)?a:zf(a.h[0])}function Ef(a){return Q(a)?a:Ef(a.h[a.h.length-1])}
function Jf(a,b){b&&(b.ob=a);a&&(a.ua=b)}function wf(a,b){for(var c=b.length,d=0,e=Cf(a),f=e;0<c;){var h=768<=c?511:257<=c&&511>=c?c:257,k=b.slice(d,d+h);e.b=k.map(function(a){return a.key});e.C=k.map(function(a){return a.value});d+=h;c-=h;0<c&&(h=Cf(e.B),Jf(e,h),e=h)}return f}function Kf(a){var b=a[0],c=Cf(b.B);c.kb=b.kb+1;c.h=a;for(b=0;b<a.length;++b)a[b].D=c,0<b&&c.b.push(a[b].b[0]);return c}
function xf(a){var b=a,c=[];do c.push(b),b=b.ua;while(b);if(512>=c.length)b=Kf(c);else{var d=c.length,e=0,b=Cf(a.B);for(b.kb=a.kb+2;0<d;){a=768<=d?511:257<=d&&511>=d?d:257;var f=c.slice(e,e+a),h=Kf(f);h.D=b;b.h.length&&(b.b.push(f[0].b[0]),Jf(b.h[b.h.length-1],h));b.h.push(h);e+=a;d-=a}}return b}m.get=function(a){var b=Lf(this,a);if(Q(this)){var c=yf;this.B.Qa(this.b[b],a)&&(c=c.concat(this.C[b]));return c}b=this.B.Qa(this.b[b],a)?b+1:b;return this.h[b].get(a)};
m.Ma=function(a){var b=Lf(this,a);return this.B.Qa(this.b[b],a)?!0:Q(this)?!1:this.h[b].Ma(a)};m.remove=function(a,b){Mf(this,a,-1,b);if(null===this.D){var c=this;1==this.h.length&&(c=this.h[0],c.D=null);return c}return this};function Nf(a){return Q(a)?a.b[0]:Nf(a.h[0])}function Of(a){a.b=[];for(var b=1;b<a.h.length;++b)a.b.push(Nf(a.h[b]))}
function Mf(a,b,c,d){var e=Lf(a,b),f=Q(a);if(!f){var h=a.B.Qa(a.b[e],b)?e+1:e;if(Mf(a.h[h],b,h,d))Of(a);else return!1}else if(!a.B.Qa(a.b[e],b))return!1;if(a.b.length>e&&a.B.Qa(a.b[e],b)){if(q(d)&&!a.B.Ja()&&f&&(h=a.C[e],d=pf(h,d,void 0),0>d?d=!1:(h.splice(d,1),d=!0),d&&a.B.Oa().remove(b,1),a.C[e].length))return!1;a.b.splice(e,1);f&&(f=a.B.Ja()?1:a.C[e].length,a.C.splice(e,1),a.B.Oa().remove(b,f))}if(256>a.b.length&&null!==a.D){a:{b=null;if(a.ua&&256<a.ua.b.length)b=a.ua,e=d=0,f=a.b.length+1;else if(a.ob&&
256<a.ob.b.length)b=a.ob,d=a.ob.b.length-1,e=Q(a)?d:d+1,f=0;else{b=!1;break a}a.b.splice(f,0,b.b[d]);b.b.splice(d,1);d=Q(a)?a.C:a.h;h=null;Q(a)?h=b.C:(h=b.h,h[e].D=a);d.splice(f,0,h[e]);h.splice(e,1);Q(b)||(Of(b),Of(a));b=!0}b||Pf(a,c)}return!0}
function Pf(a,b){var c,d,e;a.ua&&511>a.ua.b.length?(c=a.ua,e=d=0):a.ob&&(c=a.ob,d=c.b.length,e=Q(c)?c.C.length:c.h.length);d=[d,0].concat(a.b);Array.prototype.splice.apply(c.b,d);d=null;Q(a)?d=a.C:(d=a.h,d.forEach(function(a){a.D=c}));d=[e,0].concat(d);Array.prototype.splice.apply(Q(c)?c.C:c.h,d);Jf(a.ob,a.ua);Q(c)||Of(c);-1!=b&&(a.D.b.splice(b,1),a.D.h.splice(b,1))}
m.Bb=function(a,b,c){var d=Lf(this,a);if(Q(this)){if(this.B.Qa(this.b[d],a)){if(c)this.B.Oa().remove(a,this.B.Ja()?1:this.C[d].length),this.C[d]=this.B.Ja()?b:[b];else{if(this.B.Ja())throw new E(201);if(!rf(this.C[d],b))throw new E(109);}this.B.Oa().add(a,1);return this}this.b.splice(d,0,a);this.C.splice(d,0,this.B.Ja()?b:[b]);this.B.Oa().add(a,1);512==this.b.length?(d=Cf(this.B),a=Cf(this.B),a.kb=1,a.b=[this.b[256]],a.h=[this,d],a.D=this.D,this.D=a,d.b=this.b.splice(256),d.C=this.C.splice(256),d.D=
a,Jf(d,this.ua),Jf(this,d),d=a):d=this;return d}d=this.B.Qa(this.b[d],a)?d+1:d;a=this.h[d].Bb(a,b,c);Q(a)||1!=a.b.length||(this.b.splice(d,0,a.b[0]),a.h[1].D=this,a.h[0].D=this,this.h.splice(d,1,a.h[1]),this.h.splice(d,0,a.h[0]));return 512==this.b.length?Qf(this):this};function Qf(a){var b=Cf(a.B),c=Cf(a.B);b.D=a.D;b.kb=a.kb+1;b.b=[a.b[256]];b.h=[a,c];a.b.splice(256,1);c.D=b;c.kb=a.kb;c.b=a.b.splice(256);c.h=a.h.splice(257);c.h.forEach(function(a){a.D=c});a.D=b;Jf(c,a.ua);Jf(a,c);return b}
function Lf(a,b){for(var c=0,d=a.b.length;c<d;){var e=c+d>>1;a.B.Zd(a.b[e],b)?c=e+1:d=e}return c}function Af(a,b){if(!Q(a)){var c=Lf(a,b);a.B.Qa(a.b[c],b)&&c++;return Af(a.h[c],b)}return a}
m.$a=function(a,b,c){function d(a){return a[0]?a[1]?0:1:-1}var e=this.B.Nb(),f=0,h=this.b.length-1,k=this.b,n=d(e.wb(k[f],a)),B=d(e.wb(k[h],a));if(1!=n&&(-1!=n||-1!=B)){var O=function(a,b){var c=a+b>>1;return c==a?c+1:c},ca=function(b,c,f){if(b>=c)return 0==f?c:-1;var h=d(e.wb(k[b],a));if(0==h)return b;if(1==h)return-1;h=O(b,c);if(h==c)return 0==f?c:-1;var n=d(e.wb(k[h],a));return 0==n?ca(b,h,n):-1==n?ca(h+1,c,f):ca(b+1,h,n)},Ab=function(b,c){if(b>=c)return b;var f=d(e.wb(k[c],a));if(0==f)return c;
if(-1==f)return b;f=O(b,c);if(f==c)return b;var h=d(e.wb(k[f],a));return 0==h?Ab(f,c):1==h?Ab(b,f-1):-1};0!=n&&(f=ca(f+1,h,B));-1!=f&&(h=Ab(f,h),-1!=h&&h>=f&&Rf(this,b,c,f,h+1))}};function Bf(a,b,c,d){if(a.B.Ja())!b.reverse&&b.L?b.L--:c[b.count++]=a.C[d];else for(var e=0;e<a.C[d].length&&b.count<c.length;++e)!b.reverse&&b.L?b.L--:c[b.count++]=a.C[d][e]}function Rf(a,b,c,d,e){for(;d<e&&(b.reverse||!(b.count>=b.X));++d)Bf(a,b,c,d)}
m.fill=function(a,b){if(Q(this))for(var c=0;c<this.C.length&&0<a.count;++c)if(0<a.offset){if(a.offset-=this.B.Ja()?1:this.C[c].length,0>a.offset)for(var d=this.C[c].length+a.offset;d<this.C[c].length&&0<a.count;++d)b[a.re++]=this.C[c][d],a.count--}else if(this.B.Ja())b[a.re++]=this.C[c],a.count--;else for(d=0;d<this.C[c].length&&0<a.count;++d)b[a.re++]=this.C[c][d],a.count--;else for(c=0;c<this.h.length&&0<a.count;++c)this.h[c].fill(a,b)};
function Gf(a,b){for(var c=b.Oa(),d=a.map(function(a){var d=new Hf(a.id(),b);d.b=a.s[0];d.C=a.s[1];d.b.forEach(function(a,e){c.add(a,b.Ja()?1:d.C[e].length)});return d}),e=0;e<d.length-1;++e)Jf(d[e],d[e+1]);return 1<d.length?xf(d[0]):d[0]}m.md=function(a){return this.B.Nb().md(this.b[0],a)};function Sf(a){this.Zc=0==a?Tf:Uf;this.ae=0==a?function(a){return null!=a?a.reverse():null}:function(a){return a||null};this.ge=0==a?Wf:Xf}function Uf(a,b){return a>b?1:a<b?-1:0}function Tf(a,b){return Uf(b,a)}function Xf(a,b){return vd(a,b)}function Wf(a,b){return vd(b,a)}m=Sf.prototype;m.wb=function(a,b){var c=this.ae(b),d=[c.c==F,c.A==F];if(!d[0]){var e=this.Zc(a,c.c);d[0]=c.ea?1==e:-1!=e}d[1]||(e=this.Zc(a,c.A),d[1]=c.la?-1==e:1!=e);return d};m.compare=function(a,b){return this.Zc(a,b)};
m.min=function(a,b){return a<b?1:a==b?0:-1};m.max=function(a,b){return a>b?1:a==b?0:-1};m.Cb=function(a,b){var c=this.wb(a,b);return c[0]&&c[1]};m.md=function(a,b){return this.Cb(a,b)};m.sf=function(a){return a.filter(function(a){return null!==a}).sort(function(a,c){return this.ge(a,c)}.bind(this))};m.Vd=function(a){return this.ae(a).c==F};m.ud=function(a){a=this.ae(a);return[a.c,a.A]};m.Md=function(a){return null!==a};m.toString=function(){return this.compare==Tf?"SimpleComparator_DESC":"SimpleComparator_ASC"};
function Yf(a){Sf.call(this,a);this.Zc=0==a?Zf:$f}t(Yf,Sf);function $f(a,b){return null===a?null===b?0:-1:null===b?1:Uf(a,b)}function Zf(a,b){return $f(b,a)}Yf.prototype.Cb=function(a,b){return null===a?qd(b):Yf.eb.Cb.call(this,a,b)};Yf.prototype.Jb=function(a,b){return null===a?null===b?0:-1:null===b?1:null};Yf.prototype.min=function(a,b){var c=this.Jb(a,b);null===c&&(c=Yf.eb.min.call(this,a,b));return c};Yf.prototype.max=function(a,b){var c=this.Jb(a,b);null===c&&(c=Yf.eb.max.call(this,a,b));return c};function ag(a){this.sa=a.map(function(a){return new Sf(a)})}function bg(a,b,c,d){for(var e=0,f=0;f<a.sa.length&&0==e;++f)e=d(a.sa[f],b[f],c[f]);return e}m=ag.prototype;m.compare=function(a,b){return bg(this,a,b,function(a,b,e){return b==F||e==F?0:a.compare(b,e)})};m.min=function(a,b){return bg(this,a,b,function(a,b,e){return a.min(b,e)})};m.max=function(a,b){return bg(this,a,b,function(a,b,e){return a.max(b,e)})};
m.wb=function(a,b){for(var c=[!0,!0],d=0;d<this.sa.length&&(c[0]||c[1]);++d){var e=this.sa[d].wb(a[d],b[d]);c[0]=c[0]&&e[0];c[1]=c[1]&&e[1]}return c};m.Cb=function(a,b){for(var c=!0,d=0;d<this.sa.length&&c;++d)c=this.sa[d].Cb(a[d],b[d]);return c};m.md=function(a,b){return this.sa[0].Cb(a[0],b[0])};
m.sf=function(a){var b=a.filter(function(a){return a.every(ga)});a=Array(this.sa.length);for(var c=0;c<a.length;c++)a[c]=b.map(function(a){return a[c]});a.forEach(function(a,b){a.sort(function(a,c){return this.sa[b].ge(a,c)}.bind(this))},this);b=Array(b.length);for(c=0;c<b.length;c++)b[c]=a.map(function(a){return a[c]});return b.sort(function(a,b){for(var c=0,h=0;h<this.sa.length&&0==c;++h)c=this.sa[h].ge(a[h],b[h]);return c}.bind(this))};m.Vd=function(a){return this.sa[0].Vd(a[0])};
m.ud=function(a){var b=a.map(function(a,b){return this.sa[b].ud(a)[0]},this);a=a.map(function(a,b){return this.sa[b].ud(a)[1]},this);return[b,a]};m.Md=function(a){return a.every(function(a,c){return this.sa[c].Md(a)},this)};function cg(a){ag.call(this,a);this.sa=a.map(function(a){return new Yf(a)})}t(cg,ag);function dg(a){if(1==a.f.length)return new Sf(a.f[0].nb);var b=a.f.map(function(a){return a.nb});return a.f.some(function(a){return a.ba.kc()})?new cg(b):new ag(b)};function eg(a){this.ga=a;this.mb=C();this.Oc=new tf;this.sb=new tf}m=eg.prototype;m.getName=function(){return this.ga.getName()};m.add=function(a,b){null===a?(this.mb.add(b),this.Oc.add(a,1)):this.ga.add(a,b)};m.set=function(a,b){null===a?(this.mb.clear(),this.Oc.clear(),this.add(a,b)):this.ga.set(a,b)};m.remove=function(a,b){null===a?b?(this.mb.delete(b),this.Oc.remove(a,1)):(this.mb.clear(),this.Oc.clear()):this.ga.remove(a,b)};m.get=function(a){return null===a?D(this.mb):this.ga.get(a)};m.$c=function(a){return this.ga.$c(a)};
m.Oa=function(){uf(this.sb,[this.ga.Oa(),this.Oc]);return this.sb};m.$a=function(a,b,c,d){b=this.ga.$a(a,b,c,d);return null!=a?b:b.concat(D(this.mb))};m.clear=function(){this.mb.clear();this.ga.clear()};m.Ma=function(a){return null===a?0!=this.mb.size:this.ga.Ma(a)};m.min=function(){return this.ga.min()};m.max=function(){return this.ga.max()};m.Ga=function(){return[new Wb(-2,D(this.mb))].concat(this.ga.Ga())};m.Nb=function(){return this.ga.Nb()};
function fg(a,b){for(var c=-1,d=0;d<b.length;++d)if(-2==b[d].id()){c=d;break}if(-1==c)throw new E(102);var d=b[c].s,e=b.slice(0);e.splice(c,1);var c=a(e),f=new eg(c);d.forEach(function(a){f.mb.add(a)});return f}m.Ja=function(){return this.ga.Ja()};function gg(a){this.w=a;this.rb=C();this.W=new Sf(1)}m=gg.prototype;m.getName=g("w");m.add=function(a){if("number"!=typeof a)throw new E(103);this.rb.add(a)};m.set=function(a,b){this.add(a,b)};m.remove=function(a){this.rb.delete(a)};m.get=function(a){return this.Ma(a)?[a]:[]};m.min=function(){return this.Jb(this.W.min.bind(this.W))};m.max=function(){return this.Jb(this.W.max.bind(this.W))};
m.Jb=function(a){if(0==this.rb.size)return null;var b=D(this.rb).reduce(function(b,d){return null===b||1==a(d,b)?d:b},null);return[b,[b]]};m.$c=function(){return this.rb.size};m.$a=function(a,b,c,d){var e=a||[td()];a=D(this.rb).filter(function(a){return e.some(function(b){return this.W.Cb(a,b)},this)},this);return sf(a,b,c,d)};m.clear=function(){this.rb.clear()};m.Ma=function(a){return this.rb.has(a)};m.Ga=function(){return[new Wb(0,D(this.rb))]};m.Nb=g("W");
function hg(a,b){var c=new gg(a);b[0].s.forEach(function(a){c.add(a,a)});return c}m.Ja=l(!0);m.Oa=function(){var a=new tf;a.na=this.rb.size;return a};function ig(a){this.La=a.l(kc);this.F=a.l(mc);this.V=a.l(lc)}ig.prototype.Ha=function(a){var b=a.ra(),c=function(){if(0==b.length)return w();var a=b.shift();return(a.Eb()?jg(this,a):kg(this,a)).then(c)}.bind(this);return c()};function kg(a,b){var c=a.La.Gb(0,[b]),d=c.I(b.getName(),b.hb.bind(b),0).get([]).then(function(a){this.V.Yb(b.getName(),a);lg(this,b,a)}.bind(a));c.ia();return d}
function lg(a,b,c){var d=a.F.nc.get(b.getName())||[];c.forEach(function(a){d.forEach(function(b){var c=a.lb(b.getName());b.add(c,a.id())})})}function jg(a,b){var c=a.La.Gb(0,[b]),d=c.I(b.getName(),b.hb,0).get([]).then(function(a){this.V.Yb(b.getName(),a)}.bind(a)),e=b.Ba().map(function(a){return mg(this,a,c)},a).concat(ng(a,b,c));c.ia();return eb(e.concat(d))}
function mg(a,b,c){c=c.I(b.m(),Yb,1);var d=dg(b);return c.get([]).then(function(a){if(0<a.length){if(og(b)){var c=Ff.bind(void 0,d,b.m(),b.Fc);a=fg(c,a)}else a=Ff(d,b.m(),b.Fc,a);this.F.set(b.Pc,a)}}.bind(a))}function ng(a,b,c){return c.I(We(b),Yb,1).get([]).then(function(a){0<a.length&&(a=hg(We(b),a),this.F.set(b.getName(),a))}.bind(a))};function pg(){this.Y=z();this.nc=z()}pg.prototype.Ha=function(a){a.ra().forEach(function(a){var c=[];this.nc.set(a.getName(),c);var d=We(a);if(null===this.get(d)){var e=new gg(d);c.push(e);this.Y.set(d,e)}a.Ba().forEach(function(a){var b;b=dg(a);b=new vf(a.m(),b,a.Fc);b=og(a)&&1==a.f.length?new eg(b):b;c.push(b);this.Y.set(a.m(),b)},this)},this);return w()};pg.prototype.get=function(a){return this.Y.get(a)||null};
pg.prototype.set=function(a,b){var c=this.nc.get(a)||null;null===c&&(c=[],this.nc.set(a,c));for(var d=null,e=0;e<c.length;e++)if(c[e].getName()==b.getName()){d=e;break}null!==d&&0<c.length?c.splice(d,1,b):c.push(b);this.Y.set(b.getName(),b)};function qg(a){this.mc=[];q(a)&&this.add(a)}qg.prototype.toString=function(){return this.mc.map(function(a){return a.toString()}).join(",")};qg.prototype.Ma=function(a){return this.mc.some(function(b){return b.contains(a)})};qg.prototype.ta=g("mc");
qg.prototype.add=function(a){if(0!=a.length)if(a=this.mc.concat(a),1==a.length)this.mc=a;else{a.sort(vd);for(var b=[],c=a[0],d=1;d<a.length;++d)if(rd(c,a[d])){var e=a[d],f=td();if(c.c!=F&&e.c!=F){var h=sd(c.c,e.c,!0);1!=h?(f.c=c.c,f.ea=0!=h?c.ea:c.ea&&e.ea):(f.c=e.c,f.ea=e.ea)}c.A!=F&&e.A!=F&&(h=sd(c.A,e.A,!1),-1!=h?(f.A=c.A,f.la=0!=h?c.la:c.la&&e.la):(f.A=e.A,f.la=e.la));c=f}else b.push(c),c=a[d];b.push(c);this.mc=b}};
function rg(a,b){var c=[];a.ta().map(function(a){return b.ta().map(function(b){var c;if(rd(a,b)){c=td();var h=sd(a.c,b.c,!0),h=0==h?a.ea?a:b:-1!=h?a:b;c.c=h.c;c.ea=h.ea;a.A==F||b.A==F?b=a.A==F?b:a:(h=sd(a.A,b.A,!1),b=0==h?a.la?a:b:-1==h?a:b);c.A=b.A;c.la=b.la}else c=null;return c})}).forEach(function(a){c=c.concat(a)});return new qg(c.filter(function(a){return null!==a}))};function sg(a,b){var c=[],d=null,e=null;Xd(a,function(a){var h=b(a);null==a.getParent()?e=h:Ud(d,h);var k=a.getParent();null!==k&&L(k).length==L(d).length&&(k=c.indexOf(d),-1!=k&&c.splice(k,1));1<L(a).length&&c.push(h);d=null===a.h?c[c.length-1]:h});return e}function tg(a){return ug(a,function(a){return null===a.h})}
function vg(a){var b=a.getParent(),c=0;null!==b&&(c=L(b).indexOf(a),b.removeChild(a));var d=L(a).slice();d.forEach(function(d,f){a.removeChild(d);null===b||Td(b,d,c+f)});return{parent:b,children:d}}function wg(a,b){L(a).slice().forEach(function(c){a.removeChild(c);Ud(b,c)});Ud(a,b)}function xg(a){var b=Sd(a,0);vg(a);wg(b,a);return b}
function yg(a,b,c){var d=Sd(a,0),e=L(d).slice();if(!e.some(function(a){return b(a)}))return a;vg(a);e.forEach(function(e,h){if(b(e)){var k=c(a);Vd(d,h);Ud(k,e);Td(d,k,h)}});return d}function zg(a,b,c,d){var e=a.getParent();null!==e&&(a=L(e).indexOf(a),Vd(e,a),Td(e,c,a));L(b).slice().forEach(function(a){b.removeChild(a);Ud(d,a)});return c}function ug(a,b,c){function d(a){b(a)&&e.push(a);null!=c&&c(a)||L(a).forEach(d)}var e=[];d(a);return e}
function Ag(a,b){var c=b||function(a){return a.toString()+"\n"},d="";Xd(a,function(a){for(var b=0;b<Rd(a);b++)d+="-";d+=c(a)});return d};function Bg(a){Yd.call(this);this.Ub=a;this.ab=!1}t(Bg,Yd);m=Bg.prototype;m.Ob=function(){return sg(this,function(a){if(a instanceof Bg){var b=new Bg(a.Ub);b.ab=a.ab;a=a.Z();b.oa=a;return b}return a.Ob()})};m.ib=function(a){var b=a||[];Xd(this,function(a){a!=this&&a.ib(b)}.bind(this));a=C(b);return D(a)};m.wd=function(a){this.ab!=a&&(this.ab=a,this.Ub="and"==this.Ub?"or":"and",L(this).forEach(function(b){return b.wd(a)}))};
m.eval=function(a){var b=L(this).map(function(b){return b.eval(a)});return Cg(this,b)};function Cg(a,b){return"and"==a.Ub?Bd(b):Cd(b)}m.toString=function(){return"combined_pred_"+this.Ub.toString()};function Dg(a,b,c){Yd.call(this);this.ha=a;this.ka=b;this.G=c;this.be=null;a=Jd.Bc();this.wc=Pd(a,this.ha.H(),this.G);this.fg=a.We.get(this.ha.H())||null}t(Dg,Yd);m=Dg.prototype;m.Ob=function(){var a=new Dg(this.ha,this.ka,this.G),b=this.Z();a.oa=b;return a};m.ib=function(a){return null!=a?(a.push(this.ha),a.push(this.ka),a):[this.ha,this.ka]};
m.reverse=function(){var a=this.G;switch(this.G){case "gt":a="lt";break;case "lt":a="gt";break;case "gte":a="lte";break;case "lte":a="gte"}return new Dg(this.ka,this.ha,a)};m.eval=function(a){var b=a.entries.filter(function(a){var b=I(a,this.ha);a=I(a,this.ka);return this.wc(b,a)},this);return new G(b,H(a))};m.toString=function(){return"join_pred("+this.ha.m()+" "+this.G+" "+this.ka.m()+")"};
function Eg(a,b,c){var d=null,e=null;-1!=H(b).indexOf(J(a.ha.I()))?(d=b,e=c):(d=c,e=b);if(d.entries.length>e.entries.length){a:{b=a.ha;a.ha=a.ka;a.ka=b;b=a.G;switch(a.G){case "gt":b="lt";break;case "lt":b="gt";break;case "gte":b="lte";break;case "lte":b="gte";break;default:break a}a.G=b;a.wc=Pd(Jd.Bc(),a.ha.H(),a.G)}return[e,d]}return[d,e]}function Fg(a){var b={};a.ib().forEach(function(a){b[a.getName()]=null});return b}
function Gg(a,b,c){null===a.be&&(a.be=Fg(a.ka.I()));var d=new Ed(new Wb(-1,a.be),!1);return Hd(b,c,d,[J(a.ka.I())])}
function Hg(a,b,c,d){var e=[b,c];d||(e=Eg(a,b,c));b=e[0];c=e[1];var e=b,f=c,h=a.ha,k=a.ka;d&&(e=c,f=b,h=a.ka,k=a.ha);var n=new Rc,B=[];e.entries.forEach(function(a){var b=String(I(a,h));n.set(b,a)});var O=H(e),ca=H(f);f.entries.forEach(function(a){var b=I(a,k),c=String(b);null!==b&&n.has(c)?n.get(c).forEach(function(b){b=Hd(a,ca,b,O);B.push(b)}):d&&B.push(Gg(this,a,ca))}.bind(a));a=H(b).concat(H(c));return new G(B,a)}
function Ig(a,b,c,d,e){function f(a,b){var c=new Ed(b,1<O.length),c=Hd(a,ca,c,O);B.push(c)}var h=d.Yf.I(),k=b,n=c;-1!=H(b).indexOf(J(h))&&(k=c,n=b);var B=[],O=H(n),ca=H(k);k.entries.forEach(function(a){var b=this.fg(I(a,d.ng)),b=d.index.get(b);0!=b.length&&(d.index.Ja()?f(a,e.get(b[0])):of(e,b).forEach(f.bind(null,a)))},a);a=H(k).concat(H(n));return new G(B,a)};function Jg(a,b,c){return null===b?new $d(a,b,c):q(b.m)?new Dg(a,b,c):new $d(a,b,c)};var Kg={};r("lf.schema.DataStoreType",Kg);Kg.INDEXED_DB=0;Kg.MEMORY=1;Kg.LOCAL_STORAGE=2;Kg.FIREBASE=3;Kg.WEB_SQL=4;Kg.OBSERVABLE_STORE=5;function Lg(a,b,c,d){this.Pc=a;this.name=b;this.Fc=c;this.f=d}Lg.prototype.m=function(){return this.Pc+"."+this.name};function og(a){return a.f.some(function(a){return a.ba.kc()})}function R(a,b,c,d){this.w=a;this.pa=c;this.K=b;this.rd=d;this.fb=null}r("lf.schema.Table",R);R.prototype.getName=g("w");R.prototype.getName=R.prototype.getName;R.prototype.Za=g("fb");
function J(a){return a.fb||a.w}R.prototype.sc=function(a){var b=new this.constructor(this.w);b.fb=a;b.zg=this.zg;return b};R.prototype.as=R.prototype.sc;R.prototype.createRow=R.prototype.xb;R.prototype.deserializeRow=R.prototype.hb;R.prototype.Ba=g("pa");R.prototype.getIndices=R.prototype.Ba;R.prototype.ib=g("K");R.prototype.getColumns=R.prototype.ib;R.prototype.getConstraint=R.prototype.Ib;R.prototype.Eb=g("rd");R.prototype.persistentIndex=R.prototype.Eb;function We(a){return a.w+".#"};function S(a,b){this.child=a;this.Mb=b;this.fb=null}m=S.prototype;m.getName=function(){return this.Mb+"("+this.child.getName()+")"};m.m=function(){return this.Mb+"("+this.child.m()+")"};m.I=function(){return this.child.I()};m.toString=function(){return this.m()};m.H=function(){return this.child.H()};m.Za=g("fb");m.Ba=function(){return[]};m.Aa=l(null);m.kc=l(!1);m.sc=function(a){this.fb=a;return this};S.prototype.as=S.prototype.sc;
function Mg(a){for(var b=[a];a instanceof S;)b.push(a.child),a=a.child;return b}function Ng(a){this.fb=a||null;this.U=new R("#UnknownTable",[],[],!1)}m=Ng.prototype;m.getName=l("*");m.m=function(){return this.getName()};m.toString=function(){return this.m()};m.I=g("U");m.H=l(4);m.Za=g("fb");m.Ba=function(){return[]};m.Aa=l(null);m.kc=l(!1);r("lf.fn.avg",function(a){return new S(a,"AVG")});function Og(a){return new S(a||new Ng,"COUNT")}r("lf.fn.count",Og);function Pg(a){return new S(a,"DISTINCT")}r("lf.fn.distinct",Pg);r("lf.fn.max",function(a){return new S(a,"MAX")});r("lf.fn.min",function(a){return new S(a,"MIN")});r("lf.fn.stddev",function(a){return new S(a,"STDDEV")});r("lf.fn.sum",function(a){return new S(a,"SUM")});r("lf.fn.geomean",function(a){return new S(a,"GEOMEAN")});function T(a,b){K.call(this);this.Qf=b}t(T,K);T.prototype.exec=function(a,b){switch(this.Qf){case 1:return Qg(this,a,b);case 0:return Rg(this,a,b);default:return Sg(this,a,b)}};T.prototype.toString=l("dummy_node");T.prototype.Qc=function(){return this.toString()};function Sg(a,b,c){return new v(function(a){a(this.fa([],b,c))}.bind(a))}function Qg(a,b,c){return Sd(a,0).exec(b,c).then(function(a){return this.fa(a,b,c)}.bind(a))}
function Rg(a,b,c){var d=L(a).map(function(a){return a.exec(b,c)});return eb(d).then(function(a){var d=[];a.forEach(function(a){for(var b=0;b<a.length;++b)d.push(a[b])});return this.fa(d,b,c)}.bind(a))};function Tg(a){T.call(this,0,1);this.Be=a}t(Tg,T);Tg.prototype.toString=function(){return"aggregation("+this.Be.map(function(a){return a.m()}).toString()+")"};Tg.prototype.fa=function(a){a.forEach(function(a){Ug(new Vg(a,this.Be))},this);return a};function Vg(a,b){this.Ka=a;this.K=b}
function Ug(a){a.K.forEach(function(a){a=Mg(a).reverse();for(var c=1;c<a.length;c++){var d=a[c],e=Mg(d).slice(-1)[0],f=d.child instanceof S?yd(this.Ka,d.child):this.Ka;if(null!==f.Ya&&f.Ya.has(d.m()))break;f=Wg(d.Mb,f,e);e=this.Ka;null===e.Ya&&(e.Ya=z());e.Ya.set(d.m(),f)}},a)}
function Wg(a,b,c){var d=null;switch(a){case "MIN":d=Xg(b,c,function(a,b){return b<a?b:a});break;case "MAX":d=Xg(b,c,function(a,b){return b>a?b:a});break;case "DISTINCT":d=Yg(b,c);break;case "COUNT":d=Zg(b,c);break;case "SUM":d=$g(b,c);break;case "AVG":a=Zg(b,c);0<a&&(d=$g(b,c)/a);break;case "GEOMEAN":d=ah(b,c);break;default:d=bh(b,c)}return d}function Xg(a,b,c){return a.entries.reduce(function(a,e){var f=I(e,b);return null===f?a:null===a?f:c(a,f)},null)}
function Zg(a,b){return b instanceof Ng?a.entries.length:a.entries.reduce(function(a,d){return a+(fa(I(d,b))?0:1)},0)}function $g(a,b){return Xg(a,b,function(a,b){return b+a})}function bh(a,b){var c=[];a.entries.forEach(function(a){a=I(a,b);null===a||c.push(a)});return 0==c.length?null:tb.apply(null,c)}function ah(a,b){var c=0,d=a.entries.reduce(function(a,d){var h=I(d,b);if(0==h||null===h)return a;c++;return a+Math.log(h)},0);return 0==c?null:Math.pow(Math.E,d/c)}
function Yg(a,b){var c=z();a.entries.forEach(function(a){var e=I(a,b);c.set(e,a)});return new G(A(c),H(a))};function ch(a,b){this.Ea=a;this.aa=b}ch.prototype.jb=g("Ea");ch.prototype.ca=g("aa");function dh(){K.call(this)}t(dh,K);function eh(a,b){K.call(this);this.table=a;this.values=b}t(eh,dh);function fh(a,b){eh.call(this,a,b)}t(fh,eh);function gh(a){K.call(this);this.table=a}t(gh,dh);gh.prototype.toString=function(){return"delete("+this.table.getName()+")"};function hh(a,b){K.call(this);this.table=a;this.we=b}t(hh,dh);
hh.prototype.toString=function(){var a=[];this.we&&(a=this.we.map(function(a){return a.N.getName()},this));return"update("+this.table.getName()+", ["+a.join(",")+"])"};function ih(a){K.call(this);this.J=a}t(ih,dh);ih.prototype.toString=function(){return"select("+this.J.toString()+")"};function jh(a){K.call(this);this.table=a}t(jh,dh);jh.prototype.toString=function(){var a="table_access("+this.table.getName();null===this.table.Za()||(a+=" as "+this.table.Za());return a+")"};
function kh(){K.call(this)}t(kh,dh);kh.prototype.toString=l("cross_product");function lh(a,b){K.call(this);this.f=a;this.Qb=b}t(lh,dh);lh.prototype.toString=function(){var a="project("+this.f.toString();if(null!==this.Qb)var b=this.Qb.map(function(a){return a.m()}).join(", "),a=a+(", groupBy("+b+")");return a+")"};function mh(a){K.call(this);this.O=a}t(mh,dh);mh.prototype.toString=function(){return"order_by("+je(this.O)+")"};function nh(a){K.call(this);this.f=a}t(nh,dh);
nh.prototype.toString=function(){return"aggregation("+this.f.toString()+")"};function oh(a){K.call(this);this.f=a}t(oh,dh);oh.prototype.toString=function(){return"group_by("+this.f.toString()+")"};function ph(a){K.call(this);this.X=a}t(ph,dh);ph.prototype.toString=function(){return"limit("+this.X+")"};function qh(a){K.call(this);this.L=a}t(qh,dh);qh.prototype.toString=function(){return"skip("+this.L+")"};function rh(a,b){K.call(this);this.J=a;this.Sb=b}t(rh,dh);
rh.prototype.toString=function(){return"join(type: "+(this.Sb?"outer":"inner")+", "+this.J.toString()+")"};function sh(){};function th(){}t(th,sh);th.prototype.qb=function(a){this.$=a;this.Wa(this.$);return this.$};th.prototype.Wa=function(a){if(a instanceof ih){var b=uh(this,a.J),b=vh(this,b);zg(a,a,b[0],b[1]);a==this.$&&(this.$=b[0]);a=b[0]}L(a).forEach(function(a){this.Wa(a)},this)};function uh(a,b){if(0==L(b).length||"and"!=b.Ub)return[b];var c=L(b).slice().map(function(a){b.removeChild(a);return uh(this,a)},a);return Ea(c)}
function vh(a,b){var c=null,d=null;b.map(function(a,b){var h=new ih(a);0==b?c=h:Ud(d,h);d=h},a);return[c,d]};function wh(){}t(wh,sh);wh.prototype.qb=function(a,b){if(3>b.c.length)return a;this.$=a;this.Wa(this.$);return this.$};wh.prototype.Wa=function(a){if(a instanceof kh)for(;2<L(a).length;){for(var b=new kh,c=0;2>c;c++){var d=Vd(a,0);Ud(b,d)}Td(a,b,0)}L(a).forEach(function(a){this.Wa(a)},this)};function xh(){T.call(this,0,0)}t(xh,T);xh.prototype.toString=l("cross_product");xh.prototype.fa=function(a){var b=a[0],c=a[1];a=[];for(var d=H(b),e=H(c),f=0;f<b.entries.length;f++)for(var h=0;h<c.entries.length;h++){var k=Hd(b.entries[f],d,c.entries[h],e);a.push(k)}b=H(b).concat(H(c));return[new G(a,b)]};function yh(a,b){me.call(this,a,b);this.Fa=a.l(oc);this.Kb=a.l(pc)}t(yh,me);yh.prototype.getPriority=l(2);yh.prototype.ee=function(a){0==this.H()?zh(this,a):this.Nc()};function zh(a,b){a.td.forEach(function(a,d){a instanceof ie&&qe(this.Kb,a,b[d])},a)}yh.prototype.Nc=function(){var a=se(this.Kb,this.ca());0!=a.length&&(a=new pe(this.global,a),te(this.Fa,a))};function Ah(a){de.call(this,a)}t(Ah,de);Ah.prototype.ca=function(){var a=C();a.add(this.c);Bh(this,this.c.getName(),a);return a};function Bh(a,b,c){var d=Ch(a.ba.info(),b,1);Ch(a.ba.info(),b).forEach(c.add.bind(c));d.forEach(function(a){Bh(this,a.getName(),c)},a)}Ah.prototype.clone=function(){var a=new Ah(this.ba);ge(a,this);a.c=this.c;return a};Ah.prototype.bind=function(a){Ah.eb.bind.call(this,a);he(this,a);return this};function Dh(a){de.call(this,a)}t(Dh,de);Dh.prototype.ca=function(){var a=C();a.add(this.Ia);var b=this.ba.info();Eh(this.Ia.getName(),b.df).forEach(a.add.bind(a));this.cc&&Ch(b,this.Ia.getName()).forEach(a.add.bind(a));return a};Dh.prototype.clone=function(){var a=new Dh(this.ba);ge(a,this);a.Ia=this.Ia;this.values&&(a.values=this.values instanceof Id?this.values:this.values.slice());a.cc=this.cc;a.dc=this.dc;return a};
Dh.prototype.bind=function(a){Dh.eb.bind.call(this,a);this.dc&&(this.values=this.dc instanceof Id?a[this.dc.Aa()]:this.dc.map(function(b){return b instanceof Id?a[b.Aa()]:b}));return this};function Fh(a){de.call(this,a)}t(Fh,de);Fh.prototype.ca=function(){var a=C();a.add(this.table);var b=this.set.map(function(a){return a.N.m()}),c=this.ba.info();Gh(c,b).forEach(a.add.bind(a));Hh(c,b).forEach(a.add.bind(a));return a};Fh.prototype.clone=function(){var a=new Fh(this.ba);ge(a,this);a.table=this.table;a.set=this.set?this.set.slice():this.set;return a};Fh.prototype.bind=function(a){Fh.eb.bind.call(this,a);this.set.forEach(function(b){-1!=b.Vc&&(b.value=a[b.Vc])});he(this,a);return this};function Ih(a,b){if(null==b)return"NULL";switch(a){case 1:return b?1:0;case 3:case 4:return b;case 0:return"'"+ac(b)+"'";default:return"'"+b.toString()+"'"}}function Jh(a,b){var c=a.cc?"INSERT OR REPLACE":"INSERT",d=a.Ia.ib(),c=c+(" INTO "+a.Ia.getName()+"("),c=c+d.map(function(a){return a.getName()}).join(", "),c=c+") VALUES (";return a.values.map(function(a){var f=d.map(function(c){var d=a.s[c.getName()];return b?null!=d?"#":"NULL":Ih(c.H(),d)});return c+f.join(", ")+");"}).join("\n")}
function Kh(a){switch(a){case "between":return"BETWEEN";case "eq":return"=";case "gte":return">=";case "gt":return">";case "in":return"IN";case "lte":return"<=";case "lt":return"<";case "match":return"LIKE";case "neq":return"<>";default:return"UNKNOWN"}}function Lh(a,b,c,d){return a instanceof Id?"?"+a.Aa().toString():d?null!=a?"#":"NULL":"match"==b?"'"+a.toString()+"'":"in"==b?"("+a.map(function(a){return Ih(c,a)}).join(", ")+")":"between"==b?Ih(c,a[0])+" AND "+Ih(c,a[1]):Ih(c,a).toString()}
function Mh(a,b){return L(a).map(function(a){return"("+Nh(a,b)+")"}).join("and"==a.Ub?" AND ":" OR ")}function Oh(a){return[a.ha.m(),Kh(a.G),a.ka.m()].join(" ")}function Nh(a,b){if(a instanceof $d){var c=a.N.m(),d=Kh(a.G),e=Lh(a.value,a.G,a.N.H(),b);return"="==d&&"NULL"==e?[c,"IS NULL"].join(" "):"<>"==d&&"NULL"==e?[c,"IS NOT NULL"].join(" "):[c,d,e].join(" ")}if(a instanceof Bg)return Mh(a,b);if(a instanceof Dg)return Oh(a);throw new E(357,typeof a);}
function Ph(a,b){var c=Nh(a,b);return c?" WHERE "+c:""}function Qh(a,b){var c="UPDATE "+a.table.getName()+" SET ",c=c+a.set.map(function(a){var b=a.N.m()+" = ";return-1!=a.Vc?b+"?"+a.Vc.toString():b+Ih(a.N.H(),a.value).toString()}).join(", ");a.u&&(c+=Ph(a.u,b));return c+";"}
function Rh(a,b){var c="*";a.f.length&&(c=a.f.map(function(a){return a.Za()?a.m()+" AS "+a.Za():a.m()}).join(", "));c="SELECT "+c+" FROM ";null!=a.Db&&0!=a.Db.size?c+=Sh(a,b):(c+=a.c.map(Th).join(", "),a.u&&(c+=Ph(a.u,b)));if(a.O)var d=a.O.map(function(a){return a.N.m()+(0==a.nb?" DESC":" ASC")}).join(", "),c=c+(" ORDER BY "+d);a.ja&&(d=a.ja.map(function(a){return a.m()}).join(", "),c+=" GROUP BY "+d);a.X&&(c+=" LIMIT "+a.X.toString());a.L&&(c+=" SKIP "+a.L.toString());return c+";"}
function Th(a){return J(a)!=a.getName()?a.getName()+" AS "+J(a):a.getName()}function Sh(a,b){for(var c=ug(a.u,function(a){return a instanceof Dg}),d=c.map(Oh),e=Th(a.c[0]),f=1;f<a.c.length;f++)var h=Th(a.c[f]),e=a.Db.has(c[d.length-f].Z())?e+(" LEFT OUTER JOIN "+h):e+(" INNER JOIN "+h),e=e+(" ON ("+d[d.length-f]+")");c=Sd(a.u,0);c instanceof Dg||(e+=" WHERE "+Nh(c,b));return e}
function Uh(a,b){var c=b||!1,d=a.a.clone();if(d instanceof Dh)return Jh(d,c);if(d instanceof Ah){var e="DELETE FROM "+d.c.getName();d.u&&(e+=Ph(d.u,c));return e+";"}if(d instanceof Fh)return Qh(d,c);if(d instanceof ie)return Rh(d,c);throw new E(358,typeof d);};function U(a,b){this.global=a;this.yg=a.l(nc);this.Fa=a.l(oc);this.a=b}r("lf.query.BaseBuilder",U);U.prototype.exec=function(){try{this.gb()}catch(a){return bb(a)}return new v(function(a,b){var c=new yh(this.global,[this.Dc()]);te(this.Fa,c).then(function(b){a(wd(b[0]))},b)},this)};U.prototype.exec=U.prototype.exec;U.prototype.Sf=function(){var a=function(a){return a.Qc(this.a)+"\n"}.bind(this);return Ag(Vh(this).jb(),a)};U.prototype.explain=U.prototype.Sf;
U.prototype.bind=function(a){this.a.bind(a);return this};U.prototype.bind=U.prototype.bind;U.prototype.Fg=function(a){return Uh(this,a)};U.prototype.toSql=U.prototype.Fg;U.prototype.gb=aa();function Vh(a){if(null==a.ef){var b;b=a.yg;var c=a.a,d=b.ig.create(c);b=b.vg.create(d,c);a.ef=b}return a.ef}U.prototype.Dc=function(){return{context:this.a.clone(),he:Vh(this)}};function Wh(a){U.call(this,a,new Ah(a.l(qc)))}t(Wh,U);r("lf.query.DeleteBuilder",Wh);Wh.prototype.c=function(a){if(null!=this.a.c)throw new E(515);this.a.c=a;return this};Wh.prototype.from=Wh.prototype.c;Wh.prototype.u=function(a){this.Dd();this.a.u=a;return this};Wh.prototype.where=Wh.prototype.u;Wh.prototype.Dd=function(){if(null==this.a.c)throw new E(548);if(null!=this.a.u)throw new E(516);};Wh.prototype.gb=function(){Wh.eb.gb.call(this);if(null==this.a.c)throw new E(517);};function Xh(a,b){U.call(this,a,new Dh(a.l(qc)));this.a.cc=b||!1}t(Xh,U);r("lf.query.InsertBuilder",Xh);Xh.prototype.gb=function(){Xh.eb.gb.call(this);var a=this.a;if(null==a.Ia||null==a.values)throw new E(518);if(a.cc&&null===a.Ia.Ib().dd())throw new E(519);};Xh.prototype.Ia=function(a){if(null!=this.a.Ia)throw new E(520);this.a.Ia=a;return this};Xh.prototype.into=Xh.prototype.Ia;
Xh.prototype.values=function(a){if(null!=this.a.values)throw new E(521);a instanceof Id||a.some(function(a){return a instanceof Id})?this.a.dc=a:this.a.values=a;return this};Xh.prototype.values=Xh.prototype.values;function Yh(a){return Zh("and",Array.prototype.slice.call(arguments))}r("lf.op.and",Yh);r("lf.op.or",function(a){return Zh("or",Array.prototype.slice.call(arguments))});function Zh(a,b){var c=new Bg(a);b.forEach(function(a){Ud(c,a)});return c}r("lf.op.not",function(a){a.wd(!0);return a});function V(a,b){U.call(this,a,new ie(a.l(qc)));this.Le=this.yd=!1;this.a.f=b;$h(this);ai(this)}t(V,U);r("lf.query.SelectBuilder",V);V.prototype.gb=function(){V.eb.gb.call(this);var a=this.a;if(null==a.c)throw new E(522);if(q(a.Tb)&&!q(a.X)||q(a.ac)&&!q(a.L))throw new E(523);null!=this.a.ja?bi(this):ci(this)};function $h(a){var b=a.a.f.filter(function(a){return a instanceof S&&"DISTINCT"==a.Mb},a);if(0!=b.length&&(1!=b.length||1!=a.a.f.length))throw new E(524);}
function bi(a){var b=a.a.f.filter(function(a){return!(a instanceof S)}).map(function(a){return a.m()}),c=!1;if(0==a.a.ja.length||0==a.a.f.length)c=!0;else{var d=a.a.ja.map(function(a){return a.m()});(c=b.some(function(a){return-1==d.indexOf(a)}))||(c=a.a.ja.some(function(a){a=a.H();return 6==a||0==a}))}if(c)throw new E(525);}function ci(a){var b=a.a.f.some(function(a){return a instanceof S},a);a=a.a.f.some(function(a){return!(a instanceof S)},a)||0==a.a.f.length;if(b&&a)throw new E(526);}
function ai(a){a.a.f.forEach(function(a){if(a instanceof S&&!di(a.Mb,a.H()))throw new E(527,a.m());},a)}function ei(a,b){if(null==a.a.c)throw new E(b);}V.prototype.c=function(a){if(this.Le)throw new E(515);this.Le=!0;null==this.a.c&&(this.a.c=[]);this.a.c.push.apply(this.a.c,Array.prototype.slice.call(arguments));return this};V.prototype.from=V.prototype.c;V.prototype.u=function(a){ei(this,548);if(this.yd)throw new E(516);this.yd=!0;fi(this,a);return this};V.prototype.where=V.prototype.u;
function fi(a,b){if(null!=a.a.u){var c=Yh(b,a.a.u);a.a.u=c}else a.a.u=b}V.prototype.bg=function(a,b){ei(this,542);if(this.yd)throw new E(547);this.a.c.push(a);fi(this,b);return this};V.prototype.innerJoin=V.prototype.bg;V.prototype.gg=function(a,b){ei(this,542);if(!(b instanceof Dg))throw new E(541);if(this.yd)throw new E(547);this.a.c.push(a);null==this.a.Db&&(this.a.Db=C());var c=b;J(a)!=J(b.ka.I())&&(c=b.reverse());this.a.Db.add(c.Z());fi(this,c);return this};V.prototype.leftOuterJoin=V.prototype.gg;
V.prototype.X=function(a){if(null!=(this.a.X||this.a.Tb))throw new E(528);if(a instanceof Id)this.a.Tb=a;else{if(0>a)throw new E(531);this.a.X=a}return this};V.prototype.limit=V.prototype.X;V.prototype.L=function(a){if(null!=(this.a.L||this.a.ac))throw new E(529);if(a instanceof Id)this.a.ac=a;else{if(0>a)throw new E(531);this.a.L=a}return this};V.prototype.skip=V.prototype.L;V.prototype.O=function(a,b){ei(this,549);null==this.a.O&&(this.a.O=[]);this.a.O.push({N:a,nb:null!=b?b:1});return this};
V.prototype.orderBy=V.prototype.O;V.prototype.ja=function(a){ei(this,549);if(null!=this.a.ja)throw new E(530);null==this.a.ja&&(this.a.ja=[]);this.a.ja.push.apply(this.a.ja,Array.prototype.slice.call(arguments));return this};V.prototype.groupBy=V.prototype.ja;function di(a,b){switch(a){case "COUNT":case "DISTINCT":return!0;case "AVG":case "GEOMEAN":case "STDDEV":case "SUM":return 4==b||3==b;case "MAX":case "MIN":return 4==b||3==b||5==b||2==b}return!1}
V.prototype.clone=function(){var a=new V(this.global,this.a.f);a.a=this.a.clone();a.a.Yc=null;return a};V.prototype.clone=V.prototype.clone;function gi(a,b){U.call(this,a,new Fh(a.l(qc)));this.a.table=b}t(gi,U);r("lf.query.UpdateBuilder",gi);gi.prototype.set=function(a,b){var c={Vc:b instanceof Id?b.Aa():-1,N:a,value:b};null!=this.a.set?this.a.set.push(c):this.a.set=[c];return this};gi.prototype.set=gi.prototype.set;gi.prototype.u=function(a){this.Dd();this.a.u=a;return this};gi.prototype.where=gi.prototype.u;gi.prototype.Dd=function(){if(null!=this.a.u)throw new E(516);};
gi.prototype.gb=function(){gi.eb.gb.call(this);if(null==this.a.set)throw new E(532);if(this.a.set.some(function(a){return a.value instanceof Id}))throw new E(501);};function hi(a){this.a=a;this.Ea=null}hi.prototype.jc=function(){null===this.Ea&&(this.Ea=this.bd());return this.Ea};function ii(a){hi.call(this,a)}t(ii,hi);ii.prototype.bd=function(){return this.a.cc?new fh(this.a.Ia,this.a.values):new eh(this.a.Ia,this.a.values)};function ji(a){hi.call(this,a)}t(ji,hi);ji.prototype.bd=function(){var a=new hh(this.a.table,this.a.set),b=null!=this.a.u?new ih(this.a.u.Ob()):null,c=new jh(this.a.table);null===b?Ud(a,c):(Ud(b,c),Ud(a,b));return a};function ki(a,b,c){this.Ea=a;this.ie=b;this.Xb=c}ki.prototype.jc=function(){this.Xb.forEach(function(a){this.Ea=a.qb(this.Ea,this.ie)},this);return this.Ea};function li(a,b){hi.call(this,a);this.Xb=b}t(li,hi);li.prototype.bd=function(){var a=new gh(this.a.c),b=null!=this.a.u?new ih(this.a.u.Ob()):null,c=new jh(this.a.c);null===b?Ud(a,c):(Ud(b,c),Ud(a,b));return(new ki(a,this.a,this.Xb)).jc()};function mi(){}t(mi,sh);mi.prototype.qb=function(a,b){if(2>b.c.length)return a;this.$=a;this.Wa(this.$,b);return this.$};mi.prototype.Wa=function(a,b){if(a instanceof ih&&a.J instanceof Dg){var c=a.J.Z(),d=Sd(a,0);d instanceof kh&&(c=null!=b.Db&&b.Db.has(c),c=new rh(a.J,c),zg(a,d,c,c),a==this.$&&(this.$=c),a=c)}L(a).forEach(function(a){this.Wa(a,b)},this)};function ni(){this.Uc=C()}t(ni,sh);ni.prototype.qb=function(a,b){this.Uc.clear();if(!q(b.u))return a;this.$=a;this.Wa(this.$);this.Uc.clear();return this.$};ni.prototype.Wa=function(a){if(oi(a)){var b=a.J instanceof $d?pi(this,a):qi(this,a);this.Uc.add(a);b==a&&(b=Sd(a,0));null!==b&&(fa(b.getParent())&&(this.$=b),oi(b)&&!this.Uc.has(b)&&this.Wa(b))}else L(a).forEach(function(a){this.Wa(a)},this)};
function ri(a,b,c){var d=b;if(Sd(b,0)instanceof ih)d=xg(b),ri(a,b,c);else if(si(b)){var e=[],d=yg(b,c,function(a){a=new ih(a.J);e.push(a);return a});e.forEach(function(a){ri(this,a,c)},a)}return d}function pi(a,b){var c=C([J(b.J.N.I())]),d=function(a){return ti(this,a,c)}.bind(a);return ri(a,b,d)}function qi(a,b){var c=C([J(b.J.ha.I()),J(b.J.ka.I())]),d=function(a){return ti(this,a,c)}.bind(a);return ri(a,b,d)}
function ti(a,b,c){var d=C();tg(b).forEach(function(a){d.add(J(a.table))},a);b instanceof jh&&d.add(J(b.table));return wc(d,c)}function oi(a){return a instanceof ih&&!(a.J instanceof Bg)}function si(a){a=Sd(a,0);return a instanceof kh||a instanceof rh};function ui(a,b){hi.call(this,a);this.Xb=b;this.jf=this.$e=this.rf=this.cf=this.Ce=this.Oe=this.qf=this.Ie=this.tf=null}t(ui,hi);
ui.prototype.bd=function(){vi(this);2<=this.a.c.length&&(this.Ie=new kh);this.qf=null!=this.a.u?new ih(this.a.u.Ob()):null;this.a.O&&(this.cf=new mh(this.a.O));null!=this.a.L&&0<this.a.L&&(this.rf=new qh(this.a.L));null!=this.a.X&&(this.$e=new ph(this.a.X));null!=this.a.ja&&(this.Oe=new oh(this.a.ja));wi(this);this.jf=new lh(this.a.f||[],this.a.ja||null);var a=xi(this);return(new ki(a,this.a,this.Xb)).jc()};
function xi(a){for(var b=[a.$e,a.rf,a.jf,a.cf,a.Ce,a.Oe,a.qf,a.Ie],c=null,d=null,e=0;e<b.length;e++){var f=b[e];null!==f&&(null===d?d=f:Ud(b[c],f),c=e)}a.tf.forEach(function(a){Ud(b[c],a)});return d}function vi(a){a.tf=a.a.c.map(function(a){return new jh(a)},a)}function wi(a){var b=a.a.f.filter(function(a){return a instanceof S});null!=a.a.O&&a.a.O.forEach(function(a){a.N instanceof S&&b.push(a.N)});0<b.length&&(a.Ce=new nh(b))};function yi(){this.pe=[new th,new wh,new ni,new mi];this.Nd=[new th]}yi.prototype.create=function(a){var b=null;if(a instanceof Dh)b=new ii(a);else if(a instanceof Ah)b=new li(a,this.Nd);else if(a instanceof ie)b=new ui(a,this.pe);else if(a instanceof Fh)b=new ji(a);else throw new E(513);b=b.jc();return new ch(b,a.ca())};function zi(a){T.call(this,0,1);this.U=a}t(zi,T);zi.prototype.toString=function(){return"delete("+this.U.getName()+")"};zi.prototype.fa=function(a,b){var c=a[0].entries.map(function(a){return a.va});b.remove(this.U,c);return[Ad()]};function Ai(a,b){T.call(this,0,-1);this.table=b;this.F=a.l(mc)}t(Ai,T);Ai.prototype.toString=function(){return"get_row_count("+this.table.getName()+")"};Ai.prototype.fa=function(){var a=this.F.get(We(this.table)),b=new G([],[this.table.getName()]),c=Og(),a=a.Oa().na;null===b.Ya&&(b.Ya=z());b.Ya.set(c.m(),a);return[b]};function Bi(a,b){T.call(this,0,-1);this.V=a.l(lc);this.F=a.l(mc);this.table=b}t(Bi,T);Bi.prototype.toString=function(){var a="table_access("+this.table.getName();null===this.table.Za()||(a+=" as "+this.table.Za());return a+")"};Bi.prototype.fa=function(){var a=this.F.get(We(this.table)).$a();return[Dd(of(this.V,a),[J(this.table)])]};function Ci(a){this.i=a}t(Ci,sh);Ci.prototype.qb=function(a,b){this.$=a;if(!this.Fd(b))return a;var c=ug(a,function(a){return a instanceof Bi})[0],d=new Ai(this.i,c.table);zg(c,c,d,d);return this.$};Ci.prototype.Fd=function(a){return 1==a.f.length&&1==a.c.length&&null==a.u&&null==a.X&&null==a.L&&null==a.ja?(a=a.f[0],a instanceof S&&"COUNT"==a.Mb&&a.child instanceof Ng):!1};function Di(a){T.call(this,0,1);this.Ne=a}t(Di,T);Di.prototype.toString=function(){return"groupBy("+this.Ne.map(function(a){return a.m()}).toString()+")"};Di.prototype.fa=function(a){return Ei(this,a[0])};function Ei(a,b){var c=new Rc,d=function(a){return this.Ne.map(function(b){return I(a,b)},this).join(",")}.bind(a);b.entries.forEach(function(a){c.set(d(a),a)},a);return c.keys().map(function(a){return new G(c.get(a),H(b))},a)};function Fi(a,b,c){T.call(this,0,0);this.F=a.l(mc);this.V=a.l(lc);this.J=b;this.Sb=c;this.Bd="eq"==this.J.G?0:2;this.Qe=null}t(Fi,T);var Gi=["hash","index_nested_loop","nested_loop"];Fi.prototype.toString=function(){return"join(type: "+(this.Sb?"outer":"inner")+", impl: "+Gi[this.Bd]+", "+this.J.toString()+")"};
Fi.prototype.fa=function(a){switch(this.Bd){case 0:return[Hg(this.J,a[0],a[1],this.Sb)];case 1:return[Ig(this.J,a[0],a[1],this.Qe,this.V)];default:var b=this.J,c=a[0];a=a[1];var d=this.Sb,e=[c,a];d||(e=Eg(b,c,a));c=e[0];a=e[1];for(var e=[],f=H(c),h=H(a),k=c.entries.length,n=a.entries.length,B=n+256-1>>8,O=0;O<B;){for(var ca=0;ca<k;ca++){var Ab=!1,Vf=I(c.entries[ca],b.ha);if(null!==Vf)for(var $b=Math.min(O+1<<8,n),Bb=O<<8;Bb<$b;Bb++)if(b.wc(Vf,I(a.entries[Bb],b.ka))){var Ab=!0,Uc=Hd(c.entries[ca],
f,a.entries[Bb],h);e.push(Uc)}d&&!Ab&&e.push(Gg(b,c.entries[ca],f))}O++}b=H(c).concat(H(a));return[new G(e,b)]}};function Hi(a,b){a.Bd=1;var c=a.F.get(b.Aa().m());a.Qe={Yf:b,ng:b==a.J.ha?a.J.ka:a.J.ha,index:c}};function Ii(a){T.call(this,0,-1);this.kf=a}t(Ii,T);Ii.prototype.toString=function(){return"no_op_step("+H(this.kf[0]).join(",")+")"};Ii.prototype.fa=g("kf");function Ji(){}t(Ji,sh);Ji.prototype.qb=function(a,b){this.$=a;if(!this.Fd(b))return a;ug(a,function(a){return a instanceof Fi}).forEach(this.xg,this);return this.$};Ji.prototype.Fd=function(a){return 1<a.c.length};
Ji.prototype.xg=function(a){if("eq"==a.J.G&&!a.Sb){var b=function(b){if(!(b instanceof Bi))return null;b=J(b.table)==J(a.J.ka.I())?a.J.ka:a.J.ha;return fa(b.Aa())?null:b},c=b(Sd(a,0)),b=b(Sd(a,1));if(null!==c||null!==b){b=null===b?c:b;Hi(a,b);var d=new G([],[J(b.I())]);Wd(a,new Ii([d]),b==c?0:1)}}};function Ki(a){a=a.map(function(a){return a.ta()});a=yb.apply(null,a);var b=[];xb(a,function(a){b.push(a)});return b}function Li(a){this.Rb=a}Li.prototype.cd=function(){return 1==this.Rb.f.length?[td()]:[this.Rb.f.map(function(){return td()})]};function Mi(a,b){this.Rb=a;this.Da=b;this.Jd=this.Ye=null}
function Ni(a,b){var c=z();a.Da.keys().forEach(function(a){var e=this.Da.get(a).map(function(a){return ee(b,a)},this),f=new qg([td()]);e.forEach(function(a){var b=null;"between"==a.G?b=new od(ce(a,a.value[0]),ce(a,a.value[1]),!1,!1):(b=ce(a,a.value),b="eq"==a.G?new od(b,b,!1,!1):"gte"==a.G?new od(b,F,!1,!1):"gt"==a.G?new od(b,F,!0,!1):"lte"==a.G?new od(F,b,!1,!1):new od(F,b,!1,!0));a=a.ab?pd(b):[b];a=new qg(a);f=rg(f,a)});c.set(a,f)},a);return c}
Mi.prototype.cd=function(a){if(this.Ye==a)return this.Jd;for(var b=Ni(this,a),c=this.Rb.f.length-1;0<=c;c--){var d=this.Rb.f[c];if(null!==(b.get(d.ba.getName())||null))break;b.set(d.ba.getName(),new qg([td()]))}this.Jd=1==this.Rb.f.length?A(b)[0].ta():Ki(Oi(this,b));this.Ye=a;return this.Jd};function Oi(a,b){var c=z(),d=0;a.Rb.f.forEach(function(a){c.set(a.ba.getName(),d);d++});return Vb(b).sort(function(a,b){return c.get(a)-c.get(b)}).map(function(a){return b.get(a)})};function Pi(a,b){this.uf=b;this.F=a.l(mc)}function Qi(a,b,c){c=c.filter(a.cg,a);if(0==c.length)return null;a=Ri(a,c);if(0==a.length)return null;if(1==a.length)return a[0];var d=Number.MAX_VALUE;return a.reduce(function(a,c){var h=Si(c,b);return h<d?(d=h,c):a},null)}
function Ri(a,b){return a.uf.Ba().map(function(a){a=new Ti(this.F,a);Ui(a,b);return a},a).filter(function(a){if(null===a.Da)a=!1;else{for(var b=!1,e=!0,f=0;f<a.Ab.f.length;f++){var h=a.Da.has(a.Ab.f[f].ba.getName());if(b&&h){e=!1;break}h||(b=!0)}a=e}return a})}Pi.prototype.cg=function(a){var b;if(b=a instanceof $d)ae(a),b=null!==a.value&&("between"==a.G||"eq"==a.G||"gt"==a.G||"gte"==a.G||"lt"==a.G||"lte"==a.G);return b?a.N.I()==this.uf:!1};
function Ti(a,b){this.F=a;this.Ab=b;this.Zf=C(this.Ab.f.map(function(a){return a.ba.getName()}));this.Yd=this.Da=null}function Vi(a){null===a.Yd&&(a.Yd=new Mi(a.Ab,a.Da));return a.Yd}function Ui(a,b){b.forEach(function(a){var b=a.ib()[0].getName();this.Zf.has(b)&&(null===this.Da&&(this.Da=new Rc),this.Da.set(b,a.Z()))},a)}function Si(a,b){var c=Vi(a).cd(b),d=a.F.get(a.Ab.m());return c.reduce(function(a,b){return a+d.$c(b)},0)};function Wi(a,b,c,d){T.call(this,0,-1);this.F=a.l(mc);this.index=b;this.Xe=c;this.me=d;this.Tc=this.Sc=!1}t(Wi,T);Wi.prototype.toString=function(){return"index_range_scan("+this.index.m()+", ?, "+(this.me?"reverse":"natural")+(this.Sc?", limit:?":"")+(this.Tc?", skip:?":"")+")"};Wi.prototype.Qc=function(a){var b=this.toString(),c=this.Xe.cd(a),b=b.replace("?",c.toString());this.Sc&&(b=b.replace("?",a.X.toString()));this.Tc&&(b=b.replace("?",a.L.toString()));return b};
Wi.prototype.fa=function(a,b,c){a=this.Xe.cd(c);b=this.F.get(this.index.m());c=(1==a.length&&a[0]instanceof od&&ud(a[0])?sf(b.get(a[0].c),!1,this.Sc?c.X:void 0,this.Tc?c.L:void 0):b.$a(a,this.me,this.Sc?c.X:void 0,this.Tc?c.L:void 0)).map(function(a){return new Wb(a,{})},this);return[Dd(c,[this.index.Pc])]};function Xi(a){T.call(this,0,1);this.sd=a}t(Xi,T);Xi.prototype.toString=l("select(?)");Xi.prototype.Qc=function(a){a=ee(a,this.sd);return this.toString().replace("?",a.toString())};Xi.prototype.fa=function(a,b,c){return[ee(c,this.sd).eval(a[0])]};function Yi(a,b){T.call(this,0,1);this.V=a.l(lc);this.U=b}t(Yi,T);Yi.prototype.toString=function(){return"table_access_by_row_id("+this.U.getName()+")"};Yi.prototype.fa=function(a){return[Dd(of(this.V,xd(a[0])),[J(this.U)])]};function Zi(a){this.i=a}t(Zi,sh);Zi.prototype.qb=function(a,b){this.$=a;ug(a,function(a){return a instanceof Bi}).forEach(function(a){var d=$i(a);if(0!=d.length){var e=Qi(new Pi(this.i,a.table),b,d.map(function(a){return ee(b,a.sd)}));if(null!==e){var f=z();d.forEach(function(a){f.set(a.sd,a)},this);this.$=aj(this,e,f,a)}}},this);return this.$};function $i(a){var b=[];for(a=a.getParent();a;)a instanceof Xi&&b.push(a),a=a.getParent();return b}
function aj(a,b,c,d){(null===b.Da?[]:b.Da.values()).map(function(a){return c.get(a)}).forEach(vg);b=new Wi(a.i,b.Ab,Vi(b),!1);a=new Yi(a.i,d.table);Ud(a,b);zg(d,d,a,b);return b.jb()};function bj(a,b){T.call(this,0,-1);this.F=a.l(mc);this.U=b}t(bj,T);bj.prototype.toString=function(){return"insert("+this.U.getName()+")"};bj.prototype.fa=function(a,b,c){cj(this.U,c.values,this.F);b.Bb(this.U,c.values);return[Dd(c.values,[this.U.getName()])]};function cj(a,b,c){a=a.Ib().dd();if(null===a?0:a.f[0].autoIncrement){var d=a.f[0].ba.getName();c=c.get(a.m()).max();var e=null===c?0:c[0];b.forEach(function(a){if(0==a.s[d]||null==a.s[d])e++,a.s[d]=e})}}
function dj(a,b){T.call(this,0,-1);this.F=a.l(mc);this.U=b}t(dj,T);dj.prototype.toString=function(){return"insert_replace("+this.U.getName()+")"};dj.prototype.fa=function(a,b,c){cj(this.U,c.values,this.F);b.Ud(this.U,c.values);return[Dd(c.values,[this.U.getName()])]};function ej(){T.call(this,0,1)}t(ej,T);ej.prototype.toString=l("limit(?)");ej.prototype.Qc=function(a){return this.toString().replace("?",a.X.toString())};ej.prototype.fa=function(a,b,c){a[0].entries.splice(c.X);return a};function fj(a){T.call(this,0,1);this.O=a}t(fj,T);m=fj.prototype;m.toString=function(){return"order_by("+je(this.O)+")"};m.fa=function(a){if(1==a.length){var b;b=a[0];for(var c=null,d=0;d<this.O.length;d++){var e=Pg(this.O[d].N);if(null!==b.Ya&&b.Ya.has(e.m())){c=e;break}}b=c;(null===b?a[0]:yd(a[0],b)).entries.sort(this.Pf.bind(this))}else a.sort(this.Ag.bind(this));return a};
m.W=function(a,b){var c=null,d=null,e=null,f=-1;do f++,e=this.O[f].N,c=this.O[f].nb,d=a(e),e=b(e);while(d==e&&f+1<this.O.length);d=d<e?-1:d>e?1:0;return 1==c?d:-d};m.Ag=function(a,b){return this.W(function(b){return b instanceof S?yd(a,b):I(a.entries[a.entries.length-1],b)},function(a){return a instanceof S?yd(b,a):I(b.entries[b.entries.length-1],a)})};m.Pf=function(a,b){return this.W(function(b){return I(a,b)},function(a){return I(b,a)})};function gj(a,b){this.Ka=a;this.K=b}function hj(a){return a.K.some(function(a){return a instanceof S},a)?ij(a):jj(a)}function ij(a){if(1==a.K.length&&"DISTINCT"==a.K[0].Mb)return a=yd(a.Ka,a.K[0]).entries.map(function(a){var b=new Ed(new Wb(-1,{}),1<this.Ka.M.size);Gd(b,this.K[0],I(a,this.K[0].child));return b},a),new G(a,[]);var b=new Ed(new Wb(-1,{}),1<a.Ka.M.size);a.K.forEach(function(a){var d=a instanceof S?yd(this.Ka,a):I(this.Ka.entries[0],a);Gd(b,a,d)},a);return new G([b],H(a.Ka))}
function jj(a){var b=Array(a.Ka.entries.length),c=1<a.Ka.M.size;a.Ka.entries.forEach(function(a,e){b[e]=new Ed(new Wb(a.va.id(),{}),c);this.K.forEach(function(c){Gd(b[e],c,I(a,c))},this)},a);return new G(b,H(a.Ka))}function kj(a,b){var c=a.map(function(a){return hj(new gj(a,b)).entries[0]});return new G(c,H(a[0]))};function lj(a,b){T.call(this,0,1);this.f=a;this.Qb=b}t(lj,T);lj.prototype.toString=function(){var a="project("+this.f.toString();if(null!==this.Qb)var b=this.Qb.map(function(a){return a.m()}).join(", "),a=a+(", groupBy("+b+")");return a+")"};lj.prototype.fa=function(a){0==a.length?a=[Ad()]:1==a.length?(a=a[0],a=[0==this.f.length?a:hj(new gj(a,this.f))]):a=[kj(a,this.f)];return a};function mj(a){return a.f.some(function(a){return a instanceof S})||null!==a.Qb};function nj(){T.call(this,0,1)}t(nj,T);nj.prototype.toString=l("skip(?)");nj.prototype.Qc=function(a){return this.toString().replace("?",a.L.toString())};nj.prototype.fa=function(a,b,c){return[new G(a[0].entries.slice(c.L),H(a[0]))]};function oj(){}t(oj,sh);oj.prototype.qb=function(a,b){if(!q(b.X)&&!q(b.L))return a;var c=pj(a);if(null===c)return a;ug(a,function(a){return a instanceof ej||a instanceof nj}).forEach(function(a){a instanceof ej?c.Sc=!0:c.Tc=!0;vg(a)},this);return c.jb()};function pj(a){a=ug(a,function(a){return a instanceof Wi},function(a){return a instanceof lj&&mj(a)||a instanceof fj||1!=L(a).length||a instanceof Xi});return 0<a.length?a[0]:null};function qj(a){this.i=a}t(qj,sh);qj.prototype.qb=function(a,b){var c=rj(a,b);if(null===c)return a;var d;a:{var e=c;d=sj(Sd(c,0));if(null!==d){var f;f=c.O;for(var h=null,k=d.table.Ba(),n=0;n<k.length&&null===h;n++)h=tj(k[n],f);f=h;if(null===f){d=e;break a}e=new Wi(this.i,f.Ab,new Li(f.Ab),f.Ue);f=new Yi(this.i,d.table);Ud(f,e);vg(c);e=zg(d,d,f,e)}d=e}if(d==c)a:if(d=c,e=uj(Sd(c,0)),null!==e){f=tj(e.index,c.O);if(null===f)break a;e.me=f.Ue;d=vg(c).parent}return d.jb()};
function uj(a){a=ug(a,function(a){return a instanceof Wi},function(a){return 1!=L(a).length});return 0<a.length?a[0]:null}function sj(a){a=ug(a,function(a){return a instanceof Bi},function(a){return 1!=L(a).length});return 0<a.length?a[0]:null}function rj(a,b){return q(b.O)?ug(a,function(a){return a instanceof fj})[0]:null}function tj(a,b){if(a.f.length!=b.length||!b.every(function(b,c){return b.N.getName()==a.f[c].ba.getName()}))return null;var c=vj(b,a);return c[0]||c[1]?{Ab:a,Ue:c[1]}:null}
function vj(a,b){var c=a.reduce(function(a,b){return a<<1|(0==b.nb?0:1)},0),d=b.f.reduce(function(a,b){return a<<1|(0==b.nb?0:1)},0),c=c^d;return[0==c,c==Math.pow(2,Math.max(a.length,b.f.length))-1]};function wj(a,b,c){this.Ea=a;this.ie=b;this.Xb=c}wj.prototype.jc=function(){this.Xb.forEach(function(a){this.Ea=a.qb(this.Ea,this.ie)},this);return this.Ea};function xj(a,b){T.call(this,0,1);this.U=a;this.Ig=b}t(xj,T);xj.prototype.toString=function(){return"update("+this.U.getName()+")"};xj.prototype.fa=function(a,b){var c=a[0].entries.map(function(a){var b=this.U.hb(a.va.Ga());this.Ig.forEach(function(a){b.s[a.N.getName()]=a.value},this);return b},this);b.update(this.U,c);return[Ad()]};function yj(a){this.i=a;this.pe=[new Ji,new Zi(this.i),new qj(this.i),new oj,new Ci(this.i)];this.Nd=[new Zi(this.i)]}yj.prototype.create=function(a,b){var c=a.jb();if(c instanceof fh||c instanceof eh)return zj(this,a,b);if(c instanceof lh||c instanceof ph||c instanceof qh)return zj(this,a,b,this.pe);if(c instanceof gh||c instanceof hh)return zj(this,a,b,this.Nd);throw new E(8);};function zj(a,b,c,d){a=sg(b.jb(),a.kg.bind(a));null!=d&&(a=(new wj(a,c,d)).jc());return new ke(a,b.ca())}
yj.prototype.kg=function(a){if(a instanceof lh)return new lj(a.f,a.Qb);if(a instanceof oh)return new Di(a.f);if(a instanceof nh)return new Tg(a.f);if(a instanceof mh)return new fj(a.O);if(a instanceof qh)return new nj;if(a instanceof ph)return new ej;if(a instanceof ih)return new Xi(a.J.Z());if(a instanceof kh)return new xh;if(a instanceof rh)return new Fi(this.i,a.J,a.Sb);if(a instanceof jh)return new Bi(this.i,a.table);if(a instanceof gh)return new zi(a.table);if(a instanceof hh)return new xj(a.table,
a.we);if(a instanceof fh)return new dj(this.i,a.table);if(a instanceof eh)return new bj(this.i,a.table);throw new E(514);};function Aj(a){this.ig=new yi;this.vg=new yj(a)};function Bj(){this.af=z()}function Cj(a,b){var c=a.af.get(b.getName())||null;null===c&&(c=new Dj,a.af.set(b.getName(),c));return c}function Ej(a,b,c,d){c.forEach(function(a){a=Cj(this,a);0==d?(a.bb=null,a.xc=b):3==d?(null===a.$b&&(a.$b=C()),a.$b.add(b),null===a.Ta&&(a.Ta=C()),a.Ta.delete(b)):1==d?(null===a.Ta&&(a.Ta=C()),a.Ta.add(b)):2==d&&(a.bb=b)},a)}
function Fj(a,b,c,d){var e=!0;c.forEach(function(a){if(e){a=Cj(this,a);var c=null===a.Ta||0==a.Ta.size;e=0==d?(null===a.$b||0==a.$b.size)&&c&&null===a.xc&&null!==a.bb&&a.bb==b:3==d?null===a.xc&&null===a.bb&&null!==a.Ta&&a.Ta.has(b):1==d?null===a.bb:c&&(null===a.bb||a.bb==b)}},a);return e}function Gj(a,b,c,d){var e=Fj(a,b,c,d);e&&Ej(a,b,c,d);return e}Bj.prototype.releaseLock=function(a,b){b.forEach(function(b){Cj(this,b).releaseLock(a)},this)};
function Hj(a,b){b.forEach(function(a){Cj(this,a).bb=null},a)}function Dj(){this.$b=this.Ta=this.bb=this.xc=null}Dj.prototype.releaseLock=function(a){this.xc==a&&(this.xc=null);this.bb==a&&(this.bb=null);null===this.Ta||this.Ta.delete(a);null===this.$b||this.$b.delete(a)};function Ij(){this.Wb=new Jj;this.Gc=new Bj}function te(a,b){(2>b.getPriority()||2>b.getPriority())&&Hj(a.Gc,b.ca());a.Wb.Bb(b);Kj(a);return b.Pb().da}function Kj(a){for(var b=a.Wb.ta(),c=0;c<b.length;c++){var d=b[c],e=!1;if(e=0==d.H()?Lj(a,d,1,3):Lj(a,d,2,0))a.Wb.remove(d),e=a,d.exec().then(e.sg.bind(e,d),e.rg.bind(e,d))}}function Lj(a,b,c,d){var e=!1;Gj(a.Gc,b.Z(),b.ca(),c)&&(e=Gj(a.Gc,b.Z(),b.ca(),d));return e}Ij.prototype.sg=function(a,b){this.Gc.releaseLock(a.Z(),a.ca());a.Pb().resolve(b);Kj(this)};
Ij.prototype.rg=function(a,b){this.Gc.releaseLock(a.Z(),a.ca());a.Pb().reject(b);Kj(this)};function Jj(){this.Wb=[]}Jj.prototype.Bb=function(a){rf(this.Wb,a,function(a,c){var d=a.getPriority()-c.getPriority();return 0==d?a.Z()-c.Z():d})};Jj.prototype.ta=function(){return this.Wb.slice()};Jj.prototype.remove=function(a){var b=this.Wb;a=xa(b,a);var c;(c=0<=a)&&Array.prototype.splice.call(b,a,1);return c};function Mj(a,b){this.Od=Jd.Bc();this.je=a;this.od=b;this.K=Nj(this)}function Nj(a){if(0<a.je.f.length)return a.je.f;var b=[];a.je.c.forEach(function(a){a.ib().forEach(function(a){b.push(a)})});return b}Mj.prototype.W=function(a,b){return this.K.every(function(c){return Pd(this.Od,c.H(),"eq")(I(a,c),I(b,c))},this)};
function Oj(a,b,c){var d=null===b?[]:b.entries,e=pb(d,c.entries,a.W.bind(a),function(a){return d[a]});b=[];for(var f=0,h=0;h<d.length;h++){var k=d[h];e[f]==k?f++:(k=a.od.splice(f,1),k=Pj(h,k,0,a.od),b.push(k))}e=pb(d,c.entries,a.W.bind(a),function(a,b){return c.entries[b]});for(h=f=0;h<c.entries.length;h++)k=c.entries[h],e[f]==k?f++:(a.od.splice(h,0,k.va.s),k=Pj(h,[],1,a.od),b.push(k));return b}function Pj(a,b,c,d){return{Kg:c,index:a,object:d,Mg:b,type:"splice"}};function Qj(){this.hc=z()}Qj.prototype.Ad=function(a,b){var c=ka(a.a).toString(),d=this.hc.get(c)||null;null===d&&(d=new Rj(a),this.hc.set(c,d));d.Ad(b)};Qj.prototype.ke=function(a,b){var c=ka(a.a).toString(),d=this.hc.get(c)||null;d.ke(b);0<d.Ic.size||this.hc.delete(c)};function se(a,b){var c=C();b.forEach(function(a){c.add(a.getName())});var d=[];a.hc.forEach(function(a){a=a.Dc();a.context.c.some(function(a){return c.has(a.getName())})&&d.push(a)});return d}
function qe(a,b,c){b=ka(null!=b.Yc?b.Yc:b).toString();a=a.hc.get(b)||null;null!==a&&Sj(a,c)}function Rj(a){this.Gf=a;this.Ic=C();this.pg=[];this.Ze=null;this.Nf=new Mj(a.a,this.pg)}Rj.prototype.Ad=function(a){this.Ic.has(a)||this.Ic.add(a)};Rj.prototype.ke=function(a){return this.Ic.delete(a)};Rj.prototype.Dc=function(){var a=this.Gf;return{context:a.a,he:Vh(a)}};function Sj(a,b){var c=Oj(a.Nf,a.Ze,b);a.Ze=b;0<c.length&&a.Ic.forEach(function(a){a(c)})};function Tj(a,b){var c=a.l(qc),d=b||{},e=new nf(c);a.pb(lc,e);var e=null,f=!1;null!=d.storeType?e=d.storeType:(e=Tb(),e=e.$f?0:e.Jg?4:1);switch(e){case 0:e=new Se(a,c);break;case 1:e=new Ze(c);break;case 5:e=new af(c);break;case 4:e=new jf(a,c,d.webSqlDbSize);break;case 3:e=new Fe(c,d.firebase);f=!0;break;default:throw new E(300);}a.pb(kc,e);var h=new pg;a.pb(mc,h);return e.Ha(d.onUpgrade).then(function(){var b=new Aj(a);a.pb(nc,b);b=new Ij;a.pb(oc,b);b=new Qj;a.pb(pc,b);return h.Ha(c)}).then(function(){if(f){var b=
new ue(a);b.La.subscribe(b.ce.bind(b))}return(new ig(a)).Ha(c)})};function Uj(a){this.i=a;this.g=a.l(qc);this.aa=C(this.g.ra());this.cb=x()}m=Uj.prototype;m.exec=function(){var a=this.i.l(mc),b=this.i.l(lc),c={};this.g.ra().forEach(function(d){var f=a.get(We(d)).$a(),f=of(b,f).map(function(a){return a.s});c[d.getName()]=f});var d={name:this.g.name(),version:this.g.version(),tables:c},d=new Ed(new Wb(-1,d),!0);return w([new G([d],[])])};m.H=l(0);m.ca=g("aa");m.Pb=g("cb");m.Z=function(){return ka(this)};m.getPriority=l(0);function Vj(a,b){this.i=a;this.g=a.l(qc);this.aa=C(this.g.ra());this.cb=x();this.ya=b;this.La=a.l(kc);this.V=a.l(lc);this.F=a.l(mc)}m=Vj.prototype;
m.exec=function(){if(!(this.La instanceof Se||this.La instanceof Ze||this.La instanceof jf))throw new E(300);var a;a:{a=this.g.ra();for(var b=0;b<a.length;++b)if(0<this.F.get(We(a[b])).Oa().na){a=!1;break a}a=!0}if(!a)throw new E(110);if(this.g.name()!=this.ya.name||this.g.version()!=this.ya.version)throw new E(111);if(null==this.ya.tables)throw new E(112);return Wj(this)};m.H=l(1);m.ca=g("aa");m.Pb=g("cb");m.Z=function(){return ka(this)};m.getPriority=l(0);
function Wj(a){var b=new jd(a.i,a.aa),b=a.La.Gb(a.H(),D(a.aa),b),c;for(c in a.ya.tables){var d=a.g.table(c),e=a.ya.tables[c].map(function(a){return d.xb(a)}),f=b.I(c,d.hb,0);a.V.Yb(c,e);var h=a.F.nc.get(c)||[];e.forEach(function(a){h.forEach(function(b){var c=a.lb(b.getName());b.add(c,a.id())})});f.put(e)}return b.ia()};function Xj(a,b){this.i=a;this.La=a.l(kc);this.Fa=a.l(oc);this.Kb=a.l(pc);this.aa=C(b);this.Ra=new jd(this.i,this.aa);this.cb=x();this.yc=x();this.ye=x()}m=Xj.prototype;m.exec=function(){this.ye.resolve();return this.yc.da};m.H=l(1);m.ca=g("aa");m.Pb=g("cb");m.Z=function(){return ka(this)};m.getPriority=l(2);function Yj(a){te(a.Fa,a);return a.ye.da}
function Zj(a,b){var c=b.Dc();return c.he.jb().exec(a.Ra,c.context).then(function(a){return wd(a[0])},function(a){this.Ra.Lb();var b=new jb(a.name);this.yc.reject(b);throw a;}.bind(a))}m.ia=function(){this.La.Gb(this.H(),D(this.aa),this.Ra).ia().then(function(){this.Nc();this.yc.resolve()}.bind(this),function(a){this.Ra.Lb();this.yc.reject(a)}.bind(this));return this.cb.da};m.Lb=function(){this.Ra.Lb();this.yc.resolve();return this.cb.da};
m.Nc=function(){var a=se(this.Kb,this.aa);0!=a.length&&(a=new pe(this.i,a),te(this.Fa,a))};function ak(a){this.i=a;this.Fa=a.l(oc);this.Rc=null;this.Ua=0;0==bk.size&&(bk.set(0,C([1,4])),bk.set(1,C([2])),bk.set(2,C([3,5,6])),bk.set(3,C([2,7])),bk.set(4,C([7])),bk.set(5,C([7])),bk.set(6,C([7])))}r("lf.proc.Transaction",ak);var bk=z();function ck(a,b){var c=bk.get(a.Ua)||null;if(null===c||!c.has(b))throw new E(107,a.Ua,b);a.Ua=b}
ak.prototype.exec=function(a){ck(this,4);var b=[];try{a.forEach(function(a){a.gb();b.push(a.Dc())},this)}catch(c){return ck(this,7),bb(c)}a=new yh(this.i,b);return te(this.Fa,a).then(function(a){ck(this,7);return a.map(function(a){return wd(a)})}.bind(this),function(a){ck(this,7);throw a;}.bind(this))};ak.prototype.exec=ak.prototype.exec;ak.prototype.Ef=function(a){ck(this,1);this.Rc=new Xj(this.i,a);return Yj(this.Rc).then(function(){ck(this,2)}.bind(this))};ak.prototype.begin=ak.prototype.Ef;
ak.prototype.Df=function(a){ck(this,3);return Zj(this.Rc,a).then(function(a){ck(this,2);return a}.bind(this),function(a){ck(this,7);throw a;}.bind(this))};ak.prototype.attach=ak.prototype.Df;ak.prototype.ia=function(){ck(this,5);return this.Rc.ia().then(function(){ck(this,7)}.bind(this))};ak.prototype.commit=ak.prototype.ia;ak.prototype.Lb=function(){ck(this,6);return this.Rc.Lb().then(function(){ck(this,7)}.bind(this))};ak.prototype.rollback=ak.prototype.Lb;function W(a){this.i=a;this.g=a.l(qc);this.kd=!1}r("lf.proc.Database",W);W.prototype.Ha=function(a){this.i.pb(qc,this.g);return Tj(this.i,a).then(function(){this.kd=!0;this.Fa=this.i.l(oc);return this}.bind(this))};W.prototype.init=W.prototype.Ha;W.prototype.zb=g("g");W.prototype.getSchema=W.prototype.zb;function dk(a){if(!a.kd)throw new E(2);}W.prototype.select=function(a){dk(this);return new V(this.i,1!=arguments.length||null!=arguments[0]?Array.prototype.slice.call(arguments):[])};
W.prototype.select=W.prototype.select;W.prototype.Bb=function(){dk(this);return new Xh(this.i)};W.prototype.insert=W.prototype.Bb;W.prototype.Ud=function(){dk(this);return new Xh(this.i,!0)};W.prototype.insertOrReplace=W.prototype.Ud;W.prototype.update=function(a){dk(this);return new gi(this.i,a)};W.prototype.update=W.prototype.update;W.prototype.delete=function(){dk(this);return new Wh(this.i)};W.prototype["delete"]=W.prototype.delete;
W.prototype.observe=function(a,b){dk(this);this.i.l(pc).Ad(a,b)};W.prototype.observe=W.prototype.observe;W.prototype.unobserve=function(a,b){dk(this);this.i.l(pc).ke(a,b)};W.prototype.unobserve=W.prototype.unobserve;W.prototype.Lf=function(){dk(this);return new ak(this.i)};W.prototype.createTransaction=W.prototype.Lf;W.prototype.close=function(){try{this.i.l(kc).close()}catch(a){}this.i.clear();this.kd=!1};W.prototype.close=W.prototype.close;
W.prototype.Tf=function(){dk(this);var a=new Uj(this.i);return te(this.Fa,a).then(function(a){return wd(a[0])[0]})};W.prototype["export"]=W.prototype.Tf;W.prototype.import=function(a){dk(this);a=new Vj(this.i,a);return te(this.Fa,a).then(l(null))};W.prototype["import"]=W.prototype.import;function X(a,b,c,d,e,f){this.U=a;this.w=b;this.Ve=c;this.Te=d;this.wf=e;this.fb=f||null}r("lf.schema.BaseColumn",X);m=X.prototype;m.getName=g("w");m.m=function(){return J(this.U)+"."+this.w};m.toString=function(){return this.m()};m.I=g("U");m.H=g("wf");X.prototype.getType=X.prototype.H;X.prototype.Za=g("fb");X.prototype.Ba=function(){null==this.pa&&(this.pa=[],this.I().Ba().forEach(function(a){-1!=a.f.map(function(a){return a.ba.getName()}).indexOf(this.w)&&this.pa.push(a)},this));return this.pa};
X.prototype.Aa=function(){if(!q(this.ga)){var a=this.Ba().filter(function(a){return 1!=a.f.length?!1:a.f[0].ba.getName()==this.getName()},this);this.ga=0<a.length?a[0]:null}return this.ga};X.prototype.kc=g("Te");X.prototype.isNullable=X.prototype.kc;X.prototype.Fc=g("Ve");X.prototype.Qa=function(a){return Jg(this,a,"eq")};X.prototype.eq=X.prototype.Qa;X.prototype.bf=function(a){return Jg(this,a,"neq")};X.prototype.neq=X.prototype.bf;X.prototype.Zd=function(a){return Jg(this,a,"lt")};
X.prototype.lt=X.prototype.Zd;X.prototype.jg=function(a){return Jg(this,a,"lte")};X.prototype.lte=X.prototype.jg;X.prototype.Vf=function(a){return Jg(this,a,"gt")};X.prototype.gt=X.prototype.Vf;X.prototype.Wf=function(a){return Jg(this,a,"gte")};X.prototype.gte=X.prototype.Wf;X.prototype.match=function(a){return Jg(this,a,"match")};X.prototype.match=X.prototype.match;X.prototype.Ff=function(a,b){return Jg(this,[a,b],"between")};X.prototype.between=X.prototype.Ff;
X.prototype.Xf=function(a){return Jg(this,a,"in")};X.prototype["in"]=X.prototype.Xf;X.prototype.eg=function(){return this.Qa(null)};X.prototype.isNull=X.prototype.eg;X.prototype.dg=function(){return this.bf(null)};X.prototype.isNotNull=X.prototype.dg;X.prototype.sc=function(a){return new X(this.U,this.w,this.Ve,this.Te,this.wf,a)};X.prototype.as=X.prototype.sc;function ek(){this.vd=z()}var fk;ek.prototype.clear=function(){this.vd.clear()};ek.prototype.clear=ek.prototype.clear;ek.prototype.pb=function(a,b){this.vd.set(a.toString(),b);return b};ek.prototype.registerService=ek.prototype.pb;ek.prototype.l=function(a){var b=this.vd.get(a.toString())||null;if(null===b)throw new E(7,a.toString());return b};ek.prototype.getService=ek.prototype.l;ek.prototype.Xd=function(a){return this.vd.has(a.toString())};ek.prototype.isRegistered=ek.prototype.Xd;function gk(a){this.g=a;this.Gd=new Rc;this.le=new Rc;this.df=new Rc;this.He=z();this.h=new Rc;this.De=new Rc;this.lf=new Rc;this.Ge=new Rc;hk(this)}function hk(a){a.g.ra().forEach(function(a){var c=a.getName();a.Ib().Td().forEach(function(d){this.df.set(c,this.g.table(d.Sa));this.h.set(d.Sa,a);0==d.action?(this.le.set(d.Sa,d),this.lf.set(d.Sa,a)):(this.Gd.set(d.Sa,d),this.De.set(d.Sa,a));this.He.set(a.getName()+"."+d.vb,d.Sa);this.Ge.set(d.Sa+"."+d.Kc,a.getName())},this)},a)}
function $c(a,b,c){if(null!=c)return 1==c?a.Gd.get(b):a.le.get(b);c=a.Gd.get(b);a=a.le.get(b);return null===c&&null===a?null:(c||[]).concat(a||[])}function Eh(a,b){var c=b.get(a);return null===c?[]:c}function Gh(a,b){var c=C();b.forEach(function(a){(a=this.He.get(a))&&c.add(a)},a);return D(c).map(function(a){return this.g.table(a)},a)}function Ch(a,b,c){return null!=c?0==c?Eh(b,a.lf):Eh(b,a.De):Eh(b,a.h)}
function Hh(a,b){var c=C();b.forEach(function(a){(a=this.Ge.get(a))&&a.forEach(function(a){c.add(a)})},a);return D(c).map(function(a){return this.g.table(a)},a)};function ik(a,b,c){this.wg=a;this.og=b;this.Uf=c}r("lf.schema.Constraint",ik);ik.prototype.dd=g("wg");ik.prototype.getPrimaryKey=ik.prototype.dd;ik.prototype.Td=g("Uf");ik.prototype.getForeignKeys=ik.prototype.Td;function jk(a,b,c){var d=a.ref.split(".");if(2!=d.length)throw new E(540,c);this.Fe=b;this.vb=a.local;this.Sa=d[0];this.Kc=d[1];this.name=b+"."+c;this.action=a.action;this.timing=a.timing};function Y(a){kk(a);this.Od=Jd.Bc();this.w=a;this.K=z();this.xd=C();this.oc=C();this.nd=C();this.Ca=null;this.pa=z();this.rd=!1;this.yb=[]}r("lf.schema.TableBuilder",Y);function lk(a){this.name=a.name;this.nb=a.order;this.autoIncrement=a.autoIncrement}var mk=C([0,6]);function kk(a){if(!/^[A-Za-z_][A-Za-z0-9_]*$/.test(a))throw new E(502,a);}function nk(a,b){if(b==a.w)throw new E(546,b);if(a.K.has(b)||a.pa.has(b)||a.oc.has(b))throw new E(503,a.w+"."+b);}
function ok(a,b){var c=!1;b.forEach(function(a){var b=this.K.get(a.name);c=c||a.autoIncrement;if(a.autoIncrement&&3!=b)throw new E(504);},a);if(c&&1<b.length)throw new E(505);}function pk(a){if(null!==a.Ca){var b=a.pa.get(a.Ca).map(function(a){return a.name}),c=0;if(a.yb.some(function(a,e){c=e;return-1!=b.indexOf(a.vb)},a))throw new E(543,a.yb[c].name);}}
function qk(a){if(null!==a.Ca){var b=function(a){return a.name},c=JSON.stringify(a.pa.get(a.Ca).map(b));a.pa.forEach(function(a,e){if(e!=this.Ca){var f=a.map(b);if(JSON.stringify(f)==c)throw new E(544,this.w+"."+e);}},a)}}function rk(a){null===a.Ca||a.pa.get(a.Ca).forEach(function(a){if(this.nd.has(a.name))throw new E(545,this.w+"."+a.name);},a)}Y.prototype.yf=function(a,b){kk(a);nk(this,a);this.K.set(a,b);mk.has(b)&&this.Ae([a]);return this};Y.prototype.addColumn=Y.prototype.yf;
Y.prototype.Af=function(a,b){var c=this.w;this.Ca="pk"+(c[0].toUpperCase()+c.substring(1));kk(this.Ca);nk(this,this.Ca);c=sk(this,a,!0,void 0,b);ok(this,c);1==c.length&&this.xd.add(c[0].name);this.oc.add(this.Ca);this.pa.set(this.Ca,c);return this};Y.prototype.addPrimaryKey=Y.prototype.Af;
Y.prototype.zf=function(a,b){kk(a);nk(this,a);var c=new jk(b,this.w,a);q(c.action)||(c.action=0);q(c.timing)||(c.timing=0);if(1==c.action&&1==c.timing)throw new E(506);if(!this.K.has(c.vb))throw new E(540,a);this.yb.push(c);this.ze(a,[c.vb],this.xd.has(c.vb));return this};Y.prototype.addForeignKey=Y.prototype.zf;Y.prototype.Bf=function(a,b){kk(a);nk(this,a);var c=sk(this,b,!0);1==c.length&&(this.xd.add(c[0].name),tk(this,c[0].name));this.pa.set(a,c);this.oc.add(a);return this};
Y.prototype.addUnique=Y.prototype.Bf;function tk(a,b){a.yb.forEach(function(a){a.vb==b&&this.oc.add(a.name.split(".")[1])},a)}Y.prototype.Ae=function(a){sk(this,a,!1).forEach(function(a){this.nd.add(a.name)},this);return this};Y.prototype.addNullable=Y.prototype.Ae;Y.prototype.ze=function(a,b,c,d){kk(a);nk(this,a);b=sk(this,b,!0,d);c&&this.oc.add(a);this.pa.set(a,b);return this};Y.prototype.addIndex=Y.prototype.ze;Y.prototype.Eb=ba("rd");Y.prototype.persistentIndex=Y.prototype.Eb;
Y.prototype.zb=function(){pk(this);qk(this);rk(this);return new (uk(this))};Y.prototype.getSchema=Y.prototype.zb;function vk(a){return a.yb}function sk(a,b,c,d,e){var f=b,f="string"==typeof b[0]?b.map(function(a){return new lk({name:a,order:null!=d?d:1,autoIncrement:e||!1})}):b.map(function(a){return new lk(a)});f.forEach(function(a){if(!this.K.has(a.name))throw new E(508,this.w,a.name);if(c){var b=this.K.get(a.name);if(0==b||6==b)throw new E(509,this.w,a.name);}},a);return f}
function uk(a){function b(){function b(c){return a.pa.get(c).map(function(a){return{ba:this[a.name],nb:a.nb,autoIncrement:a.autoIncrement}},this)}var d=Vb(a.K).map(function(b){this[b]=new X(this,b,a.xd.has(b),a.nd.has(b),a.K.get(b));return this[b]},this),e=Vb(a.pa).map(function(d){return new Lg(a.w,d,a.oc.has(d),b.call(this,d))},this);R.call(this,a.w,d,e,a.rd);var f=null===a.Ca?null:new Lg(a.w,a.Ca,!0,b.call(this,a.Ca)),h=d.filter(function(b){return!a.nd.has(b.getName())});this.If=new ik(f,h,a.yb);
this.of=wk(a,d,e)}t(b,R);b.prototype.xb=function(a){return new this.of(Xb++,a)};b.prototype.createRow=b.prototype.xb;b.prototype.hb=function(a){var b={};this.ib().forEach(function(e){var f=e.getName();e=e.H();var h=a.value[f];if(0==e)if(e=h,null!=e&&""!=e){0!=e.length%2&&(e="0"+e);for(var h=new ArrayBuffer(e.length/2),k=new Uint8Array(h),n=0,B=0;n<e.length;n+=2)k[B++]=parseInt(e.substr(n,2),16);e=h}else e=null;else e=2==e?null!=h?new Date(h):null:h;b[f]=e},this);return new this.of(a.id,b)};b.prototype.deserializeRow=
b.prototype.hb;b.prototype.Ib=g("If");b.prototype.getConstraint=b.prototype.Ib;return b}
function wk(a,b,c){function d(a,d){this.K=b;this.pa=c;Wb.call(this,a,d)}t(d,Wb);d.prototype.Je=function(){var a={};this.K.forEach(function(b){a[b.getName()]=b.kc()?null:Qc[b.H()]});return a};d.prototype.vf=function(){var a={};this.K.forEach(function(b){var c=b.getName();b=b.H();var d=this.s[c];a[c]=0==b?null!=d?ac(d):null:2==b?null!=d?d.getTime():null:6==b?null!=d?d:null:d},this);return a};var e=function(a){var b=this.K.get(a.getName()),c=this.Od.We.get(b)||null;return function(b){return c(b[a.getName()])}}.bind(a),
f=function(a){var b=a.map(function(a){return e(a.ba)});return function(a){return b.map(function(b){return b(a)})}}.bind(a),h={};c.forEach(function(a){var b=a.m();a=1==a.f.length?e(a.f[0].ba):f(a.f);h[b]=a});d.prototype.lb=function(a){return-1!=a.indexOf("#")?this.id():h.hasOwnProperty(a)?h[a](this.s):null};return d};function xk(a,b){this.g=new Z(a,b);this.tb=z();this.zc=!1;this.j=null}r("lf.schema.Builder",xk);function yk(a,b){b.yb.forEach(function(a){var d=a.Sa;if(!this.tb.has(d))throw new E(536,a.name);var d=this.tb.get(d).zb(),e=a.Kc;if(!d.hasOwnProperty(e))throw new E(537,a.name);if(b.zb()[a.vb].H()!=d[e].H())throw new E(538,a.name);if(!d[e].Fc())throw new E(539,a.name);},a)}
xk.prototype.Hf=function(a){a.yb.forEach(function(a){vk(this.tb.get(a.Sa)).forEach(function(c){if(c.vb==a.Kc)throw new E(534,a.name);},this)},this)};function zk(a){a.zc||(a.tb.forEach(function(a){yk(this,a);a=a.zb();this.g.M.set(a.getName(),a)},a),A(a.tb).forEach(a.Hf,a),Ak(a),a.tb.clear(),a.zc=!0)}function Bk(a,b,c){b.xe||(b.xe=!0,b.de=!0,b.Ke.forEach(function(a){a=c.get(a);if(!a.xe)Bk(this,a,c);else if(a.de&&b!=a)throw new E(533);},a));b.de=!1}
function Ak(a){var b=z();a.g.M.forEach(function(a,d){b.set(d,new Ck(d))},a);a.tb.forEach(function(a,d){a.yb.forEach(function(a){b.get(a.Sa).Ke.add(d)})});A(b).forEach(function(a){Bk(this,a,b)},a)}function Ck(a){this.de=this.xe=!1;this.Ke=C();this.Pc=a}xk.prototype.zb=function(){this.zc||zk(this);return this.g};xk.prototype.getSchema=xk.prototype.zb;xk.prototype.Me=function(){var a=new jc("ns_"+this.g.name()),b;fk||(fk=new ek);b=fk;var c=null;b.Xd(a)?c=b.l(a):(c=new ek,b.pb(a,c));return c};
xk.prototype.getGlobal=xk.prototype.Me;xk.prototype.connect=function(a){if(null!==this.j&&this.j.kd)throw new E(113);if(null===this.j){var b=this.Me();b.Xd(qc)||b.pb(qc,this.zb());this.j=new W(b)}return this.j.Ha(a)};xk.prototype.connect=xk.prototype.connect;xk.prototype.Kf=function(a){if(this.tb.has(a))throw new E(503,a);if(this.zc)throw new E(535);this.tb.set(a,new Y(a));return this.tb.get(a)};xk.prototype.createTable=xk.prototype.Kf;
xk.prototype.qe=function(a){if(this.zc)throw new E(535);this.g.qe(a);return this};xk.prototype.setPragma=xk.prototype.qe;function Z(a,b){this.w=a;this.Pa=b;this.M=z();this.hf={Of:!1}}r("lf.schema.DatabaseSchema",Z);Z.prototype.name=g("w");Z.prototype.name=Z.prototype.name;Z.prototype.version=g("Pa");Z.prototype.version=Z.prototype.version;Z.prototype.ra=function(){return A(this.M)};Z.prototype.tables=Z.prototype.ra;Z.prototype.table=function(a){if(!this.M.has(a))throw new E(101,a);return this.M.get(a)};
Z.prototype.table=Z.prototype.table;Z.prototype.info=function(){this.Re||(this.Re=new gk(this));return this.Re};Z.prototype.gf=g("hf");Z.prototype.pragma=Z.prototype.gf;Z.prototype.qe=ba("hf");r("lf.schema.create",function(a,b){return new xk(a,b)});v.prototype.catch=v.prototype.te;v.prototype["catch"]=v.prototype.catch;
try{if(module){module.exports=lf;}}catch(e){}}.bind(window))()
//# sourceMappingURL=lovefield.min.js.map
