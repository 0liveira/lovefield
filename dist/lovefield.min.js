if(!self.window){window=self;}
(function(){'use strict';function aa(){return function(){}}function ba(a){return function(b){this[a]=b}}function g(a){return function(){return this[a]}}function l(a){return function(){return a}}var m,da=this;function n(a){return void 0!==a}function ea(){}
function fa(a){var b=typeof a;if("object"==b)if(a){if(a instanceof Array)return"array";if(a instanceof Object)return b;var c=Object.prototype.toString.call(a);if("[object Window]"==c)return"object";if("[object Array]"==c||"number"==typeof a.length&&"undefined"!=typeof a.splice&&"undefined"!=typeof a.propertyIsEnumerable&&!a.propertyIsEnumerable("splice"))return"array";if("[object Function]"==c||"undefined"!=typeof a.call&&"undefined"!=typeof a.propertyIsEnumerable&&!a.propertyIsEnumerable("call"))return"function"}else return"null";
else if("function"==b&&"undefined"==typeof a.call)return"object";return b}function ga(a){return null!=a}function ha(a){var b=fa(a);return"array"==b||"object"==b&&"number"==typeof a.length}function ia(a){return"string"==typeof a}function ja(a){return"function"==fa(a)}function ka(a){return a[la]||(a[la]=++ma)}var la="closure_uid_"+(1E9*Math.random()>>>0),ma=0;function na(a,b,c){return a.call.apply(a.bind,arguments)}
function oa(a,b,c){if(!a)throw Error();if(2<arguments.length){var d=Array.prototype.slice.call(arguments,2);return function(){var c=Array.prototype.slice.call(arguments);Array.prototype.unshift.apply(c,d);return a.apply(b,c)}}return function(){return a.apply(b,arguments)}}function pa(a,b,c){pa=Function.prototype.bind&&-1!=Function.prototype.bind.toString().indexOf("native code")?na:oa;return pa.apply(null,arguments)}
function qa(a,b){var c=Array.prototype.slice.call(arguments,1);return function(){var b=c.slice();b.push.apply(b,arguments);return a.apply(this,b)}}function q(a,b){a=a.split(".");var c=da;a[0]in c||!c.execScript||c.execScript("var "+a[0]);for(var d;a.length&&(d=a.shift());)!a.length&&n(b)?c[d]=b:c=c[d]?c[d]:c[d]={}}
function r(a,b){function c(){}c.prototype=b.prototype;a.hb=b.prototype;a.prototype=new c;a.prototype.constructor=a;a.Vg=function(a,c,f){for(var d=Array(arguments.length-2),e=2;e<arguments.length;e++)d[e-2]=arguments[e];return b.prototype[c].apply(a,d)}};function ra(a){if(Error.captureStackTrace)Error.captureStackTrace(this,ra);else{var b=Error().stack;b&&(this.stack=b)}a&&(this.message=String(a))}r(ra,Error);ra.prototype.name="CustomError";var ta=String.prototype.trim?function(a){return a.trim()}:function(a){return a.replace(/^[\s\xa0]+|[\s\xa0]+$/g,"")};function ua(a,b){return a<b?-1:a>b?1:0};function va(a,b,c){this.pg=c;this.Of=a;this.Kg=b;this.qd=0;this.fd=null}va.prototype.get=function(){var a;0<this.qd?(this.qd--,a=this.fd,this.fd=a.next,a.next=null):a=this.Of();return a};va.prototype.put=function(a){this.Kg(a);this.qd<this.pg&&(this.qd++,a.next=this.fd,this.fd=a)};var wa=Array.prototype.indexOf?function(a,b,c){return Array.prototype.indexOf.call(a,b,c)}:function(a,b,c){c=null==c?0:0>c?Math.max(0,a.length+c):c;if(ia(a))return ia(b)&&1==b.length?a.indexOf(b,c):-1;for(;c<a.length;c++)if(c in a&&a[c]===b)return c;return-1},xa=Array.prototype.forEach?function(a,b,c){Array.prototype.forEach.call(a,b,c)}:function(a,b,c){for(var d=a.length,e=ia(a)?a.split(""):a,f=0;f<d;f++)f in e&&b.call(c,e[f],f,a)},ya=Array.prototype.map?function(a,b,c){return Array.prototype.map.call(a,
b,c)}:function(a,b,c){for(var d=a.length,e=Array(d),f=ia(a)?a.split(""):a,h=0;h<d;h++)h in f&&(e[h]=b.call(c,f[h],h,a));return e},za=Array.prototype.reduce?function(a,b,c,d){d&&(b=pa(b,d));return Array.prototype.reduce.call(a,b,c)}:function(a,b,c,d){var e=c;xa(a,function(c,h){e=b.call(d,e,c,h,a)});return e},Aa=Array.prototype.some?function(a,b,c){return Array.prototype.some.call(a,b,c)}:function(a,b,c){for(var d=a.length,e=ia(a)?a.split(""):a,f=0;f<d;f++)if(f in e&&b.call(c,e[f],f,a))return!0;return!1};
function Ba(a,b,c){return 2>=arguments.length?Array.prototype.slice.call(a,b):Array.prototype.slice.call(a,b,c)}function Ca(a){for(var b=[],c=0;c<a;c++)b[c]=0;return b}function Da(a){for(var b=[],c=0;c<arguments.length;c++){var d=arguments[c];if("array"==fa(d))for(var e=0;e<d.length;e+=8192)for(var f=Da.apply(null,Ba(d,e,e+8192)),h=0;h<f.length;h++)b.push(f[h]);else b.push(d)}return b};function Ea(a){var b=[],c=0,d;for(d in a)b[c++]=a[d];return b};var Fa;a:{var Ga=da.navigator;if(Ga){var Ha=Ga.userAgent;if(Ha){Fa=Ha;break a}}Fa=""}function t(a){return-1!=Fa.indexOf(a)};function Ia(){return t("Safari")&&!(Ja()||t("Coast")||t("Opera")||t("Edge")||t("Silk")||t("Android"))}function Ja(){return(t("Chrome")||t("CriOS"))&&!t("Edge")};function Ka(a){da.setTimeout(function(){throw a;},0)}var La;
function Na(){var a=da.MessageChannel;"undefined"===typeof a&&"undefined"!==typeof window&&window.postMessage&&window.addEventListener&&!t("Presto")&&(a=function(){var a=document.createElement("IFRAME");a.style.display="none";a.src="";document.documentElement.appendChild(a);var b=a.contentWindow,a=b.document;a.open();a.write("");a.close();var c="callImmediate"+Math.random(),d="file:"==b.location.protocol?"*":b.location.protocol+"//"+b.location.host,a=pa(function(a){if(("*"==d||a.origin==d)&&a.data==
c)this.port1.onmessage()},this);b.addEventListener("message",a,!1);this.port1={};this.port2={postMessage:function(){b.postMessage(c,d)}}});if("undefined"!==typeof a&&!t("Trident")&&!t("MSIE")){var b=new a,c={},d=c;b.port1.onmessage=function(){if(n(c.next)){c=c.next;var a=c.Fe;c.Fe=null;a()}};return function(a){d.next={Fe:a};d=d.next;b.port2.postMessage(0)}}return"undefined"!==typeof document&&"onreadystatechange"in document.createElement("SCRIPT")?function(a){var b=document.createElement("SCRIPT");
b.onreadystatechange=function(){b.onreadystatechange=null;b.parentNode.removeChild(b);b=null;a();a=null};document.documentElement.appendChild(b)}:function(a){da.setTimeout(a,0)}};function Oa(){this.Bd=this.oc=null}var Qa=new va(function(){return new Pa},function(a){a.reset()},100);Oa.prototype.add=function(a,b){var c=Qa.get();c.set(a,b);this.Bd?this.Bd.next=c:this.oc=c;this.Bd=c};Oa.prototype.remove=function(){var a=null;this.oc&&(a=this.oc,this.oc=this.oc.next,this.oc||(this.Bd=null),a.next=null);return a};function Pa(){this.next=this.scope=this.Td=null}Pa.prototype.set=function(a,b){this.Td=a;this.scope=b;this.next=null};
Pa.prototype.reset=function(){this.next=this.scope=this.Td=null};function Ra(a,b){Sa||Ta();Ua||(Sa(),Ua=!0);Va.add(a,b)}var Sa;function Ta(){var a=da.Promise;if(-1!=String(a).indexOf("[native code]")){var b=a.resolve(void 0);Sa=function(){b.then(Wa)}}else Sa=function(){var a=Wa;!ja(da.setImmediate)||da.Window&&da.Window.prototype&&!t("Edge")&&da.Window.prototype.setImmediate==da.setImmediate?(La||(La=Na()),La(a)):da.setImmediate(a)}}var Ua=!1,Va=new Oa;function Wa(){for(var a;a=Va.remove();){try{a.Td.call(a.scope)}catch(b){Ka(b)}Qa.put(a)}Ua=!1};function u(a,b){this.Ta=0;this.nf=void 0;this.Vc=this.dc=this.D=null;this.ed=this.Rd=!1;if(a!=ea)try{var c=this;a.call(b,function(a){Xa(c,2,a)},function(a){Xa(c,3,a)})}catch(d){Xa(this,3,d)}}function Ya(){this.next=this.context=this.ic=this.Ic=this.child=null;this.Ed=!1}Ya.prototype.reset=function(){this.context=this.ic=this.Ic=this.child=null;this.Ed=!1};var Za=new va(function(){return new Ya},function(a){a.reset()},100);function $a(a,b,c){var d=Za.get();d.Ic=a;d.ic=b;d.context=c;return d}
function v(a){if(a instanceof u)return a;var b=new u(ea);Xa(b,2,a);return b}function ab(a){return new u(function(b,c){c(a)})}function bb(a,b,c){cb(a,b,c,null)||Ra(qa(b,a))}function db(a){return new u(function(b,c){var d=a.length,e=[];if(d)for(var f=function(a,c){d--;e[a]=c;0==d&&b(e)},h=function(a){c(a)},k=0,p;k<a.length;k++)p=a[k],bb(p,qa(f,k),h);else b(e)})}function w(){var a,b,c=new u(function(c,e){a=c;b=e});return new eb(c,a,b)}
u.prototype.then=function(a,b,c){return fb(this,ja(a)?a:null,ja(b)?b:null,c)};u.prototype.then=u.prototype.then;u.prototype.$goog_Thenable=!0;u.prototype.ve=function(a,b){return fb(this,null,a,b)};function gb(a,b){a.dc||2!=a.Ta&&3!=a.Ta||hb(a);a.Vc?a.Vc.next=b:a.dc=b;a.Vc=b}
function fb(a,b,c,d){var e=$a(null,null,null);e.child=new u(function(a,h){e.Ic=b?function(c){try{var e=b.call(d,c);a(e)}catch(K){h(K)}}:a;e.ic=c?function(b){try{var e=c.call(d,b);!n(e)&&b instanceof ib?h(b):a(e)}catch(K){h(K)}}:h});e.child.D=a;gb(a,e);return e.child}u.prototype.Qg=function(a){this.Ta=0;Xa(this,2,a)};u.prototype.Rg=function(a){this.Ta=0;Xa(this,3,a)};
function Xa(a,b,c){0==a.Ta&&(a===c&&(b=3,c=new TypeError("Promise cannot resolve to itself")),a.Ta=1,cb(c,a.Qg,a.Rg,a)||(a.nf=c,a.Ta=b,a.D=null,hb(a),3!=b||c instanceof ib||jb(a,c)))}function cb(a,b,c,d){if(a instanceof u)return gb(a,$a(b||ea,c||null,d)),!0;var e;if(a)try{e=!!a.$goog_Thenable}catch(h){e=!1}else e=!1;if(e)return a.then(b,c,d),!0;e=typeof a;if("object"==e&&null!=a||"function"==e)try{var f=a.then;if(ja(f))return kb(a,f,b,c,d),!0}catch(h){return c.call(d,h),!0}return!1}
function kb(a,b,c,d,e){function f(a){k||(k=!0,d.call(e,a))}function h(a){k||(k=!0,c.call(e,a))}var k=!1;try{b.call(a,h,f)}catch(p){f(p)}}function hb(a){a.Rd||(a.Rd=!0,Ra(a.Vf,a))}function lb(a){var b=null;a.dc&&(b=a.dc,a.dc=b.next,b.next=null);a.dc||(a.Vc=null);return b}
u.prototype.Vf=function(){for(var a;a=lb(this);){var b=this.Ta,c=this.nf;if(3==b&&a.ic&&!a.Ed){var d;for(d=this;d&&d.ed;d=d.D)d.ed=!1}if(a.child)a.child.D=null,mb(a,b,c);else try{a.Ed?a.Ic.call(a.context):mb(a,b,c)}catch(e){nb.call(null,e)}Za.put(a)}this.Rd=!1};function mb(a,b,c){2==b?a.Ic.call(a.context,c):a.ic&&a.ic.call(a.context,c)}function jb(a,b){a.ed=!0;Ra(function(){a.ed&&nb.call(null,b)})}var nb=Ka;function ib(a){ra.call(this,a)}r(ib,ra);ib.prototype.name="cancel";
function eb(a,b,c){this.ha=a;this.resolve=b;this.reject=c};function ob(a,b,c,d){c=c||function(a,b){return a==b};d=d||function(b){return a[b]};for(var e=a.length,f=b.length,h=[],k=0;k<e+1;k++)h[k]=[],h[k][0]=0;for(var p=0;p<f+1;p++)h[0][p]=0;for(k=1;k<=e;k++)for(p=1;p<=f;p++)c(a[k-1],b[p-1])?h[k][p]=h[k-1][p-1]+1:h[k][p]=Math.max(h[k-1][p],h[k][p-1]);for(var K=[],k=e,p=f;0<k&&0<p;)c(a[k-1],b[p-1])?(K.unshift(d(k-1,p-1)),k--,p--):h[k-1][p]>h[k][p-1]?k--:p--;return K}function pb(a){return za(arguments,function(a,c){return a+c},0)}
function qb(a){return pb.apply(null,arguments)/arguments.length}function rb(a){var b=arguments.length;if(2>b)return 0;var c=qb.apply(null,arguments);return pb.apply(null,ya(arguments,function(a){return Math.pow(a-c,2)}))/(b-1)}function sb(a){return Math.sqrt(rb.apply(null,arguments))};var tb="StopIteration"in da?da.StopIteration:{message:"StopIteration",stack:""};function ub(){}ub.prototype.next=function(){throw tb;};ub.prototype.pc=function(){return this};function vb(a){if(a instanceof ub)return a;if("function"==typeof a.pc)return a.pc(!1);if(ha(a)){var b=0,c=new ub;c.next=function(){for(;;){if(b>=a.length)throw tb;if(b in a)return a[b++];b++}};return c}throw Error("Not implemented");}
function wb(a,b){if(ha(a))try{xa(a,b,void 0)}catch(c){if(c!==tb)throw c;}else{a=vb(a);try{for(;;)b.call(void 0,a.next(),void 0,a)}catch(c){if(c!==tb)throw c;}}}function xb(a){if(Aa(arguments,function(a){return!a.length})||!arguments.length)return new ub;var b=new ub,c=arguments,d=Ca(c.length);b.next=function(){if(d){for(var a=ya(d,function(a,b){return c[b][a]}),b=d.length-1;0<=b;b--){if(d[b]<c[b].length-1){d[b]++;break}if(0==b){d=null;break}d[b]=0}return a}throw tb;};return b};function yb(a,b){this.l={};this.a=[];this.Ua=this.Eb=0;var c=arguments.length;if(1<c){if(c%2)throw Error("Uneven number of arguments");for(var d=0;d<c;d+=2)this.set(arguments[d],arguments[d+1])}else a&&this.addAll(a)}m=yb.prototype;m.zc=g("Eb");m.qa=function(){zb(this);for(var a=[],b=0;b<this.a.length;b++)a.push(this.l[this.a[b]]);return a};function Ab(a){zb(a);return a.a.concat()}m.Pa=function(a){return Bb(this.l,a)};m.jd=function(){return 0==this.Eb};
m.clear=function(){this.l={};this.Ua=this.Eb=this.a.length=0};m.remove=function(a){return Bb(this.l,a)?(delete this.l[a],this.Eb--,this.Ua++,this.a.length>2*this.Eb&&zb(this),!0):!1};function zb(a){if(a.Eb!=a.a.length){for(var b=0,c=0;b<a.a.length;){var d=a.a[b];Bb(a.l,d)&&(a.a[c++]=d);b++}a.a.length=c}if(a.Eb!=a.a.length){for(var e={},c=b=0;b<a.a.length;)d=a.a[b],Bb(e,d)||(a.a[c++]=d,e[d]=1),b++;a.a.length=c}}m.get=function(a,b){return Bb(this.l,a)?this.l[a]:b};
m.set=function(a,b){Bb(this.l,a)||(this.Eb++,this.a.push(a),this.Ua++);this.l[a]=b};m.addAll=function(a){var b;if(a instanceof yb)b=Ab(a),a=a.qa();else{b=[];var c=0,d;for(d in a)b[c++]=d;a=Ea(a)}for(c=0;c<b.length;c++)this.set(b[c],a[c])};m.forEach=function(a,b){for(var c=Ab(this),d=0;d<c.length;d++){var e=c[d],f=this.get(e);a.call(b,f,e,this)}};m.clone=function(){return new yb(this)};
m.pc=function(a){zb(this);var b=0,c=this.Ua,d=this,e=new ub;e.next=function(){if(c!=d.Ua)throw Error("The map has changed since the iterator was created");if(b>=d.a.length)throw tb;var e=d.a[b++];return a?e:d.l[e]};return e};function Bb(a,b){return Object.prototype.hasOwnProperty.call(a,b)};function Eb(a,b){var c=Fb;return Object.prototype.hasOwnProperty.call(c,a)?c[a]:c[a]=b(a)};var Gb=t("Opera"),Hb=t("Trident")||t("MSIE"),Ib=t("Edge"),Jb=t("Gecko")&&!(-1!=Fa.toLowerCase().indexOf("webkit")&&!t("Edge"))&&!(t("Trident")||t("MSIE"))&&!t("Edge"),Kb=-1!=Fa.toLowerCase().indexOf("webkit")&&!t("Edge"),Lb;
a:{var Mb="",Nb=function(){var a=Fa;if(Jb)return/rv\:([^\);]+)(\)|;)/.exec(a);if(Ib)return/Edge\/([\d\.]+)/.exec(a);if(Hb)return/\b(?:MSIE|rv)[: ]([^\);]+)(\)|;)/.exec(a);if(Kb)return/WebKit\/(\S+)/.exec(a);if(Gb)return/(?:Version)[ \/]?(\S+)/.exec(a)}();Nb&&(Mb=Nb?Nb[1]:"");if(Hb){var Ob,Pb=da.document;Ob=Pb?Pb.documentMode:void 0;if(null!=Ob&&Ob>parseFloat(Mb)){Lb=String(Ob);break a}}Lb=Mb}var Qb=Lb,Fb={};
function Rb(a){return Eb(a,function(){for(var b=0,c=ta(String(Qb)).split("."),d=ta(String(a)).split("."),e=Math.max(c.length,d.length),f=0;0==b&&f<e;f++){var h=c[f]||"",k=d[f]||"";do{h=/(\d*)(\D*)(.*)/.exec(h)||["","","",""];k=/(\d*)(\D*)(.*)/.exec(k)||["","","",""];if(0==h[0].length&&0==k[0].length)break;b=ua(0==h[1].length?0:parseInt(h[1],10),0==k[1].length?0:parseInt(k[1],10))||ua(0==h[2].length,0==k[2].length)||ua(h[2],k[2]);h=h[3];k=k[3]}while(0==b)}return 0<=b})};var Sb=t("iPhone")&&!t("iPod")&&!t("iPad")||t("iPod"),Tb=t("iPad");/*

 Copyright 2015 The Lovefield Project Authors. All Rights Reserved.

 Licensed under the Apache License, Version 2.0 (the "License");
 you may not use this file except in compliance with the License.
 You may obtain a copy of the License at

     http://www.apache.org/licenses/LICENSE-2.0

 Unless required by applicable law or agreed to in writing, software
 distributed under the License is distributed on an "AS IS" BASIS,
 WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 See the License for the specific language governing permissions and
 limitations under the License.
*/
function Ub(){this.pe=Ia()||Tb||Sb;this.fg=!(this.pe||Hb&&!Rb(10));!Hb||Rb(11);this.Ug=Ja()||Ia();this.ug=n(window.Map)&&n(window.Map.prototype.values)&&n(window.Map.prototype.forEach)&&!this.pe;this.vg=n(window.Set)&&n(window.Set.prototype.values)&&n(window.Set.prototype.forEach)&&!this.pe}var Vb;function Wb(){n(Vb)||(Vb=new Ub);return Vb};function x(){this.l=new yb;Object.defineProperty(this,"size",{get:function(){return this.l.zc()}})}x.prototype.clear=function(){this.l.clear()};x.prototype.clear=x.prototype.clear;x.prototype.delete=function(a){return this.l.remove(a)};x.prototype["delete"]=x.prototype.delete;x.prototype.forEach=function(a,b){return this.l.forEach(a,b)};x.prototype.forEach=x.prototype.forEach;x.prototype.get=function(a){return this.l.get(a)};x.prototype.get=x.prototype.get;x.prototype.has=function(a){return this.l.Pa(a)};
x.prototype.has=x.prototype.has;x.prototype.set=function(a,b){return this.l.set(a,b)};x.prototype.set=x.prototype.set;var Xb=Wb().ug;function y(){return Xb?new window.Map:new x}function Yb(a){if(a instanceof x)return Ab(a.l);var b=0,c=Array(a.size);a.forEach(function(a,e){c[b++]=e});return c}function z(a){if(a instanceof x)return a.l.qa();var b=0,c=Array(a.size);a.forEach(function(a){c[b++]=a});return c};/*

 Copyright 2014 The Lovefield Project Authors. All Rights Reserved.

 Licensed under the Apache License, Version 2.0 (the "License");
 you may not use this file except in compliance with the License.
 You may obtain a copy of the License at

     http://www.apache.org/licenses/LICENSE-2.0

 Unless required by applicable law or agreed to in writing, software
 distributed under the License is distributed on an "AS IS" BASIS,
 WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 See the License for the specific language governing permissions and
 limitations under the License.
*/
function Zb(a,b){this.sa=a;this.m=b||this.Ke()}var $b=0;m=Zb.prototype;m.id=g("sa");m.Ke=function(){return{}};m.wf=g("m");m.Ja=function(){return{id:this.sa,value:this.wf()}};m.nb=function(a){return"#"==a.substr(-1)?this.sa:null};function ac(a){return new Zb(a.id,a.value)}function bc(a){return new Zb($b++,a||{})}function cc(a){if(null==a)return null;a=new Uint8Array(a);for(var b="",c=0;c<a.length;++c)var d=a[c].toString(16),b=b+(2>d.length?"0"+d:d);return b};var dc={};q("lf.TransactionType",dc);dc.READ_ONLY=0;dc.READ_WRITE=1;function A(a,b,c,d,e){this.wd=a;this.jg=b;this.Tg=c;this.Qf=d;this.Jf=e}q("lf.TransactionStats",A);A.prototype.Og=g("wd");A.prototype.success=A.prototype.Og;A.prototype.ig=g("jg");A.prototype.insertedRowCount=A.prototype.ig;A.prototype.Sg=g("Tg");A.prototype.updatedRowCount=A.prototype.Sg;A.prototype.Pf=g("Qf");A.prototype.deletedRowCount=A.prototype.Pf;A.prototype.If=g("Jf");A.prototype.changedTableCount=A.prototype.If;function ec(a,b){this.yd=a;this.Ra=b||null;this.S=w();this.wd=!1;this.za=null}ec.prototype.ka=function(){return(0==this.yd?this.sc():fc(this)).then(function(a){this.wd=!0;return a}.bind(this))};function fc(a){try{gc(a.Ra)}catch(b){return ab(b)}return hc(a).then(function(a){this.Ra.ka();return a}.bind(a))}function hc(a){ic(a);jc(a);return a.sc()}
function ic(a){a.Ra.ib.forEach(function(a,c){c=this.Ra.da().get(c);c=this.H(c.getName(),c.kb.bind(c),0);var b=z(a.xa).map(function(a){return a.id()});0<b.length&&c.remove(b).ve(this.Te,this);a=z(a.la).map(function(a){return a[1]}).concat(z(a.wa));c.put(a).ve(this.Te,this)},a)}function jc(a){kc(a.Ra).forEach(function(a){var b=this.H(a.getName(),ac,1);b.remove([]);b.put(a.Ja())},a)}ec.prototype.Te=function(a){this.S.reject(a)};
ec.prototype.Y=function(){if(null===this.za)if(this.wd)if(0==this.yd)this.za=new A(!0,0,0,0,0);else{var a=0,b=0,c=0,d=0;this.Ra.ib.forEach(function(e){d++;a+=e.wa.size;c+=e.la.size;b+=e.xa.size});this.za=new A(!0,a,c,b,d)}else this.za=new A(!1,0,0,0,0);return this.za};function lc(a){this.Lg=a}lc.prototype.toString=g("Lg");var mc=new lc("backstore"),nc=new lc("cache"),oc=new lc("indexstore"),pc=new lc("engine"),qc=new lc("runner"),rc=new lc("observerregistry"),sc=new lc("schema");function tc(a){if(a.qa&&"function"==typeof a.qa)return a.qa();if(ia(a))return a.split("");if(ha(a)){for(var b=[],c=a.length,d=0;d<c;d++)b.push(a[d]);return b}return Ea(a)};function uc(a){this.l=new yb;a&&this.addAll(a)}function vc(a){var b=typeof a;return"object"==b&&a||"function"==b?"o"+ka(a):b.substr(0,1)+a}m=uc.prototype;m.zc=function(){return this.l.zc()};m.add=function(a){this.l.set(vc(a),a)};m.addAll=function(a){a=tc(a);for(var b=a.length,c=0;c<b;c++)this.add(a[c])};m.remove=function(a){return this.l.remove(vc(a))};m.clear=function(){this.l.clear()};m.jd=function(){return this.l.jd()};m.contains=function(a){return this.l.Pa(vc(a))};m.qa=function(){return this.l.qa()};
m.clone=function(){return new uc(this)};m.pc=function(){return this.l.pc(!1)};function wc(a){this.Xb=new uc(a);Object.defineProperty(this,"size",{get:function(){return this.Xb.zc()}})}wc.prototype.add=function(a){this.Xb.add(a)};wc.prototype.add=wc.prototype.add;wc.prototype.clear=function(){this.Xb.clear()};wc.prototype.clear=wc.prototype.clear;wc.prototype.delete=function(a){return this.Xb.remove(a)};wc.prototype["delete"]=wc.prototype.delete;wc.prototype.forEach=function(a,b){this.Xb.qa().forEach(a,b)};wc.prototype.has=function(a){return this.Xb.contains(a)};
wc.prototype.has=wc.prototype.has;var xc=Wb().vg;function B(a){return xc?n(a)?new window.Set(a):new window.Set:new wc(a)}function C(a){if(a instanceof wc)return a.Xb.qa();var b=0,c=Array(a.size);a.forEach(function(a){c[b++]=a});return c}function yc(a,b){if(b.size>a.size)return!1;var c=!0;b.forEach(function(b){c=c&&a.has(b)});return c};function zc(a,b){this.sa=a;this.m=b||{}}function Ac(a){var b=B();a.forEach(function(a){b.add(a>>9)});return C(b)}zc.prototype.W=g("sa");function Bc(a,b){b.forEach(function(a){this.m[a.id()]=a.Ja()},a)}function Cc(a,b){b.forEach(function(a){delete this.m[a]},a)}zc.prototype.Ja=function(){return{id:this.sa,value:JSON.stringify(this.m)}};function Dc(a){return new zc(a.id,JSON.parse(a.value))};function Ec(a,b,c){this.Z=a;this.Gb=b;this.pf=c}m=Ec.prototype;m.get=function(a){if(0==a.length)return this.Vd();var b=this.Gb;return Fc(this,a).then(function(c){return a.map(function(a){var d=c.get(a>>9);return b(d.m[a])})})};function Fc(a,b){var c=y(),d=w();a=Ac(b).map(function(a){return new u(function(b,d){var e;try{e=this.Z.get(a)}catch(p){d(p);return}e.onerror=d;e.onsuccess=function(a){a=Dc(a.target.result);c.set(a.W(),a);b()}},this)},a);db(a).then(function(){d.resolve(c)});return d.ha}
m.Vd=function(){return new u(function(a,b){var c=[],d;try{d=this.Z.openCursor()}catch(e){b(e);return}d.onerror=b;d.onsuccess=function(){var b=d.result;if(b){var f=Dc(b.value).m,h;for(h in f)c.push(this.Gb(f[h]));b.continue()}else a(c)}.bind(this)},this)};m.Tb=function(a){return new u(function(b,c){var d;try{d=a()}catch(e){c(e);return}d.onsuccess=b;d.onerror=c},this)};
m.put=function(a){if(0==a.length)return v();var b=y();a.forEach(function(a){var c=a.id()>>9,e=b.get(c)||null;null===e&&(e=this.pf(this.Z.name,c));Bc(e,[a]);b.set(c,e)},this);a=z(b).map(function(a){return this.Tb(function(){return this.Z.put(a.Ja())}.bind(this))},this);return db(a)};
m.remove=function(a){if(0==a.length)return this.Tb(function(){return this.Z.clear()}.bind(this));var b=y();a.forEach(function(a){var c=a>>9,e=b.get(c)||null;null===e&&(e=this.pf(this.Z.name,c));Cc(e,[a]);b.set(c,e)},this);a=z(b).map(function(a){return this.Tb(function(){return 0==Object.keys(a.m).length?this.Z.delete(a.W()):this.Z.put(a.Ja())}.bind(this))},this);return db(a)};function Gc(a,b,c){a=a.b(nc);var d=[c<<9,(c+1<<9)-1];b=a.Va(b,d[0],d[1]);c=new zc(c);Bc(c,b);return c}
function Hc(a,b){return new zc(b)};function Ic(a){this.V=a.b(nc);this.C=a.b(oc);this.g=a.b(sc)}Ic.prototype.update=function(a){a.forEach(function(a){Jc(this,a);Kc(this,a)},this)};function Kc(a,b){var c=b.getName();b.xa.forEach(function(a,b){this.V.remove(c,b)},a);b.wa.forEach(function(a){this.V.set(c,a)},a);b.la.forEach(function(a){this.V.set(c,a[1])},a)}function Jc(a,b){var c=a.g.table(b.getName());Lc(b).forEach(function(a){Mc(this,c,a)},a)}
function Mc(a,b,c){var d=a.C.lc.get(b.getName())||[],e=0;d.forEach(function(a){try{Nc(a,c),e++}catch(h){throw d.slice(0,e).forEach(function(a){Nc(a,[c[1],c[0]])},this),h;}},a)}function Nc(a,b){var c=null===b[1]?void 0:b[1].nb(a.getName()),d=null===b[0]?void 0:b[0].nb(a.getName());if(!n(d)&&n(c))a.add(c,b[1].id());else if(n(d)&&n(c)){if(null===c||null===d){if(c==d)return}else if(0==a.jb().compare(d,c))return;a.add(c,b[1].id());a.remove(d,b[0].id())}else n(d)&&!n(c)&&a.remove(d,b[0].id())};var Oc={};q("lf.ConstraintAction",Oc);Oc.RESTRICT=0;Oc.CASCADE=1;var Pc={};q("lf.ConstraintTiming",Pc);Pc.IMMEDIATE=0;Pc.DEFERRABLE=1;var Qc={};q("lf.Order",Qc);Qc.DESC=0;Qc.ASC=1;var Rc={};q("lf.Type",Rc);Rc.ARRAY_BUFFER=0;Rc.BOOLEAN=1;Rc.DATE_TIME=2;Rc.INTEGER=3;Rc.NUMBER=4;Rc.STRING=5;Rc.OBJECT=6;var Sc={0:null,1:!1,2:Object.freeze(new Date(0)),3:0,4:0,5:"",6:null};q("lf.type.DEFAULT_VALUES",Sc);function D(a,b){this.code=a;this.message="http://google.github.io/lovefield/error_lookup/src/error_lookup.html?c="+a;if(1<arguments.length)for(var c=1;c<=Math.min(4,arguments.length-1);++c)this.message+="&p"+(c-1)+"="+encodeURIComponent(String(arguments[c]).slice(0,64))}r(D,Error);function Uc(){this.l=y();this.size=0}m=Uc.prototype;m.has=function(a){return this.l.has(a)};m.set=function(a,b){var c=this.l.get(a)||null;null===c&&(c=B(),this.l.set(a,c));c.has(b)||(c.add(b),this.size++);return this};m.Wb=function(a,b){var c=this.l.get(a)||null;null===c&&(c=B(),this.l.set(a,c));b.forEach(function(a){c.has(a)||(c.add(a),this.size++)},this);return this};m.ae=function(a){a.keys().forEach(function(b){var c=a.get(b);this.Wb(b,c)},this);return this};
m.delete=function(a,b){var c=this.l.get(a)||null;if(null===c)return!1;if(b=c.delete(b))--this.size,0==c.size&&this.l.delete(a);return b};m.get=function(a){a=this.l.get(a)||null;return null===a?null:C(a)};m.clear=function(){this.l.clear();this.size=0};m.keys=function(){return Yb(this.l)};m.values=function(){var a=[];this.l.forEach(function(b){a.push.apply(a,C(b))});return a};function Vc(a){this.C=a.b(oc);this.g=a.b(sc);this.V=a.b(nc);this.$c=null}function Wc(a,b,c){var d=b.Mb.xg;c.forEach(function(a){d.forEach(function(b){if(null==a.m[b.getName()])throw new D(202,b.j());},this)},a)}function Xc(a,b,c,d){b.Mb.Ud.forEach(function(a){a.timing==d&&Yc(this,a,c)},a)}function Yc(a,b,c){var d=Zc(a,b);c.forEach(function(a){if($c(a[0],a[1],b.name)&&(a=a[1].nb(b.name),null!==a&&!d.Pa(a)))throw new D(203,b.name);},a)}
function Zc(a,b){null===a.$c&&(a.$c=y());var c=a.$c.get(b.name)||null;null===c&&(c=a.g.table(b.Xa)[b.Jc].Ca(),c=a.C.get(c.j()),a.$c.set(b.name,c));return c}function $c(a,b,c){return(null===a?null!==b:null===b)||a.nb(c)!=b.nb(c)}function ad(a,b,c,d){b=bd(a.g.info(),b.getName(),0);null!==b&&(b=b.filter(function(a){return a.timing==d}),0!=b.length&&cd(a,b,c,function(a,b,c){if(b.Pa(c))throw new D(203,a.name);}))}
function dd(a,b,c){b=bd(a.g.info(),b.getName(),1);if(null===b)return null;var d=new Uc;cd(a,b,c,function(a,b,c){b=b.get(c);0<b.length&&d.Wb(a.Ge,b)});return d}function ed(a,b,c){var d=new Uc;cd(a,c,b,function(a,b,c,k){b.get(c).forEach(function(b){d.set(b,{Sd:a,Cg:k[1]})})});return d}function cd(a,b,c,d){b.forEach(function(a){var b=this.C.get(a.name),e=Zc(this,a);c.forEach(function(c){if($c(c[0],c[1],e.getName())){var f=c[0].nb(e.getName());d(a,b,f,c)}},this)},a)}
function fd(a,b,c,d){0!=c.length&&(c=c.map(function(a){return[null,a]}),Xc(a,b,c,d))}function gd(a,b,c,d){0!=c.length&&(Xc(a,b,c,d),ad(a,b,c,d))}function hd(a,b,c,d){0!=c.length&&(c=c.map(function(a){return[a,null]}),ad(a,b,c,d))}
function id(a,b,c){var d={ue:[],rf:new Uc},e=new Uc;e.Wb(b.getName(),c.map(function(a){return a.id()}));do{var f=new Uc;e.keys().forEach(function(a){var b=this.g.table(a);a=e.get(a).map(function(a){return[this.V.get(a),null]},this);b=dd(this,b,a);null!==b&&(d.ue.unshift.apply(d.ue,b.keys()),f.ae(b))},a);e=f;d.rf.ae(e)}while(0<e.size);return d};function jd(a){this.wa=y();this.la=y();this.xa=y();this.A=a}m=jd.prototype;m.getName=g("A");m.add=function(a){if(this.xa.has(a.id())){var b=[this.xa.get(a.id()),a];this.la.set(a.id(),b);this.xa.delete(a.id())}else this.wa.set(a.id(),a)};m.modify=function(a){var b=a[1],c=a[0].id();this.wa.has(c)?this.wa.set(c,b):(this.la.has(c)&&(a=[this.la.get(a[0].id())[0],b]),this.la.set(c,a))};
m.delete=function(a){if(this.wa.has(a.id()))this.wa.delete(a.id());else if(this.la.has(a.id())){var b=this.la.get(a.id())[0];this.la.delete(a.id());this.xa.set(a.id(),b)}else this.xa.set(a.id(),a)};m.ae=function(a){a.wa.forEach(function(a){this.add(a)},this);a.la.forEach(function(a){this.modify(a)},this);a.xa.forEach(function(a){this.delete(a)},this)};
function Lc(a){var b=[];a.wa.forEach(function(a){b.push([null,a])});a.la.forEach(function(a){b.push(a)});a.xa.forEach(function(a){b.push([a,null])});return b}m.toString=function(){return"["+Yb(this.wa).toString()+"], ["+Yb(this.la).toString()+"], ["+Yb(this.xa).toString()+"]"};function kd(a){var b=new jd(a.A);a.wa.forEach(function(a){b.delete(a)});a.xa.forEach(function(a){b.add(a)});a.la.forEach(function(a){b.modify([a[1],a[0]])});return b}
m.jd=function(){return 0==this.wa.size&&0==this.xa.size&&0==this.la.size};function ld(a,b){this.aa=y();b.forEach(function(a){this.aa.set(a.getName(),a)},this);this.g=a.b(sc);this.V=a.b(nc);this.C=a.b(oc);this.Aa=new Vc(a);this.gd=new Ic(a);this.ib=y()}function kc(a){var b=[];Yb(a.ib).map(function(a){return this.aa.get(a)},a).forEach(function(a){a.Cb()&&(a.Da().forEach(function(a){b.push(this.C.get(a.j()))},this),b.push(this.C.get(a.getName()+".#")))},a);return b}m=ld.prototype;m.da=g("aa");
m.Ab=function(a,b){md(this,a);Wc(this.Aa,a,b);fd(this.Aa,a,b,0);for(var c=0;c<b.length;c++)nd(this,a,[null,b[c]])};function nd(a,b,c){var d=b.getName(),e=a.ib.get(d)||new jd(d);a.ib.set(d,e);try{Mc(a.gd,b,c)}catch(h){throw h;}b=c[0];var f=c[1];null===b&&null!==f?(a.V.set(d,f),e.add(f)):null!==b&&null!==f?(a.V.set(d,f),e.modify(c)):null!==b&&null===f&&(a.V.remove(d,b.id()),e.delete(b))}
m.update=function(a,b){md(this,a);Wc(this.Aa,a,b);b=b.map(function(a){return[this.V.get(a.id()),a]},this);od(this,a,b);gd(this.Aa,a,b,0);b.forEach(function(b){nd(this,a,b)},this)};m.Wd=function(a,b){md(this,a);Wc(this.Aa,a,b);for(var c=0;c<b.length;c++){var d=b[c],e=null,f,h=a.Mb.sd;if(null===h)f=null;else{f=this.Aa;var h=h.j(),k=d.nb(h);f=f.C.get(h).get(k);f=0==f.length?null:f[0]}null!=f?(e=this.V.get(f),d.sa=f,gd(this.Aa,a,[[e,d]],0)):fd(this.Aa,a,[d],0);nd(this,a,[e,d])}};
m.remove=function(a,b){md(this,a);pd(this,a,b);hd(this.Aa,a,b,0);for(var c=0;c<b.length;c++)nd(this,a,[b[c],null])};function od(a,b,c){b=bd(a.g.info(),b.getName(),1);if(null!==b){var d=ed(a.Aa,c,b);d.keys().forEach(function(a){d.get(a).forEach(function(b){var c=this.g.table(b.Sd.Ge),d=this.V.get(a),e=c.kb(d.Ja());e.m[b.Sd.vb]=b.Cg.m[b.Sd.Jc];nd(this,c,[d,e])},this)},a)}}
function pd(a,b,c){if(null!==bd(a.g.info(),b.getName(),1)){b=id(a.Aa,b,c);var d=b.rf;b.ue.forEach(function(a){var b=this.g.table(a);a=d.get(a).map(function(a){return this.V.get(a)},this);hd(this.Aa,b,a,0);a.forEach(function(a){nd(this,b,[a,null])},this)},a)}}function gc(a){a.ib.forEach(function(a){var b=this.aa.get(a.getName());fd(this.Aa,b,z(a.wa),1);hd(this.Aa,b,z(a.xa),1);gd(this.Aa,b,z(a.la),1)},a)}m.ka=aa();m.Jb=function(){var a=z(this.ib).map(function(a){return kd(a)});this.gd.update(a)};
function md(a,b){if(!a.aa.has(b.getName()))throw new D(106,b.getName());};function E(a,b,c,d){this.from=a;this.o=b;this.ea=this.from==F?!1:c;this.na=this.o==F?!1:d}var F=new (aa());E.prototype.toString=function(){return(this.ea?"(":"[")+(this.from==F?"unbound":this.from)+", "+(this.o==F?"unbound":this.o)+(this.na?")":"]")};function qd(a){if(rd(a))return[];var b=null,c=null;a.from==F||(b=new E(F,a.from,!1,!a.ea));a.o==F||(c=new E(a.o,F,!a.na,!1));return[b,c].filter(function(a){return null!==a})}E.prototype.reverse=function(){return new E(this.o,this.from,this.na,this.ea)};
function sd(a,b){var c=td(a.from,b.from,!0,a.ea,b.ea);if(0==c)return!0;var d=-1==c?a:b;a=1==c?a:b;return d.o==F||d.o>a.from||d.o==a.from&&!d.na&&!a.ea}function ud(){return new E(F,F,!1,!1)}function rd(a){return a.from==F&&a.o==F}function vd(a){return a.from==a.o&&a.from!=F&&!a.ea&&!a.na}E.prototype.contains=function(a){var b=this.o==F||a<this.o||a==this.o&&!this.na;return(this.from==F||a>this.from||a==this.from&&!this.ea)&&b};
function td(a,b,c,d,e){function f(a){return c?a:1==a?-1:1}d=d||!1;e=e||!1;return a==F?b==F?(d?!e:e)?d?f(1):f(-1):0:f(-1):b==F?f(1):a<b?-1:a==b?(d?!e:e)?d?f(1):f(-1):0:1}function wd(a,b){var c=td(a.from,b.from,!0,a.ea,b.ea);0==c&&(c=td(a.o,b.o,!1,a.na,b.na));return c}function xd(a){if(0==a.length)return[];a.sort(wd);for(var b=Array(a.length+1),c=0;c<b.length;c++)b[c]=0==c?new E(F,a[c].from,!1,!0):c==b.length-1?new E(a[c-1].o,F,!0,!1):new E(a[c-1].o,a[c].from,!0,!0);return b};function yd(a){this.kc=[];n(a)&&this.add(a)}yd.prototype.toString=function(){return this.kc.map(function(a){return a.toString()}).join(",")};yd.prototype.Pa=function(a){return this.kc.some(function(b){return b.contains(a)})};yd.prototype.qa=g("kc");
yd.prototype.add=function(a){if(0!=a.length)if(a=this.kc.concat(a),1==a.length)this.kc=a;else{a.sort(wd);for(var b=[],c=a[0],d=1;d<a.length;++d)if(sd(c,a[d])){var e=a[d],f=ud();if(c.from!=F&&e.from!=F){var h=td(c.from,e.from,!0);1!=h?(f.from=c.from,f.ea=0!=h?c.ea:c.ea&&e.ea):(f.from=e.from,f.ea=e.ea)}c.o!=F&&e.o!=F&&(h=td(c.o,e.o,!1),-1!=h?(f.o=c.o,f.na=0!=h?c.na:c.na&&e.na):(f.o=e.o,f.na=e.na));c=f}else b.push(c),c=a[d];b.push(c);this.kc=b}};
function zd(a,b){var c=[];a.qa().map(function(a){return b.qa().map(function(b){var c;if(sd(a,b)){c=ud();var d=td(a.from,b.from,!0),d=0==d?a.ea?a:b:-1!=d?a:b;c.from=d.from;c.ea=d.ea;a.o==F||b.o==F?b=a.o==F?b:a:(d=td(a.o,b.o,!1),b=0==d?a.na?a:b:-1==d?a:b);c.o=b.o;c.na=b.na}else c=null;return c})}).forEach(function(a){c=c.concat(a)});return new yd(c.filter(function(a){return null!==a}))};function G(a,b){this.entries=a;this.M=B(b);this.$a=null}G.prototype.u=function(){return C(this.M)};function Ad(a){return a.entries.map(function(a){return a.va.m})}function Bd(a){return a.entries.map(function(a){return a.va.id()})}function Cd(a,b){return a.$a.get(b.j())}var Dd=null;function Ed(){null===Dd&&(Dd=new G([],[]));return Dd}
function Fd(a){if(0==a.length)return Ed();for(var b=a.reduce(function(a,b){return a+b.entries.length},0),c=Array(b),d=0,b=a.map(function(a){var b=y();a.entries.forEach(function(a){c[d++]=a;b.set(a.id,a)});return b}),e=y(),f=0;f<c.length;f++)b.every(function(a){return a.has(c[f].id)})&&e.set(c[f].id,c[f]);return new G(z(e),C(a[0].M))}function Gd(a){if(0==a.length)return Ed();var b=y();a.forEach(function(a){a.entries.forEach(function(a){b.set(a.id,a)})});return new G(z(b),C(a[0].M))}
function Hd(a,b){var c=1<b.length;a=a.map(function(a){return new Id(a,c)});return new G(a,b)}function Id(a,b){this.va=a;this.id=Jd++;this.Yd=b}var Jd=0;function H(a,b){var c=b.Ka;return null!==c&&a.va.m.hasOwnProperty(c)?a.va.m[c]:a.Yd?a.va.m[Kd(b.H())][b.getName()]:a.va.m[b.getName()]}function Ld(a,b,c){var d=b.Ka;if(null!=d)a.va.m[d]=c;else if(a.Yd){var d=Kd(b.H()),e=a.va.m[d];null==e&&(e={},a.va.m[d]=e);e[b.getName()]=c}else a.va.m[b.getName()]=c}
function Md(a,b,c,d){function e(a,b){if(a.Yd){a=a.va.m;for(var c in a)f[c]=a[c]}else f[b[0]]=a.va.m}var f={};e(a,b);e(c,d);a=new Zb(-1,f);return new Id(a,!0)};q("lf.bind",function(a){return new Nd(a)});function Nd(a){this.fa=a}q("lf.Binder",Nd);Nd.prototype.Ca=g("fa");function Od(){this.Ze=Pd();var a=Qd();this.Ob=y();this.Ob.set(1,Rd());this.Ob.set(2,Sd());this.Ob.set(4,a);this.Ob.set(3,a);this.Ob.set(5,Td());this.Ob.set(6,Ud())}var Vd;function Wd(){null!=Vd||(Vd=new Od);return Vd}function Xd(a,b,c){a=a.Ob.get(b)||null;if(null===a)throw new D(550);c=a.get(c)||null;if(null===c)throw new D(550);return c}
function Pd(){function a(a){return a}var b=y();b.set(1,function(a){return null===a?null:a?1:0});b.set(2,function(a){return null===a?null:a.getTime()});b.set(3,a);b.set(4,a);b.set(5,a);return b}function Rd(){var a=y();a.set("eq",function(a,c){return a==c});a.set("neq",function(a,c){return a!=c});return a}
function Qd(){var a=Rd();a.set("between",function(a,c){return null===a||null===c[0]||null===c[1]?!1:a>=c[0]&&a<=c[1]});a.set("gte",function(a,c){return null===a||null===c?!1:a>=c});a.set("gt",function(a,c){return null===a||null===c?!1:a>c});a.set("in",function(a,c){return-1!=c.indexOf(a)});a.set("lte",function(a,c){return null===a||null===c?!1:a<=c});a.set("lt",function(a,c){return null===a||null===c?!1:a<c});return a}
function Td(){var a=Qd();a.set("match",function(a,c){return null===a||null===c?!1:(new RegExp(c)).test(a)});return a}function Ud(){var a=y();a.set("eq",function(a,c){if(null!==c)throw new D(550);return null===a});a.set("neq",function(a,c){if(null!==c)throw new D(550);return null!==a});return a}
function Sd(){var a=y();a.set("between",function(a,c){return null===a||null===c[0]||null===c[1]?!1:a.getTime()>=c[0].getTime()&&a.getTime()<=c[1].getTime()});a.set("eq",function(a,c){return(null===a?-1:a.getTime())==(null===c?-1:c.getTime())});a.set("gte",function(a,c){return null===a||null===c?!1:a.getTime()>=c.getTime()});a.set("gt",function(a,c){return null===a||null===c?!1:a.getTime()>c.getTime()});a.set("in",function(a,c){return c.some(function(b){return b.getTime()==a.getTime()})});a.set("lte",
function(a,c){return null===a||null===c?!1:a.getTime()<=c.getTime()});a.set("lt",function(a,c){return null===a||null===c?!1:a.getTime()<c.getTime()});a.set("neq",function(a,c){return(null===a?-1:a.getTime())!=(null===c?-1:c.getTime())});return a};function I(){this.h=this.D=null}var Yd=[];I.prototype.getParent=g("D");I.prototype.bb=function(){for(var a=this;null!==a.getParent();)a=a.getParent();return a};function Zd(a){for(var b=0;null!==a.getParent();)b++,a=a.getParent();return b}function J(a){return a.h||Yd}function $d(a,b){return J(a)[b]||null}function ae(a,b,c){b.D=a;null===a.h?a.h=[b]:a.h.splice(c,0,b)}function L(a,b){b.D=a;null===a.h?a.h=[b]:a.h.push(b)}
function be(a,b){var c=a.h&&a.h[b];return c?(c.D=null,a.h.splice(b,1),0==a.h.length&&(a.h=null),c):null}I.prototype.removeChild=function(a){return be(this,J(this).indexOf(a))};function ce(a,b,c){$d(a,c).D=null;b.D=a;a.h[c]=b}function de(a,b,c){!1!==b.call(c,a)&&J(a).forEach(function(a){de(a,b,c)})};function ee(){I.call(this);this.sa=fe++}r(ee,I);var fe=0;ee.prototype.W=g("sa");function ge(a,b,c){ee.call(this);this.J=a;this.value=b;this.F=c;this.vc=Xd(Wd(),this.J.I(),this.F);this.Wa=!1;this.cc=b}r(ge,ee);m=ge.prototype;m.Nb=function(){var a=new ge(this.J,this.value,this.F);a.cc=this.cc;a.vd(this.Wa);var b=this.W();a.sa=b;return a};m.lb=function(a){return null!=a?(a.push(this.J),a):[this.J]};m.u=function(a){a=null!=a?a:B();a.add(this.J.H());return a};m.vd=ba("Wa");
function he(a){var b=!1;a.value instanceof Nd||(b="array"==fa(a.value)?!a.value.some(function(a){return a instanceof Nd}):!0);if(!b)throw new D(501);}m.eval=function(a){he(this);if("in"==this.F)return ie(this,a);var b=a.entries.filter(function(a){return this.vc(H(a,this.J),this.value)!=this.Wa},this);return new G(b,a.u())};
m.bind=function(a){if(this.cc instanceof Nd){var b=this.cc.Ca();if(a.length<=b)throw new D(510);this.value=a[b]}else"array"==fa(this.cc)&&(this.value=this.cc.map(function(b){if(b instanceof Nd){var c=b.Ca();if(a.length<=c)throw new D(510);return a[b.Ca()]}return b}))};function ie(a,b){var c=B(a.value),d=function(a){return null===a?!1:c.has(a)!=this.Wa}.bind(a);a=b.entries.filter(function(a){return d(H(a,this.J))},a);return new G(a,b.u())}
m.toString=function(){return"value_pred("+this.J.j()+" "+this.F+(this.Wa?"(complement)":"")+" "+this.value+")"};m.ld=function(){he(this);return null!==this.value&&("between"==this.F||"in"==this.F||"eq"==this.F||"gt"==this.F||"gte"==this.F||"lt"==this.F||"lte"==this.F)};
m.we=function(){var a=null;if("between"==this.F)a=new E(je(this,this.value[0]),je(this,this.value[1]),!1,!1);else{if("in"==this.F)return a=this.value.map(function(a){return new E(a,a,!1,!1)}),new yd(this.Wa?xd(a):a);a=je(this,this.value);a="eq"==this.F?new E(a,a,!1,!1):"gte"==this.F?new E(a,F,!1,!1):"gt"==this.F?new E(a,F,!0,!1):"lte"==this.F?new E(F,a,!1,!1):new E(F,a,!1,!0)}return new yd(this.Wa?qd(a):[a])};function je(a,b){return 2==a.J.I()?b.getTime():b};function ke(a){this.ba=a;this.Wc=this.Ga=null}function le(a,b){null===a.Ga&&null!=a.w&&(a.Ga=me(a.w));return a.Ga.get(b)||null}function me(a){var b=y();de(a,function(a){b.set(a.W(),a)});return b}function oe(a,b){b.w&&(a.w=b.w.Nb());a.Wc=b}ke.prototype.bind=function(){return this};function pe(a,b){a=a.w;null!=a&&de(a,function(a){a instanceof ge&&a.bind(b)})};function qe(a){ke.call(this,a)}r(qe,ke);function re(a){var b="";a.forEach(function(c,d){b+=c.J.j()+" ";b+=1==c.order?"ASC":"DESC";d<a.length-1&&(b+=", ")});return b}qe.prototype.da=function(){return B(this.from)};qe.prototype.clone=function(){var a=new qe(this.ba);oe(a,this);this.f&&(a.f=this.f.slice());this.from&&(a.from=this.from.slice());a.X=this.X;a.L=this.L;this.N&&(a.N=this.N.slice());this.ra&&(a.ra=this.ra.slice());this.Sb&&(a.Sb=this.Sb);this.Zb&&(a.Zb=this.Zb);a.eb=this.eb;return a};
qe.prototype.bind=function(a){qe.hb.bind.call(this,a);null!=this.Sb&&(this.X=a[this.Sb.Ca()]);null!=this.Zb&&(this.L=a[this.Zb.Ca()]);pe(this,a);return this};function se(a,b){this.Ha=a;this.aa=b}se.prototype.bb=g("Ha");se.prototype.da=g("aa");function te(a){var b=B();a.forEach(function(a){a.da().forEach(b.add.bind(b))});return b};function ue(a,b){this.global=a;this.Oa=a.b(mc);this.td=b.map(function(a){return a.context});this.jf=b.map(function(a){return a.ie});this.Md=te(this.jf);this.xe=ve(this);this.Db=w()}function ve(a){return a.td.some(function(a){return!(a instanceof qe)})?1:0}m=ue.prototype;
m.exec=function(){function a(){var f=d.shift();if(f){var h=e[c.length];return f.bb().exec(b,h).then(function(b){c.push(b[0]);return a()})}return v()}var b=0==this.xe?void 0:new ld(this.global,this.Md),c=[],d=this.jf.slice(),e=this.td;return a().then(function(){this.ja=this.Oa.Fb(this.xe,C(this.Md),b);return this.ja.ka()}.bind(this)).then(function(){this.fe(c);return c}.bind(this),function(a){null!=b&&b.Jb();throw a;})};m.I=g("xe");m.da=g("Md");m.W=function(){return ka(this)};m.fe=aa();
m.Y=function(){var a=null;null!=this.ja&&(a=this.ja.Y());return null===a?new A(!1,0,0,0,0):a};function we(a,b){ue.call(this,a,b);this.Ib=a.b(rc)}r(we,ue);we.prototype.getPriority=l(0);we.prototype.fe=function(a){this.td.forEach(function(b,c){xe(this.Ib,b,a[c])},this)};function ye(a,b){this.c=a;this.Ib=a.b(rc);this.Ia=a.b(qc);this.gd=new Ic(a);this.ib=b;var c=a.b(sc);a=this.ib.map(function(a){return c.table(a.getName())});this.aa=B(a);this.Db=w()}m=ye.prototype;m.exec=function(){this.gd.update(this.ib);this.Mc();return v()};m.I=l(1);m.da=g("aa");m.W=function(){return ka(this)};m.getPriority=l(1);m.Mc=function(){var a=ze(this.Ib,this.aa);0!=a.length&&(a=new we(this.c,a),Ae(this.Ia,a))};function Be(a){this.c=a;this.Oa=a.b(mc);this.Ia=a.b(qc)}Be.prototype.de=function(a){a=new ye(this.c,a);Ae(this.Ia,a)};function M(a,b){this.Ua=a;this.i=b;this.Za=y()}q("lf.backstore.FirebaseRawBackStore",M);M.prototype.cd=g("i");M.prototype.dd=function(){throw new D(351);};function Ce(a,b){var c=w(),d=a;b.length&&(d=a.child(b));d.once("value",function(a){c.resolve(a.val())},function(a){c.reject(a)});return c.ha}function De(a,b,c){function d(a){a?e.reject(a):e.resolve()}c=c||!1;var e=w();c?a.set(b,d):a.update(b,d);return e.ha}
M.prototype.Ea=function(a){return Ce(this.i,"@rev/R").then(function(a){this.Sa=a;return Ce(this.i,"@table")}.bind(this)).then(function(b){var c=0,d;for(d in b)this.Za.set(d,b[d]),b[d]>c&&(c=b[d]);a.oa().forEach(function(a){this.Za.has(a.getName())||(b[a.getName()]=++c)},this);d=this.i.child("@table");return De(d,b)}.bind(this))};
function Ee(a,b,c){var d=a.Za.get(b);return null!=d?function(){var a={},b=w();this.i.orderByChild("T").equalTo(d).once("value",function(d){d.forEach(function(b){var d=c(b.val());a[parseInt(b.key(),10)]=d});b.resolve(a)});return b.ha}.call(a).then(function(a){a["@rev"]={R:++this.Sa};return De(this.i,a)}.bind(a)):v()}M.prototype.tc=function(a){return Ee(this,a,l(null)).then(function(){this.Za.delete(a);return De(this.i.child("@table/"+a),null,!0)}.bind(this))};M.prototype.dropTable=M.prototype.tc;
M.prototype.qc=function(a,b,c){return Ee(this,a,function(a){var d=a.P;d[b]=c;return{R:this.Sa+1,T:a.T,P:d}}.bind(this))};M.prototype.addTableColumn=M.prototype.qc;M.prototype.uc=function(a,b){return Ee(this,a,function(a){var c=a.P;delete c[b];return{R:this.Sa+1,T:a.T,P:c}}.bind(this))};M.prototype.dropTableColumn=M.prototype.uc;M.prototype.Lc=function(a,b,c){return Ee(this,a,function(a){var d=a.P;d[c]=d[b];delete d[b];return{R:this.Sa+1,T:a.T,P:d}}.bind(this))};M.prototype.renameTableColumn=M.prototype.Lc;
M.prototype.xb=function(){throw new D(351);};M.prototype.createRow=M.prototype.xb;M.prototype.Cc=g("Ua");M.prototype.getVersion=M.prototype.Cc;M.prototype.ec=function(a){var b=w();a=this.Za.get(a);this.i.orderByChild("T").equalTo(a).once("value",function(a){var c=[];a.forEach(function(a){c.push(a.val().P)});b.resolve(c)});return b.ha};M.prototype.dump=function(){var a={},b=Yb(this.Za).map(function(b){return this.ec(b).then(function(c){a[b]=c})}.bind(this));return db(b).then(function(){return a})};
M.prototype.dump=M.prototype.dump;function Fe(a,b,c){ec.call(this,b,c);this.i=a}r(Fe,ec);Fe.prototype.H=function(a){return this.i.Ac(a)};
Fe.prototype.sc=function(){if(0==this.yd)return this.S.resolve(),this.S.ha;var a=this.Ra.ib;if(0==a.size)this.S.resolve();else{var b=this.i.Sa+1;this.i.Sa=b;var c={"@rev":{R:b}};a.forEach(function(a,e){var d=this.i.Za.get(e);a.wa.forEach(function(a,e){c[e]={R:b,T:d,P:a.m}});a.la.forEach(function(a,e){c[e]={R:b,T:d,P:a[1].m}});a.xa.forEach(function(a,b){c[b]=null})},this);this.i.i.update(c,function(c){null===c?this.S.resolve():(this.i.Sa=b-1,c=z(a).map(function(a){return Ge(this.i,a.getName())},this),
db(c).then(this.S.reject.bind(this.S),this.S.reject.bind(this.S)))}.bind(this))}return this.S.ha};function He(){this.Ba=y()}function Ie(a,b){if(0==b.length)return z(a.Ba);var c=[];b.forEach(function(a){a=this.Ba.get(a)||null;null===a||c.push(a)},a);return c}He.prototype.getData=g("Ba");He.prototype.get=function(a){return v(Ie(this,a))};function Je(a,b){b.forEach(function(a){this.Ba.set(a.id(),a)},a)}He.prototype.put=function(a){Je(this,a);return v()};function Ke(a,b){0==b.length||b.length==a.Ba.size?a.Ba.clear():b.forEach(function(a){this.Ba.delete(a)},a)}
He.prototype.remove=function(a){Ke(this,a);return v()};function Le(a){return 0==a.Ba.size?0:Yb(a.Ba).reduce(function(a,c){return a>c?a:c},0)};function Me(a,b){this.g=a;this.Df=b;this.Kc=y();this.Sa=-1;this.M=y();this.Za=y();this.Jd=null}m=Me.prototype;
m.Ea=function(a){this.i=this.Df.child(this.g.name());var b=a||function(){return v()};return Ce(this.i,"@db/version").then(function(a){return null===a?De(this.i,Ne(this),!0).then(function(){var a=new M(0,this.i);return b(a)}.bind(this)).then(function(){return this.Ea()}.bind(this)):a==this.g.version()?Ce(this.i,"@rev/R").then(function(a){this.Sa=a;return Ce(this.i,"@table")}.bind(this)).then(function(a){for(var b in a)this.Za.set(b,a[b]);a=this.g.oa().map(function(a){return Ge(this,a.getName())},this);
return db(a)}.bind(this)).then(function(){Oe(this);Pe(this);return v()}.bind(this)):this.ge(a,b).then(function(){return this.Ea()}.bind(this))}.bind(this))};m.ge=function(a,b){var c=new M(a,this.i);return c.Ea(this.g).then(function(){return v()}.bind(this)).then(function(){return b(c)}).then(function(){var a=this.i.child("@db");return De(a,{version:this.g.version()},!0)}.bind(this))};
function Pe(a){a.i.off();a.i.on("child_removed",a.zg.bind(a));a.Kd&&(a.Kd.off(),a.Kc.clear());a.Kd=a.i.orderByChild("R").startAt(a.Sa+1);a.Kd.on("value",a.de.bind(a))}function Oe(a){$b=z(a.M).map(function(a){return Le(a)}).reduce(function(a,c){return a>c?a:c},0)+1}m.zg=function(a){var b=a.val(),c=this.Kc.get(b.T)||null;null===c&&(c=B(),this.Kc.set(b.T,c));c.add(parseInt(a.key(),10))};
m.de=function(a){var b=a.child("@rev/R").val();null!=b&&b!=this.Sa&&(this.Sa=b,a=Qe(this,a),a.forEach(function(a){var b=this.M.get(a.getName()),c=Yb(a.xa);0<c.length&&Ke(b,c);var f=z(a.wa);a.la.forEach(function(a){f.push(a[1])});Je(b,f)},this),0<a.length&&this.Gc(a),Pe(this))};
function Qe(a,b){var c=B(),d=y();a.Za.forEach(function(a,b){var e=this.M.get(b),f=new jd(b);this.Kc.has(a)&&(b=C(this.Kc.get(a)),b.forEach(function(a){c.add(a)}),Ie(e,b).forEach(function(a){f.delete(a)}));d.set(a,f)}.bind(a));b.forEach(function(a){if("@rev"!=a.key()){var b=parseInt(a.key(),10);if(!c.has(b)){var e=a.val();a=d.get(e.T);var k=this.M.get(a.getName()),e=this.g.table(a.getName()).kb({id:b,value:e.P});k.getData().has(b)?a.modify([Ie(k,[b])[0],e]):a.add(e)}}}.bind(a));return z(d).filter(function(a){return!a.jd()})}
function Ge(a,b){var c=w(),d=a.Za.get(b),e=a.g.table(b);a.i.orderByChild("T").equalTo(d).once("value",function(a){var d=new He,f=[];a.forEach(function(a){f.push(e.kb({id:parseInt(a.key(),10),value:a.val().P}))});Je(d,f);this.M.set(b,d);c.resolve()}.bind(a));return c.ha}function Ne(a){var b={};b["@db"]={version:a.g.version()};b["@rev"]={R:1};a.Sa=1;b["@table"]={};a.g.oa().forEach(function(a,d){a=a.getName();b["@table"][a]=d;this.M.set(a,new He);this.Za.set(a,d)},a);return b}
m.Fb=function(a,b,c){return new Fe(this,a,c)};m.Ac=function(a){var b=this.M.get(a)||null;if(null!==b)return b;throw new D(101,a);};m.close=aa();m.subscribe=ba("Jd");m.Gc=function(a){null!=this.Jd&&this.Jd(a)};function N(a,b,c,d){this.i=b;this.ja=c;this.Ua=a;this.Uc=d}q("lf.backstore.IndexedDBRawBackStore",N);N.prototype.cd=g("i");N.prototype.getRawDBInstance=N.prototype.cd;N.prototype.dd=g("ja");N.prototype.getRawTransaction=N.prototype.dd;N.prototype.tc=function(a){return new u(function(b,c){try{this.i.deleteObjectStore(a)}catch(d){c(d);return}b()},this)};N.prototype.dropTable=N.prototype.tc;
function Re(a,b,c,d){return new u(function(a,f){var e;try{var k=this.ja.objectStore(b);e=k.openCursor()}catch(p){f(p);return}e.onsuccess=function(){var b=e.result;b?(c(b),b.continue()):(d(k),a())};e.onerror=f},a)}function Se(a){return a instanceof ArrayBuffer?cc(a):a instanceof Date?a.getTime():a}
function Te(a,b,c){function d(a){var b=Dc(a.value),d=b.m,e;for(e in d){var f=ac(d[e]);c(f);d[e]=f.Ja()}a.update(b.Ja())}function e(a){var b=ac(a.value);c(b);a.update(b.Ja())}return Re(a,b,a.Uc?d:e,aa())}N.prototype.qc=function(a,b,c){var d=Se(c);return Te(this,a,function(a){a.m[b]=d})};N.prototype.addTableColumn=N.prototype.qc;N.prototype.uc=function(a,b){return Te(this,a,function(a){delete a.m[b]})};N.prototype.dropTableColumn=N.prototype.uc;
N.prototype.Lc=function(a,b,c){return Te(this,a,function(a){a.m[c]=a.m[b];delete a.m[b]})};N.prototype.renameTableColumn=N.prototype.Lc;function Ue(a,b){var c=[];return new u(function(a,e){var d;try{d=this.ja.objectStore(b).openCursor()}catch(h){e(h);return}d.onsuccess=function(){var b=d.result;if(b){if(this.Uc){var e=Dc(b.value).m,f;for(f in e)c.push(e[f])}else c.push(b.value);b.continue()}else a(c)}.bind(this);d.onerror=e},a)}N.prototype.xb=function(a){var b={},c;for(c in a)b[c]=Se(a[c]);return bc(b)};
N.prototype.createRow=N.prototype.xb;N.prototype.Cc=g("Ua");N.prototype.getVersion=N.prototype.Cc;N.prototype.dump=function(){for(var a=this.i.objectStoreNames,b=[],c=0;c<a.length;++c){var d=a.item(c);b.push(this.ec(d))}return db(b).then(function(b){var c={};b.forEach(function(b,d){c[a.item(d)]=b});return c})};N.prototype.dump=N.prototype.dump;N.prototype.ec=function(a){return Ue(this,a).then(function(a){return a.map(function(a){return a.value})})};function Ve(a,b){this.Z=a;this.Gb=b}Ve.prototype.get=function(a){if(0==a.length)return null!=this.Z.getAll?We(this):Xe(this);a=a.map(function(a){return new u(function(b,d){var c;try{c=this.Z.get(a)}catch(f){d(f);return}c.onerror=d;c.onsuccess=function(a){b(this.Gb(a.target.result))}.bind(this)},this)},this);return db(a)};
function Xe(a){return new u(function(a,c){var b=[],e;try{e=this.Z.openCursor()}catch(f){c(f);return}e.onerror=c;e.onsuccess=function(){var c=e.result;c?(b.push(this.Gb(c.value)),c.continue()):a(b)}.bind(this)},a)}function We(a){return new u(function(a,c){var b;try{b=this.Z.getAll()}catch(e){c(e);return}b.onerror=c;b.onsuccess=function(){var c=b.result.map(function(a){return this.Gb(a)},this);a(c)}.bind(this)},a)}
Ve.prototype.Tb=function(a){return new u(function(b,c){var d;try{d=a()}catch(e){c(e);return}d.onsuccess=b;d.onerror=c},this)};Ve.prototype.put=function(a){if(0==a.length)return v();a=a.map(function(a){return this.Tb(function(){return this.Z.put(a.Ja())}.bind(this))},this);return db(a)};
Ve.prototype.remove=function(a){return new u(function(b,c){var d=this.Z.count();d.onsuccess=function(d){if(0==a.length||d.target.result==a.length)return this.Tb(function(){return this.Z.clear()}.bind(this)).then(b,c);d=a.map(function(a){return this.Tb(function(){return this.Z.delete(a)}.bind(this))},this);db(d).then(b,c)}.bind(this);d.onerror=c},this)};function Ye(a,b,c,d,e){ec.call(this,c,e);this.c=a;this.ja=b;this.Uc=d;this.ja.oncomplete=this.S.resolve.bind(this.S);this.ja.onabort=this.S.reject.bind(this.S)}r(Ye,ec);Ye.prototype.H=function(a,b,c){return this.Uc?(c=null!=c?c:0,a=this.ja.objectStore(a),new Ec(a,b,0==c?qa(Gc,this.c):Hc)):new Ve(this.ja.objectStore(a),b)};Ye.prototype.sc=function(){return this.S.ha};function Ze(a,b){this.c=a;this.g=b;this.Gd=b.je.Sf||!1}m=Ze.prototype;
m.Ea=function(a){var b=window.indexedDB||window.mozIndexedDB||window.webkitIndexedDB||window.msIndexedDB;if(null==b)throw new D(352);var c=a||function(){return v()};return new u(function(a,e){var d;try{d=b.open(this.g.name(),this.g.version())}catch(h){e(h);return}d.onerror=function(a){a=a.target.error;e(new D(361,a.name,a.message))};d.onupgradeneeded=function(a){$e(this,c,a).then(aa(),e)}.bind(this);d.onsuccess=function(b){this.i=b.target.result;this.qe().then(function(b){$b=Math.max($b,b+1);a(this.i)}.bind(this))}.bind(this)},
this)};function $e(a,b,c){var d=c.target.result;c=new N(c.oldVersion,d,c.target.transaction,a.Gd);af(d);a.g.oa().forEach(qa(a.Lf,d),a);return b(c)}function af(a){for(var b=[],c=0;c<a.objectStoreNames.length;++c){var d=a.objectStoreNames.item(c);-1!=d.indexOf(".")&&b.push(d)}b.forEach(function(b){try{a.deleteObjectStore(b)}catch(f){}})}
m.Lf=function(a,b){a.objectStoreNames.contains(b.getName())||a.createObjectStore(b.getName(),{keyPath:"id"});b.Cb()&&(b.Da().forEach(function(b){bf(a,b.j())},this),bf(a,cf(b)))};function bf(a,b){a.objectStoreNames.contains(b)||a.createObjectStore(b,{keyPath:"id"})}m.Fb=function(a,b,c){b=this.i.transaction(df(b),0==a?"readonly":"readwrite");return new Ye(this.c,b,a,this.Gd,c)};
function df(a){var b=B();a.forEach(function(a){b.add(a.getName());a.Cb()&&(a.Da().forEach(function(a){b.add(a.j())}),b.add(cf(a)))});return C(b)}
m.qe=function(a){function b(){if(0==d.length)return v();var a=d.shift();return c(a).then(b)}function c(b){return new u(function(c,d){var k;try{k=(a||e.transaction([b])).objectStore(b).openCursor(null,"prev")}catch(ca){d(ca);return}k.onsuccess=function(a){(a=a.target.result)&&(f=Math.max(f,h(a)));c(f)};k.onerror=function(){c(f)}})}var d=this.g.oa().map(function(a){return a.getName()}),e=this.i,f=0,h=function(a){return this.Gd?(a=Dc(a.value),Object.keys(a.m).reduce(function(a,b){return Math.max(a,b)},
0)):a.key}.bind(this);return new u(function(a){b().then(function(){a(f)})})};m.close=function(){this.i.close()};m.Ac=function(){throw new D(511);};m.subscribe=aa();m.Gc=aa();function ef(a,b,c){ec.call(this,b,c);this.Z=a;0==b&&this.S.resolve()}r(ef,ec);ef.prototype.H=function(a){return this.Z.Ac(a)};ef.prototype.sc=function(){this.S.resolve();return this.S.ha};function ff(a){this.g=a;this.M=y()}m=ff.prototype;m.Ea=function(){this.g.oa().forEach(this.gg,this);return v()};m.Ac=function(a){var b=this.M.get(a)||null;if(null===b)throw new D(101,a);return b};m.Fb=function(a,b,c){return new ef(this,a,c)};function gf(a,b){if(!a.M.has(b)){var c=new He;a.M.set(b,c)}}m.gg=function(a){gf(this,a.getName());a.Cb()&&(a.Da().forEach(function(a){gf(this,a.j())},this),gf(this,cf(a)))};m.close=aa();m.subscribe=aa();m.Gc=aa();function hf(a){ff.call(this,a);this.pd=null}r(hf,ff);hf.prototype.subscribe=function(a){null===this.pd&&(this.pd=a)};hf.prototype.Gc=function(a){null===this.pd||this.pd(a)};function jf(a,b,c){this.ja=a;this.A='"'+b+'"';this.Gb=c}jf.prototype.get=function(a){var b=this.Gb;return kf(this.ja,"SELECT id, value FROM "+this.A+" "+(0==a.length?"":"WHERE id IN ("+a.join(",")+")"),[],function(a){for(var c=a.rows.length,e=Array(c),f=0;f<c;++f)e[f]=b({id:a.rows.item(f).id,value:JSON.parse(a.rows.item(f).value)});return e})};
jf.prototype.put=function(a){if(0==a.length)return v();var b="INSERT OR REPLACE INTO "+this.A+"(id, value) VALUES (?, ?)";a.forEach(function(a){kf(this.ja,b,[a.id(),JSON.stringify(a.m)])},this);return v()};jf.prototype.remove=function(a){kf(this.ja,"DELETE FROM "+this.A+" "+(0==a.length?"":"WHERE id IN ("+a.join(",")+")"),[]);return v()};function mf(a,b,c){ec.call(this,b,c);this.i=a;this.M=y();this.Nd=[]}r(mf,ec);function nf(a){return a.replace(".","__d__").replace("#","__s__")}mf.prototype.H=function(a,b){var c=this.M.get(a)||null;null===c&&(c=new jf(this,nf(a),b),this.M.set(a,c));return c};function kf(a,b,c,d){var e=w();a.Nd.push({Ng:b,Dg:c,transform:d,S:e});return e.ha}
mf.prototype.sc=function(){var a=null,b=this.S.reject.bind(this.S),c=function(a,b){this.S.reject(b)}.bind(this),d=[],e=function(b,h){if(null!==a){var f=h;null!=a.transform&&null!=h&&(f=a.transform(h));d.push(f);a.S.resolve(f)}0<this.Nd.length?(a=h=this.Nd.shift(),b.executeSql(h.Ng,h.Dg,e,c)):this.S.resolve(d)}.bind(this);0==this.yd?this.i.readTransaction(e,b):this.i.transaction(e,b);return this.S.ha};function O(a,b,c){this.i=c;this.c=a;this.Ua=b}q("lf.backstore.WebSqlRawBackStore",O);O.prototype.cd=g("i");O.prototype.getRawDBInstance=O.prototype.cd;O.prototype.dd=function(){throw new D(356);};O.prototype.getRawTransaction=O.prototype.dd;function of(a){return new mf(a.i,1,new ld(a.c,B()))}O.prototype.tc=function(a){var b=of(this);kf(b,"DROP TABLE "+a,[]);return b.ka()};O.prototype.dropTable=O.prototype.tc;
O.prototype.ec=function(a){var b=of(this);kf(b,"SELECT id, value FROM "+a,[]);return b.ka().then(function(a){for(var b=a[0].rows.length,c=Array(b),f=0;f<b;++f)c[f]={id:a[0].rows.item(f).id,value:JSON.parse(a[0].rows.item(f).value)};return v(c)})};function pf(a,b,c){var d=of(a),e="UPDATE "+b+" SET value=? WHERE id=?";return a.ec(b).then(function(a){a.forEach(function(a){a=c(a);kf(d,e,[JSON.stringify(a.value),a.id])});return d.ka()})}
O.prototype.qc=function(a,b,c){var d=Se(c);return pf(this,a,function(a){a.value[b]=d;return a})};O.prototype.addTableColumn=O.prototype.qc;O.prototype.uc=function(a,b){return pf(this,a,function(a){delete a.value[b];return a})};O.prototype.dropTableColumn=O.prototype.uc;O.prototype.Lc=function(a,b,c){return pf(this,a,function(a){a.value[c]=a.value[b];delete a.value[b];return a})};O.prototype.renameTableColumn=O.prototype.Lc;O.prototype.xb=function(a){var b={},c;for(c in a)b[c]=Se(a[c]);return bc(b)};
O.prototype.createRow=O.prototype.xb;O.prototype.Cc=g("Ua");O.prototype.getVersion=O.prototype.Cc;function qf(a){kf(a,'SELECT tbl_name FROM sqlite_master WHERE type="table"',[],function(a){for(var b=Array(a.rows.length),d=0;d<b.length;++d)b[d]=a.rows.item(d).tbl_name;return b})}
O.prototype.dump=function(){var a=w(),b=of(this);qf(b);var c={};b.ka().then(function(b){b=b[0].filter(function(a){return"__lf_ver"!=a&&"__WebKitDatabaseInfoTable__"!=a}).map(function(a){return this.ec(a).then(function(b){c[a]=b})},this);db(b).then(function(){a.resolve(c)})}.bind(this));return a.ha};O.prototype.dump=O.prototype.dump;function rf(a,b,c){this.c=a;this.g=b;this.Mg=c||1}m=rf.prototype;m.Ea=function(a){if(null==window.openDatabase)throw new D(353);var b=a||function(){return v()};return new u(function(a,d){var c=window.openDatabase(this.g.name(),"",this.g.name(),this.Mg);if(null!=c)this.i=c,sf(this,b).then(function(){this.qe().then(a,d)}.bind(this),function(a){if(a instanceof D)throw a;throw new D(354,a.message);});else throw new D(354);},this)};
function sf(a,b){var c=w(),d=new mf(a.i,1,new ld(a.c,B()));kf(d,"CREATE TABLE IF NOT EXISTS __lf_ver(id INTEGER PRIMARY KEY, v INTEGER)",[]);kf(d,"SELECT v FROM __lf_ver WHERE id = 0",[]);d.ka().then(function(a){var d=0;a[1].rows.length&&(d=a[1].rows.item(0).v);d<this.g.version()?this.ge(b,d).then(c.resolve.bind(c)):d>this.g.version()?c.reject(new D(108)):c.resolve()}.bind(a),c.reject.bind(c));return c.ha}m.Fb=function(a,b,c){if(null!=this.i)return new mf(this.i,a,c);throw new D(2);};m.close=aa();
m.Ac=function(){throw new D(512);};m.subscribe=function(){throw new D(355);};m.Gc=function(){throw new D(355);};m.ge=function(a,b){return tf(this).then(function(){return a(new O(this.c,b,this.i))}.bind(this))};
function tf(a){var b=a.g.oa(),c=new mf(a.i,1,new ld(a.c,B())),d=new mf(a.i,1,new ld(a.c,B()));kf(c,"INSERT OR REPLACE INTO __lf_ver VALUES (0, ?)",[a.g.version()]);qf(c);return c.ka().then(function(a){var c=a[1];c.filter(function(a){return-1!=a.indexOf("__d__")}).forEach(function(a){kf(d,"DROP TABLE "+('"'+a+'"'),[])});var e=[],k=[],p=[];b.map(function(a){-1==c.indexOf(a.getName())&&e.push(a.getName());a.Cb&&(a.Da().forEach(function(a){a=nf(a.j());e.push(a);k.push(a)}),a=nf(cf(a)),e.push(a),p.push(a))});
e.forEach(function(a){kf(d,"CREATE TABLE "+('"'+a+'"')+"(id INTEGER PRIMARY KEY, value TEXT)",[])});return d.ka()})}m.qe=function(){var a=0,b=w(),c=function(b){var c=new mf(this.i,0);kf(c,"SELECT MAX(id) FROM "+('"'+b+'"'),[]);return c.ka().then(function(b){b=b[0].rows.item(0)["MAX(id)"];a=Math.max(b,a)})}.bind(this),d=this.g.oa().map(function(a){return c(a.getName())});db(d).then(function(){$b=Math.max($b,a+1);b.resolve()},function(a){b.reject(a)});return b.ha};function uf(a){this.l=y();this.$b=y();a.oa().forEach(function(a){this.$b.set(a.getName(),B())},this)}m=uf.prototype;m.set=function(a,b){this.l.set(b.id(),b);this.$b.get(a).add(b.id())};m.Wb=function(a,b){var c=this.$b.get(a);b.forEach(function(a){this.l.set(a.id(),a);c.add(a.id())},this)};m.get=function(a){return this.l.get(a)||null};function vf(a,b){return b.map(function(a){return this.get(a)},a)}
m.Va=function(a,b,c){var d=[],e=Math.min(b,c),f=Math.max(b,c);a=this.$b.get(a);if(a.size<f-e)a.forEach(function(a){a>=e&&a<=f&&(a=this.l.get(a),d.push(a))},this);else for(b=e;b<=f;++b)a.has(b)&&(c=this.l.get(b),d.push(c));return d};m.remove=function(a,b){this.l.delete(b);this.$b.get(a).delete(b)};m.zc=function(a){return null!=a?this.$b.get(a).size:this.l.size};m.clear=function(){this.l.clear();this.$b.clear()};function wf(a,b,c){var d=0,e=a.length;for(c=c||xf;d<e;){var f=d+e>>1;0>c(a[f],b)?d=f+1:e=f}return d==e&&a[d]==b?d:~d}function xf(a,b){return a-b}function yf(a,b,c){c=wf(a,b,c);return 0>c?(a.splice(-(c+1),0,b),!0):!1};function zf(a,b,c,d){a=b?a.reverse():a;if(null==c&&null==d)return a;c=Math.min(n(c)?c:a.length,a.length);if(0==c)return[];d=Math.min(d||0,a.length);return a.slice(d,d+c)};function Af(){this.ia=0;this.Fc=null}Af.prototype.add=function(a,b){this.ia+=b;this.Fc=null===this.Fc?a:a>this.Fc?a:this.Fc};Af.prototype.remove=function(a,b){this.ia-=b};Af.prototype.clear=function(){this.ia=0};function Bf(a,b){a.clear();b.forEach(function(a){this.ia+=a.ia},a)};function Cf(a,b,c,d){this.A=a;this.$=b;this.yf=c;this.za=new Af;if(d){a=511;a*=a*a;if(d.length>=a)throw new D(6,a);d=Df(this,d);this.ua=d=Ef(d)}else this.clear()}var Ff=[];m=Cf.prototype;m.getName=g("A");m.toString=function(){return this.ua.toString()};m.add=function(a,b){this.ua=this.ua.Ab(a,b)};m.set=function(a,b){this.ua=this.ua.Ab(a,b,!0)};m.remove=function(a,b){this.ua=this.ua.remove(a,b)};m.get=function(a){return this.ua.get(a)};
m.Zc=function(a){if(null==a)return this.Y().ia;if(a instanceof E){if(rd(a))return this.Y().ia;if(vd(a))return this.get(a.from).length}return this.Va([a]).length};m.Y=g("za");m.Vd=function(a,b,c,d){c=Array(a);this.ua.fill({offset:b?this.za.ia-a-d:d,count:a,te:0},c);return b?c.reverse():c};
m.Va=function(a,b,c,d){var e=Gf(this.ua).a[0];if(!n(e)||0==c)return Ff;b=b||!1;c=null!=c?Math.min(c,this.za.ia):this.za.ia;d=d||0;var f=Math.min(Math.max(this.za.ia-d,0),c);if(0==f)return Ff;if(!n(a)||1==a.length&&a[0]instanceof E&&rd(a[0]))return this.Vd(f,b,c,d);a=this.$.uf(a);var h=Array(b?this.za.ia:f),k={count:0,X:h.length,reverse:b,L:d},p=1<this.jb().Zd();a.forEach(function(a){for(var b=this.$.ud(a),b=this.$.Xd(a)?e:b[0],b=this.ua.Yf(b),c=0;null!=b&&k.count<k.X;){if(p){for(var d=b,f=a,K=k,Db=
h,Tc=d.s.jb(),ne=-1,Ma=0;Ma<d.a.length;++Ma)if(Tc.Bb(d.a[Ma],f)){ne=Ma;break}if(-1!=ne)for(Ma=ne;Ma<d.a.length&&K.count<K.X;++Ma)Tc.Bb(d.a[Ma],f)&&Hf(d,K,Db,Ma)}else b.Va(a,k,h);0!=k.L||b.kd(a)?c=0:c++;b=2==c?null:b.next()}},this);h.length>k.count&&h.splice(k.count,h.length-k.count);return b?zf(h,b,c,d):h};m.clear=function(){this.ua=If(this);this.za.clear()};m.Pa=function(a){return this.ua.Pa(a)};m.min=function(){return this.Hb(this.$.min.bind(this.$))};m.max=function(){return this.Hb(this.$.max.bind(this.$))};
function Jf(a,b,c){if(!a.$.Od(b.a[c]))if(1<b.a[c].length){if(null===b.a[c][0])return null}else return null;return[b.a[c],a.yf?[b.B[c]]:b.B[c]]}m.Hb=function(a){var b;a:{b=Gf(this.ua);var c=0;do if(c>=b.a.length)b=b.ya,c=0;else{var d=Jf(this,b,c);if(null!==d){b=d;break a}c++}while(null!==b);b=null}a:{c=Kf(this.ua);d=c.a.length-1;do if(0>d)c=c.qb,d=0;else{var e=Jf(this,c,d);if(null!==e){c=e;break a}d--}while(null!==c);c=null}return null===b||null===c?null:1==a(b[0],c[0])?b:c};m.Ma=g("yf");m.jb=g("$");
m.Qa=function(a,b){return null!=a?0==this.$.compare(a,b):!1};m.Ja=function(){for(var a=[],b=Gf(this.ua);b;)a.push(new Zb(b.sa,[b.a,b.B])),b=b.ya;return a};function Lf(a,b,c,d){a=new Cf(b,a,c);d=Mf(d,a);a.ua=d;return a}function Nf(a,b){this.sa=a;this.s=b;this.mb=0;this.ya=this.qb=this.D=null;this.a=[];this.B=[];this.h=[];this.Yf=1==b.jb().Zd()?this.Pe:this.Oe}function If(a){return new Nf($b++,a)}function P(a){return 0==a.mb}m=Nf.prototype;m.next=g("ya");
function Of(a){function b(a){return null!=a?a.sa.toString():"_"}var c=a.sa+"["+a.a.join("|")+"]",d=a.h.map(function(a){return a.sa}).join("|"),e=a.B.join("/"),f=b(a.qb)+"{",f=P(a)?f+e:f+d,f=f+"}"+b(a.D);a.ya&&(a=Of(a.ya),c=c+"  "+a[0],f=f+"  "+a[1]);return[c,f]}m.toString=function(){var a="",b=Of(this),a=a+(b[0]+"\n"+b[1]+"\n");this.h.length&&(a+=this.h[0].toString());return a};function Gf(a){return P(a)?a:Gf(a.h[0])}function Kf(a){return P(a)?a:Kf(a.h[a.h.length-1])}
function Pf(a,b){b&&(b.qb=a);a&&(a.ya=b)}function Df(a,b){for(var c=b.length,d=0,e=a=If(a);0<c;){var f=768<=c?511:257<=c&&511>=c?c:257,h=b.slice(d,d+f);a.a=h.map(function(a){return a.key});a.B=h.map(function(a){return a.value});d+=f;c-=f;0<c&&(f=If(a.s),Pf(a,f),a=f)}return e}function Qf(a){var b=a[0],c=If(b.s);c.mb=b.mb+1;c.h=a;for(b=0;b<a.length;++b)a[b].D=c,0<b&&c.a.push(a[b].a[0]);return c}
function Ef(a){var b=a,c=[];do c.push(b),b=b.ya;while(b);if(512>=c.length)b=Qf(c);else{var d=c.length,e=0,b=If(a.s);for(b.mb=a.mb+2;0<d;){a=768<=d?511:257<=d&&511>=d?d:257;var f=c.slice(e,e+a),h=Qf(f);h.D=b;b.h.length&&(b.a.push(f[0].a[0]),Pf(b.h[b.h.length-1],h));b.h.push(h);e+=a;d-=a}}return b}m.get=function(a){var b=Rf(this,a);if(P(this)){var c=Ff;this.s.Qa(this.a[b],a)&&(c=c.concat(this.B[b]));return c}b=this.s.Qa(this.a[b],a)?b+1:b;return this.h[b].get(a)};
m.Pa=function(a){var b=Rf(this,a);return this.s.Qa(this.a[b],a)?!0:P(this)?!1:this.h[b].Pa(a)};m.remove=function(a,b){Sf(this,a,-1,b);return null===this.D?(a=this,1==this.h.length&&(a=this.h[0],a.D=null),a):this};function Tf(a){return P(a)?a.a[0]:Tf(a.h[0])}function Uf(a){a.a=[];for(var b=1;b<a.h.length;++b)a.a.push(Tf(a.h[b]))}
function Sf(a,b,c,d){var e=Rf(a,b),f=P(a);if(!f){var h=a.s.Qa(a.a[e],b)?e+1:e;if(Sf(a.h[h],b,h,d))Uf(a);else return!1}else if(!a.s.Qa(a.a[e],b))return!1;if(a.a.length>e&&a.s.Qa(a.a[e],b)){if(n(d)&&!a.s.Ma()&&f&&(h=a.B[e],d=wf(h,d,void 0),0>d?d=!1:(h.splice(d,1),d=!0),d&&a.s.Y().remove(b,1),a.B[e].length))return!1;a.a.splice(e,1);f&&(f=a.s.Ma()?1:a.B[e].length,a.B.splice(e,1),a.s.Y().remove(b,f))}if(256>a.a.length&&null!==a.D){a:{if(a.ya&&256<a.ya.a.length)b=a.ya,e=d=0,f=a.a.length+1;else if(a.qb&&
256<a.qb.a.length)b=a.qb,d=a.qb.a.length-1,e=P(a)?d:d+1,f=0;else{b=!1;break a}a.a.splice(f,0,b.a[d]);b.a.splice(d,1);d=P(a)?a.B:a.h;P(a)?h=b.B:(h=b.h,h[e].D=a);d.splice(f,0,h[e]);h.splice(e,1);P(b)||(Uf(b),Uf(a));b=!0}b||Vf(a,c)}return!0}
function Vf(a,b){var c,d,e;a.ya&&511>a.ya.a.length?(c=a.ya,e=d=0):a.qb&&(c=a.qb,d=c.a.length,e=P(c)?c.B.length:c.h.length);d=[d,0].concat(a.a);Array.prototype.splice.apply(c.a,d);d=null;P(a)?d=a.B:(d=a.h,d.forEach(function(a){a.D=c}));d=[e,0].concat(d);Array.prototype.splice.apply(P(c)?c.B:c.h,d);Pf(a.qb,a.ya);P(c)||Uf(c);-1!=b&&(a.D.a.splice(b,1),a.D.h.splice(b,1))}
m.Ab=function(a,b,c){var d=Rf(this,a);if(P(this)){if(this.s.Qa(this.a[d],a)){if(c)this.s.Y().remove(a,this.s.Ma()?1:this.B[d].length),this.B[d]=this.s.Ma()?b:[b];else{if(this.s.Ma())throw new D(201,this.s.getName(),JSON.stringify(a));if(!yf(this.B[d],b))throw new D(109);}this.s.Y().add(a,1);return this}this.a.splice(d,0,a);this.B.splice(d,0,this.s.Ma()?b:[b]);this.s.Y().add(a,1);512==this.a.length?(d=If(this.s),a=If(this.s),a.mb=1,a.a=[this.a[256]],a.h=[this,d],a.D=this.D,this.D=a,d.a=this.a.splice(256),
d.B=this.B.splice(256),d.D=a,Pf(d,this.ya),Pf(this,d),d=a):d=this;return d}d=this.s.Qa(this.a[d],a)?d+1:d;a=this.h[d].Ab(a,b,c);P(a)||1!=a.a.length||(this.a.splice(d,0,a.a[0]),a.h[1].D=this,a.h[0].D=this,this.h.splice(d,1,a.h[1]),this.h.splice(d,0,a.h[0]));return 512==this.a.length?Wf(this):this};
function Wf(a){var b=If(a.s),c=If(a.s);b.D=a.D;b.mb=a.mb+1;b.a=[a.a[256]];b.h=[a,c];a.a.splice(256,1);c.D=b;c.mb=a.mb;c.a=a.a.splice(256);c.h=a.h.splice(257);c.h.forEach(function(a){a.D=c});a.D=b;Pf(c,a.ya);Pf(a,c);return b}function Rf(a,b){for(var c=0,d=a.a.length,e=a.s.jb();c<d;){var f=c+d>>1;-1==e.compare(a.a[f],b)?c=f+1:d=f}return c}m.Pe=function(a){if(!P(this)){var b=Rf(this,a);this.s.Qa(this.a[b],a)&&b++;return this.h[b].Pe(a)}return this};
m.Oe=function(a){if(!P(this)){var b=Rf(this,a);this.s.Qa(this.a[b],a)&&(a.some(function(a){return a==F})||b++);return this.h[b].Oe(a)}return this};
m.Va=function(a,b,c){function d(a){return a[0]?a[1]?0:1:-1}var e=this.s.jb(),f=0,h=this.a.length-1,k=this.a,p=d(e.wb(k[f],a)),K=d(e.wb(k[h],a));if(1!=p&&(-1!=p||-1!=K)){var sa=function(a,b){b=a+b>>1;return b==a?b+1:b},ca=function(b,c,f){if(b>=c)return 0==f?c:-1;var h=d(e.wb(k[b],a));if(0==h)return b;if(1==h)return-1;h=sa(b,c);if(h==c)return 0==f?c:-1;var p=d(e.wb(k[h],a));return 0==p?ca(b,h,p):-1==p?ca(h+1,c,f):ca(b+1,h,p)},Cb=function(b,c){if(b>=c)return b;var f=d(e.wb(k[c],a));if(0==f)return c;
if(-1==f)return b;f=sa(b,c);if(f==c)return b;var h=d(e.wb(k[f],a));return 0==h?Cb(f,c):1==h?Cb(b,f-1):-1};0!=p&&(f=ca(f+1,h,K));-1!=f&&(h=Cb(f,h),-1!=h&&h>=f&&Xf(this,b,c,f,h+1))}};function Hf(a,b,c,d){if(a.s.Ma())!b.reverse&&b.L?b.L--:c[b.count++]=a.B[d];else for(var e=0;e<a.B[d].length&&b.count<c.length;++e)!b.reverse&&b.L?b.L--:c[b.count++]=a.B[d][e]}function Xf(a,b,c,d,e){for(;d<e&&(b.reverse||!(b.count>=b.X));++d)Hf(a,b,c,d)}
m.fill=function(a,b){if(P(this))for(var c=0;c<this.B.length&&0<a.count;++c)if(0<a.offset){if(a.offset-=this.s.Ma()?1:this.B[c].length,0>a.offset)for(var d=this.B[c].length+a.offset;d<this.B[c].length&&0<a.count;++d)b[a.te++]=this.B[c][d],a.count--}else if(this.s.Ma())b[a.te++]=this.B[c],a.count--;else for(d=0;d<this.B[c].length&&0<a.count;++d)b[a.te++]=this.B[c][d],a.count--;else for(c=0;c<this.h.length&&0<a.count;++c)this.h[c].fill(a,b)};
function Mf(a,b){var c=b.Y();a=a.map(function(a){var d=new Nf(a.id(),b);d.a=a.m[0];d.B=a.m[1];d.a.forEach(function(a,e){c.add(a,b.Ma()?1:d.B[e].length)});return d});for(var d=0;d<a.length-1;++d)Pf(a[d],a[d+1]);return 1<a.length?Ef(a[0]):a[0]}m.kd=function(a){return this.s.jb().kd(this.a[0],a)};function Yf(a){this.Xc=0==a?Zf:$f;this.be=0==a?function(a){return null!=a?a.reverse():null}:function(a){return a||null};this.he=0==a?ag:cg}function $f(a,b){return a>b?1:a<b?-1:0}function Zf(a,b){return $f(b,a)}function cg(a,b){return wd(a,b)}function ag(a,b){return wd(b,a)}m=Yf.prototype;m.wb=function(a,b){b=this.be(b);var c=[b.from==F,b.o==F];if(!c[0]){var d=this.Xc(a,b.from);c[0]=b.ea?1==d:-1!=d}c[1]||(d=this.Xc(a,b.o),c[1]=b.na?-1==d:1!=d);return c};m.compare=function(a,b){return this.Xc(a,b)};
m.min=function(a,b){return a<b?1:a==b?0:-1};m.max=function(a,b){return a>b?1:a==b?0:-1};m.Bb=function(a,b){a=this.wb(a,b);return a[0]&&a[1]};m.kd=function(a,b){return this.Bb(a,b)};m.uf=function(a){return a.filter(function(a){return null!==a}).sort(function(a,c){return this.he(a,c)}.bind(this))};m.Xd=function(a){return this.be(a).from==F};m.ud=function(a){a=this.be(a);return[a.from,a.o]};m.Od=function(a){return null!==a};m.Zd=l(1);
m.toString=function(){return this.compare==Zf?"SimpleComparator_DESC":"SimpleComparator_ASC"};function dg(a){Yf.call(this,a);this.Xc=0==a?eg:fg}r(dg,Yf);function fg(a,b){return null===a?null===b?0:-1:null===b?1:$f(a,b)}function eg(a,b){return fg(b,a)}dg.prototype.Bb=function(a,b){return null===a?rd(b):dg.hb.Bb.call(this,a,b)};dg.prototype.Hb=function(a,b){return null===a?null===b?0:-1:null===b?1:null};dg.prototype.min=function(a,b){var c=this.Hb(a,b);null===c&&(c=dg.hb.min.call(this,a,b));return c};
dg.prototype.max=function(a,b){var c=this.Hb(a,b);null===c&&(c=dg.hb.max.call(this,a,b));return c};function gg(a){this.pa=a.map(function(a){return new Yf(a)})}function hg(a,b,c,d){for(var e=0,f=0;f<a.pa.length&&0==e;++f)e=d(a.pa[f],b[f],c[f]);return e}m=gg.prototype;m.compare=function(a,b){return hg(this,a,b,function(a,b,e){return b==F||e==F?0:a.compare(b,e)})};m.min=function(a,b){return hg(this,a,b,function(a,b,e){return a.min(b,e)})};m.max=function(a,b){return hg(this,a,b,function(a,b,e){return a.max(b,e)})};
m.wb=function(a,b){for(var c=[!0,!0],d=0;d<this.pa.length&&(c[0]||c[1]);++d){var e=this.pa[d].wb(a[d],b[d]);c[0]=c[0]&&e[0];c[1]=c[1]&&e[1]}return c};m.Bb=function(a,b){for(var c=!0,d=0;d<this.pa.length&&c;++d)c=this.pa[d].Bb(a[d],b[d]);return c};m.kd=function(a,b){return this.pa[0].Bb(a[0],b[0])};
m.uf=function(a){var b=a.filter(function(a){return a.every(ga)});a=Array(this.pa.length);for(var c=0;c<a.length;c++)a[c]=b.map(function(a){return a[c]});a.forEach(function(a,b){a.sort(function(a,c){return this.pa[b].he(a,c)}.bind(this))},this);b=Array(b.length);for(c=0;c<b.length;c++)b[c]=a.map(function(a){return a[c]});return b.sort(function(a,b){for(var c=0,d=0;d<this.pa.length&&0==c;++d)c=this.pa[d].he(a[d],b[d]);return c}.bind(this))};m.Xd=function(a){return this.pa[0].Xd(a[0])};
m.ud=function(a){var b=a.map(function(a,b){return this.pa[b].ud(a)[0]},this);a=a.map(function(a,b){return this.pa[b].ud(a)[1]},this);return[b,a]};m.Od=function(a){return a.every(function(a,c){return this.pa[c].Od(a)},this)};m.Zd=function(){return this.pa.length};function ig(a){gg.call(this,a);this.pa=a.map(function(a){return new dg(a)})}r(ig,gg);function jg(a){if(1==a.f.length)return new Yf(a.f[0].order);var b=a.f.map(function(a){return a.order});return a.f.some(function(a){return a.ba.hc()})?new ig(b):new gg(b)};function kg(a){this.fa=a;this.ob=B();this.Oc=new Af;this.za=new Af}m=kg.prototype;m.getName=function(){return this.fa.getName()};m.add=function(a,b){null===a?(this.ob.add(b),this.Oc.add(a,1)):this.fa.add(a,b)};m.set=function(a,b){null===a?(this.ob.clear(),this.Oc.clear(),this.add(a,b)):this.fa.set(a,b)};m.remove=function(a,b){null===a?b?(this.ob.delete(b),this.Oc.remove(a,1)):(this.ob.clear(),this.Oc.clear()):this.fa.remove(a,b)};m.get=function(a){return null===a?C(this.ob):this.fa.get(a)};m.Zc=function(a){return this.fa.Zc(a)};
m.Y=function(){Bf(this.za,[this.fa.Y(),this.Oc]);return this.za};m.Va=function(a,b,c,d){b=this.fa.Va(a,b,c,d);return null!=a?b:b.concat(C(this.ob))};m.clear=function(){this.ob.clear();this.fa.clear()};m.Pa=function(a){return null===a?0!=this.ob.size:this.fa.Pa(a)};m.min=function(){return this.fa.min()};m.max=function(){return this.fa.max()};m.Ja=function(){return[new Zb(-2,C(this.ob))].concat(this.fa.Ja())};m.jb=function(){return this.fa.jb()};
function lg(a,b){for(var c=-1,d=0;d<b.length;++d)if(-2==b[d].id()){c=d;break}if(-1==c)throw new D(102);d=b[c].m;b=b.slice(0);b.splice(c,1);a=a(b);var e=new kg(a);d.forEach(function(a){e.ob.add(a)});return e}m.Ma=function(){return this.fa.Ma()};function mg(a){this.A=a;this.sb=B();this.$=new Yf(1)}m=mg.prototype;m.getName=g("A");m.add=function(a){if("number"!=typeof a)throw new D(103);this.sb.add(a)};m.set=function(a,b){this.add(a,b)};m.remove=function(a){this.sb.delete(a)};m.get=function(a){return this.Pa(a)?[a]:[]};m.min=function(){return this.Hb(this.$.min.bind(this.$))};m.max=function(){return this.Hb(this.$.max.bind(this.$))};
m.Hb=function(a){if(0==this.sb.size)return null;var b=C(this.sb).reduce(function(b,d){return null===b||1==a(d,b)?d:b},null);return[b,[b]]};m.Zc=function(){return this.sb.size};m.Va=function(a,b,c,d){var e=a||[ud()];a=C(this.sb).filter(function(a){return e.some(function(b){return this.$.Bb(a,b)},this)},this);return zf(a,b,c,d)};m.clear=function(){this.sb.clear()};m.Pa=function(a){return this.sb.has(a)};m.Ja=function(){return[new Zb(0,C(this.sb))]};m.jb=g("$");
function ng(a,b){var c=new mg(a);b[0].m.forEach(function(a){c.add(a,a)});return c}m.Ma=l(!0);m.Y=function(){var a=new Af;a.ia=this.sb.size;return a};function og(a){this.Oa=a.b(mc);this.C=a.b(oc);this.V=a.b(nc)}og.prototype.Ea=function(a){var b=a.oa(),c=function(){if(0==b.length)return v();var a=b.shift();return(a.Cb()?pg(this,a):qg(this,a)).then(c)}.bind(this);return c()};function qg(a,b){var c=a.Oa.Fb(0,[b]);a=c.H(b.getName(),b.kb.bind(b),0).get([]).then(function(a){this.V.Wb(b.getName(),a);rg(this,b,a)}.bind(a));c.ka();return a}
function rg(a,b,c){var d=a.C.lc.get(b.getName())||[];c.forEach(function(a){d.forEach(function(b){var c=a.nb(b.getName());b.add(c,a.id())})})}function pg(a,b){var c=a.Oa.Fb(0,[b]),d=c.H(b.getName(),b.kb,0).get([]).then(function(a){this.V.Wb(b.getName(),a)}.bind(a));a=b.Da().map(function(a){return sg(this,a,c)},a).concat(tg(a,b,c));c.ka();return db(a.concat(d))}
function sg(a,b,c){c=c.H(b.j(),ac,1);var d=jg(b);return c.get([]).then(function(a){if(0<a.length){if(ug(b)){var c=Lf.bind(void 0,d,b.j(),b.Dc);a=lg(c,a)}else a=Lf(d,b.j(),b.Dc,a);this.C.set(b.mc,a)}}.bind(a))}function tg(a,b,c){return c.H(cf(b),ac,1).get([]).then(function(a){0<a.length&&(a=ng(cf(b),a),this.C.set(b.getName(),a))}.bind(a))};function vg(){this.Z=y();this.lc=y()}vg.prototype.Ea=function(a){a.oa().forEach(function(a){var b=[];this.lc.set(a.getName(),b);var d=cf(a);if(null===this.get(d)){var e=new mg(d);b.push(e);this.Z.set(d,e)}a.Da().forEach(function(a){var c;c=jg(a);c=new Cf(a.j(),c,a.Dc);c=ug(a)&&1==a.f.length?new kg(c):c;b.push(c);this.Z.set(a.j(),c)},this)},this);return v()};vg.prototype.get=function(a){return this.Z.get(a)||null};
vg.prototype.set=function(a,b){var c=this.lc.get(a)||null;null===c&&(c=[],this.lc.set(a,c));a=null;for(var d=0;d<c.length;d++)if(c[d].getName()==b.getName()){a=d;break}null!==a&&0<c.length?c.splice(a,1,b):c.push(b);this.Z.set(b.getName(),b)};function wg(a,b){var c=[],d=null,e=null;de(a,function(a){var f=b(a);null==a.getParent()?e=f:L(d,f);var k=a.getParent();null!==k&&J(k).length==J(d).length&&(k=c.indexOf(d),-1!=k&&c.splice(k,1));1<J(a).length&&c.push(f);d=null===a.h?c[c.length-1]:f});return e}function xg(a){return yg(a,function(a){return null===a.h})}
function zg(a){var b=a.getParent(),c=0;null!==b&&(c=J(b).indexOf(a),b.removeChild(a));var d=J(a).slice();d.forEach(function(d,f){a.removeChild(d);null===b||ae(b,d,c+f)});return{parent:b,children:d}}function Ag(a,b){J(a).slice().forEach(function(c){a.removeChild(c);L(b,c)});L(a,b)}function Bg(a){var b=$d(a,0);zg(a);Ag(b,a);return b}
function Cg(a,b,c){var d=$d(a,0),e=J(d).slice();if(!e.some(function(a){return b(a)}))return a;zg(a);e.forEach(function(e,h){if(b(e)){var f=c(a);be(d,h);L(f,e);ae(d,f,h)}});return d}function Dg(a,b,c,d){var e=a.getParent();null!==e&&(a=J(e).indexOf(a),be(e,a),ae(e,c,a));J(b).slice().forEach(function(a){b.removeChild(a);L(d,a)});return c}function yg(a,b,c){function d(a){b(a)&&e.push(a);null!=c&&c(a)||J(a).forEach(d)}var e=[];d(a);return e}
function Eg(a,b){var c=b||function(a){return a.toString()+"\n"},d="";de(a,function(a){for(var b=0;b<Zd(a);b++)d+="-";d+=c(a)});return d};function Fg(a){ee.call(this);this.pb=a;this.Wa=!1}r(Fg,ee);m=Fg.prototype;m.Nb=function(){return wg(this,function(a){if(a instanceof Fg){var b=new Fg(a.pb);b.Wa=a.Wa;a=a.W();b.sa=a;return b}return a.Nb()})};m.lb=function(a){var b=a||[];de(this,function(a){a!=this&&a.lb(b)}.bind(this));a=B(b);return C(a)};m.u=function(a){var b=null!=a?a:B();de(this,function(a){a!=this&&a.u(b)}.bind(this));return b};m.vd=function(a){this.Wa!=a&&(this.Wa=a,this.pb="and"==this.pb?"or":"and",J(this).forEach(function(b){return b.vd(a)}))};
m.eval=function(a){var b=J(this).map(function(b){return b.eval(a)});return Gg(this,b)};function Gg(a,b){return"and"==a.pb?Fd(b):Gd(b)}m.toString=function(){return"combined_pred_"+this.pb.toString()};m.we=function(){if("or"==this.pb){var a=new yd;J(this).forEach(function(b){b=b.we().qa();a.add(b)});return a}return new yd};m.ld=function(){return"or"==this.pb?Hg(this):!1};
function Hg(a){var b=null;return J(a).every(function(a){if(!(a instanceof ge&&a.ld()))return!1;null===b&&(b=a.J);return b.j()==a.J.j()})};function Ig(a,b,c){ee.call(this);this.ga=a;this.ma=b;this.F=c;this.ce=null;a=Wd();this.vc=Xd(a,this.ga.I(),this.F);this.ng=a.Ze.get(this.ga.I())||null}r(Ig,ee);m=Ig.prototype;m.Nb=function(){var a=new Ig(this.ga,this.ma,this.F),b=this.W();a.sa=b;return a};m.lb=function(a){return null!=a?(a.push(this.ga),a.push(this.ma),a):[this.ga,this.ma]};m.u=function(a){a=null!=a?a:B();a.add(this.ga.H());a.add(this.ma.H());return a};
m.reverse=function(){var a=this.F;switch(this.F){case "gt":a="lt";break;case "lt":a="gt";break;case "gte":a="lte";break;case "lte":a="gte"}return new Ig(this.ma,this.ga,a)};m.eval=function(a){var b=a.entries.filter(function(a){var b=H(a,this.ga);a=H(a,this.ma);return this.vc(b,a)},this);return new G(b,a.u())};m.toString=function(){return"join_pred("+this.ga.j()+" "+this.F+" "+this.ma.j()+")"};
function Jg(a,b,c){var d;-1!=b.u().indexOf(Kd(a.ga.H()))?(d=b,b=c):d=c;if(d.entries.length>b.entries.length){a:{c=a.ga;a.ga=a.ma;a.ma=c;switch(a.F){case "gt":c="lt";break;case "lt":c="gt";break;case "gte":c="lte";break;case "lte":c="gte";break;default:break a}a.F=c;a.vc=Xd(Wd(),a.ga.I(),a.F)}return[b,d]}return[d,b]}function Kg(a){var b={};a.lb().forEach(function(a){b[a.getName()]=null});return b}
function Lg(a,b,c){null===a.ce&&(a.ce=Kg(a.ma.H()));var d=new Id(new Zb(-1,a.ce),!1);return Md(b,c,d,[Kd(a.ma.H())])}
function Mg(a,b,c,d){var e=[b,c];d||(e=Jg(a,b,c));b=e[0];c=e[1];var e=b,f=c,h=a.ga,k=a.ma;d&&(e=c,f=b,h=a.ma,k=a.ga);var p=new Uc,K=[];e.entries.forEach(function(a){var b=String(H(a,h));p.set(b,a)});var sa=e.u(),ca=f.u();f.entries.forEach(function(a){var b=H(a,k),c=String(b);null!==b&&p.has(c)?p.get(c).forEach(function(b){b=Md(a,ca,b,sa);K.push(b)}):d&&K.push(Lg(this,a,ca))}.bind(a));a=b.u().concat(c.u());return new G(K,a)}
function Ng(a,b,c,d,e){function f(a,b){b=new Id(b,1<sa.length);a=Md(a,ca,b,sa);K.push(a)}var h=d.dg.H(),k=b,p=c;-1!=b.u().indexOf(Kd(h))&&(k=c,p=b);var K=[],sa=p.u(),ca=k.u();k.entries.forEach(function(a){var b=this.ng(H(a,d.wg)),b=d.index.get(b);0!=b.length&&(d.index.Ma()?f(a,e.get(b[0])):vf(e,b).forEach(f.bind(null,a)))},a);a=k.u().concat(p.u());return new G(K,a)};function Og(a,b,c){return null===b?new ge(a,b,c):n(b.j)?new Ig(a,b,c):new ge(a,b,c)};var Pg={};q("lf.schema.DataStoreType",Pg);Pg.INDEXED_DB=0;Pg.MEMORY=1;Pg.LOCAL_STORAGE=2;Pg.FIREBASE=3;Pg.WEB_SQL=4;Pg.OBSERVABLE_STORE=5;function Qg(a,b,c,d){this.mc=a;this.name=b;this.Dc=c;this.f=d}Qg.prototype.j=function(){return this.mc+"."+this.name};function ug(a){return a.f.some(function(a){return a.ba.hc()})}function Q(a,b,c,d){this.A=a;this.ta=c;this.K=b;this.rd=d;this.Ka=null}q("lf.schema.Table",Q);Q.prototype.getName=g("A");Q.prototype.getName=Q.prototype.getName;
function Kd(a){return a.Ka||a.A}Q.prototype.rc=function(a){var b=new this.constructor(this.A);b.Ka=a;b.Ig=this.Ig;return b};Q.prototype.as=Q.prototype.rc;Q.prototype.createRow=Q.prototype.xb;Q.prototype.deserializeRow=Q.prototype.kb;Q.prototype.Da=g("ta");Q.prototype.getIndices=Q.prototype.Da;Q.prototype.lb=g("K");Q.prototype.getColumns=Q.prototype.lb;Q.prototype.getConstraint=Q.prototype.Ne;Q.prototype.Cb=g("rd");Q.prototype.persistentIndex=Q.prototype.Cb;function cf(a){return a.A+".#"};function R(a,b){this.child=a;this.Lb=b;this.Ka=null}m=R.prototype;m.getName=function(){return this.Lb+"("+this.child.getName()+")"};m.j=function(){return this.Lb+"("+this.child.j()+")"};m.H=function(){return this.child.H()};m.toString=function(){return this.j()};m.I=function(){return this.child.I()};m.Da=function(){return[]};m.Ca=l(null);m.hc=l(!1);m.rc=function(a){this.Ka=a;return this};R.prototype.as=R.prototype.rc;
function Rg(a){for(var b=[a];a instanceof R;)b.push(a.child),a=a.child;return b}function Sg(a){this.Ka=a||null;this.U=new Q("#UnknownTable",[],[],!1)}m=Sg.prototype;m.getName=l("*");m.j=function(){return this.getName()};m.toString=function(){return this.j()};m.H=g("U");m.I=l(4);m.Da=function(){return[]};m.Ca=l(null);m.hc=l(!1);q("lf.fn.avg",function(a){return new R(a,"AVG")});function Tg(a){return new R(a||new Sg,"COUNT")}q("lf.fn.count",Tg);function Ug(a){return new R(a,"DISTINCT")}q("lf.fn.distinct",Ug);q("lf.fn.max",function(a){return new R(a,"MAX")});q("lf.fn.min",function(a){return new R(a,"MIN")});q("lf.fn.stddev",function(a){return new R(a,"STDDEV")});q("lf.fn.sum",function(a){return new R(a,"SUM")});q("lf.fn.geomean",function(a){return new R(a,"GEOMEAN")});function S(a,b){I.call(this);this.Uf=b}r(S,I);S.prototype.exec=function(a,b){switch(this.Uf){case 1:return Vg(this,a,b);case 0:return Wg(this,a,b);default:return Xg(this,a,b)}};S.prototype.toString=l("dummy_node");S.prototype.Pc=function(){return this.toString()};function Xg(a,b,c){return new u(function(a){a(this.ca([],b,c))}.bind(a))}function Vg(a,b,c){return $d(a,0).exec(b,c).then(function(a){return this.ca(a,b,c)}.bind(a))}
function Wg(a,b,c){var d=J(a).map(function(a){return a.exec(b,c)});return db(d).then(function(a){var d=[];a.forEach(function(a){for(var b=0;b<a.length;++b)d.push(a[b])});return this.ca(d,b,c)}.bind(a))};function Yg(a){S.call(this,0,1);this.Ce=a}r(Yg,S);Yg.prototype.toString=function(){return"aggregation("+this.Ce.map(function(a){return a.j()}).toString()+")"};Yg.prototype.ca=function(a){a.forEach(function(a){Zg(new $g(a,this.Ce))},this);return a};function $g(a,b){this.Na=a;this.K=b}
function Zg(a){a.K.forEach(function(a){a=Rg(a).reverse();for(var b=1;b<a.length;b++){var d=a[b],e=Rg(d).slice(-1)[0],f=d.child instanceof R?Cd(this.Na,d.child):this.Na;if(null!==f.$a&&f.$a.has(d.j()))break;f=ah(d.Lb,f,e);e=this.Na;null===e.$a&&(e.$a=y());e.$a.set(d.j(),f)}},a)}
function ah(a,b,c){var d=null;switch(a){case "MIN":d=bh(b,c,function(a,b){return b<a?b:a});break;case "MAX":d=bh(b,c,function(a,b){return b>a?b:a});break;case "DISTINCT":d=ch(b,c);break;case "COUNT":d=dh(b,c);break;case "SUM":d=eh(b,c);break;case "AVG":a=dh(b,c);0<a&&(d=eh(b,c)/a);break;case "GEOMEAN":d=fh(b,c);break;default:d=gh(b,c)}return d}function bh(a,b,c){return a.entries.reduce(function(a,e){e=H(e,b);return null===e?a:null===a?e:c(a,e)},null)}
function dh(a,b){return b instanceof Sg?a.entries.length:a.entries.reduce(function(a,d){return a+(null===H(d,b)?0:1)},0)}function eh(a,b){return bh(a,b,function(a,b){return b+a})}function gh(a,b){var c=[];a.entries.forEach(function(a){a=H(a,b);null===a||c.push(a)});return 0==c.length?null:sb.apply(null,c)}function fh(a,b){var c=0;a=a.entries.reduce(function(a,e){e=H(e,b);if(0==e||null===e)return a;c++;return a+Math.log(e)},0);return 0==c?null:Math.pow(Math.E,a/c)}
function ch(a,b){var c=y();a.entries.forEach(function(a){var d=H(a,b);c.set(d,a)});return new G(z(c),a.u())};function hh(a,b){this.Ha=a;this.aa=b}hh.prototype.bb=g("Ha");hh.prototype.da=g("aa");function ih(){I.call(this)}r(ih,I);function jh(a,b){I.call(this);this.table=a;this.values=b}r(jh,ih);function kh(a,b){jh.call(this,a,b)}r(kh,jh);function lh(a){I.call(this);this.table=a}r(lh,ih);lh.prototype.toString=function(){return"delete("+this.table.getName()+")"};function mh(a){I.call(this);this.table=a}r(mh,ih);mh.prototype.toString=function(){return"update("+this.table.getName()+")"};
function nh(a){I.call(this);this.O=a}r(nh,ih);nh.prototype.toString=function(){return"select("+this.O.toString()+")"};function oh(a){I.call(this);this.table=a}r(oh,ih);oh.prototype.toString=function(){var a="table_access("+this.table.getName();null===this.table.Ka||(a+=" as "+this.table.Ka);return a+")"};function ph(){I.call(this)}r(ph,ih);ph.prototype.toString=l("cross_product");function qh(a,b){I.call(this);this.f=a;this.Pb=b}r(qh,ih);
qh.prototype.toString=function(){var a="project("+this.f.toString();if(null!==this.Pb)var b=this.Pb.map(function(a){return a.j()}).join(", "),a=a+(", groupBy("+b+")");return a+")"};function rh(a){I.call(this);this.N=a}r(rh,ih);rh.prototype.toString=function(){return"order_by("+re(this.N)+")"};function sh(a){I.call(this);this.f=a}r(sh,ih);sh.prototype.toString=function(){return"aggregation("+this.f.toString()+")"};function th(a){I.call(this);this.f=a}r(th,ih);
th.prototype.toString=function(){return"group_by("+this.f.toString()+")"};function uh(a){I.call(this);this.X=a}r(uh,ih);uh.prototype.toString=function(){return"limit("+this.X+")"};function vh(a){I.call(this);this.L=a}r(vh,ih);vh.prototype.toString=function(){return"skip("+this.L+")"};function wh(a,b){I.call(this);this.O=a;this.Rb=b}r(wh,ih);wh.prototype.toString=function(){return"join(type: "+(this.Rb?"outer":"inner")+", "+this.O.toString()+")"};function xh(){};function yh(){}r(yh,xh);yh.prototype.gb=function(a){this.G=a;this.ub(this.G);return this.G};yh.prototype.ub=function(a){if(a instanceof nh){var b=zh(this,a.O),b=Ah(this,b);Dg(a,a,b[0],b[1]);a==this.G&&(this.G=b[0]);a=b[0]}J(a).forEach(function(a){this.ub(a)},this)};function zh(a,b){if(0==J(b).length||"and"!=b.pb)return[b];a=J(b).slice().map(function(a){b.removeChild(a);return zh(this,a)},a);return Da(a)}
function Ah(a,b){var c=null,d=null;b.map(function(a,b){a=new nh(a);0==b?c=a:L(d,a);d=a},a);return[c,d]};function Bh(){}r(Bh,xh);Bh.prototype.gb=function(a,b){if(3>b.from.length)return a;this.G=a;this.ub(this.G);return this.G};Bh.prototype.ub=function(a){if(a instanceof ph)for(;2<J(a).length;){for(var b=new ph,c=0;2>c;c++){var d=be(a,0);L(b,d)}ae(a,b,0)}J(a).forEach(function(a){this.ub(a)},this)};function Ch(){S.call(this,0,0)}r(Ch,S);Ch.prototype.toString=l("cross_product");Ch.prototype.ca=function(a){var b=a[0],c=a[1];a=[];for(var d=b.u(),e=c.u(),f=0;f<b.entries.length;f++)for(var h=0;h<c.entries.length;h++){var k=Md(b.entries[f],d,c.entries[h],e);a.push(k)}b=b.u().concat(c.u());return[new G(a,b)]};function Dh(a,b){ue.call(this,a,b);this.Ia=a.b(qc);this.Ib=a.b(rc)}r(Dh,ue);Dh.prototype.getPriority=l(2);Dh.prototype.fe=function(a){0==this.I()?Eh(this,a):this.Mc()};function Eh(a,b){a.td.forEach(function(a,d){a instanceof qe&&xe(this.Ib,a,b[d])},a)}Dh.prototype.Mc=function(){var a=ze(this.Ib,this.da());0!=a.length&&(a=new we(this.global,a),Ae(this.Ia,a))};function Fh(a){ke.call(this,a)}r(Fh,ke);Fh.prototype.da=function(){var a=B();a.add(this.from);Gh(this,this.from.getName(),a);return a};function Gh(a,b,c){var d=Hh(a.ba.info(),b,1);Hh(a.ba.info(),b).forEach(c.add.bind(c));d.forEach(function(a){Gh(this,a.getName(),c)},a)}Fh.prototype.clone=function(){var a=new Fh(this.ba);oe(a,this);a.from=this.from;return a};Fh.prototype.bind=function(a){Fh.hb.bind.call(this,a);pe(this,a);return this};function Ih(a){ke.call(this,a)}r(Ih,ke);Ih.prototype.da=function(){var a=B();a.add(this.La);var b=this.ba.info();Jh(this.La.getName(),b.gf).forEach(a.add.bind(a));this.ac&&Hh(b,this.La.getName()).forEach(a.add.bind(a));return a};Ih.prototype.clone=function(){var a=new Ih(this.ba);oe(a,this);a.La=this.La;this.values&&(a.values=this.values instanceof Nd?this.values:this.values.slice());a.ac=this.ac;a.bc=this.bc;return a};
Ih.prototype.bind=function(a){Ih.hb.bind.call(this,a);this.bc&&(this.values=this.bc instanceof Nd?a[this.bc.Ca()]:this.bc.map(function(b){return b instanceof Nd?a[b.Ca()]:b}));return this};function Kh(a){ke.call(this,a)}r(Kh,ke);Kh.prototype.da=function(){var a=B();a.add(this.table);var b=this.set.map(function(a){return a.J.j()}),c=this.ba.info();Lh(c,b).forEach(a.add.bind(a));Mh(c,b).forEach(a.add.bind(a));return a};Kh.prototype.clone=function(){var a=new Kh(this.ba);oe(a,this);a.table=this.table;a.set=this.set?Nh(this.set):this.set;return a};Kh.prototype.bind=function(a){Kh.hb.bind.call(this,a);this.set.forEach(function(b){-1!=b.Tc&&(b.value=a[b.Tc])});pe(this,a);return this};
function Nh(a){return a.map(function(a){var b={},d;for(d in a)b[d]=a[d];return b})};function Oh(a,b){if(null==b)return"NULL";switch(a){case 1:return b?1:0;case 3:case 4:return b;case 0:return"'"+cc(b)+"'";default:return"'"+b.toString()+"'"}}function Ph(a,b){var c=a.ac?"INSERT OR REPLACE":"INSERT",d=a.La.lb(),c=c+(" INTO "+a.La.getName()+"("),c=c+d.map(function(a){return a.getName()}).join(", "),c=c+") VALUES (";return a.values.map(function(a){var e=d.map(function(c){var d=a.m[c.getName()];return b?null!=d?"#":"NULL":Oh(c.I(),d)});return c+e.join(", ")+");"}).join("\n")}
function Qh(a){switch(a){case "between":return"BETWEEN";case "eq":return"=";case "gte":return">=";case "gt":return">";case "in":return"IN";case "lte":return"<=";case "lt":return"<";case "match":return"LIKE";case "neq":return"<>";default:return"UNKNOWN"}}function Rh(a,b,c,d){return a instanceof Nd?"?"+a.Ca().toString():d?null!=a?"#":"NULL":"match"==b?"'"+a.toString()+"'":"in"==b?"("+a.map(function(a){return Oh(c,a)}).join(", ")+")":"between"==b?Oh(c,a[0])+" AND "+Oh(c,a[1]):Oh(c,a).toString()}
function Sh(a,b){return J(a).map(function(a){return"("+Th(a,b)+")"}).join("and"==a.pb?" AND ":" OR ")}function Uh(a){return[a.ga.j(),Qh(a.F),a.ma.j()].join(" ")}function Th(a,b){if(a instanceof ge){var c=a.J.j(),d=Qh(a.F);a=Rh(a.value,a.F,a.J.I(),b);return"="==d&&"NULL"==a?[c,"IS NULL"].join(" "):"<>"==d&&"NULL"==a?[c,"IS NOT NULL"].join(" "):[c,d,a].join(" ")}if(a instanceof Fg)return Sh(a,b);if(a instanceof Ig)return Uh(a);throw new D(357,typeof a);}
function Vh(a,b){return(a=Th(a,b))?" WHERE "+a:""}function Wh(a,b){var c="UPDATE "+a.table.getName()+" SET ",c=c+a.set.map(function(a){var b=a.J.j()+" = ";return-1!=a.Tc?b+"?"+a.Tc.toString():b+Oh(a.J.I(),a.value).toString()}).join(", ");a.w&&(c+=Vh(a.w,b));return c+";"}
function Xh(a,b){var c="*";a.f.length&&(c=a.f.map(function(a){return a.Ka?a.j()+" AS "+a.Ka:a.j()}).join(", "));c="SELECT "+c+" FROM ";null!=a.eb&&0!=a.eb.size?c+=Yh(a,b):(c+=a.from.map(Zh).join(", "),a.w&&(c+=Vh(a.w,b)));a.N&&(b=a.N.map(function(a){return a.J.j()+(0==a.order?" DESC":" ASC")}).join(", "),c+=" ORDER BY "+b);a.ra&&(b=a.ra.map(function(a){return a.j()}).join(", "),c+=" GROUP BY "+b);a.X&&(c+=" LIMIT "+a.X.toString());a.L&&(c+=" SKIP "+a.L.toString());return c+";"}
function Zh(a){return Kd(a)!=a.getName()?a.getName()+" AS "+Kd(a):a.getName()}function Yh(a,b){for(var c=yg(a.w,function(a){return a instanceof Ig}),d=c.map(Uh),e=Zh(a.from[0]),f=1;f<a.from.length;f++)var h=Zh(a.from[f]),e=a.eb.has(c[d.length-f].W())?e+(" LEFT OUTER JOIN "+h):e+(" INNER JOIN "+h),e=e+(" ON ("+d[d.length-f]+")");a=$d(a.w,0);a instanceof Ig||(e+=" WHERE "+Th(a,b));return e}
function $h(a,b){b=b||!1;a=a.query.clone();if(a instanceof Ih)return Ph(a,b);if(a instanceof Fh){var c="DELETE FROM "+a.from.getName();a.w&&(c+=Vh(a.w,b));return c+";"}if(a instanceof Kh)return Wh(a,b);if(a instanceof qe)return Xh(a,b);throw new D(358,typeof a);};function T(a,b){this.global=a;this.Hg=a.b(pc);this.Ia=a.b(qc);this.query=b}q("lf.query.BaseBuilder",T);T.prototype.exec=function(){try{this.ab()}catch(a){return ab(a)}return new u(function(a,b){var c=new Dh(this.global,[this.Bc()]);Ae(this.Ia,c).then(function(b){a(Ad(b[0]))},b)},this)};T.prototype.exec=T.prototype.exec;T.prototype.Wf=function(){var a=function(a){return a.Pc(this.query)+"\n"}.bind(this);return Eg(ai(this).bb(),a)};T.prototype.explain=T.prototype.Wf;
T.prototype.bind=function(a){this.query.bind(a);return this};T.prototype.bind=T.prototype.bind;T.prototype.Pg=function(a){return $h(this,a)};T.prototype.toSql=T.prototype.Pg;T.prototype.ab=aa();function ai(a){if(null==a.hf){var b;b=a.Hg;var c=a.query,d=b.qg.create(c);b=b.Eg.create(d,c);a.hf=b}return a.hf}T.prototype.Bc=function(){return{context:this.query.clone(),ie:ai(this)}};function bi(a){T.call(this,a,new Fh(a.b(sc)))}r(bi,T);q("lf.query.DeleteBuilder",bi);bi.prototype.from=function(a){if(null!=this.query.from)throw new D(515);this.query.from=a;return this};bi.prototype.from=bi.prototype.from;bi.prototype.w=function(a){this.Fd();this.query.w=a;return this};bi.prototype.where=bi.prototype.w;bi.prototype.Fd=function(){if(null==this.query.from)throw new D(548);if(null!=this.query.w)throw new D(516);};
bi.prototype.ab=function(){bi.hb.ab.call(this);if(null==this.query.from)throw new D(517);};function ci(a,b){T.call(this,a,new Ih(a.b(sc)));this.query.ac=b||!1}r(ci,T);q("lf.query.InsertBuilder",ci);ci.prototype.ab=function(){ci.hb.ab.call(this);var a=this.query;if(null==a.La||null==a.values)throw new D(518);if(a.ac&&null===a.La.Mb.sd)throw new D(519);};ci.prototype.La=function(a){if(null!=this.query.La)throw new D(520);this.query.La=a;return this};ci.prototype.into=ci.prototype.La;
ci.prototype.values=function(a){if(null!=this.query.values)throw new D(521);a instanceof Nd||a.some(function(a){return a instanceof Nd})?this.query.bc=a:this.query.values=a;return this};ci.prototype.values=ci.prototype.values;function di(a){return ei("and",Array.prototype.slice.call(arguments))}q("lf.op.and",di);q("lf.op.or",function(a){return ei("or",Array.prototype.slice.call(arguments))});function ei(a,b){var c=new Fg(a);b.forEach(function(a){L(c,a)});return c}q("lf.op.not",function(a){a.vd(!0);return a});function U(a,b){T.call(this,a,new qe(a.b(sc)));this.Me=this.Ad=!1;this.query.f=b;fi(this);gi(this)}r(U,T);q("lf.query.SelectBuilder",U);U.prototype.ab=function(){U.hb.ab.call(this);var a=this.query;if(null==a.from)throw new D(522);if(n(a.Sb)&&!n(a.X)||n(a.Zb)&&!n(a.L))throw new D(523);null!=this.query.ra?hi(this):ii(this)};function fi(a){var b=a.query.f.filter(function(a){return a instanceof R&&"DISTINCT"==a.Lb},a);if(0!=b.length&&(1!=b.length||1!=a.query.f.length))throw new D(524);}
function hi(a){if(a.query.ra.some(function(a){a=a.I();return 6==a||0==a}))throw new D(525);}function ii(a){var b=a.query.f.some(function(a){return a instanceof R},a);a=a.query.f.some(function(a){return!(a instanceof R)},a)||0==a.query.f.length;if(b&&a)throw new D(526);}function gi(a){a.query.f.forEach(function(a){if(a instanceof R&&!ji(a.Lb,a.I()))throw new D(527,a.j());},a)}function ki(a,b){if(null==a.query.from)throw new D(b);}
U.prototype.from=function(a){if(this.Me)throw new D(515);this.Me=!0;null==this.query.from&&(this.query.from=[]);this.query.from.push.apply(this.query.from,Array.prototype.slice.call(arguments));return this};U.prototype.from=U.prototype.from;U.prototype.w=function(a){ki(this,548);if(this.Ad)throw new D(516);this.Ad=!0;li(this,a);return this};U.prototype.where=U.prototype.w;function li(a,b){null!=a.query.w&&(b=di(b,a.query.w));a.query.w=b}
U.prototype.hg=function(a,b){ki(this,542);if(this.Ad)throw new D(547);this.query.from.push(a);li(this,b);return this};U.prototype.innerJoin=U.prototype.hg;U.prototype.og=function(a,b){ki(this,542);if(!(b instanceof Ig))throw new D(541);if(this.Ad)throw new D(547);this.query.from.push(a);null==this.query.eb&&(this.query.eb=B());var c=b;Kd(a)!=Kd(b.ma.H())&&(c=b.reverse());this.query.eb.add(c.W());li(this,c);return this};U.prototype.leftOuterJoin=U.prototype.og;
U.prototype.X=function(a){if(null!=(this.query.X||this.query.Sb))throw new D(528);if(a instanceof Nd)this.query.Sb=a;else{if(0>a)throw new D(531);this.query.X=a}return this};U.prototype.limit=U.prototype.X;U.prototype.L=function(a){if(null!=(this.query.L||this.query.Zb))throw new D(529);if(a instanceof Nd)this.query.Zb=a;else{if(0>a)throw new D(531);this.query.L=a}return this};U.prototype.skip=U.prototype.L;
U.prototype.N=function(a,b){ki(this,549);null==this.query.N&&(this.query.N=[]);this.query.N.push({J:a,order:null!=b?b:1});return this};U.prototype.orderBy=U.prototype.N;U.prototype.ra=function(a){ki(this,549);if(null!=this.query.ra)throw new D(530);null==this.query.ra&&(this.query.ra=[]);this.query.ra.push.apply(this.query.ra,Array.prototype.slice.call(arguments));return this};U.prototype.groupBy=U.prototype.ra;
function ji(a,b){switch(a){case "COUNT":case "DISTINCT":return!0;case "AVG":case "GEOMEAN":case "STDDEV":case "SUM":return 4==b||3==b;case "MAX":case "MIN":return 4==b||3==b||5==b||2==b}return!1}U.prototype.clone=function(){var a=new U(this.global,this.query.f);a.query=this.query.clone();a.query.Wc=null;return a};U.prototype.clone=U.prototype.clone;function mi(a,b){T.call(this,a,new Kh(a.b(sc)));this.query.table=b}r(mi,T);q("lf.query.UpdateBuilder",mi);mi.prototype.set=function(a,b){a={Tc:b instanceof Nd?b.Ca():-1,J:a,value:b};null!=this.query.set?this.query.set.push(a):this.query.set=[a];return this};mi.prototype.set=mi.prototype.set;mi.prototype.w=function(a){this.Fd();this.query.w=a;return this};mi.prototype.where=mi.prototype.w;mi.prototype.Fd=function(){if(null!=this.query.w)throw new D(516);};
mi.prototype.ab=function(){mi.hb.ab.call(this);if(null==this.query.set)throw new D(532);if(this.query.set.some(function(a){return a.value instanceof Nd}))throw new D(501);};function ni(a){this.query=a;this.Ha=null}ni.prototype.gc=function(){null===this.Ha&&(this.Ha=this.ad());return this.Ha};function oi(a){ni.call(this,a)}r(oi,ni);oi.prototype.ad=function(){return this.query.ac?new kh(this.query.La,this.query.values):new jh(this.query.La,this.query.values)};function pi(a){ni.call(this,a)}r(pi,ni);pi.prototype.ad=function(){var a=new mh(this.query.table),b=null!=this.query.w?new nh(this.query.w.Nb()):null,c=new oh(this.query.table);null===b?L(a,c):(L(b,c),L(a,b));return a};function qi(a,b,c){this.Ha=a;this.ke=b;this.Vb=c}qi.prototype.gc=function(){this.Vb.forEach(function(a){this.Ha=a.gb(this.Ha,this.ke)},this);return this.Ha};function ri(a,b){ni.call(this,a);this.Vb=b}r(ri,ni);ri.prototype.ad=function(){var a=new lh(this.query.from),b=null!=this.query.w?new nh(this.query.w.Nb()):null,c=new oh(this.query.from);null===b?L(a,c):(L(b,c),L(a,b));return(new qi(a,this.query,this.Vb)).gc()};function si(){}r(si,xh);si.prototype.gb=function(a,b){if(2>b.from.length)return a;this.G=a;this.ub(this.G,b);return this.G};si.prototype.ub=function(a,b){if(a instanceof nh&&a.O instanceof Ig){var c=a.O.W(),d=$d(a,0);d instanceof ph&&(c=null!=b.eb&&b.eb.has(c),c=new wh(a.O,c),Dg(a,d,c,c),a==this.G&&(this.G=c),a=c)}J(a).forEach(function(a){this.ub(a,b)},this)};function ti(){this.Sc=B()}r(ti,xh);ti.prototype.gb=function(a,b){if(!n(b.w))return a;this.Sc.clear();this.G=a;this.ub(this.G,b);this.Sc.clear();return this.G};ti.prototype.ub=function(a,b){var c=function(a){J(a).forEach(d)}.bind(this),d=function(a){if(!this.Sc.has(a)){if(a instanceof nh){var e=a.O.u(),h=function(a){return ui(this,a,e)}.bind(this),h=vi(this,b,a,h);this.Sc.add(a);h!=a&&(null===h.getParent()&&(this.G=h),d(h))}c(a)}}.bind(this);d(a)};
function vi(a,b,c,d){var e=c;if(wi(b,c))e=Bg(c),vi(a,b,c,d);else if(xi(c)){var f=[],e=Cg(c,d,function(a){a=new nh(a.O);f.push(a);return a});f.forEach(function(a){vi(this,b,a,d)},a)}return e}function ui(a,b,c){var d=B();xg(b).forEach(function(a){d.add(a.table)},a);b instanceof oh&&d.add(b.table);return yc(d,c)}function xi(a){a=$d(a,0);return a instanceof ph||a instanceof wh}
function wi(a,b){var c=$d(b,0);if(!(c instanceof nh))return!1;if(null==a.eb)return!0;b=b.O instanceof Ig;a=a.eb.has(c.O.W());return b||!a};function yi(a,b){ni.call(this,a);this.Vb=b;this.kf=this.cf=this.tf=this.ff=this.De=this.Se=this.sf=this.Je=this.vf=null}r(yi,ni);
yi.prototype.ad=function(){zi(this);2<=this.query.from.length&&(this.Je=new ph);this.sf=null!=this.query.w?new nh(this.query.w.Nb()):null;this.query.N&&(this.ff=new rh(this.query.N));null!=this.query.L&&0<this.query.L&&(this.tf=new vh(this.query.L));null!=this.query.X&&(this.cf=new uh(this.query.X));null!=this.query.ra&&(this.Se=new th(this.query.ra));Ai(this);this.kf=new qh(this.query.f||[],this.query.ra||null);var a=Bi(this);return(new qi(a,this.query,this.Vb)).gc()};
function Bi(a){for(var b=[a.cf,a.tf,a.kf,a.ff,a.De,a.Se,a.sf,a.Je],c=-1,d=null,e=0;e<b.length;e++){var f=b[e];null!==f&&(null===d?d=f:L(b[c],f),c=e)}a.vf.forEach(function(a){L(b[c],a)});return d}function zi(a){a.vf=a.query.from.map(function(a){return new oh(a)},a)}function Ai(a){var b=a.query.f.filter(function(a){return a instanceof R});null!=a.query.N&&a.query.N.forEach(function(a){a.J instanceof R&&b.push(a.J)});0<b.length&&(a.De=new sh(b))};function Ci(){this.re=[new yh,new Bh,new ti,new si];this.Pd=[new yh]}Ci.prototype.create=function(a){var b;if(a instanceof Ih)b=new oi(a);else if(a instanceof Fh)b=new ri(a,this.Pd);else if(a instanceof qe)b=new yi(a,this.re);else if(a instanceof Kh)b=new pi(a);else throw new D(513);b=b.gc();return new hh(b,a.da())};function Di(a){S.call(this,0,1);this.U=a}r(Di,S);Di.prototype.toString=function(){return"delete("+this.U.getName()+")"};Di.prototype.ca=function(a,b){a=a[0].entries.map(function(a){return a.va});b.remove(this.U,a);return[Ed()]};function Ei(a,b){S.call(this,0,-1);this.table=b;this.C=a.b(oc)}r(Ei,S);Ei.prototype.toString=function(){return"get_row_count("+this.table.getName()+")"};Ei.prototype.ca=function(){var a=this.C.get(cf(this.table)),b=new G([],[this.table.getName()]),c=Tg(),a=a.Y().ia;null===b.$a&&(b.$a=y());b.$a.set(c.j(),a);return[b]};function Fi(a,b){S.call(this,0,-1);this.V=a.b(nc);this.C=a.b(oc);this.table=b}r(Fi,S);Fi.prototype.toString=function(){var a="table_access("+this.table.getName();null===this.table.Ka||(a+=" as "+this.table.Ka);return a+")"};Fi.prototype.ca=function(){var a=this.C.get(cf(this.table)).Va();return[Hd(vf(this.V,a),[Kd(this.table)])]};function Gi(a){this.c=a}r(Gi,xh);Gi.prototype.gb=function(a,b){this.G=a;if(!this.Hd(b))return a;a=yg(a,function(a){return a instanceof Fi})[0];b=new Ei(this.c,a.table);Dg(a,a,b,b);return this.G};Gi.prototype.Hd=function(a){return 1==a.f.length&&1==a.from.length&&null==a.w&&null==a.X&&null==a.L&&null==a.ra?(a=a.f[0],a instanceof R&&"COUNT"==a.Lb&&a.child instanceof Sg):!1};function Hi(a){S.call(this,0,1);this.Re=a}r(Hi,S);Hi.prototype.toString=function(){return"groupBy("+this.Re.map(function(a){return a.j()}).toString()+")"};Hi.prototype.ca=function(a){return Ii(this,a[0])};function Ii(a,b){var c=new Uc,d=function(a){return this.Re.map(function(b){return H(a,b)},this).join(",")}.bind(a);b.entries.forEach(function(a){c.set(d(a),a)},a);return c.keys().map(function(a){return new G(c.get(a),b.u())},a)};function Ji(a,b,c){S.call(this,0,0);this.C=a.b(oc);this.V=a.b(nc);this.O=b;this.Rb=c;this.Dd="eq"==this.O.F?0:2;this.Ue=null}r(Ji,S);var Ki=["hash","index_nested_loop","nested_loop"];Ji.prototype.toString=function(){return"join(type: "+(this.Rb?"outer":"inner")+", impl: "+Ki[this.Dd]+", "+this.O.toString()+")"};
Ji.prototype.ca=function(a){switch(this.Dd){case 0:return[Mg(this.O,a[0],a[1],this.Rb)];case 1:return[Ng(this.O,a[0],a[1],this.Ue,this.V)];default:var b=this.O,c=a[0];a=a[1];var d=this.Rb,e=[c,a];d||(e=Jg(b,c,a));c=e[0];a=e[1];for(var e=[],f=c.u(),h=a.u(),k=c.entries.length,p=a.entries.length,K=p+256-1>>8,sa=0;sa<K;){for(var ca=0;ca<k;ca++){var Cb=!1,bg=H(c.entries[ca],b.ga);if(null!==bg)for(var Ni=Math.min(sa+1<<8,p),Db=sa<<8;Db<Ni;Db++)if(b.vc(bg,H(a.entries[Db],b.ma))){var Cb=!0,Tc=Md(c.entries[ca],
f,a.entries[Db],h);e.push(Tc)}d&&!Cb&&e.push(Lg(b,c.entries[ca],f))}sa++}b=c.u().concat(a.u());return[new G(e,b)]}};function Li(a,b){a.Dd=1;var c=a.C.get(b.Ca().j());a.Ue={dg:b,wg:b==a.O.ga?a.O.ma:a.O.ga,index:c}};function Mi(a){S.call(this,0,-1);this.lf=a}r(Mi,S);Mi.prototype.toString=function(){return"no_op_step("+this.lf[0].u().join(",")+")"};Mi.prototype.ca=g("lf");function Oi(){}r(Oi,xh);Oi.prototype.gb=function(a,b){this.G=a;if(!this.Hd(b))return a;yg(a,function(a){return a instanceof Ji}).forEach(this.Gg,this);return this.G};Oi.prototype.Hd=function(a){return 1<a.from.length};
Oi.prototype.Gg=function(a){if("eq"==a.O.F&&!a.Rb){var b=function(b){if(!(b instanceof Fi))return null;b=Kd(b.table)==Kd(a.O.ma.H())?a.O.ma:a.O.ga;return null===b.Ca()?null:b},c=b($d(a,0)),b=b($d(a,1));if(null!==c||null!==b){b=null===b?c:b;Li(a,b);var d=new G([],[Kd(b.H())]);ce(a,new Mi([d]),b==c?0:1)}}};function Pi(a){a=a.map(function(a){return a.qa()});a=xb.apply(null,a);var b=[];wb(a,function(a){b.push(a)});return b}function Qi(a){this.Qb=a}Qi.prototype.bd=function(){return 1==this.Qb.f.length?[ud()]:[this.Qb.f.map(function(){return ud()})]};function Ri(a,b){this.Qb=a;this.Ga=b;this.Ld=this.af=null}
function Si(a,b){var c=y();a.Ga.keys().forEach(function(a){var d=this.Ga.get(a).map(function(a){return le(b,a)},this),f=new yd([ud()]);d.forEach(function(a){f=zd(f,a.we())});c.set(a,f)},a);return c}Ri.prototype.bd=function(a){if(this.af==a)return this.Ld;for(var b=Si(this,a),c=this.Qb.f.length-1;0<=c;c--){var d=this.Qb.f[c];if(null!==(b.get(d.ba.getName())||null))break;b.set(d.ba.getName(),new yd([ud()]))}this.Ld=1==this.Qb.f.length?z(b)[0].qa():Pi(Ti(this,b));this.af=a;return this.Ld};
function Ti(a,b){var c=y(),d=0;a.Qb.f.forEach(function(a){c.set(a.ba.getName(),d);d++});return Yb(b).sort(function(a,b){return c.get(a)-c.get(b)}).map(function(a){return b.get(a)})};function Ui(a,b){this.xd=b;this.C=a.b(oc)}function Vi(a){a=a.C.get(cf(a.xd));return Math.floor(.02*a.Y().ia)}function Wi(a,b,c){c=c.filter(a.kg,a);if(0==c.length)return null;a=Xi(a,c);if(0==a.length)return null;if(1==a.length)return a[0];var d=Number.MAX_VALUE;return a.reduce(function(a,c){var e=Yi(c,b);return e<d?(d=e,c):a},null)}
function Xi(a,b){return a.xd.Da().map(function(a){a=new Zi(this.C,a);$i(a,b);return a},a).filter(function(a){if(null===a.Ga)a=!1;else{for(var b=!1,c=!0,f=0;f<a.cb.f.length;f++){var h=a.Ga.has(a.cb.f[f].ba.getName());if(b&&h){c=!1;break}h||(b=!0)}a=c}return a})}Ui.prototype.kg=function(a){return a instanceof ge?!a.ld()||a.J.H()!=this.xd||"in"==a.F&&a.value.length>Vi(this)?!1:!0:a instanceof Fg?a.ld()&&$d(a,0).J.H()==this.xd?J(a).length<=Vi(this):!1:!1};
function Zi(a,b){this.C=a;this.cb=b;this.eg=B(this.cb.f.map(function(a){return a.ba.getName()}));this.$d=this.Ga=null}function aj(a){null===a.$d&&(a.$d=new Ri(a.cb,a.Ga));return a.$d}function $i(a,b){b.forEach(function(a){var b=a.lb()[0].getName();this.eg.has(b)&&(null===this.Ga&&(this.Ga=new Uc),this.Ga.set(b,a.W()))},a)}function Yi(a,b){b=aj(a).bd(b);var c=a.C.get(a.cb.j());return b.reduce(function(a,b){return a+c.Zc(b)},0)};function bj(a,b,c,d){S.call(this,0,-1);this.C=a.b(oc);this.index=b;this.$e=c;this.oe=d;this.Rc=this.Qc=!1}r(bj,S);bj.prototype.toString=function(){return"index_range_scan("+this.index.j()+", ?, "+(this.oe?"reverse":"natural")+(this.Qc?", limit:?":"")+(this.Rc?", skip:?":"")+")"};bj.prototype.Pc=function(a){var b=this.toString(),c=this.$e.bd(a),b=b.replace("?",c.toString());this.Qc&&(b=b.replace("?",a.X.toString()));this.Rc&&(b=b.replace("?",a.L.toString()));return b};
bj.prototype.ca=function(a,b,c){a=this.$e.bd(c);b=this.C.get(this.index.j());c=(1==a.length&&a[0]instanceof E&&vd(a[0])?zf(b.get(a[0].from),!1,this.Qc?c.X:void 0,this.Rc?c.L:void 0):b.Va(a,this.oe,this.Qc?c.X:void 0,this.Rc?c.L:void 0)).map(function(a){return new Zb(a,{})},this);return[Hd(c,[this.index.mc])]};function cj(){S.call(this,0,0)}r(cj,S);cj.prototype.toString=l("multi_index_range_scan()");
cj.prototype.ca=function(a){var b=y();a.forEach(function(a){a.entries.forEach(function(a){b.set(a.va.id(),a)})});var c=z(b);return[new G(c,a[0].u())]};function dj(a){S.call(this,0,1);this.jc=a}r(dj,S);dj.prototype.toString=l("select(?)");dj.prototype.Pc=function(a){a=le(a,this.jc);return this.toString().replace("?",a.toString())};dj.prototype.ca=function(a,b,c){return[le(c,this.jc).eval(a[0])]};function ej(a,b){S.call(this,0,1);this.V=a.b(nc);this.U=b}r(ej,S);ej.prototype.toString=function(){return"table_access_by_row_id("+this.U.getName()+")"};ej.prototype.ca=function(a){return[Hd(vf(this.V,Bd(a[0])),[Kd(this.U)])]};function fj(a){this.c=a}r(fj,xh);fj.prototype.gb=function(a,b){this.G=a;yg(a,function(a){return a instanceof Fi}).forEach(function(a){var c=gj(a);if(0!=c.length){var e=Wi(new Ui(this.c,a.table),b,c.map(function(a){return le(b,a.jc)}));if(null!==e){var f=y();c.forEach(function(a){f.set(a.jc,a)},this);this.G=hj(this,e,f,a)}}},this);return this.G};function gj(a){var b=[];for(a=a.getParent();a;){if(a instanceof dj)b.push(a);else if(a instanceof Ji)break;a=a.getParent()}return b}
function hj(a,b,c,d){(null===b.Ga?[]:b.Ga.values()).map(function(a){return c.get(a)}).forEach(zg);b=new bj(a.c,b.cb,aj(b),!1);a=new ej(a.c,d.table);L(a,b);Dg(d,d,a,b);return b.bb()};function ij(a,b){S.call(this,0,-1);this.C=a.b(oc);this.U=b}r(ij,S);ij.prototype.toString=function(){return"insert("+this.U.getName()+")"};ij.prototype.ca=function(a,b,c){jj(this.U,c.values,this.C);b.Ab(this.U,c.values);return[Hd(c.values,[this.U.getName()])]};function jj(a,b,c){a=a.Mb.sd;if(null===a?0:a.f[0].autoIncrement){var d=a.f[0].ba.getName();c=c.get(a.j()).Y().Fc;var e=null===c?0:c;b.forEach(function(a){if(0==a.m[d]||null==a.m[d])e++,a.m[d]=e})}}
function kj(a,b){S.call(this,0,-1);this.C=a.b(oc);this.U=b}r(kj,S);kj.prototype.toString=function(){return"insert_replace("+this.U.getName()+")"};kj.prototype.ca=function(a,b,c){jj(this.U,c.values,this.C);b.Wd(this.U,c.values);return[Hd(c.values,[this.U.getName()])]};function lj(){S.call(this,0,1)}r(lj,S);lj.prototype.toString=l("limit(?)");lj.prototype.Pc=function(a){return this.toString().replace("?",a.X.toString())};lj.prototype.ca=function(a,b,c){a[0].entries.splice(c.X);return a};function mj(a){S.call(this,0,1);this.N=a}r(mj,S);m=mj.prototype;m.toString=function(){return"order_by("+re(this.N)+")"};m.ca=function(a){if(1==a.length){var b;b=a[0];for(var c=null,d=0;d<this.N.length;d++){var e=Ug(this.N[d].J);if(null!==b.$a&&b.$a.has(e.j())){c=e;break}}b=c;(null===b?a[0]:Cd(a[0],b)).entries.sort(this.Tf.bind(this))}else a.sort(this.Jg.bind(this));return a};
m.$=function(a,b){var c,d,e,f=-1;do f++,e=this.N[f].J,c=this.N[f].order,d=a(e),e=b(e);while(d==e&&f+1<this.N.length);a=d<e?-1:d>e?1:0;return 1==c?a:-a};m.Jg=function(a,b){return this.$(function(b){return b instanceof R?Cd(a,b):H(a.entries[a.entries.length-1],b)},function(a){return a instanceof R?Cd(b,a):H(b.entries[b.entries.length-1],a)})};m.Tf=function(a,b){return this.$(function(b){return H(a,b)},function(a){return H(b,a)})};function nj(a,b){this.Na=a;this.K=b}function oj(a){return a.K.some(function(a){return a instanceof R},a)?pj(a):qj(a)}function pj(a){if(1==a.K.length&&"DISTINCT"==a.K[0].Lb)return a=Cd(a.Na,a.K[0]).entries.map(function(a){var b=new Id(new Zb(-1,{}),1<this.Na.M.size);Ld(b,this.K[0],H(a,this.K[0].child));return b},a),new G(a,[]);var b=new Id(new Zb(-1,{}),1<a.Na.M.size);a.K.forEach(function(a){var c=a instanceof R?Cd(this.Na,a):H(this.Na.entries[0],a);Ld(b,a,c)},a);return new G([b],a.Na.u())}
function qj(a){var b=Array(a.Na.entries.length),c=1<a.Na.M.size;a.Na.entries.forEach(function(a,e){b[e]=new Id(new Zb(a.va.id(),{}),c);this.K.forEach(function(c){Ld(b[e],c,H(a,c))},this)},a);return new G(b,a.Na.u())}function rj(a,b){var c=a.map(function(a){return oj(new nj(a,b)).entries[0]});return new G(c,a[0].u())};function sj(a,b){S.call(this,0,1);this.f=a;this.Pb=b}r(sj,S);sj.prototype.toString=function(){var a="project("+this.f.toString();if(null!==this.Pb)var b=this.Pb.map(function(a){return a.j()}).join(", "),a=a+(", groupBy("+b+")");return a+")"};sj.prototype.ca=function(a){0==a.length?a=[Ed()]:1==a.length?(a=a[0],a=[0==this.f.length?a:oj(new nj(a,this.f))]):a=[rj(a,this.f)];return a};function tj(a){return a.f.some(function(a){return a instanceof R})||null!==a.Pb};function uj(){S.call(this,0,1)}r(uj,S);uj.prototype.toString=l("skip(?)");uj.prototype.Pc=function(a){return this.toString().replace("?",a.L.toString())};uj.prototype.ca=function(a,b,c){return[new G(a[0].entries.slice(c.L),a[0].u())]};function vj(){}r(vj,xh);vj.prototype.gb=function(a,b){if(!n(b.X)&&!n(b.L))return a;var c=wj(a);if(null===c)return a;yg(a,function(a){return a instanceof lj||a instanceof uj}).forEach(function(a){a instanceof lj?c.Qc=!0:c.Rc=!0;zg(a)},this);return c.bb()};function wj(a){a=yg(a,function(a){return a instanceof bj},function(a){return a instanceof sj&&tj(a)||a instanceof mj||1!=J(a).length||a instanceof dj});return 0<a.length?a[0]:null};function xj(a){this.c=a}r(xj,xh);xj.prototype.gb=function(a,b){this.G=a;var c=yj(this,b);if(0==c.length)return this.G;var d,e=0;do d=c[e++],a=zj(this,d,b);while(null===a&&e<c.length);if(null===a)return this.G;b=Aj(this,a[0].cb.mc);return null===b?this.G:this.G=Bj(this,d,b,a)};function yj(a,b){return yg(a.G,function(a){if(!(a instanceof dj))return!1;a=le(b,a.jc);return a instanceof Fg&&"or"==a.pb})}function Aj(a,b){return yg(a.G,function(a){return a instanceof Fi&&a.table.getName()==b})[0]||null}
function zj(a,b,c){b=le(c,b.jc);var d=b.u();if(1!=d.size)return null;var d=C(d)[0],e=new Ui(a.c,d),f=null;return J(b).every(function(a){a=Wi(e,c,[a]);null===a||(null===f?f=[a]:f.push(a));return null!==a})?f:null}function Bj(a,b,c,d){var e=new ej(a.c,c.table),f=new cj;L(e,f);d.forEach(function(a){a=new bj(this.c,a.cb,aj(a),!1);L(f,a)},a);zg(b);Dg(c,c,e,f);return f.bb()};function Cj(a){this.c=a}r(Cj,xh);Cj.prototype.gb=function(a,b){b=Dj(a,b);if(null===b)return a;a:{var c=b;a=Ej($d(b,0));if(null!==a){var d;d=b.N;for(var e=null,f=a.table.Da(),h=0;h<f.length&&null===e;h++)e=Fj(f[h],d);d=e;if(null===d){a=c;break a}c=new bj(this.c,d.cb,new Qi(d.cb),d.Xe);d=new ej(this.c,a.table);L(d,c);zg(b);c=Dg(a,a,d,c)}a=c}a==b&&(a=b,c=Gj($d(b,0)),null!==c&&(d=Fj(c.index,b.N),null!==d&&(c.oe=d.Xe,a=zg(b).parent)));return a.bb()};
function Gj(a){a=yg(a,function(a){return a instanceof bj},function(a){return 1!=J(a).length});return 0<a.length?a[0]:null}function Ej(a){a=yg(a,function(a){return a instanceof Fi},function(a){return 1!=J(a).length});return 0<a.length?a[0]:null}function Dj(a,b){return n(b.N)?yg(a,function(a){return a instanceof mj})[0]:null}function Fj(a,b){if(a.f.length!=b.length||!b.every(function(b,d){return b.J.getName()==a.f[d].ba.getName()}))return null;b=Hj(b,a);return b[0]||b[1]?{cb:a,Xe:b[1]}:null}
function Hj(a,b){var c=a.reduce(function(a,b){return a<<1|(0==b.order?0:1)},0),d=b.f.reduce(function(a,b){return a<<1|(0==b.order?0:1)},0),c=c^d;return[0==c,c==Math.pow(2,Math.max(a.length,b.f.length))-1]};function Ij(a,b,c){this.Ha=a;this.ke=b;this.Vb=c}Ij.prototype.gc=function(){this.Vb.forEach(function(a){this.Ha=a.gb(this.Ha,this.ke)},this);return this.Ha};function Jj(a){S.call(this,0,1);this.U=a}r(Jj,S);Jj.prototype.toString=function(){return"update("+this.U.getName()+")"};Jj.prototype.ca=function(a,b,c){a=a[0].entries.map(function(a){var b=this.U.kb(a.va.Ja());c.set.forEach(function(a){b.m[a.J.getName()]=a.value},this);return b},this);b.update(this.U,a);return[Ed()]};function Kj(a){this.c=a;this.re=[new Oi,new fj(this.c),new xj(this.c),new Cj(this.c),new vj,new Gi(this.c)];this.Pd=[new fj(this.c)]}Kj.prototype.create=function(a,b){var c=a.bb();if(c instanceof kh||c instanceof jh)return Lj(this,a,b);if(c instanceof qh||c instanceof uh||c instanceof vh)return Lj(this,a,b,this.re);if(c instanceof lh||c instanceof mh)return Lj(this,a,b,this.Pd);throw new D(8);};
function Lj(a,b,c,d){a=wg(b.bb(),a.tg.bind(a));null!=d&&(a=(new Ij(a,c,d)).gc());return new se(a,b.da())}
Kj.prototype.tg=function(a){if(a instanceof qh)return new sj(a.f,a.Pb);if(a instanceof th)return new Hi(a.f);if(a instanceof sh)return new Yg(a.f);if(a instanceof rh)return new mj(a.N);if(a instanceof vh)return new uj;if(a instanceof uh)return new lj;if(a instanceof nh)return new dj(a.O.W());if(a instanceof ph)return new Ch;if(a instanceof wh)return new Ji(this.c,a.O,a.Rb);if(a instanceof oh)return new Fi(this.c,a.table);if(a instanceof lh)return new Di(a.table);if(a instanceof mh)return new Jj(a.table);
if(a instanceof kh)return new kj(this.c,a.table);if(a instanceof jh)return new ij(this.c,a.table);throw new D(514);};function Mj(a){this.qg=new Ci;this.Eg=new Kj(a)};function Nj(){this.df=y()}function Oj(a,b){var c=a.df.get(b.getName())||null;null===c&&(c=new Pj,a.df.set(b.getName(),c));return c}function Qj(a,b,c,d){c.forEach(function(a){a=Oj(this,a);0==d?(a.fb=null,a.wc=b):3==d?(null===a.Yb&&(a.Yb=B()),a.Yb.add(b),null===a.Ya&&(a.Ya=B()),a.Ya.delete(b)):1==d?(null===a.Ya&&(a.Ya=B()),a.Ya.add(b)):2==d&&(a.fb=b)},a)}
function Rj(a,b,c,d){var e=!0;c.forEach(function(a){if(e){a=Oj(this,a);var c=null===a.Ya||0==a.Ya.size;e=0==d?(null===a.Yb||0==a.Yb.size)&&c&&null===a.wc&&null!==a.fb&&a.fb==b:3==d?null===a.wc&&null===a.fb&&null!==a.Ya&&a.Ya.has(b):1==d?null===a.fb:c&&(null===a.fb||a.fb==b)}},a);return e}function Sj(a,b,c,d){var e=Rj(a,b,c,d);e&&Qj(a,b,c,d);return e}Nj.prototype.releaseLock=function(a,b){b.forEach(function(b){Oj(this,b).releaseLock(a)},this)};
function Tj(a,b){b.forEach(function(a){Oj(this,a).fb=null},a)}function Pj(){this.Yb=this.Ya=this.fb=this.wc=null}Pj.prototype.releaseLock=function(a){this.wc==a&&(this.wc=null);this.fb==a&&(this.fb=null);null===this.Ya||this.Ya.delete(a);null===this.Yb||this.Yb.delete(a)};function Uj(){this.Ub=new Vj;this.Ec=new Nj}function Ae(a,b){(2>b.getPriority()||2>b.getPriority())&&Tj(a.Ec,b.da());a.Ub.Ab(b);Wj(a);return b.Db.ha}function Wj(a){for(var b=a.Ub.qa(),c=0;c<b.length;c++){var d=b[c];if(0==d.I()?Xj(a,d,1,3):Xj(a,d,2,0)){a.Ub.remove(d);var e=a;d.exec().then(e.Bg.bind(e,d),e.Ag.bind(e,d))}}}function Xj(a,b,c,d){var e=!1;Sj(a.Ec,b.W(),b.da(),c)&&(e=Sj(a.Ec,b.W(),b.da(),d));return e}Uj.prototype.Bg=function(a,b){this.Ec.releaseLock(a.W(),a.da());a.Db.resolve(b);Wj(this)};
Uj.prototype.Ag=function(a,b){this.Ec.releaseLock(a.W(),a.da());a.Db.reject(b);Wj(this)};function Vj(){this.Ub=[]}Vj.prototype.Ab=function(a){yf(this.Ub,a,function(a,c){var b=a.getPriority()-c.getPriority();return 0==b?a.W()-c.W():b})};Vj.prototype.qa=function(){return this.Ub.slice()};Vj.prototype.remove=function(a){var b=this.Ub;a=wa(b,a);var c;(c=0<=a)&&Array.prototype.splice.call(b,a,1);return c};function Yj(){this.Nc=y()}var Zj;function ak(){Zj||(Zj=new Yj);return Zj}Yj.prototype.clear=function(){this.Nc.clear()};Yj.prototype.clear=Yj.prototype.clear;Yj.prototype.rb=function(a,b){this.Nc.set(a.toString(),b);return b};Yj.prototype.registerService=Yj.prototype.rb;Yj.prototype.b=function(a){var b=this.Nc.get(a.toString())||null;if(null===b)throw new D(7,a.toString());return b};Yj.prototype.getService=Yj.prototype.b;Yj.prototype.md=function(a){return this.Nc.has(a.toString())};
Yj.prototype.isRegistered=Yj.prototype.md;function bk(){var a=ak();return Yb(a.Nc)};function ck(a,b,c,d){return null!=a?null!=b?dk(a,b,c,d):ek(a):fk()}function gk(a){var b="";try{b=JSON.stringify(a)}catch(c){}return b}function hk(a){var b=ak();a=new lc("ns_"+a);return b.md(a)?b.b(a):null}function fk(){var a={};bk().forEach(function(b){"ns_"==b.substring(0,3)&&(b=b.substring(3),a[b]=hk(b).b(sc).version())});return gk(a)}function ek(a){a=hk(a);var b={};if(null!=a){var c=a.b(oc);a.b(sc).oa().forEach(function(a){b[a.getName()]=c.get(cf(a)).Y().ia})}return gk(b)}
function dk(a,b,c,d){var e=hk(a);a=[];if(null!=e){var f=null;try{f=e.b(sc).table(b)}catch(h){}null!=f&&(b=e.b(oc),e=e.b(nc),c=b.get(cf(f)).Va(void 0,!1,c,d),c.length&&(a=vf(e,c).map(function(a){return a.m})))}return gk(a)};function ik(a,b){this.Qd=Wd();this.le=a;this.od=b;this.K=jk(this)}function jk(a){if(0<a.le.f.length)return a.le.f;var b=[];a.le.from.forEach(function(a){a.lb().forEach(function(a){b.push(a)})});return b}ik.prototype.$=function(a,b){return this.K.every(function(c){return Xd(this.Qd,c.I(),"eq")(H(a,c),H(b,c))},this)};
function kk(a,b,c){var d=null===b?[]:b.entries,e=ob(d,c.entries,a.$.bind(a),function(a){return d[a]});b=[];for(var f=0,h=0;h<d.length;h++){var k=d[h];e[f]==k?f++:(k=a.od.splice(f,1),k=lk(h,k,0,a.od),b.push(k))}e=ob(d,c.entries,a.$.bind(a),function(a,b){return c.entries[b]});for(h=f=0;h<c.entries.length;h++)k=c.entries[h],e[f]==k?f++:(a.od.splice(h,0,k.va.m),k=lk(h,[],1,a.od),b.push(k));return b}function lk(a,b,c,d){return{addedCount:c,index:a,object:d,removed:b,type:"splice"}};function mk(){this.fc=y()}mk.prototype.Cd=function(a,b){var c=ka(a.query).toString(),d=this.fc.get(c)||null;null===d&&(d=new nk(a),this.fc.set(c,d));d.Cd(b)};mk.prototype.me=function(a,b){a=ka(a.query).toString();var c=this.fc.get(a)||null;c.me(b);0<c.Hc.size||this.fc.delete(a)};function ze(a,b){var c=B();b.forEach(function(a){c.add(a.getName())});var d=[];a.fc.forEach(function(a){a=a.Bc();a.context.from.some(function(a){return c.has(a.getName())})&&d.push(a)});return d}
function xe(a,b,c){b=ka(null!=b.Wc?b.Wc:b).toString();a=a.fc.get(b)||null;null!==a&&ok(a,c)}function nk(a){this.Hf=a;this.Hc=B();this.yg=[];this.bf=null;this.Rf=new ik(a.query,this.yg)}nk.prototype.Cd=function(a){this.Hc.has(a)||this.Hc.add(a)};nk.prototype.me=function(a){return this.Hc.delete(a)};nk.prototype.Bc=function(){var a=this.Hf;return{context:a.query,ie:ai(a)}};function ok(a,b){var c=kk(a.Rf,a.bf,b);a.bf=b;0<c.length&&a.Hc.forEach(function(a){a(c)})};function pk(a,b){var c=a.b(sc),d=b||{};b=new uf(c);a.rb(nc,b);b=null;var e=!1;null!=d.storeType?b=d.storeType:(b=Wb(),b=b.fg?0:b.Ug?4:1);switch(b){case 0:b=new Ze(a,c);break;case 1:b=new ff(c);break;case 5:b=new hf(c);break;case 4:b=new rf(a,c,d.webSqlDbSize);break;case 3:b=new Me(c,d.firebase);e=!0;break;default:throw new D(300);}a.rb(mc,b);var f=new vg;a.rb(oc,f);return b.Ea(d.onUpgrade).then(function(){var b=new Mj(a);a.rb(pc,b);b=new Uj;a.rb(qc,b);b=new mk;a.rb(rc,b);return f.Ea(c)}).then(function(){if(e){var b=
new Be(a);b.Oa.subscribe(b.de.bind(b))}d.enableInspector&&(window.top["#lfInspect"]=ck);return(new og(a)).Ea(c)})};function qk(a){this.c=a;this.g=a.b(sc);this.aa=B(this.g.oa());this.Db=w()}function rk(a){var b=a.c.b(oc),c=a.c.b(nc),d={};a.g.oa().forEach(function(a){var e=b.get(cf(a)).Va(),e=vf(c,e).map(function(a){return a.m});d[a.getName()]=e});return{name:a.g.name(),version:a.g.version(),tables:d}}m=qk.prototype;m.exec=function(){var a=rk(this),a=new Id(new Zb(-1,a),!0);return v([new G([a],[])])};m.I=l(0);m.da=g("aa");m.W=function(){return ka(this)};m.getPriority=l(0);function sk(a,b){this.c=a;this.g=a.b(sc);this.aa=B(this.g.oa());this.Db=w();this.Ba=b;this.Oa=a.b(mc);this.V=a.b(nc);this.C=a.b(oc)}m=sk.prototype;
m.exec=function(){if(!(this.Oa instanceof Ze||this.Oa instanceof ff||this.Oa instanceof rf))throw new D(300);var a;a:{a=this.g.oa();for(var b=0;b<a.length;++b)if(0<this.C.get(cf(a[b])).Y().ia){a=!1;break a}a=!0}if(!a)throw new D(110);if(this.g.name()!=this.Ba.name||this.g.version()!=this.Ba.version)throw new D(111);if(null==this.Ba.tables)throw new D(112);return tk(this)};m.I=l(1);m.da=g("aa");m.W=function(){return ka(this)};m.getPriority=l(0);
function tk(a){var b=new ld(a.c,a.aa),b=a.Oa.Fb(a.I(),C(a.aa),b),c;for(c in a.Ba.tables){var d=a.g.table(c),e=a.Ba.tables[c].map(function(a){return d.xb(a)}),f=b.H(c,d.kb,0);a.V.Wb(c,e);var h=a.C.lc.get(c)||[];e.forEach(function(a){h.forEach(function(b){var c=a.nb(b.getName());b.add(c,a.id())})});f.put(e)}return b.ka()};function uk(a,b){this.c=a;this.Oa=a.b(mc);this.Ia=a.b(qc);this.Ib=a.b(rc);this.aa=B(b);this.Ra=new ld(this.c,this.aa);this.Db=w();this.xc=w();this.ze=w()}m=uk.prototype;m.exec=function(){this.ze.resolve();return this.xc.ha};m.I=l(1);m.da=g("aa");m.W=function(){return ka(this)};m.getPriority=l(2);function vk(a){Ae(a.Ia,a);return a.ze.ha}
function wk(a,b){b=b.Bc();return b.ie.bb().exec(a.Ra,b.context).then(function(a){return Ad(a[0])},function(a){this.Ra.Jb();var b=new ib(a.name);this.xc.reject(b);throw a;}.bind(a))}m.ka=function(){this.ja=this.Oa.Fb(this.I(),C(this.aa),this.Ra);this.ja.ka().then(function(){this.Mc();this.xc.resolve()}.bind(this),function(a){this.Ra.Jb();this.xc.reject(a)}.bind(this));return this.Db.ha};m.Jb=function(){this.Ra.Jb();this.xc.resolve();return this.Db.ha};
m.Mc=function(){var a=ze(this.Ib,this.aa);0!=a.length&&(a=new we(this.c,a),Ae(this.Ia,a))};m.Y=function(){var a=null;null!=this.ja&&(a=this.ja.Y());return null===a?new A(!1,0,0,0,0):a};function V(a){this.c=a;this.Ia=a.b(qc);this.Kb=null;this.Ta=0;0==xk.size&&(xk.set(0,B([1,4])),xk.set(1,B([2])),xk.set(2,B([3,5,6])),xk.set(3,B([2,7])),xk.set(4,B([7])),xk.set(5,B([7])),xk.set(6,B([7])))}q("lf.proc.Transaction",V);var xk=y();function yk(a,b){var c=xk.get(a.Ta)||null;if(null===c||!c.has(b))throw new D(107,a.Ta,b);a.Ta=b}
V.prototype.exec=function(a){yk(this,4);var b=[];try{a.forEach(function(a){a.ab();b.push(a.Bc())},this)}catch(c){return yk(this,7),ab(c)}this.Kb=new Dh(this.c,b);return Ae(this.Ia,this.Kb).then(function(a){yk(this,7);return a.map(function(a){return Ad(a)})}.bind(this),function(a){yk(this,7);throw a;}.bind(this))};V.prototype.exec=V.prototype.exec;V.prototype.Ff=function(a){yk(this,1);this.Kb=new uk(this.c,a);return vk(this.Kb).then(function(){yk(this,2)}.bind(this))};V.prototype.begin=V.prototype.Ff;
V.prototype.Ef=function(a){yk(this,3);try{a.ab()}catch(b){return yk(this,7),ab(b)}return wk(this.Kb,a).then(function(a){yk(this,2);return a}.bind(this),function(a){yk(this,7);throw a;}.bind(this))};V.prototype.attach=V.prototype.Ef;V.prototype.ka=function(){yk(this,5);return this.Kb.ka().then(function(){yk(this,7)}.bind(this))};V.prototype.commit=V.prototype.ka;V.prototype.Jb=function(){yk(this,6);return this.Kb.Jb().then(function(){yk(this,7)}.bind(this))};V.prototype.rollback=V.prototype.Jb;
V.prototype.Y=function(){if(7!=this.Ta)throw new D(105);return this.Kb.Y()};V.prototype.stats=V.prototype.Y;function W(a){this.c=a;this.g=a.b(sc);this.hd=!1}q("lf.proc.Database",W);W.prototype.Ea=function(a){this.c.rb(sc,this.g);return pk(this.c,a).then(function(){this.hd=!0;this.Ia=this.c.b(qc);return this}.bind(this))};W.prototype.init=W.prototype.Ea;W.prototype.zb=g("g");W.prototype.getSchema=W.prototype.zb;function zk(a){if(!a.hd)throw new D(2);}W.prototype.select=function(a){zk(this);return new U(this.c,1!=arguments.length||null!=arguments[0]?Array.prototype.slice.call(arguments):[])};
W.prototype.select=W.prototype.select;W.prototype.Ab=function(){zk(this);return new ci(this.c)};W.prototype.insert=W.prototype.Ab;W.prototype.Wd=function(){zk(this);return new ci(this.c,!0)};W.prototype.insertOrReplace=W.prototype.Wd;W.prototype.update=function(a){zk(this);return new mi(this.c,a)};W.prototype.update=W.prototype.update;W.prototype.delete=function(){zk(this);return new bi(this.c)};W.prototype["delete"]=W.prototype.delete;
W.prototype.observe=function(a,b){zk(this);this.c.b(rc).Cd(a,b)};W.prototype.observe=W.prototype.observe;W.prototype.unobserve=function(a,b){zk(this);this.c.b(rc).me(a,b)};W.prototype.unobserve=W.prototype.unobserve;W.prototype.Nf=function(){zk(this);return new V(this.c)};W.prototype.createTransaction=W.prototype.Nf;W.prototype.close=function(){try{this.c.b(mc).close()}catch(a){}this.c.clear();this.hd=!1};W.prototype.close=W.prototype.close;
W.prototype.Xf=function(){zk(this);var a=new qk(this.c);return Ae(this.Ia,a).then(function(a){return Ad(a[0])[0]})};W.prototype["export"]=W.prototype.Xf;W.prototype.import=function(a){zk(this);a=new sk(this.c,a);return Ae(this.Ia,a).then(l(null))};W.prototype["import"]=W.prototype.import;function X(a,b,c,d,e,f){this.U=a;this.A=b;this.Ye=c;this.We=d;this.xf=e;this.Ka=f||null}q("lf.schema.BaseColumn",X);m=X.prototype;m.getName=g("A");m.j=function(){return Kd(this.U)+"."+this.A};m.toString=function(){return this.j()};m.H=g("U");m.I=g("xf");X.prototype.getType=X.prototype.I;X.prototype.Da=function(){null==this.ta&&(this.ta=[],this.H().Da().forEach(function(a){-1!=a.f.map(function(a){return a.ba.getName()}).indexOf(this.A)&&this.ta.push(a)},this));return this.ta};
X.prototype.Ca=function(){if(!n(this.fa)){var a=this.Da().filter(function(a){return 1!=a.f.length?!1:a.f[0].ba.getName()==this.getName()},this);this.fa=0<a.length?a[0]:null}return this.fa};X.prototype.hc=g("We");X.prototype.isNullable=X.prototype.hc;X.prototype.Dc=g("Ye");X.prototype.Qa=function(a){return Og(this,a,"eq")};X.prototype.eq=X.prototype.Qa;X.prototype.ef=function(a){return Og(this,a,"neq")};X.prototype.neq=X.prototype.ef;X.prototype.rg=function(a){return Og(this,a,"lt")};
X.prototype.lt=X.prototype.rg;X.prototype.sg=function(a){return Og(this,a,"lte")};X.prototype.lte=X.prototype.sg;X.prototype.ag=function(a){return Og(this,a,"gt")};X.prototype.gt=X.prototype.ag;X.prototype.bg=function(a){return Og(this,a,"gte")};X.prototype.gte=X.prototype.bg;X.prototype.match=function(a){return Og(this,a,"match")};X.prototype.match=X.prototype.match;X.prototype.Gf=function(a,b){return Og(this,[a,b],"between")};X.prototype.between=X.prototype.Gf;
X.prototype.cg=function(a){return Og(this,a,"in")};X.prototype["in"]=X.prototype.cg;X.prototype.mg=function(){return this.Qa(null)};X.prototype.isNull=X.prototype.mg;X.prototype.lg=function(){return this.ef(null)};X.prototype.isNotNull=X.prototype.lg;X.prototype.rc=function(a){return new X(this.U,this.A,this.Ye,this.We,this.xf,a)};X.prototype.as=X.prototype.rc;function Ak(a){this.g=a;this.Id=new Uc;this.ne=new Uc;this.gf=new Uc;this.Ie=y();this.h=new Uc;this.Ee=new Uc;this.mf=new Uc;this.He=new Uc;Bk(this)}function Bk(a){a.g.oa().forEach(function(a){var b=a.getName();a.Mb.Ud.forEach(function(c){this.gf.set(b,this.g.table(c.Xa));this.h.set(c.Xa,a);0==c.action?(this.ne.set(c.Xa,c),this.mf.set(c.Xa,a)):(this.Id.set(c.Xa,c),this.Ee.set(c.Xa,a));this.Ie.set(a.getName()+"."+c.vb,c.Xa);this.He.set(c.Xa+"."+c.Jc,a.getName())},this)},a)}
function bd(a,b,c){if(null!=c)return 1==c?a.Id.get(b):a.ne.get(b);c=a.Id.get(b);a=a.ne.get(b);return null===c&&null===a?null:(c||[]).concat(a||[])}function Jh(a,b){a=b.get(a);return null===a?[]:a}function Lh(a,b){var c=B();b.forEach(function(a){(a=this.Ie.get(a))&&c.add(a)},a);return C(c).map(function(a){return this.g.table(a)},a)}function Hh(a,b,c){return null!=c?0==c?Jh(b,a.mf):Jh(b,a.Ee):Jh(b,a.h)}
function Mh(a,b){var c=B();b.forEach(function(a){(a=this.He.get(a))&&a.forEach(function(a){c.add(a)})},a);return C(c).map(function(a){return this.g.table(a)},a)};function Ck(a,b,c){this.sd=a;this.xg=b;this.Ud=c}q("lf.schema.Constraint",Ck);Ck.prototype.$f=g("sd");Ck.prototype.getPrimaryKey=Ck.prototype.$f;Ck.prototype.Zf=g("Ud");Ck.prototype.getForeignKeys=Ck.prototype.Zf;function Dk(a,b,c){var d=a.ref.split(".");if(2!=d.length)throw new D(540,c);this.Ge=b;this.vb=a.local;this.Xa=d[0];this.Jc=d[1];this.name=b+"."+c;this.action=a.action;this.timing=a.timing};function Y(a){Ek(a);this.Qd=Wd();this.A=a;this.K=y();this.zd=B();this.nc=B();this.nd=B();this.Fa=null;this.ta=y();this.rd=!1;this.yb=[]}q("lf.schema.TableBuilder",Y);function Fk(a){this.name=a.name;this.order=a.order;this.autoIncrement=a.autoIncrement}var Gk=B([0,6]);function Ek(a){if(!/^[A-Za-z_][A-Za-z0-9_]*$/.test(a))throw new D(502,a);}function Hk(a,b){if(b==a.A)throw new D(546,b);if(a.K.has(b)||a.ta.has(b)||a.nc.has(b))throw new D(503,a.A+"."+b);}
function Ik(a,b){var c=!1;b.forEach(function(a){var b=this.K.get(a.name);c=c||a.autoIncrement;if(a.autoIncrement&&3!=b)throw new D(504);},a);if(c&&1<b.length)throw new D(505);}function Jk(a){if(null!==a.Fa){var b=a.ta.get(a.Fa).map(function(a){return a.name}),c=0;if(a.yb.some(function(a,e){c=e;return-1!=b.indexOf(a.vb)},a))throw new D(543,a.yb[c].name);}}
function Kk(a){if(null!==a.Fa){var b=function(a){return a.name},c=JSON.stringify(a.ta.get(a.Fa).map(b));a.ta.forEach(function(a,e){if(e!=this.Fa&&(a=a.map(b),JSON.stringify(a)==c))throw new D(544,this.A+"."+e);},a)}}function Lk(a){null===a.Fa||a.ta.get(a.Fa).forEach(function(a){if(this.nd.has(a.name))throw new D(545,this.A+"."+a.name);},a)}Y.prototype.zf=function(a,b){Ek(a);Hk(this,a);this.K.set(a,b);Gk.has(b)&&this.Be([a]);return this};Y.prototype.addColumn=Y.prototype.zf;
Y.prototype.Bf=function(a,b){var c=this.A;this.Fa="pk"+(c[0].toUpperCase()+c.substring(1));Ek(this.Fa);Hk(this,this.Fa);a=Mk(this,a,!0,void 0,b);Ik(this,a);1==a.length&&this.zd.add(a[0].name);this.nc.add(this.Fa);this.ta.set(this.Fa,a);return this};Y.prototype.addPrimaryKey=Y.prototype.Bf;
Y.prototype.Af=function(a,b){Ek(a);Hk(this,a);b=new Dk(b,this.A,a);n(b.action)||(b.action=0);n(b.timing)||(b.timing=0);if(1==b.action&&1==b.timing)throw new D(506);if(!this.K.has(b.vb))throw new D(540,a);this.yb.push(b);this.Ae(a,[b.vb],this.zd.has(b.vb));return this};Y.prototype.addForeignKey=Y.prototype.Af;Y.prototype.Cf=function(a,b){Ek(a);Hk(this,a);b=Mk(this,b,!0);1==b.length&&(this.zd.add(b[0].name),Nk(this,b[0].name));this.ta.set(a,b);this.nc.add(a);return this};Y.prototype.addUnique=Y.prototype.Cf;
function Nk(a,b){a.yb.forEach(function(a){a.vb==b&&this.nc.add(a.name.split(".")[1])},a)}Y.prototype.Be=function(a){Mk(this,a,!1).forEach(function(a){this.nd.add(a.name)},this);return this};Y.prototype.addNullable=Y.prototype.Be;Y.prototype.Ae=function(a,b,c,d){Ek(a);Hk(this,a);b=Mk(this,b,!0,d);c&&this.nc.add(a);this.ta.set(a,b);return this};Y.prototype.addIndex=Y.prototype.Ae;Y.prototype.Cb=ba("rd");Y.prototype.persistentIndex=Y.prototype.Cb;
Y.prototype.zb=function(){Jk(this);Kk(this);Lk(this);return new (Ok(this))};Y.prototype.getSchema=Y.prototype.zb;function Mk(a,b,c,d,e){var f=b,f="string"==typeof b[0]?b.map(function(a){return new Fk({name:a,order:null!=d?d:1,autoIncrement:e||!1})}):b.map(function(a){return new Fk(a)});f.forEach(function(a){if(!this.K.has(a.name))throw new D(508,this.A,a.name);if(c){var b=this.K.get(a.name);if(0==b||6==b)throw new D(509,this.A,a.name);}},a);return f}
function Ok(a){function b(){function b(b){return a.ta.get(b).map(function(a){return{ba:this[a.name],order:a.order,autoIncrement:a.autoIncrement}},this)}var d=Yb(a.K).map(function(b){this[b]=new X(this,b,a.zd.has(b),a.nd.has(b),a.K.get(b));return this[b]},this),e=Yb(a.ta).map(function(c){return new Qg(a.A,c,a.nc.has(c),b.call(this,c))},this);Q.call(this,a.A,d,e,a.rd);var f=null===a.Fa?null:new Qg(a.A,a.Fa,!0,b.call(this,a.Fa)),h=d.filter(function(b){return!a.nd.has(b.getName())});this.Mb=new Ck(f,
h,a.yb);this.qf=Pk(a,d,e)}r(b,Q);b.prototype.xb=function(a){return new this.qf($b++,a)};b.prototype.createRow=b.prototype.xb;b.prototype.kb=function(a){var b={};this.lb().forEach(function(c){var d=c.getName();c=c.I();var e=a.value[d];if(0==c)if(c=e,null!=c&&""!=c){0!=c.length%2&&(c="0"+c);for(var e=new ArrayBuffer(c.length/2),k=new Uint8Array(e),p=0,K=0;p<c.length;p+=2)k[K++]=parseInt(c.substr(p,2),16);c=e}else c=null;else c=2==c?null!=e?new Date(e):null:e;b[d]=c},this);return new this.qf(a.id,b)};
b.prototype.deserializeRow=b.prototype.kb;b.prototype.Ne=g("Mb");b.prototype.getConstraint=b.prototype.Ne;return b}
function Pk(a,b,c){function d(a,d){this.K=b;this.ta=c;Zb.call(this,a,d)}r(d,Zb);d.prototype.Ke=function(){var a={};this.K.forEach(function(b){a[b.getName()]=b.hc()?null:Sc[b.I()]});return a};d.prototype.wf=function(){var a={};this.K.forEach(function(b){var c=b.getName();b=b.I();var d=this.m[c];a[c]=0==b?null!=d?cc(d):null:2==b?null!=d?d.getTime():null:6==b?null!=d?d:null:d},this);return a};var e=function(a){var b=this.K.get(a.getName()),c=this.Qd.Ze.get(b)||null;return function(b){return c(b[a.getName()])}}.bind(a),
f=function(a){var b=a.map(function(a){return e(a.ba)});return function(a){return b.map(function(b){return b(a)})}}.bind(a),h={};c.forEach(function(a){var b=a.j();a=1==a.f.length?e(a.f[0].ba):f(a.f);h[b]=a});d.prototype.nb=function(a){return-1!=a.indexOf("#")?this.id():h.hasOwnProperty(a)?h[a](this.m):null};return d};function Qk(a,b){this.g=new Z(a,b);this.tb=y();this.yc=!1;this.i=null;this.Yc=!1}q("lf.schema.Builder",Qk);function Rk(a,b){b.yb.forEach(function(a){var c=a.Xa;if(!this.tb.has(c))throw new D(536,a.name);var c=this.tb.get(c).zb(),e=a.Jc;if(!c.hasOwnProperty(e))throw new D(537,a.name);if(b.zb()[a.vb].I()!=c[e].I())throw new D(538,a.name);if(!c[e].Dc())throw new D(539,a.name);},a)}
Qk.prototype.Kf=function(a){a.yb.forEach(function(a){this.tb.get(a.Xa).yb.forEach(function(b){if(b.vb==a.Jc)throw new D(534,a.name);},this)},this)};function Sk(a){a.yc||(a.tb.forEach(function(a){Rk(this,a);a=a.zb();this.g.M.set(a.getName(),a)},a),z(a.tb).forEach(a.Kf,a),Tk(a),a.tb.clear(),a.yc=!0)}function Uk(a,b,c){b.ye||(b.ye=!0,b.ee=!0,b.Le.forEach(function(a){a=c.get(a);if(!a.ye)Uk(this,a,c);else if(a.ee&&b!=a)throw new D(533);},a));b.ee=!1}
function Tk(a){var b=y();a.g.M.forEach(function(a,d){b.set(d,new Vk(d))},a);a.tb.forEach(function(a,d){a.yb.forEach(function(a){b.get(a.Xa).Le.add(d)})});z(b).forEach(function(a){Uk(this,a,b)},a)}function Vk(a){this.ee=this.ye=!1;this.Le=B();this.mc=a}Qk.prototype.zb=function(){this.yc||Sk(this);return this.g};Qk.prototype.getSchema=Qk.prototype.zb;Qk.prototype.Qe=function(){var a=new lc("ns_"+this.g.name()),b=ak(),c;b.md(a)?c=b.b(a):(c=new Yj,b.rb(a,c));return c};Qk.prototype.getGlobal=Qk.prototype.Qe;
Qk.prototype.connect=function(a){if(this.Yc||null!==this.i&&this.i.hd)throw new D(113);this.Yc=!0;if(null===this.i){var b=this.Qe();b.md(sc)||b.rb(sc,this.zb());this.i=new W(b)}return this.i.Ea(a).then(function(a){this.Yc=!1;return a}.bind(this),function(a){this.Yc=!1;throw a;}.bind(this))};Qk.prototype.connect=Qk.prototype.connect;Qk.prototype.Mf=function(a){if(this.tb.has(a))throw new D(503,a);if(this.yc)throw new D(535);this.tb.set(a,new Y(a));return this.tb.get(a)};Qk.prototype.createTable=Qk.prototype.Mf;
Qk.prototype.se=function(a){if(this.yc)throw new D(535);this.g.se(a);return this};Qk.prototype.setPragma=Qk.prototype.se;function Z(a,b){this.A=a;this.Ua=b;this.M=y();this.je={Sf:!1}}q("lf.schema.DatabaseSchema",Z);Z.prototype.name=g("A");Z.prototype.name=Z.prototype.name;Z.prototype.version=g("Ua");Z.prototype.version=Z.prototype.version;Z.prototype.oa=function(){return z(this.M)};Z.prototype.tables=Z.prototype.oa;Z.prototype.table=function(a){if(!this.M.has(a))throw new D(101,a);return this.M.get(a)};
Z.prototype.table=Z.prototype.table;Z.prototype.info=function(){this.Ve||(this.Ve=new Ak(this));return this.Ve};Z.prototype.Fg=g("je");Z.prototype.pragma=Z.prototype.Fg;Z.prototype.se=ba("je");q("lf.schema.create",function(a,b){return new Qk(a,b)});u.prototype.catch=u.prototype.ve;u.prototype["catch"]=u.prototype.catch;
try{if(module){module.exports=lf;}}catch(e){}}.bind(window))();
//# sourceMappingURL=lovefield.min.js.map
