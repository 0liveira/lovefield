var window = this;
(function(){'use strict';function aa(){return function(){}}function ba(a){return function(b){this[a]=b}}function f(a){return function(){return this[a]}}function l(a){return function(){return a}}var m,p=this;function q(a){return void 0!==a}function ca(){}
function da(a){var b=typeof a;if("object"==b)if(a){if(a instanceof Array)return"array";if(a instanceof Object)return b;var c=Object.prototype.toString.call(a);if("[object Window]"==c)return"object";if("[object Array]"==c||"number"==typeof a.length&&"undefined"!=typeof a.splice&&"undefined"!=typeof a.propertyIsEnumerable&&!a.propertyIsEnumerable("splice"))return"array";if("[object Function]"==c||"undefined"!=typeof a.call&&"undefined"!=typeof a.propertyIsEnumerable&&!a.propertyIsEnumerable("call"))return"function"}else return"null";
else if("function"==b&&"undefined"==typeof a.call)return"object";return b}function ea(a){return null===a}function fa(a){return null!=a}function ha(a){var b=da(a);return"array"==b||"object"==b&&"number"==typeof a.length}function ia(a){return"string"==typeof a}function ja(a){return"function"==da(a)}function ka(a){return a[la]||(a[la]=++ma)}var la="closure_uid_"+(1E9*Math.random()>>>0),ma=0;function oa(a,b,c){return a.call.apply(a.bind,arguments)}
function pa(a,b,c){if(!a)throw Error();if(2<arguments.length){var d=Array.prototype.slice.call(arguments,2);return function(){var c=Array.prototype.slice.call(arguments);Array.prototype.unshift.apply(c,d);return a.apply(b,c)}}return function(){return a.apply(b,arguments)}}function qa(a,b,c){qa=Function.prototype.bind&&-1!=Function.prototype.bind.toString().indexOf("native code")?oa:pa;return qa.apply(null,arguments)}
function ra(a,b){var c=Array.prototype.slice.call(arguments,1);return function(){var b=c.slice();b.push.apply(b,arguments);return a.apply(this,b)}}function r(a,b){var c=a.split("."),d=p;c[0]in d||!d.execScript||d.execScript("var "+c[0]);for(var e;c.length&&(e=c.shift());)!c.length&&q(b)?d[e]=b:d=d[e]?d[e]:d[e]={}}
function t(a,b){function c(){}c.prototype=b.prototype;a.Hb=b.prototype;a.prototype=new c;a.prototype.constructor=a;a.yg=function(a,c,g){for(var h=Array(arguments.length-2),k=2;k<arguments.length;k++)h[k-2]=arguments[k];return b.prototype[c].apply(a,h)}};function sa(a){if(Error.captureStackTrace)Error.captureStackTrace(this,sa);else{var b=Error().stack;b&&(this.stack=b)}a&&(this.message=String(a))}t(sa,Error);sa.prototype.name="CustomError";function ta(a,b,c){this.Zf=c;this.Ef=a;this.pg=b;this.pd=0;this.kd=null}ta.prototype.get=function(){var a;0<this.pd?(this.pd--,a=this.kd,this.kd=a.next,a.next=null):a=this.Ef();return a};ta.prototype.put=function(a){this.pg(a);this.pd<this.Zf&&(this.pd++,a.next=this.kd,this.kd=a)};var ua=Array.prototype,va=ua.indexOf?function(a,b,c){return ua.indexOf.call(a,b,c)}:function(a,b,c){c=null==c?0:0>c?Math.max(0,a.length+c):c;if(ia(a))return ia(b)&&1==b.length?a.indexOf(b,c):-1;for(;c<a.length;c++)if(c in a&&a[c]===b)return c;return-1},wa=ua.forEach?function(a,b,c){ua.forEach.call(a,b,c)}:function(a,b,c){for(var d=a.length,e=ia(a)?a.split(""):a,g=0;g<d;g++)g in e&&b.call(c,e[g],g,a)},xa=ua.map?function(a,b,c){return ua.map.call(a,b,c)}:function(a,b,c){for(var d=a.length,e=Array(d),
g=ia(a)?a.split(""):a,h=0;h<d;h++)h in g&&(e[h]=b.call(c,g[h],h,a));return e},ya=ua.reduce?function(a,b,c,d){d&&(b=qa(b,d));return ua.reduce.call(a,b,c)}:function(a,b,c,d){var e=c;wa(a,function(c,h){e=b.call(d,e,c,h,a)});return e},za=ua.some?function(a,b,c){return ua.some.call(a,b,c)}:function(a,b,c){for(var d=a.length,e=ia(a)?a.split(""):a,g=0;g<d;g++)if(g in e&&b.call(c,e[g],g,a))return!0;return!1};function Aa(a,b,c){return 2>=arguments.length?ua.slice.call(a,b):ua.slice.call(a,b,c)}
function Ba(a){for(var b=[],c=0;c<a;c++)b[c]=0;return b}function Ca(a){for(var b=[],c=0;c<arguments.length;c++){var d=arguments[c];if("array"==da(d))for(var e=0;e<d.length;e+=8192)for(var g=Ca.apply(null,Aa(d,e,e+8192)),h=0;h<g.length;h++)b.push(g[h]);else b.push(d)}return b};function Da(a){var b=[],c=0,d;for(d in a)b[c++]=a[d];return b};var Ea;a:{var Fa=p.navigator;if(Fa){var Ga=Fa.userAgent;if(Ga){Ea=Ga;break a}}Ea=""}function u(a){return-1!=Ea.indexOf(a)};function Ha(){return u("Opera")||u("OPR")}function Ia(){return(u("Chrome")||u("CriOS"))&&!Ha()&&!u("Edge")};function Ja(a){p.setTimeout(function(){throw a;},0)}var Ka;
function La(){var a=p.MessageChannel;"undefined"===typeof a&&"undefined"!==typeof window&&window.postMessage&&window.addEventListener&&!u("Presto")&&(a=function(){var a=document.createElement("IFRAME");a.style.display="none";a.src="";document.documentElement.appendChild(a);var b=a.contentWindow,a=b.document;a.open();a.write("");a.close();var c="callImmediate"+Math.random(),d="file:"==b.location.protocol?"*":b.location.protocol+"//"+b.location.host,a=qa(function(a){if(("*"==d||a.origin==d)&&a.data==
c)this.port1.onmessage()},this);b.addEventListener("message",a,!1);this.port1={};this.port2={postMessage:function(){b.postMessage(c,d)}}});if("undefined"!==typeof a&&!u("Trident")&&!u("MSIE")){var b=new a,c={},d=c;b.port1.onmessage=function(){if(q(c.next)){c=c.next;var a=c.we;c.we=null;a()}};return function(a){d.next={we:a};d=d.next;b.port2.postMessage(0)}}return"undefined"!==typeof document&&"onreadystatechange"in document.createElement("SCRIPT")?function(a){var b=document.createElement("SCRIPT");
b.onreadystatechange=function(){b.onreadystatechange=null;b.parentNode.removeChild(b);b=null;a();a=null};document.documentElement.appendChild(b)}:function(a){p.setTimeout(a,0)}};function Ma(){this.zd=this.kc=null}var Oa=new ta(function(){return new Na},function(a){a.reset()},100);Ma.prototype.add=function(a,b){var c=Oa.get();c.set(a,b);this.zd?this.zd.next=c:this.kc=c;this.zd=c};Ma.prototype.remove=function(){var a=null;this.kc&&(a=this.kc,this.kc=this.kc.next,this.kc||(this.zd=null),a.next=null);return a};function Na(){this.next=this.scope=this.Md=null}Na.prototype.set=function(a,b){this.Md=a;this.scope=b;this.next=null};
Na.prototype.reset=function(){this.next=this.scope=this.Md=null};function Pa(a,b){Qa||Ra();Sa||(Qa(),Sa=!0);Ta.add(a,b)}var Qa;function Ra(){if(p.Promise&&p.Promise.resolve){var a=p.Promise.resolve(void 0);Qa=function(){a.then(Ua)}}else Qa=function(){var a=Ua;!ja(p.setImmediate)||p.Window&&p.Window.prototype&&p.Window.prototype.setImmediate==p.setImmediate?(Ka||(Ka=La()),Ka(a)):p.setImmediate(a)}}var Sa=!1,Ta=new Ma;function Ua(){for(var a=null;a=Ta.remove();){try{a.Md.call(a.scope)}catch(b){Ja(b)}Oa.put(a)}Sa=!1};function v(a,b){this.Ta=0;this.df=void 0;this.Zc=this.bc=this.C=null;this.jd=this.Ld=!1;if(a!=ca)try{var c=this;a.call(b,function(a){Va(c,2,a)},function(a){Va(c,3,a)})}catch(d){Va(this,3,d)}}function Wa(){this.next=this.context=this.gc=this.Kc=this.child=null;this.Cd=!1}Wa.prototype.reset=function(){this.context=this.gc=this.Kc=this.child=null;this.Cd=!1};var Xa=new ta(function(){return new Wa},function(a){a.reset()},100);function Za(a,b,c){var d=Xa.get();d.Kc=a;d.gc=b;d.context=c;return d}
function w(a){if(a instanceof v)return a;var b=new v(ca);Va(b,2,a);return b}function $a(a){return new v(function(b,c){c(a)})}function ab(a,b,c){bb(a,b,c,null)||Pa(ra(b,a))}function cb(a){return new v(function(b,c){var d=a.length,e=[];if(d)for(var g=function(a,c){d--;e[a]=c;0==d&&b(e)},h=function(a){c(a)},k=0,n;k<a.length;k++)n=a[k],ab(n,ra(g,k),h);else b(e)})}function x(){var a,b,c=new v(function(c,e){a=c;b=e});return new db(c,a,b)}
v.prototype.then=function(a,b,c){return eb(this,ja(a)?a:null,ja(b)?b:null,c)};v.prototype.then=v.prototype.then;v.prototype.$goog_Thenable=!0;v.prototype.me=function(a,b){return eb(this,null,a,b)};function fb(a,b){a.bc||2!=a.Ta&&3!=a.Ta||gb(a);a.Zc?a.Zc.next=b:a.bc=b;a.Zc=b}
function eb(a,b,c,d){var e=Za(null,null,null);e.child=new v(function(a,h){e.Kc=b?function(c){try{var e=b.call(d,c);a(e)}catch(z){h(z)}}:a;e.gc=c?function(b){try{var e=c.call(d,b);!q(e)&&b instanceof hb?h(b):a(e)}catch(z){h(z)}}:h});e.child.C=a;fb(a,e);return e.child}v.prototype.ug=function(a){this.Ta=0;Va(this,2,a)};v.prototype.vg=function(a){this.Ta=0;Va(this,3,a)};
function Va(a,b,c){0==a.Ta&&(a==c&&(b=3,c=new TypeError("Promise cannot resolve to itself")),a.Ta=1,bb(c,a.ug,a.vg,a)||(a.df=c,a.Ta=b,a.C=null,gb(a),3!=b||c instanceof hb||ib(a,c)))}function bb(a,b,c,d){if(a instanceof v)return fb(a,Za(b||ca,c||null,d)),!0;var e;if(a)try{e=!!a.$goog_Thenable}catch(g){e=!1}else e=!1;if(e)return a.then(b,c,d),!0;e=typeof a;if("object"==e&&null!=a||"function"==e)try{var h=a.then;if(ja(h))return jb(a,h,b,c,d),!0}catch(k){return c.call(d,k),!0}return!1}
function jb(a,b,c,d,e){function g(a){k||(k=!0,d.call(e,a))}function h(a){k||(k=!0,c.call(e,a))}var k=!1;try{b.call(a,h,g)}catch(n){g(n)}}function gb(a){a.Ld||(a.Ld=!0,Pa(a.Jf,a))}function kb(a){var b=null;a.bc&&(b=a.bc,a.bc=b.next,b.next=null);a.bc||(a.Zc=null);return b}
v.prototype.Jf=function(){for(var a=null;a=kb(this);){var b=this.Ta,c=this.df;if(3==b&&a.gc&&!a.Cd)for(var d=void 0,d=this;d&&d.jd;d=d.C)d.jd=!1;if(a.child)a.child.C=null,lb(a,b,c);else try{a.Cd?a.Kc.call(a.context):lb(a,b,c)}catch(e){mb.call(null,e)}Xa.put(a)}this.Ld=!1};function lb(a,b,c){2==b?a.Kc.call(a.context,c):a.gc&&a.gc.call(a.context,c)}function ib(a,b){a.jd=!0;Pa(function(){a.jd&&mb.call(null,b)})}var mb=Ja;function hb(a){sa.call(this,a)}t(hb,sa);hb.prototype.name="cancel";
function db(a,b,c){this.ha=a;this.resolve=b;this.reject=c};/*

 Copyright 2014 The Lovefield Project Authors. All Rights Reserved.

 Licensed under the Apache License, Version 2.0 (the "License");
 you may not use this file except in compliance with the License.
 You may obtain a copy of the License at

     http://www.apache.org/licenses/LICENSE-2.0

 Unless required by applicable law or agreed to in writing, software
 distributed under the License is distributed on an "AS IS" BASIS,
 WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 See the License for the specific language governing permissions and
 limitations under the License.
*/
function y(a,b){this.oa=a;this.s=b||this.Be()}var nb=0;m=y.prototype;m.id=f("oa");function ob(a){return a.s}m.Be=function(){return{}};m.mf=f("s");m.Ia=function(){return{id:this.oa,value:this.mf()}};m.Eb=function(a){return"#"==a.substr(-1)?this.oa:null};function pb(a){return new y(a.id,a.value)}function qb(a){return new y(nb++,a||{})}function rb(a){if(null==a)return null;a=new Uint8Array(a);for(var b="",c=0;c<a.length;++c)var d=a[c].toString(16),b=b+(2>d.length?"0"+d:d);return b};function sb(a){this.type=a}function tb(a){y.call(this,-1,a)}t(tb,y);function ub(a,b,c,d){c=c||function(a,b){return a==b};d=d||function(b){return a[b]};for(var e=a.length,g=b.length,h=[],k=0;k<e+1;k++)h[k]=[],h[k][0]=0;for(var n=0;n<g+1;n++)h[0][n]=0;for(k=1;k<=e;k++)for(n=1;n<=g;n++)c(a[k-1],b[n-1])?h[k][n]=h[k-1][n-1]+1:h[k][n]=Math.max(h[k-1][n],h[k][n-1]);for(var z=[],k=e,n=g;0<k&&0<n;)c(a[k-1],b[n-1])?(z.unshift(d(k-1,n-1)),k--,n--):h[k-1][n]>h[k][n-1]?k--:n--;return z}function vb(a){return ya(arguments,function(a,c){return a+c},0)}
function wb(a){return vb.apply(null,arguments)/arguments.length}function xb(a){var b=arguments.length;if(2>b)return 0;var c=wb.apply(null,arguments);return vb.apply(null,xa(arguments,function(a){return Math.pow(a-c,2)}))/(b-1)}function yb(a){return Math.sqrt(xb.apply(null,arguments))};var zb="StopIteration"in p?p.StopIteration:{message:"StopIteration",stack:""};function Ab(){}Ab.prototype.next=function(){throw zb;};Ab.prototype.lc=function(){return this};function Bb(a){if(a instanceof Ab)return a;if("function"==typeof a.lc)return a.lc(!1);if(ha(a)){var b=0,c=new Ab;c.next=function(){for(;;){if(b>=a.length)throw zb;if(b in a)return a[b++];b++}};return c}throw Error("Not implemented");}
function Cb(a,b){if(ha(a))try{wa(a,b,void 0)}catch(c){if(c!==zb)throw c;}else{a=Bb(a);try{for(;;)b.call(void 0,a.next(),void 0,a)}catch(d){if(d!==zb)throw d;}}}function Db(a){if(za(arguments,function(a){return!a.length})||!arguments.length)return new Ab;var b=new Ab,c=arguments,d=Ba(c.length);b.next=function(){if(d){for(var a=xa(d,function(a,b){return c[b][a]}),b=d.length-1;0<=b;b--){if(d[b]<c[b].length-1){d[b]++;break}if(0==b){d=null;break}d[b]=0}return a}throw zb;};return b};function Eb(a,b){this.o={};this.b=[];this.Oa=this.Bb=0;var c=arguments.length;if(1<c){if(c%2)throw Error("Uneven number of arguments");for(var d=0;d<c;d+=2)this.set(arguments[d],arguments[d+1])}else a&&this.addAll(a)}m=Eb.prototype;m.yc=f("Bb");m.wa=function(){Fb(this);for(var a=[],b=0;b<this.b.length;b++)a.push(this.o[this.b[b]]);return a};function Gb(a){Fb(a);return a.b.concat()}m.La=function(a){return Hb(this.o,a)};m.md=function(){return 0==this.Bb};
m.clear=function(){this.o={};this.Oa=this.Bb=this.b.length=0};m.remove=function(a){return Hb(this.o,a)?(delete this.o[a],this.Bb--,this.Oa++,this.b.length>2*this.Bb&&Fb(this),!0):!1};function Fb(a){if(a.Bb!=a.b.length){for(var b=0,c=0;b<a.b.length;){var d=a.b[b];Hb(a.o,d)&&(a.b[c++]=d);b++}a.b.length=c}if(a.Bb!=a.b.length){for(var e={},c=b=0;b<a.b.length;)d=a.b[b],Hb(e,d)||(a.b[c++]=d,e[d]=1),b++;a.b.length=c}}m.get=function(a,b){return Hb(this.o,a)?this.o[a]:b};
m.set=function(a,b){Hb(this.o,a)||(this.Bb++,this.b.push(a),this.Oa++);this.o[a]=b};m.addAll=function(a){var b;if(a instanceof Eb)b=Gb(a),a=a.wa();else{b=[];var c=0,d;for(d in a)b[c++]=d;a=Da(a)}for(c=0;c<b.length;c++)this.set(b[c],a[c])};m.forEach=function(a,b){for(var c=Gb(this),d=0;d<c.length;d++){var e=c[d],g=this.get(e);a.call(b,g,e,this)}};m.clone=function(){return new Eb(this)};
m.lc=function(a){Fb(this);var b=0,c=this.Oa,d=this,e=new Ab;e.next=function(){if(c!=d.Oa)throw Error("The map has changed since the iterator was created");if(b>=d.b.length)throw zb;var e=d.b[b++];return a?e:d.o[e]};return e};function Hb(a,b){return Object.prototype.hasOwnProperty.call(a,b)};/*

 Copyright 2015 The Lovefield Project Authors. All Rights Reserved.

 Licensed under the Apache License, Version 2.0 (the "License");
 you may not use this file except in compliance with the License.
 You may obtain a copy of the License at

     http://www.apache.org/licenses/LICENSE-2.0

 Unless required by applicable law or agreed to in writing, software
 distributed under the License is distributed on an "AS IS" BASIS,
 WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 See the License for the specific language governing permissions and
 limitations under the License.
*/
function A(){this.o=new Eb;Object.defineProperty(this,"size",{get:function(){return this.o.yc()}})}A.prototype.clear=function(){this.o.clear()};A.prototype.clear=A.prototype.clear;A.prototype.delete=function(a){return this.o.remove(a)};A.prototype["delete"]=A.prototype.delete;A.prototype.forEach=function(a,b){return this.o.forEach(a,b)};A.prototype.forEach=A.prototype.forEach;A.prototype.get=function(a){return this.o.get(a)};A.prototype.get=A.prototype.get;A.prototype.has=function(a){return this.o.La(a)};
A.prototype.has=A.prototype.has;A.prototype.set=function(a,b){return this.o.set(a,b)};A.prototype.set=A.prototype.set;function B(){return window.Map&&window.Map.prototype.values&&window.Map.prototype.forEach?new window.Map:new A}function Ib(a){if(a instanceof A)return Gb(a.o);var b=0,c=Array(a.size);a.forEach(function(a,e){c[b++]=e});return c}function C(a){if(a instanceof A)return a.o.wa();var b=0,c=Array(a.size);a.forEach(function(a){c[b++]=a});return c};var Jb={};r("lf.TransactionType",Jb);Jb.READ_ONLY=0;Jb.READ_WRITE=1;function Kb(a,b){this.Ra=a;this.nf=b;this.X=x()}Kb.prototype.ia=function(){try{Lb(this.Ra)}catch(a){return $a(a)}return(0==this.nf?this.oc():Mb(this)).then(function(a){this.Ra.ia();return a}.bind(this))};function Mb(a){Nb(a);Ob(a);return a.oc()}
function Nb(a){a.Ra.qb.forEach(function(a,c){var d=this.Ra.Z().get(c),d=this.H(d.getName(),d.Lb.bind(d)),e=C(a.Da).map(function(a){return a.id()});0<e.length&&d.remove(e).me(this.Od,this);e=C(a.pa).map(function(a){return a[1]}).concat(C(a.Ca));d.put(e).me(this.Od,this)},a)}function Ob(a){Pb(a.Ra).forEach(function(a){var c=this.H(a.getName(),pb),d;c.get([-1]).then(function(a){d=a;return c.remove([])}).then(function(){c.put(d);c.put(a.Ia())},this.Od.bind(this))},a)}Kb.prototype.Od=function(a){this.X.reject(a)};function Qb(a){this.qg=a}Qb.prototype.toString=f("qg");var Rb=new Qb("backstore"),Sb=new Qb("cache"),Tb=new Qb("indexstore"),Ub=new Qb("engine"),Wb=new Qb("runner"),Xb=new Qb("observerregistry"),Yb=new Qb("schema");function Zb(a){if("function"==typeof a.wa)return a.wa();if(ia(a))return a.split("");if(ha(a)){for(var b=[],c=a.length,d=0;d<c;d++)b.push(a[d]);return b}return Da(a)};function $b(a){this.o=new Eb;a&&this.addAll(a)}function ac(a){var b=typeof a;return"object"==b&&a||"function"==b?"o"+ka(a):b.substr(0,1)+a}m=$b.prototype;m.yc=function(){return this.o.yc()};m.add=function(a){this.o.set(ac(a),a)};m.addAll=function(a){a=Zb(a);for(var b=a.length,c=0;c<b;c++)this.add(a[c])};m.remove=function(a){return this.o.remove(ac(a))};m.clear=function(){this.o.clear()};m.md=function(){return this.o.md()};m.contains=function(a){return this.o.La(ac(a))};m.wa=function(){return this.o.wa()};
m.clone=function(){return new $b(this)};m.lc=function(){return this.o.lc(!1)};var bc=Ha(),cc=u("Trident")||u("MSIE"),dc=u("Edge"),ec=u("Gecko")&&!(-1!=Ea.toLowerCase().indexOf("webkit")&&!u("Edge"))&&!(u("Trident")||u("MSIE"))&&!u("Edge"),fc=-1!=Ea.toLowerCase().indexOf("webkit")&&!u("Edge");function gc(){var a=Ea;if(ec)return/rv\:([^\);]+)(\)|;)/.exec(a);if(dc)return/Edge\/([\d\.]+)/.exec(a);if(cc)return/\b(?:MSIE|rv)[: ]([^\);]+)(\)|;)/.exec(a);if(fc)return/WebKit\/(\S+)/.exec(a)}
(function(){if(bc&&p.opera){var a;var b=p.opera.version;try{a=b()}catch(c){a=b}return a}a="";(b=gc())&&(a=b?b[1]:"");return cc&&(b=(b=p.document)?b.documentMode:void 0,b>parseFloat(a))?String(b):a})();!u("Android")||Ia()||u("Firefox")||Ha();Ia();var hc=u("Safari")&&!(Ia()||u("Coast")||Ha()||u("Edge")||u("Silk")||u("Android"))&&!(u("iPhone")&&!u("iPod")&&!u("iPad")||u("iPad")||u("iPod"));function ic(a){this.Vb=new $b(a);Object.defineProperty(this,"size",{get:function(){return this.Vb.yc()}})}ic.prototype.add=function(a){this.Vb.add(a)};ic.prototype.add=ic.prototype.add;ic.prototype.clear=function(){this.Vb.clear()};ic.prototype.clear=ic.prototype.clear;ic.prototype.delete=function(a){return this.Vb.remove(a)};ic.prototype["delete"]=ic.prototype.delete;ic.prototype.forEach=function(a,b){this.Vb.wa().forEach(a,b)};ic.prototype.has=function(a){return this.Vb.contains(a)};
ic.prototype.has=ic.prototype.has;function D(a){return window.Set&&window.Set.prototype.values&&window.Set.prototype.forEach&&!hc?new window.Set(a):new ic(a)}function jc(a){if(a instanceof ic)return a.Vb.wa();var b=0,c=Array(a.size);a.forEach(function(a){c[b++]=a});return c}function kc(a,b){if(b.size>a.size)return!1;var c=!0;b.forEach(function(b){c=c&&a.has(b)});return c};function lc(a,b){this.oa=a;this.s=b||{}}function mc(a){var b=D();a.forEach(function(a){b.add(a>>9)});return jc(b)}lc.prototype.V=f("oa");function nc(a,b){b.forEach(function(a){this.s[a.id()]=a.Ia()},a)}function oc(a,b){b.forEach(function(a){delete this.s[a]},a)}lc.prototype.Ia=function(){return{id:this.oa,value:JSON.stringify(this.s)}};function pc(a){return new lc(a.id,JSON.parse(a.value))};function qc(a,b,c){this.aa=a;this.Kb=b;this.ef=c}m=qc.prototype;m.get=function(a){if(0==a.length)return this.xc();var b=this.Kb;return rc(this,a).then(function(c){return a.map(function(a){var e=c.get(a>>9);return b(e.s[a])})})};function rc(a,b){var c=B(),d=x(),e=mc(b).map(function(a){return new v(function(b,d){var e;try{e=this.aa.get(a)}catch(z){d(z);return}e.onerror=d;e.onsuccess=function(a){a=pc(a.target.result);c.set(a.V(),a);b()}},this)},a);cb(e).then(function(){d.resolve(c)});return d.ha}
m.xc=function(){return new v(function(a,b){var c=[],d;try{d=this.aa.openCursor()}catch(e){b(e);return}d.onerror=b;d.onsuccess=function(){var b=d.result;if(b){var e;e=pc(b.value).s;for(var k in e)c.push(this.Kb(e[k]));b.continue()}else a(c)}.bind(this)},this)};m.Sb=function(a){return new v(function(b,c){var d;try{d=a()}catch(e){c(e);return}d.onsuccess=b;d.onerror=c},this)};
m.put=function(a){if(0==a.length)return w();var b=B();a.forEach(function(a){var d;d=a.id()>>9;var e=b.get(d)||null;null===e&&(e=this.ef(this.aa.name,d));nc(e,[a]);b.set(d,e)},this);a=C(b).map(function(a){return this.Sb(function(){return this.aa.put(a.Ia())}.bind(this))},this);return cb(a)};
m.remove=function(a){if(0==a.length)return this.Sb(function(){return this.aa.clear()}.bind(this));var b=B();a.forEach(function(a){var d=a>>9,e=b.get(d)||null;null===e&&(e=this.ef(this.aa.name,d));oc(e,[a]);b.set(d,e)},this);a=C(b).map(function(a){return this.Sb(function(){return 0==Object.keys(a.s).length?this.aa.delete(a.V()):this.aa.put(a.Ia())}.bind(this))},this);return cb(a)};function sc(a,b,c){a=a.i(Sb);var d=[c<<9,(c+1<<9)-1];b=a.Za(b,d[0],d[1]);c=new lc(c);nc(c,b);return c}
function tc(a,b){return new lc(b)};function uc(){};function vc(a){this.ca=a.i(Sb);this.D=a.i(Tb);this.m=a.i(Yb)}vc.prototype.update=function(a){a.forEach(function(a){wc(this,a);xc(this,a)},this)};function xc(a,b){var c=b.getName();b.Da.forEach(function(a,b){this.ca.remove(c,b)},a);b.Ca.forEach(function(a){this.ca.set(c,a)},a);b.pa.forEach(function(a){this.ca.set(c,a[1])},a)}function wc(a,b){var c=a.m.table(b.getName());yc(b).forEach(function(a){zc(this,c,a)},a)}
function zc(a,b,c){var d=[];(a.D.ic.get(b.getName())||[]).forEach(function(a){try{Ac(a,c),d.push(a)}catch(b){throw d.forEach(function(a){Ac(a,[c[1],c[0]])},this),b;}},a)}function Ac(a,b){var c=null===b[1]?void 0:b[1].Eb(a.getName()),d=null===b[0]?void 0:b[0].Eb(a.getName());if(!q(d)&&q(c))a.add(c,b[1].id());else if(q(d)&&q(c)){if(null===c||null===d){if(c==d)return}else if(0==a.pc().compare(d,c))return;a.add(c,b[1].id());a.remove(d,b[0].id())}else q(d)&&!q(c)&&a.remove(d,b[0].id())};var Bc={};r("lf.ConstraintAction",Bc);Bc.RESTRICT=0;Bc.CASCADE=1;var Cc={};r("lf.ConstraintTiming",Cc);Cc.IMMEDIATE=0;Cc.DEFERRABLE=1;var Dc={};r("lf.Order",Dc);Dc.DESC=0;Dc.ASC=1;var Ec={};r("lf.Type",Ec);Ec.ARRAY_BUFFER=0;Ec.BOOLEAN=1;Ec.DATE_TIME=2;Ec.INTEGER=3;Ec.NUMBER=4;Ec.STRING=5;Ec.OBJECT=6;var Fc={0:null,1:!1,2:Object.freeze(new Date(0)),3:0,4:0,5:"",6:null};r("lf.type.DEFAULT_VALUES",Fc);function E(a,b){this.code=a;this.message="http://sn.im/2a0j3wn?c="+a;if(1<arguments.length)for(var c=1;c<=Math.min(4,arguments.length-1);++c)this.message+="&p"+(c-1)+"="+encodeURIComponent(arguments[c].toString().slice(0,64))}t(E,Error);function Gc(a){this.D=a.i(Tb);this.m=a.i(Yb);this.cd=null}function Hc(a,b,c){var d=b.Db().dg;c.forEach(function(a){d.forEach(function(b){if(null==a.s[b.getName()])throw new E(202,b.l());},this)},a)}function Ic(a,b,c,d){b.Db().Nd().forEach(function(a){a.timing==d&&Jc(this,a,c)},a)}function Jc(a,b,c){var d=Kc(a,b);c.forEach(function(a){if(Lc(a[0],a[1],b.name)&&(a=a[1].s[b.rb],null!==a&&!d.La(a)))throw new E(203,b.name);},a)}
function Kc(a,b){null===a.cd&&(a.cd=B());var c=a.cd.get(b.name)||null;null===c&&(c=a.m.table(b.ab)[b.Lc].ua(),c=a.D.get(c.l()),a.cd.set(b.name,c));return c}function Lc(a,b,c){return(null===a?null!==b:null===b)||a.Eb(c)!=b.Eb(c)}function Mc(a,b,c,d){b=Nc(a.m.info(),b.getName());null!=b&&b.forEach(function(a){if(a.timing==d){var b=this.D.get(a.name),h=Kc(this,a);c.forEach(function(c){if(Lc(c[0],c[1],h.getName())&&b.La(c[0].s[a.Lc]))throw new E(203,a.name);},this)}},a)}
function Oc(a,b,c,d){0!=c.length&&(c=c.map(function(a){return[null,a]}),Ic(a,b,c,d))}function Qc(a,b,c,d){0!=c.length&&(Ic(a,b,c,d),Mc(a,b,c,d))}function Rc(a,b,c,d){0!=c.length&&(c=c.map(function(a){return[a,null]}),Mc(a,b,c,d))};function Sc(a){this.Ca=B();this.pa=B();this.Da=B();this.A=a}m=Sc.prototype;m.getName=f("A");m.add=function(a){if(this.Da.has(a.id())){var b=[this.Da.get(a.id()),a];this.pa.set(a.id(),b);this.Da.delete(a.id())}else this.Ca.set(a.id(),a)};m.modify=function(a){var b=a[1],c=a[0].id();this.Ca.has(c)?this.Ca.set(c,b):(this.pa.has(c)&&(a=[this.pa.get(a[0].id())[0],b]),this.pa.set(c,a))};
m.delete=function(a){if(this.Ca.has(a.id()))this.Ca.delete(a.id());else if(this.pa.has(a.id())){var b=this.pa.get(a.id())[0];this.pa.delete(a.id());this.Da.set(a.id(),b)}else this.Da.set(a.id(),a)};function yc(a){var b=[];a.Ca.forEach(function(a){b.push([null,a])});a.pa.forEach(function(a){b.push(a)});a.Da.forEach(function(a){b.push([a,null])});return b}m.toString=function(){return"["+Ib(this.Ca).toString()+"], ["+Ib(this.pa).toString()+"], ["+Ib(this.Da).toString()+"]"};
function Tc(a){var b=new Sc(a.A);a.Ca.forEach(function(a){b.delete(a)});a.Da.forEach(function(a){b.add(a)});a.pa.forEach(function(a){b.modify([a[1],a[0]])});return b}m.md=function(){return 0==this.Ca.size&&0==this.Da.size&&0==this.pa.size};function Uc(a,b){this.$=B();b.forEach(function(a){this.$.set(a.getName(),a)},this);this.ca=a.i(Sb);this.D=a.i(Tb);this.Pa=new Gc(a);this.ld=new vc(a);this.qb=B()}function Pb(a){var b=[];Ib(a.qb).map(function(a){return this.$.get(a)},a).forEach(function(a){a.zb()&&(a.va().forEach(function(a){b.push(this.D.get(a.l()))},this),b.push(this.D.get(a.getName()+".#")))},a);return b}m=Uc.prototype;m.Z=f("$");
function Vc(a){var b=[];a.$.forEach(function(a){a.zb()&&(a.va().forEach(function(a){b.push(a.l())}),b.push(a.getName()+".#"))});return b}m.xb=function(a,b){Wc(this,a);Hc(this.Pa,a,b);Oc(this.Pa,a,b,0);for(var c=0;c<b.length;c++)Xc(this,a,[null,b[c]])};
function Xc(a,b,c){var d=b.getName(),e=a.qb.get(d)||new Sc(d);a.qb.set(d,e);try{zc(a.ld,b,c)}catch(g){throw g;}b=c[0];var h=c[1];null===b&&null!==h?(a.ca.set(d,h),e.add(h)):null!==b&&null!==h?(a.ca.set(d,h),e.modify(c)):null!==b&&null===h&&(a.ca.remove(d,b.id()),e.delete(b))}m.update=function(a,b){Wc(this,a);Hc(this.Pa,a,b);for(var c=0;c<b.length;c++){var d=b[c],d=[this.ca.get(d.id()),d];Qc(this.Pa,a,[d],0);Xc(this,a,d)}};
m.Qd=function(a,b){Wc(this,a);Hc(this.Pa,a,b);for(var c=0;c<b.length;c++){var d=b[c],e=null,g,h=a.Db().fd();if(null===h)g=null;else{g=this.Pa;var h=h.l(),k=d.Eb(h);g=g.D.get(h).get(k);g=0==g.length?null:g[0]}null!=g?(e=this.ca.get(g),d.oa=g,Qc(this.Pa,a,[[e,d]],0)):Oc(this.Pa,a,[d],0);Xc(this,a,[e,d])}};m.remove=function(a,b){Wc(this,a);Rc(this.Pa,a,b,0);for(var c=0;c<b.length;c++)Xc(this,a,[b[c],null])};
function Lb(a){a.qb.forEach(function(a){var c=this.$.get(a.getName());Oc(this.Pa,c,C(a.Ca),1);Rc(this.Pa,c,C(a.Da),1);Qc(this.Pa,c,C(a.pa),1)},a)}m.ia=aa();m.Gb=function(){var a=C(this.qb).map(function(a){return Tc(a)});this.ld.update(a)};function Wc(a,b){if(!a.$.has(b.getName()))throw new E(106,b.getName());};function Yc(a,b,c,d){this.c=a;this.u=b;this.da=null===this.c?!1:c;this.ma=null===this.u?!1:d}Yc.prototype.toString=function(){return(this.da?"(":"[")+(null===this.c?"unbound":this.c)+", "+(null===this.u?"unbound":this.u)+(this.ma?")":"]")};function Zc(a){if(null===a.c&&null===a.u)return[];var b=null,c=null;null===a.c||(b=new Yc(null,a.c,!1,!a.da));null===a.u||(c=new Yc(a.u,null,!a.ma,!1));return[b,c].filter(function(a){return null!==a})}
Yc.prototype.reverse=function(){return new Yc(this.u,this.c,this.ma,this.da)};function $c(a,b){var c=ad(a.c,b.c,!0,a.da,b.da);if(0==c)return!0;var d=-1==c?a:b,c=1==c?a:b;return null===d.u||d.u>c.c||d.u==c.c&&!d.ma&&!c.da}function bd(){return new Yc(null,null,!1,!1)}function cd(a){return null===a.c&&null===a.u}function dd(a){return null!=a.c&&a.c==a.u&&!a.da&&!a.ma}
Yc.prototype.contains=function(a){var b=null===this.u||a<this.u||a==this.u&&!this.ma;return(null===this.c||a>this.c||a==this.c&&!this.da)&&b};function ad(a,b,c,d,e){function g(a){return c?a:1==a?-1:1}d=d||!1;e=e||!1;return null===a?null===b?(d?!e:e)?d?g(1):g(-1):0:g(-1):null===b?g(1):a<b?-1:a==b?(d?!e:e)?d?g(1):g(-1):0:1}function ed(a,b){var c=ad(a.c,b.c,!0,a.da,b.da);0==c&&(c=ad(a.u,b.u,!1,a.ma,b.ma));return c};function F(a,b){this.entries=a;this.L=D(b);this.Xa=null}function G(a){return jc(a.L)}function fd(a){return a.entries.map(function(a){return a.sa.s})}function gd(a){return a.entries.map(function(a){return a.sa.id()})}function hd(a,b){return a.Xa.get(b.l())}var id=null;function jd(){null===id&&(id=new F([],[]));return id}
function kd(a){if(0==a.length)return jd();for(var b=a.reduce(function(a,b){return a+b.entries.length},0),c=Array(b),d=0,b=a.map(function(a){var b=B();a.entries.forEach(function(a){c[d++]=a;b.set(a.id,a)});return b}),e=B(),g=0;g<c.length;g++)b.every(function(a){return a.has(c[g].id)})&&e.set(c[g].id,c[g]);return new F(C(e),jc(a[0].L))}function ld(a){if(0==a.length)return jd();var b=B();a.forEach(function(a){a.entries.forEach(function(a){b.set(a.id,a)})});return new F(C(b),jc(a[0].L))}
function md(a,b){var c=1<b.length,d=a.map(function(a){return new nd(a,c)});return new F(d,b)}function nd(a,b){this.sa=a;this.id=od++;this.Td=b}var od=0;function H(a,b){var c=b.Ya();return null!==c&&a.sa.s.hasOwnProperty(c)?a.sa.s[c]:a.Td?a.sa.s[I(b.H())][b.getName()]:a.sa.s[b.getName()]}function pd(a,b,c){var d=b.Ya();if(null!=d)a.sa.s[d]=c;else if(a.Td){var d=I(b.H()),e=a.sa.s[d];null==e&&(e={},a.sa.s[d]=e);e[b.getName()]=c}else a.sa.s[b.getName()]=c}
function qd(a,b,c,d){function e(a,b){if(a.Td){var c=a.sa.s,d;for(d in c)g[d]=c[d]}else g[b[0]]=a.sa.s}var g={};e(a,b);e(c,d);a=new y(-1,g);return new nd(a,!0)};r("lf.bind",function(a){return new rd(a)});function rd(a){this.fa=a}r("lf.Binder",rd);rd.prototype.ua=f("fa");function sd(){this.Ne=td();var a=ud();this.ec=B();this.ec.set(1,vd());this.ec.set(2,wd());this.ec.set(4,a);this.ec.set(3,a);this.ec.set(5,xd())}sd.zc=function(){return sd.Je?sd.Je:sd.Je=new sd};function yd(a,b,c){return(a.ec.get(b)||null).get(c)||null}function td(){function a(a){return a}var b=B();b.set(1,function(a){return null===a?null:a?1:0});b.set(2,function(a){return null===a?null:a.getTime()});b.set(3,a);b.set(4,a);b.set(5,a);return b}
function vd(){var a=B();a.set("eq",function(a,c){return a==c});a.set("neq",function(a,c){return a!=c});return a}
function ud(){var a=vd();a.set("between",function(a,c){return null===a||null===c[0]||null===c[1]?!1:a>=c[0]&&a<=c[1]});a.set("gte",function(a,c){return null===a||null===c?!1:a>=c});a.set("gt",function(a,c){return null===a||null===c?!1:a>c});a.set("in",function(a,c){return-1!=c.indexOf(a)});a.set("lte",function(a,c){return null===a||null===c?!1:a<=c});a.set("lt",function(a,c){return null===a||null===c?!1:a<c});return a}
function xd(){var a=ud();a.set("match",function(a,c){return null===a||null===c?!1:(new RegExp(c)).test(a)});return a}
function wd(){var a=B();a.set("between",function(a,c){return null===a||null===c[0]||null===c[1]?!1:a.getTime()>=c[0].getTime()&&a.getTime()<=c[1].getTime()});a.set("eq",function(a,c){return(null===a?-1:a.getTime())==(null===c?-1:c.getTime())});a.set("gte",function(a,c){return null===a||null===c?!1:a.getTime()>=c.getTime()});a.set("gt",function(a,c){return null===a||null===c?!1:a.getTime()>c.getTime()});a.set("in",function(a,c){return c.some(function(c){return c.getTime()==a.getTime()})});a.set("lte",
function(a,c){return null===a||null===c?!1:a.getTime()<=c.getTime()});a.set("lt",function(a,c){return null===a||null===c?!1:a.getTime()<c.getTime()});a.set("neq",function(a,c){return(null===a?-1:a.getTime())!=(null===c?-1:c.getTime())});return a};function J(){this.h=this.C=null}var zd=[];J.prototype.getParent=f("C");J.prototype.hb=function(){for(var a=this;!ea(a.getParent());)a=a.getParent();return a};function Ad(a){for(var b=0;!ea(a.getParent());)b++,a=a.getParent();return b}function K(a){return a.h||zd}function Bd(a,b){return K(a)[b]||null}function Cd(a,b,c){b.C=a;null===a.h?a.h=[b]:a.h.splice(c,0,b)}function L(a,b){b.C=a;null===a.h?a.h=[b]:a.h.push(b)}
function Dd(a,b){var c=a.h&&a.h[b];return c?(c.C=null,a.h.splice(b,1),0==a.h.length&&(a.h=null),c):null}J.prototype.removeChild=function(a){return Dd(this,K(this).indexOf(a))};function Ed(a,b,c){Bd(a,c).C=null;b.C=a;a.h[c]=b}function Fd(a,b,c){!1!==b.call(c,a)&&K(a).forEach(function(a){Fd(a,b,c)})};function Gd(){J.call(this);this.oa=Hd++}t(Gd,J);var Hd=0;Gd.prototype.V=f("oa");function Id(a,b,c){Gd.call(this);this.O=a;this.value=b;this.G=c;this.tc=yd(sd.zc(),this.O.I(),this.G);this.$a=!1;this.ac=b}t(Id,Gd);m=Id.prototype;m.Jb=function(){var a=new Id(this.O,this.value,this.G);a.ac=this.ac;a.vd(this.$a);var b=this.V();a.oa=b;return a};m.gb=function(a){return null!=a?(a.push(this.O),a):[this.O]};m.vd=ba("$a");function Jd(a){var b=!1;a.value instanceof rd||(b="array"==da(a.value)?!a.value.some(function(a){return a instanceof rd}):!0);if(!b)throw new E(501);}
m.eval=function(a){Jd(this);if("in"==this.G)return Kd(this,a);var b=a.entries.filter(function(a){return this.tc(H(a,this.O),this.value)!=this.$a},this);return new F(b,G(a))};m.bind=function(a){if(this.ac instanceof rd){var b=this.ac.ua();if(a.length<=b)throw new E(510);this.value=a[b]}else"array"==da(this.ac)&&(this.value=this.ac.map(function(b){if(b instanceof rd){var d=b.ua();if(a.length<=d)throw new E(510);return a[b.ua()]}return b}))};
function Kd(a,b){var c=D(a.value),d=function(a){return null===a?!1:c.has(a)!=this.$a}.bind(a),e=b.entries.filter(function(a){return d(H(a,this.O))},a);return new F(e,G(b))}m.toString=function(){return"value_pred("+this.O.l()+" "+this.G+(this.$a?"(complement)":"")+" "+this.value+")"};function Ld(a){this.ba=a;this.$c=this.za=null}function Md(a,b){null===a.za&&null!=a.w&&(a.za=Nd(a.w));return a.za.get(b)||null}function Nd(a){var b=B();Fd(a,function(a){b.set(a.V(),a)});return b}function Od(a,b){b.w&&(a.w=b.w.Jb());a.$c=b}Ld.prototype.bind=function(){return this};function Pd(a,b){var c=a.w;null!=c&&Fd(c,function(a){a instanceof Id&&a.bind(b)})};function Qd(a){Ld.call(this,a)}t(Qd,Ld);function Rd(a){var b="";a.forEach(function(c,d){b+=c.O.l()+" ";b+=1==c.kb?"ASC":"DESC";d<a.length-1&&(b+=", ")});return b}Qd.prototype.Z=function(){return D(this.c)};Qd.prototype.clone=function(){var a=new Qd(this.ba);Od(a,this);this.f&&(a.f=this.f.slice());this.c&&(a.c=this.c.slice());a.W=this.W;a.N=this.N;this.M&&(a.M=this.M.slice());this.ja&&(a.ja=this.ja.slice());this.Qb&&(a.Qb=this.Qb);this.Xb&&(a.Xb=this.Xb);a.yb=this.yb;return a};
Qd.prototype.bind=function(a){Qd.Hb.bind.call(this,a);null!=this.Qb&&(this.W=a[this.Qb.ua()]);null!=this.Xb&&(this.N=a[this.Xb.ua()]);Pd(this,a);return this};function Sd(a,b){this.Aa=a;this.$=b}Sd.prototype.hb=f("Aa");Sd.prototype.Z=f("$");function Td(a){var b=D();a.forEach(function(a){a.Z().forEach(b.add.bind(b))});return b};function Ud(a,b){this.global=a;this.Ja=a.i(Rb);this.sd=b.map(function(a){return a.context});this.Xe=b.map(function(a){return a.de});this.ze=Td(this.Xe);this.of=Vd(this);this.cb=x()}function Vd(a){return a.sd.some(function(a){return!(a instanceof Qd)})?1:0}m=Ud.prototype;
m.exec=function(){function a(){var g=d.shift();if(g){var h=e[c.length];return g.hb().exec(b,h).then(function(b){c.push(b[0]);return a()})}return w()}var b=new Uc(this.global,this.ze),c=[],d=this.Xe.slice(),e=this.sd;return a().then(function(){return this.Ja.Cb(this.of,b).ia()}.bind(this)).then(function(){this.ae(c);return c}.bind(this),function(a){b.Gb();throw a;})};m.I=f("of");m.Z=f("ze");m.Mb=f("cb");m.V=function(){return ka(this)};m.ae=aa();function Wd(a,b){Ud.call(this,a,b);this.Fb=a.i(Xb)}t(Wd,Ud);Wd.prototype.getPriority=l(0);Wd.prototype.ae=function(a){this.sd.forEach(function(b,c){Xd(this.Fb,b,a[c])},this)};function Yd(a,b){this.g=a;this.Fb=a.i(Xb);this.Ba=a.i(Wb);this.ld=new vc(a);this.qb=b;var c=a.i(Yb),d=this.qb.map(function(a){return c.table(a.getName())});this.$=D(d);this.cb=x()}m=Yd.prototype;m.exec=function(){this.ld.update(this.qb);this.Oc();return w()};m.I=l(1);m.Z=f("$");m.Mb=f("cb");m.V=function(){return ka(this)};m.getPriority=l(1);m.Oc=function(){var a=Zd(this.Fb,this.$);0!=a.length&&(a=new Wd(this.g,a),$d(this.Ba,a))};function ae(a){this.g=a;this.Ja=a.i(Rb);this.Ba=a.i(Wb)}ae.prototype.Zd=function(a){a=new Yd(this.g,a);$d(this.Ba,a)};function M(a,b){this.Oa=a;this.j=b;this.Ua=B()}r("lf.backstore.FirebaseRawBackStore",M);M.prototype.gd=f("j");M.prototype.hd=function(){throw new E(351);};function be(a,b){var c=x(),d=a;b.length&&(d=a.child(b));d.once("value",function(a){c.resolve(a.val())},function(a){c.reject(a)});return c.ha}function ce(a,b,c){function d(a){a?e.reject(a):e.resolve()}c=c||!1;var e=x();c?a.set(b,d):a.update(b,d);return e.ha}
M.prototype.Ea=function(a){return be(this.j,"@rev/R").then(function(a){this.Ma=a;return be(this.j,"@table")}.bind(this)).then(function(b){var c=0,d;for(d in b)this.Ua.set(d,b[d]),b[d]>c&&(c=b[d]);a.ra().forEach(function(a){this.Ua.has(a.getName())||(b[a.getName()]=++c)},this);d=this.j.child("@table");return ce(d,b)}.bind(this))};
function de(a,b,c){var d=a.Ua.get(b);return null!=d?function(){var a={},b=x();this.j.orderByChild("T").equalTo(d).once("value",function(d){d.forEach(function(b){var d=c(b.val());a[parseInt(b.key(),10)]=d});b.resolve(a)});return b.ha}.call(a).then(function(a){a["@rev"]={R:++this.Ma};return ce(this.j,a)}.bind(a)):w()}M.prototype.rc=function(a){return de(this,a,l(null)).then(function(){this.Ua.delete(a);return ce(this.j.child("@table/"+a),null,!0)}.bind(this))};M.prototype.dropTable=M.prototype.rc;
M.prototype.mc=function(a,b,c){return de(this,a,function(a){var e=a.P;e[b]=c;return{R:this.Ma+1,T:a.T,P:e}}.bind(this))};M.prototype.addTableColumn=M.prototype.mc;M.prototype.sc=function(a,b){return de(this,a,function(a){var d=a.P;delete d[b];return{R:this.Ma+1,T:a.T,P:d}}.bind(this))};M.prototype.dropTableColumn=M.prototype.sc;M.prototype.Nc=function(a,b,c){return de(this,a,function(a){var e=a.P;e[c]=e[b];delete e[b];return{R:this.Ma+1,T:a.T,P:e}}.bind(this))};M.prototype.renameTableColumn=M.prototype.Nc;
M.prototype.tb=function(){throw new E(351);};M.prototype.createRow=M.prototype.tb;M.prototype.Cc=f("Oa");M.prototype.getVersion=M.prototype.Cc;M.prototype.cc=function(a){var b=x();a=this.Ua.get(a);this.j.orderByChild("T").equalTo(a).once("value",function(a){var d=[];a.forEach(function(a){d.push(a.val().P)});b.resolve(d)});return b.ha};M.prototype.dump=function(){var a={},b=Ib(this.Ua).map(function(b){return this.cc(b).then(function(d){a[b]=d})}.bind(this));return cb(b).then(function(){return a})};
M.prototype.dump=M.prototype.dump;function ee(a,b,c){Kb.call(this,c,b);this.j=a}t(ee,Kb);ee.prototype.H=function(a){return this.j.Ac(a)};
ee.prototype.oc=function(){var a=this.Ra.qb;if(0==a.size)this.X.resolve();else{var b=this.j.Ma+1;this.j.Ma=b;var c={"@rev":{R:b}};a.forEach(function(a,e){var g=this.j.Ua.get(e);a.Ca.forEach(function(a,d){c[d]={R:b,T:g,P:a.s}});a.pa.forEach(function(a,d){c[d]={R:b,T:g,P:a[1].s}});a.Da.forEach(function(a,b){c[b]=null})},this);this.j.j.update(c,function(c){null===c?this.X.resolve():(this.j.Ma=b-1,c=C(a).map(function(a){return fe(this.j,a.getName())},this),cb(c).then(this.X.reject.bind(this.X),this.X.reject.bind(this.X)))}.bind(this))}return this.X.ha};function ge(){this.ta=B()}function he(a,b){if(0==b.length)return C(a.ta);var c=[];b.forEach(function(a){a=this.ta.get(a)||null;null===a||c.push(a)},a);return c}ge.prototype.getData=f("ta");ge.prototype.get=function(a){return w(he(this,a))};function ie(a,b){b.forEach(function(a){this.ta.set(a.id(),a)},a)}ge.prototype.put=function(a){ie(this,a);return w()};function je(a,b){0==b.length||b.length==a.ta.size?a.ta.clear():b.forEach(function(a){this.ta.delete(a)},a)}
ge.prototype.remove=function(a){je(this,a);return w()};function ke(a){return 0==a.ta.size?0:Ib(a.ta).reduce(function(a,c){return a>c?a:c},0)};function le(a,b){this.m=a;this.uf=b;this.Mc=B();this.Ma=-1;this.L=B();this.Ua=B();this.Fd=null}m=le.prototype;
m.Ea=function(a){this.j=this.uf.child(this.m.name());var b=a||function(){return w()};return be(this.j,"@db/version").then(function(a){return null===a?ce(this.j,me(this),!0).then(function(){var a=new M(0,this.j);return b(a)}.bind(this)):a==this.m.version()?be(this.j,"@rev/R").then(function(a){this.Ma=a;return be(this.j,"@table")}.bind(this)).then(function(a){for(var b in a)this.Ua.set(b,a[b]);a=this.m.ra().map(function(a){return fe(this,a.getName())},this);return cb(a)}.bind(this)).then(function(){ne(this);
oe(this);return w()}.bind(this)):this.be(a,b).then(function(){return this.Ea()}.bind(this))}.bind(this))};m.be=function(a,b){var c=new M(a,this.j);return c.Ea(this.m).then(function(){return w()}.bind(this)).then(function(){return b(c)}).then(function(){var a=this.j.child("@db");return ce(a,{version:this.m.version()},!0)}.bind(this))};
function oe(a){a.j.off();a.j.on("child_removed",a.fg.bind(a));a.Gd&&(a.Gd.off(),a.Mc.clear());a.Gd=a.j.orderByChild("R").startAt(a.Ma+1);a.Gd.on("value",a.Zd.bind(a))}function ne(a){nb=C(a.L).map(function(a){return ke(a)}).reduce(function(a,c){return a>c?a:c},0)+1}m.fg=function(a){var b=a.val(),c=this.Mc.get(b.T)||null;null===c&&(c=D(),this.Mc.set(b.T,c));c.add(parseInt(a.key(),10))};
m.Zd=function(a){var b=a.child("@rev/R").val();null!=b&&b!=this.Ma&&(this.Ma=b,a=pe(this,a),a.forEach(function(a){var b=this.L.get(a.getName()),e=Ib(a.Da);0<e.length&&je(b,e);var g=C(a.Ca);a.pa.forEach(function(a){g.push(a[1])});ie(b,g)},this),0<a.length&&this.Hc(a),oe(this))};
function pe(a,b){var c=D(),d=B();a.Ua.forEach(function(a,b){var h=this.L.get(b),k=new Sc(b);if(this.Mc.has(a)){var n=jc(this.Mc.get(a));n.forEach(function(a){c.add(a)});he(h,n).forEach(function(a){k.delete(a)})}d.set(a,k)}.bind(a));b.forEach(function(a){if("@rev"!=a.key()){var b=parseInt(a.key(),10);if(!c.has(b)){a=a.val();var h=d.get(a.T),k=this.L.get(h.getName());k.getData().has(b)?h.modify([he(k,[b])[0],new y(b,a.P)]):h.add(new y(b,a.P))}}}.bind(a));return C(d).filter(function(a){return!a.md()})}
function fe(a,b){var c=x(),d=a.Ua.get(b);a.j.orderByChild("T").equalTo(d).once("value",function(a){var d=new ge,h=[];a.forEach(function(a){h.push(new y(parseInt(a.key(),10),a.val().P))});ie(d,h);this.L.set(b,d);c.resolve()}.bind(a));return c.ha}function me(a){var b={};b["@db"]={version:a.m.version()};b["@rev"]={R:1};a.Ma=1;b["@table"]={};a.m.ra().forEach(function(a,d){var e=a.getName();b["@table"][e]=d;this.L.set(e,new ge);this.Ua.set(e,d)},a);return b}m.Cb=function(a,b){return new ee(this,a,b)};
m.Ac=function(a){var b=this.L.get(a)||null;if(null!==b)return b;throw new E(101,a);};m.close=aa();m.subscribe=ba("Fd");m.Hc=function(a){null!=this.Fd&&this.Fd(a)};function N(a,b,c,d){this.j=b;this.Wa=c;this.Oa=a;this.Xc=d}r("lf.backstore.IndexedDBRawBackStore",N);N.prototype.gd=f("j");N.prototype.getRawDBInstance=N.prototype.gd;N.prototype.hd=f("Wa");N.prototype.getRawTransaction=N.prototype.hd;N.prototype.rc=function(a){return new v(function(b,c){try{this.j.deleteObjectStore(a)}catch(d){c(d);return}b()},this)};N.prototype.dropTable=N.prototype.rc;
function qe(a,b,c,d){return new v(function(a,g){var h;try{var k=this.Wa.objectStore(b);h=k.openCursor()}catch(n){g(n);return}h.onsuccess=function(){var b=h.result;b?(c(b),b.continue()):(d(k),a())};h.onerror=g},a)}function re(a){var b=null;return b=a instanceof ArrayBuffer?rb(a):a instanceof Date?a.getTime():a}
function se(a,b,c){function d(a){var b=pc(a.value),d=b.s,e;for(e in d){var z=pb(d[e]);c(z);d[e]=z.Ia()}a.update(b.Ia())}function e(a){var b=pb(a.value);c(b);a.update(b.Ia())}return qe(a,b,a.Xc?d:e,aa())}N.prototype.mc=function(a,b,c){var d=re(c);return se(this,a,function(a){a.s[b]=d})};N.prototype.addTableColumn=N.prototype.mc;N.prototype.sc=function(a,b){return se(this,a,function(a){delete a.s[b]})};N.prototype.dropTableColumn=N.prototype.sc;
N.prototype.Nc=function(a,b,c){return se(this,a,function(a){a.s[c]=a.s[b];delete a.s[b]})};N.prototype.renameTableColumn=N.prototype.Nc;function te(a,b){var c=[];return new v(function(a,e){var g;try{g=this.Wa.objectStore(b).openCursor()}catch(h){e(h);return}g.onsuccess=function(){var b=g.result;if(b){if(this.Xc){var e;e=pc(b.value).s;for(var h in e)c.push(e[h])}else c.push(b.value);b.continue()}else a(c)}.bind(this);g.onerror=e},a)}N.prototype.tb=function(a){var b={},c;for(c in a)b[c]=re(a[c]);return qb(b)};
N.prototype.createRow=N.prototype.tb;N.prototype.Cc=f("Oa");N.prototype.getVersion=N.prototype.Cc;N.prototype.dump=function(){for(var a=this.j.objectStoreNames,b=[],c=0;c<a.length;++c){var d=a.item(c);b.push(this.cc(d))}return cb(b).then(function(b){var c={};b.forEach(function(b,d){c[a.item(d)]=b});return c})};N.prototype.dump=N.prototype.dump;N.prototype.cc=function(a){return te(this,a).then(function(a){return a.map(function(a){return a.value})})};function ue(a,b){this.aa=a;this.Kb=b}m=ue.prototype;m.get=function(a){if(0==a.length)return this.xc();a=a.map(function(a){return new v(function(c,d){var e;try{e=this.aa.get(a)}catch(g){d(g);return}e.onerror=d;e.onsuccess=function(a){c(this.Kb(a.target.result))}.bind(this)},this)},this);return cb(a)};
m.xc=function(){return new v(function(a,b){var c=[],d;try{d=this.aa.openCursor()}catch(e){b(e);return}d.onerror=b;d.onsuccess=function(){var b=d.result;b?(c.push(this.Kb(b.value)),b.continue()):a(c)}.bind(this)},this)};m.Sb=function(a){return new v(function(b,c){var d;try{d=a()}catch(e){c(e);return}d.onsuccess=b;d.onerror=c},this)};m.put=function(a){if(0==a.length)return w();a=a.map(function(a){return this.Sb(function(){return this.aa.put(a.Ia())}.bind(this))},this);return cb(a)};
m.remove=function(a){return new v(function(b,c){var d=this.aa.count();d.onsuccess=function(d){if(0==a.length||d.target.result==a.length)return this.Sb(function(){return this.aa.clear()}.bind(this)).then(b,c);d=a.map(function(a){return this.Sb(function(){return this.aa.delete(a)}.bind(this))},this);cb(d).then(b,c)}.bind(this);d.onerror=c},this)};function ve(a,b,c,d,e){Kb.call(this,c,d);this.g=a;this.Wa=b;this.Xc=e;this.Wa.oncomplete=this.X.resolve.bind(this.X);this.Wa.onabort=this.X.reject.bind(this.X)}t(ve,Kb);ve.prototype.H=function(a,b,c){return this.Xc?(c=null!=c?c:0,a=this.Wa.objectStore(a),new qc(a,b,0==c?ra(sc,this.g):tc)):new ue(this.Wa.objectStore(a),b)};ve.prototype.oc=function(){return this.X.ha};function we(a,b){this.g=a;this.m=b;this.Yc=b.Ye().Gf||!1}m=we.prototype;
m.Ea=function(a){var b=window.indexedDB||window.mozIndexedDB||window.webkitIndexedDB||window.msIndexedDB;if(null==b)throw new E(352);var c=a||function(){return w()};return new v(function(a,e){var g;try{g=b.open(this.m.name(),this.m.version())}catch(h){e(h);return}g.onerror=e;g.onupgradeneeded=function(a){xe(this,c,a).then(aa(),e)}.bind(this);g.onsuccess=function(b){this.j=b.target.result;this.ie().then(function(b){nb=b+1;a(this.j)}.bind(this))}.bind(this)},this)};
function xe(a,b,c){var d=c.target.result,e=c.target.transaction;c=new N(c.oldVersion,d,e,a.Yc);ye(d);a.m.ra().forEach(ra(a.Bf,d,e),a);return b(c)}function ye(a){for(var b=[],c=0;c<a.objectStoreNames.length;++c){var d=a.objectStoreNames.item(c);-1!=d.indexOf(".")&&b.push(d)}b.forEach(function(b){try{a.deleteObjectStore(b)}catch(c){}})}
m.Bf=function(a,b,c){a.objectStoreNames.contains(c.getName())||a.createObjectStore(c.getName(),{keyPath:"id"});c.zb()&&(c.va().forEach(function(c){this.qc(a,b,c.l(),"btree")},this),this.qc(a,b,ze(c),"rowid"))};m.qc=function(a,b,c,d){a.objectStoreNames.contains(c)||(a.createObjectStore(c,{keyPath:"id"}),a=b.objectStore(c),(this.Yc?new qc(a,pb,tc):new ue(a,pb)).put([new tb(new sb(d))]))};
m.Cb=function(a,b){var c=Ib(b.Z());Vc(b).forEach(function(a){c.push(a)});var d=this.j.transaction(c,0==a?"readonly":"readwrite");return new ve(this.g,d,b,a,this.Yc)};
m.ie=function(a){function b(){if(0==d.length)return w();var a=d.shift();return c(a).then(b)}function c(b){return new v(function(c,d){var ga;try{ga=(a||e.transaction([b])).objectStore(b).openCursor(null,"prev")}catch(na){d(na);return}ga.onsuccess=function(a){(a=a.target.result)&&(g=Math.max(g,h(a)));c(g)};ga.onerror=function(){c(g)}})}var d=this.m.ra().map(function(a){return a.getName()}),e=this.j,g=0,h=function(a){return this.Yc?(a=pc(a.value),Object.keys(a.s).reduce(function(a,b){return Math.max(a,
b)},0)):a.key}.bind(this);return new v(function(a){b().then(function(){a(g)})})};m.close=function(){this.j.close()};m.Ac=function(){throw new E(511);};m.subscribe=aa();m.Hc=aa();function Ae(a,b,c){Kb.call(this,c,b);this.aa=a;0==b&&this.X.resolve()}t(Ae,Kb);Ae.prototype.H=function(a){return this.aa.Ac(a)};Ae.prototype.oc=function(){this.X.resolve();return this.X.ha};function Be(a){this.m=a;this.L=B()}m=Be.prototype;m.Ea=function(){this.m.ra().forEach(this.Sf,this);return w()};m.Ac=function(a){var b=this.L.get(a)||null;if(null===b)throw new E(101,a);return b};m.Cb=function(a,b){return new Ae(this,a,b)};function Ce(a,b){if(!a.L.has(b)){var c=new ge;a.L.set(b,c);return c}return null}m.Sf=function(a){Ce(this,a.getName());a.zb()&&(a.va().forEach(function(a){this.qc(a.l(),"btree")},this),this.qc(ze(a),"rowid"))};m.qc=function(a,b){var c=Ce(this,a);null===c||c.put([new tb(new sb(b))])};
m.close=aa();m.subscribe=aa();m.Hc=aa();function De(a){Be.call(this,a);this.od=null}t(De,Be);De.prototype.subscribe=function(a){null===this.od&&(this.od=a)};De.prototype.Hc=function(a){null===this.od||this.od(a)};function Ee(a,b,c){this.Wa=a;this.A=b;this.Kb=c}Ee.prototype.get=function(a){var b=this.Kb;return Fe(this.Wa,"SELECT id, value FROM "+this.A+" "+(0==a.length?"":"WHERE id IN ("+a.join(",")+")"),[],function(a){for(var d=a.rows.length,e=Array(d),g=0;g<d;++g)e[g]=b({id:a.rows.item(g).id,value:JSON.parse(a.rows.item(g).value)});return e})};
Ee.prototype.put=function(a){if(0==a.length)return w();var b="INSERT OR REPLACE INTO "+this.A+"(id, value) VALUES (?, ?)";a.forEach(function(a){Fe(this.Wa,b,[a.id(),JSON.stringify(a.s)])},this);return w()};Ee.prototype.remove=function(a){Fe(this.Wa,"DELETE FROM "+this.A+" "+(0==a.length?"":"WHERE id IN ("+a.join(",")+")"),[]);return w()};function Ge(a,b,c){Kb.call(this,b,c);this.j=a;this.L=B();this.Id=[]}t(Ge,Kb);function He(a){return a.replace(".","__d__").replace("#","__s__")}Ge.prototype.H=function(a,b){var c=this.L.get(a)||null;null===c&&(c=new Ee(this,He(a),b),this.L.set(a,c));return c};function Fe(a,b,c,d){var e=x();a.Id.push({sg:b,ig:c,transform:d,X:e});return e.ha}
Ge.prototype.oc=function(){var a=null,b=this.X.reject.bind(this.X),c=function(a,b){this.X.reject(b)}.bind(this),d=[],e=function(b,h){if(null!==a){var k=h;null!=a.transform&&null!=h&&(k=a.transform(h));d.push(k);a.X.resolve(k)}0<this.Id.length?(a=k=this.Id.shift(),b.executeSql(k.sg,k.ig,e,c)):this.X.resolve(d)}.bind(this);0==this.nf?this.j.readTransaction(e,b):this.j.transaction(e,b);return this.X.ha};function O(a,b,c){this.j=c;this.g=a;this.Oa=b}r("lf.backstore.WebSqlRawBackStore",O);O.prototype.gd=f("j");O.prototype.getRawDBInstance=O.prototype.gd;O.prototype.hd=function(){throw new E(356);};O.prototype.getRawTransaction=O.prototype.hd;function Ie(a){return new Ge(a.j,new Uc(a.g,D()),1)}O.prototype.rc=function(a){var b=Ie(this);Fe(b,"DROP TABLE "+a,[]);return b.ia()};O.prototype.dropTable=O.prototype.rc;
O.prototype.cc=function(a){var b=Ie(this);Fe(b,"SELECT id, value FROM "+a,[]);return b.ia().then(function(a){for(var b=a[0].rows.length,e=Array(b),g=0;g<b;++g)e[g]={id:a[0].rows.item(g).id,value:JSON.parse(a[0].rows.item(g).value)};return w(e)})};function Je(a,b,c){var d=Ie(a),e="UPDATE "+b+" SET value=? WHERE id=?";return a.cc(b).then(function(a){a.forEach(function(a){a=c(a);Fe(d,e,[JSON.stringify(a.value),a.id])});return d.ia()})}
O.prototype.mc=function(a,b,c){var d=re(c);return Je(this,a,function(a){a.value[b]=d;return a})};O.prototype.addTableColumn=O.prototype.mc;O.prototype.sc=function(a,b){return Je(this,a,function(a){delete a.value[b];return a})};O.prototype.dropTableColumn=O.prototype.sc;O.prototype.Nc=function(a,b,c){return Je(this,a,function(a){a.value[c]=a.value[b];delete a.value[b];return a})};O.prototype.renameTableColumn=O.prototype.Nc;O.prototype.tb=function(a){var b={},c;for(c in a)b[c]=re(a[c]);return qb(b)};
O.prototype.createRow=O.prototype.tb;O.prototype.Cc=f("Oa");O.prototype.getVersion=O.prototype.Cc;function Ke(a){Fe(a,'SELECT tbl_name FROM sqlite_master WHERE type="table"',[],function(a){for(var c=Array(a.rows.length),d=0;d<c.length;++d)c[d]=a.rows.item(d).tbl_name;return c})}
O.prototype.dump=function(){var a=x(),b=Ie(this);Ke(b);var c={};b.ia().then(function(b){b=b[0].filter(function(a){return"__lf_ver"!=a&&"__WebKitDatabaseInfoTable__"!=a}).map(function(a){return this.cc(a).then(function(b){c[a]=b})},this);cb(b).then(function(){a.resolve(c)})}.bind(this));return a.ha};O.prototype.dump=O.prototype.dump;function Le(a,b,c){this.g=a;this.m=b;this.rg=c||4194304}function Me(a){return new Uc(a.g,D())}m=Le.prototype;m.Ea=function(a){if(null==window.openDatabase)throw new E(353);var b=a||function(){return w()};return new v(function(a,d){try{var e=window.openDatabase(this.m.name(),"",this.m.name(),this.rg);if(null!=e)this.j=e,Ne(this,b).then(a,d);else throw new E(354);}catch(g){d(g)}},this)};
function Ne(a,b){var c=x(),d=new Ge(a.j,Me(a),1);Fe(d,"CREATE TABLE IF NOT EXISTS __lf_ver(id INTEGER PRIMARY KEY, v INTEGER)",[]);Fe(d,"SELECT v FROM __lf_ver WHERE id = 0",[]);d.ia().then(function(a){var d=0;a[1].rows.length&&(d=a[1].rows.item(0).v);d<this.m.version()?this.be(b,d).then(c.resolve.bind(c)):d>this.m.version()?c.reject(new E(108)):c.resolve()}.bind(a));return c.ha}m.Cb=function(a,b){if(null!=this.j)return new Ge(this.j,b,a);throw new E(2);};m.close=aa();
m.Ac=function(){throw new E(512);};m.subscribe=function(){throw new E(355);};m.Hc=function(){throw new E(355);};m.be=function(a,b){var c=x();Oe(this).then(function(){a(new O(this.g,b,this.j)).then(function(){return this.ie()}.bind(this)).then(c.resolve.bind(c))}.bind(this),c.reject.bind(c));return c.ha};
function Oe(a){var b=a.m.ra(),c=new Ge(a.j,Me(a),1),d=new Ge(a.j,Me(a),1);Fe(c,"INSERT OR REPLACE INTO __lf_ver VALUES (0, ?)",[a.m.version()]);Ke(c);return c.ia().then(function(a){function c(a,b){Fe(d,"INSERT INTO "+a+"(id, value) VALUES(?, ?)",[-1,JSON.stringify(ob(new tb(new sb(b))))])}var h=a[1];h.filter(function(a){return-1!=a.indexOf("__d__")}).forEach(function(a){Fe(d,"DROP TABLE "+a,[])});var k=[],n=[],z=[];b.map(function(a){-1==h.indexOf(a.getName())&&k.push(a.getName());a.zb&&(a.va().forEach(function(a){a=
He(a.l());k.push(a);n.push(a)}),a=He(ze(a)),k.push(a),z.push(a))});k.forEach(function(a){Fe(d,"CREATE TABLE "+a+"(id INTEGER PRIMARY KEY, value TEXT)",[])});n.forEach(function(a){c(a,"btree")});z.forEach(function(a){c(a,"rowid")});return d.ia()})}
m.ie=function(){var a=0,b=x(),c=function(b){var c=new Ge(this.j,Me(this),0);Fe(c,"SELECT MAX(id) FROM "+b,[]);return c.ia().then(function(b){b=b[0].rows.item(0)[0];a=Math.max(b,a)})}.bind(this),d=this.m.ra().map(function(a){return c(a.getName())});cb(d).then(function(){b.resolve(a)},function(a){b.reject(a)});return b.ha};function Pe(a){this.o=B();this.Yb=B();a.ra().forEach(function(a){this.Yb.set(a.getName(),D())},this)}m=Pe.prototype;m.set=function(a,b){this.o.set(b.id(),b);this.Yb.get(a).add(b.id())};m.wd=function(a,b){var c=this.Yb.get(a);b.forEach(function(a){this.o.set(a.id(),a);c.add(a.id())},this)};m.get=function(a){return this.o.get(a)||null};function Qe(a,b){return b.map(function(a){return this.get(a)},a)}
m.Za=function(a,b,c){var d=[],e=Math.min(b,c),g=Math.max(b,c);a=this.Yb.get(a);if(a.size<g-e)a.forEach(function(a){a>=e&&a<=g&&(a=this.o.get(a),d.push(a))},this);else for(b=e;b<=g;++b)a.has(b)&&(c=this.o.get(b),d.push(c));return d};m.remove=function(a,b){this.o.delete(b);this.Yb.get(a).delete(b)};m.yc=function(a){return null!=a?this.Yb.get(a).size:this.o.size};m.clear=function(){this.o.clear();this.Yb.clear()};function Re(a,b,c){var d=0,e=a.length;for(c=c||Se;d<e;){var g=d+e>>1;0>c(a[g],b)?d=g+1:e=g}return d==e&&a[d]==b?d:~d}function Se(a,b){return a-b}function Te(a,b,c){c=Re(a,b,c);return 0>c?(a.splice(-(c+1),0,b),!0):!1};function Ue(a,b,c,d){a=b?a.reverse():a;if(null==c&&null==d)return a;c=Math.min(q(c)?c:a.length,a.length);if(0==c)return[];d=Math.min(d||0,a.length);return a.slice(d,d+c)};function Ve(){this.na=0}Ve.prototype.add=function(a,b){this.na+=b};Ve.prototype.remove=function(a,b){this.na-=b};Ve.prototype.clear=function(){this.na=0};function We(a,b){a.clear();b.forEach(function(a){this.na+=a.na},a)};function Xe(a,b,c,d){this.A=a;this.U=b;this.ne=c;this.ob=new Ve;if(d){a=511;a*=a*a;if(d.length>=a)throw new E(6,a);d=Ye(this,d);this.qa=d=Ze(d)}else this.clear()}var $e=[];m=Xe.prototype;m.getName=f("A");m.toString=function(){return this.qa.toString()};m.add=function(a,b){this.qa=this.qa.xb(a,b)};m.set=function(a,b){this.qa=this.qa.xb(a,b,!0)};m.remove=function(a,b){this.qa=this.qa.remove(a,b)};m.get=function(a){return this.qa.get(a)};
m.bd=function(a){if(null==a)return this.Na().na;if(a instanceof Yc){if(cd(a))return this.Na().na;if(dd(a))return this.get(a.c).length}return this.Za([a]).length};m.Na=f("ob");m.xc=function(a,b,c,d){c=Array(a);this.qa.fill({offset:b?this.ob.na-a-d:d,count:a,le:0},c);return b?c.reverse():c};
m.Za=function(a,b,c,d){var e=af(this.qa).b[0];if(!q(e)||0==c)return $e;b=b||!1;c=null!=c?Math.min(c,this.ob.na):this.ob.na;d=d||0;var g=Math.min(Math.max(this.ob.na-d,0),c);if(0==g)return $e;if(!q(a)||1==a.length&&a[0]instanceof Yc&&cd(a[0]))return this.xc(g,b,c,d);a=this.U.jf(a);var h=Array(b?this.ob.na:g),k={count:0,W:h.length,reverse:b,N:d};a.forEach(function(a){for(var b=this.U.td(a),b=this.U.Sd(a)?e:b[0],b=bf(this.qa,b),c=k.count,d=0;null!=b&&k.count<k.W;)b.Za(a,k,h),k.count!=c?(d=0,c=k.count):
d++,b=2==d?null:b.next()},this);h.splice(k.count,g-k.count);return b?Ue(h,b,c,d):h};m.clear=function(){this.qa=cf(this);this.ob.clear()};m.La=function(a){return this.qa.La(a)};m.min=function(){return this.Gc(this.U.min.bind(this.U))};m.max=function(){return this.Gc(this.U.max.bind(this.U))};m.Gc=function(a){var b=af(this.qa),c=df(this.qa);if(0==b.b.length&&0==c.b.length)return null;var d=b.b[0],b=b.B[0],e=c.b[c.b.length-1],c=c.B[c.b.length-1];return 1==a(d,e)?[d,this.ne?[b]:b]:[e,this.ne?[c]:c]};
m.Ga=f("ne");m.pc=f("U");m.Wd=function(a,b){return null!=a?-1==this.U.compare(a,b):!1};m.Qa=function(a,b){return null!=a?0==this.U.compare(a,b):!1};m.Ia=function(){for(var a=[],b=af(this.qa);b;)a.push(new y(b.oa,[b.b,b.B])),b=b.xa;return a};function ef(a,b,c,d){a=new Xe(b,a,c);d=ff(d,a);a.qa=d;return a}function gf(a,b){this.oa=a;this.F=b;this.ib=0;this.xa=this.Ab=this.C=null;this.b=[];this.B=[];this.h=[]}function cf(a){return new gf(nb++,a)}function P(a){return 0==a.ib}m=gf.prototype;m.next=f("xa");
function hf(a){function b(a){return null!=a?a.oa.toString():"_"}var c=a.oa+"["+a.b.join("|")+"]",d=a.h.map(function(a){return a.oa}).join("|"),e=a.B.join("/"),g=b(a.Ab)+"{",g=P(a)?g+e:g+d,g=g+"}"+b(a.C);a.xa&&(a=hf(a.xa),c=c+"  "+a[0],g=g+"  "+a[1]);return[c,g]}m.toString=function(){var a="",b=hf(this),a=a+(b[0]+"\n"+b[1]+"\n");this.h.length&&(a+=this.h[0].toString());return a};function af(a){return P(a)?a:af(a.h[0])}function df(a){return P(a)?a:df(a.h[a.h.length-1])}
function jf(a,b){b&&(b.Ab=a);a&&(a.xa=b)}function Ye(a,b){for(var c=b.length,d=0,e=cf(a),g=e;0<c;){var h=768<=c?511:257<=c&&511>=c?c:257,k=b.slice(d,d+h);e.b=k.map(function(a){return a.key});e.B=k.map(function(a){return a.value});d+=h;c-=h;0<c&&(h=cf(e.F),jf(e,h),e=h)}return g}function kf(a){var b=a[0],c=cf(b.F);c.ib=b.ib+1;c.h=a;for(b=0;b<a.length;++b)a[b].C=c,0<b&&c.b.push(a[b].b[0]);return c}
function Ze(a){var b=a,c=[];do c.push(b),b=b.xa;while(b);if(512>=c.length)b=kf(c);else{var d=c.length,e=0,b=cf(a.F);for(b.ib=a.ib+2;0<d;){a=768<=d?511:257<=d&&511>=d?d:257;var g=c.slice(e,e+a),h=kf(g);h.C=b;b.h.length&&(b.b.push(g[0].b[0]),jf(b.h[b.h.length-1],h));b.h.push(h);e+=a;d-=a}}return b}m.get=function(a){var b=mf(this,a);if(P(this)){var c=$e;this.F.Qa(this.b[b],a)&&(c=c.concat(this.B[b]));return c}b=this.F.Qa(this.b[b],a)?b+1:b;return this.h[b].get(a)};
m.La=function(a){var b=mf(this,a);return this.F.Qa(this.b[b],a)?!0:P(this)?!1:this.h[b].La(a)};m.remove=function(a,b){nf(this,a,-1,b);if(null==this.C){var c=this;1==this.h.length&&(c=this.h[0],c.C=null);return c}return this};function of(a){return P(a)?a.b[0]:of(a.h[0])}function pf(a){a.b=[];for(var b=1;b<a.h.length;++b)a.b.push(of(a.h[b]))}
function nf(a,b,c,d){var e=mf(a,b),g=P(a);if(!g){var h=a.F.Qa(a.b[e],b)?e+1:e;if(nf(a.h[h],b,h,d))pf(a);else return!1}else if(!a.F.Qa(a.b[e],b))return!1;if(a.b.length>e&&a.F.Qa(a.b[e],b)){if(q(d)&&!a.F.Ga()&&g&&(h=a.B[e],d=Re(h,d,void 0),0>d?d=!1:(h.splice(d,1),d=!0),d&&a.F.Na().remove(b,1),a.B[e].length))return!1;a.b.splice(e,1);g&&(g=a.F.Ga()?1:a.B[e].length,a.B.splice(e,1),a.F.Na().remove(b,g))}if(256>a.b.length&&null!=a.C){a:{b=null;if(a.xa&&256<a.xa.b.length)b=a.xa,e=d=0,g=a.b.length+1;else if(a.Ab&&
256<a.Ab.b.length)b=a.Ab,d=a.Ab.b.length-1,e=P(a)?d:d+1,g=0;else{b=!1;break a}a.b.splice(g,0,b.b[d]);b.b.splice(d,1);d=P(a)?a.B:a.h;h=null;P(a)?h=b.B:(h=b.h,h[e].C=a);d.splice(g,0,h[e]);h.splice(e,1);P(b)||(pf(b),pf(a));b=!0}b||qf(a,c)}return!0}
function qf(a,b){var c,d,e;a.xa&&511>a.xa.b.length?(c=a.xa,e=d=0):a.Ab&&(c=a.Ab,d=c.b.length,e=P(c)?c.B.length:c.h.length);d=[d,0].concat(a.b);Array.prototype.splice.apply(c.b,d);d=null;P(a)?d=a.B:(d=a.h,d.forEach(function(a){a.C=c}));d=[e,0].concat(d);Array.prototype.splice.apply(P(c)?c.B:c.h,d);jf(a.Ab,a.xa);P(c)||pf(c);-1!=b&&(a.C.b.splice(b,1),a.C.h.splice(b,1))}
m.xb=function(a,b,c){var d=mf(this,a);if(P(this)){if(this.F.Qa(this.b[d],a)){if(c)this.F.Na().remove(a,this.F.Ga()?1:this.B[d].length),this.B[d]=this.F.Ga()?b:[b];else{if(this.F.Ga())throw new E(201);if(!Te(this.B[d],b))throw new E(109);}this.F.Na().add(a,1);return this}this.b.splice(d,0,a);this.B.splice(d,0,this.F.Ga()?b:[b]);this.F.Na().add(a,1);512==this.b.length?(d=cf(this.F),a=cf(this.F),a.ib=1,a.b=[this.b[256]],a.h=[this,d],a.C=this.C,this.C=a,d.b=this.b.splice(256),d.B=this.B.splice(256),d.C=
a,jf(d,this.xa),jf(this,d),d=a):d=this;return d}d=this.F.Qa(this.b[d],a)?d+1:d;a=this.h[d].xb(a,b,c);P(a)||1!=a.b.length||(this.b.splice(d,0,a.b[0]),a.h[1].C=this,a.h[0].C=this,this.h.splice(d,1,a.h[1]),this.h.splice(d,0,a.h[0]));return 512==this.b.length?rf(this):this};function rf(a){var b=cf(a.F),c=cf(a.F);b.C=a.C;b.ib=a.ib+1;b.b=[a.b[256]];b.h=[a,c];a.b.splice(256,1);c.C=b;c.ib=a.ib;c.b=a.b.splice(256);c.h=a.h.splice(257);c.h.forEach(function(a){a.C=c});a.C=b;jf(c,a.xa);jf(a,c);return b}
function mf(a,b){for(var c=0,d=a.b.length;c<d;){var e=c+d>>1;a.F.Wd(a.b[e],b)?c=e+1:d=e}return c}function bf(a,b){if(!P(a)){var c=mf(a,b);a.F.Qa(a.b[c],b)&&c++;return bf(a.h[c],b)}return a}
m.Za=function(a,b,c){function d(a){return a[0]?a[1]?0:1:-1}var e=this.F.pc(),g=0,h=this.b.length-1,k=this.b,n=d(e.sb(k[g],a)),z=d(e.sb(k[h],a));if(1!=n&&(-1!=n||-1!=z)){var ga=function(a,b){var c=a+b>>1;return c==a?c+1:c},na=function(b,c,g){if(b>=c)return 0==g?c:-1;var h=d(e.sb(k[b],a));if(0==h)return b;if(1==h)return-1;h=ga(b,c);if(h==c)return 0==g?c:-1;var n=d(e.sb(k[h],a));return 0==n?na(b,h,n):-1==n?na(h+1,c,g):na(b+1,h,n)},Ya=function(b,c){if(b>=c)return b;var g=d(e.sb(k[c],a));if(0==g)return c;
if(-1==g)return b;g=ga(b,c);if(g==c)return b;var h=d(e.sb(k[g],a));return 0==h?Ya(g,c):1==h?Ya(b,g-1):-1};0!=n&&(g=na(g+1,h,z));-1!=g&&(h=Ya(g,h),-1!=h&&h>=g&&sf(this,b,c,g,h+1))}};function sf(a,b,c,d,e){for(;d<e&&(b.reverse||!(b.count>=b.W));++d)if(a.F.Ga())!b.reverse&&b.N?b.N--:c[b.count++]=a.B[d];else for(var g=0;g<a.B[d].length&&b.count<c.length;++g)!b.reverse&&b.N?b.N--:c[b.count++]=a.B[d][g]}
m.fill=function(a,b){if(P(this))for(var c=0;c<this.B.length&&0<a.count;++c)if(0<a.offset){if(a.offset-=this.F.Ga()?1:this.B[c].length,0>a.offset)for(var d=this.B[c].length+a.offset;d<this.B[c].length&&0<a.count;++d)b[a.le++]=this.B[c][d],a.count--}else if(this.F.Ga())b[a.le++]=this.B[c],a.count--;else for(d=0;d<this.B[c].length&&0<a.count;++d)b[a.le++]=this.B[c][d],a.count--;else for(c=0;c<this.h.length&&0<a.count;++c)this.h[c].fill(a,b)};
function ff(a,b){for(var c=b.Na(),d=a.map(function(a){var d=new gf(a.id(),b);d.b=a.s[0];d.B=a.s[1];d.b.forEach(function(a,e){c.add(a,b.Ga()?1:d.B[e].length)});return d}),e=0;e<d.length-1;++e)jf(d[e],d[e+1]);return 1<d.length?Ze(d[0]):d[0]};function tf(a){if(1==a.f.length)return new uf(a.f[0].kb);a=a.f.map(function(a){return a.kb});return new vf(a)}function uf(a){this.ad=0==a?wf:xf;this.Xd=0==a?function(a){return null!=a?a.reverse():null}:function(a){return a||null};this.ce=0==a?yf:zf}t(uf,uc);function xf(a,b){return a>b?1:a<b?-1:0}function wf(a,b){return xf(b,a)}function zf(a,b){return ed(a,b)}function yf(a,b){return ed(b,a)}m=uf.prototype;
m.sb=function(a,b){var c=this.Xd(b),d=[null===c.c,null===c.u];if(!d[0]){var e=this.ad(a,c.c);d[0]=c.da?1==e:-1!=e}d[1]||(e=this.ad(a,c.u),d[1]=c.ma?-1==e:1!=e);return d};m.compare=function(a,b){return this.ad(a,b)};m.min=function(a,b){return a<b?1:a==b?0:-1};m.max=function(a,b){return a>b?1:a==b?0:-1};m.Rd=function(a,b){var c=this.sb(a,b);return c[0]&&c[1]};m.jf=function(a){return a.filter(function(a){return null!==a}).sort(function(a,c){return this.ce(a,c)}.bind(this))};m.Sd=function(a){return ea(this.Xd(a).c)};
m.td=function(a){a=this.Xd(a);return[a.c,a.u]};m.toString=function(){return this.ad==wf?"SimpleComparator_DESC":"SimpleComparator_ASC"};function vf(a){this.Ka=a.map(function(a){return new uf(a)})}t(vf,uc);function Af(a,b,c,d){for(var e=0,g=0;g<a.Ka.length&&0==e;++g)e=d(a.Ka[g],b[g],c[g]);return e}m=vf.prototype;m.compare=function(a,b){return Af(this,a,b,function(a,b,e){return a.compare(b,e)})};m.min=function(a,b){return Af(this,a,b,function(a,b,e){return a.min(b,e)})};
m.max=function(a,b){return Af(this,a,b,function(a,b,e){return a.max(b,e)})};m.sb=function(a,b){for(var c=[!0,!0],d=0;d<this.Ka.length&&(c[0]||c[1]);++d){var e=this.Ka[d].sb(a[d],b[d]);c[0]=c[0]&&e[0];c[1]=c[1]&&e[1]}return c};m.Rd=function(a,b){for(var c=!0,d=0;d<this.Ka.length&&c;++d)c=this.Ka[d].Rd(a[d],b[d]);return c};
m.jf=function(a){var b=a.filter(function(a){return a.every(fa)});a=Array(this.Ka.length);for(var c=0;c<a.length;c++)a[c]=b.map(function(a){return a[c]});a.forEach(function(a,b){a.sort(function(a,c){return this.Ka[b].ce(a,c)}.bind(this))},this);b=Array(b.length);for(c=0;c<b.length;c++)b[c]=a.map(function(a){return a[c]});return b.sort(function(a,b){for(var c=0,h=0;h<this.Ka.length&&0==c;++h)c=this.Ka[h].ce(a[h],b[h]);return c}.bind(this))};m.Sd=function(a){return this.Ka[0].Sd(a[0])};
m.td=function(a){var b=a.map(function(a,b){return this.Ka[b].td(a)[0]},this);a=a.map(function(a,b){return this.Ka[b].td(a)[1]},this);return[b,a]};function Bf(a){this.fa=a;this.jb=D();this.Pc=new Ve;this.ob=new Ve}m=Bf.prototype;m.getName=function(){return this.fa.getName()};m.add=function(a,b){null===a?(this.jb.add(b),this.Pc.add(a,1)):this.fa.add(a,b)};m.set=function(a,b){null===a?(this.jb.clear(),this.Pc.clear(),this.add(a,b)):this.fa.set(a,b)};m.remove=function(a,b){null===a?b?(this.jb.delete(b),this.Pc.remove(a,1)):(this.jb.clear(),this.Pc.clear()):this.fa.remove(a,b)};m.get=function(a){return null===a?jc(this.jb):this.fa.get(a)};
m.bd=function(a){return this.fa.bd(a)};m.Na=function(){We(this.ob,[this.fa.Na(),this.Pc]);return this.ob};m.Za=function(a,b,c,d){b=this.fa.Za(a,b,c,d);return null!=a?b:b.concat(jc(this.jb))};m.clear=function(){this.jb.clear();this.fa.clear()};m.La=function(a){return null===a?0!=this.jb.size:this.fa.La(a)};m.min=function(){return this.fa.min()};m.max=function(){return this.fa.max()};m.Ia=function(){return[new y(-2,jc(this.jb))].concat(this.fa.Ia())};m.pc=function(){return this.fa.pc()};
function Cf(a,b){for(var c=-1,d=0;d<b.length;++d)if(-2==b[d].id()){c=d;break}if(-1==c)throw new E(102);var d=b[c].s,e=b.slice(0);e.splice(c,1);var c=a(e),g=new Bf(c);d.forEach(function(a){g.jb.add(a)});return g}m.Ga=function(){return this.fa.Ga()};function Df(a){this.A=a;this.nb=D();this.U=new uf(1)}m=Df.prototype;m.getName=f("A");m.add=function(a){if("number"!=typeof a)throw new E(103);this.nb.add(a)};m.set=function(a,b){this.add(a,b)};m.remove=function(a){this.nb.delete(a)};m.get=function(a){return this.La(a)?[a]:[]};m.min=function(){return this.Gc(this.U.min.bind(this.U))};m.max=function(){return this.Gc(this.U.max.bind(this.U))};
m.Gc=function(a){if(0==this.nb.size)return null;var b=jc(this.nb).reduce(function(b,d){return null===b||1==a(d,b)?d:b},null);return[b,[b]]};m.bd=function(){return this.nb.size};m.Za=function(a,b,c,d){var e=a||[bd()];a=jc(this.nb).filter(function(a){return e.some(function(b){return this.U.Rd(a,b)},this)},this);return Ue(a,b,c,d)};m.clear=function(){this.nb.clear()};m.La=function(a){return this.nb.has(a)};m.Ia=function(){return[new y(0,jc(this.nb))]};m.pc=f("U");
function Ef(a,b){var c=new Df(a);b[0].s.forEach(function(a){c.add(a,a)});return c}m.Ga=l(!0);m.Na=function(){var a=new Ve;a.na=this.nb.size;return a};function Ff(a){this.g=a;this.Ja=a.i(Rb);this.D=a.i(Tb);this.ca=a.i(Sb)}Ff.prototype.Ea=function(a){var b=a.ra(),c=function(){if(0==b.length)return w();var a=b.shift();return(a.zb()?Gf(this,a):Hf(this,a)).then(c)}.bind(this);return c()};function Hf(a,b){var c=new Uc(a.g,D([b])),c=a.Ja.Cb(0,c),d=c.H(b.getName(),b.Lb.bind(b)).get([]).then(function(a){this.ca.wd(b.getName(),a);If(this,b,a)}.bind(a));c.ia();return d}
function If(a,b,c){var d=a.D.ic.get(b.getName())||[];c.forEach(function(a){d.forEach(function(b){var c=a.Eb(b.getName());b.add(c,a.id())})})}function Gf(a,b){var c=new Uc(a.g,D([b])),d=a.Ja.Cb(0,c),c=d.H(b.getName(),b.Lb).get([]).then(function(a){this.ca.wd(b.getName(),a)}.bind(a)),e=b.va().map(function(a){return Jf(this,a,d)},a).concat(Kf(a,b,d));d.ia();return cb(e.concat(c))}
function Jf(a,b,c){c=c.H(b.l(),pb,1);var d=tf(b);return c.get([]).then(function(a){if(1<a.length){if(Lf(b)){var c=ef.bind(void 0,d,b.l(),b.Ec);a=Cf(c,a.slice(1))}else a=ef(d,b.l(),b.Ec,a.slice(1));this.D.set(b.Qc,a)}}.bind(a))}function Kf(a,b,c){return c.H(ze(b),pb,1).get([]).then(function(a){1<a.length&&(a=Ef(ze(b),a.slice(1)),this.D.set(b.getName(),a))}.bind(a))};function Mf(){this.aa=B();this.ic=B()}Mf.prototype.Ea=function(a){a.ra().forEach(function(a){var c=[];this.ic.set(a.getName(),c);var d=ze(a);if(null===this.get(d)){var e=new Df(d);c.push(e);this.aa.set(d,e)}a.va().forEach(function(a){var b;b=tf(a);b=new Xe(a.l(),b,a.Ec);b=Lf(a)?new Bf(b):b;c.push(b);this.aa.set(a.l(),b)},this)},this);return w()};Mf.prototype.get=function(a){return this.aa.get(a)||null};
Mf.prototype.set=function(a,b){var c=this.ic.get(a)||null;null===c&&(c=[],this.ic.set(a,c));for(var d=null,e=0;e<c.length;e++)if(c[e].getName()==b.getName()){d=e;break}null!==d&&0<c.length?c.splice(d,1,b):c.push(b);this.aa.set(b.getName(),b)};function Nf(a){this.hc=[];q(a)&&this.add(a)}Nf.prototype.toString=function(){return this.hc.map(function(a){return a.toString()}).join(",")};Nf.prototype.La=function(a){return this.hc.some(function(b){return b.contains(a)})};Nf.prototype.wa=f("hc");
Nf.prototype.add=function(a){if(0!=a.length)if(a=this.hc.concat(a),1==a.length)this.hc=a;else{a.sort(ed);for(var b=[],c=a[0],d=1;d<a.length;++d)if($c(c,a[d])){var e=a[d],g=bd();if(null!==c.c&&null!==e.c){var h=ad(c.c,e.c,!0);1!=h?(g.c=c.c,g.da=0!=h?c.da:c.da&&e.da):(g.c=e.c,g.da=e.da)}null!==c.u&&null!==e.u&&(h=ad(c.u,e.u,!1),-1!=h?(g.u=c.u,g.ma=0!=h?c.ma:c.ma&&e.ma):(g.u=e.u,g.ma=e.ma));c=g}else b.push(c),c=a[d];b.push(c);this.hc=b}};
function Of(a,b){var c=[];a.wa().map(function(a){return b.wa().map(function(b){var c;if($c(a,b)){c=bd();var h=ad(a.c,b.c,!0),h=0==h?a.da?a:b:-1!=h?a:b;c.c=h.c;c.da=h.da;null===a.u||null===b.u?b=null===a.u?b:a:(h=ad(a.u,b.u,!1),b=0==h?a.ma?a:b:-1==h?a:b);c.u=b.u;c.ma=b.ma}else c=null;return c})}).forEach(function(a){c=c.concat(a)});return new Nf(c.filter(function(a){return null!==a}))};function Rf(a,b){var c=[],d=null,e=null;Fd(a,function(a){var h=b(a);null==a.getParent()?e=h:L(d,h);var k=a.getParent();null!==k&&K(k).length==K(d).length&&(k=c.indexOf(d),-1!=k&&c.splice(k,1));1<K(a).length&&c.push(h);d=null===a.h?c[c.length-1]:h});return e}function Sf(a){return Tf(a,function(a){return null===a.h})}
function Uf(a){var b=a.getParent(),c=0;null!==b&&(c=K(b).indexOf(a),b.removeChild(a));var d=K(a).slice();d.forEach(function(d,g){a.removeChild(d);null===b||Cd(b,d,c+g)});return{parent:b,children:d}}function Vf(a,b){K(a).slice().forEach(function(c){a.removeChild(c);L(b,c)});L(a,b)}function Wf(a){var b=Bd(a,0);Uf(a);Vf(b,a);return b}
function Xf(a,b,c){var d=Bd(a,0),e=K(d).slice();if(!e.some(function(a){return b(a)}))return a;Uf(a);e.forEach(function(e,h){if(b(e)){var k=c(a);Dd(d,h);L(k,e);Cd(d,k,h)}});return d}function Yf(a,b,c,d){var e=a.getParent();null!==e&&(a=K(e).indexOf(a),Dd(e,a),Cd(e,c,a));K(b).slice().forEach(function(a){b.removeChild(a);L(d,a)});return c}function Tf(a,b,c){function d(a){b(a)&&e.push(a);null!=c&&c(a)||K(a).forEach(d)}var e=[];d(a);return e}
function Zf(a,b){var c=b||function(a){return a.toString()+"\n"},d="";Fd(a,function(a){for(var b=0;b<Ad(a);b++)d+="-";d+=c(a)});return d};function $f(a){Gd.call(this);this.Rb=a;this.$a=!1}t($f,Gd);m=$f.prototype;m.Jb=function(){return Rf(this,function(a){if(a instanceof $f){var b=new $f(a.Rb);b.$a=a.$a;a=a.V();b.oa=a;return b}return a.Jb()})};m.gb=function(a){var b=a||[];Fd(this,function(a){a!=this&&a.gb(b)}.bind(this));a=D(b);return jc(a)};m.vd=function(a){this.$a!=a&&(this.$a=a,this.Rb="and"==this.Rb?"or":"and",K(this).forEach(function(b){return b.vd(a)}))};
m.eval=function(a){var b=K(this).map(function(b){return b.eval(a)});return ag(this,b)};function ag(a,b){return"and"==a.Rb?kd(b):ld(b)}m.toString=function(){return"combined_pred_"+this.Rb.toString()};function bg(){this.o=B();this.size=0}m=bg.prototype;m.has=function(a){return this.o.has(a)};m.set=function(a,b){var c=this.o.get(a)||null;null===c&&(c=D(),this.o.set(a,c));c.has(b)||(c.add(b),this.size++);return this};m.wd=function(a,b){var c=this.o.get(a)||null;null===c&&(c=D(),this.o.set(a,c));b.forEach(function(a){c.has(a)||(c.add(a),this.size++)},this);return this};
m.delete=function(a,b){var c=this.o.get(a,null);if(null===c)return!1;var d=c.delete(b);d&&(--this.size,0==c.size&&this.o.delete(a));return d};m.get=function(a){a=this.o.get(a)||null;return null===a?null:jc(a)};m.clear=function(){this.o.clear();this.size=0};m.keys=function(){return Ib(this.o)};m.values=function(){var a=[];this.o.forEach(function(b){a.push.apply(a,jc(b))});return a};function cg(a,b,c){Gd.call(this);this.ga=a;this.la=b;this.G=c;this.Yd=null;a=sd.zc();this.tc=yd(a,this.ga.I(),this.G);this.Xf=a.Ne.get(this.ga.I())||null}t(cg,Gd);m=cg.prototype;m.Jb=function(){var a=new cg(this.ga,this.la,this.G),b=this.V();a.oa=b;return a};m.gb=function(a){return null!=a?(a.push(this.ga),a.push(this.la),a):[this.ga,this.la]};
m.reverse=function(){var a=this.G;switch(this.G){case "gt":a="lt";break;case "lt":a="gt";break;case "gte":a="lte";break;case "lte":a="gte"}return new cg(this.la,this.ga,a)};m.eval=function(a){var b=a.entries.filter(function(a){var b=H(a,this.ga);a=H(a,this.la);return this.tc(b,a)},this);return new F(b,G(a))};m.toString=function(){return"join_pred("+this.ga.l()+" "+this.G+" "+this.la.l()+")"};
function dg(a,b,c){var d=null,e=null;-1!=G(b).indexOf(I(a.ga.H()))?(d=b,e=c):(d=c,e=b);if(d.entries.length>e.entries.length){a:{b=a.ga;a.ga=a.la;a.la=b;b=a.G;switch(a.G){case "gt":b="lt";break;case "lt":b="gt";break;case "gte":b="lte";break;case "lte":b="gte";break;default:break a}a.G=b;a.tc=yd(sd.zc(),a.ga.I(),a.G)}return[e,d]}return[d,e]}function eg(a){var b={};a.gb().forEach(function(a){b[a.getName()]=null});return b}
function fg(a,b,c){null===a.Yd&&(a.Yd=eg(a.la.H()));var d=new nd(new y(-1,a.Yd),!1);return qd(b,c,d,[I(a.la.H())])}
function gg(a,b,c,d){var e=[b,c];d||(e=dg(a,b,c));b=e[0];c=e[1];var e=b,g=c,h=a.ga,k=a.la;d&&(e=c,g=b,h=a.la,k=a.ga);var n=new bg,z=[];e.entries.forEach(function(a){var b=String(H(a,h));n.set(b,a)});var ga=G(e),na=G(g);g.entries.forEach(function(a){var b=H(a,k),c=String(b);null!==b&&n.has(c)?n.get(c).forEach(function(b){b=qd(a,na,b,ga);z.push(b)}):d&&z.push(fg(this,a,na))}.bind(a));a=G(b).concat(G(c));return new F(z,a)}
function hg(a,b,c,d,e){function g(a,b){var c=new nd(b,1<ga.length),c=qd(a,na,c,ga);z.push(c)}var h=d.Qf.H(),k=b,n=c;-1!=G(b).indexOf(I(h))&&(k=c,n=b);var z=[],ga=G(n),na=G(k);k.entries.forEach(function(a){var b=this.Xf(H(a,d.cg)),b=d.index.get(b);0!=b.length&&(d.index.Ga()?g(a,e.get(b[0])):Qe(e,b).forEach(g.bind(null,a)))},a);a=G(k).concat(G(n));return new F(z,a)};function ig(a,b,c){return null===b?new Id(a,b,c):q(b.l)?new cg(a,b,c):new Id(a,b,c)};var jg={};r("lf.schema.DataStoreType",jg);jg.INDEXED_DB=0;jg.MEMORY=1;jg.LOCAL_STORAGE=2;jg.FIREBASE=3;jg.WEB_SQL=4;jg.OBSERVABLE_STORE=5;function kg(a,b,c,d){this.Qc=a;this.name=b;this.Ec=c;this.f=d}kg.prototype.l=function(){return this.Qc+"."+this.name};function Lf(a){return a.f.some(function(a){return a.ba.Dc()})}function Q(a,b,c,d){this.A=a;this.ka=c;this.K=b;this.qd=d;this.eb=null}r("lf.schema.Table",Q);Q.prototype.getName=f("A");Q.prototype.getName=Q.prototype.getName;Q.prototype.Ya=f("eb");
function I(a){return a.eb||a.A}Q.prototype.nc=function(a){var b=new this.constructor(this.A);b.eb=a;b.ng=this.ng;return b};Q.prototype.as=Q.prototype.nc;Q.prototype.createRow=Q.prototype.tb;Q.prototype.deserializeRow=Q.prototype.Lb;Q.prototype.va=f("ka");Q.prototype.getIndices=Q.prototype.va;Q.prototype.gb=f("K");Q.prototype.getColumns=Q.prototype.gb;Q.prototype.getConstraint=Q.prototype.Db;Q.prototype.zb=f("qd");Q.prototype.persistentIndex=Q.prototype.zb;function ze(a){return a.A+".#"};function R(a,b){this.child=a;this.Ib=b;this.eb=null}m=R.prototype;m.getName=function(){return this.Ib+"("+this.child.getName()+")"};m.l=function(){return this.Ib+"("+this.child.l()+")"};m.H=function(){return this.child.H()};m.toString=function(){return this.l()};m.I=function(){return this.child.I()};m.Ya=f("eb");m.va=function(){return[]};m.ua=l(null);m.Dc=l(!1);m.nc=function(a){this.eb=a;return this};R.prototype.as=R.prototype.nc;
function lg(a){for(var b=[a];a instanceof R;)b.push(a.child),a=a.child;return b}function mg(a){this.eb=a||null;this.S=new Q("#UnknownTable",[],[],!1)}m=mg.prototype;m.getName=l("*");m.l=function(){return this.getName()};m.toString=function(){return this.l()};m.H=f("S");m.I=l(4);m.Ya=f("eb");m.va=function(){return[]};m.ua=l(null);m.Dc=l(!1);r("lf.fn.avg",function(a){return new R(a,"AVG")});function ng(a){return new R(a||new mg,"COUNT")}r("lf.fn.count",ng);function og(a){return new R(a,"DISTINCT")}r("lf.fn.distinct",og);r("lf.fn.max",function(a){return new R(a,"MAX")});r("lf.fn.min",function(a){return new R(a,"MIN")});r("lf.fn.stddev",function(a){return new R(a,"STDDEV")});r("lf.fn.sum",function(a){return new R(a,"SUM")});r("lf.fn.geomean",function(a){return new R(a,"GEOMEAN")});function S(a,b){J.call(this);this.If=b}t(S,J);S.prototype.exec=function(a,b){switch(this.If){case 1:return pg(this,a,b);case 0:return qg(this,a,b);default:return rg(this,a,b)}};S.prototype.toString=l("dummy_node");S.prototype.Rc=function(){return this.toString()};function rg(a,b,c){return new v(function(a){a(this.ea(b,[],c))}.bind(a))}function pg(a,b,c){return Bd(a,0).exec(b,c).then(function(a){return this.ea(b,a,c)}.bind(a))}
function qg(a,b,c){var d=K(a).map(function(a){return a.exec(b,c)});return cb(d).then(function(a){var d=[];a.forEach(function(a){for(var b=0;b<a.length;++b)d.push(a[b])});return this.ea(b,d,c)}.bind(a))};function sg(a){S.call(this,0,1);this.te=a}t(sg,S);sg.prototype.toString=function(){return"aggregation("+this.te.map(function(a){return a.l()}).toString()+")"};sg.prototype.ea=function(a,b){b.forEach(function(a){tg(new ug(a,this.te))},this);return b};function ug(a,b){this.Ha=a;this.K=b}
function tg(a){a.K.forEach(function(a){a=lg(a).reverse();for(var c=1;c<a.length;c++){var d=a[c],e=lg(d).slice(-1)[0],g=d.child instanceof R?hd(this.Ha,d.child):this.Ha;if(null!==g.Xa&&g.Xa.has(d.l()))break;g=vg(d.Ib,g,e);e=this.Ha;null===e.Xa&&(e.Xa=B());e.Xa.set(d.l(),g)}},a)}
function vg(a,b,c){var d=null;switch(a){case "MIN":d=wg(b,c,function(a,b){return b<a?b:a});break;case "MAX":d=wg(b,c,function(a,b){return b>a?b:a});break;case "DISTINCT":d=xg(b,c);break;case "COUNT":d=yg(b,c);break;case "SUM":d=zg(b,c);break;case "AVG":a=yg(b,c);0<a&&(d=zg(b,c)/a);break;case "GEOMEAN":d=Ag(b,c);break;default:d=Bg(b,c)}return d}function wg(a,b,c){return a.entries.reduce(function(a,e){var g=H(e,b);return null===g?a:null===a?g:c(a,g)},null)}
function yg(a,b){return b instanceof mg?a.entries.length:a.entries.reduce(function(a,d){return a+(ea(H(d,b))?0:1)},0)}function zg(a,b){return wg(a,b,function(a,b){return b+a})}function Bg(a,b){var c=[];a.entries.forEach(function(a){a=H(a,b);null===a||c.push(a)});return 0==c.length?null:yb.apply(null,c)}function Ag(a,b){var c=0,d=a.entries.reduce(function(a,d){var h=H(d,b);if(0==h||null===h)return a;c++;return a+Math.log(h)},0);return 0==c?null:Math.pow(Math.E,d/c)}
function xg(a,b){var c=B();a.entries.forEach(function(a){var e=H(a,b);c.set(e,a)});return new F(C(c),G(a))};function Cg(a,b){this.Aa=a;this.$=b}Cg.prototype.hb=f("Aa");Cg.prototype.Z=f("$");function Dg(){J.call(this)}t(Dg,J);function Eg(a,b){J.call(this);this.table=a;this.values=b}t(Eg,Dg);function Fg(a,b){Eg.call(this,a,b)}t(Fg,Eg);function Gg(a){J.call(this);this.table=a}t(Gg,Dg);Gg.prototype.toString=function(){return"delete("+this.table.getName()+")"};function Hg(a,b){J.call(this);this.table=a;this.oe=b}t(Hg,Dg);
Hg.prototype.toString=function(){var a=[];this.oe&&(a=this.oe.map(function(a){return a.O.getName()},this));return"update("+this.table.getName()+", ["+a.join(",")+"])"};function Ig(a){J.call(this);this.J=a}t(Ig,Dg);Ig.prototype.toString=function(){return"select("+this.J.toString()+")"};function Jg(a){J.call(this);this.table=a}t(Jg,Dg);Jg.prototype.toString=function(){var a="table_access("+this.table.getName();null===this.table.Ya()||(a+=" as "+this.table.Ya());return a+")"};
function Kg(){J.call(this)}t(Kg,Dg);Kg.prototype.toString=l("cross_product");function Lg(a,b){J.call(this);this.f=a;this.Nb=b}t(Lg,Dg);Lg.prototype.toString=function(){var a="project("+this.f.toString();if(null!==this.Nb)var b=this.Nb.map(function(a){return a.l()}).join(", "),a=a+(", groupBy("+b+")");return a+")"};function Mg(a){J.call(this);this.M=a}t(Mg,Dg);Mg.prototype.toString=function(){return"order_by("+Rd(this.M)+")"};function Ng(a){J.call(this);this.f=a}t(Ng,Dg);
Ng.prototype.toString=function(){return"aggregation("+this.f.toString()+")"};function Og(a){J.call(this);this.f=a}t(Og,Dg);Og.prototype.toString=function(){return"group_by("+this.f.toString()+")"};function Pg(a){J.call(this);this.W=a}t(Pg,Dg);Pg.prototype.toString=function(){return"limit("+this.W+")"};function Qg(a){J.call(this);this.N=a}t(Qg,Dg);Qg.prototype.toString=function(){return"skip("+this.N+")"};function Rg(a,b){J.call(this);this.J=a;this.Pb=b}t(Rg,Dg);
Rg.prototype.toString=function(){return"join(type: "+(this.Pb?"outer":"inner")+", "+this.J.toString()+")"};function Sg(){};function Tg(){}t(Tg,Sg);Tg.prototype.mb=function(a){this.Y=a;this.Va(this.Y);return this.Y};Tg.prototype.Va=function(a){if(a instanceof Ig){var b=Ug(this,a.J),b=Vg(this,b);Yf(a,a,b[0],b[1]);a==this.Y&&(this.Y=b[0]);a=b[0]}K(a).forEach(function(a){this.Va(a)},this)};function Ug(a,b){if(0==K(b).length||"and"!=b.Rb)return[b];var c=K(b).slice().map(function(a){b.removeChild(a);return Ug(this,a)},a);return Ca(c)}
function Vg(a,b){var c=null,d=null;b.map(function(a,b){var h=new Ig(a);0==b?c=h:L(d,h);d=h},a);return[c,d]};function Wg(){}t(Wg,Sg);Wg.prototype.mb=function(a,b){if(3>b.c.length)return a;this.Y=a;this.Va(this.Y);return this.Y};Wg.prototype.Va=function(a){if(a instanceof Kg)for(;2<K(a).length;){for(var b=new Kg,c=0;2>c;c++){var d=Dd(a,0);L(b,d)}Cd(a,b,0)}K(a).forEach(function(a){this.Va(a)},this)};function Xg(){S.call(this,0,0)}t(Xg,S);Xg.prototype.toString=l("cross_product");Xg.prototype.ea=function(a,b){for(var c=b[0],d=b[1],e=[],g=G(c),h=G(d),k=0;k<c.entries.length;k++)for(var n=0;n<d.entries.length;n++){var z=qd(c.entries[k],g,d.entries[n],h);e.push(z)}c=G(c).concat(G(d));return[new F(e,c)]};function Yg(a,b){Ud.call(this,a,b);this.Ba=a.i(Wb);this.Fb=a.i(Xb)}t(Yg,Ud);Yg.prototype.getPriority=l(2);Yg.prototype.ae=function(a){0==this.I()?Zg(this,a):this.Oc()};function Zg(a,b){a.sd.forEach(function(a,d){a instanceof Qd&&Xd(this.Fb,a,b[d])},a)}Yg.prototype.Oc=function(){var a=Zd(this.Fb,this.Z());0!=a.length&&(a=new Wd(this.global,a),$d(this.Ba,a))};function $g(a){Ld.call(this,a)}t($g,Ld);$g.prototype.Z=function(){var a=D();a.add(this.c);ah(this,this.c.getName(),a);return a};function ah(a,b,c){var d=bh(a.ba.info(),b,1);bh(a.ba.info(),b).forEach(c.add.bind(c));d.forEach(function(a){ah(this,a.getName(),c)},a)}$g.prototype.clone=function(){var a=new $g(this.ba);Od(a,this);a.c=this.c;return a};$g.prototype.bind=function(a){$g.Hb.bind.call(this,a);Pd(this,a);return this};function ch(a){Ld.call(this,a)}t(ch,Ld);ch.prototype.Z=function(){var a=D();a.add(this.Fa);var b=this.ba.info();dh(this.Fa.getName(),b.Ve).forEach(a.add.bind(a));this.Zb&&bh(b,this.Fa.getName()).forEach(a.add.bind(a));return a};ch.prototype.clone=function(){var a=new ch(this.ba);Od(a,this);a.Fa=this.Fa;this.values&&(a.values=this.values instanceof rd?this.values:this.values.slice());a.Zb=this.Zb;a.$b=this.$b;return a};
ch.prototype.bind=function(a){ch.Hb.bind.call(this,a);this.$b&&(this.values=this.$b instanceof rd?a[this.$b.ua()]:this.$b.map(function(b){return b instanceof rd?a[b.ua()]:b}));return this};function eh(a){Ld.call(this,a)}t(eh,Ld);eh.prototype.Z=function(){var a=D();a.add(this.table);var b=this.set.map(function(a){return a.O.l()}),c=this.ba.info();fh(c,b).forEach(a.add.bind(a));gh(c,b).forEach(a.add.bind(a));return a};eh.prototype.clone=function(){var a=new eh(this.ba);Od(a,this);a.table=this.table;a.set=this.set?this.set.slice():this.set;return a};eh.prototype.bind=function(a){eh.Hb.bind.call(this,a);this.set.forEach(function(b){-1!=b.Wc&&(b.value=a[b.Wc])});Pd(this,a);return this};function hh(a,b){if(null==b)return"NULL";switch(a){case 1:return b?1:0;case 3:case 4:return b;case 0:return"'"+rb(b)+"'";default:return"'"+b.toString()+"'"}}function ih(a,b){var c=a.Zb?"INSERT OR REPLACE":"INSERT",d=a.Fa.gb(),c=c+(" INTO "+a.Fa.getName()+"("),c=c+d.map(function(a){return a.getName()}).join(", "),c=c+") VALUES (";return a.values.map(function(a){var g=d.map(function(c){var d=a.s[c.getName()];return b?null!=d?"#":"NULL":hh(c.I(),d)});return c+g.join(", ")+");"}).join("\n")}
function jh(a){switch(a){case "between":return"BETWEEN";case "eq":return"=";case "gte":return">=";case "gt":return">";case "in":return"IN";case "lte":return"<=";case "lt":return"<";case "match":return"LIKE";case "neq":return"<>";default:return"UNKNOWN"}}function kh(a,b,c,d){return a instanceof rd?"?"+a.ua().toString():d?null!=a?"#":"NULL":"match"==b?"'"+a.toString()+"'":"in"==b?"("+a.map(function(a){return hh(c,a)}).join(", ")+")":"between"==b?hh(c,a[0])+" AND "+hh(c,a[1]):hh(c,a).toString()}
function lh(a,b){return K(a).map(function(a){return"("+mh(a,b)+")"}).join("and"==a.Rb?" AND ":" OR ")}function nh(a){return[a.ga.l(),jh(a.G),a.la.l()].join(" ")}function mh(a,b){if(a instanceof Id){var c=a.O.l(),d=jh(a.G),e=kh(a.value,a.G,a.O.I(),b);return"="==d&&"NULL"==e?[c,"IS NULL"].join(" "):"<>"==d&&"NULL"==e?[c,"IS NOT NULL"].join(" "):[c,d,e].join(" ")}if(a instanceof $f)return lh(a,b);if(a instanceof cg)return nh(a);throw new E(357,typeof a);}
function oh(a,b){var c=mh(a,b);return c?" WHERE "+c:""}function ph(a,b){var c="UPDATE "+a.table.getName()+" SET ",c=c+a.set.map(function(a){var b=a.O.l()+" = ";return-1!=a.Wc?b+"?"+a.Wc.toString():b+hh(a.O.I(),a.value).toString()}).join(", ");a.w&&(c+=oh(a.w,b));return c+";"}
function qh(a,b){var c="*";a.f.length&&(c=a.f.map(function(a){return a.Ya()?a.l()+" AS "+a.Ya():a.l()}).join(", "));c="SELECT "+c+" FROM ";null!=a.yb&&0!=a.yb.size?c+=rh(a,b):(c+=a.c.map(sh).join(", "),a.w&&(c+=oh(a.w,b)));if(a.M)var d=a.M.map(function(a){return a.O.l()+(0==a.kb?" DESC":" ASC")}).join(", "),c=c+(" ORDER BY "+d);a.ja&&(d=a.ja.map(function(a){return a.l()}).join(", "),c+=" GROUP BY "+d);a.W&&(c+=" LIMIT "+a.W.toString());a.N&&(c+=" SKIP "+a.N.toString());return c+";"}
function sh(a){return I(a)!=a.getName()?a.getName()+" AS "+I(a):a.getName()}function rh(a,b){for(var c=Tf(a.w,function(a){return a instanceof cg}),d=c.map(nh),e=sh(a.c[0]),g=1;g<a.c.length;g++)var h=sh(a.c[g]),e=a.yb.has(c[d.length-g].V())?e+(" LEFT OUTER JOIN "+h):e+(" INNER JOIN "+h),e=e+(" ON ("+d[d.length-g]+")");c=Bd(a.w,0);c instanceof cg||(e+=" WHERE "+mh(c,b));return e}
function th(a,b){var c=b||!1,d=a.a.clone();if(d instanceof ch)return ih(d,c);if(d instanceof $g){var e="DELETE FROM "+d.c.getName();d.w&&(e+=oh(d.w,c));return e+";"}if(d instanceof eh)return ph(d,c);if(d instanceof Qd)return qh(d,c);throw new E(358,typeof d);};function T(a,b){this.global=a;this.mg=a.i(Ub);this.Ba=a.i(Wb);this.a=b}r("lf.query.BaseBuilder",T);T.prototype.exec=function(){try{this.fb()}catch(a){return $a(a)}return new v(function(a,c){var d=new Yg(this.global,[this.Bc()]);$d(this.Ba,d).then(function(c){a(fd(c[0]))},c)},this)};T.prototype.exec=T.prototype.exec;T.prototype.Kf=function(){var a=function(a){return a.Rc(this.a)+"\n"}.bind(this);return Zf(uh(this).hb(),a)};T.prototype.explain=T.prototype.Kf;
T.prototype.bind=function(a){this.a.bind(a);return this};T.prototype.bind=T.prototype.bind;T.prototype.tg=function(a){return th(this,a)};T.prototype.toSql=T.prototype.tg;T.prototype.fb=aa();function uh(a){if(null==a.We){var b;b=a.mg;var c=a.a,d=b.$f.create(c);b=b.jg.create(d,c);a.We=b}return a.We}T.prototype.Bc=function(){return{context:this.a.clone(),de:uh(this)}};function vh(a){T.call(this,a,new $g(a.i(Yb)))}t(vh,T);r("lf.query.DeleteBuilder",vh);vh.prototype.c=function(a){if(null!=this.a.c)throw new E(515);this.a.c=a;return this};vh.prototype.from=vh.prototype.c;vh.prototype.w=function(a){this.Dd();this.a.w=a;return this};vh.prototype.where=vh.prototype.w;vh.prototype.Dd=function(){if(null==this.a.c)throw new E(548);if(null!=this.a.w)throw new E(516);};vh.prototype.fb=function(){vh.Hb.fb.call(this);if(null==this.a.c)throw new E(517);};function wh(a,b){T.call(this,a,new ch(a.i(Yb)));this.a.Zb=b||!1}t(wh,T);r("lf.query.InsertBuilder",wh);wh.prototype.fb=function(){wh.Hb.fb.call(this);var a=this.a;if(null==a.Fa||null==a.values)throw new E(518);if(a.Zb&&null===a.Fa.Db().fd())throw new E(519);};wh.prototype.Fa=function(a){if(null!=this.a.Fa)throw new E(520);this.a.Fa=a;return this};wh.prototype.into=wh.prototype.Fa;
wh.prototype.values=function(a){if(null!=this.a.values)throw new E(521);a instanceof rd||a.some(function(a){return a instanceof rd})?this.a.$b=a:this.a.values=a;return this};wh.prototype.values=wh.prototype.values;function xh(a){return yh("and",Array.prototype.slice.call(arguments))}r("lf.op.and",xh);r("lf.op.or",function(a){return yh("or",Array.prototype.slice.call(arguments))});function yh(a,b){var c=new $f(a);b.forEach(function(a){L(c,a)});return c}r("lf.op.not",function(a){a.vd(!0);return a});function U(a,b){T.call(this,a,new Qd(a.i(Yb)));this.De=this.yd=!1;this.a.f=b;zh(this);Ah(this)}t(U,T);r("lf.query.SelectBuilder",U);U.prototype.fb=function(){U.Hb.fb.call(this);var a=this.a;if(null==a.c)throw new E(522);if(q(a.Qb)&&!q(a.W)||q(a.Xb)&&!q(a.N))throw new E(523);null!=this.a.ja?Bh(this):Ch(this)};function zh(a){var b=a.a.f.filter(function(a){return a instanceof R&&"DISTINCT"==a.Ib},a);if(0!=b.length&&(1!=b.length||1!=a.a.f.length))throw new E(524);}
function Bh(a){var b=a.a.f.filter(function(a){return!(a instanceof R)}).map(function(a){return a.l()}),c=!1;if(0==a.a.ja.length||0==a.a.f.length)c=!0;else{var d=a.a.ja.map(function(a){return a.l()});(c=b.some(function(a){return-1==d.indexOf(a)}))||(c=a.a.ja.some(function(a){a=a.I();return 6==a||0==a}))}if(c)throw new E(525);}function Ch(a){var b=a.a.f.some(function(a){return a instanceof R},a);a=a.a.f.some(function(a){return!(a instanceof R)},a)||0==a.a.f.length;if(b&&a)throw new E(526);}
function Ah(a){a.a.f.forEach(function(a){if(a instanceof R&&!Dh(a.Ib,a.I()))throw new E(527,a.l());},a)}function Eh(a,b){if(null==a.a.c)throw new E(b);}U.prototype.c=function(a){if(this.De)throw new E(515);this.De=!0;null==this.a.c&&(this.a.c=[]);this.a.c.push.apply(this.a.c,Array.prototype.slice.call(arguments));return this};U.prototype.from=U.prototype.c;U.prototype.w=function(a){Eh(this,548);if(this.yd)throw new E(516);this.yd=!0;Fh(this,a);return this};U.prototype.where=U.prototype.w;
function Fh(a,b){if(null!=a.a.w){var c=xh(b,a.a.w);a.a.w=c}else a.a.w=b}U.prototype.Tf=function(a,b){Eh(this,542);if(this.yd)throw new E(547);this.a.c.push(a);Fh(this,b);return this};U.prototype.innerJoin=U.prototype.Tf;U.prototype.Yf=function(a,b){Eh(this,542);if(!(b instanceof cg))throw new E(541);if(this.yd)throw new E(547);this.a.c.push(a);null==this.a.yb&&(this.a.yb=D());var c=b;I(a)!=I(b.la.H())&&(c=b.reverse());this.a.yb.add(c.V());Fh(this,c);return this};U.prototype.leftOuterJoin=U.prototype.Yf;
U.prototype.W=function(a){if(null!=(this.a.W||this.a.Qb))throw new E(528);if(a instanceof rd)this.a.Qb=a;else{if(0>a)throw new E(531);this.a.W=a}return this};U.prototype.limit=U.prototype.W;U.prototype.N=function(a){if(null!=(this.a.N||this.a.Xb))throw new E(529);if(a instanceof rd)this.a.Xb=a;else{if(0>a)throw new E(531);this.a.N=a}return this};U.prototype.skip=U.prototype.N;U.prototype.M=function(a,b){Eh(this,549);null==this.a.M&&(this.a.M=[]);this.a.M.push({O:a,kb:null!=b?b:1});return this};
U.prototype.orderBy=U.prototype.M;U.prototype.ja=function(a){Eh(this,549);if(null!=this.a.ja)throw new E(530);null==this.a.ja&&(this.a.ja=[]);this.a.ja.push.apply(this.a.ja,Array.prototype.slice.call(arguments));return this};U.prototype.groupBy=U.prototype.ja;function Dh(a,b){switch(a){case "COUNT":case "DISTINCT":return!0;case "AVG":case "GEOMEAN":case "STDDEV":case "SUM":return 4==b||3==b;case "MAX":case "MIN":return 4==b||3==b||5==b||2==b}return!1}
U.prototype.clone=function(){var a=new U(this.global,this.a.f);a.a=this.a.clone();a.a.$c=null;return a};U.prototype.clone=U.prototype.clone;function Gh(a,b){T.call(this,a,new eh(a.i(Yb)));this.a.table=b}t(Gh,T);r("lf.query.UpdateBuilder",Gh);Gh.prototype.set=function(a,b){var c={Wc:b instanceof rd?b.ua():-1,O:a,value:b};null!=this.a.set?this.a.set.push(c):this.a.set=[c];return this};Gh.prototype.set=Gh.prototype.set;Gh.prototype.w=function(a){this.Dd();this.a.w=a;return this};Gh.prototype.where=Gh.prototype.w;Gh.prototype.Dd=function(){if(null!=this.a.w)throw new E(516);};
Gh.prototype.fb=function(){Gh.Hb.fb.call(this);if(null==this.a.set)throw new E(532);if(this.a.set.some(function(a){return a.value instanceof rd}))throw new E(501);};function Hh(a){this.a=a;this.Aa=null}Hh.prototype.fc=function(){null===this.Aa&&(this.Aa=this.dd());return this.Aa};function Ih(a){Hh.call(this,a)}t(Ih,Hh);Ih.prototype.dd=function(){return this.a.Zb?new Fg(this.a.Fa,this.a.values):new Eg(this.a.Fa,this.a.values)};function Jh(a){Hh.call(this,a)}t(Jh,Hh);Jh.prototype.dd=function(){var a=new Hg(this.a.table,this.a.set),b=null!=this.a.w?new Ig(this.a.w.Jb()):null,c=new Jg(this.a.table);null===b?L(a,c):(L(b,c),L(a,b));return a};function Kh(a,b,c){this.Aa=a;this.ee=b;this.Ub=c}Kh.prototype.fc=function(){this.Ub.forEach(function(a){this.Aa=a.mb(this.Aa,this.ee)},this);return this.Aa};function Lh(a,b){Hh.call(this,a);this.Ub=b}t(Lh,Hh);Lh.prototype.dd=function(){var a=new Gg(this.a.c),b=null!=this.a.w?new Ig(this.a.w.Jb()):null,c=new Jg(this.a.c);null===b?L(a,c):(L(b,c),L(a,b));return(new Kh(a,this.a,this.Ub)).fc()};function Mh(){}t(Mh,Sg);Mh.prototype.mb=function(a,b){if(2>b.c.length)return a;this.Y=a;this.Va(this.Y,b);return this.Y};Mh.prototype.Va=function(a,b){if(a instanceof Ig&&a.J instanceof cg){var c=a.J.V(),d=Bd(a,0);d instanceof Kg&&(c=null!=b.yb&&b.yb.has(c),c=new Rg(a.J,c),Yf(a,d,c,c),a==this.Y&&(this.Y=c),a=c)}K(a).forEach(function(a){this.Va(a,b)},this)};function Nh(){this.Vc=D()}t(Nh,Sg);Nh.prototype.mb=function(a,b){this.Vc.clear();if(!q(b.w))return a;this.Y=a;this.Va(this.Y);this.Vc.clear();return this.Y};Nh.prototype.Va=function(a){if(Oh(a)){var b=a.J instanceof Id?Ph(this,a):Qh(this,a);this.Vc.add(a);b==a&&(b=Bd(a,0));null!==b&&(ea(b.getParent())&&(this.Y=b),Oh(b)&&!this.Vc.has(b)&&this.Va(b))}else K(a).forEach(function(a){this.Va(a)},this)};
function Rh(a,b,c){var d=b;if(Bd(b,0)instanceof Ig)d=Wf(b),Rh(a,b,c);else if(Sh(b)){var e=[],d=Xf(b,c,function(a){a=new Ig(a.J);e.push(a);return a});e.forEach(function(a){Rh(this,a,c)},a)}return d}function Ph(a,b){var c=D([I(b.J.O.H())]),d=function(a){return Th(this,a,c)}.bind(a);return Rh(a,b,d)}function Qh(a,b){var c=D([I(b.J.ga.H()),I(b.J.la.H())]),d=function(a){return Th(this,a,c)}.bind(a);return Rh(a,b,d)}
function Th(a,b,c){var d=D();Sf(b).forEach(function(a){d.add(I(a.table))},a);b instanceof Jg&&d.add(I(b.table));return kc(d,c)}function Oh(a){return a instanceof Ig&&!(a.J instanceof $f)}function Sh(a){a=Bd(a,0);return a instanceof Kg||a instanceof Rg};function Uh(a,b){Hh.call(this,a);this.Ub=b;this.$e=this.Re=this.hf=this.Ue=this.ue=this.Ge=this.gf=this.Ae=this.kf=null}t(Uh,Hh);
Uh.prototype.dd=function(){Vh(this);2<=this.a.c.length&&(this.Ae=new Kg);this.gf=null!=this.a.w?new Ig(this.a.w.Jb()):null;this.a.M&&(this.Ue=new Mg(this.a.M));null!=this.a.N&&0<this.a.N&&(this.hf=new Qg(this.a.N));null!=this.a.W&&(this.Re=new Pg(this.a.W));null!=this.a.ja&&(this.Ge=new Og(this.a.ja));Wh(this);this.$e=new Lg(this.a.f||[],this.a.ja||null);var a=Xh(this);return(new Kh(a,this.a,this.Ub)).fc()};
function Xh(a){for(var b=[a.Re,a.hf,a.$e,a.Ue,a.ue,a.Ge,a.gf,a.Ae],c=null,d=null,e=0;e<b.length;e++){var g=b[e];null!==g&&(null===d?d=g:L(b[c],g),c=e)}a.kf.forEach(function(a){L(b[c],a)});return d}function Vh(a){a.kf=a.a.c.map(function(a){return new Jg(a)},a)}function Wh(a){var b=a.a.f.filter(function(a){return a instanceof R});null!=a.a.M&&a.a.M.forEach(function(a){a.O instanceof R&&b.push(a.O)});0<b.length&&(a.ue=new Ng(b))};function Yh(){this.je=[new Tg,new Wg,new Nh,new Mh];this.Jd=[new Tg]}Yh.prototype.create=function(a){var b=null;if(a instanceof ch)b=new Ih(a);else if(a instanceof $g)b=new Lh(a,this.Jd);else if(a instanceof Qd)b=new Uh(a,this.je);else if(a instanceof eh)b=new Jh(a);else throw new E(513);b=b.fc();return new Cg(b,a.Z())};function Zh(a){S.call(this,0,1);this.S=a}t(Zh,S);Zh.prototype.toString=function(){return"delete("+this.S.getName()+")"};Zh.prototype.ea=function(a,b){var c=b[0].entries.map(function(a){return a.sa});a.remove(this.S,c);return[jd()]};function $h(a,b){S.call(this,0,-1);this.table=b;this.D=a.i(Tb)}t($h,S);$h.prototype.toString=function(){return"get_row_count("+this.table.getName()+")"};$h.prototype.ea=function(){var a=this.D.get(ze(this.table)),b=new F([],[this.table.getName()]),c=ng(),a=a.Na().na;null===b.Xa&&(b.Xa=B());b.Xa.set(c.l(),a);return[b]};function ai(a,b){S.call(this,0,-1);this.ca=a.i(Sb);this.D=a.i(Tb);this.table=b}t(ai,S);ai.prototype.toString=function(){var a="table_access("+this.table.getName();null===this.table.Ya()||(a+=" as "+this.table.Ya());return a+")"};ai.prototype.ea=function(){var a=this.D.get(ze(this.table)).Za();return[md(Qe(this.ca,a),[I(this.table)])]};function bi(a){this.g=a}t(bi,Sg);bi.prototype.mb=function(a,b){this.Y=a;if(!this.Ed(b))return a;var c=Tf(a,function(a){return a instanceof ai})[0],d=new $h(this.g,c.table);Yf(c,c,d,d);return this.Y};bi.prototype.Ed=function(a){return 1==a.f.length&&1==a.c.length&&null==a.w&&null==a.W&&null==a.N&&null==a.ja?(a=a.f[0],a instanceof R&&"COUNT"==a.Ib&&a.child instanceof mg):!1};function ci(a){S.call(this,0,1);this.Fe=a}t(ci,S);ci.prototype.toString=function(){return"groupBy("+this.Fe.map(function(a){return a.l()}).toString()+")"};ci.prototype.ea=function(a,b){return di(this,b[0])};function di(a,b){var c=new bg,d=function(a){return this.Fe.map(function(b){return H(a,b)},this).join(",")}.bind(a);b.entries.forEach(function(a){c.set(d(a),a)},a);return c.keys().map(function(a){return new F(c.get(a),G(b))},a)};function ei(a,b,c){S.call(this,0,0);this.D=a.i(Tb);this.ca=a.i(Sb);this.J=b;this.Pb=c;this.Bd="eq"==this.J.G?0:2;this.He=null}t(ei,S);var fi=["hash","index_nested_loop","nested_loop"];ei.prototype.toString=function(){return"join(type: "+(this.Pb?"outer":"inner")+", impl: "+fi[this.Bd]+", "+this.J.toString()+")"};
ei.prototype.ea=function(a,b){switch(this.Bd){case 0:return[gg(this.J,b[0],b[1],this.Pb)];case 1:return[hg(this.J,b[0],b[1],this.He,this.ca)];default:var c=this.J,d=b[0],e=b[1],g=this.Pb,h=[d,e];g||(h=dg(c,d,e));for(var d=h[0],e=h[1],h=[],k=G(d),n=G(e),z=d.entries.length,ga=e.entries.length,na=ga+256-1>>8,Ya=0;Ya<na;){for(var Vb=0;Vb<z;Vb++){var Pf=!1,Qf=H(d.entries[Vb],c.ga);if(null!==Qf)for(var hi=Math.min(Ya+1<<8,ga),Pc=Ya<<8;Pc<hi;Pc++)if(c.tc(Qf,H(e.entries[Pc],c.la))){var Pf=!0,ij=qd(d.entries[Vb],
k,e.entries[Pc],n);h.push(ij)}g&&!Pf&&h.push(fg(c,d.entries[Vb],k))}Ya++}c=G(d).concat(G(e));return[new F(h,c)]}};function gi(a,b){a.Bd=1;var c=a.D.get(b.ua().l());a.He={Qf:b,cg:b==a.J.ga?a.J.la:a.J.ga,index:c}};function ii(a){S.call(this,0,-1);this.bf=a}t(ii,S);ii.prototype.toString=function(){return"no_op_step("+G(this.bf[0]).join(",")+")"};ii.prototype.ea=f("bf");function ji(){}t(ji,Sg);ji.prototype.mb=function(a,b){this.Y=a;if(!this.Ed(b))return a;Tf(a,function(a){return a instanceof ei}).forEach(this.lg,this);return this.Y};ji.prototype.Ed=function(a){return 1<a.c.length};
ji.prototype.lg=function(a){if("eq"==a.J.G&&!a.Pb){var b=function(b){if(!(b instanceof ai))return null;b=I(b.table)==I(a.J.la.H())?a.J.la:a.J.ga;return ea(b.ua())?null:b},c=b(Bd(a,0)),b=b(Bd(a,1));if(null!==c||null!==b){b=null===b?c:b;gi(a,b);var d=new F([],[I(b.H())]);Ed(a,new ii([d]),b==c?0:1)}}};function ki(a){a=a.map(function(a){return a.wa()});a=Db.apply(null,a);var b=[];Cb(a,function(a){b.push(a)});return b}function li(a){this.Ob=a}li.prototype.ed=function(){return 1==this.Ob.f.length?[bd()]:[this.Ob.f.map(function(){return bd()})]};function mi(a,b){this.Ob=a;this.za=b;this.Hd=this.Pe=null}
function ni(a,b){var c=B();a.za.keys().forEach(function(a){var e=this.za.get(a).map(function(a){return Md(b,a)},this),g=new Nf([bd()]);e.forEach(function(a){var b=null;"between"==a.G?b=new Yc(a.value[0],a.value[1],!1,!1):"eq"==a.G?(b=a.value,b=new Yc(b,b,!1,!1)):b="gte"==a.G?new Yc(a.value,null,!1,!1):"gt"==a.G?new Yc(a.value,null,!0,!1):"lte"==a.G?new Yc(null,a.value,!1,!1):new Yc(null,a.value,!1,!0);a=a.$a?Zc(b):[b];a=new Nf(a);g=Of(g,a)});c.set(a,g)},a);return c}
mi.prototype.ed=function(a){if(this.Pe==a)return this.Hd;for(var b=ni(this,a),c=this.Ob.f.length-1;0<=c;c--){var d=this.Ob.f[c];if(null!==(b.get(d.ba.getName())||null))break;b.set(d.ba.getName(),new Nf([bd()]))}this.Hd=1==this.Ob.f.length?C(b)[0].wa():ki(oi(this,b));this.Pe=a;return this.Hd};function oi(a,b){var c=B(),d=0;a.Ob.f.forEach(function(a){c.set(a.ba.getName(),d);d++});return Ib(b).sort(function(a,b){return c.get(a)-c.get(b)}).map(function(a){return b.get(a)})};function pi(a,b){this.lf=b;this.D=a.i(Tb)}function qi(a,b,c){c=c.filter(a.Uf,a);if(0==c.length)return null;a=ri(a,c);if(0==a.length)return null;if(1==a.length)return a[0];var d=Number.MAX_VALUE;return a.reduce(function(a,c){var h=si(c,b);return h<d?(d=h,c):a},null)}
function ri(a,b){return a.lf.va().map(function(a){a=new ti(this.D,a);ui(a,b);return a},a).filter(function(a){if(null===a.za)a=!1;else{for(var b=!1,e=!0,g=0;g<a.wb.f.length;g++){var h=a.za.has(a.wb.f[g].ba.getName());if(b&&h){e=!1;break}h||(b=!0)}a=e}return a})}pi.prototype.Uf=function(a){var b;if(b=a instanceof Id)Jd(a),b=null!==a.value&&("between"==a.G||"eq"==a.G||"gt"==a.G||"gte"==a.G||"lt"==a.G||"lte"==a.G);return b?a.O.H()==this.lf:!1};
function ti(a,b){this.D=a;this.wb=b;this.Rf=D(this.wb.f.map(function(a){return a.ba.getName()}));this.Vd=this.za=null}function vi(a){null===a.Vd&&(a.Vd=new mi(a.wb,a.za));return a.Vd}function ui(a,b){b.forEach(function(a){var b=a.gb()[0].getName();this.Rf.has(b)&&(null===this.za&&(this.za=new bg),this.za.set(b,a.V()))},a)}function si(a,b){var c=vi(a).ed(b),d=a.D.get(a.wb.l());return c.reduce(function(a,b){return a+d.bd(b)},0)};function wi(a,b,c,d){S.call(this,0,-1);this.D=a.i(Tb);this.index=b;this.Oe=c;this.he=d;this.Uc=this.Tc=!1}t(wi,S);wi.prototype.toString=function(){return"index_range_scan("+this.index.l()+", ?, "+(this.he?"reverse":"natural")+(this.Tc?", limit:?":"")+(this.Uc?", skip:?":"")+")"};wi.prototype.Rc=function(a){var b=this.toString(),c=this.Oe.ed(a),b=b.replace("?",c.toString());this.Tc&&(b=b.replace("?",a.W.toString()));this.Uc&&(b=b.replace("?",a.N.toString()));return b};
wi.prototype.ea=function(a,b,c){a=this.Oe.ed(c);b=this.D.get(this.index.l());c=(1==a.length&&a[0]instanceof Yc&&dd(a[0])?Ue(b.get(a[0].c),!1,this.Tc?c.W:void 0,this.Uc?c.N:void 0):b.Za(a,this.he,this.Tc?c.W:void 0,this.Uc?c.N:void 0)).map(function(a){return new y(a,{})},this);return[md(c,[this.index.Qc])]};function xi(a){S.call(this,0,1);this.rd=a}t(xi,S);xi.prototype.toString=l("select(?)");xi.prototype.Rc=function(a){a=Md(a,this.rd);return this.toString().replace("?",a.toString())};xi.prototype.ea=function(a,b,c){return[Md(c,this.rd).eval(b[0])]};function yi(a,b){S.call(this,0,1);this.ca=a.i(Sb);this.S=b}t(yi,S);yi.prototype.toString=function(){return"table_access_by_row_id("+this.S.getName()+")"};yi.prototype.ea=function(a,b){return[md(Qe(this.ca,gd(b[0])),[I(this.S)])]};function zi(a){this.g=a}t(zi,Sg);zi.prototype.mb=function(a,b){this.Y=a;Tf(a,function(a){return a instanceof ai}).forEach(function(a){var d=Ai(a);if(0!=d.length){var e=qi(new pi(this.g,a.table),b,d.map(function(a){return Md(b,a.rd)}));if(null!==e){var g=B();d.forEach(function(a){g.set(a.rd,a)},this);this.Y=Bi(this,e,g,a)}}},this);return this.Y};function Ai(a){var b=[];for(a=a.getParent();a;)a instanceof xi&&b.push(a),a=a.getParent();return b}
function Bi(a,b,c,d){(null===b.za?[]:b.za.values()).map(function(a){return c.get(a)}).forEach(Uf);b=new wi(a.g,b.wb,vi(b),!1);a=new yi(a.g,d.table);L(a,b);Yf(d,d,a,b);return b.hb()};function Ci(a,b){S.call(this,0,-1);this.D=a.i(Tb);this.S=b}t(Ci,S);Ci.prototype.toString=function(){return"insert("+this.S.getName()+")"};Ci.prototype.ea=function(a,b,c){Di(this.S,c.values,this.D);a.xb(this.S,c.values);return[md(c.values,[this.S.getName()])]};function Di(a,b,c){a=a.Db().fd();if(null===a?0:a.f[0].autoIncrement){var d=a.f[0].ba.getName();c=c.get(a.l()).max();var e=null===c?0:c[0];b.forEach(function(a){if(0==a.s[d]||null==a.s[d])e++,a.s[d]=e})}}
function Ei(a,b){S.call(this,0,-1);this.D=a.i(Tb);this.S=b}t(Ei,S);Ei.prototype.toString=function(){return"insert_replace("+this.S.getName()+")"};Ei.prototype.ea=function(a,b,c){Di(this.S,c.values,this.D);a.Qd(this.S,c.values);return[md(c.values,[this.S.getName()])]};function Fi(){S.call(this,0,1)}t(Fi,S);Fi.prototype.toString=l("limit(?)");Fi.prototype.Rc=function(a){return this.toString().replace("?",a.W.toString())};Fi.prototype.ea=function(a,b,c){b[0].entries.splice(c.W);return b};function Gi(a){S.call(this,0,1);this.M=a}t(Gi,S);m=Gi.prototype;m.toString=function(){return"order_by("+Rd(this.M)+")"};m.ea=function(a,b){if(1==b.length){var c;c=b[0];for(var d=null,e=0;e<this.M.length;e++){var g=og(this.M[e].O);if(null!==c.Xa&&c.Xa.has(g.l())){d=g;break}}c=d;(null===c?b[0]:hd(b[0],c)).entries.sort(this.Hf.bind(this))}else b.sort(this.og.bind(this));return b};
m.U=function(a,b){var c=null,d=null,e=null,g=-1;do g++,e=this.M[g].O,c=this.M[g].kb,d=a(e),e=b(e);while(d==e&&g+1<this.M.length);d=d<e?-1:d>e?1:0;return 1==c?d:-d};m.og=function(a,b){return this.U(function(b){return b instanceof R?hd(a,b):H(a.entries[a.entries.length-1],b)},function(a){return a instanceof R?hd(b,a):H(b.entries[b.entries.length-1],a)})};m.Hf=function(a,b){return this.U(function(b){return H(a,b)},function(a){return H(b,a)})};function Hi(a,b){this.Ha=a;this.K=b}function Ii(a){return a.K.some(function(a){return a instanceof R},a)?Ji(a):Ki(a)}function Ji(a){if(1==a.K.length&&"DISTINCT"==a.K[0].Ib)return a=hd(a.Ha,a.K[0]).entries.map(function(a){var b=new nd(new y(-1,{}),1<this.Ha.L.size);pd(b,this.K[0],H(a,this.K[0].child));return b},a),new F(a,[]);var b=new nd(new y(-1,{}),1<a.Ha.L.size);a.K.forEach(function(a){var d=a instanceof R?hd(this.Ha,a):H(this.Ha.entries[0],a);pd(b,a,d)},a);return new F([b],G(a.Ha))}
function Ki(a){var b=Array(a.Ha.entries.length),c=1<a.Ha.L.size;a.Ha.entries.forEach(function(a,e){b[e]=new nd(new y(a.sa.id(),{}),c);this.K.forEach(function(c){pd(b[e],c,H(a,c))},this)},a);return new F(b,G(a.Ha))}function Li(a,b){var c=a.map(function(a){return Ii(new Hi(a,b)).entries[0]});return new F(c,G(a[0]))};function Mi(a,b){S.call(this,0,1);this.f=a;this.Nb=b}t(Mi,S);Mi.prototype.toString=function(){var a="project("+this.f.toString();if(null!==this.Nb)var b=this.Nb.map(function(a){return a.l()}).join(", "),a=a+(", groupBy("+b+")");return a+")"};Mi.prototype.ea=function(a,b){var c;0==b.length?c=[jd()]:1==b.length?(c=b[0],c=[0==this.f.length?c:Ii(new Hi(c,this.f))]):c=[Li(b,this.f)];return c};function Ni(a){return a.f.some(function(a){return a instanceof R})||null!==a.Nb};function Oi(){S.call(this,0,1)}t(Oi,S);Oi.prototype.toString=l("skip(?)");Oi.prototype.Rc=function(a){return this.toString().replace("?",a.N.toString())};Oi.prototype.ea=function(a,b,c){return[new F(b[0].entries.slice(c.N),G(b[0]))]};function Pi(){}t(Pi,Sg);Pi.prototype.mb=function(a,b){if(!q(b.W)&&!q(b.N))return a;var c=Qi(a);if(null===c)return a;Tf(a,function(a){return a instanceof Fi||a instanceof Oi}).forEach(function(a){a instanceof Fi?c.Tc=!0:c.Uc=!0;Uf(a)},this);return c.hb()};function Qi(a){a=Tf(a,function(a){return a instanceof wi},function(a){return a instanceof Mi&&Ni(a)||a instanceof Gi||1!=K(a).length||a instanceof xi});return 0<a.length?a[0]:null};function Ri(a){this.g=a}t(Ri,Sg);Ri.prototype.mb=function(a,b){var c=Si(a,b);if(null===c)return a;var d;a:{var e=c;d=Ti(Bd(c,0));if(null!==d){var g;g=c.M;for(var h=null,k=d.table.va(),n=0;n<k.length&&null===h;n++)h=Ui(k[n],g);g=h;if(null===g){d=e;break a}e=new wi(this.g,g.wb,new li(g.wb),g.Le);g=new yi(this.g,d.table);L(g,e);Uf(c);e=Yf(d,d,g,e)}d=e}if(d==c)a:if(d=c,e=Vi(Bd(c,0)),null!==e){g=Ui(e.index,c.M);if(null===g)break a;e.he=g.Le;d=Uf(c).parent}return d.hb()};
function Vi(a){a=Tf(a,function(a){return a instanceof wi},function(a){return 1!=K(a).length});return 0<a.length?a[0]:null}function Ti(a){a=Tf(a,function(a){return a instanceof ai},function(a){return 1!=K(a).length});return 0<a.length?a[0]:null}function Si(a,b){return q(b.M)?Tf(a,function(a){return a instanceof Gi})[0]:null}function Ui(a,b){if(a.f.length!=b.length||!b.every(function(b,c){return b.O.getName()==a.f[c].ba.getName()}))return null;var c=Wi(b,a);return c[0]||c[1]?{wb:a,Le:c[1]}:null}
function Wi(a,b){var c=a.reduce(function(a,b){return a<<1|(0==b.kb?0:1)},0),d=b.f.reduce(function(a,b){return a<<1|(0==b.kb?0:1)},0),d=c^d,c=0==d,d=d==Math.pow(2,Math.max(a.length,b.f.length))-1;return[c,d]};function Xi(a,b,c){this.Aa=a;this.ee=b;this.Ub=c}Xi.prototype.fc=function(){this.Ub.forEach(function(a){this.Aa=a.mb(this.Aa,this.ee)},this);return this.Aa};function Yi(a,b){S.call(this,0,1);this.S=a;this.wg=b}t(Yi,S);Yi.prototype.toString=function(){return"update("+this.S.getName()+")"};Yi.prototype.ea=function(a,b){var c=b[0].entries.map(function(a){var b=this.S.Lb(a.sa.Ia());this.wg.forEach(function(a){b.s[a.O.getName()]=a.value},this);return b},this);a.update(this.S,c);return[jd()]};function Zi(a){this.g=a;this.je=[new ji,new zi(this.g),new Ri(this.g),new Pi,new bi(this.g)];this.Jd=[new zi(this.g)]}Zi.prototype.create=function(a,b){var c=a.hb();if(c instanceof Fg||c instanceof Eg)return $i(this,a,b);if(c instanceof Lg||c instanceof Pg||c instanceof Qg)return $i(this,a,b,this.je);if(c instanceof Gg||c instanceof Hg)return $i(this,a,b,this.Jd);throw new E(8);};function $i(a,b,c,d){a=Rf(b.hb(),a.bg.bind(a));null!=d&&(a=(new Xi(a,c,d)).fc());return new Sd(a,b.Z())}
Zi.prototype.bg=function(a){if(a instanceof Lg)return new Mi(a.f,a.Nb);if(a instanceof Og)return new ci(a.f);if(a instanceof Ng)return new sg(a.f);if(a instanceof Mg)return new Gi(a.M);if(a instanceof Qg)return new Oi;if(a instanceof Pg)return new Fi;if(a instanceof Ig)return new xi(a.J.V());if(a instanceof Kg)return new Xg;if(a instanceof Rg)return new ei(this.g,a.J,a.Pb);if(a instanceof Jg)return new ai(this.g,a.table);if(a instanceof Gg)return new Zh(a.table);if(a instanceof Hg)return new Yi(a.table,
a.oe);if(a instanceof Fg)return new Ei(this.g,a.table);if(a instanceof Eg)return new Ci(this.g,a.table);throw new E(514);};function aj(a){this.$f=new Yh;this.jg=new Zi(a)};function bj(){this.Se=B()}function cj(a,b){var c=a.Se.get(b.getName())||null;null===c&&(c=new dj,a.Se.set(b.getName(),c));return c}function ej(a,b,c,d){c.forEach(function(a){a=cj(this,a);0==d?(a.bb=null,a.uc=b):3==d?(null===a.Wb&&(a.Wb=D()),a.Wb.add(b),null===a.Sa&&(a.Sa=D()),a.Sa.delete(b)):1==d?(null===a.Sa&&(a.Sa=D()),a.Sa.add(b)):2==d&&(a.bb=b)},a)}
function fj(a,b,c,d){var e=!0;c.forEach(function(a){if(e){a=cj(this,a);var c=null===a.Sa||0==a.Sa.size;e=0==d?(null===a.Wb||0==a.Wb.size)&&c&&null===a.uc&&null!==a.bb&&a.bb==b:3==d?null===a.uc&&null===a.bb&&null!==a.Sa&&a.Sa.has(b):1==d?null===a.bb:c&&(null===a.bb||a.bb==b)}},a);return e}function gj(a,b,c,d){var e=fj(a,b,c,d);e&&ej(a,b,c,d);return e}bj.prototype.releaseLock=function(a,b){b.forEach(function(b){cj(this,b).releaseLock(a)},this)};
function hj(a,b){b.forEach(function(a){cj(this,a).bb=null},a)}function dj(){this.Wb=this.Sa=this.bb=this.uc=null}dj.prototype.releaseLock=function(a){this.uc==a&&(this.uc=null);this.bb==a&&(this.bb=null);null===this.Sa||this.Sa.delete(a);null===this.Wb||this.Wb.delete(a)};function jj(){this.Tb=new kj;this.Fc=new bj}function $d(a,b){(2>b.getPriority()||2>b.getPriority())&&hj(a.Fc,b.Z());a.Tb.xb(b);lj(a);return b.Mb().ha}function lj(a){for(var b=a.Tb.wa(),c=0;c<b.length;c++){var d=b[c],e=!1;if(e=0==d.I()?mj(a,d,1,3):mj(a,d,2,0))a.Tb.remove(d),e=a,d.exec().then(e.hg.bind(e,d),e.gg.bind(e,d))}}function mj(a,b,c,d){var e=!1;gj(a.Fc,b.V(),b.Z(),c)&&(e=gj(a.Fc,b.V(),b.Z(),d));return e}jj.prototype.hg=function(a,b){this.Fc.releaseLock(a.V(),a.Z());a.Mb().resolve(b);lj(this)};
jj.prototype.gg=function(a,b){this.Fc.releaseLock(a.V(),a.Z());a.Mb().reject(b);lj(this)};function kj(){this.Tb=[]}kj.prototype.xb=function(a){Te(this.Tb,a,function(a,c){var d=a.getPriority()-c.getPriority();return 0==d?a.V()-c.V():d})};kj.prototype.wa=function(){return this.Tb.slice()};kj.prototype.remove=function(a){var b=this.Tb;a=va(b,a);var c;(c=0<=a)&&ua.splice.call(b,a,1);return c};function nj(a,b){this.Kd=sd.zc();this.fe=a;this.nd=b;this.K=oj(this)}function oj(a){if(0<a.fe.f.length)return a.fe.f;var b=[];a.fe.c.forEach(function(a){a.gb().forEach(function(a){b.push(a)})});return b}nj.prototype.U=function(a,b){return this.K.every(function(c){return yd(this.Kd,c.I(),"eq")(H(a,c),H(b,c))},this)};
function pj(a,b,c){var d=null===b?[]:b.entries,e=ub(d,c.entries,a.U.bind(a),function(a){return d[a]});b=[];for(var g=0,h=0;h<d.length;h++){var k=d[h];e[g]==k?g++:(k=a.nd.splice(g,1),k=qj(h,k,0,a.nd),b.push(k))}e=ub(d,c.entries,a.U.bind(a),function(a,b){return c.entries[b]});for(h=g=0;h<c.entries.length;h++)k=c.entries[h],e[g]==k?g++:(a.nd.splice(h,0,k.sa.s),k=qj(h,[],1,a.nd),b.push(k));return b}function qj(a,b,c,d){return{xg:c,index:a,object:d,zg:b,type:"splice"}};function rj(){this.dc=B()}rj.prototype.Ad=function(a,b){var c=ka(a.a).toString(),d=this.dc.get(c)||null;null===d&&(d=new sj(a),this.dc.set(c,d));d.Ad(b)};rj.prototype.ge=function(a,b){var c=ka(a.a).toString(),d=this.dc.get(c)||null;d.ge(b);0<d.Jc.size||this.dc.delete(c)};function Zd(a,b){var c=D();b.forEach(function(a){c.add(a.getName())});var d=[];a.dc.forEach(function(a){a=a.Bc();a.context.c.some(function(a){return c.has(a.getName())})&&d.push(a)});return d}
function Xd(a,b,c){b=ka(null!=b.$c?b.$c:b).toString();a=a.dc.get(b)||null;null!==a&&tj(a,c)}function sj(a){this.yf=a;this.Jc=D();this.eg=[];this.Qe=null;this.Ff=new nj(a.a,this.eg)}sj.prototype.Ad=function(a){this.Jc.has(a)||this.Jc.add(a)};sj.prototype.ge=function(a){return this.Jc.delete(a)};sj.prototype.Bc=function(){var a=this.yf;return{context:a.a,de:uh(a)}};function tj(a,b){var c=pj(a.Ff,a.Qe,b);a.Qe=b;0<c.length&&a.Jc.forEach(function(a){a(c)})};function uj(a,b){var c=a.i(Yb),d=b||{},e=new Pe(c);a.lb(Sb,e);var e=null,g=!1;switch(d.storeType||0){case 1:e=new Be(c);break;case 5:e=new De(c);break;case 4:e=new Le(a,c,d.webSqlDbSize);break;case 3:e=new le(c,d.firebase);g=!0;break;default:e=new we(a,c)}a.lb(Rb,e);var h=new Mf;a.lb(Tb,h);return e.Ea(d.onUpgrade).then(function(){var b=new aj(a);a.lb(Ub,b);b=new jj;a.lb(Wb,b);b=new rj;a.lb(Xb,b);return h.Ea(c)}).then(function(){if(g){var b=new ae(a);b.Ja.subscribe(b.Zd.bind(b))}return(new Ff(a)).Ea(c)})}
;function vj(a){this.g=a;this.m=a.i(Yb);this.$=D(this.m.ra());this.cb=x()}m=vj.prototype;m.exec=function(){var a=this.g.i(Tb),b=this.g.i(Sb),c={};this.m.ra().forEach(function(d){var g=a.get(ze(d)).Za(),g=Qe(b,g).map(function(a){return a.s});c[d.getName()]=g});var d={name:this.m.name(),version:this.m.version(),tables:c},d=new nd(new y(-1,d),!0);return w([new F([d],[])])};m.I=l(0);m.Z=f("$");m.Mb=f("cb");m.V=function(){return ka(this)};m.getPriority=l(0);function wj(a,b){this.g=a;this.m=a.i(Yb);this.$=D(this.m.ra());this.cb=x();this.ta=b;this.Ja=a.i(Rb);this.ca=a.i(Sb);this.D=a.i(Tb)}m=wj.prototype;
m.exec=function(){if(!(this.Ja instanceof we||this.Ja instanceof Be||this.Ja instanceof Le))throw new E(300);var a;a:{a=this.m.ra();for(var b=0;b<a.length;++b)if(0<this.D.get(ze(a[b])).Na().na){a=!1;break a}a=!0}if(!a)throw new E(110);if(this.m.name()!=this.ta.name||this.m.version()!=this.ta.version)throw new E(111);if(null==this.ta.tables)throw new E(112);return xj(this)};m.I=l(1);m.Z=f("$");m.Mb=f("cb");m.V=function(){return ka(this)};m.getPriority=l(0);
function xj(a){var b=new Uc(a.g,a.$),b=a.Ja.Cb(a.I(),b),c;for(c in a.ta.tables){var d=a.m.table(c),e=a.ta.tables[c].map(function(a){return d.tb(a)}),g=b.H(c,d.Lb);a.ca.wd(c,e);var h=a.D.ic.get(c)||[];e.forEach(function(a){h.forEach(function(b){var c=a.Eb(b.getName());b.add(c,a.id())})});g.put(e)}return b.ia()};function yj(a,b){this.g=a;this.Ja=a.i(Rb);this.Ba=a.i(Wb);this.Fb=a.i(Xb);this.$=D(b);this.Ra=new Uc(this.g,this.$);this.cb=x();this.vc=x();this.qe=x()}m=yj.prototype;m.exec=function(){this.qe.resolve();return this.vc.ha};m.I=l(1);m.Z=f("$");m.Mb=f("cb");m.V=function(){return ka(this)};m.getPriority=l(2);function zj(a){$d(a.Ba,a);return a.qe.ha}
function Aj(a,b){var c=b.Bc();return c.de.hb().exec(a.Ra,c.context).then(function(a){return fd(a[0])},function(a){this.Ra.Gb();var b=new hb(a.name);this.vc.reject(b);throw a;}.bind(a))}m.ia=function(){this.Ja.Cb(this.I(),this.Ra).ia().then(function(){this.Oc();this.vc.resolve()}.bind(this),function(a){this.Ra.Gb();this.vc.reject(a)}.bind(this));return this.cb.ha};m.Gb=function(){this.Ra.Gb();this.vc.resolve();return this.cb.ha};
m.Oc=function(){var a=Zd(this.Fb,this.$);0!=a.length&&(a=new Wd(this.g,a),$d(this.Ba,a))};function Bj(a){this.g=a;this.Ba=a.i(Wb);this.Sc=null;this.Ta=0;0==Cj.size&&(Cj.set(0,D([1,4])),Cj.set(1,D([2])),Cj.set(2,D([3,5,6])),Cj.set(3,D([2,7])),Cj.set(4,D([7])),Cj.set(5,D([7])),Cj.set(6,D([7])))}r("lf.proc.Transaction",Bj);var Cj=B();function Dj(a,b){var c=Cj.get(a.Ta)||null;if(null===c||!c.has(b))throw new E(107,a.Ta,b);a.Ta=b}
Bj.prototype.exec=function(a){Dj(this,4);var b=[];try{a.forEach(function(a){a.fb();b.push(a.Bc())},this)}catch(c){return Dj(this,7),$a(c)}a=new Yg(this.g,b);return $d(this.Ba,a).then(function(a){Dj(this,7);return a.map(function(a){return fd(a)})}.bind(this),function(a){Dj(this,7);throw a;}.bind(this))};Bj.prototype.exec=Bj.prototype.exec;Bj.prototype.wf=function(a){Dj(this,1);this.Sc=new yj(this.g,a);return zj(this.Sc).then(function(){Dj(this,2)}.bind(this))};Bj.prototype.begin=Bj.prototype.wf;
Bj.prototype.vf=function(a){Dj(this,3);return Aj(this.Sc,a).then(function(a){Dj(this,2);return a}.bind(this),function(a){Dj(this,7);throw a;}.bind(this))};Bj.prototype.attach=Bj.prototype.vf;Bj.prototype.ia=function(){Dj(this,5);return this.Sc.ia().then(function(){Dj(this,7)}.bind(this))};Bj.prototype.commit=Bj.prototype.ia;Bj.prototype.Gb=function(){Dj(this,6);return this.Sc.Gb().then(function(){Dj(this,7)}.bind(this))};Bj.prototype.rollback=Bj.prototype.Gb;function V(a){this.g=a;this.m=a.i(Yb);this.Pd=!1}r("lf.proc.Database",V);V.prototype.Ea=function(a){this.g.lb(Yb,this.m);return uj(this.g,a).then(function(){this.Pd=!0;this.Ba=this.g.i(Wb);return this}.bind(this))};V.prototype.init=V.prototype.Ea;V.prototype.vb=f("m");V.prototype.getSchema=V.prototype.vb;function Ej(a){if(!a.Pd)throw new E(2);}V.prototype.select=function(a){Ej(this);return new U(this.g,1!=arguments.length||null!=arguments[0]?Array.prototype.slice.call(arguments):[])};
V.prototype.select=V.prototype.select;V.prototype.xb=function(){Ej(this);return new wh(this.g)};V.prototype.insert=V.prototype.xb;V.prototype.Qd=function(){Ej(this);return new wh(this.g,!0)};V.prototype.insertOrReplace=V.prototype.Qd;V.prototype.update=function(a){Ej(this);return new Gh(this.g,a)};V.prototype.update=V.prototype.update;V.prototype.delete=function(){Ej(this);return new vh(this.g)};V.prototype["delete"]=V.prototype.delete;
V.prototype.observe=function(a,b){Ej(this);this.g.i(Xb).Ad(a,b)};V.prototype.observe=V.prototype.observe;V.prototype.unobserve=function(a,b){Ej(this);this.g.i(Xb).ge(a,b)};V.prototype.unobserve=V.prototype.unobserve;V.prototype.Df=function(){Ej(this);return new Bj(this.g)};V.prototype.createTransaction=V.prototype.Df;V.prototype.close=function(){try{this.g.i(Rb).close()}catch(a){}this.g.clear();this.Pd=!1};V.prototype.close=V.prototype.close;
V.prototype.Lf=function(){Ej(this);var a=new vj(this.g);return $d(this.Ba,a).then(function(a){return fd(a[0])[0]})};V.prototype["export"]=V.prototype.Lf;V.prototype.import=function(a){Ej(this);a=new wj(this.g,a);return $d(this.Ba,a).then(l(null))};V.prototype["import"]=V.prototype.import;function W(a,b,c,d,e,g){this.S=a;this.A=b;this.Me=c;this.Ke=d;this.pf=e;this.eb=g||null}r("lf.schema.BaseColumn",W);m=W.prototype;m.getName=f("A");m.l=function(){return I(this.S)+"."+this.A};m.toString=function(){return this.l()};m.H=f("S");m.I=f("pf");W.prototype.getType=W.prototype.I;W.prototype.Ya=f("eb");W.prototype.va=function(){null==this.ka&&(this.ka=[],this.H().va().forEach(function(a){-1!=a.f.map(function(a){return a.ba.getName()}).indexOf(this.A)&&this.ka.push(a)},this));return this.ka};
W.prototype.ua=function(){if(!q(this.fa)){var a=this.va().filter(function(a){return 1!=a.f.length?!1:a.f[0].ba.getName()==this.getName()},this);this.fa=0<a.length?a[0]:null}return this.fa};W.prototype.Dc=f("Ke");W.prototype.isNullable=W.prototype.Dc;W.prototype.Ec=f("Me");W.prototype.Qa=function(a){return ig(this,a,"eq")};W.prototype.eq=W.prototype.Qa;W.prototype.Te=function(a){return ig(this,a,"neq")};W.prototype.neq=W.prototype.Te;W.prototype.Wd=function(a){return ig(this,a,"lt")};
W.prototype.lt=W.prototype.Wd;W.prototype.ag=function(a){return ig(this,a,"lte")};W.prototype.lte=W.prototype.ag;W.prototype.Nf=function(a){return ig(this,a,"gt")};W.prototype.gt=W.prototype.Nf;W.prototype.Of=function(a){return ig(this,a,"gte")};W.prototype.gte=W.prototype.Of;W.prototype.match=function(a){return ig(this,a,"match")};W.prototype.match=W.prototype.match;W.prototype.xf=function(a,b){return ig(this,[a,b],"between")};W.prototype.between=W.prototype.xf;
W.prototype.Pf=function(a){return ig(this,a,"in")};W.prototype["in"]=W.prototype.Pf;W.prototype.Wf=function(){return this.Qa(null)};W.prototype.isNull=W.prototype.Wf;W.prototype.Vf=function(){return this.Te(null)};W.prototype.isNotNull=W.prototype.Vf;W.prototype.nc=function(a){return new W(this.S,this.A,this.Me,this.Ke,this.pf,a)};W.prototype.as=W.prototype.nc;function Fj(){this.ud=B()}var Gj;Fj.prototype.clear=function(){this.ud.clear()};Fj.prototype.clear=Fj.prototype.clear;Fj.prototype.lb=function(a,b){this.ud.set(a.toString(),b);return b};Fj.prototype.registerService=Fj.prototype.lb;Fj.prototype.i=function(a){var b=this.ud.get(a.toString())||null;if(null===b)throw new E(7,a.toString());return b};Fj.prototype.getService=Fj.prototype.i;Fj.prototype.Ud=function(a){return this.ud.has(a.toString())};Fj.prototype.isRegistered=Fj.prototype.Ud;function Hj(a){this.m=a;this.af=new bg;this.Ve=new bg;this.ye=B();this.h=new bg;this.ve=new bg;this.cf=new bg;this.xe=new bg;Ij(this)}function Ij(a){a.m.ra().forEach(function(a){var c=a.getName();a.Db().Nd().forEach(function(d){this.af.set(d.ab,d);this.Ve.set(c,this.m.table(d.ab));this.h.set(d.ab,a);0==d.action?this.cf.set(d.ab,a):this.ve.set(d.ab,a);this.ye.set(a.getName()+"."+d.rb,d.ab);this.xe.set(d.ab+"."+d.Lc,a.getName())},this)},a)}function Nc(a,b){return a.af.get(b)}
function dh(a,b){var c=b.get(a);return null===c?[]:c}function fh(a,b){var c=D();b.forEach(function(a){(a=this.ye.get(a))&&c.add(a)},a);return jc(c).map(function(a){return this.m.table(a)},a)}function bh(a,b,c){return null!=c?0==c?dh(b,a.cf):dh(b,a.ve):dh(b,a.h)}function gh(a,b){var c=D();b.forEach(function(a){(a=this.xe.get(a))&&a.forEach(function(a){c.add(a)})},a);return jc(c).map(function(a){return this.m.table(a)},a)};function Jj(a,b,c){this.kg=a;this.dg=b;this.Mf=c}r("lf.schema.Constraint",Jj);Jj.prototype.fd=f("kg");Jj.prototype.getPrimaryKey=Jj.prototype.fd;Jj.prototype.Nd=f("Mf");Jj.prototype.getForeignKeys=Jj.prototype.Nd;function Kj(a,b){var c=a.ref.split(".");if(2!=c.length)throw new E(540,b);this.rb=a.local;this.ab=c[0];this.Lc=c[1];this.name=b;this.action=a.action;this.timing=a.timing};function X(a){Lj(a);this.Kd=sd.zc();this.A=a;this.K=B();this.xd=D();this.jc=D();this.Ic=D();this.ya=null;this.ka=B();this.qd=!1;this.ub=[]}r("lf.schema.TableBuilder",X);function Mj(a){this.name=a.name;this.kb=a.order;this.autoIncrement=a.autoIncrement}var Nj=D([0,6]);function Lj(a){if(!/^[A-Za-z_][A-Za-z0-9_]*$/.test(a))throw new E(502,a);}function Oj(a,b){if(b==a.A)throw new E(546,b);if(a.K.has(b)||a.ka.has(b)||a.jc.has(b))throw new E(503,a.A+"."+b);}
function Pj(a,b){var c=!1;b.forEach(function(a){var b=this.K.get(a.name);c=c||a.autoIncrement;if(a.autoIncrement&&3!=b)throw new E(504);},a);if(c&&1<b.length)throw new E(505);}function Qj(a){if(null!==a.ya){var b=a.ka.get(a.ya).map(function(a){return a.name}),c=0;if(a.ub.some(function(a,e){c=e;return-1!=b.indexOf(a.rb)},a))throw new E(543,a.ub[c].name);}}
function Rj(a){if(null!==a.ya){var b=function(a){return a.name},c=JSON.stringify(a.ka.get(a.ya).map(b));a.ka.forEach(function(a,e){if(e!=this.ya){var g=a.map(b);if(JSON.stringify(g)==c)throw new E(544,this.A+"."+e);}},a)}}function Sj(a){null===a.ya||a.ka.get(a.ya).forEach(function(a){if(this.Ic.has(a.name))throw new E(545,this.A+"."+a.name);},a)}X.prototype.qf=function(a,b){Lj(a);Oj(this,a);this.K.set(a,b);Nj.has(b)&&this.se([a]);return this};X.prototype.addColumn=X.prototype.qf;
X.prototype.sf=function(a,b){var c=this.A;this.ya="pk"+(c[0].toUpperCase()+c.substring(1));Lj(this.ya);Oj(this,this.ya);c=Tj(this,a,!0,void 0,b);Pj(this,c);1==c.length&&this.xd.add(c[0].name);this.jc.add(this.ya);this.ka.set(this.ya,c);return this};X.prototype.addPrimaryKey=X.prototype.sf;
X.prototype.rf=function(a,b){Lj(a);Oj(this,a);var c=new Kj(b,this.A+"."+a);q(c.action)||(c.action=0);q(c.timing)||(c.timing=0);if(1==c.action&&1==c.timing)throw new E(506);if(!this.K.has(c.rb))throw new E(540,a);this.ub.push(c);this.re(a,[c.rb],this.xd.has(c.rb));return this};X.prototype.addForeignKey=X.prototype.rf;X.prototype.tf=function(a,b){Lj(a);Oj(this,a);var c=Tj(this,b,!0);Uj(this,a,c);1==c.length&&(this.xd.add(c[0].name),Vj(this,c[0].name));this.ka.set(a,c);this.jc.add(a);return this};
X.prototype.addUnique=X.prototype.tf;function Vj(a,b){a.ub.forEach(function(a){a.rb==b&&this.jc.add(a.name.split(".")[1])},a)}X.prototype.se=function(a){a=Tj(this,a,!1);Wj(this,a);a.forEach(function(a){this.Ic.add(a.name)},this);return this};X.prototype.addNullable=X.prototype.se;function Wj(a,b){Ib(a.ka).forEach(function(a){var d=D();this.ka.get(a).forEach(function(a){d.add(a.name)});var e=b.filter(function(a){return d.has(a.name)});if(1<d.size&&0<e.length)throw new E(507,a,e.join(","));},a)}
X.prototype.re=function(a,b,c,d){Lj(a);Oj(this,a);b=Tj(this,b,!0,d);Uj(this,a,b);c&&this.jc.add(a);this.ka.set(a,b);return this};X.prototype.addIndex=X.prototype.re;function Uj(a,b,c){if(1<c.length&&(a=c.filter(function(a){return this.Ic.has(a.name)},a),0<a.length))throw new E(507,b,a.join(","));}X.prototype.zb=ba("qd");X.prototype.persistentIndex=X.prototype.zb;X.prototype.vb=function(){Qj(this);Rj(this);Sj(this);return new (Xj(this))};X.prototype.getSchema=X.prototype.vb;
function Yj(a){return a.ub}function Tj(a,b,c,d,e){var g=b,g="string"==typeof b[0]?b.map(function(a){return new Mj({name:a,order:null!=d?d:1,autoIncrement:e||!1})}):b.map(function(a){return new Mj(a)});g.forEach(function(a){if(!this.K.has(a.name))throw new E(508,this.A,a.name);if(c){var b=this.K.get(a.name);if(0==b||6==b)throw new E(509,this.A,a.name);}},a);return g}
function Xj(a){function b(){function b(c){return a.ka.get(c).map(function(a){return{ba:this[a.name],kb:a.kb,autoIncrement:a.autoIncrement}},this)}var d=Ib(a.K).map(function(b){this[b]=new W(this,b,a.xd.has(b),a.Ic.has(b),a.K.get(b));return this[b]},this),e=Ib(a.ka).map(function(d){return new kg(a.A,d,a.jc.has(d),b.call(this,d))},this);Q.call(this,a.A,d,e,a.qd);var g=null===a.ya?null:new kg(a.A,a.ya,!0,b.call(this,a.ya)),h=d.filter(function(b){return!a.Ic.has(b.getName())});this.Af=new Jj(g,h,a.ub);
this.ff=Zj(a,d,e)}t(b,Q);b.prototype.tb=function(a){return new this.ff(nb++,a)};b.prototype.createRow=b.prototype.tb;b.prototype.Lb=function(a){var b={};this.gb().forEach(function(e){var g=e.getName();e=e.I();var h=a.value[g];if(0==e)if(e=h,null!=e&&""!=e){0!=e.length%2&&(e="0"+e);for(var h=new ArrayBuffer(e.length/2),k=new Uint8Array(h),n=0,z=0;n<e.length;n+=2)k[z++]=parseInt(e.substr(n,2),16);e=h}else e=null;else e=2==e?null!=h?new Date(h):null:h;b[g]=e},this);return new this.ff(a.id,b)};b.prototype.deserializeRow=
b.prototype.Lb;b.prototype.Db=f("Af");b.prototype.getConstraint=b.prototype.Db;return b}
function Zj(a,b,c){function d(a,d){this.K=b;this.ka=c;y.call(this,a,d)}t(d,y);d.prototype.Be=function(){var a={};this.K.forEach(function(b){a[b.getName()]=b.Dc()?null:Fc[b.I()]});return a};d.prototype.mf=function(){var a={};this.K.forEach(function(b){var c=b.getName();b=b.I();var d=this.s[c];a[c]=0==b?null!=d?rb(d):null:2==b?null!=d?d.getTime():null:6==b?null!=d?d:null:d},this);return a};var e=function(a){var b=this.K.get(a.getName()),c=this.Kd.Ne.get(b)||null;return function(b){return c(b[a.getName()])}}.bind(a),
g=function(a){var b=a.map(function(a){return e(a.ba)});return function(a){return b.map(function(b){return b(a)})}}.bind(a),h={};c.forEach(function(a){var b=a.l();a=1==a.f.length?e(a.f[0].ba):g(a.f);h[b]=a});d.prototype.Eb=function(a){return-1!=a.indexOf("#")?this.id():h.hasOwnProperty(a)?h[a](this.s):null};return d};function Y(a,b){this.m=new Z(a,b);this.pb=B();this.wc=!1}r("lf.schema.Builder",Y);function ak(a,b){b.ub.forEach(function(a){var d=a.ab;if(!this.pb.has(d))throw new E(536,a.name);var d=this.pb.get(d).vb(),e=a.Lc;if(!d.hasOwnProperty(e))throw new E(537,a.name);if(b.vb()[a.rb].I()!=d[e].I())throw new E(538,a.name);if(!d[e].Ec())throw new E(539,a.name);},a)}Y.prototype.zf=function(a){a.ub.forEach(function(a){Yj(this.pb.get(a.ab)).forEach(function(c){if(c.rb==a.Lc)throw new E(534,a.name);},this)},this)};
function bk(a){a.wc||(a.pb.forEach(function(a){ak(this,a);a=a.vb();this.m.L.set(a.getName(),a)},a),C(a.pb).forEach(a.zf,a),ck(a),a.pb.clear(),a.wc=!0)}function dk(a,b,c){b.pe||(b.pe=!0,b.$d=!0,b.Ce.forEach(function(a){a=c.get(a);if(!a.pe)dk(this,a,c);else if(a.$d&&b!=a)throw new E(533);},a));b.$d=!1}function ck(a){var b=B();a.m.L.forEach(function(a,d){b.set(d,new ek(d))},a);a.pb.forEach(function(a,d){a.ub.forEach(function(a){b.get(a.ab).Ce.add(d)})});C(b).forEach(function(a){dk(this,a,b)},a)}
function ek(a){this.$d=this.pe=!1;this.Ce=D();this.Qc=a}Y.prototype.vb=function(){this.wc||bk(this);return this.m};Y.prototype.getSchema=Y.prototype.vb;Y.prototype.Ee=function(){var a=new Qb("ns_"+this.m.name()),b;Gj||(Gj=new Fj);b=Gj;var c=null;b.Ud(a)?c=b.i(a):(c=new Fj,b.lb(a,c));return c};Y.prototype.getGlobal=Y.prototype.Ee;Y.prototype.connect=function(a){var b=this.Ee();b.Ud(Yb)||b.lb(Yb,this.vb());return(new V(b)).Ea(a)};Y.prototype.connect=Y.prototype.connect;
Y.prototype.Cf=function(a){if(this.pb.has(a))throw new E(503,a);if(this.wc)throw new E(535);this.pb.set(a,new X(a));return this.pb.get(a)};Y.prototype.createTable=Y.prototype.Cf;Y.prototype.ke=function(a){if(this.wc)throw new E(535);this.m.ke(a);return this};Y.prototype.setPragma=Y.prototype.ke;function Z(a,b){this.A=a;this.Oa=b;this.L=B();this.Ze={Gf:!1}}r("lf.schema.DatabaseSchema",Z);Z.prototype.name=f("A");Z.prototype.name=Z.prototype.name;Z.prototype.version=f("Oa");Z.prototype.version=Z.prototype.version;
Z.prototype.ra=function(){return C(this.L)};Z.prototype.tables=Z.prototype.ra;Z.prototype.table=function(a){if(!this.L.has(a))throw new E(101,a);return this.L.get(a)};Z.prototype.table=Z.prototype.table;Z.prototype.info=function(){this.Ie||(this.Ie=new Hj(this));return this.Ie};Z.prototype.Ye=f("Ze");Z.prototype.pragma=Z.prototype.Ye;Z.prototype.ke=ba("Ze");r("lf.schema.create",function(a,b){return new Y(a,b)});v.prototype.catch=v.prototype.me;v.prototype["catch"]=v.prototype.catch;}.bind(window))()
//# sourceMappingURL=lovefield.min.js.map
