/*
  Copyright 2014 The Lovefield Project Authors. All Rights Reserved.

  Licensed under the Apache License, Version 2.0 (the "License");
  you may not use this file except in compliance with the License.
  You may obtain a copy of the License at

  http://www.apache.org/licenses/LICENSE-2.0

  Unless required by applicable law or agreed to in writing, software
  distributed under the License is distributed on an "AS IS" BASIS,
  WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
  See the License for the specific language governing permissions and
  limitations under the License.
*/
(function(){'use strict';var aa=window,ba=Object,ca=Function,da=document,ea=Math,e=Array,fa=JSON,ga=Error,ha=parseInt;function ia(a,b){return a.exec=b}function ja(a,b){return a.getName=b}function ka(a,b){return a.remove=b}function la(a,b){return a.values=b}function ma(a,b){return a.clear=b}function na(a,b){return a.bind=b}function f(a,b){return a.toString=b}function oa(a,b){return a.table=b}function pa(a,b){return a.dump=b}function qa(a,b){return a.next=b}function ra(a,b){return a.close=b}
function sa(a,b){return a.clone=b}function ta(a,b){return a.child=b}function ua(a,b){return a.onerror=b}function va(a,b){return a.value=b}function wa(a,b){return a.getPriority=b}function xa(a,b){return a.delete=b}function ya(a,b){return a.subscribe=b}function za(a,b){return a.name=b}function Aa(a,b){return a.length=b}function Ba(a,b){return a.onsuccess=b}function Ca(a,b){return a.update=b}
var Da="context",Ea="filter",Fa="version",Ga="getParent",Ha="shift",Ia="exec",Ja="replace",Ka="concat",Ma="objectStoreNames",h="getName",m="remove",Na="autoIncrement",n="forEach",Oa="values",Pa="clear",q="bind",Qa="getTime",Ra="continue",r="toString",Sa="global",Ta="propertyIsEnumerable",Ua="create",t="table",Va="compare",Wa="result",Xa="index",Ya="next",Za="split",$a="hasOwnProperty",ab="close",bb="clone",cb="setImmediate",db="transaction",eb="child",fb="rows",u="contains",v="apply",w="push",gb=
"reject",hb="stringify",ib="reduce",jb="addAll",x="slice",y="value",kb="item",lb="objectStore",mb="indexOf",nb="getPriority",ob="delete",pb="name",z="length",A="prototype",B="then",D="entries",qb="removeChild",rb="openCursor",sb="target",E="call",tb="resolve",ub="some",vb="sort",wb="every",xb="update",F="splice",G="join",yb="unshift";function zb(){return function(){}}function Ab(a){return function(b){this[a]=b}}function H(a){return function(){return this[a]}}
function Bb(a){return function(){return a}}var I,Cb=this;function Db(a){return void 0!==a}function J(a,b,c){a=a[Za](".");c=c||Cb;a[0]in c||!c.execScript||c.execScript("var "+a[0]);for(var d;a[z]&&(d=a[Ha]());)!a[z]&&Db(b)?c[d]=b:c=c[d]?c[d]:c[d]={}}function Eb(){}function Fb(a){a.je=function(){return a.Ef?a.Ef:a.Ef=new a}}
function Gb(a){var b=typeof a;if("object"==b)if(a){if(a instanceof e)return"array";if(a instanceof ba)return b;var c=ba[A][r][E](a);if("[object Window]"==c)return"object";if("[object Array]"==c||"number"==typeof a[z]&&"undefined"!=typeof a[F]&&"undefined"!=typeof a[Ta]&&!a[Ta]("splice"))return"array";if("[object Function]"==c||"undefined"!=typeof a[E]&&"undefined"!=typeof a[Ta]&&!a[Ta]("call"))return"function"}else return"null";else if("function"==b&&"undefined"==typeof a[E])return"object";return b}
function Hb(a){return null===a}function Ib(a){return null!=a}function Jb(a){var b=Gb(a);return"array"==b||"object"==b&&"number"==typeof a[z]}function Kb(a){return"string"==typeof a}function Lb(a){return"function"==Gb(a)}function Mb(a){return a[Nb]||(a[Nb]=++Ob)}var Nb="closure_uid_"+(1E9*ea.random()>>>0),Ob=0;function Pb(a,b,c){return a[E][v](a[q],arguments)}
function Qb(a,b,c){if(!a)throw ga();if(2<arguments[z]){var d=e[A][x][E](arguments,2);return function(){var c=e[A][x][E](arguments);e[A][yb][v](c,d);return a[v](b,c)}}return function(){return a[v](b,arguments)}}function K(a,b,c){K=ca[A][q]&&-1!=ca[A][q][r]()[mb]("native code")?Pb:Qb;return K[v](null,arguments)}function Rb(a,b){var c=e[A][x][E](arguments,1);return function(){var b=c[x]();b[w][v](b,arguments);return a[v](this,b)}}
function L(a,b){function c(){}c.prototype=b[A];a.Za=b[A];a.prototype=new c;a[A].constructor=a;a.Bk=function(a,c,k){for(var l=e(arguments[z]-2),p=2;p<arguments[z];p++)l[p-2]=arguments[p];return b[A][c][v](a,l)}}na(ca[A],ca[A][q]||function(a,b){if(1<arguments[z]){var c=e[A][x][E](arguments,1);c[yb](this,a);return K[v](null,c)}return K(this,a)});function Sb(a){if(ga.captureStackTrace)ga.captureStackTrace(this,Sb);else{var b=ga().stack;b&&(this.stack=b)}a&&(this.message=String(a))}L(Sb,ga);za(Sb[A],"CustomError");function Tb(a,b){for(var c=a[Za]("%s"),d="",g=e[A][x][E](arguments,1);g[z]&&1<c[z];)d+=c[Ha]()+g[Ha]();return d+c[G]("%s")};function Ub(a,b){b[yb](a);Sb[E](this,Tb[v](null,b));b[Ha]()}L(Ub,Sb);za(Ub[A],"AssertionError");function Vb(a,b,c,d){var g="Assertion failed";if(c)var g=g+(": "+c),k=d;else a&&(g+=": "+a,k=b);throw new Ub(""+g,k||[]);}function M(a,b,c){a||Vb("",null,b,e[A][x][E](arguments,2));return a}function Wb(a,b){throw new Ub("Failure"+(a?": "+a:""),e[A][x][E](arguments,1));}function Xb(a,b,c){Lb(a)||Vb("Expected function but got %s: %s.",[Gb(a),a],b,e[A][x][E](arguments,2));return a};function Yb(a,b,c){this.Rf=c;this.Ih=a;this.dk=b;this.xd=0;this.pd=null}Yb[A].get=function(){var a;0<this.xd?(this.xd--,a=this.pd,this.pd=a[Ya],qa(a,null)):a=this.Ih();return a};Yb[A].put=function(a){this.dk(a);this.xd<this.Rf&&(this.xd++,qa(a,this.pd),this.pd=a)};var Zb=e[A],$b=Zb[mb]?function(a,b,c){M(null!=a[z]);return Zb[mb][E](a,b,c)}:function(a,b,c){c=null==c?0:0>c?ea.max(0,a[z]+c):c;if(Kb(a))return Kb(b)&&1==b[z]?a[mb](b,c):-1;for(;c<a[z];c++)if(c in a&&a[c]===b)return c;return-1},ac=Zb[n]?function(a,b,c){M(null!=a[z]);Zb[n][E](a,b,c)}:function(a,b,c){for(var d=a[z],g=Kb(a)?a[Za](""):a,k=0;k<d;k++)k in g&&b[E](c,g[k],k,a)},bc=Zb.map?function(a,b,c){M(null!=a[z]);return Zb.map[E](a,b,c)}:function(a,b,c){for(var d=a[z],g=e(d),k=Kb(a)?a[Za](""):a,l=0;l<
d;l++)l in k&&(g[l]=b[E](c,k[l],l,a));return g},cc=Zb[ib]?function(a,b,c,d){M(null!=a[z]);d&&(b=K(b,d));return Zb[ib][E](a,b,c)}:function(a,b,c,d){var g=c;ac(a,function(c,l){g=b[E](d,g,c,l,a)});return g},dc=Zb[ub]?function(a,b,c){M(null!=a[z]);return Zb[ub][E](a,b,c)}:function(a,b,c){for(var d=a[z],g=Kb(a)?a[Za](""):a,k=0;k<d;k++)if(k in g&&b[E](c,g[k],k,a))return!0;return!1},ec=Zb[wb]?function(a,b,c){M(null!=a[z]);return Zb[wb][E](a,b,c)}:function(a,b,c){for(var d=a[z],g=Kb(a)?a[Za](""):a,k=0;k<
d;k++)if(k in g&&!b[E](c,g[k],k,a))return!1;return!0};function fc(a,b){M(null!=a[z]);return 1==Zb[F][E](a,b,1)[z]}function gc(a,b,c){a:{for(var d=a[z],g=Kb(a)?a[Za](""):a,k=0;k<d;k++)if(k in g&&b[E](c,g[k],k,a)){b=k;break a}b=-1}return 0<=b?(fc(a,b),!0):!1}function hc(a){var b=a[z];if(0<b){for(var c=e(b),d=0;d<b;d++)c[d]=a[d];return c}return[]}
function ic(a,b){for(var c=1;c<arguments[z];c++){var d=arguments[c];if(Jb(d)){var g=a[z]||0,k=d[z]||0;Aa(a,g+k);for(var l=0;l<k;l++)a[g+l]=d[l]}else a[w](d)}}function jc(a,b,c,d){M(null!=a[z]);return Zb[F][v](a,kc(arguments,1))}function kc(a,b,c){M(null!=a[z]);return 2>=arguments[z]?Zb[x][E](a,b):Zb[x][E](a,b,c)}function lc(a,b,c,d,g){for(var k=0,l=a[z],p;k<l;){var C=k+l>>1,La;La=c?b[E](g,a[C],C,a):b(d,a[C]);0<La?k=C+1:(l=C,p=!La)}return p?k:~k}function mc(a,b){return a>b?1:a<b?-1:0}
function nc(a,b,c){c=lc(a,c||mc,!1,b);return 0>c?(jc(a,-(c+1),0,b),!0):!1}function oc(a,b){for(var c=[],d=0;d<b;d++)c[d]=a;return c}function pc(a){for(var b=[],c=0;c<arguments[z];c++){var d=arguments[c];if("array"==Gb(d))for(var g=0;g<d[z];g+=8192)for(var k=kc(d,g,g+8192),k=pc[v](null,k),l=0;l<k[z];l++)b[w](k[l]);else b[w](d)}return b};function qc(a,b,c){for(var d in a)b[E](c,a[d],d,a)}function rc(a,b,c){for(var d in a)if(b[E](c,a[d],d,a))return!0;return!1}function sc(a){var b=[],c=0,d;for(d in a)b[c++]=a[d];return b}function tc(a){var b=[],c=0,d;for(d in a)b[c++]=d;return b};var uc;a:{var vc=Cb.navigator;if(vc){var wc=vc.userAgent;if(wc){uc=wc;break a}}uc=""};function xc(a){Cb.setTimeout(function(){throw a;},0)}var yc;
function zc(){var a=Cb.MessageChannel;"undefined"===typeof a&&"undefined"!==typeof aa&&aa.postMessage&&aa.addEventListener&&-1==uc[mb]("Presto")&&(a=function(){var a=da.createElement("IFRAME");a.style.display="none";a.src="";da.documentElement.appendChild(a);var b=a.contentWindow,a=b.document;a.open();a.write("");a[ab]();var c="callImmediate"+ea.random(),d="file:"==b.location.protocol?"*":b.location.protocol+"//"+b.location.host,a=K(function(a){if(("*"==d||a.origin==d)&&a.data==c)this.port1.onmessage()},
this);b.addEventListener("message",a,!1);this.port1={};this.port2={postMessage:function(){b.postMessage(c,d)}}});if("undefined"!==typeof a&&-1==uc[mb]("Edge")&&-1==uc[mb]("Trident")&&-1==uc[mb]("MSIE")){var b=new a,c={},d=c;b.port1.onmessage=function(){if(Db(c[Ya])){c=c[Ya];var a=c.hf;c.hf=null;a()}};return function(a){qa(d,{hf:a});d=d[Ya];b.port2.postMessage(0)}}return"undefined"!==typeof da&&"onreadystatechange"in da.createElement("SCRIPT")?function(a){var b=da.createElement("SCRIPT");b.onreadystatechange=
function(){b.onreadystatechange=null;b.parentNode[qb](b);b=null;a();a=null};da.documentElement.appendChild(b)}:function(a){Cb.setTimeout(a,0)}};function Ac(){this.Ld=this.Tb=null}var Cc=new Yb(function(){return new Bc},function(a){a.reset()},100);Ac[A].add=function(a,b){var c=this.Wi();c.set(a,b);this.Ld?qa(this.Ld,c):(M(!this.Tb),this.Tb=c);this.Ld=c};ka(Ac[A],function(){var a=null;this.Tb&&(a=this.Tb,this.Tb=this.Tb[Ya],this.Tb||(this.Ld=null),qa(a,null));return a});Ac[A].ek=function(a){Cc.put(a)};Ac[A].Wi=function(){return Cc.get()};function Bc(){this.scope=this.ce=null;qa(this,null)}
Bc[A].set=function(a,b){this.ce=a;this.scope=b;qa(this,null)};Bc[A].reset=function(){this.scope=this.ce=null;qa(this,null)};function Dc(a,b){Ec||Fc();Gc||(Ec(),Gc=!0);Hc.add(a,b)}var Ec;function Fc(){if(Cb.Promise&&Cb.Promise[tb]){var a=Cb.Promise[tb]();Ec=function(){a[B](Ic)}}else Ec=function(){var a=Ic;if(!Lb(Cb[cb])||Cb.Window&&Cb.Window[A]&&Cb.Window[A][cb]==Cb[cb])yc||(yc=zc()),yc(a);else Cb[cb](a)}}var Gc=!1,Hc=new Ac;[][w](function(){Gc=!1;Hc=new Ac});function Ic(){for(var a=null;a=Hc[m]();){try{a.ce[E](a.scope)}catch(b){xc(b)}Hc.ek(a)}Gc=!1};function N(a,b){this.va=0;this.jg=void 0;this.Uc=this.Xb=this.F=null;this.od=this.be=!1;if(a==Jc)this.jc(2,b);else try{var c=this;a[E](b,function(a){c.jc(2,a)},function(a){if(!(a instanceof Kc))try{if(a instanceof ga)throw a;throw ga("Promise rejected.");}catch(b){}c.jc(3,a)})}catch(d){this.jc(3,d)}}function Lc(){ta(this,null);this.context=this.hc=this.Jb=null;qa(this,null);this.Pd=!1}Lc[A].reset=function(){ta(this,null);this.context=this.hc=this.Jb=null;this.Pd=!1};
var Mc=new Yb(function(){return new Lc},function(a){a.reset()},100);function Nc(a,b,c){var d=Mc.get();d.Jb=a;d.hc=b;d.context=c;return d}function Jc(){}function Oc(a){return a instanceof N?a:new N(Jc,a)}function Pc(a){return new N(function(b,c){c(a)})}function Qc(a){return new N(function(b,c){var d=a[z],g=[];if(d)for(var k=function(a,c){d--;g[a]=c;0==d&&b(g)},l=function(a){c(a)},p=0,C;C=a[p];p++)Rc(C,Rb(k,p),l);else b(g)})}
function Sc(){var a,b,c=new N(function(c,g){a=c;b=g});return new Tc(c,a,b)}N[A].then=function(a,b,c){null!=a&&Xb(a,"opt_onFulfilled should be a function.");null!=b&&Xb(b,"opt_onRejected should be a function. Did you pass opt_context as the second argument instead of the third?");return this.Xe(Lb(a)?a:null,Lb(b)?b:null,c)};N[A].then=N[A][B];N[A].$goog_Thenable=!0;I=N[A];
I.sk=function(a,b,c){null!=a&&Xb(a,"opt_onFulfilled should be a function.");null!=b&&Xb(b,"opt_onRejected should be a function. Did you pass opt_context as the second argument instead of the third?");this.We(Nc(a||Eb,b||null,c))};function Rc(a,b,c,d){a instanceof N?a.sk(b,c,d):a[B](b,c,d)}I.xg=function(a,b){return this.Xe(null,a,b)};I.We=function(a){this.gj()||2!=this.va&&3!=this.va||this.mg();this.Tj(a)};
I.Xe=function(a,b,c){var d=Nc(null,null,null);ta(d,new N(function(g,k){d.Jb=a?function(b){try{var d=a[E](c,b);g(d)}catch(C){k(C)}}:g;d.hc=b?function(a){try{var d=b[E](c,a);!Db(d)&&a instanceof Kc?k(a):g(d)}catch(C){k(C)}}:k}));d[eb].F=this;this.We(d);return d[eb]};I.Cg=function(a){M(1==this.va);this.va=0;this.jc(2,a)};I.Dg=function(a){M(1==this.va);this.va=0;this.jc(3,a)};
I.jc=function(a,b){if(0==this.va){if(this==b)a=3,b=new TypeError("Promise cannot resolve to itself");else{var c;if(b)try{c=!!b.$goog_Thenable}catch(d){c=!1}else c=!1;if(c){this.va=1;Rc(b,this.Cg,this.Dg,this);return}c=typeof b;if("object"==c&&null!=b||"function"==c)try{var g=b[B];if(Lb(g)){this.vk(b,g);return}}catch(k){a=3,b=k}}this.jg=b;this.va=a;this.F=null;this.mg();3!=a||b instanceof Kc||Uc(this,b)}};
I.vk=function(a,b){function c(a){k||(k=!0,g.Dg(a))}function d(a){k||(k=!0,g.Cg(a))}this.va=1;var g=this,k=!1;try{b[E](a,d,c)}catch(l){c(l)}};I.mg=function(){this.be||(this.be=!0,Dc(this.ci,this))};I.gj=function(){return!!this.Xb};I.Tj=function(a){M(null!=a.Jb);this.Uc?qa(this.Uc,a):this.Xb=a;this.Uc=a};I.Mj=function(){var a=null;this.Xb&&(a=this.Xb,this.Xb=a[Ya],qa(a,null));this.Xb||(this.Uc=null);null!=a&&M(null!=a.Jb);return a};
I.ci=function(){for(var a=null;a=this.Mj();)this.bi(a,this.va,this.jg);this.be=!1};I.bi=function(a,b,c){3==b&&a.hc&&!a.Pd&&this.bk();if(a[eb])a[eb].F=null,Vc(a,b,c);else try{a.Pd?a.Jb[E](a[Da]):Vc(a,b,c)}catch(d){Wc[E](null,d)}Mc.put(a)};function Vc(a,b,c){2==b?a.Jb[E](a[Da],c):a.hc&&a.hc[E](a[Da],c)}I.Rg=zb();I.bk=function(){var a;for(a=this;a&&a.od;a=a.F)a.od=!1};function Uc(a,b){a.od=!0;Dc(function(){a.od&&(a.Rg(b),Wc[E](null,b))})}var Wc=xc;function Kc(a){Sb[E](this,a)}L(Kc,Sb);za(Kc[A],"cancel");
function Tc(a,b,c){this.oa=a;this.resolve=b;this.reject=c};
function Xc(a,b){this.sa=a;this.Lb=b||this.nf()}var Yc=0;I=Xc[A];I.id=H("sa");I.Zg=Ab("sa");I.o=H("Lb");I.nf=function(){return{}};I.yg=H("Lb");I.Ca=function(){return{id:this.sa,value:this.yg()}};I.Gc=function(a){return"#"==a.substr(-1)?this.sa:null};function Zc(a){return new Xc(a.id,a[y])}function $c(a){return new Xc(Yc++,a||{})}function ad(a){if(null==a)return"";a=new Uint8Array(a);for(var b="",c=0;c<a[z];++c)var d=a[c][r](16),b=b+(2>d[z]?"0"+d:d);return b};
function bd(a){this.type=a}function cd(a){Xc[E](this,-1,a)}L(cd,Xc);
var dd={};J("lf.TransactionType",dd,void 0);dd.READ_ONLY=0;dd.READ_WRITE=1;

function ed(a,b){this.Ta=a;this.zg=b;this.ia=Sc()}I=ed[A];I.Gi=H("Ta");I.R=function(){return(0==this.zg?Oc():this.xj())[B](K(function(){this.Ta.R()},this))};I.xj=function(){this.yj();this.wj();return this.ia.oa};I.yj=function(){var a=this.Ta.uf();a.G()[n](function(b){var c=this.Ta.$().get(b),c=this.X(c[h](),K(c.$b,c));b=a.get(b);var d=b.he().c().map(function(a){return a.id()});0<d[z]&&c[m](d).xg(this.te,this);b=b.ke().c().map(function(a){return a[1]})[Ka](b.ee().c());c.put(b).xg(this.te,this)},this)};
I.wj=function(){this.Ta.Di()[n](function(a){var b=this.X(a[h](),Zc),c;b.get([-1])[B](function(a){c=a;return b[m]([])})[B](function(){b.put(c);b.put(a.Ca())},K(this.te,this))},this)};I.te=function(a){this.ia[gb](a)};function fd(a,b,c,d){c=c||function(a,b){return a==b};d=d||function(b){return a[b]};for(var g=a[z],k=b[z],l=[],p=0;p<g+1;p++)l[p]=[],l[p][0]=0;for(var C=0;C<k+1;C++)l[0][C]=0;for(p=1;p<=g;p++)for(C=1;C<=k;C++)c(a[p-1],b[C-1])?l[p][C]=l[p-1][C-1]+1:l[p][C]=ea.max(l[p-1][C],l[p][C-1]);for(var La=[],p=g,C=k;0<p&&0<C;)c(a[p-1],b[C-1])?(La[yb](d(p-1,C-1)),p--,C--):l[p-1][C]>l[p][C-1]?p--:C--;return La}function gd(a){return cc(arguments,function(a,c){return a+c},0)}
function hd(a){return gd[v](null,arguments)/arguments[z]}function id(a){var b=arguments[z];if(2>b)return 0;var c=hd[v](null,arguments);return gd[v](null,bc(arguments,function(a){return ea.pow(a-c,2)}))/(b-1)}function jd(a){return ea.sqrt(id[v](null,arguments))};var kd="StopIteration"in Cb?Cb.StopIteration:{message:"StopIteration",stack:""};function ld(){}qa(ld[A],function(){throw kd;});ld[A].qb=function(){return this};function md(a){if(a instanceof ld)return a;if("function"==typeof a.qb)return a.qb(!1);if(Jb(a)){var b=0,c=new ld;qa(c,function(){for(;;){if(b>=a[z])throw kd;if(b in a)return a[b++];b++}});return c}throw ga("Not implemented");}
function nd(a,b,c){if(Jb(a))try{ac(a,b,c)}catch(d){if(d!==kd)throw d;}else{a=md(a);try{for(;;)b[E](c,a[Ya](),void 0,a)}catch(g){if(g!==kd)throw g;}}}function od(a){if(dc(arguments,function(a){return!a[z]})||!arguments[z])return new ld;var b=new ld,c=arguments,d=oc(0,c[z]);qa(b,function(){if(d){for(var a=bc(d,function(a,b){return c[b][a]}),b=d[z]-1;0<=b;b--){M(d);if(d[b]<c[b][z]-1){d[b]++;break}if(0==b){d=null;break}d[b]=0}return a}throw kd;});return b};function O(a,b){this.f={};this.b=[];this.ab=this.S=0;var c=arguments[z];if(1<c){if(c%2)throw ga("Uneven number of arguments");for(var d=0;d<c;d+=2)this.set(arguments[d],arguments[d+1])}else a&&this[jb](a)}I=O[A];I.W=H("S");I.c=function(){this.tc();for(var a=[],b=0;b<this.b[z];b++)a[w](this.f[this.b[b]]);return a};I.G=function(){this.tc();return this.b[Ka]()};I.w=function(a){return pd(this.f,a)};I.Yc=function(a){for(var b=0;b<this.b[z];b++){var c=this.b[b];if(pd(this.f,c)&&this.f[c]==a)return!0}return!1};
I.xc=function(a,b){if(this===a)return!0;if(this.S!=a.W())return!1;var c=b||qd;this.tc();for(var d,g=0;d=this.b[g];g++)if(!c(this.get(d),a.get(d)))return!1;return!0};function qd(a,b){return a===b}I.ya=function(){return 0==this.S};ma(I,function(){this.f={};Aa(this.b,0);this.ab=this.S=0});ka(I,function(a){return pd(this.f,a)?(delete this.f[a],this.S--,this.ab++,this.b[z]>2*this.S&&this.tc(),!0):!1});
I.tc=function(){if(this.S!=this.b[z]){for(var a=0,b=0;a<this.b[z];){var c=this.b[a];pd(this.f,c)&&(this.b[b++]=c);a++}Aa(this.b,b)}if(this.S!=this.b[z]){for(var d={},b=a=0;a<this.b[z];)c=this.b[a],pd(d,c)||(this.b[b++]=c,d[c]=1),a++;Aa(this.b,b)}};I.get=function(a,b){return pd(this.f,a)?this.f[a]:b};I.set=function(a,b){pd(this.f,a)||(this.S++,this.b[w](a),this.ab++);this.f[a]=b};I.addAll=function(a){var b;a instanceof O?(b=a.G(),a=a.c()):(b=tc(a),a=sc(a));for(var c=0;c<b[z];c++)this.set(b[c],a[c])};
I.forEach=function(a,b){for(var c=this.G(),d=0;d<c[z];d++){var g=c[d],k=this.get(g);a[E](b,k,g,this)}};sa(I,function(){return new O(this)});I.Hi=function(){return this.qb(!0)};I.Yi=function(){return this.qb(!1)};I.qb=function(a){this.tc();var b=0,c=this.ab,d=this,g=new ld;qa(g,function(){if(c!=d.ab)throw ga("The map has changed since the iterator was created");if(b>=d.b[z])throw kd;var g=d.b[b++];return a?g:d.f[g]});return g};function pd(a,b){return ba[A][$a][E](a,b)};
function rd(a){this.fk=a}f(rd[A],H("fk"));var sd=new rd("backstore"),td=new rd("cache"),ud=new rd("indexstore"),vd=new rd("engine"),wd=new rd("runner"),xd=new rd("observerregistry"),yd=new rd("schema");
function zd(a){if("function"==typeof a.W)a=a.W();else if(Jb(a)||Kb(a))a=a[z];else{var b=0,c;for(c in a)b++;a=b}return a}function Ad(a){if("function"==typeof a.c)return a.c();if(Kb(a))return a[Za]("");if(Jb(a)){for(var b=[],c=a[z],d=0;d<c;d++)b[w](a[d]);return b}return sc(a)}
function Bd(a,b,c){if("function"==typeof a[wb])return a[wb](b,c);if(Jb(a)||Kb(a))return ec(a,b,c);var d;if("function"==typeof a.G)d=a.G();else if("function"!=typeof a.c)if(Jb(a)||Kb(a)){d=[];for(var g=a[z],k=0;k<g;k++)d[w](k)}else d=tc(a);else d=void 0;for(var g=Ad(a),k=g[z],l=0;l<k;l++)if(!b[E](c,g[l],d&&d[l],a))return!1;return!0};function P(a){this.f=new O;a&&this[jb](a)}function Cd(a){var b=typeof a;return"object"==b&&a||"function"==b?"o"+Mb(a):b.substr(0,1)+a}I=P[A];I.W=function(){return this.f.W()};I.add=function(a){this.f.set(Cd(a),a)};I.addAll=function(a){a=Ad(a);for(var b=a[z],c=0;c<b;c++)this.add(a[c])};I.gg=function(a){a=Ad(a);for(var b=a[z],c=0;c<b;c++)this[m](a[c])};ka(I,function(a){return this.f[m](Cd(a))});ma(I,function(){this.f[Pa]()});I.ya=function(){return this.f.ya()};I.contains=function(a){return this.f.w(Cd(a))};
I.Bh=function(a){return Bd(a,this[u],this)};I.bd=function(a){var b=this[bb]();b.gg(a);return b};I.c=function(){return this.f.c()};sa(I,function(){return new P(this)});I.xc=function(a){return this.W()==zd(a)&&this.qj(a)};
I.qj=function(a){var b=zd(a);if(this.W()>b)return!1;!(a instanceof P)&&5<b&&(a=new P(a));return Bd(this,function(b){var d=a;if("function"==typeof d[u])b=d[u](b);else if("function"==typeof d.Yc)b=d.Yc(b);else if(Jb(d)||Kb(d))b=0<=$b(d,b);else a:{for(var g in d)if(d[g]==b){b=!0;break a}b=!1}return b})};I.qb=function(){return this.f.qb(!1)};
function Dd(a,b){this.sa=a;this.Lb=b||{}}function Ed(a){var b=new P;a[n](function(a){b.add(a>>9)});return b.c()}I=Dd[A];I.ga=H("sa");I.ec=H("Lb");I.qg=function(a){a[n](function(a){this.Lb[a.id()]=a.Ca()},this)};I.$j=function(a){a[n](function(a){var c=this.Lb;a in c&&delete c[a]},this)};I.Ca=function(){return{id:this.sa,value:fa[hb](this.Lb)}};function Fd(a){return new Dd(a.id,fa.parse(a[y]))};

function Gd(a,b,c){this.O=a;this.Cb=b;this.kg=c}I=Gd[A];I.get=function(a){return 0==a[z]?this.ge():this.Li(a)[B](K(function(b){return a.map(function(a){var d=b.get(a>>9);M(d,"Containing page is empty");return this.Cb(d.ec()[a])},this)},this))};I.Li=function(a){var b=new O,c=Sc();a=Ed(a).map(function(a){return new N(function(c,k){var l;try{l=this.O.get(a)}catch(p){k(p);return}ua(l,k);Ba(l,K(function(a){a=Fd(a[sb][Wa]);b.set(a.ga(),a);c()},this))},this)},this);Qc(a)[B](function(){c[tb](b)});return c.oa};
I.ge=function(){return new N(function(a,b){var c=[],d;try{d=this.O[rb]()}catch(g){b(g);return}ua(d,b);Ba(d,K(function(){var b=d[Wa];if(b){var g=Fd(b[y]).ec(),p;for(p in g)c[w](this.Cb(g[p]));b[Ra]()}else a(c)},this))},this)};I.Mb=function(a){return new N(function(b,c){var d;try{d=a()}catch(g){c(g);return}Ba(d,b);ua(d,c)},this)};
I.put=function(a){if(0==a[z])return Oc();var b=new O;a[n](function(a){var d;d=a.id()>>9;var g=b.get(d,null);null===g&&(g=this.kg(this.O[pb],d));g.qg([a]);b.set(d,g)},this);a=b.c().map(function(a){return this.Mb(K(function(){return this.O.put(a.Ca())},this))},this);return Qc(a)};
ka(I,function(a){if(0==a[z])return this.Mb(K(function(){return this.O[Pa]()},this));var b=new O;a[n](function(a){var d=a>>9,g=b.get(d,null);null===g&&(g=this.kg(this.O[pb],d));g.$j([a]);b.set(d,g)},this);a=b.c().map(function(a){return this.Mb(K(function(){var b;a:{b=a.ec();for(var g in b){b=!1;break a}b=!0}return b?this.O[ob](a.ga()):this.O.put(a.Ca())},this))},this);return Qc(a)});function Hd(a,b,c){a=a.m(td);var d=[c<<9,(c+1<<9)-1];b=a.Pa(b,d[0],d[1]);c=new Dd(c);c.qg(b);return c}
function Id(a,b){return new Dd(b)};
function Jd(){};
function Kd(a){this.la=a.m(td);this.N=a.m(ud);this.B=a.m(yd)}Ca(Kd[A],function(a){a[n](function(a){this.xk(a);this.wk(a)},this)});Kd[A].wk=function(a){var b=a[h]();a.he().c()[n](function(a){this.la[m](b,[a.id()])},this);a.ee()[n](function(a){this.la.set(b,[a])},this);a.ke()[n](function(a){this.la.set(b,[a[1]])},this)};Kd[A].xk=function(a){var b=this.B[t](a[h]());a.Bi()[n](function(a){this.Gg(b,a)},this)};
Kd[A].Gg=function(a,b){a.Da().map(function(a){return this.N.get(a.j())},this)[Ka]([this.N.get(a.Eb())])[n](function(a){var d=null===b[1]?null:b[1].Gc(a[h]()),g=null===b[0]?null:b[0].Gc(a[h]());null===g&&null!==d?a.add(d,b[1].id()):null===g||null===d?null!==g&&null===d&&a[m](g,b[0].id()):0!=a.vc()[Va](g,d)&&(a.add(d,b[1].id()),a[m](g,b[0].id()))})};
function Q(a,b){za(this,a);this.message=b};
function Ld(a){this.N=a.m(ud)}Ld[A].ji=function(a,b){var c=a.dc().ne();return null===c?null:this.ii(c,b)};Ld[A].ii=function(a,b){var c=a.j(),d=b.Gc(c),c=this.N.get(c).get(d);return 0==c[z]?null:c[0]};Ld[A].Ud=function(a,b){var c=a.dc().Ji();b[n](function(a){c[n](function(b){if(null===a.o()[b[h]()])throw new Q("ConstraintError","Attempted to insert NULL value to non-nullable field "+b.j());},this)},this)};
function Md(a){this.bb=new O;this.Ea=new O;this.fb=new O;this.A=a}I=Md[A];ja(I,H("A"));I.ee=H("bb");I.ke=H("Ea");I.he=H("fb");I.add=function(a){if(this.fb.w(a.id())){var b=[this.fb.get(a.id()),a];this.Ea.set(a.id(),b);this.fb[m](a.id())}else this.bb.set(a.id(),a)};I.modify=function(a){var b=a[0],c=a[1];M(b.id()==c.id(),"Row ID mismatch between old/new values.");b=b.id();this.bb.w(b)?this.bb.set(b,c):(this.Ea.w(b)&&(a=[this.Ea.get(a[0].id())[0],c]),this.Ea.set(b,a))};
xa(I,function(a){if(this.bb.w(a.id()))this.bb[m](a.id());else if(this.Ea.w(a.id())){var b=this.Ea.get(a.id())[0];this.Ea[m](a.id());this.fb.set(a.id(),b)}else this.fb.set(a.id(),a)});I.Bi=function(){var a=[];this.bb.c()[n](function(b){a[w]([null,b])},this);this.Ea.c()[n](function(b){a[w](b)},this);this.fb.c()[n](function(b){a[w]([b,null])},this);return a};f(I,function(){return"["+this.bb.G()[r]()+"], ["+this.Ea.G()[r]()+"], ["+this.fb.G()[r]()+"]"});
I.Pi=function(){var a=new Md(this.A);this.bb.c()[n](function(b){a[ob](b)},this);this.fb.c()[n](function(b){a.add(b)},this);this.Ea.c()[n](function(b){a.modify([b[1],b[0]])},this);return a};I.ya=function(){return this.bb.ya()&&this.fb.ya()&&this.Ea.ya()};
function Nd(a,b){this.Ma=new O;b[n](function(a){this.Ma.set(a[h](),a)},this);this.la=a.m(td);this.N=a.m(ud);this.Zc=new Ld(a);this.qd=new Kd(a);this.Ge=this.Id=!1;this.yb=new O}I=Nd[A];I.uf=H("yb");I.Di=function(){var a=[];this.yb.G().map(function(a){return this.Ma.get(a)},this)[n](function(b){b.Nb()&&(b.Da()[n](function(b){a[w](this.N.get(b.j()))},this),a[w](this.N.get(b[h]()+".#")))},this);return a};I.$=H("Ma");
I.Ei=function(){var a=[];this.Ma.c()[n](function(b){b.Nb()&&(b.Da()[n](function(b){a[w](b.j())}),a[w](b[h]()+".#"))});return a};I.mb=function(a,b){this.rc();this.Vc(a);this.Zc.Ud(a,b);for(var c=0;c<b[z];c++)this.sd(a,null,b[c])};
I.sd=function(a,b,c){var d=a[h](),g=this.yb.get(d,null)||new Md(d);this.yb.set(d,g);var k=[b,c];try{this.qd.Gg(a,k)}catch(l){throw this.Ge=!0,l;}null===b&&null!==c?(this.la.set(d,[c]),g.add(c)):null!==b&&null!==c?(this.la.set(d,[c]),g.modify(k)):null!==b&&null===c&&(this.la[m](d,[b.id()]),g[ob](b))};Ca(I,function(a,b){this.rc();this.Vc(a);this.Zc.Ud(a,b);for(var c=0;c<b[z];c++){var d=b[c],g=this.la.get([d.id()])[0];this.sd(a,g,d)}});
I.we=function(a,b){this.rc();this.Vc(a);this.Zc.Ud(a,b);for(var c=0;c<b[z];c++){var d=b[c],g=null,k=this.Zc.ji(a,d);null!=k&&(g=this.la.get([k])[0],d.Zg(k));this.sd(a,g,d)}};ka(I,function(a,b){this.rc();this.Vc(a);for(var c=0;c<b[z];c++)this.sd(a,b[c],null)});I.R=function(){this.rc();this.Id=!0};I.rc=function(){M(!this.Ge,"Attemptted to use journal that needs to be rolled back.");M(!this.Id,"Attemptted to commit a terminated journal.")};
I.vb=function(){M(!this.Id,"Attempted to rollback a terminated journal.");var a=this.yb.c().map(function(a){return a.Pi()},this);this.qd[xb](a);this.Id=!0;this.Ge=!1};I.Vc=function(a){if(!this.Ma.w(a[h]()))throw new Q("ScopeError",a[h]()+" is not in the journal's scope.");};
var Od={};J("lf.Order",Od,void 0);Od.DESC=0;Od.ASC=1;
function Pd(a,b,c,d){this.g=a;this.s=b;this.Y=null===this.g?!1:c;this.ca=null===this.s?!1:d}I=Pd[A];f(I,function(){return(this.Y?"(":"[")+(null===this.g?"unbound":this.g)+", "+(null===this.s?"unbound":this.s)+(this.ca?")":"]")});I.xh=function(){if(null===this.g&&null===this.s)return[];var a=null,b=null;null===this.g||(a=new Pd(null,this.g,!1,!this.Y));null===this.s||(b=new Pd(this.s,null,!this.ca,!1));return[a,b][Ea](function(a){return null!==a})};
I.reverse=function(){return new Pd(this.s,this.g,this.ca,this.Y)};I.Zf=function(a){var b=Qd(this.g,a.g,!0,this.Y,a.Y);if(0==b)return!0;var c=-1==b?this:a;a=1==b?this:a;return null===c.s||c.s>a.g||c.s==a.g&&!c.ca&&!a.Y};function Rd(){return new Pd(null,null,!1,!1)}I.contains=function(a){var b=null===this.s||a<this.s||a==this.s&&!this.ca;return(null===this.g||a>this.g||a==this.g&&!this.Y)&&b};I.xc=function(a){return this.g==a.g&&this.Y==a.Y&&this.s==a.s&&this.ca==a.ca};
function Qd(a,b,c,d,g){function k(a){return c?a:1==a?-1:1}d=d||!1;g=g||!1;return null===a?null===b?(d?!g:g)?d?k(1):k(-1):0:k(-1):null===b?k(1):a<b?-1:a==b?(d?!g:g)?d?k(1):k(-1):0:1}function Sd(a,b){var c=Qd(a.g,b.g,!0,a.Y,b.Y);0==c&&(c=Qd(a.s,b.s,!1,a.ca,b.ca));return c};
function Td(a,b){this.entries=a;this.I=new P(b);this.zb=null}I=Td[A];I.nj=function(a){return this.I.xc(a.I)};function Ud(a,b){M(a.nj(b),"Intersection/union operations only apply to compatible relations.")}I.U=function(){return this.I.c()};I.ye=function(){return 1<this.I.W()};I.le=function(){return this[D].map(function(a){return a.qa.o()})};I.Ri=function(){return this[D].map(function(a){return a.qa.id()})};I.gk=function(a,b){null===this.zb&&(this.zb=new O);this.zb.set(a.j(),b)};
I.cc=function(a){M(null!==this.zb,"getAggregationResult called before any results have been calculated.");var b=this.zb.get(a.j(),void 0);M(Db(b),"Could not find result for "+a.j());return b};I.ej=function(a){return null!==this.zb&&this.zb.w(a.j())};var Vd=null;function Wd(){null===Vd&&(Vd=new Td([],[]));return Vd}
function Xd(a){if(0==a[z])return Wd();for(var b=a[ib](function(b,c){Ud(a[0],c);return b+c[D][z]},0),c=e(b),d=0,b=a.map(function(a){var b=new O;a[D][n](function(a){c[d++]=a;b.set(a.id,a)});return b}),g=new O,k=0;k<c[z];k++)b[wb](function(a){return a.w(c[k].id)})&&g.set(c[k].id,c[k]);return new Td(g.c(),a[0].I.c())}function Yd(a){if(0==a[z])return Wd();var b=new O;a[n](function(c){Ud(a[0],c);c[D][n](function(a){b.set(a.id,a)})});return new Td(b.c(),a[0].I.c())}
function Zd(a,b){var c=1<b[z],d=a.map(function(a){return new $d(a,c)});return new Td(d,b)}function $d(a,b){this.qa=a;this.id=ae++;this.ze=b}var ae=0;$d[A].M=function(a){var b=a.Oa();return null!==b&&this.qa.o()[$a](b)?this.qa.o()[b]:this.ze?this.qa.o()[a.X().xa()][a[h]()]:this.qa.o()[a[h]()]};$d[A].Oe=function(a,b){var c=a.Oa();if(null!=c)this.qa.o()[c]=b;else if(this.ze){var c=a.X().xa(),d=this.qa.o()[c];null==d&&(d={},this.qa.o()[c]=d);d[a[h]()]=b}else this.qa.o()[a[h]()]=b};
function be(a,b,c,d){function g(a,b){if(a.ze){var c=a.qa.o(),d;for(d in c)k[d]=c[d]}else M(!k[$a](b[0]),"Attempted to join table with itself, without using table alias, or same alias "+b[0]+"is reused for multiple tables."),k[b[0]]=a.qa.o()}var k={};g(a,b);g(c,d);a=new Xc(-1,k);return new $d(a,!0)};
J("lf.bind",function(a){return new ce(a)},void 0);function ce(a){this.ta=a}J("lf.Binder",ce,void 0);ce[A].kb=H("ta");
var de={};J("lf.Type",de,void 0);de.ARRAY_BUFFER=0;de.BOOLEAN=1;de.DATE_TIME=2;de.INTEGER=3;de.NUMBER=4;de.STRING=5;de.OBJECT=6;var ee={0:new ArrayBuffer(0),1:!1,2:ba.freeze(new Date(0)),3:0,4:0,5:"",6:ba.freeze({})};J("lf.type.DEFAULT_VALUES",ee,void 0);
function fe(){var a=ge();this.Uh=new O(1,he(),2,ie(),4,a,3,a,5,je())}Fb(fe);fe[A].ie=function(a,b){var c=this.Uh.get(a,null);M(null!==c,"Could not find evaluation map for "+a);c=c.get(b,null);M(null!==c,"Could not find evaluator for "+a+", "+b);return c};
function ge(){return new O("between",function(a,b){return a>=b[0]&&a<=b[1]},"eq",function(a,b){return a==b},"gte",function(a,b){return a>=b},"gt",function(a,b){return a>b},"in",function(a,b){return-1!=b[mb](a)},"lte",function(a,b){return a<=b},"lt",function(a,b){return a<b},"neq",function(a,b){return a!=b})}
function je(){return new O("between",function(a,b){return a>=b[0]&&a<=b[1]},"eq",function(a,b){return a==b},"gte",function(a,b){return a>=b},"gt",function(a,b){return a>b},"in",function(a,b){return-1!=b[mb](a)},"lte",function(a,b){return a<=b},"lt",function(a,b){return a<b},"match",function(a,b){return(new RegExp(b)).test(a)},"neq",function(a,b){return a!=b})}
function ie(){return new O("between",function(a,b){return a[Qa]()>=b[0][Qa]()&&a[Qa]()<=b[1][Qa]()},"eq",function(a,b){return(null===a?-1:a[Qa]())==(null===b?-1:b[Qa]())},"gte",function(a,b){return a[Qa]()>=b[Qa]()},"gt",function(a,b){return a[Qa]()>b[Qa]()},"in",function(a,b){return b[ub](function(b){return b[Qa]()==a[Qa]()})},"lte",function(a,b){return a[Qa]()<=b[Qa]()},"lt",function(a,b){return a[Qa]()<b[Qa]()},"neq",function(a,b){return(null===a?-1:a[Qa]())!=(null===b?-1:b[Qa]())})}
function he(){return new O("eq",function(a,b){return a==b},"neq",function(a,b){return a!=b})};function ke(a,b){this.Nf=a;this.Hg=b}ke[A].getKey=H("Nf");ke[A].Xi=H("Hg");sa(ke[A],function(){return new ke(this.Nf,this.Hg)});function le(a,b){ke[E](this,a,b);this.i=this.F=null}L(le,ke);var me=[];I=le[A];sa(I,function(){return new le(this.getKey(),this.Xi())});I.getParent=H("F");I.Hf=function(){return!this.ra()};I.Z=function(){return this.i||me};I.jb=function(a){return this.Z()[a]||null};I.ra=function(){return this.Z()[z]};I.Ci=function(){for(var a=0,b=this;b[Ga]();)a++,b=b[Ga]();return a};I.Db=function(){for(var a=this;a[Ga]();)a=a[Ga]();return a};I.contains=function(a){do a=a[Ga]();while(a&&a!=this);return Boolean(a)};
I.mc=function(a,b){if(!1!==a[E](b,this))for(var c=this.Z(),d=0;d<c[z];d++)c[d].mc(a,b)};I.og=Ab("F");I.ea=function(a){this.oc(a,this.i?this.i[z]:0)};I.oc=function(a,b){M(!a[Ga]());a.og(this);this.i=this.i||[];M(0<=b&&b<=this.i[z]);jc(this.i,b,0,a)};I.Ed=function(a){var b=this.i&&this.i[a];return b?(b.og(null),fc(this.i,a),0==this.i[z]&&(this.i=null),b):null};I.removeChild=function(a){return this.Ed($b(this.Z(),a))};

function ne(){le[E](this,"","");this.sa=oe++}L(ne,le);var oe=0;ne[A].ga=H("sa");ne[A].Pe=Ab("sa");
function pe(a,b,c){ne[E](this);this.K=a;va(this,b);this.T=c;this.dd=fe.je().ie(this.K.aa(),this.T);this.Sa=!1;this.Wb=b}L(pe,ne);I=pe[A];I.Ab=function(){var a=new pe(this.K,this[y],this.T);a.hk(this.Wb);a.Hd(this.Sa);a.Pe(this.ga());return a};I.sb=function(a){return null!=a?(a[w](this.K),a):[this.K]};I.Hd=Ab("Sa");I.hk=Ab("Wb");
I.jf=function(){var a=!1;this[y]instanceof ce||(a="array"==Gb(this[y])?!this[y][ub](function(a){return a instanceof ce}):!0);if(!a)throw new Q("SyntaxError","Value is not bounded");};I.eval=function(a){this.jf();if("in"==this.T)return this.Ph(a);var b=a[D][Ea](function(a){return this.dd(a.M(this.K),this[y])!=this.Sa},this);return new Td(b,a.U())};
na(I,function(a){function b(b){if(a[z]<=b)throw new Q("SyntaxError","Cannot bind to given array: out of range.");}if(this.Wb instanceof ce){var c=this.Wb.kb();b(c);va(this,a[c])}else"array"==Gb(this.Wb)&&va(this,this.Wb.map(function(c){return c instanceof ce?(b(c.kb()),a[c.kb()]):c}))});
I.Ph=function(a){M("in"==this.T,"ValuePredicate#evalAsIn_() called for wrong predicate type.");var b=new P(this[y]),c=K(function(a){return b[u](a)!=this.Sa},this),d=a[D][Ea](function(a){return c(a.M(this.K))},this);return new Td(d,a.U())};f(I,function(){return"value_pred("+this.K.j()+" "+this.T+(this.Sa?"(complement)":"")+" "+this[y]+")"});I.Gf=function(){this.jf();return null!==this[y]&&("between"==this.T||"eq"==this.T||"gt"==this.T||"gte"==this.T||"lt"==this.T||"lte"==this.T)};
I.tk=function(){M(this.Gf(),"Could not convert predicate to key range.");var a=null;"between"==this.T?a=new Pd(this[y][0],this[y][1],!1,!1):"eq"==this.T?(a=this[y],a=new Pd(a,a,!1,!1)):a="gte"==this.T?new Pd(this[y],null,!1,!1):"gt"==this.T?new Pd(this[y],null,!0,!1):"lte"==this.T?new Pd(null,this[y],!1,!1):new Pd(null,this[y],!1,!0);return this.Sa?a.xh():[a]};
function qe(){this.uc=this.na=null}qe[A].md=function(a){null===this.na&&null!=this.C&&(this.na=re(this.C));a=this.na.get(a,null);M(null!==a);return a};function re(a){var b=new O;a.mc(function(a){b.set(a.ga(),a)});return b}qe[A].Wc=function(a){a.C&&(this.C=a.C.Ab());this.uc=a};na(qe[A],function(){M(null==this.uc);return this});qe[A].Sd=function(a){var b=this.C;null!=b&&b.mc(function(b){b instanceof pe&&b[q](a)})};
function se(){qe[E](this)}L(se,qe);function te(a){var b="";a[n](function(c,d){b+=c.K.j()+" ";b+=1==c.nb?"ASC":"DESC";d<a[z]-1&&(b+=", ")});return b}sa(se[A],function(){var a=new se;a.Wc(this);this.h&&(a.h=this.h[x]());this.g&&(a.g=this.g[x]());a.ka=this.ka;a.ja=this.ja;this.J&&(a.J=this.J[x]());this.ha&&(a.ha=this.ha[x]());this.Ib&&(a.Ib=this.Ib);this.Sb&&(a.Sb=this.Sb);return a});
na(se[A],function(a){se.Za[q][E](this,a);null!=this.Ib&&(this.ka=a[this.Ib.kb()]);null!=this.Sb&&(this.ja=a[this.Sb.kb()]);this.Sd(a);return this});
function ue(a){this.Ba=a}ue[A].Db=H("Ba");ue[A].qf=Bb("plan description");ue[A].$=function(){function a(c){var d=c.$();d&&b.add(d);c.Z()[n](function(b){a(b)})}var b=new P;a(this.Ba);return b.c()};function we(a){var b=new P;a[n](function(a){b[jb](a.$())});return b};

function xe(a,b){this.global=a;this.rb=a.m(sd);this.Bd=b.map(function(a){return a[Da]});this.ag=b.map(function(a){return a.He});this.kf=we(this.ag);this.Ag=this.Lh();this.Pb=Sc()}I=xe[A];I.Lh=function(){return this.Bd[ub](function(a){return!(a instanceof se)})?1:0};
ia(I,function(){var a=new Nd(this[Sa],this.kf.c()),b=[],c=this.ag[x](),d=K(function(){var g=c[Ha]();if(g){var k=this.Bd[b[z]];return g.Db()[Ia](a,k)[B](function(a){b[w](a[0]);return d()})}return Oc()},this);return d()[B](K(function(){return this.rb.Bb(this.Ag,a).R()},this))[B](K(function(){this.Fe(b);return b},this),K(function(b){a.vb();throw b;},this))});I.aa=H("Ag");I.$=H("kf");I.Bc=H("Pb");I.ga=function(){return Mb(this)};I.Fe=zb();
function ye(a,b){xe[E](this,a,b);this.tb=a.m(xd)}L(ye,xe);wa(ye[A],Bb(0));ye[A].Fe=function(a){this.Bd[n](function(b,c){this.tb.Fg(b,a[c])},this)};
function ze(a,b){this.l=a;this.tb=a.m(xd);this.La=a.m(wd);this.qd=new Kd(a);this.yb=b;var c=a.m(yd),d=this.yb.map(function(a){return c[t](a[h]())});this.Ma=new P(d);this.Pb=Sc()}I=ze[A];ia(I,function(){this.qd[xb](this.yb);this.Mc();return Oc()});I.aa=Bb(1);I.$=H("Ma");I.Bc=H("Pb");I.ga=function(){return Mb(this)};wa(I,Bb(1));I.Mc=function(){var a=this.tb.re(this.Ma.c());0!=a[z]&&(a=new ye(this.l,a),this.La.Qb(a))};
function Ae(a){this.l=a;this.rb=a.m(sd);this.La=a.m(wd)}Ae[A].pk=function(){this.rb.subscribe(this.Ee[q](this))};Ae[A].Ee=function(a){a=new ze(this.l,a);this.La.Qb(a)};

function Be(a,b,c){ed[E](this,c,b);this.u=a}L(Be,ed);Be[A].X=function(a){return this.u.Cc(a)};
Be[A].R=function(){Be.Za.R[E](this);var a=this.Gi().uf();if(0==a.W())this.ia[tb]();else{var b=this.u.Qi()+1;this.u.Oi()[db](K(function(c){this.u.pg(b);a[n](function(a){var b=c[a[h]()];a.ee()[n](function(a,c){b[c[r]()]=a.o()});a.ke().c()[n](function(a){b[a[1].id()[r]()]=a[1].o()});a.he().c()[n](function(a){b[a.id()[r]()]=null})});c.__revision__=b;return c},this),K(function(c,d,g){if(c||!d)this.u.pg(b-1),a[n](K(function(a){a=a[h]();this.u.Yj(a,g[a])},this)),this.ia[gb](c);else this.ia[tb]()},this))}return this.ia.oa};
function Ce(){this.ib=new O}I=Ce[A];I.Ti=function(a){if(0==a[z])return this.ib.c();var b=[];a[n](function(a){a=this.ib.get(a,null);null===a||b[w](a)},this);return b};I.getData=H("ib");I.get=function(a){return Oc(this.Ti(a))};I.fg=function(a){a[n](function(a){this.ib.set(a.id(),a)},this)};I.put=function(a){this.fg(a);return Oc()};I.ak=function(a){0==a[z]||a[z]==this.ib.W()?this.ib[Pa]():a[n](function(a){this.ib[m](a)},this)};ka(I,function(a){this.ak(a);return Oc()});
I.Ii=function(){return this.ib.ya()?0:this.ib.G()[ib](function(a,b){return a>b?a:b},0)};
function De(a,b){this.B=a;this.Qg=b;this.kc=-1;this.I=new O;this.Td=null}I=De[A];I.Qi=H("kc");I.pg=Ab("kc");I.Ie=function(a,b){var c=[],d;for(d in b)"__meta__"!=d&&c[w](new Xc(ha(d,10),b[d]));a.fg(c)};I.Qa=function(){var a=Sc();this.u=this.Qg[eb](this.B[pb]());this.u.on("value",K(function(b){a[tb](this.Ij(b))},this));return a.oa};I.jj=function(){Yc=this.I.c().map(function(a){return a.Ii()})[ib](function(a,b){return a>b?a:b},0)+1};I.Ij=function(a){return 0>this.kc?this.lj(a.exportVal()):this.Ee(a.exportVal())};
I.lj=function(a){var b=Sc();null===a?this.u.set(this.Ch(),function(){b[tb]()}):a.__version__==this.B[Fa]()&&(this.kc=a.__revision__,this.B.$a()[n](function(b){var d=new Ce;this.Ie(d,a[b[h]()]);this.I.set(b[h](),d)},this),this.jj(),b[tb]());return b.oa};
I.Ee=function(a){if(a.__revision__==this.kc)return Oc();var b=this.B.$a().map(function(b){b=b[h]();return this.oi(b,a[b])},this)[Ea](function(a){return!a.ya()});this.kc=a.__revision__;b[n](function(b){var d=new Ce;this.Ie(d,a[b[h]()]);this.I.set(b[h](),d)},this);b[z]&&this.Jc(b);return Oc()};
I.oi=function(a,b){var c=new Md(a),d=this.I.get(a).getData(),g=new P(tc(b)[Ea](function(a){return"__meta__"!=a}).map(function(a){return ha(a,10)}));g.bd(d.G()).c()[n](function(a){c.add(new Xc(a,b[a[r]()]))});d.G()[n](function(a){if(g[u](a)){var l=d.get(a);fa[hb](l.o())!=fa[hb](b[a])&&c.modify([l,new Xc(a,b[a[r]()])])}else c[ob](d.get(a))});return c};I.Yj=function(a,b){var c=new Ce;this.Ie(c,b.exportVal());this.I.set(a,c)};
I.Ch=function(){var a={};a.__version__=this.B[Fa]();a.__revision__=1;this.B.$a()[n](function(b){b=b[h]();a[b]={__meta__:""};this.I.set(b,new Ce)},this);return a};I.Bb=function(a,b){return new Be(this,a,b)};I.Cc=function(a){var b=this.I.get(a,null);if(null!==b)return b;throw new Q("DataError","Table "+a+" not found");};I.Oi=H("u");ra(I,zb());ya(I,Ab("Td"));I.Jc=function(a){null!=this.Td&&this.Td(a)};

function R(a,b,c,d){this.u=b;this.Ha=c;this.ab=a;this.Sc=d}J("lf.backstore.IndexedDBRawBackStore",R,void 0);R[A].pe=H("u");R[A].getRawDBInstance=R[A].pe;R[A].qe=H("Ha");R[A].getRawTransaction=R[A].qe;R[A].$d=function(a){return new N(function(b,c){try{this.u.deleteObjectStore(a)}catch(d){c(d);return}b()},this)};R[A].dropTable=R[A].$d;
R[A].Jj=function(a,b,c){return new N(function(d,g){var k;try{var l=this.Ha[lb](a);k=l[rb]()}catch(p){g(p);return}Ba(k,function(){var a=k[Wa];a?(b(a),a[Ra]()):(c(l),d())});ua(k,g)},this)};function Ee(a){var b=null;return b=a instanceof ArrayBuffer?ad(a):a instanceof Date?a[Qa]():a}R[A].Se=function(a,b){function c(a){var c=Fd(a[y]),d=c.ec(),p;for(p in d){var C=Zc(d[p]);b(C);d[p]=C.Ca()}a[xb](c.Ca())}function d(a){var c=Zc(a[y]);b(c);a[xb](c.Ca())}return this.Jj(a,this.Sc?c:d,zb())};
R[A].Nd=function(a,b,c){var d=Ee(c);return this.Se(a,function(a){a.o()[b]=d})};R[A].addTableColumn=R[A].Nd;R[A].ae=function(a,b){return this.Se(a,function(a){delete a.o()[b]})};R[A].dropTableColumn=R[A].ae;R[A].Ke=function(a,b,c){return this.Se(a,function(a){a.o()[c]=a.o()[b];delete a.o()[b]})};R[A].renameTableColumn=R[A].Ke;
R[A].Vi=function(a){var b=[];return new N(function(c,d){var g;try{g=this.Ha[lb](a)[rb]()}catch(k){d(k);return}Ba(g,K(function(){var a=g[Wa];if(a){if(this.Sc){var d=Fd(a[y]).ec(),k;for(k in d)b[w](d[k])}else b[w](a[y]);a[Ra]()}else c(b)},this));ua(g,d)},this)};R[A].Zb=function(a){var b={};qc(a,K(function(a,d){b[d]=Ee(a)},this));return $c(b)};R[A].createRow=R[A].Zb;R[A].se=H("ab");R[A].getVersion=R[A].se;
pa(R[A],function(){for(var a=this.u[Ma],b=[],c=0;c<a[z];++c){var d=a[kb](c);b[w](this.cd(d))}return Qc(b)[B](function(b){var c={};b[n](function(b,d){c[a[kb](d)]=b});return c})});pa(R[A],R[A].dump);R[A].cd=function(a){return this.Vi(a)[B](function(a){return a.map(function(a){return a[y]})})};
function Fe(a,b){this.O=a;this.Cb=b}I=Fe[A];I.get=function(a){if(0==a[z])return this.ge();a=a.map(function(a){return new N(function(c,d){var g;try{g=this.O.get(a)}catch(k){d(k);return}ua(g,d);Ba(g,K(function(a){c(this.Cb(a[sb][Wa]))},this))},this)},this);return Qc(a)};I.ge=function(){return new N(function(a,b){var c=[],d;try{d=this.O[rb]()}catch(g){b(g);return}ua(d,b);Ba(d,K(function(){var b=d[Wa];b?(c[w](this.Cb(b[y])),b[Ra]()):a(c)},this))},this)};
I.Mb=function(a){return new N(function(b,c){var d;try{d=a()}catch(g){c(g);return}Ba(d,b);ua(d,c)},this)};I.put=function(a){if(0==a[z])return Oc();a=a.map(function(a){return this.Mb(K(function(){return this.O.put(a.Ca())},this))},this);return Qc(a)};
ka(I,function(a){return new N(function(b,c){var d=this.O.count();Ba(d,K(function(d){if(0==a[z]||d[sb][Wa]==a[z])return this.Mb(K(function(){return this.O[Pa]()},this))[B](b,c);d=a.map(function(a){return this.Mb(K(function(){return this.O[ob](a)},this))},this);Qc(d)[B](b,c)},this));ua(d,c)},this)});
function Ge(a,b,c,d,g){ed[E](this,c,d);this.l=a;this.Ha=b;this.Sc=g;this.Ha.oncomplete=K(this.ia[tb],this.ia);this.Ha.onabort=K(this.ia[gb],this.ia)}L(Ge,ed);Ge[A].X=function(a,b,c){return this.Sc?(c=null!=c?c:0,a=this.Ha[lb](a),new Gd(a,b,0==c?Rb(Hd,this.l):Id)):new Fe(this.Ha[lb](a),b)};
function He(a,b){this.l=a;this.B=b;this.Tc=b.bg().Nh||!1}I=He[A];
I.Qa=function(a){var b=aa.indexedDB||aa.mozIndexedDB||aa.webkitIndexedDB||aa.msIndexedDB;if(null==b)throw new Q("NotSupportedError","IndexedDB not supported by platform.");var c=a||function(){return Oc()};return new N(function(a,g){var k;try{k=b.open(this.B[pb](),this.B[Fa]())}catch(l){g(l);return}ua(k,g);k.onupgradeneeded=K(function(a){this.Gj(c,a)[B](zb(),g)},this);Ba(k,K(function(b){this.u=b[sb][Wa];this.Ne()[B](K(function(b){Yc=b+1;a(this.u)},this))},this))},this)};
I.Gj=function(a,b){var c=b[sb][Wa],d=b[sb][db],g=new R(b.oldVersion,c,d,this.Tc);this.Zj(c,d);this.Gh(c,d);return a(g)};I.Zj=function(a){for(var b=[],c=0;c<a[Ma][z];++c){var d=a[Ma][kb](c);-1!=d[mb](".")&&b[w](d)}b[n](function(b){try{a.deleteObjectStore(b)}catch(c){}})};I.Gh=function(a,b){this.B.$a()[n](Rb(this.Dh,a,b),this)};I.Dh=function(a,b,c){a[Ma][u](c[h]())||a.createObjectStore(c[h](),{keyPath:"id"});c.Nb()&&(c.Da()[n](function(c){this.wc(a,b,c.j(),"btree")},this),this.wc(a,b,c.Eb(),"rowid"))};
I.wc=function(a,b,c,d){a[Ma][u](c)||(a.createObjectStore(c,{keyPath:"id"}),a=b[lb](c),(this.Tc?new Gd(a,Zc,Id):new Fe(a,Zc)).put([new cd(new bd(d))]))};I.Bb=function(a,b){var c=b.$().c().map(function(a){return a[h]()});b.Ei()[n](function(a){c[w](a)});var d=this.u[db](c,0==a?"readonly":"readwrite");return new Ge(this.l,d,b,a,this.Tc)};
I.Ne=function(a){function b(){if(0==c[z])return Oc();var a=c[Ha]();return l(a)[B](b)}var c=this.B.$a().map(function(a){return a[h]()}),d=this.u,g=0,k=K(function(a){return this.Tc?(a=Fd(a[y]),tc(a.ec())[ib](function(a,b){return ea.max(a,b)},0)):a.key},this),l=K(function(b){return new N(function(c,l){var ve;try{ve=(a||d[db]([b]))[lb](b)[rb](null,"prev")}catch(Sg){l(Sg);return}Ba(ve,function(a){(a=a[sb][Wa])&&(g=ea.max(g,k(a)));c(g)});ua(ve,function(){c(g)})},this)},this);return new N(function(a){b()[B](function(){a(g)})})};
ra(I,function(){this.u[ab]()});I.Cc=function(){throw new Q("SyntaxError","IndexedDB tables needs to be acquired from transactions");};ya(I,zb());I.Jc=zb();



function Ie(a,b,c){ed[E](this,c,b);this.O=a;0==b&&this.ia[tb]()}L(Ie,ed);Ie[A].X=function(a){return this.O.Cc(a)};Ie[A].R=function(){Ie.Za.R[E](this);this.ia[tb]();return this.ia.oa};
function Je(a){this.B=a;this.I=new O}I=Je[A];I.Qa=function(){this.B.$a()[n](this.kj,this);return Oc()};I.Cc=function(a){var b=this.I.get(a,null);if(null===b)throw new Q("DataError","Table "+a+" does not exist.");return b};I.Bb=function(a,b){return new Ie(this,a,b)};I.lf=function(a){if(!this.I.w(a)){var b=new Ce;this.I.set(a,b);return b}return null};I.kj=function(a){this.lf(a[h]());a.Nb()&&(a.Da()[n](function(a){this.wc(a.j(),"btree")},this),this.wc(a.Eb(),"rowid"))};
I.wc=function(a,b){var c=this.lf(a);null===c||c.put([new cd(new bd(b))])};ra(I,zb());ya(I,zb());I.Jc=zb();
function Ke(a){Je[E](this,a);this.wd=null}L(Ke,Je);ya(Ke[A],function(a){null===this.wd&&(this.wd=a)});Ke[A].Jc=function(a){null===this.wd||this.wd(a)};
function Le(a,b,c){this.Ha=a;this.A=b;this.Cb=c}Le[A].get=function(a){var b=this.Cb;this.Ha.Fa("SELECT id, value FROM "+this.A+" "+(0==a[z]?"":"WHERE id IN ("+a[G](",")+")"),[],function(a){for(var d=a[fb][z],g=e(d),k=0;k<d;++k)g[k]=b({id:a[fb][kb](k).id,value:fa.parse(a[fb][kb](k)[y])});return g});return this.Ha.R()};Le[A].put=function(a){if(0==a[z])return Oc();var b="INSERT OR REPLACE INTO "+this.A+"(id, value) VALUES (?, ?)";a[n](function(a){this.Ha.Fa(b,[a.id(),fa[hb](a.o())])},this);return Oc()};
ka(Le[A],function(a){this.Ha.Fa("DELETE FROM "+this.A+" "+(0==a[z]?"":"WHERE id IN ("+a[G](",")+")"),[]);return Oc()});
function Me(a,b,c){ed[E](this,b,c);this.u=a;this.I=new O;this.Wd=[]}L(Me,ed);Me[A].X=function(a,b){var c=this.I.get(a,null);null===c&&(c=new Le(this,a,b),this.I.set(a,c));return c};Me[A].Fa=function(a,b,c){this.Wd[w]({qk:a,Kj:b,transform:c})};
Me[A].R=function(){Me.Za.R[E](this);var a,b,c=this.ia[gb][q](this.ia),d=function(a,b){this.ia[gb](b)}[q](this),g=K(function(c,l){a=l;if(this.Wd[z]){var p=this.Wd[Ha]();b=p.transform;c.executeSql(p.qk,p.Kj,g,d)}else p=a,null!=b&&null!=a&&(p=b(a)),this.ia[tb](p)},this);0==this.zg?this.u.readTransaction(g,c):this.u[db](g,c);return this.ia.oa};
function S(a,b,c){this.u=c;this.l=a;this.ab=b}J("lf.backstore.WebSqlRawBackStore",S,void 0);S[A].pe=H("u");S[A].getRawDBInstance=S[A].pe;S[A].qe=function(){throw new Q("NotSupportedError","Use the raw instance to create transaction instead.");};S[A].getRawTransaction=S[A].qe;S[A].ad=function(){return new Me(this.u,new Nd(this.l,[]),1)};S[A].$d=function(a){var b=this.ad();b.Fa("DROP TABLE "+a,[]);return b.R()};S[A].dropTable=S[A].$d;
S[A].cd=function(a){var b=this.ad();b.Fa("SELECT id, value FROM "+a,[]);return b.R()[B](function(a){for(var b=a[fb][z],g=e(b),k=0;k<b;++k)g[k]={id:a[fb][kb](k).id,value:fa.parse(a[fb][kb](k)[y])};return Oc(g)})};S[A].Re=function(a,b){var c=this.ad(),d="UPDATE "+a+" SET value=? WHERE id=?";return this.cd(a)[B](function(a){a[n](function(a){a=b(a);c.Fa(d,[fa[hb](a[y]),a.id])});return c.R()})};S[A].Nd=function(a,b,c){var d=Ee(c);return this.Re(a,function(a){a[y][b]=d;return a})};S[A].addTableColumn=S[A].Nd;
S[A].ae=function(a,b){return this.Re(a,function(a){delete a[y][b];return a})};S[A].dropTableColumn=S[A].ae;S[A].Ke=function(a,b,c){return this.Re(a,function(a){a[y][c]=a[y][b];delete a[y][b];return a})};S[A].renameTableColumn=S[A].Ke;S[A].Zb=function(a){var b={},c;for(c in a)b[c]=Ee(a[c]);return $c(b)};S[A].createRow=S[A].Zb;S[A].se=H("ab");S[A].getVersion=S[A].se;
function Ne(a){a.Fa('SELECT tbl_name FROM sqlite_master WHERE type="table"',[],function(a){for(var c=e(a[fb][z]),d=0;d<c[z];++d)c[d]=a[fb][kb](d).tbl_name;return c})}pa(S[A],function(){var a=Sc(),b=this.ad();Ne(b);var c={};b.R()[B](K(function(b){b=b[Ea](function(a){return"__lf_ver"!=a&&"__WebKitDatabaseInfoTable__"!=a}).map(function(a){return this.cd(a)[B](function(b){c[a]=b})},this);Qc(b)[B](function(){a[tb](c)})},this));return a.oa});pa(S[A],S[A].dump);
function Oe(a,b,c){this.l=a;this.B=b;this.lk=c||4194304}I=Oe[A];I.gd=function(){return new Nd(this.l,[])};I.Qa=function(a){if(null==aa.openDatabase)throw new Q("NotSupportedError","WebSql not supported by platform.");var b=a||function(){return Oc()};return new N(K(function(a,d){try{var g=aa.openDatabase(this.B[pb](),"",this.B[pb](),this.lk);if(null!=g)this.u=g,this.th(b)[B](a,d);else throw new Q("NotSupportedError","Unable to open database.");}catch(k){d(k)}},this))};
I.th=function(a){var b=Sc(),c=new Me(this.u,this.gd(),1);c.Fa("CREATE TABLE IF NOT EXISTS __lf_ver(id INTEGER PRIMARY KEY, v INTEGER)",[]);c.Fa("SELECT v FROM __lf_ver WHERE id = 0",[]);c.R()[B](K(function(c){var g=0;c[fb][z]&&(g=c[fb][kb](0).v);g<this.B[Fa]()?this.Hj(a,g)[B](b[tb][q](b)):g>this.B[Fa]()?b[gb](new Q("DataError","Attempt to open a newer database with old code")):b[tb]()},this));return b.oa};
I.Bb=function(a,b){if(null!=this.u)return new Me(this.u,b,a);throw new Q("DataError","Attempt to create transaction from uninitialized DB");};ra(I,zb());I.Cc=function(){throw new Q("SyntaxError","WebSQL tables needs to be acquired from transactions");};I.Uf=function(){throw new Q("NotSupportedError","WebSQL does not support change notification");};ya(I,function(){this.Uf()});I.Jc=function(){this.Uf()};
I.Hj=function(a,b){var c=Sc();this.Nj()[B](K(function(){a(new S(this.l,b,this.u))[B](K(function(){return this.Ne()},this))[B](c[tb][q](c))},this),c[gb][q](c));return c.oa};
I.Nj=function(){var a=this.B.$a(),b=new Me(this.u,this.gd(),1),c=new Me(this.u,this.gd(),1);b.Fa("INSERT OR REPLACE INTO __lf_ver VALUES (0, ?)",[this.B[Fa]()]);Ne(b);return b.R()[B](function(b){b[Ea](function(a){return-1!=a[mb](".")})[n](function(a){c.Fa("DROP TABLE "+a,[])});var g=b[Ea](function(a){return-1==a[mb](".")});a.map(function(a){return a[h]()})[Ea](function(a){return-1==g[mb](a)})[n](function(a){c.Fa("CREATE TABLE "+a+"(id INTEGER PRIMARY KEY, value TEXT)",[])});return c.R()})};
I.Ne=function(){var a=0,b=Sc(),c=K(function(b){var c=new Me(this.u,this.gd(),0);c.Fa("SELECT MAX(id) FROM "+b,[]);return c.R()[B](function(b){b=b[fb][kb](0)[0];a=ea.max(b,a)})},this),d=this.B.$a().map(function(a){return c(a[h]())});Qc(d)[B](function(){b[tb](a)},function(a){b[gb](a)});return b.oa};

function Pe(a){this.f=new O;this.vg=new O;this.Rf=a||Number.MAX_VALUE}I=Pe[A];I.nd=function(a){var b=this.vg.get(a,null);null===b&&(b=new P,this.vg.set(a,b));return b};I.set=function(a,b){var c=this.nd(a);b[n](K(function(a){this.f.set(a.id(),a);c.add(a.id())},this));this.f.W()};I.get=function(a){return a.map(K(function(a){return this.f.get(a,null)},this))};
I.Pa=function(a,b,c){var d=[],g=ea.min(b,c),k=ea.max(b,c);a=this.nd(a);if(a.W()<k-g)a.c()[n](function(a){a>=g&&a<=k&&(a=this.f.get(a),M(null!=a,"Inconsistent cache"),d[w](a))},this);else for(b=g;b<=k;++b)a[u](b)&&(c=this.f.get(b),M(null!=c,"Inconsistent cache"),d[w](c));return d};ka(I,function(a,b){var c=this.nd(a);b[n](function(a){this.f[m](a);c[m](a)},this)});I.W=function(a){return null!=a?this.nd(a).W():this.f.W()};
function Qe(a,b,c,d){a=b?a.reverse():a;if(null==c&&null==d)return a;c=ea.min(Db(c)?c:a[z],a[z]);if(0==c)return[];d=ea.min(d||0,a[z]);return a[x](d,d+c)};
function Re(a,b,c,d){this.A=a;this.L=b;this.Te=c;if(d){a=511;a*=a*a;if(d[z]>=a)throw new Q("TooManyRowsError","B-Tree implementation supports at most "+a+" rows.");d=Se(this,d);this.pa=d=Te(d)}else this[Pa]()}var Ue=[];I=Re[A];ja(I,H("A"));f(I,function(){return this.pa[r]()});I.add=function(a,b){this.pa=this.pa.mb(a,b)};I.set=function(a,b){this.pa=this.pa.mb(a,b,!0)};ka(I,function(a,b){this.pa=this.pa[m](a,b)});I.get=function(a){return this.pa.get(a)};
I.$c=function(a){return null!=a?this.Pa([a])[z]:this.Pa()[z]};I.Pa=function(a,b,c,d){var g=this.pa.kd().b[0];if(!Db(g)||0==c)return Ue;var k=(c||0)+(d||0),k=0<k&&!b?k:Number.POSITIVE_INFINITY,l=[];(Db(a)?this.L.sg(a):[this.L.fe()])[n](function(a){for(var b=this.L.Cd(a),b=this.L.xe(a)?g:b[0],b=this.pa.tf(b),c=0;null!=b&&l[z]<k;)0!=b.Pa(a,l)?c=0:c++,b=2==c?null:b[Ya]()},this);return Qe(l,b,c,d)};ma(I,function(){this.pa=Ve(this)});I.w=function(a){return this.pa.w(a)};
I.min=function(){return this.Ic(K(this.L.min,this.L))};I.max=function(){return this.Ic(K(this.L.max,this.L))};I.Ic=function(a){var b=this.pa.kd(),c=this.pa.yf();if(0==b.b[z]&&0==c.b[z])return[null,null];var d=b.b[0],b=b.P[0],g=c.b[c.b[z]-1],c=c.P[c.b[z]-1];return 1==a(d,g)?[d,this.Te?[b]:b]:[g,this.Te?[c]:c]};I.Fc=H("Te");I.vc=H("L");I.Ce=function(a,b){return null!=a?-1==this.L[Va](a,b):!1};I.Ia=function(a,b){return null!=a?0==this.L[Va](a,b):!1};
I.Ca=function(){for(var a=[],b=this.pa.kd();b;)a[w](new Xc(b.sa,[b.b,b.P])),b=b.ua;return a};function We(a,b,c,d){a=new Re(b,a,c);d=Xe(d,a);a.pa=d;return a}function Ye(a,b){this.sa=a;this.V=b;this.gb=0;this.ua=this.ob=this.F=null;this.b=[];this.P=[];this.i=[]}function Ve(a){return new Ye(Yc++,a)}I=Ye[A];I.ba=function(){return 0==this.gb};I.Kf=function(){return null==this.F};qa(I,H("ua"));
function Ze(a){function b(a){return null!=a?a.sa[r]():"_"}var c=a.sa+"["+a.b[G]("|")+"]",d=a.i.map(function(a){return a.sa})[G]("|"),g=a.P[G]("/"),k=b(a.ob)+"{",k=a.ba()?k+g:k+d,k=k+"}"+b(a.F);a.ua&&(a=Ze(a.ua),c=c+"  "+a[0],k=k+"  "+a[1]);return[c,k]}f(I,function(){var a="",b=Ze(this),a=a+(b[0]+"\n"+b[1]+"\n");this.i[z]&&(a+=this.i[0][r]());return a});I.kd=function(){return this.ba()?this:this.i[0].kd()};I.yf=function(){return this.ba()?this:this.i[this.i[z]-1].yf()};
function $e(a,b){b&&(b.ob=a);a&&(a.ua=b)}function Se(a,b){for(var c=b[z],d=0,g=Ve(a),k=g;0<c;){var l=768<=c?511:257<=c&&511>=c?c:257,p=b[x](d,d+l);g.b=p.map(function(a){return a.key});g.P=p.map(function(a){return a[y]});d+=l;c-=l;0<c&&(l=Ve(g.V),$e(g,l),g=l)}return k}function af(a){var b=a[0],c=Ve(b.V);c.gb=b.gb+1;c.i=a;for(b=0;b<a[z];++b)a[b].F=c,0<b&&c.b[w](a[b].b[0]);return c}
function Te(a){var b=a,c=[];do c[w](b),b=b.ua;while(b);if(512>=c[z])b=af(c);else{var d=c[z],g=0,b=Ve(a.V);for(b.gb=a.gb+2;0<d;){a=768<=d?511:257<=d&&511>=d?d:257;var k=c[x](g,g+a),l=af(k);l.F=b;b.i[z]&&(b.b[w](k[0].b[0]),$e(b.i[b.i[z]-1],l));b.i[w](l);g+=a;d-=a}}return b}I.get=function(a){var b=this.Nc(a);if(this.ba()){var c=Ue;this.V.Ia(this.b[b],a)&&(c=c[Ka](this.P[b]));return c}b=this.V.Ia(this.b[b],a)?b+1:b;return this.i[b].get(a)};
I.w=function(a){var b=this.Nc(a);return this.V.Ia(this.b[b],a)?!0:this.ba()?!1:this.i[b].w(a)};ka(I,function(a,b){this.of(a,-1,b);if(this.Kf()){var c=this;1==this.i[z]&&(c=this.i[0],c.F=null);return c}return this});function bf(a){return a.ba()?a.b[0]:bf(a.i[0])}I.ed=function(){this.b=[];for(var a=1;a<this.i[z];++a)this.b[w](bf(this.i[a]))};
I.of=function(a,b,c){var d=this.Nc(a);if(!this.ba()){var g=this.V.Ia(this.b[d],a)?d+1:d;if(this.i[g].of(a,g,c))this.ed();else return!1}else if(!this.V.Ia(this.b[d],a))return!1;if(this.b[z]>d&&this.V.Ia(this.b[d],a)){if(Db(c)&&!this.V.Fc()&&this.ba()&&(a=this.P[d],c=lc(a,mc,!1,c),0<=c&&fc(a,c),this.P[d][z]))return!1;this.b[F](d,1);this.ba()&&this.P[F](d,1)}256>this.b[z]&&!this.Kf()&&(this.rk()||this.Aj(b));return!0};
I.rk=function(){var a=null,b,c,d;if(this.ua&&256<this.ua.b[z])a=this.ua,c=b=0,d=this.b[z]+1;else if(this.ob&&256<this.ob.b[z])a=this.ob,b=this.ob.b[z]-1,c=this.ba()?b:b+1,d=0;else return!1;this.b[F](d,0,a.b[b]);a.b[F](b,1);b=this.ba()?this.P:this.i;var g=null;this.ba()?g=a.P:(g=a.i,g[c].F=this);b[F](d,0,g[c]);g[F](c,1);a.ba()||(a.ed(),this.ed());return!0};
I.Aj=function(a){var b,c,d;this.ua&&511>this.ua.b[z]?(b=this.ua,d=c=0):this.ob&&(b=this.ob,c=b.b[z],d=b.ba()?b.P[z]:b.i[z]);c=[c,0][Ka](this.b);e[A][F][v](b.b,c);c=null;this.ba()?c=this.P:(c=this.i,c[n](function(a){a.F=b}));c=[d,0][Ka](c);e[A][F][v](b.ba()?b.P:b.i,c);$e(this.ob,this.ua);b.ba()||b.ed();-1!=a&&(this.F.b[F](a,1),this.F.i[F](a,1))};
I.mb=function(a,b,c){var d=this.Nc(a);if(this.ba()){if(this.V.Ia(this.b[d],a)){if(c)return this.P[d]=this.V.Fc()?b:[b],this;if(this.V.Fc())throw new Q("ConstraintError","Duplicate key not allowed");if(this.P[d])return nc(this.P[d],b),this;this.P[d]=[b]}this.b[F](d,0,a);this.P[F](d,0,this.V.Fc()?b:[b]);return 512==this.b[z]?this.nk():this}d=this.V.Ia(this.b[d],a)?d+1:d;a=this.i[d].mb(a,b,c);a.ba()||1!=a.b[z]||(this.b[F](d,0,a.b[0]),a.i[1].F=this,a.i[0].F=this,this.i[F](d,1,a.i[1]),this.i[F](d,0,a.i[0]));
return 512==this.b[z]?this.mk():this};I.nk=function(){var a=Ve(this.V),b=Ve(this.V);b.gb=1;b.b=[this.b[256]];b.i=[this,a];b.F=this.F;this.F=b;a.b=this.b[F](256);a.P=this.P[F](256);a.F=b;$e(a,this.ua);$e(this,a);return b};I.mk=function(){var a=Ve(this.V),b=Ve(this.V);a.F=this.F;a.gb=this.gb+1;a.b=[this.b[256]];a.i=[this,b];this.b[F](256,1);b.F=a;b.gb=this.gb;b.b=this.b[F](256);b.i=this.i[F](257);b.i[n](function(a){a.F=b});this.F=a;$e(b,this.ua);$e(this,b);return a};
I.Nc=function(a){for(var b=0,c=this.b[z];b<c;){var d=b+c>>1;this.V.Ce(this.b[d],a)?b=d+1:c=d}return b};I.tf=function(a){if(!this.ba()){var b=this.Nc(a);this.V.Ia(this.b[b],a)&&b++;return this.i[b].tf(a)}return this};
I.Pa=function(a,b){var c=-1,d=this.b[z]-1,g=this.V.vc(),k=K(function(b){for(;b<this.b[z];++b){var k=g.fc(this.b[b],a);if(-1!=c){if(!k){d=b-1;break}}else k&&(c=b)}},this);g.fc(this.b[0],a)?c=0:k(1);if(-1==c)return 0;g.fc(this.b[d],a)||k(c);return d==this.b[z]-1?this.af(b,this.P[x](c)):d>=c?this.af(b,this.P[x](c,d+1)):0};I.af=function(a,b){var c=this.V.Fc()?b:pc(b);a[w][v](a,c);return c[z]};
function Xe(a,b){for(var c=a.map(function(a){var c=new Ye(a.id(),b);c.b=a.o()[0];c.P=a.o()[1];return c}),d=0;d<c[z]-1;++d)$e(c[d],c[d+1]);return 1<c[z]?Te(c[0]):c[0]};
function cf(a){if(1==a.h[z])return new df(a.h[0].nb);a=a.h.map(function(a){return a.nb});return new ef(a)}function df(a){this.Xc=0==a?ff:gf;this.De=0==a?function(a){return null!=a?a.reverse():null}:function(a){return a||null};this.Yf=0==a?hf:jf}L(df,Jd);function gf(a,b){return a>b?1:a<b?-1:0}function ff(a,b){return gf(b,a)}function jf(a,b){return Sd(a,b)}function hf(a,b){return Sd(b,a)}I=df[A];
I.Xd=function(a,b){var c=this.De(b),d=[null===c.g,null===c.s];if(!d[0]){var g=this.Xc(a,c.g);d[0]=c.Y?1==g:-1!=g}d[1]||(g=this.Xc(a,c.s),d[1]=c.ca?-1==g:1!=g);return d};I.compare=function(a,b){return this.Xc(a,b)};I.min=function(a,b){return a<b?1:a==b?0:-1};I.max=function(a,b){return a>b?1:a==b?0:-1};I.fc=function(a,b){var c=this.Xd(a,b);return c[0]&&c[1]};I.fe=function(){return Rd()};I.Xf=function(a,b){return this.Yf(a,b)};
I.sg=function(a){return a[Ea](function(a){return null!==a})[vb](K(function(a,c){return this.Yf(a,c)},this))};I.xe=function(a){return Hb(this.De(a).g)};I.Cd=function(a){a=this.De(a);return[a.g,a.s]};f(I,function(){return this.Xc==ff?"SimpleComparator_DESC":"SimpleComparator_ASC"});function ef(a){this.wa=a.map(function(a){return new df(a)})}L(ef,Jd);I=ef[A];I.de=function(a,b,c){for(var d=0,g=0;g<this.wa[z]&&0==d;++g)d=c(this.wa[g],a[g],b[g]);return d};
I.compare=function(a,b){return this.de(a,b,function(a,b,g){return a[Va](b,g)})};I.min=function(a,b){return this.de(a,b,function(a,b,g){return a.min(b,g)})};I.max=function(a,b){return this.de(a,b,function(a,b,g){return a.max(b,g)})};I.Xd=function(a,b){for(var c=[!0,!0],d=0;d<this.wa[z]&&(c[0]||c[1]);++d){var g=this.wa[d].Xd(a[d],b[d]);c[0]=c[0]&&g[0];c[1]=c[1]&&g[1]}return c};I.fc=function(a,b){for(var c=!0,d=0;d<this.wa[z]&&c;++d)c=this.wa[d].fc(a[d],b[d]);return c};I.fe=function(){return this.wa.map(function(a){return a.fe()})};
I.sg=function(a){var b=a[Ea](function(a){return a[wb](Ib)});a=e(this.wa[z]);for(var c=0;c<a[z];c++)a[c]=b.map(function(a){return a[c]});a[n](function(a,b){a[vb](K(function(a,c){return this.wa[b].Xf(a,c)},this))},this);b=e(b[z]);for(c=0;c<b[z];c++)b[c]=a.map(function(a){return a[c]});return b[vb](K(function(a,b){for(var c=0,l=0;l<this.wa[z]&&0==c;++l)c=this.wa[l].Xf(a[l],b[l]);return c},this))};I.xe=function(a){return this.wa[0].xe(a[0])};
I.Cd=function(a){var b=a.map(function(a,b){return this.wa[b].Cd(a)[0]},this);a=a.map(function(a,b){return this.wa[b].Cd(a)[1]},this);return[b,a]};
function kf(a){this.ta=a;this.Ua=new P}I=kf[A];ja(I,function(){return this.ta[h]()});I.add=function(a,b){null===a?this.Ua.add(b):this.ta.add(a,b)};I.set=function(a,b){null===a?(this.Ua[Pa](),this.Ua.add(b)):this.ta.set(a,b)};ka(I,function(a,b){null===a?b?this.Ua[m](b):this.Ua[Pa]():this.ta[m](a,b)});I.get=function(a){return null===a?this.Ua.c():this.ta.get(a)};I.$c=function(a){return this.ta.$c(a)};I.Pa=function(a,b,c,d){b=this.ta.Pa(a,b,c,d);return null!=a?b:b[Ka](this.Ua.c())};
ma(I,function(){this.Ua[Pa]();this.ta[Pa]()});I.w=function(a){return null===a?!this.Ua.ya():this.ta.w(a)};I.min=function(){return this.ta.min()};I.max=function(){return this.ta.max()};I.Ca=function(){return[new Xc(-2,this.Ua.c())][Ka](this.ta.Ca())};I.vc=function(){return this.ta.vc()};
function mf(a){this.A=a;this.pb=new P;this.L=new df(1)}I=mf[A];ja(I,H("A"));I.add=function(a){if("number"!=typeof a)throw new Q("DataError","Row id must be numbers");this.pb.add(a)};I.set=function(a,b){this.add(a,b)};ka(I,function(a){this.pb[m](a)});I.get=function(a){return this.w(a)?[a]:[]};I.min=function(){return this.Ic(K(this.L.min,this.L))};I.max=function(){return this.Ic(K(this.L.max,this.L))};
I.Ic=function(a){if(this.pb.ya())return[null,null];var b=this.pb.c()[ib](K(function(b,d){return null===b||1==a(d,b)?d:b},this),null);return[b,[b]]};I.$c=function(){return this.pb.W()};I.Pa=function(a,b,c,d){var g=a||[Rd()];a=this.pb.c()[Ea](function(a){return g[ub](function(b){return this.L.fc(a,b)},this)},this);return Qe(a,b,c,d)};ma(I,function(){this.pb[Pa]()});I.w=function(a){return this.pb[u](a)};I.Ca=function(){return[new Xc(0,this.pb.c())]};I.vc=H("L");
function nf(a,b){var c=new mf(a);b[0].o()[n](function(a){c.add(a,a)});return c};
function of(a){this.l=a;this.rb=a.m(sd);this.N=a.m(ud);this.la=a.m(td)}I=of[A];I.Qa=function(a){var b=a.$a(),c=K(function(){if(0==b[z])return Oc();var a=b[Ha]();return(a.Nb()?this.di(a):this.ei(a))[B](c)},this);return c()};I.ei=function(a){var b=new Nd(this.l,[a]);return this.rb.Bb(0,b).X(a[h](),K(a.$b,a)).get([])[B](K(function(b){this.la.set(a[h](),b);this.Uj(a,b)},this))};I.Uj=function(a,b){var c=this.N.Ui(a[h]());b[n](function(a){c[n](function(b){var c=a.Gc(b[h]());b.add(c,a.id())})})};
I.di=function(a){var b=new Nd(this.l,[a]),c=this.rb.Bb(0,b),b=c.X(a[h](),a.$b).get([])[B](K(function(b){this.la.set(a[h](),b)},this)),d=a.Da().map(function(a){return this.Vj(a,c)},this)[Ka](this.Wj(a,c));return Qc(d[Ka](b))};
I.Vj=function(a,b){var c=b.X(a.j(),Zc,1),d=cf(a);return c.get([])[B](K(function(b){M("btree"==b[0].o().type);if(1<b[z]){if(a.Cf()){var c=We[q](void 0,d,a.j(),a.rd),l=b[x](1),p=-1;for(b=0;b<l[z];++b)if(-2==l[b].id()){p=b;break}if(-1==p)throw new Q("DataError","Data corruption detected");b=l[p].o();l=l[x](0);l[F](p,1);c=c(l);c=new kf(c);c.Ua[jb](b)}else c=We(d,a.j(),a.rd,b[x](1));this.N.set(c)}},this))};
I.Wj=function(a,b){return b.X(a.Eb(),Zc,1).get([])[B](K(function(b){M("rowid"==b[0].o().type);1<b[z]&&(b=nf(a.Eb(),b[x](1)),this.N.set(b))},this))};


function pf(){this.O=new O}pf[A].Qa=function(a){a.$a()[n](function(a){var c=a.Eb();if(null===this.get(c)){var d=new mf(c);this.O.set(c,d)}a.Da()[n](function(a){this.O.set(a.j(),qf(a))},this)},this);return Oc()};function qf(a){var b=cf(a),b=new Re(a.j(),b,a.rd);return a.Cf()?new kf(b):b}pf[A].get=function(a){return this.O.get(a,null)};pf[A].set=function(a){return this.O.set(a[h](),a)};pf[A].Ui=function(a){var b=[],c=a+".";this.O.G()[n](function(a){0==a[mb](c)&&b[w](this.O.get(a))},this);return b};
function rf(a){this.Va=[];Db(a)&&this.add(a)}I=rf[A];f(I,function(){return this.Va.map(function(a){return a[r]()})[G](",")});I.w=function(a){return this.Va[ub](function(b){return b[u](a)})};I.c=H("Va");
I.add=function(a){if(0!=a[z])if(a=this.Va[Ka](a),1==a[z])this.Va=a;else{a[vb](Sd);for(var b=[],c=a[0],d=1;d<a[z];++d)if(c.Zf(a[d])){var g=a[d],k=Rd();if(null!==c.g&&null!==g.g){var l=Qd(c.g,g.g,!0);1!=l?(k.g=c.g,k.Y=0!=l?c.Y:c.Y&&g.Y):(k.g=g.g,k.Y=g.Y)}null!==c.s&&null!==g.s&&(l=Qd(c.s,g.s,!1),-1!=l?(k.s=c.s,k.ca=0!=l?c.ca:c.ca&&g.ca):(k.s=g.s,k.ca=g.ca));c=k}else b[w](c),c=a[d];b[w](c);this.Va=b}};
I.xc=function(a){return this.Va[z]==a.Va[z]?0==this.Va[z]||this.Va[wb](function(b,c){return b.xc(a.Va[c])}):!1};function sf(a,b){var c=[];a.c().map(function(a){return b.c().map(function(b){var c;if(a.Zf(b)){c=Rd();var l=Qd(a.g,b.g,!0),l=0==l?a.Y?a:b:-1!=l?a:b;c.g=l.g;c.Y=l.Y;null===a.s||null===b.s?b=null===a.s?b:a:(l=Qd(a.s,b.s,!1),b=0==l?a.ca?a:b:-1==l?a:b);c.s=b.s;c.ca=b.ca}else c=null;return c})})[n](function(a){c=c[Ka](a)});return new rf(c[Ea](function(a){return null!==a}))};
function tf(a,b){var c=[],d=null,g=null;a.mc(function(a){var l=b(a);null==a[Ga]()?g=l:d.ea(l);var p=a[Ga]();null!==p&&p.ra()==d.ra()&&(p=c[mb](d),-1!=p&&c[F](p,1));1<a.ra()&&c[w](l);d=a.Hf()?c[c[z]-1]:l});return g}function uf(a){return vf(a,function(a){return a.Hf()})}function wf(a){var b=a[Ga](),c=0;null!==b&&(c=b.Z()[mb](a),b[qb](a));var d=a.Z()[x]();d[n](function(d,k){a[qb](d);null===b||b.oc(d,c+k)});return{parent:b,children:d}}
function xf(a,b){a.Z()[x]()[n](function(c){a[qb](c);b.ea(c)});a.ea(b)}function yf(a){M(1==a.ra());var b=a.jb(0);M(1==b.ra());wf(a);xf(b,a);return b}function zf(a,b,c){M(1==a.ra());var d=a.jb(0);M(1<d.ra());var g=d.Z()[x]();if(!g[ub](function(a){return b(a)}))return a;wf(a);g[n](function(g,l){if(b(g)){var p=c(a);d.Ed(l);p.ea(g);d.oc(p,l)}});return d}function Af(a,b,c,d){var g=a[Ga]();null!==g&&(a=g.Z()[mb](a),g.Ed(a),g.oc(c,a));b.Z()[x]()[n](function(a){b[qb](a);d.ea(a)});return c}
function vf(a,b,c){function d(a){b(a)&&g[w](a);null!=c&&c(a)||a.Z()[n](d)}var g=[];d(a);return g}function Bf(a,b){var c=b||function(a){return a[r]()+"\n"},d="";a.mc(function(a){for(var b=0;b<a.Ci();b++)d+="-";d+=c(a)});return d};

function Cf(a){ne[E](this);this.Kb=a;this.Sa=!1}L(Cf,ne);I=Cf[A];I.Ab=function(){return tf(this,function(a){if(a instanceof Cf){var b=new Cf(a.Kb);b.Sa=a.Sa;b.Pe(a.ga());return b}return a.Ab()}[q](this))};I.sb=function(a){var b=a||[];this.mc(function(a){a!=this&&a.sb(b)}[q](this));return(new P(b)).c()};I.Hd=function(a){this.Sa!=a&&(this.Sa=a,this.Kb="and"==this.Kb?"or":"and",this.Z()[n](function(b){return b.Hd(a)}))};I.eval=function(a){var b=this.Z().map(function(b){return b.eval(a)});return this.wh(b)};
I.wh=function(a){return"and"==this.Kb?Xd(a):Yd(a)};f(I,function(){return"combined_pred_"+this.Kb[r]()});function Df(a,b){return a===b?0!==a||1/a===1/b:a!==a&&b!==b};function Ef(){this[Pa]()}var Ff=ba[A][Ta],Gf=ba[A][$a];I=Ef[A];I.set=function(a,b){this.Qc(a);var c=!this.Ec(a);this.f[a]=b;if("__proto__"==a||!Hf&&!Ff[E](this.f,a)){delete this.f[a];var d=$b(this.wb,a);if(c=0>d)d=this.wb[z];this.wb[d]=a;this.Fd[d]=b}c&&this.S++};I.get=function(a,b){this.Qc(a);if(this.Ec(a))return this.f[a];var c=$b(this.wb,a);return 0<=c?this.Fd[c]:b};
ka(I,function(a){this.Qc(a);if(this.Ec(a))return this.S--,delete this.f[a],!0;a=$b(this.wb,a);return 0<=a?(this.S--,fc(this.wb,a),fc(this.Fd,a),!0):!1});I.addAll=function(a){ac(a.G(),function(b){this.set(b,a.get(b))},this)};I.ya=function(){return!this.S};I.W=H("S");I.w=function(a){this.Qc(a);return this.Ec(a)||0<=$b(this.wb,a)};I.Yc=function(a){return rc(this.f,function(b,c){return this.Ec(c)&&Df(b,a)},this)||0<=$b(this.Fd,a)};
I.G=function(){var a;if(If)a=hc(ba.keys(this.f));else{a=[];for(var b in this.f)Gf[E](this.f,b)&&a[w](b)}ic(a,this.wb);return a};I.c=function(){for(var a=[],b=this.G(),c=0;c<b[z];c++)a[w](this.get(b[c]));return a};I.getEntries=function(){for(var a=[],b=this.G(),c=0;c<b[z];c++){var d=b[c];a[w]([d,this.get(d)])}return a};ma(I,function(){this.f=Hf?ba[Ua](null):{};this.wb=[];this.Fd=[];this.S=0});sa(I,function(){var a=new Ef;a[jb](this);return a});
I.Ec=function(a){return"__proto__"==a?!1:Hf?a in this.f:Gf[E](this.f,a)};I.Qc=function(a){M(Kb(a),"key must be a string.")};var Hf=!!ba[Ua],If=!!ba.keys;function Jf(){this[Pa]()}I=Jf[A];I.S=0;ma(I,function(){this.S=0;this.f=new Ef});sa(I,function(){var a=new Jf;a.Kg(this);return a});I.add=function(a,b){var c=this.f.get(a);c||this.f.set(a,c=[]);c[w](b);this.S++};I.Kg=function(a){ac(a.getEntries(),function(a){this.add(a[0],a[1])},this)};I.get=function(a){return(a=this.f.get(a))?hc(a):[]};ka(I,function(a,b){var c=this.f.get(a);if(!c)return!1;var d=gc(c,function(a){return Df(b,a)});d&&(this.S--,0==c[z]&&this.f[m](a));return d});
I.gg=function(a){var b=this.f.get(a);return this.f[m](a)?(this.S-=b[z],!0):!1};I.ya=function(){return!this.S};I.W=H("S");I.w=function(a){return this.f.w(a)};I.Yc=function(a){return dc(this.f.c(),function(b){return dc(b,function(b){return Df(b,a)})})};I.G=function(){return this.f.G()};I.c=function(){return pc(this.f.c())};I.getEntries=function(){for(var a=this.G(),b=[],c=0;c<a[z];c++)for(var d=a[c],g=this.get(d),k=0;k<g[z];k++)b[w]([d,g[k]]);return b};
function Kf(a,b,c){ne[E](this);this.Ja=a;this.Xa=b;this.T=c;this.dd=fe.je().ie(this.Ja.aa(),this.T)}L(Kf,ne);I=Kf[A];I.Ab=function(){var a=new Kf(this.Ja,this.Xa,this.T);a.Pe(this.ga());return a};I.sb=function(a){return null!=a?(a[w](this.Ja),a[w](this.Xa),a):[this.Ja,this.Xa]};I.eval=function(a){var b=a[D][Ea](function(a){var b=a.M(this.Ja);a=a.M(this.Xa);return this.dd(b,a)},this);return new Td(b,a.U())};f(I,function(){return"join_pred("+this.Ja.j()+", "+this.Xa.j()+")"});
I.bf=function(a){return-1!=a.U()[mb](this.Ja.X().xa())};I.Sg=function(a){return-1!=a.U()[mb](this.Xa.X().xa())};I.Kh=function(a,b){var c=null,d=null;this.bf(a)?(this.ef(a,b),c=a,d=b):(this.ef(b,a),c=b,d=a);return[c,d]};I.ef=function(a,b){M(this.bf(a),"Mismatch between join predicate left operand and right relation.");M(this.Sg(b),"Mismatch between join predicate right operand and right relation.")};I.Rh=function(a,b){var c=this.Kh(a,b),d=c[0],c=c[1];return"eq"==this.T?this.Sh(d,c):this.Th(d,c)};
I.Th=function(a,b){for(var c=[],d=a.U(),g=b.U(),k=0;k<a[D][z];k++)for(var l=0;l<b[D][z];l++)if(this.dd(a[D][k].M(this.Ja),b[D][l].M(this.Xa))){var p=be(a[D][k],d,b[D][l],g);c[w](p)}d=a.U()[Ka](b.U());return new Td(c,d)};
I.Sh=function(a,b){var c=a,d=b,g=this.Ja,k=this.Xa;a[D][z]>b[D][z]&&(c=b,d=a,g=this.Xa,k=this.Ja);var l=new Jf,p=[];c[D][n](function(a){var b=String(a.M(g));l.add(b,a)});var C=c.U(),La=d.U();d[D][n](function(a){var b=String(a.M(k));l.w(b)&&l.get(b)[n](function(b){b=be(a,La,b,C);p[w](b)})});c=a.U()[Ka](b.U());return new Td(p,c)};
function Lf(a,b,c){return null===b?new pe(a,b,c):Db(b.j)?new Kf(a,b,c):new pe(a,b,c)};
var Mf={};J("lf.schema.DataStoreType",Mf,void 0);Mf.INDEXED_DB=0;Mf.MEMORY=1;Mf.LOCAL_STORAGE=2;Mf.FIREBASE=3;Mf.WEB_SQL=4;Mf.OBSERVABLE_STORE=5;function Nf(a,b,c,d){this.ug=a;za(this,b);this.rd=c;this.h=d}Nf[A].j=function(){return this.ug+"."+this[pb]};Nf[A].Cf=function(){return this.h[ub](function(a){return a.Ya.gc()})};function Of(a,b,c,d){this.A=a;this.ma=c;this.H=b;this.yd=d;this.cb=null}J("lf.schema.Table",Of,void 0);ja(Of[A],H("A"));Of[A].Oa=H("cb");Of[A].xa=function(){return this.cb||this.A};
Of[A].qc=function(a){var b=new this.constructor(this.A);b.cb=a;return b};Of[A].as=Of[A].qc;Of[A].createRow=Of[A].Zb;Of[A].deserializeRow=Of[A].$b;Of[A].Da=H("ma");Of[A].sb=H("H");Of[A].getConstraint=Of[A].dc;Of[A].Nb=H("yd");Of[A].Eb=function(){return this.A+".#"};
function T(a,b){ta(this,a);this.Ub=b;this.cb=null}I=T[A];ja(I,function(){return this.Ub+"("+this[eb][h]()+")"});I.j=function(){return this.Ub+"("+this[eb].j()+")"};I.X=function(){return this[eb].X()};f(I,function(){return this.j()});I.aa=function(){return this[eb].aa()};I.Oa=H("cb");I.Da=function(){return[]};I.gc=Bb(!1);I.qc=function(a){this.cb=a;return this};J("lf.fn.AggregatedColumn.prototype.as",T[A].qc,void 0);T[A].sf=function(){for(var a=[this],b=this;b instanceof T;)a[w](b[eb]),b=b[eb];return a};
function Pf(a){this.cb=a||null;this.D=new Of("#UnknownTable",[],[],!1)}I=Pf[A];ja(I,Bb("*"));I.j=function(){return this[h]()};f(I,function(){return this.j()});I.X=H("D");I.aa=Bb(4);I.Oa=H("cb");I.Da=function(){return[]};I.gc=Bb(!1);
J("lf.fn.avg",function(a){return new T(a,"AVG")},void 0);J("lf.fn.count",function(a){return new T(a||new Pf,"COUNT")},void 0);function Qf(a){return new T(a,"DISTINCT")}J("lf.fn.distinct",Qf,void 0);J("lf.fn.max",function(a){return new T(a,"MAX")},void 0);J("lf.fn.min",function(a){return new T(a,"MIN")},void 0);J("lf.fn.stddev",function(a){return new T(a,"STDDEV")},void 0);J("lf.fn.sum",function(a){return new T(a,"SUM")},void 0);J("lf.fn.geomean",function(a){return new T(a,"GEOMEAN")},void 0);
function U(a,b){le[E](this,"","");this.ai=b;this.Vf=a}L(U,le);I=U[A];I.$=Bb(null);ia(I,function(a,b){switch(this.ai){case 1:return this.Wh(a,b);case 0:return this.Vh(a,b);default:return this.Yh(a,b)}});f(I,Bb("dummy_node"));I.Oc=function(){return this[r]()};I.cf=function(a){M(-1==this.Vf||a[z]==this.Vf)};I.Yh=function(a,b){return new N(K(function(c){c(this.fa(a,[],b))},this))};I.Wh=function(a,b){return this.jb(0)[Ia](a,b)[B](K(function(c){this.cf(c);return this.fa(a,c,b)},this))};
I.Vh=function(a,b){var c=this.Z().map(function(c){return c[Ia](a,b)});return Qc(c)[B](K(function(c){var g=[];c[n](function(a){for(var b=0;b<a[z];++b)g[w](a[b])});this.cf(g);return this.fa(a,g,b)},this))};
function Rf(a){U[E](this,-1,1);this.Ze=a}L(Rf,U);f(Rf[A],function(){return"aggregation("+this.Ze.map(function(a){return a.j()})[r]()+")"});Rf[A].fa=function(a,b){b[n](function(a){(new Sf(a,this.Ze)).fh()},this);return b};function Sf(a,b){this.Aa=a;this.H=b}
Sf[A].fh=function(){this.H[n](function(a){a=a.sf().reverse();for(var b=1;b<a[z];b++){var c=a[b],d=c.sf()[x](-1)[0],g=this.Fi(c),k=null;switch(c.Ub){case "MIN":k=Tf(g,d);break;case "MAX":k=Uf(g,d);break;case "DISTINCT":k=Vf(g,d);break;case "COUNT":k=g[D][z];break;case "SUM":k=Wf(g,d);break;case "AVG":0<g[D][z]&&(k=Wf(g,d)/g[D][z]);break;case "GEOMEAN":k=Xf(g,d);break;default:k=Yf(g,d)}this.Aa.gk(c,k)}},this)};Sf[A].Fi=function(a){return a[eb]instanceof T?this.Aa.cc(a[eb]):this.Aa};
function Tf(a,b){var c=null;a[D][n](function(a){a=a.M(b);if(null===c||a<c)c=a});return c}function Uf(a,b){var c=null;a[D][n](function(a){a=a.M(b);if(null===c||a>c)c=a});return c}function Wf(a,b){return a[D][ib](function(a,d){return a+d.M(b)},0)}function Yf(a,b){var c=a[D].map(function(a){return a.M(b)});return jd[v](null,c)}function Xf(a,b){var c=0,d=a[D][ib](function(a,d){var l=d.M(b);return 0!=l?(c++,a+ea.log(l)):a},0);return 0==c?null:ea.pow(ea.E,d/c)}
function Vf(a,b){var c=new O;a[D][n](function(a){var g=a.M(b);c.set(g,a)});return new Td(c.c(),a.U())};
function V(){le[E](this,"","")}L(V,le);function Zf(a,b){V[E](this);oa(this,a);la(this,b)}L(Zf,V);function $f(a,b){Zf[E](this,a,b)}L($f,Zf);function ag(a){V[E](this);oa(this,a)}L(ag,V);f(ag[A],function(){return"delete("+this[t][h]()+")"});function bg(a,b){V[E](this);oa(this,a);this.Ue=b}L(bg,V);f(bg[A],function(){var a=[];this.Ue&&(a=this.Ue.map(function(a){return a.K[h]()},this));return"update("+this[t][h]()+", ["+a[G](",")+"])"});function cg(a){V[E](this);this.za=a}L(cg,V);
f(cg[A],function(){return"select("+this.za[r]()+")"});function dg(a){V[E](this);oa(this,a)}L(dg,V);f(dg[A],function(){var a="table_access("+this[t][h]();null===this[t].Oa()||(a+=" as "+this[t].Oa());return a+")"});function eg(){V[E](this)}L(eg,V);f(eg[A],Bb("cross_product"));function fg(a,b){V[E](this);this.h=a;this.Gb=b}L(fg,V);f(fg[A],function(){var a="project("+this.h[r]();if(null!==this.Gb)var b=this.Gb.map(function(a){return a.j()})[G](", "),a=a+(", groupBy("+b+")");return a+")"});
function gg(a){V[E](this);this.J=a}L(gg,V);f(gg[A],function(){return"order_by("+te(this.J)+")"});function hg(a){V[E](this);this.h=a}L(hg,V);f(hg[A],function(){return"aggregation("+this.h[r]()+")"});function ig(a){V[E](this);this.h=a}L(ig,V);f(ig[A],function(){return"group_by("+this.h[r]()+")"});function jg(a){V[E](this);this.ka=a}L(jg,V);f(jg[A],function(){return"limit("+this.ka+")"});function kg(a){V[E](this);this.ja=a}L(kg,V);f(kg[A],function(){return"skip("+this.ja+")"});
function lg(a){V[E](this);this.za=a}L(lg,V);f(lg[A],function(){return"join("+this.za[r]()+")"});
function mg(){};
function ng(){}L(ng,mg);ng[A].ub=function(a){this.da=a;this.Na(this.da);return this.da};ng[A].Na=function(a){if(a instanceof cg){M(1==a.ra(),"SelectNode must have exactly one child.");var b=this.gf(a.za),b=this.Eh(b);Af(a,a,b[0],b[1]);a==this.da&&(this.da=b[0]);a=b[0]}a.Z()[n](function(a){this.Na(a)},this)};ng[A].gf=function(a){if(0==a.ra()||"and"!=a.Kb)return[a];var b=a.Z()[x]().map(function(b){a[qb](b);return this.gf(b)},this);return pc(b)};
ng[A].Eh=function(a){var b=null,c=null;a.map(function(a,g){var k=new cg(a);0==g?b=k:c.ea(k);c=k},this);return[b,c]};
function og(){}L(og,mg);og[A].ub=function(a){this.da=a;this.Na(this.da);return this.da};og[A].Na=function(a){if(a instanceof eg)for(;2<a.ra();){for(var b=new eg,c=0;2>c;c++){var d=a.Ed(0);b.ea(d)}a.oc(b,0)}a.Z()[n](function(a){this.Na(a)},this)};
function pg(){U[E](this,2,0)}L(pg,U);f(pg[A],Bb("cross_product"));pg[A].fa=function(a,b){for(var c=b[0],d=b[1],g=[],k=c.U(),l=d.U(),p=0;p<c[D][z];p++)for(var C=0;C<d[D][z];C++){var La=be(c[D][p],k,d[D][C],l);g[w](La)}c=c.U()[Ka](d.U());return[new Td(g,c)]};

function qg(a,b){xe[E](this,a,b);this.La=a.m(wd);this.tb=a.m(xd)}L(qg,xe);wa(qg[A],Bb(2));qg[A].Fe=function(a){0==this.aa()?this.Cj(a):this.Mc()};qg[A].Cj=function(a){this.Bd[n](function(b,c){b instanceof se&&this.tb.Fg(b,a[c])},this)};qg[A].Mc=function(){var a=this.tb.re(this.$().c());0!=a[z]&&(a=new ye(this[Sa],a),this.La.Qb(a))};
function rg(){qe[E](this)}L(rg,qe);sa(rg[A],function(){var a=new rg;a.Wc(this);a.g=this.g;return a});na(rg[A],function(a){rg.Za[q][E](this,a);this.Sd(a);return this});
function sg(){qe[E](this)}L(sg,qe);sa(sg[A],function(){var a=new sg;a.Wc(this);a.Ra=this.Ra;this[Oa]&&la(a,this[Oa]instanceof ce?this[Oa]:this[Oa][x]());a.pc=this.pc;a.Vb=this.Vb;return a});na(sg[A],function(a){sg.Za[q][E](this,a);this.Vb&&la(this,this.Vb instanceof ce?a[this.Vb.kb()]:this.Vb.map(function(b){return b instanceof ce?a[b.kb()]:b}));return this});
function tg(){qe[E](this)}L(tg,qe);sa(tg[A],function(){var a=new tg;a.Wc(this);oa(a,this[t]);a.set=this.set?this.set[x]():this.set;return a});na(tg[A],function(a){tg.Za[q][E](this,a);this.set[n](function(b){-1!=b.Rc&&va(b,a[b.Rc])});this.Sd(a);return this});
function ug(a,b){if(null==b)return"NULL";switch(a){case 1:return b?1:0;case 3:case 4:return b;case 0:return"'"+ad(b)+"'";default:return"'"+b[r]()+"'"}}function vg(a,b){var c=a.pc?"INSERT OR REPLACE":"INSERT",d=a.Ra.sb(),c=c+(" INTO "+a.Ra[h]()+"("),c=c+d.map(function(a){return a[h]()})[G](", "),c=c+") VALUES (";return a[Oa].map(function(a){var k=d.map(function(c){var d=a.o()[c[h]()];return b?null!=d?"#":"NULL":ug(c.aa(),d)});return c+k[G](", ")+");"})[G]("\n")}
function wg(a){switch(a){case "between":return"BETWEEN";case "eq":return"=";case "gte":return">=";case "gt":return">";case "in":return"IN";case "lte":return"<=";case "lt":return"<";case "match":return"LIKE";case "neq":return"<>";default:return"UNKNOWN"}}function xg(a,b,c,d){return a instanceof ce?"?"+a.kb()[r]():d?null!=a?"#":"NULL":"match"==b?"'"+a[r]()+"'":"in"==b?"("+a.map(function(a){return ug(c,a)})[G](", ")+")":"between"==b?ug(c,a[0])+" AND "+ug(c,a[1]):ug(c,a)[r]()}
function yg(a,b){return a.Z().map(function(a){return"("+zg(a,b)+")"})[G]("and"==a.Kb?" AND ":" OR ")}function zg(a,b){if(a instanceof pe)return[a.K.j(),wg(a.T),xg(a[y],a.T,a.K.aa(),b)][G](" ");if(a instanceof Cf)return yg(a,b);if(a instanceof Kf)return[a.Ja.j(),wg(a.T),a.Xa.j()][G](" ");throw new Q("NotSupportedError","toSql does not support predicate type: "+typeof a);}function Ag(a,b){var c=zg(a,b);return c?" WHERE "+c:""}
function Bg(a,b){var c="UPDATE "+a[t][h]()+" SET ",c=c+a.set.map(function(a){var b=a.K.j()+" = ";return-1!=a.Rc?b+"?"+a.Rc[r]():b+ug(a.K.aa(),a[y])[r]()})[G](", ");a.C&&(c+=Ag(a.C,b));return c+";"}
function Cg(a,b){var c="*";a.h[z]&&(c=a.h.map(function(a){return a.Oa()?a.j()+" AS "+a.Oa():a.j()})[G](", "));var d=a.g.map(function(a){return a.xa()!=a[h]()?a[h]()+" AS "+a.xa():a[h]()})[G](", "),c="SELECT "+c+" FROM "+d;a.C&&(c+=Ag(a.C,b));a.J&&(d=a.J.map(function(a){return a.K.j()+(0==a.nb?" DESC":" ASC")})[G](", "),c+=" ORDER BY "+d);a.ha&&(d=a.ha.map(function(a){return a.j()})[G](", "),c+=" GROUP BY "+d);a.ka&&(c+=" LIMIT "+a.ka[r]());a.ja&&(c+=" SKIP "+a.ja[r]());return c+";"}
function Dg(a,b){var c=b||!1,d=a.xf();if(d instanceof sg)return vg(d,c);if(d instanceof rg){var g="DELETE FROM "+d.g[h]();d.C&&(g+=Ag(d.C,c));return g+";"}if(d instanceof tg)return Bg(d,c);if(d instanceof se)return Cg(d,c);throw new Q("NotSupportedError","toSql not implemented for "+typeof d);};
function Eg(a,b){this.global=a;this.Sj=a.m(vd);this.La=a.m(wd);this.a=b}J("lf.query.BaseBuilder",Eg,void 0);ia(Eg[A],function(){try{this.eb()}catch(a){return Pc(a)}return new N(function(a,c){var d=new qg(this[Sa],[this.Dc()]);this.La.Qb(d)[B](function(c){a(c[0].le())},c)},this)});ia(Eg[A],Eg[A][Ia]);Eg[A].qf=function(){var a=K(function(a){return a.Oc(this.a)+"\n"},this);return Bf(this.me().Db(),a)};Eg[A].explain=Eg[A].qf;na(Eg[A],function(a){this.a[q](a);return this});na(Eg[A],Eg[A][q]);
Eg[A].uk=function(a){return Dg(this,a)};Eg[A].toSql=Eg[A].uk;I=Eg[A];I.eb=zb();I.xf=function(){return this.a[bb]()};I.ld=H("a");I.me=function(){null==this.$f&&(this.$f=this.Sj.Mi(this.a));return this.$f};I.Dc=function(){return{context:this.xf(),He:this.me()}};I.Ki=function(){return{context:this.ld(),He:this.me()}};
function Fg(a){Eg[E](this,a,new rg)}L(Fg,Eg);J("lf.query.DeleteBuilder",Fg,void 0);Fg[A].g=function(a){this.Wg();this.a.g=a;return this};Fg[A].from=Fg[A].g;Fg[A].C=function(a){this.Rd();this.a.C=a;return this};Fg[A].where=Fg[A].C;Fg[A].Wg=function(){if(null!=this.a.g)throw new Q("SyntaxError","from() has already been called.");};Fg[A].Rd=function(){if(null!=this.a.C)throw new Q("SyntaxError","where() has already been called.");};
Fg[A].eb=function(){Fg.Za.eb[E](this);if(null==this.a.g)throw new Q("SyntaxError","Invalid usage of delete()");};
function Gg(a,b){Eg[E](this,a,new sg);this.a.pc=b||!1}L(Gg,Eg);J("lf.query.InsertBuilder",Gg,void 0);Gg[A].eb=function(){Gg.Za.eb[E](this);var a=this.a;if(null==a.Ra||null==a[Oa])throw new Q("SyntaxError","Invalid usage of insert()");if(a.pc&&null===a.Ra.dc().ne())throw new Q("SyntaxError","Attempted to insert or replace in a table with no primary key.");};Gg[A].Ra=function(a){this.Xg();this.a.Ra=a;return this};Gg[A].into=Gg[A].Ra;
la(Gg[A],function(a){this.Yg();a instanceof ce||a[ub](function(a){return a instanceof ce})?this.a.Vb=a:la(this.a,a);return this});la(Gg[A],Gg[A][Oa]);Gg[A].Xg=function(){if(null!=this.a.Ra)throw new Q("SyntaxError","into() has already been called.");};Gg[A].Yg=function(){if(null!=this.a[Oa])throw new Q("SyntaxError","values() has already been called.");};
function Hg(a){return Ig("and",e[A][x][E](arguments))}J("lf.op.and",Hg,void 0);J("lf.op.or",function(a){return Ig("or",e[A][x][E](arguments))},void 0);function Ig(a,b){var c=new Cf(a);b[n](function(a){c.ea(a)});return c}J("lf.op.not",function(a){a.Hd(!0);return a},void 0);
function W(a,b){Eg[E](this,a,new se);this.rf=this.Ig=!1;this.a.h=b;this.mh();this.lh()}L(W,Eg);J("lf.query.SelectBuilder",W,void 0);I=W[A];I.eb=function(){W.Za.eb[E](this);var a=this.a;if(null==a.g)throw new Q("SyntaxError","Invalid usage of select()");if(Db(a.Ib)&&!Db(a.ka)||Db(a.Sb)&&!Db(a.ja))throw new Q("SyntaxError","Binding parameters of limit/skip without providing values");this.sh()};
I.mh=function(){var a=this.a.h[Ea](function(a){return a instanceof T&&"DISTINCT"==a.Ub},this);if(0!=a[z]&&(1!=a[z]||1!=this.a.h[z]))throw new Q("SyntaxError","Invalid usage of lf.fn.distinct()");};I.sh=function(){null!=this.a.ha?this.nh():this.rh()};
I.nh=function(){var a=this.a.h[Ea](function(a){return!(a instanceof T)}).map(function(a){return a.j()}),b=!1;if(0==this.a.ha[z]||0==this.a.h[z])b=!0;else{var c=this.a.ha.map(function(a){return a.j()});(b=a[ub](function(a){return-1==c[mb](a)}))||(b=this.a.ha[ub](function(a){a=a.aa();return 6==a||0==a}))}if(b)throw new Q("SyntaxError","Invalid projection list or groupBy columns");};
I.rh=function(){var a=this.a.h[ub](function(a){return a instanceof T},this),b=this.a.h[ub](function(a){return!(a instanceof T)},this)||0==this.a.h[z];if(a&&b)throw new Q("SyntaxError","Invalid projection list, aggregated and non-aggregated can't be mixed.");};I.lh=function(){this.a.h[n](function(a){if(a instanceof T&&!Jg(a.Ub,a.aa()))throw new Q("SyntaxError","Invalid aggregation detected for"+a.j());},this)};
I.Qd=function(a,b){if(null!=a)throw new Q("SyntaxError",b+"() has already been called.");};I.df=function(a,b){if(0>a)throw new Q("SyntaxError",b+"() does not accept negative values");};I.g=function(a){if(this.rf)throw new Q("SyntaxError","from() has already been called.");this.rf=!0;null==this.a.g&&(this.a.g=[]);this.a.g[w][v](this.a.g,e[A][x][E](arguments));return this};W[A].from=W[A].g;
W[A].C=function(a){if(this.Ig)throw new Q("SyntaxError","where() has already been called.");this.Ig=!0;this.ff(a);return this};W[A].where=W[A].C;W[A].ff=function(a){null!=this.a.C&&(a=Hg(a,this.a.C));this.a.C=a};W[A].ve=function(a,b){null==this.a.g&&(this.a.g=[]);this.a.g[w](a);this.ff(b);return this};W[A].innerJoin=W[A].ve;W[A].sj=function(){throw new Q("NotSupportedError","Not implemented yet");};W[A].leftOuterJoin=W[A].sj;
W[A].ka=function(a){this.Qd(this.a.ka||this.a.Ib,"limit");a instanceof ce?this.a.Ib=a:(this.df(a,"limit"),this.a.ka=a);return this};W[A].limit=W[A].ka;W[A].ja=function(a){this.Qd(this.a.ja||this.a.Sb,"skip");a instanceof ce?this.a.Sb=a:(this.df(a,"skip"),this.a.ja=a);return this};W[A].skip=W[A].ja;W[A].J=function(a,b){null==this.a.J&&(this.a.J=[]);this.a.J[w]({K:a,nb:null!=b?b:1});return this};W[A].orderBy=W[A].J;
W[A].ha=function(a){this.Qd(this.a.ha,"groupBy");null==this.a.ha&&(this.a.ha=[]);this.a.ha[w][v](this.a.ha,e[A][x][E](arguments));return this};W[A].groupBy=W[A].ha;function Jg(a,b){switch(a){case "COUNT":case "DISTINCT":return!0;case "AVG":case "GEOMEAN":case "STDDEV":case "SUM":return 4==b||3==b;case "MAX":case "MIN":return 4==b||3==b||5==b||2==b}return!1}sa(W[A],function(){var a=new W(this[Sa],this.a.h);a.a=this.a[bb]();a.a.uc=null;return a});sa(W[A],W[A][bb]);
function Kg(a,b){Eg[E](this,a,new tg);oa(this.a,b)}L(Kg,Eg);J("lf.query.UpdateBuilder",Kg,void 0);Kg[A].set=function(a,b){var c={Rc:b instanceof ce?b.kb():-1,K:a,value:b};null!=this.a.set?this.a.set[w](c):this.a.set=[c];return this};Kg[A].set=Kg[A].set;Kg[A].C=function(a){this.Rd();this.a.C=a;return this};Kg[A].where=Kg[A].C;Kg[A].Rd=function(){if(null!=this.a.C)throw new Q("SyntaxError","where() has already been called.");};
Kg[A].eb=function(){Kg.Za.eb[E](this);if(null==this.a.set)throw new Q("SyntaxError","Invalid usage of update()");if(this.a.set[ub](function(a){return a[y]instanceof ce}))throw new Q("SyntaxError","Update set value not bound");};
function Lg(a){this.a=a;this.Ba=null}Lg[A].bc=function(){null===this.Ba&&(this.Ba=this.fd());return this.Ba};function Mg(a){Lg[E](this,a)}L(Mg,Lg);Mg[A].fd=function(){return this.a.pc?new $f(this.a.Ra,this.a[Oa]):new Zf(this.a.Ra,this.a[Oa])};function Ng(a){Lg[E](this,a)}L(Ng,Lg);Ng[A].fd=function(){var a=new bg(this.a[t],this.a.set),b=null!=this.a.C?new cg(this.a.C.Ab()):null,c=new dg(this.a[t]);null===b?a.ea(c):(b.ea(c),a.ea(b));return a};
function Og(a,b){this.Ba=a;this.Me=b}Og[A].bc=function(){this.Me[n](function(a){this.Ba=a.ub(this.Ba)},this);return this.Ba};
function Pg(a){Lg[E](this,a)}L(Pg,Lg);Pg[A].fd=function(){var a=new ag(this.a.g),b=null!=this.a.C?new cg(this.a.C.Ab()):null,c=new dg(this.a.g);null===b?a.ea(c):(b.ea(c),a.ea(b));return(new Og(a,[new ng])).bc()};
function Qg(){}L(Qg,mg);Qg[A].ub=function(a){this.da=a;this.Na(this.da);return this.da};Qg[A].Na=function(a){if(a instanceof cg&&a.za instanceof Kf){M(1==a.ra(),"SelectNode must have exactly one child.");var b=a.jb(0);if(b instanceof eg){var c=new lg(a.za);Af(a,b,c,c);a==this.da&&(this.da=c);a=c}}a.Z()[n](function(a){this.Na(a)},this)};
function Rg(){this.Od=new P}L(Rg,mg);I=Rg[A];I.ub=function(a){this.da=a;this.Na(this.da);this.Od[Pa]();return this.da};I.Na=function(a){if(this.Ff(a)){var b=a.za instanceof pe?this.Qj(a):this.Pj(a);this.Od.add(a);b==a&&(b=a.jb(0));null!==b&&(Hb(b[Ga]())&&(this.da=b),this.Ff(b)&&!this.Od[u](b)&&this.Na(b))}else a.Z()[n](function(a){this.Na(a)},this)};
I.Ad=function(a,b){var c=a;if(this.kk(a))c=yf(a),this.Ad(a,b);else if(this.jk(a)){var d=[],c=zf(a,b,function(a){a=new cg(a.za);d[w](a);return a});d[n](function(a){this.Ad(a,b)},this)}return c};I.Qj=function(a){var b=new P([a.za.K.X().xa()]),c=function(a){return this.pf(a,b)}[q](this);return this.Ad(a,c)};I.Pj=function(a){var b=new P([a.za.Ja.X().xa(),a.za.Xa.X().xa()]),c=function(a){return this.pf(a,b)}[q](this);return this.Ad(a,c)};
I.pf=function(a,b){var c=new P;uf(a)[n](function(a){c.add(a[t].xa())},this);a instanceof dg&&c.add(a[t].xa());return c.Bh(b)};I.Ff=function(a){return a instanceof cg&&!(a.za instanceof Cf)};I.jk=function(a){a=a.jb(0);return a instanceof eg||a instanceof lg};I.kk=function(a){return a.jb(0)instanceof cg};
function Tg(a){Lg[E](this,a);this.eg=this.Qf=this.rg=this.Wf=this.$e=this.Bf=this.ng=this.mf=this.tg=null}L(Tg,Lg);I=Tg[A];I.fd=function(){this.ti();var a=this.yh(),b=[new ng,new og,new Rg,new Qg];return(new Og(a,b)).bc()};I.ti=function(){this.zi();this.ni();this.xi();this.ui();this.yi();this.si();this.pi();this.mi();this.vi()};
I.yh=function(){for(var a=[this.Qf,this.rg,this.eg,this.Wf,this.$e,this.Bf,this.ng,this.mf],b=null,c=null,d=0;d<a[z];d++){var g=a[d];null!==g&&(null===c?c=g:a[b].ea(g),b=d)}this.tg[n](function(c){a[b].ea(c)});return c};I.zi=function(){this.tg=this.a.g.map(function(a){return new dg(a)},this)};I.ni=function(){2<=this.a.g[z]&&(this.mf=new eg)};I.xi=function(){this.ng=null!=this.a.C?new cg(this.a.C.Ab()):null};I.ui=function(){this.a.J&&(this.Wf=new gg(this.a.J))};
I.si=function(){null!=this.a.ka&&(this.Qf=new jg(this.a.ka))};I.yi=function(){null!=this.a.ja&&0<this.a.ja&&(this.rg=new kg(this.a.ja))};I.pi=function(){null!=this.a.ha&&(this.Bf=new ig(this.a.ha))};I.mi=function(){var a=this.a.h[Ea](function(a){return a instanceof T});null!=this.a.J&&this.a.J[n](function(b){b.K instanceof T&&a[w](b.K)});0<a[z]&&(this.$e=new hg(a))};I.vi=function(){this.eg=new fg(this.a.h||[],this.a.ha||null)};
function Ug(){}Ug[A].create=function(a){var b=null;if(a instanceof sg)b=new Mg(a);else if(a instanceof rg)b=new Pg(a);else if(a instanceof se)b=new Tg(a);else if(a instanceof tg)b=new Ng(a);else throw new Q("SyntaxError","Unknown query context");return b.bc()};
function Vg(a){U[E](this,1,1);this.D=a}L(Vg,U);f(Vg[A],function(){return"delete("+this.D[h]()+")"});Vg[A].$=H("D");Vg[A].fa=function(a,b){var c=b[0][D].map(function(a){return a.qa});a[m](this.D,c);return[Wd()]};
function Wg(a){U[E](this,1,1);this.Af=a}L(Wg,U);f(Wg[A],function(){return"groupBy("+this.Af.map(function(a){return a.j()})[r]()+")"});Wg[A].fa=function(a,b){return this.hh(b[0])};Wg[A].hh=function(a){var b=new Jf,c=function(a){return this.Af.map(function(b){return a.M(b)},this)[G](",")}[q](this);a[D][n](function(a){b.add(c(a),a)},this);return b.G().map(function(c){return new Td(b.get(c),a.U())},this)};
function Xg(a){M(1<a[z],"Should only be called for cross-column indices.");a=a.map(function(a){return a.c()});a=od[v](null,a);var b=[];nd(a,function(a){b[w](a)});return b}function Yg(a){this.Hb=a}Yg[A].jd=function(){return 1==this.Hb.h[z]?[Rd()]:[this.Hb.h.map(function(){return Rd()})]};function Zg(a,b){this.Hb=a;this.na=b;this.Vd=this.Of=null}
Zg[A].ih=function(a){var b=new O;this.na.G()[n](function(c){var d=this.na.get(c).map(function(b){return a.md(b)},this),g=new rf([Rd()]);d[n](function(a){a=new rf(a.tk());g=sf(g,a)});b.set(c,g)},this);return b};Zg[A].fi=function(a){for(var b=this.Hb.h[z]-1;0<=b;b--){var c=this.Hb.h[b];if(null!==a.get(c.Ya[h](),null))break;a.set(c.Ya[h](),new rf([Rd()]))}};Zg[A].jd=function(a){if(this.Of==a)return this.Vd;var b=this.ih(a);this.fi(b);this.Vd=1==this.Hb.h[z]?b.c()[0].c():Xg(this.Si(b));this.Of=a;return this.Vd};
Zg[A].Si=function(a){var b=new O,c=0;this.Hb.h[n](function(a){b.set(a.Ya[h](),c);c++});return a.G()[vb](function(a,c){return b.get(a)-b.get(c)}).map(function(b){return a.get(b)})};
function $g(a,b){this.wg=b;this.N=a.m(ud)}$g[A].uh=function(a,b){var c=b[Ea](this.mj,this);if(0==c[z])return null;c=this.ri(c);if(0==c[z])return null;if(1==c[z])return c[0];var d=Number.MAX_VALUE;return c[ib](function(b,c){var l=c.gh(a);return l<d?(d=l,c):b},null)};$g[A].ri=function(a){return this.wg.Da().map(function(b){b=new ah(this.N,b);b.Ah(a);return b},this)[Ea](function(a){return a.rj()})};$g[A].mj=function(a){return a instanceof pe&&a.Gf()?a.K.X()==this.wg:!1};
function ah(a,b){this.N=a;this.lb=b;this.Df=new P;this.Df[jb](this.lb.h.map(function(a){return a.Ya[h]()}));this.Be=this.na=null}I=ah[A];I.Ni=function(){return null===this.na?[]:this.na.c()};I.wf=function(){M(this.na);null===this.Be&&(this.Be=new Zg(this.lb,this.na));return this.Be};I.Ah=function(a){a[n](function(a){var c=a.sb()[0][h]();this.Df[u](c)&&(null===this.na&&(this.na=new Jf),this.na.add(c,a.ga()))},this)};
I.rj=function(){if(null===this.na)return!1;for(var a=!1,b=!0,c=0;c<this.lb.h[z];c++){var d=this.na.w(this.lb.h[c].Ya[h]());if(a&&d){b=!1;break}d||(a=!0)}return b};I.gh=function(a){a=this.wf().jd(a);var b=this.N.get(this.lb.j());return a[ib](function(a,d){return a+b.$c(d)},0)};
function bh(a,b,c,d){U[E](this,0,-1);this.N=a.m(ud);this.index=b;this.Mf=c;this.Le=d;this.Kd=this.Jd=!1}L(bh,U);f(bh[A],function(){return"index_range_scan("+this[Xa].j()+", ?, "+(this.Le?"reverse":"natural")+(this.Jd?", limit:?":"")+(this.Kd?", skip:?":"")+")"});bh[A].Oc=function(a){var b=this[r](),c=this.Mf.jd(a),b=b[Ja]("?",c[r]());this.Jd&&(b=b[Ja]("?",a.ka[r]()));this.Kd&&(b=b[Ja]("?",a.ja[r]()));return b};
bh[A].fa=function(a,b,c){a=this.Mf.jd(c);c=this.N.get(this[Xa].j()).Pa(a,this.Le,this.Jd?c.ka:void 0,this.Kd?c.ja:void 0).map(function(a){return new Xc(a,{})},this);return[Zd(c,[this[Xa].ug])]};
function ch(a){U[E](this,1,1);this.zd=a}L(ch,U);f(ch[A],Bb("select(?)"));ch[A].Oc=function(a){a=a.md(this.zd);return this[r]()[Ja]("?",a[r]())};ch[A].fa=function(a,b,c){return[c.md(this.zd).eval(b[0])]};
function dh(a,b){U[E](this,1,1);this.la=a.m(td);this.D=b}L(dh,U);f(dh[A],function(){return"table_access_by_row_id("+this.D[h]()+")"});dh[A].$=H("D");dh[A].fa=function(a,b){return[Zd(this.la.get(b[0].Ri()),[this.D.xa()])]};
function eh(a,b){U[E](this,0,-1);this.la=a.m(td);this.N=a.m(ud);oa(this,b)}L(eh,U);f(eh[A],function(){var a="table_access("+this[t][h]();null===this[t].Oa()||(a+=" as "+this[t].Oa());return a+")"});eh[A].$=H("table");eh[A].fa=function(){var a=this.N.get(this[t].Eb()).Pa();return[Zd(this.la.get(a),[this[t].xa()])]};
function fh(a){this.l=a}L(fh,mg);fh[A].ub=function(a,b){this.da=a;vf(a,function(a){return a instanceof eh})[n](function(a){var d=this.li(a);if(0!=d[z]){var g=(new $g(this.l,a[t])).uh(b,d.map(function(a){return b.md(a.zd)}));if(null!==g){var k=new O;d[n](function(a){k.set(a.zd,a)},this);this.da=this.ck(g,k,a,b)}}},this);return this.da};fh[A].li=function(a){var b=[];for(a=a[Ga]();a;)a instanceof ch&&b[w](a),a=a[Ga]();return b};
fh[A].ck=function(a,b,c){a.Ni().map(function(a){return b.get(a)})[n](wf);a=new bh(this.l,a.lb,a.wf(),!1);var d=new dh(this.l,c[t]);d.ea(a);Af(c,c,d,a);return a.Db()};
function gh(a,b){U[E](this,0,-1);this.N=a.m(ud);this.D=b}L(gh,U);f(gh[A],function(){return"insert("+this.D[h]()+")"});gh[A].$=H("D");gh[A].fa=function(a,b,c){hh(this.D,c[Oa],this.N);a.mb(this.D,c[Oa]);return[Zd(c[Oa],[this.D[h]()])]};function hh(a,b,c){a=a.dc().ne();if(null===a?0:a.h[0][Na]){var d=a.h[0].Ya[h](),g=c.get(a.j()).max()[0]||0;b[n](function(a){if(0==a.o()[d]||null==a.o()[d])g++,a.o()[d]=g})}}function ih(a,b){U[E](this,0,-1);this.N=a.m(ud);this.D=b}L(ih,U);
f(ih[A],function(){return"insert_replace("+this.D[h]()+")"});ih[A].$=H("D");ih[A].fa=function(a,b,c){hh(this.D,c[Oa],this.N);a.we(this.D,c[Oa]);return[Zd(c[Oa],[this.D[h]()])]};
function jh(a){U[E](this,2,0);this.dg=a}L(jh,U);f(jh[A],function(){return"join("+this.dg[r]()+")"});jh[A].fa=function(a,b){return[this.dg.Rh(b[0],b[1])]};
function kh(){U[E](this,1,1)}L(kh,U);f(kh[A],Bb("limit(?)"));kh[A].Oc=function(a){return this[r]()[Ja]("?",a.ka[r]())};kh[A].fa=function(a,b,c){b[0][D][F](c.ka);return b};
function lh(a){U[E](this,-1,1);this.J=a}L(lh,U);I=lh[A];f(I,function(){return"order_by("+te(this.J)+")"});I.fa=function(a,b){if(1==b[z]){var c=this.hi(b[0]);(null===c?b[0]:b[0].cc(c))[D][vb](this.Oh[q](this))}else b[vb](this.Xj[q](this));return b};I.hi=function(a){for(var b=null,c=0;c<this.J[z];c++){var d=Qf(this.J[c].K);if(a.ej(d)){b=d;break}}return b};
I.L=function(a,b){var c=null,d=null,g=null,k=-1;do k++,g=this.J[k].K,c=this.J[k].nb,d=a(g),g=b(g);while(d==g&&k+1<this.J[z]);d=d<g?-1:d>g?1:0;return 1==c?d:-d};I.Xj=function(a,b){return this.L(function(b){return b instanceof T?a.cc(b):a[D][a[D][z]-1].M(b)},function(a){return a instanceof T?b.cc(a):b[D][b[D][z]-1].M(a)})};I.Oh=function(a,b){return this.L(function(b){return a.M(b)},function(a){return b.M(a)})};
function mh(a,b){this.Aa=a;this.H=b}mh[A].zf=function(){return this.H[ub](function(a){return a instanceof T},this)?this.cj():this.dj()};
mh[A].cj=function(){if(1==this.H[z]&&"DISTINCT"==this.H[0].Ub){var a=this.Aa.cc(this.H[0])[D].map(function(a){var b=new $d(new Xc(-1,{}),this.Aa.ye());b.Oe(this.H[0],a.M(this.H[0][eb]));return b},this);return new Td(a,[])}var b=new $d(new Xc(-1,{}),this.Aa.ye());this.H[n](function(a){var d=a instanceof T?this.Aa.cc(a):this.Aa[D][0].M(a);b.Oe(a,d)},this);return new Td([b],this.Aa.U())};
mh[A].dj=function(){var a=e(this.Aa[D][z]),b=this.Aa.ye();this.Aa[D][n](function(c,d){a[d]=new $d(new Xc(c.qa.id(),{}),b);this.H[n](function(b){a[d].Oe(b,c.M(b))},this)},this);return new Td(a,this.Aa.U())};function nh(a,b){var c=a.map(function(a){return(new mh(a,b)).zf()[D][0]});return new Td(c,a[0].U())};
function oh(a,b){U[E](this,-1,1);this.h=a;this.Gb=b}L(oh,U);I=oh[A];f(I,function(){var a="project("+this.h[r]();if(null!==this.Gb)var b=this.Gb.map(function(a){return a.j()})[G](", "),a=a+(", groupBy("+b+")");return a+")"});I.fa=function(a,b){return 0==b[z]?[Wd()]:1==b[z]?[this.Zh(b[0])]:[this.Xh(b)]};I.fj=function(){return this.h[ub](function(a){return a instanceof T})||null!==this.Gb};I.Xh=function(a){return nh(a,this.h)};I.Zh=function(a){return 0==this.h[z]?a:(new mh(a,this.h)).zf()};
function ph(){U[E](this,1,1)}L(ph,U);f(ph[A],Bb("skip(?)"));ph[A].Oc=function(a){return this[r]()[Ja]("?",a.ja[r]())};ph[A].fa=function(a,b,c){return[new Td(b[0][D][x](c.ja),b[0].U())]};
function qh(){}L(qh,mg);qh[A].ub=function(a){var b=vf(a,function(a){return a instanceof kh||a instanceof ph});if(0==b[z])return a;var c=this.ki(a);if(null===c)return a;b[n](function(a){this.zj(a,c)},this);return c.Db()};qh[A].zj=function(a,b){a instanceof kh?b.Jd=!0:b.Kd=!0;return wf(a).parent};qh[A].ki=function(a){a=vf(a,function(a){return a instanceof bh},function(a){return a instanceof oh&&a.fj()||a instanceof lh||1!=a.ra()||a instanceof ch});return 0<a[z]?a[0]:null};
function rh(a){this.l=a}L(rh,mg);rh[A].ub=function(a){var b=sh(a);if(null===b)return a;a=this.Vg(b);a==b&&(a=this.Ug(b));return a.Db()};rh[A].Vg=function(a){var b=a,c=th(a.jb(0));if(null!==c){var d;d=a.J;for(var g=null,k=c[t].Da(),l=0;l<k[z]&&null===g;l++)g=uh(k[l],d);d=g;if(null===d)return b;b=new bh(this.l,d.lb,new Yg(d.lb),d.Jf);d=new dh(this.l,c[t]);d.ea(b);wf(a);b=Af(c,c,d,b)}return b};
rh[A].Ug=function(a){var b=a,c=vh(a.jb(0));if(null!==c){var d=uh(c[Xa],a.J);if(null===d)return b;c.Le=d.Jf;b=wf(a).parent}return b};function vh(a){a=vf(a,function(a){return a instanceof bh},function(a){return 1!=a.ra()});return 0<a[z]?a[0]:null}function th(a){a=vf(a,function(a){return a instanceof eh},function(a){return 1!=a.ra()});return 0<a[z]?a[0]:null}function sh(a){a=vf(a,function(a){return a instanceof lh});return 0<a[z]?a[0]:null}
function uh(a,b){if(a.h[z]!=b[z]||!b[wb](function(b,c){return b.K[h]()==a.h[c].Ya[h]()}))return null;var c=wh(b,a);return c[0]||c[1]?{lb:a,Jf:c[1]}:null}function wh(a,b){var c=a[ib](function(a,b){return a<<1|(0==b.nb?0:1)},0),d=b.h[ib](function(a,b){return a<<1|(0==b.nb?0:1)},0),d=c^d,c=0==d,d=d==ea.pow(2,ea.max(a[z],b.h[z]))-1;return[c,d]};
function xh(a,b,c){this.Ba=a;this.Rj=b;this.Me=c}xh[A].bc=function(){this.Me[n](function(a){this.Ba=a.ub(this.Ba,this.Rj)},this);return this.Ba};
function yh(a,b){U[E](this,1,1);this.D=a;this.zk=b}L(yh,U);f(yh[A],function(){return"update("+this.D[h]()+")"});yh[A].$=H("D");yh[A].fa=function(a,b){var c=b[0][D].map(function(a){var b=this.D.$b(a.qa.Ca());this.zk[n](function(a){b.o()[a.K[h]()]=a[y]},this);return b},this);a[xb](this.D,c);return[Wd()]};
function zh(a){this.l=a}zh[A].create=function(a,b){if(a instanceof $f||a instanceof Zf)return this.Zd(a,b);if(a instanceof fg||a instanceof jg||a instanceof kg)return this.Zd(a,b,[new fh(this.l),new rh(this.l),new qh]);if(a instanceof ag||a instanceof bg)return this.Zd(a,b,[new fh(this.l)]);throw new Q("NotSupportedError","Unknown query plan node");};zh[A].Zd=function(a,b,c){a=tf(a,K(this.vj,this));return null!=c?new ue((new xh(a,b,c)).bc()):new ue(a)};
zh[A].vj=function(a){if(a instanceof fg)return new oh(a.h,a.Gb);if(a instanceof ig)return new Wg(a.h);if(a instanceof hg)return new Rf(a.h);if(a instanceof gg)return new lh(a.J);if(a instanceof kg)return new ph;if(a instanceof jg)return new kh;if(a instanceof cg)return new ch(a.za.ga());if(a instanceof eg)return new pg;if(a instanceof lg)return new jh(a.za);if(a instanceof dg)return new eh(this.l,a[t]);if(a instanceof ag)return new Vg(a[t]);if(a instanceof bg)return new yh(a[t],a.Ue);if(a instanceof
$f)return new ih(this.l,a[t]);if(a instanceof Zf)return new gh(this.l,a[t]);throw new Q("NotSupportedError","Unknown node type");};

function Ah(a){this.tj=new Ug;this.Lj=new zh(a)}Ah[A].Mi=function(a){var b=this.tj[Ua](a);return this.Lj[Ua](b,a)};
function Bh(){this.Sf=new O}I=Bh[A];I.hd=function(a){var b=this.Sf.get(a[h](),null);null===b&&(b=new Ch,this.Sf.set(a[h](),b));return b};I.$i=function(a,b,c){b[n](function(b){this.hd(b).Zi(a,c)},this)};I.kh=function(a,b,c){return b[wb](function(b){return this.hd(b).jh(a,c)},this)};I.hg=function(a,b,c){var d=this.kh(a,b,c);d&&this.$i(a,b,c);return d};I.Dd=function(a,b){b[n](function(b){this.hd(b).Dd(a)},this)};I.vh=function(a){a[n](function(a){this.hd(a).Wa=null},this)};
function Ch(){this.Rb=this.Ka=this.Wa=this.yc=null}Ch[A].Dd=function(a){this.yc==a&&(this.yc=null);this.Wa==a&&(this.Wa=null);null===this.Ka||this.Ka[m](a);null===this.Rb||this.Rb[m](a)};Ch[A].jh=function(a,b){var c=null===this.Ka||this.Ka.ya();return 0==b?(null===this.Rb||this.Rb.ya())&&c&&null===this.yc&&null!==this.Wa&&this.Wa==a:3==b?null===this.yc&&null===this.Wa&&null!==this.Ka&&this.Ka[u](a):1==b?null===this.Wa:c&&(null===this.Wa||this.Wa==a)};
Ch[A].Zi=function(a,b){0==b?(this.Wa=null,this.yc=a):3==b?(null===this.Rb&&(this.Rb=new P),this.Rb.add(a),null===this.Ka&&(this.Ka=new P),this.Ka[m](a)):1==b?(null===this.Ka&&(this.Ka=new P),this.Ka.add(a)):2==b&&(this.Wa=a)};
function Dh(){this.Ob=new Eh;this.Hc=new Bh}I=Dh[A];I.Qb=function(a){(2>a[nb]()||2>a[nb]())&&this.Hc.vh(a.$().c());this.Ob.mb(a);this.Yd();return a.Bc().oa};I.Yd=function(){for(var a=this.Ob.c(),b=0;b<a[z];b++){var c=a[b],d=!1;if(d=0==c.aa()?this.ig(c,1,3):this.ig(c,2,0))this.Ob[m](c),this.$h(c)}};I.ig=function(a,b,c){var d=!1,g=a.$().c();this.Hc.hg(a.ga(),g,b)&&(d=this.Hc.hg(a.ga(),g,c));return d};I.$h=function(a){a[Ia]()[B](K(this.Fj,this,a),K(this.Ej,this,a))};
I.Fj=function(a,b){this.Hc.Dd(a.ga(),a.$().c());a.Bc()[tb](b);this.Yd()};I.Ej=function(a,b){this.Hc.Dd(a.ga(),a.$().c());a.Bc()[gb](b);this.Yd()};function Eh(){this.Ob=[]}Eh[A].mb=function(a){nc(this.Ob,a,function(a,c){var d=a[nb]()-c[nb]();return 0==d?a.ga()-c.ga():d})};Eh[A].c=function(){return this.Ob[x]()};ka(Eh[A],function(a){var b=this.Ob;a=$b(b,a);var c;(c=0<=a)&&fc(b,a);return c});
function Fh(a,b){this.Qh=fe.je();this.Lc=a;this.vd=b;this.H=this.Jh()}Fh[A].Jh=function(){if(0<this.Lc.h[z])return this.Lc.h;var a=[],b=this.Lc.g[x]();null!=this.Lc.ve&&b[w](this.Lc.ve);b[n](function(b){b.sb()[n](function(b){a[w](b)})});return a};Fh[A].L=function(a,b){return this.H[wb](function(c){return this.Qh.ie(c.aa(),"eq")(a.M(c),b.M(c))},this)};
Fh[A].Tg=function(a,b){for(var c=null===a?[]:a[D],d=fd(c,b[D],K(this.L,this),function(a){return c[a]}),g=[],k=0,l=0;l<c[z];l++){var p=c[l];d[k]==p?k++:(p=this.vd[F](k,1),p=Gh(l,p,0,this.vd),g[w](p))}d=fd(c,b[D],K(this.L,this),function(a,c){return b[D][c]});for(l=k=0;l<b[D][z];l++)p=b[D][l],d[k]==p?k++:(this.vd[F](l,0,p.qa.o()),p=Gh(l,[],1,this.vd),g[w](p));return g};function Gh(a,b,c,d){return{Ak:c,index:a,object:d,Ck:b,type:"splice"}};
function Hh(){this.ac=new O}I=Hh[A];I.oe=function(a){return Mb(a)[r]()};I.Md=function(a,b){var c=this.oe(a.ld()),d=this.ac.get(c,null);null===d&&(d=new Ih(a),this.ac.set(c,d));d.Md(b)};I.Je=function(a,b){var c=this.oe(a.ld()),d=this.ac.get(c,null);M(null!=d,"Attempted to unobserve a query that was not observed.");var g=d.Je(b);M(g,"removeObserver: Inconsistent state detected.");d.hj()||this.ac[m](c)};
I.re=function(a){var b=new P;a[n](function(a){b.add(a[h]())});var c=[];this.ac.c()[n](function(a){a=a.Dc();a[Da].g[ub](function(a){return b[u](a[h]())})&&c[w](a)});return c};I.Fg=function(a,b){var c=this.oe(null!=a.uc?a.uc:a),c=this.ac.get(c,null);return null!==c?(c.yk(b),!0):!1};function Ih(a){this.eh=a;this.Kc=new P;this.Dj=[];this.Pf=null;this.Mh=new Fh(a.ld(),this.Dj)}I=Ih[A];I.Md=function(a){this.Kc[u](a)?Wb("Attempted to register observer twice."):this.Kc.add(a)};I.Je=function(a){return this.Kc[m](a)};
I.Dc=function(){return this.eh.Ki()};I.hj=function(){return 0<this.Kc.W()};I.yk=function(a){var b=this.Mh.Tg(this.Pf,a);this.Pf=a;0<b[z]&&this.Kc.c()[n](function(a){a(b)})};
function Jh(a,b){var c=a.m(yd),d=b||{},g=d.storeType||0,k=new Pe;a.hb(td,k);var k=null,l=!1;switch(g){case 1:k=new Je(c);break;case 5:k=new Ke(c);break;case 4:k=new Oe(a,c,d.webSqlDbSize);break;case 3:k=new De(c,d.firebase);l=!0;break;default:k=new He(a,c)}a.hb(sd,k);var p=new pf;a.hb(ud,p);return k.Qa(d.onUpgrade)[B](function(){a.hb(vd,new Ah(a));var b=new Dh;a.hb(wd,b);b=new Hh;a.hb(xd,b);return p.Qa(c)})[B](function(){l&&(new Ae(a)).pk();return(new of(a)).Qa(c)})};

function Kh(a,b){this.l=a;this.rb=a.m(sd);this.La=a.m(wd);this.tb=a.m(xd);this.Ma=new P(b);this.Ta=new Nd(this.l,this.Ma.c());this.Pb=Sc();this.zc=Sc();this.Ve=Sc()}I=Kh[A];ia(I,function(){this.Ve[tb]();return this.zc.oa});I.aa=Bb(1);I.$=H("Ma");I.Bc=H("Pb");I.ga=function(){return Mb(this)};wa(I,Bb(2));I.Jg=function(){this.La.Qb(this);return this.Ve.oa};
I.ah=function(a){a=a.Dc();return a.He.Db()[Ia](this.Ta,a[Da])[B](function(a){return a[0].le()},K(function(a){this.Ta.vb();var c=new Kc(a[pb]);this.zc[gb](c);throw a;},this))};I.R=function(){this.rb.Bb(this.aa(),this.Ta).R()[B](K(function(){this.Mc();this.zc[tb]()},this),K(function(a){this.Ta.vb();this.zc[gb](a)},this));return this.Pb.oa};I.vb=function(){this.Ta.vb();this.zc[tb]();return this.Pb.oa};I.Mc=function(){var a=this.tb.re(this.Ma.c());0!=a[z]&&(a=new ye(this.l,a),this.La.Qb(a))};
function Lh(a){this.l=a;this.La=a.m(wd);this.Pc=null;this.va=0}J("lf.proc.Transaction",Lh,void 0);var Mh=new O(0,new P([1,4]),1,new P([2]),2,new P([3,5,6]),3,new P([2,7]),4,new P([7]),5,new P([7]),6,new P([7]));Lh[A].Ga=function(a){var b=Mh.get(this.va,null);if(null===b||!b[u](a))throw new Q("TransactionError","Invalid transaction state transition, from "+this.va+" to "+a+".");this.va=a};
ia(Lh[A],function(a){this.Ga(4);var b=[];try{a[n](function(a){a.eb();b[w](a.Dc())},this)}catch(c){return this.Ga(7),Pc(c)}a=new qg(this.l,b);return this.La.Qb(a)[B](K(function(a){this.Ga(7);return a.map(function(a){return a.le()})},this),K(function(a){this.Ga(7);throw a;},this))});ia(Lh[A],Lh[A][Ia]);Lh[A].bh=function(a){this.Ga(1);this.Pc=new Kh(this.l,a);return this.Pc.Jg()[B](K(function(){this.Ga(2)},this))};Lh[A].begin=Lh[A].bh;
Lh[A].$g=function(a){this.Ga(3);return this.Pc.ah(a)[B](K(function(a){this.Ga(2);return a},this),K(function(a){this.Ga(7);throw a;},this))};Lh[A].attach=Lh[A].$g;Lh[A].R=function(){this.Ga(5);return this.Pc.R()[B](K(function(){this.Ga(7)},this))};Lh[A].commit=Lh[A].R;Lh[A].vb=function(){this.Ga(6);return this.Pc.vb()[B](K(function(){this.Ga(7)},this))};Lh[A].rollback=Lh[A].vb;
function X(a){this.l=a;this.B=a.m(yd);this.ue=!1}J("lf.proc.Database",X,void 0);X[A].Qa=function(a){this.l.hb(yd,this.B);return Jh(this.l,a)[B](K(function(){this.ue=!0;return this},this))};X[A].init=X[A].Qa;X[A].Fb=H("B");X[A].getSchema=X[A].Fb;X[A].Yb=function(){if(!this.ue)throw new Q("UninitializedError","Database is not initialized");};X[A].select=function(a){this.Yb();return new W(this.l,1!=arguments[z]||null!=arguments[0]?e[A][x][E](arguments):[])};X[A].select=X[A].select;
X[A].mb=function(){this.Yb();return new Gg(this.l)};X[A].insert=X[A].mb;X[A].we=function(){this.Yb();return new Gg(this.l,!0)};X[A].insertOrReplace=X[A].we;Ca(X[A],function(a){this.Yb();return new Kg(this.l,a)});Ca(X[A],X[A][xb]);xa(X[A],function(){this.Yb();return new Fg(this.l)});X[A]["delete"]=X[A][ob];X[A].observe=function(a,b){this.l.m(xd).Md(a,b)};X[A].observe=X[A].observe;X[A].unobserve=function(a,b){this.l.m(xd).Je(a,b)};X[A].unobserve=X[A].unobserve;X[A].Hh=function(){this.Yb();return new Lh(this.l)};
X[A].createTransaction=X[A].Hh;ra(X[A],function(){try{this.l.m(sd)[ab]()}catch(a){}this.l[Pa]();this.ue=!1});ra(X[A],X[A][ab]);
function Y(a,b,c,d,g,k){this.D=a;this.A=b;this.Lf=c;this.If=d;this.Bg=g;this.cb=k||null}J("lf.schema.BaseColumn",Y,void 0);I=Y[A];ja(I,H("A"));I.j=function(){return this.D.xa()+"."+this.A};f(I,function(){return this.j()});I.X=H("D");I.aa=H("Bg");I.Oa=H("cb");I.Da=function(){null==this.ma&&(this.ma=[],this.X().Da()[n](function(a){-1!=a.h.map(function(a){return a.Ya[h]()})[mb](this.A)&&this.ma[w](a)},this));return this.ma};I.gc=H("If");I.rd=H("Lf");I.Ia=function(a){return Lf(this,a,"eq")};Y[A].eq=Y[A].Ia;
Y[A].Tf=function(a){return Lf(this,a,"neq")};Y[A].neq=Y[A].Tf;Y[A].Ce=function(a){return Lf(this,a,"lt")};Y[A].lt=Y[A].Ce;Y[A].uj=function(a){return Lf(this,a,"lte")};Y[A].lte=Y[A].uj;Y[A].aj=function(a){return Lf(this,a,"gt")};Y[A].gt=Y[A].aj;Y[A].bj=function(a){return Lf(this,a,"gte")};Y[A].gte=Y[A].bj;Y[A].match=function(a){return Lf(this,a,"match")};Y[A].match=Y[A].match;Y[A].dh=function(a,b){return Lf(this,[a,b],"between")};Y[A].between=Y[A].dh;Y[A].ij=function(a){return Lf(this,a,"in")};
Y[A]["in"]=Y[A].ij;Y[A].pj=function(){return this.Ia(null)};Y[A].isNull=Y[A].pj;Y[A].oj=function(){return this.Tf(null)};Y[A].isNotNull=Y[A].oj;Y[A].qc=function(a){return new Y(this.D,this.A,this.Lf,this.If,this.Bg,a)};Y[A].as=Y[A].qc;
function Nh(){this.Gd=new O}var Oh;ma(Nh[A],function(){this.Gd[Pa]()});J("lf.Global.prototype.clear",Nh[A][Pa],void 0);Nh[A].hb=function(a,b){this.Gd.set(a[r](),b);return b};J("lf.Global.prototype.registerService",Nh[A].hb,void 0);Nh[A].m=function(a){var b=this.Gd.get(a[r](),null);if(null==b)throw new Q("NotFoundError",a[r]());return b};J("lf.Global.prototype.getService",Nh[A].m,void 0);Nh[A].Ae=function(a){return this.Gd.w(a[r]())};J("lf.Global.prototype.isRegistered",Nh[A].Ae,void 0);
function Ph(a,b){this.Oj=a;this.Bj=b}Ph[A].ne=H("Oj");Ph[A].Ji=H("Bj");
function Z(a){this.A=a;this.H=new O;this.Eg=new P;this.nc=new P;this.ud=new P;var b=this.A;this.ic="pk"+(b[0].toUpperCase()+b.substring(1));this.ma=new O;this.yd=!1;this.sc(a)}J("lf.schema.TableBuilder",Z,void 0);var Qh=new P([0,6]);Z[A].sc=function(a){if(!/^[A-Za-z_][A-Za-z0-9_]*$/.test(a))throw new Q("SyntaxError",a+" violates naming rule");if(this.H.w(a)||this.ma.w(a)||this.nc[u](a))throw new Q("SyntaxError",this.A+"."+a+" is already defined");};
Z[A].qh=function(a){var b=!1;a[n](function(a){var d=this.H.get(a[pb]);b=b||a[Na];if(a[Na]&&3!=d)throw new Q("SyntaxError","Can not use autoIncrement with a non-integer primary key.");},this);if(b&&1<a[z])throw new Q("SyntaxError","Can not use autoIncrement with a cross-column primary key.");};Z[A].Lg=function(a,b){this.sc(a);this.H.set(a,b);Qh[u](b)&&this.Ye([a]);return this};Z[A].addColumn=Z[A].Lg;
Z[A].Og=function(a,b){this.sc(this.ic);var c=this.td(a,!0,void 0,b);this.qh(c);c[n](function(a){this.Eg.add(a[pb])},this);this.nc.add(this.ic);this.ma.set(this.ic,c);return this};Z[A].addPrimaryKey=Z[A].Og;Z[A].Mg=function(){return this};Z[A].addForeignKey=Z[A].Mg;Z[A].Pg=function(a,b){this.sc(a);var c=this.td(b,!0);this.ma.set(a,c);this.nc.add(a);return this};Z[A].addUnique=Z[A].Pg;Z[A].Ye=function(a){a=this.td(a,!1);this.ph(a);a[n](function(a){this.ud.add(a[pb])},this);return this};
Z[A].addNullable=Z[A].Ye;Z[A].ph=function(a){this.ma.G()[n](function(b){var c=new P;this.ma.get(b)[n](function(a){c.add(a[pb])});var d=a[Ea](function(a){return c[u](a[pb])});if(1<c.W()&&0<d[z])throw new Q("SyntaxError","Cross-column index "+b+" refers to nullable columns: "+d[G](","));},this)};Z[A].Ng=function(a,b,c,d){this.sc(a);b=this.td(b,!0,d);this.oh(a,b);c&&this.nc.add(a);this.ma.set(a,b);return this};Z[A].addIndex=Z[A].Ng;
Z[A].oh=function(a,b){if(1<b[z]){var c=b[Ea](function(a){return this.ud[u](a[pb])},this);if(0<c[z])throw new Q("SyntaxError","Cross-column index "+a+" refers to nullable columns: "+c[G](","));}};Z[A].Nb=Ab("yd");Z[A].persistentIndex=Z[A].Nb;Z[A].Fb=function(){return new (this.Ai())};Z[A].getSchema=Z[A].Fb;
Z[A].td=function(a,b,c,d){var g=a;"string"==typeof a[0]&&(g=a.map(function(a){return{name:a,order:c||1,autoIncrement:d||!1}}));g[n](function(a){if(!this.H.w(a[pb]))throw new Q("SyntaxError",this.A+" does not have column: "+a[pb]);if(b){var c=this.H.get(a[pb]);if(0==c||6==c)throw new Q("SyntaxError",this.A+" index on non-indexable column: "+a[pb]);}},this);return g};
Z[A].Ai=function(){function a(){function a(c){return b.ma.get(c).map(function(a){return{Ya:this[a[pb]],nb:a.nb,autoIncrement:a[Na]}},this)}var d=b.H.G().map(function(a){this[a]=new Y(this,a,b.Eg[u](a),b.ud[u](a),b.H.get(a));return this[a]},this),g=b.ma.G().map(function(d){return new Nf(b.A,d,b.nc[u](d),a[E](this,d))},this);Of[E](this,b.A,d,g,b.yd);var k=b.ma.w(b.ic)?new Nf(b.A,b.ic,!0,a[E](this,b.ic)):null,l=d[Ea](function(a){return!b.ud[u](a[h]())}),p=b.nc.c().map(function(d){return new Nf(b.A,d,
!0,a[E](this,d))},this);this.zh=new Ph(k,l,[],p);this.lg=b.wi(d,g)}var b=this;L(a,Of);a[A].Zb=function(a){return new this.lg(Yc++,a)};a[A].createRow=a[A].Zb;a[A].$b=function(a){var b={};this.sb()[n](function(g){var k=g[h]();g=g.aa();var l=a[y][k];if(0==g)if(null===l)g=l;else if(g=l,""==g)g=null;else{0!=g[z]%2&&(g="0"+g);for(var l=new ArrayBuffer(g[z]/2),p=new Uint8Array(l),C=0,La=0;C<g[z];C+=2)p[La++]=ha(g.substr(C,2),16);g=l}else g=2==g?null===l?l:new Date(l):l;b[k]=g},this);return new this.lg(a.id,
b)};a[A].deserializeRow=a[A].$b;a[A].dc=H("zh");a[A].getConstraint=a[A].dc;return a};
Z[A].wi=function(a,b){function c(c,d){this.H=a;this.ma=b;Xc[E](this,c,d)}L(c,Xc);c[A].nf=function(){var a={};this.H[n](function(b){a[b[h]()]=b.gc()?null:ee[b.aa()]});return a};c[A].yg=function(){var a={};this.H[n](function(b){var c=b[h]();b=b.aa();var d=this.o()[c];a[c]=0==b?null===d?d:ad(d):2==b?null===d?d:d[Qa]():d},this);return a};var d=K(function(a){var b=this.H.get(a[h]());return 2==b?function(b){b=b[a[h]()];return a.gc()&&null===b?null:b[Qa]()}:1==b?function(b){return a.gc()?(b=b[a[h]()],null===
b?null:b?1:0):b[a[h]()]?1:0}:function(b){return b[a[h]()]}},this),g=K(function(a){var b=a.map(function(a){return d(a.Ya)});return function(a){return b.map(function(b){return b(a)})}},this),k={};b[n](function(a){var b=a.j();a=1==a.h[z]?d(a.h[0].Ya):g(a.h);k[b]=a});c[A].Gc=function(a){return-1!=a[mb]("#")?this.id():k[$a](a)?k[a](this.o()):null};return c};
function Rh(a,b){this.B=new Sh(a,b);this.lc=new O;this.Ac=!1}J("lf.schema.Builder",Rh,void 0);Rh[A].gi=function(){this.Ac||(this.lc.G()[n](function(a){a=this.lc.get(a);this.B.ik(a.Fb())},this),this.lc[Pa](),this.Ac=!0)};Rh[A].Fb=function(){this.Ac||this.gi();return this.B};Rh[A].getSchema=Rh[A].Fb;Rh[A].vf=function(){var a=new rd("ns_"+this.B[pb]()),b;Oh||(Oh=new Nh);b=Oh;var c=null;b.Ae(a)?c=b.m(a):(c=new Nh,b.hb(a,c));return c};Rh[A].getGlobal=Rh[A].vf;
Rh[A].connect=function(a){var b=this.vf();b.Ae(yd)||b.hb(yd,this.Fb());return(new X(b)).Qa(a)};Rh[A].connect=Rh[A].connect;Rh[A].Fh=function(a){if(this.lc.w(a)||this.Ac)throw new Q("SyntaxError","Table is already created or schema is already finalized.");this.lc.set(a,new Z(a));return this.lc.get(a)};Rh[A].createTable=Rh[A].Fh;Rh[A].Qe=function(a){if(this.Ac)throw new Q("SyntaxError","Schema is already finalized.");this.B.Qe(a);return this};Rh[A].setPragma=Rh[A].Qe;
function Sh(a,b){this.A=a;this.ab=b;this.I=new O;this.cg={Nh:!1}}J("lf.schema.DatabaseSchema",Sh,void 0);za(Sh[A],H("A"));za(Sh[A],Sh[A][pb]);Sh[A].version=H("ab");Sh[A].version=Sh[A][Fa];Sh[A].$a=function(){return this.I.c()};Sh[A].tables=Sh[A].$a;oa(Sh[A],function(a){if(!this.I.w(a))throw new Q("NotFoundError",a+" is not found in database");return this.I.get(a)});oa(Sh[A],Sh[A][t]);Sh[A].ik=function(a){this.I.set(a[h](),a)};Sh[A].bg=H("cg");Sh[A].pragma=Sh[A].bg;Sh[A].Qe=Ab("cg");
J("lf.schema.create",function(a,b){return new Rh(a,b)},void 0);
function Th(){this.f=new O;ba.defineProperty(this,"size",{get:function(){return this.f.W()}})}ma(Th[A],function(){this.f[Pa]()});J("lf.structs.MapPolyFill_.prototype.clear",Th[A][Pa],void 0);xa(Th[A],function(a){return this.f[m](a)});J("lf.structs.MapPolyFill_.prototype.delete",Th[A][ob],void 0);Th[A].entries=function(){return this.f.qb()};J("lf.structs.MapPolyFill_.prototype.entries",Th[A][D],void 0);Th[A].forEach=function(a,b){return this.f[n](a,b)};
J("lf.structs.MapPolyFill_.prototype.forEach",Th[A][n],void 0);Th[A].get=function(a){return this.f.get(a)};J("lf.structs.MapPolyFill_.prototype.get",Th[A].get,void 0);Th[A].has=function(a){return this.f.w(a)};J("lf.structs.MapPolyFill_.prototype.has",Th[A].has,void 0);Th[A].keys=function(){return this.f.Hi()};J("lf.structs.MapPolyFill_.prototype.keys",Th[A].keys,void 0);Th[A].set=function(a,b){return this.f.set(a,b)};J("lf.structs.MapPolyFill_.prototype.set",Th[A].set,void 0);la(Th[A],function(){return this.f.Yi()});
J("lf.structs.MapPolyFill_.prototype.values",Th[A][Oa],void 0);
function Uh(){this.xb=new P;ba.defineProperty(this,"size",{get:function(){return this.xb.W()}})}Uh[A].add=function(a){this.xb.add(a)};J("lf.structs.SetPolyFill_.prototype.add",Uh[A].add,void 0);ma(Uh[A],function(){this.xb[Pa]()});J("lf.structs.SetPolyFill_.prototype.clear",Uh[A][Pa],void 0);xa(Uh[A],function(a){return this.xb[m](a)});J("lf.structs.SetPolyFill_.prototype.delete",Uh[A][ob],void 0);Uh[A].has=function(a){return this.xb[u](a)};J("lf.structs.SetPolyFill_.prototype.has",Uh[A].has,void 0);
Uh[A].c=function(){return this.xb.c()};J("lf.structs.SetPolyFill_.prototype.getValues",Uh[A].c,void 0);Uh[A].bd=function(a){var b=new Uh;b.xb=this.xb.bd(a);return b};J("lf.structs.SetPolyFill_.prototype.difference",Uh[A].bd,void 0);}.bind(window))()
