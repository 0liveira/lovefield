var window = this;
(function(){'use strict';function aa(){return function(){}}function ba(a){return function(b){this[a]=b}}function g(a){return function(){return this[a]}}function l(a){return function(){return a}}var m,p=this;function q(a){return void 0!==a}function ca(){}
function da(a){var b=typeof a;if("object"==b)if(a){if(a instanceof Array)return"array";if(a instanceof Object)return b;var c=Object.prototype.toString.call(a);if("[object Window]"==c)return"object";if("[object Array]"==c||"number"==typeof a.length&&"undefined"!=typeof a.splice&&"undefined"!=typeof a.propertyIsEnumerable&&!a.propertyIsEnumerable("splice"))return"array";if("[object Function]"==c||"undefined"!=typeof a.call&&"undefined"!=typeof a.propertyIsEnumerable&&!a.propertyIsEnumerable("call"))return"function"}else return"null";
else if("function"==b&&"undefined"==typeof a.call)return"object";return b}function ea(a){return null===a}function fa(a){return null!=a}function ga(a){var b=da(a);return"array"==b||"object"==b&&"number"==typeof a.length}function ha(a){return"string"==typeof a}function ia(a){return"function"==da(a)}function ja(a){return a[ka]||(a[ka]=++la)}var ka="closure_uid_"+(1E9*Math.random()>>>0),la=0;function ma(a,b,c){return a.call.apply(a.bind,arguments)}
function na(a,b,c){if(!a)throw Error();if(2<arguments.length){var d=Array.prototype.slice.call(arguments,2);return function(){var c=Array.prototype.slice.call(arguments);Array.prototype.unshift.apply(c,d);return a.apply(b,c)}}return function(){return a.apply(b,arguments)}}function oa(a,b,c){oa=Function.prototype.bind&&-1!=Function.prototype.bind.toString().indexOf("native code")?ma:na;return oa.apply(null,arguments)}
function pa(a,b){var c=Array.prototype.slice.call(arguments,1);return function(){var b=c.slice();b.push.apply(b,arguments);return a.apply(this,b)}}function r(a,b){var c=a.split("."),d=p;c[0]in d||!d.execScript||d.execScript("var "+c[0]);for(var e;c.length&&(e=c.shift());)!c.length&&q(b)?d[e]=b:d=d[e]?d[e]:d[e]={}}
function t(a,b){function c(){}c.prototype=b.prototype;a.Hb=b.prototype;a.prototype=new c;a.prototype.constructor=a;a.Hg=function(a,c,f){for(var h=Array(arguments.length-2),k=2;k<arguments.length;k++)h[k-2]=arguments[k];return b.prototype[c].apply(a,h)}};function ra(a){if(Error.captureStackTrace)Error.captureStackTrace(this,ra);else{var b=Error().stack;b&&(this.stack=b)}a&&(this.message=String(a))}t(ra,Error);ra.prototype.name="CustomError";var sa=String.prototype.trim?function(a){return a.trim()}:function(a){return a.replace(/^[\s\xa0]+|[\s\xa0]+$/g,"")};
function ta(a){var b=0,c=sa(String(ua)).split(".");a=sa(String(a)).split(".");for(var d=Math.max(c.length,a.length),e=0;0==b&&e<d;e++){var f=c[e]||"",h=a[e]||"",k=/(\d*)(\D*)/g,n=/(\d*)(\D*)/g;do{var x=k.exec(f)||["","",""],T=n.exec(h)||["","",""];if(0==x[0].length&&0==T[0].length)break;b=va(0==x[1].length?0:parseInt(x[1],10),0==T[1].length?0:parseInt(T[1],10))||va(0==x[2].length,0==T[2].length)||va(x[2],T[2])}while(0==b)}return b}function va(a,b){return a<b?-1:a>b?1:0};function wa(a,b,c){this.eg=c;this.Jf=a;this.xg=b;this.pd=0;this.kd=null}wa.prototype.get=function(){var a;0<this.pd?(this.pd--,a=this.kd,this.kd=a.next,a.next=null):a=this.Jf();return a};wa.prototype.put=function(a){this.xg(a);this.pd<this.eg&&(this.pd++,a.next=this.kd,this.kd=a)};var xa=Array.prototype,ya=xa.indexOf?function(a,b,c){return xa.indexOf.call(a,b,c)}:function(a,b,c){c=null==c?0:0>c?Math.max(0,a.length+c):c;if(ha(a))return ha(b)&&1==b.length?a.indexOf(b,c):-1;for(;c<a.length;c++)if(c in a&&a[c]===b)return c;return-1},za=xa.forEach?function(a,b,c){xa.forEach.call(a,b,c)}:function(a,b,c){for(var d=a.length,e=ha(a)?a.split(""):a,f=0;f<d;f++)f in e&&b.call(c,e[f],f,a)},Aa=xa.map?function(a,b,c){return xa.map.call(a,b,c)}:function(a,b,c){for(var d=a.length,e=Array(d),
f=ha(a)?a.split(""):a,h=0;h<d;h++)h in f&&(e[h]=b.call(c,f[h],h,a));return e},Ba=xa.reduce?function(a,b,c,d){d&&(b=oa(b,d));return xa.reduce.call(a,b,c)}:function(a,b,c,d){var e=c;za(a,function(c,h){e=b.call(d,e,c,h,a)});return e},Ca=xa.some?function(a,b,c){return xa.some.call(a,b,c)}:function(a,b,c){for(var d=a.length,e=ha(a)?a.split(""):a,f=0;f<d;f++)if(f in e&&b.call(c,e[f],f,a))return!0;return!1};function Da(a,b,c){return 2>=arguments.length?xa.slice.call(a,b):xa.slice.call(a,b,c)}
function Ea(a){for(var b=[],c=0;c<a;c++)b[c]=0;return b}function Fa(a){for(var b=[],c=0;c<arguments.length;c++){var d=arguments[c];if("array"==da(d))for(var e=0;e<d.length;e+=8192)for(var f=Fa.apply(null,Da(d,e,e+8192)),h=0;h<f.length;h++)b.push(f[h]);else b.push(d)}return b};function Ga(a){var b=[],c=0,d;for(d in a)b[c++]=a[d];return b};var Ha;a:{var Ia=p.navigator;if(Ia){var Ja=Ia.userAgent;if(Ja){Ha=Ja;break a}}Ha=""}function u(a){return-1!=Ha.indexOf(a)};function Ka(){return u("Opera")||u("OPR")}function La(){return(u("Chrome")||u("CriOS"))&&!Ka()&&!u("Edge")};function Ma(a){p.setTimeout(function(){throw a;},0)}var Na;
function Oa(){var a=p.MessageChannel;"undefined"===typeof a&&"undefined"!==typeof window&&window.postMessage&&window.addEventListener&&!u("Presto")&&(a=function(){var a=document.createElement("IFRAME");a.style.display="none";a.src="";document.documentElement.appendChild(a);var b=a.contentWindow,a=b.document;a.open();a.write("");a.close();var c="callImmediate"+Math.random(),d="file:"==b.location.protocol?"*":b.location.protocol+"//"+b.location.host,a=oa(function(a){if(("*"==d||a.origin==d)&&a.data==
c)this.port1.onmessage()},this);b.addEventListener("message",a,!1);this.port1={};this.port2={postMessage:function(){b.postMessage(c,d)}}});if("undefined"!==typeof a&&!u("Trident")&&!u("MSIE")){var b=new a,c={},d=c;b.port1.onmessage=function(){if(q(c.next)){c=c.next;var a=c.Ae;c.Ae=null;a()}};return function(a){d.next={Ae:a};d=d.next;b.port2.postMessage(0)}}return"undefined"!==typeof document&&"onreadystatechange"in document.createElement("SCRIPT")?function(a){var b=document.createElement("SCRIPT");
b.onreadystatechange=function(){b.onreadystatechange=null;b.parentNode.removeChild(b);b=null;a();a=null};document.documentElement.appendChild(b)}:function(a){p.setTimeout(a,0)}};function Pa(){this.yd=this.lc=null}var Ra=new wa(function(){return new Qa},function(a){a.reset()},100);Pa.prototype.add=function(a,b){var c=Ra.get();c.set(a,b);this.yd?this.yd.next=c:this.lc=c;this.yd=c};Pa.prototype.remove=function(){var a=null;this.lc&&(a=this.lc,this.lc=this.lc.next,this.lc||(this.yd=null),a.next=null);return a};function Qa(){this.next=this.scope=this.Md=null}Qa.prototype.set=function(a,b){this.Md=a;this.scope=b;this.next=null};
Qa.prototype.reset=function(){this.next=this.scope=this.Md=null};function Sa(a,b){Ta||Ua();Va||(Ta(),Va=!0);Wa.add(a,b)}var Ta;function Ua(){if(p.Promise&&p.Promise.resolve){var a=p.Promise.resolve(void 0);Ta=function(){a.then(Xa)}}else Ta=function(){var a=Xa;!ia(p.setImmediate)||p.Window&&p.Window.prototype&&p.Window.prototype.setImmediate==p.setImmediate?(Na||(Na=Oa()),Na(a)):p.setImmediate(a)}}var Va=!1,Wa=new Pa;function Xa(){for(var a=null;a=Wa.remove();){try{a.Md.call(a.scope)}catch(b){Ma(b)}Ra.put(a)}Va=!1};function v(a,b){this.Ua=0;this.gf=void 0;this.$c=this.cc=this.C=null;this.jd=this.Ld=!1;if(a!=ca)try{var c=this;a.call(b,function(a){Ya(c,2,a)},function(a){Ya(c,3,a)})}catch(d){Ya(this,3,d)}}function Za(){this.next=this.context=this.hc=this.Lc=this.child=null;this.Bd=!1}Za.prototype.reset=function(){this.context=this.hc=this.Lc=this.child=null;this.Bd=!1};var ab=new wa(function(){return new Za},function(a){a.reset()},100);function bb(a,b,c){var d=ab.get();d.Lc=a;d.hc=b;d.context=c;return d}
function w(a){if(a instanceof v)return a;var b=new v(ca);Ya(b,2,a);return b}function cb(a){return new v(function(b,c){c(a)})}function db(a,b,c){eb(a,b,c,null)||Sa(pa(b,a))}function fb(a){return new v(function(b,c){var d=a.length,e=[];if(d)for(var f=function(a,c){d--;e[a]=c;0==d&&b(e)},h=function(a){c(a)},k=0,n;k<a.length;k++)n=a[k],db(n,pa(f,k),h);else b(e)})}function y(){var a,b,c=new v(function(c,e){a=c;b=e});return new gb(c,a,b)}
v.prototype.then=function(a,b,c){return hb(this,ia(a)?a:null,ia(b)?b:null,c)};v.prototype.then=v.prototype.then;v.prototype.$goog_Thenable=!0;v.prototype.qe=function(a,b){return hb(this,null,a,b)};function ib(a,b){a.cc||2!=a.Ua&&3!=a.Ua||jb(a);a.$c?a.$c.next=b:a.cc=b;a.$c=b}
function hb(a,b,c,d){var e=bb(null,null,null);e.child=new v(function(a,h){e.Lc=b?function(c){try{var e=b.call(d,c);a(e)}catch(x){h(x)}}:a;e.hc=c?function(b){try{var e=c.call(d,b);!q(e)&&b instanceof kb?h(b):a(e)}catch(x){h(x)}}:h});e.child.C=a;ib(a,e);return e.child}v.prototype.Cg=function(a){this.Ua=0;Ya(this,2,a)};v.prototype.Dg=function(a){this.Ua=0;Ya(this,3,a)};
function Ya(a,b,c){0==a.Ua&&(a==c&&(b=3,c=new TypeError("Promise cannot resolve to itself")),a.Ua=1,eb(c,a.Cg,a.Dg,a)||(a.gf=c,a.Ua=b,a.C=null,jb(a),3!=b||c instanceof kb||lb(a,c)))}function eb(a,b,c,d){if(a instanceof v)return ib(a,bb(b||ca,c||null,d)),!0;var e;if(a)try{e=!!a.$goog_Thenable}catch(h){e=!1}else e=!1;if(e)return a.then(b,c,d),!0;e=typeof a;if("object"==e&&null!=a||"function"==e)try{var f=a.then;if(ia(f))return mb(a,f,b,c,d),!0}catch(h){return c.call(d,h),!0}return!1}
function mb(a,b,c,d,e){function f(a){k||(k=!0,d.call(e,a))}function h(a){k||(k=!0,c.call(e,a))}var k=!1;try{b.call(a,h,f)}catch(n){f(n)}}function jb(a){a.Ld||(a.Ld=!0,Sa(a.Of,a))}function nb(a){var b=null;a.cc&&(b=a.cc,a.cc=b.next,b.next=null);a.cc||(a.$c=null);return b}
v.prototype.Of=function(){for(var a=null;a=nb(this);){var b=this.Ua,c=this.gf;if(3==b&&a.hc&&!a.Bd)for(var d=void 0,d=this;d&&d.jd;d=d.C)d.jd=!1;if(a.child)a.child.C=null,ob(a,b,c);else try{a.Bd?a.Lc.call(a.context):ob(a,b,c)}catch(e){pb.call(null,e)}ab.put(a)}this.Ld=!1};function ob(a,b,c){2==b?a.Lc.call(a.context,c):a.hc&&a.hc.call(a.context,c)}function lb(a,b){a.jd=!0;Sa(function(){a.jd&&pb.call(null,b)})}var pb=Ma;function kb(a){ra.call(this,a)}t(kb,ra);kb.prototype.name="cancel";
function gb(a,b,c){this.ha=a;this.resolve=b;this.reject=c};/*

 Copyright 2014 The Lovefield Project Authors. All Rights Reserved.

 Licensed under the Apache License, Version 2.0 (the "License");
 you may not use this file except in compliance with the License.
 You may obtain a copy of the License at

     http://www.apache.org/licenses/LICENSE-2.0

 Unless required by applicable law or agreed to in writing, software
 distributed under the License is distributed on an "AS IS" BASIS,
 WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 See the License for the specific language governing permissions and
 limitations under the License.
*/
function z(a,b){this.pa=a;this.s=b||this.Fe()}var qb=0;m=z.prototype;m.id=g("pa");function rb(a){return a.s}m.Fe=function(){return{}};m.qf=g("s");m.Ja=function(){return{id:this.pa,value:this.qf()}};m.Eb=function(a){return"#"==a.substr(-1)?this.pa:null};function sb(a){return new z(a.id,a.value)}function tb(a){return new z(qb++,a||{})}function ub(a){if(null==a)return null;a=new Uint8Array(a);for(var b="",c=0;c<a.length;++c)var d=a[c].toString(16),b=b+(2>d.length?"0"+d:d);return b};function vb(a){this.type=a}function wb(a){z.call(this,-1,a)}t(wb,z);function xb(a,b,c,d){c=c||function(a,b){return a==b};d=d||function(b){return a[b]};for(var e=a.length,f=b.length,h=[],k=0;k<e+1;k++)h[k]=[],h[k][0]=0;for(var n=0;n<f+1;n++)h[0][n]=0;for(k=1;k<=e;k++)for(n=1;n<=f;n++)c(a[k-1],b[n-1])?h[k][n]=h[k-1][n-1]+1:h[k][n]=Math.max(h[k-1][n],h[k][n-1]);for(var x=[],k=e,n=f;0<k&&0<n;)c(a[k-1],b[n-1])?(x.unshift(d(k-1,n-1)),k--,n--):h[k-1][n]>h[k][n-1]?k--:n--;return x}function yb(a){return Ba(arguments,function(a,c){return a+c},0)}
function zb(a){return yb.apply(null,arguments)/arguments.length}function Ab(a){var b=arguments.length;if(2>b)return 0;var c=zb.apply(null,arguments);return yb.apply(null,Aa(arguments,function(a){return Math.pow(a-c,2)}))/(b-1)}function Bb(a){return Math.sqrt(Ab.apply(null,arguments))};var Cb="StopIteration"in p?p.StopIteration:{message:"StopIteration",stack:""};function Db(){}Db.prototype.next=function(){throw Cb;};Db.prototype.mc=function(){return this};function Eb(a){if(a instanceof Db)return a;if("function"==typeof a.mc)return a.mc(!1);if(ga(a)){var b=0,c=new Db;c.next=function(){for(;;){if(b>=a.length)throw Cb;if(b in a)return a[b++];b++}};return c}throw Error("Not implemented");}
function Fb(a,b){if(ga(a))try{za(a,b,void 0)}catch(c){if(c!==Cb)throw c;}else{a=Eb(a);try{for(;;)b.call(void 0,a.next(),void 0,a)}catch(c){if(c!==Cb)throw c;}}}function Gb(a){if(Ca(arguments,function(a){return!a.length})||!arguments.length)return new Db;var b=new Db,c=arguments,d=Ea(c.length);b.next=function(){if(d){for(var a=Aa(d,function(a,b){return c[b][a]}),b=d.length-1;0<=b;b--){if(d[b]<c[b].length-1){d[b]++;break}if(0==b){d=null;break}d[b]=0}return a}throw Cb;};return b};function Hb(a,b){this.o={};this.b=[];this.Pa=this.Bb=0;var c=arguments.length;if(1<c){if(c%2)throw Error("Uneven number of arguments");for(var d=0;d<c;d+=2)this.set(arguments[d],arguments[d+1])}else a&&this.addAll(a)}m=Hb.prototype;m.zc=g("Bb");m.ya=function(){Ib(this);for(var a=[],b=0;b<this.b.length;b++)a.push(this.o[this.b[b]]);return a};function Jb(a){Ib(a);return a.b.concat()}m.Ma=function(a){return Kb(this.o,a)};m.md=function(){return 0==this.Bb};
m.clear=function(){this.o={};this.Pa=this.Bb=this.b.length=0};m.remove=function(a){return Kb(this.o,a)?(delete this.o[a],this.Bb--,this.Pa++,this.b.length>2*this.Bb&&Ib(this),!0):!1};function Ib(a){if(a.Bb!=a.b.length){for(var b=0,c=0;b<a.b.length;){var d=a.b[b];Kb(a.o,d)&&(a.b[c++]=d);b++}a.b.length=c}if(a.Bb!=a.b.length){for(var e={},c=b=0;b<a.b.length;)d=a.b[b],Kb(e,d)||(a.b[c++]=d,e[d]=1),b++;a.b.length=c}}m.get=function(a,b){return Kb(this.o,a)?this.o[a]:b};
m.set=function(a,b){Kb(this.o,a)||(this.Bb++,this.b.push(a),this.Pa++);this.o[a]=b};m.addAll=function(a){var b;if(a instanceof Hb)b=Jb(a),a=a.ya();else{b=[];var c=0,d;for(d in a)b[c++]=d;a=Ga(a)}for(c=0;c<b.length;c++)this.set(b[c],a[c])};m.forEach=function(a,b){for(var c=Jb(this),d=0;d<c.length;d++){var e=c[d],f=this.get(e);a.call(b,f,e,this)}};m.clone=function(){return new Hb(this)};
m.mc=function(a){Ib(this);var b=0,c=this.Pa,d=this,e=new Db;e.next=function(){if(c!=d.Pa)throw Error("The map has changed since the iterator was created");if(b>=d.b.length)throw Cb;var e=d.b[b++];return a?e:d.o[e]};return e};function Kb(a,b){return Object.prototype.hasOwnProperty.call(a,b)};function Lb(){return u("iPhone")&&!u("iPod")&&!u("iPad")};var Mb=Ka(),Nb=u("Trident")||u("MSIE"),Ob=u("Edge"),Pb=u("Gecko")&&!(-1!=Ha.toLowerCase().indexOf("webkit")&&!u("Edge"))&&!(u("Trident")||u("MSIE"))&&!u("Edge"),Qb=-1!=Ha.toLowerCase().indexOf("webkit")&&!u("Edge");function Rb(){var a=Ha;if(Pb)return/rv\:([^\);]+)(\)|;)/.exec(a);if(Ob)return/Edge\/([\d\.]+)/.exec(a);if(Nb)return/\b(?:MSIE|rv)[: ]([^\);]+)(\)|;)/.exec(a);if(Qb)return/WebKit\/(\S+)/.exec(a)}
var ua=function(){if(Mb&&p.opera){var a;var b=p.opera.version;try{a=b()}catch(c){a=b}return a}a="";(b=Rb())&&(a=b?b[1]:"");return Nb&&(b=(b=p.document)?b.documentMode:void 0,b>parseFloat(a))?String(b):a}(),Sb={};var Tb=Lb()||u("iPod"),Ub=u("iPad");!u("Android")||La()||u("Firefox")||Ka();var Vb=La(),Wb=u("Safari")&&!(La()||u("Coast")||Ka()||u("Edge")||u("Silk")||u("Android"))&&!(Lb()||u("iPad")||u("iPod"));/*

 Copyright 2015 The Lovefield Project Authors. All Rights Reserved.

 Licensed under the Apache License, Version 2.0 (the "License");
 you may not use this file except in compliance with the License.
 You may obtain a copy of the License at

     http://www.apache.org/licenses/LICENSE-2.0

 Unless required by applicable law or agreed to in writing, software
 distributed under the License is distributed on an "AS IS" BASIS,
 WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 See the License for the specific language governing permissions and
 limitations under the License.
*/
function Yb(){this.ke=Wb||Ub||Tb;this.Xf=!(this.ke||Nb&&!Sb[10]&&!(Sb[10]=0<=ta(10)));!Nb||Sb[11]||(Sb[11]=0<=ta(11));this.Fg=Vb||Wb;this.ig=q(window.Map)&&q(window.Map.prototype.values)&&q(window.Map.prototype.forEach)&&!this.ke;this.jg=q(window.Set)&&q(window.Set.prototype.values)&&q(window.Set.prototype.forEach)&&!this.ke}var Zb;function $b(){q(Zb)||(Zb=new Yb);return Zb};function A(){this.o=new Hb;Object.defineProperty(this,"size",{get:function(){return this.o.zc()}})}A.prototype.clear=function(){this.o.clear()};A.prototype.clear=A.prototype.clear;A.prototype.delete=function(a){return this.o.remove(a)};A.prototype["delete"]=A.prototype.delete;A.prototype.forEach=function(a,b){return this.o.forEach(a,b)};A.prototype.forEach=A.prototype.forEach;A.prototype.get=function(a){return this.o.get(a)};A.prototype.get=A.prototype.get;A.prototype.has=function(a){return this.o.Ma(a)};
A.prototype.has=A.prototype.has;A.prototype.set=function(a,b){return this.o.set(a,b)};A.prototype.set=A.prototype.set;var ac=$b().ig;function B(){return ac?new window.Map:new A}function bc(a){if(a instanceof A)return Jb(a.o);var b=0,c=Array(a.size);a.forEach(function(a,e){c[b++]=e});return c}function C(a){if(a instanceof A)return a.o.ya();var b=0,c=Array(a.size);a.forEach(function(a){c[b++]=a});return c};var cc={};r("lf.TransactionType",cc);cc.READ_ONLY=0;cc.READ_WRITE=1;function dc(a,b){this.Ra=a;this.rf=b;this.Y=y()}dc.prototype.ia=function(){try{ec(this.Ra)}catch(a){return cb(a)}return(0==this.rf?this.pc():fc(this)).then(function(a){this.Ra.ia();return a}.bind(this))};function fc(a){gc(a);hc(a);return a.pc()}
function gc(a){a.Ra.qb.forEach(function(a,c){var d=this.Ra.$().get(c),d=this.H(d.getName(),d.Lb.bind(d)),e=C(a.va).map(function(a){return a.id()});0<e.length&&d.remove(e).qe(this.Od,this);e=C(a.na).map(function(a){return a[1]}).concat(C(a.ta));d.put(e).qe(this.Od,this)},a)}function hc(a){ic(a.Ra).forEach(function(a){var c=this.H(a.getName(),sb),d;c.get([-1]).then(function(a){d=a;return c.remove([])}).then(function(){c.put(d);c.put(a.Ja())},this.Od.bind(this))},a)}dc.prototype.Od=function(a){this.Y.reject(a)};function jc(a){this.yg=a}jc.prototype.toString=g("yg");var kc=new jc("backstore"),lc=new jc("cache"),mc=new jc("indexstore"),nc=new jc("engine"),oc=new jc("runner"),pc=new jc("observerregistry"),qc=new jc("schema");function rc(a){if("function"==typeof a.ya)return a.ya();if(ha(a))return a.split("");if(ga(a)){for(var b=[],c=a.length,d=0;d<c;d++)b.push(a[d]);return b}return Ga(a)};function sc(a){this.o=new Hb;a&&this.addAll(a)}function tc(a){var b=typeof a;return"object"==b&&a||"function"==b?"o"+ja(a):b.substr(0,1)+a}m=sc.prototype;m.zc=function(){return this.o.zc()};m.add=function(a){this.o.set(tc(a),a)};m.addAll=function(a){a=rc(a);for(var b=a.length,c=0;c<b;c++)this.add(a[c])};m.remove=function(a){return this.o.remove(tc(a))};m.clear=function(){this.o.clear()};m.md=function(){return this.o.md()};m.contains=function(a){return this.o.Ma(tc(a))};m.ya=function(){return this.o.ya()};
m.clone=function(){return new sc(this)};m.mc=function(){return this.o.mc(!1)};function uc(a){this.Wb=new sc(a);Object.defineProperty(this,"size",{get:function(){return this.Wb.zc()}})}uc.prototype.add=function(a){this.Wb.add(a)};uc.prototype.add=uc.prototype.add;uc.prototype.clear=function(){this.Wb.clear()};uc.prototype.clear=uc.prototype.clear;uc.prototype.delete=function(a){return this.Wb.remove(a)};uc.prototype["delete"]=uc.prototype.delete;uc.prototype.forEach=function(a,b){this.Wb.ya().forEach(a,b)};uc.prototype.has=function(a){return this.Wb.contains(a)};
uc.prototype.has=uc.prototype.has;var vc=$b().jg;function D(a){return vc?q(a)?new window.Set(a):new window.Set:new uc(a)}function wc(a){if(a instanceof uc)return a.Wb.ya();var b=0,c=Array(a.size);a.forEach(function(a){c[b++]=a});return c}function xc(a,b){if(b.size>a.size)return!1;var c=!0;b.forEach(function(b){c=c&&a.has(b)});return c};function yc(a,b){this.pa=a;this.s=b||{}}function zc(a){var b=D();a.forEach(function(a){b.add(a>>9)});return wc(b)}yc.prototype.W=g("pa");function Ac(a,b){b.forEach(function(a){this.s[a.id()]=a.Ja()},a)}function Bc(a,b){b.forEach(function(a){delete this.s[a]},a)}yc.prototype.Ja=function(){return{id:this.pa,value:JSON.stringify(this.s)}};function Cc(a){return new yc(a.id,JSON.parse(a.value))};function Dc(a,b,c){this.ba=a;this.Kb=b;this.hf=c}m=Dc.prototype;m.get=function(a){if(0==a.length)return this.yc();var b=this.Kb;return Ec(this,a).then(function(c){return a.map(function(a){var e=c.get(a>>9);return b(e.s[a])})})};function Ec(a,b){var c=B(),d=y(),e=zc(b).map(function(a){return new v(function(b,d){var e;try{e=this.ba.get(a)}catch(x){d(x);return}e.onerror=d;e.onsuccess=function(a){a=Cc(a.target.result);c.set(a.W(),a);b()}},this)},a);fb(e).then(function(){d.resolve(c)});return d.ha}
m.yc=function(){return new v(function(a,b){var c=[],d;try{d=this.ba.openCursor()}catch(e){b(e);return}d.onerror=b;d.onsuccess=function(){var b=d.result;if(b){var f;f=Cc(b.value).s;for(var h in f)c.push(this.Kb(f[h]));b.continue()}else a(c)}.bind(this)},this)};m.Sb=function(a){return new v(function(b,c){var d;try{d=a()}catch(e){c(e);return}d.onsuccess=b;d.onerror=c},this)};
m.put=function(a){if(0==a.length)return w();var b=B();a.forEach(function(a){var d;d=a.id()>>9;var e=b.get(d)||null;null===e&&(e=this.hf(this.ba.name,d));Ac(e,[a]);b.set(d,e)},this);a=C(b).map(function(a){return this.Sb(function(){return this.ba.put(a.Ja())}.bind(this))},this);return fb(a)};
m.remove=function(a){if(0==a.length)return this.Sb(function(){return this.ba.clear()}.bind(this));var b=B();a.forEach(function(a){var d=a>>9,e=b.get(d)||null;null===e&&(e=this.hf(this.ba.name,d));Bc(e,[a]);b.set(d,e)},this);a=C(b).map(function(a){return this.Sb(function(){return 0==Object.keys(a.s).length?this.ba.delete(a.W()):this.ba.put(a.Ja())}.bind(this))},this);return fb(a)};function Fc(a,b,c){a=a.i(lc);var d=[c<<9,(c+1<<9)-1];b=a.$a(b,d[0],d[1]);c=new yc(c);Ac(c,b);return c}
function Gc(a,b){return new yc(b)};function Hc(){};function Ic(a){this.U=a.i(lc);this.D=a.i(mc);this.j=a.i(qc)}Ic.prototype.update=function(a){a.forEach(function(a){Jc(this,a);Kc(this,a)},this)};function Kc(a,b){var c=b.getName();b.va.forEach(function(a,b){this.U.remove(c,b)},a);b.ta.forEach(function(a){this.U.set(c,a)},a);b.na.forEach(function(a){this.U.set(c,a[1])},a)}function Jc(a,b){var c=a.j.table(b.getName());Lc(b).forEach(function(a){Mc(this,c,a)},a)}
function Mc(a,b,c){var d=a.D.jc.get(b.getName())||[],e=0;d.forEach(function(a){try{Nc(a,c),e++}catch(b){throw d.slice(0,e).forEach(function(a){Nc(a,[c[1],c[0]])},this),b;}},a)}function Nc(a,b){var c=null===b[1]?void 0:b[1].Eb(a.getName()),d=null===b[0]?void 0:b[0].Eb(a.getName());if(!q(d)&&q(c))a.add(c,b[1].id());else if(q(d)&&q(c)){if(null===c||null===d){if(c==d)return}else if(0==a.qc().compare(d,c))return;a.add(c,b[1].id());a.remove(d,b[0].id())}else q(d)&&!q(c)&&a.remove(d,b[0].id())};var Oc={};r("lf.ConstraintAction",Oc);Oc.RESTRICT=0;Oc.CASCADE=1;var Pc={};r("lf.ConstraintTiming",Pc);Pc.IMMEDIATE=0;Pc.DEFERRABLE=1;var Qc={};r("lf.Order",Qc);Qc.DESC=0;Qc.ASC=1;var Rc={};r("lf.Type",Rc);Rc.ARRAY_BUFFER=0;Rc.BOOLEAN=1;Rc.DATE_TIME=2;Rc.INTEGER=3;Rc.NUMBER=4;Rc.STRING=5;Rc.OBJECT=6;var Tc={0:null,1:!1,2:Object.freeze(new Date(0)),3:0,4:0,5:"",6:null};r("lf.type.DEFAULT_VALUES",Tc);function E(a,b){this.code=a;this.message="http://sn.im/2a0j3wn?c="+a;if(1<arguments.length)for(var c=1;c<=Math.min(4,arguments.length-1);++c)this.message+="&p"+(c-1)+"="+encodeURIComponent(arguments[c].toString().slice(0,64))}t(E,Error);function Uc(){this.o=B();this.size=0}m=Uc.prototype;m.has=function(a){return this.o.has(a)};m.set=function(a,b){var c=this.o.get(a)||null;null===c&&(c=D(),this.o.set(a,c));c.has(b)||(c.add(b),this.size++);return this};m.Vb=function(a,b){var c=this.o.get(a)||null;null===c&&(c=D(),this.o.set(a,c));b.forEach(function(a){c.has(a)||(c.add(a),this.size++)},this);return this};m.Xd=function(a){a.keys().forEach(function(b){var c=a.get(b);this.Vb(b,c)},this);return this};
m.delete=function(a,b){var c=this.o.get(a,null);if(null===c)return!1;var d=c.delete(b);d&&(--this.size,0==c.size&&this.o.delete(a));return d};m.get=function(a){a=this.o.get(a)||null;return null===a?null:wc(a)};m.clear=function(){this.o.clear();this.size=0};m.keys=function(){return bc(this.o)};m.values=function(){var a=[];this.o.forEach(function(b){a.push.apply(a,wc(b))});return a};function Vc(a){this.D=a.i(mc);this.j=a.i(qc);this.U=a.i(lc);this.cd=null}function Wc(a,b,c){var d=b.Db().lg;c.forEach(function(a){d.forEach(function(b){if(null==a.s[b.getName()])throw new E(202,b.m());},this)},a)}function Xc(a,b,c,d){b.Db().Nd().forEach(function(a){a.timing==d&&Yc(this,a,c)},a)}function Yc(a,b,c){var d=Zc(a,b);c.forEach(function(a){if($c(a[0],a[1],b.name)&&(a=a[1].s[b.rb],null!==a&&!d.Ma(a)))throw new E(203,b.name);},a)}
function Zc(a,b){null===a.cd&&(a.cd=B());var c=a.cd.get(b.name)||null;null===c&&(c=a.j.table(b.Sa)[b.Mc].wa(),c=a.D.get(c.m()),a.cd.set(b.name,c));return c}function $c(a,b,c){return(null===a?null!==b:null===b)||a.Eb(c)!=b.Eb(c)}function ad(a,b,c,d,e){b=bd(a.j.info(),b.getName(),e);null!==b&&(b=b.filter(function(a){return a.timing==d}),0!=b.length&&cd(a,b,c,function(a,b,c){if(b.Ma(c))throw new E(203,a.name);}))}
function dd(a,b,c){b=bd(a.j.info(),b.getName(),1);if(null===b)return null;var d=new Uc;cd(a,b,c,function(a,b,c){b=b.get(c);0<b.length&&d.Vb(a.Ef,b)});return d}function cd(a,b,c,d){b.forEach(function(a){var b=this.D.get(a.name),h=Zc(this,a);c.forEach(function(c){$c(c[0],c[1],h.getName())&&d(a,b,c[0].s[a.Mc])},this)},a)}function ed(a,b,c,d){0!=c.length&&(c=c.map(function(a){return[null,a]}),Xc(a,b,c,d))}function fd(a,b,c,d){0!=c.length&&(Xc(a,b,c,d),ad(a,b,c,d))}
function gd(a,b,c,d){0!=c.length&&(c=c.map(function(a){return[a,null]}),ad(a,b,c,d,0))}function hd(a,b,c){var d={pe:[],kf:new Uc},e=new Uc;e.Vb(b.getName(),c.map(function(a){return a.id()}));do{var f=new Uc;e.keys().forEach(function(a){var b=this.j.table(a);a=e.get(a).map(function(a){return[this.U.get(a),null]},this);b=dd(this,b,a);null!==b&&(d.pe.unshift.apply(d.pe,b.keys()),f.Xd(b))},a);e=f;d.kf.Xd(e)}while(0<e.size);return d};function id(a){this.ta=B();this.na=B();this.va=B();this.w=a}m=id.prototype;m.getName=g("w");m.add=function(a){if(this.va.has(a.id())){var b=[this.va.get(a.id()),a];this.na.set(a.id(),b);this.va.delete(a.id())}else this.ta.set(a.id(),a)};m.modify=function(a){var b=a[1],c=a[0].id();this.ta.has(c)?this.ta.set(c,b):(this.na.has(c)&&(a=[this.na.get(a[0].id())[0],b]),this.na.set(c,a))};
m.delete=function(a){if(this.ta.has(a.id()))this.ta.delete(a.id());else if(this.na.has(a.id())){var b=this.na.get(a.id())[0];this.na.delete(a.id());this.va.set(a.id(),b)}else this.va.set(a.id(),a)};m.Xd=function(a){a.ta.forEach(function(a){this.add(a)},this);a.na.forEach(function(a){this.modify(a)},this);a.va.forEach(function(a){this.delete(a)},this)};
function Lc(a){var b=[];a.ta.forEach(function(a){b.push([null,a])});a.na.forEach(function(a){b.push(a)});a.va.forEach(function(a){b.push([a,null])});return b}m.toString=function(){return"["+bc(this.ta).toString()+"], ["+bc(this.na).toString()+"], ["+bc(this.va).toString()+"]"};function jd(a){var b=new id(a.w);a.ta.forEach(function(a){b.delete(a)});a.va.forEach(function(a){b.add(a)});a.na.forEach(function(a){b.modify([a[1],a[0]])});return b}
m.md=function(){return 0==this.ta.size&&0==this.va.size&&0==this.na.size};function kd(a,b){this.aa=B();b.forEach(function(a){this.aa.set(a.getName(),a)},this);this.j=a.i(qc);this.U=a.i(lc);this.D=a.i(mc);this.Ea=new Vc(a);this.ld=new Ic(a);this.qb=B()}function ic(a){var b=[];bc(a.qb).map(function(a){return this.aa.get(a)},a).forEach(function(a){a.zb()&&(a.xa().forEach(function(a){b.push(this.D.get(a.m()))},this),b.push(this.D.get(a.getName()+".#")))},a);return b}m=kd.prototype;m.$=g("aa");
function ld(a){var b=[];a.aa.forEach(function(a){a.zb()&&(a.xa().forEach(function(a){b.push(a.m())}),b.push(a.getName()+".#"))});return b}m.xb=function(a,b){md(this,a);Wc(this.Ea,a,b);ed(this.Ea,a,b,0);for(var c=0;c<b.length;c++)nd(this,a,[null,b[c]])};
function nd(a,b,c){var d=b.getName(),e=a.qb.get(d)||new id(d);a.qb.set(d,e);try{Mc(a.ld,b,c)}catch(h){throw h;}b=c[0];var f=c[1];null===b&&null!==f?(a.U.set(d,f),e.add(f)):null!==b&&null!==f?(a.U.set(d,f),e.modify(c)):null!==b&&null===f&&(a.U.remove(d,b.id()),e.delete(b))}m.update=function(a,b){md(this,a);Wc(this.Ea,a,b);for(var c=0;c<b.length;c++){var d=b[c],d=[this.U.get(d.id()),d];fd(this.Ea,a,[d],0);nd(this,a,d)}};
m.Qd=function(a,b){md(this,a);Wc(this.Ea,a,b);for(var c=0;c<b.length;c++){var d=b[c],e=null,f,h=a.Db().fd();if(null===h)f=null;else{f=this.Ea;var h=h.m(),k=d.Eb(h);f=f.D.get(h).get(k);f=0==f.length?null:f[0]}null!=f?(e=this.U.get(f),d.pa=f,fd(this.Ea,a,[[e,d]],0)):ed(this.Ea,a,[d],0);nd(this,a,[e,d])}};m.remove=function(a,b){md(this,a);od(this,a,b);gd(this.Ea,a,b,0);for(var c=0;c<b.length;c++)nd(this,a,[b[c],null])};
function od(a,b,c){if(null!==bd(a.j.info(),b.getName(),1)){b=hd(a.Ea,b,c);var d=b.kf;b.pe.forEach(function(a){var b=this.j.table(a);a=d.get(a).map(function(a){return this.U.get(a)},this);gd(this.Ea,b,a,0);a.forEach(function(a){nd(this,b,[a,null])},this)},a)}}function ec(a){a.qb.forEach(function(a){var c=this.aa.get(a.getName());ed(this.Ea,c,C(a.ta),1);gd(this.Ea,c,C(a.va),1);fd(this.Ea,c,C(a.na),1)},a)}m.ia=aa();m.Gb=function(){var a=C(this.qb).map(function(a){return jd(a)});this.ld.update(a)};
function md(a,b){if(!a.aa.has(b.getName()))throw new E(106,b.getName());};function pd(a,b,c,d){this.c=a;this.A=b;this.da=this.c==F?!1:c;this.ma=this.A==F?!1:d}var F=new (aa());pd.prototype.toString=function(){return(this.da?"(":"[")+(this.c==F?"unbound":this.c)+", "+(this.A==F?"unbound":this.A)+(this.ma?")":"]")};function qd(a){if(rd(a))return[];var b=null,c=null;a.c==F||(b=new pd(F,a.c,!1,!a.da));a.A==F||(c=new pd(a.A,F,!a.ma,!1));return[b,c].filter(function(a){return null!==a})}pd.prototype.reverse=function(){return new pd(this.A,this.c,this.ma,this.da)};
function sd(a,b){var c=td(a.c,b.c,!0,a.da,b.da);if(0==c)return!0;var d=-1==c?a:b,c=1==c?a:b;return d.A==F||d.A>c.c||d.A==c.c&&!d.ma&&!c.da}function ud(){return new pd(F,F,!1,!1)}function rd(a){return a.c==F&&a.A==F}function vd(a){return a.c==a.A&&a.c!=F&&!a.da&&!a.ma}pd.prototype.contains=function(a){var b=this.A==F||a<this.A||a==this.A&&!this.ma;return(this.c==F||a>this.c||a==this.c&&!this.da)&&b};
function td(a,b,c,d,e){function f(a){return c?a:1==a?-1:1}d=d||!1;e=e||!1;return a==F?b==F?(d?!e:e)?d?f(1):f(-1):0:f(-1):b==F?f(1):a<b?-1:a==b?(d?!e:e)?d?f(1):f(-1):0:1}function wd(a,b){var c=td(a.c,b.c,!0,a.da,b.da);0==c&&(c=td(a.A,b.A,!1,a.ma,b.ma));return c};function G(a,b){this.entries=a;this.L=D(b);this.Ya=null}function H(a){return wc(a.L)}function xd(a){return a.entries.map(function(a){return a.sa.s})}function yd(a){return a.entries.map(function(a){return a.sa.id()})}function zd(a,b){return a.Ya.get(b.m())}var Ad=null;function Bd(){null===Ad&&(Ad=new G([],[]));return Ad}
function Cd(a){if(0==a.length)return Bd();for(var b=a.reduce(function(a,b){return a+b.entries.length},0),c=Array(b),d=0,b=a.map(function(a){var b=B();a.entries.forEach(function(a){c[d++]=a;b.set(a.id,a)});return b}),e=B(),f=0;f<c.length;f++)b.every(function(a){return a.has(c[f].id)})&&e.set(c[f].id,c[f]);return new G(C(e),wc(a[0].L))}function Dd(a){if(0==a.length)return Bd();var b=B();a.forEach(function(a){a.entries.forEach(function(a){b.set(a.id,a)})});return new G(C(b),wc(a[0].L))}
function Ed(a,b){var c=1<b.length,d=a.map(function(a){return new Fd(a,c)});return new G(d,b)}function Fd(a,b){this.sa=a;this.id=Gd++;this.Td=b}var Gd=0;function I(a,b){var c=b.Za();return null!==c&&a.sa.s.hasOwnProperty(c)?a.sa.s[c]:a.Td?a.sa.s[J(b.H())][b.getName()]:a.sa.s[b.getName()]}function Hd(a,b,c){var d=b.Za();if(null!=d)a.sa.s[d]=c;else if(a.Td){var d=J(b.H()),e=a.sa.s[d];null==e&&(e={},a.sa.s[d]=e);e[b.getName()]=c}else a.sa.s[b.getName()]=c}
function Id(a,b,c,d){function e(a,b){if(a.Td){var c=a.sa.s,d;for(d in c)f[d]=c[d]}else f[b[0]]=a.sa.s}var f={};e(a,b);e(c,d);a=new z(-1,f);return new Fd(a,!0)};r("lf.bind",function(a){return new Jd(a)});function Jd(a){this.fa=a}r("lf.Binder",Jd);Jd.prototype.wa=g("fa");function Kd(){this.Re=Ld();var a=Md();this.fc=B();this.fc.set(1,Nd());this.fc.set(2,Od());this.fc.set(4,a);this.fc.set(3,a);this.fc.set(5,Pd())}Kd.Ac=function(){return Kd.Ne?Kd.Ne:Kd.Ne=new Kd};function Qd(a,b,c){return(a.fc.get(b)||null).get(c)||null}function Ld(){function a(a){return a}var b=B();b.set(1,function(a){return null===a?null:a?1:0});b.set(2,function(a){return null===a?null:a.getTime()});b.set(3,a);b.set(4,a);b.set(5,a);return b}
function Nd(){var a=B();a.set("eq",function(a,c){return a==c});a.set("neq",function(a,c){return a!=c});return a}
function Md(){var a=Nd();a.set("between",function(a,c){return null===a||null===c[0]||null===c[1]?!1:a>=c[0]&&a<=c[1]});a.set("gte",function(a,c){return null===a||null===c?!1:a>=c});a.set("gt",function(a,c){return null===a||null===c?!1:a>c});a.set("in",function(a,c){return-1!=c.indexOf(a)});a.set("lte",function(a,c){return null===a||null===c?!1:a<=c});a.set("lt",function(a,c){return null===a||null===c?!1:a<c});return a}
function Pd(){var a=Md();a.set("match",function(a,c){return null===a||null===c?!1:(new RegExp(c)).test(a)});return a}
function Od(){var a=B();a.set("between",function(a,c){return null===a||null===c[0]||null===c[1]?!1:a.getTime()>=c[0].getTime()&&a.getTime()<=c[1].getTime()});a.set("eq",function(a,c){return(null===a?-1:a.getTime())==(null===c?-1:c.getTime())});a.set("gte",function(a,c){return null===a||null===c?!1:a.getTime()>=c.getTime()});a.set("gt",function(a,c){return null===a||null===c?!1:a.getTime()>c.getTime()});a.set("in",function(a,c){return c.some(function(c){return c.getTime()==a.getTime()})});a.set("lte",
function(a,c){return null===a||null===c?!1:a.getTime()<=c.getTime()});a.set("lt",function(a,c){return null===a||null===c?!1:a.getTime()<c.getTime()});a.set("neq",function(a,c){return(null===a?-1:a.getTime())!=(null===c?-1:c.getTime())});return a};function K(){this.h=this.C=null}var Rd=[];K.prototype.getParent=g("C");K.prototype.hb=function(){for(var a=this;!ea(a.getParent());)a=a.getParent();return a};function Sd(a){for(var b=0;!ea(a.getParent());)b++,a=a.getParent();return b}function L(a){return a.h||Rd}function Td(a,b){return L(a)[b]||null}function Ud(a,b,c){b.C=a;null===a.h?a.h=[b]:a.h.splice(c,0,b)}function Vd(a,b){b.C=a;null===a.h?a.h=[b]:a.h.push(b)}
function Wd(a,b){var c=a.h&&a.h[b];return c?(c.C=null,a.h.splice(b,1),0==a.h.length&&(a.h=null),c):null}K.prototype.removeChild=function(a){return Wd(this,L(this).indexOf(a))};function Xd(a,b,c){Td(a,c).C=null;b.C=a;a.h[c]=b}function Yd(a,b,c){!1!==b.call(c,a)&&L(a).forEach(function(a){Yd(a,b,c)})};function Zd(){K.call(this);this.pa=$d++}t(Zd,K);var $d=0;Zd.prototype.W=g("pa");function ae(a,b,c){Zd.call(this);this.O=a;this.value=b;this.G=c;this.uc=Qd(Kd.Ac(),this.O.I(),this.G);this.ab=!1;this.bc=b}t(ae,Zd);m=ae.prototype;m.Jb=function(){var a=new ae(this.O,this.value,this.G);a.bc=this.bc;a.vd(this.ab);var b=this.W();a.pa=b;return a};m.gb=function(a){return null!=a?(a.push(this.O),a):[this.O]};m.vd=ba("ab");function be(a){var b=!1;a.value instanceof Jd||(b="array"==da(a.value)?!a.value.some(function(a){return a instanceof Jd}):!0);if(!b)throw new E(501);}
m.eval=function(a){be(this);if("in"==this.G)return ce(this,a);var b=a.entries.filter(function(a){return this.uc(I(a,this.O),this.value)!=this.ab},this);return new G(b,H(a))};m.bind=function(a){if(this.bc instanceof Jd){var b=this.bc.wa();if(a.length<=b)throw new E(510);this.value=a[b]}else"array"==da(this.bc)&&(this.value=this.bc.map(function(b){if(b instanceof Jd){var d=b.wa();if(a.length<=d)throw new E(510);return a[b.wa()]}return b}))};
function ce(a,b){var c=D(a.value),d=function(a){return null===a?!1:c.has(a)!=this.ab}.bind(a),e=b.entries.filter(function(a){return d(I(a,this.O))},a);return new G(e,H(b))}m.toString=function(){return"value_pred("+this.O.m()+" "+this.G+(this.ab?"(complement)":"")+" "+this.value+")"};function de(a){this.ca=a;this.ad=this.Ba=null}function ee(a,b){null===a.Ba&&null!=a.u&&(a.Ba=fe(a.u));return a.Ba.get(b)||null}function fe(a){var b=B();Yd(a,function(a){b.set(a.W(),a)});return b}function ge(a,b){b.u&&(a.u=b.u.Jb());a.ad=b}de.prototype.bind=function(){return this};function he(a,b){var c=a.u;null!=c&&Yd(c,function(a){a instanceof ae&&a.bind(b)})};function ie(a){de.call(this,a)}t(ie,de);function je(a){var b="";a.forEach(function(c,d){b+=c.O.m()+" ";b+=1==c.kb?"ASC":"DESC";d<a.length-1&&(b+=", ")});return b}ie.prototype.$=function(){return D(this.c)};ie.prototype.clone=function(){var a=new ie(this.ca);ge(a,this);this.f&&(a.f=this.f.slice());this.c&&(a.c=this.c.slice());a.X=this.X;a.N=this.N;this.M&&(a.M=this.M.slice());this.ja&&(a.ja=this.ja.slice());this.Qb&&(a.Qb=this.Qb);this.Yb&&(a.Yb=this.Yb);a.yb=this.yb;return a};
ie.prototype.bind=function(a){ie.Hb.bind.call(this,a);null!=this.Qb&&(this.X=a[this.Qb.wa()]);null!=this.Yb&&(this.N=a[this.Yb.wa()]);he(this,a);return this};function ke(a,b){this.Ca=a;this.aa=b}ke.prototype.hb=g("Ca");ke.prototype.$=g("aa");function le(a){var b=D();a.forEach(function(a){a.$().forEach(b.add.bind(b))});return b};function me(a,b){this.global=a;this.Ka=a.i(kc);this.sd=b.map(function(a){return a.context});this.af=b.map(function(a){return a.ee});this.De=le(this.af);this.sf=ne(this);this.cb=y()}function ne(a){return a.sd.some(function(a){return!(a instanceof ie)})?1:0}m=me.prototype;
m.exec=function(){function a(){var f=d.shift();if(f){var h=e[c.length];return f.hb().exec(b,h).then(function(b){c.push(b[0]);return a()})}return w()}var b=new kd(this.global,this.De),c=[],d=this.af.slice(),e=this.sd;return a().then(function(){return this.Ka.Cb(this.sf,b).ia()}.bind(this)).then(function(){this.be(c);return c}.bind(this),function(a){b.Gb();throw a;})};m.I=g("sf");m.$=g("De");m.Mb=g("cb");m.W=function(){return ja(this)};m.be=aa();function oe(a,b){me.call(this,a,b);this.Fb=a.i(pc)}t(oe,me);oe.prototype.getPriority=l(0);oe.prototype.be=function(a){this.sd.forEach(function(b,c){pe(this.Fb,b,a[c])},this)};function qe(a,b){this.g=a;this.Fb=a.i(pc);this.Da=a.i(oc);this.ld=new Ic(a);this.qb=b;var c=a.i(qc),d=this.qb.map(function(a){return c.table(a.getName())});this.aa=D(d);this.cb=y()}m=qe.prototype;m.exec=function(){this.ld.update(this.qb);this.Pc();return w()};m.I=l(1);m.$=g("aa");m.Mb=g("cb");m.W=function(){return ja(this)};m.getPriority=l(1);m.Pc=function(){var a=re(this.Fb,this.aa);0!=a.length&&(a=new oe(this.g,a),se(this.Da,a))};function te(a){this.g=a;this.Ka=a.i(kc);this.Da=a.i(oc)}te.prototype.$d=function(a){a=new qe(this.g,a);se(this.Da,a)};function M(a,b){this.Pa=a;this.l=b;this.Va=B()}r("lf.backstore.FirebaseRawBackStore",M);M.prototype.gd=g("l");M.prototype.hd=function(){throw new E(351);};function ue(a,b){var c=y(),d=a;b.length&&(d=a.child(b));d.once("value",function(a){c.resolve(a.val())},function(a){c.reject(a)});return c.ha}function ve(a,b,c){function d(a){a?e.reject(a):e.resolve()}c=c||!1;var e=y();c?a.set(b,d):a.update(b,d);return e.ha}
M.prototype.Fa=function(a){return ue(this.l,"@rev/R").then(function(a){this.Na=a;return ue(this.l,"@table")}.bind(this)).then(function(b){var c=0,d;for(d in b)this.Va.set(d,b[d]),b[d]>c&&(c=b[d]);a.ra().forEach(function(a){this.Va.has(a.getName())||(b[a.getName()]=++c)},this);d=this.l.child("@table");return ve(d,b)}.bind(this))};
function we(a,b,c){var d=a.Va.get(b);return null!=d?function(){var a={},b=y();this.l.orderByChild("T").equalTo(d).once("value",function(d){d.forEach(function(b){var d=c(b.val());a[parseInt(b.key(),10)]=d});b.resolve(a)});return b.ha}.call(a).then(function(a){a["@rev"]={R:++this.Na};return ve(this.l,a)}.bind(a)):w()}M.prototype.sc=function(a){return we(this,a,l(null)).then(function(){this.Va.delete(a);return ve(this.l.child("@table/"+a),null,!0)}.bind(this))};M.prototype.dropTable=M.prototype.sc;
M.prototype.nc=function(a,b,c){return we(this,a,function(a){var e=a.P;e[b]=c;return{R:this.Na+1,T:a.T,P:e}}.bind(this))};M.prototype.addTableColumn=M.prototype.nc;M.prototype.tc=function(a,b){return we(this,a,function(a){var d=a.P;delete d[b];return{R:this.Na+1,T:a.T,P:d}}.bind(this))};M.prototype.dropTableColumn=M.prototype.tc;M.prototype.Oc=function(a,b,c){return we(this,a,function(a){var e=a.P;e[c]=e[b];delete e[b];return{R:this.Na+1,T:a.T,P:e}}.bind(this))};M.prototype.renameTableColumn=M.prototype.Oc;
M.prototype.tb=function(){throw new E(351);};M.prototype.createRow=M.prototype.tb;M.prototype.Dc=g("Pa");M.prototype.getVersion=M.prototype.Dc;M.prototype.dc=function(a){var b=y();a=this.Va.get(a);this.l.orderByChild("T").equalTo(a).once("value",function(a){var d=[];a.forEach(function(a){d.push(a.val().P)});b.resolve(d)});return b.ha};M.prototype.dump=function(){var a={},b=bc(this.Va).map(function(b){return this.dc(b).then(function(d){a[b]=d})}.bind(this));return fb(b).then(function(){return a})};
M.prototype.dump=M.prototype.dump;function xe(a,b,c){dc.call(this,c,b);this.l=a}t(xe,dc);xe.prototype.H=function(a){return this.l.Bc(a)};
xe.prototype.pc=function(){var a=this.Ra.qb;if(0==a.size)this.Y.resolve();else{var b=this.l.Na+1;this.l.Na=b;var c={"@rev":{R:b}};a.forEach(function(a,e){var f=this.l.Va.get(e);a.ta.forEach(function(a,d){c[d]={R:b,T:f,P:a.s}});a.na.forEach(function(a,d){c[d]={R:b,T:f,P:a[1].s}});a.va.forEach(function(a,b){c[b]=null})},this);this.l.l.update(c,function(c){null===c?this.Y.resolve():(this.l.Na=b-1,c=C(a).map(function(a){return ye(this.l,a.getName())},this),fb(c).then(this.Y.reject.bind(this.Y),this.Y.reject.bind(this.Y)))}.bind(this))}return this.Y.ha};function ze(){this.ua=B()}function Ae(a,b){if(0==b.length)return C(a.ua);var c=[];b.forEach(function(a){a=this.ua.get(a)||null;null===a||c.push(a)},a);return c}ze.prototype.getData=g("ua");ze.prototype.get=function(a){return w(Ae(this,a))};function Be(a,b){b.forEach(function(a){this.ua.set(a.id(),a)},a)}ze.prototype.put=function(a){Be(this,a);return w()};function Ce(a,b){0==b.length||b.length==a.ua.size?a.ua.clear():b.forEach(function(a){this.ua.delete(a)},a)}
ze.prototype.remove=function(a){Ce(this,a);return w()};function De(a){return 0==a.ua.size?0:bc(a.ua).reduce(function(a,c){return a>c?a:c},0)};function Ee(a,b){this.j=a;this.yf=b;this.Nc=B();this.Na=-1;this.L=B();this.Va=B();this.Fd=null}m=Ee.prototype;
m.Fa=function(a){this.l=this.yf.child(this.j.name());var b=a||function(){return w()};return ue(this.l,"@db/version").then(function(a){return null===a?ve(this.l,Fe(this),!0).then(function(){var a=new M(0,this.l);return b(a)}.bind(this)):a==this.j.version()?ue(this.l,"@rev/R").then(function(a){this.Na=a;return ue(this.l,"@table")}.bind(this)).then(function(a){for(var b in a)this.Va.set(b,a[b]);a=this.j.ra().map(function(a){return ye(this,a.getName())},this);return fb(a)}.bind(this)).then(function(){Ge(this);
He(this);return w()}.bind(this)):this.ce(a,b).then(function(){return this.Fa()}.bind(this))}.bind(this))};m.ce=function(a,b){var c=new M(a,this.l);return c.Fa(this.j).then(function(){return w()}.bind(this)).then(function(){return b(c)}).then(function(){var a=this.l.child("@db");return ve(a,{version:this.j.version()},!0)}.bind(this))};
function He(a){a.l.off();a.l.on("child_removed",a.ng.bind(a));a.Gd&&(a.Gd.off(),a.Nc.clear());a.Gd=a.l.orderByChild("R").startAt(a.Na+1);a.Gd.on("value",a.$d.bind(a))}function Ge(a){qb=C(a.L).map(function(a){return De(a)}).reduce(function(a,c){return a>c?a:c},0)+1}m.ng=function(a){var b=a.val(),c=this.Nc.get(b.T)||null;null===c&&(c=D(),this.Nc.set(b.T,c));c.add(parseInt(a.key(),10))};
m.$d=function(a){var b=a.child("@rev/R").val();null!=b&&b!=this.Na&&(this.Na=b,a=Ie(this,a),a.forEach(function(a){var b=this.L.get(a.getName()),e=bc(a.va);0<e.length&&Ce(b,e);var f=C(a.ta);a.na.forEach(function(a){f.push(a[1])});Be(b,f)},this),0<a.length&&this.Ic(a),He(this))};
function Ie(a,b){var c=D(),d=B();a.Va.forEach(function(a,b){var h=this.L.get(b),k=new id(b);if(this.Nc.has(a)){var n=wc(this.Nc.get(a));n.forEach(function(a){c.add(a)});Ae(h,n).forEach(function(a){k.delete(a)})}d.set(a,k)}.bind(a));b.forEach(function(a){if("@rev"!=a.key()){var b=parseInt(a.key(),10);if(!c.has(b)){a=a.val();var h=d.get(a.T),k=this.L.get(h.getName());k.getData().has(b)?h.modify([Ae(k,[b])[0],new z(b,a.P)]):h.add(new z(b,a.P))}}}.bind(a));return C(d).filter(function(a){return!a.md()})}
function ye(a,b){var c=y(),d=a.Va.get(b);a.l.orderByChild("T").equalTo(d).once("value",function(a){var d=new ze,h=[];a.forEach(function(a){h.push(new z(parseInt(a.key(),10),a.val().P))});Be(d,h);this.L.set(b,d);c.resolve()}.bind(a));return c.ha}function Fe(a){var b={};b["@db"]={version:a.j.version()};b["@rev"]={R:1};a.Na=1;b["@table"]={};a.j.ra().forEach(function(a,d){var e=a.getName();b["@table"][e]=d;this.L.set(e,new ze);this.Va.set(e,d)},a);return b}m.Cb=function(a,b){return new xe(this,a,b)};
m.Bc=function(a){var b=this.L.get(a)||null;if(null!==b)return b;throw new E(101,a);};m.close=aa();m.subscribe=ba("Fd");m.Ic=function(a){null!=this.Fd&&this.Fd(a)};function N(a,b,c,d){this.l=b;this.Xa=c;this.Pa=a;this.Yc=d}r("lf.backstore.IndexedDBRawBackStore",N);N.prototype.gd=g("l");N.prototype.getRawDBInstance=N.prototype.gd;N.prototype.hd=g("Xa");N.prototype.getRawTransaction=N.prototype.hd;N.prototype.sc=function(a){return new v(function(b,c){try{this.l.deleteObjectStore(a)}catch(d){c(d);return}b()},this)};N.prototype.dropTable=N.prototype.sc;
function Je(a,b,c,d){return new v(function(a,f){var h;try{var k=this.Xa.objectStore(b);h=k.openCursor()}catch(n){f(n);return}h.onsuccess=function(){var b=h.result;b?(c(b),b.continue()):(d(k),a())};h.onerror=f},a)}function Ke(a){var b=null;return b=a instanceof ArrayBuffer?ub(a):a instanceof Date?a.getTime():a}
function Le(a,b,c){function d(a){var b=Cc(a.value),d=b.s,e;for(e in d){var x=sb(d[e]);c(x);d[e]=x.Ja()}a.update(b.Ja())}function e(a){var b=sb(a.value);c(b);a.update(b.Ja())}return Je(a,b,a.Yc?d:e,aa())}N.prototype.nc=function(a,b,c){var d=Ke(c);return Le(this,a,function(a){a.s[b]=d})};N.prototype.addTableColumn=N.prototype.nc;N.prototype.tc=function(a,b){return Le(this,a,function(a){delete a.s[b]})};N.prototype.dropTableColumn=N.prototype.tc;
N.prototype.Oc=function(a,b,c){return Le(this,a,function(a){a.s[c]=a.s[b];delete a.s[b]})};N.prototype.renameTableColumn=N.prototype.Oc;function Me(a,b){var c=[];return new v(function(a,e){var f;try{f=this.Xa.objectStore(b).openCursor()}catch(h){e(h);return}f.onsuccess=function(){var b=f.result;if(b){if(this.Yc){var e;e=Cc(b.value).s;for(var n in e)c.push(e[n])}else c.push(b.value);b.continue()}else a(c)}.bind(this);f.onerror=e},a)}N.prototype.tb=function(a){var b={},c;for(c in a)b[c]=Ke(a[c]);return tb(b)};
N.prototype.createRow=N.prototype.tb;N.prototype.Dc=g("Pa");N.prototype.getVersion=N.prototype.Dc;N.prototype.dump=function(){for(var a=this.l.objectStoreNames,b=[],c=0;c<a.length;++c){var d=a.item(c);b.push(this.dc(d))}return fb(b).then(function(b){var c={};b.forEach(function(b,d){c[a.item(d)]=b});return c})};N.prototype.dump=N.prototype.dump;N.prototype.dc=function(a){return Me(this,a).then(function(a){return a.map(function(a){return a.value})})};function Ne(a,b){this.ba=a;this.Kb=b}m=Ne.prototype;m.get=function(a){if(0==a.length)return this.yc();a=a.map(function(a){return new v(function(c,d){var e;try{e=this.ba.get(a)}catch(f){d(f);return}e.onerror=d;e.onsuccess=function(a){c(this.Kb(a.target.result))}.bind(this)},this)},this);return fb(a)};
m.yc=function(){return new v(function(a,b){var c=[],d;try{d=this.ba.openCursor()}catch(e){b(e);return}d.onerror=b;d.onsuccess=function(){var b=d.result;b?(c.push(this.Kb(b.value)),b.continue()):a(c)}.bind(this)},this)};m.Sb=function(a){return new v(function(b,c){var d;try{d=a()}catch(e){c(e);return}d.onsuccess=b;d.onerror=c},this)};m.put=function(a){if(0==a.length)return w();a=a.map(function(a){return this.Sb(function(){return this.ba.put(a.Ja())}.bind(this))},this);return fb(a)};
m.remove=function(a){return new v(function(b,c){var d=this.ba.count();d.onsuccess=function(d){if(0==a.length||d.target.result==a.length)return this.Sb(function(){return this.ba.clear()}.bind(this)).then(b,c);d=a.map(function(a){return this.Sb(function(){return this.ba.delete(a)}.bind(this))},this);fb(d).then(b,c)}.bind(this);d.onerror=c},this)};function Oe(a,b,c,d,e){dc.call(this,c,d);this.g=a;this.Xa=b;this.Yc=e;this.Xa.oncomplete=this.Y.resolve.bind(this.Y);this.Xa.onabort=this.Y.reject.bind(this.Y)}t(Oe,dc);Oe.prototype.H=function(a,b,c){return this.Yc?(c=null!=c?c:0,a=this.Xa.objectStore(a),new Dc(a,b,0==c?pa(Fc,this.g):Gc)):new Ne(this.Xa.objectStore(a),b)};Oe.prototype.pc=function(){return this.Y.ha};function Pe(a,b){this.g=a;this.j=b;this.Zc=b.bf().Lf||!1}m=Pe.prototype;
m.Fa=function(a){var b=window.indexedDB||window.mozIndexedDB||window.webkitIndexedDB||window.msIndexedDB;if(null==b)throw new E(352);var c=a||function(){return w()};return new v(function(a,e){var f;try{f=b.open(this.j.name(),this.j.version())}catch(h){e(h);return}f.onerror=e;f.onupgradeneeded=function(a){Qe(this,c,a).then(aa(),e)}.bind(this);f.onsuccess=function(b){this.l=b.target.result;this.le().then(function(b){qb=b+1;a(this.l)}.bind(this))}.bind(this)},this)};
function Qe(a,b,c){var d=c.target.result,e=c.target.transaction;c=new N(c.oldVersion,d,e,a.Zc);Re(d);a.j.ra().forEach(pa(a.Gf,d,e),a);return b(c)}function Re(a){for(var b=[],c=0;c<a.objectStoreNames.length;++c){var d=a.objectStoreNames.item(c);-1!=d.indexOf(".")&&b.push(d)}b.forEach(function(b){try{a.deleteObjectStore(b)}catch(c){}})}
m.Gf=function(a,b,c){a.objectStoreNames.contains(c.getName())||a.createObjectStore(c.getName(),{keyPath:"id"});c.zb()&&(c.xa().forEach(function(c){this.rc(a,b,c.m(),"btree")},this),this.rc(a,b,Se(c),"rowid"))};m.rc=function(a,b,c,d){a.objectStoreNames.contains(c)||(a.createObjectStore(c,{keyPath:"id"}),a=b.objectStore(c),(this.Zc?new Dc(a,sb,Gc):new Ne(a,sb)).put([new wb(new vb(d))]))};
m.Cb=function(a,b){var c=bc(b.$());ld(b).forEach(function(a){c.push(a)});var d=this.l.transaction(c,0==a?"readonly":"readwrite");return new Oe(this.g,d,b,a,this.Zc)};
m.le=function(a){function b(){if(0==d.length)return w();var a=d.shift();return c(a).then(b)}function c(b){return new v(function(c,d){var T;try{T=(a||e.transaction([b])).objectStore(b).openCursor(null,"prev")}catch(qa){d(qa);return}T.onsuccess=function(a){(a=a.target.result)&&(f=Math.max(f,h(a)));c(f)};T.onerror=function(){c(f)}})}var d=this.j.ra().map(function(a){return a.getName()}),e=this.l,f=0,h=function(a){return this.Zc?(a=Cc(a.value),Object.keys(a.s).reduce(function(a,b){return Math.max(a,b)},
0)):a.key}.bind(this);return new v(function(a){b().then(function(){a(f)})})};m.close=function(){this.l.close()};m.Bc=function(){throw new E(511);};m.subscribe=aa();m.Ic=aa();function Te(a,b,c){dc.call(this,c,b);this.ba=a;0==b&&this.Y.resolve()}t(Te,dc);Te.prototype.H=function(a){return this.ba.Bc(a)};Te.prototype.pc=function(){this.Y.resolve();return this.Y.ha};function Ue(a){this.j=a;this.L=B()}m=Ue.prototype;m.Fa=function(){this.j.ra().forEach(this.Yf,this);return w()};m.Bc=function(a){var b=this.L.get(a)||null;if(null===b)throw new E(101,a);return b};m.Cb=function(a,b){return new Te(this,a,b)};function Ve(a,b){if(!a.L.has(b)){var c=new ze;a.L.set(b,c);return c}return null}m.Yf=function(a){Ve(this,a.getName());a.zb()&&(a.xa().forEach(function(a){this.rc(a.m(),"btree")},this),this.rc(Se(a),"rowid"))};m.rc=function(a,b){var c=Ve(this,a);null===c||c.put([new wb(new vb(b))])};
m.close=aa();m.subscribe=aa();m.Ic=aa();function We(a){Ue.call(this,a);this.od=null}t(We,Ue);We.prototype.subscribe=function(a){null===this.od&&(this.od=a)};We.prototype.Ic=function(a){null===this.od||this.od(a)};function Xe(a,b,c){this.Xa=a;this.w=b;this.Kb=c}Xe.prototype.get=function(a){var b=this.Kb;return Ye(this.Xa,"SELECT id, value FROM "+this.w+" "+(0==a.length?"":"WHERE id IN ("+a.join(",")+")"),[],function(a){for(var d=a.rows.length,e=Array(d),f=0;f<d;++f)e[f]=b({id:a.rows.item(f).id,value:JSON.parse(a.rows.item(f).value)});return e})};
Xe.prototype.put=function(a){if(0==a.length)return w();var b="INSERT OR REPLACE INTO "+this.w+"(id, value) VALUES (?, ?)";a.forEach(function(a){Ye(this.Xa,b,[a.id(),JSON.stringify(a.s)])},this);return w()};Xe.prototype.remove=function(a){Ye(this.Xa,"DELETE FROM "+this.w+" "+(0==a.length?"":"WHERE id IN ("+a.join(",")+")"),[]);return w()};function Ze(a,b,c){dc.call(this,b,c);this.l=a;this.L=B();this.Id=[]}t(Ze,dc);function $e(a){return a.replace(".","__d__").replace("#","__s__")}Ze.prototype.H=function(a,b){var c=this.L.get(a)||null;null===c&&(c=new Xe(this,$e(a),b),this.L.set(a,c));return c};function Ye(a,b,c,d){var e=y();a.Id.push({Ag:b,qg:c,transform:d,Y:e});return e.ha}
Ze.prototype.pc=function(){var a=null,b=this.Y.reject.bind(this.Y),c=function(a,b){this.Y.reject(b)}.bind(this),d=[],e=function(b,h){if(null!==a){var k=h;null!=a.transform&&null!=h&&(k=a.transform(h));d.push(k);a.Y.resolve(k)}0<this.Id.length?(a=k=this.Id.shift(),b.executeSql(k.Ag,k.qg,e,c)):this.Y.resolve(d)}.bind(this);0==this.rf?this.l.readTransaction(e,b):this.l.transaction(e,b);return this.Y.ha};function O(a,b,c){this.l=c;this.g=a;this.Pa=b}r("lf.backstore.WebSqlRawBackStore",O);O.prototype.gd=g("l");O.prototype.getRawDBInstance=O.prototype.gd;O.prototype.hd=function(){throw new E(356);};O.prototype.getRawTransaction=O.prototype.hd;function af(a){return new Ze(a.l,new kd(a.g,D()),1)}O.prototype.sc=function(a){var b=af(this);Ye(b,"DROP TABLE "+a,[]);return b.ia()};O.prototype.dropTable=O.prototype.sc;
O.prototype.dc=function(a){var b=af(this);Ye(b,"SELECT id, value FROM "+a,[]);return b.ia().then(function(a){for(var b=a[0].rows.length,e=Array(b),f=0;f<b;++f)e[f]={id:a[0].rows.item(f).id,value:JSON.parse(a[0].rows.item(f).value)};return w(e)})};function bf(a,b,c){var d=af(a),e="UPDATE "+b+" SET value=? WHERE id=?";return a.dc(b).then(function(a){a.forEach(function(a){a=c(a);Ye(d,e,[JSON.stringify(a.value),a.id])});return d.ia()})}
O.prototype.nc=function(a,b,c){var d=Ke(c);return bf(this,a,function(a){a.value[b]=d;return a})};O.prototype.addTableColumn=O.prototype.nc;O.prototype.tc=function(a,b){return bf(this,a,function(a){delete a.value[b];return a})};O.prototype.dropTableColumn=O.prototype.tc;O.prototype.Oc=function(a,b,c){return bf(this,a,function(a){a.value[c]=a.value[b];delete a.value[b];return a})};O.prototype.renameTableColumn=O.prototype.Oc;O.prototype.tb=function(a){var b={},c;for(c in a)b[c]=Ke(a[c]);return tb(b)};
O.prototype.createRow=O.prototype.tb;O.prototype.Dc=g("Pa");O.prototype.getVersion=O.prototype.Dc;function cf(a){Ye(a,'SELECT tbl_name FROM sqlite_master WHERE type="table"',[],function(a){for(var c=Array(a.rows.length),d=0;d<c.length;++d)c[d]=a.rows.item(d).tbl_name;return c})}
O.prototype.dump=function(){var a=y(),b=af(this);cf(b);var c={};b.ia().then(function(b){b=b[0].filter(function(a){return"__lf_ver"!=a&&"__WebKitDatabaseInfoTable__"!=a}).map(function(a){return this.dc(a).then(function(b){c[a]=b})},this);fb(b).then(function(){a.resolve(c)})}.bind(this));return a.ha};O.prototype.dump=O.prototype.dump;function df(a,b,c){this.g=a;this.j=b;this.zg=c||4194304}function ef(a){return new kd(a.g,D())}m=df.prototype;m.Fa=function(a){if(null==window.openDatabase)throw new E(353);var b=a||function(){return w()};return new v(function(a,d){try{var e=window.openDatabase(this.j.name(),"",this.j.name(),this.zg);if(null!=e)this.l=e,ff(this,b).then(a,d);else throw new E(354);}catch(f){d(f)}},this)};
function ff(a,b){var c=y(),d=new Ze(a.l,ef(a),1);Ye(d,"CREATE TABLE IF NOT EXISTS __lf_ver(id INTEGER PRIMARY KEY, v INTEGER)",[]);Ye(d,"SELECT v FROM __lf_ver WHERE id = 0",[]);d.ia().then(function(a){var d=0;a[1].rows.length&&(d=a[1].rows.item(0).v);d<this.j.version()?this.ce(b,d).then(c.resolve.bind(c)):d>this.j.version()?c.reject(new E(108)):c.resolve()}.bind(a));return c.ha}m.Cb=function(a,b){if(null!=this.l)return new Ze(this.l,b,a);throw new E(2);};m.close=aa();
m.Bc=function(){throw new E(512);};m.subscribe=function(){throw new E(355);};m.Ic=function(){throw new E(355);};m.ce=function(a,b){var c=y();gf(this).then(function(){a(new O(this.g,b,this.l)).then(function(){return this.le()}.bind(this)).then(c.resolve.bind(c))}.bind(this),c.reject.bind(c));return c.ha};
function gf(a){var b=a.j.ra(),c=new Ze(a.l,ef(a),1),d=new Ze(a.l,ef(a),1);Ye(c,"INSERT OR REPLACE INTO __lf_ver VALUES (0, ?)",[a.j.version()]);cf(c);return c.ia().then(function(a){function c(a,b){Ye(d,"INSERT INTO "+a+"(id, value) VALUES(?, ?)",[-1,JSON.stringify(rb(new wb(new vb(b))))])}var h=a[1];h.filter(function(a){return-1!=a.indexOf("__d__")}).forEach(function(a){Ye(d,"DROP TABLE "+a,[])});var k=[],n=[],x=[];b.map(function(a){-1==h.indexOf(a.getName())&&k.push(a.getName());a.zb&&(a.xa().forEach(function(a){a=
$e(a.m());k.push(a);n.push(a)}),a=$e(Se(a)),k.push(a),x.push(a))});k.forEach(function(a){Ye(d,"CREATE TABLE "+a+"(id INTEGER PRIMARY KEY, value TEXT)",[])});n.forEach(function(a){c(a,"btree")});x.forEach(function(a){c(a,"rowid")});return d.ia()})}
m.le=function(){var a=0,b=y(),c=function(b){var c=new Ze(this.l,ef(this),0);Ye(c,"SELECT MAX(id) FROM "+b,[]);return c.ia().then(function(b){b=b[0].rows.item(0)[0];a=Math.max(b,a)})}.bind(this),d=this.j.ra().map(function(a){return c(a.getName())});fb(d).then(function(){b.resolve(a)},function(a){b.reject(a)});return b.ha};function hf(a){this.o=B();this.Zb=B();a.ra().forEach(function(a){this.Zb.set(a.getName(),D())},this)}m=hf.prototype;m.set=function(a,b){this.o.set(b.id(),b);this.Zb.get(a).add(b.id())};m.Vb=function(a,b){var c=this.Zb.get(a);b.forEach(function(a){this.o.set(a.id(),a);c.add(a.id())},this)};m.get=function(a){return this.o.get(a)||null};function jf(a,b){return b.map(function(a){return this.get(a)},a)}
m.$a=function(a,b,c){var d=[],e=Math.min(b,c),f=Math.max(b,c);a=this.Zb.get(a);if(a.size<f-e)a.forEach(function(a){a>=e&&a<=f&&(a=this.o.get(a),d.push(a))},this);else for(b=e;b<=f;++b)a.has(b)&&(c=this.o.get(b),d.push(c));return d};m.remove=function(a,b){this.o.delete(b);this.Zb.get(a).delete(b)};m.zc=function(a){return null!=a?this.Zb.get(a).size:this.o.size};m.clear=function(){this.o.clear();this.Zb.clear()};function kf(a,b,c){var d=0,e=a.length;for(c=c||mf;d<e;){var f=d+e>>1;0>c(a[f],b)?d=f+1:e=f}return d==e&&a[d]==b?d:~d}function mf(a,b){return a-b}function nf(a,b,c){c=kf(a,b,c);return 0>c?(a.splice(-(c+1),0,b),!0):!1};function of(a,b,c,d){a=b?a.reverse():a;if(null==c&&null==d)return a;c=Math.min(q(c)?c:a.length,a.length);if(0==c)return[];d=Math.min(d||0,a.length);return a.slice(d,d+c)};function pf(){this.oa=0}pf.prototype.add=function(a,b){this.oa+=b};pf.prototype.remove=function(a,b){this.oa-=b};pf.prototype.clear=function(){this.oa=0};function qf(a,b){a.clear();b.forEach(function(a){this.oa+=a.oa},a)};function rf(a,b,c,d){this.w=a;this.V=b;this.re=c;this.ob=new pf;if(d){a=511;a*=a*a;if(d.length>=a)throw new E(6,a);d=sf(this,d);this.qa=d=tf(d)}else this.clear()}var uf=[];m=rf.prototype;m.getName=g("w");m.toString=function(){return this.qa.toString()};m.add=function(a,b){this.qa=this.qa.xb(a,b)};m.set=function(a,b){this.qa=this.qa.xb(a,b,!0)};m.remove=function(a,b){this.qa=this.qa.remove(a,b)};m.get=function(a){return this.qa.get(a)};
m.bd=function(a){if(null==a)return this.Oa().oa;if(a instanceof pd){if(rd(a))return this.Oa().oa;if(vd(a))return this.get(a.c).length}return this.$a([a]).length};m.Oa=g("ob");m.yc=function(a,b,c,d){c=Array(a);this.qa.fill({offset:b?this.ob.oa-a-d:d,count:a,oe:0},c);return b?c.reverse():c};
m.$a=function(a,b,c,d){var e=vf(this.qa).b[0];if(!q(e)||0==c)return uf;b=b||!1;c=null!=c?Math.min(c,this.ob.oa):this.ob.oa;d=d||0;var f=Math.min(Math.max(this.ob.oa-d,0),c);if(0==f)return uf;if(!q(a)||1==a.length&&a[0]instanceof pd&&rd(a[0]))return this.yc(f,b,c,d);a=this.V.nf(a);var h=Array(b?this.ob.oa:f),k={count:0,X:h.length,reverse:b,N:d};a.forEach(function(a){for(var b=this.V.td(a),b=this.V.Sd(a)?e:b[0],b=wf(this.qa,b),c=k.count,d=0;null!=b&&k.count<k.X;)b.$a(a,k,h),k.count!=c?(d=0,c=k.count):
d++,b=2==d?null:b.next()},this);h.splice(k.count,f-k.count);return b?of(h,b,c,d):h};m.clear=function(){this.qa=xf(this);this.ob.clear()};m.Ma=function(a){return this.qa.Ma(a)};m.min=function(){return this.Hc(this.V.min.bind(this.V))};m.max=function(){return this.Hc(this.V.max.bind(this.V))};m.Hc=function(a){var b=vf(this.qa),c=yf(this.qa);if(0==b.b.length&&0==c.b.length)return null;var d=b.b[0],b=b.B[0],e=c.b[c.b.length-1],c=c.B[c.b.length-1];return 1==a(d,e)?[d,this.re?[b]:b]:[e,this.re?[c]:c]};
m.Ha=g("re");m.qc=g("V");m.Wd=function(a,b){return null!=a?-1==this.V.compare(a,b):!1};m.Qa=function(a,b){return null!=a?0==this.V.compare(a,b):!1};m.Ja=function(){for(var a=[],b=vf(this.qa);b;)a.push(new z(b.pa,[b.b,b.B])),b=b.za;return a};function zf(a,b,c,d){a=new rf(b,a,c);d=Af(d,a);a.qa=d;return a}function Bf(a,b){this.pa=a;this.F=b;this.ib=0;this.za=this.Ab=this.C=null;this.b=[];this.B=[];this.h=[]}function xf(a){return new Bf(qb++,a)}function P(a){return 0==a.ib}m=Bf.prototype;m.next=g("za");
function Cf(a){function b(a){return null!=a?a.pa.toString():"_"}var c=a.pa+"["+a.b.join("|")+"]",d=a.h.map(function(a){return a.pa}).join("|"),e=a.B.join("/"),f=b(a.Ab)+"{",f=P(a)?f+e:f+d,f=f+"}"+b(a.C);a.za&&(a=Cf(a.za),c=c+"  "+a[0],f=f+"  "+a[1]);return[c,f]}m.toString=function(){var a="",b=Cf(this),a=a+(b[0]+"\n"+b[1]+"\n");this.h.length&&(a+=this.h[0].toString());return a};function vf(a){return P(a)?a:vf(a.h[0])}function yf(a){return P(a)?a:yf(a.h[a.h.length-1])}
function Df(a,b){b&&(b.Ab=a);a&&(a.za=b)}function sf(a,b){for(var c=b.length,d=0,e=xf(a),f=e;0<c;){var h=768<=c?511:257<=c&&511>=c?c:257,k=b.slice(d,d+h);e.b=k.map(function(a){return a.key});e.B=k.map(function(a){return a.value});d+=h;c-=h;0<c&&(h=xf(e.F),Df(e,h),e=h)}return f}function Ef(a){var b=a[0],c=xf(b.F);c.ib=b.ib+1;c.h=a;for(b=0;b<a.length;++b)a[b].C=c,0<b&&c.b.push(a[b].b[0]);return c}
function tf(a){var b=a,c=[];do c.push(b),b=b.za;while(b);if(512>=c.length)b=Ef(c);else{var d=c.length,e=0,b=xf(a.F);for(b.ib=a.ib+2;0<d;){a=768<=d?511:257<=d&&511>=d?d:257;var f=c.slice(e,e+a),h=Ef(f);h.C=b;b.h.length&&(b.b.push(f[0].b[0]),Df(b.h[b.h.length-1],h));b.h.push(h);e+=a;d-=a}}return b}m.get=function(a){var b=Ff(this,a);if(P(this)){var c=uf;this.F.Qa(this.b[b],a)&&(c=c.concat(this.B[b]));return c}b=this.F.Qa(this.b[b],a)?b+1:b;return this.h[b].get(a)};
m.Ma=function(a){var b=Ff(this,a);return this.F.Qa(this.b[b],a)?!0:P(this)?!1:this.h[b].Ma(a)};m.remove=function(a,b){Gf(this,a,-1,b);if(null==this.C){var c=this;1==this.h.length&&(c=this.h[0],c.C=null);return c}return this};function Hf(a){return P(a)?a.b[0]:Hf(a.h[0])}function If(a){a.b=[];for(var b=1;b<a.h.length;++b)a.b.push(Hf(a.h[b]))}
function Gf(a,b,c,d){var e=Ff(a,b),f=P(a);if(!f){var h=a.F.Qa(a.b[e],b)?e+1:e;if(Gf(a.h[h],b,h,d))If(a);else return!1}else if(!a.F.Qa(a.b[e],b))return!1;if(a.b.length>e&&a.F.Qa(a.b[e],b)){if(q(d)&&!a.F.Ha()&&f&&(h=a.B[e],d=kf(h,d,void 0),0>d?d=!1:(h.splice(d,1),d=!0),d&&a.F.Oa().remove(b,1),a.B[e].length))return!1;a.b.splice(e,1);f&&(f=a.F.Ha()?1:a.B[e].length,a.B.splice(e,1),a.F.Oa().remove(b,f))}if(256>a.b.length&&null!=a.C){a:{b=null;if(a.za&&256<a.za.b.length)b=a.za,e=d=0,f=a.b.length+1;else if(a.Ab&&
256<a.Ab.b.length)b=a.Ab,d=a.Ab.b.length-1,e=P(a)?d:d+1,f=0;else{b=!1;break a}a.b.splice(f,0,b.b[d]);b.b.splice(d,1);d=P(a)?a.B:a.h;h=null;P(a)?h=b.B:(h=b.h,h[e].C=a);d.splice(f,0,h[e]);h.splice(e,1);P(b)||(If(b),If(a));b=!0}b||Jf(a,c)}return!0}
function Jf(a,b){var c,d,e;a.za&&511>a.za.b.length?(c=a.za,e=d=0):a.Ab&&(c=a.Ab,d=c.b.length,e=P(c)?c.B.length:c.h.length);d=[d,0].concat(a.b);Array.prototype.splice.apply(c.b,d);d=null;P(a)?d=a.B:(d=a.h,d.forEach(function(a){a.C=c}));d=[e,0].concat(d);Array.prototype.splice.apply(P(c)?c.B:c.h,d);Df(a.Ab,a.za);P(c)||If(c);-1!=b&&(a.C.b.splice(b,1),a.C.h.splice(b,1))}
m.xb=function(a,b,c){var d=Ff(this,a);if(P(this)){if(this.F.Qa(this.b[d],a)){if(c)this.F.Oa().remove(a,this.F.Ha()?1:this.B[d].length),this.B[d]=this.F.Ha()?b:[b];else{if(this.F.Ha())throw new E(201);if(!nf(this.B[d],b))throw new E(109);}this.F.Oa().add(a,1);return this}this.b.splice(d,0,a);this.B.splice(d,0,this.F.Ha()?b:[b]);this.F.Oa().add(a,1);512==this.b.length?(d=xf(this.F),a=xf(this.F),a.ib=1,a.b=[this.b[256]],a.h=[this,d],a.C=this.C,this.C=a,d.b=this.b.splice(256),d.B=this.B.splice(256),d.C=
a,Df(d,this.za),Df(this,d),d=a):d=this;return d}d=this.F.Qa(this.b[d],a)?d+1:d;a=this.h[d].xb(a,b,c);P(a)||1!=a.b.length||(this.b.splice(d,0,a.b[0]),a.h[1].C=this,a.h[0].C=this,this.h.splice(d,1,a.h[1]),this.h.splice(d,0,a.h[0]));return 512==this.b.length?Kf(this):this};function Kf(a){var b=xf(a.F),c=xf(a.F);b.C=a.C;b.ib=a.ib+1;b.b=[a.b[256]];b.h=[a,c];a.b.splice(256,1);c.C=b;c.ib=a.ib;c.b=a.b.splice(256);c.h=a.h.splice(257);c.h.forEach(function(a){a.C=c});a.C=b;Df(c,a.za);Df(a,c);return b}
function Ff(a,b){for(var c=0,d=a.b.length;c<d;){var e=c+d>>1;a.F.Wd(a.b[e],b)?c=e+1:d=e}return c}function wf(a,b){if(!P(a)){var c=Ff(a,b);a.F.Qa(a.b[c],b)&&c++;return wf(a.h[c],b)}return a}
m.$a=function(a,b,c){function d(a){return a[0]?a[1]?0:1:-1}var e=this.F.qc(),f=0,h=this.b.length-1,k=this.b,n=d(e.sb(k[f],a)),x=d(e.sb(k[h],a));if(1!=n&&(-1!=n||-1!=x)){var T=function(a,b){var c=a+b>>1;return c==a?c+1:c},qa=function(b,c,f){if(b>=c)return 0==f?c:-1;var h=d(e.sb(k[b],a));if(0==h)return b;if(1==h)return-1;h=T(b,c);if(h==c)return 0==f?c:-1;var n=d(e.sb(k[h],a));return 0==n?qa(b,h,n):-1==n?qa(h+1,c,f):qa(b+1,h,n)},$a=function(b,c){if(b>=c)return b;var f=d(e.sb(k[c],a));if(0==f)return c;
if(-1==f)return b;f=T(b,c);if(f==c)return b;var h=d(e.sb(k[f],a));return 0==h?$a(f,c):1==h?$a(b,f-1):-1};0!=n&&(f=qa(f+1,h,x));-1!=f&&(h=$a(f,h),-1!=h&&h>=f&&Lf(this,b,c,f,h+1))}};function Lf(a,b,c,d,e){for(;d<e&&(b.reverse||!(b.count>=b.X));++d)if(a.F.Ha())!b.reverse&&b.N?b.N--:c[b.count++]=a.B[d];else for(var f=0;f<a.B[d].length&&b.count<c.length;++f)!b.reverse&&b.N?b.N--:c[b.count++]=a.B[d][f]}
m.fill=function(a,b){if(P(this))for(var c=0;c<this.B.length&&0<a.count;++c)if(0<a.offset){if(a.offset-=this.F.Ha()?1:this.B[c].length,0>a.offset)for(var d=this.B[c].length+a.offset;d<this.B[c].length&&0<a.count;++d)b[a.oe++]=this.B[c][d],a.count--}else if(this.F.Ha())b[a.oe++]=this.B[c],a.count--;else for(d=0;d<this.B[c].length&&0<a.count;++d)b[a.oe++]=this.B[c][d],a.count--;else for(c=0;c<this.h.length&&0<a.count;++c)this.h[c].fill(a,b)};
function Af(a,b){for(var c=b.Oa(),d=a.map(function(a){var d=new Bf(a.id(),b);d.b=a.s[0];d.B=a.s[1];d.b.forEach(function(a,e){c.add(a,b.Ha()?1:d.B[e].length)});return d}),e=0;e<d.length-1;++e)Df(d[e],d[e+1]);return 1<d.length?tf(d[0]):d[0]};function Mf(a){this.compare=0==a?Nf:Of;this.Yd=0==a?function(a){return null!=a?a.reverse():null}:function(a){return a||null};this.de=0==a?Pf:Qf}t(Mf,Hc);function Of(a,b){return a>b?1:a<b?-1:0}function Nf(a,b){return Of(b,a)}function Qf(a,b){return wd(a,b)}function Pf(a,b){return wd(b,a)}m=Mf.prototype;m.sb=function(a,b){var c=this.Yd(b),d=[c.c==F,c.A==F];if(!d[0]){var e=this.compare(a,c.c);d[0]=c.da?1==e:-1!=e}d[1]||(e=this.compare(a,c.A),d[1]=c.ma?-1==e:1!=e);return d};
m.compare=function(a,b){return this.compare(a,b)};m.min=function(a,b){return a<b?1:a==b?0:-1};m.max=function(a,b){return a>b?1:a==b?0:-1};m.Rd=function(a,b){var c=this.sb(a,b);return c[0]&&c[1]};m.nf=function(a){return a.filter(function(a){return null!==a}).sort(function(a,c){return this.de(a,c)}.bind(this))};m.Sd=function(a){return this.Yd(a).c==F};m.td=function(a){a=this.Yd(a);return[a.c,a.A]};m.toString=function(){return this.compare==Nf?"SimpleComparator_DESC":"SimpleComparator_ASC"};function Rf(a){this.La=a.map(function(a){return new Mf(a)})}t(Rf,Hc);function Sf(a,b,c,d){for(var e=0,f=0;f<a.La.length&&0==e;++f)e=d(a.La[f],b[f],c[f]);return e}m=Rf.prototype;m.compare=function(a,b){return Sf(this,a,b,function(a,b,e){return b==F||e==F?0:a.compare(b,e)})};m.min=function(a,b){return Sf(this,a,b,function(a,b,e){return a.min(b,e)})};m.max=function(a,b){return Sf(this,a,b,function(a,b,e){return a.max(b,e)})};
m.sb=function(a,b){for(var c=[!0,!0],d=0;d<this.La.length&&(c[0]||c[1]);++d){var e=this.La[d].sb(a[d],b[d]);c[0]=c[0]&&e[0];c[1]=c[1]&&e[1]}return c};m.Rd=function(a,b){for(var c=!0,d=0;d<this.La.length&&c;++d)c=this.La[d].Rd(a[d],b[d]);return c};
m.nf=function(a){var b=a.filter(function(a){return a.every(fa)});a=Array(this.La.length);for(var c=0;c<a.length;c++)a[c]=b.map(function(a){return a[c]});a.forEach(function(a,b){a.sort(function(a,c){return this.La[b].de(a,c)}.bind(this))},this);b=Array(b.length);for(c=0;c<b.length;c++)b[c]=a.map(function(a){return a[c]});return b.sort(function(a,b){for(var c=0,h=0;h<this.La.length&&0==c;++h)c=this.La[h].de(a[h],b[h]);return c}.bind(this))};m.Sd=function(a){return this.La[0].Sd(a[0])};
m.td=function(a){var b=a.map(function(a,b){return this.La[b].td(a)[0]},this);a=a.map(function(a,b){return this.La[b].td(a)[1]},this);return[b,a]};function Tf(a){if(1==a.f.length)return new Mf(a.f[0].kb);a=a.f.map(function(a){return a.kb});return new Rf(a)};function Uf(a){this.fa=a;this.jb=D();this.Qc=new pf;this.ob=new pf}m=Uf.prototype;m.getName=function(){return this.fa.getName()};m.add=function(a,b){null===a?(this.jb.add(b),this.Qc.add(a,1)):this.fa.add(a,b)};m.set=function(a,b){null===a?(this.jb.clear(),this.Qc.clear(),this.add(a,b)):this.fa.set(a,b)};m.remove=function(a,b){null===a?b?(this.jb.delete(b),this.Qc.remove(a,1)):(this.jb.clear(),this.Qc.clear()):this.fa.remove(a,b)};m.get=function(a){return null===a?wc(this.jb):this.fa.get(a)};
m.bd=function(a){return this.fa.bd(a)};m.Oa=function(){qf(this.ob,[this.fa.Oa(),this.Qc]);return this.ob};m.$a=function(a,b,c,d){b=this.fa.$a(a,b,c,d);return null!=a?b:b.concat(wc(this.jb))};m.clear=function(){this.jb.clear();this.fa.clear()};m.Ma=function(a){return null===a?0!=this.jb.size:this.fa.Ma(a)};m.min=function(){return this.fa.min()};m.max=function(){return this.fa.max()};m.Ja=function(){return[new z(-2,wc(this.jb))].concat(this.fa.Ja())};m.qc=function(){return this.fa.qc()};
function Vf(a,b){for(var c=-1,d=0;d<b.length;++d)if(-2==b[d].id()){c=d;break}if(-1==c)throw new E(102);var d=b[c].s,e=b.slice(0);e.splice(c,1);var c=a(e),f=new Uf(c);d.forEach(function(a){f.jb.add(a)});return f}m.Ha=function(){return this.fa.Ha()};function Wf(a){this.w=a;this.nb=D();this.V=new Mf(1)}m=Wf.prototype;m.getName=g("w");m.add=function(a){if("number"!=typeof a)throw new E(103);this.nb.add(a)};m.set=function(a,b){this.add(a,b)};m.remove=function(a){this.nb.delete(a)};m.get=function(a){return this.Ma(a)?[a]:[]};m.min=function(){return this.Hc(this.V.min.bind(this.V))};m.max=function(){return this.Hc(this.V.max.bind(this.V))};
m.Hc=function(a){if(0==this.nb.size)return null;var b=wc(this.nb).reduce(function(b,d){return null===b||1==a(d,b)?d:b},null);return[b,[b]]};m.bd=function(){return this.nb.size};m.$a=function(a,b,c,d){var e=a||[ud()];a=wc(this.nb).filter(function(a){return e.some(function(b){return this.V.Rd(a,b)},this)},this);return of(a,b,c,d)};m.clear=function(){this.nb.clear()};m.Ma=function(a){return this.nb.has(a)};m.Ja=function(){return[new z(0,wc(this.nb))]};m.qc=g("V");
function Xf(a,b){var c=new Wf(a);b[0].s.forEach(function(a){c.add(a,a)});return c}m.Ha=l(!0);m.Oa=function(){var a=new pf;a.oa=this.nb.size;return a};function Yf(a){this.g=a;this.Ka=a.i(kc);this.D=a.i(mc);this.U=a.i(lc)}Yf.prototype.Fa=function(a){var b=a.ra(),c=function(){if(0==b.length)return w();var a=b.shift();return(a.zb()?Zf(this,a):bg(this,a)).then(c)}.bind(this);return c()};function bg(a,b){var c=new kd(a.g,D([b])),c=a.Ka.Cb(0,c),d=c.H(b.getName(),b.Lb.bind(b)).get([]).then(function(a){this.U.Vb(b.getName(),a);cg(this,b,a)}.bind(a));c.ia();return d}
function cg(a,b,c){var d=a.D.jc.get(b.getName())||[];c.forEach(function(a){d.forEach(function(b){var c=a.Eb(b.getName());b.add(c,a.id())})})}function Zf(a,b){var c=new kd(a.g,D([b])),d=a.Ka.Cb(0,c),c=d.H(b.getName(),b.Lb).get([]).then(function(a){this.U.Vb(b.getName(),a)}.bind(a)),e=b.xa().map(function(a){return dg(this,a,d)},a).concat(eg(a,b,d));d.ia();return fb(e.concat(c))}
function dg(a,b,c){c=c.H(b.m(),sb,1);var d=Tf(b);return c.get([]).then(function(a){if(1<a.length){if(fg(b)){var c=zf.bind(void 0,d,b.m(),b.Fc);a=Vf(c,a.slice(1))}else a=zf(d,b.m(),b.Fc,a.slice(1));this.D.set(b.Rc,a)}}.bind(a))}function eg(a,b,c){return c.H(Se(b),sb,1).get([]).then(function(a){1<a.length&&(a=Xf(Se(b),a.slice(1)),this.D.set(b.getName(),a))}.bind(a))};function gg(){this.ba=B();this.jc=B()}gg.prototype.Fa=function(a){a.ra().forEach(function(a){var c=[];this.jc.set(a.getName(),c);var d=Se(a);if(null===this.get(d)){var e=new Wf(d);c.push(e);this.ba.set(d,e)}a.xa().forEach(function(a){var b;b=Tf(a);b=new rf(a.m(),b,a.Fc);b=fg(a)?new Uf(b):b;c.push(b);this.ba.set(a.m(),b)},this)},this);return w()};gg.prototype.get=function(a){return this.ba.get(a)||null};
gg.prototype.set=function(a,b){var c=this.jc.get(a)||null;null===c&&(c=[],this.jc.set(a,c));for(var d=null,e=0;e<c.length;e++)if(c[e].getName()==b.getName()){d=e;break}null!==d&&0<c.length?c.splice(d,1,b):c.push(b);this.ba.set(b.getName(),b)};function hg(a){this.ic=[];q(a)&&this.add(a)}hg.prototype.toString=function(){return this.ic.map(function(a){return a.toString()}).join(",")};hg.prototype.Ma=function(a){return this.ic.some(function(b){return b.contains(a)})};hg.prototype.ya=g("ic");
hg.prototype.add=function(a){if(0!=a.length)if(a=this.ic.concat(a),1==a.length)this.ic=a;else{a.sort(wd);for(var b=[],c=a[0],d=1;d<a.length;++d)if(sd(c,a[d])){var e=a[d],f=ud();if(c.c!=F&&e.c!=F){var h=td(c.c,e.c,!0);1!=h?(f.c=c.c,f.da=0!=h?c.da:c.da&&e.da):(f.c=e.c,f.da=e.da)}c.A!=F&&e.A!=F&&(h=td(c.A,e.A,!1),-1!=h?(f.A=c.A,f.ma=0!=h?c.ma:c.ma&&e.ma):(f.A=e.A,f.ma=e.ma));c=f}else b.push(c),c=a[d];b.push(c);this.ic=b}};
function ig(a,b){var c=[];a.ya().map(function(a){return b.ya().map(function(b){var c;if(sd(a,b)){c=ud();var h=td(a.c,b.c,!0),h=0==h?a.da?a:b:-1!=h?a:b;c.c=h.c;c.da=h.da;a.A==F||b.A==F?b=a.A==F?b:a:(h=td(a.A,b.A,!1),b=0==h?a.ma?a:b:-1==h?a:b);c.A=b.A;c.ma=b.ma}else c=null;return c})}).forEach(function(a){c=c.concat(a)});return new hg(c.filter(function(a){return null!==a}))};function jg(a,b){var c=[],d=null,e=null;Yd(a,function(a){var h=b(a);null==a.getParent()?e=h:Vd(d,h);var k=a.getParent();null!==k&&L(k).length==L(d).length&&(k=c.indexOf(d),-1!=k&&c.splice(k,1));1<L(a).length&&c.push(h);d=null===a.h?c[c.length-1]:h});return e}function kg(a){return lg(a,function(a){return null===a.h})}
function mg(a){var b=a.getParent(),c=0;null!==b&&(c=L(b).indexOf(a),b.removeChild(a));var d=L(a).slice();d.forEach(function(d,f){a.removeChild(d);null===b||Ud(b,d,c+f)});return{parent:b,children:d}}function ng(a,b){L(a).slice().forEach(function(c){a.removeChild(c);Vd(b,c)});Vd(a,b)}function og(a){var b=Td(a,0);mg(a);ng(b,a);return b}
function pg(a,b,c){var d=Td(a,0),e=L(d).slice();if(!e.some(function(a){return b(a)}))return a;mg(a);e.forEach(function(e,h){if(b(e)){var k=c(a);Wd(d,h);Vd(k,e);Ud(d,k,h)}});return d}function qg(a,b,c,d){var e=a.getParent();null!==e&&(a=L(e).indexOf(a),Wd(e,a),Ud(e,c,a));L(b).slice().forEach(function(a){b.removeChild(a);Vd(d,a)});return c}function lg(a,b,c){function d(a){b(a)&&e.push(a);null!=c&&c(a)||L(a).forEach(d)}var e=[];d(a);return e}
function rg(a,b){var c=b||function(a){return a.toString()+"\n"},d="";Yd(a,function(a){for(var b=0;b<Sd(a);b++)d+="-";d+=c(a)});return d};function sg(a){Zd.call(this);this.Rb=a;this.ab=!1}t(sg,Zd);m=sg.prototype;m.Jb=function(){return jg(this,function(a){if(a instanceof sg){var b=new sg(a.Rb);b.ab=a.ab;a=a.W();b.pa=a;return b}return a.Jb()})};m.gb=function(a){var b=a||[];Yd(this,function(a){a!=this&&a.gb(b)}.bind(this));a=D(b);return wc(a)};m.vd=function(a){this.ab!=a&&(this.ab=a,this.Rb="and"==this.Rb?"or":"and",L(this).forEach(function(b){return b.vd(a)}))};
m.eval=function(a){var b=L(this).map(function(b){return b.eval(a)});return tg(this,b)};function tg(a,b){return"and"==a.Rb?Cd(b):Dd(b)}m.toString=function(){return"combined_pred_"+this.Rb.toString()};function ug(a,b,c){Zd.call(this);this.ga=a;this.la=b;this.G=c;this.Zd=null;a=Kd.Ac();this.uc=Qd(a,this.ga.I(),this.G);this.cg=a.Re.get(this.ga.I())||null}t(ug,Zd);m=ug.prototype;m.Jb=function(){var a=new ug(this.ga,this.la,this.G),b=this.W();a.pa=b;return a};m.gb=function(a){return null!=a?(a.push(this.ga),a.push(this.la),a):[this.ga,this.la]};
m.reverse=function(){var a=this.G;switch(this.G){case "gt":a="lt";break;case "lt":a="gt";break;case "gte":a="lte";break;case "lte":a="gte"}return new ug(this.la,this.ga,a)};m.eval=function(a){var b=a.entries.filter(function(a){var b=I(a,this.ga);a=I(a,this.la);return this.uc(b,a)},this);return new G(b,H(a))};m.toString=function(){return"join_pred("+this.ga.m()+" "+this.G+" "+this.la.m()+")"};
function vg(a,b,c){var d=null,e=null;-1!=H(b).indexOf(J(a.ga.H()))?(d=b,e=c):(d=c,e=b);if(d.entries.length>e.entries.length){a:{b=a.ga;a.ga=a.la;a.la=b;b=a.G;switch(a.G){case "gt":b="lt";break;case "lt":b="gt";break;case "gte":b="lte";break;case "lte":b="gte";break;default:break a}a.G=b;a.uc=Qd(Kd.Ac(),a.ga.I(),a.G)}return[e,d]}return[d,e]}function wg(a){var b={};a.gb().forEach(function(a){b[a.getName()]=null});return b}
function xg(a,b,c){null===a.Zd&&(a.Zd=wg(a.la.H()));var d=new Fd(new z(-1,a.Zd),!1);return Id(b,c,d,[J(a.la.H())])}
function yg(a,b,c,d){var e=[b,c];d||(e=vg(a,b,c));b=e[0];c=e[1];var e=b,f=c,h=a.ga,k=a.la;d&&(e=c,f=b,h=a.la,k=a.ga);var n=new Uc,x=[];e.entries.forEach(function(a){var b=String(I(a,h));n.set(b,a)});var T=H(e),qa=H(f);f.entries.forEach(function(a){var b=I(a,k),c=String(b);null!==b&&n.has(c)?n.get(c).forEach(function(b){b=Id(a,qa,b,T);x.push(b)}):d&&x.push(xg(this,a,qa))}.bind(a));a=H(b).concat(H(c));return new G(x,a)}
function zg(a,b,c,d,e){function f(a,b){var c=new Fd(b,1<T.length),c=Id(a,qa,c,T);x.push(c)}var h=d.Vf.H(),k=b,n=c;-1!=H(b).indexOf(J(h))&&(k=c,n=b);var x=[],T=H(n),qa=H(k);k.entries.forEach(function(a){var b=this.cg(I(a,d.kg)),b=d.index.get(b);0!=b.length&&(d.index.Ha()?f(a,e.get(b[0])):jf(e,b).forEach(f.bind(null,a)))},a);a=H(k).concat(H(n));return new G(x,a)};function Ag(a,b,c){return null===b?new ae(a,b,c):q(b.m)?new ug(a,b,c):new ae(a,b,c)};var Bg={};r("lf.schema.DataStoreType",Bg);Bg.INDEXED_DB=0;Bg.MEMORY=1;Bg.LOCAL_STORAGE=2;Bg.FIREBASE=3;Bg.WEB_SQL=4;Bg.OBSERVABLE_STORE=5;function Cg(a,b,c,d){this.Rc=a;this.name=b;this.Fc=c;this.f=d}Cg.prototype.m=function(){return this.Rc+"."+this.name};function fg(a){return a.f.some(function(a){return a.ca.Ec()})}function Q(a,b,c,d){this.w=a;this.ka=c;this.K=b;this.qd=d;this.eb=null}r("lf.schema.Table",Q);Q.prototype.getName=g("w");Q.prototype.getName=Q.prototype.getName;Q.prototype.Za=g("eb");
function J(a){return a.eb||a.w}Q.prototype.oc=function(a){var b=new this.constructor(this.w);b.eb=a;b.vg=this.vg;return b};Q.prototype.as=Q.prototype.oc;Q.prototype.createRow=Q.prototype.tb;Q.prototype.deserializeRow=Q.prototype.Lb;Q.prototype.xa=g("ka");Q.prototype.getIndices=Q.prototype.xa;Q.prototype.gb=g("K");Q.prototype.getColumns=Q.prototype.gb;Q.prototype.getConstraint=Q.prototype.Db;Q.prototype.zb=g("qd");Q.prototype.persistentIndex=Q.prototype.zb;function Se(a){return a.w+".#"};function R(a,b){this.child=a;this.Ib=b;this.eb=null}m=R.prototype;m.getName=function(){return this.Ib+"("+this.child.getName()+")"};m.m=function(){return this.Ib+"("+this.child.m()+")"};m.H=function(){return this.child.H()};m.toString=function(){return this.m()};m.I=function(){return this.child.I()};m.Za=g("eb");m.xa=function(){return[]};m.wa=l(null);m.Ec=l(!1);m.oc=function(a){this.eb=a;return this};R.prototype.as=R.prototype.oc;
function Dg(a){for(var b=[a];a instanceof R;)b.push(a.child),a=a.child;return b}function Eg(a){this.eb=a||null;this.S=new Q("#UnknownTable",[],[],!1)}m=Eg.prototype;m.getName=l("*");m.m=function(){return this.getName()};m.toString=function(){return this.m()};m.H=g("S");m.I=l(4);m.Za=g("eb");m.xa=function(){return[]};m.wa=l(null);m.Ec=l(!1);r("lf.fn.avg",function(a){return new R(a,"AVG")});function Fg(a){return new R(a||new Eg,"COUNT")}r("lf.fn.count",Fg);function Gg(a){return new R(a,"DISTINCT")}r("lf.fn.distinct",Gg);r("lf.fn.max",function(a){return new R(a,"MAX")});r("lf.fn.min",function(a){return new R(a,"MIN")});r("lf.fn.stddev",function(a){return new R(a,"STDDEV")});r("lf.fn.sum",function(a){return new R(a,"SUM")});r("lf.fn.geomean",function(a){return new R(a,"GEOMEAN")});function S(a,b){K.call(this);this.Nf=b}t(S,K);S.prototype.exec=function(a,b){switch(this.Nf){case 1:return Hg(this,a,b);case 0:return Ig(this,a,b);default:return Jg(this,a,b)}};S.prototype.toString=l("dummy_node");S.prototype.Sc=function(){return this.toString()};function Jg(a,b,c){return new v(function(a){a(this.ea(b,[],c))}.bind(a))}function Hg(a,b,c){return Td(a,0).exec(b,c).then(function(a){return this.ea(b,a,c)}.bind(a))}
function Ig(a,b,c){var d=L(a).map(function(a){return a.exec(b,c)});return fb(d).then(function(a){var d=[];a.forEach(function(a){for(var b=0;b<a.length;++b)d.push(a[b])});return this.ea(b,d,c)}.bind(a))};function Kg(a){S.call(this,0,1);this.xe=a}t(Kg,S);Kg.prototype.toString=function(){return"aggregation("+this.xe.map(function(a){return a.m()}).toString()+")"};Kg.prototype.ea=function(a,b){b.forEach(function(a){Lg(new Mg(a,this.xe))},this);return b};function Mg(a,b){this.Ia=a;this.K=b}
function Lg(a){a.K.forEach(function(a){a=Dg(a).reverse();for(var c=1;c<a.length;c++){var d=a[c],e=Dg(d).slice(-1)[0],f=d.child instanceof R?zd(this.Ia,d.child):this.Ia;if(null!==f.Ya&&f.Ya.has(d.m()))break;f=Ng(d.Ib,f,e);e=this.Ia;null===e.Ya&&(e.Ya=B());e.Ya.set(d.m(),f)}},a)}
function Ng(a,b,c){var d=null;switch(a){case "MIN":d=Og(b,c,function(a,b){return b<a?b:a});break;case "MAX":d=Og(b,c,function(a,b){return b>a?b:a});break;case "DISTINCT":d=Pg(b,c);break;case "COUNT":d=Qg(b,c);break;case "SUM":d=Rg(b,c);break;case "AVG":a=Qg(b,c);0<a&&(d=Rg(b,c)/a);break;case "GEOMEAN":d=Sg(b,c);break;default:d=Tg(b,c)}return d}function Og(a,b,c){return a.entries.reduce(function(a,e){var f=I(e,b);return null===f?a:null===a?f:c(a,f)},null)}
function Qg(a,b){return b instanceof Eg?a.entries.length:a.entries.reduce(function(a,d){return a+(ea(I(d,b))?0:1)},0)}function Rg(a,b){return Og(a,b,function(a,b){return b+a})}function Tg(a,b){var c=[];a.entries.forEach(function(a){a=I(a,b);null===a||c.push(a)});return 0==c.length?null:Bb.apply(null,c)}function Sg(a,b){var c=0,d=a.entries.reduce(function(a,d){var h=I(d,b);if(0==h||null===h)return a;c++;return a+Math.log(h)},0);return 0==c?null:Math.pow(Math.E,d/c)}
function Pg(a,b){var c=B();a.entries.forEach(function(a){var e=I(a,b);c.set(e,a)});return new G(C(c),H(a))};function Ug(a,b){this.Ca=a;this.aa=b}Ug.prototype.hb=g("Ca");Ug.prototype.$=g("aa");function Vg(){K.call(this)}t(Vg,K);function Wg(a,b){K.call(this);this.table=a;this.values=b}t(Wg,Vg);function Xg(a,b){Wg.call(this,a,b)}t(Xg,Wg);function Yg(a){K.call(this);this.table=a}t(Yg,Vg);Yg.prototype.toString=function(){return"delete("+this.table.getName()+")"};function Zg(a,b){K.call(this);this.table=a;this.se=b}t(Zg,Vg);
Zg.prototype.toString=function(){var a=[];this.se&&(a=this.se.map(function(a){return a.O.getName()},this));return"update("+this.table.getName()+", ["+a.join(",")+"])"};function $g(a){K.call(this);this.J=a}t($g,Vg);$g.prototype.toString=function(){return"select("+this.J.toString()+")"};function ah(a){K.call(this);this.table=a}t(ah,Vg);ah.prototype.toString=function(){var a="table_access("+this.table.getName();null===this.table.Za()||(a+=" as "+this.table.Za());return a+")"};
function bh(){K.call(this)}t(bh,Vg);bh.prototype.toString=l("cross_product");function ch(a,b){K.call(this);this.f=a;this.Nb=b}t(ch,Vg);ch.prototype.toString=function(){var a="project("+this.f.toString();if(null!==this.Nb)var b=this.Nb.map(function(a){return a.m()}).join(", "),a=a+(", groupBy("+b+")");return a+")"};function dh(a){K.call(this);this.M=a}t(dh,Vg);dh.prototype.toString=function(){return"order_by("+je(this.M)+")"};function eh(a){K.call(this);this.f=a}t(eh,Vg);
eh.prototype.toString=function(){return"aggregation("+this.f.toString()+")"};function fh(a){K.call(this);this.f=a}t(fh,Vg);fh.prototype.toString=function(){return"group_by("+this.f.toString()+")"};function gh(a){K.call(this);this.X=a}t(gh,Vg);gh.prototype.toString=function(){return"limit("+this.X+")"};function hh(a){K.call(this);this.N=a}t(hh,Vg);hh.prototype.toString=function(){return"skip("+this.N+")"};function ih(a,b){K.call(this);this.J=a;this.Pb=b}t(ih,Vg);
ih.prototype.toString=function(){return"join(type: "+(this.Pb?"outer":"inner")+", "+this.J.toString()+")"};function jh(){};function kh(){}t(kh,jh);kh.prototype.mb=function(a){this.Z=a;this.Wa(this.Z);return this.Z};kh.prototype.Wa=function(a){if(a instanceof $g){var b=lh(this,a.J),b=mh(this,b);qg(a,a,b[0],b[1]);a==this.Z&&(this.Z=b[0]);a=b[0]}L(a).forEach(function(a){this.Wa(a)},this)};function lh(a,b){if(0==L(b).length||"and"!=b.Rb)return[b];var c=L(b).slice().map(function(a){b.removeChild(a);return lh(this,a)},a);return Fa(c)}
function mh(a,b){var c=null,d=null;b.map(function(a,b){var h=new $g(a);0==b?c=h:Vd(d,h);d=h},a);return[c,d]};function nh(){}t(nh,jh);nh.prototype.mb=function(a,b){if(3>b.c.length)return a;this.Z=a;this.Wa(this.Z);return this.Z};nh.prototype.Wa=function(a){if(a instanceof bh)for(;2<L(a).length;){for(var b=new bh,c=0;2>c;c++){var d=Wd(a,0);Vd(b,d)}Ud(a,b,0)}L(a).forEach(function(a){this.Wa(a)},this)};function oh(){S.call(this,0,0)}t(oh,S);oh.prototype.toString=l("cross_product");oh.prototype.ea=function(a,b){for(var c=b[0],d=b[1],e=[],f=H(c),h=H(d),k=0;k<c.entries.length;k++)for(var n=0;n<d.entries.length;n++){var x=Id(c.entries[k],f,d.entries[n],h);e.push(x)}c=H(c).concat(H(d));return[new G(e,c)]};function ph(a,b){me.call(this,a,b);this.Da=a.i(oc);this.Fb=a.i(pc)}t(ph,me);ph.prototype.getPriority=l(2);ph.prototype.be=function(a){0==this.I()?qh(this,a):this.Pc()};function qh(a,b){a.sd.forEach(function(a,d){a instanceof ie&&pe(this.Fb,a,b[d])},a)}ph.prototype.Pc=function(){var a=re(this.Fb,this.$());0!=a.length&&(a=new oe(this.global,a),se(this.Da,a))};function rh(a){de.call(this,a)}t(rh,de);rh.prototype.$=function(){var a=D();a.add(this.c);sh(this,this.c.getName(),a);return a};function sh(a,b,c){var d=th(a.ca.info(),b,1);th(a.ca.info(),b).forEach(c.add.bind(c));d.forEach(function(a){sh(this,a.getName(),c)},a)}rh.prototype.clone=function(){var a=new rh(this.ca);ge(a,this);a.c=this.c;return a};rh.prototype.bind=function(a){rh.Hb.bind.call(this,a);he(this,a);return this};function uh(a){de.call(this,a)}t(uh,de);uh.prototype.$=function(){var a=D();a.add(this.Ga);var b=this.ca.info();vh(this.Ga.getName(),b.Ze).forEach(a.add.bind(a));this.$b&&th(b,this.Ga.getName()).forEach(a.add.bind(a));return a};uh.prototype.clone=function(){var a=new uh(this.ca);ge(a,this);a.Ga=this.Ga;this.values&&(a.values=this.values instanceof Jd?this.values:this.values.slice());a.$b=this.$b;a.ac=this.ac;return a};
uh.prototype.bind=function(a){uh.Hb.bind.call(this,a);this.ac&&(this.values=this.ac instanceof Jd?a[this.ac.wa()]:this.ac.map(function(b){return b instanceof Jd?a[b.wa()]:b}));return this};function wh(a){de.call(this,a)}t(wh,de);wh.prototype.$=function(){var a=D();a.add(this.table);var b=this.set.map(function(a){return a.O.m()}),c=this.ca.info();xh(c,b).forEach(a.add.bind(a));yh(c,b).forEach(a.add.bind(a));return a};wh.prototype.clone=function(){var a=new wh(this.ca);ge(a,this);a.table=this.table;a.set=this.set?this.set.slice():this.set;return a};wh.prototype.bind=function(a){wh.Hb.bind.call(this,a);this.set.forEach(function(b){-1!=b.Xc&&(b.value=a[b.Xc])});he(this,a);return this};function zh(a,b){if(null==b)return"NULL";switch(a){case 1:return b?1:0;case 3:case 4:return b;case 0:return"'"+ub(b)+"'";default:return"'"+b.toString()+"'"}}function Ah(a,b){var c=a.$b?"INSERT OR REPLACE":"INSERT",d=a.Ga.gb(),c=c+(" INTO "+a.Ga.getName()+"("),c=c+d.map(function(a){return a.getName()}).join(", "),c=c+") VALUES (";return a.values.map(function(a){var f=d.map(function(c){var d=a.s[c.getName()];return b?null!=d?"#":"NULL":zh(c.I(),d)});return c+f.join(", ")+");"}).join("\n")}
function Bh(a){switch(a){case "between":return"BETWEEN";case "eq":return"=";case "gte":return">=";case "gt":return">";case "in":return"IN";case "lte":return"<=";case "lt":return"<";case "match":return"LIKE";case "neq":return"<>";default:return"UNKNOWN"}}function Ch(a,b,c,d){return a instanceof Jd?"?"+a.wa().toString():d?null!=a?"#":"NULL":"match"==b?"'"+a.toString()+"'":"in"==b?"("+a.map(function(a){return zh(c,a)}).join(", ")+")":"between"==b?zh(c,a[0])+" AND "+zh(c,a[1]):zh(c,a).toString()}
function Dh(a,b){return L(a).map(function(a){return"("+Eh(a,b)+")"}).join("and"==a.Rb?" AND ":" OR ")}function Fh(a){return[a.ga.m(),Bh(a.G),a.la.m()].join(" ")}function Eh(a,b){if(a instanceof ae){var c=a.O.m(),d=Bh(a.G),e=Ch(a.value,a.G,a.O.I(),b);return"="==d&&"NULL"==e?[c,"IS NULL"].join(" "):"<>"==d&&"NULL"==e?[c,"IS NOT NULL"].join(" "):[c,d,e].join(" ")}if(a instanceof sg)return Dh(a,b);if(a instanceof ug)return Fh(a);throw new E(357,typeof a);}
function Gh(a,b){var c=Eh(a,b);return c?" WHERE "+c:""}function Hh(a,b){var c="UPDATE "+a.table.getName()+" SET ",c=c+a.set.map(function(a){var b=a.O.m()+" = ";return-1!=a.Xc?b+"?"+a.Xc.toString():b+zh(a.O.I(),a.value).toString()}).join(", ");a.u&&(c+=Gh(a.u,b));return c+";"}
function Ih(a,b){var c="*";a.f.length&&(c=a.f.map(function(a){return a.Za()?a.m()+" AS "+a.Za():a.m()}).join(", "));c="SELECT "+c+" FROM ";null!=a.yb&&0!=a.yb.size?c+=Jh(a,b):(c+=a.c.map(Kh).join(", "),a.u&&(c+=Gh(a.u,b)));if(a.M)var d=a.M.map(function(a){return a.O.m()+(0==a.kb?" DESC":" ASC")}).join(", "),c=c+(" ORDER BY "+d);a.ja&&(d=a.ja.map(function(a){return a.m()}).join(", "),c+=" GROUP BY "+d);a.X&&(c+=" LIMIT "+a.X.toString());a.N&&(c+=" SKIP "+a.N.toString());return c+";"}
function Kh(a){return J(a)!=a.getName()?a.getName()+" AS "+J(a):a.getName()}function Jh(a,b){for(var c=lg(a.u,function(a){return a instanceof ug}),d=c.map(Fh),e=Kh(a.c[0]),f=1;f<a.c.length;f++)var h=Kh(a.c[f]),e=a.yb.has(c[d.length-f].W())?e+(" LEFT OUTER JOIN "+h):e+(" INNER JOIN "+h),e=e+(" ON ("+d[d.length-f]+")");c=Td(a.u,0);c instanceof ug||(e+=" WHERE "+Eh(c,b));return e}
function Lh(a,b){var c=b||!1,d=a.a.clone();if(d instanceof uh)return Ah(d,c);if(d instanceof rh){var e="DELETE FROM "+d.c.getName();d.u&&(e+=Gh(d.u,c));return e+";"}if(d instanceof wh)return Hh(d,c);if(d instanceof ie)return Ih(d,c);throw new E(358,typeof d);};function U(a,b){this.global=a;this.ug=a.i(nc);this.Da=a.i(oc);this.a=b}r("lf.query.BaseBuilder",U);U.prototype.exec=function(){try{this.fb()}catch(a){return cb(a)}return new v(function(a,b){var c=new ph(this.global,[this.Cc()]);se(this.Da,c).then(function(b){a(xd(b[0]))},b)},this)};U.prototype.exec=U.prototype.exec;U.prototype.Pf=function(){var a=function(a){return a.Sc(this.a)+"\n"}.bind(this);return rg(Mh(this).hb(),a)};U.prototype.explain=U.prototype.Pf;
U.prototype.bind=function(a){this.a.bind(a);return this};U.prototype.bind=U.prototype.bind;U.prototype.Bg=function(a){return Lh(this,a)};U.prototype.toSql=U.prototype.Bg;U.prototype.fb=aa();function Mh(a){if(null==a.$e){var b;b=a.ug;var c=a.a,d=b.fg.create(c);b=b.rg.create(d,c);a.$e=b}return a.$e}U.prototype.Cc=function(){return{context:this.a.clone(),ee:Mh(this)}};function Nh(a){U.call(this,a,new rh(a.i(qc)))}t(Nh,U);r("lf.query.DeleteBuilder",Nh);Nh.prototype.c=function(a){if(null!=this.a.c)throw new E(515);this.a.c=a;return this};Nh.prototype.from=Nh.prototype.c;Nh.prototype.u=function(a){this.Cd();this.a.u=a;return this};Nh.prototype.where=Nh.prototype.u;Nh.prototype.Cd=function(){if(null==this.a.c)throw new E(548);if(null!=this.a.u)throw new E(516);};Nh.prototype.fb=function(){Nh.Hb.fb.call(this);if(null==this.a.c)throw new E(517);};function Oh(a,b){U.call(this,a,new uh(a.i(qc)));this.a.$b=b||!1}t(Oh,U);r("lf.query.InsertBuilder",Oh);Oh.prototype.fb=function(){Oh.Hb.fb.call(this);var a=this.a;if(null==a.Ga||null==a.values)throw new E(518);if(a.$b&&null===a.Ga.Db().fd())throw new E(519);};Oh.prototype.Ga=function(a){if(null!=this.a.Ga)throw new E(520);this.a.Ga=a;return this};Oh.prototype.into=Oh.prototype.Ga;
Oh.prototype.values=function(a){if(null!=this.a.values)throw new E(521);a instanceof Jd||a.some(function(a){return a instanceof Jd})?this.a.ac=a:this.a.values=a;return this};Oh.prototype.values=Oh.prototype.values;function Ph(a){return Qh("and",Array.prototype.slice.call(arguments))}r("lf.op.and",Ph);r("lf.op.or",function(a){return Qh("or",Array.prototype.slice.call(arguments))});function Qh(a,b){var c=new sg(a);b.forEach(function(a){Vd(c,a)});return c}r("lf.op.not",function(a){a.vd(!0);return a});function V(a,b){U.call(this,a,new ie(a.i(qc)));this.He=this.xd=!1;this.a.f=b;Rh(this);Sh(this)}t(V,U);r("lf.query.SelectBuilder",V);V.prototype.fb=function(){V.Hb.fb.call(this);var a=this.a;if(null==a.c)throw new E(522);if(q(a.Qb)&&!q(a.X)||q(a.Yb)&&!q(a.N))throw new E(523);null!=this.a.ja?Th(this):Uh(this)};function Rh(a){var b=a.a.f.filter(function(a){return a instanceof R&&"DISTINCT"==a.Ib},a);if(0!=b.length&&(1!=b.length||1!=a.a.f.length))throw new E(524);}
function Th(a){var b=a.a.f.filter(function(a){return!(a instanceof R)}).map(function(a){return a.m()}),c=!1;if(0==a.a.ja.length||0==a.a.f.length)c=!0;else{var d=a.a.ja.map(function(a){return a.m()});(c=b.some(function(a){return-1==d.indexOf(a)}))||(c=a.a.ja.some(function(a){a=a.I();return 6==a||0==a}))}if(c)throw new E(525);}function Uh(a){var b=a.a.f.some(function(a){return a instanceof R},a);a=a.a.f.some(function(a){return!(a instanceof R)},a)||0==a.a.f.length;if(b&&a)throw new E(526);}
function Sh(a){a.a.f.forEach(function(a){if(a instanceof R&&!Vh(a.Ib,a.I()))throw new E(527,a.m());},a)}function Wh(a,b){if(null==a.a.c)throw new E(b);}V.prototype.c=function(a){if(this.He)throw new E(515);this.He=!0;null==this.a.c&&(this.a.c=[]);this.a.c.push.apply(this.a.c,Array.prototype.slice.call(arguments));return this};V.prototype.from=V.prototype.c;V.prototype.u=function(a){Wh(this,548);if(this.xd)throw new E(516);this.xd=!0;Xh(this,a);return this};V.prototype.where=V.prototype.u;
function Xh(a,b){if(null!=a.a.u){var c=Ph(b,a.a.u);a.a.u=c}else a.a.u=b}V.prototype.Zf=function(a,b){Wh(this,542);if(this.xd)throw new E(547);this.a.c.push(a);Xh(this,b);return this};V.prototype.innerJoin=V.prototype.Zf;V.prototype.dg=function(a,b){Wh(this,542);if(!(b instanceof ug))throw new E(541);if(this.xd)throw new E(547);this.a.c.push(a);null==this.a.yb&&(this.a.yb=D());var c=b;J(a)!=J(b.la.H())&&(c=b.reverse());this.a.yb.add(c.W());Xh(this,c);return this};V.prototype.leftOuterJoin=V.prototype.dg;
V.prototype.X=function(a){if(null!=(this.a.X||this.a.Qb))throw new E(528);if(a instanceof Jd)this.a.Qb=a;else{if(0>a)throw new E(531);this.a.X=a}return this};V.prototype.limit=V.prototype.X;V.prototype.N=function(a){if(null!=(this.a.N||this.a.Yb))throw new E(529);if(a instanceof Jd)this.a.Yb=a;else{if(0>a)throw new E(531);this.a.N=a}return this};V.prototype.skip=V.prototype.N;V.prototype.M=function(a,b){Wh(this,549);null==this.a.M&&(this.a.M=[]);this.a.M.push({O:a,kb:null!=b?b:1});return this};
V.prototype.orderBy=V.prototype.M;V.prototype.ja=function(a){Wh(this,549);if(null!=this.a.ja)throw new E(530);null==this.a.ja&&(this.a.ja=[]);this.a.ja.push.apply(this.a.ja,Array.prototype.slice.call(arguments));return this};V.prototype.groupBy=V.prototype.ja;function Vh(a,b){switch(a){case "COUNT":case "DISTINCT":return!0;case "AVG":case "GEOMEAN":case "STDDEV":case "SUM":return 4==b||3==b;case "MAX":case "MIN":return 4==b||3==b||5==b||2==b}return!1}
V.prototype.clone=function(){var a=new V(this.global,this.a.f);a.a=this.a.clone();a.a.ad=null;return a};V.prototype.clone=V.prototype.clone;function Yh(a,b){U.call(this,a,new wh(a.i(qc)));this.a.table=b}t(Yh,U);r("lf.query.UpdateBuilder",Yh);Yh.prototype.set=function(a,b){var c={Xc:b instanceof Jd?b.wa():-1,O:a,value:b};null!=this.a.set?this.a.set.push(c):this.a.set=[c];return this};Yh.prototype.set=Yh.prototype.set;Yh.prototype.u=function(a){this.Cd();this.a.u=a;return this};Yh.prototype.where=Yh.prototype.u;Yh.prototype.Cd=function(){if(null!=this.a.u)throw new E(516);};
Yh.prototype.fb=function(){Yh.Hb.fb.call(this);if(null==this.a.set)throw new E(532);if(this.a.set.some(function(a){return a.value instanceof Jd}))throw new E(501);};function Zh(a){this.a=a;this.Ca=null}Zh.prototype.gc=function(){null===this.Ca&&(this.Ca=this.dd());return this.Ca};function $h(a){Zh.call(this,a)}t($h,Zh);$h.prototype.dd=function(){return this.a.$b?new Xg(this.a.Ga,this.a.values):new Wg(this.a.Ga,this.a.values)};function ai(a){Zh.call(this,a)}t(ai,Zh);ai.prototype.dd=function(){var a=new Zg(this.a.table,this.a.set),b=null!=this.a.u?new $g(this.a.u.Jb()):null,c=new ah(this.a.table);null===b?Vd(a,c):(Vd(b,c),Vd(a,b));return a};function bi(a,b,c){this.Ca=a;this.fe=b;this.Ub=c}bi.prototype.gc=function(){this.Ub.forEach(function(a){this.Ca=a.mb(this.Ca,this.fe)},this);return this.Ca};function ci(a,b){Zh.call(this,a);this.Ub=b}t(ci,Zh);ci.prototype.dd=function(){var a=new Yg(this.a.c),b=null!=this.a.u?new $g(this.a.u.Jb()):null,c=new ah(this.a.c);null===b?Vd(a,c):(Vd(b,c),Vd(a,b));return(new bi(a,this.a,this.Ub)).gc()};function di(){}t(di,jh);di.prototype.mb=function(a,b){if(2>b.c.length)return a;this.Z=a;this.Wa(this.Z,b);return this.Z};di.prototype.Wa=function(a,b){if(a instanceof $g&&a.J instanceof ug){var c=a.J.W(),d=Td(a,0);d instanceof bh&&(c=null!=b.yb&&b.yb.has(c),c=new ih(a.J,c),qg(a,d,c,c),a==this.Z&&(this.Z=c),a=c)}L(a).forEach(function(a){this.Wa(a,b)},this)};function ei(){this.Wc=D()}t(ei,jh);ei.prototype.mb=function(a,b){this.Wc.clear();if(!q(b.u))return a;this.Z=a;this.Wa(this.Z);this.Wc.clear();return this.Z};ei.prototype.Wa=function(a){if(fi(a)){var b=a.J instanceof ae?gi(this,a):hi(this,a);this.Wc.add(a);b==a&&(b=Td(a,0));null!==b&&(ea(b.getParent())&&(this.Z=b),fi(b)&&!this.Wc.has(b)&&this.Wa(b))}else L(a).forEach(function(a){this.Wa(a)},this)};
function ii(a,b,c){var d=b;if(Td(b,0)instanceof $g)d=og(b),ii(a,b,c);else if(ji(b)){var e=[],d=pg(b,c,function(a){a=new $g(a.J);e.push(a);return a});e.forEach(function(a){ii(this,a,c)},a)}return d}function gi(a,b){var c=D([J(b.J.O.H())]),d=function(a){return ki(this,a,c)}.bind(a);return ii(a,b,d)}function hi(a,b){var c=D([J(b.J.ga.H()),J(b.J.la.H())]),d=function(a){return ki(this,a,c)}.bind(a);return ii(a,b,d)}
function ki(a,b,c){var d=D();kg(b).forEach(function(a){d.add(J(a.table))},a);b instanceof ah&&d.add(J(b.table));return xc(d,c)}function fi(a){return a instanceof $g&&!(a.J instanceof sg)}function ji(a){a=Td(a,0);return a instanceof bh||a instanceof ih};function li(a,b){Zh.call(this,a);this.Ub=b;this.df=this.Ve=this.mf=this.Ye=this.ye=this.Ke=this.lf=this.Ee=this.of=null}t(li,Zh);
li.prototype.dd=function(){mi(this);2<=this.a.c.length&&(this.Ee=new bh);this.lf=null!=this.a.u?new $g(this.a.u.Jb()):null;this.a.M&&(this.Ye=new dh(this.a.M));null!=this.a.N&&0<this.a.N&&(this.mf=new hh(this.a.N));null!=this.a.X&&(this.Ve=new gh(this.a.X));null!=this.a.ja&&(this.Ke=new fh(this.a.ja));ni(this);this.df=new ch(this.a.f||[],this.a.ja||null);var a=oi(this);return(new bi(a,this.a,this.Ub)).gc()};
function oi(a){for(var b=[a.Ve,a.mf,a.df,a.Ye,a.ye,a.Ke,a.lf,a.Ee],c=null,d=null,e=0;e<b.length;e++){var f=b[e];null!==f&&(null===d?d=f:Vd(b[c],f),c=e)}a.of.forEach(function(a){Vd(b[c],a)});return d}function mi(a){a.of=a.a.c.map(function(a){return new ah(a)},a)}function ni(a){var b=a.a.f.filter(function(a){return a instanceof R});null!=a.a.M&&a.a.M.forEach(function(a){a.O instanceof R&&b.push(a.O)});0<b.length&&(a.ye=new eh(b))};function pi(){this.me=[new kh,new nh,new ei,new di];this.Jd=[new kh]}pi.prototype.create=function(a){var b=null;if(a instanceof uh)b=new $h(a);else if(a instanceof rh)b=new ci(a,this.Jd);else if(a instanceof ie)b=new li(a,this.me);else if(a instanceof wh)b=new ai(a);else throw new E(513);b=b.gc();return new Ug(b,a.$())};function qi(a){S.call(this,0,1);this.S=a}t(qi,S);qi.prototype.toString=function(){return"delete("+this.S.getName()+")"};qi.prototype.ea=function(a,b){var c=b[0].entries.map(function(a){return a.sa});a.remove(this.S,c);return[Bd()]};function ri(a,b){S.call(this,0,-1);this.table=b;this.D=a.i(mc)}t(ri,S);ri.prototype.toString=function(){return"get_row_count("+this.table.getName()+")"};ri.prototype.ea=function(){var a=this.D.get(Se(this.table)),b=new G([],[this.table.getName()]),c=Fg(),a=a.Oa().oa;null===b.Ya&&(b.Ya=B());b.Ya.set(c.m(),a);return[b]};function si(a,b){S.call(this,0,-1);this.U=a.i(lc);this.D=a.i(mc);this.table=b}t(si,S);si.prototype.toString=function(){var a="table_access("+this.table.getName();null===this.table.Za()||(a+=" as "+this.table.Za());return a+")"};si.prototype.ea=function(){var a=this.D.get(Se(this.table)).$a();return[Ed(jf(this.U,a),[J(this.table)])]};function ti(a){this.g=a}t(ti,jh);ti.prototype.mb=function(a,b){this.Z=a;if(!this.Dd(b))return a;var c=lg(a,function(a){return a instanceof si})[0],d=new ri(this.g,c.table);qg(c,c,d,d);return this.Z};ti.prototype.Dd=function(a){return 1==a.f.length&&1==a.c.length&&null==a.u&&null==a.X&&null==a.N&&null==a.ja?(a=a.f[0],a instanceof R&&"COUNT"==a.Ib&&a.child instanceof Eg):!1};function ui(a){S.call(this,0,1);this.Je=a}t(ui,S);ui.prototype.toString=function(){return"groupBy("+this.Je.map(function(a){return a.m()}).toString()+")"};ui.prototype.ea=function(a,b){return vi(this,b[0])};function vi(a,b){var c=new Uc,d=function(a){return this.Je.map(function(b){return I(a,b)},this).join(",")}.bind(a);b.entries.forEach(function(a){c.set(d(a),a)},a);return c.keys().map(function(a){return new G(c.get(a),H(b))},a)};function wi(a,b,c){S.call(this,0,0);this.D=a.i(mc);this.U=a.i(lc);this.J=b;this.Pb=c;this.Ad="eq"==this.J.G?0:2;this.Le=null}t(wi,S);var xi=["hash","index_nested_loop","nested_loop"];wi.prototype.toString=function(){return"join(type: "+(this.Pb?"outer":"inner")+", impl: "+xi[this.Ad]+", "+this.J.toString()+")"};
wi.prototype.ea=function(a,b){switch(this.Ad){case 0:return[yg(this.J,b[0],b[1],this.Pb)];case 1:return[zg(this.J,b[0],b[1],this.Le,this.U)];default:var c=this.J,d=b[0],e=b[1],f=this.Pb,h=[d,e];f||(h=vg(c,d,e));for(var d=h[0],e=h[1],h=[],k=H(d),n=H(e),x=d.entries.length,T=e.entries.length,qa=T+256-1>>8,$a=0;$a<qa;){for(var Xb=0;Xb<x;Xb++){var $f=!1,ag=I(d.entries[Xb],c.ga);if(null!==ag)for(var Ai=Math.min($a+1<<8,T),Sc=$a<<8;Sc<Ai;Sc++)if(c.uc(ag,I(e.entries[Sc],c.la))){var $f=!0,Bj=Id(d.entries[Xb],
k,e.entries[Sc],n);h.push(Bj)}f&&!$f&&h.push(xg(c,d.entries[Xb],k))}$a++}c=H(d).concat(H(e));return[new G(h,c)]}};function yi(a,b){a.Ad=1;var c=a.D.get(b.wa().m());a.Le={Vf:b,kg:b==a.J.ga?a.J.la:a.J.ga,index:c}};function zi(a){S.call(this,0,-1);this.ef=a}t(zi,S);zi.prototype.toString=function(){return"no_op_step("+H(this.ef[0]).join(",")+")"};zi.prototype.ea=g("ef");function Bi(){}t(Bi,jh);Bi.prototype.mb=function(a,b){this.Z=a;if(!this.Dd(b))return a;lg(a,function(a){return a instanceof wi}).forEach(this.tg,this);return this.Z};Bi.prototype.Dd=function(a){return 1<a.c.length};
Bi.prototype.tg=function(a){if("eq"==a.J.G&&!a.Pb){var b=function(b){if(!(b instanceof si))return null;b=J(b.table)==J(a.J.la.H())?a.J.la:a.J.ga;return ea(b.wa())?null:b},c=b(Td(a,0)),b=b(Td(a,1));if(null!==c||null!==b){b=null===b?c:b;yi(a,b);var d=new G([],[J(b.H())]);Xd(a,new zi([d]),b==c?0:1)}}};function Ci(a){a=a.map(function(a){return a.ya()});a=Gb.apply(null,a);var b=[];Fb(a,function(a){b.push(a)});return b}function Di(a){this.Ob=a}Di.prototype.ed=function(){return 1==this.Ob.f.length?[ud()]:[this.Ob.f.map(function(){return ud()})]};function Ei(a,b){this.Ob=a;this.Ba=b;this.Hd=this.Te=null}
function Fi(a,b){var c=B();a.Ba.keys().forEach(function(a){var e=this.Ba.get(a).map(function(a){return ee(b,a)},this),f=new hg([ud()]);e.forEach(function(a){var b=null;"between"==a.G?b=new pd(a.value[0],a.value[1],!1,!1):"eq"==a.G?(b=a.value,b=new pd(b,b,!1,!1)):b="gte"==a.G?new pd(a.value,F,!1,!1):"gt"==a.G?new pd(a.value,F,!0,!1):"lte"==a.G?new pd(F,a.value,!1,!1):new pd(F,a.value,!1,!0);a=a.ab?qd(b):[b];a=new hg(a);f=ig(f,a)});c.set(a,f)},a);return c}
Ei.prototype.ed=function(a){if(this.Te==a)return this.Hd;for(var b=Fi(this,a),c=this.Ob.f.length-1;0<=c;c--){var d=this.Ob.f[c];if(null!==(b.get(d.ca.getName())||null))break;b.set(d.ca.getName(),new hg([ud()]))}this.Hd=1==this.Ob.f.length?C(b)[0].ya():Ci(Gi(this,b));this.Te=a;return this.Hd};function Gi(a,b){var c=B(),d=0;a.Ob.f.forEach(function(a){c.set(a.ca.getName(),d);d++});return bc(b).sort(function(a,b){return c.get(a)-c.get(b)}).map(function(a){return b.get(a)})};function Hi(a,b){this.pf=b;this.D=a.i(mc)}function Ii(a,b,c){c=c.filter(a.$f,a);if(0==c.length)return null;a=Ji(a,c);if(0==a.length)return null;if(1==a.length)return a[0];var d=Number.MAX_VALUE;return a.reduce(function(a,c){var h=Ki(c,b);return h<d?(d=h,c):a},null)}
function Ji(a,b){return a.pf.xa().map(function(a){a=new Li(this.D,a);Mi(a,b);return a},a).filter(function(a){if(null===a.Ba)a=!1;else{for(var b=!1,e=!0,f=0;f<a.wb.f.length;f++){var h=a.Ba.has(a.wb.f[f].ca.getName());if(b&&h){e=!1;break}h||(b=!0)}a=e}return a})}Hi.prototype.$f=function(a){var b;if(b=a instanceof ae)be(a),b=null!==a.value&&("between"==a.G||"eq"==a.G||"gt"==a.G||"gte"==a.G||"lt"==a.G||"lte"==a.G);return b?a.O.H()==this.pf:!1};
function Li(a,b){this.D=a;this.wb=b;this.Wf=D(this.wb.f.map(function(a){return a.ca.getName()}));this.Vd=this.Ba=null}function Ni(a){null===a.Vd&&(a.Vd=new Ei(a.wb,a.Ba));return a.Vd}function Mi(a,b){b.forEach(function(a){var b=a.gb()[0].getName();this.Wf.has(b)&&(null===this.Ba&&(this.Ba=new Uc),this.Ba.set(b,a.W()))},a)}function Ki(a,b){var c=Ni(a).ed(b),d=a.D.get(a.wb.m());return c.reduce(function(a,b){return a+d.bd(b)},0)};function Oi(a,b,c,d){S.call(this,0,-1);this.D=a.i(mc);this.index=b;this.Se=c;this.je=d;this.Vc=this.Uc=!1}t(Oi,S);Oi.prototype.toString=function(){return"index_range_scan("+this.index.m()+", ?, "+(this.je?"reverse":"natural")+(this.Uc?", limit:?":"")+(this.Vc?", skip:?":"")+")"};Oi.prototype.Sc=function(a){var b=this.toString(),c=this.Se.ed(a),b=b.replace("?",c.toString());this.Uc&&(b=b.replace("?",a.X.toString()));this.Vc&&(b=b.replace("?",a.N.toString()));return b};
Oi.prototype.ea=function(a,b,c){a=this.Se.ed(c);b=this.D.get(this.index.m());c=(1==a.length&&a[0]instanceof pd&&vd(a[0])?of(b.get(a[0].c),!1,this.Uc?c.X:void 0,this.Vc?c.N:void 0):b.$a(a,this.je,this.Uc?c.X:void 0,this.Vc?c.N:void 0)).map(function(a){return new z(a,{})},this);return[Ed(c,[this.index.Rc])]};function Pi(a){S.call(this,0,1);this.rd=a}t(Pi,S);Pi.prototype.toString=l("select(?)");Pi.prototype.Sc=function(a){a=ee(a,this.rd);return this.toString().replace("?",a.toString())};Pi.prototype.ea=function(a,b,c){return[ee(c,this.rd).eval(b[0])]};function Qi(a,b){S.call(this,0,1);this.U=a.i(lc);this.S=b}t(Qi,S);Qi.prototype.toString=function(){return"table_access_by_row_id("+this.S.getName()+")"};Qi.prototype.ea=function(a,b){return[Ed(jf(this.U,yd(b[0])),[J(this.S)])]};function Ri(a){this.g=a}t(Ri,jh);Ri.prototype.mb=function(a,b){this.Z=a;lg(a,function(a){return a instanceof si}).forEach(function(a){var d=Si(a);if(0!=d.length){var e=Ii(new Hi(this.g,a.table),b,d.map(function(a){return ee(b,a.rd)}));if(null!==e){var f=B();d.forEach(function(a){f.set(a.rd,a)},this);this.Z=Ti(this,e,f,a)}}},this);return this.Z};function Si(a){var b=[];for(a=a.getParent();a;)a instanceof Pi&&b.push(a),a=a.getParent();return b}
function Ti(a,b,c,d){(null===b.Ba?[]:b.Ba.values()).map(function(a){return c.get(a)}).forEach(mg);b=new Oi(a.g,b.wb,Ni(b),!1);a=new Qi(a.g,d.table);Vd(a,b);qg(d,d,a,b);return b.hb()};function Ui(a,b){S.call(this,0,-1);this.D=a.i(mc);this.S=b}t(Ui,S);Ui.prototype.toString=function(){return"insert("+this.S.getName()+")"};Ui.prototype.ea=function(a,b,c){Vi(this.S,c.values,this.D);a.xb(this.S,c.values);return[Ed(c.values,[this.S.getName()])]};function Vi(a,b,c){a=a.Db().fd();if(null===a?0:a.f[0].autoIncrement){var d=a.f[0].ca.getName();c=c.get(a.m()).max();var e=null===c?0:c[0];b.forEach(function(a){if(0==a.s[d]||null==a.s[d])e++,a.s[d]=e})}}
function Wi(a,b){S.call(this,0,-1);this.D=a.i(mc);this.S=b}t(Wi,S);Wi.prototype.toString=function(){return"insert_replace("+this.S.getName()+")"};Wi.prototype.ea=function(a,b,c){Vi(this.S,c.values,this.D);a.Qd(this.S,c.values);return[Ed(c.values,[this.S.getName()])]};function Xi(){S.call(this,0,1)}t(Xi,S);Xi.prototype.toString=l("limit(?)");Xi.prototype.Sc=function(a){return this.toString().replace("?",a.X.toString())};Xi.prototype.ea=function(a,b,c){b[0].entries.splice(c.X);return b};function Yi(a){S.call(this,0,1);this.M=a}t(Yi,S);m=Yi.prototype;m.toString=function(){return"order_by("+je(this.M)+")"};m.ea=function(a,b){if(1==b.length){var c;c=b[0];for(var d=null,e=0;e<this.M.length;e++){var f=Gg(this.M[e].O);if(null!==c.Ya&&c.Ya.has(f.m())){d=f;break}}c=d;(null===c?b[0]:zd(b[0],c)).entries.sort(this.Mf.bind(this))}else b.sort(this.wg.bind(this));return b};
m.V=function(a,b){var c=null,d=null,e=null,f=-1;do f++,e=this.M[f].O,c=this.M[f].kb,d=a(e),e=b(e);while(d==e&&f+1<this.M.length);d=d<e?-1:d>e?1:0;return 1==c?d:-d};m.wg=function(a,b){return this.V(function(b){return b instanceof R?zd(a,b):I(a.entries[a.entries.length-1],b)},function(a){return a instanceof R?zd(b,a):I(b.entries[b.entries.length-1],a)})};m.Mf=function(a,b){return this.V(function(b){return I(a,b)},function(a){return I(b,a)})};function Zi(a,b){this.Ia=a;this.K=b}function $i(a){return a.K.some(function(a){return a instanceof R},a)?aj(a):bj(a)}function aj(a){if(1==a.K.length&&"DISTINCT"==a.K[0].Ib)return a=zd(a.Ia,a.K[0]).entries.map(function(a){var b=new Fd(new z(-1,{}),1<this.Ia.L.size);Hd(b,this.K[0],I(a,this.K[0].child));return b},a),new G(a,[]);var b=new Fd(new z(-1,{}),1<a.Ia.L.size);a.K.forEach(function(a){var d=a instanceof R?zd(this.Ia,a):I(this.Ia.entries[0],a);Hd(b,a,d)},a);return new G([b],H(a.Ia))}
function bj(a){var b=Array(a.Ia.entries.length),c=1<a.Ia.L.size;a.Ia.entries.forEach(function(a,e){b[e]=new Fd(new z(a.sa.id(),{}),c);this.K.forEach(function(c){Hd(b[e],c,I(a,c))},this)},a);return new G(b,H(a.Ia))}function cj(a,b){var c=a.map(function(a){return $i(new Zi(a,b)).entries[0]});return new G(c,H(a[0]))};function dj(a,b){S.call(this,0,1);this.f=a;this.Nb=b}t(dj,S);dj.prototype.toString=function(){var a="project("+this.f.toString();if(null!==this.Nb)var b=this.Nb.map(function(a){return a.m()}).join(", "),a=a+(", groupBy("+b+")");return a+")"};dj.prototype.ea=function(a,b){var c;0==b.length?c=[Bd()]:1==b.length?(c=b[0],c=[0==this.f.length?c:$i(new Zi(c,this.f))]):c=[cj(b,this.f)];return c};function ej(a){return a.f.some(function(a){return a instanceof R})||null!==a.Nb};function fj(){S.call(this,0,1)}t(fj,S);fj.prototype.toString=l("skip(?)");fj.prototype.Sc=function(a){return this.toString().replace("?",a.N.toString())};fj.prototype.ea=function(a,b,c){return[new G(b[0].entries.slice(c.N),H(b[0]))]};function gj(){}t(gj,jh);gj.prototype.mb=function(a,b){if(!q(b.X)&&!q(b.N))return a;var c=hj(a);if(null===c)return a;lg(a,function(a){return a instanceof Xi||a instanceof fj}).forEach(function(a){a instanceof Xi?c.Uc=!0:c.Vc=!0;mg(a)},this);return c.hb()};function hj(a){a=lg(a,function(a){return a instanceof Oi},function(a){return a instanceof dj&&ej(a)||a instanceof Yi||1!=L(a).length||a instanceof Pi});return 0<a.length?a[0]:null};function ij(a){this.g=a}t(ij,jh);ij.prototype.mb=function(a,b){var c=jj(a,b);if(null===c)return a;var d;a:{var e=c;d=kj(Td(c,0));if(null!==d){var f;f=c.M;for(var h=null,k=d.table.xa(),n=0;n<k.length&&null===h;n++)h=lj(k[n],f);f=h;if(null===f){d=e;break a}e=new Oi(this.g,f.wb,new Di(f.wb),f.Pe);f=new Qi(this.g,d.table);Vd(f,e);mg(c);e=qg(d,d,f,e)}d=e}if(d==c)a:if(d=c,e=mj(Td(c,0)),null!==e){f=lj(e.index,c.M);if(null===f)break a;e.je=f.Pe;d=mg(c).parent}return d.hb()};
function mj(a){a=lg(a,function(a){return a instanceof Oi},function(a){return 1!=L(a).length});return 0<a.length?a[0]:null}function kj(a){a=lg(a,function(a){return a instanceof si},function(a){return 1!=L(a).length});return 0<a.length?a[0]:null}function jj(a,b){return q(b.M)?lg(a,function(a){return a instanceof Yi})[0]:null}function lj(a,b){if(a.f.length!=b.length||!b.every(function(b,c){return b.O.getName()==a.f[c].ca.getName()}))return null;var c=nj(b,a);return c[0]||c[1]?{wb:a,Pe:c[1]}:null}
function nj(a,b){var c=a.reduce(function(a,b){return a<<1|(0==b.kb?0:1)},0),d=b.f.reduce(function(a,b){return a<<1|(0==b.kb?0:1)},0),c=c^d;return[0==c,c==Math.pow(2,Math.max(a.length,b.f.length))-1]};function oj(a,b,c){this.Ca=a;this.fe=b;this.Ub=c}oj.prototype.gc=function(){this.Ub.forEach(function(a){this.Ca=a.mb(this.Ca,this.fe)},this);return this.Ca};function pj(a,b){S.call(this,0,1);this.S=a;this.Eg=b}t(pj,S);pj.prototype.toString=function(){return"update("+this.S.getName()+")"};pj.prototype.ea=function(a,b){var c=b[0].entries.map(function(a){var b=this.S.Lb(a.sa.Ja());this.Eg.forEach(function(a){b.s[a.O.getName()]=a.value},this);return b},this);a.update(this.S,c);return[Bd()]};function qj(a){this.g=a;this.me=[new Bi,new Ri(this.g),new ij(this.g),new gj,new ti(this.g)];this.Jd=[new Ri(this.g)]}qj.prototype.create=function(a,b){var c=a.hb();if(c instanceof Xg||c instanceof Wg)return rj(this,a,b);if(c instanceof ch||c instanceof gh||c instanceof hh)return rj(this,a,b,this.me);if(c instanceof Yg||c instanceof Zg)return rj(this,a,b,this.Jd);throw new E(8);};function rj(a,b,c,d){a=jg(b.hb(),a.hg.bind(a));null!=d&&(a=(new oj(a,c,d)).gc());return new ke(a,b.$())}
qj.prototype.hg=function(a){if(a instanceof ch)return new dj(a.f,a.Nb);if(a instanceof fh)return new ui(a.f);if(a instanceof eh)return new Kg(a.f);if(a instanceof dh)return new Yi(a.M);if(a instanceof hh)return new fj;if(a instanceof gh)return new Xi;if(a instanceof $g)return new Pi(a.J.W());if(a instanceof bh)return new oh;if(a instanceof ih)return new wi(this.g,a.J,a.Pb);if(a instanceof ah)return new si(this.g,a.table);if(a instanceof Yg)return new qi(a.table);if(a instanceof Zg)return new pj(a.table,
a.se);if(a instanceof Xg)return new Wi(this.g,a.table);if(a instanceof Wg)return new Ui(this.g,a.table);throw new E(514);};function sj(a){this.fg=new pi;this.rg=new qj(a)};function tj(){this.We=B()}function uj(a,b){var c=a.We.get(b.getName())||null;null===c&&(c=new vj,a.We.set(b.getName(),c));return c}function wj(a,b,c,d){c.forEach(function(a){a=uj(this,a);0==d?(a.bb=null,a.vc=b):3==d?(null===a.Xb&&(a.Xb=D()),a.Xb.add(b),null===a.Ta&&(a.Ta=D()),a.Ta.delete(b)):1==d?(null===a.Ta&&(a.Ta=D()),a.Ta.add(b)):2==d&&(a.bb=b)},a)}
function xj(a,b,c,d){var e=!0;c.forEach(function(a){if(e){a=uj(this,a);var c=null===a.Ta||0==a.Ta.size;e=0==d?(null===a.Xb||0==a.Xb.size)&&c&&null===a.vc&&null!==a.bb&&a.bb==b:3==d?null===a.vc&&null===a.bb&&null!==a.Ta&&a.Ta.has(b):1==d?null===a.bb:c&&(null===a.bb||a.bb==b)}},a);return e}function yj(a,b,c,d){var e=xj(a,b,c,d);e&&wj(a,b,c,d);return e}tj.prototype.releaseLock=function(a,b){b.forEach(function(b){uj(this,b).releaseLock(a)},this)};
function zj(a,b){b.forEach(function(a){uj(this,a).bb=null},a)}function vj(){this.Xb=this.Ta=this.bb=this.vc=null}vj.prototype.releaseLock=function(a){this.vc==a&&(this.vc=null);this.bb==a&&(this.bb=null);null===this.Ta||this.Ta.delete(a);null===this.Xb||this.Xb.delete(a)};function Aj(){this.Tb=new Cj;this.Gc=new tj}function se(a,b){(2>b.getPriority()||2>b.getPriority())&&zj(a.Gc,b.$());a.Tb.xb(b);Dj(a);return b.Mb().ha}function Dj(a){for(var b=a.Tb.ya(),c=0;c<b.length;c++){var d=b[c],e=!1;if(e=0==d.I()?Ej(a,d,1,3):Ej(a,d,2,0))a.Tb.remove(d),e=a,d.exec().then(e.pg.bind(e,d),e.og.bind(e,d))}}function Ej(a,b,c,d){var e=!1;yj(a.Gc,b.W(),b.$(),c)&&(e=yj(a.Gc,b.W(),b.$(),d));return e}Aj.prototype.pg=function(a,b){this.Gc.releaseLock(a.W(),a.$());a.Mb().resolve(b);Dj(this)};
Aj.prototype.og=function(a,b){this.Gc.releaseLock(a.W(),a.$());a.Mb().reject(b);Dj(this)};function Cj(){this.Tb=[]}Cj.prototype.xb=function(a){nf(this.Tb,a,function(a,c){var d=a.getPriority()-c.getPriority();return 0==d?a.W()-c.W():d})};Cj.prototype.ya=function(){return this.Tb.slice()};Cj.prototype.remove=function(a){var b=this.Tb;a=ya(b,a);var c;(c=0<=a)&&xa.splice.call(b,a,1);return c};function Fj(a,b){this.Kd=Kd.Ac();this.ge=a;this.nd=b;this.K=Gj(this)}function Gj(a){if(0<a.ge.f.length)return a.ge.f;var b=[];a.ge.c.forEach(function(a){a.gb().forEach(function(a){b.push(a)})});return b}Fj.prototype.V=function(a,b){return this.K.every(function(c){return Qd(this.Kd,c.I(),"eq")(I(a,c),I(b,c))},this)};
function Hj(a,b,c){var d=null===b?[]:b.entries,e=xb(d,c.entries,a.V.bind(a),function(a){return d[a]});b=[];for(var f=0,h=0;h<d.length;h++){var k=d[h];e[f]==k?f++:(k=a.nd.splice(f,1),k=Ij(h,k,0,a.nd),b.push(k))}e=xb(d,c.entries,a.V.bind(a),function(a,b){return c.entries[b]});for(h=f=0;h<c.entries.length;h++)k=c.entries[h],e[f]==k?f++:(a.nd.splice(h,0,k.sa.s),k=Ij(h,[],1,a.nd),b.push(k));return b}function Ij(a,b,c,d){return{Gg:c,index:a,object:d,Ig:b,type:"splice"}};function Jj(){this.ec=B()}Jj.prototype.zd=function(a,b){var c=ja(a.a).toString(),d=this.ec.get(c)||null;null===d&&(d=new Kj(a),this.ec.set(c,d));d.zd(b)};Jj.prototype.he=function(a,b){var c=ja(a.a).toString(),d=this.ec.get(c)||null;d.he(b);0<d.Kc.size||this.ec.delete(c)};function re(a,b){var c=D();b.forEach(function(a){c.add(a.getName())});var d=[];a.ec.forEach(function(a){a=a.Cc();a.context.c.some(function(a){return c.has(a.getName())})&&d.push(a)});return d}
function pe(a,b,c){b=ja(null!=b.ad?b.ad:b).toString();a=a.ec.get(b)||null;null!==a&&Lj(a,c)}function Kj(a){this.Cf=a;this.Kc=D();this.mg=[];this.Ue=null;this.Kf=new Fj(a.a,this.mg)}Kj.prototype.zd=function(a){this.Kc.has(a)||this.Kc.add(a)};Kj.prototype.he=function(a){return this.Kc.delete(a)};Kj.prototype.Cc=function(){var a=this.Cf;return{context:a.a,ee:Mh(a)}};function Lj(a,b){var c=Hj(a.Kf,a.Ue,b);a.Ue=b;0<c.length&&a.Kc.forEach(function(a){a(c)})};function Mj(a,b){var c=a.i(qc),d=b||{},e=new hf(c);a.lb(lc,e);var e=null,f=!1;null!=d.storeType?e=d.storeType:(e=$b(),e=e.Xf?0:e.Fg?4:1);switch(e){case 0:e=new Pe(a,c);break;case 1:e=new Ue(c);break;case 5:e=new We(c);break;case 4:e=new df(a,c,d.webSqlDbSize);break;case 3:e=new Ee(c,d.firebase);f=!0;break;default:throw new E(300);}a.lb(kc,e);var h=new gg;a.lb(mc,h);return e.Fa(d.onUpgrade).then(function(){var b=new sj(a);a.lb(nc,b);b=new Aj;a.lb(oc,b);b=new Jj;a.lb(pc,b);return h.Fa(c)}).then(function(){if(f){var b=
new te(a);b.Ka.subscribe(b.$d.bind(b))}return(new Yf(a)).Fa(c)})};function Nj(a){this.g=a;this.j=a.i(qc);this.aa=D(this.j.ra());this.cb=y()}m=Nj.prototype;m.exec=function(){var a=this.g.i(mc),b=this.g.i(lc),c={};this.j.ra().forEach(function(d){var f=a.get(Se(d)).$a(),f=jf(b,f).map(function(a){return a.s});c[d.getName()]=f});var d={name:this.j.name(),version:this.j.version(),tables:c},d=new Fd(new z(-1,d),!0);return w([new G([d],[])])};m.I=l(0);m.$=g("aa");m.Mb=g("cb");m.W=function(){return ja(this)};m.getPriority=l(0);function Oj(a,b){this.g=a;this.j=a.i(qc);this.aa=D(this.j.ra());this.cb=y();this.ua=b;this.Ka=a.i(kc);this.U=a.i(lc);this.D=a.i(mc)}m=Oj.prototype;
m.exec=function(){if(!(this.Ka instanceof Pe||this.Ka instanceof Ue||this.Ka instanceof df))throw new E(300);var a;a:{a=this.j.ra();for(var b=0;b<a.length;++b)if(0<this.D.get(Se(a[b])).Oa().oa){a=!1;break a}a=!0}if(!a)throw new E(110);if(this.j.name()!=this.ua.name||this.j.version()!=this.ua.version)throw new E(111);if(null==this.ua.tables)throw new E(112);return Pj(this)};m.I=l(1);m.$=g("aa");m.Mb=g("cb");m.W=function(){return ja(this)};m.getPriority=l(0);
function Pj(a){var b=new kd(a.g,a.aa),b=a.Ka.Cb(a.I(),b),c;for(c in a.ua.tables){var d=a.j.table(c),e=a.ua.tables[c].map(function(a){return d.tb(a)}),f=b.H(c,d.Lb);a.U.Vb(c,e);var h=a.D.jc.get(c)||[];e.forEach(function(a){h.forEach(function(b){var c=a.Eb(b.getName());b.add(c,a.id())})});f.put(e)}return b.ia()};function Qj(a,b){this.g=a;this.Ka=a.i(kc);this.Da=a.i(oc);this.Fb=a.i(pc);this.aa=D(b);this.Ra=new kd(this.g,this.aa);this.cb=y();this.wc=y();this.ue=y()}m=Qj.prototype;m.exec=function(){this.ue.resolve();return this.wc.ha};m.I=l(1);m.$=g("aa");m.Mb=g("cb");m.W=function(){return ja(this)};m.getPriority=l(2);function Rj(a){se(a.Da,a);return a.ue.ha}
function Sj(a,b){var c=b.Cc();return c.ee.hb().exec(a.Ra,c.context).then(function(a){return xd(a[0])},function(a){this.Ra.Gb();var b=new kb(a.name);this.wc.reject(b);throw a;}.bind(a))}m.ia=function(){this.Ka.Cb(this.I(),this.Ra).ia().then(function(){this.Pc();this.wc.resolve()}.bind(this),function(a){this.Ra.Gb();this.wc.reject(a)}.bind(this));return this.cb.ha};m.Gb=function(){this.Ra.Gb();this.wc.resolve();return this.cb.ha};
m.Pc=function(){var a=re(this.Fb,this.aa);0!=a.length&&(a=new oe(this.g,a),se(this.Da,a))};function Tj(a){this.g=a;this.Da=a.i(oc);this.Tc=null;this.Ua=0;0==Uj.size&&(Uj.set(0,D([1,4])),Uj.set(1,D([2])),Uj.set(2,D([3,5,6])),Uj.set(3,D([2,7])),Uj.set(4,D([7])),Uj.set(5,D([7])),Uj.set(6,D([7])))}r("lf.proc.Transaction",Tj);var Uj=B();function Vj(a,b){var c=Uj.get(a.Ua)||null;if(null===c||!c.has(b))throw new E(107,a.Ua,b);a.Ua=b}
Tj.prototype.exec=function(a){Vj(this,4);var b=[];try{a.forEach(function(a){a.fb();b.push(a.Cc())},this)}catch(c){return Vj(this,7),cb(c)}a=new ph(this.g,b);return se(this.Da,a).then(function(a){Vj(this,7);return a.map(function(a){return xd(a)})}.bind(this),function(a){Vj(this,7);throw a;}.bind(this))};Tj.prototype.exec=Tj.prototype.exec;Tj.prototype.Af=function(a){Vj(this,1);this.Tc=new Qj(this.g,a);return Rj(this.Tc).then(function(){Vj(this,2)}.bind(this))};Tj.prototype.begin=Tj.prototype.Af;
Tj.prototype.zf=function(a){Vj(this,3);return Sj(this.Tc,a).then(function(a){Vj(this,2);return a}.bind(this),function(a){Vj(this,7);throw a;}.bind(this))};Tj.prototype.attach=Tj.prototype.zf;Tj.prototype.ia=function(){Vj(this,5);return this.Tc.ia().then(function(){Vj(this,7)}.bind(this))};Tj.prototype.commit=Tj.prototype.ia;Tj.prototype.Gb=function(){Vj(this,6);return this.Tc.Gb().then(function(){Vj(this,7)}.bind(this))};Tj.prototype.rollback=Tj.prototype.Gb;function W(a){this.g=a;this.j=a.i(qc);this.Pd=!1}r("lf.proc.Database",W);W.prototype.Fa=function(a){this.g.lb(qc,this.j);return Mj(this.g,a).then(function(){this.Pd=!0;this.Da=this.g.i(oc);return this}.bind(this))};W.prototype.init=W.prototype.Fa;W.prototype.vb=g("j");W.prototype.getSchema=W.prototype.vb;function Wj(a){if(!a.Pd)throw new E(2);}W.prototype.select=function(a){Wj(this);return new V(this.g,1!=arguments.length||null!=arguments[0]?Array.prototype.slice.call(arguments):[])};
W.prototype.select=W.prototype.select;W.prototype.xb=function(){Wj(this);return new Oh(this.g)};W.prototype.insert=W.prototype.xb;W.prototype.Qd=function(){Wj(this);return new Oh(this.g,!0)};W.prototype.insertOrReplace=W.prototype.Qd;W.prototype.update=function(a){Wj(this);return new Yh(this.g,a)};W.prototype.update=W.prototype.update;W.prototype.delete=function(){Wj(this);return new Nh(this.g)};W.prototype["delete"]=W.prototype.delete;
W.prototype.observe=function(a,b){Wj(this);this.g.i(pc).zd(a,b)};W.prototype.observe=W.prototype.observe;W.prototype.unobserve=function(a,b){Wj(this);this.g.i(pc).he(a,b)};W.prototype.unobserve=W.prototype.unobserve;W.prototype.If=function(){Wj(this);return new Tj(this.g)};W.prototype.createTransaction=W.prototype.If;W.prototype.close=function(){try{this.g.i(kc).close()}catch(a){}this.g.clear();this.Pd=!1};W.prototype.close=W.prototype.close;
W.prototype.Qf=function(){Wj(this);var a=new Nj(this.g);return se(this.Da,a).then(function(a){return xd(a[0])[0]})};W.prototype["export"]=W.prototype.Qf;W.prototype.import=function(a){Wj(this);a=new Oj(this.g,a);return se(this.Da,a).then(l(null))};W.prototype["import"]=W.prototype.import;function X(a,b,c,d,e,f){this.S=a;this.w=b;this.Qe=c;this.Oe=d;this.tf=e;this.eb=f||null}r("lf.schema.BaseColumn",X);m=X.prototype;m.getName=g("w");m.m=function(){return J(this.S)+"."+this.w};m.toString=function(){return this.m()};m.H=g("S");m.I=g("tf");X.prototype.getType=X.prototype.I;X.prototype.Za=g("eb");X.prototype.xa=function(){null==this.ka&&(this.ka=[],this.H().xa().forEach(function(a){-1!=a.f.map(function(a){return a.ca.getName()}).indexOf(this.w)&&this.ka.push(a)},this));return this.ka};
X.prototype.wa=function(){if(!q(this.fa)){var a=this.xa().filter(function(a){return 1!=a.f.length?!1:a.f[0].ca.getName()==this.getName()},this);this.fa=0<a.length?a[0]:null}return this.fa};X.prototype.Ec=g("Oe");X.prototype.isNullable=X.prototype.Ec;X.prototype.Fc=g("Qe");X.prototype.Qa=function(a){return Ag(this,a,"eq")};X.prototype.eq=X.prototype.Qa;X.prototype.Xe=function(a){return Ag(this,a,"neq")};X.prototype.neq=X.prototype.Xe;X.prototype.Wd=function(a){return Ag(this,a,"lt")};
X.prototype.lt=X.prototype.Wd;X.prototype.gg=function(a){return Ag(this,a,"lte")};X.prototype.lte=X.prototype.gg;X.prototype.Sf=function(a){return Ag(this,a,"gt")};X.prototype.gt=X.prototype.Sf;X.prototype.Tf=function(a){return Ag(this,a,"gte")};X.prototype.gte=X.prototype.Tf;X.prototype.match=function(a){return Ag(this,a,"match")};X.prototype.match=X.prototype.match;X.prototype.Bf=function(a,b){return Ag(this,[a,b],"between")};X.prototype.between=X.prototype.Bf;
X.prototype.Uf=function(a){return Ag(this,a,"in")};X.prototype["in"]=X.prototype.Uf;X.prototype.bg=function(){return this.Qa(null)};X.prototype.isNull=X.prototype.bg;X.prototype.ag=function(){return this.Xe(null)};X.prototype.isNotNull=X.prototype.ag;X.prototype.oc=function(a){return new X(this.S,this.w,this.Qe,this.Oe,this.tf,a)};X.prototype.as=X.prototype.oc;function Xj(){this.ud=B()}var Yj;Xj.prototype.clear=function(){this.ud.clear()};Xj.prototype.clear=Xj.prototype.clear;Xj.prototype.lb=function(a,b){this.ud.set(a.toString(),b);return b};Xj.prototype.registerService=Xj.prototype.lb;Xj.prototype.i=function(a){var b=this.ud.get(a.toString())||null;if(null===b)throw new E(7,a.toString());return b};Xj.prototype.getService=Xj.prototype.i;Xj.prototype.Ud=function(a){return this.ud.has(a.toString())};Xj.prototype.isRegistered=Xj.prototype.Ud;function Zj(a){this.j=a;this.Ed=new Uc;this.ie=new Uc;this.Ze=new Uc;this.Ce=B();this.h=new Uc;this.ze=new Uc;this.ff=new Uc;this.Be=new Uc;ak(this)}function ak(a){a.j.ra().forEach(function(a){var c=a.getName();a.Db().Nd().forEach(function(d){this.Ze.set(c,this.j.table(d.Sa));this.h.set(d.Sa,a);0==d.action?(this.ie.set(d.Sa,d),this.ff.set(d.Sa,a)):(this.Ed.set(d.Sa,d),this.ze.set(d.Sa,a));this.Ce.set(a.getName()+"."+d.rb,d.Sa);this.Be.set(d.Sa+"."+d.Mc,a.getName())},this)},a)}
function bd(a,b,c){if(null!=c)return 1==c?a.Ed.get(b):a.ie.get(b);c=a.Ed.get(b);a=a.ie.get(b);return null===c&&null===a?null:(c||[]).concat(a||[])}function vh(a,b){var c=b.get(a);return null===c?[]:c}function xh(a,b){var c=D();b.forEach(function(a){(a=this.Ce.get(a))&&c.add(a)},a);return wc(c).map(function(a){return this.j.table(a)},a)}function th(a,b,c){return null!=c?0==c?vh(b,a.ff):vh(b,a.ze):vh(b,a.h)}
function yh(a,b){var c=D();b.forEach(function(a){(a=this.Be.get(a))&&a.forEach(function(a){c.add(a)})},a);return wc(c).map(function(a){return this.j.table(a)},a)};function bk(a,b,c){this.sg=a;this.lg=b;this.Rf=c}r("lf.schema.Constraint",bk);bk.prototype.fd=g("sg");bk.prototype.getPrimaryKey=bk.prototype.fd;bk.prototype.Nd=g("Rf");bk.prototype.getForeignKeys=bk.prototype.Nd;function ck(a,b,c){var d=a.ref.split(".");if(2!=d.length)throw new E(540,c);this.Ef=b;this.rb=a.local;this.Sa=d[0];this.Mc=d[1];this.name=b+"."+c;this.action=a.action;this.timing=a.timing};function Y(a){dk(a);this.Kd=Kd.Ac();this.w=a;this.K=B();this.wd=D();this.kc=D();this.Jc=D();this.Aa=null;this.ka=B();this.qd=!1;this.ub=[]}r("lf.schema.TableBuilder",Y);function ek(a){this.name=a.name;this.kb=a.order;this.autoIncrement=a.autoIncrement}var fk=D([0,6]);function dk(a){if(!/^[A-Za-z_][A-Za-z0-9_]*$/.test(a))throw new E(502,a);}function gk(a,b){if(b==a.w)throw new E(546,b);if(a.K.has(b)||a.ka.has(b)||a.kc.has(b))throw new E(503,a.w+"."+b);}
function hk(a,b){var c=!1;b.forEach(function(a){var b=this.K.get(a.name);c=c||a.autoIncrement;if(a.autoIncrement&&3!=b)throw new E(504);},a);if(c&&1<b.length)throw new E(505);}function ik(a){if(null!==a.Aa){var b=a.ka.get(a.Aa).map(function(a){return a.name}),c=0;if(a.ub.some(function(a,e){c=e;return-1!=b.indexOf(a.rb)},a))throw new E(543,a.ub[c].name);}}
function jk(a){if(null!==a.Aa){var b=function(a){return a.name},c=JSON.stringify(a.ka.get(a.Aa).map(b));a.ka.forEach(function(a,e){if(e!=this.Aa){var f=a.map(b);if(JSON.stringify(f)==c)throw new E(544,this.w+"."+e);}},a)}}function kk(a){null===a.Aa||a.ka.get(a.Aa).forEach(function(a){if(this.Jc.has(a.name))throw new E(545,this.w+"."+a.name);},a)}Y.prototype.uf=function(a,b){dk(a);gk(this,a);this.K.set(a,b);fk.has(b)&&this.we([a]);return this};Y.prototype.addColumn=Y.prototype.uf;
Y.prototype.wf=function(a,b){var c=this.w;this.Aa="pk"+(c[0].toUpperCase()+c.substring(1));dk(this.Aa);gk(this,this.Aa);c=lk(this,a,!0,void 0,b);hk(this,c);1==c.length&&this.wd.add(c[0].name);this.kc.add(this.Aa);this.ka.set(this.Aa,c);return this};Y.prototype.addPrimaryKey=Y.prototype.wf;
Y.prototype.vf=function(a,b){dk(a);gk(this,a);var c=new ck(b,this.w,a);q(c.action)||(c.action=0);q(c.timing)||(c.timing=0);if(1==c.action&&1==c.timing)throw new E(506);if(!this.K.has(c.rb))throw new E(540,a);this.ub.push(c);this.ve(a,[c.rb],this.wd.has(c.rb));return this};Y.prototype.addForeignKey=Y.prototype.vf;Y.prototype.xf=function(a,b){dk(a);gk(this,a);var c=lk(this,b,!0);mk(this,a,c);1==c.length&&(this.wd.add(c[0].name),nk(this,c[0].name));this.ka.set(a,c);this.kc.add(a);return this};
Y.prototype.addUnique=Y.prototype.xf;function nk(a,b){a.ub.forEach(function(a){a.rb==b&&this.kc.add(a.name.split(".")[1])},a)}Y.prototype.we=function(a){a=lk(this,a,!1);ok(this,a);a.forEach(function(a){this.Jc.add(a.name)},this);return this};Y.prototype.addNullable=Y.prototype.we;function ok(a,b){bc(a.ka).forEach(function(a){var d=D();this.ka.get(a).forEach(function(a){d.add(a.name)});var e=b.filter(function(a){return d.has(a.name)});if(1<d.size&&0<e.length)throw new E(507,a,e.join(","));},a)}
Y.prototype.ve=function(a,b,c,d){dk(a);gk(this,a);b=lk(this,b,!0,d);mk(this,a,b);c&&this.kc.add(a);this.ka.set(a,b);return this};Y.prototype.addIndex=Y.prototype.ve;function mk(a,b,c){if(1<c.length&&(a=c.filter(function(a){return this.Jc.has(a.name)},a),0<a.length))throw new E(507,b,a.join(","));}Y.prototype.zb=ba("qd");Y.prototype.persistentIndex=Y.prototype.zb;Y.prototype.vb=function(){ik(this);jk(this);kk(this);return new (pk(this))};Y.prototype.getSchema=Y.prototype.vb;
function qk(a){return a.ub}function lk(a,b,c,d,e){var f=b,f="string"==typeof b[0]?b.map(function(a){return new ek({name:a,order:null!=d?d:1,autoIncrement:e||!1})}):b.map(function(a){return new ek(a)});f.forEach(function(a){if(!this.K.has(a.name))throw new E(508,this.w,a.name);if(c){var b=this.K.get(a.name);if(0==b||6==b)throw new E(509,this.w,a.name);}},a);return f}
function pk(a){function b(){function b(c){return a.ka.get(c).map(function(a){return{ca:this[a.name],kb:a.kb,autoIncrement:a.autoIncrement}},this)}var d=bc(a.K).map(function(b){this[b]=new X(this,b,a.wd.has(b),a.Jc.has(b),a.K.get(b));return this[b]},this),e=bc(a.ka).map(function(d){return new Cg(a.w,d,a.kc.has(d),b.call(this,d))},this);Q.call(this,a.w,d,e,a.qd);var f=null===a.Aa?null:new Cg(a.w,a.Aa,!0,b.call(this,a.Aa)),h=d.filter(function(b){return!a.Jc.has(b.getName())});this.Ff=new bk(f,h,a.ub);
this.jf=rk(a,d,e)}t(b,Q);b.prototype.tb=function(a){return new this.jf(qb++,a)};b.prototype.createRow=b.prototype.tb;b.prototype.Lb=function(a){var b={};this.gb().forEach(function(e){var f=e.getName();e=e.I();var h=a.value[f];if(0==e)if(e=h,null!=e&&""!=e){0!=e.length%2&&(e="0"+e);for(var h=new ArrayBuffer(e.length/2),k=new Uint8Array(h),n=0,x=0;n<e.length;n+=2)k[x++]=parseInt(e.substr(n,2),16);e=h}else e=null;else e=2==e?null!=h?new Date(h):null:h;b[f]=e},this);return new this.jf(a.id,b)};b.prototype.deserializeRow=
b.prototype.Lb;b.prototype.Db=g("Ff");b.prototype.getConstraint=b.prototype.Db;return b}
function rk(a,b,c){function d(a,d){this.K=b;this.ka=c;z.call(this,a,d)}t(d,z);d.prototype.Fe=function(){var a={};this.K.forEach(function(b){a[b.getName()]=b.Ec()?null:Tc[b.I()]});return a};d.prototype.qf=function(){var a={};this.K.forEach(function(b){var c=b.getName();b=b.I();var d=this.s[c];a[c]=0==b?null!=d?ub(d):null:2==b?null!=d?d.getTime():null:6==b?null!=d?d:null:d},this);return a};var e=function(a){var b=this.K.get(a.getName()),c=this.Kd.Re.get(b)||null;return function(b){return c(b[a.getName()])}}.bind(a),
f=function(a){var b=a.map(function(a){return e(a.ca)});return function(a){return b.map(function(b){return b(a)})}}.bind(a),h={};c.forEach(function(a){var b=a.m();a=1==a.f.length?e(a.f[0].ca):f(a.f);h[b]=a});d.prototype.Eb=function(a){return-1!=a.indexOf("#")?this.id():h.hasOwnProperty(a)?h[a](this.s):null};return d};function sk(a,b){this.j=new Z(a,b);this.pb=B();this.xc=!1}r("lf.schema.Builder",sk);function tk(a,b){b.ub.forEach(function(a){var d=a.Sa;if(!this.pb.has(d))throw new E(536,a.name);var d=this.pb.get(d).vb(),e=a.Mc;if(!d.hasOwnProperty(e))throw new E(537,a.name);if(b.vb()[a.rb].I()!=d[e].I())throw new E(538,a.name);if(!d[e].Fc())throw new E(539,a.name);},a)}sk.prototype.Df=function(a){a.ub.forEach(function(a){qk(this.pb.get(a.Sa)).forEach(function(c){if(c.rb==a.Mc)throw new E(534,a.name);},this)},this)};
function uk(a){a.xc||(a.pb.forEach(function(a){tk(this,a);a=a.vb();this.j.L.set(a.getName(),a)},a),C(a.pb).forEach(a.Df,a),vk(a),a.pb.clear(),a.xc=!0)}function wk(a,b,c){b.te||(b.te=!0,b.ae=!0,b.Ge.forEach(function(a){a=c.get(a);if(!a.te)wk(this,a,c);else if(a.ae&&b!=a)throw new E(533);},a));b.ae=!1}function vk(a){var b=B();a.j.L.forEach(function(a,d){b.set(d,new xk(d))},a);a.pb.forEach(function(a,d){a.ub.forEach(function(a){b.get(a.Sa).Ge.add(d)})});C(b).forEach(function(a){wk(this,a,b)},a)}
function xk(a){this.ae=this.te=!1;this.Ge=D();this.Rc=a}sk.prototype.vb=function(){this.xc||uk(this);return this.j};sk.prototype.getSchema=sk.prototype.vb;sk.prototype.Ie=function(){var a=new jc("ns_"+this.j.name()),b;Yj||(Yj=new Xj);b=Yj;var c=null;b.Ud(a)?c=b.i(a):(c=new Xj,b.lb(a,c));return c};sk.prototype.getGlobal=sk.prototype.Ie;sk.prototype.connect=function(a){var b=this.Ie();b.Ud(qc)||b.lb(qc,this.vb());return(new W(b)).Fa(a)};sk.prototype.connect=sk.prototype.connect;
sk.prototype.Hf=function(a){if(this.pb.has(a))throw new E(503,a);if(this.xc)throw new E(535);this.pb.set(a,new Y(a));return this.pb.get(a)};sk.prototype.createTable=sk.prototype.Hf;sk.prototype.ne=function(a){if(this.xc)throw new E(535);this.j.ne(a);return this};sk.prototype.setPragma=sk.prototype.ne;function Z(a,b){this.w=a;this.Pa=b;this.L=B();this.cf={Lf:!1}}r("lf.schema.DatabaseSchema",Z);Z.prototype.name=g("w");Z.prototype.name=Z.prototype.name;Z.prototype.version=g("Pa");
Z.prototype.version=Z.prototype.version;Z.prototype.ra=function(){return C(this.L)};Z.prototype.tables=Z.prototype.ra;Z.prototype.table=function(a){if(!this.L.has(a))throw new E(101,a);return this.L.get(a)};Z.prototype.table=Z.prototype.table;Z.prototype.info=function(){this.Me||(this.Me=new Zj(this));return this.Me};Z.prototype.bf=g("cf");Z.prototype.pragma=Z.prototype.bf;Z.prototype.ne=ba("cf");r("lf.schema.create",function(a,b){return new sk(a,b)});v.prototype.catch=v.prototype.qe;v.prototype["catch"]=v.prototype.catch;}.bind(window))()
//# sourceMappingURL=lovefield.min.js.map
