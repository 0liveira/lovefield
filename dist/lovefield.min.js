/*
  Copyright 2014 The Lovefield Project Authors. All Rights Reserved.

  Licensed under the Apache License, Version 2.0 (the "License");
  you may not use this file except in compliance with the License.
  You may obtain a copy of the License at

  http://www.apache.org/licenses/LICENSE-2.0

  Unless required by applicable law or agreed to in writing, software
  distributed under the License is distributed on an "AS IS" BASIS,
  WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
  See the License for the specific language governing permissions and
  limitations under the License.
*/
(function(){'use strict';var aa=window,ba=Object,ca=Function,da=document,ea=Math,e=Array,fa=Error,ga=parseInt;function ha(a,b){return a.exec=b}function ia(a,b){return a.getName=b}function ja(a,b){return a.remove=b}function ka(a,b){return a.values=b}function la(a,b){return a.clear=b}function ma(a,b){return a.bind=b}function f(a,b){return a.toString=b}function na(a,b){return a.table=b}function oa(a,b){return a.next=b}function pa(a,b){return a.close=b}function qa(a,b){return a.clone=b}
function ra(a,b){return a.child=b}function sa(a,b){return a.onerror=b}function ta(a,b){return a.value=b}function ua(a,b){return a.getPriority=b}function va(a,b){return a.subscribe=b}function wa(a,b){return a.name=b}function xa(a,b){return a.length=b}function ya(a,b){return a.onsuccess=b}function za(a,b){return a.update=b}
var Aa="context",Ba="filter",Ca="version",Da="getParent",Ea="shift",Fa="exec",Ga="replace",Ia="concat",Ja="objectStoreNames",h="getName",m="remove",Ka="autoIncrement",n="forEach",La="values",Ma="clear",q="bind",Na="getTime",r="toString",Oa="global",Pa="propertyIsEnumerable",Qa="create",t="table",Ra="compare",Sa="result",Ta="index",Ua="next",Va="split",Wa="hasOwnProperty",Xa="close",Ya="setImmediate",Za="transaction",$a="child",ab="rows",u="contains",v="apply",w="push",bb="reject",cb="reduce",db="addAll",
x="slice",y="value",eb="item",fb="objectStore",z="indexOf",gb="getPriority",hb="delete",ib="name",A="length",C="prototype",D="then",E="entries",jb="removeChild",kb="target",F="call",lb="resolve",mb="some",nb="sort",ob="every",pb="update",G="splice",H="join",qb="unshift";function rb(){return function(){}}function sb(a){return function(b){this[a]=b}}function I(a){return function(){return this[a]}}function tb(a){return function(){return a}}var J,ub=this;function vb(a){return void 0!==a}
function K(a,b,c){a=a[Va](".");c=c||ub;a[0]in c||!c.execScript||c.execScript("var "+a[0]);for(var d;a[A]&&(d=a[Ea]());)!a[A]&&vb(b)?c[d]=b:c=c[d]?c[d]:c[d]={}}function wb(){}function xb(a){a.ie=function(){return a.Af?a.Af:a.Af=new a}}
function yb(a){var b=typeof a;if("object"==b)if(a){if(a instanceof e)return"array";if(a instanceof ba)return b;var c=ba[C][r][F](a);if("[object Window]"==c)return"object";if("[object Array]"==c||"number"==typeof a[A]&&"undefined"!=typeof a[G]&&"undefined"!=typeof a[Pa]&&!a[Pa]("splice"))return"array";if("[object Function]"==c||"undefined"!=typeof a[F]&&"undefined"!=typeof a[Pa]&&!a[Pa]("call"))return"function"}else return"null";else if("function"==b&&"undefined"==typeof a[F])return"object";return b}
function zb(a){return null===a}function Ab(a){return null!=a}function Bb(a){var b=yb(a);return"array"==b||"object"==b&&"number"==typeof a[A]}function Cb(a){return"string"==typeof a}function Db(a){return"function"==yb(a)}function Eb(a){return a[Fb]||(a[Fb]=++Gb)}var Fb="closure_uid_"+(1E9*ea.random()>>>0),Gb=0;function Hb(a,b,c){return a[F][v](a[q],arguments)}
function Ib(a,b,c){if(!a)throw fa();if(2<arguments[A]){var d=e[C][x][F](arguments,2);return function(){var c=e[C][x][F](arguments);e[C][qb][v](c,d);return a[v](b,c)}}return function(){return a[v](b,arguments)}}function L(a,b,c){L=ca[C][q]&&-1!=ca[C][q][r]()[z]("native code")?Hb:Ib;return L[v](null,arguments)}function Jb(a,b){var c=e[C][x][F](arguments,1);return function(){var b=c[x]();b[w][v](b,arguments);return a[v](this,b)}}
function M(a,b){function c(){}c.prototype=b[C];a.$a=b[C];a.prototype=new c;a[C].constructor=a;a.rk=function(a,c,k){for(var l=e(arguments[A]-2),p=2;p<arguments[A];p++)l[p-2]=arguments[p];return b[C][c][v](a,l)}}ma(ca[C],ca[C][q]||function(a,b){if(1<arguments[A]){var c=e[C][x][F](arguments,1);c[qb](this,a);return L[v](null,c)}return L(this,a)});function Kb(a){if(fa.captureStackTrace)fa.captureStackTrace(this,Kb);else{var b=fa().stack;b&&(this.stack=b)}a&&(this.message=String(a))}M(Kb,fa);wa(Kb[C],"CustomError");function Lb(a,b){for(var c=a[Va]("%s"),d="",g=e[C][x][F](arguments,1);g[A]&&1<c[A];)d+=c[Ea]()+g[Ea]();return d+c[H]("%s")};function Mb(a,b){b[qb](a);Kb[F](this,Lb[v](null,b));b[Ea]()}M(Mb,Kb);wa(Mb[C],"AssertionError");function Nb(a,b,c,d){var g="Assertion failed";if(c)var g=g+(": "+c),k=d;else a&&(g+=": "+a,k=b);throw new Mb(""+g,k||[]);}function N(a,b,c){a||Nb("",null,b,e[C][x][F](arguments,2));return a}function Ob(a,b){throw new Mb("Failure"+(a?": "+a:""),e[C][x][F](arguments,1));}function Pb(a,b,c){Db(a)||Nb("Expected function but got %s: %s.",[yb(a),a],b,e[C][x][F](arguments,2));return a};function Qb(a,b,c){this.Nf=c;this.Fh=a;this.Tj=b;this.zd=0;this.rd=null}Qb[C].get=function(){var a;0<this.zd?(this.zd--,a=this.rd,this.rd=a[Ua],oa(a,null)):a=this.Fh();return a};Qb[C].put=function(a){this.Tj(a);this.zd<this.Nf&&(this.zd++,oa(a,this.rd),this.rd=a)};var Rb=e[C],Sb=Rb[z]?function(a,b,c){N(null!=a[A]);return Rb[z][F](a,b,c)}:function(a,b,c){c=null==c?0:0>c?ea.max(0,a[A]+c):c;if(Cb(a))return Cb(b)&&1==b[A]?a[z](b,c):-1;for(;c<a[A];c++)if(c in a&&a[c]===b)return c;return-1},Tb=Rb[n]?function(a,b,c){N(null!=a[A]);Rb[n][F](a,b,c)}:function(a,b,c){for(var d=a[A],g=Cb(a)?a[Va](""):a,k=0;k<d;k++)k in g&&b[F](c,g[k],k,a)},Ub=Rb.map?function(a,b,c){N(null!=a[A]);return Rb.map[F](a,b,c)}:function(a,b,c){for(var d=a[A],g=e(d),k=Cb(a)?a[Va](""):a,l=0;l<d;l++)l in
k&&(g[l]=b[F](c,k[l],l,a));return g},Vb=Rb[cb]?function(a,b,c,d){N(null!=a[A]);d&&(b=L(b,d));return Rb[cb][F](a,b,c)}:function(a,b,c,d){var g=c;Tb(a,function(c,l){g=b[F](d,g,c,l,a)});return g},Wb=Rb[mb]?function(a,b,c){N(null!=a[A]);return Rb[mb][F](a,b,c)}:function(a,b,c){for(var d=a[A],g=Cb(a)?a[Va](""):a,k=0;k<d;k++)if(k in g&&b[F](c,g[k],k,a))return!0;return!1},Xb=Rb[ob]?function(a,b,c){N(null!=a[A]);return Rb[ob][F](a,b,c)}:function(a,b,c){for(var d=a[A],g=Cb(a)?a[Va](""):a,k=0;k<d;k++)if(k in
g&&!b[F](c,g[k],k,a))return!1;return!0};function Yb(a,b){N(null!=a[A]);return 1==Rb[G][F](a,b,1)[A]}function Zb(a,b,c){a:{for(var d=a[A],g=Cb(a)?a[Va](""):a,k=0;k<d;k++)if(k in g&&b[F](c,g[k],k,a)){b=k;break a}b=-1}return 0<=b?(Yb(a,b),!0):!1}function $b(a){var b=a[A];if(0<b){for(var c=e(b),d=0;d<b;d++)c[d]=a[d];return c}return[]}function ac(a,b){for(var c=1;c<arguments[A];c++){var d=arguments[c];if(Bb(d)){var g=a[A]||0,k=d[A]||0;xa(a,g+k);for(var l=0;l<k;l++)a[g+l]=d[l]}else a[w](d)}}
function bc(a,b,c,d){N(null!=a[A]);return Rb[G][v](a,cc(arguments,1))}function cc(a,b,c){N(null!=a[A]);return 2>=arguments[A]?Rb[x][F](a,b):Rb[x][F](a,b,c)}function dc(a,b,c,d,g){for(var k=0,l=a[A],p;k<l;){var B=k+l>>1,Ha;Ha=c?b[F](g,a[B],B,a):b(d,a[B]);0<Ha?k=B+1:(l=B,p=!Ha)}return p?k:~k}function ec(a,b){return a>b?1:a<b?-1:0}function fc(a,b,c){c=dc(a,c||ec,!1,b);return 0>c?(bc(a,-(c+1),0,b),!0):!1}function gc(a,b){for(var c=[],d=0;d<b;d++)c[d]=a;return c}
function hc(a){for(var b=[],c=0;c<arguments[A];c++){var d=arguments[c];if("array"==yb(d))for(var g=0;g<d[A];g+=8192)for(var k=cc(d,g,g+8192),k=hc[v](null,k),l=0;l<k[A];l++)b[w](k[l]);else b[w](d)}return b};function ic(a,b,c){for(var d in a)b[F](c,a[d],d,a)}function jc(a,b,c){for(var d in a)if(b[F](c,a[d],d,a))return!0;return!1}function kc(a){var b=[],c=0,d;for(d in a)b[c++]=a[d];return b}function lc(a){var b=[],c=0,d;for(d in a)b[c++]=d;return b};var mc;a:{var nc=ub.navigator;if(nc){var oc=nc.userAgent;if(oc){mc=oc;break a}}mc=""};function pc(a){ub.setTimeout(function(){throw a;},0)}var qc;
function rc(){var a=ub.MessageChannel;"undefined"===typeof a&&"undefined"!==typeof aa&&aa.postMessage&&aa.addEventListener&&-1==mc[z]("Presto")&&(a=function(){var a=da.createElement("IFRAME");a.style.display="none";a.src="";da.documentElement.appendChild(a);var b=a.contentWindow,a=b.document;a.open();a.write("");a[Xa]();var c="callImmediate"+ea.random(),d="file:"==b.location.protocol?"*":b.location.protocol+"//"+b.location.host,a=L(function(a){if(("*"==d||a.origin==d)&&a.data==c)this.port1.onmessage()},
this);b.addEventListener("message",a,!1);this.port1={};this.port2={postMessage:function(){b.postMessage(c,d)}}});if("undefined"!==typeof a&&-1==mc[z]("Edge")&&-1==mc[z]("Trident")&&-1==mc[z]("MSIE")){var b=new a,c={},d=c;b.port1.onmessage=function(){if(vb(c[Ua])){c=c[Ua];var a=c.cf;c.cf=null;a()}};return function(a){oa(d,{cf:a});d=d[Ua];b.port2.postMessage(0)}}return"undefined"!==typeof da&&"onreadystatechange"in da.createElement("SCRIPT")?function(a){var b=da.createElement("SCRIPT");b.onreadystatechange=
function(){b.onreadystatechange=null;b.parentNode[jb](b);b=null;a();a=null};da.documentElement.appendChild(b)}:function(a){ub.setTimeout(a,0)}};function sc(){this.Od=this.Vb=null}var uc=new Qb(function(){return new tc},function(a){a.reset()},100);sc[C].add=function(a,b){var c=this.Qi();c.set(a,b);this.Od?oa(this.Od,c):(N(!this.Vb),this.Vb=c);this.Od=c};ja(sc[C],function(){var a=null;this.Vb&&(a=this.Vb,this.Vb=this.Vb[Ua],this.Vb||(this.Od=null),oa(a,null));return a});sc[C].Uj=function(a){uc.put(a)};sc[C].Qi=function(){return uc.get()};function tc(){this.scope=this.de=null;oa(this,null)}
tc[C].set=function(a,b){this.de=a;this.scope=b;oa(this,null)};tc[C].reset=function(){this.scope=this.de=null;oa(this,null)};function vc(a,b){wc||xc();yc||(wc(),yc=!0);zc.add(a,b)}var wc;function xc(){if(ub.Promise&&ub.Promise[lb]){var a=ub.Promise[lb]();wc=function(){a[D](Ac)}}else wc=function(){var a=Ac;if(!Db(ub[Ya])||ub.Window&&ub.Window[C]&&ub.Window[C][Ya]==ub[Ya])qc||(qc=rc()),qc(a);else ub[Ya](a)}}var yc=!1,zc=new sc;[][w](function(){yc=!1;zc=new sc});function Ac(){for(var a=null;a=zc[m]();){try{a.de[F](a.scope)}catch(b){pc(b)}zc.Uj(a)}yc=!1};function O(a,b){this.ya=0;this.gg=void 0;this.Uc=this.Zb=this.F=null;this.qd=this.ce=!1;if(a==Bc)this.jc(2,b);else try{var c=this;a[F](b,function(a){c.jc(2,a)},function(a){if(!(a instanceof Cc))try{if(a instanceof fa)throw a;throw fa("Promise rejected.");}catch(b){}c.jc(3,a)})}catch(d){this.jc(3,d)}}function Dc(){ra(this,null);this.context=this.hc=this.Kb=null;oa(this,null);this.Rd=!1}Dc[C].reset=function(){ra(this,null);this.context=this.hc=this.Kb=null;this.Rd=!1};
var Ec=new Qb(function(){return new Dc},function(a){a.reset()},100);function Fc(a,b,c){var d=Ec.get();d.Kb=a;d.hc=b;d.context=c;return d}function Bc(){}function Gc(a){return a instanceof O?a:new O(Bc,a)}function Hc(a){return new O(function(b,c){c(a)})}function Ic(a){return new O(function(b,c){var d=a[A],g=[];if(d)for(var k=function(a,c){d--;g[a]=c;0==d&&b(g)},l=function(a){c(a)},p=0,B;B=a[p];p++)Jc(B,Jb(k,p),l);else b(g)})}
function Kc(){var a,b,c=new O(function(c,g){a=c;b=g});return new Lc(c,a,b)}O[C].then=function(a,b,c){null!=a&&Pb(a,"opt_onFulfilled should be a function.");null!=b&&Pb(b,"opt_onRejected should be a function. Did you pass opt_context as the second argument instead of the third?");return this.Re(Db(a)?a:null,Db(b)?b:null,c)};O[C].then=O[C][D];O[C].$goog_Thenable=!0;J=O[C];
J.hk=function(a,b,c){null!=a&&Pb(a,"opt_onFulfilled should be a function.");null!=b&&Pb(b,"opt_onRejected should be a function. Did you pass opt_context as the second argument instead of the third?");this.Qe(Fc(a||wb,b||null,c))};function Jc(a,b,c,d){a instanceof O?a.hk(b,c,d):a[D](b,c,d)}J.ug=function(a,b){return this.Re(null,a,b)};J.Qe=function(a){this.$i()||2!=this.ya&&3!=this.ya||this.jg();this.Kj(a)};
J.Re=function(a,b,c){var d=Fc(null,null,null);ra(d,new O(function(g,k){d.Kb=a?function(b){try{var d=a[F](c,b);g(d)}catch(B){k(B)}}:g;d.hc=b?function(a){try{var d=b[F](c,a);!vb(d)&&a instanceof Cc?k(a):g(d)}catch(B){k(B)}}:k}));d[$a].F=this;this.Qe(d);return d[$a]};J.zg=function(a){N(1==this.ya);this.ya=0;this.jc(2,a)};J.Ag=function(a){N(1==this.ya);this.ya=0;this.jc(3,a)};
J.jc=function(a,b){if(0==this.ya){if(this==b)a=3,b=new TypeError("Promise cannot resolve to itself");else{var c;if(b)try{c=!!b.$goog_Thenable}catch(d){c=!1}else c=!1;if(c){this.ya=1;Jc(b,this.zg,this.Ag,this);return}c=typeof b;if("object"==c&&null!=b||"function"==c)try{var g=b[D];if(Db(g)){this.kk(b,g);return}}catch(k){a=3,b=k}}this.gg=b;this.ya=a;this.F=null;this.jg();3!=a||b instanceof Cc||Mc(this,b)}};
J.kk=function(a,b){function c(a){k||(k=!0,g.Ag(a))}function d(a){k||(k=!0,g.zg(a))}this.ya=1;var g=this,k=!1;try{b[F](a,d,c)}catch(l){c(l)}};J.jg=function(){this.ce||(this.ce=!0,vc(this.$h,this))};J.$i=function(){return!!this.Zb};J.Kj=function(a){N(null!=a.Kb);this.Uc?oa(this.Uc,a):this.Zb=a;this.Uc=a};J.Dj=function(){var a=null;this.Zb&&(a=this.Zb,this.Zb=a[Ua],oa(a,null));this.Zb||(this.Uc=null);null!=a&&N(null!=a.Kb);return a};
J.$h=function(){for(var a=null;a=this.Dj();)this.Zh(a,this.ya,this.gg);this.ce=!1};J.Zh=function(a,b,c){3==b&&a.hc&&!a.Rd&&this.Rj();if(a[$a])a[$a].F=null,Nc(a,b,c);else try{a.Rd?a.Kb[F](a[Aa]):Nc(a,b,c)}catch(d){Oc[F](null,d)}Ec.put(a)};function Nc(a,b,c){2==b?a.Kb[F](a[Aa],c):a.hc&&a.hc[F](a[Aa],c)}J.Og=rb();J.Rj=function(){var a;for(a=this;a&&a.qd;a=a.F)a.qd=!1};function Mc(a,b){a.qd=!0;vc(function(){a.qd&&(a.Og(b),Oc[F](null,b))})}var Oc=pc;function Cc(a){Kb[F](this,a)}M(Cc,Kb);wa(Cc[C],"cancel");
function Lc(a,b,c){this.ra=a;this.resolve=b;this.reject=c};
function Pc(a,b){this.va=a;this.Mb=b||this.hf()}var Qc=0;J=Pc[C];J.id=I("va");J.Wg=sb("va");J.D=I("Mb");J.hf=function(){return{}};J.vg=I("Mb");J.Za=function(){return{id:this.va,value:this.vg()}};J.Gc=function(a){return"#"==a.substr(-1)?this.va:null};function Rc(a){return new Pc(a.id,a[y])}function Sc(a){return new Pc(Qc++,a||{})}function Tc(a){if(null==a)return"";a=new Uint8Array(a);for(var b="",c=0;c<a[A];++c)var d=a[c][r](16),b=b+(2>d[A]?"0"+d:d);return b};
function Uc(a){this.type=a}function Vc(a){Pc[F](this,-1,a)}M(Vc,Pc);
var Wc={};K("lf.TransactionType",Wc,void 0);Wc.READ_ONLY=0;Wc.READ_WRITE=1;

function Xc(a,b){this.Ta=a;this.wg=b;this.aa=Kc()}J=Xc[C];J.Di=I("Ta");J.fa=function(){return(0==this.wg?Gc():this.pj())[D](L(function(){this.Ta.fa()},this))};J.pj=function(){this.qj();this.oj();return this.aa.ra};
J.qj=function(){var a=this.Ta.pf();a.H()[n](function(b){var c=this.Ta.ca().get(b),c=this.X(c[h](),L(c.ac,c));b=a.get(b);var d=b.fd().c().map(function(a){return a.id()});0<d[A]&&c[m](d).ug(this.qe,this);b=b.ld().c().map(function(a){return a[1]})[Ia](b.ed().c());c.put(b).ug(this.qe,this)},this)};J.oj=function(){this.Ta.Ai()[n](function(a){var b=this.X(a[h](),Rc),c;b.get([-1])[D](function(a){c=a;return b[m]([])})[D](function(){b.put(c);b.put(a.Za())},L(this.qe,this))},this)};J.qe=function(a){this.aa[bb](a)};function Yc(a,b,c,d){c=c||function(a,b){return a==b};d=d||function(b){return a[b]};for(var g=a[A],k=b[A],l=[],p=0;p<g+1;p++)l[p]=[],l[p][0]=0;for(var B=0;B<k+1;B++)l[0][B]=0;for(p=1;p<=g;p++)for(B=1;B<=k;B++)c(a[p-1],b[B-1])?l[p][B]=l[p-1][B-1]+1:l[p][B]=ea.max(l[p-1][B],l[p][B-1]);for(var Ha=[],p=g,B=k;0<p&&0<B;)c(a[p-1],b[B-1])?(Ha[qb](d(p-1,B-1)),p--,B--):l[p-1][B]>l[p][B-1]?p--:B--;return Ha}function Zc(a){return Vb(arguments,function(a,c){return a+c},0)}
function $c(a){return Zc[v](null,arguments)/arguments[A]}function ad(a){var b=arguments[A];if(2>b)return 0;var c=$c[v](null,arguments);return Zc[v](null,Ub(arguments,function(a){return ea.pow(a-c,2)}))/(b-1)}function bd(a){return ea.sqrt(ad[v](null,arguments))};var cd="StopIteration"in ub?ub.StopIteration:{message:"StopIteration",stack:""};function dd(){}oa(dd[C],function(){throw cd;});dd[C].nc=function(){return this};function ed(a){if(a instanceof dd)return a;if("function"==typeof a.nc)return a.nc(!1);if(Bb(a)){var b=0,c=new dd;oa(c,function(){for(;;){if(b>=a[A])throw cd;if(b in a)return a[b++];b++}});return c}throw fa("Not implemented");}
function fd(a,b,c){if(Bb(a))try{Tb(a,b,c)}catch(d){if(d!==cd)throw d;}else{a=ed(a);try{for(;;)b[F](c,a[Ua](),void 0,a)}catch(g){if(g!==cd)throw g;}}}function gd(a){if(Wb(arguments,function(a){return!a[A]})||!arguments[A])return new dd;var b=new dd,c=arguments,d=gc(0,c[A]);oa(b,function(){if(d){for(var a=Ub(d,function(a,b){return c[b][a]}),b=d[A]-1;0<=b;b--){N(d);if(d[b]<c[b][A]-1){d[b]++;break}if(0==b){d=null;break}d[b]=0}return a}throw cd;});return b};function P(a,b){this.h={};this.b=[];this.sb=this.Y=0;var c=arguments[A];if(1<c){if(c%2)throw fa("Uneven number of arguments");for(var d=0;d<c;d+=2)this.set(arguments[d],arguments[d+1])}else a&&this[db](a)}J=P[C];J.ba=I("Y");J.c=function(){this.tc();for(var a=[],b=0;b<this.b[A];b++)a[w](this.h[this.b[b]]);return a};J.H=function(){this.tc();return this.b[Ia]()};J.u=function(a){return hd(this.h,a)};J.Yc=function(a){for(var b=0;b<this.b[A];b++){var c=this.b[b];if(hd(this.h,c)&&this.h[c]==a)return!0}return!1};
J.xc=function(a,b){if(this===a)return!0;if(this.Y!=a.ba())return!1;var c=b||id;this.tc();for(var d,g=0;d=this.b[g];g++)if(!c(this.get(d),a.get(d)))return!1;return!0};function id(a,b){return a===b}J.Ba=function(){return 0==this.Y};la(J,function(){this.h={};xa(this.b,0);this.sb=this.Y=0});ja(J,function(a){return hd(this.h,a)?(delete this.h[a],this.Y--,this.sb++,this.b[A]>2*this.Y&&this.tc(),!0):!1});
J.tc=function(){if(this.Y!=this.b[A]){for(var a=0,b=0;a<this.b[A];){var c=this.b[a];hd(this.h,c)&&(this.b[b++]=c);a++}xa(this.b,b)}if(this.Y!=this.b[A]){for(var d={},b=a=0;a<this.b[A];)c=this.b[a],hd(d,c)||(this.b[b++]=c,d[c]=1),a++;xa(this.b,b)}};J.get=function(a,b){return hd(this.h,a)?this.h[a]:b};J.set=function(a,b){hd(this.h,a)||(this.Y++,this.b[w](a),this.sb++);this.h[a]=b};J.addAll=function(a){var b;a instanceof P?(b=a.H(),a=a.c()):(b=lc(a),a=kc(a));for(var c=0;c<b[A];c++)this.set(b[c],a[c])};
J.forEach=function(a,b){for(var c=this.H(),d=0;d<c[A];d++){var g=c[d],k=this.get(g);a[F](b,k,g,this)}};qa(J,function(){return new P(this)});J.nc=function(a){this.tc();var b=0,c=this.sb,d=this,g=new dd;oa(g,function(){if(c!=d.sb)throw fa("The map has changed since the iterator was created");if(b>=d.b[A])throw cd;var g=d.b[b++];return a?g:d.h[g]});return g};function hd(a,b){return ba[C][Wa][F](a,b)};
function jd(a){this.Vj=a}f(jd[C],I("Vj"));var kd=new jd("backstore"),ld=new jd("cache"),md=new jd("indexstore"),nd=new jd("engine"),od=new jd("runner"),pd=new jd("observerregistry"),qd=new jd("schema");
function rd(a){if("function"==typeof a.ba)a=a.ba();else if(Bb(a)||Cb(a))a=a[A];else{var b=0,c;for(c in a)b++;a=b}return a}function sd(a){if("function"==typeof a.c)return a.c();if(Cb(a))return a[Va]("");if(Bb(a)){for(var b=[],c=a[A],d=0;d<c;d++)b[w](a[d]);return b}return kc(a)}
function td(a,b,c){if("function"==typeof a[ob])return a[ob](b,c);if(Bb(a)||Cb(a))return Xb(a,b,c);var d;if("function"==typeof a.H)d=a.H();else if("function"!=typeof a.c)if(Bb(a)||Cb(a)){d=[];for(var g=a[A],k=0;k<g;k++)d[w](k)}else d=lc(a);else d=void 0;for(var g=sd(a),k=g[A],l=0;l<k;l++)if(!b[F](c,g[l],d&&d[l],a))return!1;return!0};function Q(a){this.h=new P;a&&this[db](a)}function ud(a){var b=typeof a;return"object"==b&&a||"function"==b?"o"+Eb(a):b.substr(0,1)+a}J=Q[C];J.ba=function(){return this.h.ba()};J.add=function(a){this.h.set(ud(a),a)};J.addAll=function(a){a=sd(a);for(var b=a[A],c=0;c<b;c++)this.add(a[c])};ja(J,function(a){return this.h[m](ud(a))});la(J,function(){this.h[Ma]()});J.Ba=function(){return this.h.Ba()};J.contains=function(a){return this.h.u(ud(a))};J.yh=function(a){return td(a,this[u],this)};J.c=function(){return this.h.c()};
qa(J,function(){return new Q(this)});J.xc=function(a){return this.ba()==rd(a)&&this.ij(a)};J.ij=function(a){var b=rd(a);if(this.ba()>b)return!1;!(a instanceof Q)&&5<b&&(a=new Q(a));return td(this,function(b){var d=a;if("function"==typeof d[u])b=d[u](b);else if("function"==typeof d.Yc)b=d.Yc(b);else if(Bb(d)||Cb(d))b=0<=Sb(d,b);else a:{for(var g in d)if(d[g]==b){b=!0;break a}b=!1}return b})};J.nc=function(){return this.h.nc(!1)};
function vd(a,b){this.va=a;this.Mb=b||{}}function wd(a){var b=new Q;a[n](function(a){b.add(a>>9)});return b.c()}J=vd[C];J.ka=I("va");J.nd=I("Mb");J.ng=function(a){a[n](function(a){this.Mb[a.id()]=a.Za()},this)};J.Qj=function(a){a[n](function(a){var c=this.Mb;a in c&&delete c[a]},this)};J.Za=function(){return{id:this.va,value:JSON.stringify(this.Mb)}};function xd(a){return new vd(a.id,JSON.parse(a[y]))};

function yd(a,b,c){this.O=a;this.Db=b;this.hg=c}J=yd[C];J.get=function(a){return 0==a[A]?this.ge():this.Hi(a)[D](L(function(b){return a.map(function(a){var d=b.get(a>>9);N(d,"Containing page is empty");return this.Db(d.nd()[a])},this)},this))};J.Hi=function(a){var b=new P,c=Kc();a=wd(a).map(function(a){return new O(function(c,k){var l;try{l=this.O.get(a)}catch(p){k(p);return}sa(l,k);ya(l,L(function(a){a=xd(a[kb][Sa]);b.set(a.ka(),a);c()},this))},this)},this);Ic(a)[D](function(){c[lb](b)});return c.ra};
J.ge=function(){return new O(function(a,b){var c=[],d;try{d=this.O.openCursor()}catch(g){b(g);return}sa(d,b);ya(d,L(function(){var b=d[Sa];if(b){var g=xd(b[y]).nd(),p;for(p in g)c[w](this.Db(g[p]));b.continue()}else a(c)},this))},this)};J.Nb=function(a){return new O(function(b,c){var d;try{d=a()}catch(g){c(g);return}ya(d,b);sa(d,c)},this)};
J.put=function(a){if(0==a[A])return Gc();var b=new P;a[n](function(a){var d;d=a.id()>>9;var g=b.get(d,null);null===g&&(g=this.hg(this.O[ib],d));g.ng([a]);b.set(d,g)},this);a=b.c().map(function(a){return this.Nb(L(function(){return this.O.put(a.Za())},this))},this);return Ic(a)};
ja(J,function(a){if(0==a[A])return this.Nb(L(function(){return this.O[Ma]()},this));var b=new P;a[n](function(a){var d=a>>9,g=b.get(d,null);null===g&&(g=this.hg(this.O[ib],d));g.Qj([a]);b.set(d,g)},this);a=b.c().map(function(a){return this.Nb(L(function(){var b;a:{b=a.nd();for(var g in b){b=!1;break a}b=!0}return b?this.O[hb](a.ka()):this.O.put(a.Za())},this))},this);return Ic(a)});function zd(a,b,c){a=a.m(ld);var d=[c<<9,(c+1<<9)-1];b=a.Pa(b,d[0],d[1]);c=new vd(c);c.ng(b);return c}
function Ad(a,b){return new vd(b)};
function Bd(){};
function Cd(a){this.oa=a.m(ld);this.N=a.m(md);this.B=a.m(qd)}za(Cd[C],function(a){a[n](function(a){this.mk(a);this.lk(a)},this)});Cd[C].lk=function(a){var b=a[h]();a.fd().c()[n](function(a){this.oa[m](b,[a.id()])},this);a.ed()[n](function(a){this.oa.set(b,[a])},this);a.ld()[n](function(a){this.oa.set(b,[a[1]])},this)};Cd[C].mk=function(a){var b=this.B[t](a[h]());a.yi()[n](function(a){this.Dg(b,a)},this)};
Cd[C].Dg=function(a,b){a.Fa().map(function(a){return this.N.get(a.j())},this)[Ia]([this.N.get(a.Fb())])[n](function(a){var d=null===b[1]?null:b[1].Gc(a[h]()),g=null===b[0]?null:b[0].Gc(a[h]());null===g&&null!==d?a.add(d,b[1].id()):null===g||null===d?null!==g&&null===d&&a[m](g,b[0].id()):0!=a.vc()[Ra](g,d)&&(a.add(d,b[1].id()),a[m](g,b[0].id()))})};
function R(a,b){wa(this,a);this.message=b};
function Dd(a){this.N=a.m(md)}Dd[C].gi=function(a,b){var c=a.ec().le();return null===c?null:this.fi(c,b)};Dd[C].fi=function(a,b){var c=a.j(),d=b.Gc(c),c=this.N.get(c).get(d);return 0==c[A]?null:c[0]};Dd[C].Xd=function(a,b){var c=a.ec().Fi();b[n](function(a){c[n](function(b){if(null===a.D()[b[h]()])throw new R("ConstraintError","Attempted to insert NULL value to non-nullable field "+b.j());},this)},this)};
function Ed(a){this.ab=new P;this.Ga=new P;this.eb=new P;this.w=a}J=Ed[C];ia(J,I("w"));J.ed=I("ab");J.ld=I("Ga");J.fd=I("eb");J.add=function(a){if(this.eb.u(a.id())){var b=[this.eb.get(a.id()),a];this.Ga.set(a.id(),b);this.eb[m](a.id())}else this.ab.set(a.id(),a)};J.modify=function(a){var b=a[0],c=a[1];N(b.id()==c.id(),"Row ID mismatch between old/new values.");b=b.id();this.ab.u(b)?this.ab.set(b,c):(this.Ga.u(b)&&(a=[this.Ga.get(a[0].id())[0],c]),this.Ga.set(b,a))};
J.delete=function(a){if(this.ab.u(a.id()))this.ab[m](a.id());else if(this.Ga.u(a.id())){var b=this.Ga.get(a.id())[0];this.Ga[m](a.id());this.eb.set(a.id(),b)}else this.eb.set(a.id(),a)};J.yi=function(){var a=[];this.ab.c()[n](function(b){a[w]([null,b])},this);this.Ga.c()[n](function(b){a[w](b)},this);this.eb.c()[n](function(b){a[w]([b,null])},this);return a};f(J,function(){return"["+this.ab.H()[r]()+"], ["+this.Ga.H()[r]()+"], ["+this.eb.H()[r]()+"]"});
J.Li=function(){var a=new Ed(this.w);this.ab.c()[n](function(b){a[hb](b)},this);this.eb.c()[n](function(b){a.add(b)},this);this.Ga.c()[n](function(b){a.modify([b[1],b[0]])},this);return a};J.Ba=function(){return this.ab.Ba()&&this.eb.Ba()&&this.Ga.Ba()};
function Fd(a,b){this.Ma=new P;b[n](function(a){this.Ma.set(a[h](),a)},this);this.oa=a.m(ld);this.N=a.m(md);this.Zc=new Dd(a);this.sd=new Cd(a);this.De=this.Ld=!1;this.zb=new P}J=Fd[C];J.pf=I("zb");J.Ai=function(){var a=[];this.zb.H().map(function(a){return this.Ma.get(a)},this)[n](function(b){b.Ob()&&(b.Fa()[n](function(b){a[w](this.N.get(b.j()))},this),a[w](this.N.get(b[h]()+".#")))},this);return a};J.ca=I("Ma");
J.Bi=function(){var a=[];this.Ma.c()[n](function(b){b.Ob()&&(b.Fa()[n](function(b){a[w](b.j())}),a[w](b[h]()+".#"))});return a};J.ob=function(a,b){this.rc();this.Vc(a);this.Zc.Xd(a,b);for(var c=0;c<b[A];c++)this.ud(a,null,b[c])};
J.ud=function(a,b,c){var d=a[h](),g=this.zb.get(d,null)||new Ed(d);this.zb.set(d,g);var k=[b,c];try{this.sd.Dg(a,k)}catch(l){throw this.De=!0,l;}null===b&&null!==c?(this.oa.set(d,[c]),g.add(c)):null!==b&&null!==c?(this.oa.set(d,[c]),g.modify(k)):null!==b&&null===c&&(this.oa[m](d,[b.id()]),g[hb](b))};za(J,function(a,b){this.rc();this.Vc(a);this.Zc.Xd(a,b);for(var c=0;c<b[A];c++){var d=b[c],g=this.oa.get([d.id()])[0];this.ud(a,g,d)}});
J.te=function(a,b){this.rc();this.Vc(a);this.Zc.Xd(a,b);for(var c=0;c<b[A];c++){var d=b[c],g=null,k=this.Zc.gi(a,d);null!=k&&(g=this.oa.get([k])[0],d.Wg(k));this.ud(a,g,d)}};ja(J,function(a,b){this.rc();this.Vc(a);for(var c=0;c<b[A];c++)this.ud(a,b[c],null)});J.fa=function(){this.rc();this.Ld=!0};J.rc=function(){N(!this.De,"Attemptted to use journal that needs to be rolled back.");N(!this.Ld,"Attemptted to commit a terminated journal.")};
J.xb=function(){N(!this.Ld,"Attempted to rollback a terminated journal.");var a=this.zb.c().map(function(a){return a.Li()},this);this.sd[pb](a);this.Ld=!0;this.De=!1};J.Vc=function(a){if(!this.Ma.u(a[h]()))throw new R("ScopeError",a[h]()+" is not in the journal's scope.");};
var Gd={};K("lf.Order",Gd,void 0);Gd.DESC=0;Gd.ASC=1;
function Hd(a,b,c,d){this.f=a;this.o=b;this.Z=null===this.f?!1:c;this.ga=null===this.o?!1:d}J=Hd[C];f(J,function(){return(this.Z?"(":"[")+(null===this.f?"unbound":this.f)+", "+(null===this.o?"unbound":this.o)+(this.ga?")":"]")});J.uh=function(){if(null===this.f&&null===this.o)return[];var a=null,b=null;null===this.f||(a=new Hd(null,this.f,!1,!this.Z));null===this.o||(b=new Hd(this.o,null,!this.ga,!1));return[a,b][Ba](function(a){return null!==a})};
J.reverse=function(){return new Hd(this.o,this.f,this.ga,this.Z)};J.Wf=function(a){var b=Id(this.f,a.f,!0,this.Z,a.Z);if(0==b)return!0;var c=-1==b?this:a;a=1==b?this:a;return null===c.o||c.o>a.f||c.o==a.f&&!c.ga&&!a.Z};function Jd(){return new Hd(null,null,!1,!1)}J.contains=function(a){var b=null===this.o||a<this.o||a==this.o&&!this.ga;return(null===this.f||a>this.f||a==this.f&&!this.Z)&&b};J.xc=function(a){return this.f==a.f&&this.Z==a.Z&&this.o==a.o&&this.ga==a.ga};
function Id(a,b,c,d,g){function k(a){return c?a:1==a?-1:1}d=d||!1;g=g||!1;return null===a?null===b?(d?!g:g)?d?k(1):k(-1):0:k(-1):null===b?k(1):a<b?-1:a==b?(d?!g:g)?d?k(1):k(-1):0:1}function Kd(a,b){var c=Id(a.f,b.f,!0,a.Z,b.Z);0==c&&(c=Id(a.o,b.o,!1,a.ga,b.ga));return c};
function Ld(a,b){this.entries=a;this.I=new Q(b);this.Ab=null}J=Ld[C];J.fj=function(a){return this.I.xc(a.I)};function Md(a,b){N(a.fj(b),"Intersection/union operations only apply to compatible relations.")}J.V=function(){return this.I.c()};J.ve=function(){return 1<this.I.ba()};J.je=function(){return this[E].map(function(a){return a.ta.D()})};J.Ni=function(){return this[E].map(function(a){return a.ta.id()})};J.Wj=function(a,b){null===this.Ab&&(this.Ab=new P);this.Ab.set(a.j(),b)};
J.dc=function(a){N(null!==this.Ab,"getAggregationResult called before any results have been calculated.");var b=this.Ab.get(a.j(),void 0);N(vb(b),"Could not find result for "+a.j());return b};J.Yi=function(a){return null!==this.Ab&&this.Ab.u(a.j())};var Nd=null;function Od(){null===Nd&&(Nd=new Ld([],[]));return Nd}
function Pd(a){if(0==a[A])return Od();for(var b=a[cb](function(b,c){Md(a[0],c);return b+c[E][A]},0),c=e(b),d=0,b=a.map(function(a){var b=new P;a[E][n](function(a){c[d++]=a;b.set(a.id,a)});return b}),g=new P,k=0;k<c[A];k++)b[ob](function(a){return a.u(c[k].id)})&&g.set(c[k].id,c[k]);return new Ld(g.c(),a[0].I.c())}function Qd(a){if(0==a[A])return Od();var b=new P;a[n](function(c){Md(a[0],c);c[E][n](function(a){b.set(a.id,a)})});return new Ld(b.c(),a[0].I.c())}
function Rd(a,b){var c=1<b[A],d=a.map(function(a){return new Sd(a,c)});return new Ld(d,b)}function Sd(a,b){this.ta=a;this.id=Td++;this.we=b}var Td=0;Sd[C].M=function(a){var b=a.Oa();return null!==b&&this.ta.D()[Wa](b)?this.ta.D()[b]:this.we?this.ta.D()[a.X().Aa()][a[h]()]:this.ta.D()[a[h]()]};Sd[C].Ke=function(a,b){var c=a.Oa();if(null!=c)this.ta.D()[c]=b;else if(this.we){var c=a.X().Aa(),d=this.ta.D()[c];null==d&&(d={},this.ta.D()[c]=d);d[a[h]()]=b}else this.ta.D()[a[h]()]=b};
function Ud(a,b,c,d){function g(a,b){if(a.we){var c=a.ta.D(),d;for(d in c)k[d]=c[d]}else N(!k[Wa](b[0]),"Attempted to join table with itself, without using table alias, or same alias "+b[0]+"is reused for multiple tables."),k[b[0]]=a.ta.D()}var k={};g(a,b);g(c,d);a=new Pc(-1,k);return new Sd(a,!0)};
K("lf.bind",function(a){return new Vd(a)},void 0);function Vd(a){this.wa=a}K("lf.Binder",Vd,void 0);Vd[C].mb=I("wa");
var Wd={};K("lf.Type",Wd,void 0);Wd.ARRAY_BUFFER=0;Wd.BOOLEAN=1;Wd.DATE_TIME=2;Wd.INTEGER=3;Wd.NUMBER=4;Wd.STRING=5;Wd.OBJECT=6;var Xd={0:new ArrayBuffer(0),1:!1,2:ba.freeze(new Date(0)),3:0,4:0,5:"",6:ba.freeze({})};K("lf.type.DEFAULT_VALUES",Xd,void 0);
function Yd(){var a=Zd();this.Rh=new P(1,$d(),2,ae(),4,a,3,a,5,be())}xb(Yd);Yd[C].he=function(a,b){var c=this.Rh.get(a,null);N(null!==c,"Could not find evaluation map for "+a);c=c.get(b,null);N(null!==c,"Could not find evaluator for "+a+", "+b);return c};
function Zd(){return new P("between",function(a,b){return a>=b[0]&&a<=b[1]},"eq",function(a,b){return a==b},"gte",function(a,b){return a>=b},"gt",function(a,b){return a>b},"in",function(a,b){return-1!=b[z](a)},"lte",function(a,b){return a<=b},"lt",function(a,b){return a<b},"neq",function(a,b){return a!=b})}
function be(){return new P("between",function(a,b){return a>=b[0]&&a<=b[1]},"eq",function(a,b){return a==b},"gte",function(a,b){return a>=b},"gt",function(a,b){return a>b},"in",function(a,b){return-1!=b[z](a)},"lte",function(a,b){return a<=b},"lt",function(a,b){return a<b},"match",function(a,b){return(new RegExp(b)).test(a)},"neq",function(a,b){return a!=b})}
function ae(){return new P("between",function(a,b){return a[Na]()>=b[0][Na]()&&a[Na]()<=b[1][Na]()},"eq",function(a,b){return(null===a?-1:a[Na]())==(null===b?-1:b[Na]())},"gte",function(a,b){return a[Na]()>=b[Na]()},"gt",function(a,b){return a[Na]()>b[Na]()},"in",function(a,b){return b[mb](function(b){return b[Na]()==a[Na]()})},"lte",function(a,b){return a[Na]()<=b[Na]()},"lt",function(a,b){return a[Na]()<b[Na]()},"neq",function(a,b){return(null===a?-1:a[Na]())!=(null===b?-1:b[Na]())})}
function $d(){return new P("eq",function(a,b){return a==b},"neq",function(a,b){return a!=b})};function ce(a,b){this.Jf=a;this.Eg=b}ce[C].getKey=I("Jf");ce[C].Ri=I("Eg");qa(ce[C],function(){return new ce(this.Jf,this.Eg)});function de(a,b){ce[F](this,a,b);this.i=this.F=null}M(de,ce);var ee=[];J=de[C];qa(J,function(){return new de(this.getKey(),this.Ri())});J.getParent=I("F");J.Df=function(){return!this.ua()};J.$=function(){return this.i||ee};J.lb=function(a){return this.$()[a]||null};J.ua=function(){return this.$()[A]};J.zi=function(){for(var a=0,b=this;b[Da]();)a++,b=b[Da]();return a};J.Eb=function(){for(var a=this;a[Da]();)a=a[Da]();return a};J.contains=function(a){do a=a[Da]();while(a&&a!=this);return Boolean(a)};
J.lc=function(a,b){if(!1!==a[F](b,this))for(var c=this.$(),d=0;d<c[A];d++)c[d].lc(a,b)};J.lg=sb("F");J.ia=function(a){this.oc(a,this.i?this.i[A]:0)};J.oc=function(a,b){N(!a[Da]());a.lg(this);this.i=this.i||[];N(0<=b&&b<=this.i[A]);bc(this.i,b,0,a)};J.Gd=function(a){var b=this.i&&this.i[a];return b?(b.lg(null),Yb(this.i,a),0==this.i[A]&&(this.i=null),b):null};J.removeChild=function(a){return this.Gd(Sb(this.$(),a))};

function fe(){de[F](this,"","");this.va=ge++}M(fe,de);var ge=0;fe[C].ka=I("va");fe[C].Le=sb("va");
function he(a,b,c){fe[F](this);this.K=a;ta(this,b);this.U=c;this.bd=Yd.ie().he(this.K.da(),this.U);this.Sa=!1;this.Yb=b}M(he,fe);J=he[C];J.Bb=function(){var a=new he(this.K,this[y],this.U);a.Xj(this.Yb);a.Jd(this.Sa);a.Le(this.ka());return a};J.ub=function(a){return null!=a?(a[w](this.K),a):[this.K]};J.Jd=sb("Sa");J.Xj=sb("Yb");
J.df=function(){var a=!1;this[y]instanceof Vd||(a="array"==yb(this[y])?!this[y][mb](function(a){return a instanceof Vd}):!0);if(!a)throw new R("SyntaxError","Value is not bounded");};J.eval=function(a){this.df();if("in"==this.U)return this.Mh(a);var b=a[E][Ba](function(a){return this.bd(a.M(this.K),this[y])!=this.Sa},this);return new Ld(b,a.V())};
ma(J,function(a){function b(b){if(a[A]<=b)throw new R("SyntaxError","Cannot bind to given array: out of range.");}if(this.Yb instanceof Vd){var c=this.Yb.mb();b(c);ta(this,a[c])}else"array"==yb(this.Yb)&&ta(this,this.Yb.map(function(c){return c instanceof Vd?(b(c.mb()),a[c.mb()]):c}))});
J.Mh=function(a){N("in"==this.U,"ValuePredicate#evalAsIn_() called for wrong predicate type.");var b=new Q(this[y]),c=L(function(a){return b[u](a)!=this.Sa},this),d=a[E][Ba](function(a){return c(a.M(this.K))},this);return new Ld(d,a.V())};f(J,function(){return"value_pred("+this.K.j()+" "+this.U+(this.Sa?"(complement)":"")+" "+this[y]+")"});J.Cf=function(){this.df();return null!==this[y]&&("between"==this.U||"eq"==this.U||"gt"==this.U||"gte"==this.U||"lt"==this.U||"lte"==this.U)};
J.ik=function(){N(this.Cf(),"Could not convert predicate to key range.");var a=null;"between"==this.U?a=new Hd(this[y][0],this[y][1],!1,!1):"eq"==this.U?(a=this[y],a=new Hd(a,a,!1,!1)):a="gte"==this.U?new Hd(this[y],null,!1,!1):"gt"==this.U?new Hd(this[y],null,!0,!1):"lte"==this.U?new Hd(null,this[y],!1,!1):new Hd(null,this[y],!1,!0);return this.Sa?a.uh():[a]};
function je(){this.uc=this.qa=null}je[C].od=function(a){null===this.qa&&null!=this.A&&(this.qa=ke(this.A));a=this.qa.get(a,null);N(null!==a);return a};function ke(a){var b=new P;a.lc(function(a){b.set(a.ka(),a)});return b}je[C].Wc=function(a){a.A&&(this.A=a.A.Bb());this.uc=a};ma(je[C],function(){N(null==this.uc);return this});je[C].Ud=function(a){var b=this.A;null!=b&&b.lc(function(b){b instanceof he&&b[q](a)})};
function le(){je[F](this)}M(le,je);function me(a){var b="";a[n](function(c,d){b+=c.K.j()+" ";b+=1==c.pb?"ASC":"DESC";d<a[A]-1&&(b+=", ")});return b}qa(le[C],function(){var a=new le;a.Wc(this);this.g&&(a.g=this.g[x]());this.f&&(a.f=this.f[x]());a.na=this.na;a.ma=this.ma;this.J&&(a.J=this.J[x]());this.la&&(a.la=this.la[x]());this.Jb&&(a.Jb=this.Jb);this.Ub&&(a.Ub=this.Ub);return a});
ma(le[C],function(a){le.$a[q][F](this,a);null!=this.Jb&&(this.na=a[this.Jb.mb()]);null!=this.Ub&&(this.ma=a[this.Ub.mb()]);this.Ud(a);return this});
function ne(a){this.Ea=a}ne[C].Eb=I("Ea");ne[C].lf=tb("plan description");ne[C].ca=function(){function a(c){var d=c.ca();d&&b.add(d);c.$()[n](function(b){a(b)})}var b=new Q;a(this.Ea);return b.c()};function oe(a){var b=new Q;a[n](function(a){b[db](a.ca())});return b};

function pe(a,b){this.global=a;this.tb=a.m(kd);this.Dd=b.map(function(a){return a[Aa]});this.Yf=b.map(function(a){return a.Ee});this.ef=oe(this.Yf);this.xg=this.Ih();this.Qb=Kc()}J=pe[C];J.Ih=function(){return this.Dd[mb](function(a){return!(a instanceof le)})?1:0};
ha(J,function(){var a=new Fd(this[Oa],this.ef.c()),b=[],c=this.Yf[x](),d=L(function(){var g=c[Ea]();if(g){var k=this.Dd[b[A]];return g.Eb()[Fa](a,k)[D](function(a){b[w](a[0]);return d()})}return Gc()},this);return d()[D](L(function(){return this.tb.Cb(this.xg,a).fa()},this))[D](L(function(){this.Ce(b);return b},this),L(function(b){a.xb();throw b;},this))});J.da=I("xg");J.ca=I("ef");J.Bc=I("Qb");J.ka=function(){return Eb(this)};J.Ce=rb();
function qe(a,b){pe[F](this,a,b);this.vb=a.m(pd)}M(qe,pe);ua(qe[C],tb(0));qe[C].Ce=function(a){this.Dd[n](function(b,c){this.vb.Cg(b,a[c])},this)};
function re(a,b){this.l=a;this.vb=a.m(pd);this.La=a.m(od);this.sd=new Cd(a);this.zb=b;var c=a.m(qd),d=this.zb.map(function(a){return c[t](a[h]())});this.Ma=new Q(d);this.Qb=Kc()}J=re[C];ha(J,function(){this.sd[pb](this.zb);this.Nc();return Gc()});J.da=tb(1);J.ca=I("Ma");J.Bc=I("Qb");J.ka=function(){return Eb(this)};ua(J,tb(1));J.Nc=function(){var a=this.vb.oe(this.Ma.c());0!=a[A]&&(a=new qe(this.l,a),this.La.Sb(a))};
function se(a){this.l=a;this.tb=a.m(kd);this.La=a.m(od)}se[C].ek=function(){this.tb.subscribe(this.Be[q](this))};se[C].Be=function(a){a=new re(this.l,a);this.La.Sb(a)};

function te(a,b,c){Xc[F](this,c,b);this.s=a}M(te,Xc);te[C].X=function(a){return this.s.Cc(a)};
te[C].fa=function(){te.$a.fa[F](this);var a=this.Di().pf();if(0==a.ba())this.aa[lb]();else{var b=this.s.Mi()+1;this.s.mg(b);var c={"@rev":{R:b}};a[n](function(a){var g=this.s.uf(a[h]());a.ed()[n](function(a,d){c[d]={R:b,T:g,P:a.D()}});a.ld()[n](function(a,d){c[d]={R:b,T:g,P:a[1].D()}});a.fd()[n](function(a,b){c[b]=null})},this);this.s.Ki()[pb](c,function(c){if(null===c)this.aa[lb]();else this.s.mg(b-1),c=a.c().map(function(a){return this.s.cg(a[h]())},this),Ic(c)[D](this.aa[bb][q](this.aa),this.aa[bb][q](this.aa))}[q](this))}return this.aa.ra};
function ue(){this.kb=new P}J=ue[C];J.ne=function(a){if(0==a[A])return this.kb.c();var b=[];a[n](function(a){a=this.kb.get(a,null);null===a||b[w](a)},this);return b};J.getData=I("kb");J.get=function(a){return Gc(this.ne(a))};J.Fe=function(a){a[n](function(a){this.kb.set(a.id(),a)},this)};J.put=function(a){this.Fe(a);return Gc()};J.dg=function(a){0==a[A]||a[A]==this.kb.ba()?this.kb[Ma]():a[n](function(a){this.kb[m](a)},this)};ja(J,function(a){this.dg(a);return Gc()});
J.Ei=function(){return this.kb.Ba()?0:this.kb.H()[cb](function(a,b){return a>b?a:b},0)};
function ve(a,b){this.B=a;this.Ng=b;this.Mc=new P;this.Rb=-1;this.I=new P;this.Kd=new P;this.Vd=null}J=ve[C];J.Mi=I("Rb");J.mg=sb("Rb");J.pe=function(a){var b=Kc(),c=this.s;a[A]&&(c=this.s[$a](a));c.once("value",function(a){b[lb](a.val())},function(a){b[bb](a)});return b.ra};J.Zj=function(a){var b=Kc();this.s.set(a,function(a){a?b[bb](a):b[lb]()});return b.ra};
J.Qa=function(){this.s=this.Ng[$a](this.B[ib]());return this.pe("@db/version")[D](function(a){if(null===a)return this.Zj(this.zh());if(a==this.B[Ca]())return this.pe("@rev/R")[D](function(a){this.Rb=a;return this.pe("@table")}[q](this))[D](function(a){for(var c in a)this.Kd.set(c,a[c]);a=this.B.ib().map(function(a){return this.cg(a[h]())},this);return Ic(a)}[q](this))[D](function(){this.cj();this.Of();return Gc()}[q](this))}[q](this))};
J.Of=function(){this.s.off();this.s.on("child_removed",this.wj[q](this));this.Wd&&(this.Wd.off(),this.Mc[Ma]());this.Wd=this.s.orderByChild("R").startAt(this.Rb+1);this.Wd.on("value",this.Be[q](this))};J.cj=function(){Qc=this.I.c().map(function(a){return a.Ei()})[cb](function(a,b){return a>b?a:b},0)+1};J.wj=function(a){var b=a.val(),c=this.Mc.get(b.T,null);null===c&&(c=new Q,this.Mc.set(b.T,c));c.add(ga(a.key(),10))};
J.Be=function(a){var b=a[$a]("@rev/R").val();null!=b&&b!=this.Rb&&(this.Rb=b,a=this.li(a),a[n](function(a){var b=this.I.get(a[h]()),g=a.fd().H();g[A]&&b.dg(g);var k=a.ed().c();a.ld()[n](function(a){k[w](a[1])});b.Fe(k)},this),a[A]&&this.Jc(a),this.Of())};
J.li=function(a){var b=new Q,c=new P;this.Kd[n](function(a,g){var k=this.I.get(g),l=new Ed(g);if(this.Mc.u(a)){var p=this.Mc.get(a).c();b[db](p);k.ne(p)[n](function(a){l[hb](a)})}c.set(a,l)}[q](this));a[n](function(a){if("@rev"!=a.key()){var g=ga(a.key(),10);if(!b[u](g)){a=a.val();var k=c.get(a.T),l=this.I.get(k[h]());l.getData().u(g)?k.modify([l.ne([g])[0],new Pc(g,a.P)]):k.add(new Pc(g,a.P))}}}[q](this));return c.c()[Ba](function(a){return!a.Ba()})};
J.cg=function(a){var b=Kc(),c=this.uf(a);this.s.orderByChild("T").equalTo(c).once("value",function(c){var g=new ue,k=[];c[n](function(a){k[w](new Pc(ga(a.key(),10),a.val().P))});g.Fe(k);this.I.set(a,g);b[lb]()}[q](this));return b.ra};J.uf=function(a){return this.Kd.get(a)};J.zh=function(){var a={};a["@db"]={version:this.B[Ca]()};a["@rev"]={R:1};this.Rb=1;a["@table"]={};this.B.ib()[n](function(b,c){var d=b[h]();a["@table"][d]=c;this.I.set(d,new ue);this.Kd.set(d,c)},this);return a};
J.Cb=function(a,b){return new te(this,a,b)};J.Cc=function(a){var b=this.I.get(a,null);if(null!==b)return b;throw new R("DataError","Table "+a+" not found");};J.Ki=I("s");pa(J,rb());va(J,sb("Vd"));J.Jc=function(a){null!=this.Vd&&this.Vd(a)};

function we(a,b,c,d){this.s=b;this.jb=c;this.sb=a;this.bf=d}function xe(a){var b=null;return b=a instanceof ArrayBuffer?Tc(a):a instanceof Date?a[Na]():a}we[C].ad=function(a){var b={};ic(a,L(function(a,d){b[d]=xe(a)},this));return Sc(b)};
function ye(a,b){this.O=a;this.Db=b}J=ye[C];J.get=function(a){if(0==a[A])return this.ge();a=a.map(function(a){return new O(function(c,d){var g;try{g=this.O.get(a)}catch(k){d(k);return}sa(g,d);ya(g,L(function(a){c(this.Db(a[kb][Sa]))},this))},this)},this);return Ic(a)};J.ge=function(){return new O(function(a,b){var c=[],d;try{d=this.O.openCursor()}catch(g){b(g);return}sa(d,b);ya(d,L(function(){var b=d[Sa];b?(c[w](this.Db(b[y])),b.continue()):a(c)},this))},this)};
J.Nb=function(a){return new O(function(b,c){var d;try{d=a()}catch(g){c(g);return}ya(d,b);sa(d,c)},this)};J.put=function(a){if(0==a[A])return Gc();a=a.map(function(a){return this.Nb(L(function(){return this.O.put(a.Za())},this))},this);return Ic(a)};
ja(J,function(a){return new O(function(b,c){var d=this.O.count();ya(d,L(function(d){if(0==a[A]||d[kb][Sa]==a[A])return this.Nb(L(function(){return this.O[Ma]()},this))[D](b,c);d=a.map(function(a){return this.Nb(L(function(){return this.O[hb](a)},this))},this);Ic(d)[D](b,c)},this));sa(d,c)},this)});
function ze(a,b,c,d,g){Xc[F](this,c,d);this.l=a;this.jb=b;this.bf=g;this.jb.oncomplete=L(this.aa[lb],this.aa);this.jb.onabort=L(this.aa[bb],this.aa)}M(ze,Xc);ze[C].X=function(a,b,c){return this.bf?(c=null!=c?c:0,a=this.jb[fb](a),new yd(a,b,0==c?Jb(zd,this.l):Ad)):new ye(this.jb[fb](a),b)};
function Ae(a,b){this.l=a;this.B=b;this.Tc=b.Zf().Kh||!1}J=Ae[C];
J.Qa=function(a){var b=aa.indexedDB||aa.mozIndexedDB||aa.webkitIndexedDB||aa.msIndexedDB;if(null==b)throw new R("NotSupportedError","IndexedDB not supported by platform.");var c=a||function(){return Gc()};return new O(function(a,g){var k;try{k=b.open(this.B[ib](),this.B[Ca]())}catch(l){g(l);return}sa(k,g);k.onupgradeneeded=L(function(a){this.zj(c,a)[D](rb(),g)},this);ya(k,L(function(b){this.s=b[kb][Sa];this.Je()[D](L(function(b){Qc=b+1;a(this.s)},this))},this))},this)};
J.zj=function(a,b){var c=b[kb][Sa],d=b[kb][Za],g=new we(b.oldVersion,c,d,this.Tc);this.Pj(c,d);this.Dh(c,d);return a(g)};J.Pj=function(a){for(var b=[],c=0;c<a[Ja][A];++c){var d=a[Ja][eb](c);-1!=d[z](".")&&b[w](d)}b[n](function(b){try{a.deleteObjectStore(b)}catch(c){}})};J.Dh=function(a,b){this.B.ib()[n](Jb(this.Ah,a,b),this)};J.Ah=function(a,b,c){a[Ja][u](c[h]())||a.createObjectStore(c[h](),{keyPath:"id"});c.Ob()&&(c.Fa()[n](function(c){this.wc(a,b,c.j(),"btree")},this),this.wc(a,b,c.Fb(),"rowid"))};
J.wc=function(a,b,c,d){a[Ja][u](c)||(a.createObjectStore(c,{keyPath:"id"}),a=b[fb](c),(this.Tc?new yd(a,Rc,Ad):new ye(a,Rc)).put([new Vc(new Uc(d))]))};J.Cb=function(a,b){var c=b.ca().c().map(function(a){return a[h]()});b.Bi()[n](function(a){c[w](a)});var d=this.s[Za](c,0==a?"readonly":"readwrite");return new ze(this.l,d,b,a,this.Tc)};
J.Je=function(a){function b(){if(0==c[A])return Gc();var a=c[Ea]();return l(a)[D](b)}var c=this.B.ib().map(function(a){return a[h]()}),d=this.s,g=0,k=L(function(a){return this.Tc?(a=xd(a[y]),lc(a.nd())[cb](function(a,b){return ea.max(a,b)},0)):a.key},this),l=L(function(b){return new O(function(c,l){var ie;try{ie=(a||d[Za]([b]))[fb](b).openCursor(null,"prev")}catch(Ig){l(Ig);return}ya(ie,function(a){(a=a[kb][Sa])&&(g=ea.max(g,k(a)));c(g)});sa(ie,function(){c(g)})},this)},this);return new O(function(a){b()[D](function(){a(g)})})};
pa(J,function(){this.s[Xa]()});J.Cc=function(){throw new R("SyntaxError","IndexedDB tables needs to be acquired from transactions");};va(J,rb());J.Jc=rb();



function Be(a,b,c){Xc[F](this,c,b);this.O=a;0==b&&this.aa[lb]()}M(Be,Xc);Be[C].X=function(a){return this.O.Cc(a)};Be[C].fa=function(){Be.$a.fa[F](this);this.aa[lb]();return this.aa.ra};
function Ce(a){this.B=a;this.I=new P}J=Ce[C];J.Qa=function(){this.B.ib()[n](this.dj,this);return Gc()};J.Cc=function(a){var b=this.I.get(a,null);if(null===b)throw new R("DataError","Table "+a+" does not exist.");return b};J.Cb=function(a,b){return new Be(this,a,b)};J.ff=function(a){if(!this.I.u(a)){var b=new ue;this.I.set(a,b);return b}return null};J.dj=function(a){this.ff(a[h]());a.Ob()&&(a.Fa()[n](function(a){this.wc(a.j(),"btree")},this),this.wc(a.Fb(),"rowid"))};
J.wc=function(a,b){var c=this.ff(a);null===c||c.put([new Vc(new Uc(b))])};pa(J,rb());va(J,rb());J.Jc=rb();
function De(a){Ce[F](this,a);this.yd=null}M(De,Ce);va(De[C],function(a){null===this.yd&&(this.yd=a)});De[C].Jc=function(a){null===this.yd||this.yd(a)};
function Ee(a,b,c){this.jb=a;this.w=b;this.Db=c}Ee[C].get=function(a){var b=this.Db;this.jb.gb("SELECT id, value FROM "+this.w+" "+(0==a[A]?"":"WHERE id IN ("+a[H](",")+")"),[],function(a){for(var d=a[ab][A],g=e(d),k=0;k<d;++k)g[k]=b({id:a[ab][eb](k).id,value:JSON.parse(a[ab][eb](k)[y])});return g});return this.jb.fa()};
Ee[C].put=function(a){if(0==a[A])return Gc();var b="INSERT OR REPLACE INTO "+this.w+"(id, value) VALUES (?, ?)";a[n](function(a){this.jb.gb(b,[a.id(),JSON.stringify(a.D())])},this);return Gc()};ja(Ee[C],function(a){this.jb.gb("DELETE FROM "+this.w+" "+(0==a[A]?"":"WHERE id IN ("+a[H](",")+")"),[]);return Gc()});
function Fe(a,b,c){Xc[F](this,b,c);this.s=a;this.I=new P;this.Zd=[]}M(Fe,Xc);Fe[C].X=function(a,b){var c=this.I.get(a,null);null===c&&(c=new Ee(this,a,b),this.I.set(a,c));return c};Fe[C].gb=function(a,b,c){this.Zd[w]({fk:a,Bj:b,transform:c})};
Fe[C].fa=function(){Fe.$a.fa[F](this);var a,b,c=this.aa[bb][q](this.aa),d=function(a,b){this.aa[bb](b)}[q](this),g=L(function(c,l){a=l;if(this.Zd[A]){var p=this.Zd[Ea]();b=p.transform;c.executeSql(p.fk,p.Bj,g,d)}else p=a,null!=b&&null!=a&&(p=b(a)),this.aa[lb](p)},this);0==this.wg?this.s.readTransaction(g,c):this.s[Za](g,c);return this.aa.ra};
function Ge(a,b,c){this.s=c;this.l=a;this.sb=b}Ge[C].ad=function(a){var b={},c;for(c in a)b[c]=xe(a[c]);return Sc(b)};function He(a){a.gb('SELECT tbl_name FROM sqlite_master WHERE type="table"',[],function(a){for(var c=e(a[ab][A]),d=0;d<c[A];++d)c[d]=a[ab][eb](d).tbl_name;return c})};
function Ie(a,b,c){this.l=a;this.B=b;this.bk=c||4194304}J=Ie[C];J.gd=function(){return new Fd(this.l,[])};J.Qa=function(a){if(null==aa.openDatabase)throw new R("NotSupportedError","WebSql not supported by platform.");var b=a||function(){return Gc()};return new O(L(function(a,d){try{var g=aa.openDatabase(this.B[ib](),"",this.B[ib](),this.bk);if(null!=g)this.s=g,this.qh(b)[D](a,d);else throw new R("NotSupportedError","Unable to open database.");}catch(k){d(k)}},this))};
J.qh=function(a){var b=Kc(),c=new Fe(this.s,this.gd(),1);c.gb("CREATE TABLE IF NOT EXISTS __lf_ver(id INTEGER PRIMARY KEY, v INTEGER)",[]);c.gb("SELECT v FROM __lf_ver WHERE id = 0",[]);c.fa()[D](L(function(c){var g=0;c[ab][A]&&(g=c[ab][eb](0).v);g<this.B[Ca]()?this.Aj(a,g)[D](b[lb][q](b)):g>this.B[Ca]()?b[bb](new R("DataError","Attempt to open a newer database with old code")):b[lb]()},this));return b.ra};
J.Cb=function(a,b){if(null!=this.s)return new Fe(this.s,b,a);throw new R("DataError","Attempt to create transaction from uninitialized DB");};pa(J,rb());J.Cc=function(){throw new R("SyntaxError","WebSQL tables needs to be acquired from transactions");};J.Rf=function(){throw new R("NotSupportedError","WebSQL does not support change notification");};va(J,function(){this.Rf()});J.Jc=function(){this.Rf()};
J.Aj=function(a,b){var c=Kc();this.Ej()[D](L(function(){a(new Ge(this.l,b,this.s))[D](L(function(){return this.Je()},this))[D](c[lb][q](c))},this),c[bb][q](c));return c.ra};
J.Ej=function(){var a=this.B.ib(),b=new Fe(this.s,this.gd(),1),c=new Fe(this.s,this.gd(),1);b.gb("INSERT OR REPLACE INTO __lf_ver VALUES (0, ?)",[this.B[Ca]()]);He(b);return b.fa()[D](function(b){b[Ba](function(a){return-1!=a[z](".")})[n](function(a){c.gb("DROP TABLE "+a,[])});var g=b[Ba](function(a){return-1==a[z](".")});a.map(function(a){return a[h]()})[Ba](function(a){return-1==g[z](a)})[n](function(a){c.gb("CREATE TABLE "+a+"(id INTEGER PRIMARY KEY, value TEXT)",[])});return c.fa()})};
J.Je=function(){var a=0,b=Kc(),c=L(function(b){var c=new Fe(this.s,this.gd(),0);c.gb("SELECT MAX(id) FROM "+b,[]);return c.fa()[D](function(b){b=b[ab][eb](0)[0];a=ea.max(b,a)})},this),d=this.B.ib().map(function(a){return c(a[h]())});Ic(d)[D](function(){b[lb](a)},function(a){b[bb](a)});return b.ra};

function Je(a){this.h=new P;this.sg=new P;this.Nf=a||Number.MAX_VALUE}J=Je[C];J.pd=function(a){var b=this.sg.get(a,null);null===b&&(b=new Q,this.sg.set(a,b));return b};J.set=function(a,b){var c=this.pd(a);b[n](L(function(a){this.h.set(a.id(),a);c.add(a.id())},this));this.h.ba()};J.get=function(a){return a.map(L(function(a){return this.h.get(a,null)},this))};
J.Pa=function(a,b,c){var d=[],g=ea.min(b,c),k=ea.max(b,c);a=this.pd(a);if(a.ba()<k-g)a.c()[n](function(a){a>=g&&a<=k&&(a=this.h.get(a),N(null!=a,"Inconsistent cache"),d[w](a))},this);else for(b=g;b<=k;++b)a[u](b)&&(c=this.h.get(b),N(null!=c,"Inconsistent cache"),d[w](c));return d};ja(J,function(a,b){var c=this.pd(a);b[n](function(a){this.h[m](a);c[m](a)},this)});J.ba=function(a){return null!=a?this.pd(a).ba():this.h.ba()};
function Ke(a,b,c,d){a=b?a.reverse():a;if(null==c&&null==d)return a;c=ea.min(vb(c)?c:a[A],a[A]);if(0==c)return[];d=ea.min(d||0,a[A]);return a[x](d,d+c)};
function Le(a,b,c,d){this.w=a;this.L=b;this.Ne=c;if(d){a=511;a*=a*a;if(d[A]>=a)throw new R("TooManyRowsError","B-Tree implementation supports at most "+a+" rows.");d=Me(this,d);this.sa=d=Ne(d)}else this[Ma]()}var Oe=[];J=Le[C];ia(J,I("w"));f(J,function(){return this.sa[r]()});J.add=function(a,b){this.sa=this.sa.ob(a,b)};J.set=function(a,b){this.sa=this.sa.ob(a,b,!0)};ja(J,function(a,b){this.sa=this.sa[m](a,b)});J.get=function(a){return this.sa.get(a)};
J.$c=function(a){return null!=a?this.Pa([a])[A]:this.Pa()[A]};J.Pa=function(a,b,c,d){var g=this.sa.kd().b[0];if(!vb(g)||0==c)return Oe;var k=(c||0)+(d||0),k=0<k&&!b?k:Number.POSITIVE_INFINITY,l=[];(vb(a)?this.L.pg(a):[this.L.fe()])[n](function(a){for(var b=this.L.Ed(a),b=this.L.ue(a)?g:b[0],b=this.sa.of(b),c=0;null!=b&&l[A]<k;)0!=b.Pa(a,l)?c=0:c++,b=2==c?null:b[Ua]()},this);return Ke(l,b,c,d)};la(J,function(){this.sa=Pe(this)});J.u=function(a){return this.sa.u(a)};
J.min=function(){return this.Ic(L(this.L.min,this.L))};J.max=function(){return this.Ic(L(this.L.max,this.L))};J.Ic=function(a){var b=this.sa.kd(),c=this.sa.tf();if(0==b.b[A]&&0==c.b[A])return[null,null];var d=b.b[0],b=b.S[0],g=c.b[c.b[A]-1],c=c.S[c.b[A]-1];return 1==a(d,g)?[d,this.Ne?[b]:b]:[g,this.Ne?[c]:c]};J.Fc=I("Ne");J.vc=I("L");J.ze=function(a,b){return null!=a?-1==this.L[Ra](a,b):!1};J.Ia=function(a,b){return null!=a?0==this.L[Ra](a,b):!1};
J.Za=function(){for(var a=[],b=this.sa.kd();b;)a[w](new Pc(b.va,[b.b,b.S])),b=b.xa;return a};function Qe(a,b,c,d){a=new Le(b,a,c);d=Re(d,a);a.sa=d;return a}function Se(a,b){this.va=a;this.W=b;this.fb=0;this.xa=this.qb=this.F=null;this.b=[];this.S=[];this.i=[]}function Pe(a){return new Se(Qc++,a)}J=Se[C];J.ea=function(){return 0==this.fb};J.Gf=function(){return null==this.F};oa(J,I("xa"));
function Te(a){function b(a){return null!=a?a.va[r]():"_"}var c=a.va+"["+a.b[H]("|")+"]",d=a.i.map(function(a){return a.va})[H]("|"),g=a.S[H]("/"),k=b(a.qb)+"{",k=a.ea()?k+g:k+d,k=k+"}"+b(a.F);a.xa&&(a=Te(a.xa),c=c+"  "+a[0],k=k+"  "+a[1]);return[c,k]}f(J,function(){var a="",b=Te(this),a=a+(b[0]+"\n"+b[1]+"\n");this.i[A]&&(a+=this.i[0][r]());return a});J.kd=function(){return this.ea()?this:this.i[0].kd()};J.tf=function(){return this.ea()?this:this.i[this.i[A]-1].tf()};
function Ue(a,b){b&&(b.qb=a);a&&(a.xa=b)}function Me(a,b){for(var c=b[A],d=0,g=Pe(a),k=g;0<c;){var l=768<=c?511:257<=c&&511>=c?c:257,p=b[x](d,d+l);g.b=p.map(function(a){return a.key});g.S=p.map(function(a){return a[y]});d+=l;c-=l;0<c&&(l=Pe(g.W),Ue(g,l),g=l)}return k}function Ve(a){var b=a[0],c=Pe(b.W);c.fb=b.fb+1;c.i=a;for(b=0;b<a[A];++b)a[b].F=c,0<b&&c.b[w](a[b].b[0]);return c}
function Ne(a){var b=a,c=[];do c[w](b),b=b.xa;while(b);if(512>=c[A])b=Ve(c);else{var d=c[A],g=0,b=Pe(a.W);for(b.fb=a.fb+2;0<d;){a=768<=d?511:257<=d&&511>=d?d:257;var k=c[x](g,g+a),l=Ve(k);l.F=b;b.i[A]&&(b.b[w](k[0].b[0]),Ue(b.i[b.i[A]-1],l));b.i[w](l);g+=a;d-=a}}return b}J.get=function(a){var b=this.Oc(a);if(this.ea()){var c=Oe;this.W.Ia(this.b[b],a)&&(c=c[Ia](this.S[b]));return c}b=this.W.Ia(this.b[b],a)?b+1:b;return this.i[b].get(a)};
J.u=function(a){var b=this.Oc(a);return this.W.Ia(this.b[b],a)?!0:this.ea()?!1:this.i[b].u(a)};ja(J,function(a,b){this.jf(a,-1,b);if(this.Gf()){var c=this;1==this.i[A]&&(c=this.i[0],c.F=null);return c}return this});function We(a){return a.ea()?a.b[0]:We(a.i[0])}J.cd=function(){this.b=[];for(var a=1;a<this.i[A];++a)this.b[w](We(this.i[a]))};
J.jf=function(a,b,c){var d=this.Oc(a);if(!this.ea()){var g=this.W.Ia(this.b[d],a)?d+1:d;if(this.i[g].jf(a,g,c))this.cd();else return!1}else if(!this.W.Ia(this.b[d],a))return!1;if(this.b[A]>d&&this.W.Ia(this.b[d],a)){if(vb(c)&&!this.W.Fc()&&this.ea()&&(a=this.S[d],c=dc(a,ec,!1,c),0<=c&&Yb(a,c),this.S[d][A]))return!1;this.b[G](d,1);this.ea()&&this.S[G](d,1)}256>this.b[A]&&!this.Gf()&&(this.gk()||this.sj(b));return!0};
J.gk=function(){var a=null,b,c,d;if(this.xa&&256<this.xa.b[A])a=this.xa,c=b=0,d=this.b[A]+1;else if(this.qb&&256<this.qb.b[A])a=this.qb,b=this.qb.b[A]-1,c=this.ea()?b:b+1,d=0;else return!1;this.b[G](d,0,a.b[b]);a.b[G](b,1);b=this.ea()?this.S:this.i;var g=null;this.ea()?g=a.S:(g=a.i,g[c].F=this);b[G](d,0,g[c]);g[G](c,1);a.ea()||(a.cd(),this.cd());return!0};
J.sj=function(a){var b,c,d;this.xa&&511>this.xa.b[A]?(b=this.xa,d=c=0):this.qb&&(b=this.qb,c=b.b[A],d=b.ea()?b.S[A]:b.i[A]);c=[c,0][Ia](this.b);e[C][G][v](b.b,c);c=null;this.ea()?c=this.S:(c=this.i,c[n](function(a){a.F=b}));c=[d,0][Ia](c);e[C][G][v](b.ea()?b.S:b.i,c);Ue(this.qb,this.xa);b.ea()||b.cd();-1!=a&&(this.F.b[G](a,1),this.F.i[G](a,1))};
J.ob=function(a,b,c){var d=this.Oc(a);if(this.ea()){if(this.W.Ia(this.b[d],a)){if(c)return this.S[d]=this.W.Fc()?b:[b],this;if(this.W.Fc())throw new R("ConstraintError","Duplicate key not allowed");if(this.S[d])return fc(this.S[d],b),this;this.S[d]=[b]}this.b[G](d,0,a);this.S[G](d,0,this.W.Fc()?b:[b]);return 512==this.b[A]?this.dk():this}d=this.W.Ia(this.b[d],a)?d+1:d;a=this.i[d].ob(a,b,c);a.ea()||1!=a.b[A]||(this.b[G](d,0,a.b[0]),a.i[1].F=this,a.i[0].F=this,this.i[G](d,1,a.i[1]),this.i[G](d,0,a.i[0]));
return 512==this.b[A]?this.ck():this};J.dk=function(){var a=Pe(this.W),b=Pe(this.W);b.fb=1;b.b=[this.b[256]];b.i=[this,a];b.F=this.F;this.F=b;a.b=this.b[G](256);a.S=this.S[G](256);a.F=b;Ue(a,this.xa);Ue(this,a);return b};J.ck=function(){var a=Pe(this.W),b=Pe(this.W);a.F=this.F;a.fb=this.fb+1;a.b=[this.b[256]];a.i=[this,b];this.b[G](256,1);b.F=a;b.fb=this.fb;b.b=this.b[G](256);b.i=this.i[G](257);b.i[n](function(a){a.F=b});this.F=a;Ue(b,this.xa);Ue(this,b);return a};
J.Oc=function(a){for(var b=0,c=this.b[A];b<c;){var d=b+c>>1;this.W.ze(this.b[d],a)?b=d+1:c=d}return b};J.of=function(a){if(!this.ea()){var b=this.Oc(a);this.W.Ia(this.b[b],a)&&b++;return this.i[b].of(a)}return this};
J.Pa=function(a,b){var c=-1,d=this.b[A]-1,g=this.W.vc(),k=L(function(b){for(;b<this.b[A];++b){var k=g.fc(this.b[b],a);if(-1!=c){if(!k){d=b-1;break}}else k&&(c=b)}},this);g.fc(this.b[0],a)?c=0:k(1);if(-1==c)return 0;g.fc(this.b[d],a)||k(c);return d==this.b[A]-1?this.Ve(b,this.S[x](c)):d>=c?this.Ve(b,this.S[x](c,d+1)):0};J.Ve=function(a,b){var c=this.W.Fc()?b:hc(b);a[w][v](a,c);return c[A]};
function Re(a,b){for(var c=a.map(function(a){var c=new Se(a.id(),b);c.b=a.D()[0];c.S=a.D()[1];return c}),d=0;d<c[A]-1;++d)Ue(c[d],c[d+1]);return 1<c[A]?Ne(c[0]):c[0]};
function Xe(a){if(1==a.g[A])return new Ye(a.g[0].pb);a=a.g.map(function(a){return a.pb});return new Ze(a)}function Ye(a){this.Xc=0==a?$e:af;this.Ae=0==a?function(a){return null!=a?a.reverse():null}:function(a){return a||null};this.Vf=0==a?bf:cf}M(Ye,Bd);function af(a,b){return a>b?1:a<b?-1:0}function $e(a,b){return af(b,a)}function cf(a,b){return Kd(a,b)}function bf(a,b){return Kd(b,a)}J=Ye[C];
J.$d=function(a,b){var c=this.Ae(b),d=[null===c.f,null===c.o];if(!d[0]){var g=this.Xc(a,c.f);d[0]=c.Z?1==g:-1!=g}d[1]||(g=this.Xc(a,c.o),d[1]=c.ga?-1==g:1!=g);return d};J.compare=function(a,b){return this.Xc(a,b)};J.min=function(a,b){return a<b?1:a==b?0:-1};J.max=function(a,b){return a>b?1:a==b?0:-1};J.fc=function(a,b){var c=this.$d(a,b);return c[0]&&c[1]};J.fe=function(){return Jd()};J.Uf=function(a,b){return this.Vf(a,b)};
J.pg=function(a){return a[Ba](function(a){return null!==a})[nb](L(function(a,c){return this.Vf(a,c)},this))};J.ue=function(a){return zb(this.Ae(a).f)};J.Ed=function(a){a=this.Ae(a);return[a.f,a.o]};f(J,function(){return this.Xc==$e?"SimpleComparator_DESC":"SimpleComparator_ASC"});function Ze(a){this.za=a.map(function(a){return new Ye(a)})}M(Ze,Bd);J=Ze[C];J.ee=function(a,b,c){for(var d=0,g=0;g<this.za[A]&&0==d;++g)d=c(this.za[g],a[g],b[g]);return d};
J.compare=function(a,b){return this.ee(a,b,function(a,b,g){return a[Ra](b,g)})};J.min=function(a,b){return this.ee(a,b,function(a,b,g){return a.min(b,g)})};J.max=function(a,b){return this.ee(a,b,function(a,b,g){return a.max(b,g)})};J.$d=function(a,b){for(var c=[!0,!0],d=0;d<this.za[A]&&(c[0]||c[1]);++d){var g=this.za[d].$d(a[d],b[d]);c[0]=c[0]&&g[0];c[1]=c[1]&&g[1]}return c};J.fc=function(a,b){for(var c=!0,d=0;d<this.za[A]&&c;++d)c=this.za[d].fc(a[d],b[d]);return c};J.fe=function(){return this.za.map(function(a){return a.fe()})};
J.pg=function(a){var b=a[Ba](function(a){return a[ob](Ab)});a=e(this.za[A]);for(var c=0;c<a[A];c++)a[c]=b.map(function(a){return a[c]});a[n](function(a,b){a[nb](L(function(a,c){return this.za[b].Uf(a,c)},this))},this);b=e(b[A]);for(c=0;c<b[A];c++)b[c]=a.map(function(a){return a[c]});return b[nb](L(function(a,b){for(var c=0,l=0;l<this.za[A]&&0==c;++l)c=this.za[l].Uf(a[l],b[l]);return c},this))};J.ue=function(a){return this.za[0].ue(a[0])};
J.Ed=function(a){var b=a.map(function(a,b){return this.za[b].Ed(a)[0]},this);a=a.map(function(a,b){return this.za[b].Ed(a)[1]},this);return[b,a]};
function df(a){this.wa=a;this.Ua=new Q}J=df[C];ia(J,function(){return this.wa[h]()});J.add=function(a,b){null===a?this.Ua.add(b):this.wa.add(a,b)};J.set=function(a,b){null===a?(this.Ua[Ma](),this.Ua.add(b)):this.wa.set(a,b)};ja(J,function(a,b){null===a?b?this.Ua[m](b):this.Ua[Ma]():this.wa[m](a,b)});J.get=function(a){return null===a?this.Ua.c():this.wa.get(a)};J.$c=function(a){return this.wa.$c(a)};J.Pa=function(a,b,c,d){b=this.wa.Pa(a,b,c,d);return null!=a?b:b[Ia](this.Ua.c())};
la(J,function(){this.Ua[Ma]();this.wa[Ma]()});J.u=function(a){return null===a?!this.Ua.Ba():this.wa.u(a)};J.min=function(){return this.wa.min()};J.max=function(){return this.wa.max()};J.Za=function(){return[new Pc(-2,this.Ua.c())][Ia](this.wa.Za())};J.vc=function(){return this.wa.vc()};
function ef(a){this.w=a;this.rb=new Q;this.L=new Ye(1)}J=ef[C];ia(J,I("w"));J.add=function(a){if("number"!=typeof a)throw new R("DataError","Row id must be numbers");this.rb.add(a)};J.set=function(a,b){this.add(a,b)};ja(J,function(a){this.rb[m](a)});J.get=function(a){return this.u(a)?[a]:[]};J.min=function(){return this.Ic(L(this.L.min,this.L))};J.max=function(){return this.Ic(L(this.L.max,this.L))};
J.Ic=function(a){if(this.rb.Ba())return[null,null];var b=this.rb.c()[cb](L(function(b,d){return null===b||1==a(d,b)?d:b},this),null);return[b,[b]]};J.$c=function(){return this.rb.ba()};J.Pa=function(a,b,c,d){var g=a||[Jd()];a=this.rb.c()[Ba](function(a){return g[mb](function(b){return this.L.fc(a,b)},this)},this);return Ke(a,b,c,d)};la(J,function(){this.rb[Ma]()});J.u=function(a){return this.rb[u](a)};J.Za=function(){return[new Pc(0,this.rb.c())]};J.vc=I("L");
function ff(a,b){var c=new ef(a);b[0].D()[n](function(a){c.add(a,a)});return c};
function gf(a){this.l=a;this.tb=a.m(kd);this.N=a.m(md);this.oa=a.m(ld)}J=gf[C];J.Qa=function(a){var b=a.ib(),c=L(function(){if(0==b[A])return Gc();var a=b[Ea]();return(a.Ob()?this.ai(a):this.bi(a))[D](c)},this);return c()};J.bi=function(a){var b=new Fd(this.l,[a]);return this.tb.Cb(0,b).X(a[h](),L(a.ac,a)).get([])[D](L(function(b){this.oa.set(a[h](),b);this.Lj(a,b)},this))};J.Lj=function(a,b){var c=this.N.Pi(a[h]());b[n](function(a){c[n](function(b){var c=a.Gc(b[h]());b.add(c,a.id())})})};
J.ai=function(a){var b=new Fd(this.l,[a]),c=this.tb.Cb(0,b),b=c.X(a[h](),a.ac).get([])[D](L(function(b){this.oa.set(a[h](),b)},this)),d=a.Fa().map(function(a){return this.Mj(a,c)},this)[Ia](this.Nj(a,c));return Ic(d[Ia](b))};
J.Mj=function(a,b){var c=b.X(a.j(),Rc,1),d=Xe(a);return c.get([])[D](L(function(b){N("btree"==b[0].D().type);if(1<b[A]){if(a.yf()){var c=Qe[q](void 0,d,a.j(),a.td),l=b[x](1),p=-1;for(b=0;b<l[A];++b)if(-2==l[b].id()){p=b;break}if(-1==p)throw new R("DataError","Data corruption detected");b=l[p].D();l=l[x](0);l[G](p,1);c=c(l);c=new df(c);c.Ua[db](b)}else c=Qe(d,a.j(),a.td,b[x](1));this.N.set(c)}},this))};
J.Nj=function(a,b){return b.X(a.Fb(),Rc,1).get([])[D](L(function(b){N("rowid"==b[0].D().type);1<b[A]&&(b=ff(a.Fb(),b[x](1)),this.N.set(b))},this))};


function hf(){this.O=new P}hf[C].Qa=function(a){a.ib()[n](function(a){var c=a.Fb();if(null===this.get(c)){var d=new ef(c);this.O.set(c,d)}a.Fa()[n](function(a){this.O.set(a.j(),jf(a))},this)},this);return Gc()};function jf(a){var b=Xe(a),b=new Le(a.j(),b,a.td);return a.yf()?new df(b):b}hf[C].get=function(a){return this.O.get(a,null)};hf[C].set=function(a){return this.O.set(a[h](),a)};hf[C].Pi=function(a){var b=[],c=a+".";this.O.H()[n](function(a){0==a[z](c)&&b[w](this.O.get(a))},this);return b};
function kf(a){this.Va=[];vb(a)&&this.add(a)}J=kf[C];f(J,function(){return this.Va.map(function(a){return a[r]()})[H](",")});J.u=function(a){return this.Va[mb](function(b){return b[u](a)})};J.c=I("Va");
J.add=function(a){if(0!=a[A])if(a=this.Va[Ia](a),1==a[A])this.Va=a;else{a[nb](Kd);for(var b=[],c=a[0],d=1;d<a[A];++d)if(c.Wf(a[d])){var g=a[d],k=Jd();if(null!==c.f&&null!==g.f){var l=Id(c.f,g.f,!0);1!=l?(k.f=c.f,k.Z=0!=l?c.Z:c.Z&&g.Z):(k.f=g.f,k.Z=g.Z)}null!==c.o&&null!==g.o&&(l=Id(c.o,g.o,!1),-1!=l?(k.o=c.o,k.ga=0!=l?c.ga:c.ga&&g.ga):(k.o=g.o,k.ga=g.ga));c=k}else b[w](c),c=a[d];b[w](c);this.Va=b}};
J.xc=function(a){return this.Va[A]==a.Va[A]?0==this.Va[A]||this.Va[ob](function(b,c){return b.xc(a.Va[c])}):!1};function mf(a,b){var c=[];a.c().map(function(a){return b.c().map(function(b){var c;if(a.Wf(b)){c=Jd();var l=Id(a.f,b.f,!0),l=0==l?a.Z?a:b:-1!=l?a:b;c.f=l.f;c.Z=l.Z;null===a.o||null===b.o?b=null===a.o?b:a:(l=Id(a.o,b.o,!1),b=0==l?a.ga?a:b:-1==l?a:b);c.o=b.o;c.ga=b.ga}else c=null;return c})})[n](function(a){c=c[Ia](a)});return new kf(c[Ba](function(a){return null!==a}))};
function nf(a,b){var c=[],d=null,g=null;a.lc(function(a){var l=b(a);null==a[Da]()?g=l:d.ia(l);var p=a[Da]();null!==p&&p.ua()==d.ua()&&(p=c[z](d),-1!=p&&c[G](p,1));1<a.ua()&&c[w](l);d=a.Df()?c[c[A]-1]:l});return g}function of(a){return pf(a,function(a){return a.Df()})}function qf(a){var b=a[Da](),c=0;null!==b&&(c=b.$()[z](a),b[jb](a));var d=a.$()[x]();d[n](function(d,k){a[jb](d);null===b||b.oc(d,c+k)});return{parent:b,children:d}}
function rf(a,b){a.$()[x]()[n](function(c){a[jb](c);b.ia(c)});a.ia(b)}function sf(a){N(1==a.ua());var b=a.lb(0);N(1==b.ua());qf(a);rf(b,a);return b}function tf(a,b,c){N(1==a.ua());var d=a.lb(0);N(1<d.ua());var g=d.$()[x]();if(!g[mb](function(a){return b(a)}))return a;qf(a);g[n](function(g,l){if(b(g)){var p=c(a);d.Gd(l);p.ia(g);d.oc(p,l)}});return d}function uf(a,b,c,d){var g=a[Da]();null!==g&&(a=g.$()[z](a),g.Gd(a),g.oc(c,a));b.$()[x]()[n](function(a){b[jb](a);d.ia(a)});return c}
function pf(a,b,c){function d(a){b(a)&&g[w](a);null!=c&&c(a)||a.$()[n](d)}var g=[];d(a);return g}function vf(a,b){var c=b||function(a){return a[r]()+"\n"},d="";a.lc(function(a){for(var b=0;b<a.zi();b++)d+="-";d+=c(a)});return d};

function wf(a){fe[F](this);this.Lb=a;this.Sa=!1}M(wf,fe);J=wf[C];J.Bb=function(){return nf(this,function(a){if(a instanceof wf){var b=new wf(a.Lb);b.Sa=a.Sa;b.Le(a.ka());return b}return a.Bb()}[q](this))};J.ub=function(a){var b=a||[];this.lc(function(a){a!=this&&a.ub(b)}[q](this));return(new Q(b)).c()};J.Jd=function(a){this.Sa!=a&&(this.Sa=a,this.Lb="and"==this.Lb?"or":"and",this.$()[n](function(b){return b.Jd(a)}))};J.eval=function(a){var b=this.$().map(function(b){return b.eval(a)});return this.th(b)};
J.th=function(a){return"and"==this.Lb?Pd(a):Qd(a)};f(J,function(){return"combined_pred_"+this.Lb[r]()});function xf(a,b){return a===b?0!==a||1/a===1/b:a!==a&&b!==b};function yf(){this[Ma]()}var zf=ba[C][Pa],Af=ba[C][Wa];J=yf[C];J.set=function(a,b){this.Rc(a);var c=!this.Ec(a);this.h[a]=b;if("__proto__"==a||!Bf&&!zf[F](this.h,a)){delete this.h[a];var d=Sb(this.yb,a);if(c=0>d)d=this.yb[A];this.yb[d]=a;this.Hd[d]=b}c&&this.Y++};J.get=function(a,b){this.Rc(a);if(this.Ec(a))return this.h[a];var c=Sb(this.yb,a);return 0<=c?this.Hd[c]:b};
ja(J,function(a){this.Rc(a);if(this.Ec(a))return this.Y--,delete this.h[a],!0;a=Sb(this.yb,a);return 0<=a?(this.Y--,Yb(this.yb,a),Yb(this.Hd,a),!0):!1});J.addAll=function(a){Tb(a.H(),function(b){this.set(b,a.get(b))},this)};J.Ba=function(){return!this.Y};J.ba=I("Y");J.u=function(a){this.Rc(a);return this.Ec(a)||0<=Sb(this.yb,a)};J.Yc=function(a){return jc(this.h,function(b,c){return this.Ec(c)&&xf(b,a)},this)||0<=Sb(this.Hd,a)};
J.H=function(){var a;if(Cf)a=$b(ba.keys(this.h));else{a=[];for(var b in this.h)Af[F](this.h,b)&&a[w](b)}ac(a,this.yb);return a};J.c=function(){for(var a=[],b=this.H(),c=0;c<b[A];c++)a[w](this.get(b[c]));return a};J.getEntries=function(){for(var a=[],b=this.H(),c=0;c<b[A];c++){var d=b[c];a[w]([d,this.get(d)])}return a};la(J,function(){this.h=Bf?ba[Qa](null):{};this.yb=[];this.Hd=[];this.Y=0});qa(J,function(){var a=new yf;a[db](this);return a});
J.Ec=function(a){return"__proto__"==a?!1:Bf?a in this.h:Af[F](this.h,a)};J.Rc=function(a){N(Cb(a),"key must be a string.")};var Bf=!!ba[Qa],Cf=!!ba.keys;function Df(){this[Ma]()}J=Df[C];J.Y=0;la(J,function(){this.Y=0;this.h=new yf});qa(J,function(){var a=new Df;a.Hg(this);return a});J.add=function(a,b){var c=this.h.get(a);c||this.h.set(a,c=[]);c[w](b);this.Y++};J.Hg=function(a){Tb(a.getEntries(),function(a){this.add(a[0],a[1])},this)};J.get=function(a){return(a=this.h.get(a))?$b(a):[]};ja(J,function(a,b){var c=this.h.get(a);if(!c)return!1;var d=Zb(c,function(a){return xf(b,a)});d&&(this.Y--,0==c[A]&&this.h[m](a));return d});J.Ba=function(){return!this.Y};
J.ba=I("Y");J.u=function(a){return this.h.u(a)};J.Yc=function(a){return Wb(this.h.c(),function(b){return Wb(b,function(b){return xf(b,a)})})};J.H=function(){return this.h.H()};J.c=function(){return hc(this.h.c())};J.getEntries=function(){for(var a=this.H(),b=[],c=0;c<a[A];c++)for(var d=a[c],g=this.get(d),k=0;k<g[A];k++)b[w]([d,g[k]]);return b};
function Ef(a,b,c){fe[F](this);this.Ja=a;this.Xa=b;this.U=c;this.bd=Yd.ie().he(this.Ja.da(),this.U)}M(Ef,fe);J=Ef[C];J.Bb=function(){var a=new Ef(this.Ja,this.Xa,this.U);a.Le(this.ka());return a};J.ub=function(a){return null!=a?(a[w](this.Ja),a[w](this.Xa),a):[this.Ja,this.Xa]};J.eval=function(a){var b=a[E][Ba](function(a){var b=a.M(this.Ja);a=a.M(this.Xa);return this.bd(b,a)},this);return new Ld(b,a.V())};f(J,function(){return"join_pred("+this.Ja.j()+", "+this.Xa.j()+")"});
J.We=function(a){return-1!=a.V()[z](this.Ja.X().Aa())};J.Pg=function(a){return-1!=a.V()[z](this.Xa.X().Aa())};J.Hh=function(a,b){var c=null,d=null;this.We(a)?(this.Ze(a,b),c=a,d=b):(this.Ze(b,a),c=b,d=a);return[c,d]};J.Ze=function(a,b){N(this.We(a),"Mismatch between join predicate left operand and right relation.");N(this.Pg(b),"Mismatch between join predicate right operand and right relation.")};J.Oh=function(a,b){var c=this.Hh(a,b),d=c[0],c=c[1];return"eq"==this.U?this.Ph(d,c):this.Qh(d,c)};
J.Qh=function(a,b){for(var c=[],d=a.V(),g=b.V(),k=0;k<a[E][A];k++)for(var l=0;l<b[E][A];l++)if(this.bd(a[E][k].M(this.Ja),b[E][l].M(this.Xa))){var p=Ud(a[E][k],d,b[E][l],g);c[w](p)}d=a.V()[Ia](b.V());return new Ld(c,d)};
J.Ph=function(a,b){var c=a,d=b,g=this.Ja,k=this.Xa;a[E][A]>b[E][A]&&(c=b,d=a,g=this.Xa,k=this.Ja);var l=new Df,p=[];c[E][n](function(a){var b=String(a.M(g));l.add(b,a)});var B=c.V(),Ha=d.V();d[E][n](function(a){var b=String(a.M(k));l.u(b)&&l.get(b)[n](function(b){b=Ud(a,Ha,b,B);p[w](b)})});c=a.V()[Ia](b.V());return new Ld(p,c)};
function Ff(a,b,c){return null===b?new he(a,b,c):vb(b.j)?new Ef(a,b,c):new he(a,b,c)};
var Gf={};K("lf.schema.DataStoreType",Gf,void 0);Gf.INDEXED_DB=0;Gf.MEMORY=1;Gf.LOCAL_STORAGE=2;Gf.FIREBASE=3;Gf.WEB_SQL=4;Gf.OBSERVABLE_STORE=5;function Hf(a,b,c,d){this.rg=a;wa(this,b);this.td=c;this.g=d}Hf[C].j=function(){return this.rg+"."+this[ib]};Hf[C].yf=function(){return this.g[mb](function(a){return a.Ya.gc()})};function If(a,b,c,d){this.w=a;this.pa=c;this.G=b;this.Ad=d;this.bb=null}K("lf.schema.Table",If,void 0);ia(If[C],I("w"));If[C].Oa=I("bb");If[C].Aa=function(){return this.bb||this.w};
If[C].qc=function(a){var b=new this.constructor(this.w);b.bb=a;return b};If[C].as=If[C].qc;If[C].createRow=If[C].ad;If[C].deserializeRow=If[C].ac;If[C].Fa=I("pa");If[C].ub=I("G");If[C].getConstraint=If[C].ec;If[C].Ob=I("Ad");If[C].Fb=function(){return this.w+".#"};
function S(a,b){ra(this,a);this.Wb=b;this.bb=null}J=S[C];ia(J,function(){return this.Wb+"("+this[$a][h]()+")"});J.j=function(){return this.Wb+"("+this[$a].j()+")"};J.X=function(){return this[$a].X()};f(J,function(){return this.j()});J.da=function(){return this[$a].da()};J.Oa=I("bb");J.Fa=function(){return[]};J.gc=tb(!1);J.qc=function(a){this.bb=a;return this};S[C].as=S[C].qc;S[C].nf=function(){for(var a=[this],b=this;b instanceof S;)a[w](b[$a]),b=b[$a];return a};
function Jf(a){this.bb=a||null;this.C=new If("#UnknownTable",[],[],!1)}J=Jf[C];ia(J,tb("*"));J.j=function(){return this[h]()};f(J,function(){return this.j()});J.X=I("C");J.da=tb(4);J.Oa=I("bb");J.Fa=function(){return[]};J.gc=tb(!1);
K("lf.fn.avg",function(a){return new S(a,"AVG")},void 0);K("lf.fn.count",function(a){return new S(a||new Jf,"COUNT")},void 0);function Kf(a){return new S(a,"DISTINCT")}K("lf.fn.distinct",Kf,void 0);K("lf.fn.max",function(a){return new S(a,"MAX")},void 0);K("lf.fn.min",function(a){return new S(a,"MIN")},void 0);K("lf.fn.stddev",function(a){return new S(a,"STDDEV")},void 0);K("lf.fn.sum",function(a){return new S(a,"SUM")},void 0);K("lf.fn.geomean",function(a){return new S(a,"GEOMEAN")},void 0);
function T(a,b){de[F](this,"","");this.Yh=b;this.Sf=a}M(T,de);J=T[C];J.ca=tb(null);ha(J,function(a,b){switch(this.Yh){case 1:return this.Th(a,b);case 0:return this.Sh(a,b);default:return this.Vh(a,b)}});f(J,tb("dummy_node"));J.Pc=function(){return this[r]()};J.Xe=function(a){N(-1==this.Sf||a[A]==this.Sf)};J.Vh=function(a,b){return new O(L(function(c){c(this.ja(a,[],b))},this))};J.Th=function(a,b){return this.lb(0)[Fa](a,b)[D](L(function(c){this.Xe(c);return this.ja(a,c,b)},this))};
J.Sh=function(a,b){var c=this.$().map(function(c){return c[Fa](a,b)});return Ic(c)[D](L(function(c){var g=[];c[n](function(a){for(var b=0;b<a[A];++b)g[w](a[b])});this.Xe(g);return this.ja(a,g,b)},this))};
function Lf(a){T[F](this,-1,1);this.Te=a}M(Lf,T);f(Lf[C],function(){return"aggregation("+this.Te.map(function(a){return a.j()})[r]()+")"});Lf[C].ja=function(a,b){b[n](function(a){(new Mf(a,this.Te)).bh()},this);return b};function Mf(a,b){this.Da=a;this.G=b}
Mf[C].bh=function(){this.G[n](function(a){a=a.nf().reverse();for(var b=1;b<a[A];b++){var c=a[b],d=c.nf()[x](-1)[0],g=this.Ci(c),k=null;switch(c.Wb){case "MIN":k=Nf(g,d);break;case "MAX":k=Of(g,d);break;case "DISTINCT":k=Pf(g,d);break;case "COUNT":k=g[E][A];break;case "SUM":k=Qf(g,d);break;case "AVG":0<g[E][A]&&(k=Qf(g,d)/g[E][A]);break;case "GEOMEAN":k=Rf(g,d);break;default:k=Sf(g,d)}this.Da.Wj(c,k)}},this)};Mf[C].Ci=function(a){return a[$a]instanceof S?this.Da.dc(a[$a]):this.Da};
function Nf(a,b){var c=null;a[E][n](function(a){a=a.M(b);if(null===c||a<c)c=a});return c}function Of(a,b){var c=null;a[E][n](function(a){a=a.M(b);if(null===c||a>c)c=a});return c}function Qf(a,b){return a[E][cb](function(a,d){return a+d.M(b)},0)}function Sf(a,b){var c=a[E].map(function(a){return a.M(b)});return bd[v](null,c)}function Rf(a,b){var c=0,d=a[E][cb](function(a,d){var l=d.M(b);return 0!=l?(c++,a+ea.log(l)):a},0);return 0==c?null:ea.pow(ea.E,d/c)}
function Pf(a,b){var c=new P;a[E][n](function(a){var g=a.M(b);c.set(g,a)});return new Ld(c.c(),a.V())};
function U(){de[F](this,"","")}M(U,de);function Tf(a,b){U[F](this);na(this,a);ka(this,b)}M(Tf,U);function Uf(a,b){Tf[F](this,a,b)}M(Uf,Tf);function Vf(a){U[F](this);na(this,a)}M(Vf,U);f(Vf[C],function(){return"delete("+this[t][h]()+")"});function Wf(a,b){U[F](this);na(this,a);this.Oe=b}M(Wf,U);f(Wf[C],function(){var a=[];this.Oe&&(a=this.Oe.map(function(a){return a.K[h]()},this));return"update("+this[t][h]()+", ["+a[H](",")+"])"});function Xf(a){U[F](this);this.Ca=a}M(Xf,U);
f(Xf[C],function(){return"select("+this.Ca[r]()+")"});function Yf(a){U[F](this);na(this,a)}M(Yf,U);f(Yf[C],function(){var a="table_access("+this[t][h]();null===this[t].Oa()||(a+=" as "+this[t].Oa());return a+")"});function Zf(){U[F](this)}M(Zf,U);f(Zf[C],tb("cross_product"));function $f(a,b){U[F](this);this.g=a;this.Hb=b}M($f,U);f($f[C],function(){var a="project("+this.g[r]();if(null!==this.Hb)var b=this.Hb.map(function(a){return a.j()})[H](", "),a=a+(", groupBy("+b+")");return a+")"});
function ag(a){U[F](this);this.J=a}M(ag,U);f(ag[C],function(){return"order_by("+me(this.J)+")"});function bg(a){U[F](this);this.g=a}M(bg,U);f(bg[C],function(){return"aggregation("+this.g[r]()+")"});function cg(a){U[F](this);this.g=a}M(cg,U);f(cg[C],function(){return"group_by("+this.g[r]()+")"});function dg(a){U[F](this);this.na=a}M(dg,U);f(dg[C],function(){return"limit("+this.na+")"});function eg(a){U[F](this);this.ma=a}M(eg,U);f(eg[C],function(){return"skip("+this.ma+")"});
function fg(a){U[F](this);this.Ca=a}M(fg,U);f(fg[C],function(){return"join("+this.Ca[r]()+")"});
function gg(){};
function hg(){}M(hg,gg);hg[C].wb=function(a){this.ha=a;this.Na(this.ha);return this.ha};hg[C].Na=function(a){if(a instanceof Xf){N(1==a.ua(),"SelectNode must have exactly one child.");var b=this.af(a.Ca),b=this.Bh(b);uf(a,a,b[0],b[1]);a==this.ha&&(this.ha=b[0]);a=b[0]}a.$()[n](function(a){this.Na(a)},this)};hg[C].af=function(a){if(0==a.ua()||"and"!=a.Lb)return[a];var b=a.$()[x]().map(function(b){a[jb](b);return this.af(b)},this);return hc(b)};
hg[C].Bh=function(a){var b=null,c=null;a.map(function(a,g){var k=new Xf(a);0==g?b=k:c.ia(k);c=k},this);return[b,c]};
function ig(){}M(ig,gg);ig[C].wb=function(a){this.ha=a;this.Na(this.ha);return this.ha};ig[C].Na=function(a){if(a instanceof Zf)for(;2<a.ua();){for(var b=new Zf,c=0;2>c;c++){var d=a.Gd(0);b.ia(d)}a.oc(b,0)}a.$()[n](function(a){this.Na(a)},this)};
function jg(){T[F](this,2,0)}M(jg,T);f(jg[C],tb("cross_product"));jg[C].ja=function(a,b){for(var c=b[0],d=b[1],g=[],k=c.V(),l=d.V(),p=0;p<c[E][A];p++)for(var B=0;B<d[E][A];B++){var Ha=Ud(c[E][p],k,d[E][B],l);g[w](Ha)}c=c.V()[Ia](d.V());return[new Ld(g,c)]};

function kg(a,b){pe[F](this,a,b);this.La=a.m(od);this.vb=a.m(pd)}M(kg,pe);ua(kg[C],tb(2));kg[C].Ce=function(a){0==this.da()?this.uj(a):this.Nc()};kg[C].uj=function(a){this.Dd[n](function(b,c){b instanceof le&&this.vb.Cg(b,a[c])},this)};kg[C].Nc=function(){var a=this.vb.oe(this.ca().c());0!=a[A]&&(a=new qe(this[Oa],a),this.La.Sb(a))};
function lg(){je[F](this)}M(lg,je);qa(lg[C],function(){var a=new lg;a.Wc(this);a.f=this.f;return a});ma(lg[C],function(a){lg.$a[q][F](this,a);this.Ud(a);return this});
function mg(){je[F](this)}M(mg,je);qa(mg[C],function(){var a=new mg;a.Wc(this);a.Ra=this.Ra;this[La]&&ka(a,this[La]instanceof Vd?this[La]:this[La][x]());a.pc=this.pc;a.Xb=this.Xb;return a});ma(mg[C],function(a){mg.$a[q][F](this,a);this.Xb&&ka(this,this.Xb instanceof Vd?a[this.Xb.mb()]:this.Xb.map(function(b){return b instanceof Vd?a[b.mb()]:b}));return this});
function ng(){je[F](this)}M(ng,je);qa(ng[C],function(){var a=new ng;a.Wc(this);na(a,this[t]);a.set=this.set?this.set[x]():this.set;return a});ma(ng[C],function(a){ng.$a[q][F](this,a);this.set[n](function(b){-1!=b.Sc&&ta(b,a[b.Sc])});this.Ud(a);return this});
function og(a,b){if(null==b)return"NULL";switch(a){case 1:return b?1:0;case 3:case 4:return b;case 0:return"'"+Tc(b)+"'";default:return"'"+b[r]()+"'"}}function pg(a,b){var c=a.pc?"INSERT OR REPLACE":"INSERT",d=a.Ra.ub(),c=c+(" INTO "+a.Ra[h]()+"("),c=c+d.map(function(a){return a[h]()})[H](", "),c=c+") VALUES (";return a[La].map(function(a){var k=d.map(function(c){var d=a.D()[c[h]()];return b?null!=d?"#":"NULL":og(c.da(),d)});return c+k[H](", ")+");"})[H]("\n")}
function qg(a){switch(a){case "between":return"BETWEEN";case "eq":return"=";case "gte":return">=";case "gt":return">";case "in":return"IN";case "lte":return"<=";case "lt":return"<";case "match":return"LIKE";case "neq":return"<>";default:return"UNKNOWN"}}function rg(a,b,c,d){return a instanceof Vd?"?"+a.mb()[r]():d?null!=a?"#":"NULL":"match"==b?"'"+a[r]()+"'":"in"==b?"("+a.map(function(a){return og(c,a)})[H](", ")+")":"between"==b?og(c,a[0])+" AND "+og(c,a[1]):og(c,a)[r]()}
function sg(a,b){return a.$().map(function(a){return"("+tg(a,b)+")"})[H]("and"==a.Lb?" AND ":" OR ")}function tg(a,b){if(a instanceof he)return[a.K.j(),qg(a.U),rg(a[y],a.U,a.K.da(),b)][H](" ");if(a instanceof wf)return sg(a,b);if(a instanceof Ef)return[a.Ja.j(),qg(a.U),a.Xa.j()][H](" ");throw new R("NotSupportedError","toSql does not support predicate type: "+typeof a);}function ug(a,b){var c=tg(a,b);return c?" WHERE "+c:""}
function vg(a,b){var c="UPDATE "+a[t][h]()+" SET ",c=c+a.set.map(function(a){var b=a.K.j()+" = ";return-1!=a.Sc?b+"?"+a.Sc[r]():b+og(a.K.da(),a[y])[r]()})[H](", ");a.A&&(c+=ug(a.A,b));return c+";"}
function wg(a,b){var c="*";a.g[A]&&(c=a.g.map(function(a){return a.Oa()?a.j()+" AS "+a.Oa():a.j()})[H](", "));var d=a.f.map(function(a){return a.Aa()!=a[h]()?a[h]()+" AS "+a.Aa():a[h]()})[H](", "),c="SELECT "+c+" FROM "+d;a.A&&(c+=ug(a.A,b));a.J&&(d=a.J.map(function(a){return a.K.j()+(0==a.pb?" DESC":" ASC")})[H](", "),c+=" ORDER BY "+d);a.la&&(d=a.la.map(function(a){return a.j()})[H](", "),c+=" GROUP BY "+d);a.na&&(c+=" LIMIT "+a.na[r]());a.ma&&(c+=" SKIP "+a.ma[r]());return c+";"}
function xg(a,b){var c=b||!1,d=a.sf();if(d instanceof mg)return pg(d,c);if(d instanceof lg){var g="DELETE FROM "+d.f[h]();d.A&&(g+=ug(d.A,c));return g+";"}if(d instanceof ng)return vg(d,c);if(d instanceof le)return wg(d,c);throw new R("NotSupportedError","toSql not implemented for "+typeof d);};
function V(a,b){this.global=a;this.Jj=a.m(nd);this.La=a.m(od);this.a=b}K("lf.query.BaseBuilder",V,void 0);ha(V[C],function(){try{this.cb()}catch(a){return Hc(a)}return new O(function(a,c){var d=new kg(this[Oa],[this.Dc()]);this.La.Sb(d)[D](function(c){a(c[0].je())},c)},this)});ha(V[C],V[C][Fa]);V[C].lf=function(){var a=L(function(a){return a.Pc(this.a)+"\n"},this);return vf(this.ke().Eb(),a)};V[C].explain=V[C].lf;ma(V[C],function(a){this.a[q](a);return this});ma(V[C],V[C][q]);
V[C].jk=function(a){return xg(this,a)};V[C].toSql=V[C].jk;J=V[C];J.cb=rb();J.sf=function(){return this.a.clone()};J.md=I("a");J.ke=function(){null==this.Xf&&(this.Xf=this.Jj.Ii(this.a));return this.Xf};J.Dc=function(){return{context:this.sf(),Ee:this.ke()}};J.Gi=function(){return{context:this.md(),Ee:this.ke()}};
function yg(a){V[F](this,a,new lg)}M(yg,V);K("lf.query.DeleteBuilder",yg,void 0);yg[C].f=function(a){this.Tg();this.a.f=a;return this};yg[C].from=yg[C].f;yg[C].A=function(a){this.Td();this.a.A=a;return this};yg[C].where=yg[C].A;yg[C].Tg=function(){if(null!=this.a.f)throw new R("SyntaxError","from() has already been called.");};yg[C].Td=function(){if(null!=this.a.A)throw new R("SyntaxError","where() has already been called.");};
yg[C].cb=function(){yg.$a.cb[F](this);if(null==this.a.f)throw new R("SyntaxError","Invalid usage of delete()");};
function zg(a,b){V[F](this,a,new mg);this.a.pc=b||!1}M(zg,V);K("lf.query.InsertBuilder",zg,void 0);zg[C].cb=function(){zg.$a.cb[F](this);var a=this.a;if(null==a.Ra||null==a[La])throw new R("SyntaxError","Invalid usage of insert()");if(a.pc&&null===a.Ra.ec().le())throw new R("SyntaxError","Attempted to insert or replace in a table with no primary key.");};zg[C].Ra=function(a){this.Ug();this.a.Ra=a;return this};zg[C].into=zg[C].Ra;
ka(zg[C],function(a){this.Vg();a instanceof Vd||a[mb](function(a){return a instanceof Vd})?this.a.Xb=a:ka(this.a,a);return this});ka(zg[C],zg[C][La]);zg[C].Ug=function(){if(null!=this.a.Ra)throw new R("SyntaxError","into() has already been called.");};zg[C].Vg=function(){if(null!=this.a[La])throw new R("SyntaxError","values() has already been called.");};
function Ag(a){return Bg("and",e[C][x][F](arguments))}K("lf.op.and",Ag,void 0);K("lf.op.or",function(a){return Bg("or",e[C][x][F](arguments))},void 0);function Bg(a,b){var c=new wf(a);b[n](function(a){c.ia(a)});return c}K("lf.op.not",function(a){a.Jd(!0);return a},void 0);
function W(a,b){V[F](this,a,new le);this.mf=this.Fg=!1;this.a.g=b;this.jh();this.ih()}M(W,V);K("lf.query.SelectBuilder",W,void 0);J=W[C];J.cb=function(){W.$a.cb[F](this);var a=this.a;if(null==a.f)throw new R("SyntaxError","Invalid usage of select()");if(vb(a.Jb)&&!vb(a.na)||vb(a.Ub)&&!vb(a.ma))throw new R("SyntaxError","Binding parameters of limit/skip without providing values");this.ph()};
J.jh=function(){var a=this.a.g[Ba](function(a){return a instanceof S&&"DISTINCT"==a.Wb},this);if(0!=a[A]&&(1!=a[A]||1!=this.a.g[A]))throw new R("SyntaxError","Invalid usage of lf.fn.distinct()");};J.ph=function(){null!=this.a.la?this.kh():this.oh()};
J.kh=function(){var a=this.a.g[Ba](function(a){return!(a instanceof S)}).map(function(a){return a.j()}),b=!1;if(0==this.a.la[A]||0==this.a.g[A])b=!0;else{var c=this.a.la.map(function(a){return a.j()});(b=a[mb](function(a){return-1==c[z](a)}))||(b=this.a.la[mb](function(a){a=a.da();return 6==a||0==a}))}if(b)throw new R("SyntaxError","Invalid projection list or groupBy columns");};
J.oh=function(){var a=this.a.g[mb](function(a){return a instanceof S},this),b=this.a.g[mb](function(a){return!(a instanceof S)},this)||0==this.a.g[A];if(a&&b)throw new R("SyntaxError","Invalid projection list, aggregated and non-aggregated can't be mixed.");};J.ih=function(){this.a.g[n](function(a){if(a instanceof S&&!Cg(a.Wb,a.da()))throw new R("SyntaxError","Invalid aggregation detected for"+a.j());},this)};
J.Sd=function(a,b){if(null!=a)throw new R("SyntaxError",b+"() has already been called.");};J.Ye=function(a,b){if(0>a)throw new R("SyntaxError",b+"() does not accept negative values");};J.f=function(a){if(this.mf)throw new R("SyntaxError","from() has already been called.");this.mf=!0;null==this.a.f&&(this.a.f=[]);this.a.f[w][v](this.a.f,e[C][x][F](arguments));return this};W[C].from=W[C].f;
W[C].A=function(a){if(this.Fg)throw new R("SyntaxError","where() has already been called.");this.Fg=!0;this.$e(a);return this};W[C].where=W[C].A;W[C].$e=function(a){null!=this.a.A&&(a=Ag(a,this.a.A));this.a.A=a};W[C].se=function(a,b){null==this.a.f&&(this.a.f=[]);this.a.f[w](a);this.$e(b);return this};W[C].innerJoin=W[C].se;W[C].kj=function(){throw new R("NotSupportedError","Not implemented yet");};W[C].leftOuterJoin=W[C].kj;
W[C].na=function(a){this.Sd(this.a.na||this.a.Jb,"limit");a instanceof Vd?this.a.Jb=a:(this.Ye(a,"limit"),this.a.na=a);return this};W[C].limit=W[C].na;W[C].ma=function(a){this.Sd(this.a.ma||this.a.Ub,"skip");a instanceof Vd?this.a.Ub=a:(this.Ye(a,"skip"),this.a.ma=a);return this};W[C].skip=W[C].ma;W[C].J=function(a,b){null==this.a.J&&(this.a.J=[]);this.a.J[w]({K:a,pb:null!=b?b:1});return this};W[C].orderBy=W[C].J;
W[C].la=function(a){this.Sd(this.a.la,"groupBy");null==this.a.la&&(this.a.la=[]);this.a.la[w][v](this.a.la,e[C][x][F](arguments));return this};W[C].groupBy=W[C].la;function Cg(a,b){switch(a){case "COUNT":case "DISTINCT":return!0;case "AVG":case "GEOMEAN":case "STDDEV":case "SUM":return 4==b||3==b;case "MAX":case "MIN":return 4==b||3==b||5==b||2==b}return!1}qa(W[C],function(){var a=new W(this[Oa],this.a.g);a.a=this.a.clone();a.a.uc=null;return a});qa(W[C],W[C].clone);
function Dg(a,b){V[F](this,a,new ng);na(this.a,b)}M(Dg,V);K("lf.query.UpdateBuilder",Dg,void 0);Dg[C].set=function(a,b){var c={Sc:b instanceof Vd?b.mb():-1,K:a,value:b};null!=this.a.set?this.a.set[w](c):this.a.set=[c];return this};Dg[C].set=Dg[C].set;Dg[C].A=function(a){this.Td();this.a.A=a;return this};Dg[C].where=Dg[C].A;Dg[C].Td=function(){if(null!=this.a.A)throw new R("SyntaxError","where() has already been called.");};
Dg[C].cb=function(){Dg.$a.cb[F](this);if(null==this.a.set)throw new R("SyntaxError","Invalid usage of update()");if(this.a.set[mb](function(a){return a[y]instanceof Vd}))throw new R("SyntaxError","Update set value not bound");};
function Eg(a){this.a=a;this.Ea=null}Eg[C].cc=function(){null===this.Ea&&(this.Ea=this.dd());return this.Ea};function Fg(a){Eg[F](this,a)}M(Fg,Eg);Fg[C].dd=function(){return this.a.pc?new Uf(this.a.Ra,this.a[La]):new Tf(this.a.Ra,this.a[La])};function Gg(a){Eg[F](this,a)}M(Gg,Eg);Gg[C].dd=function(){var a=new Wf(this.a[t],this.a.set),b=null!=this.a.A?new Xf(this.a.A.Bb()):null,c=new Yf(this.a[t]);null===b?a.ia(c):(b.ia(c),a.ia(b));return a};
function Hg(a,b){this.Ea=a;this.Ie=b}Hg[C].cc=function(){this.Ie[n](function(a){this.Ea=a.wb(this.Ea)},this);return this.Ea};
function Jg(a){Eg[F](this,a)}M(Jg,Eg);Jg[C].dd=function(){var a=new Vf(this.a.f),b=null!=this.a.A?new Xf(this.a.A.Bb()):null,c=new Yf(this.a.f);null===b?a.ia(c):(b.ia(c),a.ia(b));return(new Hg(a,[new hg])).cc()};
function Kg(){}M(Kg,gg);Kg[C].wb=function(a){this.ha=a;this.Na(this.ha);return this.ha};Kg[C].Na=function(a){if(a instanceof Xf&&a.Ca instanceof Ef){N(1==a.ua(),"SelectNode must have exactly one child.");var b=a.lb(0);if(b instanceof Zf){var c=new fg(a.Ca);uf(a,b,c,c);a==this.ha&&(this.ha=c);a=c}}a.$()[n](function(a){this.Na(a)},this)};
function Lg(){this.Qd=new Q}M(Lg,gg);J=Lg[C];J.wb=function(a){this.ha=a;this.Na(this.ha);this.Qd[Ma]();return this.ha};J.Na=function(a){if(this.Bf(a)){var b=a.Ca instanceof he?this.Hj(a):this.Gj(a);this.Qd.add(a);b==a&&(b=a.lb(0));null!==b&&(zb(b[Da]())&&(this.ha=b),this.Bf(b)&&!this.Qd[u](b)&&this.Na(b))}else a.$()[n](function(a){this.Na(a)},this)};
J.Cd=function(a,b){var c=a;if(this.ak(a))c=sf(a),this.Cd(a,b);else if(this.$j(a)){var d=[],c=tf(a,b,function(a){a=new Xf(a.Ca);d[w](a);return a});d[n](function(a){this.Cd(a,b)},this)}return c};J.Hj=function(a){var b=new Q([a.Ca.K.X().Aa()]),c=function(a){return this.kf(a,b)}[q](this);return this.Cd(a,c)};J.Gj=function(a){var b=new Q([a.Ca.Ja.X().Aa(),a.Ca.Xa.X().Aa()]),c=function(a){return this.kf(a,b)}[q](this);return this.Cd(a,c)};
J.kf=function(a,b){var c=new Q;of(a)[n](function(a){c.add(a[t].Aa())},this);a instanceof Yf&&c.add(a[t].Aa());return c.yh(b)};J.Bf=function(a){return a instanceof Xf&&!(a.Ca instanceof wf)};J.$j=function(a){a=a.lb(0);return a instanceof Zf||a instanceof fg};J.ak=function(a){return a.lb(0)instanceof Xf};
function Mg(a){Eg[F](this,a);this.bg=this.Mf=this.og=this.Tf=this.Ue=this.xf=this.kg=this.gf=this.qg=null}M(Mg,Eg);J=Mg[C];J.dd=function(){this.pi();var a=this.vh(),b=[new hg,new ig,new Lg,new Kg];return(new Hg(a,b)).cc()};J.pi=function(){this.wi();this.ki();this.ui();this.ri();this.vi();this.oi();this.mi();this.ji();this.si()};
J.vh=function(){for(var a=[this.Mf,this.og,this.bg,this.Tf,this.Ue,this.xf,this.kg,this.gf],b=null,c=null,d=0;d<a[A];d++){var g=a[d];null!==g&&(null===c?c=g:a[b].ia(g),b=d)}this.qg[n](function(c){a[b].ia(c)});return c};J.wi=function(){this.qg=this.a.f.map(function(a){return new Yf(a)},this)};J.ki=function(){2<=this.a.f[A]&&(this.gf=new Zf)};J.ui=function(){this.kg=null!=this.a.A?new Xf(this.a.A.Bb()):null};J.ri=function(){this.a.J&&(this.Tf=new ag(this.a.J))};
J.oi=function(){null!=this.a.na&&(this.Mf=new dg(this.a.na))};J.vi=function(){null!=this.a.ma&&0<this.a.ma&&(this.og=new eg(this.a.ma))};J.mi=function(){null!=this.a.la&&(this.xf=new cg(this.a.la))};J.ji=function(){var a=this.a.g[Ba](function(a){return a instanceof S});null!=this.a.J&&this.a.J[n](function(b){b.K instanceof S&&a[w](b.K)});0<a[A]&&(this.Ue=new bg(a))};J.si=function(){this.bg=new $f(this.a.g||[],this.a.la||null)};
function Ng(){}Ng[C].create=function(a){var b=null;if(a instanceof mg)b=new Fg(a);else if(a instanceof lg)b=new Jg(a);else if(a instanceof le)b=new Mg(a);else if(a instanceof ng)b=new Gg(a);else throw new R("SyntaxError","Unknown query context");return b.cc()};
function Og(a){T[F](this,1,1);this.C=a}M(Og,T);f(Og[C],function(){return"delete("+this.C[h]()+")"});Og[C].ca=I("C");Og[C].ja=function(a,b){var c=b[0][E].map(function(a){return a.ta});a[m](this.C,c);return[Od()]};
function Pg(a){T[F](this,1,1);this.wf=a}M(Pg,T);f(Pg[C],function(){return"groupBy("+this.wf.map(function(a){return a.j()})[r]()+")"});Pg[C].ja=function(a,b){return this.eh(b[0])};Pg[C].eh=function(a){var b=new Df,c=function(a){return this.wf.map(function(b){return a.M(b)},this)[H](",")}[q](this);a[E][n](function(a){b.add(c(a),a)},this);return b.H().map(function(c){return new Ld(b.get(c),a.V())},this)};
function Qg(a){N(1<a[A],"Should only be called for cross-column indices.");a=a.map(function(a){return a.c()});a=gd[v](null,a);var b=[];fd(a,function(a){b[w](a)});return b}function Rg(a){this.Ib=a}Rg[C].jd=function(){return 1==this.Ib.g[A]?[Jd()]:[this.Ib.g.map(function(){return Jd()})]};function Sg(a,b){this.Ib=a;this.qa=b;this.Yd=this.Kf=null}
Sg[C].fh=function(a){var b=new P;this.qa.H()[n](function(c){var d=this.qa.get(c).map(function(b){return a.od(b)},this),g=new kf([Jd()]);d[n](function(a){a=new kf(a.ik());g=mf(g,a)});b.set(c,g)},this);return b};Sg[C].ci=function(a){for(var b=this.Ib.g[A]-1;0<=b;b--){var c=this.Ib.g[b];if(null!==a.get(c.Ya[h](),null))break;a.set(c.Ya[h](),new kf([Jd()]))}};Sg[C].jd=function(a){if(this.Kf==a)return this.Yd;var b=this.fh(a);this.ci(b);this.Yd=1==this.Ib.g[A]?b.c()[0].c():Qg(this.Oi(b));this.Kf=a;return this.Yd};
Sg[C].Oi=function(a){var b=new P,c=0;this.Ib.g[n](function(a){b.set(a.Ya[h](),c);c++});return a.H()[nb](function(a,c){return b.get(a)-b.get(c)}).map(function(b){return a.get(b)})};
function Tg(a,b){this.tg=b;this.N=a.m(md)}Tg[C].rh=function(a,b){var c=b[Ba](this.ej,this);if(0==c[A])return null;c=this.ni(c);if(0==c[A])return null;if(1==c[A])return c[0];var d=Number.MAX_VALUE;return c[cb](function(b,c){var l=c.dh(a);return l<d?(d=l,c):b},null)};Tg[C].ni=function(a){return this.tg.Fa().map(function(b){b=new Ug(this.N,b);b.xh(a);return b},this)[Ba](function(a){return a.jj()})};Tg[C].ej=function(a){return a instanceof he&&a.Cf()?a.K.X()==this.tg:!1};
function Ug(a,b){this.N=a;this.nb=b;this.zf=new Q;this.zf[db](this.nb.g.map(function(a){return a.Ya[h]()}));this.ye=this.qa=null}J=Ug[C];J.Ji=function(){return null===this.qa?[]:this.qa.c()};J.rf=function(){N(this.qa);null===this.ye&&(this.ye=new Sg(this.nb,this.qa));return this.ye};J.xh=function(a){a[n](function(a){var c=a.ub()[0][h]();this.zf[u](c)&&(null===this.qa&&(this.qa=new Df),this.qa.add(c,a.ka()))},this)};
J.jj=function(){if(null===this.qa)return!1;for(var a=!1,b=!0,c=0;c<this.nb.g[A];c++){var d=this.qa.u(this.nb.g[c].Ya[h]());if(a&&d){b=!1;break}d||(a=!0)}return b};J.dh=function(a){a=this.rf().jd(a);var b=this.N.get(this.nb.j());return a[cb](function(a,d){return a+b.$c(d)},0)};
function Vg(a,b,c,d){T[F](this,0,-1);this.N=a.m(md);this.index=b;this.If=c;this.He=d;this.Nd=this.Md=!1}M(Vg,T);f(Vg[C],function(){return"index_range_scan("+this[Ta].j()+", ?, "+(this.He?"reverse":"natural")+(this.Md?", limit:?":"")+(this.Nd?", skip:?":"")+")"});Vg[C].Pc=function(a){var b=this[r](),c=this.If.jd(a),b=b[Ga]("?",c[r]());this.Md&&(b=b[Ga]("?",a.na[r]()));this.Nd&&(b=b[Ga]("?",a.ma[r]()));return b};
Vg[C].ja=function(a,b,c){a=this.If.jd(c);c=this.N.get(this[Ta].j()).Pa(a,this.He,this.Md?c.na:void 0,this.Nd?c.ma:void 0).map(function(a){return new Pc(a,{})},this);return[Rd(c,[this[Ta].rg])]};
function Wg(a){T[F](this,1,1);this.Bd=a}M(Wg,T);f(Wg[C],tb("select(?)"));Wg[C].Pc=function(a){a=a.od(this.Bd);return this[r]()[Ga]("?",a[r]())};Wg[C].ja=function(a,b,c){return[c.od(this.Bd).eval(b[0])]};
function Xg(a,b){T[F](this,1,1);this.oa=a.m(ld);this.C=b}M(Xg,T);f(Xg[C],function(){return"table_access_by_row_id("+this.C[h]()+")"});Xg[C].ca=I("C");Xg[C].ja=function(a,b){return[Rd(this.oa.get(b[0].Ni()),[this.C.Aa()])]};
function Yg(a,b){T[F](this,0,-1);this.oa=a.m(ld);this.N=a.m(md);na(this,b)}M(Yg,T);f(Yg[C],function(){var a="table_access("+this[t][h]();null===this[t].Oa()||(a+=" as "+this[t].Oa());return a+")"});Yg[C].ca=I("table");Yg[C].ja=function(){var a=this.N.get(this[t].Fb()).Pa();return[Rd(this.oa.get(a),[this[t].Aa()])]};
function Zg(a){this.l=a}M(Zg,gg);Zg[C].wb=function(a,b){this.ha=a;pf(a,function(a){return a instanceof Yg})[n](function(a){var d=this.ii(a);if(0!=d[A]){var g=(new Tg(this.l,a[t])).rh(b,d.map(function(a){return b.od(a.Bd)}));if(null!==g){var k=new P;d[n](function(a){k.set(a.Bd,a)},this);this.ha=this.Sj(g,k,a,b)}}},this);return this.ha};Zg[C].ii=function(a){var b=[];for(a=a[Da]();a;)a instanceof Wg&&b[w](a),a=a[Da]();return b};
Zg[C].Sj=function(a,b,c){a.Ji().map(function(a){return b.get(a)})[n](qf);a=new Vg(this.l,a.nb,a.rf(),!1);var d=new Xg(this.l,c[t]);d.ia(a);uf(c,c,d,a);return a.Eb()};
function $g(a,b){T[F](this,0,-1);this.N=a.m(md);this.C=b}M($g,T);f($g[C],function(){return"insert("+this.C[h]()+")"});$g[C].ca=I("C");$g[C].ja=function(a,b,c){ah(this.C,c[La],this.N);a.ob(this.C,c[La]);return[Rd(c[La],[this.C[h]()])]};function ah(a,b,c){a=a.ec().le();if(null===a?0:a.g[0][Ka]){var d=a.g[0].Ya[h](),g=c.get(a.j()).max()[0]||0;b[n](function(a){if(0==a.D()[d]||null==a.D()[d])g++,a.D()[d]=g})}}function bh(a,b){T[F](this,0,-1);this.N=a.m(md);this.C=b}M(bh,T);
f(bh[C],function(){return"insert_replace("+this.C[h]()+")"});bh[C].ca=I("C");bh[C].ja=function(a,b,c){ah(this.C,c[La],this.N);a.te(this.C,c[La]);return[Rd(c[La],[this.C[h]()])]};
function ch(a){T[F](this,2,0);this.ag=a}M(ch,T);f(ch[C],function(){return"join("+this.ag[r]()+")"});ch[C].ja=function(a,b){return[this.ag.Oh(b[0],b[1])]};
function dh(){T[F](this,1,1)}M(dh,T);f(dh[C],tb("limit(?)"));dh[C].Pc=function(a){return this[r]()[Ga]("?",a.na[r]())};dh[C].ja=function(a,b,c){b[0][E][G](c.na);return b};
function eh(a){T[F](this,-1,1);this.J=a}M(eh,T);J=eh[C];f(J,function(){return"order_by("+me(this.J)+")"});J.ja=function(a,b){if(1==b[A]){var c=this.ei(b[0]);(null===c?b[0]:b[0].dc(c))[E][nb](this.Lh[q](this))}else b[nb](this.Oj[q](this));return b};J.ei=function(a){for(var b=null,c=0;c<this.J[A];c++){var d=Kf(this.J[c].K);if(a.Yi(d)){b=d;break}}return b};
J.L=function(a,b){var c=null,d=null,g=null,k=-1;do k++,g=this.J[k].K,c=this.J[k].pb,d=a(g),g=b(g);while(d==g&&k+1<this.J[A]);d=d<g?-1:d>g?1:0;return 1==c?d:-d};J.Oj=function(a,b){return this.L(function(b){return b instanceof S?a.dc(b):a[E][a[E][A]-1].M(b)},function(a){return a instanceof S?b.dc(a):b[E][b[E][A]-1].M(a)})};J.Lh=function(a,b){return this.L(function(b){return a.M(b)},function(a){return b.M(a)})};
function fh(a,b){this.Da=a;this.G=b}fh[C].vf=function(){return this.G[mb](function(a){return a instanceof S},this)?this.Wi():this.Xi()};
fh[C].Wi=function(){if(1==this.G[A]&&"DISTINCT"==this.G[0].Wb){var a=this.Da.dc(this.G[0])[E].map(function(a){var b=new Sd(new Pc(-1,{}),this.Da.ve());b.Ke(this.G[0],a.M(this.G[0][$a]));return b},this);return new Ld(a,[])}var b=new Sd(new Pc(-1,{}),this.Da.ve());this.G[n](function(a){var d=a instanceof S?this.Da.dc(a):this.Da[E][0].M(a);b.Ke(a,d)},this);return new Ld([b],this.Da.V())};
fh[C].Xi=function(){var a=e(this.Da[E][A]),b=this.Da.ve();this.Da[E][n](function(c,d){a[d]=new Sd(new Pc(c.ta.id(),{}),b);this.G[n](function(b){a[d].Ke(b,c.M(b))},this)},this);return new Ld(a,this.Da.V())};function gh(a,b){var c=a.map(function(a){return(new fh(a,b)).vf()[E][0]});return new Ld(c,a[0].V())};
function hh(a,b){T[F](this,-1,1);this.g=a;this.Hb=b}M(hh,T);J=hh[C];f(J,function(){var a="project("+this.g[r]();if(null!==this.Hb)var b=this.Hb.map(function(a){return a.j()})[H](", "),a=a+(", groupBy("+b+")");return a+")"});J.ja=function(a,b){return 0==b[A]?[Od()]:1==b[A]?[this.Wh(b[0])]:[this.Uh(b)]};J.Zi=function(){return this.g[mb](function(a){return a instanceof S})||null!==this.Hb};J.Uh=function(a){return gh(a,this.g)};J.Wh=function(a){return 0==this.g[A]?a:(new fh(a,this.g)).vf()};
function ih(){T[F](this,1,1)}M(ih,T);f(ih[C],tb("skip(?)"));ih[C].Pc=function(a){return this[r]()[Ga]("?",a.ma[r]())};ih[C].ja=function(a,b,c){return[new Ld(b[0][E][x](c.ma),b[0].V())]};
function jh(){}M(jh,gg);jh[C].wb=function(a){var b=pf(a,function(a){return a instanceof dh||a instanceof ih});if(0==b[A])return a;var c=this.hi(a);if(null===c)return a;b[n](function(a){this.rj(a,c)},this);return c.Eb()};jh[C].rj=function(a,b){a instanceof dh?b.Md=!0:b.Nd=!0;return qf(a).parent};jh[C].hi=function(a){a=pf(a,function(a){return a instanceof Vg},function(a){return a instanceof hh&&a.Zi()||a instanceof eh||1!=a.ua()||a instanceof Wg});return 0<a[A]?a[0]:null};
function kh(a){this.l=a}M(kh,gg);kh[C].wb=function(a){var b=lh(a);if(null===b)return a;a=this.Sg(b);a==b&&(a=this.Rg(b));return a.Eb()};kh[C].Sg=function(a){var b=a,c=mh(a.lb(0));if(null!==c){var d;d=a.J;for(var g=null,k=c[t].Fa(),l=0;l<k[A]&&null===g;l++)g=nh(k[l],d);d=g;if(null===d)return b;b=new Vg(this.l,d.nb,new Rg(d.nb),d.Ff);d=new Xg(this.l,c[t]);d.ia(b);qf(a);b=uf(c,c,d,b)}return b};
kh[C].Rg=function(a){var b=a,c=oh(a.lb(0));if(null!==c){var d=nh(c[Ta],a.J);if(null===d)return b;c.He=d.Ff;b=qf(a).parent}return b};function oh(a){a=pf(a,function(a){return a instanceof Vg},function(a){return 1!=a.ua()});return 0<a[A]?a[0]:null}function mh(a){a=pf(a,function(a){return a instanceof Yg},function(a){return 1!=a.ua()});return 0<a[A]?a[0]:null}function lh(a){a=pf(a,function(a){return a instanceof eh});return 0<a[A]?a[0]:null}
function nh(a,b){if(a.g[A]!=b[A]||!b[ob](function(b,c){return b.K[h]()==a.g[c].Ya[h]()}))return null;var c=ph(b,a);return c[0]||c[1]?{nb:a,Ff:c[1]}:null}function ph(a,b){var c=a[cb](function(a,b){return a<<1|(0==b.pb?0:1)},0),d=b.g[cb](function(a,b){return a<<1|(0==b.pb?0:1)},0),d=c^d,c=0==d,d=d==ea.pow(2,ea.max(a[A],b.g[A]))-1;return[c,d]};
function qh(a,b,c){this.Ea=a;this.Ij=b;this.Ie=c}qh[C].cc=function(){this.Ie[n](function(a){this.Ea=a.wb(this.Ea,this.Ij)},this);return this.Ea};
function rh(a,b){T[F](this,1,1);this.C=a;this.pk=b}M(rh,T);f(rh[C],function(){return"update("+this.C[h]()+")"});rh[C].ca=I("C");rh[C].ja=function(a,b){var c=b[0][E].map(function(a){var b=this.C.ac(a.ta.Za());this.pk[n](function(a){b.D()[a.K[h]()]=a[y]},this);return b},this);a[pb](this.C,c);return[Od()]};
function sh(a){this.l=a}sh[C].create=function(a,b){if(a instanceof Uf||a instanceof Tf)return this.be(a,b);if(a instanceof $f||a instanceof dg||a instanceof eg)return this.be(a,b,[new Zg(this.l),new kh(this.l),new jh]);if(a instanceof Vf||a instanceof Wf)return this.be(a,b,[new Zg(this.l)]);throw new R("NotSupportedError","Unknown query plan node");};sh[C].be=function(a,b,c){a=nf(a,L(this.nj,this));return null!=c?new ne((new qh(a,b,c)).cc()):new ne(a)};
sh[C].nj=function(a){if(a instanceof $f)return new hh(a.g,a.Hb);if(a instanceof cg)return new Pg(a.g);if(a instanceof bg)return new Lf(a.g);if(a instanceof ag)return new eh(a.J);if(a instanceof eg)return new ih;if(a instanceof dg)return new dh;if(a instanceof Xf)return new Wg(a.Ca.ka());if(a instanceof Zf)return new jg;if(a instanceof fg)return new ch(a.Ca);if(a instanceof Yf)return new Yg(this.l,a[t]);if(a instanceof Vf)return new Og(a[t]);if(a instanceof Wf)return new rh(a[t],a.Oe);if(a instanceof
Uf)return new bh(this.l,a[t]);if(a instanceof Tf)return new $g(this.l,a[t]);throw new R("NotSupportedError","Unknown node type");};

function th(a){this.lj=new Ng;this.Cj=new sh(a)}th[C].Ii=function(a){var b=this.lj[Qa](a);return this.Cj[Qa](b,a)};
function uh(){this.Pf=new P}J=uh[C];J.hd=function(a){var b=this.Pf.get(a[h](),null);null===b&&(b=new vh,this.Pf.set(a[h](),b));return b};J.Ti=function(a,b,c){b[n](function(b){this.hd(b).Si(a,c)},this)};J.hh=function(a,b,c){return b[ob](function(b){return this.hd(b).gh(a,c)},this)};J.eg=function(a,b,c){var d=this.hh(a,b,c);d&&this.Ti(a,b,c);return d};J.Fd=function(a,b){b[n](function(b){this.hd(b).Fd(a)},this)};J.sh=function(a){a[n](function(a){this.hd(a).Wa=null},this)};
function vh(){this.Tb=this.Ka=this.Wa=this.yc=null}vh[C].Fd=function(a){this.yc==a&&(this.yc=null);this.Wa==a&&(this.Wa=null);null===this.Ka||this.Ka[m](a);null===this.Tb||this.Tb[m](a)};vh[C].gh=function(a,b){var c=null===this.Ka||this.Ka.Ba();return 0==b?(null===this.Tb||this.Tb.Ba())&&c&&null===this.yc&&null!==this.Wa&&this.Wa==a:3==b?null===this.yc&&null===this.Wa&&null!==this.Ka&&this.Ka[u](a):1==b?null===this.Wa:c&&(null===this.Wa||this.Wa==a)};
vh[C].Si=function(a,b){0==b?(this.Wa=null,this.yc=a):3==b?(null===this.Tb&&(this.Tb=new Q),this.Tb.add(a),null===this.Ka&&(this.Ka=new Q),this.Ka[m](a)):1==b?(null===this.Ka&&(this.Ka=new Q),this.Ka.add(a)):2==b&&(this.Wa=a)};
function wh(){this.Pb=new xh;this.Hc=new uh}J=wh[C];J.Sb=function(a){(2>a[gb]()||2>a[gb]())&&this.Hc.sh(a.ca().c());this.Pb.ob(a);this.ae();return a.Bc().ra};J.ae=function(){for(var a=this.Pb.c(),b=0;b<a[A];b++){var c=a[b],d=!1;if(d=0==c.da()?this.fg(c,1,3):this.fg(c,2,0))this.Pb[m](c),this.Xh(c)}};J.fg=function(a,b,c){var d=!1,g=a.ca().c();this.Hc.eg(a.ka(),g,b)&&(d=this.Hc.eg(a.ka(),g,c));return d};J.Xh=function(a){a[Fa]()[D](L(this.yj,this,a),L(this.xj,this,a))};
J.yj=function(a,b){this.Hc.Fd(a.ka(),a.ca().c());a.Bc()[lb](b);this.ae()};J.xj=function(a,b){this.Hc.Fd(a.ka(),a.ca().c());a.Bc()[bb](b);this.ae()};function xh(){this.Pb=[]}xh[C].ob=function(a){fc(this.Pb,a,function(a,c){var d=a[gb]()-c[gb]();return 0==d?a.ka()-c.ka():d})};xh[C].c=function(){return this.Pb[x]()};ja(xh[C],function(a){var b=this.Pb;a=Sb(b,a);var c;(c=0<=a)&&Yb(b,a);return c});
function yh(a,b){this.Nh=Yd.ie();this.Lc=a;this.xd=b;this.G=this.Gh()}yh[C].Gh=function(){if(0<this.Lc.g[A])return this.Lc.g;var a=[],b=this.Lc.f[x]();null!=this.Lc.se&&b[w](this.Lc.se);b[n](function(b){b.ub()[n](function(b){a[w](b)})});return a};yh[C].L=function(a,b){return this.G[ob](function(c){return this.Nh.he(c.da(),"eq")(a.M(c),b.M(c))},this)};
yh[C].Qg=function(a,b){for(var c=null===a?[]:a[E],d=Yc(c,b[E],L(this.L,this),function(a){return c[a]}),g=[],k=0,l=0;l<c[A];l++){var p=c[l];d[k]==p?k++:(p=this.xd[G](k,1),p=zh(l,p,0,this.xd),g[w](p))}d=Yc(c,b[E],L(this.L,this),function(a,c){return b[E][c]});for(l=k=0;l<b[E][A];l++)p=b[E][l],d[k]==p?k++:(this.xd[G](l,0,p.ta.D()),p=zh(l,[],1,this.xd),g[w](p));return g};function zh(a,b,c,d){return{qk:c,index:a,object:d,uk:b,type:"splice"}};
function Ah(){this.bc=new P}J=Ah[C];J.me=function(a){return Eb(a)[r]()};J.Pd=function(a,b){var c=this.me(a.md()),d=this.bc.get(c,null);null===d&&(d=new Bh(a),this.bc.set(c,d));d.Pd(b)};J.Ge=function(a,b){var c=this.me(a.md()),d=this.bc.get(c,null);N(null!=d,"Attempted to unobserve a query that was not observed.");var g=d.Ge(b);N(g,"removeObserver: Inconsistent state detected.");d.aj()||this.bc[m](c)};
J.oe=function(a){var b=new Q;a[n](function(a){b.add(a[h]())});var c=[];this.bc.c()[n](function(a){a=a.Dc();a[Aa].f[mb](function(a){return b[u](a[h]())})&&c[w](a)});return c};J.Cg=function(a,b){var c=this.me(null!=a.uc?a.uc:a),c=this.bc.get(c,null);return null!==c?(c.nk(b),!0):!1};function Bh(a){this.ah=a;this.Kc=new Q;this.vj=[];this.Lf=null;this.Jh=new yh(a.md(),this.vj)}J=Bh[C];J.Pd=function(a){this.Kc[u](a)?Ob("Attempted to register observer twice."):this.Kc.add(a)};J.Ge=function(a){return this.Kc[m](a)};
J.Dc=function(){return this.ah.Gi()};J.aj=function(){return 0<this.Kc.ba()};J.nk=function(a){var b=this.Jh.Qg(this.Lf,a);this.Lf=a;0<b[A]&&this.Kc.c()[n](function(a){a(b)})};
function Ch(a,b){var c=a.m(qd),d=b||{},g=d.vk||0,k=new Je;a.hb(ld,k);var k=null,l=!1;switch(g){case 1:k=new Ce(c);break;case 5:k=new De(c);break;case 4:k=new Ie(a,c,d.wk);break;case 3:k=new ve(c,d.sk);l=!0;break;default:k=new Ae(a,c)}a.hb(kd,k);var p=new hf;a.hb(md,p);return k.Qa(d.tk)[D](function(){a.hb(nd,new th(a));var b=new wh;a.hb(od,b);b=new Ah;a.hb(pd,b);return p.Qa(c)})[D](function(){l&&(new se(a)).ek();return(new gf(a)).Qa(c)})};

function Dh(a,b){this.l=a;this.tb=a.m(kd);this.La=a.m(od);this.vb=a.m(pd);this.Ma=new Q(b);this.Ta=new Fd(this.l,this.Ma.c());this.Qb=Kc();this.zc=Kc();this.Pe=Kc()}J=Dh[C];ha(J,function(){this.Pe[lb]();return this.zc.ra});J.da=tb(1);J.ca=I("Ma");J.Bc=I("Qb");J.ka=function(){return Eb(this)};ua(J,tb(2));J.Gg=function(){this.La.Sb(this);return this.Pe.ra};
J.Yg=function(a){a=a.Dc();return a.Ee.Eb()[Fa](this.Ta,a[Aa])[D](function(a){return a[0].je()},L(function(a){this.Ta.xb();var c=new Cc(a[ib]);this.zc[bb](c);throw a;},this))};J.fa=function(){this.tb.Cb(this.da(),this.Ta).fa()[D](L(function(){this.Nc();this.zc[lb]()},this),L(function(a){this.Ta.xb();this.zc[bb](a)},this));return this.Qb.ra};J.xb=function(){this.Ta.xb();this.zc[lb]();return this.Qb.ra};J.Nc=function(){var a=this.vb.oe(this.Ma.c());0!=a[A]&&(a=new qe(this.l,a),this.La.Sb(a))};
function Eh(a){this.l=a;this.La=a.m(od);this.Qc=null;this.ya=0}K("lf.proc.Transaction",Eh,void 0);var Fh=new P(0,new Q([1,4]),1,new Q([2]),2,new Q([3,5,6]),3,new Q([2,7]),4,new Q([7]),5,new Q([7]),6,new Q([7]));Eh[C].Ha=function(a){var b=Fh.get(this.ya,null);if(null===b||!b[u](a))throw new R("TransactionError","Invalid transaction state transition, from "+this.ya+" to "+a+".");this.ya=a};
ha(Eh[C],function(a){this.Ha(4);var b=[];try{a[n](function(a){a.cb();b[w](a.Dc())},this)}catch(c){return this.Ha(7),Hc(c)}a=new kg(this.l,b);return this.La.Sb(a)[D](L(function(a){this.Ha(7);return a.map(function(a){return a.je()})},this),L(function(a){this.Ha(7);throw a;},this))});ha(Eh[C],Eh[C][Fa]);Eh[C].Zg=function(a){this.Ha(1);this.Qc=new Dh(this.l,a);return this.Qc.Gg()[D](L(function(){this.Ha(2)},this))};Eh[C].begin=Eh[C].Zg;
Eh[C].Xg=function(a){this.Ha(3);return this.Qc.Yg(a)[D](L(function(a){this.Ha(2);return a},this),L(function(a){this.Ha(7);throw a;},this))};Eh[C].attach=Eh[C].Xg;Eh[C].fa=function(){this.Ha(5);return this.Qc.fa()[D](L(function(){this.Ha(7)},this))};Eh[C].commit=Eh[C].fa;Eh[C].xb=function(){this.Ha(6);return this.Qc.xb()[D](L(function(){this.Ha(7)},this))};Eh[C].rollback=Eh[C].xb;
function X(a){this.l=a;this.B=a.m(qd);this.re=!1}K("lf.proc.Database",X,void 0);X[C].Qa=function(a){this.l.hb(qd,this.B);return Ch(this.l,a)[D](L(function(){this.re=!0;return this},this))};X[C].init=X[C].Qa;X[C].Gb=I("B");X[C].getSchema=X[C].Gb;X[C].$b=function(){if(!this.re)throw new R("UninitializedError","Database is not initialized");};X[C].select=function(a){this.$b();return new W(this.l,1!=arguments[A]||null!=arguments[0]?e[C][x][F](arguments):[])};X[C].select=X[C].select;
X[C].ob=function(){this.$b();return new zg(this.l)};X[C].insert=X[C].ob;X[C].te=function(){this.$b();return new zg(this.l,!0)};X[C].insertOrReplace=X[C].te;za(X[C],function(a){this.$b();return new Dg(this.l,a)});za(X[C],X[C][pb]);X[C].delete=function(){this.$b();return new yg(this.l)};X[C]["delete"]=X[C][hb];X[C].observe=function(a,b){this.l.m(pd).Pd(a,b)};X[C].observe=X[C].observe;X[C].unobserve=function(a,b){this.l.m(pd).Ge(a,b)};X[C].unobserve=X[C].unobserve;X[C].Eh=function(){this.$b();return new Eh(this.l)};
X[C].createTransaction=X[C].Eh;pa(X[C],function(){try{this.l.m(kd)[Xa]()}catch(a){}this.l[Ma]();this.re=!1});pa(X[C],X[C][Xa]);
function Y(a,b,c,d,g,k){this.C=a;this.w=b;this.Hf=c;this.Ef=d;this.yg=g;this.bb=k||null}K("lf.schema.BaseColumn",Y,void 0);J=Y[C];ia(J,I("w"));J.j=function(){return this.C.Aa()+"."+this.w};f(J,function(){return this.j()});J.X=I("C");J.da=I("yg");J.Oa=I("bb");J.Fa=function(){null==this.pa&&(this.pa=[],this.X().Fa()[n](function(a){-1!=a.g.map(function(a){return a.Ya[h]()})[z](this.w)&&this.pa[w](a)},this));return this.pa};J.gc=I("Ef");J.td=I("Hf");J.Ia=function(a){return Ff(this,a,"eq")};Y[C].eq=Y[C].Ia;
Y[C].Qf=function(a){return Ff(this,a,"neq")};Y[C].neq=Y[C].Qf;Y[C].ze=function(a){return Ff(this,a,"lt")};Y[C].lt=Y[C].ze;Y[C].mj=function(a){return Ff(this,a,"lte")};Y[C].lte=Y[C].mj;Y[C].Ui=function(a){return Ff(this,a,"gt")};Y[C].gt=Y[C].Ui;Y[C].Vi=function(a){return Ff(this,a,"gte")};Y[C].gte=Y[C].Vi;Y[C].match=function(a){return Ff(this,a,"match")};Y[C].match=Y[C].match;Y[C].$g=function(a,b){return Ff(this,[a,b],"between")};Y[C].between=Y[C].$g;Y[C].bj=function(a){return Ff(this,a,"in")};
Y[C]["in"]=Y[C].bj;Y[C].hj=function(){return this.Ia(null)};Y[C].isNull=Y[C].hj;Y[C].gj=function(){return this.Qf(null)};Y[C].isNotNull=Y[C].gj;Y[C].qc=function(a){return new Y(this.C,this.w,this.Hf,this.Ef,this.yg,a)};Y[C].as=Y[C].qc;
function Gh(){this.Id=new P}var Hh;la(Gh[C],function(){this.Id[Ma]()});la(Gh[C],Gh[C][Ma]);Gh[C].hb=function(a,b){this.Id.set(a[r](),b);return b};Gh[C].registerService=Gh[C].hb;Gh[C].m=function(a){var b=this.Id.get(a[r](),null);if(null==b)throw new R("NotFoundError",a[r]());return b};Gh[C].getService=Gh[C].m;Gh[C].xe=function(a){return this.Id.u(a[r]())};Gh[C].isRegistered=Gh[C].xe;
function Ih(a,b){this.Fj=a;this.tj=b}Ih[C].le=I("Fj");Ih[C].Fi=I("tj");
function Z(a){this.w=a;this.G=new P;this.Bg=new Q;this.mc=new Q;this.wd=new Q;var b=this.w;this.ic="pk"+(b[0].toUpperCase()+b.substring(1));this.pa=new P;this.Ad=!1;this.sc(a)}K("lf.schema.TableBuilder",Z,void 0);var Jh=new Q([0,6]);Z[C].sc=function(a){if(!/^[A-Za-z_][A-Za-z0-9_]*$/.test(a))throw new R("SyntaxError",a+" violates naming rule");if(this.G.u(a)||this.pa.u(a)||this.mc[u](a))throw new R("SyntaxError",this.w+"."+a+" is already defined");};
Z[C].nh=function(a){var b=!1;a[n](function(a){var d=this.G.get(a[ib]);b=b||a[Ka];if(a[Ka]&&3!=d)throw new R("SyntaxError","Can not use autoIncrement with a non-integer primary key.");},this);if(b&&1<a[A])throw new R("SyntaxError","Can not use autoIncrement with a cross-column primary key.");};Z[C].Ig=function(a,b){this.sc(a);this.G.set(a,b);Jh[u](b)&&this.Se([a]);return this};Z[C].addColumn=Z[C].Ig;
Z[C].Lg=function(a,b){this.sc(this.ic);var c=this.vd(a,!0,void 0,b);this.nh(c);c[n](function(a){this.Bg.add(a[ib])},this);this.mc.add(this.ic);this.pa.set(this.ic,c);return this};Z[C].addPrimaryKey=Z[C].Lg;Z[C].Jg=function(){return this};Z[C].addForeignKey=Z[C].Jg;Z[C].Mg=function(a,b){this.sc(a);var c=this.vd(b,!0);this.pa.set(a,c);this.mc.add(a);return this};Z[C].addUnique=Z[C].Mg;Z[C].Se=function(a){a=this.vd(a,!1);this.mh(a);a[n](function(a){this.wd.add(a[ib])},this);return this};
Z[C].addNullable=Z[C].Se;Z[C].mh=function(a){this.pa.H()[n](function(b){var c=new Q;this.pa.get(b)[n](function(a){c.add(a[ib])});var d=a[Ba](function(a){return c[u](a[ib])});if(1<c.ba()&&0<d[A])throw new R("SyntaxError","Cross-column index "+b+" refers to nullable columns: "+d[H](","));},this)};Z[C].Kg=function(a,b,c,d){this.sc(a);b=this.vd(b,!0,d);this.lh(a,b);c&&this.mc.add(a);this.pa.set(a,b);return this};Z[C].addIndex=Z[C].Kg;
Z[C].lh=function(a,b){if(1<b[A]){var c=b[Ba](function(a){return this.wd[u](a[ib])},this);if(0<c[A])throw new R("SyntaxError","Cross-column index "+a+" refers to nullable columns: "+c[H](","));}};Z[C].Ob=sb("Ad");Z[C].persistentIndex=Z[C].Ob;Z[C].Gb=function(){return new (this.xi())};Z[C].getSchema=Z[C].Gb;
Z[C].vd=function(a,b,c,d){var g=a;"string"==typeof a[0]&&(g=a.map(function(a){return{name:a,order:c||1,autoIncrement:d||!1}}));g[n](function(a){if(!this.G.u(a[ib]))throw new R("SyntaxError",this.w+" does not have column: "+a[ib]);if(b){var c=this.G.get(a[ib]);if(0==c||6==c)throw new R("SyntaxError",this.w+" index on non-indexable column: "+a[ib]);}},this);return g};
Z[C].xi=function(){function a(){function a(c){return b.pa.get(c).map(function(a){return{Ya:this[a[ib]],pb:a.pb,autoIncrement:a[Ka]}},this)}var d=b.G.H().map(function(a){this[a]=new Y(this,a,b.Bg[u](a),b.wd[u](a),b.G.get(a));return this[a]},this),g=b.pa.H().map(function(d){return new Hf(b.w,d,b.mc[u](d),a[F](this,d))},this);If[F](this,b.w,d,g,b.Ad);var k=b.pa.u(b.ic)?new Hf(b.w,b.ic,!0,a[F](this,b.ic)):null,l=d[Ba](function(a){return!b.wd[u](a[h]())}),p=b.mc.c().map(function(d){return new Hf(b.w,d,
!0,a[F](this,d))},this);this.wh=new Ih(k,l,[],p);this.ig=b.ti(d,g)}var b=this;M(a,If);a[C].ad=function(a){return new this.ig(Qc++,a)};a[C].createRow=a[C].ad;a[C].ac=function(a){var b={};this.ub()[n](function(g){var k=g[h]();g=g.da();var l=a[y][k];if(0==g)if(null===l)g=l;else if(g=l,""==g)g=null;else{0!=g[A]%2&&(g="0"+g);for(var l=new ArrayBuffer(g[A]/2),p=new Uint8Array(l),B=0,Ha=0;B<g[A];B+=2)p[Ha++]=ga(g.substr(B,2),16);g=l}else g=2==g?null===l?l:new Date(l):l;b[k]=g},this);return new this.ig(a.id,
b)};a[C].deserializeRow=a[C].ac;a[C].ec=I("wh");a[C].getConstraint=a[C].ec;return a};
Z[C].ti=function(a,b){function c(c,d){this.G=a;this.pa=b;Pc[F](this,c,d)}M(c,Pc);c[C].hf=function(){var a={};this.G[n](function(b){a[b[h]()]=b.gc()?null:Xd[b.da()]});return a};c[C].vg=function(){var a={};this.G[n](function(b){var c=b[h]();b=b.da();var d=this.D()[c];a[c]=0==b?null===d?d:Tc(d):2==b?null===d?d:d[Na]():d},this);return a};var d=L(function(a){var b=this.G.get(a[h]());return 2==b?function(b){b=b[a[h]()];return a.gc()&&null===b?null:b[Na]()}:1==b?function(b){return a.gc()?(b=b[a[h]()],null===
b?null:b?1:0):b[a[h]()]?1:0}:function(b){return b[a[h]()]}},this),g=L(function(a){var b=a.map(function(a){return d(a.Ya)});return function(a){return b.map(function(b){return b(a)})}},this),k={};b[n](function(a){var b=a.j();a=1==a.g[A]?d(a.g[0].Ya):g(a.g);k[b]=a});c[C].Gc=function(a){return-1!=a[z]("#")?this.id():k[Wa](a)?k[a](this.D()):null};return c};
function Kh(a,b){this.B=new Lh(a,b);this.kc=new P;this.Ac=!1}K("lf.schema.Builder",Kh,void 0);Kh[C].di=function(){this.Ac||(this.kc.H()[n](function(a){a=this.kc.get(a);this.B.Yj(a.Gb())},this),this.kc[Ma](),this.Ac=!0)};Kh[C].Gb=function(){this.Ac||this.di();return this.B};Kh[C].getSchema=Kh[C].Gb;Kh[C].qf=function(){var a=new jd("ns_"+this.B[ib]()),b;Hh||(Hh=new Gh);b=Hh;var c=null;b.xe(a)?c=b.m(a):(c=new Gh,b.hb(a,c));return c};Kh[C].getGlobal=Kh[C].qf;
Kh[C].connect=function(a){var b=this.qf();b.xe(qd)||b.hb(qd,this.Gb());return(new X(b)).Qa(a)};Kh[C].connect=Kh[C].connect;Kh[C].Ch=function(a){if(this.kc.u(a)||this.Ac)throw new R("SyntaxError","Table is already created or schema is already finalized.");this.kc.set(a,new Z(a));return this.kc.get(a)};Kh[C].createTable=Kh[C].Ch;Kh[C].Me=function(a){if(this.Ac)throw new R("SyntaxError","Schema is already finalized.");this.B.Me(a);return this};Kh[C].setPragma=Kh[C].Me;
function Lh(a,b){this.w=a;this.sb=b;this.I=new P;this.$f={Kh:!1}}K("lf.schema.DatabaseSchema",Lh,void 0);wa(Lh[C],I("w"));wa(Lh[C],Lh[C][ib]);Lh[C].version=I("sb");Lh[C].version=Lh[C][Ca];Lh[C].ib=function(){return this.I.c()};Lh[C].tables=Lh[C].ib;na(Lh[C],function(a){if(!this.I.u(a))throw new R("NotFoundError",a+" is not found in database");return this.I.get(a)});na(Lh[C],Lh[C][t]);Lh[C].Yj=function(a){this.I.set(a[h](),a)};Lh[C].Zf=I("$f");Lh[C].pragma=Lh[C].Zf;Lh[C].Me=sb("$f");
K("lf.schema.create",function(a,b){return new Kh(a,b)},void 0);

}.bind(window))()
