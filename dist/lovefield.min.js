/*
  Copyright 2014 The Lovefield Project Authors. All Rights Reserved.

  Licensed under the Apache License, Version 2.0 (the "License");
  you may not use this file except in compliance with the License.
  You may obtain a copy of the License at

  http://www.apache.org/licenses/LICENSE-2.0

  Unless required by applicable law or agreed to in writing, software
  distributed under the License is distributed on an "AS IS" BASIS,
  WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
  See the License for the specific language governing permissions and
  limitations under the License.
*/
(function(){'use strict';var aa=window,ba=Object,ca=Function,da=document,ea=Math,e=Array,fa=Error,ga=parseInt;function ha(a,b){return a.exec=b}function ia(a,b){return a.getName=b}function ja(a,b){return a.remove=b}function ka(a,b){return a.values=b}function la(a,b){return a.clear=b}function ma(a,b){return a.bind=b}function f(a,b){return a.toString=b}function na(a,b){return a.table=b}function oa(a,b){return a.next=b}function pa(a,b){return a.close=b}function qa(a,b){return a.clone=b}
function ra(a,b){return a.child=b}function sa(a,b){return a.onerror=b}function ta(a,b){return a.value=b}function ua(a,b){return a.getPriority=b}function va(a,b){return a.delete=b}function wa(a,b){return a.subscribe=b}function xa(a,b){return a.name=b}function ya(a,b){return a.length=b}function za(a,b){return a.onsuccess=b}function Aa(a,b){return a.update=b}
var Ba="context",Ca="filter",Da="version",Ea="getParent",Fa="shift",Ha="exec",Ia="replace",Ja="concat",Ka="objectStoreNames",h="getName",m="remove",La="autoIncrement",n="forEach",Ma="values",Na="clear",q="bind",Oa="getTime",r="toString",Pa="global",Qa="propertyIsEnumerable",Ra="create",t="table",Sa="compare",Ta="result",Ua="index",Va="next",Wa="split",Xa="hasOwnProperty",Ya="close",Za="clone",$a="setImmediate",ab="transaction",bb="child",cb="rows",u="contains",v="apply",w="push",db="reject",eb="stringify",
fb="reduce",gb="addAll",x="slice",y="value",hb="item",ib="objectStore",z="indexOf",jb="getPriority",kb="delete",lb="name",A="length",B="prototype",D="then",E="entries",mb="removeChild",nb="target",F="call",ob="resolve",pb="some",qb="sort",rb="every",sb="update",G="splice",H="join",tb="unshift";function ub(){return function(){}}function vb(a){return function(b){this[a]=b}}function I(a){return function(){return this[a]}}function wb(a){return function(){return a}}var J,xb=this;
function yb(a){return void 0!==a}function K(a,b,c){a=a[Wa](".");c=c||xb;a[0]in c||!c.execScript||c.execScript("var "+a[0]);for(var d;a[A]&&(d=a[Fa]());)!a[A]&&yb(b)?c[d]=b:c=c[d]?c[d]:c[d]={}}function zb(){}function Ab(a){a.ce=function(){return a.sf?a.sf:a.sf=new a}}
function Bb(a){var b=typeof a;if("object"==b)if(a){if(a instanceof e)return"array";if(a instanceof ba)return b;var c=ba[B][r][F](a);if("[object Window]"==c)return"object";if("[object Array]"==c||"number"==typeof a[A]&&"undefined"!=typeof a[G]&&"undefined"!=typeof a[Qa]&&!a[Qa]("splice"))return"array";if("[object Function]"==c||"undefined"!=typeof a[F]&&"undefined"!=typeof a[Qa]&&!a[Qa]("call"))return"function"}else return"null";else if("function"==b&&"undefined"==typeof a[F])return"object";return b}
function Cb(a){return null===a}function Db(a){return null!=a}function Eb(a){var b=Bb(a);return"array"==b||"object"==b&&"number"==typeof a[A]}function Fb(a){return"string"==typeof a}function Gb(a){return"function"==Bb(a)}function Hb(a){return a[Ib]||(a[Ib]=++Jb)}var Ib="closure_uid_"+(1E9*ea.random()>>>0),Jb=0;function Kb(a,b,c){return a[F][v](a[q],arguments)}
function Lb(a,b,c){if(!a)throw fa();if(2<arguments[A]){var d=e[B][x][F](arguments,2);return function(){var c=e[B][x][F](arguments);e[B][tb][v](c,d);return a[v](b,c)}}return function(){return a[v](b,arguments)}}function L(a,b,c){L=ca[B][q]&&-1!=ca[B][q][r]()[z]("native code")?Kb:Lb;return L[v](null,arguments)}function Mb(a,b){var c=e[B][x][F](arguments,1);return function(){var b=c[x]();b[w][v](b,arguments);return a[v](this,b)}}
function M(a,b){function c(){}c.prototype=b[B];a.Xa=b[B];a.prototype=new c;a[B].constructor=a;a.nk=function(a,c,k){for(var l=e(arguments[A]-2),p=2;p<arguments[A];p++)l[p-2]=arguments[p];return b[B][c][v](a,l)}}ma(ca[B],ca[B][q]||function(a,b){if(1<arguments[A]){var c=e[B][x][F](arguments,1);c[tb](this,a);return L[v](null,c)}return L(this,a)});function Nb(a){if(fa.captureStackTrace)fa.captureStackTrace(this,Nb);else{var b=fa().stack;b&&(this.stack=b)}a&&(this.message=String(a))}M(Nb,fa);xa(Nb[B],"CustomError");function Ob(a,b){for(var c=a[Wa]("%s"),d="",g=e[B][x][F](arguments,1);g[A]&&1<c[A];)d+=c[Fa]()+g[Fa]();return d+c[H]("%s")};function Pb(a,b){b[tb](a);Nb[F](this,Ob[v](null,b));b[Fa]()}M(Pb,Nb);xa(Pb[B],"AssertionError");function Qb(a,b,c,d){var g="Assertion failed";if(c)var g=g+(": "+c),k=d;else a&&(g+=": "+a,k=b);throw new Pb(""+g,k||[]);}function N(a,b,c){a||Qb("",null,b,e[B][x][F](arguments,2));return a}function Rb(a,b){throw new Pb("Failure"+(a?": "+a:""),e[B][x][F](arguments,1));}function Sb(a,b,c){Gb(a)||Qb("Expected function but got %s: %s.",[Bb(a),a],b,e[B][x][F](arguments,2));return a};function Tb(a,b,c){this.Ff=c;this.wh=a;this.Rj=b;this.td=0;this.ld=null}Tb[B].get=function(){var a;0<this.td?(this.td--,a=this.ld,this.ld=a[Va],oa(a,null)):a=this.wh();return a};Tb[B].put=function(a){this.Rj(a);this.td<this.Ff&&(this.td++,oa(a,this.ld),this.ld=a)};var Ub=e[B],Vb=Ub[z]?function(a,b,c){N(null!=a[A]);return Ub[z][F](a,b,c)}:function(a,b,c){c=null==c?0:0>c?ea.max(0,a[A]+c):c;if(Fb(a))return Fb(b)&&1==b[A]?a[z](b,c):-1;for(;c<a[A];c++)if(c in a&&a[c]===b)return c;return-1},Wb=Ub[n]?function(a,b,c){N(null!=a[A]);Ub[n][F](a,b,c)}:function(a,b,c){for(var d=a[A],g=Fb(a)?a[Wa](""):a,k=0;k<d;k++)k in g&&b[F](c,g[k],k,a)},Xb=Ub.map?function(a,b,c){N(null!=a[A]);return Ub.map[F](a,b,c)}:function(a,b,c){for(var d=a[A],g=e(d),k=Fb(a)?a[Wa](""):a,l=0;l<d;l++)l in
k&&(g[l]=b[F](c,k[l],l,a));return g},Yb=Ub[fb]?function(a,b,c,d){N(null!=a[A]);d&&(b=L(b,d));return Ub[fb][F](a,b,c)}:function(a,b,c,d){var g=c;Wb(a,function(c,l){g=b[F](d,g,c,l,a)});return g},Zb=Ub[pb]?function(a,b,c){N(null!=a[A]);return Ub[pb][F](a,b,c)}:function(a,b,c){for(var d=a[A],g=Fb(a)?a[Wa](""):a,k=0;k<d;k++)if(k in g&&b[F](c,g[k],k,a))return!0;return!1},$b=Ub[rb]?function(a,b,c){N(null!=a[A]);return Ub[rb][F](a,b,c)}:function(a,b,c){for(var d=a[A],g=Fb(a)?a[Wa](""):a,k=0;k<d;k++)if(k in
g&&!b[F](c,g[k],k,a))return!1;return!0};function ac(a,b){N(null!=a[A]);return 1==Ub[G][F](a,b,1)[A]}function bc(a,b,c){a:{for(var d=a[A],g=Fb(a)?a[Wa](""):a,k=0;k<d;k++)if(k in g&&b[F](c,g[k],k,a)){b=k;break a}b=-1}return 0<=b?(ac(a,b),!0):!1}function cc(a){var b=a[A];if(0<b){for(var c=e(b),d=0;d<b;d++)c[d]=a[d];return c}return[]}function dc(a,b){for(var c=1;c<arguments[A];c++){var d=arguments[c];if(Eb(d)){var g=a[A]||0,k=d[A]||0;ya(a,g+k);for(var l=0;l<k;l++)a[g+l]=d[l]}else a[w](d)}}
function ec(a,b,c,d){N(null!=a[A]);return Ub[G][v](a,fc(arguments,1))}function fc(a,b,c){N(null!=a[A]);return 2>=arguments[A]?Ub[x][F](a,b):Ub[x][F](a,b,c)}function gc(a,b,c,d,g){for(var k=0,l=a[A],p;k<l;){var C=k+l>>1,Ga;Ga=c?b[F](g,a[C],C,a):b(d,a[C]);0<Ga?k=C+1:(l=C,p=!Ga)}return p?k:~k}function hc(a,b){return a>b?1:a<b?-1:0}function ic(a,b,c){c=gc(a,c||hc,!1,b);return 0>c?(ec(a,-(c+1),0,b),!0):!1}function jc(a,b){for(var c=[],d=0;d<b;d++)c[d]=a;return c}
function kc(a){for(var b=[],c=0;c<arguments[A];c++){var d=arguments[c];if("array"==Bb(d))for(var g=0;g<d[A];g+=8192)for(var k=fc(d,g,g+8192),k=kc[v](null,k),l=0;l<k[A];l++)b[w](k[l]);else b[w](d)}return b};function lc(a,b,c){for(var d in a)b[F](c,a[d],d,a)}function mc(a,b,c){for(var d in a)if(b[F](c,a[d],d,a))return!0;return!1}function nc(a){var b=[],c=0,d;for(d in a)b[c++]=a[d];return b}function oc(a){var b=[],c=0,d;for(d in a)b[c++]=d;return b};var pc;a:{var qc=xb.navigator;if(qc){var rc=qc.userAgent;if(rc){pc=rc;break a}}pc=""};function sc(a){xb.setTimeout(function(){throw a;},0)}var tc;
function uc(){var a=xb.MessageChannel;"undefined"===typeof a&&"undefined"!==typeof aa&&aa.postMessage&&aa.addEventListener&&-1==pc[z]("Presto")&&(a=function(){var a=da.createElement("IFRAME");a.style.display="none";a.src="";da.documentElement.appendChild(a);var b=a.contentWindow,a=b.document;a.open();a.write("");a[Ya]();var c="callImmediate"+ea.random(),d="file:"==b.location.protocol?"*":b.location.protocol+"//"+b.location.host,a=L(function(a){if(("*"==d||a.origin==d)&&a.data==c)this.port1.onmessage()},
this);b.addEventListener("message",a,!1);this.port1={};this.port2={postMessage:function(){b.postMessage(c,d)}}});if("undefined"!==typeof a&&-1==pc[z]("Edge")&&-1==pc[z]("Trident")&&-1==pc[z]("MSIE")){var b=new a,c={},d=c;b.port1.onmessage=function(){if(yb(c[Va])){c=c[Va];var a=c.We;c.We=null;a()}};return function(a){oa(d,{We:a});d=d[Va];b.port2.postMessage(0)}}return"undefined"!==typeof da&&"onreadystatechange"in da.createElement("SCRIPT")?function(a){var b=da.createElement("SCRIPT");b.onreadystatechange=
function(){b.onreadystatechange=null;b.parentNode[mb](b);b=null;a();a=null};da.documentElement.appendChild(b)}:function(a){xb.setTimeout(a,0)}};function vc(){this.Hd=this.Sb=null}var xc=new Tb(function(){return new wc},function(a){a.reset()},100);vc[B].add=function(a,b){var c=this.Ki();c.set(a,b);this.Hd?oa(this.Hd,c):(N(!this.Sb),this.Sb=c);this.Hd=c};ja(vc[B],function(){var a=null;this.Sb&&(a=this.Sb,this.Sb=this.Sb[Va],this.Sb||(this.Hd=null),oa(a,null));return a});vc[B].Sj=function(a){xc.put(a)};vc[B].Ki=function(){return xc.get()};function wc(){this.scope=this.Wd=null;oa(this,null)}
wc[B].set=function(a,b){this.Wd=a;this.scope=b;oa(this,null)};wc[B].reset=function(){this.scope=this.Wd=null;oa(this,null)};function yc(a,b){zc||Ac();Bc||(zc(),Bc=!0);Cc.add(a,b)}var zc;function Ac(){if(xb.Promise&&xb.Promise[ob]){var a=xb.Promise[ob]();zc=function(){a[D](Dc)}}else zc=function(){var a=Dc;if(!Gb(xb[$a])||xb.Window&&xb.Window[B]&&xb.Window[B][$a]==xb[$a])tc||(tc=uc()),tc(a);else xb[$a](a)}}var Bc=!1,Cc=new vc;[][w](function(){Bc=!1;Cc=new vc});function Dc(){for(var a=null;a=Cc[m]();){try{a.Wd[F](a.scope)}catch(b){sc(b)}Cc.Sj(a)}Bc=!1};function O(a,b){this.va=0;this.Yf=void 0;this.Rc=this.Wb=this.F=null;this.kd=this.Vd=!1;if(a==Ec)this.gc(2,b);else try{var c=this;a[F](b,function(a){c.gc(2,a)},function(a){if(!(a instanceof Fc))try{if(a instanceof fa)throw a;throw fa("Promise rejected.");}catch(b){}c.gc(3,a)})}catch(d){this.gc(3,d)}}function Gc(){ra(this,null);this.context=this.ec=this.Ib=null;oa(this,null);this.Kd=!1}Gc[B].reset=function(){ra(this,null);this.context=this.ec=this.Ib=null;this.Kd=!1};
var Hc=new Tb(function(){return new Gc},function(a){a.reset()},100);function Ic(a,b,c){var d=Hc.get();d.Ib=a;d.ec=b;d.context=c;return d}function Ec(){}function Jc(a){return a instanceof O?a:new O(Ec,a)}function Kc(a){return new O(function(b,c){c(a)})}function Lc(a){return new O(function(b,c){var d=a[A],g=[];if(d)for(var k=function(a,c){d--;g[a]=c;0==d&&b(g)},l=function(a){c(a)},p=0,C;C=a[p];p++)Mc(C,Mb(k,p),l);else b(g)})}
function Nc(){var a,b,c=new O(function(c,g){a=c;b=g});return new Oc(c,a,b)}O[B].then=function(a,b,c){null!=a&&Sb(a,"opt_onFulfilled should be a function.");null!=b&&Sb(b,"opt_onRejected should be a function. Did you pass opt_context as the second argument instead of the third?");return this.Ke(Gb(a)?a:null,Gb(b)?b:null,c)};O[B].then=O[B][D];O[B].$goog_Thenable=!0;J=O[B];
J.ek=function(a,b,c){null!=a&&Sb(a,"opt_onFulfilled should be a function.");null!=b&&Sb(b,"opt_onRejected should be a function. Did you pass opt_context as the second argument instead of the third?");this.Je(Ic(a||zb,b||null,c))};function Mc(a,b,c,d){a instanceof O?a.ek(b,c,d):a[D](b,c,d)}J.lg=function(a,b){return this.Ke(null,a,b)};J.Je=function(a){this.Vi()||2!=this.va&&3!=this.va||this.ag();this.Gj(a)};
J.Ke=function(a,b,c){var d=Ic(null,null,null);ra(d,new O(function(g,k){d.Ib=a?function(b){try{var d=a[F](c,b);g(d)}catch(C){k(C)}}:g;d.ec=b?function(a){try{var d=b[F](c,a);!yb(d)&&a instanceof Fc?k(a):g(d)}catch(C){k(C)}}:k}));d[bb].F=this;this.Je(d);return d[bb]};J.qg=function(a){N(1==this.va);this.va=0;this.gc(2,a)};J.rg=function(a){N(1==this.va);this.va=0;this.gc(3,a)};
J.gc=function(a,b){if(0==this.va){if(this==b)a=3,b=new TypeError("Promise cannot resolve to itself");else{var c;if(b)try{c=!!b.$goog_Thenable}catch(d){c=!1}else c=!1;if(c){this.va=1;Mc(b,this.qg,this.rg,this);return}c=typeof b;if("object"==c&&null!=b||"function"==c)try{var g=b[D];if(Gb(g)){this.hk(b,g);return}}catch(k){a=3,b=k}}this.Yf=b;this.va=a;this.F=null;this.ag();3!=a||b instanceof Fc||Pc(this,b)}};
J.hk=function(a,b){function c(a){k||(k=!0,g.rg(a))}function d(a){k||(k=!0,g.qg(a))}this.va=1;var g=this,k=!1;try{b[F](a,d,c)}catch(l){c(l)}};J.ag=function(){this.Vd||(this.Vd=!0,yc(this.Sh,this))};J.Vi=function(){return!!this.Wb};J.Gj=function(a){N(null!=a.Ib);this.Rc?oa(this.Rc,a):this.Wb=a;this.Rc=a};J.zj=function(){var a=null;this.Wb&&(a=this.Wb,this.Wb=a[Va],oa(a,null));this.Wb||(this.Rc=null);null!=a&&N(null!=a.Ib);return a};
J.Sh=function(){for(var a=null;a=this.zj();)this.Rh(a,this.va,this.Yf);this.Vd=!1};J.Rh=function(a,b,c){3==b&&a.ec&&!a.Kd&&this.Pj();if(a[bb])a[bb].F=null,Qc(a,b,c);else try{a.Kd?a.Ib[F](a[Ba]):Qc(a,b,c)}catch(d){Rc[F](null,d)}Hc.put(a)};function Qc(a,b,c){2==b?a.Ib[F](a[Ba],c):a.ec&&a.ec[F](a[Ba],c)}J.Fg=ub();J.Pj=function(){var a;for(a=this;a&&a.kd;a=a.F)a.kd=!1};function Pc(a,b){a.kd=!0;yc(function(){a.kd&&(a.Fg(b),Rc[F](null,b))})}var Rc=sc;function Fc(a){Nb[F](this,a)}M(Fc,Nb);xa(Fc[B],"cancel");
function Oc(a,b,c){this.ua=a;this.resolve=b;this.reject=c};
function Sc(a,b){this.ra=a;this.Kb=b||this.af()}var Tc=0;J=Sc[B];J.id=I("ra");J.Ng=vb("ra");J.B=I("Kb");J.af=function(){return{}};J.mg=I("Kb");J.Wa=function(){return{id:this.ra,value:this.mg()}};J.Dc=function(a){return"#"==a.substr(-1)?this.ra:null};function Uc(a){return new Sc(a.id,a[y])}function Vc(a){return new Sc(Tc++,a||{})}function Wc(a){if(null==a)return"";a=new Uint8Array(a);for(var b="",c=0;c<a[A];++c)var d=a[c][r](16),b=b+(2>d[A]?"0"+d:d);return b};
function Xc(a){this.type=a}function Yc(a){Sc[F](this,-1,a)}M(Yc,Sc);
var Zc={};K("lf.TransactionType",Zc,void 0);Zc.READ_ONLY=0;Zc.READ_WRITE=1;

function $c(a,b){this.Qa=a;this.ng=b;this.ia=Nc()}J=$c[B];J.vi=I("Qa");J.ba=function(){return(0==this.ng?Jc():this.lj())[D](L(function(){this.Qa.ba()},this))};J.lj=function(){this.mj();this.kj();return this.ia.ua};
J.mj=function(){var a=this.Qa.hf();a.G()[n](function(b){var c=this.Qa.Z().get(b),c=this.W(c[h](),L(c.Yb,c));b=a.get(b);var d=b.ae().c().map(function(a){return a.id()});0<d[A]&&c[m](d).lg(this.je,this);b=b.de().c().map(function(a){return a[1]})[Ja](b.Yd().c());c.put(b).lg(this.je,this)},this)};J.kj=function(){this.Qa.si()[n](function(a){var b=this.W(a[h](),Uc),c;b.get([-1])[D](function(a){c=a;return b[m]([])})[D](function(){b.put(c);b.put(a.Wa())},L(this.je,this))},this)};J.je=function(a){this.ia[db](a)};function ad(a,b,c,d){c=c||function(a,b){return a==b};d=d||function(b){return a[b]};for(var g=a[A],k=b[A],l=[],p=0;p<g+1;p++)l[p]=[],l[p][0]=0;for(var C=0;C<k+1;C++)l[0][C]=0;for(p=1;p<=g;p++)for(C=1;C<=k;C++)c(a[p-1],b[C-1])?l[p][C]=l[p-1][C-1]+1:l[p][C]=ea.max(l[p-1][C],l[p][C-1]);for(var Ga=[],p=g,C=k;0<p&&0<C;)c(a[p-1],b[C-1])?(Ga[tb](d(p-1,C-1)),p--,C--):l[p-1][C]>l[p][C-1]?p--:C--;return Ga}function bd(a){return Yb(arguments,function(a,c){return a+c},0)}
function cd(a){return bd[v](null,arguments)/arguments[A]}function dd(a){var b=arguments[A];if(2>b)return 0;var c=cd[v](null,arguments);return bd[v](null,Xb(arguments,function(a){return ea.pow(a-c,2)}))/(b-1)}function ed(a){return ea.sqrt(dd[v](null,arguments))};var fd="StopIteration"in xb?xb.StopIteration:{message:"StopIteration",stack:""};function gd(){}oa(gd[B],function(){throw fd;});gd[B].qb=function(){return this};function hd(a){if(a instanceof gd)return a;if("function"==typeof a.qb)return a.qb(!1);if(Eb(a)){var b=0,c=new gd;oa(c,function(){for(;;){if(b>=a[A])throw fd;if(b in a)return a[b++];b++}});return c}throw fa("Not implemented");}
function id(a,b,c){if(Eb(a))try{Wb(a,b,c)}catch(d){if(d!==fd)throw d;}else{a=hd(a);try{for(;;)b[F](c,a[Va](),void 0,a)}catch(g){if(g!==fd)throw g;}}}function jd(a){if(Zb(arguments,function(a){return!a[A]})||!arguments[A])return new gd;var b=new gd,c=arguments,d=jc(0,c[A]);oa(b,function(){if(d){for(var a=Xb(d,function(a,b){return c[b][a]}),b=d[A]-1;0<=b;b--){N(d);if(d[b]<c[b][A]-1){d[b]++;break}if(0==b){d=null;break}d[b]=0}return a}throw fd;});return b};function P(a,b){this.f={};this.b=[];this.pb=this.R=0;var c=arguments[A];if(1<c){if(c%2)throw fa("Uneven number of arguments");for(var d=0;d<c;d+=2)this.set(arguments[d],arguments[d+1])}else a&&this[gb](a)}J=P[B];J.V=I("R");J.c=function(){this.qc();for(var a=[],b=0;b<this.b[A];b++)a[w](this.f[this.b[b]]);return a};J.G=function(){this.qc();return this.b[Ja]()};J.s=function(a){return kd(this.f,a)};J.Vc=function(a){for(var b=0;b<this.b[A];b++){var c=this.b[b];if(kd(this.f,c)&&this.f[c]==a)return!0}return!1};
J.uc=function(a,b){if(this===a)return!0;if(this.R!=a.V())return!1;var c=b||ld;this.qc();for(var d,g=0;d=this.b[g];g++)if(!c(this.get(d),a.get(d)))return!1;return!0};function ld(a,b){return a===b}J.ya=function(){return 0==this.R};la(J,function(){this.f={};ya(this.b,0);this.pb=this.R=0});ja(J,function(a){return kd(this.f,a)?(delete this.f[a],this.R--,this.pb++,this.b[A]>2*this.R&&this.qc(),!0):!1});
J.qc=function(){if(this.R!=this.b[A]){for(var a=0,b=0;a<this.b[A];){var c=this.b[a];kd(this.f,c)&&(this.b[b++]=c);a++}ya(this.b,b)}if(this.R!=this.b[A]){for(var d={},b=a=0;a<this.b[A];)c=this.b[a],kd(d,c)||(this.b[b++]=c,d[c]=1),a++;ya(this.b,b)}};J.get=function(a,b){return kd(this.f,a)?this.f[a]:b};J.set=function(a,b){kd(this.f,a)||(this.R++,this.b[w](a),this.pb++);this.f[a]=b};J.addAll=function(a){var b;a instanceof P?(b=a.G(),a=a.c()):(b=oc(a),a=nc(a));for(var c=0;c<b[A];c++)this.set(b[c],a[c])};
J.forEach=function(a,b){for(var c=this.G(),d=0;d<c[A];d++){var g=c[d],k=this.get(g);a[F](b,k,g,this)}};qa(J,function(){return new P(this)});J.wi=function(){return this.qb(!0)};J.Mi=function(){return this.qb(!1)};J.qb=function(a){this.qc();var b=0,c=this.pb,d=this,g=new gd;oa(g,function(){if(c!=d.pb)throw fa("The map has changed since the iterator was created");if(b>=d.b[A])throw fd;var g=d.b[b++];return a?g:d.f[g]});return g};function kd(a,b){return ba[B][Xa][F](a,b)};
function md(a){this.Tj=a}f(md[B],I("Tj"));var nd=new md("backstore"),od=new md("cache"),pd=new md("indexstore"),qd=new md("engine"),rd=new md("runner"),sd=new md("observerregistry"),td=new md("schema");
function ud(a){if("function"==typeof a.V)a=a.V();else if(Eb(a)||Fb(a))a=a[A];else{var b=0,c;for(c in a)b++;a=b}return a}function vd(a){if("function"==typeof a.c)return a.c();if(Fb(a))return a[Wa]("");if(Eb(a)){for(var b=[],c=a[A],d=0;d<c;d++)b[w](a[d]);return b}return nc(a)}
function wd(a,b,c){if("function"==typeof a[rb])return a[rb](b,c);if(Eb(a)||Fb(a))return $b(a,b,c);var d;if("function"==typeof a.G)d=a.G();else if("function"!=typeof a.c)if(Eb(a)||Fb(a)){d=[];for(var g=a[A],k=0;k<g;k++)d[w](k)}else d=oc(a);else d=void 0;for(var g=vd(a),k=g[A],l=0;l<k;l++)if(!b[F](c,g[l],d&&d[l],a))return!1;return!0};function Q(a){this.f=new P;a&&this[gb](a)}function xd(a){var b=typeof a;return"object"==b&&a||"function"==b?"o"+Hb(a):b.substr(0,1)+a}J=Q[B];J.V=function(){return this.f.V()};J.add=function(a){this.f.set(xd(a),a)};J.addAll=function(a){a=vd(a);for(var b=a[A],c=0;c<b;c++)this.add(a[c])};J.Vf=function(a){a=vd(a);for(var b=a[A],c=0;c<b;c++)this[m](a[c])};ja(J,function(a){return this.f[m](xd(a))});la(J,function(){this.f[Na]()});J.ya=function(){return this.f.ya()};J.contains=function(a){return this.f.s(xd(a))};
J.ph=function(a){return wd(a,this[u],this)};J.Bh=function(a){var b=this[Za]();b.Vf(a);return b};J.c=function(){return this.f.c()};qa(J,function(){return new Q(this)});J.uc=function(a){return this.V()==ud(a)&&this.ej(a)};
J.ej=function(a){var b=ud(a);if(this.V()>b)return!1;!(a instanceof Q)&&5<b&&(a=new Q(a));return wd(this,function(b){var d=a;if("function"==typeof d[u])b=d[u](b);else if("function"==typeof d.Vc)b=d.Vc(b);else if(Eb(d)||Fb(d))b=0<=Vb(d,b);else a:{for(var g in d)if(d[g]==b){b=!0;break a}b=!1}return b})};J.qb=function(){return this.f.qb(!1)};
function yd(a,b){this.ra=a;this.Kb=b||{}}function zd(a){var b=new Q;a[n](function(a){b.add(a>>9)});return b.c()}J=yd[B];J.ga=I("ra");J.gd=I("Kb");J.eg=function(a){a[n](function(a){this.Kb[a.id()]=a.Wa()},this)};J.Nj=function(a){a[n](function(a){var c=this.Kb;a in c&&delete c[a]},this)};J.Wa=function(){return{id:this.ra,value:JSON[eb](this.Kb)}};function Ad(a){return new yd(a.id,JSON.parse(a[y]))};

function Bd(a,b,c){this.O=a;this.Bb=b;this.Zf=c}J=Bd[B];J.get=function(a){return 0==a[A]?this.$d():this.Ai(a)[D](L(function(b){return a.map(function(a){var d=b.get(a>>9);N(d,"Containing page is empty");return this.Bb(d.gd()[a])},this)},this))};J.Ai=function(a){var b=new P,c=Nc();a=zd(a).map(function(a){return new O(function(c,k){var l;try{l=this.O.get(a)}catch(p){k(p);return}sa(l,k);za(l,L(function(a){a=Ad(a[nb][Ta]);b.set(a.ga(),a);c()},this))},this)},this);Lc(a)[D](function(){c[ob](b)});return c.ua};
J.$d=function(){return new O(function(a,b){var c=[],d;try{d=this.O.openCursor()}catch(g){b(g);return}sa(d,b);za(d,L(function(){var b=d[Ta];if(b){var g=Ad(b[y]).gd(),p;for(p in g)c[w](this.Bb(g[p]));b.continue()}else a(c)},this))},this)};J.Lb=function(a){return new O(function(b,c){var d;try{d=a()}catch(g){c(g);return}za(d,b);sa(d,c)},this)};
J.put=function(a){if(0==a[A])return Jc();var b=new P;a[n](function(a){var d;d=a.id()>>9;var g=b.get(d,null);null===g&&(g=this.Zf(this.O[lb],d));g.eg([a]);b.set(d,g)},this);a=b.c().map(function(a){return this.Lb(L(function(){return this.O.put(a.Wa())},this))},this);return Lc(a)};
ja(J,function(a){if(0==a[A])return this.Lb(L(function(){return this.O[Na]()},this));var b=new P;a[n](function(a){var d=a>>9,g=b.get(d,null);null===g&&(g=this.Zf(this.O[lb],d));g.Nj([a]);b.set(d,g)},this);a=b.c().map(function(a){return this.Lb(L(function(){var b;a:{b=a.gd();for(var g in b){b=!1;break a}b=!0}return b?this.O[kb](a.ga()):this.O.put(a.Wa())},this))},this);return Lc(a)});function Cd(a,b,c){a=a.m(od);var d=[c<<9,(c+1<<9)-1];b=a.Ma(b,d[0],d[1]);c=new yd(c);c.eg(b);return c}
function Dd(a,b){return new yd(b)};
function Ed(){};
function Fd(a){this.la=a.m(od);this.N=a.m(pd);this.w=a.m(td)}Aa(Fd[B],function(a){a[n](function(a){this.jk(a);this.ik(a)},this)});Fd[B].ik=function(a){var b=a[h]();a.ae().c()[n](function(a){this.la[m](b,[a.id()])},this);a.Yd()[n](function(a){this.la.set(b,[a])},this);a.de()[n](function(a){this.la.set(b,[a[1]])},this)};Fd[B].jk=function(a){var b=this.w[t](a[h]());a.pi()[n](function(a){this.ug(b,a)},this)};
Fd[B].ug=function(a,b){a.Ca().map(function(a){return this.N.get(a.j())},this)[Ja]([this.N.get(a.Db())])[n](function(a){var d=null===b[1]?null:b[1].Dc(a[h]()),g=null===b[0]?null:b[0].Dc(a[h]());null===g&&null!==d?a.add(d,b[1].id()):null===g||null===d?null!==g&&null===d&&a[m](g,b[0].id()):0!=a.sc()[Sa](g,d)&&(a.add(d,b[1].id()),a[m](g,b[0].id()))})};
function R(a,b){xa(this,a);this.message=b};
function Gd(a){this.N=a.m(pd)}Gd[B].Zh=function(a,b){var c=a.bc().ge();return null===c?null:this.Yh(c,b)};Gd[B].Yh=function(a,b){var c=a.j(),d=b.Dc(c),c=this.N.get(c).get(d);return 0==c[A]?null:c[0]};Gd[B].Pd=function(a,b){var c=a.bc().yi();b[n](function(a){c[n](function(b){if(null===a.B()[b[h]()])throw new R("ConstraintError","Attempted to insert NULL value to non-nullable field "+b.j());},this)},this)};
function Hd(a){this.Za=new P;this.Da=new P;this.bb=new P;this.u=a}J=Hd[B];ia(J,I("u"));J.Yd=I("Za");J.de=I("Da");J.ae=I("bb");J.add=function(a){if(this.bb.s(a.id())){var b=[this.bb.get(a.id()),a];this.Da.set(a.id(),b);this.bb[m](a.id())}else this.Za.set(a.id(),a)};J.modify=function(a){var b=a[0],c=a[1];N(b.id()==c.id(),"Row ID mismatch between old/new values.");b=b.id();this.Za.s(b)?this.Za.set(b,c):(this.Da.s(b)&&(a=[this.Da.get(a[0].id())[0],c]),this.Da.set(b,a))};
va(J,function(a){if(this.Za.s(a.id()))this.Za[m](a.id());else if(this.Da.s(a.id())){var b=this.Da.get(a.id())[0];this.Da[m](a.id());this.bb.set(a.id(),b)}else this.bb.set(a.id(),a)});J.pi=function(){var a=[];this.Za.c()[n](function(b){a[w]([null,b])},this);this.Da.c()[n](function(b){a[w](b)},this);this.bb.c()[n](function(b){a[w]([b,null])},this);return a};f(J,function(){return"["+this.Za.G()[r]()+"], ["+this.Da.G()[r]()+"], ["+this.bb.G()[r]()+"]"});
J.Ei=function(){var a=new Hd(this.u);this.Za.c()[n](function(b){a[kb](b)},this);this.bb.c()[n](function(b){a.add(b)},this);this.Da.c()[n](function(b){a.modify([b[1],b[0]])},this);return a};J.ya=function(){return this.Za.ya()&&this.bb.ya()&&this.Da.ya()};
function Id(a,b){this.Ja=new P;b[n](function(a){this.Ja.set(a[h](),a)},this);this.la=a.m(od);this.N=a.m(pd);this.Wc=new Gd(a);this.md=new Fd(a);this.we=this.Ed=!1;this.xb=new P}J=Id[B];J.hf=I("xb");J.si=function(){var a=[];this.xb.G().map(function(a){return this.Ja.get(a)},this)[n](function(b){b.Mb()&&(b.Ca()[n](function(b){a[w](this.N.get(b.j()))},this),a[w](this.N.get(b[h]()+".#")))},this);return a};J.Z=I("Ja");
J.ti=function(){var a=[];this.Ja.c()[n](function(b){b.Mb()&&(b.Ca()[n](function(b){a[w](b.j())}),a[w](b[h]()+".#"))});return a};J.lb=function(a,b){this.oc();this.Sc(a);this.Wc.Pd(a,b);for(var c=0;c<b[A];c++)this.od(a,null,b[c])};
J.od=function(a,b,c){var d=a[h](),g=this.xb.get(d,null)||new Hd(d);this.xb.set(d,g);var k=[b,c];try{this.md.ug(a,k)}catch(l){throw this.we=!0,l;}null===b&&null!==c?(this.la.set(d,[c]),g.add(c)):null!==b&&null!==c?(this.la.set(d,[c]),g.modify(k)):null!==b&&null===c&&(this.la[m](d,[b.id()]),g[kb](b))};Aa(J,function(a,b){this.oc();this.Sc(a);this.Wc.Pd(a,b);for(var c=0;c<b[A];c++){var d=b[c],g=this.la.get([d.id()])[0];this.od(a,g,d)}});
J.me=function(a,b){this.oc();this.Sc(a);this.Wc.Pd(a,b);for(var c=0;c<b[A];c++){var d=b[c],g=null,k=this.Wc.Zh(a,d);null!=k&&(g=this.la.get([k])[0],d.Ng(k));this.od(a,g,d)}};ja(J,function(a,b){this.oc();this.Sc(a);for(var c=0;c<b[A];c++)this.od(a,b[c],null)});J.ba=function(){this.oc();this.Ed=!0};J.oc=function(){N(!this.we,"Attemptted to use journal that needs to be rolled back.");N(!this.Ed,"Attemptted to commit a terminated journal.")};
J.vb=function(){N(!this.Ed,"Attempted to rollback a terminated journal.");var a=this.xb.c().map(function(a){return a.Ei()},this);this.md[sb](a);this.Ed=!0;this.we=!1};J.Sc=function(a){if(!this.Ja.s(a[h]()))throw new R("ScopeError",a[h]()+" is not in the journal's scope.");};
var Jd={};K("lf.Order",Jd,void 0);Jd.DESC=0;Jd.ASC=1;
function Kd(a,b,c,d){this.g=a;this.o=b;this.X=null===this.g?!1:c;this.ca=null===this.o?!1:d}J=Kd[B];f(J,function(){return(this.X?"(":"[")+(null===this.g?"unbound":this.g)+", "+(null===this.o?"unbound":this.o)+(this.ca?")":"]")});J.lh=function(){if(null===this.g&&null===this.o)return[];var a=null,b=null;null===this.g||(a=new Kd(null,this.g,!1,!this.X));null===this.o||(b=new Kd(this.o,null,!this.ca,!1));return[a,b][Ca](function(a){return null!==a})};
J.reverse=function(){return new Kd(this.o,this.g,this.ca,this.X)};J.Nf=function(a){var b=Ld(this.g,a.g,!0,this.X,a.X);if(0==b)return!0;var c=-1==b?this:a;a=1==b?this:a;return null===c.o||c.o>a.g||c.o==a.g&&!c.ca&&!a.X};function Md(){return new Kd(null,null,!1,!1)}J.contains=function(a){var b=null===this.o||a<this.o||a==this.o&&!this.ca;return(null===this.g||a>this.g||a==this.g&&!this.X)&&b};J.uc=function(a){return this.g==a.g&&this.X==a.X&&this.o==a.o&&this.ca==a.ca};
function Ld(a,b,c,d,g){function k(a){return c?a:1==a?-1:1}d=d||!1;g=g||!1;return null===a?null===b?(d?!g:g)?d?k(1):k(-1):0:k(-1):null===b?k(1):a<b?-1:a==b?(d?!g:g)?d?k(1):k(-1):0:1}function Nd(a,b){var c=Ld(a.g,b.g,!0,a.X,b.X);0==c&&(c=Ld(a.o,b.o,!1,a.ca,b.ca));return c};
function Od(a,b){this.entries=a;this.I=new Q(b);this.yb=null}J=Od[B];J.bj=function(a){return this.I.uc(a.I)};function Pd(a,b){N(a.bj(b),"Intersection/union operations only apply to compatible relations.")}J.T=function(){return this.I.c()};J.oe=function(){return 1<this.I.V()};J.ee=function(){return this[E].map(function(a){return a.pa.B()})};J.Gi=function(){return this[E].map(function(a){return a.pa.id()})};J.Uj=function(a,b){null===this.yb&&(this.yb=new P);this.yb.set(a.j(),b)};
J.ac=function(a){N(null!==this.yb,"getAggregationResult called before any results have been calculated.");var b=this.yb.get(a.j(),void 0);N(yb(b),"Could not find result for "+a.j());return b};J.Ti=function(a){return null!==this.yb&&this.yb.s(a.j())};var Qd=null;function Rd(){null===Qd&&(Qd=new Od([],[]));return Qd}
function Sd(a){if(0==a[A])return Rd();for(var b=a[fb](function(b,c){Pd(a[0],c);return b+c[E][A]},0),c=e(b),d=0,b=a.map(function(a){var b=new P;a[E][n](function(a){c[d++]=a;b.set(a.id,a)});return b}),g=new P,k=0;k<c[A];k++)b[rb](function(a){return a.s(c[k].id)})&&g.set(c[k].id,c[k]);return new Od(g.c(),a[0].I.c())}function Td(a){if(0==a[A])return Rd();var b=new P;a[n](function(c){Pd(a[0],c);c[E][n](function(a){b.set(a.id,a)})});return new Od(b.c(),a[0].I.c())}
function Ud(a,b){var c=1<b[A],d=a.map(function(a){return new Vd(a,c)});return new Od(d,b)}function Vd(a,b){this.pa=a;this.id=Wd++;this.pe=b}var Wd=0;Vd[B].M=function(a){var b=a.La();return null!==b&&this.pa.B()[Xa](b)?this.pa.B()[b]:this.pe?this.pa.B()[a.W().xa()][a[h]()]:this.pa.B()[a[h]()]};Vd[B].De=function(a,b){var c=a.La();if(null!=c)this.pa.B()[c]=b;else if(this.pe){var c=a.W().xa(),d=this.pa.B()[c];null==d&&(d={},this.pa.B()[c]=d);d[a[h]()]=b}else this.pa.B()[a[h]()]=b};
function Xd(a,b,c,d){function g(a,b){if(a.pe){var c=a.pa.B(),d;for(d in c)k[d]=c[d]}else N(!k[Xa](b[0]),"Attempted to join table with itself, without using table alias, or same alias "+b[0]+"is reused for multiple tables."),k[b[0]]=a.pa.B()}var k={};g(a,b);g(c,d);a=new Sc(-1,k);return new Vd(a,!0)};
K("lf.bind",function(a){return new Yd(a)},void 0);function Yd(a){this.sa=a}K("lf.Binder",Yd,void 0);Yd[B].jb=I("sa");
var Zd={};K("lf.Type",Zd,void 0);Zd.ARRAY_BUFFER=0;Zd.BOOLEAN=1;Zd.DATE_TIME=2;Zd.INTEGER=3;Zd.NUMBER=4;Zd.STRING=5;Zd.OBJECT=6;var $d={0:new ArrayBuffer(0),1:!1,2:ba.freeze(new Date(0)),3:0,4:0,5:"",6:ba.freeze({})};K("lf.type.DEFAULT_VALUES",$d,void 0);
function ae(){var a=be();this.Jh=new P(1,ce(),2,de(),4,a,3,a,5,ee())}Ab(ae);ae[B].be=function(a,b){var c=this.Jh.get(a,null);N(null!==c,"Could not find evaluation map for "+a);c=c.get(b,null);N(null!==c,"Could not find evaluator for "+a+", "+b);return c};
function be(){return new P("between",function(a,b){return a>=b[0]&&a<=b[1]},"eq",function(a,b){return a==b},"gte",function(a,b){return a>=b},"gt",function(a,b){return a>b},"in",function(a,b){return-1!=b[z](a)},"lte",function(a,b){return a<=b},"lt",function(a,b){return a<b},"neq",function(a,b){return a!=b})}
function ee(){return new P("between",function(a,b){return a>=b[0]&&a<=b[1]},"eq",function(a,b){return a==b},"gte",function(a,b){return a>=b},"gt",function(a,b){return a>b},"in",function(a,b){return-1!=b[z](a)},"lte",function(a,b){return a<=b},"lt",function(a,b){return a<b},"match",function(a,b){return(new RegExp(b)).test(a)},"neq",function(a,b){return a!=b})}
function de(){return new P("between",function(a,b){return a[Oa]()>=b[0][Oa]()&&a[Oa]()<=b[1][Oa]()},"eq",function(a,b){return(null===a?-1:a[Oa]())==(null===b?-1:b[Oa]())},"gte",function(a,b){return a[Oa]()>=b[Oa]()},"gt",function(a,b){return a[Oa]()>b[Oa]()},"in",function(a,b){return b[pb](function(b){return b[Oa]()==a[Oa]()})},"lte",function(a,b){return a[Oa]()<=b[Oa]()},"lt",function(a,b){return a[Oa]()<b[Oa]()},"neq",function(a,b){return(null===a?-1:a[Oa]())!=(null===b?-1:b[Oa]())})}
function ce(){return new P("eq",function(a,b){return a==b},"neq",function(a,b){return a!=b})};function fe(a,b){this.Bf=a;this.vg=b}fe[B].getKey=I("Bf");fe[B].Li=I("vg");qa(fe[B],function(){return new fe(this.Bf,this.vg)});function ge(a,b){fe[F](this,a,b);this.i=this.F=null}M(ge,fe);var he=[];J=ge[B];qa(J,function(){return new ge(this.getKey(),this.Li())});J.getParent=I("F");J.vf=function(){return!this.qa()};J.Y=function(){return this.i||he};J.ib=function(a){return this.Y()[a]||null};J.qa=function(){return this.Y()[A]};J.ri=function(){for(var a=0,b=this;b[Ea]();)a++,b=b[Ea]();return a};J.Cb=function(){for(var a=this;a[Ea]();)a=a[Ea]();return a};J.contains=function(a){do a=a[Ea]();while(a&&a!=this);return Boolean(a)};
J.jc=function(a,b){if(!1!==a[F](b,this))for(var c=this.Y(),d=0;d<c[A];d++)c[d].jc(a,b)};J.cg=vb("F");J.ea=function(a){this.lc(a,this.i?this.i[A]:0)};J.lc=function(a,b){N(!a[Ea]());a.cg(this);this.i=this.i||[];N(0<=b&&b<=this.i[A]);ec(this.i,b,0,a)};J.Ad=function(a){var b=this.i&&this.i[a];return b?(b.cg(null),ac(this.i,a),0==this.i[A]&&(this.i=null),b):null};J.removeChild=function(a){return this.Ad(Vb(this.Y(),a))};

function ie(){ge[F](this,"","");this.ra=je++}M(ie,ge);var je=0;ie[B].ga=I("ra");ie[B].Ee=vb("ra");
function ke(a,b,c){ie[F](this);this.K=a;ta(this,b);this.S=c;this.Zc=ae.ce().be(this.K.$(),this.S);this.Pa=!1;this.Vb=b}M(ke,ie);J=ke[B];J.zb=function(){var a=new ke(this.K,this[y],this.S);a.Vj(this.Vb);a.Dd(this.Pa);a.Ee(this.ga());return a};J.sb=function(a){return null!=a?(a[w](this.K),a):[this.K]};J.Dd=vb("Pa");J.Vj=vb("Vb");
J.Xe=function(){var a=!1;this[y]instanceof Yd||(a="array"==Bb(this[y])?!this[y][pb](function(a){return a instanceof Yd}):!0);if(!a)throw new R("SyntaxError","Value is not bounded");};J.eval=function(a){this.Xe();if("in"==this.S)return this.Eh(a);var b=a[E][Ca](function(a){return this.Zc(a.M(this.K),this[y])!=this.Pa},this);return new Od(b,a.T())};
ma(J,function(a){function b(b){if(a[A]<=b)throw new R("SyntaxError","Cannot bind to given array: out of range.");}if(this.Vb instanceof Yd){var c=this.Vb.jb();b(c);ta(this,a[c])}else"array"==Bb(this.Vb)&&ta(this,this.Vb.map(function(c){return c instanceof Yd?(b(c.jb()),a[c.jb()]):c}))});
J.Eh=function(a){N("in"==this.S,"ValuePredicate#evalAsIn_() called for wrong predicate type.");var b=new Q(this[y]),c=L(function(a){return b[u](a)!=this.Pa},this),d=a[E][Ca](function(a){return c(a.M(this.K))},this);return new Od(d,a.T())};f(J,function(){return"value_pred("+this.K.j()+" "+this.S+(this.Pa?"(complement)":"")+" "+this[y]+")"});J.uf=function(){this.Xe();return null!==this[y]&&("between"==this.S||"eq"==this.S||"gt"==this.S||"gte"==this.S||"lt"==this.S||"lte"==this.S)};
J.fk=function(){N(this.uf(),"Could not convert predicate to key range.");var a=null;"between"==this.S?a=new Kd(this[y][0],this[y][1],!1,!1):"eq"==this.S?(a=this[y],a=new Kd(a,a,!1,!1)):a="gte"==this.S?new Kd(this[y],null,!1,!1):"gt"==this.S?new Kd(this[y],null,!0,!1):"lte"==this.S?new Kd(null,this[y],!1,!1):new Kd(null,this[y],!1,!0);return this.Pa?a.lh():[a]};
function le(){this.rc=this.na=null}le[B].hd=function(a){null===this.na&&null!=this.A&&(this.na=me(this.A));a=this.na.get(a,null);N(null!==a);return a};function me(a){var b=new P;a.jc(function(a){b.set(a.ga(),a)});return b}le[B].Tc=function(a){a.A&&(this.A=a.A.zb());this.rc=a};ma(le[B],function(){N(null==this.rc);return this});le[B].Nd=function(a){var b=this.A;null!=b&&b.jc(function(b){b instanceof ke&&b[q](a)})};
function oe(){le[F](this)}M(oe,le);function pe(a){var b="";a[n](function(c,d){b+=c.K.j()+" ";b+=1==c.mb?"ASC":"DESC";d<a[A]-1&&(b+=", ")});return b}qa(oe[B],function(){var a=new oe;a.Tc(this);this.h&&(a.h=this.h[x]());this.g&&(a.g=this.g[x]());a.ka=this.ka;a.ja=this.ja;this.J&&(a.J=this.J[x]());this.ha&&(a.ha=this.ha[x]());this.Hb&&(a.Hb=this.Hb);this.Rb&&(a.Rb=this.Rb);return a});
ma(oe[B],function(a){oe.Xa[q][F](this,a);null!=this.Hb&&(this.ka=a[this.Hb.jb()]);null!=this.Rb&&(this.ja=a[this.Rb.jb()]);this.Nd(a);return this});
function qe(a){this.Ba=a}qe[B].Cb=I("Ba");qe[B].df=wb("plan description");qe[B].Z=function(){function a(c){var d=c.Z();d&&b.add(d);c.Y()[n](function(b){a(b)})}var b=new Q;a(this.Ba);return b.c()};function re(a){var b=new Q;a[n](function(a){b[gb](a.Z())});return b};

function se(a,b){this.global=a;this.rb=a.m(nd);this.xd=b.map(function(a){return a[Ba]});this.Pf=b.map(function(a){return a.xe});this.Ye=re(this.Pf);this.og=this.zh();this.Ob=Nc()}J=se[B];J.zh=function(){return this.xd[pb](function(a){return!(a instanceof oe)})?1:0};
ha(J,function(){var a=new Id(this[Pa],this.Ye.c()),b=[],c=this.Pf[x](),d=L(function(){var g=c[Fa]();if(g){var k=this.xd[b[A]];return g.Cb()[Ha](a,k)[D](function(a){b[w](a[0]);return d()})}return Jc()},this);return d()[D](L(function(){return this.rb.Ab(this.og,a).ba()},this))[D](L(function(){this.ve(b);return b},this),L(function(b){a.vb();throw b;},this))});J.$=I("og");J.Z=I("Ye");J.yc=I("Ob");J.ga=function(){return Hb(this)};J.ve=ub();
function te(a,b){se[F](this,a,b);this.tb=a.m(sd)}M(te,se);ua(te[B],wb(0));te[B].ve=function(a){this.xd[n](function(b,c){this.tb.tg(b,a[c])},this)};
function ue(a,b){this.l=a;this.tb=a.m(sd);this.Ia=a.m(rd);this.md=new Fd(a);this.xb=b;var c=a.m(td),d=this.xb.map(function(a){return c[t](a[h]())});this.Ja=new Q(d);this.Ob=Nc()}J=ue[B];ha(J,function(){this.md[sb](this.xb);this.Jc();return Jc()});J.$=wb(1);J.Z=I("Ja");J.yc=I("Ob");J.ga=function(){return Hb(this)};ua(J,wb(1));J.Jc=function(){var a=this.tb.ie(this.Ja.c());0!=a[A]&&(a=new te(this.l,a),this.Ia.Pb(a))};
function ve(a){this.l=a;this.rb=a.m(nd);this.Ia=a.m(rd)}ve[B].bk=function(){this.rb.subscribe(this.ue[q](this))};ve[B].ue=function(a){a=new ue(this.l,a);this.Ia.Pb(a)};

function we(a,b,c){$c[F](this,c,b);this.D=a}M(we,$c);we[B].W=function(a){return this.D.zc(a)};
we[B].ba=function(){we.Xa.ba[F](this);var a=this.vi().hf();if(0==a.V())this.ia[ob]();else{var b=this.D.Fi()+1;this.D.Di()[ab](L(function(c){this.D.dg(b);a[n](function(a){var b=c[a[h]()];a.Yd()[n](function(a,c){b[c[r]()]=a.B()});a.de().c()[n](function(a){b[a[1].id()[r]()]=a[1].B()});a.ae().c()[n](function(a){b[a.id()[r]()]=null})});c.__revision__=b;return c},this),L(function(c,d,g){if(c||!d)this.D.dg(b-1),a[n](L(function(a){a=a[h]();this.D.Lj(a,g[a])},this)),this.ia[db](c);else this.ia[ob]()},this))}return this.ia.ua};
function xe(){this.hb=new P}J=xe[B];J.Ii=function(a){if(0==a[A])return this.hb.c();var b=[];a[n](function(a){a=this.hb.get(a,null);null===a||b[w](a)},this);return b};J.getData=I("hb");J.get=function(a){return Jc(this.Ii(a))};J.Uf=function(a){a[n](function(a){this.hb.set(a.id(),a)},this)};J.put=function(a){this.Uf(a);return Jc()};J.Oj=function(a){0==a[A]||a[A]==this.hb.V()?this.hb[Na]():a[n](function(a){this.hb[m](a)},this)};ja(J,function(a){this.Oj(a);return Jc()});
J.xi=function(){return this.hb.ya()?0:this.hb.G()[fb](function(a,b){return a>b?a:b},0)};
function ye(a,b){this.w=a;this.Eg=b;this.hc=-1;this.I=new P;this.Od=null}J=ye[B];J.Fi=I("hc");J.dg=vb("hc");J.ye=function(a,b){var c=[],d;for(d in b)"__meta__"!=d&&c[w](new Sc(ga(d,10),b[d]));a.Uf(c)};J.Na=function(){var a=Nc();this.D=this.Eg[bb](this.w[lb]());this.D.on("value",L(function(b){a[ob](this.wj(b))},this));return a.ua};J.Yi=function(){Tc=this.I.c().map(function(a){return a.xi()})[fb](function(a,b){return a>b?a:b},0)+1};J.wj=function(a){return 0>this.hc?this.$i(a.exportVal()):this.ue(a.exportVal())};
J.$i=function(a){var b=Nc();null===a?this.D.set(this.qh(),function(){b[ob]()}):a.__version__==this.w[Da]()&&(this.hc=a.__revision__,this.w.Ya()[n](function(b){var d=new xe;this.ye(d,a[b[h]()]);this.I.set(b[h](),d)},this),this.Yi(),b[ob]());return b.ua};
J.ue=function(a){if(a.__revision__==this.hc)return Jc();var b=this.w.Ya().map(function(b){b=b[h]();return this.di(b,a[b])},this)[Ca](function(a){return!a.ya()});this.hc=a.__revision__;b[n](function(b){var d=new xe;this.ye(d,a[b[h]()]);this.I.set(b[h](),d)},this);b[A]&&this.Gc(b);return Jc()};
J.di=function(a,b){var c=new Hd(a),d=this.I.get(a).getData(),g=new Q(oc(b)[Ca](function(a){return"__meta__"!=a}).map(function(a){return ga(a,10)}));g.Bh(d.G()).c()[n](function(a){c.add(new Sc(a,b[a[r]()]))});d.G()[n](function(a){if(g[u](a)){var l=d.get(a);JSON[eb](l.B())!=JSON[eb](b[a])&&c.modify([l,new Sc(a,b[a[r]()])])}else c[kb](d.get(a))});return c};J.Lj=function(a,b){var c=new xe;this.ye(c,b.exportVal());this.I.set(a,c)};
J.qh=function(){var a={};a.__version__=this.w[Da]();a.__revision__=1;this.w.Ya()[n](function(b){b=b[h]();a[b]={__meta__:""};this.I.set(b,new xe)},this);return a};J.Ab=function(a,b){return new we(this,a,b)};J.zc=function(a){var b=this.I.get(a,null);if(null!==b)return b;throw new R("DataError","Table "+a+" not found");};J.Di=I("D");pa(J,ub());wa(J,vb("Od"));J.Gc=function(a){null!=this.Od&&this.Od(a)};

function ze(a,b,c,d){this.D=b;this.gb=c;this.pb=a;this.Ve=d}function Ae(a){var b=null;return b=a instanceof ArrayBuffer?Wc(a):a instanceof Date?a[Oa]():a}ze[B].Yc=function(a){var b={};lc(a,L(function(a,d){b[d]=Ae(a)},this));return Vc(b)};
function Be(a,b){this.O=a;this.Bb=b}J=Be[B];J.get=function(a){if(0==a[A])return this.$d();a=a.map(function(a){return new O(function(c,d){var g;try{g=this.O.get(a)}catch(k){d(k);return}sa(g,d);za(g,L(function(a){c(this.Bb(a[nb][Ta]))},this))},this)},this);return Lc(a)};J.$d=function(){return new O(function(a,b){var c=[],d;try{d=this.O.openCursor()}catch(g){b(g);return}sa(d,b);za(d,L(function(){var b=d[Ta];b?(c[w](this.Bb(b[y])),b.continue()):a(c)},this))},this)};
J.Lb=function(a){return new O(function(b,c){var d;try{d=a()}catch(g){c(g);return}za(d,b);sa(d,c)},this)};J.put=function(a){if(0==a[A])return Jc();a=a.map(function(a){return this.Lb(L(function(){return this.O.put(a.Wa())},this))},this);return Lc(a)};
ja(J,function(a){return new O(function(b,c){var d=this.O.count();za(d,L(function(d){if(0==a[A]||d[nb][Ta]==a[A])return this.Lb(L(function(){return this.O[Na]()},this))[D](b,c);d=a.map(function(a){return this.Lb(L(function(){return this.O[kb](a)},this))},this);Lc(d)[D](b,c)},this));sa(d,c)},this)});
function Ce(a,b,c,d,g){$c[F](this,c,d);this.l=a;this.gb=b;this.Ve=g;this.gb.oncomplete=L(this.ia[ob],this.ia);this.gb.onabort=L(this.ia[db],this.ia)}M(Ce,$c);Ce[B].W=function(a,b,c){return this.Ve?(c=null!=c?c:0,a=this.gb[ib](a),new Bd(a,b,0==c?Mb(Cd,this.l):Dd)):new Be(this.gb[ib](a),b)};
function De(a,b){this.l=a;this.w=b;this.Qc=b.Qf().Ch||!1}J=De[B];
J.Na=function(a){var b=aa.indexedDB||aa.mozIndexedDB||aa.webkitIndexedDB||aa.msIndexedDB;if(null==b)throw new R("NotSupportedError","IndexedDB not supported by platform.");var c=a||function(){return Jc()};return new O(function(a,g){var k;try{k=b.open(this.w[lb](),this.w[Da]())}catch(l){g(l);return}sa(k,g);k.onupgradeneeded=L(function(a){this.uj(c,a)[D](ub(),g)},this);za(k,L(function(b){this.D=b[nb][Ta];this.Ce()[D](L(function(b){Tc=b+1;a(this.D)},this))},this))},this)};
J.uj=function(a,b){var c=b[nb][Ta],d=b[nb][ab],g=new ze(b.oldVersion,c,d,this.Qc);this.Mj(c,d);this.uh(c,d);return a(g)};J.Mj=function(a){for(var b=[],c=0;c<a[Ka][A];++c){var d=a[Ka][hb](c);-1!=d[z](".")&&b[w](d)}b[n](function(b){try{a.deleteObjectStore(b)}catch(c){}})};J.uh=function(a,b){this.w.Ya()[n](Mb(this.rh,a,b),this)};J.rh=function(a,b,c){a[Ka][u](c[h]())||a.createObjectStore(c[h](),{keyPath:"id"});c.Mb()&&(c.Ca()[n](function(c){this.tc(a,b,c.j(),"btree")},this),this.tc(a,b,c.Db(),"rowid"))};
J.tc=function(a,b,c,d){a[Ka][u](c)||(a.createObjectStore(c,{keyPath:"id"}),a=b[ib](c),(this.Qc?new Bd(a,Uc,Dd):new Be(a,Uc)).put([new Yc(new Xc(d))]))};J.Ab=function(a,b){var c=b.Z().c().map(function(a){return a[h]()});b.ti()[n](function(a){c[w](a)});var d=this.D[ab](c,0==a?"readonly":"readwrite");return new Ce(this.l,d,b,a,this.Qc)};
J.Ce=function(a){function b(){if(0==c[A])return Jc();var a=c[Fa]();return l(a)[D](b)}var c=this.w.Ya().map(function(a){return a[h]()}),d=this.D,g=0,k=L(function(a){return this.Qc?(a=Ad(a[y]),oc(a.gd())[fb](function(a,b){return ea.max(a,b)},0)):a.key},this),l=L(function(b){return new O(function(c,l){var ne;try{ne=(a||d[ab]([b]))[ib](b).openCursor(null,"prev")}catch(Ng){l(Ng);return}za(ne,function(a){(a=a[nb][Ta])&&(g=ea.max(g,k(a)));c(g)});sa(ne,function(){c(g)})},this)},this);return new O(function(a){b()[D](function(){a(g)})})};
pa(J,function(){this.D[Ya]()});J.zc=function(){throw new R("SyntaxError","IndexedDB tables needs to be acquired from transactions");};wa(J,ub());J.Gc=ub();



function Ee(a,b,c){$c[F](this,c,b);this.O=a;0==b&&this.ia[ob]()}M(Ee,$c);Ee[B].W=function(a){return this.O.zc(a)};Ee[B].ba=function(){Ee.Xa.ba[F](this);this.ia[ob]();return this.ia.ua};
function Fe(a){this.w=a;this.I=new P}J=Fe[B];J.Na=function(){this.w.Ya()[n](this.Zi,this);return Jc()};J.zc=function(a){var b=this.I.get(a,null);if(null===b)throw new R("DataError","Table "+a+" does not exist.");return b};J.Ab=function(a,b){return new Ee(this,a,b)};J.Ze=function(a){if(!this.I.s(a)){var b=new xe;this.I.set(a,b);return b}return null};J.Zi=function(a){this.Ze(a[h]());a.Mb()&&(a.Ca()[n](function(a){this.tc(a.j(),"btree")},this),this.tc(a.Db(),"rowid"))};
J.tc=function(a,b){var c=this.Ze(a);null===c||c.put([new Yc(new Xc(b))])};pa(J,ub());wa(J,ub());J.Gc=ub();
function Ge(a){Fe[F](this,a);this.sd=null}M(Ge,Fe);wa(Ge[B],function(a){null===this.sd&&(this.sd=a)});Ge[B].Gc=function(a){null===this.sd||this.sd(a)};
function He(a,b,c){this.gb=a;this.u=b;this.Bb=c}He[B].get=function(a){var b=this.Bb;this.gb.eb("SELECT id, value FROM "+this.u+" "+(0==a[A]?"":"WHERE id IN ("+a[H](",")+")"),[],function(a){for(var d=a[cb][A],g=e(d),k=0;k<d;++k)g[k]=b({id:a[cb][hb](k).id,value:JSON.parse(a[cb][hb](k)[y])});return g});return this.gb.ba()};He[B].put=function(a){if(0==a[A])return Jc();var b="INSERT OR REPLACE INTO "+this.u+"(id, value) VALUES (?, ?)";a[n](function(a){this.gb.eb(b,[a.id(),JSON[eb](a.B())])},this);return Jc()};
ja(He[B],function(a){this.gb.eb("DELETE FROM "+this.u+" "+(0==a[A]?"":"WHERE id IN ("+a[H](",")+")"),[]);return Jc()});
function Ie(a,b,c){$c[F](this,b,c);this.D=a;this.I=new P;this.Rd=[]}M(Ie,$c);Ie[B].W=function(a,b){var c=this.I.get(a,null);null===c&&(c=new He(this,a,b),this.I.set(a,c));return c};Ie[B].eb=function(a,b,c){this.Rd[w]({ck:a,xj:b,transform:c})};
Ie[B].ba=function(){Ie.Xa.ba[F](this);var a,b,c=this.ia[db][q](this.ia),d=function(a,b){this.ia[db](b)}[q](this),g=L(function(c,l){a=l;if(this.Rd[A]){var p=this.Rd[Fa]();b=p.transform;c.executeSql(p.ck,p.xj,g,d)}else p=a,null!=b&&null!=a&&(p=b(a)),this.ia[ob](p)},this);0==this.ng?this.D.readTransaction(g,c):this.D[ab](g,c);return this.ia.ua};
function Je(a,b,c){this.D=c;this.l=a;this.pb=b}Je[B].Yc=function(a){var b={},c;for(c in a)b[c]=Ae(a[c]);return Vc(b)};function Ke(a){a.eb('SELECT tbl_name FROM sqlite_master WHERE type="table"',[],function(a){for(var c=e(a[cb][A]),d=0;d<c[A];++d)c[d]=a[cb][hb](d).tbl_name;return c})};
function Le(a,b,c){this.l=a;this.w=b;this.Zj=c||4194304}J=Le[B];J.bd=function(){return new Id(this.l,[])};J.Na=function(a){if(null==aa.openDatabase)throw new R("NotSupportedError","WebSql not supported by platform.");var b=a||function(){return Jc()};return new O(L(function(a,d){try{var g=aa.openDatabase(this.w[lb](),"",this.w[lb](),this.Zj);if(null!=g)this.D=g,this.hh(b)[D](a,d);else throw new R("NotSupportedError","Unable to open database.");}catch(k){d(k)}},this))};
J.hh=function(a){var b=Nc(),c=new Ie(this.D,this.bd(),1);c.eb("CREATE TABLE IF NOT EXISTS __lf_ver(id INTEGER PRIMARY KEY, v INTEGER)",[]);c.eb("SELECT v FROM __lf_ver WHERE id = 0",[]);c.ba()[D](L(function(c){var g=0;c[cb][A]&&(g=c[cb][hb](0).v);g<this.w[Da]()?this.vj(a,g)[D](b[ob][q](b)):g>this.w[Da]()?b[db](new R("DataError","Attempt to open a newer database with old code")):b[ob]()},this));return b.ua};
J.Ab=function(a,b){if(null!=this.D)return new Ie(this.D,b,a);throw new R("DataError","Attempt to create transaction from uninitialized DB");};pa(J,ub());J.zc=function(){throw new R("SyntaxError","WebSQL tables needs to be acquired from transactions");};J.If=function(){throw new R("NotSupportedError","WebSQL does not support change notification");};wa(J,function(){this.If()});J.Gc=function(){this.If()};
J.vj=function(a,b){var c=Nc();this.Aj()[D](L(function(){a(new Je(this.l,b,this.D))[D](L(function(){return this.Ce()},this))[D](c[ob][q](c))},this),c[db][q](c));return c.ua};
J.Aj=function(){var a=this.w.Ya(),b=new Ie(this.D,this.bd(),1),c=new Ie(this.D,this.bd(),1);b.eb("INSERT OR REPLACE INTO __lf_ver VALUES (0, ?)",[this.w[Da]()]);Ke(b);return b.ba()[D](function(b){b[Ca](function(a){return-1!=a[z](".")})[n](function(a){c.eb("DROP TABLE "+a,[])});var g=b[Ca](function(a){return-1==a[z](".")});a.map(function(a){return a[h]()})[Ca](function(a){return-1==g[z](a)})[n](function(a){c.eb("CREATE TABLE "+a+"(id INTEGER PRIMARY KEY, value TEXT)",[])});return c.ba()})};
J.Ce=function(){var a=0,b=Nc(),c=L(function(b){var c=new Ie(this.D,this.bd(),0);c.eb("SELECT MAX(id) FROM "+b,[]);return c.ba()[D](function(b){b=b[cb][hb](0)[0];a=ea.max(b,a)})},this),d=this.w.Ya().map(function(a){return c(a[h]())});Lc(d)[D](function(){b[ob](a)},function(a){b[db](a)});return b.ua};

function Me(a){this.f=new P;this.jg=new P;this.Ff=a||Number.MAX_VALUE}J=Me[B];J.jd=function(a){var b=this.jg.get(a,null);null===b&&(b=new Q,this.jg.set(a,b));return b};J.set=function(a,b){var c=this.jd(a);b[n](L(function(a){this.f.set(a.id(),a);c.add(a.id())},this));this.f.V()};J.get=function(a){return a.map(L(function(a){return this.f.get(a,null)},this))};
J.Ma=function(a,b,c){var d=[],g=ea.min(b,c),k=ea.max(b,c);a=this.jd(a);if(a.V()<k-g)a.c()[n](function(a){a>=g&&a<=k&&(a=this.f.get(a),N(null!=a,"Inconsistent cache"),d[w](a))},this);else for(b=g;b<=k;++b)a[u](b)&&(c=this.f.get(b),N(null!=c,"Inconsistent cache"),d[w](c));return d};ja(J,function(a,b){var c=this.jd(a);b[n](function(a){this.f[m](a);c[m](a)},this)});J.V=function(a){return null!=a?this.jd(a).V():this.f.V()};
function Ne(a,b,c,d){a=b?a.reverse():a;if(null==c&&null==d)return a;c=ea.min(yb(c)?c:a[A],a[A]);if(0==c)return[];d=ea.min(d||0,a[A]);return a[x](d,d+c)};
function Oe(a,b,c,d){this.u=a;this.L=b;this.Ge=c;if(d){a=511;a*=a*a;if(d[A]>=a)throw new R("TooManyRowsError","B-Tree implementation supports at most "+a+" rows.");d=Pe(this,d);this.oa=d=Qe(d)}else this[Na]()}var Re=[];J=Oe[B];ia(J,I("u"));f(J,function(){return this.oa[r]()});J.add=function(a,b){this.oa=this.oa.lb(a,b)};J.set=function(a,b){this.oa=this.oa.lb(a,b,!0)};ja(J,function(a,b){this.oa=this.oa[m](a,b)});J.get=function(a){return this.oa.get(a)};
J.Xc=function(a){return null!=a?this.Ma([a])[A]:this.Ma()[A]};J.Ma=function(a,b,c,d){var g=this.oa.ed().b[0];if(!yb(g)||0==c)return Re;var k=(c||0)+(d||0),k=0<k&&!b?k:Number.POSITIVE_INFINITY,l=[];(yb(a)?this.L.gg(a):[this.L.Zd()])[n](function(a){for(var b=this.L.yd(a),b=this.L.ne(a)?g:b[0],b=this.oa.gf(b),c=0;null!=b&&l[A]<k;)0!=b.Ma(a,l)?c=0:c++,b=2==c?null:b[Va]()},this);return Ne(l,b,c,d)};la(J,function(){this.oa=Se(this)});J.s=function(a){return this.oa.s(a)};
J.min=function(){return this.Fc(L(this.L.min,this.L))};J.max=function(){return this.Fc(L(this.L.max,this.L))};J.Fc=function(a){var b=this.oa.ed(),c=this.oa.mf();if(0==b.b[A]&&0==c.b[A])return[null,null];var d=b.b[0],b=b.P[0],g=c.b[c.b[A]-1],c=c.P[c.b[A]-1];return 1==a(d,g)?[d,this.Ge?[b]:b]:[g,this.Ge?[c]:c]};J.Cc=I("Ge");J.sc=I("L");J.se=function(a,b){return null!=a?-1==this.L[Sa](a,b):!1};J.Fa=function(a,b){return null!=a?0==this.L[Sa](a,b):!1};
J.Wa=function(){for(var a=[],b=this.oa.ed();b;)a[w](new Sc(b.ra,[b.b,b.P])),b=b.ta;return a};function Te(a,b,c,d){a=new Oe(b,a,c);d=Ue(d,a);a.oa=d;return a}function Ve(a,b){this.ra=a;this.U=b;this.cb=0;this.ta=this.nb=this.F=null;this.b=[];this.P=[];this.i=[]}function Se(a){return new Ve(Tc++,a)}J=Ve[B];J.aa=function(){return 0==this.cb};J.yf=function(){return null==this.F};oa(J,I("ta"));
function We(a){function b(a){return null!=a?a.ra[r]():"_"}var c=a.ra+"["+a.b[H]("|")+"]",d=a.i.map(function(a){return a.ra})[H]("|"),g=a.P[H]("/"),k=b(a.nb)+"{",k=a.aa()?k+g:k+d,k=k+"}"+b(a.F);a.ta&&(a=We(a.ta),c=c+"  "+a[0],k=k+"  "+a[1]);return[c,k]}f(J,function(){var a="",b=We(this),a=a+(b[0]+"\n"+b[1]+"\n");this.i[A]&&(a+=this.i[0][r]());return a});J.ed=function(){return this.aa()?this:this.i[0].ed()};J.mf=function(){return this.aa()?this:this.i[this.i[A]-1].mf()};
function Xe(a,b){b&&(b.nb=a);a&&(a.ta=b)}function Pe(a,b){for(var c=b[A],d=0,g=Se(a),k=g;0<c;){var l=768<=c?511:257<=c&&511>=c?c:257,p=b[x](d,d+l);g.b=p.map(function(a){return a.key});g.P=p.map(function(a){return a[y]});d+=l;c-=l;0<c&&(l=Se(g.U),Xe(g,l),g=l)}return k}function Ye(a){var b=a[0],c=Se(b.U);c.cb=b.cb+1;c.i=a;for(b=0;b<a[A];++b)a[b].F=c,0<b&&c.b[w](a[b].b[0]);return c}
function Qe(a){var b=a,c=[];do c[w](b),b=b.ta;while(b);if(512>=c[A])b=Ye(c);else{var d=c[A],g=0,b=Se(a.U);for(b.cb=a.cb+2;0<d;){a=768<=d?511:257<=d&&511>=d?d:257;var k=c[x](g,g+a),l=Ye(k);l.F=b;b.i[A]&&(b.b[w](k[0].b[0]),Xe(b.i[b.i[A]-1],l));b.i[w](l);g+=a;d-=a}}return b}J.get=function(a){var b=this.Kc(a);if(this.aa()){var c=Re;this.U.Fa(this.b[b],a)&&(c=c[Ja](this.P[b]));return c}b=this.U.Fa(this.b[b],a)?b+1:b;return this.i[b].get(a)};
J.s=function(a){var b=this.Kc(a);return this.U.Fa(this.b[b],a)?!0:this.aa()?!1:this.i[b].s(a)};ja(J,function(a,b){this.bf(a,-1,b);if(this.yf()){var c=this;1==this.i[A]&&(c=this.i[0],c.F=null);return c}return this});function Ze(a){return a.aa()?a.b[0]:Ze(a.i[0])}J.$c=function(){this.b=[];for(var a=1;a<this.i[A];++a)this.b[w](Ze(this.i[a]))};
J.bf=function(a,b,c){var d=this.Kc(a);if(!this.aa()){var g=this.U.Fa(this.b[d],a)?d+1:d;if(this.i[g].bf(a,g,c))this.$c();else return!1}else if(!this.U.Fa(this.b[d],a))return!1;if(this.b[A]>d&&this.U.Fa(this.b[d],a)){if(yb(c)&&!this.U.Cc()&&this.aa()&&(a=this.P[d],c=gc(a,hc,!1,c),0<=c&&ac(a,c),this.P[d][A]))return!1;this.b[G](d,1);this.aa()&&this.P[G](d,1)}256>this.b[A]&&!this.yf()&&(this.dk()||this.oj(b));return!0};
J.dk=function(){var a=null,b,c,d;if(this.ta&&256<this.ta.b[A])a=this.ta,c=b=0,d=this.b[A]+1;else if(this.nb&&256<this.nb.b[A])a=this.nb,b=this.nb.b[A]-1,c=this.aa()?b:b+1,d=0;else return!1;this.b[G](d,0,a.b[b]);a.b[G](b,1);b=this.aa()?this.P:this.i;var g=null;this.aa()?g=a.P:(g=a.i,g[c].F=this);b[G](d,0,g[c]);g[G](c,1);a.aa()||(a.$c(),this.$c());return!0};
J.oj=function(a){var b,c,d;this.ta&&511>this.ta.b[A]?(b=this.ta,d=c=0):this.nb&&(b=this.nb,c=b.b[A],d=b.aa()?b.P[A]:b.i[A]);c=[c,0][Ja](this.b);e[B][G][v](b.b,c);c=null;this.aa()?c=this.P:(c=this.i,c[n](function(a){a.F=b}));c=[d,0][Ja](c);e[B][G][v](b.aa()?b.P:b.i,c);Xe(this.nb,this.ta);b.aa()||b.$c();-1!=a&&(this.F.b[G](a,1),this.F.i[G](a,1))};
J.lb=function(a,b,c){var d=this.Kc(a);if(this.aa()){if(this.U.Fa(this.b[d],a)){if(c)return this.P[d]=this.U.Cc()?b:[b],this;if(this.U.Cc())throw new R("ConstraintError","Duplicate key not allowed");if(this.P[d])return ic(this.P[d],b),this;this.P[d]=[b]}this.b[G](d,0,a);this.P[G](d,0,this.U.Cc()?b:[b]);return 512==this.b[A]?this.ak():this}d=this.U.Fa(this.b[d],a)?d+1:d;a=this.i[d].lb(a,b,c);a.aa()||1!=a.b[A]||(this.b[G](d,0,a.b[0]),a.i[1].F=this,a.i[0].F=this,this.i[G](d,1,a.i[1]),this.i[G](d,0,a.i[0]));
return 512==this.b[A]?this.$j():this};J.ak=function(){var a=Se(this.U),b=Se(this.U);b.cb=1;b.b=[this.b[256]];b.i=[this,a];b.F=this.F;this.F=b;a.b=this.b[G](256);a.P=this.P[G](256);a.F=b;Xe(a,this.ta);Xe(this,a);return b};J.$j=function(){var a=Se(this.U),b=Se(this.U);a.F=this.F;a.cb=this.cb+1;a.b=[this.b[256]];a.i=[this,b];this.b[G](256,1);b.F=a;b.cb=this.cb;b.b=this.b[G](256);b.i=this.i[G](257);b.i[n](function(a){a.F=b});this.F=a;Xe(b,this.ta);Xe(this,b);return a};
J.Kc=function(a){for(var b=0,c=this.b[A];b<c;){var d=b+c>>1;this.U.se(this.b[d],a)?b=d+1:c=d}return b};J.gf=function(a){if(!this.aa()){var b=this.Kc(a);this.U.Fa(this.b[b],a)&&b++;return this.i[b].gf(a)}return this};
J.Ma=function(a,b){var c=-1,d=this.b[A]-1,g=this.U.sc(),k=L(function(b){for(;b<this.b[A];++b){var k=g.cc(this.b[b],a);if(-1!=c){if(!k){d=b-1;break}}else k&&(c=b)}},this);g.cc(this.b[0],a)?c=0:k(1);if(-1==c)return 0;g.cc(this.b[d],a)||k(c);return d==this.b[A]-1?this.Oe(b,this.P[x](c)):d>=c?this.Oe(b,this.P[x](c,d+1)):0};J.Oe=function(a,b){var c=this.U.Cc()?b:kc(b);a[w][v](a,c);return c[A]};
function Ue(a,b){for(var c=a.map(function(a){var c=new Ve(a.id(),b);c.b=a.B()[0];c.P=a.B()[1];return c}),d=0;d<c[A]-1;++d)Xe(c[d],c[d+1]);return 1<c[A]?Qe(c[0]):c[0]};
function $e(a){if(1==a.h[A])return new af(a.h[0].mb);a=a.h.map(function(a){return a.mb});return new bf(a)}function af(a){this.Uc=0==a?cf:df;this.te=0==a?function(a){return null!=a?a.reverse():null}:function(a){return a||null};this.Mf=0==a?ef:ff}M(af,Ed);function df(a,b){return a>b?1:a<b?-1:0}function cf(a,b){return df(b,a)}function ff(a,b){return Nd(a,b)}function ef(a,b){return Nd(b,a)}J=af[B];
J.Sd=function(a,b){var c=this.te(b),d=[null===c.g,null===c.o];if(!d[0]){var g=this.Uc(a,c.g);d[0]=c.X?1==g:-1!=g}d[1]||(g=this.Uc(a,c.o),d[1]=c.ca?-1==g:1!=g);return d};J.compare=function(a,b){return this.Uc(a,b)};J.min=function(a,b){return a<b?1:a==b?0:-1};J.max=function(a,b){return a>b?1:a==b?0:-1};J.cc=function(a,b){var c=this.Sd(a,b);return c[0]&&c[1]};J.Zd=function(){return Md()};J.Lf=function(a,b){return this.Mf(a,b)};
J.gg=function(a){return a[Ca](function(a){return null!==a})[qb](L(function(a,c){return this.Mf(a,c)},this))};J.ne=function(a){return Cb(this.te(a).g)};J.yd=function(a){a=this.te(a);return[a.g,a.o]};f(J,function(){return this.Uc==cf?"SimpleComparator_DESC":"SimpleComparator_ASC"});function bf(a){this.wa=a.map(function(a){return new af(a)})}M(bf,Ed);J=bf[B];J.Xd=function(a,b,c){for(var d=0,g=0;g<this.wa[A]&&0==d;++g)d=c(this.wa[g],a[g],b[g]);return d};
J.compare=function(a,b){return this.Xd(a,b,function(a,b,g){return a[Sa](b,g)})};J.min=function(a,b){return this.Xd(a,b,function(a,b,g){return a.min(b,g)})};J.max=function(a,b){return this.Xd(a,b,function(a,b,g){return a.max(b,g)})};J.Sd=function(a,b){for(var c=[!0,!0],d=0;d<this.wa[A]&&(c[0]||c[1]);++d){var g=this.wa[d].Sd(a[d],b[d]);c[0]=c[0]&&g[0];c[1]=c[1]&&g[1]}return c};J.cc=function(a,b){for(var c=!0,d=0;d<this.wa[A]&&c;++d)c=this.wa[d].cc(a[d],b[d]);return c};J.Zd=function(){return this.wa.map(function(a){return a.Zd()})};
J.gg=function(a){var b=a[Ca](function(a){return a[rb](Db)});a=e(this.wa[A]);for(var c=0;c<a[A];c++)a[c]=b.map(function(a){return a[c]});a[n](function(a,b){a[qb](L(function(a,c){return this.wa[b].Lf(a,c)},this))},this);b=e(b[A]);for(c=0;c<b[A];c++)b[c]=a.map(function(a){return a[c]});return b[qb](L(function(a,b){for(var c=0,l=0;l<this.wa[A]&&0==c;++l)c=this.wa[l].Lf(a[l],b[l]);return c},this))};J.ne=function(a){return this.wa[0].ne(a[0])};
J.yd=function(a){var b=a.map(function(a,b){return this.wa[b].yd(a)[0]},this);a=a.map(function(a,b){return this.wa[b].yd(a)[1]},this);return[b,a]};
function gf(a){this.sa=a;this.Ra=new Q}J=gf[B];ia(J,function(){return this.sa[h]()});J.add=function(a,b){null===a?this.Ra.add(b):this.sa.add(a,b)};J.set=function(a,b){null===a?(this.Ra[Na](),this.Ra.add(b)):this.sa.set(a,b)};ja(J,function(a,b){null===a?b?this.Ra[m](b):this.Ra[Na]():this.sa[m](a,b)});J.get=function(a){return null===a?this.Ra.c():this.sa.get(a)};J.Xc=function(a){return this.sa.Xc(a)};J.Ma=function(a,b,c,d){b=this.sa.Ma(a,b,c,d);return null!=a?b:b[Ja](this.Ra.c())};
la(J,function(){this.Ra[Na]();this.sa[Na]()});J.s=function(a){return null===a?!this.Ra.ya():this.sa.s(a)};J.min=function(){return this.sa.min()};J.max=function(){return this.sa.max()};J.Wa=function(){return[new Sc(-2,this.Ra.c())][Ja](this.sa.Wa())};J.sc=function(){return this.sa.sc()};
function hf(a){this.u=a;this.ob=new Q;this.L=new af(1)}J=hf[B];ia(J,I("u"));J.add=function(a){if("number"!=typeof a)throw new R("DataError","Row id must be numbers");this.ob.add(a)};J.set=function(a,b){this.add(a,b)};ja(J,function(a){this.ob[m](a)});J.get=function(a){return this.s(a)?[a]:[]};J.min=function(){return this.Fc(L(this.L.min,this.L))};J.max=function(){return this.Fc(L(this.L.max,this.L))};
J.Fc=function(a){if(this.ob.ya())return[null,null];var b=this.ob.c()[fb](L(function(b,d){return null===b||1==a(d,b)?d:b},this),null);return[b,[b]]};J.Xc=function(){return this.ob.V()};J.Ma=function(a,b,c,d){var g=a||[Md()];a=this.ob.c()[Ca](function(a){return g[pb](function(b){return this.L.cc(a,b)},this)},this);return Ne(a,b,c,d)};la(J,function(){this.ob[Na]()});J.s=function(a){return this.ob[u](a)};J.Wa=function(){return[new Sc(0,this.ob.c())]};J.sc=I("L");
function jf(a,b){var c=new hf(a);b[0].B()[n](function(a){c.add(a,a)});return c};
function kf(a){this.l=a;this.rb=a.m(nd);this.N=a.m(pd);this.la=a.m(od)}J=kf[B];J.Na=function(a){var b=a.Ya(),c=L(function(){if(0==b[A])return Jc();var a=b[Fa]();return(a.Mb()?this.Th(a):this.Uh(a))[D](c)},this);return c()};J.Uh=function(a){var b=new Id(this.l,[a]);return this.rb.Ab(0,b).W(a[h](),L(a.Yb,a)).get([])[D](L(function(b){this.la.set(a[h](),b);this.Hj(a,b)},this))};J.Hj=function(a,b){var c=this.N.Ji(a[h]());b[n](function(a){c[n](function(b){var c=a.Dc(b[h]());b.add(c,a.id())})})};
J.Th=function(a){var b=new Id(this.l,[a]),c=this.rb.Ab(0,b),b=c.W(a[h](),a.Yb).get([])[D](L(function(b){this.la.set(a[h](),b)},this)),d=a.Ca().map(function(a){return this.Ij(a,c)},this)[Ja](this.Jj(a,c));return Lc(d[Ja](b))};
J.Ij=function(a,b){var c=b.W(a.j(),Uc,1),d=$e(a);return c.get([])[D](L(function(b){N("btree"==b[0].B().type);if(1<b[A]){if(a.qf()){var c=Te[q](void 0,d,a.j(),a.nd),l=b[x](1),p=-1;for(b=0;b<l[A];++b)if(-2==l[b].id()){p=b;break}if(-1==p)throw new R("DataError","Data corruption detected");b=l[p].B();l=l[x](0);l[G](p,1);c=c(l);c=new gf(c);c.Ra[gb](b)}else c=Te(d,a.j(),a.nd,b[x](1));this.N.set(c)}},this))};
J.Jj=function(a,b){return b.W(a.Db(),Uc,1).get([])[D](L(function(b){N("rowid"==b[0].B().type);1<b[A]&&(b=jf(a.Db(),b[x](1)),this.N.set(b))},this))};


function mf(){this.O=new P}mf[B].Na=function(a){a.Ya()[n](function(a){var c=a.Db();if(null===this.get(c)){var d=new hf(c);this.O.set(c,d)}a.Ca()[n](function(a){this.O.set(a.j(),nf(a))},this)},this);return Jc()};function nf(a){var b=$e(a),b=new Oe(a.j(),b,a.nd);return a.qf()?new gf(b):b}mf[B].get=function(a){return this.O.get(a,null)};mf[B].set=function(a){return this.O.set(a[h](),a)};mf[B].Ji=function(a){var b=[],c=a+".";this.O.G()[n](function(a){0==a[z](c)&&b[w](this.O.get(a))},this);return b};
function of(a){this.Sa=[];yb(a)&&this.add(a)}J=of[B];f(J,function(){return this.Sa.map(function(a){return a[r]()})[H](",")});J.s=function(a){return this.Sa[pb](function(b){return b[u](a)})};J.c=I("Sa");
J.add=function(a){if(0!=a[A])if(a=this.Sa[Ja](a),1==a[A])this.Sa=a;else{a[qb](Nd);for(var b=[],c=a[0],d=1;d<a[A];++d)if(c.Nf(a[d])){var g=a[d],k=Md();if(null!==c.g&&null!==g.g){var l=Ld(c.g,g.g,!0);1!=l?(k.g=c.g,k.X=0!=l?c.X:c.X&&g.X):(k.g=g.g,k.X=g.X)}null!==c.o&&null!==g.o&&(l=Ld(c.o,g.o,!1),-1!=l?(k.o=c.o,k.ca=0!=l?c.ca:c.ca&&g.ca):(k.o=g.o,k.ca=g.ca));c=k}else b[w](c),c=a[d];b[w](c);this.Sa=b}};
J.uc=function(a){return this.Sa[A]==a.Sa[A]?0==this.Sa[A]||this.Sa[rb](function(b,c){return b.uc(a.Sa[c])}):!1};function pf(a,b){var c=[];a.c().map(function(a){return b.c().map(function(b){var c;if(a.Nf(b)){c=Md();var l=Ld(a.g,b.g,!0),l=0==l?a.X?a:b:-1!=l?a:b;c.g=l.g;c.X=l.X;null===a.o||null===b.o?b=null===a.o?b:a:(l=Ld(a.o,b.o,!1),b=0==l?a.ca?a:b:-1==l?a:b);c.o=b.o;c.ca=b.ca}else c=null;return c})})[n](function(a){c=c[Ja](a)});return new of(c[Ca](function(a){return null!==a}))};
function qf(a,b){var c=[],d=null,g=null;a.jc(function(a){var l=b(a);null==a[Ea]()?g=l:d.ea(l);var p=a[Ea]();null!==p&&p.qa()==d.qa()&&(p=c[z](d),-1!=p&&c[G](p,1));1<a.qa()&&c[w](l);d=a.vf()?c[c[A]-1]:l});return g}function rf(a){return sf(a,function(a){return a.vf()})}function tf(a){var b=a[Ea](),c=0;null!==b&&(c=b.Y()[z](a),b[mb](a));var d=a.Y()[x]();d[n](function(d,k){a[mb](d);null===b||b.lc(d,c+k)});return{parent:b,children:d}}
function uf(a,b){a.Y()[x]()[n](function(c){a[mb](c);b.ea(c)});a.ea(b)}function vf(a){N(1==a.qa());var b=a.ib(0);N(1==b.qa());tf(a);uf(b,a);return b}function wf(a,b,c){N(1==a.qa());var d=a.ib(0);N(1<d.qa());var g=d.Y()[x]();if(!g[pb](function(a){return b(a)}))return a;tf(a);g[n](function(g,l){if(b(g)){var p=c(a);d.Ad(l);p.ea(g);d.lc(p,l)}});return d}function xf(a,b,c,d){var g=a[Ea]();null!==g&&(a=g.Y()[z](a),g.Ad(a),g.lc(c,a));b.Y()[x]()[n](function(a){b[mb](a);d.ea(a)});return c}
function sf(a,b,c){function d(a){b(a)&&g[w](a);null!=c&&c(a)||a.Y()[n](d)}var g=[];d(a);return g}function yf(a,b){var c=b||function(a){return a[r]()+"\n"},d="";a.jc(function(a){for(var b=0;b<a.ri();b++)d+="-";d+=c(a)});return d};

function zf(a){ie[F](this);this.Jb=a;this.Pa=!1}M(zf,ie);J=zf[B];J.zb=function(){return qf(this,function(a){if(a instanceof zf){var b=new zf(a.Jb);b.Pa=a.Pa;b.Ee(a.ga());return b}return a.zb()}[q](this))};J.sb=function(a){var b=a||[];this.jc(function(a){a!=this&&a.sb(b)}[q](this));return(new Q(b)).c()};J.Dd=function(a){this.Pa!=a&&(this.Pa=a,this.Jb="and"==this.Jb?"or":"and",this.Y()[n](function(b){return b.Dd(a)}))};J.eval=function(a){var b=this.Y().map(function(b){return b.eval(a)});return this.kh(b)};
J.kh=function(a){return"and"==this.Jb?Sd(a):Td(a)};f(J,function(){return"combined_pred_"+this.Jb[r]()});function Af(a,b){return a===b?0!==a||1/a===1/b:a!==a&&b!==b};function Bf(){this[Na]()}var Cf=ba[B][Qa],Df=ba[B][Xa];J=Bf[B];J.set=function(a,b){this.Oc(a);var c=!this.Bc(a);this.f[a]=b;if("__proto__"==a||!Ef&&!Cf[F](this.f,a)){delete this.f[a];var d=Vb(this.wb,a);if(c=0>d)d=this.wb[A];this.wb[d]=a;this.Bd[d]=b}c&&this.R++};J.get=function(a,b){this.Oc(a);if(this.Bc(a))return this.f[a];var c=Vb(this.wb,a);return 0<=c?this.Bd[c]:b};
ja(J,function(a){this.Oc(a);if(this.Bc(a))return this.R--,delete this.f[a],!0;a=Vb(this.wb,a);return 0<=a?(this.R--,ac(this.wb,a),ac(this.Bd,a),!0):!1});J.addAll=function(a){Wb(a.G(),function(b){this.set(b,a.get(b))},this)};J.ya=function(){return!this.R};J.V=I("R");J.s=function(a){this.Oc(a);return this.Bc(a)||0<=Vb(this.wb,a)};J.Vc=function(a){return mc(this.f,function(b,c){return this.Bc(c)&&Af(b,a)},this)||0<=Vb(this.Bd,a)};
J.G=function(){var a;if(Ff)a=cc(ba.keys(this.f));else{a=[];for(var b in this.f)Df[F](this.f,b)&&a[w](b)}dc(a,this.wb);return a};J.c=function(){for(var a=[],b=this.G(),c=0;c<b[A];c++)a[w](this.get(b[c]));return a};J.getEntries=function(){for(var a=[],b=this.G(),c=0;c<b[A];c++){var d=b[c];a[w]([d,this.get(d)])}return a};la(J,function(){this.f=Ef?ba[Ra](null):{};this.wb=[];this.Bd=[];this.R=0});qa(J,function(){var a=new Bf;a[gb](this);return a});
J.Bc=function(a){return"__proto__"==a?!1:Ef?a in this.f:Df[F](this.f,a)};J.Oc=function(a){N(Fb(a),"key must be a string.")};var Ef=!!ba[Ra],Ff=!!ba.keys;function Gf(){this[Na]()}J=Gf[B];J.R=0;la(J,function(){this.R=0;this.f=new Bf});qa(J,function(){var a=new Gf;a.yg(this);return a});J.add=function(a,b){var c=this.f.get(a);c||this.f.set(a,c=[]);c[w](b);this.R++};J.yg=function(a){Wb(a.getEntries(),function(a){this.add(a[0],a[1])},this)};J.get=function(a){return(a=this.f.get(a))?cc(a):[]};ja(J,function(a,b){var c=this.f.get(a);if(!c)return!1;var d=bc(c,function(a){return Af(b,a)});d&&(this.R--,0==c[A]&&this.f[m](a));return d});
J.Vf=function(a){var b=this.f.get(a);return this.f[m](a)?(this.R-=b[A],!0):!1};J.ya=function(){return!this.R};J.V=I("R");J.s=function(a){return this.f.s(a)};J.Vc=function(a){return Zb(this.f.c(),function(b){return Zb(b,function(b){return Af(b,a)})})};J.G=function(){return this.f.G()};J.c=function(){return kc(this.f.c())};J.getEntries=function(){for(var a=this.G(),b=[],c=0;c<a[A];c++)for(var d=a[c],g=this.get(d),k=0;k<g[A];k++)b[w]([d,g[k]]);return b};
function Hf(a,b,c){ie[F](this);this.Ga=a;this.Ua=b;this.S=c;this.Zc=ae.ce().be(this.Ga.$(),this.S)}M(Hf,ie);J=Hf[B];J.zb=function(){var a=new Hf(this.Ga,this.Ua,this.S);a.Ee(this.ga());return a};J.sb=function(a){return null!=a?(a[w](this.Ga),a[w](this.Ua),a):[this.Ga,this.Ua]};J.eval=function(a){var b=a[E][Ca](function(a){var b=a.M(this.Ga);a=a.M(this.Ua);return this.Zc(b,a)},this);return new Od(b,a.T())};f(J,function(){return"join_pred("+this.Ga.j()+", "+this.Ua.j()+")"});
J.Pe=function(a){return-1!=a.T()[z](this.Ga.W().xa())};J.Gg=function(a){return-1!=a.T()[z](this.Ua.W().xa())};J.yh=function(a,b){var c=null,d=null;this.Pe(a)?(this.Se(a,b),c=a,d=b):(this.Se(b,a),c=b,d=a);return[c,d]};J.Se=function(a,b){N(this.Pe(a),"Mismatch between join predicate left operand and right relation.");N(this.Gg(b),"Mismatch between join predicate right operand and right relation.")};J.Gh=function(a,b){var c=this.yh(a,b),d=c[0],c=c[1];return"eq"==this.S?this.Hh(d,c):this.Ih(d,c)};
J.Ih=function(a,b){for(var c=[],d=a.T(),g=b.T(),k=0;k<a[E][A];k++)for(var l=0;l<b[E][A];l++)if(this.Zc(a[E][k].M(this.Ga),b[E][l].M(this.Ua))){var p=Xd(a[E][k],d,b[E][l],g);c[w](p)}d=a.T()[Ja](b.T());return new Od(c,d)};
J.Hh=function(a,b){var c=a,d=b,g=this.Ga,k=this.Ua;a[E][A]>b[E][A]&&(c=b,d=a,g=this.Ua,k=this.Ga);var l=new Gf,p=[];c[E][n](function(a){var b=String(a.M(g));l.add(b,a)});var C=c.T(),Ga=d.T();d[E][n](function(a){var b=String(a.M(k));l.s(b)&&l.get(b)[n](function(b){b=Xd(a,Ga,b,C);p[w](b)})});c=a.T()[Ja](b.T());return new Od(p,c)};
function If(a,b,c){return null===b?new ke(a,b,c):yb(b.j)?new Hf(a,b,c):new ke(a,b,c)};
var Jf={};K("lf.schema.DataStoreType",Jf,void 0);Jf.INDEXED_DB=0;Jf.MEMORY=1;Jf.LOCAL_STORAGE=2;Jf.FIREBASE=3;Jf.WEB_SQL=4;Jf.OBSERVABLE_STORE=5;function Kf(a,b,c,d){this.ig=a;xa(this,b);this.nd=c;this.h=d}Kf[B].j=function(){return this.ig+"."+this[lb]};Kf[B].qf=function(){return this.h[pb](function(a){return a.Va.dc()})};function Lf(a,b,c,d){this.u=a;this.ma=c;this.H=b;this.ud=d;this.$a=null}K("lf.schema.Table",Lf,void 0);ia(Lf[B],I("u"));Lf[B].La=I("$a");Lf[B].xa=function(){return this.$a||this.u};
Lf[B].nc=function(a){var b=new this.constructor(this.u);b.$a=a;return b};Lf[B].as=Lf[B].nc;Lf[B].createRow=Lf[B].Yc;Lf[B].deserializeRow=Lf[B].Yb;Lf[B].Ca=I("ma");Lf[B].sb=I("H");Lf[B].getConstraint=Lf[B].bc;Lf[B].Mb=I("ud");Lf[B].Db=function(){return this.u+".#"};
function S(a,b){ra(this,a);this.Tb=b;this.$a=null}J=S[B];ia(J,function(){return this.Tb+"("+this[bb][h]()+")"});J.j=function(){return this.Tb+"("+this[bb].j()+")"};J.W=function(){return this[bb].W()};f(J,function(){return this.j()});J.$=function(){return this[bb].$()};J.La=I("$a");J.Ca=function(){return[]};J.dc=wb(!1);J.nc=function(a){this.$a=a;return this};K("lf.fn.AggregatedColumn.prototype.as",S[B].nc,void 0);S[B].ff=function(){for(var a=[this],b=this;b instanceof S;)a[w](b[bb]),b=b[bb];return a};
function Mf(a){this.$a=a||null;this.C=new Lf("#UnknownTable",[],[],!1)}J=Mf[B];ia(J,wb("*"));J.j=function(){return this[h]()};f(J,function(){return this.j()});J.W=I("C");J.$=wb(4);J.La=I("$a");J.Ca=function(){return[]};J.dc=wb(!1);
K("lf.fn.avg",function(a){return new S(a,"AVG")},void 0);K("lf.fn.count",function(a){return new S(a||new Mf,"COUNT")},void 0);function Nf(a){return new S(a,"DISTINCT")}K("lf.fn.distinct",Nf,void 0);K("lf.fn.max",function(a){return new S(a,"MAX")},void 0);K("lf.fn.min",function(a){return new S(a,"MIN")},void 0);K("lf.fn.stddev",function(a){return new S(a,"STDDEV")},void 0);K("lf.fn.sum",function(a){return new S(a,"SUM")},void 0);K("lf.fn.geomean",function(a){return new S(a,"GEOMEAN")},void 0);
function T(a,b){ge[F](this,"","");this.Qh=b;this.Jf=a}M(T,ge);J=T[B];J.Z=wb(null);ha(J,function(a,b){switch(this.Qh){case 1:return this.Lh(a,b);case 0:return this.Kh(a,b);default:return this.Nh(a,b)}});f(J,wb("dummy_node"));J.Mc=function(){return this[r]()};J.Qe=function(a){N(-1==this.Jf||a[A]==this.Jf)};J.Nh=function(a,b){return new O(L(function(c){c(this.fa(a,[],b))},this))};J.Lh=function(a,b){return this.ib(0)[Ha](a,b)[D](L(function(c){this.Qe(c);return this.fa(a,c,b)},this))};
J.Kh=function(a,b){var c=this.Y().map(function(c){return c[Ha](a,b)});return Lc(c)[D](L(function(c){var g=[];c[n](function(a){for(var b=0;b<a[A];++b)g[w](a[b])});this.Qe(g);return this.fa(a,g,b)},this))};
function Of(a){T[F](this,-1,1);this.Me=a}M(Of,T);f(Of[B],function(){return"aggregation("+this.Me.map(function(a){return a.j()})[r]()+")"});Of[B].fa=function(a,b){b[n](function(a){(new Pf(a,this.Me)).Tg()},this);return b};function Pf(a,b){this.Aa=a;this.H=b}
Pf[B].Tg=function(){this.H[n](function(a){a=a.ff().reverse();for(var b=1;b<a[A];b++){var c=a[b],d=c.ff()[x](-1)[0],g=this.ui(c),k=null;switch(c.Tb){case "MIN":k=Qf(g,d);break;case "MAX":k=Rf(g,d);break;case "DISTINCT":k=Sf(g,d);break;case "COUNT":k=g[E][A];break;case "SUM":k=Tf(g,d);break;case "AVG":0<g[E][A]&&(k=Tf(g,d)/g[E][A]);break;case "GEOMEAN":k=Uf(g,d);break;default:k=Vf(g,d)}this.Aa.Uj(c,k)}},this)};Pf[B].ui=function(a){return a[bb]instanceof S?this.Aa.ac(a[bb]):this.Aa};
function Qf(a,b){var c=null;a[E][n](function(a){a=a.M(b);if(null===c||a<c)c=a});return c}function Rf(a,b){var c=null;a[E][n](function(a){a=a.M(b);if(null===c||a>c)c=a});return c}function Tf(a,b){return a[E][fb](function(a,d){return a+d.M(b)},0)}function Vf(a,b){var c=a[E].map(function(a){return a.M(b)});return ed[v](null,c)}function Uf(a,b){var c=0,d=a[E][fb](function(a,d){var l=d.M(b);return 0!=l?(c++,a+ea.log(l)):a},0);return 0==c?null:ea.pow(ea.E,d/c)}
function Sf(a,b){var c=new P;a[E][n](function(a){var g=a.M(b);c.set(g,a)});return new Od(c.c(),a.T())};
function U(){ge[F](this,"","")}M(U,ge);function Wf(a,b){U[F](this);na(this,a);ka(this,b)}M(Wf,U);function Xf(a,b){Wf[F](this,a,b)}M(Xf,Wf);function Yf(a){U[F](this);na(this,a)}M(Yf,U);f(Yf[B],function(){return"delete("+this[t][h]()+")"});function Zf(a,b){U[F](this);na(this,a);this.He=b}M(Zf,U);f(Zf[B],function(){var a=[];this.He&&(a=this.He.map(function(a){return a.K[h]()},this));return"update("+this[t][h]()+", ["+a[H](",")+"])"});function $f(a){U[F](this);this.za=a}M($f,U);
f($f[B],function(){return"select("+this.za[r]()+")"});function ag(a){U[F](this);na(this,a)}M(ag,U);f(ag[B],function(){var a="table_access("+this[t][h]();null===this[t].La()||(a+=" as "+this[t].La());return a+")"});function bg(){U[F](this)}M(bg,U);f(bg[B],wb("cross_product"));function cg(a,b){U[F](this);this.h=a;this.Fb=b}M(cg,U);f(cg[B],function(){var a="project("+this.h[r]();if(null!==this.Fb)var b=this.Fb.map(function(a){return a.j()})[H](", "),a=a+(", groupBy("+b+")");return a+")"});
function dg(a){U[F](this);this.J=a}M(dg,U);f(dg[B],function(){return"order_by("+pe(this.J)+")"});function eg(a){U[F](this);this.h=a}M(eg,U);f(eg[B],function(){return"aggregation("+this.h[r]()+")"});function fg(a){U[F](this);this.h=a}M(fg,U);f(fg[B],function(){return"group_by("+this.h[r]()+")"});function gg(a){U[F](this);this.ka=a}M(gg,U);f(gg[B],function(){return"limit("+this.ka+")"});function hg(a){U[F](this);this.ja=a}M(hg,U);f(hg[B],function(){return"skip("+this.ja+")"});
function ig(a){U[F](this);this.za=a}M(ig,U);f(ig[B],function(){return"join("+this.za[r]()+")"});
function jg(){};
function kg(){}M(kg,jg);kg[B].ub=function(a){this.da=a;this.Ka(this.da);return this.da};kg[B].Ka=function(a){if(a instanceof $f){N(1==a.qa(),"SelectNode must have exactly one child.");var b=this.Ue(a.za),b=this.sh(b);xf(a,a,b[0],b[1]);a==this.da&&(this.da=b[0]);a=b[0]}a.Y()[n](function(a){this.Ka(a)},this)};kg[B].Ue=function(a){if(0==a.qa()||"and"!=a.Jb)return[a];var b=a.Y()[x]().map(function(b){a[mb](b);return this.Ue(b)},this);return kc(b)};
kg[B].sh=function(a){var b=null,c=null;a.map(function(a,g){var k=new $f(a);0==g?b=k:c.ea(k);c=k},this);return[b,c]};
function lg(){}M(lg,jg);lg[B].ub=function(a){this.da=a;this.Ka(this.da);return this.da};lg[B].Ka=function(a){if(a instanceof bg)for(;2<a.qa();){for(var b=new bg,c=0;2>c;c++){var d=a.Ad(0);b.ea(d)}a.lc(b,0)}a.Y()[n](function(a){this.Ka(a)},this)};
function mg(){T[F](this,2,0)}M(mg,T);f(mg[B],wb("cross_product"));mg[B].fa=function(a,b){for(var c=b[0],d=b[1],g=[],k=c.T(),l=d.T(),p=0;p<c[E][A];p++)for(var C=0;C<d[E][A];C++){var Ga=Xd(c[E][p],k,d[E][C],l);g[w](Ga)}c=c.T()[Ja](d.T());return[new Od(g,c)]};

function ng(a,b){se[F](this,a,b);this.Ia=a.m(rd);this.tb=a.m(sd)}M(ng,se);ua(ng[B],wb(2));ng[B].ve=function(a){0==this.$()?this.qj(a):this.Jc()};ng[B].qj=function(a){this.xd[n](function(b,c){b instanceof oe&&this.tb.tg(b,a[c])},this)};ng[B].Jc=function(){var a=this.tb.ie(this.Z().c());0!=a[A]&&(a=new te(this[Pa],a),this.Ia.Pb(a))};
function og(){le[F](this)}M(og,le);qa(og[B],function(){var a=new og;a.Tc(this);a.g=this.g;return a});ma(og[B],function(a){og.Xa[q][F](this,a);this.Nd(a);return this});
function pg(){le[F](this)}M(pg,le);qa(pg[B],function(){var a=new pg;a.Tc(this);a.Oa=this.Oa;this[Ma]&&ka(a,this[Ma]instanceof Yd?this[Ma]:this[Ma][x]());a.mc=this.mc;a.Ub=this.Ub;return a});ma(pg[B],function(a){pg.Xa[q][F](this,a);this.Ub&&ka(this,this.Ub instanceof Yd?a[this.Ub.jb()]:this.Ub.map(function(b){return b instanceof Yd?a[b.jb()]:b}));return this});
function qg(){le[F](this)}M(qg,le);qa(qg[B],function(){var a=new qg;a.Tc(this);na(a,this[t]);a.set=this.set?this.set[x]():this.set;return a});ma(qg[B],function(a){qg.Xa[q][F](this,a);this.set[n](function(b){-1!=b.Pc&&ta(b,a[b.Pc])});this.Nd(a);return this});
function rg(a,b){if(null==b)return"NULL";switch(a){case 1:return b?1:0;case 3:case 4:return b;case 0:return"'"+Wc(b)+"'";default:return"'"+b[r]()+"'"}}function sg(a,b){var c=a.mc?"INSERT OR REPLACE":"INSERT",d=a.Oa.sb(),c=c+(" INTO "+a.Oa[h]()+"("),c=c+d.map(function(a){return a[h]()})[H](", "),c=c+") VALUES (";return a[Ma].map(function(a){var k=d.map(function(c){var d=a.B()[c[h]()];return b?null!=d?"#":"NULL":rg(c.$(),d)});return c+k[H](", ")+");"})[H]("\n")}
function tg(a){switch(a){case "between":return"BETWEEN";case "eq":return"=";case "gte":return">=";case "gt":return">";case "in":return"IN";case "lte":return"<=";case "lt":return"<";case "match":return"LIKE";case "neq":return"<>";default:return"UNKNOWN"}}function ug(a,b,c,d){return a instanceof Yd?"?"+a.jb()[r]():d?null!=a?"#":"NULL":"match"==b?"'"+a[r]()+"'":"in"==b?"("+a.map(function(a){return rg(c,a)})[H](", ")+")":"between"==b?rg(c,a[0])+" AND "+rg(c,a[1]):rg(c,a)[r]()}
function vg(a,b){return a.Y().map(function(a){return"("+wg(a,b)+")"})[H]("and"==a.Jb?" AND ":" OR ")}function wg(a,b){if(a instanceof ke)return[a.K.j(),tg(a.S),ug(a[y],a.S,a.K.$(),b)][H](" ");if(a instanceof zf)return vg(a,b);if(a instanceof Hf)return[a.Ga.j(),tg(a.S),a.Ua.j()][H](" ");throw new R("NotSupportedError","toSql does not support predicate type: "+typeof a);}function xg(a,b){var c=wg(a,b);return c?" WHERE "+c:""}
function yg(a,b){var c="UPDATE "+a[t][h]()+" SET ",c=c+a.set.map(function(a){var b=a.K.j()+" = ";return-1!=a.Pc?b+"?"+a.Pc[r]():b+rg(a.K.$(),a[y])[r]()})[H](", ");a.A&&(c+=xg(a.A,b));return c+";"}
function zg(a,b){var c="*";a.h[A]&&(c=a.h.map(function(a){return a.La()?a.j()+" AS "+a.La():a.j()})[H](", "));var d=a.g.map(function(a){return a.xa()!=a[h]()?a[h]()+" AS "+a.xa():a[h]()})[H](", "),c="SELECT "+c+" FROM "+d;a.A&&(c+=xg(a.A,b));a.J&&(d=a.J.map(function(a){return a.K.j()+(0==a.mb?" DESC":" ASC")})[H](", "),c+=" ORDER BY "+d);a.ha&&(d=a.ha.map(function(a){return a.j()})[H](", "),c+=" GROUP BY "+d);a.ka&&(c+=" LIMIT "+a.ka[r]());a.ja&&(c+=" SKIP "+a.ja[r]());return c+";"}
function Ag(a,b){var c=b||!1,d=a.lf();if(d instanceof pg)return sg(d,c);if(d instanceof og){var g="DELETE FROM "+d.g[h]();d.A&&(g+=xg(d.A,c));return g+";"}if(d instanceof qg)return yg(d,c);if(d instanceof oe)return zg(d,c);throw new R("NotSupportedError","toSql not implemented for "+typeof d);};
function V(a,b){this.global=a;this.Fj=a.m(qd);this.Ia=a.m(rd);this.a=b}K("lf.query.BaseBuilder",V,void 0);ha(V[B],function(){try{this.ab()}catch(a){return Kc(a)}return new O(function(a,c){var d=new ng(this[Pa],[this.Ac()]);this.Ia.Pb(d)[D](function(c){a(c[0].ee())},c)},this)});ha(V[B],V[B][Ha]);V[B].df=function(){var a=L(function(a){return a.Mc(this.a)+"\n"},this);return yf(this.fe().Cb(),a)};V[B].explain=V[B].df;ma(V[B],function(a){this.a[q](a);return this});ma(V[B],V[B][q]);
V[B].gk=function(a){return Ag(this,a)};V[B].toSql=V[B].gk;J=V[B];J.ab=ub();J.lf=function(){return this.a[Za]()};J.fd=I("a");J.fe=function(){null==this.Of&&(this.Of=this.Fj.Bi(this.a));return this.Of};J.Ac=function(){return{context:this.lf(),xe:this.fe()}};J.zi=function(){return{context:this.fd(),xe:this.fe()}};
function Bg(a){V[F](this,a,new og)}M(Bg,V);K("lf.query.DeleteBuilder",Bg,void 0);Bg[B].g=function(a){this.Kg();this.a.g=a;return this};Bg[B].from=Bg[B].g;Bg[B].A=function(a){this.Md();this.a.A=a;return this};Bg[B].where=Bg[B].A;Bg[B].Kg=function(){if(null!=this.a.g)throw new R("SyntaxError","from() has already been called.");};Bg[B].Md=function(){if(null!=this.a.A)throw new R("SyntaxError","where() has already been called.");};
Bg[B].ab=function(){Bg.Xa.ab[F](this);if(null==this.a.g)throw new R("SyntaxError","Invalid usage of delete()");};
function Cg(a,b){V[F](this,a,new pg);this.a.mc=b||!1}M(Cg,V);K("lf.query.InsertBuilder",Cg,void 0);Cg[B].ab=function(){Cg.Xa.ab[F](this);var a=this.a;if(null==a.Oa||null==a[Ma])throw new R("SyntaxError","Invalid usage of insert()");if(a.mc&&null===a.Oa.bc().ge())throw new R("SyntaxError","Attempted to insert or replace in a table with no primary key.");};Cg[B].Oa=function(a){this.Lg();this.a.Oa=a;return this};Cg[B].into=Cg[B].Oa;
ka(Cg[B],function(a){this.Mg();a instanceof Yd||a[pb](function(a){return a instanceof Yd})?this.a.Ub=a:ka(this.a,a);return this});ka(Cg[B],Cg[B][Ma]);Cg[B].Lg=function(){if(null!=this.a.Oa)throw new R("SyntaxError","into() has already been called.");};Cg[B].Mg=function(){if(null!=this.a[Ma])throw new R("SyntaxError","values() has already been called.");};
function Dg(a){return Eg("and",e[B][x][F](arguments))}K("lf.op.and",Dg,void 0);K("lf.op.or",function(a){return Eg("or",e[B][x][F](arguments))},void 0);function Eg(a,b){var c=new zf(a);b[n](function(a){c.ea(a)});return c}K("lf.op.not",function(a){a.Dd(!0);return a},void 0);
function W(a,b){V[F](this,a,new oe);this.ef=this.wg=!1;this.a.h=b;this.$g();this.Zg()}M(W,V);K("lf.query.SelectBuilder",W,void 0);J=W[B];J.ab=function(){W.Xa.ab[F](this);var a=this.a;if(null==a.g)throw new R("SyntaxError","Invalid usage of select()");if(yb(a.Hb)&&!yb(a.ka)||yb(a.Rb)&&!yb(a.ja))throw new R("SyntaxError","Binding parameters of limit/skip without providing values");this.gh()};
J.$g=function(){var a=this.a.h[Ca](function(a){return a instanceof S&&"DISTINCT"==a.Tb},this);if(0!=a[A]&&(1!=a[A]||1!=this.a.h[A]))throw new R("SyntaxError","Invalid usage of lf.fn.distinct()");};J.gh=function(){null!=this.a.ha?this.ah():this.fh()};
J.ah=function(){var a=this.a.h[Ca](function(a){return!(a instanceof S)}).map(function(a){return a.j()}),b=!1;if(0==this.a.ha[A]||0==this.a.h[A])b=!0;else{var c=this.a.ha.map(function(a){return a.j()});(b=a[pb](function(a){return-1==c[z](a)}))||(b=this.a.ha[pb](function(a){a=a.$();return 6==a||0==a}))}if(b)throw new R("SyntaxError","Invalid projection list or groupBy columns");};
J.fh=function(){var a=this.a.h[pb](function(a){return a instanceof S},this),b=this.a.h[pb](function(a){return!(a instanceof S)},this)||0==this.a.h[A];if(a&&b)throw new R("SyntaxError","Invalid projection list, aggregated and non-aggregated can't be mixed.");};J.Zg=function(){this.a.h[n](function(a){if(a instanceof S&&!Fg(a.Tb,a.$()))throw new R("SyntaxError","Invalid aggregation detected for"+a.j());},this)};
J.Ld=function(a,b){if(null!=a)throw new R("SyntaxError",b+"() has already been called.");};J.Re=function(a,b){if(0>a)throw new R("SyntaxError",b+"() does not accept negative values");};J.g=function(a){if(this.ef)throw new R("SyntaxError","from() has already been called.");this.ef=!0;null==this.a.g&&(this.a.g=[]);this.a.g[w][v](this.a.g,e[B][x][F](arguments));return this};W[B].from=W[B].g;
W[B].A=function(a){if(this.wg)throw new R("SyntaxError","where() has already been called.");this.wg=!0;this.Te(a);return this};W[B].where=W[B].A;W[B].Te=function(a){null!=this.a.A&&(a=Dg(a,this.a.A));this.a.A=a};W[B].le=function(a,b){null==this.a.g&&(this.a.g=[]);this.a.g[w](a);this.Te(b);return this};W[B].innerJoin=W[B].le;W[B].gj=function(){throw new R("NotSupportedError","Not implemented yet");};W[B].leftOuterJoin=W[B].gj;
W[B].ka=function(a){this.Ld(this.a.ka||this.a.Hb,"limit");a instanceof Yd?this.a.Hb=a:(this.Re(a,"limit"),this.a.ka=a);return this};W[B].limit=W[B].ka;W[B].ja=function(a){this.Ld(this.a.ja||this.a.Rb,"skip");a instanceof Yd?this.a.Rb=a:(this.Re(a,"skip"),this.a.ja=a);return this};W[B].skip=W[B].ja;W[B].J=function(a,b){null==this.a.J&&(this.a.J=[]);this.a.J[w]({K:a,mb:null!=b?b:1});return this};W[B].orderBy=W[B].J;
W[B].ha=function(a){this.Ld(this.a.ha,"groupBy");null==this.a.ha&&(this.a.ha=[]);this.a.ha[w][v](this.a.ha,e[B][x][F](arguments));return this};W[B].groupBy=W[B].ha;function Fg(a,b){switch(a){case "COUNT":case "DISTINCT":return!0;case "AVG":case "GEOMEAN":case "STDDEV":case "SUM":return 4==b||3==b;case "MAX":case "MIN":return 4==b||3==b||5==b||2==b}return!1}qa(W[B],function(){var a=new W(this[Pa],this.a.h);a.a=this.a[Za]();a.a.rc=null;return a});qa(W[B],W[B][Za]);
function Gg(a,b){V[F](this,a,new qg);na(this.a,b)}M(Gg,V);K("lf.query.UpdateBuilder",Gg,void 0);Gg[B].set=function(a,b){var c={Pc:b instanceof Yd?b.jb():-1,K:a,value:b};null!=this.a.set?this.a.set[w](c):this.a.set=[c];return this};Gg[B].set=Gg[B].set;Gg[B].A=function(a){this.Md();this.a.A=a;return this};Gg[B].where=Gg[B].A;Gg[B].Md=function(){if(null!=this.a.A)throw new R("SyntaxError","where() has already been called.");};
Gg[B].ab=function(){Gg.Xa.ab[F](this);if(null==this.a.set)throw new R("SyntaxError","Invalid usage of update()");if(this.a.set[pb](function(a){return a[y]instanceof Yd}))throw new R("SyntaxError","Update set value not bound");};
function Hg(a){this.a=a;this.Ba=null}Hg[B].$b=function(){null===this.Ba&&(this.Ba=this.ad());return this.Ba};function Ig(a){Hg[F](this,a)}M(Ig,Hg);Ig[B].ad=function(){return this.a.mc?new Xf(this.a.Oa,this.a[Ma]):new Wf(this.a.Oa,this.a[Ma])};function Jg(a){Hg[F](this,a)}M(Jg,Hg);Jg[B].ad=function(){var a=new Zf(this.a[t],this.a.set),b=null!=this.a.A?new $f(this.a.A.zb()):null,c=new ag(this.a[t]);null===b?a.ea(c):(b.ea(c),a.ea(b));return a};
function Kg(a,b){this.Ba=a;this.Be=b}Kg[B].$b=function(){this.Be[n](function(a){this.Ba=a.ub(this.Ba)},this);return this.Ba};
function Lg(a){Hg[F](this,a)}M(Lg,Hg);Lg[B].ad=function(){var a=new Yf(this.a.g),b=null!=this.a.A?new $f(this.a.A.zb()):null,c=new ag(this.a.g);null===b?a.ea(c):(b.ea(c),a.ea(b));return(new Kg(a,[new kg])).$b()};
function Mg(){}M(Mg,jg);Mg[B].ub=function(a){this.da=a;this.Ka(this.da);return this.da};Mg[B].Ka=function(a){if(a instanceof $f&&a.za instanceof Hf){N(1==a.qa(),"SelectNode must have exactly one child.");var b=a.ib(0);if(b instanceof bg){var c=new ig(a.za);xf(a,b,c,c);a==this.da&&(this.da=c);a=c}}a.Y()[n](function(a){this.Ka(a)},this)};
function Og(){this.Jd=new Q}M(Og,jg);J=Og[B];J.ub=function(a){this.da=a;this.Ka(this.da);this.Jd[Na]();return this.da};J.Ka=function(a){if(this.tf(a)){var b=a.za instanceof ke?this.Dj(a):this.Cj(a);this.Jd.add(a);b==a&&(b=a.ib(0));null!==b&&(Cb(b[Ea]())&&(this.da=b),this.tf(b)&&!this.Jd[u](b)&&this.Ka(b))}else a.Y()[n](function(a){this.Ka(a)},this)};
J.wd=function(a,b){var c=a;if(this.Yj(a))c=vf(a),this.wd(a,b);else if(this.Xj(a)){var d=[],c=wf(a,b,function(a){a=new $f(a.za);d[w](a);return a});d[n](function(a){this.wd(a,b)},this)}return c};J.Dj=function(a){var b=new Q([a.za.K.W().xa()]),c=function(a){return this.cf(a,b)}[q](this);return this.wd(a,c)};J.Cj=function(a){var b=new Q([a.za.Ga.W().xa(),a.za.Ua.W().xa()]),c=function(a){return this.cf(a,b)}[q](this);return this.wd(a,c)};
J.cf=function(a,b){var c=new Q;rf(a)[n](function(a){c.add(a[t].xa())},this);a instanceof ag&&c.add(a[t].xa());return c.ph(b)};J.tf=function(a){return a instanceof $f&&!(a.za instanceof zf)};J.Xj=function(a){a=a.ib(0);return a instanceof bg||a instanceof ig};J.Yj=function(a){return a.ib(0)instanceof $f};
function Pg(a){Hg[F](this,a);this.Tf=this.Ef=this.fg=this.Kf=this.Ne=this.pf=this.bg=this.$e=this.hg=null}M(Pg,Hg);J=Pg[B];J.ad=function(){this.hi();var a=this.mh(),b=[new kg,new lg,new Og,new Mg];return(new Kg(a,b)).$b()};J.hi=function(){this.ni();this.ci();this.li();this.ii();this.mi();this.gi();this.ei();this.bi();this.ji()};
J.mh=function(){for(var a=[this.Ef,this.fg,this.Tf,this.Kf,this.Ne,this.pf,this.bg,this.$e],b=null,c=null,d=0;d<a[A];d++){var g=a[d];null!==g&&(null===c?c=g:a[b].ea(g),b=d)}this.hg[n](function(c){a[b].ea(c)});return c};J.ni=function(){this.hg=this.a.g.map(function(a){return new ag(a)},this)};J.ci=function(){2<=this.a.g[A]&&(this.$e=new bg)};J.li=function(){this.bg=null!=this.a.A?new $f(this.a.A.zb()):null};J.ii=function(){this.a.J&&(this.Kf=new dg(this.a.J))};
J.gi=function(){null!=this.a.ka&&(this.Ef=new gg(this.a.ka))};J.mi=function(){null!=this.a.ja&&0<this.a.ja&&(this.fg=new hg(this.a.ja))};J.ei=function(){null!=this.a.ha&&(this.pf=new fg(this.a.ha))};J.bi=function(){var a=this.a.h[Ca](function(a){return a instanceof S});null!=this.a.J&&this.a.J[n](function(b){b.K instanceof S&&a[w](b.K)});0<a[A]&&(this.Ne=new eg(a))};J.ji=function(){this.Tf=new cg(this.a.h||[],this.a.ha||null)};
function Qg(){}Qg[B].create=function(a){var b=null;if(a instanceof pg)b=new Ig(a);else if(a instanceof og)b=new Lg(a);else if(a instanceof oe)b=new Pg(a);else if(a instanceof qg)b=new Jg(a);else throw new R("SyntaxError","Unknown query context");return b.$b()};
function Rg(a){T[F](this,1,1);this.C=a}M(Rg,T);f(Rg[B],function(){return"delete("+this.C[h]()+")"});Rg[B].Z=I("C");Rg[B].fa=function(a,b){var c=b[0][E].map(function(a){return a.pa});a[m](this.C,c);return[Rd()]};
function Sg(a){T[F](this,1,1);this.of=a}M(Sg,T);f(Sg[B],function(){return"groupBy("+this.of.map(function(a){return a.j()})[r]()+")"});Sg[B].fa=function(a,b){return this.Vg(b[0])};Sg[B].Vg=function(a){var b=new Gf,c=function(a){return this.of.map(function(b){return a.M(b)},this)[H](",")}[q](this);a[E][n](function(a){b.add(c(a),a)},this);return b.G().map(function(c){return new Od(b.get(c),a.T())},this)};
function Tg(a){N(1<a[A],"Should only be called for cross-column indices.");a=a.map(function(a){return a.c()});a=jd[v](null,a);var b=[];id(a,function(a){b[w](a)});return b}function Ug(a){this.Gb=a}Ug[B].dd=function(){return 1==this.Gb.h[A]?[Md()]:[this.Gb.h.map(function(){return Md()})]};function Vg(a,b){this.Gb=a;this.na=b;this.Qd=this.Cf=null}
Vg[B].Wg=function(a){var b=new P;this.na.G()[n](function(c){var d=this.na.get(c).map(function(b){return a.hd(b)},this),g=new of([Md()]);d[n](function(a){a=new of(a.fk());g=pf(g,a)});b.set(c,g)},this);return b};Vg[B].Vh=function(a){for(var b=this.Gb.h[A]-1;0<=b;b--){var c=this.Gb.h[b];if(null!==a.get(c.Va[h](),null))break;a.set(c.Va[h](),new of([Md()]))}};Vg[B].dd=function(a){if(this.Cf==a)return this.Qd;var b=this.Wg(a);this.Vh(b);this.Qd=1==this.Gb.h[A]?b.c()[0].c():Tg(this.Hi(b));this.Cf=a;return this.Qd};
Vg[B].Hi=function(a){var b=new P,c=0;this.Gb.h[n](function(a){b.set(a.Va[h](),c);c++});return a.G()[qb](function(a,c){return b.get(a)-b.get(c)}).map(function(b){return a.get(b)})};
function Wg(a,b){this.kg=b;this.N=a.m(pd)}Wg[B].ih=function(a,b){var c=b[Ca](this.aj,this);if(0==c[A])return null;c=this.fi(c);if(0==c[A])return null;if(1==c[A])return c[0];var d=Number.MAX_VALUE;return c[fb](function(b,c){var l=c.Ug(a);return l<d?(d=l,c):b},null)};Wg[B].fi=function(a){return this.kg.Ca().map(function(b){b=new Xg(this.N,b);b.oh(a);return b},this)[Ca](function(a){return a.fj()})};Wg[B].aj=function(a){return a instanceof ke&&a.uf()?a.K.W()==this.kg:!1};
function Xg(a,b){this.N=a;this.kb=b;this.rf=new Q;this.rf[gb](this.kb.h.map(function(a){return a.Va[h]()}));this.re=this.na=null}J=Xg[B];J.Ci=function(){return null===this.na?[]:this.na.c()};J.kf=function(){N(this.na);null===this.re&&(this.re=new Vg(this.kb,this.na));return this.re};J.oh=function(a){a[n](function(a){var c=a.sb()[0][h]();this.rf[u](c)&&(null===this.na&&(this.na=new Gf),this.na.add(c,a.ga()))},this)};
J.fj=function(){if(null===this.na)return!1;for(var a=!1,b=!0,c=0;c<this.kb.h[A];c++){var d=this.na.s(this.kb.h[c].Va[h]());if(a&&d){b=!1;break}d||(a=!0)}return b};J.Ug=function(a){a=this.kf().dd(a);var b=this.N.get(this.kb.j());return a[fb](function(a,d){return a+b.Xc(d)},0)};
function Yg(a,b,c,d){T[F](this,0,-1);this.N=a.m(pd);this.index=b;this.Af=c;this.Ae=d;this.Gd=this.Fd=!1}M(Yg,T);f(Yg[B],function(){return"index_range_scan("+this[Ua].j()+", ?, "+(this.Ae?"reverse":"natural")+(this.Fd?", limit:?":"")+(this.Gd?", skip:?":"")+")"});Yg[B].Mc=function(a){var b=this[r](),c=this.Af.dd(a),b=b[Ia]("?",c[r]());this.Fd&&(b=b[Ia]("?",a.ka[r]()));this.Gd&&(b=b[Ia]("?",a.ja[r]()));return b};
Yg[B].fa=function(a,b,c){a=this.Af.dd(c);c=this.N.get(this[Ua].j()).Ma(a,this.Ae,this.Fd?c.ka:void 0,this.Gd?c.ja:void 0).map(function(a){return new Sc(a,{})},this);return[Ud(c,[this[Ua].ig])]};
function Zg(a){T[F](this,1,1);this.vd=a}M(Zg,T);f(Zg[B],wb("select(?)"));Zg[B].Mc=function(a){a=a.hd(this.vd);return this[r]()[Ia]("?",a[r]())};Zg[B].fa=function(a,b,c){return[c.hd(this.vd).eval(b[0])]};
function $g(a,b){T[F](this,1,1);this.la=a.m(od);this.C=b}M($g,T);f($g[B],function(){return"table_access_by_row_id("+this.C[h]()+")"});$g[B].Z=I("C");$g[B].fa=function(a,b){return[Ud(this.la.get(b[0].Gi()),[this.C.xa()])]};
function ah(a,b){T[F](this,0,-1);this.la=a.m(od);this.N=a.m(pd);na(this,b)}M(ah,T);f(ah[B],function(){var a="table_access("+this[t][h]();null===this[t].La()||(a+=" as "+this[t].La());return a+")"});ah[B].Z=I("table");ah[B].fa=function(){var a=this.N.get(this[t].Db()).Ma();return[Ud(this.la.get(a),[this[t].xa()])]};
function bh(a){this.l=a}M(bh,jg);bh[B].ub=function(a,b){this.da=a;sf(a,function(a){return a instanceof ah})[n](function(a){var d=this.ai(a);if(0!=d[A]){var g=(new Wg(this.l,a[t])).ih(b,d.map(function(a){return b.hd(a.vd)}));if(null!==g){var k=new P;d[n](function(a){k.set(a.vd,a)},this);this.da=this.Qj(g,k,a,b)}}},this);return this.da};bh[B].ai=function(a){var b=[];for(a=a[Ea]();a;)a instanceof Zg&&b[w](a),a=a[Ea]();return b};
bh[B].Qj=function(a,b,c){a.Ci().map(function(a){return b.get(a)})[n](tf);a=new Yg(this.l,a.kb,a.kf(),!1);var d=new $g(this.l,c[t]);d.ea(a);xf(c,c,d,a);return a.Cb()};
function ch(a,b){T[F](this,0,-1);this.N=a.m(pd);this.C=b}M(ch,T);f(ch[B],function(){return"insert("+this.C[h]()+")"});ch[B].Z=I("C");ch[B].fa=function(a,b,c){dh(this.C,c[Ma],this.N);a.lb(this.C,c[Ma]);return[Ud(c[Ma],[this.C[h]()])]};function dh(a,b,c){a=a.bc().ge();if(null===a?0:a.h[0][La]){var d=a.h[0].Va[h](),g=c.get(a.j()).max()[0]||0;b[n](function(a){if(0==a.B()[d]||null==a.B()[d])g++,a.B()[d]=g})}}function eh(a,b){T[F](this,0,-1);this.N=a.m(pd);this.C=b}M(eh,T);
f(eh[B],function(){return"insert_replace("+this.C[h]()+")"});eh[B].Z=I("C");eh[B].fa=function(a,b,c){dh(this.C,c[Ma],this.N);a.me(this.C,c[Ma]);return[Ud(c[Ma],[this.C[h]()])]};
function fh(a){T[F](this,2,0);this.Sf=a}M(fh,T);f(fh[B],function(){return"join("+this.Sf[r]()+")"});fh[B].fa=function(a,b){return[this.Sf.Gh(b[0],b[1])]};
function gh(){T[F](this,1,1)}M(gh,T);f(gh[B],wb("limit(?)"));gh[B].Mc=function(a){return this[r]()[Ia]("?",a.ka[r]())};gh[B].fa=function(a,b,c){b[0][E][G](c.ka);return b};
function hh(a){T[F](this,-1,1);this.J=a}M(hh,T);J=hh[B];f(J,function(){return"order_by("+pe(this.J)+")"});J.fa=function(a,b){if(1==b[A]){var c=this.Xh(b[0]);(null===c?b[0]:b[0].ac(c))[E][qb](this.Dh[q](this))}else b[qb](this.Kj[q](this));return b};J.Xh=function(a){for(var b=null,c=0;c<this.J[A];c++){var d=Nf(this.J[c].K);if(a.Ti(d)){b=d;break}}return b};
J.L=function(a,b){var c=null,d=null,g=null,k=-1;do k++,g=this.J[k].K,c=this.J[k].mb,d=a(g),g=b(g);while(d==g&&k+1<this.J[A]);d=d<g?-1:d>g?1:0;return 1==c?d:-d};J.Kj=function(a,b){return this.L(function(b){return b instanceof S?a.ac(b):a[E][a[E][A]-1].M(b)},function(a){return a instanceof S?b.ac(a):b[E][b[E][A]-1].M(a)})};J.Dh=function(a,b){return this.L(function(b){return a.M(b)},function(a){return b.M(a)})};
function ih(a,b){this.Aa=a;this.H=b}ih[B].nf=function(){return this.H[pb](function(a){return a instanceof S},this)?this.Ri():this.Si()};
ih[B].Ri=function(){if(1==this.H[A]&&"DISTINCT"==this.H[0].Tb){var a=this.Aa.ac(this.H[0])[E].map(function(a){var b=new Vd(new Sc(-1,{}),this.Aa.oe());b.De(this.H[0],a.M(this.H[0][bb]));return b},this);return new Od(a,[])}var b=new Vd(new Sc(-1,{}),this.Aa.oe());this.H[n](function(a){var d=a instanceof S?this.Aa.ac(a):this.Aa[E][0].M(a);b.De(a,d)},this);return new Od([b],this.Aa.T())};
ih[B].Si=function(){var a=e(this.Aa[E][A]),b=this.Aa.oe();this.Aa[E][n](function(c,d){a[d]=new Vd(new Sc(c.pa.id(),{}),b);this.H[n](function(b){a[d].De(b,c.M(b))},this)},this);return new Od(a,this.Aa.T())};function jh(a,b){var c=a.map(function(a){return(new ih(a,b)).nf()[E][0]});return new Od(c,a[0].T())};
function kh(a,b){T[F](this,-1,1);this.h=a;this.Fb=b}M(kh,T);J=kh[B];f(J,function(){var a="project("+this.h[r]();if(null!==this.Fb)var b=this.Fb.map(function(a){return a.j()})[H](", "),a=a+(", groupBy("+b+")");return a+")"});J.fa=function(a,b){return 0==b[A]?[Rd()]:1==b[A]?[this.Oh(b[0])]:[this.Mh(b)]};J.Ui=function(){return this.h[pb](function(a){return a instanceof S})||null!==this.Fb};J.Mh=function(a){return jh(a,this.h)};J.Oh=function(a){return 0==this.h[A]?a:(new ih(a,this.h)).nf()};
function lh(){T[F](this,1,1)}M(lh,T);f(lh[B],wb("skip(?)"));lh[B].Mc=function(a){return this[r]()[Ia]("?",a.ja[r]())};lh[B].fa=function(a,b,c){return[new Od(b[0][E][x](c.ja),b[0].T())]};
function mh(){}M(mh,jg);mh[B].ub=function(a){var b=sf(a,function(a){return a instanceof gh||a instanceof lh});if(0==b[A])return a;var c=this.$h(a);if(null===c)return a;b[n](function(a){this.nj(a,c)},this);return c.Cb()};mh[B].nj=function(a,b){a instanceof gh?b.Fd=!0:b.Gd=!0;return tf(a).parent};mh[B].$h=function(a){a=sf(a,function(a){return a instanceof Yg},function(a){return a instanceof kh&&a.Ui()||a instanceof hh||1!=a.qa()||a instanceof Zg});return 0<a[A]?a[0]:null};
function nh(a){this.l=a}M(nh,jg);nh[B].ub=function(a){var b=oh(a);if(null===b)return a;a=this.Jg(b);a==b&&(a=this.Ig(b));return a.Cb()};nh[B].Jg=function(a){var b=a,c=ph(a.ib(0));if(null!==c){var d;d=a.J;for(var g=null,k=c[t].Ca(),l=0;l<k[A]&&null===g;l++)g=qh(k[l],d);d=g;if(null===d)return b;b=new Yg(this.l,d.kb,new Ug(d.kb),d.xf);d=new $g(this.l,c[t]);d.ea(b);tf(a);b=xf(c,c,d,b)}return b};
nh[B].Ig=function(a){var b=a,c=rh(a.ib(0));if(null!==c){var d=qh(c[Ua],a.J);if(null===d)return b;c.Ae=d.xf;b=tf(a).parent}return b};function rh(a){a=sf(a,function(a){return a instanceof Yg},function(a){return 1!=a.qa()});return 0<a[A]?a[0]:null}function ph(a){a=sf(a,function(a){return a instanceof ah},function(a){return 1!=a.qa()});return 0<a[A]?a[0]:null}function oh(a){a=sf(a,function(a){return a instanceof hh});return 0<a[A]?a[0]:null}
function qh(a,b){if(a.h[A]!=b[A]||!b[rb](function(b,c){return b.K[h]()==a.h[c].Va[h]()}))return null;var c=sh(b,a);return c[0]||c[1]?{kb:a,xf:c[1]}:null}function sh(a,b){var c=a[fb](function(a,b){return a<<1|(0==b.mb?0:1)},0),d=b.h[fb](function(a,b){return a<<1|(0==b.mb?0:1)},0),d=c^d,c=0==d,d=d==ea.pow(2,ea.max(a[A],b.h[A]))-1;return[c,d]};
function th(a,b,c){this.Ba=a;this.Ej=b;this.Be=c}th[B].$b=function(){this.Be[n](function(a){this.Ba=a.ub(this.Ba,this.Ej)},this);return this.Ba};
function uh(a,b){T[F](this,1,1);this.C=a;this.lk=b}M(uh,T);f(uh[B],function(){return"update("+this.C[h]()+")"});uh[B].Z=I("C");uh[B].fa=function(a,b){var c=b[0][E].map(function(a){var b=this.C.Yb(a.pa.Wa());this.lk[n](function(a){b.B()[a.K[h]()]=a[y]},this);return b},this);a[sb](this.C,c);return[Rd()]};
function vh(a){this.l=a}vh[B].create=function(a,b){if(a instanceof Xf||a instanceof Wf)return this.Ud(a,b);if(a instanceof cg||a instanceof gg||a instanceof hg)return this.Ud(a,b,[new bh(this.l),new nh(this.l),new mh]);if(a instanceof Yf||a instanceof Zf)return this.Ud(a,b,[new bh(this.l)]);throw new R("NotSupportedError","Unknown query plan node");};vh[B].Ud=function(a,b,c){a=qf(a,L(this.jj,this));return null!=c?new qe((new th(a,b,c)).$b()):new qe(a)};
vh[B].jj=function(a){if(a instanceof cg)return new kh(a.h,a.Fb);if(a instanceof fg)return new Sg(a.h);if(a instanceof eg)return new Of(a.h);if(a instanceof dg)return new hh(a.J);if(a instanceof hg)return new lh;if(a instanceof gg)return new gh;if(a instanceof $f)return new Zg(a.za.ga());if(a instanceof bg)return new mg;if(a instanceof ig)return new fh(a.za);if(a instanceof ag)return new ah(this.l,a[t]);if(a instanceof Yf)return new Rg(a[t]);if(a instanceof Zf)return new uh(a[t],a.He);if(a instanceof
Xf)return new eh(this.l,a[t]);if(a instanceof Wf)return new ch(this.l,a[t]);throw new R("NotSupportedError","Unknown node type");};

function wh(a){this.hj=new Qg;this.yj=new vh(a)}wh[B].Bi=function(a){var b=this.hj[Ra](a);return this.yj[Ra](b,a)};
function xh(){this.Gf=new P}J=xh[B];J.cd=function(a){var b=this.Gf.get(a[h](),null);null===b&&(b=new yh,this.Gf.set(a[h](),b));return b};J.Oi=function(a,b,c){b[n](function(b){this.cd(b).Ni(a,c)},this)};J.Yg=function(a,b,c){return b[rb](function(b){return this.cd(b).Xg(a,c)},this)};J.Wf=function(a,b,c){var d=this.Yg(a,b,c);d&&this.Oi(a,b,c);return d};J.zd=function(a,b){b[n](function(b){this.cd(b).zd(a)},this)};J.jh=function(a){a[n](function(a){this.cd(a).Ta=null},this)};
function yh(){this.Qb=this.Ha=this.Ta=this.vc=null}yh[B].zd=function(a){this.vc==a&&(this.vc=null);this.Ta==a&&(this.Ta=null);null===this.Ha||this.Ha[m](a);null===this.Qb||this.Qb[m](a)};yh[B].Xg=function(a,b){var c=null===this.Ha||this.Ha.ya();return 0==b?(null===this.Qb||this.Qb.ya())&&c&&null===this.vc&&null!==this.Ta&&this.Ta==a:3==b?null===this.vc&&null===this.Ta&&null!==this.Ha&&this.Ha[u](a):1==b?null===this.Ta:c&&(null===this.Ta||this.Ta==a)};
yh[B].Ni=function(a,b){0==b?(this.Ta=null,this.vc=a):3==b?(null===this.Qb&&(this.Qb=new Q),this.Qb.add(a),null===this.Ha&&(this.Ha=new Q),this.Ha[m](a)):1==b?(null===this.Ha&&(this.Ha=new Q),this.Ha.add(a)):2==b&&(this.Ta=a)};
function zh(){this.Nb=new Ah;this.Ec=new xh}J=zh[B];J.Pb=function(a){(2>a[jb]()||2>a[jb]())&&this.Ec.jh(a.Z().c());this.Nb.lb(a);this.Td();return a.yc().ua};J.Td=function(){for(var a=this.Nb.c(),b=0;b<a[A];b++){var c=a[b],d=!1;if(d=0==c.$()?this.Xf(c,1,3):this.Xf(c,2,0))this.Nb[m](c),this.Ph(c)}};J.Xf=function(a,b,c){var d=!1,g=a.Z().c();this.Ec.Wf(a.ga(),g,b)&&(d=this.Ec.Wf(a.ga(),g,c));return d};J.Ph=function(a){a[Ha]()[D](L(this.tj,this,a),L(this.sj,this,a))};
J.tj=function(a,b){this.Ec.zd(a.ga(),a.Z().c());a.yc()[ob](b);this.Td()};J.sj=function(a,b){this.Ec.zd(a.ga(),a.Z().c());a.yc()[db](b);this.Td()};function Ah(){this.Nb=[]}Ah[B].lb=function(a){ic(this.Nb,a,function(a,c){var d=a[jb]()-c[jb]();return 0==d?a.ga()-c.ga():d})};Ah[B].c=function(){return this.Nb[x]()};ja(Ah[B],function(a){var b=this.Nb;a=Vb(b,a);var c;(c=0<=a)&&ac(b,a);return c});
function Bh(a,b){this.Fh=ae.ce();this.Ic=a;this.rd=b;this.H=this.xh()}Bh[B].xh=function(){if(0<this.Ic.h[A])return this.Ic.h;var a=[],b=this.Ic.g[x]();null!=this.Ic.le&&b[w](this.Ic.le);b[n](function(b){b.sb()[n](function(b){a[w](b)})});return a};Bh[B].L=function(a,b){return this.H[rb](function(c){return this.Fh.be(c.$(),"eq")(a.M(c),b.M(c))},this)};
Bh[B].Hg=function(a,b){for(var c=null===a?[]:a[E],d=ad(c,b[E],L(this.L,this),function(a){return c[a]}),g=[],k=0,l=0;l<c[A];l++){var p=c[l];d[k]==p?k++:(p=this.rd[G](k,1),p=Ch(l,p,0,this.rd),g[w](p))}d=ad(c,b[E],L(this.L,this),function(a,c){return b[E][c]});for(l=k=0;l<b[E][A];l++)p=b[E][l],d[k]==p?k++:(this.rd[G](l,0,p.pa.B()),p=Ch(l,[],1,this.rd),g[w](p));return g};function Ch(a,b,c,d){return{mk:c,index:a,object:d,rk:b,type:"splice"}};
function Dh(){this.Zb=new P}J=Dh[B];J.he=function(a){return Hb(a)[r]()};J.Id=function(a,b){var c=this.he(a.fd()),d=this.Zb.get(c,null);null===d&&(d=new Eh(a),this.Zb.set(c,d));d.Id(b)};J.ze=function(a,b){var c=this.he(a.fd()),d=this.Zb.get(c,null);N(null!=d,"Attempted to unobserve a query that was not observed.");var g=d.ze(b);N(g,"removeObserver: Inconsistent state detected.");d.Wi()||this.Zb[m](c)};
J.ie=function(a){var b=new Q;a[n](function(a){b.add(a[h]())});var c=[];this.Zb.c()[n](function(a){a=a.Ac();a[Ba].g[pb](function(a){return b[u](a[h]())})&&c[w](a)});return c};J.tg=function(a,b){var c=this.he(null!=a.rc?a.rc:a),c=this.Zb.get(c,null);return null!==c?(c.kk(b),!0):!1};function Eh(a){this.Sg=a;this.Hc=new Q;this.rj=[];this.Df=null;this.Ah=new Bh(a.fd(),this.rj)}J=Eh[B];J.Id=function(a){this.Hc[u](a)?Rb("Attempted to register observer twice."):this.Hc.add(a)};J.ze=function(a){return this.Hc[m](a)};
J.Ac=function(){return this.Sg.zi()};J.Wi=function(){return 0<this.Hc.V()};J.kk=function(a){var b=this.Ah.Hg(this.Df,a);this.Df=a;0<b[A]&&this.Hc.c()[n](function(a){a(b)})};
function Fh(a,b){var c=a.m(td),d=b||{},g=d.sk||0,k=new Me;a.fb(od,k);var k=null,l=!1;switch(g){case 1:k=new Fe(c);break;case 5:k=new Ge(c);break;case 4:k=new Le(a,c,d.tk);break;case 3:k=new ye(c,d.pk);l=!0;break;default:k=new De(a,c)}a.fb(nd,k);var p=new mf;a.fb(pd,p);return k.Na(d.qk)[D](function(){a.fb(qd,new wh(a));var b=new zh;a.fb(rd,b);b=new Dh;a.fb(sd,b);return p.Na(c)})[D](function(){l&&(new ve(a)).bk();return(new kf(a)).Na(c)})};

function Gh(a,b){this.l=a;this.rb=a.m(nd);this.Ia=a.m(rd);this.tb=a.m(sd);this.Ja=new Q(b);this.Qa=new Id(this.l,this.Ja.c());this.Ob=Nc();this.wc=Nc();this.Ie=Nc()}J=Gh[B];ha(J,function(){this.Ie[ob]();return this.wc.ua});J.$=wb(1);J.Z=I("Ja");J.yc=I("Ob");J.ga=function(){return Hb(this)};ua(J,wb(2));J.xg=function(){this.Ia.Pb(this);return this.Ie.ua};
J.Pg=function(a){a=a.Ac();return a.xe.Cb()[Ha](this.Qa,a[Ba])[D](function(a){return a[0].ee()},L(function(a){this.Qa.vb();var c=new Fc(a[lb]);this.wc[db](c);throw a;},this))};J.ba=function(){this.rb.Ab(this.$(),this.Qa).ba()[D](L(function(){this.Jc();this.wc[ob]()},this),L(function(a){this.Qa.vb();this.wc[db](a)},this));return this.Ob.ua};J.vb=function(){this.Qa.vb();this.wc[ob]();return this.Ob.ua};J.Jc=function(){var a=this.tb.ie(this.Ja.c());0!=a[A]&&(a=new te(this.l,a),this.Ia.Pb(a))};
function Hh(a){this.l=a;this.Ia=a.m(rd);this.Nc=null;this.va=0}K("lf.proc.Transaction",Hh,void 0);var Ih=new P(0,new Q([1,4]),1,new Q([2]),2,new Q([3,5,6]),3,new Q([2,7]),4,new Q([7]),5,new Q([7]),6,new Q([7]));Hh[B].Ea=function(a){var b=Ih.get(this.va,null);if(null===b||!b[u](a))throw new R("TransactionError","Invalid transaction state transition, from "+this.va+" to "+a+".");this.va=a};
ha(Hh[B],function(a){this.Ea(4);var b=[];try{a[n](function(a){a.ab();b[w](a.Ac())},this)}catch(c){return this.Ea(7),Kc(c)}a=new ng(this.l,b);return this.Ia.Pb(a)[D](L(function(a){this.Ea(7);return a.map(function(a){return a.ee()})},this),L(function(a){this.Ea(7);throw a;},this))});ha(Hh[B],Hh[B][Ha]);Hh[B].Qg=function(a){this.Ea(1);this.Nc=new Gh(this.l,a);return this.Nc.xg()[D](L(function(){this.Ea(2)},this))};Hh[B].begin=Hh[B].Qg;
Hh[B].Og=function(a){this.Ea(3);return this.Nc.Pg(a)[D](L(function(a){this.Ea(2);return a},this),L(function(a){this.Ea(7);throw a;},this))};Hh[B].attach=Hh[B].Og;Hh[B].ba=function(){this.Ea(5);return this.Nc.ba()[D](L(function(){this.Ea(7)},this))};Hh[B].commit=Hh[B].ba;Hh[B].vb=function(){this.Ea(6);return this.Nc.vb()[D](L(function(){this.Ea(7)},this))};Hh[B].rollback=Hh[B].vb;
function X(a){this.l=a;this.w=a.m(td);this.ke=!1}K("lf.proc.Database",X,void 0);X[B].Na=function(a){this.l.fb(td,this.w);return Fh(this.l,a)[D](L(function(){this.ke=!0;return this},this))};X[B].init=X[B].Na;X[B].Eb=I("w");X[B].getSchema=X[B].Eb;X[B].Xb=function(){if(!this.ke)throw new R("UninitializedError","Database is not initialized");};X[B].select=function(a){this.Xb();return new W(this.l,1!=arguments[A]||null!=arguments[0]?e[B][x][F](arguments):[])};X[B].select=X[B].select;
X[B].lb=function(){this.Xb();return new Cg(this.l)};X[B].insert=X[B].lb;X[B].me=function(){this.Xb();return new Cg(this.l,!0)};X[B].insertOrReplace=X[B].me;Aa(X[B],function(a){this.Xb();return new Gg(this.l,a)});Aa(X[B],X[B][sb]);va(X[B],function(){this.Xb();return new Bg(this.l)});X[B]["delete"]=X[B][kb];X[B].observe=function(a,b){this.l.m(sd).Id(a,b)};X[B].observe=X[B].observe;X[B].unobserve=function(a,b){this.l.m(sd).ze(a,b)};X[B].unobserve=X[B].unobserve;X[B].vh=function(){this.Xb();return new Hh(this.l)};
X[B].createTransaction=X[B].vh;pa(X[B],function(){try{this.l.m(nd)[Ya]()}catch(a){}this.l[Na]();this.ke=!1});pa(X[B],X[B][Ya]);
function Y(a,b,c,d,g,k){this.C=a;this.u=b;this.zf=c;this.wf=d;this.pg=g;this.$a=k||null}K("lf.schema.BaseColumn",Y,void 0);J=Y[B];ia(J,I("u"));J.j=function(){return this.C.xa()+"."+this.u};f(J,function(){return this.j()});J.W=I("C");J.$=I("pg");J.La=I("$a");J.Ca=function(){null==this.ma&&(this.ma=[],this.W().Ca()[n](function(a){-1!=a.h.map(function(a){return a.Va[h]()})[z](this.u)&&this.ma[w](a)},this));return this.ma};J.dc=I("wf");J.nd=I("zf");J.Fa=function(a){return If(this,a,"eq")};Y[B].eq=Y[B].Fa;
Y[B].Hf=function(a){return If(this,a,"neq")};Y[B].neq=Y[B].Hf;Y[B].se=function(a){return If(this,a,"lt")};Y[B].lt=Y[B].se;Y[B].ij=function(a){return If(this,a,"lte")};Y[B].lte=Y[B].ij;Y[B].Pi=function(a){return If(this,a,"gt")};Y[B].gt=Y[B].Pi;Y[B].Qi=function(a){return If(this,a,"gte")};Y[B].gte=Y[B].Qi;Y[B].match=function(a){return If(this,a,"match")};Y[B].match=Y[B].match;Y[B].Rg=function(a,b){return If(this,[a,b],"between")};Y[B].between=Y[B].Rg;Y[B].Xi=function(a){return If(this,a,"in")};
Y[B]["in"]=Y[B].Xi;Y[B].dj=function(){return this.Fa(null)};Y[B].isNull=Y[B].dj;Y[B].cj=function(){return this.Hf(null)};Y[B].isNotNull=Y[B].cj;Y[B].nc=function(a){return new Y(this.C,this.u,this.zf,this.wf,this.pg,a)};Y[B].as=Y[B].nc;
function Jh(){this.Cd=new P}var Kh;la(Jh[B],function(){this.Cd[Na]()});K("lf.Global.prototype.clear",Jh[B][Na],void 0);Jh[B].fb=function(a,b){this.Cd.set(a[r](),b);return b};K("lf.Global.prototype.registerService",Jh[B].fb,void 0);Jh[B].m=function(a){var b=this.Cd.get(a[r](),null);if(null==b)throw new R("NotFoundError",a[r]());return b};K("lf.Global.prototype.getService",Jh[B].m,void 0);Jh[B].qe=function(a){return this.Cd.s(a[r]())};K("lf.Global.prototype.isRegistered",Jh[B].qe,void 0);
function Lh(a,b){this.Bj=a;this.pj=b}Lh[B].ge=I("Bj");Lh[B].yi=I("pj");
function Z(a){this.u=a;this.H=new P;this.sg=new Q;this.kc=new Q;this.qd=new Q;var b=this.u;this.fc="pk"+(b[0].toUpperCase()+b.substring(1));this.ma=new P;this.ud=!1;this.pc(a)}K("lf.schema.TableBuilder",Z,void 0);var Mh=new Q([0,6]);Z[B].pc=function(a){if(!/^[A-Za-z_][A-Za-z0-9_]*$/.test(a))throw new R("SyntaxError",a+" violates naming rule");if(this.H.s(a)||this.ma.s(a)||this.kc[u](a))throw new R("SyntaxError",this.u+"."+a+" is already defined");};
Z[B].eh=function(a){var b=!1;a[n](function(a){var d=this.H.get(a[lb]);b=b||a[La];if(a[La]&&3!=d)throw new R("SyntaxError","Can not use autoIncrement with a non-integer primary key.");},this);if(b&&1<a[A])throw new R("SyntaxError","Can not use autoIncrement with a cross-column primary key.");};Z[B].zg=function(a,b){this.pc(a);this.H.set(a,b);Mh[u](b)&&this.Le([a]);return this};Z[B].addColumn=Z[B].zg;
Z[B].Cg=function(a,b){this.pc(this.fc);var c=this.pd(a,!0,void 0,b);this.eh(c);c[n](function(a){this.sg.add(a[lb])},this);this.kc.add(this.fc);this.ma.set(this.fc,c);return this};Z[B].addPrimaryKey=Z[B].Cg;Z[B].Ag=function(){return this};Z[B].addForeignKey=Z[B].Ag;Z[B].Dg=function(a,b){this.pc(a);var c=this.pd(b,!0);this.ma.set(a,c);this.kc.add(a);return this};Z[B].addUnique=Z[B].Dg;Z[B].Le=function(a){a=this.pd(a,!1);this.dh(a);a[n](function(a){this.qd.add(a[lb])},this);return this};
Z[B].addNullable=Z[B].Le;Z[B].dh=function(a){this.ma.G()[n](function(b){var c=new Q;this.ma.get(b)[n](function(a){c.add(a[lb])});var d=a[Ca](function(a){return c[u](a[lb])});if(1<c.V()&&0<d[A])throw new R("SyntaxError","Cross-column index "+b+" refers to nullable columns: "+d[H](","));},this)};Z[B].Bg=function(a,b,c,d){this.pc(a);b=this.pd(b,!0,d);this.bh(a,b);c&&this.kc.add(a);this.ma.set(a,b);return this};Z[B].addIndex=Z[B].Bg;
Z[B].bh=function(a,b){if(1<b[A]){var c=b[Ca](function(a){return this.qd[u](a[lb])},this);if(0<c[A])throw new R("SyntaxError","Cross-column index "+a+" refers to nullable columns: "+c[H](","));}};Z[B].Mb=vb("ud");Z[B].persistentIndex=Z[B].Mb;Z[B].Eb=function(){return new (this.oi())};Z[B].getSchema=Z[B].Eb;
Z[B].pd=function(a,b,c,d){var g=a;"string"==typeof a[0]&&(g=a.map(function(a){return{name:a,order:c||1,autoIncrement:d||!1}}));g[n](function(a){if(!this.H.s(a[lb]))throw new R("SyntaxError",this.u+" does not have column: "+a[lb]);if(b){var c=this.H.get(a[lb]);if(0==c||6==c)throw new R("SyntaxError",this.u+" index on non-indexable column: "+a[lb]);}},this);return g};
Z[B].oi=function(){function a(){function a(c){return b.ma.get(c).map(function(a){return{Va:this[a[lb]],mb:a.mb,autoIncrement:a[La]}},this)}var d=b.H.G().map(function(a){this[a]=new Y(this,a,b.sg[u](a),b.qd[u](a),b.H.get(a));return this[a]},this),g=b.ma.G().map(function(d){return new Kf(b.u,d,b.kc[u](d),a[F](this,d))},this);Lf[F](this,b.u,d,g,b.ud);var k=b.ma.s(b.fc)?new Kf(b.u,b.fc,!0,a[F](this,b.fc)):null,l=d[Ca](function(a){return!b.qd[u](a[h]())}),p=b.kc.c().map(function(d){return new Kf(b.u,d,
!0,a[F](this,d))},this);this.nh=new Lh(k,l,[],p);this.$f=b.ki(d,g)}var b=this;M(a,Lf);a[B].Yc=function(a){return new this.$f(Tc++,a)};a[B].createRow=a[B].Yc;a[B].Yb=function(a){var b={};this.sb()[n](function(g){var k=g[h]();g=g.$();var l=a[y][k];if(0==g)if(null===l)g=l;else if(g=l,""==g)g=null;else{0!=g[A]%2&&(g="0"+g);for(var l=new ArrayBuffer(g[A]/2),p=new Uint8Array(l),C=0,Ga=0;C<g[A];C+=2)p[Ga++]=ga(g.substr(C,2),16);g=l}else g=2==g?null===l?l:new Date(l):l;b[k]=g},this);return new this.$f(a.id,
b)};a[B].deserializeRow=a[B].Yb;a[B].bc=I("nh");a[B].getConstraint=a[B].bc;return a};
Z[B].ki=function(a,b){function c(c,d){this.H=a;this.ma=b;Sc[F](this,c,d)}M(c,Sc);c[B].af=function(){var a={};this.H[n](function(b){a[b[h]()]=b.dc()?null:$d[b.$()]});return a};c[B].mg=function(){var a={};this.H[n](function(b){var c=b[h]();b=b.$();var d=this.B()[c];a[c]=0==b?null===d?d:Wc(d):2==b?null===d?d:d[Oa]():d},this);return a};var d=L(function(a){var b=this.H.get(a[h]());return 2==b?function(b){b=b[a[h]()];return a.dc()&&null===b?null:b[Oa]()}:1==b?function(b){return a.dc()?(b=b[a[h]()],null===
b?null:b?1:0):b[a[h]()]?1:0}:function(b){return b[a[h]()]}},this),g=L(function(a){var b=a.map(function(a){return d(a.Va)});return function(a){return b.map(function(b){return b(a)})}},this),k={};b[n](function(a){var b=a.j();a=1==a.h[A]?d(a.h[0].Va):g(a.h);k[b]=a});c[B].Dc=function(a){return-1!=a[z]("#")?this.id():k[Xa](a)?k[a](this.B()):null};return c};
function Nh(a,b){this.w=new Oh(a,b);this.ic=new P;this.xc=!1}K("lf.schema.Builder",Nh,void 0);Nh[B].Wh=function(){this.xc||(this.ic.G()[n](function(a){a=this.ic.get(a);this.w.Wj(a.Eb())},this),this.ic[Na](),this.xc=!0)};Nh[B].Eb=function(){this.xc||this.Wh();return this.w};Nh[B].getSchema=Nh[B].Eb;Nh[B].jf=function(){var a=new md("ns_"+this.w[lb]()),b;Kh||(Kh=new Jh);b=Kh;var c=null;b.qe(a)?c=b.m(a):(c=new Jh,b.fb(a,c));return c};Nh[B].getGlobal=Nh[B].jf;
Nh[B].connect=function(a){var b=this.jf();b.qe(td)||b.fb(td,this.Eb());return(new X(b)).Na(a)};Nh[B].connect=Nh[B].connect;Nh[B].th=function(a){if(this.ic.s(a)||this.xc)throw new R("SyntaxError","Table is already created or schema is already finalized.");this.ic.set(a,new Z(a));return this.ic.get(a)};Nh[B].createTable=Nh[B].th;Nh[B].Fe=function(a){if(this.xc)throw new R("SyntaxError","Schema is already finalized.");this.w.Fe(a);return this};Nh[B].setPragma=Nh[B].Fe;
function Oh(a,b){this.u=a;this.pb=b;this.I=new P;this.Rf={Ch:!1}}K("lf.schema.DatabaseSchema",Oh,void 0);xa(Oh[B],I("u"));xa(Oh[B],Oh[B][lb]);Oh[B].version=I("pb");Oh[B].version=Oh[B][Da];Oh[B].Ya=function(){return this.I.c()};Oh[B].tables=Oh[B].Ya;na(Oh[B],function(a){if(!this.I.s(a))throw new R("NotFoundError",a+" is not found in database");return this.I.get(a)});na(Oh[B],Oh[B][t]);Oh[B].Wj=function(a){this.I.set(a[h](),a)};Oh[B].Qf=I("Rf");Oh[B].pragma=Oh[B].Qf;Oh[B].Fe=vb("Rf");
K("lf.schema.create",function(a,b){return new Nh(a,b)},void 0);
function Ph(){this.f=new P;ba.defineProperty(this,"size",{get:function(){return this.f.V()}})}la(Ph[B],function(){this.f[Na]()});K("lf.structs.MapPolyFill_.prototype.clear",Ph[B][Na],void 0);va(Ph[B],function(a){return this.f[m](a)});K("lf.structs.MapPolyFill_.prototype.delete",Ph[B][kb],void 0);Ph[B].entries=function(){return this.f.qb()};K("lf.structs.MapPolyFill_.prototype.entries",Ph[B][E],void 0);Ph[B].forEach=function(a,b){return this.f[n](a,b)};
K("lf.structs.MapPolyFill_.prototype.forEach",Ph[B][n],void 0);Ph[B].get=function(a){return this.f.get(a)};K("lf.structs.MapPolyFill_.prototype.get",Ph[B].get,void 0);Ph[B].has=function(a){return this.f.s(a)};K("lf.structs.MapPolyFill_.prototype.has",Ph[B].has,void 0);Ph[B].keys=function(){return this.f.wi()};K("lf.structs.MapPolyFill_.prototype.keys",Ph[B].keys,void 0);Ph[B].set=function(a,b){return this.f.set(a,b)};K("lf.structs.MapPolyFill_.prototype.set",Ph[B].set,void 0);ka(Ph[B],function(){return this.f.Mi()});
K("lf.structs.MapPolyFill_.prototype.values",Ph[B][Ma],void 0);
function Qh(){this.Lc=new Q;ba.defineProperty(this,"size",{get:function(){return this.Lc.V()}})}Qh[B].add=function(a){this.Lc.add(a)};K("lf.structs.SetPolyFill_.prototype.add",Qh[B].add,void 0);la(Qh[B],function(){this.Lc[Na]()});K("lf.structs.SetPolyFill_.prototype.clear",Qh[B][Na],void 0);va(Qh[B],function(a){return this.Lc[m](a)});K("lf.structs.SetPolyFill_.prototype.delete",Qh[B][kb],void 0);Qh[B].has=function(a){return this.Lc[u](a)};K("lf.structs.SetPolyFill_.prototype.has",Qh[B].has,void 0);}.bind(window))()
