(function(){'use strict';function aa(){return function(){}}function ba(a){return function(b){this[a]=b}}function f(a){return function(){return this[a]}}function l(a){return function(){return a}}var m,n=this;function q(a){return void 0!==a}function ca(){}
function da(a){var b=typeof a;if("object"==b)if(a){if(a instanceof Array)return"array";if(a instanceof Object)return b;var c=Object.prototype.toString.call(a);if("[object Window]"==c)return"object";if("[object Array]"==c||"number"==typeof a.length&&"undefined"!=typeof a.splice&&"undefined"!=typeof a.propertyIsEnumerable&&!a.propertyIsEnumerable("splice"))return"array";if("[object Function]"==c||"undefined"!=typeof a.call&&"undefined"!=typeof a.propertyIsEnumerable&&!a.propertyIsEnumerable("call"))return"function"}else return"null";
else if("function"==b&&"undefined"==typeof a.call)return"object";return b}function ea(a){return null===a}function fa(a){return null!=a}function ha(a){var b=da(a);return"array"==b||"object"==b&&"number"==typeof a.length}function ia(a){return"string"==typeof a}function ja(a){return"function"==da(a)}function la(a){return a[ma]||(a[ma]=++na)}var ma="closure_uid_"+(1E9*Math.random()>>>0),na=0;function oa(a,b,c){return a.call.apply(a.bind,arguments)}
function pa(a,b,c){if(!a)throw Error();if(2<arguments.length){var d=Array.prototype.slice.call(arguments,2);return function(){var c=Array.prototype.slice.call(arguments);Array.prototype.unshift.apply(c,d);return a.apply(b,c)}}return function(){return a.apply(b,arguments)}}function qa(a,b,c){qa=Function.prototype.bind&&-1!=Function.prototype.bind.toString().indexOf("native code")?oa:pa;return qa.apply(null,arguments)}
function ra(a,b){var c=Array.prototype.slice.call(arguments,1);return function(){var b=c.slice();b.push.apply(b,arguments);return a.apply(this,b)}}function r(a,b){var c=a.split("."),d=n;c[0]in d||!d.execScript||d.execScript("var "+c[0]);for(var e;c.length&&(e=c.shift());)!c.length&&q(b)?d[e]=b:d=d[e]?d[e]:d[e]={}}
function t(a,b){function c(){}c.prototype=b.prototype;a.Db=b.prototype;a.prototype=new c;a.prototype.constructor=a;a.ug=function(a,c,g){for(var h=Array(arguments.length-2),k=2;k<arguments.length;k++)h[k-2]=arguments[k];return b.prototype[c].apply(a,h)}};function sa(a){if(Error.captureStackTrace)Error.captureStackTrace(this,sa);else{var b=Error().stack;b&&(this.stack=b)}a&&(this.message=String(a))}t(sa,Error);sa.prototype.name="CustomError";function ta(a,b,c){this.Vf=c;this.Bf=a;this.lg=b;this.pd=0;this.kd=null}ta.prototype.get=function(){var a;0<this.pd?(this.pd--,a=this.kd,this.kd=a.next,a.next=null):a=this.Bf();return a};ta.prototype.put=function(a){this.lg(a);this.pd<this.Vf&&(this.pd++,a.next=this.kd,this.kd=a)};var ua=Array.prototype,va=ua.indexOf?function(a,b,c){return ua.indexOf.call(a,b,c)}:function(a,b,c){c=null==c?0:0>c?Math.max(0,a.length+c):c;if(ia(a))return ia(b)&&1==b.length?a.indexOf(b,c):-1;for(;c<a.length;c++)if(c in a&&a[c]===b)return c;return-1},wa=ua.forEach?function(a,b,c){ua.forEach.call(a,b,c)}:function(a,b,c){for(var d=a.length,e=ia(a)?a.split(""):a,g=0;g<d;g++)g in e&&b.call(c,e[g],g,a)},xa=ua.map?function(a,b,c){return ua.map.call(a,b,c)}:function(a,b,c){for(var d=a.length,e=Array(d),
g=ia(a)?a.split(""):a,h=0;h<d;h++)h in g&&(e[h]=b.call(c,g[h],h,a));return e},ya=ua.reduce?function(a,b,c,d){d&&(b=qa(b,d));return ua.reduce.call(a,b,c)}:function(a,b,c,d){var e=c;wa(a,function(c,h){e=b.call(d,e,c,h,a)});return e},za=ua.some?function(a,b,c){return ua.some.call(a,b,c)}:function(a,b,c){for(var d=a.length,e=ia(a)?a.split(""):a,g=0;g<d;g++)if(g in e&&b.call(c,e[g],g,a))return!0;return!1};function Aa(a,b,c){return 2>=arguments.length?ua.slice.call(a,b):ua.slice.call(a,b,c)}
function Ba(a){for(var b=[],c=0;c<a;c++)b[c]=0;return b}function Ca(a){for(var b=[],c=0;c<arguments.length;c++){var d=arguments[c];if("array"==da(d))for(var e=0;e<d.length;e+=8192)for(var g=Ca.apply(null,Aa(d,e,e+8192)),h=0;h<g.length;h++)b.push(g[h]);else b.push(d)}return b};function Da(a){var b=[],c=0,d;for(d in a)b[c++]=a[d];return b};var Ea;a:{var Fa=n.navigator;if(Fa){var Ga=Fa.userAgent;if(Ga){Ea=Ga;break a}}Ea=""}function u(a){return-1!=Ea.indexOf(a)};function Ha(){return u("Opera")||u("OPR")}function Ia(){return(u("Chrome")||u("CriOS"))&&!Ha()&&!u("Edge")};function Ja(a){n.setTimeout(function(){throw a;},0)}var Ka;
function La(){var a=n.MessageChannel;"undefined"===typeof a&&"undefined"!==typeof window&&window.postMessage&&window.addEventListener&&!u("Presto")&&(a=function(){var a=document.createElement("IFRAME");a.style.display="none";a.src="";document.documentElement.appendChild(a);var b=a.contentWindow,a=b.document;a.open();a.write("");a.close();var c="callImmediate"+Math.random(),d="file:"==b.location.protocol?"*":b.location.protocol+"//"+b.location.host,a=qa(function(a){if(("*"==d||a.origin==d)&&a.data==
c)this.port1.onmessage()},this);b.addEventListener("message",a,!1);this.port1={};this.port2={postMessage:function(){b.postMessage(c,d)}}});if("undefined"!==typeof a&&!u("Trident")&&!u("MSIE")){var b=new a,c={},d=c;b.port1.onmessage=function(){if(q(c.next)){c=c.next;var a=c.ue;c.ue=null;a()}};return function(a){d.next={ue:a};d=d.next;b.port2.postMessage(0)}}return"undefined"!==typeof document&&"onreadystatechange"in document.createElement("SCRIPT")?function(a){var b=document.createElement("SCRIPT");
b.onreadystatechange=function(){b.onreadystatechange=null;b.parentNode.removeChild(b);b=null;a();a=null};document.documentElement.appendChild(b)}:function(a){n.setTimeout(a,0)}};function Ma(){this.xd=this.hc=null}var Oa=new ta(function(){return new Na},function(a){a.reset()},100);Ma.prototype.add=function(a,b){var c=Oa.get();c.set(a,b);this.xd?this.xd.next=c:this.hc=c;this.xd=c};Ma.prototype.remove=function(){var a=null;this.hc&&(a=this.hc,this.hc=this.hc.next,this.hc||(this.xd=null),a.next=null);return a};function Na(){this.next=this.scope=this.Kd=null}Na.prototype.set=function(a,b){this.Kd=a;this.scope=b;this.next=null};
Na.prototype.reset=function(){this.next=this.scope=this.Kd=null};function Pa(a,b){Ra||Sa();Ta||(Ra(),Ta=!0);Ua.add(a,b)}var Ra;function Sa(){if(n.Promise&&n.Promise.resolve){var a=n.Promise.resolve(void 0);Ra=function(){a.then(Va)}}else Ra=function(){var a=Va;!ja(n.setImmediate)||n.Window&&n.Window.prototype&&n.Window.prototype.setImmediate==n.setImmediate?(Ka||(Ka=La()),Ka(a)):n.setImmediate(a)}}var Ta=!1,Ua=new Ma;function Va(){for(var a=null;a=Ua.remove();){try{a.Kd.call(a.scope)}catch(b){Ja(b)}Oa.put(a)}Ta=!1};function v(a,b){this.Ra=0;this.af=void 0;this.Zc=this.$b=this.C=null;this.jd=this.Jd=!1;if(a!=ca)try{var c=this;a.call(b,function(a){Wa(c,2,a)},function(a){Wa(c,3,a)})}catch(d){Wa(this,3,d)}}function Xa(){this.next=this.context=this.fc=this.Ic=this.child=null;this.Ad=!1}Xa.prototype.reset=function(){this.context=this.fc=this.Ic=this.child=null;this.Ad=!1};var Ya=new ta(function(){return new Xa},function(a){a.reset()},100);function Za(a,b,c){var d=Ya.get();d.Ic=a;d.fc=b;d.context=c;return d}
function w(a){if(a instanceof v)return a;var b=new v(ca);Wa(b,2,a);return b}function $a(a){return new v(function(b,c){c(a)})}function ab(a,b,c){bb(a,b,c,null)||Pa(ra(b,a))}function cb(a){return new v(function(b,c){var d=a.length,e=[];if(d)for(var g=function(a,c){d--;e[a]=c;0==d&&b(e)},h=function(a){c(a)},k=0,p;k<a.length;k++)p=a[k],ab(p,ra(g,k),h);else b(e)})}function db(){var a,b,c=new v(function(c,e){a=c;b=e});return new eb(c,a,b)}
v.prototype.then=function(a,b,c){return fb(this,ja(a)?a:null,ja(b)?b:null,c)};v.prototype.then=v.prototype.then;v.prototype.$goog_Thenable=!0;function gb(a,b,c){fb(a,null,b,c)}function hb(a,b){a.$b||2!=a.Ra&&3!=a.Ra||ib(a);a.Zc?a.Zc.next=b:a.$b=b;a.Zc=b}
function fb(a,b,c,d){var e=Za(null,null,null);e.child=new v(function(a,h){e.Ic=b?function(c){try{var e=b.call(d,c);a(e)}catch(E){h(E)}}:a;e.fc=c?function(b){try{var e=c.call(d,b);!q(e)&&b instanceof jb?h(b):a(e)}catch(E){h(E)}}:h});e.child.C=a;hb(a,e);return e.child}v.prototype.qg=function(a){this.Ra=0;Wa(this,2,a)};v.prototype.rg=function(a){this.Ra=0;Wa(this,3,a)};
function Wa(a,b,c){0==a.Ra&&(a==c&&(b=3,c=new TypeError("Promise cannot resolve to itself")),a.Ra=1,bb(c,a.qg,a.rg,a)||(a.af=c,a.Ra=b,a.C=null,ib(a),3!=b||c instanceof jb||kb(a,c)))}function bb(a,b,c,d){if(a instanceof v)return hb(a,Za(b||ca,c||null,d)),!0;var e;if(a)try{e=!!a.$goog_Thenable}catch(g){e=!1}else e=!1;if(e)return a.then(b,c,d),!0;e=typeof a;if("object"==e&&null!=a||"function"==e)try{var h=a.then;if(ja(h))return lb(a,h,b,c,d),!0}catch(k){return c.call(d,k),!0}return!1}
function lb(a,b,c,d,e){function g(a){k||(k=!0,d.call(e,a))}function h(a){k||(k=!0,c.call(e,a))}var k=!1;try{b.call(a,h,g)}catch(p){g(p)}}function ib(a){a.Jd||(a.Jd=!0,Pa(a.Gf,a))}function mb(a){var b=null;a.$b&&(b=a.$b,a.$b=b.next,b.next=null);a.$b||(a.Zc=null);return b}
v.prototype.Gf=function(){for(var a=null;a=mb(this);){var b=this.Ra,c=this.af;if(3==b&&a.fc&&!a.Ad)for(var d=void 0,d=this;d&&d.jd;d=d.C)d.jd=!1;if(a.child)a.child.C=null,nb(a,b,c);else try{a.Ad?a.Ic.call(a.context):nb(a,b,c)}catch(e){ob.call(null,e)}Ya.put(a)}this.Jd=!1};function nb(a,b,c){2==b?a.Ic.call(a.context,c):a.fc&&a.fc.call(a.context,c)}function kb(a,b){a.jd=!0;Pa(function(){a.jd&&ob.call(null,b)})}var ob=Ja;function jb(a){sa.call(this,a)}t(jb,sa);jb.prototype.name="cancel";
function eb(a,b,c){this.ha=a;this.resolve=b;this.reject=c};/*

 Copyright 2014 The Lovefield Project Authors. All Rights Reserved.

 Licensed under the Apache License, Version 2.0 (the "License");
 you may not use this file except in compliance with the License.
 You may obtain a copy of the License at

     http://www.apache.org/licenses/LICENSE-2.0

 Unless required by applicable law or agreed to in writing, software
 distributed under the License is distributed on an "AS IS" BASIS,
 WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 See the License for the specific language governing permissions and
 limitations under the License.
*/
function x(a,b){this.ma=a;this.o=b||this.ze()}var pb=0;m=x.prototype;m.id=f("ma");m.ze=function(){return{}};m.jf=f("o");m.Fa=function(){return{id:this.ma,value:this.jf()}};m.Mb=function(a){return"#"==a.substr(-1)?this.ma:null};function qb(a){return new x(a.id,a.value)}function rb(a){return new x(pb++,a||{})}function sb(a){if(null==a)return null;a=new Uint8Array(a);for(var b="",c=0;c<a.length;++c)var d=a[c].toString(16),b=b+(2>d.length?"0"+d:d);return b};function tb(a){this.type=a}function ub(a){x.call(this,-1,a)}t(ub,x);function vb(a,b,c,d){c=c||function(a,b){return a==b};d=d||function(b){return a[b]};for(var e=a.length,g=b.length,h=[],k=0;k<e+1;k++)h[k]=[],h[k][0]=0;for(var p=0;p<g+1;p++)h[0][p]=0;for(k=1;k<=e;k++)for(p=1;p<=g;p++)c(a[k-1],b[p-1])?h[k][p]=h[k-1][p-1]+1:h[k][p]=Math.max(h[k-1][p],h[k][p-1]);for(var E=[],k=e,p=g;0<k&&0<p;)c(a[k-1],b[p-1])?(E.unshift(d(k-1,p-1)),k--,p--):h[k-1][p]>h[k][p-1]?k--:p--;return E}function wb(a){return ya(arguments,function(a,c){return a+c},0)}
function xb(a){return wb.apply(null,arguments)/arguments.length}function yb(a){var b=arguments.length;if(2>b)return 0;var c=xb.apply(null,arguments);return wb.apply(null,xa(arguments,function(a){return Math.pow(a-c,2)}))/(b-1)}function zb(a){return Math.sqrt(yb.apply(null,arguments))};var Ab="StopIteration"in n?n.StopIteration:{message:"StopIteration",stack:""};function Bb(){}Bb.prototype.next=function(){throw Ab;};Bb.prototype.ic=function(){return this};function Cb(a){if(a instanceof Bb)return a;if("function"==typeof a.ic)return a.ic(!1);if(ha(a)){var b=0,c=new Bb;c.next=function(){for(;;){if(b>=a.length)throw Ab;if(b in a)return a[b++];b++}};return c}throw Error("Not implemented");}
function Db(a,b){if(ha(a))try{wa(a,b,void 0)}catch(c){if(c!==Ab)throw c;}else{a=Cb(a);try{for(;;)b.call(void 0,a.next(),void 0,a)}catch(d){if(d!==Ab)throw d;}}}function Eb(a){if(za(arguments,function(a){return!a.length})||!arguments.length)return new Bb;var b=new Bb,c=arguments,d=Ba(c.length);b.next=function(){if(d){for(var a=xa(d,function(a,b){return c[b][a]}),b=d.length-1;0<=b;b--){if(d[b]<c[b].length-1){d[b]++;break}if(0==b){d=null;break}d[b]=0}return a}throw Ab;};return b};function Fb(a,b){this.l={};this.b=[];this.La=this.wb=0;var c=arguments.length;if(1<c){if(c%2)throw Error("Uneven number of arguments");for(var d=0;d<c;d+=2)this.set(arguments[d],arguments[d+1])}else a&&this.addAll(a)}m=Fb.prototype;m.vc=f("wb");m.ta=function(){Gb(this);for(var a=[],b=0;b<this.b.length;b++)a.push(this.l[this.b[b]]);return a};function Hb(a){Gb(a);return a.b.concat()}m.Ha=function(a){return Ib(this.l,a)};m.md=function(){return 0==this.wb};
m.clear=function(){this.l={};this.La=this.wb=this.b.length=0};m.remove=function(a){return Ib(this.l,a)?(delete this.l[a],this.wb--,this.La++,this.b.length>2*this.wb&&Gb(this),!0):!1};function Gb(a){if(a.wb!=a.b.length){for(var b=0,c=0;b<a.b.length;){var d=a.b[b];Ib(a.l,d)&&(a.b[c++]=d);b++}a.b.length=c}if(a.wb!=a.b.length){for(var e={},c=b=0;b<a.b.length;)d=a.b[b],Ib(e,d)||(a.b[c++]=d,e[d]=1),b++;a.b.length=c}}m.get=function(a,b){return Ib(this.l,a)?this.l[a]:b};
m.set=function(a,b){Ib(this.l,a)||(this.wb++,this.b.push(a),this.La++);this.l[a]=b};m.addAll=function(a){var b;if(a instanceof Fb)b=Hb(a),a=a.ta();else{b=[];var c=0,d;for(d in a)b[c++]=d;a=Da(a)}for(c=0;c<b.length;c++)this.set(b[c],a[c])};m.forEach=function(a,b){for(var c=Hb(this),d=0;d<c.length;d++){var e=c[d],g=this.get(e);a.call(b,g,e,this)}};m.clone=function(){return new Fb(this)};
m.ic=function(a){Gb(this);var b=0,c=this.La,d=this,e=new Bb;e.next=function(){if(c!=d.La)throw Error("The map has changed since the iterator was created");if(b>=d.b.length)throw Ab;var e=d.b[b++];return a?e:d.l[e]};return e};function Ib(a,b){return Object.prototype.hasOwnProperty.call(a,b)};/*

 Copyright 2015 The Lovefield Project Authors. All Rights Reserved.

 Licensed under the Apache License, Version 2.0 (the "License");
 you may not use this file except in compliance with the License.
 You may obtain a copy of the License at

     http://www.apache.org/licenses/LICENSE-2.0

 Unless required by applicable law or agreed to in writing, software
 distributed under the License is distributed on an "AS IS" BASIS,
 WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 See the License for the specific language governing permissions and
 limitations under the License.
*/
function y(){this.l=new Fb;Object.defineProperty(this,"size",{get:function(){return this.l.vc()}})}y.prototype.clear=function(){this.l.clear()};y.prototype.clear=y.prototype.clear;y.prototype.delete=function(a){return this.l.remove(a)};y.prototype["delete"]=y.prototype.delete;y.prototype.forEach=function(a,b){return this.l.forEach(a,b)};y.prototype.forEach=y.prototype.forEach;y.prototype.get=function(a){return this.l.get(a)};y.prototype.get=y.prototype.get;y.prototype.has=function(a){return this.l.Ha(a)};
y.prototype.has=y.prototype.has;y.prototype.set=function(a,b){return this.l.set(a,b)};y.prototype.set=y.prototype.set;function z(){return window.Map&&window.Map.prototype.values&&window.Map.prototype.forEach?new window.Map:new y}function Jb(a){if(a instanceof y)return Hb(a.l);var b=0,c=Array(a.size);a.forEach(function(a,e){c[b++]=e});return c}function A(a){if(a instanceof y)return a.l.ta();var b=0,c=Array(a.size);a.forEach(function(a){c[b++]=a});return c};var Kb={};r("lf.TransactionType",Kb);Kb.READ_ONLY=0;Kb.READ_WRITE=1;function Lb(a,b){this.Oa=a;this.kf=b;this.Z=db()}Lb.prototype.la=function(){try{Mb(this.Oa)}catch(a){return $a(a)}return(0==this.kf?this.lc():Nb(this)).then(function(a){this.Oa.la();return a}.bind(this))};function Nb(a){Ob(a);Pb(a);return a.lc()}
function Ob(a){a.Oa.mb.forEach(function(a,c){var d=this.Oa.ba().get(c),d=this.J(d.getName(),d.ac.bind(d)),e=A(a.za).map(function(a){return a.id()});0<e.length&&gb(d.remove(e),this.Md,this);e=A(a.na).map(function(a){return a[1]}).concat(A(a.ya));gb(d.put(e),this.Md,this)},a)}function Pb(a){Qb(a.Oa).forEach(function(a){var c=this.J(a.getName(),qb),d;c.get([-1]).then(function(a){d=a;return c.remove([])}).then(function(){c.put(d);c.put(a.Fa())},this.Md.bind(this))},a)}Lb.prototype.Md=function(a){this.Z.reject(a)};function Rb(a){this.mg=a}Rb.prototype.toString=f("mg");var Sb=new Rb("backstore"),Tb=new Rb("cache"),Vb=new Rb("indexstore"),Wb=new Rb("engine"),Xb=new Rb("runner"),Yb=new Rb("observerregistry"),Zb=new Rb("schema");function $b(a){if("function"==typeof a.ta)return a.ta();if(ia(a))return a.split("");if(ha(a)){for(var b=[],c=a.length,d=0;d<c;d++)b.push(a[d]);return b}return Da(a)};function ac(a){this.l=new Fb;a&&this.addAll(a)}function bc(a){var b=typeof a;return"object"==b&&a||"function"==b?"o"+la(a):b.substr(0,1)+a}m=ac.prototype;m.vc=function(){return this.l.vc()};m.add=function(a){this.l.set(bc(a),a)};m.addAll=function(a){a=$b(a);for(var b=a.length,c=0;c<b;c++)this.add(a[c])};m.remove=function(a){return this.l.remove(bc(a))};m.clear=function(){this.l.clear()};m.md=function(){return this.l.md()};m.contains=function(a){return this.l.Ha(bc(a))};m.ta=function(){return this.l.ta()};
m.clone=function(){return new ac(this)};m.ic=function(){return this.l.ic(!1)};var cc=Ha(),dc=u("Trident")||u("MSIE"),ec=u("Edge"),fc=u("Gecko")&&!(-1!=Ea.toLowerCase().indexOf("webkit")&&!u("Edge"))&&!(u("Trident")||u("MSIE"))&&!u("Edge"),gc=-1!=Ea.toLowerCase().indexOf("webkit")&&!u("Edge");function hc(){var a=Ea;if(fc)return/rv\:([^\);]+)(\)|;)/.exec(a);if(ec)return/Edge\/([\d\.]+)/.exec(a);if(dc)return/\b(?:MSIE|rv)[: ]([^\);]+)(\)|;)/.exec(a);if(gc)return/WebKit\/(\S+)/.exec(a)}
(function(){if(cc&&n.opera){var a=n.opera.version;return ja(a)?a():a}var a="",b=hc();b&&(a=b?b[1]:"");return dc&&(b=(b=n.document)?b.documentMode:void 0,b>parseFloat(a))?String(b):a})();!u("Android")||Ia()||u("Firefox")||Ha();Ia();var ic=u("Safari")&&!(Ia()||u("Coast")||Ha()||u("Edge")||u("Silk")||u("Android"))&&!(u("iPhone")&&!u("iPod")&&!u("iPad")||u("iPad")||u("iPod"));function jc(a){this.Tb=new ac(a);Object.defineProperty(this,"size",{get:function(){return this.Tb.vc()}})}jc.prototype.add=function(a){this.Tb.add(a)};jc.prototype.add=jc.prototype.add;jc.prototype.clear=function(){this.Tb.clear()};jc.prototype.clear=jc.prototype.clear;jc.prototype.delete=function(a){return this.Tb.remove(a)};jc.prototype["delete"]=jc.prototype.delete;jc.prototype.forEach=function(a,b){this.Tb.ta().forEach(a,b)};jc.prototype.has=function(a){return this.Tb.contains(a)};
jc.prototype.has=jc.prototype.has;function B(a){return window.Set&&window.Set.prototype.values&&window.Set.prototype.forEach&&!ic?new window.Set(a):new jc(a)}function kc(a){if(a instanceof jc)return a.Tb.ta();var b=0,c=Array(a.size);a.forEach(function(a){c[b++]=a});return c}function lc(a,b){if(b.size>a.size)return!1;var c=!0;b.forEach(function(b){c=c&&a.has(b)});return c};function mc(a,b){this.ma=a;this.o=b||{}}function nc(a){var b=B();a.forEach(function(a){b.add(a>>9)});return kc(b)}mc.prototype.Y=f("ma");function oc(a,b){b.forEach(function(a){this.o[a.id()]=a.Fa()},a)}function pc(a,b){b.forEach(function(a){delete this.o[a]},a)}mc.prototype.Fa=function(){return{id:this.ma,value:JSON.stringify(this.o)}};function qc(a){return new mc(a.id,JSON.parse(a.value))};function rc(a,b,c){this.X=a;this.Ib=b;this.bf=c}m=rc.prototype;m.get=function(a){if(0==a.length)return this.uc();var b=this.Ib;return sc(this,a).then(function(c){return a.map(function(a){var e=c.get(a>>9);return b(e.o[a])})})};function sc(a,b){var c=z(),d=db(),e=nc(b).map(function(a){return new v(function(b,d){var e;try{e=this.X.get(a)}catch(E){d(E);return}e.onerror=d;e.onsuccess=function(a){a=qc(a.target.result);c.set(a.Y(),a);b()}},this)},a);cb(e).then(function(){d.resolve(c)});return d.ha}
m.uc=function(){return new v(function(a,b){var c=[],d;try{d=this.X.openCursor()}catch(e){b(e);return}d.onerror=b;d.onsuccess=function(){var b=d.result;if(b){var e;e=qc(b.value).o;for(var k in e)c.push(this.Ib(e[k]));b.continue()}else a(c)}.bind(this)},this)};m.Pb=function(a){return new v(function(b,c){var d;try{d=a()}catch(e){c(e);return}d.onsuccess=b;d.onerror=c},this)};
m.put=function(a){if(0==a.length)return w();var b=z();a.forEach(function(a){var d;d=a.id()>>9;var e=b.get(d)||null;null===e&&(e=this.bf(this.X.name,d));oc(e,[a]);b.set(d,e)},this);a=A(b).map(function(a){return this.Pb(function(){return this.X.put(a.Fa())}.bind(this))},this);return cb(a)};
m.remove=function(a){if(0==a.length)return this.Pb(function(){return this.X.clear()}.bind(this));var b=z();a.forEach(function(a){var d=a>>9,e=b.get(d)||null;null===e&&(e=this.bf(this.X.name,d));pc(e,[a]);b.set(d,e)},this);a=A(b).map(function(a){return this.Pb(function(){return 0==Object.keys(a.o).length?this.X.delete(a.Y()):this.X.put(a.Fa())}.bind(this))},this);return cb(a)};function tc(a,b,c){a=a.m(Tb);var d=[c<<9,(c+1<<9)-1];b=a.bb(b,d[0],d[1]);c=new mc(c);oc(c,b);return c}
function uc(a,b){return new mc(b)};function vc(){};function wc(a){this.ja=a.m(Tb);this.G=a.m(Vb);this.s=a.m(Zb)}wc.prototype.update=function(a){a.forEach(function(a){xc(this,a);yc(this,a)},this)};function yc(a,b){var c=b.getName();b.za.forEach(function(a,b){this.ja.remove(c,b)},a);b.ya.forEach(function(a){this.ja.set(c,a)},a);b.na.forEach(function(a){this.ja.set(c,a[1])},a)}function xc(a,b){var c=a.s.table(b.getName());zc(b).forEach(function(a){Ac(this,c,a)},a)}
function Ac(a,b,c){var d=[];(a.G.Oc.get(b.getName())||[]).forEach(function(a){try{Bc(a,c),d.push(a)}catch(b){throw d.forEach(function(a){Bc(a,[c[1],c[0]])},this),b;}},a)}function Bc(a,b){var c=null===b[1]?void 0:b[1].Mb(a.getName()),d=null===b[0]?void 0:b[0].Mb(a.getName());if(!q(d)&&q(c))a.add(c,b[1].id());else if(q(d)&&q(c)){if(null===c||null===d){if(c==d)return}else if(0==a.mc().compare(d,c))return;a.add(c,b[1].id());a.remove(d,b[0].id())}else q(d)&&!q(c)&&a.remove(d,b[0].id())};var Cc={};r("lf.ConstraintAction",Cc);Cc.RESTRICT=0;Cc.CASCADE=1;var Dc={};r("lf.ConstraintTiming",Dc);Dc.IMMEDIATE=0;Dc.DEFERRABLE=1;var Ec={};r("lf.Order",Ec);Ec.DESC=0;Ec.ASC=1;var Fc={};r("lf.Type",Fc);Fc.ARRAY_BUFFER=0;Fc.BOOLEAN=1;Fc.DATE_TIME=2;Fc.INTEGER=3;Fc.NUMBER=4;Fc.STRING=5;Fc.OBJECT=6;var Gc={0:null,1:!1,2:Object.freeze(new Date(0)),3:0,4:0,5:"",6:null};r("lf.type.DEFAULT_VALUES",Gc);function C(a,b){this.code=a;this.message="http://sn.im/2a0j3wn?c="+a;if(1<arguments.length)for(var c=1;c<=Math.min(4,arguments.length-1);++c)this.message+="&p"+(c-1)+"="+encodeURIComponent(String(arguments[c].toString().slice(0,64)))}t(C,Error);function Hc(a){this.G=a.m(Vb);this.s=a.m(Zb);this.cd=null}function Ic(a,b,c){var d=b.zb().$f;c.forEach(function(a){d.forEach(function(b){if(null==a.o[b.getName()])throw new C(202,b.j());},this)},a)}function Jc(a,b,c,d){b.zb().Ld().forEach(function(a){a.timing==d&&Kc(this,a,c)},a)}function Kc(a,b,c){var d=Mc(a,b);c.forEach(function(a){if(Nc(a[0],a[1],b.name)&&(a=a[1].o[b.Fb],null!==a&&!d.Ha(a)))throw new C(203,b.name);},a)}
function Mc(a,b){null===a.cd&&(a.cd=z());var c=a.cd.get(b.name)||null;null===c&&(c=a.s.table(b.tb)[b.Jc].sa(),c=a.G.get(c.j()),a.cd.set(b.name,c));return c}function Nc(a,b,c){return(null===a?null!==b:null===b)||a.Mb(c)!=b.Mb(c)}function Oc(a,b,c,d){b=Pc(a.s.info(),b.getName());null!=b&&b.forEach(function(a){if(a.timing==d){var b=this.G.get(a.name),h=Mc(this,a);c.forEach(function(c){if(Nc(c[0],c[1],h.getName())&&b.Ha(c[0].o[a.Jc]))throw new C(203,a.name);},this)}},a)}
function Qc(a,b,c,d){0!=c.length&&(c=c.map(function(a){return[null,a]}),Jc(a,b,c,d))}function Rc(a,b,c,d){0!=c.length&&(Jc(a,b,c,d),Oc(a,b,c,d))}function Sc(a,b,c,d){0!=c.length&&(c=c.map(function(a){return[a,null]}),Oc(a,b,c,d))};function Tc(a){this.ya=z();this.na=z();this.za=z();this.u=a}m=Tc.prototype;m.getName=f("u");m.add=function(a){if(this.za.has(a.id())){var b=[this.za.get(a.id()),a];this.na.set(a.id(),b);this.za.delete(a.id())}else this.ya.set(a.id(),a)};m.modify=function(a){var b=a[1],c=a[0].id();this.ya.has(c)?this.ya.set(c,b):(this.na.has(c)&&(a=[this.na.get(a[0].id())[0],b]),this.na.set(c,a))};
m.delete=function(a){if(this.ya.has(a.id()))this.ya.delete(a.id());else if(this.na.has(a.id())){var b=this.na.get(a.id())[0];this.na.delete(a.id());this.za.set(a.id(),b)}else this.za.set(a.id(),a)};function zc(a){var b=[];a.ya.forEach(function(a){b.push([null,a])});a.na.forEach(function(a){b.push(a)});a.za.forEach(function(a){b.push([a,null])});return b}m.toString=function(){return"["+Jb(this.ya).toString()+"], ["+Jb(this.na).toString()+"], ["+Jb(this.za).toString()+"]"};
function Uc(a){var b=new Tc(a.u);a.ya.forEach(function(a){b.delete(a)});a.za.forEach(function(a){b.add(a)});a.na.forEach(function(a){b.modify([a[1],a[0]])});return b}m.md=function(){return 0==this.ya.size&&0==this.za.size&&0==this.na.size};function Vc(a,b){this.pa=z();b.forEach(function(a){this.pa.set(a.getName(),a)},this);this.ja=a.m(Tb);this.G=a.m(Vb);this.Ma=new Hc(a);this.ld=new wc(a);this.mb=z()}function Qb(a){var b=[];Jb(a.mb).map(function(a){return this.pa.get(a)},a).forEach(function(a){a.Bb()&&(a.Aa().forEach(function(a){b.push(this.G.get(a.j()))},this),b.push(this.G.get(a.getName()+".#")))},a);return b}m=Vc.prototype;m.ba=f("pa");
function Wc(a){var b=[];a.pa.forEach(function(a){a.Bb()&&(a.Aa().forEach(function(a){b.push(a.j())}),b.push(a.getName()+".#"))});return b}m.rb=function(a,b){Xc(this,a);Ic(this.Ma,a,b);Qc(this.Ma,a,b,0);for(var c=0;c<b.length;c++)Yc(this,a,[null,b[c]])};
function Yc(a,b,c){var d=b.getName(),e=a.mb.get(d)||new Tc(d);a.mb.set(d,e);try{Ac(a.ld,b,c)}catch(g){throw g;}b=c[0];var h=c[1];null===b&&null!==h?(a.ja.set(d,h),e.add(h)):null!==b&&null!==h?(a.ja.set(d,h),e.modify(c)):null!==b&&null===h&&(a.ja.remove(d,b.id()),e.delete(b))}m.update=function(a,b){Xc(this,a);Ic(this.Ma,a,b);for(var c=0;c<b.length;c++){var d=b[c],d=[this.ja.get(d.id()),d];Rc(this.Ma,a,[d],0);Yc(this,a,d)}};
m.Od=function(a,b){Xc(this,a);Ic(this.Ma,a,b);for(var c=0;c<b.length;c++){var d=b[c],e=null,g,h=a.zb().fd();if(null===h)g=null;else{g=this.Ma;var h=h.j(),k=d.Mb(h);g=g.G.get(h).get(k);g=0==g.length?null:g[0]}null!=g?(e=this.ja.get(g),d.ma=g,Rc(this.Ma,a,[[e,d]],0)):Qc(this.Ma,a,[d],0);Yc(this,a,[e,d])}};m.remove=function(a,b){Xc(this,a);Sc(this.Ma,a,b,0);for(var c=0;c<b.length;c++)Yc(this,a,[b[c],null])};
function Mb(a){a.mb.forEach(function(a){var c=this.pa.get(a.getName());Qc(this.Ma,c,A(a.ya),1);Sc(this.Ma,c,A(a.za),1);Rc(this.Ma,c,A(a.na),1)},a)}m.la=aa();m.Cb=function(){var a=A(this.mb).map(function(a){return Uc(a)});this.ld.update(a)};function Xc(a,b){if(!a.pa.has(b.getName()))throw new C(106,b.getName());};function Zc(a,b,c,d){this.c=a;this.w=b;this.$=null===this.c?!1:c;this.ka=null===this.w?!1:d}Zc.prototype.toString=function(){return(this.$?"(":"[")+(null===this.c?"unbound":this.c)+", "+(null===this.w?"unbound":this.w)+(this.ka?")":"]")};function $c(a){if(null===a.c&&null===a.w)return[];var b=null,c=null;null===a.c||(b=new Zc(null,a.c,!1,!a.$));null===a.w||(c=new Zc(a.w,null,!a.ka,!1));return[b,c].filter(function(a){return null!==a})}
Zc.prototype.reverse=function(){return new Zc(this.w,this.c,this.ka,this.$)};function ad(a,b){var c=bd(a.c,b.c,!0,a.$,b.$);if(0==c)return!0;var d=-1==c?a:b,c=1==c?a:b;return null===d.w||d.w>c.c||d.w==c.c&&!d.ka&&!c.$}function cd(){return new Zc(null,null,!1,!1)}function dd(a){return null===a.c&&null===a.w}function ed(a){return null!=a.c&&a.c==a.w&&!a.$&&!a.ka}Zc.prototype.contains=function(a){var b=null===this.w||a<this.w||a==this.w&&!this.ka;return(null===this.c||a>this.c||a==this.c&&!this.$)&&b};
function bd(a,b,c,d,e){function g(a){return c?a:1==a?-1:1}d=d||!1;e=e||!1;return null===a?null===b?(d?!e:e)?d?g(1):g(-1):0:g(-1):null===b?g(1):a<b?-1:a==b?(d?!e:e)?d?g(1):g(-1):0:1}function fd(a,b){var c=bd(a.c,b.c,!0,a.$,b.$);0==c&&(c=bd(a.w,b.w,!1,a.ka,b.ka));return c};function D(a,b){this.entries=a;this.K=B(b);this.Va=null}function F(a){return kc(a.K)}function gd(a){return a.entries.map(function(a){return a.ra.o})}function hd(a){return a.entries.map(function(a){return a.ra.id()})}function id(a,b){return a.Va.get(b.j())}var jd=null;function kd(){null===jd&&(jd=new D([],[]));return jd}
function ld(a){if(0==a.length)return kd();for(var b=a.reduce(function(a,b){return a+b.entries.length},0),c=Array(b),d=0,b=a.map(function(a){var b=z();a.entries.forEach(function(a){c[d++]=a;b.set(a.id,a)});return b}),e=z(),g=0;g<c.length;g++)b.every(function(a){return a.has(c[g].id)})&&e.set(c[g].id,c[g]);return new D(A(e),kc(a[0].K))}function md(a){if(0==a.length)return kd();var b=z();a.forEach(function(a){a.entries.forEach(function(a){b.set(a.id,a)})});return new D(A(b),kc(a[0].K))}
function nd(a,b){var c=1<b.length,d=a.map(function(a){return new od(a,c)});return new D(d,b)}function od(a,b){this.ra=a;this.id=pd++;this.Rd=b}var pd=0;function G(a,b){var c=b.Wa();return null!==c&&a.ra.o.hasOwnProperty(c)?a.ra.o[c]:a.Rd?a.ra.o[H(b.J())][b.getName()]:a.ra.o[b.getName()]}function qd(a,b,c){var d=b.Wa();if(null!=d)a.ra.o[d]=c;else if(a.Rd){var d=H(b.J()),e=a.ra.o[d];null==e&&(e={},a.ra.o[d]=e);e[b.getName()]=c}else a.ra.o[b.getName()]=c}
function rd(a,b,c,d){function e(a,b){if(a.Rd){var c=a.ra.o,d;for(d in c)g[d]=c[d]}else g[b[0]]=a.ra.o}var g={};e(a,b);e(c,d);a=new x(-1,g);return new od(a,!0)};r("lf.bind",function(a){return new I(a)});function I(a){this.ca=a}r("lf.Binder",I);I.prototype.sa=f("ca");function sd(){this.Le=td();var a=ud();this.dc=z();this.dc.set(1,vd());this.dc.set(2,wd());this.dc.set(4,a);this.dc.set(3,a);this.dc.set(5,xd())}sd.wc=function(){return sd.He?sd.He:sd.He=new sd};function yd(a,b,c){return(a.dc.get(b)||null).get(c)||null}function td(){function a(a){return a}var b=z();b.set(1,function(a){return null===a?null:a?1:0});b.set(2,function(a){return null===a?null:a.getTime()});b.set(3,a);b.set(4,a);b.set(5,a);return b}
function vd(){var a=z();a.set("eq",function(a,c){return a==c});a.set("neq",function(a,c){return a!=c});return a}
function ud(){var a=vd();a.set("between",function(a,c){return null===a||null===c[0]||null===c[1]?!1:a>=c[0]&&a<=c[1]});a.set("gte",function(a,c){return null===a||null===c?!1:a>=c});a.set("gt",function(a,c){return null===a||null===c?!1:a>c});a.set("in",function(a,c){return-1!=c.indexOf(a)});a.set("lte",function(a,c){return null===a||null===c?!1:a<=c});a.set("lt",function(a,c){return null===a||null===c?!1:a<c});return a}
function xd(){var a=ud();a.set("match",function(a,c){return null===a||null===c?!1:(new RegExp(c)).test(a)});return a}
function wd(){var a=z();a.set("between",function(a,c){return null===a||null===c[0]||null===c[1]?!1:a.getTime()>=c[0].getTime()&&a.getTime()<=c[1].getTime()});a.set("eq",function(a,c){return(null===a?-1:a.getTime())==(null===c?-1:c.getTime())});a.set("gte",function(a,c){return null===a||null===c?!1:a.getTime()>=c.getTime()});a.set("gt",function(a,c){return null===a||null===c?!1:a.getTime()>c.getTime()});a.set("in",function(a,c){return c.some(function(c){return c.getTime()==a.getTime()})});a.set("lte",
function(a,c){return null===a||null===c?!1:a.getTime()<=c.getTime()});a.set("lt",function(a,c){return null===a||null===c?!1:a.getTime()<c.getTime()});a.set("neq",function(a,c){return(null===a?-1:a.getTime())!=(null===c?-1:c.getTime())});return a};function J(){this.g=this.C=null}var zd=[];J.prototype.getParent=f("C");J.prototype.cb=function(){for(var a=this;!ea(a.getParent());)a=a.getParent();return a};function Ad(a){for(var b=0;!ea(a.getParent());)b++,a=a.getParent();return b}function K(a){return a.g||zd}function Bd(a,b){return K(a)[b]||null}function Cd(a,b,c){b.C=a;null===a.g?a.g=[b]:a.g.splice(c,0,b)}function L(a,b){b.C=a;null===a.g?a.g=[b]:a.g.push(b)}
function Dd(a,b){var c=a.g&&a.g[b];return c?(c.C=null,a.g.splice(b,1),0==a.g.length&&(a.g=null),c):null}J.prototype.removeChild=function(a){return Dd(this,K(this).indexOf(a))};function Ed(a,b,c){Bd(a,c).C=null;b.C=a;a.g[c]=b}function Fd(a,b,c){!1!==b.call(c,a)&&K(a).forEach(function(a){Fd(a,b,c)})};function Gd(){J.call(this);this.ma=Hd++}t(Gd,J);var Hd=0;Gd.prototype.Y=f("ma");function Id(a,b,c){Gd.call(this);this.L=a;this.value=b;this.F=c;this.qc=yd(sd.wc(),this.L.M(),this.F);this.Xa=!1;this.Zb=b}t(Id,Gd);m=Id.prototype;m.Gb=function(){var a=new Id(this.L,this.value,this.F);a.Zb=this.Zb;a.vd(this.Xa);var b=this.Y();a.ma=b;return a};m.ab=function(a){return null!=a?(a.push(this.L),a):[this.L]};m.vd=ba("Xa");function Jd(a){var b=!1;a.value instanceof I||(b="array"==da(a.value)?!a.value.some(function(a){return a instanceof I}):!0);if(!b)throw new C(501);}
m.eval=function(a){Jd(this);if("in"==this.F)return Kd(this,a);var b=a.entries.filter(function(a){return this.qc(G(a,this.L),this.value)!=this.Xa},this);return new D(b,F(a))};m.bind=function(a){if(this.Zb instanceof I){var b=this.Zb.sa();if(a.length<=b)throw new C(510);this.value=a[b]}else"array"==da(this.Zb)&&(this.value=this.Zb.map(function(b){if(b instanceof I){var d=b.sa();if(a.length<=d)throw new C(510);return a[b.sa()]}return b}))};
function Kd(a,b){var c=B(a.value),d=function(a){return null===a?!1:c.has(a)!=this.Xa}.bind(a),e=b.entries.filter(function(a){return d(G(a,this.L))},a);return new D(e,F(b))}m.toString=function(){return"value_pred("+this.L.j()+" "+this.F+(this.Xa?"(complement)":"")+" "+this.value+")"};function Ld(a){this.ea=a;this.$c=this.wa=null}function Md(a,b){null===a.wa&&null!=a.B&&(a.wa=Nd(a.B));return a.wa.get(b)||null}function Nd(a){var b=z();Fd(a,function(a){b.set(a.Y(),a)});return b}function Od(a,b){b.B&&(a.B=b.B.Gb());a.$c=b}Ld.prototype.bind=function(){return this};function Pd(a,b){var c=a.B;null!=c&&Fd(c,function(a){a instanceof Id&&a.bind(b)})};function Qd(a){Ld.call(this,a)}t(Qd,Ld);function Rd(a){var b="";a.forEach(function(c,d){b+=c.L.j()+" ";b+=1==c.gb?"ASC":"DESC";d<a.length-1&&(b+=", ")});return b}Qd.prototype.ba=function(){return B(this.c)};Qd.prototype.clone=function(){var a=new Qd(this.ea);Od(a,this);this.f&&(a.f=this.f.slice());this.c&&(a.c=this.c.slice());a.W=this.W;a.O=this.O;this.N&&(a.N=this.N.slice());this.fa&&(a.fa=this.fa.slice());this.Nb&&(a.Nb=this.Nb);this.Vb&&(a.Vb=this.Vb);a.sb=this.sb;return a};
Qd.prototype.bind=function(a){Qd.Db.bind.call(this,a);null!=this.Nb&&(this.W=a[this.Nb.sa()]);null!=this.Vb&&(this.O=a[this.Vb.sa()]);Pd(this,a);return this};function Sd(a,b){this.xa=a;this.pa=b}Sd.prototype.cb=f("xa");Sd.prototype.ba=f("pa");function Td(a){var b=B();a.forEach(function(a){a.ba().forEach(b.add.bind(b))});return b};function Ud(a,b){this.global=a;this.vb=a.m(Sb);this.sd=b.map(function(a){return a.context});this.Ve=b.map(function(a){return a.be});this.xe=Td(this.Ve);this.lf=Vd(this);this.Rb=db()}function Vd(a){return a.sd.some(function(a){return!(a instanceof Qd)})?1:0}m=Ud.prototype;
m.exec=function(){function a(){var g=d.shift();if(g){var h=e[c.length];return g.cb().exec(b,h).then(function(b){c.push(b[0]);return a()})}return w()}var b=new Vc(this.global,this.xe),c=[],d=this.Ve.slice(),e=this.sd;return a().then(function(){return this.vb.Hb(this.lf,b).la()}.bind(this)).then(function(){this.Zd(c);return c}.bind(this),function(a){b.Cb();throw a;})};m.M=f("lf");m.ba=f("xe");m.xc=f("Rb");m.Y=function(){return la(this)};m.Zd=aa();function Wd(a,b){Ud.call(this,a,b);this.Ab=a.m(Yb)}t(Wd,Ud);Wd.prototype.getPriority=l(0);Wd.prototype.Zd=function(a){this.sd.forEach(function(b,c){Xd(this.Ab,b,a[c])},this)};function Yd(a,b){this.i=a;this.Ab=a.m(Yb);this.Qa=a.m(Xb);this.ld=new wc(a);this.mb=b;var c=a.m(Zb),d=this.mb.map(function(a){return c.table(a.getName())});this.pa=B(d);this.Rb=db()}m=Yd.prototype;m.exec=function(){this.ld.update(this.mb);this.Mc();return w()};m.M=l(1);m.ba=f("pa");m.xc=f("Rb");m.Y=function(){return la(this)};m.getPriority=l(1);m.Mc=function(){var a=Zd(this.Ab,this.pa);0!=a.length&&(a=new Wd(this.i,a),$d(this.Qa,a))};function ae(a){this.i=a;this.vb=a.m(Sb);this.Qa=a.m(Xb)}ae.prototype.Xd=function(a){a=new Yd(this.i,a);$d(this.Qa,a)};function M(a,b){this.La=a;this.h=b;this.Ta=z()}r("lf.backstore.FirebaseRawBackStore",M);M.prototype.gd=f("h");M.prototype.hd=function(){throw new C(351);};function be(a,b){var c=db(),d=a;b.length&&(d=a.child(b));d.once("value",function(a){c.resolve(a.val())},function(a){c.reject(a)});return c.ha}function ce(a,b,c){function d(a){a?e.reject(a):e.resolve()}c=c||!1;var e=db();c?a.set(b,d):a.update(b,d);return e.ha}
M.prototype.Ba=function(a){return be(this.h,"@rev/R").then(function(a){this.Ia=a;return be(this.h,"@table")}.bind(this)).then(function(b){var c=0,d;for(d in b)this.Ta.set(d,b[d]),b[d]>c&&(c=b[d]);a.Ja().forEach(function(a){this.Ta.has(a.getName())||(b[a.getName()]=++c)},this);d=this.h.child("@table");return ce(d,b)}.bind(this))};
function de(a,b,c){var d=a.Ta.get(b);return null!=d?function(){var a={},b=db();this.h.orderByChild("T").equalTo(d).once("value",function(d){d.forEach(function(b){var d=c(b.val());a[parseInt(b.key(),10)]=d});b.resolve(a)});return b.ha}.call(a).then(function(a){a["@rev"]={R:++this.Ia};return ce(this.h,a)}.bind(a)):w()}M.prototype.oc=function(a){return de(this,a,l(null)).then(function(){this.Ta.delete(a);return ce(this.h.child("@table/"+a),null,!0)}.bind(this))};M.prototype.dropTable=M.prototype.oc;
M.prototype.jc=function(a,b,c){return de(this,a,function(a){var e=a.P;e[b]=c;return{R:this.Ia+1,T:a.T,P:e}}.bind(this))};M.prototype.addTableColumn=M.prototype.jc;M.prototype.pc=function(a,b){return de(this,a,function(a){var d=a.P;delete d[b];return{R:this.Ia+1,T:a.T,P:d}}.bind(this))};M.prototype.dropTableColumn=M.prototype.pc;M.prototype.Lc=function(a,b,c){return de(this,a,function(a){var e=a.P;e[c]=e[b];delete e[b];return{R:this.Ia+1,T:a.T,P:e}}.bind(this))};M.prototype.renameTableColumn=M.prototype.Lc;
M.prototype.xb=function(){throw new C(351);};M.prototype.createRow=M.prototype.xb;M.prototype.Ac=f("La");M.prototype.getVersion=M.prototype.Ac;M.prototype.bc=function(a){var b=db();a=this.Ta.get(a);this.h.orderByChild("T").equalTo(a).once("value",function(a){var d=[];a.forEach(function(a){d.push(a.val().P)});b.resolve(d)});return b.ha};M.prototype.dump=function(){var a={},b=Jb(this.Ta).map(function(b){return this.bc(b).then(function(d){a[b]=d})}.bind(this));return cb(b).then(function(){return a})};
M.prototype.dump=M.prototype.dump;function ee(a,b,c){Lb.call(this,c,b);this.h=a}t(ee,Lb);ee.prototype.J=function(a){return this.h.yc(a)};
ee.prototype.lc=function(){var a=this.Oa.mb;if(0==a.size)this.Z.resolve();else{var b=this.h.Ia+1;this.h.Ia=b;var c={"@rev":{R:b}};a.forEach(function(a,e){var g=this.h.Ta.get(e);a.ya.forEach(function(a,d){c[d]={R:b,T:g,P:a.o}});a.na.forEach(function(a,d){c[d]={R:b,T:g,P:a[1].o}});a.za.forEach(function(a,b){c[b]=null})},this);this.h.h.update(c,function(c){null===c?this.Z.resolve():(this.h.Ia=b-1,c=A(a).map(function(a){return fe(this.h,a.getName())},this),cb(c).then(this.Z.reject.bind(this.Z),this.Z.reject.bind(this.Z)))}.bind(this))}return this.Z.ha};function ge(){this.ob=z()}function he(a,b){if(0==b.length)return A(a.ob);var c=[];b.forEach(function(a){a=this.ob.get(a)||null;null===a||c.push(a)},a);return c}ge.prototype.getData=f("ob");ge.prototype.get=function(a){return w(he(this,a))};function ie(a,b){b.forEach(function(a){this.ob.set(a.id(),a)},a)}ge.prototype.put=function(a){ie(this,a);return w()};function je(a,b){0==b.length||b.length==a.ob.size?a.ob.clear():b.forEach(function(a){this.ob.delete(a)},a)}
ge.prototype.remove=function(a){je(this,a);return w()};function ke(a){return 0==a.ob.size?0:Jb(a.ob).reduce(function(a,c){return a>c?a:c},0)};function le(a,b){this.s=a;this.rf=b;this.Kc=z();this.Ia=-1;this.K=z();this.Ta=z();this.Dd=null}m=le.prototype;
m.Ba=function(a){this.h=this.rf.child(this.s.name());var b=a||function(){return w()};return be(this.h,"@db/version").then(function(a){return null===a?ce(this.h,me(this),!0).then(function(){var a=new M(0,this.h);return b(a)}.bind(this)):a==this.s.version()?be(this.h,"@rev/R").then(function(a){this.Ia=a;return be(this.h,"@table")}.bind(this)).then(function(a){for(var b in a)this.Ta.set(b,a[b]);a=this.s.Ja().map(function(a){return fe(this,a.getName())},this);return cb(a)}.bind(this)).then(function(){ne(this);
oe(this);return w()}.bind(this)):this.$d(a,b).then(function(){return this.Ba()}.bind(this))}.bind(this))};m.$d=function(a,b){var c=new M(a,this.h);return c.Ba(this.s).then(function(){return w()}.bind(this)).then(function(){return b(c)}).then(function(){var a=this.h.child("@db");return ce(a,{version:this.s.version()},!0)}.bind(this))};
function oe(a){a.h.off();a.h.on("child_removed",a.bg.bind(a));a.Ed&&(a.Ed.off(),a.Kc.clear());a.Ed=a.h.orderByChild("R").startAt(a.Ia+1);a.Ed.on("value",a.Xd.bind(a))}function ne(a){pb=A(a.K).map(function(a){return ke(a)}).reduce(function(a,c){return a>c?a:c},0)+1}m.bg=function(a){var b=a.val(),c=this.Kc.get(b.T)||null;null===c&&(c=B(),this.Kc.set(b.T,c));c.add(parseInt(a.key(),10))};
m.Xd=function(a){var b=a.child("@rev/R").val();null!=b&&b!=this.Ia&&(this.Ia=b,a=pe(this,a),a.forEach(function(a){var b=this.K.get(a.getName()),e=Jb(a.za);0<e.length&&je(b,e);var g=A(a.ya);a.na.forEach(function(a){g.push(a[1])});ie(b,g)},this),0<a.length&&this.Fc(a),oe(this))};
function pe(a,b){var c=B(),d=z();a.Ta.forEach(function(a,b){var h=this.K.get(b),k=new Tc(b);if(this.Kc.has(a)){var p=kc(this.Kc.get(a));p.forEach(function(a){c.add(a)});he(h,p).forEach(function(a){k.delete(a)})}d.set(a,k)}.bind(a));b.forEach(function(a){if("@rev"!=a.key()){var b=parseInt(a.key(),10);if(!c.has(b)){a=a.val();var h=d.get(a.T),k=this.K.get(h.getName());k.getData().has(b)?h.modify([he(k,[b])[0],new x(b,a.P)]):h.add(new x(b,a.P))}}}.bind(a));return A(d).filter(function(a){return!a.md()})}
function fe(a,b){var c=db(),d=a.Ta.get(b);a.h.orderByChild("T").equalTo(d).once("value",function(a){var d=new ge,h=[];a.forEach(function(a){h.push(new x(parseInt(a.key(),10),a.val().P))});ie(d,h);this.K.set(b,d);c.resolve()}.bind(a));return c.ha}function me(a){var b={};b["@db"]={version:a.s.version()};b["@rev"]={R:1};a.Ia=1;b["@table"]={};a.s.Ja().forEach(function(a,d){var e=a.getName();b["@table"][e]=d;this.K.set(e,new ge);this.Ta.set(e,d)},a);return b}m.Hb=function(a,b){return new ee(this,a,b)};
m.yc=function(a){var b=this.K.get(a)||null;if(null!==b)return b;throw new C(101,a);};m.close=aa();m.subscribe=ba("Dd");m.Fc=function(a){null!=this.Dd&&this.Dd(a)};function N(a,b,c,d){this.h=b;this.Ka=c;this.La=a;this.Xc=d}r("lf.backstore.IndexedDBRawBackStore",N);N.prototype.gd=f("h");N.prototype.getRawDBInstance=N.prototype.gd;N.prototype.hd=f("Ka");N.prototype.getRawTransaction=N.prototype.hd;N.prototype.oc=function(a){return new v(function(b,c){try{this.h.deleteObjectStore(a)}catch(d){c(d);return}b()},this)};N.prototype.dropTable=N.prototype.oc;
function qe(a,b,c,d){return new v(function(a,g){var h;try{var k=this.Ka.objectStore(b);h=k.openCursor()}catch(p){g(p);return}h.onsuccess=function(){var b=h.result;b?(c(b),b.continue()):(d(k),a())};h.onerror=g},a)}function re(a){var b=null;return b=a instanceof ArrayBuffer?sb(a):a instanceof Date?a.getTime():a}
function se(a,b,c){function d(a){var b=qc(a.value),d=b.o,e;for(e in d){var E=qb(d[e]);c(E);d[e]=E.Fa()}a.update(b.Fa())}function e(a){var b=qb(a.value);c(b);a.update(b.Fa())}return qe(a,b,a.Xc?d:e,aa())}N.prototype.jc=function(a,b,c){var d=re(c);return se(this,a,function(a){a.o[b]=d})};N.prototype.addTableColumn=N.prototype.jc;N.prototype.pc=function(a,b){return se(this,a,function(a){delete a.o[b]})};N.prototype.dropTableColumn=N.prototype.pc;
N.prototype.Lc=function(a,b,c){return se(this,a,function(a){a.o[c]=a.o[b];delete a.o[b]})};N.prototype.renameTableColumn=N.prototype.Lc;function te(a,b){var c=[];return new v(function(a,e){var g;try{g=this.Ka.objectStore(b).openCursor()}catch(h){e(h);return}g.onsuccess=function(){var b=g.result;if(b){if(this.Xc){var e;e=qc(b.value).o;for(var h in e)c.push(e[h])}else c.push(b.value);b.continue()}else a(c)}.bind(this);g.onerror=e},a)}N.prototype.xb=function(a){var b={},c;for(c in a)b[c]=re(a[c]);return rb(b)};
N.prototype.createRow=N.prototype.xb;N.prototype.Ac=f("La");N.prototype.getVersion=N.prototype.Ac;N.prototype.dump=function(){for(var a=this.h.objectStoreNames,b=[],c=0;c<a.length;++c){var d=a.item(c);b.push(this.bc(d))}return cb(b).then(function(b){var c={};b.forEach(function(b,d){c[a.item(d)]=b});return c})};N.prototype.dump=N.prototype.dump;N.prototype.bc=function(a){return te(this,a).then(function(a){return a.map(function(a){return a.value})})};function ue(a,b){this.X=a;this.Ib=b}m=ue.prototype;m.get=function(a){if(0==a.length)return this.uc();a=a.map(function(a){return new v(function(c,d){var e;try{e=this.X.get(a)}catch(g){d(g);return}e.onerror=d;e.onsuccess=function(a){c(this.Ib(a.target.result))}.bind(this)},this)},this);return cb(a)};
m.uc=function(){return new v(function(a,b){var c=[],d;try{d=this.X.openCursor()}catch(e){b(e);return}d.onerror=b;d.onsuccess=function(){var b=d.result;b?(c.push(this.Ib(b.value)),b.continue()):a(c)}.bind(this)},this)};m.Pb=function(a){return new v(function(b,c){var d;try{d=a()}catch(e){c(e);return}d.onsuccess=b;d.onerror=c},this)};m.put=function(a){if(0==a.length)return w();a=a.map(function(a){return this.Pb(function(){return this.X.put(a.Fa())}.bind(this))},this);return cb(a)};
m.remove=function(a){return new v(function(b,c){var d=this.X.count();d.onsuccess=function(d){if(0==a.length||d.target.result==a.length)return this.Pb(function(){return this.X.clear()}.bind(this)).then(b,c);d=a.map(function(a){return this.Pb(function(){return this.X.delete(a)}.bind(this))},this);cb(d).then(b,c)}.bind(this);d.onerror=c},this)};function ve(a,b,c,d,e){Lb.call(this,c,d);this.i=a;this.Ka=b;this.Xc=e;this.Ka.oncomplete=this.Z.resolve.bind(this.Z);this.Ka.onabort=this.Z.reject.bind(this.Z)}t(ve,Lb);ve.prototype.J=function(a,b,c){return this.Xc?(c=null!=c?c:0,a=this.Ka.objectStore(a),new rc(a,b,0==c?ra(tc,this.i):uc)):new ue(this.Ka.objectStore(a),b)};ve.prototype.lc=function(){return this.Z.ha};function we(a,b){this.i=a;this.s=b;this.Yc=b.We().Df||!1}m=we.prototype;
m.Ba=function(a){var b=window.indexedDB||window.mozIndexedDB||window.webkitIndexedDB||window.msIndexedDB;if(null==b)throw new C(352);var c=a||function(){return w()};return new v(function(a,e){var g;try{g=b.open(this.s.name(),this.s.version())}catch(h){e(h);return}g.onerror=e;g.onupgradeneeded=function(a){xe(this,c,a).then(aa(),e)}.bind(this);g.onsuccess=function(b){this.h=b.target.result;this.ge().then(function(b){pb=b+1;a(this.h)}.bind(this))}.bind(this)},this)};
function xe(a,b,c){var d=c.target.result,e=c.target.transaction;c=new N(c.oldVersion,d,e,a.Yc);ye(d);a.s.Ja().forEach(ra(a.yf,d,e),a);return b(c)}function ye(a){for(var b=[],c=0;c<a.objectStoreNames.length;++c){var d=a.objectStoreNames.item(c);-1!=d.indexOf(".")&&b.push(d)}b.forEach(function(b){try{a.deleteObjectStore(b)}catch(c){}})}
m.yf=function(a,b,c){a.objectStoreNames.contains(c.getName())||a.createObjectStore(c.getName(),{keyPath:"id"});c.Bb()&&(c.Aa().forEach(function(c){this.nc(a,b,c.j(),"btree")},this),this.nc(a,b,c.u+".#","rowid"))};m.nc=function(a,b,c,d){a.objectStoreNames.contains(c)||(a.createObjectStore(c,{keyPath:"id"}),a=b.objectStore(c),(this.Yc?new rc(a,qb,uc):new ue(a,qb)).put([new ub(new tb(d))]))};
m.Hb=function(a,b){var c=Jb(b.ba());Wc(b).forEach(function(a){c.push(a)});var d=this.h.transaction(c,0==a?"readonly":"readwrite");return new ve(this.i,d,b,a,this.Yc)};
m.ge=function(a){function b(){if(0==d.length)return w();var a=d.shift();return c(a).then(b)}function c(b){return new v(function(c,d){var ga;try{ga=(a||e.transaction([b])).objectStore(b).openCursor(null,"prev")}catch(ka){d(ka);return}ga.onsuccess=function(a){(a=a.target.result)&&(g=Math.max(g,h(a)));c(g)};ga.onerror=function(){c(g)}})}var d=this.s.Ja().map(function(a){return a.getName()}),e=this.h,g=0,h=function(a){return this.Yc?(a=qc(a.value),Object.keys(a.o).reduce(function(a,b){return Math.max(a,
b)},0)):a.key}.bind(this);return new v(function(a){b().then(function(){a(g)})})};m.close=function(){this.h.close()};m.yc=function(){throw new C(511);};m.subscribe=aa();m.Fc=aa();function ze(a,b,c){Lb.call(this,c,b);this.X=a;0==b&&this.Z.resolve()}t(ze,Lb);ze.prototype.J=function(a){return this.X.yc(a)};ze.prototype.lc=function(){this.Z.resolve();return this.Z.ha};function Ae(a){this.s=a;this.K=z()}m=Ae.prototype;m.Ba=function(){this.s.Ja().forEach(this.Of,this);return w()};m.yc=function(a){var b=this.K.get(a)||null;if(null===b)throw new C(101,a);return b};m.Hb=function(a,b){return new ze(this,a,b)};function Be(a,b){if(!a.K.has(b)){var c=new ge;a.K.set(b,c);return c}return null}m.Of=function(a){Be(this,a.getName());a.Bb()&&(a.Aa().forEach(function(a){this.nc(a.j(),"btree")},this),this.nc(a.u+".#","rowid"))};m.nc=function(a,b){var c=Be(this,a);null===c||c.put([new ub(new tb(b))])};
m.close=aa();m.subscribe=aa();m.Fc=aa();function Ce(a){Ae.call(this,a);this.od=null}t(Ce,Ae);Ce.prototype.subscribe=function(a){null===this.od&&(this.od=a)};Ce.prototype.Fc=function(a){null===this.od||this.od(a)};function De(a,b,c){this.Ka=a;this.u=b;this.Ib=c}De.prototype.get=function(a){var b=this.Ib;Ee(this.Ka,"SELECT id, value FROM "+this.u+" "+(0==a.length?"":"WHERE id IN ("+a.join(",")+")"),[],function(a){for(var d=a.rows.length,e=Array(d),g=0;g<d;++g)e[g]=b({id:a.rows.item(g).id,value:JSON.parse(a.rows.item(g).value)});return e});return this.Ka.la()};
De.prototype.put=function(a){if(0==a.length)return w();var b="INSERT OR REPLACE INTO "+this.u+"(id, value) VALUES (?, ?)";a.forEach(function(a){Ee(this.Ka,b,[a.id(),JSON.stringify(a.o)])},this);return w()};De.prototype.remove=function(a){Ee(this.Ka,"DELETE FROM "+this.u+" "+(0==a.length?"":"WHERE id IN ("+a.join(",")+")"),[]);return w()};function Fe(a,b,c){Lb.call(this,b,c);this.h=a;this.K=z();this.Gd=[]}t(Fe,Lb);Fe.prototype.J=function(a,b){var c=this.K.get(a)||null;null===c&&(c=new De(this,a,b),this.K.set(a,c));return c};function Ee(a,b,c,d){a.Gd.push({og:b,eg:c,transform:d})}
Fe.prototype.lc=function(){var a,b,c=this.Z.reject.bind(this.Z),d=function(a,b){this.Z.reject(b)}.bind(this),e=function(c,h){a=h;if(this.Gd.length){var k=this.Gd.shift();b=k.transform;c.executeSql(k.og,k.eg,e,d)}else k=a,null!=b&&null!=a&&(k=b(a)),this.Z.resolve(k)}.bind(this);0==this.kf?this.h.readTransaction(e,c):this.h.transaction(e,c);return this.Z.ha};function O(a,b,c){this.h=c;this.i=a;this.La=b}r("lf.backstore.WebSqlRawBackStore",O);O.prototype.gd=f("h");O.prototype.getRawDBInstance=O.prototype.gd;O.prototype.hd=function(){throw new C(356);};O.prototype.getRawTransaction=O.prototype.hd;function Ge(a){return new Fe(a.h,new Vc(a.i,B()),1)}O.prototype.oc=function(a){var b=Ge(this);Ee(b,"DROP TABLE "+a,[]);return b.la()};O.prototype.dropTable=O.prototype.oc;
O.prototype.bc=function(a){var b=Ge(this);Ee(b,"SELECT id, value FROM "+a,[]);return b.la().then(function(a){for(var b=a.rows.length,e=Array(b),g=0;g<b;++g)e[g]={id:a.rows.item(g).id,value:JSON.parse(a.rows.item(g).value)};return w(e)})};function He(a,b,c){var d=Ge(a),e="UPDATE "+b+" SET value=? WHERE id=?";return a.bc(b).then(function(a){a.forEach(function(a){a=c(a);Ee(d,e,[JSON.stringify(a.value),a.id])});return d.la()})}
O.prototype.jc=function(a,b,c){var d=re(c);return He(this,a,function(a){a.value[b]=d;return a})};O.prototype.addTableColumn=O.prototype.jc;O.prototype.pc=function(a,b){return He(this,a,function(a){delete a.value[b];return a})};O.prototype.dropTableColumn=O.prototype.pc;O.prototype.Lc=function(a,b,c){return He(this,a,function(a){a.value[c]=a.value[b];delete a.value[b];return a})};O.prototype.renameTableColumn=O.prototype.Lc;O.prototype.xb=function(a){var b={},c;for(c in a)b[c]=re(a[c]);return rb(b)};
O.prototype.createRow=O.prototype.xb;O.prototype.Ac=f("La");O.prototype.getVersion=O.prototype.Ac;function Ie(a){Ee(a,'SELECT tbl_name FROM sqlite_master WHERE type="table"',[],function(a){for(var c=Array(a.rows.length),d=0;d<c.length;++d)c[d]=a.rows.item(d).tbl_name;return c})}
O.prototype.dump=function(){var a=db(),b=Ge(this);Ie(b);var c={};b.la().then(function(b){b=b.filter(function(a){return"__lf_ver"!=a&&"__WebKitDatabaseInfoTable__"!=a}).map(function(a){return this.bc(a).then(function(b){c[a]=b})},this);cb(b).then(function(){a.resolve(c)})}.bind(this));return a.ha};O.prototype.dump=O.prototype.dump;function Je(a,b,c){this.i=a;this.s=b;this.ng=c||4194304}function Ke(a){return new Vc(a.i,B())}m=Je.prototype;m.Ba=function(a){if(null==window.openDatabase)throw new C(353);var b=a||function(){return w()};return new v(function(a,d){try{var e=window.openDatabase(this.s.name(),"",this.s.name(),this.ng);if(null!=e)this.h=e,Le(this,b).then(a,d);else throw new C(354);}catch(g){d(g)}},this)};
function Le(a,b){var c=db(),d=new Fe(a.h,Ke(a),1);Ee(d,"CREATE TABLE IF NOT EXISTS __lf_ver(id INTEGER PRIMARY KEY, v INTEGER)",[]);Ee(d,"SELECT v FROM __lf_ver WHERE id = 0",[]);d.la().then(function(a){var d=0;a.rows.length&&(d=a.rows.item(0).v);d<this.s.version()?this.$d(b,d).then(c.resolve.bind(c)):d>this.s.version()?c.reject(new C(108)):c.resolve()}.bind(a));return c.ha}m.Hb=function(a,b){if(null!=this.h)return new Fe(this.h,b,a);throw new C(2);};m.close=aa();
m.yc=function(){throw new C(512);};m.subscribe=function(){throw new C(355);};m.Fc=function(){throw new C(355);};m.$d=function(a,b){var c=db();Me(this).then(function(){a(new O(this.i,b,this.h)).then(function(){return this.ge()}.bind(this)).then(c.resolve.bind(c))}.bind(this),c.reject.bind(c));return c.ha};
function Me(a){var b=a.s.Ja(),c=new Fe(a.h,Ke(a),1),d=new Fe(a.h,Ke(a),1);Ee(c,"INSERT OR REPLACE INTO __lf_ver VALUES (0, ?)",[a.s.version()]);Ie(c);return c.la().then(function(a){a.filter(function(a){return-1!=a.indexOf(".")}).forEach(function(a){Ee(d,"DROP TABLE "+a,[])});var c=a.filter(function(a){return-1==a.indexOf(".")});b.map(function(a){return a.getName()}).filter(function(a){return-1==c.indexOf(a)}).forEach(function(a){Ee(d,"CREATE TABLE "+a+"(id INTEGER PRIMARY KEY, value TEXT)",[])});
return d.la()})}m.ge=function(){var a=0,b=db(),c=function(b){var c=new Fe(this.h,Ke(this),0);Ee(c,"SELECT MAX(id) FROM "+b,[]);return c.la().then(function(b){b=b.rows.item(0)[0];a=Math.max(b,a)})}.bind(this),d=this.s.Ja().map(function(a){return c(a.getName())});cb(d).then(function(){b.resolve(a)},function(a){b.reject(a)});return b.ha};function Ne(a){this.l=z();this.Wb=z();a.Ja().forEach(function(a){this.Wb.set(a.getName(),B())},this)}m=Ne.prototype;m.set=function(a,b){this.l.set(b.id(),b);this.Wb.get(a).add(b.id())};m.ie=function(a,b){var c=this.Wb.get(a);b.forEach(function(a){this.l.set(a.id(),a);c.add(a.id())},this)};m.get=function(a){return this.l.get(a)||null};function Oe(a,b){return b.map(function(a){return this.get(a)},a)}
m.bb=function(a,b,c){var d=[],e=Math.min(b,c),g=Math.max(b,c);a=this.Wb.get(a);if(a.size<g-e)a.forEach(function(a){a>=e&&a<=g&&(a=this.l.get(a),d.push(a))},this);else for(b=e;b<=g;++b)a.has(b)&&(c=this.l.get(b),d.push(c));return d};m.remove=function(a,b){this.l.delete(b);this.Wb.get(a).delete(b)};m.vc=function(a){return null!=a?this.Wb.get(a).size:this.l.size};m.clear=function(){this.l.clear();this.Wb.clear()};function Pe(a,b,c){var d=0,e=a.length;for(c=c||Qe;d<e;){var g=d+e>>1;0>c(a[g],b)?d=g+1:e=g}return d==e&&a[d]==b?d:~d}function Qe(a,b){return a-b}function Re(a,b,c){c=Pe(a,b,c);return 0>c?(a.splice(-(c+1),0,b),!0):!1};function Se(a,b,c,d){a=b?a.reverse():a;if(null==c&&null==d)return a;c=Math.min(q(c)?c:a.length,a.length);if(0==c)return[];d=Math.min(d||0,a.length);return a.slice(d,d+c)};function Te(){this.qa=0}Te.prototype.add=function(a,b){this.qa+=b};Te.prototype.remove=function(a,b){this.qa-=b};Te.prototype.clear=function(){this.qa=0};function Ue(a,b){a.clear();b.forEach(function(a){this.qa+=a.qa},a)};function Ve(a,b,c,d){this.u=a;this.U=b;this.me=c;this.kb=new Te;if(d){a=511;a*=a*a;if(d.length>=a)throw new C(6,a);d=We(this,d);this.oa=d=Xe(d)}else this.clear()}var Ye=[];m=Ve.prototype;m.getName=f("u");m.toString=function(){return this.oa.toString()};m.add=function(a,b){this.oa=this.oa.rb(a,b)};m.set=function(a,b){this.oa=this.oa.rb(a,b,!0)};m.remove=function(a,b){this.oa=this.oa.remove(a,b)};m.get=function(a){return this.oa.get(a)};
m.bd=function(a){if(null==a)return this.Sa().qa;if(a instanceof Zc){if(dd(a))return this.Sa().qa;if(ed(a))return this.get(a.c).length}return this.bb([a]).length};m.Sa=f("kb");m.uc=function(a,b,c,d){c=Array(a);this.oa.fill({offset:b?this.kb.qa-a-d:d,count:a,ke:0},c);return b?c.reverse():c};
m.bb=function(a,b,c,d){var e=Ze(this.oa).b[0];if(!q(e)||0==c)return Ye;b=b||!1;c=null!=c?Math.min(c,this.kb.qa):this.kb.qa;d=d||0;var g=Math.min(Math.max(this.kb.qa-d,0),c);if(0==g)return Ye;if(!q(a)||1==a.length&&a[0]instanceof Zc&&dd(a[0]))return this.uc(g,b,c,d);a=this.U.ff(a);var h=Array(b?this.kb.qa:g),k={count:0,W:h.length,reverse:b,O:d};a.forEach(function(a){for(var b=this.U.td(a),b=this.U.Qd(a)?e:b[0],b=$e(this.oa,b),c=k.count,d=0;null!=b&&k.count<k.W;)b.bb(a,k,h),k.count!=c?(d=0,c=k.count):
d++,b=2==d?null:b.next()},this);h.splice(k.count,g-k.count);return b?Se(h,b,c,d):h};m.clear=function(){this.oa=af(this);this.kb.clear()};m.Ha=function(a){return this.oa.Ha(a)};m.min=function(){return this.Ec(this.U.min.bind(this.U))};m.max=function(){return this.Ec(this.U.max.bind(this.U))};m.Ec=function(a){var b=Ze(this.oa),c=bf(this.oa);if(0==b.b.length&&0==c.b.length)return null;var d=b.b[0],b=b.A[0],e=c.b[c.b.length-1],c=c.A[c.b.length-1];return 1==a(d,e)?[d,this.me?[b]:b]:[e,this.me?[c]:c]};
m.Da=f("me");m.mc=f("U");m.Ud=function(a,b){return null!=a?-1==this.U.compare(a,b):!1};m.Na=function(a,b){return null!=a?0==this.U.compare(a,b):!1};m.Fa=function(){for(var a=[],b=Ze(this.oa);b;)a.push(new x(b.ma,[b.b,b.A])),b=b.ua;return a};function cf(a,b,c,d){a=new Ve(b,a,c);d=df(d,a);a.oa=d;return a}function ef(a,b){this.ma=a;this.D=b;this.eb=0;this.ua=this.ub=this.C=null;this.b=[];this.A=[];this.g=[]}function af(a){return new ef(pb++,a)}function P(a){return 0==a.eb}m=ef.prototype;m.next=f("ua");
function ff(a){function b(a){return null!=a?a.ma.toString():"_"}var c=a.ma+"["+a.b.join("|")+"]",d=a.g.map(function(a){return a.ma}).join("|"),e=a.A.join("/"),g=b(a.ub)+"{",g=P(a)?g+e:g+d,g=g+"}"+b(a.C);a.ua&&(a=ff(a.ua),c=c+"  "+a[0],g=g+"  "+a[1]);return[c,g]}m.toString=function(){var a="",b=ff(this),a=a+(b[0]+"\n"+b[1]+"\n");this.g.length&&(a+=this.g[0].toString());return a};function Ze(a){return P(a)?a:Ze(a.g[0])}function bf(a){return P(a)?a:bf(a.g[a.g.length-1])}
function gf(a,b){b&&(b.ub=a);a&&(a.ua=b)}function We(a,b){for(var c=b.length,d=0,e=af(a),g=e;0<c;){var h=768<=c?511:257<=c&&511>=c?c:257,k=b.slice(d,d+h);e.b=k.map(function(a){return a.key});e.A=k.map(function(a){return a.value});d+=h;c-=h;0<c&&(h=af(e.D),gf(e,h),e=h)}return g}function hf(a){var b=a[0],c=af(b.D);c.eb=b.eb+1;c.g=a;for(b=0;b<a.length;++b)a[b].C=c,0<b&&c.b.push(a[b].b[0]);return c}
function Xe(a){var b=a,c=[];do c.push(b),b=b.ua;while(b);if(512>=c.length)b=hf(c);else{var d=c.length,e=0,b=af(a.D);for(b.eb=a.eb+2;0<d;){a=768<=d?511:257<=d&&511>=d?d:257;var g=c.slice(e,e+a),h=hf(g);h.C=b;b.g.length&&(b.b.push(g[0].b[0]),gf(b.g[b.g.length-1],h));b.g.push(h);e+=a;d-=a}}return b}m.get=function(a){var b=jf(this,a);if(P(this)){var c=Ye;this.D.Na(this.b[b],a)&&(c=c.concat(this.A[b]));return c}b=this.D.Na(this.b[b],a)?b+1:b;return this.g[b].get(a)};
m.Ha=function(a){var b=jf(this,a);return this.D.Na(this.b[b],a)?!0:P(this)?!1:this.g[b].Ha(a)};m.remove=function(a,b){kf(this,a,-1,b);if(null==this.C){var c=this;1==this.g.length&&(c=this.g[0],c.C=null);return c}return this};function mf(a){return P(a)?a.b[0]:mf(a.g[0])}function nf(a){a.b=[];for(var b=1;b<a.g.length;++b)a.b.push(mf(a.g[b]))}
function kf(a,b,c,d){var e=jf(a,b),g=P(a);if(!g){var h=a.D.Na(a.b[e],b)?e+1:e;if(kf(a.g[h],b,h,d))nf(a);else return!1}else if(!a.D.Na(a.b[e],b))return!1;if(a.b.length>e&&a.D.Na(a.b[e],b)){if(q(d)&&!a.D.Da()&&g&&(h=a.A[e],d=Pe(h,d,void 0),0>d?d=!1:(h.splice(d,1),d=!0),d&&a.D.Sa().remove(b,1),a.A[e].length))return!1;a.b.splice(e,1);g&&(g=a.D.Da()?1:a.A[e].length,a.A.splice(e,1),a.D.Sa().remove(b,g))}if(256>a.b.length&&null!=a.C){a:{b=null;if(a.ua&&256<a.ua.b.length)b=a.ua,e=d=0,g=a.b.length+1;else if(a.ub&&
256<a.ub.b.length)b=a.ub,d=a.ub.b.length-1,e=P(a)?d:d+1,g=0;else{b=!1;break a}a.b.splice(g,0,b.b[d]);b.b.splice(d,1);d=P(a)?a.A:a.g;h=null;P(a)?h=b.A:(h=b.g,h[e].C=a);d.splice(g,0,h[e]);h.splice(e,1);P(b)||(nf(b),nf(a));b=!0}b||of(a,c)}return!0}
function of(a,b){var c,d,e;a.ua&&511>a.ua.b.length?(c=a.ua,e=d=0):a.ub&&(c=a.ub,d=c.b.length,e=P(c)?c.A.length:c.g.length);d=[d,0].concat(a.b);Array.prototype.splice.apply(c.b,d);d=null;P(a)?d=a.A:(d=a.g,d.forEach(function(a){a.C=c}));d=[e,0].concat(d);Array.prototype.splice.apply(P(c)?c.A:c.g,d);gf(a.ub,a.ua);P(c)||nf(c);-1!=b&&(a.C.b.splice(b,1),a.C.g.splice(b,1))}
m.rb=function(a,b,c){var d=jf(this,a);if(P(this)){if(this.D.Na(this.b[d],a)){if(c)this.D.Sa().remove(a,this.D.Da()?1:this.A[d].length),this.A[d]=this.D.Da()?b:[b];else{if(this.D.Da())throw new C(201);if(!Re(this.A[d],b))throw new C(109);}this.D.Sa().add(a,1);return this}this.b.splice(d,0,a);this.A.splice(d,0,this.D.Da()?b:[b]);this.D.Sa().add(a,1);512==this.b.length?(d=af(this.D),a=af(this.D),a.eb=1,a.b=[this.b[256]],a.g=[this,d],a.C=this.C,this.C=a,d.b=this.b.splice(256),d.A=this.A.splice(256),d.C=
a,gf(d,this.ua),gf(this,d),d=a):d=this;return d}d=this.D.Na(this.b[d],a)?d+1:d;a=this.g[d].rb(a,b,c);P(a)||1!=a.b.length||(this.b.splice(d,0,a.b[0]),a.g[1].C=this,a.g[0].C=this,this.g.splice(d,1,a.g[1]),this.g.splice(d,0,a.g[0]));return 512==this.b.length?pf(this):this};function pf(a){var b=af(a.D),c=af(a.D);b.C=a.C;b.eb=a.eb+1;b.b=[a.b[256]];b.g=[a,c];a.b.splice(256,1);c.C=b;c.eb=a.eb;c.b=a.b.splice(256);c.g=a.g.splice(257);c.g.forEach(function(a){a.C=c});a.C=b;gf(c,a.ua);gf(a,c);return b}
function jf(a,b){for(var c=0,d=a.b.length;c<d;){var e=c+d>>1;a.D.Ud(a.b[e],b)?c=e+1:d=e}return c}function $e(a,b){if(!P(a)){var c=jf(a,b);a.D.Na(a.b[c],b)&&c++;return $e(a.g[c],b)}return a}
m.bb=function(a,b,c){function d(a){return a[0]?a[1]?0:1:-1}var e=this.D.mc(),g=0,h=this.b.length-1,k=this.b,p=d(e.nb(k[g],a)),E=d(e.nb(k[h],a));if(1!=p&&(-1!=p||-1!=E)){var ga=function(a,b){var c=a+b>>1;return c==a?c+1:c},ka=function(b,c,g){if(b>=c)return 0==g?c:-1;var h=d(e.nb(k[b],a));if(0==h)return b;if(1==h)return-1;h=ga(b,c);if(h==c)return 0==g?c:-1;var p=d(e.nb(k[h],a));return 0==p?ka(b,h,p):-1==p?ka(h+1,c,g):ka(b+1,h,p)},Qa=function(b,c){if(b>=c)return b;var g=d(e.nb(k[c],a));if(0==g)return c;
if(-1==g)return b;g=ga(b,c);if(g==c)return b;var h=d(e.nb(k[g],a));return 0==h?Qa(g,c):1==h?Qa(b,g-1):-1};0!=p&&(g=ka(g+1,h,E));-1!=g&&(h=Qa(g,h),-1!=h&&h>=g&&qf(this,b,c,g,h+1))}};function qf(a,b,c,d,e){for(;d<e&&(b.reverse||!(b.count>=b.W));++d)if(a.D.Da())!b.reverse&&b.O?b.O--:c[b.count++]=a.A[d];else for(var g=0;g<a.A[d].length&&b.count<c.length;++g)!b.reverse&&b.O?b.O--:c[b.count++]=a.A[d][g]}
m.fill=function(a,b){if(P(this))for(var c=0;c<this.A.length&&0<a.count;++c)if(0<a.offset){if(a.offset-=this.D.Da()?1:this.A[c].length,0>a.offset)for(var d=this.A[c].length+a.offset;d<this.A[c].length&&0<a.count;++d)b[a.ke++]=this.A[c][d],a.count--}else if(this.D.Da())b[a.ke++]=this.A[c],a.count--;else for(d=0;d<this.A[c].length&&0<a.count;++d)b[a.ke++]=this.A[c][d],a.count--;else for(c=0;c<this.g.length&&0<a.count;++c)this.g[c].fill(a,b)};
function df(a,b){for(var c=b.Sa(),d=a.map(function(a){var d=new ef(a.id(),b);d.b=a.o[0];d.A=a.o[1];d.b.forEach(function(a,e){c.add(a,b.Da()?1:d.A[e].length)});return d}),e=0;e<d.length-1;++e)gf(d[e],d[e+1]);return 1<d.length?Xe(d[0]):d[0]};function rf(a){if(1==a.f.length)return new sf(a.f[0].gb);a=a.f.map(function(a){return a.gb});return new tf(a)}function sf(a){this.ad=0==a?uf:vf;this.Vd=0==a?function(a){return null!=a?a.reverse():null}:function(a){return a||null};this.ae=0==a?wf:xf}t(sf,vc);function vf(a,b){return a>b?1:a<b?-1:0}function uf(a,b){return vf(b,a)}function xf(a,b){return fd(a,b)}function wf(a,b){return fd(b,a)}m=sf.prototype;
m.nb=function(a,b){var c=this.Vd(b),d=[null===c.c,null===c.w];if(!d[0]){var e=this.ad(a,c.c);d[0]=c.$?1==e:-1!=e}d[1]||(e=this.ad(a,c.w),d[1]=c.ka?-1==e:1!=e);return d};m.compare=function(a,b){return this.ad(a,b)};m.min=function(a,b){return a<b?1:a==b?0:-1};m.max=function(a,b){return a>b?1:a==b?0:-1};m.Pd=function(a,b){var c=this.nb(a,b);return c[0]&&c[1]};m.ff=function(a){return a.filter(function(a){return null!==a}).sort(function(a,c){return this.ae(a,c)}.bind(this))};m.Qd=function(a){return ea(this.Vd(a).c)};
m.td=function(a){a=this.Vd(a);return[a.c,a.w]};m.toString=function(){return this.ad==uf?"SimpleComparator_DESC":"SimpleComparator_ASC"};function tf(a){this.Ga=a.map(function(a){return new sf(a)})}t(tf,vc);function yf(a,b,c,d){for(var e=0,g=0;g<a.Ga.length&&0==e;++g)e=d(a.Ga[g],b[g],c[g]);return e}m=tf.prototype;m.compare=function(a,b){return yf(this,a,b,function(a,b,e){return a.compare(b,e)})};m.min=function(a,b){return yf(this,a,b,function(a,b,e){return a.min(b,e)})};
m.max=function(a,b){return yf(this,a,b,function(a,b,e){return a.max(b,e)})};m.nb=function(a,b){for(var c=[!0,!0],d=0;d<this.Ga.length&&(c[0]||c[1]);++d){var e=this.Ga[d].nb(a[d],b[d]);c[0]=c[0]&&e[0];c[1]=c[1]&&e[1]}return c};m.Pd=function(a,b){for(var c=!0,d=0;d<this.Ga.length&&c;++d)c=this.Ga[d].Pd(a[d],b[d]);return c};
m.ff=function(a){var b=a.filter(function(a){return a.every(fa)});a=Array(this.Ga.length);for(var c=0;c<a.length;c++)a[c]=b.map(function(a){return a[c]});a.forEach(function(a,b){a.sort(function(a,c){return this.Ga[b].ae(a,c)}.bind(this))},this);b=Array(b.length);for(c=0;c<b.length;c++)b[c]=a.map(function(a){return a[c]});return b.sort(function(a,b){for(var c=0,h=0;h<this.Ga.length&&0==c;++h)c=this.Ga[h].ae(a[h],b[h]);return c}.bind(this))};m.Qd=function(a){return this.Ga[0].Qd(a[0])};
m.td=function(a){var b=a.map(function(a,b){return this.Ga[b].td(a)[0]},this);a=a.map(function(a,b){return this.Ga[b].td(a)[1]},this);return[b,a]};function zf(a){this.ca=a;this.fb=B();this.Nc=new Te;this.kb=new Te}m=zf.prototype;m.getName=function(){return this.ca.getName()};m.add=function(a,b){null===a?(this.fb.add(b),this.Nc.add(a,1)):this.ca.add(a,b)};m.set=function(a,b){null===a?(this.fb.clear(),this.Nc.clear(),this.add(a,b)):this.ca.set(a,b)};m.remove=function(a,b){null===a?b?(this.fb.delete(b),this.Nc.remove(a,1)):(this.fb.clear(),this.Nc.clear()):this.ca.remove(a,b)};m.get=function(a){return null===a?kc(this.fb):this.ca.get(a)};
m.bd=function(a){return this.ca.bd(a)};m.Sa=function(){Ue(this.kb,[this.ca.Sa(),this.Nc]);return this.kb};m.bb=function(a,b,c,d){b=this.ca.bb(a,b,c,d);return null!=a?b:b.concat(kc(this.fb))};m.clear=function(){this.fb.clear();this.ca.clear()};m.Ha=function(a){return null===a?0!=this.fb.size:this.ca.Ha(a)};m.min=function(){return this.ca.min()};m.max=function(){return this.ca.max()};m.Fa=function(){return[new x(-2,kc(this.fb))].concat(this.ca.Fa())};m.mc=function(){return this.ca.mc()};
function Af(a,b){for(var c=-1,d=0;d<b.length;++d)if(-2==b[d].id()){c=d;break}if(-1==c)throw new C(102);var d=b[c].o,e=b.slice(0);e.splice(c,1);var c=a(e),g=new zf(c);d.forEach(function(a){g.fb.add(a)});return g}m.Da=function(){return this.ca.Da()};function Bf(a){this.u=a;this.jb=B();this.U=new sf(1)}m=Bf.prototype;m.getName=f("u");m.add=function(a){if("number"!=typeof a)throw new C(103);this.jb.add(a)};m.set=function(a,b){this.add(a,b)};m.remove=function(a){this.jb.delete(a)};m.get=function(a){return this.Ha(a)?[a]:[]};m.min=function(){return this.Ec(this.U.min.bind(this.U))};m.max=function(){return this.Ec(this.U.max.bind(this.U))};
m.Ec=function(a){if(0==this.jb.size)return null;var b=kc(this.jb).reduce(function(b,d){return null===b||1==a(d,b)?d:b},null);return[b,[b]]};m.bd=function(){return this.jb.size};m.bb=function(a,b,c,d){var e=a||[cd()];a=kc(this.jb).filter(function(a){return e.some(function(b){return this.U.Pd(a,b)},this)},this);return Se(a,b,c,d)};m.clear=function(){this.jb.clear()};m.Ha=function(a){return this.jb.has(a)};m.Fa=function(){return[new x(0,kc(this.jb))]};m.mc=f("U");
function Cf(a,b){var c=new Bf(a);b[0].o.forEach(function(a){c.add(a,a)});return c}m.Da=l(!0);m.Sa=function(){var a=new Te;a.qa=this.jb.size;return a};function Df(a){this.i=a;this.vb=a.m(Sb);this.G=a.m(Vb);this.ja=a.m(Tb)}Df.prototype.Ba=function(a){var b=a.Ja(),c=function(){if(0==b.length)return w();var a=b.shift();return(a.Bb()?Ef(this,a):Ff(this,a)).then(c)}.bind(this);return c()};function Ff(a,b){var c=new Vc(a.i,B([b]));return a.vb.Hb(0,c).J(b.getName(),b.ac.bind(b)).get([]).then(function(a){this.ja.ie(b.getName(),a);Gf(this,b,a)}.bind(a))}
function Gf(a,b,c){var d=a.G.Oc.get(b.getName())||[];c.forEach(function(a){d.forEach(function(b){var c=a.Mb(b.getName());b.add(c,a.id())})})}function Ef(a,b){var c=new Vc(a.i,B([b])),d=a.vb.Hb(0,c),c=d.J(b.getName(),b.ac).get([]).then(function(a){this.ja.ie(b.getName(),a)}.bind(a)),e=b.Aa().map(function(a){return Hf(this,a,d)},a).concat(If(a,b,d));return cb(e.concat(c))}
function Hf(a,b,c){c=c.J(b.j(),qb,1);var d=rf(b);return c.get([]).then(function(a){if(1<a.length){if(Jf(b)){var c=cf.bind(void 0,d,b.j(),b.Cc);a=Af(c,a.slice(1))}else a=cf(d,b.j(),b.Cc,a.slice(1));this.G.set(b.Pc,a)}}.bind(a))}function If(a,b,c){return c.J(b.u+".#",qb,1).get([]).then(function(a){1<a.length&&(a=Cf(b.u+".#",a.slice(1)),this.G.set(b.getName(),a))}.bind(a))};function Kf(){this.X=z();this.Oc=z()}Kf.prototype.Ba=function(a){a.Ja().forEach(function(a){var c=[];this.Oc.set(a.getName(),c);var d=a.u+".#";if(null===this.get(d)){var e=new Bf(d);c.push(e);this.X.set(d,e)}a.Aa().forEach(function(a){var b;b=rf(a);b=new Ve(a.j(),b,a.Cc);b=Jf(a)?new zf(b):b;c.push(b);this.X.set(a.j(),b)},this)},this);return w()};Kf.prototype.get=function(a){return this.X.get(a)||null};
Kf.prototype.set=function(a,b){var c=this.Oc.get(a)||null;null===c&&(c=[],this.Oc.set(a,c));for(var d=null,e=0;e<c.length;e++)if(c[e].getName()==b.getName()){d=e;break}null!==d&&0<c.length?c.splice(d,1,b):c.push(b);this.X.set(b.getName(),b)};function Lf(a){this.gc=[];q(a)&&this.add(a)}Lf.prototype.toString=function(){return this.gc.map(function(a){return a.toString()}).join(",")};Lf.prototype.Ha=function(a){return this.gc.some(function(b){return b.contains(a)})};Lf.prototype.ta=f("gc");
Lf.prototype.add=function(a){if(0!=a.length)if(a=this.gc.concat(a),1==a.length)this.gc=a;else{a.sort(fd);for(var b=[],c=a[0],d=1;d<a.length;++d)if(ad(c,a[d])){var e=a[d],g=cd();if(null!==c.c&&null!==e.c){var h=bd(c.c,e.c,!0);1!=h?(g.c=c.c,g.$=0!=h?c.$:c.$&&e.$):(g.c=e.c,g.$=e.$)}null!==c.w&&null!==e.w&&(h=bd(c.w,e.w,!1),-1!=h?(g.w=c.w,g.ka=0!=h?c.ka:c.ka&&e.ka):(g.w=e.w,g.ka=e.ka));c=g}else b.push(c),c=a[d];b.push(c);this.gc=b}};
function Mf(a,b){var c=[];a.ta().map(function(a){return b.ta().map(function(b){var c;if(ad(a,b)){c=cd();var h=bd(a.c,b.c,!0),h=0==h?a.$?a:b:-1!=h?a:b;c.c=h.c;c.$=h.$;null===a.w||null===b.w?b=null===a.w?b:a:(h=bd(a.w,b.w,!1),b=0==h?a.ka?a:b:-1==h?a:b);c.w=b.w;c.ka=b.ka}else c=null;return c})}).forEach(function(a){c=c.concat(a)});return new Lf(c.filter(function(a){return null!==a}))};function Pf(a,b){var c=[],d=null,e=null;Fd(a,function(a){var h=b(a);null==a.getParent()?e=h:L(d,h);var k=a.getParent();null!==k&&K(k).length==K(d).length&&(k=c.indexOf(d),-1!=k&&c.splice(k,1));1<K(a).length&&c.push(h);d=null===a.g?c[c.length-1]:h});return e}function Qf(a){return Rf(a,function(a){return null===a.g})}
function Sf(a){var b=a.getParent(),c=0;null!==b&&(c=K(b).indexOf(a),b.removeChild(a));var d=K(a).slice();d.forEach(function(d,g){a.removeChild(d);null===b||Cd(b,d,c+g)});return{parent:b,children:d}}function Tf(a,b){K(a).slice().forEach(function(c){a.removeChild(c);L(b,c)});L(a,b)}function Uf(a){var b=Bd(a,0);Sf(a);Tf(b,a);return b}
function Vf(a,b,c){var d=Bd(a,0),e=K(d).slice();if(!e.some(function(a){return b(a)}))return a;Sf(a);e.forEach(function(e,h){if(b(e)){var k=c(a);Dd(d,h);L(k,e);Cd(d,k,h)}});return d}function Wf(a,b,c,d){var e=a.getParent();null!==e&&(a=K(e).indexOf(a),Dd(e,a),Cd(e,c,a));K(b).slice().forEach(function(a){b.removeChild(a);L(d,a)});return c}function Rf(a,b,c){function d(a){b(a)&&e.push(a);null!=c&&c(a)||K(a).forEach(d)}var e=[];d(a);return e}
function Xf(a,b){var c=b||function(a){return a.toString()+"\n"},d="";Fd(a,function(a){for(var b=0;b<Ad(a);b++)d+="-";d+=c(a)});return d};function Yf(a){Gd.call(this);this.Ob=a;this.Xa=!1}t(Yf,Gd);m=Yf.prototype;m.Gb=function(){return Pf(this,function(a){if(a instanceof Yf){var b=new Yf(a.Ob);b.Xa=a.Xa;a=a.Y();b.ma=a;return b}return a.Gb()})};m.ab=function(a){var b=a||[];Fd(this,function(a){a!=this&&a.ab(b)}.bind(this));a=B(b);return kc(a)};m.vd=function(a){this.Xa!=a&&(this.Xa=a,this.Ob="and"==this.Ob?"or":"and",K(this).forEach(function(b){return b.vd(a)}))};
m.eval=function(a){var b=K(this).map(function(b){return b.eval(a)});return Zf(this,b)};function Zf(a,b){return"and"==a.Ob?ld(b):md(b)}m.toString=function(){return"combined_pred_"+this.Ob.toString()};function $f(){this.l=z();this.size=0}m=$f.prototype;m.has=function(a){return this.l.has(a)};m.set=function(a,b){var c=this.l.get(a)||null;null===c&&(c=B(),this.l.set(a,c));c.has(b)||(c.add(b),this.size++);return this};m.ie=function(a,b){var c=this.l.get(a)||null;null===c&&(c=B(),this.l.set(a,c));b.forEach(function(a){c.has(a)||(c.add(a),this.size++)},this);return this};
m.delete=function(a,b){var c=this.l.get(a,null);if(null===c)return!1;var d=c.delete(b);d&&(--this.size,0==c.size&&this.l.delete(a));return d};m.get=function(a){a=this.l.get(a)||null;return null===a?null:kc(a)};m.clear=function(){this.l.clear();this.size=0};m.keys=function(){return Jb(this.l)};m.values=function(){var a=[];this.l.forEach(function(b){a.push.apply(a,kc(b))});return a};function ag(a,b,c){Gd.call(this);this.da=a;this.ia=b;this.F=c;this.Wd=null;a=sd.wc();this.qc=yd(a,this.da.M(),this.F);this.Tf=a.Le.get(this.da.M())||null}t(ag,Gd);m=ag.prototype;m.Gb=function(){var a=new ag(this.da,this.ia,this.F),b=this.Y();a.ma=b;return a};m.ab=function(a){return null!=a?(a.push(this.da),a.push(this.ia),a):[this.da,this.ia]};
m.reverse=function(){var a=this.F;switch(this.F){case "gt":a="lt";break;case "lt":a="gt";break;case "gte":a="lte";break;case "lte":a="gte"}return new ag(this.ia,this.da,a)};m.eval=function(a){var b=a.entries.filter(function(a){var b=G(a,this.da);a=G(a,this.ia);return this.qc(b,a)},this);return new D(b,F(a))};m.toString=function(){return"join_pred("+this.da.j()+" "+this.F+" "+this.ia.j()+")"};
function bg(a,b,c){var d=null,e=null;-1!=F(b).indexOf(H(a.da.J()))?(d=b,e=c):(d=c,e=b);if(d.entries.length>e.entries.length){a:{b=a.da;a.da=a.ia;a.ia=b;b=a.F;switch(a.F){case "gt":b="lt";break;case "lt":b="gt";break;case "gte":b="lte";break;case "lte":b="gte";break;default:break a}a.F=b;a.qc=yd(sd.wc(),a.da.M(),a.F)}return[e,d]}return[d,e]}function cg(a){var b={};a.ab().forEach(function(a){b[a.getName()]=null});return b}
function dg(a,b,c){null===a.Wd&&(a.Wd=cg(a.ia.J()));var d=new od(new x(-1,a.Wd),!1);return rd(b,c,d,[H(a.ia.J())])}
function eg(a,b,c,d){var e=[b,c];d||(e=bg(a,b,c));b=e[0];c=e[1];var e=b,g=c,h=a.da,k=a.ia;d&&(e=c,g=b,h=a.ia,k=a.da);var p=new $f,E=[];e.entries.forEach(function(a){var b=String(G(a,h));p.set(b,a)});var ga=F(e),ka=F(g);g.entries.forEach(function(a){var b=G(a,k),c=String(b);null!==b&&p.has(c)?p.get(c).forEach(function(b){b=rd(a,ka,b,ga);E.push(b)}):d&&E.push(dg(this,a,ka))}.bind(a));a=F(b).concat(F(c));return new D(E,a)}
function fg(a,b,c,d,e){function g(a,b){var c=new od(b,1<ga.length),c=rd(a,ka,c,ga);E.push(c)}var h=d.Mf.J(),k=b,p=c;-1!=F(b).indexOf(H(h))&&(k=c,p=b);var E=[],ga=F(p),ka=F(k);k.entries.forEach(function(a){var b=this.Tf(G(a,d.Zf)),b=d.index.get(b);0!=b.length&&(d.index.Da()?g(a,e.get(b[0])):Oe(e,b).forEach(g.bind(null,a)))},a);a=F(k).concat(F(p));return new D(E,a)};function gg(a,b,c){return null===b?new Id(a,b,c):q(b.j)?new ag(a,b,c):new Id(a,b,c)};var hg={};r("lf.schema.DataStoreType",hg);hg.INDEXED_DB=0;hg.MEMORY=1;hg.LOCAL_STORAGE=2;hg.FIREBASE=3;hg.WEB_SQL=4;hg.OBSERVABLE_STORE=5;function ig(a,b,c,d){this.Pc=a;this.name=b;this.Cc=c;this.f=d}ig.prototype.j=function(){return this.Pc+"."+this.name};function Jf(a){return a.f.some(function(a){return a.ea.Bc()})}function Q(a,b,c,d){this.u=a;this.ga=c;this.I=b;this.qd=d;this.Za=null}r("lf.schema.Table",Q);Q.prototype.getName=f("u");Q.prototype.getName=Q.prototype.getName;Q.prototype.Wa=f("Za");
function H(a){return a.Za||a.u}Q.prototype.kc=function(a){var b=new this.constructor(this.u);b.Za=a;b.jg=this.jg;return b};Q.prototype.as=Q.prototype.kc;Q.prototype.createRow=Q.prototype.xb;Q.prototype.deserializeRow=Q.prototype.ac;Q.prototype.Aa=f("ga");Q.prototype.getIndices=Q.prototype.Aa;Q.prototype.ab=f("I");Q.prototype.getColumns=Q.prototype.ab;Q.prototype.getConstraint=Q.prototype.zb;Q.prototype.Bb=f("qd");Q.prototype.persistentIndex=Q.prototype.Bb;function R(a,b){this.child=a;this.Eb=b;this.Za=null}m=R.prototype;m.getName=function(){return this.Eb+"("+this.child.getName()+")"};m.j=function(){return this.Eb+"("+this.child.j()+")"};m.J=function(){return this.child.J()};m.toString=function(){return this.j()};m.M=function(){return this.child.M()};m.Wa=f("Za");m.Aa=function(){return[]};m.sa=l(null);m.Bc=l(!1);m.kc=function(a){this.Za=a;return this};R.prototype.as=R.prototype.kc;
function jg(a){for(var b=[a];a instanceof R;)b.push(a.child),a=a.child;return b}function kg(a){this.Za=a||null;this.S=new Q("#UnknownTable",[],[],!1)}m=kg.prototype;m.getName=l("*");m.j=function(){return this.getName()};m.toString=function(){return this.j()};m.J=f("S");m.M=l(4);m.Wa=f("Za");m.Aa=function(){return[]};m.sa=l(null);m.Bc=l(!1);r("lf.fn.avg",function(a){return new R(a,"AVG")});function lg(a){return new R(a||new kg,"COUNT")}r("lf.fn.count",lg);function mg(a){return new R(a,"DISTINCT")}r("lf.fn.distinct",mg);r("lf.fn.max",function(a){return new R(a,"MAX")});r("lf.fn.min",function(a){return new R(a,"MIN")});r("lf.fn.stddev",function(a){return new R(a,"STDDEV")});r("lf.fn.sum",function(a){return new R(a,"SUM")});r("lf.fn.geomean",function(a){return new R(a,"GEOMEAN")});function S(a,b){J.call(this);this.Ff=b}t(S,J);S.prototype.exec=function(a,b){switch(this.Ff){case 1:return ng(this,a,b);case 0:return og(this,a,b);default:return pg(this,a,b)}};S.prototype.toString=l("dummy_node");S.prototype.Qc=function(){return this.toString()};function pg(a,b,c){return new v(function(a){a(this.aa(b,[],c))}.bind(a))}function ng(a,b,c){return Bd(a,0).exec(b,c).then(function(a){return this.aa(b,a,c)}.bind(a))}
function og(a,b,c){var d=K(a).map(function(a){return a.exec(b,c)});return cb(d).then(function(a){var d=[];a.forEach(function(a){for(var b=0;b<a.length;++b)d.push(a[b])});return this.aa(b,d,c)}.bind(a))};function qg(a){S.call(this,0,1);this.se=a}t(qg,S);qg.prototype.toString=function(){return"aggregation("+this.se.map(function(a){return a.j()}).toString()+")"};qg.prototype.aa=function(a,b){b.forEach(function(a){rg(new sg(a,this.se))},this);return b};function sg(a,b){this.Ea=a;this.I=b}
function rg(a){a.I.forEach(function(a){a=jg(a).reverse();for(var c=1;c<a.length;c++){var d=a[c],e=jg(d).slice(-1)[0],g=d.child instanceof R?id(this.Ea,d.child):this.Ea;if(null!==g.Va&&g.Va.has(d.j()))break;g=tg(d.Eb,g,e);e=this.Ea;null===e.Va&&(e.Va=z());e.Va.set(d.j(),g)}},a)}
function tg(a,b,c){var d=null;switch(a){case "MIN":d=ug(b,c,function(a,b){return b<a?b:a});break;case "MAX":d=ug(b,c,function(a,b){return b>a?b:a});break;case "DISTINCT":d=vg(b,c);break;case "COUNT":d=wg(b,c);break;case "SUM":d=xg(b,c);break;case "AVG":a=wg(b,c);0<a&&(d=xg(b,c)/a);break;case "GEOMEAN":d=yg(b,c);break;default:d=zg(b,c)}return d}function ug(a,b,c){return a.entries.reduce(function(a,e){var g=G(e,b);return null===g?a:null===a?g:c(a,g)},null)}
function wg(a,b){return b instanceof kg?a.entries.length:a.entries.reduce(function(a,d){return a+(ea(G(d,b))?0:1)},0)}function xg(a,b){return ug(a,b,function(a,b){return b+a})}function zg(a,b){var c=[];a.entries.forEach(function(a){a=G(a,b);null===a||c.push(a)});return 0==c.length?null:zb.apply(null,c)}function yg(a,b){var c=0,d=a.entries.reduce(function(a,d){var h=G(d,b);if(0==h||null===h)return a;c++;return a+Math.log(h)},0);return 0==c?null:Math.pow(Math.E,d/c)}
function vg(a,b){var c=z();a.entries.forEach(function(a){var e=G(a,b);c.set(e,a)});return new D(A(c),F(a))};function Ag(a,b){this.xa=a;this.pa=b}Ag.prototype.cb=f("xa");Ag.prototype.ba=f("pa");function Bg(){J.call(this)}t(Bg,J);function Cg(a,b){J.call(this);this.table=a;this.values=b}t(Cg,Bg);function Dg(a,b){Cg.call(this,a,b)}t(Dg,Cg);function Eg(a){J.call(this);this.table=a}t(Eg,Bg);Eg.prototype.toString=function(){return"delete("+this.table.getName()+")"};function Fg(a,b){J.call(this);this.table=a;this.ne=b}t(Fg,Bg);
Fg.prototype.toString=function(){var a=[];this.ne&&(a=this.ne.map(function(a){return a.L.getName()},this));return"update("+this.table.getName()+", ["+a.join(",")+"])"};function Gg(a){J.call(this);this.H=a}t(Gg,Bg);Gg.prototype.toString=function(){return"select("+this.H.toString()+")"};function Hg(a){J.call(this);this.table=a}t(Hg,Bg);Hg.prototype.toString=function(){var a="table_access("+this.table.getName();null===this.table.Wa()||(a+=" as "+this.table.Wa());return a+")"};
function Ig(){J.call(this)}t(Ig,Bg);Ig.prototype.toString=l("cross_product");function Jg(a,b){J.call(this);this.f=a;this.Jb=b}t(Jg,Bg);Jg.prototype.toString=function(){var a="project("+this.f.toString();if(null!==this.Jb)var b=this.Jb.map(function(a){return a.j()}).join(", "),a=a+(", groupBy("+b+")");return a+")"};function Kg(a){J.call(this);this.N=a}t(Kg,Bg);Kg.prototype.toString=function(){return"order_by("+Rd(this.N)+")"};function Lg(a){J.call(this);this.f=a}t(Lg,Bg);
Lg.prototype.toString=function(){return"aggregation("+this.f.toString()+")"};function Mg(a){J.call(this);this.f=a}t(Mg,Bg);Mg.prototype.toString=function(){return"group_by("+this.f.toString()+")"};function Ng(a){J.call(this);this.W=a}t(Ng,Bg);Ng.prototype.toString=function(){return"limit("+this.W+")"};function Og(a){J.call(this);this.O=a}t(Og,Bg);Og.prototype.toString=function(){return"skip("+this.O+")"};function Pg(a,b){J.call(this);this.H=a;this.Lb=b}t(Pg,Bg);
Pg.prototype.toString=function(){return"join(type: "+(this.Lb?"outer":"inner")+", "+this.H.toString()+")"};function Qg(){};function Rg(){}t(Rg,Qg);Rg.prototype.ib=function(a){this.V=a;this.Ua(this.V);return this.V};Rg.prototype.Ua=function(a){if(a instanceof Gg){var b=Sg(this,a.H),b=Tg(this,b);Wf(a,a,b[0],b[1]);a==this.V&&(this.V=b[0]);a=b[0]}K(a).forEach(function(a){this.Ua(a)},this)};function Sg(a,b){if(0==K(b).length||"and"!=b.Ob)return[b];var c=K(b).slice().map(function(a){b.removeChild(a);return Sg(this,a)},a);return Ca(c)}
function Tg(a,b){var c=null,d=null;b.map(function(a,b){var h=new Gg(a);0==b?c=h:L(d,h);d=h},a);return[c,d]};function Ug(){}t(Ug,Qg);Ug.prototype.ib=function(a){this.V=a;this.Ua(this.V);return this.V};Ug.prototype.Ua=function(a){if(a instanceof Ig)for(;2<K(a).length;){for(var b=new Ig,c=0;2>c;c++){var d=Dd(a,0);L(b,d)}Cd(a,b,0)}K(a).forEach(function(a){this.Ua(a)},this)};function Vg(){S.call(this,0,0)}t(Vg,S);Vg.prototype.toString=l("cross_product");Vg.prototype.aa=function(a,b){for(var c=b[0],d=b[1],e=[],g=F(c),h=F(d),k=0;k<c.entries.length;k++)for(var p=0;p<d.entries.length;p++){var E=rd(c.entries[k],g,d.entries[p],h);e.push(E)}c=F(c).concat(F(d));return[new D(e,c)]};function Wg(a,b){Ud.call(this,a,b);this.Qa=a.m(Xb);this.Ab=a.m(Yb)}t(Wg,Ud);Wg.prototype.getPriority=l(2);Wg.prototype.Zd=function(a){0==this.M()?Xg(this,a):this.Mc()};function Xg(a,b){a.sd.forEach(function(a,d){a instanceof Qd&&Xd(this.Ab,a,b[d])},a)}Wg.prototype.Mc=function(){var a=Zd(this.Ab,this.ba());0!=a.length&&(a=new Wd(this.global,a),$d(this.Qa,a))};function Yg(a){Ld.call(this,a)}t(Yg,Ld);Yg.prototype.ba=function(){var a=B();a.add(this.c);var b=this.ea.info();Zg(this.c.getName(),b.g).forEach(a.add.bind(a));return a};Yg.prototype.clone=function(){var a=new Yg(this.ea);Od(a,this);a.c=this.c;return a};Yg.prototype.bind=function(a){Yg.Db.bind.call(this,a);Pd(this,a);return this};function $g(a){Ld.call(this,a)}t($g,Ld);$g.prototype.ba=function(){var a=B();a.add(this.Ca);var b=this.ea.info();Zg(this.Ca.getName(),b.Te).forEach(a.add.bind(a));this.Xb&&Zg(this.Ca.getName(),b.g).forEach(a.add.bind(a));return a};$g.prototype.clone=function(){var a=new $g(this.ea);Od(a,this);a.Ca=this.Ca;this.values&&(a.values=this.values instanceof I?this.values:this.values.slice());a.Xb=this.Xb;a.Yb=this.Yb;return a};
$g.prototype.bind=function(a){$g.Db.bind.call(this,a);this.Yb&&(this.values=this.Yb instanceof I?a[this.Yb.sa()]:this.Yb.map(function(b){return b instanceof I?a[b.sa()]:b}));return this};function ah(a){Ld.call(this,a)}t(ah,Ld);ah.prototype.ba=function(){var a=B();a.add(this.table);var b=this.set.map(function(a){return a.L.j()}),c=this.ea.info();bh(c,b).forEach(a.add.bind(a));ch(c,b).forEach(a.add.bind(a));return a};ah.prototype.clone=function(){var a=new ah(this.ea);Od(a,this);a.table=this.table;a.set=this.set?this.set.slice():this.set;return a};ah.prototype.bind=function(a){ah.Db.bind.call(this,a);this.set.forEach(function(b){-1!=b.Wc&&(b.value=a[b.Wc])});Pd(this,a);return this};function dh(a,b){if(null==b)return"NULL";switch(a){case 1:return b?1:0;case 3:case 4:return b;case 0:return"'"+sb(b)+"'";default:return"'"+b.toString()+"'"}}function eh(a,b){var c=a.Xb?"INSERT OR REPLACE":"INSERT",d=a.Ca.ab(),c=c+(" INTO "+a.Ca.getName()+"("),c=c+d.map(function(a){return a.getName()}).join(", "),c=c+") VALUES (";return a.values.map(function(a){var g=d.map(function(c){var d=a.o[c.getName()];return b?null!=d?"#":"NULL":dh(c.M(),d)});return c+g.join(", ")+");"}).join("\n")}
function fh(a){switch(a){case "between":return"BETWEEN";case "eq":return"=";case "gte":return">=";case "gt":return">";case "in":return"IN";case "lte":return"<=";case "lt":return"<";case "match":return"LIKE";case "neq":return"<>";default:return"UNKNOWN"}}function gh(a,b,c,d){return a instanceof I?"?"+a.sa().toString():d?null!=a?"#":"NULL":"match"==b?"'"+a.toString()+"'":"in"==b?"("+a.map(function(a){return dh(c,a)}).join(", ")+")":"between"==b?dh(c,a[0])+" AND "+dh(c,a[1]):dh(c,a).toString()}
function hh(a,b){return K(a).map(function(a){return"("+ih(a,b)+")"}).join("and"==a.Ob?" AND ":" OR ")}function jh(a){return[a.da.j(),fh(a.F),a.ia.j()].join(" ")}function ih(a,b){if(a instanceof Id){var c=a.L.j(),d=fh(a.F),e=gh(a.value,a.F,a.L.M(),b);return"="==d&&"NULL"==e?[c,"IS NULL"].join(" "):"<>"==d&&"NULL"==e?[c,"IS NOT NULL"].join(" "):[c,d,e].join(" ")}if(a instanceof Yf)return hh(a,b);if(a instanceof ag)return jh(a);throw new C(357,typeof a);}
function kh(a,b){var c=ih(a,b);return c?" WHERE "+c:""}function lh(a,b){var c="UPDATE "+a.table.getName()+" SET ",c=c+a.set.map(function(a){var b=a.L.j()+" = ";return-1!=a.Wc?b+"?"+a.Wc.toString():b+dh(a.L.M(),a.value).toString()}).join(", ");a.B&&(c+=kh(a.B,b));return c+";"}
function mh(a,b){var c="*";a.f.length&&(c=a.f.map(function(a){return a.Wa()?a.j()+" AS "+a.Wa():a.j()}).join(", "));c="SELECT "+c+" FROM ";null!=a.sb&&0!=a.sb.size?c+=nh(a,b):(c+=a.c.map(oh).join(", "),a.B&&(c+=kh(a.B,b)));if(a.N)var d=a.N.map(function(a){return a.L.j()+(0==a.gb?" DESC":" ASC")}).join(", "),c=c+(" ORDER BY "+d);a.fa&&(d=a.fa.map(function(a){return a.j()}).join(", "),c+=" GROUP BY "+d);a.W&&(c+=" LIMIT "+a.W.toString());a.O&&(c+=" SKIP "+a.O.toString());return c+";"}
function oh(a){return H(a)!=a.getName()?a.getName()+" AS "+H(a):a.getName()}function nh(a,b){for(var c=Rf(a.B,function(a){return a instanceof ag}),d=c.map(jh),e=oh(a.c[0]),g=1;g<a.c.length;g++)var h=oh(a.c[g]),e=a.sb.has(c[d.length-g].Y())?e+(" LEFT OUTER JOIN "+h):e+(" INNER JOIN "+h),e=e+(" ON ("+d[d.length-g]+")");c=Bd(a.B,0);c instanceof ag||(e+=" WHERE "+ih(c,b));return e}
function ph(a,b){var c=b||!1,d=a.a.clone();if(d instanceof $g)return eh(d,c);if(d instanceof Yg){var e="DELETE FROM "+d.c.getName();d.B&&(e+=kh(d.B,c));return e+";"}if(d instanceof ah)return lh(d,c);if(d instanceof Qd)return mh(d,c);throw new C(358,typeof d);};function T(a,b){this.global=a;this.ig=a.m(Wb);this.Qa=a.m(Xb);this.a=b}r("lf.query.BaseBuilder",T);T.prototype.exec=function(){try{this.$a()}catch(a){return $a(a)}return new v(function(a,c){var d=new Wg(this.global,[this.zc()]);$d(this.Qa,d).then(function(c){a(gd(c[0]))},c)},this)};T.prototype.exec=T.prototype.exec;T.prototype.Hf=function(){var a=function(a){return a.Qc(this.a)+"\n"}.bind(this);return Xf(qh(this).cb(),a)};T.prototype.explain=T.prototype.Hf;
T.prototype.bind=function(a){this.a.bind(a);return this};T.prototype.bind=T.prototype.bind;T.prototype.pg=function(a){return ph(this,a)};T.prototype.toSql=T.prototype.pg;T.prototype.$a=aa();function qh(a){if(null==a.Ue){var b;b=a.ig;var c=a.a,d=b.Wf.create(c);b=b.fg.create(d,c);a.Ue=b}return a.Ue}T.prototype.zc=function(){return{context:this.a.clone(),be:qh(this)}};function rh(a){T.call(this,a,new Yg(a.m(Zb)))}t(rh,T);r("lf.query.DeleteBuilder",rh);rh.prototype.c=function(a){if(null!=this.a.c)throw new C(515);this.a.c=a;return this};rh.prototype.from=rh.prototype.c;rh.prototype.B=function(a){this.Bd();this.a.B=a;return this};rh.prototype.where=rh.prototype.B;rh.prototype.Bd=function(){if(null==this.a.c)throw new C(548);if(null!=this.a.B)throw new C(516);};rh.prototype.$a=function(){rh.Db.$a.call(this);if(null==this.a.c)throw new C(517);};function sh(a,b){T.call(this,a,new $g(a.m(Zb)));this.a.Xb=b||!1}t(sh,T);r("lf.query.InsertBuilder",sh);sh.prototype.$a=function(){sh.Db.$a.call(this);var a=this.a;if(null==a.Ca||null==a.values)throw new C(518);if(a.Xb&&null===a.Ca.zb().fd())throw new C(519);};sh.prototype.Ca=function(a){if(null!=this.a.Ca)throw new C(520);this.a.Ca=a;return this};sh.prototype.into=sh.prototype.Ca;
sh.prototype.values=function(a){if(null!=this.a.values)throw new C(521);a instanceof I||a.some(function(a){return a instanceof I})?this.a.Yb=a:this.a.values=a;return this};sh.prototype.values=sh.prototype.values;function th(a){return uh("and",Array.prototype.slice.call(arguments))}r("lf.op.and",th);r("lf.op.or",function(a){return uh("or",Array.prototype.slice.call(arguments))});function uh(a,b){var c=new Yf(a);b.forEach(function(a){L(c,a)});return c}r("lf.op.not",function(a){a.vd(!0);return a});function U(a,b){T.call(this,a,new Qd(a.m(Zb)));this.Be=this.wd=!1;this.a.f=b;vh(this);wh(this)}t(U,T);r("lf.query.SelectBuilder",U);U.prototype.$a=function(){U.Db.$a.call(this);var a=this.a;if(null==a.c)throw new C(522);if(q(a.Nb)&&!q(a.W)||q(a.Vb)&&!q(a.O))throw new C(523);null!=this.a.fa?xh(this):yh(this)};function vh(a){var b=a.a.f.filter(function(a){return a instanceof R&&"DISTINCT"==a.Eb},a);if(0!=b.length&&(1!=b.length||1!=a.a.f.length))throw new C(524);}
function xh(a){var b=a.a.f.filter(function(a){return!(a instanceof R)}).map(function(a){return a.j()}),c=!1;if(0==a.a.fa.length||0==a.a.f.length)c=!0;else{var d=a.a.fa.map(function(a){return a.j()});(c=b.some(function(a){return-1==d.indexOf(a)}))||(c=a.a.fa.some(function(a){a=a.M();return 6==a||0==a}))}if(c)throw new C(525);}function yh(a){var b=a.a.f.some(function(a){return a instanceof R},a);a=a.a.f.some(function(a){return!(a instanceof R)},a)||0==a.a.f.length;if(b&&a)throw new C(526);}
function wh(a){a.a.f.forEach(function(a){if(a instanceof R&&!zh(a.Eb,a.M()))throw new C(527,a.j());},a)}function Ah(a,b){if(null==a.a.c)throw new C(b);}U.prototype.c=function(a){if(this.Be)throw new C(515);this.Be=!0;null==this.a.c&&(this.a.c=[]);this.a.c.push.apply(this.a.c,Array.prototype.slice.call(arguments));return this};U.prototype.from=U.prototype.c;U.prototype.B=function(a){Ah(this,548);if(this.wd)throw new C(516);this.wd=!0;Bh(this,a);return this};U.prototype.where=U.prototype.B;
function Bh(a,b){if(null!=a.a.B){var c=th(b,a.a.B);a.a.B=c}else a.a.B=b}U.prototype.Pf=function(a,b){Ah(this,542);if(this.wd)throw new C(547);this.a.c.push(a);Bh(this,b);return this};U.prototype.innerJoin=U.prototype.Pf;U.prototype.Uf=function(a,b){Ah(this,542);if(!(b instanceof ag))throw new C(541);if(this.wd)throw new C(547);this.a.c.push(a);null==this.a.sb&&(this.a.sb=B());var c=b;H(a)!=H(b.ia.J())&&(c=b.reverse());this.a.sb.add(c.Y());Bh(this,c);return this};U.prototype.leftOuterJoin=U.prototype.Uf;
U.prototype.W=function(a){if(null!=(this.a.W||this.a.Nb))throw new C(528);if(a instanceof I)this.a.Nb=a;else{if(0>a)throw new C(531);this.a.W=a}return this};U.prototype.limit=U.prototype.W;U.prototype.O=function(a){if(null!=(this.a.O||this.a.Vb))throw new C(529);if(a instanceof I)this.a.Vb=a;else{if(0>a)throw new C(531);this.a.O=a}return this};U.prototype.skip=U.prototype.O;U.prototype.N=function(a,b){Ah(this,549);null==this.a.N&&(this.a.N=[]);this.a.N.push({L:a,gb:null!=b?b:1});return this};
U.prototype.orderBy=U.prototype.N;U.prototype.fa=function(a){Ah(this,549);if(null!=this.a.fa)throw new C(530);null==this.a.fa&&(this.a.fa=[]);this.a.fa.push.apply(this.a.fa,Array.prototype.slice.call(arguments));return this};U.prototype.groupBy=U.prototype.fa;function zh(a,b){switch(a){case "COUNT":case "DISTINCT":return!0;case "AVG":case "GEOMEAN":case "STDDEV":case "SUM":return 4==b||3==b;case "MAX":case "MIN":return 4==b||3==b||5==b||2==b}return!1}
U.prototype.clone=function(){var a=new U(this.global,this.a.f);a.a=this.a.clone();a.a.$c=null;return a};U.prototype.clone=U.prototype.clone;function Ch(a,b){T.call(this,a,new ah(a.m(Zb)));this.a.table=b}t(Ch,T);r("lf.query.UpdateBuilder",Ch);Ch.prototype.set=function(a,b){var c={Wc:b instanceof I?b.sa():-1,L:a,value:b};null!=this.a.set?this.a.set.push(c):this.a.set=[c];return this};Ch.prototype.set=Ch.prototype.set;Ch.prototype.B=function(a){this.Bd();this.a.B=a;return this};Ch.prototype.where=Ch.prototype.B;Ch.prototype.Bd=function(){if(null!=this.a.B)throw new C(516);};
Ch.prototype.$a=function(){Ch.Db.$a.call(this);if(null==this.a.set)throw new C(532);if(this.a.set.some(function(a){return a.value instanceof I}))throw new C(501);};function Dh(a){this.a=a;this.xa=null}Dh.prototype.ec=function(){null===this.xa&&(this.xa=this.dd());return this.xa};function Eh(a){Dh.call(this,a)}t(Eh,Dh);Eh.prototype.dd=function(){return this.a.Xb?new Dg(this.a.Ca,this.a.values):new Cg(this.a.Ca,this.a.values)};function Fh(a){Dh.call(this,a)}t(Fh,Dh);Fh.prototype.dd=function(){var a=new Fg(this.a.table,this.a.set),b=null!=this.a.B?new Gg(this.a.B.Gb()):null,c=new Hg(this.a.table);null===b?L(a,c):(L(b,c),L(a,b));return a};function Gh(a,b,c){this.xa=a;this.ce=b;this.Sb=c}Gh.prototype.ec=function(){this.Sb.forEach(function(a){this.xa=a.ib(this.xa,this.ce)},this);return this.xa};function Hh(a,b){Dh.call(this,a);this.Sb=b}t(Hh,Dh);Hh.prototype.dd=function(){var a=new Eg(this.a.c),b=null!=this.a.B?new Gg(this.a.B.Gb()):null,c=new Hg(this.a.c);null===b?L(a,c):(L(b,c),L(a,b));return(new Gh(a,this.a,this.Sb)).ec()};function Ih(){}t(Ih,Qg);Ih.prototype.ib=function(a,b){this.V=a;this.Ua(this.V,b);return this.V};Ih.prototype.Ua=function(a,b){if(a instanceof Gg&&a.H instanceof ag){var c=a.H.Y(),d=Bd(a,0);d instanceof Ig&&(c=q(b)&&null!=b.sb&&b.sb.has(c),c=new Pg(a.H,c),Wf(a,d,c,c),a==this.V&&(this.V=c),a=c)}K(a).forEach(function(a){this.Ua(a,b)},this)};function Jh(){this.Vc=B()}t(Jh,Qg);Jh.prototype.ib=function(a){this.Vc.clear();this.V=a;this.Ua(this.V);this.Vc.clear();return this.V};Jh.prototype.Ua=function(a){if(Kh(a)){var b=a.H instanceof Id?Lh(this,a):Mh(this,a);this.Vc.add(a);b==a&&(b=Bd(a,0));null!==b&&(ea(b.getParent())&&(this.V=b),Kh(b)&&!this.Vc.has(b)&&this.Ua(b))}else K(a).forEach(function(a){this.Ua(a)},this)};
function Nh(a,b,c){var d=b;if(Bd(b,0)instanceof Gg)d=Uf(b),Nh(a,b,c);else if(Oh(b)){var e=[],d=Vf(b,c,function(a){a=new Gg(a.H);e.push(a);return a});e.forEach(function(a){Nh(this,a,c)},a)}return d}function Lh(a,b){var c=B([H(b.H.L.J())]),d=function(a){return Ph(this,a,c)}.bind(a);return Nh(a,b,d)}function Mh(a,b){var c=B([H(b.H.da.J()),H(b.H.ia.J())]),d=function(a){return Ph(this,a,c)}.bind(a);return Nh(a,b,d)}
function Ph(a,b,c){var d=B();Qf(b).forEach(function(a){d.add(H(a.table))},a);b instanceof Hg&&d.add(H(b.table));return lc(d,c)}function Kh(a){return a instanceof Gg&&!(a.H instanceof Yf)}function Oh(a){a=Bd(a,0);return a instanceof Ig||a instanceof Pg};function Qh(a,b){Dh.call(this,a);this.Sb=b;this.Ye=this.Pe=this.ef=this.Se=this.te=this.Ee=this.df=this.ye=this.gf=null}t(Qh,Dh);
Qh.prototype.dd=function(){Rh(this);2<=this.a.c.length&&(this.ye=new Ig);this.df=null!=this.a.B?new Gg(this.a.B.Gb()):null;this.a.N&&(this.Se=new Kg(this.a.N));null!=this.a.O&&0<this.a.O&&(this.ef=new Og(this.a.O));null!=this.a.W&&(this.Pe=new Ng(this.a.W));null!=this.a.fa&&(this.Ee=new Mg(this.a.fa));Sh(this);this.Ye=new Jg(this.a.f||[],this.a.fa||null);var a=Th(this);return(new Gh(a,this.a,this.Sb)).ec()};
function Th(a){for(var b=[a.Pe,a.ef,a.Ye,a.Se,a.te,a.Ee,a.df,a.ye],c=null,d=null,e=0;e<b.length;e++){var g=b[e];null!==g&&(null===d?d=g:L(b[c],g),c=e)}a.gf.forEach(function(a){L(b[c],a)});return d}function Rh(a){a.gf=a.a.c.map(function(a){return new Hg(a)},a)}function Sh(a){var b=a.a.f.filter(function(a){return a instanceof R});null!=a.a.N&&a.a.N.forEach(function(a){a.L instanceof R&&b.push(a.L)});0<b.length&&(a.te=new Lg(b))};function Uh(){this.he=[new Rg,new Ug,new Jh,new Ih];this.Hd=[new Rg]}Uh.prototype.create=function(a){var b=null;if(a instanceof $g)b=new Eh(a);else if(a instanceof Yg)b=new Hh(a,this.Hd);else if(a instanceof Qd)b=new Qh(a,this.he);else if(a instanceof ah)b=new Fh(a);else throw new C(513);b=b.ec();return new Ag(b,a.ba())};function Vh(a){S.call(this,0,1);this.S=a}t(Vh,S);Vh.prototype.toString=function(){return"delete("+this.S.getName()+")"};Vh.prototype.aa=function(a,b){var c=b[0].entries.map(function(a){return a.ra});a.remove(this.S,c);return[kd()]};function Wh(a,b){S.call(this,0,-1);this.table=b;this.G=a.m(Vb)}t(Wh,S);Wh.prototype.toString=function(){return"get_row_count("+this.table.getName()+")"};Wh.prototype.aa=function(){var a=this.G.get(this.table.u+".#"),b=new D([],[this.table.getName()]),c=lg(),a=a.Sa().qa;null===b.Va&&(b.Va=z());b.Va.set(c.j(),a);return[b]};function Xh(a,b){S.call(this,0,-1);this.ja=a.m(Tb);this.G=a.m(Vb);this.table=b}t(Xh,S);Xh.prototype.toString=function(){var a="table_access("+this.table.getName();null===this.table.Wa()||(a+=" as "+this.table.Wa());return a+")"};Xh.prototype.aa=function(){var a=this.G.get(this.table.u+".#").bb();return[nd(Oe(this.ja,a),[H(this.table)])]};function Yh(a){this.i=a}t(Yh,Qg);Yh.prototype.ib=function(a,b){this.V=a;if(!this.Cd(b))return a;var c=Rf(a,function(a){return a instanceof Xh})[0],d=new Wh(this.i,c.table);Wf(c,c,d,d);return this.V};Yh.prototype.Cd=function(a){return 1==a.f.length&&1==a.c.length&&null==a.B&&null==a.W&&null==a.O&&null==a.fa?(a=a.f[0],a instanceof R&&"COUNT"==a.Eb&&a.child instanceof kg):!1};function Zh(a){S.call(this,0,1);this.De=a}t(Zh,S);Zh.prototype.toString=function(){return"groupBy("+this.De.map(function(a){return a.j()}).toString()+")"};Zh.prototype.aa=function(a,b){return $h(this,b[0])};function $h(a,b){var c=new $f,d=function(a){return this.De.map(function(b){return G(a,b)},this).join(",")}.bind(a);b.entries.forEach(function(a){c.set(d(a),a)},a);return c.keys().map(function(a){return new D(c.get(a),F(b))},a)};function ai(a,b,c){S.call(this,0,0);this.G=a.m(Vb);this.ja=a.m(Tb);this.H=b;this.Lb=c;this.zd="eq"==this.H.F?0:2;this.Fe=null}t(ai,S);var ci=["hash","index_nested_loop","nested_loop"];ai.prototype.toString=function(){return"join(type: "+(this.Lb?"outer":"inner")+", impl: "+ci[this.zd]+", "+this.H.toString()+")"};
ai.prototype.aa=function(a,b){switch(this.zd){case 0:return[eg(this.H,b[0],b[1],this.Lb)];case 1:return[fg(this.H,b[0],b[1],this.Fe,this.ja)];default:var c=this.H,d=b[0],e=b[1],g=this.Lb,h=[d,e];g||(h=bg(c,d,e));for(var d=h[0],e=h[1],h=[],k=F(d),p=F(e),E=d.entries.length,ga=e.entries.length,ka=ga+256-1>>8,Qa=0;Qa<ka;){for(var Ub=0;Ub<E;Ub++){var Nf=!1,Of=G(d.entries[Ub],c.da);if(null!==Of)for(var bi=Math.min(Qa+1<<8,ga),Lc=Qa<<8;Lc<bi;Lc++)if(c.qc(Of,G(e.entries[Lc],c.ia))){var Nf=!0,cj=rd(d.entries[Ub],
k,e.entries[Lc],p);h.push(cj)}g&&!Nf&&h.push(dg(c,d.entries[Ub],k))}Qa++}c=F(d).concat(F(e));return[new D(h,c)]}};function di(a,b){a.zd=1;var c=a.G.get(b.sa().j());a.Fe={Mf:b,Zf:b==a.H.da?a.H.ia:a.H.da,index:c}};function ei(a){S.call(this,0,-1);this.$e=a}t(ei,S);ei.prototype.toString=function(){return"no_op_step("+F(this.$e[0]).join(",")+")"};ei.prototype.aa=f("$e");function fi(){}t(fi,Qg);fi.prototype.ib=function(a,b){this.V=a;if(!this.Cd(b))return a;Rf(a,function(a){return a instanceof ai}).forEach(this.hg,this);return this.V};fi.prototype.Cd=function(a){return 1<a.c.length};
fi.prototype.hg=function(a){if("eq"==a.H.F&&!a.Lb){var b=function(b){if(!(b instanceof Xh))return null;b=H(b.table)==H(a.H.ia.J())?a.H.ia:a.H.da;return ea(b.sa())?null:b},c=b(Bd(a,0)),b=b(Bd(a,1));if(null!==c||null!==b){b=null===b?c:b;di(a,b);var d=new D([],[H(b.J())]);Ed(a,new ei([d]),b==c?0:1)}}};function gi(a){a=a.map(function(a){return a.ta()});a=Eb.apply(null,a);var b=[];Db(a,function(a){b.push(a)});return b}function hi(a){this.Kb=a}hi.prototype.ed=function(){return 1==this.Kb.f.length?[cd()]:[this.Kb.f.map(function(){return cd()})]};function ii(a,b){this.Kb=a;this.wa=b;this.Fd=this.Ne=null}
function ji(a,b){var c=z();a.wa.keys().forEach(function(a){var e=this.wa.get(a).map(function(a){return Md(b,a)},this),g=new Lf([cd()]);e.forEach(function(a){var b=null;"between"==a.F?b=new Zc(a.value[0],a.value[1],!1,!1):"eq"==a.F?(b=a.value,b=new Zc(b,b,!1,!1)):b="gte"==a.F?new Zc(a.value,null,!1,!1):"gt"==a.F?new Zc(a.value,null,!0,!1):"lte"==a.F?new Zc(null,a.value,!1,!1):new Zc(null,a.value,!1,!0);a=a.Xa?$c(b):[b];a=new Lf(a);g=Mf(g,a)});c.set(a,g)},a);return c}
ii.prototype.ed=function(a){if(this.Ne==a)return this.Fd;for(var b=ji(this,a),c=this.Kb.f.length-1;0<=c;c--){var d=this.Kb.f[c];if(null!==(b.get(d.ea.getName())||null))break;b.set(d.ea.getName(),new Lf([cd()]))}this.Fd=1==this.Kb.f.length?A(b)[0].ta():gi(ki(this,b));this.Ne=a;return this.Fd};function ki(a,b){var c=z(),d=0;a.Kb.f.forEach(function(a){c.set(a.ea.getName(),d);d++});return Jb(b).sort(function(a,b){return c.get(a)-c.get(b)}).map(function(a){return b.get(a)})};function li(a,b){this.hf=b;this.G=a.m(Vb)}function mi(a,b,c){c=c.filter(a.Qf,a);if(0==c.length)return null;a=ni(a,c);if(0==a.length)return null;if(1==a.length)return a[0];var d=Number.MAX_VALUE;return a.reduce(function(a,c){var h=oi(c,b);return h<d?(d=h,c):a},null)}
function ni(a,b){return a.hf.Aa().map(function(a){a=new pi(this.G,a);qi(a,b);return a},a).filter(function(a){if(null===a.wa)a=!1;else{for(var b=!1,e=!0,g=0;g<a.qb.f.length;g++){var h=a.wa.has(a.qb.f[g].ea.getName());if(b&&h){e=!1;break}h||(b=!0)}a=e}return a})}li.prototype.Qf=function(a){var b;if(b=a instanceof Id)Jd(a),b=null!==a.value&&("between"==a.F||"eq"==a.F||"gt"==a.F||"gte"==a.F||"lt"==a.F||"lte"==a.F);return b?a.L.J()==this.hf:!1};
function pi(a,b){this.G=a;this.qb=b;this.Nf=B(this.qb.f.map(function(a){return a.ea.getName()}));this.Td=this.wa=null}function ri(a){null===a.Td&&(a.Td=new ii(a.qb,a.wa));return a.Td}function qi(a,b){b.forEach(function(a){var b=a.ab()[0].getName();this.Nf.has(b)&&(null===this.wa&&(this.wa=new $f),this.wa.set(b,a.Y()))},a)}function oi(a,b){var c=ri(a).ed(b),d=a.G.get(a.qb.j());return c.reduce(function(a,b){return a+d.bd(b)},0)};function si(a,b,c,d){S.call(this,0,-1);this.G=a.m(Vb);this.index=b;this.Me=c;this.fe=d;this.Uc=this.Tc=!1}t(si,S);si.prototype.toString=function(){return"index_range_scan("+this.index.j()+", ?, "+(this.fe?"reverse":"natural")+(this.Tc?", limit:?":"")+(this.Uc?", skip:?":"")+")"};si.prototype.Qc=function(a){var b=this.toString(),c=this.Me.ed(a),b=b.replace("?",c.toString());this.Tc&&(b=b.replace("?",a.W.toString()));this.Uc&&(b=b.replace("?",a.O.toString()));return b};
si.prototype.aa=function(a,b,c){a=this.Me.ed(c);b=this.G.get(this.index.j());c=(1==a.length&&a[0]instanceof Zc&&ed(a[0])?Se(b.get(a[0].c),!1,this.Tc?c.W:void 0,this.Uc?c.O:void 0):b.bb(a,this.fe,this.Tc?c.W:void 0,this.Uc?c.O:void 0)).map(function(a){return new x(a,{})},this);return[nd(c,[this.index.Pc])]};function ti(a){S.call(this,0,1);this.rd=a}t(ti,S);ti.prototype.toString=l("select(?)");ti.prototype.Qc=function(a){a=Md(a,this.rd);return this.toString().replace("?",a.toString())};ti.prototype.aa=function(a,b,c){return[Md(c,this.rd).eval(b[0])]};function ui(a,b){S.call(this,0,1);this.ja=a.m(Tb);this.S=b}t(ui,S);ui.prototype.toString=function(){return"table_access_by_row_id("+this.S.getName()+")"};ui.prototype.aa=function(a,b){return[nd(Oe(this.ja,hd(b[0])),[H(this.S)])]};function vi(a){this.i=a}t(vi,Qg);vi.prototype.ib=function(a,b){this.V=a;Rf(a,function(a){return a instanceof Xh}).forEach(function(a){var d=wi(a);if(0!=d.length){var e=mi(new li(this.i,a.table),b,d.map(function(a){return Md(b,a.rd)}));if(null!==e){var g=z();d.forEach(function(a){g.set(a.rd,a)},this);this.V=xi(this,e,g,a)}}},this);return this.V};function wi(a){var b=[];for(a=a.getParent();a;)a instanceof ti&&b.push(a),a=a.getParent();return b}
function xi(a,b,c,d){(null===b.wa?[]:b.wa.values()).map(function(a){return c.get(a)}).forEach(Sf);b=new si(a.i,b.qb,ri(b),!1);a=new ui(a.i,d.table);L(a,b);Wf(d,d,a,b);return b.cb()};function yi(a,b){S.call(this,0,-1);this.G=a.m(Vb);this.S=b}t(yi,S);yi.prototype.toString=function(){return"insert("+this.S.getName()+")"};yi.prototype.aa=function(a,b,c){zi(this.S,c.values,this.G);a.rb(this.S,c.values);return[nd(c.values,[this.S.getName()])]};function zi(a,b,c){a=a.zb().fd();if(null===a?0:a.f[0].autoIncrement){var d=a.f[0].ea.getName();c=c.get(a.j()).max();var e=null===c?0:c[0];b.forEach(function(a){if(0==a.o[d]||null==a.o[d])e++,a.o[d]=e})}}
function Ai(a,b){S.call(this,0,-1);this.G=a.m(Vb);this.S=b}t(Ai,S);Ai.prototype.toString=function(){return"insert_replace("+this.S.getName()+")"};Ai.prototype.aa=function(a,b,c){zi(this.S,c.values,this.G);a.Od(this.S,c.values);return[nd(c.values,[this.S.getName()])]};function Bi(){S.call(this,0,1)}t(Bi,S);Bi.prototype.toString=l("limit(?)");Bi.prototype.Qc=function(a){return this.toString().replace("?",a.W.toString())};Bi.prototype.aa=function(a,b,c){b[0].entries.splice(c.W);return b};function Ci(a){S.call(this,0,1);this.N=a}t(Ci,S);m=Ci.prototype;m.toString=function(){return"order_by("+Rd(this.N)+")"};m.aa=function(a,b){if(1==b.length){var c;c=b[0];for(var d=null,e=0;e<this.N.length;e++){var g=mg(this.N[e].L);if(null!==c.Va&&c.Va.has(g.j())){d=g;break}}c=d;(null===c?b[0]:id(b[0],c)).entries.sort(this.Ef.bind(this))}else b.sort(this.kg.bind(this));return b};
m.U=function(a,b){var c=null,d=null,e=null,g=-1;do g++,e=this.N[g].L,c=this.N[g].gb,d=a(e),e=b(e);while(d==e&&g+1<this.N.length);d=d<e?-1:d>e?1:0;return 1==c?d:-d};m.kg=function(a,b){return this.U(function(b){return b instanceof R?id(a,b):G(a.entries[a.entries.length-1],b)},function(a){return a instanceof R?id(b,a):G(b.entries[b.entries.length-1],a)})};m.Ef=function(a,b){return this.U(function(b){return G(a,b)},function(a){return G(b,a)})};function Di(a,b){this.Ea=a;this.I=b}function Ei(a){return a.I.some(function(a){return a instanceof R},a)?Fi(a):Gi(a)}function Fi(a){if(1==a.I.length&&"DISTINCT"==a.I[0].Eb)return a=id(a.Ea,a.I[0]).entries.map(function(a){var b=new od(new x(-1,{}),1<this.Ea.K.size);qd(b,this.I[0],G(a,this.I[0].child));return b},a),new D(a,[]);var b=new od(new x(-1,{}),1<a.Ea.K.size);a.I.forEach(function(a){var d=a instanceof R?id(this.Ea,a):G(this.Ea.entries[0],a);qd(b,a,d)},a);return new D([b],F(a.Ea))}
function Gi(a){var b=Array(a.Ea.entries.length),c=1<a.Ea.K.size;a.Ea.entries.forEach(function(a,e){b[e]=new od(new x(a.ra.id(),{}),c);this.I.forEach(function(c){qd(b[e],c,G(a,c))},this)},a);return new D(b,F(a.Ea))}function Hi(a,b){var c=a.map(function(a){return Ei(new Di(a,b)).entries[0]});return new D(c,F(a[0]))};function Ii(a,b){S.call(this,0,1);this.f=a;this.Jb=b}t(Ii,S);Ii.prototype.toString=function(){var a="project("+this.f.toString();if(null!==this.Jb)var b=this.Jb.map(function(a){return a.j()}).join(", "),a=a+(", groupBy("+b+")");return a+")"};Ii.prototype.aa=function(a,b){var c;0==b.length?c=[kd()]:1==b.length?(c=b[0],c=[0==this.f.length?c:Ei(new Di(c,this.f))]):c=[Hi(b,this.f)];return c};function Ji(a){return a.f.some(function(a){return a instanceof R})||null!==a.Jb};function Ki(){S.call(this,0,1)}t(Ki,S);Ki.prototype.toString=l("skip(?)");Ki.prototype.Qc=function(a){return this.toString().replace("?",a.O.toString())};Ki.prototype.aa=function(a,b,c){return[new D(b[0].entries.slice(c.O),F(b[0]))]};function Li(){}t(Li,Qg);Li.prototype.ib=function(a){var b=Rf(a,function(a){return a instanceof Bi||a instanceof Ki});if(0==b.length)return a;var c=Mi(a);if(null===c)return a;b.forEach(function(a){a instanceof Bi?c.Tc=!0:c.Uc=!0;Sf(a)},this);return c.cb()};function Mi(a){a=Rf(a,function(a){return a instanceof si},function(a){return a instanceof Ii&&Ji(a)||a instanceof Ci||1!=K(a).length||a instanceof ti});return 0<a.length?a[0]:null};function Ni(a){this.i=a}t(Ni,Qg);Ni.prototype.ib=function(a){var b=Oi(a);if(null===b)return a;a:{var c=b;a=Pi(Bd(b,0));if(null!==a){var d;d=b.N;for(var e=null,g=a.table.Aa(),h=0;h<g.length&&null===e;h++)e=Qi(g[h],d);d=e;if(null===d){a=c;break a}c=new si(this.i,d.qb,new hi(d.qb),d.Je);d=new ui(this.i,a.table);L(d,c);Sf(b);c=Wf(a,a,d,c)}a=c}if(a==b)a:if(a=b,c=Ri(Bd(b,0)),null!==c){d=Qi(c.index,b.N);if(null===d)break a;c.fe=d.Je;a=Sf(b).parent}return a.cb()};
function Ri(a){a=Rf(a,function(a){return a instanceof si},function(a){return 1!=K(a).length});return 0<a.length?a[0]:null}function Pi(a){a=Rf(a,function(a){return a instanceof Xh},function(a){return 1!=K(a).length});return 0<a.length?a[0]:null}function Oi(a){a=Rf(a,function(a){return a instanceof Ci});return 0<a.length?a[0]:null}
function Qi(a,b){if(a.f.length!=b.length||!b.every(function(b,c){return b.L.getName()==a.f[c].ea.getName()}))return null;var c=Si(b,a);return c[0]||c[1]?{qb:a,Je:c[1]}:null}function Si(a,b){var c=a.reduce(function(a,b){return a<<1|(0==b.gb?0:1)},0),d=b.f.reduce(function(a,b){return a<<1|(0==b.gb?0:1)},0),d=c^d,c=0==d,d=d==Math.pow(2,Math.max(a.length,b.f.length))-1;return[c,d]};function Ti(a,b,c){this.xa=a;this.ce=b;this.Sb=c}Ti.prototype.ec=function(){this.Sb.forEach(function(a){this.xa=a.ib(this.xa,this.ce)},this);return this.xa};function Ui(a,b){S.call(this,0,1);this.S=a;this.sg=b}t(Ui,S);Ui.prototype.toString=function(){return"update("+this.S.getName()+")"};Ui.prototype.aa=function(a,b){var c=b[0].entries.map(function(a){var b=this.S.ac(a.ra.Fa());this.sg.forEach(function(a){b.o[a.L.getName()]=a.value},this);return b},this);a.update(this.S,c);return[kd()]};function Vi(a){this.i=a;this.he=[new fi,new vi(this.i),new Ni(this.i),new Li,new Yh(this.i)];this.Hd=[new vi(this.i)]}Vi.prototype.create=function(a,b){var c=a.cb();if(c instanceof Dg||c instanceof Cg)return Wi(this,a,b);if(c instanceof Jg||c instanceof Ng||c instanceof Og)return Wi(this,a,b,this.he);if(c instanceof Eg||c instanceof Fg)return Wi(this,a,b,this.Hd);throw new C(8);};function Wi(a,b,c,d){a=Pf(b.cb(),a.Yf.bind(a));null!=d&&(a=(new Ti(a,c,d)).ec());return new Sd(a,b.ba())}
Vi.prototype.Yf=function(a){if(a instanceof Jg)return new Ii(a.f,a.Jb);if(a instanceof Mg)return new Zh(a.f);if(a instanceof Lg)return new qg(a.f);if(a instanceof Kg)return new Ci(a.N);if(a instanceof Og)return new Ki;if(a instanceof Ng)return new Bi;if(a instanceof Gg)return new ti(a.H.Y());if(a instanceof Ig)return new Vg;if(a instanceof Pg)return new ai(this.i,a.H,a.Lb);if(a instanceof Hg)return new Xh(this.i,a.table);if(a instanceof Eg)return new Vh(a.table);if(a instanceof Fg)return new Ui(a.table,
a.ne);if(a instanceof Dg)return new Ai(this.i,a.table);if(a instanceof Cg)return new yi(this.i,a.table);throw new C(514);};function Xi(a){this.Wf=new Uh;this.fg=new Vi(a)};function Yi(){this.Qe=z()}function Zi(a,b){var c=a.Qe.get(b.getName())||null;null===c&&(c=new $i,a.Qe.set(b.getName(),c));return c}function aj(a,b,c,d){c.forEach(function(a){a=Zi(this,a);0==d?(a.Ya=null,a.rc=b):3==d?(null===a.Ub&&(a.Ub=B()),a.Ub.add(b),null===a.Pa&&(a.Pa=B()),a.Pa.delete(b)):1==d?(null===a.Pa&&(a.Pa=B()),a.Pa.add(b)):2==d&&(a.Ya=b)},a)}
function bj(a,b,c,d){var e=!0;c.forEach(function(a){if(e){a=Zi(this,a);var c=null===a.Pa||0==a.Pa.size;e=0==d?(null===a.Ub||0==a.Ub.size)&&c&&null===a.rc&&null!==a.Ya&&a.Ya==b:3==d?null===a.rc&&null===a.Ya&&null!==a.Pa&&a.Pa.has(b):1==d?null===a.Ya:c&&(null===a.Ya||a.Ya==b)}},a);return e}function dj(a,b,c,d){var e=bj(a,b,c,d);e&&aj(a,b,c,d);return e}Yi.prototype.releaseLock=function(a,b){b.forEach(function(b){Zi(this,b).releaseLock(a)},this)};
function ej(a,b){b.forEach(function(a){Zi(this,a).Ya=null},a)}function $i(){this.Ub=this.Pa=this.Ya=this.rc=null}$i.prototype.releaseLock=function(a){this.rc==a&&(this.rc=null);this.Ya==a&&(this.Ya=null);null===this.Pa||this.Pa.delete(a);null===this.Ub||this.Ub.delete(a)};function fj(){this.Qb=new gj;this.Dc=new Yi}function $d(a,b){(2>b.getPriority()||2>b.getPriority())&&ej(a.Dc,b.ba());a.Qb.rb(b);hj(a);return b.xc().ha}function hj(a){for(var b=a.Qb.ta(),c=0;c<b.length;c++){var d=b[c],e=!1;if(e=0==d.M()?ij(a,d,1,3):ij(a,d,2,0))a.Qb.remove(d),e=a,d.exec().then(e.dg.bind(e,d),e.cg.bind(e,d))}}function ij(a,b,c,d){var e=!1;dj(a.Dc,b.Y(),b.ba(),c)&&(e=dj(a.Dc,b.Y(),b.ba(),d));return e}fj.prototype.dg=function(a,b){this.Dc.releaseLock(a.Y(),a.ba());a.xc().resolve(b);hj(this)};
fj.prototype.cg=function(a,b){this.Dc.releaseLock(a.Y(),a.ba());a.xc().reject(b);hj(this)};function gj(){this.Qb=[]}gj.prototype.rb=function(a){Re(this.Qb,a,function(a,c){var d=a.getPriority()-c.getPriority();return 0==d?a.Y()-c.Y():d})};gj.prototype.ta=function(){return this.Qb.slice()};gj.prototype.remove=function(a){var b=this.Qb;a=va(b,a);var c;(c=0<=a)&&ua.splice.call(b,a,1);return c};function jj(a,b){this.Id=sd.wc();this.de=a;this.nd=b;this.I=kj(this)}function kj(a){if(0<a.de.f.length)return a.de.f;var b=[];a.de.c.forEach(function(a){a.ab().forEach(function(a){b.push(a)})});return b}jj.prototype.U=function(a,b){return this.I.every(function(c){return yd(this.Id,c.M(),"eq")(G(a,c),G(b,c))},this)};
function lj(a,b,c){var d=null===b?[]:b.entries,e=vb(d,c.entries,a.U.bind(a),function(a){return d[a]});b=[];for(var g=0,h=0;h<d.length;h++){var k=d[h];e[g]==k?g++:(k=a.nd.splice(g,1),k=mj(h,k,0,a.nd),b.push(k))}e=vb(d,c.entries,a.U.bind(a),function(a,b){return c.entries[b]});for(h=g=0;h<c.entries.length;h++)k=c.entries[h],e[g]==k?g++:(a.nd.splice(h,0,k.ra.o),k=mj(h,[],1,a.nd),b.push(k));return b}function mj(a,b,c,d){return{tg:c,index:a,object:d,vg:b,type:"splice"}};function nj(){this.cc=z()}nj.prototype.yd=function(a,b){var c=la(a.a).toString(),d=this.cc.get(c)||null;null===d&&(d=new oj(a),this.cc.set(c,d));d.yd(b)};nj.prototype.ee=function(a,b){var c=la(a.a).toString(),d=this.cc.get(c)||null;d.ee(b);0<d.Hc.size||this.cc.delete(c)};function Zd(a,b){var c=B();b.forEach(function(a){c.add(a.getName())});var d=[];a.cc.forEach(function(a){a=a.zc();a.context.c.some(function(a){return c.has(a.getName())})&&d.push(a)});return d}
function Xd(a,b,c){b=la(null!=b.$c?b.$c:b).toString();a=a.cc.get(b)||null;null!==a&&pj(a,c)}function oj(a){this.vf=a;this.Hc=B();this.ag=[];this.Oe=null;this.Cf=new jj(a.a,this.ag)}oj.prototype.yd=function(a){this.Hc.has(a)||this.Hc.add(a)};oj.prototype.ee=function(a){return this.Hc.delete(a)};oj.prototype.zc=function(){var a=this.vf;return{context:a.a,be:qh(a)}};function pj(a,b){var c=lj(a.Cf,a.Oe,b);a.Oe=b;0<c.length&&a.Hc.forEach(function(a){a(c)})};function qj(a,b){var c=a.m(Zb),d=b||{},e=new Ne(c);a.hb(Tb,e);var e=null,g=!1;switch(d.storeType||0){case 1:e=new Ae(c);break;case 5:e=new Ce(c);break;case 4:e=new Je(a,c,d.webSqlDbSize);break;case 3:e=new le(c,d.firebase);g=!0;break;default:e=new we(a,c)}a.hb(Sb,e);var h=new Kf;a.hb(Vb,h);return e.Ba(d.onUpgrade).then(function(){var b=new Xi(a);a.hb(Wb,b);b=new fj;a.hb(Xb,b);b=new nj;a.hb(Yb,b);return h.Ba(c)}).then(function(){if(g){var b=new ae(a);b.vb.subscribe(b.Xd.bind(b))}return(new Df(a)).Ba(c)})}
;function rj(a,b){this.i=a;this.vb=a.m(Sb);this.Qa=a.m(Xb);this.Ab=a.m(Yb);this.pa=B(b);this.Oa=new Vc(this.i,this.pa);this.Rb=db();this.sc=db();this.pe=db()}m=rj.prototype;m.exec=function(){this.pe.resolve();return this.sc.ha};m.M=l(1);m.ba=f("pa");m.xc=f("Rb");m.Y=function(){return la(this)};m.getPriority=l(2);function sj(a){$d(a.Qa,a);return a.pe.ha}
function tj(a,b){var c=b.zc();return c.be.cb().exec(a.Oa,c.context).then(function(a){return gd(a[0])},function(a){this.Oa.Cb();var b=new jb(a.name);this.sc.reject(b);throw a;}.bind(a))}m.la=function(){this.vb.Hb(this.M(),this.Oa).la().then(function(){this.Mc();this.sc.resolve()}.bind(this),function(a){this.Oa.Cb();this.sc.reject(a)}.bind(this));return this.Rb.ha};m.Cb=function(){this.Oa.Cb();this.sc.resolve();return this.Rb.ha};
m.Mc=function(){var a=Zd(this.Ab,this.pa);0!=a.length&&(a=new Wd(this.i,a),$d(this.Qa,a))};function uj(a){this.i=a;this.Qa=a.m(Xb);this.Rc=null;this.Ra=0;0==vj.size&&(vj.set(0,B([1,4])),vj.set(1,B([2])),vj.set(2,B([3,5,6])),vj.set(3,B([2,7])),vj.set(4,B([7])),vj.set(5,B([7])),vj.set(6,B([7])))}r("lf.proc.Transaction",uj);var vj=z();function wj(a,b){var c=vj.get(a.Ra)||null;if(null===c||!c.has(b))throw new C(107,a.Ra,b);a.Ra=b}
uj.prototype.exec=function(a){wj(this,4);var b=[];try{a.forEach(function(a){a.$a();b.push(a.zc())},this)}catch(c){return wj(this,7),$a(c)}a=new Wg(this.i,b);return $d(this.Qa,a).then(function(a){wj(this,7);return a.map(function(a){return gd(a)})}.bind(this),function(a){wj(this,7);throw a;}.bind(this))};uj.prototype.exec=uj.prototype.exec;uj.prototype.tf=function(a){wj(this,1);this.Rc=new rj(this.i,a);return sj(this.Rc).then(function(){wj(this,2)}.bind(this))};uj.prototype.begin=uj.prototype.tf;
uj.prototype.sf=function(a){wj(this,3);return tj(this.Rc,a).then(function(a){wj(this,2);return a}.bind(this),function(a){wj(this,7);throw a;}.bind(this))};uj.prototype.attach=uj.prototype.sf;uj.prototype.la=function(){wj(this,5);return this.Rc.la().then(function(){wj(this,7)}.bind(this))};uj.prototype.commit=uj.prototype.la;uj.prototype.Cb=function(){wj(this,6);return this.Rc.Cb().then(function(){wj(this,7)}.bind(this))};uj.prototype.rollback=uj.prototype.Cb;function V(a){this.i=a;this.s=a.m(Zb);this.Nd=!1}r("lf.proc.Database",V);V.prototype.Ba=function(a){this.i.hb(Zb,this.s);return qj(this.i,a).then(function(){this.Nd=!0;return this}.bind(this))};V.prototype.init=V.prototype.Ba;V.prototype.pb=f("s");V.prototype.getSchema=V.prototype.pb;function xj(a){if(!a.Nd)throw new C(2);}V.prototype.select=function(a){xj(this);return new U(this.i,1!=arguments.length||null!=arguments[0]?Array.prototype.slice.call(arguments):[])};V.prototype.select=V.prototype.select;
V.prototype.rb=function(){xj(this);return new sh(this.i)};V.prototype.insert=V.prototype.rb;V.prototype.Od=function(){xj(this);return new sh(this.i,!0)};V.prototype.insertOrReplace=V.prototype.Od;V.prototype.update=function(a){xj(this);return new Ch(this.i,a)};V.prototype.update=V.prototype.update;V.prototype.delete=function(){xj(this);return new rh(this.i)};V.prototype["delete"]=V.prototype.delete;V.prototype.observe=function(a,b){this.i.m(Yb).yd(a,b)};V.prototype.observe=V.prototype.observe;
V.prototype.unobserve=function(a,b){this.i.m(Yb).ee(a,b)};V.prototype.unobserve=V.prototype.unobserve;V.prototype.Af=function(){xj(this);return new uj(this.i)};V.prototype.createTransaction=V.prototype.Af;V.prototype.close=function(){try{this.i.m(Sb).close()}catch(a){}this.i.clear();this.Nd=!1};V.prototype.close=V.prototype.close;function W(a,b,c,d,e,g){this.S=a;this.u=b;this.Ke=c;this.Ie=d;this.mf=e;this.Za=g||null}r("lf.schema.BaseColumn",W);m=W.prototype;m.getName=f("u");m.j=function(){return H(this.S)+"."+this.u};m.toString=function(){return this.j()};m.J=f("S");m.M=f("mf");W.prototype.getType=W.prototype.M;W.prototype.Wa=f("Za");W.prototype.Aa=function(){null==this.ga&&(this.ga=[],this.J().Aa().forEach(function(a){-1!=a.f.map(function(a){return a.ea.getName()}).indexOf(this.u)&&this.ga.push(a)},this));return this.ga};
W.prototype.sa=function(){if(!q(this.ca)){var a=this.Aa().filter(function(a){return 1!=a.f.length?!1:a.f[0].ea.getName()==this.getName()},this);this.ca=0<a.length?a[0]:null}return this.ca};W.prototype.Bc=f("Ie");W.prototype.isNullable=W.prototype.Bc;W.prototype.Cc=f("Ke");W.prototype.Na=function(a){return gg(this,a,"eq")};W.prototype.eq=W.prototype.Na;W.prototype.Re=function(a){return gg(this,a,"neq")};W.prototype.neq=W.prototype.Re;W.prototype.Ud=function(a){return gg(this,a,"lt")};
W.prototype.lt=W.prototype.Ud;W.prototype.Xf=function(a){return gg(this,a,"lte")};W.prototype.lte=W.prototype.Xf;W.prototype.Jf=function(a){return gg(this,a,"gt")};W.prototype.gt=W.prototype.Jf;W.prototype.Kf=function(a){return gg(this,a,"gte")};W.prototype.gte=W.prototype.Kf;W.prototype.match=function(a){return gg(this,a,"match")};W.prototype.match=W.prototype.match;W.prototype.uf=function(a,b){return gg(this,[a,b],"between")};W.prototype.between=W.prototype.uf;
W.prototype.Lf=function(a){return gg(this,a,"in")};W.prototype["in"]=W.prototype.Lf;W.prototype.Sf=function(){return this.Na(null)};W.prototype.isNull=W.prototype.Sf;W.prototype.Rf=function(){return this.Re(null)};W.prototype.isNotNull=W.prototype.Rf;W.prototype.kc=function(a){return new W(this.S,this.u,this.Ke,this.Ie,this.mf,a)};W.prototype.as=W.prototype.kc;function yj(){this.ud=z()}var zj;yj.prototype.clear=function(){this.ud.clear()};yj.prototype.clear=yj.prototype.clear;yj.prototype.hb=function(a,b){this.ud.set(a.toString(),b);return b};yj.prototype.registerService=yj.prototype.hb;yj.prototype.m=function(a){var b=this.ud.get(a.toString())||null;if(null===b)throw new C(7,a.toString());return b};yj.prototype.getService=yj.prototype.m;yj.prototype.Sd=function(a){return this.ud.has(a.toString())};yj.prototype.isRegistered=yj.prototype.Sd;function Aj(a){this.s=a;this.Ze=new $f;this.Te=new $f;this.we=z();this.g=new $f;this.ve=new $f;Bj(this)}function Bj(a){a.s.Ja().forEach(function(a){var c=a.getName();a.zb().Ld().forEach(function(d){this.Ze.set(d.tb,d);this.Te.set(c,this.s.table(d.tb));this.g.set(d.tb,a);this.we.set(a.getName()+"."+d.Fb,d.tb);this.ve.set(d.tb+"."+d.Jc,a.getName())},this)},a)}function Pc(a,b){return a.Ze.get(b)}function Zg(a,b){var c=b.get(a);return null===c?[]:c}
function bh(a,b){var c=B();b.forEach(function(a){(a=this.we.get(a))&&c.add(a)},a);return kc(c).map(function(a){return this.s.table(a)},a)}function ch(a,b){var c=B();b.forEach(function(a){(a=this.ve.get(a))&&a.forEach(function(a){c.add(a)})},a);return kc(c).map(function(a){return this.s.table(a)},a)};function Cj(a,b,c){this.gg=a;this.$f=b;this.If=c}r("lf.schema.Constraint",Cj);Cj.prototype.fd=f("gg");Cj.prototype.getPrimaryKey=Cj.prototype.fd;Cj.prototype.Ld=f("If");Cj.prototype.getForeignKeys=Cj.prototype.Ld;function Dj(a,b){var c=a.ref.split(".");if(2!=c.length)throw new C(540,b);this.Fb=a.local;this.tb=c[0];this.Jc=c[1];this.name=b;this.action=a.action;this.timing=a.timing};function X(a){Ej(a);this.Id=sd.wc();this.u=a;this.I=z();this.le=B();this.Sc=B();this.Gc=B();this.va=null;this.ga=z();this.qd=!1;this.yb=[]}r("lf.schema.TableBuilder",X);function Fj(a){this.name=a.name;this.gb=a.order;this.autoIncrement=a.autoIncrement}var Gj=B([0,6]);function Ej(a){if(!/^[A-Za-z_][A-Za-z0-9_]*$/.test(a))throw new C(502,a);}function Hj(a,b){if(b==a.u)throw new C(546,b);if(a.I.has(b)||a.ga.has(b)||a.Sc.has(b))throw new C(503,a.u+"."+b);}
function Ij(a,b){var c=!1;b.forEach(function(a){var b=this.I.get(a.name);c=c||a.autoIncrement;if(a.autoIncrement&&3!=b)throw new C(504);},a);if(c&&1<b.length)throw new C(505);}function Jj(a){if(null!==a.va){var b=a.ga.get(a.va).map(function(a){return a.name}),c=0;if(a.yb.some(function(a,e){c=e;return-1!=b.indexOf(a.Fb)},a))throw new C(543,a.yb[c].name);}}
function Kj(a){if(null!==a.va){var b=function(a){return a.name},c=JSON.stringify(a.ga.get(a.va).map(b));a.ga.forEach(function(a,e){if(e!=this.va){var g=a.map(b);if(JSON.stringify(g)==c)throw new C(544,this.u+"."+e);}},a)}}function Lj(a){null===a.va||a.ga.get(a.va).forEach(function(a){if(this.Gc.has(a.name))throw new C(545,this.u+"."+a.name);},a)}X.prototype.nf=function(a,b){Ej(a);Hj(this,a);this.I.set(a,b);Gj.has(b)&&this.re([a]);return this};X.prototype.addColumn=X.prototype.nf;
X.prototype.pf=function(a,b){var c=this.u;this.va="pk"+(c[0].toUpperCase()+c.substring(1));Ej(this.va);Hj(this,this.va);c=Mj(this,a,!0,void 0,b);Ij(this,c);1==c.length&&this.le.add(c[0].name);this.Sc.add(this.va);this.ga.set(this.va,c);return this};X.prototype.addPrimaryKey=X.prototype.pf;
X.prototype.of=function(a,b){Ej(a);Hj(this,a);var c=new Dj(b,this.u+"."+a);q(c.action)||(c.action=0);q(c.timing)||(c.timing=0);if(1==c.action&&1==c.timing)throw new C(506);if(!this.I.has(c.Fb))throw new C(540,a);this.yb.push(c);this.qe(a,[c.Fb],!1);return this};X.prototype.addForeignKey=X.prototype.of;X.prototype.qf=function(a,b){Ej(a);Hj(this,a);var c=Mj(this,b,!0);Nj(this,a,c);1==c.length&&this.le.add(c[0].name);this.ga.set(a,c);this.Sc.add(a);return this};X.prototype.addUnique=X.prototype.qf;
X.prototype.re=function(a){a=Mj(this,a,!1);Oj(this,a);a.forEach(function(a){this.Gc.add(a.name)},this);return this};X.prototype.addNullable=X.prototype.re;function Oj(a,b){Jb(a.ga).forEach(function(a){var d=B();this.ga.get(a).forEach(function(a){d.add(a.name)});var e=b.filter(function(a){return d.has(a.name)});if(1<d.size&&0<e.length)throw new C(507,a,e.join(","));},a)}X.prototype.qe=function(a,b,c,d){Ej(a);Hj(this,a);b=Mj(this,b,!0,d);Nj(this,a,b);c&&this.Sc.add(a);this.ga.set(a,b);return this};
X.prototype.addIndex=X.prototype.qe;function Nj(a,b,c){if(1<c.length&&(a=c.filter(function(a){return this.Gc.has(a.name)},a),0<a.length))throw new C(507,b,a.join(","));}X.prototype.Bb=ba("qd");X.prototype.persistentIndex=X.prototype.Bb;X.prototype.pb=function(){Jj(this);Kj(this);Lj(this);return new (Pj(this))};X.prototype.getSchema=X.prototype.pb;function Qj(a){return a.yb}
function Mj(a,b,c,d,e){var g=b,g="string"==typeof b[0]?b.map(function(a){return new Fj({name:a,order:null!=d?d:1,autoIncrement:e||!1})}):b.map(function(a){return new Fj(a)});g.forEach(function(a){if(!this.I.has(a.name))throw new C(508,this.u,a.name);if(c){var b=this.I.get(a.name);if(0==b||6==b)throw new C(509,this.u,a.name);}},a);return g}
function Pj(a){function b(){function b(c){return a.ga.get(c).map(function(a){return{ea:this[a.name],gb:a.gb,autoIncrement:a.autoIncrement}},this)}var d=Jb(a.I).map(function(b){this[b]=new W(this,b,a.le.has(b),a.Gc.has(b),a.I.get(b));return this[b]},this),e=Jb(a.ga).map(function(d){return new ig(a.u,d,a.Sc.has(d),b.call(this,d))},this);Q.call(this,a.u,d,e,a.qd);var g=null===a.va?null:new ig(a.u,a.va,!0,b.call(this,a.va)),h=d.filter(function(b){return!a.Gc.has(b.getName())});this.xf=new Cj(g,h,a.yb);
this.cf=Rj(a,d,e)}t(b,Q);b.prototype.xb=function(a){return new this.cf(pb++,a)};b.prototype.createRow=b.prototype.xb;b.prototype.ac=function(a){var b={};this.ab().forEach(function(e){var g=e.getName();e=e.M();var h=a.value[g];if(0==e)if(e=h,null!=e&&""!=e){0!=e.length%2&&(e="0"+e);for(var h=new ArrayBuffer(e.length/2),k=new Uint8Array(h),p=0,E=0;p<e.length;p+=2)k[E++]=parseInt(e.substr(p,2),16);e=h}else e=null;else e=2==e?null!=h?new Date(h):null:h;b[g]=e},this);return new this.cf(a.id,b)};b.prototype.deserializeRow=
b.prototype.ac;b.prototype.zb=f("xf");b.prototype.getConstraint=b.prototype.zb;return b}
function Rj(a,b,c){function d(a,d){this.I=b;this.ga=c;x.call(this,a,d)}t(d,x);d.prototype.ze=function(){var a={};this.I.forEach(function(b){a[b.getName()]=b.Bc()?null:Gc[b.M()]});return a};d.prototype.jf=function(){var a={};this.I.forEach(function(b){var c=b.getName();b=b.M();var d=this.o[c];a[c]=0==b?null!=d?sb(d):null:2==b?null!=d?d.getTime():null:6==b?null!=d?d:null:d},this);return a};var e=function(a){var b=this.I.get(a.getName()),c=this.Id.Le.get(b)||null;return function(b){return c(b[a.getName()])}}.bind(a),
g=function(a){var b=a.map(function(a){return e(a.ea)});return function(a){return b.map(function(b){return b(a)})}}.bind(a),h={};c.forEach(function(a){var b=a.j();a=1==a.f.length?e(a.f[0].ea):g(a.f);h[b]=a});d.prototype.Mb=function(a){return-1!=a.indexOf("#")?this.id():h.hasOwnProperty(a)?h[a](this.o):null};return d};function Y(a,b){this.s=new Z(a,b);this.lb=z();this.tc=!1}r("lf.schema.Builder",Y);function Sj(a,b){b.yb.forEach(function(a){var d=a.tb;if(!this.lb.has(d))throw new C(536,a.name);var d=this.lb.get(d).pb(),e=a.Jc;if(!d.hasOwnProperty(e))throw new C(537,a.name);if(b.pb()[a.Fb].M()!=d[e].M())throw new C(538,a.name);if(!d[e].Cc())throw new C(539,a.name);},a)}Y.prototype.wf=function(a){a.yb.forEach(function(a){Qj(this.lb.get(a.tb)).forEach(function(c){if(c.Fb==a.Jc)throw new C(534,a.name);},this)},this)};
function Tj(a){a.tc||(a.lb.forEach(function(a){Sj(this,a);a=a.pb();this.s.K.set(a.getName(),a)},a),A(a.lb).forEach(a.wf,a),Uj(a),a.lb.clear(),a.tc=!0)}function Vj(a,b,c){b.oe||(b.oe=!0,b.Yd=!0,b.Ae.forEach(function(a){a=c.get(a);if(!a.oe)Vj(this,a,c);else if(a.Yd&&b!=a)throw new C(533);},a));b.Yd=!1}function Uj(a){var b=z();a.s.K.forEach(function(a,d){b.set(d,new Wj(d))},a);a.lb.forEach(function(a,d){a.yb.forEach(function(a){b.get(a.tb).Ae.add(d)})});A(b).forEach(function(a){Vj(this,a,b)},a)}
function Wj(a){this.Yd=this.oe=!1;this.Ae=B();this.Pc=a}Y.prototype.pb=function(){this.tc||Tj(this);return this.s};Y.prototype.getSchema=Y.prototype.pb;Y.prototype.Ce=function(){var a=new Rb("ns_"+this.s.name()),b;zj||(zj=new yj);b=zj;var c=null;b.Sd(a)?c=b.m(a):(c=new yj,b.hb(a,c));return c};Y.prototype.getGlobal=Y.prototype.Ce;Y.prototype.connect=function(a){var b=this.Ce();b.Sd(Zb)||b.hb(Zb,this.pb());return(new V(b)).Ba(a)};Y.prototype.connect=Y.prototype.connect;
Y.prototype.zf=function(a){if(this.lb.has(a))throw new C(503,a);if(this.tc)throw new C(535);this.lb.set(a,new X(a));return this.lb.get(a)};Y.prototype.createTable=Y.prototype.zf;Y.prototype.je=function(a){if(this.tc)throw new C(535);this.s.je(a);return this};Y.prototype.setPragma=Y.prototype.je;function Z(a,b){this.u=a;this.La=b;this.K=z();this.Xe={Df:!1}}r("lf.schema.DatabaseSchema",Z);Z.prototype.name=f("u");Z.prototype.name=Z.prototype.name;Z.prototype.version=f("La");Z.prototype.version=Z.prototype.version;
Z.prototype.Ja=function(){return A(this.K)};Z.prototype.tables=Z.prototype.Ja;Z.prototype.table=function(a){if(!this.K.has(a))throw new C(101,a);return this.K.get(a)};Z.prototype.table=Z.prototype.table;Z.prototype.info=function(){this.Ge||(this.Ge=new Aj(this));return this.Ge};Z.prototype.We=f("Xe");Z.prototype.pragma=Z.prototype.We;Z.prototype.je=ba("Xe");r("lf.schema.create",function(a,b){return new Y(a,b)});}.bind(window))()
//# sourceMappingURL=lovefield.min.js.map
