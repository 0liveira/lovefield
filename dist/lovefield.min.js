if(!self.window){window=this;}
(function(){'use strict';function aa(){return function(){}}function ba(a){return function(b){this[a]=b}}function g(a){return function(){return this[a]}}function l(a){return function(){return a}}var m,p=this;function q(a){return void 0!==a}function ca(){}
function ea(a){var b=typeof a;if("object"==b)if(a){if(a instanceof Array)return"array";if(a instanceof Object)return b;var c=Object.prototype.toString.call(a);if("[object Window]"==c)return"object";if("[object Array]"==c||"number"==typeof a.length&&"undefined"!=typeof a.splice&&"undefined"!=typeof a.propertyIsEnumerable&&!a.propertyIsEnumerable("splice"))return"array";if("[object Function]"==c||"undefined"!=typeof a.call&&"undefined"!=typeof a.propertyIsEnumerable&&!a.propertyIsEnumerable("call"))return"function"}else return"null";
else if("function"==b&&"undefined"==typeof a.call)return"object";return b}function fa(a){return null===a}function ga(a){return null!=a}function ha(a){var b=ea(a);return"array"==b||"object"==b&&"number"==typeof a.length}function ia(a){return"string"==typeof a}function ja(a){return"function"==ea(a)}function ka(a){return a[la]||(a[la]=++ma)}var la="closure_uid_"+(1E9*Math.random()>>>0),ma=0;function na(a,b,c){return a.call.apply(a.bind,arguments)}
function oa(a,b,c){if(!a)throw Error();if(2<arguments.length){var d=Array.prototype.slice.call(arguments,2);return function(){var c=Array.prototype.slice.call(arguments);Array.prototype.unshift.apply(c,d);return a.apply(b,c)}}return function(){return a.apply(b,arguments)}}function pa(a,b,c){pa=Function.prototype.bind&&-1!=Function.prototype.bind.toString().indexOf("native code")?na:oa;return pa.apply(null,arguments)}
function qa(a,b){var c=Array.prototype.slice.call(arguments,1);return function(){var b=c.slice();b.push.apply(b,arguments);return a.apply(this,b)}}function r(a,b){var c=a.split("."),d=p;c[0]in d||!d.execScript||d.execScript("var "+c[0]);for(var e;c.length&&(e=c.shift());)!c.length&&q(b)?d[e]=b:d=d[e]?d[e]:d[e]={}}
function t(a,b){function c(){}c.prototype=b.prototype;a.eb=b.prototype;a.prototype=new c;a.prototype.constructor=a;a.Lg=function(a,c,f){for(var h=Array(arguments.length-2),k=2;k<arguments.length;k++)h[k-2]=arguments[k];return b.prototype[c].apply(a,h)}};function ra(a){if(Error.captureStackTrace)Error.captureStackTrace(this,ra);else{var b=Error().stack;b&&(this.stack=b)}a&&(this.message=String(a))}t(ra,Error);ra.prototype.name="CustomError";var sa=String.prototype.trim?function(a){return a.trim()}:function(a){return a.replace(/^[\s\xa0]+|[\s\xa0]+$/g,"")};
function ta(a){var b=0,c=sa(String(ua)).split(".");a=sa(String(a)).split(".");for(var d=Math.max(c.length,a.length),e=0;0==b&&e<d;e++){var f=c[e]||"",h=a[e]||"",k=/(\d*)(\D*)/g,n=/(\d*)(\D*)/g;do{var A=k.exec(f)||["","",""],O=n.exec(h)||["","",""];if(0==A[0].length&&0==O[0].length)break;b=va(0==A[1].length?0:parseInt(A[1],10),0==O[1].length?0:parseInt(O[1],10))||va(0==A[2].length,0==O[2].length)||va(A[2],O[2])}while(0==b)}return b}function va(a,b){return a<b?-1:a>b?1:0};function wa(a,b,c){this.hg=c;this.Mf=a;this.Bg=b;this.sd=0;this.md=null}wa.prototype.get=function(){var a;0<this.sd?(this.sd--,a=this.md,this.md=a.next,a.next=null):a=this.Mf();return a};wa.prototype.put=function(a){this.Bg(a);this.sd<this.hg&&(this.sd++,a.next=this.md,this.md=a)};var xa=Array.prototype,ya=xa.indexOf?function(a,b,c){return xa.indexOf.call(a,b,c)}:function(a,b,c){c=null==c?0:0>c?Math.max(0,a.length+c):c;if(ia(a))return ia(b)&&1==b.length?a.indexOf(b,c):-1;for(;c<a.length;c++)if(c in a&&a[c]===b)return c;return-1},za=xa.forEach?function(a,b,c){xa.forEach.call(a,b,c)}:function(a,b,c){for(var d=a.length,e=ia(a)?a.split(""):a,f=0;f<d;f++)f in e&&b.call(c,e[f],f,a)},Aa=xa.map?function(a,b,c){return xa.map.call(a,b,c)}:function(a,b,c){for(var d=a.length,e=Array(d),
f=ia(a)?a.split(""):a,h=0;h<d;h++)h in f&&(e[h]=b.call(c,f[h],h,a));return e},Ba=xa.reduce?function(a,b,c,d){d&&(b=pa(b,d));return xa.reduce.call(a,b,c)}:function(a,b,c,d){var e=c;za(a,function(c,h){e=b.call(d,e,c,h,a)});return e},Ca=xa.some?function(a,b,c){return xa.some.call(a,b,c)}:function(a,b,c){for(var d=a.length,e=ia(a)?a.split(""):a,f=0;f<d;f++)if(f in e&&b.call(c,e[f],f,a))return!0;return!1};function Ea(a,b,c){return 2>=arguments.length?xa.slice.call(a,b):xa.slice.call(a,b,c)}
function Fa(a){for(var b=[],c=0;c<a;c++)b[c]=0;return b}function Ga(a){for(var b=[],c=0;c<arguments.length;c++){var d=arguments[c];if("array"==ea(d))for(var e=0;e<d.length;e+=8192)for(var f=Ga.apply(null,Ea(d,e,e+8192)),h=0;h<f.length;h++)b.push(f[h]);else b.push(d)}return b};function Ha(a){var b=[],c=0,d;for(d in a)b[c++]=a[d];return b};var Ia;a:{var Ja=p.navigator;if(Ja){var Ka=Ja.userAgent;if(Ka){Ia=Ka;break a}}Ia=""}function u(a){return-1!=Ia.indexOf(a)};function La(){return u("Opera")||u("OPR")}function Ma(){return(u("Chrome")||u("CriOS"))&&!La()&&!u("Edge")};function Na(a){p.setTimeout(function(){throw a;},0)}var Oa;
function Pa(){var a=p.MessageChannel;"undefined"===typeof a&&"undefined"!==typeof window&&window.postMessage&&window.addEventListener&&!u("Presto")&&(a=function(){var a=document.createElement("IFRAME");a.style.display="none";a.src="";document.documentElement.appendChild(a);var b=a.contentWindow,a=b.document;a.open();a.write("");a.close();var c="callImmediate"+Math.random(),d="file:"==b.location.protocol?"*":b.location.protocol+"//"+b.location.host,a=pa(function(a){if(("*"==d||a.origin==d)&&a.data==
c)this.port1.onmessage()},this);b.addEventListener("message",a,!1);this.port1={};this.port2={postMessage:function(){b.postMessage(c,d)}}});if("undefined"!==typeof a&&!u("Trident")&&!u("MSIE")){var b=new a,c={},d=c;b.port1.onmessage=function(){if(q(c.next)){c=c.next;var a=c.Ee;c.Ee=null;a()}};return function(a){d.next={Ee:a};d=d.next;b.port2.postMessage(0)}}return"undefined"!==typeof document&&"onreadystatechange"in document.createElement("SCRIPT")?function(a){var b=document.createElement("SCRIPT");
b.onreadystatechange=function(){b.onreadystatechange=null;b.parentNode.removeChild(b);b=null;a();a=null};document.documentElement.appendChild(b)}:function(a){p.setTimeout(a,0)}};function Qa(){this.Bd=this.qc=null}var Sa=new wa(function(){return new Ra},function(a){a.reset()},100);Qa.prototype.add=function(a,b){var c=Sa.get();c.set(a,b);this.Bd?this.Bd.next=c:this.qc=c;this.Bd=c};Qa.prototype.remove=function(){var a=null;this.qc&&(a=this.qc,this.qc=this.qc.next,this.qc||(this.Bd=null),a.next=null);return a};function Ra(){this.next=this.scope=this.Rd=null}Ra.prototype.set=function(a,b){this.Rd=a;this.scope=b;this.next=null};
Ra.prototype.reset=function(){this.next=this.scope=this.Rd=null};function Ta(a,b){Ua||Va();Wa||(Ua(),Wa=!0);Xa.add(a,b)}var Ua;function Va(){if(p.Promise&&p.Promise.resolve){var a=p.Promise.resolve(void 0);Ua=function(){a.then(Ya)}}else Ua=function(){var a=Ya;!ja(p.setImmediate)||p.Window&&p.Window.prototype&&p.Window.prototype.setImmediate==p.setImmediate?(Oa||(Oa=Pa()),Oa(a)):p.setImmediate(a)}}var Wa=!1,Xa=new Qa;function Ya(){for(var a=null;a=Xa.remove();){try{a.Rd.call(a.scope)}catch(b){Na(b)}Sa.put(a)}Wa=!1};function v(a,b){this.Ua=0;this.lf=void 0;this.$c=this.ec=this.C=null;this.ld=this.Pd=!1;if(a!=ca)try{var c=this;a.call(b,function(a){Za(c,2,a)},function(a){Za(c,3,a)})}catch(d){Za(this,3,d)}}function $a(){this.next=this.context=this.lc=this.Mc=this.child=null;this.Ed=!1}$a.prototype.reset=function(){this.context=this.lc=this.Mc=this.child=null;this.Ed=!1};var bb=new wa(function(){return new $a},function(a){a.reset()},100);function cb(a,b,c){var d=bb.get();d.Mc=a;d.lc=b;d.context=c;return d}
function w(a){if(a instanceof v)return a;var b=new v(ca);Za(b,2,a);return b}function db(a){return new v(function(b,c){c(a)})}function eb(a,b,c){fb(a,b,c,null)||Ta(qa(b,a))}function gb(a){return new v(function(b,c){var d=a.length,e=[];if(d)for(var f=function(a,c){d--;e[a]=c;0==d&&b(e)},h=function(a){c(a)},k=0,n;k<a.length;k++)n=a[k],eb(n,qa(f,k),h);else b(e)})}function x(){var a,b,c=new v(function(c,e){a=c;b=e});return new hb(c,a,b)}
v.prototype.then=function(a,b,c){return ib(this,ja(a)?a:null,ja(b)?b:null,c)};v.prototype.then=v.prototype.then;v.prototype.$goog_Thenable=!0;v.prototype.ue=function(a,b){return ib(this,null,a,b)};function jb(a,b){a.ec||2!=a.Ua&&3!=a.Ua||kb(a);a.$c?a.$c.next=b:a.ec=b;a.$c=b}
function ib(a,b,c,d){var e=cb(null,null,null);e.child=new v(function(a,h){e.Mc=b?function(c){try{var e=b.call(d,c);a(e)}catch(A){h(A)}}:a;e.lc=c?function(b){try{var e=c.call(d,b);!q(e)&&b instanceof lb?h(b):a(e)}catch(A){h(A)}}:h});e.child.C=a;jb(a,e);return e.child}v.prototype.Gg=function(a){this.Ua=0;Za(this,2,a)};v.prototype.Hg=function(a){this.Ua=0;Za(this,3,a)};
function Za(a,b,c){0==a.Ua&&(a==c&&(b=3,c=new TypeError("Promise cannot resolve to itself")),a.Ua=1,fb(c,a.Gg,a.Hg,a)||(a.lf=c,a.Ua=b,a.C=null,kb(a),3!=b||c instanceof lb||mb(a,c)))}function fb(a,b,c,d){if(a instanceof v)return jb(a,cb(b||ca,c||null,d)),!0;var e;if(a)try{e=!!a.$goog_Thenable}catch(h){e=!1}else e=!1;if(e)return a.then(b,c,d),!0;e=typeof a;if("object"==e&&null!=a||"function"==e)try{var f=a.then;if(ja(f))return nb(a,f,b,c,d),!0}catch(h){return c.call(d,h),!0}return!1}
function nb(a,b,c,d,e){function f(a){k||(k=!0,d.call(e,a))}function h(a){k||(k=!0,c.call(e,a))}var k=!1;try{b.call(a,h,f)}catch(n){f(n)}}function kb(a){a.Pd||(a.Pd=!0,Ta(a.Rf,a))}function ob(a){var b=null;a.ec&&(b=a.ec,a.ec=b.next,b.next=null);a.ec||(a.$c=null);return b}
v.prototype.Rf=function(){for(var a=null;a=ob(this);){var b=this.Ua,c=this.lf;if(3==b&&a.lc&&!a.Ed)for(var d=void 0,d=this;d&&d.ld;d=d.C)d.ld=!1;if(a.child)a.child.C=null,pb(a,b,c);else try{a.Ed?a.Mc.call(a.context):pb(a,b,c)}catch(e){qb.call(null,e)}bb.put(a)}this.Pd=!1};function pb(a,b,c){2==b?a.Mc.call(a.context,c):a.lc&&a.lc.call(a.context,c)}function mb(a,b){a.ld=!0;Ta(function(){a.ld&&qb.call(null,b)})}var qb=Na;function lb(a){ra.call(this,a)}t(lb,ra);lb.prototype.name="cancel";
function hb(a,b,c){this.ha=a;this.resolve=b;this.reject=c};/*

 Copyright 2014 The Lovefield Project Authors. All Rights Reserved.

 Licensed under the Apache License, Version 2.0 (the "License");
 you may not use this file except in compliance with the License.
 You may obtain a copy of the License at

     http://www.apache.org/licenses/LICENSE-2.0

 Unless required by applicable law or agreed to in writing, software
 distributed under the License is distributed on an "AS IS" BASIS,
 WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 See the License for the specific language governing permissions and
 limitations under the License.
*/
function y(a,b){this.oa=a;this.s=b||this.Je()}var rb=0;m=y.prototype;m.id=g("oa");function sb(a){return a.s}m.Je=function(){return{}};m.uf=g("s");m.Ga=function(){return{id:this.oa,value:this.uf()}};m.Gb=function(a){return"#"==a.substr(-1)?this.oa:null};function tb(a){return new y(a.id,a.value)}function ub(a){return new y(rb++,a||{})}function vb(a){if(null==a)return null;a=new Uint8Array(a);for(var b="",c=0;c<a.length;++c)var d=a[c].toString(16),b=b+(2>d.length?"0"+d:d);return b};function wb(a){this.type=a}function xb(a){y.call(this,-1,a)}t(xb,y);function yb(a,b,c,d){c=c||function(a,b){return a==b};d=d||function(b){return a[b]};for(var e=a.length,f=b.length,h=[],k=0;k<e+1;k++)h[k]=[],h[k][0]=0;for(var n=0;n<f+1;n++)h[0][n]=0;for(k=1;k<=e;k++)for(n=1;n<=f;n++)c(a[k-1],b[n-1])?h[k][n]=h[k-1][n-1]+1:h[k][n]=Math.max(h[k-1][n],h[k][n-1]);for(var A=[],k=e,n=f;0<k&&0<n;)c(a[k-1],b[n-1])?(A.unshift(d(k-1,n-1)),k--,n--):h[k-1][n]>h[k][n-1]?k--:n--;return A}function zb(a){return Ba(arguments,function(a,c){return a+c},0)}
function Ab(a){return zb.apply(null,arguments)/arguments.length}function Bb(a){var b=arguments.length;if(2>b)return 0;var c=Ab.apply(null,arguments);return zb.apply(null,Aa(arguments,function(a){return Math.pow(a-c,2)}))/(b-1)}function Cb(a){return Math.sqrt(Bb.apply(null,arguments))};var Db="StopIteration"in p?p.StopIteration:{message:"StopIteration",stack:""};function Fb(){}Fb.prototype.next=function(){throw Db;};Fb.prototype.rc=function(){return this};function Gb(a){if(a instanceof Fb)return a;if("function"==typeof a.rc)return a.rc(!1);if(ha(a)){var b=0,c=new Fb;c.next=function(){for(;;){if(b>=a.length)throw Db;if(b in a)return a[b++];b++}};return c}throw Error("Not implemented");}
function Hb(a,b){if(ha(a))try{za(a,b,void 0)}catch(c){if(c!==Db)throw c;}else{a=Gb(a);try{for(;;)b.call(void 0,a.next(),void 0,a)}catch(c){if(c!==Db)throw c;}}}function Ib(a){if(Ca(arguments,function(a){return!a.length})||!arguments.length)return new Fb;var b=new Fb,c=arguments,d=Fa(c.length);b.next=function(){if(d){for(var a=Aa(d,function(a,b){return c[b][a]}),b=d.length-1;0<=b;b--){if(d[b]<c[b].length-1){d[b]++;break}if(0==b){d=null;break}d[b]=0}return a}throw Db;};return b};function Jb(a,b){this.o={};this.b=[];this.Pa=this.Cb=0;var c=arguments.length;if(1<c){if(c%2)throw Error("Uneven number of arguments");for(var d=0;d<c;d+=2)this.set(arguments[d],arguments[d+1])}else a&&this.addAll(a)}m=Jb.prototype;m.Dc=g("Cb");m.Ba=function(){Kb(this);for(var a=[],b=0;b<this.b.length;b++)a.push(this.o[this.b[b]]);return a};function Lb(a){Kb(a);return a.b.concat()}m.Ma=function(a){return Mb(this.o,a)};m.od=function(){return 0==this.Cb};
m.clear=function(){this.o={};this.Pa=this.Cb=this.b.length=0};m.remove=function(a){return Mb(this.o,a)?(delete this.o[a],this.Cb--,this.Pa++,this.b.length>2*this.Cb&&Kb(this),!0):!1};function Kb(a){if(a.Cb!=a.b.length){for(var b=0,c=0;b<a.b.length;){var d=a.b[b];Mb(a.o,d)&&(a.b[c++]=d);b++}a.b.length=c}if(a.Cb!=a.b.length){for(var e={},c=b=0;b<a.b.length;)d=a.b[b],Mb(e,d)||(a.b[c++]=d,e[d]=1),b++;a.b.length=c}}m.get=function(a,b){return Mb(this.o,a)?this.o[a]:b};
m.set=function(a,b){Mb(this.o,a)||(this.Cb++,this.b.push(a),this.Pa++);this.o[a]=b};m.addAll=function(a){var b;if(a instanceof Jb)b=Lb(a),a=a.Ba();else{b=[];var c=0,d;for(d in a)b[c++]=d;a=Ha(a)}for(c=0;c<b.length;c++)this.set(b[c],a[c])};m.forEach=function(a,b){for(var c=Lb(this),d=0;d<c.length;d++){var e=c[d],f=this.get(e);a.call(b,f,e,this)}};m.clone=function(){return new Jb(this)};
m.rc=function(a){Kb(this);var b=0,c=this.Pa,d=this,e=new Fb;e.next=function(){if(c!=d.Pa)throw Error("The map has changed since the iterator was created");if(b>=d.b.length)throw Db;var e=d.b[b++];return a?e:d.o[e]};return e};function Mb(a,b){return Object.prototype.hasOwnProperty.call(a,b)};function Nb(){return u("iPhone")&&!u("iPod")&&!u("iPad")};var Ob=La(),Pb=u("Trident")||u("MSIE"),Qb=u("Edge"),Rb=u("Gecko")&&!(-1!=Ia.toLowerCase().indexOf("webkit")&&!u("Edge"))&&!(u("Trident")||u("MSIE"))&&!u("Edge"),Sb=-1!=Ia.toLowerCase().indexOf("webkit")&&!u("Edge");function Tb(){var a=Ia;if(Rb)return/rv\:([^\);]+)(\)|;)/.exec(a);if(Qb)return/Edge\/([\d\.]+)/.exec(a);if(Pb)return/\b(?:MSIE|rv)[: ]([^\);]+)(\)|;)/.exec(a);if(Sb)return/WebKit\/(\S+)/.exec(a)}
var ua=function(){if(Ob&&p.opera){var a;var b=p.opera.version;try{a=b()}catch(c){a=b}return a}a="";(b=Tb())&&(a=b?b[1]:"");return Pb&&(b=(b=p.document)?b.documentMode:void 0,b>parseFloat(a))?String(b):a}(),Ub={};var Vb=Nb()||u("iPod"),Wb=u("iPad");!u("Android")||Ma()||u("Firefox")||La();var Xb=Ma(),Yb=u("Safari")&&!(Ma()||u("Coast")||La()||u("Edge")||u("Silk")||u("Android"))&&!(Nb()||u("iPad")||u("iPod"));/*

 Copyright 2015 The Lovefield Project Authors. All Rights Reserved.

 Licensed under the Apache License, Version 2.0 (the "License");
 you may not use this file except in compliance with the License.
 You may obtain a copy of the License at

     http://www.apache.org/licenses/LICENSE-2.0

 Unless required by applicable law or agreed to in writing, software
 distributed under the License is distributed on an "AS IS" BASIS,
 WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 See the License for the specific language governing permissions and
 limitations under the License.
*/
function Zb(){this.oe=Yb||Wb||Vb;this.$f=!(this.oe||Pb&&!Ub[10]&&!(Ub[10]=0<=ta(10)));!Pb||Ub[11]||(Ub[11]=0<=ta(11));this.Jg=Xb||Yb;this.lg=q(window.Map)&&q(window.Map.prototype.values)&&q(window.Map.prototype.forEach)&&!this.oe;this.mg=q(window.Set)&&q(window.Set.prototype.values)&&q(window.Set.prototype.forEach)&&!this.oe}var $b;function ac(){q($b)||($b=new Zb);return $b};function z(){this.o=new Jb;Object.defineProperty(this,"size",{get:function(){return this.o.Dc()}})}z.prototype.clear=function(){this.o.clear()};z.prototype.clear=z.prototype.clear;z.prototype.delete=function(a){return this.o.remove(a)};z.prototype["delete"]=z.prototype.delete;z.prototype.forEach=function(a,b){return this.o.forEach(a,b)};z.prototype.forEach=z.prototype.forEach;z.prototype.get=function(a){return this.o.get(a)};z.prototype.get=z.prototype.get;z.prototype.has=function(a){return this.o.Ma(a)};
z.prototype.has=z.prototype.has;z.prototype.set=function(a,b){return this.o.set(a,b)};z.prototype.set=z.prototype.set;var bc=ac().lg;function B(){return bc?new window.Map:new z}function cc(a){if(a instanceof z)return Lb(a.o);var b=0,c=Array(a.size);a.forEach(function(a,e){c[b++]=e});return c}function C(a){if(a instanceof z)return a.o.Ba();var b=0,c=Array(a.size);a.forEach(function(a){c[b++]=a});return c};var dc={};r("lf.TransactionType",dc);dc.READ_ONLY=0;dc.READ_WRITE=1;function ec(a,b){this.vf=a;this.Ra=b||null;this.Y=x()}ec.prototype.ia=function(){return 0==this.vf?this.uc():fc(this)};function fc(a){try{gc(a.Ra)}catch(b){return db(b)}return hc(a).then(function(a){this.Ra.ia();return a}.bind(a))}function hc(a){ic(a);jc(a);return a.uc()}
function ic(a){a.Ra.tb.forEach(function(a,c){var d=this.Ra.ca().get(c),d=this.H(d.getName(),d.Eb.bind(d)),e=C(a.ya).map(function(a){return a.id()});0<e.length&&d.remove(e).ue(this.Td,this);e=C(a.ma).map(function(a){return a[1]}).concat(C(a.ua));d.put(e).ue(this.Td,this)},a)}function jc(a){kc(a.Ra).forEach(function(a){var c=this.H(a.getName(),tb),d;c.get([-1]).then(function(a){d=a;return c.remove([])}).then(function(){c.put(d);c.put(a.Ga())},this.Td.bind(this))},a)}ec.prototype.Td=function(a){this.Y.reject(a)};function lc(a){this.Cg=a}lc.prototype.toString=g("Cg");var mc=new lc("backstore"),nc=new lc("cache"),oc=new lc("indexstore"),pc=new lc("engine"),qc=new lc("runner"),rc=new lc("observerregistry"),sc=new lc("schema");function tc(a){if("function"==typeof a.Ba)return a.Ba();if(ia(a))return a.split("");if(ha(a)){for(var b=[],c=a.length,d=0;d<c;d++)b.push(a[d]);return b}return Ha(a)};function uc(a){this.o=new Jb;a&&this.addAll(a)}function vc(a){var b=typeof a;return"object"==b&&a||"function"==b?"o"+ka(a):b.substr(0,1)+a}m=uc.prototype;m.Dc=function(){return this.o.Dc()};m.add=function(a){this.o.set(vc(a),a)};m.addAll=function(a){a=tc(a);for(var b=a.length,c=0;c<b;c++)this.add(a[c])};m.remove=function(a){return this.o.remove(vc(a))};m.clear=function(){this.o.clear()};m.od=function(){return this.o.od()};m.contains=function(a){return this.o.Ma(vc(a))};m.Ba=function(){return this.o.Ba()};
m.clone=function(){return new uc(this)};m.rc=function(){return this.o.rc(!1)};function wc(a){this.Yb=new uc(a);Object.defineProperty(this,"size",{get:function(){return this.Yb.Dc()}})}wc.prototype.add=function(a){this.Yb.add(a)};wc.prototype.add=wc.prototype.add;wc.prototype.clear=function(){this.Yb.clear()};wc.prototype.clear=wc.prototype.clear;wc.prototype.delete=function(a){return this.Yb.remove(a)};wc.prototype["delete"]=wc.prototype.delete;wc.prototype.forEach=function(a,b){this.Yb.Ba().forEach(a,b)};wc.prototype.has=function(a){return this.Yb.contains(a)};
wc.prototype.has=wc.prototype.has;var xc=ac().mg;function D(a){return xc?q(a)?new window.Set(a):new window.Set:new wc(a)}function E(a){if(a instanceof wc)return a.Yb.Ba();var b=0,c=Array(a.size);a.forEach(function(a){c[b++]=a});return c}function yc(a,b){if(b.size>a.size)return!1;var c=!0;b.forEach(function(b){c=c&&a.has(b)});return c};function zc(a,b){this.oa=a;this.s=b||{}}function Ac(a){var b=D();a.forEach(function(a){b.add(a>>9)});return E(b)}zc.prototype.X=g("oa");function Bc(a,b){b.forEach(function(a){this.s[a.id()]=a.Ga()},a)}function Cc(a,b){b.forEach(function(a){delete this.s[a]},a)}zc.prototype.Ga=function(){return{id:this.oa,value:JSON.stringify(this.s)}};function Dc(a){return new zc(a.id,JSON.parse(a.value))};function Ec(a,b,c){this.ba=a;this.Mb=b;this.mf=c}m=Ec.prototype;m.get=function(a){if(0==a.length)return this.Cc();var b=this.Mb;return Fc(this,a).then(function(c){return a.map(function(a){var e=c.get(a>>9);return b(e.s[a])})})};function Fc(a,b){var c=B(),d=x(),e=Ac(b).map(function(a){return new v(function(b,d){var e;try{e=this.ba.get(a)}catch(A){d(A);return}e.onerror=d;e.onsuccess=function(a){a=Dc(a.target.result);c.set(a.X(),a);b()}},this)},a);gb(e).then(function(){d.resolve(c)});return d.ha}
m.Cc=function(){return new v(function(a,b){var c=[],d;try{d=this.ba.openCursor()}catch(e){b(e);return}d.onerror=b;d.onsuccess=function(){var b=d.result;if(b){var f;f=Dc(b.value).s;for(var h in f)c.push(this.Mb(f[h]));b.continue()}else a(c)}.bind(this)},this)};m.Ub=function(a){return new v(function(b,c){var d;try{d=a()}catch(e){c(e);return}d.onsuccess=b;d.onerror=c},this)};
m.put=function(a){if(0==a.length)return w();var b=B();a.forEach(function(a){var d;d=a.id()>>9;var e=b.get(d)||null;null===e&&(e=this.mf(this.ba.name,d));Bc(e,[a]);b.set(d,e)},this);a=C(b).map(function(a){return this.Ub(function(){return this.ba.put(a.Ga())}.bind(this))},this);return gb(a)};
m.remove=function(a){if(0==a.length)return this.Ub(function(){return this.ba.clear()}.bind(this));var b=B();a.forEach(function(a){var d=a>>9,e=b.get(d)||null;null===e&&(e=this.mf(this.ba.name,d));Cc(e,[a]);b.set(d,e)},this);a=C(b).map(function(a){return this.Ub(function(){return 0==Object.keys(a.s).length?this.ba.delete(a.X()):this.ba.put(a.Ga())}.bind(this))},this);return gb(a)};function Gc(a,b,c){a=a.j(nc);var d=[c<<9,(c+1<<9)-1];b=a.$a(b,d[0],d[1]);c=new zc(c);Bc(c,b);return c}
function Hc(a,b){return new zc(b)};function Ic(){};function Jc(a){this.V=a.j(nc);this.F=a.j(oc);this.i=a.j(sc)}Jc.prototype.update=function(a){a.forEach(function(a){Kc(this,a);Lc(this,a)},this)};function Lc(a,b){var c=b.getName();b.ya.forEach(function(a,b){this.V.remove(c,b)},a);b.ua.forEach(function(a){this.V.set(c,a)},a);b.ma.forEach(function(a){this.V.set(c,a[1])},a)}function Kc(a,b){var c=a.i.table(b.getName());Mc(b).forEach(function(a){Nc(this,c,a)},a)}
function Nc(a,b,c){var d=a.F.oc.get(b.getName())||[],e=0;d.forEach(function(a){try{Oc(a,c),e++}catch(b){throw d.slice(0,e).forEach(function(a){Oc(a,[c[1],c[0]])},this),b;}},a)}function Oc(a,b){var c=null===b[1]?void 0:b[1].Gb(a.getName()),d=null===b[0]?void 0:b[0].Gb(a.getName());if(!q(d)&&q(c))a.add(c,b[1].id());else if(q(d)&&q(c)){if(null===c||null===d){if(c==d)return}else if(0==a.fc().compare(d,c))return;a.add(c,b[1].id());a.remove(d,b[0].id())}else q(d)&&!q(c)&&a.remove(d,b[0].id())};var Pc={};r("lf.ConstraintAction",Pc);Pc.RESTRICT=0;Pc.CASCADE=1;var Qc={};r("lf.ConstraintTiming",Qc);Qc.IMMEDIATE=0;Qc.DEFERRABLE=1;var Rc={};r("lf.Order",Rc);Rc.DESC=0;Rc.ASC=1;var Sc={};r("lf.Type",Sc);Sc.ARRAY_BUFFER=0;Sc.BOOLEAN=1;Sc.DATE_TIME=2;Sc.INTEGER=3;Sc.NUMBER=4;Sc.STRING=5;Sc.OBJECT=6;var Tc={0:null,1:!1,2:Object.freeze(new Date(0)),3:0,4:0,5:"",6:null};r("lf.type.DEFAULT_VALUES",Tc);function F(a,b){this.code=a;this.message="http://sn.im/2a0j3wn?c="+a;if(1<arguments.length)for(var c=1;c<=Math.min(4,arguments.length-1);++c)this.message+="&p"+(c-1)+"="+encodeURIComponent(arguments[c].toString().slice(0,64))}t(F,Error);function Uc(){this.o=B();this.size=0}m=Uc.prototype;m.has=function(a){return this.o.has(a)};m.set=function(a,b){var c=this.o.get(a)||null;null===c&&(c=D(),this.o.set(a,c));c.has(b)||(c.add(b),this.size++);return this};m.Xb=function(a,b){var c=this.o.get(a)||null;null===c&&(c=D(),this.o.set(a,c));b.forEach(function(a){c.has(a)||(c.add(a),this.size++)},this);return this};m.ae=function(a){a.keys().forEach(function(b){var c=a.get(b);this.Xb(b,c)},this);return this};
m.delete=function(a,b){var c=this.o.get(a,null);if(null===c)return!1;var d=c.delete(b);d&&(--this.size,0==c.size&&this.o.delete(a));return d};m.get=function(a){a=this.o.get(a)||null;return null===a?null:E(a)};m.clear=function(){this.o.clear();this.size=0};m.keys=function(){return cc(this.o)};m.values=function(){var a=[];this.o.forEach(function(b){a.push.apply(a,E(b))});return a};function Wc(a){this.F=a.j(oc);this.i=a.j(sc);this.V=a.j(nc);this.ed=null}function Xc(a,b,c){var d=b.Fb().og;c.forEach(function(a){d.forEach(function(b){if(null==a.s[b.getName()])throw new F(202,b.m());},this)},a)}function Yc(a,b,c,d){b.Fb().Sd().forEach(function(a){a.timing==d&&Zc(this,a,c)},a)}function Zc(a,b,c){var d=$c(a,b);c.forEach(function(a){if(ad(a[0],a[1],b.name)&&(a=a[1].s[b.hb],null!==a&&!d.Ma(a)))throw new F(203,b.name);},a)}
function $c(a,b){null===a.ed&&(a.ed=B());var c=a.ed.get(b.name)||null;null===c&&(c=a.i.table(b.Sa)[b.mc].za(),c=a.F.get(c.m()),a.ed.set(b.name,c));return c}function ad(a,b,c){return(null===a?null!==b:null===b)||a.Gb(c)!=b.Gb(c)}function bd(a,b,c,d){b=cd(a.i.info(),b.getName(),0);null!==b&&(b=b.filter(function(a){return a.timing==d}),0!=b.length&&dd(a,b,c,function(a,b,c){if(b.Ma(c))throw new F(203,a.name);}))}
function ed(a,b,c){b=cd(a.i.info(),b.getName(),1);if(null===b)return null;var d=new Uc;dd(a,b,c,function(a,b,c){b=b.get(c);0<b.length&&d.Xb(a.Fe,b)});return d}function fd(a,b,c){var d=new Uc;dd(a,c,b,function(a,b,c,k){b.get(c).forEach(function(b){d.set(b,{Qd:a,tg:k[1]})})});return d}function dd(a,b,c,d){b.forEach(function(a){var b=this.F.get(a.name),h=$c(this,a);c.forEach(function(c){ad(c[0],c[1],h.getName())&&d(a,b,c[0].s[a.mc],c)},this)},a)}
function gd(a,b,c,d){0!=c.length&&(c=c.map(function(a){return[null,a]}),Yc(a,b,c,d))}function hd(a,b,c,d){0!=c.length&&(Yc(a,b,c,d),bd(a,b,c,d))}function id(a,b,c,d){0!=c.length&&(c=c.map(function(a){return[a,null]}),bd(a,b,c,d))}
function jd(a,b,c){var d={te:[],of:new Uc},e=new Uc;e.Xb(b.getName(),c.map(function(a){return a.id()}));do{var f=new Uc;e.keys().forEach(function(a){var b=this.i.table(a);a=e.get(a).map(function(a){return[this.V.get(a),null]},this);b=ed(this,b,a);null!==b&&(d.te.unshift.apply(d.te,b.keys()),f.ae(b))},a);e=f;d.of.ae(e)}while(0<e.size);return d};function kd(a){this.ua=B();this.ma=B();this.ya=B();this.w=a}m=kd.prototype;m.getName=g("w");m.add=function(a){if(this.ya.has(a.id())){var b=[this.ya.get(a.id()),a];this.ma.set(a.id(),b);this.ya.delete(a.id())}else this.ua.set(a.id(),a)};m.modify=function(a){var b=a[1],c=a[0].id();this.ua.has(c)?this.ua.set(c,b):(this.ma.has(c)&&(a=[this.ma.get(a[0].id())[0],b]),this.ma.set(c,a))};
m.delete=function(a){if(this.ua.has(a.id()))this.ua.delete(a.id());else if(this.ma.has(a.id())){var b=this.ma.get(a.id())[0];this.ma.delete(a.id());this.ya.set(a.id(),b)}else this.ya.set(a.id(),a)};m.ae=function(a){a.ua.forEach(function(a){this.add(a)},this);a.ma.forEach(function(a){this.modify(a)},this);a.ya.forEach(function(a){this.delete(a)},this)};
function Mc(a){var b=[];a.ua.forEach(function(a){b.push([null,a])});a.ma.forEach(function(a){b.push(a)});a.ya.forEach(function(a){b.push([a,null])});return b}m.toString=function(){return"["+cc(this.ua).toString()+"], ["+cc(this.ma).toString()+"], ["+cc(this.ya).toString()+"]"};function ld(a){var b=new kd(a.w);a.ua.forEach(function(a){b.delete(a)});a.ya.forEach(function(a){b.add(a)});a.ma.forEach(function(a){b.modify([a[1],a[0]])});return b}
m.od=function(){return 0==this.ua.size&&0==this.ya.size&&0==this.ma.size};function md(a,b){this.$=B();b.forEach(function(a){this.$.set(a.getName(),a)},this);this.i=a.j(sc);this.V=a.j(nc);this.F=a.j(oc);this.wa=new Wc(a);this.nd=new Jc(a);this.tb=B()}function kc(a){var b=[];cc(a.tb).map(function(a){return this.$.get(a)},a).forEach(function(a){a.Bb()&&(a.Aa().forEach(function(a){b.push(this.F.get(a.m()))},this),b.push(this.F.get(a.getName()+".#")))},a);return b}m=md.prototype;m.ca=g("$");
m.zb=function(a,b){nd(this,a);Xc(this.wa,a,b);gd(this.wa,a,b,0);for(var c=0;c<b.length;c++)od(this,a,[null,b[c]])};function od(a,b,c){var d=b.getName(),e=a.tb.get(d)||new kd(d);a.tb.set(d,e);try{Nc(a.nd,b,c)}catch(h){throw h;}b=c[0];var f=c[1];null===b&&null!==f?(a.V.set(d,f),e.add(f)):null!==b&&null!==f?(a.V.set(d,f),e.modify(c)):null!==b&&null===f&&(a.V.remove(d,b.id()),e.delete(b))}
m.update=function(a,b){nd(this,a);Xc(this.wa,a,b);var c=b.map(function(a){return[this.V.get(a.id()),a]},this);pd(this,a,c);hd(this.wa,a,c,0);c.forEach(function(b){od(this,a,b)},this)};m.Vd=function(a,b){nd(this,a);Xc(this.wa,a,b);for(var c=0;c<b.length;c++){var d=b[c],e=null,f,h=a.Fb().hd();if(null===h)f=null;else{f=this.wa;var h=h.m(),k=d.Gb(h);f=f.F.get(h).get(k);f=0==f.length?null:f[0]}null!=f?(e=this.V.get(f),d.oa=f,hd(this.wa,a,[[e,d]],0)):gd(this.wa,a,[d],0);od(this,a,[e,d])}};
m.remove=function(a,b){nd(this,a);qd(this,a,b);id(this.wa,a,b,0);for(var c=0;c<b.length;c++)od(this,a,[b[c],null])};function pd(a,b,c){b=cd(a.i.info(),b.getName(),1);if(null!==b){var d=fd(a.wa,c,b);d.keys().forEach(function(a){d.get(a).forEach(function(b){var c=this.i.table(b.Qd.Fe),d=this.V.get(a),n=c.Eb(d.Ga());n.s[b.Qd.hb]=b.tg.s[b.Qd.mc];od(this,c,[d,n])},this)},a)}}
function qd(a,b,c){if(null!==cd(a.i.info(),b.getName(),1)){b=jd(a.wa,b,c);var d=b.of;b.te.forEach(function(a){var b=this.i.table(a);a=d.get(a).map(function(a){return this.V.get(a)},this);id(this.wa,b,a,0);a.forEach(function(a){od(this,b,[a,null])},this)},a)}}function gc(a){a.tb.forEach(function(a){var c=this.$.get(a.getName());gd(this.wa,c,C(a.ua),1);id(this.wa,c,C(a.ya),1);hd(this.wa,c,C(a.ma),1)},a)}m.ia=aa();m.Jb=function(){var a=C(this.tb).map(function(a){return ld(a)});this.nd.update(a)};
function nd(a,b){if(!a.$.has(b.getName()))throw new F(106,b.getName());};function rd(a,b,c,d){this.c=a;this.A=b;this.da=this.c==G?!1:c;this.la=this.A==G?!1:d}var G=new (aa());rd.prototype.toString=function(){return(this.da?"(":"[")+(this.c==G?"unbound":this.c)+", "+(this.A==G?"unbound":this.A)+(this.la?")":"]")};function sd(a){if(td(a))return[];var b=null,c=null;a.c==G||(b=new rd(G,a.c,!1,!a.da));a.A==G||(c=new rd(a.A,G,!a.la,!1));return[b,c].filter(function(a){return null!==a})}rd.prototype.reverse=function(){return new rd(this.A,this.c,this.la,this.da)};
function ud(a,b){var c=vd(a.c,b.c,!0,a.da,b.da);if(0==c)return!0;var d=-1==c?a:b,c=1==c?a:b;return d.A==G||d.A>c.c||d.A==c.c&&!d.la&&!c.da}function wd(){return new rd(G,G,!1,!1)}function td(a){return a.c==G&&a.A==G}function xd(a){return a.c==a.A&&a.c!=G&&!a.da&&!a.la}rd.prototype.contains=function(a){var b=this.A==G||a<this.A||a==this.A&&!this.la;return(this.c==G||a>this.c||a==this.c&&!this.da)&&b};
function vd(a,b,c,d,e){function f(a){return c?a:1==a?-1:1}d=d||!1;e=e||!1;return a==G?b==G?(d?!e:e)?d?f(1):f(-1):0:f(-1):b==G?f(1):a<b?-1:a==b?(d?!e:e)?d?f(1):f(-1):0:1}function yd(a,b){var c=vd(a.c,b.c,!0,a.da,b.da);0==c&&(c=vd(a.A,b.A,!1,a.la,b.la));return c};function H(a,b){this.entries=a;this.M=D(b);this.Ya=null}function I(a){return E(a.M)}function zd(a){return a.entries.map(function(a){return a.ta.s})}function Ad(a){return a.entries.map(function(a){return a.ta.id()})}function Bd(a,b){return a.Ya.get(b.m())}var Cd=null;function Dd(){null===Cd&&(Cd=new H([],[]));return Cd}
function Ed(a){if(0==a.length)return Dd();for(var b=a.reduce(function(a,b){return a+b.entries.length},0),c=Array(b),d=0,b=a.map(function(a){var b=B();a.entries.forEach(function(a){c[d++]=a;b.set(a.id,a)});return b}),e=B(),f=0;f<c.length;f++)b.every(function(a){return a.has(c[f].id)})&&e.set(c[f].id,c[f]);return new H(C(e),E(a[0].M))}function Fd(a){if(0==a.length)return Dd();var b=B();a.forEach(function(a){a.entries.forEach(function(a){b.set(a.id,a)})});return new H(C(b),E(a[0].M))}
function Gd(a,b){var c=1<b.length,d=a.map(function(a){return new Hd(a,c)});return new H(d,b)}function Hd(a,b){this.ta=a;this.id=Id++;this.Xd=b}var Id=0;function J(a,b){var c=b.Za();return null!==c&&a.ta.s.hasOwnProperty(c)?a.ta.s[c]:a.Xd?a.ta.s[K(b.H())][b.getName()]:a.ta.s[b.getName()]}function Jd(a,b,c){var d=b.Za();if(null!=d)a.ta.s[d]=c;else if(a.Xd){var d=K(b.H()),e=a.ta.s[d];null==e&&(e={},a.ta.s[d]=e);e[b.getName()]=c}else a.ta.s[b.getName()]=c}
function Kd(a,b,c,d){function e(a,b){if(a.Xd){var c=a.ta.s,d;for(d in c)f[d]=c[d]}else f[b[0]]=a.ta.s}var f={};e(a,b);e(c,d);a=new y(-1,f);return new Hd(a,!0)};r("lf.bind",function(a){return new Ld(a)});function Ld(a){this.fa=a}r("lf.Binder",Ld);Ld.prototype.za=g("fa");function Md(){this.Ve=Nd();var a=Od();this.ic=B();this.ic.set(1,Pd());this.ic.set(2,Qd());this.ic.set(4,a);this.ic.set(3,a);this.ic.set(5,Rd())}Md.Ec=function(){return Md.Re?Md.Re:Md.Re=new Md};function Sd(a,b,c){return(a.ic.get(b)||null).get(c)||null}function Nd(){function a(a){return a}var b=B();b.set(1,function(a){return null===a?null:a?1:0});b.set(2,function(a){return null===a?null:a.getTime()});b.set(3,a);b.set(4,a);b.set(5,a);return b}
function Pd(){var a=B();a.set("eq",function(a,c){return a==c});a.set("neq",function(a,c){return a!=c});return a}
function Od(){var a=Pd();a.set("between",function(a,c){return null===a||null===c[0]||null===c[1]?!1:a>=c[0]&&a<=c[1]});a.set("gte",function(a,c){return null===a||null===c?!1:a>=c});a.set("gt",function(a,c){return null===a||null===c?!1:a>c});a.set("in",function(a,c){return-1!=c.indexOf(a)});a.set("lte",function(a,c){return null===a||null===c?!1:a<=c});a.set("lt",function(a,c){return null===a||null===c?!1:a<c});return a}
function Rd(){var a=Od();a.set("match",function(a,c){return null===a||null===c?!1:(new RegExp(c)).test(a)});return a}
function Qd(){var a=B();a.set("between",function(a,c){return null===a||null===c[0]||null===c[1]?!1:a.getTime()>=c[0].getTime()&&a.getTime()<=c[1].getTime()});a.set("eq",function(a,c){return(null===a?-1:a.getTime())==(null===c?-1:c.getTime())});a.set("gte",function(a,c){return null===a||null===c?!1:a.getTime()>=c.getTime()});a.set("gt",function(a,c){return null===a||null===c?!1:a.getTime()>c.getTime()});a.set("in",function(a,c){return c.some(function(c){return c.getTime()==a.getTime()})});a.set("lte",
function(a,c){return null===a||null===c?!1:a.getTime()<=c.getTime()});a.set("lt",function(a,c){return null===a||null===c?!1:a.getTime()<c.getTime()});a.set("neq",function(a,c){return(null===a?-1:a.getTime())!=(null===c?-1:c.getTime())});return a};function L(){this.g=this.C=null}var Td=[];L.prototype.getParent=g("C");L.prototype.jb=function(){for(var a=this;!fa(a.getParent());)a=a.getParent();return a};function Ud(a){for(var b=0;!fa(a.getParent());)b++,a=a.getParent();return b}function M(a){return a.g||Td}function Vd(a,b){return M(a)[b]||null}function Wd(a,b,c){b.C=a;null===a.g?a.g=[b]:a.g.splice(c,0,b)}function Xd(a,b){b.C=a;null===a.g?a.g=[b]:a.g.push(b)}
function Yd(a,b){var c=a.g&&a.g[b];return c?(c.C=null,a.g.splice(b,1),0==a.g.length&&(a.g=null),c):null}L.prototype.removeChild=function(a){return Yd(this,M(this).indexOf(a))};function Zd(a,b,c){Vd(a,c).C=null;b.C=a;a.g[c]=b}function $d(a,b,c){!1!==b.call(c,a)&&M(a).forEach(function(a){$d(a,b,c)})};function ae(){L.call(this);this.oa=be++}t(ae,L);var be=0;ae.prototype.X=g("oa");function ce(a,b,c){ae.call(this);this.O=a;this.value=b;this.G=c;this.yc=Sd(Md.Ec(),this.O.I(),this.G);this.ab=!1;this.dc=b}t(ce,ae);m=ce.prototype;m.Lb=function(){var a=new ce(this.O,this.value,this.G);a.dc=this.dc;a.yd(this.ab);var b=this.X();a.oa=b;return a};m.ib=function(a){return null!=a?(a.push(this.O),a):[this.O]};m.yd=ba("ab");function de(a){var b=!1;a.value instanceof Ld||(b="array"==ea(a.value)?!a.value.some(function(a){return a instanceof Ld}):!0);if(!b)throw new F(501);}
m.eval=function(a){de(this);if("in"==this.G)return ee(this,a);var b=a.entries.filter(function(a){return this.yc(J(a,this.O),this.value)!=this.ab},this);return new H(b,I(a))};m.bind=function(a){if(this.dc instanceof Ld){var b=this.dc.za();if(a.length<=b)throw new F(510);this.value=a[b]}else"array"==ea(this.dc)&&(this.value=this.dc.map(function(b){if(b instanceof Ld){var d=b.za();if(a.length<=d)throw new F(510);return a[b.za()]}return b}))};
function ee(a,b){var c=D(a.value),d=function(a){return null===a?!1:c.has(a)!=this.ab}.bind(a),e=b.entries.filter(function(a){return d(J(a,this.O))},a);return new H(e,I(b))}m.toString=function(){return"value_pred("+this.O.m()+" "+this.G+(this.ab?"(complement)":"")+" "+this.value+")"};function fe(a){this.aa=a;this.ad=this.Da=null}function ge(a,b){null===a.Da&&null!=a.u&&(a.Da=he(a.u));return a.Da.get(b)||null}function he(a){var b=B();$d(a,function(a){b.set(a.X(),a)});return b}function ie(a,b){b.u&&(a.u=b.u.Lb());a.ad=b}fe.prototype.bind=function(){return this};function je(a,b){var c=a.u;null!=c&&$d(c,function(a){a instanceof ce&&a.bind(b)})};function ke(a){fe.call(this,a)}t(ke,fe);function le(a){var b="";a.forEach(function(c,d){b+=c.O.m()+" ";b+=1==c.mb?"ASC":"DESC";d<a.length-1&&(b+=", ")});return b}ke.prototype.ca=function(){return D(this.c)};ke.prototype.clone=function(){var a=new ke(this.aa);ie(a,this);this.f&&(a.f=this.f.slice());this.c&&(a.c=this.c.slice());a.W=this.W;a.L=this.L;this.N&&(a.N=this.N.slice());this.ja&&(a.ja=this.ja.slice());this.Sb&&(a.Sb=this.Sb);this.$b&&(a.$b=this.$b);a.Ab=this.Ab;return a};
ke.prototype.bind=function(a){ke.eb.bind.call(this,a);null!=this.Sb&&(this.W=a[this.Sb.za()]);null!=this.$b&&(this.L=a[this.$b.za()]);je(this,a);return this};function me(a,b){this.Ea=a;this.$=b}me.prototype.jb=g("Ea");me.prototype.ca=g("$");function ne(a){var b=D();a.forEach(function(a){a.ca().forEach(b.add.bind(b))});return b};function oe(a,b){this.global=a;this.La=a.j(mc);this.vd=b.map(function(a){return a.context});this.ef=b.map(function(a){return a.ie});this.Ld=ne(this.ef);this.ve=pe(this);this.cb=x()}function pe(a){return a.vd.some(function(a){return!(a instanceof ke)})?1:0}m=oe.prototype;
m.exec=function(){function a(){var f=d.shift();if(f){var h=e[c.length];return f.jb().exec(b,h).then(function(b){c.push(b[0]);return a()})}return w()}var b=0==this.ve?void 0:new md(this.global,this.Ld),c=[],d=this.ef.slice(),e=this.vd;return a().then(function(){return this.La.Db(this.ve,E(this.Ld),b).ia()}.bind(this)).then(function(){this.fe(c);return c}.bind(this),function(a){null!=b&&b.Jb();throw a;})};m.I=g("ve");m.ca=g("Ld");m.Nb=g("cb");m.X=function(){return ka(this)};m.fe=aa();function qe(a,b){oe.call(this,a,b);this.Ib=a.j(rc)}t(qe,oe);qe.prototype.getPriority=l(0);qe.prototype.fe=function(a){this.vd.forEach(function(b,c){ue(this.Ib,b,a[c])},this)};function ve(a,b){this.h=a;this.Ib=a.j(rc);this.Fa=a.j(qc);this.nd=new Jc(a);this.tb=b;var c=a.j(sc),d=this.tb.map(function(a){return c.table(a.getName())});this.$=D(d);this.cb=x()}m=ve.prototype;m.exec=function(){this.nd.update(this.tb);this.Pc();return w()};m.I=l(1);m.ca=g("$");m.Nb=g("cb");m.X=function(){return ka(this)};m.getPriority=l(1);m.Pc=function(){var a=we(this.Ib,this.$);0!=a.length&&(a=new qe(this.h,a),xe(this.Fa,a))};function ye(a){this.h=a;this.La=a.j(mc);this.Fa=a.j(qc)}ye.prototype.de=function(a){a=new ve(this.h,a);xe(this.Fa,a)};function N(a,b){this.Pa=a;this.l=b;this.Va=B()}r("lf.backstore.FirebaseRawBackStore",N);N.prototype.jd=g("l");N.prototype.kd=function(){throw new F(351);};function ze(a,b){var c=x(),d=a;b.length&&(d=a.child(b));d.once("value",function(a){c.resolve(a.val())},function(a){c.reject(a)});return c.ha}function Ae(a,b,c){function d(a){a?e.reject(a):e.resolve()}c=c||!1;var e=x();c?a.set(b,d):a.update(b,d);return e.ha}
N.prototype.Ha=function(a){return ze(this.l,"@rev/R").then(function(a){this.Na=a;return ze(this.l,"@table")}.bind(this)).then(function(b){var c=0,d;for(d in b)this.Va.set(d,b[d]),b[d]>c&&(c=b[d]);a.ra().forEach(function(a){this.Va.has(a.getName())||(b[a.getName()]=++c)},this);d=this.l.child("@table");return Ae(d,b)}.bind(this))};
function Be(a,b,c){var d=a.Va.get(b);return null!=d?function(){var a={},b=x();this.l.orderByChild("T").equalTo(d).once("value",function(d){d.forEach(function(b){var d=c(b.val());a[parseInt(b.key(),10)]=d});b.resolve(a)});return b.ha}.call(a).then(function(a){a["@rev"]={R:++this.Na};return Ae(this.l,a)}.bind(a)):w()}N.prototype.wc=function(a){return Be(this,a,l(null)).then(function(){this.Va.delete(a);return Ae(this.l.child("@table/"+a),null,!0)}.bind(this))};N.prototype.dropTable=N.prototype.wc;
N.prototype.sc=function(a,b,c){return Be(this,a,function(a){var e=a.P;e[b]=c;return{R:this.Na+1,T:a.T,P:e}}.bind(this))};N.prototype.addTableColumn=N.prototype.sc;N.prototype.xc=function(a,b){return Be(this,a,function(a){var d=a.P;delete d[b];return{R:this.Na+1,T:a.T,P:d}}.bind(this))};N.prototype.dropTableColumn=N.prototype.xc;N.prototype.Oc=function(a,b,c){return Be(this,a,function(a){var e=a.P;e[c]=e[b];delete e[b];return{R:this.Na+1,T:a.T,P:e}}.bind(this))};N.prototype.renameTableColumn=N.prototype.Oc;
N.prototype.vb=function(){throw new F(351);};N.prototype.createRow=N.prototype.vb;N.prototype.Hc=g("Pa");N.prototype.getVersion=N.prototype.Hc;N.prototype.gc=function(a){var b=x();a=this.Va.get(a);this.l.orderByChild("T").equalTo(a).once("value",function(a){var d=[];a.forEach(function(a){d.push(a.val().P)});b.resolve(d)});return b.ha};N.prototype.dump=function(){var a={},b=cc(this.Va).map(function(b){return this.gc(b).then(function(d){a[b]=d})}.bind(this));return gb(b).then(function(){return a})};
N.prototype.dump=N.prototype.dump;function Ce(a,b,c){ec.call(this,b,c);this.l=a}t(Ce,ec);Ce.prototype.H=function(a){return this.l.Fc(a)};
Ce.prototype.uc=function(){var a=this.Ra.tb;if(0==a.size)this.Y.resolve();else{var b=this.l.Na+1;this.l.Na=b;var c={"@rev":{R:b}};a.forEach(function(a,e){var f=this.l.Va.get(e);a.ua.forEach(function(a,d){c[d]={R:b,T:f,P:a.s}});a.ma.forEach(function(a,d){c[d]={R:b,T:f,P:a[1].s}});a.ya.forEach(function(a,b){c[b]=null})},this);this.l.l.update(c,function(c){null===c?this.Y.resolve():(this.l.Na=b-1,c=C(a).map(function(a){return De(this.l,a.getName())},this),gb(c).then(this.Y.reject.bind(this.Y),this.Y.reject.bind(this.Y)))}.bind(this))}return this.Y.ha};function Ee(){this.xa=B()}function Fe(a,b){if(0==b.length)return C(a.xa);var c=[];b.forEach(function(a){a=this.xa.get(a)||null;null===a||c.push(a)},a);return c}Ee.prototype.getData=g("xa");Ee.prototype.get=function(a){return w(Fe(this,a))};function Ge(a,b){b.forEach(function(a){this.xa.set(a.id(),a)},a)}Ee.prototype.put=function(a){Ge(this,a);return w()};function He(a,b){0==b.length||b.length==a.xa.size?a.xa.clear():b.forEach(function(a){this.xa.delete(a)},a)}
Ee.prototype.remove=function(a){He(this,a);return w()};function Ie(a){return 0==a.xa.size?0:cc(a.xa).reduce(function(a,c){return a>c?a:c},0)};function Je(a,b){this.i=a;this.Cf=b;this.Nc=B();this.Na=-1;this.M=B();this.Va=B();this.Id=null}m=Je.prototype;
m.Ha=function(a){this.l=this.Cf.child(this.i.name());var b=a||function(){return w()};return ze(this.l,"@db/version").then(function(a){return null===a?Ae(this.l,Ke(this),!0).then(function(){var a=new N(0,this.l);return b(a)}.bind(this)):a==this.i.version()?ze(this.l,"@rev/R").then(function(a){this.Na=a;return ze(this.l,"@table")}.bind(this)).then(function(a){for(var b in a)this.Va.set(b,a[b]);a=this.i.ra().map(function(a){return De(this,a.getName())},this);return gb(a)}.bind(this)).then(function(){Le(this);
Me(this);return w()}.bind(this)):this.ge(a,b).then(function(){return this.Ha()}.bind(this))}.bind(this))};m.ge=function(a,b){var c=new N(a,this.l);return c.Ha(this.i).then(function(){return w()}.bind(this)).then(function(){return b(c)}).then(function(){var a=this.l.child("@db");return Ae(a,{version:this.i.version()},!0)}.bind(this))};
function Me(a){a.l.off();a.l.on("child_removed",a.qg.bind(a));a.Jd&&(a.Jd.off(),a.Nc.clear());a.Jd=a.l.orderByChild("R").startAt(a.Na+1);a.Jd.on("value",a.de.bind(a))}function Le(a){rb=C(a.M).map(function(a){return Ie(a)}).reduce(function(a,c){return a>c?a:c},0)+1}m.qg=function(a){var b=a.val(),c=this.Nc.get(b.T)||null;null===c&&(c=D(),this.Nc.set(b.T,c));c.add(parseInt(a.key(),10))};
m.de=function(a){var b=a.child("@rev/R").val();null!=b&&b!=this.Na&&(this.Na=b,a=Ne(this,a),a.forEach(function(a){var b=this.M.get(a.getName()),e=cc(a.ya);0<e.length&&He(b,e);var f=C(a.ua);a.ma.forEach(function(a){f.push(a[1])});Ge(b,f)},this),0<a.length&&this.Kc(a),Me(this))};
function Ne(a,b){var c=D(),d=B();a.Va.forEach(function(a,b){var h=this.M.get(b),k=new kd(b);if(this.Nc.has(a)){var n=E(this.Nc.get(a));n.forEach(function(a){c.add(a)});Fe(h,n).forEach(function(a){k.delete(a)})}d.set(a,k)}.bind(a));b.forEach(function(a){if("@rev"!=a.key()){var b=parseInt(a.key(),10);if(!c.has(b)){a=a.val();var h=d.get(a.T),k=this.M.get(h.getName());k.getData().has(b)?h.modify([Fe(k,[b])[0],new y(b,a.P)]):h.add(new y(b,a.P))}}}.bind(a));return C(d).filter(function(a){return!a.od()})}
function De(a,b){var c=x(),d=a.Va.get(b);a.l.orderByChild("T").equalTo(d).once("value",function(a){var d=new Ee,h=[];a.forEach(function(a){h.push(new y(parseInt(a.key(),10),a.val().P))});Ge(d,h);this.M.set(b,d);c.resolve()}.bind(a));return c.ha}function Ke(a){var b={};b["@db"]={version:a.i.version()};b["@rev"]={R:1};a.Na=1;b["@table"]={};a.i.ra().forEach(function(a,d){var e=a.getName();b["@table"][e]=d;this.M.set(e,new Ee);this.Va.set(e,d)},a);return b}m.Db=function(a,b,c){return new Ce(this,a,c)};
m.Fc=function(a){var b=this.M.get(a)||null;if(null!==b)return b;throw new F(101,a);};m.close=aa();m.subscribe=ba("Id");m.Kc=function(a){null!=this.Id&&this.Id(a)};function P(a,b,c,d){this.l=b;this.Xa=c;this.Pa=a;this.Yc=d}r("lf.backstore.IndexedDBRawBackStore",P);P.prototype.jd=g("l");P.prototype.getRawDBInstance=P.prototype.jd;P.prototype.kd=g("Xa");P.prototype.getRawTransaction=P.prototype.kd;P.prototype.wc=function(a){return new v(function(b,c){try{this.l.deleteObjectStore(a)}catch(d){c(d);return}b()},this)};P.prototype.dropTable=P.prototype.wc;
function Oe(a,b,c,d){return new v(function(a,f){var h;try{var k=this.Xa.objectStore(b);h=k.openCursor()}catch(n){f(n);return}h.onsuccess=function(){var b=h.result;b?(c(b),b.continue()):(d(k),a())};h.onerror=f},a)}function Pe(a){var b=null;return b=a instanceof ArrayBuffer?vb(a):a instanceof Date?a.getTime():a}
function Qe(a,b,c){function d(a){var b=Dc(a.value),d=b.s,e;for(e in d){var A=tb(d[e]);c(A);d[e]=A.Ga()}a.update(b.Ga())}function e(a){var b=tb(a.value);c(b);a.update(b.Ga())}return Oe(a,b,a.Yc?d:e,aa())}P.prototype.sc=function(a,b,c){var d=Pe(c);return Qe(this,a,function(a){a.s[b]=d})};P.prototype.addTableColumn=P.prototype.sc;P.prototype.xc=function(a,b){return Qe(this,a,function(a){delete a.s[b]})};P.prototype.dropTableColumn=P.prototype.xc;
P.prototype.Oc=function(a,b,c){return Qe(this,a,function(a){a.s[c]=a.s[b];delete a.s[b]})};P.prototype.renameTableColumn=P.prototype.Oc;function Re(a,b){var c=[];return new v(function(a,e){var f;try{f=this.Xa.objectStore(b).openCursor()}catch(h){e(h);return}f.onsuccess=function(){var b=f.result;if(b){if(this.Yc){var e;e=Dc(b.value).s;for(var n in e)c.push(e[n])}else c.push(b.value);b.continue()}else a(c)}.bind(this);f.onerror=e},a)}P.prototype.vb=function(a){var b={},c;for(c in a)b[c]=Pe(a[c]);return ub(b)};
P.prototype.createRow=P.prototype.vb;P.prototype.Hc=g("Pa");P.prototype.getVersion=P.prototype.Hc;P.prototype.dump=function(){for(var a=this.l.objectStoreNames,b=[],c=0;c<a.length;++c){var d=a.item(c);b.push(this.gc(d))}return gb(b).then(function(b){var c={};b.forEach(function(b,d){c[a.item(d)]=b});return c})};P.prototype.dump=P.prototype.dump;P.prototype.gc=function(a){return Re(this,a).then(function(a){return a.map(function(a){return a.value})})};function Se(a,b){this.ba=a;this.Mb=b}m=Se.prototype;m.get=function(a){if(0==a.length)return this.Cc();a=a.map(function(a){return new v(function(c,d){var e;try{e=this.ba.get(a)}catch(f){d(f);return}e.onerror=d;e.onsuccess=function(a){c(this.Mb(a.target.result))}.bind(this)},this)},this);return gb(a)};
m.Cc=function(){return new v(function(a,b){var c=[],d;try{d=this.ba.openCursor()}catch(e){b(e);return}d.onerror=b;d.onsuccess=function(){var b=d.result;b?(c.push(this.Mb(b.value)),b.continue()):a(c)}.bind(this)},this)};m.Ub=function(a){return new v(function(b,c){var d;try{d=a()}catch(e){c(e);return}d.onsuccess=b;d.onerror=c},this)};m.put=function(a){if(0==a.length)return w();a=a.map(function(a){return this.Ub(function(){return this.ba.put(a.Ga())}.bind(this))},this);return gb(a)};
m.remove=function(a){return new v(function(b,c){var d=this.ba.count();d.onsuccess=function(d){if(0==a.length||d.target.result==a.length)return this.Ub(function(){return this.ba.clear()}.bind(this)).then(b,c);d=a.map(function(a){return this.Ub(function(){return this.ba.delete(a)}.bind(this))},this);gb(d).then(b,c)}.bind(this);d.onerror=c},this)};function Te(a,b,c,d,e){ec.call(this,c,e);this.h=a;this.Xa=b;this.Yc=d;this.Xa.oncomplete=this.Y.resolve.bind(this.Y);this.Xa.onabort=this.Y.reject.bind(this.Y)}t(Te,ec);Te.prototype.H=function(a,b,c){return this.Yc?(c=null!=c?c:0,a=this.Xa.objectStore(a),new Ec(a,b,0==c?qa(Gc,this.h):Hc)):new Se(this.Xa.objectStore(a),b)};Te.prototype.uc=function(){return this.Y.ha};function Ue(a,b){this.h=a;this.i=b;this.Zc=b.ff().Of||!1}m=Ue.prototype;
m.Ha=function(a){var b=window.indexedDB||window.mozIndexedDB||window.webkitIndexedDB||window.msIndexedDB;if(null==b)throw new F(352);var c=a||function(){return w()};return new v(function(a,e){var f;try{f=b.open(this.i.name(),this.i.version())}catch(h){e(h);return}f.onerror=e;f.onupgradeneeded=function(a){Ve(this,c,a).then(aa(),e)}.bind(this);f.onsuccess=function(b){this.l=b.target.result;this.pe().then(function(b){rb=b+1;a(this.l)}.bind(this))}.bind(this)},this)};
function Ve(a,b,c){var d=c.target.result,e=c.target.transaction;c=new P(c.oldVersion,d,e,a.Zc);We(d);a.i.ra().forEach(qa(a.Jf,d,e),a);return b(c)}function We(a){for(var b=[],c=0;c<a.objectStoreNames.length;++c){var d=a.objectStoreNames.item(c);-1!=d.indexOf(".")&&b.push(d)}b.forEach(function(b){try{a.deleteObjectStore(b)}catch(c){}})}
m.Jf=function(a,b,c){a.objectStoreNames.contains(c.getName())||a.createObjectStore(c.getName(),{keyPath:"id"});c.Bb()&&(c.Aa().forEach(function(c){this.vc(a,b,c.m(),"btree")},this),this.vc(a,b,Xe(c),"rowid"))};m.vc=function(a,b,c,d){a.objectStoreNames.contains(c)||(a.createObjectStore(c,{keyPath:"id"}),a=b.objectStore(c),(this.Zc?new Ec(a,tb,Hc):new Se(a,tb)).put([new xb(new wb(d))]))};m.Db=function(a,b,c){b=this.l.transaction(Ye(b),0==a?"readonly":"readwrite");return new Te(this.h,b,a,this.Zc,c)};
function Ye(a){var b=D();a.forEach(function(a){b.add(a.getName());a.Bb()&&(a.Aa().forEach(function(a){b.add(a.m())}),b.add(Xe(a)))});return E(b)}
m.pe=function(a){function b(){if(0==d.length)return w();var a=d.shift();return c(a).then(b)}function c(b){return new v(function(c,d){var O;try{O=(a||e.transaction([b])).objectStore(b).openCursor(null,"prev")}catch(da){d(da);return}O.onsuccess=function(a){(a=a.target.result)&&(f=Math.max(f,h(a)));c(f)};O.onerror=function(){c(f)}})}var d=this.i.ra().map(function(a){return a.getName()}),e=this.l,f=0,h=function(a){return this.Zc?(a=Dc(a.value),Object.keys(a.s).reduce(function(a,b){return Math.max(a,b)},
0)):a.key}.bind(this);return new v(function(a){b().then(function(){a(f)})})};m.close=function(){this.l.close()};m.Fc=function(){throw new F(511);};m.subscribe=aa();m.Kc=aa();function Ze(a,b,c){ec.call(this,b,c);this.ba=a;0==b&&this.Y.resolve()}t(Ze,ec);Ze.prototype.H=function(a){return this.ba.Fc(a)};Ze.prototype.uc=function(){this.Y.resolve();return this.Y.ha};function $e(a){this.i=a;this.M=B()}m=$e.prototype;m.Ha=function(){this.i.ra().forEach(this.ag,this);return w()};m.Fc=function(a){var b=this.M.get(a)||null;if(null===b)throw new F(101,a);return b};m.Db=function(a,b,c){return new Ze(this,a,c)};function af(a,b){if(!a.M.has(b)){var c=new Ee;a.M.set(b,c);return c}return null}m.ag=function(a){af(this,a.getName());a.Bb()&&(a.Aa().forEach(function(a){this.vc(a.m(),"btree")},this),this.vc(Xe(a),"rowid"))};m.vc=function(a,b){var c=af(this,a);null===c||c.put([new xb(new wb(b))])};
m.close=aa();m.subscribe=aa();m.Kc=aa();function bf(a){$e.call(this,a);this.rd=null}t(bf,$e);bf.prototype.subscribe=function(a){null===this.rd&&(this.rd=a)};bf.prototype.Kc=function(a){null===this.rd||this.rd(a)};function cf(a,b,c){this.Xa=a;this.w=b;this.Mb=c}cf.prototype.get=function(a){var b=this.Mb;return df(this.Xa,"SELECT id, value FROM "+this.w+" "+(0==a.length?"":"WHERE id IN ("+a.join(",")+")"),[],function(a){for(var d=a.rows.length,e=Array(d),f=0;f<d;++f)e[f]=b({id:a.rows.item(f).id,value:JSON.parse(a.rows.item(f).value)});return e})};
cf.prototype.put=function(a){if(0==a.length)return w();var b="INSERT OR REPLACE INTO "+this.w+"(id, value) VALUES (?, ?)";a.forEach(function(a){df(this.Xa,b,[a.id(),JSON.stringify(a.s)])},this);return w()};cf.prototype.remove=function(a){df(this.Xa,"DELETE FROM "+this.w+" "+(0==a.length?"":"WHERE id IN ("+a.join(",")+")"),[]);return w()};function ef(a,b,c){ec.call(this,b,c);this.l=a;this.M=B();this.Md=[]}t(ef,ec);function ff(a){return a.replace(".","__d__").replace("#","__s__")}ef.prototype.H=function(a,b){var c=this.M.get(a)||null;null===c&&(c=new cf(this,ff(a),b),this.M.set(a,c));return c};function df(a,b,c,d){var e=x();a.Md.push({Eg:b,ug:c,transform:d,Y:e});return e.ha}
ef.prototype.uc=function(){var a=null,b=this.Y.reject.bind(this.Y),c=function(a,b){this.Y.reject(b)}.bind(this),d=[],e=function(b,h){if(null!==a){var k=h;null!=a.transform&&null!=h&&(k=a.transform(h));d.push(k);a.Y.resolve(k)}0<this.Md.length?(a=k=this.Md.shift(),b.executeSql(k.Eg,k.ug,e,c)):this.Y.resolve(d)}.bind(this);0==this.vf?this.l.readTransaction(e,b):this.l.transaction(e,b);return this.Y.ha};function Q(a,b,c){this.l=c;this.h=a;this.Pa=b}r("lf.backstore.WebSqlRawBackStore",Q);Q.prototype.jd=g("l");Q.prototype.getRawDBInstance=Q.prototype.jd;Q.prototype.kd=function(){throw new F(356);};Q.prototype.getRawTransaction=Q.prototype.kd;function gf(a){return new ef(a.l,1,new md(a.h,D()))}Q.prototype.wc=function(a){var b=gf(this);df(b,"DROP TABLE "+a,[]);return b.ia()};Q.prototype.dropTable=Q.prototype.wc;
Q.prototype.gc=function(a){var b=gf(this);df(b,"SELECT id, value FROM "+a,[]);return b.ia().then(function(a){for(var b=a[0].rows.length,e=Array(b),f=0;f<b;++f)e[f]={id:a[0].rows.item(f).id,value:JSON.parse(a[0].rows.item(f).value)};return w(e)})};function hf(a,b,c){var d=gf(a),e="UPDATE "+b+" SET value=? WHERE id=?";return a.gc(b).then(function(a){a.forEach(function(a){a=c(a);df(d,e,[JSON.stringify(a.value),a.id])});return d.ia()})}
Q.prototype.sc=function(a,b,c){var d=Pe(c);return hf(this,a,function(a){a.value[b]=d;return a})};Q.prototype.addTableColumn=Q.prototype.sc;Q.prototype.xc=function(a,b){return hf(this,a,function(a){delete a.value[b];return a})};Q.prototype.dropTableColumn=Q.prototype.xc;Q.prototype.Oc=function(a,b,c){return hf(this,a,function(a){a.value[c]=a.value[b];delete a.value[b];return a})};Q.prototype.renameTableColumn=Q.prototype.Oc;Q.prototype.vb=function(a){var b={},c;for(c in a)b[c]=Pe(a[c]);return ub(b)};
Q.prototype.createRow=Q.prototype.vb;Q.prototype.Hc=g("Pa");Q.prototype.getVersion=Q.prototype.Hc;function jf(a){df(a,'SELECT tbl_name FROM sqlite_master WHERE type="table"',[],function(a){for(var c=Array(a.rows.length),d=0;d<c.length;++d)c[d]=a.rows.item(d).tbl_name;return c})}
Q.prototype.dump=function(){var a=x(),b=gf(this);jf(b);var c={};b.ia().then(function(b){b=b[0].filter(function(a){return"__lf_ver"!=a&&"__WebKitDatabaseInfoTable__"!=a}).map(function(a){return this.gc(a).then(function(b){c[a]=b})},this);gb(b).then(function(){a.resolve(c)})}.bind(this));return a.ha};Q.prototype.dump=Q.prototype.dump;function kf(a,b,c){this.h=a;this.i=b;this.Dg=c||4194304}m=kf.prototype;m.Ha=function(a){if(null==window.openDatabase)throw new F(353);var b=a||function(){return w()};return new v(function(a,d){try{var e=window.openDatabase(this.i.name(),"",this.i.name(),this.Dg);if(null!=e)this.l=e,mf(this,b).then(a,d);else throw new F(354);}catch(f){d(f)}},this)};
function mf(a,b){var c=x(),d=new ef(a.l,1,new md(a.h,D()));df(d,"CREATE TABLE IF NOT EXISTS __lf_ver(id INTEGER PRIMARY KEY, v INTEGER)",[]);df(d,"SELECT v FROM __lf_ver WHERE id = 0",[]);d.ia().then(function(a){var d=0;a[1].rows.length&&(d=a[1].rows.item(0).v);d<this.i.version()?this.ge(b,d).then(c.resolve.bind(c)):d>this.i.version()?c.reject(new F(108)):c.resolve()}.bind(a));return c.ha}m.Db=function(a,b,c){if(null!=this.l)return new ef(this.l,a,c);throw new F(2);};m.close=aa();
m.Fc=function(){throw new F(512);};m.subscribe=function(){throw new F(355);};m.Kc=function(){throw new F(355);};m.ge=function(a,b){var c=x();nf(this).then(function(){a(new Q(this.h,b,this.l)).then(function(){return this.pe()}.bind(this)).then(c.resolve.bind(c))}.bind(this),c.reject.bind(c));return c.ha};
function nf(a){var b=a.i.ra(),c=new ef(a.l,1,new md(a.h,D())),d=new ef(a.l,1,new md(a.h,D()));df(c,"INSERT OR REPLACE INTO __lf_ver VALUES (0, ?)",[a.i.version()]);jf(c);return c.ia().then(function(a){function c(a,b){df(d,"INSERT INTO "+a+"(id, value) VALUES(?, ?)",[-1,JSON.stringify(sb(new xb(new wb(b))))])}var h=a[1];h.filter(function(a){return-1!=a.indexOf("__d__")}).forEach(function(a){df(d,"DROP TABLE "+a,[])});var k=[],n=[],A=[];b.map(function(a){-1==h.indexOf(a.getName())&&k.push(a.getName());
a.Bb&&(a.Aa().forEach(function(a){a=ff(a.m());k.push(a);n.push(a)}),a=ff(Xe(a)),k.push(a),A.push(a))});k.forEach(function(a){df(d,"CREATE TABLE "+a+"(id INTEGER PRIMARY KEY, value TEXT)",[])});n.forEach(function(a){c(a,"btree")});A.forEach(function(a){c(a,"rowid")});return d.ia()})}
m.pe=function(){var a=0,b=x(),c=function(b){var c=new ef(this.l,0);df(c,"SELECT MAX(id) FROM "+b,[]);return c.ia().then(function(b){b=b[0].rows.item(0)[0];a=Math.max(b,a)})}.bind(this),d=this.i.ra().map(function(a){return c(a.getName())});gb(d).then(function(){b.resolve(a)},function(a){b.reject(a)});return b.ha};function of(a){this.o=B();this.ac=B();a.ra().forEach(function(a){this.ac.set(a.getName(),D())},this)}m=of.prototype;m.set=function(a,b){this.o.set(b.id(),b);this.ac.get(a).add(b.id())};m.Xb=function(a,b){var c=this.ac.get(a);b.forEach(function(a){this.o.set(a.id(),a);c.add(a.id())},this)};m.get=function(a){return this.o.get(a)||null};function pf(a,b){return b.map(function(a){return this.get(a)},a)}
m.$a=function(a,b,c){var d=[],e=Math.min(b,c),f=Math.max(b,c);a=this.ac.get(a);if(a.size<f-e)a.forEach(function(a){a>=e&&a<=f&&(a=this.o.get(a),d.push(a))},this);else for(b=e;b<=f;++b)a.has(b)&&(c=this.o.get(b),d.push(c));return d};m.remove=function(a,b){this.o.delete(b);this.ac.get(a).delete(b)};m.Dc=function(a){return null!=a?this.ac.get(a).size:this.o.size};m.clear=function(){this.o.clear();this.ac.clear()};function qf(a,b,c){var d=0,e=a.length;for(c=c||rf;d<e;){var f=d+e>>1;0>c(a[f],b)?d=f+1:e=f}return d==e&&a[d]==b?d:~d}function rf(a,b){return a-b}function sf(a,b,c){c=qf(a,b,c);return 0>c?(a.splice(-(c+1),0,b),!0):!1};function tf(a,b,c,d){a=b?a.reverse():a;if(null==c&&null==d)return a;c=Math.min(q(c)?c:a.length,a.length);if(0==c)return[];d=Math.min(d||0,a.length);return a.slice(d,d+c)};function uf(a){this.cd=0==a?vf:wf;this.be=0==a?function(a){return null!=a?a.reverse():null}:function(a){return a||null};this.he=0==a?xf:yf}t(uf,Ic);function wf(a,b){return a>b?1:a<b?-1:0}function vf(a,b){return wf(b,a)}function yf(a,b){return yd(a,b)}function xf(a,b){return yd(b,a)}m=uf.prototype;m.ub=function(a,b){var c=this.be(b),d=[c.c==G,c.A==G];if(!d[0]){var e=this.cd(a,c.c);d[0]=c.da?1==e:-1!=e}d[1]||(e=this.cd(a,c.A),d[1]=c.la?-1==e:1!=e);return d};
m.compare=function(a,b){return this.cd(a,b)};m.min=function(a,b){return a<b?1:a==b?0:-1};m.max=function(a,b){return a>b?1:a==b?0:-1};m.Qb=function(a,b){var c=this.ub(a,b);return c[0]&&c[1]};m.rf=function(a){return a.filter(function(a){return null!==a}).sort(function(a,c){return this.he(a,c)}.bind(this))};m.Wd=function(a){return this.be(a).c==G};m.wd=function(a){a=this.be(a);return[a.c,a.A]};m.bd=function(a){return null!==a};m.toString=function(){return this.compare==vf?"SimpleComparator_DESC":"SimpleComparator_ASC"};
function zf(a){uf.call(this,a);this.cd=0==a?Af:Bf}t(zf,uf);function Bf(a,b){return null===a?null===b?0:-1:null===b?1:wf(a,b)}function Af(a,b){return Bf(b,a)}zf.prototype.Qb=function(a,b){return null===a?td(b):zf.eb.Qb.call(this,a,b)};zf.prototype.Hb=function(a,b){return null===a?null===b?0:-1:null===b?1:null};zf.prototype.min=function(a,b){var c=this.Hb(a,b);null===c&&(c=zf.eb.min.call(this,a,b));return c};zf.prototype.max=function(a,b){var c=this.Hb(a,b);null===c&&(c=zf.eb.max.call(this,a,b));return c};function Cf(a){this.va=a.map(function(a){return new uf(a)})}t(Cf,Ic);function Df(a,b,c,d){for(var e=0,f=0;f<a.va.length&&0==e;++f)e=d(a.va[f],b[f],c[f]);return e}m=Cf.prototype;m.compare=function(a,b){return Df(this,a,b,function(a,b,e){return b==G||e==G?0:a.compare(b,e)})};m.min=function(a,b){return Df(this,a,b,function(a,b,e){return a.min(b,e)})};m.max=function(a,b){return Df(this,a,b,function(a,b,e){return a.max(b,e)})};
m.ub=function(a,b){for(var c=[!0,!0],d=0;d<this.va.length&&(c[0]||c[1]);++d){var e=this.va[d].ub(a[d],b[d]);c[0]=c[0]&&e[0];c[1]=c[1]&&e[1]}return c};m.Qb=function(a,b){for(var c=!0,d=0;d<this.va.length&&c;++d)c=this.va[d].Qb(a[d],b[d]);return c};
m.rf=function(a){var b=a.filter(function(a){return a.every(ga)});a=Array(this.va.length);for(var c=0;c<a.length;c++)a[c]=b.map(function(a){return a[c]});a.forEach(function(a,b){a.sort(function(a,c){return this.va[b].he(a,c)}.bind(this))},this);b=Array(b.length);for(c=0;c<b.length;c++)b[c]=a.map(function(a){return a[c]});return b.sort(function(a,b){for(var c=0,h=0;h<this.va.length&&0==c;++h)c=this.va[h].he(a[h],b[h]);return c}.bind(this))};m.Wd=function(a){return this.va[0].Wd(a[0])};
m.wd=function(a){var b=a.map(function(a,b){return this.va[b].wd(a)[0]},this);a=a.map(function(a,b){return this.va[b].wd(a)[1]},this);return[b,a]};m.bd=function(a){return a.every(function(a,c){return this.va[c].bd(a)},this)};function Ef(a){Cf.call(this,a);this.va=a.map(function(a){return new zf(a)})}t(Ef,Cf);function Ff(){this.na=0}Ff.prototype.add=function(a,b){this.na+=b};Ff.prototype.remove=function(a,b){this.na-=b};Ff.prototype.clear=function(){this.na=0};function Gf(a,b){a.clear();b.forEach(function(a){this.na+=a.na},a)};function Hf(a,b,c,d){this.w=a;this.S=b;this.xf=c;this.rb=new Ff;if(d){a=511;a*=a*a;if(d.length>=a)throw new F(6,a);d=If(this,d);this.qa=d=Jf(d)}else this.clear()}var Kf=[];m=Hf.prototype;m.getName=g("w");m.toString=function(){return this.qa.toString()};m.add=function(a,b){this.qa=this.qa.zb(a,b)};m.set=function(a,b){this.qa=this.qa.zb(a,b,!0)};m.remove=function(a,b){this.qa=this.qa.remove(a,b)};m.get=function(a){return this.qa.get(a)};
m.dd=function(a){if(null==a)return this.Oa().na;if(a instanceof rd){if(td(a))return this.Oa().na;if(xd(a))return this.get(a.c).length}return this.$a([a]).length};m.Oa=g("rb");m.Cc=function(a,b,c,d){c=Array(a);this.qa.fill({offset:b?this.rb.na-a-d:d,count:a,se:0},c);return b?c.reverse():c};
m.$a=function(a,b,c,d){var e=Lf(this.qa).b[0];if(!q(e)||0==c)return Kf;b=b||!1;c=null!=c?Math.min(c,this.rb.na):this.rb.na;d=d||0;var f=Math.min(Math.max(this.rb.na-d,0),c);if(0==f)return Kf;if(!q(a)||1==a.length&&a[0]instanceof rd&&td(a[0]))return this.Cc(f,b,c,d);a=this.S.rf(a);var h=Array(b?this.rb.na:f),k={count:0,W:h.length,reverse:b,L:d},n=this.S instanceof Ef;a.forEach(function(a){for(var b=this.S.wd(a),b=this.S.Wd(a)?e:b[0],b=Mf(this.qa,b),c=k.count,d=0;null!=b&&k.count<k.W;){if(n){for(var f=
b,Vc=a,ab=k,re=h,se=f.D.fc(),te=-1,Da=0;Da<f.b.length;++Da)if(se.Qb(f.b[Da],Vc)){te=Da;break}if(-1!=te)for(Da=te;Da<f.b.length&&ab.count<ab.W;++Da){if(!se.Qb(f.b[Da],Vc))if(se.bd(f.b[Da]))break;else continue;Nf(f,ab,re,Da)}}else b.$a(a,k,h);k.count!=c||0<k.L?(d=0,c=k.count):d++;b=2==d?null:b.next()}},this);h.length>k.count&&h.splice(k.count,h.length-k.count);return b?tf(h,b,c,d):h};m.clear=function(){this.qa=Of(this);this.rb.clear()};m.Ma=function(a){return this.qa.Ma(a)};m.min=function(){return this.Hb(this.S.min.bind(this.S))};
m.max=function(){return this.Hb(this.S.max.bind(this.S))};function Pf(a,b,c){if(!a.S.bd(b.b[c]))if(1<b.b[c].length){if(null===b.b[c][0])return null}else return null;return[b.b[c],a.xf?[b.B[c]]:b.B[c]]}
m.Hb=function(a){var b;a:{b=Lf(this.qa);var c=0;do if(c>=b.b.length)b=b.sa,c=0;else{var d=Pf(this,b,c);if(null!==d){b=d;break a}c++}while(null!==b);b=null}a:{c=Qf(this.qa);d=c.b.length-1;do if(0>d)c=c.nb,d=0;else{var e=Pf(this,c,d);if(null!==e){c=e;break a}d--}while(null!==c);c=null}return null===b||null===c?null:1==a(b[0],c[0])?b:c};m.Ja=g("xf");m.fc=g("S");m.$d=function(a,b){return null!=a?-1==this.S.compare(a,b):!1};m.Qa=function(a,b){return null!=a?0==this.S.compare(a,b):!1};
m.Ga=function(){for(var a=[],b=Lf(this.qa);b;)a.push(new y(b.oa,[b.b,b.B])),b=b.sa;return a};function Rf(a,b,c,d){a=new Hf(b,a,c);d=Sf(d,a);a.qa=d;return a}function Tf(a,b){this.oa=a;this.D=b;this.kb=0;this.sa=this.nb=this.C=null;this.b=[];this.B=[];this.g=[]}function Of(a){return new Tf(rb++,a)}function R(a){return 0==a.kb}m=Tf.prototype;m.next=g("sa");
function Uf(a){function b(a){return null!=a?a.oa.toString():"_"}var c=a.oa+"["+a.b.join("|")+"]",d=a.g.map(function(a){return a.oa}).join("|"),e=a.B.join("/"),f=b(a.nb)+"{",f=R(a)?f+e:f+d,f=f+"}"+b(a.C);a.sa&&(a=Uf(a.sa),c=c+"  "+a[0],f=f+"  "+a[1]);return[c,f]}m.toString=function(){var a="",b=Uf(this),a=a+(b[0]+"\n"+b[1]+"\n");this.g.length&&(a+=this.g[0].toString());return a};function Lf(a){return R(a)?a:Lf(a.g[0])}function Qf(a){return R(a)?a:Qf(a.g[a.g.length-1])}
function Vf(a,b){b&&(b.nb=a);a&&(a.sa=b)}function If(a,b){for(var c=b.length,d=0,e=Of(a),f=e;0<c;){var h=768<=c?511:257<=c&&511>=c?c:257,k=b.slice(d,d+h);e.b=k.map(function(a){return a.key});e.B=k.map(function(a){return a.value});d+=h;c-=h;0<c&&(h=Of(e.D),Vf(e,h),e=h)}return f}function Wf(a){var b=a[0],c=Of(b.D);c.kb=b.kb+1;c.g=a;for(b=0;b<a.length;++b)a[b].C=c,0<b&&c.b.push(a[b].b[0]);return c}
function Jf(a){var b=a,c=[];do c.push(b),b=b.sa;while(b);if(512>=c.length)b=Wf(c);else{var d=c.length,e=0,b=Of(a.D);for(b.kb=a.kb+2;0<d;){a=768<=d?511:257<=d&&511>=d?d:257;var f=c.slice(e,e+a),h=Wf(f);h.C=b;b.g.length&&(b.b.push(f[0].b[0]),Vf(b.g[b.g.length-1],h));b.g.push(h);e+=a;d-=a}}return b}m.get=function(a){var b=Xf(this,a);if(R(this)){var c=Kf;this.D.Qa(this.b[b],a)&&(c=c.concat(this.B[b]));return c}b=this.D.Qa(this.b[b],a)?b+1:b;return this.g[b].get(a)};
m.Ma=function(a){var b=Xf(this,a);return this.D.Qa(this.b[b],a)?!0:R(this)?!1:this.g[b].Ma(a)};m.remove=function(a,b){Yf(this,a,-1,b);if(null===this.C){var c=this;1==this.g.length&&(c=this.g[0],c.C=null);return c}return this};function Zf(a){return R(a)?a.b[0]:Zf(a.g[0])}function $f(a){a.b=[];for(var b=1;b<a.g.length;++b)a.b.push(Zf(a.g[b]))}
function Yf(a,b,c,d){var e=Xf(a,b),f=R(a);if(!f){var h=a.D.Qa(a.b[e],b)?e+1:e;if(Yf(a.g[h],b,h,d))$f(a);else return!1}else if(!a.D.Qa(a.b[e],b))return!1;if(a.b.length>e&&a.D.Qa(a.b[e],b)){if(q(d)&&!a.D.Ja()&&f&&(h=a.B[e],d=qf(h,d,void 0),0>d?d=!1:(h.splice(d,1),d=!0),d&&a.D.Oa().remove(b,1),a.B[e].length))return!1;a.b.splice(e,1);f&&(f=a.D.Ja()?1:a.B[e].length,a.B.splice(e,1),a.D.Oa().remove(b,f))}if(256>a.b.length&&null!==a.C){a:{b=null;if(a.sa&&256<a.sa.b.length)b=a.sa,e=d=0,f=a.b.length+1;else if(a.nb&&
256<a.nb.b.length)b=a.nb,d=a.nb.b.length-1,e=R(a)?d:d+1,f=0;else{b=!1;break a}a.b.splice(f,0,b.b[d]);b.b.splice(d,1);d=R(a)?a.B:a.g;h=null;R(a)?h=b.B:(h=b.g,h[e].C=a);d.splice(f,0,h[e]);h.splice(e,1);R(b)||($f(b),$f(a));b=!0}b||ag(a,c)}return!0}
function ag(a,b){var c,d,e;a.sa&&511>a.sa.b.length?(c=a.sa,e=d=0):a.nb&&(c=a.nb,d=c.b.length,e=R(c)?c.B.length:c.g.length);d=[d,0].concat(a.b);Array.prototype.splice.apply(c.b,d);d=null;R(a)?d=a.B:(d=a.g,d.forEach(function(a){a.C=c}));d=[e,0].concat(d);Array.prototype.splice.apply(R(c)?c.B:c.g,d);Vf(a.nb,a.sa);R(c)||$f(c);-1!=b&&(a.C.b.splice(b,1),a.C.g.splice(b,1))}
m.zb=function(a,b,c){var d=Xf(this,a);if(R(this)){if(this.D.Qa(this.b[d],a)){if(c)this.D.Oa().remove(a,this.D.Ja()?1:this.B[d].length),this.B[d]=this.D.Ja()?b:[b];else{if(this.D.Ja())throw new F(201);if(!sf(this.B[d],b))throw new F(109);}this.D.Oa().add(a,1);return this}this.b.splice(d,0,a);this.B.splice(d,0,this.D.Ja()?b:[b]);this.D.Oa().add(a,1);512==this.b.length?(d=Of(this.D),a=Of(this.D),a.kb=1,a.b=[this.b[256]],a.g=[this,d],a.C=this.C,this.C=a,d.b=this.b.splice(256),d.B=this.B.splice(256),d.C=
a,Vf(d,this.sa),Vf(this,d),d=a):d=this;return d}d=this.D.Qa(this.b[d],a)?d+1:d;a=this.g[d].zb(a,b,c);R(a)||1!=a.b.length||(this.b.splice(d,0,a.b[0]),a.g[1].C=this,a.g[0].C=this,this.g.splice(d,1,a.g[1]),this.g.splice(d,0,a.g[0]));return 512==this.b.length?cg(this):this};function cg(a){var b=Of(a.D),c=Of(a.D);b.C=a.C;b.kb=a.kb+1;b.b=[a.b[256]];b.g=[a,c];a.b.splice(256,1);c.C=b;c.kb=a.kb;c.b=a.b.splice(256);c.g=a.g.splice(257);c.g.forEach(function(a){a.C=c});a.C=b;Vf(c,a.sa);Vf(a,c);return b}
function Xf(a,b){for(var c=0,d=a.b.length;c<d;){var e=c+d>>1;a.D.$d(a.b[e],b)?c=e+1:d=e}return c}function Mf(a,b){if(!R(a)){var c=Xf(a,b);a.D.Qa(a.b[c],b)&&c++;return Mf(a.g[c],b)}return a}
m.$a=function(a,b,c){function d(a){return a[0]?a[1]?0:1:-1}var e=this.D.fc(),f=0,h=this.b.length-1,k=this.b,n=d(e.ub(k[f],a)),A=d(e.ub(k[h],a));if(1!=n&&(-1!=n||-1!=A)){var O=function(a,b){var c=a+b>>1;return c==a?c+1:c},da=function(b,c,f){if(b>=c)return 0==f?c:-1;var h=d(e.ub(k[b],a));if(0==h)return b;if(1==h)return-1;h=O(b,c);if(h==c)return 0==f?c:-1;var n=d(e.ub(k[h],a));return 0==n?da(b,h,n):-1==n?da(h+1,c,f):da(b+1,h,n)},Eb=function(b,c){if(b>=c)return b;var f=d(e.ub(k[c],a));if(0==f)return c;
if(-1==f)return b;f=O(b,c);if(f==c)return b;var h=d(e.ub(k[f],a));return 0==h?Eb(f,c):1==h?Eb(b,f-1):-1};0!=n&&(f=da(f+1,h,A));-1!=f&&(h=Eb(f,h),-1!=h&&h>=f&&dg(this,b,c,f,h+1))}};function Nf(a,b,c,d){if(a.D.Ja())!b.reverse&&b.L?b.L--:c[b.count++]=a.B[d];else for(var e=0;e<a.B[d].length&&b.count<c.length;++e)!b.reverse&&b.L?b.L--:c[b.count++]=a.B[d][e]}function dg(a,b,c,d,e){for(;d<e&&(b.reverse||!(b.count>=b.W));++d)Nf(a,b,c,d)}
m.fill=function(a,b){if(R(this))for(var c=0;c<this.B.length&&0<a.count;++c)if(0<a.offset){if(a.offset-=this.D.Ja()?1:this.B[c].length,0>a.offset)for(var d=this.B[c].length+a.offset;d<this.B[c].length&&0<a.count;++d)b[a.se++]=this.B[c][d],a.count--}else if(this.D.Ja())b[a.se++]=this.B[c],a.count--;else for(d=0;d<this.B[c].length&&0<a.count;++d)b[a.se++]=this.B[c][d],a.count--;else for(c=0;c<this.g.length&&0<a.count;++c)this.g[c].fill(a,b)};
function Sf(a,b){for(var c=b.Oa(),d=a.map(function(a){var d=new Tf(a.id(),b);d.b=a.s[0];d.B=a.s[1];d.b.forEach(function(a,e){c.add(a,b.Ja()?1:d.B[e].length)});return d}),e=0;e<d.length-1;++e)Vf(d[e],d[e+1]);return 1<d.length?Jf(d[0]):d[0]};function eg(a){if(1==a.f.length)return new uf(a.f[0].mb);var b=a.f.map(function(a){return a.mb});return a.f.some(function(a){return a.aa.kc()})?new Ef(b):new Cf(b)};function fg(a){this.fa=a;this.lb=D();this.Qc=new Ff;this.rb=new Ff}m=fg.prototype;m.getName=function(){return this.fa.getName()};m.add=function(a,b){null===a?(this.lb.add(b),this.Qc.add(a,1)):this.fa.add(a,b)};m.set=function(a,b){null===a?(this.lb.clear(),this.Qc.clear(),this.add(a,b)):this.fa.set(a,b)};m.remove=function(a,b){null===a?b?(this.lb.delete(b),this.Qc.remove(a,1)):(this.lb.clear(),this.Qc.clear()):this.fa.remove(a,b)};m.get=function(a){return null===a?E(this.lb):this.fa.get(a)};m.dd=function(a){return this.fa.dd(a)};
m.Oa=function(){Gf(this.rb,[this.fa.Oa(),this.Qc]);return this.rb};m.$a=function(a,b,c,d){b=this.fa.$a(a,b,c,d);return null!=a?b:b.concat(E(this.lb))};m.clear=function(){this.lb.clear();this.fa.clear()};m.Ma=function(a){return null===a?0!=this.lb.size:this.fa.Ma(a)};m.min=function(){return this.fa.min()};m.max=function(){return this.fa.max()};m.Ga=function(){return[new y(-2,E(this.lb))].concat(this.fa.Ga())};m.fc=function(){return this.fa.fc()};
function gg(a,b){for(var c=-1,d=0;d<b.length;++d)if(-2==b[d].id()){c=d;break}if(-1==c)throw new F(102);var d=b[c].s,e=b.slice(0);e.splice(c,1);var c=a(e),f=new fg(c);d.forEach(function(a){f.lb.add(a)});return f}m.Ja=function(){return this.fa.Ja()};function hg(a){this.w=a;this.qb=D();this.S=new uf(1)}m=hg.prototype;m.getName=g("w");m.add=function(a){if("number"!=typeof a)throw new F(103);this.qb.add(a)};m.set=function(a,b){this.add(a,b)};m.remove=function(a){this.qb.delete(a)};m.get=function(a){return this.Ma(a)?[a]:[]};m.min=function(){return this.Hb(this.S.min.bind(this.S))};m.max=function(){return this.Hb(this.S.max.bind(this.S))};
m.Hb=function(a){if(0==this.qb.size)return null;var b=E(this.qb).reduce(function(b,d){return null===b||1==a(d,b)?d:b},null);return[b,[b]]};m.dd=function(){return this.qb.size};m.$a=function(a,b,c,d){var e=a||[wd()];a=E(this.qb).filter(function(a){return e.some(function(b){return this.S.Qb(a,b)},this)},this);return tf(a,b,c,d)};m.clear=function(){this.qb.clear()};m.Ma=function(a){return this.qb.has(a)};m.Ga=function(){return[new y(0,E(this.qb))]};m.fc=g("S");
function ig(a,b){var c=new hg(a);b[0].s.forEach(function(a){c.add(a,a)});return c}m.Ja=l(!0);m.Oa=function(){var a=new Ff;a.na=this.qb.size;return a};function jg(a){this.La=a.j(mc);this.F=a.j(oc);this.V=a.j(nc)}jg.prototype.Ha=function(a){var b=a.ra(),c=function(){if(0==b.length)return w();var a=b.shift();return(a.Bb()?kg(this,a):lg(this,a)).then(c)}.bind(this);return c()};function lg(a,b){var c=a.La.Db(0,[b]),d=c.H(b.getName(),b.Eb.bind(b)).get([]).then(function(a){this.V.Xb(b.getName(),a);mg(this,b,a)}.bind(a));c.ia();return d}
function mg(a,b,c){var d=a.F.oc.get(b.getName())||[];c.forEach(function(a){d.forEach(function(b){var c=a.Gb(b.getName());b.add(c,a.id())})})}function kg(a,b){var c=a.La.Db(0,[b]),d=c.H(b.getName(),b.Eb).get([]).then(function(a){this.V.Xb(b.getName(),a)}.bind(a)),e=b.Aa().map(function(a){return ng(this,a,c)},a).concat(og(a,b,c));c.ia();return gb(e.concat(d))}
function ng(a,b,c){c=c.H(b.m(),tb,1);var d=eg(b);return c.get([]).then(function(a){if(1<a.length){if(pg(b)){var c=Rf.bind(void 0,d,b.m(),b.Ic);a=gg(c,a.slice(1))}else a=Rf(d,b.m(),b.Ic,a.slice(1));this.F.set(b.Rc,a)}}.bind(a))}function og(a,b,c){return c.H(Xe(b),tb,1).get([]).then(function(a){1<a.length&&(a=ig(Xe(b),a.slice(1)),this.F.set(b.getName(),a))}.bind(a))};function qg(){this.ba=B();this.oc=B()}qg.prototype.Ha=function(a){a.ra().forEach(function(a){var c=[];this.oc.set(a.getName(),c);var d=Xe(a);if(null===this.get(d)){var e=new hg(d);c.push(e);this.ba.set(d,e)}a.Aa().forEach(function(a){var b;b=eg(a);b=new Hf(a.m(),b,a.Ic);b=pg(a)?new fg(b):b;c.push(b);this.ba.set(a.m(),b)},this)},this);return w()};qg.prototype.get=function(a){return this.ba.get(a)||null};
qg.prototype.set=function(a,b){var c=this.oc.get(a)||null;null===c&&(c=[],this.oc.set(a,c));for(var d=null,e=0;e<c.length;e++)if(c[e].getName()==b.getName()){d=e;break}null!==d&&0<c.length?c.splice(d,1,b):c.push(b);this.ba.set(b.getName(),b)};function rg(a){this.nc=[];q(a)&&this.add(a)}rg.prototype.toString=function(){return this.nc.map(function(a){return a.toString()}).join(",")};rg.prototype.Ma=function(a){return this.nc.some(function(b){return b.contains(a)})};rg.prototype.Ba=g("nc");
rg.prototype.add=function(a){if(0!=a.length)if(a=this.nc.concat(a),1==a.length)this.nc=a;else{a.sort(yd);for(var b=[],c=a[0],d=1;d<a.length;++d)if(ud(c,a[d])){var e=a[d],f=wd();if(c.c!=G&&e.c!=G){var h=vd(c.c,e.c,!0);1!=h?(f.c=c.c,f.da=0!=h?c.da:c.da&&e.da):(f.c=e.c,f.da=e.da)}c.A!=G&&e.A!=G&&(h=vd(c.A,e.A,!1),-1!=h?(f.A=c.A,f.la=0!=h?c.la:c.la&&e.la):(f.A=e.A,f.la=e.la));c=f}else b.push(c),c=a[d];b.push(c);this.nc=b}};
function sg(a,b){var c=[];a.Ba().map(function(a){return b.Ba().map(function(b){var c;if(ud(a,b)){c=wd();var h=vd(a.c,b.c,!0),h=0==h?a.da?a:b:-1!=h?a:b;c.c=h.c;c.da=h.da;a.A==G||b.A==G?b=a.A==G?b:a:(h=vd(a.A,b.A,!1),b=0==h?a.la?a:b:-1==h?a:b);c.A=b.A;c.la=b.la}else c=null;return c})}).forEach(function(a){c=c.concat(a)});return new rg(c.filter(function(a){return null!==a}))};function tg(a,b){var c=[],d=null,e=null;$d(a,function(a){var h=b(a);null==a.getParent()?e=h:Xd(d,h);var k=a.getParent();null!==k&&M(k).length==M(d).length&&(k=c.indexOf(d),-1!=k&&c.splice(k,1));1<M(a).length&&c.push(h);d=null===a.g?c[c.length-1]:h});return e}function ug(a){return vg(a,function(a){return null===a.g})}
function wg(a){var b=a.getParent(),c=0;null!==b&&(c=M(b).indexOf(a),b.removeChild(a));var d=M(a).slice();d.forEach(function(d,f){a.removeChild(d);null===b||Wd(b,d,c+f)});return{parent:b,children:d}}function xg(a,b){M(a).slice().forEach(function(c){a.removeChild(c);Xd(b,c)});Xd(a,b)}function yg(a){var b=Vd(a,0);wg(a);xg(b,a);return b}
function zg(a,b,c){var d=Vd(a,0),e=M(d).slice();if(!e.some(function(a){return b(a)}))return a;wg(a);e.forEach(function(e,h){if(b(e)){var k=c(a);Yd(d,h);Xd(k,e);Wd(d,k,h)}});return d}function Ag(a,b,c,d){var e=a.getParent();null!==e&&(a=M(e).indexOf(a),Yd(e,a),Wd(e,c,a));M(b).slice().forEach(function(a){b.removeChild(a);Xd(d,a)});return c}function vg(a,b,c){function d(a){b(a)&&e.push(a);null!=c&&c(a)||M(a).forEach(d)}var e=[];d(a);return e}
function Bg(a,b){var c=b||function(a){return a.toString()+"\n"},d="";$d(a,function(a){for(var b=0;b<Ud(a);b++)d+="-";d+=c(a)});return d};function Cg(a){ae.call(this);this.Tb=a;this.ab=!1}t(Cg,ae);m=Cg.prototype;m.Lb=function(){return tg(this,function(a){if(a instanceof Cg){var b=new Cg(a.Tb);b.ab=a.ab;a=a.X();b.oa=a;return b}return a.Lb()})};m.ib=function(a){var b=a||[];$d(this,function(a){a!=this&&a.ib(b)}.bind(this));a=D(b);return E(a)};m.yd=function(a){this.ab!=a&&(this.ab=a,this.Tb="and"==this.Tb?"or":"and",M(this).forEach(function(b){return b.yd(a)}))};
m.eval=function(a){var b=M(this).map(function(b){return b.eval(a)});return Dg(this,b)};function Dg(a,b){return"and"==a.Tb?Ed(b):Fd(b)}m.toString=function(){return"combined_pred_"+this.Tb.toString()};function Eg(a,b,c){ae.call(this);this.ga=a;this.ka=b;this.G=c;this.ce=null;a=Md.Ec();this.yc=Sd(a,this.ga.I(),this.G);this.fg=a.Ve.get(this.ga.I())||null}t(Eg,ae);m=Eg.prototype;m.Lb=function(){var a=new Eg(this.ga,this.ka,this.G),b=this.X();a.oa=b;return a};m.ib=function(a){return null!=a?(a.push(this.ga),a.push(this.ka),a):[this.ga,this.ka]};
m.reverse=function(){var a=this.G;switch(this.G){case "gt":a="lt";break;case "lt":a="gt";break;case "gte":a="lte";break;case "lte":a="gte"}return new Eg(this.ka,this.ga,a)};m.eval=function(a){var b=a.entries.filter(function(a){var b=J(a,this.ga);a=J(a,this.ka);return this.yc(b,a)},this);return new H(b,I(a))};m.toString=function(){return"join_pred("+this.ga.m()+" "+this.G+" "+this.ka.m()+")"};
function Fg(a,b,c){var d=null,e=null;-1!=I(b).indexOf(K(a.ga.H()))?(d=b,e=c):(d=c,e=b);if(d.entries.length>e.entries.length){a:{b=a.ga;a.ga=a.ka;a.ka=b;b=a.G;switch(a.G){case "gt":b="lt";break;case "lt":b="gt";break;case "gte":b="lte";break;case "lte":b="gte";break;default:break a}a.G=b;a.yc=Sd(Md.Ec(),a.ga.I(),a.G)}return[e,d]}return[d,e]}function Gg(a){var b={};a.ib().forEach(function(a){b[a.getName()]=null});return b}
function Hg(a,b,c){null===a.ce&&(a.ce=Gg(a.ka.H()));var d=new Hd(new y(-1,a.ce),!1);return Kd(b,c,d,[K(a.ka.H())])}
function Ig(a,b,c,d){var e=[b,c];d||(e=Fg(a,b,c));b=e[0];c=e[1];var e=b,f=c,h=a.ga,k=a.ka;d&&(e=c,f=b,h=a.ka,k=a.ga);var n=new Uc,A=[];e.entries.forEach(function(a){var b=String(J(a,h));n.set(b,a)});var O=I(e),da=I(f);f.entries.forEach(function(a){var b=J(a,k),c=String(b);null!==b&&n.has(c)?n.get(c).forEach(function(b){b=Kd(a,da,b,O);A.push(b)}):d&&A.push(Hg(this,a,da))}.bind(a));a=I(b).concat(I(c));return new H(A,a)}
function Jg(a,b,c,d,e){function f(a,b){var c=new Hd(b,1<O.length),c=Kd(a,da,c,O);A.push(c)}var h=d.Yf.H(),k=b,n=c;-1!=I(b).indexOf(K(h))&&(k=c,n=b);var A=[],O=I(n),da=I(k);k.entries.forEach(function(a){var b=this.fg(J(a,d.ng)),b=d.index.get(b);0!=b.length&&(d.index.Ja()?f(a,e.get(b[0])):pf(e,b).forEach(f.bind(null,a)))},a);a=I(k).concat(I(n));return new H(A,a)};function Kg(a,b,c){return null===b?new ce(a,b,c):q(b.m)?new Eg(a,b,c):new ce(a,b,c)};var Lg={};r("lf.schema.DataStoreType",Lg);Lg.INDEXED_DB=0;Lg.MEMORY=1;Lg.LOCAL_STORAGE=2;Lg.FIREBASE=3;Lg.WEB_SQL=4;Lg.OBSERVABLE_STORE=5;function Mg(a,b,c,d){this.Rc=a;this.name=b;this.Ic=c;this.f=d}Mg.prototype.m=function(){return this.Rc+"."+this.name};function pg(a){return a.f.some(function(a){return a.aa.kc()})}function S(a,b,c,d){this.w=a;this.pa=c;this.K=b;this.td=d;this.fb=null}r("lf.schema.Table",S);S.prototype.getName=g("w");S.prototype.getName=S.prototype.getName;S.prototype.Za=g("fb");
function K(a){return a.fb||a.w}S.prototype.tc=function(a){var b=new this.constructor(this.w);b.fb=a;b.zg=this.zg;return b};S.prototype.as=S.prototype.tc;S.prototype.createRow=S.prototype.vb;S.prototype.deserializeRow=S.prototype.Eb;S.prototype.Aa=g("pa");S.prototype.getIndices=S.prototype.Aa;S.prototype.ib=g("K");S.prototype.getColumns=S.prototype.ib;S.prototype.getConstraint=S.prototype.Fb;S.prototype.Bb=g("td");S.prototype.persistentIndex=S.prototype.Bb;function Xe(a){return a.w+".#"};function T(a,b){this.child=a;this.Kb=b;this.fb=null}m=T.prototype;m.getName=function(){return this.Kb+"("+this.child.getName()+")"};m.m=function(){return this.Kb+"("+this.child.m()+")"};m.H=function(){return this.child.H()};m.toString=function(){return this.m()};m.I=function(){return this.child.I()};m.Za=g("fb");m.Aa=function(){return[]};m.za=l(null);m.kc=l(!1);m.tc=function(a){this.fb=a;return this};T.prototype.as=T.prototype.tc;
function Ng(a){for(var b=[a];a instanceof T;)b.push(a.child),a=a.child;return b}function Og(a){this.fb=a||null;this.U=new S("#UnknownTable",[],[],!1)}m=Og.prototype;m.getName=l("*");m.m=function(){return this.getName()};m.toString=function(){return this.m()};m.H=g("U");m.I=l(4);m.Za=g("fb");m.Aa=function(){return[]};m.za=l(null);m.kc=l(!1);r("lf.fn.avg",function(a){return new T(a,"AVG")});function Pg(a){return new T(a||new Og,"COUNT")}r("lf.fn.count",Pg);function Qg(a){return new T(a,"DISTINCT")}r("lf.fn.distinct",Qg);r("lf.fn.max",function(a){return new T(a,"MAX")});r("lf.fn.min",function(a){return new T(a,"MIN")});r("lf.fn.stddev",function(a){return new T(a,"STDDEV")});r("lf.fn.sum",function(a){return new T(a,"SUM")});r("lf.fn.geomean",function(a){return new T(a,"GEOMEAN")});function U(a,b){L.call(this);this.Qf=b}t(U,L);U.prototype.exec=function(a,b){switch(this.Qf){case 1:return Rg(this,a,b);case 0:return Sg(this,a,b);default:return Tg(this,a,b)}};U.prototype.toString=l("dummy_node");U.prototype.Sc=function(){return this.toString()};function Tg(a,b,c){return new v(function(a){a(this.ea([],b,c))}.bind(a))}function Rg(a,b,c){return Vd(a,0).exec(b,c).then(function(a){return this.ea(a,b,c)}.bind(a))}
function Sg(a,b,c){var d=M(a).map(function(a){return a.exec(b,c)});return gb(d).then(function(a){var d=[];a.forEach(function(a){for(var b=0;b<a.length;++b)d.push(a[b])});return this.ea(d,b,c)}.bind(a))};function Ug(a){U.call(this,0,1);this.Be=a}t(Ug,U);Ug.prototype.toString=function(){return"aggregation("+this.Be.map(function(a){return a.m()}).toString()+")"};Ug.prototype.ea=function(a){a.forEach(function(a){Vg(new Wg(a,this.Be))},this);return a};function Wg(a,b){this.Ka=a;this.K=b}
function Vg(a){a.K.forEach(function(a){a=Ng(a).reverse();for(var c=1;c<a.length;c++){var d=a[c],e=Ng(d).slice(-1)[0],f=d.child instanceof T?Bd(this.Ka,d.child):this.Ka;if(null!==f.Ya&&f.Ya.has(d.m()))break;f=Xg(d.Kb,f,e);e=this.Ka;null===e.Ya&&(e.Ya=B());e.Ya.set(d.m(),f)}},a)}
function Xg(a,b,c){var d=null;switch(a){case "MIN":d=Yg(b,c,function(a,b){return b<a?b:a});break;case "MAX":d=Yg(b,c,function(a,b){return b>a?b:a});break;case "DISTINCT":d=Zg(b,c);break;case "COUNT":d=$g(b,c);break;case "SUM":d=ah(b,c);break;case "AVG":a=$g(b,c);0<a&&(d=ah(b,c)/a);break;case "GEOMEAN":d=bh(b,c);break;default:d=ch(b,c)}return d}function Yg(a,b,c){return a.entries.reduce(function(a,e){var f=J(e,b);return null===f?a:null===a?f:c(a,f)},null)}
function $g(a,b){return b instanceof Og?a.entries.length:a.entries.reduce(function(a,d){return a+(fa(J(d,b))?0:1)},0)}function ah(a,b){return Yg(a,b,function(a,b){return b+a})}function ch(a,b){var c=[];a.entries.forEach(function(a){a=J(a,b);null===a||c.push(a)});return 0==c.length?null:Cb.apply(null,c)}function bh(a,b){var c=0,d=a.entries.reduce(function(a,d){var h=J(d,b);if(0==h||null===h)return a;c++;return a+Math.log(h)},0);return 0==c?null:Math.pow(Math.E,d/c)}
function Zg(a,b){var c=B();a.entries.forEach(function(a){var e=J(a,b);c.set(e,a)});return new H(C(c),I(a))};function dh(a,b){this.Ea=a;this.$=b}dh.prototype.jb=g("Ea");dh.prototype.ca=g("$");function eh(){L.call(this)}t(eh,L);function fh(a,b){L.call(this);this.table=a;this.values=b}t(fh,eh);function gh(a,b){fh.call(this,a,b)}t(gh,fh);function hh(a){L.call(this);this.table=a}t(hh,eh);hh.prototype.toString=function(){return"delete("+this.table.getName()+")"};function ih(a,b){L.call(this);this.table=a;this.we=b}t(ih,eh);
ih.prototype.toString=function(){var a=[];this.we&&(a=this.we.map(function(a){return a.O.getName()},this));return"update("+this.table.getName()+", ["+a.join(",")+"])"};function jh(a){L.call(this);this.J=a}t(jh,eh);jh.prototype.toString=function(){return"select("+this.J.toString()+")"};function kh(a){L.call(this);this.table=a}t(kh,eh);kh.prototype.toString=function(){var a="table_access("+this.table.getName();null===this.table.Za()||(a+=" as "+this.table.Za());return a+")"};
function lh(){L.call(this)}t(lh,eh);lh.prototype.toString=l("cross_product");function mh(a,b){L.call(this);this.f=a;this.Ob=b}t(mh,eh);mh.prototype.toString=function(){var a="project("+this.f.toString();if(null!==this.Ob)var b=this.Ob.map(function(a){return a.m()}).join(", "),a=a+(", groupBy("+b+")");return a+")"};function nh(a){L.call(this);this.N=a}t(nh,eh);nh.prototype.toString=function(){return"order_by("+le(this.N)+")"};function oh(a){L.call(this);this.f=a}t(oh,eh);
oh.prototype.toString=function(){return"aggregation("+this.f.toString()+")"};function ph(a){L.call(this);this.f=a}t(ph,eh);ph.prototype.toString=function(){return"group_by("+this.f.toString()+")"};function qh(a){L.call(this);this.W=a}t(qh,eh);qh.prototype.toString=function(){return"limit("+this.W+")"};function rh(a){L.call(this);this.L=a}t(rh,eh);rh.prototype.toString=function(){return"skip("+this.L+")"};function sh(a,b){L.call(this);this.J=a;this.Rb=b}t(sh,eh);
sh.prototype.toString=function(){return"join(type: "+(this.Rb?"outer":"inner")+", "+this.J.toString()+")"};function th(){};function uh(){}t(uh,th);uh.prototype.pb=function(a){this.Z=a;this.Wa(this.Z);return this.Z};uh.prototype.Wa=function(a){if(a instanceof jh){var b=vh(this,a.J),b=wh(this,b);Ag(a,a,b[0],b[1]);a==this.Z&&(this.Z=b[0]);a=b[0]}M(a).forEach(function(a){this.Wa(a)},this)};function vh(a,b){if(0==M(b).length||"and"!=b.Tb)return[b];var c=M(b).slice().map(function(a){b.removeChild(a);return vh(this,a)},a);return Ga(c)}
function wh(a,b){var c=null,d=null;b.map(function(a,b){var h=new jh(a);0==b?c=h:Xd(d,h);d=h},a);return[c,d]};function xh(){}t(xh,th);xh.prototype.pb=function(a,b){if(3>b.c.length)return a;this.Z=a;this.Wa(this.Z);return this.Z};xh.prototype.Wa=function(a){if(a instanceof lh)for(;2<M(a).length;){for(var b=new lh,c=0;2>c;c++){var d=Yd(a,0);Xd(b,d)}Wd(a,b,0)}M(a).forEach(function(a){this.Wa(a)},this)};function yh(){U.call(this,0,0)}t(yh,U);yh.prototype.toString=l("cross_product");yh.prototype.ea=function(a){var b=a[0],c=a[1];a=[];for(var d=I(b),e=I(c),f=0;f<b.entries.length;f++)for(var h=0;h<c.entries.length;h++){var k=Kd(b.entries[f],d,c.entries[h],e);a.push(k)}b=I(b).concat(I(c));return[new H(a,b)]};function zh(a,b){oe.call(this,a,b);this.Fa=a.j(qc);this.Ib=a.j(rc)}t(zh,oe);zh.prototype.getPriority=l(2);zh.prototype.fe=function(a){0==this.I()?Ah(this,a):this.Pc()};function Ah(a,b){a.vd.forEach(function(a,d){a instanceof ke&&ue(this.Ib,a,b[d])},a)}zh.prototype.Pc=function(){var a=we(this.Ib,this.ca());0!=a.length&&(a=new qe(this.global,a),xe(this.Fa,a))};function Bh(a){fe.call(this,a)}t(Bh,fe);Bh.prototype.ca=function(){var a=D();a.add(this.c);Ch(this,this.c.getName(),a);return a};function Ch(a,b,c){var d=Dh(a.aa.info(),b,1);Dh(a.aa.info(),b).forEach(c.add.bind(c));d.forEach(function(a){Ch(this,a.getName(),c)},a)}Bh.prototype.clone=function(){var a=new Bh(this.aa);ie(a,this);a.c=this.c;return a};Bh.prototype.bind=function(a){Bh.eb.bind.call(this,a);je(this,a);return this};function Eh(a){fe.call(this,a)}t(Eh,fe);Eh.prototype.ca=function(){var a=D();a.add(this.Ia);var b=this.aa.info();Fh(this.Ia.getName(),b.cf).forEach(a.add.bind(a));this.bc&&Dh(b,this.Ia.getName()).forEach(a.add.bind(a));return a};Eh.prototype.clone=function(){var a=new Eh(this.aa);ie(a,this);a.Ia=this.Ia;this.values&&(a.values=this.values instanceof Ld?this.values:this.values.slice());a.bc=this.bc;a.cc=this.cc;return a};
Eh.prototype.bind=function(a){Eh.eb.bind.call(this,a);this.cc&&(this.values=this.cc instanceof Ld?a[this.cc.za()]:this.cc.map(function(b){return b instanceof Ld?a[b.za()]:b}));return this};function Gh(a){fe.call(this,a)}t(Gh,fe);Gh.prototype.ca=function(){var a=D();a.add(this.table);var b=this.set.map(function(a){return a.O.m()}),c=this.aa.info();Hh(c,b).forEach(a.add.bind(a));Ih(c,b).forEach(a.add.bind(a));return a};Gh.prototype.clone=function(){var a=new Gh(this.aa);ie(a,this);a.table=this.table;a.set=this.set?this.set.slice():this.set;return a};Gh.prototype.bind=function(a){Gh.eb.bind.call(this,a);this.set.forEach(function(b){-1!=b.Xc&&(b.value=a[b.Xc])});je(this,a);return this};function Jh(a,b){if(null==b)return"NULL";switch(a){case 1:return b?1:0;case 3:case 4:return b;case 0:return"'"+vb(b)+"'";default:return"'"+b.toString()+"'"}}function Kh(a,b){var c=a.bc?"INSERT OR REPLACE":"INSERT",d=a.Ia.ib(),c=c+(" INTO "+a.Ia.getName()+"("),c=c+d.map(function(a){return a.getName()}).join(", "),c=c+") VALUES (";return a.values.map(function(a){var f=d.map(function(c){var d=a.s[c.getName()];return b?null!=d?"#":"NULL":Jh(c.I(),d)});return c+f.join(", ")+");"}).join("\n")}
function Lh(a){switch(a){case "between":return"BETWEEN";case "eq":return"=";case "gte":return">=";case "gt":return">";case "in":return"IN";case "lte":return"<=";case "lt":return"<";case "match":return"LIKE";case "neq":return"<>";default:return"UNKNOWN"}}function Mh(a,b,c,d){return a instanceof Ld?"?"+a.za().toString():d?null!=a?"#":"NULL":"match"==b?"'"+a.toString()+"'":"in"==b?"("+a.map(function(a){return Jh(c,a)}).join(", ")+")":"between"==b?Jh(c,a[0])+" AND "+Jh(c,a[1]):Jh(c,a).toString()}
function Nh(a,b){return M(a).map(function(a){return"("+Oh(a,b)+")"}).join("and"==a.Tb?" AND ":" OR ")}function Ph(a){return[a.ga.m(),Lh(a.G),a.ka.m()].join(" ")}function Oh(a,b){if(a instanceof ce){var c=a.O.m(),d=Lh(a.G),e=Mh(a.value,a.G,a.O.I(),b);return"="==d&&"NULL"==e?[c,"IS NULL"].join(" "):"<>"==d&&"NULL"==e?[c,"IS NOT NULL"].join(" "):[c,d,e].join(" ")}if(a instanceof Cg)return Nh(a,b);if(a instanceof Eg)return Ph(a);throw new F(357,typeof a);}
function Qh(a,b){var c=Oh(a,b);return c?" WHERE "+c:""}function Rh(a,b){var c="UPDATE "+a.table.getName()+" SET ",c=c+a.set.map(function(a){var b=a.O.m()+" = ";return-1!=a.Xc?b+"?"+a.Xc.toString():b+Jh(a.O.I(),a.value).toString()}).join(", ");a.u&&(c+=Qh(a.u,b));return c+";"}
function Sh(a,b){var c="*";a.f.length&&(c=a.f.map(function(a){return a.Za()?a.m()+" AS "+a.Za():a.m()}).join(", "));c="SELECT "+c+" FROM ";null!=a.Ab&&0!=a.Ab.size?c+=Th(a,b):(c+=a.c.map(Uh).join(", "),a.u&&(c+=Qh(a.u,b)));if(a.N)var d=a.N.map(function(a){return a.O.m()+(0==a.mb?" DESC":" ASC")}).join(", "),c=c+(" ORDER BY "+d);a.ja&&(d=a.ja.map(function(a){return a.m()}).join(", "),c+=" GROUP BY "+d);a.W&&(c+=" LIMIT "+a.W.toString());a.L&&(c+=" SKIP "+a.L.toString());return c+";"}
function Uh(a){return K(a)!=a.getName()?a.getName()+" AS "+K(a):a.getName()}function Th(a,b){for(var c=vg(a.u,function(a){return a instanceof Eg}),d=c.map(Ph),e=Uh(a.c[0]),f=1;f<a.c.length;f++)var h=Uh(a.c[f]),e=a.Ab.has(c[d.length-f].X())?e+(" LEFT OUTER JOIN "+h):e+(" INNER JOIN "+h),e=e+(" ON ("+d[d.length-f]+")");c=Vd(a.u,0);c instanceof Eg||(e+=" WHERE "+Oh(c,b));return e}
function Vh(a,b){var c=b||!1,d=a.a.clone();if(d instanceof Eh)return Kh(d,c);if(d instanceof Bh){var e="DELETE FROM "+d.c.getName();d.u&&(e+=Qh(d.u,c));return e+";"}if(d instanceof Gh)return Rh(d,c);if(d instanceof ke)return Sh(d,c);throw new F(358,typeof d);};function V(a,b){this.global=a;this.yg=a.j(pc);this.Fa=a.j(qc);this.a=b}r("lf.query.BaseBuilder",V);V.prototype.exec=function(){try{this.gb()}catch(a){return db(a)}return new v(function(a,b){var c=new zh(this.global,[this.Gc()]);xe(this.Fa,c).then(function(b){a(zd(b[0]))},b)},this)};V.prototype.exec=V.prototype.exec;V.prototype.Sf=function(){var a=function(a){return a.Sc(this.a)+"\n"}.bind(this);return Bg(Wh(this).jb(),a)};V.prototype.explain=V.prototype.Sf;
V.prototype.bind=function(a){this.a.bind(a);return this};V.prototype.bind=V.prototype.bind;V.prototype.Fg=function(a){return Vh(this,a)};V.prototype.toSql=V.prototype.Fg;V.prototype.gb=aa();function Wh(a){if(null==a.df){var b;b=a.yg;var c=a.a,d=b.ig.create(c);b=b.vg.create(d,c);a.df=b}return a.df}V.prototype.Gc=function(){return{context:this.a.clone(),ie:Wh(this)}};function Xh(a){V.call(this,a,new Bh(a.j(sc)))}t(Xh,V);r("lf.query.DeleteBuilder",Xh);Xh.prototype.c=function(a){if(null!=this.a.c)throw new F(515);this.a.c=a;return this};Xh.prototype.from=Xh.prototype.c;Xh.prototype.u=function(a){this.Fd();this.a.u=a;return this};Xh.prototype.where=Xh.prototype.u;Xh.prototype.Fd=function(){if(null==this.a.c)throw new F(548);if(null!=this.a.u)throw new F(516);};Xh.prototype.gb=function(){Xh.eb.gb.call(this);if(null==this.a.c)throw new F(517);};function Yh(a,b){V.call(this,a,new Eh(a.j(sc)));this.a.bc=b||!1}t(Yh,V);r("lf.query.InsertBuilder",Yh);Yh.prototype.gb=function(){Yh.eb.gb.call(this);var a=this.a;if(null==a.Ia||null==a.values)throw new F(518);if(a.bc&&null===a.Ia.Fb().hd())throw new F(519);};Yh.prototype.Ia=function(a){if(null!=this.a.Ia)throw new F(520);this.a.Ia=a;return this};Yh.prototype.into=Yh.prototype.Ia;
Yh.prototype.values=function(a){if(null!=this.a.values)throw new F(521);a instanceof Ld||a.some(function(a){return a instanceof Ld})?this.a.cc=a:this.a.values=a;return this};Yh.prototype.values=Yh.prototype.values;function Zh(a){return $h("and",Array.prototype.slice.call(arguments))}r("lf.op.and",Zh);r("lf.op.or",function(a){return $h("or",Array.prototype.slice.call(arguments))});function $h(a,b){var c=new Cg(a);b.forEach(function(a){Xd(c,a)});return c}r("lf.op.not",function(a){a.yd(!0);return a});function W(a,b){V.call(this,a,new ke(a.j(sc)));this.Le=this.Ad=!1;this.a.f=b;ai(this);bi(this)}t(W,V);r("lf.query.SelectBuilder",W);W.prototype.gb=function(){W.eb.gb.call(this);var a=this.a;if(null==a.c)throw new F(522);if(q(a.Sb)&&!q(a.W)||q(a.$b)&&!q(a.L))throw new F(523);null!=this.a.ja?ci(this):di(this)};function ai(a){var b=a.a.f.filter(function(a){return a instanceof T&&"DISTINCT"==a.Kb},a);if(0!=b.length&&(1!=b.length||1!=a.a.f.length))throw new F(524);}
function ci(a){var b=a.a.f.filter(function(a){return!(a instanceof T)}).map(function(a){return a.m()}),c=!1;if(0==a.a.ja.length||0==a.a.f.length)c=!0;else{var d=a.a.ja.map(function(a){return a.m()});(c=b.some(function(a){return-1==d.indexOf(a)}))||(c=a.a.ja.some(function(a){a=a.I();return 6==a||0==a}))}if(c)throw new F(525);}function di(a){var b=a.a.f.some(function(a){return a instanceof T},a);a=a.a.f.some(function(a){return!(a instanceof T)},a)||0==a.a.f.length;if(b&&a)throw new F(526);}
function bi(a){a.a.f.forEach(function(a){if(a instanceof T&&!ei(a.Kb,a.I()))throw new F(527,a.m());},a)}function fi(a,b){if(null==a.a.c)throw new F(b);}W.prototype.c=function(a){if(this.Le)throw new F(515);this.Le=!0;null==this.a.c&&(this.a.c=[]);this.a.c.push.apply(this.a.c,Array.prototype.slice.call(arguments));return this};W.prototype.from=W.prototype.c;W.prototype.u=function(a){fi(this,548);if(this.Ad)throw new F(516);this.Ad=!0;gi(this,a);return this};W.prototype.where=W.prototype.u;
function gi(a,b){if(null!=a.a.u){var c=Zh(b,a.a.u);a.a.u=c}else a.a.u=b}W.prototype.bg=function(a,b){fi(this,542);if(this.Ad)throw new F(547);this.a.c.push(a);gi(this,b);return this};W.prototype.innerJoin=W.prototype.bg;W.prototype.gg=function(a,b){fi(this,542);if(!(b instanceof Eg))throw new F(541);if(this.Ad)throw new F(547);this.a.c.push(a);null==this.a.Ab&&(this.a.Ab=D());var c=b;K(a)!=K(b.ka.H())&&(c=b.reverse());this.a.Ab.add(c.X());gi(this,c);return this};W.prototype.leftOuterJoin=W.prototype.gg;
W.prototype.W=function(a){if(null!=(this.a.W||this.a.Sb))throw new F(528);if(a instanceof Ld)this.a.Sb=a;else{if(0>a)throw new F(531);this.a.W=a}return this};W.prototype.limit=W.prototype.W;W.prototype.L=function(a){if(null!=(this.a.L||this.a.$b))throw new F(529);if(a instanceof Ld)this.a.$b=a;else{if(0>a)throw new F(531);this.a.L=a}return this};W.prototype.skip=W.prototype.L;W.prototype.N=function(a,b){fi(this,549);null==this.a.N&&(this.a.N=[]);this.a.N.push({O:a,mb:null!=b?b:1});return this};
W.prototype.orderBy=W.prototype.N;W.prototype.ja=function(a){fi(this,549);if(null!=this.a.ja)throw new F(530);null==this.a.ja&&(this.a.ja=[]);this.a.ja.push.apply(this.a.ja,Array.prototype.slice.call(arguments));return this};W.prototype.groupBy=W.prototype.ja;function ei(a,b){switch(a){case "COUNT":case "DISTINCT":return!0;case "AVG":case "GEOMEAN":case "STDDEV":case "SUM":return 4==b||3==b;case "MAX":case "MIN":return 4==b||3==b||5==b||2==b}return!1}
W.prototype.clone=function(){var a=new W(this.global,this.a.f);a.a=this.a.clone();a.a.ad=null;return a};W.prototype.clone=W.prototype.clone;function hi(a,b){V.call(this,a,new Gh(a.j(sc)));this.a.table=b}t(hi,V);r("lf.query.UpdateBuilder",hi);hi.prototype.set=function(a,b){var c={Xc:b instanceof Ld?b.za():-1,O:a,value:b};null!=this.a.set?this.a.set.push(c):this.a.set=[c];return this};hi.prototype.set=hi.prototype.set;hi.prototype.u=function(a){this.Fd();this.a.u=a;return this};hi.prototype.where=hi.prototype.u;hi.prototype.Fd=function(){if(null!=this.a.u)throw new F(516);};
hi.prototype.gb=function(){hi.eb.gb.call(this);if(null==this.a.set)throw new F(532);if(this.a.set.some(function(a){return a.value instanceof Ld}))throw new F(501);};function ii(a){this.a=a;this.Ea=null}ii.prototype.jc=function(){null===this.Ea&&(this.Ea=this.fd());return this.Ea};function ji(a){ii.call(this,a)}t(ji,ii);ji.prototype.fd=function(){return this.a.bc?new gh(this.a.Ia,this.a.values):new fh(this.a.Ia,this.a.values)};function ki(a){ii.call(this,a)}t(ki,ii);ki.prototype.fd=function(){var a=new ih(this.a.table,this.a.set),b=null!=this.a.u?new jh(this.a.u.Lb()):null,c=new kh(this.a.table);null===b?Xd(a,c):(Xd(b,c),Xd(a,b));return a};function li(a,b,c){this.Ea=a;this.je=b;this.Wb=c}li.prototype.jc=function(){this.Wb.forEach(function(a){this.Ea=a.pb(this.Ea,this.je)},this);return this.Ea};function mi(a,b){ii.call(this,a);this.Wb=b}t(mi,ii);mi.prototype.fd=function(){var a=new hh(this.a.c),b=null!=this.a.u?new jh(this.a.u.Lb()):null,c=new kh(this.a.c);null===b?Xd(a,c):(Xd(b,c),Xd(a,b));return(new li(a,this.a,this.Wb)).jc()};function ni(){}t(ni,th);ni.prototype.pb=function(a,b){if(2>b.c.length)return a;this.Z=a;this.Wa(this.Z,b);return this.Z};ni.prototype.Wa=function(a,b){if(a instanceof jh&&a.J instanceof Eg){var c=a.J.X(),d=Vd(a,0);d instanceof lh&&(c=null!=b.Ab&&b.Ab.has(c),c=new sh(a.J,c),Ag(a,d,c,c),a==this.Z&&(this.Z=c),a=c)}M(a).forEach(function(a){this.Wa(a,b)},this)};function oi(){this.Wc=D()}t(oi,th);oi.prototype.pb=function(a,b){this.Wc.clear();if(!q(b.u))return a;this.Z=a;this.Wa(this.Z);this.Wc.clear();return this.Z};oi.prototype.Wa=function(a){if(pi(a)){var b=a.J instanceof ce?qi(this,a):ri(this,a);this.Wc.add(a);b==a&&(b=Vd(a,0));null!==b&&(fa(b.getParent())&&(this.Z=b),pi(b)&&!this.Wc.has(b)&&this.Wa(b))}else M(a).forEach(function(a){this.Wa(a)},this)};
function si(a,b,c){var d=b;if(Vd(b,0)instanceof jh)d=yg(b),si(a,b,c);else if(ti(b)){var e=[],d=zg(b,c,function(a){a=new jh(a.J);e.push(a);return a});e.forEach(function(a){si(this,a,c)},a)}return d}function qi(a,b){var c=D([K(b.J.O.H())]),d=function(a){return ui(this,a,c)}.bind(a);return si(a,b,d)}function ri(a,b){var c=D([K(b.J.ga.H()),K(b.J.ka.H())]),d=function(a){return ui(this,a,c)}.bind(a);return si(a,b,d)}
function ui(a,b,c){var d=D();ug(b).forEach(function(a){d.add(K(a.table))},a);b instanceof kh&&d.add(K(b.table));return yc(d,c)}function pi(a){return a instanceof jh&&!(a.J instanceof Cg)}function ti(a){a=Vd(a,0);return a instanceof lh||a instanceof sh};function vi(a,b){ii.call(this,a);this.Wb=b;this.hf=this.Ze=this.qf=this.bf=this.Ce=this.Oe=this.pf=this.Ie=this.sf=null}t(vi,ii);
vi.prototype.fd=function(){wi(this);2<=this.a.c.length&&(this.Ie=new lh);this.pf=null!=this.a.u?new jh(this.a.u.Lb()):null;this.a.N&&(this.bf=new nh(this.a.N));null!=this.a.L&&0<this.a.L&&(this.qf=new rh(this.a.L));null!=this.a.W&&(this.Ze=new qh(this.a.W));null!=this.a.ja&&(this.Oe=new ph(this.a.ja));xi(this);this.hf=new mh(this.a.f||[],this.a.ja||null);var a=yi(this);return(new li(a,this.a,this.Wb)).jc()};
function yi(a){for(var b=[a.Ze,a.qf,a.hf,a.bf,a.Ce,a.Oe,a.pf,a.Ie],c=null,d=null,e=0;e<b.length;e++){var f=b[e];null!==f&&(null===d?d=f:Xd(b[c],f),c=e)}a.sf.forEach(function(a){Xd(b[c],a)});return d}function wi(a){a.sf=a.a.c.map(function(a){return new kh(a)},a)}function xi(a){var b=a.a.f.filter(function(a){return a instanceof T});null!=a.a.N&&a.a.N.forEach(function(a){a.O instanceof T&&b.push(a.O)});0<b.length&&(a.Ce=new oh(b))};function zi(){this.qe=[new uh,new xh,new oi,new ni];this.Nd=[new uh]}zi.prototype.create=function(a){var b=null;if(a instanceof Eh)b=new ji(a);else if(a instanceof Bh)b=new mi(a,this.Nd);else if(a instanceof ke)b=new vi(a,this.qe);else if(a instanceof Gh)b=new ki(a);else throw new F(513);b=b.jc();return new dh(b,a.ca())};function Ai(a){U.call(this,0,1);this.U=a}t(Ai,U);Ai.prototype.toString=function(){return"delete("+this.U.getName()+")"};Ai.prototype.ea=function(a,b){var c=a[0].entries.map(function(a){return a.ta});b.remove(this.U,c);return[Dd()]};function Bi(a,b){U.call(this,0,-1);this.table=b;this.F=a.j(oc)}t(Bi,U);Bi.prototype.toString=function(){return"get_row_count("+this.table.getName()+")"};Bi.prototype.ea=function(){var a=this.F.get(Xe(this.table)),b=new H([],[this.table.getName()]),c=Pg(),a=a.Oa().na;null===b.Ya&&(b.Ya=B());b.Ya.set(c.m(),a);return[b]};function Ci(a,b){U.call(this,0,-1);this.V=a.j(nc);this.F=a.j(oc);this.table=b}t(Ci,U);Ci.prototype.toString=function(){var a="table_access("+this.table.getName();null===this.table.Za()||(a+=" as "+this.table.Za());return a+")"};Ci.prototype.ea=function(){var a=this.F.get(Xe(this.table)).$a();return[Gd(pf(this.V,a),[K(this.table)])]};function Di(a){this.h=a}t(Di,th);Di.prototype.pb=function(a,b){this.Z=a;if(!this.Gd(b))return a;var c=vg(a,function(a){return a instanceof Ci})[0],d=new Bi(this.h,c.table);Ag(c,c,d,d);return this.Z};Di.prototype.Gd=function(a){return 1==a.f.length&&1==a.c.length&&null==a.u&&null==a.W&&null==a.L&&null==a.ja?(a=a.f[0],a instanceof T&&"COUNT"==a.Kb&&a.child instanceof Og):!1};function Ei(a){U.call(this,0,1);this.Ne=a}t(Ei,U);Ei.prototype.toString=function(){return"groupBy("+this.Ne.map(function(a){return a.m()}).toString()+")"};Ei.prototype.ea=function(a){return Fi(this,a[0])};function Fi(a,b){var c=new Uc,d=function(a){return this.Ne.map(function(b){return J(a,b)},this).join(",")}.bind(a);b.entries.forEach(function(a){c.set(d(a),a)},a);return c.keys().map(function(a){return new H(c.get(a),I(b))},a)};function Gi(a,b,c){U.call(this,0,0);this.F=a.j(oc);this.V=a.j(nc);this.J=b;this.Rb=c;this.Dd="eq"==this.J.G?0:2;this.Pe=null}t(Gi,U);var Hi=["hash","index_nested_loop","nested_loop"];Gi.prototype.toString=function(){return"join(type: "+(this.Rb?"outer":"inner")+", impl: "+Hi[this.Dd]+", "+this.J.toString()+")"};
Gi.prototype.ea=function(a){switch(this.Dd){case 0:return[Ig(this.J,a[0],a[1],this.Rb)];case 1:return[Jg(this.J,a[0],a[1],this.Pe,this.V)];default:var b=this.J,c=a[0];a=a[1];var d=this.Rb,e=[c,a];d||(e=Fg(b,c,a));c=e[0];a=e[1];for(var e=[],f=I(c),h=I(a),k=c.entries.length,n=a.entries.length,A=n+256-1>>8,O=0;O<A;){for(var da=0;da<k;da++){var Eb=!1,bg=J(c.entries[da],b.ga);if(null!==bg)for(var Vc=Math.min(O+1<<8,n),ab=O<<8;ab<Vc;ab++)if(b.yc(bg,J(a.entries[ab],b.ka))){var Eb=!0,re=Kd(c.entries[da],
f,a.entries[ab],h);e.push(re)}d&&!Eb&&e.push(Hg(b,c.entries[da],f))}O++}b=I(c).concat(I(a));return[new H(e,b)]}};function Ii(a,b){a.Dd=1;var c=a.F.get(b.za().m());a.Pe={Yf:b,ng:b==a.J.ga?a.J.ka:a.J.ga,index:c}};function Ji(a){U.call(this,0,-1);this.jf=a}t(Ji,U);Ji.prototype.toString=function(){return"no_op_step("+I(this.jf[0]).join(",")+")"};Ji.prototype.ea=g("jf");function Ki(){}t(Ki,th);Ki.prototype.pb=function(a,b){this.Z=a;if(!this.Gd(b))return a;vg(a,function(a){return a instanceof Gi}).forEach(this.xg,this);return this.Z};Ki.prototype.Gd=function(a){return 1<a.c.length};
Ki.prototype.xg=function(a){if("eq"==a.J.G&&!a.Rb){var b=function(b){if(!(b instanceof Ci))return null;b=K(b.table)==K(a.J.ka.H())?a.J.ka:a.J.ga;return fa(b.za())?null:b},c=b(Vd(a,0)),b=b(Vd(a,1));if(null!==c||null!==b){b=null===b?c:b;Ii(a,b);var d=new H([],[K(b.H())]);Zd(a,new Ji([d]),b==c?0:1)}}};function Li(a){a=a.map(function(a){return a.Ba()});a=Ib.apply(null,a);var b=[];Hb(a,function(a){b.push(a)});return b}function Mi(a){this.Pb=a}Mi.prototype.gd=function(){return 1==this.Pb.f.length?[wd()]:[this.Pb.f.map(function(){return wd()})]};function Ni(a,b){this.Pb=a;this.Da=b;this.Kd=this.Xe=null}
function Oi(a,b){var c=B();a.Da.keys().forEach(function(a){var e=this.Da.get(a).map(function(a){return ge(b,a)},this),f=new rg([wd()]);e.forEach(function(a){var b=null;"between"==a.G?b=new rd(a.value[0],a.value[1],!1,!1):"eq"==a.G?(b=a.value,b=new rd(b,b,!1,!1)):b="gte"==a.G?new rd(a.value,G,!1,!1):"gt"==a.G?new rd(a.value,G,!0,!1):"lte"==a.G?new rd(G,a.value,!1,!1):new rd(G,a.value,!1,!0);a=a.ab?sd(b):[b];a=new rg(a);f=sg(f,a)});c.set(a,f)},a);return c}
Ni.prototype.gd=function(a){if(this.Xe==a)return this.Kd;for(var b=Oi(this,a),c=this.Pb.f.length-1;0<=c;c--){var d=this.Pb.f[c];if(null!==(b.get(d.aa.getName())||null))break;b.set(d.aa.getName(),new rg([wd()]))}this.Kd=1==this.Pb.f.length?C(b)[0].Ba():Li(Pi(this,b));this.Xe=a;return this.Kd};function Pi(a,b){var c=B(),d=0;a.Pb.f.forEach(function(a){c.set(a.aa.getName(),d);d++});return cc(b).sort(function(a,b){return c.get(a)-c.get(b)}).map(function(a){return b.get(a)})};function Qi(a,b){this.tf=b;this.F=a.j(oc)}function Ri(a,b,c){c=c.filter(a.cg,a);if(0==c.length)return null;a=Si(a,c);if(0==a.length)return null;if(1==a.length)return a[0];var d=Number.MAX_VALUE;return a.reduce(function(a,c){var h=Ti(c,b);return h<d?(d=h,c):a},null)}
function Si(a,b){return a.tf.Aa().map(function(a){a=new Ui(this.F,a);Vi(a,b);return a},a).filter(function(a){if(null===a.Da)a=!1;else{for(var b=!1,e=!0,f=0;f<a.yb.f.length;f++){var h=a.Da.has(a.yb.f[f].aa.getName());if(b&&h){e=!1;break}h||(b=!0)}a=e}return a})}Qi.prototype.cg=function(a){var b;if(b=a instanceof ce)de(a),b=null!==a.value&&("between"==a.G||"eq"==a.G||"gt"==a.G||"gte"==a.G||"lt"==a.G||"lte"==a.G);return b?a.O.H()==this.tf:!1};
function Ui(a,b){this.F=a;this.yb=b;this.Zf=D(this.yb.f.map(function(a){return a.aa.getName()}));this.Zd=this.Da=null}function Wi(a){null===a.Zd&&(a.Zd=new Ni(a.yb,a.Da));return a.Zd}function Vi(a,b){b.forEach(function(a){var b=a.ib()[0].getName();this.Zf.has(b)&&(null===this.Da&&(this.Da=new Uc),this.Da.set(b,a.X()))},a)}function Ti(a,b){var c=Wi(a).gd(b),d=a.F.get(a.yb.m());return c.reduce(function(a,b){return a+d.dd(b)},0)};function Xi(a,b,c,d){U.call(this,0,-1);this.F=a.j(oc);this.index=b;this.We=c;this.ne=d;this.Vc=this.Uc=!1}t(Xi,U);Xi.prototype.toString=function(){return"index_range_scan("+this.index.m()+", ?, "+(this.ne?"reverse":"natural")+(this.Uc?", limit:?":"")+(this.Vc?", skip:?":"")+")"};Xi.prototype.Sc=function(a){var b=this.toString(),c=this.We.gd(a),b=b.replace("?",c.toString());this.Uc&&(b=b.replace("?",a.W.toString()));this.Vc&&(b=b.replace("?",a.L.toString()));return b};
Xi.prototype.ea=function(a,b,c){a=this.We.gd(c);b=this.F.get(this.index.m());c=(1==a.length&&a[0]instanceof rd&&xd(a[0])?tf(b.get(a[0].c),!1,this.Uc?c.W:void 0,this.Vc?c.L:void 0):b.$a(a,this.ne,this.Uc?c.W:void 0,this.Vc?c.L:void 0)).map(function(a){return new y(a,{})},this);return[Gd(c,[this.index.Rc])]};function Yi(a){U.call(this,0,1);this.ud=a}t(Yi,U);Yi.prototype.toString=l("select(?)");Yi.prototype.Sc=function(a){a=ge(a,this.ud);return this.toString().replace("?",a.toString())};Yi.prototype.ea=function(a,b,c){return[ge(c,this.ud).eval(a[0])]};function Zi(a,b){U.call(this,0,1);this.V=a.j(nc);this.U=b}t(Zi,U);Zi.prototype.toString=function(){return"table_access_by_row_id("+this.U.getName()+")"};Zi.prototype.ea=function(a){return[Gd(pf(this.V,Ad(a[0])),[K(this.U)])]};function $i(a){this.h=a}t($i,th);$i.prototype.pb=function(a,b){this.Z=a;vg(a,function(a){return a instanceof Ci}).forEach(function(a){var d=aj(a);if(0!=d.length){var e=Ri(new Qi(this.h,a.table),b,d.map(function(a){return ge(b,a.ud)}));if(null!==e){var f=B();d.forEach(function(a){f.set(a.ud,a)},this);this.Z=bj(this,e,f,a)}}},this);return this.Z};function aj(a){var b=[];for(a=a.getParent();a;)a instanceof Yi&&b.push(a),a=a.getParent();return b}
function bj(a,b,c,d){(null===b.Da?[]:b.Da.values()).map(function(a){return c.get(a)}).forEach(wg);b=new Xi(a.h,b.yb,Wi(b),!1);a=new Zi(a.h,d.table);Xd(a,b);Ag(d,d,a,b);return b.jb()};function cj(a,b){U.call(this,0,-1);this.F=a.j(oc);this.U=b}t(cj,U);cj.prototype.toString=function(){return"insert("+this.U.getName()+")"};cj.prototype.ea=function(a,b,c){dj(this.U,c.values,this.F);b.zb(this.U,c.values);return[Gd(c.values,[this.U.getName()])]};function dj(a,b,c){a=a.Fb().hd();if(null===a?0:a.f[0].autoIncrement){var d=a.f[0].aa.getName();c=c.get(a.m()).max();var e=null===c?0:c[0];b.forEach(function(a){if(0==a.s[d]||null==a.s[d])e++,a.s[d]=e})}}
function ej(a,b){U.call(this,0,-1);this.F=a.j(oc);this.U=b}t(ej,U);ej.prototype.toString=function(){return"insert_replace("+this.U.getName()+")"};ej.prototype.ea=function(a,b,c){dj(this.U,c.values,this.F);b.Vd(this.U,c.values);return[Gd(c.values,[this.U.getName()])]};function fj(){U.call(this,0,1)}t(fj,U);fj.prototype.toString=l("limit(?)");fj.prototype.Sc=function(a){return this.toString().replace("?",a.W.toString())};fj.prototype.ea=function(a,b,c){a[0].entries.splice(c.W);return a};function gj(a){U.call(this,0,1);this.N=a}t(gj,U);m=gj.prototype;m.toString=function(){return"order_by("+le(this.N)+")"};m.ea=function(a){if(1==a.length){var b;b=a[0];for(var c=null,d=0;d<this.N.length;d++){var e=Qg(this.N[d].O);if(null!==b.Ya&&b.Ya.has(e.m())){c=e;break}}b=c;(null===b?a[0]:Bd(a[0],b)).entries.sort(this.Pf.bind(this))}else a.sort(this.Ag.bind(this));return a};
m.S=function(a,b){var c=null,d=null,e=null,f=-1;do f++,e=this.N[f].O,c=this.N[f].mb,d=a(e),e=b(e);while(d==e&&f+1<this.N.length);d=d<e?-1:d>e?1:0;return 1==c?d:-d};m.Ag=function(a,b){return this.S(function(b){return b instanceof T?Bd(a,b):J(a.entries[a.entries.length-1],b)},function(a){return a instanceof T?Bd(b,a):J(b.entries[b.entries.length-1],a)})};m.Pf=function(a,b){return this.S(function(b){return J(a,b)},function(a){return J(b,a)})};function hj(a,b){this.Ka=a;this.K=b}function ij(a){return a.K.some(function(a){return a instanceof T},a)?jj(a):kj(a)}function jj(a){if(1==a.K.length&&"DISTINCT"==a.K[0].Kb)return a=Bd(a.Ka,a.K[0]).entries.map(function(a){var b=new Hd(new y(-1,{}),1<this.Ka.M.size);Jd(b,this.K[0],J(a,this.K[0].child));return b},a),new H(a,[]);var b=new Hd(new y(-1,{}),1<a.Ka.M.size);a.K.forEach(function(a){var d=a instanceof T?Bd(this.Ka,a):J(this.Ka.entries[0],a);Jd(b,a,d)},a);return new H([b],I(a.Ka))}
function kj(a){var b=Array(a.Ka.entries.length),c=1<a.Ka.M.size;a.Ka.entries.forEach(function(a,e){b[e]=new Hd(new y(a.ta.id(),{}),c);this.K.forEach(function(c){Jd(b[e],c,J(a,c))},this)},a);return new H(b,I(a.Ka))}function lj(a,b){var c=a.map(function(a){return ij(new hj(a,b)).entries[0]});return new H(c,I(a[0]))};function mj(a,b){U.call(this,0,1);this.f=a;this.Ob=b}t(mj,U);mj.prototype.toString=function(){var a="project("+this.f.toString();if(null!==this.Ob)var b=this.Ob.map(function(a){return a.m()}).join(", "),a=a+(", groupBy("+b+")");return a+")"};mj.prototype.ea=function(a){0==a.length?a=[Dd()]:1==a.length?(a=a[0],a=[0==this.f.length?a:ij(new hj(a,this.f))]):a=[lj(a,this.f)];return a};function nj(a){return a.f.some(function(a){return a instanceof T})||null!==a.Ob};function oj(){U.call(this,0,1)}t(oj,U);oj.prototype.toString=l("skip(?)");oj.prototype.Sc=function(a){return this.toString().replace("?",a.L.toString())};oj.prototype.ea=function(a,b,c){return[new H(a[0].entries.slice(c.L),I(a[0]))]};function pj(){}t(pj,th);pj.prototype.pb=function(a,b){if(!q(b.W)&&!q(b.L))return a;var c=qj(a);if(null===c)return a;vg(a,function(a){return a instanceof fj||a instanceof oj}).forEach(function(a){a instanceof fj?c.Uc=!0:c.Vc=!0;wg(a)},this);return c.jb()};function qj(a){a=vg(a,function(a){return a instanceof Xi},function(a){return a instanceof mj&&nj(a)||a instanceof gj||1!=M(a).length||a instanceof Yi});return 0<a.length?a[0]:null};function rj(a){this.h=a}t(rj,th);rj.prototype.pb=function(a,b){var c=sj(a,b);if(null===c)return a;var d;a:{var e=c;d=tj(Vd(c,0));if(null!==d){var f;f=c.N;for(var h=null,k=d.table.Aa(),n=0;n<k.length&&null===h;n++)h=uj(k[n],f);f=h;if(null===f){d=e;break a}e=new Xi(this.h,f.yb,new Mi(f.yb),f.Te);f=new Zi(this.h,d.table);Xd(f,e);wg(c);e=Ag(d,d,f,e)}d=e}if(d==c)a:if(d=c,e=vj(Vd(c,0)),null!==e){f=uj(e.index,c.N);if(null===f)break a;e.ne=f.Te;d=wg(c).parent}return d.jb()};
function vj(a){a=vg(a,function(a){return a instanceof Xi},function(a){return 1!=M(a).length});return 0<a.length?a[0]:null}function tj(a){a=vg(a,function(a){return a instanceof Ci},function(a){return 1!=M(a).length});return 0<a.length?a[0]:null}function sj(a,b){return q(b.N)?vg(a,function(a){return a instanceof gj})[0]:null}function uj(a,b){if(a.f.length!=b.length||!b.every(function(b,c){return b.O.getName()==a.f[c].aa.getName()}))return null;var c=wj(b,a);return c[0]||c[1]?{yb:a,Te:c[1]}:null}
function wj(a,b){var c=a.reduce(function(a,b){return a<<1|(0==b.mb?0:1)},0),d=b.f.reduce(function(a,b){return a<<1|(0==b.mb?0:1)},0),c=c^d;return[0==c,c==Math.pow(2,Math.max(a.length,b.f.length))-1]};function xj(a,b,c){this.Ea=a;this.je=b;this.Wb=c}xj.prototype.jc=function(){this.Wb.forEach(function(a){this.Ea=a.pb(this.Ea,this.je)},this);return this.Ea};function yj(a,b){U.call(this,0,1);this.U=a;this.Ig=b}t(yj,U);yj.prototype.toString=function(){return"update("+this.U.getName()+")"};yj.prototype.ea=function(a,b){var c=a[0].entries.map(function(a){var b=this.U.Eb(a.ta.Ga());this.Ig.forEach(function(a){b.s[a.O.getName()]=a.value},this);return b},this);b.update(this.U,c);return[Dd()]};function zj(a){this.h=a;this.qe=[new Ki,new $i(this.h),new rj(this.h),new pj,new Di(this.h)];this.Nd=[new $i(this.h)]}zj.prototype.create=function(a,b){var c=a.jb();if(c instanceof gh||c instanceof fh)return Aj(this,a,b);if(c instanceof mh||c instanceof qh||c instanceof rh)return Aj(this,a,b,this.qe);if(c instanceof hh||c instanceof ih)return Aj(this,a,b,this.Nd);throw new F(8);};function Aj(a,b,c,d){a=tg(b.jb(),a.kg.bind(a));null!=d&&(a=(new xj(a,c,d)).jc());return new me(a,b.ca())}
zj.prototype.kg=function(a){if(a instanceof mh)return new mj(a.f,a.Ob);if(a instanceof ph)return new Ei(a.f);if(a instanceof oh)return new Ug(a.f);if(a instanceof nh)return new gj(a.N);if(a instanceof rh)return new oj;if(a instanceof qh)return new fj;if(a instanceof jh)return new Yi(a.J.X());if(a instanceof lh)return new yh;if(a instanceof sh)return new Gi(this.h,a.J,a.Rb);if(a instanceof kh)return new Ci(this.h,a.table);if(a instanceof hh)return new Ai(a.table);if(a instanceof ih)return new yj(a.table,
a.we);if(a instanceof gh)return new ej(this.h,a.table);if(a instanceof fh)return new cj(this.h,a.table);throw new F(514);};function Bj(a){this.ig=new zi;this.vg=new zj(a)};function Cj(){this.$e=B()}function Dj(a,b){var c=a.$e.get(b.getName())||null;null===c&&(c=new Ej,a.$e.set(b.getName(),c));return c}function Fj(a,b,c,d){c.forEach(function(a){a=Dj(this,a);0==d?(a.bb=null,a.zc=b):3==d?(null===a.Zb&&(a.Zb=D()),a.Zb.add(b),null===a.Ta&&(a.Ta=D()),a.Ta.delete(b)):1==d?(null===a.Ta&&(a.Ta=D()),a.Ta.add(b)):2==d&&(a.bb=b)},a)}
function Gj(a,b,c,d){var e=!0;c.forEach(function(a){if(e){a=Dj(this,a);var c=null===a.Ta||0==a.Ta.size;e=0==d?(null===a.Zb||0==a.Zb.size)&&c&&null===a.zc&&null!==a.bb&&a.bb==b:3==d?null===a.zc&&null===a.bb&&null!==a.Ta&&a.Ta.has(b):1==d?null===a.bb:c&&(null===a.bb||a.bb==b)}},a);return e}function Hj(a,b,c,d){var e=Gj(a,b,c,d);e&&Fj(a,b,c,d);return e}Cj.prototype.releaseLock=function(a,b){b.forEach(function(b){Dj(this,b).releaseLock(a)},this)};
function Ij(a,b){b.forEach(function(a){Dj(this,a).bb=null},a)}function Ej(){this.Zb=this.Ta=this.bb=this.zc=null}Ej.prototype.releaseLock=function(a){this.zc==a&&(this.zc=null);this.bb==a&&(this.bb=null);null===this.Ta||this.Ta.delete(a);null===this.Zb||this.Zb.delete(a)};function Jj(){this.Vb=new Kj;this.Jc=new Cj}function xe(a,b){(2>b.getPriority()||2>b.getPriority())&&Ij(a.Jc,b.ca());a.Vb.zb(b);Lj(a);return b.Nb().ha}function Lj(a){for(var b=a.Vb.Ba(),c=0;c<b.length;c++){var d=b[c],e=!1;if(e=0==d.I()?Mj(a,d,1,3):Mj(a,d,2,0))a.Vb.remove(d),e=a,d.exec().then(e.sg.bind(e,d),e.rg.bind(e,d))}}function Mj(a,b,c,d){var e=!1;Hj(a.Jc,b.X(),b.ca(),c)&&(e=Hj(a.Jc,b.X(),b.ca(),d));return e}Jj.prototype.sg=function(a,b){this.Jc.releaseLock(a.X(),a.ca());a.Nb().resolve(b);Lj(this)};
Jj.prototype.rg=function(a,b){this.Jc.releaseLock(a.X(),a.ca());a.Nb().reject(b);Lj(this)};function Kj(){this.Vb=[]}Kj.prototype.zb=function(a){sf(this.Vb,a,function(a,c){var d=a.getPriority()-c.getPriority();return 0==d?a.X()-c.X():d})};Kj.prototype.Ba=function(){return this.Vb.slice()};Kj.prototype.remove=function(a){var b=this.Vb;a=ya(b,a);var c;(c=0<=a)&&xa.splice.call(b,a,1);return c};function Nj(a,b){this.Od=Md.Ec();this.ke=a;this.qd=b;this.K=Oj(this)}function Oj(a){if(0<a.ke.f.length)return a.ke.f;var b=[];a.ke.c.forEach(function(a){a.ib().forEach(function(a){b.push(a)})});return b}Nj.prototype.S=function(a,b){return this.K.every(function(c){return Sd(this.Od,c.I(),"eq")(J(a,c),J(b,c))},this)};
function Pj(a,b,c){var d=null===b?[]:b.entries,e=yb(d,c.entries,a.S.bind(a),function(a){return d[a]});b=[];for(var f=0,h=0;h<d.length;h++){var k=d[h];e[f]==k?f++:(k=a.qd.splice(f,1),k=Qj(h,k,0,a.qd),b.push(k))}e=yb(d,c.entries,a.S.bind(a),function(a,b){return c.entries[b]});for(h=f=0;h<c.entries.length;h++)k=c.entries[h],e[f]==k?f++:(a.qd.splice(h,0,k.ta.s),k=Qj(h,[],1,a.qd),b.push(k));return b}function Qj(a,b,c,d){return{Kg:c,index:a,object:d,Mg:b,type:"splice"}};function Rj(){this.hc=B()}Rj.prototype.Cd=function(a,b){var c=ka(a.a).toString(),d=this.hc.get(c)||null;null===d&&(d=new Sj(a),this.hc.set(c,d));d.Cd(b)};Rj.prototype.le=function(a,b){var c=ka(a.a).toString(),d=this.hc.get(c)||null;d.le(b);0<d.Lc.size||this.hc.delete(c)};function we(a,b){var c=D();b.forEach(function(a){c.add(a.getName())});var d=[];a.hc.forEach(function(a){a=a.Gc();a.context.c.some(function(a){return c.has(a.getName())})&&d.push(a)});return d}
function ue(a,b,c){b=ka(null!=b.ad?b.ad:b).toString();a=a.hc.get(b)||null;null!==a&&Tj(a,c)}function Sj(a){this.Gf=a;this.Lc=D();this.pg=[];this.Ye=null;this.Nf=new Nj(a.a,this.pg)}Sj.prototype.Cd=function(a){this.Lc.has(a)||this.Lc.add(a)};Sj.prototype.le=function(a){return this.Lc.delete(a)};Sj.prototype.Gc=function(){var a=this.Gf;return{context:a.a,ie:Wh(a)}};function Tj(a,b){var c=Pj(a.Nf,a.Ye,b);a.Ye=b;0<c.length&&a.Lc.forEach(function(a){a(c)})};function Uj(a,b){var c=a.j(sc),d=b||{},e=new of(c);a.ob(nc,e);var e=null,f=!1;null!=d.storeType?e=d.storeType:(e=ac(),e=e.$f?0:e.Jg?4:1);switch(e){case 0:e=new Ue(a,c);break;case 1:e=new $e(c);break;case 5:e=new bf(c);break;case 4:e=new kf(a,c,d.webSqlDbSize);break;case 3:e=new Je(c,d.firebase);f=!0;break;default:throw new F(300);}a.ob(mc,e);var h=new qg;a.ob(oc,h);return e.Ha(d.onUpgrade).then(function(){var b=new Bj(a);a.ob(pc,b);b=new Jj;a.ob(qc,b);b=new Rj;a.ob(rc,b);return h.Ha(c)}).then(function(){if(f){var b=
new ye(a);b.La.subscribe(b.de.bind(b))}return(new jg(a)).Ha(c)})};function Vj(a){this.h=a;this.i=a.j(sc);this.$=D(this.i.ra());this.cb=x()}m=Vj.prototype;m.exec=function(){var a=this.h.j(oc),b=this.h.j(nc),c={};this.i.ra().forEach(function(d){var f=a.get(Xe(d)).$a(),f=pf(b,f).map(function(a){return a.s});c[d.getName()]=f});var d={name:this.i.name(),version:this.i.version(),tables:c},d=new Hd(new y(-1,d),!0);return w([new H([d],[])])};m.I=l(0);m.ca=g("$");m.Nb=g("cb");m.X=function(){return ka(this)};m.getPriority=l(0);function Wj(a,b){this.h=a;this.i=a.j(sc);this.$=D(this.i.ra());this.cb=x();this.xa=b;this.La=a.j(mc);this.V=a.j(nc);this.F=a.j(oc)}m=Wj.prototype;
m.exec=function(){if(!(this.La instanceof Ue||this.La instanceof $e||this.La instanceof kf))throw new F(300);var a;a:{a=this.i.ra();for(var b=0;b<a.length;++b)if(0<this.F.get(Xe(a[b])).Oa().na){a=!1;break a}a=!0}if(!a)throw new F(110);if(this.i.name()!=this.xa.name||this.i.version()!=this.xa.version)throw new F(111);if(null==this.xa.tables)throw new F(112);return Xj(this)};m.I=l(1);m.ca=g("$");m.Nb=g("cb");m.X=function(){return ka(this)};m.getPriority=l(0);
function Xj(a){var b=new md(a.h,a.$),b=a.La.Db(a.I(),E(a.$),b),c;for(c in a.xa.tables){var d=a.i.table(c),e=a.xa.tables[c].map(function(a){return d.vb(a)}),f=b.H(c,d.Eb);a.V.Xb(c,e);var h=a.F.oc.get(c)||[];e.forEach(function(a){h.forEach(function(b){var c=a.Gb(b.getName());b.add(c,a.id())})});f.put(e)}return b.ia()};function Yj(a,b){this.h=a;this.La=a.j(mc);this.Fa=a.j(qc);this.Ib=a.j(rc);this.$=D(b);this.Ra=new md(this.h,this.$);this.cb=x();this.Ac=x();this.ye=x()}m=Yj.prototype;m.exec=function(){this.ye.resolve();return this.Ac.ha};m.I=l(1);m.ca=g("$");m.Nb=g("cb");m.X=function(){return ka(this)};m.getPriority=l(2);function Zj(a){xe(a.Fa,a);return a.ye.ha}
function ak(a,b){var c=b.Gc();return c.ie.jb().exec(a.Ra,c.context).then(function(a){return zd(a[0])},function(a){this.Ra.Jb();var b=new lb(a.name);this.Ac.reject(b);throw a;}.bind(a))}m.ia=function(){this.La.Db(this.I(),E(this.$),this.Ra).ia().then(function(){this.Pc();this.Ac.resolve()}.bind(this),function(a){this.Ra.Jb();this.Ac.reject(a)}.bind(this));return this.cb.ha};m.Jb=function(){this.Ra.Jb();this.Ac.resolve();return this.cb.ha};
m.Pc=function(){var a=we(this.Ib,this.$);0!=a.length&&(a=new qe(this.h,a),xe(this.Fa,a))};function bk(a){this.h=a;this.Fa=a.j(qc);this.Tc=null;this.Ua=0;0==ck.size&&(ck.set(0,D([1,4])),ck.set(1,D([2])),ck.set(2,D([3,5,6])),ck.set(3,D([2,7])),ck.set(4,D([7])),ck.set(5,D([7])),ck.set(6,D([7])))}r("lf.proc.Transaction",bk);var ck=B();function dk(a,b){var c=ck.get(a.Ua)||null;if(null===c||!c.has(b))throw new F(107,a.Ua,b);a.Ua=b}
bk.prototype.exec=function(a){dk(this,4);var b=[];try{a.forEach(function(a){a.gb();b.push(a.Gc())},this)}catch(c){return dk(this,7),db(c)}a=new zh(this.h,b);return xe(this.Fa,a).then(function(a){dk(this,7);return a.map(function(a){return zd(a)})}.bind(this),function(a){dk(this,7);throw a;}.bind(this))};bk.prototype.exec=bk.prototype.exec;bk.prototype.Ef=function(a){dk(this,1);this.Tc=new Yj(this.h,a);return Zj(this.Tc).then(function(){dk(this,2)}.bind(this))};bk.prototype.begin=bk.prototype.Ef;
bk.prototype.Df=function(a){dk(this,3);return ak(this.Tc,a).then(function(a){dk(this,2);return a}.bind(this),function(a){dk(this,7);throw a;}.bind(this))};bk.prototype.attach=bk.prototype.Df;bk.prototype.ia=function(){dk(this,5);return this.Tc.ia().then(function(){dk(this,7)}.bind(this))};bk.prototype.commit=bk.prototype.ia;bk.prototype.Jb=function(){dk(this,6);return this.Tc.Jb().then(function(){dk(this,7)}.bind(this))};bk.prototype.rollback=bk.prototype.Jb;function X(a){this.h=a;this.i=a.j(sc);this.Ud=!1}r("lf.proc.Database",X);X.prototype.Ha=function(a){this.h.ob(sc,this.i);return Uj(this.h,a).then(function(){this.Ud=!0;this.Fa=this.h.j(qc);return this}.bind(this))};X.prototype.init=X.prototype.Ha;X.prototype.xb=g("i");X.prototype.getSchema=X.prototype.xb;function ek(a){if(!a.Ud)throw new F(2);}X.prototype.select=function(a){ek(this);return new W(this.h,1!=arguments.length||null!=arguments[0]?Array.prototype.slice.call(arguments):[])};
X.prototype.select=X.prototype.select;X.prototype.zb=function(){ek(this);return new Yh(this.h)};X.prototype.insert=X.prototype.zb;X.prototype.Vd=function(){ek(this);return new Yh(this.h,!0)};X.prototype.insertOrReplace=X.prototype.Vd;X.prototype.update=function(a){ek(this);return new hi(this.h,a)};X.prototype.update=X.prototype.update;X.prototype.delete=function(){ek(this);return new Xh(this.h)};X.prototype["delete"]=X.prototype.delete;
X.prototype.observe=function(a,b){ek(this);this.h.j(rc).Cd(a,b)};X.prototype.observe=X.prototype.observe;X.prototype.unobserve=function(a,b){ek(this);this.h.j(rc).le(a,b)};X.prototype.unobserve=X.prototype.unobserve;X.prototype.Lf=function(){ek(this);return new bk(this.h)};X.prototype.createTransaction=X.prototype.Lf;X.prototype.close=function(){try{this.h.j(mc).close()}catch(a){}this.h.clear();this.Ud=!1};X.prototype.close=X.prototype.close;
X.prototype.Tf=function(){ek(this);var a=new Vj(this.h);return xe(this.Fa,a).then(function(a){return zd(a[0])[0]})};X.prototype["export"]=X.prototype.Tf;X.prototype.import=function(a){ek(this);a=new Wj(this.h,a);return xe(this.Fa,a).then(l(null))};X.prototype["import"]=X.prototype.import;function Y(a,b,c,d,e,f){this.U=a;this.w=b;this.Ue=c;this.Se=d;this.wf=e;this.fb=f||null}r("lf.schema.BaseColumn",Y);m=Y.prototype;m.getName=g("w");m.m=function(){return K(this.U)+"."+this.w};m.toString=function(){return this.m()};m.H=g("U");m.I=g("wf");Y.prototype.getType=Y.prototype.I;Y.prototype.Za=g("fb");Y.prototype.Aa=function(){null==this.pa&&(this.pa=[],this.H().Aa().forEach(function(a){-1!=a.f.map(function(a){return a.aa.getName()}).indexOf(this.w)&&this.pa.push(a)},this));return this.pa};
Y.prototype.za=function(){if(!q(this.fa)){var a=this.Aa().filter(function(a){return 1!=a.f.length?!1:a.f[0].aa.getName()==this.getName()},this);this.fa=0<a.length?a[0]:null}return this.fa};Y.prototype.kc=g("Se");Y.prototype.isNullable=Y.prototype.kc;Y.prototype.Ic=g("Ue");Y.prototype.Qa=function(a){return Kg(this,a,"eq")};Y.prototype.eq=Y.prototype.Qa;Y.prototype.af=function(a){return Kg(this,a,"neq")};Y.prototype.neq=Y.prototype.af;Y.prototype.$d=function(a){return Kg(this,a,"lt")};
Y.prototype.lt=Y.prototype.$d;Y.prototype.jg=function(a){return Kg(this,a,"lte")};Y.prototype.lte=Y.prototype.jg;Y.prototype.Vf=function(a){return Kg(this,a,"gt")};Y.prototype.gt=Y.prototype.Vf;Y.prototype.Wf=function(a){return Kg(this,a,"gte")};Y.prototype.gte=Y.prototype.Wf;Y.prototype.match=function(a){return Kg(this,a,"match")};Y.prototype.match=Y.prototype.match;Y.prototype.Ff=function(a,b){return Kg(this,[a,b],"between")};Y.prototype.between=Y.prototype.Ff;
Y.prototype.Xf=function(a){return Kg(this,a,"in")};Y.prototype["in"]=Y.prototype.Xf;Y.prototype.eg=function(){return this.Qa(null)};Y.prototype.isNull=Y.prototype.eg;Y.prototype.dg=function(){return this.af(null)};Y.prototype.isNotNull=Y.prototype.dg;Y.prototype.tc=function(a){return new Y(this.U,this.w,this.Ue,this.Se,this.wf,a)};Y.prototype.as=Y.prototype.tc;function fk(){this.xd=B()}var gk;fk.prototype.clear=function(){this.xd.clear()};fk.prototype.clear=fk.prototype.clear;fk.prototype.ob=function(a,b){this.xd.set(a.toString(),b);return b};fk.prototype.registerService=fk.prototype.ob;fk.prototype.j=function(a){var b=this.xd.get(a.toString())||null;if(null===b)throw new F(7,a.toString());return b};fk.prototype.getService=fk.prototype.j;fk.prototype.Yd=function(a){return this.xd.has(a.toString())};fk.prototype.isRegistered=fk.prototype.Yd;function hk(a){this.i=a;this.Hd=new Uc;this.me=new Uc;this.cf=new Uc;this.He=B();this.g=new Uc;this.De=new Uc;this.kf=new Uc;this.Ge=new Uc;ik(this)}function ik(a){a.i.ra().forEach(function(a){var c=a.getName();a.Fb().Sd().forEach(function(d){this.cf.set(c,this.i.table(d.Sa));this.g.set(d.Sa,a);0==d.action?(this.me.set(d.Sa,d),this.kf.set(d.Sa,a)):(this.Hd.set(d.Sa,d),this.De.set(d.Sa,a));this.He.set(a.getName()+"."+d.hb,d.Sa);this.Ge.set(d.Sa+"."+d.mc,a.getName())},this)},a)}
function cd(a,b,c){if(null!=c)return 1==c?a.Hd.get(b):a.me.get(b);c=a.Hd.get(b);a=a.me.get(b);return null===c&&null===a?null:(c||[]).concat(a||[])}function Fh(a,b){var c=b.get(a);return null===c?[]:c}function Hh(a,b){var c=D();b.forEach(function(a){(a=this.He.get(a))&&c.add(a)},a);return E(c).map(function(a){return this.i.table(a)},a)}function Dh(a,b,c){return null!=c?0==c?Fh(b,a.kf):Fh(b,a.De):Fh(b,a.g)}
function Ih(a,b){var c=D();b.forEach(function(a){(a=this.Ge.get(a))&&a.forEach(function(a){c.add(a)})},a);return E(c).map(function(a){return this.i.table(a)},a)};function jk(a,b,c){this.wg=a;this.og=b;this.Uf=c}r("lf.schema.Constraint",jk);jk.prototype.hd=g("wg");jk.prototype.getPrimaryKey=jk.prototype.hd;jk.prototype.Sd=g("Uf");jk.prototype.getForeignKeys=jk.prototype.Sd;function kk(a,b,c){var d=a.ref.split(".");if(2!=d.length)throw new F(540,c);this.Fe=b;this.hb=a.local;this.Sa=d[0];this.mc=d[1];this.name=b+"."+c;this.action=a.action;this.timing=a.timing};function Z(a){lk(a);this.Od=Md.Ec();this.w=a;this.K=B();this.zd=D();this.pc=D();this.pd=D();this.Ca=null;this.pa=B();this.td=!1;this.wb=[]}r("lf.schema.TableBuilder",Z);function mk(a){this.name=a.name;this.mb=a.order;this.autoIncrement=a.autoIncrement}var nk=D([0,6]);function lk(a){if(!/^[A-Za-z_][A-Za-z0-9_]*$/.test(a))throw new F(502,a);}function ok(a,b){if(b==a.w)throw new F(546,b);if(a.K.has(b)||a.pa.has(b)||a.pc.has(b))throw new F(503,a.w+"."+b);}
function pk(a,b){var c=!1;b.forEach(function(a){var b=this.K.get(a.name);c=c||a.autoIncrement;if(a.autoIncrement&&3!=b)throw new F(504);},a);if(c&&1<b.length)throw new F(505);}function qk(a){if(null!==a.Ca){var b=a.pa.get(a.Ca).map(function(a){return a.name}),c=0;if(a.wb.some(function(a,e){c=e;return-1!=b.indexOf(a.hb)},a))throw new F(543,a.wb[c].name);}}
function rk(a){if(null!==a.Ca){var b=function(a){return a.name},c=JSON.stringify(a.pa.get(a.Ca).map(b));a.pa.forEach(function(a,e){if(e!=this.Ca){var f=a.map(b);if(JSON.stringify(f)==c)throw new F(544,this.w+"."+e);}},a)}}function sk(a){null===a.Ca||a.pa.get(a.Ca).forEach(function(a){if(this.pd.has(a.name))throw new F(545,this.w+"."+a.name);},a)}Z.prototype.yf=function(a,b){lk(a);ok(this,a);this.K.set(a,b);nk.has(b)&&this.Ae([a]);return this};Z.prototype.addColumn=Z.prototype.yf;
Z.prototype.Af=function(a,b){var c=this.w;this.Ca="pk"+(c[0].toUpperCase()+c.substring(1));lk(this.Ca);ok(this,this.Ca);c=tk(this,a,!0,void 0,b);pk(this,c);1==c.length&&this.zd.add(c[0].name);this.pc.add(this.Ca);this.pa.set(this.Ca,c);return this};Z.prototype.addPrimaryKey=Z.prototype.Af;
Z.prototype.zf=function(a,b){lk(a);ok(this,a);var c=new kk(b,this.w,a);q(c.action)||(c.action=0);q(c.timing)||(c.timing=0);if(1==c.action&&1==c.timing)throw new F(506);if(!this.K.has(c.hb))throw new F(540,a);this.wb.push(c);this.ze(a,[c.hb],this.zd.has(c.hb));return this};Z.prototype.addForeignKey=Z.prototype.zf;Z.prototype.Bf=function(a,b){lk(a);ok(this,a);var c=tk(this,b,!0);1==c.length&&(this.zd.add(c[0].name),uk(this,c[0].name));this.pa.set(a,c);this.pc.add(a);return this};
Z.prototype.addUnique=Z.prototype.Bf;function uk(a,b){a.wb.forEach(function(a){a.hb==b&&this.pc.add(a.name.split(".")[1])},a)}Z.prototype.Ae=function(a){tk(this,a,!1).forEach(function(a){this.pd.add(a.name)},this);return this};Z.prototype.addNullable=Z.prototype.Ae;Z.prototype.ze=function(a,b,c,d){lk(a);ok(this,a);b=tk(this,b,!0,d);c&&this.pc.add(a);this.pa.set(a,b);return this};Z.prototype.addIndex=Z.prototype.ze;Z.prototype.Bb=ba("td");Z.prototype.persistentIndex=Z.prototype.Bb;
Z.prototype.xb=function(){qk(this);rk(this);sk(this);return new (vk(this))};Z.prototype.getSchema=Z.prototype.xb;function wk(a){return a.wb}function tk(a,b,c,d,e){var f=b,f="string"==typeof b[0]?b.map(function(a){return new mk({name:a,order:null!=d?d:1,autoIncrement:e||!1})}):b.map(function(a){return new mk(a)});f.forEach(function(a){if(!this.K.has(a.name))throw new F(508,this.w,a.name);if(c){var b=this.K.get(a.name);if(0==b||6==b)throw new F(509,this.w,a.name);}},a);return f}
function vk(a){function b(){function b(c){return a.pa.get(c).map(function(a){return{aa:this[a.name],mb:a.mb,autoIncrement:a.autoIncrement}},this)}var d=cc(a.K).map(function(b){this[b]=new Y(this,b,a.zd.has(b),a.pd.has(b),a.K.get(b));return this[b]},this),e=cc(a.pa).map(function(d){return new Mg(a.w,d,a.pc.has(d),b.call(this,d))},this);S.call(this,a.w,d,e,a.td);var f=null===a.Ca?null:new Mg(a.w,a.Ca,!0,b.call(this,a.Ca)),h=d.filter(function(b){return!a.pd.has(b.getName())});this.If=new jk(f,h,a.wb);
this.nf=xk(a,d,e)}t(b,S);b.prototype.vb=function(a){return new this.nf(rb++,a)};b.prototype.createRow=b.prototype.vb;b.prototype.Eb=function(a){var b={};this.ib().forEach(function(e){var f=e.getName();e=e.I();var h=a.value[f];if(0==e)if(e=h,null!=e&&""!=e){0!=e.length%2&&(e="0"+e);for(var h=new ArrayBuffer(e.length/2),k=new Uint8Array(h),n=0,A=0;n<e.length;n+=2)k[A++]=parseInt(e.substr(n,2),16);e=h}else e=null;else e=2==e?null!=h?new Date(h):null:h;b[f]=e},this);return new this.nf(a.id,b)};b.prototype.deserializeRow=
b.prototype.Eb;b.prototype.Fb=g("If");b.prototype.getConstraint=b.prototype.Fb;return b}
function xk(a,b,c){function d(a,d){this.K=b;this.pa=c;y.call(this,a,d)}t(d,y);d.prototype.Je=function(){var a={};this.K.forEach(function(b){a[b.getName()]=b.kc()?null:Tc[b.I()]});return a};d.prototype.uf=function(){var a={};this.K.forEach(function(b){var c=b.getName();b=b.I();var d=this.s[c];a[c]=0==b?null!=d?vb(d):null:2==b?null!=d?d.getTime():null:6==b?null!=d?d:null:d},this);return a};var e=function(a){var b=this.K.get(a.getName()),c=this.Od.Ve.get(b)||null;return function(b){return c(b[a.getName()])}}.bind(a),
f=function(a){var b=a.map(function(a){return e(a.aa)});return function(a){return b.map(function(b){return b(a)})}}.bind(a),h={};c.forEach(function(a){var b=a.m();a=1==a.f.length?e(a.f[0].aa):f(a.f);h[b]=a});d.prototype.Gb=function(a){return-1!=a.indexOf("#")?this.id():h.hasOwnProperty(a)?h[a](this.s):null};return d};function yk(a,b){this.i=new zk(a,b);this.sb=B();this.Bc=!1}r("lf.schema.Builder",yk);function Ak(a,b){b.wb.forEach(function(a){var d=a.Sa;if(!this.sb.has(d))throw new F(536,a.name);var d=this.sb.get(d).xb(),e=a.mc;if(!d.hasOwnProperty(e))throw new F(537,a.name);if(b.xb()[a.hb].I()!=d[e].I())throw new F(538,a.name);if(!d[e].Ic())throw new F(539,a.name);},a)}
yk.prototype.Hf=function(a){a.wb.forEach(function(a){wk(this.sb.get(a.Sa)).forEach(function(c){if(c.hb==a.mc)throw new F(534,a.name);},this)},this)};function Bk(a){a.Bc||(a.sb.forEach(function(a){Ak(this,a);a=a.xb();this.i.M.set(a.getName(),a)},a),C(a.sb).forEach(a.Hf,a),Ck(a),a.sb.clear(),a.Bc=!0)}function Dk(a,b,c){b.xe||(b.xe=!0,b.ee=!0,b.Ke.forEach(function(a){a=c.get(a);if(!a.xe)Dk(this,a,c);else if(a.ee&&b!=a)throw new F(533);},a));b.ee=!1}
function Ck(a){var b=B();a.i.M.forEach(function(a,d){b.set(d,new Ek(d))},a);a.sb.forEach(function(a,d){a.wb.forEach(function(a){b.get(a.Sa).Ke.add(d)})});C(b).forEach(function(a){Dk(this,a,b)},a)}function Ek(a){this.ee=this.xe=!1;this.Ke=D();this.Rc=a}yk.prototype.xb=function(){this.Bc||Bk(this);return this.i};yk.prototype.getSchema=yk.prototype.xb;yk.prototype.Me=function(){var a=new lc("ns_"+this.i.name()),b;gk||(gk=new fk);b=gk;var c=null;b.Yd(a)?c=b.j(a):(c=new fk,b.ob(a,c));return c};
yk.prototype.getGlobal=yk.prototype.Me;yk.prototype.connect=function(a){var b=this.Me();b.Yd(sc)||b.ob(sc,this.xb());return(new X(b)).Ha(a)};yk.prototype.connect=yk.prototype.connect;yk.prototype.Kf=function(a){if(this.sb.has(a))throw new F(503,a);if(this.Bc)throw new F(535);this.sb.set(a,new Z(a));return this.sb.get(a)};yk.prototype.createTable=yk.prototype.Kf;yk.prototype.re=function(a){if(this.Bc)throw new F(535);this.i.re(a);return this};yk.prototype.setPragma=yk.prototype.re;
function zk(a,b){this.w=a;this.Pa=b;this.M=B();this.gf={Of:!1}}r("lf.schema.DatabaseSchema",zk);zk.prototype.name=g("w");zk.prototype.name=zk.prototype.name;zk.prototype.version=g("Pa");zk.prototype.version=zk.prototype.version;zk.prototype.ra=function(){return C(this.M)};zk.prototype.tables=zk.prototype.ra;zk.prototype.table=function(a){if(!this.M.has(a))throw new F(101,a);return this.M.get(a)};zk.prototype.table=zk.prototype.table;zk.prototype.info=function(){this.Qe||(this.Qe=new hk(this));return this.Qe};
zk.prototype.ff=g("gf");zk.prototype.pragma=zk.prototype.ff;zk.prototype.re=ba("gf");r("lf.schema.create",function(a,b){return new yk(a,b)});v.prototype.catch=v.prototype.ue;v.prototype["catch"]=v.prototype.catch;
try{if(module){module.exports=lf;}}catch(e){}}.bind(window))()
//# sourceMappingURL=lovefield.min.js.map
