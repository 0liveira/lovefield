(function(){'use strict';function aa(){return function(){}}function ba(a){return function(b){this[a]=b}}function f(a){return function(){return this[a]}}function l(a){return function(){return a}}var m,n=this;function q(a){return void 0!==a}function ca(){}
function da(a){var b=typeof a;if("object"==b)if(a){if(a instanceof Array)return"array";if(a instanceof Object)return b;var c=Object.prototype.toString.call(a);if("[object Window]"==c)return"object";if("[object Array]"==c||"number"==typeof a.length&&"undefined"!=typeof a.splice&&"undefined"!=typeof a.propertyIsEnumerable&&!a.propertyIsEnumerable("splice"))return"array";if("[object Function]"==c||"undefined"!=typeof a.call&&"undefined"!=typeof a.propertyIsEnumerable&&!a.propertyIsEnumerable("call"))return"function"}else return"null";
else if("function"==b&&"undefined"==typeof a.call)return"object";return b}function ea(a){return null===a}function fa(a){return null!=a}function ha(a){var b=da(a);return"array"==b||"object"==b&&"number"==typeof a.length}function ia(a){return"string"==typeof a}function ja(a){return"function"==da(a)}function la(a){return a[ma]||(a[ma]=++na)}var ma="closure_uid_"+(1E9*Math.random()>>>0),na=0;function oa(a,b,c){return a.call.apply(a.bind,arguments)}
function pa(a,b,c){if(!a)throw Error();if(2<arguments.length){var d=Array.prototype.slice.call(arguments,2);return function(){var c=Array.prototype.slice.call(arguments);Array.prototype.unshift.apply(c,d);return a.apply(b,c)}}return function(){return a.apply(b,arguments)}}function qa(a,b,c){qa=Function.prototype.bind&&-1!=Function.prototype.bind.toString().indexOf("native code")?oa:pa;return qa.apply(null,arguments)}
function ra(a,b){var c=Array.prototype.slice.call(arguments,1);return function(){var b=c.slice();b.push.apply(b,arguments);return a.apply(this,b)}}function r(a,b){var c=a.split("."),d=n;c[0]in d||!d.execScript||d.execScript("var "+c[0]);for(var e;c.length&&(e=c.shift());)!c.length&&q(b)?d[e]=b:d=d[e]?d[e]:d[e]={}}
function t(a,b){function c(){}c.prototype=b.prototype;a.Eb=b.prototype;a.prototype=new c;a.prototype.constructor=a;a.vg=function(a,c,g){for(var h=Array(arguments.length-2),k=2;k<arguments.length;k++)h[k-2]=arguments[k];return b.prototype[c].apply(a,h)}};function sa(a){if(Error.captureStackTrace)Error.captureStackTrace(this,sa);else{var b=Error().stack;b&&(this.stack=b)}a&&(this.message=String(a))}t(sa,Error);sa.prototype.name="CustomError";function ta(a,b,c){this.Wf=c;this.Bf=a;this.mg=b;this.pd=0;this.kd=null}ta.prototype.get=function(){var a;0<this.pd?(this.pd--,a=this.kd,this.kd=a.next,a.next=null):a=this.Bf();return a};ta.prototype.put=function(a){this.mg(a);this.pd<this.Wf&&(this.pd++,a.next=this.kd,this.kd=a)};var ua=Array.prototype,va=ua.indexOf?function(a,b,c){return ua.indexOf.call(a,b,c)}:function(a,b,c){c=null==c?0:0>c?Math.max(0,a.length+c):c;if(ia(a))return ia(b)&&1==b.length?a.indexOf(b,c):-1;for(;c<a.length;c++)if(c in a&&a[c]===b)return c;return-1},wa=ua.forEach?function(a,b,c){ua.forEach.call(a,b,c)}:function(a,b,c){for(var d=a.length,e=ia(a)?a.split(""):a,g=0;g<d;g++)g in e&&b.call(c,e[g],g,a)},xa=ua.map?function(a,b,c){return ua.map.call(a,b,c)}:function(a,b,c){for(var d=a.length,e=Array(d),
g=ia(a)?a.split(""):a,h=0;h<d;h++)h in g&&(e[h]=b.call(c,g[h],h,a));return e},ya=ua.reduce?function(a,b,c,d){d&&(b=qa(b,d));return ua.reduce.call(a,b,c)}:function(a,b,c,d){var e=c;wa(a,function(c,h){e=b.call(d,e,c,h,a)});return e},za=ua.some?function(a,b,c){return ua.some.call(a,b,c)}:function(a,b,c){for(var d=a.length,e=ia(a)?a.split(""):a,g=0;g<d;g++)if(g in e&&b.call(c,e[g],g,a))return!0;return!1};function Aa(a,b,c){return 2>=arguments.length?ua.slice.call(a,b):ua.slice.call(a,b,c)}
function Ba(a){for(var b=[],c=0;c<a;c++)b[c]=0;return b}function Ca(a){for(var b=[],c=0;c<arguments.length;c++){var d=arguments[c];if("array"==da(d))for(var e=0;e<d.length;e+=8192)for(var g=Ca.apply(null,Aa(d,e,e+8192)),h=0;h<g.length;h++)b.push(g[h]);else b.push(d)}return b};function Da(a){var b=[],c=0,d;for(d in a)b[c++]=a[d];return b};var Ea;a:{var Fa=n.navigator;if(Fa){var Ga=Fa.userAgent;if(Ga){Ea=Ga;break a}}Ea=""}function u(a){return-1!=Ea.indexOf(a)};function Ha(){return u("Opera")||u("OPR")}function Ia(){return(u("Chrome")||u("CriOS"))&&!Ha()&&!u("Edge")};function Ja(a){n.setTimeout(function(){throw a;},0)}var Ka;
function La(){var a=n.MessageChannel;"undefined"===typeof a&&"undefined"!==typeof window&&window.postMessage&&window.addEventListener&&!u("Presto")&&(a=function(){var a=document.createElement("IFRAME");a.style.display="none";a.src="";document.documentElement.appendChild(a);var b=a.contentWindow,a=b.document;a.open();a.write("");a.close();var c="callImmediate"+Math.random(),d="file:"==b.location.protocol?"*":b.location.protocol+"//"+b.location.host,a=qa(function(a){if(("*"==d||a.origin==d)&&a.data==
c)this.port1.onmessage()},this);b.addEventListener("message",a,!1);this.port1={};this.port2={postMessage:function(){b.postMessage(c,d)}}});if("undefined"!==typeof a&&!u("Trident")&&!u("MSIE")){var b=new a,c={},d=c;b.port1.onmessage=function(){if(q(c.next)){c=c.next;var a=c.ue;c.ue=null;a()}};return function(a){d.next={ue:a};d=d.next;b.port2.postMessage(0)}}return"undefined"!==typeof document&&"onreadystatechange"in document.createElement("SCRIPT")?function(a){var b=document.createElement("SCRIPT");
b.onreadystatechange=function(){b.onreadystatechange=null;b.parentNode.removeChild(b);b=null;a();a=null};document.documentElement.appendChild(b)}:function(a){n.setTimeout(a,0)}};function Ma(){this.xd=this.ic=null}var Oa=new ta(function(){return new Na},function(a){a.reset()},100);Ma.prototype.add=function(a,b){var c=Oa.get();c.set(a,b);this.xd?this.xd.next=c:this.ic=c;this.xd=c};Ma.prototype.remove=function(){var a=null;this.ic&&(a=this.ic,this.ic=this.ic.next,this.ic||(this.xd=null),a.next=null);return a};function Na(){this.next=this.scope=this.Kd=null}Na.prototype.set=function(a,b){this.Kd=a;this.scope=b;this.next=null};
Na.prototype.reset=function(){this.next=this.scope=this.Kd=null};function Pa(a,b){Qa||Ra();Sa||(Qa(),Sa=!0);Ta.add(a,b)}var Qa;function Ra(){if(n.Promise&&n.Promise.resolve){var a=n.Promise.resolve(void 0);Qa=function(){a.then(Va)}}else Qa=function(){var a=Va;!ja(n.setImmediate)||n.Window&&n.Window.prototype&&n.Window.prototype.setImmediate==n.setImmediate?(Ka||(Ka=La()),Ka(a)):n.setImmediate(a)}}var Sa=!1,Ta=new Ma;function Va(){for(var a=null;a=Ta.remove();){try{a.Kd.call(a.scope)}catch(b){Ja(b)}Oa.put(a)}Sa=!1};function v(a,b){this.Ra=0;this.af=void 0;this.Zc=this.$b=this.C=null;this.jd=this.Jd=!1;if(a!=ca)try{var c=this;a.call(b,function(a){Wa(c,2,a)},function(a){Wa(c,3,a)})}catch(d){Wa(this,3,d)}}function Xa(){this.next=this.context=this.gc=this.Ic=this.child=null;this.Ad=!1}Xa.prototype.reset=function(){this.context=this.gc=this.Ic=this.child=null;this.Ad=!1};var Ya=new ta(function(){return new Xa},function(a){a.reset()},100);function Za(a,b,c){var d=Ya.get();d.Ic=a;d.gc=b;d.context=c;return d}
function w(a){if(a instanceof v)return a;var b=new v(ca);Wa(b,2,a);return b}function $a(a){return new v(function(b,c){c(a)})}function ab(a,b,c){bb(a,b,c,null)||Pa(ra(b,a))}function cb(a){return new v(function(b,c){var d=a.length,e=[];if(d)for(var g=function(a,c){d--;e[a]=c;0==d&&b(e)},h=function(a){c(a)},k=0,p;k<a.length;k++)p=a[k],ab(p,ra(g,k),h);else b(e)})}function x(){var a,b,c=new v(function(c,e){a=c;b=e});return new db(c,a,b)}
v.prototype.then=function(a,b,c){return eb(this,ja(a)?a:null,ja(b)?b:null,c)};v.prototype.then=v.prototype.then;v.prototype.$goog_Thenable=!0;function fb(a,b,c){eb(a,null,b,c)}function gb(a,b){a.$b||2!=a.Ra&&3!=a.Ra||hb(a);a.Zc?a.Zc.next=b:a.$b=b;a.Zc=b}
function eb(a,b,c,d){var e=Za(null,null,null);e.child=new v(function(a,h){e.Ic=b?function(c){try{var e=b.call(d,c);a(e)}catch(E){h(E)}}:a;e.gc=c?function(b){try{var e=c.call(d,b);!q(e)&&b instanceof ib?h(b):a(e)}catch(E){h(E)}}:h});e.child.C=a;gb(a,e);return e.child}v.prototype.rg=function(a){this.Ra=0;Wa(this,2,a)};v.prototype.sg=function(a){this.Ra=0;Wa(this,3,a)};
function Wa(a,b,c){0==a.Ra&&(a==c&&(b=3,c=new TypeError("Promise cannot resolve to itself")),a.Ra=1,bb(c,a.rg,a.sg,a)||(a.af=c,a.Ra=b,a.C=null,hb(a),3!=b||c instanceof ib||jb(a,c)))}function bb(a,b,c,d){if(a instanceof v)return gb(a,Za(b||ca,c||null,d)),!0;var e;if(a)try{e=!!a.$goog_Thenable}catch(g){e=!1}else e=!1;if(e)return a.then(b,c,d),!0;e=typeof a;if("object"==e&&null!=a||"function"==e)try{var h=a.then;if(ja(h))return kb(a,h,b,c,d),!0}catch(k){return c.call(d,k),!0}return!1}
function kb(a,b,c,d,e){function g(a){k||(k=!0,d.call(e,a))}function h(a){k||(k=!0,c.call(e,a))}var k=!1;try{b.call(a,h,g)}catch(p){g(p)}}function hb(a){a.Jd||(a.Jd=!0,Pa(a.Gf,a))}function lb(a){var b=null;a.$b&&(b=a.$b,a.$b=b.next,b.next=null);a.$b||(a.Zc=null);return b}
v.prototype.Gf=function(){for(var a=null;a=lb(this);){var b=this.Ra,c=this.af;if(3==b&&a.gc&&!a.Ad)for(var d=void 0,d=this;d&&d.jd;d=d.C)d.jd=!1;if(a.child)a.child.C=null,mb(a,b,c);else try{a.Ad?a.Ic.call(a.context):mb(a,b,c)}catch(e){nb.call(null,e)}Ya.put(a)}this.Jd=!1};function mb(a,b,c){2==b?a.Ic.call(a.context,c):a.gc&&a.gc.call(a.context,c)}function jb(a,b){a.jd=!0;Pa(function(){a.jd&&nb.call(null,b)})}var nb=Ja;function ib(a){sa.call(this,a)}t(ib,sa);ib.prototype.name="cancel";
function db(a,b,c){this.ha=a;this.resolve=b;this.reject=c};/*

 Copyright 2014 The Lovefield Project Authors. All Rights Reserved.

 Licensed under the Apache License, Version 2.0 (the "License");
 you may not use this file except in compliance with the License.
 You may obtain a copy of the License at

     http://www.apache.org/licenses/LICENSE-2.0

 Unless required by applicable law or agreed to in writing, software
 distributed under the License is distributed on an "AS IS" BASIS,
 WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 See the License for the specific language governing permissions and
 limitations under the License.
*/
function y(a,b){this.na=a;this.o=b||this.ze()}var ob=0;m=y.prototype;m.id=f("na");m.ze=function(){return{}};m.jf=f("o");m.Ga=function(){return{id:this.na,value:this.jf()}};m.Nb=function(a){return"#"==a.substr(-1)?this.na:null};function pb(a){return new y(a.id,a.value)}function qb(a){return new y(ob++,a||{})}function rb(a){if(null==a)return null;a=new Uint8Array(a);for(var b="",c=0;c<a.length;++c)var d=a[c].toString(16),b=b+(2>d.length?"0"+d:d);return b};function sb(a){this.type=a}function tb(a){y.call(this,-1,a)}t(tb,y);function ub(a,b,c,d){c=c||function(a,b){return a==b};d=d||function(b){return a[b]};for(var e=a.length,g=b.length,h=[],k=0;k<e+1;k++)h[k]=[],h[k][0]=0;for(var p=0;p<g+1;p++)h[0][p]=0;for(k=1;k<=e;k++)for(p=1;p<=g;p++)c(a[k-1],b[p-1])?h[k][p]=h[k-1][p-1]+1:h[k][p]=Math.max(h[k-1][p],h[k][p-1]);for(var E=[],k=e,p=g;0<k&&0<p;)c(a[k-1],b[p-1])?(E.unshift(d(k-1,p-1)),k--,p--):h[k-1][p]>h[k][p-1]?k--:p--;return E}function vb(a){return ya(arguments,function(a,c){return a+c},0)}
function wb(a){return vb.apply(null,arguments)/arguments.length}function xb(a){var b=arguments.length;if(2>b)return 0;var c=wb.apply(null,arguments);return vb.apply(null,xa(arguments,function(a){return Math.pow(a-c,2)}))/(b-1)}function yb(a){return Math.sqrt(xb.apply(null,arguments))};var zb="StopIteration"in n?n.StopIteration:{message:"StopIteration",stack:""};function Ab(){}Ab.prototype.next=function(){throw zb;};Ab.prototype.jc=function(){return this};function Bb(a){if(a instanceof Ab)return a;if("function"==typeof a.jc)return a.jc(!1);if(ha(a)){var b=0,c=new Ab;c.next=function(){for(;;){if(b>=a.length)throw zb;if(b in a)return a[b++];b++}};return c}throw Error("Not implemented");}
function Cb(a,b){if(ha(a))try{wa(a,b,void 0)}catch(c){if(c!==zb)throw c;}else{a=Bb(a);try{for(;;)b.call(void 0,a.next(),void 0,a)}catch(d){if(d!==zb)throw d;}}}function Db(a){if(za(arguments,function(a){return!a.length})||!arguments.length)return new Ab;var b=new Ab,c=arguments,d=Ba(c.length);b.next=function(){if(d){for(var a=xa(d,function(a,b){return c[b][a]}),b=d.length-1;0<=b;b--){if(d[b]<c[b].length-1){d[b]++;break}if(0==b){d=null;break}d[b]=0}return a}throw zb;};return b};function Eb(a,b){this.m={};this.b=[];this.La=this.xb=0;var c=arguments.length;if(1<c){if(c%2)throw Error("Uneven number of arguments");for(var d=0;d<c;d+=2)this.set(arguments[d],arguments[d+1])}else a&&this.addAll(a)}m=Eb.prototype;m.wc=f("xb");m.ta=function(){Fb(this);for(var a=[],b=0;b<this.b.length;b++)a.push(this.m[this.b[b]]);return a};function Gb(a){Fb(a);return a.b.concat()}m.Ia=function(a){return Hb(this.m,a)};m.md=function(){return 0==this.xb};
m.clear=function(){this.m={};this.La=this.xb=this.b.length=0};m.remove=function(a){return Hb(this.m,a)?(delete this.m[a],this.xb--,this.La++,this.b.length>2*this.xb&&Fb(this),!0):!1};function Fb(a){if(a.xb!=a.b.length){for(var b=0,c=0;b<a.b.length;){var d=a.b[b];Hb(a.m,d)&&(a.b[c++]=d);b++}a.b.length=c}if(a.xb!=a.b.length){for(var e={},c=b=0;b<a.b.length;)d=a.b[b],Hb(e,d)||(a.b[c++]=d,e[d]=1),b++;a.b.length=c}}m.get=function(a,b){return Hb(this.m,a)?this.m[a]:b};
m.set=function(a,b){Hb(this.m,a)||(this.xb++,this.b.push(a),this.La++);this.m[a]=b};m.addAll=function(a){var b;if(a instanceof Eb)b=Gb(a),a=a.ta();else{b=[];var c=0,d;for(d in a)b[c++]=d;a=Da(a)}for(c=0;c<b.length;c++)this.set(b[c],a[c])};m.forEach=function(a,b){for(var c=Gb(this),d=0;d<c.length;d++){var e=c[d],g=this.get(e);a.call(b,g,e,this)}};m.clone=function(){return new Eb(this)};
m.jc=function(a){Fb(this);var b=0,c=this.La,d=this,e=new Ab;e.next=function(){if(c!=d.La)throw Error("The map has changed since the iterator was created");if(b>=d.b.length)throw zb;var e=d.b[b++];return a?e:d.m[e]};return e};function Hb(a,b){return Object.prototype.hasOwnProperty.call(a,b)};/*

 Copyright 2015 The Lovefield Project Authors. All Rights Reserved.

 Licensed under the Apache License, Version 2.0 (the "License");
 you may not use this file except in compliance with the License.
 You may obtain a copy of the License at

     http://www.apache.org/licenses/LICENSE-2.0

 Unless required by applicable law or agreed to in writing, software
 distributed under the License is distributed on an "AS IS" BASIS,
 WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 See the License for the specific language governing permissions and
 limitations under the License.
*/
function z(){this.m=new Eb;Object.defineProperty(this,"size",{get:function(){return this.m.wc()}})}z.prototype.clear=function(){this.m.clear()};z.prototype.clear=z.prototype.clear;z.prototype.delete=function(a){return this.m.remove(a)};z.prototype["delete"]=z.prototype.delete;z.prototype.forEach=function(a,b){return this.m.forEach(a,b)};z.prototype.forEach=z.prototype.forEach;z.prototype.get=function(a){return this.m.get(a)};z.prototype.get=z.prototype.get;z.prototype.has=function(a){return this.m.Ia(a)};
z.prototype.has=z.prototype.has;z.prototype.set=function(a,b){return this.m.set(a,b)};z.prototype.set=z.prototype.set;function A(){return window.Map&&window.Map.prototype.values&&window.Map.prototype.forEach?new window.Map:new z}function Ib(a){if(a instanceof z)return Gb(a.m);var b=0,c=Array(a.size);a.forEach(function(a,e){c[b++]=e});return c}function B(a){if(a instanceof z)return a.m.ta();var b=0,c=Array(a.size);a.forEach(function(a){c[b++]=a});return c};var Jb={};r("lf.TransactionType",Jb);Jb.READ_ONLY=0;Jb.READ_WRITE=1;function Kb(a,b){this.Oa=a;this.kf=b;this.$=x()}Kb.prototype.ma=function(){try{Lb(this.Oa)}catch(a){return $a(a)}return(0==this.kf?this.mc():Mb(this)).then(function(a){this.Oa.ma();return a}.bind(this))};function Mb(a){Nb(a);Ob(a);return a.mc()}
function Nb(a){a.Oa.mb.forEach(function(a,c){var d=this.Oa.Z().get(c),d=this.J(d.getName(),d.ac.bind(d)),e=B(a.Aa).map(function(a){return a.id()});0<e.length&&fb(d.remove(e),this.Md,this);e=B(a.oa).map(function(a){return a[1]}).concat(B(a.za));fb(d.put(e),this.Md,this)},a)}function Ob(a){Pb(a.Oa).forEach(function(a){var c=this.J(a.getName(),pb),d;c.get([-1]).then(function(a){d=a;return c.remove([])}).then(function(){c.put(d);c.put(a.Ga())},this.Md.bind(this))},a)}Kb.prototype.Md=function(a){this.$.reject(a)};function Qb(a){this.ng=a}Qb.prototype.toString=f("ng");var Rb=new Qb("backstore"),Sb=new Qb("cache"),Tb=new Qb("indexstore"),Vb=new Qb("engine"),Wb=new Qb("runner"),Xb=new Qb("observerregistry"),Yb=new Qb("schema");function Zb(a){if("function"==typeof a.ta)return a.ta();if(ia(a))return a.split("");if(ha(a)){for(var b=[],c=a.length,d=0;d<c;d++)b.push(a[d]);return b}return Da(a)};function $b(a){this.m=new Eb;a&&this.addAll(a)}function ac(a){var b=typeof a;return"object"==b&&a||"function"==b?"o"+la(a):b.substr(0,1)+a}m=$b.prototype;m.wc=function(){return this.m.wc()};m.add=function(a){this.m.set(ac(a),a)};m.addAll=function(a){a=Zb(a);for(var b=a.length,c=0;c<b;c++)this.add(a[c])};m.remove=function(a){return this.m.remove(ac(a))};m.clear=function(){this.m.clear()};m.md=function(){return this.m.md()};m.contains=function(a){return this.m.Ia(ac(a))};m.ta=function(){return this.m.ta()};
m.clone=function(){return new $b(this)};m.jc=function(){return this.m.jc(!1)};var bc=Ha(),cc=u("Trident")||u("MSIE"),dc=u("Edge"),ec=u("Gecko")&&!(-1!=Ea.toLowerCase().indexOf("webkit")&&!u("Edge"))&&!(u("Trident")||u("MSIE"))&&!u("Edge"),fc=-1!=Ea.toLowerCase().indexOf("webkit")&&!u("Edge");function gc(){var a=Ea;if(ec)return/rv\:([^\);]+)(\)|;)/.exec(a);if(dc)return/Edge\/([\d\.]+)/.exec(a);if(cc)return/\b(?:MSIE|rv)[: ]([^\);]+)(\)|;)/.exec(a);if(fc)return/WebKit\/(\S+)/.exec(a)}
(function(){if(bc&&n.opera){var a=n.opera.version;return ja(a)?a():a}var a="",b=gc();b&&(a=b?b[1]:"");return cc&&(b=(b=n.document)?b.documentMode:void 0,b>parseFloat(a))?String(b):a})();!u("Android")||Ia()||u("Firefox")||Ha();Ia();var hc=u("Safari")&&!(Ia()||u("Coast")||Ha()||u("Edge")||u("Silk")||u("Android"))&&!(u("iPhone")&&!u("iPod")&&!u("iPad")||u("iPad")||u("iPod"));function ic(a){this.Tb=new $b(a);Object.defineProperty(this,"size",{get:function(){return this.Tb.wc()}})}ic.prototype.add=function(a){this.Tb.add(a)};ic.prototype.add=ic.prototype.add;ic.prototype.clear=function(){this.Tb.clear()};ic.prototype.clear=ic.prototype.clear;ic.prototype.delete=function(a){return this.Tb.remove(a)};ic.prototype["delete"]=ic.prototype.delete;ic.prototype.forEach=function(a,b){this.Tb.ta().forEach(a,b)};ic.prototype.has=function(a){return this.Tb.contains(a)};
ic.prototype.has=ic.prototype.has;function C(a){return window.Set&&window.Set.prototype.values&&window.Set.prototype.forEach&&!hc?new window.Set(a):new ic(a)}function jc(a){if(a instanceof ic)return a.Tb.ta();var b=0,c=Array(a.size);a.forEach(function(a){c[b++]=a});return c}function kc(a,b){if(b.size>a.size)return!1;var c=!0;b.forEach(function(b){c=c&&a.has(b)});return c};function lc(a,b){this.na=a;this.o=b||{}}function mc(a){var b=C();a.forEach(function(a){b.add(a>>9)});return jc(b)}lc.prototype.W=f("na");function nc(a,b){b.forEach(function(a){this.o[a.id()]=a.Ga()},a)}function oc(a,b){b.forEach(function(a){delete this.o[a]},a)}lc.prototype.Ga=function(){return{id:this.na,value:JSON.stringify(this.o)}};function pc(a){return new lc(a.id,JSON.parse(a.value))};function qc(a,b,c){this.Y=a;this.Jb=b;this.bf=c}m=qc.prototype;m.get=function(a){if(0==a.length)return this.vc();var b=this.Jb;return rc(this,a).then(function(c){return a.map(function(a){var e=c.get(a>>9);return b(e.o[a])})})};function rc(a,b){var c=A(),d=x(),e=mc(b).map(function(a){return new v(function(b,d){var e;try{e=this.Y.get(a)}catch(E){d(E);return}e.onerror=d;e.onsuccess=function(a){a=pc(a.target.result);c.set(a.W(),a);b()}},this)},a);cb(e).then(function(){d.resolve(c)});return d.ha}
m.vc=function(){return new v(function(a,b){var c=[],d;try{d=this.Y.openCursor()}catch(e){b(e);return}d.onerror=b;d.onsuccess=function(){var b=d.result;if(b){var e;e=pc(b.value).o;for(var k in e)c.push(this.Jb(e[k]));b.continue()}else a(c)}.bind(this)},this)};m.Qb=function(a){return new v(function(b,c){var d;try{d=a()}catch(e){c(e);return}d.onsuccess=b;d.onerror=c},this)};
m.put=function(a){if(0==a.length)return w();var b=A();a.forEach(function(a){var d;d=a.id()>>9;var e=b.get(d)||null;null===e&&(e=this.bf(this.Y.name,d));nc(e,[a]);b.set(d,e)},this);a=B(b).map(function(a){return this.Qb(function(){return this.Y.put(a.Ga())}.bind(this))},this);return cb(a)};
m.remove=function(a){if(0==a.length)return this.Qb(function(){return this.Y.clear()}.bind(this));var b=A();a.forEach(function(a){var d=a>>9,e=b.get(d)||null;null===e&&(e=this.bf(this.Y.name,d));oc(e,[a]);b.set(d,e)},this);a=B(b).map(function(a){return this.Qb(function(){return 0==Object.keys(a.o).length?this.Y.delete(a.W()):this.Y.put(a.Ga())}.bind(this))},this);return cb(a)};function sc(a,b,c){a=a.l(Sb);var d=[c<<9,(c+1<<9)-1];b=a.Xa(b,d[0],d[1]);c=new lc(c);nc(c,b);return c}
function tc(a,b){return new lc(b)};function uc(){};function vc(a){this.ka=a.l(Sb);this.G=a.l(Tb);this.s=a.l(Yb)}vc.prototype.update=function(a){a.forEach(function(a){wc(this,a);xc(this,a)},this)};function xc(a,b){var c=b.getName();b.Aa.forEach(function(a,b){this.ka.remove(c,b)},a);b.za.forEach(function(a){this.ka.set(c,a)},a);b.oa.forEach(function(a){this.ka.set(c,a[1])},a)}function wc(a,b){var c=a.s.table(b.getName());yc(b).forEach(function(a){zc(this,c,a)},a)}
function zc(a,b,c){var d=[];(a.G.Oc.get(b.getName())||[]).forEach(function(a){try{Ac(a,c),d.push(a)}catch(b){throw d.forEach(function(a){Ac(a,[c[1],c[0]])},this),b;}},a)}function Ac(a,b){var c=null===b[1]?void 0:b[1].Nb(a.getName()),d=null===b[0]?void 0:b[0].Nb(a.getName());if(!q(d)&&q(c))a.add(c,b[1].id());else if(q(d)&&q(c)){if(null===c||null===d){if(c==d)return}else if(0==a.nc().compare(d,c))return;a.add(c,b[1].id());a.remove(d,b[0].id())}else q(d)&&!q(c)&&a.remove(d,b[0].id())};var Bc={};r("lf.ConstraintAction",Bc);Bc.RESTRICT=0;Bc.CASCADE=1;var Cc={};r("lf.ConstraintTiming",Cc);Cc.IMMEDIATE=0;Cc.DEFERRABLE=1;var Dc={};r("lf.Order",Dc);Dc.DESC=0;Dc.ASC=1;var Ec={};r("lf.Type",Ec);Ec.ARRAY_BUFFER=0;Ec.BOOLEAN=1;Ec.DATE_TIME=2;Ec.INTEGER=3;Ec.NUMBER=4;Ec.STRING=5;Ec.OBJECT=6;var Fc={0:null,1:!1,2:Object.freeze(new Date(0)),3:0,4:0,5:"",6:null};r("lf.type.DEFAULT_VALUES",Fc);function D(a,b){this.code=a;this.message="http://sn.im/2a0j3wn?c="+a;if(1<arguments.length)for(var c=1;c<=Math.min(4,arguments.length-1);++c)this.message+="&p"+(c-1)+"="+encodeURIComponent(String(arguments[c].toString().slice(0,64)))}t(D,Error);function Gc(a){this.G=a.l(Tb);this.s=a.l(Yb);this.cd=null}function Hc(a,b,c){var d=b.Ab().ag;c.forEach(function(a){d.forEach(function(b){if(null==a.o[b.getName()])throw new D(202,b.j());},this)},a)}function Ic(a,b,c,d){b.Ab().Ld().forEach(function(a){a.timing==d&&Jc(this,a,c)},a)}function Jc(a,b,c){var d=Kc(a,b);c.forEach(function(a){if(Lc(a[0],a[1],b.name)&&(a=a[1].o[b.Gb],null!==a&&!d.Ia(a)))throw new D(203,b.name);},a)}
function Kc(a,b){null===a.cd&&(a.cd=A());var c=a.cd.get(b.name)||null;null===c&&(c=a.s.table(b.tb)[b.Jc].sa(),c=a.G.get(c.j()),a.cd.set(b.name,c));return c}function Lc(a,b,c){return(null===a?null!==b:null===b)||a.Nb(c)!=b.Nb(c)}function Mc(a,b,c,d){b=Oc(a.s.info(),b.getName());null!=b&&b.forEach(function(a){if(a.timing==d){var b=this.G.get(a.name),h=Kc(this,a);c.forEach(function(c){if(Lc(c[0],c[1],h.getName())&&b.Ia(c[0].o[a.Jc]))throw new D(203,a.name);},this)}},a)}
function Pc(a,b,c,d){0!=c.length&&(c=c.map(function(a){return[null,a]}),Ic(a,b,c,d))}function Qc(a,b,c,d){0!=c.length&&(Ic(a,b,c,d),Mc(a,b,c,d))}function Rc(a,b,c,d){0!=c.length&&(c=c.map(function(a){return[a,null]}),Mc(a,b,c,d))};function Sc(a){this.za=A();this.oa=A();this.Aa=A();this.u=a}m=Sc.prototype;m.getName=f("u");m.add=function(a){if(this.Aa.has(a.id())){var b=[this.Aa.get(a.id()),a];this.oa.set(a.id(),b);this.Aa.delete(a.id())}else this.za.set(a.id(),a)};m.modify=function(a){var b=a[1],c=a[0].id();this.za.has(c)?this.za.set(c,b):(this.oa.has(c)&&(a=[this.oa.get(a[0].id())[0],b]),this.oa.set(c,a))};
m.delete=function(a){if(this.za.has(a.id()))this.za.delete(a.id());else if(this.oa.has(a.id())){var b=this.oa.get(a.id())[0];this.oa.delete(a.id());this.Aa.set(a.id(),b)}else this.Aa.set(a.id(),a)};function yc(a){var b=[];a.za.forEach(function(a){b.push([null,a])});a.oa.forEach(function(a){b.push(a)});a.Aa.forEach(function(a){b.push([a,null])});return b}m.toString=function(){return"["+Ib(this.za).toString()+"], ["+Ib(this.oa).toString()+"], ["+Ib(this.Aa).toString()+"]"};
function Tc(a){var b=new Sc(a.u);a.za.forEach(function(a){b.delete(a)});a.Aa.forEach(function(a){b.add(a)});a.oa.forEach(function(a){b.modify([a[1],a[0]])});return b}m.md=function(){return 0==this.za.size&&0==this.Aa.size&&0==this.oa.size};function Uc(a,b){this.ja=A();b.forEach(function(a){this.ja.set(a.getName(),a)},this);this.ka=a.l(Sb);this.G=a.l(Tb);this.Ma=new Gc(a);this.ld=new vc(a);this.mb=A()}function Pb(a){var b=[];Ib(a.mb).map(function(a){return this.ja.get(a)},a).forEach(function(a){a.Cb()&&(a.Ba().forEach(function(a){b.push(this.G.get(a.j()))},this),b.push(this.G.get(a.getName()+".#")))},a);return b}m=Uc.prototype;m.Z=f("ja");
function Vc(a){var b=[];a.ja.forEach(function(a){a.Cb()&&(a.Ba().forEach(function(a){b.push(a.j())}),b.push(a.getName()+".#"))});return b}m.rb=function(a,b){Wc(this,a);Hc(this.Ma,a,b);Pc(this.Ma,a,b,0);for(var c=0;c<b.length;c++)Xc(this,a,[null,b[c]])};
function Xc(a,b,c){var d=b.getName(),e=a.mb.get(d)||new Sc(d);a.mb.set(d,e);try{zc(a.ld,b,c)}catch(g){throw g;}b=c[0];var h=c[1];null===b&&null!==h?(a.ka.set(d,h),e.add(h)):null!==b&&null!==h?(a.ka.set(d,h),e.modify(c)):null!==b&&null===h&&(a.ka.remove(d,b.id()),e.delete(b))}m.update=function(a,b){Wc(this,a);Hc(this.Ma,a,b);for(var c=0;c<b.length;c++){var d=b[c],d=[this.ka.get(d.id()),d];Qc(this.Ma,a,[d],0);Xc(this,a,d)}};
m.Od=function(a,b){Wc(this,a);Hc(this.Ma,a,b);for(var c=0;c<b.length;c++){var d=b[c],e=null,g,h=a.Ab().fd();if(null===h)g=null;else{g=this.Ma;var h=h.j(),k=d.Nb(h);g=g.G.get(h).get(k);g=0==g.length?null:g[0]}null!=g?(e=this.ka.get(g),d.na=g,Qc(this.Ma,a,[[e,d]],0)):Pc(this.Ma,a,[d],0);Xc(this,a,[e,d])}};m.remove=function(a,b){Wc(this,a);Rc(this.Ma,a,b,0);for(var c=0;c<b.length;c++)Xc(this,a,[b[c],null])};
function Lb(a){a.mb.forEach(function(a){var c=this.ja.get(a.getName());Pc(this.Ma,c,B(a.za),1);Rc(this.Ma,c,B(a.Aa),1);Qc(this.Ma,c,B(a.oa),1)},a)}m.ma=aa();m.Db=function(){var a=B(this.mb).map(function(a){return Tc(a)});this.ld.update(a)};function Wc(a,b){if(!a.ja.has(b.getName()))throw new D(106,b.getName());};function Yc(a,b,c,d){this.c=a;this.w=b;this.aa=null===this.c?!1:c;this.la=null===this.w?!1:d}Yc.prototype.toString=function(){return(this.aa?"(":"[")+(null===this.c?"unbound":this.c)+", "+(null===this.w?"unbound":this.w)+(this.la?")":"]")};function Zc(a){if(null===a.c&&null===a.w)return[];var b=null,c=null;null===a.c||(b=new Yc(null,a.c,!1,!a.aa));null===a.w||(c=new Yc(a.w,null,!a.la,!1));return[b,c].filter(function(a){return null!==a})}
Yc.prototype.reverse=function(){return new Yc(this.w,this.c,this.la,this.aa)};function $c(a,b){var c=ad(a.c,b.c,!0,a.aa,b.aa);if(0==c)return!0;var d=-1==c?a:b,c=1==c?a:b;return null===d.w||d.w>c.c||d.w==c.c&&!d.la&&!c.aa}function bd(){return new Yc(null,null,!1,!1)}function cd(a){return null===a.c&&null===a.w}function dd(a){return null!=a.c&&a.c==a.w&&!a.aa&&!a.la}
Yc.prototype.contains=function(a){var b=null===this.w||a<this.w||a==this.w&&!this.la;return(null===this.c||a>this.c||a==this.c&&!this.aa)&&b};function ad(a,b,c,d,e){function g(a){return c?a:1==a?-1:1}d=d||!1;e=e||!1;return null===a?null===b?(d?!e:e)?d?g(1):g(-1):0:g(-1):null===b?g(1):a<b?-1:a==b?(d?!e:e)?d?g(1):g(-1):0:1}function ed(a,b){var c=ad(a.c,b.c,!0,a.aa,b.aa);0==c&&(c=ad(a.w,b.w,!1,a.la,b.la));return c};function F(a,b){this.entries=a;this.K=C(b);this.Va=null}function G(a){return jc(a.K)}function fd(a){return a.entries.map(function(a){return a.ra.o})}function gd(a){return a.entries.map(function(a){return a.ra.id()})}function hd(a,b){return a.Va.get(b.j())}var id=null;function jd(){null===id&&(id=new F([],[]));return id}
function kd(a){if(0==a.length)return jd();for(var b=a.reduce(function(a,b){return a+b.entries.length},0),c=Array(b),d=0,b=a.map(function(a){var b=A();a.entries.forEach(function(a){c[d++]=a;b.set(a.id,a)});return b}),e=A(),g=0;g<c.length;g++)b.every(function(a){return a.has(c[g].id)})&&e.set(c[g].id,c[g]);return new F(B(e),jc(a[0].K))}function ld(a){if(0==a.length)return jd();var b=A();a.forEach(function(a){a.entries.forEach(function(a){b.set(a.id,a)})});return new F(B(b),jc(a[0].K))}
function md(a,b){var c=1<b.length,d=a.map(function(a){return new nd(a,c)});return new F(d,b)}function nd(a,b){this.ra=a;this.id=od++;this.Rd=b}var od=0;function H(a,b){var c=b.Wa();return null!==c&&a.ra.o.hasOwnProperty(c)?a.ra.o[c]:a.Rd?a.ra.o[I(b.J())][b.getName()]:a.ra.o[b.getName()]}function pd(a,b,c){var d=b.Wa();if(null!=d)a.ra.o[d]=c;else if(a.Rd){var d=I(b.J()),e=a.ra.o[d];null==e&&(e={},a.ra.o[d]=e);e[b.getName()]=c}else a.ra.o[b.getName()]=c}
function qd(a,b,c,d){function e(a,b){if(a.Rd){var c=a.ra.o,d;for(d in c)g[d]=c[d]}else g[b[0]]=a.ra.o}var g={};e(a,b);e(c,d);a=new y(-1,g);return new nd(a,!0)};r("lf.bind",function(a){return new rd(a)});function rd(a){this.ca=a}r("lf.Binder",rd);rd.prototype.sa=f("ca");function sd(){this.Le=td();var a=ud();this.dc=A();this.dc.set(1,vd());this.dc.set(2,wd());this.dc.set(4,a);this.dc.set(3,a);this.dc.set(5,xd())}sd.xc=function(){return sd.He?sd.He:sd.He=new sd};function yd(a,b,c){return(a.dc.get(b)||null).get(c)||null}function td(){function a(a){return a}var b=A();b.set(1,function(a){return null===a?null:a?1:0});b.set(2,function(a){return null===a?null:a.getTime()});b.set(3,a);b.set(4,a);b.set(5,a);return b}
function vd(){var a=A();a.set("eq",function(a,c){return a==c});a.set("neq",function(a,c){return a!=c});return a}
function ud(){var a=vd();a.set("between",function(a,c){return null===a||null===c[0]||null===c[1]?!1:a>=c[0]&&a<=c[1]});a.set("gte",function(a,c){return null===a||null===c?!1:a>=c});a.set("gt",function(a,c){return null===a||null===c?!1:a>c});a.set("in",function(a,c){return-1!=c.indexOf(a)});a.set("lte",function(a,c){return null===a||null===c?!1:a<=c});a.set("lt",function(a,c){return null===a||null===c?!1:a<c});return a}
function xd(){var a=ud();a.set("match",function(a,c){return null===a||null===c?!1:(new RegExp(c)).test(a)});return a}
function wd(){var a=A();a.set("between",function(a,c){return null===a||null===c[0]||null===c[1]?!1:a.getTime()>=c[0].getTime()&&a.getTime()<=c[1].getTime()});a.set("eq",function(a,c){return(null===a?-1:a.getTime())==(null===c?-1:c.getTime())});a.set("gte",function(a,c){return null===a||null===c?!1:a.getTime()>=c.getTime()});a.set("gt",function(a,c){return null===a||null===c?!1:a.getTime()>c.getTime()});a.set("in",function(a,c){return c.some(function(c){return c.getTime()==a.getTime()})});a.set("lte",
function(a,c){return null===a||null===c?!1:a.getTime()<=c.getTime()});a.set("lt",function(a,c){return null===a||null===c?!1:a.getTime()<c.getTime()});a.set("neq",function(a,c){return(null===a?-1:a.getTime())!=(null===c?-1:c.getTime())});return a};function J(){this.g=this.C=null}var zd=[];J.prototype.getParent=f("C");J.prototype.cb=function(){for(var a=this;!ea(a.getParent());)a=a.getParent();return a};function Ad(a){for(var b=0;!ea(a.getParent());)b++,a=a.getParent();return b}function K(a){return a.g||zd}function Bd(a,b){return K(a)[b]||null}function Cd(a,b,c){b.C=a;null===a.g?a.g=[b]:a.g.splice(c,0,b)}function L(a,b){b.C=a;null===a.g?a.g=[b]:a.g.push(b)}
function Dd(a,b){var c=a.g&&a.g[b];return c?(c.C=null,a.g.splice(b,1),0==a.g.length&&(a.g=null),c):null}J.prototype.removeChild=function(a){return Dd(this,K(this).indexOf(a))};function Ed(a,b,c){Bd(a,c).C=null;b.C=a;a.g[c]=b}function Fd(a,b,c){!1!==b.call(c,a)&&K(a).forEach(function(a){Fd(a,b,c)})};function Gd(){J.call(this);this.na=Hd++}t(Gd,J);var Hd=0;Gd.prototype.W=f("na");function Id(a,b,c){Gd.call(this);this.M=a;this.value=b;this.F=c;this.rc=yd(sd.xc(),this.M.L(),this.F);this.Ya=!1;this.Zb=b}t(Id,Gd);m=Id.prototype;m.Hb=function(){var a=new Id(this.M,this.value,this.F);a.Zb=this.Zb;a.vd(this.Ya);var b=this.W();a.na=b;return a};m.bb=function(a){return null!=a?(a.push(this.M),a):[this.M]};m.vd=ba("Ya");function Jd(a){var b=!1;a.value instanceof rd||(b="array"==da(a.value)?!a.value.some(function(a){return a instanceof rd}):!0);if(!b)throw new D(501);}
m.eval=function(a){Jd(this);if("in"==this.F)return Kd(this,a);var b=a.entries.filter(function(a){return this.rc(H(a,this.M),this.value)!=this.Ya},this);return new F(b,G(a))};m.bind=function(a){if(this.Zb instanceof rd){var b=this.Zb.sa();if(a.length<=b)throw new D(510);this.value=a[b]}else"array"==da(this.Zb)&&(this.value=this.Zb.map(function(b){if(b instanceof rd){var d=b.sa();if(a.length<=d)throw new D(510);return a[b.sa()]}return b}))};
function Kd(a,b){var c=C(a.value),d=function(a){return null===a?!1:c.has(a)!=this.Ya}.bind(a),e=b.entries.filter(function(a){return d(H(a,this.M))},a);return new F(e,G(b))}m.toString=function(){return"value_pred("+this.M.j()+" "+this.F+(this.Ya?"(complement)":"")+" "+this.value+")"};function Ld(a){this.ea=a;this.$c=this.wa=null}function Md(a,b){null===a.wa&&null!=a.B&&(a.wa=Nd(a.B));return a.wa.get(b)||null}function Nd(a){var b=A();Fd(a,function(a){b.set(a.W(),a)});return b}function Od(a,b){b.B&&(a.B=b.B.Hb());a.$c=b}Ld.prototype.bind=function(){return this};function Pd(a,b){var c=a.B;null!=c&&Fd(c,function(a){a instanceof Id&&a.bind(b)})};function Qd(a){Ld.call(this,a)}t(Qd,Ld);function Rd(a){var b="";a.forEach(function(c,d){b+=c.M.j()+" ";b+=1==c.gb?"ASC":"DESC";d<a.length-1&&(b+=", ")});return b}Qd.prototype.Z=function(){return C(this.c)};Qd.prototype.clone=function(){var a=new Qd(this.ea);Od(a,this);this.f&&(a.f=this.f.slice());this.c&&(a.c=this.c.slice());a.X=this.X;a.O=this.O;this.N&&(a.N=this.N.slice());this.fa&&(a.fa=this.fa.slice());this.Ob&&(a.Ob=this.Ob);this.Vb&&(a.Vb=this.Vb);a.sb=this.sb;return a};
Qd.prototype.bind=function(a){Qd.Eb.bind.call(this,a);null!=this.Ob&&(this.X=a[this.Ob.sa()]);null!=this.Vb&&(this.O=a[this.Vb.sa()]);Pd(this,a);return this};function Sd(a,b){this.xa=a;this.ja=b}Sd.prototype.cb=f("xa");Sd.prototype.Z=f("ja");function Td(a){var b=C();a.forEach(function(a){a.Z().forEach(b.add.bind(b))});return b};function Ud(a,b){this.global=a;this.wb=a.l(Rb);this.sd=b.map(function(a){return a.context});this.Ve=b.map(function(a){return a.be});this.xe=Td(this.Ve);this.lf=Vd(this);this.vb=x()}function Vd(a){return a.sd.some(function(a){return!(a instanceof Qd)})?1:0}m=Ud.prototype;
m.exec=function(){function a(){var g=d.shift();if(g){var h=e[c.length];return g.cb().exec(b,h).then(function(b){c.push(b[0]);return a()})}return w()}var b=new Uc(this.global,this.xe),c=[],d=this.Ve.slice(),e=this.sd;return a().then(function(){return this.wb.Ib(this.lf,b).ma()}.bind(this)).then(function(){this.Zd(c);return c}.bind(this),function(a){b.Db();throw a;})};m.L=f("lf");m.Z=f("xe");m.fc=f("vb");m.W=function(){return la(this)};m.Zd=aa();function Wd(a,b){Ud.call(this,a,b);this.Bb=a.l(Xb)}t(Wd,Ud);Wd.prototype.getPriority=l(0);Wd.prototype.Zd=function(a){this.sd.forEach(function(b,c){Xd(this.Bb,b,a[c])},this)};function Yd(a,b){this.h=a;this.Bb=a.l(Xb);this.Qa=a.l(Wb);this.ld=new vc(a);this.mb=b;var c=a.l(Yb),d=this.mb.map(function(a){return c.table(a.getName())});this.ja=C(d);this.vb=x()}m=Yd.prototype;m.exec=function(){this.ld.update(this.mb);this.Mc();return w()};m.L=l(1);m.Z=f("ja");m.fc=f("vb");m.W=function(){return la(this)};m.getPriority=l(1);m.Mc=function(){var a=Zd(this.Bb,this.ja);0!=a.length&&(a=new Wd(this.h,a),$d(this.Qa,a))};function ae(a){this.h=a;this.wb=a.l(Rb);this.Qa=a.l(Wb)}ae.prototype.Xd=function(a){a=new Yd(this.h,a);$d(this.Qa,a)};function M(a,b){this.La=a;this.i=b;this.Ta=A()}r("lf.backstore.FirebaseRawBackStore",M);M.prototype.gd=f("i");M.prototype.hd=function(){throw new D(351);};function be(a,b){var c=x(),d=a;b.length&&(d=a.child(b));d.once("value",function(a){c.resolve(a.val())},function(a){c.reject(a)});return c.ha}function ce(a,b,c){function d(a){a?e.reject(a):e.resolve()}c=c||!1;var e=x();c?a.set(b,d):a.update(b,d);return e.ha}
M.prototype.Ca=function(a){return be(this.i,"@rev/R").then(function(a){this.Ja=a;return be(this.i,"@table")}.bind(this)).then(function(b){var c=0,d;for(d in b)this.Ta.set(d,b[d]),b[d]>c&&(c=b[d]);a.ya().forEach(function(a){this.Ta.has(a.getName())||(b[a.getName()]=++c)},this);d=this.i.child("@table");return ce(d,b)}.bind(this))};
function de(a,b,c){var d=a.Ta.get(b);return null!=d?function(){var a={},b=x();this.i.orderByChild("T").equalTo(d).once("value",function(d){d.forEach(function(b){var d=c(b.val());a[parseInt(b.key(),10)]=d});b.resolve(a)});return b.ha}.call(a).then(function(a){a["@rev"]={R:++this.Ja};return ce(this.i,a)}.bind(a)):w()}M.prototype.pc=function(a){return de(this,a,l(null)).then(function(){this.Ta.delete(a);return ce(this.i.child("@table/"+a),null,!0)}.bind(this))};M.prototype.dropTable=M.prototype.pc;
M.prototype.kc=function(a,b,c){return de(this,a,function(a){var e=a.P;e[b]=c;return{R:this.Ja+1,T:a.T,P:e}}.bind(this))};M.prototype.addTableColumn=M.prototype.kc;M.prototype.qc=function(a,b){return de(this,a,function(a){var d=a.P;delete d[b];return{R:this.Ja+1,T:a.T,P:d}}.bind(this))};M.prototype.dropTableColumn=M.prototype.qc;M.prototype.Lc=function(a,b,c){return de(this,a,function(a){var e=a.P;e[c]=e[b];delete e[b];return{R:this.Ja+1,T:a.T,P:e}}.bind(this))};M.prototype.renameTableColumn=M.prototype.Lc;
M.prototype.yb=function(){throw new D(351);};M.prototype.createRow=M.prototype.yb;M.prototype.Ac=f("La");M.prototype.getVersion=M.prototype.Ac;M.prototype.bc=function(a){var b=x();a=this.Ta.get(a);this.i.orderByChild("T").equalTo(a).once("value",function(a){var d=[];a.forEach(function(a){d.push(a.val().P)});b.resolve(d)});return b.ha};M.prototype.dump=function(){var a={},b=Ib(this.Ta).map(function(b){return this.bc(b).then(function(d){a[b]=d})}.bind(this));return cb(b).then(function(){return a})};
M.prototype.dump=M.prototype.dump;function ee(a,b,c){Kb.call(this,c,b);this.i=a}t(ee,Kb);ee.prototype.J=function(a){return this.i.yc(a)};
ee.prototype.mc=function(){var a=this.Oa.mb;if(0==a.size)this.$.resolve();else{var b=this.i.Ja+1;this.i.Ja=b;var c={"@rev":{R:b}};a.forEach(function(a,e){var g=this.i.Ta.get(e);a.za.forEach(function(a,d){c[d]={R:b,T:g,P:a.o}});a.oa.forEach(function(a,d){c[d]={R:b,T:g,P:a[1].o}});a.Aa.forEach(function(a,b){c[b]=null})},this);this.i.i.update(c,function(c){null===c?this.$.resolve():(this.i.Ja=b-1,c=B(a).map(function(a){return fe(this.i,a.getName())},this),cb(c).then(this.$.reject.bind(this.$),this.$.reject.bind(this.$)))}.bind(this))}return this.$.ha};function ge(){this.ob=A()}function he(a,b){if(0==b.length)return B(a.ob);var c=[];b.forEach(function(a){a=this.ob.get(a)||null;null===a||c.push(a)},a);return c}ge.prototype.getData=f("ob");ge.prototype.get=function(a){return w(he(this,a))};function ie(a,b){b.forEach(function(a){this.ob.set(a.id(),a)},a)}ge.prototype.put=function(a){ie(this,a);return w()};function je(a,b){0==b.length||b.length==a.ob.size?a.ob.clear():b.forEach(function(a){this.ob.delete(a)},a)}
ge.prototype.remove=function(a){je(this,a);return w()};function ke(a){return 0==a.ob.size?0:Ib(a.ob).reduce(function(a,c){return a>c?a:c},0)};function le(a,b){this.s=a;this.rf=b;this.Kc=A();this.Ja=-1;this.K=A();this.Ta=A();this.Dd=null}m=le.prototype;
m.Ca=function(a){this.i=this.rf.child(this.s.name());var b=a||function(){return w()};return be(this.i,"@db/version").then(function(a){return null===a?ce(this.i,me(this),!0).then(function(){var a=new M(0,this.i);return b(a)}.bind(this)):a==this.s.version()?be(this.i,"@rev/R").then(function(a){this.Ja=a;return be(this.i,"@table")}.bind(this)).then(function(a){for(var b in a)this.Ta.set(b,a[b]);a=this.s.ya().map(function(a){return fe(this,a.getName())},this);return cb(a)}.bind(this)).then(function(){ne(this);
oe(this);return w()}.bind(this)):this.$d(a,b).then(function(){return this.Ca()}.bind(this))}.bind(this))};m.$d=function(a,b){var c=new M(a,this.i);return c.Ca(this.s).then(function(){return w()}.bind(this)).then(function(){return b(c)}).then(function(){var a=this.i.child("@db");return ce(a,{version:this.s.version()},!0)}.bind(this))};
function oe(a){a.i.off();a.i.on("child_removed",a.cg.bind(a));a.Ed&&(a.Ed.off(),a.Kc.clear());a.Ed=a.i.orderByChild("R").startAt(a.Ja+1);a.Ed.on("value",a.Xd.bind(a))}function ne(a){ob=B(a.K).map(function(a){return ke(a)}).reduce(function(a,c){return a>c?a:c},0)+1}m.cg=function(a){var b=a.val(),c=this.Kc.get(b.T)||null;null===c&&(c=C(),this.Kc.set(b.T,c));c.add(parseInt(a.key(),10))};
m.Xd=function(a){var b=a.child("@rev/R").val();null!=b&&b!=this.Ja&&(this.Ja=b,a=pe(this,a),a.forEach(function(a){var b=this.K.get(a.getName()),e=Ib(a.Aa);0<e.length&&je(b,e);var g=B(a.za);a.oa.forEach(function(a){g.push(a[1])});ie(b,g)},this),0<a.length&&this.Fc(a),oe(this))};
function pe(a,b){var c=C(),d=A();a.Ta.forEach(function(a,b){var h=this.K.get(b),k=new Sc(b);if(this.Kc.has(a)){var p=jc(this.Kc.get(a));p.forEach(function(a){c.add(a)});he(h,p).forEach(function(a){k.delete(a)})}d.set(a,k)}.bind(a));b.forEach(function(a){if("@rev"!=a.key()){var b=parseInt(a.key(),10);if(!c.has(b)){a=a.val();var h=d.get(a.T),k=this.K.get(h.getName());k.getData().has(b)?h.modify([he(k,[b])[0],new y(b,a.P)]):h.add(new y(b,a.P))}}}.bind(a));return B(d).filter(function(a){return!a.md()})}
function fe(a,b){var c=x(),d=a.Ta.get(b);a.i.orderByChild("T").equalTo(d).once("value",function(a){var d=new ge,h=[];a.forEach(function(a){h.push(new y(parseInt(a.key(),10),a.val().P))});ie(d,h);this.K.set(b,d);c.resolve()}.bind(a));return c.ha}function me(a){var b={};b["@db"]={version:a.s.version()};b["@rev"]={R:1};a.Ja=1;b["@table"]={};a.s.ya().forEach(function(a,d){var e=a.getName();b["@table"][e]=d;this.K.set(e,new ge);this.Ta.set(e,d)},a);return b}m.Ib=function(a,b){return new ee(this,a,b)};
m.yc=function(a){var b=this.K.get(a)||null;if(null!==b)return b;throw new D(101,a);};m.close=aa();m.subscribe=ba("Dd");m.Fc=function(a){null!=this.Dd&&this.Dd(a)};function N(a,b,c,d){this.i=b;this.Ka=c;this.La=a;this.Xc=d}r("lf.backstore.IndexedDBRawBackStore",N);N.prototype.gd=f("i");N.prototype.getRawDBInstance=N.prototype.gd;N.prototype.hd=f("Ka");N.prototype.getRawTransaction=N.prototype.hd;N.prototype.pc=function(a){return new v(function(b,c){try{this.i.deleteObjectStore(a)}catch(d){c(d);return}b()},this)};N.prototype.dropTable=N.prototype.pc;
function qe(a,b,c,d){return new v(function(a,g){var h;try{var k=this.Ka.objectStore(b);h=k.openCursor()}catch(p){g(p);return}h.onsuccess=function(){var b=h.result;b?(c(b),b.continue()):(d(k),a())};h.onerror=g},a)}function re(a){var b=null;return b=a instanceof ArrayBuffer?rb(a):a instanceof Date?a.getTime():a}
function se(a,b,c){function d(a){var b=pc(a.value),d=b.o,e;for(e in d){var E=pb(d[e]);c(E);d[e]=E.Ga()}a.update(b.Ga())}function e(a){var b=pb(a.value);c(b);a.update(b.Ga())}return qe(a,b,a.Xc?d:e,aa())}N.prototype.kc=function(a,b,c){var d=re(c);return se(this,a,function(a){a.o[b]=d})};N.prototype.addTableColumn=N.prototype.kc;N.prototype.qc=function(a,b){return se(this,a,function(a){delete a.o[b]})};N.prototype.dropTableColumn=N.prototype.qc;
N.prototype.Lc=function(a,b,c){return se(this,a,function(a){a.o[c]=a.o[b];delete a.o[b]})};N.prototype.renameTableColumn=N.prototype.Lc;function te(a,b){var c=[];return new v(function(a,e){var g;try{g=this.Ka.objectStore(b).openCursor()}catch(h){e(h);return}g.onsuccess=function(){var b=g.result;if(b){if(this.Xc){var e;e=pc(b.value).o;for(var h in e)c.push(e[h])}else c.push(b.value);b.continue()}else a(c)}.bind(this);g.onerror=e},a)}N.prototype.yb=function(a){var b={},c;for(c in a)b[c]=re(a[c]);return qb(b)};
N.prototype.createRow=N.prototype.yb;N.prototype.Ac=f("La");N.prototype.getVersion=N.prototype.Ac;N.prototype.dump=function(){for(var a=this.i.objectStoreNames,b=[],c=0;c<a.length;++c){var d=a.item(c);b.push(this.bc(d))}return cb(b).then(function(b){var c={};b.forEach(function(b,d){c[a.item(d)]=b});return c})};N.prototype.dump=N.prototype.dump;N.prototype.bc=function(a){return te(this,a).then(function(a){return a.map(function(a){return a.value})})};function ue(a,b){this.Y=a;this.Jb=b}m=ue.prototype;m.get=function(a){if(0==a.length)return this.vc();a=a.map(function(a){return new v(function(c,d){var e;try{e=this.Y.get(a)}catch(g){d(g);return}e.onerror=d;e.onsuccess=function(a){c(this.Jb(a.target.result))}.bind(this)},this)},this);return cb(a)};
m.vc=function(){return new v(function(a,b){var c=[],d;try{d=this.Y.openCursor()}catch(e){b(e);return}d.onerror=b;d.onsuccess=function(){var b=d.result;b?(c.push(this.Jb(b.value)),b.continue()):a(c)}.bind(this)},this)};m.Qb=function(a){return new v(function(b,c){var d;try{d=a()}catch(e){c(e);return}d.onsuccess=b;d.onerror=c},this)};m.put=function(a){if(0==a.length)return w();a=a.map(function(a){return this.Qb(function(){return this.Y.put(a.Ga())}.bind(this))},this);return cb(a)};
m.remove=function(a){return new v(function(b,c){var d=this.Y.count();d.onsuccess=function(d){if(0==a.length||d.target.result==a.length)return this.Qb(function(){return this.Y.clear()}.bind(this)).then(b,c);d=a.map(function(a){return this.Qb(function(){return this.Y.delete(a)}.bind(this))},this);cb(d).then(b,c)}.bind(this);d.onerror=c},this)};function ve(a,b,c,d,e){Kb.call(this,c,d);this.h=a;this.Ka=b;this.Xc=e;this.Ka.oncomplete=this.$.resolve.bind(this.$);this.Ka.onabort=this.$.reject.bind(this.$)}t(ve,Kb);ve.prototype.J=function(a,b,c){return this.Xc?(c=null!=c?c:0,a=this.Ka.objectStore(a),new qc(a,b,0==c?ra(sc,this.h):tc)):new ue(this.Ka.objectStore(a),b)};ve.prototype.mc=function(){return this.$.ha};function we(a,b){this.h=a;this.s=b;this.Yc=b.We().Df||!1}m=we.prototype;
m.Ca=function(a){var b=window.indexedDB||window.mozIndexedDB||window.webkitIndexedDB||window.msIndexedDB;if(null==b)throw new D(352);var c=a||function(){return w()};return new v(function(a,e){var g;try{g=b.open(this.s.name(),this.s.version())}catch(h){e(h);return}g.onerror=e;g.onupgradeneeded=function(a){xe(this,c,a).then(aa(),e)}.bind(this);g.onsuccess=function(b){this.i=b.target.result;this.ge().then(function(b){ob=b+1;a(this.i)}.bind(this))}.bind(this)},this)};
function xe(a,b,c){var d=c.target.result,e=c.target.transaction;c=new N(c.oldVersion,d,e,a.Yc);ye(d);a.s.ya().forEach(ra(a.yf,d,e),a);return b(c)}function ye(a){for(var b=[],c=0;c<a.objectStoreNames.length;++c){var d=a.objectStoreNames.item(c);-1!=d.indexOf(".")&&b.push(d)}b.forEach(function(b){try{a.deleteObjectStore(b)}catch(c){}})}
m.yf=function(a,b,c){a.objectStoreNames.contains(c.getName())||a.createObjectStore(c.getName(),{keyPath:"id"});c.Cb()&&(c.Ba().forEach(function(c){this.oc(a,b,c.j(),"btree")},this),this.oc(a,b,c.u+".#","rowid"))};m.oc=function(a,b,c,d){a.objectStoreNames.contains(c)||(a.createObjectStore(c,{keyPath:"id"}),a=b.objectStore(c),(this.Yc?new qc(a,pb,tc):new ue(a,pb)).put([new tb(new sb(d))]))};
m.Ib=function(a,b){var c=Ib(b.Z());Vc(b).forEach(function(a){c.push(a)});var d=this.i.transaction(c,0==a?"readonly":"readwrite");return new ve(this.h,d,b,a,this.Yc)};
m.ge=function(a){function b(){if(0==d.length)return w();var a=d.shift();return c(a).then(b)}function c(b){return new v(function(c,d){var ga;try{ga=(a||e.transaction([b])).objectStore(b).openCursor(null,"prev")}catch(ka){d(ka);return}ga.onsuccess=function(a){(a=a.target.result)&&(g=Math.max(g,h(a)));c(g)};ga.onerror=function(){c(g)}})}var d=this.s.ya().map(function(a){return a.getName()}),e=this.i,g=0,h=function(a){return this.Yc?(a=pc(a.value),Object.keys(a.o).reduce(function(a,b){return Math.max(a,
b)},0)):a.key}.bind(this);return new v(function(a){b().then(function(){a(g)})})};m.close=function(){this.i.close()};m.yc=function(){throw new D(511);};m.subscribe=aa();m.Fc=aa();function ze(a,b,c){Kb.call(this,c,b);this.Y=a;0==b&&this.$.resolve()}t(ze,Kb);ze.prototype.J=function(a){return this.Y.yc(a)};ze.prototype.mc=function(){this.$.resolve();return this.$.ha};function Ae(a){this.s=a;this.K=A()}m=Ae.prototype;m.Ca=function(){this.s.ya().forEach(this.Pf,this);return w()};m.yc=function(a){var b=this.K.get(a)||null;if(null===b)throw new D(101,a);return b};m.Ib=function(a,b){return new ze(this,a,b)};function Be(a,b){if(!a.K.has(b)){var c=new ge;a.K.set(b,c);return c}return null}m.Pf=function(a){Be(this,a.getName());a.Cb()&&(a.Ba().forEach(function(a){this.oc(a.j(),"btree")},this),this.oc(a.u+".#","rowid"))};m.oc=function(a,b){var c=Be(this,a);null===c||c.put([new tb(new sb(b))])};
m.close=aa();m.subscribe=aa();m.Fc=aa();function Ce(a){Ae.call(this,a);this.od=null}t(Ce,Ae);Ce.prototype.subscribe=function(a){null===this.od&&(this.od=a)};Ce.prototype.Fc=function(a){null===this.od||this.od(a)};function De(a,b,c){this.Ka=a;this.u=b;this.Jb=c}De.prototype.get=function(a){var b=this.Jb;Ee(this.Ka,"SELECT id, value FROM "+this.u+" "+(0==a.length?"":"WHERE id IN ("+a.join(",")+")"),[],function(a){for(var d=a.rows.length,e=Array(d),g=0;g<d;++g)e[g]=b({id:a.rows.item(g).id,value:JSON.parse(a.rows.item(g).value)});return e});return this.Ka.ma()};
De.prototype.put=function(a){if(0==a.length)return w();var b="INSERT OR REPLACE INTO "+this.u+"(id, value) VALUES (?, ?)";a.forEach(function(a){Ee(this.Ka,b,[a.id(),JSON.stringify(a.o)])},this);return w()};De.prototype.remove=function(a){Ee(this.Ka,"DELETE FROM "+this.u+" "+(0==a.length?"":"WHERE id IN ("+a.join(",")+")"),[]);return w()};function Fe(a,b,c){Kb.call(this,b,c);this.i=a;this.K=A();this.Gd=[]}t(Fe,Kb);Fe.prototype.J=function(a,b){var c=this.K.get(a)||null;null===c&&(c=new De(this,a,b),this.K.set(a,c));return c};function Ee(a,b,c,d){a.Gd.push({pg:b,fg:c,transform:d})}
Fe.prototype.mc=function(){var a,b,c=this.$.reject.bind(this.$),d=function(a,b){this.$.reject(b)}.bind(this),e=function(c,h){a=h;if(this.Gd.length){var k=this.Gd.shift();b=k.transform;c.executeSql(k.pg,k.fg,e,d)}else k=a,null!=b&&null!=a&&(k=b(a)),this.$.resolve(k)}.bind(this);0==this.kf?this.i.readTransaction(e,c):this.i.transaction(e,c);return this.$.ha};function O(a,b,c){this.i=c;this.h=a;this.La=b}r("lf.backstore.WebSqlRawBackStore",O);O.prototype.gd=f("i");O.prototype.getRawDBInstance=O.prototype.gd;O.prototype.hd=function(){throw new D(356);};O.prototype.getRawTransaction=O.prototype.hd;function Ge(a){return new Fe(a.i,new Uc(a.h,C()),1)}O.prototype.pc=function(a){var b=Ge(this);Ee(b,"DROP TABLE "+a,[]);return b.ma()};O.prototype.dropTable=O.prototype.pc;
O.prototype.bc=function(a){var b=Ge(this);Ee(b,"SELECT id, value FROM "+a,[]);return b.ma().then(function(a){for(var b=a.rows.length,e=Array(b),g=0;g<b;++g)e[g]={id:a.rows.item(g).id,value:JSON.parse(a.rows.item(g).value)};return w(e)})};function He(a,b,c){var d=Ge(a),e="UPDATE "+b+" SET value=? WHERE id=?";return a.bc(b).then(function(a){a.forEach(function(a){a=c(a);Ee(d,e,[JSON.stringify(a.value),a.id])});return d.ma()})}
O.prototype.kc=function(a,b,c){var d=re(c);return He(this,a,function(a){a.value[b]=d;return a})};O.prototype.addTableColumn=O.prototype.kc;O.prototype.qc=function(a,b){return He(this,a,function(a){delete a.value[b];return a})};O.prototype.dropTableColumn=O.prototype.qc;O.prototype.Lc=function(a,b,c){return He(this,a,function(a){a.value[c]=a.value[b];delete a.value[b];return a})};O.prototype.renameTableColumn=O.prototype.Lc;O.prototype.yb=function(a){var b={},c;for(c in a)b[c]=re(a[c]);return qb(b)};
O.prototype.createRow=O.prototype.yb;O.prototype.Ac=f("La");O.prototype.getVersion=O.prototype.Ac;function Ie(a){Ee(a,'SELECT tbl_name FROM sqlite_master WHERE type="table"',[],function(a){for(var c=Array(a.rows.length),d=0;d<c.length;++d)c[d]=a.rows.item(d).tbl_name;return c})}
O.prototype.dump=function(){var a=x(),b=Ge(this);Ie(b);var c={};b.ma().then(function(b){b=b.filter(function(a){return"__lf_ver"!=a&&"__WebKitDatabaseInfoTable__"!=a}).map(function(a){return this.bc(a).then(function(b){c[a]=b})},this);cb(b).then(function(){a.resolve(c)})}.bind(this));return a.ha};O.prototype.dump=O.prototype.dump;function Je(a,b,c){this.h=a;this.s=b;this.og=c||4194304}function Ke(a){return new Uc(a.h,C())}m=Je.prototype;m.Ca=function(a){if(null==window.openDatabase)throw new D(353);var b=a||function(){return w()};return new v(function(a,d){try{var e=window.openDatabase(this.s.name(),"",this.s.name(),this.og);if(null!=e)this.i=e,Le(this,b).then(a,d);else throw new D(354);}catch(g){d(g)}},this)};
function Le(a,b){var c=x(),d=new Fe(a.i,Ke(a),1);Ee(d,"CREATE TABLE IF NOT EXISTS __lf_ver(id INTEGER PRIMARY KEY, v INTEGER)",[]);Ee(d,"SELECT v FROM __lf_ver WHERE id = 0",[]);d.ma().then(function(a){var d=0;a.rows.length&&(d=a.rows.item(0).v);d<this.s.version()?this.$d(b,d).then(c.resolve.bind(c)):d>this.s.version()?c.reject(new D(108)):c.resolve()}.bind(a));return c.ha}m.Ib=function(a,b){if(null!=this.i)return new Fe(this.i,b,a);throw new D(2);};m.close=aa();m.yc=function(){throw new D(512);};
m.subscribe=function(){throw new D(355);};m.Fc=function(){throw new D(355);};m.$d=function(a,b){var c=x();Me(this).then(function(){a(new O(this.h,b,this.i)).then(function(){return this.ge()}.bind(this)).then(c.resolve.bind(c))}.bind(this),c.reject.bind(c));return c.ha};
function Me(a){var b=a.s.ya(),c=new Fe(a.i,Ke(a),1),d=new Fe(a.i,Ke(a),1);Ee(c,"INSERT OR REPLACE INTO __lf_ver VALUES (0, ?)",[a.s.version()]);Ie(c);return c.ma().then(function(a){a.filter(function(a){return-1!=a.indexOf(".")}).forEach(function(a){Ee(d,"DROP TABLE "+a,[])});var c=a.filter(function(a){return-1==a.indexOf(".")});b.map(function(a){return a.getName()}).filter(function(a){return-1==c.indexOf(a)}).forEach(function(a){Ee(d,"CREATE TABLE "+a+"(id INTEGER PRIMARY KEY, value TEXT)",[])});
return d.ma()})}m.ge=function(){var a=0,b=x(),c=function(b){var c=new Fe(this.i,Ke(this),0);Ee(c,"SELECT MAX(id) FROM "+b,[]);return c.ma().then(function(b){b=b.rows.item(0)[0];a=Math.max(b,a)})}.bind(this),d=this.s.ya().map(function(a){return c(a.getName())});cb(d).then(function(){b.resolve(a)},function(a){b.reject(a)});return b.ha};function Ne(a){this.m=A();this.Wb=A();a.ya().forEach(function(a){this.Wb.set(a.getName(),C())},this)}m=Ne.prototype;m.set=function(a,b){this.m.set(b.id(),b);this.Wb.get(a).add(b.id())};m.ie=function(a,b){var c=this.Wb.get(a);b.forEach(function(a){this.m.set(a.id(),a);c.add(a.id())},this)};m.get=function(a){return this.m.get(a)||null};function Oe(a,b){return b.map(function(a){return this.get(a)},a)}
m.Xa=function(a,b,c){var d=[],e=Math.min(b,c),g=Math.max(b,c);a=this.Wb.get(a);if(a.size<g-e)a.forEach(function(a){a>=e&&a<=g&&(a=this.m.get(a),d.push(a))},this);else for(b=e;b<=g;++b)a.has(b)&&(c=this.m.get(b),d.push(c));return d};m.remove=function(a,b){this.m.delete(b);this.Wb.get(a).delete(b)};m.wc=function(a){return null!=a?this.Wb.get(a).size:this.m.size};m.clear=function(){this.m.clear();this.Wb.clear()};function Pe(a,b,c){var d=0,e=a.length;for(c=c||Qe;d<e;){var g=d+e>>1;0>c(a[g],b)?d=g+1:e=g}return d==e&&a[d]==b?d:~d}function Qe(a,b){return a-b}function Re(a,b,c){c=Pe(a,b,c);return 0>c?(a.splice(-(c+1),0,b),!0):!1};function Se(a,b,c,d){a=b?a.reverse():a;if(null==c&&null==d)return a;c=Math.min(q(c)?c:a.length,a.length);if(0==c)return[];d=Math.min(d||0,a.length);return a.slice(d,d+c)};function Te(){this.qa=0}Te.prototype.add=function(a,b){this.qa+=b};Te.prototype.remove=function(a,b){this.qa-=b};Te.prototype.clear=function(){this.qa=0};function Ue(a,b){a.clear();b.forEach(function(a){this.qa+=a.qa},a)};function Ve(a,b,c,d){this.u=a;this.U=b;this.me=c;this.kb=new Te;if(d){a=511;a*=a*a;if(d.length>=a)throw new D(6,a);d=We(this,d);this.pa=d=Xe(d)}else this.clear()}var Ye=[];m=Ve.prototype;m.getName=f("u");m.toString=function(){return this.pa.toString()};m.add=function(a,b){this.pa=this.pa.rb(a,b)};m.set=function(a,b){this.pa=this.pa.rb(a,b,!0)};m.remove=function(a,b){this.pa=this.pa.remove(a,b)};m.get=function(a){return this.pa.get(a)};
m.bd=function(a){if(null==a)return this.Sa().qa;if(a instanceof Yc){if(cd(a))return this.Sa().qa;if(dd(a))return this.get(a.c).length}return this.Xa([a]).length};m.Sa=f("kb");m.vc=function(a,b,c,d){c=Array(a);this.pa.fill({offset:b?this.kb.qa-a-d:d,count:a,ke:0},c);return b?c.reverse():c};
m.Xa=function(a,b,c,d){var e=Ze(this.pa).b[0];if(!q(e)||0==c)return Ye;b=b||!1;c=null!=c?Math.min(c,this.kb.qa):this.kb.qa;d=d||0;var g=Math.min(Math.max(this.kb.qa-d,0),c);if(0==g)return Ye;if(!q(a)||1==a.length&&a[0]instanceof Yc&&cd(a[0]))return this.vc(g,b,c,d);a=this.U.ff(a);var h=Array(b?this.kb.qa:g),k={count:0,X:h.length,reverse:b,O:d};a.forEach(function(a){for(var b=this.U.td(a),b=this.U.Qd(a)?e:b[0],b=$e(this.pa,b),c=k.count,d=0;null!=b&&k.count<k.X;)b.Xa(a,k,h),k.count!=c?(d=0,c=k.count):
d++,b=2==d?null:b.next()},this);h.splice(k.count,g-k.count);return b?Se(h,b,c,d):h};m.clear=function(){this.pa=af(this);this.kb.clear()};m.Ia=function(a){return this.pa.Ia(a)};m.min=function(){return this.Ec(this.U.min.bind(this.U))};m.max=function(){return this.Ec(this.U.max.bind(this.U))};m.Ec=function(a){var b=Ze(this.pa),c=bf(this.pa);if(0==b.b.length&&0==c.b.length)return null;var d=b.b[0],b=b.A[0],e=c.b[c.b.length-1],c=c.A[c.b.length-1];return 1==a(d,e)?[d,this.me?[b]:b]:[e,this.me?[c]:c]};
m.Ea=f("me");m.nc=f("U");m.Ud=function(a,b){return null!=a?-1==this.U.compare(a,b):!1};m.Na=function(a,b){return null!=a?0==this.U.compare(a,b):!1};m.Ga=function(){for(var a=[],b=Ze(this.pa);b;)a.push(new y(b.na,[b.b,b.A])),b=b.ua;return a};function cf(a,b,c,d){a=new Ve(b,a,c);d=df(d,a);a.pa=d;return a}function ef(a,b){this.na=a;this.D=b;this.eb=0;this.ua=this.ub=this.C=null;this.b=[];this.A=[];this.g=[]}function af(a){return new ef(ob++,a)}function P(a){return 0==a.eb}m=ef.prototype;m.next=f("ua");
function ff(a){function b(a){return null!=a?a.na.toString():"_"}var c=a.na+"["+a.b.join("|")+"]",d=a.g.map(function(a){return a.na}).join("|"),e=a.A.join("/"),g=b(a.ub)+"{",g=P(a)?g+e:g+d,g=g+"}"+b(a.C);a.ua&&(a=ff(a.ua),c=c+"  "+a[0],g=g+"  "+a[1]);return[c,g]}m.toString=function(){var a="",b=ff(this),a=a+(b[0]+"\n"+b[1]+"\n");this.g.length&&(a+=this.g[0].toString());return a};function Ze(a){return P(a)?a:Ze(a.g[0])}function bf(a){return P(a)?a:bf(a.g[a.g.length-1])}
function gf(a,b){b&&(b.ub=a);a&&(a.ua=b)}function We(a,b){for(var c=b.length,d=0,e=af(a),g=e;0<c;){var h=768<=c?511:257<=c&&511>=c?c:257,k=b.slice(d,d+h);e.b=k.map(function(a){return a.key});e.A=k.map(function(a){return a.value});d+=h;c-=h;0<c&&(h=af(e.D),gf(e,h),e=h)}return g}function hf(a){var b=a[0],c=af(b.D);c.eb=b.eb+1;c.g=a;for(b=0;b<a.length;++b)a[b].C=c,0<b&&c.b.push(a[b].b[0]);return c}
function Xe(a){var b=a,c=[];do c.push(b),b=b.ua;while(b);if(512>=c.length)b=hf(c);else{var d=c.length,e=0,b=af(a.D);for(b.eb=a.eb+2;0<d;){a=768<=d?511:257<=d&&511>=d?d:257;var g=c.slice(e,e+a),h=hf(g);h.C=b;b.g.length&&(b.b.push(g[0].b[0]),gf(b.g[b.g.length-1],h));b.g.push(h);e+=a;d-=a}}return b}m.get=function(a){var b=jf(this,a);if(P(this)){var c=Ye;this.D.Na(this.b[b],a)&&(c=c.concat(this.A[b]));return c}b=this.D.Na(this.b[b],a)?b+1:b;return this.g[b].get(a)};
m.Ia=function(a){var b=jf(this,a);return this.D.Na(this.b[b],a)?!0:P(this)?!1:this.g[b].Ia(a)};m.remove=function(a,b){kf(this,a,-1,b);if(null==this.C){var c=this;1==this.g.length&&(c=this.g[0],c.C=null);return c}return this};function mf(a){return P(a)?a.b[0]:mf(a.g[0])}function nf(a){a.b=[];for(var b=1;b<a.g.length;++b)a.b.push(mf(a.g[b]))}
function kf(a,b,c,d){var e=jf(a,b),g=P(a);if(!g){var h=a.D.Na(a.b[e],b)?e+1:e;if(kf(a.g[h],b,h,d))nf(a);else return!1}else if(!a.D.Na(a.b[e],b))return!1;if(a.b.length>e&&a.D.Na(a.b[e],b)){if(q(d)&&!a.D.Ea()&&g&&(h=a.A[e],d=Pe(h,d,void 0),0>d?d=!1:(h.splice(d,1),d=!0),d&&a.D.Sa().remove(b,1),a.A[e].length))return!1;a.b.splice(e,1);g&&(g=a.D.Ea()?1:a.A[e].length,a.A.splice(e,1),a.D.Sa().remove(b,g))}if(256>a.b.length&&null!=a.C){a:{b=null;if(a.ua&&256<a.ua.b.length)b=a.ua,e=d=0,g=a.b.length+1;else if(a.ub&&
256<a.ub.b.length)b=a.ub,d=a.ub.b.length-1,e=P(a)?d:d+1,g=0;else{b=!1;break a}a.b.splice(g,0,b.b[d]);b.b.splice(d,1);d=P(a)?a.A:a.g;h=null;P(a)?h=b.A:(h=b.g,h[e].C=a);d.splice(g,0,h[e]);h.splice(e,1);P(b)||(nf(b),nf(a));b=!0}b||of(a,c)}return!0}
function of(a,b){var c,d,e;a.ua&&511>a.ua.b.length?(c=a.ua,e=d=0):a.ub&&(c=a.ub,d=c.b.length,e=P(c)?c.A.length:c.g.length);d=[d,0].concat(a.b);Array.prototype.splice.apply(c.b,d);d=null;P(a)?d=a.A:(d=a.g,d.forEach(function(a){a.C=c}));d=[e,0].concat(d);Array.prototype.splice.apply(P(c)?c.A:c.g,d);gf(a.ub,a.ua);P(c)||nf(c);-1!=b&&(a.C.b.splice(b,1),a.C.g.splice(b,1))}
m.rb=function(a,b,c){var d=jf(this,a);if(P(this)){if(this.D.Na(this.b[d],a)){if(c)this.D.Sa().remove(a,this.D.Ea()?1:this.A[d].length),this.A[d]=this.D.Ea()?b:[b];else{if(this.D.Ea())throw new D(201);if(!Re(this.A[d],b))throw new D(109);}this.D.Sa().add(a,1);return this}this.b.splice(d,0,a);this.A.splice(d,0,this.D.Ea()?b:[b]);this.D.Sa().add(a,1);512==this.b.length?(d=af(this.D),a=af(this.D),a.eb=1,a.b=[this.b[256]],a.g=[this,d],a.C=this.C,this.C=a,d.b=this.b.splice(256),d.A=this.A.splice(256),d.C=
a,gf(d,this.ua),gf(this,d),d=a):d=this;return d}d=this.D.Na(this.b[d],a)?d+1:d;a=this.g[d].rb(a,b,c);P(a)||1!=a.b.length||(this.b.splice(d,0,a.b[0]),a.g[1].C=this,a.g[0].C=this,this.g.splice(d,1,a.g[1]),this.g.splice(d,0,a.g[0]));return 512==this.b.length?pf(this):this};function pf(a){var b=af(a.D),c=af(a.D);b.C=a.C;b.eb=a.eb+1;b.b=[a.b[256]];b.g=[a,c];a.b.splice(256,1);c.C=b;c.eb=a.eb;c.b=a.b.splice(256);c.g=a.g.splice(257);c.g.forEach(function(a){a.C=c});a.C=b;gf(c,a.ua);gf(a,c);return b}
function jf(a,b){for(var c=0,d=a.b.length;c<d;){var e=c+d>>1;a.D.Ud(a.b[e],b)?c=e+1:d=e}return c}function $e(a,b){if(!P(a)){var c=jf(a,b);a.D.Na(a.b[c],b)&&c++;return $e(a.g[c],b)}return a}
m.Xa=function(a,b,c){function d(a){return a[0]?a[1]?0:1:-1}var e=this.D.nc(),g=0,h=this.b.length-1,k=this.b,p=d(e.nb(k[g],a)),E=d(e.nb(k[h],a));if(1!=p&&(-1!=p||-1!=E)){var ga=function(a,b){var c=a+b>>1;return c==a?c+1:c},ka=function(b,c,g){if(b>=c)return 0==g?c:-1;var h=d(e.nb(k[b],a));if(0==h)return b;if(1==h)return-1;h=ga(b,c);if(h==c)return 0==g?c:-1;var p=d(e.nb(k[h],a));return 0==p?ka(b,h,p):-1==p?ka(h+1,c,g):ka(b+1,h,p)},Ua=function(b,c){if(b>=c)return b;var g=d(e.nb(k[c],a));if(0==g)return c;
if(-1==g)return b;g=ga(b,c);if(g==c)return b;var h=d(e.nb(k[g],a));return 0==h?Ua(g,c):1==h?Ua(b,g-1):-1};0!=p&&(g=ka(g+1,h,E));-1!=g&&(h=Ua(g,h),-1!=h&&h>=g&&qf(this,b,c,g,h+1))}};function qf(a,b,c,d,e){for(;d<e&&(b.reverse||!(b.count>=b.X));++d)if(a.D.Ea())!b.reverse&&b.O?b.O--:c[b.count++]=a.A[d];else for(var g=0;g<a.A[d].length&&b.count<c.length;++g)!b.reverse&&b.O?b.O--:c[b.count++]=a.A[d][g]}
m.fill=function(a,b){if(P(this))for(var c=0;c<this.A.length&&0<a.count;++c)if(0<a.offset){if(a.offset-=this.D.Ea()?1:this.A[c].length,0>a.offset)for(var d=this.A[c].length+a.offset;d<this.A[c].length&&0<a.count;++d)b[a.ke++]=this.A[c][d],a.count--}else if(this.D.Ea())b[a.ke++]=this.A[c],a.count--;else for(d=0;d<this.A[c].length&&0<a.count;++d)b[a.ke++]=this.A[c][d],a.count--;else for(c=0;c<this.g.length&&0<a.count;++c)this.g[c].fill(a,b)};
function df(a,b){for(var c=b.Sa(),d=a.map(function(a){var d=new ef(a.id(),b);d.b=a.o[0];d.A=a.o[1];d.b.forEach(function(a,e){c.add(a,b.Ea()?1:d.A[e].length)});return d}),e=0;e<d.length-1;++e)gf(d[e],d[e+1]);return 1<d.length?Xe(d[0]):d[0]};function rf(a){if(1==a.f.length)return new sf(a.f[0].gb);a=a.f.map(function(a){return a.gb});return new tf(a)}function sf(a){this.ad=0==a?uf:vf;this.Vd=0==a?function(a){return null!=a?a.reverse():null}:function(a){return a||null};this.ae=0==a?wf:xf}t(sf,uc);function vf(a,b){return a>b?1:a<b?-1:0}function uf(a,b){return vf(b,a)}function xf(a,b){return ed(a,b)}function wf(a,b){return ed(b,a)}m=sf.prototype;
m.nb=function(a,b){var c=this.Vd(b),d=[null===c.c,null===c.w];if(!d[0]){var e=this.ad(a,c.c);d[0]=c.aa?1==e:-1!=e}d[1]||(e=this.ad(a,c.w),d[1]=c.la?-1==e:1!=e);return d};m.compare=function(a,b){return this.ad(a,b)};m.min=function(a,b){return a<b?1:a==b?0:-1};m.max=function(a,b){return a>b?1:a==b?0:-1};m.Pd=function(a,b){var c=this.nb(a,b);return c[0]&&c[1]};m.ff=function(a){return a.filter(function(a){return null!==a}).sort(function(a,c){return this.ae(a,c)}.bind(this))};m.Qd=function(a){return ea(this.Vd(a).c)};
m.td=function(a){a=this.Vd(a);return[a.c,a.w]};m.toString=function(){return this.ad==uf?"SimpleComparator_DESC":"SimpleComparator_ASC"};function tf(a){this.Ha=a.map(function(a){return new sf(a)})}t(tf,uc);function yf(a,b,c,d){for(var e=0,g=0;g<a.Ha.length&&0==e;++g)e=d(a.Ha[g],b[g],c[g]);return e}m=tf.prototype;m.compare=function(a,b){return yf(this,a,b,function(a,b,e){return a.compare(b,e)})};m.min=function(a,b){return yf(this,a,b,function(a,b,e){return a.min(b,e)})};
m.max=function(a,b){return yf(this,a,b,function(a,b,e){return a.max(b,e)})};m.nb=function(a,b){for(var c=[!0,!0],d=0;d<this.Ha.length&&(c[0]||c[1]);++d){var e=this.Ha[d].nb(a[d],b[d]);c[0]=c[0]&&e[0];c[1]=c[1]&&e[1]}return c};m.Pd=function(a,b){for(var c=!0,d=0;d<this.Ha.length&&c;++d)c=this.Ha[d].Pd(a[d],b[d]);return c};
m.ff=function(a){var b=a.filter(function(a){return a.every(fa)});a=Array(this.Ha.length);for(var c=0;c<a.length;c++)a[c]=b.map(function(a){return a[c]});a.forEach(function(a,b){a.sort(function(a,c){return this.Ha[b].ae(a,c)}.bind(this))},this);b=Array(b.length);for(c=0;c<b.length;c++)b[c]=a.map(function(a){return a[c]});return b.sort(function(a,b){for(var c=0,h=0;h<this.Ha.length&&0==c;++h)c=this.Ha[h].ae(a[h],b[h]);return c}.bind(this))};m.Qd=function(a){return this.Ha[0].Qd(a[0])};
m.td=function(a){var b=a.map(function(a,b){return this.Ha[b].td(a)[0]},this);a=a.map(function(a,b){return this.Ha[b].td(a)[1]},this);return[b,a]};function zf(a){this.ca=a;this.fb=C();this.Nc=new Te;this.kb=new Te}m=zf.prototype;m.getName=function(){return this.ca.getName()};m.add=function(a,b){null===a?(this.fb.add(b),this.Nc.add(a,1)):this.ca.add(a,b)};m.set=function(a,b){null===a?(this.fb.clear(),this.Nc.clear(),this.add(a,b)):this.ca.set(a,b)};m.remove=function(a,b){null===a?b?(this.fb.delete(b),this.Nc.remove(a,1)):(this.fb.clear(),this.Nc.clear()):this.ca.remove(a,b)};m.get=function(a){return null===a?jc(this.fb):this.ca.get(a)};
m.bd=function(a){return this.ca.bd(a)};m.Sa=function(){Ue(this.kb,[this.ca.Sa(),this.Nc]);return this.kb};m.Xa=function(a,b,c,d){b=this.ca.Xa(a,b,c,d);return null!=a?b:b.concat(jc(this.fb))};m.clear=function(){this.fb.clear();this.ca.clear()};m.Ia=function(a){return null===a?0!=this.fb.size:this.ca.Ia(a)};m.min=function(){return this.ca.min()};m.max=function(){return this.ca.max()};m.Ga=function(){return[new y(-2,jc(this.fb))].concat(this.ca.Ga())};m.nc=function(){return this.ca.nc()};
function Af(a,b){for(var c=-1,d=0;d<b.length;++d)if(-2==b[d].id()){c=d;break}if(-1==c)throw new D(102);var d=b[c].o,e=b.slice(0);e.splice(c,1);var c=a(e),g=new zf(c);d.forEach(function(a){g.fb.add(a)});return g}m.Ea=function(){return this.ca.Ea()};function Bf(a){this.u=a;this.jb=C();this.U=new sf(1)}m=Bf.prototype;m.getName=f("u");m.add=function(a){if("number"!=typeof a)throw new D(103);this.jb.add(a)};m.set=function(a,b){this.add(a,b)};m.remove=function(a){this.jb.delete(a)};m.get=function(a){return this.Ia(a)?[a]:[]};m.min=function(){return this.Ec(this.U.min.bind(this.U))};m.max=function(){return this.Ec(this.U.max.bind(this.U))};
m.Ec=function(a){if(0==this.jb.size)return null;var b=jc(this.jb).reduce(function(b,d){return null===b||1==a(d,b)?d:b},null);return[b,[b]]};m.bd=function(){return this.jb.size};m.Xa=function(a,b,c,d){var e=a||[bd()];a=jc(this.jb).filter(function(a){return e.some(function(b){return this.U.Pd(a,b)},this)},this);return Se(a,b,c,d)};m.clear=function(){this.jb.clear()};m.Ia=function(a){return this.jb.has(a)};m.Ga=function(){return[new y(0,jc(this.jb))]};m.nc=f("U");
function Cf(a,b){var c=new Bf(a);b[0].o.forEach(function(a){c.add(a,a)});return c}m.Ea=l(!0);m.Sa=function(){var a=new Te;a.qa=this.jb.size;return a};function Df(a){this.h=a;this.wb=a.l(Rb);this.G=a.l(Tb);this.ka=a.l(Sb)}Df.prototype.Ca=function(a){var b=a.ya(),c=function(){if(0==b.length)return w();var a=b.shift();return(a.Cb()?Ef(this,a):Ff(this,a)).then(c)}.bind(this);return c()};function Ff(a,b){var c=new Uc(a.h,C([b]));return a.wb.Ib(0,c).J(b.getName(),b.ac.bind(b)).get([]).then(function(a){this.ka.ie(b.getName(),a);Gf(this,b,a)}.bind(a))}
function Gf(a,b,c){var d=a.G.Oc.get(b.getName())||[];c.forEach(function(a){d.forEach(function(b){var c=a.Nb(b.getName());b.add(c,a.id())})})}function Ef(a,b){var c=new Uc(a.h,C([b])),d=a.wb.Ib(0,c),c=d.J(b.getName(),b.ac).get([]).then(function(a){this.ka.ie(b.getName(),a)}.bind(a)),e=b.Ba().map(function(a){return Hf(this,a,d)},a).concat(If(a,b,d));return cb(e.concat(c))}
function Hf(a,b,c){c=c.J(b.j(),pb,1);var d=rf(b);return c.get([]).then(function(a){if(1<a.length){if(Jf(b)){var c=cf.bind(void 0,d,b.j(),b.Cc);a=Af(c,a.slice(1))}else a=cf(d,b.j(),b.Cc,a.slice(1));this.G.set(b.Pc,a)}}.bind(a))}function If(a,b,c){return c.J(b.u+".#",pb,1).get([]).then(function(a){1<a.length&&(a=Cf(b.u+".#",a.slice(1)),this.G.set(b.getName(),a))}.bind(a))};function Kf(){this.Y=A();this.Oc=A()}Kf.prototype.Ca=function(a){a.ya().forEach(function(a){var c=[];this.Oc.set(a.getName(),c);var d=a.u+".#";if(null===this.get(d)){var e=new Bf(d);c.push(e);this.Y.set(d,e)}a.Ba().forEach(function(a){var b;b=rf(a);b=new Ve(a.j(),b,a.Cc);b=Jf(a)?new zf(b):b;c.push(b);this.Y.set(a.j(),b)},this)},this);return w()};Kf.prototype.get=function(a){return this.Y.get(a)||null};
Kf.prototype.set=function(a,b){var c=this.Oc.get(a)||null;null===c&&(c=[],this.Oc.set(a,c));for(var d=null,e=0;e<c.length;e++)if(c[e].getName()==b.getName()){d=e;break}null!==d&&0<c.length?c.splice(d,1,b):c.push(b);this.Y.set(b.getName(),b)};function Lf(a){this.hc=[];q(a)&&this.add(a)}Lf.prototype.toString=function(){return this.hc.map(function(a){return a.toString()}).join(",")};Lf.prototype.Ia=function(a){return this.hc.some(function(b){return b.contains(a)})};Lf.prototype.ta=f("hc");
Lf.prototype.add=function(a){if(0!=a.length)if(a=this.hc.concat(a),1==a.length)this.hc=a;else{a.sort(ed);for(var b=[],c=a[0],d=1;d<a.length;++d)if($c(c,a[d])){var e=a[d],g=bd();if(null!==c.c&&null!==e.c){var h=ad(c.c,e.c,!0);1!=h?(g.c=c.c,g.aa=0!=h?c.aa:c.aa&&e.aa):(g.c=e.c,g.aa=e.aa)}null!==c.w&&null!==e.w&&(h=ad(c.w,e.w,!1),-1!=h?(g.w=c.w,g.la=0!=h?c.la:c.la&&e.la):(g.w=e.w,g.la=e.la));c=g}else b.push(c),c=a[d];b.push(c);this.hc=b}};
function Mf(a,b){var c=[];a.ta().map(function(a){return b.ta().map(function(b){var c;if($c(a,b)){c=bd();var h=ad(a.c,b.c,!0),h=0==h?a.aa?a:b:-1!=h?a:b;c.c=h.c;c.aa=h.aa;null===a.w||null===b.w?b=null===a.w?b:a:(h=ad(a.w,b.w,!1),b=0==h?a.la?a:b:-1==h?a:b);c.w=b.w;c.la=b.la}else c=null;return c})}).forEach(function(a){c=c.concat(a)});return new Lf(c.filter(function(a){return null!==a}))};function Pf(a,b){var c=[],d=null,e=null;Fd(a,function(a){var h=b(a);null==a.getParent()?e=h:L(d,h);var k=a.getParent();null!==k&&K(k).length==K(d).length&&(k=c.indexOf(d),-1!=k&&c.splice(k,1));1<K(a).length&&c.push(h);d=null===a.g?c[c.length-1]:h});return e}function Qf(a){return Rf(a,function(a){return null===a.g})}
function Sf(a){var b=a.getParent(),c=0;null!==b&&(c=K(b).indexOf(a),b.removeChild(a));var d=K(a).slice();d.forEach(function(d,g){a.removeChild(d);null===b||Cd(b,d,c+g)});return{parent:b,children:d}}function Tf(a,b){K(a).slice().forEach(function(c){a.removeChild(c);L(b,c)});L(a,b)}function Uf(a){var b=Bd(a,0);Sf(a);Tf(b,a);return b}
function Vf(a,b,c){var d=Bd(a,0),e=K(d).slice();if(!e.some(function(a){return b(a)}))return a;Sf(a);e.forEach(function(e,h){if(b(e)){var k=c(a);Dd(d,h);L(k,e);Cd(d,k,h)}});return d}function Wf(a,b,c,d){var e=a.getParent();null!==e&&(a=K(e).indexOf(a),Dd(e,a),Cd(e,c,a));K(b).slice().forEach(function(a){b.removeChild(a);L(d,a)});return c}function Rf(a,b,c){function d(a){b(a)&&e.push(a);null!=c&&c(a)||K(a).forEach(d)}var e=[];d(a);return e}
function Xf(a,b){var c=b||function(a){return a.toString()+"\n"},d="";Fd(a,function(a){for(var b=0;b<Ad(a);b++)d+="-";d+=c(a)});return d};function Yf(a){Gd.call(this);this.Pb=a;this.Ya=!1}t(Yf,Gd);m=Yf.prototype;m.Hb=function(){return Pf(this,function(a){if(a instanceof Yf){var b=new Yf(a.Pb);b.Ya=a.Ya;a=a.W();b.na=a;return b}return a.Hb()})};m.bb=function(a){var b=a||[];Fd(this,function(a){a!=this&&a.bb(b)}.bind(this));a=C(b);return jc(a)};m.vd=function(a){this.Ya!=a&&(this.Ya=a,this.Pb="and"==this.Pb?"or":"and",K(this).forEach(function(b){return b.vd(a)}))};
m.eval=function(a){var b=K(this).map(function(b){return b.eval(a)});return Zf(this,b)};function Zf(a,b){return"and"==a.Pb?kd(b):ld(b)}m.toString=function(){return"combined_pred_"+this.Pb.toString()};function $f(){this.m=A();this.size=0}m=$f.prototype;m.has=function(a){return this.m.has(a)};m.set=function(a,b){var c=this.m.get(a)||null;null===c&&(c=C(),this.m.set(a,c));c.has(b)||(c.add(b),this.size++);return this};m.ie=function(a,b){var c=this.m.get(a)||null;null===c&&(c=C(),this.m.set(a,c));b.forEach(function(a){c.has(a)||(c.add(a),this.size++)},this);return this};
m.delete=function(a,b){var c=this.m.get(a,null);if(null===c)return!1;var d=c.delete(b);d&&(--this.size,0==c.size&&this.m.delete(a));return d};m.get=function(a){a=this.m.get(a)||null;return null===a?null:jc(a)};m.clear=function(){this.m.clear();this.size=0};m.keys=function(){return Ib(this.m)};m.values=function(){var a=[];this.m.forEach(function(b){a.push.apply(a,jc(b))});return a};function ag(a,b,c){Gd.call(this);this.da=a;this.ia=b;this.F=c;this.Wd=null;a=sd.xc();this.rc=yd(a,this.da.L(),this.F);this.Uf=a.Le.get(this.da.L())||null}t(ag,Gd);m=ag.prototype;m.Hb=function(){var a=new ag(this.da,this.ia,this.F),b=this.W();a.na=b;return a};m.bb=function(a){return null!=a?(a.push(this.da),a.push(this.ia),a):[this.da,this.ia]};
m.reverse=function(){var a=this.F;switch(this.F){case "gt":a="lt";break;case "lt":a="gt";break;case "gte":a="lte";break;case "lte":a="gte"}return new ag(this.ia,this.da,a)};m.eval=function(a){var b=a.entries.filter(function(a){var b=H(a,this.da);a=H(a,this.ia);return this.rc(b,a)},this);return new F(b,G(a))};m.toString=function(){return"join_pred("+this.da.j()+" "+this.F+" "+this.ia.j()+")"};
function bg(a,b,c){var d=null,e=null;-1!=G(b).indexOf(I(a.da.J()))?(d=b,e=c):(d=c,e=b);if(d.entries.length>e.entries.length){a:{b=a.da;a.da=a.ia;a.ia=b;b=a.F;switch(a.F){case "gt":b="lt";break;case "lt":b="gt";break;case "gte":b="lte";break;case "lte":b="gte";break;default:break a}a.F=b;a.rc=yd(sd.xc(),a.da.L(),a.F)}return[e,d]}return[d,e]}function cg(a){var b={};a.bb().forEach(function(a){b[a.getName()]=null});return b}
function dg(a,b,c){null===a.Wd&&(a.Wd=cg(a.ia.J()));var d=new nd(new y(-1,a.Wd),!1);return qd(b,c,d,[I(a.ia.J())])}
function eg(a,b,c,d){var e=[b,c];d||(e=bg(a,b,c));b=e[0];c=e[1];var e=b,g=c,h=a.da,k=a.ia;d&&(e=c,g=b,h=a.ia,k=a.da);var p=new $f,E=[];e.entries.forEach(function(a){var b=String(H(a,h));p.set(b,a)});var ga=G(e),ka=G(g);g.entries.forEach(function(a){var b=H(a,k),c=String(b);null!==b&&p.has(c)?p.get(c).forEach(function(b){b=qd(a,ka,b,ga);E.push(b)}):d&&E.push(dg(this,a,ka))}.bind(a));a=G(b).concat(G(c));return new F(E,a)}
function fg(a,b,c,d,e){function g(a,b){var c=new nd(b,1<ga.length),c=qd(a,ka,c,ga);E.push(c)}var h=d.Nf.J(),k=b,p=c;-1!=G(b).indexOf(I(h))&&(k=c,p=b);var E=[],ga=G(p),ka=G(k);k.entries.forEach(function(a){var b=this.Uf(H(a,d.$f)),b=d.index.get(b);0!=b.length&&(d.index.Ea()?g(a,e.get(b[0])):Oe(e,b).forEach(g.bind(null,a)))},a);a=G(k).concat(G(p));return new F(E,a)};function gg(a,b,c){return null===b?new Id(a,b,c):q(b.j)?new ag(a,b,c):new Id(a,b,c)};var hg={};r("lf.schema.DataStoreType",hg);hg.INDEXED_DB=0;hg.MEMORY=1;hg.LOCAL_STORAGE=2;hg.FIREBASE=3;hg.WEB_SQL=4;hg.OBSERVABLE_STORE=5;function ig(a,b,c,d){this.Pc=a;this.name=b;this.Cc=c;this.f=d}ig.prototype.j=function(){return this.Pc+"."+this.name};function Jf(a){return a.f.some(function(a){return a.ea.Bc()})}function Q(a,b,c,d){this.u=a;this.ga=c;this.I=b;this.qd=d;this.$a=null}r("lf.schema.Table",Q);Q.prototype.getName=f("u");Q.prototype.getName=Q.prototype.getName;Q.prototype.Wa=f("$a");
function I(a){return a.$a||a.u}Q.prototype.lc=function(a){var b=new this.constructor(this.u);b.$a=a;b.kg=this.kg;return b};Q.prototype.as=Q.prototype.lc;Q.prototype.createRow=Q.prototype.yb;Q.prototype.deserializeRow=Q.prototype.ac;Q.prototype.Ba=f("ga");Q.prototype.getIndices=Q.prototype.Ba;Q.prototype.bb=f("I");Q.prototype.getColumns=Q.prototype.bb;Q.prototype.getConstraint=Q.prototype.Ab;Q.prototype.Cb=f("qd");Q.prototype.persistentIndex=Q.prototype.Cb;function R(a,b){this.child=a;this.Fb=b;this.$a=null}m=R.prototype;m.getName=function(){return this.Fb+"("+this.child.getName()+")"};m.j=function(){return this.Fb+"("+this.child.j()+")"};m.J=function(){return this.child.J()};m.toString=function(){return this.j()};m.L=function(){return this.child.L()};m.Wa=f("$a");m.Ba=function(){return[]};m.sa=l(null);m.Bc=l(!1);m.lc=function(a){this.$a=a;return this};R.prototype.as=R.prototype.lc;
function jg(a){for(var b=[a];a instanceof R;)b.push(a.child),a=a.child;return b}function kg(a){this.$a=a||null;this.S=new Q("#UnknownTable",[],[],!1)}m=kg.prototype;m.getName=l("*");m.j=function(){return this.getName()};m.toString=function(){return this.j()};m.J=f("S");m.L=l(4);m.Wa=f("$a");m.Ba=function(){return[]};m.sa=l(null);m.Bc=l(!1);r("lf.fn.avg",function(a){return new R(a,"AVG")});function lg(a){return new R(a||new kg,"COUNT")}r("lf.fn.count",lg);function mg(a){return new R(a,"DISTINCT")}r("lf.fn.distinct",mg);r("lf.fn.max",function(a){return new R(a,"MAX")});r("lf.fn.min",function(a){return new R(a,"MIN")});r("lf.fn.stddev",function(a){return new R(a,"STDDEV")});r("lf.fn.sum",function(a){return new R(a,"SUM")});r("lf.fn.geomean",function(a){return new R(a,"GEOMEAN")});function S(a,b){J.call(this);this.Ff=b}t(S,J);S.prototype.exec=function(a,b){switch(this.Ff){case 1:return ng(this,a,b);case 0:return og(this,a,b);default:return pg(this,a,b)}};S.prototype.toString=l("dummy_node");S.prototype.Qc=function(){return this.toString()};function pg(a,b,c){return new v(function(a){a(this.ba(b,[],c))}.bind(a))}function ng(a,b,c){return Bd(a,0).exec(b,c).then(function(a){return this.ba(b,a,c)}.bind(a))}
function og(a,b,c){var d=K(a).map(function(a){return a.exec(b,c)});return cb(d).then(function(a){var d=[];a.forEach(function(a){for(var b=0;b<a.length;++b)d.push(a[b])});return this.ba(b,d,c)}.bind(a))};function qg(a){S.call(this,0,1);this.se=a}t(qg,S);qg.prototype.toString=function(){return"aggregation("+this.se.map(function(a){return a.j()}).toString()+")"};qg.prototype.ba=function(a,b){b.forEach(function(a){rg(new sg(a,this.se))},this);return b};function sg(a,b){this.Fa=a;this.I=b}
function rg(a){a.I.forEach(function(a){a=jg(a).reverse();for(var c=1;c<a.length;c++){var d=a[c],e=jg(d).slice(-1)[0],g=d.child instanceof R?hd(this.Fa,d.child):this.Fa;if(null!==g.Va&&g.Va.has(d.j()))break;g=tg(d.Fb,g,e);e=this.Fa;null===e.Va&&(e.Va=A());e.Va.set(d.j(),g)}},a)}
function tg(a,b,c){var d=null;switch(a){case "MIN":d=ug(b,c,function(a,b){return b<a?b:a});break;case "MAX":d=ug(b,c,function(a,b){return b>a?b:a});break;case "DISTINCT":d=vg(b,c);break;case "COUNT":d=wg(b,c);break;case "SUM":d=xg(b,c);break;case "AVG":a=wg(b,c);0<a&&(d=xg(b,c)/a);break;case "GEOMEAN":d=yg(b,c);break;default:d=zg(b,c)}return d}function ug(a,b,c){return a.entries.reduce(function(a,e){var g=H(e,b);return null===g?a:null===a?g:c(a,g)},null)}
function wg(a,b){return b instanceof kg?a.entries.length:a.entries.reduce(function(a,d){return a+(ea(H(d,b))?0:1)},0)}function xg(a,b){return ug(a,b,function(a,b){return b+a})}function zg(a,b){var c=[];a.entries.forEach(function(a){a=H(a,b);null===a||c.push(a)});return 0==c.length?null:yb.apply(null,c)}function yg(a,b){var c=0,d=a.entries.reduce(function(a,d){var h=H(d,b);if(0==h||null===h)return a;c++;return a+Math.log(h)},0);return 0==c?null:Math.pow(Math.E,d/c)}
function vg(a,b){var c=A();a.entries.forEach(function(a){var e=H(a,b);c.set(e,a)});return new F(B(c),G(a))};function Ag(a,b){this.xa=a;this.ja=b}Ag.prototype.cb=f("xa");Ag.prototype.Z=f("ja");function Bg(){J.call(this)}t(Bg,J);function Cg(a,b){J.call(this);this.table=a;this.values=b}t(Cg,Bg);function Dg(a,b){Cg.call(this,a,b)}t(Dg,Cg);function Eg(a){J.call(this);this.table=a}t(Eg,Bg);Eg.prototype.toString=function(){return"delete("+this.table.getName()+")"};function Fg(a,b){J.call(this);this.table=a;this.ne=b}t(Fg,Bg);
Fg.prototype.toString=function(){var a=[];this.ne&&(a=this.ne.map(function(a){return a.M.getName()},this));return"update("+this.table.getName()+", ["+a.join(",")+"])"};function Gg(a){J.call(this);this.H=a}t(Gg,Bg);Gg.prototype.toString=function(){return"select("+this.H.toString()+")"};function Hg(a){J.call(this);this.table=a}t(Hg,Bg);Hg.prototype.toString=function(){var a="table_access("+this.table.getName();null===this.table.Wa()||(a+=" as "+this.table.Wa());return a+")"};
function Ig(){J.call(this)}t(Ig,Bg);Ig.prototype.toString=l("cross_product");function Jg(a,b){J.call(this);this.f=a;this.Kb=b}t(Jg,Bg);Jg.prototype.toString=function(){var a="project("+this.f.toString();if(null!==this.Kb)var b=this.Kb.map(function(a){return a.j()}).join(", "),a=a+(", groupBy("+b+")");return a+")"};function Kg(a){J.call(this);this.N=a}t(Kg,Bg);Kg.prototype.toString=function(){return"order_by("+Rd(this.N)+")"};function Lg(a){J.call(this);this.f=a}t(Lg,Bg);
Lg.prototype.toString=function(){return"aggregation("+this.f.toString()+")"};function Mg(a){J.call(this);this.f=a}t(Mg,Bg);Mg.prototype.toString=function(){return"group_by("+this.f.toString()+")"};function Ng(a){J.call(this);this.X=a}t(Ng,Bg);Ng.prototype.toString=function(){return"limit("+this.X+")"};function Og(a){J.call(this);this.O=a}t(Og,Bg);Og.prototype.toString=function(){return"skip("+this.O+")"};function Pg(a,b){J.call(this);this.H=a;this.Mb=b}t(Pg,Bg);
Pg.prototype.toString=function(){return"join(type: "+(this.Mb?"outer":"inner")+", "+this.H.toString()+")"};function Qg(){};function Rg(){}t(Rg,Qg);Rg.prototype.ib=function(a){this.V=a;this.Ua(this.V);return this.V};Rg.prototype.Ua=function(a){if(a instanceof Gg){var b=Sg(this,a.H),b=Tg(this,b);Wf(a,a,b[0],b[1]);a==this.V&&(this.V=b[0]);a=b[0]}K(a).forEach(function(a){this.Ua(a)},this)};function Sg(a,b){if(0==K(b).length||"and"!=b.Pb)return[b];var c=K(b).slice().map(function(a){b.removeChild(a);return Sg(this,a)},a);return Ca(c)}
function Tg(a,b){var c=null,d=null;b.map(function(a,b){var h=new Gg(a);0==b?c=h:L(d,h);d=h},a);return[c,d]};function Ug(){}t(Ug,Qg);Ug.prototype.ib=function(a){this.V=a;this.Ua(this.V);return this.V};Ug.prototype.Ua=function(a){if(a instanceof Ig)for(;2<K(a).length;){for(var b=new Ig,c=0;2>c;c++){var d=Dd(a,0);L(b,d)}Cd(a,b,0)}K(a).forEach(function(a){this.Ua(a)},this)};function Vg(){S.call(this,0,0)}t(Vg,S);Vg.prototype.toString=l("cross_product");Vg.prototype.ba=function(a,b){for(var c=b[0],d=b[1],e=[],g=G(c),h=G(d),k=0;k<c.entries.length;k++)for(var p=0;p<d.entries.length;p++){var E=qd(c.entries[k],g,d.entries[p],h);e.push(E)}c=G(c).concat(G(d));return[new F(e,c)]};function Wg(a,b){Ud.call(this,a,b);this.Qa=a.l(Wb);this.Bb=a.l(Xb)}t(Wg,Ud);Wg.prototype.getPriority=l(2);Wg.prototype.Zd=function(a){0==this.L()?Xg(this,a):this.Mc()};function Xg(a,b){a.sd.forEach(function(a,d){a instanceof Qd&&Xd(this.Bb,a,b[d])},a)}Wg.prototype.Mc=function(){var a=Zd(this.Bb,this.Z());0!=a.length&&(a=new Wd(this.global,a),$d(this.Qa,a))};function Yg(a){Ld.call(this,a)}t(Yg,Ld);Yg.prototype.Z=function(){var a=C();a.add(this.c);var b=this.ea.info();Zg(this.c.getName(),b.g).forEach(a.add.bind(a));return a};Yg.prototype.clone=function(){var a=new Yg(this.ea);Od(a,this);a.c=this.c;return a};Yg.prototype.bind=function(a){Yg.Eb.bind.call(this,a);Pd(this,a);return this};function $g(a){Ld.call(this,a)}t($g,Ld);$g.prototype.Z=function(){var a=C();a.add(this.Da);var b=this.ea.info();Zg(this.Da.getName(),b.Te).forEach(a.add.bind(a));this.Xb&&Zg(this.Da.getName(),b.g).forEach(a.add.bind(a));return a};$g.prototype.clone=function(){var a=new $g(this.ea);Od(a,this);a.Da=this.Da;this.values&&(a.values=this.values instanceof rd?this.values:this.values.slice());a.Xb=this.Xb;a.Yb=this.Yb;return a};
$g.prototype.bind=function(a){$g.Eb.bind.call(this,a);this.Yb&&(this.values=this.Yb instanceof rd?a[this.Yb.sa()]:this.Yb.map(function(b){return b instanceof rd?a[b.sa()]:b}));return this};function ah(a){Ld.call(this,a)}t(ah,Ld);ah.prototype.Z=function(){var a=C();a.add(this.table);var b=this.set.map(function(a){return a.M.j()}),c=this.ea.info();bh(c,b).forEach(a.add.bind(a));ch(c,b).forEach(a.add.bind(a));return a};ah.prototype.clone=function(){var a=new ah(this.ea);Od(a,this);a.table=this.table;a.set=this.set?this.set.slice():this.set;return a};ah.prototype.bind=function(a){ah.Eb.bind.call(this,a);this.set.forEach(function(b){-1!=b.Wc&&(b.value=a[b.Wc])});Pd(this,a);return this};function dh(a,b){if(null==b)return"NULL";switch(a){case 1:return b?1:0;case 3:case 4:return b;case 0:return"'"+rb(b)+"'";default:return"'"+b.toString()+"'"}}function eh(a,b){var c=a.Xb?"INSERT OR REPLACE":"INSERT",d=a.Da.bb(),c=c+(" INTO "+a.Da.getName()+"("),c=c+d.map(function(a){return a.getName()}).join(", "),c=c+") VALUES (";return a.values.map(function(a){var g=d.map(function(c){var d=a.o[c.getName()];return b?null!=d?"#":"NULL":dh(c.L(),d)});return c+g.join(", ")+");"}).join("\n")}
function fh(a){switch(a){case "between":return"BETWEEN";case "eq":return"=";case "gte":return">=";case "gt":return">";case "in":return"IN";case "lte":return"<=";case "lt":return"<";case "match":return"LIKE";case "neq":return"<>";default:return"UNKNOWN"}}function gh(a,b,c,d){return a instanceof rd?"?"+a.sa().toString():d?null!=a?"#":"NULL":"match"==b?"'"+a.toString()+"'":"in"==b?"("+a.map(function(a){return dh(c,a)}).join(", ")+")":"between"==b?dh(c,a[0])+" AND "+dh(c,a[1]):dh(c,a).toString()}
function hh(a,b){return K(a).map(function(a){return"("+ih(a,b)+")"}).join("and"==a.Pb?" AND ":" OR ")}function jh(a){return[a.da.j(),fh(a.F),a.ia.j()].join(" ")}function ih(a,b){if(a instanceof Id){var c=a.M.j(),d=fh(a.F),e=gh(a.value,a.F,a.M.L(),b);return"="==d&&"NULL"==e?[c,"IS NULL"].join(" "):"<>"==d&&"NULL"==e?[c,"IS NOT NULL"].join(" "):[c,d,e].join(" ")}if(a instanceof Yf)return hh(a,b);if(a instanceof ag)return jh(a);throw new D(357,typeof a);}
function kh(a,b){var c=ih(a,b);return c?" WHERE "+c:""}function lh(a,b){var c="UPDATE "+a.table.getName()+" SET ",c=c+a.set.map(function(a){var b=a.M.j()+" = ";return-1!=a.Wc?b+"?"+a.Wc.toString():b+dh(a.M.L(),a.value).toString()}).join(", ");a.B&&(c+=kh(a.B,b));return c+";"}
function mh(a,b){var c="*";a.f.length&&(c=a.f.map(function(a){return a.Wa()?a.j()+" AS "+a.Wa():a.j()}).join(", "));c="SELECT "+c+" FROM ";null!=a.sb&&0!=a.sb.size?c+=nh(a,b):(c+=a.c.map(oh).join(", "),a.B&&(c+=kh(a.B,b)));if(a.N)var d=a.N.map(function(a){return a.M.j()+(0==a.gb?" DESC":" ASC")}).join(", "),c=c+(" ORDER BY "+d);a.fa&&(d=a.fa.map(function(a){return a.j()}).join(", "),c+=" GROUP BY "+d);a.X&&(c+=" LIMIT "+a.X.toString());a.O&&(c+=" SKIP "+a.O.toString());return c+";"}
function oh(a){return I(a)!=a.getName()?a.getName()+" AS "+I(a):a.getName()}function nh(a,b){for(var c=Rf(a.B,function(a){return a instanceof ag}),d=c.map(jh),e=oh(a.c[0]),g=1;g<a.c.length;g++)var h=oh(a.c[g]),e=a.sb.has(c[d.length-g].W())?e+(" LEFT OUTER JOIN "+h):e+(" INNER JOIN "+h),e=e+(" ON ("+d[d.length-g]+")");c=Bd(a.B,0);c instanceof ag||(e+=" WHERE "+ih(c,b));return e}
function ph(a,b){var c=b||!1,d=a.a.clone();if(d instanceof $g)return eh(d,c);if(d instanceof Yg){var e="DELETE FROM "+d.c.getName();d.B&&(e+=kh(d.B,c));return e+";"}if(d instanceof ah)return lh(d,c);if(d instanceof Qd)return mh(d,c);throw new D(358,typeof d);};function T(a,b){this.global=a;this.jg=a.l(Vb);this.Qa=a.l(Wb);this.a=b}r("lf.query.BaseBuilder",T);T.prototype.exec=function(){try{this.ab()}catch(a){return $a(a)}return new v(function(a,c){var d=new Wg(this.global,[this.zc()]);$d(this.Qa,d).then(function(c){a(fd(c[0]))},c)},this)};T.prototype.exec=T.prototype.exec;T.prototype.Hf=function(){var a=function(a){return a.Qc(this.a)+"\n"}.bind(this);return Xf(qh(this).cb(),a)};T.prototype.explain=T.prototype.Hf;
T.prototype.bind=function(a){this.a.bind(a);return this};T.prototype.bind=T.prototype.bind;T.prototype.qg=function(a){return ph(this,a)};T.prototype.toSql=T.prototype.qg;T.prototype.ab=aa();function qh(a){if(null==a.Ue){var b;b=a.jg;var c=a.a,d=b.Xf.create(c);b=b.gg.create(d,c);a.Ue=b}return a.Ue}T.prototype.zc=function(){return{context:this.a.clone(),be:qh(this)}};function rh(a){T.call(this,a,new Yg(a.l(Yb)))}t(rh,T);r("lf.query.DeleteBuilder",rh);rh.prototype.c=function(a){if(null!=this.a.c)throw new D(515);this.a.c=a;return this};rh.prototype.from=rh.prototype.c;rh.prototype.B=function(a){this.Bd();this.a.B=a;return this};rh.prototype.where=rh.prototype.B;rh.prototype.Bd=function(){if(null==this.a.c)throw new D(548);if(null!=this.a.B)throw new D(516);};rh.prototype.ab=function(){rh.Eb.ab.call(this);if(null==this.a.c)throw new D(517);};function sh(a,b){T.call(this,a,new $g(a.l(Yb)));this.a.Xb=b||!1}t(sh,T);r("lf.query.InsertBuilder",sh);sh.prototype.ab=function(){sh.Eb.ab.call(this);var a=this.a;if(null==a.Da||null==a.values)throw new D(518);if(a.Xb&&null===a.Da.Ab().fd())throw new D(519);};sh.prototype.Da=function(a){if(null!=this.a.Da)throw new D(520);this.a.Da=a;return this};sh.prototype.into=sh.prototype.Da;
sh.prototype.values=function(a){if(null!=this.a.values)throw new D(521);a instanceof rd||a.some(function(a){return a instanceof rd})?this.a.Yb=a:this.a.values=a;return this};sh.prototype.values=sh.prototype.values;function th(a){return uh("and",Array.prototype.slice.call(arguments))}r("lf.op.and",th);r("lf.op.or",function(a){return uh("or",Array.prototype.slice.call(arguments))});function uh(a,b){var c=new Yf(a);b.forEach(function(a){L(c,a)});return c}r("lf.op.not",function(a){a.vd(!0);return a});function U(a,b){T.call(this,a,new Qd(a.l(Yb)));this.Be=this.wd=!1;this.a.f=b;vh(this);wh(this)}t(U,T);r("lf.query.SelectBuilder",U);U.prototype.ab=function(){U.Eb.ab.call(this);var a=this.a;if(null==a.c)throw new D(522);if(q(a.Ob)&&!q(a.X)||q(a.Vb)&&!q(a.O))throw new D(523);null!=this.a.fa?xh(this):yh(this)};function vh(a){var b=a.a.f.filter(function(a){return a instanceof R&&"DISTINCT"==a.Fb},a);if(0!=b.length&&(1!=b.length||1!=a.a.f.length))throw new D(524);}
function xh(a){var b=a.a.f.filter(function(a){return!(a instanceof R)}).map(function(a){return a.j()}),c=!1;if(0==a.a.fa.length||0==a.a.f.length)c=!0;else{var d=a.a.fa.map(function(a){return a.j()});(c=b.some(function(a){return-1==d.indexOf(a)}))||(c=a.a.fa.some(function(a){a=a.L();return 6==a||0==a}))}if(c)throw new D(525);}function yh(a){var b=a.a.f.some(function(a){return a instanceof R},a);a=a.a.f.some(function(a){return!(a instanceof R)},a)||0==a.a.f.length;if(b&&a)throw new D(526);}
function wh(a){a.a.f.forEach(function(a){if(a instanceof R&&!zh(a.Fb,a.L()))throw new D(527,a.j());},a)}function Ah(a,b){if(null==a.a.c)throw new D(b);}U.prototype.c=function(a){if(this.Be)throw new D(515);this.Be=!0;null==this.a.c&&(this.a.c=[]);this.a.c.push.apply(this.a.c,Array.prototype.slice.call(arguments));return this};U.prototype.from=U.prototype.c;U.prototype.B=function(a){Ah(this,548);if(this.wd)throw new D(516);this.wd=!0;Bh(this,a);return this};U.prototype.where=U.prototype.B;
function Bh(a,b){if(null!=a.a.B){var c=th(b,a.a.B);a.a.B=c}else a.a.B=b}U.prototype.Qf=function(a,b){Ah(this,542);if(this.wd)throw new D(547);this.a.c.push(a);Bh(this,b);return this};U.prototype.innerJoin=U.prototype.Qf;U.prototype.Vf=function(a,b){Ah(this,542);if(!(b instanceof ag))throw new D(541);if(this.wd)throw new D(547);this.a.c.push(a);null==this.a.sb&&(this.a.sb=C());var c=b;I(a)!=I(b.ia.J())&&(c=b.reverse());this.a.sb.add(c.W());Bh(this,c);return this};U.prototype.leftOuterJoin=U.prototype.Vf;
U.prototype.X=function(a){if(null!=(this.a.X||this.a.Ob))throw new D(528);if(a instanceof rd)this.a.Ob=a;else{if(0>a)throw new D(531);this.a.X=a}return this};U.prototype.limit=U.prototype.X;U.prototype.O=function(a){if(null!=(this.a.O||this.a.Vb))throw new D(529);if(a instanceof rd)this.a.Vb=a;else{if(0>a)throw new D(531);this.a.O=a}return this};U.prototype.skip=U.prototype.O;U.prototype.N=function(a,b){Ah(this,549);null==this.a.N&&(this.a.N=[]);this.a.N.push({M:a,gb:null!=b?b:1});return this};
U.prototype.orderBy=U.prototype.N;U.prototype.fa=function(a){Ah(this,549);if(null!=this.a.fa)throw new D(530);null==this.a.fa&&(this.a.fa=[]);this.a.fa.push.apply(this.a.fa,Array.prototype.slice.call(arguments));return this};U.prototype.groupBy=U.prototype.fa;function zh(a,b){switch(a){case "COUNT":case "DISTINCT":return!0;case "AVG":case "GEOMEAN":case "STDDEV":case "SUM":return 4==b||3==b;case "MAX":case "MIN":return 4==b||3==b||5==b||2==b}return!1}
U.prototype.clone=function(){var a=new U(this.global,this.a.f);a.a=this.a.clone();a.a.$c=null;return a};U.prototype.clone=U.prototype.clone;function Ch(a,b){T.call(this,a,new ah(a.l(Yb)));this.a.table=b}t(Ch,T);r("lf.query.UpdateBuilder",Ch);Ch.prototype.set=function(a,b){var c={Wc:b instanceof rd?b.sa():-1,M:a,value:b};null!=this.a.set?this.a.set.push(c):this.a.set=[c];return this};Ch.prototype.set=Ch.prototype.set;Ch.prototype.B=function(a){this.Bd();this.a.B=a;return this};Ch.prototype.where=Ch.prototype.B;Ch.prototype.Bd=function(){if(null!=this.a.B)throw new D(516);};
Ch.prototype.ab=function(){Ch.Eb.ab.call(this);if(null==this.a.set)throw new D(532);if(this.a.set.some(function(a){return a.value instanceof rd}))throw new D(501);};function Dh(a){this.a=a;this.xa=null}Dh.prototype.ec=function(){null===this.xa&&(this.xa=this.dd());return this.xa};function Eh(a){Dh.call(this,a)}t(Eh,Dh);Eh.prototype.dd=function(){return this.a.Xb?new Dg(this.a.Da,this.a.values):new Cg(this.a.Da,this.a.values)};function Fh(a){Dh.call(this,a)}t(Fh,Dh);Fh.prototype.dd=function(){var a=new Fg(this.a.table,this.a.set),b=null!=this.a.B?new Gg(this.a.B.Hb()):null,c=new Hg(this.a.table);null===b?L(a,c):(L(b,c),L(a,b));return a};function Gh(a,b,c){this.xa=a;this.ce=b;this.Sb=c}Gh.prototype.ec=function(){this.Sb.forEach(function(a){this.xa=a.ib(this.xa,this.ce)},this);return this.xa};function Hh(a,b){Dh.call(this,a);this.Sb=b}t(Hh,Dh);Hh.prototype.dd=function(){var a=new Eg(this.a.c),b=null!=this.a.B?new Gg(this.a.B.Hb()):null,c=new Hg(this.a.c);null===b?L(a,c):(L(b,c),L(a,b));return(new Gh(a,this.a,this.Sb)).ec()};function Ih(){}t(Ih,Qg);Ih.prototype.ib=function(a,b){this.V=a;this.Ua(this.V,b);return this.V};Ih.prototype.Ua=function(a,b){if(a instanceof Gg&&a.H instanceof ag){var c=a.H.W(),d=Bd(a,0);d instanceof Ig&&(c=q(b)&&null!=b.sb&&b.sb.has(c),c=new Pg(a.H,c),Wf(a,d,c,c),a==this.V&&(this.V=c),a=c)}K(a).forEach(function(a){this.Ua(a,b)},this)};function Jh(){this.Vc=C()}t(Jh,Qg);Jh.prototype.ib=function(a){this.Vc.clear();this.V=a;this.Ua(this.V);this.Vc.clear();return this.V};Jh.prototype.Ua=function(a){if(Kh(a)){var b=a.H instanceof Id?Lh(this,a):Mh(this,a);this.Vc.add(a);b==a&&(b=Bd(a,0));null!==b&&(ea(b.getParent())&&(this.V=b),Kh(b)&&!this.Vc.has(b)&&this.Ua(b))}else K(a).forEach(function(a){this.Ua(a)},this)};
function Nh(a,b,c){var d=b;if(Bd(b,0)instanceof Gg)d=Uf(b),Nh(a,b,c);else if(Oh(b)){var e=[],d=Vf(b,c,function(a){a=new Gg(a.H);e.push(a);return a});e.forEach(function(a){Nh(this,a,c)},a)}return d}function Lh(a,b){var c=C([I(b.H.M.J())]),d=function(a){return Ph(this,a,c)}.bind(a);return Nh(a,b,d)}function Mh(a,b){var c=C([I(b.H.da.J()),I(b.H.ia.J())]),d=function(a){return Ph(this,a,c)}.bind(a);return Nh(a,b,d)}
function Ph(a,b,c){var d=C();Qf(b).forEach(function(a){d.add(I(a.table))},a);b instanceof Hg&&d.add(I(b.table));return kc(d,c)}function Kh(a){return a instanceof Gg&&!(a.H instanceof Yf)}function Oh(a){a=Bd(a,0);return a instanceof Ig||a instanceof Pg};function Qh(a,b){Dh.call(this,a);this.Sb=b;this.Ye=this.Pe=this.ef=this.Se=this.te=this.Ee=this.df=this.ye=this.gf=null}t(Qh,Dh);
Qh.prototype.dd=function(){Rh(this);2<=this.a.c.length&&(this.ye=new Ig);this.df=null!=this.a.B?new Gg(this.a.B.Hb()):null;this.a.N&&(this.Se=new Kg(this.a.N));null!=this.a.O&&0<this.a.O&&(this.ef=new Og(this.a.O));null!=this.a.X&&(this.Pe=new Ng(this.a.X));null!=this.a.fa&&(this.Ee=new Mg(this.a.fa));Sh(this);this.Ye=new Jg(this.a.f||[],this.a.fa||null);var a=Th(this);return(new Gh(a,this.a,this.Sb)).ec()};
function Th(a){for(var b=[a.Pe,a.ef,a.Ye,a.Se,a.te,a.Ee,a.df,a.ye],c=null,d=null,e=0;e<b.length;e++){var g=b[e];null!==g&&(null===d?d=g:L(b[c],g),c=e)}a.gf.forEach(function(a){L(b[c],a)});return d}function Rh(a){a.gf=a.a.c.map(function(a){return new Hg(a)},a)}function Sh(a){var b=a.a.f.filter(function(a){return a instanceof R});null!=a.a.N&&a.a.N.forEach(function(a){a.M instanceof R&&b.push(a.M)});0<b.length&&(a.te=new Lg(b))};function Uh(){this.he=[new Rg,new Ug,new Jh,new Ih];this.Hd=[new Rg]}Uh.prototype.create=function(a){var b=null;if(a instanceof $g)b=new Eh(a);else if(a instanceof Yg)b=new Hh(a,this.Hd);else if(a instanceof Qd)b=new Qh(a,this.he);else if(a instanceof ah)b=new Fh(a);else throw new D(513);b=b.ec();return new Ag(b,a.Z())};function Vh(a){S.call(this,0,1);this.S=a}t(Vh,S);Vh.prototype.toString=function(){return"delete("+this.S.getName()+")"};Vh.prototype.ba=function(a,b){var c=b[0].entries.map(function(a){return a.ra});a.remove(this.S,c);return[jd()]};function Wh(a,b){S.call(this,0,-1);this.table=b;this.G=a.l(Tb)}t(Wh,S);Wh.prototype.toString=function(){return"get_row_count("+this.table.getName()+")"};Wh.prototype.ba=function(){var a=this.G.get(this.table.u+".#"),b=new F([],[this.table.getName()]),c=lg(),a=a.Sa().qa;null===b.Va&&(b.Va=A());b.Va.set(c.j(),a);return[b]};function Xh(a,b){S.call(this,0,-1);this.ka=a.l(Sb);this.G=a.l(Tb);this.table=b}t(Xh,S);Xh.prototype.toString=function(){var a="table_access("+this.table.getName();null===this.table.Wa()||(a+=" as "+this.table.Wa());return a+")"};Xh.prototype.ba=function(){var a=this.G.get(this.table.u+".#").Xa();return[md(Oe(this.ka,a),[I(this.table)])]};function Yh(a){this.h=a}t(Yh,Qg);Yh.prototype.ib=function(a,b){this.V=a;if(!this.Cd(b))return a;var c=Rf(a,function(a){return a instanceof Xh})[0],d=new Wh(this.h,c.table);Wf(c,c,d,d);return this.V};Yh.prototype.Cd=function(a){return 1==a.f.length&&1==a.c.length&&null==a.B&&null==a.X&&null==a.O&&null==a.fa?(a=a.f[0],a instanceof R&&"COUNT"==a.Fb&&a.child instanceof kg):!1};function Zh(a){S.call(this,0,1);this.De=a}t(Zh,S);Zh.prototype.toString=function(){return"groupBy("+this.De.map(function(a){return a.j()}).toString()+")"};Zh.prototype.ba=function(a,b){return $h(this,b[0])};function $h(a,b){var c=new $f,d=function(a){return this.De.map(function(b){return H(a,b)},this).join(",")}.bind(a);b.entries.forEach(function(a){c.set(d(a),a)},a);return c.keys().map(function(a){return new F(c.get(a),G(b))},a)};function ai(a,b,c){S.call(this,0,0);this.G=a.l(Tb);this.ka=a.l(Sb);this.H=b;this.Mb=c;this.zd="eq"==this.H.F?0:2;this.Fe=null}t(ai,S);var bi=["hash","index_nested_loop","nested_loop"];ai.prototype.toString=function(){return"join(type: "+(this.Mb?"outer":"inner")+", impl: "+bi[this.zd]+", "+this.H.toString()+")"};
ai.prototype.ba=function(a,b){switch(this.zd){case 0:return[eg(this.H,b[0],b[1],this.Mb)];case 1:return[fg(this.H,b[0],b[1],this.Fe,this.ka)];default:var c=this.H,d=b[0],e=b[1],g=this.Mb,h=[d,e];g||(h=bg(c,d,e));for(var d=h[0],e=h[1],h=[],k=G(d),p=G(e),E=d.entries.length,ga=e.entries.length,ka=ga+256-1>>8,Ua=0;Ua<ka;){for(var Ub=0;Ub<E;Ub++){var Nf=!1,Of=H(d.entries[Ub],c.da);if(null!==Of)for(var ci=Math.min(Ua+1<<8,ga),Nc=Ua<<8;Nc<ci;Nc++)if(c.rc(Of,H(e.entries[Nc],c.ia))){var Nf=!0,dj=qd(d.entries[Ub],
k,e.entries[Nc],p);h.push(dj)}g&&!Nf&&h.push(dg(c,d.entries[Ub],k))}Ua++}c=G(d).concat(G(e));return[new F(h,c)]}};function di(a,b){a.zd=1;var c=a.G.get(b.sa().j());a.Fe={Nf:b,$f:b==a.H.da?a.H.ia:a.H.da,index:c}};function ei(a){S.call(this,0,-1);this.$e=a}t(ei,S);ei.prototype.toString=function(){return"no_op_step("+G(this.$e[0]).join(",")+")"};ei.prototype.ba=f("$e");function fi(){}t(fi,Qg);fi.prototype.ib=function(a,b){this.V=a;if(!this.Cd(b))return a;Rf(a,function(a){return a instanceof ai}).forEach(this.ig,this);return this.V};fi.prototype.Cd=function(a){return 1<a.c.length};
fi.prototype.ig=function(a){if("eq"==a.H.F&&!a.Mb){var b=function(b){if(!(b instanceof Xh))return null;b=I(b.table)==I(a.H.ia.J())?a.H.ia:a.H.da;return ea(b.sa())?null:b},c=b(Bd(a,0)),b=b(Bd(a,1));if(null!==c||null!==b){b=null===b?c:b;di(a,b);var d=new F([],[I(b.J())]);Ed(a,new ei([d]),b==c?0:1)}}};function gi(a){a=a.map(function(a){return a.ta()});a=Db.apply(null,a);var b=[];Cb(a,function(a){b.push(a)});return b}function hi(a){this.Lb=a}hi.prototype.ed=function(){return 1==this.Lb.f.length?[bd()]:[this.Lb.f.map(function(){return bd()})]};function ii(a,b){this.Lb=a;this.wa=b;this.Fd=this.Ne=null}
function ji(a,b){var c=A();a.wa.keys().forEach(function(a){var e=this.wa.get(a).map(function(a){return Md(b,a)},this),g=new Lf([bd()]);e.forEach(function(a){var b=null;"between"==a.F?b=new Yc(a.value[0],a.value[1],!1,!1):"eq"==a.F?(b=a.value,b=new Yc(b,b,!1,!1)):b="gte"==a.F?new Yc(a.value,null,!1,!1):"gt"==a.F?new Yc(a.value,null,!0,!1):"lte"==a.F?new Yc(null,a.value,!1,!1):new Yc(null,a.value,!1,!0);a=a.Ya?Zc(b):[b];a=new Lf(a);g=Mf(g,a)});c.set(a,g)},a);return c}
ii.prototype.ed=function(a){if(this.Ne==a)return this.Fd;for(var b=ji(this,a),c=this.Lb.f.length-1;0<=c;c--){var d=this.Lb.f[c];if(null!==(b.get(d.ea.getName())||null))break;b.set(d.ea.getName(),new Lf([bd()]))}this.Fd=1==this.Lb.f.length?B(b)[0].ta():gi(ki(this,b));this.Ne=a;return this.Fd};function ki(a,b){var c=A(),d=0;a.Lb.f.forEach(function(a){c.set(a.ea.getName(),d);d++});return Ib(b).sort(function(a,b){return c.get(a)-c.get(b)}).map(function(a){return b.get(a)})};function li(a,b){this.hf=b;this.G=a.l(Tb)}function mi(a,b,c){c=c.filter(a.Rf,a);if(0==c.length)return null;a=ni(a,c);if(0==a.length)return null;if(1==a.length)return a[0];var d=Number.MAX_VALUE;return a.reduce(function(a,c){var h=oi(c,b);return h<d?(d=h,c):a},null)}
function ni(a,b){return a.hf.Ba().map(function(a){a=new pi(this.G,a);qi(a,b);return a},a).filter(function(a){if(null===a.wa)a=!1;else{for(var b=!1,e=!0,g=0;g<a.qb.f.length;g++){var h=a.wa.has(a.qb.f[g].ea.getName());if(b&&h){e=!1;break}h||(b=!0)}a=e}return a})}li.prototype.Rf=function(a){var b;if(b=a instanceof Id)Jd(a),b=null!==a.value&&("between"==a.F||"eq"==a.F||"gt"==a.F||"gte"==a.F||"lt"==a.F||"lte"==a.F);return b?a.M.J()==this.hf:!1};
function pi(a,b){this.G=a;this.qb=b;this.Of=C(this.qb.f.map(function(a){return a.ea.getName()}));this.Td=this.wa=null}function ri(a){null===a.Td&&(a.Td=new ii(a.qb,a.wa));return a.Td}function qi(a,b){b.forEach(function(a){var b=a.bb()[0].getName();this.Of.has(b)&&(null===this.wa&&(this.wa=new $f),this.wa.set(b,a.W()))},a)}function oi(a,b){var c=ri(a).ed(b),d=a.G.get(a.qb.j());return c.reduce(function(a,b){return a+d.bd(b)},0)};function si(a,b,c,d){S.call(this,0,-1);this.G=a.l(Tb);this.index=b;this.Me=c;this.fe=d;this.Uc=this.Tc=!1}t(si,S);si.prototype.toString=function(){return"index_range_scan("+this.index.j()+", ?, "+(this.fe?"reverse":"natural")+(this.Tc?", limit:?":"")+(this.Uc?", skip:?":"")+")"};si.prototype.Qc=function(a){var b=this.toString(),c=this.Me.ed(a),b=b.replace("?",c.toString());this.Tc&&(b=b.replace("?",a.X.toString()));this.Uc&&(b=b.replace("?",a.O.toString()));return b};
si.prototype.ba=function(a,b,c){a=this.Me.ed(c);b=this.G.get(this.index.j());c=(1==a.length&&a[0]instanceof Yc&&dd(a[0])?Se(b.get(a[0].c),!1,this.Tc?c.X:void 0,this.Uc?c.O:void 0):b.Xa(a,this.fe,this.Tc?c.X:void 0,this.Uc?c.O:void 0)).map(function(a){return new y(a,{})},this);return[md(c,[this.index.Pc])]};function ti(a){S.call(this,0,1);this.rd=a}t(ti,S);ti.prototype.toString=l("select(?)");ti.prototype.Qc=function(a){a=Md(a,this.rd);return this.toString().replace("?",a.toString())};ti.prototype.ba=function(a,b,c){return[Md(c,this.rd).eval(b[0])]};function ui(a,b){S.call(this,0,1);this.ka=a.l(Sb);this.S=b}t(ui,S);ui.prototype.toString=function(){return"table_access_by_row_id("+this.S.getName()+")"};ui.prototype.ba=function(a,b){return[md(Oe(this.ka,gd(b[0])),[I(this.S)])]};function vi(a){this.h=a}t(vi,Qg);vi.prototype.ib=function(a,b){this.V=a;Rf(a,function(a){return a instanceof Xh}).forEach(function(a){var d=wi(a);if(0!=d.length){var e=mi(new li(this.h,a.table),b,d.map(function(a){return Md(b,a.rd)}));if(null!==e){var g=A();d.forEach(function(a){g.set(a.rd,a)},this);this.V=xi(this,e,g,a)}}},this);return this.V};function wi(a){var b=[];for(a=a.getParent();a;)a instanceof ti&&b.push(a),a=a.getParent();return b}
function xi(a,b,c,d){(null===b.wa?[]:b.wa.values()).map(function(a){return c.get(a)}).forEach(Sf);b=new si(a.h,b.qb,ri(b),!1);a=new ui(a.h,d.table);L(a,b);Wf(d,d,a,b);return b.cb()};function yi(a,b){S.call(this,0,-1);this.G=a.l(Tb);this.S=b}t(yi,S);yi.prototype.toString=function(){return"insert("+this.S.getName()+")"};yi.prototype.ba=function(a,b,c){zi(this.S,c.values,this.G);a.rb(this.S,c.values);return[md(c.values,[this.S.getName()])]};function zi(a,b,c){a=a.Ab().fd();if(null===a?0:a.f[0].autoIncrement){var d=a.f[0].ea.getName();c=c.get(a.j()).max();var e=null===c?0:c[0];b.forEach(function(a){if(0==a.o[d]||null==a.o[d])e++,a.o[d]=e})}}
function Ai(a,b){S.call(this,0,-1);this.G=a.l(Tb);this.S=b}t(Ai,S);Ai.prototype.toString=function(){return"insert_replace("+this.S.getName()+")"};Ai.prototype.ba=function(a,b,c){zi(this.S,c.values,this.G);a.Od(this.S,c.values);return[md(c.values,[this.S.getName()])]};function Bi(){S.call(this,0,1)}t(Bi,S);Bi.prototype.toString=l("limit(?)");Bi.prototype.Qc=function(a){return this.toString().replace("?",a.X.toString())};Bi.prototype.ba=function(a,b,c){b[0].entries.splice(c.X);return b};function Ci(a){S.call(this,0,1);this.N=a}t(Ci,S);m=Ci.prototype;m.toString=function(){return"order_by("+Rd(this.N)+")"};m.ba=function(a,b){if(1==b.length){var c;c=b[0];for(var d=null,e=0;e<this.N.length;e++){var g=mg(this.N[e].M);if(null!==c.Va&&c.Va.has(g.j())){d=g;break}}c=d;(null===c?b[0]:hd(b[0],c)).entries.sort(this.Ef.bind(this))}else b.sort(this.lg.bind(this));return b};
m.U=function(a,b){var c=null,d=null,e=null,g=-1;do g++,e=this.N[g].M,c=this.N[g].gb,d=a(e),e=b(e);while(d==e&&g+1<this.N.length);d=d<e?-1:d>e?1:0;return 1==c?d:-d};m.lg=function(a,b){return this.U(function(b){return b instanceof R?hd(a,b):H(a.entries[a.entries.length-1],b)},function(a){return a instanceof R?hd(b,a):H(b.entries[b.entries.length-1],a)})};m.Ef=function(a,b){return this.U(function(b){return H(a,b)},function(a){return H(b,a)})};function Di(a,b){this.Fa=a;this.I=b}function Ei(a){return a.I.some(function(a){return a instanceof R},a)?Fi(a):Gi(a)}function Fi(a){if(1==a.I.length&&"DISTINCT"==a.I[0].Fb)return a=hd(a.Fa,a.I[0]).entries.map(function(a){var b=new nd(new y(-1,{}),1<this.Fa.K.size);pd(b,this.I[0],H(a,this.I[0].child));return b},a),new F(a,[]);var b=new nd(new y(-1,{}),1<a.Fa.K.size);a.I.forEach(function(a){var d=a instanceof R?hd(this.Fa,a):H(this.Fa.entries[0],a);pd(b,a,d)},a);return new F([b],G(a.Fa))}
function Gi(a){var b=Array(a.Fa.entries.length),c=1<a.Fa.K.size;a.Fa.entries.forEach(function(a,e){b[e]=new nd(new y(a.ra.id(),{}),c);this.I.forEach(function(c){pd(b[e],c,H(a,c))},this)},a);return new F(b,G(a.Fa))}function Hi(a,b){var c=a.map(function(a){return Ei(new Di(a,b)).entries[0]});return new F(c,G(a[0]))};function Ii(a,b){S.call(this,0,1);this.f=a;this.Kb=b}t(Ii,S);Ii.prototype.toString=function(){var a="project("+this.f.toString();if(null!==this.Kb)var b=this.Kb.map(function(a){return a.j()}).join(", "),a=a+(", groupBy("+b+")");return a+")"};Ii.prototype.ba=function(a,b){var c;0==b.length?c=[jd()]:1==b.length?(c=b[0],c=[0==this.f.length?c:Ei(new Di(c,this.f))]):c=[Hi(b,this.f)];return c};function Ji(a){return a.f.some(function(a){return a instanceof R})||null!==a.Kb};function Ki(){S.call(this,0,1)}t(Ki,S);Ki.prototype.toString=l("skip(?)");Ki.prototype.Qc=function(a){return this.toString().replace("?",a.O.toString())};Ki.prototype.ba=function(a,b,c){return[new F(b[0].entries.slice(c.O),G(b[0]))]};function Li(){}t(Li,Qg);Li.prototype.ib=function(a){var b=Rf(a,function(a){return a instanceof Bi||a instanceof Ki});if(0==b.length)return a;var c=Mi(a);if(null===c)return a;b.forEach(function(a){a instanceof Bi?c.Tc=!0:c.Uc=!0;Sf(a)},this);return c.cb()};function Mi(a){a=Rf(a,function(a){return a instanceof si},function(a){return a instanceof Ii&&Ji(a)||a instanceof Ci||1!=K(a).length||a instanceof ti});return 0<a.length?a[0]:null};function Ni(a){this.h=a}t(Ni,Qg);Ni.prototype.ib=function(a){var b=Oi(a);if(null===b)return a;a:{var c=b;a=Pi(Bd(b,0));if(null!==a){var d;d=b.N;for(var e=null,g=a.table.Ba(),h=0;h<g.length&&null===e;h++)e=Qi(g[h],d);d=e;if(null===d){a=c;break a}c=new si(this.h,d.qb,new hi(d.qb),d.Je);d=new ui(this.h,a.table);L(d,c);Sf(b);c=Wf(a,a,d,c)}a=c}if(a==b)a:if(a=b,c=Ri(Bd(b,0)),null!==c){d=Qi(c.index,b.N);if(null===d)break a;c.fe=d.Je;a=Sf(b).parent}return a.cb()};
function Ri(a){a=Rf(a,function(a){return a instanceof si},function(a){return 1!=K(a).length});return 0<a.length?a[0]:null}function Pi(a){a=Rf(a,function(a){return a instanceof Xh},function(a){return 1!=K(a).length});return 0<a.length?a[0]:null}function Oi(a){a=Rf(a,function(a){return a instanceof Ci});return 0<a.length?a[0]:null}
function Qi(a,b){if(a.f.length!=b.length||!b.every(function(b,c){return b.M.getName()==a.f[c].ea.getName()}))return null;var c=Si(b,a);return c[0]||c[1]?{qb:a,Je:c[1]}:null}function Si(a,b){var c=a.reduce(function(a,b){return a<<1|(0==b.gb?0:1)},0),d=b.f.reduce(function(a,b){return a<<1|(0==b.gb?0:1)},0),d=c^d,c=0==d,d=d==Math.pow(2,Math.max(a.length,b.f.length))-1;return[c,d]};function Ti(a,b,c){this.xa=a;this.ce=b;this.Sb=c}Ti.prototype.ec=function(){this.Sb.forEach(function(a){this.xa=a.ib(this.xa,this.ce)},this);return this.xa};function Ui(a,b){S.call(this,0,1);this.S=a;this.tg=b}t(Ui,S);Ui.prototype.toString=function(){return"update("+this.S.getName()+")"};Ui.prototype.ba=function(a,b){var c=b[0].entries.map(function(a){var b=this.S.ac(a.ra.Ga());this.tg.forEach(function(a){b.o[a.M.getName()]=a.value},this);return b},this);a.update(this.S,c);return[jd()]};function Vi(a){this.h=a;this.he=[new fi,new vi(this.h),new Ni(this.h),new Li,new Yh(this.h)];this.Hd=[new vi(this.h)]}Vi.prototype.create=function(a,b){var c=a.cb();if(c instanceof Dg||c instanceof Cg)return Wi(this,a,b);if(c instanceof Jg||c instanceof Ng||c instanceof Og)return Wi(this,a,b,this.he);if(c instanceof Eg||c instanceof Fg)return Wi(this,a,b,this.Hd);throw new D(8);};function Wi(a,b,c,d){a=Pf(b.cb(),a.Zf.bind(a));null!=d&&(a=(new Ti(a,c,d)).ec());return new Sd(a,b.Z())}
Vi.prototype.Zf=function(a){if(a instanceof Jg)return new Ii(a.f,a.Kb);if(a instanceof Mg)return new Zh(a.f);if(a instanceof Lg)return new qg(a.f);if(a instanceof Kg)return new Ci(a.N);if(a instanceof Og)return new Ki;if(a instanceof Ng)return new Bi;if(a instanceof Gg)return new ti(a.H.W());if(a instanceof Ig)return new Vg;if(a instanceof Pg)return new ai(this.h,a.H,a.Mb);if(a instanceof Hg)return new Xh(this.h,a.table);if(a instanceof Eg)return new Vh(a.table);if(a instanceof Fg)return new Ui(a.table,
a.ne);if(a instanceof Dg)return new Ai(this.h,a.table);if(a instanceof Cg)return new yi(this.h,a.table);throw new D(514);};function Xi(a){this.Xf=new Uh;this.gg=new Vi(a)};function Yi(){this.Qe=A()}function Zi(a,b){var c=a.Qe.get(b.getName())||null;null===c&&(c=new $i,a.Qe.set(b.getName(),c));return c}function aj(a,b,c,d){c.forEach(function(a){a=Zi(this,a);0==d?(a.Za=null,a.sc=b):3==d?(null===a.Ub&&(a.Ub=C()),a.Ub.add(b),null===a.Pa&&(a.Pa=C()),a.Pa.delete(b)):1==d?(null===a.Pa&&(a.Pa=C()),a.Pa.add(b)):2==d&&(a.Za=b)},a)}
function bj(a,b,c,d){var e=!0;c.forEach(function(a){if(e){a=Zi(this,a);var c=null===a.Pa||0==a.Pa.size;e=0==d?(null===a.Ub||0==a.Ub.size)&&c&&null===a.sc&&null!==a.Za&&a.Za==b:3==d?null===a.sc&&null===a.Za&&null!==a.Pa&&a.Pa.has(b):1==d?null===a.Za:c&&(null===a.Za||a.Za==b)}},a);return e}function cj(a,b,c,d){var e=bj(a,b,c,d);e&&aj(a,b,c,d);return e}Yi.prototype.releaseLock=function(a,b){b.forEach(function(b){Zi(this,b).releaseLock(a)},this)};
function ej(a,b){b.forEach(function(a){Zi(this,a).Za=null},a)}function $i(){this.Ub=this.Pa=this.Za=this.sc=null}$i.prototype.releaseLock=function(a){this.sc==a&&(this.sc=null);this.Za==a&&(this.Za=null);null===this.Pa||this.Pa.delete(a);null===this.Ub||this.Ub.delete(a)};function fj(){this.Rb=new gj;this.Dc=new Yi}function $d(a,b){(2>b.getPriority()||2>b.getPriority())&&ej(a.Dc,b.Z());a.Rb.rb(b);hj(a);return b.fc().ha}function hj(a){for(var b=a.Rb.ta(),c=0;c<b.length;c++){var d=b[c],e=!1;if(e=0==d.L()?ij(a,d,1,3):ij(a,d,2,0))a.Rb.remove(d),e=a,d.exec().then(e.eg.bind(e,d),e.dg.bind(e,d))}}function ij(a,b,c,d){var e=!1;cj(a.Dc,b.W(),b.Z(),c)&&(e=cj(a.Dc,b.W(),b.Z(),d));return e}fj.prototype.eg=function(a,b){this.Dc.releaseLock(a.W(),a.Z());a.fc().resolve(b);hj(this)};
fj.prototype.dg=function(a,b){this.Dc.releaseLock(a.W(),a.Z());a.fc().reject(b);hj(this)};function gj(){this.Rb=[]}gj.prototype.rb=function(a){Re(this.Rb,a,function(a,c){var d=a.getPriority()-c.getPriority();return 0==d?a.W()-c.W():d})};gj.prototype.ta=function(){return this.Rb.slice()};gj.prototype.remove=function(a){var b=this.Rb;a=va(b,a);var c;(c=0<=a)&&ua.splice.call(b,a,1);return c};function jj(a,b){this.Id=sd.xc();this.de=a;this.nd=b;this.I=kj(this)}function kj(a){if(0<a.de.f.length)return a.de.f;var b=[];a.de.c.forEach(function(a){a.bb().forEach(function(a){b.push(a)})});return b}jj.prototype.U=function(a,b){return this.I.every(function(c){return yd(this.Id,c.L(),"eq")(H(a,c),H(b,c))},this)};
function lj(a,b,c){var d=null===b?[]:b.entries,e=ub(d,c.entries,a.U.bind(a),function(a){return d[a]});b=[];for(var g=0,h=0;h<d.length;h++){var k=d[h];e[g]==k?g++:(k=a.nd.splice(g,1),k=mj(h,k,0,a.nd),b.push(k))}e=ub(d,c.entries,a.U.bind(a),function(a,b){return c.entries[b]});for(h=g=0;h<c.entries.length;h++)k=c.entries[h],e[g]==k?g++:(a.nd.splice(h,0,k.ra.o),k=mj(h,[],1,a.nd),b.push(k));return b}function mj(a,b,c,d){return{ug:c,index:a,object:d,wg:b,type:"splice"}};function nj(){this.cc=A()}nj.prototype.yd=function(a,b){var c=la(a.a).toString(),d=this.cc.get(c)||null;null===d&&(d=new oj(a),this.cc.set(c,d));d.yd(b)};nj.prototype.ee=function(a,b){var c=la(a.a).toString(),d=this.cc.get(c)||null;d.ee(b);0<d.Hc.size||this.cc.delete(c)};function Zd(a,b){var c=C();b.forEach(function(a){c.add(a.getName())});var d=[];a.cc.forEach(function(a){a=a.zc();a.context.c.some(function(a){return c.has(a.getName())})&&d.push(a)});return d}
function Xd(a,b,c){b=la(null!=b.$c?b.$c:b).toString();a=a.cc.get(b)||null;null!==a&&pj(a,c)}function oj(a){this.vf=a;this.Hc=C();this.bg=[];this.Oe=null;this.Cf=new jj(a.a,this.bg)}oj.prototype.yd=function(a){this.Hc.has(a)||this.Hc.add(a)};oj.prototype.ee=function(a){return this.Hc.delete(a)};oj.prototype.zc=function(){var a=this.vf;return{context:a.a,be:qh(a)}};function pj(a,b){var c=lj(a.Cf,a.Oe,b);a.Oe=b;0<c.length&&a.Hc.forEach(function(a){a(c)})};function qj(a,b){var c=a.l(Yb),d=b||{},e=new Ne(c);a.hb(Sb,e);var e=null,g=!1;switch(d.storeType||0){case 1:e=new Ae(c);break;case 5:e=new Ce(c);break;case 4:e=new Je(a,c,d.webSqlDbSize);break;case 3:e=new le(c,d.firebase);g=!0;break;default:e=new we(a,c)}a.hb(Rb,e);var h=new Kf;a.hb(Tb,h);return e.Ca(d.onUpgrade).then(function(){var b=new Xi(a);a.hb(Vb,b);b=new fj;a.hb(Wb,b);b=new nj;a.hb(Xb,b);return h.Ca(c)}).then(function(){if(g){var b=new ae(a);b.wb.subscribe(b.Xd.bind(b))}return(new Df(a)).Ca(c)})}
;function rj(a){this.h=a;this.s=a.l(Yb);this.ja=C(this.s.ya());this.vb=x()}m=rj.prototype;m.exec=function(){var a=this.h.l(Tb),b=this.h.l(Sb),c={};this.s.ya().forEach(function(d){var g=a.get(d.u+".#").Xa(),g=Oe(b,g).map(function(a){return a.o});c[d.getName()]=g});var d={name:this.s.name(),version:this.s.version(),tables:c},d=new nd(new y(-1,d),!0);return w([new F([d],[])])};m.L=l(0);m.Z=f("ja");m.fc=f("vb");m.W=function(){return la(this)};m.getPriority=l(0);function sj(a,b){this.h=a;this.wb=a.l(Rb);this.Qa=a.l(Wb);this.Bb=a.l(Xb);this.ja=C(b);this.Oa=new Uc(this.h,this.ja);this.vb=x();this.tc=x();this.pe=x()}m=sj.prototype;m.exec=function(){this.pe.resolve();return this.tc.ha};m.L=l(1);m.Z=f("ja");m.fc=f("vb");m.W=function(){return la(this)};m.getPriority=l(2);function tj(a){$d(a.Qa,a);return a.pe.ha}
function uj(a,b){var c=b.zc();return c.be.cb().exec(a.Oa,c.context).then(function(a){return fd(a[0])},function(a){this.Oa.Db();var b=new ib(a.name);this.tc.reject(b);throw a;}.bind(a))}m.ma=function(){this.wb.Ib(this.L(),this.Oa).ma().then(function(){this.Mc();this.tc.resolve()}.bind(this),function(a){this.Oa.Db();this.tc.reject(a)}.bind(this));return this.vb.ha};m.Db=function(){this.Oa.Db();this.tc.resolve();return this.vb.ha};
m.Mc=function(){var a=Zd(this.Bb,this.ja);0!=a.length&&(a=new Wd(this.h,a),$d(this.Qa,a))};function vj(a){this.h=a;this.Qa=a.l(Wb);this.Rc=null;this.Ra=0;0==wj.size&&(wj.set(0,C([1,4])),wj.set(1,C([2])),wj.set(2,C([3,5,6])),wj.set(3,C([2,7])),wj.set(4,C([7])),wj.set(5,C([7])),wj.set(6,C([7])))}r("lf.proc.Transaction",vj);var wj=A();function xj(a,b){var c=wj.get(a.Ra)||null;if(null===c||!c.has(b))throw new D(107,a.Ra,b);a.Ra=b}
vj.prototype.exec=function(a){xj(this,4);var b=[];try{a.forEach(function(a){a.ab();b.push(a.zc())},this)}catch(c){return xj(this,7),$a(c)}a=new Wg(this.h,b);return $d(this.Qa,a).then(function(a){xj(this,7);return a.map(function(a){return fd(a)})}.bind(this),function(a){xj(this,7);throw a;}.bind(this))};vj.prototype.exec=vj.prototype.exec;vj.prototype.tf=function(a){xj(this,1);this.Rc=new sj(this.h,a);return tj(this.Rc).then(function(){xj(this,2)}.bind(this))};vj.prototype.begin=vj.prototype.tf;
vj.prototype.sf=function(a){xj(this,3);return uj(this.Rc,a).then(function(a){xj(this,2);return a}.bind(this),function(a){xj(this,7);throw a;}.bind(this))};vj.prototype.attach=vj.prototype.sf;vj.prototype.ma=function(){xj(this,5);return this.Rc.ma().then(function(){xj(this,7)}.bind(this))};vj.prototype.commit=vj.prototype.ma;vj.prototype.Db=function(){xj(this,6);return this.Rc.Db().then(function(){xj(this,7)}.bind(this))};vj.prototype.rollback=vj.prototype.Db;function V(a){this.h=a;this.s=a.l(Yb);this.Nd=!1}r("lf.proc.Database",V);V.prototype.Ca=function(a){this.h.hb(Yb,this.s);return qj(this.h,a).then(function(){this.Nd=!0;return this}.bind(this))};V.prototype.init=V.prototype.Ca;V.prototype.pb=f("s");V.prototype.getSchema=V.prototype.pb;function yj(a){if(!a.Nd)throw new D(2);}V.prototype.select=function(a){yj(this);return new U(this.h,1!=arguments.length||null!=arguments[0]?Array.prototype.slice.call(arguments):[])};V.prototype.select=V.prototype.select;
V.prototype.rb=function(){yj(this);return new sh(this.h)};V.prototype.insert=V.prototype.rb;V.prototype.Od=function(){yj(this);return new sh(this.h,!0)};V.prototype.insertOrReplace=V.prototype.Od;V.prototype.update=function(a){yj(this);return new Ch(this.h,a)};V.prototype.update=V.prototype.update;V.prototype.delete=function(){yj(this);return new rh(this.h)};V.prototype["delete"]=V.prototype.delete;V.prototype.observe=function(a,b){this.h.l(Xb).yd(a,b)};V.prototype.observe=V.prototype.observe;
V.prototype.unobserve=function(a,b){this.h.l(Xb).ee(a,b)};V.prototype.unobserve=V.prototype.unobserve;V.prototype.Af=function(){yj(this);return new vj(this.h)};V.prototype.createTransaction=V.prototype.Af;V.prototype.close=function(){try{this.h.l(Rb).close()}catch(a){}this.h.clear();this.Nd=!1};V.prototype.close=V.prototype.close;V.prototype.If=function(){var a=this.h.l(Wb),b=new rj(this.h);return $d(a,b).then(function(a){return fd(a[0])[0]})};V.prototype["export"]=V.prototype.If;function W(a,b,c,d,e,g){this.S=a;this.u=b;this.Ke=c;this.Ie=d;this.mf=e;this.$a=g||null}r("lf.schema.BaseColumn",W);m=W.prototype;m.getName=f("u");m.j=function(){return I(this.S)+"."+this.u};m.toString=function(){return this.j()};m.J=f("S");m.L=f("mf");W.prototype.getType=W.prototype.L;W.prototype.Wa=f("$a");W.prototype.Ba=function(){null==this.ga&&(this.ga=[],this.J().Ba().forEach(function(a){-1!=a.f.map(function(a){return a.ea.getName()}).indexOf(this.u)&&this.ga.push(a)},this));return this.ga};
W.prototype.sa=function(){if(!q(this.ca)){var a=this.Ba().filter(function(a){return 1!=a.f.length?!1:a.f[0].ea.getName()==this.getName()},this);this.ca=0<a.length?a[0]:null}return this.ca};W.prototype.Bc=f("Ie");W.prototype.isNullable=W.prototype.Bc;W.prototype.Cc=f("Ke");W.prototype.Na=function(a){return gg(this,a,"eq")};W.prototype.eq=W.prototype.Na;W.prototype.Re=function(a){return gg(this,a,"neq")};W.prototype.neq=W.prototype.Re;W.prototype.Ud=function(a){return gg(this,a,"lt")};
W.prototype.lt=W.prototype.Ud;W.prototype.Yf=function(a){return gg(this,a,"lte")};W.prototype.lte=W.prototype.Yf;W.prototype.Kf=function(a){return gg(this,a,"gt")};W.prototype.gt=W.prototype.Kf;W.prototype.Lf=function(a){return gg(this,a,"gte")};W.prototype.gte=W.prototype.Lf;W.prototype.match=function(a){return gg(this,a,"match")};W.prototype.match=W.prototype.match;W.prototype.uf=function(a,b){return gg(this,[a,b],"between")};W.prototype.between=W.prototype.uf;
W.prototype.Mf=function(a){return gg(this,a,"in")};W.prototype["in"]=W.prototype.Mf;W.prototype.Tf=function(){return this.Na(null)};W.prototype.isNull=W.prototype.Tf;W.prototype.Sf=function(){return this.Re(null)};W.prototype.isNotNull=W.prototype.Sf;W.prototype.lc=function(a){return new W(this.S,this.u,this.Ke,this.Ie,this.mf,a)};W.prototype.as=W.prototype.lc;function zj(){this.ud=A()}var Aj;zj.prototype.clear=function(){this.ud.clear()};zj.prototype.clear=zj.prototype.clear;zj.prototype.hb=function(a,b){this.ud.set(a.toString(),b);return b};zj.prototype.registerService=zj.prototype.hb;zj.prototype.l=function(a){var b=this.ud.get(a.toString())||null;if(null===b)throw new D(7,a.toString());return b};zj.prototype.getService=zj.prototype.l;zj.prototype.Sd=function(a){return this.ud.has(a.toString())};zj.prototype.isRegistered=zj.prototype.Sd;function Bj(a){this.s=a;this.Ze=new $f;this.Te=new $f;this.we=A();this.g=new $f;this.ve=new $f;Cj(this)}function Cj(a){a.s.ya().forEach(function(a){var c=a.getName();a.Ab().Ld().forEach(function(d){this.Ze.set(d.tb,d);this.Te.set(c,this.s.table(d.tb));this.g.set(d.tb,a);this.we.set(a.getName()+"."+d.Gb,d.tb);this.ve.set(d.tb+"."+d.Jc,a.getName())},this)},a)}function Oc(a,b){return a.Ze.get(b)}function Zg(a,b){var c=b.get(a);return null===c?[]:c}
function bh(a,b){var c=C();b.forEach(function(a){(a=this.we.get(a))&&c.add(a)},a);return jc(c).map(function(a){return this.s.table(a)},a)}function ch(a,b){var c=C();b.forEach(function(a){(a=this.ve.get(a))&&a.forEach(function(a){c.add(a)})},a);return jc(c).map(function(a){return this.s.table(a)},a)};function Dj(a,b,c){this.hg=a;this.ag=b;this.Jf=c}r("lf.schema.Constraint",Dj);Dj.prototype.fd=f("hg");Dj.prototype.getPrimaryKey=Dj.prototype.fd;Dj.prototype.Ld=f("Jf");Dj.prototype.getForeignKeys=Dj.prototype.Ld;function Ej(a,b){var c=a.ref.split(".");if(2!=c.length)throw new D(540,b);this.Gb=a.local;this.tb=c[0];this.Jc=c[1];this.name=b;this.action=a.action;this.timing=a.timing};function X(a){Fj(a);this.Id=sd.xc();this.u=a;this.I=A();this.le=C();this.Sc=C();this.Gc=C();this.va=null;this.ga=A();this.qd=!1;this.zb=[]}r("lf.schema.TableBuilder",X);function Gj(a){this.name=a.name;this.gb=a.order;this.autoIncrement=a.autoIncrement}var Hj=C([0,6]);function Fj(a){if(!/^[A-Za-z_][A-Za-z0-9_]*$/.test(a))throw new D(502,a);}function Ij(a,b){if(b==a.u)throw new D(546,b);if(a.I.has(b)||a.ga.has(b)||a.Sc.has(b))throw new D(503,a.u+"."+b);}
function Jj(a,b){var c=!1;b.forEach(function(a){var b=this.I.get(a.name);c=c||a.autoIncrement;if(a.autoIncrement&&3!=b)throw new D(504);},a);if(c&&1<b.length)throw new D(505);}function Kj(a){if(null!==a.va){var b=a.ga.get(a.va).map(function(a){return a.name}),c=0;if(a.zb.some(function(a,e){c=e;return-1!=b.indexOf(a.Gb)},a))throw new D(543,a.zb[c].name);}}
function Lj(a){if(null!==a.va){var b=function(a){return a.name},c=JSON.stringify(a.ga.get(a.va).map(b));a.ga.forEach(function(a,e){if(e!=this.va){var g=a.map(b);if(JSON.stringify(g)==c)throw new D(544,this.u+"."+e);}},a)}}function Mj(a){null===a.va||a.ga.get(a.va).forEach(function(a){if(this.Gc.has(a.name))throw new D(545,this.u+"."+a.name);},a)}X.prototype.nf=function(a,b){Fj(a);Ij(this,a);this.I.set(a,b);Hj.has(b)&&this.re([a]);return this};X.prototype.addColumn=X.prototype.nf;
X.prototype.pf=function(a,b){var c=this.u;this.va="pk"+(c[0].toUpperCase()+c.substring(1));Fj(this.va);Ij(this,this.va);c=Nj(this,a,!0,void 0,b);Jj(this,c);1==c.length&&this.le.add(c[0].name);this.Sc.add(this.va);this.ga.set(this.va,c);return this};X.prototype.addPrimaryKey=X.prototype.pf;
X.prototype.of=function(a,b){Fj(a);Ij(this,a);var c=new Ej(b,this.u+"."+a);q(c.action)||(c.action=0);q(c.timing)||(c.timing=0);if(1==c.action&&1==c.timing)throw new D(506);if(!this.I.has(c.Gb))throw new D(540,a);this.zb.push(c);this.qe(a,[c.Gb],!1);return this};X.prototype.addForeignKey=X.prototype.of;X.prototype.qf=function(a,b){Fj(a);Ij(this,a);var c=Nj(this,b,!0);Oj(this,a,c);1==c.length&&this.le.add(c[0].name);this.ga.set(a,c);this.Sc.add(a);return this};X.prototype.addUnique=X.prototype.qf;
X.prototype.re=function(a){a=Nj(this,a,!1);Pj(this,a);a.forEach(function(a){this.Gc.add(a.name)},this);return this};X.prototype.addNullable=X.prototype.re;function Pj(a,b){Ib(a.ga).forEach(function(a){var d=C();this.ga.get(a).forEach(function(a){d.add(a.name)});var e=b.filter(function(a){return d.has(a.name)});if(1<d.size&&0<e.length)throw new D(507,a,e.join(","));},a)}X.prototype.qe=function(a,b,c,d){Fj(a);Ij(this,a);b=Nj(this,b,!0,d);Oj(this,a,b);c&&this.Sc.add(a);this.ga.set(a,b);return this};
X.prototype.addIndex=X.prototype.qe;function Oj(a,b,c){if(1<c.length&&(a=c.filter(function(a){return this.Gc.has(a.name)},a),0<a.length))throw new D(507,b,a.join(","));}X.prototype.Cb=ba("qd");X.prototype.persistentIndex=X.prototype.Cb;X.prototype.pb=function(){Kj(this);Lj(this);Mj(this);return new (Qj(this))};X.prototype.getSchema=X.prototype.pb;function Rj(a){return a.zb}
function Nj(a,b,c,d,e){var g=b,g="string"==typeof b[0]?b.map(function(a){return new Gj({name:a,order:null!=d?d:1,autoIncrement:e||!1})}):b.map(function(a){return new Gj(a)});g.forEach(function(a){if(!this.I.has(a.name))throw new D(508,this.u,a.name);if(c){var b=this.I.get(a.name);if(0==b||6==b)throw new D(509,this.u,a.name);}},a);return g}
function Qj(a){function b(){function b(c){return a.ga.get(c).map(function(a){return{ea:this[a.name],gb:a.gb,autoIncrement:a.autoIncrement}},this)}var d=Ib(a.I).map(function(b){this[b]=new W(this,b,a.le.has(b),a.Gc.has(b),a.I.get(b));return this[b]},this),e=Ib(a.ga).map(function(d){return new ig(a.u,d,a.Sc.has(d),b.call(this,d))},this);Q.call(this,a.u,d,e,a.qd);var g=null===a.va?null:new ig(a.u,a.va,!0,b.call(this,a.va)),h=d.filter(function(b){return!a.Gc.has(b.getName())});this.xf=new Dj(g,h,a.zb);
this.cf=Sj(a,d,e)}t(b,Q);b.prototype.yb=function(a){return new this.cf(ob++,a)};b.prototype.createRow=b.prototype.yb;b.prototype.ac=function(a){var b={};this.bb().forEach(function(e){var g=e.getName();e=e.L();var h=a.value[g];if(0==e)if(e=h,null!=e&&""!=e){0!=e.length%2&&(e="0"+e);for(var h=new ArrayBuffer(e.length/2),k=new Uint8Array(h),p=0,E=0;p<e.length;p+=2)k[E++]=parseInt(e.substr(p,2),16);e=h}else e=null;else e=2==e?null!=h?new Date(h):null:h;b[g]=e},this);return new this.cf(a.id,b)};b.prototype.deserializeRow=
b.prototype.ac;b.prototype.Ab=f("xf");b.prototype.getConstraint=b.prototype.Ab;return b}
function Sj(a,b,c){function d(a,d){this.I=b;this.ga=c;y.call(this,a,d)}t(d,y);d.prototype.ze=function(){var a={};this.I.forEach(function(b){a[b.getName()]=b.Bc()?null:Fc[b.L()]});return a};d.prototype.jf=function(){var a={};this.I.forEach(function(b){var c=b.getName();b=b.L();var d=this.o[c];a[c]=0==b?null!=d?rb(d):null:2==b?null!=d?d.getTime():null:6==b?null!=d?d:null:d},this);return a};var e=function(a){var b=this.I.get(a.getName()),c=this.Id.Le.get(b)||null;return function(b){return c(b[a.getName()])}}.bind(a),
g=function(a){var b=a.map(function(a){return e(a.ea)});return function(a){return b.map(function(b){return b(a)})}}.bind(a),h={};c.forEach(function(a){var b=a.j();a=1==a.f.length?e(a.f[0].ea):g(a.f);h[b]=a});d.prototype.Nb=function(a){return-1!=a.indexOf("#")?this.id():h.hasOwnProperty(a)?h[a](this.o):null};return d};function Y(a,b){this.s=new Z(a,b);this.lb=A();this.uc=!1}r("lf.schema.Builder",Y);function Tj(a,b){b.zb.forEach(function(a){var d=a.tb;if(!this.lb.has(d))throw new D(536,a.name);var d=this.lb.get(d).pb(),e=a.Jc;if(!d.hasOwnProperty(e))throw new D(537,a.name);if(b.pb()[a.Gb].L()!=d[e].L())throw new D(538,a.name);if(!d[e].Cc())throw new D(539,a.name);},a)}Y.prototype.wf=function(a){a.zb.forEach(function(a){Rj(this.lb.get(a.tb)).forEach(function(c){if(c.Gb==a.Jc)throw new D(534,a.name);},this)},this)};
function Uj(a){a.uc||(a.lb.forEach(function(a){Tj(this,a);a=a.pb();this.s.K.set(a.getName(),a)},a),B(a.lb).forEach(a.wf,a),Vj(a),a.lb.clear(),a.uc=!0)}function Wj(a,b,c){b.oe||(b.oe=!0,b.Yd=!0,b.Ae.forEach(function(a){a=c.get(a);if(!a.oe)Wj(this,a,c);else if(a.Yd&&b!=a)throw new D(533);},a));b.Yd=!1}function Vj(a){var b=A();a.s.K.forEach(function(a,d){b.set(d,new Xj(d))},a);a.lb.forEach(function(a,d){a.zb.forEach(function(a){b.get(a.tb).Ae.add(d)})});B(b).forEach(function(a){Wj(this,a,b)},a)}
function Xj(a){this.Yd=this.oe=!1;this.Ae=C();this.Pc=a}Y.prototype.pb=function(){this.uc||Uj(this);return this.s};Y.prototype.getSchema=Y.prototype.pb;Y.prototype.Ce=function(){var a=new Qb("ns_"+this.s.name()),b;Aj||(Aj=new zj);b=Aj;var c=null;b.Sd(a)?c=b.l(a):(c=new zj,b.hb(a,c));return c};Y.prototype.getGlobal=Y.prototype.Ce;Y.prototype.connect=function(a){var b=this.Ce();b.Sd(Yb)||b.hb(Yb,this.pb());return(new V(b)).Ca(a)};Y.prototype.connect=Y.prototype.connect;
Y.prototype.zf=function(a){if(this.lb.has(a))throw new D(503,a);if(this.uc)throw new D(535);this.lb.set(a,new X(a));return this.lb.get(a)};Y.prototype.createTable=Y.prototype.zf;Y.prototype.je=function(a){if(this.uc)throw new D(535);this.s.je(a);return this};Y.prototype.setPragma=Y.prototype.je;function Z(a,b){this.u=a;this.La=b;this.K=A();this.Xe={Df:!1}}r("lf.schema.DatabaseSchema",Z);Z.prototype.name=f("u");Z.prototype.name=Z.prototype.name;Z.prototype.version=f("La");Z.prototype.version=Z.prototype.version;
Z.prototype.ya=function(){return B(this.K)};Z.prototype.tables=Z.prototype.ya;Z.prototype.table=function(a){if(!this.K.has(a))throw new D(101,a);return this.K.get(a)};Z.prototype.table=Z.prototype.table;Z.prototype.info=function(){this.Ge||(this.Ge=new Bj(this));return this.Ge};Z.prototype.We=f("Xe");Z.prototype.pragma=Z.prototype.We;Z.prototype.je=ba("Xe");r("lf.schema.create",function(a,b){return new Y(a,b)});}.bind(window))()
//# sourceMappingURL=lovefield.min.js.map
