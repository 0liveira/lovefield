(function(){'use strict';function aa(){return function(){}}function ba(a){return function(b){this[a]=b}}function f(a){return function(){return this[a]}}function l(a){return function(){return a}}var m,n=this;function q(a){return void 0!==a}function ca(){}
function da(a){var b=typeof a;if("object"==b)if(a){if(a instanceof Array)return"array";if(a instanceof Object)return b;var c=Object.prototype.toString.call(a);if("[object Window]"==c)return"object";if("[object Array]"==c||"number"==typeof a.length&&"undefined"!=typeof a.splice&&"undefined"!=typeof a.propertyIsEnumerable&&!a.propertyIsEnumerable("splice"))return"array";if("[object Function]"==c||"undefined"!=typeof a.call&&"undefined"!=typeof a.propertyIsEnumerable&&!a.propertyIsEnumerable("call"))return"function"}else return"null";
else if("function"==b&&"undefined"==typeof a.call)return"object";return b}function ea(a){return null===a}function fa(a){return null!=a}function ha(a){var b=da(a);return"array"==b||"object"==b&&"number"==typeof a.length}function ia(a){return"string"==typeof a}function ja(a){return"function"==da(a)}function ka(a){return a[la]||(a[la]=++na)}var la="closure_uid_"+(1E9*Math.random()>>>0),na=0;function oa(a,b,c){return a.call.apply(a.bind,arguments)}
function pa(a,b,c){if(!a)throw Error();if(2<arguments.length){var d=Array.prototype.slice.call(arguments,2);return function(){var c=Array.prototype.slice.call(arguments);Array.prototype.unshift.apply(c,d);return a.apply(b,c)}}return function(){return a.apply(b,arguments)}}function qa(a,b,c){qa=Function.prototype.bind&&-1!=Function.prototype.bind.toString().indexOf("native code")?oa:pa;return qa.apply(null,arguments)}
function ra(a,b){var c=Array.prototype.slice.call(arguments,1);return function(){var b=c.slice();b.push.apply(b,arguments);return a.apply(this,b)}}function r(a,b){var c=a.split("."),d=n;c[0]in d||!d.execScript||d.execScript("var "+c[0]);for(var e;c.length&&(e=c.shift());)!c.length&&q(b)?d[e]=b:d=d[e]?d[e]:d[e]={}}
function t(a,b){function c(){}c.prototype=b.prototype;a.Hb=b.prototype;a.prototype=new c;a.prototype.constructor=a;a.vg=function(a,c,g){for(var h=Array(arguments.length-2),k=2;k<arguments.length;k++)h[k-2]=arguments[k];return b.prototype[c].apply(a,h)}};function sa(a){if(Error.captureStackTrace)Error.captureStackTrace(this,sa);else{var b=Error().stack;b&&(this.stack=b)}a&&(this.message=String(a))}t(sa,Error);sa.prototype.name="CustomError";function ta(a,b,c){this.Wf=c;this.Bf=a;this.mg=b;this.pd=0;this.kd=null}ta.prototype.get=function(){var a;0<this.pd?(this.pd--,a=this.kd,this.kd=a.next,a.next=null):a=this.Bf();return a};ta.prototype.put=function(a){this.mg(a);this.pd<this.Wf&&(this.pd++,a.next=this.kd,this.kd=a)};var ua=Array.prototype,va=ua.indexOf?function(a,b,c){return ua.indexOf.call(a,b,c)}:function(a,b,c){c=null==c?0:0>c?Math.max(0,a.length+c):c;if(ia(a))return ia(b)&&1==b.length?a.indexOf(b,c):-1;for(;c<a.length;c++)if(c in a&&a[c]===b)return c;return-1},wa=ua.forEach?function(a,b,c){ua.forEach.call(a,b,c)}:function(a,b,c){for(var d=a.length,e=ia(a)?a.split(""):a,g=0;g<d;g++)g in e&&b.call(c,e[g],g,a)},xa=ua.map?function(a,b,c){return ua.map.call(a,b,c)}:function(a,b,c){for(var d=a.length,e=Array(d),
g=ia(a)?a.split(""):a,h=0;h<d;h++)h in g&&(e[h]=b.call(c,g[h],h,a));return e},ya=ua.reduce?function(a,b,c,d){d&&(b=qa(b,d));return ua.reduce.call(a,b,c)}:function(a,b,c,d){var e=c;wa(a,function(c,h){e=b.call(d,e,c,h,a)});return e},za=ua.some?function(a,b,c){return ua.some.call(a,b,c)}:function(a,b,c){for(var d=a.length,e=ia(a)?a.split(""):a,g=0;g<d;g++)if(g in e&&b.call(c,e[g],g,a))return!0;return!1};function Aa(a,b,c){return 2>=arguments.length?ua.slice.call(a,b):ua.slice.call(a,b,c)}
function Ba(a){for(var b=[],c=0;c<a;c++)b[c]=0;return b}function Ca(a){for(var b=[],c=0;c<arguments.length;c++){var d=arguments[c];if("array"==da(d))for(var e=0;e<d.length;e+=8192)for(var g=Ca.apply(null,Aa(d,e,e+8192)),h=0;h<g.length;h++)b.push(g[h]);else b.push(d)}return b};function Da(a){var b=[],c=0,d;for(d in a)b[c++]=a[d];return b};var Ea;a:{var Fa=n.navigator;if(Fa){var Ga=Fa.userAgent;if(Ga){Ea=Ga;break a}}Ea=""}function u(a){return-1!=Ea.indexOf(a)};function Ha(){return u("Opera")||u("OPR")}function Ia(){return(u("Chrome")||u("CriOS"))&&!Ha()&&!u("Edge")};function Ja(a){n.setTimeout(function(){throw a;},0)}var Ka;
function La(){var a=n.MessageChannel;"undefined"===typeof a&&"undefined"!==typeof window&&window.postMessage&&window.addEventListener&&!u("Presto")&&(a=function(){var a=document.createElement("IFRAME");a.style.display="none";a.src="";document.documentElement.appendChild(a);var b=a.contentWindow,a=b.document;a.open();a.write("");a.close();var c="callImmediate"+Math.random(),d="file:"==b.location.protocol?"*":b.location.protocol+"//"+b.location.host,a=qa(function(a){if(("*"==d||a.origin==d)&&a.data==
c)this.port1.onmessage()},this);b.addEventListener("message",a,!1);this.port1={};this.port2={postMessage:function(){b.postMessage(c,d)}}});if("undefined"!==typeof a&&!u("Trident")&&!u("MSIE")){var b=new a,c={},d=c;b.port1.onmessage=function(){if(q(c.next)){c=c.next;var a=c.ue;c.ue=null;a()}};return function(a){d.next={ue:a};d=d.next;b.port2.postMessage(0)}}return"undefined"!==typeof document&&"onreadystatechange"in document.createElement("SCRIPT")?function(a){var b=document.createElement("SCRIPT");
b.onreadystatechange=function(){b.onreadystatechange=null;b.parentNode.removeChild(b);b=null;a();a=null};document.documentElement.appendChild(b)}:function(a){n.setTimeout(a,0)}};function Ma(){this.zd=this.kc=null}var Oa=new ta(function(){return new Na},function(a){a.reset()},100);Ma.prototype.add=function(a,b){var c=Oa.get();c.set(a,b);this.zd?this.zd.next=c:this.kc=c;this.zd=c};Ma.prototype.remove=function(){var a=null;this.kc&&(a=this.kc,this.kc=this.kc.next,this.kc||(this.zd=null),a.next=null);return a};function Na(){this.next=this.scope=this.Md=null}Na.prototype.set=function(a,b){this.Md=a;this.scope=b;this.next=null};
Na.prototype.reset=function(){this.next=this.scope=this.Md=null};function Pa(a,b){Qa||Ra();Sa||(Qa(),Sa=!0);Ta.add(a,b)}var Qa;function Ra(){if(n.Promise&&n.Promise.resolve){var a=n.Promise.resolve(void 0);Qa=function(){a.then(Ua)}}else Qa=function(){var a=Ua;!ja(n.setImmediate)||n.Window&&n.Window.prototype&&n.Window.prototype.setImmediate==n.setImmediate?(Ka||(Ka=La()),Ka(a)):n.setImmediate(a)}}var Sa=!1,Ta=new Ma;function Ua(){for(var a=null;a=Ta.remove();){try{a.Md.call(a.scope)}catch(b){Ja(b)}Oa.put(a)}Sa=!1};function v(a,b){this.Ua=0;this.af=void 0;this.Zc=this.bc=this.C=null;this.jd=this.Ld=!1;if(a!=ca)try{var c=this;a.call(b,function(a){Va(c,2,a)},function(a){Va(c,3,a)})}catch(d){Va(this,3,d)}}function Wa(){this.next=this.context=this.gc=this.Kc=this.child=null;this.Cd=!1}Wa.prototype.reset=function(){this.context=this.gc=this.Kc=this.child=null;this.Cd=!1};var Ya=new ta(function(){return new Wa},function(a){a.reset()},100);function Za(a,b,c){var d=Ya.get();d.Kc=a;d.gc=b;d.context=c;return d}
function w(a){if(a instanceof v)return a;var b=new v(ca);Va(b,2,a);return b}function $a(a){return new v(function(b,c){c(a)})}function ab(a,b,c){bb(a,b,c,null)||Pa(ra(b,a))}function cb(a){return new v(function(b,c){var d=a.length,e=[];if(d)for(var g=function(a,c){d--;e[a]=c;0==d&&b(e)},h=function(a){c(a)},k=0,p;k<a.length;k++)p=a[k],ab(p,ra(g,k),h);else b(e)})}function x(){var a,b,c=new v(function(c,e){a=c;b=e});return new db(c,a,b)}
v.prototype.then=function(a,b,c){return eb(this,ja(a)?a:null,ja(b)?b:null,c)};v.prototype.then=v.prototype.then;v.prototype.$goog_Thenable=!0;function fb(a,b,c){eb(a,null,b,c)}function gb(a,b){a.bc||2!=a.Ua&&3!=a.Ua||hb(a);a.Zc?a.Zc.next=b:a.bc=b;a.Zc=b}
function eb(a,b,c,d){var e=Za(null,null,null);e.child=new v(function(a,h){e.Kc=b?function(c){try{var e=b.call(d,c);a(e)}catch(E){h(E)}}:a;e.gc=c?function(b){try{var e=c.call(d,b);!q(e)&&b instanceof ib?h(b):a(e)}catch(E){h(E)}}:h});e.child.C=a;gb(a,e);return e.child}v.prototype.rg=function(a){this.Ua=0;Va(this,2,a)};v.prototype.sg=function(a){this.Ua=0;Va(this,3,a)};
function Va(a,b,c){0==a.Ua&&(a==c&&(b=3,c=new TypeError("Promise cannot resolve to itself")),a.Ua=1,bb(c,a.rg,a.sg,a)||(a.af=c,a.Ua=b,a.C=null,hb(a),3!=b||c instanceof ib||jb(a,c)))}function bb(a,b,c,d){if(a instanceof v)return gb(a,Za(b||ca,c||null,d)),!0;var e;if(a)try{e=!!a.$goog_Thenable}catch(g){e=!1}else e=!1;if(e)return a.then(b,c,d),!0;e=typeof a;if("object"==e&&null!=a||"function"==e)try{var h=a.then;if(ja(h))return kb(a,h,b,c,d),!0}catch(k){return c.call(d,k),!0}return!1}
function kb(a,b,c,d,e){function g(a){k||(k=!0,d.call(e,a))}function h(a){k||(k=!0,c.call(e,a))}var k=!1;try{b.call(a,h,g)}catch(p){g(p)}}function hb(a){a.Ld||(a.Ld=!0,Pa(a.Gf,a))}function lb(a){var b=null;a.bc&&(b=a.bc,a.bc=b.next,b.next=null);a.bc||(a.Zc=null);return b}
v.prototype.Gf=function(){for(var a=null;a=lb(this);){var b=this.Ua,c=this.af;if(3==b&&a.gc&&!a.Cd)for(var d=void 0,d=this;d&&d.jd;d=d.C)d.jd=!1;if(a.child)a.child.C=null,mb(a,b,c);else try{a.Cd?a.Kc.call(a.context):mb(a,b,c)}catch(e){nb.call(null,e)}Ya.put(a)}this.Ld=!1};function mb(a,b,c){2==b?a.Kc.call(a.context,c):a.gc&&a.gc.call(a.context,c)}function jb(a,b){a.jd=!0;Pa(function(){a.jd&&nb.call(null,b)})}var nb=Ja;function ib(a){sa.call(this,a)}t(ib,sa);ib.prototype.name="cancel";
function db(a,b,c){this.ja=a;this.resolve=b;this.reject=c};/*

 Copyright 2014 The Lovefield Project Authors. All Rights Reserved.

 Licensed under the Apache License, Version 2.0 (the "License");
 you may not use this file except in compliance with the License.
 You may obtain a copy of the License at

     http://www.apache.org/licenses/LICENSE-2.0

 Unless required by applicable law or agreed to in writing, software
 distributed under the License is distributed on an "AS IS" BASIS,
 WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 See the License for the specific language governing permissions and
 limitations under the License.
*/
function y(a,b){this.oa=a;this.s=b||this.ze()}var ob=0;m=y.prototype;m.id=f("oa");m.ze=function(){return{}};m.jf=f("s");m.Ia=function(){return{id:this.oa,value:this.jf()}};m.Db=function(a){return"#"==a.substr(-1)?this.oa:null};function pb(a){return new y(a.id,a.value)}function qb(a){return new y(ob++,a||{})}function rb(a){if(null==a)return null;a=new Uint8Array(a);for(var b="",c=0;c<a.length;++c)var d=a[c].toString(16),b=b+(2>d.length?"0"+d:d);return b};function sb(a){this.type=a}function tb(a){y.call(this,-1,a)}t(tb,y);function ub(a,b,c,d){c=c||function(a,b){return a==b};d=d||function(b){return a[b]};for(var e=a.length,g=b.length,h=[],k=0;k<e+1;k++)h[k]=[],h[k][0]=0;for(var p=0;p<g+1;p++)h[0][p]=0;for(k=1;k<=e;k++)for(p=1;p<=g;p++)c(a[k-1],b[p-1])?h[k][p]=h[k-1][p-1]+1:h[k][p]=Math.max(h[k-1][p],h[k][p-1]);for(var E=[],k=e,p=g;0<k&&0<p;)c(a[k-1],b[p-1])?(E.unshift(d(k-1,p-1)),k--,p--):h[k-1][p]>h[k][p-1]?k--:p--;return E}function vb(a){return ya(arguments,function(a,c){return a+c},0)}
function wb(a){return vb.apply(null,arguments)/arguments.length}function xb(a){var b=arguments.length;if(2>b)return 0;var c=wb.apply(null,arguments);return vb.apply(null,xa(arguments,function(a){return Math.pow(a-c,2)}))/(b-1)}function yb(a){return Math.sqrt(xb.apply(null,arguments))};var zb="StopIteration"in n?n.StopIteration:{message:"StopIteration",stack:""};function Ab(){}Ab.prototype.next=function(){throw zb;};Ab.prototype.lc=function(){return this};function Bb(a){if(a instanceof Ab)return a;if("function"==typeof a.lc)return a.lc(!1);if(ha(a)){var b=0,c=new Ab;c.next=function(){for(;;){if(b>=a.length)throw zb;if(b in a)return a[b++];b++}};return c}throw Error("Not implemented");}
function Cb(a,b){if(ha(a))try{wa(a,b,void 0)}catch(c){if(c!==zb)throw c;}else{a=Bb(a);try{for(;;)b.call(void 0,a.next(),void 0,a)}catch(d){if(d!==zb)throw d;}}}function Db(a){if(za(arguments,function(a){return!a.length})||!arguments.length)return new Ab;var b=new Ab,c=arguments,d=Ba(c.length);b.next=function(){if(d){for(var a=xa(d,function(a,b){return c[b][a]}),b=d.length-1;0<=b;b--){if(d[b]<c[b].length-1){d[b]++;break}if(0==b){d=null;break}d[b]=0}return a}throw zb;};return b};function Eb(a,b){this.o={};this.b=[];this.Oa=this.Ab=0;var c=arguments.length;if(1<c){if(c%2)throw Error("Uneven number of arguments");for(var d=0;d<c;d+=2)this.set(arguments[d],arguments[d+1])}else a&&this.addAll(a)}m=Eb.prototype;m.yc=f("Ab");m.va=function(){Fb(this);for(var a=[],b=0;b<this.b.length;b++)a.push(this.o[this.b[b]]);return a};function Gb(a){Fb(a);return a.b.concat()}m.Ka=function(a){return Hb(this.o,a)};m.md=function(){return 0==this.Ab};
m.clear=function(){this.o={};this.Oa=this.Ab=this.b.length=0};m.remove=function(a){return Hb(this.o,a)?(delete this.o[a],this.Ab--,this.Oa++,this.b.length>2*this.Ab&&Fb(this),!0):!1};function Fb(a){if(a.Ab!=a.b.length){for(var b=0,c=0;b<a.b.length;){var d=a.b[b];Hb(a.o,d)&&(a.b[c++]=d);b++}a.b.length=c}if(a.Ab!=a.b.length){for(var e={},c=b=0;b<a.b.length;)d=a.b[b],Hb(e,d)||(a.b[c++]=d,e[d]=1),b++;a.b.length=c}}m.get=function(a,b){return Hb(this.o,a)?this.o[a]:b};
m.set=function(a,b){Hb(this.o,a)||(this.Ab++,this.b.push(a),this.Oa++);this.o[a]=b};m.addAll=function(a){var b;if(a instanceof Eb)b=Gb(a),a=a.va();else{b=[];var c=0,d;for(d in a)b[c++]=d;a=Da(a)}for(c=0;c<b.length;c++)this.set(b[c],a[c])};m.forEach=function(a,b){for(var c=Gb(this),d=0;d<c.length;d++){var e=c[d],g=this.get(e);a.call(b,g,e,this)}};m.clone=function(){return new Eb(this)};
m.lc=function(a){Fb(this);var b=0,c=this.Oa,d=this,e=new Ab;e.next=function(){if(c!=d.Oa)throw Error("The map has changed since the iterator was created");if(b>=d.b.length)throw zb;var e=d.b[b++];return a?e:d.o[e]};return e};function Hb(a,b){return Object.prototype.hasOwnProperty.call(a,b)};/*

 Copyright 2015 The Lovefield Project Authors. All Rights Reserved.

 Licensed under the Apache License, Version 2.0 (the "License");
 you may not use this file except in compliance with the License.
 You may obtain a copy of the License at

     http://www.apache.org/licenses/LICENSE-2.0

 Unless required by applicable law or agreed to in writing, software
 distributed under the License is distributed on an "AS IS" BASIS,
 WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 See the License for the specific language governing permissions and
 limitations under the License.
*/
function z(){this.o=new Eb;Object.defineProperty(this,"size",{get:function(){return this.o.yc()}})}z.prototype.clear=function(){this.o.clear()};z.prototype.clear=z.prototype.clear;z.prototype.delete=function(a){return this.o.remove(a)};z.prototype["delete"]=z.prototype.delete;z.prototype.forEach=function(a,b){return this.o.forEach(a,b)};z.prototype.forEach=z.prototype.forEach;z.prototype.get=function(a){return this.o.get(a)};z.prototype.get=z.prototype.get;z.prototype.has=function(a){return this.o.Ka(a)};
z.prototype.has=z.prototype.has;z.prototype.set=function(a,b){return this.o.set(a,b)};z.prototype.set=z.prototype.set;function A(){return window.Map&&window.Map.prototype.values&&window.Map.prototype.forEach?new window.Map:new z}function Ib(a){if(a instanceof z)return Gb(a.o);var b=0,c=Array(a.size);a.forEach(function(a,e){c[b++]=e});return c}function B(a){if(a instanceof z)return a.o.va();var b=0,c=Array(a.size);a.forEach(function(a){c[b++]=a});return c};var Jb={};r("lf.TransactionType",Jb);Jb.READ_ONLY=0;Jb.READ_WRITE=1;function Kb(a,b){this.Sa=a;this.kf=b;this.aa=x()}Kb.prototype.la=function(){try{Lb(this.Sa)}catch(a){return $a(a)}return(0==this.kf?this.oc():Mb(this)).then(function(a){this.Sa.la();return a}.bind(this))};function Mb(a){Nb(a);Ob(a);return a.oc()}
function Nb(a){a.Sa.pb.forEach(function(a,c){var d=this.Sa.Y().get(c),d=this.H(d.getName(),d.Lb.bind(d)),e=B(a.Ca).map(function(a){return a.id()});0<e.length&&fb(d.remove(e),this.Od,this);e=B(a.pa).map(function(a){return a[1]}).concat(B(a.Ba));fb(d.put(e),this.Od,this)},a)}function Ob(a){Pb(a.Sa).forEach(function(a){var c=this.H(a.getName(),pb),d;c.get([-1]).then(function(a){d=a;return c.remove([])}).then(function(){c.put(d);c.put(a.Ia())},this.Od.bind(this))},a)}Kb.prototype.Od=function(a){this.aa.reject(a)};function Qb(a){this.ng=a}Qb.prototype.toString=f("ng");var Rb=new Qb("backstore"),Sb=new Qb("cache"),Tb=new Qb("indexstore"),Ub=new Qb("engine"),Vb=new Qb("runner"),Xb=new Qb("observerregistry"),Yb=new Qb("schema");function Zb(a){if("function"==typeof a.va)return a.va();if(ia(a))return a.split("");if(ha(a)){for(var b=[],c=a.length,d=0;d<c;d++)b.push(a[d]);return b}return Da(a)};function $b(a){this.o=new Eb;a&&this.addAll(a)}function ac(a){var b=typeof a;return"object"==b&&a||"function"==b?"o"+ka(a):b.substr(0,1)+a}m=$b.prototype;m.yc=function(){return this.o.yc()};m.add=function(a){this.o.set(ac(a),a)};m.addAll=function(a){a=Zb(a);for(var b=a.length,c=0;c<b;c++)this.add(a[c])};m.remove=function(a){return this.o.remove(ac(a))};m.clear=function(){this.o.clear()};m.md=function(){return this.o.md()};m.contains=function(a){return this.o.Ka(ac(a))};m.va=function(){return this.o.va()};
m.clone=function(){return new $b(this)};m.lc=function(){return this.o.lc(!1)};var bc=Ha(),cc=u("Trident")||u("MSIE"),dc=u("Edge"),ec=u("Gecko")&&!(-1!=Ea.toLowerCase().indexOf("webkit")&&!u("Edge"))&&!(u("Trident")||u("MSIE"))&&!u("Edge"),fc=-1!=Ea.toLowerCase().indexOf("webkit")&&!u("Edge");function gc(){var a=Ea;if(ec)return/rv\:([^\);]+)(\)|;)/.exec(a);if(dc)return/Edge\/([\d\.]+)/.exec(a);if(cc)return/\b(?:MSIE|rv)[: ]([^\);]+)(\)|;)/.exec(a);if(fc)return/WebKit\/(\S+)/.exec(a)}
(function(){if(bc&&n.opera){var a=n.opera.version;return ja(a)?a():a}var a="",b=gc();b&&(a=b?b[1]:"");return cc&&(b=(b=n.document)?b.documentMode:void 0,b>parseFloat(a))?String(b):a})();!u("Android")||Ia()||u("Firefox")||Ha();Ia();var hc=u("Safari")&&!(Ia()||u("Coast")||Ha()||u("Edge")||u("Silk")||u("Android"))&&!(u("iPhone")&&!u("iPod")&&!u("iPad")||u("iPad")||u("iPod"));function ic(a){this.Vb=new $b(a);Object.defineProperty(this,"size",{get:function(){return this.Vb.yc()}})}ic.prototype.add=function(a){this.Vb.add(a)};ic.prototype.add=ic.prototype.add;ic.prototype.clear=function(){this.Vb.clear()};ic.prototype.clear=ic.prototype.clear;ic.prototype.delete=function(a){return this.Vb.remove(a)};ic.prototype["delete"]=ic.prototype.delete;ic.prototype.forEach=function(a,b){this.Vb.va().forEach(a,b)};ic.prototype.has=function(a){return this.Vb.contains(a)};
ic.prototype.has=ic.prototype.has;function C(a){return window.Set&&window.Set.prototype.values&&window.Set.prototype.forEach&&!hc?new window.Set(a):new ic(a)}function jc(a){if(a instanceof ic)return a.Vb.va();var b=0,c=Array(a.size);a.forEach(function(a){c[b++]=a});return c}function kc(a,b){if(b.size>a.size)return!1;var c=!0;b.forEach(function(b){c=c&&a.has(b)});return c};function lc(a,b){this.oa=a;this.s=b||{}}function mc(a){var b=C();a.forEach(function(a){b.add(a>>9)});return jc(b)}lc.prototype.V=f("oa");function nc(a,b){b.forEach(function(a){this.s[a.id()]=a.Ia()},a)}function oc(a,b){b.forEach(function(a){delete this.s[a]},a)}lc.prototype.Ia=function(){return{id:this.oa,value:JSON.stringify(this.s)}};function pc(a){return new lc(a.id,JSON.parse(a.value))};function qc(a,b,c){this.$=a;this.Kb=b;this.bf=c}m=qc.prototype;m.get=function(a){if(0==a.length)return this.xc();var b=this.Kb;return rc(this,a).then(function(c){return a.map(function(a){var e=c.get(a>>9);return b(e.s[a])})})};function rc(a,b){var c=A(),d=x(),e=mc(b).map(function(a){return new v(function(b,d){var e;try{e=this.$.get(a)}catch(E){d(E);return}e.onerror=d;e.onsuccess=function(a){a=pc(a.target.result);c.set(a.V(),a);b()}},this)},a);cb(e).then(function(){d.resolve(c)});return d.ja}
m.xc=function(){return new v(function(a,b){var c=[],d;try{d=this.$.openCursor()}catch(e){b(e);return}d.onerror=b;d.onsuccess=function(){var b=d.result;if(b){var e;e=pc(b.value).s;for(var k in e)c.push(this.Kb(e[k]));b.continue()}else a(c)}.bind(this)},this)};m.Sb=function(a){return new v(function(b,c){var d;try{d=a()}catch(e){c(e);return}d.onsuccess=b;d.onerror=c},this)};
m.put=function(a){if(0==a.length)return w();var b=A();a.forEach(function(a){var d;d=a.id()>>9;var e=b.get(d)||null;null===e&&(e=this.bf(this.$.name,d));nc(e,[a]);b.set(d,e)},this);a=B(b).map(function(a){return this.Sb(function(){return this.$.put(a.Ia())}.bind(this))},this);return cb(a)};
m.remove=function(a){if(0==a.length)return this.Sb(function(){return this.$.clear()}.bind(this));var b=A();a.forEach(function(a){var d=a>>9,e=b.get(d)||null;null===e&&(e=this.bf(this.$.name,d));oc(e,[a]);b.set(d,e)},this);a=B(b).map(function(a){return this.Sb(function(){return 0==Object.keys(a.s).length?this.$.delete(a.V()):this.$.put(a.Ia())}.bind(this))},this);return cb(a)};function sc(a,b,c){a=a.i(Sb);var d=[c<<9,(c+1<<9)-1];b=a.Za(b,d[0],d[1]);c=new lc(c);nc(c,b);return c}
function tc(a,b){return new lc(b)};function uc(){};function vc(a){this.ba=a.i(Sb);this.D=a.i(Tb);this.l=a.i(Yb)}vc.prototype.update=function(a){a.forEach(function(a){wc(this,a);xc(this,a)},this)};function xc(a,b){var c=b.getName();b.Ca.forEach(function(a,b){this.ba.remove(c,b)},a);b.Ba.forEach(function(a){this.ba.set(c,a)},a);b.pa.forEach(function(a){this.ba.set(c,a[1])},a)}function wc(a,b){var c=a.l.table(b.getName());yc(b).forEach(function(a){zc(this,c,a)},a)}
function zc(a,b,c){var d=[];(a.D.ic.get(b.getName())||[]).forEach(function(a){try{Ac(a,c),d.push(a)}catch(b){throw d.forEach(function(a){Ac(a,[c[1],c[0]])},this),b;}},a)}function Ac(a,b){var c=null===b[1]?void 0:b[1].Db(a.getName()),d=null===b[0]?void 0:b[0].Db(a.getName());if(!q(d)&&q(c))a.add(c,b[1].id());else if(q(d)&&q(c)){if(null===c||null===d){if(c==d)return}else if(0==a.pc().compare(d,c))return;a.add(c,b[1].id());a.remove(d,b[0].id())}else q(d)&&!q(c)&&a.remove(d,b[0].id())};var Bc={};r("lf.ConstraintAction",Bc);Bc.RESTRICT=0;Bc.CASCADE=1;var Cc={};r("lf.ConstraintTiming",Cc);Cc.IMMEDIATE=0;Cc.DEFERRABLE=1;var Dc={};r("lf.Order",Dc);Dc.DESC=0;Dc.ASC=1;var Ec={};r("lf.Type",Ec);Ec.ARRAY_BUFFER=0;Ec.BOOLEAN=1;Ec.DATE_TIME=2;Ec.INTEGER=3;Ec.NUMBER=4;Ec.STRING=5;Ec.OBJECT=6;var Fc={0:null,1:!1,2:Object.freeze(new Date(0)),3:0,4:0,5:"",6:null};r("lf.type.DEFAULT_VALUES",Fc);function D(a,b){this.code=a;this.message="http://sn.im/2a0j3wn?c="+a;if(1<arguments.length)for(var c=1;c<=Math.min(4,arguments.length-1);++c)this.message+="&p"+(c-1)+"="+encodeURIComponent(arguments[c].toString().slice(0,64))}t(D,Error);function Gc(a){this.D=a.i(Tb);this.l=a.i(Yb);this.cd=null}function Hc(a,b,c){var d=b.Cb().ag;c.forEach(function(a){d.forEach(function(b){if(null==a.s[b.getName()])throw new D(202,b.m());},this)},a)}function Ic(a,b,c,d){b.Cb().Nd().forEach(function(a){a.timing==d&&Jc(this,a,c)},a)}function Jc(a,b,c){var d=Kc(a,b);c.forEach(function(a){if(Lc(a[0],a[1],b.name)&&(a=a[1].s[b.qb],null!==a&&!d.Ka(a)))throw new D(203,b.name);},a)}
function Kc(a,b){null===a.cd&&(a.cd=A());var c=a.cd.get(b.name)||null;null===c&&(c=a.l.table(b.yb)[b.Lc].ua(),c=a.D.get(c.m()),a.cd.set(b.name,c));return c}function Lc(a,b,c){return(null===a?null!==b:null===b)||a.Db(c)!=b.Db(c)}function Mc(a,b,c,d){b=Nc(a.l.info(),b.getName());null!=b&&b.forEach(function(a){if(a.timing==d){var b=this.D.get(a.name),h=Kc(this,a);c.forEach(function(c){if(Lc(c[0],c[1],h.getName())&&b.Ka(c[0].s[a.Lc]))throw new D(203,a.name);},this)}},a)}
function Pc(a,b,c,d){0!=c.length&&(c=c.map(function(a){return[null,a]}),Ic(a,b,c,d))}function Qc(a,b,c,d){0!=c.length&&(Ic(a,b,c,d),Mc(a,b,c,d))}function Rc(a,b,c,d){0!=c.length&&(c=c.map(function(a){return[a,null]}),Mc(a,b,c,d))};function Sc(a){this.Ba=A();this.pa=A();this.Ca=A();this.A=a}m=Sc.prototype;m.getName=f("A");m.add=function(a){if(this.Ca.has(a.id())){var b=[this.Ca.get(a.id()),a];this.pa.set(a.id(),b);this.Ca.delete(a.id())}else this.Ba.set(a.id(),a)};m.modify=function(a){var b=a[1],c=a[0].id();this.Ba.has(c)?this.Ba.set(c,b):(this.pa.has(c)&&(a=[this.pa.get(a[0].id())[0],b]),this.pa.set(c,a))};
m.delete=function(a){if(this.Ba.has(a.id()))this.Ba.delete(a.id());else if(this.pa.has(a.id())){var b=this.pa.get(a.id())[0];this.pa.delete(a.id());this.Ca.set(a.id(),b)}else this.Ca.set(a.id(),a)};function yc(a){var b=[];a.Ba.forEach(function(a){b.push([null,a])});a.pa.forEach(function(a){b.push(a)});a.Ca.forEach(function(a){b.push([a,null])});return b}m.toString=function(){return"["+Ib(this.Ba).toString()+"], ["+Ib(this.pa).toString()+"], ["+Ib(this.Ca).toString()+"]"};
function Tc(a){var b=new Sc(a.A);a.Ba.forEach(function(a){b.delete(a)});a.Ca.forEach(function(a){b.add(a)});a.pa.forEach(function(a){b.modify([a[1],a[0]])});return b}m.md=function(){return 0==this.Ba.size&&0==this.Ca.size&&0==this.pa.size};function Uc(a,b){this.Z=A();b.forEach(function(a){this.Z.set(a.getName(),a)},this);this.ba=a.i(Sb);this.D=a.i(Tb);this.Qa=new Gc(a);this.ld=new vc(a);this.pb=A()}function Pb(a){var b=[];Ib(a.pb).map(function(a){return this.Z.get(a)},a).forEach(function(a){a.Fb()&&(a.Da().forEach(function(a){b.push(this.D.get(a.m()))},this),b.push(this.D.get(a.getName()+".#")))},a);return b}m=Uc.prototype;m.Y=f("Z");
function Vc(a){var b=[];a.Z.forEach(function(a){a.Fb()&&(a.Da().forEach(function(a){b.push(a.m())}),b.push(a.getName()+".#"))});return b}m.wb=function(a,b){Wc(this,a);Hc(this.Qa,a,b);Pc(this.Qa,a,b,0);for(var c=0;c<b.length;c++)Xc(this,a,[null,b[c]])};
function Xc(a,b,c){var d=b.getName(),e=a.pb.get(d)||new Sc(d);a.pb.set(d,e);try{zc(a.ld,b,c)}catch(g){throw g;}b=c[0];var h=c[1];null===b&&null!==h?(a.ba.set(d,h),e.add(h)):null!==b&&null!==h?(a.ba.set(d,h),e.modify(c)):null!==b&&null===h&&(a.ba.remove(d,b.id()),e.delete(b))}m.update=function(a,b){Wc(this,a);Hc(this.Qa,a,b);for(var c=0;c<b.length;c++){var d=b[c],d=[this.ba.get(d.id()),d];Qc(this.Qa,a,[d],0);Xc(this,a,d)}};
m.Qd=function(a,b){Wc(this,a);Hc(this.Qa,a,b);for(var c=0;c<b.length;c++){var d=b[c],e=null,g,h=a.Cb().fd();if(null===h)g=null;else{g=this.Qa;var h=h.m(),k=d.Db(h);g=g.D.get(h).get(k);g=0==g.length?null:g[0]}null!=g?(e=this.ba.get(g),d.oa=g,Qc(this.Qa,a,[[e,d]],0)):Pc(this.Qa,a,[d],0);Xc(this,a,[e,d])}};m.remove=function(a,b){Wc(this,a);Rc(this.Qa,a,b,0);for(var c=0;c<b.length;c++)Xc(this,a,[b[c],null])};
function Lb(a){a.pb.forEach(function(a){var c=this.Z.get(a.getName());Pc(this.Qa,c,B(a.Ba),1);Rc(this.Qa,c,B(a.Ca),1);Qc(this.Qa,c,B(a.pa),1)},a)}m.la=aa();m.Gb=function(){var a=B(this.pb).map(function(a){return Tc(a)});this.ld.update(a)};function Wc(a,b){if(!a.Z.has(b.getName()))throw new D(106,b.getName());};function Yc(a,b,c,d){this.c=a;this.u=b;this.ca=null===this.c?!1:c;this.ma=null===this.u?!1:d}Yc.prototype.toString=function(){return(this.ca?"(":"[")+(null===this.c?"unbound":this.c)+", "+(null===this.u?"unbound":this.u)+(this.ma?")":"]")};function Zc(a){if(null===a.c&&null===a.u)return[];var b=null,c=null;null===a.c||(b=new Yc(null,a.c,!1,!a.ca));null===a.u||(c=new Yc(a.u,null,!a.ma,!1));return[b,c].filter(function(a){return null!==a})}
Yc.prototype.reverse=function(){return new Yc(this.u,this.c,this.ma,this.ca)};function $c(a,b){var c=ad(a.c,b.c,!0,a.ca,b.ca);if(0==c)return!0;var d=-1==c?a:b,c=1==c?a:b;return null===d.u||d.u>c.c||d.u==c.c&&!d.ma&&!c.ca}function bd(){return new Yc(null,null,!1,!1)}function cd(a){return null===a.c&&null===a.u}function dd(a){return null!=a.c&&a.c==a.u&&!a.ca&&!a.ma}
Yc.prototype.contains=function(a){var b=null===this.u||a<this.u||a==this.u&&!this.ma;return(null===this.c||a>this.c||a==this.c&&!this.ca)&&b};function ad(a,b,c,d,e){function g(a){return c?a:1==a?-1:1}d=d||!1;e=e||!1;return null===a?null===b?(d?!e:e)?d?g(1):g(-1):0:g(-1):null===b?g(1):a<b?-1:a==b?(d?!e:e)?d?g(1):g(-1):0:1}function ed(a,b){var c=ad(a.c,b.c,!0,a.ca,b.ca);0==c&&(c=ad(a.u,b.u,!1,a.ma,b.ma));return c};function F(a,b){this.entries=a;this.L=C(b);this.Xa=null}function G(a){return jc(a.L)}function fd(a){return a.entries.map(function(a){return a.sa.s})}function gd(a){return a.entries.map(function(a){return a.sa.id()})}function hd(a,b){return a.Xa.get(b.m())}var id=null;function jd(){null===id&&(id=new F([],[]));return id}
function kd(a){if(0==a.length)return jd();for(var b=a.reduce(function(a,b){return a+b.entries.length},0),c=Array(b),d=0,b=a.map(function(a){var b=A();a.entries.forEach(function(a){c[d++]=a;b.set(a.id,a)});return b}),e=A(),g=0;g<c.length;g++)b.every(function(a){return a.has(c[g].id)})&&e.set(c[g].id,c[g]);return new F(B(e),jc(a[0].L))}function ld(a){if(0==a.length)return jd();var b=A();a.forEach(function(a){a.entries.forEach(function(a){b.set(a.id,a)})});return new F(B(b),jc(a[0].L))}
function md(a,b){var c=1<b.length,d=a.map(function(a){return new nd(a,c)});return new F(d,b)}function nd(a,b){this.sa=a;this.id=od++;this.Td=b}var od=0;function H(a,b){var c=b.Ya();return null!==c&&a.sa.s.hasOwnProperty(c)?a.sa.s[c]:a.Td?a.sa.s[I(b.H())][b.getName()]:a.sa.s[b.getName()]}function pd(a,b,c){var d=b.Ya();if(null!=d)a.sa.s[d]=c;else if(a.Td){var d=I(b.H()),e=a.sa.s[d];null==e&&(e={},a.sa.s[d]=e);e[b.getName()]=c}else a.sa.s[b.getName()]=c}
function qd(a,b,c,d){function e(a,b){if(a.Td){var c=a.sa.s,d;for(d in c)g[d]=c[d]}else g[b[0]]=a.sa.s}var g={};e(a,b);e(c,d);a=new y(-1,g);return new nd(a,!0)};r("lf.bind",function(a){return new rd(a)});function rd(a){this.ea=a}r("lf.Binder",rd);rd.prototype.ua=f("ea");function sd(){this.Le=td();var a=ud();this.ec=A();this.ec.set(1,vd());this.ec.set(2,wd());this.ec.set(4,a);this.ec.set(3,a);this.ec.set(5,xd())}sd.zc=function(){return sd.He?sd.He:sd.He=new sd};function yd(a,b,c){return(a.ec.get(b)||null).get(c)||null}function td(){function a(a){return a}var b=A();b.set(1,function(a){return null===a?null:a?1:0});b.set(2,function(a){return null===a?null:a.getTime()});b.set(3,a);b.set(4,a);b.set(5,a);return b}
function vd(){var a=A();a.set("eq",function(a,c){return a==c});a.set("neq",function(a,c){return a!=c});return a}
function ud(){var a=vd();a.set("between",function(a,c){return null===a||null===c[0]||null===c[1]?!1:a>=c[0]&&a<=c[1]});a.set("gte",function(a,c){return null===a||null===c?!1:a>=c});a.set("gt",function(a,c){return null===a||null===c?!1:a>c});a.set("in",function(a,c){return-1!=c.indexOf(a)});a.set("lte",function(a,c){return null===a||null===c?!1:a<=c});a.set("lt",function(a,c){return null===a||null===c?!1:a<c});return a}
function xd(){var a=ud();a.set("match",function(a,c){return null===a||null===c?!1:(new RegExp(c)).test(a)});return a}
function wd(){var a=A();a.set("between",function(a,c){return null===a||null===c[0]||null===c[1]?!1:a.getTime()>=c[0].getTime()&&a.getTime()<=c[1].getTime()});a.set("eq",function(a,c){return(null===a?-1:a.getTime())==(null===c?-1:c.getTime())});a.set("gte",function(a,c){return null===a||null===c?!1:a.getTime()>=c.getTime()});a.set("gt",function(a,c){return null===a||null===c?!1:a.getTime()>c.getTime()});a.set("in",function(a,c){return c.some(function(c){return c.getTime()==a.getTime()})});a.set("lte",
function(a,c){return null===a||null===c?!1:a.getTime()<=c.getTime()});a.set("lt",function(a,c){return null===a||null===c?!1:a.getTime()<c.getTime()});a.set("neq",function(a,c){return(null===a?-1:a.getTime())!=(null===c?-1:c.getTime())});return a};function J(){this.g=this.C=null}var zd=[];J.prototype.getParent=f("C");J.prototype.gb=function(){for(var a=this;!ea(a.getParent());)a=a.getParent();return a};function Ad(a){for(var b=0;!ea(a.getParent());)b++,a=a.getParent();return b}function K(a){return a.g||zd}function Bd(a,b){return K(a)[b]||null}function Cd(a,b,c){b.C=a;null===a.g?a.g=[b]:a.g.splice(c,0,b)}function L(a,b){b.C=a;null===a.g?a.g=[b]:a.g.push(b)}
function Dd(a,b){var c=a.g&&a.g[b];return c?(c.C=null,a.g.splice(b,1),0==a.g.length&&(a.g=null),c):null}J.prototype.removeChild=function(a){return Dd(this,K(this).indexOf(a))};function Ed(a,b,c){Bd(a,c).C=null;b.C=a;a.g[c]=b}function Fd(a,b,c){!1!==b.call(c,a)&&K(a).forEach(function(a){Fd(a,b,c)})};function Gd(){J.call(this);this.oa=Hd++}t(Gd,J);var Hd=0;Gd.prototype.V=f("oa");function Id(a,b,c){Gd.call(this);this.O=a;this.value=b;this.G=c;this.tc=yd(sd.zc(),this.O.I(),this.G);this.$a=!1;this.ac=b}t(Id,Gd);m=Id.prototype;m.Jb=function(){var a=new Id(this.O,this.value,this.G);a.ac=this.ac;a.vd(this.$a);var b=this.V();a.oa=b;return a};m.fb=function(a){return null!=a?(a.push(this.O),a):[this.O]};m.vd=ba("$a");function Jd(a){var b=!1;a.value instanceof rd||(b="array"==da(a.value)?!a.value.some(function(a){return a instanceof rd}):!0);if(!b)throw new D(501);}
m.eval=function(a){Jd(this);if("in"==this.G)return Kd(this,a);var b=a.entries.filter(function(a){return this.tc(H(a,this.O),this.value)!=this.$a},this);return new F(b,G(a))};m.bind=function(a){if(this.ac instanceof rd){var b=this.ac.ua();if(a.length<=b)throw new D(510);this.value=a[b]}else"array"==da(this.ac)&&(this.value=this.ac.map(function(b){if(b instanceof rd){var d=b.ua();if(a.length<=d)throw new D(510);return a[b.ua()]}return b}))};
function Kd(a,b){var c=C(a.value),d=function(a){return null===a?!1:c.has(a)!=this.$a}.bind(a),e=b.entries.filter(function(a){return d(H(a,this.O))},a);return new F(e,G(b))}m.toString=function(){return"value_pred("+this.O.m()+" "+this.G+(this.$a?"(complement)":"")+" "+this.value+")"};function Ld(a){this.ga=a;this.$c=this.ya=null}function Md(a,b){null===a.ya&&null!=a.w&&(a.ya=Nd(a.w));return a.ya.get(b)||null}function Nd(a){var b=A();Fd(a,function(a){b.set(a.V(),a)});return b}function Od(a,b){b.w&&(a.w=b.w.Jb());a.$c=b}Ld.prototype.bind=function(){return this};function Pd(a,b){var c=a.w;null!=c&&Fd(c,function(a){a instanceof Id&&a.bind(b)})};function Qd(a){Ld.call(this,a)}t(Qd,Ld);function Rd(a){var b="";a.forEach(function(c,d){b+=c.O.m()+" ";b+=1==c.jb?"ASC":"DESC";d<a.length-1&&(b+=", ")});return b}Qd.prototype.Y=function(){return C(this.c)};Qd.prototype.clone=function(){var a=new Qd(this.ga);Od(a,this);this.f&&(a.f=this.f.slice());this.c&&(a.c=this.c.slice());a.W=this.W;a.N=this.N;this.M&&(a.M=this.M.slice());this.ha&&(a.ha=this.ha.slice());this.Qb&&(a.Qb=this.Qb);this.Xb&&(a.Xb=this.Xb);a.xb=this.xb;return a};
Qd.prototype.bind=function(a){Qd.Hb.bind.call(this,a);null!=this.Qb&&(this.W=a[this.Qb.ua()]);null!=this.Xb&&(this.N=a[this.Xb.ua()]);Pd(this,a);return this};function Sd(a,b){this.za=a;this.Z=b}Sd.prototype.gb=f("za");Sd.prototype.Y=f("Z");function Td(a){var b=C();a.forEach(function(a){a.Y().forEach(b.add.bind(b))});return b};function Ud(a,b){this.global=a;this.Pa=a.i(Rb);this.sd=b.map(function(a){return a.context});this.Ve=b.map(function(a){return a.de});this.xe=Td(this.Ve);this.lf=Vd(this);this.bb=x()}function Vd(a){return a.sd.some(function(a){return!(a instanceof Qd)})?1:0}m=Ud.prototype;
m.exec=function(){function a(){var g=d.shift();if(g){var h=e[c.length];return g.gb().exec(b,h).then(function(b){c.push(b[0]);return a()})}return w()}var b=new Uc(this.global,this.xe),c=[],d=this.Ve.slice(),e=this.sd;return a().then(function(){return this.Pa.Bb(this.lf,b).la()}.bind(this)).then(function(){this.ae(c);return c}.bind(this),function(a){b.Gb();throw a;})};m.I=f("lf");m.Y=f("xe");m.Mb=f("bb");m.V=function(){return ka(this)};m.ae=aa();function Wd(a,b){Ud.call(this,a,b);this.Eb=a.i(Xb)}t(Wd,Ud);Wd.prototype.getPriority=l(0);Wd.prototype.ae=function(a){this.sd.forEach(function(b,c){Xd(this.Eb,b,a[c])},this)};function Yd(a,b){this.h=a;this.Eb=a.i(Xb);this.Aa=a.i(Vb);this.ld=new vc(a);this.pb=b;var c=a.i(Yb),d=this.pb.map(function(a){return c.table(a.getName())});this.Z=C(d);this.bb=x()}m=Yd.prototype;m.exec=function(){this.ld.update(this.pb);this.Oc();return w()};m.I=l(1);m.Y=f("Z");m.Mb=f("bb");m.V=function(){return ka(this)};m.getPriority=l(1);m.Oc=function(){var a=Zd(this.Eb,this.Z);0!=a.length&&(a=new Wd(this.h,a),$d(this.Aa,a))};function ae(a){this.h=a;this.Pa=a.i(Rb);this.Aa=a.i(Vb)}ae.prototype.Zd=function(a){a=new Yd(this.h,a);$d(this.Aa,a)};function M(a,b){this.Oa=a;this.j=b;this.Va=A()}r("lf.backstore.FirebaseRawBackStore",M);M.prototype.gd=f("j");M.prototype.hd=function(){throw new D(351);};function be(a,b){var c=x(),d=a;b.length&&(d=a.child(b));d.once("value",function(a){c.resolve(a.val())},function(a){c.reject(a)});return c.ja}function ce(a,b,c){function d(a){a?e.reject(a):e.resolve()}c=c||!1;var e=x();c?a.set(b,d):a.update(b,d);return e.ja}
M.prototype.Ea=function(a){return be(this.j,"@rev/R").then(function(a){this.La=a;return be(this.j,"@table")}.bind(this)).then(function(b){var c=0,d;for(d in b)this.Va.set(d,b[d]),b[d]>c&&(c=b[d]);a.ra().forEach(function(a){this.Va.has(a.getName())||(b[a.getName()]=++c)},this);d=this.j.child("@table");return ce(d,b)}.bind(this))};
function de(a,b,c){var d=a.Va.get(b);return null!=d?function(){var a={},b=x();this.j.orderByChild("T").equalTo(d).once("value",function(d){d.forEach(function(b){var d=c(b.val());a[parseInt(b.key(),10)]=d});b.resolve(a)});return b.ja}.call(a).then(function(a){a["@rev"]={R:++this.La};return ce(this.j,a)}.bind(a)):w()}M.prototype.rc=function(a){return de(this,a,l(null)).then(function(){this.Va.delete(a);return ce(this.j.child("@table/"+a),null,!0)}.bind(this))};M.prototype.dropTable=M.prototype.rc;
M.prototype.mc=function(a,b,c){return de(this,a,function(a){var e=a.P;e[b]=c;return{R:this.La+1,T:a.T,P:e}}.bind(this))};M.prototype.addTableColumn=M.prototype.mc;M.prototype.sc=function(a,b){return de(this,a,function(a){var d=a.P;delete d[b];return{R:this.La+1,T:a.T,P:d}}.bind(this))};M.prototype.dropTableColumn=M.prototype.sc;M.prototype.Nc=function(a,b,c){return de(this,a,function(a){var e=a.P;e[c]=e[b];delete e[b];return{R:this.La+1,T:a.T,P:e}}.bind(this))};M.prototype.renameTableColumn=M.prototype.Nc;
M.prototype.sb=function(){throw new D(351);};M.prototype.createRow=M.prototype.sb;M.prototype.Cc=f("Oa");M.prototype.getVersion=M.prototype.Cc;M.prototype.cc=function(a){var b=x();a=this.Va.get(a);this.j.orderByChild("T").equalTo(a).once("value",function(a){var d=[];a.forEach(function(a){d.push(a.val().P)});b.resolve(d)});return b.ja};M.prototype.dump=function(){var a={},b=Ib(this.Va).map(function(b){return this.cc(b).then(function(d){a[b]=d})}.bind(this));return cb(b).then(function(){return a})};
M.prototype.dump=M.prototype.dump;function ee(a,b,c){Kb.call(this,c,b);this.j=a}t(ee,Kb);ee.prototype.H=function(a){return this.j.Ac(a)};
ee.prototype.oc=function(){var a=this.Sa.pb;if(0==a.size)this.aa.resolve();else{var b=this.j.La+1;this.j.La=b;var c={"@rev":{R:b}};a.forEach(function(a,e){var g=this.j.Va.get(e);a.Ba.forEach(function(a,d){c[d]={R:b,T:g,P:a.s}});a.pa.forEach(function(a,d){c[d]={R:b,T:g,P:a[1].s}});a.Ca.forEach(function(a,b){c[b]=null})},this);this.j.j.update(c,function(c){null===c?this.aa.resolve():(this.j.La=b-1,c=B(a).map(function(a){return fe(this.j,a.getName())},this),cb(c).then(this.aa.reject.bind(this.aa),this.aa.reject.bind(this.aa)))}.bind(this))}return this.aa.ja};function ge(){this.ta=A()}function he(a,b){if(0==b.length)return B(a.ta);var c=[];b.forEach(function(a){a=this.ta.get(a)||null;null===a||c.push(a)},a);return c}ge.prototype.getData=f("ta");ge.prototype.get=function(a){return w(he(this,a))};function ie(a,b){b.forEach(function(a){this.ta.set(a.id(),a)},a)}ge.prototype.put=function(a){ie(this,a);return w()};function je(a,b){0==b.length||b.length==a.ta.size?a.ta.clear():b.forEach(function(a){this.ta.delete(a)},a)}
ge.prototype.remove=function(a){je(this,a);return w()};function ke(a){return 0==a.ta.size?0:Ib(a.ta).reduce(function(a,c){return a>c?a:c},0)};function le(a,b){this.l=a;this.rf=b;this.Mc=A();this.La=-1;this.L=A();this.Va=A();this.Fd=null}m=le.prototype;
m.Ea=function(a){this.j=this.rf.child(this.l.name());var b=a||function(){return w()};return be(this.j,"@db/version").then(function(a){return null===a?ce(this.j,me(this),!0).then(function(){var a=new M(0,this.j);return b(a)}.bind(this)):a==this.l.version()?be(this.j,"@rev/R").then(function(a){this.La=a;return be(this.j,"@table")}.bind(this)).then(function(a){for(var b in a)this.Va.set(b,a[b]);a=this.l.ra().map(function(a){return fe(this,a.getName())},this);return cb(a)}.bind(this)).then(function(){ne(this);
oe(this);return w()}.bind(this)):this.be(a,b).then(function(){return this.Ea()}.bind(this))}.bind(this))};m.be=function(a,b){var c=new M(a,this.j);return c.Ea(this.l).then(function(){return w()}.bind(this)).then(function(){return b(c)}).then(function(){var a=this.j.child("@db");return ce(a,{version:this.l.version()},!0)}.bind(this))};
function oe(a){a.j.off();a.j.on("child_removed",a.cg.bind(a));a.Gd&&(a.Gd.off(),a.Mc.clear());a.Gd=a.j.orderByChild("R").startAt(a.La+1);a.Gd.on("value",a.Zd.bind(a))}function ne(a){ob=B(a.L).map(function(a){return ke(a)}).reduce(function(a,c){return a>c?a:c},0)+1}m.cg=function(a){var b=a.val(),c=this.Mc.get(b.T)||null;null===c&&(c=C(),this.Mc.set(b.T,c));c.add(parseInt(a.key(),10))};
m.Zd=function(a){var b=a.child("@rev/R").val();null!=b&&b!=this.La&&(this.La=b,a=pe(this,a),a.forEach(function(a){var b=this.L.get(a.getName()),e=Ib(a.Ca);0<e.length&&je(b,e);var g=B(a.Ba);a.pa.forEach(function(a){g.push(a[1])});ie(b,g)},this),0<a.length&&this.Hc(a),oe(this))};
function pe(a,b){var c=C(),d=A();a.Va.forEach(function(a,b){var h=this.L.get(b),k=new Sc(b);if(this.Mc.has(a)){var p=jc(this.Mc.get(a));p.forEach(function(a){c.add(a)});he(h,p).forEach(function(a){k.delete(a)})}d.set(a,k)}.bind(a));b.forEach(function(a){if("@rev"!=a.key()){var b=parseInt(a.key(),10);if(!c.has(b)){a=a.val();var h=d.get(a.T),k=this.L.get(h.getName());k.getData().has(b)?h.modify([he(k,[b])[0],new y(b,a.P)]):h.add(new y(b,a.P))}}}.bind(a));return B(d).filter(function(a){return!a.md()})}
function fe(a,b){var c=x(),d=a.Va.get(b);a.j.orderByChild("T").equalTo(d).once("value",function(a){var d=new ge,h=[];a.forEach(function(a){h.push(new y(parseInt(a.key(),10),a.val().P))});ie(d,h);this.L.set(b,d);c.resolve()}.bind(a));return c.ja}function me(a){var b={};b["@db"]={version:a.l.version()};b["@rev"]={R:1};a.La=1;b["@table"]={};a.l.ra().forEach(function(a,d){var e=a.getName();b["@table"][e]=d;this.L.set(e,new ge);this.Va.set(e,d)},a);return b}m.Bb=function(a,b){return new ee(this,a,b)};
m.Ac=function(a){var b=this.L.get(a)||null;if(null!==b)return b;throw new D(101,a);};m.close=aa();m.subscribe=ba("Fd");m.Hc=function(a){null!=this.Fd&&this.Fd(a)};function N(a,b,c,d){this.j=b;this.Na=c;this.Oa=a;this.Xc=d}r("lf.backstore.IndexedDBRawBackStore",N);N.prototype.gd=f("j");N.prototype.getRawDBInstance=N.prototype.gd;N.prototype.hd=f("Na");N.prototype.getRawTransaction=N.prototype.hd;N.prototype.rc=function(a){return new v(function(b,c){try{this.j.deleteObjectStore(a)}catch(d){c(d);return}b()},this)};N.prototype.dropTable=N.prototype.rc;
function qe(a,b,c,d){return new v(function(a,g){var h;try{var k=this.Na.objectStore(b);h=k.openCursor()}catch(p){g(p);return}h.onsuccess=function(){var b=h.result;b?(c(b),b.continue()):(d(k),a())};h.onerror=g},a)}function re(a){var b=null;return b=a instanceof ArrayBuffer?rb(a):a instanceof Date?a.getTime():a}
function se(a,b,c){function d(a){var b=pc(a.value),d=b.s,e;for(e in d){var E=pb(d[e]);c(E);d[e]=E.Ia()}a.update(b.Ia())}function e(a){var b=pb(a.value);c(b);a.update(b.Ia())}return qe(a,b,a.Xc?d:e,aa())}N.prototype.mc=function(a,b,c){var d=re(c);return se(this,a,function(a){a.s[b]=d})};N.prototype.addTableColumn=N.prototype.mc;N.prototype.sc=function(a,b){return se(this,a,function(a){delete a.s[b]})};N.prototype.dropTableColumn=N.prototype.sc;
N.prototype.Nc=function(a,b,c){return se(this,a,function(a){a.s[c]=a.s[b];delete a.s[b]})};N.prototype.renameTableColumn=N.prototype.Nc;function te(a,b){var c=[];return new v(function(a,e){var g;try{g=this.Na.objectStore(b).openCursor()}catch(h){e(h);return}g.onsuccess=function(){var b=g.result;if(b){if(this.Xc){var e;e=pc(b.value).s;for(var h in e)c.push(e[h])}else c.push(b.value);b.continue()}else a(c)}.bind(this);g.onerror=e},a)}N.prototype.sb=function(a){var b={},c;for(c in a)b[c]=re(a[c]);return qb(b)};
N.prototype.createRow=N.prototype.sb;N.prototype.Cc=f("Oa");N.prototype.getVersion=N.prototype.Cc;N.prototype.dump=function(){for(var a=this.j.objectStoreNames,b=[],c=0;c<a.length;++c){var d=a.item(c);b.push(this.cc(d))}return cb(b).then(function(b){var c={};b.forEach(function(b,d){c[a.item(d)]=b});return c})};N.prototype.dump=N.prototype.dump;N.prototype.cc=function(a){return te(this,a).then(function(a){return a.map(function(a){return a.value})})};function ue(a,b){this.$=a;this.Kb=b}m=ue.prototype;m.get=function(a){if(0==a.length)return this.xc();a=a.map(function(a){return new v(function(c,d){var e;try{e=this.$.get(a)}catch(g){d(g);return}e.onerror=d;e.onsuccess=function(a){c(this.Kb(a.target.result))}.bind(this)},this)},this);return cb(a)};
m.xc=function(){return new v(function(a,b){var c=[],d;try{d=this.$.openCursor()}catch(e){b(e);return}d.onerror=b;d.onsuccess=function(){var b=d.result;b?(c.push(this.Kb(b.value)),b.continue()):a(c)}.bind(this)},this)};m.Sb=function(a){return new v(function(b,c){var d;try{d=a()}catch(e){c(e);return}d.onsuccess=b;d.onerror=c},this)};m.put=function(a){if(0==a.length)return w();a=a.map(function(a){return this.Sb(function(){return this.$.put(a.Ia())}.bind(this))},this);return cb(a)};
m.remove=function(a){return new v(function(b,c){var d=this.$.count();d.onsuccess=function(d){if(0==a.length||d.target.result==a.length)return this.Sb(function(){return this.$.clear()}.bind(this)).then(b,c);d=a.map(function(a){return this.Sb(function(){return this.$.delete(a)}.bind(this))},this);cb(d).then(b,c)}.bind(this);d.onerror=c},this)};function ve(a,b,c,d,e){Kb.call(this,c,d);this.h=a;this.Na=b;this.Xc=e;this.Na.oncomplete=this.aa.resolve.bind(this.aa);this.Na.onabort=this.aa.reject.bind(this.aa)}t(ve,Kb);ve.prototype.H=function(a,b,c){return this.Xc?(c=null!=c?c:0,a=this.Na.objectStore(a),new qc(a,b,0==c?ra(sc,this.h):tc)):new ue(this.Na.objectStore(a),b)};ve.prototype.oc=function(){return this.aa.ja};function we(a,b){this.h=a;this.l=b;this.Yc=b.We().Df||!1}m=we.prototype;
m.Ea=function(a){var b=window.indexedDB||window.mozIndexedDB||window.webkitIndexedDB||window.msIndexedDB;if(null==b)throw new D(352);var c=a||function(){return w()};return new v(function(a,e){var g;try{g=b.open(this.l.name(),this.l.version())}catch(h){e(h);return}g.onerror=e;g.onupgradeneeded=function(a){xe(this,c,a).then(aa(),e)}.bind(this);g.onsuccess=function(b){this.j=b.target.result;this.ie().then(function(b){ob=b+1;a(this.j)}.bind(this))}.bind(this)},this)};
function xe(a,b,c){var d=c.target.result,e=c.target.transaction;c=new N(c.oldVersion,d,e,a.Yc);ye(d);a.l.ra().forEach(ra(a.yf,d,e),a);return b(c)}function ye(a){for(var b=[],c=0;c<a.objectStoreNames.length;++c){var d=a.objectStoreNames.item(c);-1!=d.indexOf(".")&&b.push(d)}b.forEach(function(b){try{a.deleteObjectStore(b)}catch(c){}})}
m.yf=function(a,b,c){a.objectStoreNames.contains(c.getName())||a.createObjectStore(c.getName(),{keyPath:"id"});c.Fb()&&(c.Da().forEach(function(c){this.qc(a,b,c.m(),"btree")},this),this.qc(a,b,ze(c),"rowid"))};m.qc=function(a,b,c,d){a.objectStoreNames.contains(c)||(a.createObjectStore(c,{keyPath:"id"}),a=b.objectStore(c),(this.Yc?new qc(a,pb,tc):new ue(a,pb)).put([new tb(new sb(d))]))};
m.Bb=function(a,b){var c=Ib(b.Y());Vc(b).forEach(function(a){c.push(a)});var d=this.j.transaction(c,0==a?"readonly":"readwrite");return new ve(this.h,d,b,a,this.Yc)};
m.ie=function(a){function b(){if(0==d.length)return w();var a=d.shift();return c(a).then(b)}function c(b){return new v(function(c,d){var ga;try{ga=(a||e.transaction([b])).objectStore(b).openCursor(null,"prev")}catch(ma){d(ma);return}ga.onsuccess=function(a){(a=a.target.result)&&(g=Math.max(g,h(a)));c(g)};ga.onerror=function(){c(g)}})}var d=this.l.ra().map(function(a){return a.getName()}),e=this.j,g=0,h=function(a){return this.Yc?(a=pc(a.value),Object.keys(a.s).reduce(function(a,b){return Math.max(a,
b)},0)):a.key}.bind(this);return new v(function(a){b().then(function(){a(g)})})};m.close=function(){this.j.close()};m.Ac=function(){throw new D(511);};m.subscribe=aa();m.Hc=aa();function Ae(a,b,c){Kb.call(this,c,b);this.$=a;0==b&&this.aa.resolve()}t(Ae,Kb);Ae.prototype.H=function(a){return this.$.Ac(a)};Ae.prototype.oc=function(){this.aa.resolve();return this.aa.ja};function Be(a){this.l=a;this.L=A()}m=Be.prototype;m.Ea=function(){this.l.ra().forEach(this.Pf,this);return w()};m.Ac=function(a){var b=this.L.get(a)||null;if(null===b)throw new D(101,a);return b};m.Bb=function(a,b){return new Ae(this,a,b)};function Ce(a,b){if(!a.L.has(b)){var c=new ge;a.L.set(b,c);return c}return null}m.Pf=function(a){Ce(this,a.getName());a.Fb()&&(a.Da().forEach(function(a){this.qc(a.m(),"btree")},this),this.qc(ze(a),"rowid"))};m.qc=function(a,b){var c=Ce(this,a);null===c||c.put([new tb(new sb(b))])};
m.close=aa();m.subscribe=aa();m.Hc=aa();function De(a){Be.call(this,a);this.od=null}t(De,Be);De.prototype.subscribe=function(a){null===this.od&&(this.od=a)};De.prototype.Hc=function(a){null===this.od||this.od(a)};function Ee(a,b,c){this.Na=a;this.A=b;this.Kb=c}Ee.prototype.get=function(a){var b=this.Kb;Fe(this.Na,"SELECT id, value FROM "+this.A+" "+(0==a.length?"":"WHERE id IN ("+a.join(",")+")"),[],function(a){for(var d=a.rows.length,e=Array(d),g=0;g<d;++g)e[g]=b({id:a.rows.item(g).id,value:JSON.parse(a.rows.item(g).value)});return e});return this.Na.la()};
Ee.prototype.put=function(a){if(0==a.length)return w();var b="INSERT OR REPLACE INTO "+this.A+"(id, value) VALUES (?, ?)";a.forEach(function(a){Fe(this.Na,b,[a.id(),JSON.stringify(a.s)])},this);return w()};Ee.prototype.remove=function(a){Fe(this.Na,"DELETE FROM "+this.A+" "+(0==a.length?"":"WHERE id IN ("+a.join(",")+")"),[]);return w()};function Ge(a,b,c){Kb.call(this,b,c);this.j=a;this.L=A();this.Id=[]}t(Ge,Kb);Ge.prototype.H=function(a,b){var c=this.L.get(a)||null;null===c&&(c=new Ee(this,a,b),this.L.set(a,c));return c};function Fe(a,b,c,d){a.Id.push({pg:b,fg:c,transform:d})}
Ge.prototype.oc=function(){var a,b,c=this.aa.reject.bind(this.aa),d=function(a,b){this.aa.reject(b)}.bind(this),e=function(c,h){a=h;if(this.Id.length){var k=this.Id.shift();b=k.transform;c.executeSql(k.pg,k.fg,e,d)}else k=a,null!=b&&null!=a&&(k=b(a)),this.aa.resolve(k)}.bind(this);0==this.kf?this.j.readTransaction(e,c):this.j.transaction(e,c);return this.aa.ja};function O(a,b,c){this.j=c;this.h=a;this.Oa=b}r("lf.backstore.WebSqlRawBackStore",O);O.prototype.gd=f("j");O.prototype.getRawDBInstance=O.prototype.gd;O.prototype.hd=function(){throw new D(356);};O.prototype.getRawTransaction=O.prototype.hd;function He(a){return new Ge(a.j,new Uc(a.h,C()),1)}O.prototype.rc=function(a){var b=He(this);Fe(b,"DROP TABLE "+a,[]);return b.la()};O.prototype.dropTable=O.prototype.rc;
O.prototype.cc=function(a){var b=He(this);Fe(b,"SELECT id, value FROM "+a,[]);return b.la().then(function(a){for(var b=a.rows.length,e=Array(b),g=0;g<b;++g)e[g]={id:a.rows.item(g).id,value:JSON.parse(a.rows.item(g).value)};return w(e)})};function Ie(a,b,c){var d=He(a),e="UPDATE "+b+" SET value=? WHERE id=?";return a.cc(b).then(function(a){a.forEach(function(a){a=c(a);Fe(d,e,[JSON.stringify(a.value),a.id])});return d.la()})}
O.prototype.mc=function(a,b,c){var d=re(c);return Ie(this,a,function(a){a.value[b]=d;return a})};O.prototype.addTableColumn=O.prototype.mc;O.prototype.sc=function(a,b){return Ie(this,a,function(a){delete a.value[b];return a})};O.prototype.dropTableColumn=O.prototype.sc;O.prototype.Nc=function(a,b,c){return Ie(this,a,function(a){a.value[c]=a.value[b];delete a.value[b];return a})};O.prototype.renameTableColumn=O.prototype.Nc;O.prototype.sb=function(a){var b={},c;for(c in a)b[c]=re(a[c]);return qb(b)};
O.prototype.createRow=O.prototype.sb;O.prototype.Cc=f("Oa");O.prototype.getVersion=O.prototype.Cc;function Je(a){Fe(a,'SELECT tbl_name FROM sqlite_master WHERE type="table"',[],function(a){for(var c=Array(a.rows.length),d=0;d<c.length;++d)c[d]=a.rows.item(d).tbl_name;return c})}
O.prototype.dump=function(){var a=x(),b=He(this);Je(b);var c={};b.la().then(function(b){b=b.filter(function(a){return"__lf_ver"!=a&&"__WebKitDatabaseInfoTable__"!=a}).map(function(a){return this.cc(a).then(function(b){c[a]=b})},this);cb(b).then(function(){a.resolve(c)})}.bind(this));return a.ja};O.prototype.dump=O.prototype.dump;function Ke(a,b,c){this.h=a;this.l=b;this.og=c||4194304}function Le(a){return new Uc(a.h,C())}m=Ke.prototype;m.Ea=function(a){if(null==window.openDatabase)throw new D(353);var b=a||function(){return w()};return new v(function(a,d){try{var e=window.openDatabase(this.l.name(),"",this.l.name(),this.og);if(null!=e)this.j=e,Me(this,b).then(a,d);else throw new D(354);}catch(g){d(g)}},this)};
function Me(a,b){var c=x(),d=new Ge(a.j,Le(a),1);Fe(d,"CREATE TABLE IF NOT EXISTS __lf_ver(id INTEGER PRIMARY KEY, v INTEGER)",[]);Fe(d,"SELECT v FROM __lf_ver WHERE id = 0",[]);d.la().then(function(a){var d=0;a.rows.length&&(d=a.rows.item(0).v);d<this.l.version()?this.be(b,d).then(c.resolve.bind(c)):d>this.l.version()?c.reject(new D(108)):c.resolve()}.bind(a));return c.ja}m.Bb=function(a,b){if(null!=this.j)return new Ge(this.j,b,a);throw new D(2);};m.close=aa();m.Ac=function(){throw new D(512);};
m.subscribe=function(){throw new D(355);};m.Hc=function(){throw new D(355);};m.be=function(a,b){var c=x();Ne(this).then(function(){a(new O(this.h,b,this.j)).then(function(){return this.ie()}.bind(this)).then(c.resolve.bind(c))}.bind(this),c.reject.bind(c));return c.ja};
function Ne(a){var b=a.l.ra(),c=new Ge(a.j,Le(a),1),d=new Ge(a.j,Le(a),1);Fe(c,"INSERT OR REPLACE INTO __lf_ver VALUES (0, ?)",[a.l.version()]);Je(c);return c.la().then(function(a){a.filter(function(a){return-1!=a.indexOf(".")}).forEach(function(a){Fe(d,"DROP TABLE "+a,[])});var c=a.filter(function(a){return-1==a.indexOf(".")});b.map(function(a){return a.getName()}).filter(function(a){return-1==c.indexOf(a)}).forEach(function(a){Fe(d,"CREATE TABLE "+a+"(id INTEGER PRIMARY KEY, value TEXT)",[])});
return d.la()})}m.ie=function(){var a=0,b=x(),c=function(b){var c=new Ge(this.j,Le(this),0);Fe(c,"SELECT MAX(id) FROM "+b,[]);return c.la().then(function(b){b=b.rows.item(0)[0];a=Math.max(b,a)})}.bind(this),d=this.l.ra().map(function(a){return c(a.getName())});cb(d).then(function(){b.resolve(a)},function(a){b.reject(a)});return b.ja};function Oe(a){this.o=A();this.Yb=A();a.ra().forEach(function(a){this.Yb.set(a.getName(),C())},this)}m=Oe.prototype;m.set=function(a,b){this.o.set(b.id(),b);this.Yb.get(a).add(b.id())};m.wd=function(a,b){var c=this.Yb.get(a);b.forEach(function(a){this.o.set(a.id(),a);c.add(a.id())},this)};m.get=function(a){return this.o.get(a)||null};function Pe(a,b){return b.map(function(a){return this.get(a)},a)}
m.Za=function(a,b,c){var d=[],e=Math.min(b,c),g=Math.max(b,c);a=this.Yb.get(a);if(a.size<g-e)a.forEach(function(a){a>=e&&a<=g&&(a=this.o.get(a),d.push(a))},this);else for(b=e;b<=g;++b)a.has(b)&&(c=this.o.get(b),d.push(c));return d};m.remove=function(a,b){this.o.delete(b);this.Yb.get(a).delete(b)};m.yc=function(a){return null!=a?this.Yb.get(a).size:this.o.size};m.clear=function(){this.o.clear();this.Yb.clear()};function Qe(a,b,c){var d=0,e=a.length;for(c=c||Re;d<e;){var g=d+e>>1;0>c(a[g],b)?d=g+1:e=g}return d==e&&a[d]==b?d:~d}function Re(a,b){return a-b}function Se(a,b,c){c=Qe(a,b,c);return 0>c?(a.splice(-(c+1),0,b),!0):!1};function Te(a,b,c,d){a=b?a.reverse():a;if(null==c&&null==d)return a;c=Math.min(q(c)?c:a.length,a.length);if(0==c)return[];d=Math.min(d||0,a.length);return a.slice(d,d+c)};function Ue(){this.na=0}Ue.prototype.add=function(a,b){this.na+=b};Ue.prototype.remove=function(a,b){this.na-=b};Ue.prototype.clear=function(){this.na=0};function Ve(a,b){a.clear();b.forEach(function(a){this.na+=a.na},a)};function We(a,b,c,d){this.A=a;this.U=b;this.me=c;this.nb=new Ue;if(d){a=511;a*=a*a;if(d.length>=a)throw new D(6,a);d=Xe(this,d);this.qa=d=Ye(d)}else this.clear()}var Ze=[];m=We.prototype;m.getName=f("A");m.toString=function(){return this.qa.toString()};m.add=function(a,b){this.qa=this.qa.wb(a,b)};m.set=function(a,b){this.qa=this.qa.wb(a,b,!0)};m.remove=function(a,b){this.qa=this.qa.remove(a,b)};m.get=function(a){return this.qa.get(a)};
m.bd=function(a){if(null==a)return this.Ma().na;if(a instanceof Yc){if(cd(a))return this.Ma().na;if(dd(a))return this.get(a.c).length}return this.Za([a]).length};m.Ma=f("nb");m.xc=function(a,b,c,d){c=Array(a);this.qa.fill({offset:b?this.nb.na-a-d:d,count:a,le:0},c);return b?c.reverse():c};
m.Za=function(a,b,c,d){var e=$e(this.qa).b[0];if(!q(e)||0==c)return Ze;b=b||!1;c=null!=c?Math.min(c,this.nb.na):this.nb.na;d=d||0;var g=Math.min(Math.max(this.nb.na-d,0),c);if(0==g)return Ze;if(!q(a)||1==a.length&&a[0]instanceof Yc&&cd(a[0]))return this.xc(g,b,c,d);a=this.U.ff(a);var h=Array(b?this.nb.na:g),k={count:0,W:h.length,reverse:b,N:d};a.forEach(function(a){for(var b=this.U.td(a),b=this.U.Sd(a)?e:b[0],b=af(this.qa,b),c=k.count,d=0;null!=b&&k.count<k.W;)b.Za(a,k,h),k.count!=c?(d=0,c=k.count):
d++,b=2==d?null:b.next()},this);h.splice(k.count,g-k.count);return b?Te(h,b,c,d):h};m.clear=function(){this.qa=bf(this);this.nb.clear()};m.Ka=function(a){return this.qa.Ka(a)};m.min=function(){return this.Gc(this.U.min.bind(this.U))};m.max=function(){return this.Gc(this.U.max.bind(this.U))};m.Gc=function(a){var b=$e(this.qa),c=cf(this.qa);if(0==b.b.length&&0==c.b.length)return null;var d=b.b[0],b=b.B[0],e=c.b[c.b.length-1],c=c.B[c.b.length-1];return 1==a(d,e)?[d,this.me?[b]:b]:[e,this.me?[c]:c]};
m.Ga=f("me");m.pc=f("U");m.Wd=function(a,b){return null!=a?-1==this.U.compare(a,b):!1};m.Ra=function(a,b){return null!=a?0==this.U.compare(a,b):!1};m.Ia=function(){for(var a=[],b=$e(this.qa);b;)a.push(new y(b.oa,[b.b,b.B])),b=b.wa;return a};function df(a,b,c,d){a=new We(b,a,c);d=ef(d,a);a.qa=d;return a}function ff(a,b){this.oa=a;this.F=b;this.hb=0;this.wa=this.zb=this.C=null;this.b=[];this.B=[];this.g=[]}function bf(a){return new ff(ob++,a)}function P(a){return 0==a.hb}m=ff.prototype;m.next=f("wa");
function gf(a){function b(a){return null!=a?a.oa.toString():"_"}var c=a.oa+"["+a.b.join("|")+"]",d=a.g.map(function(a){return a.oa}).join("|"),e=a.B.join("/"),g=b(a.zb)+"{",g=P(a)?g+e:g+d,g=g+"}"+b(a.C);a.wa&&(a=gf(a.wa),c=c+"  "+a[0],g=g+"  "+a[1]);return[c,g]}m.toString=function(){var a="",b=gf(this),a=a+(b[0]+"\n"+b[1]+"\n");this.g.length&&(a+=this.g[0].toString());return a};function $e(a){return P(a)?a:$e(a.g[0])}function cf(a){return P(a)?a:cf(a.g[a.g.length-1])}
function hf(a,b){b&&(b.zb=a);a&&(a.wa=b)}function Xe(a,b){for(var c=b.length,d=0,e=bf(a),g=e;0<c;){var h=768<=c?511:257<=c&&511>=c?c:257,k=b.slice(d,d+h);e.b=k.map(function(a){return a.key});e.B=k.map(function(a){return a.value});d+=h;c-=h;0<c&&(h=bf(e.F),hf(e,h),e=h)}return g}function jf(a){var b=a[0],c=bf(b.F);c.hb=b.hb+1;c.g=a;for(b=0;b<a.length;++b)a[b].C=c,0<b&&c.b.push(a[b].b[0]);return c}
function Ye(a){var b=a,c=[];do c.push(b),b=b.wa;while(b);if(512>=c.length)b=jf(c);else{var d=c.length,e=0,b=bf(a.F);for(b.hb=a.hb+2;0<d;){a=768<=d?511:257<=d&&511>=d?d:257;var g=c.slice(e,e+a),h=jf(g);h.C=b;b.g.length&&(b.b.push(g[0].b[0]),hf(b.g[b.g.length-1],h));b.g.push(h);e+=a;d-=a}}return b}m.get=function(a){var b=kf(this,a);if(P(this)){var c=Ze;this.F.Ra(this.b[b],a)&&(c=c.concat(this.B[b]));return c}b=this.F.Ra(this.b[b],a)?b+1:b;return this.g[b].get(a)};
m.Ka=function(a){var b=kf(this,a);return this.F.Ra(this.b[b],a)?!0:P(this)?!1:this.g[b].Ka(a)};m.remove=function(a,b){mf(this,a,-1,b);if(null==this.C){var c=this;1==this.g.length&&(c=this.g[0],c.C=null);return c}return this};function nf(a){return P(a)?a.b[0]:nf(a.g[0])}function of(a){a.b=[];for(var b=1;b<a.g.length;++b)a.b.push(nf(a.g[b]))}
function mf(a,b,c,d){var e=kf(a,b),g=P(a);if(!g){var h=a.F.Ra(a.b[e],b)?e+1:e;if(mf(a.g[h],b,h,d))of(a);else return!1}else if(!a.F.Ra(a.b[e],b))return!1;if(a.b.length>e&&a.F.Ra(a.b[e],b)){if(q(d)&&!a.F.Ga()&&g&&(h=a.B[e],d=Qe(h,d,void 0),0>d?d=!1:(h.splice(d,1),d=!0),d&&a.F.Ma().remove(b,1),a.B[e].length))return!1;a.b.splice(e,1);g&&(g=a.F.Ga()?1:a.B[e].length,a.B.splice(e,1),a.F.Ma().remove(b,g))}if(256>a.b.length&&null!=a.C){a:{b=null;if(a.wa&&256<a.wa.b.length)b=a.wa,e=d=0,g=a.b.length+1;else if(a.zb&&
256<a.zb.b.length)b=a.zb,d=a.zb.b.length-1,e=P(a)?d:d+1,g=0;else{b=!1;break a}a.b.splice(g,0,b.b[d]);b.b.splice(d,1);d=P(a)?a.B:a.g;h=null;P(a)?h=b.B:(h=b.g,h[e].C=a);d.splice(g,0,h[e]);h.splice(e,1);P(b)||(of(b),of(a));b=!0}b||pf(a,c)}return!0}
function pf(a,b){var c,d,e;a.wa&&511>a.wa.b.length?(c=a.wa,e=d=0):a.zb&&(c=a.zb,d=c.b.length,e=P(c)?c.B.length:c.g.length);d=[d,0].concat(a.b);Array.prototype.splice.apply(c.b,d);d=null;P(a)?d=a.B:(d=a.g,d.forEach(function(a){a.C=c}));d=[e,0].concat(d);Array.prototype.splice.apply(P(c)?c.B:c.g,d);hf(a.zb,a.wa);P(c)||of(c);-1!=b&&(a.C.b.splice(b,1),a.C.g.splice(b,1))}
m.wb=function(a,b,c){var d=kf(this,a);if(P(this)){if(this.F.Ra(this.b[d],a)){if(c)this.F.Ma().remove(a,this.F.Ga()?1:this.B[d].length),this.B[d]=this.F.Ga()?b:[b];else{if(this.F.Ga())throw new D(201);if(!Se(this.B[d],b))throw new D(109);}this.F.Ma().add(a,1);return this}this.b.splice(d,0,a);this.B.splice(d,0,this.F.Ga()?b:[b]);this.F.Ma().add(a,1);512==this.b.length?(d=bf(this.F),a=bf(this.F),a.hb=1,a.b=[this.b[256]],a.g=[this,d],a.C=this.C,this.C=a,d.b=this.b.splice(256),d.B=this.B.splice(256),d.C=
a,hf(d,this.wa),hf(this,d),d=a):d=this;return d}d=this.F.Ra(this.b[d],a)?d+1:d;a=this.g[d].wb(a,b,c);P(a)||1!=a.b.length||(this.b.splice(d,0,a.b[0]),a.g[1].C=this,a.g[0].C=this,this.g.splice(d,1,a.g[1]),this.g.splice(d,0,a.g[0]));return 512==this.b.length?qf(this):this};function qf(a){var b=bf(a.F),c=bf(a.F);b.C=a.C;b.hb=a.hb+1;b.b=[a.b[256]];b.g=[a,c];a.b.splice(256,1);c.C=b;c.hb=a.hb;c.b=a.b.splice(256);c.g=a.g.splice(257);c.g.forEach(function(a){a.C=c});a.C=b;hf(c,a.wa);hf(a,c);return b}
function kf(a,b){for(var c=0,d=a.b.length;c<d;){var e=c+d>>1;a.F.Wd(a.b[e],b)?c=e+1:d=e}return c}function af(a,b){if(!P(a)){var c=kf(a,b);a.F.Ra(a.b[c],b)&&c++;return af(a.g[c],b)}return a}
m.Za=function(a,b,c){function d(a){return a[0]?a[1]?0:1:-1}var e=this.F.pc(),g=0,h=this.b.length-1,k=this.b,p=d(e.rb(k[g],a)),E=d(e.rb(k[h],a));if(1!=p&&(-1!=p||-1!=E)){var ga=function(a,b){var c=a+b>>1;return c==a?c+1:c},ma=function(b,c,g){if(b>=c)return 0==g?c:-1;var h=d(e.rb(k[b],a));if(0==h)return b;if(1==h)return-1;h=ga(b,c);if(h==c)return 0==g?c:-1;var p=d(e.rb(k[h],a));return 0==p?ma(b,h,p):-1==p?ma(h+1,c,g):ma(b+1,h,p)},Xa=function(b,c){if(b>=c)return b;var g=d(e.rb(k[c],a));if(0==g)return c;
if(-1==g)return b;g=ga(b,c);if(g==c)return b;var h=d(e.rb(k[g],a));return 0==h?Xa(g,c):1==h?Xa(b,g-1):-1};0!=p&&(g=ma(g+1,h,E));-1!=g&&(h=Xa(g,h),-1!=h&&h>=g&&rf(this,b,c,g,h+1))}};function rf(a,b,c,d,e){for(;d<e&&(b.reverse||!(b.count>=b.W));++d)if(a.F.Ga())!b.reverse&&b.N?b.N--:c[b.count++]=a.B[d];else for(var g=0;g<a.B[d].length&&b.count<c.length;++g)!b.reverse&&b.N?b.N--:c[b.count++]=a.B[d][g]}
m.fill=function(a,b){if(P(this))for(var c=0;c<this.B.length&&0<a.count;++c)if(0<a.offset){if(a.offset-=this.F.Ga()?1:this.B[c].length,0>a.offset)for(var d=this.B[c].length+a.offset;d<this.B[c].length&&0<a.count;++d)b[a.le++]=this.B[c][d],a.count--}else if(this.F.Ga())b[a.le++]=this.B[c],a.count--;else for(d=0;d<this.B[c].length&&0<a.count;++d)b[a.le++]=this.B[c][d],a.count--;else for(c=0;c<this.g.length&&0<a.count;++c)this.g[c].fill(a,b)};
function ef(a,b){for(var c=b.Ma(),d=a.map(function(a){var d=new ff(a.id(),b);d.b=a.s[0];d.B=a.s[1];d.b.forEach(function(a,e){c.add(a,b.Ga()?1:d.B[e].length)});return d}),e=0;e<d.length-1;++e)hf(d[e],d[e+1]);return 1<d.length?Ye(d[0]):d[0]};function sf(a){if(1==a.f.length)return new tf(a.f[0].jb);a=a.f.map(function(a){return a.jb});return new uf(a)}function tf(a){this.ad=0==a?vf:wf;this.Xd=0==a?function(a){return null!=a?a.reverse():null}:function(a){return a||null};this.ce=0==a?xf:yf}t(tf,uc);function wf(a,b){return a>b?1:a<b?-1:0}function vf(a,b){return wf(b,a)}function yf(a,b){return ed(a,b)}function xf(a,b){return ed(b,a)}m=tf.prototype;
m.rb=function(a,b){var c=this.Xd(b),d=[null===c.c,null===c.u];if(!d[0]){var e=this.ad(a,c.c);d[0]=c.ca?1==e:-1!=e}d[1]||(e=this.ad(a,c.u),d[1]=c.ma?-1==e:1!=e);return d};m.compare=function(a,b){return this.ad(a,b)};m.min=function(a,b){return a<b?1:a==b?0:-1};m.max=function(a,b){return a>b?1:a==b?0:-1};m.Rd=function(a,b){var c=this.rb(a,b);return c[0]&&c[1]};m.ff=function(a){return a.filter(function(a){return null!==a}).sort(function(a,c){return this.ce(a,c)}.bind(this))};m.Sd=function(a){return ea(this.Xd(a).c)};
m.td=function(a){a=this.Xd(a);return[a.c,a.u]};m.toString=function(){return this.ad==vf?"SimpleComparator_DESC":"SimpleComparator_ASC"};function uf(a){this.Ja=a.map(function(a){return new tf(a)})}t(uf,uc);function zf(a,b,c,d){for(var e=0,g=0;g<a.Ja.length&&0==e;++g)e=d(a.Ja[g],b[g],c[g]);return e}m=uf.prototype;m.compare=function(a,b){return zf(this,a,b,function(a,b,e){return a.compare(b,e)})};m.min=function(a,b){return zf(this,a,b,function(a,b,e){return a.min(b,e)})};
m.max=function(a,b){return zf(this,a,b,function(a,b,e){return a.max(b,e)})};m.rb=function(a,b){for(var c=[!0,!0],d=0;d<this.Ja.length&&(c[0]||c[1]);++d){var e=this.Ja[d].rb(a[d],b[d]);c[0]=c[0]&&e[0];c[1]=c[1]&&e[1]}return c};m.Rd=function(a,b){for(var c=!0,d=0;d<this.Ja.length&&c;++d)c=this.Ja[d].Rd(a[d],b[d]);return c};
m.ff=function(a){var b=a.filter(function(a){return a.every(fa)});a=Array(this.Ja.length);for(var c=0;c<a.length;c++)a[c]=b.map(function(a){return a[c]});a.forEach(function(a,b){a.sort(function(a,c){return this.Ja[b].ce(a,c)}.bind(this))},this);b=Array(b.length);for(c=0;c<b.length;c++)b[c]=a.map(function(a){return a[c]});return b.sort(function(a,b){for(var c=0,h=0;h<this.Ja.length&&0==c;++h)c=this.Ja[h].ce(a[h],b[h]);return c}.bind(this))};m.Sd=function(a){return this.Ja[0].Sd(a[0])};
m.td=function(a){var b=a.map(function(a,b){return this.Ja[b].td(a)[0]},this);a=a.map(function(a,b){return this.Ja[b].td(a)[1]},this);return[b,a]};function Af(a){this.ea=a;this.ib=C();this.Pc=new Ue;this.nb=new Ue}m=Af.prototype;m.getName=function(){return this.ea.getName()};m.add=function(a,b){null===a?(this.ib.add(b),this.Pc.add(a,1)):this.ea.add(a,b)};m.set=function(a,b){null===a?(this.ib.clear(),this.Pc.clear(),this.add(a,b)):this.ea.set(a,b)};m.remove=function(a,b){null===a?b?(this.ib.delete(b),this.Pc.remove(a,1)):(this.ib.clear(),this.Pc.clear()):this.ea.remove(a,b)};m.get=function(a){return null===a?jc(this.ib):this.ea.get(a)};
m.bd=function(a){return this.ea.bd(a)};m.Ma=function(){Ve(this.nb,[this.ea.Ma(),this.Pc]);return this.nb};m.Za=function(a,b,c,d){b=this.ea.Za(a,b,c,d);return null!=a?b:b.concat(jc(this.ib))};m.clear=function(){this.ib.clear();this.ea.clear()};m.Ka=function(a){return null===a?0!=this.ib.size:this.ea.Ka(a)};m.min=function(){return this.ea.min()};m.max=function(){return this.ea.max()};m.Ia=function(){return[new y(-2,jc(this.ib))].concat(this.ea.Ia())};m.pc=function(){return this.ea.pc()};
function Bf(a,b){for(var c=-1,d=0;d<b.length;++d)if(-2==b[d].id()){c=d;break}if(-1==c)throw new D(102);var d=b[c].s,e=b.slice(0);e.splice(c,1);var c=a(e),g=new Af(c);d.forEach(function(a){g.ib.add(a)});return g}m.Ga=function(){return this.ea.Ga()};function Cf(a){this.A=a;this.mb=C();this.U=new tf(1)}m=Cf.prototype;m.getName=f("A");m.add=function(a){if("number"!=typeof a)throw new D(103);this.mb.add(a)};m.set=function(a,b){this.add(a,b)};m.remove=function(a){this.mb.delete(a)};m.get=function(a){return this.Ka(a)?[a]:[]};m.min=function(){return this.Gc(this.U.min.bind(this.U))};m.max=function(){return this.Gc(this.U.max.bind(this.U))};
m.Gc=function(a){if(0==this.mb.size)return null;var b=jc(this.mb).reduce(function(b,d){return null===b||1==a(d,b)?d:b},null);return[b,[b]]};m.bd=function(){return this.mb.size};m.Za=function(a,b,c,d){var e=a||[bd()];a=jc(this.mb).filter(function(a){return e.some(function(b){return this.U.Rd(a,b)},this)},this);return Te(a,b,c,d)};m.clear=function(){this.mb.clear()};m.Ka=function(a){return this.mb.has(a)};m.Ia=function(){return[new y(0,jc(this.mb))]};m.pc=f("U");
function Df(a,b){var c=new Cf(a);b[0].s.forEach(function(a){c.add(a,a)});return c}m.Ga=l(!0);m.Ma=function(){var a=new Ue;a.na=this.mb.size;return a};function Ef(a){this.h=a;this.Pa=a.i(Rb);this.D=a.i(Tb);this.ba=a.i(Sb)}Ef.prototype.Ea=function(a){var b=a.ra(),c=function(){if(0==b.length)return w();var a=b.shift();return(a.Fb()?Ff(this,a):Gf(this,a)).then(c)}.bind(this);return c()};function Gf(a,b){var c=new Uc(a.h,C([b]));return a.Pa.Bb(0,c).H(b.getName(),b.Lb.bind(b)).get([]).then(function(a){this.ba.wd(b.getName(),a);Hf(this,b,a)}.bind(a))}
function Hf(a,b,c){var d=a.D.ic.get(b.getName())||[];c.forEach(function(a){d.forEach(function(b){var c=a.Db(b.getName());b.add(c,a.id())})})}function Ff(a,b){var c=new Uc(a.h,C([b])),d=a.Pa.Bb(0,c),c=d.H(b.getName(),b.Lb).get([]).then(function(a){this.ba.wd(b.getName(),a)}.bind(a)),e=b.Da().map(function(a){return If(this,a,d)},a).concat(Jf(a,b,d));return cb(e.concat(c))}
function If(a,b,c){c=c.H(b.m(),pb,1);var d=sf(b);return c.get([]).then(function(a){if(1<a.length){if(Kf(b)){var c=df.bind(void 0,d,b.m(),b.Ec);a=Bf(c,a.slice(1))}else a=df(d,b.m(),b.Ec,a.slice(1));this.D.set(b.Qc,a)}}.bind(a))}function Jf(a,b,c){return c.H(ze(b),pb,1).get([]).then(function(a){1<a.length&&(a=Df(ze(b),a.slice(1)),this.D.set(b.getName(),a))}.bind(a))};function Lf(){this.$=A();this.ic=A()}Lf.prototype.Ea=function(a){a.ra().forEach(function(a){var c=[];this.ic.set(a.getName(),c);var d=ze(a);if(null===this.get(d)){var e=new Cf(d);c.push(e);this.$.set(d,e)}a.Da().forEach(function(a){var b;b=sf(a);b=new We(a.m(),b,a.Ec);b=Kf(a)?new Af(b):b;c.push(b);this.$.set(a.m(),b)},this)},this);return w()};Lf.prototype.get=function(a){return this.$.get(a)||null};
Lf.prototype.set=function(a,b){var c=this.ic.get(a)||null;null===c&&(c=[],this.ic.set(a,c));for(var d=null,e=0;e<c.length;e++)if(c[e].getName()==b.getName()){d=e;break}null!==d&&0<c.length?c.splice(d,1,b):c.push(b);this.$.set(b.getName(),b)};function Mf(a){this.hc=[];q(a)&&this.add(a)}Mf.prototype.toString=function(){return this.hc.map(function(a){return a.toString()}).join(",")};Mf.prototype.Ka=function(a){return this.hc.some(function(b){return b.contains(a)})};Mf.prototype.va=f("hc");
Mf.prototype.add=function(a){if(0!=a.length)if(a=this.hc.concat(a),1==a.length)this.hc=a;else{a.sort(ed);for(var b=[],c=a[0],d=1;d<a.length;++d)if($c(c,a[d])){var e=a[d],g=bd();if(null!==c.c&&null!==e.c){var h=ad(c.c,e.c,!0);1!=h?(g.c=c.c,g.ca=0!=h?c.ca:c.ca&&e.ca):(g.c=e.c,g.ca=e.ca)}null!==c.u&&null!==e.u&&(h=ad(c.u,e.u,!1),-1!=h?(g.u=c.u,g.ma=0!=h?c.ma:c.ma&&e.ma):(g.u=e.u,g.ma=e.ma));c=g}else b.push(c),c=a[d];b.push(c);this.hc=b}};
function Nf(a,b){var c=[];a.va().map(function(a){return b.va().map(function(b){var c;if($c(a,b)){c=bd();var h=ad(a.c,b.c,!0),h=0==h?a.ca?a:b:-1!=h?a:b;c.c=h.c;c.ca=h.ca;null===a.u||null===b.u?b=null===a.u?b:a:(h=ad(a.u,b.u,!1),b=0==h?a.ma?a:b:-1==h?a:b);c.u=b.u;c.ma=b.ma}else c=null;return c})}).forEach(function(a){c=c.concat(a)});return new Mf(c.filter(function(a){return null!==a}))};function Qf(a,b){var c=[],d=null,e=null;Fd(a,function(a){var h=b(a);null==a.getParent()?e=h:L(d,h);var k=a.getParent();null!==k&&K(k).length==K(d).length&&(k=c.indexOf(d),-1!=k&&c.splice(k,1));1<K(a).length&&c.push(h);d=null===a.g?c[c.length-1]:h});return e}function Rf(a){return Sf(a,function(a){return null===a.g})}
function Tf(a){var b=a.getParent(),c=0;null!==b&&(c=K(b).indexOf(a),b.removeChild(a));var d=K(a).slice();d.forEach(function(d,g){a.removeChild(d);null===b||Cd(b,d,c+g)});return{parent:b,children:d}}function Uf(a,b){K(a).slice().forEach(function(c){a.removeChild(c);L(b,c)});L(a,b)}function Vf(a){var b=Bd(a,0);Tf(a);Uf(b,a);return b}
function Wf(a,b,c){var d=Bd(a,0),e=K(d).slice();if(!e.some(function(a){return b(a)}))return a;Tf(a);e.forEach(function(e,h){if(b(e)){var k=c(a);Dd(d,h);L(k,e);Cd(d,k,h)}});return d}function Xf(a,b,c,d){var e=a.getParent();null!==e&&(a=K(e).indexOf(a),Dd(e,a),Cd(e,c,a));K(b).slice().forEach(function(a){b.removeChild(a);L(d,a)});return c}function Sf(a,b,c){function d(a){b(a)&&e.push(a);null!=c&&c(a)||K(a).forEach(d)}var e=[];d(a);return e}
function Yf(a,b){var c=b||function(a){return a.toString()+"\n"},d="";Fd(a,function(a){for(var b=0;b<Ad(a);b++)d+="-";d+=c(a)});return d};function Zf(a){Gd.call(this);this.Rb=a;this.$a=!1}t(Zf,Gd);m=Zf.prototype;m.Jb=function(){return Qf(this,function(a){if(a instanceof Zf){var b=new Zf(a.Rb);b.$a=a.$a;a=a.V();b.oa=a;return b}return a.Jb()})};m.fb=function(a){var b=a||[];Fd(this,function(a){a!=this&&a.fb(b)}.bind(this));a=C(b);return jc(a)};m.vd=function(a){this.$a!=a&&(this.$a=a,this.Rb="and"==this.Rb?"or":"and",K(this).forEach(function(b){return b.vd(a)}))};
m.eval=function(a){var b=K(this).map(function(b){return b.eval(a)});return $f(this,b)};function $f(a,b){return"and"==a.Rb?kd(b):ld(b)}m.toString=function(){return"combined_pred_"+this.Rb.toString()};function ag(){this.o=A();this.size=0}m=ag.prototype;m.has=function(a){return this.o.has(a)};m.set=function(a,b){var c=this.o.get(a)||null;null===c&&(c=C(),this.o.set(a,c));c.has(b)||(c.add(b),this.size++);return this};m.wd=function(a,b){var c=this.o.get(a)||null;null===c&&(c=C(),this.o.set(a,c));b.forEach(function(a){c.has(a)||(c.add(a),this.size++)},this);return this};
m.delete=function(a,b){var c=this.o.get(a,null);if(null===c)return!1;var d=c.delete(b);d&&(--this.size,0==c.size&&this.o.delete(a));return d};m.get=function(a){a=this.o.get(a)||null;return null===a?null:jc(a)};m.clear=function(){this.o.clear();this.size=0};m.keys=function(){return Ib(this.o)};m.values=function(){var a=[];this.o.forEach(function(b){a.push.apply(a,jc(b))});return a};function bg(a,b,c){Gd.call(this);this.fa=a;this.ka=b;this.G=c;this.Yd=null;a=sd.zc();this.tc=yd(a,this.fa.I(),this.G);this.Uf=a.Le.get(this.fa.I())||null}t(bg,Gd);m=bg.prototype;m.Jb=function(){var a=new bg(this.fa,this.ka,this.G),b=this.V();a.oa=b;return a};m.fb=function(a){return null!=a?(a.push(this.fa),a.push(this.ka),a):[this.fa,this.ka]};
m.reverse=function(){var a=this.G;switch(this.G){case "gt":a="lt";break;case "lt":a="gt";break;case "gte":a="lte";break;case "lte":a="gte"}return new bg(this.ka,this.fa,a)};m.eval=function(a){var b=a.entries.filter(function(a){var b=H(a,this.fa);a=H(a,this.ka);return this.tc(b,a)},this);return new F(b,G(a))};m.toString=function(){return"join_pred("+this.fa.m()+" "+this.G+" "+this.ka.m()+")"};
function cg(a,b,c){var d=null,e=null;-1!=G(b).indexOf(I(a.fa.H()))?(d=b,e=c):(d=c,e=b);if(d.entries.length>e.entries.length){a:{b=a.fa;a.fa=a.ka;a.ka=b;b=a.G;switch(a.G){case "gt":b="lt";break;case "lt":b="gt";break;case "gte":b="lte";break;case "lte":b="gte";break;default:break a}a.G=b;a.tc=yd(sd.zc(),a.fa.I(),a.G)}return[e,d]}return[d,e]}function dg(a){var b={};a.fb().forEach(function(a){b[a.getName()]=null});return b}
function eg(a,b,c){null===a.Yd&&(a.Yd=dg(a.ka.H()));var d=new nd(new y(-1,a.Yd),!1);return qd(b,c,d,[I(a.ka.H())])}
function fg(a,b,c,d){var e=[b,c];d||(e=cg(a,b,c));b=e[0];c=e[1];var e=b,g=c,h=a.fa,k=a.ka;d&&(e=c,g=b,h=a.ka,k=a.fa);var p=new ag,E=[];e.entries.forEach(function(a){var b=String(H(a,h));p.set(b,a)});var ga=G(e),ma=G(g);g.entries.forEach(function(a){var b=H(a,k),c=String(b);null!==b&&p.has(c)?p.get(c).forEach(function(b){b=qd(a,ma,b,ga);E.push(b)}):d&&E.push(eg(this,a,ma))}.bind(a));a=G(b).concat(G(c));return new F(E,a)}
function gg(a,b,c,d,e){function g(a,b){var c=new nd(b,1<ga.length),c=qd(a,ma,c,ga);E.push(c)}var h=d.Nf.H(),k=b,p=c;-1!=G(b).indexOf(I(h))&&(k=c,p=b);var E=[],ga=G(p),ma=G(k);k.entries.forEach(function(a){var b=this.Uf(H(a,d.$f)),b=d.index.get(b);0!=b.length&&(d.index.Ga()?g(a,e.get(b[0])):Pe(e,b).forEach(g.bind(null,a)))},a);a=G(k).concat(G(p));return new F(E,a)};function hg(a,b,c){return null===b?new Id(a,b,c):q(b.m)?new bg(a,b,c):new Id(a,b,c)};var ig={};r("lf.schema.DataStoreType",ig);ig.INDEXED_DB=0;ig.MEMORY=1;ig.LOCAL_STORAGE=2;ig.FIREBASE=3;ig.WEB_SQL=4;ig.OBSERVABLE_STORE=5;function jg(a,b,c,d){this.Qc=a;this.name=b;this.Ec=c;this.f=d}jg.prototype.m=function(){return this.Qc+"."+this.name};function Kf(a){return a.f.some(function(a){return a.ga.Dc()})}function Q(a,b,c,d){this.A=a;this.ia=c;this.K=b;this.qd=d;this.cb=null}r("lf.schema.Table",Q);Q.prototype.getName=f("A");Q.prototype.getName=Q.prototype.getName;Q.prototype.Ya=f("cb");
function I(a){return a.cb||a.A}Q.prototype.nc=function(a){var b=new this.constructor(this.A);b.cb=a;b.kg=this.kg;return b};Q.prototype.as=Q.prototype.nc;Q.prototype.createRow=Q.prototype.sb;Q.prototype.deserializeRow=Q.prototype.Lb;Q.prototype.Da=f("ia");Q.prototype.getIndices=Q.prototype.Da;Q.prototype.fb=f("K");Q.prototype.getColumns=Q.prototype.fb;Q.prototype.getConstraint=Q.prototype.Cb;Q.prototype.Fb=f("qd");Q.prototype.persistentIndex=Q.prototype.Fb;function ze(a){return a.A+".#"};function R(a,b){this.child=a;this.Ib=b;this.cb=null}m=R.prototype;m.getName=function(){return this.Ib+"("+this.child.getName()+")"};m.m=function(){return this.Ib+"("+this.child.m()+")"};m.H=function(){return this.child.H()};m.toString=function(){return this.m()};m.I=function(){return this.child.I()};m.Ya=f("cb");m.Da=function(){return[]};m.ua=l(null);m.Dc=l(!1);m.nc=function(a){this.cb=a;return this};R.prototype.as=R.prototype.nc;
function kg(a){for(var b=[a];a instanceof R;)b.push(a.child),a=a.child;return b}function lg(a){this.cb=a||null;this.S=new Q("#UnknownTable",[],[],!1)}m=lg.prototype;m.getName=l("*");m.m=function(){return this.getName()};m.toString=function(){return this.m()};m.H=f("S");m.I=l(4);m.Ya=f("cb");m.Da=function(){return[]};m.ua=l(null);m.Dc=l(!1);r("lf.fn.avg",function(a){return new R(a,"AVG")});function mg(a){return new R(a||new lg,"COUNT")}r("lf.fn.count",mg);function ng(a){return new R(a,"DISTINCT")}r("lf.fn.distinct",ng);r("lf.fn.max",function(a){return new R(a,"MAX")});r("lf.fn.min",function(a){return new R(a,"MIN")});r("lf.fn.stddev",function(a){return new R(a,"STDDEV")});r("lf.fn.sum",function(a){return new R(a,"SUM")});r("lf.fn.geomean",function(a){return new R(a,"GEOMEAN")});function S(a,b){J.call(this);this.Ff=b}t(S,J);S.prototype.exec=function(a,b){switch(this.Ff){case 1:return og(this,a,b);case 0:return pg(this,a,b);default:return qg(this,a,b)}};S.prototype.toString=l("dummy_node");S.prototype.Rc=function(){return this.toString()};function qg(a,b,c){return new v(function(a){a(this.da(b,[],c))}.bind(a))}function og(a,b,c){return Bd(a,0).exec(b,c).then(function(a){return this.da(b,a,c)}.bind(a))}
function pg(a,b,c){var d=K(a).map(function(a){return a.exec(b,c)});return cb(d).then(function(a){var d=[];a.forEach(function(a){for(var b=0;b<a.length;++b)d.push(a[b])});return this.da(b,d,c)}.bind(a))};function rg(a){S.call(this,0,1);this.se=a}t(rg,S);rg.prototype.toString=function(){return"aggregation("+this.se.map(function(a){return a.m()}).toString()+")"};rg.prototype.da=function(a,b){b.forEach(function(a){sg(new tg(a,this.se))},this);return b};function tg(a,b){this.Ha=a;this.K=b}
function sg(a){a.K.forEach(function(a){a=kg(a).reverse();for(var c=1;c<a.length;c++){var d=a[c],e=kg(d).slice(-1)[0],g=d.child instanceof R?hd(this.Ha,d.child):this.Ha;if(null!==g.Xa&&g.Xa.has(d.m()))break;g=ug(d.Ib,g,e);e=this.Ha;null===e.Xa&&(e.Xa=A());e.Xa.set(d.m(),g)}},a)}
function ug(a,b,c){var d=null;switch(a){case "MIN":d=vg(b,c,function(a,b){return b<a?b:a});break;case "MAX":d=vg(b,c,function(a,b){return b>a?b:a});break;case "DISTINCT":d=wg(b,c);break;case "COUNT":d=xg(b,c);break;case "SUM":d=yg(b,c);break;case "AVG":a=xg(b,c);0<a&&(d=yg(b,c)/a);break;case "GEOMEAN":d=zg(b,c);break;default:d=Ag(b,c)}return d}function vg(a,b,c){return a.entries.reduce(function(a,e){var g=H(e,b);return null===g?a:null===a?g:c(a,g)},null)}
function xg(a,b){return b instanceof lg?a.entries.length:a.entries.reduce(function(a,d){return a+(ea(H(d,b))?0:1)},0)}function yg(a,b){return vg(a,b,function(a,b){return b+a})}function Ag(a,b){var c=[];a.entries.forEach(function(a){a=H(a,b);null===a||c.push(a)});return 0==c.length?null:yb.apply(null,c)}function zg(a,b){var c=0,d=a.entries.reduce(function(a,d){var h=H(d,b);if(0==h||null===h)return a;c++;return a+Math.log(h)},0);return 0==c?null:Math.pow(Math.E,d/c)}
function wg(a,b){var c=A();a.entries.forEach(function(a){var e=H(a,b);c.set(e,a)});return new F(B(c),G(a))};function Bg(a,b){this.za=a;this.Z=b}Bg.prototype.gb=f("za");Bg.prototype.Y=f("Z");function Cg(){J.call(this)}t(Cg,J);function Dg(a,b){J.call(this);this.table=a;this.values=b}t(Dg,Cg);function Eg(a,b){Dg.call(this,a,b)}t(Eg,Dg);function Fg(a){J.call(this);this.table=a}t(Fg,Cg);Fg.prototype.toString=function(){return"delete("+this.table.getName()+")"};function Gg(a,b){J.call(this);this.table=a;this.ne=b}t(Gg,Cg);
Gg.prototype.toString=function(){var a=[];this.ne&&(a=this.ne.map(function(a){return a.O.getName()},this));return"update("+this.table.getName()+", ["+a.join(",")+"])"};function Hg(a){J.call(this);this.J=a}t(Hg,Cg);Hg.prototype.toString=function(){return"select("+this.J.toString()+")"};function Ig(a){J.call(this);this.table=a}t(Ig,Cg);Ig.prototype.toString=function(){var a="table_access("+this.table.getName();null===this.table.Ya()||(a+=" as "+this.table.Ya());return a+")"};
function Jg(){J.call(this)}t(Jg,Cg);Jg.prototype.toString=l("cross_product");function Kg(a,b){J.call(this);this.f=a;this.Nb=b}t(Kg,Cg);Kg.prototype.toString=function(){var a="project("+this.f.toString();if(null!==this.Nb)var b=this.Nb.map(function(a){return a.m()}).join(", "),a=a+(", groupBy("+b+")");return a+")"};function Lg(a){J.call(this);this.M=a}t(Lg,Cg);Lg.prototype.toString=function(){return"order_by("+Rd(this.M)+")"};function Mg(a){J.call(this);this.f=a}t(Mg,Cg);
Mg.prototype.toString=function(){return"aggregation("+this.f.toString()+")"};function Ng(a){J.call(this);this.f=a}t(Ng,Cg);Ng.prototype.toString=function(){return"group_by("+this.f.toString()+")"};function Og(a){J.call(this);this.W=a}t(Og,Cg);Og.prototype.toString=function(){return"limit("+this.W+")"};function Pg(a){J.call(this);this.N=a}t(Pg,Cg);Pg.prototype.toString=function(){return"skip("+this.N+")"};function Qg(a,b){J.call(this);this.J=a;this.Pb=b}t(Qg,Cg);
Qg.prototype.toString=function(){return"join(type: "+(this.Pb?"outer":"inner")+", "+this.J.toString()+")"};function Rg(){};function Sg(){}t(Sg,Rg);Sg.prototype.lb=function(a){this.X=a;this.Wa(this.X);return this.X};Sg.prototype.Wa=function(a){if(a instanceof Hg){var b=Tg(this,a.J),b=Ug(this,b);Xf(a,a,b[0],b[1]);a==this.X&&(this.X=b[0]);a=b[0]}K(a).forEach(function(a){this.Wa(a)},this)};function Tg(a,b){if(0==K(b).length||"and"!=b.Rb)return[b];var c=K(b).slice().map(function(a){b.removeChild(a);return Tg(this,a)},a);return Ca(c)}
function Ug(a,b){var c=null,d=null;b.map(function(a,b){var h=new Hg(a);0==b?c=h:L(d,h);d=h},a);return[c,d]};function Vg(){}t(Vg,Rg);Vg.prototype.lb=function(a,b){if(3>b.c.length)return a;this.X=a;this.Wa(this.X);return this.X};Vg.prototype.Wa=function(a){if(a instanceof Jg)for(;2<K(a).length;){for(var b=new Jg,c=0;2>c;c++){var d=Dd(a,0);L(b,d)}Cd(a,b,0)}K(a).forEach(function(a){this.Wa(a)},this)};function Wg(){S.call(this,0,0)}t(Wg,S);Wg.prototype.toString=l("cross_product");Wg.prototype.da=function(a,b){for(var c=b[0],d=b[1],e=[],g=G(c),h=G(d),k=0;k<c.entries.length;k++)for(var p=0;p<d.entries.length;p++){var E=qd(c.entries[k],g,d.entries[p],h);e.push(E)}c=G(c).concat(G(d));return[new F(e,c)]};function Xg(a,b){Ud.call(this,a,b);this.Aa=a.i(Vb);this.Eb=a.i(Xb)}t(Xg,Ud);Xg.prototype.getPriority=l(2);Xg.prototype.ae=function(a){0==this.I()?Yg(this,a):this.Oc()};function Yg(a,b){a.sd.forEach(function(a,d){a instanceof Qd&&Xd(this.Eb,a,b[d])},a)}Xg.prototype.Oc=function(){var a=Zd(this.Eb,this.Y());0!=a.length&&(a=new Wd(this.global,a),$d(this.Aa,a))};function Zg(a){Ld.call(this,a)}t(Zg,Ld);Zg.prototype.Y=function(){var a=C();a.add(this.c);var b=this.ga.info();$g(this.c.getName(),b.g).forEach(a.add.bind(a));return a};Zg.prototype.clone=function(){var a=new Zg(this.ga);Od(a,this);a.c=this.c;return a};Zg.prototype.bind=function(a){Zg.Hb.bind.call(this,a);Pd(this,a);return this};function ah(a){Ld.call(this,a)}t(ah,Ld);ah.prototype.Y=function(){var a=C();a.add(this.Fa);var b=this.ga.info();$g(this.Fa.getName(),b.Te).forEach(a.add.bind(a));this.Zb&&$g(this.Fa.getName(),b.g).forEach(a.add.bind(a));return a};ah.prototype.clone=function(){var a=new ah(this.ga);Od(a,this);a.Fa=this.Fa;this.values&&(a.values=this.values instanceof rd?this.values:this.values.slice());a.Zb=this.Zb;a.$b=this.$b;return a};
ah.prototype.bind=function(a){ah.Hb.bind.call(this,a);this.$b&&(this.values=this.$b instanceof rd?a[this.$b.ua()]:this.$b.map(function(b){return b instanceof rd?a[b.ua()]:b}));return this};function bh(a){Ld.call(this,a)}t(bh,Ld);bh.prototype.Y=function(){var a=C();a.add(this.table);var b=this.set.map(function(a){return a.O.m()}),c=this.ga.info();ch(c,b).forEach(a.add.bind(a));dh(c,b).forEach(a.add.bind(a));return a};bh.prototype.clone=function(){var a=new bh(this.ga);Od(a,this);a.table=this.table;a.set=this.set?this.set.slice():this.set;return a};bh.prototype.bind=function(a){bh.Hb.bind.call(this,a);this.set.forEach(function(b){-1!=b.Wc&&(b.value=a[b.Wc])});Pd(this,a);return this};function eh(a,b){if(null==b)return"NULL";switch(a){case 1:return b?1:0;case 3:case 4:return b;case 0:return"'"+rb(b)+"'";default:return"'"+b.toString()+"'"}}function fh(a,b){var c=a.Zb?"INSERT OR REPLACE":"INSERT",d=a.Fa.fb(),c=c+(" INTO "+a.Fa.getName()+"("),c=c+d.map(function(a){return a.getName()}).join(", "),c=c+") VALUES (";return a.values.map(function(a){var g=d.map(function(c){var d=a.s[c.getName()];return b?null!=d?"#":"NULL":eh(c.I(),d)});return c+g.join(", ")+");"}).join("\n")}
function gh(a){switch(a){case "between":return"BETWEEN";case "eq":return"=";case "gte":return">=";case "gt":return">";case "in":return"IN";case "lte":return"<=";case "lt":return"<";case "match":return"LIKE";case "neq":return"<>";default:return"UNKNOWN"}}function hh(a,b,c,d){return a instanceof rd?"?"+a.ua().toString():d?null!=a?"#":"NULL":"match"==b?"'"+a.toString()+"'":"in"==b?"("+a.map(function(a){return eh(c,a)}).join(", ")+")":"between"==b?eh(c,a[0])+" AND "+eh(c,a[1]):eh(c,a).toString()}
function ih(a,b){return K(a).map(function(a){return"("+jh(a,b)+")"}).join("and"==a.Rb?" AND ":" OR ")}function kh(a){return[a.fa.m(),gh(a.G),a.ka.m()].join(" ")}function jh(a,b){if(a instanceof Id){var c=a.O.m(),d=gh(a.G),e=hh(a.value,a.G,a.O.I(),b);return"="==d&&"NULL"==e?[c,"IS NULL"].join(" "):"<>"==d&&"NULL"==e?[c,"IS NOT NULL"].join(" "):[c,d,e].join(" ")}if(a instanceof Zf)return ih(a,b);if(a instanceof bg)return kh(a);throw new D(357,typeof a);}
function lh(a,b){var c=jh(a,b);return c?" WHERE "+c:""}function mh(a,b){var c="UPDATE "+a.table.getName()+" SET ",c=c+a.set.map(function(a){var b=a.O.m()+" = ";return-1!=a.Wc?b+"?"+a.Wc.toString():b+eh(a.O.I(),a.value).toString()}).join(", ");a.w&&(c+=lh(a.w,b));return c+";"}
function nh(a,b){var c="*";a.f.length&&(c=a.f.map(function(a){return a.Ya()?a.m()+" AS "+a.Ya():a.m()}).join(", "));c="SELECT "+c+" FROM ";null!=a.xb&&0!=a.xb.size?c+=oh(a,b):(c+=a.c.map(ph).join(", "),a.w&&(c+=lh(a.w,b)));if(a.M)var d=a.M.map(function(a){return a.O.m()+(0==a.jb?" DESC":" ASC")}).join(", "),c=c+(" ORDER BY "+d);a.ha&&(d=a.ha.map(function(a){return a.m()}).join(", "),c+=" GROUP BY "+d);a.W&&(c+=" LIMIT "+a.W.toString());a.N&&(c+=" SKIP "+a.N.toString());return c+";"}
function ph(a){return I(a)!=a.getName()?a.getName()+" AS "+I(a):a.getName()}function oh(a,b){for(var c=Sf(a.w,function(a){return a instanceof bg}),d=c.map(kh),e=ph(a.c[0]),g=1;g<a.c.length;g++)var h=ph(a.c[g]),e=a.xb.has(c[d.length-g].V())?e+(" LEFT OUTER JOIN "+h):e+(" INNER JOIN "+h),e=e+(" ON ("+d[d.length-g]+")");c=Bd(a.w,0);c instanceof bg||(e+=" WHERE "+jh(c,b));return e}
function qh(a,b){var c=b||!1,d=a.a.clone();if(d instanceof ah)return fh(d,c);if(d instanceof Zg){var e="DELETE FROM "+d.c.getName();d.w&&(e+=lh(d.w,c));return e+";"}if(d instanceof bh)return mh(d,c);if(d instanceof Qd)return nh(d,c);throw new D(358,typeof d);};function T(a,b){this.global=a;this.jg=a.i(Ub);this.Aa=a.i(Vb);this.a=b}r("lf.query.BaseBuilder",T);T.prototype.exec=function(){try{this.eb()}catch(a){return $a(a)}return new v(function(a,c){var d=new Xg(this.global,[this.Bc()]);$d(this.Aa,d).then(function(c){a(fd(c[0]))},c)},this)};T.prototype.exec=T.prototype.exec;T.prototype.Hf=function(){var a=function(a){return a.Rc(this.a)+"\n"}.bind(this);return Yf(rh(this).gb(),a)};T.prototype.explain=T.prototype.Hf;
T.prototype.bind=function(a){this.a.bind(a);return this};T.prototype.bind=T.prototype.bind;T.prototype.qg=function(a){return qh(this,a)};T.prototype.toSql=T.prototype.qg;T.prototype.eb=aa();function rh(a){if(null==a.Ue){var b;b=a.jg;var c=a.a,d=b.Xf.create(c);b=b.gg.create(d,c);a.Ue=b}return a.Ue}T.prototype.Bc=function(){return{context:this.a.clone(),de:rh(this)}};function sh(a){T.call(this,a,new Zg(a.i(Yb)))}t(sh,T);r("lf.query.DeleteBuilder",sh);sh.prototype.c=function(a){if(null!=this.a.c)throw new D(515);this.a.c=a;return this};sh.prototype.from=sh.prototype.c;sh.prototype.w=function(a){this.Dd();this.a.w=a;return this};sh.prototype.where=sh.prototype.w;sh.prototype.Dd=function(){if(null==this.a.c)throw new D(548);if(null!=this.a.w)throw new D(516);};sh.prototype.eb=function(){sh.Hb.eb.call(this);if(null==this.a.c)throw new D(517);};function th(a,b){T.call(this,a,new ah(a.i(Yb)));this.a.Zb=b||!1}t(th,T);r("lf.query.InsertBuilder",th);th.prototype.eb=function(){th.Hb.eb.call(this);var a=this.a;if(null==a.Fa||null==a.values)throw new D(518);if(a.Zb&&null===a.Fa.Cb().fd())throw new D(519);};th.prototype.Fa=function(a){if(null!=this.a.Fa)throw new D(520);this.a.Fa=a;return this};th.prototype.into=th.prototype.Fa;
th.prototype.values=function(a){if(null!=this.a.values)throw new D(521);a instanceof rd||a.some(function(a){return a instanceof rd})?this.a.$b=a:this.a.values=a;return this};th.prototype.values=th.prototype.values;function uh(a){return vh("and",Array.prototype.slice.call(arguments))}r("lf.op.and",uh);r("lf.op.or",function(a){return vh("or",Array.prototype.slice.call(arguments))});function vh(a,b){var c=new Zf(a);b.forEach(function(a){L(c,a)});return c}r("lf.op.not",function(a){a.vd(!0);return a});function U(a,b){T.call(this,a,new Qd(a.i(Yb)));this.Be=this.yd=!1;this.a.f=b;wh(this);xh(this)}t(U,T);r("lf.query.SelectBuilder",U);U.prototype.eb=function(){U.Hb.eb.call(this);var a=this.a;if(null==a.c)throw new D(522);if(q(a.Qb)&&!q(a.W)||q(a.Xb)&&!q(a.N))throw new D(523);null!=this.a.ha?yh(this):zh(this)};function wh(a){var b=a.a.f.filter(function(a){return a instanceof R&&"DISTINCT"==a.Ib},a);if(0!=b.length&&(1!=b.length||1!=a.a.f.length))throw new D(524);}
function yh(a){var b=a.a.f.filter(function(a){return!(a instanceof R)}).map(function(a){return a.m()}),c=!1;if(0==a.a.ha.length||0==a.a.f.length)c=!0;else{var d=a.a.ha.map(function(a){return a.m()});(c=b.some(function(a){return-1==d.indexOf(a)}))||(c=a.a.ha.some(function(a){a=a.I();return 6==a||0==a}))}if(c)throw new D(525);}function zh(a){var b=a.a.f.some(function(a){return a instanceof R},a);a=a.a.f.some(function(a){return!(a instanceof R)},a)||0==a.a.f.length;if(b&&a)throw new D(526);}
function xh(a){a.a.f.forEach(function(a){if(a instanceof R&&!Ah(a.Ib,a.I()))throw new D(527,a.m());},a)}function Bh(a,b){if(null==a.a.c)throw new D(b);}U.prototype.c=function(a){if(this.Be)throw new D(515);this.Be=!0;null==this.a.c&&(this.a.c=[]);this.a.c.push.apply(this.a.c,Array.prototype.slice.call(arguments));return this};U.prototype.from=U.prototype.c;U.prototype.w=function(a){Bh(this,548);if(this.yd)throw new D(516);this.yd=!0;Ch(this,a);return this};U.prototype.where=U.prototype.w;
function Ch(a,b){if(null!=a.a.w){var c=uh(b,a.a.w);a.a.w=c}else a.a.w=b}U.prototype.Qf=function(a,b){Bh(this,542);if(this.yd)throw new D(547);this.a.c.push(a);Ch(this,b);return this};U.prototype.innerJoin=U.prototype.Qf;U.prototype.Vf=function(a,b){Bh(this,542);if(!(b instanceof bg))throw new D(541);if(this.yd)throw new D(547);this.a.c.push(a);null==this.a.xb&&(this.a.xb=C());var c=b;I(a)!=I(b.ka.H())&&(c=b.reverse());this.a.xb.add(c.V());Ch(this,c);return this};U.prototype.leftOuterJoin=U.prototype.Vf;
U.prototype.W=function(a){if(null!=(this.a.W||this.a.Qb))throw new D(528);if(a instanceof rd)this.a.Qb=a;else{if(0>a)throw new D(531);this.a.W=a}return this};U.prototype.limit=U.prototype.W;U.prototype.N=function(a){if(null!=(this.a.N||this.a.Xb))throw new D(529);if(a instanceof rd)this.a.Xb=a;else{if(0>a)throw new D(531);this.a.N=a}return this};U.prototype.skip=U.prototype.N;U.prototype.M=function(a,b){Bh(this,549);null==this.a.M&&(this.a.M=[]);this.a.M.push({O:a,jb:null!=b?b:1});return this};
U.prototype.orderBy=U.prototype.M;U.prototype.ha=function(a){Bh(this,549);if(null!=this.a.ha)throw new D(530);null==this.a.ha&&(this.a.ha=[]);this.a.ha.push.apply(this.a.ha,Array.prototype.slice.call(arguments));return this};U.prototype.groupBy=U.prototype.ha;function Ah(a,b){switch(a){case "COUNT":case "DISTINCT":return!0;case "AVG":case "GEOMEAN":case "STDDEV":case "SUM":return 4==b||3==b;case "MAX":case "MIN":return 4==b||3==b||5==b||2==b}return!1}
U.prototype.clone=function(){var a=new U(this.global,this.a.f);a.a=this.a.clone();a.a.$c=null;return a};U.prototype.clone=U.prototype.clone;function Dh(a,b){T.call(this,a,new bh(a.i(Yb)));this.a.table=b}t(Dh,T);r("lf.query.UpdateBuilder",Dh);Dh.prototype.set=function(a,b){var c={Wc:b instanceof rd?b.ua():-1,O:a,value:b};null!=this.a.set?this.a.set.push(c):this.a.set=[c];return this};Dh.prototype.set=Dh.prototype.set;Dh.prototype.w=function(a){this.Dd();this.a.w=a;return this};Dh.prototype.where=Dh.prototype.w;Dh.prototype.Dd=function(){if(null!=this.a.w)throw new D(516);};
Dh.prototype.eb=function(){Dh.Hb.eb.call(this);if(null==this.a.set)throw new D(532);if(this.a.set.some(function(a){return a.value instanceof rd}))throw new D(501);};function Eh(a){this.a=a;this.za=null}Eh.prototype.fc=function(){null===this.za&&(this.za=this.dd());return this.za};function Fh(a){Eh.call(this,a)}t(Fh,Eh);Fh.prototype.dd=function(){return this.a.Zb?new Eg(this.a.Fa,this.a.values):new Dg(this.a.Fa,this.a.values)};function Gh(a){Eh.call(this,a)}t(Gh,Eh);Gh.prototype.dd=function(){var a=new Gg(this.a.table,this.a.set),b=null!=this.a.w?new Hg(this.a.w.Jb()):null,c=new Ig(this.a.table);null===b?L(a,c):(L(b,c),L(a,b));return a};function Hh(a,b,c){this.za=a;this.ee=b;this.Ub=c}Hh.prototype.fc=function(){this.Ub.forEach(function(a){this.za=a.lb(this.za,this.ee)},this);return this.za};function Ih(a,b){Eh.call(this,a);this.Ub=b}t(Ih,Eh);Ih.prototype.dd=function(){var a=new Fg(this.a.c),b=null!=this.a.w?new Hg(this.a.w.Jb()):null,c=new Ig(this.a.c);null===b?L(a,c):(L(b,c),L(a,b));return(new Hh(a,this.a,this.Ub)).fc()};function Jh(){}t(Jh,Rg);Jh.prototype.lb=function(a,b){if(2>b.c.length)return a;this.X=a;this.Wa(this.X,b);return this.X};Jh.prototype.Wa=function(a,b){if(a instanceof Hg&&a.J instanceof bg){var c=a.J.V(),d=Bd(a,0);d instanceof Jg&&(c=null!=b.xb&&b.xb.has(c),c=new Qg(a.J,c),Xf(a,d,c,c),a==this.X&&(this.X=c),a=c)}K(a).forEach(function(a){this.Wa(a,b)},this)};function Kh(){this.Vc=C()}t(Kh,Rg);Kh.prototype.lb=function(a,b){this.Vc.clear();if(!q(b.w))return a;this.X=a;this.Wa(this.X);this.Vc.clear();return this.X};Kh.prototype.Wa=function(a){if(Lh(a)){var b=a.J instanceof Id?Mh(this,a):Nh(this,a);this.Vc.add(a);b==a&&(b=Bd(a,0));null!==b&&(ea(b.getParent())&&(this.X=b),Lh(b)&&!this.Vc.has(b)&&this.Wa(b))}else K(a).forEach(function(a){this.Wa(a)},this)};
function Oh(a,b,c){var d=b;if(Bd(b,0)instanceof Hg)d=Vf(b),Oh(a,b,c);else if(Ph(b)){var e=[],d=Wf(b,c,function(a){a=new Hg(a.J);e.push(a);return a});e.forEach(function(a){Oh(this,a,c)},a)}return d}function Mh(a,b){var c=C([I(b.J.O.H())]),d=function(a){return Qh(this,a,c)}.bind(a);return Oh(a,b,d)}function Nh(a,b){var c=C([I(b.J.fa.H()),I(b.J.ka.H())]),d=function(a){return Qh(this,a,c)}.bind(a);return Oh(a,b,d)}
function Qh(a,b,c){var d=C();Rf(b).forEach(function(a){d.add(I(a.table))},a);b instanceof Ig&&d.add(I(b.table));return kc(d,c)}function Lh(a){return a instanceof Hg&&!(a.J instanceof Zf)}function Ph(a){a=Bd(a,0);return a instanceof Jg||a instanceof Qg};function Rh(a,b){Eh.call(this,a);this.Ub=b;this.Ye=this.Pe=this.ef=this.Se=this.te=this.Ee=this.df=this.ye=this.gf=null}t(Rh,Eh);
Rh.prototype.dd=function(){Sh(this);2<=this.a.c.length&&(this.ye=new Jg);this.df=null!=this.a.w?new Hg(this.a.w.Jb()):null;this.a.M&&(this.Se=new Lg(this.a.M));null!=this.a.N&&0<this.a.N&&(this.ef=new Pg(this.a.N));null!=this.a.W&&(this.Pe=new Og(this.a.W));null!=this.a.ha&&(this.Ee=new Ng(this.a.ha));Th(this);this.Ye=new Kg(this.a.f||[],this.a.ha||null);var a=Uh(this);return(new Hh(a,this.a,this.Ub)).fc()};
function Uh(a){for(var b=[a.Pe,a.ef,a.Ye,a.Se,a.te,a.Ee,a.df,a.ye],c=null,d=null,e=0;e<b.length;e++){var g=b[e];null!==g&&(null===d?d=g:L(b[c],g),c=e)}a.gf.forEach(function(a){L(b[c],a)});return d}function Sh(a){a.gf=a.a.c.map(function(a){return new Ig(a)},a)}function Th(a){var b=a.a.f.filter(function(a){return a instanceof R});null!=a.a.M&&a.a.M.forEach(function(a){a.O instanceof R&&b.push(a.O)});0<b.length&&(a.te=new Mg(b))};function Vh(){this.je=[new Sg,new Vg,new Kh,new Jh];this.Jd=[new Sg]}Vh.prototype.create=function(a){var b=null;if(a instanceof ah)b=new Fh(a);else if(a instanceof Zg)b=new Ih(a,this.Jd);else if(a instanceof Qd)b=new Rh(a,this.je);else if(a instanceof bh)b=new Gh(a);else throw new D(513);b=b.fc();return new Bg(b,a.Y())};function Wh(a){S.call(this,0,1);this.S=a}t(Wh,S);Wh.prototype.toString=function(){return"delete("+this.S.getName()+")"};Wh.prototype.da=function(a,b){var c=b[0].entries.map(function(a){return a.sa});a.remove(this.S,c);return[jd()]};function Xh(a,b){S.call(this,0,-1);this.table=b;this.D=a.i(Tb)}t(Xh,S);Xh.prototype.toString=function(){return"get_row_count("+this.table.getName()+")"};Xh.prototype.da=function(){var a=this.D.get(ze(this.table)),b=new F([],[this.table.getName()]),c=mg(),a=a.Ma().na;null===b.Xa&&(b.Xa=A());b.Xa.set(c.m(),a);return[b]};function Yh(a,b){S.call(this,0,-1);this.ba=a.i(Sb);this.D=a.i(Tb);this.table=b}t(Yh,S);Yh.prototype.toString=function(){var a="table_access("+this.table.getName();null===this.table.Ya()||(a+=" as "+this.table.Ya());return a+")"};Yh.prototype.da=function(){var a=this.D.get(ze(this.table)).Za();return[md(Pe(this.ba,a),[I(this.table)])]};function Zh(a){this.h=a}t(Zh,Rg);Zh.prototype.lb=function(a,b){this.X=a;if(!this.Ed(b))return a;var c=Sf(a,function(a){return a instanceof Yh})[0],d=new Xh(this.h,c.table);Xf(c,c,d,d);return this.X};Zh.prototype.Ed=function(a){return 1==a.f.length&&1==a.c.length&&null==a.w&&null==a.W&&null==a.N&&null==a.ha?(a=a.f[0],a instanceof R&&"COUNT"==a.Ib&&a.child instanceof lg):!1};function $h(a){S.call(this,0,1);this.De=a}t($h,S);$h.prototype.toString=function(){return"groupBy("+this.De.map(function(a){return a.m()}).toString()+")"};$h.prototype.da=function(a,b){return ai(this,b[0])};function ai(a,b){var c=new ag,d=function(a){return this.De.map(function(b){return H(a,b)},this).join(",")}.bind(a);b.entries.forEach(function(a){c.set(d(a),a)},a);return c.keys().map(function(a){return new F(c.get(a),G(b))},a)};function bi(a,b,c){S.call(this,0,0);this.D=a.i(Tb);this.ba=a.i(Sb);this.J=b;this.Pb=c;this.Bd="eq"==this.J.G?0:2;this.Fe=null}t(bi,S);var ci=["hash","index_nested_loop","nested_loop"];bi.prototype.toString=function(){return"join(type: "+(this.Pb?"outer":"inner")+", impl: "+ci[this.Bd]+", "+this.J.toString()+")"};
bi.prototype.da=function(a,b){switch(this.Bd){case 0:return[fg(this.J,b[0],b[1],this.Pb)];case 1:return[gg(this.J,b[0],b[1],this.Fe,this.ba)];default:var c=this.J,d=b[0],e=b[1],g=this.Pb,h=[d,e];g||(h=cg(c,d,e));for(var d=h[0],e=h[1],h=[],k=G(d),p=G(e),E=d.entries.length,ga=e.entries.length,ma=ga+256-1>>8,Xa=0;Xa<ma;){for(var Wb=0;Wb<E;Wb++){var Of=!1,Pf=H(d.entries[Wb],c.fa);if(null!==Pf)for(var ei=Math.min(Xa+1<<8,ga),Oc=Xa<<8;Oc<ei;Oc++)if(c.tc(Pf,H(e.entries[Oc],c.ka))){var Of=!0,fj=qd(d.entries[Wb],
k,e.entries[Oc],p);h.push(fj)}g&&!Of&&h.push(eg(c,d.entries[Wb],k))}Xa++}c=G(d).concat(G(e));return[new F(h,c)]}};function di(a,b){a.Bd=1;var c=a.D.get(b.ua().m());a.Fe={Nf:b,$f:b==a.J.fa?a.J.ka:a.J.fa,index:c}};function fi(a){S.call(this,0,-1);this.$e=a}t(fi,S);fi.prototype.toString=function(){return"no_op_step("+G(this.$e[0]).join(",")+")"};fi.prototype.da=f("$e");function gi(){}t(gi,Rg);gi.prototype.lb=function(a,b){this.X=a;if(!this.Ed(b))return a;Sf(a,function(a){return a instanceof bi}).forEach(this.ig,this);return this.X};gi.prototype.Ed=function(a){return 1<a.c.length};
gi.prototype.ig=function(a){if("eq"==a.J.G&&!a.Pb){var b=function(b){if(!(b instanceof Yh))return null;b=I(b.table)==I(a.J.ka.H())?a.J.ka:a.J.fa;return ea(b.ua())?null:b},c=b(Bd(a,0)),b=b(Bd(a,1));if(null!==c||null!==b){b=null===b?c:b;di(a,b);var d=new F([],[I(b.H())]);Ed(a,new fi([d]),b==c?0:1)}}};function hi(a){a=a.map(function(a){return a.va()});a=Db.apply(null,a);var b=[];Cb(a,function(a){b.push(a)});return b}function ii(a){this.Ob=a}ii.prototype.ed=function(){return 1==this.Ob.f.length?[bd()]:[this.Ob.f.map(function(){return bd()})]};function ji(a,b){this.Ob=a;this.ya=b;this.Hd=this.Ne=null}
function ki(a,b){var c=A();a.ya.keys().forEach(function(a){var e=this.ya.get(a).map(function(a){return Md(b,a)},this),g=new Mf([bd()]);e.forEach(function(a){var b=null;"between"==a.G?b=new Yc(a.value[0],a.value[1],!1,!1):"eq"==a.G?(b=a.value,b=new Yc(b,b,!1,!1)):b="gte"==a.G?new Yc(a.value,null,!1,!1):"gt"==a.G?new Yc(a.value,null,!0,!1):"lte"==a.G?new Yc(null,a.value,!1,!1):new Yc(null,a.value,!1,!0);a=a.$a?Zc(b):[b];a=new Mf(a);g=Nf(g,a)});c.set(a,g)},a);return c}
ji.prototype.ed=function(a){if(this.Ne==a)return this.Hd;for(var b=ki(this,a),c=this.Ob.f.length-1;0<=c;c--){var d=this.Ob.f[c];if(null!==(b.get(d.ga.getName())||null))break;b.set(d.ga.getName(),new Mf([bd()]))}this.Hd=1==this.Ob.f.length?B(b)[0].va():hi(li(this,b));this.Ne=a;return this.Hd};function li(a,b){var c=A(),d=0;a.Ob.f.forEach(function(a){c.set(a.ga.getName(),d);d++});return Ib(b).sort(function(a,b){return c.get(a)-c.get(b)}).map(function(a){return b.get(a)})};function mi(a,b){this.hf=b;this.D=a.i(Tb)}function ni(a,b,c){c=c.filter(a.Rf,a);if(0==c.length)return null;a=oi(a,c);if(0==a.length)return null;if(1==a.length)return a[0];var d=Number.MAX_VALUE;return a.reduce(function(a,c){var h=pi(c,b);return h<d?(d=h,c):a},null)}
function oi(a,b){return a.hf.Da().map(function(a){a=new qi(this.D,a);ri(a,b);return a},a).filter(function(a){if(null===a.ya)a=!1;else{for(var b=!1,e=!0,g=0;g<a.vb.f.length;g++){var h=a.ya.has(a.vb.f[g].ga.getName());if(b&&h){e=!1;break}h||(b=!0)}a=e}return a})}mi.prototype.Rf=function(a){var b;if(b=a instanceof Id)Jd(a),b=null!==a.value&&("between"==a.G||"eq"==a.G||"gt"==a.G||"gte"==a.G||"lt"==a.G||"lte"==a.G);return b?a.O.H()==this.hf:!1};
function qi(a,b){this.D=a;this.vb=b;this.Of=C(this.vb.f.map(function(a){return a.ga.getName()}));this.Vd=this.ya=null}function si(a){null===a.Vd&&(a.Vd=new ji(a.vb,a.ya));return a.Vd}function ri(a,b){b.forEach(function(a){var b=a.fb()[0].getName();this.Of.has(b)&&(null===this.ya&&(this.ya=new ag),this.ya.set(b,a.V()))},a)}function pi(a,b){var c=si(a).ed(b),d=a.D.get(a.vb.m());return c.reduce(function(a,b){return a+d.bd(b)},0)};function ti(a,b,c,d){S.call(this,0,-1);this.D=a.i(Tb);this.index=b;this.Me=c;this.he=d;this.Uc=this.Tc=!1}t(ti,S);ti.prototype.toString=function(){return"index_range_scan("+this.index.m()+", ?, "+(this.he?"reverse":"natural")+(this.Tc?", limit:?":"")+(this.Uc?", skip:?":"")+")"};ti.prototype.Rc=function(a){var b=this.toString(),c=this.Me.ed(a),b=b.replace("?",c.toString());this.Tc&&(b=b.replace("?",a.W.toString()));this.Uc&&(b=b.replace("?",a.N.toString()));return b};
ti.prototype.da=function(a,b,c){a=this.Me.ed(c);b=this.D.get(this.index.m());c=(1==a.length&&a[0]instanceof Yc&&dd(a[0])?Te(b.get(a[0].c),!1,this.Tc?c.W:void 0,this.Uc?c.N:void 0):b.Za(a,this.he,this.Tc?c.W:void 0,this.Uc?c.N:void 0)).map(function(a){return new y(a,{})},this);return[md(c,[this.index.Qc])]};function ui(a){S.call(this,0,1);this.rd=a}t(ui,S);ui.prototype.toString=l("select(?)");ui.prototype.Rc=function(a){a=Md(a,this.rd);return this.toString().replace("?",a.toString())};ui.prototype.da=function(a,b,c){return[Md(c,this.rd).eval(b[0])]};function vi(a,b){S.call(this,0,1);this.ba=a.i(Sb);this.S=b}t(vi,S);vi.prototype.toString=function(){return"table_access_by_row_id("+this.S.getName()+")"};vi.prototype.da=function(a,b){return[md(Pe(this.ba,gd(b[0])),[I(this.S)])]};function wi(a){this.h=a}t(wi,Rg);wi.prototype.lb=function(a,b){this.X=a;Sf(a,function(a){return a instanceof Yh}).forEach(function(a){var d=xi(a);if(0!=d.length){var e=ni(new mi(this.h,a.table),b,d.map(function(a){return Md(b,a.rd)}));if(null!==e){var g=A();d.forEach(function(a){g.set(a.rd,a)},this);this.X=yi(this,e,g,a)}}},this);return this.X};function xi(a){var b=[];for(a=a.getParent();a;)a instanceof ui&&b.push(a),a=a.getParent();return b}
function yi(a,b,c,d){(null===b.ya?[]:b.ya.values()).map(function(a){return c.get(a)}).forEach(Tf);b=new ti(a.h,b.vb,si(b),!1);a=new vi(a.h,d.table);L(a,b);Xf(d,d,a,b);return b.gb()};function zi(a,b){S.call(this,0,-1);this.D=a.i(Tb);this.S=b}t(zi,S);zi.prototype.toString=function(){return"insert("+this.S.getName()+")"};zi.prototype.da=function(a,b,c){Ai(this.S,c.values,this.D);a.wb(this.S,c.values);return[md(c.values,[this.S.getName()])]};function Ai(a,b,c){a=a.Cb().fd();if(null===a?0:a.f[0].autoIncrement){var d=a.f[0].ga.getName();c=c.get(a.m()).max();var e=null===c?0:c[0];b.forEach(function(a){if(0==a.s[d]||null==a.s[d])e++,a.s[d]=e})}}
function Bi(a,b){S.call(this,0,-1);this.D=a.i(Tb);this.S=b}t(Bi,S);Bi.prototype.toString=function(){return"insert_replace("+this.S.getName()+")"};Bi.prototype.da=function(a,b,c){Ai(this.S,c.values,this.D);a.Qd(this.S,c.values);return[md(c.values,[this.S.getName()])]};function Ci(){S.call(this,0,1)}t(Ci,S);Ci.prototype.toString=l("limit(?)");Ci.prototype.Rc=function(a){return this.toString().replace("?",a.W.toString())};Ci.prototype.da=function(a,b,c){b[0].entries.splice(c.W);return b};function Di(a){S.call(this,0,1);this.M=a}t(Di,S);m=Di.prototype;m.toString=function(){return"order_by("+Rd(this.M)+")"};m.da=function(a,b){if(1==b.length){var c;c=b[0];for(var d=null,e=0;e<this.M.length;e++){var g=ng(this.M[e].O);if(null!==c.Xa&&c.Xa.has(g.m())){d=g;break}}c=d;(null===c?b[0]:hd(b[0],c)).entries.sort(this.Ef.bind(this))}else b.sort(this.lg.bind(this));return b};
m.U=function(a,b){var c=null,d=null,e=null,g=-1;do g++,e=this.M[g].O,c=this.M[g].jb,d=a(e),e=b(e);while(d==e&&g+1<this.M.length);d=d<e?-1:d>e?1:0;return 1==c?d:-d};m.lg=function(a,b){return this.U(function(b){return b instanceof R?hd(a,b):H(a.entries[a.entries.length-1],b)},function(a){return a instanceof R?hd(b,a):H(b.entries[b.entries.length-1],a)})};m.Ef=function(a,b){return this.U(function(b){return H(a,b)},function(a){return H(b,a)})};function Ei(a,b){this.Ha=a;this.K=b}function Fi(a){return a.K.some(function(a){return a instanceof R},a)?Gi(a):Hi(a)}function Gi(a){if(1==a.K.length&&"DISTINCT"==a.K[0].Ib)return a=hd(a.Ha,a.K[0]).entries.map(function(a){var b=new nd(new y(-1,{}),1<this.Ha.L.size);pd(b,this.K[0],H(a,this.K[0].child));return b},a),new F(a,[]);var b=new nd(new y(-1,{}),1<a.Ha.L.size);a.K.forEach(function(a){var d=a instanceof R?hd(this.Ha,a):H(this.Ha.entries[0],a);pd(b,a,d)},a);return new F([b],G(a.Ha))}
function Hi(a){var b=Array(a.Ha.entries.length),c=1<a.Ha.L.size;a.Ha.entries.forEach(function(a,e){b[e]=new nd(new y(a.sa.id(),{}),c);this.K.forEach(function(c){pd(b[e],c,H(a,c))},this)},a);return new F(b,G(a.Ha))}function Ii(a,b){var c=a.map(function(a){return Fi(new Ei(a,b)).entries[0]});return new F(c,G(a[0]))};function Ji(a,b){S.call(this,0,1);this.f=a;this.Nb=b}t(Ji,S);Ji.prototype.toString=function(){var a="project("+this.f.toString();if(null!==this.Nb)var b=this.Nb.map(function(a){return a.m()}).join(", "),a=a+(", groupBy("+b+")");return a+")"};Ji.prototype.da=function(a,b){var c;0==b.length?c=[jd()]:1==b.length?(c=b[0],c=[0==this.f.length?c:Fi(new Ei(c,this.f))]):c=[Ii(b,this.f)];return c};function Ki(a){return a.f.some(function(a){return a instanceof R})||null!==a.Nb};function Li(){S.call(this,0,1)}t(Li,S);Li.prototype.toString=l("skip(?)");Li.prototype.Rc=function(a){return this.toString().replace("?",a.N.toString())};Li.prototype.da=function(a,b,c){return[new F(b[0].entries.slice(c.N),G(b[0]))]};function Mi(){}t(Mi,Rg);Mi.prototype.lb=function(a,b){if(!q(b.W)&&!q(b.N))return a;var c=Ni(a);if(null===c)return a;Sf(a,function(a){return a instanceof Ci||a instanceof Li}).forEach(function(a){a instanceof Ci?c.Tc=!0:c.Uc=!0;Tf(a)},this);return c.gb()};function Ni(a){a=Sf(a,function(a){return a instanceof ti},function(a){return a instanceof Ji&&Ki(a)||a instanceof Di||1!=K(a).length||a instanceof ui});return 0<a.length?a[0]:null};function Oi(a){this.h=a}t(Oi,Rg);Oi.prototype.lb=function(a,b){var c=Pi(a,b);if(null===c)return a;var d;a:{var e=c;d=Qi(Bd(c,0));if(null!==d){var g;g=c.M;for(var h=null,k=d.table.Da(),p=0;p<k.length&&null===h;p++)h=Ri(k[p],g);g=h;if(null===g){d=e;break a}e=new ti(this.h,g.vb,new ii(g.vb),g.Je);g=new vi(this.h,d.table);L(g,e);Tf(c);e=Xf(d,d,g,e)}d=e}if(d==c)a:if(d=c,e=Si(Bd(c,0)),null!==e){g=Ri(e.index,c.M);if(null===g)break a;e.he=g.Je;d=Tf(c).parent}return d.gb()};
function Si(a){a=Sf(a,function(a){return a instanceof ti},function(a){return 1!=K(a).length});return 0<a.length?a[0]:null}function Qi(a){a=Sf(a,function(a){return a instanceof Yh},function(a){return 1!=K(a).length});return 0<a.length?a[0]:null}function Pi(a,b){return q(b.M)?Sf(a,function(a){return a instanceof Di})[0]:null}function Ri(a,b){if(a.f.length!=b.length||!b.every(function(b,c){return b.O.getName()==a.f[c].ga.getName()}))return null;var c=Ti(b,a);return c[0]||c[1]?{vb:a,Je:c[1]}:null}
function Ti(a,b){var c=a.reduce(function(a,b){return a<<1|(0==b.jb?0:1)},0),d=b.f.reduce(function(a,b){return a<<1|(0==b.jb?0:1)},0),d=c^d,c=0==d,d=d==Math.pow(2,Math.max(a.length,b.f.length))-1;return[c,d]};function Ui(a,b,c){this.za=a;this.ee=b;this.Ub=c}Ui.prototype.fc=function(){this.Ub.forEach(function(a){this.za=a.lb(this.za,this.ee)},this);return this.za};function Vi(a,b){S.call(this,0,1);this.S=a;this.tg=b}t(Vi,S);Vi.prototype.toString=function(){return"update("+this.S.getName()+")"};Vi.prototype.da=function(a,b){var c=b[0].entries.map(function(a){var b=this.S.Lb(a.sa.Ia());this.tg.forEach(function(a){b.s[a.O.getName()]=a.value},this);return b},this);a.update(this.S,c);return[jd()]};function Wi(a){this.h=a;this.je=[new gi,new wi(this.h),new Oi(this.h),new Mi,new Zh(this.h)];this.Jd=[new wi(this.h)]}Wi.prototype.create=function(a,b){var c=a.gb();if(c instanceof Eg||c instanceof Dg)return Xi(this,a,b);if(c instanceof Kg||c instanceof Og||c instanceof Pg)return Xi(this,a,b,this.je);if(c instanceof Fg||c instanceof Gg)return Xi(this,a,b,this.Jd);throw new D(8);};function Xi(a,b,c,d){a=Qf(b.gb(),a.Zf.bind(a));null!=d&&(a=(new Ui(a,c,d)).fc());return new Sd(a,b.Y())}
Wi.prototype.Zf=function(a){if(a instanceof Kg)return new Ji(a.f,a.Nb);if(a instanceof Ng)return new $h(a.f);if(a instanceof Mg)return new rg(a.f);if(a instanceof Lg)return new Di(a.M);if(a instanceof Pg)return new Li;if(a instanceof Og)return new Ci;if(a instanceof Hg)return new ui(a.J.V());if(a instanceof Jg)return new Wg;if(a instanceof Qg)return new bi(this.h,a.J,a.Pb);if(a instanceof Ig)return new Yh(this.h,a.table);if(a instanceof Fg)return new Wh(a.table);if(a instanceof Gg)return new Vi(a.table,
a.ne);if(a instanceof Eg)return new Bi(this.h,a.table);if(a instanceof Dg)return new zi(this.h,a.table);throw new D(514);};function Yi(a){this.Xf=new Vh;this.gg=new Wi(a)};function Zi(){this.Qe=A()}function $i(a,b){var c=a.Qe.get(b.getName())||null;null===c&&(c=new aj,a.Qe.set(b.getName(),c));return c}function bj(a,b,c,d){c.forEach(function(a){a=$i(this,a);0==d?(a.ab=null,a.uc=b):3==d?(null===a.Wb&&(a.Wb=C()),a.Wb.add(b),null===a.Ta&&(a.Ta=C()),a.Ta.delete(b)):1==d?(null===a.Ta&&(a.Ta=C()),a.Ta.add(b)):2==d&&(a.ab=b)},a)}
function cj(a,b,c,d){var e=!0;c.forEach(function(a){if(e){a=$i(this,a);var c=null===a.Ta||0==a.Ta.size;e=0==d?(null===a.Wb||0==a.Wb.size)&&c&&null===a.uc&&null!==a.ab&&a.ab==b:3==d?null===a.uc&&null===a.ab&&null!==a.Ta&&a.Ta.has(b):1==d?null===a.ab:c&&(null===a.ab||a.ab==b)}},a);return e}function dj(a,b,c,d){var e=cj(a,b,c,d);e&&bj(a,b,c,d);return e}Zi.prototype.releaseLock=function(a,b){b.forEach(function(b){$i(this,b).releaseLock(a)},this)};
function ej(a,b){b.forEach(function(a){$i(this,a).ab=null},a)}function aj(){this.Wb=this.Ta=this.ab=this.uc=null}aj.prototype.releaseLock=function(a){this.uc==a&&(this.uc=null);this.ab==a&&(this.ab=null);null===this.Ta||this.Ta.delete(a);null===this.Wb||this.Wb.delete(a)};function gj(){this.Tb=new hj;this.Fc=new Zi}function $d(a,b){(2>b.getPriority()||2>b.getPriority())&&ej(a.Fc,b.Y());a.Tb.wb(b);ij(a);return b.Mb().ja}function ij(a){for(var b=a.Tb.va(),c=0;c<b.length;c++){var d=b[c],e=!1;if(e=0==d.I()?jj(a,d,1,3):jj(a,d,2,0))a.Tb.remove(d),e=a,d.exec().then(e.eg.bind(e,d),e.dg.bind(e,d))}}function jj(a,b,c,d){var e=!1;dj(a.Fc,b.V(),b.Y(),c)&&(e=dj(a.Fc,b.V(),b.Y(),d));return e}gj.prototype.eg=function(a,b){this.Fc.releaseLock(a.V(),a.Y());a.Mb().resolve(b);ij(this)};
gj.prototype.dg=function(a,b){this.Fc.releaseLock(a.V(),a.Y());a.Mb().reject(b);ij(this)};function hj(){this.Tb=[]}hj.prototype.wb=function(a){Se(this.Tb,a,function(a,c){var d=a.getPriority()-c.getPriority();return 0==d?a.V()-c.V():d})};hj.prototype.va=function(){return this.Tb.slice()};hj.prototype.remove=function(a){var b=this.Tb;a=va(b,a);var c;(c=0<=a)&&ua.splice.call(b,a,1);return c};function kj(a,b){this.Kd=sd.zc();this.fe=a;this.nd=b;this.K=lj(this)}function lj(a){if(0<a.fe.f.length)return a.fe.f;var b=[];a.fe.c.forEach(function(a){a.fb().forEach(function(a){b.push(a)})});return b}kj.prototype.U=function(a,b){return this.K.every(function(c){return yd(this.Kd,c.I(),"eq")(H(a,c),H(b,c))},this)};
function mj(a,b,c){var d=null===b?[]:b.entries,e=ub(d,c.entries,a.U.bind(a),function(a){return d[a]});b=[];for(var g=0,h=0;h<d.length;h++){var k=d[h];e[g]==k?g++:(k=a.nd.splice(g,1),k=nj(h,k,0,a.nd),b.push(k))}e=ub(d,c.entries,a.U.bind(a),function(a,b){return c.entries[b]});for(h=g=0;h<c.entries.length;h++)k=c.entries[h],e[g]==k?g++:(a.nd.splice(h,0,k.sa.s),k=nj(h,[],1,a.nd),b.push(k));return b}function nj(a,b,c,d){return{ug:c,index:a,object:d,wg:b,type:"splice"}};function oj(){this.dc=A()}oj.prototype.Ad=function(a,b){var c=ka(a.a).toString(),d=this.dc.get(c)||null;null===d&&(d=new pj(a),this.dc.set(c,d));d.Ad(b)};oj.prototype.ge=function(a,b){var c=ka(a.a).toString(),d=this.dc.get(c)||null;d.ge(b);0<d.Jc.size||this.dc.delete(c)};function Zd(a,b){var c=C();b.forEach(function(a){c.add(a.getName())});var d=[];a.dc.forEach(function(a){a=a.Bc();a.context.c.some(function(a){return c.has(a.getName())})&&d.push(a)});return d}
function Xd(a,b,c){b=ka(null!=b.$c?b.$c:b).toString();a=a.dc.get(b)||null;null!==a&&qj(a,c)}function pj(a){this.vf=a;this.Jc=C();this.bg=[];this.Oe=null;this.Cf=new kj(a.a,this.bg)}pj.prototype.Ad=function(a){this.Jc.has(a)||this.Jc.add(a)};pj.prototype.ge=function(a){return this.Jc.delete(a)};pj.prototype.Bc=function(){var a=this.vf;return{context:a.a,de:rh(a)}};function qj(a,b){var c=mj(a.Cf,a.Oe,b);a.Oe=b;0<c.length&&a.Jc.forEach(function(a){a(c)})};function rj(a,b){var c=a.i(Yb),d=b||{},e=new Oe(c);a.kb(Sb,e);var e=null,g=!1;switch(d.storeType||0){case 1:e=new Be(c);break;case 5:e=new De(c);break;case 4:e=new Ke(a,c,d.webSqlDbSize);break;case 3:e=new le(c,d.firebase);g=!0;break;default:e=new we(a,c)}a.kb(Rb,e);var h=new Lf;a.kb(Tb,h);return e.Ea(d.onUpgrade).then(function(){var b=new Yi(a);a.kb(Ub,b);b=new gj;a.kb(Vb,b);b=new oj;a.kb(Xb,b);return h.Ea(c)}).then(function(){if(g){var b=new ae(a);b.Pa.subscribe(b.Zd.bind(b))}return(new Ef(a)).Ea(c)})}
;function sj(a){this.h=a;this.l=a.i(Yb);this.Z=C(this.l.ra());this.bb=x()}m=sj.prototype;m.exec=function(){var a=this.h.i(Tb),b=this.h.i(Sb),c={};this.l.ra().forEach(function(d){var g=a.get(ze(d)).Za(),g=Pe(b,g).map(function(a){return a.s});c[d.getName()]=g});var d={name:this.l.name(),version:this.l.version(),tables:c},d=new nd(new y(-1,d),!0);return w([new F([d],[])])};m.I=l(0);m.Y=f("Z");m.Mb=f("bb");m.V=function(){return ka(this)};m.getPriority=l(0);function tj(a,b){this.h=a;this.l=a.i(Yb);this.Z=C(this.l.ra());this.bb=x();this.ta=b;this.Pa=a.i(Rb);this.ba=a.i(Sb);this.D=a.i(Tb)}m=tj.prototype;m.exec=function(){if(!(this.Pa instanceof we||this.Pa instanceof Be))throw new D(300);var a;a:{a=this.l.ra();for(var b=0;b<a.length;++b)if(0<this.D.get(ze(a[b])).Ma().na){a=!1;break a}a=!0}if(!a)throw new D(110);if(this.l.name()!=this.ta.name||this.l.version()!=this.ta.version)throw new D(111);if(null==this.ta.tables)throw new D(112);return uj(this)};
m.I=l(1);m.Y=f("Z");m.Mb=f("bb");m.V=function(){return ka(this)};m.getPriority=l(0);function uj(a){var b=new Uc(a.h,a.Z),b=a.Pa.Bb(a.I(),b),c;for(c in a.ta.tables){var d=a.l.table(c),e=a.ta.tables[c].map(function(a){return d.sb(a)}),g=b.H(c,d.Lb);a.ba.wd(c,e);var h=a.D.ic.get(c)||[];e.forEach(function(a){h.forEach(function(b){var c=a.Db(b.getName());b.add(c,a.id())})});g.put(e)}return b.la()};function vj(a,b){this.h=a;this.Pa=a.i(Rb);this.Aa=a.i(Vb);this.Eb=a.i(Xb);this.Z=C(b);this.Sa=new Uc(this.h,this.Z);this.bb=x();this.vc=x();this.pe=x()}m=vj.prototype;m.exec=function(){this.pe.resolve();return this.vc.ja};m.I=l(1);m.Y=f("Z");m.Mb=f("bb");m.V=function(){return ka(this)};m.getPriority=l(2);function wj(a){$d(a.Aa,a);return a.pe.ja}
function xj(a,b){var c=b.Bc();return c.de.gb().exec(a.Sa,c.context).then(function(a){return fd(a[0])},function(a){this.Sa.Gb();var b=new ib(a.name);this.vc.reject(b);throw a;}.bind(a))}m.la=function(){this.Pa.Bb(this.I(),this.Sa).la().then(function(){this.Oc();this.vc.resolve()}.bind(this),function(a){this.Sa.Gb();this.vc.reject(a)}.bind(this));return this.bb.ja};m.Gb=function(){this.Sa.Gb();this.vc.resolve();return this.bb.ja};
m.Oc=function(){var a=Zd(this.Eb,this.Z);0!=a.length&&(a=new Wd(this.h,a),$d(this.Aa,a))};function yj(a){this.h=a;this.Aa=a.i(Vb);this.Sc=null;this.Ua=0;0==zj.size&&(zj.set(0,C([1,4])),zj.set(1,C([2])),zj.set(2,C([3,5,6])),zj.set(3,C([2,7])),zj.set(4,C([7])),zj.set(5,C([7])),zj.set(6,C([7])))}r("lf.proc.Transaction",yj);var zj=A();function Aj(a,b){var c=zj.get(a.Ua)||null;if(null===c||!c.has(b))throw new D(107,a.Ua,b);a.Ua=b}
yj.prototype.exec=function(a){Aj(this,4);var b=[];try{a.forEach(function(a){a.eb();b.push(a.Bc())},this)}catch(c){return Aj(this,7),$a(c)}a=new Xg(this.h,b);return $d(this.Aa,a).then(function(a){Aj(this,7);return a.map(function(a){return fd(a)})}.bind(this),function(a){Aj(this,7);throw a;}.bind(this))};yj.prototype.exec=yj.prototype.exec;yj.prototype.tf=function(a){Aj(this,1);this.Sc=new vj(this.h,a);return wj(this.Sc).then(function(){Aj(this,2)}.bind(this))};yj.prototype.begin=yj.prototype.tf;
yj.prototype.sf=function(a){Aj(this,3);return xj(this.Sc,a).then(function(a){Aj(this,2);return a}.bind(this),function(a){Aj(this,7);throw a;}.bind(this))};yj.prototype.attach=yj.prototype.sf;yj.prototype.la=function(){Aj(this,5);return this.Sc.la().then(function(){Aj(this,7)}.bind(this))};yj.prototype.commit=yj.prototype.la;yj.prototype.Gb=function(){Aj(this,6);return this.Sc.Gb().then(function(){Aj(this,7)}.bind(this))};yj.prototype.rollback=yj.prototype.Gb;function V(a){this.h=a;this.l=a.i(Yb);this.Pd=!1}r("lf.proc.Database",V);V.prototype.Ea=function(a){this.h.kb(Yb,this.l);return rj(this.h,a).then(function(){this.Pd=!0;this.Aa=this.h.i(Vb);return this}.bind(this))};V.prototype.init=V.prototype.Ea;V.prototype.ub=f("l");V.prototype.getSchema=V.prototype.ub;function Bj(a){if(!a.Pd)throw new D(2);}V.prototype.select=function(a){Bj(this);return new U(this.h,1!=arguments.length||null!=arguments[0]?Array.prototype.slice.call(arguments):[])};
V.prototype.select=V.prototype.select;V.prototype.wb=function(){Bj(this);return new th(this.h)};V.prototype.insert=V.prototype.wb;V.prototype.Qd=function(){Bj(this);return new th(this.h,!0)};V.prototype.insertOrReplace=V.prototype.Qd;V.prototype.update=function(a){Bj(this);return new Dh(this.h,a)};V.prototype.update=V.prototype.update;V.prototype.delete=function(){Bj(this);return new sh(this.h)};V.prototype["delete"]=V.prototype.delete;
V.prototype.observe=function(a,b){Bj(this);this.h.i(Xb).Ad(a,b)};V.prototype.observe=V.prototype.observe;V.prototype.unobserve=function(a,b){Bj(this);this.h.i(Xb).ge(a,b)};V.prototype.unobserve=V.prototype.unobserve;V.prototype.Af=function(){Bj(this);return new yj(this.h)};V.prototype.createTransaction=V.prototype.Af;V.prototype.close=function(){try{this.h.i(Rb).close()}catch(a){}this.h.clear();this.Pd=!1};V.prototype.close=V.prototype.close;
V.prototype.If=function(){Bj(this);var a=new sj(this.h);return $d(this.Aa,a).then(function(a){return fd(a[0])[0]})};V.prototype["export"]=V.prototype.If;V.prototype.import=function(a){Bj(this);a=new tj(this.h,a);return $d(this.Aa,a).then(l(null))};V.prototype["import"]=V.prototype.import;function W(a,b,c,d,e,g){this.S=a;this.A=b;this.Ke=c;this.Ie=d;this.mf=e;this.cb=g||null}r("lf.schema.BaseColumn",W);m=W.prototype;m.getName=f("A");m.m=function(){return I(this.S)+"."+this.A};m.toString=function(){return this.m()};m.H=f("S");m.I=f("mf");W.prototype.getType=W.prototype.I;W.prototype.Ya=f("cb");W.prototype.Da=function(){null==this.ia&&(this.ia=[],this.H().Da().forEach(function(a){-1!=a.f.map(function(a){return a.ga.getName()}).indexOf(this.A)&&this.ia.push(a)},this));return this.ia};
W.prototype.ua=function(){if(!q(this.ea)){var a=this.Da().filter(function(a){return 1!=a.f.length?!1:a.f[0].ga.getName()==this.getName()},this);this.ea=0<a.length?a[0]:null}return this.ea};W.prototype.Dc=f("Ie");W.prototype.isNullable=W.prototype.Dc;W.prototype.Ec=f("Ke");W.prototype.Ra=function(a){return hg(this,a,"eq")};W.prototype.eq=W.prototype.Ra;W.prototype.Re=function(a){return hg(this,a,"neq")};W.prototype.neq=W.prototype.Re;W.prototype.Wd=function(a){return hg(this,a,"lt")};
W.prototype.lt=W.prototype.Wd;W.prototype.Yf=function(a){return hg(this,a,"lte")};W.prototype.lte=W.prototype.Yf;W.prototype.Kf=function(a){return hg(this,a,"gt")};W.prototype.gt=W.prototype.Kf;W.prototype.Lf=function(a){return hg(this,a,"gte")};W.prototype.gte=W.prototype.Lf;W.prototype.match=function(a){return hg(this,a,"match")};W.prototype.match=W.prototype.match;W.prototype.uf=function(a,b){return hg(this,[a,b],"between")};W.prototype.between=W.prototype.uf;
W.prototype.Mf=function(a){return hg(this,a,"in")};W.prototype["in"]=W.prototype.Mf;W.prototype.Tf=function(){return this.Ra(null)};W.prototype.isNull=W.prototype.Tf;W.prototype.Sf=function(){return this.Re(null)};W.prototype.isNotNull=W.prototype.Sf;W.prototype.nc=function(a){return new W(this.S,this.A,this.Ke,this.Ie,this.mf,a)};W.prototype.as=W.prototype.nc;function Cj(){this.ud=A()}var Dj;Cj.prototype.clear=function(){this.ud.clear()};Cj.prototype.clear=Cj.prototype.clear;Cj.prototype.kb=function(a,b){this.ud.set(a.toString(),b);return b};Cj.prototype.registerService=Cj.prototype.kb;Cj.prototype.i=function(a){var b=this.ud.get(a.toString())||null;if(null===b)throw new D(7,a.toString());return b};Cj.prototype.getService=Cj.prototype.i;Cj.prototype.Ud=function(a){return this.ud.has(a.toString())};Cj.prototype.isRegistered=Cj.prototype.Ud;function Ej(a){this.l=a;this.Ze=new ag;this.Te=new ag;this.we=A();this.g=new ag;this.ve=new ag;Fj(this)}function Fj(a){a.l.ra().forEach(function(a){var c=a.getName();a.Cb().Nd().forEach(function(d){this.Ze.set(d.yb,d);this.Te.set(c,this.l.table(d.yb));this.g.set(d.yb,a);this.we.set(a.getName()+"."+d.qb,d.yb);this.ve.set(d.yb+"."+d.Lc,a.getName())},this)},a)}function Nc(a,b){return a.Ze.get(b)}function $g(a,b){var c=b.get(a);return null===c?[]:c}
function ch(a,b){var c=C();b.forEach(function(a){(a=this.we.get(a))&&c.add(a)},a);return jc(c).map(function(a){return this.l.table(a)},a)}function dh(a,b){var c=C();b.forEach(function(a){(a=this.ve.get(a))&&a.forEach(function(a){c.add(a)})},a);return jc(c).map(function(a){return this.l.table(a)},a)};function Gj(a,b,c){this.hg=a;this.ag=b;this.Jf=c}r("lf.schema.Constraint",Gj);Gj.prototype.fd=f("hg");Gj.prototype.getPrimaryKey=Gj.prototype.fd;Gj.prototype.Nd=f("Jf");Gj.prototype.getForeignKeys=Gj.prototype.Nd;function Hj(a,b){var c=a.ref.split(".");if(2!=c.length)throw new D(540,b);this.qb=a.local;this.yb=c[0];this.Lc=c[1];this.name=b;this.action=a.action;this.timing=a.timing};function X(a){Ij(a);this.Kd=sd.zc();this.A=a;this.K=A();this.xd=C();this.jc=C();this.Ic=C();this.xa=null;this.ia=A();this.qd=!1;this.tb=[]}r("lf.schema.TableBuilder",X);function Jj(a){this.name=a.name;this.jb=a.order;this.autoIncrement=a.autoIncrement}var Kj=C([0,6]);function Ij(a){if(!/^[A-Za-z_][A-Za-z0-9_]*$/.test(a))throw new D(502,a);}function Lj(a,b){if(b==a.A)throw new D(546,b);if(a.K.has(b)||a.ia.has(b)||a.jc.has(b))throw new D(503,a.A+"."+b);}
function Mj(a,b){var c=!1;b.forEach(function(a){var b=this.K.get(a.name);c=c||a.autoIncrement;if(a.autoIncrement&&3!=b)throw new D(504);},a);if(c&&1<b.length)throw new D(505);}function Nj(a){if(null!==a.xa){var b=a.ia.get(a.xa).map(function(a){return a.name}),c=0;if(a.tb.some(function(a,e){c=e;return-1!=b.indexOf(a.qb)},a))throw new D(543,a.tb[c].name);}}
function Oj(a){if(null!==a.xa){var b=function(a){return a.name},c=JSON.stringify(a.ia.get(a.xa).map(b));a.ia.forEach(function(a,e){if(e!=this.xa){var g=a.map(b);if(JSON.stringify(g)==c)throw new D(544,this.A+"."+e);}},a)}}function Pj(a){null===a.xa||a.ia.get(a.xa).forEach(function(a){if(this.Ic.has(a.name))throw new D(545,this.A+"."+a.name);},a)}X.prototype.nf=function(a,b){Ij(a);Lj(this,a);this.K.set(a,b);Kj.has(b)&&this.re([a]);return this};X.prototype.addColumn=X.prototype.nf;
X.prototype.pf=function(a,b){var c=this.A;this.xa="pk"+(c[0].toUpperCase()+c.substring(1));Ij(this.xa);Lj(this,this.xa);c=Qj(this,a,!0,void 0,b);Mj(this,c);1==c.length&&this.xd.add(c[0].name);this.jc.add(this.xa);this.ia.set(this.xa,c);return this};X.prototype.addPrimaryKey=X.prototype.pf;
X.prototype.of=function(a,b){Ij(a);Lj(this,a);var c=new Hj(b,this.A+"."+a);q(c.action)||(c.action=0);q(c.timing)||(c.timing=0);if(1==c.action&&1==c.timing)throw new D(506);if(!this.K.has(c.qb))throw new D(540,a);this.tb.push(c);this.qe(a,[c.qb],this.xd.has(c.qb));return this};X.prototype.addForeignKey=X.prototype.of;X.prototype.qf=function(a,b){Ij(a);Lj(this,a);var c=Qj(this,b,!0);Rj(this,a,c);1==c.length&&(this.xd.add(c[0].name),Sj(this,c[0].name));this.ia.set(a,c);this.jc.add(a);return this};
X.prototype.addUnique=X.prototype.qf;function Sj(a,b){a.tb.forEach(function(a){a.qb==b&&this.jc.add(a.name.split(".")[1])},a)}X.prototype.re=function(a){a=Qj(this,a,!1);Tj(this,a);a.forEach(function(a){this.Ic.add(a.name)},this);return this};X.prototype.addNullable=X.prototype.re;function Tj(a,b){Ib(a.ia).forEach(function(a){var d=C();this.ia.get(a).forEach(function(a){d.add(a.name)});var e=b.filter(function(a){return d.has(a.name)});if(1<d.size&&0<e.length)throw new D(507,a,e.join(","));},a)}
X.prototype.qe=function(a,b,c,d){Ij(a);Lj(this,a);b=Qj(this,b,!0,d);Rj(this,a,b);c&&this.jc.add(a);this.ia.set(a,b);return this};X.prototype.addIndex=X.prototype.qe;function Rj(a,b,c){if(1<c.length&&(a=c.filter(function(a){return this.Ic.has(a.name)},a),0<a.length))throw new D(507,b,a.join(","));}X.prototype.Fb=ba("qd");X.prototype.persistentIndex=X.prototype.Fb;X.prototype.ub=function(){Nj(this);Oj(this);Pj(this);return new (Uj(this))};X.prototype.getSchema=X.prototype.ub;
function Vj(a){return a.tb}function Qj(a,b,c,d,e){var g=b,g="string"==typeof b[0]?b.map(function(a){return new Jj({name:a,order:null!=d?d:1,autoIncrement:e||!1})}):b.map(function(a){return new Jj(a)});g.forEach(function(a){if(!this.K.has(a.name))throw new D(508,this.A,a.name);if(c){var b=this.K.get(a.name);if(0==b||6==b)throw new D(509,this.A,a.name);}},a);return g}
function Uj(a){function b(){function b(c){return a.ia.get(c).map(function(a){return{ga:this[a.name],jb:a.jb,autoIncrement:a.autoIncrement}},this)}var d=Ib(a.K).map(function(b){this[b]=new W(this,b,a.xd.has(b),a.Ic.has(b),a.K.get(b));return this[b]},this),e=Ib(a.ia).map(function(d){return new jg(a.A,d,a.jc.has(d),b.call(this,d))},this);Q.call(this,a.A,d,e,a.qd);var g=null===a.xa?null:new jg(a.A,a.xa,!0,b.call(this,a.xa)),h=d.filter(function(b){return!a.Ic.has(b.getName())});this.xf=new Gj(g,h,a.tb);
this.cf=Wj(a,d,e)}t(b,Q);b.prototype.sb=function(a){return new this.cf(ob++,a)};b.prototype.createRow=b.prototype.sb;b.prototype.Lb=function(a){var b={};this.fb().forEach(function(e){var g=e.getName();e=e.I();var h=a.value[g];if(0==e)if(e=h,null!=e&&""!=e){0!=e.length%2&&(e="0"+e);for(var h=new ArrayBuffer(e.length/2),k=new Uint8Array(h),p=0,E=0;p<e.length;p+=2)k[E++]=parseInt(e.substr(p,2),16);e=h}else e=null;else e=2==e?null!=h?new Date(h):null:h;b[g]=e},this);return new this.cf(a.id,b)};b.prototype.deserializeRow=
b.prototype.Lb;b.prototype.Cb=f("xf");b.prototype.getConstraint=b.prototype.Cb;return b}
function Wj(a,b,c){function d(a,d){this.K=b;this.ia=c;y.call(this,a,d)}t(d,y);d.prototype.ze=function(){var a={};this.K.forEach(function(b){a[b.getName()]=b.Dc()?null:Fc[b.I()]});return a};d.prototype.jf=function(){var a={};this.K.forEach(function(b){var c=b.getName();b=b.I();var d=this.s[c];a[c]=0==b?null!=d?rb(d):null:2==b?null!=d?d.getTime():null:6==b?null!=d?d:null:d},this);return a};var e=function(a){var b=this.K.get(a.getName()),c=this.Kd.Le.get(b)||null;return function(b){return c(b[a.getName()])}}.bind(a),
g=function(a){var b=a.map(function(a){return e(a.ga)});return function(a){return b.map(function(b){return b(a)})}}.bind(a),h={};c.forEach(function(a){var b=a.m();a=1==a.f.length?e(a.f[0].ga):g(a.f);h[b]=a});d.prototype.Db=function(a){return-1!=a.indexOf("#")?this.id():h.hasOwnProperty(a)?h[a](this.s):null};return d};function Y(a,b){this.l=new Z(a,b);this.ob=A();this.wc=!1}r("lf.schema.Builder",Y);function Xj(a,b){b.tb.forEach(function(a){var d=a.yb;if(!this.ob.has(d))throw new D(536,a.name);var d=this.ob.get(d).ub(),e=a.Lc;if(!d.hasOwnProperty(e))throw new D(537,a.name);if(b.ub()[a.qb].I()!=d[e].I())throw new D(538,a.name);if(!d[e].Ec())throw new D(539,a.name);},a)}Y.prototype.wf=function(a){a.tb.forEach(function(a){Vj(this.ob.get(a.yb)).forEach(function(c){if(c.qb==a.Lc)throw new D(534,a.name);},this)},this)};
function Yj(a){a.wc||(a.ob.forEach(function(a){Xj(this,a);a=a.ub();this.l.L.set(a.getName(),a)},a),B(a.ob).forEach(a.wf,a),Zj(a),a.ob.clear(),a.wc=!0)}function ak(a,b,c){b.oe||(b.oe=!0,b.$d=!0,b.Ae.forEach(function(a){a=c.get(a);if(!a.oe)ak(this,a,c);else if(a.$d&&b!=a)throw new D(533);},a));b.$d=!1}function Zj(a){var b=A();a.l.L.forEach(function(a,d){b.set(d,new bk(d))},a);a.ob.forEach(function(a,d){a.tb.forEach(function(a){b.get(a.yb).Ae.add(d)})});B(b).forEach(function(a){ak(this,a,b)},a)}
function bk(a){this.$d=this.oe=!1;this.Ae=C();this.Qc=a}Y.prototype.ub=function(){this.wc||Yj(this);return this.l};Y.prototype.getSchema=Y.prototype.ub;Y.prototype.Ce=function(){var a=new Qb("ns_"+this.l.name()),b;Dj||(Dj=new Cj);b=Dj;var c=null;b.Ud(a)?c=b.i(a):(c=new Cj,b.kb(a,c));return c};Y.prototype.getGlobal=Y.prototype.Ce;Y.prototype.connect=function(a){var b=this.Ce();b.Ud(Yb)||b.kb(Yb,this.ub());return(new V(b)).Ea(a)};Y.prototype.connect=Y.prototype.connect;
Y.prototype.zf=function(a){if(this.ob.has(a))throw new D(503,a);if(this.wc)throw new D(535);this.ob.set(a,new X(a));return this.ob.get(a)};Y.prototype.createTable=Y.prototype.zf;Y.prototype.ke=function(a){if(this.wc)throw new D(535);this.l.ke(a);return this};Y.prototype.setPragma=Y.prototype.ke;function Z(a,b){this.A=a;this.Oa=b;this.L=A();this.Xe={Df:!1}}r("lf.schema.DatabaseSchema",Z);Z.prototype.name=f("A");Z.prototype.name=Z.prototype.name;Z.prototype.version=f("Oa");Z.prototype.version=Z.prototype.version;
Z.prototype.ra=function(){return B(this.L)};Z.prototype.tables=Z.prototype.ra;Z.prototype.table=function(a){if(!this.L.has(a))throw new D(101,a);return this.L.get(a)};Z.prototype.table=Z.prototype.table;Z.prototype.info=function(){this.Ge||(this.Ge=new Ej(this));return this.Ge};Z.prototype.We=f("Xe");Z.prototype.pragma=Z.prototype.We;Z.prototype.ke=ba("Xe");r("lf.schema.create",function(a,b){return new Y(a,b)});}.bind(window))()
//# sourceMappingURL=lovefield.min.js.map
