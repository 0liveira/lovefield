/*
  Copyright 2014 The Lovefield Project Authors. All Rights Reserved.

  Licensed under the Apache License, Version 2.0 (the "License");
  you may not use this file except in compliance with the License.
  You may obtain a copy of the License at

  http://www.apache.org/licenses/LICENSE-2.0

  Unless required by applicable law or agreed to in writing, software
  distributed under the License is distributed on an "AS IS" BASIS,
  WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
  See the License for the specific language governing permissions and
  limitations under the License.
*/
(function(){'use strict';var aa=window,ba=Object,ca=Function,da=document,ea=Math,e=Array,fa=Error,ga=parseInt;function ha(a,b){return a.exec=b}function ia(a,b){return a.getName=b}function ja(a,b){return a.remove=b}function ka(a,b){return a.values=b}function la(a,b){return a.clear=b}function ma(a,b){return a.bind=b}function f(a,b){return a.toString=b}function na(a,b){return a.table=b}function oa(a,b){return a.next=b}function pa(a,b){return a.close=b}function qa(a,b){return a.clone=b}
function ra(a,b){return a.child=b}function sa(a,b){return a.onerror=b}function ta(a,b){return a.value=b}function ua(a,b){return a.getPriority=b}function va(a,b){return a.delete=b}function wa(a,b){return a.subscribe=b}function xa(a,b){return a.name=b}function ya(a,b){return a.length=b}function za(a,b){return a.onsuccess=b}function Aa(a,b){return a.update=b}
var Ba="context",Ca="filter",Da="version",Ea="getParent",Fa="shift",Ga="exec",Ha="replace",Ia="concat",Ka="objectStoreNames",h="getName",m="remove",La="autoIncrement",n="forEach",Ma="values",q="clear",r="bind",Na="getTime",t="toString",Oa="global",Pa="propertyIsEnumerable",Qa="create",u="table",Ra="compare",Sa="result",Ta="index",Ua="next",Va="split",Wa="hasOwnProperty",Xa="close",Ya="clone",Za="setImmediate",$a="transaction",ab="child",bb="rows",v="contains",w="apply",x="push",cb="reject",db="reduce",
eb="addAll",y="slice",z="value",fb="item",gb="objectStore",A="indexOf",hb="getPriority",ib="delete",jb="name",B="length",C="prototype",E="then",F="entries",kb="removeChild",lb="target",G="call",mb="resolve",nb="some",ob="sort",pb="every",qb="update",H="splice",I="join",rb="unshift";function sb(){return function(){}}function tb(a){return function(b){this[a]=b}}function J(a){return function(){return this[a]}}function ub(a){return function(){return a}}var K,vb=this;function wb(a){return void 0!==a}
function L(a,b,c){a=a[Va](".");c=c||vb;a[0]in c||!c.execScript||c.execScript("var "+a[0]);for(var d;a[B]&&(d=a[Fa]());)!a[B]&&wb(b)?c[d]=b:c=c[d]?c[d]:c[d]={}}function xb(){}function yb(a){a.ke=function(){return a.Cf?a.Cf:a.Cf=new a}}
function zb(a){var b=typeof a;if("object"==b)if(a){if(a instanceof e)return"array";if(a instanceof ba)return b;var c=ba[C][t][G](a);if("[object Window]"==c)return"object";if("[object Array]"==c||"number"==typeof a[B]&&"undefined"!=typeof a[H]&&"undefined"!=typeof a[Pa]&&!a[Pa]("splice"))return"array";if("[object Function]"==c||"undefined"!=typeof a[G]&&"undefined"!=typeof a[Pa]&&!a[Pa]("call"))return"function"}else return"null";else if("function"==b&&"undefined"==typeof a[G])return"object";return b}
function Ab(a){return null===a}function Bb(a){return null!=a}function Cb(a){var b=zb(a);return"array"==b||"object"==b&&"number"==typeof a[B]}function Db(a){return"string"==typeof a}function Eb(a){return"function"==zb(a)}function Fb(a){return a[Gb]||(a[Gb]=++Hb)}var Gb="closure_uid_"+(1E9*ea.random()>>>0),Hb=0;function Ib(a,b,c){return a[G][w](a[r],arguments)}
function Jb(a,b,c){if(!a)throw fa();if(2<arguments[B]){var d=e[C][y][G](arguments,2);return function(){var c=e[C][y][G](arguments);e[C][rb][w](c,d);return a[w](b,c)}}return function(){return a[w](b,arguments)}}function M(a,b,c){M=ca[C][r]&&-1!=ca[C][r][t]()[A]("native code")?Ib:Jb;return M[w](null,arguments)}function Kb(a,b){var c=e[C][y][G](arguments,1);return function(){var b=c[y]();b[x][w](b,arguments);return a[w](this,b)}}
function N(a,b){function c(){}c.prototype=b[C];a.$a=b[C];a.prototype=new c;a[C].constructor=a;a.wk=function(a,c,k){for(var l=e(arguments[B]-2),p=2;p<arguments[B];p++)l[p-2]=arguments[p];return b[C][c][w](a,l)}}ma(ca[C],ca[C][r]||function(a,b){if(1<arguments[B]){var c=e[C][y][G](arguments,1);c[rb](this,a);return M[w](null,c)}return M(this,a)});function Lb(a){if(fa.captureStackTrace)fa.captureStackTrace(this,Lb);else{var b=fa().stack;b&&(this.stack=b)}a&&(this.message=String(a))}N(Lb,fa);xa(Lb[C],"CustomError");function Mb(a,b){for(var c=a[Va]("%s"),d="",g=e[C][y][G](arguments,1);g[B]&&1<c[B];)d+=c[Fa]()+g[Fa]();return d+c[I]("%s")};function Nb(a,b){b[rb](a);Lb[G](this,Mb[w](null,b));b[Fa]()}N(Nb,Lb);xa(Nb[C],"AssertionError");function Ob(a,b,c,d){var g="Assertion failed";if(c)var g=g+(": "+c),k=d;else a&&(g+=": "+a,k=b);throw new Nb(""+g,k||[]);}function O(a,b,c){a||Ob("",null,b,e[C][y][G](arguments,2));return a}function Pb(a,b){throw new Nb("Failure"+(a?": "+a:""),e[C][y][G](arguments,1));}function Qb(a,b,c){Eb(a)||Ob("Expected function but got %s: %s.",[zb(a),a],b,e[C][y][G](arguments,2));return a};function Rb(a,b,c){this.Pf=c;this.Ih=a;this.Yj=b;this.Ad=0;this.sd=null}Rb[C].get=function(){var a;0<this.Ad?(this.Ad--,a=this.sd,this.sd=a[Ua],oa(a,null)):a=this.Ih();return a};Rb[C].put=function(a){this.Yj(a);this.Ad<this.Pf&&(this.Ad++,oa(a,this.sd),this.sd=a)};var Sb=e[C],Tb=Sb[A]?function(a,b,c){O(null!=a[B]);return Sb[A][G](a,b,c)}:function(a,b,c){c=null==c?0:0>c?ea.max(0,a[B]+c):c;if(Db(a))return Db(b)&&1==b[B]?a[A](b,c):-1;for(;c<a[B];c++)if(c in a&&a[c]===b)return c;return-1},Ub=Sb[n]?function(a,b,c){O(null!=a[B]);Sb[n][G](a,b,c)}:function(a,b,c){for(var d=a[B],g=Db(a)?a[Va](""):a,k=0;k<d;k++)k in g&&b[G](c,g[k],k,a)},Vb=Sb.map?function(a,b,c){O(null!=a[B]);return Sb.map[G](a,b,c)}:function(a,b,c){for(var d=a[B],g=e(d),k=Db(a)?a[Va](""):a,l=0;l<d;l++)l in
k&&(g[l]=b[G](c,k[l],l,a));return g},Wb=Sb[db]?function(a,b,c,d){O(null!=a[B]);d&&(b=M(b,d));return Sb[db][G](a,b,c)}:function(a,b,c,d){var g=c;Ub(a,function(c,l){g=b[G](d,g,c,l,a)});return g},Xb=Sb[nb]?function(a,b,c){O(null!=a[B]);return Sb[nb][G](a,b,c)}:function(a,b,c){for(var d=a[B],g=Db(a)?a[Va](""):a,k=0;k<d;k++)if(k in g&&b[G](c,g[k],k,a))return!0;return!1},Yb=Sb[pb]?function(a,b,c){O(null!=a[B]);return Sb[pb][G](a,b,c)}:function(a,b,c){for(var d=a[B],g=Db(a)?a[Va](""):a,k=0;k<d;k++)if(k in
g&&!b[G](c,g[k],k,a))return!1;return!0};function Zb(a,b){O(null!=a[B]);return 1==Sb[H][G](a,b,1)[B]}function $b(a,b,c){a:{for(var d=a[B],g=Db(a)?a[Va](""):a,k=0;k<d;k++)if(k in g&&b[G](c,g[k],k,a)){b=k;break a}b=-1}return 0<=b?(Zb(a,b),!0):!1}function ac(a){var b=a[B];if(0<b){for(var c=e(b),d=0;d<b;d++)c[d]=a[d];return c}return[]}function bc(a,b){for(var c=1;c<arguments[B];c++){var d=arguments[c];if(Cb(d)){var g=a[B]||0,k=d[B]||0;ya(a,g+k);for(var l=0;l<k;l++)a[g+l]=d[l]}else a[x](d)}}
function cc(a,b,c,d){O(null!=a[B]);return Sb[H][w](a,dc(arguments,1))}function dc(a,b,c){O(null!=a[B]);return 2>=arguments[B]?Sb[y][G](a,b):Sb[y][G](a,b,c)}function ec(a,b,c,d,g){for(var k=0,l=a[B],p;k<l;){var D=k+l>>1,Ja;Ja=c?b[G](g,a[D],D,a):b(d,a[D]);0<Ja?k=D+1:(l=D,p=!Ja)}return p?k:~k}function fc(a,b){return a>b?1:a<b?-1:0}function gc(a,b,c){c=ec(a,c||fc,!1,b);return 0>c?(cc(a,-(c+1),0,b),!0):!1}function hc(a,b){for(var c=[],d=0;d<b;d++)c[d]=a;return c}
function ic(a){for(var b=[],c=0;c<arguments[B];c++){var d=arguments[c];if("array"==zb(d))for(var g=0;g<d[B];g+=8192)for(var k=dc(d,g,g+8192),k=ic[w](null,k),l=0;l<k[B];l++)b[x](k[l]);else b[x](d)}return b};function jc(a,b,c){for(var d in a)b[G](c,a[d],d,a)}function kc(a,b,c){for(var d in a)if(b[G](c,a[d],d,a))return!0;return!1}function lc(a){var b=[],c=0,d;for(d in a)b[c++]=a[d];return b}function mc(a){var b=[],c=0,d;for(d in a)b[c++]=d;return b};var nc;a:{var oc=vb.navigator;if(oc){var pc=oc.userAgent;if(pc){nc=pc;break a}}nc=""};function qc(a){vb.setTimeout(function(){throw a;},0)}var rc;
function sc(){var a=vb.MessageChannel;"undefined"===typeof a&&"undefined"!==typeof aa&&aa.postMessage&&aa.addEventListener&&-1==nc[A]("Presto")&&(a=function(){var a=da.createElement("IFRAME");a.style.display="none";a.src="";da.documentElement.appendChild(a);var b=a.contentWindow,a=b.document;a.open();a.write("");a[Xa]();var c="callImmediate"+ea.random(),d="file:"==b.location.protocol?"*":b.location.protocol+"//"+b.location.host,a=M(function(a){if(("*"==d||a.origin==d)&&a.data==c)this.port1.onmessage()},
this);b.addEventListener("message",a,!1);this.port1={};this.port2={postMessage:function(){b.postMessage(c,d)}}});if("undefined"!==typeof a&&-1==nc[A]("Edge")&&-1==nc[A]("Trident")&&-1==nc[A]("MSIE")){var b=new a,c={},d=c;b.port1.onmessage=function(){if(wb(c[Ua])){c=c[Ua];var a=c.ef;c.ef=null;a()}};return function(a){oa(d,{ef:a});d=d[Ua];b.port2.postMessage(0)}}return"undefined"!==typeof da&&"onreadystatechange"in da.createElement("SCRIPT")?function(a){var b=da.createElement("SCRIPT");b.onreadystatechange=
function(){b.onreadystatechange=null;b.parentNode[kb](b);b=null;a();a=null};da.documentElement.appendChild(b)}:function(a){vb.setTimeout(a,0)}};function tc(){this.Pd=this.Xb=null}var vc=new Rb(function(){return new uc},function(a){a.reset()},100);tc[C].add=function(a,b){var c=this.Ui();c.set(a,b);this.Pd?oa(this.Pd,c):(O(!this.Xb),this.Xb=c);this.Pd=c};ja(tc[C],function(){var a=null;this.Xb&&(a=this.Xb,this.Xb=this.Xb[Ua],this.Xb||(this.Pd=null),oa(a,null));return a});tc[C].Zj=function(a){vc.put(a)};tc[C].Ui=function(){return vc.get()};function uc(){this.scope=this.fe=null;oa(this,null)}
uc[C].set=function(a,b){this.fe=a;this.scope=b;oa(this,null)};uc[C].reset=function(){this.scope=this.fe=null;oa(this,null)};function wc(a,b){xc||yc();zc||(xc(),zc=!0);Ac.add(a,b)}var xc;function yc(){if(vb.Promise&&vb.Promise[mb]){var a=vb.Promise[mb]();xc=function(){a[E](Bc)}}else xc=function(){var a=Bc;if(!Eb(vb[Za])||vb.Window&&vb.Window[C]&&vb.Window[C][Za]==vb[Za])rc||(rc=sc()),rc(a);else vb[Za](a)}}var zc=!1,Ac=new tc;[][x](function(){zc=!1;Ac=new tc});function Bc(){for(var a=null;a=Ac[m]();){try{a.fe[G](a.scope)}catch(b){qc(b)}Ac.Zj(a)}zc=!1};function P(a,b){this.ya=0;this.jg=void 0;this.Vc=this.ac=this.F=null;this.rd=this.ee=!1;if(a==Cc)this.lc(2,b);else try{var c=this;a[G](b,function(a){c.lc(2,a)},function(a){if(!(a instanceof Dc))try{if(a instanceof fa)throw a;throw fa("Promise rejected.");}catch(b){}c.lc(3,a)})}catch(d){this.lc(3,d)}}function Ec(){ra(this,null);this.context=this.jc=this.Mb=null;oa(this,null);this.Sd=!1}Ec[C].reset=function(){ra(this,null);this.context=this.jc=this.Mb=null;this.Sd=!1};
var Fc=new Rb(function(){return new Ec},function(a){a.reset()},100);function Gc(a,b,c){var d=Fc.get();d.Mb=a;d.jc=b;d.context=c;return d}function Cc(){}function Hc(a){return a instanceof P?a:new P(Cc,a)}function Ic(a){return new P(function(b,c){c(a)})}function Jc(a){return new P(function(b,c){var d=a[B],g=[];if(d)for(var k=function(a,c){d--;g[a]=c;0==d&&b(g)},l=function(a){c(a)},p=0,D;D=a[p];p++)Kc(D,Kb(k,p),l);else b(g)})}
function Lc(){var a,b,c=new P(function(c,g){a=c;b=g});return new Mc(c,a,b)}P[C].then=function(a,b,c){null!=a&&Qb(a,"opt_onFulfilled should be a function.");null!=b&&Qb(b,"opt_onRejected should be a function. Did you pass opt_context as the second argument instead of the third?");return this.Te(Eb(a)?a:null,Eb(b)?b:null,c)};P[C].then=P[C][E];P[C].$goog_Thenable=!0;K=P[C];
K.mk=function(a,b,c){null!=a&&Qb(a,"opt_onFulfilled should be a function.");null!=b&&Qb(b,"opt_onRejected should be a function. Did you pass opt_context as the second argument instead of the third?");this.Se(Gc(a||xb,b||null,c))};function Kc(a,b,c,d){a instanceof P?a.mk(b,c,d):a[E](b,c,d)}K.xg=function(a,b){return this.Te(null,a,b)};K.Se=function(a){this.ej()||2!=this.ya&&3!=this.ya||this.mg();this.Pj(a)};
K.Te=function(a,b,c){var d=Gc(null,null,null);ra(d,new P(function(g,k){d.Mb=a?function(b){try{var d=a[G](c,b);g(d)}catch(D){k(D)}}:g;d.jc=b?function(a){try{var d=b[G](c,a);!wb(d)&&a instanceof Dc?k(a):g(d)}catch(D){k(D)}}:k}));d[ab].F=this;this.Se(d);return d[ab]};K.Cg=function(a){O(1==this.ya);this.ya=0;this.lc(2,a)};K.Dg=function(a){O(1==this.ya);this.ya=0;this.lc(3,a)};
K.lc=function(a,b){if(0==this.ya){if(this==b)a=3,b=new TypeError("Promise cannot resolve to itself");else{var c;if(b)try{c=!!b.$goog_Thenable}catch(d){c=!1}else c=!1;if(c){this.ya=1;Kc(b,this.Cg,this.Dg,this);return}c=typeof b;if("object"==c&&null!=b||"function"==c)try{var g=b[E];if(Eb(g)){this.qk(b,g);return}}catch(k){a=3,b=k}}this.jg=b;this.ya=a;this.F=null;this.mg();3!=a||b instanceof Dc||Nc(this,b)}};
K.qk=function(a,b){function c(a){k||(k=!0,g.Dg(a))}function d(a){k||(k=!0,g.Cg(a))}this.ya=1;var g=this,k=!1;try{b[G](a,d,c)}catch(l){c(l)}};K.mg=function(){this.ee||(this.ee=!0,wc(this.ci,this))};K.ej=function(){return!!this.ac};K.Pj=function(a){O(null!=a.Mb);this.Vc?oa(this.Vc,a):this.ac=a;this.Vc=a};K.Ij=function(){var a=null;this.ac&&(a=this.ac,this.ac=a[Ua],oa(a,null));this.ac||(this.Vc=null);null!=a&&O(null!=a.Mb);return a};
K.ci=function(){for(var a=null;a=this.Ij();)this.bi(a,this.ya,this.jg);this.ee=!1};K.bi=function(a,b,c){3==b&&a.jc&&!a.Sd&&this.Wj();if(a[ab])a[ab].F=null,Oc(a,b,c);else try{a.Sd?a.Mb[G](a[Ba]):Oc(a,b,c)}catch(d){Pc[G](null,d)}Fc.put(a)};function Oc(a,b,c){2==b?a.Mb[G](a[Ba],c):a.jc&&a.jc[G](a[Ba],c)}K.Rg=sb();K.Wj=function(){var a;for(a=this;a&&a.rd;a=a.F)a.rd=!1};function Nc(a,b){a.rd=!0;wc(function(){a.rd&&(a.Rg(b),Pc[G](null,b))})}var Pc=qc;function Dc(a){Lb[G](this,a)}N(Dc,Lb);xa(Dc[C],"cancel");
function Mc(a,b,c){this.ra=a;this.resolve=b;this.reject=c};
function Qc(a,b){this.va=a;this.Ob=b||this.kf()}var Rc=0;K=Qc[C];K.id=J("va");K.Zg=tb("va");K.D=J("Ob");K.kf=function(){return{}};K.yg=J("Ob");K.Za=function(){return{id:this.va,value:this.yg()}};K.Hc=function(a){return"#"==a.substr(-1)?this.va:null};function Sc(a){return new Qc(a.id,a[z])}function Tc(a){return new Qc(Rc++,a||{})}function Uc(a){if(null==a)return"";a=new Uint8Array(a);for(var b="",c=0;c<a[B];++c)var d=a[c][t](16),b=b+(2>d[B]?"0"+d:d);return b};
function Vc(a){this.type=a}function Wc(a){Qc[G](this,-1,a)}N(Wc,Qc);
var Xc={};L("lf.TransactionType",Xc,void 0);Xc.READ_ONLY=0;Xc.READ_WRITE=1;

function Yc(a,b){this.Ta=a;this.zg=b;this.ba=Lc()}K=Yc[C];K.Gi=J("Ta");K.fa=function(){return(0==this.zg?Hc():this.uj())[E](M(function(){this.Ta.fa()},this))};K.uj=function(){this.vj();this.tj();return this.ba.ra};
K.vj=function(){var a=this.Ta.rf();a.H()[n](function(b){var c=this.Ta.ca().get(b),c=this.Z(c[h](),M(c.cc,c));b=a.get(b);var d=b.gd().c().map(function(a){return a.id()});0<d[B]&&c[m](d).xg(this.se,this);b=b.md().c().map(function(a){return a[1]})[Ia](b.fd().c());c.put(b).xg(this.se,this)},this)};K.tj=function(){this.Ta.Di()[n](function(a){var b=this.Z(a[h](),Sc),c;b.get([-1])[E](function(a){c=a;return b[m]([])})[E](function(){b.put(c);b.put(a.Za())},M(this.se,this))},this)};K.se=function(a){this.ba[cb](a)};function Zc(a,b,c,d){c=c||function(a,b){return a==b};d=d||function(b){return a[b]};for(var g=a[B],k=b[B],l=[],p=0;p<g+1;p++)l[p]=[],l[p][0]=0;for(var D=0;D<k+1;D++)l[0][D]=0;for(p=1;p<=g;p++)for(D=1;D<=k;D++)c(a[p-1],b[D-1])?l[p][D]=l[p-1][D-1]+1:l[p][D]=ea.max(l[p-1][D],l[p][D-1]);for(var Ja=[],p=g,D=k;0<p&&0<D;)c(a[p-1],b[D-1])?(Ja[rb](d(p-1,D-1)),p--,D--):l[p-1][D]>l[p][D-1]?p--:D--;return Ja}function $c(a){return Wb(arguments,function(a,c){return a+c},0)}
function ad(a){return $c[w](null,arguments)/arguments[B]}function bd(a){var b=arguments[B];if(2>b)return 0;var c=ad[w](null,arguments);return $c[w](null,Vb(arguments,function(a){return ea.pow(a-c,2)}))/(b-1)}function cd(a){return ea.sqrt(bd[w](null,arguments))};var dd="StopIteration"in vb?vb.StopIteration:{message:"StopIteration",stack:""};function ed(){}oa(ed[C],function(){throw dd;});ed[C].tb=function(){return this};function fd(a){if(a instanceof ed)return a;if("function"==typeof a.tb)return a.tb(!1);if(Cb(a)){var b=0,c=new ed;oa(c,function(){for(;;){if(b>=a[B])throw dd;if(b in a)return a[b++];b++}});return c}throw fa("Not implemented");}
function gd(a,b,c){if(Cb(a))try{Ub(a,b,c)}catch(d){if(d!==dd)throw d;}else{a=fd(a);try{for(;;)b[G](c,a[Ua](),void 0,a)}catch(g){if(g!==dd)throw g;}}}function hd(a){if(Xb(arguments,function(a){return!a[B]})||!arguments[B])return new ed;var b=new ed,c=arguments,d=hc(0,c[B]);oa(b,function(){if(d){for(var a=Vb(d,function(a,b){return c[b][a]}),b=d[B]-1;0<=b;b--){O(d);if(d[b]<c[b][B]-1){d[b]++;break}if(0==b){d=null;break}d[b]=0}return a}throw dd;});return b};function Q(a,b){this.f={};this.b=[];this.sb=this.U=0;var c=arguments[B];if(1<c){if(c%2)throw fa("Uneven number of arguments");for(var d=0;d<c;d+=2)this.set(arguments[d],arguments[d+1])}else a&&this[eb](a)}K=Q[C];K.Y=J("U");K.c=function(){this.uc();for(var a=[],b=0;b<this.b[B];b++)a[x](this.f[this.b[b]]);return a};K.H=function(){this.uc();return this.b[Ia]()};K.s=function(a){return id(this.f,a)};K.Zc=function(a){for(var b=0;b<this.b[B];b++){var c=this.b[b];if(id(this.f,c)&&this.f[c]==a)return!0}return!1};
K.yc=function(a,b){if(this===a)return!0;if(this.U!=a.Y())return!1;var c=b||jd;this.uc();for(var d,g=0;d=this.b[g];g++)if(!c(this.get(d),a.get(d)))return!1;return!0};function jd(a,b){return a===b}K.Ba=function(){return 0==this.U};la(K,function(){this.f={};ya(this.b,0);this.sb=this.U=0});ja(K,function(a){return id(this.f,a)?(delete this.f[a],this.U--,this.sb++,this.b[B]>2*this.U&&this.uc(),!0):!1});
K.uc=function(){if(this.U!=this.b[B]){for(var a=0,b=0;a<this.b[B];){var c=this.b[a];id(this.f,c)&&(this.b[b++]=c);a++}ya(this.b,b)}if(this.U!=this.b[B]){for(var d={},b=a=0;a<this.b[B];)c=this.b[a],id(d,c)||(this.b[b++]=c,d[c]=1),a++;ya(this.b,b)}};K.get=function(a,b){return id(this.f,a)?this.f[a]:b};K.set=function(a,b){id(this.f,a)||(this.U++,this.b[x](a),this.sb++);this.f[a]=b};K.addAll=function(a){var b;a instanceof Q?(b=a.H(),a=a.c()):(b=mc(a),a=lc(a));for(var c=0;c<b[B];c++)this.set(b[c],a[c])};
K.forEach=function(a,b){for(var c=this.H(),d=0;d<c[B];d++){var g=c[d],k=this.get(g);a[G](b,k,g,this)}};qa(K,function(){return new Q(this)});K.Hi=function(){return this.tb(!0)};K.Wi=function(){return this.tb(!1)};K.tb=function(a){this.uc();var b=0,c=this.sb,d=this,g=new ed;oa(g,function(){if(c!=d.sb)throw fa("The map has changed since the iterator was created");if(b>=d.b[B])throw dd;var g=d.b[b++];return a?g:d.f[g]});return g};function id(a,b){return ba[C][Wa][G](a,b)};
function kd(a){this.$j=a}f(kd[C],J("$j"));var ld=new kd("backstore"),md=new kd("cache"),nd=new kd("indexstore"),od=new kd("engine"),pd=new kd("runner"),qd=new kd("observerregistry"),rd=new kd("schema");
function sd(a){if("function"==typeof a.Y)a=a.Y();else if(Cb(a)||Db(a))a=a[B];else{var b=0,c;for(c in a)b++;a=b}return a}function td(a){if("function"==typeof a.c)return a.c();if(Db(a))return a[Va]("");if(Cb(a)){for(var b=[],c=a[B],d=0;d<c;d++)b[x](a[d]);return b}return lc(a)}
function ud(a,b,c){if("function"==typeof a[pb])return a[pb](b,c);if(Cb(a)||Db(a))return Yb(a,b,c);var d;if("function"==typeof a.H)d=a.H();else if("function"!=typeof a.c)if(Cb(a)||Db(a)){d=[];for(var g=a[B],k=0;k<g;k++)d[x](k)}else d=mc(a);else d=void 0;for(var g=td(a),k=g[B],l=0;l<k;l++)if(!b[G](c,g[l],d&&d[l],a))return!1;return!0};function R(a){this.f=new Q;a&&this[eb](a)}function vd(a){var b=typeof a;return"object"==b&&a||"function"==b?"o"+Fb(a):b.substr(0,1)+a}K=R[C];K.Y=function(){return this.f.Y()};K.add=function(a){this.f.set(vd(a),a)};K.addAll=function(a){a=td(a);for(var b=a[B],c=0;c<b;c++)this.add(a[c])};K.fg=function(a){a=td(a);for(var b=a[B],c=0;c<b;c++)this[m](a[c])};ja(K,function(a){return this.f[m](vd(a))});la(K,function(){this.f[q]()});K.Ba=function(){return this.f.Ba()};K.contains=function(a){return this.f.s(vd(a))};
K.Bh=function(a){return ud(a,this[v],this)};K.de=function(a){var b=this[Ya]();b.fg(a);return b};K.c=function(){return this.f.c()};qa(K,function(){return new R(this)});K.yc=function(a){return this.Y()==sd(a)&&this.nj(a)};
K.nj=function(a){var b=sd(a);if(this.Y()>b)return!1;!(a instanceof R)&&5<b&&(a=new R(a));return ud(this,function(b){var d=a;if("function"==typeof d[v])b=d[v](b);else if("function"==typeof d.Zc)b=d.Zc(b);else if(Cb(d)||Db(d))b=0<=Tb(d,b);else a:{for(var g in d)if(d[g]==b){b=!0;break a}b=!1}return b})};K.tb=function(){return this.f.tb(!1)};
function wd(a,b){this.va=a;this.Ob=b||{}}function xd(a){var b=new R;a[n](function(a){b.add(a>>9)});return b.c()}K=wd[C];K.ka=J("va");K.od=J("Ob");K.qg=function(a){a[n](function(a){this.Ob[a.id()]=a.Za()},this)};K.Vj=function(a){a[n](function(a){var c=this.Ob;a in c&&delete c[a]},this)};K.Za=function(){return{id:this.va,value:JSON.stringify(this.Ob)}};function yd(a){return new wd(a.id,JSON.parse(a[z]))};

function zd(a,b,c){this.O=a;this.Fb=b;this.kg=c}K=zd[C];K.get=function(a){return 0==a[B]?this.ie():this.Li(a)[E](M(function(b){return a.map(function(a){var d=b.get(a>>9);O(d,"Containing page is empty");return this.Fb(d.od()[a])},this)},this))};K.Li=function(a){var b=new Q,c=Lc();a=xd(a).map(function(a){return new P(function(c,k){var l;try{l=this.O.get(a)}catch(p){k(p);return}sa(l,k);za(l,M(function(a){a=yd(a[lb][Sa]);b.set(a.ka(),a);c()},this))},this)},this);Jc(a)[E](function(){c[mb](b)});return c.ra};
K.ie=function(){return new P(function(a,b){var c=[],d;try{d=this.O.openCursor()}catch(g){b(g);return}sa(d,b);za(d,M(function(){var b=d[Sa];if(b){var g=yd(b[z]).od(),p;for(p in g)c[x](this.Fb(g[p]));b.continue()}else a(c)},this))},this)};K.Pb=function(a){return new P(function(b,c){var d;try{d=a()}catch(g){c(g);return}za(d,b);sa(d,c)},this)};
K.put=function(a){if(0==a[B])return Hc();var b=new Q;a[n](function(a){var d;d=a.id()>>9;var g=b.get(d,null);null===g&&(g=this.kg(this.O[jb],d));g.qg([a]);b.set(d,g)},this);a=b.c().map(function(a){return this.Pb(M(function(){return this.O.put(a.Za())},this))},this);return Jc(a)};
ja(K,function(a){if(0==a[B])return this.Pb(M(function(){return this.O[q]()},this));var b=new Q;a[n](function(a){var d=a>>9,g=b.get(d,null);null===g&&(g=this.kg(this.O[jb],d));g.Vj([a]);b.set(d,g)},this);a=b.c().map(function(a){return this.Pb(M(function(){var b;a:{b=a.od();for(var g in b){b=!1;break a}b=!0}return b?this.O[ib](a.ka()):this.O.put(a.Za())},this))},this);return Jc(a)});function Ad(a,b,c){a=a.m(md);var d=[c<<9,(c+1<<9)-1];b=a.Pa(b,d[0],d[1]);c=new wd(c);c.qg(b);return c}
function Bd(a,b){return new wd(b)};
function Cd(){};
function Dd(a){this.oa=a.m(md);this.N=a.m(nd);this.B=a.m(rd)}Aa(Dd[C],function(a){a[n](function(a){this.sk(a);this.rk(a)},this)});Dd[C].rk=function(a){var b=a[h]();a.gd().c()[n](function(a){this.oa[m](b,[a.id()])},this);a.fd()[n](function(a){this.oa.set(b,[a])},this);a.md()[n](function(a){this.oa.set(b,[a[1]])},this)};Dd[C].sk=function(a){var b=this.B[u](a[h]());a.Bi()[n](function(a){this.Gg(b,a)},this)};
Dd[C].Gg=function(a,b){a.Fa().map(function(a){return this.N.get(a.j())},this)[Ia]([this.N.get(a.Hb())])[n](function(a){var d=null===b[1]?null:b[1].Hc(a[h]()),g=null===b[0]?null:b[0].Hc(a[h]());null===g&&null!==d?a.add(d,b[1].id()):null===g||null===d?null!==g&&null===d&&a[m](g,b[0].id()):0!=a.wc()[Ra](g,d)&&(a.add(d,b[1].id()),a[m](g,b[0].id()))})};
function S(a,b){xa(this,a);this.message=b};
function Ed(a){this.N=a.m(nd)}Ed[C].ji=function(a,b){var c=a.gc().ne();return null===c?null:this.ii(c,b)};Ed[C].ii=function(a,b){var c=a.j(),d=b.Hc(c),c=this.N.get(c).get(d);return 0==c[B]?null:c[0]};Ed[C].Yd=function(a,b){var c=a.gc().Ji();b[n](function(a){c[n](function(b){if(null===a.D()[b[h]()])throw new S("ConstraintError","Attempted to insert NULL value to non-nullable field "+b.j());},this)},this)};
function Fd(a){this.ab=new Q;this.Ga=new Q;this.eb=new Q;this.w=a}K=Fd[C];ia(K,J("w"));K.fd=J("ab");K.md=J("Ga");K.gd=J("eb");K.add=function(a){if(this.eb.s(a.id())){var b=[this.eb.get(a.id()),a];this.Ga.set(a.id(),b);this.eb[m](a.id())}else this.ab.set(a.id(),a)};K.modify=function(a){var b=a[0],c=a[1];O(b.id()==c.id(),"Row ID mismatch between old/new values.");b=b.id();this.ab.s(b)?this.ab.set(b,c):(this.Ga.s(b)&&(a=[this.Ga.get(a[0].id())[0],c]),this.Ga.set(b,a))};
va(K,function(a){if(this.ab.s(a.id()))this.ab[m](a.id());else if(this.Ga.s(a.id())){var b=this.Ga.get(a.id())[0];this.Ga[m](a.id());this.eb.set(a.id(),b)}else this.eb.set(a.id(),a)});K.Bi=function(){var a=[];this.ab.c()[n](function(b){a[x]([null,b])},this);this.Ga.c()[n](function(b){a[x](b)},this);this.eb.c()[n](function(b){a[x]([b,null])},this);return a};f(K,function(){return"["+this.ab.H()[t]()+"], ["+this.Ga.H()[t]()+"], ["+this.eb.H()[t]()+"]"});
K.Pi=function(){var a=new Fd(this.w);this.ab.c()[n](function(b){a[ib](b)},this);this.eb.c()[n](function(b){a.add(b)},this);this.Ga.c()[n](function(b){a.modify([b[1],b[0]])},this);return a};K.Ba=function(){return this.ab.Ba()&&this.eb.Ba()&&this.Ga.Ba()};
function Gd(a,b){this.Ma=new Q;b[n](function(a){this.Ma.set(a[h](),a)},this);this.oa=a.m(md);this.N=a.m(nd);this.$c=new Ed(a);this.td=new Dd(a);this.Fe=this.Md=!1;this.Bb=new Q}K=Gd[C];K.rf=J("Bb");K.Di=function(){var a=[];this.Bb.H().map(function(a){return this.Ma.get(a)},this)[n](function(b){b.Qb()&&(b.Fa()[n](function(b){a[x](this.N.get(b.j()))},this),a[x](this.N.get(b[h]()+".#")))},this);return a};K.ca=J("Ma");
K.Ei=function(){var a=[];this.Ma.c()[n](function(b){b.Qb()&&(b.Fa()[n](function(b){a[x](b.j())}),a[x](b[h]()+".#"))});return a};K.ob=function(a,b){this.sc();this.Wc(a);this.$c.Yd(a,b);for(var c=0;c<b[B];c++)this.vd(a,null,b[c])};
K.vd=function(a,b,c){var d=a[h](),g=this.Bb.get(d,null)||new Fd(d);this.Bb.set(d,g);var k=[b,c];try{this.td.Gg(a,k)}catch(l){throw this.Fe=!0,l;}null===b&&null!==c?(this.oa.set(d,[c]),g.add(c)):null!==b&&null!==c?(this.oa.set(d,[c]),g.modify(k)):null!==b&&null===c&&(this.oa[m](d,[b.id()]),g[ib](b))};Aa(K,function(a,b){this.sc();this.Wc(a);this.$c.Yd(a,b);for(var c=0;c<b[B];c++){var d=b[c],g=this.oa.get([d.id()])[0];this.vd(a,g,d)}});
K.ve=function(a,b){this.sc();this.Wc(a);this.$c.Yd(a,b);for(var c=0;c<b[B];c++){var d=b[c],g=null,k=this.$c.ji(a,d);null!=k&&(g=this.oa.get([k])[0],d.Zg(k));this.vd(a,g,d)}};ja(K,function(a,b){this.sc();this.Wc(a);for(var c=0;c<b[B];c++)this.vd(a,b[c],null)});K.fa=function(){this.sc();this.Md=!0};K.sc=function(){O(!this.Fe,"Attemptted to use journal that needs to be rolled back.");O(!this.Md,"Attemptted to commit a terminated journal.")};
K.yb=function(){O(!this.Md,"Attempted to rollback a terminated journal.");var a=this.Bb.c().map(function(a){return a.Pi()},this);this.td[qb](a);this.Md=!0;this.Fe=!1};K.Wc=function(a){if(!this.Ma.s(a[h]()))throw new S("ScopeError",a[h]()+" is not in the journal's scope.");};
var Hd={};L("lf.Order",Hd,void 0);Hd.DESC=0;Hd.ASC=1;
function Id(a,b,c,d){this.g=a;this.o=b;this.$=null===this.g?!1:c;this.ga=null===this.o?!1:d}K=Id[C];f(K,function(){return(this.$?"(":"[")+(null===this.g?"unbound":this.g)+", "+(null===this.o?"unbound":this.o)+(this.ga?")":"]")});K.xh=function(){if(null===this.g&&null===this.o)return[];var a=null,b=null;null===this.g||(a=new Id(null,this.g,!1,!this.$));null===this.o||(b=new Id(this.o,null,!this.ga,!1));return[a,b][Ca](function(a){return null!==a})};
K.reverse=function(){return new Id(this.o,this.g,this.ga,this.$)};K.Yf=function(a){var b=Jd(this.g,a.g,!0,this.$,a.$);if(0==b)return!0;var c=-1==b?this:a;a=1==b?this:a;return null===c.o||c.o>a.g||c.o==a.g&&!c.ga&&!a.$};function Kd(){return new Id(null,null,!1,!1)}K.contains=function(a){var b=null===this.o||a<this.o||a==this.o&&!this.ga;return(null===this.g||a>this.g||a==this.g&&!this.$)&&b};K.yc=function(a){return this.g==a.g&&this.$==a.$&&this.o==a.o&&this.ga==a.ga};
function Jd(a,b,c,d,g){function k(a){return c?a:1==a?-1:1}d=d||!1;g=g||!1;return null===a?null===b?(d?!g:g)?d?k(1):k(-1):0:k(-1):null===b?k(1):a<b?-1:a==b?(d?!g:g)?d?k(1):k(-1):0:1}function Ld(a,b){var c=Jd(a.g,b.g,!0,a.$,b.$);0==c&&(c=Jd(a.o,b.o,!1,a.ga,b.ga));return c};
function Md(a,b){this.entries=a;this.I=new R(b);this.Cb=null}K=Md[C];K.kj=function(a){return this.I.yc(a.I)};function Nd(a,b){O(a.kj(b),"Intersection/union operations only apply to compatible relations.")}K.W=function(){return this.I.c()};K.xe=function(){return 1<this.I.Y()};K.le=function(){return this[F].map(function(a){return a.ta.D()})};K.Ri=function(){return this[F].map(function(a){return a.ta.id()})};K.ak=function(a,b){null===this.Cb&&(this.Cb=new Q);this.Cb.set(a.j(),b)};
K.fc=function(a){O(null!==this.Cb,"getAggregationResult called before any results have been calculated.");var b=this.Cb.get(a.j(),void 0);O(wb(b),"Could not find result for "+a.j());return b};K.cj=function(a){return null!==this.Cb&&this.Cb.s(a.j())};var Od=null;function Pd(){null===Od&&(Od=new Md([],[]));return Od}
function Qd(a){if(0==a[B])return Pd();for(var b=a[db](function(b,c){Nd(a[0],c);return b+c[F][B]},0),c=e(b),d=0,b=a.map(function(a){var b=new Q;a[F][n](function(a){c[d++]=a;b.set(a.id,a)});return b}),g=new Q,k=0;k<c[B];k++)b[pb](function(a){return a.s(c[k].id)})&&g.set(c[k].id,c[k]);return new Md(g.c(),a[0].I.c())}function Rd(a){if(0==a[B])return Pd();var b=new Q;a[n](function(c){Nd(a[0],c);c[F][n](function(a){b.set(a.id,a)})});return new Md(b.c(),a[0].I.c())}
function Sd(a,b){var c=1<b[B],d=a.map(function(a){return new Td(a,c)});return new Md(d,b)}function Td(a,b){this.ta=a;this.id=Ud++;this.ye=b}var Ud=0;Td[C].M=function(a){var b=a.Oa();return null!==b&&this.ta.D()[Wa](b)?this.ta.D()[b]:this.ye?this.ta.D()[a.Z().Aa()][a[h]()]:this.ta.D()[a[h]()]};Td[C].Me=function(a,b){var c=a.Oa();if(null!=c)this.ta.D()[c]=b;else if(this.ye){var c=a.Z().Aa(),d=this.ta.D()[c];null==d&&(d={},this.ta.D()[c]=d);d[a[h]()]=b}else this.ta.D()[a[h]()]=b};
function Vd(a,b,c,d){function g(a,b){if(a.ye){var c=a.ta.D(),d;for(d in c)k[d]=c[d]}else O(!k[Wa](b[0]),"Attempted to join table with itself, without using table alias, or same alias "+b[0]+"is reused for multiple tables."),k[b[0]]=a.ta.D()}var k={};g(a,b);g(c,d);a=new Qc(-1,k);return new Td(a,!0)};
L("lf.bind",function(a){return new Wd(a)},void 0);function Wd(a){this.wa=a}L("lf.Binder",Wd,void 0);Wd[C].mb=J("wa");
var Xd={};L("lf.Type",Xd,void 0);Xd.ARRAY_BUFFER=0;Xd.BOOLEAN=1;Xd.DATE_TIME=2;Xd.INTEGER=3;Xd.NUMBER=4;Xd.STRING=5;Xd.OBJECT=6;var Yd={0:new ArrayBuffer(0),1:!1,2:ba.freeze(new Date(0)),3:0,4:0,5:"",6:ba.freeze({})};L("lf.type.DEFAULT_VALUES",Yd,void 0);
function Zd(){var a=$d();this.Uh=new Q(1,ae(),2,be(),4,a,3,a,5,ce())}yb(Zd);Zd[C].je=function(a,b){var c=this.Uh.get(a,null);O(null!==c,"Could not find evaluation map for "+a);c=c.get(b,null);O(null!==c,"Could not find evaluator for "+a+", "+b);return c};
function $d(){return new Q("between",function(a,b){return a>=b[0]&&a<=b[1]},"eq",function(a,b){return a==b},"gte",function(a,b){return a>=b},"gt",function(a,b){return a>b},"in",function(a,b){return-1!=b[A](a)},"lte",function(a,b){return a<=b},"lt",function(a,b){return a<b},"neq",function(a,b){return a!=b})}
function ce(){return new Q("between",function(a,b){return a>=b[0]&&a<=b[1]},"eq",function(a,b){return a==b},"gte",function(a,b){return a>=b},"gt",function(a,b){return a>b},"in",function(a,b){return-1!=b[A](a)},"lte",function(a,b){return a<=b},"lt",function(a,b){return a<b},"match",function(a,b){return(new RegExp(b)).test(a)},"neq",function(a,b){return a!=b})}
function be(){return new Q("between",function(a,b){return a[Na]()>=b[0][Na]()&&a[Na]()<=b[1][Na]()},"eq",function(a,b){return(null===a?-1:a[Na]())==(null===b?-1:b[Na]())},"gte",function(a,b){return a[Na]()>=b[Na]()},"gt",function(a,b){return a[Na]()>b[Na]()},"in",function(a,b){return b[nb](function(b){return b[Na]()==a[Na]()})},"lte",function(a,b){return a[Na]()<=b[Na]()},"lt",function(a,b){return a[Na]()<b[Na]()},"neq",function(a,b){return(null===a?-1:a[Na]())!=(null===b?-1:b[Na]())})}
function ae(){return new Q("eq",function(a,b){return a==b},"neq",function(a,b){return a!=b})};function de(a,b){this.Lf=a;this.Hg=b}de[C].getKey=J("Lf");de[C].Vi=J("Hg");qa(de[C],function(){return new de(this.Lf,this.Hg)});function ee(a,b){de[G](this,a,b);this.i=this.F=null}N(ee,de);var fe=[];K=ee[C];qa(K,function(){return new ee(this.getKey(),this.Vi())});K.getParent=J("F");K.Ff=function(){return!this.ua()};K.aa=function(){return this.i||fe};K.lb=function(a){return this.aa()[a]||null};K.ua=function(){return this.aa()[B]};K.Ci=function(){for(var a=0,b=this;b[Ea]();)a++,b=b[Ea]();return a};K.Gb=function(){for(var a=this;a[Ea]();)a=a[Ea]();return a};K.contains=function(a){do a=a[Ea]();while(a&&a!=this);return Boolean(a)};
K.nc=function(a,b){if(!1!==a[G](b,this))for(var c=this.aa(),d=0;d<c[B];d++)c[d].nc(a,b)};K.og=tb("F");K.ia=function(a){this.pc(a,this.i?this.i[B]:0)};K.pc=function(a,b){O(!a[Ea]());a.og(this);this.i=this.i||[];O(0<=b&&b<=this.i[B]);cc(this.i,b,0,a)};K.Hd=function(a){var b=this.i&&this.i[a];return b?(b.og(null),Zb(this.i,a),0==this.i[B]&&(this.i=null),b):null};K.removeChild=function(a){return this.Hd(Tb(this.aa(),a))};

function ge(){ee[G](this,"","");this.va=he++}N(ge,ee);var he=0;ge[C].ka=J("va");ge[C].Ne=tb("va");
function ie(a,b,c){ge[G](this);this.K=a;ta(this,b);this.V=c;this.cd=Zd.ke().je(this.K.da(),this.V);this.Sa=!1;this.$b=b}N(ie,ge);K=ie[C];K.Db=function(){var a=new ie(this.K,this[z],this.V);a.bk(this.$b);a.Kd(this.Sa);a.Ne(this.ka());return a};K.vb=function(a){return null!=a?(a[x](this.K),a):[this.K]};K.Kd=tb("Sa");K.bk=tb("$b");
K.ff=function(){var a=!1;this[z]instanceof Wd||(a="array"==zb(this[z])?!this[z][nb](function(a){return a instanceof Wd}):!0);if(!a)throw new S("SyntaxError","Value is not bounded");};K.eval=function(a){this.ff();if("in"==this.V)return this.Ph(a);var b=a[F][Ca](function(a){return this.cd(a.M(this.K),this[z])!=this.Sa},this);return new Md(b,a.W())};
ma(K,function(a){function b(b){if(a[B]<=b)throw new S("SyntaxError","Cannot bind to given array: out of range.");}if(this.$b instanceof Wd){var c=this.$b.mb();b(c);ta(this,a[c])}else"array"==zb(this.$b)&&ta(this,this.$b.map(function(c){return c instanceof Wd?(b(c.mb()),a[c.mb()]):c}))});
K.Ph=function(a){O("in"==this.V,"ValuePredicate#evalAsIn_() called for wrong predicate type.");var b=new R(this[z]),c=M(function(a){return b[v](a)!=this.Sa},this),d=a[F][Ca](function(a){return c(a.M(this.K))},this);return new Md(d,a.W())};f(K,function(){return"value_pred("+this.K.j()+" "+this.V+(this.Sa?"(complement)":"")+" "+this[z]+")"});K.Ef=function(){this.ff();return null!==this[z]&&("between"==this.V||"eq"==this.V||"gt"==this.V||"gte"==this.V||"lt"==this.V||"lte"==this.V)};
K.nk=function(){O(this.Ef(),"Could not convert predicate to key range.");var a=null;"between"==this.V?a=new Id(this[z][0],this[z][1],!1,!1):"eq"==this.V?(a=this[z],a=new Id(a,a,!1,!1)):a="gte"==this.V?new Id(this[z],null,!1,!1):"gt"==this.V?new Id(this[z],null,!0,!1):"lte"==this.V?new Id(null,this[z],!1,!1):new Id(null,this[z],!1,!0);return this.Sa?a.xh():[a]};
function je(){this.vc=this.qa=null}je[C].pd=function(a){null===this.qa&&null!=this.A&&(this.qa=ke(this.A));a=this.qa.get(a,null);O(null!==a);return a};function ke(a){var b=new Q;a.nc(function(a){b.set(a.ka(),a)});return b}je[C].Xc=function(a){a.A&&(this.A=a.A.Db());this.vc=a};ma(je[C],function(){O(null==this.vc);return this});je[C].Vd=function(a){var b=this.A;null!=b&&b.nc(function(b){b instanceof ie&&b[r](a)})};
function le(){je[G](this)}N(le,je);function ne(a){var b="";a[n](function(c,d){b+=c.K.j()+" ";b+=1==c.pb?"ASC":"DESC";d<a[B]-1&&(b+=", ")});return b}qa(le[C],function(){var a=new le;a.Xc(this);this.h&&(a.h=this.h[y]());this.g&&(a.g=this.g[y]());a.na=this.na;a.ma=this.ma;this.J&&(a.J=this.J[y]());this.la&&(a.la=this.la[y]());this.Lb&&(a.Lb=this.Lb);this.Wb&&(a.Wb=this.Wb);return a});
ma(le[C],function(a){le.$a[r][G](this,a);null!=this.Lb&&(this.na=a[this.Lb.mb()]);null!=this.Wb&&(this.ma=a[this.Wb.mb()]);this.Vd(a);return this});
function oe(a){this.Ea=a}oe[C].Gb=J("Ea");oe[C].nf=ub("plan description");oe[C].ca=function(){function a(c){var d=c.ca();d&&b.add(d);c.aa()[n](function(b){a(b)})}var b=new R;a(this.Ea);return b.c()};function pe(a){var b=new R;a[n](function(a){b[eb](a.ca())});return b};

function qe(a,b){this.global=a;this.ub=a.m(ld);this.Ed=b.map(function(a){return a[Ba]});this.$f=b.map(function(a){return a.Ge});this.gf=pe(this.$f);this.Ag=this.Lh();this.Sb=Lc()}K=qe[C];K.Lh=function(){return this.Ed[nb](function(a){return!(a instanceof le)})?1:0};
ha(K,function(){var a=new Gd(this[Oa],this.gf.c()),b=[],c=this.$f[y](),d=M(function(){var g=c[Fa]();if(g){var k=this.Ed[b[B]];return g.Gb()[Ga](a,k)[E](function(a){b[x](a[0]);return d()})}return Hc()},this);return d()[E](M(function(){return this.ub.Eb(this.Ag,a).fa()},this))[E](M(function(){this.Ee(b);return b},this),M(function(b){a.yb();throw b;},this))});K.da=J("Ag");K.ca=J("gf");K.Cc=J("Sb");K.ka=function(){return Fb(this)};K.Ee=sb();
function re(a,b){qe[G](this,a,b);this.wb=a.m(qd)}N(re,qe);ua(re[C],ub(0));re[C].Ee=function(a){this.Ed[n](function(b,c){this.wb.Fg(b,a[c])},this)};
function se(a,b){this.l=a;this.wb=a.m(qd);this.La=a.m(pd);this.td=new Dd(a);this.Bb=b;var c=a.m(rd),d=this.Bb.map(function(a){return c[u](a[h]())});this.Ma=new R(d);this.Sb=Lc()}K=se[C];ha(K,function(){this.td[qb](this.Bb);this.Oc();return Hc()});K.da=ub(1);K.ca=J("Ma");K.Cc=J("Sb");K.ka=function(){return Fb(this)};ua(K,ub(1));K.Oc=function(){var a=this.wb.qe(this.Ma.c());0!=a[B]&&(a=new re(this.l,a),this.La.Ub(a))};
function te(a){this.l=a;this.ub=a.m(ld);this.La=a.m(pd)}te[C].jk=function(){this.ub.subscribe(this.De[r](this))};te[C].De=function(a){a=new se(this.l,a);this.La.Ub(a)};

function ue(a,b,c){Yc[G](this,c,b);this.u=a}N(ue,Yc);ue[C].Z=function(a){return this.u.Dc(a)};
ue[C].fa=function(){ue.$a.fa[G](this);var a=this.Gi().rf();if(0==a.Y())this.ba[mb]();else{var b=this.u.Qi()+1;this.u.pg(b);var c={"@rev":{R:b}};a[n](function(a){var g=this.u.wf(a[h]());a.fd()[n](function(a,d){c[d]={R:b,T:g,P:a.D()}});a.md()[n](function(a,d){c[d]={R:b,T:g,P:a[1].D()}});a.gd()[n](function(a,b){c[b]=null})},this);this.u.Oi()[qb](c,function(c){if(null===c)this.ba[mb]();else this.u.pg(b-1),c=a.c().map(function(a){return this.u.eg(a[h]())},this),Jc(c)[E](this.ba[cb][r](this.ba),this.ba[cb][r](this.ba))}[r](this))}return this.ba.ra};
function ve(){this.kb=new Q}K=ve[C];K.pe=function(a){if(0==a[B])return this.kb.c();var b=[];a[n](function(a){a=this.kb.get(a,null);null===a||b[x](a)},this);return b};K.getData=J("kb");K.get=function(a){return Hc(this.pe(a))};K.He=function(a){a[n](function(a){this.kb.set(a.id(),a)},this)};K.put=function(a){this.He(a);return Hc()};K.gg=function(a){0==a[B]||a[B]==this.kb.Y()?this.kb[q]():a[n](function(a){this.kb[m](a)},this)};ja(K,function(a){this.gg(a);return Hc()});
K.Ii=function(){return this.kb.Ba()?0:this.kb.H()[db](function(a,b){return a>b?a:b},0)};
function we(a,b){this.B=a;this.Qg=b;this.Nc=new Q;this.Tb=-1;this.I=new Q;this.Ld=new Q;this.Wd=null}K=we[C];K.Qi=J("Tb");K.pg=tb("Tb");K.re=function(a){var b=Lc(),c=this.u;a[B]&&(c=this.u[ab](a));c.once("value",function(a){b[mb](a.val())},function(a){b[cb](a)});return b.ra};K.dk=function(a){var b=Lc();this.u.set(a,function(a){a?b[cb](a):b[mb]()});return b.ra};
K.Qa=function(){this.u=this.Qg[ab](this.B[jb]());return this.re("@db/version")[E](function(a){if(null===a)return this.dk(this.Ch());if(a==this.B[Da]())return this.re("@rev/R")[E](function(a){this.Tb=a;return this.re("@table")}[r](this))[E](function(a){for(var c in a)this.Ld.set(c,a[c]);a=this.B.ib().map(function(a){return this.eg(a[h]())},this);return Jc(a)}[r](this))[E](function(){this.hj();this.Qf();return Hc()}[r](this))}[r](this))};
K.Qf=function(){this.u.off();this.u.on("child_removed",this.Bj[r](this));this.Xd&&(this.Xd.off(),this.Nc[q]());this.Xd=this.u.orderByChild("R").startAt(this.Tb+1);this.Xd.on("value",this.De[r](this))};K.hj=function(){Rc=this.I.c().map(function(a){return a.Ii()})[db](function(a,b){return a>b?a:b},0)+1};K.Bj=function(a){var b=a.val(),c=this.Nc.get(b.T,null);null===c&&(c=new R,this.Nc.set(b.T,c));c.add(ga(a.key(),10))};
K.De=function(a){var b=a[ab]("@rev/R").val();null!=b&&b!=this.Tb&&(this.Tb=b,a=this.oi(a),a[n](function(a){var b=this.I.get(a[h]()),g=a.gd().H();g[B]&&b.gg(g);var k=a.fd().c();a.md()[n](function(a){k[x](a[1])});b.He(k)},this),a[B]&&this.Kc(a),this.Qf())};
K.oi=function(a){var b=new R,c=new Q;this.Ld[n](function(a,g){var k=this.I.get(g),l=new Fd(g);if(this.Nc.s(a)){var p=this.Nc.get(a).c();b[eb](p);k.pe(p)[n](function(a){l[ib](a)})}c.set(a,l)}[r](this));a[n](function(a){if("@rev"!=a.key()){var g=ga(a.key(),10);if(!b[v](g)){a=a.val();var k=c.get(a.T),l=this.I.get(k[h]());l.getData().s(g)?k.modify([l.pe([g])[0],new Qc(g,a.P)]):k.add(new Qc(g,a.P))}}}[r](this));return c.c()[Ca](function(a){return!a.Ba()})};
K.eg=function(a){var b=Lc(),c=this.wf(a);this.u.orderByChild("T").equalTo(c).once("value",function(c){var g=new ve,k=[];c[n](function(a){k[x](new Qc(ga(a.key(),10),a.val().P))});g.He(k);this.I.set(a,g);b[mb]()}[r](this));return b.ra};K.wf=function(a){return this.Ld.get(a)};K.Ch=function(){var a={};a["@db"]={version:this.B[Da]()};a["@rev"]={R:1};this.Tb=1;a["@table"]={};this.B.ib()[n](function(b,c){var d=b[h]();a["@table"][d]=c;this.I.set(d,new ve);this.Ld.set(d,c)},this);return a};
K.Eb=function(a,b){return new ue(this,a,b)};K.Dc=function(a){var b=this.I.get(a,null);if(null!==b)return b;throw new S("DataError","Table "+a+" not found");};K.Oi=J("u");pa(K,sb());wa(K,tb("Wd"));K.Kc=function(a){null!=this.Wd&&this.Wd(a)};

function xe(a,b,c,d){this.u=b;this.jb=c;this.sb=a;this.df=d}function ye(a){var b=null;return b=a instanceof ArrayBuffer?Uc(a):a instanceof Date?a[Na]():a}xe[C].bd=function(a){var b={};jc(a,M(function(a,d){b[d]=ye(a)},this));return Tc(b)};
function ze(a,b){this.O=a;this.Fb=b}K=ze[C];K.get=function(a){if(0==a[B])return this.ie();a=a.map(function(a){return new P(function(c,d){var g;try{g=this.O.get(a)}catch(k){d(k);return}sa(g,d);za(g,M(function(a){c(this.Fb(a[lb][Sa]))},this))},this)},this);return Jc(a)};K.ie=function(){return new P(function(a,b){var c=[],d;try{d=this.O.openCursor()}catch(g){b(g);return}sa(d,b);za(d,M(function(){var b=d[Sa];b?(c[x](this.Fb(b[z])),b.continue()):a(c)},this))},this)};
K.Pb=function(a){return new P(function(b,c){var d;try{d=a()}catch(g){c(g);return}za(d,b);sa(d,c)},this)};K.put=function(a){if(0==a[B])return Hc();a=a.map(function(a){return this.Pb(M(function(){return this.O.put(a.Za())},this))},this);return Jc(a)};
ja(K,function(a){return new P(function(b,c){var d=this.O.count();za(d,M(function(d){if(0==a[B]||d[lb][Sa]==a[B])return this.Pb(M(function(){return this.O[q]()},this))[E](b,c);d=a.map(function(a){return this.Pb(M(function(){return this.O[ib](a)},this))},this);Jc(d)[E](b,c)},this));sa(d,c)},this)});
function Ae(a,b,c,d,g){Yc[G](this,c,d);this.l=a;this.jb=b;this.df=g;this.jb.oncomplete=M(this.ba[mb],this.ba);this.jb.onabort=M(this.ba[cb],this.ba)}N(Ae,Yc);Ae[C].Z=function(a,b,c){return this.df?(c=null!=c?c:0,a=this.jb[gb](a),new zd(a,b,0==c?Kb(Ad,this.l):Bd)):new ze(this.jb[gb](a),b)};
function Be(a,b){this.l=a;this.B=b;this.Uc=b.ag().Nh||!1}K=Be[C];
K.Qa=function(a){var b=aa.indexedDB||aa.mozIndexedDB||aa.webkitIndexedDB||aa.msIndexedDB;if(null==b)throw new S("NotSupportedError","IndexedDB not supported by platform.");var c=a||function(){return Hc()};return new P(function(a,g){var k;try{k=b.open(this.B[jb](),this.B[Da]())}catch(l){g(l);return}sa(k,g);k.onupgradeneeded=M(function(a){this.Ej(c,a)[E](sb(),g)},this);za(k,M(function(b){this.u=b[lb][Sa];this.Le()[E](M(function(b){Rc=b+1;a(this.u)},this))},this))},this)};
K.Ej=function(a,b){var c=b[lb][Sa],d=b[lb][$a],g=new xe(b.oldVersion,c,d,this.Uc);this.Uj(c,d);this.Gh(c,d);return a(g)};K.Uj=function(a){for(var b=[],c=0;c<a[Ka][B];++c){var d=a[Ka][fb](c);-1!=d[A](".")&&b[x](d)}b[n](function(b){try{a.deleteObjectStore(b)}catch(c){}})};K.Gh=function(a,b){this.B.ib()[n](Kb(this.Dh,a,b),this)};K.Dh=function(a,b,c){a[Ka][v](c[h]())||a.createObjectStore(c[h](),{keyPath:"id"});c.Qb()&&(c.Fa()[n](function(c){this.xc(a,b,c.j(),"btree")},this),this.xc(a,b,c.Hb(),"rowid"))};
K.xc=function(a,b,c,d){a[Ka][v](c)||(a.createObjectStore(c,{keyPath:"id"}),a=b[gb](c),(this.Uc?new zd(a,Sc,Bd):new ze(a,Sc)).put([new Wc(new Vc(d))]))};K.Eb=function(a,b){var c=b.ca().c().map(function(a){return a[h]()});b.Ei()[n](function(a){c[x](a)});var d=this.u[$a](c,0==a?"readonly":"readwrite");return new Ae(this.l,d,b,a,this.Uc)};
K.Le=function(a){function b(){if(0==c[B])return Hc();var a=c[Fa]();return l(a)[E](b)}var c=this.B.ib().map(function(a){return a[h]()}),d=this.u,g=0,k=M(function(a){return this.Uc?(a=yd(a[z]),mc(a.od())[db](function(a,b){return ea.max(a,b)},0)):a.key},this),l=M(function(b){return new P(function(c,l){var me;try{me=(a||d[$a]([b]))[gb](b).openCursor(null,"prev")}catch(Mg){l(Mg);return}za(me,function(a){(a=a[lb][Sa])&&(g=ea.max(g,k(a)));c(g)});sa(me,function(){c(g)})},this)},this);return new P(function(a){b()[E](function(){a(g)})})};
pa(K,function(){this.u[Xa]()});K.Dc=function(){throw new S("SyntaxError","IndexedDB tables needs to be acquired from transactions");};wa(K,sb());K.Kc=sb();



function Ce(a,b,c){Yc[G](this,c,b);this.O=a;0==b&&this.ba[mb]()}N(Ce,Yc);Ce[C].Z=function(a){return this.O.Dc(a)};Ce[C].fa=function(){Ce.$a.fa[G](this);this.ba[mb]();return this.ba.ra};
function De(a){this.B=a;this.I=new Q}K=De[C];K.Qa=function(){this.B.ib()[n](this.ij,this);return Hc()};K.Dc=function(a){var b=this.I.get(a,null);if(null===b)throw new S("DataError","Table "+a+" does not exist.");return b};K.Eb=function(a,b){return new Ce(this,a,b)};K.hf=function(a){if(!this.I.s(a)){var b=new ve;this.I.set(a,b);return b}return null};K.ij=function(a){this.hf(a[h]());a.Qb()&&(a.Fa()[n](function(a){this.xc(a.j(),"btree")},this),this.xc(a.Hb(),"rowid"))};
K.xc=function(a,b){var c=this.hf(a);null===c||c.put([new Wc(new Vc(b))])};pa(K,sb());wa(K,sb());K.Kc=sb();
function Ee(a){De[G](this,a);this.zd=null}N(Ee,De);wa(Ee[C],function(a){null===this.zd&&(this.zd=a)});Ee[C].Kc=function(a){null===this.zd||this.zd(a)};
function Fe(a,b,c){this.jb=a;this.w=b;this.Fb=c}Fe[C].get=function(a){var b=this.Fb;this.jb.gb("SELECT id, value FROM "+this.w+" "+(0==a[B]?"":"WHERE id IN ("+a[I](",")+")"),[],function(a){for(var d=a[bb][B],g=e(d),k=0;k<d;++k)g[k]=b({id:a[bb][fb](k).id,value:JSON.parse(a[bb][fb](k)[z])});return g});return this.jb.fa()};
Fe[C].put=function(a){if(0==a[B])return Hc();var b="INSERT OR REPLACE INTO "+this.w+"(id, value) VALUES (?, ?)";a[n](function(a){this.jb.gb(b,[a.id(),JSON.stringify(a.D())])},this);return Hc()};ja(Fe[C],function(a){this.jb.gb("DELETE FROM "+this.w+" "+(0==a[B]?"":"WHERE id IN ("+a[I](",")+")"),[]);return Hc()});
function Ge(a,b,c){Yc[G](this,b,c);this.u=a;this.I=new Q;this.$d=[]}N(Ge,Yc);Ge[C].Z=function(a,b){var c=this.I.get(a,null);null===c&&(c=new Fe(this,a,b),this.I.set(a,c));return c};Ge[C].gb=function(a,b,c){this.$d[x]({kk:a,Gj:b,transform:c})};
Ge[C].fa=function(){Ge.$a.fa[G](this);var a,b,c=this.ba[cb][r](this.ba),d=function(a,b){this.ba[cb](b)}[r](this),g=M(function(c,l){a=l;if(this.$d[B]){var p=this.$d[Fa]();b=p.transform;c.executeSql(p.kk,p.Gj,g,d)}else p=a,null!=b&&null!=a&&(p=b(a)),this.ba[mb](p)},this);0==this.zg?this.u.readTransaction(g,c):this.u[$a](g,c);return this.ba.ra};
function He(a,b,c){this.u=c;this.l=a;this.sb=b}He[C].bd=function(a){var b={},c;for(c in a)b[c]=ye(a[c]);return Tc(b)};function Ie(a){a.gb('SELECT tbl_name FROM sqlite_master WHERE type="table"',[],function(a){for(var c=e(a[bb][B]),d=0;d<c[B];++d)c[d]=a[bb][fb](d).tbl_name;return c})};
function Je(a,b,c){this.l=a;this.B=b;this.gk=c||4194304}K=Je[C];K.hd=function(){return new Gd(this.l,[])};K.Qa=function(a){if(null==aa.openDatabase)throw new S("NotSupportedError","WebSql not supported by platform.");var b=a||function(){return Hc()};return new P(M(function(a,d){try{var g=aa.openDatabase(this.B[jb](),"",this.B[jb](),this.gk);if(null!=g)this.u=g,this.th(b)[E](a,d);else throw new S("NotSupportedError","Unable to open database.");}catch(k){d(k)}},this))};
K.th=function(a){var b=Lc(),c=new Ge(this.u,this.hd(),1);c.gb("CREATE TABLE IF NOT EXISTS __lf_ver(id INTEGER PRIMARY KEY, v INTEGER)",[]);c.gb("SELECT v FROM __lf_ver WHERE id = 0",[]);c.fa()[E](M(function(c){var g=0;c[bb][B]&&(g=c[bb][fb](0).v);g<this.B[Da]()?this.Fj(a,g)[E](b[mb][r](b)):g>this.B[Da]()?b[cb](new S("DataError","Attempt to open a newer database with old code")):b[mb]()},this));return b.ra};
K.Eb=function(a,b){if(null!=this.u)return new Ge(this.u,b,a);throw new S("DataError","Attempt to create transaction from uninitialized DB");};pa(K,sb());K.Dc=function(){throw new S("SyntaxError","WebSQL tables needs to be acquired from transactions");};K.Tf=function(){throw new S("NotSupportedError","WebSQL does not support change notification");};wa(K,function(){this.Tf()});K.Kc=function(){this.Tf()};
K.Fj=function(a,b){var c=Lc();this.Jj()[E](M(function(){a(new He(this.l,b,this.u))[E](M(function(){return this.Le()},this))[E](c[mb][r](c))},this),c[cb][r](c));return c.ra};
K.Jj=function(){var a=this.B.ib(),b=new Ge(this.u,this.hd(),1),c=new Ge(this.u,this.hd(),1);b.gb("INSERT OR REPLACE INTO __lf_ver VALUES (0, ?)",[this.B[Da]()]);Ie(b);return b.fa()[E](function(b){b[Ca](function(a){return-1!=a[A](".")})[n](function(a){c.gb("DROP TABLE "+a,[])});var g=b[Ca](function(a){return-1==a[A](".")});a.map(function(a){return a[h]()})[Ca](function(a){return-1==g[A](a)})[n](function(a){c.gb("CREATE TABLE "+a+"(id INTEGER PRIMARY KEY, value TEXT)",[])});return c.fa()})};
K.Le=function(){var a=0,b=Lc(),c=M(function(b){var c=new Ge(this.u,this.hd(),0);c.gb("SELECT MAX(id) FROM "+b,[]);return c.fa()[E](function(b){b=b[bb][fb](0)[0];a=ea.max(b,a)})},this),d=this.B.ib().map(function(a){return c(a[h]())});Jc(d)[E](function(){b[mb](a)},function(a){b[cb](a)});return b.ra};

function Ke(a){this.f=new Q;this.vg=new Q;this.Pf=a||Number.MAX_VALUE}K=Ke[C];K.qd=function(a){var b=this.vg.get(a,null);null===b&&(b=new R,this.vg.set(a,b));return b};K.set=function(a,b){var c=this.qd(a);b[n](M(function(a){this.f.set(a.id(),a);c.add(a.id())},this));this.f.Y()};K.get=function(a){return a.map(M(function(a){return this.f.get(a,null)},this))};
K.Pa=function(a,b,c){var d=[],g=ea.min(b,c),k=ea.max(b,c);a=this.qd(a);if(a.Y()<k-g)a.c()[n](function(a){a>=g&&a<=k&&(a=this.f.get(a),O(null!=a,"Inconsistent cache"),d[x](a))},this);else for(b=g;b<=k;++b)a[v](b)&&(c=this.f.get(b),O(null!=c,"Inconsistent cache"),d[x](c));return d};ja(K,function(a,b){var c=this.qd(a);b[n](function(a){this.f[m](a);c[m](a)},this)});K.Y=function(a){return null!=a?this.qd(a).Y():this.f.Y()};
function Le(a,b,c,d){a=b?a.reverse():a;if(null==c&&null==d)return a;c=ea.min(wb(c)?c:a[B],a[B]);if(0==c)return[];d=ea.min(d||0,a[B]);return a[y](d,d+c)};
function Me(a,b,c,d){this.w=a;this.L=b;this.Pe=c;if(d){a=511;a*=a*a;if(d[B]>=a)throw new S("TooManyRowsError","B-Tree implementation supports at most "+a+" rows.");d=Ne(this,d);this.sa=d=Oe(d)}else this[q]()}var Pe=[];K=Me[C];ia(K,J("w"));f(K,function(){return this.sa[t]()});K.add=function(a,b){this.sa=this.sa.ob(a,b)};K.set=function(a,b){this.sa=this.sa.ob(a,b,!0)};ja(K,function(a,b){this.sa=this.sa[m](a,b)});K.get=function(a){return this.sa.get(a)};
K.ad=function(a){return null!=a?this.Pa([a])[B]:this.Pa()[B]};K.Pa=function(a,b,c,d){var g=this.sa.ld().b[0];if(!wb(g)||0==c)return Pe;var k=(c||0)+(d||0),k=0<k&&!b?k:Number.POSITIVE_INFINITY,l=[];(wb(a)?this.L.sg(a):[this.L.he()])[n](function(a){for(var b=this.L.Fd(a),b=this.L.we(a)?g:b[0],b=this.sa.qf(b),c=0;null!=b&&l[B]<k;)0!=b.Pa(a,l)?c=0:c++,b=2==c?null:b[Ua]()},this);return Le(l,b,c,d)};la(K,function(){this.sa=Qe(this)});K.s=function(a){return this.sa.s(a)};
K.min=function(){return this.Jc(M(this.L.min,this.L))};K.max=function(){return this.Jc(M(this.L.max,this.L))};K.Jc=function(a){var b=this.sa.ld(),c=this.sa.vf();if(0==b.b[B]&&0==c.b[B])return[null,null];var d=b.b[0],b=b.S[0],g=c.b[c.b[B]-1],c=c.S[c.b[B]-1];return 1==a(d,g)?[d,this.Pe?[b]:b]:[g,this.Pe?[c]:c]};K.Gc=J("Pe");K.wc=J("L");K.Be=function(a,b){return null!=a?-1==this.L[Ra](a,b):!1};K.Ia=function(a,b){return null!=a?0==this.L[Ra](a,b):!1};
K.Za=function(){for(var a=[],b=this.sa.ld();b;)a[x](new Qc(b.va,[b.b,b.S])),b=b.xa;return a};function Re(a,b,c,d){a=new Me(b,a,c);d=Se(d,a);a.sa=d;return a}function Te(a,b){this.va=a;this.X=b;this.fb=0;this.xa=this.qb=this.F=null;this.b=[];this.S=[];this.i=[]}function Qe(a){return new Te(Rc++,a)}K=Te[C];K.ea=function(){return 0==this.fb};K.If=function(){return null==this.F};oa(K,J("xa"));
function Ue(a){function b(a){return null!=a?a.va[t]():"_"}var c=a.va+"["+a.b[I]("|")+"]",d=a.i.map(function(a){return a.va})[I]("|"),g=a.S[I]("/"),k=b(a.qb)+"{",k=a.ea()?k+g:k+d,k=k+"}"+b(a.F);a.xa&&(a=Ue(a.xa),c=c+"  "+a[0],k=k+"  "+a[1]);return[c,k]}f(K,function(){var a="",b=Ue(this),a=a+(b[0]+"\n"+b[1]+"\n");this.i[B]&&(a+=this.i[0][t]());return a});K.ld=function(){return this.ea()?this:this.i[0].ld()};K.vf=function(){return this.ea()?this:this.i[this.i[B]-1].vf()};
function Ve(a,b){b&&(b.qb=a);a&&(a.xa=b)}function Ne(a,b){for(var c=b[B],d=0,g=Qe(a),k=g;0<c;){var l=768<=c?511:257<=c&&511>=c?c:257,p=b[y](d,d+l);g.b=p.map(function(a){return a.key});g.S=p.map(function(a){return a[z]});d+=l;c-=l;0<c&&(l=Qe(g.X),Ve(g,l),g=l)}return k}function We(a){var b=a[0],c=Qe(b.X);c.fb=b.fb+1;c.i=a;for(b=0;b<a[B];++b)a[b].F=c,0<b&&c.b[x](a[b].b[0]);return c}
function Oe(a){var b=a,c=[];do c[x](b),b=b.xa;while(b);if(512>=c[B])b=We(c);else{var d=c[B],g=0,b=Qe(a.X);for(b.fb=a.fb+2;0<d;){a=768<=d?511:257<=d&&511>=d?d:257;var k=c[y](g,g+a),l=We(k);l.F=b;b.i[B]&&(b.b[x](k[0].b[0]),Ve(b.i[b.i[B]-1],l));b.i[x](l);g+=a;d-=a}}return b}K.get=function(a){var b=this.Pc(a);if(this.ea()){var c=Pe;this.X.Ia(this.b[b],a)&&(c=c[Ia](this.S[b]));return c}b=this.X.Ia(this.b[b],a)?b+1:b;return this.i[b].get(a)};
K.s=function(a){var b=this.Pc(a);return this.X.Ia(this.b[b],a)?!0:this.ea()?!1:this.i[b].s(a)};ja(K,function(a,b){this.lf(a,-1,b);if(this.If()){var c=this;1==this.i[B]&&(c=this.i[0],c.F=null);return c}return this});function Xe(a){return a.ea()?a.b[0]:Xe(a.i[0])}K.dd=function(){this.b=[];for(var a=1;a<this.i[B];++a)this.b[x](Xe(this.i[a]))};
K.lf=function(a,b,c){var d=this.Pc(a);if(!this.ea()){var g=this.X.Ia(this.b[d],a)?d+1:d;if(this.i[g].lf(a,g,c))this.dd();else return!1}else if(!this.X.Ia(this.b[d],a))return!1;if(this.b[B]>d&&this.X.Ia(this.b[d],a)){if(wb(c)&&!this.X.Gc()&&this.ea()&&(a=this.S[d],c=ec(a,fc,!1,c),0<=c&&Zb(a,c),this.S[d][B]))return!1;this.b[H](d,1);this.ea()&&this.S[H](d,1)}256>this.b[B]&&!this.If()&&(this.lk()||this.xj(b));return!0};
K.lk=function(){var a=null,b,c,d;if(this.xa&&256<this.xa.b[B])a=this.xa,c=b=0,d=this.b[B]+1;else if(this.qb&&256<this.qb.b[B])a=this.qb,b=this.qb.b[B]-1,c=this.ea()?b:b+1,d=0;else return!1;this.b[H](d,0,a.b[b]);a.b[H](b,1);b=this.ea()?this.S:this.i;var g=null;this.ea()?g=a.S:(g=a.i,g[c].F=this);b[H](d,0,g[c]);g[H](c,1);a.ea()||(a.dd(),this.dd());return!0};
K.xj=function(a){var b,c,d;this.xa&&511>this.xa.b[B]?(b=this.xa,d=c=0):this.qb&&(b=this.qb,c=b.b[B],d=b.ea()?b.S[B]:b.i[B]);c=[c,0][Ia](this.b);e[C][H][w](b.b,c);c=null;this.ea()?c=this.S:(c=this.i,c[n](function(a){a.F=b}));c=[d,0][Ia](c);e[C][H][w](b.ea()?b.S:b.i,c);Ve(this.qb,this.xa);b.ea()||b.dd();-1!=a&&(this.F.b[H](a,1),this.F.i[H](a,1))};
K.ob=function(a,b,c){var d=this.Pc(a);if(this.ea()){if(this.X.Ia(this.b[d],a)){if(c)return this.S[d]=this.X.Gc()?b:[b],this;if(this.X.Gc())throw new S("ConstraintError","Duplicate key not allowed");if(this.S[d])return gc(this.S[d],b),this;this.S[d]=[b]}this.b[H](d,0,a);this.S[H](d,0,this.X.Gc()?b:[b]);return 512==this.b[B]?this.ik():this}d=this.X.Ia(this.b[d],a)?d+1:d;a=this.i[d].ob(a,b,c);a.ea()||1!=a.b[B]||(this.b[H](d,0,a.b[0]),a.i[1].F=this,a.i[0].F=this,this.i[H](d,1,a.i[1]),this.i[H](d,0,a.i[0]));
return 512==this.b[B]?this.hk():this};K.ik=function(){var a=Qe(this.X),b=Qe(this.X);b.fb=1;b.b=[this.b[256]];b.i=[this,a];b.F=this.F;this.F=b;a.b=this.b[H](256);a.S=this.S[H](256);a.F=b;Ve(a,this.xa);Ve(this,a);return b};K.hk=function(){var a=Qe(this.X),b=Qe(this.X);a.F=this.F;a.fb=this.fb+1;a.b=[this.b[256]];a.i=[this,b];this.b[H](256,1);b.F=a;b.fb=this.fb;b.b=this.b[H](256);b.i=this.i[H](257);b.i[n](function(a){a.F=b});this.F=a;Ve(b,this.xa);Ve(this,b);return a};
K.Pc=function(a){for(var b=0,c=this.b[B];b<c;){var d=b+c>>1;this.X.Be(this.b[d],a)?b=d+1:c=d}return b};K.qf=function(a){if(!this.ea()){var b=this.Pc(a);this.X.Ia(this.b[b],a)&&b++;return this.i[b].qf(a)}return this};
K.Pa=function(a,b){var c=-1,d=this.b[B]-1,g=this.X.wc(),k=M(function(b){for(;b<this.b[B];++b){var k=g.hc(this.b[b],a);if(-1!=c){if(!k){d=b-1;break}}else k&&(c=b)}},this);g.hc(this.b[0],a)?c=0:k(1);if(-1==c)return 0;g.hc(this.b[d],a)||k(c);return d==this.b[B]-1?this.Xe(b,this.S[y](c)):d>=c?this.Xe(b,this.S[y](c,d+1)):0};K.Xe=function(a,b){var c=this.X.Gc()?b:ic(b);a[x][w](a,c);return c[B]};
function Se(a,b){for(var c=a.map(function(a){var c=new Te(a.id(),b);c.b=a.D()[0];c.S=a.D()[1];return c}),d=0;d<c[B]-1;++d)Ve(c[d],c[d+1]);return 1<c[B]?Oe(c[0]):c[0]};
function Ye(a){if(1==a.h[B])return new Ze(a.h[0].pb);a=a.h.map(function(a){return a.pb});return new $e(a)}function Ze(a){this.Yc=0==a?af:bf;this.Ce=0==a?function(a){return null!=a?a.reverse():null}:function(a){return a||null};this.Xf=0==a?cf:df}N(Ze,Cd);function bf(a,b){return a>b?1:a<b?-1:0}function af(a,b){return bf(b,a)}function df(a,b){return Ld(a,b)}function cf(a,b){return Ld(b,a)}K=Ze[C];
K.ae=function(a,b){var c=this.Ce(b),d=[null===c.g,null===c.o];if(!d[0]){var g=this.Yc(a,c.g);d[0]=c.$?1==g:-1!=g}d[1]||(g=this.Yc(a,c.o),d[1]=c.ga?-1==g:1!=g);return d};K.compare=function(a,b){return this.Yc(a,b)};K.min=function(a,b){return a<b?1:a==b?0:-1};K.max=function(a,b){return a>b?1:a==b?0:-1};K.hc=function(a,b){var c=this.ae(a,b);return c[0]&&c[1]};K.he=function(){return Kd()};K.Wf=function(a,b){return this.Xf(a,b)};
K.sg=function(a){return a[Ca](function(a){return null!==a})[ob](M(function(a,c){return this.Xf(a,c)},this))};K.we=function(a){return Ab(this.Ce(a).g)};K.Fd=function(a){a=this.Ce(a);return[a.g,a.o]};f(K,function(){return this.Yc==af?"SimpleComparator_DESC":"SimpleComparator_ASC"});function $e(a){this.za=a.map(function(a){return new Ze(a)})}N($e,Cd);K=$e[C];K.ge=function(a,b,c){for(var d=0,g=0;g<this.za[B]&&0==d;++g)d=c(this.za[g],a[g],b[g]);return d};
K.compare=function(a,b){return this.ge(a,b,function(a,b,g){return a[Ra](b,g)})};K.min=function(a,b){return this.ge(a,b,function(a,b,g){return a.min(b,g)})};K.max=function(a,b){return this.ge(a,b,function(a,b,g){return a.max(b,g)})};K.ae=function(a,b){for(var c=[!0,!0],d=0;d<this.za[B]&&(c[0]||c[1]);++d){var g=this.za[d].ae(a[d],b[d]);c[0]=c[0]&&g[0];c[1]=c[1]&&g[1]}return c};K.hc=function(a,b){for(var c=!0,d=0;d<this.za[B]&&c;++d)c=this.za[d].hc(a[d],b[d]);return c};K.he=function(){return this.za.map(function(a){return a.he()})};
K.sg=function(a){var b=a[Ca](function(a){return a[pb](Bb)});a=e(this.za[B]);for(var c=0;c<a[B];c++)a[c]=b.map(function(a){return a[c]});a[n](function(a,b){a[ob](M(function(a,c){return this.za[b].Wf(a,c)},this))},this);b=e(b[B]);for(c=0;c<b[B];c++)b[c]=a.map(function(a){return a[c]});return b[ob](M(function(a,b){for(var c=0,l=0;l<this.za[B]&&0==c;++l)c=this.za[l].Wf(a[l],b[l]);return c},this))};K.we=function(a){return this.za[0].we(a[0])};
K.Fd=function(a){var b=a.map(function(a,b){return this.za[b].Fd(a)[0]},this);a=a.map(function(a,b){return this.za[b].Fd(a)[1]},this);return[b,a]};
function ef(a){this.wa=a;this.Ua=new R}K=ef[C];ia(K,function(){return this.wa[h]()});K.add=function(a,b){null===a?this.Ua.add(b):this.wa.add(a,b)};K.set=function(a,b){null===a?(this.Ua[q](),this.Ua.add(b)):this.wa.set(a,b)};ja(K,function(a,b){null===a?b?this.Ua[m](b):this.Ua[q]():this.wa[m](a,b)});K.get=function(a){return null===a?this.Ua.c():this.wa.get(a)};K.ad=function(a){return this.wa.ad(a)};K.Pa=function(a,b,c,d){b=this.wa.Pa(a,b,c,d);return null!=a?b:b[Ia](this.Ua.c())};
la(K,function(){this.Ua[q]();this.wa[q]()});K.s=function(a){return null===a?!this.Ua.Ba():this.wa.s(a)};K.min=function(){return this.wa.min()};K.max=function(){return this.wa.max()};K.Za=function(){return[new Qc(-2,this.Ua.c())][Ia](this.wa.Za())};K.wc=function(){return this.wa.wc()};
function ff(a){this.w=a;this.rb=new R;this.L=new Ze(1)}K=ff[C];ia(K,J("w"));K.add=function(a){if("number"!=typeof a)throw new S("DataError","Row id must be numbers");this.rb.add(a)};K.set=function(a,b){this.add(a,b)};ja(K,function(a){this.rb[m](a)});K.get=function(a){return this.s(a)?[a]:[]};K.min=function(){return this.Jc(M(this.L.min,this.L))};K.max=function(){return this.Jc(M(this.L.max,this.L))};
K.Jc=function(a){if(this.rb.Ba())return[null,null];var b=this.rb.c()[db](M(function(b,d){return null===b||1==a(d,b)?d:b},this),null);return[b,[b]]};K.ad=function(){return this.rb.Y()};K.Pa=function(a,b,c,d){var g=a||[Kd()];a=this.rb.c()[Ca](function(a){return g[nb](function(b){return this.L.hc(a,b)},this)},this);return Le(a,b,c,d)};la(K,function(){this.rb[q]()});K.s=function(a){return this.rb[v](a)};K.Za=function(){return[new Qc(0,this.rb.c())]};K.wc=J("L");
function gf(a,b){var c=new ff(a);b[0].D()[n](function(a){c.add(a,a)});return c};
function hf(a){this.l=a;this.ub=a.m(ld);this.N=a.m(nd);this.oa=a.m(md)}K=hf[C];K.Qa=function(a){var b=a.ib(),c=M(function(){if(0==b[B])return Hc();var a=b[Fa]();return(a.Qb()?this.di(a):this.ei(a))[E](c)},this);return c()};K.ei=function(a){var b=new Gd(this.l,[a]);return this.ub.Eb(0,b).Z(a[h](),M(a.cc,a)).get([])[E](M(function(b){this.oa.set(a[h](),b);this.Qj(a,b)},this))};K.Qj=function(a,b){var c=this.N.Ti(a[h]());b[n](function(a){c[n](function(b){var c=a.Hc(b[h]());b.add(c,a.id())})})};
K.di=function(a){var b=new Gd(this.l,[a]),c=this.ub.Eb(0,b),b=c.Z(a[h](),a.cc).get([])[E](M(function(b){this.oa.set(a[h](),b)},this)),d=a.Fa().map(function(a){return this.Rj(a,c)},this)[Ia](this.Sj(a,c));return Jc(d[Ia](b))};
K.Rj=function(a,b){var c=b.Z(a.j(),Sc,1),d=Ye(a);return c.get([])[E](M(function(b){O("btree"==b[0].D().type);if(1<b[B]){if(a.Af()){var c=Re[r](void 0,d,a.j(),a.ud),l=b[y](1),p=-1;for(b=0;b<l[B];++b)if(-2==l[b].id()){p=b;break}if(-1==p)throw new S("DataError","Data corruption detected");b=l[p].D();l=l[y](0);l[H](p,1);c=c(l);c=new ef(c);c.Ua[eb](b)}else c=Re(d,a.j(),a.ud,b[y](1));this.N.set(c)}},this))};
K.Sj=function(a,b){return b.Z(a.Hb(),Sc,1).get([])[E](M(function(b){O("rowid"==b[0].D().type);1<b[B]&&(b=gf(a.Hb(),b[y](1)),this.N.set(b))},this))};


function jf(){this.O=new Q}jf[C].Qa=function(a){a.ib()[n](function(a){var c=a.Hb();if(null===this.get(c)){var d=new ff(c);this.O.set(c,d)}a.Fa()[n](function(a){this.O.set(a.j(),kf(a))},this)},this);return Hc()};function kf(a){var b=Ye(a),b=new Me(a.j(),b,a.ud);return a.Af()?new ef(b):b}jf[C].get=function(a){return this.O.get(a,null)};jf[C].set=function(a){return this.O.set(a[h](),a)};jf[C].Ti=function(a){var b=[],c=a+".";this.O.H()[n](function(a){0==a[A](c)&&b[x](this.O.get(a))},this);return b};
function mf(a){this.Va=[];wb(a)&&this.add(a)}K=mf[C];f(K,function(){return this.Va.map(function(a){return a[t]()})[I](",")});K.s=function(a){return this.Va[nb](function(b){return b[v](a)})};K.c=J("Va");
K.add=function(a){if(0!=a[B])if(a=this.Va[Ia](a),1==a[B])this.Va=a;else{a[ob](Ld);for(var b=[],c=a[0],d=1;d<a[B];++d)if(c.Yf(a[d])){var g=a[d],k=Kd();if(null!==c.g&&null!==g.g){var l=Jd(c.g,g.g,!0);1!=l?(k.g=c.g,k.$=0!=l?c.$:c.$&&g.$):(k.g=g.g,k.$=g.$)}null!==c.o&&null!==g.o&&(l=Jd(c.o,g.o,!1),-1!=l?(k.o=c.o,k.ga=0!=l?c.ga:c.ga&&g.ga):(k.o=g.o,k.ga=g.ga));c=k}else b[x](c),c=a[d];b[x](c);this.Va=b}};
K.yc=function(a){return this.Va[B]==a.Va[B]?0==this.Va[B]||this.Va[pb](function(b,c){return b.yc(a.Va[c])}):!1};function nf(a,b){var c=[];a.c().map(function(a){return b.c().map(function(b){var c;if(a.Yf(b)){c=Kd();var l=Jd(a.g,b.g,!0),l=0==l?a.$?a:b:-1!=l?a:b;c.g=l.g;c.$=l.$;null===a.o||null===b.o?b=null===a.o?b:a:(l=Jd(a.o,b.o,!1),b=0==l?a.ga?a:b:-1==l?a:b);c.o=b.o;c.ga=b.ga}else c=null;return c})})[n](function(a){c=c[Ia](a)});return new mf(c[Ca](function(a){return null!==a}))};
function of(a,b){var c=[],d=null,g=null;a.nc(function(a){var l=b(a);null==a[Ea]()?g=l:d.ia(l);var p=a[Ea]();null!==p&&p.ua()==d.ua()&&(p=c[A](d),-1!=p&&c[H](p,1));1<a.ua()&&c[x](l);d=a.Ff()?c[c[B]-1]:l});return g}function pf(a){return qf(a,function(a){return a.Ff()})}function rf(a){var b=a[Ea](),c=0;null!==b&&(c=b.aa()[A](a),b[kb](a));var d=a.aa()[y]();d[n](function(d,k){a[kb](d);null===b||b.pc(d,c+k)});return{parent:b,children:d}}
function sf(a,b){a.aa()[y]()[n](function(c){a[kb](c);b.ia(c)});a.ia(b)}function tf(a){O(1==a.ua());var b=a.lb(0);O(1==b.ua());rf(a);sf(b,a);return b}function uf(a,b,c){O(1==a.ua());var d=a.lb(0);O(1<d.ua());var g=d.aa()[y]();if(!g[nb](function(a){return b(a)}))return a;rf(a);g[n](function(g,l){if(b(g)){var p=c(a);d.Hd(l);p.ia(g);d.pc(p,l)}});return d}function vf(a,b,c,d){var g=a[Ea]();null!==g&&(a=g.aa()[A](a),g.Hd(a),g.pc(c,a));b.aa()[y]()[n](function(a){b[kb](a);d.ia(a)});return c}
function qf(a,b,c){function d(a){b(a)&&g[x](a);null!=c&&c(a)||a.aa()[n](d)}var g=[];d(a);return g}function wf(a,b){var c=b||function(a){return a[t]()+"\n"},d="";a.nc(function(a){for(var b=0;b<a.Ci();b++)d+="-";d+=c(a)});return d};

function xf(a){ge[G](this);this.Nb=a;this.Sa=!1}N(xf,ge);K=xf[C];K.Db=function(){return of(this,function(a){if(a instanceof xf){var b=new xf(a.Nb);b.Sa=a.Sa;b.Ne(a.ka());return b}return a.Db()}[r](this))};K.vb=function(a){var b=a||[];this.nc(function(a){a!=this&&a.vb(b)}[r](this));return(new R(b)).c()};K.Kd=function(a){this.Sa!=a&&(this.Sa=a,this.Nb="and"==this.Nb?"or":"and",this.aa()[n](function(b){return b.Kd(a)}))};K.eval=function(a){var b=this.aa().map(function(b){return b.eval(a)});return this.wh(b)};
K.wh=function(a){return"and"==this.Nb?Qd(a):Rd(a)};f(K,function(){return"combined_pred_"+this.Nb[t]()});function yf(a,b){return a===b?0!==a||1/a===1/b:a!==a&&b!==b};function zf(){this[q]()}var Af=ba[C][Pa],Bf=ba[C][Wa];K=zf[C];K.set=function(a,b){this.Sc(a);var c=!this.Fc(a);this.f[a]=b;if("__proto__"==a||!Cf&&!Af[G](this.f,a)){delete this.f[a];var d=Tb(this.zb,a);if(c=0>d)d=this.zb[B];this.zb[d]=a;this.Id[d]=b}c&&this.U++};K.get=function(a,b){this.Sc(a);if(this.Fc(a))return this.f[a];var c=Tb(this.zb,a);return 0<=c?this.Id[c]:b};
ja(K,function(a){this.Sc(a);if(this.Fc(a))return this.U--,delete this.f[a],!0;a=Tb(this.zb,a);return 0<=a?(this.U--,Zb(this.zb,a),Zb(this.Id,a),!0):!1});K.addAll=function(a){Ub(a.H(),function(b){this.set(b,a.get(b))},this)};K.Ba=function(){return!this.U};K.Y=J("U");K.s=function(a){this.Sc(a);return this.Fc(a)||0<=Tb(this.zb,a)};K.Zc=function(a){return kc(this.f,function(b,c){return this.Fc(c)&&yf(b,a)},this)||0<=Tb(this.Id,a)};
K.H=function(){var a;if(Df)a=ac(ba.keys(this.f));else{a=[];for(var b in this.f)Bf[G](this.f,b)&&a[x](b)}bc(a,this.zb);return a};K.c=function(){for(var a=[],b=this.H(),c=0;c<b[B];c++)a[x](this.get(b[c]));return a};K.getEntries=function(){for(var a=[],b=this.H(),c=0;c<b[B];c++){var d=b[c];a[x]([d,this.get(d)])}return a};la(K,function(){this.f=Cf?ba[Qa](null):{};this.zb=[];this.Id=[];this.U=0});qa(K,function(){var a=new zf;a[eb](this);return a});
K.Fc=function(a){return"__proto__"==a?!1:Cf?a in this.f:Bf[G](this.f,a)};K.Sc=function(a){O(Db(a),"key must be a string.")};var Cf=!!ba[Qa],Df=!!ba.keys;function Ef(){this[q]()}K=Ef[C];K.U=0;la(K,function(){this.U=0;this.f=new zf});qa(K,function(){var a=new Ef;a.Kg(this);return a});K.add=function(a,b){var c=this.f.get(a);c||this.f.set(a,c=[]);c[x](b);this.U++};K.Kg=function(a){Ub(a.getEntries(),function(a){this.add(a[0],a[1])},this)};K.get=function(a){return(a=this.f.get(a))?ac(a):[]};ja(K,function(a,b){var c=this.f.get(a);if(!c)return!1;var d=$b(c,function(a){return yf(b,a)});d&&(this.U--,0==c[B]&&this.f[m](a));return d});
K.fg=function(a){var b=this.f.get(a);return this.f[m](a)?(this.U-=b[B],!0):!1};K.Ba=function(){return!this.U};K.Y=J("U");K.s=function(a){return this.f.s(a)};K.Zc=function(a){return Xb(this.f.c(),function(b){return Xb(b,function(b){return yf(b,a)})})};K.H=function(){return this.f.H()};K.c=function(){return ic(this.f.c())};K.getEntries=function(){for(var a=this.H(),b=[],c=0;c<a[B];c++)for(var d=a[c],g=this.get(d),k=0;k<g[B];k++)b[x]([d,g[k]]);return b};
function Ff(a,b,c){ge[G](this);this.Ja=a;this.Xa=b;this.V=c;this.cd=Zd.ke().je(this.Ja.da(),this.V)}N(Ff,ge);K=Ff[C];K.Db=function(){var a=new Ff(this.Ja,this.Xa,this.V);a.Ne(this.ka());return a};K.vb=function(a){return null!=a?(a[x](this.Ja),a[x](this.Xa),a):[this.Ja,this.Xa]};K.eval=function(a){var b=a[F][Ca](function(a){var b=a.M(this.Ja);a=a.M(this.Xa);return this.cd(b,a)},this);return new Md(b,a.W())};f(K,function(){return"join_pred("+this.Ja.j()+", "+this.Xa.j()+")"});
K.Ye=function(a){return-1!=a.W()[A](this.Ja.Z().Aa())};K.Sg=function(a){return-1!=a.W()[A](this.Xa.Z().Aa())};K.Kh=function(a,b){var c=null,d=null;this.Ye(a)?(this.af(a,b),c=a,d=b):(this.af(b,a),c=b,d=a);return[c,d]};K.af=function(a,b){O(this.Ye(a),"Mismatch between join predicate left operand and right relation.");O(this.Sg(b),"Mismatch between join predicate right operand and right relation.")};K.Rh=function(a,b){var c=this.Kh(a,b),d=c[0],c=c[1];return"eq"==this.V?this.Sh(d,c):this.Th(d,c)};
K.Th=function(a,b){for(var c=[],d=a.W(),g=b.W(),k=0;k<a[F][B];k++)for(var l=0;l<b[F][B];l++)if(this.cd(a[F][k].M(this.Ja),b[F][l].M(this.Xa))){var p=Vd(a[F][k],d,b[F][l],g);c[x](p)}d=a.W()[Ia](b.W());return new Md(c,d)};
K.Sh=function(a,b){var c=a,d=b,g=this.Ja,k=this.Xa;a[F][B]>b[F][B]&&(c=b,d=a,g=this.Xa,k=this.Ja);var l=new Ef,p=[];c[F][n](function(a){var b=String(a.M(g));l.add(b,a)});var D=c.W(),Ja=d.W();d[F][n](function(a){var b=String(a.M(k));l.s(b)&&l.get(b)[n](function(b){b=Vd(a,Ja,b,D);p[x](b)})});c=a.W()[Ia](b.W());return new Md(p,c)};
function Gf(a,b,c){return null===b?new ie(a,b,c):wb(b.j)?new Ff(a,b,c):new ie(a,b,c)};
var Hf={};L("lf.schema.DataStoreType",Hf,void 0);Hf.INDEXED_DB=0;Hf.MEMORY=1;Hf.LOCAL_STORAGE=2;Hf.FIREBASE=3;Hf.WEB_SQL=4;Hf.OBSERVABLE_STORE=5;function If(a,b,c,d){this.ug=a;xa(this,b);this.ud=c;this.h=d}If[C].j=function(){return this.ug+"."+this[jb]};If[C].Af=function(){return this.h[nb](function(a){return a.Ya.ic()})};function Jf(a,b,c,d){this.w=a;this.pa=c;this.G=b;this.Bd=d;this.bb=null}L("lf.schema.Table",Jf,void 0);ia(Jf[C],J("w"));Jf[C].Oa=J("bb");Jf[C].Aa=function(){return this.bb||this.w};
Jf[C].rc=function(a){var b=new this.constructor(this.w);b.bb=a;return b};Jf[C].as=Jf[C].rc;Jf[C].createRow=Jf[C].bd;Jf[C].deserializeRow=Jf[C].cc;Jf[C].Fa=J("pa");Jf[C].vb=J("G");Jf[C].getConstraint=Jf[C].gc;Jf[C].Qb=J("Bd");Jf[C].Hb=function(){return this.w+".#"};
function T(a,b){ra(this,a);this.Yb=b;this.bb=null}K=T[C];ia(K,function(){return this.Yb+"("+this[ab][h]()+")"});K.j=function(){return this.Yb+"("+this[ab].j()+")"};K.Z=function(){return this[ab].Z()};f(K,function(){return this.j()});K.da=function(){return this[ab].da()};K.Oa=J("bb");K.Fa=function(){return[]};K.ic=ub(!1);K.rc=function(a){this.bb=a;return this};L("lf.fn.AggregatedColumn.prototype.as",T[C].rc,void 0);T[C].pf=function(){for(var a=[this],b=this;b instanceof T;)a[x](b[ab]),b=b[ab];return a};
function Kf(a){this.bb=a||null;this.C=new Jf("#UnknownTable",[],[],!1)}K=Kf[C];ia(K,ub("*"));K.j=function(){return this[h]()};f(K,function(){return this.j()});K.Z=J("C");K.da=ub(4);K.Oa=J("bb");K.Fa=function(){return[]};K.ic=ub(!1);
L("lf.fn.avg",function(a){return new T(a,"AVG")},void 0);L("lf.fn.count",function(a){return new T(a||new Kf,"COUNT")},void 0);function Lf(a){return new T(a,"DISTINCT")}L("lf.fn.distinct",Lf,void 0);L("lf.fn.max",function(a){return new T(a,"MAX")},void 0);L("lf.fn.min",function(a){return new T(a,"MIN")},void 0);L("lf.fn.stddev",function(a){return new T(a,"STDDEV")},void 0);L("lf.fn.sum",function(a){return new T(a,"SUM")},void 0);L("lf.fn.geomean",function(a){return new T(a,"GEOMEAN")},void 0);
function U(a,b){ee[G](this,"","");this.ai=b;this.Uf=a}N(U,ee);K=U[C];K.ca=ub(null);ha(K,function(a,b){switch(this.ai){case 1:return this.Wh(a,b);case 0:return this.Vh(a,b);default:return this.Yh(a,b)}});f(K,ub("dummy_node"));K.Qc=function(){return this[t]()};K.Ze=function(a){O(-1==this.Uf||a[B]==this.Uf)};K.Yh=function(a,b){return new P(M(function(c){c(this.ja(a,[],b))},this))};K.Wh=function(a,b){return this.lb(0)[Ga](a,b)[E](M(function(c){this.Ze(c);return this.ja(a,c,b)},this))};
K.Vh=function(a,b){var c=this.aa().map(function(c){return c[Ga](a,b)});return Jc(c)[E](M(function(c){var g=[];c[n](function(a){for(var b=0;b<a[B];++b)g[x](a[b])});this.Ze(g);return this.ja(a,g,b)},this))};
function Mf(a){U[G](this,-1,1);this.Ve=a}N(Mf,U);f(Mf[C],function(){return"aggregation("+this.Ve.map(function(a){return a.j()})[t]()+")"});Mf[C].ja=function(a,b){b[n](function(a){(new Nf(a,this.Ve)).fh()},this);return b};function Nf(a,b){this.Da=a;this.G=b}
Nf[C].fh=function(){this.G[n](function(a){a=a.pf().reverse();for(var b=1;b<a[B];b++){var c=a[b],d=c.pf()[y](-1)[0],g=this.Fi(c),k=null;switch(c.Yb){case "MIN":k=Of(g,d);break;case "MAX":k=Pf(g,d);break;case "DISTINCT":k=Qf(g,d);break;case "COUNT":k=g[F][B];break;case "SUM":k=Rf(g,d);break;case "AVG":0<g[F][B]&&(k=Rf(g,d)/g[F][B]);break;case "GEOMEAN":k=Sf(g,d);break;default:k=Tf(g,d)}this.Da.ak(c,k)}},this)};Nf[C].Fi=function(a){return a[ab]instanceof T?this.Da.fc(a[ab]):this.Da};
function Of(a,b){var c=null;a[F][n](function(a){a=a.M(b);if(null===c||a<c)c=a});return c}function Pf(a,b){var c=null;a[F][n](function(a){a=a.M(b);if(null===c||a>c)c=a});return c}function Rf(a,b){return a[F][db](function(a,d){return a+d.M(b)},0)}function Tf(a,b){var c=a[F].map(function(a){return a.M(b)});return cd[w](null,c)}function Sf(a,b){var c=0,d=a[F][db](function(a,d){var l=d.M(b);return 0!=l?(c++,a+ea.log(l)):a},0);return 0==c?null:ea.pow(ea.E,d/c)}
function Qf(a,b){var c=new Q;a[F][n](function(a){var g=a.M(b);c.set(g,a)});return new Md(c.c(),a.W())};
function V(){ee[G](this,"","")}N(V,ee);function Uf(a,b){V[G](this);na(this,a);ka(this,b)}N(Uf,V);function Vf(a,b){Uf[G](this,a,b)}N(Vf,Uf);function Wf(a){V[G](this);na(this,a)}N(Wf,V);f(Wf[C],function(){return"delete("+this[u][h]()+")"});function Xf(a,b){V[G](this);na(this,a);this.Qe=b}N(Xf,V);f(Xf[C],function(){var a=[];this.Qe&&(a=this.Qe.map(function(a){return a.K[h]()},this));return"update("+this[u][h]()+", ["+a[I](",")+"])"});function Yf(a){V[G](this);this.Ca=a}N(Yf,V);
f(Yf[C],function(){return"select("+this.Ca[t]()+")"});function Zf(a){V[G](this);na(this,a)}N(Zf,V);f(Zf[C],function(){var a="table_access("+this[u][h]();null===this[u].Oa()||(a+=" as "+this[u].Oa());return a+")"});function $f(){V[G](this)}N($f,V);f($f[C],ub("cross_product"));function ag(a,b){V[G](this);this.h=a;this.Jb=b}N(ag,V);f(ag[C],function(){var a="project("+this.h[t]();if(null!==this.Jb)var b=this.Jb.map(function(a){return a.j()})[I](", "),a=a+(", groupBy("+b+")");return a+")"});
function bg(a){V[G](this);this.J=a}N(bg,V);f(bg[C],function(){return"order_by("+ne(this.J)+")"});function cg(a){V[G](this);this.h=a}N(cg,V);f(cg[C],function(){return"aggregation("+this.h[t]()+")"});function dg(a){V[G](this);this.h=a}N(dg,V);f(dg[C],function(){return"group_by("+this.h[t]()+")"});function eg(a){V[G](this);this.na=a}N(eg,V);f(eg[C],function(){return"limit("+this.na+")"});function fg(a){V[G](this);this.ma=a}N(fg,V);f(fg[C],function(){return"skip("+this.ma+")"});
function gg(a){V[G](this);this.Ca=a}N(gg,V);f(gg[C],function(){return"join("+this.Ca[t]()+")"});
function hg(){};
function ig(){}N(ig,hg);ig[C].xb=function(a){this.ha=a;this.Na(this.ha);return this.ha};ig[C].Na=function(a){if(a instanceof Yf){O(1==a.ua(),"SelectNode must have exactly one child.");var b=this.cf(a.Ca),b=this.Eh(b);vf(a,a,b[0],b[1]);a==this.ha&&(this.ha=b[0]);a=b[0]}a.aa()[n](function(a){this.Na(a)},this)};ig[C].cf=function(a){if(0==a.ua()||"and"!=a.Nb)return[a];var b=a.aa()[y]().map(function(b){a[kb](b);return this.cf(b)},this);return ic(b)};
ig[C].Eh=function(a){var b=null,c=null;a.map(function(a,g){var k=new Yf(a);0==g?b=k:c.ia(k);c=k},this);return[b,c]};
function jg(){}N(jg,hg);jg[C].xb=function(a){this.ha=a;this.Na(this.ha);return this.ha};jg[C].Na=function(a){if(a instanceof $f)for(;2<a.ua();){for(var b=new $f,c=0;2>c;c++){var d=a.Hd(0);b.ia(d)}a.pc(b,0)}a.aa()[n](function(a){this.Na(a)},this)};
function kg(){U[G](this,2,0)}N(kg,U);f(kg[C],ub("cross_product"));kg[C].ja=function(a,b){for(var c=b[0],d=b[1],g=[],k=c.W(),l=d.W(),p=0;p<c[F][B];p++)for(var D=0;D<d[F][B];D++){var Ja=Vd(c[F][p],k,d[F][D],l);g[x](Ja)}c=c.W()[Ia](d.W());return[new Md(g,c)]};

function lg(a,b){qe[G](this,a,b);this.La=a.m(pd);this.wb=a.m(qd)}N(lg,qe);ua(lg[C],ub(2));lg[C].Ee=function(a){0==this.da()?this.zj(a):this.Oc()};lg[C].zj=function(a){this.Ed[n](function(b,c){b instanceof le&&this.wb.Fg(b,a[c])},this)};lg[C].Oc=function(){var a=this.wb.qe(this.ca().c());0!=a[B]&&(a=new re(this[Oa],a),this.La.Ub(a))};
function mg(){je[G](this)}N(mg,je);qa(mg[C],function(){var a=new mg;a.Xc(this);a.g=this.g;return a});ma(mg[C],function(a){mg.$a[r][G](this,a);this.Vd(a);return this});
function ng(){je[G](this)}N(ng,je);qa(ng[C],function(){var a=new ng;a.Xc(this);a.Ra=this.Ra;this[Ma]&&ka(a,this[Ma]instanceof Wd?this[Ma]:this[Ma][y]());a.qc=this.qc;a.Zb=this.Zb;return a});ma(ng[C],function(a){ng.$a[r][G](this,a);this.Zb&&ka(this,this.Zb instanceof Wd?a[this.Zb.mb()]:this.Zb.map(function(b){return b instanceof Wd?a[b.mb()]:b}));return this});
function og(){je[G](this)}N(og,je);qa(og[C],function(){var a=new og;a.Xc(this);na(a,this[u]);a.set=this.set?this.set[y]():this.set;return a});ma(og[C],function(a){og.$a[r][G](this,a);this.set[n](function(b){-1!=b.Tc&&ta(b,a[b.Tc])});this.Vd(a);return this});
function pg(a,b){if(null==b)return"NULL";switch(a){case 1:return b?1:0;case 3:case 4:return b;case 0:return"'"+Uc(b)+"'";default:return"'"+b[t]()+"'"}}function qg(a,b){var c=a.qc?"INSERT OR REPLACE":"INSERT",d=a.Ra.vb(),c=c+(" INTO "+a.Ra[h]()+"("),c=c+d.map(function(a){return a[h]()})[I](", "),c=c+") VALUES (";return a[Ma].map(function(a){var k=d.map(function(c){var d=a.D()[c[h]()];return b?null!=d?"#":"NULL":pg(c.da(),d)});return c+k[I](", ")+");"})[I]("\n")}
function rg(a){switch(a){case "between":return"BETWEEN";case "eq":return"=";case "gte":return">=";case "gt":return">";case "in":return"IN";case "lte":return"<=";case "lt":return"<";case "match":return"LIKE";case "neq":return"<>";default:return"UNKNOWN"}}function sg(a,b,c,d){return a instanceof Wd?"?"+a.mb()[t]():d?null!=a?"#":"NULL":"match"==b?"'"+a[t]()+"'":"in"==b?"("+a.map(function(a){return pg(c,a)})[I](", ")+")":"between"==b?pg(c,a[0])+" AND "+pg(c,a[1]):pg(c,a)[t]()}
function tg(a,b){return a.aa().map(function(a){return"("+ug(a,b)+")"})[I]("and"==a.Nb?" AND ":" OR ")}function ug(a,b){if(a instanceof ie)return[a.K.j(),rg(a.V),sg(a[z],a.V,a.K.da(),b)][I](" ");if(a instanceof xf)return tg(a,b);if(a instanceof Ff)return[a.Ja.j(),rg(a.V),a.Xa.j()][I](" ");throw new S("NotSupportedError","toSql does not support predicate type: "+typeof a);}function vg(a,b){var c=ug(a,b);return c?" WHERE "+c:""}
function wg(a,b){var c="UPDATE "+a[u][h]()+" SET ",c=c+a.set.map(function(a){var b=a.K.j()+" = ";return-1!=a.Tc?b+"?"+a.Tc[t]():b+pg(a.K.da(),a[z])[t]()})[I](", ");a.A&&(c+=vg(a.A,b));return c+";"}
function xg(a,b){var c="*";a.h[B]&&(c=a.h.map(function(a){return a.Oa()?a.j()+" AS "+a.Oa():a.j()})[I](", "));var d=a.g.map(function(a){return a.Aa()!=a[h]()?a[h]()+" AS "+a.Aa():a[h]()})[I](", "),c="SELECT "+c+" FROM "+d;a.A&&(c+=vg(a.A,b));a.J&&(d=a.J.map(function(a){return a.K.j()+(0==a.pb?" DESC":" ASC")})[I](", "),c+=" ORDER BY "+d);a.la&&(d=a.la.map(function(a){return a.j()})[I](", "),c+=" GROUP BY "+d);a.na&&(c+=" LIMIT "+a.na[t]());a.ma&&(c+=" SKIP "+a.ma[t]());return c+";"}
function yg(a,b){var c=b||!1,d=a.uf();if(d instanceof ng)return qg(d,c);if(d instanceof mg){var g="DELETE FROM "+d.g[h]();d.A&&(g+=vg(d.A,c));return g+";"}if(d instanceof og)return wg(d,c);if(d instanceof le)return xg(d,c);throw new S("NotSupportedError","toSql not implemented for "+typeof d);};
function zg(a,b){this.global=a;this.Oj=a.m(od);this.La=a.m(pd);this.a=b}L("lf.query.BaseBuilder",zg,void 0);ha(zg[C],function(){try{this.cb()}catch(a){return Ic(a)}return new P(function(a,c){var d=new lg(this[Oa],[this.Ec()]);this.La.Ub(d)[E](function(c){a(c[0].le())},c)},this)});ha(zg[C],zg[C][Ga]);zg[C].nf=function(){var a=M(function(a){return a.Qc(this.a)+"\n"},this);return wf(this.me().Gb(),a)};zg[C].explain=zg[C].nf;ma(zg[C],function(a){this.a[r](a);return this});ma(zg[C],zg[C][r]);
zg[C].pk=function(a){return yg(this,a)};zg[C].toSql=zg[C].pk;K=zg[C];K.cb=sb();K.uf=function(){return this.a[Ya]()};K.nd=J("a");K.me=function(){null==this.Zf&&(this.Zf=this.Oj.Mi(this.a));return this.Zf};K.Ec=function(){return{context:this.uf(),Ge:this.me()}};K.Ki=function(){return{context:this.nd(),Ge:this.me()}};
function Ag(a){zg[G](this,a,new mg)}N(Ag,zg);L("lf.query.DeleteBuilder",Ag,void 0);Ag[C].g=function(a){this.Wg();this.a.g=a;return this};Ag[C].from=Ag[C].g;Ag[C].A=function(a){this.Ud();this.a.A=a;return this};Ag[C].where=Ag[C].A;Ag[C].Wg=function(){if(null!=this.a.g)throw new S("SyntaxError","from() has already been called.");};Ag[C].Ud=function(){if(null!=this.a.A)throw new S("SyntaxError","where() has already been called.");};
Ag[C].cb=function(){Ag.$a.cb[G](this);if(null==this.a.g)throw new S("SyntaxError","Invalid usage of delete()");};
function Bg(a,b){zg[G](this,a,new ng);this.a.qc=b||!1}N(Bg,zg);L("lf.query.InsertBuilder",Bg,void 0);Bg[C].cb=function(){Bg.$a.cb[G](this);var a=this.a;if(null==a.Ra||null==a[Ma])throw new S("SyntaxError","Invalid usage of insert()");if(a.qc&&null===a.Ra.gc().ne())throw new S("SyntaxError","Attempted to insert or replace in a table with no primary key.");};Bg[C].Ra=function(a){this.Xg();this.a.Ra=a;return this};Bg[C].into=Bg[C].Ra;
ka(Bg[C],function(a){this.Yg();a instanceof Wd||a[nb](function(a){return a instanceof Wd})?this.a.Zb=a:ka(this.a,a);return this});ka(Bg[C],Bg[C][Ma]);Bg[C].Xg=function(){if(null!=this.a.Ra)throw new S("SyntaxError","into() has already been called.");};Bg[C].Yg=function(){if(null!=this.a[Ma])throw new S("SyntaxError","values() has already been called.");};
function Cg(a){return Dg("and",e[C][y][G](arguments))}L("lf.op.and",Cg,void 0);L("lf.op.or",function(a){return Dg("or",e[C][y][G](arguments))},void 0);function Dg(a,b){var c=new xf(a);b[n](function(a){c.ia(a)});return c}L("lf.op.not",function(a){a.Kd(!0);return a},void 0);
function W(a,b){zg[G](this,a,new le);this.of=this.Ig=!1;this.a.h=b;this.mh();this.lh()}N(W,zg);L("lf.query.SelectBuilder",W,void 0);K=W[C];K.cb=function(){W.$a.cb[G](this);var a=this.a;if(null==a.g)throw new S("SyntaxError","Invalid usage of select()");if(wb(a.Lb)&&!wb(a.na)||wb(a.Wb)&&!wb(a.ma))throw new S("SyntaxError","Binding parameters of limit/skip without providing values");this.sh()};
K.mh=function(){var a=this.a.h[Ca](function(a){return a instanceof T&&"DISTINCT"==a.Yb},this);if(0!=a[B]&&(1!=a[B]||1!=this.a.h[B]))throw new S("SyntaxError","Invalid usage of lf.fn.distinct()");};K.sh=function(){null!=this.a.la?this.nh():this.rh()};
K.nh=function(){var a=this.a.h[Ca](function(a){return!(a instanceof T)}).map(function(a){return a.j()}),b=!1;if(0==this.a.la[B]||0==this.a.h[B])b=!0;else{var c=this.a.la.map(function(a){return a.j()});(b=a[nb](function(a){return-1==c[A](a)}))||(b=this.a.la[nb](function(a){a=a.da();return 6==a||0==a}))}if(b)throw new S("SyntaxError","Invalid projection list or groupBy columns");};
K.rh=function(){var a=this.a.h[nb](function(a){return a instanceof T},this),b=this.a.h[nb](function(a){return!(a instanceof T)},this)||0==this.a.h[B];if(a&&b)throw new S("SyntaxError","Invalid projection list, aggregated and non-aggregated can't be mixed.");};K.lh=function(){this.a.h[n](function(a){if(a instanceof T&&!Eg(a.Yb,a.da()))throw new S("SyntaxError","Invalid aggregation detected for"+a.j());},this)};
K.Td=function(a,b){if(null!=a)throw new S("SyntaxError",b+"() has already been called.");};K.$e=function(a,b){if(0>a)throw new S("SyntaxError",b+"() does not accept negative values");};K.g=function(a){if(this.of)throw new S("SyntaxError","from() has already been called.");this.of=!0;null==this.a.g&&(this.a.g=[]);this.a.g[x][w](this.a.g,e[C][y][G](arguments));return this};W[C].from=W[C].g;
W[C].A=function(a){if(this.Ig)throw new S("SyntaxError","where() has already been called.");this.Ig=!0;this.bf(a);return this};W[C].where=W[C].A;W[C].bf=function(a){null!=this.a.A&&(a=Cg(a,this.a.A));this.a.A=a};W[C].ue=function(a,b){null==this.a.g&&(this.a.g=[]);this.a.g[x](a);this.bf(b);return this};W[C].innerJoin=W[C].ue;W[C].pj=function(){throw new S("NotSupportedError","Not implemented yet");};W[C].leftOuterJoin=W[C].pj;
W[C].na=function(a){this.Td(this.a.na||this.a.Lb,"limit");a instanceof Wd?this.a.Lb=a:(this.$e(a,"limit"),this.a.na=a);return this};W[C].limit=W[C].na;W[C].ma=function(a){this.Td(this.a.ma||this.a.Wb,"skip");a instanceof Wd?this.a.Wb=a:(this.$e(a,"skip"),this.a.ma=a);return this};W[C].skip=W[C].ma;W[C].J=function(a,b){null==this.a.J&&(this.a.J=[]);this.a.J[x]({K:a,pb:null!=b?b:1});return this};W[C].orderBy=W[C].J;
W[C].la=function(a){this.Td(this.a.la,"groupBy");null==this.a.la&&(this.a.la=[]);this.a.la[x][w](this.a.la,e[C][y][G](arguments));return this};W[C].groupBy=W[C].la;function Eg(a,b){switch(a){case "COUNT":case "DISTINCT":return!0;case "AVG":case "GEOMEAN":case "STDDEV":case "SUM":return 4==b||3==b;case "MAX":case "MIN":return 4==b||3==b||5==b||2==b}return!1}qa(W[C],function(){var a=new W(this[Oa],this.a.h);a.a=this.a[Ya]();a.a.vc=null;return a});qa(W[C],W[C][Ya]);
function Fg(a,b){zg[G](this,a,new og);na(this.a,b)}N(Fg,zg);L("lf.query.UpdateBuilder",Fg,void 0);Fg[C].set=function(a,b){var c={Tc:b instanceof Wd?b.mb():-1,K:a,value:b};null!=this.a.set?this.a.set[x](c):this.a.set=[c];return this};Fg[C].set=Fg[C].set;Fg[C].A=function(a){this.Ud();this.a.A=a;return this};Fg[C].where=Fg[C].A;Fg[C].Ud=function(){if(null!=this.a.A)throw new S("SyntaxError","where() has already been called.");};
Fg[C].cb=function(){Fg.$a.cb[G](this);if(null==this.a.set)throw new S("SyntaxError","Invalid usage of update()");if(this.a.set[nb](function(a){return a[z]instanceof Wd}))throw new S("SyntaxError","Update set value not bound");};
function Gg(a){this.a=a;this.Ea=null}Gg[C].ec=function(){null===this.Ea&&(this.Ea=this.ed());return this.Ea};function Hg(a){Gg[G](this,a)}N(Hg,Gg);Hg[C].ed=function(){return this.a.qc?new Vf(this.a.Ra,this.a[Ma]):new Uf(this.a.Ra,this.a[Ma])};function Ig(a){Gg[G](this,a)}N(Ig,Gg);Ig[C].ed=function(){var a=new Xf(this.a[u],this.a.set),b=null!=this.a.A?new Yf(this.a.A.Db()):null,c=new Zf(this.a[u]);null===b?a.ia(c):(b.ia(c),a.ia(b));return a};
function Jg(a,b){this.Ea=a;this.Ke=b}Jg[C].ec=function(){this.Ke[n](function(a){this.Ea=a.xb(this.Ea)},this);return this.Ea};
function Kg(a){Gg[G](this,a)}N(Kg,Gg);Kg[C].ed=function(){var a=new Wf(this.a.g),b=null!=this.a.A?new Yf(this.a.A.Db()):null,c=new Zf(this.a.g);null===b?a.ia(c):(b.ia(c),a.ia(b));return(new Jg(a,[new ig])).ec()};
function Lg(){}N(Lg,hg);Lg[C].xb=function(a){this.ha=a;this.Na(this.ha);return this.ha};Lg[C].Na=function(a){if(a instanceof Yf&&a.Ca instanceof Ff){O(1==a.ua(),"SelectNode must have exactly one child.");var b=a.lb(0);if(b instanceof $f){var c=new gg(a.Ca);vf(a,b,c,c);a==this.ha&&(this.ha=c);a=c}}a.aa()[n](function(a){this.Na(a)},this)};
function Ng(){this.Rd=new R}N(Ng,hg);K=Ng[C];K.xb=function(a){this.ha=a;this.Na(this.ha);this.Rd[q]();return this.ha};K.Na=function(a){if(this.Df(a)){var b=a.Ca instanceof ie?this.Mj(a):this.Lj(a);this.Rd.add(a);b==a&&(b=a.lb(0));null!==b&&(Ab(b[Ea]())&&(this.ha=b),this.Df(b)&&!this.Rd[v](b)&&this.Na(b))}else a.aa()[n](function(a){this.Na(a)},this)};
K.Dd=function(a,b){var c=a;if(this.fk(a))c=tf(a),this.Dd(a,b);else if(this.ek(a)){var d=[],c=uf(a,b,function(a){a=new Yf(a.Ca);d[x](a);return a});d[n](function(a){this.Dd(a,b)},this)}return c};K.Mj=function(a){var b=new R([a.Ca.K.Z().Aa()]),c=function(a){return this.mf(a,b)}[r](this);return this.Dd(a,c)};K.Lj=function(a){var b=new R([a.Ca.Ja.Z().Aa(),a.Ca.Xa.Z().Aa()]),c=function(a){return this.mf(a,b)}[r](this);return this.Dd(a,c)};
K.mf=function(a,b){var c=new R;pf(a)[n](function(a){c.add(a[u].Aa())},this);a instanceof Zf&&c.add(a[u].Aa());return c.Bh(b)};K.Df=function(a){return a instanceof Yf&&!(a.Ca instanceof xf)};K.ek=function(a){a=a.lb(0);return a instanceof $f||a instanceof gg};K.fk=function(a){return a.lb(0)instanceof Yf};
function Og(a){Gg[G](this,a);this.dg=this.Of=this.rg=this.Vf=this.We=this.zf=this.ng=this.jf=this.tg=null}N(Og,Gg);K=Og[C];K.ed=function(){this.ti();var a=this.yh(),b=[new ig,new jg,new Ng,new Lg];return(new Jg(a,b)).ec()};K.ti=function(){this.zi();this.ni();this.xi();this.ui();this.yi();this.si();this.pi();this.mi();this.vi()};
K.yh=function(){for(var a=[this.Of,this.rg,this.dg,this.Vf,this.We,this.zf,this.ng,this.jf],b=null,c=null,d=0;d<a[B];d++){var g=a[d];null!==g&&(null===c?c=g:a[b].ia(g),b=d)}this.tg[n](function(c){a[b].ia(c)});return c};K.zi=function(){this.tg=this.a.g.map(function(a){return new Zf(a)},this)};K.ni=function(){2<=this.a.g[B]&&(this.jf=new $f)};K.xi=function(){this.ng=null!=this.a.A?new Yf(this.a.A.Db()):null};K.ui=function(){this.a.J&&(this.Vf=new bg(this.a.J))};
K.si=function(){null!=this.a.na&&(this.Of=new eg(this.a.na))};K.yi=function(){null!=this.a.ma&&0<this.a.ma&&(this.rg=new fg(this.a.ma))};K.pi=function(){null!=this.a.la&&(this.zf=new dg(this.a.la))};K.mi=function(){var a=this.a.h[Ca](function(a){return a instanceof T});null!=this.a.J&&this.a.J[n](function(b){b.K instanceof T&&a[x](b.K)});0<a[B]&&(this.We=new cg(a))};K.vi=function(){this.dg=new ag(this.a.h||[],this.a.la||null)};
function Pg(){}Pg[C].create=function(a){var b=null;if(a instanceof ng)b=new Hg(a);else if(a instanceof mg)b=new Kg(a);else if(a instanceof le)b=new Og(a);else if(a instanceof og)b=new Ig(a);else throw new S("SyntaxError","Unknown query context");return b.ec()};
function Qg(a){U[G](this,1,1);this.C=a}N(Qg,U);f(Qg[C],function(){return"delete("+this.C[h]()+")"});Qg[C].ca=J("C");Qg[C].ja=function(a,b){var c=b[0][F].map(function(a){return a.ta});a[m](this.C,c);return[Pd()]};
function Rg(a){U[G](this,1,1);this.yf=a}N(Rg,U);f(Rg[C],function(){return"groupBy("+this.yf.map(function(a){return a.j()})[t]()+")"});Rg[C].ja=function(a,b){return this.hh(b[0])};Rg[C].hh=function(a){var b=new Ef,c=function(a){return this.yf.map(function(b){return a.M(b)},this)[I](",")}[r](this);a[F][n](function(a){b.add(c(a),a)},this);return b.H().map(function(c){return new Md(b.get(c),a.W())},this)};
function Sg(a){O(1<a[B],"Should only be called for cross-column indices.");a=a.map(function(a){return a.c()});a=hd[w](null,a);var b=[];gd(a,function(a){b[x](a)});return b}function Tg(a){this.Kb=a}Tg[C].kd=function(){return 1==this.Kb.h[B]?[Kd()]:[this.Kb.h.map(function(){return Kd()})]};function Ug(a,b){this.Kb=a;this.qa=b;this.Zd=this.Mf=null}
Ug[C].ih=function(a){var b=new Q;this.qa.H()[n](function(c){var d=this.qa.get(c).map(function(b){return a.pd(b)},this),g=new mf([Kd()]);d[n](function(a){a=new mf(a.nk());g=nf(g,a)});b.set(c,g)},this);return b};Ug[C].fi=function(a){for(var b=this.Kb.h[B]-1;0<=b;b--){var c=this.Kb.h[b];if(null!==a.get(c.Ya[h](),null))break;a.set(c.Ya[h](),new mf([Kd()]))}};Ug[C].kd=function(a){if(this.Mf==a)return this.Zd;var b=this.ih(a);this.fi(b);this.Zd=1==this.Kb.h[B]?b.c()[0].c():Sg(this.Si(b));this.Mf=a;return this.Zd};
Ug[C].Si=function(a){var b=new Q,c=0;this.Kb.h[n](function(a){b.set(a.Ya[h](),c);c++});return a.H()[ob](function(a,c){return b.get(a)-b.get(c)}).map(function(b){return a.get(b)})};
function Vg(a,b){this.wg=b;this.N=a.m(nd)}Vg[C].uh=function(a,b){var c=b[Ca](this.jj,this);if(0==c[B])return null;c=this.ri(c);if(0==c[B])return null;if(1==c[B])return c[0];var d=Number.MAX_VALUE;return c[db](function(b,c){var l=c.gh(a);return l<d?(d=l,c):b},null)};Vg[C].ri=function(a){return this.wg.Fa().map(function(b){b=new Wg(this.N,b);b.Ah(a);return b},this)[Ca](function(a){return a.oj()})};Vg[C].jj=function(a){return a instanceof ie&&a.Ef()?a.K.Z()==this.wg:!1};
function Wg(a,b){this.N=a;this.nb=b;this.Bf=new R;this.Bf[eb](this.nb.h.map(function(a){return a.Ya[h]()}));this.Ae=this.qa=null}K=Wg[C];K.Ni=function(){return null===this.qa?[]:this.qa.c()};K.tf=function(){O(this.qa);null===this.Ae&&(this.Ae=new Ug(this.nb,this.qa));return this.Ae};K.Ah=function(a){a[n](function(a){var c=a.vb()[0][h]();this.Bf[v](c)&&(null===this.qa&&(this.qa=new Ef),this.qa.add(c,a.ka()))},this)};
K.oj=function(){if(null===this.qa)return!1;for(var a=!1,b=!0,c=0;c<this.nb.h[B];c++){var d=this.qa.s(this.nb.h[c].Ya[h]());if(a&&d){b=!1;break}d||(a=!0)}return b};K.gh=function(a){a=this.tf().kd(a);var b=this.N.get(this.nb.j());return a[db](function(a,d){return a+b.ad(d)},0)};
function Xg(a,b,c,d){U[G](this,0,-1);this.N=a.m(nd);this.index=b;this.Kf=c;this.Je=d;this.Od=this.Nd=!1}N(Xg,U);f(Xg[C],function(){return"index_range_scan("+this[Ta].j()+", ?, "+(this.Je?"reverse":"natural")+(this.Nd?", limit:?":"")+(this.Od?", skip:?":"")+")"});Xg[C].Qc=function(a){var b=this[t](),c=this.Kf.kd(a),b=b[Ha]("?",c[t]());this.Nd&&(b=b[Ha]("?",a.na[t]()));this.Od&&(b=b[Ha]("?",a.ma[t]()));return b};
Xg[C].ja=function(a,b,c){a=this.Kf.kd(c);c=this.N.get(this[Ta].j()).Pa(a,this.Je,this.Nd?c.na:void 0,this.Od?c.ma:void 0).map(function(a){return new Qc(a,{})},this);return[Sd(c,[this[Ta].ug])]};
function Yg(a){U[G](this,1,1);this.Cd=a}N(Yg,U);f(Yg[C],ub("select(?)"));Yg[C].Qc=function(a){a=a.pd(this.Cd);return this[t]()[Ha]("?",a[t]())};Yg[C].ja=function(a,b,c){return[c.pd(this.Cd).eval(b[0])]};
function Zg(a,b){U[G](this,1,1);this.oa=a.m(md);this.C=b}N(Zg,U);f(Zg[C],function(){return"table_access_by_row_id("+this.C[h]()+")"});Zg[C].ca=J("C");Zg[C].ja=function(a,b){return[Sd(this.oa.get(b[0].Ri()),[this.C.Aa()])]};
function $g(a,b){U[G](this,0,-1);this.oa=a.m(md);this.N=a.m(nd);na(this,b)}N($g,U);f($g[C],function(){var a="table_access("+this[u][h]();null===this[u].Oa()||(a+=" as "+this[u].Oa());return a+")"});$g[C].ca=J("table");$g[C].ja=function(){var a=this.N.get(this[u].Hb()).Pa();return[Sd(this.oa.get(a),[this[u].Aa()])]};
function ah(a){this.l=a}N(ah,hg);ah[C].xb=function(a,b){this.ha=a;qf(a,function(a){return a instanceof $g})[n](function(a){var d=this.li(a);if(0!=d[B]){var g=(new Vg(this.l,a[u])).uh(b,d.map(function(a){return b.pd(a.Cd)}));if(null!==g){var k=new Q;d[n](function(a){k.set(a.Cd,a)},this);this.ha=this.Xj(g,k,a,b)}}},this);return this.ha};ah[C].li=function(a){var b=[];for(a=a[Ea]();a;)a instanceof Yg&&b[x](a),a=a[Ea]();return b};
ah[C].Xj=function(a,b,c){a.Ni().map(function(a){return b.get(a)})[n](rf);a=new Xg(this.l,a.nb,a.tf(),!1);var d=new Zg(this.l,c[u]);d.ia(a);vf(c,c,d,a);return a.Gb()};
function bh(a,b){U[G](this,0,-1);this.N=a.m(nd);this.C=b}N(bh,U);f(bh[C],function(){return"insert("+this.C[h]()+")"});bh[C].ca=J("C");bh[C].ja=function(a,b,c){ch(this.C,c[Ma],this.N);a.ob(this.C,c[Ma]);return[Sd(c[Ma],[this.C[h]()])]};function ch(a,b,c){a=a.gc().ne();if(null===a?0:a.h[0][La]){var d=a.h[0].Ya[h](),g=c.get(a.j()).max()[0]||0;b[n](function(a){if(0==a.D()[d]||null==a.D()[d])g++,a.D()[d]=g})}}function dh(a,b){U[G](this,0,-1);this.N=a.m(nd);this.C=b}N(dh,U);
f(dh[C],function(){return"insert_replace("+this.C[h]()+")"});dh[C].ca=J("C");dh[C].ja=function(a,b,c){ch(this.C,c[Ma],this.N);a.ve(this.C,c[Ma]);return[Sd(c[Ma],[this.C[h]()])]};
function eh(a){U[G](this,2,0);this.cg=a}N(eh,U);f(eh[C],function(){return"join("+this.cg[t]()+")"});eh[C].ja=function(a,b){return[this.cg.Rh(b[0],b[1])]};
function fh(){U[G](this,1,1)}N(fh,U);f(fh[C],ub("limit(?)"));fh[C].Qc=function(a){return this[t]()[Ha]("?",a.na[t]())};fh[C].ja=function(a,b,c){b[0][F][H](c.na);return b};
function gh(a){U[G](this,-1,1);this.J=a}N(gh,U);K=gh[C];f(K,function(){return"order_by("+ne(this.J)+")"});K.ja=function(a,b){if(1==b[B]){var c=this.hi(b[0]);(null===c?b[0]:b[0].fc(c))[F][ob](this.Oh[r](this))}else b[ob](this.Tj[r](this));return b};K.hi=function(a){for(var b=null,c=0;c<this.J[B];c++){var d=Lf(this.J[c].K);if(a.cj(d)){b=d;break}}return b};
K.L=function(a,b){var c=null,d=null,g=null,k=-1;do k++,g=this.J[k].K,c=this.J[k].pb,d=a(g),g=b(g);while(d==g&&k+1<this.J[B]);d=d<g?-1:d>g?1:0;return 1==c?d:-d};K.Tj=function(a,b){return this.L(function(b){return b instanceof T?a.fc(b):a[F][a[F][B]-1].M(b)},function(a){return a instanceof T?b.fc(a):b[F][b[F][B]-1].M(a)})};K.Oh=function(a,b){return this.L(function(b){return a.M(b)},function(a){return b.M(a)})};
function hh(a,b){this.Da=a;this.G=b}hh[C].xf=function(){return this.G[nb](function(a){return a instanceof T},this)?this.aj():this.bj()};
hh[C].aj=function(){if(1==this.G[B]&&"DISTINCT"==this.G[0].Yb){var a=this.Da.fc(this.G[0])[F].map(function(a){var b=new Td(new Qc(-1,{}),this.Da.xe());b.Me(this.G[0],a.M(this.G[0][ab]));return b},this);return new Md(a,[])}var b=new Td(new Qc(-1,{}),this.Da.xe());this.G[n](function(a){var d=a instanceof T?this.Da.fc(a):this.Da[F][0].M(a);b.Me(a,d)},this);return new Md([b],this.Da.W())};
hh[C].bj=function(){var a=e(this.Da[F][B]),b=this.Da.xe();this.Da[F][n](function(c,d){a[d]=new Td(new Qc(c.ta.id(),{}),b);this.G[n](function(b){a[d].Me(b,c.M(b))},this)},this);return new Md(a,this.Da.W())};function ih(a,b){var c=a.map(function(a){return(new hh(a,b)).xf()[F][0]});return new Md(c,a[0].W())};
function jh(a,b){U[G](this,-1,1);this.h=a;this.Jb=b}N(jh,U);K=jh[C];f(K,function(){var a="project("+this.h[t]();if(null!==this.Jb)var b=this.Jb.map(function(a){return a.j()})[I](", "),a=a+(", groupBy("+b+")");return a+")"});K.ja=function(a,b){return 0==b[B]?[Pd()]:1==b[B]?[this.Zh(b[0])]:[this.Xh(b)]};K.dj=function(){return this.h[nb](function(a){return a instanceof T})||null!==this.Jb};K.Xh=function(a){return ih(a,this.h)};K.Zh=function(a){return 0==this.h[B]?a:(new hh(a,this.h)).xf()};
function kh(){U[G](this,1,1)}N(kh,U);f(kh[C],ub("skip(?)"));kh[C].Qc=function(a){return this[t]()[Ha]("?",a.ma[t]())};kh[C].ja=function(a,b,c){return[new Md(b[0][F][y](c.ma),b[0].W())]};
function lh(){}N(lh,hg);lh[C].xb=function(a){var b=qf(a,function(a){return a instanceof fh||a instanceof kh});if(0==b[B])return a;var c=this.ki(a);if(null===c)return a;b[n](function(a){this.wj(a,c)},this);return c.Gb()};lh[C].wj=function(a,b){a instanceof fh?b.Nd=!0:b.Od=!0;return rf(a).parent};lh[C].ki=function(a){a=qf(a,function(a){return a instanceof Xg},function(a){return a instanceof jh&&a.dj()||a instanceof gh||1!=a.ua()||a instanceof Yg});return 0<a[B]?a[0]:null};
function mh(a){this.l=a}N(mh,hg);mh[C].xb=function(a){var b=nh(a);if(null===b)return a;a=this.Vg(b);a==b&&(a=this.Ug(b));return a.Gb()};mh[C].Vg=function(a){var b=a,c=oh(a.lb(0));if(null!==c){var d;d=a.J;for(var g=null,k=c[u].Fa(),l=0;l<k[B]&&null===g;l++)g=ph(k[l],d);d=g;if(null===d)return b;b=new Xg(this.l,d.nb,new Tg(d.nb),d.Hf);d=new Zg(this.l,c[u]);d.ia(b);rf(a);b=vf(c,c,d,b)}return b};
mh[C].Ug=function(a){var b=a,c=qh(a.lb(0));if(null!==c){var d=ph(c[Ta],a.J);if(null===d)return b;c.Je=d.Hf;b=rf(a).parent}return b};function qh(a){a=qf(a,function(a){return a instanceof Xg},function(a){return 1!=a.ua()});return 0<a[B]?a[0]:null}function oh(a){a=qf(a,function(a){return a instanceof $g},function(a){return 1!=a.ua()});return 0<a[B]?a[0]:null}function nh(a){a=qf(a,function(a){return a instanceof gh});return 0<a[B]?a[0]:null}
function ph(a,b){if(a.h[B]!=b[B]||!b[pb](function(b,c){return b.K[h]()==a.h[c].Ya[h]()}))return null;var c=rh(b,a);return c[0]||c[1]?{nb:a,Hf:c[1]}:null}function rh(a,b){var c=a[db](function(a,b){return a<<1|(0==b.pb?0:1)},0),d=b.h[db](function(a,b){return a<<1|(0==b.pb?0:1)},0),d=c^d,c=0==d,d=d==ea.pow(2,ea.max(a[B],b.h[B]))-1;return[c,d]};
function sh(a,b,c){this.Ea=a;this.Nj=b;this.Ke=c}sh[C].ec=function(){this.Ke[n](function(a){this.Ea=a.xb(this.Ea,this.Nj)},this);return this.Ea};
function th(a,b){U[G](this,1,1);this.C=a;this.uk=b}N(th,U);f(th[C],function(){return"update("+this.C[h]()+")"});th[C].ca=J("C");th[C].ja=function(a,b){var c=b[0][F].map(function(a){var b=this.C.cc(a.ta.Za());this.uk[n](function(a){b.D()[a.K[h]()]=a[z]},this);return b},this);a[qb](this.C,c);return[Pd()]};
function uh(a){this.l=a}uh[C].create=function(a,b){if(a instanceof Vf||a instanceof Uf)return this.ce(a,b);if(a instanceof ag||a instanceof eg||a instanceof fg)return this.ce(a,b,[new ah(this.l),new mh(this.l),new lh]);if(a instanceof Wf||a instanceof Xf)return this.ce(a,b,[new ah(this.l)]);throw new S("NotSupportedError","Unknown query plan node");};uh[C].ce=function(a,b,c){a=of(a,M(this.sj,this));return null!=c?new oe((new sh(a,b,c)).ec()):new oe(a)};
uh[C].sj=function(a){if(a instanceof ag)return new jh(a.h,a.Jb);if(a instanceof dg)return new Rg(a.h);if(a instanceof cg)return new Mf(a.h);if(a instanceof bg)return new gh(a.J);if(a instanceof fg)return new kh;if(a instanceof eg)return new fh;if(a instanceof Yf)return new Yg(a.Ca.ka());if(a instanceof $f)return new kg;if(a instanceof gg)return new eh(a.Ca);if(a instanceof Zf)return new $g(this.l,a[u]);if(a instanceof Wf)return new Qg(a[u]);if(a instanceof Xf)return new th(a[u],a.Qe);if(a instanceof
Vf)return new dh(this.l,a[u]);if(a instanceof Uf)return new bh(this.l,a[u]);throw new S("NotSupportedError","Unknown node type");};

function vh(a){this.qj=new Pg;this.Hj=new uh(a)}vh[C].Mi=function(a){var b=this.qj[Qa](a);return this.Hj[Qa](b,a)};
function wh(){this.Rf=new Q}K=wh[C];K.jd=function(a){var b=this.Rf.get(a[h](),null);null===b&&(b=new xh,this.Rf.set(a[h](),b));return b};K.Yi=function(a,b,c){b[n](function(b){this.jd(b).Xi(a,c)},this)};K.kh=function(a,b,c){return b[pb](function(b){return this.jd(b).jh(a,c)},this)};K.hg=function(a,b,c){var d=this.kh(a,b,c);d&&this.Yi(a,b,c);return d};K.Gd=function(a,b){b[n](function(b){this.jd(b).Gd(a)},this)};K.vh=function(a){a[n](function(a){this.jd(a).Wa=null},this)};
function xh(){this.Vb=this.Ka=this.Wa=this.zc=null}xh[C].Gd=function(a){this.zc==a&&(this.zc=null);this.Wa==a&&(this.Wa=null);null===this.Ka||this.Ka[m](a);null===this.Vb||this.Vb[m](a)};xh[C].jh=function(a,b){var c=null===this.Ka||this.Ka.Ba();return 0==b?(null===this.Vb||this.Vb.Ba())&&c&&null===this.zc&&null!==this.Wa&&this.Wa==a:3==b?null===this.zc&&null===this.Wa&&null!==this.Ka&&this.Ka[v](a):1==b?null===this.Wa:c&&(null===this.Wa||this.Wa==a)};
xh[C].Xi=function(a,b){0==b?(this.Wa=null,this.zc=a):3==b?(null===this.Vb&&(this.Vb=new R),this.Vb.add(a),null===this.Ka&&(this.Ka=new R),this.Ka[m](a)):1==b?(null===this.Ka&&(this.Ka=new R),this.Ka.add(a)):2==b&&(this.Wa=a)};
function yh(){this.Rb=new zh;this.Ic=new wh}K=yh[C];K.Ub=function(a){(2>a[hb]()||2>a[hb]())&&this.Ic.vh(a.ca().c());this.Rb.ob(a);this.be();return a.Cc().ra};K.be=function(){for(var a=this.Rb.c(),b=0;b<a[B];b++){var c=a[b],d=!1;if(d=0==c.da()?this.ig(c,1,3):this.ig(c,2,0))this.Rb[m](c),this.$h(c)}};K.ig=function(a,b,c){var d=!1,g=a.ca().c();this.Ic.hg(a.ka(),g,b)&&(d=this.Ic.hg(a.ka(),g,c));return d};K.$h=function(a){a[Ga]()[E](M(this.Dj,this,a),M(this.Cj,this,a))};
K.Dj=function(a,b){this.Ic.Gd(a.ka(),a.ca().c());a.Cc()[mb](b);this.be()};K.Cj=function(a,b){this.Ic.Gd(a.ka(),a.ca().c());a.Cc()[cb](b);this.be()};function zh(){this.Rb=[]}zh[C].ob=function(a){gc(this.Rb,a,function(a,c){var d=a[hb]()-c[hb]();return 0==d?a.ka()-c.ka():d})};zh[C].c=function(){return this.Rb[y]()};ja(zh[C],function(a){var b=this.Rb;a=Tb(b,a);var c;(c=0<=a)&&Zb(b,a);return c});
function Ah(a,b){this.Qh=Zd.ke();this.Mc=a;this.yd=b;this.G=this.Jh()}Ah[C].Jh=function(){if(0<this.Mc.h[B])return this.Mc.h;var a=[],b=this.Mc.g[y]();null!=this.Mc.ue&&b[x](this.Mc.ue);b[n](function(b){b.vb()[n](function(b){a[x](b)})});return a};Ah[C].L=function(a,b){return this.G[pb](function(c){return this.Qh.je(c.da(),"eq")(a.M(c),b.M(c))},this)};
Ah[C].Tg=function(a,b){for(var c=null===a?[]:a[F],d=Zc(c,b[F],M(this.L,this),function(a){return c[a]}),g=[],k=0,l=0;l<c[B];l++){var p=c[l];d[k]==p?k++:(p=this.yd[H](k,1),p=Bh(l,p,0,this.yd),g[x](p))}d=Zc(c,b[F],M(this.L,this),function(a,c){return b[F][c]});for(l=k=0;l<b[F][B];l++)p=b[F][l],d[k]==p?k++:(this.yd[H](l,0,p.ta.D()),p=Bh(l,[],1,this.yd),g[x](p));return g};function Bh(a,b,c,d){return{vk:c,index:a,object:d,zk:b,type:"splice"}};
function Ch(){this.dc=new Q}K=Ch[C];K.oe=function(a){return Fb(a)[t]()};K.Qd=function(a,b){var c=this.oe(a.nd()),d=this.dc.get(c,null);null===d&&(d=new Dh(a),this.dc.set(c,d));d.Qd(b)};K.Ie=function(a,b){var c=this.oe(a.nd()),d=this.dc.get(c,null);O(null!=d,"Attempted to unobserve a query that was not observed.");var g=d.Ie(b);O(g,"removeObserver: Inconsistent state detected.");d.fj()||this.dc[m](c)};
K.qe=function(a){var b=new R;a[n](function(a){b.add(a[h]())});var c=[];this.dc.c()[n](function(a){a=a.Ec();a[Ba].g[nb](function(a){return b[v](a[h]())})&&c[x](a)});return c};K.Fg=function(a,b){var c=this.oe(null!=a.vc?a.vc:a),c=this.dc.get(c,null);return null!==c?(c.tk(b),!0):!1};function Dh(a){this.eh=a;this.Lc=new R;this.Aj=[];this.Nf=null;this.Mh=new Ah(a.nd(),this.Aj)}K=Dh[C];K.Qd=function(a){this.Lc[v](a)?Pb("Attempted to register observer twice."):this.Lc.add(a)};K.Ie=function(a){return this.Lc[m](a)};
K.Ec=function(){return this.eh.Ki()};K.fj=function(){return 0<this.Lc.Y()};K.tk=function(a){var b=this.Mh.Tg(this.Nf,a);this.Nf=a;0<b[B]&&this.Lc.c()[n](function(a){a(b)})};
function Eh(a,b){var c=a.m(rd),d=b||{},g=d.Ak||0,k=new Ke;a.hb(md,k);var k=null,l=!1;switch(g){case 1:k=new De(c);break;case 5:k=new Ee(c);break;case 4:k=new Je(a,c,d.Bk);break;case 3:k=new we(c,d.xk);l=!0;break;default:k=new Be(a,c)}a.hb(ld,k);var p=new jf;a.hb(nd,p);return k.Qa(d.yk)[E](function(){a.hb(od,new vh(a));var b=new yh;a.hb(pd,b);b=new Ch;a.hb(qd,b);return p.Qa(c)})[E](function(){l&&(new te(a)).jk();return(new hf(a)).Qa(c)})};

function Fh(a,b){this.l=a;this.ub=a.m(ld);this.La=a.m(pd);this.wb=a.m(qd);this.Ma=new R(b);this.Ta=new Gd(this.l,this.Ma.c());this.Sb=Lc();this.Ac=Lc();this.Re=Lc()}K=Fh[C];ha(K,function(){this.Re[mb]();return this.Ac.ra});K.da=ub(1);K.ca=J("Ma");K.Cc=J("Sb");K.ka=function(){return Fb(this)};ua(K,ub(2));K.Jg=function(){this.La.Ub(this);return this.Re.ra};
K.ah=function(a){a=a.Ec();return a.Ge.Gb()[Ga](this.Ta,a[Ba])[E](function(a){return a[0].le()},M(function(a){this.Ta.yb();var c=new Dc(a[jb]);this.Ac[cb](c);throw a;},this))};K.fa=function(){this.ub.Eb(this.da(),this.Ta).fa()[E](M(function(){this.Oc();this.Ac[mb]()},this),M(function(a){this.Ta.yb();this.Ac[cb](a)},this));return this.Sb.ra};K.yb=function(){this.Ta.yb();this.Ac[mb]();return this.Sb.ra};K.Oc=function(){var a=this.wb.qe(this.Ma.c());0!=a[B]&&(a=new re(this.l,a),this.La.Ub(a))};
function Gh(a){this.l=a;this.La=a.m(pd);this.Rc=null;this.ya=0}L("lf.proc.Transaction",Gh,void 0);var Hh=new Q(0,new R([1,4]),1,new R([2]),2,new R([3,5,6]),3,new R([2,7]),4,new R([7]),5,new R([7]),6,new R([7]));Gh[C].Ha=function(a){var b=Hh.get(this.ya,null);if(null===b||!b[v](a))throw new S("TransactionError","Invalid transaction state transition, from "+this.ya+" to "+a+".");this.ya=a};
ha(Gh[C],function(a){this.Ha(4);var b=[];try{a[n](function(a){a.cb();b[x](a.Ec())},this)}catch(c){return this.Ha(7),Ic(c)}a=new lg(this.l,b);return this.La.Ub(a)[E](M(function(a){this.Ha(7);return a.map(function(a){return a.le()})},this),M(function(a){this.Ha(7);throw a;},this))});ha(Gh[C],Gh[C][Ga]);Gh[C].bh=function(a){this.Ha(1);this.Rc=new Fh(this.l,a);return this.Rc.Jg()[E](M(function(){this.Ha(2)},this))};Gh[C].begin=Gh[C].bh;
Gh[C].$g=function(a){this.Ha(3);return this.Rc.ah(a)[E](M(function(a){this.Ha(2);return a},this),M(function(a){this.Ha(7);throw a;},this))};Gh[C].attach=Gh[C].$g;Gh[C].fa=function(){this.Ha(5);return this.Rc.fa()[E](M(function(){this.Ha(7)},this))};Gh[C].commit=Gh[C].fa;Gh[C].yb=function(){this.Ha(6);return this.Rc.yb()[E](M(function(){this.Ha(7)},this))};Gh[C].rollback=Gh[C].yb;
function X(a){this.l=a;this.B=a.m(rd);this.te=!1}L("lf.proc.Database",X,void 0);X[C].Qa=function(a){this.l.hb(rd,this.B);return Eh(this.l,a)[E](M(function(){this.te=!0;return this},this))};X[C].init=X[C].Qa;X[C].Ib=J("B");X[C].getSchema=X[C].Ib;X[C].bc=function(){if(!this.te)throw new S("UninitializedError","Database is not initialized");};X[C].select=function(a){this.bc();return new W(this.l,1!=arguments[B]||null!=arguments[0]?e[C][y][G](arguments):[])};X[C].select=X[C].select;
X[C].ob=function(){this.bc();return new Bg(this.l)};X[C].insert=X[C].ob;X[C].ve=function(){this.bc();return new Bg(this.l,!0)};X[C].insertOrReplace=X[C].ve;Aa(X[C],function(a){this.bc();return new Fg(this.l,a)});Aa(X[C],X[C][qb]);va(X[C],function(){this.bc();return new Ag(this.l)});X[C]["delete"]=X[C][ib];X[C].observe=function(a,b){this.l.m(qd).Qd(a,b)};X[C].observe=X[C].observe;X[C].unobserve=function(a,b){this.l.m(qd).Ie(a,b)};X[C].unobserve=X[C].unobserve;X[C].Hh=function(){this.bc();return new Gh(this.l)};
X[C].createTransaction=X[C].Hh;pa(X[C],function(){try{this.l.m(ld)[Xa]()}catch(a){}this.l[q]();this.te=!1});pa(X[C],X[C][Xa]);
function Y(a,b,c,d,g,k){this.C=a;this.w=b;this.Jf=c;this.Gf=d;this.Bg=g;this.bb=k||null}L("lf.schema.BaseColumn",Y,void 0);K=Y[C];ia(K,J("w"));K.j=function(){return this.C.Aa()+"."+this.w};f(K,function(){return this.j()});K.Z=J("C");K.da=J("Bg");K.Oa=J("bb");K.Fa=function(){null==this.pa&&(this.pa=[],this.Z().Fa()[n](function(a){-1!=a.h.map(function(a){return a.Ya[h]()})[A](this.w)&&this.pa[x](a)},this));return this.pa};K.ic=J("Gf");K.ud=J("Jf");K.Ia=function(a){return Gf(this,a,"eq")};Y[C].eq=Y[C].Ia;
Y[C].Sf=function(a){return Gf(this,a,"neq")};Y[C].neq=Y[C].Sf;Y[C].Be=function(a){return Gf(this,a,"lt")};Y[C].lt=Y[C].Be;Y[C].rj=function(a){return Gf(this,a,"lte")};Y[C].lte=Y[C].rj;Y[C].Zi=function(a){return Gf(this,a,"gt")};Y[C].gt=Y[C].Zi;Y[C].$i=function(a){return Gf(this,a,"gte")};Y[C].gte=Y[C].$i;Y[C].match=function(a){return Gf(this,a,"match")};Y[C].match=Y[C].match;Y[C].dh=function(a,b){return Gf(this,[a,b],"between")};Y[C].between=Y[C].dh;Y[C].gj=function(a){return Gf(this,a,"in")};
Y[C]["in"]=Y[C].gj;Y[C].mj=function(){return this.Ia(null)};Y[C].isNull=Y[C].mj;Y[C].lj=function(){return this.Sf(null)};Y[C].isNotNull=Y[C].lj;Y[C].rc=function(a){return new Y(this.C,this.w,this.Jf,this.Gf,this.Bg,a)};Y[C].as=Y[C].rc;
function Ih(){this.Jd=new Q}var Jh;la(Ih[C],function(){this.Jd[q]()});L("lf.Global.prototype.clear",Ih[C][q],void 0);Ih[C].hb=function(a,b){this.Jd.set(a[t](),b);return b};L("lf.Global.prototype.registerService",Ih[C].hb,void 0);Ih[C].m=function(a){var b=this.Jd.get(a[t](),null);if(null==b)throw new S("NotFoundError",a[t]());return b};L("lf.Global.prototype.getService",Ih[C].m,void 0);Ih[C].ze=function(a){return this.Jd.s(a[t]())};L("lf.Global.prototype.isRegistered",Ih[C].ze,void 0);
function Kh(a,b){this.Kj=a;this.yj=b}Kh[C].ne=J("Kj");Kh[C].Ji=J("yj");
function Z(a){this.w=a;this.G=new Q;this.Eg=new R;this.oc=new R;this.xd=new R;var b=this.w;this.kc="pk"+(b[0].toUpperCase()+b.substring(1));this.pa=new Q;this.Bd=!1;this.tc(a)}L("lf.schema.TableBuilder",Z,void 0);var Lh=new R([0,6]);Z[C].tc=function(a){if(!/^[A-Za-z_][A-Za-z0-9_]*$/.test(a))throw new S("SyntaxError",a+" violates naming rule");if(this.G.s(a)||this.pa.s(a)||this.oc[v](a))throw new S("SyntaxError",this.w+"."+a+" is already defined");};
Z[C].qh=function(a){var b=!1;a[n](function(a){var d=this.G.get(a[jb]);b=b||a[La];if(a[La]&&3!=d)throw new S("SyntaxError","Can not use autoIncrement with a non-integer primary key.");},this);if(b&&1<a[B])throw new S("SyntaxError","Can not use autoIncrement with a cross-column primary key.");};Z[C].Lg=function(a,b){this.tc(a);this.G.set(a,b);Lh[v](b)&&this.Ue([a]);return this};Z[C].addColumn=Z[C].Lg;
Z[C].Og=function(a,b){this.tc(this.kc);var c=this.wd(a,!0,void 0,b);this.qh(c);c[n](function(a){this.Eg.add(a[jb])},this);this.oc.add(this.kc);this.pa.set(this.kc,c);return this};Z[C].addPrimaryKey=Z[C].Og;Z[C].Mg=function(){return this};Z[C].addForeignKey=Z[C].Mg;Z[C].Pg=function(a,b){this.tc(a);var c=this.wd(b,!0);this.pa.set(a,c);this.oc.add(a);return this};Z[C].addUnique=Z[C].Pg;Z[C].Ue=function(a){a=this.wd(a,!1);this.ph(a);a[n](function(a){this.xd.add(a[jb])},this);return this};
Z[C].addNullable=Z[C].Ue;Z[C].ph=function(a){this.pa.H()[n](function(b){var c=new R;this.pa.get(b)[n](function(a){c.add(a[jb])});var d=a[Ca](function(a){return c[v](a[jb])});if(1<c.Y()&&0<d[B])throw new S("SyntaxError","Cross-column index "+b+" refers to nullable columns: "+d[I](","));},this)};Z[C].Ng=function(a,b,c,d){this.tc(a);b=this.wd(b,!0,d);this.oh(a,b);c&&this.oc.add(a);this.pa.set(a,b);return this};Z[C].addIndex=Z[C].Ng;
Z[C].oh=function(a,b){if(1<b[B]){var c=b[Ca](function(a){return this.xd[v](a[jb])},this);if(0<c[B])throw new S("SyntaxError","Cross-column index "+a+" refers to nullable columns: "+c[I](","));}};Z[C].Qb=tb("Bd");Z[C].persistentIndex=Z[C].Qb;Z[C].Ib=function(){return new (this.Ai())};Z[C].getSchema=Z[C].Ib;
Z[C].wd=function(a,b,c,d){var g=a;"string"==typeof a[0]&&(g=a.map(function(a){return{name:a,order:c||1,autoIncrement:d||!1}}));g[n](function(a){if(!this.G.s(a[jb]))throw new S("SyntaxError",this.w+" does not have column: "+a[jb]);if(b){var c=this.G.get(a[jb]);if(0==c||6==c)throw new S("SyntaxError",this.w+" index on non-indexable column: "+a[jb]);}},this);return g};
Z[C].Ai=function(){function a(){function a(c){return b.pa.get(c).map(function(a){return{Ya:this[a[jb]],pb:a.pb,autoIncrement:a[La]}},this)}var d=b.G.H().map(function(a){this[a]=new Y(this,a,b.Eg[v](a),b.xd[v](a),b.G.get(a));return this[a]},this),g=b.pa.H().map(function(d){return new If(b.w,d,b.oc[v](d),a[G](this,d))},this);Jf[G](this,b.w,d,g,b.Bd);var k=b.pa.s(b.kc)?new If(b.w,b.kc,!0,a[G](this,b.kc)):null,l=d[Ca](function(a){return!b.xd[v](a[h]())}),p=b.oc.c().map(function(d){return new If(b.w,d,
!0,a[G](this,d))},this);this.zh=new Kh(k,l,[],p);this.lg=b.wi(d,g)}var b=this;N(a,Jf);a[C].bd=function(a){return new this.lg(Rc++,a)};a[C].createRow=a[C].bd;a[C].cc=function(a){var b={};this.vb()[n](function(g){var k=g[h]();g=g.da();var l=a[z][k];if(0==g)if(null===l)g=l;else if(g=l,""==g)g=null;else{0!=g[B]%2&&(g="0"+g);for(var l=new ArrayBuffer(g[B]/2),p=new Uint8Array(l),D=0,Ja=0;D<g[B];D+=2)p[Ja++]=ga(g.substr(D,2),16);g=l}else g=2==g?null===l?l:new Date(l):l;b[k]=g},this);return new this.lg(a.id,
b)};a[C].deserializeRow=a[C].cc;a[C].gc=J("zh");a[C].getConstraint=a[C].gc;return a};
Z[C].wi=function(a,b){function c(c,d){this.G=a;this.pa=b;Qc[G](this,c,d)}N(c,Qc);c[C].kf=function(){var a={};this.G[n](function(b){a[b[h]()]=b.ic()?null:Yd[b.da()]});return a};c[C].yg=function(){var a={};this.G[n](function(b){var c=b[h]();b=b.da();var d=this.D()[c];a[c]=0==b?null===d?d:Uc(d):2==b?null===d?d:d[Na]():d},this);return a};var d=M(function(a){var b=this.G.get(a[h]());return 2==b?function(b){b=b[a[h]()];return a.ic()&&null===b?null:b[Na]()}:1==b?function(b){return a.ic()?(b=b[a[h]()],null===
b?null:b?1:0):b[a[h]()]?1:0}:function(b){return b[a[h]()]}},this),g=M(function(a){var b=a.map(function(a){return d(a.Ya)});return function(a){return b.map(function(b){return b(a)})}},this),k={};b[n](function(a){var b=a.j();a=1==a.h[B]?d(a.h[0].Ya):g(a.h);k[b]=a});c[C].Hc=function(a){return-1!=a[A]("#")?this.id():k[Wa](a)?k[a](this.D()):null};return c};
function Mh(a,b){this.B=new Nh(a,b);this.mc=new Q;this.Bc=!1}L("lf.schema.Builder",Mh,void 0);Mh[C].gi=function(){this.Bc||(this.mc.H()[n](function(a){a=this.mc.get(a);this.B.ck(a.Ib())},this),this.mc[q](),this.Bc=!0)};Mh[C].Ib=function(){this.Bc||this.gi();return this.B};Mh[C].getSchema=Mh[C].Ib;Mh[C].sf=function(){var a=new kd("ns_"+this.B[jb]()),b;Jh||(Jh=new Ih);b=Jh;var c=null;b.ze(a)?c=b.m(a):(c=new Ih,b.hb(a,c));return c};Mh[C].getGlobal=Mh[C].sf;
Mh[C].connect=function(a){var b=this.sf();b.ze(rd)||b.hb(rd,this.Ib());return(new X(b)).Qa(a)};Mh[C].connect=Mh[C].connect;Mh[C].Fh=function(a){if(this.mc.s(a)||this.Bc)throw new S("SyntaxError","Table is already created or schema is already finalized.");this.mc.set(a,new Z(a));return this.mc.get(a)};Mh[C].createTable=Mh[C].Fh;Mh[C].Oe=function(a){if(this.Bc)throw new S("SyntaxError","Schema is already finalized.");this.B.Oe(a);return this};Mh[C].setPragma=Mh[C].Oe;
function Nh(a,b){this.w=a;this.sb=b;this.I=new Q;this.bg={Nh:!1}}L("lf.schema.DatabaseSchema",Nh,void 0);xa(Nh[C],J("w"));xa(Nh[C],Nh[C][jb]);Nh[C].version=J("sb");Nh[C].version=Nh[C][Da];Nh[C].ib=function(){return this.I.c()};Nh[C].tables=Nh[C].ib;na(Nh[C],function(a){if(!this.I.s(a))throw new S("NotFoundError",a+" is not found in database");return this.I.get(a)});na(Nh[C],Nh[C][u]);Nh[C].ck=function(a){this.I.set(a[h](),a)};Nh[C].ag=J("bg");Nh[C].pragma=Nh[C].ag;Nh[C].Oe=tb("bg");
L("lf.schema.create",function(a,b){return new Mh(a,b)},void 0);
function Oh(){this.f=new Q;ba.defineProperty(this,"size",{get:function(){return this.f.Y()}})}la(Oh[C],function(){this.f[q]()});L("lf.structs.MapPolyFill_.prototype.clear",Oh[C][q],void 0);va(Oh[C],function(a){return this.f[m](a)});L("lf.structs.MapPolyFill_.prototype.delete",Oh[C][ib],void 0);Oh[C].entries=function(){return this.f.tb()};L("lf.structs.MapPolyFill_.prototype.entries",Oh[C][F],void 0);Oh[C].forEach=function(a,b){return this.f[n](a,b)};
L("lf.structs.MapPolyFill_.prototype.forEach",Oh[C][n],void 0);Oh[C].get=function(a){return this.f.get(a)};L("lf.structs.MapPolyFill_.prototype.get",Oh[C].get,void 0);Oh[C].has=function(a){return this.f.s(a)};L("lf.structs.MapPolyFill_.prototype.has",Oh[C].has,void 0);Oh[C].keys=function(){return this.f.Hi()};L("lf.structs.MapPolyFill_.prototype.keys",Oh[C].keys,void 0);Oh[C].set=function(a,b){return this.f.set(a,b)};L("lf.structs.MapPolyFill_.prototype.set",Oh[C].set,void 0);ka(Oh[C],function(){return this.f.Wi()});
L("lf.structs.MapPolyFill_.prototype.values",Oh[C][Ma],void 0);
function Ph(){this.Ab=new R;ba.defineProperty(this,"size",{get:function(){return this.Ab.Y()}})}Ph[C].add=function(a){this.Ab.add(a)};L("lf.structs.SetPolyFill_.prototype.add",Ph[C].add,void 0);la(Ph[C],function(){this.Ab[q]()});L("lf.structs.SetPolyFill_.prototype.clear",Ph[C][q],void 0);va(Ph[C],function(a){return this.Ab[m](a)});L("lf.structs.SetPolyFill_.prototype.delete",Ph[C][ib],void 0);Ph[C].has=function(a){return this.Ab[v](a)};L("lf.structs.SetPolyFill_.prototype.has",Ph[C].has,void 0);
Ph[C].c=function(){return this.Ab.c()};L("lf.structs.SetPolyFill_.prototype.getValues",Ph[C].c,void 0);Ph[C].de=function(a){var b=new Ph;b.Ab=this.Ab.de(a);return b};L("lf.structs.SetPolyFill_.prototype.difference",Ph[C].de,void 0);}.bind(window))()
