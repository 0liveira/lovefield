var window = this;
(function(){'use strict';function aa(){return function(){}}function ba(a){return function(b){this[a]=b}}function g(a){return function(){return this[a]}}function l(a){return function(){return a}}var m,p=this;function q(a){return void 0!==a}function ca(){}
function da(a){var b=typeof a;if("object"==b)if(a){if(a instanceof Array)return"array";if(a instanceof Object)return b;var c=Object.prototype.toString.call(a);if("[object Window]"==c)return"object";if("[object Array]"==c||"number"==typeof a.length&&"undefined"!=typeof a.splice&&"undefined"!=typeof a.propertyIsEnumerable&&!a.propertyIsEnumerable("splice"))return"array";if("[object Function]"==c||"undefined"!=typeof a.call&&"undefined"!=typeof a.propertyIsEnumerable&&!a.propertyIsEnumerable("call"))return"function"}else return"null";
else if("function"==b&&"undefined"==typeof a.call)return"object";return b}function ea(a){return null===a}function fa(a){return null!=a}function ga(a){var b=da(a);return"array"==b||"object"==b&&"number"==typeof a.length}function ha(a){return"string"==typeof a}function ia(a){return"function"==da(a)}function ja(a){return a[ka]||(a[ka]=++la)}var ka="closure_uid_"+(1E9*Math.random()>>>0),la=0;function ma(a,b,c){return a.call.apply(a.bind,arguments)}
function na(a,b,c){if(!a)throw Error();if(2<arguments.length){var d=Array.prototype.slice.call(arguments,2);return function(){var c=Array.prototype.slice.call(arguments);Array.prototype.unshift.apply(c,d);return a.apply(b,c)}}return function(){return a.apply(b,arguments)}}function oa(a,b,c){oa=Function.prototype.bind&&-1!=Function.prototype.bind.toString().indexOf("native code")?ma:na;return oa.apply(null,arguments)}
function pa(a,b){var c=Array.prototype.slice.call(arguments,1);return function(){var b=c.slice();b.push.apply(b,arguments);return a.apply(this,b)}}function r(a,b){var c=a.split("."),d=p;c[0]in d||!d.execScript||d.execScript("var "+c[0]);for(var e;c.length&&(e=c.shift());)!c.length&&q(b)?d[e]=b:d=d[e]?d[e]:d[e]={}}
function t(a,b){function c(){}c.prototype=b.prototype;a.Hb=b.prototype;a.prototype=new c;a.prototype.constructor=a;a.Fg=function(a,c,f){for(var h=Array(arguments.length-2),k=2;k<arguments.length;k++)h[k-2]=arguments[k];return b.prototype[c].apply(a,h)}};function qa(a){if(Error.captureStackTrace)Error.captureStackTrace(this,qa);else{var b=Error().stack;b&&(this.stack=b)}a&&(this.message=String(a))}t(qa,Error);qa.prototype.name="CustomError";var ra=String.prototype.trim?function(a){return a.trim()}:function(a){return a.replace(/^[\s\xa0]+|[\s\xa0]+$/g,"")};function sa(a,b){return a<b?-1:a>b?1:0};function ta(a,b,c){this.dg=c;this.Jf=a;this.wg=b;this.pd=0;this.kd=null}ta.prototype.get=function(){var a;0<this.pd?(this.pd--,a=this.kd,this.kd=a.next,a.next=null):a=this.Jf();return a};ta.prototype.put=function(a){this.wg(a);this.pd<this.dg&&(this.pd++,a.next=this.kd,this.kd=a)};var ua=Array.prototype,va=ua.indexOf?function(a,b,c){return ua.indexOf.call(a,b,c)}:function(a,b,c){c=null==c?0:0>c?Math.max(0,a.length+c):c;if(ha(a))return ha(b)&&1==b.length?a.indexOf(b,c):-1;for(;c<a.length;c++)if(c in a&&a[c]===b)return c;return-1},wa=ua.forEach?function(a,b,c){ua.forEach.call(a,b,c)}:function(a,b,c){for(var d=a.length,e=ha(a)?a.split(""):a,f=0;f<d;f++)f in e&&b.call(c,e[f],f,a)},xa=ua.map?function(a,b,c){return ua.map.call(a,b,c)}:function(a,b,c){for(var d=a.length,e=Array(d),
f=ha(a)?a.split(""):a,h=0;h<d;h++)h in f&&(e[h]=b.call(c,f[h],h,a));return e},ya=ua.reduce?function(a,b,c,d){d&&(b=oa(b,d));return ua.reduce.call(a,b,c)}:function(a,b,c,d){var e=c;wa(a,function(c,h){e=b.call(d,e,c,h,a)});return e},za=ua.some?function(a,b,c){return ua.some.call(a,b,c)}:function(a,b,c){for(var d=a.length,e=ha(a)?a.split(""):a,f=0;f<d;f++)if(f in e&&b.call(c,e[f],f,a))return!0;return!1};function Aa(a,b,c){return 2>=arguments.length?ua.slice.call(a,b):ua.slice.call(a,b,c)}
function Ba(a){for(var b=[],c=0;c<a;c++)b[c]=0;return b}function Ca(a){for(var b=[],c=0;c<arguments.length;c++){var d=arguments[c];if("array"==da(d))for(var e=0;e<d.length;e+=8192)for(var f=Ca.apply(null,Aa(d,e,e+8192)),h=0;h<f.length;h++)b.push(f[h]);else b.push(d)}return b};function Da(a){var b=[],c=0,d;for(d in a)b[c++]=a[d];return b};var Ea;a:{var Fa=p.navigator;if(Fa){var Ga=Fa.userAgent;if(Ga){Ea=Ga;break a}}Ea=""}function u(a){return-1!=Ea.indexOf(a)};function Ha(){return u("Opera")||u("OPR")}function Ia(){return(u("Chrome")||u("CriOS"))&&!Ha()&&!u("Edge")};function Ja(a){p.setTimeout(function(){throw a;},0)}var Ka;
function La(){var a=p.MessageChannel;"undefined"===typeof a&&"undefined"!==typeof window&&window.postMessage&&window.addEventListener&&!u("Presto")&&(a=function(){var a=document.createElement("IFRAME");a.style.display="none";a.src="";document.documentElement.appendChild(a);var b=a.contentWindow,a=b.document;a.open();a.write("");a.close();var c="callImmediate"+Math.random(),d="file:"==b.location.protocol?"*":b.location.protocol+"//"+b.location.host,a=oa(function(a){if(("*"==d||a.origin==d)&&a.data==
c)this.port1.onmessage()},this);b.addEventListener("message",a,!1);this.port1={};this.port2={postMessage:function(){b.postMessage(c,d)}}});if("undefined"!==typeof a&&!u("Trident")&&!u("MSIE")){var b=new a,c={},d=c;b.port1.onmessage=function(){if(q(c.next)){c=c.next;var a=c.Ae;c.Ae=null;a()}};return function(a){d.next={Ae:a};d=d.next;b.port2.postMessage(0)}}return"undefined"!==typeof document&&"onreadystatechange"in document.createElement("SCRIPT")?function(a){var b=document.createElement("SCRIPT");
b.onreadystatechange=function(){b.onreadystatechange=null;b.parentNode.removeChild(b);b=null;a();a=null};document.documentElement.appendChild(b)}:function(a){p.setTimeout(a,0)}};function Ma(){this.yd=this.lc=null}var Oa=new ta(function(){return new Na},function(a){a.reset()},100);Ma.prototype.add=function(a,b){var c=Oa.get();c.set(a,b);this.yd?this.yd.next=c:this.lc=c;this.yd=c};Ma.prototype.remove=function(){var a=null;this.lc&&(a=this.lc,this.lc=this.lc.next,this.lc||(this.yd=null),a.next=null);return a};function Na(){this.next=this.scope=this.Md=null}Na.prototype.set=function(a,b){this.Md=a;this.scope=b;this.next=null};
Na.prototype.reset=function(){this.next=this.scope=this.Md=null};function Pa(a,b){Qa||Ra();Sa||(Qa(),Sa=!0);Ta.add(a,b)}var Qa;function Ra(){if(p.Promise&&p.Promise.resolve){var a=p.Promise.resolve(void 0);Qa=function(){a.then(Ua)}}else Qa=function(){var a=Ua;!ia(p.setImmediate)||p.Window&&p.Window.prototype&&p.Window.prototype.setImmediate==p.setImmediate?(Ka||(Ka=La()),Ka(a)):p.setImmediate(a)}}var Sa=!1,Ta=new Ma;function Ua(){for(var a=null;a=Ta.remove();){try{a.Md.call(a.scope)}catch(b){Ja(b)}Oa.put(a)}Sa=!1};function v(a,b){this.Ua=0;this.gf=void 0;this.$c=this.cc=this.C=null;this.jd=this.Ld=!1;if(a!=ca)try{var c=this;a.call(b,function(a){Va(c,2,a)},function(a){Va(c,3,a)})}catch(d){Va(this,3,d)}}function Wa(){this.next=this.context=this.hc=this.Lc=this.child=null;this.Bd=!1}Wa.prototype.reset=function(){this.context=this.hc=this.Lc=this.child=null;this.Bd=!1};var Xa=new ta(function(){return new Wa},function(a){a.reset()},100);function Ya(a,b,c){var d=Xa.get();d.Lc=a;d.hc=b;d.context=c;return d}
function w(a){if(a instanceof v)return a;var b=new v(ca);Va(b,2,a);return b}function Za(a){return new v(function(b,c){c(a)})}function ab(a,b,c){bb(a,b,c,null)||Pa(pa(b,a))}function cb(a){return new v(function(b,c){var d=a.length,e=[];if(d)for(var f=function(a,c){d--;e[a]=c;0==d&&b(e)},h=function(a){c(a)},k=0,n;k<a.length;k++)n=a[k],ab(n,pa(f,k),h);else b(e)})}function x(){var a,b,c=new v(function(c,e){a=c;b=e});return new db(c,a,b)}
v.prototype.then=function(a,b,c){return eb(this,ia(a)?a:null,ia(b)?b:null,c)};v.prototype.then=v.prototype.then;v.prototype.$goog_Thenable=!0;v.prototype.qe=function(a,b){return eb(this,null,a,b)};function fb(a,b){a.cc||2!=a.Ua&&3!=a.Ua||gb(a);a.$c?a.$c.next=b:a.cc=b;a.$c=b}
function eb(a,b,c,d){var e=Ya(null,null,null);e.child=new v(function(a,h){e.Lc=b?function(c){try{var e=b.call(d,c);a(e)}catch(B){h(B)}}:a;e.hc=c?function(b){try{var e=c.call(d,b);!q(e)&&b instanceof hb?h(b):a(e)}catch(B){h(B)}}:h});e.child.C=a;fb(a,e);return e.child}v.prototype.Bg=function(a){this.Ua=0;Va(this,2,a)};v.prototype.Cg=function(a){this.Ua=0;Va(this,3,a)};
function Va(a,b,c){0==a.Ua&&(a==c&&(b=3,c=new TypeError("Promise cannot resolve to itself")),a.Ua=1,bb(c,a.Bg,a.Cg,a)||(a.gf=c,a.Ua=b,a.C=null,gb(a),3!=b||c instanceof hb||ib(a,c)))}function bb(a,b,c,d){if(a instanceof v)return fb(a,Ya(b||ca,c||null,d)),!0;var e;if(a)try{e=!!a.$goog_Thenable}catch(h){e=!1}else e=!1;if(e)return a.then(b,c,d),!0;e=typeof a;if("object"==e&&null!=a||"function"==e)try{var f=a.then;if(ia(f))return jb(a,f,b,c,d),!0}catch(h){return c.call(d,h),!0}return!1}
function jb(a,b,c,d,e){function f(a){k||(k=!0,d.call(e,a))}function h(a){k||(k=!0,c.call(e,a))}var k=!1;try{b.call(a,h,f)}catch(n){f(n)}}function gb(a){a.Ld||(a.Ld=!0,Pa(a.Of,a))}function kb(a){var b=null;a.cc&&(b=a.cc,a.cc=b.next,b.next=null);a.cc||(a.$c=null);return b}
v.prototype.Of=function(){for(var a=null;a=kb(this);){var b=this.Ua,c=this.gf;if(3==b&&a.hc&&!a.Bd)for(var d=void 0,d=this;d&&d.jd;d=d.C)d.jd=!1;if(a.child)a.child.C=null,lb(a,b,c);else try{a.Bd?a.Lc.call(a.context):lb(a,b,c)}catch(e){mb.call(null,e)}Xa.put(a)}this.Ld=!1};function lb(a,b,c){2==b?a.Lc.call(a.context,c):a.hc&&a.hc.call(a.context,c)}function ib(a,b){a.jd=!0;Pa(function(){a.jd&&mb.call(null,b)})}var mb=Ja;function hb(a){qa.call(this,a)}t(hb,qa);hb.prototype.name="cancel";
function db(a,b,c){this.ha=a;this.resolve=b;this.reject=c};/*

 Copyright 2014 The Lovefield Project Authors. All Rights Reserved.

 Licensed under the Apache License, Version 2.0 (the "License");
 you may not use this file except in compliance with the License.
 You may obtain a copy of the License at

     http://www.apache.org/licenses/LICENSE-2.0

 Unless required by applicable law or agreed to in writing, software
 distributed under the License is distributed on an "AS IS" BASIS,
 WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 See the License for the specific language governing permissions and
 limitations under the License.
*/
function y(a,b){this.pa=a;this.s=b||this.Fe()}var nb=0;m=y.prototype;m.id=g("pa");function ob(a){return a.s}m.Fe=function(){return{}};m.qf=g("s");m.Ja=function(){return{id:this.pa,value:this.qf()}};m.Eb=function(a){return"#"==a.substr(-1)?this.pa:null};function pb(a){return new y(a.id,a.value)}function qb(a){return new y(nb++,a||{})}function rb(a){if(null==a)return null;a=new Uint8Array(a);for(var b="",c=0;c<a.length;++c)var d=a[c].toString(16),b=b+(2>d.length?"0"+d:d);return b};function sb(a){this.type=a}function tb(a){y.call(this,-1,a)}t(tb,y);function ub(a,b,c,d){c=c||function(a,b){return a==b};d=d||function(b){return a[b]};for(var e=a.length,f=b.length,h=[],k=0;k<e+1;k++)h[k]=[],h[k][0]=0;for(var n=0;n<f+1;n++)h[0][n]=0;for(k=1;k<=e;k++)for(n=1;n<=f;n++)c(a[k-1],b[n-1])?h[k][n]=h[k-1][n-1]+1:h[k][n]=Math.max(h[k-1][n],h[k][n-1]);for(var B=[],k=e,n=f;0<k&&0<n;)c(a[k-1],b[n-1])?(B.unshift(d(k-1,n-1)),k--,n--):h[k-1][n]>h[k][n-1]?k--:n--;return B}function vb(a){return ya(arguments,function(a,c){return a+c},0)}
function wb(a){return vb.apply(null,arguments)/arguments.length}function xb(a){var b=arguments.length;if(2>b)return 0;var c=wb.apply(null,arguments);return vb.apply(null,xa(arguments,function(a){return Math.pow(a-c,2)}))/(b-1)}function yb(a){return Math.sqrt(xb.apply(null,arguments))};var zb="StopIteration"in p?p.StopIteration:{message:"StopIteration",stack:""};function Ab(){}Ab.prototype.next=function(){throw zb;};Ab.prototype.mc=function(){return this};function Bb(a){if(a instanceof Ab)return a;if("function"==typeof a.mc)return a.mc(!1);if(ga(a)){var b=0,c=new Ab;c.next=function(){for(;;){if(b>=a.length)throw zb;if(b in a)return a[b++];b++}};return c}throw Error("Not implemented");}
function Cb(a,b){if(ga(a))try{wa(a,b,void 0)}catch(c){if(c!==zb)throw c;}else{a=Bb(a);try{for(;;)b.call(void 0,a.next(),void 0,a)}catch(c){if(c!==zb)throw c;}}}function Db(a){if(za(arguments,function(a){return!a.length})||!arguments.length)return new Ab;var b=new Ab,c=arguments,d=Ba(c.length);b.next=function(){if(d){for(var a=xa(d,function(a,b){return c[b][a]}),b=d.length-1;0<=b;b--){if(d[b]<c[b].length-1){d[b]++;break}if(0==b){d=null;break}d[b]=0}return a}throw zb;};return b};function Eb(a,b){this.o={};this.b=[];this.Pa=this.Bb=0;var c=arguments.length;if(1<c){if(c%2)throw Error("Uneven number of arguments");for(var d=0;d<c;d+=2)this.set(arguments[d],arguments[d+1])}else a&&this.addAll(a)}m=Eb.prototype;m.zc=g("Bb");m.ya=function(){Fb(this);for(var a=[],b=0;b<this.b.length;b++)a.push(this.o[this.b[b]]);return a};function Gb(a){Fb(a);return a.b.concat()}m.Ma=function(a){return Hb(this.o,a)};m.md=function(){return 0==this.Bb};
m.clear=function(){this.o={};this.Pa=this.Bb=this.b.length=0};m.remove=function(a){return Hb(this.o,a)?(delete this.o[a],this.Bb--,this.Pa++,this.b.length>2*this.Bb&&Fb(this),!0):!1};function Fb(a){if(a.Bb!=a.b.length){for(var b=0,c=0;b<a.b.length;){var d=a.b[b];Hb(a.o,d)&&(a.b[c++]=d);b++}a.b.length=c}if(a.Bb!=a.b.length){for(var e={},c=b=0;b<a.b.length;)d=a.b[b],Hb(e,d)||(a.b[c++]=d,e[d]=1),b++;a.b.length=c}}m.get=function(a,b){return Hb(this.o,a)?this.o[a]:b};
m.set=function(a,b){Hb(this.o,a)||(this.Bb++,this.b.push(a),this.Pa++);this.o[a]=b};m.addAll=function(a){var b;if(a instanceof Eb)b=Gb(a),a=a.ya();else{b=[];var c=0,d;for(d in a)b[c++]=d;a=Da(a)}for(c=0;c<b.length;c++)this.set(b[c],a[c])};m.forEach=function(a,b){for(var c=Gb(this),d=0;d<c.length;d++){var e=c[d],f=this.get(e);a.call(b,f,e,this)}};m.clone=function(){return new Eb(this)};
m.mc=function(a){Fb(this);var b=0,c=this.Pa,d=this,e=new Ab;e.next=function(){if(c!=d.Pa)throw Error("The map has changed since the iterator was created");if(b>=d.b.length)throw zb;var e=d.b[b++];return a?e:d.o[e]};return e};function Hb(a,b){return Object.prototype.hasOwnProperty.call(a,b)};function Ib(){return u("iPhone")&&!u("iPod")&&!u("iPad")};var Jb=Ha(),Kb=u("Trident")||u("MSIE"),Lb=u("Edge"),Mb=u("Gecko")&&!(-1!=Ea.toLowerCase().indexOf("webkit")&&!u("Edge"))&&!(u("Trident")||u("MSIE"))&&!u("Edge"),Nb=-1!=Ea.toLowerCase().indexOf("webkit")&&!u("Edge");function Ob(){var a=Ea;if(Mb)return/rv\:([^\);]+)(\)|;)/.exec(a);if(Lb)return/Edge\/([\d\.]+)/.exec(a);if(Kb)return/\b(?:MSIE|rv)[: ]([^\);]+)(\)|;)/.exec(a);if(Nb)return/WebKit\/(\S+)/.exec(a)}
var Pb=function(){if(Jb&&p.opera){var a;var b=p.opera.version;try{a=b()}catch(c){a=b}return a}a="";(b=Ob())&&(a=b?b[1]:"");return Kb&&(b=(b=p.document)?b.documentMode:void 0,b>parseFloat(a))?String(b):a}(),Qb={};
function Rb(a){if(!Qb[a]){for(var b=0,c=ra(String(Pb)).split("."),d=ra(String(a)).split("."),e=Math.max(c.length,d.length),f=0;0==b&&f<e;f++){var h=c[f]||"",k=d[f]||"",n=/(\d*)(\D*)/g,B=/(\d*)(\D*)/g;do{var T=n.exec(h)||["","",""],Y=B.exec(k)||["","",""];if(0==T[0].length&&0==Y[0].length)break;b=sa(0==T[1].length?0:parseInt(T[1],10),0==Y[1].length?0:parseInt(Y[1],10))||sa(0==T[2].length,0==Y[2].length)||sa(T[2],Y[2])}while(0==b)}Qb[a]=0<=b}};var Sb=Ib()||u("iPod"),Tb=u("iPad");!u("Android")||Ia()||u("Firefox")||Ha();Ia();var Ub=u("Safari")&&!(Ia()||u("Coast")||Ha()||u("Edge")||u("Silk")||u("Android"))&&!(Ib()||u("iPad")||u("iPod"));/*

 Copyright 2015 The Lovefield Project Authors. All Rights Reserved.

 Licensed under the Apache License, Version 2.0 (the "License");
 you may not use this file except in compliance with the License.
 You may obtain a copy of the License at

     http://www.apache.org/licenses/LICENSE-2.0

 Unless required by applicable law or agreed to in writing, software
 distributed under the License is distributed on an "AS IS" BASIS,
 WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 See the License for the specific language governing permissions and
 limitations under the License.
*/
function Vb(){(this.ke=Ub||Tb||Sb)||Kb&&Rb(10);!Kb||Rb(11);this.hg=q(window.Map)&&q(window.Map.prototype.values)&&q(window.Map.prototype.forEach)&&!this.ke;this.ig=q(window.Set)&&q(window.Set.prototype.values)&&q(window.Set.prototype.forEach)&&!this.ke}var Wb;function Yb(){q(Wb)||(Wb=new Vb);return Wb};function z(){this.o=new Eb;Object.defineProperty(this,"size",{get:function(){return this.o.zc()}})}z.prototype.clear=function(){this.o.clear()};z.prototype.clear=z.prototype.clear;z.prototype.delete=function(a){return this.o.remove(a)};z.prototype["delete"]=z.prototype.delete;z.prototype.forEach=function(a,b){return this.o.forEach(a,b)};z.prototype.forEach=z.prototype.forEach;z.prototype.get=function(a){return this.o.get(a)};z.prototype.get=z.prototype.get;z.prototype.has=function(a){return this.o.Ma(a)};
z.prototype.has=z.prototype.has;z.prototype.set=function(a,b){return this.o.set(a,b)};z.prototype.set=z.prototype.set;var Zb=Yb().hg;function A(){return Zb?new window.Map:new z}function $b(a){if(a instanceof z)return Gb(a.o);var b=0,c=Array(a.size);a.forEach(function(a,e){c[b++]=e});return c}function C(a){if(a instanceof z)return a.o.ya();var b=0,c=Array(a.size);a.forEach(function(a){c[b++]=a});return c};var ac={};r("lf.TransactionType",ac);ac.READ_ONLY=0;ac.READ_WRITE=1;function bc(a,b){this.Ra=a;this.rf=b;this.Y=x()}bc.prototype.ia=function(){try{cc(this.Ra)}catch(a){return Za(a)}return(0==this.rf?this.pc():dc(this)).then(function(a){this.Ra.ia();return a}.bind(this))};function dc(a){ec(a);fc(a);return a.pc()}
function ec(a){a.Ra.qb.forEach(function(a,c){var d=this.Ra.$().get(c),d=this.H(d.getName(),d.Lb.bind(d)),e=C(a.va).map(function(a){return a.id()});0<e.length&&d.remove(e).qe(this.Od,this);e=C(a.na).map(function(a){return a[1]}).concat(C(a.ta));d.put(e).qe(this.Od,this)},a)}function fc(a){gc(a.Ra).forEach(function(a){var c=this.H(a.getName(),pb),d;c.get([-1]).then(function(a){d=a;return c.remove([])}).then(function(){c.put(d);c.put(a.Ja())},this.Od.bind(this))},a)}bc.prototype.Od=function(a){this.Y.reject(a)};function hc(a){this.xg=a}hc.prototype.toString=g("xg");var ic=new hc("backstore"),jc=new hc("cache"),kc=new hc("indexstore"),lc=new hc("engine"),mc=new hc("runner"),nc=new hc("observerregistry"),oc=new hc("schema");function pc(a){if("function"==typeof a.ya)return a.ya();if(ha(a))return a.split("");if(ga(a)){for(var b=[],c=a.length,d=0;d<c;d++)b.push(a[d]);return b}return Da(a)};function qc(a){this.o=new Eb;a&&this.addAll(a)}function rc(a){var b=typeof a;return"object"==b&&a||"function"==b?"o"+ja(a):b.substr(0,1)+a}m=qc.prototype;m.zc=function(){return this.o.zc()};m.add=function(a){this.o.set(rc(a),a)};m.addAll=function(a){a=pc(a);for(var b=a.length,c=0;c<b;c++)this.add(a[c])};m.remove=function(a){return this.o.remove(rc(a))};m.clear=function(){this.o.clear()};m.md=function(){return this.o.md()};m.contains=function(a){return this.o.Ma(rc(a))};m.ya=function(){return this.o.ya()};
m.clone=function(){return new qc(this)};m.mc=function(){return this.o.mc(!1)};function sc(a){this.Wb=new qc(a);Object.defineProperty(this,"size",{get:function(){return this.Wb.zc()}})}sc.prototype.add=function(a){this.Wb.add(a)};sc.prototype.add=sc.prototype.add;sc.prototype.clear=function(){this.Wb.clear()};sc.prototype.clear=sc.prototype.clear;sc.prototype.delete=function(a){return this.Wb.remove(a)};sc.prototype["delete"]=sc.prototype.delete;sc.prototype.forEach=function(a,b){this.Wb.ya().forEach(a,b)};sc.prototype.has=function(a){return this.Wb.contains(a)};
sc.prototype.has=sc.prototype.has;var tc=Yb().ig;function D(a){return tc?q(a)?new window.Set(a):new window.Set:new sc(a)}function uc(a){if(a instanceof sc)return a.Wb.ya();var b=0,c=Array(a.size);a.forEach(function(a){c[b++]=a});return c}function vc(a,b){if(b.size>a.size)return!1;var c=!0;b.forEach(function(b){c=c&&a.has(b)});return c};function wc(a,b){this.pa=a;this.s=b||{}}function xc(a){var b=D();a.forEach(function(a){b.add(a>>9)});return uc(b)}wc.prototype.W=g("pa");function yc(a,b){b.forEach(function(a){this.s[a.id()]=a.Ja()},a)}function zc(a,b){b.forEach(function(a){delete this.s[a]},a)}wc.prototype.Ja=function(){return{id:this.pa,value:JSON.stringify(this.s)}};function Ac(a){return new wc(a.id,JSON.parse(a.value))};function Bc(a,b,c){this.ba=a;this.Kb=b;this.hf=c}m=Bc.prototype;m.get=function(a){if(0==a.length)return this.yc();var b=this.Kb;return Cc(this,a).then(function(c){return a.map(function(a){var e=c.get(a>>9);return b(e.s[a])})})};function Cc(a,b){var c=A(),d=x(),e=xc(b).map(function(a){return new v(function(b,d){var e;try{e=this.ba.get(a)}catch(B){d(B);return}e.onerror=d;e.onsuccess=function(a){a=Ac(a.target.result);c.set(a.W(),a);b()}},this)},a);cb(e).then(function(){d.resolve(c)});return d.ha}
m.yc=function(){return new v(function(a,b){var c=[],d;try{d=this.ba.openCursor()}catch(e){b(e);return}d.onerror=b;d.onsuccess=function(){var b=d.result;if(b){var f;f=Ac(b.value).s;for(var h in f)c.push(this.Kb(f[h]));b.continue()}else a(c)}.bind(this)},this)};m.Sb=function(a){return new v(function(b,c){var d;try{d=a()}catch(e){c(e);return}d.onsuccess=b;d.onerror=c},this)};
m.put=function(a){if(0==a.length)return w();var b=A();a.forEach(function(a){var d;d=a.id()>>9;var e=b.get(d)||null;null===e&&(e=this.hf(this.ba.name,d));yc(e,[a]);b.set(d,e)},this);a=C(b).map(function(a){return this.Sb(function(){return this.ba.put(a.Ja())}.bind(this))},this);return cb(a)};
m.remove=function(a){if(0==a.length)return this.Sb(function(){return this.ba.clear()}.bind(this));var b=A();a.forEach(function(a){var d=a>>9,e=b.get(d)||null;null===e&&(e=this.hf(this.ba.name,d));zc(e,[a]);b.set(d,e)},this);a=C(b).map(function(a){return this.Sb(function(){return 0==Object.keys(a.s).length?this.ba.delete(a.W()):this.ba.put(a.Ja())}.bind(this))},this);return cb(a)};function Dc(a,b,c){a=a.i(jc);var d=[c<<9,(c+1<<9)-1];b=a.$a(b,d[0],d[1]);c=new wc(c);yc(c,b);return c}
function Ec(a,b){return new wc(b)};function Fc(){};function Gc(a){this.U=a.i(jc);this.D=a.i(kc);this.j=a.i(oc)}Gc.prototype.update=function(a){a.forEach(function(a){Hc(this,a);Ic(this,a)},this)};function Ic(a,b){var c=b.getName();b.va.forEach(function(a,b){this.U.remove(c,b)},a);b.ta.forEach(function(a){this.U.set(c,a)},a);b.na.forEach(function(a){this.U.set(c,a[1])},a)}function Hc(a,b){var c=a.j.table(b.getName());Jc(b).forEach(function(a){Kc(this,c,a)},a)}
function Kc(a,b,c){var d=a.D.jc.get(b.getName())||[],e=0;d.forEach(function(a){try{Lc(a,c),e++}catch(b){throw d.slice(0,e).forEach(function(a){Lc(a,[c[1],c[0]])},this),b;}},a)}function Lc(a,b){var c=null===b[1]?void 0:b[1].Eb(a.getName()),d=null===b[0]?void 0:b[0].Eb(a.getName());if(!q(d)&&q(c))a.add(c,b[1].id());else if(q(d)&&q(c)){if(null===c||null===d){if(c==d)return}else if(0==a.qc().compare(d,c))return;a.add(c,b[1].id());a.remove(d,b[0].id())}else q(d)&&!q(c)&&a.remove(d,b[0].id())};var Mc={};r("lf.ConstraintAction",Mc);Mc.RESTRICT=0;Mc.CASCADE=1;var Nc={};r("lf.ConstraintTiming",Nc);Nc.IMMEDIATE=0;Nc.DEFERRABLE=1;var Oc={};r("lf.Order",Oc);Oc.DESC=0;Oc.ASC=1;var Pc={};r("lf.Type",Pc);Pc.ARRAY_BUFFER=0;Pc.BOOLEAN=1;Pc.DATE_TIME=2;Pc.INTEGER=3;Pc.NUMBER=4;Pc.STRING=5;Pc.OBJECT=6;var Qc={0:null,1:!1,2:Object.freeze(new Date(0)),3:0,4:0,5:"",6:null};r("lf.type.DEFAULT_VALUES",Qc);function E(a,b){this.code=a;this.message="http://sn.im/2a0j3wn?c="+a;if(1<arguments.length)for(var c=1;c<=Math.min(4,arguments.length-1);++c)this.message+="&p"+(c-1)+"="+encodeURIComponent(arguments[c].toString().slice(0,64))}t(E,Error);function Sc(){this.o=A();this.size=0}m=Sc.prototype;m.has=function(a){return this.o.has(a)};m.set=function(a,b){var c=this.o.get(a)||null;null===c&&(c=D(),this.o.set(a,c));c.has(b)||(c.add(b),this.size++);return this};m.Vb=function(a,b){var c=this.o.get(a)||null;null===c&&(c=D(),this.o.set(a,c));b.forEach(function(a){c.has(a)||(c.add(a),this.size++)},this);return this};m.Xd=function(a){a.keys().forEach(function(b){var c=a.get(b);this.Vb(b,c)},this);return this};
m.delete=function(a,b){var c=this.o.get(a,null);if(null===c)return!1;var d=c.delete(b);d&&(--this.size,0==c.size&&this.o.delete(a));return d};m.get=function(a){a=this.o.get(a)||null;return null===a?null:uc(a)};m.clear=function(){this.o.clear();this.size=0};m.keys=function(){return $b(this.o)};m.values=function(){var a=[];this.o.forEach(function(b){a.push.apply(a,uc(b))});return a};function Tc(a){this.D=a.i(kc);this.j=a.i(oc);this.U=a.i(jc);this.cd=null}function Uc(a,b,c){var d=b.Db().kg;c.forEach(function(a){d.forEach(function(b){if(null==a.s[b.getName()])throw new E(202,b.m());},this)},a)}function Vc(a,b,c,d){b.Db().Nd().forEach(function(a){a.timing==d&&Wc(this,a,c)},a)}function Wc(a,b,c){var d=Xc(a,b);c.forEach(function(a){if(Yc(a[0],a[1],b.name)&&(a=a[1].s[b.rb],null!==a&&!d.Ma(a)))throw new E(203,b.name);},a)}
function Xc(a,b){null===a.cd&&(a.cd=A());var c=a.cd.get(b.name)||null;null===c&&(c=a.j.table(b.Sa)[b.Mc].wa(),c=a.D.get(c.m()),a.cd.set(b.name,c));return c}function Yc(a,b,c){return(null===a?null!==b:null===b)||a.Eb(c)!=b.Eb(c)}function Zc(a,b,c,d,e){b=$c(a.j.info(),b.getName(),e);null!==b&&(b=b.filter(function(a){return a.timing==d}),0!=b.length&&ad(a,b,c,function(a,b,c){if(b.Ma(c))throw new E(203,a.name);}))}
function bd(a,b,c){b=$c(a.j.info(),b.getName(),1);if(null===b)return null;var d=new Sc;ad(a,b,c,function(a,b,c){b=b.get(c);0<b.length&&d.Vb(a.Ef,b)});return d}function ad(a,b,c,d){b.forEach(function(a){var b=this.D.get(a.name),h=Xc(this,a);c.forEach(function(c){Yc(c[0],c[1],h.getName())&&d(a,b,c[0].s[a.Mc])},this)},a)}function cd(a,b,c,d){0!=c.length&&(c=c.map(function(a){return[null,a]}),Vc(a,b,c,d))}function dd(a,b,c,d){0!=c.length&&(Vc(a,b,c,d),Zc(a,b,c,d))}
function ed(a,b,c,d){0!=c.length&&(c=c.map(function(a){return[a,null]}),Zc(a,b,c,d,0))}function fd(a,b,c){var d={pe:[],kf:new Sc},e=new Sc;e.Vb(b.getName(),c.map(function(a){return a.id()}));do{var f=new Sc;e.keys().forEach(function(a){var b=this.j.table(a);a=e.get(a).map(function(a){return[this.U.get(a),null]},this);b=bd(this,b,a);null!==b&&(d.pe.unshift.apply(d.pe,b.keys()),f.Xd(b))},a);e=f;d.kf.Xd(e)}while(0<e.size);return d};function gd(a){this.ta=A();this.na=A();this.va=A();this.w=a}m=gd.prototype;m.getName=g("w");m.add=function(a){if(this.va.has(a.id())){var b=[this.va.get(a.id()),a];this.na.set(a.id(),b);this.va.delete(a.id())}else this.ta.set(a.id(),a)};m.modify=function(a){var b=a[1],c=a[0].id();this.ta.has(c)?this.ta.set(c,b):(this.na.has(c)&&(a=[this.na.get(a[0].id())[0],b]),this.na.set(c,a))};
m.delete=function(a){if(this.ta.has(a.id()))this.ta.delete(a.id());else if(this.na.has(a.id())){var b=this.na.get(a.id())[0];this.na.delete(a.id());this.va.set(a.id(),b)}else this.va.set(a.id(),a)};m.Xd=function(a){a.ta.forEach(function(a){this.add(a)},this);a.na.forEach(function(a){this.modify(a)},this);a.va.forEach(function(a){this.delete(a)},this)};
function Jc(a){var b=[];a.ta.forEach(function(a){b.push([null,a])});a.na.forEach(function(a){b.push(a)});a.va.forEach(function(a){b.push([a,null])});return b}m.toString=function(){return"["+$b(this.ta).toString()+"], ["+$b(this.na).toString()+"], ["+$b(this.va).toString()+"]"};function hd(a){var b=new gd(a.w);a.ta.forEach(function(a){b.delete(a)});a.va.forEach(function(a){b.add(a)});a.na.forEach(function(a){b.modify([a[1],a[0]])});return b}
m.md=function(){return 0==this.ta.size&&0==this.va.size&&0==this.na.size};function id(a,b){this.aa=A();b.forEach(function(a){this.aa.set(a.getName(),a)},this);this.j=a.i(oc);this.U=a.i(jc);this.D=a.i(kc);this.Ea=new Tc(a);this.ld=new Gc(a);this.qb=A()}function gc(a){var b=[];$b(a.qb).map(function(a){return this.aa.get(a)},a).forEach(function(a){a.zb()&&(a.xa().forEach(function(a){b.push(this.D.get(a.m()))},this),b.push(this.D.get(a.getName()+".#")))},a);return b}m=id.prototype;m.$=g("aa");
function jd(a){var b=[];a.aa.forEach(function(a){a.zb()&&(a.xa().forEach(function(a){b.push(a.m())}),b.push(a.getName()+".#"))});return b}m.xb=function(a,b){kd(this,a);Uc(this.Ea,a,b);cd(this.Ea,a,b,0);for(var c=0;c<b.length;c++)ld(this,a,[null,b[c]])};
function ld(a,b,c){var d=b.getName(),e=a.qb.get(d)||new gd(d);a.qb.set(d,e);try{Kc(a.ld,b,c)}catch(h){throw h;}b=c[0];var f=c[1];null===b&&null!==f?(a.U.set(d,f),e.add(f)):null!==b&&null!==f?(a.U.set(d,f),e.modify(c)):null!==b&&null===f&&(a.U.remove(d,b.id()),e.delete(b))}m.update=function(a,b){kd(this,a);Uc(this.Ea,a,b);for(var c=0;c<b.length;c++){var d=b[c],d=[this.U.get(d.id()),d];dd(this.Ea,a,[d],0);ld(this,a,d)}};
m.Qd=function(a,b){kd(this,a);Uc(this.Ea,a,b);for(var c=0;c<b.length;c++){var d=b[c],e=null,f,h=a.Db().fd();if(null===h)f=null;else{f=this.Ea;var h=h.m(),k=d.Eb(h);f=f.D.get(h).get(k);f=0==f.length?null:f[0]}null!=f?(e=this.U.get(f),d.pa=f,dd(this.Ea,a,[[e,d]],0)):cd(this.Ea,a,[d],0);ld(this,a,[e,d])}};m.remove=function(a,b){kd(this,a);md(this,a,b);ed(this.Ea,a,b,0);for(var c=0;c<b.length;c++)ld(this,a,[b[c],null])};
function md(a,b,c){if(null!==$c(a.j.info(),b.getName(),1)){b=fd(a.Ea,b,c);var d=b.kf;b.pe.forEach(function(a){var b=this.j.table(a);a=d.get(a).map(function(a){return this.U.get(a)},this);ed(this.Ea,b,a,0);a.forEach(function(a){ld(this,b,[a,null])},this)},a)}}function cc(a){a.qb.forEach(function(a){var c=this.aa.get(a.getName());cd(this.Ea,c,C(a.ta),1);ed(this.Ea,c,C(a.va),1);dd(this.Ea,c,C(a.na),1)},a)}m.ia=aa();m.Gb=function(){var a=C(this.qb).map(function(a){return hd(a)});this.ld.update(a)};
function kd(a,b){if(!a.aa.has(b.getName()))throw new E(106,b.getName());};function nd(a,b,c,d){this.c=a;this.A=b;this.da=this.c==F?!1:c;this.ma=this.A==F?!1:d}var F=new (aa());nd.prototype.toString=function(){return(this.da?"(":"[")+(this.c==F?"unbound":this.c)+", "+(this.A==F?"unbound":this.A)+(this.ma?")":"]")};function od(a){if(pd(a))return[];var b=null,c=null;a.c==F||(b=new nd(F,a.c,!1,!a.da));a.A==F||(c=new nd(a.A,F,!a.ma,!1));return[b,c].filter(function(a){return null!==a})}nd.prototype.reverse=function(){return new nd(this.A,this.c,this.ma,this.da)};
function qd(a,b){var c=rd(a.c,b.c,!0,a.da,b.da);if(0==c)return!0;var d=-1==c?a:b,c=1==c?a:b;return d.A==F||d.A>c.c||d.A==c.c&&!d.ma&&!c.da}function sd(){return new nd(F,F,!1,!1)}function pd(a){return a.c==F&&a.A==F}function td(a){return a.c==a.A&&a.c!=F&&!a.da&&!a.ma}nd.prototype.contains=function(a){var b=this.A==F||a<this.A||a==this.A&&!this.ma;return(this.c==F||a>this.c||a==this.c&&!this.da)&&b};
function rd(a,b,c,d,e){function f(a){return c?a:1==a?-1:1}d=d||!1;e=e||!1;return a==F?b==F?(d?!e:e)?d?f(1):f(-1):0:f(-1):b==F?f(1):a<b?-1:a==b?(d?!e:e)?d?f(1):f(-1):0:1}function ud(a,b){var c=rd(a.c,b.c,!0,a.da,b.da);0==c&&(c=rd(a.A,b.A,!1,a.ma,b.ma));return c};function G(a,b){this.entries=a;this.L=D(b);this.Ya=null}function H(a){return uc(a.L)}function vd(a){return a.entries.map(function(a){return a.sa.s})}function wd(a){return a.entries.map(function(a){return a.sa.id()})}function xd(a,b){return a.Ya.get(b.m())}var yd=null;function zd(){null===yd&&(yd=new G([],[]));return yd}
function Ad(a){if(0==a.length)return zd();for(var b=a.reduce(function(a,b){return a+b.entries.length},0),c=Array(b),d=0,b=a.map(function(a){var b=A();a.entries.forEach(function(a){c[d++]=a;b.set(a.id,a)});return b}),e=A(),f=0;f<c.length;f++)b.every(function(a){return a.has(c[f].id)})&&e.set(c[f].id,c[f]);return new G(C(e),uc(a[0].L))}function Bd(a){if(0==a.length)return zd();var b=A();a.forEach(function(a){a.entries.forEach(function(a){b.set(a.id,a)})});return new G(C(b),uc(a[0].L))}
function Cd(a,b){var c=1<b.length,d=a.map(function(a){return new Dd(a,c)});return new G(d,b)}function Dd(a,b){this.sa=a;this.id=Ed++;this.Td=b}var Ed=0;function I(a,b){var c=b.Za();return null!==c&&a.sa.s.hasOwnProperty(c)?a.sa.s[c]:a.Td?a.sa.s[J(b.H())][b.getName()]:a.sa.s[b.getName()]}function Fd(a,b,c){var d=b.Za();if(null!=d)a.sa.s[d]=c;else if(a.Td){var d=J(b.H()),e=a.sa.s[d];null==e&&(e={},a.sa.s[d]=e);e[b.getName()]=c}else a.sa.s[b.getName()]=c}
function Gd(a,b,c,d){function e(a,b){if(a.Td){var c=a.sa.s,d;for(d in c)f[d]=c[d]}else f[b[0]]=a.sa.s}var f={};e(a,b);e(c,d);a=new y(-1,f);return new Dd(a,!0)};r("lf.bind",function(a){return new Hd(a)});function Hd(a){this.fa=a}r("lf.Binder",Hd);Hd.prototype.wa=g("fa");function Id(){this.Re=Jd();var a=Kd();this.fc=A();this.fc.set(1,Ld());this.fc.set(2,Md());this.fc.set(4,a);this.fc.set(3,a);this.fc.set(5,Nd())}Id.Ac=function(){return Id.Ne?Id.Ne:Id.Ne=new Id};function Od(a,b,c){return(a.fc.get(b)||null).get(c)||null}function Jd(){function a(a){return a}var b=A();b.set(1,function(a){return null===a?null:a?1:0});b.set(2,function(a){return null===a?null:a.getTime()});b.set(3,a);b.set(4,a);b.set(5,a);return b}
function Ld(){var a=A();a.set("eq",function(a,c){return a==c});a.set("neq",function(a,c){return a!=c});return a}
function Kd(){var a=Ld();a.set("between",function(a,c){return null===a||null===c[0]||null===c[1]?!1:a>=c[0]&&a<=c[1]});a.set("gte",function(a,c){return null===a||null===c?!1:a>=c});a.set("gt",function(a,c){return null===a||null===c?!1:a>c});a.set("in",function(a,c){return-1!=c.indexOf(a)});a.set("lte",function(a,c){return null===a||null===c?!1:a<=c});a.set("lt",function(a,c){return null===a||null===c?!1:a<c});return a}
function Nd(){var a=Kd();a.set("match",function(a,c){return null===a||null===c?!1:(new RegExp(c)).test(a)});return a}
function Md(){var a=A();a.set("between",function(a,c){return null===a||null===c[0]||null===c[1]?!1:a.getTime()>=c[0].getTime()&&a.getTime()<=c[1].getTime()});a.set("eq",function(a,c){return(null===a?-1:a.getTime())==(null===c?-1:c.getTime())});a.set("gte",function(a,c){return null===a||null===c?!1:a.getTime()>=c.getTime()});a.set("gt",function(a,c){return null===a||null===c?!1:a.getTime()>c.getTime()});a.set("in",function(a,c){return c.some(function(c){return c.getTime()==a.getTime()})});a.set("lte",
function(a,c){return null===a||null===c?!1:a.getTime()<=c.getTime()});a.set("lt",function(a,c){return null===a||null===c?!1:a.getTime()<c.getTime()});a.set("neq",function(a,c){return(null===a?-1:a.getTime())!=(null===c?-1:c.getTime())});return a};function K(){this.h=this.C=null}var Pd=[];K.prototype.getParent=g("C");K.prototype.hb=function(){for(var a=this;!ea(a.getParent());)a=a.getParent();return a};function Qd(a){for(var b=0;!ea(a.getParent());)b++,a=a.getParent();return b}function L(a){return a.h||Pd}function Rd(a,b){return L(a)[b]||null}function Sd(a,b,c){b.C=a;null===a.h?a.h=[b]:a.h.splice(c,0,b)}function Td(a,b){b.C=a;null===a.h?a.h=[b]:a.h.push(b)}
function Ud(a,b){var c=a.h&&a.h[b];return c?(c.C=null,a.h.splice(b,1),0==a.h.length&&(a.h=null),c):null}K.prototype.removeChild=function(a){return Ud(this,L(this).indexOf(a))};function Vd(a,b,c){Rd(a,c).C=null;b.C=a;a.h[c]=b}function Wd(a,b,c){!1!==b.call(c,a)&&L(a).forEach(function(a){Wd(a,b,c)})};function Xd(){K.call(this);this.pa=Yd++}t(Xd,K);var Yd=0;Xd.prototype.W=g("pa");function Zd(a,b,c){Xd.call(this);this.O=a;this.value=b;this.G=c;this.uc=Od(Id.Ac(),this.O.I(),this.G);this.ab=!1;this.bc=b}t(Zd,Xd);m=Zd.prototype;m.Jb=function(){var a=new Zd(this.O,this.value,this.G);a.bc=this.bc;a.vd(this.ab);var b=this.W();a.pa=b;return a};m.gb=function(a){return null!=a?(a.push(this.O),a):[this.O]};m.vd=ba("ab");function $d(a){var b=!1;a.value instanceof Hd||(b="array"==da(a.value)?!a.value.some(function(a){return a instanceof Hd}):!0);if(!b)throw new E(501);}
m.eval=function(a){$d(this);if("in"==this.G)return ae(this,a);var b=a.entries.filter(function(a){return this.uc(I(a,this.O),this.value)!=this.ab},this);return new G(b,H(a))};m.bind=function(a){if(this.bc instanceof Hd){var b=this.bc.wa();if(a.length<=b)throw new E(510);this.value=a[b]}else"array"==da(this.bc)&&(this.value=this.bc.map(function(b){if(b instanceof Hd){var d=b.wa();if(a.length<=d)throw new E(510);return a[b.wa()]}return b}))};
function ae(a,b){var c=D(a.value),d=function(a){return null===a?!1:c.has(a)!=this.ab}.bind(a),e=b.entries.filter(function(a){return d(I(a,this.O))},a);return new G(e,H(b))}m.toString=function(){return"value_pred("+this.O.m()+" "+this.G+(this.ab?"(complement)":"")+" "+this.value+")"};function be(a){this.ca=a;this.ad=this.Ba=null}function ce(a,b){null===a.Ba&&null!=a.u&&(a.Ba=de(a.u));return a.Ba.get(b)||null}function de(a){var b=A();Wd(a,function(a){b.set(a.W(),a)});return b}function ee(a,b){b.u&&(a.u=b.u.Jb());a.ad=b}be.prototype.bind=function(){return this};function fe(a,b){var c=a.u;null!=c&&Wd(c,function(a){a instanceof Zd&&a.bind(b)})};function ge(a){be.call(this,a)}t(ge,be);function he(a){var b="";a.forEach(function(c,d){b+=c.O.m()+" ";b+=1==c.kb?"ASC":"DESC";d<a.length-1&&(b+=", ")});return b}ge.prototype.$=function(){return D(this.c)};ge.prototype.clone=function(){var a=new ge(this.ca);ee(a,this);this.f&&(a.f=this.f.slice());this.c&&(a.c=this.c.slice());a.X=this.X;a.N=this.N;this.M&&(a.M=this.M.slice());this.ja&&(a.ja=this.ja.slice());this.Qb&&(a.Qb=this.Qb);this.Yb&&(a.Yb=this.Yb);a.yb=this.yb;return a};
ge.prototype.bind=function(a){ge.Hb.bind.call(this,a);null!=this.Qb&&(this.X=a[this.Qb.wa()]);null!=this.Yb&&(this.N=a[this.Yb.wa()]);fe(this,a);return this};function ie(a,b){this.Ca=a;this.aa=b}ie.prototype.hb=g("Ca");ie.prototype.$=g("aa");function je(a){var b=D();a.forEach(function(a){a.$().forEach(b.add.bind(b))});return b};function ke(a,b){this.global=a;this.Ka=a.i(ic);this.sd=b.map(function(a){return a.context});this.af=b.map(function(a){return a.ee});this.De=je(this.af);this.sf=le(this);this.cb=x()}function le(a){return a.sd.some(function(a){return!(a instanceof ge)})?1:0}m=ke.prototype;
m.exec=function(){function a(){var f=d.shift();if(f){var h=e[c.length];return f.hb().exec(b,h).then(function(b){c.push(b[0]);return a()})}return w()}var b=new id(this.global,this.De),c=[],d=this.af.slice(),e=this.sd;return a().then(function(){return this.Ka.Cb(this.sf,b).ia()}.bind(this)).then(function(){this.be(c);return c}.bind(this),function(a){b.Gb();throw a;})};m.I=g("sf");m.$=g("De");m.Mb=g("cb");m.W=function(){return ja(this)};m.be=aa();function me(a,b){ke.call(this,a,b);this.Fb=a.i(nc)}t(me,ke);me.prototype.getPriority=l(0);me.prototype.be=function(a){this.sd.forEach(function(b,c){ne(this.Fb,b,a[c])},this)};function oe(a,b){this.g=a;this.Fb=a.i(nc);this.Da=a.i(mc);this.ld=new Gc(a);this.qb=b;var c=a.i(oc),d=this.qb.map(function(a){return c.table(a.getName())});this.aa=D(d);this.cb=x()}m=oe.prototype;m.exec=function(){this.ld.update(this.qb);this.Pc();return w()};m.I=l(1);m.$=g("aa");m.Mb=g("cb");m.W=function(){return ja(this)};m.getPriority=l(1);m.Pc=function(){var a=pe(this.Fb,this.aa);0!=a.length&&(a=new me(this.g,a),qe(this.Da,a))};function re(a){this.g=a;this.Ka=a.i(ic);this.Da=a.i(mc)}re.prototype.$d=function(a){a=new oe(this.g,a);qe(this.Da,a)};function M(a,b){this.Pa=a;this.l=b;this.Va=A()}r("lf.backstore.FirebaseRawBackStore",M);M.prototype.gd=g("l");M.prototype.hd=function(){throw new E(351);};function se(a,b){var c=x(),d=a;b.length&&(d=a.child(b));d.once("value",function(a){c.resolve(a.val())},function(a){c.reject(a)});return c.ha}function te(a,b,c){function d(a){a?e.reject(a):e.resolve()}c=c||!1;var e=x();c?a.set(b,d):a.update(b,d);return e.ha}
M.prototype.Fa=function(a){return se(this.l,"@rev/R").then(function(a){this.Na=a;return se(this.l,"@table")}.bind(this)).then(function(b){var c=0,d;for(d in b)this.Va.set(d,b[d]),b[d]>c&&(c=b[d]);a.ra().forEach(function(a){this.Va.has(a.getName())||(b[a.getName()]=++c)},this);d=this.l.child("@table");return te(d,b)}.bind(this))};
function ue(a,b,c){var d=a.Va.get(b);return null!=d?function(){var a={},b=x();this.l.orderByChild("T").equalTo(d).once("value",function(d){d.forEach(function(b){var d=c(b.val());a[parseInt(b.key(),10)]=d});b.resolve(a)});return b.ha}.call(a).then(function(a){a["@rev"]={R:++this.Na};return te(this.l,a)}.bind(a)):w()}M.prototype.sc=function(a){return ue(this,a,l(null)).then(function(){this.Va.delete(a);return te(this.l.child("@table/"+a),null,!0)}.bind(this))};M.prototype.dropTable=M.prototype.sc;
M.prototype.nc=function(a,b,c){return ue(this,a,function(a){var e=a.P;e[b]=c;return{R:this.Na+1,T:a.T,P:e}}.bind(this))};M.prototype.addTableColumn=M.prototype.nc;M.prototype.tc=function(a,b){return ue(this,a,function(a){var d=a.P;delete d[b];return{R:this.Na+1,T:a.T,P:d}}.bind(this))};M.prototype.dropTableColumn=M.prototype.tc;M.prototype.Oc=function(a,b,c){return ue(this,a,function(a){var e=a.P;e[c]=e[b];delete e[b];return{R:this.Na+1,T:a.T,P:e}}.bind(this))};M.prototype.renameTableColumn=M.prototype.Oc;
M.prototype.tb=function(){throw new E(351);};M.prototype.createRow=M.prototype.tb;M.prototype.Dc=g("Pa");M.prototype.getVersion=M.prototype.Dc;M.prototype.dc=function(a){var b=x();a=this.Va.get(a);this.l.orderByChild("T").equalTo(a).once("value",function(a){var d=[];a.forEach(function(a){d.push(a.val().P)});b.resolve(d)});return b.ha};M.prototype.dump=function(){var a={},b=$b(this.Va).map(function(b){return this.dc(b).then(function(d){a[b]=d})}.bind(this));return cb(b).then(function(){return a})};
M.prototype.dump=M.prototype.dump;function ve(a,b,c){bc.call(this,c,b);this.l=a}t(ve,bc);ve.prototype.H=function(a){return this.l.Bc(a)};
ve.prototype.pc=function(){var a=this.Ra.qb;if(0==a.size)this.Y.resolve();else{var b=this.l.Na+1;this.l.Na=b;var c={"@rev":{R:b}};a.forEach(function(a,e){var f=this.l.Va.get(e);a.ta.forEach(function(a,d){c[d]={R:b,T:f,P:a.s}});a.na.forEach(function(a,d){c[d]={R:b,T:f,P:a[1].s}});a.va.forEach(function(a,b){c[b]=null})},this);this.l.l.update(c,function(c){null===c?this.Y.resolve():(this.l.Na=b-1,c=C(a).map(function(a){return we(this.l,a.getName())},this),cb(c).then(this.Y.reject.bind(this.Y),this.Y.reject.bind(this.Y)))}.bind(this))}return this.Y.ha};function xe(){this.ua=A()}function ye(a,b){if(0==b.length)return C(a.ua);var c=[];b.forEach(function(a){a=this.ua.get(a)||null;null===a||c.push(a)},a);return c}xe.prototype.getData=g("ua");xe.prototype.get=function(a){return w(ye(this,a))};function ze(a,b){b.forEach(function(a){this.ua.set(a.id(),a)},a)}xe.prototype.put=function(a){ze(this,a);return w()};function Ae(a,b){0==b.length||b.length==a.ua.size?a.ua.clear():b.forEach(function(a){this.ua.delete(a)},a)}
xe.prototype.remove=function(a){Ae(this,a);return w()};function Be(a){return 0==a.ua.size?0:$b(a.ua).reduce(function(a,c){return a>c?a:c},0)};function Ce(a,b){this.j=a;this.yf=b;this.Nc=A();this.Na=-1;this.L=A();this.Va=A();this.Fd=null}m=Ce.prototype;
m.Fa=function(a){this.l=this.yf.child(this.j.name());var b=a||function(){return w()};return se(this.l,"@db/version").then(function(a){return null===a?te(this.l,De(this),!0).then(function(){var a=new M(0,this.l);return b(a)}.bind(this)):a==this.j.version()?se(this.l,"@rev/R").then(function(a){this.Na=a;return se(this.l,"@table")}.bind(this)).then(function(a){for(var b in a)this.Va.set(b,a[b]);a=this.j.ra().map(function(a){return we(this,a.getName())},this);return cb(a)}.bind(this)).then(function(){Ee(this);
Fe(this);return w()}.bind(this)):this.ce(a,b).then(function(){return this.Fa()}.bind(this))}.bind(this))};m.ce=function(a,b){var c=new M(a,this.l);return c.Fa(this.j).then(function(){return w()}.bind(this)).then(function(){return b(c)}).then(function(){var a=this.l.child("@db");return te(a,{version:this.j.version()},!0)}.bind(this))};
function Fe(a){a.l.off();a.l.on("child_removed",a.mg.bind(a));a.Gd&&(a.Gd.off(),a.Nc.clear());a.Gd=a.l.orderByChild("R").startAt(a.Na+1);a.Gd.on("value",a.$d.bind(a))}function Ee(a){nb=C(a.L).map(function(a){return Be(a)}).reduce(function(a,c){return a>c?a:c},0)+1}m.mg=function(a){var b=a.val(),c=this.Nc.get(b.T)||null;null===c&&(c=D(),this.Nc.set(b.T,c));c.add(parseInt(a.key(),10))};
m.$d=function(a){var b=a.child("@rev/R").val();null!=b&&b!=this.Na&&(this.Na=b,a=Ge(this,a),a.forEach(function(a){var b=this.L.get(a.getName()),e=$b(a.va);0<e.length&&Ae(b,e);var f=C(a.ta);a.na.forEach(function(a){f.push(a[1])});ze(b,f)},this),0<a.length&&this.Ic(a),Fe(this))};
function Ge(a,b){var c=D(),d=A();a.Va.forEach(function(a,b){var h=this.L.get(b),k=new gd(b);if(this.Nc.has(a)){var n=uc(this.Nc.get(a));n.forEach(function(a){c.add(a)});ye(h,n).forEach(function(a){k.delete(a)})}d.set(a,k)}.bind(a));b.forEach(function(a){if("@rev"!=a.key()){var b=parseInt(a.key(),10);if(!c.has(b)){a=a.val();var h=d.get(a.T),k=this.L.get(h.getName());k.getData().has(b)?h.modify([ye(k,[b])[0],new y(b,a.P)]):h.add(new y(b,a.P))}}}.bind(a));return C(d).filter(function(a){return!a.md()})}
function we(a,b){var c=x(),d=a.Va.get(b);a.l.orderByChild("T").equalTo(d).once("value",function(a){var d=new xe,h=[];a.forEach(function(a){h.push(new y(parseInt(a.key(),10),a.val().P))});ze(d,h);this.L.set(b,d);c.resolve()}.bind(a));return c.ha}function De(a){var b={};b["@db"]={version:a.j.version()};b["@rev"]={R:1};a.Na=1;b["@table"]={};a.j.ra().forEach(function(a,d){var e=a.getName();b["@table"][e]=d;this.L.set(e,new xe);this.Va.set(e,d)},a);return b}m.Cb=function(a,b){return new ve(this,a,b)};
m.Bc=function(a){var b=this.L.get(a)||null;if(null!==b)return b;throw new E(101,a);};m.close=aa();m.subscribe=ba("Fd");m.Ic=function(a){null!=this.Fd&&this.Fd(a)};function N(a,b,c,d){this.l=b;this.Xa=c;this.Pa=a;this.Yc=d}r("lf.backstore.IndexedDBRawBackStore",N);N.prototype.gd=g("l");N.prototype.getRawDBInstance=N.prototype.gd;N.prototype.hd=g("Xa");N.prototype.getRawTransaction=N.prototype.hd;N.prototype.sc=function(a){return new v(function(b,c){try{this.l.deleteObjectStore(a)}catch(d){c(d);return}b()},this)};N.prototype.dropTable=N.prototype.sc;
function He(a,b,c,d){return new v(function(a,f){var h;try{var k=this.Xa.objectStore(b);h=k.openCursor()}catch(n){f(n);return}h.onsuccess=function(){var b=h.result;b?(c(b),b.continue()):(d(k),a())};h.onerror=f},a)}function Ie(a){var b=null;return b=a instanceof ArrayBuffer?rb(a):a instanceof Date?a.getTime():a}
function Je(a,b,c){function d(a){var b=Ac(a.value),d=b.s,e;for(e in d){var B=pb(d[e]);c(B);d[e]=B.Ja()}a.update(b.Ja())}function e(a){var b=pb(a.value);c(b);a.update(b.Ja())}return He(a,b,a.Yc?d:e,aa())}N.prototype.nc=function(a,b,c){var d=Ie(c);return Je(this,a,function(a){a.s[b]=d})};N.prototype.addTableColumn=N.prototype.nc;N.prototype.tc=function(a,b){return Je(this,a,function(a){delete a.s[b]})};N.prototype.dropTableColumn=N.prototype.tc;
N.prototype.Oc=function(a,b,c){return Je(this,a,function(a){a.s[c]=a.s[b];delete a.s[b]})};N.prototype.renameTableColumn=N.prototype.Oc;function Ke(a,b){var c=[];return new v(function(a,e){var f;try{f=this.Xa.objectStore(b).openCursor()}catch(h){e(h);return}f.onsuccess=function(){var b=f.result;if(b){if(this.Yc){var e;e=Ac(b.value).s;for(var n in e)c.push(e[n])}else c.push(b.value);b.continue()}else a(c)}.bind(this);f.onerror=e},a)}N.prototype.tb=function(a){var b={},c;for(c in a)b[c]=Ie(a[c]);return qb(b)};
N.prototype.createRow=N.prototype.tb;N.prototype.Dc=g("Pa");N.prototype.getVersion=N.prototype.Dc;N.prototype.dump=function(){for(var a=this.l.objectStoreNames,b=[],c=0;c<a.length;++c){var d=a.item(c);b.push(this.dc(d))}return cb(b).then(function(b){var c={};b.forEach(function(b,d){c[a.item(d)]=b});return c})};N.prototype.dump=N.prototype.dump;N.prototype.dc=function(a){return Ke(this,a).then(function(a){return a.map(function(a){return a.value})})};function Le(a,b){this.ba=a;this.Kb=b}m=Le.prototype;m.get=function(a){if(0==a.length)return this.yc();a=a.map(function(a){return new v(function(c,d){var e;try{e=this.ba.get(a)}catch(f){d(f);return}e.onerror=d;e.onsuccess=function(a){c(this.Kb(a.target.result))}.bind(this)},this)},this);return cb(a)};
m.yc=function(){return new v(function(a,b){var c=[],d;try{d=this.ba.openCursor()}catch(e){b(e);return}d.onerror=b;d.onsuccess=function(){var b=d.result;b?(c.push(this.Kb(b.value)),b.continue()):a(c)}.bind(this)},this)};m.Sb=function(a){return new v(function(b,c){var d;try{d=a()}catch(e){c(e);return}d.onsuccess=b;d.onerror=c},this)};m.put=function(a){if(0==a.length)return w();a=a.map(function(a){return this.Sb(function(){return this.ba.put(a.Ja())}.bind(this))},this);return cb(a)};
m.remove=function(a){return new v(function(b,c){var d=this.ba.count();d.onsuccess=function(d){if(0==a.length||d.target.result==a.length)return this.Sb(function(){return this.ba.clear()}.bind(this)).then(b,c);d=a.map(function(a){return this.Sb(function(){return this.ba.delete(a)}.bind(this))},this);cb(d).then(b,c)}.bind(this);d.onerror=c},this)};function Me(a,b,c,d,e){bc.call(this,c,d);this.g=a;this.Xa=b;this.Yc=e;this.Xa.oncomplete=this.Y.resolve.bind(this.Y);this.Xa.onabort=this.Y.reject.bind(this.Y)}t(Me,bc);Me.prototype.H=function(a,b,c){return this.Yc?(c=null!=c?c:0,a=this.Xa.objectStore(a),new Bc(a,b,0==c?pa(Dc,this.g):Ec)):new Le(this.Xa.objectStore(a),b)};Me.prototype.pc=function(){return this.Y.ha};function Ne(a,b){this.g=a;this.j=b;this.Zc=b.bf().Lf||!1}m=Ne.prototype;
m.Fa=function(a){var b=window.indexedDB||window.mozIndexedDB||window.webkitIndexedDB||window.msIndexedDB;if(null==b)throw new E(352);var c=a||function(){return w()};return new v(function(a,e){var f;try{f=b.open(this.j.name(),this.j.version())}catch(h){e(h);return}f.onerror=e;f.onupgradeneeded=function(a){Oe(this,c,a).then(aa(),e)}.bind(this);f.onsuccess=function(b){this.l=b.target.result;this.le().then(function(b){nb=b+1;a(this.l)}.bind(this))}.bind(this)},this)};
function Oe(a,b,c){var d=c.target.result,e=c.target.transaction;c=new N(c.oldVersion,d,e,a.Zc);Pe(d);a.j.ra().forEach(pa(a.Gf,d,e),a);return b(c)}function Pe(a){for(var b=[],c=0;c<a.objectStoreNames.length;++c){var d=a.objectStoreNames.item(c);-1!=d.indexOf(".")&&b.push(d)}b.forEach(function(b){try{a.deleteObjectStore(b)}catch(c){}})}
m.Gf=function(a,b,c){a.objectStoreNames.contains(c.getName())||a.createObjectStore(c.getName(),{keyPath:"id"});c.zb()&&(c.xa().forEach(function(c){this.rc(a,b,c.m(),"btree")},this),this.rc(a,b,Qe(c),"rowid"))};m.rc=function(a,b,c,d){a.objectStoreNames.contains(c)||(a.createObjectStore(c,{keyPath:"id"}),a=b.objectStore(c),(this.Zc?new Bc(a,pb,Ec):new Le(a,pb)).put([new tb(new sb(d))]))};
m.Cb=function(a,b){var c=$b(b.$());jd(b).forEach(function(a){c.push(a)});var d=this.l.transaction(c,0==a?"readonly":"readwrite");return new Me(this.g,d,b,a,this.Zc)};
m.le=function(a){function b(){if(0==d.length)return w();var a=d.shift();return c(a).then(b)}function c(b){return new v(function(c,d){var T;try{T=(a||e.transaction([b])).objectStore(b).openCursor(null,"prev")}catch(Y){d(Y);return}T.onsuccess=function(a){(a=a.target.result)&&(f=Math.max(f,h(a)));c(f)};T.onerror=function(){c(f)}})}var d=this.j.ra().map(function(a){return a.getName()}),e=this.l,f=0,h=function(a){return this.Zc?(a=Ac(a.value),Object.keys(a.s).reduce(function(a,b){return Math.max(a,b)},
0)):a.key}.bind(this);return new v(function(a){b().then(function(){a(f)})})};m.close=function(){this.l.close()};m.Bc=function(){throw new E(511);};m.subscribe=aa();m.Ic=aa();function Re(a,b,c){bc.call(this,c,b);this.ba=a;0==b&&this.Y.resolve()}t(Re,bc);Re.prototype.H=function(a){return this.ba.Bc(a)};Re.prototype.pc=function(){this.Y.resolve();return this.Y.ha};function Se(a){this.j=a;this.L=A()}m=Se.prototype;m.Fa=function(){this.j.ra().forEach(this.Xf,this);return w()};m.Bc=function(a){var b=this.L.get(a)||null;if(null===b)throw new E(101,a);return b};m.Cb=function(a,b){return new Re(this,a,b)};function Te(a,b){if(!a.L.has(b)){var c=new xe;a.L.set(b,c);return c}return null}m.Xf=function(a){Te(this,a.getName());a.zb()&&(a.xa().forEach(function(a){this.rc(a.m(),"btree")},this),this.rc(Qe(a),"rowid"))};m.rc=function(a,b){var c=Te(this,a);null===c||c.put([new tb(new sb(b))])};
m.close=aa();m.subscribe=aa();m.Ic=aa();function Ue(a){Se.call(this,a);this.od=null}t(Ue,Se);Ue.prototype.subscribe=function(a){null===this.od&&(this.od=a)};Ue.prototype.Ic=function(a){null===this.od||this.od(a)};function Ve(a,b,c){this.Xa=a;this.w=b;this.Kb=c}Ve.prototype.get=function(a){var b=this.Kb;return We(this.Xa,"SELECT id, value FROM "+this.w+" "+(0==a.length?"":"WHERE id IN ("+a.join(",")+")"),[],function(a){for(var d=a.rows.length,e=Array(d),f=0;f<d;++f)e[f]=b({id:a.rows.item(f).id,value:JSON.parse(a.rows.item(f).value)});return e})};
Ve.prototype.put=function(a){if(0==a.length)return w();var b="INSERT OR REPLACE INTO "+this.w+"(id, value) VALUES (?, ?)";a.forEach(function(a){We(this.Xa,b,[a.id(),JSON.stringify(a.s)])},this);return w()};Ve.prototype.remove=function(a){We(this.Xa,"DELETE FROM "+this.w+" "+(0==a.length?"":"WHERE id IN ("+a.join(",")+")"),[]);return w()};function Xe(a,b,c){bc.call(this,b,c);this.l=a;this.L=A();this.Id=[]}t(Xe,bc);function Ye(a){return a.replace(".","__d__").replace("#","__s__")}Xe.prototype.H=function(a,b){var c=this.L.get(a)||null;null===c&&(c=new Ve(this,Ye(a),b),this.L.set(a,c));return c};function We(a,b,c,d){var e=x();a.Id.push({zg:b,pg:c,transform:d,Y:e});return e.ha}
Xe.prototype.pc=function(){var a=null,b=this.Y.reject.bind(this.Y),c=function(a,b){this.Y.reject(b)}.bind(this),d=[],e=function(b,h){if(null!==a){var k=h;null!=a.transform&&null!=h&&(k=a.transform(h));d.push(k);a.Y.resolve(k)}0<this.Id.length?(a=k=this.Id.shift(),b.executeSql(k.zg,k.pg,e,c)):this.Y.resolve(d)}.bind(this);0==this.rf?this.l.readTransaction(e,b):this.l.transaction(e,b);return this.Y.ha};function O(a,b,c){this.l=c;this.g=a;this.Pa=b}r("lf.backstore.WebSqlRawBackStore",O);O.prototype.gd=g("l");O.prototype.getRawDBInstance=O.prototype.gd;O.prototype.hd=function(){throw new E(356);};O.prototype.getRawTransaction=O.prototype.hd;function Ze(a){return new Xe(a.l,new id(a.g,D()),1)}O.prototype.sc=function(a){var b=Ze(this);We(b,"DROP TABLE "+a,[]);return b.ia()};O.prototype.dropTable=O.prototype.sc;
O.prototype.dc=function(a){var b=Ze(this);We(b,"SELECT id, value FROM "+a,[]);return b.ia().then(function(a){for(var b=a[0].rows.length,e=Array(b),f=0;f<b;++f)e[f]={id:a[0].rows.item(f).id,value:JSON.parse(a[0].rows.item(f).value)};return w(e)})};function $e(a,b,c){var d=Ze(a),e="UPDATE "+b+" SET value=? WHERE id=?";return a.dc(b).then(function(a){a.forEach(function(a){a=c(a);We(d,e,[JSON.stringify(a.value),a.id])});return d.ia()})}
O.prototype.nc=function(a,b,c){var d=Ie(c);return $e(this,a,function(a){a.value[b]=d;return a})};O.prototype.addTableColumn=O.prototype.nc;O.prototype.tc=function(a,b){return $e(this,a,function(a){delete a.value[b];return a})};O.prototype.dropTableColumn=O.prototype.tc;O.prototype.Oc=function(a,b,c){return $e(this,a,function(a){a.value[c]=a.value[b];delete a.value[b];return a})};O.prototype.renameTableColumn=O.prototype.Oc;O.prototype.tb=function(a){var b={},c;for(c in a)b[c]=Ie(a[c]);return qb(b)};
O.prototype.createRow=O.prototype.tb;O.prototype.Dc=g("Pa");O.prototype.getVersion=O.prototype.Dc;function af(a){We(a,'SELECT tbl_name FROM sqlite_master WHERE type="table"',[],function(a){for(var c=Array(a.rows.length),d=0;d<c.length;++d)c[d]=a.rows.item(d).tbl_name;return c})}
O.prototype.dump=function(){var a=x(),b=Ze(this);af(b);var c={};b.ia().then(function(b){b=b[0].filter(function(a){return"__lf_ver"!=a&&"__WebKitDatabaseInfoTable__"!=a}).map(function(a){return this.dc(a).then(function(b){c[a]=b})},this);cb(b).then(function(){a.resolve(c)})}.bind(this));return a.ha};O.prototype.dump=O.prototype.dump;function bf(a,b,c){this.g=a;this.j=b;this.yg=c||4194304}function cf(a){return new id(a.g,D())}m=bf.prototype;m.Fa=function(a){if(null==window.openDatabase)throw new E(353);var b=a||function(){return w()};return new v(function(a,d){try{var e=window.openDatabase(this.j.name(),"",this.j.name(),this.yg);if(null!=e)this.l=e,df(this,b).then(a,d);else throw new E(354);}catch(f){d(f)}},this)};
function df(a,b){var c=x(),d=new Xe(a.l,cf(a),1);We(d,"CREATE TABLE IF NOT EXISTS __lf_ver(id INTEGER PRIMARY KEY, v INTEGER)",[]);We(d,"SELECT v FROM __lf_ver WHERE id = 0",[]);d.ia().then(function(a){var d=0;a[1].rows.length&&(d=a[1].rows.item(0).v);d<this.j.version()?this.ce(b,d).then(c.resolve.bind(c)):d>this.j.version()?c.reject(new E(108)):c.resolve()}.bind(a));return c.ha}m.Cb=function(a,b){if(null!=this.l)return new Xe(this.l,b,a);throw new E(2);};m.close=aa();
m.Bc=function(){throw new E(512);};m.subscribe=function(){throw new E(355);};m.Ic=function(){throw new E(355);};m.ce=function(a,b){var c=x();ef(this).then(function(){a(new O(this.g,b,this.l)).then(function(){return this.le()}.bind(this)).then(c.resolve.bind(c))}.bind(this),c.reject.bind(c));return c.ha};
function ef(a){var b=a.j.ra(),c=new Xe(a.l,cf(a),1),d=new Xe(a.l,cf(a),1);We(c,"INSERT OR REPLACE INTO __lf_ver VALUES (0, ?)",[a.j.version()]);af(c);return c.ia().then(function(a){function c(a,b){We(d,"INSERT INTO "+a+"(id, value) VALUES(?, ?)",[-1,JSON.stringify(ob(new tb(new sb(b))))])}var h=a[1];h.filter(function(a){return-1!=a.indexOf("__d__")}).forEach(function(a){We(d,"DROP TABLE "+a,[])});var k=[],n=[],B=[];b.map(function(a){-1==h.indexOf(a.getName())&&k.push(a.getName());a.zb&&(a.xa().forEach(function(a){a=
Ye(a.m());k.push(a);n.push(a)}),a=Ye(Qe(a)),k.push(a),B.push(a))});k.forEach(function(a){We(d,"CREATE TABLE "+a+"(id INTEGER PRIMARY KEY, value TEXT)",[])});n.forEach(function(a){c(a,"btree")});B.forEach(function(a){c(a,"rowid")});return d.ia()})}
m.le=function(){var a=0,b=x(),c=function(b){var c=new Xe(this.l,cf(this),0);We(c,"SELECT MAX(id) FROM "+b,[]);return c.ia().then(function(b){b=b[0].rows.item(0)[0];a=Math.max(b,a)})}.bind(this),d=this.j.ra().map(function(a){return c(a.getName())});cb(d).then(function(){b.resolve(a)},function(a){b.reject(a)});return b.ha};function ff(a){this.o=A();this.Zb=A();a.ra().forEach(function(a){this.Zb.set(a.getName(),D())},this)}m=ff.prototype;m.set=function(a,b){this.o.set(b.id(),b);this.Zb.get(a).add(b.id())};m.Vb=function(a,b){var c=this.Zb.get(a);b.forEach(function(a){this.o.set(a.id(),a);c.add(a.id())},this)};m.get=function(a){return this.o.get(a)||null};function gf(a,b){return b.map(function(a){return this.get(a)},a)}
m.$a=function(a,b,c){var d=[],e=Math.min(b,c),f=Math.max(b,c);a=this.Zb.get(a);if(a.size<f-e)a.forEach(function(a){a>=e&&a<=f&&(a=this.o.get(a),d.push(a))},this);else for(b=e;b<=f;++b)a.has(b)&&(c=this.o.get(b),d.push(c));return d};m.remove=function(a,b){this.o.delete(b);this.Zb.get(a).delete(b)};m.zc=function(a){return null!=a?this.Zb.get(a).size:this.o.size};m.clear=function(){this.o.clear();this.Zb.clear()};function hf(a,b,c){var d=0,e=a.length;for(c=c||jf;d<e;){var f=d+e>>1;0>c(a[f],b)?d=f+1:e=f}return d==e&&a[d]==b?d:~d}function jf(a,b){return a-b}function kf(a,b,c){c=hf(a,b,c);return 0>c?(a.splice(-(c+1),0,b),!0):!1};function mf(a,b,c,d){a=b?a.reverse():a;if(null==c&&null==d)return a;c=Math.min(q(c)?c:a.length,a.length);if(0==c)return[];d=Math.min(d||0,a.length);return a.slice(d,d+c)};function nf(){this.oa=0}nf.prototype.add=function(a,b){this.oa+=b};nf.prototype.remove=function(a,b){this.oa-=b};nf.prototype.clear=function(){this.oa=0};function of(a,b){a.clear();b.forEach(function(a){this.oa+=a.oa},a)};function pf(a,b,c,d){this.w=a;this.V=b;this.re=c;this.ob=new nf;if(d){a=511;a*=a*a;if(d.length>=a)throw new E(6,a);d=qf(this,d);this.qa=d=rf(d)}else this.clear()}var sf=[];m=pf.prototype;m.getName=g("w");m.toString=function(){return this.qa.toString()};m.add=function(a,b){this.qa=this.qa.xb(a,b)};m.set=function(a,b){this.qa=this.qa.xb(a,b,!0)};m.remove=function(a,b){this.qa=this.qa.remove(a,b)};m.get=function(a){return this.qa.get(a)};
m.bd=function(a){if(null==a)return this.Oa().oa;if(a instanceof nd){if(pd(a))return this.Oa().oa;if(td(a))return this.get(a.c).length}return this.$a([a]).length};m.Oa=g("ob");m.yc=function(a,b,c,d){c=Array(a);this.qa.fill({offset:b?this.ob.oa-a-d:d,count:a,oe:0},c);return b?c.reverse():c};
m.$a=function(a,b,c,d){var e=tf(this.qa).b[0];if(!q(e)||0==c)return sf;b=b||!1;c=null!=c?Math.min(c,this.ob.oa):this.ob.oa;d=d||0;var f=Math.min(Math.max(this.ob.oa-d,0),c);if(0==f)return sf;if(!q(a)||1==a.length&&a[0]instanceof nd&&pd(a[0]))return this.yc(f,b,c,d);a=this.V.nf(a);var h=Array(b?this.ob.oa:f),k={count:0,X:h.length,reverse:b,N:d};a.forEach(function(a){for(var b=this.V.td(a),b=this.V.Sd(a)?e:b[0],b=uf(this.qa,b),c=k.count,d=0;null!=b&&k.count<k.X;)b.$a(a,k,h),k.count!=c?(d=0,c=k.count):
d++,b=2==d?null:b.next()},this);h.splice(k.count,f-k.count);return b?mf(h,b,c,d):h};m.clear=function(){this.qa=vf(this);this.ob.clear()};m.Ma=function(a){return this.qa.Ma(a)};m.min=function(){return this.Hc(this.V.min.bind(this.V))};m.max=function(){return this.Hc(this.V.max.bind(this.V))};m.Hc=function(a){var b=tf(this.qa),c=wf(this.qa);if(0==b.b.length&&0==c.b.length)return null;var d=b.b[0],b=b.B[0],e=c.b[c.b.length-1],c=c.B[c.b.length-1];return 1==a(d,e)?[d,this.re?[b]:b]:[e,this.re?[c]:c]};
m.Ha=g("re");m.qc=g("V");m.Wd=function(a,b){return null!=a?-1==this.V.compare(a,b):!1};m.Qa=function(a,b){return null!=a?0==this.V.compare(a,b):!1};m.Ja=function(){for(var a=[],b=tf(this.qa);b;)a.push(new y(b.pa,[b.b,b.B])),b=b.za;return a};function xf(a,b,c,d){a=new pf(b,a,c);d=yf(d,a);a.qa=d;return a}function zf(a,b){this.pa=a;this.F=b;this.ib=0;this.za=this.Ab=this.C=null;this.b=[];this.B=[];this.h=[]}function vf(a){return new zf(nb++,a)}function P(a){return 0==a.ib}m=zf.prototype;m.next=g("za");
function Af(a){function b(a){return null!=a?a.pa.toString():"_"}var c=a.pa+"["+a.b.join("|")+"]",d=a.h.map(function(a){return a.pa}).join("|"),e=a.B.join("/"),f=b(a.Ab)+"{",f=P(a)?f+e:f+d,f=f+"}"+b(a.C);a.za&&(a=Af(a.za),c=c+"  "+a[0],f=f+"  "+a[1]);return[c,f]}m.toString=function(){var a="",b=Af(this),a=a+(b[0]+"\n"+b[1]+"\n");this.h.length&&(a+=this.h[0].toString());return a};function tf(a){return P(a)?a:tf(a.h[0])}function wf(a){return P(a)?a:wf(a.h[a.h.length-1])}
function Bf(a,b){b&&(b.Ab=a);a&&(a.za=b)}function qf(a,b){for(var c=b.length,d=0,e=vf(a),f=e;0<c;){var h=768<=c?511:257<=c&&511>=c?c:257,k=b.slice(d,d+h);e.b=k.map(function(a){return a.key});e.B=k.map(function(a){return a.value});d+=h;c-=h;0<c&&(h=vf(e.F),Bf(e,h),e=h)}return f}function Cf(a){var b=a[0],c=vf(b.F);c.ib=b.ib+1;c.h=a;for(b=0;b<a.length;++b)a[b].C=c,0<b&&c.b.push(a[b].b[0]);return c}
function rf(a){var b=a,c=[];do c.push(b),b=b.za;while(b);if(512>=c.length)b=Cf(c);else{var d=c.length,e=0,b=vf(a.F);for(b.ib=a.ib+2;0<d;){a=768<=d?511:257<=d&&511>=d?d:257;var f=c.slice(e,e+a),h=Cf(f);h.C=b;b.h.length&&(b.b.push(f[0].b[0]),Bf(b.h[b.h.length-1],h));b.h.push(h);e+=a;d-=a}}return b}m.get=function(a){var b=Df(this,a);if(P(this)){var c=sf;this.F.Qa(this.b[b],a)&&(c=c.concat(this.B[b]));return c}b=this.F.Qa(this.b[b],a)?b+1:b;return this.h[b].get(a)};
m.Ma=function(a){var b=Df(this,a);return this.F.Qa(this.b[b],a)?!0:P(this)?!1:this.h[b].Ma(a)};m.remove=function(a,b){Ef(this,a,-1,b);if(null==this.C){var c=this;1==this.h.length&&(c=this.h[0],c.C=null);return c}return this};function Ff(a){return P(a)?a.b[0]:Ff(a.h[0])}function Gf(a){a.b=[];for(var b=1;b<a.h.length;++b)a.b.push(Ff(a.h[b]))}
function Ef(a,b,c,d){var e=Df(a,b),f=P(a);if(!f){var h=a.F.Qa(a.b[e],b)?e+1:e;if(Ef(a.h[h],b,h,d))Gf(a);else return!1}else if(!a.F.Qa(a.b[e],b))return!1;if(a.b.length>e&&a.F.Qa(a.b[e],b)){if(q(d)&&!a.F.Ha()&&f&&(h=a.B[e],d=hf(h,d,void 0),0>d?d=!1:(h.splice(d,1),d=!0),d&&a.F.Oa().remove(b,1),a.B[e].length))return!1;a.b.splice(e,1);f&&(f=a.F.Ha()?1:a.B[e].length,a.B.splice(e,1),a.F.Oa().remove(b,f))}if(256>a.b.length&&null!=a.C){a:{b=null;if(a.za&&256<a.za.b.length)b=a.za,e=d=0,f=a.b.length+1;else if(a.Ab&&
256<a.Ab.b.length)b=a.Ab,d=a.Ab.b.length-1,e=P(a)?d:d+1,f=0;else{b=!1;break a}a.b.splice(f,0,b.b[d]);b.b.splice(d,1);d=P(a)?a.B:a.h;h=null;P(a)?h=b.B:(h=b.h,h[e].C=a);d.splice(f,0,h[e]);h.splice(e,1);P(b)||(Gf(b),Gf(a));b=!0}b||Hf(a,c)}return!0}
function Hf(a,b){var c,d,e;a.za&&511>a.za.b.length?(c=a.za,e=d=0):a.Ab&&(c=a.Ab,d=c.b.length,e=P(c)?c.B.length:c.h.length);d=[d,0].concat(a.b);Array.prototype.splice.apply(c.b,d);d=null;P(a)?d=a.B:(d=a.h,d.forEach(function(a){a.C=c}));d=[e,0].concat(d);Array.prototype.splice.apply(P(c)?c.B:c.h,d);Bf(a.Ab,a.za);P(c)||Gf(c);-1!=b&&(a.C.b.splice(b,1),a.C.h.splice(b,1))}
m.xb=function(a,b,c){var d=Df(this,a);if(P(this)){if(this.F.Qa(this.b[d],a)){if(c)this.F.Oa().remove(a,this.F.Ha()?1:this.B[d].length),this.B[d]=this.F.Ha()?b:[b];else{if(this.F.Ha())throw new E(201);if(!kf(this.B[d],b))throw new E(109);}this.F.Oa().add(a,1);return this}this.b.splice(d,0,a);this.B.splice(d,0,this.F.Ha()?b:[b]);this.F.Oa().add(a,1);512==this.b.length?(d=vf(this.F),a=vf(this.F),a.ib=1,a.b=[this.b[256]],a.h=[this,d],a.C=this.C,this.C=a,d.b=this.b.splice(256),d.B=this.B.splice(256),d.C=
a,Bf(d,this.za),Bf(this,d),d=a):d=this;return d}d=this.F.Qa(this.b[d],a)?d+1:d;a=this.h[d].xb(a,b,c);P(a)||1!=a.b.length||(this.b.splice(d,0,a.b[0]),a.h[1].C=this,a.h[0].C=this,this.h.splice(d,1,a.h[1]),this.h.splice(d,0,a.h[0]));return 512==this.b.length?If(this):this};function If(a){var b=vf(a.F),c=vf(a.F);b.C=a.C;b.ib=a.ib+1;b.b=[a.b[256]];b.h=[a,c];a.b.splice(256,1);c.C=b;c.ib=a.ib;c.b=a.b.splice(256);c.h=a.h.splice(257);c.h.forEach(function(a){a.C=c});a.C=b;Bf(c,a.za);Bf(a,c);return b}
function Df(a,b){for(var c=0,d=a.b.length;c<d;){var e=c+d>>1;a.F.Wd(a.b[e],b)?c=e+1:d=e}return c}function uf(a,b){if(!P(a)){var c=Df(a,b);a.F.Qa(a.b[c],b)&&c++;return uf(a.h[c],b)}return a}
m.$a=function(a,b,c){function d(a){return a[0]?a[1]?0:1:-1}var e=this.F.qc(),f=0,h=this.b.length-1,k=this.b,n=d(e.sb(k[f],a)),B=d(e.sb(k[h],a));if(1!=n&&(-1!=n||-1!=B)){var T=function(a,b){var c=a+b>>1;return c==a?c+1:c},Y=function(b,c,f){if(b>=c)return 0==f?c:-1;var h=d(e.sb(k[b],a));if(0==h)return b;if(1==h)return-1;h=T(b,c);if(h==c)return 0==f?c:-1;var n=d(e.sb(k[h],a));return 0==n?Y(b,h,n):-1==n?Y(h+1,c,f):Y(b+1,h,n)},$a=function(b,c){if(b>=c)return b;var f=d(e.sb(k[c],a));if(0==f)return c;if(-1==
f)return b;f=T(b,c);if(f==c)return b;var h=d(e.sb(k[f],a));return 0==h?$a(f,c):1==h?$a(b,f-1):-1};0!=n&&(f=Y(f+1,h,B));-1!=f&&(h=$a(f,h),-1!=h&&h>=f&&Jf(this,b,c,f,h+1))}};function Jf(a,b,c,d,e){for(;d<e&&(b.reverse||!(b.count>=b.X));++d)if(a.F.Ha())!b.reverse&&b.N?b.N--:c[b.count++]=a.B[d];else for(var f=0;f<a.B[d].length&&b.count<c.length;++f)!b.reverse&&b.N?b.N--:c[b.count++]=a.B[d][f]}
m.fill=function(a,b){if(P(this))for(var c=0;c<this.B.length&&0<a.count;++c)if(0<a.offset){if(a.offset-=this.F.Ha()?1:this.B[c].length,0>a.offset)for(var d=this.B[c].length+a.offset;d<this.B[c].length&&0<a.count;++d)b[a.oe++]=this.B[c][d],a.count--}else if(this.F.Ha())b[a.oe++]=this.B[c],a.count--;else for(d=0;d<this.B[c].length&&0<a.count;++d)b[a.oe++]=this.B[c][d],a.count--;else for(c=0;c<this.h.length&&0<a.count;++c)this.h[c].fill(a,b)};
function yf(a,b){for(var c=b.Oa(),d=a.map(function(a){var d=new zf(a.id(),b);d.b=a.s[0];d.B=a.s[1];d.b.forEach(function(a,e){c.add(a,b.Ha()?1:d.B[e].length)});return d}),e=0;e<d.length-1;++e)Bf(d[e],d[e+1]);return 1<d.length?rf(d[0]):d[0]};function Kf(a){this.compare=0==a?Lf:Mf;this.Yd=0==a?function(a){return null!=a?a.reverse():null}:function(a){return a||null};this.de=0==a?Nf:Of}t(Kf,Fc);function Mf(a,b){return a>b?1:a<b?-1:0}function Lf(a,b){return Mf(b,a)}function Of(a,b){return ud(a,b)}function Nf(a,b){return ud(b,a)}m=Kf.prototype;m.sb=function(a,b){var c=this.Yd(b),d=[c.c==F,c.A==F];if(!d[0]){var e=this.compare(a,c.c);d[0]=c.da?1==e:-1!=e}d[1]||(e=this.compare(a,c.A),d[1]=c.ma?-1==e:1!=e);return d};
m.compare=function(a,b){return this.compare(a,b)};m.min=function(a,b){return a<b?1:a==b?0:-1};m.max=function(a,b){return a>b?1:a==b?0:-1};m.Rd=function(a,b){var c=this.sb(a,b);return c[0]&&c[1]};m.nf=function(a){return a.filter(function(a){return null!==a}).sort(function(a,c){return this.de(a,c)}.bind(this))};m.Sd=function(a){return this.Yd(a).c==F};m.td=function(a){a=this.Yd(a);return[a.c,a.A]};m.toString=function(){return this.compare==Lf?"SimpleComparator_DESC":"SimpleComparator_ASC"};function Pf(a){this.La=a.map(function(a){return new Kf(a)})}t(Pf,Fc);function Qf(a,b,c,d){for(var e=0,f=0;f<a.La.length&&0==e;++f)e=d(a.La[f],b[f],c[f]);return e}m=Pf.prototype;m.compare=function(a,b){return Qf(this,a,b,function(a,b,e){return a.compare(b,e)})};m.min=function(a,b){return Qf(this,a,b,function(a,b,e){return a.min(b,e)})};m.max=function(a,b){return Qf(this,a,b,function(a,b,e){return a.max(b,e)})};
m.sb=function(a,b){for(var c=[!0,!0],d=0;d<this.La.length&&(c[0]||c[1]);++d){var e=this.La[d].sb(a[d],b[d]);c[0]=c[0]&&e[0];c[1]=c[1]&&e[1]}return c};m.Rd=function(a,b){for(var c=!0,d=0;d<this.La.length&&c;++d)c=this.La[d].Rd(a[d],b[d]);return c};
m.nf=function(a){var b=a.filter(function(a){return a.every(fa)});a=Array(this.La.length);for(var c=0;c<a.length;c++)a[c]=b.map(function(a){return a[c]});a.forEach(function(a,b){a.sort(function(a,c){return this.La[b].de(a,c)}.bind(this))},this);b=Array(b.length);for(c=0;c<b.length;c++)b[c]=a.map(function(a){return a[c]});return b.sort(function(a,b){for(var c=0,h=0;h<this.La.length&&0==c;++h)c=this.La[h].de(a[h],b[h]);return c}.bind(this))};m.Sd=function(a){return this.La[0].Sd(a[0])};
m.td=function(a){var b=a.map(function(a,b){return this.La[b].td(a)[0]},this);a=a.map(function(a,b){return this.La[b].td(a)[1]},this);return[b,a]};function Rf(a){if(1==a.f.length)return new Kf(a.f[0].kb);a=a.f.map(function(a){return a.kb});return new Pf(a)};function Sf(a){this.fa=a;this.jb=D();this.Qc=new nf;this.ob=new nf}m=Sf.prototype;m.getName=function(){return this.fa.getName()};m.add=function(a,b){null===a?(this.jb.add(b),this.Qc.add(a,1)):this.fa.add(a,b)};m.set=function(a,b){null===a?(this.jb.clear(),this.Qc.clear(),this.add(a,b)):this.fa.set(a,b)};m.remove=function(a,b){null===a?b?(this.jb.delete(b),this.Qc.remove(a,1)):(this.jb.clear(),this.Qc.clear()):this.fa.remove(a,b)};m.get=function(a){return null===a?uc(this.jb):this.fa.get(a)};
m.bd=function(a){return this.fa.bd(a)};m.Oa=function(){of(this.ob,[this.fa.Oa(),this.Qc]);return this.ob};m.$a=function(a,b,c,d){b=this.fa.$a(a,b,c,d);return null!=a?b:b.concat(uc(this.jb))};m.clear=function(){this.jb.clear();this.fa.clear()};m.Ma=function(a){return null===a?0!=this.jb.size:this.fa.Ma(a)};m.min=function(){return this.fa.min()};m.max=function(){return this.fa.max()};m.Ja=function(){return[new y(-2,uc(this.jb))].concat(this.fa.Ja())};m.qc=function(){return this.fa.qc()};
function Tf(a,b){for(var c=-1,d=0;d<b.length;++d)if(-2==b[d].id()){c=d;break}if(-1==c)throw new E(102);var d=b[c].s,e=b.slice(0);e.splice(c,1);var c=a(e),f=new Sf(c);d.forEach(function(a){f.jb.add(a)});return f}m.Ha=function(){return this.fa.Ha()};function Uf(a){this.w=a;this.nb=D();this.V=new Kf(1)}m=Uf.prototype;m.getName=g("w");m.add=function(a){if("number"!=typeof a)throw new E(103);this.nb.add(a)};m.set=function(a,b){this.add(a,b)};m.remove=function(a){this.nb.delete(a)};m.get=function(a){return this.Ma(a)?[a]:[]};m.min=function(){return this.Hc(this.V.min.bind(this.V))};m.max=function(){return this.Hc(this.V.max.bind(this.V))};
m.Hc=function(a){if(0==this.nb.size)return null;var b=uc(this.nb).reduce(function(b,d){return null===b||1==a(d,b)?d:b},null);return[b,[b]]};m.bd=function(){return this.nb.size};m.$a=function(a,b,c,d){var e=a||[sd()];a=uc(this.nb).filter(function(a){return e.some(function(b){return this.V.Rd(a,b)},this)},this);return mf(a,b,c,d)};m.clear=function(){this.nb.clear()};m.Ma=function(a){return this.nb.has(a)};m.Ja=function(){return[new y(0,uc(this.nb))]};m.qc=g("V");
function Vf(a,b){var c=new Uf(a);b[0].s.forEach(function(a){c.add(a,a)});return c}m.Ha=l(!0);m.Oa=function(){var a=new nf;a.oa=this.nb.size;return a};function Wf(a){this.g=a;this.Ka=a.i(ic);this.D=a.i(kc);this.U=a.i(jc)}Wf.prototype.Fa=function(a){var b=a.ra(),c=function(){if(0==b.length)return w();var a=b.shift();return(a.zb()?Xf(this,a):Yf(this,a)).then(c)}.bind(this);return c()};function Yf(a,b){var c=new id(a.g,D([b])),c=a.Ka.Cb(0,c),d=c.H(b.getName(),b.Lb.bind(b)).get([]).then(function(a){this.U.Vb(b.getName(),a);ag(this,b,a)}.bind(a));c.ia();return d}
function ag(a,b,c){var d=a.D.jc.get(b.getName())||[];c.forEach(function(a){d.forEach(function(b){var c=a.Eb(b.getName());b.add(c,a.id())})})}function Xf(a,b){var c=new id(a.g,D([b])),d=a.Ka.Cb(0,c),c=d.H(b.getName(),b.Lb).get([]).then(function(a){this.U.Vb(b.getName(),a)}.bind(a)),e=b.xa().map(function(a){return bg(this,a,d)},a).concat(cg(a,b,d));d.ia();return cb(e.concat(c))}
function bg(a,b,c){c=c.H(b.m(),pb,1);var d=Rf(b);return c.get([]).then(function(a){if(1<a.length){if(dg(b)){var c=xf.bind(void 0,d,b.m(),b.Fc);a=Tf(c,a.slice(1))}else a=xf(d,b.m(),b.Fc,a.slice(1));this.D.set(b.Rc,a)}}.bind(a))}function cg(a,b,c){return c.H(Qe(b),pb,1).get([]).then(function(a){1<a.length&&(a=Vf(Qe(b),a.slice(1)),this.D.set(b.getName(),a))}.bind(a))};function eg(){this.ba=A();this.jc=A()}eg.prototype.Fa=function(a){a.ra().forEach(function(a){var c=[];this.jc.set(a.getName(),c);var d=Qe(a);if(null===this.get(d)){var e=new Uf(d);c.push(e);this.ba.set(d,e)}a.xa().forEach(function(a){var b;b=Rf(a);b=new pf(a.m(),b,a.Fc);b=dg(a)?new Sf(b):b;c.push(b);this.ba.set(a.m(),b)},this)},this);return w()};eg.prototype.get=function(a){return this.ba.get(a)||null};
eg.prototype.set=function(a,b){var c=this.jc.get(a)||null;null===c&&(c=[],this.jc.set(a,c));for(var d=null,e=0;e<c.length;e++)if(c[e].getName()==b.getName()){d=e;break}null!==d&&0<c.length?c.splice(d,1,b):c.push(b);this.ba.set(b.getName(),b)};function fg(a){this.ic=[];q(a)&&this.add(a)}fg.prototype.toString=function(){return this.ic.map(function(a){return a.toString()}).join(",")};fg.prototype.Ma=function(a){return this.ic.some(function(b){return b.contains(a)})};fg.prototype.ya=g("ic");
fg.prototype.add=function(a){if(0!=a.length)if(a=this.ic.concat(a),1==a.length)this.ic=a;else{a.sort(ud);for(var b=[],c=a[0],d=1;d<a.length;++d)if(qd(c,a[d])){var e=a[d],f=sd();if(c.c!=F&&e.c!=F){var h=rd(c.c,e.c,!0);1!=h?(f.c=c.c,f.da=0!=h?c.da:c.da&&e.da):(f.c=e.c,f.da=e.da)}c.A!=F&&e.A!=F&&(h=rd(c.A,e.A,!1),-1!=h?(f.A=c.A,f.ma=0!=h?c.ma:c.ma&&e.ma):(f.A=e.A,f.ma=e.ma));c=f}else b.push(c),c=a[d];b.push(c);this.ic=b}};
function gg(a,b){var c=[];a.ya().map(function(a){return b.ya().map(function(b){var c;if(qd(a,b)){c=sd();var h=rd(a.c,b.c,!0),h=0==h?a.da?a:b:-1!=h?a:b;c.c=h.c;c.da=h.da;a.A==F||b.A==F?b=a.A==F?b:a:(h=rd(a.A,b.A,!1),b=0==h?a.ma?a:b:-1==h?a:b);c.A=b.A;c.ma=b.ma}else c=null;return c})}).forEach(function(a){c=c.concat(a)});return new fg(c.filter(function(a){return null!==a}))};function hg(a,b){var c=[],d=null,e=null;Wd(a,function(a){var h=b(a);null==a.getParent()?e=h:Td(d,h);var k=a.getParent();null!==k&&L(k).length==L(d).length&&(k=c.indexOf(d),-1!=k&&c.splice(k,1));1<L(a).length&&c.push(h);d=null===a.h?c[c.length-1]:h});return e}function ig(a){return jg(a,function(a){return null===a.h})}
function kg(a){var b=a.getParent(),c=0;null!==b&&(c=L(b).indexOf(a),b.removeChild(a));var d=L(a).slice();d.forEach(function(d,f){a.removeChild(d);null===b||Sd(b,d,c+f)});return{parent:b,children:d}}function lg(a,b){L(a).slice().forEach(function(c){a.removeChild(c);Td(b,c)});Td(a,b)}function mg(a){var b=Rd(a,0);kg(a);lg(b,a);return b}
function ng(a,b,c){var d=Rd(a,0),e=L(d).slice();if(!e.some(function(a){return b(a)}))return a;kg(a);e.forEach(function(e,h){if(b(e)){var k=c(a);Ud(d,h);Td(k,e);Sd(d,k,h)}});return d}function og(a,b,c,d){var e=a.getParent();null!==e&&(a=L(e).indexOf(a),Ud(e,a),Sd(e,c,a));L(b).slice().forEach(function(a){b.removeChild(a);Td(d,a)});return c}function jg(a,b,c){function d(a){b(a)&&e.push(a);null!=c&&c(a)||L(a).forEach(d)}var e=[];d(a);return e}
function pg(a,b){var c=b||function(a){return a.toString()+"\n"},d="";Wd(a,function(a){for(var b=0;b<Qd(a);b++)d+="-";d+=c(a)});return d};function qg(a){Xd.call(this);this.Rb=a;this.ab=!1}t(qg,Xd);m=qg.prototype;m.Jb=function(){return hg(this,function(a){if(a instanceof qg){var b=new qg(a.Rb);b.ab=a.ab;a=a.W();b.pa=a;return b}return a.Jb()})};m.gb=function(a){var b=a||[];Wd(this,function(a){a!=this&&a.gb(b)}.bind(this));a=D(b);return uc(a)};m.vd=function(a){this.ab!=a&&(this.ab=a,this.Rb="and"==this.Rb?"or":"and",L(this).forEach(function(b){return b.vd(a)}))};
m.eval=function(a){var b=L(this).map(function(b){return b.eval(a)});return rg(this,b)};function rg(a,b){return"and"==a.Rb?Ad(b):Bd(b)}m.toString=function(){return"combined_pred_"+this.Rb.toString()};function sg(a,b,c){Xd.call(this);this.ga=a;this.la=b;this.G=c;this.Zd=null;a=Id.Ac();this.uc=Od(a,this.ga.I(),this.G);this.bg=a.Re.get(this.ga.I())||null}t(sg,Xd);m=sg.prototype;m.Jb=function(){var a=new sg(this.ga,this.la,this.G),b=this.W();a.pa=b;return a};m.gb=function(a){return null!=a?(a.push(this.ga),a.push(this.la),a):[this.ga,this.la]};
m.reverse=function(){var a=this.G;switch(this.G){case "gt":a="lt";break;case "lt":a="gt";break;case "gte":a="lte";break;case "lte":a="gte"}return new sg(this.la,this.ga,a)};m.eval=function(a){var b=a.entries.filter(function(a){var b=I(a,this.ga);a=I(a,this.la);return this.uc(b,a)},this);return new G(b,H(a))};m.toString=function(){return"join_pred("+this.ga.m()+" "+this.G+" "+this.la.m()+")"};
function tg(a,b,c){var d=null,e=null;-1!=H(b).indexOf(J(a.ga.H()))?(d=b,e=c):(d=c,e=b);if(d.entries.length>e.entries.length){a:{b=a.ga;a.ga=a.la;a.la=b;b=a.G;switch(a.G){case "gt":b="lt";break;case "lt":b="gt";break;case "gte":b="lte";break;case "lte":b="gte";break;default:break a}a.G=b;a.uc=Od(Id.Ac(),a.ga.I(),a.G)}return[e,d]}return[d,e]}function ug(a){var b={};a.gb().forEach(function(a){b[a.getName()]=null});return b}
function vg(a,b,c){null===a.Zd&&(a.Zd=ug(a.la.H()));var d=new Dd(new y(-1,a.Zd),!1);return Gd(b,c,d,[J(a.la.H())])}
function wg(a,b,c,d){var e=[b,c];d||(e=tg(a,b,c));b=e[0];c=e[1];var e=b,f=c,h=a.ga,k=a.la;d&&(e=c,f=b,h=a.la,k=a.ga);var n=new Sc,B=[];e.entries.forEach(function(a){var b=String(I(a,h));n.set(b,a)});var T=H(e),Y=H(f);f.entries.forEach(function(a){var b=I(a,k),c=String(b);null!==b&&n.has(c)?n.get(c).forEach(function(b){b=Gd(a,Y,b,T);B.push(b)}):d&&B.push(vg(this,a,Y))}.bind(a));a=H(b).concat(H(c));return new G(B,a)}
function xg(a,b,c,d,e){function f(a,b){var c=new Dd(b,1<T.length),c=Gd(a,Y,c,T);B.push(c)}var h=d.Vf.H(),k=b,n=c;-1!=H(b).indexOf(J(h))&&(k=c,n=b);var B=[],T=H(n),Y=H(k);k.entries.forEach(function(a){var b=this.bg(I(a,d.jg)),b=d.index.get(b);0!=b.length&&(d.index.Ha()?f(a,e.get(b[0])):gf(e,b).forEach(f.bind(null,a)))},a);a=H(k).concat(H(n));return new G(B,a)};function yg(a,b,c){return null===b?new Zd(a,b,c):q(b.m)?new sg(a,b,c):new Zd(a,b,c)};var zg={};r("lf.schema.DataStoreType",zg);zg.INDEXED_DB=0;zg.MEMORY=1;zg.LOCAL_STORAGE=2;zg.FIREBASE=3;zg.WEB_SQL=4;zg.OBSERVABLE_STORE=5;function Ag(a,b,c,d){this.Rc=a;this.name=b;this.Fc=c;this.f=d}Ag.prototype.m=function(){return this.Rc+"."+this.name};function dg(a){return a.f.some(function(a){return a.ca.Ec()})}function Q(a,b,c,d){this.w=a;this.ka=c;this.K=b;this.qd=d;this.eb=null}r("lf.schema.Table",Q);Q.prototype.getName=g("w");Q.prototype.getName=Q.prototype.getName;Q.prototype.Za=g("eb");
function J(a){return a.eb||a.w}Q.prototype.oc=function(a){var b=new this.constructor(this.w);b.eb=a;b.ug=this.ug;return b};Q.prototype.as=Q.prototype.oc;Q.prototype.createRow=Q.prototype.tb;Q.prototype.deserializeRow=Q.prototype.Lb;Q.prototype.xa=g("ka");Q.prototype.getIndices=Q.prototype.xa;Q.prototype.gb=g("K");Q.prototype.getColumns=Q.prototype.gb;Q.prototype.getConstraint=Q.prototype.Db;Q.prototype.zb=g("qd");Q.prototype.persistentIndex=Q.prototype.zb;function Qe(a){return a.w+".#"};function R(a,b){this.child=a;this.Ib=b;this.eb=null}m=R.prototype;m.getName=function(){return this.Ib+"("+this.child.getName()+")"};m.m=function(){return this.Ib+"("+this.child.m()+")"};m.H=function(){return this.child.H()};m.toString=function(){return this.m()};m.I=function(){return this.child.I()};m.Za=g("eb");m.xa=function(){return[]};m.wa=l(null);m.Ec=l(!1);m.oc=function(a){this.eb=a;return this};R.prototype.as=R.prototype.oc;
function Bg(a){for(var b=[a];a instanceof R;)b.push(a.child),a=a.child;return b}function Cg(a){this.eb=a||null;this.S=new Q("#UnknownTable",[],[],!1)}m=Cg.prototype;m.getName=l("*");m.m=function(){return this.getName()};m.toString=function(){return this.m()};m.H=g("S");m.I=l(4);m.Za=g("eb");m.xa=function(){return[]};m.wa=l(null);m.Ec=l(!1);r("lf.fn.avg",function(a){return new R(a,"AVG")});function Dg(a){return new R(a||new Cg,"COUNT")}r("lf.fn.count",Dg);function Eg(a){return new R(a,"DISTINCT")}r("lf.fn.distinct",Eg);r("lf.fn.max",function(a){return new R(a,"MAX")});r("lf.fn.min",function(a){return new R(a,"MIN")});r("lf.fn.stddev",function(a){return new R(a,"STDDEV")});r("lf.fn.sum",function(a){return new R(a,"SUM")});r("lf.fn.geomean",function(a){return new R(a,"GEOMEAN")});function S(a,b){K.call(this);this.Nf=b}t(S,K);S.prototype.exec=function(a,b){switch(this.Nf){case 1:return Fg(this,a,b);case 0:return Gg(this,a,b);default:return Hg(this,a,b)}};S.prototype.toString=l("dummy_node");S.prototype.Sc=function(){return this.toString()};function Hg(a,b,c){return new v(function(a){a(this.ea(b,[],c))}.bind(a))}function Fg(a,b,c){return Rd(a,0).exec(b,c).then(function(a){return this.ea(b,a,c)}.bind(a))}
function Gg(a,b,c){var d=L(a).map(function(a){return a.exec(b,c)});return cb(d).then(function(a){var d=[];a.forEach(function(a){for(var b=0;b<a.length;++b)d.push(a[b])});return this.ea(b,d,c)}.bind(a))};function Ig(a){S.call(this,0,1);this.xe=a}t(Ig,S);Ig.prototype.toString=function(){return"aggregation("+this.xe.map(function(a){return a.m()}).toString()+")"};Ig.prototype.ea=function(a,b){b.forEach(function(a){Jg(new Kg(a,this.xe))},this);return b};function Kg(a,b){this.Ia=a;this.K=b}
function Jg(a){a.K.forEach(function(a){a=Bg(a).reverse();for(var c=1;c<a.length;c++){var d=a[c],e=Bg(d).slice(-1)[0],f=d.child instanceof R?xd(this.Ia,d.child):this.Ia;if(null!==f.Ya&&f.Ya.has(d.m()))break;f=Lg(d.Ib,f,e);e=this.Ia;null===e.Ya&&(e.Ya=A());e.Ya.set(d.m(),f)}},a)}
function Lg(a,b,c){var d=null;switch(a){case "MIN":d=Mg(b,c,function(a,b){return b<a?b:a});break;case "MAX":d=Mg(b,c,function(a,b){return b>a?b:a});break;case "DISTINCT":d=Ng(b,c);break;case "COUNT":d=Og(b,c);break;case "SUM":d=Pg(b,c);break;case "AVG":a=Og(b,c);0<a&&(d=Pg(b,c)/a);break;case "GEOMEAN":d=Qg(b,c);break;default:d=Rg(b,c)}return d}function Mg(a,b,c){return a.entries.reduce(function(a,e){var f=I(e,b);return null===f?a:null===a?f:c(a,f)},null)}
function Og(a,b){return b instanceof Cg?a.entries.length:a.entries.reduce(function(a,d){return a+(ea(I(d,b))?0:1)},0)}function Pg(a,b){return Mg(a,b,function(a,b){return b+a})}function Rg(a,b){var c=[];a.entries.forEach(function(a){a=I(a,b);null===a||c.push(a)});return 0==c.length?null:yb.apply(null,c)}function Qg(a,b){var c=0,d=a.entries.reduce(function(a,d){var h=I(d,b);if(0==h||null===h)return a;c++;return a+Math.log(h)},0);return 0==c?null:Math.pow(Math.E,d/c)}
function Ng(a,b){var c=A();a.entries.forEach(function(a){var e=I(a,b);c.set(e,a)});return new G(C(c),H(a))};function Sg(a,b){this.Ca=a;this.aa=b}Sg.prototype.hb=g("Ca");Sg.prototype.$=g("aa");function Tg(){K.call(this)}t(Tg,K);function Ug(a,b){K.call(this);this.table=a;this.values=b}t(Ug,Tg);function Vg(a,b){Ug.call(this,a,b)}t(Vg,Ug);function Wg(a){K.call(this);this.table=a}t(Wg,Tg);Wg.prototype.toString=function(){return"delete("+this.table.getName()+")"};function Xg(a,b){K.call(this);this.table=a;this.se=b}t(Xg,Tg);
Xg.prototype.toString=function(){var a=[];this.se&&(a=this.se.map(function(a){return a.O.getName()},this));return"update("+this.table.getName()+", ["+a.join(",")+"])"};function Yg(a){K.call(this);this.J=a}t(Yg,Tg);Yg.prototype.toString=function(){return"select("+this.J.toString()+")"};function Zg(a){K.call(this);this.table=a}t(Zg,Tg);Zg.prototype.toString=function(){var a="table_access("+this.table.getName();null===this.table.Za()||(a+=" as "+this.table.Za());return a+")"};
function $g(){K.call(this)}t($g,Tg);$g.prototype.toString=l("cross_product");function ah(a,b){K.call(this);this.f=a;this.Nb=b}t(ah,Tg);ah.prototype.toString=function(){var a="project("+this.f.toString();if(null!==this.Nb)var b=this.Nb.map(function(a){return a.m()}).join(", "),a=a+(", groupBy("+b+")");return a+")"};function bh(a){K.call(this);this.M=a}t(bh,Tg);bh.prototype.toString=function(){return"order_by("+he(this.M)+")"};function ch(a){K.call(this);this.f=a}t(ch,Tg);
ch.prototype.toString=function(){return"aggregation("+this.f.toString()+")"};function dh(a){K.call(this);this.f=a}t(dh,Tg);dh.prototype.toString=function(){return"group_by("+this.f.toString()+")"};function eh(a){K.call(this);this.X=a}t(eh,Tg);eh.prototype.toString=function(){return"limit("+this.X+")"};function fh(a){K.call(this);this.N=a}t(fh,Tg);fh.prototype.toString=function(){return"skip("+this.N+")"};function gh(a,b){K.call(this);this.J=a;this.Pb=b}t(gh,Tg);
gh.prototype.toString=function(){return"join(type: "+(this.Pb?"outer":"inner")+", "+this.J.toString()+")"};function hh(){};function ih(){}t(ih,hh);ih.prototype.mb=function(a){this.Z=a;this.Wa(this.Z);return this.Z};ih.prototype.Wa=function(a){if(a instanceof Yg){var b=jh(this,a.J),b=kh(this,b);og(a,a,b[0],b[1]);a==this.Z&&(this.Z=b[0]);a=b[0]}L(a).forEach(function(a){this.Wa(a)},this)};function jh(a,b){if(0==L(b).length||"and"!=b.Rb)return[b];var c=L(b).slice().map(function(a){b.removeChild(a);return jh(this,a)},a);return Ca(c)}
function kh(a,b){var c=null,d=null;b.map(function(a,b){var h=new Yg(a);0==b?c=h:Td(d,h);d=h},a);return[c,d]};function lh(){}t(lh,hh);lh.prototype.mb=function(a,b){if(3>b.c.length)return a;this.Z=a;this.Wa(this.Z);return this.Z};lh.prototype.Wa=function(a){if(a instanceof $g)for(;2<L(a).length;){for(var b=new $g,c=0;2>c;c++){var d=Ud(a,0);Td(b,d)}Sd(a,b,0)}L(a).forEach(function(a){this.Wa(a)},this)};function mh(){S.call(this,0,0)}t(mh,S);mh.prototype.toString=l("cross_product");mh.prototype.ea=function(a,b){for(var c=b[0],d=b[1],e=[],f=H(c),h=H(d),k=0;k<c.entries.length;k++)for(var n=0;n<d.entries.length;n++){var B=Gd(c.entries[k],f,d.entries[n],h);e.push(B)}c=H(c).concat(H(d));return[new G(e,c)]};function nh(a,b){ke.call(this,a,b);this.Da=a.i(mc);this.Fb=a.i(nc)}t(nh,ke);nh.prototype.getPriority=l(2);nh.prototype.be=function(a){0==this.I()?oh(this,a):this.Pc()};function oh(a,b){a.sd.forEach(function(a,d){a instanceof ge&&ne(this.Fb,a,b[d])},a)}nh.prototype.Pc=function(){var a=pe(this.Fb,this.$());0!=a.length&&(a=new me(this.global,a),qe(this.Da,a))};function ph(a){be.call(this,a)}t(ph,be);ph.prototype.$=function(){var a=D();a.add(this.c);qh(this,this.c.getName(),a);return a};function qh(a,b,c){var d=rh(a.ca.info(),b,1);rh(a.ca.info(),b).forEach(c.add.bind(c));d.forEach(function(a){qh(this,a.getName(),c)},a)}ph.prototype.clone=function(){var a=new ph(this.ca);ee(a,this);a.c=this.c;return a};ph.prototype.bind=function(a){ph.Hb.bind.call(this,a);fe(this,a);return this};function sh(a){be.call(this,a)}t(sh,be);sh.prototype.$=function(){var a=D();a.add(this.Ga);var b=this.ca.info();th(this.Ga.getName(),b.Ze).forEach(a.add.bind(a));this.$b&&rh(b,this.Ga.getName()).forEach(a.add.bind(a));return a};sh.prototype.clone=function(){var a=new sh(this.ca);ee(a,this);a.Ga=this.Ga;this.values&&(a.values=this.values instanceof Hd?this.values:this.values.slice());a.$b=this.$b;a.ac=this.ac;return a};
sh.prototype.bind=function(a){sh.Hb.bind.call(this,a);this.ac&&(this.values=this.ac instanceof Hd?a[this.ac.wa()]:this.ac.map(function(b){return b instanceof Hd?a[b.wa()]:b}));return this};function uh(a){be.call(this,a)}t(uh,be);uh.prototype.$=function(){var a=D();a.add(this.table);var b=this.set.map(function(a){return a.O.m()}),c=this.ca.info();vh(c,b).forEach(a.add.bind(a));wh(c,b).forEach(a.add.bind(a));return a};uh.prototype.clone=function(){var a=new uh(this.ca);ee(a,this);a.table=this.table;a.set=this.set?this.set.slice():this.set;return a};uh.prototype.bind=function(a){uh.Hb.bind.call(this,a);this.set.forEach(function(b){-1!=b.Xc&&(b.value=a[b.Xc])});fe(this,a);return this};function xh(a,b){if(null==b)return"NULL";switch(a){case 1:return b?1:0;case 3:case 4:return b;case 0:return"'"+rb(b)+"'";default:return"'"+b.toString()+"'"}}function yh(a,b){var c=a.$b?"INSERT OR REPLACE":"INSERT",d=a.Ga.gb(),c=c+(" INTO "+a.Ga.getName()+"("),c=c+d.map(function(a){return a.getName()}).join(", "),c=c+") VALUES (";return a.values.map(function(a){var f=d.map(function(c){var d=a.s[c.getName()];return b?null!=d?"#":"NULL":xh(c.I(),d)});return c+f.join(", ")+");"}).join("\n")}
function zh(a){switch(a){case "between":return"BETWEEN";case "eq":return"=";case "gte":return">=";case "gt":return">";case "in":return"IN";case "lte":return"<=";case "lt":return"<";case "match":return"LIKE";case "neq":return"<>";default:return"UNKNOWN"}}function Ah(a,b,c,d){return a instanceof Hd?"?"+a.wa().toString():d?null!=a?"#":"NULL":"match"==b?"'"+a.toString()+"'":"in"==b?"("+a.map(function(a){return xh(c,a)}).join(", ")+")":"between"==b?xh(c,a[0])+" AND "+xh(c,a[1]):xh(c,a).toString()}
function Bh(a,b){return L(a).map(function(a){return"("+Ch(a,b)+")"}).join("and"==a.Rb?" AND ":" OR ")}function Dh(a){return[a.ga.m(),zh(a.G),a.la.m()].join(" ")}function Ch(a,b){if(a instanceof Zd){var c=a.O.m(),d=zh(a.G),e=Ah(a.value,a.G,a.O.I(),b);return"="==d&&"NULL"==e?[c,"IS NULL"].join(" "):"<>"==d&&"NULL"==e?[c,"IS NOT NULL"].join(" "):[c,d,e].join(" ")}if(a instanceof qg)return Bh(a,b);if(a instanceof sg)return Dh(a);throw new E(357,typeof a);}
function Eh(a,b){var c=Ch(a,b);return c?" WHERE "+c:""}function Fh(a,b){var c="UPDATE "+a.table.getName()+" SET ",c=c+a.set.map(function(a){var b=a.O.m()+" = ";return-1!=a.Xc?b+"?"+a.Xc.toString():b+xh(a.O.I(),a.value).toString()}).join(", ");a.u&&(c+=Eh(a.u,b));return c+";"}
function Gh(a,b){var c="*";a.f.length&&(c=a.f.map(function(a){return a.Za()?a.m()+" AS "+a.Za():a.m()}).join(", "));c="SELECT "+c+" FROM ";null!=a.yb&&0!=a.yb.size?c+=Hh(a,b):(c+=a.c.map(Ih).join(", "),a.u&&(c+=Eh(a.u,b)));if(a.M)var d=a.M.map(function(a){return a.O.m()+(0==a.kb?" DESC":" ASC")}).join(", "),c=c+(" ORDER BY "+d);a.ja&&(d=a.ja.map(function(a){return a.m()}).join(", "),c+=" GROUP BY "+d);a.X&&(c+=" LIMIT "+a.X.toString());a.N&&(c+=" SKIP "+a.N.toString());return c+";"}
function Ih(a){return J(a)!=a.getName()?a.getName()+" AS "+J(a):a.getName()}function Hh(a,b){for(var c=jg(a.u,function(a){return a instanceof sg}),d=c.map(Dh),e=Ih(a.c[0]),f=1;f<a.c.length;f++)var h=Ih(a.c[f]),e=a.yb.has(c[d.length-f].W())?e+(" LEFT OUTER JOIN "+h):e+(" INNER JOIN "+h),e=e+(" ON ("+d[d.length-f]+")");c=Rd(a.u,0);c instanceof sg||(e+=" WHERE "+Ch(c,b));return e}
function Jh(a,b){var c=b||!1,d=a.a.clone();if(d instanceof sh)return yh(d,c);if(d instanceof ph){var e="DELETE FROM "+d.c.getName();d.u&&(e+=Eh(d.u,c));return e+";"}if(d instanceof uh)return Fh(d,c);if(d instanceof ge)return Gh(d,c);throw new E(358,typeof d);};function U(a,b){this.global=a;this.tg=a.i(lc);this.Da=a.i(mc);this.a=b}r("lf.query.BaseBuilder",U);U.prototype.exec=function(){try{this.fb()}catch(a){return Za(a)}return new v(function(a,b){var c=new nh(this.global,[this.Cc()]);qe(this.Da,c).then(function(b){a(vd(b[0]))},b)},this)};U.prototype.exec=U.prototype.exec;U.prototype.Pf=function(){var a=function(a){return a.Sc(this.a)+"\n"}.bind(this);return pg(Kh(this).hb(),a)};U.prototype.explain=U.prototype.Pf;
U.prototype.bind=function(a){this.a.bind(a);return this};U.prototype.bind=U.prototype.bind;U.prototype.Ag=function(a){return Jh(this,a)};U.prototype.toSql=U.prototype.Ag;U.prototype.fb=aa();function Kh(a){if(null==a.$e){var b;b=a.tg;var c=a.a,d=b.eg.create(c);b=b.qg.create(d,c);a.$e=b}return a.$e}U.prototype.Cc=function(){return{context:this.a.clone(),ee:Kh(this)}};function Lh(a){U.call(this,a,new ph(a.i(oc)))}t(Lh,U);r("lf.query.DeleteBuilder",Lh);Lh.prototype.c=function(a){if(null!=this.a.c)throw new E(515);this.a.c=a;return this};Lh.prototype.from=Lh.prototype.c;Lh.prototype.u=function(a){this.Cd();this.a.u=a;return this};Lh.prototype.where=Lh.prototype.u;Lh.prototype.Cd=function(){if(null==this.a.c)throw new E(548);if(null!=this.a.u)throw new E(516);};Lh.prototype.fb=function(){Lh.Hb.fb.call(this);if(null==this.a.c)throw new E(517);};function Mh(a,b){U.call(this,a,new sh(a.i(oc)));this.a.$b=b||!1}t(Mh,U);r("lf.query.InsertBuilder",Mh);Mh.prototype.fb=function(){Mh.Hb.fb.call(this);var a=this.a;if(null==a.Ga||null==a.values)throw new E(518);if(a.$b&&null===a.Ga.Db().fd())throw new E(519);};Mh.prototype.Ga=function(a){if(null!=this.a.Ga)throw new E(520);this.a.Ga=a;return this};Mh.prototype.into=Mh.prototype.Ga;
Mh.prototype.values=function(a){if(null!=this.a.values)throw new E(521);a instanceof Hd||a.some(function(a){return a instanceof Hd})?this.a.ac=a:this.a.values=a;return this};Mh.prototype.values=Mh.prototype.values;function Nh(a){return Oh("and",Array.prototype.slice.call(arguments))}r("lf.op.and",Nh);r("lf.op.or",function(a){return Oh("or",Array.prototype.slice.call(arguments))});function Oh(a,b){var c=new qg(a);b.forEach(function(a){Td(c,a)});return c}r("lf.op.not",function(a){a.vd(!0);return a});function V(a,b){U.call(this,a,new ge(a.i(oc)));this.He=this.xd=!1;this.a.f=b;Ph(this);Qh(this)}t(V,U);r("lf.query.SelectBuilder",V);V.prototype.fb=function(){V.Hb.fb.call(this);var a=this.a;if(null==a.c)throw new E(522);if(q(a.Qb)&&!q(a.X)||q(a.Yb)&&!q(a.N))throw new E(523);null!=this.a.ja?Rh(this):Sh(this)};function Ph(a){var b=a.a.f.filter(function(a){return a instanceof R&&"DISTINCT"==a.Ib},a);if(0!=b.length&&(1!=b.length||1!=a.a.f.length))throw new E(524);}
function Rh(a){var b=a.a.f.filter(function(a){return!(a instanceof R)}).map(function(a){return a.m()}),c=!1;if(0==a.a.ja.length||0==a.a.f.length)c=!0;else{var d=a.a.ja.map(function(a){return a.m()});(c=b.some(function(a){return-1==d.indexOf(a)}))||(c=a.a.ja.some(function(a){a=a.I();return 6==a||0==a}))}if(c)throw new E(525);}function Sh(a){var b=a.a.f.some(function(a){return a instanceof R},a);a=a.a.f.some(function(a){return!(a instanceof R)},a)||0==a.a.f.length;if(b&&a)throw new E(526);}
function Qh(a){a.a.f.forEach(function(a){if(a instanceof R&&!Th(a.Ib,a.I()))throw new E(527,a.m());},a)}function Uh(a,b){if(null==a.a.c)throw new E(b);}V.prototype.c=function(a){if(this.He)throw new E(515);this.He=!0;null==this.a.c&&(this.a.c=[]);this.a.c.push.apply(this.a.c,Array.prototype.slice.call(arguments));return this};V.prototype.from=V.prototype.c;V.prototype.u=function(a){Uh(this,548);if(this.xd)throw new E(516);this.xd=!0;Vh(this,a);return this};V.prototype.where=V.prototype.u;
function Vh(a,b){if(null!=a.a.u){var c=Nh(b,a.a.u);a.a.u=c}else a.a.u=b}V.prototype.Yf=function(a,b){Uh(this,542);if(this.xd)throw new E(547);this.a.c.push(a);Vh(this,b);return this};V.prototype.innerJoin=V.prototype.Yf;V.prototype.cg=function(a,b){Uh(this,542);if(!(b instanceof sg))throw new E(541);if(this.xd)throw new E(547);this.a.c.push(a);null==this.a.yb&&(this.a.yb=D());var c=b;J(a)!=J(b.la.H())&&(c=b.reverse());this.a.yb.add(c.W());Vh(this,c);return this};V.prototype.leftOuterJoin=V.prototype.cg;
V.prototype.X=function(a){if(null!=(this.a.X||this.a.Qb))throw new E(528);if(a instanceof Hd)this.a.Qb=a;else{if(0>a)throw new E(531);this.a.X=a}return this};V.prototype.limit=V.prototype.X;V.prototype.N=function(a){if(null!=(this.a.N||this.a.Yb))throw new E(529);if(a instanceof Hd)this.a.Yb=a;else{if(0>a)throw new E(531);this.a.N=a}return this};V.prototype.skip=V.prototype.N;V.prototype.M=function(a,b){Uh(this,549);null==this.a.M&&(this.a.M=[]);this.a.M.push({O:a,kb:null!=b?b:1});return this};
V.prototype.orderBy=V.prototype.M;V.prototype.ja=function(a){Uh(this,549);if(null!=this.a.ja)throw new E(530);null==this.a.ja&&(this.a.ja=[]);this.a.ja.push.apply(this.a.ja,Array.prototype.slice.call(arguments));return this};V.prototype.groupBy=V.prototype.ja;function Th(a,b){switch(a){case "COUNT":case "DISTINCT":return!0;case "AVG":case "GEOMEAN":case "STDDEV":case "SUM":return 4==b||3==b;case "MAX":case "MIN":return 4==b||3==b||5==b||2==b}return!1}
V.prototype.clone=function(){var a=new V(this.global,this.a.f);a.a=this.a.clone();a.a.ad=null;return a};V.prototype.clone=V.prototype.clone;function Wh(a,b){U.call(this,a,new uh(a.i(oc)));this.a.table=b}t(Wh,U);r("lf.query.UpdateBuilder",Wh);Wh.prototype.set=function(a,b){var c={Xc:b instanceof Hd?b.wa():-1,O:a,value:b};null!=this.a.set?this.a.set.push(c):this.a.set=[c];return this};Wh.prototype.set=Wh.prototype.set;Wh.prototype.u=function(a){this.Cd();this.a.u=a;return this};Wh.prototype.where=Wh.prototype.u;Wh.prototype.Cd=function(){if(null!=this.a.u)throw new E(516);};
Wh.prototype.fb=function(){Wh.Hb.fb.call(this);if(null==this.a.set)throw new E(532);if(this.a.set.some(function(a){return a.value instanceof Hd}))throw new E(501);};function Xh(a){this.a=a;this.Ca=null}Xh.prototype.gc=function(){null===this.Ca&&(this.Ca=this.dd());return this.Ca};function Yh(a){Xh.call(this,a)}t(Yh,Xh);Yh.prototype.dd=function(){return this.a.$b?new Vg(this.a.Ga,this.a.values):new Ug(this.a.Ga,this.a.values)};function Zh(a){Xh.call(this,a)}t(Zh,Xh);Zh.prototype.dd=function(){var a=new Xg(this.a.table,this.a.set),b=null!=this.a.u?new Yg(this.a.u.Jb()):null,c=new Zg(this.a.table);null===b?Td(a,c):(Td(b,c),Td(a,b));return a};function $h(a,b,c){this.Ca=a;this.fe=b;this.Ub=c}$h.prototype.gc=function(){this.Ub.forEach(function(a){this.Ca=a.mb(this.Ca,this.fe)},this);return this.Ca};function ai(a,b){Xh.call(this,a);this.Ub=b}t(ai,Xh);ai.prototype.dd=function(){var a=new Wg(this.a.c),b=null!=this.a.u?new Yg(this.a.u.Jb()):null,c=new Zg(this.a.c);null===b?Td(a,c):(Td(b,c),Td(a,b));return(new $h(a,this.a,this.Ub)).gc()};function bi(){}t(bi,hh);bi.prototype.mb=function(a,b){if(2>b.c.length)return a;this.Z=a;this.Wa(this.Z,b);return this.Z};bi.prototype.Wa=function(a,b){if(a instanceof Yg&&a.J instanceof sg){var c=a.J.W(),d=Rd(a,0);d instanceof $g&&(c=null!=b.yb&&b.yb.has(c),c=new gh(a.J,c),og(a,d,c,c),a==this.Z&&(this.Z=c),a=c)}L(a).forEach(function(a){this.Wa(a,b)},this)};function ci(){this.Wc=D()}t(ci,hh);ci.prototype.mb=function(a,b){this.Wc.clear();if(!q(b.u))return a;this.Z=a;this.Wa(this.Z);this.Wc.clear();return this.Z};ci.prototype.Wa=function(a){if(di(a)){var b=a.J instanceof Zd?ei(this,a):fi(this,a);this.Wc.add(a);b==a&&(b=Rd(a,0));null!==b&&(ea(b.getParent())&&(this.Z=b),di(b)&&!this.Wc.has(b)&&this.Wa(b))}else L(a).forEach(function(a){this.Wa(a)},this)};
function gi(a,b,c){var d=b;if(Rd(b,0)instanceof Yg)d=mg(b),gi(a,b,c);else if(hi(b)){var e=[],d=ng(b,c,function(a){a=new Yg(a.J);e.push(a);return a});e.forEach(function(a){gi(this,a,c)},a)}return d}function ei(a,b){var c=D([J(b.J.O.H())]),d=function(a){return ii(this,a,c)}.bind(a);return gi(a,b,d)}function fi(a,b){var c=D([J(b.J.ga.H()),J(b.J.la.H())]),d=function(a){return ii(this,a,c)}.bind(a);return gi(a,b,d)}
function ii(a,b,c){var d=D();ig(b).forEach(function(a){d.add(J(a.table))},a);b instanceof Zg&&d.add(J(b.table));return vc(d,c)}function di(a){return a instanceof Yg&&!(a.J instanceof qg)}function hi(a){a=Rd(a,0);return a instanceof $g||a instanceof gh};function ji(a,b){Xh.call(this,a);this.Ub=b;this.df=this.Ve=this.mf=this.Ye=this.ye=this.Ke=this.lf=this.Ee=this.of=null}t(ji,Xh);
ji.prototype.dd=function(){ki(this);2<=this.a.c.length&&(this.Ee=new $g);this.lf=null!=this.a.u?new Yg(this.a.u.Jb()):null;this.a.M&&(this.Ye=new bh(this.a.M));null!=this.a.N&&0<this.a.N&&(this.mf=new fh(this.a.N));null!=this.a.X&&(this.Ve=new eh(this.a.X));null!=this.a.ja&&(this.Ke=new dh(this.a.ja));li(this);this.df=new ah(this.a.f||[],this.a.ja||null);var a=mi(this);return(new $h(a,this.a,this.Ub)).gc()};
function mi(a){for(var b=[a.Ve,a.mf,a.df,a.Ye,a.ye,a.Ke,a.lf,a.Ee],c=null,d=null,e=0;e<b.length;e++){var f=b[e];null!==f&&(null===d?d=f:Td(b[c],f),c=e)}a.of.forEach(function(a){Td(b[c],a)});return d}function ki(a){a.of=a.a.c.map(function(a){return new Zg(a)},a)}function li(a){var b=a.a.f.filter(function(a){return a instanceof R});null!=a.a.M&&a.a.M.forEach(function(a){a.O instanceof R&&b.push(a.O)});0<b.length&&(a.ye=new ch(b))};function ni(){this.me=[new ih,new lh,new ci,new bi];this.Jd=[new ih]}ni.prototype.create=function(a){var b=null;if(a instanceof sh)b=new Yh(a);else if(a instanceof ph)b=new ai(a,this.Jd);else if(a instanceof ge)b=new ji(a,this.me);else if(a instanceof uh)b=new Zh(a);else throw new E(513);b=b.gc();return new Sg(b,a.$())};function oi(a){S.call(this,0,1);this.S=a}t(oi,S);oi.prototype.toString=function(){return"delete("+this.S.getName()+")"};oi.prototype.ea=function(a,b){var c=b[0].entries.map(function(a){return a.sa});a.remove(this.S,c);return[zd()]};function pi(a,b){S.call(this,0,-1);this.table=b;this.D=a.i(kc)}t(pi,S);pi.prototype.toString=function(){return"get_row_count("+this.table.getName()+")"};pi.prototype.ea=function(){var a=this.D.get(Qe(this.table)),b=new G([],[this.table.getName()]),c=Dg(),a=a.Oa().oa;null===b.Ya&&(b.Ya=A());b.Ya.set(c.m(),a);return[b]};function qi(a,b){S.call(this,0,-1);this.U=a.i(jc);this.D=a.i(kc);this.table=b}t(qi,S);qi.prototype.toString=function(){var a="table_access("+this.table.getName();null===this.table.Za()||(a+=" as "+this.table.Za());return a+")"};qi.prototype.ea=function(){var a=this.D.get(Qe(this.table)).$a();return[Cd(gf(this.U,a),[J(this.table)])]};function ri(a){this.g=a}t(ri,hh);ri.prototype.mb=function(a,b){this.Z=a;if(!this.Dd(b))return a;var c=jg(a,function(a){return a instanceof qi})[0],d=new pi(this.g,c.table);og(c,c,d,d);return this.Z};ri.prototype.Dd=function(a){return 1==a.f.length&&1==a.c.length&&null==a.u&&null==a.X&&null==a.N&&null==a.ja?(a=a.f[0],a instanceof R&&"COUNT"==a.Ib&&a.child instanceof Cg):!1};function si(a){S.call(this,0,1);this.Je=a}t(si,S);si.prototype.toString=function(){return"groupBy("+this.Je.map(function(a){return a.m()}).toString()+")"};si.prototype.ea=function(a,b){return ti(this,b[0])};function ti(a,b){var c=new Sc,d=function(a){return this.Je.map(function(b){return I(a,b)},this).join(",")}.bind(a);b.entries.forEach(function(a){c.set(d(a),a)},a);return c.keys().map(function(a){return new G(c.get(a),H(b))},a)};function ui(a,b,c){S.call(this,0,0);this.D=a.i(kc);this.U=a.i(jc);this.J=b;this.Pb=c;this.Ad="eq"==this.J.G?0:2;this.Le=null}t(ui,S);var vi=["hash","index_nested_loop","nested_loop"];ui.prototype.toString=function(){return"join(type: "+(this.Pb?"outer":"inner")+", impl: "+vi[this.Ad]+", "+this.J.toString()+")"};
ui.prototype.ea=function(a,b){switch(this.Ad){case 0:return[wg(this.J,b[0],b[1],this.Pb)];case 1:return[xg(this.J,b[0],b[1],this.Le,this.U)];default:var c=this.J,d=b[0],e=b[1],f=this.Pb,h=[d,e];f||(h=tg(c,d,e));for(var d=h[0],e=h[1],h=[],k=H(d),n=H(e),B=d.entries.length,T=e.entries.length,Y=T+256-1>>8,$a=0;$a<Y;){for(var Xb=0;Xb<B;Xb++){var Zf=!1,$f=I(d.entries[Xb],c.ga);if(null!==$f)for(var zi=Math.min($a+1<<8,T),Rc=$a<<8;Rc<zi;Rc++)if(c.uc($f,I(e.entries[Rc],c.la))){var Zf=!0,Aj=Gd(d.entries[Xb],
k,e.entries[Rc],n);h.push(Aj)}f&&!Zf&&h.push(vg(c,d.entries[Xb],k))}$a++}c=H(d).concat(H(e));return[new G(h,c)]}};function wi(a,b){a.Ad=1;var c=a.D.get(b.wa().m());a.Le={Vf:b,jg:b==a.J.ga?a.J.la:a.J.ga,index:c}};function xi(a){S.call(this,0,-1);this.ef=a}t(xi,S);xi.prototype.toString=function(){return"no_op_step("+H(this.ef[0]).join(",")+")"};xi.prototype.ea=g("ef");function yi(){}t(yi,hh);yi.prototype.mb=function(a,b){this.Z=a;if(!this.Dd(b))return a;jg(a,function(a){return a instanceof ui}).forEach(this.sg,this);return this.Z};yi.prototype.Dd=function(a){return 1<a.c.length};
yi.prototype.sg=function(a){if("eq"==a.J.G&&!a.Pb){var b=function(b){if(!(b instanceof qi))return null;b=J(b.table)==J(a.J.la.H())?a.J.la:a.J.ga;return ea(b.wa())?null:b},c=b(Rd(a,0)),b=b(Rd(a,1));if(null!==c||null!==b){b=null===b?c:b;wi(a,b);var d=new G([],[J(b.H())]);Vd(a,new xi([d]),b==c?0:1)}}};function Ai(a){a=a.map(function(a){return a.ya()});a=Db.apply(null,a);var b=[];Cb(a,function(a){b.push(a)});return b}function Bi(a){this.Ob=a}Bi.prototype.ed=function(){return 1==this.Ob.f.length?[sd()]:[this.Ob.f.map(function(){return sd()})]};function Ci(a,b){this.Ob=a;this.Ba=b;this.Hd=this.Te=null}
function Di(a,b){var c=A();a.Ba.keys().forEach(function(a){var e=this.Ba.get(a).map(function(a){return ce(b,a)},this),f=new fg([sd()]);e.forEach(function(a){var b=null;"between"==a.G?b=new nd(a.value[0],a.value[1],!1,!1):"eq"==a.G?(b=a.value,b=new nd(b,b,!1,!1)):b="gte"==a.G?new nd(a.value,F,!1,!1):"gt"==a.G?new nd(a.value,F,!0,!1):"lte"==a.G?new nd(F,a.value,!1,!1):new nd(F,a.value,!1,!0);a=a.ab?od(b):[b];a=new fg(a);f=gg(f,a)});c.set(a,f)},a);return c}
Ci.prototype.ed=function(a){if(this.Te==a)return this.Hd;for(var b=Di(this,a),c=this.Ob.f.length-1;0<=c;c--){var d=this.Ob.f[c];if(null!==(b.get(d.ca.getName())||null))break;b.set(d.ca.getName(),new fg([sd()]))}this.Hd=1==this.Ob.f.length?C(b)[0].ya():Ai(Ei(this,b));this.Te=a;return this.Hd};function Ei(a,b){var c=A(),d=0;a.Ob.f.forEach(function(a){c.set(a.ca.getName(),d);d++});return $b(b).sort(function(a,b){return c.get(a)-c.get(b)}).map(function(a){return b.get(a)})};function Fi(a,b){this.pf=b;this.D=a.i(kc)}function Gi(a,b,c){c=c.filter(a.Zf,a);if(0==c.length)return null;a=Hi(a,c);if(0==a.length)return null;if(1==a.length)return a[0];var d=Number.MAX_VALUE;return a.reduce(function(a,c){var h=Ii(c,b);return h<d?(d=h,c):a},null)}
function Hi(a,b){return a.pf.xa().map(function(a){a=new Ji(this.D,a);Ki(a,b);return a},a).filter(function(a){if(null===a.Ba)a=!1;else{for(var b=!1,e=!0,f=0;f<a.wb.f.length;f++){var h=a.Ba.has(a.wb.f[f].ca.getName());if(b&&h){e=!1;break}h||(b=!0)}a=e}return a})}Fi.prototype.Zf=function(a){var b;if(b=a instanceof Zd)$d(a),b=null!==a.value&&("between"==a.G||"eq"==a.G||"gt"==a.G||"gte"==a.G||"lt"==a.G||"lte"==a.G);return b?a.O.H()==this.pf:!1};
function Ji(a,b){this.D=a;this.wb=b;this.Wf=D(this.wb.f.map(function(a){return a.ca.getName()}));this.Vd=this.Ba=null}function Li(a){null===a.Vd&&(a.Vd=new Ci(a.wb,a.Ba));return a.Vd}function Ki(a,b){b.forEach(function(a){var b=a.gb()[0].getName();this.Wf.has(b)&&(null===this.Ba&&(this.Ba=new Sc),this.Ba.set(b,a.W()))},a)}function Ii(a,b){var c=Li(a).ed(b),d=a.D.get(a.wb.m());return c.reduce(function(a,b){return a+d.bd(b)},0)};function Mi(a,b,c,d){S.call(this,0,-1);this.D=a.i(kc);this.index=b;this.Se=c;this.je=d;this.Vc=this.Uc=!1}t(Mi,S);Mi.prototype.toString=function(){return"index_range_scan("+this.index.m()+", ?, "+(this.je?"reverse":"natural")+(this.Uc?", limit:?":"")+(this.Vc?", skip:?":"")+")"};Mi.prototype.Sc=function(a){var b=this.toString(),c=this.Se.ed(a),b=b.replace("?",c.toString());this.Uc&&(b=b.replace("?",a.X.toString()));this.Vc&&(b=b.replace("?",a.N.toString()));return b};
Mi.prototype.ea=function(a,b,c){a=this.Se.ed(c);b=this.D.get(this.index.m());c=(1==a.length&&a[0]instanceof nd&&td(a[0])?mf(b.get(a[0].c),!1,this.Uc?c.X:void 0,this.Vc?c.N:void 0):b.$a(a,this.je,this.Uc?c.X:void 0,this.Vc?c.N:void 0)).map(function(a){return new y(a,{})},this);return[Cd(c,[this.index.Rc])]};function Ni(a){S.call(this,0,1);this.rd=a}t(Ni,S);Ni.prototype.toString=l("select(?)");Ni.prototype.Sc=function(a){a=ce(a,this.rd);return this.toString().replace("?",a.toString())};Ni.prototype.ea=function(a,b,c){return[ce(c,this.rd).eval(b[0])]};function Oi(a,b){S.call(this,0,1);this.U=a.i(jc);this.S=b}t(Oi,S);Oi.prototype.toString=function(){return"table_access_by_row_id("+this.S.getName()+")"};Oi.prototype.ea=function(a,b){return[Cd(gf(this.U,wd(b[0])),[J(this.S)])]};function Pi(a){this.g=a}t(Pi,hh);Pi.prototype.mb=function(a,b){this.Z=a;jg(a,function(a){return a instanceof qi}).forEach(function(a){var d=Qi(a);if(0!=d.length){var e=Gi(new Fi(this.g,a.table),b,d.map(function(a){return ce(b,a.rd)}));if(null!==e){var f=A();d.forEach(function(a){f.set(a.rd,a)},this);this.Z=Ri(this,e,f,a)}}},this);return this.Z};function Qi(a){var b=[];for(a=a.getParent();a;)a instanceof Ni&&b.push(a),a=a.getParent();return b}
function Ri(a,b,c,d){(null===b.Ba?[]:b.Ba.values()).map(function(a){return c.get(a)}).forEach(kg);b=new Mi(a.g,b.wb,Li(b),!1);a=new Oi(a.g,d.table);Td(a,b);og(d,d,a,b);return b.hb()};function Si(a,b){S.call(this,0,-1);this.D=a.i(kc);this.S=b}t(Si,S);Si.prototype.toString=function(){return"insert("+this.S.getName()+")"};Si.prototype.ea=function(a,b,c){Ti(this.S,c.values,this.D);a.xb(this.S,c.values);return[Cd(c.values,[this.S.getName()])]};function Ti(a,b,c){a=a.Db().fd();if(null===a?0:a.f[0].autoIncrement){var d=a.f[0].ca.getName();c=c.get(a.m()).max();var e=null===c?0:c[0];b.forEach(function(a){if(0==a.s[d]||null==a.s[d])e++,a.s[d]=e})}}
function Ui(a,b){S.call(this,0,-1);this.D=a.i(kc);this.S=b}t(Ui,S);Ui.prototype.toString=function(){return"insert_replace("+this.S.getName()+")"};Ui.prototype.ea=function(a,b,c){Ti(this.S,c.values,this.D);a.Qd(this.S,c.values);return[Cd(c.values,[this.S.getName()])]};function Vi(){S.call(this,0,1)}t(Vi,S);Vi.prototype.toString=l("limit(?)");Vi.prototype.Sc=function(a){return this.toString().replace("?",a.X.toString())};Vi.prototype.ea=function(a,b,c){b[0].entries.splice(c.X);return b};function Wi(a){S.call(this,0,1);this.M=a}t(Wi,S);m=Wi.prototype;m.toString=function(){return"order_by("+he(this.M)+")"};m.ea=function(a,b){if(1==b.length){var c;c=b[0];for(var d=null,e=0;e<this.M.length;e++){var f=Eg(this.M[e].O);if(null!==c.Ya&&c.Ya.has(f.m())){d=f;break}}c=d;(null===c?b[0]:xd(b[0],c)).entries.sort(this.Mf.bind(this))}else b.sort(this.vg.bind(this));return b};
m.V=function(a,b){var c=null,d=null,e=null,f=-1;do f++,e=this.M[f].O,c=this.M[f].kb,d=a(e),e=b(e);while(d==e&&f+1<this.M.length);d=d<e?-1:d>e?1:0;return 1==c?d:-d};m.vg=function(a,b){return this.V(function(b){return b instanceof R?xd(a,b):I(a.entries[a.entries.length-1],b)},function(a){return a instanceof R?xd(b,a):I(b.entries[b.entries.length-1],a)})};m.Mf=function(a,b){return this.V(function(b){return I(a,b)},function(a){return I(b,a)})};function Xi(a,b){this.Ia=a;this.K=b}function Yi(a){return a.K.some(function(a){return a instanceof R},a)?Zi(a):$i(a)}function Zi(a){if(1==a.K.length&&"DISTINCT"==a.K[0].Ib)return a=xd(a.Ia,a.K[0]).entries.map(function(a){var b=new Dd(new y(-1,{}),1<this.Ia.L.size);Fd(b,this.K[0],I(a,this.K[0].child));return b},a),new G(a,[]);var b=new Dd(new y(-1,{}),1<a.Ia.L.size);a.K.forEach(function(a){var d=a instanceof R?xd(this.Ia,a):I(this.Ia.entries[0],a);Fd(b,a,d)},a);return new G([b],H(a.Ia))}
function $i(a){var b=Array(a.Ia.entries.length),c=1<a.Ia.L.size;a.Ia.entries.forEach(function(a,e){b[e]=new Dd(new y(a.sa.id(),{}),c);this.K.forEach(function(c){Fd(b[e],c,I(a,c))},this)},a);return new G(b,H(a.Ia))}function aj(a,b){var c=a.map(function(a){return Yi(new Xi(a,b)).entries[0]});return new G(c,H(a[0]))};function bj(a,b){S.call(this,0,1);this.f=a;this.Nb=b}t(bj,S);bj.prototype.toString=function(){var a="project("+this.f.toString();if(null!==this.Nb)var b=this.Nb.map(function(a){return a.m()}).join(", "),a=a+(", groupBy("+b+")");return a+")"};bj.prototype.ea=function(a,b){var c;0==b.length?c=[zd()]:1==b.length?(c=b[0],c=[0==this.f.length?c:Yi(new Xi(c,this.f))]):c=[aj(b,this.f)];return c};function cj(a){return a.f.some(function(a){return a instanceof R})||null!==a.Nb};function dj(){S.call(this,0,1)}t(dj,S);dj.prototype.toString=l("skip(?)");dj.prototype.Sc=function(a){return this.toString().replace("?",a.N.toString())};dj.prototype.ea=function(a,b,c){return[new G(b[0].entries.slice(c.N),H(b[0]))]};function ej(){}t(ej,hh);ej.prototype.mb=function(a,b){if(!q(b.X)&&!q(b.N))return a;var c=fj(a);if(null===c)return a;jg(a,function(a){return a instanceof Vi||a instanceof dj}).forEach(function(a){a instanceof Vi?c.Uc=!0:c.Vc=!0;kg(a)},this);return c.hb()};function fj(a){a=jg(a,function(a){return a instanceof Mi},function(a){return a instanceof bj&&cj(a)||a instanceof Wi||1!=L(a).length||a instanceof Ni});return 0<a.length?a[0]:null};function gj(a){this.g=a}t(gj,hh);gj.prototype.mb=function(a,b){var c=hj(a,b);if(null===c)return a;var d;a:{var e=c;d=ij(Rd(c,0));if(null!==d){var f;f=c.M;for(var h=null,k=d.table.xa(),n=0;n<k.length&&null===h;n++)h=jj(k[n],f);f=h;if(null===f){d=e;break a}e=new Mi(this.g,f.wb,new Bi(f.wb),f.Pe);f=new Oi(this.g,d.table);Td(f,e);kg(c);e=og(d,d,f,e)}d=e}if(d==c)a:if(d=c,e=kj(Rd(c,0)),null!==e){f=jj(e.index,c.M);if(null===f)break a;e.je=f.Pe;d=kg(c).parent}return d.hb()};
function kj(a){a=jg(a,function(a){return a instanceof Mi},function(a){return 1!=L(a).length});return 0<a.length?a[0]:null}function ij(a){a=jg(a,function(a){return a instanceof qi},function(a){return 1!=L(a).length});return 0<a.length?a[0]:null}function hj(a,b){return q(b.M)?jg(a,function(a){return a instanceof Wi})[0]:null}function jj(a,b){if(a.f.length!=b.length||!b.every(function(b,c){return b.O.getName()==a.f[c].ca.getName()}))return null;var c=lj(b,a);return c[0]||c[1]?{wb:a,Pe:c[1]}:null}
function lj(a,b){var c=a.reduce(function(a,b){return a<<1|(0==b.kb?0:1)},0),d=b.f.reduce(function(a,b){return a<<1|(0==b.kb?0:1)},0),c=c^d;return[0==c,c==Math.pow(2,Math.max(a.length,b.f.length))-1]};function mj(a,b,c){this.Ca=a;this.fe=b;this.Ub=c}mj.prototype.gc=function(){this.Ub.forEach(function(a){this.Ca=a.mb(this.Ca,this.fe)},this);return this.Ca};function nj(a,b){S.call(this,0,1);this.S=a;this.Dg=b}t(nj,S);nj.prototype.toString=function(){return"update("+this.S.getName()+")"};nj.prototype.ea=function(a,b){var c=b[0].entries.map(function(a){var b=this.S.Lb(a.sa.Ja());this.Dg.forEach(function(a){b.s[a.O.getName()]=a.value},this);return b},this);a.update(this.S,c);return[zd()]};function oj(a){this.g=a;this.me=[new yi,new Pi(this.g),new gj(this.g),new ej,new ri(this.g)];this.Jd=[new Pi(this.g)]}oj.prototype.create=function(a,b){var c=a.hb();if(c instanceof Vg||c instanceof Ug)return pj(this,a,b);if(c instanceof ah||c instanceof eh||c instanceof fh)return pj(this,a,b,this.me);if(c instanceof Wg||c instanceof Xg)return pj(this,a,b,this.Jd);throw new E(8);};function pj(a,b,c,d){a=hg(b.hb(),a.gg.bind(a));null!=d&&(a=(new mj(a,c,d)).gc());return new ie(a,b.$())}
oj.prototype.gg=function(a){if(a instanceof ah)return new bj(a.f,a.Nb);if(a instanceof dh)return new si(a.f);if(a instanceof ch)return new Ig(a.f);if(a instanceof bh)return new Wi(a.M);if(a instanceof fh)return new dj;if(a instanceof eh)return new Vi;if(a instanceof Yg)return new Ni(a.J.W());if(a instanceof $g)return new mh;if(a instanceof gh)return new ui(this.g,a.J,a.Pb);if(a instanceof Zg)return new qi(this.g,a.table);if(a instanceof Wg)return new oi(a.table);if(a instanceof Xg)return new nj(a.table,
a.se);if(a instanceof Vg)return new Ui(this.g,a.table);if(a instanceof Ug)return new Si(this.g,a.table);throw new E(514);};function qj(a){this.eg=new ni;this.qg=new oj(a)};function rj(){this.We=A()}function sj(a,b){var c=a.We.get(b.getName())||null;null===c&&(c=new tj,a.We.set(b.getName(),c));return c}function uj(a,b,c,d){c.forEach(function(a){a=sj(this,a);0==d?(a.bb=null,a.vc=b):3==d?(null===a.Xb&&(a.Xb=D()),a.Xb.add(b),null===a.Ta&&(a.Ta=D()),a.Ta.delete(b)):1==d?(null===a.Ta&&(a.Ta=D()),a.Ta.add(b)):2==d&&(a.bb=b)},a)}
function vj(a,b,c,d){var e=!0;c.forEach(function(a){if(e){a=sj(this,a);var c=null===a.Ta||0==a.Ta.size;e=0==d?(null===a.Xb||0==a.Xb.size)&&c&&null===a.vc&&null!==a.bb&&a.bb==b:3==d?null===a.vc&&null===a.bb&&null!==a.Ta&&a.Ta.has(b):1==d?null===a.bb:c&&(null===a.bb||a.bb==b)}},a);return e}function wj(a,b,c,d){var e=vj(a,b,c,d);e&&uj(a,b,c,d);return e}rj.prototype.releaseLock=function(a,b){b.forEach(function(b){sj(this,b).releaseLock(a)},this)};
function xj(a,b){b.forEach(function(a){sj(this,a).bb=null},a)}function tj(){this.Xb=this.Ta=this.bb=this.vc=null}tj.prototype.releaseLock=function(a){this.vc==a&&(this.vc=null);this.bb==a&&(this.bb=null);null===this.Ta||this.Ta.delete(a);null===this.Xb||this.Xb.delete(a)};function yj(){this.Tb=new zj;this.Gc=new rj}function qe(a,b){(2>b.getPriority()||2>b.getPriority())&&xj(a.Gc,b.$());a.Tb.xb(b);Bj(a);return b.Mb().ha}function Bj(a){for(var b=a.Tb.ya(),c=0;c<b.length;c++){var d=b[c],e=!1;if(e=0==d.I()?Cj(a,d,1,3):Cj(a,d,2,0))a.Tb.remove(d),e=a,d.exec().then(e.og.bind(e,d),e.ng.bind(e,d))}}function Cj(a,b,c,d){var e=!1;wj(a.Gc,b.W(),b.$(),c)&&(e=wj(a.Gc,b.W(),b.$(),d));return e}yj.prototype.og=function(a,b){this.Gc.releaseLock(a.W(),a.$());a.Mb().resolve(b);Bj(this)};
yj.prototype.ng=function(a,b){this.Gc.releaseLock(a.W(),a.$());a.Mb().reject(b);Bj(this)};function zj(){this.Tb=[]}zj.prototype.xb=function(a){kf(this.Tb,a,function(a,c){var d=a.getPriority()-c.getPriority();return 0==d?a.W()-c.W():d})};zj.prototype.ya=function(){return this.Tb.slice()};zj.prototype.remove=function(a){var b=this.Tb;a=va(b,a);var c;(c=0<=a)&&ua.splice.call(b,a,1);return c};function Dj(a,b){this.Kd=Id.Ac();this.ge=a;this.nd=b;this.K=Ej(this)}function Ej(a){if(0<a.ge.f.length)return a.ge.f;var b=[];a.ge.c.forEach(function(a){a.gb().forEach(function(a){b.push(a)})});return b}Dj.prototype.V=function(a,b){return this.K.every(function(c){return Od(this.Kd,c.I(),"eq")(I(a,c),I(b,c))},this)};
function Fj(a,b,c){var d=null===b?[]:b.entries,e=ub(d,c.entries,a.V.bind(a),function(a){return d[a]});b=[];for(var f=0,h=0;h<d.length;h++){var k=d[h];e[f]==k?f++:(k=a.nd.splice(f,1),k=Gj(h,k,0,a.nd),b.push(k))}e=ub(d,c.entries,a.V.bind(a),function(a,b){return c.entries[b]});for(h=f=0;h<c.entries.length;h++)k=c.entries[h],e[f]==k?f++:(a.nd.splice(h,0,k.sa.s),k=Gj(h,[],1,a.nd),b.push(k));return b}function Gj(a,b,c,d){return{Eg:c,index:a,object:d,Gg:b,type:"splice"}};function Hj(){this.ec=A()}Hj.prototype.zd=function(a,b){var c=ja(a.a).toString(),d=this.ec.get(c)||null;null===d&&(d=new Ij(a),this.ec.set(c,d));d.zd(b)};Hj.prototype.he=function(a,b){var c=ja(a.a).toString(),d=this.ec.get(c)||null;d.he(b);0<d.Kc.size||this.ec.delete(c)};function pe(a,b){var c=D();b.forEach(function(a){c.add(a.getName())});var d=[];a.ec.forEach(function(a){a=a.Cc();a.context.c.some(function(a){return c.has(a.getName())})&&d.push(a)});return d}
function ne(a,b,c){b=ja(null!=b.ad?b.ad:b).toString();a=a.ec.get(b)||null;null!==a&&Jj(a,c)}function Ij(a){this.Cf=a;this.Kc=D();this.lg=[];this.Ue=null;this.Kf=new Dj(a.a,this.lg)}Ij.prototype.zd=function(a){this.Kc.has(a)||this.Kc.add(a)};Ij.prototype.he=function(a){return this.Kc.delete(a)};Ij.prototype.Cc=function(){var a=this.Cf;return{context:a.a,ee:Kh(a)}};function Jj(a,b){var c=Fj(a.Kf,a.Ue,b);a.Ue=b;0<c.length&&a.Kc.forEach(function(a){a(c)})};function Kj(a,b){var c=a.i(oc),d=b||{},e=new ff(c);a.lb(jc,e);var e=null,f=!1;switch(d.storeType||0){case 1:e=new Se(c);break;case 5:e=new Ue(c);break;case 4:e=new bf(a,c,d.webSqlDbSize);break;case 3:e=new Ce(c,d.firebase);f=!0;break;default:e=new Ne(a,c)}a.lb(ic,e);var h=new eg;a.lb(kc,h);return e.Fa(d.onUpgrade).then(function(){var b=new qj(a);a.lb(lc,b);b=new yj;a.lb(mc,b);b=new Hj;a.lb(nc,b);return h.Fa(c)}).then(function(){if(f){var b=new re(a);b.Ka.subscribe(b.$d.bind(b))}return(new Wf(a)).Fa(c)})}
;function Lj(a){this.g=a;this.j=a.i(oc);this.aa=D(this.j.ra());this.cb=x()}m=Lj.prototype;m.exec=function(){var a=this.g.i(kc),b=this.g.i(jc),c={};this.j.ra().forEach(function(d){var f=a.get(Qe(d)).$a(),f=gf(b,f).map(function(a){return a.s});c[d.getName()]=f});var d={name:this.j.name(),version:this.j.version(),tables:c},d=new Dd(new y(-1,d),!0);return w([new G([d],[])])};m.I=l(0);m.$=g("aa");m.Mb=g("cb");m.W=function(){return ja(this)};m.getPriority=l(0);function Mj(a,b){this.g=a;this.j=a.i(oc);this.aa=D(this.j.ra());this.cb=x();this.ua=b;this.Ka=a.i(ic);this.U=a.i(jc);this.D=a.i(kc)}m=Mj.prototype;
m.exec=function(){if(!(this.Ka instanceof Ne||this.Ka instanceof Se||this.Ka instanceof bf))throw new E(300);var a;a:{a=this.j.ra();for(var b=0;b<a.length;++b)if(0<this.D.get(Qe(a[b])).Oa().oa){a=!1;break a}a=!0}if(!a)throw new E(110);if(this.j.name()!=this.ua.name||this.j.version()!=this.ua.version)throw new E(111);if(null==this.ua.tables)throw new E(112);return Nj(this)};m.I=l(1);m.$=g("aa");m.Mb=g("cb");m.W=function(){return ja(this)};m.getPriority=l(0);
function Nj(a){var b=new id(a.g,a.aa),b=a.Ka.Cb(a.I(),b),c;for(c in a.ua.tables){var d=a.j.table(c),e=a.ua.tables[c].map(function(a){return d.tb(a)}),f=b.H(c,d.Lb);a.U.Vb(c,e);var h=a.D.jc.get(c)||[];e.forEach(function(a){h.forEach(function(b){var c=a.Eb(b.getName());b.add(c,a.id())})});f.put(e)}return b.ia()};function Oj(a,b){this.g=a;this.Ka=a.i(ic);this.Da=a.i(mc);this.Fb=a.i(nc);this.aa=D(b);this.Ra=new id(this.g,this.aa);this.cb=x();this.wc=x();this.ue=x()}m=Oj.prototype;m.exec=function(){this.ue.resolve();return this.wc.ha};m.I=l(1);m.$=g("aa");m.Mb=g("cb");m.W=function(){return ja(this)};m.getPriority=l(2);function Pj(a){qe(a.Da,a);return a.ue.ha}
function Qj(a,b){var c=b.Cc();return c.ee.hb().exec(a.Ra,c.context).then(function(a){return vd(a[0])},function(a){this.Ra.Gb();var b=new hb(a.name);this.wc.reject(b);throw a;}.bind(a))}m.ia=function(){this.Ka.Cb(this.I(),this.Ra).ia().then(function(){this.Pc();this.wc.resolve()}.bind(this),function(a){this.Ra.Gb();this.wc.reject(a)}.bind(this));return this.cb.ha};m.Gb=function(){this.Ra.Gb();this.wc.resolve();return this.cb.ha};
m.Pc=function(){var a=pe(this.Fb,this.aa);0!=a.length&&(a=new me(this.g,a),qe(this.Da,a))};function Rj(a){this.g=a;this.Da=a.i(mc);this.Tc=null;this.Ua=0;0==Sj.size&&(Sj.set(0,D([1,4])),Sj.set(1,D([2])),Sj.set(2,D([3,5,6])),Sj.set(3,D([2,7])),Sj.set(4,D([7])),Sj.set(5,D([7])),Sj.set(6,D([7])))}r("lf.proc.Transaction",Rj);var Sj=A();function Tj(a,b){var c=Sj.get(a.Ua)||null;if(null===c||!c.has(b))throw new E(107,a.Ua,b);a.Ua=b}
Rj.prototype.exec=function(a){Tj(this,4);var b=[];try{a.forEach(function(a){a.fb();b.push(a.Cc())},this)}catch(c){return Tj(this,7),Za(c)}a=new nh(this.g,b);return qe(this.Da,a).then(function(a){Tj(this,7);return a.map(function(a){return vd(a)})}.bind(this),function(a){Tj(this,7);throw a;}.bind(this))};Rj.prototype.exec=Rj.prototype.exec;Rj.prototype.Af=function(a){Tj(this,1);this.Tc=new Oj(this.g,a);return Pj(this.Tc).then(function(){Tj(this,2)}.bind(this))};Rj.prototype.begin=Rj.prototype.Af;
Rj.prototype.zf=function(a){Tj(this,3);return Qj(this.Tc,a).then(function(a){Tj(this,2);return a}.bind(this),function(a){Tj(this,7);throw a;}.bind(this))};Rj.prototype.attach=Rj.prototype.zf;Rj.prototype.ia=function(){Tj(this,5);return this.Tc.ia().then(function(){Tj(this,7)}.bind(this))};Rj.prototype.commit=Rj.prototype.ia;Rj.prototype.Gb=function(){Tj(this,6);return this.Tc.Gb().then(function(){Tj(this,7)}.bind(this))};Rj.prototype.rollback=Rj.prototype.Gb;function W(a){this.g=a;this.j=a.i(oc);this.Pd=!1}r("lf.proc.Database",W);W.prototype.Fa=function(a){this.g.lb(oc,this.j);return Kj(this.g,a).then(function(){this.Pd=!0;this.Da=this.g.i(mc);return this}.bind(this))};W.prototype.init=W.prototype.Fa;W.prototype.vb=g("j");W.prototype.getSchema=W.prototype.vb;function Uj(a){if(!a.Pd)throw new E(2);}W.prototype.select=function(a){Uj(this);return new V(this.g,1!=arguments.length||null!=arguments[0]?Array.prototype.slice.call(arguments):[])};
W.prototype.select=W.prototype.select;W.prototype.xb=function(){Uj(this);return new Mh(this.g)};W.prototype.insert=W.prototype.xb;W.prototype.Qd=function(){Uj(this);return new Mh(this.g,!0)};W.prototype.insertOrReplace=W.prototype.Qd;W.prototype.update=function(a){Uj(this);return new Wh(this.g,a)};W.prototype.update=W.prototype.update;W.prototype.delete=function(){Uj(this);return new Lh(this.g)};W.prototype["delete"]=W.prototype.delete;
W.prototype.observe=function(a,b){Uj(this);this.g.i(nc).zd(a,b)};W.prototype.observe=W.prototype.observe;W.prototype.unobserve=function(a,b){Uj(this);this.g.i(nc).he(a,b)};W.prototype.unobserve=W.prototype.unobserve;W.prototype.If=function(){Uj(this);return new Rj(this.g)};W.prototype.createTransaction=W.prototype.If;W.prototype.close=function(){try{this.g.i(ic).close()}catch(a){}this.g.clear();this.Pd=!1};W.prototype.close=W.prototype.close;
W.prototype.Qf=function(){Uj(this);var a=new Lj(this.g);return qe(this.Da,a).then(function(a){return vd(a[0])[0]})};W.prototype["export"]=W.prototype.Qf;W.prototype.import=function(a){Uj(this);a=new Mj(this.g,a);return qe(this.Da,a).then(l(null))};W.prototype["import"]=W.prototype.import;function X(a,b,c,d,e,f){this.S=a;this.w=b;this.Qe=c;this.Oe=d;this.tf=e;this.eb=f||null}r("lf.schema.BaseColumn",X);m=X.prototype;m.getName=g("w");m.m=function(){return J(this.S)+"."+this.w};m.toString=function(){return this.m()};m.H=g("S");m.I=g("tf");X.prototype.getType=X.prototype.I;X.prototype.Za=g("eb");X.prototype.xa=function(){null==this.ka&&(this.ka=[],this.H().xa().forEach(function(a){-1!=a.f.map(function(a){return a.ca.getName()}).indexOf(this.w)&&this.ka.push(a)},this));return this.ka};
X.prototype.wa=function(){if(!q(this.fa)){var a=this.xa().filter(function(a){return 1!=a.f.length?!1:a.f[0].ca.getName()==this.getName()},this);this.fa=0<a.length?a[0]:null}return this.fa};X.prototype.Ec=g("Oe");X.prototype.isNullable=X.prototype.Ec;X.prototype.Fc=g("Qe");X.prototype.Qa=function(a){return yg(this,a,"eq")};X.prototype.eq=X.prototype.Qa;X.prototype.Xe=function(a){return yg(this,a,"neq")};X.prototype.neq=X.prototype.Xe;X.prototype.Wd=function(a){return yg(this,a,"lt")};
X.prototype.lt=X.prototype.Wd;X.prototype.fg=function(a){return yg(this,a,"lte")};X.prototype.lte=X.prototype.fg;X.prototype.Sf=function(a){return yg(this,a,"gt")};X.prototype.gt=X.prototype.Sf;X.prototype.Tf=function(a){return yg(this,a,"gte")};X.prototype.gte=X.prototype.Tf;X.prototype.match=function(a){return yg(this,a,"match")};X.prototype.match=X.prototype.match;X.prototype.Bf=function(a,b){return yg(this,[a,b],"between")};X.prototype.between=X.prototype.Bf;
X.prototype.Uf=function(a){return yg(this,a,"in")};X.prototype["in"]=X.prototype.Uf;X.prototype.ag=function(){return this.Qa(null)};X.prototype.isNull=X.prototype.ag;X.prototype.$f=function(){return this.Xe(null)};X.prototype.isNotNull=X.prototype.$f;X.prototype.oc=function(a){return new X(this.S,this.w,this.Qe,this.Oe,this.tf,a)};X.prototype.as=X.prototype.oc;function Vj(){this.ud=A()}var Wj;Vj.prototype.clear=function(){this.ud.clear()};Vj.prototype.clear=Vj.prototype.clear;Vj.prototype.lb=function(a,b){this.ud.set(a.toString(),b);return b};Vj.prototype.registerService=Vj.prototype.lb;Vj.prototype.i=function(a){var b=this.ud.get(a.toString())||null;if(null===b)throw new E(7,a.toString());return b};Vj.prototype.getService=Vj.prototype.i;Vj.prototype.Ud=function(a){return this.ud.has(a.toString())};Vj.prototype.isRegistered=Vj.prototype.Ud;function Xj(a){this.j=a;this.Ed=new Sc;this.ie=new Sc;this.Ze=new Sc;this.Ce=A();this.h=new Sc;this.ze=new Sc;this.ff=new Sc;this.Be=new Sc;Yj(this)}function Yj(a){a.j.ra().forEach(function(a){var c=a.getName();a.Db().Nd().forEach(function(d){this.Ze.set(c,this.j.table(d.Sa));this.h.set(d.Sa,a);0==d.action?(this.ie.set(d.Sa,d),this.ff.set(d.Sa,a)):(this.Ed.set(d.Sa,d),this.ze.set(d.Sa,a));this.Ce.set(a.getName()+"."+d.rb,d.Sa);this.Be.set(d.Sa+"."+d.Mc,a.getName())},this)},a)}
function $c(a,b,c){if(null!=c)return 1==c?a.Ed.get(b):a.ie.get(b);c=a.Ed.get(b);a=a.ie.get(b);return null===c&&null===a?null:(c||[]).concat(a||[])}function th(a,b){var c=b.get(a);return null===c?[]:c}function vh(a,b){var c=D();b.forEach(function(a){(a=this.Ce.get(a))&&c.add(a)},a);return uc(c).map(function(a){return this.j.table(a)},a)}function rh(a,b,c){return null!=c?0==c?th(b,a.ff):th(b,a.ze):th(b,a.h)}
function wh(a,b){var c=D();b.forEach(function(a){(a=this.Be.get(a))&&a.forEach(function(a){c.add(a)})},a);return uc(c).map(function(a){return this.j.table(a)},a)};function Zj(a,b,c){this.rg=a;this.kg=b;this.Rf=c}r("lf.schema.Constraint",Zj);Zj.prototype.fd=g("rg");Zj.prototype.getPrimaryKey=Zj.prototype.fd;Zj.prototype.Nd=g("Rf");Zj.prototype.getForeignKeys=Zj.prototype.Nd;function ak(a,b,c){var d=a.ref.split(".");if(2!=d.length)throw new E(540,c);this.Ef=b;this.rb=a.local;this.Sa=d[0];this.Mc=d[1];this.name=b+"."+c;this.action=a.action;this.timing=a.timing};function Z(a){bk(a);this.Kd=Id.Ac();this.w=a;this.K=A();this.wd=D();this.kc=D();this.Jc=D();this.Aa=null;this.ka=A();this.qd=!1;this.ub=[]}r("lf.schema.TableBuilder",Z);function ck(a){this.name=a.name;this.kb=a.order;this.autoIncrement=a.autoIncrement}var dk=D([0,6]);function bk(a){if(!/^[A-Za-z_][A-Za-z0-9_]*$/.test(a))throw new E(502,a);}function ek(a,b){if(b==a.w)throw new E(546,b);if(a.K.has(b)||a.ka.has(b)||a.kc.has(b))throw new E(503,a.w+"."+b);}
function fk(a,b){var c=!1;b.forEach(function(a){var b=this.K.get(a.name);c=c||a.autoIncrement;if(a.autoIncrement&&3!=b)throw new E(504);},a);if(c&&1<b.length)throw new E(505);}function gk(a){if(null!==a.Aa){var b=a.ka.get(a.Aa).map(function(a){return a.name}),c=0;if(a.ub.some(function(a,e){c=e;return-1!=b.indexOf(a.rb)},a))throw new E(543,a.ub[c].name);}}
function hk(a){if(null!==a.Aa){var b=function(a){return a.name},c=JSON.stringify(a.ka.get(a.Aa).map(b));a.ka.forEach(function(a,e){if(e!=this.Aa){var f=a.map(b);if(JSON.stringify(f)==c)throw new E(544,this.w+"."+e);}},a)}}function ik(a){null===a.Aa||a.ka.get(a.Aa).forEach(function(a){if(this.Jc.has(a.name))throw new E(545,this.w+"."+a.name);},a)}Z.prototype.uf=function(a,b){bk(a);ek(this,a);this.K.set(a,b);dk.has(b)&&this.we([a]);return this};Z.prototype.addColumn=Z.prototype.uf;
Z.prototype.wf=function(a,b){var c=this.w;this.Aa="pk"+(c[0].toUpperCase()+c.substring(1));bk(this.Aa);ek(this,this.Aa);c=jk(this,a,!0,void 0,b);fk(this,c);1==c.length&&this.wd.add(c[0].name);this.kc.add(this.Aa);this.ka.set(this.Aa,c);return this};Z.prototype.addPrimaryKey=Z.prototype.wf;
Z.prototype.vf=function(a,b){bk(a);ek(this,a);var c=new ak(b,this.w,a);q(c.action)||(c.action=0);q(c.timing)||(c.timing=0);if(1==c.action&&1==c.timing)throw new E(506);if(!this.K.has(c.rb))throw new E(540,a);this.ub.push(c);this.ve(a,[c.rb],this.wd.has(c.rb));return this};Z.prototype.addForeignKey=Z.prototype.vf;Z.prototype.xf=function(a,b){bk(a);ek(this,a);var c=jk(this,b,!0);kk(this,a,c);1==c.length&&(this.wd.add(c[0].name),lk(this,c[0].name));this.ka.set(a,c);this.kc.add(a);return this};
Z.prototype.addUnique=Z.prototype.xf;function lk(a,b){a.ub.forEach(function(a){a.rb==b&&this.kc.add(a.name.split(".")[1])},a)}Z.prototype.we=function(a){a=jk(this,a,!1);mk(this,a);a.forEach(function(a){this.Jc.add(a.name)},this);return this};Z.prototype.addNullable=Z.prototype.we;function mk(a,b){$b(a.ka).forEach(function(a){var d=D();this.ka.get(a).forEach(function(a){d.add(a.name)});var e=b.filter(function(a){return d.has(a.name)});if(1<d.size&&0<e.length)throw new E(507,a,e.join(","));},a)}
Z.prototype.ve=function(a,b,c,d){bk(a);ek(this,a);b=jk(this,b,!0,d);kk(this,a,b);c&&this.kc.add(a);this.ka.set(a,b);return this};Z.prototype.addIndex=Z.prototype.ve;function kk(a,b,c){if(1<c.length&&(a=c.filter(function(a){return this.Jc.has(a.name)},a),0<a.length))throw new E(507,b,a.join(","));}Z.prototype.zb=ba("qd");Z.prototype.persistentIndex=Z.prototype.zb;Z.prototype.vb=function(){gk(this);hk(this);ik(this);return new (nk(this))};Z.prototype.getSchema=Z.prototype.vb;
function ok(a){return a.ub}function jk(a,b,c,d,e){var f=b,f="string"==typeof b[0]?b.map(function(a){return new ck({name:a,order:null!=d?d:1,autoIncrement:e||!1})}):b.map(function(a){return new ck(a)});f.forEach(function(a){if(!this.K.has(a.name))throw new E(508,this.w,a.name);if(c){var b=this.K.get(a.name);if(0==b||6==b)throw new E(509,this.w,a.name);}},a);return f}
function nk(a){function b(){function b(c){return a.ka.get(c).map(function(a){return{ca:this[a.name],kb:a.kb,autoIncrement:a.autoIncrement}},this)}var d=$b(a.K).map(function(b){this[b]=new X(this,b,a.wd.has(b),a.Jc.has(b),a.K.get(b));return this[b]},this),e=$b(a.ka).map(function(d){return new Ag(a.w,d,a.kc.has(d),b.call(this,d))},this);Q.call(this,a.w,d,e,a.qd);var f=null===a.Aa?null:new Ag(a.w,a.Aa,!0,b.call(this,a.Aa)),h=d.filter(function(b){return!a.Jc.has(b.getName())});this.Ff=new Zj(f,h,a.ub);
this.jf=pk(a,d,e)}t(b,Q);b.prototype.tb=function(a){return new this.jf(nb++,a)};b.prototype.createRow=b.prototype.tb;b.prototype.Lb=function(a){var b={};this.gb().forEach(function(e){var f=e.getName();e=e.I();var h=a.value[f];if(0==e)if(e=h,null!=e&&""!=e){0!=e.length%2&&(e="0"+e);for(var h=new ArrayBuffer(e.length/2),k=new Uint8Array(h),n=0,B=0;n<e.length;n+=2)k[B++]=parseInt(e.substr(n,2),16);e=h}else e=null;else e=2==e?null!=h?new Date(h):null:h;b[f]=e},this);return new this.jf(a.id,b)};b.prototype.deserializeRow=
b.prototype.Lb;b.prototype.Db=g("Ff");b.prototype.getConstraint=b.prototype.Db;return b}
function pk(a,b,c){function d(a,d){this.K=b;this.ka=c;y.call(this,a,d)}t(d,y);d.prototype.Fe=function(){var a={};this.K.forEach(function(b){a[b.getName()]=b.Ec()?null:Qc[b.I()]});return a};d.prototype.qf=function(){var a={};this.K.forEach(function(b){var c=b.getName();b=b.I();var d=this.s[c];a[c]=0==b?null!=d?rb(d):null:2==b?null!=d?d.getTime():null:6==b?null!=d?d:null:d},this);return a};var e=function(a){var b=this.K.get(a.getName()),c=this.Kd.Re.get(b)||null;return function(b){return c(b[a.getName()])}}.bind(a),
f=function(a){var b=a.map(function(a){return e(a.ca)});return function(a){return b.map(function(b){return b(a)})}}.bind(a),h={};c.forEach(function(a){var b=a.m();a=1==a.f.length?e(a.f[0].ca):f(a.f);h[b]=a});d.prototype.Eb=function(a){return-1!=a.indexOf("#")?this.id():h.hasOwnProperty(a)?h[a](this.s):null};return d};function qk(a,b){this.j=new rk(a,b);this.pb=A();this.xc=!1}r("lf.schema.Builder",qk);function sk(a,b){b.ub.forEach(function(a){var d=a.Sa;if(!this.pb.has(d))throw new E(536,a.name);var d=this.pb.get(d).vb(),e=a.Mc;if(!d.hasOwnProperty(e))throw new E(537,a.name);if(b.vb()[a.rb].I()!=d[e].I())throw new E(538,a.name);if(!d[e].Fc())throw new E(539,a.name);},a)}
qk.prototype.Df=function(a){a.ub.forEach(function(a){ok(this.pb.get(a.Sa)).forEach(function(c){if(c.rb==a.Mc)throw new E(534,a.name);},this)},this)};function tk(a){a.xc||(a.pb.forEach(function(a){sk(this,a);a=a.vb();this.j.L.set(a.getName(),a)},a),C(a.pb).forEach(a.Df,a),uk(a),a.pb.clear(),a.xc=!0)}function vk(a,b,c){b.te||(b.te=!0,b.ae=!0,b.Ge.forEach(function(a){a=c.get(a);if(!a.te)vk(this,a,c);else if(a.ae&&b!=a)throw new E(533);},a));b.ae=!1}
function uk(a){var b=A();a.j.L.forEach(function(a,d){b.set(d,new wk(d))},a);a.pb.forEach(function(a,d){a.ub.forEach(function(a){b.get(a.Sa).Ge.add(d)})});C(b).forEach(function(a){vk(this,a,b)},a)}function wk(a){this.ae=this.te=!1;this.Ge=D();this.Rc=a}qk.prototype.vb=function(){this.xc||tk(this);return this.j};qk.prototype.getSchema=qk.prototype.vb;qk.prototype.Ie=function(){var a=new hc("ns_"+this.j.name()),b;Wj||(Wj=new Vj);b=Wj;var c=null;b.Ud(a)?c=b.i(a):(c=new Vj,b.lb(a,c));return c};
qk.prototype.getGlobal=qk.prototype.Ie;qk.prototype.connect=function(a){var b=this.Ie();b.Ud(oc)||b.lb(oc,this.vb());return(new W(b)).Fa(a)};qk.prototype.connect=qk.prototype.connect;qk.prototype.Hf=function(a){if(this.pb.has(a))throw new E(503,a);if(this.xc)throw new E(535);this.pb.set(a,new Z(a));return this.pb.get(a)};qk.prototype.createTable=qk.prototype.Hf;qk.prototype.ne=function(a){if(this.xc)throw new E(535);this.j.ne(a);return this};qk.prototype.setPragma=qk.prototype.ne;
function rk(a,b){this.w=a;this.Pa=b;this.L=A();this.cf={Lf:!1}}r("lf.schema.DatabaseSchema",rk);rk.prototype.name=g("w");rk.prototype.name=rk.prototype.name;rk.prototype.version=g("Pa");rk.prototype.version=rk.prototype.version;rk.prototype.ra=function(){return C(this.L)};rk.prototype.tables=rk.prototype.ra;rk.prototype.table=function(a){if(!this.L.has(a))throw new E(101,a);return this.L.get(a)};rk.prototype.table=rk.prototype.table;rk.prototype.info=function(){this.Me||(this.Me=new Xj(this));return this.Me};
rk.prototype.bf=g("cf");rk.prototype.pragma=rk.prototype.bf;rk.prototype.ne=ba("cf");r("lf.schema.create",function(a,b){return new qk(a,b)});v.prototype.catch=v.prototype.qe;v.prototype["catch"]=v.prototype.catch;}.bind(window))()
//# sourceMappingURL=lovefield.min.js.map
