var window = this;
(function(){'use strict';function aa(){return function(){}}function ba(a){return function(b){this[a]=b}}function g(a){return function(){return this[a]}}function l(a){return function(){return a}}var m,p=this;function q(a){return void 0!==a}function ca(){}
function da(a){var b=typeof a;if("object"==b)if(a){if(a instanceof Array)return"array";if(a instanceof Object)return b;var c=Object.prototype.toString.call(a);if("[object Window]"==c)return"object";if("[object Array]"==c||"number"==typeof a.length&&"undefined"!=typeof a.splice&&"undefined"!=typeof a.propertyIsEnumerable&&!a.propertyIsEnumerable("splice"))return"array";if("[object Function]"==c||"undefined"!=typeof a.call&&"undefined"!=typeof a.propertyIsEnumerable&&!a.propertyIsEnumerable("call"))return"function"}else return"null";
else if("function"==b&&"undefined"==typeof a.call)return"object";return b}function ea(a){return null===a}function fa(a){return null!=a}function ga(a){var b=da(a);return"array"==b||"object"==b&&"number"==typeof a.length}function ha(a){return"string"==typeof a}function ia(a){return"function"==da(a)}function ka(a){return a[la]||(a[la]=++ma)}var la="closure_uid_"+(1E9*Math.random()>>>0),ma=0;function na(a,b,c){return a.call.apply(a.bind,arguments)}
function oa(a,b,c){if(!a)throw Error();if(2<arguments.length){var d=Array.prototype.slice.call(arguments,2);return function(){var c=Array.prototype.slice.call(arguments);Array.prototype.unshift.apply(c,d);return a.apply(b,c)}}return function(){return a.apply(b,arguments)}}function pa(a,b,c){pa=Function.prototype.bind&&-1!=Function.prototype.bind.toString().indexOf("native code")?na:oa;return pa.apply(null,arguments)}
function ra(a,b){var c=Array.prototype.slice.call(arguments,1);return function(){var b=c.slice();b.push.apply(b,arguments);return a.apply(this,b)}}function r(a,b){var c=a.split("."),d=p;c[0]in d||!d.execScript||d.execScript("var "+c[0]);for(var e;c.length&&(e=c.shift());)!c.length&&q(b)?d[e]=b:d=d[e]?d[e]:d[e]={}}
function t(a,b){function c(){}c.prototype=b.prototype;a.Hb=b.prototype;a.prototype=new c;a.prototype.constructor=a;a.Dg=function(a,c,f){for(var h=Array(arguments.length-2),k=2;k<arguments.length;k++)h[k-2]=arguments[k];return b.prototype[c].apply(a,h)}};function sa(a){if(Error.captureStackTrace)Error.captureStackTrace(this,sa);else{var b=Error().stack;b&&(this.stack=b)}a&&(this.message=String(a))}t(sa,Error);sa.prototype.name="CustomError";function ta(a,b,c){this.dg=c;this.Jf=a;this.ug=b;this.qd=0;this.ld=null}ta.prototype.get=function(){var a;0<this.qd?(this.qd--,a=this.ld,this.ld=a.next,a.next=null):a=this.Jf();return a};ta.prototype.put=function(a){this.ug(a);this.qd<this.dg&&(this.qd++,a.next=this.ld,this.ld=a)};var ua=Array.prototype,va=ua.indexOf?function(a,b,c){return ua.indexOf.call(a,b,c)}:function(a,b,c){c=null==c?0:0>c?Math.max(0,a.length+c):c;if(ha(a))return ha(b)&&1==b.length?a.indexOf(b,c):-1;for(;c<a.length;c++)if(c in a&&a[c]===b)return c;return-1},wa=ua.forEach?function(a,b,c){ua.forEach.call(a,b,c)}:function(a,b,c){for(var d=a.length,e=ha(a)?a.split(""):a,f=0;f<d;f++)f in e&&b.call(c,e[f],f,a)},xa=ua.map?function(a,b,c){return ua.map.call(a,b,c)}:function(a,b,c){for(var d=a.length,e=Array(d),
f=ha(a)?a.split(""):a,h=0;h<d;h++)h in f&&(e[h]=b.call(c,f[h],h,a));return e},ya=ua.reduce?function(a,b,c,d){d&&(b=pa(b,d));return ua.reduce.call(a,b,c)}:function(a,b,c,d){var e=c;wa(a,function(c,h){e=b.call(d,e,c,h,a)});return e},za=ua.some?function(a,b,c){return ua.some.call(a,b,c)}:function(a,b,c){for(var d=a.length,e=ha(a)?a.split(""):a,f=0;f<d;f++)if(f in e&&b.call(c,e[f],f,a))return!0;return!1};function Aa(a,b,c){return 2>=arguments.length?ua.slice.call(a,b):ua.slice.call(a,b,c)}
function Ba(a){for(var b=[],c=0;c<a;c++)b[c]=0;return b}function Ca(a){for(var b=[],c=0;c<arguments.length;c++){var d=arguments[c];if("array"==da(d))for(var e=0;e<d.length;e+=8192)for(var f=Ca.apply(null,Aa(d,e,e+8192)),h=0;h<f.length;h++)b.push(f[h]);else b.push(d)}return b};function Da(a){var b=[],c=0,d;for(d in a)b[c++]=a[d];return b};var Ea;a:{var Fa=p.navigator;if(Fa){var Ga=Fa.userAgent;if(Ga){Ea=Ga;break a}}Ea=""}function u(a){return-1!=Ea.indexOf(a)};function Ha(){return u("Opera")||u("OPR")}function Ia(){return(u("Chrome")||u("CriOS"))&&!Ha()&&!u("Edge")};function Ja(a){p.setTimeout(function(){throw a;},0)}var Ka;
function La(){var a=p.MessageChannel;"undefined"===typeof a&&"undefined"!==typeof window&&window.postMessage&&window.addEventListener&&!u("Presto")&&(a=function(){var a=document.createElement("IFRAME");a.style.display="none";a.src="";document.documentElement.appendChild(a);var b=a.contentWindow,a=b.document;a.open();a.write("");a.close();var c="callImmediate"+Math.random(),d="file:"==b.location.protocol?"*":b.location.protocol+"//"+b.location.host,a=pa(function(a){if(("*"==d||a.origin==d)&&a.data==
c)this.port1.onmessage()},this);b.addEventListener("message",a,!1);this.port1={};this.port2={postMessage:function(){b.postMessage(c,d)}}});if("undefined"!==typeof a&&!u("Trident")&&!u("MSIE")){var b=new a,c={},d=c;b.port1.onmessage=function(){if(q(c.next)){c=c.next;var a=c.Ae;c.Ae=null;a()}};return function(a){d.next={Ae:a};d=d.next;b.port2.postMessage(0)}}return"undefined"!==typeof document&&"onreadystatechange"in document.createElement("SCRIPT")?function(a){var b=document.createElement("SCRIPT");
b.onreadystatechange=function(){b.onreadystatechange=null;b.parentNode.removeChild(b);b=null;a();a=null};document.documentElement.appendChild(b)}:function(a){p.setTimeout(a,0)}};function Ma(){this.zd=this.lc=null}var Oa=new ta(function(){return new Na},function(a){a.reset()},100);Ma.prototype.add=function(a,b){var c=Oa.get();c.set(a,b);this.zd?this.zd.next=c:this.lc=c;this.zd=c};Ma.prototype.remove=function(){var a=null;this.lc&&(a=this.lc,this.lc=this.lc.next,this.lc||(this.zd=null),a.next=null);return a};function Na(){this.next=this.scope=this.Nd=null}Na.prototype.set=function(a,b){this.Nd=a;this.scope=b;this.next=null};
Na.prototype.reset=function(){this.next=this.scope=this.Nd=null};function Pa(a,b){Qa||Ra();Sa||(Qa(),Sa=!0);Ta.add(a,b)}var Qa;function Ra(){if(p.Promise&&p.Promise.resolve){var a=p.Promise.resolve(void 0);Qa=function(){a.then(Ua)}}else Qa=function(){var a=Ua;!ia(p.setImmediate)||p.Window&&p.Window.prototype&&p.Window.prototype.setImmediate==p.setImmediate?(Ka||(Ka=La()),Ka(a)):p.setImmediate(a)}}var Sa=!1,Ta=new Ma;function Ua(){for(var a=null;a=Ta.remove();){try{a.Nd.call(a.scope)}catch(b){Ja(b)}Oa.put(a)}Sa=!1};function v(a,b){this.Ua=0;this.gf=void 0;this.$c=this.cc=this.C=null;this.kd=this.Md=!1;if(a!=ca)try{var c=this;a.call(b,function(a){Va(c,2,a)},function(a){Va(c,3,a)})}catch(d){Va(this,3,d)}}function Wa(){this.next=this.context=this.hc=this.Lc=this.child=null;this.Cd=!1}Wa.prototype.reset=function(){this.context=this.hc=this.Lc=this.child=null;this.Cd=!1};var Xa=new ta(function(){return new Wa},function(a){a.reset()},100);function Ya(a,b,c){var d=Xa.get();d.Lc=a;d.hc=b;d.context=c;return d}
function w(a){if(a instanceof v)return a;var b=new v(ca);Va(b,2,a);return b}function Za(a){return new v(function(b,c){c(a)})}function ab(a,b,c){bb(a,b,c,null)||Pa(ra(b,a))}function cb(a){return new v(function(b,c){var d=a.length,e=[];if(d)for(var f=function(a,c){d--;e[a]=c;0==d&&b(e)},h=function(a){c(a)},k=0,n;k<a.length;k++)n=a[k],ab(n,ra(f,k),h);else b(e)})}function x(){var a,b,c=new v(function(c,e){a=c;b=e});return new db(c,a,b)}
v.prototype.then=function(a,b,c){return eb(this,ia(a)?a:null,ia(b)?b:null,c)};v.prototype.then=v.prototype.then;v.prototype.$goog_Thenable=!0;v.prototype.qe=function(a,b){return eb(this,null,a,b)};function fb(a,b){a.cc||2!=a.Ua&&3!=a.Ua||gb(a);a.$c?a.$c.next=b:a.cc=b;a.$c=b}
function eb(a,b,c,d){var e=Ya(null,null,null);e.child=new v(function(a,h){e.Lc=b?function(c){try{var e=b.call(d,c);a(e)}catch(B){h(B)}}:a;e.hc=c?function(b){try{var e=c.call(d,b);!q(e)&&b instanceof hb?h(b):a(e)}catch(B){h(B)}}:h});e.child.C=a;fb(a,e);return e.child}v.prototype.zg=function(a){this.Ua=0;Va(this,2,a)};v.prototype.Ag=function(a){this.Ua=0;Va(this,3,a)};
function Va(a,b,c){0==a.Ua&&(a==c&&(b=3,c=new TypeError("Promise cannot resolve to itself")),a.Ua=1,bb(c,a.zg,a.Ag,a)||(a.gf=c,a.Ua=b,a.C=null,gb(a),3!=b||c instanceof hb||ib(a,c)))}function bb(a,b,c,d){if(a instanceof v)return fb(a,Ya(b||ca,c||null,d)),!0;var e;if(a)try{e=!!a.$goog_Thenable}catch(h){e=!1}else e=!1;if(e)return a.then(b,c,d),!0;e=typeof a;if("object"==e&&null!=a||"function"==e)try{var f=a.then;if(ia(f))return jb(a,f,b,c,d),!0}catch(h){return c.call(d,h),!0}return!1}
function jb(a,b,c,d,e){function f(a){k||(k=!0,d.call(e,a))}function h(a){k||(k=!0,c.call(e,a))}var k=!1;try{b.call(a,h,f)}catch(n){f(n)}}function gb(a){a.Md||(a.Md=!0,Pa(a.Of,a))}function kb(a){var b=null;a.cc&&(b=a.cc,a.cc=b.next,b.next=null);a.cc||(a.$c=null);return b}
v.prototype.Of=function(){for(var a=null;a=kb(this);){var b=this.Ua,c=this.gf;if(3==b&&a.hc&&!a.Cd)for(var d=void 0,d=this;d&&d.kd;d=d.C)d.kd=!1;if(a.child)a.child.C=null,lb(a,b,c);else try{a.Cd?a.Lc.call(a.context):lb(a,b,c)}catch(e){mb.call(null,e)}Xa.put(a)}this.Md=!1};function lb(a,b,c){2==b?a.Lc.call(a.context,c):a.hc&&a.hc.call(a.context,c)}function ib(a,b){a.kd=!0;Pa(function(){a.kd&&mb.call(null,b)})}var mb=Ja;function hb(a){sa.call(this,a)}t(hb,sa);hb.prototype.name="cancel";
function db(a,b,c){this.ha=a;this.resolve=b;this.reject=c};/*

 Copyright 2014 The Lovefield Project Authors. All Rights Reserved.

 Licensed under the Apache License, Version 2.0 (the "License");
 you may not use this file except in compliance with the License.
 You may obtain a copy of the License at

     http://www.apache.org/licenses/LICENSE-2.0

 Unless required by applicable law or agreed to in writing, software
 distributed under the License is distributed on an "AS IS" BASIS,
 WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 See the License for the specific language governing permissions and
 limitations under the License.
*/
function y(a,b){this.pa=a;this.s=b||this.Fe()}var nb=0;m=y.prototype;m.id=g("pa");function ob(a){return a.s}m.Fe=function(){return{}};m.qf=g("s");m.Ja=function(){return{id:this.pa,value:this.qf()}};m.Eb=function(a){return"#"==a.substr(-1)?this.pa:null};function pb(a){return new y(a.id,a.value)}function qb(a){return new y(nb++,a||{})}function rb(a){if(null==a)return null;a=new Uint8Array(a);for(var b="",c=0;c<a.length;++c)var d=a[c].toString(16),b=b+(2>d.length?"0"+d:d);return b};function sb(a){this.type=a}function tb(a){y.call(this,-1,a)}t(tb,y);function ub(a,b,c,d){c=c||function(a,b){return a==b};d=d||function(b){return a[b]};for(var e=a.length,f=b.length,h=[],k=0;k<e+1;k++)h[k]=[],h[k][0]=0;for(var n=0;n<f+1;n++)h[0][n]=0;for(k=1;k<=e;k++)for(n=1;n<=f;n++)c(a[k-1],b[n-1])?h[k][n]=h[k-1][n-1]+1:h[k][n]=Math.max(h[k-1][n],h[k][n-1]);for(var B=[],k=e,n=f;0<k&&0<n;)c(a[k-1],b[n-1])?(B.unshift(d(k-1,n-1)),k--,n--):h[k-1][n]>h[k][n-1]?k--:n--;return B}function vb(a){return ya(arguments,function(a,c){return a+c},0)}
function wb(a){return vb.apply(null,arguments)/arguments.length}function xb(a){var b=arguments.length;if(2>b)return 0;var c=wb.apply(null,arguments);return vb.apply(null,xa(arguments,function(a){return Math.pow(a-c,2)}))/(b-1)}function yb(a){return Math.sqrt(xb.apply(null,arguments))};var zb="StopIteration"in p?p.StopIteration:{message:"StopIteration",stack:""};function Ab(){}Ab.prototype.next=function(){throw zb;};Ab.prototype.mc=function(){return this};function Bb(a){if(a instanceof Ab)return a;if("function"==typeof a.mc)return a.mc(!1);if(ga(a)){var b=0,c=new Ab;c.next=function(){for(;;){if(b>=a.length)throw zb;if(b in a)return a[b++];b++}};return c}throw Error("Not implemented");}
function Cb(a,b){if(ga(a))try{wa(a,b,void 0)}catch(c){if(c!==zb)throw c;}else{a=Bb(a);try{for(;;)b.call(void 0,a.next(),void 0,a)}catch(c){if(c!==zb)throw c;}}}function Db(a){if(za(arguments,function(a){return!a.length})||!arguments.length)return new Ab;var b=new Ab,c=arguments,d=Ba(c.length);b.next=function(){if(d){for(var a=xa(d,function(a,b){return c[b][a]}),b=d.length-1;0<=b;b--){if(d[b]<c[b].length-1){d[b]++;break}if(0==b){d=null;break}d[b]=0}return a}throw zb;};return b};function Eb(a,b){this.o={};this.b=[];this.Pa=this.Bb=0;var c=arguments.length;if(1<c){if(c%2)throw Error("Uneven number of arguments");for(var d=0;d<c;d+=2)this.set(arguments[d],arguments[d+1])}else a&&this.addAll(a)}m=Eb.prototype;m.zc=g("Bb");m.ya=function(){Fb(this);for(var a=[],b=0;b<this.b.length;b++)a.push(this.o[this.b[b]]);return a};function Gb(a){Fb(a);return a.b.concat()}m.Ma=function(a){return Hb(this.o,a)};m.nd=function(){return 0==this.Bb};
m.clear=function(){this.o={};this.Pa=this.Bb=this.b.length=0};m.remove=function(a){return Hb(this.o,a)?(delete this.o[a],this.Bb--,this.Pa++,this.b.length>2*this.Bb&&Fb(this),!0):!1};function Fb(a){if(a.Bb!=a.b.length){for(var b=0,c=0;b<a.b.length;){var d=a.b[b];Hb(a.o,d)&&(a.b[c++]=d);b++}a.b.length=c}if(a.Bb!=a.b.length){for(var e={},c=b=0;b<a.b.length;)d=a.b[b],Hb(e,d)||(a.b[c++]=d,e[d]=1),b++;a.b.length=c}}m.get=function(a,b){return Hb(this.o,a)?this.o[a]:b};
m.set=function(a,b){Hb(this.o,a)||(this.Bb++,this.b.push(a),this.Pa++);this.o[a]=b};m.addAll=function(a){var b;if(a instanceof Eb)b=Gb(a),a=a.ya();else{b=[];var c=0,d;for(d in a)b[c++]=d;a=Da(a)}for(c=0;c<b.length;c++)this.set(b[c],a[c])};m.forEach=function(a,b){for(var c=Gb(this),d=0;d<c.length;d++){var e=c[d],f=this.get(e);a.call(b,f,e,this)}};m.clone=function(){return new Eb(this)};
m.mc=function(a){Fb(this);var b=0,c=this.Pa,d=this,e=new Ab;e.next=function(){if(c!=d.Pa)throw Error("The map has changed since the iterator was created");if(b>=d.b.length)throw zb;var e=d.b[b++];return a?e:d.o[e]};return e};function Hb(a,b){return Object.prototype.hasOwnProperty.call(a,b)};/*

 Copyright 2015 The Lovefield Project Authors. All Rights Reserved.

 Licensed under the Apache License, Version 2.0 (the "License");
 you may not use this file except in compliance with the License.
 You may obtain a copy of the License at

     http://www.apache.org/licenses/LICENSE-2.0

 Unless required by applicable law or agreed to in writing, software
 distributed under the License is distributed on an "AS IS" BASIS,
 WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 See the License for the specific language governing permissions and
 limitations under the License.
*/
function z(){this.o=new Eb;Object.defineProperty(this,"size",{get:function(){return this.o.zc()}})}z.prototype.clear=function(){this.o.clear()};z.prototype.clear=z.prototype.clear;z.prototype.delete=function(a){return this.o.remove(a)};z.prototype["delete"]=z.prototype.delete;z.prototype.forEach=function(a,b){return this.o.forEach(a,b)};z.prototype.forEach=z.prototype.forEach;z.prototype.get=function(a){return this.o.get(a)};z.prototype.get=z.prototype.get;z.prototype.has=function(a){return this.o.Ma(a)};
z.prototype.has=z.prototype.has;z.prototype.set=function(a,b){return this.o.set(a,b)};z.prototype.set=z.prototype.set;var Ib=q(window.Map)&&q(window.Map.prototype.values)&&q(window.Map.prototype.forEach);function A(){return Ib?new window.Map:new z}function Jb(a){if(a instanceof z)return Gb(a.o);var b=0,c=Array(a.size);a.forEach(function(a,e){c[b++]=e});return c}function C(a){if(a instanceof z)return a.o.ya();var b=0,c=Array(a.size);a.forEach(function(a){c[b++]=a});return c};var Kb={};r("lf.TransactionType",Kb);Kb.READ_ONLY=0;Kb.READ_WRITE=1;function Lb(a,b){this.Ra=a;this.rf=b;this.Y=x()}Lb.prototype.ia=function(){try{Mb(this.Ra)}catch(a){return Za(a)}return(0==this.rf?this.pc():Nb(this)).then(function(a){this.Ra.ia();return a}.bind(this))};function Nb(a){Ob(a);Pb(a);return a.pc()}
function Ob(a){a.Ra.qb.forEach(function(a,c){var d=this.Ra.$().get(c),d=this.H(d.getName(),d.Lb.bind(d)),e=C(a.va).map(function(a){return a.id()});0<e.length&&d.remove(e).qe(this.Pd,this);e=C(a.na).map(function(a){return a[1]}).concat(C(a.ta));d.put(e).qe(this.Pd,this)},a)}function Pb(a){Qb(a.Ra).forEach(function(a){var c=this.H(a.getName(),pb),d;c.get([-1]).then(function(a){d=a;return c.remove([])}).then(function(){c.put(d);c.put(a.Ja())},this.Pd.bind(this))},a)}Lb.prototype.Pd=function(a){this.Y.reject(a)};function Rb(a){this.vg=a}Rb.prototype.toString=g("vg");var Sb=new Rb("backstore"),Tb=new Rb("cache"),Ub=new Rb("indexstore"),Vb=new Rb("engine"),Wb=new Rb("runner"),Yb=new Rb("observerregistry"),Zb=new Rb("schema");function $b(a){if("function"==typeof a.ya)return a.ya();if(ha(a))return a.split("");if(ga(a)){for(var b=[],c=a.length,d=0;d<c;d++)b.push(a[d]);return b}return Da(a)};function ac(a){this.o=new Eb;a&&this.addAll(a)}function bc(a){var b=typeof a;return"object"==b&&a||"function"==b?"o"+ka(a):b.substr(0,1)+a}m=ac.prototype;m.zc=function(){return this.o.zc()};m.add=function(a){this.o.set(bc(a),a)};m.addAll=function(a){a=$b(a);for(var b=a.length,c=0;c<b;c++)this.add(a[c])};m.remove=function(a){return this.o.remove(bc(a))};m.clear=function(){this.o.clear()};m.nd=function(){return this.o.nd()};m.contains=function(a){return this.o.Ma(bc(a))};m.ya=function(){return this.o.ya()};
m.clone=function(){return new ac(this)};m.mc=function(){return this.o.mc(!1)};var cc=Ha(),dc=u("Trident")||u("MSIE"),ec=u("Edge"),fc=u("Gecko")&&!(-1!=Ea.toLowerCase().indexOf("webkit")&&!u("Edge"))&&!(u("Trident")||u("MSIE"))&&!u("Edge"),gc=-1!=Ea.toLowerCase().indexOf("webkit")&&!u("Edge");function hc(){var a=Ea;if(fc)return/rv\:([^\);]+)(\)|;)/.exec(a);if(ec)return/Edge\/([\d\.]+)/.exec(a);if(dc)return/\b(?:MSIE|rv)[: ]([^\);]+)(\)|;)/.exec(a);if(gc)return/WebKit\/(\S+)/.exec(a)}
(function(){if(cc&&p.opera){var a;var b=p.opera.version;try{a=b()}catch(c){a=b}return a}a="";(b=hc())&&(a=b?b[1]:"");return dc&&(b=(b=p.document)?b.documentMode:void 0,b>parseFloat(a))?String(b):a})();!u("Android")||Ia()||u("Firefox")||Ha();Ia();var ic=u("Safari")&&!(Ia()||u("Coast")||Ha()||u("Edge")||u("Silk")||u("Android"))&&!(u("iPhone")&&!u("iPod")&&!u("iPad")||u("iPad")||u("iPod"));function jc(a){this.Wb=new ac(a);Object.defineProperty(this,"size",{get:function(){return this.Wb.zc()}})}jc.prototype.add=function(a){this.Wb.add(a)};jc.prototype.add=jc.prototype.add;jc.prototype.clear=function(){this.Wb.clear()};jc.prototype.clear=jc.prototype.clear;jc.prototype.delete=function(a){return this.Wb.remove(a)};jc.prototype["delete"]=jc.prototype.delete;jc.prototype.forEach=function(a,b){this.Wb.ya().forEach(a,b)};jc.prototype.has=function(a){return this.Wb.contains(a)};
jc.prototype.has=jc.prototype.has;var kc=window.Set&&window.Set.prototype.values&&window.Set.prototype.forEach&&!ic;function D(a){return kc?q(a)?new window.Set(a):new window.Set:new jc(a)}function lc(a){if(a instanceof jc)return a.Wb.ya();var b=0,c=Array(a.size);a.forEach(function(a){c[b++]=a});return c}function mc(a,b){if(b.size>a.size)return!1;var c=!0;b.forEach(function(b){c=c&&a.has(b)});return c};function nc(a,b){this.pa=a;this.s=b||{}}function oc(a){var b=D();a.forEach(function(a){b.add(a>>9)});return lc(b)}nc.prototype.W=g("pa");function pc(a,b){b.forEach(function(a){this.s[a.id()]=a.Ja()},a)}function qc(a,b){b.forEach(function(a){delete this.s[a]},a)}nc.prototype.Ja=function(){return{id:this.pa,value:JSON.stringify(this.s)}};function rc(a){return new nc(a.id,JSON.parse(a.value))};function sc(a,b,c){this.ba=a;this.Kb=b;this.hf=c}m=sc.prototype;m.get=function(a){if(0==a.length)return this.yc();var b=this.Kb;return tc(this,a).then(function(c){return a.map(function(a){var e=c.get(a>>9);return b(e.s[a])})})};function tc(a,b){var c=A(),d=x(),e=oc(b).map(function(a){return new v(function(b,d){var e;try{e=this.ba.get(a)}catch(B){d(B);return}e.onerror=d;e.onsuccess=function(a){a=rc(a.target.result);c.set(a.W(),a);b()}},this)},a);cb(e).then(function(){d.resolve(c)});return d.ha}
m.yc=function(){return new v(function(a,b){var c=[],d;try{d=this.ba.openCursor()}catch(e){b(e);return}d.onerror=b;d.onsuccess=function(){var b=d.result;if(b){var f;f=rc(b.value).s;for(var h in f)c.push(this.Kb(f[h]));b.continue()}else a(c)}.bind(this)},this)};m.Sb=function(a){return new v(function(b,c){var d;try{d=a()}catch(e){c(e);return}d.onsuccess=b;d.onerror=c},this)};
m.put=function(a){if(0==a.length)return w();var b=A();a.forEach(function(a){var d;d=a.id()>>9;var e=b.get(d)||null;null===e&&(e=this.hf(this.ba.name,d));pc(e,[a]);b.set(d,e)},this);a=C(b).map(function(a){return this.Sb(function(){return this.ba.put(a.Ja())}.bind(this))},this);return cb(a)};
m.remove=function(a){if(0==a.length)return this.Sb(function(){return this.ba.clear()}.bind(this));var b=A();a.forEach(function(a){var d=a>>9,e=b.get(d)||null;null===e&&(e=this.hf(this.ba.name,d));qc(e,[a]);b.set(d,e)},this);a=C(b).map(function(a){return this.Sb(function(){return 0==Object.keys(a.s).length?this.ba.delete(a.W()):this.ba.put(a.Ja())}.bind(this))},this);return cb(a)};function uc(a,b,c){a=a.i(Tb);var d=[c<<9,(c+1<<9)-1];b=a.$a(b,d[0],d[1]);c=new nc(c);pc(c,b);return c}
function vc(a,b){return new nc(b)};function wc(){};function xc(a){this.U=a.i(Tb);this.D=a.i(Ub);this.j=a.i(Zb)}xc.prototype.update=function(a){a.forEach(function(a){yc(this,a);zc(this,a)},this)};function zc(a,b){var c=b.getName();b.va.forEach(function(a,b){this.U.remove(c,b)},a);b.ta.forEach(function(a){this.U.set(c,a)},a);b.na.forEach(function(a){this.U.set(c,a[1])},a)}function yc(a,b){var c=a.j.table(b.getName());Ac(b).forEach(function(a){Bc(this,c,a)},a)}
function Bc(a,b,c){var d=a.D.jc.get(b.getName())||[],e=0;d.forEach(function(a){try{Cc(a,c),e++}catch(b){throw d.slice(0,e).forEach(function(a){Cc(a,[c[1],c[0]])},this),b;}},a)}function Cc(a,b){var c=null===b[1]?void 0:b[1].Eb(a.getName()),d=null===b[0]?void 0:b[0].Eb(a.getName());if(!q(d)&&q(c))a.add(c,b[1].id());else if(q(d)&&q(c)){if(null===c||null===d){if(c==d)return}else if(0==a.qc().compare(d,c))return;a.add(c,b[1].id());a.remove(d,b[0].id())}else q(d)&&!q(c)&&a.remove(d,b[0].id())};var Dc={};r("lf.ConstraintAction",Dc);Dc.RESTRICT=0;Dc.CASCADE=1;var Ec={};r("lf.ConstraintTiming",Ec);Ec.IMMEDIATE=0;Ec.DEFERRABLE=1;var Fc={};r("lf.Order",Fc);Fc.DESC=0;Fc.ASC=1;var Gc={};r("lf.Type",Gc);Gc.ARRAY_BUFFER=0;Gc.BOOLEAN=1;Gc.DATE_TIME=2;Gc.INTEGER=3;Gc.NUMBER=4;Gc.STRING=5;Gc.OBJECT=6;var Hc={0:null,1:!1,2:Object.freeze(new Date(0)),3:0,4:0,5:"",6:null};r("lf.type.DEFAULT_VALUES",Hc);function E(a,b){this.code=a;this.message="http://sn.im/2a0j3wn?c="+a;if(1<arguments.length)for(var c=1;c<=Math.min(4,arguments.length-1);++c)this.message+="&p"+(c-1)+"="+encodeURIComponent(arguments[c].toString().slice(0,64))}t(E,Error);function Ic(){this.o=A();this.size=0}m=Ic.prototype;m.has=function(a){return this.o.has(a)};m.set=function(a,b){var c=this.o.get(a)||null;null===c&&(c=D(),this.o.set(a,c));c.has(b)||(c.add(b),this.size++);return this};m.Vb=function(a,b){var c=this.o.get(a)||null;null===c&&(c=D(),this.o.set(a,c));b.forEach(function(a){c.has(a)||(c.add(a),this.size++)},this);return this};m.Yd=function(a){a.keys().forEach(function(b){var c=a.get(b);this.Vb(b,c)},this);return this};
m.delete=function(a,b){var c=this.o.get(a,null);if(null===c)return!1;var d=c.delete(b);d&&(--this.size,0==c.size&&this.o.delete(a));return d};m.get=function(a){a=this.o.get(a)||null;return null===a?null:lc(a)};m.clear=function(){this.o.clear();this.size=0};m.keys=function(){return Jb(this.o)};m.values=function(){var a=[];this.o.forEach(function(b){a.push.apply(a,lc(b))});return a};function Jc(a){this.D=a.i(Ub);this.j=a.i(Zb);this.U=a.i(Tb);this.dd=null}function Kc(a,b,c){var d=b.Db().ig;c.forEach(function(a){d.forEach(function(b){if(null==a.s[b.getName()])throw new E(202,b.m());},this)},a)}function Lc(a,b,c,d){b.Db().Od().forEach(function(a){a.timing==d&&Mc(this,a,c)},a)}function Mc(a,b,c){var d=Nc(a,b);c.forEach(function(a){if(Oc(a[0],a[1],b.name)&&(a=a[1].s[b.rb],null!==a&&!d.Ma(a)))throw new E(203,b.name);},a)}
function Nc(a,b){null===a.dd&&(a.dd=A());var c=a.dd.get(b.name)||null;null===c&&(c=a.j.table(b.Sa)[b.Mc].wa(),c=a.D.get(c.m()),a.dd.set(b.name,c));return c}function Oc(a,b,c){return(null===a?null!==b:null===b)||a.Eb(c)!=b.Eb(c)}function Pc(a,b,c,d,e){b=Rc(a.j.info(),b.getName(),e);null!==b&&(b=b.filter(function(a){return a.timing==d}),0!=b.length&&Sc(a,b,c,function(a,b,c){if(b.Ma(c))throw new E(203,a.name);}))}
function Tc(a,b,c){b=Rc(a.j.info(),b.getName(),1);if(null===b)return null;var d=new Ic;Sc(a,b,c,function(a,b,c){b=b.get(c);0<b.length&&d.Vb(a.Ef,b)});return d}function Sc(a,b,c,d){b.forEach(function(a){var b=this.D.get(a.name),h=Nc(this,a);c.forEach(function(c){Oc(c[0],c[1],h.getName())&&d(a,b,c[0].s[a.Mc])},this)},a)}function Uc(a,b,c,d){0!=c.length&&(c=c.map(function(a){return[null,a]}),Lc(a,b,c,d))}function Vc(a,b,c,d){0!=c.length&&(Lc(a,b,c,d),Pc(a,b,c,d))}
function Wc(a,b,c,d){0!=c.length&&(c=c.map(function(a){return[a,null]}),Pc(a,b,c,d,0))}function Xc(a,b,c){var d={pe:[],kf:new Ic},e=new Ic;e.Vb(b.getName(),c.map(function(a){return a.id()}));do{var f=new Ic;e.keys().forEach(function(a){var b=this.j.table(a);a=e.get(a).map(function(a){return[this.U.get(a),null]},this);b=Tc(this,b,a);null!==b&&(d.pe.unshift.apply(d.pe,b.keys()),f.Yd(b))},a);e=f;d.kf.Yd(e)}while(0<e.size);return d};function Yc(a){this.ta=A();this.na=A();this.va=A();this.w=a}m=Yc.prototype;m.getName=g("w");m.add=function(a){if(this.va.has(a.id())){var b=[this.va.get(a.id()),a];this.na.set(a.id(),b);this.va.delete(a.id())}else this.ta.set(a.id(),a)};m.modify=function(a){var b=a[1],c=a[0].id();this.ta.has(c)?this.ta.set(c,b):(this.na.has(c)&&(a=[this.na.get(a[0].id())[0],b]),this.na.set(c,a))};
m.delete=function(a){if(this.ta.has(a.id()))this.ta.delete(a.id());else if(this.na.has(a.id())){var b=this.na.get(a.id())[0];this.na.delete(a.id());this.va.set(a.id(),b)}else this.va.set(a.id(),a)};m.Yd=function(a){a.ta.forEach(function(a){this.add(a)},this);a.na.forEach(function(a){this.modify(a)},this);a.va.forEach(function(a){this.delete(a)},this)};
function Ac(a){var b=[];a.ta.forEach(function(a){b.push([null,a])});a.na.forEach(function(a){b.push(a)});a.va.forEach(function(a){b.push([a,null])});return b}m.toString=function(){return"["+Jb(this.ta).toString()+"], ["+Jb(this.na).toString()+"], ["+Jb(this.va).toString()+"]"};function Zc(a){var b=new Yc(a.w);a.ta.forEach(function(a){b.delete(a)});a.va.forEach(function(a){b.add(a)});a.na.forEach(function(a){b.modify([a[1],a[0]])});return b}
m.nd=function(){return 0==this.ta.size&&0==this.va.size&&0==this.na.size};function $c(a,b){this.aa=A();b.forEach(function(a){this.aa.set(a.getName(),a)},this);this.j=a.i(Zb);this.U=a.i(Tb);this.D=a.i(Ub);this.Ea=new Jc(a);this.md=new xc(a);this.qb=A()}function Qb(a){var b=[];Jb(a.qb).map(function(a){return this.aa.get(a)},a).forEach(function(a){a.zb()&&(a.xa().forEach(function(a){b.push(this.D.get(a.m()))},this),b.push(this.D.get(a.getName()+".#")))},a);return b}m=$c.prototype;m.$=g("aa");
function ad(a){var b=[];a.aa.forEach(function(a){a.zb()&&(a.xa().forEach(function(a){b.push(a.m())}),b.push(a.getName()+".#"))});return b}m.xb=function(a,b){bd(this,a);Kc(this.Ea,a,b);Uc(this.Ea,a,b,0);for(var c=0;c<b.length;c++)cd(this,a,[null,b[c]])};
function cd(a,b,c){var d=b.getName(),e=a.qb.get(d)||new Yc(d);a.qb.set(d,e);try{Bc(a.md,b,c)}catch(h){throw h;}b=c[0];var f=c[1];null===b&&null!==f?(a.U.set(d,f),e.add(f)):null!==b&&null!==f?(a.U.set(d,f),e.modify(c)):null!==b&&null===f&&(a.U.remove(d,b.id()),e.delete(b))}m.update=function(a,b){bd(this,a);Kc(this.Ea,a,b);for(var c=0;c<b.length;c++){var d=b[c],d=[this.U.get(d.id()),d];Vc(this.Ea,a,[d],0);cd(this,a,d)}};
m.Rd=function(a,b){bd(this,a);Kc(this.Ea,a,b);for(var c=0;c<b.length;c++){var d=b[c],e=null,f,h=a.Db().gd();if(null===h)f=null;else{f=this.Ea;var h=h.m(),k=d.Eb(h);f=f.D.get(h).get(k);f=0==f.length?null:f[0]}null!=f?(e=this.U.get(f),d.pa=f,Vc(this.Ea,a,[[e,d]],0)):Uc(this.Ea,a,[d],0);cd(this,a,[e,d])}};m.remove=function(a,b){bd(this,a);dd(this,a,b);Wc(this.Ea,a,b,0);for(var c=0;c<b.length;c++)cd(this,a,[b[c],null])};
function dd(a,b,c){if(null!==Rc(a.j.info(),b.getName(),1)){b=Xc(a.Ea,b,c);var d=b.kf;b.pe.forEach(function(a){var b=this.j.table(a);a=d.get(a).map(function(a){return this.U.get(a)},this);Wc(this.Ea,b,a,0);a.forEach(function(a){cd(this,b,[a,null])},this)},a)}}function Mb(a){a.qb.forEach(function(a){var c=this.aa.get(a.getName());Uc(this.Ea,c,C(a.ta),1);Wc(this.Ea,c,C(a.va),1);Vc(this.Ea,c,C(a.na),1)},a)}m.ia=aa();m.Gb=function(){var a=C(this.qb).map(function(a){return Zc(a)});this.md.update(a)};
function bd(a,b){if(!a.aa.has(b.getName()))throw new E(106,b.getName());};function ed(a,b,c,d){this.c=a;this.A=b;this.da=this.c==F?!1:c;this.ma=this.A==F?!1:d}var F=new (aa());ed.prototype.toString=function(){return(this.da?"(":"[")+(this.c==F?"unbound":this.c)+", "+(this.A==F?"unbound":this.A)+(this.ma?")":"]")};function fd(a){if(gd(a))return[];var b=null,c=null;a.c==F||(b=new ed(F,a.c,!1,!a.da));a.A==F||(c=new ed(a.A,F,!a.ma,!1));return[b,c].filter(function(a){return null!==a})}ed.prototype.reverse=function(){return new ed(this.A,this.c,this.ma,this.da)};
function hd(a,b){var c=id(a.c,b.c,!0,a.da,b.da);if(0==c)return!0;var d=-1==c?a:b,c=1==c?a:b;return d.A==F||d.A>c.c||d.A==c.c&&!d.ma&&!c.da}function jd(){return new ed(F,F,!1,!1)}function gd(a){return a.c==F&&a.A==F}function kd(a){return a.c==a.A&&a.c!=F&&!a.da&&!a.ma}ed.prototype.contains=function(a){var b=this.A==F||a<this.A||a==this.A&&!this.ma;return(this.c==F||a>this.c||a==this.c&&!this.da)&&b};
function id(a,b,c,d,e){function f(a){return c?a:1==a?-1:1}d=d||!1;e=e||!1;return a==F?b==F?(d?!e:e)?d?f(1):f(-1):0:f(-1):b==F?f(1):a<b?-1:a==b?(d?!e:e)?d?f(1):f(-1):0:1}function ld(a,b){var c=id(a.c,b.c,!0,a.da,b.da);0==c&&(c=id(a.A,b.A,!1,a.ma,b.ma));return c};function G(a,b){this.entries=a;this.L=D(b);this.Ya=null}function H(a){return lc(a.L)}function md(a){return a.entries.map(function(a){return a.sa.s})}function nd(a){return a.entries.map(function(a){return a.sa.id()})}function od(a,b){return a.Ya.get(b.m())}var pd=null;function qd(){null===pd&&(pd=new G([],[]));return pd}
function rd(a){if(0==a.length)return qd();for(var b=a.reduce(function(a,b){return a+b.entries.length},0),c=Array(b),d=0,b=a.map(function(a){var b=A();a.entries.forEach(function(a){c[d++]=a;b.set(a.id,a)});return b}),e=A(),f=0;f<c.length;f++)b.every(function(a){return a.has(c[f].id)})&&e.set(c[f].id,c[f]);return new G(C(e),lc(a[0].L))}function sd(a){if(0==a.length)return qd();var b=A();a.forEach(function(a){a.entries.forEach(function(a){b.set(a.id,a)})});return new G(C(b),lc(a[0].L))}
function td(a,b){var c=1<b.length,d=a.map(function(a){return new ud(a,c)});return new G(d,b)}function ud(a,b){this.sa=a;this.id=vd++;this.Ud=b}var vd=0;function I(a,b){var c=b.Za();return null!==c&&a.sa.s.hasOwnProperty(c)?a.sa.s[c]:a.Ud?a.sa.s[J(b.H())][b.getName()]:a.sa.s[b.getName()]}function wd(a,b,c){var d=b.Za();if(null!=d)a.sa.s[d]=c;else if(a.Ud){var d=J(b.H()),e=a.sa.s[d];null==e&&(e={},a.sa.s[d]=e);e[b.getName()]=c}else a.sa.s[b.getName()]=c}
function xd(a,b,c,d){function e(a,b){if(a.Ud){var c=a.sa.s,d;for(d in c)f[d]=c[d]}else f[b[0]]=a.sa.s}var f={};e(a,b);e(c,d);a=new y(-1,f);return new ud(a,!0)};r("lf.bind",function(a){return new yd(a)});function yd(a){this.fa=a}r("lf.Binder",yd);yd.prototype.wa=g("fa");function zd(){this.Re=Ad();var a=Bd();this.fc=A();this.fc.set(1,Cd());this.fc.set(2,Dd());this.fc.set(4,a);this.fc.set(3,a);this.fc.set(5,Ed())}zd.Ac=function(){return zd.Ne?zd.Ne:zd.Ne=new zd};function Fd(a,b,c){return(a.fc.get(b)||null).get(c)||null}function Ad(){function a(a){return a}var b=A();b.set(1,function(a){return null===a?null:a?1:0});b.set(2,function(a){return null===a?null:a.getTime()});b.set(3,a);b.set(4,a);b.set(5,a);return b}
function Cd(){var a=A();a.set("eq",function(a,c){return a==c});a.set("neq",function(a,c){return a!=c});return a}
function Bd(){var a=Cd();a.set("between",function(a,c){return null===a||null===c[0]||null===c[1]?!1:a>=c[0]&&a<=c[1]});a.set("gte",function(a,c){return null===a||null===c?!1:a>=c});a.set("gt",function(a,c){return null===a||null===c?!1:a>c});a.set("in",function(a,c){return-1!=c.indexOf(a)});a.set("lte",function(a,c){return null===a||null===c?!1:a<=c});a.set("lt",function(a,c){return null===a||null===c?!1:a<c});return a}
function Ed(){var a=Bd();a.set("match",function(a,c){return null===a||null===c?!1:(new RegExp(c)).test(a)});return a}
function Dd(){var a=A();a.set("between",function(a,c){return null===a||null===c[0]||null===c[1]?!1:a.getTime()>=c[0].getTime()&&a.getTime()<=c[1].getTime()});a.set("eq",function(a,c){return(null===a?-1:a.getTime())==(null===c?-1:c.getTime())});a.set("gte",function(a,c){return null===a||null===c?!1:a.getTime()>=c.getTime()});a.set("gt",function(a,c){return null===a||null===c?!1:a.getTime()>c.getTime()});a.set("in",function(a,c){return c.some(function(c){return c.getTime()==a.getTime()})});a.set("lte",
function(a,c){return null===a||null===c?!1:a.getTime()<=c.getTime()});a.set("lt",function(a,c){return null===a||null===c?!1:a.getTime()<c.getTime()});a.set("neq",function(a,c){return(null===a?-1:a.getTime())!=(null===c?-1:c.getTime())});return a};function K(){this.h=this.C=null}var Gd=[];K.prototype.getParent=g("C");K.prototype.hb=function(){for(var a=this;!ea(a.getParent());)a=a.getParent();return a};function Hd(a){for(var b=0;!ea(a.getParent());)b++,a=a.getParent();return b}function L(a){return a.h||Gd}function Id(a,b){return L(a)[b]||null}function Jd(a,b,c){b.C=a;null===a.h?a.h=[b]:a.h.splice(c,0,b)}function M(a,b){b.C=a;null===a.h?a.h=[b]:a.h.push(b)}
function Kd(a,b){var c=a.h&&a.h[b];return c?(c.C=null,a.h.splice(b,1),0==a.h.length&&(a.h=null),c):null}K.prototype.removeChild=function(a){return Kd(this,L(this).indexOf(a))};function Ld(a,b,c){Id(a,c).C=null;b.C=a;a.h[c]=b}function Md(a,b,c){!1!==b.call(c,a)&&L(a).forEach(function(a){Md(a,b,c)})};function Nd(){K.call(this);this.pa=Od++}t(Nd,K);var Od=0;Nd.prototype.W=g("pa");function Pd(a,b,c){Nd.call(this);this.O=a;this.value=b;this.G=c;this.uc=Fd(zd.Ac(),this.O.I(),this.G);this.ab=!1;this.bc=b}t(Pd,Nd);m=Pd.prototype;m.Jb=function(){var a=new Pd(this.O,this.value,this.G);a.bc=this.bc;a.wd(this.ab);var b=this.W();a.pa=b;return a};m.gb=function(a){return null!=a?(a.push(this.O),a):[this.O]};m.wd=ba("ab");function Qd(a){var b=!1;a.value instanceof yd||(b="array"==da(a.value)?!a.value.some(function(a){return a instanceof yd}):!0);if(!b)throw new E(501);}
m.eval=function(a){Qd(this);if("in"==this.G)return Rd(this,a);var b=a.entries.filter(function(a){return this.uc(I(a,this.O),this.value)!=this.ab},this);return new G(b,H(a))};m.bind=function(a){if(this.bc instanceof yd){var b=this.bc.wa();if(a.length<=b)throw new E(510);this.value=a[b]}else"array"==da(this.bc)&&(this.value=this.bc.map(function(b){if(b instanceof yd){var d=b.wa();if(a.length<=d)throw new E(510);return a[b.wa()]}return b}))};
function Rd(a,b){var c=D(a.value),d=function(a){return null===a?!1:c.has(a)!=this.ab}.bind(a),e=b.entries.filter(function(a){return d(I(a,this.O))},a);return new G(e,H(b))}m.toString=function(){return"value_pred("+this.O.m()+" "+this.G+(this.ab?"(complement)":"")+" "+this.value+")"};function Sd(a){this.ca=a;this.ad=this.Ba=null}function Td(a,b){null===a.Ba&&null!=a.u&&(a.Ba=Ud(a.u));return a.Ba.get(b)||null}function Ud(a){var b=A();Md(a,function(a){b.set(a.W(),a)});return b}function Vd(a,b){b.u&&(a.u=b.u.Jb());a.ad=b}Sd.prototype.bind=function(){return this};function Wd(a,b){var c=a.u;null!=c&&Md(c,function(a){a instanceof Pd&&a.bind(b)})};function Xd(a){Sd.call(this,a)}t(Xd,Sd);function Yd(a){var b="";a.forEach(function(c,d){b+=c.O.m()+" ";b+=1==c.kb?"ASC":"DESC";d<a.length-1&&(b+=", ")});return b}Xd.prototype.$=function(){return D(this.c)};Xd.prototype.clone=function(){var a=new Xd(this.ca);Vd(a,this);this.f&&(a.f=this.f.slice());this.c&&(a.c=this.c.slice());a.X=this.X;a.N=this.N;this.M&&(a.M=this.M.slice());this.ja&&(a.ja=this.ja.slice());this.Qb&&(a.Qb=this.Qb);this.Yb&&(a.Yb=this.Yb);a.yb=this.yb;return a};
Xd.prototype.bind=function(a){Xd.Hb.bind.call(this,a);null!=this.Qb&&(this.X=a[this.Qb.wa()]);null!=this.Yb&&(this.N=a[this.Yb.wa()]);Wd(this,a);return this};function Zd(a,b){this.Ca=a;this.aa=b}Zd.prototype.hb=g("Ca");Zd.prototype.$=g("aa");function $d(a){var b=D();a.forEach(function(a){a.$().forEach(b.add.bind(b))});return b};function ae(a,b){this.global=a;this.Ka=a.i(Sb);this.td=b.map(function(a){return a.context});this.af=b.map(function(a){return a.fe});this.De=$d(this.af);this.sf=be(this);this.cb=x()}function be(a){return a.td.some(function(a){return!(a instanceof Xd)})?1:0}m=ae.prototype;
m.exec=function(){function a(){var f=d.shift();if(f){var h=e[c.length];return f.hb().exec(b,h).then(function(b){c.push(b[0]);return a()})}return w()}var b=new $c(this.global,this.De),c=[],d=this.af.slice(),e=this.td;return a().then(function(){return this.Ka.Cb(this.sf,b).ia()}.bind(this)).then(function(){this.ce(c);return c}.bind(this),function(a){b.Gb();throw a;})};m.I=g("sf");m.$=g("De");m.Mb=g("cb");m.W=function(){return ka(this)};m.ce=aa();function ce(a,b){ae.call(this,a,b);this.Fb=a.i(Yb)}t(ce,ae);ce.prototype.getPriority=l(0);ce.prototype.ce=function(a){this.td.forEach(function(b,c){de(this.Fb,b,a[c])},this)};function ee(a,b){this.g=a;this.Fb=a.i(Yb);this.Da=a.i(Wb);this.md=new xc(a);this.qb=b;var c=a.i(Zb),d=this.qb.map(function(a){return c.table(a.getName())});this.aa=D(d);this.cb=x()}m=ee.prototype;m.exec=function(){this.md.update(this.qb);this.Pc();return w()};m.I=l(1);m.$=g("aa");m.Mb=g("cb");m.W=function(){return ka(this)};m.getPriority=l(1);m.Pc=function(){var a=fe(this.Fb,this.aa);0!=a.length&&(a=new ce(this.g,a),ge(this.Da,a))};function he(a){this.g=a;this.Ka=a.i(Sb);this.Da=a.i(Wb)}he.prototype.ae=function(a){a=new ee(this.g,a);ge(this.Da,a)};function N(a,b){this.Pa=a;this.l=b;this.Va=A()}r("lf.backstore.FirebaseRawBackStore",N);N.prototype.hd=g("l");N.prototype.jd=function(){throw new E(351);};function ie(a,b){var c=x(),d=a;b.length&&(d=a.child(b));d.once("value",function(a){c.resolve(a.val())},function(a){c.reject(a)});return c.ha}function je(a,b,c){function d(a){a?e.reject(a):e.resolve()}c=c||!1;var e=x();c?a.set(b,d):a.update(b,d);return e.ha}
N.prototype.Fa=function(a){return ie(this.l,"@rev/R").then(function(a){this.Na=a;return ie(this.l,"@table")}.bind(this)).then(function(b){var c=0,d;for(d in b)this.Va.set(d,b[d]),b[d]>c&&(c=b[d]);a.ra().forEach(function(a){this.Va.has(a.getName())||(b[a.getName()]=++c)},this);d=this.l.child("@table");return je(d,b)}.bind(this))};
function ke(a,b,c){var d=a.Va.get(b);return null!=d?function(){var a={},b=x();this.l.orderByChild("T").equalTo(d).once("value",function(d){d.forEach(function(b){var d=c(b.val());a[parseInt(b.key(),10)]=d});b.resolve(a)});return b.ha}.call(a).then(function(a){a["@rev"]={R:++this.Na};return je(this.l,a)}.bind(a)):w()}N.prototype.sc=function(a){return ke(this,a,l(null)).then(function(){this.Va.delete(a);return je(this.l.child("@table/"+a),null,!0)}.bind(this))};N.prototype.dropTable=N.prototype.sc;
N.prototype.nc=function(a,b,c){return ke(this,a,function(a){var e=a.P;e[b]=c;return{R:this.Na+1,T:a.T,P:e}}.bind(this))};N.prototype.addTableColumn=N.prototype.nc;N.prototype.tc=function(a,b){return ke(this,a,function(a){var d=a.P;delete d[b];return{R:this.Na+1,T:a.T,P:d}}.bind(this))};N.prototype.dropTableColumn=N.prototype.tc;N.prototype.Oc=function(a,b,c){return ke(this,a,function(a){var e=a.P;e[c]=e[b];delete e[b];return{R:this.Na+1,T:a.T,P:e}}.bind(this))};N.prototype.renameTableColumn=N.prototype.Oc;
N.prototype.tb=function(){throw new E(351);};N.prototype.createRow=N.prototype.tb;N.prototype.Dc=g("Pa");N.prototype.getVersion=N.prototype.Dc;N.prototype.dc=function(a){var b=x();a=this.Va.get(a);this.l.orderByChild("T").equalTo(a).once("value",function(a){var d=[];a.forEach(function(a){d.push(a.val().P)});b.resolve(d)});return b.ha};N.prototype.dump=function(){var a={},b=Jb(this.Va).map(function(b){return this.dc(b).then(function(d){a[b]=d})}.bind(this));return cb(b).then(function(){return a})};
N.prototype.dump=N.prototype.dump;function le(a,b,c){Lb.call(this,c,b);this.l=a}t(le,Lb);le.prototype.H=function(a){return this.l.Bc(a)};
le.prototype.pc=function(){var a=this.Ra.qb;if(0==a.size)this.Y.resolve();else{var b=this.l.Na+1;this.l.Na=b;var c={"@rev":{R:b}};a.forEach(function(a,e){var f=this.l.Va.get(e);a.ta.forEach(function(a,d){c[d]={R:b,T:f,P:a.s}});a.na.forEach(function(a,d){c[d]={R:b,T:f,P:a[1].s}});a.va.forEach(function(a,b){c[b]=null})},this);this.l.l.update(c,function(c){null===c?this.Y.resolve():(this.l.Na=b-1,c=C(a).map(function(a){return me(this.l,a.getName())},this),cb(c).then(this.Y.reject.bind(this.Y),this.Y.reject.bind(this.Y)))}.bind(this))}return this.Y.ha};function ne(){this.ua=A()}function oe(a,b){if(0==b.length)return C(a.ua);var c=[];b.forEach(function(a){a=this.ua.get(a)||null;null===a||c.push(a)},a);return c}ne.prototype.getData=g("ua");ne.prototype.get=function(a){return w(oe(this,a))};function pe(a,b){b.forEach(function(a){this.ua.set(a.id(),a)},a)}ne.prototype.put=function(a){pe(this,a);return w()};function qe(a,b){0==b.length||b.length==a.ua.size?a.ua.clear():b.forEach(function(a){this.ua.delete(a)},a)}
ne.prototype.remove=function(a){qe(this,a);return w()};function re(a){return 0==a.ua.size?0:Jb(a.ua).reduce(function(a,c){return a>c?a:c},0)};function se(a,b){this.j=a;this.yf=b;this.Nc=A();this.Na=-1;this.L=A();this.Va=A();this.Gd=null}m=se.prototype;
m.Fa=function(a){this.l=this.yf.child(this.j.name());var b=a||function(){return w()};return ie(this.l,"@db/version").then(function(a){return null===a?je(this.l,te(this),!0).then(function(){var a=new N(0,this.l);return b(a)}.bind(this)):a==this.j.version()?ie(this.l,"@rev/R").then(function(a){this.Na=a;return ie(this.l,"@table")}.bind(this)).then(function(a){for(var b in a)this.Va.set(b,a[b]);a=this.j.ra().map(function(a){return me(this,a.getName())},this);return cb(a)}.bind(this)).then(function(){ue(this);
ve(this);return w()}.bind(this)):this.de(a,b).then(function(){return this.Fa()}.bind(this))}.bind(this))};m.de=function(a,b){var c=new N(a,this.l);return c.Fa(this.j).then(function(){return w()}.bind(this)).then(function(){return b(c)}).then(function(){var a=this.l.child("@db");return je(a,{version:this.j.version()},!0)}.bind(this))};
function ve(a){a.l.off();a.l.on("child_removed",a.kg.bind(a));a.Hd&&(a.Hd.off(),a.Nc.clear());a.Hd=a.l.orderByChild("R").startAt(a.Na+1);a.Hd.on("value",a.ae.bind(a))}function ue(a){nb=C(a.L).map(function(a){return re(a)}).reduce(function(a,c){return a>c?a:c},0)+1}m.kg=function(a){var b=a.val(),c=this.Nc.get(b.T)||null;null===c&&(c=D(),this.Nc.set(b.T,c));c.add(parseInt(a.key(),10))};
m.ae=function(a){var b=a.child("@rev/R").val();null!=b&&b!=this.Na&&(this.Na=b,a=we(this,a),a.forEach(function(a){var b=this.L.get(a.getName()),e=Jb(a.va);0<e.length&&qe(b,e);var f=C(a.ta);a.na.forEach(function(a){f.push(a[1])});pe(b,f)},this),0<a.length&&this.Ic(a),ve(this))};
function we(a,b){var c=D(),d=A();a.Va.forEach(function(a,b){var h=this.L.get(b),k=new Yc(b);if(this.Nc.has(a)){var n=lc(this.Nc.get(a));n.forEach(function(a){c.add(a)});oe(h,n).forEach(function(a){k.delete(a)})}d.set(a,k)}.bind(a));b.forEach(function(a){if("@rev"!=a.key()){var b=parseInt(a.key(),10);if(!c.has(b)){a=a.val();var h=d.get(a.T),k=this.L.get(h.getName());k.getData().has(b)?h.modify([oe(k,[b])[0],new y(b,a.P)]):h.add(new y(b,a.P))}}}.bind(a));return C(d).filter(function(a){return!a.nd()})}
function me(a,b){var c=x(),d=a.Va.get(b);a.l.orderByChild("T").equalTo(d).once("value",function(a){var d=new ne,h=[];a.forEach(function(a){h.push(new y(parseInt(a.key(),10),a.val().P))});pe(d,h);this.L.set(b,d);c.resolve()}.bind(a));return c.ha}function te(a){var b={};b["@db"]={version:a.j.version()};b["@rev"]={R:1};a.Na=1;b["@table"]={};a.j.ra().forEach(function(a,d){var e=a.getName();b["@table"][e]=d;this.L.set(e,new ne);this.Va.set(e,d)},a);return b}m.Cb=function(a,b){return new le(this,a,b)};
m.Bc=function(a){var b=this.L.get(a)||null;if(null!==b)return b;throw new E(101,a);};m.close=aa();m.subscribe=ba("Gd");m.Ic=function(a){null!=this.Gd&&this.Gd(a)};function O(a,b,c,d){this.l=b;this.Xa=c;this.Pa=a;this.Yc=d}r("lf.backstore.IndexedDBRawBackStore",O);O.prototype.hd=g("l");O.prototype.getRawDBInstance=O.prototype.hd;O.prototype.jd=g("Xa");O.prototype.getRawTransaction=O.prototype.jd;O.prototype.sc=function(a){return new v(function(b,c){try{this.l.deleteObjectStore(a)}catch(d){c(d);return}b()},this)};O.prototype.dropTable=O.prototype.sc;
function xe(a,b,c,d){return new v(function(a,f){var h;try{var k=this.Xa.objectStore(b);h=k.openCursor()}catch(n){f(n);return}h.onsuccess=function(){var b=h.result;b?(c(b),b.continue()):(d(k),a())};h.onerror=f},a)}function ye(a){var b=null;return b=a instanceof ArrayBuffer?rb(a):a instanceof Date?a.getTime():a}
function ze(a,b,c){function d(a){var b=rc(a.value),d=b.s,e;for(e in d){var B=pb(d[e]);c(B);d[e]=B.Ja()}a.update(b.Ja())}function e(a){var b=pb(a.value);c(b);a.update(b.Ja())}return xe(a,b,a.Yc?d:e,aa())}O.prototype.nc=function(a,b,c){var d=ye(c);return ze(this,a,function(a){a.s[b]=d})};O.prototype.addTableColumn=O.prototype.nc;O.prototype.tc=function(a,b){return ze(this,a,function(a){delete a.s[b]})};O.prototype.dropTableColumn=O.prototype.tc;
O.prototype.Oc=function(a,b,c){return ze(this,a,function(a){a.s[c]=a.s[b];delete a.s[b]})};O.prototype.renameTableColumn=O.prototype.Oc;function Ae(a,b){var c=[];return new v(function(a,e){var f;try{f=this.Xa.objectStore(b).openCursor()}catch(h){e(h);return}f.onsuccess=function(){var b=f.result;if(b){if(this.Yc){var e;e=rc(b.value).s;for(var n in e)c.push(e[n])}else c.push(b.value);b.continue()}else a(c)}.bind(this);f.onerror=e},a)}O.prototype.tb=function(a){var b={},c;for(c in a)b[c]=ye(a[c]);return qb(b)};
O.prototype.createRow=O.prototype.tb;O.prototype.Dc=g("Pa");O.prototype.getVersion=O.prototype.Dc;O.prototype.dump=function(){for(var a=this.l.objectStoreNames,b=[],c=0;c<a.length;++c){var d=a.item(c);b.push(this.dc(d))}return cb(b).then(function(b){var c={};b.forEach(function(b,d){c[a.item(d)]=b});return c})};O.prototype.dump=O.prototype.dump;O.prototype.dc=function(a){return Ae(this,a).then(function(a){return a.map(function(a){return a.value})})};function Be(a,b){this.ba=a;this.Kb=b}m=Be.prototype;m.get=function(a){if(0==a.length)return this.yc();a=a.map(function(a){return new v(function(c,d){var e;try{e=this.ba.get(a)}catch(f){d(f);return}e.onerror=d;e.onsuccess=function(a){c(this.Kb(a.target.result))}.bind(this)},this)},this);return cb(a)};
m.yc=function(){return new v(function(a,b){var c=[],d;try{d=this.ba.openCursor()}catch(e){b(e);return}d.onerror=b;d.onsuccess=function(){var b=d.result;b?(c.push(this.Kb(b.value)),b.continue()):a(c)}.bind(this)},this)};m.Sb=function(a){return new v(function(b,c){var d;try{d=a()}catch(e){c(e);return}d.onsuccess=b;d.onerror=c},this)};m.put=function(a){if(0==a.length)return w();a=a.map(function(a){return this.Sb(function(){return this.ba.put(a.Ja())}.bind(this))},this);return cb(a)};
m.remove=function(a){return new v(function(b,c){var d=this.ba.count();d.onsuccess=function(d){if(0==a.length||d.target.result==a.length)return this.Sb(function(){return this.ba.clear()}.bind(this)).then(b,c);d=a.map(function(a){return this.Sb(function(){return this.ba.delete(a)}.bind(this))},this);cb(d).then(b,c)}.bind(this);d.onerror=c},this)};function Ce(a,b,c,d,e){Lb.call(this,c,d);this.g=a;this.Xa=b;this.Yc=e;this.Xa.oncomplete=this.Y.resolve.bind(this.Y);this.Xa.onabort=this.Y.reject.bind(this.Y)}t(Ce,Lb);Ce.prototype.H=function(a,b,c){return this.Yc?(c=null!=c?c:0,a=this.Xa.objectStore(a),new sc(a,b,0==c?ra(uc,this.g):vc)):new Be(this.Xa.objectStore(a),b)};Ce.prototype.pc=function(){return this.Y.ha};function De(a,b){this.g=a;this.j=b;this.Zc=b.bf().Lf||!1}m=De.prototype;
m.Fa=function(a){var b=window.indexedDB||window.mozIndexedDB||window.webkitIndexedDB||window.msIndexedDB;if(null==b)throw new E(352);var c=a||function(){return w()};return new v(function(a,e){var f;try{f=b.open(this.j.name(),this.j.version())}catch(h){e(h);return}f.onerror=e;f.onupgradeneeded=function(a){Ee(this,c,a).then(aa(),e)}.bind(this);f.onsuccess=function(b){this.l=b.target.result;this.le().then(function(b){nb=b+1;a(this.l)}.bind(this))}.bind(this)},this)};
function Ee(a,b,c){var d=c.target.result,e=c.target.transaction;c=new O(c.oldVersion,d,e,a.Zc);Fe(d);a.j.ra().forEach(ra(a.Gf,d,e),a);return b(c)}function Fe(a){for(var b=[],c=0;c<a.objectStoreNames.length;++c){var d=a.objectStoreNames.item(c);-1!=d.indexOf(".")&&b.push(d)}b.forEach(function(b){try{a.deleteObjectStore(b)}catch(c){}})}
m.Gf=function(a,b,c){a.objectStoreNames.contains(c.getName())||a.createObjectStore(c.getName(),{keyPath:"id"});c.zb()&&(c.xa().forEach(function(c){this.rc(a,b,c.m(),"btree")},this),this.rc(a,b,Ge(c),"rowid"))};m.rc=function(a,b,c,d){a.objectStoreNames.contains(c)||(a.createObjectStore(c,{keyPath:"id"}),a=b.objectStore(c),(this.Zc?new sc(a,pb,vc):new Be(a,pb)).put([new tb(new sb(d))]))};
m.Cb=function(a,b){var c=Jb(b.$());ad(b).forEach(function(a){c.push(a)});var d=this.l.transaction(c,0==a?"readonly":"readwrite");return new Ce(this.g,d,b,a,this.Zc)};
m.le=function(a){function b(){if(0==d.length)return w();var a=d.shift();return c(a).then(b)}function c(b){return new v(function(c,d){var ja;try{ja=(a||e.transaction([b])).objectStore(b).openCursor(null,"prev")}catch(qa){d(qa);return}ja.onsuccess=function(a){(a=a.target.result)&&(f=Math.max(f,h(a)));c(f)};ja.onerror=function(){c(f)}})}var d=this.j.ra().map(function(a){return a.getName()}),e=this.l,f=0,h=function(a){return this.Zc?(a=rc(a.value),Object.keys(a.s).reduce(function(a,b){return Math.max(a,
b)},0)):a.key}.bind(this);return new v(function(a){b().then(function(){a(f)})})};m.close=function(){this.l.close()};m.Bc=function(){throw new E(511);};m.subscribe=aa();m.Ic=aa();function He(a,b,c){Lb.call(this,c,b);this.ba=a;0==b&&this.Y.resolve()}t(He,Lb);He.prototype.H=function(a){return this.ba.Bc(a)};He.prototype.pc=function(){this.Y.resolve();return this.Y.ha};function Ie(a){this.j=a;this.L=A()}m=Ie.prototype;m.Fa=function(){this.j.ra().forEach(this.Xf,this);return w()};m.Bc=function(a){var b=this.L.get(a)||null;if(null===b)throw new E(101,a);return b};m.Cb=function(a,b){return new He(this,a,b)};function Je(a,b){if(!a.L.has(b)){var c=new ne;a.L.set(b,c);return c}return null}m.Xf=function(a){Je(this,a.getName());a.zb()&&(a.xa().forEach(function(a){this.rc(a.m(),"btree")},this),this.rc(Ge(a),"rowid"))};m.rc=function(a,b){var c=Je(this,a);null===c||c.put([new tb(new sb(b))])};
m.close=aa();m.subscribe=aa();m.Ic=aa();function Ke(a){Ie.call(this,a);this.pd=null}t(Ke,Ie);Ke.prototype.subscribe=function(a){null===this.pd&&(this.pd=a)};Ke.prototype.Ic=function(a){null===this.pd||this.pd(a)};function Le(a,b,c){this.Xa=a;this.w=b;this.Kb=c}Le.prototype.get=function(a){var b=this.Kb;return Me(this.Xa,"SELECT id, value FROM "+this.w+" "+(0==a.length?"":"WHERE id IN ("+a.join(",")+")"),[],function(a){for(var d=a.rows.length,e=Array(d),f=0;f<d;++f)e[f]=b({id:a.rows.item(f).id,value:JSON.parse(a.rows.item(f).value)});return e})};
Le.prototype.put=function(a){if(0==a.length)return w();var b="INSERT OR REPLACE INTO "+this.w+"(id, value) VALUES (?, ?)";a.forEach(function(a){Me(this.Xa,b,[a.id(),JSON.stringify(a.s)])},this);return w()};Le.prototype.remove=function(a){Me(this.Xa,"DELETE FROM "+this.w+" "+(0==a.length?"":"WHERE id IN ("+a.join(",")+")"),[]);return w()};function Ne(a,b,c){Lb.call(this,b,c);this.l=a;this.L=A();this.Jd=[]}t(Ne,Lb);function Oe(a){return a.replace(".","__d__").replace("#","__s__")}Ne.prototype.H=function(a,b){var c=this.L.get(a)||null;null===c&&(c=new Le(this,Oe(a),b),this.L.set(a,c));return c};function Me(a,b,c,d){var e=x();a.Jd.push({xg:b,ng:c,transform:d,Y:e});return e.ha}
Ne.prototype.pc=function(){var a=null,b=this.Y.reject.bind(this.Y),c=function(a,b){this.Y.reject(b)}.bind(this),d=[],e=function(b,h){if(null!==a){var k=h;null!=a.transform&&null!=h&&(k=a.transform(h));d.push(k);a.Y.resolve(k)}0<this.Jd.length?(a=k=this.Jd.shift(),b.executeSql(k.xg,k.ng,e,c)):this.Y.resolve(d)}.bind(this);0==this.rf?this.l.readTransaction(e,b):this.l.transaction(e,b);return this.Y.ha};function P(a,b,c){this.l=c;this.g=a;this.Pa=b}r("lf.backstore.WebSqlRawBackStore",P);P.prototype.hd=g("l");P.prototype.getRawDBInstance=P.prototype.hd;P.prototype.jd=function(){throw new E(356);};P.prototype.getRawTransaction=P.prototype.jd;function Pe(a){return new Ne(a.l,new $c(a.g,D()),1)}P.prototype.sc=function(a){var b=Pe(this);Me(b,"DROP TABLE "+a,[]);return b.ia()};P.prototype.dropTable=P.prototype.sc;
P.prototype.dc=function(a){var b=Pe(this);Me(b,"SELECT id, value FROM "+a,[]);return b.ia().then(function(a){for(var b=a[0].rows.length,e=Array(b),f=0;f<b;++f)e[f]={id:a[0].rows.item(f).id,value:JSON.parse(a[0].rows.item(f).value)};return w(e)})};function Qe(a,b,c){var d=Pe(a),e="UPDATE "+b+" SET value=? WHERE id=?";return a.dc(b).then(function(a){a.forEach(function(a){a=c(a);Me(d,e,[JSON.stringify(a.value),a.id])});return d.ia()})}
P.prototype.nc=function(a,b,c){var d=ye(c);return Qe(this,a,function(a){a.value[b]=d;return a})};P.prototype.addTableColumn=P.prototype.nc;P.prototype.tc=function(a,b){return Qe(this,a,function(a){delete a.value[b];return a})};P.prototype.dropTableColumn=P.prototype.tc;P.prototype.Oc=function(a,b,c){return Qe(this,a,function(a){a.value[c]=a.value[b];delete a.value[b];return a})};P.prototype.renameTableColumn=P.prototype.Oc;P.prototype.tb=function(a){var b={},c;for(c in a)b[c]=ye(a[c]);return qb(b)};
P.prototype.createRow=P.prototype.tb;P.prototype.Dc=g("Pa");P.prototype.getVersion=P.prototype.Dc;function Re(a){Me(a,'SELECT tbl_name FROM sqlite_master WHERE type="table"',[],function(a){for(var c=Array(a.rows.length),d=0;d<c.length;++d)c[d]=a.rows.item(d).tbl_name;return c})}
P.prototype.dump=function(){var a=x(),b=Pe(this);Re(b);var c={};b.ia().then(function(b){b=b[0].filter(function(a){return"__lf_ver"!=a&&"__WebKitDatabaseInfoTable__"!=a}).map(function(a){return this.dc(a).then(function(b){c[a]=b})},this);cb(b).then(function(){a.resolve(c)})}.bind(this));return a.ha};P.prototype.dump=P.prototype.dump;function Se(a,b,c){this.g=a;this.j=b;this.wg=c||4194304}function Te(a){return new $c(a.g,D())}m=Se.prototype;m.Fa=function(a){if(null==window.openDatabase)throw new E(353);var b=a||function(){return w()};return new v(function(a,d){try{var e=window.openDatabase(this.j.name(),"",this.j.name(),this.wg);if(null!=e)this.l=e,Ue(this,b).then(a,d);else throw new E(354);}catch(f){d(f)}},this)};
function Ue(a,b){var c=x(),d=new Ne(a.l,Te(a),1);Me(d,"CREATE TABLE IF NOT EXISTS __lf_ver(id INTEGER PRIMARY KEY, v INTEGER)",[]);Me(d,"SELECT v FROM __lf_ver WHERE id = 0",[]);d.ia().then(function(a){var d=0;a[1].rows.length&&(d=a[1].rows.item(0).v);d<this.j.version()?this.de(b,d).then(c.resolve.bind(c)):d>this.j.version()?c.reject(new E(108)):c.resolve()}.bind(a));return c.ha}m.Cb=function(a,b){if(null!=this.l)return new Ne(this.l,b,a);throw new E(2);};m.close=aa();
m.Bc=function(){throw new E(512);};m.subscribe=function(){throw new E(355);};m.Ic=function(){throw new E(355);};m.de=function(a,b){var c=x();Ve(this).then(function(){a(new P(this.g,b,this.l)).then(function(){return this.le()}.bind(this)).then(c.resolve.bind(c))}.bind(this),c.reject.bind(c));return c.ha};
function Ve(a){var b=a.j.ra(),c=new Ne(a.l,Te(a),1),d=new Ne(a.l,Te(a),1);Me(c,"INSERT OR REPLACE INTO __lf_ver VALUES (0, ?)",[a.j.version()]);Re(c);return c.ia().then(function(a){function c(a,b){Me(d,"INSERT INTO "+a+"(id, value) VALUES(?, ?)",[-1,JSON.stringify(ob(new tb(new sb(b))))])}var h=a[1];h.filter(function(a){return-1!=a.indexOf("__d__")}).forEach(function(a){Me(d,"DROP TABLE "+a,[])});var k=[],n=[],B=[];b.map(function(a){-1==h.indexOf(a.getName())&&k.push(a.getName());a.zb&&(a.xa().forEach(function(a){a=
Oe(a.m());k.push(a);n.push(a)}),a=Oe(Ge(a)),k.push(a),B.push(a))});k.forEach(function(a){Me(d,"CREATE TABLE "+a+"(id INTEGER PRIMARY KEY, value TEXT)",[])});n.forEach(function(a){c(a,"btree")});B.forEach(function(a){c(a,"rowid")});return d.ia()})}
m.le=function(){var a=0,b=x(),c=function(b){var c=new Ne(this.l,Te(this),0);Me(c,"SELECT MAX(id) FROM "+b,[]);return c.ia().then(function(b){b=b[0].rows.item(0)[0];a=Math.max(b,a)})}.bind(this),d=this.j.ra().map(function(a){return c(a.getName())});cb(d).then(function(){b.resolve(a)},function(a){b.reject(a)});return b.ha};function We(a){this.o=A();this.Zb=A();a.ra().forEach(function(a){this.Zb.set(a.getName(),D())},this)}m=We.prototype;m.set=function(a,b){this.o.set(b.id(),b);this.Zb.get(a).add(b.id())};m.Vb=function(a,b){var c=this.Zb.get(a);b.forEach(function(a){this.o.set(a.id(),a);c.add(a.id())},this)};m.get=function(a){return this.o.get(a)||null};function Xe(a,b){return b.map(function(a){return this.get(a)},a)}
m.$a=function(a,b,c){var d=[],e=Math.min(b,c),f=Math.max(b,c);a=this.Zb.get(a);if(a.size<f-e)a.forEach(function(a){a>=e&&a<=f&&(a=this.o.get(a),d.push(a))},this);else for(b=e;b<=f;++b)a.has(b)&&(c=this.o.get(b),d.push(c));return d};m.remove=function(a,b){this.o.delete(b);this.Zb.get(a).delete(b)};m.zc=function(a){return null!=a?this.Zb.get(a).size:this.o.size};m.clear=function(){this.o.clear();this.Zb.clear()};function Ye(a,b,c){var d=0,e=a.length;for(c=c||Ze;d<e;){var f=d+e>>1;0>c(a[f],b)?d=f+1:e=f}return d==e&&a[d]==b?d:~d}function Ze(a,b){return a-b}function $e(a,b,c){c=Ye(a,b,c);return 0>c?(a.splice(-(c+1),0,b),!0):!1};function af(a,b,c,d){a=b?a.reverse():a;if(null==c&&null==d)return a;c=Math.min(q(c)?c:a.length,a.length);if(0==c)return[];d=Math.min(d||0,a.length);return a.slice(d,d+c)};function bf(){this.oa=0}bf.prototype.add=function(a,b){this.oa+=b};bf.prototype.remove=function(a,b){this.oa-=b};bf.prototype.clear=function(){this.oa=0};function cf(a,b){a.clear();b.forEach(function(a){this.oa+=a.oa},a)};function df(a,b,c,d){this.w=a;this.V=b;this.re=c;this.ob=new bf;if(d){a=511;a*=a*a;if(d.length>=a)throw new E(6,a);d=ef(this,d);this.qa=d=ff(d)}else this.clear()}var gf=[];m=df.prototype;m.getName=g("w");m.toString=function(){return this.qa.toString()};m.add=function(a,b){this.qa=this.qa.xb(a,b)};m.set=function(a,b){this.qa=this.qa.xb(a,b,!0)};m.remove=function(a,b){this.qa=this.qa.remove(a,b)};m.get=function(a){return this.qa.get(a)};
m.cd=function(a){if(null==a)return this.Oa().oa;if(a instanceof ed){if(gd(a))return this.Oa().oa;if(kd(a))return this.get(a.c).length}return this.$a([a]).length};m.Oa=g("ob");m.yc=function(a,b,c,d){c=Array(a);this.qa.fill({offset:b?this.ob.oa-a-d:d,count:a,oe:0},c);return b?c.reverse():c};
m.$a=function(a,b,c,d){var e=hf(this.qa).b[0];if(!q(e)||0==c)return gf;b=b||!1;c=null!=c?Math.min(c,this.ob.oa):this.ob.oa;d=d||0;var f=Math.min(Math.max(this.ob.oa-d,0),c);if(0==f)return gf;if(!q(a)||1==a.length&&a[0]instanceof ed&&gd(a[0]))return this.yc(f,b,c,d);a=this.V.nf(a);var h=Array(b?this.ob.oa:f),k={count:0,X:h.length,reverse:b,N:d};a.forEach(function(a){for(var b=this.V.ud(a),b=this.V.Td(a)?e:b[0],b=jf(this.qa,b),c=k.count,d=0;null!=b&&k.count<k.X;)b.$a(a,k,h),k.count!=c?(d=0,c=k.count):
d++,b=2==d?null:b.next()},this);h.splice(k.count,f-k.count);return b?af(h,b,c,d):h};m.clear=function(){this.qa=kf(this);this.ob.clear()};m.Ma=function(a){return this.qa.Ma(a)};m.min=function(){return this.Hc(this.V.min.bind(this.V))};m.max=function(){return this.Hc(this.V.max.bind(this.V))};m.Hc=function(a){var b=hf(this.qa),c=mf(this.qa);if(0==b.b.length&&0==c.b.length)return null;var d=b.b[0],b=b.B[0],e=c.b[c.b.length-1],c=c.B[c.b.length-1];return 1==a(d,e)?[d,this.re?[b]:b]:[e,this.re?[c]:c]};
m.Ha=g("re");m.qc=g("V");m.Xd=function(a,b){return null!=a?-1==this.V.compare(a,b):!1};m.Qa=function(a,b){return null!=a?0==this.V.compare(a,b):!1};m.Ja=function(){for(var a=[],b=hf(this.qa);b;)a.push(new y(b.pa,[b.b,b.B])),b=b.za;return a};function nf(a,b,c,d){a=new df(b,a,c);d=of(d,a);a.qa=d;return a}function pf(a,b){this.pa=a;this.F=b;this.ib=0;this.za=this.Ab=this.C=null;this.b=[];this.B=[];this.h=[]}function kf(a){return new pf(nb++,a)}function Q(a){return 0==a.ib}m=pf.prototype;m.next=g("za");
function qf(a){function b(a){return null!=a?a.pa.toString():"_"}var c=a.pa+"["+a.b.join("|")+"]",d=a.h.map(function(a){return a.pa}).join("|"),e=a.B.join("/"),f=b(a.Ab)+"{",f=Q(a)?f+e:f+d,f=f+"}"+b(a.C);a.za&&(a=qf(a.za),c=c+"  "+a[0],f=f+"  "+a[1]);return[c,f]}m.toString=function(){var a="",b=qf(this),a=a+(b[0]+"\n"+b[1]+"\n");this.h.length&&(a+=this.h[0].toString());return a};function hf(a){return Q(a)?a:hf(a.h[0])}function mf(a){return Q(a)?a:mf(a.h[a.h.length-1])}
function rf(a,b){b&&(b.Ab=a);a&&(a.za=b)}function ef(a,b){for(var c=b.length,d=0,e=kf(a),f=e;0<c;){var h=768<=c?511:257<=c&&511>=c?c:257,k=b.slice(d,d+h);e.b=k.map(function(a){return a.key});e.B=k.map(function(a){return a.value});d+=h;c-=h;0<c&&(h=kf(e.F),rf(e,h),e=h)}return f}function sf(a){var b=a[0],c=kf(b.F);c.ib=b.ib+1;c.h=a;for(b=0;b<a.length;++b)a[b].C=c,0<b&&c.b.push(a[b].b[0]);return c}
function ff(a){var b=a,c=[];do c.push(b),b=b.za;while(b);if(512>=c.length)b=sf(c);else{var d=c.length,e=0,b=kf(a.F);for(b.ib=a.ib+2;0<d;){a=768<=d?511:257<=d&&511>=d?d:257;var f=c.slice(e,e+a),h=sf(f);h.C=b;b.h.length&&(b.b.push(f[0].b[0]),rf(b.h[b.h.length-1],h));b.h.push(h);e+=a;d-=a}}return b}m.get=function(a){var b=tf(this,a);if(Q(this)){var c=gf;this.F.Qa(this.b[b],a)&&(c=c.concat(this.B[b]));return c}b=this.F.Qa(this.b[b],a)?b+1:b;return this.h[b].get(a)};
m.Ma=function(a){var b=tf(this,a);return this.F.Qa(this.b[b],a)?!0:Q(this)?!1:this.h[b].Ma(a)};m.remove=function(a,b){uf(this,a,-1,b);if(null==this.C){var c=this;1==this.h.length&&(c=this.h[0],c.C=null);return c}return this};function vf(a){return Q(a)?a.b[0]:vf(a.h[0])}function wf(a){a.b=[];for(var b=1;b<a.h.length;++b)a.b.push(vf(a.h[b]))}
function uf(a,b,c,d){var e=tf(a,b),f=Q(a);if(!f){var h=a.F.Qa(a.b[e],b)?e+1:e;if(uf(a.h[h],b,h,d))wf(a);else return!1}else if(!a.F.Qa(a.b[e],b))return!1;if(a.b.length>e&&a.F.Qa(a.b[e],b)){if(q(d)&&!a.F.Ha()&&f&&(h=a.B[e],d=Ye(h,d,void 0),0>d?d=!1:(h.splice(d,1),d=!0),d&&a.F.Oa().remove(b,1),a.B[e].length))return!1;a.b.splice(e,1);f&&(f=a.F.Ha()?1:a.B[e].length,a.B.splice(e,1),a.F.Oa().remove(b,f))}if(256>a.b.length&&null!=a.C){a:{b=null;if(a.za&&256<a.za.b.length)b=a.za,e=d=0,f=a.b.length+1;else if(a.Ab&&
256<a.Ab.b.length)b=a.Ab,d=a.Ab.b.length-1,e=Q(a)?d:d+1,f=0;else{b=!1;break a}a.b.splice(f,0,b.b[d]);b.b.splice(d,1);d=Q(a)?a.B:a.h;h=null;Q(a)?h=b.B:(h=b.h,h[e].C=a);d.splice(f,0,h[e]);h.splice(e,1);Q(b)||(wf(b),wf(a));b=!0}b||xf(a,c)}return!0}
function xf(a,b){var c,d,e;a.za&&511>a.za.b.length?(c=a.za,e=d=0):a.Ab&&(c=a.Ab,d=c.b.length,e=Q(c)?c.B.length:c.h.length);d=[d,0].concat(a.b);Array.prototype.splice.apply(c.b,d);d=null;Q(a)?d=a.B:(d=a.h,d.forEach(function(a){a.C=c}));d=[e,0].concat(d);Array.prototype.splice.apply(Q(c)?c.B:c.h,d);rf(a.Ab,a.za);Q(c)||wf(c);-1!=b&&(a.C.b.splice(b,1),a.C.h.splice(b,1))}
m.xb=function(a,b,c){var d=tf(this,a);if(Q(this)){if(this.F.Qa(this.b[d],a)){if(c)this.F.Oa().remove(a,this.F.Ha()?1:this.B[d].length),this.B[d]=this.F.Ha()?b:[b];else{if(this.F.Ha())throw new E(201);if(!$e(this.B[d],b))throw new E(109);}this.F.Oa().add(a,1);return this}this.b.splice(d,0,a);this.B.splice(d,0,this.F.Ha()?b:[b]);this.F.Oa().add(a,1);512==this.b.length?(d=kf(this.F),a=kf(this.F),a.ib=1,a.b=[this.b[256]],a.h=[this,d],a.C=this.C,this.C=a,d.b=this.b.splice(256),d.B=this.B.splice(256),d.C=
a,rf(d,this.za),rf(this,d),d=a):d=this;return d}d=this.F.Qa(this.b[d],a)?d+1:d;a=this.h[d].xb(a,b,c);Q(a)||1!=a.b.length||(this.b.splice(d,0,a.b[0]),a.h[1].C=this,a.h[0].C=this,this.h.splice(d,1,a.h[1]),this.h.splice(d,0,a.h[0]));return 512==this.b.length?yf(this):this};function yf(a){var b=kf(a.F),c=kf(a.F);b.C=a.C;b.ib=a.ib+1;b.b=[a.b[256]];b.h=[a,c];a.b.splice(256,1);c.C=b;c.ib=a.ib;c.b=a.b.splice(256);c.h=a.h.splice(257);c.h.forEach(function(a){a.C=c});a.C=b;rf(c,a.za);rf(a,c);return b}
function tf(a,b){for(var c=0,d=a.b.length;c<d;){var e=c+d>>1;a.F.Xd(a.b[e],b)?c=e+1:d=e}return c}function jf(a,b){if(!Q(a)){var c=tf(a,b);a.F.Qa(a.b[c],b)&&c++;return jf(a.h[c],b)}return a}
m.$a=function(a,b,c){function d(a){return a[0]?a[1]?0:1:-1}var e=this.F.qc(),f=0,h=this.b.length-1,k=this.b,n=d(e.sb(k[f],a)),B=d(e.sb(k[h],a));if(1!=n&&(-1!=n||-1!=B)){var ja=function(a,b){var c=a+b>>1;return c==a?c+1:c},qa=function(b,c,f){if(b>=c)return 0==f?c:-1;var h=d(e.sb(k[b],a));if(0==h)return b;if(1==h)return-1;h=ja(b,c);if(h==c)return 0==f?c:-1;var n=d(e.sb(k[h],a));return 0==n?qa(b,h,n):-1==n?qa(h+1,c,f):qa(b+1,h,n)},$a=function(b,c){if(b>=c)return b;var f=d(e.sb(k[c],a));if(0==f)return c;
if(-1==f)return b;f=ja(b,c);if(f==c)return b;var h=d(e.sb(k[f],a));return 0==h?$a(f,c):1==h?$a(b,f-1):-1};0!=n&&(f=qa(f+1,h,B));-1!=f&&(h=$a(f,h),-1!=h&&h>=f&&zf(this,b,c,f,h+1))}};function zf(a,b,c,d,e){for(;d<e&&(b.reverse||!(b.count>=b.X));++d)if(a.F.Ha())!b.reverse&&b.N?b.N--:c[b.count++]=a.B[d];else for(var f=0;f<a.B[d].length&&b.count<c.length;++f)!b.reverse&&b.N?b.N--:c[b.count++]=a.B[d][f]}
m.fill=function(a,b){if(Q(this))for(var c=0;c<this.B.length&&0<a.count;++c)if(0<a.offset){if(a.offset-=this.F.Ha()?1:this.B[c].length,0>a.offset)for(var d=this.B[c].length+a.offset;d<this.B[c].length&&0<a.count;++d)b[a.oe++]=this.B[c][d],a.count--}else if(this.F.Ha())b[a.oe++]=this.B[c],a.count--;else for(d=0;d<this.B[c].length&&0<a.count;++d)b[a.oe++]=this.B[c][d],a.count--;else for(c=0;c<this.h.length&&0<a.count;++c)this.h[c].fill(a,b)};
function of(a,b){for(var c=b.Oa(),d=a.map(function(a){var d=new pf(a.id(),b);d.b=a.s[0];d.B=a.s[1];d.b.forEach(function(a,e){c.add(a,b.Ha()?1:d.B[e].length)});return d}),e=0;e<d.length-1;++e)rf(d[e],d[e+1]);return 1<d.length?ff(d[0]):d[0]};function Af(a){this.bd=0==a?Bf:Cf;this.Zd=0==a?function(a){return null!=a?a.reverse():null}:function(a){return a||null};this.ee=0==a?Df:Ef}t(Af,wc);function Cf(a,b){return a>b?1:a<b?-1:0}function Bf(a,b){return Cf(b,a)}function Ef(a,b){return ld(a,b)}function Df(a,b){return ld(b,a)}m=Af.prototype;m.sb=function(a,b){var c=this.Zd(b),d=[c.c==F,c.A==F];if(!d[0]){var e=this.bd(a,c.c);d[0]=c.da?1==e:-1!=e}d[1]||(e=this.bd(a,c.A),d[1]=c.ma?-1==e:1!=e);return d};
m.compare=function(a,b){return this.bd(a,b)};m.min=function(a,b){return a<b?1:a==b?0:-1};m.max=function(a,b){return a>b?1:a==b?0:-1};m.Sd=function(a,b){var c=this.sb(a,b);return c[0]&&c[1]};m.nf=function(a){return a.filter(function(a){return null!==a}).sort(function(a,c){return this.ee(a,c)}.bind(this))};m.Td=function(a){return this.Zd(a).c==F};m.ud=function(a){a=this.Zd(a);return[a.c,a.A]};m.toString=function(){return this.bd==Bf?"SimpleComparator_DESC":"SimpleComparator_ASC"};function Ff(a){this.La=a.map(function(a){return new Af(a)})}t(Ff,wc);function Gf(a,b,c,d){for(var e=0,f=0;f<a.La.length&&0==e;++f)e=d(a.La[f],b[f],c[f]);return e}m=Ff.prototype;m.compare=function(a,b){return Gf(this,a,b,function(a,b,e){return a.compare(b,e)})};m.min=function(a,b){return Gf(this,a,b,function(a,b,e){return a.min(b,e)})};m.max=function(a,b){return Gf(this,a,b,function(a,b,e){return a.max(b,e)})};
m.sb=function(a,b){for(var c=[!0,!0],d=0;d<this.La.length&&(c[0]||c[1]);++d){var e=this.La[d].sb(a[d],b[d]);c[0]=c[0]&&e[0];c[1]=c[1]&&e[1]}return c};m.Sd=function(a,b){for(var c=!0,d=0;d<this.La.length&&c;++d)c=this.La[d].Sd(a[d],b[d]);return c};
m.nf=function(a){var b=a.filter(function(a){return a.every(fa)});a=Array(this.La.length);for(var c=0;c<a.length;c++)a[c]=b.map(function(a){return a[c]});a.forEach(function(a,b){a.sort(function(a,c){return this.La[b].ee(a,c)}.bind(this))},this);b=Array(b.length);for(c=0;c<b.length;c++)b[c]=a.map(function(a){return a[c]});return b.sort(function(a,b){for(var c=0,h=0;h<this.La.length&&0==c;++h)c=this.La[h].ee(a[h],b[h]);return c}.bind(this))};m.Td=function(a){return this.La[0].Td(a[0])};
m.ud=function(a){var b=a.map(function(a,b){return this.La[b].ud(a)[0]},this);a=a.map(function(a,b){return this.La[b].ud(a)[1]},this);return[b,a]};function Hf(a){if(1==a.f.length)return new Af(a.f[0].kb);a=a.f.map(function(a){return a.kb});return new Ff(a)};function If(a){this.fa=a;this.jb=D();this.Qc=new bf;this.ob=new bf}m=If.prototype;m.getName=function(){return this.fa.getName()};m.add=function(a,b){null===a?(this.jb.add(b),this.Qc.add(a,1)):this.fa.add(a,b)};m.set=function(a,b){null===a?(this.jb.clear(),this.Qc.clear(),this.add(a,b)):this.fa.set(a,b)};m.remove=function(a,b){null===a?b?(this.jb.delete(b),this.Qc.remove(a,1)):(this.jb.clear(),this.Qc.clear()):this.fa.remove(a,b)};m.get=function(a){return null===a?lc(this.jb):this.fa.get(a)};
m.cd=function(a){return this.fa.cd(a)};m.Oa=function(){cf(this.ob,[this.fa.Oa(),this.Qc]);return this.ob};m.$a=function(a,b,c,d){b=this.fa.$a(a,b,c,d);return null!=a?b:b.concat(lc(this.jb))};m.clear=function(){this.jb.clear();this.fa.clear()};m.Ma=function(a){return null===a?0!=this.jb.size:this.fa.Ma(a)};m.min=function(){return this.fa.min()};m.max=function(){return this.fa.max()};m.Ja=function(){return[new y(-2,lc(this.jb))].concat(this.fa.Ja())};m.qc=function(){return this.fa.qc()};
function Jf(a,b){for(var c=-1,d=0;d<b.length;++d)if(-2==b[d].id()){c=d;break}if(-1==c)throw new E(102);var d=b[c].s,e=b.slice(0);e.splice(c,1);var c=a(e),f=new If(c);d.forEach(function(a){f.jb.add(a)});return f}m.Ha=function(){return this.fa.Ha()};function Kf(a){this.w=a;this.nb=D();this.V=new Af(1)}m=Kf.prototype;m.getName=g("w");m.add=function(a){if("number"!=typeof a)throw new E(103);this.nb.add(a)};m.set=function(a,b){this.add(a,b)};m.remove=function(a){this.nb.delete(a)};m.get=function(a){return this.Ma(a)?[a]:[]};m.min=function(){return this.Hc(this.V.min.bind(this.V))};m.max=function(){return this.Hc(this.V.max.bind(this.V))};
m.Hc=function(a){if(0==this.nb.size)return null;var b=lc(this.nb).reduce(function(b,d){return null===b||1==a(d,b)?d:b},null);return[b,[b]]};m.cd=function(){return this.nb.size};m.$a=function(a,b,c,d){var e=a||[jd()];a=lc(this.nb).filter(function(a){return e.some(function(b){return this.V.Sd(a,b)},this)},this);return af(a,b,c,d)};m.clear=function(){this.nb.clear()};m.Ma=function(a){return this.nb.has(a)};m.Ja=function(){return[new y(0,lc(this.nb))]};m.qc=g("V");
function Lf(a,b){var c=new Kf(a);b[0].s.forEach(function(a){c.add(a,a)});return c}m.Ha=l(!0);m.Oa=function(){var a=new bf;a.oa=this.nb.size;return a};function Mf(a){this.g=a;this.Ka=a.i(Sb);this.D=a.i(Ub);this.U=a.i(Tb)}Mf.prototype.Fa=function(a){var b=a.ra(),c=function(){if(0==b.length)return w();var a=b.shift();return(a.zb()?Nf(this,a):Of(this,a)).then(c)}.bind(this);return c()};function Of(a,b){var c=new $c(a.g,D([b])),c=a.Ka.Cb(0,c),d=c.H(b.getName(),b.Lb.bind(b)).get([]).then(function(a){this.U.Vb(b.getName(),a);Pf(this,b,a)}.bind(a));c.ia();return d}
function Pf(a,b,c){var d=a.D.jc.get(b.getName())||[];c.forEach(function(a){d.forEach(function(b){var c=a.Eb(b.getName());b.add(c,a.id())})})}function Nf(a,b){var c=new $c(a.g,D([b])),d=a.Ka.Cb(0,c),c=d.H(b.getName(),b.Lb).get([]).then(function(a){this.U.Vb(b.getName(),a)}.bind(a)),e=b.xa().map(function(a){return Qf(this,a,d)},a).concat(Rf(a,b,d));d.ia();return cb(e.concat(c))}
function Qf(a,b,c){c=c.H(b.m(),pb,1);var d=Hf(b);return c.get([]).then(function(a){if(1<a.length){if(Uf(b)){var c=nf.bind(void 0,d,b.m(),b.Fc);a=Jf(c,a.slice(1))}else a=nf(d,b.m(),b.Fc,a.slice(1));this.D.set(b.Rc,a)}}.bind(a))}function Rf(a,b,c){return c.H(Ge(b),pb,1).get([]).then(function(a){1<a.length&&(a=Lf(Ge(b),a.slice(1)),this.D.set(b.getName(),a))}.bind(a))};function Vf(){this.ba=A();this.jc=A()}Vf.prototype.Fa=function(a){a.ra().forEach(function(a){var c=[];this.jc.set(a.getName(),c);var d=Ge(a);if(null===this.get(d)){var e=new Kf(d);c.push(e);this.ba.set(d,e)}a.xa().forEach(function(a){var b;b=Hf(a);b=new df(a.m(),b,a.Fc);b=Uf(a)?new If(b):b;c.push(b);this.ba.set(a.m(),b)},this)},this);return w()};Vf.prototype.get=function(a){return this.ba.get(a)||null};
Vf.prototype.set=function(a,b){var c=this.jc.get(a)||null;null===c&&(c=[],this.jc.set(a,c));for(var d=null,e=0;e<c.length;e++)if(c[e].getName()==b.getName()){d=e;break}null!==d&&0<c.length?c.splice(d,1,b):c.push(b);this.ba.set(b.getName(),b)};function Wf(a){this.ic=[];q(a)&&this.add(a)}Wf.prototype.toString=function(){return this.ic.map(function(a){return a.toString()}).join(",")};Wf.prototype.Ma=function(a){return this.ic.some(function(b){return b.contains(a)})};Wf.prototype.ya=g("ic");
Wf.prototype.add=function(a){if(0!=a.length)if(a=this.ic.concat(a),1==a.length)this.ic=a;else{a.sort(ld);for(var b=[],c=a[0],d=1;d<a.length;++d)if(hd(c,a[d])){var e=a[d],f=jd();if(c.c!=F&&e.c!=F){var h=id(c.c,e.c,!0);1!=h?(f.c=c.c,f.da=0!=h?c.da:c.da&&e.da):(f.c=e.c,f.da=e.da)}c.A!=F&&e.A!=F&&(h=id(c.A,e.A,!1),-1!=h?(f.A=c.A,f.ma=0!=h?c.ma:c.ma&&e.ma):(f.A=e.A,f.ma=e.ma));c=f}else b.push(c),c=a[d];b.push(c);this.ic=b}};
function Xf(a,b){var c=[];a.ya().map(function(a){return b.ya().map(function(b){var c;if(hd(a,b)){c=jd();var h=id(a.c,b.c,!0),h=0==h?a.da?a:b:-1!=h?a:b;c.c=h.c;c.da=h.da;a.A==F||b.A==F?b=a.A==F?b:a:(h=id(a.A,b.A,!1),b=0==h?a.ma?a:b:-1==h?a:b);c.A=b.A;c.ma=b.ma}else c=null;return c})}).forEach(function(a){c=c.concat(a)});return new Wf(c.filter(function(a){return null!==a}))};function Yf(a,b){var c=[],d=null,e=null;Md(a,function(a){var h=b(a);null==a.getParent()?e=h:M(d,h);var k=a.getParent();null!==k&&L(k).length==L(d).length&&(k=c.indexOf(d),-1!=k&&c.splice(k,1));1<L(a).length&&c.push(h);d=null===a.h?c[c.length-1]:h});return e}function Zf(a){return $f(a,function(a){return null===a.h})}
function ag(a){var b=a.getParent(),c=0;null!==b&&(c=L(b).indexOf(a),b.removeChild(a));var d=L(a).slice();d.forEach(function(d,f){a.removeChild(d);null===b||Jd(b,d,c+f)});return{parent:b,children:d}}function bg(a,b){L(a).slice().forEach(function(c){a.removeChild(c);M(b,c)});M(a,b)}function cg(a){var b=Id(a,0);ag(a);bg(b,a);return b}
function dg(a,b,c){var d=Id(a,0),e=L(d).slice();if(!e.some(function(a){return b(a)}))return a;ag(a);e.forEach(function(e,h){if(b(e)){var k=c(a);Kd(d,h);M(k,e);Jd(d,k,h)}});return d}function eg(a,b,c,d){var e=a.getParent();null!==e&&(a=L(e).indexOf(a),Kd(e,a),Jd(e,c,a));L(b).slice().forEach(function(a){b.removeChild(a);M(d,a)});return c}function $f(a,b,c){function d(a){b(a)&&e.push(a);null!=c&&c(a)||L(a).forEach(d)}var e=[];d(a);return e}
function fg(a,b){var c=b||function(a){return a.toString()+"\n"},d="";Md(a,function(a){for(var b=0;b<Hd(a);b++)d+="-";d+=c(a)});return d};function gg(a){Nd.call(this);this.Rb=a;this.ab=!1}t(gg,Nd);m=gg.prototype;m.Jb=function(){return Yf(this,function(a){if(a instanceof gg){var b=new gg(a.Rb);b.ab=a.ab;a=a.W();b.pa=a;return b}return a.Jb()})};m.gb=function(a){var b=a||[];Md(this,function(a){a!=this&&a.gb(b)}.bind(this));a=D(b);return lc(a)};m.wd=function(a){this.ab!=a&&(this.ab=a,this.Rb="and"==this.Rb?"or":"and",L(this).forEach(function(b){return b.wd(a)}))};
m.eval=function(a){var b=L(this).map(function(b){return b.eval(a)});return hg(this,b)};function hg(a,b){return"and"==a.Rb?rd(b):sd(b)}m.toString=function(){return"combined_pred_"+this.Rb.toString()};function ig(a,b,c){Nd.call(this);this.ga=a;this.la=b;this.G=c;this.$d=null;a=zd.Ac();this.uc=Fd(a,this.ga.I(),this.G);this.bg=a.Re.get(this.ga.I())||null}t(ig,Nd);m=ig.prototype;m.Jb=function(){var a=new ig(this.ga,this.la,this.G),b=this.W();a.pa=b;return a};m.gb=function(a){return null!=a?(a.push(this.ga),a.push(this.la),a):[this.ga,this.la]};
m.reverse=function(){var a=this.G;switch(this.G){case "gt":a="lt";break;case "lt":a="gt";break;case "gte":a="lte";break;case "lte":a="gte"}return new ig(this.la,this.ga,a)};m.eval=function(a){var b=a.entries.filter(function(a){var b=I(a,this.ga);a=I(a,this.la);return this.uc(b,a)},this);return new G(b,H(a))};m.toString=function(){return"join_pred("+this.ga.m()+" "+this.G+" "+this.la.m()+")"};
function jg(a,b,c){var d=null,e=null;-1!=H(b).indexOf(J(a.ga.H()))?(d=b,e=c):(d=c,e=b);if(d.entries.length>e.entries.length){a:{b=a.ga;a.ga=a.la;a.la=b;b=a.G;switch(a.G){case "gt":b="lt";break;case "lt":b="gt";break;case "gte":b="lte";break;case "lte":b="gte";break;default:break a}a.G=b;a.uc=Fd(zd.Ac(),a.ga.I(),a.G)}return[e,d]}return[d,e]}function kg(a){var b={};a.gb().forEach(function(a){b[a.getName()]=null});return b}
function lg(a,b,c){null===a.$d&&(a.$d=kg(a.la.H()));var d=new ud(new y(-1,a.$d),!1);return xd(b,c,d,[J(a.la.H())])}
function mg(a,b,c,d){var e=[b,c];d||(e=jg(a,b,c));b=e[0];c=e[1];var e=b,f=c,h=a.ga,k=a.la;d&&(e=c,f=b,h=a.la,k=a.ga);var n=new Ic,B=[];e.entries.forEach(function(a){var b=String(I(a,h));n.set(b,a)});var ja=H(e),qa=H(f);f.entries.forEach(function(a){var b=I(a,k),c=String(b);null!==b&&n.has(c)?n.get(c).forEach(function(b){b=xd(a,qa,b,ja);B.push(b)}):d&&B.push(lg(this,a,qa))}.bind(a));a=H(b).concat(H(c));return new G(B,a)}
function ng(a,b,c,d,e){function f(a,b){var c=new ud(b,1<ja.length),c=xd(a,qa,c,ja);B.push(c)}var h=d.Vf.H(),k=b,n=c;-1!=H(b).indexOf(J(h))&&(k=c,n=b);var B=[],ja=H(n),qa=H(k);k.entries.forEach(function(a){var b=this.bg(I(a,d.hg)),b=d.index.get(b);0!=b.length&&(d.index.Ha()?f(a,e.get(b[0])):Xe(e,b).forEach(f.bind(null,a)))},a);a=H(k).concat(H(n));return new G(B,a)};function og(a,b,c){return null===b?new Pd(a,b,c):q(b.m)?new ig(a,b,c):new Pd(a,b,c)};var pg={};r("lf.schema.DataStoreType",pg);pg.INDEXED_DB=0;pg.MEMORY=1;pg.LOCAL_STORAGE=2;pg.FIREBASE=3;pg.WEB_SQL=4;pg.OBSERVABLE_STORE=5;function qg(a,b,c,d){this.Rc=a;this.name=b;this.Fc=c;this.f=d}qg.prototype.m=function(){return this.Rc+"."+this.name};function Uf(a){return a.f.some(function(a){return a.ca.Ec()})}function R(a,b,c,d){this.w=a;this.ka=c;this.K=b;this.rd=d;this.eb=null}r("lf.schema.Table",R);R.prototype.getName=g("w");R.prototype.getName=R.prototype.getName;R.prototype.Za=g("eb");
function J(a){return a.eb||a.w}R.prototype.oc=function(a){var b=new this.constructor(this.w);b.eb=a;b.sg=this.sg;return b};R.prototype.as=R.prototype.oc;R.prototype.createRow=R.prototype.tb;R.prototype.deserializeRow=R.prototype.Lb;R.prototype.xa=g("ka");R.prototype.getIndices=R.prototype.xa;R.prototype.gb=g("K");R.prototype.getColumns=R.prototype.gb;R.prototype.getConstraint=R.prototype.Db;R.prototype.zb=g("rd");R.prototype.persistentIndex=R.prototype.zb;function Ge(a){return a.w+".#"};function S(a,b){this.child=a;this.Ib=b;this.eb=null}m=S.prototype;m.getName=function(){return this.Ib+"("+this.child.getName()+")"};m.m=function(){return this.Ib+"("+this.child.m()+")"};m.H=function(){return this.child.H()};m.toString=function(){return this.m()};m.I=function(){return this.child.I()};m.Za=g("eb");m.xa=function(){return[]};m.wa=l(null);m.Ec=l(!1);m.oc=function(a){this.eb=a;return this};S.prototype.as=S.prototype.oc;
function rg(a){for(var b=[a];a instanceof S;)b.push(a.child),a=a.child;return b}function sg(a){this.eb=a||null;this.S=new R("#UnknownTable",[],[],!1)}m=sg.prototype;m.getName=l("*");m.m=function(){return this.getName()};m.toString=function(){return this.m()};m.H=g("S");m.I=l(4);m.Za=g("eb");m.xa=function(){return[]};m.wa=l(null);m.Ec=l(!1);r("lf.fn.avg",function(a){return new S(a,"AVG")});function tg(a){return new S(a||new sg,"COUNT")}r("lf.fn.count",tg);function ug(a){return new S(a,"DISTINCT")}r("lf.fn.distinct",ug);r("lf.fn.max",function(a){return new S(a,"MAX")});r("lf.fn.min",function(a){return new S(a,"MIN")});r("lf.fn.stddev",function(a){return new S(a,"STDDEV")});r("lf.fn.sum",function(a){return new S(a,"SUM")});r("lf.fn.geomean",function(a){return new S(a,"GEOMEAN")});function T(a,b){K.call(this);this.Nf=b}t(T,K);T.prototype.exec=function(a,b){switch(this.Nf){case 1:return vg(this,a,b);case 0:return wg(this,a,b);default:return xg(this,a,b)}};T.prototype.toString=l("dummy_node");T.prototype.Sc=function(){return this.toString()};function xg(a,b,c){return new v(function(a){a(this.ea(b,[],c))}.bind(a))}function vg(a,b,c){return Id(a,0).exec(b,c).then(function(a){return this.ea(b,a,c)}.bind(a))}
function wg(a,b,c){var d=L(a).map(function(a){return a.exec(b,c)});return cb(d).then(function(a){var d=[];a.forEach(function(a){for(var b=0;b<a.length;++b)d.push(a[b])});return this.ea(b,d,c)}.bind(a))};function yg(a){T.call(this,0,1);this.xe=a}t(yg,T);yg.prototype.toString=function(){return"aggregation("+this.xe.map(function(a){return a.m()}).toString()+")"};yg.prototype.ea=function(a,b){b.forEach(function(a){zg(new Ag(a,this.xe))},this);return b};function Ag(a,b){this.Ia=a;this.K=b}
function zg(a){a.K.forEach(function(a){a=rg(a).reverse();for(var c=1;c<a.length;c++){var d=a[c],e=rg(d).slice(-1)[0],f=d.child instanceof S?od(this.Ia,d.child):this.Ia;if(null!==f.Ya&&f.Ya.has(d.m()))break;f=Bg(d.Ib,f,e);e=this.Ia;null===e.Ya&&(e.Ya=A());e.Ya.set(d.m(),f)}},a)}
function Bg(a,b,c){var d=null;switch(a){case "MIN":d=Cg(b,c,function(a,b){return b<a?b:a});break;case "MAX":d=Cg(b,c,function(a,b){return b>a?b:a});break;case "DISTINCT":d=Dg(b,c);break;case "COUNT":d=Eg(b,c);break;case "SUM":d=Fg(b,c);break;case "AVG":a=Eg(b,c);0<a&&(d=Fg(b,c)/a);break;case "GEOMEAN":d=Gg(b,c);break;default:d=Hg(b,c)}return d}function Cg(a,b,c){return a.entries.reduce(function(a,e){var f=I(e,b);return null===f?a:null===a?f:c(a,f)},null)}
function Eg(a,b){return b instanceof sg?a.entries.length:a.entries.reduce(function(a,d){return a+(ea(I(d,b))?0:1)},0)}function Fg(a,b){return Cg(a,b,function(a,b){return b+a})}function Hg(a,b){var c=[];a.entries.forEach(function(a){a=I(a,b);null===a||c.push(a)});return 0==c.length?null:yb.apply(null,c)}function Gg(a,b){var c=0,d=a.entries.reduce(function(a,d){var h=I(d,b);if(0==h||null===h)return a;c++;return a+Math.log(h)},0);return 0==c?null:Math.pow(Math.E,d/c)}
function Dg(a,b){var c=A();a.entries.forEach(function(a){var e=I(a,b);c.set(e,a)});return new G(C(c),H(a))};function Ig(a,b){this.Ca=a;this.aa=b}Ig.prototype.hb=g("Ca");Ig.prototype.$=g("aa");function Jg(){K.call(this)}t(Jg,K);function Kg(a,b){K.call(this);this.table=a;this.values=b}t(Kg,Jg);function Lg(a,b){Kg.call(this,a,b)}t(Lg,Kg);function Mg(a){K.call(this);this.table=a}t(Mg,Jg);Mg.prototype.toString=function(){return"delete("+this.table.getName()+")"};function Ng(a,b){K.call(this);this.table=a;this.se=b}t(Ng,Jg);
Ng.prototype.toString=function(){var a=[];this.se&&(a=this.se.map(function(a){return a.O.getName()},this));return"update("+this.table.getName()+", ["+a.join(",")+"])"};function Og(a){K.call(this);this.J=a}t(Og,Jg);Og.prototype.toString=function(){return"select("+this.J.toString()+")"};function Pg(a){K.call(this);this.table=a}t(Pg,Jg);Pg.prototype.toString=function(){var a="table_access("+this.table.getName();null===this.table.Za()||(a+=" as "+this.table.Za());return a+")"};
function Qg(){K.call(this)}t(Qg,Jg);Qg.prototype.toString=l("cross_product");function Rg(a,b){K.call(this);this.f=a;this.Nb=b}t(Rg,Jg);Rg.prototype.toString=function(){var a="project("+this.f.toString();if(null!==this.Nb)var b=this.Nb.map(function(a){return a.m()}).join(", "),a=a+(", groupBy("+b+")");return a+")"};function Sg(a){K.call(this);this.M=a}t(Sg,Jg);Sg.prototype.toString=function(){return"order_by("+Yd(this.M)+")"};function Tg(a){K.call(this);this.f=a}t(Tg,Jg);
Tg.prototype.toString=function(){return"aggregation("+this.f.toString()+")"};function Ug(a){K.call(this);this.f=a}t(Ug,Jg);Ug.prototype.toString=function(){return"group_by("+this.f.toString()+")"};function Vg(a){K.call(this);this.X=a}t(Vg,Jg);Vg.prototype.toString=function(){return"limit("+this.X+")"};function Wg(a){K.call(this);this.N=a}t(Wg,Jg);Wg.prototype.toString=function(){return"skip("+this.N+")"};function Xg(a,b){K.call(this);this.J=a;this.Pb=b}t(Xg,Jg);
Xg.prototype.toString=function(){return"join(type: "+(this.Pb?"outer":"inner")+", "+this.J.toString()+")"};function Yg(){};function Zg(){}t(Zg,Yg);Zg.prototype.mb=function(a){this.Z=a;this.Wa(this.Z);return this.Z};Zg.prototype.Wa=function(a){if(a instanceof Og){var b=$g(this,a.J),b=ah(this,b);eg(a,a,b[0],b[1]);a==this.Z&&(this.Z=b[0]);a=b[0]}L(a).forEach(function(a){this.Wa(a)},this)};function $g(a,b){if(0==L(b).length||"and"!=b.Rb)return[b];var c=L(b).slice().map(function(a){b.removeChild(a);return $g(this,a)},a);return Ca(c)}
function ah(a,b){var c=null,d=null;b.map(function(a,b){var h=new Og(a);0==b?c=h:M(d,h);d=h},a);return[c,d]};function bh(){}t(bh,Yg);bh.prototype.mb=function(a,b){if(3>b.c.length)return a;this.Z=a;this.Wa(this.Z);return this.Z};bh.prototype.Wa=function(a){if(a instanceof Qg)for(;2<L(a).length;){for(var b=new Qg,c=0;2>c;c++){var d=Kd(a,0);M(b,d)}Jd(a,b,0)}L(a).forEach(function(a){this.Wa(a)},this)};function ch(){T.call(this,0,0)}t(ch,T);ch.prototype.toString=l("cross_product");ch.prototype.ea=function(a,b){for(var c=b[0],d=b[1],e=[],f=H(c),h=H(d),k=0;k<c.entries.length;k++)for(var n=0;n<d.entries.length;n++){var B=xd(c.entries[k],f,d.entries[n],h);e.push(B)}c=H(c).concat(H(d));return[new G(e,c)]};function dh(a,b){ae.call(this,a,b);this.Da=a.i(Wb);this.Fb=a.i(Yb)}t(dh,ae);dh.prototype.getPriority=l(2);dh.prototype.ce=function(a){0==this.I()?eh(this,a):this.Pc()};function eh(a,b){a.td.forEach(function(a,d){a instanceof Xd&&de(this.Fb,a,b[d])},a)}dh.prototype.Pc=function(){var a=fe(this.Fb,this.$());0!=a.length&&(a=new ce(this.global,a),ge(this.Da,a))};function fh(a){Sd.call(this,a)}t(fh,Sd);fh.prototype.$=function(){var a=D();a.add(this.c);gh(this,this.c.getName(),a);return a};function gh(a,b,c){var d=hh(a.ca.info(),b,1);hh(a.ca.info(),b).forEach(c.add.bind(c));d.forEach(function(a){gh(this,a.getName(),c)},a)}fh.prototype.clone=function(){var a=new fh(this.ca);Vd(a,this);a.c=this.c;return a};fh.prototype.bind=function(a){fh.Hb.bind.call(this,a);Wd(this,a);return this};function ih(a){Sd.call(this,a)}t(ih,Sd);ih.prototype.$=function(){var a=D();a.add(this.Ga);var b=this.ca.info();jh(this.Ga.getName(),b.Ze).forEach(a.add.bind(a));this.$b&&hh(b,this.Ga.getName()).forEach(a.add.bind(a));return a};ih.prototype.clone=function(){var a=new ih(this.ca);Vd(a,this);a.Ga=this.Ga;this.values&&(a.values=this.values instanceof yd?this.values:this.values.slice());a.$b=this.$b;a.ac=this.ac;return a};
ih.prototype.bind=function(a){ih.Hb.bind.call(this,a);this.ac&&(this.values=this.ac instanceof yd?a[this.ac.wa()]:this.ac.map(function(b){return b instanceof yd?a[b.wa()]:b}));return this};function kh(a){Sd.call(this,a)}t(kh,Sd);kh.prototype.$=function(){var a=D();a.add(this.table);var b=this.set.map(function(a){return a.O.m()}),c=this.ca.info();lh(c,b).forEach(a.add.bind(a));mh(c,b).forEach(a.add.bind(a));return a};kh.prototype.clone=function(){var a=new kh(this.ca);Vd(a,this);a.table=this.table;a.set=this.set?this.set.slice():this.set;return a};kh.prototype.bind=function(a){kh.Hb.bind.call(this,a);this.set.forEach(function(b){-1!=b.Xc&&(b.value=a[b.Xc])});Wd(this,a);return this};function nh(a,b){if(null==b)return"NULL";switch(a){case 1:return b?1:0;case 3:case 4:return b;case 0:return"'"+rb(b)+"'";default:return"'"+b.toString()+"'"}}function oh(a,b){var c=a.$b?"INSERT OR REPLACE":"INSERT",d=a.Ga.gb(),c=c+(" INTO "+a.Ga.getName()+"("),c=c+d.map(function(a){return a.getName()}).join(", "),c=c+") VALUES (";return a.values.map(function(a){var f=d.map(function(c){var d=a.s[c.getName()];return b?null!=d?"#":"NULL":nh(c.I(),d)});return c+f.join(", ")+");"}).join("\n")}
function ph(a){switch(a){case "between":return"BETWEEN";case "eq":return"=";case "gte":return">=";case "gt":return">";case "in":return"IN";case "lte":return"<=";case "lt":return"<";case "match":return"LIKE";case "neq":return"<>";default:return"UNKNOWN"}}function qh(a,b,c,d){return a instanceof yd?"?"+a.wa().toString():d?null!=a?"#":"NULL":"match"==b?"'"+a.toString()+"'":"in"==b?"("+a.map(function(a){return nh(c,a)}).join(", ")+")":"between"==b?nh(c,a[0])+" AND "+nh(c,a[1]):nh(c,a).toString()}
function rh(a,b){return L(a).map(function(a){return"("+sh(a,b)+")"}).join("and"==a.Rb?" AND ":" OR ")}function th(a){return[a.ga.m(),ph(a.G),a.la.m()].join(" ")}function sh(a,b){if(a instanceof Pd){var c=a.O.m(),d=ph(a.G),e=qh(a.value,a.G,a.O.I(),b);return"="==d&&"NULL"==e?[c,"IS NULL"].join(" "):"<>"==d&&"NULL"==e?[c,"IS NOT NULL"].join(" "):[c,d,e].join(" ")}if(a instanceof gg)return rh(a,b);if(a instanceof ig)return th(a);throw new E(357,typeof a);}
function uh(a,b){var c=sh(a,b);return c?" WHERE "+c:""}function vh(a,b){var c="UPDATE "+a.table.getName()+" SET ",c=c+a.set.map(function(a){var b=a.O.m()+" = ";return-1!=a.Xc?b+"?"+a.Xc.toString():b+nh(a.O.I(),a.value).toString()}).join(", ");a.u&&(c+=uh(a.u,b));return c+";"}
function wh(a,b){var c="*";a.f.length&&(c=a.f.map(function(a){return a.Za()?a.m()+" AS "+a.Za():a.m()}).join(", "));c="SELECT "+c+" FROM ";null!=a.yb&&0!=a.yb.size?c+=xh(a,b):(c+=a.c.map(yh).join(", "),a.u&&(c+=uh(a.u,b)));if(a.M)var d=a.M.map(function(a){return a.O.m()+(0==a.kb?" DESC":" ASC")}).join(", "),c=c+(" ORDER BY "+d);a.ja&&(d=a.ja.map(function(a){return a.m()}).join(", "),c+=" GROUP BY "+d);a.X&&(c+=" LIMIT "+a.X.toString());a.N&&(c+=" SKIP "+a.N.toString());return c+";"}
function yh(a){return J(a)!=a.getName()?a.getName()+" AS "+J(a):a.getName()}function xh(a,b){for(var c=$f(a.u,function(a){return a instanceof ig}),d=c.map(th),e=yh(a.c[0]),f=1;f<a.c.length;f++)var h=yh(a.c[f]),e=a.yb.has(c[d.length-f].W())?e+(" LEFT OUTER JOIN "+h):e+(" INNER JOIN "+h),e=e+(" ON ("+d[d.length-f]+")");c=Id(a.u,0);c instanceof ig||(e+=" WHERE "+sh(c,b));return e}
function zh(a,b){var c=b||!1,d=a.a.clone();if(d instanceof ih)return oh(d,c);if(d instanceof fh){var e="DELETE FROM "+d.c.getName();d.u&&(e+=uh(d.u,c));return e+";"}if(d instanceof kh)return vh(d,c);if(d instanceof Xd)return wh(d,c);throw new E(358,typeof d);};function U(a,b){this.global=a;this.rg=a.i(Vb);this.Da=a.i(Wb);this.a=b}r("lf.query.BaseBuilder",U);U.prototype.exec=function(){try{this.fb()}catch(a){return Za(a)}return new v(function(a,b){var c=new dh(this.global,[this.Cc()]);ge(this.Da,c).then(function(b){a(md(b[0]))},b)},this)};U.prototype.exec=U.prototype.exec;U.prototype.Pf=function(){var a=function(a){return a.Sc(this.a)+"\n"}.bind(this);return fg(Ah(this).hb(),a)};U.prototype.explain=U.prototype.Pf;
U.prototype.bind=function(a){this.a.bind(a);return this};U.prototype.bind=U.prototype.bind;U.prototype.yg=function(a){return zh(this,a)};U.prototype.toSql=U.prototype.yg;U.prototype.fb=aa();function Ah(a){if(null==a.$e){var b;b=a.rg;var c=a.a,d=b.eg.create(c);b=b.og.create(d,c);a.$e=b}return a.$e}U.prototype.Cc=function(){return{context:this.a.clone(),fe:Ah(this)}};function Bh(a){U.call(this,a,new fh(a.i(Zb)))}t(Bh,U);r("lf.query.DeleteBuilder",Bh);Bh.prototype.c=function(a){if(null!=this.a.c)throw new E(515);this.a.c=a;return this};Bh.prototype.from=Bh.prototype.c;Bh.prototype.u=function(a){this.Dd();this.a.u=a;return this};Bh.prototype.where=Bh.prototype.u;Bh.prototype.Dd=function(){if(null==this.a.c)throw new E(548);if(null!=this.a.u)throw new E(516);};Bh.prototype.fb=function(){Bh.Hb.fb.call(this);if(null==this.a.c)throw new E(517);};function Ch(a,b){U.call(this,a,new ih(a.i(Zb)));this.a.$b=b||!1}t(Ch,U);r("lf.query.InsertBuilder",Ch);Ch.prototype.fb=function(){Ch.Hb.fb.call(this);var a=this.a;if(null==a.Ga||null==a.values)throw new E(518);if(a.$b&&null===a.Ga.Db().gd())throw new E(519);};Ch.prototype.Ga=function(a){if(null!=this.a.Ga)throw new E(520);this.a.Ga=a;return this};Ch.prototype.into=Ch.prototype.Ga;
Ch.prototype.values=function(a){if(null!=this.a.values)throw new E(521);a instanceof yd||a.some(function(a){return a instanceof yd})?this.a.ac=a:this.a.values=a;return this};Ch.prototype.values=Ch.prototype.values;function Dh(a){return Eh("and",Array.prototype.slice.call(arguments))}r("lf.op.and",Dh);r("lf.op.or",function(a){return Eh("or",Array.prototype.slice.call(arguments))});function Eh(a,b){var c=new gg(a);b.forEach(function(a){M(c,a)});return c}r("lf.op.not",function(a){a.wd(!0);return a});function V(a,b){U.call(this,a,new Xd(a.i(Zb)));this.He=this.yd=!1;this.a.f=b;Fh(this);Gh(this)}t(V,U);r("lf.query.SelectBuilder",V);V.prototype.fb=function(){V.Hb.fb.call(this);var a=this.a;if(null==a.c)throw new E(522);if(q(a.Qb)&&!q(a.X)||q(a.Yb)&&!q(a.N))throw new E(523);null!=this.a.ja?Hh(this):Ih(this)};function Fh(a){var b=a.a.f.filter(function(a){return a instanceof S&&"DISTINCT"==a.Ib},a);if(0!=b.length&&(1!=b.length||1!=a.a.f.length))throw new E(524);}
function Hh(a){var b=a.a.f.filter(function(a){return!(a instanceof S)}).map(function(a){return a.m()}),c=!1;if(0==a.a.ja.length||0==a.a.f.length)c=!0;else{var d=a.a.ja.map(function(a){return a.m()});(c=b.some(function(a){return-1==d.indexOf(a)}))||(c=a.a.ja.some(function(a){a=a.I();return 6==a||0==a}))}if(c)throw new E(525);}function Ih(a){var b=a.a.f.some(function(a){return a instanceof S},a);a=a.a.f.some(function(a){return!(a instanceof S)},a)||0==a.a.f.length;if(b&&a)throw new E(526);}
function Gh(a){a.a.f.forEach(function(a){if(a instanceof S&&!Jh(a.Ib,a.I()))throw new E(527,a.m());},a)}function Kh(a,b){if(null==a.a.c)throw new E(b);}V.prototype.c=function(a){if(this.He)throw new E(515);this.He=!0;null==this.a.c&&(this.a.c=[]);this.a.c.push.apply(this.a.c,Array.prototype.slice.call(arguments));return this};V.prototype.from=V.prototype.c;V.prototype.u=function(a){Kh(this,548);if(this.yd)throw new E(516);this.yd=!0;Lh(this,a);return this};V.prototype.where=V.prototype.u;
function Lh(a,b){if(null!=a.a.u){var c=Dh(b,a.a.u);a.a.u=c}else a.a.u=b}V.prototype.Yf=function(a,b){Kh(this,542);if(this.yd)throw new E(547);this.a.c.push(a);Lh(this,b);return this};V.prototype.innerJoin=V.prototype.Yf;V.prototype.cg=function(a,b){Kh(this,542);if(!(b instanceof ig))throw new E(541);if(this.yd)throw new E(547);this.a.c.push(a);null==this.a.yb&&(this.a.yb=D());var c=b;J(a)!=J(b.la.H())&&(c=b.reverse());this.a.yb.add(c.W());Lh(this,c);return this};V.prototype.leftOuterJoin=V.prototype.cg;
V.prototype.X=function(a){if(null!=(this.a.X||this.a.Qb))throw new E(528);if(a instanceof yd)this.a.Qb=a;else{if(0>a)throw new E(531);this.a.X=a}return this};V.prototype.limit=V.prototype.X;V.prototype.N=function(a){if(null!=(this.a.N||this.a.Yb))throw new E(529);if(a instanceof yd)this.a.Yb=a;else{if(0>a)throw new E(531);this.a.N=a}return this};V.prototype.skip=V.prototype.N;V.prototype.M=function(a,b){Kh(this,549);null==this.a.M&&(this.a.M=[]);this.a.M.push({O:a,kb:null!=b?b:1});return this};
V.prototype.orderBy=V.prototype.M;V.prototype.ja=function(a){Kh(this,549);if(null!=this.a.ja)throw new E(530);null==this.a.ja&&(this.a.ja=[]);this.a.ja.push.apply(this.a.ja,Array.prototype.slice.call(arguments));return this};V.prototype.groupBy=V.prototype.ja;function Jh(a,b){switch(a){case "COUNT":case "DISTINCT":return!0;case "AVG":case "GEOMEAN":case "STDDEV":case "SUM":return 4==b||3==b;case "MAX":case "MIN":return 4==b||3==b||5==b||2==b}return!1}
V.prototype.clone=function(){var a=new V(this.global,this.a.f);a.a=this.a.clone();a.a.ad=null;return a};V.prototype.clone=V.prototype.clone;function Mh(a,b){U.call(this,a,new kh(a.i(Zb)));this.a.table=b}t(Mh,U);r("lf.query.UpdateBuilder",Mh);Mh.prototype.set=function(a,b){var c={Xc:b instanceof yd?b.wa():-1,O:a,value:b};null!=this.a.set?this.a.set.push(c):this.a.set=[c];return this};Mh.prototype.set=Mh.prototype.set;Mh.prototype.u=function(a){this.Dd();this.a.u=a;return this};Mh.prototype.where=Mh.prototype.u;Mh.prototype.Dd=function(){if(null!=this.a.u)throw new E(516);};
Mh.prototype.fb=function(){Mh.Hb.fb.call(this);if(null==this.a.set)throw new E(532);if(this.a.set.some(function(a){return a.value instanceof yd}))throw new E(501);};function Nh(a){this.a=a;this.Ca=null}Nh.prototype.gc=function(){null===this.Ca&&(this.Ca=this.ed());return this.Ca};function Oh(a){Nh.call(this,a)}t(Oh,Nh);Oh.prototype.ed=function(){return this.a.$b?new Lg(this.a.Ga,this.a.values):new Kg(this.a.Ga,this.a.values)};function Ph(a){Nh.call(this,a)}t(Ph,Nh);Ph.prototype.ed=function(){var a=new Ng(this.a.table,this.a.set),b=null!=this.a.u?new Og(this.a.u.Jb()):null,c=new Pg(this.a.table);null===b?M(a,c):(M(b,c),M(a,b));return a};function Qh(a,b,c){this.Ca=a;this.ge=b;this.Ub=c}Qh.prototype.gc=function(){this.Ub.forEach(function(a){this.Ca=a.mb(this.Ca,this.ge)},this);return this.Ca};function Rh(a,b){Nh.call(this,a);this.Ub=b}t(Rh,Nh);Rh.prototype.ed=function(){var a=new Mg(this.a.c),b=null!=this.a.u?new Og(this.a.u.Jb()):null,c=new Pg(this.a.c);null===b?M(a,c):(M(b,c),M(a,b));return(new Qh(a,this.a,this.Ub)).gc()};function Sh(){}t(Sh,Yg);Sh.prototype.mb=function(a,b){if(2>b.c.length)return a;this.Z=a;this.Wa(this.Z,b);return this.Z};Sh.prototype.Wa=function(a,b){if(a instanceof Og&&a.J instanceof ig){var c=a.J.W(),d=Id(a,0);d instanceof Qg&&(c=null!=b.yb&&b.yb.has(c),c=new Xg(a.J,c),eg(a,d,c,c),a==this.Z&&(this.Z=c),a=c)}L(a).forEach(function(a){this.Wa(a,b)},this)};function Th(){this.Wc=D()}t(Th,Yg);Th.prototype.mb=function(a,b){this.Wc.clear();if(!q(b.u))return a;this.Z=a;this.Wa(this.Z);this.Wc.clear();return this.Z};Th.prototype.Wa=function(a){if(Uh(a)){var b=a.J instanceof Pd?Vh(this,a):Wh(this,a);this.Wc.add(a);b==a&&(b=Id(a,0));null!==b&&(ea(b.getParent())&&(this.Z=b),Uh(b)&&!this.Wc.has(b)&&this.Wa(b))}else L(a).forEach(function(a){this.Wa(a)},this)};
function Xh(a,b,c){var d=b;if(Id(b,0)instanceof Og)d=cg(b),Xh(a,b,c);else if(Yh(b)){var e=[],d=dg(b,c,function(a){a=new Og(a.J);e.push(a);return a});e.forEach(function(a){Xh(this,a,c)},a)}return d}function Vh(a,b){var c=D([J(b.J.O.H())]),d=function(a){return Zh(this,a,c)}.bind(a);return Xh(a,b,d)}function Wh(a,b){var c=D([J(b.J.ga.H()),J(b.J.la.H())]),d=function(a){return Zh(this,a,c)}.bind(a);return Xh(a,b,d)}
function Zh(a,b,c){var d=D();Zf(b).forEach(function(a){d.add(J(a.table))},a);b instanceof Pg&&d.add(J(b.table));return mc(d,c)}function Uh(a){return a instanceof Og&&!(a.J instanceof gg)}function Yh(a){a=Id(a,0);return a instanceof Qg||a instanceof Xg};function $h(a,b){Nh.call(this,a);this.Ub=b;this.df=this.Ve=this.mf=this.Ye=this.ye=this.Ke=this.lf=this.Ee=this.of=null}t($h,Nh);
$h.prototype.ed=function(){ai(this);2<=this.a.c.length&&(this.Ee=new Qg);this.lf=null!=this.a.u?new Og(this.a.u.Jb()):null;this.a.M&&(this.Ye=new Sg(this.a.M));null!=this.a.N&&0<this.a.N&&(this.mf=new Wg(this.a.N));null!=this.a.X&&(this.Ve=new Vg(this.a.X));null!=this.a.ja&&(this.Ke=new Ug(this.a.ja));bi(this);this.df=new Rg(this.a.f||[],this.a.ja||null);var a=ci(this);return(new Qh(a,this.a,this.Ub)).gc()};
function ci(a){for(var b=[a.Ve,a.mf,a.df,a.Ye,a.ye,a.Ke,a.lf,a.Ee],c=null,d=null,e=0;e<b.length;e++){var f=b[e];null!==f&&(null===d?d=f:M(b[c],f),c=e)}a.of.forEach(function(a){M(b[c],a)});return d}function ai(a){a.of=a.a.c.map(function(a){return new Pg(a)},a)}function bi(a){var b=a.a.f.filter(function(a){return a instanceof S});null!=a.a.M&&a.a.M.forEach(function(a){a.O instanceof S&&b.push(a.O)});0<b.length&&(a.ye=new Tg(b))};function di(){this.me=[new Zg,new bh,new Th,new Sh];this.Kd=[new Zg]}di.prototype.create=function(a){var b=null;if(a instanceof ih)b=new Oh(a);else if(a instanceof fh)b=new Rh(a,this.Kd);else if(a instanceof Xd)b=new $h(a,this.me);else if(a instanceof kh)b=new Ph(a);else throw new E(513);b=b.gc();return new Ig(b,a.$())};function ei(a){T.call(this,0,1);this.S=a}t(ei,T);ei.prototype.toString=function(){return"delete("+this.S.getName()+")"};ei.prototype.ea=function(a,b){var c=b[0].entries.map(function(a){return a.sa});a.remove(this.S,c);return[qd()]};function fi(a,b){T.call(this,0,-1);this.table=b;this.D=a.i(Ub)}t(fi,T);fi.prototype.toString=function(){return"get_row_count("+this.table.getName()+")"};fi.prototype.ea=function(){var a=this.D.get(Ge(this.table)),b=new G([],[this.table.getName()]),c=tg(),a=a.Oa().oa;null===b.Ya&&(b.Ya=A());b.Ya.set(c.m(),a);return[b]};function gi(a,b){T.call(this,0,-1);this.U=a.i(Tb);this.D=a.i(Ub);this.table=b}t(gi,T);gi.prototype.toString=function(){var a="table_access("+this.table.getName();null===this.table.Za()||(a+=" as "+this.table.Za());return a+")"};gi.prototype.ea=function(){var a=this.D.get(Ge(this.table)).$a();return[td(Xe(this.U,a),[J(this.table)])]};function hi(a){this.g=a}t(hi,Yg);hi.prototype.mb=function(a,b){this.Z=a;if(!this.Ed(b))return a;var c=$f(a,function(a){return a instanceof gi})[0],d=new fi(this.g,c.table);eg(c,c,d,d);return this.Z};hi.prototype.Ed=function(a){return 1==a.f.length&&1==a.c.length&&null==a.u&&null==a.X&&null==a.N&&null==a.ja?(a=a.f[0],a instanceof S&&"COUNT"==a.Ib&&a.child instanceof sg):!1};function ii(a){T.call(this,0,1);this.Je=a}t(ii,T);ii.prototype.toString=function(){return"groupBy("+this.Je.map(function(a){return a.m()}).toString()+")"};ii.prototype.ea=function(a,b){return ji(this,b[0])};function ji(a,b){var c=new Ic,d=function(a){return this.Je.map(function(b){return I(a,b)},this).join(",")}.bind(a);b.entries.forEach(function(a){c.set(d(a),a)},a);return c.keys().map(function(a){return new G(c.get(a),H(b))},a)};function ki(a,b,c){T.call(this,0,0);this.D=a.i(Ub);this.U=a.i(Tb);this.J=b;this.Pb=c;this.Bd="eq"==this.J.G?0:2;this.Le=null}t(ki,T);var li=["hash","index_nested_loop","nested_loop"];ki.prototype.toString=function(){return"join(type: "+(this.Pb?"outer":"inner")+", impl: "+li[this.Bd]+", "+this.J.toString()+")"};
ki.prototype.ea=function(a,b){switch(this.Bd){case 0:return[mg(this.J,b[0],b[1],this.Pb)];case 1:return[ng(this.J,b[0],b[1],this.Le,this.U)];default:var c=this.J,d=b[0],e=b[1],f=this.Pb,h=[d,e];f||(h=jg(c,d,e));for(var d=h[0],e=h[1],h=[],k=H(d),n=H(e),B=d.entries.length,ja=e.entries.length,qa=ja+256-1>>8,$a=0;$a<qa;){for(var Xb=0;Xb<B;Xb++){var Sf=!1,Tf=I(d.entries[Xb],c.ga);if(null!==Tf)for(var oi=Math.min($a+1<<8,ja),Qc=$a<<8;Qc<oi;Qc++)if(c.uc(Tf,I(e.entries[Qc],c.la))){var Sf=!0,pj=xd(d.entries[Xb],
k,e.entries[Qc],n);h.push(pj)}f&&!Sf&&h.push(lg(c,d.entries[Xb],k))}$a++}c=H(d).concat(H(e));return[new G(h,c)]}};function mi(a,b){a.Bd=1;var c=a.D.get(b.wa().m());a.Le={Vf:b,hg:b==a.J.ga?a.J.la:a.J.ga,index:c}};function ni(a){T.call(this,0,-1);this.ef=a}t(ni,T);ni.prototype.toString=function(){return"no_op_step("+H(this.ef[0]).join(",")+")"};ni.prototype.ea=g("ef");function pi(){}t(pi,Yg);pi.prototype.mb=function(a,b){this.Z=a;if(!this.Ed(b))return a;$f(a,function(a){return a instanceof ki}).forEach(this.qg,this);return this.Z};pi.prototype.Ed=function(a){return 1<a.c.length};
pi.prototype.qg=function(a){if("eq"==a.J.G&&!a.Pb){var b=function(b){if(!(b instanceof gi))return null;b=J(b.table)==J(a.J.la.H())?a.J.la:a.J.ga;return ea(b.wa())?null:b},c=b(Id(a,0)),b=b(Id(a,1));if(null!==c||null!==b){b=null===b?c:b;mi(a,b);var d=new G([],[J(b.H())]);Ld(a,new ni([d]),b==c?0:1)}}};function qi(a){a=a.map(function(a){return a.ya()});a=Db.apply(null,a);var b=[];Cb(a,function(a){b.push(a)});return b}function ri(a){this.Ob=a}ri.prototype.fd=function(){return 1==this.Ob.f.length?[jd()]:[this.Ob.f.map(function(){return jd()})]};function si(a,b){this.Ob=a;this.Ba=b;this.Id=this.Te=null}
function ti(a,b){var c=A();a.Ba.keys().forEach(function(a){var e=this.Ba.get(a).map(function(a){return Td(b,a)},this),f=new Wf([jd()]);e.forEach(function(a){var b=null;"between"==a.G?b=new ed(a.value[0],a.value[1],!1,!1):"eq"==a.G?(b=a.value,b=new ed(b,b,!1,!1)):b="gte"==a.G?new ed(a.value,F,!1,!1):"gt"==a.G?new ed(a.value,F,!0,!1):"lte"==a.G?new ed(F,a.value,!1,!1):new ed(F,a.value,!1,!0);a=a.ab?fd(b):[b];a=new Wf(a);f=Xf(f,a)});c.set(a,f)},a);return c}
si.prototype.fd=function(a){if(this.Te==a)return this.Id;for(var b=ti(this,a),c=this.Ob.f.length-1;0<=c;c--){var d=this.Ob.f[c];if(null!==(b.get(d.ca.getName())||null))break;b.set(d.ca.getName(),new Wf([jd()]))}this.Id=1==this.Ob.f.length?C(b)[0].ya():qi(ui(this,b));this.Te=a;return this.Id};function ui(a,b){var c=A(),d=0;a.Ob.f.forEach(function(a){c.set(a.ca.getName(),d);d++});return Jb(b).sort(function(a,b){return c.get(a)-c.get(b)}).map(function(a){return b.get(a)})};function vi(a,b){this.pf=b;this.D=a.i(Ub)}function wi(a,b,c){c=c.filter(a.Zf,a);if(0==c.length)return null;a=xi(a,c);if(0==a.length)return null;if(1==a.length)return a[0];var d=Number.MAX_VALUE;return a.reduce(function(a,c){var h=yi(c,b);return h<d?(d=h,c):a},null)}
function xi(a,b){return a.pf.xa().map(function(a){a=new zi(this.D,a);Ai(a,b);return a},a).filter(function(a){if(null===a.Ba)a=!1;else{for(var b=!1,e=!0,f=0;f<a.wb.f.length;f++){var h=a.Ba.has(a.wb.f[f].ca.getName());if(b&&h){e=!1;break}h||(b=!0)}a=e}return a})}vi.prototype.Zf=function(a){var b;if(b=a instanceof Pd)Qd(a),b=null!==a.value&&("between"==a.G||"eq"==a.G||"gt"==a.G||"gte"==a.G||"lt"==a.G||"lte"==a.G);return b?a.O.H()==this.pf:!1};
function zi(a,b){this.D=a;this.wb=b;this.Wf=D(this.wb.f.map(function(a){return a.ca.getName()}));this.Wd=this.Ba=null}function Bi(a){null===a.Wd&&(a.Wd=new si(a.wb,a.Ba));return a.Wd}function Ai(a,b){b.forEach(function(a){var b=a.gb()[0].getName();this.Wf.has(b)&&(null===this.Ba&&(this.Ba=new Ic),this.Ba.set(b,a.W()))},a)}function yi(a,b){var c=Bi(a).fd(b),d=a.D.get(a.wb.m());return c.reduce(function(a,b){return a+d.cd(b)},0)};function Ci(a,b,c,d){T.call(this,0,-1);this.D=a.i(Ub);this.index=b;this.Se=c;this.ke=d;this.Vc=this.Uc=!1}t(Ci,T);Ci.prototype.toString=function(){return"index_range_scan("+this.index.m()+", ?, "+(this.ke?"reverse":"natural")+(this.Uc?", limit:?":"")+(this.Vc?", skip:?":"")+")"};Ci.prototype.Sc=function(a){var b=this.toString(),c=this.Se.fd(a),b=b.replace("?",c.toString());this.Uc&&(b=b.replace("?",a.X.toString()));this.Vc&&(b=b.replace("?",a.N.toString()));return b};
Ci.prototype.ea=function(a,b,c){a=this.Se.fd(c);b=this.D.get(this.index.m());c=(1==a.length&&a[0]instanceof ed&&kd(a[0])?af(b.get(a[0].c),!1,this.Uc?c.X:void 0,this.Vc?c.N:void 0):b.$a(a,this.ke,this.Uc?c.X:void 0,this.Vc?c.N:void 0)).map(function(a){return new y(a,{})},this);return[td(c,[this.index.Rc])]};function Di(a){T.call(this,0,1);this.sd=a}t(Di,T);Di.prototype.toString=l("select(?)");Di.prototype.Sc=function(a){a=Td(a,this.sd);return this.toString().replace("?",a.toString())};Di.prototype.ea=function(a,b,c){return[Td(c,this.sd).eval(b[0])]};function Ei(a,b){T.call(this,0,1);this.U=a.i(Tb);this.S=b}t(Ei,T);Ei.prototype.toString=function(){return"table_access_by_row_id("+this.S.getName()+")"};Ei.prototype.ea=function(a,b){return[td(Xe(this.U,nd(b[0])),[J(this.S)])]};function Fi(a){this.g=a}t(Fi,Yg);Fi.prototype.mb=function(a,b){this.Z=a;$f(a,function(a){return a instanceof gi}).forEach(function(a){var d=Gi(a);if(0!=d.length){var e=wi(new vi(this.g,a.table),b,d.map(function(a){return Td(b,a.sd)}));if(null!==e){var f=A();d.forEach(function(a){f.set(a.sd,a)},this);this.Z=Hi(this,e,f,a)}}},this);return this.Z};function Gi(a){var b=[];for(a=a.getParent();a;)a instanceof Di&&b.push(a),a=a.getParent();return b}
function Hi(a,b,c,d){(null===b.Ba?[]:b.Ba.values()).map(function(a){return c.get(a)}).forEach(ag);b=new Ci(a.g,b.wb,Bi(b),!1);a=new Ei(a.g,d.table);M(a,b);eg(d,d,a,b);return b.hb()};function Ii(a,b){T.call(this,0,-1);this.D=a.i(Ub);this.S=b}t(Ii,T);Ii.prototype.toString=function(){return"insert("+this.S.getName()+")"};Ii.prototype.ea=function(a,b,c){Ji(this.S,c.values,this.D);a.xb(this.S,c.values);return[td(c.values,[this.S.getName()])]};function Ji(a,b,c){a=a.Db().gd();if(null===a?0:a.f[0].autoIncrement){var d=a.f[0].ca.getName();c=c.get(a.m()).max();var e=null===c?0:c[0];b.forEach(function(a){if(0==a.s[d]||null==a.s[d])e++,a.s[d]=e})}}
function Ki(a,b){T.call(this,0,-1);this.D=a.i(Ub);this.S=b}t(Ki,T);Ki.prototype.toString=function(){return"insert_replace("+this.S.getName()+")"};Ki.prototype.ea=function(a,b,c){Ji(this.S,c.values,this.D);a.Rd(this.S,c.values);return[td(c.values,[this.S.getName()])]};function Li(){T.call(this,0,1)}t(Li,T);Li.prototype.toString=l("limit(?)");Li.prototype.Sc=function(a){return this.toString().replace("?",a.X.toString())};Li.prototype.ea=function(a,b,c){b[0].entries.splice(c.X);return b};function Mi(a){T.call(this,0,1);this.M=a}t(Mi,T);m=Mi.prototype;m.toString=function(){return"order_by("+Yd(this.M)+")"};m.ea=function(a,b){if(1==b.length){var c;c=b[0];for(var d=null,e=0;e<this.M.length;e++){var f=ug(this.M[e].O);if(null!==c.Ya&&c.Ya.has(f.m())){d=f;break}}c=d;(null===c?b[0]:od(b[0],c)).entries.sort(this.Mf.bind(this))}else b.sort(this.tg.bind(this));return b};
m.V=function(a,b){var c=null,d=null,e=null,f=-1;do f++,e=this.M[f].O,c=this.M[f].kb,d=a(e),e=b(e);while(d==e&&f+1<this.M.length);d=d<e?-1:d>e?1:0;return 1==c?d:-d};m.tg=function(a,b){return this.V(function(b){return b instanceof S?od(a,b):I(a.entries[a.entries.length-1],b)},function(a){return a instanceof S?od(b,a):I(b.entries[b.entries.length-1],a)})};m.Mf=function(a,b){return this.V(function(b){return I(a,b)},function(a){return I(b,a)})};function Ni(a,b){this.Ia=a;this.K=b}function Oi(a){return a.K.some(function(a){return a instanceof S},a)?Pi(a):Qi(a)}function Pi(a){if(1==a.K.length&&"DISTINCT"==a.K[0].Ib)return a=od(a.Ia,a.K[0]).entries.map(function(a){var b=new ud(new y(-1,{}),1<this.Ia.L.size);wd(b,this.K[0],I(a,this.K[0].child));return b},a),new G(a,[]);var b=new ud(new y(-1,{}),1<a.Ia.L.size);a.K.forEach(function(a){var d=a instanceof S?od(this.Ia,a):I(this.Ia.entries[0],a);wd(b,a,d)},a);return new G([b],H(a.Ia))}
function Qi(a){var b=Array(a.Ia.entries.length),c=1<a.Ia.L.size;a.Ia.entries.forEach(function(a,e){b[e]=new ud(new y(a.sa.id(),{}),c);this.K.forEach(function(c){wd(b[e],c,I(a,c))},this)},a);return new G(b,H(a.Ia))}function Ri(a,b){var c=a.map(function(a){return Oi(new Ni(a,b)).entries[0]});return new G(c,H(a[0]))};function Si(a,b){T.call(this,0,1);this.f=a;this.Nb=b}t(Si,T);Si.prototype.toString=function(){var a="project("+this.f.toString();if(null!==this.Nb)var b=this.Nb.map(function(a){return a.m()}).join(", "),a=a+(", groupBy("+b+")");return a+")"};Si.prototype.ea=function(a,b){var c;0==b.length?c=[qd()]:1==b.length?(c=b[0],c=[0==this.f.length?c:Oi(new Ni(c,this.f))]):c=[Ri(b,this.f)];return c};function Ti(a){return a.f.some(function(a){return a instanceof S})||null!==a.Nb};function Ui(){T.call(this,0,1)}t(Ui,T);Ui.prototype.toString=l("skip(?)");Ui.prototype.Sc=function(a){return this.toString().replace("?",a.N.toString())};Ui.prototype.ea=function(a,b,c){return[new G(b[0].entries.slice(c.N),H(b[0]))]};function Vi(){}t(Vi,Yg);Vi.prototype.mb=function(a,b){if(!q(b.X)&&!q(b.N))return a;var c=Wi(a);if(null===c)return a;$f(a,function(a){return a instanceof Li||a instanceof Ui}).forEach(function(a){a instanceof Li?c.Uc=!0:c.Vc=!0;ag(a)},this);return c.hb()};function Wi(a){a=$f(a,function(a){return a instanceof Ci},function(a){return a instanceof Si&&Ti(a)||a instanceof Mi||1!=L(a).length||a instanceof Di});return 0<a.length?a[0]:null};function Xi(a){this.g=a}t(Xi,Yg);Xi.prototype.mb=function(a,b){var c=Yi(a,b);if(null===c)return a;var d;a:{var e=c;d=Zi(Id(c,0));if(null!==d){var f;f=c.M;for(var h=null,k=d.table.xa(),n=0;n<k.length&&null===h;n++)h=$i(k[n],f);f=h;if(null===f){d=e;break a}e=new Ci(this.g,f.wb,new ri(f.wb),f.Pe);f=new Ei(this.g,d.table);M(f,e);ag(c);e=eg(d,d,f,e)}d=e}if(d==c)a:if(d=c,e=aj(Id(c,0)),null!==e){f=$i(e.index,c.M);if(null===f)break a;e.ke=f.Pe;d=ag(c).parent}return d.hb()};
function aj(a){a=$f(a,function(a){return a instanceof Ci},function(a){return 1!=L(a).length});return 0<a.length?a[0]:null}function Zi(a){a=$f(a,function(a){return a instanceof gi},function(a){return 1!=L(a).length});return 0<a.length?a[0]:null}function Yi(a,b){return q(b.M)?$f(a,function(a){return a instanceof Mi})[0]:null}function $i(a,b){if(a.f.length!=b.length||!b.every(function(b,c){return b.O.getName()==a.f[c].ca.getName()}))return null;var c=bj(b,a);return c[0]||c[1]?{wb:a,Pe:c[1]}:null}
function bj(a,b){var c=a.reduce(function(a,b){return a<<1|(0==b.kb?0:1)},0),d=b.f.reduce(function(a,b){return a<<1|(0==b.kb?0:1)},0),c=c^d;return[0==c,c==Math.pow(2,Math.max(a.length,b.f.length))-1]};function cj(a,b,c){this.Ca=a;this.ge=b;this.Ub=c}cj.prototype.gc=function(){this.Ub.forEach(function(a){this.Ca=a.mb(this.Ca,this.ge)},this);return this.Ca};function dj(a,b){T.call(this,0,1);this.S=a;this.Bg=b}t(dj,T);dj.prototype.toString=function(){return"update("+this.S.getName()+")"};dj.prototype.ea=function(a,b){var c=b[0].entries.map(function(a){var b=this.S.Lb(a.sa.Ja());this.Bg.forEach(function(a){b.s[a.O.getName()]=a.value},this);return b},this);a.update(this.S,c);return[qd()]};function ej(a){this.g=a;this.me=[new pi,new Fi(this.g),new Xi(this.g),new Vi,new hi(this.g)];this.Kd=[new Fi(this.g)]}ej.prototype.create=function(a,b){var c=a.hb();if(c instanceof Lg||c instanceof Kg)return fj(this,a,b);if(c instanceof Rg||c instanceof Vg||c instanceof Wg)return fj(this,a,b,this.me);if(c instanceof Mg||c instanceof Ng)return fj(this,a,b,this.Kd);throw new E(8);};function fj(a,b,c,d){a=Yf(b.hb(),a.gg.bind(a));null!=d&&(a=(new cj(a,c,d)).gc());return new Zd(a,b.$())}
ej.prototype.gg=function(a){if(a instanceof Rg)return new Si(a.f,a.Nb);if(a instanceof Ug)return new ii(a.f);if(a instanceof Tg)return new yg(a.f);if(a instanceof Sg)return new Mi(a.M);if(a instanceof Wg)return new Ui;if(a instanceof Vg)return new Li;if(a instanceof Og)return new Di(a.J.W());if(a instanceof Qg)return new ch;if(a instanceof Xg)return new ki(this.g,a.J,a.Pb);if(a instanceof Pg)return new gi(this.g,a.table);if(a instanceof Mg)return new ei(a.table);if(a instanceof Ng)return new dj(a.table,
a.se);if(a instanceof Lg)return new Ki(this.g,a.table);if(a instanceof Kg)return new Ii(this.g,a.table);throw new E(514);};function gj(a){this.eg=new di;this.og=new ej(a)};function hj(){this.We=A()}function ij(a,b){var c=a.We.get(b.getName())||null;null===c&&(c=new jj,a.We.set(b.getName(),c));return c}function kj(a,b,c,d){c.forEach(function(a){a=ij(this,a);0==d?(a.bb=null,a.vc=b):3==d?(null===a.Xb&&(a.Xb=D()),a.Xb.add(b),null===a.Ta&&(a.Ta=D()),a.Ta.delete(b)):1==d?(null===a.Ta&&(a.Ta=D()),a.Ta.add(b)):2==d&&(a.bb=b)},a)}
function lj(a,b,c,d){var e=!0;c.forEach(function(a){if(e){a=ij(this,a);var c=null===a.Ta||0==a.Ta.size;e=0==d?(null===a.Xb||0==a.Xb.size)&&c&&null===a.vc&&null!==a.bb&&a.bb==b:3==d?null===a.vc&&null===a.bb&&null!==a.Ta&&a.Ta.has(b):1==d?null===a.bb:c&&(null===a.bb||a.bb==b)}},a);return e}function mj(a,b,c,d){var e=lj(a,b,c,d);e&&kj(a,b,c,d);return e}hj.prototype.releaseLock=function(a,b){b.forEach(function(b){ij(this,b).releaseLock(a)},this)};
function nj(a,b){b.forEach(function(a){ij(this,a).bb=null},a)}function jj(){this.Xb=this.Ta=this.bb=this.vc=null}jj.prototype.releaseLock=function(a){this.vc==a&&(this.vc=null);this.bb==a&&(this.bb=null);null===this.Ta||this.Ta.delete(a);null===this.Xb||this.Xb.delete(a)};function oj(){this.Tb=new qj;this.Gc=new hj}function ge(a,b){(2>b.getPriority()||2>b.getPriority())&&nj(a.Gc,b.$());a.Tb.xb(b);rj(a);return b.Mb().ha}function rj(a){for(var b=a.Tb.ya(),c=0;c<b.length;c++){var d=b[c],e=!1;if(e=0==d.I()?sj(a,d,1,3):sj(a,d,2,0))a.Tb.remove(d),e=a,d.exec().then(e.mg.bind(e,d),e.lg.bind(e,d))}}function sj(a,b,c,d){var e=!1;mj(a.Gc,b.W(),b.$(),c)&&(e=mj(a.Gc,b.W(),b.$(),d));return e}oj.prototype.mg=function(a,b){this.Gc.releaseLock(a.W(),a.$());a.Mb().resolve(b);rj(this)};
oj.prototype.lg=function(a,b){this.Gc.releaseLock(a.W(),a.$());a.Mb().reject(b);rj(this)};function qj(){this.Tb=[]}qj.prototype.xb=function(a){$e(this.Tb,a,function(a,c){var d=a.getPriority()-c.getPriority();return 0==d?a.W()-c.W():d})};qj.prototype.ya=function(){return this.Tb.slice()};qj.prototype.remove=function(a){var b=this.Tb;a=va(b,a);var c;(c=0<=a)&&ua.splice.call(b,a,1);return c};function tj(a,b){this.Ld=zd.Ac();this.he=a;this.od=b;this.K=uj(this)}function uj(a){if(0<a.he.f.length)return a.he.f;var b=[];a.he.c.forEach(function(a){a.gb().forEach(function(a){b.push(a)})});return b}tj.prototype.V=function(a,b){return this.K.every(function(c){return Fd(this.Ld,c.I(),"eq")(I(a,c),I(b,c))},this)};
function vj(a,b,c){var d=null===b?[]:b.entries,e=ub(d,c.entries,a.V.bind(a),function(a){return d[a]});b=[];for(var f=0,h=0;h<d.length;h++){var k=d[h];e[f]==k?f++:(k=a.od.splice(f,1),k=wj(h,k,0,a.od),b.push(k))}e=ub(d,c.entries,a.V.bind(a),function(a,b){return c.entries[b]});for(h=f=0;h<c.entries.length;h++)k=c.entries[h],e[f]==k?f++:(a.od.splice(h,0,k.sa.s),k=wj(h,[],1,a.od),b.push(k));return b}function wj(a,b,c,d){return{Cg:c,index:a,object:d,Eg:b,type:"splice"}};function xj(){this.ec=A()}xj.prototype.Ad=function(a,b){var c=ka(a.a).toString(),d=this.ec.get(c)||null;null===d&&(d=new yj(a),this.ec.set(c,d));d.Ad(b)};xj.prototype.ie=function(a,b){var c=ka(a.a).toString(),d=this.ec.get(c)||null;d.ie(b);0<d.Kc.size||this.ec.delete(c)};function fe(a,b){var c=D();b.forEach(function(a){c.add(a.getName())});var d=[];a.ec.forEach(function(a){a=a.Cc();a.context.c.some(function(a){return c.has(a.getName())})&&d.push(a)});return d}
function de(a,b,c){b=ka(null!=b.ad?b.ad:b).toString();a=a.ec.get(b)||null;null!==a&&zj(a,c)}function yj(a){this.Cf=a;this.Kc=D();this.jg=[];this.Ue=null;this.Kf=new tj(a.a,this.jg)}yj.prototype.Ad=function(a){this.Kc.has(a)||this.Kc.add(a)};yj.prototype.ie=function(a){return this.Kc.delete(a)};yj.prototype.Cc=function(){var a=this.Cf;return{context:a.a,fe:Ah(a)}};function zj(a,b){var c=vj(a.Kf,a.Ue,b);a.Ue=b;0<c.length&&a.Kc.forEach(function(a){a(c)})};function Aj(a,b){var c=a.i(Zb),d=b||{},e=new We(c);a.lb(Tb,e);var e=null,f=!1;switch(d.storeType||0){case 1:e=new Ie(c);break;case 5:e=new Ke(c);break;case 4:e=new Se(a,c,d.webSqlDbSize);break;case 3:e=new se(c,d.firebase);f=!0;break;default:e=new De(a,c)}a.lb(Sb,e);var h=new Vf;a.lb(Ub,h);return e.Fa(d.onUpgrade).then(function(){var b=new gj(a);a.lb(Vb,b);b=new oj;a.lb(Wb,b);b=new xj;a.lb(Yb,b);return h.Fa(c)}).then(function(){if(f){var b=new he(a);b.Ka.subscribe(b.ae.bind(b))}return(new Mf(a)).Fa(c)})}
;function Bj(a){this.g=a;this.j=a.i(Zb);this.aa=D(this.j.ra());this.cb=x()}m=Bj.prototype;m.exec=function(){var a=this.g.i(Ub),b=this.g.i(Tb),c={};this.j.ra().forEach(function(d){var f=a.get(Ge(d)).$a(),f=Xe(b,f).map(function(a){return a.s});c[d.getName()]=f});var d={name:this.j.name(),version:this.j.version(),tables:c},d=new ud(new y(-1,d),!0);return w([new G([d],[])])};m.I=l(0);m.$=g("aa");m.Mb=g("cb");m.W=function(){return ka(this)};m.getPriority=l(0);function Cj(a,b){this.g=a;this.j=a.i(Zb);this.aa=D(this.j.ra());this.cb=x();this.ua=b;this.Ka=a.i(Sb);this.U=a.i(Tb);this.D=a.i(Ub)}m=Cj.prototype;
m.exec=function(){if(!(this.Ka instanceof De||this.Ka instanceof Ie||this.Ka instanceof Se))throw new E(300);var a;a:{a=this.j.ra();for(var b=0;b<a.length;++b)if(0<this.D.get(Ge(a[b])).Oa().oa){a=!1;break a}a=!0}if(!a)throw new E(110);if(this.j.name()!=this.ua.name||this.j.version()!=this.ua.version)throw new E(111);if(null==this.ua.tables)throw new E(112);return Dj(this)};m.I=l(1);m.$=g("aa");m.Mb=g("cb");m.W=function(){return ka(this)};m.getPriority=l(0);
function Dj(a){var b=new $c(a.g,a.aa),b=a.Ka.Cb(a.I(),b),c;for(c in a.ua.tables){var d=a.j.table(c),e=a.ua.tables[c].map(function(a){return d.tb(a)}),f=b.H(c,d.Lb);a.U.Vb(c,e);var h=a.D.jc.get(c)||[];e.forEach(function(a){h.forEach(function(b){var c=a.Eb(b.getName());b.add(c,a.id())})});f.put(e)}return b.ia()};function Ej(a,b){this.g=a;this.Ka=a.i(Sb);this.Da=a.i(Wb);this.Fb=a.i(Yb);this.aa=D(b);this.Ra=new $c(this.g,this.aa);this.cb=x();this.wc=x();this.ue=x()}m=Ej.prototype;m.exec=function(){this.ue.resolve();return this.wc.ha};m.I=l(1);m.$=g("aa");m.Mb=g("cb");m.W=function(){return ka(this)};m.getPriority=l(2);function Fj(a){ge(a.Da,a);return a.ue.ha}
function Gj(a,b){var c=b.Cc();return c.fe.hb().exec(a.Ra,c.context).then(function(a){return md(a[0])},function(a){this.Ra.Gb();var b=new hb(a.name);this.wc.reject(b);throw a;}.bind(a))}m.ia=function(){this.Ka.Cb(this.I(),this.Ra).ia().then(function(){this.Pc();this.wc.resolve()}.bind(this),function(a){this.Ra.Gb();this.wc.reject(a)}.bind(this));return this.cb.ha};m.Gb=function(){this.Ra.Gb();this.wc.resolve();return this.cb.ha};
m.Pc=function(){var a=fe(this.Fb,this.aa);0!=a.length&&(a=new ce(this.g,a),ge(this.Da,a))};function Hj(a){this.g=a;this.Da=a.i(Wb);this.Tc=null;this.Ua=0;0==Ij.size&&(Ij.set(0,D([1,4])),Ij.set(1,D([2])),Ij.set(2,D([3,5,6])),Ij.set(3,D([2,7])),Ij.set(4,D([7])),Ij.set(5,D([7])),Ij.set(6,D([7])))}r("lf.proc.Transaction",Hj);var Ij=A();function Jj(a,b){var c=Ij.get(a.Ua)||null;if(null===c||!c.has(b))throw new E(107,a.Ua,b);a.Ua=b}
Hj.prototype.exec=function(a){Jj(this,4);var b=[];try{a.forEach(function(a){a.fb();b.push(a.Cc())},this)}catch(c){return Jj(this,7),Za(c)}a=new dh(this.g,b);return ge(this.Da,a).then(function(a){Jj(this,7);return a.map(function(a){return md(a)})}.bind(this),function(a){Jj(this,7);throw a;}.bind(this))};Hj.prototype.exec=Hj.prototype.exec;Hj.prototype.Af=function(a){Jj(this,1);this.Tc=new Ej(this.g,a);return Fj(this.Tc).then(function(){Jj(this,2)}.bind(this))};Hj.prototype.begin=Hj.prototype.Af;
Hj.prototype.zf=function(a){Jj(this,3);return Gj(this.Tc,a).then(function(a){Jj(this,2);return a}.bind(this),function(a){Jj(this,7);throw a;}.bind(this))};Hj.prototype.attach=Hj.prototype.zf;Hj.prototype.ia=function(){Jj(this,5);return this.Tc.ia().then(function(){Jj(this,7)}.bind(this))};Hj.prototype.commit=Hj.prototype.ia;Hj.prototype.Gb=function(){Jj(this,6);return this.Tc.Gb().then(function(){Jj(this,7)}.bind(this))};Hj.prototype.rollback=Hj.prototype.Gb;function W(a){this.g=a;this.j=a.i(Zb);this.Qd=!1}r("lf.proc.Database",W);W.prototype.Fa=function(a){this.g.lb(Zb,this.j);return Aj(this.g,a).then(function(){this.Qd=!0;this.Da=this.g.i(Wb);return this}.bind(this))};W.prototype.init=W.prototype.Fa;W.prototype.vb=g("j");W.prototype.getSchema=W.prototype.vb;function Kj(a){if(!a.Qd)throw new E(2);}W.prototype.select=function(a){Kj(this);return new V(this.g,1!=arguments.length||null!=arguments[0]?Array.prototype.slice.call(arguments):[])};
W.prototype.select=W.prototype.select;W.prototype.xb=function(){Kj(this);return new Ch(this.g)};W.prototype.insert=W.prototype.xb;W.prototype.Rd=function(){Kj(this);return new Ch(this.g,!0)};W.prototype.insertOrReplace=W.prototype.Rd;W.prototype.update=function(a){Kj(this);return new Mh(this.g,a)};W.prototype.update=W.prototype.update;W.prototype.delete=function(){Kj(this);return new Bh(this.g)};W.prototype["delete"]=W.prototype.delete;
W.prototype.observe=function(a,b){Kj(this);this.g.i(Yb).Ad(a,b)};W.prototype.observe=W.prototype.observe;W.prototype.unobserve=function(a,b){Kj(this);this.g.i(Yb).ie(a,b)};W.prototype.unobserve=W.prototype.unobserve;W.prototype.If=function(){Kj(this);return new Hj(this.g)};W.prototype.createTransaction=W.prototype.If;W.prototype.close=function(){try{this.g.i(Sb).close()}catch(a){}this.g.clear();this.Qd=!1};W.prototype.close=W.prototype.close;
W.prototype.Qf=function(){Kj(this);var a=new Bj(this.g);return ge(this.Da,a).then(function(a){return md(a[0])[0]})};W.prototype["export"]=W.prototype.Qf;W.prototype.import=function(a){Kj(this);a=new Cj(this.g,a);return ge(this.Da,a).then(l(null))};W.prototype["import"]=W.prototype.import;function X(a,b,c,d,e,f){this.S=a;this.w=b;this.Qe=c;this.Oe=d;this.tf=e;this.eb=f||null}r("lf.schema.BaseColumn",X);m=X.prototype;m.getName=g("w");m.m=function(){return J(this.S)+"."+this.w};m.toString=function(){return this.m()};m.H=g("S");m.I=g("tf");X.prototype.getType=X.prototype.I;X.prototype.Za=g("eb");X.prototype.xa=function(){null==this.ka&&(this.ka=[],this.H().xa().forEach(function(a){-1!=a.f.map(function(a){return a.ca.getName()}).indexOf(this.w)&&this.ka.push(a)},this));return this.ka};
X.prototype.wa=function(){if(!q(this.fa)){var a=this.xa().filter(function(a){return 1!=a.f.length?!1:a.f[0].ca.getName()==this.getName()},this);this.fa=0<a.length?a[0]:null}return this.fa};X.prototype.Ec=g("Oe");X.prototype.isNullable=X.prototype.Ec;X.prototype.Fc=g("Qe");X.prototype.Qa=function(a){return og(this,a,"eq")};X.prototype.eq=X.prototype.Qa;X.prototype.Xe=function(a){return og(this,a,"neq")};X.prototype.neq=X.prototype.Xe;X.prototype.Xd=function(a){return og(this,a,"lt")};
X.prototype.lt=X.prototype.Xd;X.prototype.fg=function(a){return og(this,a,"lte")};X.prototype.lte=X.prototype.fg;X.prototype.Sf=function(a){return og(this,a,"gt")};X.prototype.gt=X.prototype.Sf;X.prototype.Tf=function(a){return og(this,a,"gte")};X.prototype.gte=X.prototype.Tf;X.prototype.match=function(a){return og(this,a,"match")};X.prototype.match=X.prototype.match;X.prototype.Bf=function(a,b){return og(this,[a,b],"between")};X.prototype.between=X.prototype.Bf;
X.prototype.Uf=function(a){return og(this,a,"in")};X.prototype["in"]=X.prototype.Uf;X.prototype.ag=function(){return this.Qa(null)};X.prototype.isNull=X.prototype.ag;X.prototype.$f=function(){return this.Xe(null)};X.prototype.isNotNull=X.prototype.$f;X.prototype.oc=function(a){return new X(this.S,this.w,this.Qe,this.Oe,this.tf,a)};X.prototype.as=X.prototype.oc;function Lj(){this.vd=A()}var Mj;Lj.prototype.clear=function(){this.vd.clear()};Lj.prototype.clear=Lj.prototype.clear;Lj.prototype.lb=function(a,b){this.vd.set(a.toString(),b);return b};Lj.prototype.registerService=Lj.prototype.lb;Lj.prototype.i=function(a){var b=this.vd.get(a.toString())||null;if(null===b)throw new E(7,a.toString());return b};Lj.prototype.getService=Lj.prototype.i;Lj.prototype.Vd=function(a){return this.vd.has(a.toString())};Lj.prototype.isRegistered=Lj.prototype.Vd;function Nj(a){this.j=a;this.Fd=new Ic;this.je=new Ic;this.Ze=new Ic;this.Ce=A();this.h=new Ic;this.ze=new Ic;this.ff=new Ic;this.Be=new Ic;Oj(this)}function Oj(a){a.j.ra().forEach(function(a){var c=a.getName();a.Db().Od().forEach(function(d){this.Ze.set(c,this.j.table(d.Sa));this.h.set(d.Sa,a);0==d.action?(this.je.set(d.Sa,d),this.ff.set(d.Sa,a)):(this.Fd.set(d.Sa,d),this.ze.set(d.Sa,a));this.Ce.set(a.getName()+"."+d.rb,d.Sa);this.Be.set(d.Sa+"."+d.Mc,a.getName())},this)},a)}
function Rc(a,b,c){if(null!=c)return 1==c?a.Fd.get(b):a.je.get(b);c=a.Fd.get(b);a=a.je.get(b);return null===c&&null===a?null:(c||[]).concat(a||[])}function jh(a,b){var c=b.get(a);return null===c?[]:c}function lh(a,b){var c=D();b.forEach(function(a){(a=this.Ce.get(a))&&c.add(a)},a);return lc(c).map(function(a){return this.j.table(a)},a)}function hh(a,b,c){return null!=c?0==c?jh(b,a.ff):jh(b,a.ze):jh(b,a.h)}
function mh(a,b){var c=D();b.forEach(function(a){(a=this.Be.get(a))&&a.forEach(function(a){c.add(a)})},a);return lc(c).map(function(a){return this.j.table(a)},a)};function Pj(a,b,c){this.pg=a;this.ig=b;this.Rf=c}r("lf.schema.Constraint",Pj);Pj.prototype.gd=g("pg");Pj.prototype.getPrimaryKey=Pj.prototype.gd;Pj.prototype.Od=g("Rf");Pj.prototype.getForeignKeys=Pj.prototype.Od;function Qj(a,b,c){var d=a.ref.split(".");if(2!=d.length)throw new E(540,c);this.Ef=b;this.rb=a.local;this.Sa=d[0];this.Mc=d[1];this.name=b+"."+c;this.action=a.action;this.timing=a.timing};function Y(a){Rj(a);this.Ld=zd.Ac();this.w=a;this.K=A();this.xd=D();this.kc=D();this.Jc=D();this.Aa=null;this.ka=A();this.rd=!1;this.ub=[]}r("lf.schema.TableBuilder",Y);function Sj(a){this.name=a.name;this.kb=a.order;this.autoIncrement=a.autoIncrement}var Tj=D([0,6]);function Rj(a){if(!/^[A-Za-z_][A-Za-z0-9_]*$/.test(a))throw new E(502,a);}function Uj(a,b){if(b==a.w)throw new E(546,b);if(a.K.has(b)||a.ka.has(b)||a.kc.has(b))throw new E(503,a.w+"."+b);}
function Vj(a,b){var c=!1;b.forEach(function(a){var b=this.K.get(a.name);c=c||a.autoIncrement;if(a.autoIncrement&&3!=b)throw new E(504);},a);if(c&&1<b.length)throw new E(505);}function Wj(a){if(null!==a.Aa){var b=a.ka.get(a.Aa).map(function(a){return a.name}),c=0;if(a.ub.some(function(a,e){c=e;return-1!=b.indexOf(a.rb)},a))throw new E(543,a.ub[c].name);}}
function Xj(a){if(null!==a.Aa){var b=function(a){return a.name},c=JSON.stringify(a.ka.get(a.Aa).map(b));a.ka.forEach(function(a,e){if(e!=this.Aa){var f=a.map(b);if(JSON.stringify(f)==c)throw new E(544,this.w+"."+e);}},a)}}function Yj(a){null===a.Aa||a.ka.get(a.Aa).forEach(function(a){if(this.Jc.has(a.name))throw new E(545,this.w+"."+a.name);},a)}Y.prototype.uf=function(a,b){Rj(a);Uj(this,a);this.K.set(a,b);Tj.has(b)&&this.we([a]);return this};Y.prototype.addColumn=Y.prototype.uf;
Y.prototype.wf=function(a,b){var c=this.w;this.Aa="pk"+(c[0].toUpperCase()+c.substring(1));Rj(this.Aa);Uj(this,this.Aa);c=Zj(this,a,!0,void 0,b);Vj(this,c);1==c.length&&this.xd.add(c[0].name);this.kc.add(this.Aa);this.ka.set(this.Aa,c);return this};Y.prototype.addPrimaryKey=Y.prototype.wf;
Y.prototype.vf=function(a,b){Rj(a);Uj(this,a);var c=new Qj(b,this.w,a);q(c.action)||(c.action=0);q(c.timing)||(c.timing=0);if(1==c.action&&1==c.timing)throw new E(506);if(!this.K.has(c.rb))throw new E(540,a);this.ub.push(c);this.ve(a,[c.rb],this.xd.has(c.rb));return this};Y.prototype.addForeignKey=Y.prototype.vf;Y.prototype.xf=function(a,b){Rj(a);Uj(this,a);var c=Zj(this,b,!0);ak(this,a,c);1==c.length&&(this.xd.add(c[0].name),bk(this,c[0].name));this.ka.set(a,c);this.kc.add(a);return this};
Y.prototype.addUnique=Y.prototype.xf;function bk(a,b){a.ub.forEach(function(a){a.rb==b&&this.kc.add(a.name.split(".")[1])},a)}Y.prototype.we=function(a){a=Zj(this,a,!1);ck(this,a);a.forEach(function(a){this.Jc.add(a.name)},this);return this};Y.prototype.addNullable=Y.prototype.we;function ck(a,b){Jb(a.ka).forEach(function(a){var d=D();this.ka.get(a).forEach(function(a){d.add(a.name)});var e=b.filter(function(a){return d.has(a.name)});if(1<d.size&&0<e.length)throw new E(507,a,e.join(","));},a)}
Y.prototype.ve=function(a,b,c,d){Rj(a);Uj(this,a);b=Zj(this,b,!0,d);ak(this,a,b);c&&this.kc.add(a);this.ka.set(a,b);return this};Y.prototype.addIndex=Y.prototype.ve;function ak(a,b,c){if(1<c.length&&(a=c.filter(function(a){return this.Jc.has(a.name)},a),0<a.length))throw new E(507,b,a.join(","));}Y.prototype.zb=ba("rd");Y.prototype.persistentIndex=Y.prototype.zb;Y.prototype.vb=function(){Wj(this);Xj(this);Yj(this);return new (dk(this))};Y.prototype.getSchema=Y.prototype.vb;
function ek(a){return a.ub}function Zj(a,b,c,d,e){var f=b,f="string"==typeof b[0]?b.map(function(a){return new Sj({name:a,order:null!=d?d:1,autoIncrement:e||!1})}):b.map(function(a){return new Sj(a)});f.forEach(function(a){if(!this.K.has(a.name))throw new E(508,this.w,a.name);if(c){var b=this.K.get(a.name);if(0==b||6==b)throw new E(509,this.w,a.name);}},a);return f}
function dk(a){function b(){function b(c){return a.ka.get(c).map(function(a){return{ca:this[a.name],kb:a.kb,autoIncrement:a.autoIncrement}},this)}var d=Jb(a.K).map(function(b){this[b]=new X(this,b,a.xd.has(b),a.Jc.has(b),a.K.get(b));return this[b]},this),e=Jb(a.ka).map(function(d){return new qg(a.w,d,a.kc.has(d),b.call(this,d))},this);R.call(this,a.w,d,e,a.rd);var f=null===a.Aa?null:new qg(a.w,a.Aa,!0,b.call(this,a.Aa)),h=d.filter(function(b){return!a.Jc.has(b.getName())});this.Ff=new Pj(f,h,a.ub);
this.jf=fk(a,d,e)}t(b,R);b.prototype.tb=function(a){return new this.jf(nb++,a)};b.prototype.createRow=b.prototype.tb;b.prototype.Lb=function(a){var b={};this.gb().forEach(function(e){var f=e.getName();e=e.I();var h=a.value[f];if(0==e)if(e=h,null!=e&&""!=e){0!=e.length%2&&(e="0"+e);for(var h=new ArrayBuffer(e.length/2),k=new Uint8Array(h),n=0,B=0;n<e.length;n+=2)k[B++]=parseInt(e.substr(n,2),16);e=h}else e=null;else e=2==e?null!=h?new Date(h):null:h;b[f]=e},this);return new this.jf(a.id,b)};b.prototype.deserializeRow=
b.prototype.Lb;b.prototype.Db=g("Ff");b.prototype.getConstraint=b.prototype.Db;return b}
function fk(a,b,c){function d(a,d){this.K=b;this.ka=c;y.call(this,a,d)}t(d,y);d.prototype.Fe=function(){var a={};this.K.forEach(function(b){a[b.getName()]=b.Ec()?null:Hc[b.I()]});return a};d.prototype.qf=function(){var a={};this.K.forEach(function(b){var c=b.getName();b=b.I();var d=this.s[c];a[c]=0==b?null!=d?rb(d):null:2==b?null!=d?d.getTime():null:6==b?null!=d?d:null:d},this);return a};var e=function(a){var b=this.K.get(a.getName()),c=this.Ld.Re.get(b)||null;return function(b){return c(b[a.getName()])}}.bind(a),
f=function(a){var b=a.map(function(a){return e(a.ca)});return function(a){return b.map(function(b){return b(a)})}}.bind(a),h={};c.forEach(function(a){var b=a.m();a=1==a.f.length?e(a.f[0].ca):f(a.f);h[b]=a});d.prototype.Eb=function(a){return-1!=a.indexOf("#")?this.id():h.hasOwnProperty(a)?h[a](this.s):null};return d};function gk(a,b){this.j=new Z(a,b);this.pb=A();this.xc=!1}r("lf.schema.Builder",gk);function hk(a,b){b.ub.forEach(function(a){var d=a.Sa;if(!this.pb.has(d))throw new E(536,a.name);var d=this.pb.get(d).vb(),e=a.Mc;if(!d.hasOwnProperty(e))throw new E(537,a.name);if(b.vb()[a.rb].I()!=d[e].I())throw new E(538,a.name);if(!d[e].Fc())throw new E(539,a.name);},a)}gk.prototype.Df=function(a){a.ub.forEach(function(a){ek(this.pb.get(a.Sa)).forEach(function(c){if(c.rb==a.Mc)throw new E(534,a.name);},this)},this)};
function ik(a){a.xc||(a.pb.forEach(function(a){hk(this,a);a=a.vb();this.j.L.set(a.getName(),a)},a),C(a.pb).forEach(a.Df,a),jk(a),a.pb.clear(),a.xc=!0)}function kk(a,b,c){b.te||(b.te=!0,b.be=!0,b.Ge.forEach(function(a){a=c.get(a);if(!a.te)kk(this,a,c);else if(a.be&&b!=a)throw new E(533);},a));b.be=!1}function jk(a){var b=A();a.j.L.forEach(function(a,d){b.set(d,new lk(d))},a);a.pb.forEach(function(a,d){a.ub.forEach(function(a){b.get(a.Sa).Ge.add(d)})});C(b).forEach(function(a){kk(this,a,b)},a)}
function lk(a){this.be=this.te=!1;this.Ge=D();this.Rc=a}gk.prototype.vb=function(){this.xc||ik(this);return this.j};gk.prototype.getSchema=gk.prototype.vb;gk.prototype.Ie=function(){var a=new Rb("ns_"+this.j.name()),b;Mj||(Mj=new Lj);b=Mj;var c=null;b.Vd(a)?c=b.i(a):(c=new Lj,b.lb(a,c));return c};gk.prototype.getGlobal=gk.prototype.Ie;gk.prototype.connect=function(a){var b=this.Ie();b.Vd(Zb)||b.lb(Zb,this.vb());return(new W(b)).Fa(a)};gk.prototype.connect=gk.prototype.connect;
gk.prototype.Hf=function(a){if(this.pb.has(a))throw new E(503,a);if(this.xc)throw new E(535);this.pb.set(a,new Y(a));return this.pb.get(a)};gk.prototype.createTable=gk.prototype.Hf;gk.prototype.ne=function(a){if(this.xc)throw new E(535);this.j.ne(a);return this};gk.prototype.setPragma=gk.prototype.ne;function Z(a,b){this.w=a;this.Pa=b;this.L=A();this.cf={Lf:!1}}r("lf.schema.DatabaseSchema",Z);Z.prototype.name=g("w");Z.prototype.name=Z.prototype.name;Z.prototype.version=g("Pa");
Z.prototype.version=Z.prototype.version;Z.prototype.ra=function(){return C(this.L)};Z.prototype.tables=Z.prototype.ra;Z.prototype.table=function(a){if(!this.L.has(a))throw new E(101,a);return this.L.get(a)};Z.prototype.table=Z.prototype.table;Z.prototype.info=function(){this.Me||(this.Me=new Nj(this));return this.Me};Z.prototype.bf=g("cf");Z.prototype.pragma=Z.prototype.bf;Z.prototype.ne=ba("cf");r("lf.schema.create",function(a,b){return new gk(a,b)});v.prototype.catch=v.prototype.qe;v.prototype["catch"]=v.prototype.catch;}.bind(window))()
//# sourceMappingURL=lovefield.min.js.map
