if(!self.window){window=this;}
(function(){'use strict';function aa(){return function(){}}function ba(a){return function(b){this[a]=b}}function g(a){return function(){return this[a]}}function l(a){return function(){return a}}var m,p=this;function q(a){return void 0!==a}function ca(){}
function ea(a){var b=typeof a;if("object"==b)if(a){if(a instanceof Array)return"array";if(a instanceof Object)return b;var c=Object.prototype.toString.call(a);if("[object Window]"==c)return"object";if("[object Array]"==c||"number"==typeof a.length&&"undefined"!=typeof a.splice&&"undefined"!=typeof a.propertyIsEnumerable&&!a.propertyIsEnumerable("splice"))return"array";if("[object Function]"==c||"undefined"!=typeof a.call&&"undefined"!=typeof a.propertyIsEnumerable&&!a.propertyIsEnumerable("call"))return"function"}else return"null";
else if("function"==b&&"undefined"==typeof a.call)return"object";return b}function fa(a){return null===a}function ga(a){return null!=a}function ha(a){var b=ea(a);return"array"==b||"object"==b&&"number"==typeof a.length}function ia(a){return"string"==typeof a}function ja(a){return"function"==ea(a)}function ka(a){return a[la]||(a[la]=++ma)}var la="closure_uid_"+(1E9*Math.random()>>>0),ma=0;function na(a,b,c){return a.call.apply(a.bind,arguments)}
function oa(a,b,c){if(!a)throw Error();if(2<arguments.length){var d=Array.prototype.slice.call(arguments,2);return function(){var c=Array.prototype.slice.call(arguments);Array.prototype.unshift.apply(c,d);return a.apply(b,c)}}return function(){return a.apply(b,arguments)}}function pa(a,b,c){pa=Function.prototype.bind&&-1!=Function.prototype.bind.toString().indexOf("native code")?na:oa;return pa.apply(null,arguments)}
function qa(a,b){var c=Array.prototype.slice.call(arguments,1);return function(){var b=c.slice();b.push.apply(b,arguments);return a.apply(this,b)}}function r(a,b){var c=a.split("."),d=p;c[0]in d||!d.execScript||d.execScript("var "+c[0]);for(var e;c.length&&(e=c.shift());)!c.length&&q(b)?d[e]=b:d=d[e]?d[e]:d[e]={}}
function t(a,b){function c(){}c.prototype=b.prototype;a.eb=b.prototype;a.prototype=new c;a.prototype.constructor=a;a.Ng=function(a,c,f){for(var h=Array(arguments.length-2),k=2;k<arguments.length;k++)h[k-2]=arguments[k];return b.prototype[c].apply(a,h)}};function ra(a){if(Error.captureStackTrace)Error.captureStackTrace(this,ra);else{var b=Error().stack;b&&(this.stack=b)}a&&(this.message=String(a))}t(ra,Error);ra.prototype.name="CustomError";var sa=String.prototype.trim?function(a){return a.trim()}:function(a){return a.replace(/^[\s\xa0]+|[\s\xa0]+$/g,"")};
function ta(a){var b=0,c=sa(String(ua)).split(".");a=sa(String(a)).split(".");for(var d=Math.max(c.length,a.length),e=0;0==b&&e<d;e++){var f=c[e]||"",h=a[e]||"",k=/(\d*)(\D*)/g,n=/(\d*)(\D*)/g;do{var B=k.exec(f)||["","",""],O=n.exec(h)||["","",""];if(0==B[0].length&&0==O[0].length)break;b=va(0==B[1].length?0:parseInt(B[1],10),0==O[1].length?0:parseInt(O[1],10))||va(0==B[2].length,0==O[2].length)||va(B[2],O[2])}while(0==b)}return b}function va(a,b){return a<b?-1:a>b?1:0};function wa(a,b,c){this.ig=c;this.Mf=a;this.Dg=b;this.pd=0;this.gd=null}wa.prototype.get=function(){var a;0<this.pd?(this.pd--,a=this.gd,this.gd=a.next,a.next=null):a=this.Mf();return a};wa.prototype.put=function(a){this.Dg(a);this.pd<this.ig&&(this.pd++,a.next=this.gd,this.gd=a)};var xa=Array.prototype,ya=xa.indexOf?function(a,b,c){return xa.indexOf.call(a,b,c)}:function(a,b,c){c=null==c?0:0>c?Math.max(0,a.length+c):c;if(ia(a))return ia(b)&&1==b.length?a.indexOf(b,c):-1;for(;c<a.length;c++)if(c in a&&a[c]===b)return c;return-1},za=xa.forEach?function(a,b,c){xa.forEach.call(a,b,c)}:function(a,b,c){for(var d=a.length,e=ia(a)?a.split(""):a,f=0;f<d;f++)f in e&&b.call(c,e[f],f,a)},Aa=xa.map?function(a,b,c){return xa.map.call(a,b,c)}:function(a,b,c){for(var d=a.length,e=Array(d),
f=ia(a)?a.split(""):a,h=0;h<d;h++)h in f&&(e[h]=b.call(c,f[h],h,a));return e},Ba=xa.reduce?function(a,b,c,d){d&&(b=pa(b,d));return xa.reduce.call(a,b,c)}:function(a,b,c,d){var e=c;za(a,function(c,h){e=b.call(d,e,c,h,a)});return e},Ca=xa.some?function(a,b,c){return xa.some.call(a,b,c)}:function(a,b,c){for(var d=a.length,e=ia(a)?a.split(""):a,f=0;f<d;f++)if(f in e&&b.call(c,e[f],f,a))return!0;return!1};function Da(a,b,c){return 2>=arguments.length?xa.slice.call(a,b):xa.slice.call(a,b,c)}
function Ea(a){for(var b=[],c=0;c<a;c++)b[c]=0;return b}function Fa(a){for(var b=[],c=0;c<arguments.length;c++){var d=arguments[c];if("array"==ea(d))for(var e=0;e<d.length;e+=8192)for(var f=Fa.apply(null,Da(d,e,e+8192)),h=0;h<f.length;h++)b.push(f[h]);else b.push(d)}return b};function Ga(a){var b=[],c=0,d;for(d in a)b[c++]=a[d];return b};var Ha;a:{var Ia=p.navigator;if(Ia){var Ja=Ia.userAgent;if(Ja){Ha=Ja;break a}}Ha=""}function u(a){return-1!=Ha.indexOf(a)};function Ka(){return u("Opera")||u("OPR")}function La(){return(u("Chrome")||u("CriOS"))&&!Ka()&&!u("Edge")};function Na(a){p.setTimeout(function(){throw a;},0)}var Oa;
function Pa(){var a=p.MessageChannel;"undefined"===typeof a&&"undefined"!==typeof window&&window.postMessage&&window.addEventListener&&!u("Presto")&&(a=function(){var a=document.createElement("IFRAME");a.style.display="none";a.src="";document.documentElement.appendChild(a);var b=a.contentWindow,a=b.document;a.open();a.write("");a.close();var c="callImmediate"+Math.random(),d="file:"==b.location.protocol?"*":b.location.protocol+"//"+b.location.host,a=pa(function(a){if(("*"==d||a.origin==d)&&a.data==
c)this.port1.onmessage()},this);b.addEventListener("message",a,!1);this.port1={};this.port2={postMessage:function(){b.postMessage(c,d)}}});if("undefined"!==typeof a&&!u("Trident")&&!u("MSIE")){var b=new a,c={},d=c;b.port1.onmessage=function(){if(q(c.next)){c=c.next;var a=c.Ee;c.Ee=null;a()}};return function(a){d.next={Ee:a};d=d.next;b.port2.postMessage(0)}}return"undefined"!==typeof document&&"onreadystatechange"in document.createElement("SCRIPT")?function(a){var b=document.createElement("SCRIPT");
b.onreadystatechange=function(){b.onreadystatechange=null;b.parentNode.removeChild(b);b=null;a();a=null};document.documentElement.appendChild(b)}:function(a){p.setTimeout(a,0)}};function Qa(){this.yd=this.pc=null}var Sa=new wa(function(){return new Ra},function(a){a.reset()},100);Qa.prototype.add=function(a,b){var c=Sa.get();c.set(a,b);this.yd?this.yd.next=c:this.pc=c;this.yd=c};Qa.prototype.remove=function(){var a=null;this.pc&&(a=this.pc,this.pc=this.pc.next,this.pc||(this.yd=null),a.next=null);return a};function Ra(){this.next=this.scope=this.Qd=null}Ra.prototype.set=function(a,b){this.Qd=a;this.scope=b;this.next=null};
Ra.prototype.reset=function(){this.next=this.scope=this.Qd=null};function Ta(a,b){Ua||Va();Wa||(Ua(),Wa=!0);Xa.add(a,b)}var Ua;function Va(){if(p.Promise&&p.Promise.resolve){var a=p.Promise.resolve(void 0);Ua=function(){a.then(Ya)}}else Ua=function(){var a=Ya;!ja(p.setImmediate)||p.Window&&p.Window.prototype&&p.Window.prototype.setImmediate==p.setImmediate?(Oa||(Oa=Pa()),Oa(a)):p.setImmediate(a)}}var Wa=!1,Xa=new Qa;function Ya(){for(var a=null;a=Xa.remove();){try{a.Qd.call(a.scope)}catch(b){Na(b)}Sa.put(a)}Wa=!1};function v(a,b){this.Va=0;this.nf=void 0;this.Wc=this.fc=this.G=null;this.fd=this.Od=!1;if(a!=ca)try{var c=this;a.call(b,function(a){Za(c,2,a)},function(a){Za(c,3,a)})}catch(d){Za(this,3,d)}}function $a(){this.next=this.context=this.lc=this.Ic=this.child=null;this.Bd=!1}$a.prototype.reset=function(){this.context=this.lc=this.Ic=this.child=null;this.Bd=!1};var ab=new wa(function(){return new $a},function(a){a.reset()},100);function bb(a,b,c){var d=ab.get();d.Ic=a;d.lc=b;d.context=c;return d}
function w(a){if(a instanceof v)return a;var b=new v(ca);Za(b,2,a);return b}function cb(a){return new v(function(b,c){c(a)})}function db(a,b,c){eb(a,b,c,null)||Ta(qa(b,a))}function fb(a){return new v(function(b,c){var d=a.length,e=[];if(d)for(var f=function(a,c){d--;e[a]=c;0==d&&b(e)},h=function(a){c(a)},k=0,n;k<a.length;k++)n=a[k],db(n,qa(f,k),h);else b(e)})}function x(){var a,b,c=new v(function(c,e){a=c;b=e});return new gb(c,a,b)}
v.prototype.then=function(a,b,c){return hb(this,ja(a)?a:null,ja(b)?b:null,c)};v.prototype.then=v.prototype.then;v.prototype.$goog_Thenable=!0;v.prototype.te=function(a,b){return hb(this,null,a,b)};function ib(a,b){a.fc||2!=a.Va&&3!=a.Va||jb(a);a.Wc?a.Wc.next=b:a.fc=b;a.Wc=b}
function hb(a,b,c,d){var e=bb(null,null,null);e.child=new v(function(a,h){e.Ic=b?function(c){try{var e=b.call(d,c);a(e)}catch(B){h(B)}}:a;e.lc=c?function(b){try{var e=c.call(d,b);!q(e)&&b instanceof kb?h(b):a(e)}catch(B){h(B)}}:h});e.child.G=a;ib(a,e);return e.child}v.prototype.Ig=function(a){this.Va=0;Za(this,2,a)};v.prototype.Jg=function(a){this.Va=0;Za(this,3,a)};
function Za(a,b,c){0==a.Va&&(a==c&&(b=3,c=new TypeError("Promise cannot resolve to itself")),a.Va=1,eb(c,a.Ig,a.Jg,a)||(a.nf=c,a.Va=b,a.G=null,jb(a),3!=b||c instanceof kb||lb(a,c)))}function eb(a,b,c,d){if(a instanceof v)return ib(a,bb(b||ca,c||null,d)),!0;var e;if(a)try{e=!!a.$goog_Thenable}catch(h){e=!1}else e=!1;if(e)return a.then(b,c,d),!0;e=typeof a;if("object"==e&&null!=a||"function"==e)try{var f=a.then;if(ja(f))return mb(a,f,b,c,d),!0}catch(h){return c.call(d,h),!0}return!1}
function mb(a,b,c,d,e){function f(a){k||(k=!0,d.call(e,a))}function h(a){k||(k=!0,c.call(e,a))}var k=!1;try{b.call(a,h,f)}catch(n){f(n)}}function jb(a){a.Od||(a.Od=!0,Ta(a.Rf,a))}function nb(a){var b=null;a.fc&&(b=a.fc,a.fc=b.next,b.next=null);a.fc||(a.Wc=null);return b}
v.prototype.Rf=function(){for(var a=null;a=nb(this);){var b=this.Va,c=this.nf;if(3==b&&a.lc&&!a.Bd)for(var d=void 0,d=this;d&&d.fd;d=d.G)d.fd=!1;if(a.child)a.child.G=null,ob(a,b,c);else try{a.Bd?a.Ic.call(a.context):ob(a,b,c)}catch(e){pb.call(null,e)}ab.put(a)}this.Od=!1};function ob(a,b,c){2==b?a.Ic.call(a.context,c):a.lc&&a.lc.call(a.context,c)}function lb(a,b){a.fd=!0;Ta(function(){a.fd&&pb.call(null,b)})}var pb=Na;function kb(a){ra.call(this,a)}t(kb,ra);kb.prototype.name="cancel";
function gb(a,b,c){this.da=a;this.resolve=b;this.reject=c};function qb(a,b,c,d){c=c||function(a,b){return a==b};d=d||function(b){return a[b]};for(var e=a.length,f=b.length,h=[],k=0;k<e+1;k++)h[k]=[],h[k][0]=0;for(var n=0;n<f+1;n++)h[0][n]=0;for(k=1;k<=e;k++)for(n=1;n<=f;n++)c(a[k-1],b[n-1])?h[k][n]=h[k-1][n-1]+1:h[k][n]=Math.max(h[k-1][n],h[k][n-1]);for(var B=[],k=e,n=f;0<k&&0<n;)c(a[k-1],b[n-1])?(B.unshift(d(k-1,n-1)),k--,n--):h[k-1][n]>h[k][n-1]?k--:n--;return B}function rb(a){return Ba(arguments,function(a,c){return a+c},0)}
function sb(a){return rb.apply(null,arguments)/arguments.length}function tb(a){var b=arguments.length;if(2>b)return 0;var c=sb.apply(null,arguments);return rb.apply(null,Aa(arguments,function(a){return Math.pow(a-c,2)}))/(b-1)}function ub(a){return Math.sqrt(tb.apply(null,arguments))};var vb="StopIteration"in p?p.StopIteration:{message:"StopIteration",stack:""};function wb(){}wb.prototype.next=function(){throw vb;};wb.prototype.qc=function(){return this};function xb(a){if(a instanceof wb)return a;if("function"==typeof a.qc)return a.qc(!1);if(ha(a)){var b=0,c=new wb;c.next=function(){for(;;){if(b>=a.length)throw vb;if(b in a)return a[b++];b++}};return c}throw Error("Not implemented");}
function yb(a,b){if(ha(a))try{za(a,b,void 0)}catch(c){if(c!==vb)throw c;}else{a=xb(a);try{for(;;)b.call(void 0,a.next(),void 0,a)}catch(c){if(c!==vb)throw c;}}}function zb(a){if(Ca(arguments,function(a){return!a.length})||!arguments.length)return new wb;var b=new wb,c=arguments,d=Ea(c.length);b.next=function(){if(d){for(var a=Aa(d,function(a,b){return c[b][a]}),b=d.length-1;0<=b;b--){if(d[b]<c[b].length-1){d[b]++;break}if(0==b){d=null;break}d[b]=0}return a}throw vb;};return b};function Cb(a,b){this.o={};this.b=[];this.Qa=this.Gb=0;var c=arguments.length;if(1<c){if(c%2)throw Error("Uneven number of arguments");for(var d=0;d<c;d+=2)this.set(arguments[d],arguments[d+1])}else a&&this.addAll(a)}m=Cb.prototype;m.Ac=g("Gb");m.ta=function(){Db(this);for(var a=[],b=0;b<this.b.length;b++)a.push(this.o[this.b[b]]);return a};function Eb(a){Db(a);return a.b.concat()}m.Na=function(a){return Fb(this.o,a)};m.kd=function(){return 0==this.Gb};
m.clear=function(){this.o={};this.Qa=this.Gb=this.b.length=0};m.remove=function(a){return Fb(this.o,a)?(delete this.o[a],this.Gb--,this.Qa++,this.b.length>2*this.Gb&&Db(this),!0):!1};function Db(a){if(a.Gb!=a.b.length){for(var b=0,c=0;b<a.b.length;){var d=a.b[b];Fb(a.o,d)&&(a.b[c++]=d);b++}a.b.length=c}if(a.Gb!=a.b.length){for(var e={},c=b=0;b<a.b.length;)d=a.b[b],Fb(e,d)||(a.b[c++]=d,e[d]=1),b++;a.b.length=c}}m.get=function(a,b){return Fb(this.o,a)?this.o[a]:b};
m.set=function(a,b){Fb(this.o,a)||(this.Gb++,this.b.push(a),this.Qa++);this.o[a]=b};m.addAll=function(a){var b;if(a instanceof Cb)b=Eb(a),a=a.ta();else{b=[];var c=0,d;for(d in a)b[c++]=d;a=Ga(a)}for(c=0;c<b.length;c++)this.set(b[c],a[c])};m.forEach=function(a,b){for(var c=Eb(this),d=0;d<c.length;d++){var e=c[d],f=this.get(e);a.call(b,f,e,this)}};m.clone=function(){return new Cb(this)};
m.qc=function(a){Db(this);var b=0,c=this.Qa,d=this,e=new wb;e.next=function(){if(c!=d.Qa)throw Error("The map has changed since the iterator was created");if(b>=d.b.length)throw vb;var e=d.b[b++];return a?e:d.o[e]};return e};function Fb(a,b){return Object.prototype.hasOwnProperty.call(a,b)};function Gb(){return u("iPhone")&&!u("iPod")&&!u("iPad")};var Hb=Ka(),Ib=u("Trident")||u("MSIE"),Jb=u("Edge"),Kb=u("Gecko")&&!(-1!=Ha.toLowerCase().indexOf("webkit")&&!u("Edge"))&&!(u("Trident")||u("MSIE"))&&!u("Edge"),Lb=-1!=Ha.toLowerCase().indexOf("webkit")&&!u("Edge");function Mb(){var a=Ha;if(Kb)return/rv\:([^\);]+)(\)|;)/.exec(a);if(Jb)return/Edge\/([\d\.]+)/.exec(a);if(Ib)return/\b(?:MSIE|rv)[: ]([^\);]+)(\)|;)/.exec(a);if(Lb)return/WebKit\/(\S+)/.exec(a)}
var ua=function(){if(Hb&&p.opera){var a;var b=p.opera.version;try{a=b()}catch(c){a=b}return a}a="";(b=Mb())&&(a=b?b[1]:"");return Ib&&(b=(b=p.document)?b.documentMode:void 0,b>parseFloat(a))?String(b):a}(),Nb={};var Ob=Gb()||u("iPod"),Pb=u("iPad");!u("Android")||La()||u("Firefox")||Ka();var Qb=La(),Rb=u("Safari")&&!(La()||u("Coast")||Ka()||u("Edge")||u("Silk")||u("Android"))&&!(Gb()||u("iPad")||u("iPod"));/*

 Copyright 2015 The Lovefield Project Authors. All Rights Reserved.

 Licensed under the Apache License, Version 2.0 (the "License");
 you may not use this file except in compliance with the License.
 You may obtain a copy of the License at

     http://www.apache.org/licenses/LICENSE-2.0

 Unless required by applicable law or agreed to in writing, software
 distributed under the License is distributed on an "AS IS" BASIS,
 WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 See the License for the specific language governing permissions and
 limitations under the License.
*/
function Sb(){this.me=Rb||Pb||Ob;this.ag=!(this.me||Ib&&!Nb[10]&&!(Nb[10]=0<=ta(10)));!Ib||Nb[11]||(Nb[11]=0<=ta(11));this.Lg=Qb||Rb;this.ng=q(window.Map)&&q(window.Map.prototype.values)&&q(window.Map.prototype.forEach)&&!this.me;this.og=q(window.Set)&&q(window.Set.prototype.values)&&q(window.Set.prototype.forEach)&&!this.me}var Tb;function Ub(){q(Tb)||(Tb=new Sb);return Tb};function y(){this.o=new Cb;Object.defineProperty(this,"size",{get:function(){return this.o.Ac()}})}y.prototype.clear=function(){this.o.clear()};y.prototype.clear=y.prototype.clear;y.prototype.delete=function(a){return this.o.remove(a)};y.prototype["delete"]=y.prototype.delete;y.prototype.forEach=function(a,b){return this.o.forEach(a,b)};y.prototype.forEach=y.prototype.forEach;y.prototype.get=function(a){return this.o.get(a)};y.prototype.get=y.prototype.get;y.prototype.has=function(a){return this.o.Na(a)};
y.prototype.has=y.prototype.has;y.prototype.set=function(a,b){return this.o.set(a,b)};y.prototype.set=y.prototype.set;var Vb=Ub().ng;function z(){return Vb?new window.Map:new y}function Wb(a){if(a instanceof y)return Eb(a.o);var b=0,c=Array(a.size);a.forEach(function(a,e){c[b++]=e});return c}function A(a){if(a instanceof y)return a.o.ta();var b=0,c=Array(a.size);a.forEach(function(a){c[b++]=a});return c};/*

 Copyright 2014 The Lovefield Project Authors. All Rights Reserved.

 Licensed under the Apache License, Version 2.0 (the "License");
 you may not use this file except in compliance with the License.
 You may obtain a copy of the License at

     http://www.apache.org/licenses/LICENSE-2.0

 Unless required by applicable law or agreed to in writing, software
 distributed under the License is distributed on an "AS IS" BASIS,
 WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 See the License for the specific language governing permissions and
 limitations under the License.
*/
function Xb(a,b){this.pa=a;this.s=b||this.Je()}var Yb=0;m=Xb.prototype;m.id=g("pa");m.Je=function(){return{}};m.vf=g("s");m.Ga=function(){return{id:this.pa,value:this.vf()}};m.mb=function(a){return"#"==a.substr(-1)?this.pa:null};function Zb(a){return new Xb(a.id,a.value)}function $b(a){return new Xb(Yb++,a||{})}function ac(a){if(null==a)return null;a=new Uint8Array(a);for(var b="",c=0;c<a.length;++c)var d=a[c].toString(16),b=b+(2>d.length?"0"+d:d);return b};var cc={};r("lf.TransactionType",cc);cc.READ_ONLY=0;cc.READ_WRITE=1;function dc(a,b){this.ue=a;this.Sa=b||null;this.S=x()}dc.prototype.ia=function(){return 0==this.ue?this.tc():ec(this)};function ec(a){try{fc(a.Sa)}catch(b){return cb(b)}return gc(a).then(function(a){this.Sa.ia();return a}.bind(a))}function gc(a){hc(a);ic(a);return a.tc()}
function hc(a){a.Sa.vb.forEach(function(a,c){var d=this.Sa.ca().get(c),d=this.I(d.getName(),d.ib.bind(d),0),e=A(a.za).map(function(a){return a.id()});0<e.length&&d.remove(e).te(this.Re,this);e=A(a.na).map(function(a){return a[1]}).concat(A(a.wa));d.put(e).te(this.Re,this)},a)}function ic(a){jc(a.Sa).forEach(function(a){var c=this.I(a.getName(),Zb,1);c.remove([]);c.put(a.Ga())},a)}dc.prototype.Re=function(a){this.S.reject(a)};function kc(a){this.Eg=a}kc.prototype.toString=g("Eg");var lc=new kc("backstore"),mc=new kc("cache"),nc=new kc("indexstore"),oc=new kc("engine"),pc=new kc("runner"),qc=new kc("observerregistry"),rc=new kc("schema");function sc(a){if(a.ta&&"function"==typeof a.ta)return a.ta();if(ia(a))return a.split("");if(ha(a)){for(var b=[],c=a.length,d=0;d<c;d++)b.push(a[d]);return b}return Ga(a)};function tc(a){this.o=new Cb;a&&this.addAll(a)}function uc(a){var b=typeof a;return"object"==b&&a||"function"==b?"o"+ka(a):b.substr(0,1)+a}m=tc.prototype;m.Ac=function(){return this.o.Ac()};m.add=function(a){this.o.set(uc(a),a)};m.addAll=function(a){a=sc(a);for(var b=a.length,c=0;c<b;c++)this.add(a[c])};m.remove=function(a){return this.o.remove(uc(a))};m.clear=function(){this.o.clear()};m.kd=function(){return this.o.kd()};m.contains=function(a){return this.o.Na(uc(a))};m.ta=function(){return this.o.ta()};
m.clone=function(){return new tc(this)};m.qc=function(){return this.o.qc(!1)};function vc(a){this.Zb=new tc(a);Object.defineProperty(this,"size",{get:function(){return this.Zb.Ac()}})}vc.prototype.add=function(a){this.Zb.add(a)};vc.prototype.add=vc.prototype.add;vc.prototype.clear=function(){this.Zb.clear()};vc.prototype.clear=vc.prototype.clear;vc.prototype.delete=function(a){return this.Zb.remove(a)};vc.prototype["delete"]=vc.prototype.delete;vc.prototype.forEach=function(a,b){this.Zb.ta().forEach(a,b)};vc.prototype.has=function(a){return this.Zb.contains(a)};
vc.prototype.has=vc.prototype.has;var wc=Ub().og;function C(a){return wc?q(a)?new window.Set(a):new window.Set:new vc(a)}function D(a){if(a instanceof vc)return a.Zb.ta();var b=0,c=Array(a.size);a.forEach(function(a){c[b++]=a});return c}function xc(a,b){if(b.size>a.size)return!1;var c=!0;b.forEach(function(b){c=c&&a.has(b)});return c};function yc(a,b){this.pa=a;this.s=b||{}}function zc(a){var b=C();a.forEach(function(a){b.add(a>>9)});return D(b)}yc.prototype.Z=g("pa");function Ac(a,b){b.forEach(function(a){this.s[a.id()]=a.Ga()},a)}function Bc(a,b){b.forEach(function(a){delete this.s[a]},a)}yc.prototype.Ga=function(){return{id:this.pa,value:JSON.stringify(this.s)}};function Cc(a){return new yc(a.id,JSON.parse(a.value))};function Dc(a,b,c){this.X=a;this.Ib=b;this.of=c}m=Dc.prototype;m.get=function(a){if(0==a.length)return this.Rd();var b=this.Ib;return Ec(this,a).then(function(c){return a.map(function(a){var e=c.get(a>>9);return b(e.s[a])})})};function Ec(a,b){var c=z(),d=x(),e=zc(b).map(function(a){return new v(function(b,d){var e;try{e=this.X.get(a)}catch(B){d(B);return}e.onerror=d;e.onsuccess=function(a){a=Cc(a.target.result);c.set(a.Z(),a);b()}},this)},a);fb(e).then(function(){d.resolve(c)});return d.da}
m.Rd=function(){return new v(function(a,b){var c=[],d;try{d=this.X.openCursor()}catch(e){b(e);return}d.onerror=b;d.onsuccess=function(){var b=d.result;if(b){var f;f=Cc(b.value).s;for(var h in f)c.push(this.Ib(f[h]));b.continue()}else a(c)}.bind(this)},this)};m.Vb=function(a){return new v(function(b,c){var d;try{d=a()}catch(e){c(e);return}d.onsuccess=b;d.onerror=c},this)};
m.put=function(a){if(0==a.length)return w();var b=z();a.forEach(function(a){var d;d=a.id()>>9;var e=b.get(d)||null;null===e&&(e=this.of(this.X.name,d));Ac(e,[a]);b.set(d,e)},this);a=A(b).map(function(a){return this.Vb(function(){return this.X.put(a.Ga())}.bind(this))},this);return fb(a)};
m.remove=function(a){if(0==a.length)return this.Vb(function(){return this.X.clear()}.bind(this));var b=z();a.forEach(function(a){var d=a>>9,e=b.get(d)||null;null===e&&(e=this.of(this.X.name,d));Bc(e,[a]);b.set(d,e)},this);a=A(b).map(function(a){return this.Vb(function(){return 0==Object.keys(a.s).length?this.X.delete(a.Z()):this.X.put(a.Ga())}.bind(this))},this);return fb(a)};function Fc(a,b,c){a=a.l(mc);var d=[c<<9,(c+1<<9)-1];b=a.ab(b,d[0],d[1]);c=new yc(c);Ac(c,b);return c}
function Gc(a,b){return new yc(b)};function Hc(a){this.V=a.l(mc);this.F=a.l(nc);this.g=a.l(rc)}Hc.prototype.update=function(a){a.forEach(function(a){Ic(this,a);Jc(this,a)},this)};function Jc(a,b){var c=b.getName();b.za.forEach(function(a,b){this.V.remove(c,b)},a);b.wa.forEach(function(a){this.V.set(c,a)},a);b.na.forEach(function(a){this.V.set(c,a[1])},a)}function Ic(a,b){var c=a.g.table(b.getName());Kc(b).forEach(function(a){Lc(this,c,a)},a)}
function Lc(a,b,c){var d=a.F.nc.get(b.getName())||[],e=0;d.forEach(function(a){try{Mc(a,c),e++}catch(b){throw d.slice(0,e).forEach(function(a){Mc(a,[c[1],c[0]])},this),b;}},a)}function Mc(a,b){var c=null===b[1]?void 0:b[1].mb(a.getName()),d=null===b[0]?void 0:b[0].mb(a.getName());if(!q(d)&&q(c))a.add(c,b[1].id());else if(q(d)&&q(c)){if(null===c||null===d){if(c==d)return}else if(0==a.hb().compare(d,c))return;a.add(c,b[1].id());a.remove(d,b[0].id())}else q(d)&&!q(c)&&a.remove(d,b[0].id())};var Nc={};r("lf.ConstraintAction",Nc);Nc.RESTRICT=0;Nc.CASCADE=1;var Oc={};r("lf.ConstraintTiming",Oc);Oc.IMMEDIATE=0;Oc.DEFERRABLE=1;var Pc={};r("lf.Order",Pc);Pc.DESC=0;Pc.ASC=1;var Qc={};r("lf.Type",Qc);Qc.ARRAY_BUFFER=0;Qc.BOOLEAN=1;Qc.DATE_TIME=2;Qc.INTEGER=3;Qc.NUMBER=4;Qc.STRING=5;Qc.OBJECT=6;var Rc={0:null,1:!1,2:Object.freeze(new Date(0)),3:0,4:0,5:"",6:null};r("lf.type.DEFAULT_VALUES",Rc);function E(a,b){this.code=a;this.message="http://sn.im/2a0j3wn?c="+a;if(1<arguments.length)for(var c=1;c<=Math.min(4,arguments.length-1);++c)this.message+="&p"+(c-1)+"="+encodeURIComponent(arguments[c].toString().slice(0,64))}t(E,Error);function Sc(){this.o=z();this.size=0}m=Sc.prototype;m.has=function(a){return this.o.has(a)};m.set=function(a,b){var c=this.o.get(a)||null;null===c&&(c=C(),this.o.set(a,c));c.has(b)||(c.add(b),this.size++);return this};m.Yb=function(a,b){var c=this.o.get(a)||null;null===c&&(c=C(),this.o.set(a,c));b.forEach(function(a){c.has(a)||(c.add(a),this.size++)},this);return this};m.Zd=function(a){a.keys().forEach(function(b){var c=a.get(b);this.Yb(b,c)},this);return this};
m.delete=function(a,b){var c=this.o.get(a,null);if(null===c)return!1;var d=c.delete(b);d&&(--this.size,0==c.size&&this.o.delete(a));return d};m.get=function(a){a=this.o.get(a)||null;return null===a?null:D(a)};m.clear=function(){this.o.clear();this.size=0};m.keys=function(){return Wb(this.o)};m.values=function(){var a=[];this.o.forEach(function(b){a.push.apply(a,D(b))});return a};function Tc(a){this.F=a.l(nc);this.g=a.l(rc);this.V=a.l(mc);this.$c=null}function Uc(a,b,c){var d=b.Jb().qg;c.forEach(function(a){d.forEach(function(b){if(null==a.s[b.getName()])throw new E(202,b.m());},this)},a)}function Vc(a,b,c,d){b.Jb().Sd().forEach(function(a){a.timing==d&&Xc(this,a,c)},a)}function Xc(a,b,c){var d=Yc(a,b);c.forEach(function(a){if(Zc(a[0],a[1],b.name)&&(a=a[1].mb(b.name),null!==a&&!d.Na(a)))throw new E(203,b.name);},a)}
function Yc(a,b){null===a.$c&&(a.$c=z());var c=a.$c.get(b.name)||null;null===c&&(c=a.g.table(b.Ta)[b.Jc].Aa(),c=a.F.get(c.m()),a.$c.set(b.name,c));return c}function Zc(a,b,c){return(null===a?null!==b:null===b)||a.mb(c)!=b.mb(c)}function $c(a,b,c,d){b=ad(a.g.info(),b.getName(),0);null!==b&&(b=b.filter(function(a){return a.timing==d}),0!=b.length&&bd(a,b,c,function(a,b,c){if(b.Na(c))throw new E(203,a.name);}))}
function cd(a,b,c){b=ad(a.g.info(),b.getName(),1);if(null===b)return null;var d=new Sc;bd(a,b,c,function(a,b,c){b=b.get(c);0<b.length&&d.Yb(a.Fe,b)});return d}function dd(a,b,c){var d=new Sc;bd(a,c,b,function(a,b,c,k){b.get(c).forEach(function(b){d.set(b,{Pd:a,vg:k[1]})})});return d}function bd(a,b,c,d){b.forEach(function(a){var b=this.F.get(a.name),h=Yc(this,a);c.forEach(function(c){if(Zc(c[0],c[1],h.getName())){var n=c[0].mb(h.getName());d(a,b,n,c)}},this)},a)}
function ed(a,b,c,d){0!=c.length&&(c=c.map(function(a){return[null,a]}),Vc(a,b,c,d))}function fd(a,b,c,d){0!=c.length&&(Vc(a,b,c,d),$c(a,b,c,d))}function gd(a,b,c,d){0!=c.length&&(c=c.map(function(a){return[a,null]}),$c(a,b,c,d))}
function hd(a,b,c){var d={re:[],qf:new Sc},e=new Sc;e.Yb(b.getName(),c.map(function(a){return a.id()}));do{var f=new Sc;e.keys().forEach(function(a){var b=this.g.table(a);a=e.get(a).map(function(a){return[this.V.get(a),null]},this);b=cd(this,b,a);null!==b&&(d.re.unshift.apply(d.re,b.keys()),f.Zd(b))},a);e=f;d.qf.Zd(e)}while(0<e.size);return d};function id(a){this.wa=z();this.na=z();this.za=z();this.B=a}m=id.prototype;m.getName=g("B");m.add=function(a){if(this.za.has(a.id())){var b=[this.za.get(a.id()),a];this.na.set(a.id(),b);this.za.delete(a.id())}else this.wa.set(a.id(),a)};m.modify=function(a){var b=a[1],c=a[0].id();this.wa.has(c)?this.wa.set(c,b):(this.na.has(c)&&(a=[this.na.get(a[0].id())[0],b]),this.na.set(c,a))};
m.delete=function(a){if(this.wa.has(a.id()))this.wa.delete(a.id());else if(this.na.has(a.id())){var b=this.na.get(a.id())[0];this.na.delete(a.id());this.za.set(a.id(),b)}else this.za.set(a.id(),a)};m.Zd=function(a){a.wa.forEach(function(a){this.add(a)},this);a.na.forEach(function(a){this.modify(a)},this);a.za.forEach(function(a){this.delete(a)},this)};
function Kc(a){var b=[];a.wa.forEach(function(a){b.push([null,a])});a.na.forEach(function(a){b.push(a)});a.za.forEach(function(a){b.push([a,null])});return b}m.toString=function(){return"["+Wb(this.wa).toString()+"], ["+Wb(this.na).toString()+"], ["+Wb(this.za).toString()+"]"};function jd(a){var b=new id(a.B);a.wa.forEach(function(a){b.delete(a)});a.za.forEach(function(a){b.add(a)});a.na.forEach(function(a){b.modify([a[1],a[0]])});return b}
m.kd=function(){return 0==this.wa.size&&0==this.za.size&&0==this.na.size};function kd(a,b){this.aa=z();b.forEach(function(a){this.aa.set(a.getName(),a)},this);this.g=a.l(rc);this.V=a.l(mc);this.F=a.l(nc);this.xa=new Tc(a);this.hd=new Hc(a);this.vb=z()}function jc(a){var b=[];Wb(a.vb).map(function(a){return this.aa.get(a)},a).forEach(function(a){a.Fb()&&(a.Ba().forEach(function(a){b.push(this.F.get(a.m()))},this),b.push(this.F.get(a.getName()+".#")))},a);return b}m=kd.prototype;m.ca=g("aa");
m.Cb=function(a,b){ld(this,a);Uc(this.xa,a,b);ed(this.xa,a,b,0);for(var c=0;c<b.length;c++)md(this,a,[null,b[c]])};function md(a,b,c){var d=b.getName(),e=a.vb.get(d)||new id(d);a.vb.set(d,e);try{Lc(a.hd,b,c)}catch(h){throw h;}b=c[0];var f=c[1];null===b&&null!==f?(a.V.set(d,f),e.add(f)):null!==b&&null!==f?(a.V.set(d,f),e.modify(c)):null!==b&&null===f&&(a.V.remove(d,b.id()),e.delete(b))}
m.update=function(a,b){ld(this,a);Uc(this.xa,a,b);var c=b.map(function(a){return[this.V.get(a.id()),a]},this);nd(this,a,c);fd(this.xa,a,c,0);c.forEach(function(b){md(this,a,b)},this)};m.Td=function(a,b){ld(this,a);Uc(this.xa,a,b);for(var c=0;c<b.length;c++){var d=b[c],e=null,f,h=a.Jb().cd();if(null===h)f=null;else{f=this.xa;var h=h.m(),k=d.mb(h);f=f.F.get(h).get(k);f=0==f.length?null:f[0]}null!=f?(e=this.V.get(f),d.pa=f,fd(this.xa,a,[[e,d]],0)):ed(this.xa,a,[d],0);md(this,a,[e,d])}};
m.remove=function(a,b){ld(this,a);od(this,a,b);gd(this.xa,a,b,0);for(var c=0;c<b.length;c++)md(this,a,[b[c],null])};function nd(a,b,c){b=ad(a.g.info(),b.getName(),1);if(null!==b){var d=dd(a.xa,c,b);d.keys().forEach(function(a){d.get(a).forEach(function(b){var c=this.g.table(b.Pd.Fe),d=this.V.get(a),n=c.ib(d.Ga());n.s[b.Pd.wb]=b.vg.s[b.Pd.Jc];md(this,c,[d,n])},this)},a)}}
function od(a,b,c){if(null!==ad(a.g.info(),b.getName(),1)){b=hd(a.xa,b,c);var d=b.qf;b.re.forEach(function(a){var b=this.g.table(a);a=d.get(a).map(function(a){return this.V.get(a)},this);gd(this.xa,b,a,0);a.forEach(function(a){md(this,b,[a,null])},this)},a)}}function fc(a){a.vb.forEach(function(a){var c=this.aa.get(a.getName());ed(this.xa,c,A(a.wa),1);gd(this.xa,c,A(a.za),1);fd(this.xa,c,A(a.na),1)},a)}m.ia=aa();m.Mb=function(){var a=A(this.vb).map(function(a){return jd(a)});this.hd.update(a)};
function ld(a,b){if(!a.aa.has(b.getName()))throw new E(106,b.getName());};function F(a,b,c,d){this.c=a;this.u=b;this.ea=this.c==G?!1:c;this.ma=this.u==G?!1:d}var G=new (aa());F.prototype.toString=function(){return(this.ea?"(":"[")+(this.c==G?"unbound":this.c)+", "+(this.u==G?"unbound":this.u)+(this.ma?")":"]")};function pd(a){if(qd(a))return[];var b=null,c=null;a.c==G||(b=new F(G,a.c,!1,!a.ea));a.u==G||(c=new F(a.u,G,!a.ma,!1));return[b,c].filter(function(a){return null!==a})}F.prototype.reverse=function(){return new F(this.u,this.c,this.ma,this.ea)};
function rd(a,b){var c=sd(a.c,b.c,!0,a.ea,b.ea);if(0==c)return!0;var d=-1==c?a:b,c=1==c?a:b;return d.u==G||d.u>c.c||d.u==c.c&&!d.ma&&!c.ea}function td(){return new F(G,G,!1,!1)}function qd(a){return a.c==G&&a.u==G}function ud(a){return a.c==a.u&&a.c!=G&&!a.ea&&!a.ma}F.prototype.contains=function(a){var b=this.u==G||a<this.u||a==this.u&&!this.ma;return(this.c==G||a>this.c||a==this.c&&!this.ea)&&b};
function sd(a,b,c,d,e){function f(a){return c?a:1==a?-1:1}d=d||!1;e=e||!1;return a==G?b==G?(d?!e:e)?d?f(1):f(-1):0:f(-1):b==G?f(1):a<b?-1:a==b?(d?!e:e)?d?f(1):f(-1):0:1}function vd(a,b){var c=sd(a.c,b.c,!0,a.ea,b.ea);0==c&&(c=sd(a.u,b.u,!1,a.ma,b.ma));return c}function wd(a){if(0==a.length)return[];a.sort(vd);for(var b=Array(a.length+1),c=0;c<b.length;c++)b[c]=0==c?new F(G,a[c].c,!1,!0):c==b.length-1?new F(a[c-1].u,G,!0,!1):new F(a[c-1].u,a[c].c,!0,!0);return b};function xd(a){this.mc=[];q(a)&&this.add(a)}xd.prototype.toString=function(){return this.mc.map(function(a){return a.toString()}).join(",")};xd.prototype.Na=function(a){return this.mc.some(function(b){return b.contains(a)})};xd.prototype.ta=g("mc");
xd.prototype.add=function(a){if(0!=a.length)if(a=this.mc.concat(a),1==a.length)this.mc=a;else{a.sort(vd);for(var b=[],c=a[0],d=1;d<a.length;++d)if(rd(c,a[d])){var e=a[d],f=td();if(c.c!=G&&e.c!=G){var h=sd(c.c,e.c,!0);1!=h?(f.c=c.c,f.ea=0!=h?c.ea:c.ea&&e.ea):(f.c=e.c,f.ea=e.ea)}c.u!=G&&e.u!=G&&(h=sd(c.u,e.u,!1),-1!=h?(f.u=c.u,f.ma=0!=h?c.ma:c.ma&&e.ma):(f.u=e.u,f.ma=e.ma));c=f}else b.push(c),c=a[d];b.push(c);this.mc=b}};
function yd(a,b){var c=[];a.ta().map(function(a){return b.ta().map(function(b){var c;if(rd(a,b)){c=td();var h=sd(a.c,b.c,!0),h=0==h?a.ea?a:b:-1!=h?a:b;c.c=h.c;c.ea=h.ea;a.u==G||b.u==G?b=a.u==G?b:a:(h=sd(a.u,b.u,!1),b=0==h?a.ma?a:b:-1==h?a:b);c.u=b.u;c.ma=b.ma}else c=null;return c})}).forEach(function(a){c=c.concat(a)});return new xd(c.filter(function(a){return null!==a}))};function H(a,b){this.entries=a;this.M=C(b);this.Za=null}function I(a){return D(a.M)}function zd(a){return a.entries.map(function(a){return a.va.s})}function Ad(a){return a.entries.map(function(a){return a.va.id()})}function Bd(a,b){return a.Za.get(b.m())}var Cd=null;function Dd(){null===Cd&&(Cd=new H([],[]));return Cd}
function Ed(a){if(0==a.length)return Dd();for(var b=a.reduce(function(a,b){return a+b.entries.length},0),c=Array(b),d=0,b=a.map(function(a){var b=z();a.entries.forEach(function(a){c[d++]=a;b.set(a.id,a)});return b}),e=z(),f=0;f<c.length;f++)b.every(function(a){return a.has(c[f].id)})&&e.set(c[f].id,c[f]);return new H(A(e),D(a[0].M))}function Fd(a){if(0==a.length)return Dd();var b=z();a.forEach(function(a){a.entries.forEach(function(a){b.set(a.id,a)})});return new H(A(b),D(a[0].M))}
function Gd(a,b){var c=1<b.length,d=a.map(function(a){return new Hd(a,c)});return new H(d,b)}function Hd(a,b){this.va=a;this.id=Id++;this.Vd=b}var Id=0;function J(a,b){var c=b.$a();return null!==c&&a.va.s.hasOwnProperty(c)?a.va.s[c]:a.Vd?a.va.s[K(b.I())][b.getName()]:a.va.s[b.getName()]}function Jd(a,b,c){var d=b.$a();if(null!=d)a.va.s[d]=c;else if(a.Vd){var d=K(b.I()),e=a.va.s[d];null==e&&(e={},a.va.s[d]=e);e[b.getName()]=c}else a.va.s[b.getName()]=c}
function Kd(a,b,c,d){function e(a,b){if(a.Vd){var c=a.va.s,d;for(d in c)f[d]=c[d]}else f[b[0]]=a.va.s}var f={};e(a,b);e(c,d);a=new Xb(-1,f);return new Hd(a,!0)};r("lf.bind",function(a){return new Ld(a)});function Ld(a){this.ga=a}r("lf.Binder",Ld);Ld.prototype.Aa=g("ga");function Md(){this.Xe=Nd();var a=Od();this.ic=z();this.ic.set(1,Pd());this.ic.set(2,Qd());this.ic.set(4,a);this.ic.set(3,a);this.ic.set(5,Rd())}var Sd;function Td(){null!=Sd||(Sd=new Md);return Sd}function Ud(a,b,c){return(a.ic.get(b)||null).get(c)||null}function Nd(){function a(a){return a}var b=z();b.set(1,function(a){return null===a?null:a?1:0});b.set(2,function(a){return null===a?null:a.getTime()});b.set(3,a);b.set(4,a);b.set(5,a);return b}
function Pd(){var a=z();a.set("eq",function(a,c){return a==c});a.set("neq",function(a,c){return a!=c});return a}
function Od(){var a=Pd();a.set("between",function(a,c){return null===a||null===c[0]||null===c[1]?!1:a>=c[0]&&a<=c[1]});a.set("gte",function(a,c){return null===a||null===c?!1:a>=c});a.set("gt",function(a,c){return null===a||null===c?!1:a>c});a.set("in",function(a,c){return-1!=c.indexOf(a)});a.set("lte",function(a,c){return null===a||null===c?!1:a<=c});a.set("lt",function(a,c){return null===a||null===c?!1:a<c});return a}
function Rd(){var a=Od();a.set("match",function(a,c){return null===a||null===c?!1:(new RegExp(c)).test(a)});return a}
function Qd(){var a=z();a.set("between",function(a,c){return null===a||null===c[0]||null===c[1]?!1:a.getTime()>=c[0].getTime()&&a.getTime()<=c[1].getTime()});a.set("eq",function(a,c){return(null===a?-1:a.getTime())==(null===c?-1:c.getTime())});a.set("gte",function(a,c){return null===a||null===c?!1:a.getTime()>=c.getTime()});a.set("gt",function(a,c){return null===a||null===c?!1:a.getTime()>c.getTime()});a.set("in",function(a,c){return c.some(function(c){return c.getTime()==a.getTime()})});a.set("lte",
function(a,c){return null===a||null===c?!1:a.getTime()<=c.getTime()});a.set("lt",function(a,c){return null===a||null===c?!1:a.getTime()<c.getTime()});a.set("neq",function(a,c){return(null===a?-1:a.getTime())!=(null===c?-1:c.getTime())});return a};function L(){this.h=this.G=null}var Vd=[];L.prototype.getParent=g("G");L.prototype.kb=function(){for(var a=this;!fa(a.getParent());)a=a.getParent();return a};function Wd(a){for(var b=0;!fa(a.getParent());)b++,a=a.getParent();return b}function M(a){return a.h||Vd}function Xd(a,b){return M(a)[b]||null}function Yd(a,b,c){b.G=a;null===a.h?a.h=[b]:a.h.splice(c,0,b)}function Zd(a,b){b.G=a;null===a.h?a.h=[b]:a.h.push(b)}
function $d(a,b){var c=a.h&&a.h[b];return c?(c.G=null,a.h.splice(b,1),0==a.h.length&&(a.h=null),c):null}L.prototype.removeChild=function(a){return $d(this,M(this).indexOf(a))};function ae(a,b,c){Xd(a,c).G=null;b.G=a;a.h[c]=b}function be(a,b,c){!1!==b.call(c,a)&&M(a).forEach(function(a){be(a,b,c)})};function ce(){L.call(this);this.pa=de++}t(ce,L);var de=0;ce.prototype.Z=g("pa");function ee(a,b,c){ce.call(this);this.N=a;this.value=b;this.D=c;this.wc=Ud(Td(),this.N.H(),this.D);this.Ra=!1;this.ec=b}t(ee,ce);m=ee.prototype;m.Ob=function(){var a=new ee(this.N,this.value,this.D);a.ec=this.ec;a.vd(this.Ra);var b=this.Z();a.pa=b;return a};m.jb=function(a){return null!=a?(a.push(this.N),a):[this.N]};m.vd=ba("Ra");function fe(a){var b=!1;a.value instanceof Ld||(b="array"==ea(a.value)?!a.value.some(function(a){return a instanceof Ld}):!0);if(!b)throw new E(501);}
m.eval=function(a){fe(this);if("in"==this.D)return ge(this,a);var b=a.entries.filter(function(a){return this.wc(J(a,this.N),this.value)!=this.Ra},this);return new H(b,I(a))};m.bind=function(a){if(this.ec instanceof Ld){var b=this.ec.Aa();if(a.length<=b)throw new E(510);this.value=a[b]}else"array"==ea(this.ec)&&(this.value=this.ec.map(function(b){if(b instanceof Ld){var d=b.Aa();if(a.length<=d)throw new E(510);return a[b.Aa()]}return b}))};
function ge(a,b){var c=C(a.value),d=function(a){return null===a?!1:c.has(a)!=this.Ra}.bind(a),e=b.entries.filter(function(a){return d(J(a,this.N))},a);return new H(e,I(b))}m.toString=function(){return"value_pred("+this.N.m()+" "+this.D+(this.Ra?"(complement)":"")+" "+this.value+")"};
function he(a){var b=null;if("between"==a.D)b=new F(ie(a,a.value[0]),ie(a,a.value[1]),!1,!1);else{if("in"==a.D)return b=a.value.map(function(a){return new F(a,a,!1,!1)}),new xd(a.Ra?wd(b):b);b=ie(a,a.value);b="eq"==a.D?new F(b,b,!1,!1):"gte"==a.D?new F(b,G,!1,!1):"gt"==a.D?new F(b,G,!0,!1):"lte"==a.D?new F(G,b,!1,!1):new F(G,b,!1,!0)}return new xd(a.Ra?pd(b):[b])}function ie(a,b){return 2==a.N.H()?b.getTime():b};function je(a){this.ba=a;this.Xc=this.Da=null}function ke(a,b){null===a.Da&&null!=a.A&&(a.Da=le(a.A));return a.Da.get(b)||null}function le(a){var b=z();be(a,function(a){b.set(a.Z(),a)});return b}function me(a,b){b.A&&(a.A=b.A.Ob());a.Xc=b}je.prototype.bind=function(){return this};function ne(a,b){var c=a.A;null!=c&&be(c,function(a){a instanceof ee&&a.bind(b)})};function oe(a){je.call(this,a)}t(oe,je);function qe(a){var b="";a.forEach(function(c,d){b+=c.N.m()+" ";b+=1==c.ob?"ASC":"DESC";d<a.length-1&&(b+=", ")});return b}oe.prototype.ca=function(){return C(this.c)};oe.prototype.clone=function(){var a=new oe(this.ba);me(a,this);this.f&&(a.f=this.f.slice());this.c&&(a.c=this.c.slice());a.W=this.W;a.L=this.L;this.O&&(a.O=this.O.slice());this.ja&&(a.ja=this.ja.slice());this.Tb&&(a.Tb=this.Tb);this.ac&&(a.ac=this.ac);a.Eb=this.Eb;return a};
oe.prototype.bind=function(a){oe.eb.bind.call(this,a);null!=this.Tb&&(this.W=a[this.Tb.Aa()]);null!=this.ac&&(this.L=a[this.ac.Aa()]);ne(this,a);return this};function re(a,b){this.Ea=a;this.aa=b}re.prototype.kb=g("Ea");re.prototype.ca=g("aa");function se(a){var b=C();a.forEach(function(a){a.ca().forEach(b.add.bind(b))});return b};function te(a,b){this.global=a;this.Ma=a.l(lc);this.sd=b.map(function(a){return a.context});this.gf=b.map(function(a){return a.ge});this.Jd=se(this.gf);this.ve=ue(this);this.cb=x()}function ue(a){return a.sd.some(function(a){return!(a instanceof oe)})?1:0}m=te.prototype;
m.exec=function(){function a(){var f=d.shift();if(f){var h=e[c.length];return f.kb().exec(b,h).then(function(b){c.push(b[0]);return a()})}return w()}var b=0==this.ve?void 0:new kd(this.global,this.Jd),c=[],d=this.gf.slice(),e=this.sd;return a().then(function(){return this.Ma.Hb(this.ve,D(this.Jd),b).ia()}.bind(this)).then(function(){this.de(c);return c}.bind(this),function(a){null!=b&&b.Mb();throw a;})};m.H=g("ve");m.ca=g("Jd");m.Pb=g("cb");m.Z=function(){return ka(this)};m.de=aa();function ve(a,b){te.call(this,a,b);this.Lb=a.l(qc)}t(ve,te);ve.prototype.getPriority=l(0);ve.prototype.de=function(a){this.sd.forEach(function(b,c){we(this.Lb,b,a[c])},this)};function xe(a,b){this.i=a;this.Lb=a.l(qc);this.Fa=a.l(pc);this.hd=new Hc(a);this.vb=b;var c=a.l(rc),d=this.vb.map(function(a){return c.table(a.getName())});this.aa=C(d);this.cb=x()}m=xe.prototype;m.exec=function(){this.hd.update(this.vb);this.Mc();return w()};m.H=l(1);m.ca=g("aa");m.Pb=g("cb");m.Z=function(){return ka(this)};m.getPriority=l(1);m.Mc=function(){var a=ye(this.Lb,this.aa);0!=a.length&&(a=new ve(this.i,a),ze(this.Fa,a))};function Ae(a){this.i=a;this.Ma=a.l(lc);this.Fa=a.l(pc)}Ae.prototype.be=function(a){a=new xe(this.i,a);ze(this.Fa,a)};function N(a,b){this.Qa=a;this.j=b;this.Wa=z()}r("lf.backstore.FirebaseRawBackStore",N);N.prototype.dd=g("j");N.prototype.ed=function(){throw new E(351);};function Be(a,b){var c=x(),d=a;b.length&&(d=a.child(b));d.once("value",function(a){c.resolve(a.val())},function(a){c.reject(a)});return c.da}function Ce(a,b,c){function d(a){a?e.reject(a):e.resolve()}c=c||!1;var e=x();c?a.set(b,d):a.update(b,d);return e.da}
N.prototype.Ha=function(a){return Be(this.j,"@rev/R").then(function(a){this.Pa=a;return Be(this.j,"@table")}.bind(this)).then(function(b){var c=0,d;for(d in b)this.Wa.set(d,b[d]),b[d]>c&&(c=b[d]);a.sa().forEach(function(a){this.Wa.has(a.getName())||(b[a.getName()]=++c)},this);d=this.j.child("@table");return Ce(d,b)}.bind(this))};
function De(a,b,c){var d=a.Wa.get(b);return null!=d?function(){var a={},b=x();this.j.orderByChild("T").equalTo(d).once("value",function(d){d.forEach(function(b){var d=c(b.val());a[parseInt(b.key(),10)]=d});b.resolve(a)});return b.da}.call(a).then(function(a){a["@rev"]={R:++this.Pa};return Ce(this.j,a)}.bind(a)):w()}N.prototype.uc=function(a){return De(this,a,l(null)).then(function(){this.Wa.delete(a);return Ce(this.j.child("@table/"+a),null,!0)}.bind(this))};N.prototype.dropTable=N.prototype.uc;
N.prototype.rc=function(a,b,c){return De(this,a,function(a){var e=a.P;e[b]=c;return{R:this.Pa+1,T:a.T,P:e}}.bind(this))};N.prototype.addTableColumn=N.prototype.rc;N.prototype.vc=function(a,b){return De(this,a,function(a){var d=a.P;delete d[b];return{R:this.Pa+1,T:a.T,P:d}}.bind(this))};N.prototype.dropTableColumn=N.prototype.vc;N.prototype.Lc=function(a,b,c){return De(this,a,function(a){var e=a.P;e[c]=e[b];delete e[b];return{R:this.Pa+1,T:a.T,P:e}}.bind(this))};N.prototype.renameTableColumn=N.prototype.Lc;
N.prototype.yb=function(){throw new E(351);};N.prototype.createRow=N.prototype.yb;N.prototype.Dc=g("Qa");N.prototype.getVersion=N.prototype.Dc;N.prototype.gc=function(a){var b=x();a=this.Wa.get(a);this.j.orderByChild("T").equalTo(a).once("value",function(a){var d=[];a.forEach(function(a){d.push(a.val().P)});b.resolve(d)});return b.da};N.prototype.dump=function(){var a={},b=Wb(this.Wa).map(function(b){return this.gc(b).then(function(d){a[b]=d})}.bind(this));return fb(b).then(function(){return a})};
N.prototype.dump=N.prototype.dump;function Ee(a,b,c){dc.call(this,b,c);this.j=a}t(Ee,dc);Ee.prototype.I=function(a){return this.j.Bc(a)};
Ee.prototype.tc=function(){if(0==this.ue)return this.S.resolve(),this.S.da;var a=this.Sa.vb;if(0==a.size)this.S.resolve();else{var b=this.j.Pa+1;this.j.Pa=b;var c={"@rev":{R:b}};a.forEach(function(a,e){var f=this.j.Wa.get(e);a.wa.forEach(function(a,d){c[d]={R:b,T:f,P:a.s}});a.na.forEach(function(a,d){c[d]={R:b,T:f,P:a[1].s}});a.za.forEach(function(a,b){c[b]=null})},this);this.j.j.update(c,function(c){null===c?this.S.resolve():(this.j.Pa=b-1,c=A(a).map(function(a){return Fe(this.j,a.getName())},this),
fb(c).then(this.S.reject.bind(this.S),this.S.reject.bind(this.S)))}.bind(this))}return this.S.da};function Ge(){this.ya=z()}function He(a,b){if(0==b.length)return A(a.ya);var c=[];b.forEach(function(a){a=this.ya.get(a)||null;null===a||c.push(a)},a);return c}Ge.prototype.getData=g("ya");Ge.prototype.get=function(a){return w(He(this,a))};function Ie(a,b){b.forEach(function(a){this.ya.set(a.id(),a)},a)}Ge.prototype.put=function(a){Ie(this,a);return w()};function Je(a,b){0==b.length||b.length==a.ya.size?a.ya.clear():b.forEach(function(a){this.ya.delete(a)},a)}
Ge.prototype.remove=function(a){Je(this,a);return w()};function Ke(a){return 0==a.ya.size?0:Wb(a.ya).reduce(function(a,c){return a>c?a:c},0)};function Le(a,b){this.g=a;this.Cf=b;this.Kc=z();this.Pa=-1;this.M=z();this.Wa=z();this.Gd=null}m=Le.prototype;
m.Ha=function(a){this.j=this.Cf.child(this.g.name());var b=a||function(){return w()};return Be(this.j,"@db/version").then(function(a){return null===a?Ce(this.j,Me(this),!0).then(function(){var a=new N(0,this.j);return b(a)}.bind(this)):a==this.g.version()?Be(this.j,"@rev/R").then(function(a){this.Pa=a;return Be(this.j,"@table")}.bind(this)).then(function(a){for(var b in a)this.Wa.set(b,a[b]);a=this.g.sa().map(function(a){return Fe(this,a.getName())},this);return fb(a)}.bind(this)).then(function(){Ne(this);
Oe(this);return w()}.bind(this)):this.ee(a,b).then(function(){return this.Ha()}.bind(this))}.bind(this))};m.ee=function(a,b){var c=new N(a,this.j);return c.Ha(this.g).then(function(){return w()}.bind(this)).then(function(){return b(c)}).then(function(){var a=this.j.child("@db");return Ce(a,{version:this.g.version()},!0)}.bind(this))};
function Oe(a){a.j.off();a.j.on("child_removed",a.sg.bind(a));a.Hd&&(a.Hd.off(),a.Kc.clear());a.Hd=a.j.orderByChild("R").startAt(a.Pa+1);a.Hd.on("value",a.be.bind(a))}function Ne(a){Yb=A(a.M).map(function(a){return Ke(a)}).reduce(function(a,c){return a>c?a:c},0)+1}m.sg=function(a){var b=a.val(),c=this.Kc.get(b.T)||null;null===c&&(c=C(),this.Kc.set(b.T,c));c.add(parseInt(a.key(),10))};
m.be=function(a){var b=a.child("@rev/R").val();null!=b&&b!=this.Pa&&(this.Pa=b,a=Pe(this,a),a.forEach(function(a){var b=this.M.get(a.getName()),e=Wb(a.za);0<e.length&&Je(b,e);var f=A(a.wa);a.na.forEach(function(a){f.push(a[1])});Ie(b,f)},this),0<a.length&&this.Gc(a),Oe(this))};
function Pe(a,b){var c=C(),d=z();a.Wa.forEach(function(a,b){var h=this.M.get(b),k=new id(b);if(this.Kc.has(a)){var n=D(this.Kc.get(a));n.forEach(function(a){c.add(a)});He(h,n).forEach(function(a){k.delete(a)})}d.set(a,k)}.bind(a));b.forEach(function(a){if("@rev"!=a.key()){var b=parseInt(a.key(),10);if(!c.has(b)){var h=a.val();a=d.get(h.T);var k=this.M.get(a.getName()),h=this.g.table(a.getName()).ib({id:b,value:h.P});k.getData().has(b)?a.modify([He(k,[b])[0],h]):a.add(h)}}}.bind(a));return A(d).filter(function(a){return!a.kd()})}
function Fe(a,b){var c=x(),d=a.Wa.get(b),e=a.g.table(b);a.j.orderByChild("T").equalTo(d).once("value",function(a){var d=new Ge,k=[];a.forEach(function(a){k.push(e.ib({id:parseInt(a.key(),10),value:a.val().P}))});Ie(d,k);this.M.set(b,d);c.resolve()}.bind(a));return c.da}function Me(a){var b={};b["@db"]={version:a.g.version()};b["@rev"]={R:1};a.Pa=1;b["@table"]={};a.g.sa().forEach(function(a,d){var e=a.getName();b["@table"][e]=d;this.M.set(e,new Ge);this.Wa.set(e,d)},a);return b}
m.Hb=function(a,b,c){return new Ee(this,a,c)};m.Bc=function(a){var b=this.M.get(a)||null;if(null!==b)return b;throw new E(101,a);};m.close=aa();m.subscribe=ba("Gd");m.Gc=function(a){null!=this.Gd&&this.Gd(a)};function P(a,b,c,d){this.j=b;this.Ya=c;this.Qa=a;this.Vc=d}r("lf.backstore.IndexedDBRawBackStore",P);P.prototype.dd=g("j");P.prototype.getRawDBInstance=P.prototype.dd;P.prototype.ed=g("Ya");P.prototype.getRawTransaction=P.prototype.ed;P.prototype.uc=function(a){return new v(function(b,c){try{this.j.deleteObjectStore(a)}catch(d){c(d);return}b()},this)};P.prototype.dropTable=P.prototype.uc;
function Qe(a,b,c,d){return new v(function(a,f){var h;try{var k=this.Ya.objectStore(b);h=k.openCursor()}catch(n){f(n);return}h.onsuccess=function(){var b=h.result;b?(c(b),b.continue()):(d(k),a())};h.onerror=f},a)}function Re(a){var b=null;return b=a instanceof ArrayBuffer?ac(a):a instanceof Date?a.getTime():a}
function Se(a,b,c){function d(a){var b=Cc(a.value),d=b.s,e;for(e in d){var B=Zb(d[e]);c(B);d[e]=B.Ga()}a.update(b.Ga())}function e(a){var b=Zb(a.value);c(b);a.update(b.Ga())}return Qe(a,b,a.Vc?d:e,aa())}P.prototype.rc=function(a,b,c){var d=Re(c);return Se(this,a,function(a){a.s[b]=d})};P.prototype.addTableColumn=P.prototype.rc;P.prototype.vc=function(a,b){return Se(this,a,function(a){delete a.s[b]})};P.prototype.dropTableColumn=P.prototype.vc;
P.prototype.Lc=function(a,b,c){return Se(this,a,function(a){a.s[c]=a.s[b];delete a.s[b]})};P.prototype.renameTableColumn=P.prototype.Lc;function Te(a,b){var c=[];return new v(function(a,e){var f;try{f=this.Ya.objectStore(b).openCursor()}catch(h){e(h);return}f.onsuccess=function(){var b=f.result;if(b){if(this.Vc){var e;e=Cc(b.value).s;for(var n in e)c.push(e[n])}else c.push(b.value);b.continue()}else a(c)}.bind(this);f.onerror=e},a)}P.prototype.yb=function(a){var b={},c;for(c in a)b[c]=Re(a[c]);return $b(b)};
P.prototype.createRow=P.prototype.yb;P.prototype.Dc=g("Qa");P.prototype.getVersion=P.prototype.Dc;P.prototype.dump=function(){for(var a=this.j.objectStoreNames,b=[],c=0;c<a.length;++c){var d=a.item(c);b.push(this.gc(d))}return fb(b).then(function(b){var c={};b.forEach(function(b,d){c[a.item(d)]=b});return c})};P.prototype.dump=P.prototype.dump;P.prototype.gc=function(a){return Te(this,a).then(function(a){return a.map(function(a){return a.value})})};function Ue(a,b){this.X=a;this.Ib=b}Ue.prototype.get=function(a){if(0==a.length)return null!=this.X.getAll?Ve(this):We(this);a=a.map(function(a){return new v(function(c,d){var e;try{e=this.X.get(a)}catch(f){d(f);return}e.onerror=d;e.onsuccess=function(a){c(this.Ib(a.target.result))}.bind(this)},this)},this);return fb(a)};
function We(a){return new v(function(a,c){var d=[],e;try{e=this.X.openCursor()}catch(f){c(f);return}e.onerror=c;e.onsuccess=function(){var c=e.result;c?(d.push(this.Ib(c.value)),c.continue()):a(d)}.bind(this)},a)}function Ve(a){return new v(function(a,c){var d;try{d=this.X.getAll()}catch(e){c(e);return}d.onerror=c;d.onsuccess=function(){var c=d.result.map(function(a){return this.Ib(a)},this);a(c)}.bind(this)},a)}
Ue.prototype.Vb=function(a){return new v(function(b,c){var d;try{d=a()}catch(e){c(e);return}d.onsuccess=b;d.onerror=c},this)};Ue.prototype.put=function(a){if(0==a.length)return w();a=a.map(function(a){return this.Vb(function(){return this.X.put(a.Ga())}.bind(this))},this);return fb(a)};
Ue.prototype.remove=function(a){return new v(function(b,c){var d=this.X.count();d.onsuccess=function(d){if(0==a.length||d.target.result==a.length)return this.Vb(function(){return this.X.clear()}.bind(this)).then(b,c);d=a.map(function(a){return this.Vb(function(){return this.X.delete(a)}.bind(this))},this);fb(d).then(b,c)}.bind(this);d.onerror=c},this)};function Xe(a,b,c,d,e){dc.call(this,c,e);this.i=a;this.Ya=b;this.Vc=d;this.Ya.oncomplete=this.S.resolve.bind(this.S);this.Ya.onabort=this.S.reject.bind(this.S)}t(Xe,dc);Xe.prototype.I=function(a,b,c){return this.Vc?(c=null!=c?c:0,a=this.Ya.objectStore(a),new Dc(a,b,0==c?qa(Fc,this.i):Gc)):new Ue(this.Ya.objectStore(a),b)};Xe.prototype.tc=function(){return this.S.da};function Ye(a,b){this.i=a;this.g=b;this.Dd=b.hf().Of||!1}m=Ye.prototype;
m.Ha=function(a){var b=window.indexedDB||window.mozIndexedDB||window.webkitIndexedDB||window.msIndexedDB;if(null==b)throw new E(352);var c=a||function(){return w()};return new v(function(a,e){var f;try{f=b.open(this.g.name(),this.g.version())}catch(h){e(h);return}f.onerror=e;f.onupgradeneeded=function(a){Ze(this,c,a).then(aa(),e)}.bind(this);f.onsuccess=function(b){this.j=b.target.result;this.ne().then(function(b){Yb=b+1;a(this.j)}.bind(this))}.bind(this)},this)};
function Ze(a,b,c){var d=c.target.result;c=new P(c.oldVersion,d,c.target.transaction,a.Dd);$e(d);a.g.sa().forEach(qa(a.Jf,d),a);return b(c)}function $e(a){for(var b=[],c=0;c<a.objectStoreNames.length;++c){var d=a.objectStoreNames.item(c);-1!=d.indexOf(".")&&b.push(d)}b.forEach(function(b){try{a.deleteObjectStore(b)}catch(c){}})}m.Jf=function(a,b){a.objectStoreNames.contains(b.getName())||a.createObjectStore(b.getName(),{keyPath:"id"});b.Fb()&&(b.Ba().forEach(function(b){af(a,b.m())},this),af(a,bf(b)))};
function af(a,b){a.objectStoreNames.contains(b)||a.createObjectStore(b,{keyPath:"id"})}m.Hb=function(a,b,c){b=this.j.transaction(cf(b),0==a?"readonly":"readwrite");return new Xe(this.i,b,a,this.Dd,c)};function cf(a){var b=C();a.forEach(function(a){b.add(a.getName());a.Fb()&&(a.Ba().forEach(function(a){b.add(a.m())}),b.add(bf(a)))});return D(b)}
m.ne=function(a){function b(){if(0==d.length)return w();var a=d.shift();return c(a).then(b)}function c(b){return new v(function(c,d){var O;try{O=(a||e.transaction([b])).objectStore(b).openCursor(null,"prev")}catch(da){d(da);return}O.onsuccess=function(a){(a=a.target.result)&&(f=Math.max(f,h(a)));c(f)};O.onerror=function(){c(f)}})}var d=this.g.sa().map(function(a){return a.getName()}),e=this.j,f=0,h=function(a){return this.Dd?(a=Cc(a.value),Object.keys(a.s).reduce(function(a,b){return Math.max(a,b)},
0)):a.key}.bind(this);return new v(function(a){b().then(function(){a(f)})})};m.close=function(){this.j.close()};m.Bc=function(){throw new E(511);};m.subscribe=aa();m.Gc=aa();function df(a,b,c){dc.call(this,b,c);this.X=a;0==b&&this.S.resolve()}t(df,dc);df.prototype.I=function(a){return this.X.Bc(a)};df.prototype.tc=function(){this.S.resolve();return this.S.da};function ef(a){this.g=a;this.M=z()}m=ef.prototype;m.Ha=function(){this.g.sa().forEach(this.bg,this);return w()};m.Bc=function(a){var b=this.M.get(a)||null;if(null===b)throw new E(101,a);return b};m.Hb=function(a,b,c){return new df(this,a,c)};function ff(a,b){if(!a.M.has(b)){var c=new Ge;a.M.set(b,c)}}m.bg=function(a){ff(this,a.getName());a.Fb()&&(a.Ba().forEach(function(a){ff(this,a.m())},this),ff(this,bf(a)))};m.close=aa();m.subscribe=aa();m.Gc=aa();function gf(a){ef.call(this,a);this.od=null}t(gf,ef);gf.prototype.subscribe=function(a){null===this.od&&(this.od=a)};gf.prototype.Gc=function(a){null===this.od||this.od(a)};function hf(a,b,c){this.Ya=a;this.B=b;this.Ib=c}hf.prototype.get=function(a){var b=this.Ib;return jf(this.Ya,"SELECT id, value FROM "+this.B+" "+(0==a.length?"":"WHERE id IN ("+a.join(",")+")"),[],function(a){for(var d=a.rows.length,e=Array(d),f=0;f<d;++f)e[f]=b({id:a.rows.item(f).id,value:JSON.parse(a.rows.item(f).value)});return e})};
hf.prototype.put=function(a){if(0==a.length)return w();var b="INSERT OR REPLACE INTO "+this.B+"(id, value) VALUES (?, ?)";a.forEach(function(a){jf(this.Ya,b,[a.id(),JSON.stringify(a.s)])},this);return w()};hf.prototype.remove=function(a){jf(this.Ya,"DELETE FROM "+this.B+" "+(0==a.length?"":"WHERE id IN ("+a.join(",")+")"),[]);return w()};function kf(a,b,c){dc.call(this,b,c);this.j=a;this.M=z();this.Kd=[]}t(kf,dc);function mf(a){return a.replace(".","__d__").replace("#","__s__")}kf.prototype.I=function(a,b){var c=this.M.get(a)||null;null===c&&(c=new hf(this,mf(a),b),this.M.set(a,c));return c};function jf(a,b,c,d){var e=x();a.Kd.push({Gg:b,wg:c,transform:d,S:e});return e.da}
kf.prototype.tc=function(){var a=null,b=this.S.reject.bind(this.S),c=function(a,b){this.S.reject(b)}.bind(this),d=[],e=function(b,h){if(null!==a){var k=h;null!=a.transform&&null!=h&&(k=a.transform(h));d.push(k);a.S.resolve(k)}0<this.Kd.length?(a=k=this.Kd.shift(),b.executeSql(k.Gg,k.wg,e,c)):this.S.resolve(d)}.bind(this);0==this.ue?this.j.readTransaction(e,b):this.j.transaction(e,b);return this.S.da};function Q(a,b,c){this.j=c;this.i=a;this.Qa=b}r("lf.backstore.WebSqlRawBackStore",Q);Q.prototype.dd=g("j");Q.prototype.getRawDBInstance=Q.prototype.dd;Q.prototype.ed=function(){throw new E(356);};Q.prototype.getRawTransaction=Q.prototype.ed;function nf(a){return new kf(a.j,1,new kd(a.i,C()))}Q.prototype.uc=function(a){var b=nf(this);jf(b,"DROP TABLE "+a,[]);return b.ia()};Q.prototype.dropTable=Q.prototype.uc;
Q.prototype.gc=function(a){var b=nf(this);jf(b,"SELECT id, value FROM "+a,[]);return b.ia().then(function(a){for(var b=a[0].rows.length,e=Array(b),f=0;f<b;++f)e[f]={id:a[0].rows.item(f).id,value:JSON.parse(a[0].rows.item(f).value)};return w(e)})};function of(a,b,c){var d=nf(a),e="UPDATE "+b+" SET value=? WHERE id=?";return a.gc(b).then(function(a){a.forEach(function(a){a=c(a);jf(d,e,[JSON.stringify(a.value),a.id])});return d.ia()})}
Q.prototype.rc=function(a,b,c){var d=Re(c);return of(this,a,function(a){a.value[b]=d;return a})};Q.prototype.addTableColumn=Q.prototype.rc;Q.prototype.vc=function(a,b){return of(this,a,function(a){delete a.value[b];return a})};Q.prototype.dropTableColumn=Q.prototype.vc;Q.prototype.Lc=function(a,b,c){return of(this,a,function(a){a.value[c]=a.value[b];delete a.value[b];return a})};Q.prototype.renameTableColumn=Q.prototype.Lc;Q.prototype.yb=function(a){var b={},c;for(c in a)b[c]=Re(a[c]);return $b(b)};
Q.prototype.createRow=Q.prototype.yb;Q.prototype.Dc=g("Qa");Q.prototype.getVersion=Q.prototype.Dc;function pf(a){jf(a,'SELECT tbl_name FROM sqlite_master WHERE type="table"',[],function(a){for(var c=Array(a.rows.length),d=0;d<c.length;++d)c[d]=a.rows.item(d).tbl_name;return c})}
Q.prototype.dump=function(){var a=x(),b=nf(this);pf(b);var c={};b.ia().then(function(b){b=b[0].filter(function(a){return"__lf_ver"!=a&&"__WebKitDatabaseInfoTable__"!=a}).map(function(a){return this.gc(a).then(function(b){c[a]=b})},this);fb(b).then(function(){a.resolve(c)})}.bind(this));return a.da};Q.prototype.dump=Q.prototype.dump;function qf(a,b,c){this.i=a;this.g=b;this.Fg=c||4194304}m=qf.prototype;m.Ha=function(a){if(null==window.openDatabase)throw new E(353);var b=a||function(){return w()};return new v(function(a,d){try{var e=window.openDatabase(this.g.name(),"",this.g.name(),this.Fg);if(null!=e)this.j=e,rf(this,b).then(a,d);else throw new E(354);}catch(f){d(f)}},this)};
function rf(a,b){var c=x(),d=new kf(a.j,1,new kd(a.i,C()));jf(d,"CREATE TABLE IF NOT EXISTS __lf_ver(id INTEGER PRIMARY KEY, v INTEGER)",[]);jf(d,"SELECT v FROM __lf_ver WHERE id = 0",[]);d.ia().then(function(a){var d=0;a[1].rows.length&&(d=a[1].rows.item(0).v);d<this.g.version()?this.ee(b,d).then(c.resolve.bind(c)):d>this.g.version()?c.reject(new E(108)):c.resolve()}.bind(a));return c.da}m.Hb=function(a,b,c){if(null!=this.j)return new kf(this.j,a,c);throw new E(2);};m.close=aa();
m.Bc=function(){throw new E(512);};m.subscribe=function(){throw new E(355);};m.Gc=function(){throw new E(355);};m.ee=function(a,b){var c=x();sf(this).then(function(){a(new Q(this.i,b,this.j)).then(function(){return this.ne()}.bind(this)).then(c.resolve.bind(c))}.bind(this),c.reject.bind(c));return c.da};
function sf(a){var b=a.g.sa(),c=new kf(a.j,1,new kd(a.i,C())),d=new kf(a.j,1,new kd(a.i,C()));jf(c,"INSERT OR REPLACE INTO __lf_ver VALUES (0, ?)",[a.g.version()]);pf(c);return c.ia().then(function(a){var c=a[1];c.filter(function(a){return-1!=a.indexOf("__d__")}).forEach(function(a){jf(d,"DROP TABLE "+a,[])});var h=[],k=[],n=[];b.map(function(a){-1==c.indexOf(a.getName())&&h.push(a.getName());a.Fb&&(a.Ba().forEach(function(a){a=mf(a.m());h.push(a);k.push(a)}),a=mf(bf(a)),h.push(a),n.push(a))});h.forEach(function(a){jf(d,
"CREATE TABLE "+a+"(id INTEGER PRIMARY KEY, value TEXT)",[])});return d.ia()})}m.ne=function(){var a=0,b=x(),c=function(b){var c=new kf(this.j,0);jf(c,"SELECT MAX(id) FROM "+b,[]);return c.ia().then(function(b){b=b[0].rows.item(0)[0];a=Math.max(b,a)})}.bind(this),d=this.g.sa().map(function(a){return c(a.getName())});fb(d).then(function(){b.resolve(a)},function(a){b.reject(a)});return b.da};function tf(a){this.o=z();this.bc=z();a.sa().forEach(function(a){this.bc.set(a.getName(),C())},this)}m=tf.prototype;m.set=function(a,b){this.o.set(b.id(),b);this.bc.get(a).add(b.id())};m.Yb=function(a,b){var c=this.bc.get(a);b.forEach(function(a){this.o.set(a.id(),a);c.add(a.id())},this)};m.get=function(a){return this.o.get(a)||null};function uf(a,b){return b.map(function(a){return this.get(a)},a)}
m.ab=function(a,b,c){var d=[],e=Math.min(b,c),f=Math.max(b,c);a=this.bc.get(a);if(a.size<f-e)a.forEach(function(a){a>=e&&a<=f&&(a=this.o.get(a),d.push(a))},this);else for(b=e;b<=f;++b)a.has(b)&&(c=this.o.get(b),d.push(c));return d};m.remove=function(a,b){this.o.delete(b);this.bc.get(a).delete(b)};m.Ac=function(a){return null!=a?this.bc.get(a).size:this.o.size};m.clear=function(){this.o.clear();this.bc.clear()};function vf(a,b,c){var d=0,e=a.length;for(c=c||wf;d<e;){var f=d+e>>1;0>c(a[f],b)?d=f+1:e=f}return d==e&&a[d]==b?d:~d}function wf(a,b){return a-b}function xf(a,b,c){c=vf(a,b,c);return 0>c?(a.splice(-(c+1),0,b),!0):!1};function yf(a,b,c,d){a=b?a.reverse():a;if(null==c&&null==d)return a;c=Math.min(q(c)?c:a.length,a.length);if(0==c)return[];d=Math.min(d||0,a.length);return a.slice(d,d+c)};function zf(){this.la=0}zf.prototype.add=function(a,b){this.la+=b};zf.prototype.remove=function(a,b){this.la-=b};zf.prototype.clear=function(){this.la=0};function Af(a,b){a.clear();b.forEach(function(a){this.la+=a.la},a)};function Bf(a,b,c,d){this.B=a;this.Y=b;this.xf=c;this.tb=new zf;if(d){a=511;a*=a*a;if(d.length>=a)throw new E(6,a);d=Cf(this,d);this.ra=d=Df(d)}else this.clear()}var Ef=[];m=Bf.prototype;m.getName=g("B");m.toString=function(){return this.ra.toString()};m.add=function(a,b){this.ra=this.ra.Cb(a,b)};m.set=function(a,b){this.ra=this.ra.Cb(a,b,!0)};m.remove=function(a,b){this.ra=this.ra.remove(a,b)};m.get=function(a){return this.ra.get(a)};
m.Zc=function(a){if(null==a)return this.La().la;if(a instanceof F){if(qd(a))return this.La().la;if(ud(a))return this.get(a.c).length}return this.ab([a]).length};m.La=g("tb");m.Rd=function(a,b,c,d){c=Array(a);this.ra.fill({offset:b?this.tb.la-a-d:d,count:a,qe:0},c);return b?c.reverse():c};
m.ab=function(a,b,c,d){var e=Ff(this.ra).b[0];if(!q(e)||0==c)return Ef;b=b||!1;c=null!=c?Math.min(c,this.tb.la):this.tb.la;d=d||0;var f=Math.min(Math.max(this.tb.la-d,0),c);if(0==f)return Ef;if(!q(a)||1==a.length&&a[0]instanceof F&&qd(a[0]))return this.Rd(f,b,c,d);a=this.Y.tf(a);var h=Array(b?this.tb.la:f),k={count:0,W:h.length,reverse:b,L:d},n=1<this.hb().Xd();a.forEach(function(a){for(var b=this.Y.td(a),b=this.Y.Ud(a)?e:b[0],b=this.ra.Vf(b),c=0;null!=b&&k.count<k.W;){if(n){for(var d=b,f=a,bc=k,
Bb=h,Wc=d.w.hb(),pe=-1,Ma=0;Ma<d.b.length;++Ma)if(Wc.Db(d.b[Ma],f)){pe=Ma;break}if(-1!=pe)for(Ma=pe;Ma<d.b.length&&bc.count<bc.W;++Ma)Wc.Db(d.b[Ma],f)&&Gf(d,bc,Bb,Ma)}else b.ab(a,k,h);0!=k.L||b.ld(a)?c=0:c++;b=2==c?null:b.next()}},this);h.length>k.count&&h.splice(k.count,h.length-k.count);return b?yf(h,b,c,d):h};m.clear=function(){this.ra=Hf(this);this.tb.clear()};m.Na=function(a){return this.ra.Na(a)};m.min=function(){return this.Kb(this.Y.min.bind(this.Y))};m.max=function(){return this.Kb(this.Y.max.bind(this.Y))};
function If(a,b,c){if(!a.Y.Ld(b.b[c]))if(1<b.b[c].length){if(null===b.b[c][0])return null}else return null;return[b.b[c],a.xf?[b.C[c]]:b.C[c]]}m.Kb=function(a){var b;a:{b=Ff(this.ra);var c=0;do if(c>=b.b.length)b=b.ua,c=0;else{var d=If(this,b,c);if(null!==d){b=d;break a}c++}while(null!==b);b=null}a:{c=Jf(this.ra);d=c.b.length-1;do if(0>d)c=c.pb,d=0;else{var e=If(this,c,d);if(null!==e){c=e;break a}d--}while(null!==c);c=null}return null===b||null===c?null:1==a(b[0],c[0])?b:c};m.Ja=g("xf");m.hb=g("Y");
m.Oa=function(a,b){return null!=a?0==this.Y.compare(a,b):!1};m.Ga=function(){for(var a=[],b=Ff(this.ra);b;)a.push(new Xb(b.pa,[b.b,b.C])),b=b.ua;return a};function Kf(a,b,c,d){a=new Bf(b,a,c);d=Lf(d,a);a.ra=d;return a}function Mf(a,b){this.pa=a;this.w=b;this.lb=0;this.ua=this.pb=this.G=null;this.b=[];this.C=[];this.h=[];this.Vf=1==b.hb().Xd()?this.Ne:this.Me}function Hf(a){return new Mf(Yb++,a)}function R(a){return 0==a.lb}m=Mf.prototype;m.next=g("ua");
function Nf(a){function b(a){return null!=a?a.pa.toString():"_"}var c=a.pa+"["+a.b.join("|")+"]",d=a.h.map(function(a){return a.pa}).join("|"),e=a.C.join("/"),f=b(a.pb)+"{",f=R(a)?f+e:f+d,f=f+"}"+b(a.G);a.ua&&(a=Nf(a.ua),c=c+"  "+a[0],f=f+"  "+a[1]);return[c,f]}m.toString=function(){var a="",b=Nf(this),a=a+(b[0]+"\n"+b[1]+"\n");this.h.length&&(a+=this.h[0].toString());return a};function Ff(a){return R(a)?a:Ff(a.h[0])}function Jf(a){return R(a)?a:Jf(a.h[a.h.length-1])}
function Of(a,b){b&&(b.pb=a);a&&(a.ua=b)}function Cf(a,b){for(var c=b.length,d=0,e=Hf(a),f=e;0<c;){var h=768<=c?511:257<=c&&511>=c?c:257,k=b.slice(d,d+h);e.b=k.map(function(a){return a.key});e.C=k.map(function(a){return a.value});d+=h;c-=h;0<c&&(h=Hf(e.w),Of(e,h),e=h)}return f}function Pf(a){var b=a[0],c=Hf(b.w);c.lb=b.lb+1;c.h=a;for(b=0;b<a.length;++b)a[b].G=c,0<b&&c.b.push(a[b].b[0]);return c}
function Df(a){var b=a,c=[];do c.push(b),b=b.ua;while(b);if(512>=c.length)b=Pf(c);else{var d=c.length,e=0,b=Hf(a.w);for(b.lb=a.lb+2;0<d;){a=768<=d?511:257<=d&&511>=d?d:257;var f=c.slice(e,e+a),h=Pf(f);h.G=b;b.h.length&&(b.b.push(f[0].b[0]),Of(b.h[b.h.length-1],h));b.h.push(h);e+=a;d-=a}}return b}m.get=function(a){var b=Qf(this,a);if(R(this)){var c=Ef;this.w.Oa(this.b[b],a)&&(c=c.concat(this.C[b]));return c}b=this.w.Oa(this.b[b],a)?b+1:b;return this.h[b].get(a)};
m.Na=function(a){var b=Qf(this,a);return this.w.Oa(this.b[b],a)?!0:R(this)?!1:this.h[b].Na(a)};m.remove=function(a,b){Rf(this,a,-1,b);if(null===this.G){var c=this;1==this.h.length&&(c=this.h[0],c.G=null);return c}return this};function Sf(a){return R(a)?a.b[0]:Sf(a.h[0])}function Tf(a){a.b=[];for(var b=1;b<a.h.length;++b)a.b.push(Sf(a.h[b]))}
function Rf(a,b,c,d){var e=Qf(a,b),f=R(a);if(!f){var h=a.w.Oa(a.b[e],b)?e+1:e;if(Rf(a.h[h],b,h,d))Tf(a);else return!1}else if(!a.w.Oa(a.b[e],b))return!1;if(a.b.length>e&&a.w.Oa(a.b[e],b)){if(q(d)&&!a.w.Ja()&&f&&(h=a.C[e],d=vf(h,d,void 0),0>d?d=!1:(h.splice(d,1),d=!0),d&&a.w.La().remove(b,1),a.C[e].length))return!1;a.b.splice(e,1);f&&(f=a.w.Ja()?1:a.C[e].length,a.C.splice(e,1),a.w.La().remove(b,f))}if(256>a.b.length&&null!==a.G){a:{b=null;if(a.ua&&256<a.ua.b.length)b=a.ua,e=d=0,f=a.b.length+1;else if(a.pb&&
256<a.pb.b.length)b=a.pb,d=a.pb.b.length-1,e=R(a)?d:d+1,f=0;else{b=!1;break a}a.b.splice(f,0,b.b[d]);b.b.splice(d,1);d=R(a)?a.C:a.h;h=null;R(a)?h=b.C:(h=b.h,h[e].G=a);d.splice(f,0,h[e]);h.splice(e,1);R(b)||(Tf(b),Tf(a));b=!0}b||Uf(a,c)}return!0}
function Uf(a,b){var c,d,e;a.ua&&511>a.ua.b.length?(c=a.ua,e=d=0):a.pb&&(c=a.pb,d=c.b.length,e=R(c)?c.C.length:c.h.length);d=[d,0].concat(a.b);Array.prototype.splice.apply(c.b,d);d=null;R(a)?d=a.C:(d=a.h,d.forEach(function(a){a.G=c}));d=[e,0].concat(d);Array.prototype.splice.apply(R(c)?c.C:c.h,d);Of(a.pb,a.ua);R(c)||Tf(c);-1!=b&&(a.G.b.splice(b,1),a.G.h.splice(b,1))}
m.Cb=function(a,b,c){var d=Qf(this,a);if(R(this)){if(this.w.Oa(this.b[d],a)){if(c)this.w.La().remove(a,this.w.Ja()?1:this.C[d].length),this.C[d]=this.w.Ja()?b:[b];else{if(this.w.Ja())throw new E(201);if(!xf(this.C[d],b))throw new E(109);}this.w.La().add(a,1);return this}this.b.splice(d,0,a);this.C.splice(d,0,this.w.Ja()?b:[b]);this.w.La().add(a,1);512==this.b.length?(d=Hf(this.w),a=Hf(this.w),a.lb=1,a.b=[this.b[256]],a.h=[this,d],a.G=this.G,this.G=a,d.b=this.b.splice(256),d.C=this.C.splice(256),d.G=
a,Of(d,this.ua),Of(this,d),d=a):d=this;return d}d=this.w.Oa(this.b[d],a)?d+1:d;a=this.h[d].Cb(a,b,c);R(a)||1!=a.b.length||(this.b.splice(d,0,a.b[0]),a.h[1].G=this,a.h[0].G=this,this.h.splice(d,1,a.h[1]),this.h.splice(d,0,a.h[0]));return 512==this.b.length?Vf(this):this};function Vf(a){var b=Hf(a.w),c=Hf(a.w);b.G=a.G;b.lb=a.lb+1;b.b=[a.b[256]];b.h=[a,c];a.b.splice(256,1);c.G=b;c.lb=a.lb;c.b=a.b.splice(256);c.h=a.h.splice(257);c.h.forEach(function(a){a.G=c});a.G=b;Of(c,a.ua);Of(a,c);return b}
function Qf(a,b){for(var c=0,d=a.b.length,e=a.w.hb();c<d;){var f=c+d>>1;-1==e.compare(a.b[f],b)?c=f+1:d=f}return c}m.Ne=function(a){if(!R(this)){var b=Qf(this,a);this.w.Oa(this.b[b],a)&&b++;return this.h[b].Ne(a)}return this};m.Me=function(a){if(!R(this)){var b=Qf(this,a);this.w.Oa(this.b[b],a)&&(a.some(function(a){return a==G})||b++);return this.h[b].Me(a)}return this};
m.ab=function(a,b,c){function d(a){return a[0]?a[1]?0:1:-1}var e=this.w.hb(),f=0,h=this.b.length-1,k=this.b,n=d(e.xb(k[f],a)),B=d(e.xb(k[h],a));if(1!=n&&(-1!=n||-1!=B)){var O=function(a,b){var c=a+b>>1;return c==a?c+1:c},da=function(b,c,f){if(b>=c)return 0==f?c:-1;var h=d(e.xb(k[b],a));if(0==h)return b;if(1==h)return-1;h=O(b,c);if(h==c)return 0==f?c:-1;var n=d(e.xb(k[h],a));return 0==n?da(b,h,n):-1==n?da(h+1,c,f):da(b+1,h,n)},Ab=function(b,c){if(b>=c)return b;var f=d(e.xb(k[c],a));if(0==f)return c;
if(-1==f)return b;f=O(b,c);if(f==c)return b;var h=d(e.xb(k[f],a));return 0==h?Ab(f,c):1==h?Ab(b,f-1):-1};0!=n&&(f=da(f+1,h,B));-1!=f&&(h=Ab(f,h),-1!=h&&h>=f&&Xf(this,b,c,f,h+1))}};function Gf(a,b,c,d){if(a.w.Ja())!b.reverse&&b.L?b.L--:c[b.count++]=a.C[d];else for(var e=0;e<a.C[d].length&&b.count<c.length;++e)!b.reverse&&b.L?b.L--:c[b.count++]=a.C[d][e]}function Xf(a,b,c,d,e){for(;d<e&&(b.reverse||!(b.count>=b.W));++d)Gf(a,b,c,d)}
m.fill=function(a,b){if(R(this))for(var c=0;c<this.C.length&&0<a.count;++c)if(0<a.offset){if(a.offset-=this.w.Ja()?1:this.C[c].length,0>a.offset)for(var d=this.C[c].length+a.offset;d<this.C[c].length&&0<a.count;++d)b[a.qe++]=this.C[c][d],a.count--}else if(this.w.Ja())b[a.qe++]=this.C[c],a.count--;else for(d=0;d<this.C[c].length&&0<a.count;++d)b[a.qe++]=this.C[c][d],a.count--;else for(c=0;c<this.h.length&&0<a.count;++c)this.h[c].fill(a,b)};
function Lf(a,b){for(var c=b.La(),d=a.map(function(a){var d=new Mf(a.id(),b);d.b=a.s[0];d.C=a.s[1];d.b.forEach(function(a,e){c.add(a,b.Ja()?1:d.C[e].length)});return d}),e=0;e<d.length-1;++e)Of(d[e],d[e+1]);return 1<d.length?Df(d[0]):d[0]}m.ld=function(a){return this.w.hb().ld(this.b[0],a)};function Yf(a){this.Yc=0==a?Zf:$f;this.$d=0==a?function(a){return null!=a?a.reverse():null}:function(a){return a||null};this.fe=0==a?ag:bg}function $f(a,b){return a>b?1:a<b?-1:0}function Zf(a,b){return $f(b,a)}function bg(a,b){return vd(a,b)}function ag(a,b){return vd(b,a)}m=Yf.prototype;m.xb=function(a,b){var c=this.$d(b),d=[c.c==G,c.u==G];if(!d[0]){var e=this.Yc(a,c.c);d[0]=c.ea?1==e:-1!=e}d[1]||(e=this.Yc(a,c.u),d[1]=c.ma?-1==e:1!=e);return d};m.compare=function(a,b){return this.Yc(a,b)};
m.min=function(a,b){return a<b?1:a==b?0:-1};m.max=function(a,b){return a>b?1:a==b?0:-1};m.Db=function(a,b){var c=this.xb(a,b);return c[0]&&c[1]};m.ld=function(a,b){return this.Db(a,b)};m.tf=function(a){return a.filter(function(a){return null!==a}).sort(function(a,c){return this.fe(a,c)}.bind(this))};m.Ud=function(a){return this.$d(a).c==G};m.td=function(a){a=this.$d(a);return[a.c,a.u]};m.Ld=function(a){return null!==a};m.Xd=l(1);
m.toString=function(){return this.compare==Zf?"SimpleComparator_DESC":"SimpleComparator_ASC"};function cg(a){Yf.call(this,a);this.Yc=0==a?dg:eg}t(cg,Yf);function eg(a,b){return null===a?null===b?0:-1:null===b?1:$f(a,b)}function dg(a,b){return eg(b,a)}cg.prototype.Db=function(a,b){return null===a?qd(b):cg.eb.Db.call(this,a,b)};cg.prototype.Kb=function(a,b){return null===a?null===b?0:-1:null===b?1:null};cg.prototype.min=function(a,b){var c=this.Kb(a,b);null===c&&(c=cg.eb.min.call(this,a,b));return c};
cg.prototype.max=function(a,b){var c=this.Kb(a,b);null===c&&(c=cg.eb.max.call(this,a,b));return c};function fg(a){this.oa=a.map(function(a){return new Yf(a)})}function gg(a,b,c,d){for(var e=0,f=0;f<a.oa.length&&0==e;++f)e=d(a.oa[f],b[f],c[f]);return e}m=fg.prototype;m.compare=function(a,b){return gg(this,a,b,function(a,b,e){return b==G||e==G?0:a.compare(b,e)})};m.min=function(a,b){return gg(this,a,b,function(a,b,e){return a.min(b,e)})};m.max=function(a,b){return gg(this,a,b,function(a,b,e){return a.max(b,e)})};
m.xb=function(a,b){for(var c=[!0,!0],d=0;d<this.oa.length&&(c[0]||c[1]);++d){var e=this.oa[d].xb(a[d],b[d]);c[0]=c[0]&&e[0];c[1]=c[1]&&e[1]}return c};m.Db=function(a,b){for(var c=!0,d=0;d<this.oa.length&&c;++d)c=this.oa[d].Db(a[d],b[d]);return c};m.ld=function(a,b){return this.oa[0].Db(a[0],b[0])};
m.tf=function(a){var b=a.filter(function(a){return a.every(ga)});a=Array(this.oa.length);for(var c=0;c<a.length;c++)a[c]=b.map(function(a){return a[c]});a.forEach(function(a,b){a.sort(function(a,c){return this.oa[b].fe(a,c)}.bind(this))},this);b=Array(b.length);for(c=0;c<b.length;c++)b[c]=a.map(function(a){return a[c]});return b.sort(function(a,b){for(var c=0,h=0;h<this.oa.length&&0==c;++h)c=this.oa[h].fe(a[h],b[h]);return c}.bind(this))};m.Ud=function(a){return this.oa[0].Ud(a[0])};
m.td=function(a){var b=a.map(function(a,b){return this.oa[b].td(a)[0]},this);a=a.map(function(a,b){return this.oa[b].td(a)[1]},this);return[b,a]};m.Ld=function(a){return a.every(function(a,c){return this.oa[c].Ld(a)},this)};m.Xd=function(){return this.oa.length};function hg(a){fg.call(this,a);this.oa=a.map(function(a){return new cg(a)})}t(hg,fg);function ig(a){if(1==a.f.length)return new Yf(a.f[0].ob);var b=a.f.map(function(a){return a.ob});return a.f.some(function(a){return a.ba.kc()})?new hg(b):new fg(b)};function jg(a){this.ga=a;this.nb=C();this.Nc=new zf;this.tb=new zf}m=jg.prototype;m.getName=function(){return this.ga.getName()};m.add=function(a,b){null===a?(this.nb.add(b),this.Nc.add(a,1)):this.ga.add(a,b)};m.set=function(a,b){null===a?(this.nb.clear(),this.Nc.clear(),this.add(a,b)):this.ga.set(a,b)};m.remove=function(a,b){null===a?b?(this.nb.delete(b),this.Nc.remove(a,1)):(this.nb.clear(),this.Nc.clear()):this.ga.remove(a,b)};m.get=function(a){return null===a?D(this.nb):this.ga.get(a)};m.Zc=function(a){return this.ga.Zc(a)};
m.La=function(){Af(this.tb,[this.ga.La(),this.Nc]);return this.tb};m.ab=function(a,b,c,d){b=this.ga.ab(a,b,c,d);return null!=a?b:b.concat(D(this.nb))};m.clear=function(){this.nb.clear();this.ga.clear()};m.Na=function(a){return null===a?0!=this.nb.size:this.ga.Na(a)};m.min=function(){return this.ga.min()};m.max=function(){return this.ga.max()};m.Ga=function(){return[new Xb(-2,D(this.nb))].concat(this.ga.Ga())};m.hb=function(){return this.ga.hb()};
function kg(a,b){for(var c=-1,d=0;d<b.length;++d)if(-2==b[d].id()){c=d;break}if(-1==c)throw new E(102);var d=b[c].s,e=b.slice(0);e.splice(c,1);var c=a(e),f=new jg(c);d.forEach(function(a){f.nb.add(a)});return f}m.Ja=function(){return this.ga.Ja()};function lg(a){this.B=a;this.sb=C();this.Y=new Yf(1)}m=lg.prototype;m.getName=g("B");m.add=function(a){if("number"!=typeof a)throw new E(103);this.sb.add(a)};m.set=function(a,b){this.add(a,b)};m.remove=function(a){this.sb.delete(a)};m.get=function(a){return this.Na(a)?[a]:[]};m.min=function(){return this.Kb(this.Y.min.bind(this.Y))};m.max=function(){return this.Kb(this.Y.max.bind(this.Y))};
m.Kb=function(a){if(0==this.sb.size)return null;var b=D(this.sb).reduce(function(b,d){return null===b||1==a(d,b)?d:b},null);return[b,[b]]};m.Zc=function(){return this.sb.size};m.ab=function(a,b,c,d){var e=a||[td()];a=D(this.sb).filter(function(a){return e.some(function(b){return this.Y.Db(a,b)},this)},this);return yf(a,b,c,d)};m.clear=function(){this.sb.clear()};m.Na=function(a){return this.sb.has(a)};m.Ga=function(){return[new Xb(0,D(this.sb))]};m.hb=g("Y");
function mg(a,b){var c=new lg(a);b[0].s.forEach(function(a){c.add(a,a)});return c}m.Ja=l(!0);m.La=function(){var a=new zf;a.la=this.sb.size;return a};function ng(a){this.Ma=a.l(lc);this.F=a.l(nc);this.V=a.l(mc)}ng.prototype.Ha=function(a){var b=a.sa(),c=function(){if(0==b.length)return w();var a=b.shift();return(a.Fb()?og(this,a):pg(this,a)).then(c)}.bind(this);return c()};function pg(a,b){var c=a.Ma.Hb(0,[b]),d=c.I(b.getName(),b.ib.bind(b),0).get([]).then(function(a){this.V.Yb(b.getName(),a);qg(this,b,a)}.bind(a));c.ia();return d}
function qg(a,b,c){var d=a.F.nc.get(b.getName())||[];c.forEach(function(a){d.forEach(function(b){var c=a.mb(b.getName());b.add(c,a.id())})})}function og(a,b){var c=a.Ma.Hb(0,[b]),d=c.I(b.getName(),b.ib,0).get([]).then(function(a){this.V.Yb(b.getName(),a)}.bind(a)),e=b.Ba().map(function(a){return rg(this,a,c)},a).concat(sg(a,b,c));c.ia();return fb(e.concat(d))}
function rg(a,b,c){c=c.I(b.m(),Zb,1);var d=ig(b);return c.get([]).then(function(a){if(0<a.length){if(tg(b)){var c=Kf.bind(void 0,d,b.m(),b.Ec);a=kg(c,a)}else a=Kf(d,b.m(),b.Ec,a);this.F.set(b.Oc,a)}}.bind(a))}function sg(a,b,c){return c.I(bf(b),Zb,1).get([]).then(function(a){0<a.length&&(a=mg(bf(b),a),this.F.set(b.getName(),a))}.bind(a))};function ug(){this.X=z();this.nc=z()}ug.prototype.Ha=function(a){a.sa().forEach(function(a){var c=[];this.nc.set(a.getName(),c);var d=bf(a);if(null===this.get(d)){var e=new lg(d);c.push(e);this.X.set(d,e)}a.Ba().forEach(function(a){var b;b=ig(a);b=new Bf(a.m(),b,a.Ec);b=tg(a)&&1==a.f.length?new jg(b):b;c.push(b);this.X.set(a.m(),b)},this)},this);return w()};ug.prototype.get=function(a){return this.X.get(a)||null};
ug.prototype.set=function(a,b){var c=this.nc.get(a)||null;null===c&&(c=[],this.nc.set(a,c));for(var d=null,e=0;e<c.length;e++)if(c[e].getName()==b.getName()){d=e;break}null!==d&&0<c.length?c.splice(d,1,b):c.push(b);this.X.set(b.getName(),b)};function vg(a,b){var c=[],d=null,e=null;be(a,function(a){var h=b(a);null==a.getParent()?e=h:Zd(d,h);var k=a.getParent();null!==k&&M(k).length==M(d).length&&(k=c.indexOf(d),-1!=k&&c.splice(k,1));1<M(a).length&&c.push(h);d=null===a.h?c[c.length-1]:h});return e}function wg(a){return xg(a,function(a){return null===a.h})}
function yg(a){var b=a.getParent(),c=0;null!==b&&(c=M(b).indexOf(a),b.removeChild(a));var d=M(a).slice();d.forEach(function(d,f){a.removeChild(d);null===b||Yd(b,d,c+f)});return{parent:b,children:d}}function zg(a,b){M(a).slice().forEach(function(c){a.removeChild(c);Zd(b,c)});Zd(a,b)}function Ag(a){var b=Xd(a,0);yg(a);zg(b,a);return b}
function Bg(a,b,c){var d=Xd(a,0),e=M(d).slice();if(!e.some(function(a){return b(a)}))return a;yg(a);e.forEach(function(e,h){if(b(e)){var k=c(a);$d(d,h);Zd(k,e);Yd(d,k,h)}});return d}function Cg(a,b,c,d){var e=a.getParent();null!==e&&(a=M(e).indexOf(a),$d(e,a),Yd(e,c,a));M(b).slice().forEach(function(a){b.removeChild(a);Zd(d,a)});return c}function xg(a,b,c){function d(a){b(a)&&e.push(a);null!=c&&c(a)||M(a).forEach(d)}var e=[];d(a);return e}
function Dg(a,b){var c=b||function(a){return a.toString()+"\n"},d="";be(a,function(a){for(var b=0;b<Wd(a);b++)d+="-";d+=c(a)});return d};function Eg(a){ce.call(this);this.Ub=a;this.Ra=!1}t(Eg,ce);m=Eg.prototype;m.Ob=function(){return vg(this,function(a){if(a instanceof Eg){var b=new Eg(a.Ub);b.Ra=a.Ra;a=a.Z();b.pa=a;return b}return a.Ob()})};m.jb=function(a){var b=a||[];be(this,function(a){a!=this&&a.jb(b)}.bind(this));a=C(b);return D(a)};m.vd=function(a){this.Ra!=a&&(this.Ra=a,this.Ub="and"==this.Ub?"or":"and",M(this).forEach(function(b){return b.vd(a)}))};
m.eval=function(a){var b=M(this).map(function(b){return b.eval(a)});return Fg(this,b)};function Fg(a,b){return"and"==a.Ub?Ed(b):Fd(b)}m.toString=function(){return"combined_pred_"+this.Ub.toString()};function Gg(a,b,c){ce.call(this);this.ha=a;this.ka=b;this.D=c;this.ae=null;a=Td();this.wc=Ud(a,this.ha.H(),this.D);this.gg=a.Xe.get(this.ha.H())||null}t(Gg,ce);m=Gg.prototype;m.Ob=function(){var a=new Gg(this.ha,this.ka,this.D),b=this.Z();a.pa=b;return a};m.jb=function(a){return null!=a?(a.push(this.ha),a.push(this.ka),a):[this.ha,this.ka]};
m.reverse=function(){var a=this.D;switch(this.D){case "gt":a="lt";break;case "lt":a="gt";break;case "gte":a="lte";break;case "lte":a="gte"}return new Gg(this.ka,this.ha,a)};m.eval=function(a){var b=a.entries.filter(function(a){var b=J(a,this.ha);a=J(a,this.ka);return this.wc(b,a)},this);return new H(b,I(a))};m.toString=function(){return"join_pred("+this.ha.m()+" "+this.D+" "+this.ka.m()+")"};
function Hg(a,b,c){var d=null,e=null;-1!=I(b).indexOf(K(a.ha.I()))?(d=b,e=c):(d=c,e=b);if(d.entries.length>e.entries.length){a:{b=a.ha;a.ha=a.ka;a.ka=b;b=a.D;switch(a.D){case "gt":b="lt";break;case "lt":b="gt";break;case "gte":b="lte";break;case "lte":b="gte";break;default:break a}a.D=b;a.wc=Ud(Td(),a.ha.H(),a.D)}return[e,d]}return[d,e]}function Ig(a){var b={};a.jb().forEach(function(a){b[a.getName()]=null});return b}
function Jg(a,b,c){null===a.ae&&(a.ae=Ig(a.ka.I()));var d=new Hd(new Xb(-1,a.ae),!1);return Kd(b,c,d,[K(a.ka.I())])}
function Kg(a,b,c,d){var e=[b,c];d||(e=Hg(a,b,c));b=e[0];c=e[1];var e=b,f=c,h=a.ha,k=a.ka;d&&(e=c,f=b,h=a.ka,k=a.ha);var n=new Sc,B=[];e.entries.forEach(function(a){var b=String(J(a,h));n.set(b,a)});var O=I(e),da=I(f);f.entries.forEach(function(a){var b=J(a,k),c=String(b);null!==b&&n.has(c)?n.get(c).forEach(function(b){b=Kd(a,da,b,O);B.push(b)}):d&&B.push(Jg(this,a,da))}.bind(a));a=I(b).concat(I(c));return new H(B,a)}
function Lg(a,b,c,d,e){function f(a,b){var c=new Hd(b,1<O.length),c=Kd(a,da,c,O);B.push(c)}var h=d.Zf.I(),k=b,n=c;-1!=I(b).indexOf(K(h))&&(k=c,n=b);var B=[],O=I(n),da=I(k);k.entries.forEach(function(a){var b=this.gg(J(a,d.pg)),b=d.index.get(b);0!=b.length&&(d.index.Ja()?f(a,e.get(b[0])):uf(e,b).forEach(f.bind(null,a)))},a);a=I(k).concat(I(n));return new H(B,a)};function Mg(a,b,c){return null===b?new ee(a,b,c):q(b.m)?new Gg(a,b,c):new ee(a,b,c)};var Ng={};r("lf.schema.DataStoreType",Ng);Ng.INDEXED_DB=0;Ng.MEMORY=1;Ng.LOCAL_STORAGE=2;Ng.FIREBASE=3;Ng.WEB_SQL=4;Ng.OBSERVABLE_STORE=5;function Og(a,b,c,d){this.Oc=a;this.name=b;this.Ec=c;this.f=d}Og.prototype.m=function(){return this.Oc+"."+this.name};function tg(a){return a.f.some(function(a){return a.ba.kc()})}function S(a,b,c,d){this.B=a;this.qa=c;this.K=b;this.qd=d;this.fb=null}r("lf.schema.Table",S);S.prototype.getName=g("B");S.prototype.getName=S.prototype.getName;S.prototype.$a=g("fb");
function K(a){return a.fb||a.B}S.prototype.sc=function(a){var b=new this.constructor(this.B);b.fb=a;b.Bg=this.Bg;return b};S.prototype.as=S.prototype.sc;S.prototype.createRow=S.prototype.yb;S.prototype.deserializeRow=S.prototype.ib;S.prototype.Ba=g("qa");S.prototype.getIndices=S.prototype.Ba;S.prototype.jb=g("K");S.prototype.getColumns=S.prototype.jb;S.prototype.getConstraint=S.prototype.Jb;S.prototype.Fb=g("qd");S.prototype.persistentIndex=S.prototype.Fb;function bf(a){return a.B+".#"};function T(a,b){this.child=a;this.Nb=b;this.fb=null}m=T.prototype;m.getName=function(){return this.Nb+"("+this.child.getName()+")"};m.m=function(){return this.Nb+"("+this.child.m()+")"};m.I=function(){return this.child.I()};m.toString=function(){return this.m()};m.H=function(){return this.child.H()};m.$a=g("fb");m.Ba=function(){return[]};m.Aa=l(null);m.kc=l(!1);m.sc=function(a){this.fb=a;return this};T.prototype.as=T.prototype.sc;
function Pg(a){for(var b=[a];a instanceof T;)b.push(a.child),a=a.child;return b}function Qg(a){this.fb=a||null;this.U=new S("#UnknownTable",[],[],!1)}m=Qg.prototype;m.getName=l("*");m.m=function(){return this.getName()};m.toString=function(){return this.m()};m.I=g("U");m.H=l(4);m.$a=g("fb");m.Ba=function(){return[]};m.Aa=l(null);m.kc=l(!1);r("lf.fn.avg",function(a){return new T(a,"AVG")});function Rg(a){return new T(a||new Qg,"COUNT")}r("lf.fn.count",Rg);function Sg(a){return new T(a,"DISTINCT")}r("lf.fn.distinct",Sg);r("lf.fn.max",function(a){return new T(a,"MAX")});r("lf.fn.min",function(a){return new T(a,"MIN")});r("lf.fn.stddev",function(a){return new T(a,"STDDEV")});r("lf.fn.sum",function(a){return new T(a,"SUM")});r("lf.fn.geomean",function(a){return new T(a,"GEOMEAN")});function U(a,b){L.call(this);this.Qf=b}t(U,L);U.prototype.exec=function(a,b){switch(this.Qf){case 1:return Tg(this,a,b);case 0:return Ug(this,a,b);default:return Vg(this,a,b)}};U.prototype.toString=l("dummy_node");U.prototype.Pc=function(){return this.toString()};function Vg(a,b,c){return new v(function(a){a(this.fa([],b,c))}.bind(a))}function Tg(a,b,c){return Xd(a,0).exec(b,c).then(function(a){return this.fa(a,b,c)}.bind(a))}
function Ug(a,b,c){var d=M(a).map(function(a){return a.exec(b,c)});return fb(d).then(function(a){var d=[];a.forEach(function(a){for(var b=0;b<a.length;++b)d.push(a[b])});return this.fa(d,b,c)}.bind(a))};function Wg(a){U.call(this,0,1);this.Be=a}t(Wg,U);Wg.prototype.toString=function(){return"aggregation("+this.Be.map(function(a){return a.m()}).toString()+")"};Wg.prototype.fa=function(a){a.forEach(function(a){Xg(new Yg(a,this.Be))},this);return a};function Yg(a,b){this.Ka=a;this.K=b}
function Xg(a){a.K.forEach(function(a){a=Pg(a).reverse();for(var c=1;c<a.length;c++){var d=a[c],e=Pg(d).slice(-1)[0],f=d.child instanceof T?Bd(this.Ka,d.child):this.Ka;if(null!==f.Za&&f.Za.has(d.m()))break;f=Zg(d.Nb,f,e);e=this.Ka;null===e.Za&&(e.Za=z());e.Za.set(d.m(),f)}},a)}
function Zg(a,b,c){var d=null;switch(a){case "MIN":d=$g(b,c,function(a,b){return b<a?b:a});break;case "MAX":d=$g(b,c,function(a,b){return b>a?b:a});break;case "DISTINCT":d=ah(b,c);break;case "COUNT":d=bh(b,c);break;case "SUM":d=ch(b,c);break;case "AVG":a=bh(b,c);0<a&&(d=ch(b,c)/a);break;case "GEOMEAN":d=dh(b,c);break;default:d=eh(b,c)}return d}function $g(a,b,c){return a.entries.reduce(function(a,e){var f=J(e,b);return null===f?a:null===a?f:c(a,f)},null)}
function bh(a,b){return b instanceof Qg?a.entries.length:a.entries.reduce(function(a,d){return a+(fa(J(d,b))?0:1)},0)}function ch(a,b){return $g(a,b,function(a,b){return b+a})}function eh(a,b){var c=[];a.entries.forEach(function(a){a=J(a,b);null===a||c.push(a)});return 0==c.length?null:ub.apply(null,c)}function dh(a,b){var c=0,d=a.entries.reduce(function(a,d){var h=J(d,b);if(0==h||null===h)return a;c++;return a+Math.log(h)},0);return 0==c?null:Math.pow(Math.E,d/c)}
function ah(a,b){var c=z();a.entries.forEach(function(a){var e=J(a,b);c.set(e,a)});return new H(A(c),I(a))};function fh(a,b){this.Ea=a;this.aa=b}fh.prototype.kb=g("Ea");fh.prototype.ca=g("aa");function gh(){L.call(this)}t(gh,L);function hh(a,b){L.call(this);this.table=a;this.values=b}t(hh,gh);function ih(a,b){hh.call(this,a,b)}t(ih,hh);function jh(a){L.call(this);this.table=a}t(jh,gh);jh.prototype.toString=function(){return"delete("+this.table.getName()+")"};function kh(a,b){L.call(this);this.table=a;this.we=b}t(kh,gh);
kh.prototype.toString=function(){var a=[];this.we&&(a=this.we.map(function(a){return a.N.getName()},this));return"update("+this.table.getName()+", ["+a.join(",")+"])"};function lh(a){L.call(this);this.J=a}t(lh,gh);lh.prototype.toString=function(){return"select("+this.J.toString()+")"};function mh(a){L.call(this);this.table=a}t(mh,gh);mh.prototype.toString=function(){var a="table_access("+this.table.getName();null===this.table.$a()||(a+=" as "+this.table.$a());return a+")"};
function nh(){L.call(this)}t(nh,gh);nh.prototype.toString=l("cross_product");function oh(a,b){L.call(this);this.f=a;this.Qb=b}t(oh,gh);oh.prototype.toString=function(){var a="project("+this.f.toString();if(null!==this.Qb)var b=this.Qb.map(function(a){return a.m()}).join(", "),a=a+(", groupBy("+b+")");return a+")"};function ph(a){L.call(this);this.O=a}t(ph,gh);ph.prototype.toString=function(){return"order_by("+qe(this.O)+")"};function qh(a){L.call(this);this.f=a}t(qh,gh);
qh.prototype.toString=function(){return"aggregation("+this.f.toString()+")"};function rh(a){L.call(this);this.f=a}t(rh,gh);rh.prototype.toString=function(){return"group_by("+this.f.toString()+")"};function sh(a){L.call(this);this.W=a}t(sh,gh);sh.prototype.toString=function(){return"limit("+this.W+")"};function th(a){L.call(this);this.L=a}t(th,gh);th.prototype.toString=function(){return"skip("+this.L+")"};function uh(a,b){L.call(this);this.J=a;this.Sb=b}t(uh,gh);
uh.prototype.toString=function(){return"join(type: "+(this.Sb?"outer":"inner")+", "+this.J.toString()+")"};function vh(){};function wh(){}t(wh,vh);wh.prototype.rb=function(a){this.$=a;this.Xa(this.$);return this.$};wh.prototype.Xa=function(a){if(a instanceof lh){var b=xh(this,a.J),b=yh(this,b);Cg(a,a,b[0],b[1]);a==this.$&&(this.$=b[0]);a=b[0]}M(a).forEach(function(a){this.Xa(a)},this)};function xh(a,b){if(0==M(b).length||"and"!=b.Ub)return[b];var c=M(b).slice().map(function(a){b.removeChild(a);return xh(this,a)},a);return Fa(c)}
function yh(a,b){var c=null,d=null;b.map(function(a,b){var h=new lh(a);0==b?c=h:Zd(d,h);d=h},a);return[c,d]};function zh(){}t(zh,vh);zh.prototype.rb=function(a,b){if(3>b.c.length)return a;this.$=a;this.Xa(this.$);return this.$};zh.prototype.Xa=function(a){if(a instanceof nh)for(;2<M(a).length;){for(var b=new nh,c=0;2>c;c++){var d=$d(a,0);Zd(b,d)}Yd(a,b,0)}M(a).forEach(function(a){this.Xa(a)},this)};function Ah(){U.call(this,0,0)}t(Ah,U);Ah.prototype.toString=l("cross_product");Ah.prototype.fa=function(a){var b=a[0],c=a[1];a=[];for(var d=I(b),e=I(c),f=0;f<b.entries.length;f++)for(var h=0;h<c.entries.length;h++){var k=Kd(b.entries[f],d,c.entries[h],e);a.push(k)}b=I(b).concat(I(c));return[new H(a,b)]};function Bh(a,b){te.call(this,a,b);this.Fa=a.l(pc);this.Lb=a.l(qc)}t(Bh,te);Bh.prototype.getPriority=l(2);Bh.prototype.de=function(a){0==this.H()?Ch(this,a):this.Mc()};function Ch(a,b){a.sd.forEach(function(a,d){a instanceof oe&&we(this.Lb,a,b[d])},a)}Bh.prototype.Mc=function(){var a=ye(this.Lb,this.ca());0!=a.length&&(a=new ve(this.global,a),ze(this.Fa,a))};function Dh(a){je.call(this,a)}t(Dh,je);Dh.prototype.ca=function(){var a=C();a.add(this.c);Eh(this,this.c.getName(),a);return a};function Eh(a,b,c){var d=Fh(a.ba.info(),b,1);Fh(a.ba.info(),b).forEach(c.add.bind(c));d.forEach(function(a){Eh(this,a.getName(),c)},a)}Dh.prototype.clone=function(){var a=new Dh(this.ba);me(a,this);a.c=this.c;return a};Dh.prototype.bind=function(a){Dh.eb.bind.call(this,a);ne(this,a);return this};function Gh(a){je.call(this,a)}t(Gh,je);Gh.prototype.ca=function(){var a=C();a.add(this.Ia);var b=this.ba.info();Hh(this.Ia.getName(),b.ef).forEach(a.add.bind(a));this.cc&&Fh(b,this.Ia.getName()).forEach(a.add.bind(a));return a};Gh.prototype.clone=function(){var a=new Gh(this.ba);me(a,this);a.Ia=this.Ia;this.values&&(a.values=this.values instanceof Ld?this.values:this.values.slice());a.cc=this.cc;a.dc=this.dc;return a};
Gh.prototype.bind=function(a){Gh.eb.bind.call(this,a);this.dc&&(this.values=this.dc instanceof Ld?a[this.dc.Aa()]:this.dc.map(function(b){return b instanceof Ld?a[b.Aa()]:b}));return this};function Ih(a){je.call(this,a)}t(Ih,je);Ih.prototype.ca=function(){var a=C();a.add(this.table);var b=this.set.map(function(a){return a.N.m()}),c=this.ba.info();Jh(c,b).forEach(a.add.bind(a));Kh(c,b).forEach(a.add.bind(a));return a};Ih.prototype.clone=function(){var a=new Ih(this.ba);me(a,this);a.table=this.table;a.set=this.set?this.set.slice():this.set;return a};Ih.prototype.bind=function(a){Ih.eb.bind.call(this,a);this.set.forEach(function(b){-1!=b.Uc&&(b.value=a[b.Uc])});ne(this,a);return this};function Lh(a,b){if(null==b)return"NULL";switch(a){case 1:return b?1:0;case 3:case 4:return b;case 0:return"'"+ac(b)+"'";default:return"'"+b.toString()+"'"}}function Mh(a,b){var c=a.cc?"INSERT OR REPLACE":"INSERT",d=a.Ia.jb(),c=c+(" INTO "+a.Ia.getName()+"("),c=c+d.map(function(a){return a.getName()}).join(", "),c=c+") VALUES (";return a.values.map(function(a){var f=d.map(function(c){var d=a.s[c.getName()];return b?null!=d?"#":"NULL":Lh(c.H(),d)});return c+f.join(", ")+");"}).join("\n")}
function Nh(a){switch(a){case "between":return"BETWEEN";case "eq":return"=";case "gte":return">=";case "gt":return">";case "in":return"IN";case "lte":return"<=";case "lt":return"<";case "match":return"LIKE";case "neq":return"<>";default:return"UNKNOWN"}}function Oh(a,b,c,d){return a instanceof Ld?"?"+a.Aa().toString():d?null!=a?"#":"NULL":"match"==b?"'"+a.toString()+"'":"in"==b?"("+a.map(function(a){return Lh(c,a)}).join(", ")+")":"between"==b?Lh(c,a[0])+" AND "+Lh(c,a[1]):Lh(c,a).toString()}
function Ph(a,b){return M(a).map(function(a){return"("+Qh(a,b)+")"}).join("and"==a.Ub?" AND ":" OR ")}function Rh(a){return[a.ha.m(),Nh(a.D),a.ka.m()].join(" ")}function Qh(a,b){if(a instanceof ee){var c=a.N.m(),d=Nh(a.D),e=Oh(a.value,a.D,a.N.H(),b);return"="==d&&"NULL"==e?[c,"IS NULL"].join(" "):"<>"==d&&"NULL"==e?[c,"IS NOT NULL"].join(" "):[c,d,e].join(" ")}if(a instanceof Eg)return Ph(a,b);if(a instanceof Gg)return Rh(a);throw new E(357,typeof a);}
function Sh(a,b){var c=Qh(a,b);return c?" WHERE "+c:""}function Th(a,b){var c="UPDATE "+a.table.getName()+" SET ",c=c+a.set.map(function(a){var b=a.N.m()+" = ";return-1!=a.Uc?b+"?"+a.Uc.toString():b+Lh(a.N.H(),a.value).toString()}).join(", ");a.A&&(c+=Sh(a.A,b));return c+";"}
function Uh(a,b){var c="*";a.f.length&&(c=a.f.map(function(a){return a.$a()?a.m()+" AS "+a.$a():a.m()}).join(", "));c="SELECT "+c+" FROM ";null!=a.Eb&&0!=a.Eb.size?c+=Vh(a,b):(c+=a.c.map(Wh).join(", "),a.A&&(c+=Sh(a.A,b)));if(a.O)var d=a.O.map(function(a){return a.N.m()+(0==a.ob?" DESC":" ASC")}).join(", "),c=c+(" ORDER BY "+d);a.ja&&(d=a.ja.map(function(a){return a.m()}).join(", "),c+=" GROUP BY "+d);a.W&&(c+=" LIMIT "+a.W.toString());a.L&&(c+=" SKIP "+a.L.toString());return c+";"}
function Wh(a){return K(a)!=a.getName()?a.getName()+" AS "+K(a):a.getName()}function Vh(a,b){for(var c=xg(a.A,function(a){return a instanceof Gg}),d=c.map(Rh),e=Wh(a.c[0]),f=1;f<a.c.length;f++)var h=Wh(a.c[f]),e=a.Eb.has(c[d.length-f].Z())?e+(" LEFT OUTER JOIN "+h):e+(" INNER JOIN "+h),e=e+(" ON ("+d[d.length-f]+")");c=Xd(a.A,0);c instanceof Gg||(e+=" WHERE "+Qh(c,b));return e}
function Xh(a,b){var c=b||!1,d=a.a.clone();if(d instanceof Gh)return Mh(d,c);if(d instanceof Dh){var e="DELETE FROM "+d.c.getName();d.A&&(e+=Sh(d.A,c));return e+";"}if(d instanceof Ih)return Th(d,c);if(d instanceof oe)return Uh(d,c);throw new E(358,typeof d);};function V(a,b){this.global=a;this.Ag=a.l(oc);this.Fa=a.l(pc);this.a=b}r("lf.query.BaseBuilder",V);V.prototype.exec=function(){try{this.gb()}catch(a){return cb(a)}return new v(function(a,b){var c=new Bh(this.global,[this.Cc()]);ze(this.Fa,c).then(function(b){a(zd(b[0]))},b)},this)};V.prototype.exec=V.prototype.exec;V.prototype.Sf=function(){var a=function(a){return a.Pc(this.a)+"\n"}.bind(this);return Dg(Yh(this).kb(),a)};V.prototype.explain=V.prototype.Sf;
V.prototype.bind=function(a){this.a.bind(a);return this};V.prototype.bind=V.prototype.bind;V.prototype.Hg=function(a){return Xh(this,a)};V.prototype.toSql=V.prototype.Hg;V.prototype.gb=aa();function Yh(a){if(null==a.ff){var b;b=a.Ag;var c=a.a,d=b.jg.create(c);b=b.xg.create(d,c);a.ff=b}return a.ff}V.prototype.Cc=function(){return{context:this.a.clone(),ge:Yh(this)}};function Zh(a){V.call(this,a,new Dh(a.l(rc)))}t(Zh,V);r("lf.query.DeleteBuilder",Zh);Zh.prototype.c=function(a){if(null!=this.a.c)throw new E(515);this.a.c=a;return this};Zh.prototype.from=Zh.prototype.c;Zh.prototype.A=function(a){this.Cd();this.a.A=a;return this};Zh.prototype.where=Zh.prototype.A;Zh.prototype.Cd=function(){if(null==this.a.c)throw new E(548);if(null!=this.a.A)throw new E(516);};Zh.prototype.gb=function(){Zh.eb.gb.call(this);if(null==this.a.c)throw new E(517);};function $h(a,b){V.call(this,a,new Gh(a.l(rc)));this.a.cc=b||!1}t($h,V);r("lf.query.InsertBuilder",$h);$h.prototype.gb=function(){$h.eb.gb.call(this);var a=this.a;if(null==a.Ia||null==a.values)throw new E(518);if(a.cc&&null===a.Ia.Jb().cd())throw new E(519);};$h.prototype.Ia=function(a){if(null!=this.a.Ia)throw new E(520);this.a.Ia=a;return this};$h.prototype.into=$h.prototype.Ia;
$h.prototype.values=function(a){if(null!=this.a.values)throw new E(521);a instanceof Ld||a.some(function(a){return a instanceof Ld})?this.a.dc=a:this.a.values=a;return this};$h.prototype.values=$h.prototype.values;function ai(a){return bi("and",Array.prototype.slice.call(arguments))}r("lf.op.and",ai);r("lf.op.or",function(a){return bi("or",Array.prototype.slice.call(arguments))});function bi(a,b){var c=new Eg(a);b.forEach(function(a){Zd(c,a)});return c}r("lf.op.not",function(a){a.vd(!0);return a});function W(a,b){V.call(this,a,new oe(a.l(rc)));this.Le=this.xd=!1;this.a.f=b;ci(this);di(this)}t(W,V);r("lf.query.SelectBuilder",W);W.prototype.gb=function(){W.eb.gb.call(this);var a=this.a;if(null==a.c)throw new E(522);if(q(a.Tb)&&!q(a.W)||q(a.ac)&&!q(a.L))throw new E(523);null!=this.a.ja?ei(this):fi(this)};function ci(a){var b=a.a.f.filter(function(a){return a instanceof T&&"DISTINCT"==a.Nb},a);if(0!=b.length&&(1!=b.length||1!=a.a.f.length))throw new E(524);}
function ei(a){var b=a.a.f.filter(function(a){return!(a instanceof T)}).map(function(a){return a.m()}),c=!1;if(0==a.a.ja.length||0==a.a.f.length)c=!0;else{var d=a.a.ja.map(function(a){return a.m()});(c=b.some(function(a){return-1==d.indexOf(a)}))||(c=a.a.ja.some(function(a){a=a.H();return 6==a||0==a}))}if(c)throw new E(525);}function fi(a){var b=a.a.f.some(function(a){return a instanceof T},a);a=a.a.f.some(function(a){return!(a instanceof T)},a)||0==a.a.f.length;if(b&&a)throw new E(526);}
function di(a){a.a.f.forEach(function(a){if(a instanceof T&&!gi(a.Nb,a.H()))throw new E(527,a.m());},a)}function hi(a,b){if(null==a.a.c)throw new E(b);}W.prototype.c=function(a){if(this.Le)throw new E(515);this.Le=!0;null==this.a.c&&(this.a.c=[]);this.a.c.push.apply(this.a.c,Array.prototype.slice.call(arguments));return this};W.prototype.from=W.prototype.c;W.prototype.A=function(a){hi(this,548);if(this.xd)throw new E(516);this.xd=!0;ii(this,a);return this};W.prototype.where=W.prototype.A;
function ii(a,b){if(null!=a.a.A){var c=ai(b,a.a.A);a.a.A=c}else a.a.A=b}W.prototype.cg=function(a,b){hi(this,542);if(this.xd)throw new E(547);this.a.c.push(a);ii(this,b);return this};W.prototype.innerJoin=W.prototype.cg;W.prototype.hg=function(a,b){hi(this,542);if(!(b instanceof Gg))throw new E(541);if(this.xd)throw new E(547);this.a.c.push(a);null==this.a.Eb&&(this.a.Eb=C());var c=b;K(a)!=K(b.ka.I())&&(c=b.reverse());this.a.Eb.add(c.Z());ii(this,c);return this};W.prototype.leftOuterJoin=W.prototype.hg;
W.prototype.W=function(a){if(null!=(this.a.W||this.a.Tb))throw new E(528);if(a instanceof Ld)this.a.Tb=a;else{if(0>a)throw new E(531);this.a.W=a}return this};W.prototype.limit=W.prototype.W;W.prototype.L=function(a){if(null!=(this.a.L||this.a.ac))throw new E(529);if(a instanceof Ld)this.a.ac=a;else{if(0>a)throw new E(531);this.a.L=a}return this};W.prototype.skip=W.prototype.L;W.prototype.O=function(a,b){hi(this,549);null==this.a.O&&(this.a.O=[]);this.a.O.push({N:a,ob:null!=b?b:1});return this};
W.prototype.orderBy=W.prototype.O;W.prototype.ja=function(a){hi(this,549);if(null!=this.a.ja)throw new E(530);null==this.a.ja&&(this.a.ja=[]);this.a.ja.push.apply(this.a.ja,Array.prototype.slice.call(arguments));return this};W.prototype.groupBy=W.prototype.ja;function gi(a,b){switch(a){case "COUNT":case "DISTINCT":return!0;case "AVG":case "GEOMEAN":case "STDDEV":case "SUM":return 4==b||3==b;case "MAX":case "MIN":return 4==b||3==b||5==b||2==b}return!1}
W.prototype.clone=function(){var a=new W(this.global,this.a.f);a.a=this.a.clone();a.a.Xc=null;return a};W.prototype.clone=W.prototype.clone;function ji(a,b){V.call(this,a,new Ih(a.l(rc)));this.a.table=b}t(ji,V);r("lf.query.UpdateBuilder",ji);ji.prototype.set=function(a,b){var c={Uc:b instanceof Ld?b.Aa():-1,N:a,value:b};null!=this.a.set?this.a.set.push(c):this.a.set=[c];return this};ji.prototype.set=ji.prototype.set;ji.prototype.A=function(a){this.Cd();this.a.A=a;return this};ji.prototype.where=ji.prototype.A;ji.prototype.Cd=function(){if(null!=this.a.A)throw new E(516);};
ji.prototype.gb=function(){ji.eb.gb.call(this);if(null==this.a.set)throw new E(532);if(this.a.set.some(function(a){return a.value instanceof Ld}))throw new E(501);};function ki(a){this.a=a;this.Ea=null}ki.prototype.jc=function(){null===this.Ea&&(this.Ea=this.ad());return this.Ea};function li(a){ki.call(this,a)}t(li,ki);li.prototype.ad=function(){return this.a.cc?new ih(this.a.Ia,this.a.values):new hh(this.a.Ia,this.a.values)};function mi(a){ki.call(this,a)}t(mi,ki);mi.prototype.ad=function(){var a=new kh(this.a.table,this.a.set),b=null!=this.a.A?new lh(this.a.A.Ob()):null,c=new mh(this.a.table);null===b?Zd(a,c):(Zd(b,c),Zd(a,b));return a};function ni(a,b,c){this.Ea=a;this.he=b;this.Xb=c}ni.prototype.jc=function(){this.Xb.forEach(function(a){this.Ea=a.rb(this.Ea,this.he)},this);return this.Ea};function oi(a,b){ki.call(this,a);this.Xb=b}t(oi,ki);oi.prototype.ad=function(){var a=new jh(this.a.c),b=null!=this.a.A?new lh(this.a.A.Ob()):null,c=new mh(this.a.c);null===b?Zd(a,c):(Zd(b,c),Zd(a,b));return(new ni(a,this.a,this.Xb)).jc()};function pi(){}t(pi,vh);pi.prototype.rb=function(a,b){if(2>b.c.length)return a;this.$=a;this.Xa(this.$,b);return this.$};pi.prototype.Xa=function(a,b){if(a instanceof lh&&a.J instanceof Gg){var c=a.J.Z(),d=Xd(a,0);d instanceof nh&&(c=null!=b.Eb&&b.Eb.has(c),c=new uh(a.J,c),Cg(a,d,c,c),a==this.$&&(this.$=c),a=c)}M(a).forEach(function(a){this.Xa(a,b)},this)};function qi(){this.Tc=C()}t(qi,vh);qi.prototype.rb=function(a,b){this.Tc.clear();if(!q(b.A))return a;this.$=a;this.Xa(this.$);this.Tc.clear();return this.$};qi.prototype.Xa=function(a){if(ri(a)){var b=a.J instanceof ee?si(this,a):ti(this,a);this.Tc.add(a);b==a&&(b=Xd(a,0));null!==b&&(fa(b.getParent())&&(this.$=b),ri(b)&&!this.Tc.has(b)&&this.Xa(b))}else M(a).forEach(function(a){this.Xa(a)},this)};
function ui(a,b,c){var d=b;if(Xd(b,0)instanceof lh)d=Ag(b),ui(a,b,c);else if(vi(b)){var e=[],d=Bg(b,c,function(a){a=new lh(a.J);e.push(a);return a});e.forEach(function(a){ui(this,a,c)},a)}return d}function si(a,b){var c=C([K(b.J.N.I())]),d=function(a){return wi(this,a,c)}.bind(a);return ui(a,b,d)}function ti(a,b){var c=C([K(b.J.ha.I()),K(b.J.ka.I())]),d=function(a){return wi(this,a,c)}.bind(a);return ui(a,b,d)}
function wi(a,b,c){var d=C();wg(b).forEach(function(a){d.add(K(a.table))},a);b instanceof mh&&d.add(K(b.table));return xc(d,c)}function ri(a){return a instanceof lh&&!(a.J instanceof Eg)}function vi(a){a=Xd(a,0);return a instanceof nh||a instanceof uh};function xi(a,b){ki.call(this,a);this.Xb=b;this.kf=this.af=this.sf=this.df=this.Ce=this.Qe=this.rf=this.Ie=this.uf=null}t(xi,ki);
xi.prototype.ad=function(){yi(this);2<=this.a.c.length&&(this.Ie=new nh);this.rf=null!=this.a.A?new lh(this.a.A.Ob()):null;this.a.O&&(this.df=new ph(this.a.O));null!=this.a.L&&0<this.a.L&&(this.sf=new th(this.a.L));null!=this.a.W&&(this.af=new sh(this.a.W));null!=this.a.ja&&(this.Qe=new rh(this.a.ja));zi(this);this.kf=new oh(this.a.f||[],this.a.ja||null);var a=Ai(this);return(new ni(a,this.a,this.Xb)).jc()};
function Ai(a){for(var b=[a.af,a.sf,a.kf,a.df,a.Ce,a.Qe,a.rf,a.Ie],c=null,d=null,e=0;e<b.length;e++){var f=b[e];null!==f&&(null===d?d=f:Zd(b[c],f),c=e)}a.uf.forEach(function(a){Zd(b[c],a)});return d}function yi(a){a.uf=a.a.c.map(function(a){return new mh(a)},a)}function zi(a){var b=a.a.f.filter(function(a){return a instanceof T});null!=a.a.O&&a.a.O.forEach(function(a){a.N instanceof T&&b.push(a.N)});0<b.length&&(a.Ce=new qh(b))};function Bi(){this.oe=[new wh,new zh,new qi,new pi];this.Md=[new wh]}Bi.prototype.create=function(a){var b=null;if(a instanceof Gh)b=new li(a);else if(a instanceof Dh)b=new oi(a,this.Md);else if(a instanceof oe)b=new xi(a,this.oe);else if(a instanceof Ih)b=new mi(a);else throw new E(513);b=b.jc();return new fh(b,a.ca())};function Ci(a){U.call(this,0,1);this.U=a}t(Ci,U);Ci.prototype.toString=function(){return"delete("+this.U.getName()+")"};Ci.prototype.fa=function(a,b){var c=a[0].entries.map(function(a){return a.va});b.remove(this.U,c);return[Dd()]};function Di(a,b){U.call(this,0,-1);this.table=b;this.F=a.l(nc)}t(Di,U);Di.prototype.toString=function(){return"get_row_count("+this.table.getName()+")"};Di.prototype.fa=function(){var a=this.F.get(bf(this.table)),b=new H([],[this.table.getName()]),c=Rg(),a=a.La().la;null===b.Za&&(b.Za=z());b.Za.set(c.m(),a);return[b]};function Ei(a,b){U.call(this,0,-1);this.V=a.l(mc);this.F=a.l(nc);this.table=b}t(Ei,U);Ei.prototype.toString=function(){var a="table_access("+this.table.getName();null===this.table.$a()||(a+=" as "+this.table.$a());return a+")"};Ei.prototype.fa=function(){var a=this.F.get(bf(this.table)).ab();return[Gd(uf(this.V,a),[K(this.table)])]};function Fi(a){this.i=a}t(Fi,vh);Fi.prototype.rb=function(a,b){this.$=a;if(!this.Ed(b))return a;var c=xg(a,function(a){return a instanceof Ei})[0],d=new Di(this.i,c.table);Cg(c,c,d,d);return this.$};Fi.prototype.Ed=function(a){return 1==a.f.length&&1==a.c.length&&null==a.A&&null==a.W&&null==a.L&&null==a.ja?(a=a.f[0],a instanceof T&&"COUNT"==a.Nb&&a.child instanceof Qg):!1};function Gi(a){U.call(this,0,1);this.Pe=a}t(Gi,U);Gi.prototype.toString=function(){return"groupBy("+this.Pe.map(function(a){return a.m()}).toString()+")"};Gi.prototype.fa=function(a){return Hi(this,a[0])};function Hi(a,b){var c=new Sc,d=function(a){return this.Pe.map(function(b){return J(a,b)},this).join(",")}.bind(a);b.entries.forEach(function(a){c.set(d(a),a)},a);return c.keys().map(function(a){return new H(c.get(a),I(b))},a)};function Ii(a,b,c){U.call(this,0,0);this.F=a.l(nc);this.V=a.l(mc);this.J=b;this.Sb=c;this.Ad="eq"==this.J.D?0:2;this.Se=null}t(Ii,U);var Ji=["hash","index_nested_loop","nested_loop"];Ii.prototype.toString=function(){return"join(type: "+(this.Sb?"outer":"inner")+", impl: "+Ji[this.Ad]+", "+this.J.toString()+")"};
Ii.prototype.fa=function(a){switch(this.Ad){case 0:return[Kg(this.J,a[0],a[1],this.Sb)];case 1:return[Lg(this.J,a[0],a[1],this.Se,this.V)];default:var b=this.J,c=a[0];a=a[1];var d=this.Sb,e=[c,a];d||(e=Hg(b,c,a));c=e[0];a=e[1];for(var e=[],f=I(c),h=I(a),k=c.entries.length,n=a.entries.length,B=n+256-1>>8,O=0;O<B;){for(var da=0;da<k;da++){var Ab=!1,Wf=J(c.entries[da],b.ha);if(null!==Wf)for(var bc=Math.min(O+1<<8,n),Bb=O<<8;Bb<bc;Bb++)if(b.wc(Wf,J(a.entries[Bb],b.ka))){var Ab=!0,Wc=Kd(c.entries[da],
f,a.entries[Bb],h);e.push(Wc)}d&&!Ab&&e.push(Jg(b,c.entries[da],f))}O++}b=I(c).concat(I(a));return[new H(e,b)]}};function Ki(a,b){a.Ad=1;var c=a.F.get(b.Aa().m());a.Se={Zf:b,pg:b==a.J.ha?a.J.ka:a.J.ha,index:c}};function Li(a){U.call(this,0,-1);this.lf=a}t(Li,U);Li.prototype.toString=function(){return"no_op_step("+I(this.lf[0]).join(",")+")"};Li.prototype.fa=g("lf");function Mi(){}t(Mi,vh);Mi.prototype.rb=function(a,b){this.$=a;if(!this.Ed(b))return a;xg(a,function(a){return a instanceof Ii}).forEach(this.zg,this);return this.$};Mi.prototype.Ed=function(a){return 1<a.c.length};
Mi.prototype.zg=function(a){if("eq"==a.J.D&&!a.Sb){var b=function(b){if(!(b instanceof Ei))return null;b=K(b.table)==K(a.J.ka.I())?a.J.ka:a.J.ha;return fa(b.Aa())?null:b},c=b(Xd(a,0)),b=b(Xd(a,1));if(null!==c||null!==b){b=null===b?c:b;Ki(a,b);var d=new H([],[K(b.I())]);ae(a,new Li([d]),b==c?0:1)}}};function Ni(a){a=a.map(function(a){return a.ta()});a=zb.apply(null,a);var b=[];yb(a,function(a){b.push(a)});return b}function Oi(a){this.Rb=a}Oi.prototype.bd=function(){return 1==this.Rb.f.length?[td()]:[this.Rb.f.map(function(){return td()})]};function Pi(a,b){this.Rb=a;this.Da=b;this.Id=this.Ze=null}function Qi(a,b){var c=z();a.Da.keys().forEach(function(a){var e=this.Da.get(a).map(function(a){return ke(b,a)},this),f=new xd([td()]);e.forEach(function(a){f=yd(f,he(a))});c.set(a,f)},a);return c}
Pi.prototype.bd=function(a){if(this.Ze==a)return this.Id;for(var b=Qi(this,a),c=this.Rb.f.length-1;0<=c;c--){var d=this.Rb.f[c];if(null!==(b.get(d.ba.getName())||null))break;b.set(d.ba.getName(),new xd([td()]))}this.Id=1==this.Rb.f.length?A(b)[0].ta():Ni(Ri(this,b));this.Ze=a;return this.Id};function Ri(a,b){var c=z(),d=0;a.Rb.f.forEach(function(a){c.set(a.ba.getName(),d);d++});return Wb(b).sort(function(a,b){return c.get(a)-c.get(b)}).map(function(a){return b.get(a)})};function Si(a,b){this.se=b;this.F=a.l(nc)}function Ti(a,b,c){c=c.filter(a.dg,a);if(0==c.length)return null;a=Ui(a,c);if(0==a.length)return null;if(1==a.length)return a[0];var d=Number.MAX_VALUE;return a.reduce(function(a,c){var h=Vi(c,b);return h<d?(d=h,c):a},null)}
function Ui(a,b){return a.se.Ba().map(function(a){a=new Wi(this.F,a);Xi(a,b);return a},a).filter(function(a){if(null===a.Da)a=!1;else{for(var b=!1,e=!0,f=0;f<a.Bb.f.length;f++){var h=a.Da.has(a.Bb.f[f].ba.getName());if(b&&h){e=!1;break}h||(b=!0)}a=e}return a})}
Si.prototype.dg=function(a){var b;if(b=a instanceof ee)fe(a),b=null!==a.value&&("between"==a.D||"in"==a.D||"eq"==a.D||"gt"==a.D||"gte"==a.D||"lt"==a.D||"lte"==a.D);!(b=!b||a.N.I()!=this.se)&&(b="in"==a.D)&&(a=a.value.length,b=this.F.get(bf(this.se)),b=Math.floor(.02*b.La().la),b=a>b);return b?!1:!0};function Wi(a,b){this.F=a;this.Bb=b;this.$f=C(this.Bb.f.map(function(a){return a.ba.getName()}));this.Yd=this.Da=null}function Yi(a){null===a.Yd&&(a.Yd=new Pi(a.Bb,a.Da));return a.Yd}
function Xi(a,b){b.forEach(function(a){var b=a.jb()[0].getName();this.$f.has(b)&&(null===this.Da&&(this.Da=new Sc),this.Da.set(b,a.Z()))},a)}function Vi(a,b){var c=Yi(a).bd(b),d=a.F.get(a.Bb.m());return c.reduce(function(a,b){return a+d.Zc(b)},0)};function Zi(a,b,c,d){U.call(this,0,-1);this.F=a.l(nc);this.index=b;this.Ye=c;this.le=d;this.Sc=this.Rc=!1}t(Zi,U);Zi.prototype.toString=function(){return"index_range_scan("+this.index.m()+", ?, "+(this.le?"reverse":"natural")+(this.Rc?", limit:?":"")+(this.Sc?", skip:?":"")+")"};Zi.prototype.Pc=function(a){var b=this.toString(),c=this.Ye.bd(a),b=b.replace("?",c.toString());this.Rc&&(b=b.replace("?",a.W.toString()));this.Sc&&(b=b.replace("?",a.L.toString()));return b};
Zi.prototype.fa=function(a,b,c){a=this.Ye.bd(c);b=this.F.get(this.index.m());c=(1==a.length&&a[0]instanceof F&&ud(a[0])?yf(b.get(a[0].c),!1,this.Rc?c.W:void 0,this.Sc?c.L:void 0):b.ab(a,this.le,this.Rc?c.W:void 0,this.Sc?c.L:void 0)).map(function(a){return new Xb(a,{})},this);return[Gd(c,[this.index.Oc])]};function $i(a){U.call(this,0,1);this.rd=a}t($i,U);$i.prototype.toString=l("select(?)");$i.prototype.Pc=function(a){a=ke(a,this.rd);return this.toString().replace("?",a.toString())};$i.prototype.fa=function(a,b,c){return[ke(c,this.rd).eval(a[0])]};function aj(a,b){U.call(this,0,1);this.V=a.l(mc);this.U=b}t(aj,U);aj.prototype.toString=function(){return"table_access_by_row_id("+this.U.getName()+")"};aj.prototype.fa=function(a){return[Gd(uf(this.V,Ad(a[0])),[K(this.U)])]};function bj(a){this.i=a}t(bj,vh);bj.prototype.rb=function(a,b){this.$=a;xg(a,function(a){return a instanceof Ei}).forEach(function(a){var d=cj(a);if(0!=d.length){var e=Ti(new Si(this.i,a.table),b,d.map(function(a){return ke(b,a.rd)}));if(null!==e){var f=z();d.forEach(function(a){f.set(a.rd,a)},this);this.$=dj(this,e,f,a)}}},this);return this.$};function cj(a){var b=[];for(a=a.getParent();a;)a instanceof $i&&b.push(a),a=a.getParent();return b}
function dj(a,b,c,d){(null===b.Da?[]:b.Da.values()).map(function(a){return c.get(a)}).forEach(yg);b=new Zi(a.i,b.Bb,Yi(b),!1);a=new aj(a.i,d.table);Zd(a,b);Cg(d,d,a,b);return b.kb()};function ej(a,b){U.call(this,0,-1);this.F=a.l(nc);this.U=b}t(ej,U);ej.prototype.toString=function(){return"insert("+this.U.getName()+")"};ej.prototype.fa=function(a,b,c){fj(this.U,c.values,this.F);b.Cb(this.U,c.values);return[Gd(c.values,[this.U.getName()])]};function fj(a,b,c){a=a.Jb().cd();if(null===a?0:a.f[0].autoIncrement){var d=a.f[0].ba.getName();c=c.get(a.m()).max();var e=null===c?0:c[0];b.forEach(function(a){if(0==a.s[d]||null==a.s[d])e++,a.s[d]=e})}}
function gj(a,b){U.call(this,0,-1);this.F=a.l(nc);this.U=b}t(gj,U);gj.prototype.toString=function(){return"insert_replace("+this.U.getName()+")"};gj.prototype.fa=function(a,b,c){fj(this.U,c.values,this.F);b.Td(this.U,c.values);return[Gd(c.values,[this.U.getName()])]};function hj(){U.call(this,0,1)}t(hj,U);hj.prototype.toString=l("limit(?)");hj.prototype.Pc=function(a){return this.toString().replace("?",a.W.toString())};hj.prototype.fa=function(a,b,c){a[0].entries.splice(c.W);return a};function ij(a){U.call(this,0,1);this.O=a}t(ij,U);m=ij.prototype;m.toString=function(){return"order_by("+qe(this.O)+")"};m.fa=function(a){if(1==a.length){var b;b=a[0];for(var c=null,d=0;d<this.O.length;d++){var e=Sg(this.O[d].N);if(null!==b.Za&&b.Za.has(e.m())){c=e;break}}b=c;(null===b?a[0]:Bd(a[0],b)).entries.sort(this.Pf.bind(this))}else a.sort(this.Cg.bind(this));return a};
m.Y=function(a,b){var c=null,d=null,e=null,f=-1;do f++,e=this.O[f].N,c=this.O[f].ob,d=a(e),e=b(e);while(d==e&&f+1<this.O.length);d=d<e?-1:d>e?1:0;return 1==c?d:-d};m.Cg=function(a,b){return this.Y(function(b){return b instanceof T?Bd(a,b):J(a.entries[a.entries.length-1],b)},function(a){return a instanceof T?Bd(b,a):J(b.entries[b.entries.length-1],a)})};m.Pf=function(a,b){return this.Y(function(b){return J(a,b)},function(a){return J(b,a)})};function jj(a,b){this.Ka=a;this.K=b}function kj(a){return a.K.some(function(a){return a instanceof T},a)?lj(a):mj(a)}function lj(a){if(1==a.K.length&&"DISTINCT"==a.K[0].Nb)return a=Bd(a.Ka,a.K[0]).entries.map(function(a){var b=new Hd(new Xb(-1,{}),1<this.Ka.M.size);Jd(b,this.K[0],J(a,this.K[0].child));return b},a),new H(a,[]);var b=new Hd(new Xb(-1,{}),1<a.Ka.M.size);a.K.forEach(function(a){var d=a instanceof T?Bd(this.Ka,a):J(this.Ka.entries[0],a);Jd(b,a,d)},a);return new H([b],I(a.Ka))}
function mj(a){var b=Array(a.Ka.entries.length),c=1<a.Ka.M.size;a.Ka.entries.forEach(function(a,e){b[e]=new Hd(new Xb(a.va.id(),{}),c);this.K.forEach(function(c){Jd(b[e],c,J(a,c))},this)},a);return new H(b,I(a.Ka))}function nj(a,b){var c=a.map(function(a){return kj(new jj(a,b)).entries[0]});return new H(c,I(a[0]))};function oj(a,b){U.call(this,0,1);this.f=a;this.Qb=b}t(oj,U);oj.prototype.toString=function(){var a="project("+this.f.toString();if(null!==this.Qb)var b=this.Qb.map(function(a){return a.m()}).join(", "),a=a+(", groupBy("+b+")");return a+")"};oj.prototype.fa=function(a){0==a.length?a=[Dd()]:1==a.length?(a=a[0],a=[0==this.f.length?a:kj(new jj(a,this.f))]):a=[nj(a,this.f)];return a};function pj(a){return a.f.some(function(a){return a instanceof T})||null!==a.Qb};function qj(){U.call(this,0,1)}t(qj,U);qj.prototype.toString=l("skip(?)");qj.prototype.Pc=function(a){return this.toString().replace("?",a.L.toString())};qj.prototype.fa=function(a,b,c){return[new H(a[0].entries.slice(c.L),I(a[0]))]};function rj(){}t(rj,vh);rj.prototype.rb=function(a,b){if(!q(b.W)&&!q(b.L))return a;var c=sj(a);if(null===c)return a;xg(a,function(a){return a instanceof hj||a instanceof qj}).forEach(function(a){a instanceof hj?c.Rc=!0:c.Sc=!0;yg(a)},this);return c.kb()};function sj(a){a=xg(a,function(a){return a instanceof Zi},function(a){return a instanceof oj&&pj(a)||a instanceof ij||1!=M(a).length||a instanceof $i});return 0<a.length?a[0]:null};function tj(a){this.i=a}t(tj,vh);tj.prototype.rb=function(a,b){var c=uj(a,b);if(null===c)return a;var d;a:{var e=c;d=vj(Xd(c,0));if(null!==d){var f;f=c.O;for(var h=null,k=d.table.Ba(),n=0;n<k.length&&null===h;n++)h=wj(k[n],f);f=h;if(null===f){d=e;break a}e=new Zi(this.i,f.Bb,new Oi(f.Bb),f.Ve);f=new aj(this.i,d.table);Zd(f,e);yg(c);e=Cg(d,d,f,e)}d=e}if(d==c)a:if(d=c,e=xj(Xd(c,0)),null!==e){f=wj(e.index,c.O);if(null===f)break a;e.le=f.Ve;d=yg(c).parent}return d.kb()};
function xj(a){a=xg(a,function(a){return a instanceof Zi},function(a){return 1!=M(a).length});return 0<a.length?a[0]:null}function vj(a){a=xg(a,function(a){return a instanceof Ei},function(a){return 1!=M(a).length});return 0<a.length?a[0]:null}function uj(a,b){return q(b.O)?xg(a,function(a){return a instanceof ij})[0]:null}function wj(a,b){if(a.f.length!=b.length||!b.every(function(b,c){return b.N.getName()==a.f[c].ba.getName()}))return null;var c=yj(b,a);return c[0]||c[1]?{Bb:a,Ve:c[1]}:null}
function yj(a,b){var c=a.reduce(function(a,b){return a<<1|(0==b.ob?0:1)},0),d=b.f.reduce(function(a,b){return a<<1|(0==b.ob?0:1)},0),c=c^d;return[0==c,c==Math.pow(2,Math.max(a.length,b.f.length))-1]};function zj(a,b,c){this.Ea=a;this.he=b;this.Xb=c}zj.prototype.jc=function(){this.Xb.forEach(function(a){this.Ea=a.rb(this.Ea,this.he)},this);return this.Ea};function Aj(a,b){U.call(this,0,1);this.U=a;this.Kg=b}t(Aj,U);Aj.prototype.toString=function(){return"update("+this.U.getName()+")"};Aj.prototype.fa=function(a,b){var c=a[0].entries.map(function(a){var b=this.U.ib(a.va.Ga());this.Kg.forEach(function(a){b.s[a.N.getName()]=a.value},this);return b},this);b.update(this.U,c);return[Dd()]};function Bj(a){this.i=a;this.oe=[new Mi,new bj(this.i),new tj(this.i),new rj,new Fi(this.i)];this.Md=[new bj(this.i)]}Bj.prototype.create=function(a,b){var c=a.kb();if(c instanceof ih||c instanceof hh)return Cj(this,a,b);if(c instanceof oh||c instanceof sh||c instanceof th)return Cj(this,a,b,this.oe);if(c instanceof jh||c instanceof kh)return Cj(this,a,b,this.Md);throw new E(8);};function Cj(a,b,c,d){a=vg(b.kb(),a.mg.bind(a));null!=d&&(a=(new zj(a,c,d)).jc());return new re(a,b.ca())}
Bj.prototype.mg=function(a){if(a instanceof oh)return new oj(a.f,a.Qb);if(a instanceof rh)return new Gi(a.f);if(a instanceof qh)return new Wg(a.f);if(a instanceof ph)return new ij(a.O);if(a instanceof th)return new qj;if(a instanceof sh)return new hj;if(a instanceof lh)return new $i(a.J.Z());if(a instanceof nh)return new Ah;if(a instanceof uh)return new Ii(this.i,a.J,a.Sb);if(a instanceof mh)return new Ei(this.i,a.table);if(a instanceof jh)return new Ci(a.table);if(a instanceof kh)return new Aj(a.table,
a.we);if(a instanceof ih)return new gj(this.i,a.table);if(a instanceof hh)return new ej(this.i,a.table);throw new E(514);};function Dj(a){this.jg=new Bi;this.xg=new Bj(a)};function Ej(){this.bf=z()}function Fj(a,b){var c=a.bf.get(b.getName())||null;null===c&&(c=new Gj,a.bf.set(b.getName(),c));return c}function Hj(a,b,c,d){c.forEach(function(a){a=Fj(this,a);0==d?(a.bb=null,a.xc=b):3==d?(null===a.$b&&(a.$b=C()),a.$b.add(b),null===a.Ua&&(a.Ua=C()),a.Ua.delete(b)):1==d?(null===a.Ua&&(a.Ua=C()),a.Ua.add(b)):2==d&&(a.bb=b)},a)}
function Ij(a,b,c,d){var e=!0;c.forEach(function(a){if(e){a=Fj(this,a);var c=null===a.Ua||0==a.Ua.size;e=0==d?(null===a.$b||0==a.$b.size)&&c&&null===a.xc&&null!==a.bb&&a.bb==b:3==d?null===a.xc&&null===a.bb&&null!==a.Ua&&a.Ua.has(b):1==d?null===a.bb:c&&(null===a.bb||a.bb==b)}},a);return e}function Jj(a,b,c,d){var e=Ij(a,b,c,d);e&&Hj(a,b,c,d);return e}Ej.prototype.releaseLock=function(a,b){b.forEach(function(b){Fj(this,b).releaseLock(a)},this)};
function Kj(a,b){b.forEach(function(a){Fj(this,a).bb=null},a)}function Gj(){this.$b=this.Ua=this.bb=this.xc=null}Gj.prototype.releaseLock=function(a){this.xc==a&&(this.xc=null);this.bb==a&&(this.bb=null);null===this.Ua||this.Ua.delete(a);null===this.$b||this.$b.delete(a)};function Lj(){this.Wb=new Mj;this.Fc=new Ej}function ze(a,b){(2>b.getPriority()||2>b.getPriority())&&Kj(a.Fc,b.ca());a.Wb.Cb(b);Nj(a);return b.Pb().da}function Nj(a){for(var b=a.Wb.ta(),c=0;c<b.length;c++){var d=b[c],e=!1;if(e=0==d.H()?Oj(a,d,1,3):Oj(a,d,2,0))a.Wb.remove(d),e=a,d.exec().then(e.ug.bind(e,d),e.tg.bind(e,d))}}function Oj(a,b,c,d){var e=!1;Jj(a.Fc,b.Z(),b.ca(),c)&&(e=Jj(a.Fc,b.Z(),b.ca(),d));return e}Lj.prototype.ug=function(a,b){this.Fc.releaseLock(a.Z(),a.ca());a.Pb().resolve(b);Nj(this)};
Lj.prototype.tg=function(a,b){this.Fc.releaseLock(a.Z(),a.ca());a.Pb().reject(b);Nj(this)};function Mj(){this.Wb=[]}Mj.prototype.Cb=function(a){xf(this.Wb,a,function(a,c){var d=a.getPriority()-c.getPriority();return 0==d?a.Z()-c.Z():d})};Mj.prototype.ta=function(){return this.Wb.slice()};Mj.prototype.remove=function(a){var b=this.Wb;a=ya(b,a);var c;(c=0<=a)&&xa.splice.call(b,a,1);return c};function Pj(a,b){this.Nd=Td();this.ie=a;this.nd=b;this.K=Qj(this)}function Qj(a){if(0<a.ie.f.length)return a.ie.f;var b=[];a.ie.c.forEach(function(a){a.jb().forEach(function(a){b.push(a)})});return b}Pj.prototype.Y=function(a,b){return this.K.every(function(c){return Ud(this.Nd,c.H(),"eq")(J(a,c),J(b,c))},this)};
function Rj(a,b,c){var d=null===b?[]:b.entries,e=qb(d,c.entries,a.Y.bind(a),function(a){return d[a]});b=[];for(var f=0,h=0;h<d.length;h++){var k=d[h];e[f]==k?f++:(k=a.nd.splice(f,1),k=Sj(h,k,0,a.nd),b.push(k))}e=qb(d,c.entries,a.Y.bind(a),function(a,b){return c.entries[b]});for(h=f=0;h<c.entries.length;h++)k=c.entries[h],e[f]==k?f++:(a.nd.splice(h,0,k.va.s),k=Sj(h,[],1,a.nd),b.push(k));return b}function Sj(a,b,c,d){return{Mg:c,index:a,object:d,Og:b,type:"splice"}};function Tj(){this.hc=z()}Tj.prototype.zd=function(a,b){var c=ka(a.a).toString(),d=this.hc.get(c)||null;null===d&&(d=new Uj(a),this.hc.set(c,d));d.zd(b)};Tj.prototype.je=function(a,b){var c=ka(a.a).toString(),d=this.hc.get(c)||null;d.je(b);0<d.Hc.size||this.hc.delete(c)};function ye(a,b){var c=C();b.forEach(function(a){c.add(a.getName())});var d=[];a.hc.forEach(function(a){a=a.Cc();a.context.c.some(function(a){return c.has(a.getName())})&&d.push(a)});return d}
function we(a,b,c){b=ka(null!=b.Xc?b.Xc:b).toString();a=a.hc.get(b)||null;null!==a&&Vj(a,c)}function Uj(a){this.Gf=a;this.Hc=C();this.rg=[];this.$e=null;this.Nf=new Pj(a.a,this.rg)}Uj.prototype.zd=function(a){this.Hc.has(a)||this.Hc.add(a)};Uj.prototype.je=function(a){return this.Hc.delete(a)};Uj.prototype.Cc=function(){var a=this.Gf;return{context:a.a,ge:Yh(a)}};function Vj(a,b){var c=Rj(a.Nf,a.$e,b);a.$e=b;0<c.length&&a.Hc.forEach(function(a){a(c)})};function Wj(a,b){var c=a.l(rc),d=b||{},e=new tf(c);a.qb(mc,e);var e=null,f=!1;null!=d.storeType?e=d.storeType:(e=Ub(),e=e.ag?0:e.Lg?4:1);switch(e){case 0:e=new Ye(a,c);break;case 1:e=new ef(c);break;case 5:e=new gf(c);break;case 4:e=new qf(a,c,d.webSqlDbSize);break;case 3:e=new Le(c,d.firebase);f=!0;break;default:throw new E(300);}a.qb(lc,e);var h=new ug;a.qb(nc,h);return e.Ha(d.onUpgrade).then(function(){var b=new Dj(a);a.qb(oc,b);b=new Lj;a.qb(pc,b);b=new Tj;a.qb(qc,b);return h.Ha(c)}).then(function(){if(f){var b=
new Ae(a);b.Ma.subscribe(b.be.bind(b))}return(new ng(a)).Ha(c)})};function Xj(a){this.i=a;this.g=a.l(rc);this.aa=C(this.g.sa());this.cb=x()}m=Xj.prototype;m.exec=function(){var a=this.i.l(nc),b=this.i.l(mc),c={};this.g.sa().forEach(function(d){var f=a.get(bf(d)).ab(),f=uf(b,f).map(function(a){return a.s});c[d.getName()]=f});var d={name:this.g.name(),version:this.g.version(),tables:c},d=new Hd(new Xb(-1,d),!0);return w([new H([d],[])])};m.H=l(0);m.ca=g("aa");m.Pb=g("cb");m.Z=function(){return ka(this)};m.getPriority=l(0);function Yj(a,b){this.i=a;this.g=a.l(rc);this.aa=C(this.g.sa());this.cb=x();this.ya=b;this.Ma=a.l(lc);this.V=a.l(mc);this.F=a.l(nc)}m=Yj.prototype;
m.exec=function(){if(!(this.Ma instanceof Ye||this.Ma instanceof ef||this.Ma instanceof qf))throw new E(300);var a;a:{a=this.g.sa();for(var b=0;b<a.length;++b)if(0<this.F.get(bf(a[b])).La().la){a=!1;break a}a=!0}if(!a)throw new E(110);if(this.g.name()!=this.ya.name||this.g.version()!=this.ya.version)throw new E(111);if(null==this.ya.tables)throw new E(112);return Zj(this)};m.H=l(1);m.ca=g("aa");m.Pb=g("cb");m.Z=function(){return ka(this)};m.getPriority=l(0);
function Zj(a){var b=new kd(a.i,a.aa),b=a.Ma.Hb(a.H(),D(a.aa),b),c;for(c in a.ya.tables){var d=a.g.table(c),e=a.ya.tables[c].map(function(a){return d.yb(a)}),f=b.I(c,d.ib,0);a.V.Yb(c,e);var h=a.F.nc.get(c)||[];e.forEach(function(a){h.forEach(function(b){var c=a.mb(b.getName());b.add(c,a.id())})});f.put(e)}return b.ia()};function ak(a,b){this.i=a;this.Ma=a.l(lc);this.Fa=a.l(pc);this.Lb=a.l(qc);this.aa=C(b);this.Sa=new kd(this.i,this.aa);this.cb=x();this.yc=x();this.ye=x()}m=ak.prototype;m.exec=function(){this.ye.resolve();return this.yc.da};m.H=l(1);m.ca=g("aa");m.Pb=g("cb");m.Z=function(){return ka(this)};m.getPriority=l(2);function bk(a){ze(a.Fa,a);return a.ye.da}
function ck(a,b){var c=b.Cc();return c.ge.kb().exec(a.Sa,c.context).then(function(a){return zd(a[0])},function(a){this.Sa.Mb();var b=new kb(a.name);this.yc.reject(b);throw a;}.bind(a))}m.ia=function(){this.Ma.Hb(this.H(),D(this.aa),this.Sa).ia().then(function(){this.Mc();this.yc.resolve()}.bind(this),function(a){this.Sa.Mb();this.yc.reject(a)}.bind(this));return this.cb.da};m.Mb=function(){this.Sa.Mb();this.yc.resolve();return this.cb.da};
m.Mc=function(){var a=ye(this.Lb,this.aa);0!=a.length&&(a=new ve(this.i,a),ze(this.Fa,a))};function dk(a){this.i=a;this.Fa=a.l(pc);this.Qc=null;this.Va=0;0==ek.size&&(ek.set(0,C([1,4])),ek.set(1,C([2])),ek.set(2,C([3,5,6])),ek.set(3,C([2,7])),ek.set(4,C([7])),ek.set(5,C([7])),ek.set(6,C([7])))}r("lf.proc.Transaction",dk);var ek=z();function fk(a,b){var c=ek.get(a.Va)||null;if(null===c||!c.has(b))throw new E(107,a.Va,b);a.Va=b}
dk.prototype.exec=function(a){fk(this,4);var b=[];try{a.forEach(function(a){a.gb();b.push(a.Cc())},this)}catch(c){return fk(this,7),cb(c)}a=new Bh(this.i,b);return ze(this.Fa,a).then(function(a){fk(this,7);return a.map(function(a){return zd(a)})}.bind(this),function(a){fk(this,7);throw a;}.bind(this))};dk.prototype.exec=dk.prototype.exec;dk.prototype.Ef=function(a){fk(this,1);this.Qc=new ak(this.i,a);return bk(this.Qc).then(function(){fk(this,2)}.bind(this))};dk.prototype.begin=dk.prototype.Ef;
dk.prototype.Df=function(a){fk(this,3);return ck(this.Qc,a).then(function(a){fk(this,2);return a}.bind(this),function(a){fk(this,7);throw a;}.bind(this))};dk.prototype.attach=dk.prototype.Df;dk.prototype.ia=function(){fk(this,5);return this.Qc.ia().then(function(){fk(this,7)}.bind(this))};dk.prototype.commit=dk.prototype.ia;dk.prototype.Mb=function(){fk(this,6);return this.Qc.Mb().then(function(){fk(this,7)}.bind(this))};dk.prototype.rollback=dk.prototype.Mb;function X(a){this.i=a;this.g=a.l(rc);this.jd=!1}r("lf.proc.Database",X);X.prototype.Ha=function(a){this.i.qb(rc,this.g);return Wj(this.i,a).then(function(){this.jd=!0;this.Fa=this.i.l(pc);return this}.bind(this))};X.prototype.init=X.prototype.Ha;X.prototype.Ab=g("g");X.prototype.getSchema=X.prototype.Ab;function gk(a){if(!a.jd)throw new E(2);}X.prototype.select=function(a){gk(this);return new W(this.i,1!=arguments.length||null!=arguments[0]?Array.prototype.slice.call(arguments):[])};
X.prototype.select=X.prototype.select;X.prototype.Cb=function(){gk(this);return new $h(this.i)};X.prototype.insert=X.prototype.Cb;X.prototype.Td=function(){gk(this);return new $h(this.i,!0)};X.prototype.insertOrReplace=X.prototype.Td;X.prototype.update=function(a){gk(this);return new ji(this.i,a)};X.prototype.update=X.prototype.update;X.prototype.delete=function(){gk(this);return new Zh(this.i)};X.prototype["delete"]=X.prototype.delete;
X.prototype.observe=function(a,b){gk(this);this.i.l(qc).zd(a,b)};X.prototype.observe=X.prototype.observe;X.prototype.unobserve=function(a,b){gk(this);this.i.l(qc).je(a,b)};X.prototype.unobserve=X.prototype.unobserve;X.prototype.Lf=function(){gk(this);return new dk(this.i)};X.prototype.createTransaction=X.prototype.Lf;X.prototype.close=function(){try{this.i.l(lc).close()}catch(a){}this.i.clear();this.jd=!1};X.prototype.close=X.prototype.close;
X.prototype.Tf=function(){gk(this);var a=new Xj(this.i);return ze(this.Fa,a).then(function(a){return zd(a[0])[0]})};X.prototype["export"]=X.prototype.Tf;X.prototype.import=function(a){gk(this);a=new Yj(this.i,a);return ze(this.Fa,a).then(l(null))};X.prototype["import"]=X.prototype.import;function Y(a,b,c,d,e,f){this.U=a;this.B=b;this.We=c;this.Ue=d;this.wf=e;this.fb=f||null}r("lf.schema.BaseColumn",Y);m=Y.prototype;m.getName=g("B");m.m=function(){return K(this.U)+"."+this.B};m.toString=function(){return this.m()};m.I=g("U");m.H=g("wf");Y.prototype.getType=Y.prototype.H;Y.prototype.$a=g("fb");Y.prototype.Ba=function(){null==this.qa&&(this.qa=[],this.I().Ba().forEach(function(a){-1!=a.f.map(function(a){return a.ba.getName()}).indexOf(this.B)&&this.qa.push(a)},this));return this.qa};
Y.prototype.Aa=function(){if(!q(this.ga)){var a=this.Ba().filter(function(a){return 1!=a.f.length?!1:a.f[0].ba.getName()==this.getName()},this);this.ga=0<a.length?a[0]:null}return this.ga};Y.prototype.kc=g("Ue");Y.prototype.isNullable=Y.prototype.kc;Y.prototype.Ec=g("We");Y.prototype.Oa=function(a){return Mg(this,a,"eq")};Y.prototype.eq=Y.prototype.Oa;Y.prototype.cf=function(a){return Mg(this,a,"neq")};Y.prototype.neq=Y.prototype.cf;Y.prototype.kg=function(a){return Mg(this,a,"lt")};
Y.prototype.lt=Y.prototype.kg;Y.prototype.lg=function(a){return Mg(this,a,"lte")};Y.prototype.lte=Y.prototype.lg;Y.prototype.Wf=function(a){return Mg(this,a,"gt")};Y.prototype.gt=Y.prototype.Wf;Y.prototype.Xf=function(a){return Mg(this,a,"gte")};Y.prototype.gte=Y.prototype.Xf;Y.prototype.match=function(a){return Mg(this,a,"match")};Y.prototype.match=Y.prototype.match;Y.prototype.Ff=function(a,b){return Mg(this,[a,b],"between")};Y.prototype.between=Y.prototype.Ff;
Y.prototype.Yf=function(a){return Mg(this,a,"in")};Y.prototype["in"]=Y.prototype.Yf;Y.prototype.fg=function(){return this.Oa(null)};Y.prototype.isNull=Y.prototype.fg;Y.prototype.eg=function(){return this.cf(null)};Y.prototype.isNotNull=Y.prototype.eg;Y.prototype.sc=function(a){return new Y(this.U,this.B,this.We,this.Ue,this.wf,a)};Y.prototype.as=Y.prototype.sc;function hk(){this.ud=z()}var ik;hk.prototype.clear=function(){this.ud.clear()};hk.prototype.clear=hk.prototype.clear;hk.prototype.qb=function(a,b){this.ud.set(a.toString(),b);return b};hk.prototype.registerService=hk.prototype.qb;hk.prototype.l=function(a){var b=this.ud.get(a.toString())||null;if(null===b)throw new E(7,a.toString());return b};hk.prototype.getService=hk.prototype.l;hk.prototype.Wd=function(a){return this.ud.has(a.toString())};hk.prototype.isRegistered=hk.prototype.Wd;function jk(a){this.g=a;this.Fd=new Sc;this.ke=new Sc;this.ef=new Sc;this.He=z();this.h=new Sc;this.De=new Sc;this.mf=new Sc;this.Ge=new Sc;kk(this)}function kk(a){a.g.sa().forEach(function(a){var c=a.getName();a.Jb().Sd().forEach(function(d){this.ef.set(c,this.g.table(d.Ta));this.h.set(d.Ta,a);0==d.action?(this.ke.set(d.Ta,d),this.mf.set(d.Ta,a)):(this.Fd.set(d.Ta,d),this.De.set(d.Ta,a));this.He.set(a.getName()+"."+d.wb,d.Ta);this.Ge.set(d.Ta+"."+d.Jc,a.getName())},this)},a)}
function ad(a,b,c){if(null!=c)return 1==c?a.Fd.get(b):a.ke.get(b);c=a.Fd.get(b);a=a.ke.get(b);return null===c&&null===a?null:(c||[]).concat(a||[])}function Hh(a,b){var c=b.get(a);return null===c?[]:c}function Jh(a,b){var c=C();b.forEach(function(a){(a=this.He.get(a))&&c.add(a)},a);return D(c).map(function(a){return this.g.table(a)},a)}function Fh(a,b,c){return null!=c?0==c?Hh(b,a.mf):Hh(b,a.De):Hh(b,a.h)}
function Kh(a,b){var c=C();b.forEach(function(a){(a=this.Ge.get(a))&&a.forEach(function(a){c.add(a)})},a);return D(c).map(function(a){return this.g.table(a)},a)};function lk(a,b,c){this.yg=a;this.qg=b;this.Uf=c}r("lf.schema.Constraint",lk);lk.prototype.cd=g("yg");lk.prototype.getPrimaryKey=lk.prototype.cd;lk.prototype.Sd=g("Uf");lk.prototype.getForeignKeys=lk.prototype.Sd;function mk(a,b,c){var d=a.ref.split(".");if(2!=d.length)throw new E(540,c);this.Fe=b;this.wb=a.local;this.Ta=d[0];this.Jc=d[1];this.name=b+"."+c;this.action=a.action;this.timing=a.timing};function Z(a){nk(a);this.Nd=Td();this.B=a;this.K=z();this.wd=C();this.oc=C();this.md=C();this.Ca=null;this.qa=z();this.qd=!1;this.zb=[]}r("lf.schema.TableBuilder",Z);function ok(a){this.name=a.name;this.ob=a.order;this.autoIncrement=a.autoIncrement}var pk=C([0,6]);function nk(a){if(!/^[A-Za-z_][A-Za-z0-9_]*$/.test(a))throw new E(502,a);}function qk(a,b){if(b==a.B)throw new E(546,b);if(a.K.has(b)||a.qa.has(b)||a.oc.has(b))throw new E(503,a.B+"."+b);}
function rk(a,b){var c=!1;b.forEach(function(a){var b=this.K.get(a.name);c=c||a.autoIncrement;if(a.autoIncrement&&3!=b)throw new E(504);},a);if(c&&1<b.length)throw new E(505);}function sk(a){if(null!==a.Ca){var b=a.qa.get(a.Ca).map(function(a){return a.name}),c=0;if(a.zb.some(function(a,e){c=e;return-1!=b.indexOf(a.wb)},a))throw new E(543,a.zb[c].name);}}
function tk(a){if(null!==a.Ca){var b=function(a){return a.name},c=JSON.stringify(a.qa.get(a.Ca).map(b));a.qa.forEach(function(a,e){if(e!=this.Ca){var f=a.map(b);if(JSON.stringify(f)==c)throw new E(544,this.B+"."+e);}},a)}}function uk(a){null===a.Ca||a.qa.get(a.Ca).forEach(function(a){if(this.md.has(a.name))throw new E(545,this.B+"."+a.name);},a)}Z.prototype.yf=function(a,b){nk(a);qk(this,a);this.K.set(a,b);pk.has(b)&&this.Ae([a]);return this};Z.prototype.addColumn=Z.prototype.yf;
Z.prototype.Af=function(a,b){var c=this.B;this.Ca="pk"+(c[0].toUpperCase()+c.substring(1));nk(this.Ca);qk(this,this.Ca);c=vk(this,a,!0,void 0,b);rk(this,c);1==c.length&&this.wd.add(c[0].name);this.oc.add(this.Ca);this.qa.set(this.Ca,c);return this};Z.prototype.addPrimaryKey=Z.prototype.Af;
Z.prototype.zf=function(a,b){nk(a);qk(this,a);var c=new mk(b,this.B,a);q(c.action)||(c.action=0);q(c.timing)||(c.timing=0);if(1==c.action&&1==c.timing)throw new E(506);if(!this.K.has(c.wb))throw new E(540,a);this.zb.push(c);this.ze(a,[c.wb],this.wd.has(c.wb));return this};Z.prototype.addForeignKey=Z.prototype.zf;Z.prototype.Bf=function(a,b){nk(a);qk(this,a);var c=vk(this,b,!0);1==c.length&&(this.wd.add(c[0].name),wk(this,c[0].name));this.qa.set(a,c);this.oc.add(a);return this};
Z.prototype.addUnique=Z.prototype.Bf;function wk(a,b){a.zb.forEach(function(a){a.wb==b&&this.oc.add(a.name.split(".")[1])},a)}Z.prototype.Ae=function(a){vk(this,a,!1).forEach(function(a){this.md.add(a.name)},this);return this};Z.prototype.addNullable=Z.prototype.Ae;Z.prototype.ze=function(a,b,c,d){nk(a);qk(this,a);b=vk(this,b,!0,d);c&&this.oc.add(a);this.qa.set(a,b);return this};Z.prototype.addIndex=Z.prototype.ze;Z.prototype.Fb=ba("qd");Z.prototype.persistentIndex=Z.prototype.Fb;
Z.prototype.Ab=function(){sk(this);tk(this);uk(this);return new (xk(this))};Z.prototype.getSchema=Z.prototype.Ab;function yk(a){return a.zb}function vk(a,b,c,d,e){var f=b,f="string"==typeof b[0]?b.map(function(a){return new ok({name:a,order:null!=d?d:1,autoIncrement:e||!1})}):b.map(function(a){return new ok(a)});f.forEach(function(a){if(!this.K.has(a.name))throw new E(508,this.B,a.name);if(c){var b=this.K.get(a.name);if(0==b||6==b)throw new E(509,this.B,a.name);}},a);return f}
function xk(a){function b(){function b(c){return a.qa.get(c).map(function(a){return{ba:this[a.name],ob:a.ob,autoIncrement:a.autoIncrement}},this)}var d=Wb(a.K).map(function(b){this[b]=new Y(this,b,a.wd.has(b),a.md.has(b),a.K.get(b));return this[b]},this),e=Wb(a.qa).map(function(d){return new Og(a.B,d,a.oc.has(d),b.call(this,d))},this);S.call(this,a.B,d,e,a.qd);var f=null===a.Ca?null:new Og(a.B,a.Ca,!0,b.call(this,a.Ca)),h=d.filter(function(b){return!a.md.has(b.getName())});this.If=new lk(f,h,a.zb);
this.pf=zk(a,d,e)}t(b,S);b.prototype.yb=function(a){return new this.pf(Yb++,a)};b.prototype.createRow=b.prototype.yb;b.prototype.ib=function(a){var b={};this.jb().forEach(function(e){var f=e.getName();e=e.H();var h=a.value[f];if(0==e)if(e=h,null!=e&&""!=e){0!=e.length%2&&(e="0"+e);for(var h=new ArrayBuffer(e.length/2),k=new Uint8Array(h),n=0,B=0;n<e.length;n+=2)k[B++]=parseInt(e.substr(n,2),16);e=h}else e=null;else e=2==e?null!=h?new Date(h):null:h;b[f]=e},this);return new this.pf(a.id,b)};b.prototype.deserializeRow=
b.prototype.ib;b.prototype.Jb=g("If");b.prototype.getConstraint=b.prototype.Jb;return b}
function zk(a,b,c){function d(a,d){this.K=b;this.qa=c;Xb.call(this,a,d)}t(d,Xb);d.prototype.Je=function(){var a={};this.K.forEach(function(b){a[b.getName()]=b.kc()?null:Rc[b.H()]});return a};d.prototype.vf=function(){var a={};this.K.forEach(function(b){var c=b.getName();b=b.H();var d=this.s[c];a[c]=0==b?null!=d?ac(d):null:2==b?null!=d?d.getTime():null:6==b?null!=d?d:null:d},this);return a};var e=function(a){var b=this.K.get(a.getName()),c=this.Nd.Xe.get(b)||null;return function(b){return c(b[a.getName()])}}.bind(a),
f=function(a){var b=a.map(function(a){return e(a.ba)});return function(a){return b.map(function(b){return b(a)})}}.bind(a),h={};c.forEach(function(a){var b=a.m();a=1==a.f.length?e(a.f[0].ba):f(a.f);h[b]=a});d.prototype.mb=function(a){return-1!=a.indexOf("#")?this.id():h.hasOwnProperty(a)?h[a](this.s):null};return d};function Ak(a,b){this.g=new Bk(a,b);this.ub=z();this.zc=!1;this.j=null}r("lf.schema.Builder",Ak);function Ck(a,b){b.zb.forEach(function(a){var d=a.Ta;if(!this.ub.has(d))throw new E(536,a.name);var d=this.ub.get(d).Ab(),e=a.Jc;if(!d.hasOwnProperty(e))throw new E(537,a.name);if(b.Ab()[a.wb].H()!=d[e].H())throw new E(538,a.name);if(!d[e].Ec())throw new E(539,a.name);},a)}
Ak.prototype.Hf=function(a){a.zb.forEach(function(a){yk(this.ub.get(a.Ta)).forEach(function(c){if(c.wb==a.Jc)throw new E(534,a.name);},this)},this)};function Dk(a){a.zc||(a.ub.forEach(function(a){Ck(this,a);a=a.Ab();this.g.M.set(a.getName(),a)},a),A(a.ub).forEach(a.Hf,a),Ek(a),a.ub.clear(),a.zc=!0)}function Fk(a,b,c){b.xe||(b.xe=!0,b.ce=!0,b.Ke.forEach(function(a){a=c.get(a);if(!a.xe)Fk(this,a,c);else if(a.ce&&b!=a)throw new E(533);},a));b.ce=!1}
function Ek(a){var b=z();a.g.M.forEach(function(a,d){b.set(d,new Gk(d))},a);a.ub.forEach(function(a,d){a.zb.forEach(function(a){b.get(a.Ta).Ke.add(d)})});A(b).forEach(function(a){Fk(this,a,b)},a)}function Gk(a){this.ce=this.xe=!1;this.Ke=C();this.Oc=a}Ak.prototype.Ab=function(){this.zc||Dk(this);return this.g};Ak.prototype.getSchema=Ak.prototype.Ab;Ak.prototype.Oe=function(){var a=new kc("ns_"+this.g.name()),b;ik||(ik=new hk);b=ik;var c=null;b.Wd(a)?c=b.l(a):(c=new hk,b.qb(a,c));return c};
Ak.prototype.getGlobal=Ak.prototype.Oe;Ak.prototype.connect=function(a){if(null!==this.j&&this.j.jd)throw new E(113);if(null===this.j){var b=this.Oe();b.Wd(rc)||b.qb(rc,this.Ab());this.j=new X(b)}return this.j.Ha(a)};Ak.prototype.connect=Ak.prototype.connect;Ak.prototype.Kf=function(a){if(this.ub.has(a))throw new E(503,a);if(this.zc)throw new E(535);this.ub.set(a,new Z(a));return this.ub.get(a)};Ak.prototype.createTable=Ak.prototype.Kf;
Ak.prototype.pe=function(a){if(this.zc)throw new E(535);this.g.pe(a);return this};Ak.prototype.setPragma=Ak.prototype.pe;function Bk(a,b){this.B=a;this.Qa=b;this.M=z();this.jf={Of:!1}}r("lf.schema.DatabaseSchema",Bk);Bk.prototype.name=g("B");Bk.prototype.name=Bk.prototype.name;Bk.prototype.version=g("Qa");Bk.prototype.version=Bk.prototype.version;Bk.prototype.sa=function(){return A(this.M)};Bk.prototype.tables=Bk.prototype.sa;Bk.prototype.table=function(a){if(!this.M.has(a))throw new E(101,a);return this.M.get(a)};
Bk.prototype.table=Bk.prototype.table;Bk.prototype.info=function(){this.Te||(this.Te=new jk(this));return this.Te};Bk.prototype.hf=g("jf");Bk.prototype.pragma=Bk.prototype.hf;Bk.prototype.pe=ba("jf");r("lf.schema.create",function(a,b){return new Ak(a,b)});v.prototype.catch=v.prototype.te;v.prototype["catch"]=v.prototype.catch;
try{if(module){module.exports=lf;}}catch(e){}}.bind(window))()
//# sourceMappingURL=lovefield.min.js.map
